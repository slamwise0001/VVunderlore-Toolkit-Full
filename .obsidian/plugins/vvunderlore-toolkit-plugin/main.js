/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __create = Object.create;
var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __getProtoOf = Object.getPrototypeOf;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toESM = (mod, isNodeMode, target) => (target = mod != null ? __create(__getProtoOf(mod)) : {}, __copyProps(
  // If the importer is in node compatibility mode or this is not an ESM
  // file that has been converted to a CommonJS file using a Babel-
  // compatible transform (i.e. "__esModule" has not been set), then set
  // "default" to the CommonJS "module.exports" for node compatibility.
  isNodeMode || !mod || !mod.__esModule ? __defProp(target, "default", { value: mod, enumerable: true }) : target,
  mod
));
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// src/main.ts
var main_exports = {};
__export(main_exports, {
  InstallingModal: () => InstallingModal,
  default: () => VVunderloreToolkitPlugin
});
module.exports = __toCommonJS(main_exports);
var import_obsidian9 = require("obsidian");

// src/settings.ts
var import_obsidian7 = require("obsidian");

// src/firstinstallconfirm.ts
var import_obsidian5 = require("obsidian");

// src/editions.ts
var AVAILABLE_EDITIONS = [
  {
    id: "none",
    label: "None",
    repo: "",
    parser: "",
    sourceUrl: ""
  },
  {
    id: "5e-2014",
    label: "D&D 5e (2014)",
    repo: "5etools-mirror-3/5etools-2014-src",
    parser: "5e-2014",
    sourceUrl: "https://raw.githubusercontent.com/5etools-mirror-3/5etools-2014-src/main/data",
    categories: [""]
  },
  {
    id: "5e-2025",
    label: "D&D 5e (2025)",
    repo: "5etools-mirror-3/5etools-src",
    parser: "5e-2025",
    sourceUrl: "https://raw.githubusercontent.com/5etools-mirror-3/5etools-src/main/data"
  }
];

// src/parsers/5e-2014/installer.ts
var installer_exports = {};
__export(installer_exports, {
  importEditionData: () => importEditionData
});
var import_obsidian = require("obsidian");

// src/parsers/5e-2014/helpers/sourceMap.ts
var SOURCE_NAME_MAP = {
  // Core rulebooks
  PHB: "Player's Handbook",
  MM: "Monster Manual",
  DMG: "Dungeon Master's Guide",
  // Official expansions & adventure modules
  CoS: "Curse of Strahd",
  OotA: "Out of the Abyss",
  PotA: "Princes of the Apocalypse",
  HotDQ: "Hoard of the Dragon Queen",
  RoT: "Rise of Tiamat",
  SKT: "Storm King's Thunder",
  TftYP: "Tales from the Yawning Portal",
  ToA: "Tomb of Annihilation",
  // Supplemental guides
  XGE: "Xanathar's Guide to Everything",
  VGM: "Volo's Guide to Monsters",
  TCE: "Tasha's Cauldron of Everything",
  EGW: "Eberron: Rising from the Last War",
  ERLW: "Explorer's Guide to Wildemount",
  MTF: "Monsters of the Multiverse",
  VRGR: "Van Richten's Guide to Ravenloft",
  // Additional sourcebooks
  AAG: "Astral Adventurer\u2019s Guide",
  AI: "Acquisitions Incorporated",
  AitFRAVFT: "Adventures in the Forgotten Realms: A Visual Field Test",
  BMT: "Big Monster Tome",
  DoDk: "Dragon of Darkkeep",
  FTD: "Fizban\u2019s Treasury of Dragons",
  GGR: "Guildmaster\u2019s Guide to Ravnica",
  GHLoE: "Ghosts of the Horizon: Light Over Elensaria",
  IDRotF: "Icewind Dale: Rime of the Frostmaiden",
  LLK: "Lost Laboratory of Kwalish",
  SatO: "Sapphire of Truth",
  SCC: "Strixhaven: Curriculum of Chaos",
  TDCSR: "The Dungeon Coach\u2019s Rulebook",
  JttRC: "Journeys through the Radiant Citadel",
  "AitFR-AVT": "Adventures in the Forgotten Realms: A Verdant Tomb",
  "AitFR-FCD": "Adventures in the Forgotten Realms: From Cyan Depths",
  RMR: "Dungeons and Dragons: Rick and Morty",
  SCAG: "Sword Coast Adventurer's Guide",
  EEPC: "Elemental Evil Player's Companion",
  MOT: "Mythic Odysseys of Theros",
  WBtW: "The Wild Beyond the Witchlight",
  BGDIA: "Baldur's Gate: Descent Into Avernus",
  ToFW: "Turn of Fortune's Wheel",
  CoA: "Chains of Asmodeus",
  CRCotN: "Critical Role: Call of the Netherdeep",
  ToD: "Tyranny of Dragons",
  MPMM: "Mordenkainen Presents: Monsters of the Multiverse",
  LoX: "Light of Xaryxis",
  QftIS: "Quests from the Infinite Staircase",
  WDH: "Waterdeep: Dragon Heist",
  WDMM: "Waterdeep: Dungeon of the Mad Mage",
  PaBTSO: "Phandelver and Below: The Shattered Obelisk",
  CM: "Candlekeep Mysteries",
  GoS: "Ghosts of Saltmarsh",
  DSotDQ: "Dragonlance: Shadow of the Dragon Queen",
  KftGV: "Keys from the Golden Vault",
  SDW: "Essentials Kit: Sleeping Dragon's Wake",
  DoSI: "Dragons of Stormwreck Isle",
  GotSF: "Giants of the Star Forge",
  DIP: "Essentials Kit: Dragon of Icespire Peak",
  SLW: "Essentials Kit: Storm Lord's Wrath",
  IMR: "Infernal Machine Rebuild",
  VEoR: "Vecna: Eve of Ruin",
  PSI: "Plane Shift: Innistrad",
  AATM: "Adventure Atlas: The Mortuary",
  PSZ: "Plane Shift: Zendikar",
  DC: "Essentials Kit: Divine Contention",
  LMoP: "Lost Mine of Phandelver",
  RMBRE: "The Lost Dungeon of Rickedness: Big Rick Energy",
  HftT: "Hunt for the Thessalhydra",
  PSX: "Plane Shift: Ixalan",
  HFStCM: "Heroes' Feast: Saving the Childrens Menu",
  SjA: "Spelljammer Academy",
  LK: "Lightning Keep",
  RtG: "Return to the Glory",
  TTP: "The Tortle Package",
  LR: "Locathah Rising",
  PSA: "Plane Shift: Amonkhet",
  OGA: "One Grung Above",
  "NRH-TLT": "Nerds Restoring Harmony: The Lost Tomb",
  "NRH-AT": "Nerds Restoring Harmony: Adventure Together",
  BGG: "Bigby Presents: Glory of the Giants",
  RoTOS: "The Rise of Tiamat Online Supplement",
  XMtS: "X Marks the Spot",
  "HAT-LMI": "Honor Among Theives: Legendary Magic Items",
  DitLCoT: "Descent into the Lost Caverns of Tsojcanth",
  "AitFR-DN": "Adventures in the Forgotten Realms: Deepest Night",
  "AitFR-THP": "Adventures in the Forgotten Realms: The Hidden Pages",
  BAM: "Boo's Astral Menagerie",
  AZfyT: "A Zib for Your Thougts",
  MCV2DC: "Monstrous Compendium Volume 2: Dragonlance Creatures",
  PSK: "Plane Shift: Kaladesh",
  PSD: "Plane Shift: Dominaria",
  AWM: "Adventure with Muk",
  UATheMysticClass: "Unearthed Arcana: The Mystic Class",
  ALCurseOfStrahd: "Adventurers League: Curse of Strahd",
  ALElementalEvil: "Adventurers League: Elemental Evil",
  ALRageOfDemons: "Adventurers League: Rage of Demons"
};
function getFullSourceName(abbrev, editionId) {
  let name = SOURCE_NAME_MAP[abbrev] ?? abbrev;
  if (abbrev === "PHB") {
    if (editionId?.includes("2014")) name += " (2014)";
    else if (editionId?.includes("2025")) name += " (2025)";
  }
  return name;
}

// src/parsers/5e-2014/helpers/tagReplacer.ts
function replace5eTags(input) {
  let text;
  if (Array.isArray(input)) {
    text = input.join(" ");
  } else if (typeof input === "string") {
    text = input;
  } else {
    text = String(input ?? "");
  }
  return text.replace(
    /\{@(spell|item|creature|race) ([^|}]+)(?:\|[^}]+)?\}/g,
    (_, __, name) => `[[${capitalizeEach(name)}]]`
  ).replace(
    /\{@(condition|status|action|skill) ([^|}]+)(?:\|[^}]+)?\}/g,
    (_, tag, name) => `[[${capitalize(tag)}s#${name}|${capitalizeEach(name)}]]`
  ).replace(
    /\{@classFeature ([^|}]+)\|([^|}]+)(?:\|[^}]+)?\}/g,
    (_, feature, cls) => `[[${cls}#${feature}]]`
  ).replace(/\{@(book|filter) ([^|}]+)(?:\|[^}]+)?\}/g, (_, __, txt) => txt).replace(/\{@note ([^}]+)\}/g, (_, note) => `*${note}*`).replace(/\{@(damage|dice|dc|hit|sense) ([^}]+)\}/g, (_, __, value) => value).replace(/\{@chance ([^|}]+)(?:\|[^}]+)?\}/g, (_, value) => `${value}%`).replace(/\{@quickref ([^|}]+)(?:\|[^|]*\|[^}]*)?\}/g, (_, term) => {
    const known = [
      "difficult terrain",
      "total cover",
      "half cover",
      "three-quarters cover",
      "heavily obscured",
      "lightly obscured"
    ];
    return known.includes(term.toLowerCase()) ? `[[Rules#${capitalizeEach(term)}]]` : term;
  }).replace(/\{\@5etools\s+([^|}]+)\|[^}]+\}/g, "$1").replace(/\{@recharge\s*([^}]+)\}/g, (_, num) => `(recharge: ${num.trim()})`).replace(/\{@(scaledice|scaledamage)[^}]*\|([^|}]+)\}/g, (_, __, value) => value).replace(/\{@d20[^}]*\}/g, "").replace(/\{@[^}]+\}/g, "");
}
function capitalize(str) {
  return str.charAt(0).toUpperCase() + str.slice(1).toLowerCase();
}
function capitalizeEach(str) {
  return str.split(" ").map(capitalize).join(" ");
}

// src/parsers/5e-2014/helpers/markdownTable.ts
function renderMarkdownTable(entry) {
  if (entry.type !== "table" || !Array.isArray(entry.rows)) return "";
  const caption = entry.caption ? `##### ${entry.caption}
` : "";
  const headers = (entry.colLabels ?? []).map((h) => replace5eTags(h.trim()));
  const headerRow = `| ${headers.join(" | ")} |`;
  const dividerRow = `| ${headers.map(() => ":--").join(" | ")} |`;
  const bodyRows = entry.rows.map((row) => {
    const cells = row.map((cell) => {
      if (typeof cell === "string") return replace5eTags(cell);
      if (typeof cell === "object") {
        if (cell.roll?.exact !== void 0) return `${cell.roll.exact}`;
        if (cell.roll?.min !== void 0 && cell.roll?.max !== void 0) {
          return `${cell.roll.min}\u2013${cell.roll.max}`;
        }
        return replace5eTags(JSON.stringify(cell));
      }
      return replace5eTags(String(cell));
    });
    return `| ${cells.join(" | ")} |`;
  });
  return `${caption}${headerRow}
${dividerRow}
${bodyRows.join("\n")}`;
}

// src/parsers/5e-2014/helpers/formatEntry.ts
function formatEntry(entry) {
  if (typeof entry === "string") {
    const cleaned = entry.trim();
    if (!cleaned || cleaned === "}") return "";
    return replace5eTags(cleaned);
  }
  if (entry.type === "entries" && Array.isArray(entry.entries)) {
    const body = entry.entries.map(formatEntry).filter((str) => str.trim().length > 0).join("\n\n");
    return entry.name ? `##### ${entry.name}
${body}` : body;
  }
  if (entry.type === "list" && Array.isArray(entry.items)) {
    return entry.items.map((i) => `- ${replace5eTags(typeof i === "string" ? i : JSON.stringify(i))}`).join("\n");
  }
  if (entry.type === "table" && Array.isArray(entry.rows)) {
    return renderMarkdownTable(entry);
  }
  if (entry.type === "quote" && Array.isArray(entry.entries)) {
    const quote = entry.entries.map(formatEntry).join(" ").trim();
    const author = entry.by ? ` \u2014 ${entry.by}` : "";
    return `*"${quote}${author}"*`;
  }
  if (entry.type === "inset" && Array.isArray(entry.entries)) {
    const inset = entry.entries.map(formatEntry).join("\n").trim();
    return `> ${inset.replace(/\n/g, "\n> ")}`;
  }
  if (entry.type === "refClassFeature" && typeof entry.classFeature === "string") {
    const [name] = entry.classFeature.split("|");
    const anchor = name.replace(/[^\w\s-]/g, "").replace(/\s+/g, "-").toLowerCase();
    return `[[#${anchor}]]`;
  }
  return "";
}

// src/parsers/5e-2014/bestiary.ts
var skippedMonsters = [];
var SIZE_MAP = {
  T: "Tiny",
  S: "Small",
  M: "Medium",
  L: "Large",
  H: "Huge",
  G: "Gargantuan"
};
var ALIGNMENT_MAP = {
  L: "Lawful",
  N: "Neutral",
  C: "Chaotic",
  G: "Good",
  E: "Evil",
  U: "Unaligned"
};
function capitalizeFirst(str) {
  const s = String(str || "");
  return s.charAt(0).toUpperCase() + s.slice(1);
}
function formatSizeAbbrev(abbrev) {
  return SIZE_MAP[abbrev] || abbrev;
}
function formatAlignmentAbbrev(abbrev) {
  return abbrev.trim().split(/\s+/).map((letter) => ALIGNMENT_MAP[letter] || letter).join(" ");
}
var RAW_NPCS = [
  "Abjurer",
  "Acolyte",
  "Apprentice Wizard",
  "Archdruid",
  "Archer",
  "Archmage",
  "Assassin",
  "Bandit",
  "Bandit Captain",
  "Bard",
  "Berserker",
  "Blackguard",
  "Champion",
  "Commoner",
  "Conjurer",
  "Cult Fanatic",
  "Cultist",
  "Diviner",
  "Druid (NPC)",
  "Druid NPC",
  "Enchanter",
  "Evoker",
  "Gladiator",
  "Guard",
  "Illusionist",
  "Knight",
  "Kraken Priest",
  "Mage",
  "Martial Arts Adept",
  "Master Thief",
  "Necromancer",
  "Noble",
  "Priest",
  "Scout",
  "Spy",
  "Swashbuckler",
  "Thug",
  "Transmuter",
  "Tribal Warrior",
  "Veteran",
  "War Priest",
  "Warlock of the Archfey",
  "Warlock of the Fiend",
  "Warlock of the Great Old One",
  "Warlord"
];
var NORMALIZED_NPC_NAMES = new Set(RAW_NPCS.map((n) => normalizeName(n)));
function normalizeName(name) {
  return name.replace(/\s+/g, " ").trim().toLowerCase();
}
function categorizeCreature(monster) {
  const typeValue = monster.type;
  const name = monster.name;
  const t = typeof typeValue === "string" ? typeValue.toLowerCase() : typeValue?.type?.toLowerCase() || String(typeValue).toLowerCase();
  const normalizedName = normalizeName(name);
  if (monster.isNpc || monster.isNamedCreature) return "Story NPCs";
  if (t === "beast") return "Beasts";
  if (t === "humanoid" && NORMALIZED_NPC_NAMES.has(normalizedName)) return "Non-Beasts";
  if (t === "humanoid") return "Monsters";
  return "Monsters";
}
function renderAbilitiesTable(str, dex, con, int, wis, cha) {
  return [
    `| STR | DEX | CON | INT | WIS | CHA |`,
    `| --- | --- | --- | --- | --- | --- |`,
    `| ${str} | ${dex} | ${con} | ${int} | ${wis} | ${cha} |`
  ].join("\n");
}
function renderEntry(entry) {
  const name = entry.name;
  let descriptions = [];
  if (Array.isArray(entry.entries)) {
    descriptions = entry.entries;
  } else if (typeof entry.entries === "string") {
    descriptions = [entry.entries];
  } else if (Array.isArray(entry.desc)) {
    descriptions = entry.desc;
  } else if (typeof entry.desc === "string") {
    descriptions = [entry.desc];
  }
  const raw = descriptions.join(" ");
  const desc = replace5eTags(raw);
  return `***${name}.*** ${desc}`;
}
function parseBestiaryFile(json, editionId) {
  if (!json.monster) return [];
  json._editionId = editionId;
  const validMonsters = json.monster.filter((m) => {
    const acVal = Array.isArray(m.ac) ? m.ac[0]?.ac ?? m.ac[0] : typeof m.ac === "object" ? m.ac?.ac ?? null : m.ac;
    const hpVal = typeof m.hp === "object" ? m.hp?.average ?? m.hp?.hp ?? null : m.hp;
    return acVal != null && hpVal != null && !isNaN(Number(acVal)) && !isNaN(Number(hpVal));
  });
  const allNames = new Set(json.monster.map((m) => m.name));
  const validNames = new Set(validMonsters.map((m) => m.name));
  const missing = [...allNames].filter((name) => !validNames.has(name));
  return validMonsters.map((monster) => {
    const name = monster.name;
    const safeName = name.replace(/\//g, "-");
    const rawSize = monster.size || "M";
    const rawAlignment = Array.isArray(monster.alignment) ? monster.alignment.join(" ") : monster.alignment || "N";
    let rawType = "Unknown";
    if (typeof monster.type === "string") {
      rawType = capitalizeFirst(monster.type);
    } else if (monster.type?.type) {
      const base = capitalizeFirst(monster.type.type);
      const tags = monster.type.tags?.length ? ` (${monster.type.tags.map(capitalizeFirst).join(", ")})` : "";
      rawType = `${base}${tags}`;
    }
    monster._parsedType = rawType;
    const ac = Array.isArray(monster.ac) ? monster.ac[0].ac : monster.ac;
    const hp = monster.hp?.average ?? monster.hp;
    const cr = monster.cr;
    if (!ac && !hp) {
      skippedMonsters.push(monster.name);
      return null;
    }
    const abilities = Array.isArray(monster.ability) ? monster.ability : [monster.str, monster.dex, monster.con, monster.int, monster.wis, monster.cha];
    const [str = 10, dex = 10, con = 10, int = 10, wis = 10, cha = 10] = abilities;
    const speedList = [];
    if (typeof monster.speed === "object") {
      for (const [mode, val] of Object.entries(monster.speed)) {
        if (mode === "canHover") continue;
        if (val && typeof val === "object" && "number" in val) {
          const num = val.number;
          const cond = val.condition ? ` ${val.condition}` : "";
          speedList.push(`${mode} ${num} ft.${cond}`);
        } else {
          speedList.push(`${mode} ${val} ft.`);
        }
      }
    } else {
      speedList.push(`${monster.speed} ft.`);
    }
    const speed = speedList.join(", ");
    let source = getFullSourceName(monster.source, editionId);
    source = source.replace(/:/g, " -");
    const category = categorizeCreature(monster);
    const fm = buildFM(monster, BESTIARY_META_DEFS);
    const yaml = serializeFrontmatter(fm, BESTIARY_META_DEFS);
    const savingThrows = fm[FM_FIELDS.SAVING_THROWS] || [];
    const skills = fm[FM_FIELDS.SKILLS] || [];
    const senses = fm[FM_FIELDS.SENSES] || [];
    const languages = fm[FM_FIELDS.LANGUAGES] || [];
    let body = `# ${name}

${formatSizeAbbrev(rawSize)} ${rawType}, ${formatAlignmentAbbrev(rawAlignment)}

**Armor Class**: ${ac}
**Hit Points**: ${hp}
**Speed**: ${speed}
` + (savingThrows.length ? `**Saving Throws**: ${savingThrows.join(", ")}
` : "") + (skills.length ? `**Skills**: ${skills.join(", ")}
` : "") + (senses.length ? `**Senses**: ${senses.join(", ")}
` : "") + (languages.length ? `**Languages**: ${languages.join(", ")}
` : "") + `**Challenge**: ${cr}

` + renderAbilitiesTable(str, dex, con, int, wis, cha);
    if (monster.trait) body += `

### Traits
${monster.trait.map(renderEntry).join("\n\n")}`;
    if (monster.action) body += `

### Actions
${monster.action.map(renderEntry).join("\n\n")}`;
    if (monster.reaction) body += `

### Reactions
${monster.reaction.map(renderEntry).join("\n\n")}`;
    if (monster.legendary) body += `

### Legendary Actions
${monster.legendary.map(renderEntry).join("\n\n")}`;
    const content = `---
${yaml}
---

${body}`;
    return {
      path: `${category}/${safeName}.md`,
      content
    };
  });
}

// src/parsers/5e-2014/items.ts
function capitalizeFirst2(input) {
  if (typeof input !== "string" || input.length === 0) return "";
  const s = input.trim();
  return s.charAt(0).toUpperCase() + s.slice(1).toLowerCase();
}
var DAMAGE_TYPE_MAP = {
  P: "Piercing",
  B: "Bludgeoning",
  S: "Slashing",
  N: "Necrotic",
  R: "Radiant",
  F: "Fire",
  C: "Cold",
  L: "Lightning",
  T: "Thunder",
  A: "Acid",
  H: "Healing",
  U: "Force",
  V: "Psychic"
};
var PROPERTY_MAP = {
  A: "Ammunition",
  F: "Finesse",
  H: "Heavy",
  L: "Light",
  R: "Reload",
  S: "Special",
  "2H": "Two-Handed",
  T: "Thrown",
  V: "Versatile"
};
var ITEM_TYPE_MAP = {
  $C: "Currency",
  $G: "Gem",
  A: "Ammunition",
  "AIR|DMG": "Vehicle (air)",
  "AF|DMG": "Future Ammo",
  AT: "Artisan Tools",
  EXP: "Explosive",
  FD: "Food and Drink",
  G: "Gear",
  GS: "Game",
  HA: "Heavy Armor",
  "IDG|TDCSR": "Illicit Drug",
  INS: "Instrument",
  LA: "Light Armor",
  M: "Weapon",
  MA: "Medium Armor",
  MNT: "Mounts and Vehicles",
  ODH: "Miscellaneous",
  P: "Consumable",
  R: "Ranged Weapon",
  RD: "Rod",
  RG: "Ring",
  S: "Shield",
  SC: "Scroll",
  SCF: "Spell Casting Focus",
  SHP: "Ship",
  T: "Tool",
  TAH: "Mounts and Vehicles",
  TG: "Trade Goods",
  VEH: "Mounts and Vehicles",
  WD: "Wand"
};
var codeFolderMap = {
  // Weapons & Armor
  "A": "Weapons and Armor/Ammunition",
  "M": "Weapons and Armor/Weapons",
  "R": "Weapons and Armor/Ranged Weapons",
  "S": "Weapons and Armor/Shields",
  "LA": "Weapons and Armor/Armor/Light Armor",
  "MA": "Weapons and Armor/Armor/Medium Armor",
  "HA": "Weapons and Armor/Armor/Heavy Armor",
  "EXP": "Weapons and Armor/Weapons/Explosives",
  // Future Ammo (AF|DMG → rawCode "AF")
  "AF": "Weapons and Armor/Ammunition/Future Ammo",
  // Magical Items
  "RD": "Magical Items/Rods",
  "RG": "Magical Items/Rings",
  "SC": "Magical Items/Scrolls",
  "SCF": "Magical Items/Spell Casting Focus",
  "WD": "Magical Items/Wands",
  // Valuables
  "$G": "Valuables/Gems",
  // Currency (rawCode becomes "C" after stripping $)
  "C": "Valuables/Currency",
  "TG": "Valuables/Trade Goods",
  // Artisan Goods
  "AT": "Artisan Goods/Tools",
  "T": "Artisan Goods/Tools",
  "INS": "Artisan Goods/Instruments",
  "GS": "Artisan Goods/Games",
  // Gear & Mounts
  "G": "Gear",
  // Mounts & Vehicles
  "MNT": "Gear/Mounts and Vehicles",
  "TAH": "Gear/Mounts and Vehicles",
  "VEH": "Gear/Mounts and Vehicles",
  // Air vehicles (AIR|DMG → rawCode "AIR")
  "AIR": "Gear/Mounts and Vehicles/Air",
  // Consumables
  "P": "Consumables",
  // Food & Drink
  "FD": "Consumables/Food and Drink",
  // Illicit Drugs (IDG|TDCSR → rawCode "IDG")
  "IDG": "Gear/Illicit Drugs",
  // Miscellaneous (ODH)
  "ODH": "Gear/Miscellaneous"
};
function parseItemsFile(json, editionId) {
  const rawItems = [];
  if (Array.isArray(json.baseitem)) rawItems.push(...json.baseitem);
  if (Array.isArray(json.item)) rawItems.push(...json.item);
  if (Array.isArray(json.object)) rawItems.push(...json.object);
  if (Array.isArray(json.vehicle)) rawItems.push(...json.vehicle);
  if (!rawItems.length) return [];
  const baseNames = new Set(
    Array.isArray(json.baseitem) ? json.baseitem.map((b) => b.name) : []
  );
  const out = [];
  for (const it of rawItems) {
    const name = it.name;
    const safeName = name.replace(/[\/\\:]/g, "-");
    const rawCode = (it.type || "").split("|")[0].split("|")[0].replace(/^\$/, "");
    let folder = codeFolderMap[rawCode] ?? "Miscellaneous";
    if (it.bonusWeapon) {
      folder = `${folder}/Variants`;
    } else {
      const isMagic = !!it.wondrous || !!it.reqAttune || !!it.req_attune || String(it.rarity).toLowerCase().includes("magic");
      if (isMagic) {
        const [, ...rest] = folder.split("/");
        folder = ["Magical Items", ...rest].join("/");
      }
    }
    if ((folder.startsWith("Weapons and Armor/Weapons") || folder.startsWith("Weapons and Armor/Ranged Weapons")) && it.weaponCategory) {
      folder = `${folder}/${capitalizeFirst2(it.weaponCategory)}`;
    }
    json._editionId = editionId;
    const fm = buildFM(it, ITEM_META_DEFS);
    if (fm[FM_FIELDS.MAGICAL]) {
      fm[FM_FIELDS.VERMUN] = false;
    }
    if (rawCode === "M" && it.weaponCategory) {
      fm.type = `${capitalizeFirst2(it.weaponCategory)} Weapon`;
    } else if (ITEM_TYPE_MAP[rawCode]) {
      fm.type = ITEM_TYPE_MAP[rawCode];
    }
    if (Array.isArray(fm.damageTypes)) {
      fm.damageTypes = fm.damageTypes.map(
        (code) => DAMAGE_TYPE_MAP[code] || code
      );
    }
    let yaml = serializeFrontmatter(fm, ITEM_META_DEFS);
    if (Array.isArray(it.packContents)) {
      yaml += "\npackContents:";
      for (const pc of it.packContents) {
        yaml += `
  - item: "${pc.item}"
    quantity: ${pc.quantity}`;
      }
    }
    const frontmatter = `---
${yaml}
---`;
    const lines = [];
    lines.push(`# ${name}`);
    lines.push("");
    const subtitle = it.weapon ? `${capitalizeFirst2(it.weaponCategory)} Weapon` : it.armor ? folder.split("/").pop() || "Armor" : "";
    if (subtitle) lines.push(`### *${subtitle}*`);
    if (it.weapon) {
      lines.push(`**Category**: ${capitalizeFirst2(it.weaponCategory)}`);
      lines.push(`**Damage**: ${it.dmg1 ?? ""}${it.dmg2 ? ` / ${it.dmg2}` : ""}`);
      const typesBody = (Array.isArray(it.dmgType) ? it.dmgType : [it.dmgType]).filter((t) => Boolean(t)).map((t) => DAMAGE_TYPE_MAP[t] || t);
      lines.push(`**Damage Type**: ${typesBody.join(", ")}`);
      lines.push(`**Range**: ${it.range ?? "\u2014"}`);
      lines.push(`**Reload**: ${it.reload ?? "\u2014"}`);
      if (it.ammoType) lines.push(`**Ammo Type**: ${it.ammoType}`);
      if (Array.isArray(it.property) && it.property.length) {
        const propsBody = it.property.map((p) => PROPERTY_MAP[p] || p);
        lines.push(`**Properties**: ${propsBody.join(", ")}`);
      }
    }
    if (it.armor) {
      lines.push(`**Armor Class**: ${it.ac}`);
      if (it.stealth) lines.push(`**Stealth Disadvantage**: true`);
      lines.push("");
    }
    const desc = it.entries ?? it.desc;
    if (desc) {
      for (const p of Array.isArray(desc) ? desc : [desc]) {
        if (typeof p === "string") {
          for (const line of replace5eTags(p).split("\n")) {
            lines.push(line);
          }
          lines.push("");
        } else if (p && typeof p === "object") {
          if (lines[lines.length - 1] === "") {
            lines.pop();
          }
          lines.push(`#### ${p.name}`);
          const sub = Array.isArray(p.entries) ? p.entries : [];
          for (const sp of sub) {
            for (const line of replace5eTags(sp).split("\n")) {
              lines.push(line);
            }
          }
          lines.push("");
        }
      }
    }
    const body = lines.join("\n");
    out.push({ path: `Items/${folder}/${safeName}.md`, content: `${frontmatter}

${body}` });
  }
  return out.sort((a, b) => a.path.localeCompare(b.path));
}

// src/parsers/5e-2014/helpers/frontmatter.ts
function cap(str) {
  if (typeof str !== "string") return "";
  return str.charAt(0).toUpperCase() + str.slice(1);
}
var ABILITY_FULL = {
  str: "Strength",
  dex: "Dexterity",
  con: "Constitution",
  int: "Intelligence",
  wis: "Wisdom",
  cha: "Charisma"
};
var SIZE_MAP2 = {
  T: "Tiny",
  S: "Small",
  M: "Medium",
  L: "Large",
  H: "Huge",
  G: "Gargantuan"
};
var FM_FIELDS = {
  ABILITY_BONUSES: "ability_bonuses",
  AC: "AC",
  ALIGNMENT: "Alignment",
  AMMO_TYPE: "Ammo Type",
  ARMOR_PROFICIENCIES: "armor-prof",
  ATTACK_TYPE: "attack_type",
  ATTUNEMENT: "Attunement",
  ATTUNE_REQ: "Attune_Req",
  CASTING_TIME: "casting_time",
  CHARISMA: "charisma",
  CHA_MOD: "cha_mod",
  CONCENTRATION: "concentration",
  CONDITION_IMM: "cond_immunity",
  CONSTITUTION: "constitution",
  CON_MOD: "con_mod",
  COST: "cost",
  COMPONENTS: "Components",
  CHALLENGE_RATING: "CR",
  DAMAGE_TYPE: "damage_type",
  DAMAGE_TYPES: "damageTypes",
  DAMAGE: "damage",
  DAMAGE_RES: "dmg_resistance",
  DAMAGE_IMM: "dmg_immunity",
  DEXTERITY: "dexterity",
  DEX_MOD: "dex_mod",
  DURATION: "duration",
  RULESET: "ruleset",
  HP: "HP",
  INTELLIGENCE: "intelligence",
  INT_MOD: "int_mod",
  LANGUAGES: "languages",
  LEVEL: "level",
  MAGICAL: "magical",
  MATERIAL: "material",
  NAME: "name",
  PROPERTIES: "properties",
  RANGE: "range",
  RARITY: "rarity",
  RELOAD: "reload",
  RITUAL: "ritual",
  SAVE: "save",
  SAVING_THROWS: "saving_throws",
  SCHOOL: "school",
  SENSES: "senses",
  SIZE: "size",
  SKILLS: "skills",
  SKILL_CHOICE_LIST: "skill_choice_list",
  SOMATIC: "somatic",
  SOURCE: "source",
  SPECIES: "species",
  SPEED: "speed",
  SPELL_CAST_MOD: "Spell Cast Mod",
  SPELL_RANGE: "Range",
  STEALTH_DISADVANTAGE: "stealthDisadvantage",
  STRENGTH: "strength",
  STR_MOD: "str_mod",
  SUBRACES: "subraces",
  TOOL_PROFICIENCIES: "tool-prof",
  TOOL_CHOICE_LIST: "tool_choice_list",
  TRAITS: "traits",
  TYPE: "type",
  VARIANT: "Variant",
  VERBAL: "verbal",
  VERMUN: "vermun",
  WEAPON_PROFICIENCIES: "weapon-prof",
  WEIGHT: "weight",
  WISDOM: "wisdom",
  WIS_MOD: "wis_mod"
};
var unifiedArmorProfs = (val) => Array.isArray(val?.armor) ? val.armor.map(cap) : Array.isArray(val) ? val.map(cap) : [];
function unifiedWeaponProfs(val) {
  const rawArr = Array.isArray(val?.weapons) ? val.weapons : Array.isArray(val) ? val : [];
  const out = /* @__PURE__ */ new Set();
  function handleOne(entry) {
    if (Array.isArray(entry)) {
      entry.forEach(handleOne);
      return;
    }
    if (typeof entry === "string") {
      const lit = entry.trim().toLowerCase();
      if (lit === "simple") {
        out.add("Simple Weapons");
      } else if (lit === "martial") {
        out.add("Martial Weapons");
      } else {
        const text = entry.startsWith("{@") ? replace5eTags(entry) : cap(entry);
        out.add(text);
      }
      return;
    }
    if (entry && typeof entry === "object" && entry.proficiency) {
      const name = cap(entry.proficiency);
      out.add(entry.optional ? `${name} (optional)` : name);
    }
  }
  rawArr.forEach(handleOne);
  return [...out];
}
var unifiedSaves = (val) => {
  if (Array.isArray(val)) {
    return val.map(
      (k) => ({
        str: "Strength",
        dex: "Dexterity",
        con: "Constitution",
        int: "Intelligence",
        wis: "Wisdom",
        cha: "Charisma"
      })[k] ?? k.toUpperCase()
    );
  }
  if (typeof val === "object" && val !== null) {
    return Object.keys(val).map((k) => k.toUpperCase());
  }
  return [];
};
var unifiedSkills2 = (val) => {
  if (val && !Array.isArray(val) && typeof val === "object" && // ensure every value is a string or number
  Object.values(val).every((v) => typeof v === "string" || typeof v === "number")) {
    return Object.entries(val).map(
      ([skill, mod]) => `${cap(skill)} ${mod}`.trim()
    );
  }
  if (val && !Array.isArray(val) && typeof val === "object") {
    const nested = val.skills ?? val.skillProf ?? val.skillProficiencies;
    return unifiedSkills2(nested);
  }
  if (!Array.isArray(val)) return [];
  const out = /* @__PURE__ */ new Set();
  for (const e of val) {
    if (e && typeof e === "object" && typeof e.any === "number") {
      out.add(`Choose ${e.any}`);
      continue;
    }
    if (e && typeof e === "object" && e.choose) {
      const cnt = e.choose.count ?? 1;
      out.add(`Choose ${cnt}`);
    }
    if (e && typeof e === "object") {
      for (const [k, v] of Object.entries(e)) {
        if (v === true) out.add(cap(k));
      }
    }
    if (typeof e === "string") {
      out.add(cap(e));
    }
  }
  return [...out];
};
var unifiedToolProfs = (val) => {
  let entries = Array.isArray(val) ? val : Array.isArray(val?.toolProficiencies) ? val.toolProficiencies : Array.isArray(val?.tools) ? val.tools : [];
  const out = /* @__PURE__ */ new Set();
  let sawChoose = false;
  for (const e of entries) {
    if (typeof e === "string") {
      out.add(cap(e));
      continue;
    }
    if (e?.choose) {
      const cnt = e.choose.count ?? 1;
      sawChoose = true;
      out.add(`Choose ${cnt}`);
    }
    for (const [k, v] of Object.entries(e)) {
      if (v === true) {
        out.add(cap(k));
      } else if (typeof v === "number" && k.startsWith("any")) {
        const raw = k.replace(/^any/, "");
        const spaced = raw.replace(/([a-z])([A-Z])/g, "$1 $2").split(" ").map(cap).join(" ");
        out.add(`Choose ${v} ${spaced}`);
      }
    }
  }
  return [...out];
};
var ALL_FIELD_DEFS = [
  // ─── Core ───
  { callSign: "NAME", jsonKey: "name" },
  { callSign: "SOURCE", jsonKey: ["source"], conv: (raw, all) => {
    const out = /* @__PURE__ */ new Set();
    const arr = Array.isArray(raw) ? raw : [raw];
    arr.forEach((src) => out.add(getFullSourceName(src, all._editionId)));
    for (const os of all.otherSources ?? []) out.add(getFullSourceName(os.source, all._editionId));
    for (const rep of all.reprintedAs ?? []) {
      const [, src] = rep.split("|");
      out.add(getFullSourceName(src, all._editionId));
    }
    return [...out];
  } },
  // ─── Proficiencies ───
  { callSign: "ARMOR_PROFICIENCIES", jsonKey: ["armorProficiencies", "armorProfs", "startingProficiencies"], conv: unifiedArmorProfs },
  {
    callSign: "WEAPON_PROFICIENCIES",
    jsonKey: ["weaponProficiencies", "weaponProfs", "startingProficiencies"],
    conv: unifiedWeaponProfs
  },
  { callSign: "TOOL_PROFICIENCIES", jsonKey: ["toolProficiencies", "toolProfs", "startingProficiencies"], conv: unifiedToolProfs },
  {
    callSign: "TOOL_CHOICE_LIST",
    jsonKey: ["toolProficiencies", "toolProfs", "startingProficiencies"],
    conv: (raw) => {
      const arr = Array.isArray(raw) ? raw : Array.isArray(raw?.toolProficiencies) ? raw.toolProficiencies : Array.isArray(raw?.tools) ? raw.tools : [];
      const choice = arr.find((e) => e?.choose);
      return choice?.choose?.from?.map((s) => cap(s)) ?? [];
    }
  },
  { callSign: "SAVING_THROWS", jsonKey: ["save", "proficiency"], conv: unifiedSaves },
  {
    callSign: "SKILLS",
    jsonKey: ["skill", "skillProf", "skillProficiencies", "startingProficiencies"],
    conv: unifiedSkills2
  },
  {
    callSign: "SKILL_CHOICE_LIST",
    jsonKey: ["skill", "skillProf", "skillProficiencies", "startingProficiencies"],
    conv: (raw) => {
      const arr = Array.isArray(raw) ? raw : Array.isArray(raw?.skillProficiencies) ? raw.skillProficiencies : Array.isArray(raw?.skills) ? raw.skills : Array.isArray(raw?.skillProf) ? raw.skillProf : [];
      const choiceObj = arr.find((e) => e?.choose || typeof e.any === "number");
      if (!choiceObj) return [];
      if (choiceObj.choose && Array.isArray(choiceObj.choose.from)) {
        return choiceObj.choose.from.map(cap);
      }
      if (typeof choiceObj.any === "number") {
        return SKILL_OPTIONS;
      }
      return [];
    }
  },
  {
    callSign: "SPELL_CAST_MOD",
    jsonKey: "spellcastingAbility",
    conv: (raw) => {
      const key = String(raw).toLowerCase();
      return ABILITY_FULL[key] || key.toUpperCase();
    }
  },
  {
    callSign: "RULESET",
    jsonKey: "name",
    // ignore the raw value, always print HELLO
    conv: (_raw, _all) => "D&D 5e (2025)"
  },
  // ─── Spells ───
  { callSign: "LEVEL", jsonKey: "level" },
  { callSign: "SCHOOL", jsonKey: "school", conv: (s) => SCHOOL_MAP[s] ?? s },
  { callSign: "CASTING_TIME", jsonKey: "time", conv: formatTime },
  { callSign: "SPELL_RANGE", jsonKey: "range", conv: formatRange },
  { callSign: "DURATION", jsonKey: "duration", conv: formatDuration },
  { callSign: "VERBAL", jsonKey: "components", conv: (c) => !!c.v },
  { callSign: "SOMATIC", jsonKey: "components", conv: (c) => !!c.s },
  { callSign: "MATERIAL", jsonKey: "components", conv: (c) => !!c.m },
  {
    callSign: "COMPONENTS",
    jsonKey: "components",
    conv: (c) => {
      if (!c.m) return [];
      const raw = Array.isArray(c.m) ? c.m : [c.m];
      return raw.map((item) => {
        if (typeof item === "string") return item;
        if (item && typeof item === "object" && typeof item.text === "string") {
          return item.text;
        }
        return null;
      }).filter((comp) => comp !== null);
    }
  },
  { callSign: "ATTACK_TYPE", jsonKey: "attackType" },
  { callSign: "DAMAGE_TYPE", jsonKey: "damageInflict", conv: (d) => Array.isArray(d) ? d[0] : d },
  { callSign: "RITUAL", jsonKey: "ritual" },
  { callSign: "CONCENTRATION", jsonKey: "duration", conv: (ds) => Array.isArray(ds) && ds.some((x) => x.concentration) },
  { callSign: "SAVE", jsonKey: "saveAttr" },
  // ─── Species / Creatures ───
  { callSign: "SPECIES", jsonKey: "name" },
  {
    callSign: "SIZE",
    jsonKey: "size",
    conv: (raw) => {
      if (Array.isArray(raw)) {
        return raw.map((r) => SIZE_MAP2[r] || r);
      } else {
        return SIZE_MAP2[raw] || raw;
      }
    }
  },
  {
    callSign: "SPEED",
    jsonKey: "speed",
    conv: (sp) => {
      if (typeof sp === "number") {
        return [`Walk ${sp} ft.`];
      }
      if (!sp || typeof sp !== "object") return [];
      return Object.entries(sp).filter(([mode]) => mode !== "canHover").map(([mode, v]) => {
        const n = typeof v === "object" && v !== null && "number" in v ? v.number : v;
        const label = mode === "walk" ? "Walk" : cap(mode);
        return `${label} ${n} ft.`;
      });
    }
  },
  { callSign: "LANGUAGES", jsonKey: ["languages", "languageProficiencies"], conv: (arr) => {
    if (!Array.isArray(arr)) return [];
    const out = [];
    for (const lp of arr) {
      if (typeof lp === "string") out.push(cap(lp));
      else if (typeof lp === "object") {
        for (const [lang, val] of Object.entries(lp)) {
          if (val) out.push(cap(lang));
        }
      }
    }
    return [...new Set(out)];
  } },
  { callSign: "SENSES", jsonKey: "senses", conv: (sen) => {
    if (Array.isArray(sen)) return sen.map((s) => s.replace(/^\d+\s*/, "").replace(/^./, (c) => c.toUpperCase()));
    if (sen && typeof sen === "object") return Object.entries(sen).map(([k, v]) => `${k.charAt(0).toUpperCase() + k.slice(1)} ${v}`);
    return [];
  } },
  {
    callSign: "TRAITS",
    jsonKey: ["classFeatures", "entries"],
    conv: (raw, allJson) => {
      const clsRec = Array.isArray(allJson.class) ? allJson.class[0] : allJson;
      const className = typeof clsRec.name === "string" ? clsRec.name : "";
      const omit = /* @__PURE__ */ new Set([
        "Ability Score Improvement",
        "Archetype Feature",
        "Subclass Feature"
        // add more if you like…
      ]);
      const seen = /* @__PURE__ */ new Set();
      if (Array.isArray(allJson.classFeatures)) {
        return allJson.classFeatures.flatMap((feat) => {
          if (feat && typeof feat === "object" && feat.gainSubclassFeature) return [];
          const rawName = typeof feat === "string" ? feat : typeof feat.classFeature === "string" ? feat.classFeature : "";
          const name = rawName.split("|")[0].trim();
          if (!name || omit.has(name) || seen.has(name)) return [];
          seen.add(name);
          const anchor = name.replace(/[^\w\s]/g, "").replace(/\s+/g, " ").trim().replace(/\b\w/g, (c) => c.toUpperCase());
          return `[[${className}#${anchor}|${name}]]`;
        });
      }
      const ents = Array.isArray(raw) ? raw : [];
      const featureNames = ents.filter((e) => e?.data?.isFeature && typeof e.name === "string").map((e) => e.name.replace(/^Feature:\s*/, "").trim());
      if (featureNames.length) return featureNames;
      return ents.filter((e) => e && typeof e.name === "string").map((e) => e.name.replace(/^Feature:\s*/, "").trim());
    }
  },
  { callSign: "AC", jsonKey: "ac", conv: (a) => Array.isArray(a) ? a[0].ac : a },
  { callSign: "HP", jsonKey: "hp", conv: (hp) => hp?.average ?? hp },
  { callSign: "CHALLENGE_RATING", jsonKey: "cr" },
  { callSign: "STRENGTH", jsonKey: "ability", conv: (arr) => Array.isArray(arr) ? arr[0] : arr?.str ?? 0 },
  { callSign: "DEXTERITY", jsonKey: "ability", conv: (arr) => Array.isArray(arr) ? arr[1] : arr?.dex ?? 0 },
  { callSign: "CONSTITUTION", jsonKey: "ability", conv: (arr) => Array.isArray(arr) ? arr[2] : arr?.con ?? 0 },
  { callSign: "INTELLIGENCE", jsonKey: "ability", conv: (arr) => Array.isArray(arr) ? arr[3] : arr?.int ?? 0 },
  { callSign: "WISDOM", jsonKey: "ability", conv: (arr) => Array.isArray(arr) ? arr[4] : arr?.wis ?? 0 },
  { callSign: "CHARISMA", jsonKey: "ability", conv: (arr) => Array.isArray(arr) ? arr[5] : arr?.cha ?? 0 },
  {
    callSign: "ALIGNMENT",
    jsonKey: "alignment",
    conv: (a) => {
      const raw = Array.isArray(a) ? a.join(" ") : typeof a === "string" ? a : String(a);
      const cleaned = raw.replace(/\bA\b/g, "Any").replace(/\bU\b/g, "Unaligned").replace(/\bN\b/g, "Neutral").replace(/\bL\b/g, "Lawful").replace(/\bC\b/g, "Chaotic").replace(/\bG\b/g, "Good").replace(/\bE\b/g, "Evil");
      return formatAlignmentAbbrev(cleaned);
    }
  },
  {
    callSign: "TYPE",
    jsonKey: "type",
    conv: (t) => {
      if (typeof t === "string") {
        return ITEM_TYPE_MAP[t] ?? cap(t);
      }
      if (t && typeof t === "object") {
        const code = String(t.type || "").toUpperCase();
        if (ITEM_TYPE_MAP[code]) {
          return ITEM_TYPE_MAP[code];
        }
        const base = t.type ? cap(t.type) : "Unknown";
        const tags = Array.isArray(t.tags) ? t.tags.map(cap) : [];
        return tags.length ? `${base} (${tags.join(", ")})` : base;
      }
      return void 0;
    }
  },
  // ─── Items ───
  { callSign: "TYPE", jsonKey: "_parsedType" },
  { callSign: "RARITY", jsonKey: "rarity", conv: (r) => {
    const s = String(r || "").toLowerCase();
    return s && s !== "none" ? s[0].toUpperCase() + s.slice(1) : void 0;
  } },
  {
    callSign: "COST",
    jsonKey: "value",
    conv: (raw) => {
      const s = String(raw).trim().toLowerCase();
      let num;
      if (s.endsWith("cp")) {
        num = parseFloat(s);
        return num >= 100 ? `${Math.round(num / 100 * 100) / 100}gp` : `${num}cp`;
      }
      if (s.endsWith("sp")) {
        num = parseFloat(s);
        return num >= 10 ? `${Math.round(num / 10 * 100) / 100}gp` : `${num}sp`;
      }
      if (s.endsWith("gp")) {
        num = parseFloat(s);
        return `${Math.round(num * 100) / 100}gp`;
      }
      num = parseFloat(s) || 0;
      return num >= 100 ? `${Math.round(num / 100 * 100) / 100}gp` : `${num}cp`;
    }
  },
  { callSign: "WEIGHT", jsonKey: "weight" },
  { callSign: "MAGICAL", jsonKey: "wondrous", conv: (_w, all) => !!all.wondrous || !!all.reqAttune },
  { callSign: "VARIANT", jsonKey: "bonusWeapon", conv: (b) => typeof b === "string" && b.startsWith("+") },
  { callSign: "PROPERTIES", jsonKey: "property", conv: (arr) => Array.isArray(arr) ? arr.map((p) => PROPERTY_MAP[p] || p) : [] },
  { callSign: "DAMAGE", jsonKey: "dmg1", conv: (d, all) => d ? all.dmg2 ? `${d} / ${all.dmg2}` : `${d}` : void 0 },
  { callSign: "DAMAGE_TYPES", jsonKey: "dmgType", conv: (dt) => dt == null ? [] : Array.isArray(dt) ? dt : [dt] },
  { callSign: "RANGE", jsonKey: "range" },
  { callSign: "RELOAD", jsonKey: "reload" },
  { callSign: "AMMO_TYPE", jsonKey: "ammoType" },
  { callSign: "STEALTH_DISADVANTAGE", jsonKey: "stealth" },
  {
    callSign: "ATTUNEMENT",
    jsonKey: ["wondrous", "reqAttune", "req_attune", "reqAttuneTags"],
    conv: (_raw, allJson) => {
      const j = allJson;
      const hasText = typeof j.reqAttune === "string" && j.reqAttune.trim() !== "";
      const hasTags = Array.isArray(j.reqAttuneTags) && j.reqAttuneTags.length > 0;
      return hasText || hasTags;
    }
  },
  {
    callSign: "ATTUNE_REQ",
    jsonKey: "reqAttuneTags",
    conv: (tags = [], _all) => {
      const mapLetter = {
        A: "Any",
        U: "Unaligned",
        N: "Neutral",
        L: "Lawful",
        C: "Chaotic",
        G: "Good",
        E: "Evil"
      };
      const reqs = [];
      for (const tag of tags) {
        if (tag.class && Array.isArray(tag.alignment)) {
          const cls = cap(tag.class);
          for (const code of tag.alignment) {
            reqs.push(`${mapLetter[code] || code} ${cls}`);
          }
        } else if (tag.class) {
          reqs.push(cap(tag.class));
        } else if (Array.isArray(tag.alignment)) {
          for (const code of tag.alignment) {
            reqs.push(mapLetter[code] || code);
          }
        } else if (tag.background) {
          const [bg] = String(tag.background).split("|");
          reqs.push(bg.split(" ").map(cap).join(" "));
        } else if (tag.spellcasting) {
          reqs.push("Spellcaster");
        }
      }
      return Array.from(new Set(reqs));
    }
  },
  {
    callSign: "VERMUN",
    jsonKey: "wondrous",
    // or whatever property you use to detect “magical”
    conv: (_raw, all) => !!all.wondrous || !!all.reqAttune
  },
  // ─── Other ───
  { callSign: "DAMAGE_RES", jsonKey: "resist", conv: (v) => Array.isArray(v) ? v.map(cap) : [] },
  { callSign: "RULESET", jsonKey: "_editionId" },
  // ─── Ability‐score modifiers (only emit when nonzero) ───
  {
    callSign: "STR_MOD",
    jsonKey: "ability",
    conv: (arr) => {
      const v = Array.isArray(arr) ? arr[0].str ?? 0 : arr.str ?? 0;
      return v !== 0 ? v : void 0;
    }
  },
  {
    callSign: "DEX_MOD",
    jsonKey: "ability",
    conv: (arr) => {
      const v = Array.isArray(arr) ? arr[0].dex ?? 0 : arr.dex ?? 0;
      return v !== 0 ? v : void 0;
    }
  },
  {
    callSign: "CON_MOD",
    jsonKey: "ability",
    conv: (arr) => {
      const v = Array.isArray(arr) ? arr[0].con ?? 0 : arr.con ?? 0;
      return v !== 0 ? v : void 0;
    }
  },
  {
    callSign: "INT_MOD",
    jsonKey: "ability",
    conv: (arr) => {
      const v = Array.isArray(arr) ? arr[0].int ?? 0 : arr.int ?? 0;
      return v !== 0 ? v : void 0;
    }
  },
  {
    callSign: "WIS_MOD",
    jsonKey: "ability",
    conv: (arr) => {
      const v = Array.isArray(arr) ? arr[0].wis ?? 0 : arr.wis ?? 0;
      return v !== 0 ? v : void 0;
    }
  },
  {
    callSign: "CHA_MOD",
    jsonKey: "ability",
    conv: (arr) => {
      const v = Array.isArray(arr) ? arr[0].cha ?? 0 : arr.cha ?? 0;
      return v !== 0 ? v : void 0;
    }
  }
];
function buildFM(json, defs) {
  const fm = {};
  for (const { callSign, jsonKey, conv } of defs) {
    const keys = Array.isArray(jsonKey) ? jsonKey : [jsonKey];
    let raw = void 0;
    for (const key of keys) {
      if (json[key] != null) {
        raw = json[key];
        break;
      }
    }
    if (raw == null) continue;
    const val = conv ? conv(raw, json) : raw;
    fm[FM_FIELDS[callSign]] = val;
  }
  return fm;
}
function serializeFrontmatter(fm, defs) {
  const filtered = {};
  const hasSkillChoice = Array.isArray(fm[FM_FIELDS.SKILL_CHOICE_LIST]) && fm[FM_FIELDS.SKILL_CHOICE_LIST].length > 0;
  const hasToolChoice = Array.isArray(fm[FM_FIELDS.TOOL_CHOICE_LIST]) && fm[FM_FIELDS.TOOL_CHOICE_LIST].length > 0;
  for (const [k, v] of Object.entries(fm)) {
    if (v === void 0) continue;
    if (k === FM_FIELDS.COMPONENTS && Array.isArray(v) && v.length === 0) continue;
    if ((k === FM_FIELDS.TOOL_CHOICE_LIST || k === FM_FIELDS.SKILL_CHOICE_LIST) && Array.isArray(v) && v.length === 0) continue;
    filtered[k] = v;
  }
  let keysToEmit;
  if (defs) {
    const wanted = defs.map((d) => FM_FIELDS[d.callSign]);
    keysToEmit = wanted.filter((k) => k in filtered);
    keysToEmit.push(
      ...Object.keys(filtered).filter((k) => !keysToEmit.includes(k))
    );
  } else {
    keysToEmit = Object.keys(filtered);
  }
  return keysToEmit.map((k) => {
    const v = filtered[k];
    if (Array.isArray(v)) {
      const inline = v.map((item) => JSON.stringify(item)).join(", ");
      return `${k}: [${inline}]`;
    }
    if (typeof v === "string") {
      return `${k}: "${v}"`;
    }
    return `${k}: ${v}`;
  }).join("\n");
}
var SKILL_OPTIONS = [
  "Acrobatics",
  "Animal Handling",
  "Arcana",
  "Athletics",
  "Deception",
  "History",
  "Insight",
  "Intimidation",
  "Investigation",
  "Medicine",
  "Nature",
  "Perception",
  "Performance",
  "Persuasion",
  "Religion",
  "Sleight of Hand",
  "Stealth",
  "Survival"
];
var SPELL_KEYS = [
  "NAME",
  "LEVEL",
  "SCHOOL",
  "CASTING_TIME",
  "SPELL_RANGE",
  "DURATION",
  "VERBAL",
  "SOMATIC",
  "MATERIAL",
  "COMPONENTS",
  "CONCENTRATION",
  "SOURCE",
  "RULESET"
];
var SPECIES_KEYS = [
  "SPECIES",
  "SIZE",
  "SPEED",
  "LANGUAGES",
  "TRAITS",
  "SKILLS",
  "STR_MOD",
  "DEX_MOD",
  "CON_MOD",
  "INT_MOD",
  "WIS_MOD",
  "CHA_MOD",
  "SKILL_CHOICE_LIST",
  "TOOL_PROFICIENCIES",
  "TOOL_CHOICE_LIST",
  "WEAPON_PROFICIENCIES",
  "SENSES",
  "DAMAGE_RES",
  "SOURCE",
  "RULESET"
];
var ITEM_KEYS = [
  "NAME",
  "TYPE",
  "RARITY",
  "COST",
  "WEIGHT",
  "PROPERTIES",
  "DAMAGE",
  "DAMAGE_TYPES",
  "RANGE",
  "RELOAD",
  "AMMO_TYPE",
  "AC",
  "STEALTH_DISADVANTAGE",
  "MAGICAL",
  "ATTUNEMENT",
  "ATTUNE_REQ",
  "VERMUN",
  "SOURCE",
  "RULESET"
];
var BESTIARY_KEYS = [
  "NAME",
  "SIZE",
  "TYPE",
  "ALIGNMENT",
  "AC",
  "HP",
  "SPEED",
  "STRENGTH",
  "DEXTERITY",
  "CONSTITUTION",
  "INTELLIGENCE",
  "WISDOM",
  "CHARISMA",
  "SAVING_THROWS",
  "SKILLS",
  "SENSES",
  "LANGUAGES",
  "CHALLENGE_RATING",
  "SOURCE",
  "RULESET"
];
var CLASS_KEYS = [
  "NAME",
  "SPELL_CAST_MOD",
  "ARMOR_PROFICIENCIES",
  "WEAPON_PROFICIENCIES",
  "TOOL_PROFICIENCIES",
  "TOOL_CHOICE_LIST",
  "SAVING_THROWS",
  "SKILLS",
  "SKILL_CHOICE_LIST",
  "TRAITS",
  "SOURCE",
  "RULESET"
];
var BACKGROUND_KEYS = [
  "NAME",
  "SKILLS",
  "SKILL_CHOICE_LIST",
  "TOOL_PROFICIENCIES",
  "TOOL_CHOICE_LIST",
  "TRAITS",
  "SOURCE",
  "RULESET"
];
var FEATS_KEYS = [
  "SOURCE",
  "RULESET"
];
var SPELL_META_DEFS = SPELL_KEYS.map((key) => {
  const def = ALL_FIELD_DEFS.find((d) => d.callSign === key);
  if (!def) throw new Error(`Missing FieldDef for SPELL_KEY ${key}`);
  return def;
});
var SPECIES_META_DEFS = SPECIES_KEYS.map((key) => {
  const def = ALL_FIELD_DEFS.find((d) => d.callSign === key);
  if (!def) throw new Error(`Missing FieldDef for SPECIES_KEY ${key}`);
  return def;
});
var ITEM_META_DEFS = ITEM_KEYS.map((key) => {
  const def = ALL_FIELD_DEFS.find((d) => d.callSign === key);
  if (!def) throw new Error(`Missing FieldDef for ITEM_KEY ${key}`);
  return def;
});
var BESTIARY_META_DEFS = BESTIARY_KEYS.map((key) => {
  const def = ALL_FIELD_DEFS.find((d) => d.callSign === key);
  if (!def) throw new Error(`Missing FieldDef for BESTIARY_KEY ${key}`);
  return def;
});
var CLASS_META_DEFS = CLASS_KEYS.map((key) => {
  const def = ALL_FIELD_DEFS.find((d) => d.callSign === key);
  if (!def) throw new Error(`Missing FieldDef for CLASS_KEY ${key}`);
  return def;
});
var BACKGROUND_META_DEFS = BACKGROUND_KEYS.map((key) => {
  const def = ALL_FIELD_DEFS.find((d) => d.callSign === key);
  if (!def) throw new Error(`Missing FieldDef for BACKGROUND_KEY ${key}`);
  return def;
});
var FEATS_META_DEFS = FEATS_KEYS.map((key) => {
  const def = ALL_FIELD_DEFS.find((d) => d.callSign === key);
  if (!def) throw new Error(`Missing FieldDef for BACKGROUND_KEY ${key}`);
  return def;
});

// src/parsers/5e-2014/spells.ts
var SCHOOL_MAP = {
  A: "Abjuration",
  C: "Conjuration",
  D: "Divination",
  E: "Enchantment",
  V: "Evocation",
  I: "Illusion",
  N: "Necromancy",
  T: "Transmutation"
};
function ordinal(n) {
  const suffix = n === 1 ? "st" : n === 2 ? "nd" : n === 3 ? "rd" : "th";
  return `${n}${suffix}`;
}
function formatRange(range) {
  if (!range) return "";
  if (typeof range === "string") return range;
  if (range.type === "special") return "Special";
  if (range.type === "point" && range.distance) {
    const dist = range.distance;
    if (dist.type === "touch") return "Touch";
    if (dist.type === "self") return "Self";
    if (dist.type === "sight") return "Sight";
    if (dist.amount) return `${dist.amount} ${dist.type}`;
  }
  return "Varies";
}
function formatTime(time) {
  if (!Array.isArray(time)) return "";
  return time.map((t) => `${t.number} ${t.unit}`).join(", ");
}
function formatDuration(duration) {
  if (!Array.isArray(duration)) return "";
  return duration.map((d) => {
    if (d.type === "instant") return "Instantaneous";
    if (d.type === "timed" && d.duration) {
      return `${d.duration.amount} ${d.duration.type}${d.concentration ? " (concentration)" : ""}`;
    }
    if (d.type === "permanent") return "Permanent";
    return "Special";
  }).join(", ");
}
function formatComponents(components) {
  if (!components) return "";
  const parts = [];
  if (components.v) parts.push("V");
  if (components.s) parts.push("S");
  if (components.m) {
    let matDetails = [];
    if (Array.isArray(components.m)) {
      matDetails = components.m.map(
        (item) => typeof item === "string" ? item : item && typeof item.text === "string" ? item.text : null
      ).filter((t) => !!t);
    } else if (typeof components.m === "string") {
      matDetails = [components.m];
    } else if (components.m.text) {
      matDetails = [components.m.text];
    }
    const matPart = matDetails.length > 0 ? `M (${matDetails.join(", ")})` : "M";
    parts.push(matPart);
  }
  return parts.join(", ");
}
function parseSpellsFile(json, editionId) {
  if (!json.spell) return [];
  json._editionId = editionId;
  return json.spell.map((spell) => {
    const sources = spell.source ? Array.isArray(spell.source) ? spell.source : [spell.source] : ["unknown"];
    const name = spell.name;
    const school = SCHOOL_MAP[spell.school] ?? spell.school;
    const level = spell.level;
    const range = formatRange(spell.range);
    const castingTime = formatTime(spell.time);
    const duration = formatDuration(spell.duration);
    const formattedSources = sources.map((s) => getFullSourceName(s, editionId));
    const attackType = spell.attackType || "";
    const damageType = spell.damageInflict?.[0] || "Teleportation";
    const ritual = spell.ritual === true;
    const concentration = spell.duration?.some((d) => d.concentration) ?? false;
    const FM = buildFM(spell, SPELL_META_DEFS);
    const yaml = serializeFrontmatter(FM, SPELL_META_DEFS);
    const safeName = name.replace(/\//g, "-");
    const title = `# ${name}`;
    const levelLabel = level === 0 ? `${school} Cantrip` : `${ordinal(level)}-level ${school} Spell`;
    const subtitle = `### *${levelLabel}*${concentration ? " *(Concentration)*" : ""}`;
    const headerLines = [
      title,
      subtitle,
      `**Casting Time:** ${castingTime}`,
      `**Range:** ${range}`,
      `**Components:** ${formatComponents(spell.components)}`,
      `**Duration:** ${duration}`
    ];
    const bodyLines = [
      ...(spell.entries ?? []).map((e) => formatEntry(e)),
      ...(spell.entriesHigherLevel ?? []).map((e) => formatEntry(e))
    ];
    const footerLines = [
      `---`,
      `**Source:** ${formattedSources.join(", ")}`
    ];
    return {
      path: `${safeName}.md`,
      content: [
        `---
${yaml}
---`,
        headerLines.join("\n"),
        ``,
        bodyLines.join("\n\n"),
        ``,
        footerLines.join("\n")
      ].join("\n")
    };
  });
}

// src/parsers/5e-2014/species.ts
function slug(name) {
  return name.replace(/;/g, ":").replace(/[\/:"]/g, ":").trim();
}
var BLOCKED_TRAITS = ["Age", "Size", "Languages", "Creature Type", "Speed"];
function parseSpeciesFile(json, editionId) {
  if (!Array.isArray(json.race)) return [];
  json._editionId = editionId;
  const rawVariants = json.race.filter(
    (r) => !("reprintedAs" in r) && !/\((?:Kaladesh|Zendikar|Amonkhet|Innistrad|Ixalan)\)$/.test(r.name)
  );
  const byName = /* @__PURE__ */ new Map();
  for (const r of rawVariants) {
    const list = byName.get(r.name) ?? [];
    list.push(r);
    byName.set(r.name, list);
  }
  const subracesList = Array.isArray(json.subrace) ? json.subrace : [];
  const out = [];
  for (const [raceName, raceVariants] of byName.entries()) {
    const safeName = slug(raceName);
    const primary = raceVariants.reduce(
      (best, cur) => Object.keys(cur).length > Object.keys(best).length ? cur : best,
      raceVariants[0]
    );
    if (!primary.ability) {
      const humanEntry = subracesList.find(
        (sr) => sr.raceName === raceName && sr.raceSource === primary.source && !("name" in sr) && Array.isArray(sr.ability)
      );
      if (humanEntry) primary.ability = humanEntry.ability;
    }
    const fm = buildFM(primary, SPECIES_META_DEFS);
    const senses = [];
    if (primary.darkvision) senses.push(`Darkvision ${primary.darkvision} ft.`);
    if (primary.blindsight) senses.push(`Blindsight ${primary.blindsight} ft.`);
    if (primary.tremorsense) senses.push(`Tremorsense ${primary.tremorsense} ft.`);
    if (primary.truesight) senses.push(`Truesight ${primary.truesight} ft.`);
    if (senses.length) fm.senses = senses;
    if (Array.isArray(fm.traits)) {
      fm.traits = fm.traits.filter((t) => !BLOCKED_TRAITS.includes(t));
    }
    const yaml = serializeFrontmatter(fm, SPECIES_META_DEFS);
    const lines = [];
    lines.push(`# ${raceName}`, `## Stats`);
    const size = Array.isArray(primary.size) ? primary.size.map((s) => SIZE_MAP2[s] || s).join("/") : SIZE_MAP2[primary.size] ?? primary.size;
    lines.push(`**Size:** ${size}`);
    const speed = typeof primary.speed === "number" ? primary.speed : primary.speed?.walk ?? primary.speed?.base ?? 0;
    lines.push(`**Speed:** ${speed} ft. walking`);
    const kids = subracesList.filter(
      (sr) => sr.name && sr.raceName === raceName && sr.raceSource === primary.source
    );
    const rawAbility = Array.isArray(primary.ability) ? primary.ability : Array.isArray(kids[0]?.ability) ? kids[0].ability : [];
    if (Array.isArray(rawAbility) && rawAbility.length) {
      const bonuses = { str: 0, dex: 0, con: 0, int: 0, wis: 0, cha: 0 };
      let chooseOpt = null;
      for (const obj of rawAbility) {
        if ("choose" in obj) chooseOpt = obj.choose;
        else for (const [k, v] of Object.entries(obj)) bonuses[k] += v;
      }
      const pairs = Object.entries(bonuses);
      const parts = pairs.filter(([, v]) => v !== 0).map(([k, v]) => `${k.toUpperCase()} ${v >= 0 ? "+" : ""}${v}`);
      if (chooseOpt?.count && Array.isArray(chooseOpt.from)) {
        parts.push(`CHOOSE ${chooseOpt.count} from ${chooseOpt.from.map((s) => s.toUpperCase()).join(", ")}`);
      }
      if (parts.length) lines.push(`**Ability Scores:** ${parts.join(", ")}`);
    }
    const langs = fm.languages;
    if (langs?.length) lines.push(`**Languages:** ${langs.join(", ")}`);
    if (Array.isArray(primary.skillProficiencies)) {
      const skillLabels = [];
      for (const e of primary.skillProficiencies) {
        if (e.choose?.from) {
          skillLabels.push(`Choose from: ${e.choose.from.map((s) => s.charAt(0).toUpperCase() + s.slice(1)).join(", ")}`);
        } else {
          const val = e.proficiency ?? e.name ?? e;
          if (typeof val === "string") skillLabels.push(val.charAt(0).toUpperCase() + val.slice(1));
        }
      }
      if (skillLabels.length) lines.push(`**Skill Proficiencies:** ${skillLabels.join("; ")}`);
    }
    const tp = fm[FM_FIELDS.TOOL_PROFICIENCIES];
    const wp = fm[FM_FIELDS.WEAPON_PROFICIENCIES];
    const ap = fm[FM_FIELDS.ARMOR_PROFICIENCIES];
    if (tp?.length) lines.push(`**Tool Proficiencies:** ${tp.join(", ")}`);
    if (wp?.length) lines.push(`**Weapon Proficiencies:** ${wp.join(", ")}`);
    if (ap?.length) lines.push(`**Armor Proficiencies:** ${ap.join(", ")}`);
    lines.push(`## Traits`);
    const seen = /* @__PURE__ */ new Set();
    for (const trait of fm.traits || []) {
      lines.push(`##### ${trait}`);
      const ent = primary.entries?.find((e) => e.name === trait);
      if (ent?.entries) {
        ent.entries.forEach((sub, idx) => {
          let blk;
          if (sub.type === "table") blk = renderMarkdownTable(sub);
          else if (sub.type === "list") blk = sub.items.map((it) => typeof it === "string" ? `- ${replace5eTags(it)}` : `- ${it.name}`).join("\n");
          else if (typeof sub === "string") blk = replace5eTags(sub);
          if (blk && !seen.has(blk)) {
            lines.push(blk);
            seen.add(blk);
            if (ent.entries.length > 1 && idx < ent.entries.length - 1) lines.push("");
          }
        });
      }
    }
    const subs = kids;
    if (subs.length) {
      out.push({
        path: `Species/${safeName}/${safeName}.md`,
        content: `---
${yaml}
---

${lines.join("\n")}`
      });
      const subFolder = `Species/${safeName}/Races`;
      for (const sr of subs) {
        const display = sr.name.replace(/;/g, ":");
        const subLines = [`# ${display}`];
        if (Array.isArray(sr.ability)) {
          const bonuses = { str: 0, dex: 0, con: 0, int: 0, wis: 0, cha: 0 };
          let chooseOpt = null;
          for (const obj of sr.ability) {
            if ("choose" in obj) chooseOpt = obj.choose;
            else for (const [k, v] of Object.entries(obj)) bonuses[k] += v;
          }
          const pairs = Object.entries(bonuses);
          const parts = pairs.filter(([, v]) => v !== 0).map(([k, v]) => `${k.toUpperCase()} ${v >= 0 ? "+" : ""}${v}`);
          if (chooseOpt?.count) parts.push(`CHOOSE ${chooseOpt.count} from ${chooseOpt.from.map((s) => s.toUpperCase()).join(", ")}`);
          if (parts.length) subLines.push(`**Ability Scores:** ${parts.join(", ")}`);
        }
        for (const entry of sr.entries || []) {
          subLines.push(formatEntry(entry));
          subLines.push("");
        }
        const subYaml = serializeFrontmatter(buildFM(sr, SPECIES_META_DEFS), SPECIES_META_DEFS);
        out.push({
          path: `${subFolder}/${slug(sr.name)}.md`,
          content: `---
${subYaml}
---

${subLines.join("\n")}`
        });
      }
    } else {
      out.push({
        path: `Species/${safeName}.md`,
        content: `---
${yaml}
---

${lines.join("\n")}`
      });
    }
  }
  return out.sort((a, b) => a.path.localeCompare(b.path));
}

// src/parsers/5e-2014/classes.ts
function formatFeatureLink(name) {
  const ignore = ["Ability Score Improvement", "Archetype Feature", "Subclass Feature"];
  if (ignore.some((sub) => name.toLowerCase().includes(sub.toLowerCase()))) {
    return name;
  }
  const anchor = name.replace(/[^\w\s]/g, "").replace(/-/g, " ").replace(/\s+/g, " ").trim().replace(/\b\w/g, (l) => l.toUpperCase());
  return `[[#${anchor}]]`;
}
var OPT_FEATURE_TYPE_TO_FULL = {
  AI: "Artificer Infusion",
  ED: "Elemental Discipline",
  EI: "Eldritch Invocation",
  MM: "Metamagic",
  MV: "Maneuver",
  "MV:B": "Maneuver, Battle Master",
  "MV:C2-UA": "Maneuver, Cavalier V2 (UA)",
  "AS:V1-UA": "Arcane Shot, V1 (UA)",
  "AS:V2-UA": "Arcane Shot, V2 (UA)",
  AS: "Arcane Shot",
  OTH: "Other",
  "FS:F": "Fighting Style; Fighter",
  "FS:B": "Fighting Style; Bard",
  "FS:P": "Fighting Style; Paladin",
  "FS:R": "Fighting Style; Ranger",
  PB: "Pact Boon",
  OR: "Onomancy Resonant",
  RN: "Rune Knight Rune",
  AF: "Alchemical Formula",
  TT: "Traveler's Trick"
};
function parseClassFile(json, editionId, fileName, optionalFeatures) {
  json._editionId = editionId;
  const cls = Array.isArray(json.class) ? json.class[0] : json;
  const className = typeof cls.name === "string" ? cls.name : fileName ? fileName.replace(/^class-/, "").replace(/\.json$/, "") : "Unknown";
  const subclassFiles = [];
  const PROF_BONUS_BY_LEVEL = [
    "+2",
    "+2",
    "+2",
    "+2",
    "+3",
    "+3",
    "+3",
    "+3",
    "+4",
    "+4",
    "+4",
    "+4",
    "+5",
    "+5",
    "+5",
    "+5",
    "+6",
    "+6",
    "+6",
    "+6"
  ];
  const hdNum = cls.hd?.number ?? 1;
  const hdFaces = cls.hd?.faces ?? 6;
  const hdStr = `${hdNum}d${hdFaces}`;
  const hdMax = hdNum * hdFaces;
  const hdAvg = Math.ceil((hdFaces + 1) / 2);
  const baseFM = buildFM(cls, CLASS_META_DEFS);
  const fm = { ...baseFM, hd: hdStr };
  const yaml = serializeFrontmatter(fm, CLASS_META_DEFS);
  const lines = [];
  lines.push(`# ${className}`);
  if (cls.source) lines.push(`**Source:** ${cls.source}`);
  lines.push(``);
  lines.push(`---`);
  lines.push(`## Hit Points`);
  lines.push(`**Hit Dice:** ${hdStr} per ${className} level`);
  lines.push(`**Hit Points at 1st Level:** ${hdMax} + your Constitution modifier`);
  lines.push(
    `**Hit Points at Higher Levels:** ${hdStr} (or ${hdAvg}) + your Constitution modifier per level after 1st`
  );
  lines.push(``);
  lines.push(`---`);
  lines.push(`## Proficiencies`);
  const sp = cls.startingProficiencies ?? {};
  if (Array.isArray(sp.armor) && sp.armor.length) {
    lines.push(`- **Armor:** ${sp.armor.join(", ")}`);
  }
  const weaponList = unifiedWeaponProfs(sp);
  if (weaponList.length) {
    lines.push(`- **Weapons:** ${weaponList.join(", ")}`);
  }
  const toolList = unifiedToolProfs(sp);
  if (toolList.length) {
    lines.push(`- **Tools:** ${toolList.join(", ")}`);
  }
  const saves = Array.isArray(cls.proficiency) ? cls.proficiency.map(
    (k) => ({
      str: "Strength",
      dex: "Dexterity",
      con: "Constitution",
      int: "Intelligence",
      wis: "Wisdom",
      cha: "Charisma"
    })[k] || k.toUpperCase()
  ) : [];
  if (saves.length) {
    lines.push(`- **Saving Throws:** ${saves.join(", ")}`);
  }
  {
    const rawSkills = Array.isArray(sp.skillProficiencies) ? sp.skillProficiencies : Array.isArray(sp.skills) ? sp.skills : Array.isArray(sp.skillProf) ? sp.skillProf : [];
    const choiceEntry = rawSkills.find(
      (e) => e && (typeof e.choose === "object" || typeof e.any === "number")
    );
    if (choiceEntry) {
      const count = choiceEntry.choose?.count ?? choiceEntry.any ?? 1;
      const options = Array.isArray(choiceEntry.choose?.from) ? choiceEntry.choose.from.map(
        (s) => (
          // title-case each word (or just use s)
          s.split(" ").map((w) => w[0].toUpperCase() + w.slice(1)).join(" ")
        )
      ) : SKILL_OPTIONS;
      lines.push(`- **Skills (Choose ${count}):** ${options.join(", ")}`);
    } else {
      const flat = unifiedSkills2(sp);
      if (flat.length) {
        lines.push(`- **Skills:** ${flat.join(", ")}`);
      }
    }
  }
  if (Array.isArray(cls.startingEquipment)) {
    lines.push(`
### Equipment`);
    cls.startingEquipment.filter((e) => typeof e === "string").forEach((item) => lines.push(`- ${item}`));
  }
  const progGroups = cls.classTableGroups ?? [];
  const maxLevel = 20;
  if (!progGroups.length) {
    lines.push(`*(No class table provided for this class.)*`);
  } else {
    const featuresByLevel2 = {};
    for (const feat of cls.classFeatures ?? []) {
      const raw = typeof feat === "object" && feat.classFeature ? feat.classFeature : String(feat);
      const [name, , , lvlStr] = raw.split("|");
      const lvl = Number(lvlStr ?? 0);
      if (!featuresByLevel2[lvl]) featuresByLevel2[lvl] = [];
      featuresByLevel2[lvl].push(name);
    }
    const allLabelsSet = /* @__PURE__ */ new Set();
    const rowMaps = {};
    for (const group of progGroups) {
      const labels = Array.isArray(group.colLabels) ? group.colLabels.map((l) => replace5eTags(l)) : [];
      const rows = Array.isArray(group.rows) ? group.rows : Array.isArray(group.rowsSpellProgression) ? group.rowsSpellProgression : [];
      if (!labels.length || !rows.length) continue;
      for (let lvl = 0; lvl < rows.length; lvl++) {
        const levelNum = lvl + 1;
        if (!rowMaps[levelNum]) rowMaps[levelNum] = {};
        const rowMap = rowMaps[levelNum];
        const cells = rows[lvl];
        for (let i = 0; i < labels.length; i++) {
          const label = labels[i];
          let val = "";
          const cell = cells[i];
          if (Array.isArray(cell)) {
            val = cell.join(", ");
          } else if (cell && typeof cell === "object" && "value" in cell) {
            val = String(cell.value);
          } else {
            val = String(cell ?? "");
          }
          allLabelsSet.add(label);
          rowMap[label] = val;
        }
      }
    }
    const allLabels = Array.from(allLabelsSet).filter(
      (lbl) => !/Cantrips Known|Spells Known|\d+(st|nd|rd|th)/.test(lbl)
    );
    const mergedLabels = ["Level", "Proficiency Bonus", "Class Features", ...allLabels];
    const mergedRows = [];
    for (let lvl = 1; lvl <= maxLevel; lvl++) {
      const featureList = (featuresByLevel2[lvl] ?? []).map(formatFeatureLink);
      const rowMap = rowMaps[lvl] ?? {};
      mergedRows.push([
        lvl.toString(),
        PROF_BONUS_BY_LEVEL[lvl - 1] || "",
        featureList.join(", ").replace(/\|/g, "&#124;"),
        ...allLabels.map((label) => rowMap[label] ?? "")
      ]);
    }
    lines.push(`
> [!example]- Class Progression Table`);
    lines.push(
      renderMarkdownTable({
        type: "table",
        caption: "",
        colLabels: mergedLabels,
        rows: mergedRows
      })
    );
  }
  const csGroup = progGroups.find(
    (g) => Array.isArray(g.colLabels) && g.colLabels.some((lbl) => /Cantrips Known|Spells Known/.test(String(lbl)))
  );
  const slotGroup = progGroups.find(
    (g) => Array.isArray(g.colLabels) && g.title === "Spell Slots per Spell Level"
  );
  if (csGroup && slotGroup) {
    const csLabels = csGroup.colLabels.map((l) => replace5eTags(l));
    const slotLabels = slotGroup.colLabels.map((l) => replace5eTags(l));
    const csRows = csGroup.rows || [];
    const slotRows = slotGroup.rowsSpellProgression || [];
    const colLabels = ["Level", ...csLabels, ...slotLabels];
    const spellRows = [];
    for (let i = 0; i < Math.max(csRows.length, slotRows.length); i++) {
      const lvl = String(i + 1);
      const csCells = csRows[i] ? csRows[i].map(String) : csLabels.map((_) => "");
      const slotCells = slotRows[i] ? slotRows[i].map(String) : slotLabels.map((_) => "");
      spellRows.push([lvl, ...csCells, ...slotCells]);
    }
    lines.push(`
> [!tip]- Spell Progression Table`);
    lines.push(
      renderMarkdownTable({
        type: "table",
        caption: "",
        colLabels,
        rows: spellRows
      })
    );
  }
  const subs = Array.isArray(json.subclass) ? json.subclass : [];
  const subclassFeatures = Array.isArray(json.subclassFeature) ? json.subclassFeature : json.lookup?.subclassFeature ?? [];
  for (const sc of subs) {
    const subclassName = sc.name;
    const subLines = [];
    subLines.push(`# ${subclassName}`);
    subLines.push(`**Parent Class:** [[${className}]]`);
    if (sc.source) subLines.push(`**Source:** ${sc.source}`);
    subLines.push(``);
    const intro = subclassFeatures.find(
      (f) => f.name === sc.name && f.level === 3 && f.subclassShortName === sc.shortName && f.subclassSource === sc.source
    );
    if (intro?.entries?.length) {
      const introText = Array.isArray(intro.entries) ? intro.entries.map(
        (e) => typeof e === "string" ? replace5eTags(e) : formatEntry(e)
      ).join("\n\n") : formatEntry(intro.entries);
      subLines.push(introText, ``);
    }
    const code = Object.entries(OPT_FEATURE_TYPE_TO_FULL).find(
      ([, full]) => full.toLowerCase().includes(subclassName.toLowerCase())
    )?.[0];
    if (code) {
      const matches = optionalFeatures.filter(
        (of) => Array.isArray(of.featureType) && of.featureType.includes(code)
      );
      if (matches.length) {
        subLines.push(`## ${subclassName} Optional Features`);
        for (const feat of matches) {
          for (const entry of feat.entries) {
            const txt = typeof entry === "string" ? replace5eTags(entry) : formatEntry(entry);
            subLines.push(`**${feat.name}:** ${txt}`);
          }
          subLines.push(``);
        }
      }
    }
    const prog = sc.subclassTableGroups ?? [];
    if (prog.length) {
      const labels = /* @__PURE__ */ new Set();
      const rowsMap = {};
      for (const g of prog) {
        const cols = (g.colLabels ?? []).map(replace5eTags);
        const rows = Array.isArray(g.rows) ? g.rows : Array.isArray(g.rowsSpellProgression) ? g.rowsSpellProgression : [];
        rows.forEach((r, i) => {
          const lvl = i + 1;
          rowsMap[lvl] ?? (rowsMap[lvl] = {});
          r.forEach((c, j) => {
            const lab = cols[j];
            if (!lab) return;
            labels.add(lab);
            rowsMap[lvl][lab] = typeof c === "object" && c !== null && "value" in c ? String(c.value) : String(c ?? "");
          });
        });
      }
      const hdrs = Array.from(labels);
      subLines.push(`## Subclass Progression`);
      subLines.push(renderMarkdownTable({
        type: "table",
        caption: "",
        colLabels: ["Level", ...hdrs],
        rows: Array.from({ length: 20 }, (_, i) => {
          const lvl = i + 1;
          return [String(lvl), ...hdrs.map((h) => rowsMap[lvl]?.[h] ?? "")];
        })
      }));
    }
    const featsByLvl = {};
    for (const f of subclassFeatures) {
      if (f.subclassShortName === sc.shortName && f.subclassSource === sc.source && f.className === className) {
        const lvl = f.level ?? 0;
        ;
        (featsByLvl[lvl] ?? (featsByLvl[lvl] = [])).push(f);
      }
    }
    for (const lvl of Object.keys(featsByLvl).map(Number).sort((a, b) => a - b)) {
      subLines.push(`---`, `## Level ${lvl}`);
      for (const f of featsByLvl[lvl]) {
        subLines.push(`### ${f.name}`);
        for (const ent of Array.isArray(f.entries) ? f.entries : [f.entries]) {
          if (typeof ent === "string") {
            subLines.push(replace5eTags(ent));
            continue;
          }
          if (ent.type === "entries" && /^Maneuvers$/i.test(ent.name)) {
            subLines.push(`##### ${ent.name}`);
            for (const txt of Array.isArray(ent.entries) ? ent.entries : [ent.entries]) {
              subLines.push(typeof txt === "string" ? replace5eTags(txt) : formatEntry(txt));
            }
            const code2 = Object.entries(OPT_FEATURE_TYPE_TO_FULL).find(
              ([, full]) => full.toLowerCase().includes(subclassName.toLowerCase())
            )?.[0];
            if (code2) {
              const matches = optionalFeatures.filter(
                (of) => Array.isArray(of.featureType) && of.featureType.includes(code2)
              );
              for (const featDef of matches) {
                for (const sub of featDef.entries) {
                  const line = typeof sub === "string" ? replace5eTags(sub) : formatEntry(sub);
                  subLines.push(`**${featDef.name}:** ${line}`);
                }
                subLines.push("");
              }
            }
            continue;
          }
          if (ent.type === "entries" && ent.name) {
            subLines.push(`##### ${ent.name}`);
            for (const e2 of Array.isArray(ent.entries) ? ent.entries : [ent.entries]) {
              subLines.push(formatEntry(e2));
            }
            continue;
          }
          if (ent.type === "inset" && ent.name) {
            const inner = Array.isArray(ent.entries) ? ent.entries : [ent.entries];
            subLines.push(`> **${ent.name}**`);
            inner.forEach((e2) => subLines.push(`> ${formatEntry(e2)}`));
            continue;
          }
          const fb = formatEntry(ent);
          if (fb) subLines.push(fb);
        }
      }
    }
    const subclassContent = subLines.join("\n\n").replace(/\n{3,}/g, "\n\n");
    subclassFiles.push({
      path: `Classes/${className}/Subclasses/${subclassName}.md`,
      content: subclassContent
    });
  }
  if (subs.length) {
    const links = subs.map(
      (sc) => `[[Subclasses/${sc.name.replace(/[\\/]/g, "-")}|${sc.name}]]`
    );
    lines.push(`
**Subclasses:** ${links.join(", ")}`);
  }
  const allFeatures = Array.isArray(json.classFeature) ? json.classFeature : json.lookup?.classFeature ?? [];
  const featuresByLevel = {};
  for (const entry of allFeatures) {
    if (entry.className !== className) continue;
    const lvl = entry.level ?? 0;
    if (!featuresByLevel[lvl]) featuresByLevel[lvl] = [];
    featuresByLevel[lvl].push(entry);
  }
  lines.push(``);
  lines.push(`---`);
  lines.push(`## Level Features`);
  const levels = Object.keys(featuresByLevel).map((n) => +n).sort((a, b) => a - b);
  for (const lvl of levels) {
    lines.push(`### Level ${lvl}`);
    for (const feat of featuresByLevel[lvl]) {
      lines.push(`#### ${feat.name}`);
      const entries = Array.isArray(feat.entries) ? feat.entries : [feat.entries];
      for (const ent of entries) {
        if (typeof ent === "string") {
          const txt = formatEntry(ent).trim();
          if (txt === "{" || txt === "}") continue;
          lines.push(txt);
          continue;
        }
        if (ent.type === "list" && Array.isArray(ent.items)) {
          for (const item of ent.items) {
            lines.push(`- ${replace5eTags(item)}`);
          }
          continue;
        }
        if (ent.type === "options") {
          if (ent.count) {
            lines.push("");
            lines.push(`**Choose ${ent.count} of the following options:**`);
            lines.push("");
          }
          for (const optRef of Array.isArray(ent.entries) ? ent.entries : [ent.entries]) {
            if (optRef.type === "refOptionalfeature") {
              const [optName, optSrc] = optRef.optionalfeature.split("|");
              const featDef = optionalFeatures.find(
                (f) => f.name === optName && (!optSrc || f.source === optSrc)
              );
              if (featDef) {
                featDef.entries.forEach((subEntry, idx) => {
                  const text = typeof subEntry === "string" ? replace5eTags(subEntry) : formatEntry(subEntry);
                  if (idx === 0) {
                    lines.push(`- **${featDef.name}:** ${text}`);
                  } else {
                    lines.push(`  - ${text}`);
                  }
                });
                lines.push("");
              } else {
                lines.push(`**${optName}:**`);
              }
            } else {
              const txt = formatEntry(optRef);
              if (txt) lines.push(`- ${txt}`);
            }
          }
          continue;
        }
        if (ent.type === "refOptionalfeature") {
          const [name] = ent.optionalfeature.split("|");
          lines.push(`- [[${name}|${name}]]`);
          continue;
        }
        if (ent.type === "entries" && ent.name) {
          lines.push(`##### ${ent.name}`);
          const inner = Array.isArray(ent.entries) ? ent.entries : [ent.entries];
          for (const e2 of inner) {
            lines.push(formatEntry(e2));
          }
          continue;
        }
        const fallback = formatEntry(ent);
        if (fallback) lines.push(fallback);
      }
      lines.push(``);
    }
    lines.push(`---`);
  }
  let content = `---
${yaml}
---

${lines.join("\n")}`;
  content = replace5eTags(content);
  content = content.replace(/\n{3,}/g, "\n\n").replace(/\n +\n/g, "\n\n");
  return [
    {
      path: `Classes/${className}/${className}.md`,
      content
    },
    ...subclassFiles
  ];
}

// src/parsers/5e-2014/rules.ts
function parseActionsFile(json, editionId) {
  if (!Array.isArray(json.action)) return [];
  const lines = [];
  for (const action of json.action) {
    lines.push(`## ${action.name}`);
    const entries = Array.isArray(action.entries) ? action.entries : [action.entries];
    for (const entry of entries) {
      if (!entry) continue;
      if (typeof entry === "string") {
        const paras = entry.split(/\n{2,}/);
        for (const para of paras) {
          const t = para.trim();
          if (t) {
            lines.push(replace5eTags(t));
            lines.push("");
          }
        }
      } else if (entry.type === "list" && Array.isArray(entry.items)) {
        for (const item of entry.items) {
          lines.push(`- ${replace5eTags(item)}`);
        }
        lines.push("");
      } else if ((entry.type === "entries" || entry.type === "inset") && Array.isArray(entry.entries)) {
        lines.push(`### ${entry.name}`);
        for (const sub of entry.entries) {
          if (typeof sub === "string") {
            const ps = sub.split(/\n{2,}/);
            for (const p of ps) {
              const tt = p.trim();
              if (tt) {
                lines.push(replace5eTags(tt));
                lines.push("");
              }
            }
          } else if (sub.type === "list" && Array.isArray(sub.items)) {
            for (const li of sub.items) {
              lines.push(`- ${replace5eTags(li)}`);
            }
            lines.push("");
          } else {
            const txt = Array.isArray(sub) ? sub.join(" ") : typeof sub === "object" ? JSON.stringify(sub) : String(sub);
            lines.push(replace5eTags(txt));
            lines.push("");
          }
        }
      } else if (entry.type === "table" && Array.isArray(entry.rows)) {
        const headers = entry.colLabels || [];
        lines.push(`| ${headers.join(" | ")} |`);
        lines.push(`| ${headers.map(() => "---").join(" | ")} |`);
        for (const row of entry.rows) {
          lines.push(`| ${row.join(" | ")} |`);
        }
        lines.push("");
      } else {
        const txt = Array.isArray(entry) ? entry.join(" ") : typeof entry === "object" ? JSON.stringify(entry) : String(entry);
        lines.push(replace5eTags(txt));
        lines.push("");
      }
    }
    lines.push("---");
  }
  const cleaned = lines.reduce((acc, curr) => {
    if (curr === "" && acc.length && acc[acc.length - 1] === "") return acc;
    return acc.concat(curr);
  }, []);
  return [
    {
      path: "Rules and Reference/Actions.md",
      content: cleaned.join("\n").trim() + "\n"
    }
  ];
}
function parseConditionsDiseasesFile(json, editionId) {
  const outputs = [];
  const processItems = (items, outPath) => {
    const lines = [];
    for (const item of items) {
      lines.push(`## ${item.name}`);
      const entries = Array.isArray(item.entries) ? item.entries : [item.entries];
      for (const entry of entries) {
        if (!entry) continue;
        if (typeof entry === "string") {
          const paras = entry.split(/\n{2,}/);
          for (const para of paras) {
            const t = para.trim();
            if (t) {
              lines.push(replace5eTags(t));
              lines.push("");
            }
          }
        } else if (entry.type === "list" && Array.isArray(entry.items)) {
          for (const txt of entry.items) {
            lines.push(`- ${replace5eTags(txt)}`);
          }
          lines.push("");
        } else if (entry.type === "table" && Array.isArray(entry.rows)) {
          const headers = entry.colLabels || [];
          lines.push(`| ${headers.join(" | ")} |`);
          lines.push(`| ${headers.map(() => "---").join(" | ")} |`);
          for (const row of entry.rows) {
            lines.push(`| ${row.join(" | ")} |`);
          }
          lines.push("");
        } else if (entry.type === "entries" && Array.isArray(entry.entries)) {
          lines.push(`### ${entry.name}`);
          for (const sub of entry.entries) {
            const txt = typeof sub === "string" ? sub : String(sub);
            lines.push(replace5eTags(txt));
            lines.push("");
          }
        } else {
          const txt = Array.isArray(entry) ? entry.join(" ") : String(entry);
          lines.push(replace5eTags(txt));
          lines.push("");
        }
      }
      lines.push("---");
    }
    const cleaned = lines.reduce((acc, curr) => {
      if (curr === "" && acc.length && acc[acc.length - 1] === "") return acc;
      return acc.concat(curr);
    }, []);
    outputs.push({ path: outPath, content: cleaned.join("\n").trim() + "\n" });
  };
  processItems(json.condition || [], "Rules and Reference/Conditions.md");
  processItems(json.disease || [], "Rules and Reference/Diseases.md");
  return outputs;
}
function parseSensesFile(json, editionId) {
  const items = Array.isArray(json.sense) ? json.sense : Array.isArray(json.senses) ? json.senses : [];
  if (!items.length) return [];
  const lines = [];
  for (const sense of items) {
    lines.push(`## ${sense.name}`);
    const entries = Array.isArray(sense.entries) ? sense.entries : [sense.entries];
    for (const entry of entries) {
      if (!entry) continue;
      if (typeof entry === "string") {
        const paras = entry.split(/\n{2,}/);
        for (const para of paras) {
          const t = para.trim();
          if (t) {
            lines.push(replace5eTags(t));
            lines.push("");
          }
        }
      } else if (entry.type === "list" && Array.isArray(entry.items)) {
        for (const item of entry.items) {
          lines.push(`- ${replace5eTags(item)}`);
        }
        lines.push("");
      } else if ((entry.type === "entries" || entry.type === "inset") && Array.isArray(entry.entries)) {
        lines.push(`### ${entry.name}`);
        for (const sub of entry.entries) {
          const txt = typeof sub === "string" ? sub : String(sub);
          lines.push(replace5eTags(txt));
          lines.push("");
        }
      } else if (entry.type === "table" && Array.isArray(entry.rows)) {
        const headers = entry.colLabels || [];
        lines.push(`| ${headers.join(" | ")} |`);
        lines.push(`| ${headers.map(() => "---").join(" | ")} |`);
        for (const row of entry.rows) {
          lines.push(`| ${row.join(" | ")} |`);
        }
        lines.push("");
      } else {
        const txt = Array.isArray(entry) ? entry.join(" ") : String(entry);
        lines.push(replace5eTags(txt));
        lines.push("");
      }
    }
    lines.push("---");
  }
  const cleaned = lines.reduce((acc, curr) => {
    if (curr === "" && acc.length && acc[acc.length - 1] === "") return acc;
    return acc.concat(curr);
  }, []);
  return [
    {
      path: "Rules and Reference/Senses.md",
      content: cleaned.join("\n").trim() + "\n"
    }
  ];
}
function parseSkillsFile(json, editionId) {
  const items = Array.isArray(json.skill) ? json.skill : Array.isArray(json.skills) ? json.skills : [];
  if (!items.length) return [];
  const lines = [];
  for (const skill of items) {
    lines.push(`## ${skill.name}`);
    if (skill.ability) {
      lines.push(`*Ability: ${skill.ability}*`);
      lines.push("");
    }
    const entries = Array.isArray(skill.entries) ? skill.entries : [skill.entries];
    for (const entry of entries) {
      if (!entry) continue;
      if (typeof entry === "string") {
        const paras = entry.split(/\n{2,}/);
        for (const para of paras) {
          const t = para.trim();
          if (t) {
            lines.push(replace5eTags(t));
            lines.push("");
          }
        }
      } else if (entry.type === "list" && Array.isArray(entry.items)) {
        for (const item of entry.items) {
          lines.push(`- ${replace5eTags(item)}`);
        }
        lines.push("");
      } else {
        const txt = Array.isArray(entry) ? entry.join(" ") : String(entry);
        lines.push(replace5eTags(txt));
        lines.push("");
      }
    }
    lines.push("---");
  }
  const cleaned = lines.reduce((acc, curr) => {
    if (curr === "" && acc.length && acc[acc.length - 1] === "") return acc;
    return acc.concat(curr);
  }, []);
  return [
    {
      path: "Rules and Reference/Skills.md",
      content: cleaned.join("\n").trim() + "\n"
    }
  ];
}

// src/parsers/5e-2014/feats.ts
function parseFeatsFile(json, editionId) {
  const feats = Array.isArray(json.feat) ? json.feat : Array.isArray(json.feats) ? json.feats : [];
  return feats.map((feat) => {
    const lines = [];
    const fm = buildFM({ ...feat, _editionId: editionId }, FEATS_META_DEFS);
    lines.push("---");
    lines.push(serializeFrontmatter(fm, FEATS_META_DEFS));
    lines.push("---", "");
    lines.push(`# ${feat.name}`, "");
    const prereqs = [];
    if (Array.isArray(feat.prerequisite)) {
      feat.prerequisite.forEach((pr) => {
        if (pr.level) prereqs.push(`Level ${pr.level}`);
        if (Array.isArray(pr.feat)) {
          pr.feat.forEach((f) => {
            const name = f.split("|")[0].replace(/\b\w/g, (c) => c.toUpperCase());
            prereqs.push(`Prerequisite: [[${name}]]`);
          });
        }
      });
    }
    if (feat.spellcastingPrepared) prereqs.push(`Prerequisite: Spellcaster`);
    if (Array.isArray(feat.toolProficiencies)) {
      feat.toolProficiencies.forEach((tp) => {
        Object.entries(tp).forEach(([key]) => {
          if (key === "anyArtisansTool") {
            prereqs.push(`Prerequisite: Proficient with an artisan's tool`);
          } else {
            prereqs.push(`Prerequisite: Proficient with ${key.replace(/([A-Z])/g, " $1").trim()}`);
          }
        });
      });
    }
    if (Array.isArray(feat.armorProficiencies)) {
      feat.armorProficiencies.forEach((arm) => {
        const armStr = typeof arm === "string" ? arm : JSON.stringify(arm);
        prereqs.push(`Prerequisite: Proficient with ${armStr.replace(/([A-Z])/g, " $1").trim()}`);
      });
    }
    if (feat.race) prereqs.push(`Prerequisite: ${feat.race}`);
    if (prereqs.length) {
      lines.push("**Prerequisites**");
      prereqs.forEach((p) => lines.push(`- ${p}`));
      lines.push("");
    }
    const entries = Array.isArray(feat.entries) ? feat.entries : [feat.entries];
    entries.forEach((entry) => {
      if (!entry) return;
      if (typeof entry === "string") {
        entry.split(/\n{2,}/).forEach((p) => {
          const t = p.trim();
          if (t) {
            lines.push(replace5eTags(t));
            lines.push("");
          }
        });
      } else if (entry.type === "list" && Array.isArray(entry.items)) {
        entry.items.forEach((it) => {
          if (typeof it === "string") {
            lines.push(`- ${replace5eTags(it)}`);
          } else if (it.type === "item" && it.name) {
            lines.push(`- **${it.name}**`);
            const subs = Array.isArray(it.entries) ? it.entries : [it.entries];
            subs.forEach(
              (s) => lines.push(`  - ${replace5eTags(typeof s === "string" ? s : JSON.stringify(s))}`)
            );
          }
        });
        lines.push("");
      } else if (entry.type === "inset") {
        lines.push(`- *${entry.name}*`);
        const subs = Array.isArray(entry.entries) ? entry.entries : [entry.entries];
        subs.forEach((s) => lines.push(`  - ${replace5eTags(s)}`));
        lines.push("");
      } else if ((entry.type === "section" || entry.type === "entries") && Array.isArray(entry.entries)) {
        if (entry.name) {
          lines.push(`## ${entry.name}`);
          lines.push("");
        }
        entry.entries.forEach((s) => {
          lines.push(replace5eTags(typeof s === "string" ? s : JSON.stringify(s)));
          lines.push("");
        });
      } else if (entry.type === "table" && Array.isArray(entry.rows)) {
        const hdr = entry.colLabels || [];
        lines.push(`| ${hdr.join(" | ")} |`);
        lines.push(`| ${hdr.map(() => "---").join(" | ")} |`);
        entry.rows.forEach(
          (row) => lines.push(`| ${row.join(" | ")} |`)
        );
        lines.push("");
      }
    });
    return {
      path: `Player Build/Feats/${feat.name}.md`,
      content: lines.join("\n").trim() + "\n"
    };
  });
}

// src/parsers/5e-2014/backgrounds.ts
function parseBackgroundsFile(json, editionId) {
  const raw = Array.isArray(json.background) ? json.background : Array.isArray(json.backgrounds) ? json.backgrounds : [];
  const backgrounds = raw.filter((bg) => {
    const nm = bg.name || "";
    return !nm.startsWith("Variant") && !nm.includes("Baldur's Gate");
  });
  const outputs = [];
  backgrounds.forEach((bg) => {
    const lines = [];
    const fm = buildFM(bg, BACKGROUND_META_DEFS);
    const extraTraits = Array.isArray(bg.entries) ? bg.entries.filter((e) => e.data?.isFeature && typeof e.name === "string").map((e) => {
      const name = e.name.replace(/^Feature:\s*/, "");
      return `[[${bg.name}#${name}]]`;
    }) : [];
    const yaml = serializeFrontmatter(fm, BACKGROUND_META_DEFS);
    lines.push("---", yaml, "---", "");
    lines.push(`# ${bg.name}`, "");
    if (Array.isArray(bg.skillProficiencies) && bg.skillProficiencies.length) {
      const skills = [];
      bg.skillProficiencies.forEach((ent) => {
        if (typeof ent === "string") {
          skills.push(cap2(ent));
        } else if (ent.choose && Array.isArray(ent.choose.from)) {
          skills.push(`Choose ${ent.choose.amount} from ${ent.choose.from.join(", ")}`);
        } else {
          Object.entries(ent).filter(([, v]) => v === true).forEach(([k]) => skills.push(cap2(k)));
        }
      });
      lines.push(`**Skill Proficiencies:** ${skills.join(", ")}`, "");
    }
    if (Array.isArray(bg.languageProficiencies) && bg.languageProficiencies.length) {
      const langs = [];
      bg.languageProficiencies.forEach((ent) => {
        if (ent.anyStandard) {
          langs.push(`${ent.anyStandard} of your choice`);
        } else {
          Object.entries(ent).filter(([, v]) => v === true).forEach(([k]) => langs.push(cap2(k)));
        }
      });
      lines.push(`**Languages:** ${langs.join(", ")}`, "");
    }
    if (Array.isArray(bg.toolProficiencies) && bg.toolProficiencies.length) {
      const tools = [];
      bg.toolProficiencies.forEach((ent) => {
        if (ent.choose && Array.isArray(ent.choose.from)) {
          const list = ent.choose.from.map(humanize).join(", ");
          tools.push(`Choose ${ent.choose.count} from ${list}`);
          return;
        }
        if (typeof ent === "string") {
          tools.push(humanize(ent));
          return;
        }
        Object.entries(ent).filter(([_, v]) => v === true).forEach(([k]) => tools.push(humanize(k)));
      });
      lines.push(`**Tool Proficiencies:** ${tools.join(", ")}`, "");
    }
    if (Array.isArray(bg.startingEquipment) && bg.startingEquipment.length) {
      lines.push(`**Equipment:**`);
      bg.startingEquipment.forEach((grp) => {
        if (Array.isArray(grp._)) {
          grp._.forEach((it) => lines.push(`- ${fmtItem(it)}`));
        }
        ["a", "b"].forEach((key) => {
          if (Array.isArray(grp[key])) {
            grp[key].forEach((it) => lines.push(`- ${fmtItem(it)}`));
          }
        });
      });
      lines.push("");
    }
    if (Array.isArray(bg.entries)) {
      bg.entries.forEach((entry) => {
        if (entry.type === "list" && entry.style === "list-hang-notitle") {
          return;
        }
        if (entry.name) {
          const header = entry.data?.isFeature ? entry.name.replace(/^Feature:\s*/, "") : entry.name;
          lines.push(`## ${header}`, "");
        }
        if (Array.isArray(entry.entries)) {
          entry.entries.forEach((e) => {
            if (typeof e === "string") {
              lines.push(replace5eTags(e), "");
            } else if (e.type === "list" && Array.isArray(e.items)) {
              e.items.forEach(
                (it) => lines.push(`- ${replace5eTags(it.entry ?? it)}`)
              );
              lines.push("");
            } else if (e.type === "table") {
              const tbl = renderMarkdownTable(e);
              if (tbl) lines.push(tbl, "");
            }
          });
        } else if (entry.type === "list" && Array.isArray(entry.items)) {
          entry.items.forEach(
            (it) => lines.push(`- ${replace5eTags(it.entry ?? it)}`)
          );
          lines.push("");
        }
      });
    }
    outputs.push({
      path: `Player Build/Backgrounds/${bg.name}.md`,
      content: lines.join("\n").trimEnd() + "\n"
    });
  });
  return outputs;
}
function cap2(str) {
  return str.charAt(0).toUpperCase() + str.slice(1);
}
function fmtItem(item) {
  if (typeof item === "string") {
    if (item.includes("|")) {
      return replace5eTags(`{@item ${item}}`);
    }
    return replace5eTags(item);
  }
  const priceRaw = item.containsValue ?? item.value;
  if (typeof priceRaw === "number" && // make sure it’s not also an “item” or “equipmentType”
  !item.item && !item.equipmentType && !item.special) {
    const gp = priceRaw >= 100 ? priceRaw / 100 : priceRaw;
    return `${gp} gp`;
  }
  if (item.item) {
    const link = replace5eTags(`{@item ${item.item}}`);
    if (typeof priceRaw === "number") {
      const gp = priceRaw >= 100 ? priceRaw / 100 : priceRaw;
      return `${link} (${gp} gp)`;
    }
    return link;
  }
  if (typeof item.special === "string") {
    return item.special;
  }
  if (item.equipmentType) {
    switch (item.equipmentType) {
      case "toolArtisan":
        return "One type of artisan\u2019s tools (of your choice)";
      case "instrumentMusical":
        return "One type of musical instrument (of your choice)";
      case "setGaming":
        return "One set of gaming dice (of your choice)";
      default:
        return humanize(item.equipmentType);
    }
  }
  return replace5eTags(JSON.stringify(item));
}
function humanize(str) {
  const spaced = str.replace(/([a-z])([A-Z])/g, "$1 $2");
  return spaced.charAt(0).toUpperCase() + spaced.slice(1);
}

// src/parsers/5e-2014/installer.ts
var import_obsidian2 = require("obsidian");
async function listSpellFilesFromGitHub(repo) {
  const url = `https://api.github.com/repos/${repo}/contents/data/spells`;
  const res = await fetch(url);
  const data = await res.json();
  return data.filter((item) => item.type === "file" && item.name.startsWith("spells-") && item.name.endsWith(".json")).map((item) => item.name);
}
async function listBestiaryFilesFromGitHub(repo) {
  const url = `https://api.github.com/repos/${repo}/contents/data/bestiary`;
  const res = await fetch(url);
  const list = await res.json();
  const CORE_SOURCES = [
    "bestiary-phb.json",
    "bestiary-mm.json",
    "bestiary-dmg.json",
    "bestiary-xge.json",
    "bestiary-vgm.json",
    "bestiary-tce.json",
    "bestiary-egw.json",
    "bestiary-erlw.json",
    "bestiary-mtf.json",
    "bestiary-vrgr.json",
    "bestiary-cos.json",
    "bestiary-oota.json",
    "bestiary-pota.json",
    "bestiary-hotdq.json",
    "bestiary-rot.json",
    "bestiary-skt.json",
    "bestiary-tftyp.json",
    "bestiary-toa.json"
  ];
  return list.filter((item) => item.type === "file" && CORE_SOURCES.includes(item.name)).map((item) => item.name);
}
var ITEM_JSON_FILES = [
  "items-base.json",
  "items.json",
  "objects.json",
  "vehicles.json",
  "decks.json"
];
async function listItemFilesFromGitHub(repo) {
  const url = `https://api.github.com/repos/${repo}/contents/data`;
  const res = await fetch(url);
  const data = await res.json();
  return data.filter((item) => item.type === "file" && ITEM_JSON_FILES.includes(item.name)).map((item) => item.name);
}
async function listClassFilesFromGitHub(repo) {
  const url = `https://api.github.com/repos/${repo}/contents/data/class`;
  const res = await fetch(url);
  const listing = await res.json();
  return listing.filter(
    (item) => item.type === "file" && item.name.startsWith("class-") && item.name.endsWith(".json")
  ).map((item) => item.name);
}
async function ensureFolder(app, folderPath) {
  const parts = folderPath.split("/");
  let curr = "";
  for (const p of parts) {
    curr = curr ? `${curr}/${p}` : p;
    try {
      await app.vault.createFolder(curr);
    } catch {
    }
  }
}
async function importEditionData(params) {
  const { app, edition, targetPath } = params;
  const repo = edition.repo ?? "";
  {
    const spellFiles = await listSpellFilesFromGitHub(repo);
    for (const fileName of spellFiles) {
      try {
        const res = await fetch(`${edition.sourceUrl}/spells/${fileName}`);
        const json = await res.json();
        const files = parseSpellsFile(json, edition.id);
        for (const md of files) {
          const fullPath = (0, import_obsidian.normalizePath)(`${targetPath}/Spells/${md.path}`);
          const folder = fullPath.split("/").slice(0, -1).join("/");
          await ensureFolder(app, folder);
          await app.vault.adapter.write(fullPath, md.content);
        }
      } catch (e) {
        console.warn(`Failed to import spell ${fileName}:`, e);
      }
    }
  }
  {
    const bestiaryFiles = await listBestiaryFilesFromGitHub(repo);
    for (const fileName of bestiaryFiles) {
      try {
        const res = await fetch(`${edition.sourceUrl}/bestiary/${fileName}`);
        const json = await res.json();
        const parsed = parseBestiaryFile(json, edition.id);
        for (const md of parsed) {
          const fullPath = (0, import_obsidian.normalizePath)(`${targetPath}/Bestiary/${md.path}`);
          const folder = fullPath.split("/").slice(0, -1).join("/");
          await ensureFolder(app, folder);
          await app.vault.adapter.write(fullPath, md.content);
        }
      } catch (e) {
        console.warn(`Failed to import bestiary ${fileName}:`, e);
      }
    }
  }
  {
    const itemFiles = await listItemFilesFromGitHub(repo);
    for (const fn of itemFiles) {
      try {
        const res = await fetch(`${edition.sourceUrl}/${fn}`);
        const json = await res.json();
        const mdFiles = parseItemsFile(json, edition.id);
        for (const md of mdFiles) {
          const fullPath = (0, import_obsidian.normalizePath)(`${targetPath}/${md.path}`);
          const folder = fullPath.split("/").slice(0, -1).join("/");
          await ensureFolder(app, folder);
          await app.vault.adapter.write(fullPath, md.content);
        }
      } catch (e) {
        console.warn(`Failed to import items from ${fn}:`, e);
      }
    }
  }
  {
    const res = await fetch(`${edition.sourceUrl}/races.json`);
    const json = await res.json();
    const mdFiles = parseSpeciesFile(json, edition.id);
    for (const md of mdFiles) {
      const fullPath = (0, import_obsidian.normalizePath)(`${targetPath}/Player Build/${md.path}`);
      await ensureFolder(app, fullPath.split("/").slice(0, -1).join("/"));
      await app.vault.adapter.write(fullPath, md.content);
    }
  }
  let optionalFeatures = [];
  try {
    const res = await fetch(`${edition.sourceUrl}/optionalfeatures.json`);
    const raw = await res.json();
    optionalFeatures = Array.isArray(raw.optionalfeature) ? raw.optionalfeature : [];
  } catch (e) {
    console.warn("Failed to import optionalfeatures.json:", e);
  }
  {
    const classFiles = await listClassFilesFromGitHub(repo);
    for (const fileName of classFiles) {
      try {
        const res = await fetch(`${edition.sourceUrl}/class/${fileName}`);
        const json = await res.json();
        const mdFiles = parseClassFile(
          json,
          edition.id,
          fileName,
          optionalFeatures
        );
        for (const md of mdFiles) {
          const fullPath = (0, import_obsidian.normalizePath)(`${targetPath}/Player Build/${md.path}`);
          await ensureFolder(app, fullPath.split("/").slice(0, -1).join("/"));
          const existing = app.vault.getAbstractFileByPath(fullPath);
          if (existing instanceof import_obsidian2.TFile) {
            await app.vault.modify(existing, md.content);
          } else {
            await app.vault.create(fullPath, md.content);
          }
        }
      } catch (e) {
        console.warn(`Failed to import class ${fileName}:`, e);
      }
    }
  }
  {
    try {
      const res = await fetch(`${edition.sourceUrl}/actions.json`);
      const json = await res.json();
      const mdFiles = parseActionsFile(json, edition.id);
      for (const md of mdFiles) {
        const fullPath = (0, import_obsidian.normalizePath)(
          `${targetPath}/${md.path}`
        );
        const folder = fullPath.split("/").slice(0, -1).join("/");
        await ensureFolder(app, folder);
        await app.vault.adapter.write(fullPath, md.content);
      }
    } catch (e) {
      console.warn("Failed to import actions.json:", e);
    }
  }
  {
    try {
      const res = await fetch(`${edition.sourceUrl}/conditionsdiseases.json`);
      const json = await res.json();
      const mdFiles = parseConditionsDiseasesFile(json, edition.id);
      for (const md of mdFiles) {
        const fullPath = (0, import_obsidian.normalizePath)(
          `${targetPath}/${md.path}`
        );
        const folder = fullPath.split("/").slice(0, -1).join("/");
        await ensureFolder(app, folder);
        await app.vault.adapter.write(fullPath, md.content);
      }
    } catch (e) {
      console.warn("Failed to import conditionsdiseases.json:", e);
    }
  }
  {
    try {
      const res = await fetch(`${edition.sourceUrl}/senses.json`);
      const json = await res.json();
      const mdFiles = parseSensesFile(json, edition.id);
      for (const md of mdFiles) {
        const fullPath = (0, import_obsidian.normalizePath)(
          `${targetPath}/${md.path}`
        );
        const folder = fullPath.split("/").slice(0, -1).join("/");
        await ensureFolder(app, folder);
        await app.vault.adapter.write(fullPath, md.content);
      }
    } catch (e) {
      console.warn("Failed to import senses.json:", e);
    }
  }
  {
    try {
      const res = await fetch(`${edition.sourceUrl}/skills.json`);
      const json = await res.json();
      const mdFiles = parseSkillsFile(json, edition.id);
      for (const md of mdFiles) {
        const fullPath = (0, import_obsidian.normalizePath)(
          `${targetPath}/${md.path}`
        );
        const folder = fullPath.split("/").slice(0, -1).join("/");
        await ensureFolder(app, folder);
        await app.vault.adapter.write(fullPath, md.content);
      }
    } catch (e) {
      console.warn("Failed to import skills.json:", e);
    }
  }
  {
    try {
      const res = await fetch(`${edition.sourceUrl}/feats.json`);
      const json = await res.json();
      const mdFiles = parseFeatsFile(json, edition.id);
      for (const md of mdFiles) {
        const fullPath = (0, import_obsidian.normalizePath)(
          `${targetPath}/${md.path}`
        );
        const folder = fullPath.split("/").slice(0, -1).join("/");
        await ensureFolder(app, folder);
        await app.vault.adapter.write(fullPath, md.content);
      }
    } catch (e) {
      console.warn("Failed to import feats.json:", e);
    }
  }
  {
    try {
      const res = await fetch(`${edition.sourceUrl}/backgrounds.json`);
      const json = await res.json();
      const mdFiles = parseBackgroundsFile(json, edition.id);
      for (const md of mdFiles) {
        const fullPath = (0, import_obsidian.normalizePath)(`${targetPath}/${md.path}`);
        const folder = fullPath.split("/").slice(0, -1).join("/");
        await ensureFolder(app, folder);
        await app.vault.adapter.write(fullPath, md.content);
      }
    } catch (e) {
      console.warn("Failed to import backgrounds.json:", e);
    }
  }
}

// src/parsers/5e-2025/installer.ts
var installer_exports2 = {};
__export(installer_exports2, {
  importEditionData: () => importEditionData2
});
var import_obsidian3 = require("obsidian");

// src/parsers/5e-2025/helpers/sourceMap.ts
var SOURCE_NAME_MAP2 = {
  // Core rulebooks
  PHB: "Player's Handbook",
  MM: "Monster Manual",
  DMG: "Dungeon Master's Guide",
  // Official expansions & adventure modules
  CoS: "Curse of Strahd",
  OotA: "Out of the Abyss",
  PotA: "Princes of the Apocalypse",
  HotDQ: "Hoard of the Dragon Queen",
  RoT: "Rise of Tiamat",
  SKT: "Storm King's Thunder",
  TftYP: "Tales from the Yawning Portal",
  ToA: "Tomb of Annihilation",
  // Supplemental guides
  XGE: "Xanathar's Guide to Everything",
  VGM: "Volo's Guide to Monsters",
  TCE: "Tasha's Cauldron of Everything",
  EGW: "Eberron: Rising from the Last War",
  ERLW: "Explorer's Guide to Wildemount",
  MTF: "Monsters of the Multiverse",
  VRGR: "Van Richten's Guide to Ravenloft",
  // Additional sourcebooks
  AAG: "Astral Adventurer\u2019s Guide",
  AI: "Acquisitions Incorporated",
  AitFRAVFT: "Adventures in the Forgotten Realms: A Visual Field Test",
  BMT: "Big Monster Tome",
  DoDk: "Dragon of Darkkeep",
  FTD: "Fizban\u2019s Treasury of Dragons",
  GGR: "Guildmaster\u2019s Guide to Ravnica",
  GHLoE: "Ghosts of the Horizon: Light Over Elensaria",
  IDRotF: "Icewind Dale: Rime of the Frostmaiden",
  LLK: "Lost Laboratory of Kwalish",
  SatO: "Sapphire of Truth",
  SCC: "Strixhaven: Curriculum of Chaos",
  TDCSR: "The Dungeon Coach\u2019s Rulebook",
  JttRC: "Journeys through the Radiant Citadel",
  "AitFR-AVT": "Adventures in the Forgotten Realms: A Verdant Tomb",
  "AitFR-FCD": "Adventures in the Forgotten Realms: From Cyan Depths",
  RMR: "Dungeons and Dragons: Rick and Morty",
  SCAG: "Sword Coast Adventurer's Guide",
  EEPC: "Elemental Evil Player's Companion",
  MOT: "Mythic Odysseys of Theros",
  WBtW: "The Wild Beyond the Witchlight",
  BGDIA: "Baldur's Gate: Descent Into Avernus",
  ToFW: "Turn of Fortune's Wheel",
  CoA: "Chains of Asmodeus",
  CRCotN: "Critical Role: Call of the Netherdeep",
  ToD: "Tyranny of Dragons",
  MPMM: "Mordenkainen Presents: Monsters of the Multiverse",
  LoX: "Light of Xaryxis",
  QftIS: "Quests from the Infinite Staircase",
  WDH: "Waterdeep: Dragon Heist",
  WDMM: "Waterdeep: Dungeon of the Mad Mage",
  PaBTSO: "Phandelver and Below: The Shattered Obelisk",
  CM: "Candlekeep Mysteries",
  GoS: "Ghosts of Saltmarsh",
  DSotDQ: "Dragonlance: Shadow of the Dragon Queen",
  KftGV: "Keys from the Golden Vault",
  SDW: "Essentials Kit: Sleeping Dragon's Wake",
  DoSI: "Dragons of Stormwreck Isle",
  GotSF: "Giants of the Star Forge",
  DIP: "Essentials Kit: Dragon of Icespire Peak",
  SLW: "Essentials Kit: Storm Lord's Wrath",
  IMR: "Infernal Machine Rebuild",
  VEoR: "Vecna: Eve of Ruin",
  PSI: "Plane Shift: Innistrad",
  AATM: "Adventure Atlas: The Mortuary",
  PSZ: "Plane Shift: Zendikar",
  DC: "Essentials Kit: Divine Contention",
  LMoP: "Lost Mine of Phandelver",
  RMBRE: "The Lost Dungeon of Rickedness: Big Rick Energy",
  HftT: "Hunt for the Thessalhydra",
  PSX: "Plane Shift: Ixalan",
  HFStCM: "Heroes' Feast: Saving the Childrens Menu",
  SjA: "Spelljammer Academy",
  LK: "Lightning Keep",
  RtG: "Return to the Glory",
  TTP: "The Tortle Package",
  LR: "Locathah Rising",
  PSA: "Plane Shift: Amonkhet",
  OGA: "One Grung Above",
  "NRH-TLT": "Nerds Restoring Harmony: The Lost Tomb",
  "NRH-AT": "Nerds Restoring Harmony: Adventure Together",
  BGG: "Bigby Presents: Glory of the Giants",
  RoTOS: "The Rise of Tiamat Online Supplement",
  XMtS: "X Marks the Spot",
  "HAT-LMI": "Honor Among Theives: Legendary Magic Items",
  DitLCoT: "Descent into the Lost Caverns of Tsojcanth",
  "AitFR-DN": "Adventures in the Forgotten Realms: Deepest Night",
  "AitFR-THP": "Adventures in the Forgotten Realms: The Hidden Pages",
  BAM: "Boo's Astral Menagerie",
  AZfyT: "A Zib for Your Thougts",
  MCV2DC: "Monstrous Compendium Volume 2: Dragonlance Creatures",
  PSK: "Plane Shift: Kaladesh",
  PSD: "Plane Shift: Dominaria",
  AWM: "Adventure with Muk",
  UATheMysticClass: "Unearthed Arcana: The Mystic Class",
  ALCurseOfStrahd: "Adventurers League: Curse of Strahd",
  ALElementalEvil: "Adventurers League: Elemental Evil",
  ALRageOfDemons: "Adventurers League: Rage of Demons"
};
function getFullSourceName2(abbrev, editionId) {
  let name = SOURCE_NAME_MAP2[abbrev] ?? abbrev;
  if (abbrev === "PHB") {
    if (editionId?.includes("2014")) name += " (2014)";
    else if (editionId?.includes("2025")) name += " (2025)";
  }
  return name;
}

// src/parsers/5e-2025/helpers/tagReplacer.ts
function replace5eTags2(input) {
  let text;
  if (Array.isArray(input)) {
    text = input.join(" ");
  } else if (typeof input === "string") {
    text = input;
  } else {
    text = String(input ?? "");
  }
  return text.replace(
    /\{@(spell|item|creature|race) ([^|}]+)(?:\|[^}]+)?\}/g,
    (_, __, name) => `[[${capitalizeEach2(name)}]]`
  ).replace(
    /\{@(condition|status|action|skill) ([^|}]+)(?:\|[^}]+)?\}/g,
    (_, tag, name) => `[[${capitalize2(tag)}s#${name}|${capitalizeEach2(name)}]]`
  ).replace(
    /\{@classFeature ([^|}]+)\|([^|}]+)(?:\|[^}]+)?\}/g,
    (_, feature, cls) => `[[${cls}#${feature}]]`
  ).replace(/\{@(book|filter) ([^|}]+)(?:\|[^}]+)?\}/g, (_, __, txt) => txt).replace(/\{@note ([^}]+)\}/g, (_, note) => `*${note}*`).replace(/\{@(damage|dice|dc|hit|sense) ([^}]+)\}/g, (_, __, value) => value).replace(/\{@chance ([^|}]+)(?:\|[^}]+)?\}/g, (_, value) => `${value}%`).replace(/\{@quickref ([^|}]+)(?:\|[^|]*\|[^}]*)?\}/g, (_, term) => {
    const known = [
      "difficult terrain",
      "total cover",
      "half cover",
      "three-quarters cover",
      "heavily obscured",
      "lightly obscured"
    ];
    return known.includes(term.toLowerCase()) ? `[[Rules#${capitalizeEach2(term)}]]` : term;
  }).replace(/\{\@5etools\s+([^|}]+)\|[^}]+\}/g, "$1").replace(/\{@recharge\s*([^}]+)\}/g, (_, num) => `(recharge: ${num.trim()})`).replace(/\{@(scaledice|scaledamage)[^}]*\|([^|}]+)\}/g, (_, __, value) => value).replace(/\{@d20[^}]*\}/g, "").replace(/\{@[^}]+\}/g, "");
}
function capitalize2(str) {
  return str.charAt(0).toUpperCase() + str.slice(1).toLowerCase();
}
function capitalizeEach2(str) {
  return str.split(" ").map(capitalize2).join(" ");
}

// src/parsers/5e-2025/helpers/markdownTable.ts
function renderMarkdownTable2(entry) {
  if (entry.type !== "table" || !Array.isArray(entry.rows)) return "";
  const caption = entry.caption ? `##### ${entry.caption}
` : "";
  const headers = (entry.colLabels ?? []).map((h) => replace5eTags2(h.trim()));
  const headerRow = `| ${headers.join(" | ")} |`;
  const dividerRow = `| ${headers.map(() => ":--").join(" | ")} |`;
  const bodyRows = entry.rows.map((row) => {
    const cells = row.map((cell) => {
      if (typeof cell === "string") return replace5eTags2(cell);
      if (typeof cell === "object") {
        if (cell.roll?.exact !== void 0) return `${cell.roll.exact}`;
        if (cell.roll?.min !== void 0 && cell.roll?.max !== void 0) {
          return `${cell.roll.min}\u2013${cell.roll.max}`;
        }
        return replace5eTags2(JSON.stringify(cell));
      }
      return replace5eTags2(String(cell));
    });
    return `| ${cells.join(" | ")} |`;
  });
  return `${caption}${headerRow}
${dividerRow}
${bodyRows.join("\n")}`;
}

// src/parsers/5e-2025/helpers/formatEntry.ts
function isTypedEntry(x) {
  return x != null && typeof x === "object" && !Array.isArray(x) && typeof x.type === "string";
}
function formatEntry2(entry) {
  if (typeof entry === "string") {
    const cleaned = entry.trim();
    if (!cleaned || cleaned === "}") return "";
    return replace5eTags2(cleaned);
  }
  if (isTypedEntry(entry) && entry.type === "entries" && Array.isArray(entry.entries)) {
    const body = entry.entries.map(formatEntry2).filter((str) => str.trim().length > 0).join("\n\n");
    return entry.name ? `##### ${entry.name}
${body}` : body;
  }
  if (isTypedEntry(entry) && entry.type === "list" && Array.isArray(entry.items)) {
    return entry.items.map((i) => `- ${replace5eTags2(typeof i === "string" ? i : JSON.stringify(i))}`).join("\n");
  }
  if (isTypedEntry(entry) && entry.type === "table" && Array.isArray(entry.rows)) {
    return renderMarkdownTable2(entry);
  }
  if (isTypedEntry(entry) && entry.type === "quote" && Array.isArray(entry.entries)) {
    const quote = entry.entries.map(formatEntry2).join(" ").trim();
    const author = entry.by ? ` \u2014 ${entry.by}` : "";
    return `*"${quote}${author}"*`;
  }
  if (isTypedEntry(entry) && entry.type === "inset" && Array.isArray(entry.entries)) {
    const inset = entry.entries.map(formatEntry2).join("\n").trim();
    return `> ${inset.replace(/\n/g, "\n> ")}`;
  }
  if (isTypedEntry(entry) && entry.type === "refClassFeature" && typeof entry.classFeature === "string") {
    const [name] = entry.classFeature.split("|");
    const anchor = name.replace(/[^\w\s-]/g, "").replace(/\s+/g, "-").toLowerCase();
    return `[[#${anchor}]]`;
  }
  return "";
}

// src/parsers/5e-2025/bestiary.ts
var skippedMonsters2 = [];
var SIZE_MAP3 = {
  T: "Tiny",
  S: "Small",
  M: "Medium",
  L: "Large",
  H: "Huge",
  G: "Gargantuan"
};
var ALIGNMENT_MAP2 = {
  L: "Lawful",
  N: "Neutral",
  C: "Chaotic",
  G: "Good",
  E: "Evil",
  U: "Unaligned"
};
function capitalizeFirst3(str) {
  const s = String(str || "");
  return s.charAt(0).toUpperCase() + s.slice(1);
}
function formatSizeAbbrev3(abbrev) {
  return SIZE_MAP3[abbrev] || abbrev;
}
function formatAlignmentAbbrev2(abbrev) {
  return abbrev.trim().split(/\s+/).map((letter) => ALIGNMENT_MAP2[letter] || letter).join(" ");
}
var RAW_NPCS2 = [
  "Abjurer",
  "Acolyte",
  "Apprentice Wizard",
  "Archdruid",
  "Archer",
  "Archmage",
  "Assassin",
  "Bandit",
  "Bandit Captain",
  "Bard",
  "Berserker",
  "Blackguard",
  "Champion",
  "Commoner",
  "Conjurer",
  "Cult Fanatic",
  "Cultist",
  "Diviner",
  "Druid (NPC)",
  "Druid NPC",
  "Enchanter",
  "Evoker",
  "Gladiator",
  "Guard",
  "Illusionist",
  "Knight",
  "Kraken Priest",
  "Mage",
  "Martial Arts Adept",
  "Master Thief",
  "Necromancer",
  "Noble",
  "Priest",
  "Scout",
  "Spy",
  "Swashbuckler",
  "Thug",
  "Transmuter",
  "Tribal Warrior",
  "Veteran",
  "War Priest",
  "Warlock of the Archfey",
  "Warlock of the Fiend",
  "Warlock of the Great Old One",
  "Warlord"
];
var NORMALIZED_NPC_NAMES2 = new Set(RAW_NPCS2.map((n) => normalizeName2(n)));
function normalizeName2(name) {
  return name.replace(/\s+/g, " ").trim().toLowerCase();
}
function categorizeCreature2(monster) {
  const typeValue = monster.type;
  const name = monster.name;
  const t = typeof typeValue === "string" ? typeValue.toLowerCase() : typeValue?.type?.toLowerCase() || String(typeValue).toLowerCase();
  const normalizedName = normalizeName2(name);
  if (monster.isNpc || monster.isNamedCreature) return "Story NPCs";
  if (t === "beast") return "Beasts";
  if (t === "humanoid" && NORMALIZED_NPC_NAMES2.has(normalizedName)) return "Non-Beasts";
  if (t === "humanoid") return "Monsters";
  return "Monsters";
}
function renderAbilitiesTable2(str, dex, con, int, wis, cha) {
  return [
    `| STR | DEX | CON | INT | WIS | CHA |`,
    `| --- | --- | --- | --- | --- | --- |`,
    `| ${str} | ${dex} | ${con} | ${int} | ${wis} | ${cha} |`
  ].join("\n");
}
function renderEntry2(entry) {
  const name = entry.name;
  let descriptions = [];
  if (Array.isArray(entry.entries)) {
    descriptions = entry.entries;
  } else if (typeof entry.entries === "string") {
    descriptions = [entry.entries];
  } else if (Array.isArray(entry.desc)) {
    descriptions = entry.desc;
  } else if (typeof entry.desc === "string") {
    descriptions = [entry.desc];
  }
  const raw = descriptions.join(" ");
  const desc = replace5eTags2(raw);
  return `***${name}.*** ${desc}`;
}
function parseBestiaryFile2(json, editionId) {
  if (!json.monster) return [];
  json._editionId = editionId;
  const validMonsters = json.monster.filter((m) => {
    const acVal = Array.isArray(m.ac) ? m.ac[0]?.ac ?? m.ac[0] : typeof m.ac === "object" ? m.ac?.ac ?? null : m.ac;
    const hpVal = typeof m.hp === "object" ? m.hp?.average ?? m.hp?.hp ?? null : m.hp;
    return acVal != null && hpVal != null && !isNaN(Number(acVal)) && !isNaN(Number(hpVal));
  });
  const allNames = new Set(json.monster.map((m) => m.name));
  const validNames = new Set(validMonsters.map((m) => m.name));
  const missing = [...allNames].filter((name) => !validNames.has(name));
  return validMonsters.map((monster) => {
    const name = monster.name;
    const safeName = name.replace(/\//g, "-");
    const rawSize = monster.size || "M";
    const rawAlignment = Array.isArray(monster.alignment) ? monster.alignment.join(" ") : monster.alignment || "N";
    let rawType = "Unknown";
    if (typeof monster.type === "string") {
      rawType = capitalizeFirst3(monster.type);
    } else if (monster.type?.type) {
      const base = capitalizeFirst3(monster.type.type);
      const tags = monster.type.tags?.length ? ` (${monster.type.tags.map(capitalizeFirst3).join(", ")})` : "";
      rawType = `${base}${tags}`;
    }
    monster._parsedType = rawType;
    const ac = Array.isArray(monster.ac) ? monster.ac[0].ac : monster.ac;
    const hp = monster.hp?.average ?? monster.hp;
    const cr = monster.cr;
    if (!ac && !hp) {
      skippedMonsters2.push(monster.name);
      return null;
    }
    const abilities = Array.isArray(monster.ability) ? monster.ability : [monster.str, monster.dex, monster.con, monster.int, monster.wis, monster.cha];
    const [str = 10, dex = 10, con = 10, int = 10, wis = 10, cha = 10] = abilities;
    const speedList = [];
    if (typeof monster.speed === "object") {
      for (const [mode, val] of Object.entries(monster.speed)) {
        if (mode === "canHover") continue;
        if (val && typeof val === "object" && "number" in val) {
          const num = val.number;
          const cond = val.condition ? ` ${val.condition}` : "";
          speedList.push(`${mode} ${num} ft.${cond}`);
        } else {
          speedList.push(`${mode} ${val} ft.`);
        }
      }
    } else {
      speedList.push(`${monster.speed} ft.`);
    }
    const speed = speedList.join(", ");
    let source = getFullSourceName2(monster.source, editionId);
    source = source.replace(/:/g, " -");
    const category = categorizeCreature2(monster);
    const fm = buildFM2(monster, BESTIARY_META_DEFS2);
    const yaml = serializeFrontmatter2(fm, BESTIARY_META_DEFS2);
    const savingThrows = fm[FM_FIELDS4.SAVING_THROWS] || [];
    const skills = fm[FM_FIELDS4.SKILLS] || [];
    const senses = fm[FM_FIELDS4.SENSES] || [];
    const languages = fm[FM_FIELDS4.LANGUAGES] || [];
    let body = `# ${name}

${formatSizeAbbrev3(rawSize)} ${rawType}, ${formatAlignmentAbbrev2(rawAlignment)}

**Armor Class**: ${ac}
**Hit Points**: ${hp}
**Speed**: ${speed}
` + (savingThrows.length ? `**Saving Throws**: ${savingThrows.join(", ")}
` : "") + (skills.length ? `**Skills**: ${skills.join(", ")}
` : "") + (senses.length ? `**Senses**: ${senses.join(", ")}
` : "") + (languages.length ? `**Languages**: ${languages.join(", ")}
` : "") + `**Challenge**: ${cr}

` + renderAbilitiesTable2(str, dex, con, int, wis, cha);
    if (monster.trait) body += `

### Traits
${monster.trait.map(renderEntry2).join("\n\n")}`;
    if (monster.action) body += `

### Actions
${monster.action.map(renderEntry2).join("\n\n")}`;
    if (monster.reaction) body += `

### Reactions
${monster.reaction.map(renderEntry2).join("\n\n")}`;
    if (monster.legendary) body += `

### Legendary Actions
${monster.legendary.map(renderEntry2).join("\n\n")}`;
    const content = `---
${yaml}
---

${body}`;
    return {
      path: `${category}/${safeName}.md`,
      content
    };
  });
}

// src/parsers/5e-2025/items.ts
function capitalizeFirst4(input) {
  if (typeof input !== "string" || input.length === 0) return "";
  const s = input.trim();
  return s.charAt(0).toUpperCase() + s.slice(1).toLowerCase();
}
var DAMAGE_TYPE_MAP3 = {
  P: "Piercing",
  B: "Bludgeoning",
  S: "Slashing",
  N: "Necrotic",
  R: "Radiant",
  F: "Fire",
  C: "Cold",
  L: "Lightning",
  T: "Thunder",
  A: "Acid",
  H: "Healing",
  U: "Force",
  V: "Psychic"
};
var PROPERTY_MAP2 = {
  A: "Ammunition",
  F: "Finesse",
  H: "Heavy",
  L: "Light",
  R: "Reload",
  S: "Special",
  "2H": "Two-Handed",
  T: "Thrown",
  V: "Versatile"
};
var ITEM_TYPE_MAP2 = {
  $C: "Currency",
  $G: "Gem",
  A: "Ammunition",
  "AIR|DMG": "Vehicle (air)",
  "AF|DMG": "Future Ammo",
  AT: "Artisan Tools",
  EXP: "Explosive",
  FD: "Food and Drink",
  G: "Gear",
  GS: "Game",
  HA: "Heavy Armor",
  "IDG|TDCSR": "Illicit Drug",
  INS: "Instrument",
  LA: "Light Armor",
  M: "Weapon",
  MA: "Medium Armor",
  MNT: "Mounts and Vehicles",
  ODH: "Miscellaneous",
  P: "Consumable",
  R: "Ranged Weapon",
  RD: "Rod",
  RG: "Ring",
  S: "Shield",
  SC: "Scroll",
  SCF: "Spell Casting Focus",
  SHP: "Ship",
  T: "Tool",
  TAH: "Mounts and Vehicles",
  TG: "Trade Goods",
  VEH: "Mounts and Vehicles",
  WD: "Wand"
};
var codeFolderMap2 = {
  // Weapons & Armor
  "A": "Weapons and Armor/Ammunition",
  "M": "Weapons and Armor/Weapons",
  "R": "Weapons and Armor/Ranged Weapons",
  "S": "Weapons and Armor/Shields",
  "LA": "Weapons and Armor/Armor/Light Armor",
  "MA": "Weapons and Armor/Armor/Medium Armor",
  "HA": "Weapons and Armor/Armor/Heavy Armor",
  "EXP": "Weapons and Armor/Weapons/Explosives",
  // Future Ammo (AF|DMG → rawCode "AF")
  "AF": "Weapons and Armor/Ammunition/Future Ammo",
  // Magical Items
  "RD": "Magical Items/Rods",
  "RG": "Magical Items/Rings",
  "SC": "Magical Items/Scrolls",
  "SCF": "Magical Items/Spell Casting Focus",
  "WD": "Magical Items/Wands",
  // Valuables
  "$G": "Valuables/Gems",
  // Currency (rawCode becomes "C" after stripping $)
  "C": "Valuables/Currency",
  "TG": "Valuables/Trade Goods",
  // Artisan Goods
  "AT": "Artisan Goods/Tools",
  "T": "Artisan Goods/Tools",
  "INS": "Artisan Goods/Instruments",
  "GS": "Artisan Goods/Games",
  // Gear & Mounts
  "G": "Gear",
  // Mounts & Vehicles
  "MNT": "Gear/Mounts and Vehicles",
  "TAH": "Gear/Mounts and Vehicles",
  "VEH": "Gear/Mounts and Vehicles",
  // Air vehicles (AIR|DMG → rawCode "AIR")
  "AIR": "Gear/Mounts and Vehicles/Air",
  // Consumables
  "P": "Consumables",
  // Food & Drink
  "FD": "Consumables/Food and Drink",
  // Illicit Drugs (IDG|TDCSR → rawCode "IDG")
  "IDG": "Gear/Illicit Drugs",
  // Miscellaneous (ODH)
  "ODH": "Gear/Miscellaneous"
};
function parseItemsFile2(json, editionId) {
  const rawItems = [];
  if (Array.isArray(json.baseitem)) rawItems.push(...json.baseitem);
  if (Array.isArray(json.item)) rawItems.push(...json.item);
  if (Array.isArray(json.object)) rawItems.push(...json.object);
  if (Array.isArray(json.vehicle)) rawItems.push(...json.vehicle);
  if (!rawItems.length) return [];
  const baseNames = new Set(
    Array.isArray(json.baseitem) ? json.baseitem.map((b) => b.name) : []
  );
  const out = [];
  for (const it of rawItems) {
    const name = it.name;
    const safeName = name.replace(/[\/\\:]/g, "-");
    const rawCode = (it.type || "").split("|")[0].split("|")[0].replace(/^\$/, "");
    let folder = codeFolderMap2[rawCode] ?? "Miscellaneous";
    if (it.bonusWeapon) {
      folder = `${folder}/Variants`;
    } else {
      const isMagic = !!it.wondrous || !!it.reqAttune || !!it.req_attune || String(it.rarity).toLowerCase().includes("magic");
      if (isMagic) {
        const [, ...rest] = folder.split("/");
        folder = ["Magical Items", ...rest].join("/");
      }
    }
    if ((folder.startsWith("Weapons and Armor/Weapons") || folder.startsWith("Weapons and Armor/Ranged Weapons")) && it.weaponCategory) {
      folder = `${folder}/${capitalizeFirst4(it.weaponCategory)}`;
    }
    json._editionId = editionId;
    const fm = buildFM2(it, ITEM_META_DEFS2);
    if (fm[FM_FIELDS4.MAGICAL]) {
      fm[FM_FIELDS4.VERMUN] = false;
    }
    if (rawCode === "M" && it.weaponCategory) {
      fm.type = `${capitalizeFirst4(it.weaponCategory)} Weapon`;
    } else if (ITEM_TYPE_MAP2[rawCode]) {
      fm.type = ITEM_TYPE_MAP2[rawCode];
    }
    if (Array.isArray(fm.damageTypes)) {
      fm.damageTypes = fm.damageTypes.map(
        (code) => DAMAGE_TYPE_MAP3[code] || code
      );
    }
    let yaml = serializeFrontmatter2(fm, ITEM_META_DEFS2);
    if (Array.isArray(it.packContents)) {
      yaml += "\npackContents:";
      for (const pc of it.packContents) {
        yaml += `
  - item: "${pc.item}"
    quantity: ${pc.quantity}`;
      }
    }
    const frontmatter = `---
${yaml}
---`;
    const lines = [];
    lines.push(`# ${name}`);
    lines.push("");
    const subtitle = it.weapon ? `${capitalizeFirst4(it.weaponCategory)} Weapon` : it.armor ? folder.split("/").pop() || "Armor" : "";
    if (subtitle) lines.push(`### *${subtitle}*`);
    if (it.weapon) {
      lines.push(`**Category**: ${capitalizeFirst4(it.weaponCategory)}`);
      lines.push(`**Damage**: ${it.dmg1 ?? ""}${it.dmg2 ? ` / ${it.dmg2}` : ""}`);
      const typesBody = (Array.isArray(it.dmgType) ? it.dmgType : [it.dmgType]).filter((t) => Boolean(t)).map((t) => DAMAGE_TYPE_MAP3[t] || t);
      lines.push(`**Damage Type**: ${typesBody.join(", ")}`);
      lines.push(`**Range**: ${it.range ?? "\u2014"}`);
      lines.push(`**Reload**: ${it.reload ?? "\u2014"}`);
      if (it.ammoType) lines.push(`**Ammo Type**: ${it.ammoType}`);
      if (Array.isArray(it.property) && it.property.length) {
        const propsBody = it.property.map((p) => PROPERTY_MAP2[p] || p);
        lines.push(`**Properties**: ${propsBody.join(", ")}`);
      }
    }
    if (it.armor) {
      lines.push(`**Armor Class**: ${it.ac}`);
      if (it.stealth) lines.push(`**Stealth Disadvantage**: true`);
      lines.push("");
    }
    const desc = it.entries ?? it.desc;
    if (desc) {
      for (const p of Array.isArray(desc) ? desc : [desc]) {
        if (typeof p === "string") {
          for (const line of replace5eTags2(p).split("\n")) {
            lines.push(line);
          }
          lines.push("");
        } else if (p && typeof p === "object") {
          if (lines[lines.length - 1] === "") {
            lines.pop();
          }
          lines.push(`#### ${p.name}`);
          const sub = Array.isArray(p.entries) ? p.entries : [];
          for (const sp of sub) {
            for (const line of replace5eTags2(sp).split("\n")) {
              lines.push(line);
            }
          }
          lines.push("");
        }
      }
    }
    const body = lines.join("\n");
    out.push({ path: `Items/${folder}/${safeName}.md`, content: `${frontmatter}

${body}` });
  }
  return out.sort((a, b) => a.path.localeCompare(b.path));
}

// src/parsers/5e-2025/helpers/frontmatter.ts
function cap3(str) {
  if (typeof str !== "string") return "";
  return str.charAt(0).toUpperCase() + str.slice(1);
}
var ABILITY_FULL2 = {
  str: "Strength",
  dex: "Dexterity",
  con: "Constitution",
  int: "Intelligence",
  wis: "Wisdom",
  cha: "Charisma"
};
var SIZE_MAP4 = {
  T: "Tiny",
  S: "Small",
  M: "Medium",
  L: "Large",
  H: "Huge",
  G: "Gargantuan"
};
var FM_FIELDS4 = {
  ABILITY_BONUSES: "ability_bonuses",
  AC: "AC",
  ALIGNMENT: "Alignment",
  AMMO_TYPE: "Ammo Type",
  ARMOR_PROFICIENCIES: "armor-prof",
  ATTACK_TYPE: "attack_type",
  ATTUNEMENT: "Attunement",
  ATTUNE_REQ: "Attune_Req",
  CASTING_TIME: "casting_time",
  CHARISMA: "charisma",
  CHA_MOD: "cha_mod",
  CONCENTRATION: "concentration",
  CONDITION_IMM: "cond_immunity",
  CONSTITUTION: "constitution",
  CON_MOD: "con_mod",
  COST: "cost",
  COMPONENTS: "Components",
  CHALLENGE_RATING: "CR",
  DAMAGE_TYPE: "damage_type",
  DAMAGE_TYPES: "damageTypes",
  DAMAGE: "damage",
  DAMAGE_RES: "dmg_resistance",
  DAMAGE_IMM: "dmg_immunity",
  DEXTERITY: "dexterity",
  DEX_MOD: "dex_mod",
  DURATION: "duration",
  RULESET: "ruleset",
  HP: "HP",
  INTELLIGENCE: "intelligence",
  INT_MOD: "int_mod",
  LANGUAGES: "languages",
  LEVEL: "level",
  MAGICAL: "magical",
  MATERIAL: "material",
  NAME: "name",
  PROPERTIES: "properties",
  RANGE: "range",
  RARITY: "rarity",
  RELOAD: "reload",
  RITUAL: "ritual",
  SAVE: "save",
  SAVING_THROWS: "saving_throws",
  SCHOOL: "school",
  SENSES: "senses",
  SIZE: "size",
  SKILLS: "skills",
  SKILL_CHOICE_LIST: "skill_choice_list",
  SOMATIC: "somatic",
  SOURCE: "source",
  SPECIES: "species",
  SPEED: "speed",
  SPELL_CAST_MOD: "Spell Cast Mod",
  SPELL_RANGE: "Range",
  STEALTH_DISADVANTAGE: "stealthDisadvantage",
  STRENGTH: "strength",
  STR_MOD: "str_mod",
  SUBRACES: "subraces",
  TOOL_PROFICIENCIES: "tool-prof",
  TOOL_CHOICE_LIST: "tool_choice_list",
  TRAITS: "traits",
  TYPE: "type",
  VARIANT: "Variant",
  VERBAL: "verbal",
  VERMUN: "vermun",
  WEAPON_PROFICIENCIES: "weapon-prof",
  WEIGHT: "weight",
  WISDOM: "wisdom",
  WIS_MOD: "wis_mod"
};
var unifiedArmorProfs2 = (val) => Array.isArray(val?.armor) ? val.armor.map(cap3) : Array.isArray(val) ? val.map(cap3) : [];
function unifiedWeaponProfs2(val) {
  const rawArr = Array.isArray(val?.weapons) ? val.weapons : Array.isArray(val) ? val : [];
  const out = /* @__PURE__ */ new Set();
  function handleOne(entry) {
    if (Array.isArray(entry)) {
      entry.forEach(handleOne);
      return;
    }
    if (typeof entry === "string") {
      const lit = entry.trim().toLowerCase();
      if (lit === "simple") {
        out.add("Simple Weapons");
      } else if (lit === "martial") {
        out.add("Martial Weapons");
      } else {
        const text = entry.startsWith("{@") ? replace5eTags2(entry) : cap3(entry);
        out.add(text);
      }
      return;
    }
    if (entry && typeof entry === "object" && entry.proficiency) {
      const name = cap3(entry.proficiency);
      out.add(entry.optional ? `${name} (optional)` : name);
    }
  }
  rawArr.forEach(handleOne);
  return [...out];
}
var unifiedSaves2 = (val) => {
  if (Array.isArray(val)) {
    return val.map(
      (k) => ({
        str: "Strength",
        dex: "Dexterity",
        con: "Constitution",
        int: "Intelligence",
        wis: "Wisdom",
        cha: "Charisma"
      })[k] ?? k.toUpperCase()
    );
  }
  if (typeof val === "object" && val !== null) {
    return Object.keys(val).map((k) => k.toUpperCase());
  }
  return [];
};
var unifiedSkills4 = (val) => {
  if (val && !Array.isArray(val) && typeof val === "object" && // ensure every value is a string or number
  Object.values(val).every((v) => typeof v === "string" || typeof v === "number")) {
    return Object.entries(val).map(
      ([skill, mod]) => `${cap3(skill)} ${mod}`.trim()
    );
  }
  if (val && !Array.isArray(val) && typeof val === "object") {
    const nested = val.skills ?? val.skillProf ?? val.skillProficiencies;
    return unifiedSkills4(nested);
  }
  if (!Array.isArray(val)) return [];
  const out = /* @__PURE__ */ new Set();
  for (const e of val) {
    if (e && typeof e === "object" && typeof e.any === "number") {
      out.add(`Choose ${e.any}`);
      continue;
    }
    if (e && typeof e === "object" && e.choose) {
      const cnt = e.choose.count ?? 1;
      out.add(`Choose ${cnt}`);
    }
    if (e && typeof e === "object") {
      for (const [k, v] of Object.entries(e)) {
        if (v === true) out.add(cap3(k));
      }
    }
    if (typeof e === "string") {
      out.add(cap3(e));
    }
  }
  return [...out];
};
var unifiedToolProfs2 = (val) => {
  let entries = Array.isArray(val) ? val : Array.isArray(val?.toolProficiencies) ? val.toolProficiencies : Array.isArray(val?.tools) ? val.tools : [];
  const out = /* @__PURE__ */ new Set();
  let sawChoose = false;
  for (const e of entries) {
    if (typeof e === "string") {
      out.add(cap3(e));
      continue;
    }
    if (e?.choose) {
      const cnt = e.choose.count ?? 1;
      sawChoose = true;
      out.add(`Choose ${cnt}`);
    }
    for (const [k, v] of Object.entries(e)) {
      if (v === true) {
        out.add(cap3(k));
      } else if (typeof v === "number" && k.startsWith("any")) {
        const raw = k.replace(/^any/, "");
        const spaced = raw.replace(/([a-z])([A-Z])/g, "$1 $2").split(" ").map(cap3).join(" ");
        out.add(`Choose ${v} ${spaced}`);
      }
    }
  }
  return [...out];
};
var ALL_FIELD_DEFS2 = [
  // ─── Core ───
  { callSign: "NAME", jsonKey: "name" },
  {
    callSign: "SOURCE",
    jsonKey: ["source"],
    conv: (raw, allJson) => {
      const out = /* @__PURE__ */ new Set();
      const editionId = allJson._editionId;
      const arr = Array.isArray(raw) ? raw : [raw];
      arr.forEach((src) => {
        out.add(getFullSourceName2(src, editionId));
      });
      for (const os of allJson.otherSources ?? []) {
        if (os && typeof os.source === "string") {
          out.add(getFullSourceName2(os.source, editionId));
        }
      }
      for (const rep of allJson.reprintedAs ?? []) {
        const repStr = typeof rep === "string" ? rep : String(rep);
        const parts = repStr.split("|");
        const src = parts[1] ?? parts[0];
        out.add(getFullSourceName2(src, editionId));
      }
      return [...out];
    }
  },
  // ─── Proficiencies ───
  { callSign: "ARMOR_PROFICIENCIES", jsonKey: ["armorProficiencies", "armorProfs", "startingProficiencies"], conv: unifiedArmorProfs2 },
  {
    callSign: "WEAPON_PROFICIENCIES",
    jsonKey: ["weaponProficiencies", "weaponProfs", "startingProficiencies"],
    conv: unifiedWeaponProfs2
  },
  { callSign: "TOOL_PROFICIENCIES", jsonKey: ["toolProficiencies", "toolProfs", "startingProficiencies"], conv: unifiedToolProfs2 },
  {
    callSign: "TOOL_CHOICE_LIST",
    jsonKey: ["toolProficiencies", "toolProfs", "startingProficiencies"],
    conv: (raw) => {
      const arr = Array.isArray(raw) ? raw : Array.isArray(raw?.toolProficiencies) ? raw.toolProficiencies : Array.isArray(raw?.tools) ? raw.tools : [];
      const choice = arr.find((e) => e?.choose);
      return choice?.choose?.from?.map((s) => cap3(s)) ?? [];
    }
  },
  { callSign: "SAVING_THROWS", jsonKey: ["save", "proficiency"], conv: unifiedSaves2 },
  {
    callSign: "SKILLS",
    jsonKey: ["skill", "skillProf", "skillProficiencies", "startingProficiencies"],
    conv: unifiedSkills4
  },
  {
    callSign: "SKILL_CHOICE_LIST",
    jsonKey: ["skill", "skillProf", "skillProficiencies", "startingProficiencies"],
    conv: (raw) => {
      const arr = Array.isArray(raw) ? raw : Array.isArray(raw?.skillProficiencies) ? raw.skillProficiencies : Array.isArray(raw?.skills) ? raw.skills : Array.isArray(raw?.skillProf) ? raw.skillProf : [];
      const choiceObj = arr.find((e) => e?.choose || typeof e.any === "number");
      if (!choiceObj) return [];
      if (choiceObj.choose && Array.isArray(choiceObj.choose.from)) {
        return choiceObj.choose.from.map(cap3);
      }
      if (typeof choiceObj.any === "number") {
        return SKILL_OPTIONS2;
      }
      return [];
    }
  },
  {
    callSign: "SPELL_CAST_MOD",
    jsonKey: "spellcastingAbility",
    conv: (raw) => {
      const key = String(raw).toLowerCase();
      return ABILITY_FULL2[key] || key.toUpperCase();
    }
  },
  // ─── Spells ───
  { callSign: "LEVEL", jsonKey: "level" },
  { callSign: "SCHOOL", jsonKey: "school", conv: (s) => SCHOOL_MAP2[s] ?? s },
  { callSign: "CASTING_TIME", jsonKey: "time", conv: formatTime2 },
  { callSign: "SPELL_RANGE", jsonKey: "range", conv: formatRange2 },
  { callSign: "DURATION", jsonKey: "duration", conv: formatDuration2 },
  { callSign: "VERBAL", jsonKey: "components", conv: (c) => !!c.v },
  { callSign: "SOMATIC", jsonKey: "components", conv: (c) => !!c.s },
  { callSign: "MATERIAL", jsonKey: "components", conv: (c) => !!c.m },
  {
    callSign: "COMPONENTS",
    jsonKey: "components",
    conv: (c) => {
      if (!c.m) return [];
      const raw = Array.isArray(c.m) ? c.m : [c.m];
      return raw.map((item) => {
        if (typeof item === "string") return item;
        if (item && typeof item === "object" && typeof item.text === "string") {
          return item.text;
        }
        return null;
      }).filter((comp) => comp !== null);
    }
  },
  { callSign: "ATTACK_TYPE", jsonKey: "attackType" },
  { callSign: "DAMAGE_TYPE", jsonKey: "damageInflict", conv: (d) => Array.isArray(d) ? d[0] : d },
  { callSign: "RITUAL", jsonKey: "ritual" },
  { callSign: "CONCENTRATION", jsonKey: "duration", conv: (ds) => Array.isArray(ds) && ds.some((x) => x.concentration) },
  { callSign: "SAVE", jsonKey: "saveAttr" },
  // ─── Species / Creatures ───
  { callSign: "SPECIES", jsonKey: "name" },
  {
    callSign: "SIZE",
    jsonKey: "size",
    conv: (raw) => {
      if (Array.isArray(raw)) {
        return raw.map((r) => SIZE_MAP4[r] || r);
      } else {
        return SIZE_MAP4[raw] || raw;
      }
    }
  },
  {
    callSign: "SPEED",
    jsonKey: "speed",
    conv: (sp) => {
      if (typeof sp === "number") {
        return [`Walk ${sp} ft.`];
      }
      if (!sp || typeof sp !== "object") return [];
      return Object.entries(sp).filter(([mode]) => mode !== "canHover").map(([mode, v]) => {
        const n = typeof v === "object" && v !== null && "number" in v ? v.number : v;
        const label = mode === "walk" ? "Walk" : cap3(mode);
        return `${label} ${n} ft.`;
      });
    }
  },
  { callSign: "LANGUAGES", jsonKey: ["languages", "languageProficiencies"], conv: (arr) => {
    if (!Array.isArray(arr)) return [];
    const out = [];
    for (const lp of arr) {
      if (typeof lp === "string") out.push(cap3(lp));
      else if (typeof lp === "object") {
        for (const [lang, val] of Object.entries(lp)) {
          if (val) out.push(cap3(lang));
        }
      }
    }
    return [...new Set(out)];
  } },
  { callSign: "SENSES", jsonKey: "senses", conv: (sen) => {
    if (Array.isArray(sen)) return sen.map((s) => s.replace(/^\d+\s*/, "").replace(/^./, (c) => c.toUpperCase()));
    if (sen && typeof sen === "object") return Object.entries(sen).map(([k, v]) => `${k.charAt(0).toUpperCase() + k.slice(1)} ${v}`);
    return [];
  } },
  {
    callSign: "TRAITS",
    jsonKey: ["classFeatures", "entries"],
    conv: (raw, allJson) => {
      const clsRec = Array.isArray(allJson.class) ? allJson.class[0] : allJson;
      const className = typeof clsRec.name === "string" ? clsRec.name : "";
      const omit = /* @__PURE__ */ new Set([
        "Ability Score Improvement",
        "Archetype Feature",
        "Subclass Feature"
        // add more if you like…
      ]);
      const seen = /* @__PURE__ */ new Set();
      if (Array.isArray(allJson.classFeatures)) {
        return allJson.classFeatures.flatMap((feat) => {
          if (feat && typeof feat === "object" && feat.gainSubclassFeature) return [];
          const rawName = typeof feat === "string" ? feat : typeof feat.classFeature === "string" ? feat.classFeature : "";
          const name = rawName.split("|")[0].trim();
          if (!name || omit.has(name) || seen.has(name)) return [];
          seen.add(name);
          const anchor = name.replace(/[^\w\s]/g, "").replace(/\s+/g, " ").trim().replace(/\b\w/g, (c) => c.toUpperCase());
          return `[[${className}#${anchor}|${name}]]`;
        });
      }
      const ents = Array.isArray(raw) ? raw : [];
      const featureNames = ents.filter((e) => e?.data?.isFeature && typeof e.name === "string").map((e) => e.name.replace(/^Feature:\s*/, "").trim());
      if (featureNames.length) return featureNames;
      return ents.filter((e) => e && typeof e.name === "string").map((e) => e.name.replace(/^Feature:\s*/, "").trim());
    }
  },
  { callSign: "AC", jsonKey: "ac", conv: (a) => Array.isArray(a) ? a[0].ac : a },
  { callSign: "HP", jsonKey: "hp", conv: (hp) => hp?.average ?? hp },
  { callSign: "CHALLENGE_RATING", jsonKey: "cr" },
  { callSign: "STRENGTH", jsonKey: "ability", conv: (arr) => Array.isArray(arr) ? arr[0] : arr?.str ?? 0 },
  { callSign: "DEXTERITY", jsonKey: "ability", conv: (arr) => Array.isArray(arr) ? arr[1] : arr?.dex ?? 0 },
  { callSign: "CONSTITUTION", jsonKey: "ability", conv: (arr) => Array.isArray(arr) ? arr[2] : arr?.con ?? 0 },
  { callSign: "INTELLIGENCE", jsonKey: "ability", conv: (arr) => Array.isArray(arr) ? arr[3] : arr?.int ?? 0 },
  { callSign: "WISDOM", jsonKey: "ability", conv: (arr) => Array.isArray(arr) ? arr[4] : arr?.wis ?? 0 },
  { callSign: "CHARISMA", jsonKey: "ability", conv: (arr) => Array.isArray(arr) ? arr[5] : arr?.cha ?? 0 },
  {
    callSign: "ALIGNMENT",
    jsonKey: "alignment",
    conv: (a) => {
      const raw = Array.isArray(a) ? a.join(" ") : typeof a === "string" ? a : String(a);
      const cleaned = raw.replace(/\bA\b/g, "Any").replace(/\bU\b/g, "Unaligned").replace(/\bN\b/g, "Neutral").replace(/\bL\b/g, "Lawful").replace(/\bC\b/g, "Chaotic").replace(/\bG\b/g, "Good").replace(/\bE\b/g, "Evil");
      return formatAlignmentAbbrev2(cleaned);
    }
  },
  {
    callSign: "TYPE",
    jsonKey: "type",
    conv: (t) => {
      if (typeof t === "string") {
        return ITEM_TYPE_MAP2[t] ?? cap3(t);
      }
      if (t && typeof t === "object") {
        const code = String(t.type || "").toUpperCase();
        if (ITEM_TYPE_MAP2[code]) {
          return ITEM_TYPE_MAP2[code];
        }
        const base = t.type ? cap3(t.type) : "Unknown";
        const tags = Array.isArray(t.tags) ? t.tags.map(cap3) : [];
        return tags.length ? `${base} (${tags.join(", ")})` : base;
      }
      return void 0;
    }
  },
  // ─── Items ───
  { callSign: "TYPE", jsonKey: "_parsedType" },
  { callSign: "RARITY", jsonKey: "rarity", conv: (r) => {
    const s = String(r || "").toLowerCase();
    return s && s !== "none" ? s[0].toUpperCase() + s.slice(1) : void 0;
  } },
  {
    callSign: "COST",
    jsonKey: "value",
    conv: (raw) => {
      const s = String(raw).trim().toLowerCase();
      let num;
      if (s.endsWith("cp")) {
        num = parseFloat(s);
        return num >= 100 ? `${Math.round(num / 100 * 100) / 100}gp` : `${num}cp`;
      }
      if (s.endsWith("sp")) {
        num = parseFloat(s);
        return num >= 10 ? `${Math.round(num / 10 * 100) / 100}gp` : `${num}sp`;
      }
      if (s.endsWith("gp")) {
        num = parseFloat(s);
        return `${Math.round(num * 100) / 100}gp`;
      }
      num = parseFloat(s) || 0;
      return num >= 100 ? `${Math.round(num / 100 * 100) / 100}gp` : `${num}cp`;
    }
  },
  { callSign: "WEIGHT", jsonKey: "weight" },
  { callSign: "MAGICAL", jsonKey: "wondrous", conv: (_w, all) => !!all.wondrous || !!all.reqAttune },
  { callSign: "VARIANT", jsonKey: "bonusWeapon", conv: (b) => typeof b === "string" && b.startsWith("+") },
  { callSign: "PROPERTIES", jsonKey: "property", conv: (arr) => Array.isArray(arr) ? arr.map((p) => PROPERTY_MAP2[p] || p) : [] },
  { callSign: "DAMAGE", jsonKey: "dmg1", conv: (d, all) => d ? all.dmg2 ? `${d} / ${all.dmg2}` : `${d}` : void 0 },
  { callSign: "DAMAGE_TYPES", jsonKey: "dmgType", conv: (dt) => dt == null ? [] : Array.isArray(dt) ? dt : [dt] },
  { callSign: "RANGE", jsonKey: "range" },
  { callSign: "RELOAD", jsonKey: "reload" },
  { callSign: "AMMO_TYPE", jsonKey: "ammoType" },
  { callSign: "STEALTH_DISADVANTAGE", jsonKey: "stealth" },
  {
    callSign: "ATTUNEMENT",
    jsonKey: ["wondrous", "reqAttune", "req_attune", "reqAttuneTags"],
    conv: (_raw, allJson) => {
      const j = allJson;
      const hasText = typeof j.reqAttune === "string" && j.reqAttune.trim() !== "";
      const hasTags = Array.isArray(j.reqAttuneTags) && j.reqAttuneTags.length > 0;
      return hasText || hasTags;
    }
  },
  {
    callSign: "ATTUNE_REQ",
    jsonKey: "reqAttuneTags",
    conv: (tags = [], _all) => {
      const mapLetter = {
        A: "Any",
        U: "Unaligned",
        N: "Neutral",
        L: "Lawful",
        C: "Chaotic",
        G: "Good",
        E: "Evil"
      };
      const reqs = [];
      for (const tag of tags) {
        if (tag.class && Array.isArray(tag.alignment)) {
          const cls = cap3(tag.class);
          for (const code of tag.alignment) {
            reqs.push(`${mapLetter[code] || code} ${cls}`);
          }
        } else if (tag.class) {
          reqs.push(cap3(tag.class));
        } else if (Array.isArray(tag.alignment)) {
          for (const code of tag.alignment) {
            reqs.push(mapLetter[code] || code);
          }
        } else if (tag.background) {
          const [bg] = String(tag.background).split("|");
          reqs.push(bg.split(" ").map(cap3).join(" "));
        } else if (tag.spellcasting) {
          reqs.push("Spellcaster");
        }
      }
      return Array.from(new Set(reqs));
    }
  },
  {
    callSign: "VERMUN",
    jsonKey: "wondrous",
    // or whatever property you use to detect “magical”
    conv: (_raw, all) => !!all.wondrous || !!all.reqAttune
  },
  // ─── Other ───
  { callSign: "DAMAGE_RES", jsonKey: "resist", conv: (v) => Array.isArray(v) ? v.map(cap3) : [] },
  {
    callSign: "RULESET",
    jsonKey: "name",
    // ignore the raw value, always print HELLO
    conv: (_raw, _all) => "D&D 5e (2025)"
  },
  // ─── Ability‐score modifiers (only emit when nonzero) ───
  {
    callSign: "STR_MOD",
    jsonKey: "ability",
    conv: (arr) => {
      const v = Array.isArray(arr) ? arr[0].str ?? 0 : arr.str ?? 0;
      return v !== 0 ? v : void 0;
    }
  },
  {
    callSign: "DEX_MOD",
    jsonKey: "ability",
    conv: (arr) => {
      const v = Array.isArray(arr) ? arr[0].dex ?? 0 : arr.dex ?? 0;
      return v !== 0 ? v : void 0;
    }
  },
  {
    callSign: "CON_MOD",
    jsonKey: "ability",
    conv: (arr) => {
      const v = Array.isArray(arr) ? arr[0].con ?? 0 : arr.con ?? 0;
      return v !== 0 ? v : void 0;
    }
  },
  {
    callSign: "INT_MOD",
    jsonKey: "ability",
    conv: (arr) => {
      const v = Array.isArray(arr) ? arr[0].int ?? 0 : arr.int ?? 0;
      return v !== 0 ? v : void 0;
    }
  },
  {
    callSign: "WIS_MOD",
    jsonKey: "ability",
    conv: (arr) => {
      const v = Array.isArray(arr) ? arr[0].wis ?? 0 : arr.wis ?? 0;
      return v !== 0 ? v : void 0;
    }
  },
  {
    callSign: "CHA_MOD",
    jsonKey: "ability",
    conv: (arr) => {
      const v = Array.isArray(arr) ? arr[0].cha ?? 0 : arr.cha ?? 0;
      return v !== 0 ? v : void 0;
    }
  }
];
function buildFM2(json, defs) {
  const fm = {};
  for (const { callSign, jsonKey, conv } of defs) {
    const keys = Array.isArray(jsonKey) ? jsonKey : [jsonKey];
    let raw = void 0;
    for (const key of keys) {
      if (json[key] != null) {
        raw = json[key];
        break;
      }
    }
    if (raw == null) continue;
    const val = conv ? conv(raw, json) : raw;
    fm[FM_FIELDS4[callSign]] = val;
  }
  return fm;
}
function serializeFrontmatter2(fm, defs) {
  const filtered = {};
  const hasSkillChoice = Array.isArray(fm[FM_FIELDS4.SKILL_CHOICE_LIST]) && fm[FM_FIELDS4.SKILL_CHOICE_LIST].length > 0;
  const hasToolChoice = Array.isArray(fm[FM_FIELDS4.TOOL_CHOICE_LIST]) && fm[FM_FIELDS4.TOOL_CHOICE_LIST].length > 0;
  for (const [k, v] of Object.entries(fm)) {
    if (v === void 0) continue;
    if (k === FM_FIELDS4.COMPONENTS && Array.isArray(v) && v.length === 0) continue;
    if ((k === FM_FIELDS4.TOOL_CHOICE_LIST || k === FM_FIELDS4.SKILL_CHOICE_LIST) && Array.isArray(v) && v.length === 0) continue;
    filtered[k] = v;
  }
  let keysToEmit;
  if (defs) {
    const wanted = defs.map((d) => FM_FIELDS4[d.callSign]);
    keysToEmit = wanted.filter((k) => k in filtered);
    keysToEmit.push(
      ...Object.keys(filtered).filter((k) => !keysToEmit.includes(k))
    );
  } else {
    keysToEmit = Object.keys(filtered);
  }
  return keysToEmit.map((k) => {
    const v = filtered[k];
    if (Array.isArray(v)) {
      const inline = v.map((item) => JSON.stringify(item)).join(", ");
      return `${k}: [${inline}]`;
    }
    if (typeof v === "string") {
      return `${k}: "${v}"`;
    }
    return `${k}: ${v}`;
  }).join("\n");
}
var SKILL_OPTIONS2 = [
  "Acrobatics",
  "Animal Handling",
  "Arcana",
  "Athletics",
  "Deception",
  "History",
  "Insight",
  "Intimidation",
  "Investigation",
  "Medicine",
  "Nature",
  "Perception",
  "Performance",
  "Persuasion",
  "Religion",
  "Sleight of Hand",
  "Stealth",
  "Survival"
];
var SPELL_KEYS2 = [
  "NAME",
  "LEVEL",
  "SCHOOL",
  "CASTING_TIME",
  "SPELL_RANGE",
  "DURATION",
  "VERBAL",
  "SOMATIC",
  "MATERIAL",
  "COMPONENTS",
  "CONCENTRATION",
  "SOURCE",
  "RULESET"
];
var SPECIES_KEYS2 = [
  "SPECIES",
  "SIZE",
  "SPEED",
  "LANGUAGES",
  "TRAITS",
  "SKILLS",
  "STR_MOD",
  "DEX_MOD",
  "CON_MOD",
  "INT_MOD",
  "WIS_MOD",
  "CHA_MOD",
  "SKILL_CHOICE_LIST",
  "TOOL_PROFICIENCIES",
  "TOOL_CHOICE_LIST",
  "WEAPON_PROFICIENCIES",
  "SENSES",
  "DAMAGE_RES",
  "SOURCE",
  "RULESET"
];
var ITEM_KEYS2 = [
  "NAME",
  "TYPE",
  "RARITY",
  "COST",
  "WEIGHT",
  "PROPERTIES",
  "DAMAGE",
  "DAMAGE_TYPES",
  "RANGE",
  "RELOAD",
  "AMMO_TYPE",
  "AC",
  "STEALTH_DISADVANTAGE",
  "MAGICAL",
  "ATTUNEMENT",
  "ATTUNE_REQ",
  "VERMUN",
  "SOURCE",
  "RULESET"
];
var BESTIARY_KEYS2 = [
  "NAME",
  "SIZE",
  "TYPE",
  "ALIGNMENT",
  "AC",
  "HP",
  "SPEED",
  "STRENGTH",
  "DEXTERITY",
  "CONSTITUTION",
  "INTELLIGENCE",
  "WISDOM",
  "CHARISMA",
  "SAVING_THROWS",
  "SKILLS",
  "SENSES",
  "LANGUAGES",
  "CHALLENGE_RATING",
  "SOURCE",
  "RULESET"
];
var CLASS_KEYS2 = [
  "NAME",
  "SPELL_CAST_MOD",
  "ARMOR_PROFICIENCIES",
  "WEAPON_PROFICIENCIES",
  "TOOL_PROFICIENCIES",
  "TOOL_CHOICE_LIST",
  "SAVING_THROWS",
  "SKILLS",
  "SKILL_CHOICE_LIST",
  "TRAITS",
  "SOURCE",
  "RULESET"
];
var BACKGROUND_KEYS2 = [
  "NAME",
  "SKILLS",
  "SKILL_CHOICE_LIST",
  "TOOL_PROFICIENCIES",
  "TOOL_CHOICE_LIST",
  "TRAITS",
  "SOURCE",
  "RULESET"
];
var FEATS_KEYS2 = [
  "SOURCE",
  "RULESET"
];
var SPELL_META_DEFS2 = SPELL_KEYS2.map((key) => {
  const def = ALL_FIELD_DEFS2.find((d) => d.callSign === key);
  if (!def) throw new Error(`Missing FieldDef for SPELL_KEY ${key}`);
  return def;
});
var SPECIES_META_DEFS2 = SPECIES_KEYS2.map((key) => {
  const def = ALL_FIELD_DEFS2.find((d) => d.callSign === key);
  if (!def) throw new Error(`Missing FieldDef for SPECIES_KEY ${key}`);
  return def;
});
var ITEM_META_DEFS2 = ITEM_KEYS2.map((key) => {
  const def = ALL_FIELD_DEFS2.find((d) => d.callSign === key);
  if (!def) throw new Error(`Missing FieldDef for ITEM_KEY ${key}`);
  return def;
});
var BESTIARY_META_DEFS2 = BESTIARY_KEYS2.map((key) => {
  const def = ALL_FIELD_DEFS2.find((d) => d.callSign === key);
  if (!def) throw new Error(`Missing FieldDef for BESTIARY_KEY ${key}`);
  return def;
});
var CLASS_META_DEFS2 = CLASS_KEYS2.map((key) => {
  const def = ALL_FIELD_DEFS2.find((d) => d.callSign === key);
  if (!def) throw new Error(`Missing FieldDef for CLASS_KEY ${key}`);
  return def;
});
var BACKGROUND_META_DEFS2 = BACKGROUND_KEYS2.map((key) => {
  const def = ALL_FIELD_DEFS2.find((d) => d.callSign === key);
  if (!def) throw new Error(`Missing FieldDef for BACKGROUND_KEY ${key}`);
  return def;
});
var FEATS_META_DEFS2 = FEATS_KEYS2.map((key) => {
  const def = ALL_FIELD_DEFS2.find((d) => d.callSign === key);
  if (!def) throw new Error(`Missing FieldDef for BACKGROUND_KEY ${key}`);
  return def;
});

// src/parsers/5e-2025/spells.ts
var SCHOOL_MAP2 = {
  A: "Abjuration",
  C: "Conjuration",
  D: "Divination",
  E: "Enchantment",
  V: "Evocation",
  I: "Illusion",
  N: "Necromancy",
  T: "Transmutation"
};
function ordinal2(n) {
  const suffix = n === 1 ? "st" : n === 2 ? "nd" : n === 3 ? "rd" : "th";
  return `${n}${suffix}`;
}
function formatRange2(range) {
  if (!range) return "";
  if (typeof range === "string") return range;
  if (range.type === "special") return "Special";
  if (range.type === "point" && range.distance) {
    const dist = range.distance;
    if (dist.type === "touch") return "Touch";
    if (dist.type === "self") return "Self";
    if (dist.type === "sight") return "Sight";
    if (dist.amount) return `${dist.amount} ${dist.type}`;
  }
  return "Varies";
}
function formatTime2(time) {
  if (!Array.isArray(time)) return "";
  return time.map((t) => `${t.number} ${t.unit}`).join(", ");
}
function formatDuration2(duration) {
  if (!Array.isArray(duration)) return "";
  return duration.map((d) => {
    if (d.type === "instant") return "Instantaneous";
    if (d.type === "timed" && d.duration) {
      return `${d.duration.amount} ${d.duration.type}${d.concentration ? " (concentration)" : ""}`;
    }
    if (d.type === "permanent") return "Permanent";
    return "Special";
  }).join(", ");
}
function formatComponents2(components) {
  if (!components) return "";
  const parts = [];
  if (components.v) parts.push("V");
  if (components.s) parts.push("S");
  if (components.m) {
    let matDetails = [];
    if (Array.isArray(components.m)) {
      matDetails = components.m.map(
        (item) => typeof item === "string" ? item : item && typeof item.text === "string" ? item.text : null
      ).filter((t) => !!t);
    } else if (typeof components.m === "string") {
      matDetails = [components.m];
    } else if (components.m.text) {
      matDetails = [components.m.text];
    }
    const matPart = matDetails.length > 0 ? `M (${matDetails.join(", ")})` : "M";
    parts.push(matPart);
  }
  return parts.join(", ");
}
function parseSpellsFile2(json, editionId) {
  if (!json.spell) return [];
  json._editionId = editionId;
  return json.spell.map((spell) => {
    const sources = spell.source ? Array.isArray(spell.source) ? spell.source : [spell.source] : ["unknown"];
    const name = spell.name;
    const school = SCHOOL_MAP2[spell.school] ?? spell.school;
    const level = spell.level;
    const range = formatRange2(spell.range);
    const castingTime = formatTime2(spell.time);
    const duration = formatDuration2(spell.duration);
    const formattedSources = sources.map((s) => getFullSourceName2(s, editionId));
    const attackType = spell.attackType || "";
    const damageType = spell.damageInflict?.[0] || "Teleportation";
    const ritual = spell.ritual === true;
    const concentration = spell.duration?.some((d) => d.concentration) ?? false;
    const FM = buildFM2(spell, SPELL_META_DEFS2);
    const yaml = serializeFrontmatter2(FM, SPELL_META_DEFS2);
    const safeName = name.replace(/\//g, "-");
    const title = `# ${name}`;
    const levelLabel = level === 0 ? `${school} Cantrip` : `${ordinal2(level)}-level ${school} Spell`;
    const subtitle = `### *${levelLabel}*${concentration ? " *(Concentration)*" : ""}`;
    const headerLines = [
      title,
      subtitle,
      `**Casting Time:** ${castingTime}`,
      `**Range:** ${range}`,
      `**Components:** ${formatComponents2(spell.components)}`,
      `**Duration:** ${duration}`
    ];
    const bodyLines = [
      ...(spell.entries ?? []).map((e) => formatEntry2(e)),
      ...(spell.entriesHigherLevel ?? []).map((e) => formatEntry2(e))
    ];
    const footerLines = [
      `---`,
      `**Source:** ${formattedSources.join(", ")}`
    ];
    return {
      path: `${safeName}.md`,
      content: [
        `---
${yaml}
---`,
        headerLines.join("\n"),
        ``,
        bodyLines.join("\n\n"),
        ``,
        footerLines.join("\n")
      ].join("\n")
    };
  });
}

// src/parsers/5e-2025/species.ts
function slug2(name) {
  return name.replace(/;/g, ":").replace(/[\/:"]/g, ":").trim();
}
var BLOCKED_TRAITS2 = ["Age", "Size", "Languages", "Creature Type", "Speed"];
function parseSpeciesFile2(json, editionId) {
  if (!Array.isArray(json.race)) return [];
  json._editionId = editionId;
  const rawVariants = json.race.filter(
    (r) => !/\((?:Kaladesh|Zendikar|Amonkhet|Innistrad|Ixalan)\)$/.test(r.name)
  );
  const byName = /* @__PURE__ */ new Map();
  for (const r of rawVariants) {
    const list = byName.get(r.name) ?? [];
    list.push(r);
    byName.set(r.name, list);
  }
  const subracesList = Array.isArray(json.subrace) ? json.subrace : [];
  const out = [];
  for (const [raceName, raceVariants] of byName.entries()) {
    const safeName = slug2(raceName);
    const primary = raceVariants.reduce(
      (best, cur) => Object.keys(cur).length > Object.keys(best).length ? cur : best,
      raceVariants[0]
    );
    if (!primary.ability) {
      const humanEntry = subracesList.find(
        (sr) => sr.raceName === raceName && sr.raceSource === primary.source && !("name" in sr) && Array.isArray(sr.ability)
      );
      if (humanEntry) primary.ability = humanEntry.ability;
    }
    const fm = buildFM2(primary, SPECIES_META_DEFS2);
    const senses = [];
    if (primary.darkvision) senses.push(`Darkvision ${primary.darkvision} ft.`);
    if (primary.blindsight) senses.push(`Blindsight ${primary.blindsight} ft.`);
    if (primary.tremorsense) senses.push(`Tremorsense ${primary.tremorsense} ft.`);
    if (primary.truesight) senses.push(`Truesight ${primary.truesight} ft.`);
    if (senses.length) fm.senses = senses;
    if (Array.isArray(fm.traits)) {
      fm.traits = fm.traits.filter((t) => !BLOCKED_TRAITS2.includes(t));
    }
    const yaml = serializeFrontmatter2(fm, SPECIES_META_DEFS2);
    const lines = [];
    lines.push(`# ${raceName}`, `## Stats`);
    const size = Array.isArray(primary.size) ? primary.size.map((s) => SIZE_MAP4[s] || s).join("/") : SIZE_MAP4[primary.size] ?? primary.size;
    lines.push(`**Size:** ${size}`);
    const speed = typeof primary.speed === "number" ? primary.speed : primary.speed?.walk ?? primary.speed?.base ?? 0;
    lines.push(`**Speed:** ${speed} ft. walking`);
    const kids = subracesList.filter(
      (sr) => sr.name && sr.raceName === raceName && sr.raceSource === primary.source
    );
    const rawAbility = Array.isArray(primary.ability) ? primary.ability : Array.isArray(kids[0]?.ability) ? kids[0].ability : [];
    if (Array.isArray(rawAbility) && rawAbility.length) {
      const bonuses = { str: 0, dex: 0, con: 0, int: 0, wis: 0, cha: 0 };
      let chooseOpt = null;
      for (const obj of rawAbility) {
        if ("choose" in obj) chooseOpt = obj.choose;
        else for (const [k, v] of Object.entries(obj)) bonuses[k] += v;
      }
      const pairs = Object.entries(bonuses);
      const parts = pairs.filter(([, v]) => v !== 0).map(([k, v]) => `${k.toUpperCase()} ${v >= 0 ? "+" : ""}${v}`);
      if (chooseOpt?.count && Array.isArray(chooseOpt.from)) {
        parts.push(`CHOOSE ${chooseOpt.count} from ${chooseOpt.from.map((s) => s.toUpperCase()).join(", ")}`);
      }
      if (parts.length) lines.push(`**Ability Scores:** ${parts.join(", ")}`);
    }
    const langs = fm.languages;
    if (langs?.length) lines.push(`**Languages:** ${langs.join(", ")}`);
    if (Array.isArray(primary.skillProficiencies)) {
      const skillLabels = [];
      for (const e of primary.skillProficiencies) {
        if (e.choose?.from) {
          skillLabels.push(`Choose from: ${e.choose.from.map((s) => s.charAt(0).toUpperCase() + s.slice(1)).join(", ")}`);
        } else {
          const val = e.proficiency ?? e.name ?? e;
          if (typeof val === "string") skillLabels.push(val.charAt(0).toUpperCase() + val.slice(1));
        }
      }
      if (skillLabels.length) lines.push(`**Skill Proficiencies:** ${skillLabels.join("; ")}`);
    }
    const tp = fm[FM_FIELDS4.TOOL_PROFICIENCIES];
    const wp = fm[FM_FIELDS4.WEAPON_PROFICIENCIES];
    const ap = fm[FM_FIELDS4.ARMOR_PROFICIENCIES];
    if (tp?.length) lines.push(`**Tool Proficiencies:** ${tp.join(", ")}`);
    if (wp?.length) lines.push(`**Weapon Proficiencies:** ${wp.join(", ")}`);
    if (ap?.length) lines.push(`**Armor Proficiencies:** ${ap.join(", ")}`);
    lines.push(`## Traits`);
    const seen = /* @__PURE__ */ new Set();
    for (const trait of fm.traits || []) {
      lines.push(`##### ${trait}`);
      const ent = primary.entries?.find((e) => e.name === trait);
      if (ent?.entries) {
        ent.entries.forEach((sub, idx) => {
          let blk;
          if (sub.type === "table") blk = renderMarkdownTable2(sub);
          else if (sub.type === "list") blk = sub.items.map((it) => typeof it === "string" ? `- ${replace5eTags2(it)}` : `- ${it.name}`).join("\n");
          else if (typeof sub === "string") blk = replace5eTags2(sub);
          if (blk && !seen.has(blk)) {
            lines.push(blk);
            seen.add(blk);
            if (ent.entries.length > 1 && idx < ent.entries.length - 1) lines.push("");
          }
        });
      }
    }
    const subs = kids;
    if (subs.length) {
      out.push({
        path: `Species/${safeName}/${safeName}.md`,
        content: `---
${yaml}
---

${lines.join("\n")}`
      });
      const subFolder = `Species/${safeName}/Races`;
      for (const sr of subs) {
        const display = sr.name.replace(/;/g, ":");
        const subLines = [`# ${display}`];
        if (Array.isArray(sr.ability)) {
          const bonuses = { str: 0, dex: 0, con: 0, int: 0, wis: 0, cha: 0 };
          let chooseOpt = null;
          for (const obj of sr.ability) {
            if ("choose" in obj) chooseOpt = obj.choose;
            else for (const [k, v] of Object.entries(obj)) bonuses[k] += v;
          }
          const pairs = Object.entries(bonuses);
          const parts = pairs.filter(([, v]) => v !== 0).map(([k, v]) => `${k.toUpperCase()} ${v >= 0 ? "+" : ""}${v}`);
          if (chooseOpt?.count) parts.push(`CHOOSE ${chooseOpt.count} from ${chooseOpt.from.map((s) => s.toUpperCase()).join(", ")}`);
          if (parts.length) subLines.push(`**Ability Scores:** ${parts.join(", ")}`);
        }
        for (const entry of sr.entries || []) {
          subLines.push(formatEntry2(entry));
          subLines.push("");
        }
        const subYaml = serializeFrontmatter2(buildFM2(sr, SPECIES_META_DEFS2), SPECIES_META_DEFS2);
        out.push({
          path: `${subFolder}/${slug2(sr.name)}.md`,
          content: `---
${subYaml}
---

${subLines.join("\n")}`
        });
      }
    } else {
      out.push({
        path: `Species/${safeName}.md`,
        content: `---
${yaml}
---

${lines.join("\n")}`
      });
    }
  }
  return out.sort((a, b) => a.path.localeCompare(b.path));
}

// src/parsers/5e-2025/classes.ts
function isTypedEntry2(x) {
  return x != null && typeof x === "object" && !Array.isArray(x) && typeof x.type === "string";
}
function formatFeatureLink2(name) {
  const ignore = ["Ability Score Improvement", "Archetype Feature", "Subclass Feature"];
  if (ignore.some((sub) => name.toLowerCase().includes(sub.toLowerCase()))) {
    return name;
  }
  const anchor = name.replace(/[^\w\s]/g, "").replace(/-/g, " ").replace(/\s+/g, " ").trim().replace(/\b\w/g, (l) => l.toUpperCase());
  return `[[#${anchor}]]`;
}
var OPT_FEATURE_TYPE_TO_FULL2 = {
  AI: "Artificer Infusion",
  ED: "Elemental Discipline",
  EI: "Eldritch Invocation",
  MM: "Metamagic",
  MV: "Maneuver",
  "MV:B": "Maneuver, Battle Master",
  "MV:C2-UA": "Maneuver, Cavalier V2 (UA)",
  "AS:V1-UA": "Arcane Shot, V1 (UA)",
  "AS:V2-UA": "Arcane Shot, V2 (UA)",
  AS: "Arcane Shot",
  OTH: "Other",
  "FS:F": "Fighting Style; Fighter",
  "FS:B": "Fighting Style; Bard",
  "FS:P": "Fighting Style; Paladin",
  "FS:R": "Fighting Style; Ranger",
  PB: "Pact Boon",
  OR: "Onomancy Resonant",
  RN: "Rune Knight Rune",
  AF: "Alchemical Formula",
  TT: "Traveler's Trick"
};
function parseClassFile2(json, editionId, fileName, optionalFeatures) {
  json._editionId = editionId;
  const cls = Array.isArray(json.class) ? json.class[0] : json;
  const className = typeof cls.name === "string" ? cls.name : fileName ? fileName.replace(/^class-/, "").replace(/\.json$/, "") : "Unknown";
  const subclassFiles = [];
  const PROF_BONUS_BY_LEVEL = [
    "+2",
    "+2",
    "+2",
    "+2",
    "+3",
    "+3",
    "+3",
    "+3",
    "+4",
    "+4",
    "+4",
    "+4",
    "+5",
    "+5",
    "+5",
    "+5",
    "+6",
    "+6",
    "+6",
    "+6"
  ];
  const hdNum = cls.hd?.number ?? 1;
  const hdFaces = cls.hd?.faces ?? 6;
  const hdStr = `${hdNum}d${hdFaces}`;
  const hdMax = hdNum * hdFaces;
  const hdAvg = Math.ceil((hdFaces + 1) / 2);
  const baseFM = buildFM2(cls, CLASS_META_DEFS2);
  const fm = { ...baseFM, hd: hdStr };
  const yaml = serializeFrontmatter2(fm, CLASS_META_DEFS2);
  const lines = [];
  lines.push(`# ${className}`);
  if (cls.source) lines.push(`**Source:** ${cls.source}`);
  lines.push(``);
  lines.push(`---`);
  lines.push(`## Hit Points`);
  lines.push(`**Hit Dice:** ${hdStr} per ${className} level`);
  lines.push(`**Hit Points at 1st Level:** ${hdMax} + your Constitution modifier`);
  lines.push(
    `**Hit Points at Higher Levels:** ${hdStr} (or ${hdAvg}) + your Constitution modifier per level after 1st`
  );
  lines.push(``);
  lines.push(`---`);
  lines.push(`## Proficiencies`);
  const sp = cls.startingProficiencies ?? {};
  if (Array.isArray(sp.armor) && sp.armor.length) {
    lines.push(`- **Armor:** ${sp.armor.join(", ")}`);
  }
  const weaponList = unifiedWeaponProfs2(sp);
  if (weaponList.length) {
    lines.push(`- **Weapons:** ${weaponList.join(", ")}`);
  }
  const toolList = unifiedToolProfs2(sp);
  if (toolList.length) {
    lines.push(`- **Tools:** ${toolList.join(", ")}`);
  }
  const saves = Array.isArray(cls.proficiency) ? cls.proficiency.map(
    (k) => ({
      str: "Strength",
      dex: "Dexterity",
      con: "Constitution",
      int: "Intelligence",
      wis: "Wisdom",
      cha: "Charisma"
    })[k] || k.toUpperCase()
  ) : [];
  if (saves.length) {
    lines.push(`- **Saving Throws:** ${saves.join(", ")}`);
  }
  {
    const rawSkills = Array.isArray(sp.skillProficiencies) ? sp.skillProficiencies : Array.isArray(sp.skills) ? sp.skills : Array.isArray(sp.skillProf) ? sp.skillProf : [];
    const choiceEntry = rawSkills.find(
      (e) => e && (typeof e.choose === "object" || typeof e.any === "number")
    );
    if (choiceEntry) {
      const count = choiceEntry.choose?.count ?? choiceEntry.any ?? 1;
      const options = Array.isArray(choiceEntry.choose?.from) ? choiceEntry.choose.from.map(
        (s) => (
          // title-case each word (or just use s)
          s.split(" ").map((w) => w[0].toUpperCase() + w.slice(1)).join(" ")
        )
      ) : SKILL_OPTIONS2;
      lines.push(`- **Skills (Choose ${count}):** ${options.join(", ")}`);
    } else {
      const flat = unifiedSkills4(sp);
      if (flat.length) {
        lines.push(`- **Skills:** ${flat.join(", ")}`);
      }
    }
  }
  if (Array.isArray(cls.startingEquipment)) {
    lines.push(`
### Equipment`);
    cls.startingEquipment.filter((e) => typeof e === "string").forEach((item) => lines.push(`- ${item}`));
  }
  const progGroups = cls.classTableGroups ?? [];
  const maxLevel = 20;
  if (!progGroups.length) {
    lines.push(`*(No class table provided for this class.)*`);
  } else {
    const featuresByLevel2 = {};
    for (const feat of cls.classFeatures ?? []) {
      const raw = typeof feat === "object" && feat.classFeature ? feat.classFeature : String(feat);
      const [name, , , lvlStr] = raw.split("|");
      const lvl = Number(lvlStr ?? 0);
      if (!featuresByLevel2[lvl]) featuresByLevel2[lvl] = [];
      featuresByLevel2[lvl].push(name);
    }
    const allLabelsSet = /* @__PURE__ */ new Set();
    const rowMaps = {};
    for (const group of progGroups) {
      const labels = Array.isArray(group.colLabels) ? group.colLabels.map((l) => replace5eTags2(l)) : [];
      const rows = Array.isArray(group.rows) ? group.rows : Array.isArray(group.rowsSpellProgression) ? group.rowsSpellProgression : [];
      if (!labels.length || !rows.length) continue;
      for (let lvl = 0; lvl < rows.length; lvl++) {
        const levelNum = lvl + 1;
        if (!rowMaps[levelNum]) rowMaps[levelNum] = {};
        const rowMap = rowMaps[levelNum];
        const cells = rows[lvl];
        for (let i = 0; i < labels.length; i++) {
          const label = labels[i];
          let val = "";
          const cell = cells[i];
          if (Array.isArray(cell)) {
            val = cell.join(", ");
          } else if (cell && typeof cell === "object" && "value" in cell) {
            val = String(cell.value);
          } else {
            val = String(cell ?? "");
          }
          allLabelsSet.add(label);
          rowMap[label] = val;
        }
      }
    }
    const allLabels = Array.from(allLabelsSet).filter(
      (lbl) => !/Cantrips Known|Spells Known|\d+(st|nd|rd|th)/.test(lbl)
    );
    const mergedLabels = ["Level", "Proficiency Bonus", "Class Features", ...allLabels];
    const mergedRows = [];
    for (let lvl = 1; lvl <= maxLevel; lvl++) {
      const featureList = (featuresByLevel2[lvl] ?? []).map(formatFeatureLink2);
      const rowMap = rowMaps[lvl] ?? {};
      mergedRows.push([
        lvl.toString(),
        PROF_BONUS_BY_LEVEL[lvl - 1] || "",
        featureList.join(", ").replace(/\|/g, "&#124;"),
        ...allLabels.map((label) => rowMap[label] ?? "")
      ]);
    }
    lines.push(`
> [!example]- Class Progression Table`);
    lines.push(
      renderMarkdownTable2({
        type: "table",
        caption: "",
        colLabels: mergedLabels,
        rows: mergedRows
      })
    );
  }
  const csGroup = progGroups.find(
    (g) => Array.isArray(g.colLabels) && g.colLabels.some((lbl) => /Cantrips Known|Spells Known/.test(String(lbl)))
  );
  const slotGroup = progGroups.find(
    (g) => Array.isArray(g.colLabels) && g.title === "Spell Slots per Spell Level"
  );
  if (csGroup && slotGroup) {
    const csLabels = csGroup.colLabels.map((l) => replace5eTags2(l));
    const slotLabels = slotGroup.colLabels.map((l) => replace5eTags2(l));
    const csRows = csGroup.rows || [];
    const slotRows = slotGroup.rowsSpellProgression || [];
    const colLabels = ["Level", ...csLabels, ...slotLabels];
    const spellRows = [];
    for (let i = 0; i < Math.max(csRows.length, slotRows.length); i++) {
      const lvl = String(i + 1);
      const csCells = csRows[i] ? csRows[i].map(String) : csLabels.map((_) => "");
      const slotCells = slotRows[i] ? slotRows[i].map(String) : slotLabels.map((_) => "");
      spellRows.push([lvl, ...csCells, ...slotCells]);
    }
    lines.push(`
> [!tip]- Spell Progression Table`);
    lines.push(
      renderMarkdownTable2({
        type: "table",
        caption: "",
        colLabels,
        rows: spellRows
      })
    );
  }
  const subs = Array.isArray(json.subclass) ? json.subclass : [];
  const subclassFeatures = Array.isArray(json.subclassFeature) ? json.subclassFeature : json.lookup?.subclassFeature ?? [];
  for (const sc of subs) {
    const subclassName = sc.name;
    const subLines = [];
    subLines.push(`# ${subclassName}`);
    subLines.push(`**Parent Class:** [[${className}]]`);
    if (sc.source) subLines.push(`**Source:** ${sc.source}`);
    subLines.push(``);
    const intro = subclassFeatures.find(
      (f) => f.name === sc.name && f.level === 3 && f.subclassShortName === sc.shortName && f.subclassSource === sc.source
    );
    if (intro?.entries?.length) {
      const introText = Array.isArray(intro.entries) ? intro.entries.map(
        (e) => typeof e === "string" ? replace5eTags2(e) : formatEntry2(e)
      ).join("\n\n") : formatEntry2(intro.entries);
      subLines.push(introText, ``);
    }
    const code = Object.entries(OPT_FEATURE_TYPE_TO_FULL2).find(
      ([, full]) => full.toLowerCase().includes(subclassName.toLowerCase())
    )?.[0];
    if (code) {
      const matches = optionalFeatures.filter(
        (of) => Array.isArray(of.featureType) && of.featureType.includes(code)
      );
      if (matches.length) {
        subLines.push(`## ${subclassName} Optional Features`);
        for (const feat of matches) {
          for (const entry of feat.entries) {
            const txt = typeof entry === "string" ? replace5eTags2(entry) : formatEntry2(entry);
            subLines.push(`**${feat.name}:** ${txt}`);
          }
          subLines.push(``);
        }
      }
    }
    const prog = sc.subclassTableGroups ?? [];
    if (prog.length) {
      const labels = /* @__PURE__ */ new Set();
      const rowsMap = {};
      for (const g of prog) {
        const cols = (g.colLabels ?? []).map(replace5eTags2);
        const rows = Array.isArray(g.rows) ? g.rows : Array.isArray(g.rowsSpellProgression) ? g.rowsSpellProgression : [];
        rows.forEach((r, i) => {
          const lvl = i + 1;
          rowsMap[lvl] ?? (rowsMap[lvl] = {});
          r.forEach((c, j) => {
            const lab = cols[j];
            if (!lab) return;
            labels.add(lab);
            rowsMap[lvl][lab] = typeof c === "object" && c !== null && "value" in c ? String(c.value) : String(c ?? "");
          });
        });
      }
      const hdrs = Array.from(labels);
      subLines.push(`## Subclass Progression`);
      subLines.push(renderMarkdownTable2({
        type: "table",
        caption: "",
        colLabels: ["Level", ...hdrs],
        rows: Array.from({ length: 20 }, (_, i) => {
          const lvl = i + 1;
          return [String(lvl), ...hdrs.map((h) => rowsMap[lvl]?.[h] ?? "")];
        })
      }));
    }
    const featsByLvl = {};
    for (const f of subclassFeatures) {
      if (f.subclassShortName === sc.shortName && f.subclassSource === sc.source && f.className === className) {
        const lvl = f.level ?? 0;
        ;
        (featsByLvl[lvl] ?? (featsByLvl[lvl] = [])).push(f);
      }
    }
    for (const lvl of Object.keys(featsByLvl).map(Number).sort((a, b) => a - b)) {
      subLines.push(`---`, `## Level ${lvl}`);
      for (const f of featsByLvl[lvl]) {
        subLines.push(`### ${f.name}`);
        for (const ent of Array.isArray(f.entries) ? f.entries : [f.entries]) {
          if (typeof ent === "string") {
            subLines.push(replace5eTags2(ent));
            continue;
          }
          if (isTypedEntry2(ent) && ent.type === "entries" && /^Maneuvers$/i.test(ent.name)) {
            subLines.push(`##### ${ent.name}`);
            for (const txt of Array.isArray(ent.entries) ? ent.entries : [ent.entries]) {
              subLines.push(typeof txt === "string" ? replace5eTags2(txt) : formatEntry2(txt));
            }
            const code2 = Object.entries(OPT_FEATURE_TYPE_TO_FULL2).find(
              ([, full]) => full.toLowerCase().includes(subclassName.toLowerCase())
            )?.[0];
            if (code2) {
              const matches = optionalFeatures.filter(
                (of) => Array.isArray(of.featureType) && of.featureType.includes(code2)
              );
              for (const featDef of matches) {
                for (const sub of featDef.entries) {
                  const line = typeof sub === "string" ? replace5eTags2(sub) : formatEntry2(sub);
                  subLines.push(`**${featDef.name}:** ${line}`);
                }
                subLines.push("");
              }
            }
            continue;
          }
          if (isTypedEntry2(ent) && ent.type === "entries" && ent.name) {
            subLines.push(`##### ${ent.name}`);
            for (const e2 of Array.isArray(ent.entries) ? ent.entries : [ent.entries]) {
              subLines.push(formatEntry2(e2));
            }
            continue;
          }
          if (isTypedEntry2(ent) && ent.type === "inset" && ent.name) {
            const inner = Array.isArray(ent.entries) ? ent.entries : [ent.entries];
            subLines.push(`> **${ent.name}**`);
            inner.forEach((e2) => subLines.push(`> ${formatEntry2(e2)}`));
            continue;
          }
          const fb = formatEntry2(ent);
          if (fb) subLines.push(fb);
        }
      }
    }
    const subclassContent = subLines.join("\n\n").replace(/\n{3,}/g, "\n\n");
    subclassFiles.push({
      path: `Classes/${className}/Subclasses/${subclassName}.md`,
      content: subclassContent
    });
  }
  if (subs.length) {
    const links = subs.map(
      (sc) => `[[Subclasses/${sc.name.replace(/[\\/]/g, "-")}|${sc.name}]]`
    );
    lines.push(`
**Subclasses:** ${links.join(", ")}`);
  }
  const allFeatures = Array.isArray(json.classFeature) ? json.classFeature : json.lookup?.classFeature ?? [];
  const featuresByLevel = {};
  for (const entry of allFeatures) {
    if (entry.className !== className) continue;
    const lvl = entry.level ?? 0;
    if (!featuresByLevel[lvl]) featuresByLevel[lvl] = [];
    featuresByLevel[lvl].push(entry);
  }
  lines.push(``);
  lines.push(`---`);
  lines.push(`## Level Features`);
  const levels = Object.keys(featuresByLevel).map((n) => +n).sort((a, b) => a - b);
  for (const lvl of levels) {
    lines.push(`### Level ${lvl}`);
    for (const feat of featuresByLevel[lvl]) {
      lines.push(`#### ${feat.name}`);
      const entries = Array.isArray(feat.entries) ? feat.entries : [feat.entries];
      for (const ent of entries) {
        if (typeof ent === "string") {
          const txt = formatEntry2(ent).trim();
          if (txt === "{" || txt === "}") continue;
          lines.push(txt);
          continue;
        }
        if (isTypedEntry2(ent) && ent.type === "list" && Array.isArray(ent.items)) {
          for (const item of ent.items) {
            lines.push(`- ${replace5eTags2(item)}`);
          }
          continue;
        }
        if (isTypedEntry2(ent) && ent.type === "options") {
          if (ent.count) {
            lines.push("");
            lines.push(`**Choose ${ent.count} of the following options:**`);
            lines.push("");
          }
          for (const optRef of Array.isArray(ent.entries) ? ent.entries : [ent.entries]) {
            if (optRef.type === "refOptionalfeature") {
              const [optName, optSrc] = optRef.optionalfeature.split("|");
              const featDef = optionalFeatures.find(
                (f) => f.name === optName && (!optSrc || f.source === optSrc)
              );
              if (featDef) {
                featDef.entries.forEach((subEntry, idx) => {
                  const text = typeof subEntry === "string" ? replace5eTags2(subEntry) : formatEntry2(subEntry);
                  if (idx === 0) {
                    lines.push(`- **${featDef.name}:** ${text}`);
                  } else {
                    lines.push(`  - ${text}`);
                  }
                });
                lines.push("");
              } else {
                lines.push(`**${optName}:**`);
              }
            } else {
              const txt = formatEntry2(optRef);
              if (txt) lines.push(`- ${txt}`);
            }
          }
          continue;
        }
        if (isTypedEntry2(ent) && ent.type === "refOptionalfeature") {
          const [name] = ent.optionalfeature.split("|");
          lines.push(`- [[${name}|${name}]]`);
          continue;
        }
        if (isTypedEntry2(ent) && ent.type === "entries" && ent.name) {
          lines.push(`##### ${ent.name}`);
          const inner = Array.isArray(ent.entries) ? ent.entries : [ent.entries];
          for (const e2 of inner) {
            lines.push(formatEntry2(e2));
          }
          continue;
        }
        const fallback = formatEntry2(ent);
        if (fallback) lines.push(fallback);
      }
      lines.push(``);
    }
    lines.push(`---`);
  }
  let content = `---
${yaml}
---

${lines.join("\n")}`;
  content = replace5eTags2(content);
  content = content.replace(/\n{3,}/g, "\n\n").replace(/\n +\n/g, "\n\n");
  return [
    {
      path: `Classes/${className}/${className}.md`,
      content
    },
    ...subclassFiles
  ];
}

// src/parsers/5e-2025/rules.ts
function parseActionsFile2(json, editionId) {
  if (!Array.isArray(json.action)) return [];
  const lines = [];
  function emitBlock(block) {
    if (!block) return;
    if (typeof block === "string") {
      for (const para of block.split(/\n{2,}/)) {
        const t = para.trim();
        if (t) {
          lines.push(replace5eTags2(t));
          lines.push("");
        }
      }
      return;
    }
    if (block.type === "list" && Array.isArray(block.items)) {
      for (const item of block.items) {
        lines.push(`- ${replace5eTags2(item)}`);
      }
      lines.push("");
      return;
    }
    if (block.type === "table" && Array.isArray(block.rows)) {
      const headers = block.colLabels || [];
      lines.push(`| ${headers.join(" | ")} |`);
      lines.push(`| ${headers.map(() => "---").join(" | ")} |`);
      for (const row of block.rows) {
        lines.push(`| ${row.join(" | ")} |`);
      }
      lines.push("");
      return;
    }
    if ((block.type === "entries" || block.type === "inset") && Array.isArray(block.entries)) {
      if (block.name) {
        if (lines[lines.length - 1] === "") lines.pop();
        lines.push(`### ${block.name}`);
      }
      for (const child of block.entries) {
        emitBlock(child);
      }
      return;
    }
    const txt = Array.isArray(block) ? block.join(" ") : typeof block === "object" ? JSON.stringify(block) : String(block);
    lines.push(replace5eTags2(txt));
    lines.push("");
  }
  for (const action of json.action) {
    lines.push(`## ${action.name}`);
    for (const entry of Array.isArray(action.entries) ? action.entries : [action.entries]) {
      emitBlock(entry);
    }
    if (Array.isArray(action.seeAlsoAction)) {
      lines.push("**See Also:**");
      lines.push("");
      for (const ref of action.seeAlsoAction) {
        const [name] = String(ref).split("|");
        lines.push(`- [[${name}]]`);
      }
      lines.push("");
    }
    lines.push("---");
  }
  const cleaned = lines.reduce((acc, curr) => {
    if (curr === "" && acc.length && acc[acc.length - 1] === "") return acc;
    return acc.concat(curr);
  }, []);
  return [
    {
      path: "Rules and Reference/Actions.md",
      content: cleaned.join("\n").trim() + "\n"
    }
  ];
}
function parseConditionsDiseasesFile2(json, editionId) {
  const outputs = [];
  const processItems = (items, outPath) => {
    const lines = [];
    for (const item of items) {
      lines.push(`## ${item.name}`);
      const entries = Array.isArray(item.entries) ? item.entries : [item.entries];
      for (const entry of entries) {
        if (!entry) continue;
        if (typeof entry === "string") {
          for (const para of entry.split(/\n{2,}/)) {
            const t = para.trim();
            if (t) {
              lines.push(replace5eTags2(t));
              lines.push("");
            }
          }
        } else if (entry.type === "list" && Array.isArray(entry.items)) {
          for (const txt of entry.items) {
            lines.push(`- ${replace5eTags2(txt)}`);
          }
          lines.push("");
        } else if (entry.type === "table" && Array.isArray(entry.rows)) {
          const headers = entry.colLabels || [];
          lines.push(`| ${headers.join(" | ")} |`);
          lines.push(`| ${headers.map(() => "---").join(" | ")} |`);
          for (const row of entry.rows) {
            lines.push(`| ${row.join(" | ")} |`);
          }
          lines.push("");
        } else if (entry.type === "entries" && Array.isArray(entry.entries)) {
          if (entry.name) {
            lines.push(`### ${entry.name}`);
            for (const sub of entry.entries) {
              if (sub.type === "entries" && sub.name && Array.isArray(sub.entries)) {
                if (lines[lines.length - 1] === "") lines.pop();
                lines.push(`#### ${sub.name}`);
                for (const txtEntry of sub.entries) {
                  const text = typeof txtEntry === "string" ? replace5eTags2(txtEntry) : replace5eTags2(String(txtEntry));
                  lines.push(text);
                  lines.push("");
                }
              } else if (typeof sub === "string") {
                lines.push(replace5eTags2(sub));
                lines.push("");
              }
            }
          } else {
            for (const sub of entry.entries) {
              if (sub.type === "entries" && sub.name && Array.isArray(sub.entries)) {
                if (lines[lines.length - 1] === "") lines.pop();
                lines.push(`### ${sub.name}`);
                for (const txtEntry of sub.entries) {
                  const text = typeof txtEntry === "string" ? replace5eTags2(txtEntry) : replace5eTags2(String(txtEntry));
                  lines.push(text);
                  lines.push("");
                }
              } else if (typeof sub === "string") {
                lines.push(replace5eTags2(sub));
                lines.push("");
              }
            }
          }
        } else {
          const txt = Array.isArray(entry) ? entry.join(" ") : typeof entry === "object" ? JSON.stringify(entry) : String(entry);
          lines.push(replace5eTags2(txt));
          lines.push("");
        }
      }
      lines.push("---");
    }
    const cleaned = lines.reduce((acc, curr) => {
      if (curr === "" && acc.length && acc[acc.length - 1] === "") return acc;
      return acc.concat(curr);
    }, []);
    outputs.push({
      path: outPath,
      content: cleaned.join("\n").trim() + "\n"
    });
  };
  processItems(json.condition || [], "Rules and Reference/Conditions.md");
  processItems(json.disease || [], "Rules and Reference/Diseases.md");
  return outputs;
}
function parseSensesFile2(json, editionId) {
  const items = Array.isArray(json.sense) ? json.sense : Array.isArray(json.senses) ? json.senses : [];
  if (!items.length) return [];
  const lines = [];
  function emitBlock(block) {
    if (!block) return;
    if (typeof block === "string") {
      for (const para of block.split(/\n{2,}/)) {
        const t = para.trim();
        if (t) {
          lines.push(replace5eTags2(t));
          lines.push("");
        }
      }
      return;
    }
    if (block.type === "list" && Array.isArray(block.items)) {
      for (const item of block.items) {
        if (typeof item === "string") {
          lines.push(`- ${replace5eTags2(item)}`);
          lines.push("");
        } else if (item && typeof item === "object") {
          if (item.name && Array.isArray(item.entries)) {
            lines.push(`- **${item.name}**`);
            for (const ent of item.entries) {
              lines.push(`  - ${replace5eTags2(ent)}`);
            }
            lines.push("");
          } else {
            lines.push(`- ${replace5eTags2(JSON.stringify(item))}`);
            lines.push("");
          }
        }
      }
      return;
    }
    if (block.type === "table" && Array.isArray(block.rows)) {
      const headers = block.colLabels || [];
      lines.push(`| ${headers.join(" | ")} |`);
      lines.push(`| ${headers.map(() => "---").join(" | ")} |`);
      for (const row of block.rows) {
        lines.push(`| ${row.join(" | ")} |`);
      }
      lines.push("");
      return;
    }
    if ((block.type === "entries" || block.type === "inset") && Array.isArray(block.entries)) {
      if (block.name) {
        if (lines[lines.length - 1] === "") lines.pop();
        lines.push(`### ${block.name}`);
      }
      for (const child of block.entries) {
        emitBlock(child);
      }
      return;
    }
    const txt = Array.isArray(block) ? block.join(" ") : typeof block === "object" ? JSON.stringify(block) : String(block);
    lines.push(replace5eTags2(txt));
    lines.push("");
  }
  for (const sense of items) {
    lines.push(`## ${sense.name}`);
    for (const entry of Array.isArray(sense.entries) ? sense.entries : [sense.entries]) {
      emitBlock(entry);
    }
    lines.push("---");
  }
  const cleaned = lines.reduce((acc, curr) => {
    if (curr === "" && acc.length && acc[acc.length - 1] === "") return acc;
    return acc.concat(curr);
  }, []);
  return [
    {
      path: "Rules and Reference/Senses.md",
      content: cleaned.join("\n").trim() + "\n"
    }
  ];
}
function parseSkillsFile2(json, editionId) {
  const items = Array.isArray(json.skill) ? json.skill : Array.isArray(json.skills) ? json.skills : [];
  if (!items.length) return [];
  const lines = [];
  for (const skill of items) {
    lines.push(`## ${skill.name}`);
    if (skill.ability) {
      lines.push(`*Ability: ${skill.ability}*`);
      lines.push("");
    }
    const entries = Array.isArray(skill.entries) ? skill.entries : [skill.entries];
    for (const entry of entries) {
      if (!entry) continue;
      if (typeof entry === "string") {
        const paras = entry.split(/\n{2,}/);
        for (const para of paras) {
          const t = para.trim();
          if (t) {
            lines.push(replace5eTags2(t));
            lines.push("");
          }
        }
      } else if (entry.type === "list" && Array.isArray(entry.items)) {
        for (const item of entry.items) {
          lines.push(`- ${replace5eTags2(item)}`);
        }
        lines.push("");
      } else {
        const txt = Array.isArray(entry) ? entry.join(" ") : String(entry);
        lines.push(replace5eTags2(txt));
        lines.push("");
      }
    }
    lines.push("---");
  }
  const cleaned = lines.reduce((acc, curr) => {
    if (curr === "" && acc.length && acc[acc.length - 1] === "") return acc;
    return acc.concat(curr);
  }, []);
  return [
    {
      path: "Rules and Reference/Skills.md",
      content: cleaned.join("\n").trim() + "\n"
    }
  ];
}

// src/parsers/5e-2025/feats.ts
function parseFeatsFile2(json, editionId) {
  const feats = Array.isArray(json.feat) ? json.feat : Array.isArray(json.feats) ? json.feats : [];
  return feats.map((feat) => {
    const lines = [];
    const fm = buildFM2({ ...feat, _editionId: editionId }, FEATS_META_DEFS2);
    lines.push("---");
    lines.push(serializeFrontmatter2(fm, FEATS_META_DEFS2));
    lines.push("---", "");
    lines.push(`# ${feat.name}`, "");
    const prereqs = [];
    if (Array.isArray(feat.prerequisite)) {
      feat.prerequisite.forEach((pr) => {
        if (pr.level) prereqs.push(`Level ${pr.level}`);
        if (Array.isArray(pr.feat)) {
          pr.feat.forEach((f) => {
            const name = f.split("|")[0].replace(/\b\w/g, (c) => c.toUpperCase());
            prereqs.push(`Prerequisite: [[${name}]]`);
          });
        }
      });
    }
    if (feat.spellcastingPrepared) prereqs.push(`Prerequisite: Spellcaster`);
    if (Array.isArray(feat.toolProficiencies)) {
      feat.toolProficiencies.forEach((tp) => {
        Object.entries(tp).forEach(([key]) => {
          if (key === "anyArtisansTool") {
            prereqs.push(`Prerequisite: Proficient with an artisan's tool`);
          } else {
            prereqs.push(`Prerequisite: Proficient with ${key.replace(/([A-Z])/g, " $1").trim()}`);
          }
        });
      });
    }
    if (Array.isArray(feat.armorProficiencies)) {
      feat.armorProficiencies.forEach((arm) => {
        const armStr = typeof arm === "string" ? arm : JSON.stringify(arm);
        prereqs.push(`Prerequisite: Proficient with ${armStr.replace(/([A-Z])/g, " $1").trim()}`);
      });
    }
    if (feat.race) prereqs.push(`Prerequisite: ${feat.race}`);
    if (prereqs.length) {
      lines.push("**Prerequisites**");
      prereqs.forEach((p) => lines.push(`- ${p}`));
      lines.push("");
    }
    const entries = Array.isArray(feat.entries) ? feat.entries : [feat.entries];
    entries.forEach((entry) => {
      if (!entry) return;
      if (typeof entry === "string") {
        entry.split(/\n{2,}/).forEach((p) => {
          const t = p.trim();
          if (t) {
            lines.push(replace5eTags2(t));
            lines.push("");
          }
        });
      } else if (entry.type === "list" && Array.isArray(entry.items)) {
        entry.items.forEach((it) => {
          if (typeof it === "string") {
            lines.push(`- ${replace5eTags2(it)}`);
          } else if (it.type === "item" && it.name) {
            lines.push(`- **${it.name}**`);
            const subs = Array.isArray(it.entries) ? it.entries : [it.entries];
            subs.forEach(
              (s) => lines.push(`  - ${replace5eTags2(typeof s === "string" ? s : JSON.stringify(s))}`)
            );
          }
        });
        lines.push("");
      } else if (entry.type === "inset") {
        lines.push(`- *${entry.name}*`);
        const subs = Array.isArray(entry.entries) ? entry.entries : [entry.entries];
        subs.forEach((s) => lines.push(`  - ${replace5eTags2(s)}`));
        lines.push("");
      } else if ((entry.type === "section" || entry.type === "entries") && Array.isArray(entry.entries)) {
        if (entry.name) {
          lines.push(`## ${entry.name}`);
          lines.push("");
        }
        entry.entries.forEach((s) => {
          lines.push(replace5eTags2(typeof s === "string" ? s : JSON.stringify(s)));
          lines.push("");
        });
      } else if (entry.type === "table" && Array.isArray(entry.rows)) {
        const hdr = entry.colLabels || [];
        lines.push(`| ${hdr.join(" | ")} |`);
        lines.push(`| ${hdr.map(() => "---").join(" | ")} |`);
        entry.rows.forEach(
          (row) => lines.push(`| ${row.join(" | ")} |`)
        );
        lines.push("");
      }
    });
    return {
      path: `Player Build/Feats/${feat.name}.md`,
      content: lines.join("\n").trim() + "\n"
    };
  });
}

// src/parsers/5e-2025/backgrounds.ts
function parseBackgroundsFile2(json, editionId) {
  const raw = Array.isArray(json.background) ? json.background : Array.isArray(json.backgrounds) ? json.backgrounds : [];
  const backgrounds = raw.filter((bg) => {
    const nm = bg.name || "";
    return !nm.startsWith("Variant") && !nm.includes("Baldur's Gate");
  });
  const outputs = [];
  backgrounds.forEach((bg) => {
    const lines = [];
    const fm = buildFM2(bg, BACKGROUND_META_DEFS2);
    const extraTraits = Array.isArray(bg.entries) ? bg.entries.filter((e) => e.data?.isFeature && typeof e.name === "string").map((e) => {
      const name = e.name.replace(/^Feature:\s*/, "");
      return `[[${bg.name}#${name}]]`;
    }) : [];
    const yaml = serializeFrontmatter2(fm, BACKGROUND_META_DEFS2);
    lines.push("---", yaml, "---", "");
    lines.push(`# ${bg.name}`, "");
    if (Array.isArray(bg.skillProficiencies) && bg.skillProficiencies.length) {
      const skills = [];
      bg.skillProficiencies.forEach((ent) => {
        if (typeof ent === "string") {
          skills.push(cap4(ent));
        } else if (ent.choose && Array.isArray(ent.choose.from)) {
          skills.push(`Choose ${ent.choose.amount} from ${ent.choose.from.join(", ")}`);
        } else {
          Object.entries(ent).filter(([, v]) => v === true).forEach(([k]) => skills.push(cap4(k)));
        }
      });
      lines.push(`**Skill Proficiencies:** ${skills.join(", ")}`, "");
    }
    if (Array.isArray(bg.languageProficiencies) && bg.languageProficiencies.length) {
      const langs = [];
      bg.languageProficiencies.forEach((ent) => {
        if (ent.anyStandard) {
          langs.push(`${ent.anyStandard} of your choice`);
        } else {
          Object.entries(ent).filter(([, v]) => v === true).forEach(([k]) => langs.push(cap4(k)));
        }
      });
      lines.push(`**Languages:** ${langs.join(", ")}`, "");
    }
    if (Array.isArray(bg.toolProficiencies) && bg.toolProficiencies.length) {
      const tools = [];
      bg.toolProficiencies.forEach((ent) => {
        if (ent.choose && Array.isArray(ent.choose.from)) {
          const list = ent.choose.from.map(humanize2).join(", ");
          tools.push(`Choose ${ent.choose.count} from ${list}`);
          return;
        }
        if (typeof ent === "string") {
          tools.push(humanize2(ent));
          return;
        }
        Object.entries(ent).filter(([_, v]) => v === true).forEach(([k]) => tools.push(humanize2(k)));
      });
      lines.push(`**Tool Proficiencies:** ${tools.join(", ")}`, "");
    }
    if (Array.isArray(bg.startingEquipment) && bg.startingEquipment.length) {
      lines.push(`**Equipment:**`);
      bg.startingEquipment.forEach((grp) => {
        if (Array.isArray(grp._)) {
          grp._.forEach((it) => lines.push(`- ${fmtItem2(it)}`));
        }
        ["a", "b"].forEach((key) => {
          if (Array.isArray(grp[key])) {
            grp[key].forEach((it) => lines.push(`- ${fmtItem2(it)}`));
          }
        });
      });
      lines.push("");
    }
    if (Array.isArray(bg.entries)) {
      bg.entries.forEach((entry) => {
        if (entry.type === "list" && entry.style === "list-hang-notitle") {
          return;
        }
        if (entry.name) {
          const header = entry.data?.isFeature ? entry.name.replace(/^Feature:\s*/, "") : entry.name;
          lines.push(`## ${header}`, "");
        }
        if (Array.isArray(entry.entries)) {
          entry.entries.forEach((e) => {
            if (typeof e === "string") {
              lines.push(replace5eTags2(e), "");
            } else if (e.type === "list" && Array.isArray(e.items)) {
              e.items.forEach(
                (it) => lines.push(`- ${replace5eTags2(it.entry ?? it)}`)
              );
              lines.push("");
            } else if (e.type === "table") {
              const tbl = renderMarkdownTable2(e);
              if (tbl) lines.push(tbl, "");
            }
          });
        } else if (entry.type === "list" && Array.isArray(entry.items)) {
          entry.items.forEach(
            (it) => lines.push(`- ${replace5eTags2(it.entry ?? it)}`)
          );
          lines.push("");
        }
      });
    }
    outputs.push({
      path: `Player Build/Backgrounds/${bg.name}.md`,
      content: lines.join("\n").trimEnd() + "\n"
    });
  });
  return outputs;
}
function cap4(str) {
  return str.charAt(0).toUpperCase() + str.slice(1);
}
function fmtItem2(item) {
  if (typeof item === "string") {
    if (item.includes("|")) {
      return replace5eTags2(`{@item ${item}}`);
    }
    return replace5eTags2(item);
  }
  const priceRaw = item.containsValue ?? item.value;
  if (typeof priceRaw === "number" && // make sure it’s not also an “item” or “equipmentType”
  !item.item && !item.equipmentType && !item.special) {
    const gp = priceRaw >= 100 ? priceRaw / 100 : priceRaw;
    return `${gp} gp`;
  }
  if (item.item) {
    const link = replace5eTags2(`{@item ${item.item}}`);
    if (typeof priceRaw === "number") {
      const gp = priceRaw >= 100 ? priceRaw / 100 : priceRaw;
      return `${link} (${gp} gp)`;
    }
    return link;
  }
  if (typeof item.special === "string") {
    return item.special;
  }
  if (item.equipmentType) {
    switch (item.equipmentType) {
      case "toolArtisan":
        return "One type of artisan\u2019s tools (of your choice)";
      case "instrumentMusical":
        return "One type of musical instrument (of your choice)";
      case "setGaming":
        return "One set of gaming dice (of your choice)";
      default:
        return humanize2(item.equipmentType);
    }
  }
  return replace5eTags2(JSON.stringify(item));
}
function humanize2(str) {
  const spaced = str.replace(/([a-z])([A-Z])/g, "$1 $2");
  return spaced.charAt(0).toUpperCase() + spaced.slice(1);
}

// src/parsers/5e-2025/installer.ts
var import_obsidian4 = require("obsidian");
async function listSpellFilesFromGitHub2(repo) {
  const url = `https://api.github.com/repos/${repo}/contents/data/spells`;
  const res = await fetch(url);
  const data = await res.json();
  return data.filter((item) => item.type === "file" && item.name.startsWith("spells-") && item.name.endsWith(".json")).map((item) => item.name);
}
async function listBestiaryFilesFromGitHub2(repo) {
  const url = `https://api.github.com/repos/${repo}/contents/data/bestiary`;
  const res = await fetch(url);
  const list = await res.json();
  const CORE_SOURCES = [
    "bestiary-phb.json",
    "bestiary-mm.json",
    "bestiary-dmg.json",
    "bestiary-xge.json",
    "bestiary-vgm.json",
    "bestiary-tce.json",
    "bestiary-egw.json",
    "bestiary-erlw.json",
    "bestiary-mtf.json",
    "bestiary-vrgr.json",
    "bestiary-cos.json",
    "bestiary-oota.json",
    "bestiary-pota.json",
    "bestiary-hotdq.json",
    "bestiary-rot.json",
    "bestiary-skt.json",
    "bestiary-tftyp.json",
    "bestiary-toa.json"
  ];
  return list.filter((item) => item.type === "file" && CORE_SOURCES.includes(item.name)).map((item) => item.name);
}
var ITEM_JSON_FILES2 = [
  "items-base.json",
  "items.json",
  "objects.json",
  "vehicles.json",
  "decks.json"
];
async function listItemFilesFromGitHub2(repo) {
  const url = `https://api.github.com/repos/${repo}/contents/data`;
  const res = await fetch(url);
  const data = await res.json();
  return data.filter((item) => item.type === "file" && ITEM_JSON_FILES2.includes(item.name)).map((item) => item.name);
}
async function listClassFilesFromGitHub2(repo) {
  const url = `https://api.github.com/repos/${repo}/contents/data/class`;
  const res = await fetch(url);
  const listing = await res.json();
  return listing.filter(
    (item) => item.type === "file" && item.name.startsWith("class-") && item.name.endsWith(".json")
  ).map((item) => item.name);
}
async function ensureFolder2(app, folderPath) {
  const parts = folderPath.split("/");
  let curr = "";
  for (const p of parts) {
    curr = curr ? `${curr}/${p}` : p;
    try {
      await app.vault.createFolder(curr);
    } catch {
    }
  }
}
async function importEditionData2(params) {
  const { app, edition, targetPath } = params;
  const repo = edition.repo ?? "";
  {
    const spellFiles = await listSpellFilesFromGitHub2(repo);
    for (const fileName of spellFiles) {
      try {
        const res = await fetch(`${edition.sourceUrl}/spells/${fileName}`);
        const json = await res.json();
        const files = parseSpellsFile2(json, edition.id);
        for (const md of files) {
          const fullPath = (0, import_obsidian3.normalizePath)(`${targetPath}/Spells/${md.path}`);
          const folder = fullPath.split("/").slice(0, -1).join("/");
          await ensureFolder2(app, folder);
          await app.vault.adapter.write(fullPath, md.content);
        }
      } catch (e) {
        console.warn(`Failed to import spell ${fileName}:`, e);
      }
    }
  }
  {
    const bestiaryFiles = await listBestiaryFilesFromGitHub2(repo);
    for (const fileName of bestiaryFiles) {
      try {
        const res = await fetch(`${edition.sourceUrl}/bestiary/${fileName}`);
        const json = await res.json();
        const parsed = parseBestiaryFile2(json, edition.id);
        for (const md of parsed) {
          const fullPath = (0, import_obsidian3.normalizePath)(`${targetPath}/Bestiary/${md.path}`);
          const folder = fullPath.split("/").slice(0, -1).join("/");
          await ensureFolder2(app, folder);
          await app.vault.adapter.write(fullPath, md.content);
        }
      } catch (e) {
        console.warn(`Failed to import bestiary ${fileName}:`, e);
      }
    }
  }
  {
    const itemFiles = await listItemFilesFromGitHub2(repo);
    for (const fn of itemFiles) {
      try {
        const res = await fetch(`${edition.sourceUrl}/${fn}`);
        const json = await res.json();
        const mdFiles = parseItemsFile2(json, edition.id);
        for (const md of mdFiles) {
          const fullPath = (0, import_obsidian3.normalizePath)(`${targetPath}/${md.path}`);
          const folder = fullPath.split("/").slice(0, -1).join("/");
          await ensureFolder2(app, folder);
          await app.vault.adapter.write(fullPath, md.content);
        }
      } catch (e) {
        console.warn(`Failed to import items from ${fn}:`, e);
      }
    }
  }
  {
    const res = await fetch(`${edition.sourceUrl}/races.json`);
    const json = await res.json();
    const mdFiles = parseSpeciesFile2(json, edition.id);
    for (const md of mdFiles) {
      const fullPath = (0, import_obsidian3.normalizePath)(`${targetPath}/Player Build/${md.path}`);
      await ensureFolder2(app, fullPath.split("/").slice(0, -1).join("/"));
      await app.vault.adapter.write(fullPath, md.content);
    }
    let optionalFeatures = [];
    try {
      const url = `${edition.sourceUrl}/optionalfeatures.json`;
      const res2 = await fetch(url);
      const text = await res2.text();
      const start = text.indexOf("{");
      if (start === -1) throw new Error("No JSON object found");
      const cleanJson = text.slice(start);
      const raw = JSON.parse(cleanJson);
      optionalFeatures = Array.isArray(raw.optionalfeature) ? raw.optionalfeature : [];
    } catch (e) {
      console.warn("Failed to import optionalfeatures.json:", e);
    }
    {
      const classFiles = await listClassFilesFromGitHub2(repo);
      for (const fileName of classFiles) {
        try {
          const res2 = await fetch(`${edition.sourceUrl}/class/${fileName}`);
          const json2 = await res2.json();
          const mdFiles2 = parseClassFile2(
            json2,
            edition.id,
            fileName,
            optionalFeatures
          );
          for (const md of mdFiles2) {
            const fullPath = (0, import_obsidian3.normalizePath)(`${targetPath}/Player Build/${md.path}`);
            await ensureFolder2(app, fullPath.split("/").slice(0, -1).join("/"));
            const existing = app.vault.getAbstractFileByPath(fullPath);
            if (existing instanceof import_obsidian4.TFile) {
              await app.vault.modify(existing, md.content);
            } else {
              await app.vault.create(fullPath, md.content);
            }
          }
        } catch (e) {
          console.warn(`Failed to import class ${fileName}:`, e);
        }
      }
    }
    {
      try {
        const res2 = await fetch(`${edition.sourceUrl}/actions.json`);
        const json2 = await res2.json();
        const mdFiles2 = parseActionsFile2(json2, edition.id);
        for (const md of mdFiles2) {
          const fullPath = (0, import_obsidian3.normalizePath)(
            `${targetPath}/${md.path}`
          );
          const folder = fullPath.split("/").slice(0, -1).join("/");
          await ensureFolder2(app, folder);
          await app.vault.adapter.write(fullPath, md.content);
        }
      } catch (e) {
        console.warn("Failed to import actions.json:", e);
      }
    }
    {
      try {
        const res2 = await fetch(`${edition.sourceUrl}/conditionsdiseases.json`);
        const json2 = await res2.json();
        const mdFiles2 = parseConditionsDiseasesFile2(json2, edition.id);
        for (const md of mdFiles2) {
          const fullPath = (0, import_obsidian3.normalizePath)(
            `${targetPath}/${md.path}`
          );
          const folder = fullPath.split("/").slice(0, -1).join("/");
          await ensureFolder2(app, folder);
          await app.vault.adapter.write(fullPath, md.content);
        }
      } catch (e) {
        console.warn("Failed to import conditionsdiseases.json:", e);
      }
    }
    {
      try {
        const res2 = await fetch(`${edition.sourceUrl}/senses.json`);
        const json2 = await res2.json();
        const mdFiles2 = parseSensesFile2(json2, edition.id);
        for (const md of mdFiles2) {
          const fullPath = (0, import_obsidian3.normalizePath)(
            `${targetPath}/${md.path}`
          );
          const folder = fullPath.split("/").slice(0, -1).join("/");
          await ensureFolder2(app, folder);
          await app.vault.adapter.write(fullPath, md.content);
        }
      } catch (e) {
        console.warn("Failed to import senses.json:", e);
      }
    }
    {
      try {
        const res2 = await fetch(`${edition.sourceUrl}/skills.json`);
        const json2 = await res2.json();
        const mdFiles2 = parseSkillsFile2(json2, edition.id);
        for (const md of mdFiles2) {
          const fullPath = (0, import_obsidian3.normalizePath)(
            `${targetPath}/${md.path}`
          );
          const folder = fullPath.split("/").slice(0, -1).join("/");
          await ensureFolder2(app, folder);
          await app.vault.adapter.write(fullPath, md.content);
        }
      } catch (e) {
        console.warn("Failed to import skills.json:", e);
      }
    }
    {
      try {
        const res2 = await fetch(`${edition.sourceUrl}/feats.json`);
        const json2 = await res2.json();
        const mdFiles2 = parseFeatsFile2(json2, edition.id);
        for (const md of mdFiles2) {
          const fullPath = (0, import_obsidian3.normalizePath)(
            `${targetPath}/${md.path}`
          );
          const folder = fullPath.split("/").slice(0, -1).join("/");
          await ensureFolder2(app, folder);
          await app.vault.adapter.write(fullPath, md.content);
        }
      } catch (e) {
        console.warn("Failed to import feats.json:", e);
      }
    }
    {
      try {
        const res2 = await fetch(`${edition.sourceUrl}/backgrounds.json`);
        const json2 = await res2.json();
        const mdFiles2 = parseBackgroundsFile2(json2, edition.id);
        for (const md of mdFiles2) {
          const fullPath = (0, import_obsidian3.normalizePath)(`${targetPath}/${md.path}`);
          const folder = fullPath.split("/").slice(0, -1).join("/");
          await ensureFolder2(app, folder);
          await app.vault.adapter.write(fullPath, md.content);
        }
      } catch (e) {
        console.warn("Failed to import backgrounds.json:", e);
      }
    }
  }
}

// src/rulesetInstaller.ts
async function importRulesetData(params) {
  const { app, editionKey, targetPath } = params;
  const edition = AVAILABLE_EDITIONS.find((e) => e.id === editionKey);
  if (!edition) {
    console.warn("Edition not found for:", editionKey);
    return;
  }
  if (!edition.parser) {
    console.warn("No parser defined for:", editionKey);
    return;
  }
  let installerModule;
  switch (edition.parser) {
    case "5e-2014":
      installerModule = installer_exports;
      break;
    case "5e-2025":
      installerModule = installer_exports2;
      break;
    // case "other-parser":
    //   installerModule = anotherInstaller;
    //   break;
    default:
      throw new Error(`Unknown parser: ${edition.parser}`);
  }
  await installerModule.importEditionData({ app, edition, targetPath });
}

// src/firstinstallconfirm.ts
var ConfirmFreshInstallModal = class extends import_obsidian5.Modal {
  constructor(app, plugin) {
    super(app);
    this.plugin = plugin;
  }
  onOpen() {
    this.contentEl.empty();
    this.titleEl.setText("\u26A0\uFE0F Warning: Fresh Vault Recommended");
    const warningEl = this.contentEl.createEl("div", {
      text: "The full VVunderlore install is intended for a fresh, empty Obsidian vault. If you install in a vault that already has files, any file whose path matches a VVunderlore Toolkit file will be overwritten.\n\nAlso things could just get messy.\n\nMake a perception check and proceed with caution!"
    });
    warningEl.addClass("installconf-disclaimer");
    const buttonRow = this.contentEl.createEl("div");
    buttonRow.addClass("installconf-buttonrow");
    new import_obsidian5.ButtonComponent(buttonRow).setButtonText("Oh god, cancel!").onClick(() => {
      this.close();
    });
    new import_obsidian5.ButtonComponent(buttonRow).setButtonText("Install!!").setCta().onClick(async () => {
      this.app.workspace.getLeavesOfType("markdown").forEach((leaf) => leaf.detach());
      this.app.workspace.getLeavesOfType("graph").forEach((leaf) => leaf.detach());
      this.close();
      const installing = new InstallingModal(this.app);
      installing.open();
      const compendium = this.plugin.settings.rulesetCompendium;
      const references = [...this.plugin.settings.rulesetReference];
      try {
        await this.plugin.installFullToolkit({ compendium, references });
        if (compendium) {
          await importRulesetData({
            app: this.app,
            editionKey: compendium,
            targetPath: "Compendium"
          });
        }
      } catch (err) {
        console.error("\u274C installFullToolkit() failed:", err);
      }
      this.plugin.settings.isFirstRun = "no";
      await this.plugin.saveSettings();
      installing.close();
      const successModal = new import_obsidian5.Modal(this.app);
      successModal.onOpen = () => {
        successModal.contentEl.empty();
        successModal.titleEl.setText("\u2705 Toolkit Installed");
        const msg = successModal.contentEl.createEl("div", {
          text: "Reloading vault in 3 seconds\u2026"
        });
        msg.addClass("installsuccess");
      };
      successModal.open();
      setTimeout(() => {
        successModal.close();
        location.reload();
      }, 3e3);
    });
  }
  onClose() {
    this.contentEl.empty();
  }
};

// src/customInstallModal.ts
var import_obsidian6 = require("obsidian");
var InstallingModal2 = class extends import_obsidian6.Modal {
  constructor(app) {
    super(app);
  }
  onOpen() {
    this.contentEl.empty();
    const loadingEl = this.contentEl.createDiv({ text: "Installing\u2026", cls: "mod-quiet" });
    loadingEl.addClass("vv-italic", "vv-muted", "vv-centertext", "vv-p-md");
  }
  onClose() {
    this.contentEl.empty();
  }
};
function showCustomInstallModal(app, plugin) {
  const fullPathToKey = {};
  for (const f of plugin.manifestCache.folders) {
    fullPathToKey[f.path] = f.key;
  }
  for (const f of plugin.manifestCache.files) {
    fullPathToKey[f.path] = f.key;
  }
  const root = { name: "", fullPath: "", isFolder: true, children: {} };
  function ensureFolderNode(segments) {
    let cursor = root;
    let builtSoFar = "";
    for (const seg of segments) {
      builtSoFar = builtSoFar ? `${builtSoFar}/${seg}` : seg;
      if (!cursor.children[seg]) {
        cursor.children[seg] = {
          name: seg,
          fullPath: builtSoFar,
          isFolder: true,
          children: {}
        };
      }
      cursor = cursor.children[seg];
    }
    return cursor;
  }
  for (const folderEntry of plugin.manifestCache.folders) {
    const segments = folderEntry.path.split("/");
    ensureFolderNode(segments);
  }
  for (const fileEntry of plugin.manifestCache.files) {
    const segments = fileEntry.path.split("/");
    const fileName = segments.pop();
    const parentNode = segments.length ? ensureFolderNode(segments) : root;
    parentNode.children[fileName] = {
      name: fileName,
      fullPath: fileEntry.path,
      isFolder: false,
      children: {}
    };
  }
  class CustomInstallModal extends import_obsidian6.Modal {
    constructor(app2) {
      super(app2);
      this.checkboxMap = {};
      // <div> that holds “dependency console”
      this.currentBatchLines = [];
    }
    onOpen() {
      this.contentEl.empty();
      this.titleEl.setText("Custom Install");
      const descriptionEl = this.contentEl.createDiv();
      descriptionEl.textContent = "All checked items will be installed. Dependencies will be managed automatically.";
      descriptionEl.addClass("custominstall-headtxt");
      const optionsBox = this.contentEl.createDiv();
      Object.assign(optionsBox.style, {
        maxHeight: "480px",
        // Enough space for checkboxes + tree
        overflowY: "auto",
        // Everything inside optionsBox will scroll
        margin: "0.5em 0",
        border: "1px solid var(--divider-color)",
        borderRadius: "4px",
        padding: "0.5em"
      });
      const checkboxSection = optionsBox.createDiv();
      Object.assign(checkboxSection.style, {
        display: "flex",
        flexDirection: "column",
        gap: "0.5em",
        marginBottom: "0.75em"
      });
      const pluginRow = checkboxSection.createDiv();
      pluginRow.addClass("vv-checkbox-row-b");
      this.pluginCheckbox = pluginRow.createEl("input", { type: "checkbox" });
      this.pluginCheckbox.checked = true;
      this.pluginCheckbox.id = "vvunderlore-checkbox-plugins";
      this.pluginCheckbox.addClass("vv-checkbox-m");
      pluginRow.createEl("label", {
        text: "Community Plugins",
        attr: { for: this.pluginCheckbox.id }
      });
      const demoRow = checkboxSection.createDiv();
      demoRow.addClass("vv-checkbox-row-b");
      this.demoCheckbox = demoRow.createEl("input", { type: "checkbox" });
      this.demoCheckbox.checked = true;
      this.demoCheckbox.id = "vvunderlore-checkbox-demo";
      this.demoCheckbox.addClass("vv-checkbox-m");
      demoRow.createEl("label", {
        text: "VVunderlore Demo Files",
        attr: { for: this.demoCheckbox.id }
      });
      const settingsRow = checkboxSection.createDiv();
      settingsRow.addClass("vv-checkbox-row-b");
      this.settingsCheckbox = settingsRow.createEl("input", { type: "checkbox" });
      this.settingsCheckbox.checked = true;
      this.settingsCheckbox.id = "vvunderlore-checkbox-settings";
      this.settingsCheckbox.addClass("vv-checkbox-m");
      settingsRow.createEl("label", {
        text: "Vault Settings (apperance, hotkeys, graph setup, etc.)",
        attr: { for: this.settingsCheckbox.id }
      });
      const divider = optionsBox.createDiv();
      Object.assign(divider.style, {
        borderTop: "1px solid var(--divider-color)",
        margin: "0.5em 0"
      });
      const container = optionsBox.createDiv();
      Object.assign(container.style, {
        // We no longer give this inner div its own scrollbar.
        // Instead, container will expand inside optionsBox, and
        // optionsBox will scroll everything (checkboxes + tree) together.
        margin: "0",
        padding: "0",
        border: "none"
      });
      const INDENT_PX = 16;
      const lookupEntry = (fullPath) => {
        return plugin.manifestCache.folders.find((f) => f.path === fullPath) || plugin.manifestCache.files.find((f) => f.path === fullPath);
      };
      const renderTree = () => {
        container.empty();
        this.checkboxMap = {};
        this.currentBatchLines = [];
        const demoAllowed = this.demoCheckbox.checked;
        const renderNode = (node, parentEl, indent = 0) => {
          if (node.fullPath) {
            const entry = lookupEntry(node.fullPath);
            if (entry && entry.optional && !demoAllowed) {
              return;
            }
          }
          if (node.isFolder) {
            const details = parentEl.createEl("details");
            details.open = true;
            details.addClass("vv-folderdetaisl");
            const summary = details.createEl("summary");
            Object.assign(summary.style, {
              display: "flex",
              alignItems: "center",
              marginLeft: `${indent * INDENT_PX}px`,
              cursor: "pointer",
              padding: "2px 6px",
              borderRadius: "4px",
              userSelect: "none"
            });
            summary.addEventListener("mouseenter", () => {
              summary.addClass("vv-mouseenter-txt");
            });
            summary.addEventListener("mouseleave", () => {
              summary.addClass("vv-mouseleave-text");
            });
            const cb = summary.createEl("input", { type: "checkbox" });
            cb.addClass("custominstall-folder-icon");
            cb.checked = true;
            this.checkboxMap[node.fullPath] = cb;
            const iconEl = summary.createDiv({ cls: "suggestion-icon" });
            (0, import_obsidian6.setIcon)(iconEl, "folder");
            iconEl.addClass("custominstall-folder-icon");
            const label = summary.createEl("span", { text: node.name });
            label.addClass("custominstall-folder-label");
            cb.onchange = () => {
              this.toggleDescendants(node, cb.checked);
              this.enforceDependencies(node.fullPath, cb.checked);
              this.fadeAllExceptCurrentBatch();
            };
            const childrenContainer = details.createDiv();
            childrenContainer.addClass("vv-childrenindent");
            for (const childName of Object.keys(node.children).sort()) {
              renderNode(node.children[childName], childrenContainer, indent + 1);
            }
          } else {
            const row = parentEl.createDiv();
            Object.assign(row.style, {
              display: "flex",
              alignItems: "center",
              marginLeft: `${indent * INDENT_PX}px`,
              padding: "2px 6px",
              borderRadius: "4px",
              marginTop: "2px",
              marginBottom: "2px",
              userSelect: "none"
            });
            row.addEventListener("mouseenter", () => {
              row.addClass("vv-mouseenter-txt");
            });
            row.addEventListener("mouseleave", () => {
              row.addClass("vv-mouseleave-txt");
            });
            const cb = row.createEl("input", { type: "checkbox" });
            cb.addClass("custominstall-folder-checkbox");
            cb.checked = true;
            this.checkboxMap[node.fullPath] = cb;
            const iconEl = row.createDiv({ cls: "suggestion-icon" });
            (0, import_obsidian6.setIcon)(iconEl, "document");
            iconEl.addClass("custominstall-folder-icon");
            const label = row.createEl("label", { text: node.name });
            label.addClass("custominstall-file-label");
            cb.onchange = () => {
              this.enforceDependencies(node.fullPath, cb.checked);
              this.fadeAllExceptCurrentBatch();
            };
          }
        };
        for (const topName of Object.keys(root.children).sort()) {
          renderNode(root.children[topName], container, 0);
        }
      };
      renderTree();
      this.consoleEl = this.contentEl.createDiv({ cls: "custom-console" });
      Object.assign(this.consoleEl.style, {
        height: "140px",
        margin: "0.5em 0",
        padding: "8px",
        backgroundColor: "var(--background-secondary)",
        border: "1px solid var(--divider-color)",
        borderRadius: "4px",
        fontFamily: "monospace",
        fontSize: "0.82em",
        lineHeight: "1.4em",
        color: "var(--text-normal)",
        overflowY: "auto",
        whiteSpace: "pre-wrap"
      });
      const placeholder = this.consoleEl.createDiv({
        text: "> Dependency errors and warnings will appear here\u2026"
      });
      Object.assign(placeholder.style, {
        opacity: "0.4",
        fontStyle: "italic",
        marginBottom: "4px"
      });
      this.pluginCheckbox.onchange = () => {
        const WARNING_CLASS = "vvunderlore-warning";
        if (!this.pluginCheckbox.checked) {
          if (this.consoleEl.children.length === 1 && this.consoleEl.children[0].textContent?.startsWith(
            "> Dependency console"
          )) {
            this.consoleEl.empty();
          }
          const warningLine = this.consoleEl.createDiv({
            text: "WARNING: The VVunderlore Toolkit will not function without all included plugins! You probably want to re-check that one."
          });
          warningLine.addClass(WARNING_CLASS);
          warningLine.addClass("vv-btn-warning");
          this.consoleEl.scrollTop = this.consoleEl.scrollHeight;
        } else {
          const existingWarnings = this.consoleEl.querySelectorAll(`.${WARNING_CLASS}`);
          existingWarnings.forEach((el) => el.remove());
          if (this.consoleEl.children.length === 0) {
            const ph = this.consoleEl.createDiv({
              text: "> Dependency console output will appear here\u2026"
            });
            Object.assign(ph.style, {
              opacity: "0.4",
              fontStyle: "italic",
              marginBottom: "4px"
            });
          }
          this.consoleEl.scrollTop = this.consoleEl.scrollHeight;
        }
      };
      this.demoCheckbox.onchange = () => {
        renderTree();
      };
      const buttonRow = this.contentEl.createDiv();
      Object.assign(buttonRow.style, {
        display: "flex",
        justifyContent: "space-between",
        // push left vs right
        alignItems: "center",
        paddingTop: "8px",
        borderTop: "1px solid var(--divider-color)",
        marginTop: "8px"
      });
      const resetBtn = buttonRow.createEl("button", { text: "Reset Selection" });
      resetBtn.addClass("custominstall-resetsel");
      resetBtn.onclick = () => {
        const warnings = Array.from(
          this.consoleEl.querySelectorAll(".vvunderlore-warning")
        );
        this.consoleEl.empty();
        warnings.forEach((warningEl) => {
          this.consoleEl.appendChild(warningEl);
        });
        Object.values(this.checkboxMap).forEach((cb) => {
          cb.checked = true;
        });
      };
      const rightGroup = buttonRow.createDiv();
      Object.assign(rightGroup.style, {
        display: "flex",
        gap: "0.5em"
      });
      const installBtn = rightGroup.createEl("button", {
        text: "Install Selected",
        cls: "mod-cta"
      });
      installBtn.onclick = async () => {
        installBtn.setAttribute("disabled", "");
        this.close();
        const installing = new InstallingModal2(app);
        installing.open();
        const toInstall = [];
        for (const [fp, checkbox] of Object.entries(this.checkboxMap)) {
          if (checkbox.checked) {
            const isFolder = plugin.manifestCache.folders.some((f) => f.path === fp);
            toInstall.push({ path: fp, isFolder });
          }
        }
        if (this.pluginCheckbox.checked) {
          try {
            const apiUrl = (
              // Note: This is a GitHub repo path, not the local vault configDir
              "https://api.github.com/repos/slamwise0001/VVunderlore-Toolkit-Full/contents/.obsidian/plugins?ref=main"
            );
            const resp = await fetch(apiUrl);
            if (resp.ok) {
              const pluginFiles = await resp.json();
              for (const item of pluginFiles) {
                const localPath = `${this.app.vault.configDir}/plugins/${item.name}`;
                const existsLocally = await this.app.vault.adapter.exists(localPath);
                if (!existsLocally) {
                  if (item.type === "dir") {
                    toInstall.push({ path: localPath, isFolder: true });
                  } else {
                    toInstall.push({ path: localPath, isFolder: false });
                  }
                }
              }
            }
          } catch (e) {
            console.error("Failed to enumerate .obsidian/plugins from GitHub:", e);
          }
          toInstall.push({ path: `${app.vault.configDir}/community-plugins.json`, isFolder: false });
        }
        if (this.settingsCheckbox.checked) {
          const vaultSettingsPaths = [
            `${app.vault.configDir}/app.json`,
            `${app.vault.configDir}/appearance.json`,
            `${app.vault.configDir}/graph.json`,
            `${app.vault.configDir}/hotkeys.json`
          ];
          for (const vs of vaultSettingsPaths) {
            toInstall.push({ path: vs, isFolder: false });
          }
        }
        try {
          await plugin.performCustomInstall(toInstall);
        } catch (err) {
          console.error("\u274C performCustomInstall() threw:", err);
          new import_obsidian6.Notice("\u274C Custom install failed\u2014see console");
        } finally {
          installing.close();
        }
      };
      const cancelBtn = rightGroup.createEl("button", { text: "Cancel" });
      cancelBtn.onclick = () => this.close();
    }
    onClose() {
      this.contentEl.empty();
    }
    /** Recursively toggle descendants’ checked‐state without logging each one. */
    toggleDescendants(node, checked) {
      for (const child of Object.values(node.children)) {
        const cb = this.checkboxMap[child.fullPath];
        if (cb) cb.checked = checked;
        if (child.isFolder) {
          this.toggleDescendants(child, checked);
        }
      }
    }
    /**
     * Enforce dependency logic (auto‐check prerequisites, auto‐uncheck dependents).
     * Each time we flip a box “because of a dependency,” we log one line to the console.
     */
    enforceDependencies(changedPath, isChecked) {
      const changedKey = fullPathToKey[changedPath];
      if (!changedKey) return;
      const fullPathToDisplay = {};
      for (const f of plugin.manifestCache.folders) {
        fullPathToDisplay[f.path] = f.displayName ?? f.path.split("/").pop();
      }
      for (const f of plugin.manifestCache.files) {
        fullPathToDisplay[f.path] = f.displayName ?? f.path.split("/").pop();
      }
      const changedName = fullPathToDisplay[changedPath] ?? changedPath.split("/").pop();
      this.currentBatchLines = [];
      if (isChecked) {
        const stack = [changedKey];
        while (stack.length) {
          const cur = stack.pop();
          const deps = plugin.requiresGraph.get(cur) ?? [];
          for (const depKey of deps) {
            const depEntry = plugin.manifestCache.files.find((x) => x.key === depKey) || plugin.manifestCache.folders.find((x) => x.key === depKey);
            if (depEntry) {
              const depPath = depEntry.path;
              const cb = this.checkboxMap[depPath];
              if (cb && !cb.checked) {
                cb.checked = true;
                const depName = fullPathToDisplay[depPath] ?? depPath.split("/").pop();
                const lineEl = this.appendLogLine(
                  depPath,
                  `> ${depName} automatically checked (required by ${changedName})`
                );
                this.currentBatchLines.push(lineEl);
                stack.push(depKey);
              }
            }
          }
        }
      } else {
        const dependentsOf = (targetKey) => Array.from(plugin.requiresGraph.entries()).filter(([, deps]) => deps.includes(targetKey)).map(([k]) => k);
        const stack = [changedKey];
        while (stack.length) {
          const cur = stack.pop();
          for (const childKey of dependentsOf(cur)) {
            const childEntry = plugin.manifestCache.files.find((x) => x.key === childKey) || plugin.manifestCache.folders.find((x) => x.key === childKey);
            if (childEntry) {
              const childPath = childEntry.path;
              const cb = this.checkboxMap[childPath];
              if (cb && cb.checked) {
                cb.checked = false;
                const childName = fullPathToDisplay[childPath] ?? childPath.split("/").pop();
                const lineEl = this.appendLogLine(
                  childPath,
                  `> ${childName} automatically unchecked (depends on ${changedName})`
                );
                this.currentBatchLines.push(lineEl);
                stack.push(childKey);
              }
            }
          }
        }
      }
      this.fadeAllExceptCurrentBatch();
    }
    /**
     * Append one “mono” line plus a tiny undo button. Returns the new <div>.
     */
    appendLogLine(fullPath, text) {
      const line = this.consoleEl.createDiv();
      Object.assign(line.style, {
        display: "flex",
        justifyContent: "space-between",
        alignItems: "center",
        margin: "2px 0",
        opacity: "1.0",
        transition: "opacity 0.2s ease"
      });
      line.createSpan({ text });
      const undoBtn = line.createEl("button", { text: "undo", cls: "mod-small" });
      Object.assign(undoBtn.style, {
        marginLeft: "0.5em",
        fontSize: "0.75em",
        padding: "2px 4px",
        cursor: "pointer"
      });
      undoBtn.onclick = () => {
        const cb = this.checkboxMap[fullPath];
        if (cb) {
          cb.checked = !cb.checked;
          this.enforceDependencies(fullPath, cb.checked);
          this.fadeAllExceptCurrentBatch();
        }
      };
      this.consoleEl.scrollTop = this.consoleEl.scrollHeight;
      return line;
    }
    /** Fade out every console line that is *not* part of currentBatchLines. */
    fadeAllExceptCurrentBatch() {
      const total = this.consoleEl.children.length;
      for (let i = 0; i < total; i++) {
        const child = this.consoleEl.children[i];
        if (this.currentBatchLines.includes(child)) {
          child.addClass("custominstall-consolefade-a");
        } else {
          child.addClass("custominstall-consolefade-b");
        }
      }
    }
  }
  new CustomInstallModal(app).open();
}

// src/settings.ts
var path = __toESM(require("path"));
var FilePathSuggester = class extends import_obsidian7.AbstractInputSuggest {
  constructor(app, inputEl) {
    super(app, inputEl);
    this.paths = [];
    this.currentSuggestions = [];
    this.renderedSuggestions = /* @__PURE__ */ new Map();
    this.inputEl = inputEl;
    const folders = Object.values(app.vault.getAllLoadedFiles()).filter((f) => f instanceof import_obsidian7.TFolder).map((f) => ({ path: f.path, isFolder: true }));
    const files = app.vault.getMarkdownFiles().map((f) => ({ path: f.path, isFolder: false }));
    this.paths = [...folders, ...files];
    this.inputEl.addEventListener("keydown", (e) => {
      if (e.key === "Enter") {
        setTimeout(() => {
          const container = this.containerEl;
          if (!container) return;
          const selectedEl = container.querySelector(".suggestion-item.is-selected");
          if (selectedEl) {
            const selectedPath = this.renderedSuggestions.get(selectedEl);
            if (selectedPath) {
              this.selectSuggestion(selectedPath);
            }
          }
        }, 0);
      }
    });
  }
  getSuggestions(inputStr) {
    const query = inputStr.toLowerCase();
    this.currentSuggestions = this.paths.filter(({ path: path2 }) => path2.toLowerCase().includes(query)).map((p) => p.path);
    return this.currentSuggestions;
  }
  renderSuggestion(path2, el) {
    const isFolder = this.paths.find((p) => p.path === path2)?.isFolder;
    el.addClass("mod-complex");
    const iconEl = el.createDiv({ cls: "suggestion-icon" });
    (0, import_obsidian7.setIcon)(iconEl, isFolder ? "folder" : "document");
    const name = path2.split("/").pop();
    const displayName = isFolder ? name : name.replace(/\.md$/, "");
    el.createDiv({ text: displayName, cls: "suggestion-title" });
    const parentPath = path2.split("/").slice(0, -1).join("/");
    el.createDiv({ text: parentPath, cls: "search-suggest-info-text" });
    el.addEventListener("click", (e) => {
      e.stopPropagation();
      this.selectSuggestion(path2);
    });
    this.renderedSuggestions.set(el, path2);
  }
  selectSuggestion(path2) {
    this.inputEl.value = path2;
    this.inputEl.dispatchEvent(new Event("input"));
    this.close();
  }
};
var MarkdownPreviewModal = class extends import_obsidian7.Modal {
  constructor(app, content) {
    super(app);
    this.content = content;
  }
  onOpen() {
    this.contentEl.addEventListener("click", (e) => e.stopPropagation());
    this.contentEl.empty();
    this.contentEl.createEl("h2", { text: "Toolkit Changelog" });
    const md = this.contentEl.createDiv();
    const dummyComponent = new class extends import_obsidian7.Component {
    }();
    import_obsidian7.MarkdownRenderer.renderMarkdown(this.content, md, "/", dummyComponent);
  }
  onClose() {
    this.contentEl.empty();
  }
};
var ToolkitSettingsTab = class extends import_obsidian7.PluginSettingTab {
  constructor(app, plugin) {
    super(app, plugin);
    this.versionValueEl = null;
    this.forceWarningEl = null;
    this.plugin = plugin;
  }
  renderHeader(root) {
    const header = root.createDiv();
    header.addClass("settings-header");
    header.createEl("h3", { text: "VVunderlore Toolkit Settings" });
    const headerBtns = header.createDiv();
    headerBtns.addClass("settings-header-btn");
    const docsBtn = headerBtns.createEl("button", { text: "Docs" });
    docsBtn.onclick = () => window.open("http://vvunderlore.com", "_blank");
    const githubBtn = headerBtns.createEl("button", { text: "GitHub" });
    githubBtn.onclick = () => window.open("https://github.com/slamwise0001/VVunderlore-Toolkit-Full", "_blank");
    const kofiBtn = headerBtns.createEl("button", {
      text: "\u2615 Ko-fi",
      cls: "mod-cta"
    });
    kofiBtn.addClass("settings-kofi");
    kofiBtn.onclick = () => window.open("https://ko-fi.com/vvunderlore", "_blank");
  }
  renderFirstRunCard(root) {
    const card = root.createEl("div", { cls: "vvunderlore-first-run" });
    Object.assign(card.style, {
      display: "flex",
      flexDirection: "column",
      alignItems: "center",
      textAlign: "center",
      marginTop: "2em",
      padding: "1em",
      border: "2px solid var(--divider-color)",
      borderRadius: "18px",
      /* (optional) round the corners slightly */
      backgroundColor: "var(--background-primary)"
      /* (optional) white/gray background */
    });
    const title = card.createEl("h2", {
      text: "\u{1F3F0} Welcome to VVunderlore",
      cls: "vv-card-title"
    });
    title.addClass("vv-mb-sm");
    const desc = card.createEl("p", {
      text: "Get started by installing the default toolkit\u2014\nor choose individual pieces to suit your vault.",
      cls: "vv-card-desc"
    });
    desc.addClass("vv-mb-lg");
    const plugin = this.plugin;
    const grid = card.createDiv();
    Object.assign(grid.style, {
      display: "grid",
      gridTemplateColumns: "max-content max-content",
      columnGap: "1rem",
      rowGap: "0.25rem",
      justifyContent: "center",
      justifyItems: "center",
      marginBottom: "1rem"
    });
    const labelRs = grid.createEl("div", { text: "Ruleset" });
    labelRs.addClass("install-rulesheader");
    const labelRef = grid.createEl("div", { text: "Reference (optional)" });
    labelRef.addClass("install-rulesheader");
    const rsCell = grid.createDiv({ attr: { style: "text-align:center" } });
    const refCell = grid.createDiv({ attr: { style: "text-align:center" } });
    const summaryBar = grid.createDiv();
    Object.assign(summaryBar.style, {
      gridColumn: "1 / span 2",
      display: "flex",
      alignItems: "center",
      flexWrap: "wrap",
      gap: "0.5rem",
      fontSize: "0.85em",
      color: "var(--text-muted)",
      fontStyle: "italic",
      marginTop: "0.25rem",
      marginBottom: "1rem"
    });
    const rulesetSpan = summaryBar.createSpan({
      text: `Ruleset: ${plugin.settings.rulesetCompendium ? `D&D 5E (${plugin.settings.rulesetCompendium})` : ""}`
    });
    rulesetSpan.addClass("install-rulesheader");
    summaryBar.createSpan({ text: "References:" });
    const chipsWrapper = summaryBar.createDiv();
    Object.assign(chipsWrapper.style, { display: "flex", gap: "4px" });
    function addChip(id) {
      const ed = AVAILABLE_EDITIONS.find((e) => e.id === id);
      const chip = chipsWrapper.createDiv({
        attr: {
          style: "background: var(--interactive-accent); color: white; padding:2px 6px; border-radius:4px; display:inline-flex; align-items:center; gap:4px;"
        }
      });
      chip.createSpan({ text: ed.label });
      const rem = chip.createSpan({
        text: "\xD7",
        attr: { style: "cursor:pointer; margin-left:4px;" }
      });
      rem.onclick = async () => {
        plugin.settings.rulesetReference = plugin.settings.rulesetReference.filter((x) => x !== id);
        await plugin.saveSettings();
        chip.remove();
        updateInstallButtons();
      };
    }
    ;
    plugin.settings.rulesetReference.forEach((e) => addChip(e));
    const rsDropdown = new import_obsidian7.DropdownComponent(rsCell);
    rsDropdown.addOption("", "Select edition\u2026");
    AVAILABLE_EDITIONS.forEach((ed) => {
      rsDropdown.addOption(ed.id, ed.label);
    });
    rsDropdown.setValue(this.plugin.settings.rulesetCompendium).onChange(async (val) => {
      this.plugin.settings.rulesetCompendium = val;
      await this.plugin.saveSettings();
      const chosen = AVAILABLE_EDITIONS.find((e) => e.id === val);
      rulesetSpan.textContent = chosen ? chosen.label : "";
      chipsWrapper.empty();
      updateInstallButtons();
    });
    const searchWrapperEl = refCell.createDiv({ attr: { style: "text-align:center;" } });
    const searchComp = new import_obsidian7.SearchComponent(searchWrapperEl);
    searchComp.setPlaceholder("Add reference rules\u2026");
    const suggestionInputEl = searchComp.inputEl;
    new class extends import_obsidian7.AbstractInputSuggest {
      constructor(app, inputEl) {
        super(app, inputEl);
      }
      // 1) Propose edition IDs (minus the one they picked as the main ruleset)
      getSuggestions(input) {
        return AVAILABLE_EDITIONS.filter((ed) => ed.id !== plugin.settings.rulesetCompendium).filter((ed) => ed.label.toLowerCase().includes(input.toLowerCase())).map((ed) => ed.id);
      }
      // 2) Render the human-readable label
      renderSuggestion(item, el) {
        const ed = AVAILABLE_EDITIONS.find((e) => e.id === item);
        el.createDiv({ text: ed.label });
      }
      // 3) When they pick one, store its ID and add a chip
      selectSuggestion(item) {
        if (!plugin.settings.rulesetReference.includes(item)) {
          plugin.settings.rulesetReference.push(item);
          plugin.saveSettings();
          addChip(item);
        }
        this.close();
        suggestionInputEl.value = "";
        updateInstallButtons();
      }
    }(this.app, suggestionInputEl);
    const btnRow1 = card.createEl("div", { cls: "vv-button-row" });
    Object.assign(btnRow1.style, {
      display: "flex",
      gap: "0.75em",
      justifyContent: "center",
      marginBottom: "1.5em"
    });
    const installBtn1 = btnRow1.createEl("button", {
      text: "Install Toolkit",
      cls: "mod-cta"
    });
    installBtn1.onClickEvent(
      () => new ConfirmFreshInstallModal(this.app, this.plugin).open()
    );
    const customBtn1 = btnRow1.createEl("button", {
      text: "Custom Install",
      cls: "mod-cta"
    });
    Object.assign(customBtn1.style, {
      background: "none",
      border: "1px solid var(--interactive-accent)",
      color: "var(--text-normal)"
    });
    customBtn1.onClickEvent(() => showCustomInstallModal(this.app, this.plugin));
    const updateInstallButtons = () => {
      const hasRuleset = Boolean(this.plugin.settings.rulesetCompendium);
      installBtn1.toggleAttribute("disabled", !hasRuleset);
      customBtn1.toggleAttribute("disabled", !hasRuleset);
    };
    updateInstallButtons();
    const skipPara = card.createEl("p", { cls: "vv-skip-link" });
    Object.assign(skipPara.style, {
      textAlign: "center",
      marginTop: "0.25em"
    });
    skipPara.createEl("a", {
      text: "Already have the Toolkit? Show me the settings \u2192"
    }).onClickEvent(async () => {
      const markerPath = ".vvunderlore_installed";
      try {
        if (!await this.app.vault.adapter.exists(markerPath)) {
          await this.app.vault.create(markerPath, "");
        }
      } catch (e) {
        console.error("\u274C Failed to create marker file:", e);
      }
      this.display();
    });
  }
  async display() {
    const { containerEl } = this;
    const savedScrollTop = containerEl.scrollTop;
    containerEl.empty();
    const markerPath = ".vvunderlore_installed";
    const isInstalled = await this.app.vault.adapter.exists(markerPath);
    if (!isInstalled) {
      this.renderFirstRunCard(containerEl);
      containerEl.scrollTop = savedScrollTop;
      return;
    }
    this.renderHeader(containerEl);
    ;
    (async () => {
      const versionRow = containerEl.createDiv();
      versionRow.addClass("settings-versionrow");
      const versionInfo = versionRow.createDiv();
      versionInfo.addClass("settings-versioninfo");
      let installed = "Not installed";
      try {
        const verContent = await this.app.vault.adapter.read(".version.json");
        const json = JSON.parse(verContent);
        installed = json.version ?? "Not installed";
      } catch (err) {
        console.warn("Could not read .version.json from vault:", err);
      }
      const latest = this.plugin.settings.latestToolkitVersion ?? "Could not fetch";
      const isMatch = installed === latest;
      const vaultRow = versionInfo.createDiv();
      vaultRow.appendText("Vault Toolkit Version: ");
      this.versionValueEl = vaultRow.createSpan();
      this.versionValueEl.textContent = installed;
      this.versionValueEl.addClass("vv-bold", isMatch ? "vv-success" : "vv-error");
      const latestRow = versionInfo.createEl("div", { text: "Latest Official Version: " });
      latestRow.createSpan({
        text: latest,
        attr: { style: "font-weight: bold; color: var(--text-success);" }
      });
      const versionControls = versionRow.createDiv();
      versionControls.addClass("settings-versioncontrols");
      const buttonRow = versionControls.createDiv();
      buttonRow.addClass("settings-buttonrow");
      const checkBtn = buttonRow.createEl("button", {
        text: installed !== latest ? "Preview Update" : "Check for Updates",
        cls: "mod-cta"
      });
      checkBtn.addEventListener("click", async () => {
        if (installed !== latest) {
          this.plugin.previewUpdatesModal();
        } else {
          await this.plugin.checkForUpdates();
        }
      });
      const changelogBtn = buttonRow.createEl("button", { text: "\u{1F4D6} View Changelog" });
      changelogBtn.addEventListener("click", () => {
        new MarkdownPreviewModal(this.app, this.plugin.changelog).open();
      });
      if (this.plugin.settings.lastChecked) {
        const lastChecked = versionControls.createDiv();
        lastChecked.addClass("settings-lastchecked");
        lastChecked.textContent = `Last checked: ${new Date(this.plugin.settings.lastChecked).toLocaleString()}`;
      }
      const fixDetails = containerEl.createEl("details", { cls: "vk-section" });
      const fixHeader = fixDetails.createEl("summary", { cls: "vk-section-header" });
      Object.assign(fixHeader.style, {
        display: "flex",
        flexDirection: "column",
        alignItems: "stretch",
        padding: "0.5em 0",
        borderBottom: "1px solid var(--divider-color)",
        cursor: "pointer"
      });
      const fixHeaderRow = fixHeader.createDiv({
        attr: {
          style: `
			display: flex;
			justify-content: space-between;
			align-items: flex-end;
			`
        }
      });
      const fixTitleBlock = fixHeaderRow.createDiv({
        attr: { style: "display: flex; flex-direction: column;" }
      });
      fixTitleBlock.createEl("h5", { text: "Fix Your Vault" });
      fixTitleBlock.createEl("div", {
        text: "Fix and broken, deleted, or misplaced files in your toolkit.",
        cls: "setting-item-description",
        attr: { style: "margin-top: 0.25em;" }
      });
      const fixToggleIcon = fixHeaderRow.createEl("span", { text: "VV", cls: "vk-toggle-icon" });
      Object.assign(fixToggleIcon.style, {
        fontWeight: "bold",
        display: "inline-block",
        transition: "transform 0.2s ease",
        transformOrigin: "50% 50%",
        // Rotate around its own center
        userSelect: "none",
        transform: fixDetails.open ? "rotate(0deg)" : "rotate(180deg)"
      });
      fixDetails.ontoggle = () => {
        fixToggleIcon.addClass("vv-rotated");
      };
      const fixBody = fixDetails.createDiv({ cls: "vk-section-body" });
      fixBody.addClass("vv-pl-md");
      const fixButtonRow = fixBody.createDiv();
      fixButtonRow.addClass("vv-checkbox-row", "vv-justify-between");
      const warningContainer = fixButtonRow.createDiv();
      this.forceWarningEl = warningContainer;
      let installedVersionStr = "";
      try {
        const versionFile = await this.plugin.app.vault.adapter.read(".version.json");
        const parsed = JSON.parse(versionFile);
        installedVersionStr = (parsed.version ?? "").trim();
      } catch {
        installedVersionStr = "";
      }
      const latestVersionStr = (this.plugin.settings.latestToolkitVersion ?? "").trim();
      if (installedVersionStr && latestVersionStr && installedVersionStr !== latestVersionStr) {
        const warn = warningContainer.createEl("div", {
          text: `\u26A0\uFE0F New version available (${installedVersionStr} \u2192 ${latestVersionStr}) \u2014 use regular update instead`
        });
        warn.addClass("vv-small", "vv-muted", "vv-italic");
        warn.setAttr(
          "title",
          "Force updating while a new version is available may skip important changes."
        );
      }
      const buttonGroup = fixButtonRow.createDiv();
      buttonGroup.addClass("settings-buttonrow");
      buttonGroup.createEl("button", { text: "Force Update Vault", cls: "mod-cta" }).onclick = async () => {
        await this.plugin.forceUpdatePreviewAndConfirm();
        if (this.plugin.settings.reparseGamesets) {
          await this.plugin.refreshGameSetData();
        }
      };
      buttonGroup.createEl("button", {
        text: "Undo Update"
      }).onclick = async () => {
        await this.plugin.undoForceUpdate();
      };
      const fixTimestampRow = fixBody.createDiv();
      Object.assign(fixTimestampRow.style, {
        textAlign: "right",
        fontSize: "11px",
        color: "var(--text-muted)",
        marginTop: "0.25em"
      });
      fixTimestampRow.textContent = `Last forced: ${this.plugin.settings.lastForceUpdate ? new Date(this.plugin.settings.lastForceUpdate).toLocaleString() : "Not forced yet"}`;
      fixBody.createEl("div", {
        attr: {
          style: "border-top: 1px solid var(--divider-color); margin: 0.75em 0;"
        }
      });
      const reparseRow = fixBody.createDiv();
      reparseRow.addClass("vv-mt-sm");
      new import_obsidian7.Setting(reparseRow).setName("Re-parse Game Sets On Force Update").setDesc(
        "Also re-parse your ruleset compendium and reference sets. This won't delete any files in the Compendium or Reference folders."
      ).addToggle(
        (tog) => tog.setValue(this.plugin.settings.reparseGamesets).onChange(async (value) => {
          this.plugin.settings.reparseGamesets = value;
          await this.plugin.saveSettings();
        })
      );
      const backupDetails = containerEl.createEl("details", { cls: "vk-section" });
      const backupSummary = backupDetails.createEl("summary", { cls: "vk-section-header" });
      Object.assign(backupSummary.style, {
        display: "flex",
        flexDirection: "column",
        alignItems: "stretch",
        padding: "0.5em 0",
        borderBottom: "1px solid var(--divider-color)",
        cursor: "pointer"
      });
      const backupTitleRow = backupSummary.createDiv({
        attr: {
          style: `
			display: flex;
			justify-content: space-between;
			align-items: flex-end;
			`
        }
      });
      const titleBlock = backupTitleRow.createDiv({
        attr: { style: "display: flex; flex-direction: column;" }
      });
      titleBlock.createEl("h5", { text: "Vault Backups" });
      titleBlock.createEl("div", {
        text: "The Toolkit will back up your vault automatically before updates. You can also back up manually anytime.",
        cls: "setting-item-description",
        attr: { style: "margin-top: 0.25em;" }
      });
      const backupVvIcon = backupTitleRow.createEl("span", { text: "VV", cls: "vk-toggle-icon" });
      Object.assign(backupVvIcon.style, {
        fontWeight: "bold",
        display: "inline-block",
        transition: "transform 0.2s ease",
        transformOrigin: "50% 50%",
        userSelect: "none",
        transform: backupDetails.open ? "rotate(0deg)" : "rotate(180deg)"
      });
      backupDetails.ontoggle = () => {
        backupVvIcon.addClass("vv-rotated");
      };
      const backupBody = backupDetails.createDiv({ cls: "vk-section-body" });
      backupBody.addClass("vv-pl-md");
      new import_obsidian7.Setting(backupBody).setName("Auto-Backup Before Update").setDesc("Create a full .zip of the vault before applying version updates. Force updates will only back up the files that will be modified or removed.").addToggle(
        (t) => t.setValue(this.plugin.settings.autoBackupBeforeUpdate).onChange(async (v) => {
          this.plugin.settings.autoBackupBeforeUpdate = v;
          await this.plugin.saveSettings();
        })
      );
      new import_obsidian7.Setting(backupBody).setName("Manual Backup").setDesc("Immediately create a zip backup of your vault").addButton(
        (b) => b.setButtonText("Backup Vault Now").setCta().onClick(async () => {
          const path2 = await this.plugin.backupManager.backupVaultToZip("manual");
          new import_obsidian7.Notice(`Backup created: ${path2}`);
        })
      );
      new import_obsidian7.Setting(backupBody).setName("Open Backups Folder").setDesc("Open the backups folder on disk. MacOS: Cant see it? Hit Shift+Cmd+(period).").addButton(
        (b) => b.setButtonText("Open Folder").onClick(async () => {
          try {
            const vaultBasePath = this.plugin.app.vault.adapter.getBasePath();
            const backupFolderPath = path.join(
              vaultBasePath,
              ".vault-backups"
            );
            const { shell } = window.require("electron");
            const result = await shell.openPath(backupFolderPath);
            if (typeof result === "string" && result.length > 0) {
              console.error("\u274C shell.openPath error:", result);
              new import_obsidian7.Notice("Could not open backups folder. See console.");
            }
          } catch (err) {
            console.error("\u274C Could not open backups folder:", err);
            new import_obsidian7.Notice("Could not open backups folder. See console.");
          }
        })
      );
      backupBody.createEl("div", {
        attr: {
          style: "border-top: 1px solid var(--divider-color); margin-top: 1.5em;"
        }
      });
      const customizationDetails = containerEl.createEl("details", { cls: "vk-section" });
      const customizationSummary = customizationDetails.createEl("summary", { cls: "vk-section-header" });
      Object.assign(customizationSummary.style, {
        display: "flex",
        flexDirection: "column",
        alignItems: "flex-start",
        padding: "0.5em 0",
        cursor: "pointer"
      });
      const titleRow = customizationSummary.createDiv({
        attr: {
          style: `
			display: flex;
			width: 100%;
			justify-content: space-between;
			align-items: flex-end;
			`
        }
      });
      const customizationTitleBlock = titleRow.createDiv({
        attr: { style: "display: flex; flex-direction: column;" }
      });
      const h5 = customizationTitleBlock.createEl("h5");
      h5.appendText("Custom File Management ");
      customizationTitleBlock.createEl("div", {
        text: "Skip updates on certain files or remap relocated Toolkit files so they can update.",
        cls: "setting-item-description",
        attr: { style: "margin-top: 0.25em;" }
      });
      const customVvIcon = titleRow.createEl("span", { text: "VV", cls: "vk-toggle-icon" });
      Object.assign(customVvIcon.style, {
        fontWeight: "bold",
        transition: "transform 0.2s ease",
        transformOrigin: "50% 50%",
        userSelect: "none",
        transform: customizationDetails.open ? "rotate(0deg)" : "rotate(180deg)"
      });
      customizationDetails.ontoggle = () => {
        customVvIcon.addClass("vv-rotated");
      };
      const customizationBodyWrapper = customizationDetails.createDiv({
        attr: { style: "padding-left: 1em; padding-right: 1em;" }
      });
      const customizationBody = customizationBodyWrapper.createDiv({ cls: "vk-section-body" });
      const skipSection = customizationBody.createDiv();
      const settingItem = skipSection.createDiv({ cls: "setting-item" });
      const info = settingItem.createDiv({ cls: "setting-item-info" });
      info.createDiv({ text: "Skip Toolkit Items", cls: "setting-item-name" });
      info.createDiv({
        text: "Files listed here will be ignored during toolkit updates.",
        cls: "setting-item-description"
      });
      const control = settingItem.createDiv({ cls: "setting-item-control" });
      const dropdown = new import_obsidian7.DropdownComponent(control);
      dropdown.selectEl.addClass("dropdownwidth");
      dropdown.addOption("", "Select an item\u2026");
      this.plugin.manifestCache.files.filter((f) => !f.optional).forEach((f) => dropdown.addOption(f.path, f.displayName ?? f.path.split("/").pop()));
      this.plugin.manifestCache.folders.filter((f) => !f.optional).forEach((f) => dropdown.addOption(f.path, (f.displayName ?? f.path.split("/").pop()) + "/ (folder)"));
      new import_obsidian7.ButtonComponent(control).setButtonText("Add").setCta().onClick(async () => {
        const key = dropdown.getValue();
        if (!key) return new import_obsidian7.Notice("Pick something to skip.");
        if (!this.plugin.settings.customPaths.some((c) => c.manifestKey === key)) {
          this.plugin.settings.customPaths.push({ vaultPath: key, manifestKey: key, doUpdate: false });
          await this.plugin.saveSettings();
          renderSkipTable();
        }
      });
      const skipTableWrapper = skipSection.createDiv({ cls: "vk-table-wrapper", attr: { style: "margin-top:0.75em" } });
      const renderSkipTable = () => {
        skipTableWrapper.empty();
        const items = this.plugin.settings.customPaths.filter((c) => !c.doUpdate);
        if (items.length === 0) {
          const emptyMsg = skipTableWrapper.createEl("div", { text: "No items skipped." });
          emptyMsg.addClass("settings-emptymsg");
          return;
        }
        const table = skipTableWrapper.createEl("table", { cls: "setting-table" });
        const header = table.createTHead().insertRow();
        header.insertCell().textContent = "Skipped Files/Folders";
        const body = table.createTBody();
        items.forEach((entry) => {
          const row = body.insertRow();
          const contentCell = row.insertCell();
          contentCell.addClass("settings-filetable");
          contentCell.createSpan({ text: entry.manifestKey });
          const removeLink = contentCell.createEl("a", { text: "Remove entry", href: "#" });
          removeLink.addClass("settings-removelink");
          removeLink.onclick = async (e) => {
            e.preventDefault();
            this.plugin.settings.customPaths.remove(entry);
            await this.plugin.saveSettings();
            renderSkipTable();
          };
        });
      };
      renderSkipTable();
      customizationBody.createEl("div", {
        attr: { style: "height: 1em; border-top: 1px solid var(--divider-color); margin: 1em 0;" }
      });
      const remapSection = customizationBody.createDiv();
      const remapSetting = remapSection.createDiv({ cls: "setting-item" });
      const remapInfo = remapSetting.createDiv({ cls: "setting-item-info" });
      remapInfo.createDiv({ text: "Remap File Paths", cls: "setting-item-name" });
      remapInfo.createDiv({
        text: "Remap toolkit files vault paths if you chose to move anything. Moving files without remapping will result in duplicate and/or out-of-date files after update.",
        cls: "setting-item-description"
      });
      const remapControlBlock = remapSection.createDiv({ cls: "vk-inline-add-controls" });
      remapControlBlock.addClass("settings-remapcontrol");
      let remapDrop;
      let remapInput;
      remapDrop = new import_obsidian7.DropdownComponent(remapControlBlock);
      remapDrop.selectEl.addClass("dropdownwidth");
      remapDrop.addOption("", "Select an item\u2026");
      this.plugin.manifestCache.files.forEach(
        (f) => remapDrop.addOption(f.path, f.displayName ?? f.path.split("/").pop())
      );
      this.plugin.manifestCache.folders.forEach(
        (f) => remapDrop.addOption(f.path, (f.displayName ?? f.path.split("/").pop()) + "/ (folder)")
      );
      const searchWrapper = remapControlBlock.createDiv();
      const searchComponent = new import_obsidian7.SearchComponent(searchWrapper);
      searchComponent.setPlaceholder("Search vault path\u2026");
      new FilePathSuggester(this.app, searchComponent.inputEl);
      remapInput = searchComponent.inputEl;
      new import_obsidian7.ButtonComponent(remapControlBlock).setButtonText("Add Remap").setCta().onClick(async () => {
        const key = remapDrop.getValue();
        const vp = remapInput.value.trim();
        if (!key || !vp) return new import_obsidian7.Notice("Select an item and enter a vault path.");
        if (!this.app.vault.getAbstractFileByPath(vp)) return new import_obsidian7.Notice("Vault path not found.");
        this.plugin.settings.customPaths = this.plugin.settings.customPaths.filter((c) => c.manifestKey !== key);
        this.plugin.settings.customPaths.push({ manifestKey: key, vaultPath: vp, doUpdate: true });
        await this.plugin.saveSettings();
        remapInput.value = "";
        remapDrop.setValue("");
        renderRemapPanel();
      });
      const remapTableWrapper = remapSection.createDiv({ cls: "vk-table-wrapper", attr: { style: "margin-top: 0.75em" } });
      const renderRemapPanel = () => {
        remapTableWrapper.empty();
        const toRemap = this.plugin.settings.customPaths.filter((c) => c.doUpdate);
        if (toRemap.length === 0) {
          const emptyMsg = remapTableWrapper.createEl("div", { text: "No custom paths defined." });
          emptyMsg.addClass("settings-emptymsg");
          return;
        }
        const table = remapTableWrapper.createEl("table", { cls: "setting-table" });
        const head = table.createTHead().insertRow();
        ["Toolit Item", "New Vault Path", ""].forEach((txt) => head.insertCell().textContent = txt);
        const body = table.createTBody();
        toRemap.forEach((entry) => {
          const row = body.insertRow();
          row.insertCell().textContent = entry.manifestKey;
          row.insertCell().textContent = entry.vaultPath;
          const removeCell = row.insertCell();
          const removeLink = removeCell.createEl("a", { text: "Remove entry", href: "#" });
          removeLink.addClass("settings-removelink");
          removeLink.onclick = async (e) => {
            e.preventDefault();
            this.plugin.settings.customPaths.remove(entry);
            await this.plugin.saveSettings();
            renderRemapPanel();
          };
        });
      };
      renderRemapPanel();
      customizationBody.createEl("div", {
        attr: {
          style: "border-top: 1px solid var(--divider-color); margin: 0.5em 0;"
        }
      });
      const highlightDetails = containerEl.createEl("details", { cls: "vk-section" });
      const highlightSummary = highlightDetails.createEl("summary", { cls: "vk-section-header" });
      Object.assign(highlightSummary.style, {
        display: "flex",
        flexDirection: "column",
        alignItems: "stretch",
        padding: "0.5em 0",
        borderBottom: "1px solid var(--divider-color)",
        cursor: "pointer"
      });
      const highlightTitleRow = highlightSummary.createDiv({
        attr: {
          style: `
			display: flex;
			justify-content: space-between;
			align-items: flex-end;
			`
        }
      });
      const hlTitleBlock = highlightTitleRow.createDiv({
        attr: { style: "display: flex; flex-direction: column;" }
      });
      hlTitleBlock.createEl("h5", { text: "File Highlights" });
      hlTitleBlock.createEl("div", {
        text: "Toggle on/off the highlighting of Toolkit-specific files. Also make the highlights cool colors.",
        cls: "setting-item-description",
        attr: { style: "margin-top: 0.25em;" }
      });
      const hlToggleIcon = highlightTitleRow.createEl("span", { text: "VV", cls: "vk-toggle-icon" });
      Object.assign(hlToggleIcon.style, {
        fontWeight: "bold",
        display: "inline-block",
        transition: "transform 0.2s ease",
        transformOrigin: "50% 50%",
        userSelect: "none",
        transform: highlightDetails.open ? "rotate(0deg)" : "rotate(180deg)"
      });
      highlightDetails.ontoggle = () => {
        hlToggleIcon.addClass("vv-rotated");
      };
      const highlightBody = highlightDetails.createDiv({ cls: "vk-section-body" });
      highlightBody.addClass("vv-pl-md");
      new import_obsidian7.Setting(highlightBody).setName("Enable File/Folder Highlighting").setDesc("Any file/folder installed by VVunderlore will have this background.").addToggle((toggle) => {
        toggle.setValue(this.plugin.settings.highlightEnabled).onChange(async (enabled) => {
          this.plugin.settings.highlightEnabled = enabled;
          await this.plugin.saveSettings();
          if (enabled) {
            this.plugin.enableHighlight();
          } else {
            this.plugin.disableHighlight();
          }
          renderHighlightColorPickers();
        });
      });
      const colorPickerWrapper = highlightBody.createDiv();
      const renderHighlightColorPickers = () => {
        colorPickerWrapper.empty();
        if (!this.plugin.settings.highlightEnabled) {
          return;
        }
        new import_obsidian7.Setting(colorPickerWrapper).setName("Light Mode Highlight Color").setDesc("Choose the background color for files/folders in Light mode.").addColorPicker((picker) => {
          picker.setValue(this.plugin.settings.highlightColorLight).onChange(async (newColor) => {
            this.plugin.settings.highlightColorLight = newColor;
            await this.plugin.saveSettings();
            this.plugin.disableHighlight();
            this.plugin.enableHighlight();
          });
        });
        new import_obsidian7.Setting(colorPickerWrapper).setName("Dark Mode Highlight Color").setDesc("Choose the background color for files/folders in Dark mode.").addColorPicker((picker) => {
          picker.setValue(this.plugin.settings.highlightColorDark).onChange(async (newColor) => {
            this.plugin.settings.highlightColorDark = newColor;
            await this.plugin.saveSettings();
            this.plugin.disableHighlight();
            this.plugin.enableHighlight();
          });
        });
      };
      renderHighlightColorPickers();
      renderSkipTable();
      renderRemapPanel();
      const removeDemoSetting = new import_obsidian7.Setting(containerEl);
      removeDemoSetting.settingEl.addClass("vv-no-border-top");
      removeDemoSetting.setName("Remove Demo Files").setDesc("Delete every \u201Coptional\u201D demo file and folder from your vault.").addButton(
        (button) => button.setButtonText("Remove Demo Files").onClick(async () => {
          const optionalFileEntries = this.plugin.manifestCache.files.filter((f) => f.optional);
          const optionalFolderEntries = this.plugin.manifestCache.folders.filter((f) => f.optional);
          const totalCountFiles = optionalFileEntries.length;
          const totalCountFolders = optionalFolderEntries.length;
          const totalCount = totalCountFiles + totalCountFolders;
          if (totalCount === 0) {
            new import_obsidian7.Notice("No \u201Coptional\u201D demo files or folders to remove.");
            return;
          }
          const userConfirmed = await new Promise((resolve) => {
            const confirmModal = new class extends import_obsidian7.Modal {
              constructor(app) {
                super(app);
              }
              onOpen() {
                this.contentEl.empty();
                this.contentEl.createEl("h2", { text: "Confirm Removal" });
                this.contentEl.createEl("p", {
                  text: `This will permanently delete ${totalCountFiles} file(s) and ${totalCountFolders} folder(s). Continue?`
                });
                const btnRow = this.contentEl.createEl("div");
                Object.assign(btnRow.style, {
                  display: "flex",
                  justifyContent: "flex-end",
                  gap: "0.5em",
                  marginTop: "1.5em"
                });
                btnRow.createEl("button", { text: "Cancel" }).onclick = () => {
                  resolve(false);
                  this.close();
                };
                btnRow.createEl("button", { text: "Yes, Remove", cls: "mod-danger" }).onclick = () => {
                  resolve(true);
                  this.close();
                };
              }
              onClose() {
                this.contentEl.empty();
              }
            }(this.app);
            confirmModal.open();
          });
          if (!userConfirmed) {
            return;
          }
          let filesDeleted = 0;
          for (const fileEntry of optionalFileEntries) {
            const mapped = this.plugin.settings.customPaths.find((c) => c.manifestKey === fileEntry.key);
            const vaultPath = mapped?.vaultPath ?? fileEntry.path;
            if (await this.app.vault.adapter.exists(vaultPath)) {
              try {
                await this.app.vault.adapter.remove(vaultPath);
                filesDeleted++;
              } catch (err) {
                console.error(`Failed to delete optional file ${vaultPath}`, err);
              }
            }
          }
          let foldersDeleted = 0;
          for (const folderEntry of optionalFolderEntries) {
            const mapped = this.plugin.settings.customPaths.find((c) => c.manifestKey === folderEntry.key);
            const vaultFolderPath = mapped?.vaultPath ?? folderEntry.path;
            if (await this.app.vault.adapter.exists(vaultFolderPath)) {
              try {
                await this.app.vault.adapter.rmdir(vaultFolderPath, true);
                foldersDeleted++;
              } catch (err) {
                console.error(`Failed to delete optional folder ${vaultFolderPath}`, err);
              }
            }
          }
          this.plugin.settings.customPaths = this.plugin.settings.customPaths.filter((c) => {
            const isOptFile = optionalFileEntries.some((f) => f.key === c.manifestKey);
            const isOptFolder = optionalFolderEntries.some((f) => f.key === c.manifestKey);
            return !isOptFile && !isOptFolder;
          });
          await this.plugin.saveSettings();
          new import_obsidian7.Notice(`Deleted ${filesDeleted} file(s) and ${foldersDeleted} folder(s).`);
          this.display();
        })
      );
      const footer = containerEl.createDiv({ cls: "setting-item" });
      Object.assign(footer.style, {
        fontSize: "0.85em",
        color: "var(--text-muted)",
        marginTop: "1em"
      });
      footer.createEl("span", {
        text: `VVunderlore Toolkit Plugin v${this.plugin.manifest.version} \u2022 `
      });
      footer.createEl("a", {
        text: "View on GitHub",
        href: "https://github.com/slamwise0001/vvunderlore-toolkit-plugin",
        attr: { target: "_blank" }
      });
      containerEl.scrollTop = savedScrollTop;
    })();
  }
  async updateVersionDisplay() {
    if (!this.versionValueEl || !this.forceWarningEl) return;
    let installed = "";
    try {
      const ver = await this.plugin.app.vault.adapter.read(".version.json");
      installed = JSON.parse(ver).version ?? "";
    } catch {
    }
    const latest = (this.plugin.settings.latestToolkitVersion ?? "").trim();
    const isMatch = installed === latest;
    this.versionValueEl.textContent = installed || "Not installed";
    this.versionValueEl.addClass(isMatch ? "vv-success" : "vv-error");
    this.forceWarningEl.empty();
    if (installed && latest && installed !== latest) {
      const warn = this.forceWarningEl.createDiv({
        text: `\u26A0\uFE0F New version available (${installed} \u2192 ${latest}) \u2014 use regular update instead`
      });
      warn.addClass("vv-small", "vv-muted", "vv-italic");
      warn.setAttr("title", "Force updating while a new version is available may skip important changes.");
    }
  }
};

// src/fileCacheManager.ts
var import_crypto = require("crypto");
var ToolkitFileCacheManager = class {
  constructor(vault, initialCache, saveCallback) {
    this.vault = vault;
    this.cache = initialCache || {};
    this.save = saveCallback;
  }
  hashContent(content) {
    return (0, import_crypto.createHash)("sha256").update(content).digest("hex");
  }
  async isUpToDate(vaultPath) {
    const entry = this.cache[vaultPath];
    if (!entry) {
      return false;
    }
    const exists = await this.vault.adapter.exists(vaultPath);
    if (!exists) {
      return false;
    }
    const content = await this.vault.adapter.read(vaultPath);
    const localHash = this.hashContent(content);
    const isSame = localHash === entry.hash;
    return isSame;
  }
  async updateCache(vaultPath, content, githubPath, saveNow = true) {
    this.cache[vaultPath] = {
      hash: this.hashContent(content),
      githubPath
    };
    if (saveNow) await this.save();
  }
  getCache() {
    return this.cache;
  }
  getTrackedFiles() {
    return Object.keys(this.cache);
  }
  getGitHubPath(vaultPath) {
    return this.cache[vaultPath]?.githubPath;
  }
  resetCache() {
    this.cache = {};
  }
  async removeFromCache(vaultPath) {
    delete this.cache[vaultPath];
    await this.save();
  }
};

// src/backup/BackupManager.ts
var import_obsidian8 = require("obsidian");
var import_path = require("path");
var import_fs = require("fs");
var BackupManager = class {
  constructor(app) {
    this.app = app;
  }
  /**
   * Mirror every vault file (excluding .obsidian & backups) into a timestamped folder,
   * then prune to keep only the latest N full snapshots.
   * @param label Optional suffix for the backup folder name
   * @param maxFullBackups Number of full snapshots to retain (default: 5)
   */
  async backupVaultMirror(label, maxFullBackups = 5) {
    const ts = (/* @__PURE__ */ new Date()).toISOString().replace(/[:.]/g, "-");
    const tag = label ? `-${label}` : "";
    const base = (0, import_obsidian8.normalizePath)(`.vault-backups/full/${ts}${tag}`);
    await this.ensureFolderExists(base);
    for (const file of this.app.vault.getFiles()) {
      if (file.path.startsWith(".vault-backups/") || file.path.startsWith(`${this.app.vault.configDir}/`)) {
        continue;
      }
      const content = await this.app.vault.read(file);
      const target = (0, import_obsidian8.normalizePath)(`${base}/${file.path}`);
      await this.ensureFolderExists((0, import_path.dirname)(target));
      await this.app.vault.create(target, content);
    }
    await this.pruneFullBackups(base, maxFullBackups);
    new import_obsidian8.Notice("\u2705 Backup complete!");
    return base;
  }
  /**
   * Legacy alias for mirror-based backups
   */
  async backupVaultToZip(label) {
    return this.backupVaultMirror(label);
  }
  /**
   * Deletes oldest full backup folders, keeping only the most recent `keep` snapshots.
   */
  async pruneFullBackups(currentPath, keep) {
    const root = (0, import_obsidian8.normalizePath)(".vault-backups/full");
    await this.ensureFolderExists(root);
    if (!await this.app.vault.adapter.exists(root)) {
      return;
    }
    const listing = await this.app.vault.adapter.list(root);
    const rawFolders = Array.isArray(listing) ? listing : "folders" in listing ? listing.folders : [];
    const folders = rawFolders.map((f) => (0, import_path.basename)(f));
    const sorted = [...folders].sort((a, b) => b.localeCompare(a));
    const adapterAny = this.app.vault.adapter;
    const fsRoot = adapterAny.basePath ? (0, import_path.join)(adapterAny.basePath, root) : null;
    if (!fsRoot) {
      return;
    }
    for (let i = keep; i < sorted.length; i++) {
      const name = sorted[i];
      const vaultPath = (0, import_obsidian8.normalizePath)(`${root}/${name}`);
      if (vaultPath === currentPath) {
        continue;
      }
      const removePath = (0, import_path.join)(fsRoot, name);
      try {
        await import_fs.promises.rm(removePath, { recursive: true, force: true });
      } catch (e) {
      }
      const af = this.app.vault.getAbstractFileByPath(vaultPath);
      if (af) {
        await this.app.fileManager.trashFile(af);
      }
    }
  }
  /**
   * Recursively ensures that a directory exists in the vault.
   */
  async ensureFolderExists(folderPath) {
    if (!folderPath || await this.app.vault.adapter.exists(folderPath)) {
      return;
    }
    const parent = (0, import_path.dirname)(folderPath);
    await this.ensureFolderExists(parent);
    await this.app.vault.createFolder(folderPath);
  }
};

// src/main.ts
function getRulesetDisplayName(key) {
  const ed = AVAILABLE_EDITIONS.find((e) => e.id === key);
  return ed?.label ?? key;
}
var loadingIcon = "data:image/png;base64,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";
var InstallingModal = class extends import_obsidian9.Modal {
  constructor(app) {
    super(app);
  }
  onOpen() {
    this.contentEl.empty();
    const img = this.contentEl.createEl("img", {
      attr: { src: loadingIcon, alt: "Installing\u2026" }
    });
    Object.assign(img.style, {
      display: "block",
      margin: "1em auto 0.5em",
      width: "100px",
      height: "100px"
    });
    img.animate(
      [
        { transform: "rotate(0deg)" },
        { transform: "rotate(-360deg)" }
      ],
      {
        duration: 1500,
        // one and a half seconds per revolution
        iterations: Infinity,
        easing: "linear"
      }
    );
    const txt = this.contentEl.createDiv({ text: "Installing\u2026", cls: "mod-quiet" });
    txt.addClass("installmodal-txt");
  }
  onClose() {
    this.contentEl.empty();
  }
};
var DEFAULT_SETTINGS = {
  installedVersion: "1.0.0",
  customizeUpdates: false,
  updateTargets: {
    tools: true,
    toolsPath: "Tools",
    templates: true,
    templatesPath: "Extras/Templates",
    omninomicon: true,
    omninomiconPath: "Adventures/Omninomicon.md",
    spellbook: true,
    spellbookPath: "Compendium/Spells/_Spellbook.md"
  },
  latestDefaults: void 0,
  pathOverrides: {},
  backupFiles: {},
  backupPath: "",
  autoBackup: false,
  lastBackupTime: "",
  backupError: "",
  customPaths: [],
  autoBackupBeforeUpdate: true,
  highlightEnabled: false,
  highlightColorLight: "#DFE7E2",
  highlightColorDark: "#1F2943",
  rulesetCompendium: "",
  rulesetReference: [],
  reparseGamesets: true,
  isFirstRun: "yes"
};
var VVunderloreToolkitPlugin = class extends import_obsidian9.Plugin {
  constructor() {
    super(...arguments);
    this.manifestCache = { files: [], folders: [] };
    this.changelog = "";
    this.autoCheckInterval = null;
    this.oldPathsByGithub = {};
    this.styleEl = null;
    this.excludedPaths = [
      ".DS_Store",
      ".gitignore",
      ".gitattributes",
      ".github",
      "README.md",
      "Compendium",
      `${this.app.vault.configDir}/plugins/vvunderlore-toolkit-plugin/manifest.json`,
      `${this.app.vault.configDir}/plugins/vvunderlore-toolkit-plugin/main.js`,
      `${this.app.vault.configDir}/plugins/vvunderlore-toolkit-plugin/styles.css`
    ];
    this.isFirstRun = false;
    this.pendingRulesetKey = "";
    this.pendingReferenceKeys = [];
  }
  // ─── HELPERS ────────────────────────────────────────────────────────
  /** Given a GitHub path, return the overridden vault path or the original. */
  resolveVaultPath(githubPath) {
    const custom = this.settings.customPaths.find(
      (c) => c.manifestKey === githubPath || c.manifestKey === this.keyFor(githubPath)
    );
    return custom?.vaultPath ?? githubPath;
  }
  /** Convert “some/folder/file.md” → “some-folder-file” (lowercased, no extension). */
  keyFor(path2) {
    return path2.replace(/[/\\]/g, "-").replace(/\.[^.]+$/, "").toLowerCase();
  }
  isExcluded(path2) {
    return this.excludedPaths.some(
      (ex) => path2 === ex || path2.startsWith(`${ex}/`) || path2.includes(`/${ex}/`) || path2.endsWith(`/${ex}`) || path2.includes(`/${ex}`)
    );
  }
  // ─── CUSTOM INSTALL LOGIC ───────────────────────────────────────────
  async performCustomInstall(toInstall) {
    const allFiles = this.app.vault.getAllLoadedFiles().filter((f) => f instanceof import_obsidian9.TFile).map((f) => f.path);
    const nonMarkerFiles = allFiles.filter((p) => p !== ".vvunderlore_installed");
    if (nonMarkerFiles.length > 0 && this.settings.autoBackupBeforeUpdate) {
      const folder = await this.backupManager.backupVaultMirror("pre-custom-install");
      new import_obsidian9.Notice(`Backup before custom\u2010install created at: ${folder}`);
    }
    for (const entry of toInstall) {
      if (entry.isFolder) {
        if (!await this.app.vault.adapter.exists(entry.path)) {
          await this.app.vault.createFolder(entry.path);
        }
      } else {
        const manifestEntry = this.manifestCache.files.find(
          (f) => f.path === entry.path
        );
        if (!manifestEntry) {
          continue;
        }
        await this.updateEntryFromManifest(manifestEntry, true);
      }
    }
    await this.updateVersionFile();
    this.settings.installedVersion = this.settings.latestToolkitVersion ?? this.settings.installedVersion;
    this.settings.lastForceUpdate = (/* @__PURE__ */ new Date()).toISOString();
    await this.saveSettings();
    const markerPath = ".vvunderlore_installed";
    if (!await this.app.vault.adapter.exists(markerPath)) {
      await this.app.vault.create(markerPath, "");
    }
    this.settings.highlightEnabled = true;
    await this.saveSettings();
    this.enableHighlight();
    await this.updateVersionFile();
    if (this.settingsTab) {
      this.settingsTab.display();
    }
    new import_obsidian9.Notice("\u2705 Custom install complete \u2026");
  }
  // ─── HIGHLIGHTING (Light + Dark Mode) ──────────────────────────────
  get highlightCSS() {
    const light = this.settings.highlightColorLight.trim() || "rgba(107,146,120,1)";
    const dark = this.settings.highlightColorDark.trim() || "rgba( 50, 70, 50,1)";
    const fileSelectors = this.manifestCache.files.map((f) => {
      const escaped = f.path.replace(/"/g, '\\"');
      return `.nav-file-title[data-path="${escaped}"]`;
    });
    const folderSelectors = this.manifestCache.folders.map((f) => {
      const escaped = f.path.replace(/"/g, '\\"');
      return `.nav-folder-title[data-path="${escaped}"]`;
    });
    const lines = [
      `:root {`,
      `  --vvunderlore-toolkit-highlight: ${light};`,
      `}`,
      ``,
      `body.theme-dark {`,
      `  --vvunderlore-toolkit-highlight: ${dark};`,
      `}`,
      ``
    ];
    if (fileSelectors.length) {
      lines.push(`${fileSelectors.join(", ")} {`);
      lines.push(`  background-color: var(--vvunderlore-toolkit-highlight);`);
      lines.push(`  border-radius: 3px;`);
      lines.push(`}`);
      lines.push(``);
    }
    if (folderSelectors.length) {
      lines.push(`${folderSelectors.join(", ")} {`);
      lines.push(`  background-color: var(--vvunderlore-toolkit-highlight);`);
      lines.push(`  border-radius: 3px;`);
      lines.push(`}`);
      lines.push(``);
    }
    return lines.join("\n");
  }
  enableHighlight() {
    if (this.styleEl) return;
    this.styleEl = document.createElement("style");
    this.styleEl.id = "vvunderlore-highlight-inject";
    this.styleEl.textContent = this.highlightCSS;
    document.head.appendChild(this.styleEl);
  }
  disableHighlight() {
    if (!this.styleEl) return;
    this.styleEl.remove();
    this.styleEl = null;
  }
  // ─── REMOTE BASELINE CACHING ─────────────────────────────────────────
  async fetchRemoteBaseline() {
    if (!this.manifestCache || !Array.isArray(this.manifestCache.files)) {
      console.warn("\u26A0\uFE0F manifestCache is missing or invalid");
      return;
    }
    for (const entry of this.manifestCache.files) {
      try {
        const rawUrl = `https://raw.githubusercontent.com/slamwise0001/VVunderlore-Toolkit-Full/main/${entry.path}`;
        const remoteText = await (await fetch(rawUrl)).text();
        const resolved = this.resolveVaultPath(entry.path);
        if (resolved !== entry.path) {
          await this.fileCacheManager.removeFromCache(entry.path);
        }
        await this.fileCacheManager.updateCache(
          resolved,
          remoteText,
          entry.path,
          false
        );
      } catch (e) {
        console.error(`Failed to fetch raw baseline for ${entry.path}`, e);
      }
    }
  }
  // ─── MARKER FILE CHECKS (first‐run detection) ───────────────────────
  async checkMarkerFile() {
    const markerPath = ".vvunderlore_installed";
    const markerExists = await this.app.vault.adapter.exists(markerPath);
    this.isFirstRun = !markerExists;
    delete this.settings.needsInstall;
    await this.saveSettings();
    this.settingsTab.display();
  }
  // ─── MANIFEST SYNC ────────────────────────────────────────────────────
  async syncManifest() {
    try {
      const res = await (0, import_obsidian9.requestUrl)({
        url: "https://raw.githubusercontent.com/slamwise0001/VVunderlore-Toolkit-Full/main/manifest.json"
      });
      const manifest = res.json;
      this.settings.latestDefaults = manifest.defaultPaths || {};
      this.manifestCache = manifest;
      const manifestContent = JSON.stringify(manifest, null, 2);
      await this.app.vault.adapter.write("manifest.json", manifestContent);
      await this.saveSettings();
    } catch (error) {
      console.error("Error syncing manifest:", error);
      new import_obsidian9.Notice("Failed to sync manifest.");
    }
  }
  // ─── PLUGIN LIFECYCLE ─────────────────────────────────────────────────
  async onload() {
    await this.loadSettings();
    if (this.settings.isFirstRun === "no") {
      this.app.workspace.onLayoutReady(() => {
        const welcome = this.app.vault.getAbstractFileByPath("Welcome.md");
        if (welcome instanceof import_obsidian9.TFile) {
          this.app.workspace.detachLeavesOfType("settings");
          this.app.workspace.getLeaf(true).openFile(welcome);
        }
        this.settings.isFirstRun = "shown";
        this.saveSettings();
      });
    }
    this.backupManager = new BackupManager(this.app);
    this.fileCacheManager = new ToolkitFileCacheManager(
      this.app.vault,
      this.settings.fileCache ?? {},
      async () => await this.saveSettings()
    );
    const origError = console.error.bind(console);
    console.error = (msg, ...rest) => {
      if (typeof msg === "string" && msg.includes("Cannot index file") && msg.includes("Dataview")) {
        return;
      }
      origError(msg, ...rest);
    };
    this.settingsTab = new ToolkitSettingsTab(this.app, this);
    this.addSettingTab(this.settingsTab);
    if (this.settings.isFirstRun !== "yes") {
      try {
        const content = await this.app.vault.adapter.read("manifest.json");
        this.manifestCache = JSON.parse(content);
      } catch (err) {
        console.warn("Manifest not found in vault; will fetch from GitHub shortly.");
      }
    }
    if (this.settings.highlightEnabled) {
      this.enableHighlight();
    }
    setTimeout(async () => {
      await this.syncManifest();
      await this.showIndexingModal();
      await this.checkForUpdates();
      this.oldPathsByGithub = Object.entries(
        this.fileCacheManager.getCache()
      ).reduce((map, [vaultPath, entry]) => {
        map[entry.githubPath] = vaultPath;
        return map;
      }, {});
    }, 250);
    this.scheduleAutoUpdateCheck();
    this.registerEvent(
      this.app.vault.on("delete", () => this.app.commands.executeCommandById("dataview:clear-cache"))
    );
    this.registerEvent(
      this.app.vault.on(
        "rename",
        () => this.app.commands.executeCommandById("dataview:clear-cache")
      )
    );
    if (!this.settings.customPaths) {
      this.settings.customPaths = [];
    }
    if (this.settings.isFirstRun !== "yes") {
      try {
        const raw = await this.app.vault.adapter.read("manifest.json");
        const manifest = JSON.parse(raw);
        const entries = [...manifest.folders || [], ...manifest.files || []];
        this.requiresGraph = /* @__PURE__ */ new Map();
        for (const e of entries) {
          this.requiresGraph.set(e.key, e.requires ?? []);
        }
      } catch (e) {
        console.warn("Could not build requiresGraph (manifest.json missing or invalid).");
        this.requiresGraph = /* @__PURE__ */ new Map();
      }
    } else {
      this.requiresGraph = /* @__PURE__ */ new Map();
    }
    if (this.isFirstRun) {
      this.app.workspace.onLayoutReady(() => {
        try {
          this.app.workspace.detachLeavesOfType("settings");
          const welcome = this.app.vault.getAbstractFileByPath("Welcome.md");
          if (welcome instanceof import_obsidian9.TFile) {
            this.app.workspace.getLeaf(true).openFile(welcome);
          }
        } catch (err) {
          console.error("\u274C Failed to open Welcome.md:", err);
        }
      });
    }
  }
  onunload() {
    this.disableHighlight();
    if (this.autoCheckInterval) {
      clearInterval(this.autoCheckInterval);
    }
  }
  scheduleAutoUpdateCheck() {
    this.autoCheckInterval = window.setInterval(() => {
      this.checkForUpdates();
    }, 60 * 60 * 1e3);
  }
  // ─── BACKUP & UNDO ────────────────────────────────────────────────────
  async backupFile(filePath, content) {
    this.settings.backupFiles = this.settings.backupFiles || {};
    this.settings.backupFiles[filePath] = content;
    await this.saveSettings();
  }
  async undoForceUpdate() {
    if (!this.settings.backupFiles || Object.keys(this.settings.backupFiles).length === 0) {
      new import_obsidian9.Notice("No backups available to restore.");
      return;
    }
    for (const [filePath, backupContent] of Object.entries(this.settings.backupFiles)) {
      if (await this.app.vault.adapter.exists(filePath)) {
        await this.app.vault.adapter.write(filePath, backupContent);
      } else {
        await this.app.vault.create(filePath, backupContent);
      }
    }
    new import_obsidian9.Notice("\u2705 Force update undone.");
    this.settings.backupFiles = {};
    await this.saveSettings();
  }
  // ─── FOLDER SYNC ───────────────────────────────────────────────────────
  async syncMissingFolders() {
    if (this.manifestCache && this.manifestCache.folders) {
      for (const folderEntry of this.manifestCache.folders) {
        const folderPath = folderEntry.path;
        if (!await this.app.vault.adapter.exists(folderPath)) {
          await this.app.vault.createFolder(folderPath);
        }
      }
    }
  }
  // ─── FORCE-UPDATE PREVIEW ──────────────────────────────────────────────
  async buildForceUpdatePreview() {
    const previewList = [];
    const denyListedFolders = this.settings.customPaths.filter((c) => c.doUpdate === false).map((c) => c.manifestKey);
    for (const entry of this.manifestCache.files) {
      if (entry.optional) {
        continue;
      }
      const custom = this.settings.customPaths.find((c) => c.manifestKey === entry.key);
      const isInDenyFolder = denyListedFolders.some(
        (folder) => entry.path.startsWith(folder + "/")
      );
      if (custom?.doUpdate === false || isInDenyFolder) {
        const vp = custom?.vaultPath ?? this.resolveVaultPath(entry.path);
        const exists = await this.app.vault.adapter.exists(vp);
        const upToDate = exists && await this.fileCacheManager.isUpToDate(vp);
        if (!exists || !upToDate) {
          previewList.push({
            filePath: vp,
            action: "deny-listed \u2013 will not update",
            selected: false
          });
        }
      }
    }
    if (!this.settings.customizeUpdates) {
      for (const f of this.manifestCache.files) {
        if (f.optional) {
          continue;
        }
        const custom = this.settings.customPaths.find((c) => c.manifestKey === f.key);
        const isInDenyFolder = denyListedFolders.some(
          (folder) => f.path.startsWith(folder + "/")
        );
        if (custom?.doUpdate === false || isInDenyFolder) {
          continue;
        }
        const vp = this.resolveVaultPath(f.path);
        let tag = "";
        if (vp !== f.path) tag = " (remapped)";
        const exists = await this.app.vault.adapter.exists(vp);
        if (!exists) {
          previewList.push({
            filePath: vp,
            action: `new file${tag}`,
            selected: true
          });
        } else if (!await this.fileCacheManager.isUpToDate(vp)) {
          previewList.push({
            filePath: vp,
            action: `will be overwritten${tag}`,
            selected: true
          });
        }
      }
      for (const fld of this.manifestCache.folders) {
        if (fld.optional) {
          continue;
        }
        const isDenyFolder = denyListedFolders.includes(fld.path);
        if (!await this.app.vault.adapter.exists(fld.path) && !isDenyFolder) {
          previewList.push({
            filePath: fld.path,
            action: "missing folder (will be created)",
            selected: true,
            isFolder: true
          });
        }
      }
      return previewList;
    }
    for (const entry of this.manifestCache.files) {
      if (entry.optional) {
        continue;
      }
      const custom = this.settings.customPaths.find((c) => c.manifestKey === entry.key);
      const isInDenyFolder = denyListedFolders.some(
        (folder) => entry.path.startsWith(folder + "/")
      );
      if (custom?.doUpdate === false || isInDenyFolder) {
        continue;
      }
      const vaultPath = custom?.vaultPath ?? this.resolveVaultPath(entry.path);
      const exists = await this.app.vault.adapter.exists(vaultPath);
      const upToDate = exists && await this.fileCacheManager.isUpToDate(vaultPath);
      let tag = "";
      if (vaultPath !== entry.path) tag = " (remapped)";
      if (!exists) {
        previewList.push({
          filePath: vaultPath,
          action: `new file${tag}`,
          selected: true
        });
      } else if (!upToDate) {
        previewList.push({
          filePath: vaultPath,
          action: `will be overwritten${tag}`,
          selected: true
        });
      }
    }
    for (const entry of this.manifestCache.folders) {
      if (entry.optional) {
        continue;
      }
      const isDenyFolder = denyListedFolders.includes(entry.path);
      if (!await this.app.vault.adapter.exists(entry.path) && !isDenyFolder) {
        previewList.push({
          filePath: entry.path,
          action: "missing folder (will be created)",
          selected: true,
          isFolder: true
        });
      }
    }
    for (const f of this.manifestCache.files) {
      if (f.optional) {
        continue;
      }
      const manifestKey = f.key;
      const manifestPath = f.path;
      const custom = this.settings.customPaths.find((c) => c.manifestKey === manifestKey);
      const prevPath = this.oldPathsByGithub[manifestPath];
      const isInDenyFolder = denyListedFolders.some(
        (folder) => manifestPath.startsWith(folder + "/")
      );
      if (custom?.doUpdate === false || isInDenyFolder) {
        continue;
      }
      if (custom && custom.vaultPath && custom.vaultPath !== manifestPath) {
        continue;
      }
      if (prevPath && prevPath !== manifestPath && (!custom || custom.vaultPath === manifestPath)) {
        previewList.push({
          filePath: prevPath,
          action: `moved \u2192 ${manifestPath}`,
          selected: true
        });
      }
    }
    return previewList;
  }
  async forceUpdatePreviewAndConfirm() {
    const previewList = await this.buildForceUpdatePreview();
    const denyItems = [];
    const normalItems = [];
    for (const item of previewList) {
      if (item.action.startsWith("deny-listed")) {
        denyItems.push(item);
      } else {
        normalItems.push(item);
      }
    }
    const modal = new class extends import_obsidian9.Modal {
      constructor(app, normal, denied) {
        super(app);
        this.normal = normal;
        this.denied = denied;
      }
      onOpen() {
        this.contentEl.addEventListener("click", (e) => e.stopPropagation());
        this.contentEl.empty();
        this.titleEl.setText("Force Update Preview");
        this.contentEl.createEl("p", {
          text: 'The following items will be updated. Uncheck any items you do NOT want to change, then click "Confirm and Update".'
        });
        if (this.normal.length) {
          const normalContainer = this.contentEl.createEl("div");
          Object.assign(normalContainer.style, {
            maxHeight: "300px",
            overflowY: "auto",
            marginTop: "1em"
          });
          this.normal.forEach((item) => {
            const row = normalContainer.createDiv();
            Object.assign(row.style, {
              display: "flex",
              alignItems: "flex-start",
              justifyContent: "space-between",
              padding: "6px 0",
              fontFamily: "monospace"
            });
            const label = row.createDiv();
            label.addClass("forceupdate-flexcolumn");
            const labelWrapper = label.createDiv();
            labelWrapper.textContent = item.filePath;
            const note = label.createDiv({ text: item.action });
            note.addClass("forceupdate-note");
            const checkbox = row.createEl("input", { type: "checkbox" });
            checkbox.checked = item.selected;
            checkbox.onchange = () => {
              item.selected = checkbox.checked;
            };
          });
        } else {
          const noCandidates = this.contentEl.createEl("div");
          Object.assign(noCandidates.style, {
            display: "inline-block",
            fontFamily: "monospace",
            fontStyle: "italic",
            marginTop: "0.5em"
          });
          noCandidates.textContent = "No force-update candidates.";
        }
        if (this.denied.length) {
          const denyDetails = this.contentEl.createEl("details", { cls: "vk-section" });
          denyDetails.open = false;
          const summary = denyDetails.createEl("summary", { cls: "vk-section-header" });
          Object.assign(summary.style, {
            cursor: "pointer",
            display: "flex",
            color: "var(--text-faint)",
            alignItems: "center",
            gap: "0.5em",
            marginTop: "1em"
          });
          summary.createEl("span", { text: `Deny-List Files (${this.denied.length})` });
          const toggleIcon = summary.createEl("span", { text: "VV", cls: "vk-toggle-icon" });
          Object.assign(toggleIcon.style, {
            fontWeight: "bold",
            display: "inline-block",
            transition: "transform 0.2s ease",
            transformOrigin: "50% 50%",
            userSelect: "none",
            transform: "rotate(180deg)"
          });
          denyDetails.ontoggle = () => {
            toggleIcon.toggleClass("vv-rotated", !denyDetails.open);
          };
          const denyBody = denyDetails.createDiv({ cls: "vk-section-body" });
          denyBody.addClass("denylist");
          this.denied.forEach((item) => {
            const row = denyBody.createDiv();
            Object.assign(row.style, {
              display: "flex",
              alignItems: "flex-start",
              justifyContent: "space-between",
              padding: "6px 0",
              fontFamily: "monospace",
              color: "var(--text-faint)",
              fontStyle: "italic"
            });
            const labelWrapper = row.createDiv();
            labelWrapper.textContent = item.filePath;
            labelWrapper.addClass("forceupdate-labelwrapper");
            const note = row.createDiv({ text: item.action });
            note.addClass("forceupdate-note-b");
            const checkbox = row.createEl("input", { type: "checkbox" });
            checkbox.checked = item.selected;
            checkbox.disabled = true;
            checkbox.title = "This item is deny-listed";
          });
        }
        if (this.plugin.settings.reparseGamesets) {
          this.contentEl.createDiv({ cls: "mod-aux-text" }).setText("\u{1F504} Refreshing Gameset Data");
        }
        const buttonRow = this.contentEl.createEl("div");
        Object.assign(buttonRow.style, {
          display: "flex",
          justifyContent: "flex-end",
          gap: "0.5em",
          marginTop: "1.5em"
        });
        const cancelBtn = buttonRow.createEl("button", { text: "Cancel" });
        cancelBtn.onclick = () => this.close();
        const confirmBtn = buttonRow.createEl("button", {
          text: "Confirm and Update",
          cls: "mod-cta"
        });
        confirmBtn.onclick = async () => {
          this.close();
          await this.plugin.performForceUpdateWithSelection([...this.normal, ...this.denied]);
        };
      }
      onClose() {
        this.contentEl.empty();
      }
    }(this.app, normalItems, denyItems);
    modal.plugin = this;
    modal.open();
  }
  async updateEntryFromManifest(entry, force = false) {
    const custom = this.settings.customPaths.find((c) => c.manifestKey === entry.key);
    if (custom?.doUpdate === false) {
      return;
    }
    const finalVaultPath = custom?.vaultPath ?? this.resolveVaultPath(entry.path);
    if (!force && await this.fileCacheManager.isUpToDate(finalVaultPath)) {
      return;
    }
    const url = `https://raw.githubusercontent.com/slamwise0001/vvunderlore-toolkit-full/main/${entry.path}`;
    try {
      const res = await fetch(url);
      const text = await res.text();
      await this.app.vault.adapter.write(finalVaultPath, text);
      await this.fileCacheManager.updateCache(finalVaultPath, text, entry.path);
    } catch (e) {
      console.error(`\u274C Error updating ${entry.displayName}:`, e);
    }
  }
  async performForceUpdateWithSelection(previewList) {
    if (this.settings.autoBackupBeforeUpdate) {
    }
    this.settings.backupFiles = {};
    await this.saveSettings();
    try {
      const toUpdate = previewList.filter(
        (item) => item.selected && !item.isFolder && !this.settings.customPaths.some(
          (c) => c.vaultPath === item.filePath && c.doUpdate === false
        )
      );
      for (const item of toUpdate) {
        const entry = this.manifestCache.files.find(
          (f) => this.resolveVaultPath(f.path) === item.filePath
        );
        if (!entry) {
          console.warn(`\u26A0\uFE0F Could not match preview item to manifest: ${item.filePath}`);
          continue;
        }
        await this.updateEntryFromManifest(entry, true);
      }
      for (const entry of this.manifestCache.folders) {
        if (!await this.app.vault.adapter.exists(entry.path)) {
          await this.app.vault.createFolder(entry.path);
        }
      }
      await this.updateVersionFile();
      this.settings.installedVersion = this.settings.latestToolkitVersion ?? "unknown";
      this.settings.lastForceUpdate = (/* @__PURE__ */ new Date()).toISOString();
      await this.saveSettings();
      new import_obsidian9.Notice("\u2705 Toolkit force\u2010updated with your selections.");
      if (this.settings.reparseGamesets) {
        new import_obsidian9.Notice("\u{1F504} Refreshing Game Set Data\u2026");
        await this.refreshGameSetData();
      }
      if (this.settingsTab) {
        await this.settingsTab.updateVersionDisplay();
      }
    } catch (err) {
      console.error("\u274C Force update failed. Version not changed.", err);
      new import_obsidian9.Notice("\u274C One or more files failed. Version NOT updated.");
    }
    if (this.settings.highlightEnabled) {
      this.enableHighlight();
    }
  }
  // ─── SINGLE-FILE UPDATE (with GitHub API + raw fallback) ──────────────
  async updateSingleFileFromGitHub({ githubPath, vaultPath }, force = false) {
    if (this.settings.customizeUpdates) {
      vaultPath = this.resolveVaultPath(githubPath);
      const custom = this.settings.customPaths.find((c) => c.manifestKey === githubPath);
      if (custom?.doUpdate === false) {
        return;
      }
    } else {
      vaultPath = githubPath;
    }
    if (!vaultPath) {
      console.error(`\u274C No valid vault path resolved for ${githubPath}`);
      return;
    }
    const oldVault = this.oldPathsByGithub[githubPath];
    if (oldVault && oldVault !== vaultPath) {
      if (await this.app.vault.adapter.exists(vaultPath)) {
        const stray = await this.app.vault.adapter.read(vaultPath);
        await this.backupFile(vaultPath, stray);
        await this.app.vault.adapter.remove(vaultPath);
      }
      const oldFile = this.app.vault.getAbstractFileByPath(oldVault);
      if (oldFile instanceof import_obsidian9.TFile) {
        await this.app.vault.rename(oldFile, vaultPath);
        const newContent = await this.app.vault.adapter.read(vaultPath);
        await this.fileCacheManager.updateCache(vaultPath, newContent, githubPath);
        return;
      }
    }
    const fileExists = await this.app.vault.adapter.exists(vaultPath);
    if (force && fileExists) {
      const current = await this.app.vault.adapter.read(vaultPath);
      await this.backupFile(vaultPath, current);
    }
    if (!force && fileExists && await this.fileCacheManager.isUpToDate(vaultPath)) {
      return;
    }
    const apiUrl = encodeURI(
      `https://api.github.com/repos/slamwise0001/VVunderlore-Toolkit-Full/contents/${githubPath}?ref=main`
    );
    try {
      let res = await fetch(apiUrl);
      if (res.status === 404) {
        const rawUrl = encodeURI(
          `https://raw.githubusercontent.com/slamwise0001/VVunderlore-Toolkit-Full/main/${githubPath}`
        );
        res = await fetch(rawUrl);
        if (!res.ok) throw new Error(`Raw fetch failed: ${res.statusText}`);
        const content2 = await res.text();
        if (fileExists) {
          await this.app.vault.adapter.write(vaultPath, content2);
        } else {
          await this.app.vault.create(vaultPath, content2);
        }
        await this.fileCacheManager.updateCache(vaultPath, content2, githubPath);
        return;
      }
      if (!res.ok) throw new Error(`GitHub API error: ${res.statusText}`);
      const { download_url } = await res.json();
      const content = await (await fetch(download_url)).text();
      if (fileExists) {
        await this.app.vault.adapter.write(vaultPath, content);
      } else {
        await this.app.vault.create(vaultPath, content);
      }
      await this.fileCacheManager.updateCache(vaultPath, content, githubPath);
    } catch (e) {
      console.error(`\u274C Failed to update ${vaultPath}`, e);
    }
  }
  // ─── PREVIEW + REMOTE-BASELINE + DIFF ─────────────────────────────────
  async previewUpdatesModal() {
    const loading = new class extends import_obsidian9.Modal {
      constructor(app) {
        super(app);
      }
      onOpen() {
        this.contentEl.empty();
        this.contentEl.createDiv({
          text: "\u{1F504} Checking for updates\u2026",
          cls: "mod-warning"
        }).addEventListener("click", (e) => e.stopPropagation());
      }
    }(this.app);
    loading.open();
    await this.syncManifest();
    await this.fetchRemoteBaseline();
    const diffs = await this.buildUpdatePreview();
    loading.close();
    const denyListedLines = [];
    const normalLines = [];
    for (const d of diffs) {
      if (d.startsWith("\u274C deny\u2010listed")) {
        denyListedLines.push(d);
      } else {
        normalLines.push(d);
      }
    }
    const modal = new class extends import_obsidian9.Modal {
      constructor(app, normal, denied) {
        super(app);
        this.normal = normal;
        this.denied = denied;
      }
      onOpen() {
        this.contentEl.empty();
        this.titleEl.setText("Update Preview");
        this.contentEl.createEl("p", {
          text: "Only files whose contents differ from GitHub will be updated:"
        });
        if (this.normal.length) {
          const ul = this.contentEl.createEl("ul");
          this.normal.forEach((line) => {
            const li = ul.createEl("li", { text: line });
          });
        } else {
          this.contentEl.createEl("div", {
            text: "\u2705 Everything is already up to date!",
            cls: "mod-info"
          });
        }
        if (this.denied.length) {
          const denyDetails = this.contentEl.createEl("details", { cls: "vk-section" });
          denyDetails.open = false;
          const summary = denyDetails.createEl("summary", { cls: "vk-section-header" });
          Object.assign(summary.style, {
            cursor: "pointer",
            display: "flex",
            color: "var(--text-faint)",
            alignItems: "center",
            gap: "0.5em"
          });
          summary.createEl("span", { text: `Deny\u2010List Files (${this.denied.length})` });
          const toggleIcon = summary.createEl("span", { text: "VV", cls: "vk-toggle-icon" });
          Object.assign(toggleIcon.style, {
            fontWeight: "bold",
            display: "inline-block",
            transition: "transform 0.2s ease",
            transformOrigin: "50% 50%",
            userSelect: "none",
            transform: "rotate(180deg)"
          });
          denyDetails.ontoggle = () => {
            toggleIcon.toggleClass("vv-rotated", !denyDetails.open);
          };
          const denyBody = denyDetails.createDiv({ cls: "vk-section-body" });
          denyBody.addClass("denylist");
          const denyUl = denyBody.createEl("ul");
          this.denied.forEach((line) => {
            const li = denyUl.createEl("li", { text: line });
            li.addClass("forceupdate-note-c");
          });
        }
        const buttonRow = this.contentEl.createEl("div");
        Object.assign(buttonRow.style, {
          display: "flex",
          justifyContent: "flex-end",
          marginTop: "1.25em"
          // tweak spacing as you like
        });
        const confirmBtn = buttonRow.createEl("button", {
          text: "Confirm & Update",
          cls: "mod-cta"
        });
        confirmBtn.onclick = async () => {
          await this.plugin.updateSelectedToolkitContent();
          this.close();
        };
        const cancelBtn = buttonRow.createEl("button", { text: "Cancel" });
        cancelBtn.onclick = () => this.close();
      }
      onClose() {
        this.contentEl.empty();
      }
    }(this.app, normalLines, denyListedLines);
    modal.plugin = this;
    modal.open();
  }
  async buildUpdatePreview() {
    const changes = [];
    const denyListedFolders = this.settings.customPaths.filter((c) => c.doUpdate === false).map((c) => c.manifestKey);
    for (const f of this.manifestCache.files) {
      if (f.optional) {
        continue;
      }
      const custom = this.settings.customPaths.find((c) => c.manifestKey === f.path);
      const isInDenyFolder = denyListedFolders.some(
        (folder) => f.path.startsWith(folder + "/")
      );
      if (custom?.doUpdate === false || isInDenyFolder) {
        const vp = custom?.vaultPath ?? this.resolveVaultPath(f.path);
        const exists = await this.app.vault.adapter.exists(vp);
        const upToDate = exists && await this.fileCacheManager.isUpToDate(vp);
        if (!exists || !upToDate) {
          changes.push(`\u274C deny\u2010listed \u2013 will not update: ${vp}`);
        }
      }
    }
    if (!this.settings.customizeUpdates) {
      for (const f of this.manifestCache.files) {
        if (f.optional) {
          continue;
        }
        const custom = this.settings.customPaths.find((c) => c.manifestKey === f.path);
        const isInDenyFolder = denyListedFolders.some(
          (folder) => f.path.startsWith(folder + "/")
        );
        if (custom?.doUpdate === false || isInDenyFolder) {
          continue;
        }
        const vp = this.resolveVaultPath(f.path);
        let tag = "";
        if (vp !== f.path) tag = " (remapped)";
        const exists = await this.app.vault.adapter.exists(vp);
        const upToDate = exists && await this.fileCacheManager.isUpToDate(vp);
        if (!exists) {
          changes.push(`\u{1F4C4} New file: ${vp}${tag}`);
        } else if (!upToDate) {
          changes.push(`\u{1F501} Will update: ${vp}${tag}`);
        }
      }
      for (const fld of this.manifestCache.folders) {
        if (fld.optional) {
          continue;
        }
        const isDenyFolder = denyListedFolders.includes(fld.path);
        const exists = await this.app.vault.adapter.exists(fld.path);
        if (!exists && !isDenyFolder) {
          changes.push(`\u{1F4C1} New folder: ${fld.path}`);
        }
      }
      return changes.length ? changes : ["\u2705 Everything is already up to date!"];
    }
    for (const f of this.manifestCache.files) {
      if (f.optional) {
        continue;
      }
      const custom = this.settings.customPaths.find((c) => c.manifestKey === f.path);
      const isInDenyFolder = denyListedFolders.some(
        (folder) => f.path.startsWith(folder + "/")
      );
      if (custom?.doUpdate === false || isInDenyFolder) {
        continue;
      }
      const vp = custom?.vaultPath ?? this.resolveVaultPath(f.path);
      let tag = "";
      if (vp !== f.path) tag = " (remapped)";
      const exists = await this.app.vault.adapter.exists(vp);
      const upToDate = exists && await this.fileCacheManager.isUpToDate(vp);
      if (!exists) {
        changes.push(`\u{1F4C4} New file: ${vp}${tag}`);
      } else if (!upToDate) {
        changes.push(`\u{1F501} Will update: ${vp}${tag}`);
      }
    }
    for (const fld of this.manifestCache.folders) {
      if (fld.optional) {
        continue;
      }
      const isDenyFolder = denyListedFolders.includes(fld.path);
      const exists = await this.app.vault.adapter.exists(fld.path);
      if (!exists && !isDenyFolder) {
        changes.push(`\u{1F4C1} New folder: ${fld.path}`);
      }
    }
    for (const f of this.manifestCache.files) {
      if (f.optional) {
        continue;
      }
      const manifestKey = f.key;
      const manifestPath = f.path;
      const custom = this.settings.customPaths.find((c) => c.manifestKey === manifestKey);
      const prevPath = this.oldPathsByGithub[manifestPath];
      const isInDenyFolder = denyListedFolders.some(
        (folder) => manifestPath.startsWith(folder + "/")
      );
      if (custom?.doUpdate === false || isInDenyFolder) {
        continue;
      }
      if (custom && custom.vaultPath && custom.vaultPath !== manifestPath) {
        continue;
      }
      if (prevPath && prevPath !== manifestPath && (!custom || custom.vaultPath === manifestPath)) {
        changes.push(`\u27A1\uFE0F Moved: ${prevPath} \u2192 ${manifestPath}`);
      }
    }
    return changes.length ? changes : ["\u2705 Everything is already up to date!"];
  }
  // ─── VERSION-CHECK / UPDATE FLOW ─────────────────────────────────────
  async checkForUpdates() {
    const isNewerVersion = (remote, local) => {
      const pa = remote.replace(/^v/, "").split(".").map((n) => parseInt(n, 10) || 0);
      const pb = local.replace(/^v/, "").split(".").map((n) => parseInt(n, 10) || 0);
      for (let i = 0; i < Math.max(pa.length, pb.length); i++) {
        if ((pa[i] || 0) > (pb[i] || 0)) return true;
        if ((pa[i] || 0) < (pb[i] || 0)) return false;
      }
      return false;
    };
    const toolkitPath = ".version.json";
    const toolkitUrl = "https://raw.githubusercontent.com/slamwise0001/vvunderlore-toolkit-full/main/.version.json";
    const pluginUrl = "https://raw.githubusercontent.com/slamwise0001/vvunderlore-toolkit-plugin/main/version.json";
    const changelogUrl = "https://raw.githubusercontent.com/slamwise0001/VVunderlore-Toolkit-Full/main/README.md";
    let localTK = "0.0.0";
    if (this.settings.isFirstRun !== "yes") {
      try {
        const content = await this.app.vault.adapter.read(toolkitPath);
        const json = JSON.parse(content);
        localTK = json.version || localTK;
      } catch (err) {
        console.error("\u274C Failed to read local toolkit version:", err);
      }
    }
    let remoteTK = "0.0.0";
    try {
      const res = await fetch(toolkitUrl);
      const data = await res.json();
      remoteTK = data.version || remoteTK;
      this.settings.latestToolkitVersion = remoteTK;
      if (data.defaultPaths) {
        this.settings.latestDefaults = data.defaultPaths;
      }
      this.settings.lastChecked = (/* @__PURE__ */ new Date()).toISOString();
      await this.saveSettings();
    } catch (err) {
      console.error("\u274C Failed to fetch remote toolkit version:", err);
    }
    if (isNewerVersion(remoteTK, localTK)) {
      new import_obsidian9.Notice(`\u26A0\uFE0F Toolkit update available! Latest: v${remoteTK}`);
      await this.fetchRemoteBaseline();
    }
    const localPL = this.manifest.version;
    let remotePL = localPL;
    try {
      const res = await fetch(pluginUrl);
      const data = await res.json();
      remotePL = data.version || remotePL;
    } catch (err) {
    }
    if (isNewerVersion(remotePL, localPL)) {
      new import_obsidian9.Notice(`\u2699\uFE0F Plugin update available! Latest: v${remotePL}`);
    }
    try {
      const changelogRes = await fetch(changelogUrl);
      this.changelog = await changelogRes.text();
    } catch (err) {
      console.error("\u274C Failed to fetch changelog:", err);
    }
  }
  async loadSettings() {
    const raw = await this.loadData();
    const cleaned = raw ?? {};
    if (cleaned.needsInstall != null) {
      delete cleaned.needsInstall;
    }
    this.settings = Object.assign({}, DEFAULT_SETTINGS, cleaned);
    this.isFirstRun = !await this.app.vault.adapter.exists(".vvunderlore_installed");
    this.fileCacheManager = new ToolkitFileCacheManager(
      this.app.vault,
      cleaned.fileCache ?? {},
      async () => await this.saveSettings()
    );
    await this.saveSettings();
    if (typeof this.settings.rulesetCompendium !== "string") {
      this.settings.rulesetCompendium = "";
    }
    if (!Array.isArray(this.settings.rulesetReference)) {
      this.settings.rulesetReference = [];
    }
  }
  async saveSettings() {
    await this.saveData({
      ...this.settings,
      fileCache: this.fileCacheManager.getCache()
    });
  }
  async getLocalToolkitVersion() {
    try {
      const content = await this.app.vault.adapter.read(".version.json");
      const json = JSON.parse(content);
      return json.version || null;
    } catch (err) {
      console.error("\u274C Failed to read .version.json:", err);
      return null;
    }
  }
  async updateFullToolkitRepo() {
    const excluded = [
      this.app.vault.configDir,
      ".gitignore",
      ".gitattributes",
      ".DS_Store",
      "plugins",
      "Compendium",
      "README.md",
      ".version.json",
      ".github"
    ];
    const fetchRepoRoot = async () => {
      const apiUrl = "https://api.github.com/repos/slamwise0001/VVunderlore-Toolkit-Full/contents/";
      const response = await fetch(apiUrl);
      if (!response.ok) throw new Error(`Failed to fetch repo root`);
      return await response.json();
    };
    try {
      const contents = await fetchRepoRoot();
      const filtered = contents.filter(
        (item) => !excluded.some(
          (ex) => item.path === ex || item.path.startsWith(`${ex}/`)
        )
      );
      filtered.sort((a, b) => a.type === b.type ? 0 : a.type === "tree" ? -1 : 1);
      for (const item of filtered) {
        if (item.type === "dir") {
          await this.updateFolderFromGitHub(item.path, item.path);
        }
        if (item.type === "file") {
          const response = await fetch(item.download_url);
          const content = await response.text();
          const filePath = item.path;
          const exists = await this.app.vault.adapter.exists(filePath);
          if (!exists) {
            await this.app.vault.create(filePath, content);
          } else {
            const current = await this.app.vault.adapter.read(filePath);
            if (current !== content) {
              await this.app.vault.adapter.write(filePath, content);
            }
          }
          await this.fileCacheManager.updateCache(filePath, content, item.path, false);
        }
      }
      await this.saveSettings();
      const markerPath = ".vvunderlore_installed";
      if (!await this.app.vault.adapter.exists(markerPath)) {
        await this.app.vault.create(markerPath, "");
      }
      if (this.settings.highlightEnabled) {
        this.enableHighlight();
      }
      new import_obsidian9.Notice("\u2705 VVunderlore Toolkit successfully installed!");
    } catch (err) {
      console.error("\u274C updateFullToolkitRepo() error:", err);
      new import_obsidian9.Notice("\u274C Failed to update toolkit. See console for details.");
    }
  }
  async updateSelectedToolkitContent() {
    if (this.settings.autoBackupBeforeUpdate) {
      const folder = await this.backupManager.backupVaultMirror("pre-update");
      new import_obsidian9.Notice(`Vault mirror backup created at: ${folder}`);
    }
    if (!this.settings.latestDefaults) {
      new import_obsidian9.Notice("\u274C GitHub defaults not loaded yet.");
      return;
    }
    const allManifestFiles = this.manifestCache.files.map((f) => f.path);
    const fileOverrides = Object.fromEntries(
      this.settings.customPaths.map((c) => [c.manifestKey, c])
    );
    try {
      for (const ghPath of allManifestFiles) {
        const override = fileOverrides[ghPath];
        if (override?.doUpdate === false) {
          continue;
        }
        const vaultPath = this.settings.customizeUpdates ? this.resolveVaultPath(ghPath) : ghPath;
        const entry = this.manifestCache.files.find((f) => f.path === ghPath);
        if (!entry) continue;
        await this.updateEntryFromManifest(entry, false);
      }
      for (const folder of this.manifestCache.folders) {
        if (!await this.app.vault.adapter.exists(folder.path)) {
          await this.app.vault.createFolder(folder.path);
        }
      }
      await this.updateVersionFile();
      this.settings.installedVersion = this.settings.latestToolkitVersion;
      await this.saveSettings();
      new import_obsidian9.Notice("\u2705 Toolkit content updated.");
      if (this.settingsTab) {
        await this.settingsTab.updateVersionDisplay();
      }
    } catch (err) {
      console.error("\u274C CUstom update failed. Version not updated.", err);
      new import_obsidian9.Notice("\u274C Update failed. See console for details.");
    }
    if (this.settings.highlightEnabled) {
      this.enableHighlight();
    }
  }
  async updateFolderFromGitHub(githubFolderPath, vaultFolderPath) {
    const excluded = [
      this.app.vault.configDir,
      ".gitignore",
      ".gitattributes",
      ".DS_Store",
      "plugins",
      "Compendium",
      "README.md",
      ".version.json",
      ".github"
    ];
    if (excluded.some((ex) => githubFolderPath === ex || githubFolderPath.startsWith(`${ex}/`))) {
      return;
    }
    const apiUrl = `https://api.github.com/repos/slamwise0001/VVunderlore-Toolkit-Full/contents/${githubFolderPath}`;
    try {
      const response = await fetch(apiUrl);
      if (!response.ok) throw new Error(`Failed to fetch folder: ${githubFolderPath}`);
      const files = await response.json();
      if (!await this.app.vault.adapter.exists(vaultFolderPath)) {
        await this.app.vault.createFolder(vaultFolderPath);
      }
      for (const file of files) {
        if (excluded.some((ex) => file.path === ex || file.path.startsWith(`${ex}/`))) {
          continue;
        }
        const filePath = `${vaultFolderPath}/${file.name}`;
        if (file.type === "file") {
          const fileResponse = await fetch(file.download_url);
          const content = await fileResponse.text();
          const exists = await this.app.vault.adapter.exists(filePath);
          if (exists) {
            const current = await this.app.vault.adapter.read(filePath);
            if (current !== content) {
              await this.backupFile(filePath, current);
            }
          }
          if (!exists) {
            await this.app.vault.create(filePath, content);
          } else {
            if (await this.app.vault.adapter.read(filePath) !== content) {
              await this.app.vault.adapter.write(filePath, content);
            }
          }
          await this.fileCacheManager.updateCache(filePath, content, file.path, false);
        } else if (file.type === "dir") {
          await this.updateFolderFromGitHub(file.path, `${vaultFolderPath}/${file.name}`);
        }
      }
      await this.saveSettings();
      new import_obsidian9.Notice(`\u2705 Folder synced: ${vaultFolderPath}`);
    } catch (error) {
      console.error(`\u274C Failed to sync folder with m-repo: ${vaultFolderPath}`, error);
      new import_obsidian9.Notice(`\u274C Failed to update folder: ${vaultFolderPath}`);
    }
  }
  async rebuildFileCache() {
    const cache = this.fileCacheManager;
    const tasks = [];
    for (const entry of this.manifestCache.files) {
      const vaultPath = this.resolveVaultPath(entry.path);
      if (await this.app.vault.adapter.exists(vaultPath)) {
        tasks.push((async () => {
          const content = await this.app.vault.adapter.read(vaultPath);
          await cache.updateCache(vaultPath, content, entry.path, false);
        })());
      }
    }
    for (const folderEntry of this.manifestCache.folders) {
      const folderPath = folderEntry.path;
      const folder = this.app.vault.getAbstractFileByPath(folderPath);
      if (folder instanceof import_obsidian9.TFolder) {
        import_obsidian9.Vault.recurseChildren(folder, (file) => {
          if (file instanceof import_obsidian9.TFile && file.extension === "md") {
            const filePath = file.path;
            tasks.push((async () => {
              const content = await this.app.vault.adapter.read(filePath);
              await cache.updateCache(filePath, content, filePath, false);
            })());
          }
        });
      }
    }
    const batchSize = 10;
    for (let i = 0; i < tasks.length; i += batchSize) {
      await Promise.all(tasks.slice(i, i + batchSize));
    }
    await this.saveSettings();
  }
  async showIndexingModal() {
    const modal = new class extends import_obsidian9.Modal {
      constructor(app) {
        super(app);
      }
      onOpen() {
        this.contentEl.addEventListener("click", (e) => e.stopPropagation());
        this.titleEl.setText("\u{1F504} Indexing Toolkit Files...");
        this.contentEl.createEl("p", {
          text: "Indexing and caching your VVunderlore Vault for faster updates and safer syncing."
        });
      }
    }(this.app);
    modal.open();
    await this.rebuildFileCache();
    modal.close();
    new import_obsidian9.Notice("\u2705 VVunderlore caching complete.");
  }
  async updateVersionFile() {
    if (!this.settings.latestToolkitVersion) {
      return;
    }
    const versionPath = ".version.json";
    const content = JSON.stringify({ version: this.settings.latestToolkitVersion }, null, 2);
    const exists = await this.app.vault.adapter.exists(versionPath);
    if (exists) {
      await this.app.vault.adapter.write(versionPath, content);
    } else {
      await this.app.vault.create(versionPath, content);
    }
  }
  /** main.ts **/
  /** 
   * Install the selected compendium and zero or more reference editions.
   */
  async installFullToolkit(opts = { compendium: "", references: [] }) {
    const { compendium, references } = opts;
    if (!compendium) {
      throw new Error("No compendium edition selected");
    }
    let installSucceeded = false;
    try {
      const treeApi = "https://api.github.com/repos/slamwise0001/VVunderlore-Toolkit-Full/git/trees/main?recursive=1";
      const resp = await fetch(treeApi);
      if (!resp.ok) {
        throw new Error(`Failed to list repo tree: ${resp.statusText}`);
      }
      const json = await resp.json();
      const items = Array.isArray(json.tree) ? json.tree : [];
      const staticEntries = items.filter(
        (item) => !this.excludedPaths.some(
          (ex) => item.path === ex || item.path.startsWith(`${ex}/`)
        )
      ).sort((a, b) => a.type === b.type ? 0 : a.type === "tree" ? -1 : 1);
      for (const entry of staticEntries) {
        if (entry.type === "tree") {
          if (!await this.app.vault.adapter.exists(entry.path)) {
            await this.app.vault.createFolder(entry.path);
          }
        } else {
          const rawUrl = `https://raw.githubusercontent.com/slamwise0001/VVunderlore-Toolkit-Full/main/${encodeURIComponent(entry.path)}`;
          const fileResp = await fetch(rawUrl);
          if (!fileResp.ok) continue;
          const text = await fileResp.text();
          if (await this.app.vault.adapter.exists(entry.path)) {
            const old = await this.app.vault.adapter.read(entry.path);
            if (old !== text) {
              await this.app.vault.adapter.write(entry.path, text);
            }
          } else {
            await this.app.vault.create(entry.path, text);
          }
        }
      }
      this.settings.rulesetCompendium = compendium;
      const pickedRefs = references.length > 0 ? references : this.settings.rulesetReference;
      this.settings.rulesetReference = pickedRefs;
      await this.saveSettings();
      const jobs = [
        importRulesetData({ app: this.app, editionKey: compendium, targetPath: "Compendium" }),
        ...pickedRefs.map((refKey) => {
          const displayName = getRulesetDisplayName(refKey);
          return importRulesetData({
            app: this.app,
            editionKey: refKey,
            targetPath: `Resources/Rulesets/${displayName}`
          });
        })
      ];
      await Promise.all(jobs);
      const parseJobs = [
        importRulesetData({
          app: this.app,
          editionKey: compendium,
          targetPath: `Compendium`
        }),
        ...references.map((refKey) => {
          const displayName = getRulesetDisplayName(refKey);
          return importRulesetData({
            app: this.app,
            editionKey: refKey,
            targetPath: `Resources/Rulesets/${displayName}`
          });
        })
      ];
      await Promise.all(parseJobs);
      const marker = ".vvunderlore_installed";
      if (!await this.app.vault.adapter.exists(marker)) {
        await this.app.vault.create(marker, "");
      }
      this.settings.highlightEnabled = true;
      await this.saveSettings();
      this.enableHighlight();
      installSucceeded = true;
    } catch (err) {
      console.error("\u274C installFullToolkit()", err);
    } finally {
      if (this.settingsTab) this.settingsTab.display();
      new import_obsidian9.Notice(
        installSucceeded ? "\u2705 VVunderlore Toolkit successfully installed!" : "\u274C Failed to install toolkit. See console for details."
      );
    }
  }
  // * Re-parse all gameset data (ruleset compendium + reference sets)
  async refreshGameSetData() {
    const { rulesetCompendium, rulesetReference } = this.settings;
    if (!rulesetCompendium && rulesetReference.length === 0) {
      new import_obsidian9.Notice("\u26A0\uFE0F No gameset keys set; nothing to refresh.");
      return;
    }
    const jobs = [];
    if (rulesetCompendium) {
      jobs.push(importRulesetData({
        app: this.app,
        editionKey: rulesetCompendium,
        targetPath: "Compendium"
      }));
    }
    for (const ref of rulesetReference) {
      const displayName = getRulesetDisplayName(ref);
      jobs.push(importRulesetData({
        app: this.app,
        editionKey: ref,
        targetPath: `Resources/Rulesets/${displayName}`
      }));
    }
    await Promise.all(jobs);
    new import_obsidian9.Notice("\u2705 Game Set Data refreshed.");
  }
};
// Annotate the CommonJS export names for ESM import in node:
0 && (module.exports = {
  InstallingModal
});
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsic3JjL21haW4udHMiLCAic3JjL3NldHRpbmdzLnRzIiwgInNyYy9maXJzdGluc3RhbGxjb25maXJtLnRzIiwgInNyYy9lZGl0aW9ucy50cyIsICJzcmMvcGFyc2Vycy81ZS0yMDE0L2luc3RhbGxlci50cyIsICJzcmMvcGFyc2Vycy81ZS0yMDE0L2hlbHBlcnMvc291cmNlTWFwLnRzIiwgInNyYy9wYXJzZXJzLzVlLTIwMTQvaGVscGVycy90YWdSZXBsYWNlci50cyIsICJzcmMvcGFyc2Vycy81ZS0yMDE0L2hlbHBlcnMvbWFya2Rvd25UYWJsZS50cyIsICJzcmMvcGFyc2Vycy81ZS0yMDE0L2hlbHBlcnMvZm9ybWF0RW50cnkudHMiLCAic3JjL3BhcnNlcnMvNWUtMjAxNC9iZXN0aWFyeS50cyIsICJzcmMvcGFyc2Vycy81ZS0yMDE0L2l0ZW1zLnRzIiwgInNyYy9wYXJzZXJzLzVlLTIwMTQvaGVscGVycy9mcm9udG1hdHRlci50cyIsICJzcmMvcGFyc2Vycy81ZS0yMDE0L3NwZWxscy50cyIsICJzcmMvcGFyc2Vycy81ZS0yMDE0L3NwZWNpZXMudHMiLCAic3JjL3BhcnNlcnMvNWUtMjAxNC9jbGFzc2VzLnRzIiwgInNyYy9wYXJzZXJzLzVlLTIwMTQvcnVsZXMudHMiLCAic3JjL3BhcnNlcnMvNWUtMjAxNC9mZWF0cy50cyIsICJzcmMvcGFyc2Vycy81ZS0yMDE0L2JhY2tncm91bmRzLnRzIiwgInNyYy9wYXJzZXJzLzVlLTIwMjUvaW5zdGFsbGVyLnRzIiwgInNyYy9wYXJzZXJzLzVlLTIwMjUvaGVscGVycy9zb3VyY2VNYXAudHMiLCAic3JjL3BhcnNlcnMvNWUtMjAyNS9oZWxwZXJzL3RhZ1JlcGxhY2VyLnRzIiwgInNyYy9wYXJzZXJzLzVlLTIwMjUvaGVscGVycy9tYXJrZG93blRhYmxlLnRzIiwgInNyYy9wYXJzZXJzLzVlLTIwMjUvaGVscGVycy9mb3JtYXRFbnRyeS50cyIsICJzcmMvcGFyc2Vycy81ZS0yMDI1L2Jlc3RpYXJ5LnRzIiwgInNyYy9wYXJzZXJzLzVlLTIwMjUvaXRlbXMudHMiLCAic3JjL3BhcnNlcnMvNWUtMjAyNS9oZWxwZXJzL2Zyb250bWF0dGVyLnRzIiwgInNyYy9wYXJzZXJzLzVlLTIwMjUvc3BlbGxzLnRzIiwgInNyYy9wYXJzZXJzLzVlLTIwMjUvc3BlY2llcy50cyIsICJzcmMvcGFyc2Vycy81ZS0yMDI1L2NsYXNzZXMudHMiLCAic3JjL3BhcnNlcnMvNWUtMjAyNS9ydWxlcy50cyIsICJzcmMvcGFyc2Vycy81ZS0yMDI1L2ZlYXRzLnRzIiwgInNyYy9wYXJzZXJzLzVlLTIwMjUvYmFja2dyb3VuZHMudHMiLCAic3JjL3J1bGVzZXRJbnN0YWxsZXIudHMiLCAic3JjL2N1c3RvbUluc3RhbGxNb2RhbC50cyIsICJzcmMvZmlsZUNhY2hlTWFuYWdlci50cyIsICJzcmMvYmFja3VwL0JhY2t1cE1hbmFnZXIudHMiXSwKICAic291cmNlc0NvbnRlbnQiOiBbImltcG9ydCB7XG4gIEFwcCxcbiAgUGx1Z2luLFxuICBOb3RpY2UsXG4gIE1vZGFsLFxuICBTZXR0aW5nLFxuICBURm9sZGVyLFxuICBURmlsZSxcbiAgVmF1bHQsXG4gIHJlcXVlc3RVcmxcbn0gZnJvbSAnb2JzaWRpYW4nOyBcbiBcbmltcG9ydCB7IFRvb2xraXRTZXR0aW5nc1RhYiB9IGZyb20gJy4vc2V0dGluZ3MnO1xuaW1wb3J0IHsgVG9vbGtpdEZpbGVDYWNoZU1hbmFnZXIgfSBmcm9tICcuL2ZpbGVDYWNoZU1hbmFnZXInO1xuaW1wb3J0IHR5cGUgeyBUb29sa2l0RmlsZUNhY2hlRW50cnkgfSBmcm9tICcuL2ZpbGVDYWNoZU1hbmFnZXInO1xuaW1wb3J0IHsgQmFja3VwTWFuYWdlciB9IGZyb20gJy4vYmFja3VwL0JhY2t1cE1hbmFnZXInO1xuaW1wb3J0IHsgc2hvd0N1c3RvbUluc3RhbGxNb2RhbCB9IGZyb20gJy4vY3VzdG9tSW5zdGFsbE1vZGFsJztcbmltcG9ydCB7IEFWQUlMQUJMRV9FRElUSU9OUyB9IGZyb20gJy4vZWRpdGlvbnMnO1xuaW1wb3J0IHsgaW1wb3J0UnVsZXNldERhdGEgfSBmcm9tICcuL3J1bGVzZXRJbnN0YWxsZXInO1xuaW1wb3J0IHsgQ29uZmlybUZyZXNoSW5zdGFsbE1vZGFsIH0gZnJvbSAnLi9maXJzdGluc3RhbGxjb25maXJtJztcbmltcG9ydCBcIi4uL3N0eWxlcy5jc3NcIjtcblxuZnVuY3Rpb24gZ2V0UnVsZXNldERpc3BsYXlOYW1lKGtleTogc3RyaW5nKTogc3RyaW5nIHtcbiBjb25zdCBlZCA9IEFWQUlMQUJMRV9FRElUSU9OUy5maW5kKGUgPT4gZS5pZCA9PT0ga2V5KTtcbiByZXR1cm4gZWQ/LmxhYmVsID8/IGtleTtcbn1cblxuY29uc3QgbG9hZGluZ0ljb24gPSBcbidkYXRhOmltYWdlL3BuZztiYXNlNjQsJyArXG4naVZCT1J3MEtHZ29BQUFBTlNVaEVVZ0FBQU5FQUFBRFJDQVlBQUFCU09sZnZBQUFBQ1hCSVdYTUFBQmNSQUFBWEVRSEtKdk0vQUFBTDVrbEVRVlI0bk8zZFQ2d2RaUm5IOFY5aHlndUZZbHRLU2dYeEZBaG9RcVVVUWlCR3VCZ3hFVEc2cVVGY3RCcE4zTmJFdURDUjI4VDRKeTVBalFrTEUwdDBvU1pHZE9YQzJJTktNQnJOM1lBTEd6a1FJRXFVWHJGQ1g1d1dGMmRNak03em5ONzNtWmw3enUzM2s1ek5QSmwzM252UC9mVk1udlAyblUzQy82bFNPaVRwWU1mREhxNXpYdWw0VE15QmFyMG5NS2RHa3BZNkhuTmJ4K05oVHB5MzNoTUFGaDBoQW9JSUVSQkVpSUFnUWdRRTBaMWJ1Nk9TSGpWcUJ5VWRNbW9QVlNtdDlqR2hOblhPZHc5MXJYTWRJVnE3Wit1Y3gyMkZLcVVsNTd4OXZjd0c2NDdiT1NDSUVBRkJoQWdJSWtSQUVDRUNndWpPRGVld3BKSlYzTGRJMm03VURraTZxcTFRcFhTczRGcTB4Z3NRb3VHc1dLMXhUNVZTSldtWFVmNkhwTk5HYldtdDEwSVpidWVBSUVJRUJCRWlJSWdRQVVHRUNBaWlPOWVoT3VkbFNjc2REL3M1bFhYYXJKWG1rdlFIcTFDbDlFYkJ0Y2JuY211Y1R5SWdpQkFCUVlRSUNDSkVRQkFoQW9JSUVSQzBhYjBuc0dpcWxKWWxQZGp4c1BkSWV0eW8xWFhPclczblpxWDJrbkhlVzV6cmZkT3B2ZE9wUFd3YzN5UHA0MFp0dzdlLytTUUNnZ2dSRUVTSWdDQkNCQVFSSWlDSUVBRkJHN3JGM1d6clc3Umh4eHk1dTJSdkJrK1YwblZXcmM3NXVIUGVBYXNrYVl0UnUwSFNaNHphaG1oLzgwa0VCQkVpSUlnUUFVR0VDQWdpUkVEUVF1eXhVS1cwVFdVUHlScEpHbmM2bVg0Nm1qZEoybWJVOWxVcFdlZXQxRG1YUEgzdnRZSnpwT21PcTIwdWtuU1pVWHRWOW5zd2NSNk10bHJuWExMdDh1QVdvc1VkYUZWMzNrS3RVanBQOXUvTiszMmVrV1J0QW5KTTBsMEYwK204L2UycFVob1pwZDJTN2pOcXo5UTVmOHNZYjBuMis3b3c3Vzl1NTRBZ1FnUUVFU0lnaUJBQlFZUUlDSnFiRnZlTU52WklaYTFxczBYYWRKcEdCV051a3QrRnMycG5uSFBlNU5SV0pGbHQ3SkwydHFxVTN1YVVUem0xUzR6am01MjVuSFRHVzFWWiszdFM1enh4eGgzVTNMUzRoMjUzOXJUaFNCLzZXTVg5YmFmOG5GUDduWEg4aktUWGpkcUpPdWZmbnRYRS9zdU12NGNqemI3bmM0SGJPU0NJRUFGQmhBZ0lJa1JBRUNFQ2dnWnZjVHR0eTVIc2RxZlhxaTVkNFMzbmVwNlJ5bHJqSHErTm5hcVVyalpxSnlYVmJZVTY1MWVjNjNudis4aXBXVnNkbjlaMHRYWWJieDRlci8zdC9SME4zdjRldk1YdFBNNndxSTBkV09GZDFDYnRxVFZ1dHJHcmxENHF5UXFSR2I0NjV5ZXRpMVVwUGViTTVZTk9iV1FjUDFYbi9CZm52RTdOZUE4R2IzOXpPd2NFRVNJZ2lCQUJRWVFJQ0NKRVFGQXZMVzZuL1NoMTM4WWVPV042SmdYbi9PYzg2M29qMlIyczB0WFl1eVZkWTlUT3lGZ2xYU1Y3ZHhOSk81M2FFMDd0ZHVQNFM1SUc2ODdObTc2K0p6SmJ6blhPSlczMWZjNllnMjVvVWVkOFZOTFJ0dHFNMXV2aHd0WFk3NWY5U01rK1dMdjJTTkxmak9OakxmNmU1OFc0blFPQ0NCRVFSSWlBSUVJRUJCRWlJS2lYQmFqT0lsT3pPMWVsdEZYVHA2cTF1VVhTSTBadGJyYWJiVnI3MWx6TTM4bFpzTjZueUppV3J6aTF6eGFNTjJrNm1tdlN0T2d2TjhyN205ZGFqZnZZZG5sdWR2dVJ0RlhTclVidCtpRW5FdkM0cEY4WXRaK3JiTC90ZDh2K0x3aHYxRG4zRVNUTGN0dkJXWnZNeVBoS1lJWWs2U3FqOXZzNjU1OFljMW1XdjhwK1hEQVhGN2R6UUJBaEFvSUlFUkJFaUlBZ1FnUUVGWGZubWk2STVZaHpudFd1dlV6MjA5Wk9TdnFTVVh2R21jZDZzTHBsUjFXKzJ0d2FjOGpPbkdjaS96MWZ0czV6MnQ5WjB2Tkc3WklxSmF1VHU5dWFSMStLdnljcStTNm9PYytxTFduYUJtN3pLMG4zR3JYVGRjN1dUak5ZWjMzc3NkNEU2QmFqZkovc2Y0eDcyY1NFMnprZ2lCQUJRWVFJQ0NKRVFCQWhBb0xXWXdIcWtuSGMyMC9iZXhLYjl4aEhiRXd2U3pwdTFDYVNYakJxKzUxMis5SFNQYnpuS1VRajU1d3pkYzY1KzZsZ1FiMnM2U2I2Ylo2Vi9mM1Nma2tmTUdwakZlNEF4ZTBjRUVTSWdDQkNCQVFSSWlDSUVBRkJibmN1c0ZMN1J1YzhhNStCVldmTWlUTWV6ajJubk5yVGtuNW0xTzZVZEdYWGs1blY0alkzZkppeFV2dCtaMHdyUk9PaEh4T0l4VlRuZkVwR2tLcVVucGI5L05pckpMMnI2L2x3T3djRUVTSWdpQkFCUVlRSUNDSkVRRkJmQzFDdFBiVng3bG1SdlQvNXFFckoybjlocGM3NWNGdWhTdW1RcElQR2VSYzJyelpYV0pPTTZDdEVXM3NhRnd1bXpubFZ4aTVIelNZbVN3WERqZ3JQNndXM2MwQVFJUUtDQ0JFUVJJaUFJRUlFQlBYVm5idXpwM0VCeWQvWC9LYm0xV2FmcEp1TjJrTlZTcXRHN1hDZDg0bzFtYjVDdExPbmNRRTF1L0pNMm1yTkh2R1hHcWVPbkdHOTNhYTJlZlBoZGc0SUlrUkFFQ0VDZ2dnUkVFU0lnS0MrdW5NbmV4b1htT1dNN0MyRy8rU2NkN05tZE9Fc2ZZV283bWxjNEd4WWowTDlwNlNYakpyMXdJU1p1SjBEZ2dnUkVFU0lnQ0JDQkFRUklpQ29yKzZjdFkwcjBMZjlrajVwMURaTHVzQ29iUys5WUY4aHN2cjBRTisyUzlvejVBVzVuUU9DQ0JFUVJJaUFJRUlFQkJFaUlLaXY3dHdQblJxYm1LQlBYNWYwSGFOMnVlejlQNzRvYVcvSkJma2tBb0lJRVJCRWlJQWdRZ1FFRVNJZ2lCQUJRWDIxdUgvazFMNWdITCt0MlFLMnpiak8yWHBrSWVaWTh6UTg2NUdTNHpyblRSMWZjcXVrSzQzYXh5UWQ2dmg2ZkJJQlVZUUlDQ0pFUUJBaEFvSUlFUkJFaUlBZ3Q4WHR0UitkZHZTczgzNWdsSFpMdXRlb1hWQ2x0TXVvdlY3bmZNSzZIamFlS3FWbFNROTJQT3pkZGM3amtoUDVKQUtDQ0JFUVJJaUFJRUlFQkJFaUlJZ1FBVUY5cmVJMjFUbC9vblVpS1YwdDZRSGp0R3NrL2Rtb2pTV3h3bnNkOWJGU3UwcEprcXp6bnBMMGZhTzJVOUpsUnUySzV0VXBQb21BSUVJRUJCRWlJSWdRQVVHRUNBaUtkT2ZHNXFEVGJrMHJaNUZmbHZTY1VmdVhjNzJKYzczVk91Y1ZheTVZRytmM1BKTDkvcFQrL2krUXRNT29iWk4wa1ZIYkl1a1NaOHpPZGIxSmhLVHlGZDZGMTFxUzMxNmwvZDJSSVRlU2FWYnQzMk9VNzVCMHUxSGIzYnpXaWxYY3dIb2hSRUFRSVFLQ0NCRVFSSWlBb0w0V29QN1N2R0QzN2VoVmxiVy9QWk02NTBuQmVRdHZ4dTlyYkJ3MzM3Y3FwVzJTOWhWTVpidWt0eHUxM1pJdU5tcWJuVEVuemF2TjZsbk5xa1ZmTFc3ckI1U2trOGJ4UHRxa1M3TGIzNTRqZGM3TFhjNWxVWFQ5OVVUZ1BmQ2NsbFJibDVSMHZsSHI1WDNsZGc0SUlrUkFFQ0VDZ2dnUkVFU0lnS0MrV3R5bm5kcllPTzYxbzErVjlMeFJlNzNPK2E5R3pXdC91eGFoTlY2bHRFL1RGYzFkR25jODNpblpxL1BQMTNUVmRadEswNmZlV2F3UGdCY2t2V2pVckwraGtGNWEzQ1ZtdEVML0tPa2hvL1ppbmZPUE81N0xzc3IyZWg2ME5WNmxkRXpTVXBkajlyREtmbytrMXMxcE5BM0pEVVp0aDZSYkN5NzVOVWtQRzdYVk91Zmk3NE1zM000QlFZUUlDQ0pFUUJBaEFvSUlFUkEwK0RiQ2psY2svZHFwWFcvVWRsUXAvYjNnZWw0N2VxSmhXK09sSnVxK0pXMHEvTmwyeWQ2NjkyTFptNUY0N2UySjdOWFl4elZ0cTdleEZxMkd6Rk9MKzBKTmYrRnRicGYwdlk0djJYazd1cWZISUhxS045Y280YTN3ZG1SSjF2ZDRTZE85czlkcXJsYlpjenNIQkJFaUlJZ1FBVUdFQ0FnaVJFRFFQTFc0YTBsV3Evb3BTVWVNMmxzbEhUSnFMMHY2alZXclVyTGE1bnViVjV1eDB4R3pqdmRsVW5KUzAwVnNOYVByOVYzanVMZmxieVhwVXFObTdZVWdUWCsyUjQzYTJEbHZjSFBUNGk0MVkvWDNjVW5mTUdvbm1sZWJCeVI5eEtqTlZYdTFST2xtSkZWSzd6Vks3NUQwMWVpOC9zZkM3S1BPN1J3UVJJaUFJRUlFQkJFaUlJZ1FBVUh6MU9JdU5aSGQvdDRxNlgxRzdUWFpxMzF2TEpsSWxkSU8yYXVTNzVHOXdQWm95UVluVlVxSE5IM1VZNXRIMWpwZU0rYXlVN2E2ZXRZY1pwbklibU5QQ3NjYzNNS0hxUG5qVzI2ck5lM3ZUdzg0blIyU3JqVnFuOUswRmR4bXJMSS9tb095TnlwNXJHQTh5VitGL2xQanVQVVB4eXlUUmYrNlFPSjJEZ2dqUkVBUUlRS0NDQkVRUklpQW9JWHZ6czB3a2QzK2x1d0Z1SGMxcjlhYTB3YjI5aUN3VmpKTDBwWXFKYXYrSHRtdDhUYzdZM3A3ZEh2N1ZkenYxSzR6amwva25EUFJCbWhqZXhaK0ZYZXBLcVZOc24vK0J5Vjl2bURZNDgycnpXMnlXOEVmbHZTa1VmdXk3UCtXY2Ezc1o1ZCt5RGd1K1dIdmRGOXpMZEJxN0ZMY3pnRkJoQWdJSWtSQUVDRUNnZ2dSRUxUUlc5eXpXRjJxWTA3TnMxZjJJbE92RFh4QTBoM09tRmFMZTdNenB0ZXFMdVY5WFdDWmREMkplWFBPdHJqN3NBNTdjUStxNjBkUmJoVGN6Z0ZCaEFnSUlrUkFFQ0VDZ2dnUkVIU3V0N2k3Tmw3dkNXQjQvd1lSQmJuMTk4L3JwQUFBQUFCSlJVNUVya0pnZ2c9PSdcbiBcbmNsYXNzIEluc3RhbGxpbmdNb2RhbCBleHRlbmRzIE1vZGFsIHtcbiAgY29uc3RydWN0b3IoYXBwOiBBcHApIHsgc3VwZXIoYXBwKTsgfVxuICBvbk9wZW4oKSB7XG4gICAgdGhpcy5jb250ZW50RWwuZW1wdHkoKTtcbiAgICBjb25zdCBpbWcgPSB0aGlzLmNvbnRlbnRFbC5jcmVhdGVFbCgnaW1nJywge1xuICAgICAgYXR0cjogeyBzcmM6IGxvYWRpbmdJY29uLCBhbHQ6ICdJbnN0YWxsaW5nXHUyMDI2JyB9LFxuICAgIH0pO1xuICAgIE9iamVjdC5hc3NpZ24oaW1nLnN0eWxlLCB7XG4gICAgICBkaXNwbGF5OiAnYmxvY2snLFxuICAgICAgbWFyZ2luOiAnMWVtIGF1dG8gMC41ZW0nLFxuICAgICAgd2lkdGg6ICcxMDBweCcsXG4gICAgICBoZWlnaHQ6ICcxMDBweCcsXG4gICAgfSk7XG4gICAgaW1nLmFuaW1hdGUoXG4gICAgICBbXG4gICAgICAgIHsgdHJhbnNmb3JtOiAncm90YXRlKDBkZWcpJyB9LFxuICAgICAgICB7IHRyYW5zZm9ybTogJ3JvdGF0ZSgtMzYwZGVnKScgfVxuICAgICAgXSxcbiAgICAgIHtcbiAgICAgICAgZHVyYXRpb246IDE1MDAsICAgICAgLy8gb25lIGFuZCBhIGhhbGYgc2Vjb25kcyBwZXIgcmV2b2x1dGlvblxuICAgICAgICBpdGVyYXRpb25zOiBJbmZpbml0eSxcbiAgICAgICAgZWFzaW5nOiAnbGluZWFyJ1xuICAgICAgfVxuICAgICk7XG4gICAgY29uc3QgdHh0ID0gdGhpcy5jb250ZW50RWwuY3JlYXRlRGl2KHsgdGV4dDogJ0luc3RhbGxpbmdcdTIwMjYnLCBjbHM6ICdtb2QtcXVpZXQnIH0pO1xuICAgIHR4dC5hZGRDbGFzcyhcImluc3RhbGxtb2RhbC10eHRcIik7XG4gIH1cbiAgb25DbG9zZSgpIHtcbiAgICB0aGlzLmNvbnRlbnRFbC5lbXB0eSgpO1xuICB9IFxufVxuXG5cbmludGVyZmFjZSBQcmV2aWV3SXRlbSB7XG4gIGZpbGVQYXRoOiBzdHJpbmc7XG4gIGFjdGlvbjogc3RyaW5nO1xuICBzZWxlY3RlZDogYm9vbGVhbjsgXG4gIGlzRm9sZGVyPzogYm9vbGVhbjtcbn1cblxuaW50ZXJmYWNlIFRvb2xraXRTZXR0aW5ncyB7XG4gIGluc3RhbGxlZFZlcnNpb246IHN0cmluZztcbiAgbGF0ZXN0VG9vbGtpdFZlcnNpb24/OiBzdHJpbmc7XG4gIGN1c3RvbWl6ZVVwZGF0ZXM6IGJvb2xlYW47XG4gIHVwZGF0ZVRhcmdldHM6IHtcbiAgICB0b29sczogYm9vbGVhbjtcbiAgICB0b29sc1BhdGg/OiBzdHJpbmc7XG4gICAgdGVtcGxhdGVzOiBib29sZWFuO1xuICAgIHRlbXBsYXRlc1BhdGg/OiBzdHJpbmc7XG4gICAgb21uaW5vbWljb246IGJvb2xlYW47XG4gICAgb21uaW5vbWljb25QYXRoPzogc3RyaW5nO1xuICAgIHNwZWxsYm9vazogYm9vbGVhbjtcbiAgICBzcGVsbGJvb2tQYXRoOiBzdHJpbmc7XG4gIH07XG4gIGxhdGVzdERlZmF1bHRzPzoge1xuICAgIHRvb2xzPzogc3RyaW5nO1xuICAgIHRlbXBsYXRlcz86IHN0cmluZztcbiAgICBvbW5pbm9taWNvbj86IHN0cmluZztcbiAgICBzcGVsbGJvb2s/OiBzdHJpbmc7XG4gIH07XG4gIGxhc3RDaGVja2VkPzogc3RyaW5nO1xuICBsYXN0Rm9yY2VVcGRhdGU/OiBzdHJpbmc7XG4gIGZpbGVDYWNoZT86IFJlY29yZDxzdHJpbmcsIFRvb2xraXRGaWxlQ2FjaGVFbnRyeT47XG4gIHBhdGhPdmVycmlkZXM/OiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+O1xuICBiYWNrdXBGaWxlcz86IFJlY29yZDxzdHJpbmcsIHN0cmluZz47XG4gIGJhY2t1cFBhdGg/OiBzdHJpbmc7XG4gIGF1dG9CYWNrdXA/OiBib29sZWFuO1xuICBsYXN0QmFja3VwVGltZT86IHN0cmluZztcbiAgYmFja3VwRXJyb3I/OiBzdHJpbmc7XG4gIGN1c3RvbVBhdGhzOiBDdXN0b21QYXRoRW50cnlbXTtcbiAgYXV0b0JhY2t1cEJlZm9yZVVwZGF0ZTogYm9vbGVhbjtcbiAgaGlnaGxpZ2h0RW5hYmxlZDogYm9vbGVhbjtcbiAgaGlnaGxpZ2h0Q29sb3JMaWdodDogc3RyaW5nO1xuICBoaWdobGlnaHRDb2xvckRhcms6IHN0cmluZztcbiAgcnVsZXNldENvbXBlbmRpdW06IHN0cmluZztcbiAgcnVsZXNldFJlZmVyZW5jZTogc3RyaW5nW107XG4gIHJlcGFyc2VHYW1lc2V0czogYm9vbGVhbjtcbiAgaXNGaXJzdFJ1bjogXCJ5ZXNcIiB8IFwibm9cIiB8IFwic2hvd25cIjtcbn1cblxuY29uc3QgREVGQVVMVF9TRVRUSU5HUzogVG9vbGtpdFNldHRpbmdzID0ge1xuICBpbnN0YWxsZWRWZXJzaW9uOiAnMS4wLjAnLFxuICBjdXN0b21pemVVcGRhdGVzOiBmYWxzZSxcbiAgdXBkYXRlVGFyZ2V0czoge1xuICAgIHRvb2xzOiB0cnVlLFxuICAgIHRvb2xzUGF0aDogJ1Rvb2xzJyxcbiAgICB0ZW1wbGF0ZXM6IHRydWUsXG4gICAgdGVtcGxhdGVzUGF0aDogJ0V4dHJhcy9UZW1wbGF0ZXMnLFxuICAgIG9tbmlub21pY29uOiB0cnVlLFxuICAgIG9tbmlub21pY29uUGF0aDogJ0FkdmVudHVyZXMvT21uaW5vbWljb24ubWQnLFxuICAgIHNwZWxsYm9vazogdHJ1ZSxcbiAgICBzcGVsbGJvb2tQYXRoOiAnQ29tcGVuZGl1bS9TcGVsbHMvX1NwZWxsYm9vay5tZCcsXG4gIH0sXG4gIGxhdGVzdERlZmF1bHRzOiB1bmRlZmluZWQsXG4gIHBhdGhPdmVycmlkZXM6IHt9LFxuICBiYWNrdXBGaWxlczoge30sXG4gIGJhY2t1cFBhdGg6ICcnLFxuICBhdXRvQmFja3VwOiBmYWxzZSxcbiAgbGFzdEJhY2t1cFRpbWU6ICcnLFxuICBiYWNrdXBFcnJvcjogJycsXG4gIGN1c3RvbVBhdGhzOiBbXSxcbiAgYXV0b0JhY2t1cEJlZm9yZVVwZGF0ZTogdHJ1ZSxcbiAgaGlnaGxpZ2h0RW5hYmxlZDogZmFsc2UsXG4gIGhpZ2hsaWdodENvbG9yTGlnaHQ6ICcjREZFN0UyJyxcbiAgaGlnaGxpZ2h0Q29sb3JEYXJrOiAnIzFGMjk0MycsXG4gIHJ1bGVzZXRDb21wZW5kaXVtOiBcIlwiLFxuICBydWxlc2V0UmVmZXJlbmNlOiBbXSxcbiAgcmVwYXJzZUdhbWVzZXRzOiB0cnVlLFxuICBpc0ZpcnN0UnVuOiBcInllc1wiXG59O1xuXG5pbnRlcmZhY2UgQ3VzdG9tUGF0aEVudHJ5IHtcbiAgdmF1bHRQYXRoOiBzdHJpbmc7XG4gIG1hbmlmZXN0S2V5OiBzdHJpbmc7XG4gIGRvVXBkYXRlOiBib29sZWFuO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIE1hbmlmZXN0RmlsZUVudHJ5IHtcbiAgcGF0aDogc3RyaW5nO1xuICBrZXk6IHN0cmluZztcbiAgY3VzdG9tT3ZlcnJpZGU/OiBib29sZWFuO1xuICBkaXNwbGF5TmFtZT86IHN0cmluZztcbiAgb3B0aW9uYWw/OiBib29sZWFuOyAvLyBcdTIxOTAgbWFyayBvcHRpb25hbCBmaWxlcy9mb2xkZXJzIGlmIHlvdSB3aXNoXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgSW5zdGFsbE9wdGlvbnMge1xuXHRjb21wZW5kaXVtOiBzdHJpbmc7XG5cdHJlZmVyZW5jZXM6IHN0cmluZ1tdO1xuICB9XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFZWdW5kZXJsb3JlVG9vbGtpdFBsdWdpbiBleHRlbmRzIFBsdWdpbiB7XG4gIHJlcXVpcmVzR3JhcGg6IE1hcDxzdHJpbmcsIHN0cmluZ1tdPjtcbiAgcHVibGljIHNldHRpbmdzVGFiOiBUb29sa2l0U2V0dGluZ3NUYWI7XG4gIHNldHRpbmdzOiBUb29sa2l0U2V0dGluZ3M7XG4gIGZpbGVDYWNoZU1hbmFnZXI6IFRvb2xraXRGaWxlQ2FjaGVNYW5hZ2VyO1xuICBtYW5pZmVzdENhY2hlOiB7XG4gICAgZmlsZXM6IE1hbmlmZXN0RmlsZUVudHJ5W107XG4gICAgZm9sZGVyczogTWFuaWZlc3RGaWxlRW50cnlbXTtcbiAgfSA9IHsgZmlsZXM6IFtdLCBmb2xkZXJzOiBbXSB9O1xuICBjaGFuZ2Vsb2c6IHN0cmluZyA9ICcnO1xuICBwcml2YXRlIGF1dG9DaGVja0ludGVydmFsOiBudW1iZXIgfCBudWxsID0gbnVsbDtcbiAgcHJpdmF0ZSBvbGRQYXRoc0J5R2l0aHViOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+ID0ge307XG4gIHByaXZhdGUgc3R5bGVFbDogSFRNTFN0eWxlRWxlbWVudCB8IG51bGwgPSBudWxsO1xuXG4gIGJhY2t1cE1hbmFnZXI6IEJhY2t1cE1hbmFnZXI7XG4gIGV4Y2x1ZGVkUGF0aHMgPSBbXG4gICAgJy5EU19TdG9yZScsXG4gICAgJy5naXRpZ25vcmUnLFxuICAgICcuZ2l0YXR0cmlidXRlcycsXG4gICAgJy5naXRodWInLFxuICAgICdSRUFETUUubWQnLFxuICAgICdDb21wZW5kaXVtJyxcbiAgICBgJHt0aGlzLmFwcC52YXVsdC5jb25maWdEaXJ9L3BsdWdpbnMvdnZ1bmRlcmxvcmUtdG9vbGtpdC1wbHVnaW4vbWFuaWZlc3QuanNvbmAsXG4gICAgYCR7dGhpcy5hcHAudmF1bHQuY29uZmlnRGlyfS9wbHVnaW5zL3Z2dW5kZXJsb3JlLXRvb2xraXQtcGx1Z2luL21haW4uanNgLFxuICAgIGAke3RoaXMuYXBwLnZhdWx0LmNvbmZpZ0Rpcn0vcGx1Z2lucy92dnVuZGVybG9yZS10b29sa2l0LXBsdWdpbi9zdHlsZXMuY3NzYFxuICBdO1xuXG4gIHByaXZhdGUgaXNGaXJzdFJ1bjogYm9vbGVhbiA9IGZhbHNlO1xuXG4gIHB1YmxpYyBwZW5kaW5nUnVsZXNldEtleTogc3RyaW5nID0gJyc7XG4gIHB1YmxpYyBwZW5kaW5nUmVmZXJlbmNlS2V5czogc3RyaW5nW10gPSBbXTtcbiAgXG4gIC8vIFx1MjUwMFx1MjUwMFx1MjUwMCBIRUxQRVJTIFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFxuXG4gIC8qKiBHaXZlbiBhIEdpdEh1YiBwYXRoLCByZXR1cm4gdGhlIG92ZXJyaWRkZW4gdmF1bHQgcGF0aCBvciB0aGUgb3JpZ2luYWwuICovXG4gIHJlc29sdmVWYXVsdFBhdGgoZ2l0aHViUGF0aDogc3RyaW5nKTogc3RyaW5nIHtcbiAgICBjb25zdCBjdXN0b20gPSB0aGlzLnNldHRpbmdzLmN1c3RvbVBhdGhzLmZpbmQoXG4gICAgICAoYykgPT5cbiAgICAgICAgYy5tYW5pZmVzdEtleSA9PT0gZ2l0aHViUGF0aCB8fFxuICAgICAgICBjLm1hbmlmZXN0S2V5ID09PSB0aGlzLmtleUZvcihnaXRodWJQYXRoKVxuICAgICk7XG4gICAgcmV0dXJuIGN1c3RvbT8udmF1bHRQYXRoID8/IGdpdGh1YlBhdGg7XG4gIH1cblxuICBcblxuICAvKiogQ29udmVydCBcdTIwMUNzb21lL2ZvbGRlci9maWxlLm1kXHUyMDFEIFx1MjE5MiBcdTIwMUNzb21lLWZvbGRlci1maWxlXHUyMDFEIChsb3dlcmNhc2VkLCBubyBleHRlbnNpb24pLiAqL1xuICBrZXlGb3IocGF0aDogc3RyaW5nKTogc3RyaW5nIHtcbiAgICByZXR1cm4gcGF0aFxuICAgICAgLnJlcGxhY2UoL1svXFxcXF0vZywgJy0nKVxuICAgICAgLnJlcGxhY2UoL1xcLlteLl0rJC8sICcnKVxuICAgICAgLnRvTG93ZXJDYXNlKCk7XG4gIH1cblxuICBpc0V4Y2x1ZGVkKHBhdGg6IHN0cmluZyk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLmV4Y2x1ZGVkUGF0aHMuc29tZShcbiAgICAgIChleCkgPT5cbiAgICAgICAgcGF0aCA9PT0gZXggfHxcbiAgICAgICAgcGF0aC5zdGFydHNXaXRoKGAke2V4fS9gKSB8fFxuICAgICAgICBwYXRoLmluY2x1ZGVzKGAvJHtleH0vYCkgfHxcbiAgICAgICAgcGF0aC5lbmRzV2l0aChgLyR7ZXh9YCkgfHxcbiAgICAgICAgcGF0aC5pbmNsdWRlcyhgLyR7ZXh9YClcbiAgICApO1xuICB9XG4gIFxuICAvLyBcdTI1MDBcdTI1MDBcdTI1MDAgQ1VTVE9NIElOU1RBTEwgTE9HSUMgXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXG5cbiAgcHVibGljIGFzeW5jIHBlcmZvcm1DdXN0b21JbnN0YWxsKFxuICAgIHRvSW5zdGFsbDogeyBwYXRoOiBzdHJpbmc7IGlzRm9sZGVyOiBib29sZWFuIH1bXVxuICApOiBQcm9taXNlPHZvaWQ+IHtcblx0XHRcblx0Ly8gb3B0aW9uYWwgYmFja3VwIC8vXG5cdGNvbnN0IGFsbEZpbGVzID0gdGhpcy5hcHAudmF1bHQuZ2V0QWxsTG9hZGVkRmlsZXMoKVxuXHQuZmlsdGVyKChmKTogZiBpcyBURmlsZSA9PiBmIGluc3RhbmNlb2YgVEZpbGUpXG5cdC5tYXAoKGYpID0+IGYucGF0aCk7XG5cdGNvbnN0IG5vbk1hcmtlckZpbGVzID0gYWxsRmlsZXMuZmlsdGVyKChwKSA9PiBwICE9PSAnLnZ2dW5kZXJsb3JlX2luc3RhbGxlZCcpO1xuXG5cdGlmIChub25NYXJrZXJGaWxlcy5sZW5ndGggPiAwICYmIHRoaXMuc2V0dGluZ3MuYXV0b0JhY2t1cEJlZm9yZVVwZGF0ZSkge1xuXHRjb25zdCBmb2xkZXIgPSBhd2FpdCB0aGlzLmJhY2t1cE1hbmFnZXIuYmFja3VwVmF1bHRNaXJyb3IoJ3ByZS1jdXN0b20taW5zdGFsbCcpO1xuXHRuZXcgTm90aWNlKGBCYWNrdXAgYmVmb3JlIGN1c3RvbVx1MjAxMGluc3RhbGwgY3JlYXRlZCBhdDogJHtmb2xkZXJ9YCk7XG5cdH1cbiAgICAvLyAyKSBMb29wIG92ZXIgZWFjaCBzZWxlY3RlZCBwYXRoXG4gICAgZm9yIChjb25zdCBlbnRyeSBvZiB0b0luc3RhbGwpIHtcbiAgICAgIGlmIChlbnRyeS5pc0ZvbGRlcikge1xuICAgICAgICBpZiAoIShhd2FpdCB0aGlzLmFwcC52YXVsdC5hZGFwdGVyLmV4aXN0cyhlbnRyeS5wYXRoKSkpIHtcbiAgICAgICAgICBhd2FpdCB0aGlzLmFwcC52YXVsdC5jcmVhdGVGb2xkZXIoZW50cnkucGF0aCk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIEZpbGUgXHUyMTkyIGZpbmQgTWFuaWZlc3RGaWxlRW50cnlcbiAgICAgICAgY29uc3QgbWFuaWZlc3RFbnRyeSA9IHRoaXMubWFuaWZlc3RDYWNoZS5maWxlcy5maW5kKFxuICAgICAgICAgIChmKSA9PiBmLnBhdGggPT09IGVudHJ5LnBhdGhcbiAgICAgICAgKTtcbiAgICAgICAgaWYgKCFtYW5pZmVzdEVudHJ5KSB7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgLy8gUmV1c2UgeW91ciBleGlzdGluZyBcdTIwMUN1cGRhdGVFbnRyeUZyb21NYW5pZmVzdFx1MjAxRCAoZm9yY2UgPSB0cnVlKVxuICAgICAgICBhd2FpdCB0aGlzLnVwZGF0ZUVudHJ5RnJvbU1hbmlmZXN0KG1hbmlmZXN0RW50cnksIHRydWUpO1xuICAgICAgfVxuICAgIH1cblx0XHQvLyAzKSBVcGRhdGUgLnZlcnNpb24uanNvbiBhbmQgc2V0dGluZ3Ncblx0XHRhd2FpdCB0aGlzLnVwZGF0ZVZlcnNpb25GaWxlKCk7XG5cdFx0dGhpcy5zZXR0aW5ncy5pbnN0YWxsZWRWZXJzaW9uID1cblx0XHR0aGlzLnNldHRpbmdzLmxhdGVzdFRvb2xraXRWZXJzaW9uID8/IHRoaXMuc2V0dGluZ3MuaW5zdGFsbGVkVmVyc2lvbjtcblx0XHR0aGlzLnNldHRpbmdzLmxhc3RGb3JjZVVwZGF0ZSA9IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKTtcblx0XHRhd2FpdCB0aGlzLnNhdmVTZXR0aW5ncygpO1xuXG5cdFx0Ly8gNCkgQ3JlYXRlIHRoZSBoaWRkZW4gbWFya2VyIGZpbGVcblx0XHRjb25zdCBtYXJrZXJQYXRoID0gJy52dnVuZGVybG9yZV9pbnN0YWxsZWQnO1xuXHRcdGlmICghKGF3YWl0IHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXIuZXhpc3RzKG1hcmtlclBhdGgpKSkge1xuXHRcdGF3YWl0IHRoaXMuYXBwLnZhdWx0LmNyZWF0ZShtYXJrZXJQYXRoLCAnJyk7XG5cdFx0fVxuXG5cdFx0Ly8gNSkgUmVcdTIwMTBlbmFibGUgaGlnaGxpZ2h0aW5nIChhbHdheXMgdHVybiBpdCBiYWNrIG9uKVxuXHRcdHRoaXMuc2V0dGluZ3MuaGlnaGxpZ2h0RW5hYmxlZCA9IHRydWU7XG5cdFx0YXdhaXQgdGhpcy5zYXZlU2V0dGluZ3MoKTtcblx0XHR0aGlzLmVuYWJsZUhpZ2hsaWdodCgpO1xuXHRcdGF3YWl0IHRoaXMudXBkYXRlVmVyc2lvbkZpbGUoKTtcblx0XHRpZiAodGhpcy5zZXR0aW5nc1RhYikge1xuXHRcdCAgdGhpcy5zZXR0aW5nc1RhYi5kaXNwbGF5KCk7XG5cdFx0fVxuXHRcdG5ldyBOb3RpY2UoJ1x1MjcwNSBDdXN0b20gaW5zdGFsbCBjb21wbGV0ZSBcdTIwMjYnKTtcblx0fVxuXG4gIC8vIFx1MjUwMFx1MjUwMFx1MjUwMCBISUdITElHSFRJTkcgKExpZ2h0ICsgRGFyayBNb2RlKSBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcblxuICBwcml2YXRlIGdldCBoaWdobGlnaHRDU1MoKTogc3RyaW5nIHtcbiAgICBjb25zdCBsaWdodCA9IHRoaXMuc2V0dGluZ3MuaGlnaGxpZ2h0Q29sb3JMaWdodC50cmltKCkgfHwgJ3JnYmEoMTA3LDE0NiwxMjAsMSknO1xuICAgIGNvbnN0IGRhcmsgPSB0aGlzLnNldHRpbmdzLmhpZ2hsaWdodENvbG9yRGFyay50cmltKCkgfHwgJ3JnYmEoIDUwLCA3MCwgNTAsMSknO1xuXG4gICAgY29uc3QgZmlsZVNlbGVjdG9ycyA9IHRoaXMubWFuaWZlc3RDYWNoZS5maWxlcy5tYXAoKGYpID0+IHtcbiAgICAgIGNvbnN0IGVzY2FwZWQgPSBmLnBhdGgucmVwbGFjZSgvXCIvZywgJ1xcXFxcIicpO1xuICAgICAgcmV0dXJuIGAubmF2LWZpbGUtdGl0bGVbZGF0YS1wYXRoPVwiJHtlc2NhcGVkfVwiXWA7XG4gICAgfSk7XG5cbiAgICBjb25zdCBmb2xkZXJTZWxlY3RvcnMgPSB0aGlzLm1hbmlmZXN0Q2FjaGUuZm9sZGVycy5tYXAoKGYpID0+IHtcbiAgICAgIGNvbnN0IGVzY2FwZWQgPSBmLnBhdGgucmVwbGFjZSgvXCIvZywgJ1xcXFxcIicpO1xuICAgICAgcmV0dXJuIGAubmF2LWZvbGRlci10aXRsZVtkYXRhLXBhdGg9XCIke2VzY2FwZWR9XCJdYDtcbiAgICB9KTtcblxuICAgIGNvbnN0IGxpbmVzOiBzdHJpbmdbXSA9IFtcbiAgICAgIGA6cm9vdCB7YCxcbiAgICAgIGAgIC0tdnZ1bmRlcmxvcmUtdG9vbGtpdC1oaWdobGlnaHQ6ICR7bGlnaHR9O2AsXG4gICAgICBgfWAsXG4gICAgICBgYCxcbiAgICAgIGBib2R5LnRoZW1lLWRhcmsge2AsXG4gICAgICBgICAtLXZ2dW5kZXJsb3JlLXRvb2xraXQtaGlnaGxpZ2h0OiAke2Rhcmt9O2AsXG4gICAgICBgfWAsXG4gICAgICBgYCxcbiAgICBdO1xuXG4gICAgaWYgKGZpbGVTZWxlY3RvcnMubGVuZ3RoKSB7XG4gICAgICBsaW5lcy5wdXNoKGAke2ZpbGVTZWxlY3RvcnMuam9pbignLCAnKX0ge2ApO1xuICAgICAgbGluZXMucHVzaChgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS12dnVuZGVybG9yZS10b29sa2l0LWhpZ2hsaWdodCk7YCk7XG4gICAgICBsaW5lcy5wdXNoKGAgIGJvcmRlci1yYWRpdXM6IDNweDtgKTtcbiAgICAgIGxpbmVzLnB1c2goYH1gKTtcbiAgICAgIGxpbmVzLnB1c2goYGApO1xuICAgIH1cblxuICAgIGlmIChmb2xkZXJTZWxlY3RvcnMubGVuZ3RoKSB7XG4gICAgICBsaW5lcy5wdXNoKGAke2ZvbGRlclNlbGVjdG9ycy5qb2luKCcsICcpfSB7YCk7XG4gICAgICBsaW5lcy5wdXNoKGAgIGJhY2tncm91bmQtY29sb3I6IHZhcigtLXZ2dW5kZXJsb3JlLXRvb2xraXQtaGlnaGxpZ2h0KTtgKTtcbiAgICAgIGxpbmVzLnB1c2goYCAgYm9yZGVyLXJhZGl1czogM3B4O2ApO1xuICAgICAgbGluZXMucHVzaChgfWApO1xuICAgICAgbGluZXMucHVzaChgYCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGxpbmVzLmpvaW4oJ1xcbicpO1xuICB9XG5cbiAgcHVibGljIGVuYWJsZUhpZ2hsaWdodCgpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5zdHlsZUVsKSByZXR1cm47XG4gICAgdGhpcy5zdHlsZUVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3R5bGUnKTtcbiAgICB0aGlzLnN0eWxlRWwuaWQgPSAndnZ1bmRlcmxvcmUtaGlnaGxpZ2h0LWluamVjdCc7XG4gICAgdGhpcy5zdHlsZUVsLnRleHRDb250ZW50ID0gdGhpcy5oaWdobGlnaHRDU1M7XG4gICAgZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZCh0aGlzLnN0eWxlRWwpO1xuICB9XG5cbiAgcHVibGljIGRpc2FibGVIaWdobGlnaHQoKTogdm9pZCB7XG4gICAgaWYgKCF0aGlzLnN0eWxlRWwpIHJldHVybjtcbiAgICB0aGlzLnN0eWxlRWwucmVtb3ZlKCk7XG4gICAgdGhpcy5zdHlsZUVsID0gbnVsbDtcbiAgfVxuXG4gIC8vIFx1MjUwMFx1MjUwMFx1MjUwMCBSRU1PVEUgQkFTRUxJTkUgQ0FDSElORyBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcblxuICBwdWJsaWMgYXN5bmMgZmV0Y2hSZW1vdGVCYXNlbGluZSgpOiBQcm9taXNlPHZvaWQ+IHtcblxuICAgIGlmICghdGhpcy5tYW5pZmVzdENhY2hlIHx8ICFBcnJheS5pc0FycmF5KHRoaXMubWFuaWZlc3RDYWNoZS5maWxlcykpIHtcbiAgICAgIGNvbnNvbGUud2FybignXHUyNkEwXHVGRTBGIG1hbmlmZXN0Q2FjaGUgaXMgbWlzc2luZyBvciBpbnZhbGlkJyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgZm9yIChjb25zdCBlbnRyeSBvZiB0aGlzLm1hbmlmZXN0Q2FjaGUuZmlsZXMpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHJhd1VybCA9IGBodHRwczovL3Jhdy5naXRodWJ1c2VyY29udGVudC5jb20vc2xhbXdpc2UwMDAxL1ZWdW5kZXJsb3JlLVRvb2xraXQtRnVsbC9tYWluLyR7ZW50cnkucGF0aH1gO1xuICAgICAgICBjb25zdCByZW1vdGVUZXh0ID0gYXdhaXQgKGF3YWl0IGZldGNoKHJhd1VybCkpLnRleHQoKTtcbiAgICAgICAgY29uc3QgcmVzb2x2ZWQgPSB0aGlzLnJlc29sdmVWYXVsdFBhdGgoZW50cnkucGF0aCk7XG5cbiAgICAgICAgLy8gSWYgcmVtYXBwZWQsIHJlbW92ZSB0aGUgb2xkIGNhY2hlIGVudHJ5XG4gICAgICAgIGlmIChyZXNvbHZlZCAhPT0gZW50cnkucGF0aCkge1xuICAgICAgICAgIGF3YWl0IHRoaXMuZmlsZUNhY2hlTWFuYWdlci5yZW1vdmVGcm9tQ2FjaGUoZW50cnkucGF0aCk7XG4gICAgICAgIH1cblxuICAgICAgICBhd2FpdCB0aGlzLmZpbGVDYWNoZU1hbmFnZXIudXBkYXRlQ2FjaGUoXG4gICAgICAgICAgcmVzb2x2ZWQsXG4gICAgICAgICAgcmVtb3RlVGV4dCxcbiAgICAgICAgICBlbnRyeS5wYXRoLFxuICAgICAgICAgIGZhbHNlXG4gICAgICAgICk7XG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoYEZhaWxlZCB0byBmZXRjaCByYXcgYmFzZWxpbmUgZm9yICR7ZW50cnkucGF0aH1gLCBlKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgfVxuXG4gIC8vIFx1MjUwMFx1MjUwMFx1MjUwMCBNQVJLRVIgRklMRSBDSEVDS1MgKGZpcnN0XHUyMDEwcnVuIGRldGVjdGlvbikgXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXG5cbnByaXZhdGUgYXN5bmMgY2hlY2tNYXJrZXJGaWxlKCkge1xuICBjb25zdCBtYXJrZXJQYXRoID0gJy52dnVuZGVybG9yZV9pbnN0YWxsZWQnO1xuICBjb25zdCBtYXJrZXJFeGlzdHMgPSBhd2FpdCB0aGlzLmFwcC52YXVsdC5hZGFwdGVyLmV4aXN0cyhtYXJrZXJQYXRoKTtcbiAgICB0aGlzLmlzRmlyc3RSdW4gPSAhbWFya2VyRXhpc3RzO1xuICAgIGRlbGV0ZSAodGhpcy5zZXR0aW5ncyBhcyBhbnkpLm5lZWRzSW5zdGFsbDtcbiAgICBhd2FpdCB0aGlzLnNhdmVTZXR0aW5ncygpO1xuICAgIHRoaXMuc2V0dGluZ3NUYWIuZGlzcGxheSgpO1xufVxuXG5cbiAgLy8gXHUyNTAwXHUyNTAwXHUyNTAwIE1BTklGRVNUIFNZTkMgXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXG5cbiAgYXN5bmMgc3luY01hbmlmZXN0KCk6IFByb21pc2U8dm9pZD4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCByZXMgPSBhd2FpdCByZXF1ZXN0VXJsKHtcbiAgICAgICAgdXJsOiAnaHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tL3NsYW13aXNlMDAwMS9WVnVuZGVybG9yZS1Ub29sa2l0LUZ1bGwvbWFpbi9tYW5pZmVzdC5qc29uJ1xuICAgIH0pO1xuXG4gICAgICBjb25zdCBtYW5pZmVzdCA9IHJlcy5qc29uO1xuICAgICAgdGhpcy5zZXR0aW5ncy5sYXRlc3REZWZhdWx0cyA9IG1hbmlmZXN0LmRlZmF1bHRQYXRocyB8fCB7fTtcbiAgICAgIHRoaXMubWFuaWZlc3RDYWNoZSA9IG1hbmlmZXN0O1xuXG4gICAgICBjb25zdCBtYW5pZmVzdENvbnRlbnQgPSBKU09OLnN0cmluZ2lmeShtYW5pZmVzdCwgbnVsbCwgMik7XG4gICAgICBhd2FpdCB0aGlzLmFwcC52YXVsdC5hZGFwdGVyLndyaXRlKCdtYW5pZmVzdC5qc29uJywgbWFuaWZlc3RDb250ZW50KTtcbiAgICAgIGF3YWl0IHRoaXMuc2F2ZVNldHRpbmdzKCk7XG5cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3Igc3luY2luZyBtYW5pZmVzdDonLCBlcnJvcik7XG4gICAgICBuZXcgTm90aWNlKCdGYWlsZWQgdG8gc3luYyBtYW5pZmVzdC4nKTtcbiAgICB9XG4gIH0gXG5cbiAgLy8gXHUyNTAwXHUyNTAwXHUyNTAwIFBMVUdJTiBMSUZFQ1lDTEUgXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXG5cbiAgYXN5bmMgb25sb2FkKCkge1xuICAgIGF3YWl0IHRoaXMubG9hZFNldHRpbmdzKCk7XG4gXG4gICAgaWYgKHRoaXMuc2V0dGluZ3MuaXNGaXJzdFJ1biA9PT0gXCJub1wiKSB7XG4gIHRoaXMuYXBwLndvcmtzcGFjZS5vbkxheW91dFJlYWR5KCgpID0+IHtcbiAgICBjb25zdCB3ZWxjb21lID0gdGhpcy5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKFwiV2VsY29tZS5tZFwiKTtcbiAgICBpZiAod2VsY29tZSBpbnN0YW5jZW9mIFRGaWxlKSB7XG4gICAgICB0aGlzLmFwcC53b3Jrc3BhY2UuZGV0YWNoTGVhdmVzT2ZUeXBlKFwic2V0dGluZ3NcIik7XG4gICAgICB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0TGVhZih0cnVlKS5vcGVuRmlsZSh3ZWxjb21lKTtcbiAgICB9IFxuICAgIC8vIFByZXZlbnQgaXQgZnJvbSB0cmlnZ2VyaW5nIGFnYWluXG4gICAgdGhpcy5zZXR0aW5ncy5pc0ZpcnN0UnVuID0gXCJzaG93blwiO1xuICAgIHRoaXMuc2F2ZVNldHRpbmdzKCk7XG4gIH0pO1xufVxuXG4gICAgXG4gICAgdGhpcy5iYWNrdXBNYW5hZ2VyID0gbmV3IEJhY2t1cE1hbmFnZXIodGhpcy5hcHApO1xuXG4gICAgdGhpcy5maWxlQ2FjaGVNYW5hZ2VyID0gbmV3IFRvb2xraXRGaWxlQ2FjaGVNYW5hZ2VyKFxuICAgICAgdGhpcy5hcHAudmF1bHQsXG4gICAgICB0aGlzLnNldHRpbmdzLmZpbGVDYWNoZSA/PyB7fSxcbiAgICAgIGFzeW5jICgpID0+IGF3YWl0IHRoaXMuc2F2ZVNldHRpbmdzKClcbiAgICApO1xuXG5cbiAgICAgIGNvbnN0IG9yaWdFcnJvciA9IGNvbnNvbGUuZXJyb3IuYmluZChjb25zb2xlKTtcbiAgY29uc29sZS5lcnJvciA9IChtc2c/OiBhbnksIC4uLnJlc3Q6IGFueVtdKSA9PiB7XG4gICAgaWYgKFxuICAgICAgdHlwZW9mIG1zZyA9PT0gXCJzdHJpbmdcIiAmJlxuICAgICAgbXNnLmluY2x1ZGVzKFwiQ2Fubm90IGluZGV4IGZpbGVcIikgJiZcbiAgICAgIG1zZy5pbmNsdWRlcyhcIkRhdGF2aWV3XCIpXG4gICAgKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIG9yaWdFcnJvcihtc2csIC4uLnJlc3QpO1xuICB9O1xuXG4gICAgdGhpcy5zZXR0aW5nc1RhYiA9IG5ldyBUb29sa2l0U2V0dGluZ3NUYWIodGhpcy5hcHAsIHRoaXMpO1xuICAgIHRoaXMuYWRkU2V0dGluZ1RhYih0aGlzLnNldHRpbmdzVGFiKTtcblxuICAgIC8vIEltbWVkaWF0ZWx5IGxvYWQgYW55IGNhY2hlZCBtYW5pZmVzdC5qc29uLiBJZiBub3QgcHJlc2VudCwgd2UnbGwgZmV0Y2ggaW4gYSBtb21lbnQuXG4gICAgaWYgKHRoaXMuc2V0dGluZ3MuaXNGaXJzdFJ1biAhPT0gXCJ5ZXNcIikge1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgY29udGVudCA9IGF3YWl0IHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXIucmVhZCgnbWFuaWZlc3QuanNvbicpO1xuICAgICAgICB0aGlzLm1hbmlmZXN0Q2FjaGUgPSBKU09OLnBhcnNlKGNvbnRlbnQpO1xuICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgIGNvbnNvbGUud2FybignTWFuaWZlc3Qgbm90IGZvdW5kIGluIHZhdWx0OyB3aWxsIGZldGNoIGZyb20gR2l0SHViIHNob3J0bHkuJyk7XG4gICAgICB9XG4gICAgfVxuICAgIFxuICAgIC8vIElmIGhpZ2hsaWdodGluZyB3YXMgT04gYmVmb3JlLCByZXN0b3JlIGl0IG5vdzpcblx0aWYgKHRoaXMuc2V0dGluZ3MuaGlnaGxpZ2h0RW5hYmxlZCApIHtcblx0XHR0aGlzLmVuYWJsZUhpZ2hsaWdodCgpO1xuXHQgIH1cblxuICAgIC8vIERlZmVyIGhlYXZpZXIgdGFza3Mgc2xpZ2h0bHkgc28gVUkgaXNuXHUyMDE5dCBibG9ja2VkOlxuICAgIHNldFRpbWVvdXQoYXN5bmMgKCkgPT4ge1xuICAgICAgYXdhaXQgdGhpcy5zeW5jTWFuaWZlc3QoKTtcbiAgICAgIGF3YWl0IHRoaXMuc2hvd0luZGV4aW5nTW9kYWwoKTtcbiAgICAgIGF3YWl0IHRoaXMuY2hlY2tGb3JVcGRhdGVzKCk7XG5cbiAgICAgIC8vIEJ1aWxkIHJldmVyc2UgY2FjaGUgZm9yIFx1MjAxQ21vdmVkXHUyMDFEIGRldGVjdGlvblxuICAgICAgdGhpcy5vbGRQYXRoc0J5R2l0aHViID0gT2JqZWN0LmVudHJpZXMoXG4gICAgICAgIHRoaXMuZmlsZUNhY2hlTWFuYWdlci5nZXRDYWNoZSgpIGFzIFJlY29yZDxzdHJpbmcsIFRvb2xraXRGaWxlQ2FjaGVFbnRyeT5cbiAgICAgICkucmVkdWNlKChtYXAsIFt2YXVsdFBhdGgsIGVudHJ5XSkgPT4ge1xuICAgICAgICBtYXBbZW50cnkuZ2l0aHViUGF0aF0gPSB2YXVsdFBhdGg7XG4gICAgICAgIHJldHVybiBtYXA7XG4gICAgICB9LCB7fSBhcyBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+KTtcblxuICAgIH0sIDI1MCk7XG5cbiAgICB0aGlzLnNjaGVkdWxlQXV0b1VwZGF0ZUNoZWNrKCk7XG5cbiAgdGhpcy5yZWdpc3RlckV2ZW50KFxuICAgIHRoaXMuYXBwLnZhdWx0Lm9uKFwiZGVsZXRlXCIsICgpID0+XG4gICAgKHRoaXMuYXBwIGFzIGFueSkuY29tbWFuZHMuZXhlY3V0ZUNvbW1hbmRCeUlkKFwiZGF0YXZpZXc6Y2xlYXItY2FjaGVcIikgICAgKVxuICApO1xuICB0aGlzLnJlZ2lzdGVyRXZlbnQoXG4gICAgdGhpcy5hcHAudmF1bHQub24oXCJyZW5hbWVcIiwgKCkgPT5cbiAgICAgICh0aGlzLmFwcCBhcyBhbnkpLmNvbW1hbmRzLmV4ZWN1dGVDb21tYW5kQnlJZChcImRhdGF2aWV3OmNsZWFyLWNhY2hlXCIpXG4gICAgKVxuICApO1xuXG4gICAgLy8gRGVmZW5zaXZlOiBlbnN1cmUgc2V0dGluZ3MuY3VzdG9tUGF0aHMgZXhpc3RzXG4gICAgaWYgKCF0aGlzLnNldHRpbmdzLmN1c3RvbVBhdGhzKSB7XG4gICAgICB0aGlzLnNldHRpbmdzLmN1c3RvbVBhdGhzID0gW107XG4gICAgfVxuXG4gICAgLy8gQnVpbGQgdGhlIHJlcXVpcmVzR3JhcGggZnJvbSBtYW5pZmVzdC5qc29uXG4gICAgaWYgKHRoaXMuc2V0dGluZ3MuaXNGaXJzdFJ1biAhPT0gXCJ5ZXNcIikge1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgcmF3ID0gYXdhaXQgdGhpcy5hcHAudmF1bHQuYWRhcHRlci5yZWFkKCdtYW5pZmVzdC5qc29uJyk7XG4gICAgICAgIGNvbnN0IG1hbmlmZXN0ID0gSlNPTi5wYXJzZShyYXcpIGFzIHtcbiAgICAgICAgICBmaWxlczogQXJyYXk8eyBrZXk6IHN0cmluZzsgcmVxdWlyZXM/OiBzdHJpbmdbXSB9PjtcbiAgICAgICAgICBmb2xkZXJzOiBBcnJheTx7IGtleTogc3RyaW5nOyByZXF1aXJlcz86IHN0cmluZ1tdIH0+O1xuICAgICAgICB9O1xuICAgICAgICBjb25zdCBlbnRyaWVzID0gWy4uLihtYW5pZmVzdC5mb2xkZXJzIHx8IFtdKSwgLi4uKG1hbmlmZXN0LmZpbGVzIHx8IFtdKV07XG4gICAgICAgIHRoaXMucmVxdWlyZXNHcmFwaCA9IG5ldyBNYXA8c3RyaW5nLCBzdHJpbmdbXT4oKTtcbiAgICAgICAgZm9yIChjb25zdCBlIG9mIGVudHJpZXMpIHtcbiAgICAgICAgICB0aGlzLnJlcXVpcmVzR3JhcGguc2V0KGUua2V5LCBlLnJlcXVpcmVzID8/IFtdKTtcbiAgICAgICAgfVxuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBjb25zb2xlLndhcm4oJ0NvdWxkIG5vdCBidWlsZCByZXF1aXJlc0dyYXBoIChtYW5pZmVzdC5qc29uIG1pc3Npbmcgb3IgaW52YWxpZCkuJyk7XG4gICAgICAgIHRoaXMucmVxdWlyZXNHcmFwaCA9IG5ldyBNYXAoKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5yZXF1aXJlc0dyYXBoID0gbmV3IE1hcCgpOyAvLyBlbXB0eSBncmFwaCBvbiBmaXJzdCBydW5cbiAgICB9XG4gICAgaWYgKHRoaXMuaXNGaXJzdFJ1bikge1xuICAgICAgdGhpcy5hcHAud29ya3NwYWNlLm9uTGF5b3V0UmVhZHkoKCkgPT4ge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIHRoaXMuYXBwLndvcmtzcGFjZS5kZXRhY2hMZWF2ZXNPZlR5cGUoXCJzZXR0aW5nc1wiKTtcblxuICAgICAgICAgIGNvbnN0IHdlbGNvbWUgPSB0aGlzLmFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoXCJXZWxjb21lLm1kXCIpO1xuICAgICAgICAgIGlmICh3ZWxjb21lIGluc3RhbmNlb2YgVEZpbGUpIHtcbiAgICAgICAgICAgIHRoaXMuYXBwLndvcmtzcGFjZS5nZXRMZWFmKHRydWUpLm9wZW5GaWxlKHdlbGNvbWUpO1xuXG4gICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKFwiXHUyNzRDIEZhaWxlZCB0byBvcGVuIFdlbGNvbWUubWQ6XCIsIGVycik7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIG9udW5sb2FkKCkge1xuICAgIHRoaXMuZGlzYWJsZUhpZ2hsaWdodCgpO1xuICAgIGlmICh0aGlzLmF1dG9DaGVja0ludGVydmFsKSB7XG4gICAgICBjbGVhckludGVydmFsKHRoaXMuYXV0b0NoZWNrSW50ZXJ2YWwpO1xuICAgIH1cbiAgfSBcblxuICBzY2hlZHVsZUF1dG9VcGRhdGVDaGVjaygpIHtcbiAgICB0aGlzLmF1dG9DaGVja0ludGVydmFsID0gd2luZG93LnNldEludGVydmFsKCgpID0+IHtcbiAgICAgIHRoaXMuY2hlY2tGb3JVcGRhdGVzKCk7XG4gICAgfSwgNjAgKiA2MCAqIDEwMDApO1xuICB9XG5cbiAgLy8gXHUyNTAwXHUyNTAwXHUyNTAwIEJBQ0tVUCAmIFVORE8gXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXG5cbiAgYXN5bmMgYmFja3VwRmlsZShmaWxlUGF0aDogc3RyaW5nLCBjb250ZW50OiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICB0aGlzLnNldHRpbmdzLmJhY2t1cEZpbGVzID0gdGhpcy5zZXR0aW5ncy5iYWNrdXBGaWxlcyB8fCB7fTtcbiAgICB0aGlzLnNldHRpbmdzLmJhY2t1cEZpbGVzW2ZpbGVQYXRoXSA9IGNvbnRlbnQ7XG4gICAgYXdhaXQgdGhpcy5zYXZlU2V0dGluZ3MoKTtcbiAgfVxuXG4gIGFzeW5jIHVuZG9Gb3JjZVVwZGF0ZSgpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBpZiAoIXRoaXMuc2V0dGluZ3MuYmFja3VwRmlsZXMgfHwgT2JqZWN0LmtleXModGhpcy5zZXR0aW5ncy5iYWNrdXBGaWxlcykubGVuZ3RoID09PSAwKSB7XG4gICAgICBuZXcgTm90aWNlKCdObyBiYWNrdXBzIGF2YWlsYWJsZSB0byByZXN0b3JlLicpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBmb3IgKGNvbnN0IFtmaWxlUGF0aCwgYmFja3VwQ29udGVudF0gb2YgT2JqZWN0LmVudHJpZXModGhpcy5zZXR0aW5ncy5iYWNrdXBGaWxlcykpIHtcbiAgICAgIGlmIChhd2FpdCB0aGlzLmFwcC52YXVsdC5hZGFwdGVyLmV4aXN0cyhmaWxlUGF0aCkpIHtcbiAgICAgICAgYXdhaXQgdGhpcy5hcHAudmF1bHQuYWRhcHRlci53cml0ZShmaWxlUGF0aCwgYmFja3VwQ29udGVudCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBhd2FpdCB0aGlzLmFwcC52YXVsdC5jcmVhdGUoZmlsZVBhdGgsIGJhY2t1cENvbnRlbnQpO1xuICAgICAgfVxuICAgIH1cbiAgICBuZXcgTm90aWNlKCdcdTI3MDUgRm9yY2UgdXBkYXRlIHVuZG9uZS4nKTtcbiAgICB0aGlzLnNldHRpbmdzLmJhY2t1cEZpbGVzID0ge307XG4gICAgYXdhaXQgdGhpcy5zYXZlU2V0dGluZ3MoKTtcbiAgfVxuXG4gIC8vIFx1MjUwMFx1MjUwMFx1MjUwMCBGT0xERVIgU1lOQyBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcblxuICBhc3luYyBzeW5jTWlzc2luZ0ZvbGRlcnMoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgaWYgKHRoaXMubWFuaWZlc3RDYWNoZSAmJiB0aGlzLm1hbmlmZXN0Q2FjaGUuZm9sZGVycykge1xuICAgICAgZm9yIChjb25zdCBmb2xkZXJFbnRyeSBvZiB0aGlzLm1hbmlmZXN0Q2FjaGUuZm9sZGVycykge1xuICAgICAgICBjb25zdCBmb2xkZXJQYXRoID0gZm9sZGVyRW50cnkucGF0aDtcbiAgICAgICAgaWYgKCEoYXdhaXQgdGhpcy5hcHAudmF1bHQuYWRhcHRlci5leGlzdHMoZm9sZGVyUGF0aCkpKSB7XG4gICAgICAgICAgYXdhaXQgdGhpcy5hcHAudmF1bHQuY3JlYXRlRm9sZGVyKGZvbGRlclBhdGgpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLy8gXHUyNTAwXHUyNTAwXHUyNTAwIEZPUkNFLVVQREFURSBQUkVWSUVXIFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFxuXG4gIGFzeW5jIGJ1aWxkRm9yY2VVcGRhdGVQcmV2aWV3KCk6IFByb21pc2U8UHJldmlld0l0ZW1bXT4ge1xuICAgIGNvbnN0IHByZXZpZXdMaXN0OiBQcmV2aWV3SXRlbVtdID0gW107XG5cbiAgICAvLyAwKSBDb2xsZWN0IGFsbCBibGFja2xpc3RlZCBmb2xkZXJzIChtYW5pZmVzdEtleSB2YWx1ZXMgd2hlcmUgZG9VcGRhdGUgPT09IGZhbHNlKVxuICAgIGNvbnN0IGRlbnlMaXN0ZWRGb2xkZXJzID0gdGhpcy5zZXR0aW5ncy5jdXN0b21QYXRoc1xuICAgICAgLmZpbHRlcigoYykgPT4gYy5kb1VwZGF0ZSA9PT0gZmFsc2UpXG4gICAgICAubWFwKChjKSA9PiBjLm1hbmlmZXN0S2V5KTtcblxuICAgIC8vIDEpIERlbnktbGlzdGVkIGZpbGVzIGZpcnN0XHUyMDE0YnV0IG9ubHkgaWYgdGhleSB3b3VsZCBhY3R1YWxseSBiZSBcIm5ld1wiIG9yIFwib3V0IG9mIGRhdGVcIlxuICAgIGZvciAoY29uc3QgZW50cnkgb2YgdGhpcy5tYW5pZmVzdENhY2hlLmZpbGVzKSB7XG4gICAgICAvLyBcdTI1MDBcdTI1MDAgU0tJUCBhbnkgb3B0aW9uYWw6dHJ1ZSBmaWxlXG4gICAgICBpZiAoZW50cnkub3B0aW9uYWwpIHtcbiAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBjdXN0b20gPSB0aGlzLnNldHRpbmdzLmN1c3RvbVBhdGhzLmZpbmQoKGMpID0+IGMubWFuaWZlc3RLZXkgPT09IGVudHJ5LmtleSk7XG4gICAgICBjb25zdCBpc0luRGVueUZvbGRlciA9IGRlbnlMaXN0ZWRGb2xkZXJzLnNvbWUoKGZvbGRlcikgPT5cbiAgICAgIGVudHJ5LnBhdGguc3RhcnRzV2l0aChmb2xkZXIgKyAnLycpXG4gICAgICApO1xuICAgICAgaWYgKGN1c3RvbT8uZG9VcGRhdGUgPT09IGZhbHNlIHx8IGlzSW5EZW55Rm9sZGVyKSB7XG4gICAgICAvLyBSZXNvbHZlIHZhdWx0IHBhdGggKGFjY291bnRpbmcgZm9yIGFueSByZW1hcHBpbmcpXG4gICAgICBjb25zdCB2cCA9IGN1c3RvbT8udmF1bHRQYXRoID8/IHRoaXMucmVzb2x2ZVZhdWx0UGF0aChlbnRyeS5wYXRoKTtcblxuICAgICAgLy8gQ2hlY2s6IGRvZXMgdGhlIGZpbGUgZXhpc3QgbG9jYWxseT8gQW5kIGlzIGl0IHVwLXRvLWRhdGU/XG4gICAgICBjb25zdCBleGlzdHMgPSBhd2FpdCB0aGlzLmFwcC52YXVsdC5hZGFwdGVyLmV4aXN0cyh2cCk7XG4gICAgICBjb25zdCB1cFRvRGF0ZSA9IGV4aXN0cyAmJiAoYXdhaXQgdGhpcy5maWxlQ2FjaGVNYW5hZ2VyLmlzVXBUb0RhdGUodnApKTtcblxuICAgICAgLy8gT25seSBzaG93IGFzIGRlbnktbGlzdGVkIGlmIGl0IHdvdWxkIGhhdmUgYmVlbiBcdTIwMUNuZXdcdTIwMUQgKG1pc3NpbmcpIG9yIFx1MjAxQ291dC1vZi1kYXRlXHUyMDFEXG4gICAgICBpZiAoIWV4aXN0cyB8fCAhdXBUb0RhdGUpIHtcbiAgICAgICAgcHJldmlld0xpc3QucHVzaCh7XG4gICAgICAgIGZpbGVQYXRoOiB2cCxcbiAgICAgICAgYWN0aW9uOiAnZGVueS1saXN0ZWQgXHUyMDEzIHdpbGwgbm90IHVwZGF0ZScsXG4gICAgICAgIHNlbGVjdGVkOiBmYWxzZSxcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICB9XG4gICAgfVxuXG5cdC8vIDIpIEZVTEwtU1lOQyBtb2RlIChza2lwIGFueSBmaWxlL2ZvbGRlciB0aGF0IGlzIGJsYWNrbGlzdGVkKVxuXHRpZiAoIXRoaXMuc2V0dGluZ3MuY3VzdG9taXplVXBkYXRlcykge1xuXHQgIGZvciAoY29uc3QgZiBvZiB0aGlzLm1hbmlmZXN0Q2FjaGUuZmlsZXMpIHtcblx0XHQvLyBcdTI1MDBcdTI1MDAgU0tJUCBhbnkgb3B0aW9uYWw6dHJ1ZSBmaWxlXG5cdFx0aWYgKGYub3B0aW9uYWwpIHtcblx0XHQgIGNvbnRpbnVlO1xuXHRcdH1cblxuXHRcdGNvbnN0IGN1c3RvbSA9IHRoaXMuc2V0dGluZ3MuY3VzdG9tUGF0aHMuZmluZCgoYykgPT4gYy5tYW5pZmVzdEtleSA9PT0gZi5rZXkpO1xuXHRcdGNvbnN0IGlzSW5EZW55Rm9sZGVyID0gZGVueUxpc3RlZEZvbGRlcnMuc29tZSgoZm9sZGVyKSA9PlxuXHRcdCAgZi5wYXRoLnN0YXJ0c1dpdGgoZm9sZGVyICsgJy8nKVxuXHRcdCk7XG5cdFx0aWYgKGN1c3RvbT8uZG9VcGRhdGUgPT09IGZhbHNlIHx8IGlzSW5EZW55Rm9sZGVyKSB7XG5cdFx0ICBjb250aW51ZTtcblx0XHR9XG5cblx0XHRjb25zdCB2cCA9IHRoaXMucmVzb2x2ZVZhdWx0UGF0aChmLnBhdGgpO1xuXHRcdGxldCB0YWcgPSAnJztcblx0XHRpZiAodnAgIT09IGYucGF0aCkgdGFnID0gJyAocmVtYXBwZWQpJztcblxuXHRcdGNvbnN0IGV4aXN0cyA9IGF3YWl0IHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXIuZXhpc3RzKHZwKTtcblx0XHRpZiAoIWV4aXN0cykge1xuXHRcdCAgcHJldmlld0xpc3QucHVzaCh7XG5cdFx0XHRmaWxlUGF0aDogdnAsXG5cdFx0XHRhY3Rpb246IGBuZXcgZmlsZSR7dGFnfWAsXG5cdFx0XHRzZWxlY3RlZDogdHJ1ZSxcblx0XHQgIH0pO1xuXHRcdH0gZWxzZSBpZiAoIShhd2FpdCB0aGlzLmZpbGVDYWNoZU1hbmFnZXIuaXNVcFRvRGF0ZSh2cCkpKSB7XG5cdFx0ICBwcmV2aWV3TGlzdC5wdXNoKHtcblx0XHRcdGZpbGVQYXRoOiB2cCxcblx0XHRcdGFjdGlvbjogYHdpbGwgYmUgb3ZlcndyaXR0ZW4ke3RhZ31gLFxuXHRcdFx0c2VsZWN0ZWQ6IHRydWUsXG5cdFx0ICB9KTtcblx0XHR9XG5cdCAgfVxuXG5cdCAgZm9yIChjb25zdCBmbGQgb2YgdGhpcy5tYW5pZmVzdENhY2hlLmZvbGRlcnMpIHtcblx0XHQvLyBcdTI1MDBcdTI1MDAgU0tJUCBhbnkgb3B0aW9uYWw6dHJ1ZSBmb2xkZXJcblx0XHRpZiAoZmxkLm9wdGlvbmFsKSB7XG5cdFx0ICBjb250aW51ZTtcblx0XHR9XG5cblx0XHRjb25zdCBpc0RlbnlGb2xkZXIgPSBkZW55TGlzdGVkRm9sZGVycy5pbmNsdWRlcyhmbGQucGF0aCk7XG5cdFx0aWYgKCEoYXdhaXQgdGhpcy5hcHAudmF1bHQuYWRhcHRlci5leGlzdHMoZmxkLnBhdGgpKSAmJiAhaXNEZW55Rm9sZGVyKSB7XG5cdFx0ICBwcmV2aWV3TGlzdC5wdXNoKHtcblx0XHRcdGZpbGVQYXRoOiBmbGQucGF0aCxcblx0XHRcdGFjdGlvbjogJ21pc3NpbmcgZm9sZGVyICh3aWxsIGJlIGNyZWF0ZWQpJyxcblx0XHRcdHNlbGVjdGVkOiB0cnVlLFxuXHRcdFx0aXNGb2xkZXI6IHRydWUsXG5cdFx0ICB9KTtcblx0XHR9XG5cdCAgfVxuXG5cdCAgcmV0dXJuIHByZXZpZXdMaXN0O1xuXHR9XG5cblx0Ly8gMykgQ1VTVE9NLVNZTkMgbW9kZSAoc2tpcCBhbnkgZmlsZS9mb2xkZXIgdGhhdCBpcyBibGFja2xpc3RlZClcblx0Zm9yIChjb25zdCBlbnRyeSBvZiB0aGlzLm1hbmlmZXN0Q2FjaGUuZmlsZXMpIHtcblx0ICAvLyBcdTI1MDBcdTI1MDAgU0tJUCBhbnkgb3B0aW9uYWw6dHJ1ZSBmaWxlXG5cdCAgaWYgKGVudHJ5Lm9wdGlvbmFsKSB7XG5cdFx0Y29udGludWU7XG5cdCAgfVxuXG5cdCAgY29uc3QgY3VzdG9tID0gdGhpcy5zZXR0aW5ncy5jdXN0b21QYXRocy5maW5kKChjKSA9PiBjLm1hbmlmZXN0S2V5ID09PSBlbnRyeS5rZXkpO1xuXHQgIGNvbnN0IGlzSW5EZW55Rm9sZGVyID0gZGVueUxpc3RlZEZvbGRlcnMuc29tZSgoZm9sZGVyKSA9PlxuXHRcdGVudHJ5LnBhdGguc3RhcnRzV2l0aChmb2xkZXIgKyAnLycpXG5cdCAgKTtcblx0ICBpZiAoY3VzdG9tPy5kb1VwZGF0ZSA9PT0gZmFsc2UgfHwgaXNJbkRlbnlGb2xkZXIpIHtcblx0XHRjb250aW51ZTtcblx0ICB9XG5cblx0ICBjb25zdCB2YXVsdFBhdGggPSBjdXN0b20/LnZhdWx0UGF0aCA/PyB0aGlzLnJlc29sdmVWYXVsdFBhdGgoZW50cnkucGF0aCk7XG5cdCAgY29uc3QgZXhpc3RzID0gYXdhaXQgdGhpcy5hcHAudmF1bHQuYWRhcHRlci5leGlzdHModmF1bHRQYXRoKTtcblx0ICBjb25zdCB1cFRvRGF0ZSA9IGV4aXN0cyAmJiAoYXdhaXQgdGhpcy5maWxlQ2FjaGVNYW5hZ2VyLmlzVXBUb0RhdGUodmF1bHRQYXRoKSk7XG5cblx0ICBsZXQgdGFnID0gJyc7XG5cdCAgaWYgKHZhdWx0UGF0aCAhPT0gZW50cnkucGF0aCkgdGFnID0gJyAocmVtYXBwZWQpJztcblxuXHQgIGlmICghZXhpc3RzKSB7XG5cdFx0cHJldmlld0xpc3QucHVzaCh7XG5cdFx0ICBmaWxlUGF0aDogdmF1bHRQYXRoLFxuXHRcdCAgYWN0aW9uOiBgbmV3IGZpbGUke3RhZ31gLFxuXHRcdCAgc2VsZWN0ZWQ6IHRydWUsXG5cdFx0fSk7XG5cdCAgfSBlbHNlIGlmICghdXBUb0RhdGUpIHtcblx0XHRwcmV2aWV3TGlzdC5wdXNoKHtcblx0XHQgIGZpbGVQYXRoOiB2YXVsdFBhdGgsXG5cdFx0ICBhY3Rpb246IGB3aWxsIGJlIG92ZXJ3cml0dGVuJHt0YWd9YCxcblx0XHQgIHNlbGVjdGVkOiB0cnVlLFxuXHRcdH0pO1xuXHQgIH1cblx0fVxuXG5cdGZvciAoY29uc3QgZW50cnkgb2YgdGhpcy5tYW5pZmVzdENhY2hlLmZvbGRlcnMpIHtcblx0ICAvLyBcdTI1MDBcdTI1MDAgU0tJUCBhbnkgb3B0aW9uYWw6dHJ1ZSBmb2xkZXJcblx0ICBpZiAoZW50cnkub3B0aW9uYWwpIHtcblx0XHRjb250aW51ZTtcblx0ICB9XG5cblx0ICBjb25zdCBpc0RlbnlGb2xkZXIgPSBkZW55TGlzdGVkRm9sZGVycy5pbmNsdWRlcyhlbnRyeS5wYXRoKTtcblx0ICBpZiAoIShhd2FpdCB0aGlzLmFwcC52YXVsdC5hZGFwdGVyLmV4aXN0cyhlbnRyeS5wYXRoKSkgJiYgIWlzRGVueUZvbGRlcikge1xuXHRcdHByZXZpZXdMaXN0LnB1c2goe1xuXHRcdCAgZmlsZVBhdGg6IGVudHJ5LnBhdGgsXG5cdFx0ICBhY3Rpb246ICdtaXNzaW5nIGZvbGRlciAod2lsbCBiZSBjcmVhdGVkKScsXG5cdFx0ICBzZWxlY3RlZDogdHJ1ZSxcblx0XHQgIGlzRm9sZGVyOiB0cnVlLFxuXHRcdH0pO1xuXHQgIH1cblx0fVxuXG5cdC8vIDNjKSBcdTIwMUNNb3ZlZFx1MjAxRCBkZXRlY3Rpb24gKHNraXAgYmxhY2tsaXN0ZWQpXG5cdGZvciAoY29uc3QgZiBvZiB0aGlzLm1hbmlmZXN0Q2FjaGUuZmlsZXMpIHtcblx0ICAvLyBcdTI1MDBcdTI1MDAgU0tJUCBhbnkgb3B0aW9uYWw6dHJ1ZSBmaWxlXG5cdCAgaWYgKGYub3B0aW9uYWwpIHtcblx0XHRjb250aW51ZTtcblx0ICB9XG5cblx0ICBjb25zdCBtYW5pZmVzdEtleSA9IGYua2V5O1xuXHQgIGNvbnN0IG1hbmlmZXN0UGF0aCA9IGYucGF0aDtcblx0ICBjb25zdCBjdXN0b20gPSB0aGlzLnNldHRpbmdzLmN1c3RvbVBhdGhzLmZpbmQoKGMpID0+IGMubWFuaWZlc3RLZXkgPT09IG1hbmlmZXN0S2V5KTtcblx0ICBjb25zdCBwcmV2UGF0aCA9IHRoaXMub2xkUGF0aHNCeUdpdGh1YlttYW5pZmVzdFBhdGhdO1xuXG5cdCAgY29uc3QgaXNJbkRlbnlGb2xkZXIgPSBkZW55TGlzdGVkRm9sZGVycy5zb21lKChmb2xkZXIpID0+XG5cdFx0bWFuaWZlc3RQYXRoLnN0YXJ0c1dpdGgoZm9sZGVyICsgJy8nKVxuXHQgICk7XG5cdCAgaWYgKGN1c3RvbT8uZG9VcGRhdGUgPT09IGZhbHNlIHx8IGlzSW5EZW55Rm9sZGVyKSB7XG5cdFx0Y29udGludWU7XG5cdCAgfVxuXHQgIGlmIChjdXN0b20gJiYgY3VzdG9tLnZhdWx0UGF0aCAmJiBjdXN0b20udmF1bHRQYXRoICE9PSBtYW5pZmVzdFBhdGgpIHtcblx0XHRjb250aW51ZTtcblx0ICB9XG5cdCAgaWYgKFxuXHRcdHByZXZQYXRoICYmXG5cdFx0cHJldlBhdGggIT09IG1hbmlmZXN0UGF0aCAmJlxuXHRcdCghY3VzdG9tIHx8IGN1c3RvbS52YXVsdFBhdGggPT09IG1hbmlmZXN0UGF0aClcblx0ICApIHtcblx0XHRwcmV2aWV3TGlzdC5wdXNoKHtcblx0XHQgIGZpbGVQYXRoOiBwcmV2UGF0aCxcblx0XHQgIGFjdGlvbjogYG1vdmVkIFx1MjE5MiAke21hbmlmZXN0UGF0aH1gLFxuXHRcdCAgc2VsZWN0ZWQ6IHRydWUsXG5cdFx0fSk7XG5cdCAgfVxuXHR9XG5cblx0cmV0dXJuIHByZXZpZXdMaXN0O1xuICB9XG5cbiAgXG4gIFxuICBcbiAgYXN5bmMgZm9yY2VVcGRhdGVQcmV2aWV3QW5kQ29uZmlybSgpIHtcblx0Ly8gMSkgQnVpbGQgdGhlIGZsYXQgbGlzdCBvZiBQcmV2aWV3SXRlbSBvYmplY3RzXG5cdGNvbnN0IHByZXZpZXdMaXN0ID0gYXdhaXQgdGhpcy5idWlsZEZvcmNlVXBkYXRlUHJldmlldygpO1xuICBcblx0Ly8gMikgU3BsaXQgdGhlIGl0ZW1zIGludG8gXHUyMDFDZGVueS1saXN0ZWRcdTIwMUQgdnMuIFx1MjAxQ25vcm1hbFx1MjAxRCBpdGVtc1xuXHQvLyAgICAoYnVpbGRGb3JjZVVwZGF0ZVByZXZpZXcgdXNlcyBhY3Rpb24gPSAnZGVueS1saXN0ZWQgXHUyMDEzIHdpbGwgbm90IHVwZGF0ZScpXG5cdGNvbnN0IGRlbnlJdGVtczogUHJldmlld0l0ZW1bXSA9IFtdO1xuXHRjb25zdCBub3JtYWxJdGVtczogUHJldmlld0l0ZW1bXSA9IFtdO1xuXHRmb3IgKGNvbnN0IGl0ZW0gb2YgcHJldmlld0xpc3QpIHtcblx0ICBpZiAoaXRlbS5hY3Rpb24uc3RhcnRzV2l0aCgnZGVueS1saXN0ZWQnKSkge1xuXHRcdGRlbnlJdGVtcy5wdXNoKGl0ZW0pO1xuXHQgIH0gZWxzZSB7XG5cdFx0bm9ybWFsSXRlbXMucHVzaChpdGVtKTtcblx0ICB9XG5cdH1cbiAgXG5cdC8vIDMpIENyZWF0ZSBhbmQgb3BlbiB0aGUgbW9kYWwgd2l0aCBib3RoIGxpc3RzXG5cdGNvbnN0IG1vZGFsID0gbmV3IChjbGFzcyBleHRlbmRzIE1vZGFsIHtcblx0ICBwbHVnaW46IFZWdW5kZXJsb3JlVG9vbGtpdFBsdWdpbjtcblx0ICBub3JtYWw6IFByZXZpZXdJdGVtW107XG5cdCAgZGVuaWVkOiBQcmV2aWV3SXRlbVtdO1xuICBcblx0ICBjb25zdHJ1Y3RvcihhcHA6IEFwcCwgbm9ybWFsOiBQcmV2aWV3SXRlbVtdLCBkZW5pZWQ6IFByZXZpZXdJdGVtW10pIHtcblx0XHRzdXBlcihhcHApO1xuXHRcdHRoaXMubm9ybWFsID0gbm9ybWFsO1xuXHRcdHRoaXMuZGVuaWVkID0gZGVuaWVkO1xuXHQgIH1cbiAgXG5cdCAgb25PcGVuKCkge1xuXHRcdC8vIFByZXZlbnQgY2xpY2tzIGZyb20gY2xvc2luZyBhbnl0aGluZyBiZWhpbmRcblx0XHR0aGlzLmNvbnRlbnRFbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiBlLnN0b3BQcm9wYWdhdGlvbigpKTtcblx0XHR0aGlzLmNvbnRlbnRFbC5lbXB0eSgpO1xuXHRcdHRoaXMudGl0bGVFbC5zZXRUZXh0KCdGb3JjZSBVcGRhdGUgUHJldmlldycpO1xuICBcblx0XHQvLyBJbnRybyBwYXJhZ3JhcGhcblx0XHR0aGlzLmNvbnRlbnRFbC5jcmVhdGVFbCgncCcsIHtcblx0XHQgIHRleHQ6XG5cdFx0XHQnVGhlIGZvbGxvd2luZyBpdGVtcyB3aWxsIGJlIHVwZGF0ZWQuIFVuY2hlY2sgYW55IGl0ZW1zIHlvdSBkbyBOT1Qgd2FudCB0byBjaGFuZ2UsIHRoZW4gY2xpY2sgXCJDb25maXJtIGFuZCBVcGRhdGVcIi4nLFxuXHRcdH0pO1xuICBcblx0XHQvLyA0KSBSZW5kZXIgXHUyMDFDbm9ybWFsXHUyMDFEIChub24tZGVueSkgaXRlbXMgd2l0aCBjaGVja2JveGVzXG5cdFx0aWYgKHRoaXMubm9ybWFsLmxlbmd0aCkge1xuXHRcdCAgY29uc3Qgbm9ybWFsQ29udGFpbmVyID0gdGhpcy5jb250ZW50RWwuY3JlYXRlRWwoJ2RpdicpO1xuXHRcdCAgT2JqZWN0LmFzc2lnbihub3JtYWxDb250YWluZXIuc3R5bGUsIHtcblx0XHRcdG1heEhlaWdodDogJzMwMHB4Jyxcblx0XHRcdG92ZXJmbG93WTogJ2F1dG8nLFxuXHRcdFx0bWFyZ2luVG9wOiAnMWVtJyxcblx0XHQgIH0pO1xuICBcblx0XHQgIHRoaXMubm9ybWFsLmZvckVhY2goKGl0ZW0pID0+IHtcblx0XHRcdGNvbnN0IHJvdyA9IG5vcm1hbENvbnRhaW5lci5jcmVhdGVEaXYoKTtcblx0XHRcdE9iamVjdC5hc3NpZ24ocm93LnN0eWxlLCB7XG5cdFx0XHQgIGRpc3BsYXk6ICdmbGV4Jyxcblx0XHRcdCAgYWxpZ25JdGVtczogJ2ZsZXgtc3RhcnQnLFxuXHRcdFx0ICBqdXN0aWZ5Q29udGVudDogJ3NwYWNlLWJldHdlZW4nLFxuXHRcdFx0ICBwYWRkaW5nOiAnNnB4IDAnLFxuXHRcdFx0ICBmb250RmFtaWx5OiAnbW9ub3NwYWNlJyxcblx0XHRcdH0pO1xuICBcblx0XHRcdC8vIExlZnQ6IGZpbGUgcGF0aCArIGFjdGlvbiBub3RlXG5cdFx0XHRjb25zdCBsYWJlbCA9IHJvdy5jcmVhdGVEaXYoKTtcbiAgICAgIGxhYmVsLmFkZENsYXNzKFwiZm9yY2V1cGRhdGUtZmxleGNvbHVtblwiKTtcbiAgXG5cdFx0XHRjb25zdCBsYWJlbFdyYXBwZXIgPSBsYWJlbC5jcmVhdGVEaXYoKTtcblx0XHRcdGxhYmVsV3JhcHBlci50ZXh0Q29udGVudCA9IGl0ZW0uZmlsZVBhdGg7XG4gIFxuXHRcdFx0Y29uc3Qgbm90ZSA9IGxhYmVsLmNyZWF0ZURpdih7IHRleHQ6IGl0ZW0uYWN0aW9uIH0pO1xuXHRcdFx0bm90ZS5hZGRDbGFzcyhcImZvcmNldXBkYXRlLW5vdGVcIik7XG4gIFxuXHRcdFx0Ly8gUmlnaHQ6IGNoZWNrYm94XG5cdFx0XHRjb25zdCBjaGVja2JveCA9IHJvdy5jcmVhdGVFbCgnaW5wdXQnLCB7IHR5cGU6ICdjaGVja2JveCcgfSk7XG5cdFx0XHRjaGVja2JveC5jaGVja2VkID0gaXRlbS5zZWxlY3RlZDtcblx0XHRcdGNoZWNrYm94Lm9uY2hhbmdlID0gKCkgPT4ge1xuXHRcdFx0ICBpdGVtLnNlbGVjdGVkID0gY2hlY2tib3guY2hlY2tlZDtcblx0XHRcdH07XG5cdFx0ICB9KTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0Y29uc3Qgbm9DYW5kaWRhdGVzID0gdGhpcy5jb250ZW50RWwuY3JlYXRlRWwoJ2RpdicpO1xuXHRcdFx0T2JqZWN0LmFzc2lnbihub0NhbmRpZGF0ZXMuc3R5bGUsIHtcblx0XHRcdCAgZGlzcGxheTogJ2lubGluZS1ibG9jaycsXG5cdFx0XHQgIGZvbnRGYW1pbHk6ICdtb25vc3BhY2UnLFxuXHRcdFx0ICBmb250U3R5bGU6ICdpdGFsaWMnLFxuXHRcdFx0ICBtYXJnaW5Ub3A6ICcwLjVlbScsXG5cdFx0XHR9KTtcblx0XHRcdG5vQ2FuZGlkYXRlcy50ZXh0Q29udGVudCA9ICdObyBmb3JjZS11cGRhdGUgY2FuZGlkYXRlcy4nO1xuXHRcdH1cbiAgXG5cdFx0Ly8gNSkgUmVuZGVyIFx1MjAxQ2RlbnktbGlzdGVkXHUyMDFEIGl0ZW1zIGluc2lkZSBhIGNvbGxhcHNlZCA8ZGV0YWlscz5cblx0XHRpZiAodGhpcy5kZW5pZWQubGVuZ3RoKSB7XG5cdFx0ICBjb25zdCBkZW55RGV0YWlscyA9IHRoaXMuY29udGVudEVsLmNyZWF0ZUVsKCdkZXRhaWxzJywgeyBjbHM6ICd2ay1zZWN0aW9uJyB9KTtcblx0XHQgIGRlbnlEZXRhaWxzLm9wZW4gPSBmYWxzZTtcbiAgXG5cdFx0ICBjb25zdCBzdW1tYXJ5ID0gZGVueURldGFpbHMuY3JlYXRlRWwoJ3N1bW1hcnknLCB7IGNsczogJ3ZrLXNlY3Rpb24taGVhZGVyJyB9KTtcblx0XHQgIE9iamVjdC5hc3NpZ24oc3VtbWFyeS5zdHlsZSwge1xuXHRcdFx0Y3Vyc29yOiAncG9pbnRlcicsXG5cdFx0XHRkaXNwbGF5OiAnZmxleCcsXG5cdFx0XHRjb2xvcjogJ3ZhcigtLXRleHQtZmFpbnQpJyxcblx0XHRcdGFsaWduSXRlbXM6ICdjZW50ZXInLFxuXHRcdFx0Z2FwOiAnMC41ZW0nLFxuXHRcdFx0bWFyZ2luVG9wOiAnMWVtJyxcblx0XHQgIH0pO1xuXHRcdCAgc3VtbWFyeS5jcmVhdGVFbCgnc3BhbicsIHsgdGV4dDogYERlbnktTGlzdCBGaWxlcyAoJHt0aGlzLmRlbmllZC5sZW5ndGh9KWAgfSk7XG4gIFxuXHRcdCAgLy8gUm90YXRpbmcgXHUyMDFDVlZcdTIwMUQgaWNvbiBvbiBleHBhbmQvY29sbGFwc2Vcblx0XHQgIGNvbnN0IHRvZ2dsZUljb24gPSBzdW1tYXJ5LmNyZWF0ZUVsKCdzcGFuJywgeyB0ZXh0OiAnVlYnLCBjbHM6ICd2ay10b2dnbGUtaWNvbicgfSk7XG5cdFx0ICBPYmplY3QuYXNzaWduKHRvZ2dsZUljb24uc3R5bGUsIHtcblx0XHRcdGZvbnRXZWlnaHQ6ICdib2xkJyxcblx0XHRcdGRpc3BsYXk6ICdpbmxpbmUtYmxvY2snLFxuXHRcdFx0dHJhbnNpdGlvbjogJ3RyYW5zZm9ybSAwLjJzIGVhc2UnLFxuXHRcdFx0dHJhbnNmb3JtT3JpZ2luOiAnNTAlIDUwJScsXG5cdFx0XHR1c2VyU2VsZWN0OiAnbm9uZScsXG5cdFx0XHR0cmFuc2Zvcm06ICdyb3RhdGUoMTgwZGVnKScsXG5cdFx0ICB9KTtcblx0XHQgIGRlbnlEZXRhaWxzLm9udG9nZ2xlID0gKCkgPT4ge1xuXHRcdFx0dG9nZ2xlSWNvbi50b2dnbGVDbGFzcyhcInZ2LXJvdGF0ZWRcIiwgIWRlbnlEZXRhaWxzLm9wZW4pO1xuXHRcdCAgfTtcbiAgXG5cdFx0ICAvLyBCb2R5IG9mIDxkZXRhaWxzPiBcdTIwMTQgZWFjaCBkZW55LWxpc3RlZCBpdGVtIGlzIGZhaW50IGFuZCBkaXNhYmxlZFxuXHRcdCAgY29uc3QgZGVueUJvZHkgPSBkZW55RGV0YWlscy5jcmVhdGVEaXYoeyBjbHM6ICd2ay1zZWN0aW9uLWJvZHknIH0pO1xuXHRcdCAgZGVueUJvZHkuYWRkQ2xhc3MoXCJkZW55bGlzdFwiKTtcbiAgXG5cdFx0ICB0aGlzLmRlbmllZC5mb3JFYWNoKChpdGVtKSA9PiB7XG5cdFx0XHRjb25zdCByb3cgPSBkZW55Qm9keS5jcmVhdGVEaXYoKTtcblx0XHRcdE9iamVjdC5hc3NpZ24ocm93LnN0eWxlLCB7XG5cdFx0XHQgIGRpc3BsYXk6ICdmbGV4Jyxcblx0XHRcdCAgYWxpZ25JdGVtczogJ2ZsZXgtc3RhcnQnLFxuXHRcdFx0ICBqdXN0aWZ5Q29udGVudDogJ3NwYWNlLWJldHdlZW4nLFxuXHRcdFx0ICBwYWRkaW5nOiAnNnB4IDAnLFxuXHRcdFx0ICBmb250RmFtaWx5OiAnbW9ub3NwYWNlJyxcblx0XHRcdCAgY29sb3I6ICd2YXIoLS10ZXh0LWZhaW50KScsXG5cdFx0XHQgIGZvbnRTdHlsZTogJ2l0YWxpYycsXG5cdFx0XHR9KTtcbiAgXG5cdFx0XHRjb25zdCBsYWJlbFdyYXBwZXIgPSByb3cuY3JlYXRlRGl2KCk7XG5cdFx0XHRsYWJlbFdyYXBwZXIudGV4dENvbnRlbnQgPSBpdGVtLmZpbGVQYXRoO1xuXHRcdFx0bGFiZWxXcmFwcGVyLmFkZENsYXNzKFwiZm9yY2V1cGRhdGUtbGFiZWx3cmFwcGVyXCIpO1xuICBcblx0XHRcdGNvbnN0IG5vdGUgPSByb3cuY3JlYXRlRGl2KHsgdGV4dDogaXRlbS5hY3Rpb24gfSk7XG5cdFx0XHRub3RlLmFkZENsYXNzKFwiZm9yY2V1cGRhdGUtbm90ZS1iXCIpO1xuICBcblx0XHRcdC8vIERlbnktbGlzdGVkIGNoZWNrYm94IGlzIGRpc2FibGVkXG5cdFx0XHRjb25zdCBjaGVja2JveCA9IHJvdy5jcmVhdGVFbCgnaW5wdXQnLCB7IHR5cGU6ICdjaGVja2JveCcgfSk7XG5cdFx0XHRjaGVja2JveC5jaGVja2VkID0gaXRlbS5zZWxlY3RlZDtcblx0XHRcdGNoZWNrYm94LmRpc2FibGVkID0gdHJ1ZTtcblx0XHRcdGNoZWNrYm94LnRpdGxlID0gJ1RoaXMgaXRlbSBpcyBkZW55LWxpc3RlZCc7XG5cdFx0ICB9KTtcblx0XHR9XG5cbiAgICBpZiAodGhpcy5wbHVnaW4uc2V0dGluZ3MucmVwYXJzZUdhbWVzZXRzKSB7XG4gICAgICAgIHRoaXMuY29udGVudEVsXG4gICAgICAgICAgLmNyZWF0ZURpdih7IGNsczogJ21vZC1hdXgtdGV4dCcgfSlcbiAgICAgICAgICAuc2V0VGV4dCgnXHVEODNEXHVERDA0IFJlZnJlc2hpbmcgR2FtZXNldCBEYXRhJyk7XG4gICAgICB9XG5cblx0XHQvLyA2KSBCdXR0b25zIGF0IHRoZSBib3R0b21cblx0XHRjb25zdCBidXR0b25Sb3cgPSB0aGlzLmNvbnRlbnRFbC5jcmVhdGVFbCgnZGl2Jyk7XG5cdFx0T2JqZWN0LmFzc2lnbihidXR0b25Sb3cuc3R5bGUsIHtcblx0XHQgIGRpc3BsYXk6ICdmbGV4Jyxcblx0XHQgIGp1c3RpZnlDb250ZW50OiAnZmxleC1lbmQnLFxuXHRcdCAgZ2FwOiAnMC41ZW0nLFxuXHRcdCAgbWFyZ2luVG9wOiAnMS41ZW0nLFxuXHRcdH0pO1xuICBcblx0XHRjb25zdCBjYW5jZWxCdG4gPSBidXR0b25Sb3cuY3JlYXRlRWwoJ2J1dHRvbicsIHsgdGV4dDogJ0NhbmNlbCcgfSk7XG5cdFx0Y2FuY2VsQnRuLm9uY2xpY2sgPSAoKSA9PiB0aGlzLmNsb3NlKCk7XG4gIFxuXHRcdGNvbnN0IGNvbmZpcm1CdG4gPSBidXR0b25Sb3cuY3JlYXRlRWwoJ2J1dHRvbicsIHtcblx0XHQgIHRleHQ6ICdDb25maXJtIGFuZCBVcGRhdGUnLFxuXHRcdCAgY2xzOiAnbW9kLWN0YScsXG5cdFx0fSk7XG5cdFx0Y29uZmlybUJ0bi5vbmNsaWNrID0gYXN5bmMgKCkgPT4ge1xuXHRcdCAgdGhpcy5jbG9zZSgpO1xuXHRcdCAgLy8gUGFzcyBldmVyeXRoaW5nIGludG8gcGVyZm9ybUZvcmNlVXBkYXRlV2l0aFNlbGVjdGlvbjsgZGVueS1saXN0ZWQgaXRlbXMgd2lsbCBiZSBza2lwcGVkXG5cdFx0ICBhd2FpdCB0aGlzLnBsdWdpbi5wZXJmb3JtRm9yY2VVcGRhdGVXaXRoU2VsZWN0aW9uKFsuLi50aGlzLm5vcm1hbCwgLi4udGhpcy5kZW5pZWRdKTtcblx0XHR9O1xuXHQgIH1cbiAgXG5cdCAgb25DbG9zZSgpIHtcblx0XHR0aGlzLmNvbnRlbnRFbC5lbXB0eSgpO1xuXHQgIH1cblx0fSkodGhpcy5hcHAsIG5vcm1hbEl0ZW1zLCBkZW55SXRlbXMpO1xuICBcblx0Ly8gQXR0YWNoIHBsdWdpbiBwb2ludGVyIGFuZCBvcGVuXG5cdChtb2RhbCBhcyBhbnkpLnBsdWdpbiA9IHRoaXM7XG5cdG1vZGFsLm9wZW4oKTtcbiAgfVxuICBcblxuICBhc3luYyB1cGRhdGVFbnRyeUZyb21NYW5pZmVzdChlbnRyeTogTWFuaWZlc3RGaWxlRW50cnksIGZvcmNlOiBib29sZWFuID0gZmFsc2UpIHtcbiAgICBjb25zdCBjdXN0b20gPSB0aGlzLnNldHRpbmdzLmN1c3RvbVBhdGhzLmZpbmQoKGMpID0+IGMubWFuaWZlc3RLZXkgPT09IGVudHJ5LmtleSk7XG4gICAgaWYgKGN1c3RvbT8uZG9VcGRhdGUgPT09IGZhbHNlKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgZmluYWxWYXVsdFBhdGggPSBjdXN0b20/LnZhdWx0UGF0aCA/PyB0aGlzLnJlc29sdmVWYXVsdFBhdGgoZW50cnkucGF0aCk7XG4gICAgaWYgKCFmb3JjZSAmJiAoYXdhaXQgdGhpcy5maWxlQ2FjaGVNYW5hZ2VyLmlzVXBUb0RhdGUoZmluYWxWYXVsdFBhdGgpKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IHVybCA9IGBodHRwczovL3Jhdy5naXRodWJ1c2VyY29udGVudC5jb20vc2xhbXdpc2UwMDAxL3Z2dW5kZXJsb3JlLXRvb2xraXQtZnVsbC9tYWluLyR7ZW50cnkucGF0aH1gO1xuICAgIHRyeSB7XG4gICAgICBjb25zdCByZXMgPSBhd2FpdCBmZXRjaCh1cmwpO1xuICAgICAgY29uc3QgdGV4dCA9IGF3YWl0IHJlcy50ZXh0KCk7XG4gICAgICBhd2FpdCB0aGlzLmFwcC52YXVsdC5hZGFwdGVyLndyaXRlKGZpbmFsVmF1bHRQYXRoLCB0ZXh0KTtcbiAgICAgIGF3YWl0IHRoaXMuZmlsZUNhY2hlTWFuYWdlci51cGRhdGVDYWNoZShmaW5hbFZhdWx0UGF0aCwgdGV4dCwgZW50cnkucGF0aCk7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgY29uc29sZS5lcnJvcihgXHUyNzRDIEVycm9yIHVwZGF0aW5nICR7ZW50cnkuZGlzcGxheU5hbWV9OmAsIGUpO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIHBlcmZvcm1Gb3JjZVVwZGF0ZVdpdGhTZWxlY3Rpb24ocHJldmlld0xpc3Q6IFByZXZpZXdJdGVtW10pIHtcbiAgICBpZiAodGhpcy5zZXR0aW5ncy5hdXRvQmFja3VwQmVmb3JlVXBkYXRlKSB7XG4gICAgICAvLyBcdTIwMjYgKHlvdXIgZXhpc3RpbmcgYmFja3VwIGNvZGUpIFx1MjAyNlxuICAgIH1cblxuICAgIHRoaXMuc2V0dGluZ3MuYmFja3VwRmlsZXMgPSB7fTtcbiAgICBhd2FpdCB0aGlzLnNhdmVTZXR0aW5ncygpO1xuXG4gICAgdHJ5IHtcbiAgICAgIC8vIFx1MjQ2MCBGaWx0ZXIgb3V0IGZvbGRlcnMsIHVuY2hlY2tlZCwgYW5kIGRlbnktbGlzdGVkOlxuICAgICAgY29uc3QgdG9VcGRhdGUgPSBwcmV2aWV3TGlzdC5maWx0ZXIoXG4gICAgICAgIChpdGVtKSA9PlxuICAgICAgICAgIGl0ZW0uc2VsZWN0ZWQgJiZcbiAgICAgICAgICAhaXRlbS5pc0ZvbGRlciAmJlxuICAgICAgICAgICF0aGlzLnNldHRpbmdzLmN1c3RvbVBhdGhzLnNvbWUoXG4gICAgICAgICAgICAoYykgPT4gYy52YXVsdFBhdGggPT09IGl0ZW0uZmlsZVBhdGggJiYgYy5kb1VwZGF0ZSA9PT0gZmFsc2VcbiAgICAgICAgICApXG4gICAgICApO1xuXG4gICAgICAvLyBcdTI0NjEgVXBkYXRlIGVhY2ggc2VsZWN0ZWQgZmlsZVxuICAgICAgZm9yIChjb25zdCBpdGVtIG9mIHRvVXBkYXRlKSB7XG4gICAgICAgIGNvbnN0IGVudHJ5ID0gdGhpcy5tYW5pZmVzdENhY2hlLmZpbGVzLmZpbmQoXG4gICAgICAgICAgKGYpID0+IHRoaXMucmVzb2x2ZVZhdWx0UGF0aChmLnBhdGgpID09PSBpdGVtLmZpbGVQYXRoXG4gICAgICAgICk7XG4gICAgICAgIGlmICghZW50cnkpIHtcbiAgICAgICAgICBjb25zb2xlLndhcm4oYFx1MjZBMFx1RkUwRiBDb3VsZCBub3QgbWF0Y2ggcHJldmlldyBpdGVtIHRvIG1hbmlmZXN0OiAke2l0ZW0uZmlsZVBhdGh9YCk7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgYXdhaXQgdGhpcy51cGRhdGVFbnRyeUZyb21NYW5pZmVzdChlbnRyeSwgdHJ1ZSk7XG4gICAgICB9XG5cbiAgICAgIC8vIFx1MjQ2MiBFbnN1cmUgYWxsIG1hbmlmZXN0IGZvbGRlcnMgZXhpc3RcbiAgICAgIGZvciAoY29uc3QgZW50cnkgb2YgdGhpcy5tYW5pZmVzdENhY2hlLmZvbGRlcnMpIHtcbiAgICAgICAgaWYgKCEoYXdhaXQgdGhpcy5hcHAudmF1bHQuYWRhcHRlci5leGlzdHMoZW50cnkucGF0aCkpKSB7XG4gICAgICAgICAgYXdhaXQgdGhpcy5hcHAudmF1bHQuY3JlYXRlRm9sZGVyKGVudHJ5LnBhdGgpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIDQpIEJ1bXAgdmVyc2lvblxuICAgICAgYXdhaXQgdGhpcy51cGRhdGVWZXJzaW9uRmlsZSgpO1xuICAgICAgdGhpcy5zZXR0aW5ncy5pbnN0YWxsZWRWZXJzaW9uID0gdGhpcy5zZXR0aW5ncy5sYXRlc3RUb29sa2l0VmVyc2lvbiA/PyAndW5rbm93bic7XG4gICAgICB0aGlzLnNldHRpbmdzLmxhc3RGb3JjZVVwZGF0ZSA9IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKTtcbiAgICAgIGF3YWl0IHRoaXMuc2F2ZVNldHRpbmdzKCk7XG5cbiAgICAgIG5ldyBOb3RpY2UoJ1x1MjcwNSBUb29sa2l0IGZvcmNlXHUyMDEwdXBkYXRlZCB3aXRoIHlvdXIgc2VsZWN0aW9ucy4nKTtcblxuICAgICAgICAgIGlmICh0aGlzLnNldHRpbmdzLnJlcGFyc2VHYW1lc2V0cykge1xuICAgICAgbmV3IE5vdGljZSgnXHVEODNEXHVERDA0IFJlZnJlc2hpbmcgR2FtZSBTZXQgRGF0YVx1MjAyNicpO1xuICAgICAgYXdhaXQgdGhpcy5yZWZyZXNoR2FtZVNldERhdGEoKTtcbiAgICB9XG5cbiAgICAgIGlmICh0aGlzLnNldHRpbmdzVGFiKSB7XG4gICAgICAgIGF3YWl0IHRoaXMuc2V0dGluZ3NUYWIudXBkYXRlVmVyc2lvbkRpc3BsYXkoKTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ1x1Mjc0QyBGb3JjZSB1cGRhdGUgZmFpbGVkLiBWZXJzaW9uIG5vdCBjaGFuZ2VkLicsIGVycik7XG4gICAgICBuZXcgTm90aWNlKCdcdTI3NEMgT25lIG9yIG1vcmUgZmlsZXMgZmFpbGVkLiBWZXJzaW9uIE5PVCB1cGRhdGVkLicpO1xuICAgIH1cblxuICAgIGlmICh0aGlzLnNldHRpbmdzLmhpZ2hsaWdodEVuYWJsZWQpIHtcbiAgICAgIHRoaXMuZW5hYmxlSGlnaGxpZ2h0KCk7XG4gICAgfVxuICB9XG5cbiAgLy8gXHUyNTAwXHUyNTAwXHUyNTAwIFNJTkdMRS1GSUxFIFVQREFURSAod2l0aCBHaXRIdWIgQVBJICsgcmF3IGZhbGxiYWNrKSBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcblxuICBhc3luYyB1cGRhdGVTaW5nbGVGaWxlRnJvbUdpdEh1YihcbiAgICB7IGdpdGh1YlBhdGgsIHZhdWx0UGF0aCB9OiB7IGdpdGh1YlBhdGg6IHN0cmluZzsgdmF1bHRQYXRoOiBzdHJpbmcgfSxcbiAgICBmb3JjZTogYm9vbGVhbiA9IGZhbHNlXG4gICkge1xuICAgIGlmICh0aGlzLnNldHRpbmdzLmN1c3RvbWl6ZVVwZGF0ZXMpIHtcbiAgICAgIHZhdWx0UGF0aCA9IHRoaXMucmVzb2x2ZVZhdWx0UGF0aChnaXRodWJQYXRoKTtcbiAgICAgIGNvbnN0IGN1c3RvbSA9IHRoaXMuc2V0dGluZ3MuY3VzdG9tUGF0aHMuZmluZCgoYykgPT4gYy5tYW5pZmVzdEtleSA9PT0gZ2l0aHViUGF0aCk7XG4gICAgICBpZiAoY3VzdG9tPy5kb1VwZGF0ZSA9PT0gZmFsc2UpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICB2YXVsdFBhdGggPSBnaXRodWJQYXRoO1xuICAgIH1cblxuICAgIGlmICghdmF1bHRQYXRoKSB7XG4gICAgICBjb25zb2xlLmVycm9yKGBcdTI3NEMgTm8gdmFsaWQgdmF1bHQgcGF0aCByZXNvbHZlZCBmb3IgJHtnaXRodWJQYXRofWApO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIDEpIEhhbmRsZSBsb2NhbCByZW5hbWVzIGZpcnN0XG4gICAgY29uc3Qgb2xkVmF1bHQgPSB0aGlzLm9sZFBhdGhzQnlHaXRodWJbZ2l0aHViUGF0aF07XG4gICAgaWYgKG9sZFZhdWx0ICYmIG9sZFZhdWx0ICE9PSB2YXVsdFBhdGgpIHtcbiAgICAgIGlmIChhd2FpdCB0aGlzLmFwcC52YXVsdC5hZGFwdGVyLmV4aXN0cyh2YXVsdFBhdGgpKSB7XG4gICAgICAgIGNvbnN0IHN0cmF5ID0gYXdhaXQgdGhpcy5hcHAudmF1bHQuYWRhcHRlci5yZWFkKHZhdWx0UGF0aCk7XG4gICAgICAgIGF3YWl0IHRoaXMuYmFja3VwRmlsZSh2YXVsdFBhdGgsIHN0cmF5KTtcbiAgICAgICAgYXdhaXQgdGhpcy5hcHAudmF1bHQuYWRhcHRlci5yZW1vdmUodmF1bHRQYXRoKTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IG9sZEZpbGUgPSB0aGlzLmFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgob2xkVmF1bHQpO1xuICAgICAgaWYgKG9sZEZpbGUgaW5zdGFuY2VvZiBURmlsZSkge1xuICAgICAgICBhd2FpdCB0aGlzLmFwcC52YXVsdC5yZW5hbWUob2xkRmlsZSwgdmF1bHRQYXRoKTtcbiAgICAgICAgY29uc3QgbmV3Q29udGVudCA9IGF3YWl0IHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXIucmVhZCh2YXVsdFBhdGgpO1xuICAgICAgICBhd2FpdCB0aGlzLmZpbGVDYWNoZU1hbmFnZXIudXBkYXRlQ2FjaGUodmF1bHRQYXRoLCBuZXdDb250ZW50LCBnaXRodWJQYXRoKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIDIpIEV4aXN0ZW5jZSwgYmFja3VwICYgc2tpcCBsb2dpY1xuICAgIGNvbnN0IGZpbGVFeGlzdHMgPSBhd2FpdCB0aGlzLmFwcC52YXVsdC5hZGFwdGVyLmV4aXN0cyh2YXVsdFBhdGgpO1xuICAgIGlmIChmb3JjZSAmJiBmaWxlRXhpc3RzKSB7XG4gICAgICBjb25zdCBjdXJyZW50ID0gYXdhaXQgdGhpcy5hcHAudmF1bHQuYWRhcHRlci5yZWFkKHZhdWx0UGF0aCk7XG4gICAgICBhd2FpdCB0aGlzLmJhY2t1cEZpbGUodmF1bHRQYXRoLCBjdXJyZW50KTtcbiAgICB9XG4gICAgaWYgKCFmb3JjZSAmJiBmaWxlRXhpc3RzICYmIChhd2FpdCB0aGlzLmZpbGVDYWNoZU1hbmFnZXIuaXNVcFRvRGF0ZSh2YXVsdFBhdGgpKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIDMpIEZldGNoIHZpYSBHaXRIdWIgQVBJLCBmYWxsYmFjayB0byByYXdcbiAgICBjb25zdCBhcGlVcmwgPSBlbmNvZGVVUkkoXG4gICAgICBgaHR0cHM6Ly9hcGkuZ2l0aHViLmNvbS9yZXBvcy9zbGFtd2lzZTAwMDEvVlZ1bmRlcmxvcmUtVG9vbGtpdC1GdWxsL2NvbnRlbnRzLyR7Z2l0aHViUGF0aH0/cmVmPW1haW5gXG4gICAgKTtcbiAgICB0cnkge1xuICAgICAgbGV0IHJlcyA9IGF3YWl0IGZldGNoKGFwaVVybCk7XG4gICAgICBpZiAocmVzLnN0YXR1cyA9PT0gNDA0KSB7XG4gICAgICAgIGNvbnN0IHJhd1VybCA9IGVuY29kZVVSSShcbiAgICAgICAgICBgaHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tL3NsYW13aXNlMDAwMS9WVnVuZGVybG9yZS1Ub29sa2l0LUZ1bGwvbWFpbi8ke2dpdGh1YlBhdGh9YFxuICAgICAgICApO1xuICAgICAgICByZXMgPSBhd2FpdCBmZXRjaChyYXdVcmwpO1xuICAgICAgICBpZiAoIXJlcy5vaykgdGhyb3cgbmV3IEVycm9yKGBSYXcgZmV0Y2ggZmFpbGVkOiAke3Jlcy5zdGF0dXNUZXh0fWApO1xuICAgICAgICBjb25zdCBjb250ZW50ID0gYXdhaXQgcmVzLnRleHQoKTtcbiAgICAgICAgaWYgKGZpbGVFeGlzdHMpIHtcbiAgICAgICAgICBhd2FpdCB0aGlzLmFwcC52YXVsdC5hZGFwdGVyLndyaXRlKHZhdWx0UGF0aCwgY29udGVudCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgYXdhaXQgdGhpcy5hcHAudmF1bHQuY3JlYXRlKHZhdWx0UGF0aCwgY29udGVudCk7XG4gICAgICAgIH1cbiAgICAgICAgYXdhaXQgdGhpcy5maWxlQ2FjaGVNYW5hZ2VyLnVwZGF0ZUNhY2hlKHZhdWx0UGF0aCwgY29udGVudCwgZ2l0aHViUGF0aCk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgaWYgKCFyZXMub2spIHRocm93IG5ldyBFcnJvcihgR2l0SHViIEFQSSBlcnJvcjogJHtyZXMuc3RhdHVzVGV4dH1gKTtcbiAgICAgIGNvbnN0IHsgZG93bmxvYWRfdXJsIH0gPSAoYXdhaXQgcmVzLmpzb24oKSkgYXMgeyBkb3dubG9hZF91cmw6IHN0cmluZyB9O1xuICAgICAgY29uc3QgY29udGVudCA9IGF3YWl0IChhd2FpdCBmZXRjaChkb3dubG9hZF91cmwpKS50ZXh0KCk7XG4gICAgICBpZiAoZmlsZUV4aXN0cykge1xuICAgICAgICBhd2FpdCB0aGlzLmFwcC52YXVsdC5hZGFwdGVyLndyaXRlKHZhdWx0UGF0aCwgY29udGVudCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBhd2FpdCB0aGlzLmFwcC52YXVsdC5jcmVhdGUodmF1bHRQYXRoLCBjb250ZW50KTtcbiAgICAgIH1cbiAgICAgIGF3YWl0IHRoaXMuZmlsZUNhY2hlTWFuYWdlci51cGRhdGVDYWNoZSh2YXVsdFBhdGgsIGNvbnRlbnQsIGdpdGh1YlBhdGgpO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoYFx1Mjc0QyBGYWlsZWQgdG8gdXBkYXRlICR7dmF1bHRQYXRofWAsIGUpO1xuICAgIH1cbiAgfVxuXG4gIC8vIFx1MjUwMFx1MjUwMFx1MjUwMCBQUkVWSUVXICsgUkVNT1RFLUJBU0VMSU5FICsgRElGRiBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcblxuICBhc3luYyBwcmV2aWV3VXBkYXRlc01vZGFsKCkge1xuXHQvLyBcdTIwMUNMb2FkaW5nXHUyMDI2XHUyMDFEIHBsYWNlaG9sZGVyIHdoaWxlIHN5bmNpbmdcblx0Y29uc3QgbG9hZGluZyA9IG5ldyAoY2xhc3MgZXh0ZW5kcyBNb2RhbCB7XG5cdCAgY29uc3RydWN0b3IoYXBwOiBBcHApIHtcblx0XHRzdXBlcihhcHApO1xuXHQgIH1cblx0ICBvbk9wZW4oKSB7XG5cdFx0dGhpcy5jb250ZW50RWwuZW1wdHkoKTtcblx0XHR0aGlzLmNvbnRlbnRFbFxuXHRcdCAgLmNyZWF0ZURpdih7XG5cdFx0XHR0ZXh0OiAnXHVEODNEXHVERDA0IENoZWNraW5nIGZvciB1cGRhdGVzXHUyMDI2Jyxcblx0XHRcdGNsczogJ21vZC13YXJuaW5nJyxcblx0XHQgIH0pXG5cdFx0ICAuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4gZS5zdG9wUHJvcGFnYXRpb24oKSk7XG5cdCAgfVxuXHR9KSh0aGlzLmFwcCk7XG4gIFxuXHRsb2FkaW5nLm9wZW4oKTtcblx0YXdhaXQgdGhpcy5zeW5jTWFuaWZlc3QoKTtcblx0YXdhaXQgdGhpcy5mZXRjaFJlbW90ZUJhc2VsaW5lKCk7XG5cdC8vIGJ1aWxkVXBkYXRlUHJldmlldygpIG5vdyByZXR1cm5zIG9ubHkgXHUyMDFDcmVhbFx1MjAxRCBkaWZmcyAobm8gc3RhbGUgZGVueVx1MjAxMGxpc3QpXG5cdGNvbnN0IGRpZmZzID0gYXdhaXQgdGhpcy5idWlsZFVwZGF0ZVByZXZpZXcoKTtcblx0bG9hZGluZy5jbG9zZSgpO1xuICBcblx0Ly8gU3BsaXQgb3V0IGRlbnlcdTIwMTBsaXN0ZWQgbGluZXMgdnMuIGV2ZXJ5dGhpbmcgZWxzZVxuXHRjb25zdCBkZW55TGlzdGVkTGluZXM6IHN0cmluZ1tdID0gW107XG5cdGNvbnN0IG5vcm1hbExpbmVzOiBzdHJpbmdbXSA9IFtdO1xuICBcblx0Zm9yIChjb25zdCBkIG9mIGRpZmZzKSB7XG5cdCAgaWYgKGQuc3RhcnRzV2l0aCgnXHUyNzRDIGRlbnlcdTIwMTBsaXN0ZWQnKSkge1xuXHRcdGRlbnlMaXN0ZWRMaW5lcy5wdXNoKGQpO1xuXHQgIH0gZWxzZSB7XG5cdFx0bm9ybWFsTGluZXMucHVzaChkKTtcblx0ICB9XG5cdH1cbiAgXG5cdC8vIE5vdyBjcmVhdGUgdGhlIG1vZGFsXG5cdGNvbnN0IG1vZGFsID0gbmV3IChjbGFzcyBleHRlbmRzIE1vZGFsIHtcblx0ICBwbHVnaW46IFZWdW5kZXJsb3JlVG9vbGtpdFBsdWdpbjtcblx0ICBub3JtYWw6IHN0cmluZ1tdO1xuXHQgIGRlbmllZDogc3RyaW5nW107XG4gIFxuXHQgIGNvbnN0cnVjdG9yKGFwcDogQXBwLCBub3JtYWw6IHN0cmluZ1tdLCBkZW5pZWQ6IHN0cmluZ1tdKSB7XG5cdFx0c3VwZXIoYXBwKTtcblx0XHR0aGlzLm5vcm1hbCA9IG5vcm1hbDtcblx0XHR0aGlzLmRlbmllZCA9IGRlbmllZDtcblx0ICB9XG4gIFxuXHQgIG9uT3BlbigpIHtcblx0XHR0aGlzLmNvbnRlbnRFbC5lbXB0eSgpO1xuXHRcdHRoaXMudGl0bGVFbC5zZXRUZXh0KCdVcGRhdGUgUHJldmlldycpO1xuICBcblx0XHQvLyBJbnRybyBwYXJhZ3JhcGhcblx0XHR0aGlzLmNvbnRlbnRFbC5jcmVhdGVFbCgncCcsIHtcblx0XHQgIHRleHQ6ICdPbmx5IGZpbGVzIHdob3NlIGNvbnRlbnRzIGRpZmZlciBmcm9tIEdpdEh1YiB3aWxsIGJlIHVwZGF0ZWQ6Jyxcblx0XHR9KTtcbiAgXG5cdFx0Ly8gMSkgSWYgdGhlcmUgYXJlIGFueSBcdTIwMUNub3JtYWxcdTIwMUQgZGlmZnMsIHJlbmRlciB0aGVtIGluIGEgYnVsbGV0IGxpc3Rcblx0XHRpZiAodGhpcy5ub3JtYWwubGVuZ3RoKSB7XG5cdFx0ICBjb25zdCB1bCA9IHRoaXMuY29udGVudEVsLmNyZWF0ZUVsKCd1bCcpO1xuXHRcdCAgdGhpcy5ub3JtYWwuZm9yRWFjaCgobGluZSkgPT4ge1xuXHRcdFx0Y29uc3QgbGkgPSB1bC5jcmVhdGVFbCgnbGknLCB7IHRleHQ6IGxpbmUgfSk7XG5cdFx0XHQvLyBObyBzcGVjaWFsIHN0eWxpbmcgZm9yIHRoZXNlOyB0aGV5IHNob3cgdXAgbm9ybWFsbHkuXG5cdFx0ICB9KTtcblx0XHR9IGVsc2Uge1xuXHRcdCAgLy8gSWYgbm8gbm9ybWFsIGRpZmZzLCBzYXkgXHUyMDFDVXAgdG8gZGF0ZVx1MjAxRFxuXHRcdCAgdGhpcy5jb250ZW50RWwuY3JlYXRlRWwoJ2RpdicsIHtcblx0XHRcdHRleHQ6ICdcdTI3MDUgRXZlcnl0aGluZyBpcyBhbHJlYWR5IHVwIHRvIGRhdGUhJyxcblx0XHRcdGNsczogJ21vZC1pbmZvJyxcblx0XHQgIH0pO1xuXHRcdH1cbiAgXG5cdFx0Ly8gMikgSWYgdGhlcmUgYXJlIGFueSBkZW55XHUyMDEwbGlzdGVkIGxpbmVzLCB0dWNrIHRoZW0gaW50byBhIDxkZXRhaWxzPiBibG9ja1xuXHRcdGlmICh0aGlzLmRlbmllZC5sZW5ndGgpIHtcblx0XHQgIGNvbnN0IGRlbnlEZXRhaWxzID0gdGhpcy5jb250ZW50RWwuY3JlYXRlRWwoJ2RldGFpbHMnLCB7IGNsczogJ3ZrLXNlY3Rpb24nIH0pO1xuXHRcdCAgLy8gQWx3YXlzIHN0YXJ0IGNvbGxhcHNlZCBieSBkZWZhdWx0XG5cdFx0ICBkZW55RGV0YWlscy5vcGVuID0gZmFsc2U7XG4gIFxuXHRcdCAgLy8gU3VtbWFyeSBsaW5lOiBzaG93cyBcdTIwMUNEZW55XHUyMDEwTGlzdCBGaWxlcyAobilcdTIwMURcblx0XHQgIGNvbnN0IHN1bW1hcnkgPSBkZW55RGV0YWlscy5jcmVhdGVFbCgnc3VtbWFyeScsIHsgY2xzOiAndmstc2VjdGlvbi1oZWFkZXInIH0pO1xuXHRcdCAgT2JqZWN0LmFzc2lnbihzdW1tYXJ5LnN0eWxlLCB7XG5cdFx0XHRjdXJzb3I6ICdwb2ludGVyJyxcblx0XHRcdGRpc3BsYXk6ICdmbGV4Jyxcblx0XHRcdGNvbG9yOiAndmFyKC0tdGV4dC1mYWludCknLFxuXHRcdFx0YWxpZ25JdGVtczogJ2NlbnRlcicsXG5cdFx0XHRnYXA6ICcwLjVlbScsXG5cdFx0ICB9KTtcblx0XHQgIHN1bW1hcnkuY3JlYXRlRWwoJ3NwYW4nLCB7IHRleHQ6IGBEZW55XHUyMDEwTGlzdCBGaWxlcyAoJHt0aGlzLmRlbmllZC5sZW5ndGh9KWAgfSk7XG4gIFxuXHRcdCAgLy8gUmlnaHRcdTIwMTBzaWRlIGljb24gcm90YXRpbmcgb24gZXhwYW5kL2NvbGxhcHNlXG5cdFx0ICBjb25zdCB0b2dnbGVJY29uID0gc3VtbWFyeS5jcmVhdGVFbCgnc3BhbicsIHsgdGV4dDogJ1ZWJywgY2xzOiAndmstdG9nZ2xlLWljb24nIH0pO1xuXHRcdCAgT2JqZWN0LmFzc2lnbih0b2dnbGVJY29uLnN0eWxlLCB7XG5cdFx0XHRmb250V2VpZ2h0OiAnYm9sZCcsXG5cdFx0XHRkaXNwbGF5OiAnaW5saW5lLWJsb2NrJyxcblx0XHRcdHRyYW5zaXRpb246ICd0cmFuc2Zvcm0gMC4ycyBlYXNlJyxcblx0XHRcdHRyYW5zZm9ybU9yaWdpbjogJzUwJSA1MCUnLFxuXHRcdFx0dXNlclNlbGVjdDogJ25vbmUnLFxuXHRcdFx0dHJhbnNmb3JtOiAncm90YXRlKDE4MGRlZyknLFxuXHRcdCAgfSk7XG5cdFx0ICBkZW55RGV0YWlscy5vbnRvZ2dsZSA9ICgpID0+IHtcblx0XHRcdCAgdG9nZ2xlSWNvbi50b2dnbGVDbGFzcyhcInZ2LXJvdGF0ZWRcIiwgIWRlbnlEZXRhaWxzLm9wZW4pO1xuXHRcdCAgfTtcbiAgXG5cdFx0ICAvLyBCb2R5IG9mIHRoZSBkZXRhaWxzOiBhIHNpbXBsZSA8dWw+IGNvbnRhaW5pbmcgb25seSBkZW55XHUyMDEwbGlzdGVkIGxpbmVzXG5cdFx0ICBjb25zdCBkZW55Qm9keSA9IGRlbnlEZXRhaWxzLmNyZWF0ZURpdih7IGNsczogJ3ZrLXNlY3Rpb24tYm9keScgfSk7XG5cdFx0ICBkZW55Qm9keS5hZGRDbGFzcyhcImRlbnlsaXN0XCIpO1xuXHRcdCAgY29uc3QgZGVueVVsID0gZGVueUJvZHkuY3JlYXRlRWwoJ3VsJyk7XG5cdFx0ICB0aGlzLmRlbmllZC5mb3JFYWNoKChsaW5lKSA9PiB7XG5cdFx0XHRjb25zdCBsaSA9IGRlbnlVbC5jcmVhdGVFbCgnbGknLCB7IHRleHQ6IGxpbmUgfSk7XG5cdFx0XHRsaS5hZGRDbGFzcyhcImZvcmNldXBkYXRlLW5vdGUtY1wiKTtcblx0XHQgIH0pO1xuXHRcdH1cbiAgIFxuXHRcdGNvbnN0IGJ1dHRvblJvdyA9IHRoaXMuY29udGVudEVsLmNyZWF0ZUVsKCdkaXYnKTtcblx0XHRPYmplY3QuYXNzaWduKGJ1dHRvblJvdy5zdHlsZSwge1xuXHRcdCAgZGlzcGxheTogJ2ZsZXgnLFxuXHRcdCAganVzdGlmeUNvbnRlbnQ6ICdmbGV4LWVuZCcsXG5cdFx0ICBtYXJnaW5Ub3A6ICcxLjI1ZW0nLCAgICAgICAvLyB0d2VhayBzcGFjaW5nIGFzIHlvdSBsaWtlXG5cdFx0fSk7XG5cdFx0XG5cdFx0Ly8gXHUyMDFDQ29uZmlybSAmIFVwZGF0ZVx1MjAxRCBidXR0b25cblx0XHRjb25zdCBjb25maXJtQnRuID0gYnV0dG9uUm93LmNyZWF0ZUVsKCdidXR0b24nLCB7XG5cdFx0ICB0ZXh0OiAnQ29uZmlybSAmIFVwZGF0ZScsXG5cdFx0ICBjbHM6ICdtb2QtY3RhJyxcblx0XHR9KTtcblx0XHRjb25maXJtQnRuLm9uY2xpY2sgPSBhc3luYyAoKSA9PiB7XG5cdFx0ICBhd2FpdCAodGhpcyBhcyBhbnkpLnBsdWdpbi51cGRhdGVTZWxlY3RlZFRvb2xraXRDb250ZW50KCk7XG5cdFx0ICB0aGlzLmNsb3NlKCk7XG5cdFx0fTtcblx0XHRcblx0XHQvLyBcdTIwMUNDYW5jZWxcdTIwMUQgYnV0dG9uXG5cdFx0Y29uc3QgY2FuY2VsQnRuID0gYnV0dG9uUm93LmNyZWF0ZUVsKCdidXR0b24nLCB7IHRleHQ6ICdDYW5jZWwnIH0pO1xuXHRcdGNhbmNlbEJ0bi5vbmNsaWNrID0gKCkgPT4gdGhpcy5jbG9zZSgpO1xuXHQgIH1cbiAgXG5cdCAgb25DbG9zZSgpIHtcblx0XHR0aGlzLmNvbnRlbnRFbC5lbXB0eSgpO1xuXHQgIH1cblx0fSkodGhpcy5hcHAsIG5vcm1hbExpbmVzLCBkZW55TGlzdGVkTGluZXMpO1xuICBcblx0Ly8gQXR0YWNoIHBsdWdpbiBwb2ludGVyIGFuZCBvcGVuXG5cdChtb2RhbCBhcyBhbnkpLnBsdWdpbiA9IHRoaXM7XG5cdG1vZGFsLm9wZW4oKTtcbiAgfVxuICBcblxuICBhc3luYyBidWlsZFVwZGF0ZVByZXZpZXcoKTogUHJvbWlzZTxzdHJpbmdbXT4ge1xuXHRjb25zdCBjaGFuZ2VzOiBzdHJpbmdbXSA9IFtdO1xuICBcblx0Ly8gMCkgQ29sbGVjdCBhbGwgYmxhY2tsaXN0ZWQgZm9sZGVycyAobWFuaWZlc3RLZXkgdmFsdWVzIHdoZXJlIGRvVXBkYXRlID09PSBmYWxzZSlcblx0Y29uc3QgZGVueUxpc3RlZEZvbGRlcnMgPSB0aGlzLnNldHRpbmdzLmN1c3RvbVBhdGhzXG5cdCAgLmZpbHRlcigoYykgPT4gYy5kb1VwZGF0ZSA9PT0gZmFsc2UpXG5cdCAgLm1hcCgoYykgPT4gYy5tYW5pZmVzdEtleSk7XG4gIFxuXHQvLyAxKSBEZW55XHUyMDEwbGlzdGVkIGVudHJpZXNcdTIwMTRidXQgb25seSBpZiB0aGV5XHUyMDE5ZCBhY3R1YWxseSBiZSBcdTIwMUNuZXdcdTIwMUQgKG1pc3NpbmcpIG9yIFx1MjAxQ291dFx1MjAxMG9mXHUyMDEwZGF0ZVx1MjAxRFxuXHRmb3IgKGNvbnN0IGYgb2YgdGhpcy5tYW5pZmVzdENhY2hlLmZpbGVzKSB7XG5cdCAgLy8gXHUyNTAwXHUyNTAwIFNLSVAgYW55IG9wdGlvbmFsOnRydWUgZmlsZVxuXHQgIGlmIChmLm9wdGlvbmFsKSB7XG5cdFx0Y29udGludWU7XG5cdCAgfVxuICBcblx0ICBjb25zdCBjdXN0b20gPSB0aGlzLnNldHRpbmdzLmN1c3RvbVBhdGhzLmZpbmQoKGMpID0+IGMubWFuaWZlc3RLZXkgPT09IGYucGF0aCk7XG5cdCAgY29uc3QgaXNJbkRlbnlGb2xkZXIgPSBkZW55TGlzdGVkRm9sZGVycy5zb21lKChmb2xkZXIpID0+XG5cdFx0Zi5wYXRoLnN0YXJ0c1dpdGgoZm9sZGVyICsgJy8nKVxuXHQgICk7XG5cdCAgaWYgKGN1c3RvbT8uZG9VcGRhdGUgPT09IGZhbHNlIHx8IGlzSW5EZW55Rm9sZGVyKSB7XG5cdFx0Ly8gUmVzb2x2ZSB0aGUgdmF1bHQgcGF0aCAoaGFuZGxlcyByZW1hcHBpbmcgaWYgcHJlc2VudClcblx0XHRjb25zdCB2cCA9IGN1c3RvbT8udmF1bHRQYXRoID8/IHRoaXMucmVzb2x2ZVZhdWx0UGF0aChmLnBhdGgpO1xuICBcblx0XHQvLyBDaGVjayBpZiBmaWxlIGV4aXN0cyBsb2NhbGx5IGFuZCBpZiBpdFx1MjAxOXMgdXBcdTIwMTB0b1x1MjAxMGRhdGVcblx0XHRjb25zdCBleGlzdHMgPSBhd2FpdCB0aGlzLmFwcC52YXVsdC5hZGFwdGVyLmV4aXN0cyh2cCk7XG5cdFx0Y29uc3QgdXBUb0RhdGUgPSBleGlzdHMgJiYgKGF3YWl0IHRoaXMuZmlsZUNhY2hlTWFuYWdlci5pc1VwVG9EYXRlKHZwKSk7XG4gIFxuXHRcdC8vIE9ubHkgc2hvdyBhIGRlbnlcdTIwMTBsaXN0ZWQgZW50cnkgaWYgaXQgd291bGQgb3RoZXJ3aXNlIGJlIGNyZWF0ZWQgb3Igb3ZlcndyaXR0ZW5cblx0XHRpZiAoIWV4aXN0cyB8fCAhdXBUb0RhdGUpIHtcblx0XHQgIGNoYW5nZXMucHVzaChgXHUyNzRDIGRlbnlcdTIwMTBsaXN0ZWQgXHUyMDEzIHdpbGwgbm90IHVwZGF0ZTogJHt2cH1gKTtcblx0XHR9XG5cdCAgfVxuXHR9XG4gIFxuXHQvLyAyKSBGVUxMXHUyMDEwU1lOQyBtb2RlIChza2lwIGFueSBmaWxlL2ZvbGRlciB0aGF0XHUyMDE5cyBibGFja2xpc3RlZClcblx0aWYgKCF0aGlzLnNldHRpbmdzLmN1c3RvbWl6ZVVwZGF0ZXMpIHtcblx0ICBmb3IgKGNvbnN0IGYgb2YgdGhpcy5tYW5pZmVzdENhY2hlLmZpbGVzKSB7XG5cdFx0Ly8gXHUyNTAwXHUyNTAwIFNLSVAgYW55IG9wdGlvbmFsOnRydWUgZmlsZVxuXHRcdGlmIChmLm9wdGlvbmFsKSB7XG5cdFx0ICBjb250aW51ZTtcblx0XHR9XG4gIFxuXHRcdGNvbnN0IGN1c3RvbSA9IHRoaXMuc2V0dGluZ3MuY3VzdG9tUGF0aHMuZmluZCgoYykgPT4gYy5tYW5pZmVzdEtleSA9PT0gZi5wYXRoKTtcblx0XHRjb25zdCBpc0luRGVueUZvbGRlciA9IGRlbnlMaXN0ZWRGb2xkZXJzLnNvbWUoKGZvbGRlcikgPT5cblx0XHQgIGYucGF0aC5zdGFydHNXaXRoKGZvbGRlciArICcvJylcblx0XHQpO1xuXHRcdGlmIChjdXN0b20/LmRvVXBkYXRlID09PSBmYWxzZSB8fCBpc0luRGVueUZvbGRlcikge1xuXHRcdCAgY29udGludWU7XG5cdFx0fVxuICBcblx0XHRjb25zdCB2cCA9IHRoaXMucmVzb2x2ZVZhdWx0UGF0aChmLnBhdGgpO1xuXHRcdGxldCB0YWcgPSAnJztcblx0XHRpZiAodnAgIT09IGYucGF0aCkgdGFnID0gJyAocmVtYXBwZWQpJztcbiAgXG5cdFx0Y29uc3QgZXhpc3RzID0gYXdhaXQgdGhpcy5hcHAudmF1bHQuYWRhcHRlci5leGlzdHModnApO1xuXHRcdGNvbnN0IHVwVG9EYXRlID0gZXhpc3RzICYmIChhd2FpdCB0aGlzLmZpbGVDYWNoZU1hbmFnZXIuaXNVcFRvRGF0ZSh2cCkpO1xuICBcblx0XHRpZiAoIWV4aXN0cykge1xuXHRcdCAgY2hhbmdlcy5wdXNoKGBcdUQ4M0RcdURDQzQgTmV3IGZpbGU6ICR7dnB9JHt0YWd9YCk7XG5cdFx0fSBlbHNlIGlmICghdXBUb0RhdGUpIHtcblx0XHQgIGNoYW5nZXMucHVzaChgXHVEODNEXHVERDAxIFdpbGwgdXBkYXRlOiAke3ZwfSR7dGFnfWApO1xuXHRcdH1cblx0ICB9XG4gIFxuXHQgIGZvciAoY29uc3QgZmxkIG9mIHRoaXMubWFuaWZlc3RDYWNoZS5mb2xkZXJzKSB7XG5cdFx0Ly8gXHUyNTAwXHUyNTAwIFNLSVAgYW55IG9wdGlvbmFsOnRydWUgZm9sZGVyXG5cdFx0aWYgKGZsZC5vcHRpb25hbCkge1xuXHRcdCAgY29udGludWU7XG5cdFx0fVxuICBcblx0XHRjb25zdCBpc0RlbnlGb2xkZXIgPSBkZW55TGlzdGVkRm9sZGVycy5pbmNsdWRlcyhmbGQucGF0aCk7XG5cdFx0Y29uc3QgZXhpc3RzID0gYXdhaXQgdGhpcy5hcHAudmF1bHQuYWRhcHRlci5leGlzdHMoZmxkLnBhdGgpO1xuXHRcdGlmICghZXhpc3RzICYmICFpc0RlbnlGb2xkZXIpIHtcblx0XHQgIGNoYW5nZXMucHVzaChgXHVEODNEXHVEQ0MxIE5ldyBmb2xkZXI6ICR7ZmxkLnBhdGh9YCk7XG5cdFx0fVxuXHQgIH1cbiAgXG5cdCAgcmV0dXJuIGNoYW5nZXMubGVuZ3RoID8gY2hhbmdlcyA6IFsnXHUyNzA1IEV2ZXJ5dGhpbmcgaXMgYWxyZWFkeSB1cCB0byBkYXRlISddO1xuXHR9XG4gIFxuXHQvLyAzKSBDVVNUT01cdTIwMTBTWU5DIG1vZGUgKHNraXAgYW55IGZpbGUvZm9sZGVyIHRoYXRcdTIwMTlzIGJsYWNrbGlzdGVkKVxuXHRmb3IgKGNvbnN0IGYgb2YgdGhpcy5tYW5pZmVzdENhY2hlLmZpbGVzKSB7XG5cdCAgLy8gXHUyNTAwXHUyNTAwIFNLSVAgYW55IG9wdGlvbmFsOnRydWUgZmlsZVxuXHQgIGlmIChmLm9wdGlvbmFsKSB7XG5cdFx0Y29udGludWU7XG5cdCAgfVxuICBcblx0ICBjb25zdCBjdXN0b20gPSB0aGlzLnNldHRpbmdzLmN1c3RvbVBhdGhzLmZpbmQoKGMpID0+IGMubWFuaWZlc3RLZXkgPT09IGYucGF0aCk7XG5cdCAgY29uc3QgaXNJbkRlbnlGb2xkZXIgPSBkZW55TGlzdGVkRm9sZGVycy5zb21lKChmb2xkZXIpID0+XG5cdFx0Zi5wYXRoLnN0YXJ0c1dpdGgoZm9sZGVyICsgJy8nKVxuXHQgICk7XG5cdCAgaWYgKGN1c3RvbT8uZG9VcGRhdGUgPT09IGZhbHNlIHx8IGlzSW5EZW55Rm9sZGVyKSB7XG5cdFx0Y29udGludWU7XG5cdCAgfVxuICBcblx0ICBjb25zdCB2cCA9IGN1c3RvbT8udmF1bHRQYXRoID8/IHRoaXMucmVzb2x2ZVZhdWx0UGF0aChmLnBhdGgpO1xuXHQgIGxldCB0YWcgPSAnJztcblx0ICBpZiAodnAgIT09IGYucGF0aCkgdGFnID0gJyAocmVtYXBwZWQpJztcbiAgXG5cdCAgY29uc3QgZXhpc3RzID0gYXdhaXQgdGhpcy5hcHAudmF1bHQuYWRhcHRlci5leGlzdHModnApO1xuXHQgIGNvbnN0IHVwVG9EYXRlID0gZXhpc3RzICYmIChhd2FpdCB0aGlzLmZpbGVDYWNoZU1hbmFnZXIuaXNVcFRvRGF0ZSh2cCkpO1xuICBcblx0ICBpZiAoIWV4aXN0cykge1xuXHRcdGNoYW5nZXMucHVzaChgXHVEODNEXHVEQ0M0IE5ldyBmaWxlOiAke3ZwfSR7dGFnfWApO1xuXHQgIH0gZWxzZSBpZiAoIXVwVG9EYXRlKSB7XG5cdFx0Y2hhbmdlcy5wdXNoKGBcdUQ4M0RcdUREMDEgV2lsbCB1cGRhdGU6ICR7dnB9JHt0YWd9YCk7XG5cdCAgfVxuXHR9XG4gIFxuXHRmb3IgKGNvbnN0IGZsZCBvZiB0aGlzLm1hbmlmZXN0Q2FjaGUuZm9sZGVycykge1xuXHQgIC8vIFx1MjUwMFx1MjUwMCBTS0lQIGFueSBvcHRpb25hbDp0cnVlIGZvbGRlclxuXHQgIGlmIChmbGQub3B0aW9uYWwpIHtcblx0XHRjb250aW51ZTtcblx0ICB9XG4gIFxuXHQgIGNvbnN0IGlzRGVueUZvbGRlciA9IGRlbnlMaXN0ZWRGb2xkZXJzLmluY2x1ZGVzKGZsZC5wYXRoKTtcblx0ICBjb25zdCBleGlzdHMgPSBhd2FpdCB0aGlzLmFwcC52YXVsdC5hZGFwdGVyLmV4aXN0cyhmbGQucGF0aCk7XG5cdCAgaWYgKCFleGlzdHMgJiYgIWlzRGVueUZvbGRlcikge1xuXHRcdGNoYW5nZXMucHVzaChgXHVEODNEXHVEQ0MxIE5ldyBmb2xkZXI6ICR7ZmxkLnBhdGh9YCk7XG5cdCAgfVxuXHR9XG4gIFxuXHQvLyAzYykgXHUyMDFDTW92ZWRcdTIwMUQgZGV0ZWN0aW9uIChza2lwIGJsYWNrbGlzdGVkKVxuXHRmb3IgKGNvbnN0IGYgb2YgdGhpcy5tYW5pZmVzdENhY2hlLmZpbGVzKSB7XG5cdCAgLy8gXHUyNTAwXHUyNTAwIFNLSVAgYW55IG9wdGlvbmFsOnRydWUgZmlsZVxuXHQgIGlmIChmLm9wdGlvbmFsKSB7XG5cdFx0Y29udGludWU7XG5cdCAgfVxuICBcblx0ICBjb25zdCBtYW5pZmVzdEtleSA9IGYua2V5O1xuXHQgIGNvbnN0IG1hbmlmZXN0UGF0aCA9IGYucGF0aDtcblx0ICBjb25zdCBjdXN0b20gPSB0aGlzLnNldHRpbmdzLmN1c3RvbVBhdGhzLmZpbmQoKGMpID0+IGMubWFuaWZlc3RLZXkgPT09IG1hbmlmZXN0S2V5KTtcblx0ICBjb25zdCBwcmV2UGF0aCA9IHRoaXMub2xkUGF0aHNCeUdpdGh1YlttYW5pZmVzdFBhdGhdO1xuICBcblx0ICBjb25zdCBpc0luRGVueUZvbGRlciA9IGRlbnlMaXN0ZWRGb2xkZXJzLnNvbWUoKGZvbGRlcikgPT5cblx0XHRtYW5pZmVzdFBhdGguc3RhcnRzV2l0aChmb2xkZXIgKyAnLycpXG5cdCAgKTtcblx0ICBpZiAoY3VzdG9tPy5kb1VwZGF0ZSA9PT0gZmFsc2UgfHwgaXNJbkRlbnlGb2xkZXIpIHtcblx0XHRjb250aW51ZTtcblx0ICB9XG5cdCAgaWYgKGN1c3RvbSAmJiBjdXN0b20udmF1bHRQYXRoICYmIGN1c3RvbS52YXVsdFBhdGggIT09IG1hbmlmZXN0UGF0aCkge1xuXHRcdGNvbnRpbnVlO1xuXHQgIH1cblx0ICBpZiAoXG5cdFx0cHJldlBhdGggJiZcblx0XHRwcmV2UGF0aCAhPT0gbWFuaWZlc3RQYXRoICYmXG5cdFx0KCFjdXN0b20gfHwgY3VzdG9tLnZhdWx0UGF0aCA9PT0gbWFuaWZlc3RQYXRoKVxuXHQgICkge1xuXHRcdGNoYW5nZXMucHVzaChgXHUyN0ExXHVGRTBGIE1vdmVkOiAke3ByZXZQYXRofSBcdTIxOTIgJHttYW5pZmVzdFBhdGh9YCk7XG5cdCAgfVxuXHR9XG4gIFxuXHRyZXR1cm4gY2hhbmdlcy5sZW5ndGggPyBjaGFuZ2VzIDogWydcdTI3MDUgRXZlcnl0aGluZyBpcyBhbHJlYWR5IHVwIHRvIGRhdGUhJ107XG4gIH1cbiAgXG4gIFxuICBcbiAgLy8gXHUyNTAwXHUyNTAwXHUyNTAwIFZFUlNJT04tQ0hFQ0sgLyBVUERBVEUgRkxPVyBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcblxuICBhc3luYyBjaGVja0ZvclVwZGF0ZXMoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgY29uc3QgaXNOZXdlclZlcnNpb24gPSAocmVtb3RlOiBzdHJpbmcsIGxvY2FsOiBzdHJpbmcpOiBib29sZWFuID0+IHtcbiAgICAgIGNvbnN0IHBhID0gcmVtb3RlXG4gICAgICAgIC5yZXBsYWNlKC9edi8sICcnKVxuICAgICAgICAuc3BsaXQoJy4nKVxuICAgICAgICAubWFwKChuKSA9PiBwYXJzZUludChuLCAxMCkgfHwgMCk7XG4gICAgICBjb25zdCBwYiA9IGxvY2FsXG4gICAgICAgIC5yZXBsYWNlKC9edi8sICcnKVxuICAgICAgICAuc3BsaXQoJy4nKVxuICAgICAgICAubWFwKChuKSA9PiBwYXJzZUludChuLCAxMCkgfHwgMCk7XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IE1hdGgubWF4KHBhLmxlbmd0aCwgcGIubGVuZ3RoKTsgaSsrKSB7XG4gICAgICAgIGlmICgocGFbaV0gfHwgMCkgPiAocGJbaV0gfHwgMCkpIHJldHVybiB0cnVlO1xuICAgICAgICBpZiAoKHBhW2ldIHx8IDApIDwgKHBiW2ldIHx8IDApKSByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfTtcblxuICAgIGNvbnN0IHRvb2xraXRQYXRoID0gJy52ZXJzaW9uLmpzb24nO1xuICAgIGNvbnN0IHRvb2xraXRVcmwgPVxuICAgICAgJ2h0dHBzOi8vcmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbS9zbGFtd2lzZTAwMDEvdnZ1bmRlcmxvcmUtdG9vbGtpdC1mdWxsL21haW4vLnZlcnNpb24uanNvbic7XG4gICAgY29uc3QgcGx1Z2luVXJsID1cbiAgICAgICdodHRwczovL3Jhdy5naXRodWJ1c2VyY29udGVudC5jb20vc2xhbXdpc2UwMDAxL3Z2dW5kZXJsb3JlLXRvb2xraXQtcGx1Z2luL21haW4vdmVyc2lvbi5qc29uJztcbiAgICBjb25zdCBjaGFuZ2Vsb2dVcmwgPVxuICAgICAgJ2h0dHBzOi8vcmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbS9zbGFtd2lzZTAwMDEvVlZ1bmRlcmxvcmUtVG9vbGtpdC1GdWxsL21haW4vUkVBRE1FLm1kJztcblxuICAgIC8vIDEpIFJlYWQgbG9jYWwgdG9vbGtpdCB2ZXJzaW9uXG4gICAgbGV0IGxvY2FsVEsgPSAnMC4wLjAnO1xuICAgICAgaWYgKHRoaXMuc2V0dGluZ3MuaXNGaXJzdFJ1biAhPT0gXCJ5ZXNcIikge1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgY29udGVudCA9IGF3YWl0IHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXIucmVhZCh0b29sa2l0UGF0aCk7XG4gICAgICAgIGNvbnN0IGpzb24gPSBKU09OLnBhcnNlKGNvbnRlbnQpO1xuICAgICAgICBsb2NhbFRLID0ganNvbi52ZXJzaW9uIHx8IGxvY2FsVEs7XG4gICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignXHUyNzRDIEZhaWxlZCB0byByZWFkIGxvY2FsIHRvb2xraXQgdmVyc2lvbjonLCBlcnIpO1xuICAgICAgfVxuICAgIH1cbiAgICAvLyAyKSBGZXRjaCByZW1vdGUgdG9vbGtpdCB2ZXJzaW9uICYgZGVmYXVsdHNcbiAgICBsZXQgcmVtb3RlVEsgPSAnMC4wLjAnO1xuICAgIHRyeSB7XG4gICAgICBjb25zdCByZXMgPSBhd2FpdCBmZXRjaCh0b29sa2l0VXJsKTtcbiAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXMuanNvbigpO1xuICAgICAgcmVtb3RlVEsgPSBkYXRhLnZlcnNpb24gfHwgcmVtb3RlVEs7XG5cbiAgICAgIHRoaXMuc2V0dGluZ3MubGF0ZXN0VG9vbGtpdFZlcnNpb24gPSByZW1vdGVUSztcbiAgICAgIGlmIChkYXRhLmRlZmF1bHRQYXRocykge1xuICAgICAgICB0aGlzLnNldHRpbmdzLmxhdGVzdERlZmF1bHRzID0gZGF0YS5kZWZhdWx0UGF0aHM7XG4gICAgICB9XG4gICAgICB0aGlzLnNldHRpbmdzLmxhc3RDaGVja2VkID0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpO1xuICAgICAgYXdhaXQgdGhpcy5zYXZlU2V0dGluZ3MoKTtcbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ1x1Mjc0QyBGYWlsZWQgdG8gZmV0Y2ggcmVtb3RlIHRvb2xraXQgdmVyc2lvbjonLCBlcnIpO1xuICAgIH1cblxuICAgIGlmIChpc05ld2VyVmVyc2lvbihyZW1vdGVUSywgbG9jYWxUSykpIHtcbiAgICAgIG5ldyBOb3RpY2UoYFx1MjZBMFx1RkUwRiBUb29sa2l0IHVwZGF0ZSBhdmFpbGFibGUhIExhdGVzdDogdiR7cmVtb3RlVEt9YCk7XG4gICAgICBhd2FpdCB0aGlzLmZldGNoUmVtb3RlQmFzZWxpbmUoKTtcbiAgICB9XG5cbiAgICAvLyA0KSBSZWFkIGxvY2FsIHBsdWdpbiB2ZXJzaW9uXG4gICAgY29uc3QgbG9jYWxQTCA9IHRoaXMubWFuaWZlc3QudmVyc2lvbjtcblxuICAgIC8vIDUpIEZldGNoIHJlbW90ZSBwbHVnaW4gdmVyc2lvbiAmIGNvbXBhcmVcbiAgICBsZXQgcmVtb3RlUEwgPSBsb2NhbFBMO1xuICAgIHRyeSB7XG4gICAgICBjb25zdCByZXMgPSBhd2FpdCBmZXRjaChwbHVnaW5VcmwpO1xuICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlcy5qc29uKCk7XG4gICAgICByZW1vdGVQTCA9IGRhdGEudmVyc2lvbiB8fCByZW1vdGVQTDtcbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICB9XG5cbiAgICBpZiAoaXNOZXdlclZlcnNpb24ocmVtb3RlUEwsIGxvY2FsUEwpKSB7XG4gICAgICBuZXcgTm90aWNlKGBcdTI2OTlcdUZFMEYgUGx1Z2luIHVwZGF0ZSBhdmFpbGFibGUhIExhdGVzdDogdiR7cmVtb3RlUEx9YCk7XG4gICAgfVxuXG4gICAgLy8gNikgRmV0Y2ggY2hhbmdlbG9nIGZvciBVSSBkaXNwbGF5XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGNoYW5nZWxvZ1JlcyA9IGF3YWl0IGZldGNoKGNoYW5nZWxvZ1VybCk7XG4gICAgICB0aGlzLmNoYW5nZWxvZyA9IGF3YWl0IGNoYW5nZWxvZ1Jlcy50ZXh0KCk7XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdcdTI3NEMgRmFpbGVkIHRvIGZldGNoIGNoYW5nZWxvZzonLCBlcnIpO1xuICAgIH1cbiAgfVxuXG5hc3luYyBsb2FkU2V0dGluZ3MoKSB7XG4gIC8vIDEpIGdyYWIgd2hhdGV2ZXJcdTIwMTlzIG9uIGRpc2sgKG1pZ2h0IGJlIG51bGwpXG4gIGNvbnN0IHJhdyA9IChhd2FpdCB0aGlzLmxvYWREYXRhKCkpIGFzIFBhcnRpYWw8VG9vbGtpdFNldHRpbmdzPiB8IG51bGw7XG4gIGNvbnN0IGNsZWFuZWQgPSByYXcgPz8ge307XG5cbiAgLy8gMikgZHJvcCB0aGUgb2xkIG5lZWRzSW5zdGFsbCBmbGFnXG4gIGlmICgoY2xlYW5lZCBhcyBhbnkpLm5lZWRzSW5zdGFsbCAhPSBudWxsKSB7XG4gICAgZGVsZXRlIChjbGVhbmVkIGFzIGFueSkubmVlZHNJbnN0YWxsO1xuICB9XG5cbiAgLy8gMykgbWVyZ2UgZGVmYXVsdHMgKyBjbGVhbmVkIGRhdGFcbiAgdGhpcy5zZXR0aW5ncyA9IE9iamVjdC5hc3NpZ24oe30sIERFRkFVTFRfU0VUVElOR1MsIGNsZWFuZWQpO1xuXG4gIC8vIDQpIGZpZ3VyZSBvdXQgd2hldGhlciB3ZVx1MjAxOXJlIGZpcnN0LXJ1blxuICB0aGlzLmlzRmlyc3RSdW4gPSAhKGF3YWl0IHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXIuZXhpc3RzKCcudnZ1bmRlcmxvcmVfaW5zdGFsbGVkJykpO1xuXG4gIC8vIDUpIHNldCB1cCBjYWNoZU1hbmFnZXIgc28gc2F2ZVNldHRpbmdzKCkgY2FuIHNhZmVseSB1c2UgLmdldENhY2hlKClcbiAgdGhpcy5maWxlQ2FjaGVNYW5hZ2VyID0gbmV3IFRvb2xraXRGaWxlQ2FjaGVNYW5hZ2VyKFxuICAgIHRoaXMuYXBwLnZhdWx0LFxuICAgIGNsZWFuZWQuZmlsZUNhY2hlID8/IHt9LFxuICAgIGFzeW5jICgpID0+IGF3YWl0IHRoaXMuc2F2ZVNldHRpbmdzKClcbiAgKTtcblxuICAvLyA2KSBub3cgcGVyc2lzdCB0aGUgXHUyMDFDY2xlYW5lZFx1MjAxRCBzZXR0aW5ncyBiYWNrIHRvIGRpc2sgZXhhY3RseSBvbmNlXG4gIGF3YWl0IHRoaXMuc2F2ZVNldHRpbmdzKCk7XG5cbiAgLy8gNykgYmFjay1maWxsIGFueSBicmFuZC1uZXcgZmllbGRzXG4gIGlmICh0eXBlb2YgdGhpcy5zZXR0aW5ncy5ydWxlc2V0Q29tcGVuZGl1bSAhPT0gJ3N0cmluZycpIHtcbiAgICB0aGlzLnNldHRpbmdzLnJ1bGVzZXRDb21wZW5kaXVtID0gJyc7XG4gIH1cbiAgaWYgKCFBcnJheS5pc0FycmF5KHRoaXMuc2V0dGluZ3MucnVsZXNldFJlZmVyZW5jZSkpIHtcbiAgICB0aGlzLnNldHRpbmdzLnJ1bGVzZXRSZWZlcmVuY2UgPSBbXTtcbiAgfVxufVxuXG5cblxuICBhc3luYyBzYXZlU2V0dGluZ3MoKSB7XG4gICAgYXdhaXQgdGhpcy5zYXZlRGF0YSh7XG4gICAgICAuLi50aGlzLnNldHRpbmdzLFxuICAgICAgZmlsZUNhY2hlOiB0aGlzLmZpbGVDYWNoZU1hbmFnZXIuZ2V0Q2FjaGUoKSxcbiAgICB9KTtcbiAgfVxuXG4gIGFzeW5jIGdldExvY2FsVG9vbGtpdFZlcnNpb24oKTogUHJvbWlzZTxzdHJpbmcgfCBudWxsPiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGNvbnRlbnQgPSBhd2FpdCB0aGlzLmFwcC52YXVsdC5hZGFwdGVyLnJlYWQoJy52ZXJzaW9uLmpzb24nKTtcbiAgICAgIGNvbnN0IGpzb24gPSBKU09OLnBhcnNlKGNvbnRlbnQpO1xuICAgICAgcmV0dXJuIGpzb24udmVyc2lvbiB8fCBudWxsO1xuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgY29uc29sZS5lcnJvcignXHUyNzRDIEZhaWxlZCB0byByZWFkIC52ZXJzaW9uLmpzb246JywgZXJyKTtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIHVwZGF0ZUZ1bGxUb29sa2l0UmVwbygpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBjb25zdCBleGNsdWRlZCA9IFtcbiAgICAgIHRoaXMuYXBwLnZhdWx0LmNvbmZpZ0RpcixcbiAgICAgICcuZ2l0aWdub3JlJyxcbiAgICAgICcuZ2l0YXR0cmlidXRlcycsXG4gICAgICAnLkRTX1N0b3JlJyxcbiAgICAgICdwbHVnaW5zJyxcbiAgICAgICdDb21wZW5kaXVtJyxcbiAgICAgICdSRUFETUUubWQnLFxuICAgICAgJy52ZXJzaW9uLmpzb24nLFxuICAgICAgJy5naXRodWInXG4gICAgXTtcblxuICAgIGNvbnN0IGZldGNoUmVwb1Jvb3QgPSBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBhcGlVcmwgPVxuICAgICAgICAnaHR0cHM6Ly9hcGkuZ2l0aHViLmNvbS9yZXBvcy9zbGFtd2lzZTAwMDEvVlZ1bmRlcmxvcmUtVG9vbGtpdC1GdWxsL2NvbnRlbnRzLyc7XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKGFwaVVybCk7XG4gICAgICBpZiAoIXJlc3BvbnNlLm9rKSB0aHJvdyBuZXcgRXJyb3IoYEZhaWxlZCB0byBmZXRjaCByZXBvIHJvb3RgKTtcbiAgICAgIHJldHVybiBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gICAgfTtcblxuICAgIHRyeSB7XG4gICAgICBjb25zdCBjb250ZW50cyA9IGF3YWl0IGZldGNoUmVwb1Jvb3QoKTtcbiAgICAgIC8vIGZpbHRlciBvdXQgZXhjbHVkZWQgdG9wLWxldmVsIGl0ZW1zXG4gICAgICBjb25zdCBmaWx0ZXJlZCA9IGNvbnRlbnRzLmZpbHRlcihcbiAgICAgICAgKGl0ZW06IGFueSkgPT5cbiAgICAgICAgICAhZXhjbHVkZWQuc29tZShcbiAgICAgICAgICAgIChleCkgPT5cbiAgICAgICAgICAgICAgaXRlbS5wYXRoID09PSBleCB8fFxuICAgICAgICAgICAgICBpdGVtLnBhdGguc3RhcnRzV2l0aChgJHtleH0vYClcbiAgICAgICAgICApXG4gICAgICApO1xuXG4gICAgICAvLyBTb3J0IHNvIFx1MjAxQ3RyZWVcdTIwMUQgKGZvbGRlcnMpIGNvbWUgYmVmb3JlIFx1MjAxQ2Jsb2JcdTIwMUQgKGZpbGVzKVxuICAgICAgZmlsdGVyZWQuc29ydCgoYTogYW55LCBiOiBhbnkpID0+IChhLnR5cGUgPT09IGIudHlwZSA/IDAgOiBhLnR5cGUgPT09ICd0cmVlJyA/IC0xIDogMSkpO1xuXG4gICAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgZmlsdGVyZWQpIHtcbiAgICAgICAgaWYgKGl0ZW0udHlwZSA9PT0gJ2RpcicpIHtcbiAgICAgICAgICBhd2FpdCB0aGlzLnVwZGF0ZUZvbGRlckZyb21HaXRIdWIoaXRlbS5wYXRoLCBpdGVtLnBhdGgpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpdGVtLnR5cGUgPT09ICdmaWxlJykge1xuICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goaXRlbS5kb3dubG9hZF91cmwpO1xuICAgICAgICAgIGNvbnN0IGNvbnRlbnQgPSBhd2FpdCByZXNwb25zZS50ZXh0KCk7XG4gICAgICAgICAgY29uc3QgZmlsZVBhdGggPSBpdGVtLnBhdGg7XG4gICAgICAgICAgY29uc3QgZXhpc3RzID0gYXdhaXQgdGhpcy5hcHAudmF1bHQuYWRhcHRlci5leGlzdHMoZmlsZVBhdGgpO1xuICAgICAgICAgIGlmICghZXhpc3RzKSB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLmFwcC52YXVsdC5jcmVhdGUoZmlsZVBhdGgsIGNvbnRlbnQpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb25zdCBjdXJyZW50ID0gYXdhaXQgdGhpcy5hcHAudmF1bHQuYWRhcHRlci5yZWFkKGZpbGVQYXRoKTtcbiAgICAgICAgICAgIGlmIChjdXJyZW50ICE9PSBjb250ZW50KSB7XG4gICAgICAgICAgICAgIGF3YWl0IHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXIud3JpdGUoZmlsZVBhdGgsIGNvbnRlbnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBhd2FpdCB0aGlzLmZpbGVDYWNoZU1hbmFnZXIudXBkYXRlQ2FjaGUoZmlsZVBhdGgsIGNvbnRlbnQsIGl0ZW0ucGF0aCwgZmFsc2UpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGF3YWl0IHRoaXMuc2F2ZVNldHRpbmdzKCk7XG5cbiAgICAgIGNvbnN0IG1hcmtlclBhdGggPSAnLnZ2dW5kZXJsb3JlX2luc3RhbGxlZCc7XG4gICAgICBpZiAoIShhd2FpdCB0aGlzLmFwcC52YXVsdC5hZGFwdGVyLmV4aXN0cyhtYXJrZXJQYXRoKSkpIHtcbiAgICAgICAgYXdhaXQgdGhpcy5hcHAudmF1bHQuY3JlYXRlKG1hcmtlclBhdGgsICcnKTtcbiAgICAgIH1cblxuICAgICAgaWYgKHRoaXMuc2V0dGluZ3MuaGlnaGxpZ2h0RW5hYmxlZCkge1xuICAgICAgICB0aGlzLmVuYWJsZUhpZ2hsaWdodCgpO1xuICAgICAgfVxuXG4gICAgICBuZXcgTm90aWNlKCdcdTI3MDUgVlZ1bmRlcmxvcmUgVG9vbGtpdCBzdWNjZXNzZnVsbHkgaW5zdGFsbGVkIScpO1xuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgY29uc29sZS5lcnJvcignXHUyNzRDIHVwZGF0ZUZ1bGxUb29sa2l0UmVwbygpIGVycm9yOicsIGVycik7XG4gICAgICBuZXcgTm90aWNlKCdcdTI3NEMgRmFpbGVkIHRvIHVwZGF0ZSB0b29sa2l0LiBTZWUgY29uc29sZSBmb3IgZGV0YWlscy4nKTtcbiAgICB9XG4gIH1cblxuICBhc3luYyB1cGRhdGVTZWxlY3RlZFRvb2xraXRDb250ZW50KCkge1xuICAgIGlmICh0aGlzLnNldHRpbmdzLmF1dG9CYWNrdXBCZWZvcmVVcGRhdGUpIHtcbiAgICAgIGNvbnN0IGZvbGRlciA9IGF3YWl0IHRoaXMuYmFja3VwTWFuYWdlci5iYWNrdXBWYXVsdE1pcnJvcigncHJlLXVwZGF0ZScpO1xuICAgICAgbmV3IE5vdGljZShgVmF1bHQgbWlycm9yIGJhY2t1cCBjcmVhdGVkIGF0OiAke2ZvbGRlcn1gKTtcbiAgICB9XG5cbiAgICBpZiAoIXRoaXMuc2V0dGluZ3MubGF0ZXN0RGVmYXVsdHMpIHtcbiAgICAgIG5ldyBOb3RpY2UoJ1x1Mjc0QyBHaXRIdWIgZGVmYXVsdHMgbm90IGxvYWRlZCB5ZXQuJyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgYWxsTWFuaWZlc3RGaWxlcyA9IHRoaXMubWFuaWZlc3RDYWNoZS5maWxlcy5tYXAoKGYpID0+IGYucGF0aCk7XG4gICAgY29uc3QgZmlsZU92ZXJyaWRlcyA9IE9iamVjdC5mcm9tRW50cmllcyhcbiAgICAgIHRoaXMuc2V0dGluZ3MuY3VzdG9tUGF0aHMubWFwKChjKSA9PiBbYy5tYW5pZmVzdEtleSwgY10pXG4gICAgKTtcblxuICAgIHRyeSB7XG4gICAgICBmb3IgKGNvbnN0IGdoUGF0aCBvZiBhbGxNYW5pZmVzdEZpbGVzKSB7XG4gICAgICAgIGNvbnN0IG92ZXJyaWRlID0gZmlsZU92ZXJyaWRlc1tnaFBhdGhdO1xuICAgICAgICBpZiAob3ZlcnJpZGU/LmRvVXBkYXRlID09PSBmYWxzZSkge1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgdmF1bHRQYXRoID0gdGhpcy5zZXR0aW5ncy5jdXN0b21pemVVcGRhdGVzXG4gICAgICAgICAgPyB0aGlzLnJlc29sdmVWYXVsdFBhdGgoZ2hQYXRoKVxuICAgICAgICAgIDogZ2hQYXRoO1xuXG4gICAgICAgIGNvbnN0IGVudHJ5ID0gdGhpcy5tYW5pZmVzdENhY2hlLmZpbGVzLmZpbmQoKGYpID0+IGYucGF0aCA9PT0gZ2hQYXRoKTtcbiAgICAgICAgaWYgKCFlbnRyeSkgY29udGludWU7XG4gICAgICAgIGF3YWl0IHRoaXMudXBkYXRlRW50cnlGcm9tTWFuaWZlc3QoZW50cnksIGZhbHNlKTtcbiAgICAgIH1cblxuICAgICAgZm9yIChjb25zdCBmb2xkZXIgb2YgdGhpcy5tYW5pZmVzdENhY2hlLmZvbGRlcnMpIHtcbiAgICAgICAgaWYgKCEoYXdhaXQgdGhpcy5hcHAudmF1bHQuYWRhcHRlci5leGlzdHMoZm9sZGVyLnBhdGgpKSkge1xuICAgICAgICAgIGF3YWl0IHRoaXMuYXBwLnZhdWx0LmNyZWF0ZUZvbGRlcihmb2xkZXIucGF0aCk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgYXdhaXQgdGhpcy51cGRhdGVWZXJzaW9uRmlsZSgpO1xuICAgICAgdGhpcy5zZXR0aW5ncy5pbnN0YWxsZWRWZXJzaW9uID0gdGhpcy5zZXR0aW5ncy5sYXRlc3RUb29sa2l0VmVyc2lvbiE7XG4gICAgICBhd2FpdCB0aGlzLnNhdmVTZXR0aW5ncygpO1xuICAgICAgbmV3IE5vdGljZSgnXHUyNzA1IFRvb2xraXQgY29udGVudCB1cGRhdGVkLicpO1xuXG4gICAgICBpZiAodGhpcy5zZXR0aW5nc1RhYikge1xuICAgICAgICBhd2FpdCB0aGlzLnNldHRpbmdzVGFiLnVwZGF0ZVZlcnNpb25EaXNwbGF5KCk7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdcdTI3NEMgQ1VzdG9tIHVwZGF0ZSBmYWlsZWQuIFZlcnNpb24gbm90IHVwZGF0ZWQuJywgZXJyKTtcbiAgICAgIG5ldyBOb3RpY2UoJ1x1Mjc0QyBVcGRhdGUgZmFpbGVkLiBTZWUgY29uc29sZSBmb3IgZGV0YWlscy4nKTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5zZXR0aW5ncy5oaWdobGlnaHRFbmFibGVkKSB7XG4gICAgICB0aGlzLmVuYWJsZUhpZ2hsaWdodCgpO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIHVwZGF0ZUZvbGRlckZyb21HaXRIdWIoZ2l0aHViRm9sZGVyUGF0aDogc3RyaW5nLCB2YXVsdEZvbGRlclBhdGg6IHN0cmluZykge1xuICAgIGNvbnN0IGV4Y2x1ZGVkID0gW1xuICAgICAgdGhpcy5hcHAudmF1bHQuY29uZmlnRGlyLFxuICAgICAgJy5naXRpZ25vcmUnLFxuICAgICAgJy5naXRhdHRyaWJ1dGVzJyxcbiAgICAgICcuRFNfU3RvcmUnLFxuICAgICAgJ3BsdWdpbnMnLFxuICAgICAgJ0NvbXBlbmRpdW0nLFxuICAgICAgJ1JFQURNRS5tZCcsXG4gICAgICAnLnZlcnNpb24uanNvbicsXG4gICAgICAnLmdpdGh1YidcbiAgICBdO1xuICAgIGlmIChleGNsdWRlZC5zb21lKChleCkgPT4gZ2l0aHViRm9sZGVyUGF0aCA9PT0gZXggfHwgZ2l0aHViRm9sZGVyUGF0aC5zdGFydHNXaXRoKGAke2V4fS9gKSkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3QgYXBpVXJsID0gYGh0dHBzOi8vYXBpLmdpdGh1Yi5jb20vcmVwb3Mvc2xhbXdpc2UwMDAxL1ZWdW5kZXJsb3JlLVRvb2xraXQtRnVsbC9jb250ZW50cy8ke2dpdGh1YkZvbGRlclBhdGh9YDtcbiAgICB0cnkge1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChhcGlVcmwpO1xuICAgICAgaWYgKCFyZXNwb25zZS5vaykgdGhyb3cgbmV3IEVycm9yKGBGYWlsZWQgdG8gZmV0Y2ggZm9sZGVyOiAke2dpdGh1YkZvbGRlclBhdGh9YCk7XG4gICAgICBjb25zdCBmaWxlcyA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgICAgIGlmICghKGF3YWl0IHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXIuZXhpc3RzKHZhdWx0Rm9sZGVyUGF0aCkpKSB7XG4gICAgICAgIGF3YWl0IHRoaXMuYXBwLnZhdWx0LmNyZWF0ZUZvbGRlcih2YXVsdEZvbGRlclBhdGgpO1xuICAgICAgfVxuICAgICAgZm9yIChjb25zdCBmaWxlIG9mIGZpbGVzKSB7XG4gICAgICAgIGlmIChleGNsdWRlZC5zb21lKChleCkgPT4gZmlsZS5wYXRoID09PSBleCB8fCBmaWxlLnBhdGguc3RhcnRzV2l0aChgJHtleH0vYCkpKSB7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgZmlsZVBhdGggPSBgJHt2YXVsdEZvbGRlclBhdGh9LyR7ZmlsZS5uYW1lfWA7XG4gICAgICAgIGlmIChmaWxlLnR5cGUgPT09ICdmaWxlJykge1xuICAgICAgICAgIGNvbnN0IGZpbGVSZXNwb25zZSA9IGF3YWl0IGZldGNoKGZpbGUuZG93bmxvYWRfdXJsKTtcbiAgICAgICAgICBjb25zdCBjb250ZW50ID0gYXdhaXQgZmlsZVJlc3BvbnNlLnRleHQoKTtcbiAgICAgICAgICBjb25zdCBleGlzdHMgPSBhd2FpdCB0aGlzLmFwcC52YXVsdC5hZGFwdGVyLmV4aXN0cyhmaWxlUGF0aCk7XG4gICAgICAgICAgaWYgKGV4aXN0cykge1xuICAgICAgICAgICAgY29uc3QgY3VycmVudCA9IGF3YWl0IHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXIucmVhZChmaWxlUGF0aCk7XG4gICAgICAgICAgICBpZiAoY3VycmVudCAhPT0gY29udGVudCkge1xuICAgICAgICAgICAgICBhd2FpdCB0aGlzLmJhY2t1cEZpbGUoZmlsZVBhdGgsIGN1cnJlbnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoIWV4aXN0cykge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5hcHAudmF1bHQuY3JlYXRlKGZpbGVQYXRoLCBjb250ZW50KTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaWYgKChhd2FpdCB0aGlzLmFwcC52YXVsdC5hZGFwdGVyLnJlYWQoZmlsZVBhdGgpKSAhPT0gY29udGVudCkge1xuICAgICAgICAgICAgICBhd2FpdCB0aGlzLmFwcC52YXVsdC5hZGFwdGVyLndyaXRlKGZpbGVQYXRoLCBjb250ZW50KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgYXdhaXQgdGhpcy5maWxlQ2FjaGVNYW5hZ2VyLnVwZGF0ZUNhY2hlKGZpbGVQYXRoLCBjb250ZW50LCBmaWxlLnBhdGgsIGZhbHNlKTtcbiAgICAgICAgfSBlbHNlIGlmIChmaWxlLnR5cGUgPT09ICdkaXInKSB7XG4gICAgICAgICAgYXdhaXQgdGhpcy51cGRhdGVGb2xkZXJGcm9tR2l0SHViKGZpbGUucGF0aCwgYCR7dmF1bHRGb2xkZXJQYXRofS8ke2ZpbGUubmFtZX1gKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgYXdhaXQgdGhpcy5zYXZlU2V0dGluZ3MoKTtcbiAgICAgIG5ldyBOb3RpY2UoYFx1MjcwNSBGb2xkZXIgc3luY2VkOiAke3ZhdWx0Rm9sZGVyUGF0aH1gKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcihgXHUyNzRDIEZhaWxlZCB0byBzeW5jIGZvbGRlciB3aXRoIG0tcmVwbzogJHt2YXVsdEZvbGRlclBhdGh9YCwgZXJyb3IpO1xuICAgICAgbmV3IE5vdGljZShgXHUyNzRDIEZhaWxlZCB0byB1cGRhdGUgZm9sZGVyOiAke3ZhdWx0Rm9sZGVyUGF0aH1gKTtcbiAgICB9XG4gIH1cblxuICBhc3luYyByZWJ1aWxkRmlsZUNhY2hlKCkge1xuICAgIGNvbnN0IGNhY2hlID0gdGhpcy5maWxlQ2FjaGVNYW5hZ2VyO1xuICAgIGNvbnN0IHRhc2tzOiBQcm9taXNlPHZvaWQ+W10gPSBbXTtcblxuICAgIC8vIDEpIEluZGV4IGV4YWN0bHkgdGhlIGZpbGVzIGxpc3RlZCBpbiB0aGUgbWFuaWZlc3RcbiAgICBmb3IgKGNvbnN0IGVudHJ5IG9mIHRoaXMubWFuaWZlc3RDYWNoZS5maWxlcykge1xuICAgICAgY29uc3QgdmF1bHRQYXRoID0gdGhpcy5yZXNvbHZlVmF1bHRQYXRoKGVudHJ5LnBhdGgpO1xuICAgICAgaWYgKGF3YWl0IHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXIuZXhpc3RzKHZhdWx0UGF0aCkpIHtcbiAgICAgICAgdGFza3MucHVzaCgoYXN5bmMgKCkgPT4ge1xuICAgICAgICAgIGNvbnN0IGNvbnRlbnQgPSBhd2FpdCB0aGlzLmFwcC52YXVsdC5hZGFwdGVyLnJlYWQodmF1bHRQYXRoKTtcbiAgICAgICAgICBhd2FpdCBjYWNoZS51cGRhdGVDYWNoZSh2YXVsdFBhdGgsIGNvbnRlbnQsIGVudHJ5LnBhdGgsIGZhbHNlKTtcbiAgICAgICAgfSkoKSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gMikgSW5kZXggYW55IG1hcmtkb3duIGNoaWxkcmVuIHVuZGVyIG1hbmlmZXN0IGZvbGRlcnNcbiAgICBmb3IgKGNvbnN0IGZvbGRlckVudHJ5IG9mIHRoaXMubWFuaWZlc3RDYWNoZS5mb2xkZXJzKSB7XG4gICAgICBjb25zdCBmb2xkZXJQYXRoID0gZm9sZGVyRW50cnkucGF0aDtcbiAgICAgIGNvbnN0IGZvbGRlciA9IHRoaXMuYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChmb2xkZXJQYXRoKTtcbiAgICAgIGlmIChmb2xkZXIgaW5zdGFuY2VvZiBURm9sZGVyKSB7XG4gICAgICAgIFZhdWx0LnJlY3Vyc2VDaGlsZHJlbihmb2xkZXIsIChmaWxlKSA9PiB7XG4gICAgICAgICAgaWYgKGZpbGUgaW5zdGFuY2VvZiBURmlsZSAmJiBmaWxlLmV4dGVuc2lvbiA9PT0gJ21kJykge1xuICAgICAgICAgICAgY29uc3QgZmlsZVBhdGggPSBmaWxlLnBhdGg7XG4gICAgICAgICAgICB0YXNrcy5wdXNoKChhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgIGNvbnN0IGNvbnRlbnQgPSBhd2FpdCB0aGlzLmFwcC52YXVsdC5hZGFwdGVyLnJlYWQoZmlsZVBhdGgpO1xuICAgICAgICAgICAgICBhd2FpdCBjYWNoZS51cGRhdGVDYWNoZShmaWxlUGF0aCwgY29udGVudCwgZmlsZVBhdGgsIGZhbHNlKTtcbiAgICAgICAgICAgIH0pKCkpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgY29uc3QgYmF0Y2hTaXplID0gMTA7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0YXNrcy5sZW5ndGg7IGkgKz0gYmF0Y2hTaXplKSB7XG4gICAgICBhd2FpdCBQcm9taXNlLmFsbCh0YXNrcy5zbGljZShpLCBpICsgYmF0Y2hTaXplKSk7XG4gICAgfVxuXG4gICAgYXdhaXQgdGhpcy5zYXZlU2V0dGluZ3MoKTtcbiAgfVxuXG4gIGFzeW5jIHNob3dJbmRleGluZ01vZGFsKCkge1xuICAgIGNvbnN0IG1vZGFsID0gbmV3IChjbGFzcyBleHRlbmRzIE1vZGFsIHtcbiAgICAgIGNvbnN0cnVjdG9yKGFwcDogQXBwKSB7XG4gICAgICAgIHN1cGVyKGFwcCk7XG4gICAgICB9XG4gICAgICBvbk9wZW4oKSB7XG4gICAgICAgIHRoaXMuY29udGVudEVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IGUuc3RvcFByb3BhZ2F0aW9uKCkpO1xuICAgICAgICB0aGlzLnRpdGxlRWwuc2V0VGV4dCgnXHVEODNEXHVERDA0IEluZGV4aW5nIFRvb2xraXQgRmlsZXMuLi4nKTtcbiAgICAgICAgdGhpcy5jb250ZW50RWwuY3JlYXRlRWwoJ3AnLCB7XG4gICAgICAgICAgdGV4dDogJ0luZGV4aW5nIGFuZCBjYWNoaW5nIHlvdXIgVlZ1bmRlcmxvcmUgVmF1bHQgZm9yIGZhc3RlciB1cGRhdGVzIGFuZCBzYWZlciBzeW5jaW5nLidcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSkodGhpcy5hcHApO1xuXG4gICAgbW9kYWwub3BlbigpO1xuICAgIGF3YWl0IHRoaXMucmVidWlsZEZpbGVDYWNoZSgpO1xuICAgIG1vZGFsLmNsb3NlKCk7XG4gICAgbmV3IE5vdGljZSgnXHUyNzA1IFZWdW5kZXJsb3JlIGNhY2hpbmcgY29tcGxldGUuJyk7XG4gIH1cblxuICBhc3luYyB1cGRhdGVWZXJzaW9uRmlsZSgpIHtcbiAgICBpZiAoIXRoaXMuc2V0dGluZ3MubGF0ZXN0VG9vbGtpdFZlcnNpb24pIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3QgdmVyc2lvblBhdGggPSAnLnZlcnNpb24uanNvbic7XG4gICAgY29uc3QgY29udGVudCA9IEpTT04uc3RyaW5naWZ5KHsgdmVyc2lvbjogdGhpcy5zZXR0aW5ncy5sYXRlc3RUb29sa2l0VmVyc2lvbiB9LCBudWxsLCAyKTtcbiAgICBjb25zdCBleGlzdHMgPSBhd2FpdCB0aGlzLmFwcC52YXVsdC5hZGFwdGVyLmV4aXN0cyh2ZXJzaW9uUGF0aCk7XG4gICAgaWYgKGV4aXN0cykge1xuICAgICAgYXdhaXQgdGhpcy5hcHAudmF1bHQuYWRhcHRlci53cml0ZSh2ZXJzaW9uUGF0aCwgY29udGVudCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGF3YWl0IHRoaXMuYXBwLnZhdWx0LmNyZWF0ZSh2ZXJzaW9uUGF0aCwgY29udGVudCk7XG4gICAgfVxuICB9XG5cbiAgICAvKiogbWFpbi50cyAqKi9cblxuICAvKiogXG4gICAqIEluc3RhbGwgdGhlIHNlbGVjdGVkIGNvbXBlbmRpdW0gYW5kIHplcm8gb3IgbW9yZSByZWZlcmVuY2UgZWRpdGlvbnMuXG4gICAqL1xuICBwdWJsaWMgYXN5bmMgaW5zdGFsbEZ1bGxUb29sa2l0KFxuICAgIG9wdHM6IHsgY29tcGVuZGl1bTogc3RyaW5nOyByZWZlcmVuY2VzOiBzdHJpbmdbXSB9ID0geyBjb21wZW5kaXVtOiBcIlwiLCByZWZlcmVuY2VzOiBbXSB9XG4gICk6IFByb21pc2U8dm9pZD4ge1xuICAgIGNvbnN0IHsgY29tcGVuZGl1bSwgcmVmZXJlbmNlcyB9ID0gb3B0cztcbiAgICBpZiAoIWNvbXBlbmRpdW0pIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIk5vIGNvbXBlbmRpdW0gZWRpdGlvbiBzZWxlY3RlZFwiKTtcbiAgICB9XG5cblxuICBsZXQgaW5zdGFsbFN1Y2NlZWRlZCA9IGZhbHNlO1xuICB0cnkge1xuICAgIC8vIDIpIFN0YXRpYyBjb3B5IG9mIGV2ZXJ5dGhpbmcgaW4gdGhlIHJlcG8gRVhDRVBUIGFueSBDb21wZW5kaXVtLypcbiAgICBjb25zdCB0cmVlQXBpID1cbiAgICAgIFwiaHR0cHM6Ly9hcGkuZ2l0aHViLmNvbS9yZXBvcy9zbGFtd2lzZTAwMDEvVlZ1bmRlcmxvcmUtVG9vbGtpdC1GdWxsL2dpdC90cmVlcy9tYWluP3JlY3Vyc2l2ZT0xXCI7XG4gICAgY29uc3QgcmVzcCA9IGF3YWl0IGZldGNoKHRyZWVBcGkpO1xuICAgIGlmICghcmVzcC5vaykge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBGYWlsZWQgdG8gbGlzdCByZXBvIHRyZWU6ICR7cmVzcC5zdGF0dXNUZXh0fWApO1xuICAgIH1cbiAgICBjb25zdCBqc29uOiBhbnkgPSBhd2FpdCByZXNwLmpzb24oKTtcbiAgICBjb25zdCBpdGVtcyA9IEFycmF5LmlzQXJyYXkoanNvbi50cmVlKSA/IGpzb24udHJlZSA6IFtdO1xuXG4gICAgLy8gVXNlIHlvdXIgZXhjbHVkZWRQYXRocyAod2hpY2ggYWxyZWFkeSBjb250YWlucyBcIkNvbXBlbmRpdW1cIilcbiAgICBjb25zdCBzdGF0aWNFbnRyaWVzID0gKGl0ZW1zIGFzIEFycmF5PHsgcGF0aDogc3RyaW5nOyB0eXBlOiBzdHJpbmcgfT4pXG4gICAgICAuZmlsdGVyKChpdGVtKSA9PlxuICAgICAgICAhdGhpcy5leGNsdWRlZFBhdGhzLnNvbWUoZXggPT5cbiAgICAgICAgICBpdGVtLnBhdGggPT09IGV4IHx8IGl0ZW0ucGF0aC5zdGFydHNXaXRoKGAke2V4fS9gKVxuICAgICAgICApXG4gICAgICApXG4gICAgICAuc29ydCgoYSwgYikgPT4gKGEudHlwZSA9PT0gYi50eXBlID8gMCA6IGEudHlwZSA9PT0gXCJ0cmVlXCIgPyAtMSA6IDEpKTtcblxuICAgIGZvciAoY29uc3QgZW50cnkgb2Ygc3RhdGljRW50cmllcykge1xuICAgICAgaWYgKGVudHJ5LnR5cGUgPT09IFwidHJlZVwiKSB7XG4gICAgICAgIGlmICghKGF3YWl0IHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXIuZXhpc3RzKGVudHJ5LnBhdGgpKSkge1xuICAgICAgICAgIGF3YWl0IHRoaXMuYXBwLnZhdWx0LmNyZWF0ZUZvbGRlcihlbnRyeS5wYXRoKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc3QgcmF3VXJsID0gXG4gICAgICAgICAgYGh0dHBzOi8vcmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbS9zbGFtd2lzZTAwMDEvVlZ1bmRlcmxvcmUtVG9vbGtpdC1GdWxsL21haW4vJHtlbmNvZGVVUklDb21wb25lbnQoZW50cnkucGF0aCl9YDtcbiAgICAgICAgY29uc3QgZmlsZVJlc3AgPSBhd2FpdCBmZXRjaChyYXdVcmwpO1xuICAgICAgICBpZiAoIWZpbGVSZXNwLm9rKSBjb250aW51ZTtcbiAgICAgICAgY29uc3QgdGV4dCA9IGF3YWl0IGZpbGVSZXNwLnRleHQoKTtcbiAgICAgICAgaWYgKGF3YWl0IHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXIuZXhpc3RzKGVudHJ5LnBhdGgpKSB7XG4gICAgICAgICAgY29uc3Qgb2xkID0gYXdhaXQgdGhpcy5hcHAudmF1bHQuYWRhcHRlci5yZWFkKGVudHJ5LnBhdGgpO1xuICAgICAgICAgIGlmIChvbGQgIT09IHRleHQpIHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXIud3JpdGUoZW50cnkucGF0aCwgdGV4dCk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGF3YWl0IHRoaXMuYXBwLnZhdWx0LmNyZWF0ZShlbnRyeS5wYXRoLCB0ZXh0KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgICAgdGhpcy5zZXR0aW5ncy5ydWxlc2V0Q29tcGVuZGl1bSA9IGNvbXBlbmRpdW07XG4gICAgICBjb25zdCBwaWNrZWRSZWZzID0gcmVmZXJlbmNlcy5sZW5ndGggPiAwXG4gICAgICAgICAgPyByZWZlcmVuY2VzXG4gICAgICAgICAgOiB0aGlzLnNldHRpbmdzLnJ1bGVzZXRSZWZlcmVuY2U7XG4gICAgICAgIHRoaXMuc2V0dGluZ3MucnVsZXNldFJlZmVyZW5jZSA9IHBpY2tlZFJlZnM7XG5cbiAgICAgICAgYXdhaXQgdGhpcy5zYXZlU2V0dGluZ3MoKTtcblxuICAgICAgICAvLyBub3cgcnVuIHRoZSBpbXBvcnQgam9icyBhZ2FpbnN0IHRoZSBjb21wZW5kaXVtICsgdGhlIGFjdHVhbCByZWZzXG4gICAgICAgIGNvbnN0IGpvYnMgPSBbXG4gICAgICAgICAgaW1wb3J0UnVsZXNldERhdGEoeyBhcHA6IHRoaXMuYXBwLCBlZGl0aW9uS2V5OiBjb21wZW5kaXVtLCB0YXJnZXRQYXRoOiBcIkNvbXBlbmRpdW1cIiB9KSxcbiAgICAgICAgICAgLi4ucGlja2VkUmVmcy5tYXAocmVmS2V5ID0+IHtcbiAgICBjb25zdCBkaXNwbGF5TmFtZSA9IGdldFJ1bGVzZXREaXNwbGF5TmFtZShyZWZLZXkpO1xuICAgIHJldHVybiBpbXBvcnRSdWxlc2V0RGF0YSh7XG4gICAgICBhcHA6ICAgICAgICB0aGlzLmFwcCxcbiAgICAgIGVkaXRpb25LZXk6IHJlZktleSxcbiAgICAgIHRhcmdldFBhdGg6IGBSZXNvdXJjZXMvUnVsZXNldHMvJHtkaXNwbGF5TmFtZX1gLH0pXG4gICAgICAgIH0pXG4gICAgICAgIF07XG4gICAgICAgIGF3YWl0IFByb21pc2UuYWxsKGpvYnMpO1xuXG4gICAgLy8gMykgS2ljayBvZmYgeW91ciBKU09OXHUyMTkyTUQgcGFyc2VycyBpbiBwYXJhbGxlbFxuICAgIGNvbnN0IHBhcnNlSm9icyA9IFtcbiAgICAgIGltcG9ydFJ1bGVzZXREYXRhKHtcbiAgICAgICAgYXBwOiB0aGlzLmFwcCxcbiAgICAgICAgZWRpdGlvbktleTogY29tcGVuZGl1bSxcbiAgICAgICAgdGFyZ2V0UGF0aDogYENvbXBlbmRpdW1gLFxuICAgICAgfSksXG4gIC4uLnJlZmVyZW5jZXMubWFwKHJlZktleSA9PiB7XG4gICAgY29uc3QgZGlzcGxheU5hbWUgPSBnZXRSdWxlc2V0RGlzcGxheU5hbWUocmVmS2V5KTtcbiAgICByZXR1cm4gaW1wb3J0UnVsZXNldERhdGEoe1xuICAgICAgYXBwOiAgICAgICAgdGhpcy5hcHAsXG4gICAgICBlZGl0aW9uS2V5OiByZWZLZXksXG4gICAgICB0YXJnZXRQYXRoOiBgUmVzb3VyY2VzL1J1bGVzZXRzLyR7ZGlzcGxheU5hbWV9YCxcbiAgICAgICAgfSlcbiAgICAgIH0pLFxuICAgIF07XG4gICAgLy8gdGhpcyB3b25cdTIwMTl0IHJlc29sdmUgdW50aWwgX2FsbF8gcGFyc2VycyBoYXZlIGZpbmlzaGVkIHdyaXRpbmcgdGhlaXIgTUQgZmlsZXNcbiAgICBhd2FpdCBQcm9taXNlLmFsbChwYXJzZUpvYnMpO1xuXG4gICAgLy8gNCkgUG9zdC1pbnN0YWxsIGhvdXNla2VlcGluZ1xuICAgIGNvbnN0IG1hcmtlciA9IFwiLnZ2dW5kZXJsb3JlX2luc3RhbGxlZFwiO1xuICAgIGlmICghKGF3YWl0IHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXIuZXhpc3RzKG1hcmtlcikpKSB7XG4gICAgICBhd2FpdCB0aGlzLmFwcC52YXVsdC5jcmVhdGUobWFya2VyLCBcIlwiKTtcbiAgICB9XG4gICAgdGhpcy5zZXR0aW5ncy5oaWdobGlnaHRFbmFibGVkID0gdHJ1ZTtcbiAgICBhd2FpdCB0aGlzLnNhdmVTZXR0aW5ncygpO1xuICAgIHRoaXMuZW5hYmxlSGlnaGxpZ2h0KCk7XG5cbiAgICBpbnN0YWxsU3VjY2VlZGVkID0gdHJ1ZTtcbiAgfSBjYXRjaCAoZXJyKSB7XG4gICAgY29uc29sZS5lcnJvcihcIlx1Mjc0QyBpbnN0YWxsRnVsbFRvb2xraXQoKVwiLCBlcnIpO1xuICB9IGZpbmFsbHkge1xuICAgIC8vIG9ubHkgbm93IGNsb3NlIHRoZSBzcGlubmVyICYgcmVkcmF3IHRoZSBVSVxuICAgIGlmICh0aGlzLnNldHRpbmdzVGFiKSB0aGlzLnNldHRpbmdzVGFiLmRpc3BsYXkoKTtcbiAgICBuZXcgTm90aWNlKFxuICAgICAgaW5zdGFsbFN1Y2NlZWRlZFxuICAgICAgICA/IFwiXHUyNzA1IFZWdW5kZXJsb3JlIFRvb2xraXQgc3VjY2Vzc2Z1bGx5IGluc3RhbGxlZCFcIlxuICAgICAgICA6IFwiXHUyNzRDIEZhaWxlZCB0byBpbnN0YWxsIHRvb2xraXQuIFNlZSBjb25zb2xlIGZvciBkZXRhaWxzLlwiXG4gICAgKTtcbiAgfVxufVxuXG4vLyAqIFJlLXBhcnNlIGFsbCBnYW1lc2V0IGRhdGEgKHJ1bGVzZXQgY29tcGVuZGl1bSArIHJlZmVyZW5jZSBzZXRzKVxuYXN5bmMgcmVmcmVzaEdhbWVTZXREYXRhKCk6IFByb21pc2U8dm9pZD4ge1xuICBjb25zdCB7IHJ1bGVzZXRDb21wZW5kaXVtLCBydWxlc2V0UmVmZXJlbmNlIH0gPSB0aGlzLnNldHRpbmdzO1xuXG4gIGlmICghcnVsZXNldENvbXBlbmRpdW0gJiYgcnVsZXNldFJlZmVyZW5jZS5sZW5ndGggPT09IDApIHtcbiAgICBuZXcgTm90aWNlKFwiXHUyNkEwXHVGRTBGIE5vIGdhbWVzZXQga2V5cyBzZXQ7IG5vdGhpbmcgdG8gcmVmcmVzaC5cIik7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgY29uc3Qgam9iczogUHJvbWlzZTx1bmtub3duPltdID0gW107XG4gIGlmIChydWxlc2V0Q29tcGVuZGl1bSkge1xuICAgIGpvYnMucHVzaChpbXBvcnRSdWxlc2V0RGF0YSh7XG4gICAgICBhcHA6IHRoaXMuYXBwLFxuICAgICAgZWRpdGlvbktleTogcnVsZXNldENvbXBlbmRpdW0sXG4gICAgICB0YXJnZXRQYXRoOiBcIkNvbXBlbmRpdW1cIixcbiAgICB9KSk7XG4gIH1cbmZvciAoY29uc3QgcmVmIG9mIHJ1bGVzZXRSZWZlcmVuY2UpIHtcbiAgY29uc3QgZGlzcGxheU5hbWUgPSBnZXRSdWxlc2V0RGlzcGxheU5hbWUocmVmKTtcbiAgam9icy5wdXNoKGltcG9ydFJ1bGVzZXREYXRhKHtcbiAgICBhcHA6ICAgICAgICB0aGlzLmFwcCxcbiAgICBlZGl0aW9uS2V5OiByZWYsXG4gICAgdGFyZ2V0UGF0aDogYFJlc291cmNlcy9SdWxlc2V0cy8ke2Rpc3BsYXlOYW1lfWAsXG4gIH0pKTtcbn1cblxuICBhd2FpdCBQcm9taXNlLmFsbChqb2JzKTtcbiAgbmV3IE5vdGljZShcIlx1MjcwNSBHYW1lIFNldCBEYXRhIHJlZnJlc2hlZC5cIik7XG59XG5cblxuXG59XG5leHBvcnQgeyBJbnN0YWxsaW5nTW9kYWwgfTsiLCAiaW1wb3J0IHtcblx0UGx1Z2luU2V0dGluZ1RhYixcblx0U2V0dGluZyxcblx0QXBwLFxuXHRURmlsZSxcblx0VEZvbGRlcixcblx0QWJzdHJhY3RJbnB1dFN1Z2dlc3QsXG5cdHNldEljb24sXG5cdE1vZGFsLFxuXHRNYXJrZG93blJlbmRlcmVyLFxuXHRDb21wb25lbnQsXG5cdE5vdGljZSxcblx0VGV4dENvbXBvbmVudCxcblx0VG9nZ2xlQ29tcG9uZW50LFxuXHRCdXR0b25Db21wb25lbnQsXG5cdERyb3Bkb3duQ29tcG9uZW50LFxuXHRTZWFyY2hDb21wb25lbnRcbn0gZnJvbSAnb2JzaWRpYW4nO1xuaW1wb3J0IHR5cGUgVlZ1bmRlcmxvcmVUb29sa2l0UGx1Z2luIGZyb20gJy4vbWFpbic7XG5pbXBvcnQgeyBDb25maXJtRnJlc2hJbnN0YWxsTW9kYWwgfSBmcm9tICcuL2ZpcnN0aW5zdGFsbGNvbmZpcm0nO1xuaW1wb3J0IHsgc2hvd0N1c3RvbUluc3RhbGxNb2RhbCB9IGZyb20gXCIuL2N1c3RvbUluc3RhbGxNb2RhbFwiO1xuaW1wb3J0ICogYXMgcGF0aCBmcm9tICdwYXRoJztcbmltcG9ydCB7IEFWQUlMQUJMRV9FRElUSU9OUywgRWRpdGlvbiB9IGZyb20gJy4vZWRpdGlvbnMnXG5cblxuLy8gRGVmaW5lIHlvdXIgQ3VzdG9tUGF0aEVudHJ5IGludGVyZmFjZS5cbmludGVyZmFjZSBDdXN0b21QYXRoRW50cnkge1xuXHR2YXVsdFBhdGg6IHN0cmluZztcblx0bWFuaWZlc3RLZXk6IHN0cmluZztcblx0ZG9VcGRhdGU6IGJvb2xlYW47XG59XG5cbi8vIEZpbGVQYXRoU3VnZ2VzdGVyIGZvciBsaXZlIHNlYXJjaCBvbiB2YXVsdCBmaWxlcy5cbmNsYXNzIEZpbGVQYXRoU3VnZ2VzdGVyIGV4dGVuZHMgQWJzdHJhY3RJbnB1dFN1Z2dlc3Q8c3RyaW5nPiB7XG5cdHByaXZhdGUgaW5wdXRFbDogSFRNTElucHV0RWxlbWVudDtcblx0cHJpdmF0ZSBwYXRoczogeyBwYXRoOiBzdHJpbmc7IGlzRm9sZGVyOiBib29sZWFuIH1bXSA9IFtdO1xuXHRwcml2YXRlIGN1cnJlbnRTdWdnZXN0aW9uczogc3RyaW5nW10gPSBbXTtcblx0cHJpdmF0ZSByZW5kZXJlZFN1Z2dlc3Rpb25zOiBNYXA8SFRNTEVsZW1lbnQsIHN0cmluZz4gPSBuZXcgTWFwKCk7XG5cblx0Y29uc3RydWN0b3IoYXBwOiBBcHAsIGlucHV0RWw6IEhUTUxJbnB1dEVsZW1lbnQpIHtcblx0XHRzdXBlcihhcHAsIGlucHV0RWwpO1xuXHRcdHRoaXMuaW5wdXRFbCA9IGlucHV0RWw7XG5cblx0XHQvLyBHZXQgZm9sZGVycyBhbmQgbWFya2Rvd24gZmlsZXMgZnJvbSB0aGUgdmF1bHQuXG5cdFx0Y29uc3QgZm9sZGVycyA9IE9iamVjdC52YWx1ZXMoYXBwLnZhdWx0LmdldEFsbExvYWRlZEZpbGVzKCkpXG5cdFx0XHQuZmlsdGVyKChmKTogZiBpcyBURm9sZGVyID0+IGYgaW5zdGFuY2VvZiBURm9sZGVyKVxuXHRcdFx0Lm1hcChmID0+ICh7IHBhdGg6IGYucGF0aCwgaXNGb2xkZXI6IHRydWUgfSkpO1xuXHRcdGNvbnN0IGZpbGVzID0gYXBwLnZhdWx0LmdldE1hcmtkb3duRmlsZXMoKVxuXHRcdFx0Lm1hcChmID0+ICh7IHBhdGg6IGYucGF0aCwgaXNGb2xkZXI6IGZhbHNlIH0pKTtcblx0XHR0aGlzLnBhdGhzID0gWy4uLmZvbGRlcnMsIC4uLmZpbGVzXTtcblxuXHRcdHRoaXMuaW5wdXRFbC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgKGU6IEtleWJvYXJkRXZlbnQpID0+IHtcblx0XHRcdGlmIChlLmtleSA9PT0gJ0VudGVyJykge1xuXHRcdFx0XHRzZXRUaW1lb3V0KCgpID0+IHtcblx0XHRcdFx0XHRjb25zdCBjb250YWluZXIgPSAodGhpcyBhcyBhbnkpLmNvbnRhaW5lckVsIGFzIEhUTUxFbGVtZW50O1xuXHRcdFx0XHRcdGlmICghY29udGFpbmVyKSByZXR1cm47XG5cdFx0XHRcdFx0Y29uc3Qgc2VsZWN0ZWRFbCA9IGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcuc3VnZ2VzdGlvbi1pdGVtLmlzLXNlbGVjdGVkJykgYXMgSFRNTEVsZW1lbnQ7XG5cdFx0XHRcdFx0aWYgKHNlbGVjdGVkRWwpIHtcblx0XHRcdFx0XHRcdGNvbnN0IHNlbGVjdGVkUGF0aCA9IHRoaXMucmVuZGVyZWRTdWdnZXN0aW9ucy5nZXQoc2VsZWN0ZWRFbCk7XG5cdFx0XHRcdFx0XHRpZiAoc2VsZWN0ZWRQYXRoKSB7XG5cdFx0XHRcdFx0XHRcdHRoaXMuc2VsZWN0U3VnZ2VzdGlvbihzZWxlY3RlZFBhdGgpO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSwgMCk7XG5cdFx0XHR9XG5cdFx0fSk7XG5cdH1cblxuXHRnZXRTdWdnZXN0aW9ucyhpbnB1dFN0cjogc3RyaW5nKTogc3RyaW5nW10ge1xuXHRcdGNvbnN0IHF1ZXJ5ID0gaW5wdXRTdHIudG9Mb3dlckNhc2UoKTtcblx0XHR0aGlzLmN1cnJlbnRTdWdnZXN0aW9ucyA9IHRoaXMucGF0aHNcblx0XHRcdC5maWx0ZXIoKHsgcGF0aCB9KSA9PiBwYXRoLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMocXVlcnkpKVxuXHRcdFx0Lm1hcChwID0+IHAucGF0aCk7XG5cdFx0cmV0dXJuIHRoaXMuY3VycmVudFN1Z2dlc3Rpb25zO1xuXHR9XG5cblx0cmVuZGVyU3VnZ2VzdGlvbihwYXRoOiBzdHJpbmcsIGVsOiBIVE1MRWxlbWVudCk6IHZvaWQge1xuXHRcdGNvbnN0IGlzRm9sZGVyID0gdGhpcy5wYXRocy5maW5kKHAgPT4gcC5wYXRoID09PSBwYXRoKT8uaXNGb2xkZXI7XG5cdFx0ZWwuYWRkQ2xhc3MoXCJtb2QtY29tcGxleFwiKTtcblx0XHRjb25zdCBpY29uRWwgPSBlbC5jcmVhdGVEaXYoeyBjbHM6ICdzdWdnZXN0aW9uLWljb24nIH0pO1xuXHRcdHNldEljb24oaWNvbkVsLCBpc0ZvbGRlciA/ICdmb2xkZXInIDogJ2RvY3VtZW50Jyk7XG5cblx0XHRjb25zdCBuYW1lID0gcGF0aC5zcGxpdCgnLycpLnBvcCgpITtcblx0XHRjb25zdCBkaXNwbGF5TmFtZSA9IGlzRm9sZGVyID8gbmFtZSA6IG5hbWUucmVwbGFjZSgvXFwubWQkLywgJycpO1xuXHRcdGVsLmNyZWF0ZURpdih7IHRleHQ6IGRpc3BsYXlOYW1lLCBjbHM6ICdzdWdnZXN0aW9uLXRpdGxlJyB9KTtcblx0XHRjb25zdCBwYXJlbnRQYXRoID0gcGF0aC5zcGxpdCgnLycpLnNsaWNlKDAsIC0xKS5qb2luKCcvJyk7XG5cdFx0ZWwuY3JlYXRlRGl2KHsgdGV4dDogcGFyZW50UGF0aCwgY2xzOiAnc2VhcmNoLXN1Z2dlc3QtaW5mby10ZXh0JyB9KTtcblx0XHRlbC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGU6IE1vdXNlRXZlbnQpID0+IHtcblx0XHRcdGUuc3RvcFByb3BhZ2F0aW9uKCk7XG5cdFx0XHR0aGlzLnNlbGVjdFN1Z2dlc3Rpb24ocGF0aCk7XG5cdFx0fSk7XG5cdFx0dGhpcy5yZW5kZXJlZFN1Z2dlc3Rpb25zLnNldChlbCwgcGF0aCk7XG5cdH1cblxuXHRzZWxlY3RTdWdnZXN0aW9uKHBhdGg6IHN0cmluZyk6IHZvaWQge1xuXHRcdHRoaXMuaW5wdXRFbC52YWx1ZSA9IHBhdGg7XG5cdFx0dGhpcy5pbnB1dEVsLmRpc3BhdGNoRXZlbnQobmV3IEV2ZW50KFwiaW5wdXRcIikpO1xuXHRcdHRoaXMuY2xvc2UoKTtcblx0fVxufVxuXG4vLyBNb2RhbCBmb3IgZGlzcGxheWluZyB0aGUgY2hhbmdlbG9nLlxuY2xhc3MgTWFya2Rvd25QcmV2aWV3TW9kYWwgZXh0ZW5kcyBNb2RhbCB7XG5cdGNvbnN0cnVjdG9yKGFwcDogQXBwLCBwcml2YXRlIGNvbnRlbnQ6IHN0cmluZykge1xuXHRcdHN1cGVyKGFwcCk7XG5cdH1cblxuXHRvbk9wZW4oKTogdm9pZCB7XG5cdFx0dGhpcy5jb250ZW50RWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4gZS5zdG9wUHJvcGFnYXRpb24oKSk7XG5cdFx0dGhpcy5jb250ZW50RWwuZW1wdHkoKTtcblx0XHR0aGlzLmNvbnRlbnRFbC5jcmVhdGVFbCgnaDInLCB7IHRleHQ6ICdUb29sa2l0IENoYW5nZWxvZycgfSk7XG5cdFx0Y29uc3QgbWQgPSB0aGlzLmNvbnRlbnRFbC5jcmVhdGVEaXYoKTtcblx0XHRjb25zdCBkdW1teUNvbXBvbmVudCA9IG5ldyBjbGFzcyBleHRlbmRzIENvbXBvbmVudCB7fSgpO1xuXHRcdE1hcmtkb3duUmVuZGVyZXIucmVuZGVyTWFya2Rvd24odGhpcy5jb250ZW50LCBtZCwgJy8nLCBkdW1teUNvbXBvbmVudCk7XG5cdH1cblxuXHRvbkNsb3NlKCk6IHZvaWQge1xuXHRcdHRoaXMuY29udGVudEVsLmVtcHR5KCk7XG5cdH1cbn1cblxuLy8gVGhlIGZ1bGwgc2V0dGluZ3MgdGFiLlxuZXhwb3J0IGNsYXNzIFRvb2xraXRTZXR0aW5nc1RhYiBleHRlbmRzIFBsdWdpblNldHRpbmdUYWIge1xuXHRwbHVnaW46IFZWdW5kZXJsb3JlVG9vbGtpdFBsdWdpbjtcblxuXHRjb25zdHJ1Y3RvcihhcHA6IEFwcCwgcGx1Z2luOiBWVnVuZGVybG9yZVRvb2xraXRQbHVnaW4pIHtcblx0XHRzdXBlcihhcHAsIHBsdWdpbik7XG5cdFx0dGhpcy5wbHVnaW4gPSBwbHVnaW47ICBcblx0fSAgIFxuXHRwcml2YXRlIHJlbmRlckhlYWRlcihyb290OiBIVE1MRWxlbWVudCk6IHZvaWQge1xuXHRcdGNvbnN0IGhlYWRlciA9IHJvb3QuY3JlYXRlRGl2KCk7XG5cdFx0aGVhZGVyLmFkZENsYXNzKFwic2V0dGluZ3MtaGVhZGVyXCIpO1xuXHQgIFxuXHRcdGhlYWRlci5jcmVhdGVFbCgnaDMnLCB7IHRleHQ6ICdWVnVuZGVybG9yZSBUb29sa2l0IFNldHRpbmdzJyB9KTtcblx0ICBcblx0XHRjb25zdCBoZWFkZXJCdG5zID0gaGVhZGVyLmNyZWF0ZURpdigpO1xuXHRcdGhlYWRlckJ0bnMuYWRkQ2xhc3MoXCJzZXR0aW5ncy1oZWFkZXItYnRuXCIpO1xuXHQgIFxuXHRcdGNvbnN0IGRvY3NCdG4gPSBoZWFkZXJCdG5zLmNyZWF0ZUVsKCdidXR0b24nLCB7IHRleHQ6ICdEb2NzJyB9KTtcblx0XHRkb2NzQnRuLm9uY2xpY2sgPSAoKSA9PiB3aW5kb3cub3BlbignaHR0cDovL3Z2dW5kZXJsb3JlLmNvbScsICdfYmxhbmsnKTtcblx0ICBcblx0XHRjb25zdCBnaXRodWJCdG4gPSBoZWFkZXJCdG5zLmNyZWF0ZUVsKCdidXR0b24nLCB7IHRleHQ6ICdHaXRIdWInIH0pO1xuXHRcdGdpdGh1YkJ0bi5vbmNsaWNrID0gKCkgPT5cblx0XHQgIHdpbmRvdy5vcGVuKCdodHRwczovL2dpdGh1Yi5jb20vc2xhbXdpc2UwMDAxL1ZWdW5kZXJsb3JlLVRvb2xraXQtRnVsbCcsICdfYmxhbmsnKTtcblx0ICBcblx0XHRjb25zdCBrb2ZpQnRuID0gaGVhZGVyQnRucy5jcmVhdGVFbCgnYnV0dG9uJywge1xuXHRcdCAgdGV4dDogJ1x1MjYxNSBLby1maScsXG5cdFx0ICBjbHM6ICdtb2QtY3RhJyxcblx0XHR9KTtcblx0XHRrb2ZpQnRuLmFkZENsYXNzKFwic2V0dGluZ3Mta29maVwiKTtcblx0XHRrb2ZpQnRuLm9uY2xpY2sgPSAoKSA9PiB3aW5kb3cub3BlbignaHR0cHM6Ly9rby1maS5jb20vdnZ1bmRlcmxvcmUnLCAnX2JsYW5rJyk7XG5cdCAgfVxuXHQgIFxuXHRcdHByaXZhdGUgcmVuZGVyRmlyc3RSdW5DYXJkKHJvb3Q6IEhUTUxFbGVtZW50KXtcblxuXHRcdFx0Ly8gMSkgT3V0ZXIgd3JhcHBlclxuXHRcdFx0Y29uc3QgY2FyZCA9IHJvb3QuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAndnZ1bmRlcmxvcmUtZmlyc3QtcnVuJyB9KTtcblx0XHRcdE9iamVjdC5hc3NpZ24oY2FyZC5zdHlsZSwge1xuXHRcdFx0ZGlzcGxheTogJ2ZsZXgnLFxuXHRcdFx0ZmxleERpcmVjdGlvbjogJ2NvbHVtbicsXG5cdFx0XHRhbGlnbkl0ZW1zOiAnY2VudGVyJyxcblx0XHRcdHRleHRBbGlnbjogJ2NlbnRlcicsXG5cdFx0XHRtYXJnaW5Ub3A6ICcyZW0nLFxuXHRcdFx0cGFkZGluZzogJzFlbScsXG5cdFx0XHRib3JkZXI6ICcycHggc29saWQgdmFyKC0tZGl2aWRlci1jb2xvciknLFxuXHRcdFx0Ym9yZGVyUmFkaXVzOiAnMThweCcsICAgICAgICAvKiAob3B0aW9uYWwpIHJvdW5kIHRoZSBjb3JuZXJzIHNsaWdodGx5ICovXG5cdFx0XHRiYWNrZ3JvdW5kQ29sb3I6ICd2YXIoLS1iYWNrZ3JvdW5kLXByaW1hcnkpJywgLyogKG9wdGlvbmFsKSB3aGl0ZS9ncmF5IGJhY2tncm91bmQgKi9cblx0XHRcdH0pO1xuXHRcdFxuXHRcdFx0Ly8gMikgSGVhZGVyXG5cdFx0XHRjb25zdCB0aXRsZSA9IGNhcmQuY3JlYXRlRWwoJ2gyJywge1xuXHRcdFx0dGV4dDogJ1x1RDgzQ1x1REZGMCBXZWxjb21lIHRvIFZWdW5kZXJsb3JlJyxcblx0XHRcdGNsczogJ3Z2LWNhcmQtdGl0bGUnLFxuXHRcdFx0fSk7XG5cdFx0XHQvLyBHaXZlIHRoZSB0aXRsZSBhIGxpdHRsZSBib3R0b20gbWFyZ2luXG5cdFx0XHR0aXRsZS5hZGRDbGFzcyhcInZ2LW1iLXNtXCIpO1xuXHRcdFxuXHRcdFx0Ly8gMykgSW5zdHJ1Y3Rpb25hbCBjb3B5XG5cdFx0XHRjb25zdCBkZXNjID0gY2FyZC5jcmVhdGVFbCgncCcsIHtcblx0XHRcdHRleHQ6XG5cdFx0XHRcdCdHZXQgc3RhcnRlZCBieSBpbnN0YWxsaW5nIHRoZSBkZWZhdWx0IHRvb2xraXRcdTIwMTRcXG5vciBjaG9vc2UgaW5kaXZpZHVhbCBwaWVjZXMgdG8gc3VpdCB5b3VyIHZhdWx0LicsXG5cdFx0XHRjbHM6ICd2di1jYXJkLWRlc2MnLFxuXHRcdFx0fSk7XG5cdFx0XHQvLyBTbGlnaHQgYm90dG9tIG1hcmdpbiBzbyBpdCBkb2Vzbid0IGJ1dHQgcmlnaHQgdXAgYWdhaW5zdCB0aGUgYnV0dG9uc1xuXHRcdFx0ZGVzYy5hZGRDbGFzcyhcInZ2LW1iLWxnXCIpO1xuXG4vLyBcdTI1MDBcdTI1MDBcdTI1MDAgUlVMRVNFVCAvIFJFRkVSRU5DRSBHUklEIFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFxuY29uc3QgcGx1Z2luID0gdGhpcy5wbHVnaW47XG5cbi8vIDEpIEdyaWQgY29udGFpbmVyXG5jb25zdCBncmlkID0gY2FyZC5jcmVhdGVEaXYoKTtcbk9iamVjdC5hc3NpZ24oZ3JpZC5zdHlsZSwge1xuICBkaXNwbGF5OiAnZ3JpZCcsXG4gIGdyaWRUZW1wbGF0ZUNvbHVtbnM6ICdtYXgtY29udGVudCBtYXgtY29udGVudCcsXG4gIGNvbHVtbkdhcDogJzFyZW0nLFxuICByb3dHYXA6ICcwLjI1cmVtJyxcbiAganVzdGlmeUNvbnRlbnQ6ICdjZW50ZXInLFxuICBqdXN0aWZ5SXRlbXM6ICdjZW50ZXInLFxuICBtYXJnaW5Cb3R0b206ICcxcmVtJyxcbn0pO1xuXG4vLyAyKSBIZWFkZXIgcm93XG5jb25zdCBsYWJlbFJzID0gZ3JpZC5jcmVhdGVFbCgnZGl2JywgeyB0ZXh0OiAnUnVsZXNldCcgfSk7XG5sYWJlbFJzLmFkZENsYXNzKFwiaW5zdGFsbC1ydWxlc2hlYWRlclwiKTtcbmNvbnN0IGxhYmVsUmVmID0gZ3JpZC5jcmVhdGVFbCgnZGl2JywgeyB0ZXh0OiAnUmVmZXJlbmNlIChvcHRpb25hbCknIH0pO1xubGFiZWxSZWYuYWRkQ2xhc3MoXCJpbnN0YWxsLXJ1bGVzaGVhZGVyXCIpO1xuXG4vLyAzKSBJbnB1dCBjZWxsc1xuY29uc3QgcnNDZWxsID0gZ3JpZC5jcmVhdGVEaXYoeyBhdHRyOiB7IHN0eWxlOiAndGV4dC1hbGlnbjpjZW50ZXInIH0gfSk7XG5jb25zdCByZWZDZWxsID0gZ3JpZC5jcmVhdGVEaXYoeyBhdHRyOiB7IHN0eWxlOiAndGV4dC1hbGlnbjpjZW50ZXInIH0gfSk7XG5cbi8vIDQpIE11dGVkLCBpdGFsaWMgc3VtbWFyeSBiYXIgKHNwYW5zIGJvdGggY29sdW1ucylcbmNvbnN0IHN1bW1hcnlCYXIgPSBncmlkLmNyZWF0ZURpdigpO1xuT2JqZWN0LmFzc2lnbihzdW1tYXJ5QmFyLnN0eWxlLCB7XG4gIGdyaWRDb2x1bW46ICcxIC8gc3BhbiAyJyxcbiAgZGlzcGxheTogJ2ZsZXgnLFxuICBhbGlnbkl0ZW1zOiAnY2VudGVyJyxcbiAgZmxleFdyYXA6ICd3cmFwJyxcbiAgZ2FwOiAnMC41cmVtJyxcbiAgZm9udFNpemU6ICcwLjg1ZW0nLFxuICBjb2xvcjogJ3ZhcigtLXRleHQtbXV0ZWQpJyxcbiAgZm9udFN0eWxlOiAnaXRhbGljJyxcbiAgbWFyZ2luVG9wOiAnMC4yNXJlbScsXG4gIG1hcmdpbkJvdHRvbTogJzFyZW0nLFxufSk7XG5jb25zdCBydWxlc2V0U3BhbiA9IHN1bW1hcnlCYXIuY3JlYXRlU3Bhbih7XG4gIHRleHQ6IGBSdWxlc2V0OiAke1xuICAgIHBsdWdpbi5zZXR0aW5ncy5ydWxlc2V0Q29tcGVuZGl1bVxuICAgICAgPyBgRCZEIDVFICgke3BsdWdpbi5zZXR0aW5ncy5ydWxlc2V0Q29tcGVuZGl1bX0pYFxuICAgICAgOiAnJ1xuICB9YCxcbn0pO1xucnVsZXNldFNwYW4uYWRkQ2xhc3MoXCJpbnN0YWxsLXJ1bGVzaGVhZGVyXCIpO1xuc3VtbWFyeUJhci5jcmVhdGVTcGFuKHsgdGV4dDogJ1JlZmVyZW5jZXM6JyB9KTtcbmNvbnN0IGNoaXBzV3JhcHBlciA9IHN1bW1hcnlCYXIuY3JlYXRlRGl2KCk7XG5PYmplY3QuYXNzaWduKGNoaXBzV3JhcHBlci5zdHlsZSwgeyBkaXNwbGF5OiAnZmxleCcsIGdhcDogJzRweCcgfSk7XG5cbi8vIEhlbHBlciB0byByZW5kZXIgYSBjaGlwXG5mdW5jdGlvbiBhZGRDaGlwKGlkOiBzdHJpbmcpIHtcblx0Y29uc3QgZWQgPSBBVkFJTEFCTEVfRURJVElPTlMuZmluZChlID0+IGUuaWQgPT09IGlkKSE7XG5cdGNvbnN0IGNoaXAgPSBjaGlwc1dyYXBwZXIuY3JlYXRlRGl2KHtcblx0ICBhdHRyOiB7XG5cdFx0c3R5bGU6XG5cdFx0ICAnYmFja2dyb3VuZDogdmFyKC0taW50ZXJhY3RpdmUtYWNjZW50KTsgY29sb3I6IHdoaXRlOyBwYWRkaW5nOjJweCA2cHg7ICcgK1xuXHRcdCAgJ2JvcmRlci1yYWRpdXM6NHB4OyBkaXNwbGF5OmlubGluZS1mbGV4OyBhbGlnbi1pdGVtczpjZW50ZXI7IGdhcDo0cHg7J1xuXHQgIH1cblx0fSk7XG5cdGNoaXAuY3JlYXRlU3Bhbih7IHRleHQ6IGVkLmxhYmVsIH0pO1xuXHRjb25zdCByZW0gPSBjaGlwLmNyZWF0ZVNwYW4oe1xuXHQgIHRleHQ6ICdcdTAwRDcnLFxuXHQgIGF0dHI6IHsgc3R5bGU6ICdjdXJzb3I6cG9pbnRlcjsgbWFyZ2luLWxlZnQ6NHB4OycgfVxuXHR9KTtcblx0cmVtLm9uY2xpY2sgPSBhc3luYyAoKSA9PiB7XG5cdCAgcGx1Z2luLnNldHRpbmdzLnJ1bGVzZXRSZWZlcmVuY2UgPSBwbHVnaW4uc2V0dGluZ3MucnVsZXNldFJlZmVyZW5jZS5maWx0ZXIoeCA9PiB4ICE9PSBpZCk7XG5cdCAgYXdhaXQgcGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuXHQgIGNoaXAucmVtb3ZlKCk7XG5cdCAgdXBkYXRlSW5zdGFsbEJ1dHRvbnMoKTtcblx0fTtcbiAgfVxuICA7XG5cbi8vIEluaXRpYWwgY2hpcHMgZHJhd1xucGx1Z2luLnNldHRpbmdzLnJ1bGVzZXRSZWZlcmVuY2UuZm9yRWFjaChlID0+IGFkZENoaXAoZSkpO1xuXG4vLyA1KSBSdWxlc2V0IGRyb3Bkb3duXG5jb25zdCByc0Ryb3Bkb3duID0gbmV3IERyb3Bkb3duQ29tcG9uZW50KHJzQ2VsbCk7XG5yc0Ryb3Bkb3duLmFkZE9wdGlvbignJywgJ1NlbGVjdCBlZGl0aW9uXHUyMDI2Jyk7XG5BVkFJTEFCTEVfRURJVElPTlMuZm9yRWFjaCgoZWQ6IEVkaXRpb24pID0+IHtcbiAgcnNEcm9wZG93bi5hZGRPcHRpb24oZWQuaWQsIGVkLmxhYmVsKTtcbn0pO1xucnNEcm9wZG93blxuICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MucnVsZXNldENvbXBlbmRpdW0pXG4gIC5vbkNoYW5nZShhc3luYyAodmFsKSA9PiB7XG4gICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MucnVsZXNldENvbXBlbmRpdW0gPSB2YWw7XG4gICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG5cbiAgICAvLyBMaXZlXHUyMDEwdXBkYXRlIHlvdXIgc3VtbWFyeSBiYXI6XG4gICAgY29uc3QgY2hvc2VuID0gQVZBSUxBQkxFX0VESVRJT05TLmZpbmQoZSA9PiBlLmlkID09PSB2YWwpO1xuICAgIHJ1bGVzZXRTcGFuLnRleHRDb250ZW50ID0gY2hvc2VuID8gY2hvc2VuLmxhYmVsIDogJyc7XG5cbiAgICAvLyBDbGVhciBhbnkgZXhpc3RpbmcgcmVmZXJlbmNlIGNoaXBzOlxuICAgIGNoaXBzV3JhcHBlci5lbXB0eSgpO1xuXG4gICAgdXBkYXRlSW5zdGFsbEJ1dHRvbnMoKTtcbiAgfSk7XG5cbiAgY29uc3Qgc2VhcmNoV3JhcHBlckVsID0gcmVmQ2VsbC5jcmVhdGVEaXYoeyBhdHRyOiB7IHN0eWxlOiAndGV4dC1hbGlnbjpjZW50ZXI7JyB9IH0pO1xuICBjb25zdCBzZWFyY2hDb21wID0gbmV3IFNlYXJjaENvbXBvbmVudChzZWFyY2hXcmFwcGVyRWwpO1xuICBzZWFyY2hDb21wLnNldFBsYWNlaG9sZGVyKCdBZGQgcmVmZXJlbmNlIHJ1bGVzXHUyMDI2Jyk7XG4gIGNvbnN0IHN1Z2dlc3Rpb25JbnB1dEVsID0gc2VhcmNoQ29tcC5pbnB1dEVsO1xuICBcbiAgbmV3IGNsYXNzIGV4dGVuZHMgQWJzdHJhY3RJbnB1dFN1Z2dlc3Q8c3RyaW5nPiB7XG5cdGNvbnN0cnVjdG9yKGFwcDogQXBwLCBpbnB1dEVsOiBIVE1MSW5wdXRFbGVtZW50KSB7XG5cdCAgc3VwZXIoYXBwLCBpbnB1dEVsKTtcblx0fVxuICBcblx0Ly8gMSkgUHJvcG9zZSBlZGl0aW9uIElEcyAobWludXMgdGhlIG9uZSB0aGV5IHBpY2tlZCBhcyB0aGUgbWFpbiBydWxlc2V0KVxuXHRnZXRTdWdnZXN0aW9ucyhpbnB1dDogc3RyaW5nKTogc3RyaW5nW10ge1xuXHQgIHJldHVybiBBVkFJTEFCTEVfRURJVElPTlNcblx0XHQuZmlsdGVyKGVkID0+IGVkLmlkICE9PSBwbHVnaW4uc2V0dGluZ3MucnVsZXNldENvbXBlbmRpdW0pICAgICAgICAgICAgLy8gZmlsdGVyIG91dCB0aGUgY2hvc2VuIHJ1bGVzZXRcblx0XHQuZmlsdGVyKGVkID0+IGVkLmxhYmVsLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoaW5wdXQudG9Mb3dlckNhc2UoKSkpICAgICAvLyBtYXRjaCBvbiBsYWJlbCB0ZXh0XG5cdFx0Lm1hcChlZCA9PiBlZC5pZCk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gcmV0dXJuIHRoZSBJRCBmb3IgZWFjaFxuXHR9XG4gIFxuXHQvLyAyKSBSZW5kZXIgdGhlIGh1bWFuLXJlYWRhYmxlIGxhYmVsXG5cdHJlbmRlclN1Z2dlc3Rpb24oaXRlbTogc3RyaW5nLCBlbDogSFRNTEVsZW1lbnQpOiB2b2lkIHtcblx0ICBjb25zdCBlZCA9IEFWQUlMQUJMRV9FRElUSU9OUy5maW5kKGUgPT4gZS5pZCA9PT0gaXRlbSkhO1xuXHQgIGVsLmNyZWF0ZURpdih7IHRleHQ6IGVkLmxhYmVsIH0pO1xuXHR9XG4gIFxuXHQvLyAzKSBXaGVuIHRoZXkgcGljayBvbmUsIHN0b3JlIGl0cyBJRCBhbmQgYWRkIGEgY2hpcFxuXHRzZWxlY3RTdWdnZXN0aW9uKGl0ZW06IHN0cmluZyk6IHZvaWQge1xuXHQgIGlmICghcGx1Z2luLnNldHRpbmdzLnJ1bGVzZXRSZWZlcmVuY2UuaW5jbHVkZXMoaXRlbSkpIHtcblx0XHRwbHVnaW4uc2V0dGluZ3MucnVsZXNldFJlZmVyZW5jZS5wdXNoKGl0ZW0pO1xuXHRcdHBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcblx0XHRhZGRDaGlwKGl0ZW0pO1xuXHQgIH1cblx0ICB0aGlzLmNsb3NlKCk7XG5cdCAgc3VnZ2VzdGlvbklucHV0RWwudmFsdWUgPSAnJztcblx0ICB1cGRhdGVJbnN0YWxsQnV0dG9ucygpO1xuXHR9XG4gIH0odGhpcy5hcHAsIHN1Z2dlc3Rpb25JbnB1dEVsKTtcbiAgXG5cblxuXG5cblx0XHRcdC8vIFx1MjUwMFx1MjUwMFx1MjUwMCBCdXR0b24gcm93IFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFxuXHRcdFx0Y29uc3QgYnRuUm93MSA9IGNhcmQuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAndnYtYnV0dG9uLXJvdycgfSk7XG5cdFx0XHRPYmplY3QuYXNzaWduKGJ0blJvdzEuc3R5bGUsIHtcblx0XHRcdGRpc3BsYXk6ICdmbGV4Jyxcblx0XHRcdGdhcDogJzAuNzVlbScsXG5cdFx0XHRqdXN0aWZ5Q29udGVudDogJ2NlbnRlcicsXG5cdFx0XHRtYXJnaW5Cb3R0b206ICcxLjVlbScsXG5cdFx0XHR9KTtcblxuXHRcdFx0Y29uc3QgaW5zdGFsbEJ0bjEgPSBidG5Sb3cxLmNyZWF0ZUVsKCdidXR0b24nLCB7XG5cdFx0XHR0ZXh0OiAnSW5zdGFsbCBUb29sa2l0Jyxcblx0XHRcdGNsczogJ21vZC1jdGEnLFxuXHRcdFx0fSk7XG5cdFx0XHRpbnN0YWxsQnRuMS5vbkNsaWNrRXZlbnQoKCkgPT5cblx0XHRcdG5ldyBDb25maXJtRnJlc2hJbnN0YWxsTW9kYWwodGhpcy5hcHAsIHRoaXMucGx1Z2luKS5vcGVuKClcblx0XHRcdCk7XG5cblx0XHRcdGNvbnN0IGN1c3RvbUJ0bjEgPSBidG5Sb3cxLmNyZWF0ZUVsKCdidXR0b24nLCB7XG5cdFx0XHR0ZXh0OiAnQ3VzdG9tIEluc3RhbGwnLFxuXHRcdFx0Y2xzOiAnbW9kLWN0YScsXG5cdFx0XHR9KTtcblx0XHRcdE9iamVjdC5hc3NpZ24oY3VzdG9tQnRuMS5zdHlsZSwge1xuXHRcdFx0YmFja2dyb3VuZDogJ25vbmUnLFxuXHRcdFx0Ym9yZGVyOiAnMXB4IHNvbGlkIHZhcigtLWludGVyYWN0aXZlLWFjY2VudCknLFxuXHRcdFx0Y29sb3I6ICd2YXIoLS10ZXh0LW5vcm1hbCknLFxuXHRcdFx0fSk7XG5cdFx0XHRjdXN0b21CdG4xLm9uQ2xpY2tFdmVudCgoKSA9PiBzaG93Q3VzdG9tSW5zdGFsbE1vZGFsKHRoaXMuYXBwLCB0aGlzLnBsdWdpbikpO1xuXG5cdFx0XHQvLyBcdTI1MDBcdTI1MDBcdTI1MDAgSGVscGVyIHRvIGVuYWJsZS9kaXNhYmxlIHRoZSBidXR0b25zIFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFxuXHRcdFx0Y29uc3QgdXBkYXRlSW5zdGFsbEJ1dHRvbnMgPSAoKSA9PiB7XG5cdFx0XHRjb25zdCBoYXNSdWxlc2V0ID0gQm9vbGVhbih0aGlzLnBsdWdpbi5zZXR0aW5ncy5ydWxlc2V0Q29tcGVuZGl1bSk7XG5cdFx0XHRpbnN0YWxsQnRuMS50b2dnbGVBdHRyaWJ1dGUoJ2Rpc2FibGVkJywgIWhhc1J1bGVzZXQpO1xuXHRcdFx0Y3VzdG9tQnRuMS50b2dnbGVBdHRyaWJ1dGUoJ2Rpc2FibGVkJywgIWhhc1J1bGVzZXQpO1xuXHRcdFx0fTtcblxuXHRcdFx0Ly8gNykgSW5pdGlhbCBjYWxsLCBpbiBjYXNlIHdlXHUyMDE5cmUgcmUtcmVuZGVyaW5nXG5cdFx0XHR1cGRhdGVJbnN0YWxsQnV0dG9ucygpO1xuXG5cdFx0XG5cdFx0XHQvLyA1KSBcdTIwMUNTa2lwXHUyMDFEIGxpbmtcblx0XHRcdGNvbnN0IHNraXBQYXJhID0gY2FyZC5jcmVhdGVFbCgncCcsIHsgY2xzOiAndnYtc2tpcC1saW5rJyB9KTtcblx0XHRcdC8vIENlbnRlciBpdCBhbmQgZ2l2ZSBpdCBhIHRpbnkgdG9wIG1hcmdpblxuXHRcdFx0T2JqZWN0LmFzc2lnbihza2lwUGFyYS5zdHlsZSwge1xuXHRcdFx0dGV4dEFsaWduOiAnY2VudGVyJyxcblx0XHRcdG1hcmdpblRvcDogJzAuMjVlbScsXG5cdFx0XHR9KTtcblx0XHRcdHNraXBQYXJhXG5cdFx0XHQuY3JlYXRlRWwoJ2EnLCB7XG5cdFx0XHR0ZXh0OiAnQWxyZWFkeSBoYXZlIHRoZSBUb29sa2l0PyBTaG93IG1lIHRoZSBzZXR0aW5ncyBcdTIxOTInLFxuXHRcdFx0fSlcblx0XHRcdC5vbkNsaWNrRXZlbnQoYXN5bmMgKCkgPT4ge1xuXHRcdFx0Ly8gMSkgQ3JlYXRlIHRoZSBoaWRkZW4gbWFya2VyIGZpbGUgc28gXCJmaXJzdFx1MjAxMHJ1blwiIG5ldmVyIHNob3dzIGFnYWluOlxuXHRcdFx0Y29uc3QgbWFya2VyUGF0aCA9ICcudnZ1bmRlcmxvcmVfaW5zdGFsbGVkJztcblx0XHRcdHRyeSB7XG5cdFx0XHRcdC8vIE9ubHkgd3JpdGUgaXQgaWYgaXQgZG9lcyBub3QgZXhpc3QgeWV0XG5cdFx0XHRcdGlmICghKGF3YWl0IHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXIuZXhpc3RzKG1hcmtlclBhdGgpKSkge1xuXHRcdFx0XHRhd2FpdCB0aGlzLmFwcC52YXVsdC5jcmVhdGUobWFya2VyUGF0aCwgJycpO1xuXHRcdFx0XHR9XG5cdFx0XHR9IGNhdGNoIChlKSB7XG5cdFx0XHRcdGNvbnNvbGUuZXJyb3IoJ1x1Mjc0QyBGYWlsZWQgdG8gY3JlYXRlIG1hcmtlciBmaWxlOicsIGUpO1xuXHRcdFx0fVxuXG5cdFx0XG5cdFx0XHQvLyAzKSBSZVx1MjAxMHJlbmRlciB0aGUgbm9ybWFsIHNldHRpbmdzIFVJXG5cdFx0XHR0aGlzLmRpc3BsYXkoKTtcblx0XHRcdH0pO1xuXHRcdH1cblx0ICBcblx0ICBcblx0cHJpdmF0ZSB2ZXJzaW9uVmFsdWVFbDogSFRNTEVsZW1lbnQgfCBudWxsID0gbnVsbDtcblx0cHJpdmF0ZSBmb3JjZVdhcm5pbmdFbDogSFRNTEVsZW1lbnQgfCBudWxsID0gbnVsbDtcblxuXHRhc3luYyBkaXNwbGF5KCk6IFByb21pc2U8dm9pZD4ge1xuXHRcdGNvbnN0IHsgY29udGFpbmVyRWwgfSA9IHRoaXM7XG5cdFx0Y29uc3Qgc2F2ZWRTY3JvbGxUb3AgPSBjb250YWluZXJFbC5zY3JvbGxUb3A7XG5cdFx0Y29udGFpbmVyRWwuZW1wdHkoKTtcblxuXHRcdGNvbnN0IG1hcmtlclBhdGggPSAnLnZ2dW5kZXJsb3JlX2luc3RhbGxlZCc7XG5cdFx0Y29uc3QgaXNJbnN0YWxsZWQgPSBhd2FpdCB0aGlzLmFwcC52YXVsdC5hZGFwdGVyLmV4aXN0cyhtYXJrZXJQYXRoKTtcblx0XHRpZiAoIWlzSW5zdGFsbGVkKSB7XG5cdFx0XHR0aGlzLnJlbmRlckZpcnN0UnVuQ2FyZChjb250YWluZXJFbCk7XG5cdFx0XHRcdGNvbnRhaW5lckVsLnNjcm9sbFRvcCA9IHNhdmVkU2Nyb2xsVG9wO1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdHRoaXMucmVuZGVySGVhZGVyKGNvbnRhaW5lckVsKTsgLy8gXHVEODNEXHVEQzQ4XHUwMEEwQWx3YXlzIHJlbmRlciBoZWFkZXIgZmlyc3RcblxuXHQ7KGFzeW5jICgpID0+IHtcdFxuXHRcdFxuXHRcdC8qKiBcdTI1MDBcdTI1MDBcdTI1MDAgVkVSU0lPTiBTRUNUSU9OIFx1MjUwMFx1MjUwMFx1MjUwMCAqL1xuXHRcdGNvbnN0IHZlcnNpb25Sb3cgPSBjb250YWluZXJFbC5jcmVhdGVEaXYoKTtcblx0XHR2ZXJzaW9uUm93LmFkZENsYXNzKFwic2V0dGluZ3MtdmVyc2lvbnJvd1wiKTtcblxuXHRcdGNvbnN0IHZlcnNpb25JbmZvID0gdmVyc2lvblJvdy5jcmVhdGVEaXYoKTtcblx0XHR2ZXJzaW9uSW5mby5hZGRDbGFzcyhcInNldHRpbmdzLXZlcnNpb25pbmZvXCIpO1xuXG5cdFx0bGV0IGluc3RhbGxlZCA9ICdOb3QgaW5zdGFsbGVkJztcblx0XHR0cnkge1xuXHRcdFx0Y29uc3QgdmVyQ29udGVudCA9IGF3YWl0IHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXIucmVhZCgnLnZlcnNpb24uanNvbicpO1xuXHRcdFx0Y29uc3QganNvbiA9IEpTT04ucGFyc2UodmVyQ29udGVudCk7XG5cdFx0XHRpbnN0YWxsZWQgPSBqc29uLnZlcnNpb24gPz8gJ05vdCBpbnN0YWxsZWQnO1xuXHRcdH0gY2F0Y2ggKGVycikge1xuXHRcdFx0Y29uc29sZS53YXJuKCdDb3VsZCBub3QgcmVhZCAudmVyc2lvbi5qc29uIGZyb20gdmF1bHQ6JywgZXJyKTtcblx0XHR9XG5cdFx0Y29uc3QgbGF0ZXN0ID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MubGF0ZXN0VG9vbGtpdFZlcnNpb24gPz8gJ0NvdWxkIG5vdCBmZXRjaCc7XG5cdFx0Y29uc3QgaXNNYXRjaCA9IGluc3RhbGxlZCA9PT0gbGF0ZXN0O1xuXG5cdFx0Y29uc3QgdmF1bHRSb3cgPSB2ZXJzaW9uSW5mby5jcmVhdGVEaXYoKTtcblx0XHR2YXVsdFJvdy5hcHBlbmRUZXh0KCdWYXVsdCBUb29sa2l0IFZlcnNpb246ICcpO1xuXHRcdFxuXHRcdHRoaXMudmVyc2lvblZhbHVlRWwgPSB2YXVsdFJvdy5jcmVhdGVTcGFuKCk7ICAvLyBcdUQ4M0RcdUREMjUgc2F2ZSByZWZcblx0XHR0aGlzLnZlcnNpb25WYWx1ZUVsLnRleHRDb250ZW50ID0gaW5zdGFsbGVkO1xuXHRcdHRoaXMudmVyc2lvblZhbHVlRWwuYWRkQ2xhc3MoXCJ2di1ib2xkXCIsIGlzTWF0Y2ggPyBcInZ2LXN1Y2Nlc3NcIiA6IFwidnYtZXJyb3JcIik7XG5cdFx0XG5cdFx0Y29uc3QgbGF0ZXN0Um93ID0gdmVyc2lvbkluZm8uY3JlYXRlRWwoJ2RpdicsIHsgdGV4dDogJ0xhdGVzdCBPZmZpY2lhbCBWZXJzaW9uOiAnIH0pO1xuXHRcdGxhdGVzdFJvdy5jcmVhdGVTcGFuKHtcblx0XHRcdHRleHQ6IGxhdGVzdCxcblx0XHRcdGF0dHI6IHsgc3R5bGU6ICdmb250LXdlaWdodDogYm9sZDsgY29sb3I6IHZhcigtLXRleHQtc3VjY2Vzcyk7JyB9XG5cdFx0fSk7XG5cblx0XHRjb25zdCB2ZXJzaW9uQ29udHJvbHMgPSB2ZXJzaW9uUm93LmNyZWF0ZURpdigpO1xuXHRcdHZlcnNpb25Db250cm9scy5hZGRDbGFzcyhcInNldHRpbmdzLXZlcnNpb25jb250cm9sc1wiKTtcblxuXHRcdGNvbnN0IGJ1dHRvblJvdyA9IHZlcnNpb25Db250cm9scy5jcmVhdGVEaXYoKTtcblx0XHRidXR0b25Sb3cuYWRkQ2xhc3MoXCJzZXR0aW5ncy1idXR0b25yb3dcIik7XG5cblx0XHRjb25zdCBjaGVja0J0biA9IGJ1dHRvblJvdy5jcmVhdGVFbCgnYnV0dG9uJywge1xuXHRcdFx0dGV4dDogaW5zdGFsbGVkICE9PSBsYXRlc3QgPyAnUHJldmlldyBVcGRhdGUnIDogJ0NoZWNrIGZvciBVcGRhdGVzJyxcblx0XHRcdGNsczogJ21vZC1jdGEnXG5cdFx0fSk7XG5cdFx0Y2hlY2tCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBhc3luYyAoKSA9PiB7XG5cdFx0XHRpZiAoaW5zdGFsbGVkICE9PSBsYXRlc3QpIHtcblx0XHRcdFx0dGhpcy5wbHVnaW4ucHJldmlld1VwZGF0ZXNNb2RhbCgpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uY2hlY2tGb3JVcGRhdGVzKCk7XG5cdFx0XHR9XG5cdFx0fSk7XG5cdFx0Y29uc3QgY2hhbmdlbG9nQnRuID0gYnV0dG9uUm93LmNyZWF0ZUVsKCdidXR0b24nLCB7IHRleHQ6ICdcdUQ4M0RcdURDRDYgVmlldyBDaGFuZ2Vsb2cnIH0pO1xuXHRcdGNoYW5nZWxvZ0J0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcblx0XHRcdG5ldyBNYXJrZG93blByZXZpZXdNb2RhbCh0aGlzLmFwcCwgdGhpcy5wbHVnaW4uY2hhbmdlbG9nKS5vcGVuKCk7XG5cdFx0fSk7XG5cdFx0aWYgKHRoaXMucGx1Z2luLnNldHRpbmdzLmxhc3RDaGVja2VkKSB7XG5cdFx0XHRjb25zdCBsYXN0Q2hlY2tlZCA9IHZlcnNpb25Db250cm9scy5jcmVhdGVEaXYoKTtcblx0XHRcdGxhc3RDaGVja2VkLmFkZENsYXNzKFwic2V0dGluZ3MtbGFzdGNoZWNrZWRcIik7XG5cdFx0XHRsYXN0Q2hlY2tlZC50ZXh0Q29udGVudCA9IGBMYXN0IGNoZWNrZWQ6ICR7bmV3IERhdGUodGhpcy5wbHVnaW4uc2V0dGluZ3MubGFzdENoZWNrZWQpLnRvTG9jYWxlU3RyaW5nKCl9YDtcblx0XHR9XG5cblx0XHRcblxuXHRcdC8qKiBcdTI1MDBcdTI1MDBcdTI1MDAgRklYIFlPVVIgVkFVTFQgU0VDVElPTiAoY29sbGFwc2libGUsIGZpeGVkXHUyMDEwaWNvbikgXHUyNTAwXHUyNTAwXHUyNTAwICovXG5cdFx0Y29uc3QgZml4RGV0YWlscyA9IGNvbnRhaW5lckVsLmNyZWF0ZUVsKCdkZXRhaWxzJywgeyBjbHM6ICd2ay1zZWN0aW9uJyB9KTtcblxuXHRcdC8vIFx1MjUwMFx1MjUwMFx1MjUwMCBSZXBsYWNlIHlvdXIgb2xkIGZpeEhlYWRlciB3aXRoIHRoaXMgPHN1bW1hcnk+IFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFxuXHRcdGNvbnN0IGZpeEhlYWRlciA9IGZpeERldGFpbHMuY3JlYXRlRWwoJ3N1bW1hcnknLCB7IGNsczogJ3ZrLXNlY3Rpb24taGVhZGVyJyB9KTtcblx0XHRPYmplY3QuYXNzaWduKGZpeEhlYWRlci5zdHlsZSwge1xuXHRcdGRpc3BsYXk6ICdmbGV4Jyxcblx0XHRmbGV4RGlyZWN0aW9uOiAnY29sdW1uJyxcblx0XHRhbGlnbkl0ZW1zOiAnc3RyZXRjaCcsXG5cdFx0cGFkZGluZzogJzAuNWVtIDAnLFxuXHRcdGJvcmRlckJvdHRvbTogJzFweCBzb2xpZCB2YXIoLS1kaXZpZGVyLWNvbG9yKScsXG5cdFx0Y3Vyc29yOiAncG9pbnRlcicsXG5cdFx0fSk7XG5cblx0XHQvLyBcdTI1MDBcdTI1MDAgQ3JlYXRlIGEgc2luZ2xlIGZsZXhcdTIwMTByb3cgaW5zaWRlIHRoZSBzdW1tYXJ5IGZvciB0aXRsZStpY29uIFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFxuXHRcdGNvbnN0IGZpeEhlYWRlclJvdyA9IGZpeEhlYWRlci5jcmVhdGVEaXYoe1xuXHRcdGF0dHI6IHtcblx0XHRcdHN0eWxlOiBgXG5cdFx0XHRkaXNwbGF5OiBmbGV4O1xuXHRcdFx0anVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuO1xuXHRcdFx0YWxpZ24taXRlbXM6IGZsZXgtZW5kO1xuXHRcdFx0YCxcblx0XHR9LFxuXHRcdH0pO1xuXG5cdFx0Ly8gXHUyNTAwXHUyNTAwIExlZnQgc2lkZTogdGl0bGUgKyBkZXNjcmlwdGlvbiBibG9jayBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcblx0XHRjb25zdCBmaXhUaXRsZUJsb2NrID0gZml4SGVhZGVyUm93LmNyZWF0ZURpdih7XG5cdFx0YXR0cjogeyBzdHlsZTogJ2Rpc3BsYXk6IGZsZXg7IGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47JyB9XG5cdFx0fSk7XG5cdFx0Zml4VGl0bGVCbG9jay5jcmVhdGVFbCgnaDUnLCB7IHRleHQ6ICdGaXggWW91ciBWYXVsdCcgfSk7XG5cdFx0Zml4VGl0bGVCbG9jay5jcmVhdGVFbCgnZGl2Jywge1xuXHRcdHRleHQ6ICdGaXggYW5kIGJyb2tlbiwgZGVsZXRlZCwgb3IgbWlzcGxhY2VkIGZpbGVzIGluIHlvdXIgdG9vbGtpdC4nLFxuXHRcdGNsczogJ3NldHRpbmctaXRlbS1kZXNjcmlwdGlvbicsXG5cdFx0YXR0cjogeyBzdHlsZTogJ21hcmdpbi10b3A6IDAuMjVlbTsnIH0sXG5cdFx0fSk7XG5cblx0XHQvLyBcdTI1MDBcdTI1MDAgUmlnaHQgc2lkZTogc3RhdGljIHRvZ2dsZSBpY29uIChyb3RhdGVzIGluIHBsYWNlIG9ubHkpIFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFxuXHRcdGNvbnN0IGZpeFRvZ2dsZUljb24gPSBmaXhIZWFkZXJSb3cuY3JlYXRlRWwoJ3NwYW4nLCB7IHRleHQ6ICdWVicsIGNsczogJ3ZrLXRvZ2dsZS1pY29uJyB9KTtcblx0XHRPYmplY3QuYXNzaWduKGZpeFRvZ2dsZUljb24uc3R5bGUsIHtcblx0XHRmb250V2VpZ2h0OiAnYm9sZCcsXG5cdFx0ZGlzcGxheTogJ2lubGluZS1ibG9jaycsXG5cdFx0dHJhbnNpdGlvbjogJ3RyYW5zZm9ybSAwLjJzIGVhc2UnLFxuXHRcdHRyYW5zZm9ybU9yaWdpbjogJzUwJSA1MCUnLCAvLyBSb3RhdGUgYXJvdW5kIGl0cyBvd24gY2VudGVyXG5cdFx0dXNlclNlbGVjdDogJ25vbmUnLFxuXHRcdHRyYW5zZm9ybTogZml4RGV0YWlscy5vcGVuID8gJ3JvdGF0ZSgwZGVnKScgOiAncm90YXRlKDE4MGRlZyknLFxuXHRcdH0pO1xuXHRcdGZpeERldGFpbHMub250b2dnbGUgPSAoKSA9PiB7XG5cdFx0Zml4VG9nZ2xlSWNvbi5hZGRDbGFzcyhcInZ2LXJvdGF0ZWRcIik7XG5cdFx0fTtcblxuXHRcdC8vIFx1MjUwMFx1MjUwMFx1MjUwMCBCb2R5IChzYW1lIGFzIGJlZm9yZSwganVzdCBpbmRlbnRlZCB1bmRlciA8ZGV0YWlscz4pIFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFxuXHRcdGNvbnN0IGZpeEJvZHkgPSBmaXhEZXRhaWxzLmNyZWF0ZURpdih7IGNsczogJ3ZrLXNlY3Rpb24tYm9keScgfSk7XG5cdFx0Zml4Qm9keS5hZGRDbGFzcyhcInZ2LXBsLW1kXCIpO1xuXG5cdFx0Ly8gXHUyNTAwXHUyNTAwIEJ1dHRvbiArIHdhcm5pbmcgcm93IFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFxuXHRcdGNvbnN0IGZpeEJ1dHRvblJvdyA9IGZpeEJvZHkuY3JlYXRlRGl2KCk7XG5cdFx0Zml4QnV0dG9uUm93LmFkZENsYXNzKFwidnYtY2hlY2tib3gtcm93XCIsIFwidnYtanVzdGlmeS1iZXR3ZWVuXCIpO1xuXG5cdFx0Y29uc3Qgd2FybmluZ0NvbnRhaW5lciA9IGZpeEJ1dHRvblJvdy5jcmVhdGVEaXYoKTtcblx0XHR0aGlzLmZvcmNlV2FybmluZ0VsID0gd2FybmluZ0NvbnRhaW5lcjtcblxuXHRcdGxldCBpbnN0YWxsZWRWZXJzaW9uU3RyID0gJyc7XG5cdFx0dHJ5IHtcblx0XHRjb25zdCB2ZXJzaW9uRmlsZSA9IGF3YWl0IHRoaXMucGx1Z2luLmFwcC52YXVsdC5hZGFwdGVyLnJlYWQoJy52ZXJzaW9uLmpzb24nKTtcblx0XHRjb25zdCBwYXJzZWQgPSBKU09OLnBhcnNlKHZlcnNpb25GaWxlKTtcblx0XHRpbnN0YWxsZWRWZXJzaW9uU3RyID0gKHBhcnNlZC52ZXJzaW9uID8/ICcnKS50cmltKCk7XG5cdFx0fSBjYXRjaCB7XG5cdFx0aW5zdGFsbGVkVmVyc2lvblN0ciA9ICcnO1xuXHRcdH1cblxuXHRcdGNvbnN0IGxhdGVzdFZlcnNpb25TdHIgPSAodGhpcy5wbHVnaW4uc2V0dGluZ3MubGF0ZXN0VG9vbGtpdFZlcnNpb24gPz8gJycpLnRyaW0oKTtcblxuXHRcdGlmIChpbnN0YWxsZWRWZXJzaW9uU3RyICYmIGxhdGVzdFZlcnNpb25TdHIgJiYgaW5zdGFsbGVkVmVyc2lvblN0ciAhPT0gbGF0ZXN0VmVyc2lvblN0cikge1xuXHRcdGNvbnN0IHdhcm4gPSB3YXJuaW5nQ29udGFpbmVyLmNyZWF0ZUVsKCdkaXYnLCB7XG5cdFx0XHR0ZXh0OiBgXHUyNkEwXHVGRTBGIE5ldyB2ZXJzaW9uIGF2YWlsYWJsZSAoJHtpbnN0YWxsZWRWZXJzaW9uU3RyfSBcdTIxOTIgJHtsYXRlc3RWZXJzaW9uU3RyfSkgXHUyMDE0IHVzZSByZWd1bGFyIHVwZGF0ZSBpbnN0ZWFkYCxcblx0XHR9KTtcblx0XHR3YXJuLmFkZENsYXNzKFwidnYtc21hbGxcIiwgXCJ2di1tdXRlZFwiLCBcInZ2LWl0YWxpY1wiKTtcblx0XHR3YXJuLnNldEF0dHIoXG5cdFx0XHQndGl0bGUnLFxuXHRcdFx0J0ZvcmNlIHVwZGF0aW5nIHdoaWxlIGEgbmV3IHZlcnNpb24gaXMgYXZhaWxhYmxlIG1heSBza2lwIGltcG9ydGFudCBjaGFuZ2VzLidcblx0XHQpO1xuXHRcdH1cblxuXHRcdC8vIFx1MjdBMVx1RkUwRiBSaWdodCBzaWRlOiBhY3Rpb24gYnV0dG9uc1xuXHRcdGNvbnN0IGJ1dHRvbkdyb3VwID0gZml4QnV0dG9uUm93LmNyZWF0ZURpdigpO1xuXHRcdGJ1dHRvbkdyb3VwLmFkZENsYXNzKFwic2V0dGluZ3MtYnV0dG9ucm93XCIpO1xuXG5cdFx0YnV0dG9uR3JvdXBcblx0XHQuY3JlYXRlRWwoXCJidXR0b25cIiwgeyB0ZXh0OiBcIkZvcmNlIFVwZGF0ZSBWYXVsdFwiLCBjbHM6IFwibW9kLWN0YVwiIH0pXG5cdFx0Lm9uY2xpY2sgPSBhc3luYyAoKSA9PiB7XG5cdFx0XHQvLyBmaXJzdCBkbyB5b3VyIG5vcm1hbCBcdTIwMUNmb3JjZSB1cGRhdGVcdTIwMUQgZmxvdzpcblx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLmZvcmNlVXBkYXRlUHJldmlld0FuZENvbmZpcm0oKTtcblx0XHRcdC8vIHRoZW4sIGlmIHRoZSB1c2VyIGFza2VkIGZvciBhIHJlLXBhcnNlLCBkbyB0aGF0OlxuXHRcdFx0aWYgKHRoaXMucGx1Z2luLnNldHRpbmdzLnJlcGFyc2VHYW1lc2V0cykge1xuXHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4ucmVmcmVzaEdhbWVTZXREYXRhKCk7XG5cdFx0XHR9XG5cdFx0fTtcblxuXG5cdFx0YnV0dG9uR3JvdXAuY3JlYXRlRWwoJ2J1dHRvbicsIHtcblx0XHR0ZXh0OiAnVW5kbyBVcGRhdGUnXG5cdFx0fSkub25jbGljayA9IGFzeW5jICgpID0+IHtcblx0XHRhd2FpdCB0aGlzLnBsdWdpbi51bmRvRm9yY2VVcGRhdGUoKTtcblx0XHR9O1xuXG5cblx0XHQvLyBcdTI1MDBcdTI1MDAgVGltZXN0YW1wIHJvdyBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcblx0XHRjb25zdCBmaXhUaW1lc3RhbXBSb3cgPSBmaXhCb2R5LmNyZWF0ZURpdigpO1xuXHRcdE9iamVjdC5hc3NpZ24oZml4VGltZXN0YW1wUm93LnN0eWxlLCB7XG5cdFx0dGV4dEFsaWduOiAncmlnaHQnLFxuXHRcdGZvbnRTaXplOiAnMTFweCcsXG5cdFx0Y29sb3I6ICd2YXIoLS10ZXh0LW11dGVkKScsXG5cdFx0bWFyZ2luVG9wOiAnMC4yNWVtJ1xuXHRcdH0pO1xuXHRcdGZpeFRpbWVzdGFtcFJvdy50ZXh0Q29udGVudCA9IGBMYXN0IGZvcmNlZDogJHtcblx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5sYXN0Rm9yY2VVcGRhdGVcblx0XHRcdD8gbmV3IERhdGUodGhpcy5wbHVnaW4uc2V0dGluZ3MubGFzdEZvcmNlVXBkYXRlKS50b0xvY2FsZVN0cmluZygpXG5cdFx0XHQ6ICdOb3QgZm9yY2VkIHlldCdcblx0XHR9YDtcblxuXHRcdC8vIFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMCBkaXZpZGVyIFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFxuZml4Qm9keS5jcmVhdGVFbCgnZGl2Jywge1xuICBhdHRyOiB7XG4gICAgc3R5bGU6ICdib3JkZXItdG9wOiAxcHggc29saWQgdmFyKC0tZGl2aWRlci1jb2xvcik7IG1hcmdpbjogMC43NWVtIDA7J1xuICB9XG59KTtcblxuXHRcdC8vIFx1MjUwMFx1MjUwMFx1MjUwMCBOZXcgXHUyMDFDcmUtcGFyc2UgZ2FtZXNldHNcdTIwMUQgdG9nZ2xlIFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFxuXHRcdGNvbnN0IHJlcGFyc2VSb3cgPSBmaXhCb2R5LmNyZWF0ZURpdigpO1xuXHRcdHJlcGFyc2VSb3cuYWRkQ2xhc3MoXCJ2di1tdC1zbVwiKTtcblx0XHRuZXcgU2V0dGluZyhyZXBhcnNlUm93KVxuXHRcdC5zZXROYW1lKFwiUmUtcGFyc2UgR2FtZSBTZXRzIE9uIEZvcmNlIFVwZGF0ZVwiKVxuXHRcdC5zZXREZXNjKFxuXHRcdFx0XCJBbHNvIHJlLXBhcnNlIHlvdXIgcnVsZXNldCBjb21wZW5kaXVtIGFuZCByZWZlcmVuY2Ugc2V0cy4gVGhpcyB3b24ndCBkZWxldGUgYW55IGZpbGVzIGluIHRoZSBDb21wZW5kaXVtIG9yIFJlZmVyZW5jZSBmb2xkZXJzLlwiXG5cdFx0KVxuXG5cdFx0XHRcdC5hZGRUb2dnbGUoKHRvZykgPT5cblx0XHRcdHRvZ1xuXHRcdFx0LnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLnJlcGFyc2VHYW1lc2V0cylcblx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcblx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MucmVwYXJzZUdhbWVzZXRzID0gdmFsdWU7XG5cdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuXHRcdFx0fSlcblx0XHQpO1xuXG5cdFx0Ly8gXHUyNTAwXHUyNTAwXHUyNTAwIEJBQ0tVUCBTRUNUSU9OIFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFxuXHRcdGNvbnN0IGJhY2t1cERldGFpbHMgPSBjb250YWluZXJFbC5jcmVhdGVFbCgnZGV0YWlscycsIHsgY2xzOiAndmstc2VjdGlvbicgfSk7XG5cblx0XHQvLyBTdW1tYXJ5IGJsb2NrOiBzdGFja2VkIGNvbHVtbiBsYXlvdXRcblx0XHRjb25zdCBiYWNrdXBTdW1tYXJ5ID0gYmFja3VwRGV0YWlscy5jcmVhdGVFbCgnc3VtbWFyeScsIHsgY2xzOiAndmstc2VjdGlvbi1oZWFkZXInIH0pO1xuXG5cdFx0T2JqZWN0LmFzc2lnbihiYWNrdXBTdW1tYXJ5LnN0eWxlLCB7XG5cdFx0ZGlzcGxheTogJ2ZsZXgnLFxuXHRcdGZsZXhEaXJlY3Rpb246ICdjb2x1bW4nLFxuXHRcdGFsaWduSXRlbXM6ICdzdHJldGNoJyxcblx0XHRwYWRkaW5nOiAnMC41ZW0gMCcsXG5cdFx0Ym9yZGVyQm90dG9tOiAnMXB4IHNvbGlkIHZhcigtLWRpdmlkZXItY29sb3IpJyxcblx0XHRjdXJzb3I6ICdwb2ludGVyJyxcblx0XHR9KTtcblxuXHRcdC8vIENyZWF0ZSB0aXRsZSArIGljb24gcm93XG5cdFx0Y29uc3QgYmFja3VwVGl0bGVSb3cgPSBiYWNrdXBTdW1tYXJ5LmNyZWF0ZURpdih7XG5cdFx0YXR0cjoge1xuXHRcdFx0c3R5bGU6IGBcblx0XHRcdGRpc3BsYXk6IGZsZXg7XG5cdFx0XHRqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47XG5cdFx0XHRhbGlnbi1pdGVtczogZmxleC1lbmQ7XG5cdFx0XHRgLFxuXHRcdH0sXG5cdFx0fSk7XG5cblx0XHQvLyBMZWZ0OiBoZWFkZXIgYmxvY2sgKHRpdGxlICsgZGVzY3JpcHRpb24gdG9nZXRoZXIpIFxuXHRcdGNvbnN0IHRpdGxlQmxvY2sgPSBiYWNrdXBUaXRsZVJvdy5jcmVhdGVEaXYoe1xuXHRcdGF0dHI6IHsgc3R5bGU6ICdkaXNwbGF5OiBmbGV4OyBmbGV4LWRpcmVjdGlvbjogY29sdW1uOycgfVxuXHRcdH0pO1xuXG5cdFx0dGl0bGVCbG9jay5jcmVhdGVFbCgnaDUnLCB7IHRleHQ6ICdWYXVsdCBCYWNrdXBzJyB9KTtcblxuXHRcdHRpdGxlQmxvY2suY3JlYXRlRWwoJ2RpdicsIHtcblx0XHR0ZXh0OiAnVGhlIFRvb2xraXQgd2lsbCBiYWNrIHVwIHlvdXIgdmF1bHQgYXV0b21hdGljYWxseSBiZWZvcmUgdXBkYXRlcy4gWW91IGNhbiBhbHNvIGJhY2sgdXAgbWFudWFsbHkgYW55dGltZS4nLFxuXHRcdGNsczogJ3NldHRpbmctaXRlbS1kZXNjcmlwdGlvbicsXG5cdFx0YXR0cjogeyBzdHlsZTogJ21hcmdpbi10b3A6IDAuMjVlbTsnIH0sXG5cdFx0fSk7XG5cblx0XHQvLyBSaWdodDogY29sbGFwc2UgaWNvblxuXHRcdGNvbnN0IGJhY2t1cFZ2SWNvbiA9IGJhY2t1cFRpdGxlUm93LmNyZWF0ZUVsKCdzcGFuJywgeyB0ZXh0OiAnVlYnLCBjbHM6ICd2ay10b2dnbGUtaWNvbicgfSk7XG5cblx0XHRPYmplY3QuYXNzaWduKGJhY2t1cFZ2SWNvbi5zdHlsZSwge1xuXHRcdGZvbnRXZWlnaHQ6ICdib2xkJyxcblx0XHRkaXNwbGF5OiAnaW5saW5lLWJsb2NrJyxcblx0XHR0cmFuc2l0aW9uOiAndHJhbnNmb3JtIDAuMnMgZWFzZScsXG5cdFx0dHJhbnNmb3JtT3JpZ2luOiAnNTAlIDUwJScsXG5cdFx0dXNlclNlbGVjdDogJ25vbmUnLFxuXHRcdHRyYW5zZm9ybTogYmFja3VwRGV0YWlscy5vcGVuID8gJ3JvdGF0ZSgwZGVnKScgOiAncm90YXRlKDE4MGRlZyknLFxuXHRcdH0pO1xuXG5cdFx0Ly8gQ29sbGFwc2Ugcm90YXRpb24gYmVoYXZpb3Jcblx0XHRiYWNrdXBEZXRhaWxzLm9udG9nZ2xlID0gKCkgPT4ge1xuXHRcdGJhY2t1cFZ2SWNvbi5hZGRDbGFzcyhcInZ2LXJvdGF0ZWRcIik7XG5cdFx0fTtcblxuXHRcdC8vIDIpIEJvZHlcblx0XHRjb25zdCBiYWNrdXBCb2R5ID0gYmFja3VwRGV0YWlscy5jcmVhdGVEaXYoeyBjbHM6ICd2ay1zZWN0aW9uLWJvZHknIH0pO1xuXHRcdGJhY2t1cEJvZHkuYWRkQ2xhc3MoXCJ2di1wbC1tZFwiKTtcblxuXHRcdG5ldyBTZXR0aW5nKGJhY2t1cEJvZHkpXG5cdFx0LnNldE5hbWUoJ0F1dG8tQmFja3VwIEJlZm9yZSBVcGRhdGUnKVxuXHRcdC5zZXREZXNjKCdDcmVhdGUgYSBmdWxsIC56aXAgb2YgdGhlIHZhdWx0IGJlZm9yZSBhcHBseWluZyB2ZXJzaW9uIHVwZGF0ZXMuIEZvcmNlIHVwZGF0ZXMgd2lsbCBvbmx5IGJhY2sgdXAgdGhlIGZpbGVzIHRoYXQgd2lsbCBiZSBtb2RpZmllZCBvciByZW1vdmVkLicpXG5cdFx0LmFkZFRvZ2dsZSh0ID0+XG5cdFx0XHR0XG5cdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuYXV0b0JhY2t1cEJlZm9yZVVwZGF0ZSlcblx0XHRcdC5vbkNoYW5nZShhc3luYyB2ID0+IHtcblx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MuYXV0b0JhY2t1cEJlZm9yZVVwZGF0ZSA9IHY7XG5cdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuXHRcdFx0fSlcblx0XHQpO1xuXG5cdFx0bmV3IFNldHRpbmcoYmFja3VwQm9keSlcblx0XHQuc2V0TmFtZSgnTWFudWFsIEJhY2t1cCcpXG5cdFx0LnNldERlc2MoJ0ltbWVkaWF0ZWx5IGNyZWF0ZSBhIHppcCBiYWNrdXAgb2YgeW91ciB2YXVsdCcpXG5cdFx0LmFkZEJ1dHRvbihiID0+XG5cdFx0XHRiXG5cdFx0XHQuc2V0QnV0dG9uVGV4dCgnQmFja3VwIFZhdWx0IE5vdycpXG5cdFx0XHQuc2V0Q3RhKClcblx0XHRcdC5vbkNsaWNrKGFzeW5jICgpID0+IHtcblx0XHRcdFx0Y29uc3QgcGF0aCA9IGF3YWl0IHRoaXMucGx1Z2luLmJhY2t1cE1hbmFnZXIuYmFja3VwVmF1bHRUb1ppcCgnbWFudWFsJyk7XG5cdFx0XHRcdG5ldyBOb3RpY2UoYEJhY2t1cCBjcmVhdGVkOiAke3BhdGh9YCk7XG5cdFx0XHR9KVxuXHRcdCk7XG5cblx0XHRuZXcgU2V0dGluZyhiYWNrdXBCb2R5KVxuXHRcdC5zZXROYW1lKCdPcGVuIEJhY2t1cHMgRm9sZGVyJylcblx0XHQuc2V0RGVzYygnT3BlbiB0aGUgYmFja3VwcyBmb2xkZXIgb24gZGlzay4gTWFjT1M6IENhbnQgc2VlIGl0PyBIaXQgU2hpZnQrQ21kKyhwZXJpb2QpLicpXG5cdFx0LmFkZEJ1dHRvbihiID0+XG5cdFx0ICBiXG5cdFx0XHQuc2V0QnV0dG9uVGV4dCgnT3BlbiBGb2xkZXInKVxuXHRcdFx0Lm9uQ2xpY2soYXN5bmMgKCkgPT4ge1xuXHRcdFx0ICB0cnkge1xuXG5cdFx0XHRcdGNvbnN0IHZhdWx0QmFzZVBhdGg6IHN0cmluZyA9ICh0aGlzLnBsdWdpbi5hcHAudmF1bHQuYWRhcHRlciBhcyBhbnkpLmdldEJhc2VQYXRoKCk7XG5cblx0XHRcdFx0Y29uc3QgYmFja3VwRm9sZGVyUGF0aCA9IHBhdGguam9pbihcblx0XHRcdFx0ICB2YXVsdEJhc2VQYXRoLFxuXHRcdFx0XHQgICcudmF1bHQtYmFja3Vwcydcblx0XHRcdFx0KTtcblxuXHRcdFx0XHRjb25zdCB7IHNoZWxsIH0gPSAod2luZG93IGFzIGFueSkucmVxdWlyZSgnZWxlY3Ryb24nKTtcblx0XHRcdFx0Y29uc3QgcmVzdWx0ID0gYXdhaXQgc2hlbGwub3BlblBhdGgoYmFja3VwRm9sZGVyUGF0aCk7XG5cdFx0XHRcdGlmICh0eXBlb2YgcmVzdWx0ID09PSAnc3RyaW5nJyAmJiByZXN1bHQubGVuZ3RoID4gMCkge1xuXHRcdFx0XHQgIGNvbnNvbGUuZXJyb3IoJ1x1Mjc0QyBzaGVsbC5vcGVuUGF0aCBlcnJvcjonLCByZXN1bHQpO1xuXHRcdFx0XHQgIG5ldyBOb3RpY2UoJ0NvdWxkIG5vdCBvcGVuIGJhY2t1cHMgZm9sZGVyLiBTZWUgY29uc29sZS4nKTtcblx0XHRcdFx0fVxuXHRcdFx0ICB9IGNhdGNoIChlcnIpIHtcblx0XHRcdFx0Y29uc29sZS5lcnJvcignXHUyNzRDIENvdWxkIG5vdCBvcGVuIGJhY2t1cHMgZm9sZGVyOicsIGVycik7XG5cdFx0XHRcdG5ldyBOb3RpY2UoJ0NvdWxkIG5vdCBvcGVuIGJhY2t1cHMgZm9sZGVyLiBTZWUgY29uc29sZS4nKTtcblx0XHRcdCAgfVxuXHRcdFx0fSlcblx0XHQpO1xuXHRcdGJhY2t1cEJvZHkuY3JlYXRlRWwoJ2RpdicsIHtcblx0XHRcdGF0dHI6IHtcblx0XHRcdCAgc3R5bGU6ICdib3JkZXItdG9wOiAxcHggc29saWQgdmFyKC0tZGl2aWRlci1jb2xvcik7IG1hcmdpbi10b3A6IDEuNWVtOydcblx0XHRcdH1cblx0XHQgIH0pO1xuXG5cblx0XHQgIFxuXHRcdC8vIFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMCBDVVNUT00gVVBEQVRFUyBTRUNUSU9OIFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFxuXHRcdGNvbnN0IGN1c3RvbWl6YXRpb25EZXRhaWxzID0gY29udGFpbmVyRWwuY3JlYXRlRWwoJ2RldGFpbHMnLCB7IGNsczogJ3ZrLXNlY3Rpb24nIH0pO1xuXG5cdFx0Y29uc3QgY3VzdG9taXphdGlvblN1bW1hcnkgPSBjdXN0b21pemF0aW9uRGV0YWlscy5jcmVhdGVFbCgnc3VtbWFyeScsIHsgY2xzOiAndmstc2VjdGlvbi1oZWFkZXInIH0pO1xuXG5cdFx0T2JqZWN0LmFzc2lnbihjdXN0b21pemF0aW9uU3VtbWFyeS5zdHlsZSwge1xuXHRcdGRpc3BsYXk6ICdmbGV4Jyxcblx0XHRmbGV4RGlyZWN0aW9uOiAnY29sdW1uJyxcblx0XHRhbGlnbkl0ZW1zOiAnZmxleC1zdGFydCcsXG5cdFx0cGFkZGluZzogJzAuNWVtIDAnLFxuXHRcdGN1cnNvcjogJ3BvaW50ZXInLFxuXHRcdH0pO1xuXG5cdFx0Y29uc3QgdGl0bGVSb3cgPSBjdXN0b21pemF0aW9uU3VtbWFyeS5jcmVhdGVEaXYoe1xuXHRcdGF0dHI6IHtcblx0XHRcdHN0eWxlOiBgXG5cdFx0XHRkaXNwbGF5OiBmbGV4O1xuXHRcdFx0d2lkdGg6IDEwMCU7XG5cdFx0XHRqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47XG5cdFx0XHRhbGlnbi1pdGVtczogZmxleC1lbmQ7XG5cdFx0XHRgLFxuXHRcdH0sXG5cdFx0fSk7XG5cblx0XHRjb25zdCBjdXN0b21pemF0aW9uVGl0bGVCbG9jayA9IHRpdGxlUm93LmNyZWF0ZURpdih7XG5cdFx0YXR0cjogeyBzdHlsZTogJ2Rpc3BsYXk6IGZsZXg7IGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47JyB9XG5cdFx0fSk7XG5cblx0XHRjb25zdCBoNSA9IGN1c3RvbWl6YXRpb25UaXRsZUJsb2NrLmNyZWF0ZUVsKCdoNScpO1xuXHRcdGg1LmFwcGVuZFRleHQoJ0N1c3RvbSBGaWxlIE1hbmFnZW1lbnQgJyk7XG5cblx0XHRjdXN0b21pemF0aW9uVGl0bGVCbG9jay5jcmVhdGVFbCgnZGl2Jywge1xuXHRcdHRleHQ6ICdTa2lwIHVwZGF0ZXMgb24gY2VydGFpbiBmaWxlcyBvciByZW1hcCByZWxvY2F0ZWQgVG9vbGtpdCBmaWxlcyBzbyB0aGV5IGNhbiB1cGRhdGUuJyxcblx0XHRjbHM6ICdzZXR0aW5nLWl0ZW0tZGVzY3JpcHRpb24nLFxuXHRcdGF0dHI6IHsgc3R5bGU6ICdtYXJnaW4tdG9wOiAwLjI1ZW07JyB9LFxuXHRcdH0pO1xuXG5cdFx0Y29uc3QgY3VzdG9tVnZJY29uID0gdGl0bGVSb3cuY3JlYXRlRWwoJ3NwYW4nLCB7IHRleHQ6ICdWVicsIGNsczogJ3ZrLXRvZ2dsZS1pY29uJyB9KTtcblxuXHRcdE9iamVjdC5hc3NpZ24oY3VzdG9tVnZJY29uLnN0eWxlLCB7XG5cdFx0Zm9udFdlaWdodDogJ2JvbGQnLFxuXHRcdHRyYW5zaXRpb246ICd0cmFuc2Zvcm0gMC4ycyBlYXNlJyxcblx0XHR0cmFuc2Zvcm1PcmlnaW46ICc1MCUgNTAlJyxcblx0XHR1c2VyU2VsZWN0OiAnbm9uZScsXG5cdFx0dHJhbnNmb3JtOiBjdXN0b21pemF0aW9uRGV0YWlscy5vcGVuID8gJ3JvdGF0ZSgwZGVnKScgOiAncm90YXRlKDE4MGRlZyknLFxuXHRcdH0pO1xuXG5cdFx0Y3VzdG9taXphdGlvbkRldGFpbHMub250b2dnbGUgPSAoKSA9PiB7XG5cdFx0Y3VzdG9tVnZJY29uLmFkZENsYXNzKFwidnYtcm90YXRlZFwiKTtcblx0XHR9O1xuXG5cdFx0Y29uc3QgY3VzdG9taXphdGlvbkJvZHlXcmFwcGVyID0gY3VzdG9taXphdGlvbkRldGFpbHMuY3JlYXRlRGl2KHtcblx0XHRcdGF0dHI6IHsgc3R5bGU6ICdwYWRkaW5nLWxlZnQ6IDFlbTsgcGFkZGluZy1yaWdodDogMWVtOycgfVxuXHRcdCAgfSk7XG5cdFx0ICBjb25zdCBjdXN0b21pemF0aW9uQm9keSA9IGN1c3RvbWl6YXRpb25Cb2R5V3JhcHBlci5jcmVhdGVEaXYoeyBjbHM6ICd2ay1zZWN0aW9uLWJvZHknIH0pO1xuXG5cblxuXHRcdC8vIFx1MjUwMFx1MjUwMFx1MjUwMCBTS0lQLUxJU1QgUEFORUwgXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXG5cblx0XHRjb25zdCBza2lwU2VjdGlvbiA9IGN1c3RvbWl6YXRpb25Cb2R5LmNyZWF0ZURpdigpO1xuXG5cdFx0Ly8gMS4gQ3JlYXRlIHNldHRpbmcgYmxvY2sgKG1hdGNoZXMgT2JzaWRpYW4gbmF0aXZlIFVJIGxheW91dClcblx0XHRjb25zdCBzZXR0aW5nSXRlbSA9IHNraXBTZWN0aW9uLmNyZWF0ZURpdih7IGNsczogJ3NldHRpbmctaXRlbScgfSk7XG5cblx0XHQvLyAyLiBMZWZ0IGNvbHVtbjogdGl0bGUgKyBkZXNjcmlwdGlvblxuXHRcdGNvbnN0IGluZm8gPSBzZXR0aW5nSXRlbS5jcmVhdGVEaXYoeyBjbHM6ICdzZXR0aW5nLWl0ZW0taW5mbycgfSk7XG5cdFx0aW5mby5jcmVhdGVEaXYoeyB0ZXh0OiAnU2tpcCBUb29sa2l0IEl0ZW1zJywgY2xzOiAnc2V0dGluZy1pdGVtLW5hbWUnIH0pO1xuXHRcdGluZm8uY3JlYXRlRGl2KHtcblx0XHR0ZXh0OiAnRmlsZXMgbGlzdGVkIGhlcmUgd2lsbCBiZSBpZ25vcmVkIGR1cmluZyB0b29sa2l0IHVwZGF0ZXMuJyxcblx0XHRjbHM6ICdzZXR0aW5nLWl0ZW0tZGVzY3JpcHRpb24nLFxuXHRcdH0pO1xuXG5cdFx0Ly8gMy4gUmlnaHQgY29sdW1uOiBkcm9wZG93biArIGJ1dHRvblxuXHRcdGNvbnN0IGNvbnRyb2wgPSBzZXR0aW5nSXRlbS5jcmVhdGVEaXYoeyBjbHM6ICdzZXR0aW5nLWl0ZW0tY29udHJvbCcgfSk7XG5cblx0XHRjb25zdCBkcm9wZG93biA9IG5ldyBEcm9wZG93bkNvbXBvbmVudChjb250cm9sKTtcblx0XHRkcm9wZG93bi5zZWxlY3RFbC5hZGRDbGFzcyhcImRyb3Bkb3dud2lkdGhcIik7XG5cdFx0ZHJvcGRvd24uYWRkT3B0aW9uKCcnLCAnU2VsZWN0IGFuIGl0ZW1cdTIwMjYnKTtcblx0XHR0aGlzLnBsdWdpbi5tYW5pZmVzdENhY2hlLmZpbGVzXG5cdFx0LmZpbHRlcihmID0+ICFmLm9wdGlvbmFsKVxuXHRcdC5mb3JFYWNoKGYgPT4gZHJvcGRvd24uYWRkT3B0aW9uKGYucGF0aCwgZi5kaXNwbGF5TmFtZSA/PyBmLnBhdGguc3BsaXQoJy8nKS5wb3AoKSEpKTtcblx0XHR0aGlzLnBsdWdpbi5tYW5pZmVzdENhY2hlLmZvbGRlcnNcblx0XHQuZmlsdGVyKGYgPT4gIWYub3B0aW9uYWwpXG5cdFx0LmZvckVhY2goZiA9PiBkcm9wZG93bi5hZGRPcHRpb24oZi5wYXRoLCAoZi5kaXNwbGF5TmFtZSA/PyBmLnBhdGguc3BsaXQoJy8nKS5wb3AoKSEpICsgJy8gKGZvbGRlciknKSk7XG5cblx0XHRuZXcgQnV0dG9uQ29tcG9uZW50KGNvbnRyb2wpXG5cdFx0LnNldEJ1dHRvblRleHQoJ0FkZCcpXG5cdFx0LnNldEN0YSgpXG5cdFx0Lm9uQ2xpY2soYXN5bmMgKCkgPT4ge1xuXHRcdFx0Y29uc3Qga2V5ID0gZHJvcGRvd24uZ2V0VmFsdWUoKTtcblx0XHRcdGlmICgha2V5KSByZXR1cm4gbmV3IE5vdGljZSgnUGljayBzb21ldGhpbmcgdG8gc2tpcC4nKTtcblx0XHRcdGlmICghdGhpcy5wbHVnaW4uc2V0dGluZ3MuY3VzdG9tUGF0aHMuc29tZShjID0+IGMubWFuaWZlc3RLZXkgPT09IGtleSkpIHtcblx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmN1c3RvbVBhdGhzLnB1c2goeyB2YXVsdFBhdGg6IGtleSwgbWFuaWZlc3RLZXk6IGtleSwgZG9VcGRhdGU6IGZhbHNlIH0pO1xuXHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG5cdFx0XHRyZW5kZXJTa2lwVGFibGUoKTtcblx0XHRcdH1cblx0XHR9KTtcblxuXHRcdC8vIDQuIFRhYmxlIHdyYXBwZXIgZm9yIHNraXBwZWQgaXRlbXNcblx0XHRjb25zdCBza2lwVGFibGVXcmFwcGVyID0gc2tpcFNlY3Rpb24uY3JlYXRlRGl2KHsgY2xzOiAndmstdGFibGUtd3JhcHBlcicsIGF0dHI6IHsgc3R5bGU6ICdtYXJnaW4tdG9wOjAuNzVlbScgfSB9KTtcblxuXHRcdGNvbnN0IHJlbmRlclNraXBUYWJsZSA9ICgpID0+IHtcblx0XHRza2lwVGFibGVXcmFwcGVyLmVtcHR5KCk7XG5cblx0XHRjb25zdCBpdGVtcyA9IHRoaXMucGx1Z2luLnNldHRpbmdzLmN1c3RvbVBhdGhzLmZpbHRlcihjID0+ICFjLmRvVXBkYXRlKTtcblxuXHRcdGlmIChpdGVtcy5sZW5ndGggPT09IDApIHtcblx0XHRcdC8vIE5vIHRhYmxlIGlmIG5vdGhpbmcgdG8gc2hvdyBcdTIwMTQganVzdCBhbiBlbXB0eSBzdGF0ZSBtZXNzYWdlXG5cdFx0XHRjb25zdCBlbXB0eU1zZyA9IHNraXBUYWJsZVdyYXBwZXIuY3JlYXRlRWwoJ2RpdicsIHsgdGV4dDogJ05vIGl0ZW1zIHNraXBwZWQuJyB9KTtcblx0XHRcdGVtcHR5TXNnLmFkZENsYXNzKFwic2V0dGluZ3MtZW1wdHltc2dcIik7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0Ly8gUmVuZGVyIHRhYmxlIG9ubHkgaWYgaXRlbXMgZXhpc3Rcblx0XHRjb25zdCB0YWJsZSA9IHNraXBUYWJsZVdyYXBwZXIuY3JlYXRlRWwoJ3RhYmxlJywgeyBjbHM6ICdzZXR0aW5nLXRhYmxlJyB9KTtcblxuXHRcdGNvbnN0IGhlYWRlciA9IHRhYmxlLmNyZWF0ZVRIZWFkKCkuaW5zZXJ0Um93KCk7XG5cdFx0aGVhZGVyLmluc2VydENlbGwoKS50ZXh0Q29udGVudCA9ICdTa2lwcGVkIEZpbGVzL0ZvbGRlcnMnO1xuXG5cdFx0Y29uc3QgYm9keSA9IHRhYmxlLmNyZWF0ZVRCb2R5KCk7XG5cblx0XHRpdGVtcy5mb3JFYWNoKChlbnRyeSkgPT4ge1xuXHRcdFx0Y29uc3Qgcm93ID0gYm9keS5pbnNlcnRSb3coKTtcblx0XHRcdGNvbnN0IGNvbnRlbnRDZWxsID0gcm93Lmluc2VydENlbGwoKTtcblx0XHRcdGNvbnRlbnRDZWxsLmFkZENsYXNzKFwic2V0dGluZ3MtZmlsZXRhYmxlXCIpO1xuXG5cdFx0XHRjb250ZW50Q2VsbC5jcmVhdGVTcGFuKHsgdGV4dDogZW50cnkubWFuaWZlc3RLZXkgfSk7XG5cblx0XHRcdGNvbnN0IHJlbW92ZUxpbmsgPSBjb250ZW50Q2VsbC5jcmVhdGVFbCgnYScsIHsgdGV4dDogJ1JlbW92ZSBlbnRyeScsIGhyZWY6ICcjJyB9KTtcblx0XHRcdHJlbW92ZUxpbmsuYWRkQ2xhc3MoXCJzZXR0aW5ncy1yZW1vdmVsaW5rXCIpO1xuXHRcdFx0cmVtb3ZlTGluay5vbmNsaWNrID0gYXN5bmMgKGUpID0+IHtcblx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcblx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmN1c3RvbVBhdGhzLnJlbW92ZShlbnRyeSk7XG5cdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcblx0XHRcdHJlbmRlclNraXBUYWJsZSgpO1xuXHRcdFx0fTtcblx0XHR9KTtcblx0XHR9O1xuXG5cdFx0cmVuZGVyU2tpcFRhYmxlKCk7XG5cblx0XHQvLyBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDAgU3BhY2VyICYgRGl2aWRlciBCZWZvcmUgUmVtYXAgUGFuZWwgXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXG5cdFx0Y3VzdG9taXphdGlvbkJvZHkuY3JlYXRlRWwoJ2RpdicsIHtcblx0XHRcdGF0dHI6IHsgc3R5bGU6ICdoZWlnaHQ6IDFlbTsgYm9yZGVyLXRvcDogMXB4IHNvbGlkIHZhcigtLWRpdmlkZXItY29sb3IpOyBtYXJnaW46IDFlbSAwOycgfVxuXHRcdH0pO1xuXG5cdFx0Ly8gXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwIFJFTUFQIFBBTkVMIFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFxuXHRcdGNvbnN0IHJlbWFwU2VjdGlvbiA9IGN1c3RvbWl6YXRpb25Cb2R5LmNyZWF0ZURpdigpO1xuXG5cblx0XHQvLyBTZXR0aW5nLXN0eWxlIHdyYXBwZXJcblx0XHRjb25zdCByZW1hcFNldHRpbmcgPSByZW1hcFNlY3Rpb24uY3JlYXRlRGl2KHsgY2xzOiAnc2V0dGluZy1pdGVtJyB9KTtcblxuXHRcdC8vIExlZnQ6IGhlYWRlciArIGRlc2NyaXB0aW9uICh1bmNoYW5nZWQgc3R5bGUpXG5cdFx0Y29uc3QgcmVtYXBJbmZvID0gcmVtYXBTZXR0aW5nLmNyZWF0ZURpdih7IGNsczogJ3NldHRpbmctaXRlbS1pbmZvJyB9KTtcblx0XHRyZW1hcEluZm8uY3JlYXRlRGl2KHsgdGV4dDogJ1JlbWFwIEZpbGUgUGF0aHMnLCBjbHM6ICdzZXR0aW5nLWl0ZW0tbmFtZScgfSk7XG5cdFx0cmVtYXBJbmZvLmNyZWF0ZURpdih7XG5cdFx0XHR0ZXh0OiAnUmVtYXAgdG9vbGtpdCBmaWxlcyB2YXVsdCBwYXRocyBpZiB5b3UgY2hvc2UgdG8gbW92ZSBhbnl0aGluZy4gTW92aW5nIGZpbGVzIHdpdGhvdXQgcmVtYXBwaW5nIHdpbGwgcmVzdWx0IGluIGR1cGxpY2F0ZSBhbmQvb3Igb3V0LW9mLWRhdGUgZmlsZXMgYWZ0ZXIgdXBkYXRlLicsXG5cdFx0XHRjbHM6ICdzZXR0aW5nLWl0ZW0tZGVzY3JpcHRpb24nXG5cdFx0fSk7XG5cblx0XHQvLyBOZXcgZnVsbC13aWR0aCBibG9jayBiZWxvdyBmb3IgY29udHJvbHNcblx0XHRjb25zdCByZW1hcENvbnRyb2xCbG9jayA9IHJlbWFwU2VjdGlvbi5jcmVhdGVEaXYoeyBjbHM6ICd2ay1pbmxpbmUtYWRkLWNvbnRyb2xzJyB9KTtcblx0XHRyZW1hcENvbnRyb2xCbG9jay5hZGRDbGFzcyhcInNldHRpbmdzLXJlbWFwY29udHJvbFwiKTtcblxuXHRcdGxldCByZW1hcERyb3A6IERyb3Bkb3duQ29tcG9uZW50O1xuXHRcdGxldCByZW1hcElucHV0OiBIVE1MSW5wdXRFbGVtZW50O1xuXG5cdFx0cmVtYXBEcm9wID0gbmV3IERyb3Bkb3duQ29tcG9uZW50KHJlbWFwQ29udHJvbEJsb2NrKTtcblx0XHRyZW1hcERyb3Auc2VsZWN0RWwuYWRkQ2xhc3MoXCJkcm9wZG93bndpZHRoXCIpO1xuXHRcdHJlbWFwRHJvcC5hZGRPcHRpb24oJycsICdTZWxlY3QgYW4gaXRlbVx1MjAyNicpO1xuXHRcdHRoaXMucGx1Z2luLm1hbmlmZXN0Q2FjaGUuZmlsZXMuZm9yRWFjaChmID0+XG5cdFx0XHRyZW1hcERyb3AuYWRkT3B0aW9uKGYucGF0aCwgZi5kaXNwbGF5TmFtZSA/PyBmLnBhdGguc3BsaXQoJy8nKS5wb3AoKSEpXG5cdFx0KTtcblx0XHR0aGlzLnBsdWdpbi5tYW5pZmVzdENhY2hlLmZvbGRlcnMuZm9yRWFjaChmID0+XG5cdFx0XHRyZW1hcERyb3AuYWRkT3B0aW9uKGYucGF0aCwgKGYuZGlzcGxheU5hbWUgPz8gZi5wYXRoLnNwbGl0KCcvJykucG9wKCkhKSArICcvIChmb2xkZXIpJylcblx0XHQpO1xuXG5cdFx0Y29uc3Qgc2VhcmNoV3JhcHBlciA9IHJlbWFwQ29udHJvbEJsb2NrLmNyZWF0ZURpdigpO1xuXHRcdGNvbnN0IHNlYXJjaENvbXBvbmVudCA9IG5ldyBTZWFyY2hDb21wb25lbnQoc2VhcmNoV3JhcHBlcik7XG5cdFx0c2VhcmNoQ29tcG9uZW50LnNldFBsYWNlaG9sZGVyKCdTZWFyY2ggdmF1bHQgcGF0aFx1MjAyNicpO1xuXHRcdG5ldyBGaWxlUGF0aFN1Z2dlc3Rlcih0aGlzLmFwcCwgc2VhcmNoQ29tcG9uZW50LmlucHV0RWwpO1xuXHRcdHJlbWFwSW5wdXQgPSBzZWFyY2hDb21wb25lbnQuaW5wdXRFbDtcblxuXHRcdG5ldyBCdXR0b25Db21wb25lbnQocmVtYXBDb250cm9sQmxvY2spXG5cdFx0XHQuc2V0QnV0dG9uVGV4dCgnQWRkIFJlbWFwJylcblx0XHRcdC5zZXRDdGEoKVxuXHRcdFx0Lm9uQ2xpY2soYXN5bmMgKCkgPT4ge1xuXHRcdFx0XHRjb25zdCBrZXkgPSByZW1hcERyb3AuZ2V0VmFsdWUoKTtcblx0XHRcdFx0Y29uc3QgdnAgPSByZW1hcElucHV0LnZhbHVlLnRyaW0oKTtcblx0XHRcdFx0aWYgKCFrZXkgfHwgIXZwKSByZXR1cm4gbmV3IE5vdGljZSgnU2VsZWN0IGFuIGl0ZW0gYW5kIGVudGVyIGEgdmF1bHQgcGF0aC4nKTtcblx0XHRcdFx0aWYgKCF0aGlzLmFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgodnApKSByZXR1cm4gbmV3IE5vdGljZSgnVmF1bHQgcGF0aCBub3QgZm91bmQuJyk7XG5cdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmN1c3RvbVBhdGhzID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MuY3VzdG9tUGF0aHMuZmlsdGVyKGMgPT4gYy5tYW5pZmVzdEtleSAhPT0ga2V5KTtcblx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MuY3VzdG9tUGF0aHMucHVzaCh7IG1hbmlmZXN0S2V5OiBrZXksIHZhdWx0UGF0aDogdnAsIGRvVXBkYXRlOiB0cnVlIH0pO1xuXHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcblx0XHRcdFx0cmVtYXBJbnB1dC52YWx1ZSA9ICcnO1xuXHRcdFx0XHRyZW1hcERyb3Auc2V0VmFsdWUoJycpO1xuXHRcdFx0XHRyZW5kZXJSZW1hcFBhbmVsKCk7XG5cdFx0XHR9KTtcblxuXG5cdFx0Ly8gNC4gVGFibGUgd3JhcHBlclxuXHRcdGNvbnN0IHJlbWFwVGFibGVXcmFwcGVyID0gcmVtYXBTZWN0aW9uLmNyZWF0ZURpdih7IGNsczogJ3ZrLXRhYmxlLXdyYXBwZXInLCBhdHRyOiB7IHN0eWxlOiAnbWFyZ2luLXRvcDogMC43NWVtJyB9IH0pO1xuXG5cdFx0Y29uc3QgcmVuZGVyUmVtYXBQYW5lbCA9ICgpID0+IHtcblx0XHRyZW1hcFRhYmxlV3JhcHBlci5lbXB0eSgpO1xuXG5cdFx0Y29uc3QgdG9SZW1hcCA9IHRoaXMucGx1Z2luLnNldHRpbmdzLmN1c3RvbVBhdGhzLmZpbHRlcihjID0+IGMuZG9VcGRhdGUpO1xuXG5cdFx0aWYgKHRvUmVtYXAubGVuZ3RoID09PSAwKSB7XG5cdFx0XHRjb25zdCBlbXB0eU1zZyA9IHJlbWFwVGFibGVXcmFwcGVyLmNyZWF0ZUVsKCdkaXYnLCB7IHRleHQ6ICdObyBjdXN0b20gcGF0aHMgZGVmaW5lZC4nIH0pO1xuXHRcdFx0ZW1wdHlNc2cuYWRkQ2xhc3MoXCJzZXR0aW5ncy1lbXB0eW1zZ1wiKTtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHRjb25zdCB0YWJsZSA9IHJlbWFwVGFibGVXcmFwcGVyLmNyZWF0ZUVsKCd0YWJsZScsIHsgY2xzOiAnc2V0dGluZy10YWJsZScgfSk7XG5cdFx0Y29uc3QgaGVhZCA9IHRhYmxlLmNyZWF0ZVRIZWFkKCkuaW5zZXJ0Um93KCk7XG5cdFx0WydUb29saXQgSXRlbScsICdOZXcgVmF1bHQgUGF0aCcsICcnXS5mb3JFYWNoKHR4dCA9PiBoZWFkLmluc2VydENlbGwoKS50ZXh0Q29udGVudCA9IHR4dCk7XG5cblx0XHRjb25zdCBib2R5ID0gdGFibGUuY3JlYXRlVEJvZHkoKTtcblx0XHR0b1JlbWFwLmZvckVhY2goZW50cnkgPT4ge1xuXHRcdFx0Y29uc3Qgcm93ID0gYm9keS5pbnNlcnRSb3coKTtcblxuXHRcdFx0Ly8gTWFuaWZlc3QgS2V5XG5cdFx0XHRyb3cuaW5zZXJ0Q2VsbCgpLnRleHRDb250ZW50ID0gZW50cnkubWFuaWZlc3RLZXk7XG5cblx0XHRcdC8vIFZhdWx0IFBhdGhcblx0XHRcdHJvdy5pbnNlcnRDZWxsKCkudGV4dENvbnRlbnQgPSBlbnRyeS52YXVsdFBhdGg7XG5cblx0XHRcdC8vIFJlbW92ZSBsaW5rXG5cdFx0XHRjb25zdCByZW1vdmVDZWxsID0gcm93Lmluc2VydENlbGwoKTtcblx0XHRcdGNvbnN0IHJlbW92ZUxpbmsgPSByZW1vdmVDZWxsLmNyZWF0ZUVsKCdhJywgeyB0ZXh0OiAnUmVtb3ZlIGVudHJ5JywgaHJlZjogJyMnIH0pO1xuXHRcdFx0cmVtb3ZlTGluay5hZGRDbGFzcyhcInNldHRpbmdzLXJlbW92ZWxpbmtcIik7XG5cdFx0XHRyZW1vdmVMaW5rLm9uY2xpY2sgPSBhc3luYyAoZSkgPT4ge1xuXHRcdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MuY3VzdG9tUGF0aHMucmVtb3ZlKGVudHJ5KTtcblx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuXHRcdFx0cmVuZGVyUmVtYXBQYW5lbCgpO1xuXHRcdFx0fTtcblx0XHR9KTtcblx0XHR9O1xuXG5cdFx0cmVuZGVyUmVtYXBQYW5lbCgpO1xuXG5cdFx0Ly8gQWRkIGRpdmlkZXIgaW5zaWRlIHRoZSBib2R5LCBhdCB0aGUgdG9wXG5cdFx0Y3VzdG9taXphdGlvbkJvZHkuY3JlYXRlRWwoJ2RpdicsIHtcblx0XHRcdGF0dHI6IHtcblx0XHRcdHN0eWxlOiAnYm9yZGVyLXRvcDogMXB4IHNvbGlkIHZhcigtLWRpdmlkZXItY29sb3IpOyBtYXJnaW46IDAuNWVtIDA7J1xuXHRcdFx0fVxuXHRcdH0pO1xuXG5cdFx0Ly8gXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwIEhJR0hMSUdIVCBTRUNUSU9OIFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFxuXHRcdGNvbnN0IGhpZ2hsaWdodERldGFpbHMgPSBjb250YWluZXJFbC5jcmVhdGVFbCgnZGV0YWlscycsIHsgY2xzOiAndmstc2VjdGlvbicgfSk7XG5cblx0XHQvLyAxKSBCdWlsZCB0aGUgPHN1bW1hcnk+IGZvciBoaWdobGlnaHQsIG1hdGNoaW5nIGJhY2t1cCBzdHlsZTpcblx0XHRjb25zdCBoaWdobGlnaHRTdW1tYXJ5ID0gaGlnaGxpZ2h0RGV0YWlscy5jcmVhdGVFbCgnc3VtbWFyeScsIHsgY2xzOiAndmstc2VjdGlvbi1oZWFkZXInIH0pO1xuXHRcdE9iamVjdC5hc3NpZ24oaGlnaGxpZ2h0U3VtbWFyeS5zdHlsZSwge1xuXHRcdGRpc3BsYXk6ICdmbGV4Jyxcblx0XHRmbGV4RGlyZWN0aW9uOiAnY29sdW1uJyxcblx0XHRhbGlnbkl0ZW1zOiAnc3RyZXRjaCcsXG5cdFx0cGFkZGluZzogJzAuNWVtIDAnLFxuXHRcdGJvcmRlckJvdHRvbTogJzFweCBzb2xpZCB2YXIoLS1kaXZpZGVyLWNvbG9yKScsXG5cdFx0Y3Vyc29yOiAncG9pbnRlcicsXG5cdFx0fSk7XG5cblx0XHQvLyAxYSkgQ3JlYXRlIHRoZSB0aXRsZSArIGljb24gcm93IChmbGV4IHJvdyBqdXN0aWZ5IHNwYWNlLWJldHdlZW4pOlxuXHRcdGNvbnN0IGhpZ2hsaWdodFRpdGxlUm93ID0gaGlnaGxpZ2h0U3VtbWFyeS5jcmVhdGVEaXYoe1xuXHRcdGF0dHI6IHtcblx0XHRcdHN0eWxlOiBgXG5cdFx0XHRkaXNwbGF5OiBmbGV4O1xuXHRcdFx0anVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuO1xuXHRcdFx0YWxpZ24taXRlbXM6IGZsZXgtZW5kO1xuXHRcdFx0YCxcblx0XHR9LFxuXHRcdH0pO1xuXG5cdFx0Ly8gMWIpIExlZnQgc2lkZTogdGl0bGUgKyBkZXNjcmlwdGlvblxuXHRcdGNvbnN0IGhsVGl0bGVCbG9jayA9IGhpZ2hsaWdodFRpdGxlUm93LmNyZWF0ZURpdih7XG5cdFx0YXR0cjogeyBzdHlsZTogJ2Rpc3BsYXk6IGZsZXg7IGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47JyB9XG5cdFx0fSk7XG5cdFx0aGxUaXRsZUJsb2NrLmNyZWF0ZUVsKCdoNScsIHsgdGV4dDogJ0ZpbGUgSGlnaGxpZ2h0cycgfSk7XG5cdFx0aGxUaXRsZUJsb2NrLmNyZWF0ZUVsKCdkaXYnLCB7XG5cdFx0dGV4dDogJ1RvZ2dsZSBvbi9vZmYgdGhlIGhpZ2hsaWdodGluZyBvZiBUb29sa2l0LXNwZWNpZmljIGZpbGVzLiBBbHNvIG1ha2UgdGhlIGhpZ2hsaWdodHMgY29vbCBjb2xvcnMuJyxcblx0XHRjbHM6ICdzZXR0aW5nLWl0ZW0tZGVzY3JpcHRpb24nLFxuXHRcdGF0dHI6IHsgc3R5bGU6ICdtYXJnaW4tdG9wOiAwLjI1ZW07JyB9LFxuXHRcdH0pO1xuXG5cdFx0Ly8gMWMpIFJpZ2h0IHNpZGU6IGNvbGxhcHNpbmcgYXJyb3cvaWNvblxuXHRcdGNvbnN0IGhsVG9nZ2xlSWNvbiA9IGhpZ2hsaWdodFRpdGxlUm93LmNyZWF0ZUVsKCdzcGFuJywgeyB0ZXh0OiAnVlYnLCBjbHM6ICd2ay10b2dnbGUtaWNvbicgfSk7XG5cdFx0T2JqZWN0LmFzc2lnbihobFRvZ2dsZUljb24uc3R5bGUsIHtcblx0XHRmb250V2VpZ2h0OiAnYm9sZCcsXG5cdFx0ZGlzcGxheTogJ2lubGluZS1ibG9jaycsXG5cdFx0dHJhbnNpdGlvbjogJ3RyYW5zZm9ybSAwLjJzIGVhc2UnLFxuXHRcdHRyYW5zZm9ybU9yaWdpbjogJzUwJSA1MCUnLFxuXHRcdHVzZXJTZWxlY3Q6ICdub25lJyxcblx0XHR0cmFuc2Zvcm06IGhpZ2hsaWdodERldGFpbHMub3BlbiA/ICdyb3RhdGUoMGRlZyknIDogJ3JvdGF0ZSgxODBkZWcpJyxcblx0XHR9KTtcblxuXHRcdC8vIDFkKSBNYWtlIHRoZSBpY29uIHJvdGF0ZSB3aGVuIHRoZSA8ZGV0YWlscz4gb3BlbnMvY2xvc2VzOlxuXHRcdGhpZ2hsaWdodERldGFpbHMub250b2dnbGUgPSAoKSA9PiB7XG5cdFx0aGxUb2dnbGVJY29uLmFkZENsYXNzKFwidnYtcm90YXRlZFwiKTtcblx0XHR9O1xuXG5cdFx0Ly8gMikgQ3JlYXRlIHRoZSBib2R5IGNvbnRhaW5lciAoaW5kZW50ZWQsIHNhbWUgYXMgYmFja3VwKVxuXHRcdGNvbnN0IGhpZ2hsaWdodEJvZHkgPSBoaWdobGlnaHREZXRhaWxzLmNyZWF0ZURpdih7IGNsczogJ3ZrLXNlY3Rpb24tYm9keScgfSk7XG5cdFx0aGlnaGxpZ2h0Qm9keS5hZGRDbGFzcyhcInZ2LXBsLW1kXCIpO1xuXG5cdFx0Ly8gMykgXHUyMDFDRW5hYmxlIEhpZ2hsaWdodFx1MjAxRCB0b2dnbGUgYXMgYSBTZXR0aW5nIGluc2lkZSBoaWdobGlnaHRCb2R5OlxuXHRcdG5ldyBTZXR0aW5nKGhpZ2hsaWdodEJvZHkpXG5cdFx0LnNldE5hbWUoJ0VuYWJsZSBGaWxlL0ZvbGRlciBIaWdobGlnaHRpbmcnKVxuXHRcdC5zZXREZXNjKCdBbnkgZmlsZS9mb2xkZXIgaW5zdGFsbGVkIGJ5IFZWdW5kZXJsb3JlIHdpbGwgaGF2ZSB0aGlzIGJhY2tncm91bmQuJylcblx0XHQuYWRkVG9nZ2xlKHRvZ2dsZSA9PiB7XG5cdFx0XHR0b2dnbGVcblx0XHRcdC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5oaWdobGlnaHRFbmFibGVkKVxuXHRcdFx0Lm9uQ2hhbmdlKGFzeW5jIChlbmFibGVkKSA9PiB7XG5cdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmhpZ2hsaWdodEVuYWJsZWQgPSBlbmFibGVkO1xuXHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcblxuXHRcdFx0XHRpZiAoZW5hYmxlZCkge1xuXHRcdFx0XHR0aGlzLnBsdWdpbi5lbmFibGVIaWdobGlnaHQoKTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0dGhpcy5wbHVnaW4uZGlzYWJsZUhpZ2hsaWdodCgpO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0Ly8gUmVcdTIwMTByZW5kZXIgdGhlIGNvbG9yIHBpY2tlcnMgd2hlbmV2ZXIgdGhlIHRvZ2dsZSBjaGFuZ2VzOlxuXHRcdFx0XHRyZW5kZXJIaWdobGlnaHRDb2xvclBpY2tlcnMoKTtcblx0XHRcdH0pO1xuXHRcdH0pO1xuXG5cdFx0Ly8gNCkgV3JhcHBlciBmb3IgTGlnaHQvRGFyayBjb2xvciBwaWNrZXJzOlxuXHRcdGNvbnN0IGNvbG9yUGlja2VyV3JhcHBlciA9IGhpZ2hsaWdodEJvZHkuY3JlYXRlRGl2KCk7XG5cblx0XHQvLyA1KSBBIGZ1bmN0aW9uIHRvIHJlbmRlciBvciBjbGVhciB0aGUgdHdvIENvbG9yUGlja2VyIHNldHRpbmdzOlxuXHRcdGNvbnN0IHJlbmRlckhpZ2hsaWdodENvbG9yUGlja2VycyA9ICgpID0+IHtcblx0XHRjb2xvclBpY2tlcldyYXBwZXIuZW1wdHkoKTtcblxuXHRcdGlmICghdGhpcy5wbHVnaW4uc2V0dGluZ3MuaGlnaGxpZ2h0RW5hYmxlZCkge1xuXHRcdFx0cmV0dXJuOyAvLyBkbyBub3Qgc2hvdyBwaWNrZXJzIGlmIGhpZ2hsaWdodGluZyBpcyBkaXNhYmxlZFxuXHRcdH1cblxuXHRcdC8vIDVhKSBMaWdodCBtb2RlIGNvbG9yIHBpY2tlclxuXHRcdG5ldyBTZXR0aW5nKGNvbG9yUGlja2VyV3JhcHBlcilcblx0XHRcdC5zZXROYW1lKCdMaWdodCBNb2RlIEhpZ2hsaWdodCBDb2xvcicpXG5cdFx0XHQuc2V0RGVzYygnQ2hvb3NlIHRoZSBiYWNrZ3JvdW5kIGNvbG9yIGZvciBmaWxlcy9mb2xkZXJzIGluIExpZ2h0IG1vZGUuJylcblx0XHRcdC5hZGRDb2xvclBpY2tlcihwaWNrZXIgPT4ge1xuXHRcdFx0cGlja2VyXG5cdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5oaWdobGlnaHRDb2xvckxpZ2h0KVxuXHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKG5ld0NvbG9yKSA9PiB7XG5cdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmhpZ2hsaWdodENvbG9yTGlnaHQgPSBuZXdDb2xvcjtcblx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG5cblx0XHRcdFx0Ly8gUmVcdTIwMTBpbmplY3QgQ1NTIHNvIHRoZSBuZXcgY29sb3IgdGFrZXMgZWZmZWN0IGltbWVkaWF0ZWx5OlxuXHRcdFx0XHR0aGlzLnBsdWdpbi5kaXNhYmxlSGlnaGxpZ2h0KCk7XG5cdFx0XHRcdHRoaXMucGx1Z2luLmVuYWJsZUhpZ2hsaWdodCgpO1xuXHRcdFx0XHR9KTtcblx0XHRcdH0pO1xuXG5cdFx0Ly8gNWIpIERhcmsgbW9kZSBjb2xvciBwaWNrZXJcblx0XHRuZXcgU2V0dGluZyhjb2xvclBpY2tlcldyYXBwZXIpXG5cdFx0XHQuc2V0TmFtZSgnRGFyayBNb2RlIEhpZ2hsaWdodCBDb2xvcicpXG5cdFx0XHQuc2V0RGVzYygnQ2hvb3NlIHRoZSBiYWNrZ3JvdW5kIGNvbG9yIGZvciBmaWxlcy9mb2xkZXJzIGluIERhcmsgbW9kZS4nKVxuXHRcdFx0LmFkZENvbG9yUGlja2VyKHBpY2tlciA9PiB7XG5cdFx0XHRwaWNrZXJcblx0XHRcdFx0LnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmhpZ2hsaWdodENvbG9yRGFyaylcblx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jIChuZXdDb2xvcikgPT4ge1xuXHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5oaWdobGlnaHRDb2xvckRhcmsgPSBuZXdDb2xvcjtcblx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG5cblx0XHRcdFx0Ly8gUmVcdTIwMTBpbmplY3QgQ1NTIHNvIHRoZSBuZXcgY29sb3IgdGFrZXMgZWZmZWN0IGltbWVkaWF0ZWx5OlxuXHRcdFx0XHR0aGlzLnBsdWdpbi5kaXNhYmxlSGlnaGxpZ2h0KCk7XG5cdFx0XHRcdHRoaXMucGx1Z2luLmVuYWJsZUhpZ2hsaWdodCgpO1xuXHRcdFx0XHR9KTtcblx0XHRcdH0pO1xuXHRcdH07XG5cblx0XHQvLyA2KSBDYWxsIG9uY2Ugb24gaW5pdGlhbCByZW5kZXIgc28gdGhhdCBpZiBoaWdobGlnaHRFbmFibGVkID09PSB0cnVlLCB0aGUgcGlja2VycyBzaG93IHVwLlxuXHRcdHJlbmRlckhpZ2hsaWdodENvbG9yUGlja2VycygpO1xuXG5cblx0XHQvLyBcdTI1MDBcdTI1MDBcdTI1MDAgSU5JVElBTCBEUkFXIFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFxuXHRcdHJlbmRlclNraXBUYWJsZSgpO1xuXHRcdHJlbmRlclJlbWFwUGFuZWwoKTtcblxuXG5cdFx0Ly9SRU1PVkUgREVNTyBGSUxFU1xuXHRcdC8vIFx1MjUwMFx1MjUwMFx1MjUwMCBSRU1PVkUgREVNTyBGSUxFUyAodXBkYXRlZCkgXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXG5cbi8vIDEpIENyZWF0ZSBhIFNldHRpbmcgcm93LCBidXQgaW1tZWRpYXRlbHkgc3RyaXAgb2ZmIGl0cyBkZWZhdWx0IHRvcFx1MjAxMGJvcmRlcjpcbmNvbnN0IHJlbW92ZURlbW9TZXR0aW5nID0gbmV3IFNldHRpbmcoY29udGFpbmVyRWwpO1xuKHJlbW92ZURlbW9TZXR0aW5nLnNldHRpbmdFbCBhcyBIVE1MRWxlbWVudCkuYWRkQ2xhc3MoXCJ2di1uby1ib3JkZXItdG9wXCIpO1xuXG5yZW1vdmVEZW1vU2V0dGluZ1xuICAuc2V0TmFtZSgnUmVtb3ZlIERlbW8gRmlsZXMnKVxuICAuc2V0RGVzYygnRGVsZXRlIGV2ZXJ5IFx1MjAxQ29wdGlvbmFsXHUyMDFEIGRlbW8gZmlsZSBhbmQgZm9sZGVyIGZyb20geW91ciB2YXVsdC4nKVxuICAuYWRkQnV0dG9uKChidXR0b24pID0+XG4gICAgYnV0dG9uXG4gICAgICAuc2V0QnV0dG9uVGV4dCgnUmVtb3ZlIERlbW8gRmlsZXMnKVxuXG4gICAgICAub25DbGljayhhc3luYyAoKSA9PiB7XG4gICAgICAgIGNvbnN0IG9wdGlvbmFsRmlsZUVudHJpZXMgPSB0aGlzLnBsdWdpbi5tYW5pZmVzdENhY2hlLmZpbGVzLmZpbHRlcigoZikgPT4gZi5vcHRpb25hbCk7XG4gICAgICAgIGNvbnN0IG9wdGlvbmFsRm9sZGVyRW50cmllcyA9IHRoaXMucGx1Z2luLm1hbmlmZXN0Q2FjaGUuZm9sZGVycy5maWx0ZXIoKGYpID0+IGYub3B0aW9uYWwpO1xuXG4gICAgICAgIGNvbnN0IHRvdGFsQ291bnRGaWxlcyA9IG9wdGlvbmFsRmlsZUVudHJpZXMubGVuZ3RoO1xuICAgICAgICBjb25zdCB0b3RhbENvdW50Rm9sZGVycyA9IG9wdGlvbmFsRm9sZGVyRW50cmllcy5sZW5ndGg7XG4gICAgICAgIGNvbnN0IHRvdGFsQ291bnQgPSB0b3RhbENvdW50RmlsZXMgKyB0b3RhbENvdW50Rm9sZGVycztcblxuICAgICAgICBpZiAodG90YWxDb3VudCA9PT0gMCkge1xuICAgICAgICAgIG5ldyBOb3RpY2UoJ05vIFx1MjAxQ29wdGlvbmFsXHUyMDFEIGRlbW8gZmlsZXMgb3IgZm9sZGVycyB0byByZW1vdmUuJyk7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gLS0tIDIpIEFzayBmb3IgY29uZmlybWF0aW9uIGluIGEgc21hbGwgTW9kYWwgLS0tXG4gICAgICAgIGNvbnN0IHVzZXJDb25maXJtZWQgPSBhd2FpdCBuZXcgUHJvbWlzZTxib29sZWFuPigocmVzb2x2ZSkgPT4ge1xuICAgICAgICAgIGNvbnN0IGNvbmZpcm1Nb2RhbCA9IG5ldyBjbGFzcyBleHRlbmRzIE1vZGFsIHtcbiAgICAgICAgICAgIGNvbnN0cnVjdG9yKGFwcDogQXBwKSB7XG4gICAgICAgICAgICAgIHN1cGVyKGFwcCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBvbk9wZW4oKSB7XG4gICAgICAgICAgICAgIHRoaXMuY29udGVudEVsLmVtcHR5KCk7XG4gICAgICAgICAgICAgIHRoaXMuY29udGVudEVsLmNyZWF0ZUVsKCdoMicsIHsgdGV4dDogJ0NvbmZpcm0gUmVtb3ZhbCcgfSk7XG4gICAgICAgICAgICAgIHRoaXMuY29udGVudEVsLmNyZWF0ZUVsKCdwJywge1xuICAgICAgICAgICAgICAgIHRleHQ6IGBUaGlzIHdpbGwgcGVybWFuZW50bHkgZGVsZXRlICR7dG90YWxDb3VudEZpbGVzfSBmaWxlKHMpIGFuZCAke3RvdGFsQ291bnRGb2xkZXJzfSBmb2xkZXIocykuIENvbnRpbnVlP2AsXG4gICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgIGNvbnN0IGJ0blJvdyA9IHRoaXMuY29udGVudEVsLmNyZWF0ZUVsKCdkaXYnKTtcbiAgICAgICAgICAgICAgT2JqZWN0LmFzc2lnbihidG5Sb3cuc3R5bGUsIHtcbiAgICAgICAgICAgICAgICBkaXNwbGF5OiAnZmxleCcsXG4gICAgICAgICAgICAgICAganVzdGlmeUNvbnRlbnQ6ICdmbGV4LWVuZCcsXG4gICAgICAgICAgICAgICAgZ2FwOiAnMC41ZW0nLFxuICAgICAgICAgICAgICAgIG1hcmdpblRvcDogJzEuNWVtJyxcbiAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgYnRuUm93LmNyZWF0ZUVsKCdidXR0b24nLCB7IHRleHQ6ICdDYW5jZWwnIH0pLm9uY2xpY2sgPSAoKSA9PiB7XG4gICAgICAgICAgICAgICAgcmVzb2x2ZShmYWxzZSk7XG4gICAgICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgIGJ0blJvdy5jcmVhdGVFbCgnYnV0dG9uJywgeyB0ZXh0OiAnWWVzLCBSZW1vdmUnLCBjbHM6ICdtb2QtZGFuZ2VyJyB9KS5vbmNsaWNrID0gKCkgPT4ge1xuICAgICAgICAgICAgICAgIHJlc29sdmUodHJ1ZSk7XG4gICAgICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgb25DbG9zZSgpIHtcbiAgICAgICAgICAgICAgdGhpcy5jb250ZW50RWwuZW1wdHkoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KHRoaXMuYXBwKTtcblxuICAgICAgICAgIGNvbmZpcm1Nb2RhbC5vcGVuKCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGlmICghdXNlckNvbmZpcm1lZCkge1xuICAgICAgICAgIHJldHVybjsgLy8gdXNlciBjbGlja2VkIFx1MjAxQ0NhbmNlbFx1MjAxRFxuICAgICAgICB9XG5cbiAgICAgICAgLy8gLS0tIDMpIERlbGV0ZSBvcHRpb25hbCBmaWxlcyBvbmUgYnkgb25lIC0tLVxuICAgICAgICBsZXQgZmlsZXNEZWxldGVkID0gMDtcbiAgICAgICAgZm9yIChjb25zdCBmaWxlRW50cnkgb2Ygb3B0aW9uYWxGaWxlRW50cmllcykge1xuICAgICAgICAgIC8vIDNhKSBSZXNwZWN0IGFueSByZW1hcHBpbmcgaW4gY3VzdG9tUGF0aHNcbiAgICAgICAgICBjb25zdCBtYXBwZWQgPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5jdXN0b21QYXRocy5maW5kKChjKSA9PiBjLm1hbmlmZXN0S2V5ID09PSBmaWxlRW50cnkua2V5KTtcbiAgICAgICAgICBjb25zdCB2YXVsdFBhdGggPSBtYXBwZWQ/LnZhdWx0UGF0aCA/PyBmaWxlRW50cnkucGF0aDtcblxuICAgICAgICAgIC8vIDNiKSBJZiBpdCBhY3R1YWxseSBleGlzdHMsIHJlbW92ZSBpdFxuICAgICAgICAgIGlmIChhd2FpdCB0aGlzLmFwcC52YXVsdC5hZGFwdGVyLmV4aXN0cyh2YXVsdFBhdGgpKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICBhd2FpdCB0aGlzLmFwcC52YXVsdC5hZGFwdGVyLnJlbW92ZSh2YXVsdFBhdGgpO1xuICAgICAgICAgICAgICBmaWxlc0RlbGV0ZWQrKztcbiAgICAgICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGBGYWlsZWQgdG8gZGVsZXRlIG9wdGlvbmFsIGZpbGUgJHt2YXVsdFBhdGh9YCwgZXJyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvLyAtLS0gNCkgRGVsZXRlIG9wdGlvbmFsIGZvbGRlcnMgcmVjdXJzaXZlbHkgLS0tXG4gICAgICAgIGxldCBmb2xkZXJzRGVsZXRlZCA9IDA7XG4gICAgICAgIGZvciAoY29uc3QgZm9sZGVyRW50cnkgb2Ygb3B0aW9uYWxGb2xkZXJFbnRyaWVzKSB7XG4gICAgICAgICAgY29uc3QgbWFwcGVkID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MuY3VzdG9tUGF0aHMuZmluZCgoYykgPT4gYy5tYW5pZmVzdEtleSA9PT0gZm9sZGVyRW50cnkua2V5KTtcbiAgICAgICAgICBjb25zdCB2YXVsdEZvbGRlclBhdGggPSBtYXBwZWQ/LnZhdWx0UGF0aCA/PyBmb2xkZXJFbnRyeS5wYXRoO1xuXG4gICAgICAgICAgaWYgKGF3YWl0IHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXIuZXhpc3RzKHZhdWx0Rm9sZGVyUGF0aCkpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgIC8vIFRoZSBzZWNvbmQgYXJndW1lbnQgYHRydWVgIGVuc3VyZXMgcmVjdXJzaXZlIGRlbGV0ZVxuICAgICAgICAgICAgICBhd2FpdCB0aGlzLmFwcC52YXVsdC5hZGFwdGVyLnJtZGlyKHZhdWx0Rm9sZGVyUGF0aCwgdHJ1ZSk7XG4gICAgICAgICAgICAgIGZvbGRlcnNEZWxldGVkKys7XG4gICAgICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihgRmFpbGVkIHRvIGRlbGV0ZSBvcHRpb25hbCBmb2xkZXIgJHt2YXVsdEZvbGRlclBhdGh9YCwgZXJyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvLyAtLS0gNSkgQ2xlYW4gdXAgYW55IFx1MjAxQ2N1c3RvbVBhdGhzXHUyMDFEIGVudHJpZXMgZm9yIG9wdGlvbmFsIGl0ZW1zIC0tLVxuICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5jdXN0b21QYXRocyA9IHRoaXMucGx1Z2luLnNldHRpbmdzLmN1c3RvbVBhdGhzLmZpbHRlcigoYykgPT4ge1xuICAgICAgICAgIC8vIElmIHRoaXMgbWFwcGluZ1x1MjAxOXMgbWFuaWZlc3RLZXkgd2FzIG9wdGlvbmFsLCBkcm9wIGl0XG4gICAgICAgICAgY29uc3QgaXNPcHRGaWxlID0gb3B0aW9uYWxGaWxlRW50cmllcy5zb21lKChmKSA9PiBmLmtleSA9PT0gYy5tYW5pZmVzdEtleSk7XG4gICAgICAgICAgY29uc3QgaXNPcHRGb2xkZXIgPSBvcHRpb25hbEZvbGRlckVudHJpZXMuc29tZSgoZikgPT4gZi5rZXkgPT09IGMubWFuaWZlc3RLZXkpO1xuICAgICAgICAgIHJldHVybiAhaXNPcHRGaWxlICYmICFpc09wdEZvbGRlcjtcbiAgICAgICAgfSk7XG4gICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuXG4gICAgICAgIC8vIC0tLSA2KSBTaG93IGEgbm90aWNlIGFuZCByZS1yZW5kZXIgdGhlIHNldHRpbmdzIHBhZ2UgLS0tXG4gICAgICAgIG5ldyBOb3RpY2UoYERlbGV0ZWQgJHtmaWxlc0RlbGV0ZWR9IGZpbGUocykgYW5kICR7Zm9sZGVyc0RlbGV0ZWR9IGZvbGRlcihzKS5gKTtcbiAgICAgICAgdGhpcy5kaXNwbGF5KCk7XG4gICAgICB9KVxuICApO1xuXG5cblxuXG5cdFx0LyoqIFx1MjUwMFx1MjUwMFx1MjUwMCBGT09URVIgU0VDVElPTiBcdTI1MDBcdTI1MDBcdTI1MDAgKi9cblx0XHRjb25zdCBmb290ZXIgPSBjb250YWluZXJFbC5jcmVhdGVEaXYoeyBjbHM6ICdzZXR0aW5nLWl0ZW0nIH0pO1xuXHRcdE9iamVjdC5hc3NpZ24oZm9vdGVyLnN0eWxlLCB7XG5cdFx0Zm9udFNpemU6ICcwLjg1ZW0nLFxuXHRcdGNvbG9yOiAndmFyKC0tdGV4dC1tdXRlZCknLFxuXHRcdG1hcmdpblRvcDogJzFlbScsXG5cdFx0fSk7XG5cdFx0Zm9vdGVyLmNyZWF0ZUVsKCdzcGFuJywge1xuXHRcdFx0dGV4dDogYFZWdW5kZXJsb3JlIFRvb2xraXQgUGx1Z2luIHYke3RoaXMucGx1Z2luLm1hbmlmZXN0LnZlcnNpb259IFx1MjAyMiBgXG5cdFx0fSk7XG5cdFx0Zm9vdGVyLmNyZWF0ZUVsKCdhJywge1xuXHRcdFx0dGV4dDogJ1ZpZXcgb24gR2l0SHViJyxcblx0XHRcdGhyZWY6ICdodHRwczovL2dpdGh1Yi5jb20vc2xhbXdpc2UwMDAxL3Z2dW5kZXJsb3JlLXRvb2xraXQtcGx1Z2luJyxcblx0XHRcdGF0dHI6IHsgdGFyZ2V0OiAnX2JsYW5rJyB9XG5cdFx0fSk7XG5cblx0XHRjb250YWluZXJFbC5zY3JvbGxUb3AgPSBzYXZlZFNjcm9sbFRvcDtcblx0fSkoKTtcblx0fVxuXG5cdGFzeW5jIHVwZGF0ZVZlcnNpb25EaXNwbGF5KCk6IFByb21pc2U8dm9pZD4ge1xuXHRcdGlmICghdGhpcy52ZXJzaW9uVmFsdWVFbCB8fCAhdGhpcy5mb3JjZVdhcm5pbmdFbCkgcmV0dXJuO1xuXHQgIFxuXHRcdC8vIHJlYWQgLnZlcnNpb24uanNvblxuXHRcdGxldCBpbnN0YWxsZWQgPSAnJztcblx0XHR0cnkge1xuXHRcdCAgY29uc3QgdmVyID0gYXdhaXQgdGhpcy5wbHVnaW4uYXBwLnZhdWx0LmFkYXB0ZXIucmVhZCgnLnZlcnNpb24uanNvbicpO1xuXHRcdCAgaW5zdGFsbGVkID0gSlNPTi5wYXJzZSh2ZXIpLnZlcnNpb24gPz8gJyc7XG5cdFx0fSBjYXRjaCB7fVxuXHRcdGNvbnN0IGxhdGVzdCA9ICh0aGlzLnBsdWdpbi5zZXR0aW5ncy5sYXRlc3RUb29sa2l0VmVyc2lvbiA/PyAnJykudHJpbSgpO1xuXHRcdGNvbnN0IGlzTWF0Y2ggPSBpbnN0YWxsZWQgPT09IGxhdGVzdDtcblx0ICBcblx0XHQvLyB1cGRhdGUganVzdCB0aGUgdmVyc2lvbiBzcGFuXG5cdFx0dGhpcy52ZXJzaW9uVmFsdWVFbC50ZXh0Q29udGVudCA9IGluc3RhbGxlZCB8fCAnTm90IGluc3RhbGxlZCc7XG5cdFx0dGhpcy52ZXJzaW9uVmFsdWVFbC5hZGRDbGFzcyhpc01hdGNoID8gXCJ2di1zdWNjZXNzXCIgOiBcInZ2LWVycm9yXCIpO1xuXHQgIFxuXHRcdC8vIGNsZWFyIGFuZCByZS1yZW5kZXIganVzdCB0aGUgd2FybmluZyBjb250YWluZXJcblx0XHR0aGlzLmZvcmNlV2FybmluZ0VsLmVtcHR5KCk7XG5cdFx0aWYgKGluc3RhbGxlZCAmJiBsYXRlc3QgJiYgaW5zdGFsbGVkICE9PSBsYXRlc3QpIHtcblx0XHQgIGNvbnN0IHdhcm4gPSB0aGlzLmZvcmNlV2FybmluZ0VsLmNyZWF0ZURpdih7XG5cdFx0XHR0ZXh0OiBgXHUyNkEwXHVGRTBGIE5ldyB2ZXJzaW9uIGF2YWlsYWJsZSAoJHtpbnN0YWxsZWR9IFx1MjE5MiAke2xhdGVzdH0pIFx1MjAxNCB1c2UgcmVndWxhciB1cGRhdGUgaW5zdGVhZGAsXG5cdFx0ICB9KTtcblx0XHQgIHdhcm4uYWRkQ2xhc3MoXCJ2di1zbWFsbFwiLCBcInZ2LW11dGVkXCIsIFwidnYtaXRhbGljXCIpO1xuXHRcdCAgd2Fybi5zZXRBdHRyKCd0aXRsZScsICdGb3JjZSB1cGRhdGluZyB3aGlsZSBhIG5ldyB2ZXJzaW9uIGlzIGF2YWlsYWJsZSBtYXkgc2tpcCBpbXBvcnRhbnQgY2hhbmdlcy4nKTtcblx0XHR9XG5cdCAgfVxuXHQgIFxufSAgXG4iLCAiLy8gc3JjL2ZpcnN0aW5zdGFsbGNvbmZpcm0udHNcbmltcG9ydCB7IEFwcCwgTW9kYWwsIEJ1dHRvbkNvbXBvbmVudCwgTm90aWNlLCBub3JtYWxpemVQYXRoIH0gZnJvbSAnb2JzaWRpYW4nO1xuaW1wb3J0IHR5cGUgVlZ1bmRlcmxvcmVUb29sa2l0UGx1Z2luIGZyb20gJy4vbWFpbic7XG5pbXBvcnQgeyBJbnN0YWxsT3B0aW9ucywgSW5zdGFsbGluZ01vZGFsIH0gZnJvbSAnLi9tYWluJztcbmltcG9ydCB7IGltcG9ydFJ1bGVzZXREYXRhIH0gZnJvbSBcIi4vcnVsZXNldEluc3RhbGxlclwiO1xuXG5hc3luYyBmdW5jdGlvbiBhY3RpdmF0ZUNvcGllZFBsdWdpbnMoYXBwOiBBcHApIHtcbiAgY29uc3QgZmlsZVBhdGggPSBub3JtYWxpemVQYXRoKGAke2FwcC52YXVsdC5jb25maWdEaXJ9L2NvbW11bml0eS1wbHVnaW5zLmpzb25gKTtcblxuICB0cnkge1xuICAgIGNvbnN0IHJhdyA9IGF3YWl0IGFwcC52YXVsdC5hZGFwdGVyLnJlYWQoZmlsZVBhdGgpO1xuICAgIGNvbnN0IHBsdWdpbnNUb0VuYWJsZTogc3RyaW5nW10gPSBKU09OLnBhcnNlKHJhdyk7XG5cbiAgICBpZiAoIUFycmF5LmlzQXJyYXkocGx1Z2luc1RvRW5hYmxlKSkgcmV0dXJuO1xuXG4gICAgY29uc3QgbG9hZGVkID0gKGFwcCBhcyBhbnkpLnBsdWdpbnM7XG5cbiAgICBmb3IgKGNvbnN0IHBsdWdpbklkIG9mIHBsdWdpbnNUb0VuYWJsZSkge1xuICAgICAgaWYgKCFsb2FkZWQuZW5hYmxlZFBsdWdpbnMuaGFzKHBsdWdpbklkKSkge1xuICAgICAgICBhd2FpdCBsb2FkZWQuZW5hYmxlUGx1Z2luQW5kU2F2ZShwbHVnaW5JZCk7XG4gICAgICB9XG4gICAgfVxuXG4gIH0gY2F0Y2ggKGUpIHtcbiAgICBjb25zb2xlLndhcm4oXCJGYWlsZWQgdG8gZW5hYmxlIHRvb2xraXQgcGx1Z2luczpcIiwgZSk7XG4gIH1cbn1cblxuXG5leHBvcnQgY2xhc3MgQ29uZmlybUZyZXNoSW5zdGFsbE1vZGFsIGV4dGVuZHMgTW9kYWwge1xuICBwcml2YXRlIHBsdWdpbjogVlZ1bmRlcmxvcmVUb29sa2l0UGx1Z2luO1xuXG4gIGNvbnN0cnVjdG9yKGFwcDogQXBwLCBwbHVnaW46IFZWdW5kZXJsb3JlVG9vbGtpdFBsdWdpbikge1xuICAgIHN1cGVyKGFwcCk7XG4gICAgdGhpcy5wbHVnaW4gPSBwbHVnaW47XG4gIH1cbiAgXG5cbiAgb25PcGVuKCkge1xuICAgIHRoaXMuY29udGVudEVsLmVtcHR5KCk7XG5cbiAgICB0aGlzLnRpdGxlRWwuc2V0VGV4dChcIlx1MjZBMFx1RkUwRiBXYXJuaW5nOiBGcmVzaCBWYXVsdCBSZWNvbW1lbmRlZFwiKTtcblxuICAgIC8vIERpc2NsYWltZXIgdGV4dFxuICAgIGNvbnN0IHdhcm5pbmdFbCA9IHRoaXMuY29udGVudEVsXG4gICAgICAuY3JlYXRlRWwoJ2RpdicsIHtcbiAgICAgICAgdGV4dDpcbiAgICAgICAgICBcIlRoZSBmdWxsIFZWdW5kZXJsb3JlIGluc3RhbGwgaXMgaW50ZW5kZWQgZm9yIGEgZnJlc2gsIGVtcHR5IE9ic2lkaWFuIHZhdWx0LiBcIiArXG4gICAgICAgICAgXCJJZiB5b3UgaW5zdGFsbCBpbiBhIHZhdWx0IHRoYXQgYWxyZWFkeSBoYXMgZmlsZXMsIGFueSBmaWxlIHdob3NlIHBhdGggbWF0Y2hlcyBhIFwiICtcbiAgICAgICAgICBcIlZWdW5kZXJsb3JlIFRvb2xraXQgZmlsZSB3aWxsIGJlIG92ZXJ3cml0dGVuLlxcblxcblwiICtcbiAgICAgICAgICBcIkFsc28gdGhpbmdzIGNvdWxkIGp1c3QgZ2V0IG1lc3N5LlxcblxcblwiICtcbiAgICAgICAgICBcIk1ha2UgYSBwZXJjZXB0aW9uIGNoZWNrIGFuZCBwcm9jZWVkIHdpdGggY2F1dGlvbiFcIixcbiAgICAgIH0pXG4gICAgICB3YXJuaW5nRWwuYWRkQ2xhc3MoXCJpbnN0YWxsY29uZi1kaXNjbGFpbWVyXCIpO1xuXG4gICAgLy8gQnV0dG9uIHJvdyBjb250YWluZXJcbiAgICBjb25zdCBidXR0b25Sb3cgPSB0aGlzLmNvbnRlbnRFbC5jcmVhdGVFbCgnZGl2Jyk7XG4gICAgYnV0dG9uUm93LmFkZENsYXNzKFwiaW5zdGFsbGNvbmYtYnV0dG9ucm93XCIpO1xuXG4gICAgLy8gXCJPaCBnb2QsIGNhbmNlbCFcIiBidXR0b25cbiAgICBuZXcgQnV0dG9uQ29tcG9uZW50KGJ1dHRvblJvdylcbiAgICAgIC5zZXRCdXR0b25UZXh0KFwiT2ggZ29kLCBjYW5jZWwhXCIpXG4gICAgICAub25DbGljaygoKSA9PiB7XG4gICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgIH0pO1xuXG4gICAgLy8gXCJJbnN0YWxsISFcIiBidXR0b25cbiAgICBuZXcgQnV0dG9uQ29tcG9uZW50KGJ1dHRvblJvdylcbiAgICAgIC5zZXRCdXR0b25UZXh0KFwiSW5zdGFsbCEhXCIpXG4gICAgICAuc2V0Q3RhKClcbiAgICAgIC5vbkNsaWNrKGFzeW5jICgpID0+IHtcbiAgICAgICAgdGhpcy5hcHAud29ya3NwYWNlLmdldExlYXZlc09mVHlwZSgnbWFya2Rvd24nKS5mb3JFYWNoKGxlYWYgPT4gbGVhZi5kZXRhY2goKSk7XG4gICAgICAgIHRoaXMuYXBwLndvcmtzcGFjZS5nZXRMZWF2ZXNPZlR5cGUoJ2dyYXBoJykuZm9yRWFjaChsZWFmID0+IGxlYWYuZGV0YWNoKCkpO1xuICAgICAgXG4gICAgICAgIHRoaXMuY2xvc2UoKTtcblxuICAgICAgICBjb25zdCBpbnN0YWxsaW5nID0gbmV3IEluc3RhbGxpbmdNb2RhbCh0aGlzLmFwcCk7XG4gICAgICAgIGluc3RhbGxpbmcub3BlbigpO1xuXG4gICAgICAgIC8vIDIpIFJ1biB5b3VyIGluc3RhbGxlciArIGNvbXBlbmRpdW0gaW1wb3J0XG4gICAgICAgIGNvbnN0IGNvbXBlbmRpdW0gPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5ydWxlc2V0Q29tcGVuZGl1bTtcbiAgICAgICAgY29uc3QgcmVmZXJlbmNlcyA9IFsuLi50aGlzLnBsdWdpbi5zZXR0aW5ncy5ydWxlc2V0UmVmZXJlbmNlXTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5pbnN0YWxsRnVsbFRvb2xraXQoeyBjb21wZW5kaXVtLCByZWZlcmVuY2VzIH0pO1xuICAgICAgICAgIGlmIChjb21wZW5kaXVtKSB7XG4gICAgICAgICAgICBhd2FpdCBpbXBvcnRSdWxlc2V0RGF0YSh7XG4gICAgICAgICAgICAgIGFwcDogdGhpcy5hcHAsXG4gICAgICAgICAgICAgIGVkaXRpb25LZXk6IGNvbXBlbmRpdW0sXG4gICAgICAgICAgICAgIHRhcmdldFBhdGg6IFwiQ29tcGVuZGl1bVwiLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKFwiXHUyNzRDIGluc3RhbGxGdWxsVG9vbGtpdCgpIGZhaWxlZDpcIiwgZXJyKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmlzRmlyc3RSdW4gPSBcIm5vXCI7XG4gICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuXG4gICAgICAgIC8vIDQpIFN3YXAgdG8gc3VjY2VzcyBzY3JlZW5cbiAgICAgICAgaW5zdGFsbGluZy5jbG9zZSgpO1xuXG4gICAgICAgIGNvbnN0IHN1Y2Nlc3NNb2RhbCA9IG5ldyBNb2RhbCh0aGlzLmFwcCk7XG4gICAgICAgIHN1Y2Nlc3NNb2RhbC5vbk9wZW4gPSAoKSA9PiB7XG4gICAgICAgICAgc3VjY2Vzc01vZGFsLmNvbnRlbnRFbC5lbXB0eSgpO1xuICAgICAgICAgIHN1Y2Nlc3NNb2RhbC50aXRsZUVsLnNldFRleHQoXCJcdTI3MDUgVG9vbGtpdCBJbnN0YWxsZWRcIik7XG4gICAgICAgICAgY29uc3QgbXNnID0gc3VjY2Vzc01vZGFsLmNvbnRlbnRFbC5jcmVhdGVFbChcImRpdlwiLCB7XG4gICAgICAgICAgICB0ZXh0OiBcIlJlbG9hZGluZyB2YXVsdCBpbiAzIHNlY29uZHNcdTIwMjZcIixcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBtc2cuYWRkQ2xhc3MoXCJpbnN0YWxsc3VjY2Vzc1wiKTtcbiAgICAgICAgfTtcbiAgICAgICAgc3VjY2Vzc01vZGFsLm9wZW4oKTtcblxuICAgICAgICAvLyA1KSByZWxvYWRcbiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgc3VjY2Vzc01vZGFsLmNsb3NlKCk7XG4gICAgICAgICAgbG9jYXRpb24ucmVsb2FkKCk7XG4gICAgICAgIH0sIDMwMDApO1xuICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIG9uQ2xvc2UoKSB7XG4gICAgICAgIHRoaXMuY29udGVudEVsLmVtcHR5KCk7XG4gICAgICB9XG4gICAgfVxuXG5cbiAiLCAiLy8gRlVUVVJFIFNZU1RFTVM6IFxuLy8gQ2FsbCBvZiBDdGh1bHUgXG4vLyBNb3RoZXJzaGlwXG4vLyBQRjJFXG4vLyBNXHUwMEY2cmsgQm9yZ1xuLy8gQmxhZGVzIGluIHRoZSBEYXJrXG4vLyBEZWx0YSBHcmVlblxuLy8gU3RhcmZpbmRlclxuLy8gVGhlIE9uZSBSaW5nXG4vLyBGYXRlIFxuLy8gQ3liZXJwdW5rXG4vLyBMYW5jZXJcbi8vIFBvd2VyZWQgYnkgdGhlIEFwb2NhbHlwc2Vcbi8vIFN0YXIgV2FycyBSUEdcblxuZXhwb3J0IGludGVyZmFjZSBFZGl0aW9uIHtcbiAgICBpZDogc3RyaW5nOyAgICAgICAgICAgICAgLy8gZS5nLiBcIjVlLTIwMTRcIlxuICAgIGxhYmVsOiBzdHJpbmc7ICAgICAgICAgICAvLyBlLmcuIFwiRCZEIDVFICgyMDE0KVwiXG4gICAgcmVwbz86IHN0cmluZzsgICAgICAgICAgICAvLyBlLmcuIFwiNWV0b29scy1taXJyb3ItMy81ZXRvb2xzLTIwMTQtc3JjXCJcbiAgICBwYXJzZXI/OiBzdHJpbmc7ICAgICAgIC8vIHlvdXIgcGFyc2VyXHUyMDEwc2VsZWN0b3JcbiAgICBzb3VyY2VVcmw/OiBzdHJpbmc7XG4gICAgY2F0ZWdvcmllcz86IHN0cmluZ1tdO1xuICB9XG4gIFxuICBleHBvcnQgY29uc3QgQVZBSUxBQkxFX0VESVRJT05TOiBFZGl0aW9uW10gPSBbXG4gICAge1xuICAgICAgaWQ6ICdub25lJyxcbiAgICAgIGxhYmVsOiAnTm9uZScsXG4gICAgICByZXBvOiAnJyxcbiAgICAgIHBhcnNlcjogJycsXG4gICAgICBzb3VyY2VVcmw6ICcnLFxuICAgIH0sXG4gICAge1xuICAgICAgaWQ6ICc1ZS0yMDE0JyxcbiAgICAgIGxhYmVsOiAnRCZEIDVlICgyMDE0KScsXG4gICAgICByZXBvOiAnNWV0b29scy1taXJyb3ItMy81ZXRvb2xzLTIwMTQtc3JjJyxcbiAgICAgIHBhcnNlcjogJzVlLTIwMTQnLFxuICAgICAgc291cmNlVXJsOiAnaHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tLzVldG9vbHMtbWlycm9yLTMvNWV0b29scy0yMDE0LXNyYy9tYWluL2RhdGEnLFxuICAgICAgY2F0ZWdvcmllczogWycnXSxcbiAgICB9LFxuICAgIHtcbiAgICAgIGlkOiAnNWUtMjAyNScsXG4gICAgICBsYWJlbDogJ0QmRCA1ZSAoMjAyNSknLFxuICAgICAgcmVwbzogJzVldG9vbHMtbWlycm9yLTMvNWV0b29scy1zcmMnLFxuICAgICAgcGFyc2VyOiAnNWUtMjAyNScsXG4gICAgICBzb3VyY2VVcmw6ICdodHRwczovL3Jhdy5naXRodWJ1c2VyY29udGVudC5jb20vNWV0b29scy1taXJyb3ItMy81ZXRvb2xzLXNyYy9tYWluL2RhdGEnLFxuICAgIH0sXG4gXG4gICAgXG5cbiAgXTtcblxuICAgIC8vIHtcbiAgICAvLyAgIGlkOiAnJyxcbiAgICAvLyAgIGxhYmVsOiAnJyxcbiAgICAvLyAgIHJlcG86ICcnLFxuICAgIC8vICAgcGFyc2VyOiAnJyxcbiAgICAvLyAgIHNvdXJjZVVybDogJycsXG4gICAgLy8gICBjYXRlZ29yaWVzOiBbJyddLFxuICAgIC8vIH0sICAiLCAiaW1wb3J0IHsgQXBwLCBub3JtYWxpemVQYXRoIH0gZnJvbSBcIm9ic2lkaWFuXCI7XG5pbXBvcnQgdHlwZSB7IEVkaXRpb24gfSBmcm9tIFwiLi4vLi4vZWRpdGlvbnNcIjtcbmltcG9ydCB7IHBhcnNlU3BlbGxzRmlsZSB9IGZyb20gXCIuL3NwZWxsc1wiO1xuaW1wb3J0IHsgcGFyc2VCZXN0aWFyeUZpbGUgfSBmcm9tIFwiLi9iZXN0aWFyeVwiO1xuaW1wb3J0IHsgcGFyc2VJdGVtc0ZpbGUgfSBmcm9tIFwiLi9pdGVtc1wiO1xuaW1wb3J0IHsgcGFyc2VTcGVjaWVzRmlsZSB9IGZyb20gXCIuL3NwZWNpZXNcIjtcbmltcG9ydCB7IHBhcnNlQ2xhc3NGaWxlIH0gZnJvbSBcIi4vY2xhc3Nlc1wiO1xuaW1wb3J0IHsgcGFyc2VBY3Rpb25zRmlsZSwgcGFyc2VDb25kaXRpb25zRGlzZWFzZXNGaWxlLCBwYXJzZVNlbnNlc0ZpbGUsIHBhcnNlU2tpbGxzRmlsZSB9IGZyb20gXCIuL3J1bGVzXCI7XG5pbXBvcnQgeyBwYXJzZUZlYXRzRmlsZSB9IGZyb20gXCIuL2ZlYXRzXCI7XG5pbXBvcnQgeyBwYXJzZUJhY2tncm91bmRzRmlsZSB9IGZyb20gXCIuL2JhY2tncm91bmRzXCI7XG5pbXBvcnQgeyBURmlsZSB9IGZyb20gXCJvYnNpZGlhblwiO1xuXG5cbi8vIFx1MjAxNCBHaXRIdWIgbGlzdGluZ3MgXHUyMDE0XG5hc3luYyBmdW5jdGlvbiBsaXN0U3BlbGxGaWxlc0Zyb21HaXRIdWIocmVwbzogc3RyaW5nKTogUHJvbWlzZTxzdHJpbmdbXT4ge1xuICBjb25zdCB1cmwgPSBgaHR0cHM6Ly9hcGkuZ2l0aHViLmNvbS9yZXBvcy8ke3JlcG99L2NvbnRlbnRzL2RhdGEvc3BlbGxzYDtcbiAgY29uc3QgcmVzID0gYXdhaXQgZmV0Y2godXJsKTtcbiAgY29uc3QgZGF0YSA9IChhd2FpdCByZXMuanNvbigpKSBhcyBBcnJheTx7IG5hbWU6IHN0cmluZzsgdHlwZTogc3RyaW5nIH0+O1xuICByZXR1cm4gZGF0YVxuICAgIC5maWx0ZXIoaXRlbSA9PiBpdGVtLnR5cGUgPT09IFwiZmlsZVwiICYmIGl0ZW0ubmFtZS5zdGFydHNXaXRoKFwic3BlbGxzLVwiKSAmJiBpdGVtLm5hbWUuZW5kc1dpdGgoXCIuanNvblwiKSlcbiAgICAubWFwKGl0ZW0gPT4gaXRlbS5uYW1lKTtcbn1cblxuYXN5bmMgZnVuY3Rpb24gbGlzdEJlc3RpYXJ5RmlsZXNGcm9tR2l0SHViKHJlcG86IHN0cmluZyk6IFByb21pc2U8c3RyaW5nW10+IHtcbiAgY29uc3QgdXJsID0gYGh0dHBzOi8vYXBpLmdpdGh1Yi5jb20vcmVwb3MvJHtyZXBvfS9jb250ZW50cy9kYXRhL2Jlc3RpYXJ5YDtcbiAgY29uc3QgcmVzID0gYXdhaXQgZmV0Y2godXJsKTtcbiAgY29uc3QgbGlzdCA9IChhd2FpdCByZXMuanNvbigpKSBhcyBBcnJheTx7IG5hbWU6IHN0cmluZzsgdHlwZTogc3RyaW5nIH0+O1xuICBjb25zdCBDT1JFX1NPVVJDRVMgPSBbXG4gICAgXCJiZXN0aWFyeS1waGIuanNvblwiLCBcImJlc3RpYXJ5LW1tLmpzb25cIiwgXCJiZXN0aWFyeS1kbWcuanNvblwiLFxuICAgIFwiYmVzdGlhcnkteGdlLmpzb25cIiwgXCJiZXN0aWFyeS12Z20uanNvblwiLCBcImJlc3RpYXJ5LXRjZS5qc29uXCIsXG4gICAgXCJiZXN0aWFyeS1lZ3cuanNvblwiLCBcImJlc3RpYXJ5LWVybHcuanNvblwiLCBcImJlc3RpYXJ5LW10Zi5qc29uXCIsXG4gICAgXCJiZXN0aWFyeS12cmdyLmpzb25cIiwgXCJiZXN0aWFyeS1jb3MuanNvblwiLCBcImJlc3RpYXJ5LW9vdGEuanNvblwiLFxuICAgIFwiYmVzdGlhcnktcG90YS5qc29uXCIsIFwiYmVzdGlhcnktaG90ZHEuanNvblwiLCBcImJlc3RpYXJ5LXJvdC5qc29uXCIsXG4gICAgXCJiZXN0aWFyeS1za3QuanNvblwiLCBcImJlc3RpYXJ5LXRmdHlwLmpzb25cIiwgXCJiZXN0aWFyeS10b2EuanNvblwiXG4gIF07XG4gIHJldHVybiBsaXN0XG4gICAgLmZpbHRlcihpdGVtID0+IGl0ZW0udHlwZSA9PT0gXCJmaWxlXCIgJiYgQ09SRV9TT1VSQ0VTLmluY2x1ZGVzKGl0ZW0ubmFtZSkpXG4gICAgLm1hcChpdGVtID0+IGl0ZW0ubmFtZSk7XG59XG5cbmNvbnN0IElURU1fSlNPTl9GSUxFUyA9IFtcbiAgXCJpdGVtcy1iYXNlLmpzb25cIixcbiAgXCJpdGVtcy5qc29uXCIsXG4gIFwib2JqZWN0cy5qc29uXCIsXG4gIFwidmVoaWNsZXMuanNvblwiLFxuICBcImRlY2tzLmpzb25cIixcbl07XG5cbmFzeW5jIGZ1bmN0aW9uIGxpc3RJdGVtRmlsZXNGcm9tR2l0SHViKHJlcG86IHN0cmluZyk6IFByb21pc2U8c3RyaW5nW10+IHtcbiAgY29uc3QgdXJsID0gYGh0dHBzOi8vYXBpLmdpdGh1Yi5jb20vcmVwb3MvJHtyZXBvfS9jb250ZW50cy9kYXRhYDtcbiAgY29uc3QgcmVzID0gYXdhaXQgZmV0Y2godXJsKTtcbiAgY29uc3QgZGF0YSA9IChhd2FpdCByZXMuanNvbigpKSBhcyBBcnJheTx7IG5hbWU6IHN0cmluZzsgdHlwZTogc3RyaW5nIH0+O1xuICByZXR1cm4gZGF0YVxuICAgIC5maWx0ZXIoaXRlbSA9PiBpdGVtLnR5cGUgPT09IFwiZmlsZVwiICYmIElURU1fSlNPTl9GSUxFUy5pbmNsdWRlcyhpdGVtLm5hbWUpKVxuICAgIC5tYXAoaXRlbSA9PiBpdGVtLm5hbWUpO1xufVxuXG5hc3luYyBmdW5jdGlvbiBsaXN0Q2xhc3NGaWxlc0Zyb21HaXRIdWIocmVwbzogc3RyaW5nKTogUHJvbWlzZTxzdHJpbmdbXT4ge1xuICBjb25zdCB1cmwgPSBgaHR0cHM6Ly9hcGkuZ2l0aHViLmNvbS9yZXBvcy8ke3JlcG99L2NvbnRlbnRzL2RhdGEvY2xhc3NgO1xuICBjb25zdCByZXMgPSBhd2FpdCBmZXRjaCh1cmwpO1xuICBjb25zdCBsaXN0aW5nID0gKGF3YWl0IHJlcy5qc29uKCkpIGFzIEFycmF5PHsgbmFtZTogc3RyaW5nOyB0eXBlOiBzdHJpbmcgfT47XG4gIHJldHVybiBsaXN0aW5nXG4gICAgLmZpbHRlcihpdGVtID0+XG4gICAgICBpdGVtLnR5cGUgPT09IFwiZmlsZVwiICYmXG4gICAgICBpdGVtLm5hbWUuc3RhcnRzV2l0aChcImNsYXNzLVwiKSAmJlxuICAgICAgaXRlbS5uYW1lLmVuZHNXaXRoKFwiLmpzb25cIilcbiAgICApXG4gICAgLm1hcChpdGVtID0+IGl0ZW0ubmFtZSk7XG59XG5cbi8vIFx1MjAxNCBlbnN1cmUgdGhlIHZhdWx0IGZvbGRlciBleGlzdHMgXHUyMDE0XG5hc3luYyBmdW5jdGlvbiBlbnN1cmVGb2xkZXIoYXBwOiBBcHAsIGZvbGRlclBhdGg6IHN0cmluZykge1xuICBjb25zdCBwYXJ0cyA9IGZvbGRlclBhdGguc3BsaXQoXCIvXCIpO1xuICBsZXQgY3VyciA9IFwiXCI7XG4gIGZvciAoY29uc3QgcCBvZiBwYXJ0cykge1xuICAgIGN1cnIgPSBjdXJyID8gYCR7Y3Vycn0vJHtwfWAgOiBwO1xuICAgIHRyeSB7IGF3YWl0IGFwcC52YXVsdC5jcmVhdGVGb2xkZXIoY3Vycik7IH1cbiAgICBjYXRjaCB7fSAvLyBhbHJlYWR5IGV4aXN0c1xuICB9XG59XG5cbi8vIFx1MjAxNCB0aGUgb25lIGVudHJ5LXBvaW50IHRoYXQgeW91ciB0b3AtbGV2ZWwgY2FsbHMgXHUyMDE0XG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gaW1wb3J0RWRpdGlvbkRhdGEocGFyYW1zOiB7XG4gIGFwcDogQXBwO1xuICBlZGl0aW9uOiBFZGl0aW9uO1xuICB0YXJnZXRQYXRoOiBzdHJpbmc7XG59KSB7XG4gIGNvbnN0IHsgYXBwLCBlZGl0aW9uLCB0YXJnZXRQYXRoIH0gPSBwYXJhbXM7XG4gIGNvbnN0IHJlcG8gPSBlZGl0aW9uLnJlcG8gPz8gXCJcIjtcblxuICAvLyBcdUQ4M0RcdUREMzkgU1BFTExTXG4gIHtcbiAgICBjb25zdCBzcGVsbEZpbGVzID0gYXdhaXQgbGlzdFNwZWxsRmlsZXNGcm9tR2l0SHViKHJlcG8pO1xuICAgIGZvciAoY29uc3QgZmlsZU5hbWUgb2Ygc3BlbGxGaWxlcykge1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgcmVzICA9IGF3YWl0IGZldGNoKGAke2VkaXRpb24uc291cmNlVXJsfS9zcGVsbHMvJHtmaWxlTmFtZX1gKTtcbiAgICAgICAgY29uc3QganNvbiA9IGF3YWl0IHJlcy5qc29uKCk7XG4gICAgICAgIGNvbnN0IGZpbGVzID0gcGFyc2VTcGVsbHNGaWxlKGpzb24sIGVkaXRpb24uaWQpO1xuICAgICAgICBmb3IgKGNvbnN0IG1kIG9mIGZpbGVzKSB7XG4gICAgICAgICAgY29uc3QgZnVsbFBhdGggPSBub3JtYWxpemVQYXRoKGAke3RhcmdldFBhdGh9L1NwZWxscy8ke21kLnBhdGh9YCk7XG4gICAgICAgICAgY29uc3QgZm9sZGVyICAgPSBmdWxsUGF0aC5zcGxpdChcIi9cIikuc2xpY2UoMCwgLTEpLmpvaW4oXCIvXCIpO1xuICAgICAgICAgIGF3YWl0IGVuc3VyZUZvbGRlcihhcHAsIGZvbGRlcik7XG4gICAgICAgICAgYXdhaXQgYXBwLnZhdWx0LmFkYXB0ZXIud3JpdGUoZnVsbFBhdGgsIG1kLmNvbnRlbnQpO1xuICAgICAgICB9XG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGNvbnNvbGUud2FybihgRmFpbGVkIHRvIGltcG9ydCBzcGVsbCAke2ZpbGVOYW1lfTpgLCBlKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvLyBcdUQ4M0RcdUREMzkgQkVTVElBUllcbiAge1xuICAgIGNvbnN0IGJlc3RpYXJ5RmlsZXMgPSBhd2FpdCBsaXN0QmVzdGlhcnlGaWxlc0Zyb21HaXRIdWIocmVwbyk7XG4gICAgZm9yIChjb25zdCBmaWxlTmFtZSBvZiBiZXN0aWFyeUZpbGVzKSB7XG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCByZXMgICAgPSBhd2FpdCBmZXRjaChgJHtlZGl0aW9uLnNvdXJjZVVybH0vYmVzdGlhcnkvJHtmaWxlTmFtZX1gKTtcbiAgICAgICAgY29uc3QganNvbiAgID0gYXdhaXQgcmVzLmpzb24oKTtcbiAgICAgICAgY29uc3QgcGFyc2VkID0gcGFyc2VCZXN0aWFyeUZpbGUoanNvbiwgZWRpdGlvbi5pZCk7XG4gICAgICAgIGZvciAoY29uc3QgbWQgb2YgcGFyc2VkKSB7XG4gICAgICAgICAgY29uc3QgZnVsbFBhdGggPSBub3JtYWxpemVQYXRoKGAke3RhcmdldFBhdGh9L0Jlc3RpYXJ5LyR7bWQucGF0aH1gKTtcbiAgICAgICAgICBjb25zdCBmb2xkZXIgICA9IGZ1bGxQYXRoLnNwbGl0KFwiL1wiKS5zbGljZSgwLCAtMSkuam9pbihcIi9cIik7XG4gICAgICAgICAgYXdhaXQgZW5zdXJlRm9sZGVyKGFwcCwgZm9sZGVyKTtcbiAgICAgICAgICBhd2FpdCBhcHAudmF1bHQuYWRhcHRlci53cml0ZShmdWxsUGF0aCwgbWQuY29udGVudCk7XG4gICAgICAgIH1cbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgY29uc29sZS53YXJuKGBGYWlsZWQgdG8gaW1wb3J0IGJlc3RpYXJ5ICR7ZmlsZU5hbWV9OmAsIGUpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8vIFx1RDgzRFx1REQzOSBJVEVNU1xuICB7XG4gICAgY29uc3QgaXRlbUZpbGVzID0gYXdhaXQgbGlzdEl0ZW1GaWxlc0Zyb21HaXRIdWIocmVwbyk7XG4gICAgZm9yIChjb25zdCBmbiBvZiBpdGVtRmlsZXMpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHJlcyAgPSBhd2FpdCBmZXRjaChgJHtlZGl0aW9uLnNvdXJjZVVybH0vJHtmbn1gKTtcbiAgICAgICAgY29uc3QganNvbiA9IGF3YWl0IHJlcy5qc29uKCk7XG4gICAgICAgIGNvbnN0IG1kRmlsZXMgPSBwYXJzZUl0ZW1zRmlsZShqc29uLCBlZGl0aW9uLmlkKTtcbiAgICAgICAgZm9yIChjb25zdCBtZCBvZiBtZEZpbGVzKSB7XG4gICAgICAgICAgY29uc3QgZnVsbFBhdGggPSBub3JtYWxpemVQYXRoKGAke3RhcmdldFBhdGh9LyR7bWQucGF0aH1gKTtcbiAgICAgICAgICBjb25zdCBmb2xkZXIgICA9IGZ1bGxQYXRoLnNwbGl0KFwiL1wiKS5zbGljZSgwLCAtMSkuam9pbihcIi9cIik7XG4gICAgICAgICAgYXdhaXQgZW5zdXJlRm9sZGVyKGFwcCwgZm9sZGVyKTtcbiAgICAgICAgICBhd2FpdCBhcHAudmF1bHQuYWRhcHRlci53cml0ZShmdWxsUGF0aCwgbWQuY29udGVudCk7XG4gICAgICAgIH1cbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgY29uc29sZS53YXJuKGBGYWlsZWQgdG8gaW1wb3J0IGl0ZW1zIGZyb20gJHtmbn06YCwgZSk7XG4gICAgICB9XG4gICAgfVxuICB9XG4vLyBcdUQ4M0RcdUREMzkgU1BFQ0lFU1xue1xuICBjb25zdCByZXMgID0gYXdhaXQgZmV0Y2goYCR7ZWRpdGlvbi5zb3VyY2VVcmx9L3JhY2VzLmpzb25gKTtcbiAgY29uc3QganNvbiA9IGF3YWl0IHJlcy5qc29uKCk7XG4gIGNvbnN0IG1kRmlsZXMgPSBwYXJzZVNwZWNpZXNGaWxlKGpzb24sIGVkaXRpb24uaWQpO1xuICBmb3IgKGNvbnN0IG1kIG9mIG1kRmlsZXMpIHtcbiAgICBjb25zdCBmdWxsUGF0aCA9IG5vcm1hbGl6ZVBhdGgoYCR7dGFyZ2V0UGF0aH0vUGxheWVyIEJ1aWxkLyR7bWQucGF0aH1gKTtcbiAgICBhd2FpdCBlbnN1cmVGb2xkZXIoYXBwLCBmdWxsUGF0aC5zcGxpdChcIi9cIikuc2xpY2UoMCwgLTEpLmpvaW4oXCIvXCIpKTtcbiAgICBhd2FpdCBhcHAudmF1bHQuYWRhcHRlci53cml0ZShmdWxsUGF0aCwgbWQuY29udGVudCk7XG4gIH1cbn1cbi8vIFx1RDgzRFx1REQzOSBGRVRDSCBPUFRJT05BTCBGRUFUVVJFUyBKU09OXG5sZXQgb3B0aW9uYWxGZWF0dXJlczogYW55W10gPSBbXTtcbnRyeSB7XG4gIGNvbnN0IHJlcyAgPSBhd2FpdCBmZXRjaChgJHtlZGl0aW9uLnNvdXJjZVVybH0vb3B0aW9uYWxmZWF0dXJlcy5qc29uYCk7XG4gIGNvbnN0IHJhdyAgPSBhd2FpdCByZXMuanNvbigpO1xuICBvcHRpb25hbEZlYXR1cmVzID0gQXJyYXkuaXNBcnJheShyYXcub3B0aW9uYWxmZWF0dXJlKVxuICAgID8gcmF3Lm9wdGlvbmFsZmVhdHVyZVxuICAgIDogW107XG59IGNhdGNoIChlKSB7XG4gIGNvbnNvbGUud2FybihcIkZhaWxlZCB0byBpbXBvcnQgb3B0aW9uYWxmZWF0dXJlcy5qc29uOlwiLCBlKTtcbn1cblxuLy8gXHVEODNEXHVERDM5IENMQVNTRVNcbntcbiAgY29uc3QgY2xhc3NGaWxlcyA9IGF3YWl0IGxpc3RDbGFzc0ZpbGVzRnJvbUdpdEh1YihyZXBvKTtcbiAgZm9yIChjb25zdCBmaWxlTmFtZSBvZiBjbGFzc0ZpbGVzKSB7XG4gICAgdHJ5IHtcbiAgICAgIC8vIGZldGNoIHRoZSByYXcgY2xhc3MgSlNPTlxuICAgICAgY29uc3QgcmVzICAgID0gYXdhaXQgZmV0Y2goYCR7ZWRpdGlvbi5zb3VyY2VVcmx9L2NsYXNzLyR7ZmlsZU5hbWV9YCk7XG4gICAgICBjb25zdCBqc29uICAgPSBhd2FpdCByZXMuanNvbigpO1xuXG4gICAgICAvLyBwYXJzZSBpbnRvIG9uZSBvciBtb3JlIG1hcmtkb3duIGZpbGVzXG4gICAgICBjb25zdCBtZEZpbGVzID0gcGFyc2VDbGFzc0ZpbGUoXG4gICAgICAgIGpzb24sXG4gICAgICAgIGVkaXRpb24uaWQsXG4gICAgICAgIGZpbGVOYW1lLFxuICAgICAgICBvcHRpb25hbEZlYXR1cmVzXG4gICAgICApO1xuICAgICAgZm9yIChjb25zdCBtZCBvZiBtZEZpbGVzKSB7XG4gICAgICAgIGNvbnN0IGZ1bGxQYXRoID0gbm9ybWFsaXplUGF0aChgJHt0YXJnZXRQYXRofS9QbGF5ZXIgQnVpbGQvJHttZC5wYXRofWApO1xuICAgICAgICAvLyAxKSBlbnN1cmUgdGhlIGZvbGRlciBleGlzdHNcbiAgICAgICAgYXdhaXQgZW5zdXJlRm9sZGVyKGFwcCwgZnVsbFBhdGguc3BsaXQoXCIvXCIpLnNsaWNlKDAsIC0xKS5qb2luKFwiL1wiKSk7XG5cbiAgICAgICAgLy8gMikgd3JpdGUgdmlhIE9ic2lkaWFuXHUyMDE5cyBBUEkgc28gbm90ZXMgcmVmcmVzaFxuICAgICAgICBjb25zdCBleGlzdGluZyA9IGFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoZnVsbFBhdGgpO1xuICAgICAgICBpZiAoZXhpc3RpbmcgaW5zdGFuY2VvZiBURmlsZSkge1xuICAgICAgICAgIC8vIE92ZXJ3cml0ZSBhbiBleGlzdGluZyBub3RlIGFuZCBmaXJlIHRoZSBjaGFuZ2UgZXZlbnRcbiAgICAgICAgICBhd2FpdCBhcHAudmF1bHQubW9kaWZ5KGV4aXN0aW5nLCBtZC5jb250ZW50KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBDcmVhdGUgYSBicmFuZC1uZXcgbm90ZSAoYWxzbyBmaXJlcyB0aGUgY2hhbmdlIGV2ZW50KVxuICAgICAgICAgIGF3YWl0IGFwcC52YXVsdC5jcmVhdGUoZnVsbFBhdGgsIG1kLmNvbnRlbnQpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgY29uc29sZS53YXJuKGBGYWlsZWQgdG8gaW1wb3J0IGNsYXNzICR7ZmlsZU5hbWV9OmAsIGUpO1xuICAgIH1cbiAgfVxufVxuXG5cbiAvLyBcdUQ4M0RcdUREMzkgUlVMRVM6IEFDVElPTlNcbiAge1xuICAgIHRyeSB7XG5cbiAgICAgIGNvbnN0IHJlcyAgPSBhd2FpdCBmZXRjaChgJHtlZGl0aW9uLnNvdXJjZVVybH0vYWN0aW9ucy5qc29uYCk7XG4gICAgICBjb25zdCBqc29uID0gYXdhaXQgcmVzLmpzb24oKTtcbiAgICBcbiAgICAgIGNvbnN0IG1kRmlsZXMgPSBwYXJzZUFjdGlvbnNGaWxlKGpzb24sIGVkaXRpb24uaWQpO1xuICAgIFxuICAgICAgZm9yIChjb25zdCBtZCBvZiBtZEZpbGVzKSB7XG4gICAgICAgIGNvbnN0IGZ1bGxQYXRoID0gbm9ybWFsaXplUGF0aChcbiAgICAgICAgICBgJHt0YXJnZXRQYXRofS8ke21kLnBhdGh9YFxuICAgICAgICApO1xuICAgICAgICBjb25zdCBmb2xkZXIgPSBmdWxsUGF0aC5zcGxpdChcIi9cIikuc2xpY2UoMCwgLTEpLmpvaW4oXCIvXCIpO1xuXG4gICAgICAgIGF3YWl0IGVuc3VyZUZvbGRlcihhcHAsIGZvbGRlcik7XG4gICAgICAgIGF3YWl0IGFwcC52YXVsdC5hZGFwdGVyLndyaXRlKGZ1bGxQYXRoLCBtZC5jb250ZW50KTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICBjb25zb2xlLndhcm4oXCJGYWlsZWQgdG8gaW1wb3J0IGFjdGlvbnMuanNvbjpcIiwgZSk7XG4gICAgfVxuICB9XG5cblxuICAgIC8vIFx1RDgzRFx1REQzOSBSVUxFUzogQ09ORElUSU9OUyAmIERJU0VBU0VTXG4gIHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgcmVzICA9IGF3YWl0IGZldGNoKGAke2VkaXRpb24uc291cmNlVXJsfS9jb25kaXRpb25zZGlzZWFzZXMuanNvbmApO1xuICAgICAgY29uc3QganNvbiA9IGF3YWl0IHJlcy5qc29uKCk7XG4gICAgICBjb25zdCBtZEZpbGVzID0gcGFyc2VDb25kaXRpb25zRGlzZWFzZXNGaWxlKGpzb24sIGVkaXRpb24uaWQpO1xuICAgICAgZm9yIChjb25zdCBtZCBvZiBtZEZpbGVzKSB7XG4gICAgICAgIGNvbnN0IGZ1bGxQYXRoID0gbm9ybWFsaXplUGF0aChcbiAgICAgICAgICBgJHt0YXJnZXRQYXRofS8ke21kLnBhdGh9YFxuICAgICAgICApO1xuICAgICAgICBjb25zdCBmb2xkZXIgPSBmdWxsUGF0aC5zcGxpdChcIi9cIikuc2xpY2UoMCwgLTEpLmpvaW4oXCIvXCIpO1xuICAgICAgICBhd2FpdCBlbnN1cmVGb2xkZXIoYXBwLCBmb2xkZXIpO1xuICAgICAgICBhd2FpdCBhcHAudmF1bHQuYWRhcHRlci53cml0ZShmdWxsUGF0aCwgbWQuY29udGVudCk7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgY29uc29sZS53YXJuKFwiRmFpbGVkIHRvIGltcG9ydCBjb25kaXRpb25zZGlzZWFzZXMuanNvbjpcIiwgZSk7XG4gICAgfVxuICB9XG5cbiAgIC8vIFx1RDgzRFx1REQzOSBSVUxFUzogU0VOU0VTXG4gIHtcbiAgICB0cnkge1xuXG4gICAgICBjb25zdCByZXMgID0gYXdhaXQgZmV0Y2goYCR7ZWRpdGlvbi5zb3VyY2VVcmx9L3NlbnNlcy5qc29uYCk7XG4gICAgICBjb25zdCBqc29uID0gYXdhaXQgcmVzLmpzb24oKTtcbiAgICBcbiAgICAgIGNvbnN0IG1kRmlsZXMgPSBwYXJzZVNlbnNlc0ZpbGUoanNvbiwgZWRpdGlvbi5pZCk7XG4gICAgXG4gICAgICBmb3IgKGNvbnN0IG1kIG9mIG1kRmlsZXMpIHtcbiAgICAgICAgY29uc3QgZnVsbFBhdGggPSBub3JtYWxpemVQYXRoKFxuICAgICAgICAgIGAke3RhcmdldFBhdGh9LyR7bWQucGF0aH1gXG4gICAgICAgICk7XG4gICAgICAgIGNvbnN0IGZvbGRlciA9IGZ1bGxQYXRoLnNwbGl0KFwiL1wiKS5zbGljZSgwLCAtMSkuam9pbihcIi9cIik7XG5cbiAgICAgICAgYXdhaXQgZW5zdXJlRm9sZGVyKGFwcCwgZm9sZGVyKTtcbiAgICAgICAgYXdhaXQgYXBwLnZhdWx0LmFkYXB0ZXIud3JpdGUoZnVsbFBhdGgsIG1kLmNvbnRlbnQpO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIGNvbnNvbGUud2FybihcIkZhaWxlZCB0byBpbXBvcnQgc2Vuc2VzLmpzb246XCIsIGUpO1xuICAgIH1cbiAgfVxuXG4gICAgIC8vIFx1RDgzRFx1REQzOSBSVUxFUzogU0tJTExTXG4gIHtcbiAgICB0cnkge1xuXG4gICAgICBjb25zdCByZXMgID0gYXdhaXQgZmV0Y2goYCR7ZWRpdGlvbi5zb3VyY2VVcmx9L3NraWxscy5qc29uYCk7XG4gICAgICBjb25zdCBqc29uID0gYXdhaXQgcmVzLmpzb24oKTtcbiAgICBcbiAgICAgIGNvbnN0IG1kRmlsZXMgPSBwYXJzZVNraWxsc0ZpbGUoanNvbiwgZWRpdGlvbi5pZCk7XG4gICAgXG4gICAgICBmb3IgKGNvbnN0IG1kIG9mIG1kRmlsZXMpIHtcbiAgICAgICAgY29uc3QgZnVsbFBhdGggPSBub3JtYWxpemVQYXRoKFxuICAgICAgICAgIGAke3RhcmdldFBhdGh9LyR7bWQucGF0aH1gXG4gICAgICAgICk7XG4gICAgICAgIGNvbnN0IGZvbGRlciA9IGZ1bGxQYXRoLnNwbGl0KFwiL1wiKS5zbGljZSgwLCAtMSkuam9pbihcIi9cIik7XG5cbiAgICAgICAgYXdhaXQgZW5zdXJlRm9sZGVyKGFwcCwgZm9sZGVyKTtcbiAgICAgICAgYXdhaXQgYXBwLnZhdWx0LmFkYXB0ZXIud3JpdGUoZnVsbFBhdGgsIG1kLmNvbnRlbnQpO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIGNvbnNvbGUud2FybihcIkZhaWxlZCB0byBpbXBvcnQgc2tpbGxzLmpzb246XCIsIGUpO1xuICAgIH1cbiAgfVxuXG4gICAvLyBcdUQ4M0RcdUREMzkgRkVBVFNcbiAge1xuICAgIHRyeSB7XG5cbiAgICAgIGNvbnN0IHJlcyAgPSBhd2FpdCBmZXRjaChgJHtlZGl0aW9uLnNvdXJjZVVybH0vZmVhdHMuanNvbmApO1xuICAgICAgY29uc3QganNvbiA9IGF3YWl0IHJlcy5qc29uKCk7XG4gICAgXG4gICAgICBjb25zdCBtZEZpbGVzID0gcGFyc2VGZWF0c0ZpbGUoanNvbiwgZWRpdGlvbi5pZCk7XG4gICAgXG4gICAgICBmb3IgKGNvbnN0IG1kIG9mIG1kRmlsZXMpIHtcbiAgICAgICAgY29uc3QgZnVsbFBhdGggPSBub3JtYWxpemVQYXRoKFxuICAgICAgICAgIGAke3RhcmdldFBhdGh9LyR7bWQucGF0aH1gXG4gICAgICAgICk7XG4gICAgICAgIGNvbnN0IGZvbGRlciA9IGZ1bGxQYXRoLnNwbGl0KFwiL1wiKS5zbGljZSgwLCAtMSkuam9pbihcIi9cIik7XG5cbiAgICAgICAgYXdhaXQgZW5zdXJlRm9sZGVyKGFwcCwgZm9sZGVyKTtcbiAgICAgICAgYXdhaXQgYXBwLnZhdWx0LmFkYXB0ZXIud3JpdGUoZnVsbFBhdGgsIG1kLmNvbnRlbnQpO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIGNvbnNvbGUud2FybihcIkZhaWxlZCB0byBpbXBvcnQgZmVhdHMuanNvbjpcIiwgZSk7XG4gICAgfVxuICB9XG5cbi8vIFx1RDgzRFx1REQzOSBCQUNLR1JPVU5EU1xue1xuICB0cnkge1xuICAgIGNvbnN0IHJlcyAgPSBhd2FpdCBmZXRjaChgJHtlZGl0aW9uLnNvdXJjZVVybH0vYmFja2dyb3VuZHMuanNvbmApO1xuICAgIGNvbnN0IGpzb24gPSBhd2FpdCByZXMuanNvbigpO1xuXG4gICAgY29uc3QgbWRGaWxlcyA9IHBhcnNlQmFja2dyb3VuZHNGaWxlKGpzb24sIGVkaXRpb24uaWQpO1xuXG4gICAgZm9yIChjb25zdCBtZCBvZiBtZEZpbGVzKSB7XG4gICAgICAvLyBtZC5wYXRoIGlzIFwiUGxheWVyIEJ1aWxkL0JhY2tncm91bmRzLzxOYW1lPi5tZFwiXG4gICAgICBjb25zdCBmdWxsUGF0aCA9IG5vcm1hbGl6ZVBhdGgoYCR7dGFyZ2V0UGF0aH0vJHttZC5wYXRofWApO1xuICAgICAgY29uc3QgZm9sZGVyICAgPSBmdWxsUGF0aC5zcGxpdChcIi9cIikuc2xpY2UoMCwgLTEpLmpvaW4oXCIvXCIpO1xuXG4gICAgICBhd2FpdCBlbnN1cmVGb2xkZXIoYXBwLCBmb2xkZXIpO1xuICAgICAgYXdhaXQgYXBwLnZhdWx0LmFkYXB0ZXIud3JpdGUoZnVsbFBhdGgsIG1kLmNvbnRlbnQpO1xuICAgIH1cbiAgfSBjYXRjaCAoZSkge1xuICAgIGNvbnNvbGUud2FybihcIkZhaWxlZCB0byBpbXBvcnQgYmFja2dyb3VuZHMuanNvbjpcIiwgZSk7XG4gIH1cbn1cblxufSIsICIvLyBoZWxwZXJzL3NvdXJjZU1hcC50c1xuXG4vLyBNYXAgb2YgNWUgc291cmNlIGFiYnJldmlhdGlvbnMgdG8gdGhlaXIgZnVsbCB0aXRsZXNcbmNvbnN0IFNPVVJDRV9OQU1FX01BUDogUmVjb3JkPHN0cmluZywgc3RyaW5nPiA9IHtcbiAgLy8gQ29yZSBydWxlYm9va3NcbiAgUEhCOiBcIlBsYXllcidzIEhhbmRib29rXCIsXG4gIE1NOiAgXCJNb25zdGVyIE1hbnVhbFwiLFxuICBETUc6IFwiRHVuZ2VvbiBNYXN0ZXIncyBHdWlkZVwiLFxuXG4gIC8vIE9mZmljaWFsIGV4cGFuc2lvbnMgJiBhZHZlbnR1cmUgbW9kdWxlc1xuICBDb1M6ICBcIkN1cnNlIG9mIFN0cmFoZFwiLFxuICBPb3RBOiBcIk91dCBvZiB0aGUgQWJ5c3NcIixcbiAgUG90QTogXCJQcmluY2VzIG9mIHRoZSBBcG9jYWx5cHNlXCIsXG4gIEhvdERROiBcIkhvYXJkIG9mIHRoZSBEcmFnb24gUXVlZW5cIixcbiAgUm9UOiAgXCJSaXNlIG9mIFRpYW1hdFwiLFxuICBTS1Q6ICBcIlN0b3JtIEtpbmcncyBUaHVuZGVyXCIsXG4gIFRmdFlQOlwiVGFsZXMgZnJvbSB0aGUgWWF3bmluZyBQb3J0YWxcIixcbiAgVG9BOiAgXCJUb21iIG9mIEFubmloaWxhdGlvblwiLFxuXG4gIC8vIFN1cHBsZW1lbnRhbCBndWlkZXNcbiAgWEdFOiBcIlhhbmF0aGFyJ3MgR3VpZGUgdG8gRXZlcnl0aGluZ1wiLFxuICBWR006IFwiVm9sbydzIEd1aWRlIHRvIE1vbnN0ZXJzXCIsXG4gIFRDRTogXCJUYXNoYSdzIENhdWxkcm9uIG9mIEV2ZXJ5dGhpbmdcIixcbiAgRUdXOiBcIkViZXJyb246IFJpc2luZyBmcm9tIHRoZSBMYXN0IFdhclwiLFxuICBFUkxXOlwiRXhwbG9yZXIncyBHdWlkZSB0byBXaWxkZW1vdW50XCIsXG4gIE1URjogXCJNb25zdGVycyBvZiB0aGUgTXVsdGl2ZXJzZVwiLFxuICBWUkdSOlwiVmFuIFJpY2h0ZW4ncyBHdWlkZSB0byBSYXZlbmxvZnRcIixcblxuICAvLyBBZGRpdGlvbmFsIHNvdXJjZWJvb2tzXG4gIEFBRzogICAgICBcIkFzdHJhbCBBZHZlbnR1cmVyXHUyMDE5cyBHdWlkZVwiLFxuICBBSTogICAgICAgXCJBY3F1aXNpdGlvbnMgSW5jb3Jwb3JhdGVkXCIsXG4gIEFpdEZSQVZGVDpcIkFkdmVudHVyZXMgaW4gdGhlIEZvcmdvdHRlbiBSZWFsbXM6IEEgVmlzdWFsIEZpZWxkIFRlc3RcIixcbiAgQk1UOiAgICAgIFwiQmlnIE1vbnN0ZXIgVG9tZVwiLFxuICBEb0RrOiAgICAgXCJEcmFnb24gb2YgRGFya2tlZXBcIixcbiAgRlREOiAgICAgIFwiRml6YmFuXHUyMDE5cyBUcmVhc3VyeSBvZiBEcmFnb25zXCIsXG4gIEdHUjogICAgICBcIkd1aWxkbWFzdGVyXHUyMDE5cyBHdWlkZSB0byBSYXZuaWNhXCIsXG4gIEdITG9FOiAgICBcIkdob3N0cyBvZiB0aGUgSG9yaXpvbjogTGlnaHQgT3ZlciBFbGVuc2FyaWFcIixcbiAgSURSb3RGOiAgIFwiSWNld2luZCBEYWxlOiBSaW1lIG9mIHRoZSBGcm9zdG1haWRlblwiLFxuICBMTEs6ICAgICAgXCJMb3N0IExhYm9yYXRvcnkgb2YgS3dhbGlzaFwiLFxuICBTYXRPOiAgICAgXCJTYXBwaGlyZSBvZiBUcnV0aFwiLFxuICBTQ0M6ICAgICAgXCJTdHJpeGhhdmVuOiBDdXJyaWN1bHVtIG9mIENoYW9zXCIsXG4gIFREQ1NSOiAgICBcIlRoZSBEdW5nZW9uIENvYWNoXHUyMDE5cyBSdWxlYm9va1wiLFxuICBKdHRSQzogICAgXCJKb3VybmV5cyB0aHJvdWdoIHRoZSBSYWRpYW50IENpdGFkZWxcIixcbiAgXCJBaXRGUi1BVlRcIjpcIkFkdmVudHVyZXMgaW4gdGhlIEZvcmdvdHRlbiBSZWFsbXM6IEEgVmVyZGFudCBUb21iXCIsXG4gIFwiQWl0RlItRkNEXCI6XCJBZHZlbnR1cmVzIGluIHRoZSBGb3Jnb3R0ZW4gUmVhbG1zOiBGcm9tIEN5YW4gRGVwdGhzXCIsXG4gIFJNUjogICAgICBcIkR1bmdlb25zIGFuZCBEcmFnb25zOiBSaWNrIGFuZCBNb3J0eVwiLFxuICBTQ0FHOiAgICAgXCJTd29yZCBDb2FzdCBBZHZlbnR1cmVyJ3MgR3VpZGVcIixcbiAgRUVQQzogICAgIFwiRWxlbWVudGFsIEV2aWwgUGxheWVyJ3MgQ29tcGFuaW9uXCIsXG4gIE1PVDogICAgICBcIk15dGhpYyBPZHlzc2V5cyBvZiBUaGVyb3NcIixcbiAgV0J0VzogICAgIFwiVGhlIFdpbGQgQmV5b25kIHRoZSBXaXRjaGxpZ2h0XCIsXG4gIEJHRElBOiAgICBcIkJhbGR1cidzIEdhdGU6IERlc2NlbnQgSW50byBBdmVybnVzXCIsXG4gIFRvRlc6ICAgICBcIlR1cm4gb2YgRm9ydHVuZSdzIFdoZWVsXCIsXG4gIENvQTogICAgICBcIkNoYWlucyBvZiBBc21vZGV1c1wiLFxuICBDUkNvdE46ICAgXCJDcml0aWNhbCBSb2xlOiBDYWxsIG9mIHRoZSBOZXRoZXJkZWVwXCIsXG4gIFRvRDogICAgICBcIlR5cmFubnkgb2YgRHJhZ29uc1wiLFxuICBNUE1NOiAgICAgXCJNb3JkZW5rYWluZW4gUHJlc2VudHM6IE1vbnN0ZXJzIG9mIHRoZSBNdWx0aXZlcnNlXCIsXG4gIExvWDogICAgICBcIkxpZ2h0IG9mIFhhcnl4aXNcIixcbiAgUWZ0SVM6ICAgIFwiUXVlc3RzIGZyb20gdGhlIEluZmluaXRlIFN0YWlyY2FzZVwiLFxuICBXREg6ICAgICAgXCJXYXRlcmRlZXA6IERyYWdvbiBIZWlzdFwiLFxuICBXRE1NOiAgICAgXCJXYXRlcmRlZXA6IER1bmdlb24gb2YgdGhlIE1hZCBNYWdlXCIsXG4gIFBhQlRTTzogICBcIlBoYW5kZWx2ZXIgYW5kIEJlbG93OiBUaGUgU2hhdHRlcmVkIE9iZWxpc2tcIixcbiAgQ006ICAgICAgIFwiQ2FuZGxla2VlcCBNeXN0ZXJpZXNcIixcbiAgR29TOiAgICAgIFwiR2hvc3RzIG9mIFNhbHRtYXJzaFwiLFxuICBEU290RFE6ICAgXCJEcmFnb25sYW5jZTogU2hhZG93IG9mIHRoZSBEcmFnb24gUXVlZW5cIixcbiAgS2Z0R1Y6ICAgIFwiS2V5cyBmcm9tIHRoZSBHb2xkZW4gVmF1bHRcIixcbiAgU0RXOiAgICAgIFwiRXNzZW50aWFscyBLaXQ6IFNsZWVwaW5nIERyYWdvbidzIFdha2VcIixcbiAgRG9TSTogICAgIFwiRHJhZ29ucyBvZiBTdG9ybXdyZWNrIElzbGVcIixcbiAgR290U0Y6ICAgIFwiR2lhbnRzIG9mIHRoZSBTdGFyIEZvcmdlXCIsXG4gIERJUDogICAgICBcIkVzc2VudGlhbHMgS2l0OiBEcmFnb24gb2YgSWNlc3BpcmUgUGVha1wiLFxuICBTTFc6ICAgICAgXCJFc3NlbnRpYWxzIEtpdDogU3Rvcm0gTG9yZCdzIFdyYXRoXCIsXG4gIElNUjogICAgICBcIkluZmVybmFsIE1hY2hpbmUgUmVidWlsZFwiLFxuICBWRW9SOiAgICAgXCJWZWNuYTogRXZlIG9mIFJ1aW5cIixcbiAgUFNJOiAgICAgIFwiUGxhbmUgU2hpZnQ6IElubmlzdHJhZFwiLFxuICBBQVRNOiAgICAgXCJBZHZlbnR1cmUgQXRsYXM6IFRoZSBNb3J0dWFyeVwiLFxuICBQU1o6ICAgICAgXCJQbGFuZSBTaGlmdDogWmVuZGlrYXJcIixcbiAgREM6ICAgICAgIFwiRXNzZW50aWFscyBLaXQ6IERpdmluZSBDb250ZW50aW9uXCIsXG4gIExNb1A6ICAgICBcIkxvc3QgTWluZSBvZiBQaGFuZGVsdmVyXCIsXG4gIFJNQlJFOiAgICBcIlRoZSBMb3N0IER1bmdlb24gb2YgUmlja2VkbmVzczogQmlnIFJpY2sgRW5lcmd5XCIsXG4gIEhmdFQ6ICAgICBcIkh1bnQgZm9yIHRoZSBUaGVzc2FsaHlkcmFcIixcbiAgUFNYOiAgICAgIFwiUGxhbmUgU2hpZnQ6IEl4YWxhblwiLFxuICBIRlN0Q006ICAgXCJIZXJvZXMnIEZlYXN0OiBTYXZpbmcgdGhlIENoaWxkcmVucyBNZW51XCIsXG4gIFNqQTogICAgICBcIlNwZWxsamFtbWVyIEFjYWRlbXlcIixcbiAgTEs6ICAgICAgIFwiTGlnaHRuaW5nIEtlZXBcIixcbiAgUnRHOiAgICAgIFwiUmV0dXJuIHRvIHRoZSBHbG9yeVwiLFxuICBUVFA6ICAgICAgXCJUaGUgVG9ydGxlIFBhY2thZ2VcIixcbiAgTFI6ICAgICAgIFwiTG9jYXRoYWggUmlzaW5nXCIsXG4gIFBTQTogICAgICBcIlBsYW5lIFNoaWZ0OiBBbW9ua2hldFwiLFxuICBPR0E6ICAgICAgXCJPbmUgR3J1bmcgQWJvdmVcIixcbiAgXCJOUkgtVExUXCI6ICBcIk5lcmRzIFJlc3RvcmluZyBIYXJtb255OiBUaGUgTG9zdCBUb21iXCIsXG4gIFwiTlJILUFUXCI6ICAgXCJOZXJkcyBSZXN0b3JpbmcgSGFybW9ueTogQWR2ZW50dXJlIFRvZ2V0aGVyXCIsXG4gIEJHRzogICAgICBcIkJpZ2J5IFByZXNlbnRzOiBHbG9yeSBvZiB0aGUgR2lhbnRzXCIsXG4gIFJvVE9TOiAgICBcIlRoZSBSaXNlIG9mIFRpYW1hdCBPbmxpbmUgU3VwcGxlbWVudFwiLFxuICBYTXRTOiAgICAgXCJYIE1hcmtzIHRoZSBTcG90XCIsXG4gIFwiSEFULUxNSVwiOiAgXCJIb25vciBBbW9uZyBUaGVpdmVzOiBMZWdlbmRhcnkgTWFnaWMgSXRlbXNcIixcbiAgRGl0TENvVDogIFwiRGVzY2VudCBpbnRvIHRoZSBMb3N0IENhdmVybnMgb2YgVHNvamNhbnRoXCIsXG4gIFwiQWl0RlItRE5cIjogXCJBZHZlbnR1cmVzIGluIHRoZSBGb3Jnb3R0ZW4gUmVhbG1zOiBEZWVwZXN0IE5pZ2h0XCIsXG4gIFwiQWl0RlItVEhQXCI6XCJBZHZlbnR1cmVzIGluIHRoZSBGb3Jnb3R0ZW4gUmVhbG1zOiBUaGUgSGlkZGVuIFBhZ2VzXCIsXG4gIEJBTTogICAgICBcIkJvbydzIEFzdHJhbCBNZW5hZ2VyaWVcIixcbiAgQVpmeVQ6ICAgIFwiQSBaaWIgZm9yIFlvdXIgVGhvdWd0c1wiLFxuICBNQ1YyREM6ICAgXCJNb25zdHJvdXMgQ29tcGVuZGl1bSBWb2x1bWUgMjogRHJhZ29ubGFuY2UgQ3JlYXR1cmVzXCIsXG4gIFBTSzogICAgICBcIlBsYW5lIFNoaWZ0OiBLYWxhZGVzaFwiLFxuICBQU0Q6ICAgICAgXCJQbGFuZSBTaGlmdDogRG9taW5hcmlhXCIsXG4gIEFXTTogICAgICBcIkFkdmVudHVyZSB3aXRoIE11a1wiLFxuICBVQVRoZU15c3RpY0NsYXNzOiBcIlVuZWFydGhlZCBBcmNhbmE6IFRoZSBNeXN0aWMgQ2xhc3NcIixcbiAgQUxDdXJzZU9mU3RyYWhkOiBcIkFkdmVudHVyZXJzIExlYWd1ZTogQ3Vyc2Ugb2YgU3RyYWhkXCIsXG4gIEFMRWxlbWVudGFsRXZpbDogXCJBZHZlbnR1cmVycyBMZWFndWU6IEVsZW1lbnRhbCBFdmlsXCIsXG4gIEFMUmFnZU9mRGVtb25zOiAgXCJBZHZlbnR1cmVycyBMZWFndWU6IFJhZ2Ugb2YgRGVtb25zXCJcbn07XG5cbi8qKlxuICogUmV0dXJucyB0aGUgZnVsbCBzb3VyY2UgbmFtZSBmb3IgYSBnaXZlbiBhYmJyZXZpYXRpb24uXG4gKiBPcHRpb25hbGx5IGFwcGVuZHMgeWVhciBmb3IgUEhCIHZhcmlhbnRzLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0RnVsbFNvdXJjZU5hbWUoYWJicmV2OiBzdHJpbmcsIGVkaXRpb25JZD86IHN0cmluZyk6IHN0cmluZyB7XG4gIGxldCBuYW1lID0gU09VUkNFX05BTUVfTUFQW2FiYnJldl0gPz8gYWJicmV2O1xuXG4gIC8vIEFwcGVuZCB5ZWFyIGZvciBQSEIgaWYgdGhlIGVkaXRpb24gY29udGV4dCBpcyBrbm93blxuICBpZiAoYWJicmV2ID09PSBcIlBIQlwiKSB7XG4gICAgaWYgKGVkaXRpb25JZD8uaW5jbHVkZXMoXCIyMDE0XCIpKSBuYW1lICs9IFwiICgyMDE0KVwiO1xuICAgIGVsc2UgaWYgKGVkaXRpb25JZD8uaW5jbHVkZXMoXCIyMDI1XCIpKSBuYW1lICs9IFwiICgyMDI1KVwiO1xuICB9XG5cbiAgcmV0dXJuIG5hbWU7XG59XG4iLCAiLy8gcGFyc2Vycy81ZS1qc29uL2hlbHBlcnMvdGFnUmVwbGFjZXIudHNcblxuZXhwb3J0IGZ1bmN0aW9uIHJlcGxhY2U1ZVRhZ3MoaW5wdXQ6IHVua25vd24pOiBzdHJpbmcge1xuICAvLyAxKSBUdXJuIGFycmF5cyBpbnRvIHNwYWNlLWpvaW5lZCBzdHJpbmdzXG4gIC8vIDIpIExlYXZlIHN0cmluZ3MgYWxvbmVcbiAgLy8gMykgQ29lcmNlIGV2ZXJ5dGhpbmcgZWxzZSB0byBzdHJpbmcgKG9yIGVtcHR5KVxuICBsZXQgdGV4dDogc3RyaW5nO1xuICBpZiAoQXJyYXkuaXNBcnJheShpbnB1dCkpIHtcbiAgICB0ZXh0ID0gaW5wdXQuam9pbihcIiBcIik7XG4gIH0gZWxzZSBpZiAodHlwZW9mIGlucHV0ID09PSBcInN0cmluZ1wiKSB7XG4gICAgdGV4dCA9IGlucHV0O1xuICB9IGVsc2Uge1xuICAgIHRleHQgPSBTdHJpbmcoaW5wdXQgPz8gXCJcIik7XG4gIH1cblxuICAvLyBub3cgcnVuIGFsbCB5b3VyIEAtdGFnIHJlcGxhY2VtZW50cyBvbiB0aGF0IHRleHRcbiAgcmV0dXJuIHRleHRcbiAgICAucmVwbGFjZSgvXFx7QChzcGVsbHxpdGVtfGNyZWF0dXJlfHJhY2UpIChbXnx9XSspKD86XFx8W159XSspP1xcfS9nLCAoXywgX18sIG5hbWUpID0+XG4gICAgICBgW1ske2NhcGl0YWxpemVFYWNoKG5hbWUpfV1dYFxuICAgIClcbiAgICAucmVwbGFjZSgvXFx7QChjb25kaXRpb258c3RhdHVzfGFjdGlvbnxza2lsbCkgKFtefH1dKykoPzpcXHxbXn1dKyk/XFx9L2csIChfLCB0YWcsIG5hbWUpID0+XG4gICAgICBgW1ske2NhcGl0YWxpemUodGFnKX1zIyR7bmFtZX18JHtjYXBpdGFsaXplRWFjaChuYW1lKX1dXWBcbiAgICApXG4gICAgLnJlcGxhY2UoL1xce0BjbGFzc0ZlYXR1cmUgKFtefH1dKylcXHwoW158fV0rKSg/OlxcfFtefV0rKT9cXH0vZywgKF8sIGZlYXR1cmUsIGNscykgPT5cbiAgICAgIGBbWyR7Y2xzfSMke2ZlYXR1cmV9XV1gXG4gICAgKVxuICAgIC5yZXBsYWNlKC9cXHtAKGJvb2t8ZmlsdGVyKSAoW158fV0rKSg/OlxcfFtefV0rKT9cXH0vZywgKF8sIF9fLCB0eHQpID0+IHR4dClcbiAgICAucmVwbGFjZSgvXFx7QG5vdGUgKFtefV0rKVxcfS9nLCAoXywgbm90ZSkgPT4gYCoke25vdGV9KmApXG4gICAgLnJlcGxhY2UoL1xce0AoZGFtYWdlfGRpY2V8ZGN8aGl0fHNlbnNlKSAoW159XSspXFx9L2csIChfLCBfXywgdmFsdWUpID0+IHZhbHVlKVxuICAgIC5yZXBsYWNlKC9cXHtAY2hhbmNlIChbXnx9XSspKD86XFx8W159XSspP1xcfS9nLCAoXywgdmFsdWUpID0+IGAke3ZhbHVlfSVgKVxuICAgIC5yZXBsYWNlKC9cXHtAcXVpY2tyZWYgKFtefH1dKykoPzpcXHxbXnxdKlxcfFtefV0qKT9cXH0vZywgKF8sIHRlcm0pID0+IHtcbiAgICAgIGNvbnN0IGtub3duID0gW1xuICAgICAgICBcImRpZmZpY3VsdCB0ZXJyYWluXCIsIFwidG90YWwgY292ZXJcIiwgXCJoYWxmIGNvdmVyXCIsIFwidGhyZWUtcXVhcnRlcnMgY292ZXJcIixcbiAgICAgICAgXCJoZWF2aWx5IG9ic2N1cmVkXCIsIFwibGlnaHRseSBvYnNjdXJlZFwiXG4gICAgICBdO1xuICAgICAgcmV0dXJuIGtub3duLmluY2x1ZGVzKHRlcm0udG9Mb3dlckNhc2UoKSlcbiAgICAgICAgPyBgW1tSdWxlcyMke2NhcGl0YWxpemVFYWNoKHRlcm0pfV1dYFxuICAgICAgICA6IHRlcm07XG4gICAgfSlcbiAgICAucmVwbGFjZSgvXFx7XFxANWV0b29sc1xccysoW158fV0rKVxcfFtefV0rXFx9L2csICckMScpXG4gICAgLnJlcGxhY2UoL1xce0ByZWNoYXJnZVxccyooW159XSspXFx9L2csIChfLCBudW0pID0+IGAocmVjaGFyZ2U6ICR7bnVtLnRyaW0oKX0pYClcbiAgICAucmVwbGFjZSgvXFx7QChzY2FsZWRpY2V8c2NhbGVkYW1hZ2UpW159XSpcXHwoW158fV0rKVxcfS9nLCAoXywgX18sIHZhbHVlKSA9PiB2YWx1ZSlcbiAgICAucmVwbGFjZSgvXFx7QGQyMFtefV0qXFx9L2csIFwiXCIpXG4gICAgLnJlcGxhY2UoL1xce0BbXn1dK1xcfS9nLCBcIlwiKTtcbn1cblxuZnVuY3Rpb24gY2FwaXRhbGl6ZShzdHI6IHN0cmluZyk6IHN0cmluZyB7XG4gIHJldHVybiBzdHIuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBzdHIuc2xpY2UoMSkudG9Mb3dlckNhc2UoKTtcbn1cblxuZnVuY3Rpb24gY2FwaXRhbGl6ZUVhY2goc3RyOiBzdHJpbmcpOiBzdHJpbmcge1xuICByZXR1cm4gc3RyLnNwbGl0KFwiIFwiKS5tYXAoY2FwaXRhbGl6ZSkuam9pbihcIiBcIik7XG59XG4iLCAiaW1wb3J0IHsgcmVwbGFjZTVlVGFncyB9IGZyb20gXCIuL3RhZ1JlcGxhY2VyXCI7XG5cbmV4cG9ydCBmdW5jdGlvbiByZW5kZXJNYXJrZG93blRhYmxlKGVudHJ5OiBhbnkpOiBzdHJpbmcge1xuICBpZiAoZW50cnkudHlwZSAhPT0gXCJ0YWJsZVwiIHx8ICFBcnJheS5pc0FycmF5KGVudHJ5LnJvd3MpKSByZXR1cm4gXCJcIjtcblxuICBjb25zdCBjYXB0aW9uID0gZW50cnkuY2FwdGlvbiA/IGAjIyMjIyAke2VudHJ5LmNhcHRpb259XFxuYCA6IFwiXCI7XG5cbiAgY29uc3QgaGVhZGVycyA9IChlbnRyeS5jb2xMYWJlbHMgPz8gW10pXG4gICAgLm1hcCgoaDogc3RyaW5nKSA9PiByZXBsYWNlNWVUYWdzKGgudHJpbSgpKSk7IC8vIFx1MjcwNSB0YWcgcmVwbGFjZSBvbiBoZWFkZXJzXG5cbiAgY29uc3QgaGVhZGVyUm93ID0gYHwgJHtoZWFkZXJzLmpvaW4oXCIgfCBcIil9IHxgO1xuICBjb25zdCBkaXZpZGVyUm93ID0gYHwgJHtoZWFkZXJzLm1hcCgoKSA9PiBcIjotLVwiKS5qb2luKFwiIHwgXCIpfSB8YDtcblxuICBjb25zdCBib2R5Um93cyA9IGVudHJ5LnJvd3MubWFwKChyb3c6IGFueVtdKSA9PiB7XG4gICAgY29uc3QgY2VsbHMgPSByb3cubWFwKChjZWxsKSA9PiB7XG4gICAgICBpZiAodHlwZW9mIGNlbGwgPT09IFwic3RyaW5nXCIpIHJldHVybiByZXBsYWNlNWVUYWdzKGNlbGwpOyAvLyBcdTI3MDUgdGFnIHJlcGxhY2Ugc3RyaW5nc1xuXG4gICAgICBpZiAodHlwZW9mIGNlbGwgPT09IFwib2JqZWN0XCIpIHtcbiAgICAgICAgaWYgKGNlbGwucm9sbD8uZXhhY3QgIT09IHVuZGVmaW5lZCkgcmV0dXJuIGAke2NlbGwucm9sbC5leGFjdH1gO1xuICAgICAgICBpZiAoY2VsbC5yb2xsPy5taW4gIT09IHVuZGVmaW5lZCAmJiBjZWxsLnJvbGw/Lm1heCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgcmV0dXJuIGAke2NlbGwucm9sbC5taW59XHUyMDEzJHtjZWxsLnJvbGwubWF4fWA7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlcGxhY2U1ZVRhZ3MoSlNPTi5zdHJpbmdpZnkoY2VsbCkpOyAvLyBmYWxsYmFjayBmb3IgdW5rbm93biBzaGFwZXNcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHJlcGxhY2U1ZVRhZ3MoU3RyaW5nKGNlbGwpKTtcbiAgICB9KTtcblxuICAgIHJldHVybiBgfCAke2NlbGxzLmpvaW4oXCIgfCBcIil9IHxgO1xuICB9KTtcblxuICByZXR1cm4gYCR7Y2FwdGlvbn0ke2hlYWRlclJvd31cXG4ke2RpdmlkZXJSb3d9XFxuJHtib2R5Um93cy5qb2luKFwiXFxuXCIpfWA7XG59XG4iLCAiLy8gZm9ybWF0RW50cnkudHNcbmltcG9ydCB7IHJlcGxhY2U1ZVRhZ3MgfSBmcm9tIFwiLi90YWdSZXBsYWNlclwiO1xuaW1wb3J0IHsgcmVuZGVyTWFya2Rvd25UYWJsZSB9IGZyb20gXCIuL21hcmtkb3duVGFibGVcIjtcblxuZXhwb3J0IGZ1bmN0aW9uIGZvcm1hdEVudHJ5KGVudHJ5OiBhbnkpOiBzdHJpbmcge1xuICBpZiAodHlwZW9mIGVudHJ5ID09PSBcInN0cmluZ1wiKSB7XG4gICAgY29uc3QgY2xlYW5lZCA9IGVudHJ5LnRyaW0oKTtcbiAgICBpZiAoIWNsZWFuZWQgfHwgY2xlYW5lZCA9PT0gXCJ9XCIpIHJldHVybiBcIlwiO1xuICAgIHJldHVybiByZXBsYWNlNWVUYWdzKGNsZWFuZWQpO1xuICB9XG5cbiAgaWYgKGVudHJ5LnR5cGUgPT09IFwiZW50cmllc1wiICYmIEFycmF5LmlzQXJyYXkoZW50cnkuZW50cmllcykpIHtcbiAgICBjb25zdCBib2R5ID0gZW50cnkuZW50cmllc1xuICAgICAgLm1hcChmb3JtYXRFbnRyeSlcbiAgICAgIC5maWx0ZXIoKHN0cjogc3RyaW5nKSA9PiBzdHIudHJpbSgpLmxlbmd0aCA+IDApXG4gICAgICAuam9pbihcIlxcblxcblwiKTtcblxuICAgIHJldHVybiBlbnRyeS5uYW1lXG4gICAgICA/IGAjIyMjIyAke2VudHJ5Lm5hbWV9XFxuJHtib2R5fWBcbiAgICAgIDogYm9keTtcbiAgfVxuXG4gIGlmIChlbnRyeS50eXBlID09PSBcImxpc3RcIiAmJiBBcnJheS5pc0FycmF5KGVudHJ5Lml0ZW1zKSkge1xuICAgIHJldHVybiBlbnRyeS5pdGVtc1xuICAgICAgLm1hcCgoaTogYW55KSA9PiBgLSAke3JlcGxhY2U1ZVRhZ3ModHlwZW9mIGkgPT09IFwic3RyaW5nXCIgPyBpIDogSlNPTi5zdHJpbmdpZnkoaSkpfWApXG4gICAgICAuam9pbihcIlxcblwiKTtcbiAgfVxuXG4gIGlmIChlbnRyeS50eXBlID09PSBcInRhYmxlXCIgJiYgQXJyYXkuaXNBcnJheShlbnRyeS5yb3dzKSkge1xuICAgIHJldHVybiByZW5kZXJNYXJrZG93blRhYmxlKGVudHJ5KTtcbiAgfVxuXG4gIGlmIChlbnRyeS50eXBlID09PSBcInF1b3RlXCIgJiYgQXJyYXkuaXNBcnJheShlbnRyeS5lbnRyaWVzKSkge1xuICAgIGNvbnN0IHF1b3RlID0gZW50cnkuZW50cmllcy5tYXAoZm9ybWF0RW50cnkpLmpvaW4oXCIgXCIpLnRyaW0oKTtcbiAgICBjb25zdCBhdXRob3IgPSBlbnRyeS5ieSA/IGAgXHUyMDE0ICR7ZW50cnkuYnl9YCA6IFwiXCI7XG4gICAgcmV0dXJuIGAqXCIke3F1b3RlfSR7YXV0aG9yfVwiKmA7XG4gIH1cblxuICBpZiAoZW50cnkudHlwZSA9PT0gXCJpbnNldFwiICYmIEFycmF5LmlzQXJyYXkoZW50cnkuZW50cmllcykpIHtcbiAgICBjb25zdCBpbnNldCA9IGVudHJ5LmVudHJpZXMubWFwKGZvcm1hdEVudHJ5KS5qb2luKFwiXFxuXCIpLnRyaW0oKTtcbiAgICByZXR1cm4gYD4gJHtpbnNldC5yZXBsYWNlKC9cXG4vZywgXCJcXG4+IFwiKX1gO1xuICB9XG5cbiAgaWYgKGVudHJ5LnR5cGUgPT09IFwicmVmQ2xhc3NGZWF0dXJlXCIgJiYgdHlwZW9mIGVudHJ5LmNsYXNzRmVhdHVyZSA9PT0gXCJzdHJpbmdcIikge1xuICAgIGNvbnN0IFtuYW1lXSA9IGVudHJ5LmNsYXNzRmVhdHVyZS5zcGxpdChcInxcIik7XG4gICAgY29uc3QgYW5jaG9yID0gbmFtZVxuICAgICAgLnJlcGxhY2UoL1teXFx3XFxzLV0vZywgXCJcIilcbiAgICAgIC5yZXBsYWNlKC9cXHMrL2csIFwiLVwiKVxuICAgICAgLnRvTG93ZXJDYXNlKCk7XG4gICAgcmV0dXJuIGBbWyMke2FuY2hvcn1dXWA7XG4gIH1cblxuICAvLyBJZiBpdCdzIGFuIHVua25vd24gb2JqZWN0LCBza2lwIGl0IHNhZmVseVxuICByZXR1cm4gXCJcIjtcbn1cbiIsICIvLyBwYXJzZXJzLzVlLWpzb24vYmVzdGlhcnkudHNcblxuaW1wb3J0IHR5cGUgeyBQYXJzZWRNYXJrZG93bkZpbGUgfSBmcm9tIFwic3JjL3R5cGVzXCI7XG5pbXBvcnQgeyBnZXRGdWxsU291cmNlTmFtZSB9IGZyb20gXCIuL2hlbHBlcnMvc291cmNlTWFwXCI7XG5pbXBvcnQgeyByZXBsYWNlNWVUYWdzIH0gZnJvbSBcIi4vaGVscGVycy90YWdSZXBsYWNlclwiO1xuaW1wb3J0IHsgcmVuZGVyTWFya2Rvd25UYWJsZSB9IGZyb20gXCIuL2hlbHBlcnMvbWFya2Rvd25UYWJsZVwiO1xuaW1wb3J0IHsgYnVpbGRGTSwgc2VyaWFsaXplRnJvbnRtYXR0ZXIsIEJFU1RJQVJZX01FVEFfREVGUywgdW5pZmllZFNraWxscywgRk1fRklFTERTIH0gZnJvbSBcIi4vaGVscGVycy9mcm9udG1hdHRlclwiO1xuXG5jb25zdCBza2lwcGVkTW9uc3RlcnM6IHN0cmluZ1tdID0gW107XG5cbi8vIFNpemUgYWJicmV2aWF0aW9ucyBtYXBwaW5nXG5leHBvcnQgXG5jb25zdCBTSVpFX01BUDogUmVjb3JkPHN0cmluZywgc3RyaW5nPiA9IHtcbiAgVDogXCJUaW55XCIsXG4gIFM6IFwiU21hbGxcIixcbiAgTTogXCJNZWRpdW1cIixcbiAgTDogXCJMYXJnZVwiLFxuICBIOiBcIkh1Z2VcIixcbiAgRzogXCJHYXJnYW50dWFuXCJcbn07XG5cbi8vIEFsaWdubWVudCBhYmJyZXZpYXRpb25zIG1hcHBpbmdcbmNvbnN0IEFMSUdOTUVOVF9NQVA6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4gPSB7XG4gIEw6IFwiTGF3ZnVsXCIsXG4gIE46IFwiTmV1dHJhbFwiLFxuICBDOiBcIkNoYW90aWNcIixcbiAgRzogXCJHb29kXCIsXG4gIEU6IFwiRXZpbFwiLFxuICBVOiBcIlVuYWxpZ25lZFwiXG59O1xuXG4vLyBIZWxwZXIgdG8gY2FwaXRhbGl6ZSBmaXJzdCBsZXR0ZXIgb2YgYSBzdHJpbmdcbmZ1bmN0aW9uIGNhcGl0YWxpemVGaXJzdChzdHI6IHVua25vd24pOiBzdHJpbmcge1xuICBjb25zdCBzID0gU3RyaW5nKHN0ciB8fCBcIlwiKTtcbiAgcmV0dXJuIHMuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBzLnNsaWNlKDEpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZm9ybWF0U2l6ZUFiYnJldihhYmJyZXY6IHN0cmluZyk6IHN0cmluZyB7XG4gIHJldHVybiBTSVpFX01BUFthYmJyZXZdIHx8IGFiYnJldjtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGZvcm1hdEFsaWdubWVudEFiYnJldihhYmJyZXY6IHN0cmluZyk6IHN0cmluZyB7XG4gIHJldHVybiBhYmJyZXZcbiAgICAudHJpbSgpXG4gICAgLnNwbGl0KC9cXHMrLylcbiAgICAubWFwKGxldHRlciA9PiBBTElHTk1FTlRfTUFQW2xldHRlcl0gfHwgbGV0dGVyKVxuICAgIC5qb2luKFwiIFwiKTtcbn1cblxuY29uc3QgUkFXX05QQ1M6IHN0cmluZ1tdID0gW1xuICBcIkFianVyZXJcIiwgXCJBY29seXRlXCIsIFwiQXBwcmVudGljZSBXaXphcmRcIiwgXCJBcmNoZHJ1aWRcIiwgXCJBcmNoZXJcIiwgXCJBcmNobWFnZVwiLCBcIkFzc2Fzc2luXCIsXG4gIFwiQmFuZGl0XCIsIFwiQmFuZGl0IENhcHRhaW5cIiwgXCJCYXJkXCIsIFwiQmVyc2Vya2VyXCIsIFwiQmxhY2tndWFyZFwiLCBcIkNoYW1waW9uXCIsIFwiQ29tbW9uZXJcIixcbiAgXCJDb25qdXJlclwiLCBcIkN1bHQgRmFuYXRpY1wiLCBcIkN1bHRpc3RcIiwgXCJEaXZpbmVyXCIsIFwiRHJ1aWQgKE5QQylcIiwgXCJEcnVpZCBOUENcIiwgXCJFbmNoYW50ZXJcIixcbiAgXCJFdm9rZXJcIiwgXCJHbGFkaWF0b3JcIiwgXCJHdWFyZFwiLCBcIklsbHVzaW9uaXN0XCIsIFwiS25pZ2h0XCIsIFwiS3Jha2VuIFByaWVzdFwiLCBcIk1hZ2VcIixcbiAgXCJNYXJ0aWFsIEFydHMgQWRlcHRcIiwgXCJNYXN0ZXIgVGhpZWZcIiwgXCJOZWNyb21hbmNlclwiLCBcIk5vYmxlXCIsIFwiUHJpZXN0XCIsIFwiU2NvdXRcIiwgXCJTcHlcIixcbiAgXCJTd2FzaGJ1Y2tsZXJcIiwgXCJUaHVnXCIsIFwiVHJhbnNtdXRlclwiLCBcIlRyaWJhbCBXYXJyaW9yXCIsIFwiVmV0ZXJhblwiLCBcIldhciBQcmllc3RcIixcbiAgXCJXYXJsb2NrIG9mIHRoZSBBcmNoZmV5XCIsIFwiV2FybG9jayBvZiB0aGUgRmllbmRcIiwgXCJXYXJsb2NrIG9mIHRoZSBHcmVhdCBPbGQgT25lXCIsIFwiV2FybG9yZFwiXG5dO1xuY29uc3QgTk9STUFMSVpFRF9OUENfTkFNRVMgPSBuZXcgU2V0KFJBV19OUENTLm1hcChuID0+IG5vcm1hbGl6ZU5hbWUobikpKTtcblxuZnVuY3Rpb24gbm9ybWFsaXplTmFtZShuYW1lOiBzdHJpbmcpOiBzdHJpbmcge1xuICByZXR1cm4gbmFtZS5yZXBsYWNlKC9cXHMrL2csIFwiIFwiKS50cmltKCkudG9Mb3dlckNhc2UoKTtcbn1cblxuZnVuY3Rpb24gY2F0ZWdvcml6ZUNyZWF0dXJlKG1vbnN0ZXI6IGFueSk6IHN0cmluZyB7XG4gIGNvbnN0IHR5cGVWYWx1ZSA9IG1vbnN0ZXIudHlwZTtcbiAgY29uc3QgbmFtZSA9IG1vbnN0ZXIubmFtZTtcbiAgY29uc3QgdCA9IHR5cGVvZiB0eXBlVmFsdWUgPT09IFwic3RyaW5nXCJcbiAgICA/IHR5cGVWYWx1ZS50b0xvd2VyQ2FzZSgpXG4gICAgOiB0eXBlVmFsdWU/LnR5cGU/LnRvTG93ZXJDYXNlKCkgfHwgU3RyaW5nKHR5cGVWYWx1ZSkudG9Mb3dlckNhc2UoKTtcblxuICBjb25zdCBub3JtYWxpemVkTmFtZSA9IG5vcm1hbGl6ZU5hbWUobmFtZSk7XG5cbiAgaWYgKG1vbnN0ZXIuaXNOcGMgfHwgbW9uc3Rlci5pc05hbWVkQ3JlYXR1cmUpIHJldHVybiBcIlN0b3J5IE5QQ3NcIjtcbiAgaWYgKHQgPT09IFwiYmVhc3RcIikgcmV0dXJuIFwiQmVhc3RzXCI7XG4gIGlmICh0ID09PSBcImh1bWFub2lkXCIgJiYgTk9STUFMSVpFRF9OUENfTkFNRVMuaGFzKG5vcm1hbGl6ZWROYW1lKSkgcmV0dXJuIFwiTm9uLUJlYXN0c1wiO1xuICBpZiAodCA9PT0gXCJodW1hbm9pZFwiKSByZXR1cm4gXCJNb25zdGVyc1wiO1xuICByZXR1cm4gXCJNb25zdGVyc1wiO1xufVxuXG5mdW5jdGlvbiByZW5kZXJBYmlsaXRpZXNUYWJsZShzdHI6IG51bWJlciwgZGV4OiBudW1iZXIsIGNvbjogbnVtYmVyLCBpbnQ6IG51bWJlciwgd2lzOiBudW1iZXIsIGNoYTogbnVtYmVyKTogc3RyaW5nIHtcbiAgcmV0dXJuIFtcbiAgICBgfCBTVFIgfCBERVggfCBDT04gfCBJTlQgfCBXSVMgfCBDSEEgfGAsXG4gICAgYHwgLS0tIHwgLS0tIHwgLS0tIHwgLS0tIHwgLS0tIHwgLS0tIHxgLFxuICAgIGB8ICR7c3RyfSB8ICR7ZGV4fSB8ICR7Y29ufSB8ICR7aW50fSB8ICR7d2lzfSB8ICR7Y2hhfSB8YFxuICBdLmpvaW4oXCJcXG5cIik7XG59XG5cbmZ1bmN0aW9uIHJlbmRlckVudHJ5KGVudHJ5OiBhbnkpOiBzdHJpbmcge1xuICBjb25zdCBuYW1lID0gZW50cnkubmFtZTtcbiAgbGV0IGRlc2NyaXB0aW9uczogc3RyaW5nW10gPSBbXTtcbiAgaWYgKEFycmF5LmlzQXJyYXkoZW50cnkuZW50cmllcykpIHtcbiAgICBkZXNjcmlwdGlvbnMgPSBlbnRyeS5lbnRyaWVzO1xuICB9IGVsc2UgaWYgKHR5cGVvZiBlbnRyeS5lbnRyaWVzID09PSBcInN0cmluZ1wiKSB7XG4gICAgZGVzY3JpcHRpb25zID0gW2VudHJ5LmVudHJpZXNdO1xuICB9IGVsc2UgaWYgKEFycmF5LmlzQXJyYXkoZW50cnkuZGVzYykpIHtcbiAgICBkZXNjcmlwdGlvbnMgPSBlbnRyeS5kZXNjO1xuICB9IGVsc2UgaWYgKHR5cGVvZiBlbnRyeS5kZXNjID09PSBcInN0cmluZ1wiKSB7XG4gICAgZGVzY3JpcHRpb25zID0gW2VudHJ5LmRlc2NdO1xuICB9XG4gIGNvbnN0IHJhdyA9IGRlc2NyaXB0aW9ucy5qb2luKFwiIFwiKTtcbiAgY29uc3QgZGVzYyA9IHJlcGxhY2U1ZVRhZ3MocmF3KTtcbiAgcmV0dXJuIGAqKioke25hbWV9LioqKiAke2Rlc2N9YDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlQmVzdGlhcnlGaWxlKGpzb246IGFueSwgZWRpdGlvbklkOiBzdHJpbmcpOiBQYXJzZWRNYXJrZG93bkZpbGVbXSB7XG4gICAgaWYgKCFqc29uLm1vbnN0ZXIpIHJldHVybiBbXTtcbiAgICAoanNvbiBhcyBhbnkpLl9lZGl0aW9uSWQgPSBlZGl0aW9uSWQ7XG4gIFxuICAgIC8vIDEpIEZpbHRlciBvdXQgXHUyMDFDcmVmZXJlbmNlXHUyMDFEIGVudHJpZXMgd2l0aCBubyBBQyBvciBIUFxuICAgIGNvbnN0IHZhbGlkTW9uc3RlcnMgPSBqc29uLm1vbnN0ZXIuZmlsdGVyKChtOiBhbnkpID0+IHtcbiAgICBjb25zdCBhY1ZhbCA9IEFycmF5LmlzQXJyYXkobS5hYylcbiAgICAgID8gbS5hY1swXT8uYWMgPz8gbS5hY1swXVxuICAgICAgOiB0eXBlb2YgbS5hYyA9PT0gXCJvYmplY3RcIlxuICAgICAgICA/IG0uYWM/LmFjID8/IG51bGxcbiAgICAgICAgOiBtLmFjO1xuXG4gICAgY29uc3QgaHBWYWwgPSB0eXBlb2YgbS5ocCA9PT0gXCJvYmplY3RcIlxuICAgICAgPyBtLmhwPy5hdmVyYWdlID8/IG0uaHA/LmhwID8/IG51bGxcbiAgICAgIDogbS5ocDtcbiAgICAgIHJldHVybiBhY1ZhbCAhPSBudWxsICYmIGhwVmFsICE9IG51bGwgJiYgIWlzTmFOKE51bWJlcihhY1ZhbCkpICYmICFpc05hTihOdW1iZXIoaHBWYWwpKTtcbiAgICB9KTtcblxuICAgIGNvbnN0IGFsbE5hbWVzID0gbmV3IFNldChqc29uLm1vbnN0ZXIubWFwKChtOiBhbnkpID0+IG0ubmFtZSkpO1xuY29uc3QgdmFsaWROYW1lcyA9IG5ldyBTZXQodmFsaWRNb25zdGVycy5tYXAoKG06IGFueSkgPT4gbS5uYW1lKSk7XG5jb25zdCBtaXNzaW5nID0gWy4uLmFsbE5hbWVzXS5maWx0ZXIobmFtZSA9PiAhdmFsaWROYW1lcy5oYXMobmFtZSkpO1xuXG4gIFxuICAgIHJldHVybiB2YWxpZE1vbnN0ZXJzLm1hcCgobW9uc3RlcjogYW55KSA9PiB7XG4gICAgICBjb25zdCBuYW1lICAgICA9IG1vbnN0ZXIubmFtZSBhcyBzdHJpbmc7XG4gICAgICBjb25zdCBzYWZlTmFtZSA9IG5hbWUucmVwbGFjZSgvXFwvL2csIFwiLVwiKTtcbiAgXG4gICAgICAvLyBcdTIwMTQgUmF3IGZpZWxkcyAmIGZvcm1hdHRpbmcgXHUyMDE0XG4gICAgICBjb25zdCByYXdTaXplICAgICAgPSBtb25zdGVyLnNpemUgfHwgXCJNXCI7XG4gICAgICBjb25zdCByYXdBbGlnbm1lbnQgPSBBcnJheS5pc0FycmF5KG1vbnN0ZXIuYWxpZ25tZW50KVxuICAgICAgICA/IG1vbnN0ZXIuYWxpZ25tZW50LmpvaW4oXCIgXCIpXG4gICAgICAgIDogbW9uc3Rlci5hbGlnbm1lbnQgfHwgXCJOXCI7XG4gICAgbGV0IHJhd1R5cGUgPSBcIlVua25vd25cIjtcblxuICAgIGlmICh0eXBlb2YgbW9uc3Rlci50eXBlID09PSBcInN0cmluZ1wiKSB7XG4gICAgICByYXdUeXBlID0gY2FwaXRhbGl6ZUZpcnN0KG1vbnN0ZXIudHlwZSk7XG4gICAgfSBlbHNlIGlmIChtb25zdGVyLnR5cGU/LnR5cGUpIHtcbiAgICAgIGNvbnN0IGJhc2UgPSBjYXBpdGFsaXplRmlyc3QobW9uc3Rlci50eXBlLnR5cGUpO1xuICAgICAgY29uc3QgdGFncyA9IG1vbnN0ZXIudHlwZS50YWdzPy5sZW5ndGggPyBgICgke21vbnN0ZXIudHlwZS50YWdzLm1hcChjYXBpdGFsaXplRmlyc3QpLmpvaW4oXCIsIFwiKX0pYCA6IFwiXCI7XG4gICAgICByYXdUeXBlID0gYCR7YmFzZX0ke3RhZ3N9YDtcbiAgICB9XG5cbiAgICBtb25zdGVyLl9wYXJzZWRUeXBlID0gcmF3VHlwZTtcbiAgICAgIFxuICAgIC8vIFx1MjAxNCBBQywgSFAsIENSIFx1MjAxNFxuICAgIGNvbnN0IGFjID0gQXJyYXkuaXNBcnJheShtb25zdGVyLmFjKSA/IG1vbnN0ZXIuYWNbMF0uYWMgOiBtb25zdGVyLmFjO1xuICAgIGNvbnN0IGhwID0gbW9uc3Rlci5ocD8uYXZlcmFnZSA/PyBtb25zdGVyLmhwO1xuICAgIGNvbnN0IGNyID0gbW9uc3Rlci5jcjtcblxuICAgIC8vIFNraXAgbW9uc3RlcnMgd2l0aCBubyBBQyBhbmQgSFBcbiAgICBpZiAoIWFjICYmICFocCkge1xuICAgICAgc2tpcHBlZE1vbnN0ZXJzLnB1c2gobW9uc3Rlci5uYW1lKTtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICAgIFxuICAgICAgLy8gXHUyMDE0IEFiaWxpdGllcyBcdTIwMTRcbiAgICAgIGNvbnN0IGFiaWxpdGllcyA9IEFycmF5LmlzQXJyYXkobW9uc3Rlci5hYmlsaXR5KVxuICAgICAgICA/IG1vbnN0ZXIuYWJpbGl0eVxuICAgICAgICA6IFttb25zdGVyLnN0ciwgbW9uc3Rlci5kZXgsIG1vbnN0ZXIuY29uLCBtb25zdGVyLmludCwgbW9uc3Rlci53aXMsIG1vbnN0ZXIuY2hhXTtcbiAgICAgIGNvbnN0IFtzdHIgPSAxMCwgZGV4ID0gMTAsIGNvbiA9IDEwLCBpbnQgPSAxMCwgd2lzID0gMTAsIGNoYSA9IDEwXSA9IGFiaWxpdGllcztcbiAgXG4gICAgICAvLyBcdTIwMTQgU3BlZWQgKGhhbmRsZXMgaG92ZXIgJiBvYmplY3Qgc3BlZWRzKSBcdTIwMTRcbiAgICAgIGNvbnN0IHNwZWVkTGlzdDogc3RyaW5nW10gPSBbXTtcbiAgICAgIGlmICh0eXBlb2YgbW9uc3Rlci5zcGVlZCA9PT0gXCJvYmplY3RcIikge1xuICAgICAgICBmb3IgKGNvbnN0IFttb2RlLCB2YWxdIG9mIE9iamVjdC5lbnRyaWVzKG1vbnN0ZXIuc3BlZWQpKSB7XG4gICAgICAgICAgaWYgKG1vZGUgPT09IFwiY2FuSG92ZXJcIikgY29udGludWU7XG4gICAgICAgICAgaWYgKHZhbCAmJiB0eXBlb2YgdmFsID09PSBcIm9iamVjdFwiICYmIFwibnVtYmVyXCIgaW4gdmFsKSB7XG4gICAgICAgICAgICBjb25zdCBudW0gID0gKHZhbCBhcyBhbnkpLm51bWJlcjtcbiAgICAgICAgICAgIGNvbnN0IGNvbmQgPSAodmFsIGFzIGFueSkuY29uZGl0aW9uID8gYCAkeyh2YWwgYXMgYW55KS5jb25kaXRpb259YCA6IFwiXCI7XG4gICAgICAgICAgICBzcGVlZExpc3QucHVzaChgJHttb2RlfSAke251bX0gZnQuJHtjb25kfWApO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBzcGVlZExpc3QucHVzaChgJHttb2RlfSAke3ZhbH0gZnQuYCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzcGVlZExpc3QucHVzaChgJHttb25zdGVyLnNwZWVkfSBmdC5gKTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IHNwZWVkID0gc3BlZWRMaXN0LmpvaW4oXCIsIFwiKTtcbiAgXG4gICAgICAvLyBcdTIwMTQgU291cmNlIHNhbml0aXphdGlvbiBcdTIwMTRcbiAgICAgIGxldCBzb3VyY2UgPSBnZXRGdWxsU291cmNlTmFtZShtb25zdGVyLnNvdXJjZSwgZWRpdGlvbklkKTtcbiAgICAgIHNvdXJjZSAgICAgPSBzb3VyY2UucmVwbGFjZSgvOi9nLCBcIiAtXCIpO1xuICBcbiAgICAgIC8vIFx1MjAxNCBDYXRlZ29yeSBmb3IgZm9sZGVyIFx1MjAxNFxuICAgICAgY29uc3QgY2F0ZWdvcnkgPSBjYXRlZ29yaXplQ3JlYXR1cmUobW9uc3Rlcik7XG4gIFxuICAgICAgY29uc3QgZm0gICA9IGJ1aWxkRk0obW9uc3RlciwgQkVTVElBUllfTUVUQV9ERUZTKTtcbiAgICAgIGNvbnN0IHlhbWwgPSBzZXJpYWxpemVGcm9udG1hdHRlcihmbSwgQkVTVElBUllfTUVUQV9ERUZTKTtcbiAgICAgIFxuICAgICAgY29uc3Qgc2F2aW5nVGhyb3dzID0gKGZtW0ZNX0ZJRUxEUy5TQVZJTkdfVEhST1dTXSBhcyBzdHJpbmdbXSkgfHwgW107XG4gICAgICBjb25zdCBza2lsbHMgICAgICAgPSAoZm1bRk1fRklFTERTLlNLSUxMU10gICAgICAgIGFzIHN0cmluZ1tdKSB8fCBbXTtcbiAgICAgIGNvbnN0IHNlbnNlcyAgICAgICA9IChmbVtGTV9GSUVMRFMuU0VOU0VTXSAgICAgICAgYXMgc3RyaW5nW10pIHx8IFtdO1xuICAgICAgY29uc3QgbGFuZ3VhZ2VzICAgID0gKGZtW0ZNX0ZJRUxEUy5MQU5HVUFHRVNdICAgICBhcyBzdHJpbmdbXSkgfHwgW107XG5cblxuICAgICAgLy8gXHUyMDE0IEJvZHkgXHUyMDE0XG4gICAgICBsZXQgYm9keSA9XG4gICAgICBgIyAke25hbWV9XFxuXFxuYCArXG4gICAgICBgJHtmb3JtYXRTaXplQWJicmV2KHJhd1NpemUpfSAke3Jhd1R5cGV9LCAke2Zvcm1hdEFsaWdubWVudEFiYnJldihyYXdBbGlnbm1lbnQpfVxcblxcbmAgK1xuICAgICAgYCoqQXJtb3IgQ2xhc3MqKjogJHthY31cXG5gICtcbiAgICAgIGAqKkhpdCBQb2ludHMqKjogJHtocH1cXG5gICtcbiAgICAgIGAqKlNwZWVkKio6ICR7c3BlZWR9XFxuYCArXG4gICAgICAoc2F2aW5nVGhyb3dzLmxlbmd0aFxuICAgICAgICA/IGAqKlNhdmluZyBUaHJvd3MqKjogJHtzYXZpbmdUaHJvd3Muam9pbihcIiwgXCIpfVxcbmBcbiAgICAgICAgOiBcIlwiKSArXG4gICAgICAoc2tpbGxzLmxlbmd0aFxuICAgICAgICA/IGAqKlNraWxscyoqOiAke3NraWxscy5qb2luKFwiLCBcIil9XFxuYFxuICAgICAgICA6IFwiXCIpICtcbiAgICAgIChzZW5zZXMubGVuZ3RoXG4gICAgICAgID8gYCoqU2Vuc2VzKio6ICR7c2Vuc2VzLmpvaW4oXCIsIFwiKX1cXG5gXG4gICAgICAgIDogXCJcIikgK1xuICAgICAgKGxhbmd1YWdlcy5sZW5ndGhcbiAgICAgICAgPyBgKipMYW5ndWFnZXMqKjogJHtsYW5ndWFnZXMuam9pbihcIiwgXCIpfVxcbmBcbiAgICAgICAgOiBcIlwiKSArXG4gICAgICBgKipDaGFsbGVuZ2UqKjogJHtjcn1cXG5cXG5gICtcbiAgICAgIHJlbmRlckFiaWxpdGllc1RhYmxlKHN0ciwgZGV4LCBjb24sIGludCwgd2lzLCBjaGEpO1xuXG4gIFxuICAgICAgaWYgKG1vbnN0ZXIudHJhaXQpICAgICBib2R5ICs9IGBcXG5cXG4jIyMgVHJhaXRzXFxuJHttb25zdGVyLnRyYWl0Lm1hcChyZW5kZXJFbnRyeSkuam9pbihcIlxcblxcblwiKX1gO1xuICAgICAgaWYgKG1vbnN0ZXIuYWN0aW9uKSAgICBib2R5ICs9IGBcXG5cXG4jIyMgQWN0aW9uc1xcbiR7bW9uc3Rlci5hY3Rpb24ubWFwKHJlbmRlckVudHJ5KS5qb2luKFwiXFxuXFxuXCIpfWA7XG4gICAgICBpZiAobW9uc3Rlci5yZWFjdGlvbikgIGJvZHkgKz0gYFxcblxcbiMjIyBSZWFjdGlvbnNcXG4ke21vbnN0ZXIucmVhY3Rpb24ubWFwKHJlbmRlckVudHJ5KS5qb2luKFwiXFxuXFxuXCIpfWA7XG4gICAgICBpZiAobW9uc3Rlci5sZWdlbmRhcnkpIGJvZHkgKz0gYFxcblxcbiMjIyBMZWdlbmRhcnkgQWN0aW9uc1xcbiR7bW9uc3Rlci5sZWdlbmRhcnkubWFwKHJlbmRlckVudHJ5KS5qb2luKFwiXFxuXFxuXCIpfWA7XG4gIFxuICAgICAgY29uc3QgY29udGVudCA9IGAtLS1cXG4ke3lhbWx9XFxuLS0tXFxuXFxuJHtib2R5fWA7XG4gIFxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgcGF0aDogICAgYCR7Y2F0ZWdvcnl9LyR7c2FmZU5hbWV9Lm1kYCxcbiAgICAgICAgY29udGVudCxcbiAgICAgIH07XG4gICAgfSk7XG4gIH1cbiIsICJpbXBvcnQgdHlwZSB7IFBhcnNlZE1hcmtkb3duRmlsZSB9IGZyb20gXCIuLi8uLi90eXBlc1wiO1xuaW1wb3J0IHsgcmVwbGFjZTVlVGFncyB9ICAgICBmcm9tIFwiLi9oZWxwZXJzL3RhZ1JlcGxhY2VyXCI7XG5pbXBvcnQgeyBnZXRGdWxsU291cmNlTmFtZSB9IGZyb20gXCIuL2hlbHBlcnMvc291cmNlTWFwXCI7XG5pbXBvcnQgeyBidWlsZEZNLCBzZXJpYWxpemVGcm9udG1hdHRlciwgSVRFTV9NRVRBX0RFRlMsIEZNX0ZJRUxEUyB9IGZyb20gXCIuL2hlbHBlcnMvZnJvbnRtYXR0ZXJcIjtcblxuXG4vKiogSGVscGVyIHRvIGNhcGl0YWxpemUgZmlyc3QgbGV0dGVyIFx1MjAxMyBuZXZlciBjcmFzaGVzIG9uIG5vbi1zdHJpbmdzICovXG5mdW5jdGlvbiBjYXBpdGFsaXplRmlyc3QoaW5wdXQ6IGFueSk6IHN0cmluZyB7XG4gIC8vIGlmIGl0XHUyMDE5cyBub3QgYSBub24tZW1wdHkgc3RyaW5nLCBiYWlsIG91dFxuICBpZiAodHlwZW9mIGlucHV0ICE9PSBcInN0cmluZ1wiIHx8IGlucHV0Lmxlbmd0aCA9PT0gMCkgcmV0dXJuIFwiXCI7XG4gIGNvbnN0IHMgPSBpbnB1dC50cmltKCk7XG4gIHJldHVybiBzLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgcy5zbGljZSgxKS50b0xvd2VyQ2FzZSgpO1xufVxuXG5cbmV4cG9ydCBjb25zdCBEQU1BR0VfVFlQRV9NQVA6IFJlY29yZDxzdHJpbmcsc3RyaW5nPiA9IHtcbiAgUDogXCJQaWVyY2luZ1wiLFxuICBCOiBcIkJsdWRnZW9uaW5nXCIsXG4gIFM6IFwiU2xhc2hpbmdcIixcbiAgTjogXCJOZWNyb3RpY1wiLFxuICBSOiBcIlJhZGlhbnRcIixcbiAgRjogXCJGaXJlXCIsXG4gIEM6IFwiQ29sZFwiLFxuICBMOiBcIkxpZ2h0bmluZ1wiLFxuICBUOiBcIlRodW5kZXJcIixcbiAgQTogXCJBY2lkXCIsXG4gIEg6IFwiSGVhbGluZ1wiLFxuICBVOiBcIkZvcmNlXCIsXG4gIFY6IFwiUHN5Y2hpY1wiLFxufTtcblxuZXhwb3J0IGNvbnN0IFBST1BFUlRZX01BUDogUmVjb3JkPHN0cmluZyxzdHJpbmc+ID0ge1xuICBBOiBcIkFtbXVuaXRpb25cIixcbiAgRjogXCJGaW5lc3NlXCIsXG4gIEg6IFwiSGVhdnlcIixcbiAgTDogXCJMaWdodFwiLFxuICBSOiBcIlJlbG9hZFwiLFxuICBTOiBcIlNwZWNpYWxcIixcbiAgXCIySFwiOiBcIlR3by1IYW5kZWRcIixcbiAgVDogXCJUaHJvd25cIixcbiAgVjogXCJWZXJzYXRpbGVcIlxufTtcblxuZXhwb3J0IGNvbnN0IElURU1fVFlQRV9NQVA6IFJlY29yZDxzdHJpbmcsc3RyaW5nPiA9IHtcbiAgJEM6ICBcIkN1cnJlbmN5XCIsXG4gICRHOiAgXCJHZW1cIixcbiAgQTogICBcIkFtbXVuaXRpb25cIixcbiAgXCJBSVJ8RE1HXCI6IFwiVmVoaWNsZSAoYWlyKVwiLFxuICBcIkFGfERNR1wiOiBcIkZ1dHVyZSBBbW1vXCIsXG4gIEFUOiAgXCJBcnRpc2FuIFRvb2xzXCIsXG4gIEVYUDogXCJFeHBsb3NpdmVcIixcbiAgRkQ6ICBcIkZvb2QgYW5kIERyaW5rXCIsXG4gIEc6ICAgXCJHZWFyXCIsXG4gIEdTOiAgXCJHYW1lXCIsXG4gIEhBOiAgXCJIZWF2eSBBcm1vclwiLFxuICBcIklER3xURENTUlwiOiBcIklsbGljaXQgRHJ1Z1wiLFxuICBJTlM6IFwiSW5zdHJ1bWVudFwiLFxuICBMQTogIFwiTGlnaHQgQXJtb3JcIixcbiAgTTogICBcIldlYXBvblwiLFxuICBNQTogIFwiTWVkaXVtIEFybW9yXCIsXG4gIE1OVDogXCJNb3VudHMgYW5kIFZlaGljbGVzXCIsXG4gIE9ESDogXCJNaXNjZWxsYW5lb3VzXCIsXG4gIFA6ICAgXCJDb25zdW1hYmxlXCIsXG4gIFI6ICAgXCJSYW5nZWQgV2VhcG9uXCIsXG4gIFJEOiAgXCJSb2RcIixcbiAgUkc6ICBcIlJpbmdcIixcbiAgUzogICBcIlNoaWVsZFwiLFxuICBTQzogIFwiU2Nyb2xsXCIsXG4gIFNDRjogXCJTcGVsbCBDYXN0aW5nIEZvY3VzXCIsXG4gIFNIUDogXCJTaGlwXCIsXG4gIFQ6ICAgXCJUb29sXCIsXG4gIFRBSDogXCJNb3VudHMgYW5kIFZlaGljbGVzXCIsXG4gIFRHOiAgXCJUcmFkZSBHb29kc1wiLFxuICBWRUg6IFwiTW91bnRzIGFuZCBWZWhpY2xlc1wiLFxuICBXRDogIFwiV2FuZFwiLFxufTtcblxuLyoqIGNvZGUgXHUyMTkyIGZ1bGwgZm9sZGVyIHBhdGggdW5kZXIgSXRlbXMvICovXG5jb25zdCBjb2RlRm9sZGVyTWFwOiBSZWNvcmQ8c3RyaW5nLHN0cmluZz4gPSB7XG4gIC8vIFdlYXBvbnMgJiBBcm1vclxuICBcIkFcIjogICBcIldlYXBvbnMgYW5kIEFybW9yL0FtbXVuaXRpb25cIixcbiAgXCJNXCI6ICAgXCJXZWFwb25zIGFuZCBBcm1vci9XZWFwb25zXCIsXG4gIFwiUlwiOiAgIFwiV2VhcG9ucyBhbmQgQXJtb3IvUmFuZ2VkIFdlYXBvbnNcIixcbiAgXCJTXCI6ICAgXCJXZWFwb25zIGFuZCBBcm1vci9TaGllbGRzXCIsXG4gIFwiTEFcIjogIFwiV2VhcG9ucyBhbmQgQXJtb3IvQXJtb3IvTGlnaHQgQXJtb3JcIixcbiAgXCJNQVwiOiAgXCJXZWFwb25zIGFuZCBBcm1vci9Bcm1vci9NZWRpdW0gQXJtb3JcIixcbiAgXCJIQVwiOiAgXCJXZWFwb25zIGFuZCBBcm1vci9Bcm1vci9IZWF2eSBBcm1vclwiLFxuICBcIkVYUFwiOiBcIldlYXBvbnMgYW5kIEFybW9yL1dlYXBvbnMvRXhwbG9zaXZlc1wiLFxuICAvLyBGdXR1cmUgQW1tbyAoQUZ8RE1HIFx1MjE5MiByYXdDb2RlIFwiQUZcIilcbiAgXCJBRlwiOiAgXCJXZWFwb25zIGFuZCBBcm1vci9BbW11bml0aW9uL0Z1dHVyZSBBbW1vXCIsXG5cbiAgLy8gTWFnaWNhbCBJdGVtc1xuICBcIlJEXCI6ICBcIk1hZ2ljYWwgSXRlbXMvUm9kc1wiLFxuICBcIlJHXCI6ICBcIk1hZ2ljYWwgSXRlbXMvUmluZ3NcIixcbiAgXCJTQ1wiOiAgXCJNYWdpY2FsIEl0ZW1zL1Njcm9sbHNcIixcbiAgXCJTQ0ZcIjogXCJNYWdpY2FsIEl0ZW1zL1NwZWxsIENhc3RpbmcgRm9jdXNcIixcbiAgXCJXRFwiOiAgXCJNYWdpY2FsIEl0ZW1zL1dhbmRzXCIsXG5cbiAgLy8gVmFsdWFibGVzXG4gIFwiJEdcIjogXCJWYWx1YWJsZXMvR2Vtc1wiLFxuICAvLyBDdXJyZW5jeSAocmF3Q29kZSBiZWNvbWVzIFwiQ1wiIGFmdGVyIHN0cmlwcGluZyAkKVxuICBcIkNcIjogIFwiVmFsdWFibGVzL0N1cnJlbmN5XCIsXG4gIFwiVEdcIjogXCJWYWx1YWJsZXMvVHJhZGUgR29vZHNcIixcblxuICAvLyBBcnRpc2FuIEdvb2RzXG4gIFwiQVRcIjogIFwiQXJ0aXNhbiBHb29kcy9Ub29sc1wiLFxuICBcIlRcIjogICBcIkFydGlzYW4gR29vZHMvVG9vbHNcIixcbiAgXCJJTlNcIjogXCJBcnRpc2FuIEdvb2RzL0luc3RydW1lbnRzXCIsXG4gIFwiR1NcIjogIFwiQXJ0aXNhbiBHb29kcy9HYW1lc1wiLFxuXG4gIC8vIEdlYXIgJiBNb3VudHNcbiAgXCJHXCI6ICAgXCJHZWFyXCIsXG4gIC8vIE1vdW50cyAmIFZlaGljbGVzXG4gIFwiTU5UXCI6IFwiR2Vhci9Nb3VudHMgYW5kIFZlaGljbGVzXCIsXG4gIFwiVEFIXCI6IFwiR2Vhci9Nb3VudHMgYW5kIFZlaGljbGVzXCIsXG4gIFwiVkVIXCI6IFwiR2Vhci9Nb3VudHMgYW5kIFZlaGljbGVzXCIsXG4gIC8vIEFpciB2ZWhpY2xlcyAoQUlSfERNRyBcdTIxOTIgcmF3Q29kZSBcIkFJUlwiKVxuICBcIkFJUlwiOiBcIkdlYXIvTW91bnRzIGFuZCBWZWhpY2xlcy9BaXJcIixcblxuICAvLyBDb25zdW1hYmxlc1xuICBcIlBcIjogICBcIkNvbnN1bWFibGVzXCIsXG4gIC8vIEZvb2QgJiBEcmlua1xuICBcIkZEXCI6ICBcIkNvbnN1bWFibGVzL0Zvb2QgYW5kIERyaW5rXCIsXG5cbiAgLy8gSWxsaWNpdCBEcnVncyAoSURHfFREQ1NSIFx1MjE5MiByYXdDb2RlIFwiSURHXCIpXG4gIFwiSURHXCI6IFwiR2Vhci9JbGxpY2l0IERydWdzXCIsXG5cbiAgLy8gTWlzY2VsbGFuZW91cyAoT0RIKVxuICBcIk9ESFwiOiBcIkdlYXIvTWlzY2VsbGFuZW91c1wiLFxufTtcblxuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlSXRlbXNGaWxlKGpzb246IGFueSwgZWRpdGlvbklkOiBzdHJpbmcpOiBQYXJzZWRNYXJrZG93bkZpbGVbXSB7XG4gIGNvbnN0IHJhd0l0ZW1zOiBhbnlbXSA9IFtdO1xuICBpZiAoQXJyYXkuaXNBcnJheShqc29uLmJhc2VpdGVtKSkgcmF3SXRlbXMucHVzaCguLi5qc29uLmJhc2VpdGVtKTtcbiAgaWYgKEFycmF5LmlzQXJyYXkoanNvbi5pdGVtKSkgICAgIHJhd0l0ZW1zLnB1c2goLi4uanNvbi5pdGVtKTtcbiAgaWYgKEFycmF5LmlzQXJyYXkoanNvbi5vYmplY3QpKSAgIHJhd0l0ZW1zLnB1c2goLi4uanNvbi5vYmplY3QpO1xuICBpZiAoQXJyYXkuaXNBcnJheShqc29uLnZlaGljbGUpKSAgcmF3SXRlbXMucHVzaCguLi5qc29uLnZlaGljbGUpO1xuICBpZiAoIXJhd0l0ZW1zLmxlbmd0aCkgcmV0dXJuIFtdO1xuXG4gIGNvbnN0IGJhc2VOYW1lcyA9IG5ldyBTZXQ8c3RyaW5nPihcbiAgICBBcnJheS5pc0FycmF5KGpzb24uYmFzZWl0ZW0pID8ganNvbi5iYXNlaXRlbS5tYXAoKGI6IGFueSkgPT4gYi5uYW1lKSA6IFtdXG4gICk7XG4gIGNvbnN0IG91dDogUGFyc2VkTWFya2Rvd25GaWxlW10gPSBbXTtcblxuICBmb3IgKGNvbnN0IGl0IG9mIHJhd0l0ZW1zKSB7XG4gICAgY29uc3QgbmFtZSAgICAgPSBpdC5uYW1lIGFzIHN0cmluZztcbiAgICBjb25zdCBzYWZlTmFtZSA9IG5hbWUucmVwbGFjZSgvW1xcL1xcXFw6XS9nLCBcIi1cIik7XG5cbiAgICAvLyBEZXRlcm1pbmUgZm9sZGVyXG4gICAgY29uc3QgcmF3Q29kZSA9IChpdC50eXBlIGFzIHN0cmluZyB8fCBcIlwiKS5zcGxpdChcInxcIilbMF1cbiAgICAgICAgLnNwbGl0KFwifFwiKVswXSAgICAgIC8vIGRyb3AgYW55dGhpbmcgYWZ0ZXIgXHUyMDFDfFx1MjAxRFxuICAgICAgICAucmVwbGFjZSgvXlxcJC8sIFwiXCIpOyAvLyBzdHJpcCBsZWFkaW5nIFx1MjAxQyRcdTIwMURcbiAgICBsZXQgZm9sZGVyICAgID0gY29kZUZvbGRlck1hcFtyYXdDb2RlXSA/PyBcIk1pc2NlbGxhbmVvdXNcIjtcblxuICAgIC8vIFZhcmlhbnRzXG4gICAgaWYgKGl0LmJvbnVzV2VhcG9uKSB7XG4gICAgICBmb2xkZXIgPSBgJHtmb2xkZXJ9L1ZhcmlhbnRzYDtcbiAgICB9XG4gICAgLy8gTWFnaWNhbFxuICAgIGVsc2Uge1xuICAgICAgY29uc3QgaXNNYWdpYyA9ICEhaXQud29uZHJvdXMgfHwgISFpdC5yZXFBdHR1bmUgfHwgISFpdC5yZXFfYXR0dW5lXG4gICAgICAgIHx8IFN0cmluZyhpdC5yYXJpdHkpLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoXCJtYWdpY1wiKTtcbiAgICAgIGlmIChpc01hZ2ljKSB7XG4gICAgICAgIGNvbnN0IFsgLCAuLi5yZXN0IF0gPSBmb2xkZXIuc3BsaXQoXCIvXCIpO1xuICAgICAgICBmb2xkZXIgPSBbXCJNYWdpY2FsIEl0ZW1zXCIsIC4uLnJlc3RdLmpvaW4oXCIvXCIpO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIFdlYXBvbiBjYXRlZ29yeSBzdWJmb2xkZXJcbiAgICBpZiAoKGZvbGRlci5zdGFydHNXaXRoKFwiV2VhcG9ucyBhbmQgQXJtb3IvV2VhcG9uc1wiKSB8fFxuICAgICAgICAgZm9sZGVyLnN0YXJ0c1dpdGgoXCJXZWFwb25zIGFuZCBBcm1vci9SYW5nZWQgV2VhcG9uc1wiKSkgJiYgaXQud2VhcG9uQ2F0ZWdvcnkpIHtcbiAgICAgIGZvbGRlciA9IGAke2ZvbGRlcn0vJHtjYXBpdGFsaXplRmlyc3QoaXQud2VhcG9uQ2F0ZWdvcnkpfWA7XG4gICAgfVxuXG4gICAgLy8gbWFrZSBlZGl0aW9uSWQgYXZhaWxhYmxlIGZvciB0aGUgU09VUkNFIGZpZWxkXG4oanNvbiBhcyBhbnkpLl9lZGl0aW9uSWQgPSBlZGl0aW9uSWQ7XG5cbi8vIGJ1aWxkIGEgRnJvbnRtYXR0ZXIgb2JqZWN0IGZyb20gdGhlIEpTT05cbmNvbnN0IGZtICAgPSBidWlsZEZNKGl0LCBJVEVNX01FVEFfREVGUyk7XG5cbi8vIGlmIHRoZSBidWlsdCBmcm9udG1hdHRlciBzYXlzIHRoaXMgaXMgYSBtYWdpY2FsIGl0ZW1cdTIwMjZcbmlmIChmbVtGTV9GSUVMRFMuTUFHSUNBTF0pIHtcbiAgLy8gXHUyMDI2dGhlbiBhZGQgb3VyIFZlcm11biBmbGFnXG4gIGZtW0ZNX0ZJRUxEUy5WRVJNVU5dID0gZmFsc2U7XG59XG5cbmlmIChyYXdDb2RlID09PSBcIk1cIiAmJiBpdC53ZWFwb25DYXRlZ29yeSkge1xuICAvLyBcdTIwMUNNXHUyMDFEIFx1MjE5MiB1c2Ugd2VhcG9uQ2F0ZWdvcnkgKFx1MjAxQ1NpbXBsZVx1MjAxRC9cdTIwMUNNYXJ0aWFsXHUyMDFEKVxuICBmbS50eXBlID0gYCR7Y2FwaXRhbGl6ZUZpcnN0KGl0LndlYXBvbkNhdGVnb3J5KX0gV2VhcG9uYDtcbn0gZWxzZSBpZiAoSVRFTV9UWVBFX01BUFtyYXdDb2RlXSkge1xuICAvLyBhbnkgb3RoZXIgY29kZSBcdTIxOTIgbWFwcGVkIGxhYmVsXG4gIGZtLnR5cGUgPSBJVEVNX1RZUEVfTUFQW3Jhd0NvZGVdO1xufVxuaWYgKEFycmF5LmlzQXJyYXkoZm0uZGFtYWdlVHlwZXMpKSB7XG4gIGZtLmRhbWFnZVR5cGVzID0gZm0uZGFtYWdlVHlwZXMubWFwKChjb2RlOiBzdHJpbmcpID0+XG4gICAgREFNQUdFX1RZUEVfTUFQW2NvZGVdIHx8IGNvZGVcbiAgKTtcbn1cbi8vIHNlcmlhbGl6ZSBpdCB0byBZQU1MXG5sZXQgeWFtbCA9IHNlcmlhbGl6ZUZyb250bWF0dGVyKGZtLCBJVEVNX01FVEFfREVGUyk7XG5cbi8vIGlmIHlvdSBzdGlsbCB3YW50IHBhY2tDb250ZW50cywgYXBwZW5kIGl0IGhlcmU6XG5pZiAoQXJyYXkuaXNBcnJheShpdC5wYWNrQ29udGVudHMpKSB7XG4gIHlhbWwgKz0gXCJcXG5wYWNrQ29udGVudHM6XCI7XG4gIGZvciAoY29uc3QgcGMgb2YgaXQucGFja0NvbnRlbnRzKSB7XG4gICAgeWFtbCArPSBgXFxuICAtIGl0ZW06IFwiJHtwYy5pdGVtfVwiXFxuICAgIHF1YW50aXR5OiAke3BjLnF1YW50aXR5fWA7XG4gIH1cbn1cbiBcbi8vIHdyYXAgaXQgaW4gdGhlIFlBTUwgZmVuY2VcbmNvbnN0IGZyb250bWF0dGVyID0gYC0tLVxcbiR7eWFtbH1cXG4tLS1gO1xuXG5cbiAgICAvLyBCb2R5IGxpbmVzXG4gICAgY29uc3QgbGluZXM6IHN0cmluZ1tdID0gW107XG4gICAgbGluZXMucHVzaChgIyAke25hbWV9YCk7XG4gICAgbGluZXMucHVzaChcIlwiKTtcblxuICAgIC8vIFN1YnRpdGxlXG4gICAgY29uc3Qgc3VidGl0bGUgPSBpdC53ZWFwb25cbiAgICAgID8gYCR7Y2FwaXRhbGl6ZUZpcnN0KGl0LndlYXBvbkNhdGVnb3J5KX0gV2VhcG9uYFxuICAgICAgOiBpdC5hcm1vclxuICAgICAgICA/IGZvbGRlci5zcGxpdChcIi9cIikucG9wKCkgfHwgXCJBcm1vclwiXG4gICAgICAgIDogXCJcIjtcbiAgICBpZiAoc3VidGl0bGUpIGxpbmVzLnB1c2goYCMjIyAqJHtzdWJ0aXRsZX0qYCk7XG5cbiAgICAvLyBTdGF0cyBsaW5lc1xuICAgIGlmIChpdC53ZWFwb24pIHtcbiAgICAgIGxpbmVzLnB1c2goYCoqQ2F0ZWdvcnkqKjogJHtjYXBpdGFsaXplRmlyc3QoaXQud2VhcG9uQ2F0ZWdvcnkpfWApO1xuICAgICAgbGluZXMucHVzaChgKipEYW1hZ2UqKjogJHtpdC5kbWcxID8/IFwiXCJ9JHtpdC5kbWcyID8gYCAvICR7aXQuZG1nMn1gIDogXCJcIn1gKTtcbiAgICAgIGNvbnN0IHR5cGVzQm9keSA9IChBcnJheS5pc0FycmF5KGl0LmRtZ1R5cGUpID8gaXQuZG1nVHlwZSA6IFtpdC5kbWdUeXBlXSlcbiAgICAgICAgLmZpbHRlcigodDogYW55KSA9PiBCb29sZWFuKHQpKVxuICAgICAgICAubWFwKCh0OiBzdHJpbmcpID0+IERBTUFHRV9UWVBFX01BUFt0XSB8fCB0KTtcbiAgICAgIGxpbmVzLnB1c2goYCoqRGFtYWdlIFR5cGUqKjogJHt0eXBlc0JvZHkuam9pbihcIiwgXCIpfWApO1xuICAgICAgbGluZXMucHVzaChgKipSYW5nZSoqOiAke2l0LnJhbmdlID8/IFwiXHUyMDE0XCJ9YCk7XG4gICAgICBsaW5lcy5wdXNoKGAqKlJlbG9hZCoqOiAke2l0LnJlbG9hZCA/PyBcIlx1MjAxNFwifWApO1xuICAgICAgaWYgKGl0LmFtbW9UeXBlKSBsaW5lcy5wdXNoKGAqKkFtbW8gVHlwZSoqOiAke2l0LmFtbW9UeXBlfWApO1xuICAgICAgaWYgKEFycmF5LmlzQXJyYXkoaXQucHJvcGVydHkpICYmIGl0LnByb3BlcnR5Lmxlbmd0aCkge1xuICAgICAgICBjb25zdCBwcm9wc0JvZHkgPSBpdC5wcm9wZXJ0eS5tYXAoKHA6IHN0cmluZykgPT4gUFJPUEVSVFlfTUFQW3BdIHx8IHApO1xuICAgICAgICBsaW5lcy5wdXNoKGAqKlByb3BlcnRpZXMqKjogJHtwcm9wc0JvZHkuam9pbihcIiwgXCIpfWApO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAoaXQuYXJtb3IpIHtcbiAgICAgIGxpbmVzLnB1c2goYCoqQXJtb3IgQ2xhc3MqKjogJHtpdC5hY31gKTtcbiAgICAgIGlmIChpdC5zdGVhbHRoKSBsaW5lcy5wdXNoKGAqKlN0ZWFsdGggRGlzYWR2YW50YWdlKio6IHRydWVgKTtcbiAgICAgIGxpbmVzLnB1c2goXCJcIik7XG4gICAgfVxuXG4gICAgLy8gRGVzY3JpcHRpb24gd2l0aCBuZXN0ZWQgZW50cmllc1xuICAgIGNvbnN0IGRlc2MgPSBpdC5lbnRyaWVzID8/IGl0LmRlc2M7XG4gICAgaWYgKGRlc2MpIHtcbiAgICAgIGZvciAoY29uc3QgcCBvZiBBcnJheS5pc0FycmF5KGRlc2MpID8gZGVzYyA6IFtkZXNjXSkge1xuICAgICAgICBpZiAodHlwZW9mIHAgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgZm9yIChjb25zdCBsaW5lIG9mIHJlcGxhY2U1ZVRhZ3MocCkuc3BsaXQoXCJcXG5cIikpIHtcbiAgICAgICAgICAgIGxpbmVzLnB1c2gobGluZSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGxpbmVzLnB1c2goXCJcIik7XG4gICAgICAgIH0gZWxzZSBpZiAocCAmJiB0eXBlb2YgcCA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgICBpZiAobGluZXNbbGluZXMubGVuZ3RoIC0gMV0gPT09IFwiXCIpIHtcbiAgICAgICAgICAgIGxpbmVzLnBvcCgpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBsaW5lcy5wdXNoKGAjIyMjICR7cC5uYW1lfWApO1xuICAgICAgICAgIGNvbnN0IHN1YiA9IEFycmF5LmlzQXJyYXkocC5lbnRyaWVzKSA/IHAuZW50cmllcyA6IFtdO1xuICAgICAgICAgIGZvciAoY29uc3Qgc3Agb2Ygc3ViKSB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGxpbmUgb2YgcmVwbGFjZTVlVGFncyhzcCkuc3BsaXQoXCJcXG5cIikpIHtcbiAgICAgICAgICAgICAgbGluZXMucHVzaChsaW5lKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgbGluZXMucHVzaChcIlwiKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGNvbnN0IGJvZHkgPSBsaW5lcy5qb2luKFwiXFxuXCIpO1xuXG4gICAgb3V0LnB1c2goeyBwYXRoOiBgSXRlbXMvJHtmb2xkZXJ9LyR7c2FmZU5hbWV9Lm1kYCwgY29udGVudDogYCR7ZnJvbnRtYXR0ZXJ9XFxuXFxuJHtib2R5fWAgfSk7XG4gIH1cblxuICByZXR1cm4gb3V0LnNvcnQoKGEsYikgPT4gYS5wYXRoLmxvY2FsZUNvbXBhcmUoYi5wYXRoKSk7XG59IiwgImltcG9ydCB7IGdldEZ1bGxTb3VyY2VOYW1lIH0gZnJvbSBcIi4vc291cmNlTWFwXCI7XG5pbXBvcnQgeyBmb3JtYXRTaXplQWJicmV2LCBmb3JtYXRBbGlnbm1lbnRBYmJyZXYgfSBmcm9tIFwiLi4vYmVzdGlhcnlcIjtcbmltcG9ydCB7IGZvcm1hdFJhbmdlLCBmb3JtYXRUaW1lLCBmb3JtYXREdXJhdGlvbiwgU0NIT09MX01BUCB9IGZyb20gXCIuLi9zcGVsbHNcIjtcbmltcG9ydCB7IFBST1BFUlRZX01BUCwgREFNQUdFX1RZUEVfTUFQLCBJVEVNX1RZUEVfTUFQIH0gZnJvbSBcIi4uL2l0ZW1zXCI7XG5pbXBvcnQgeyByZXBsYWNlNWVUYWdzIH0gZnJvbSBcIi4vdGFnUmVwbGFjZXJcIjtcblxuZnVuY3Rpb24gYmxhbmtVbmRlZmluZWQodmFsOiBhbnkpOiBhbnkge1xuICByZXR1cm4gdmFsID09PSB1bmRlZmluZWQgPyBcIlwiIDogdmFsO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gY2FwKHN0cjogYW55KTogc3RyaW5nIHtcbiAgaWYgKHR5cGVvZiBzdHIgIT09IFwic3RyaW5nXCIpIHJldHVybiBcIlwiO1xuICByZXR1cm4gc3RyLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgc3RyLnNsaWNlKDEpO1xufVxuXG5leHBvcnQgY29uc3QgQUJJTElUWV9GVUxMOiBSZWNvcmQ8c3RyaW5nLHN0cmluZz4gPSB7XG4gIHN0cjogXCJTdHJlbmd0aFwiLFxuICBkZXg6IFwiRGV4dGVyaXR5XCIsXG4gIGNvbjogXCJDb25zdGl0dXRpb25cIixcbiAgaW50OiBcIkludGVsbGlnZW5jZVwiLFxuICB3aXM6IFwiV2lzZG9tXCIsXG4gIGNoYTogXCJDaGFyaXNtYVwiLFxufTtcblxuZXhwb3J0IGNvbnN0IFNJWkVfTUFQOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+ID0ge1xuICBUOiBcIlRpbnlcIixcbiAgUzogXCJTbWFsbFwiLFxuICBNOiBcIk1lZGl1bVwiLFxuICBMOiBcIkxhcmdlXCIsXG4gIEg6IFwiSHVnZVwiLFxuICBHOiBcIkdhcmdhbnR1YW5cIlxufTtcblxuLy8gXHUyNTAwXHUyNTAwXHUyNTAwIFVuaXZlcnNhbCBmcm9udG1hdHRlciBrZXlzIFx1MjUwMFx1MjUwMFx1MjUwMCAgXG5leHBvcnQgY29uc3QgRk1fRklFTERTID0ge1xuICBBQklMSVRZX0JPTlVTRVM6ICAgIFwiYWJpbGl0eV9ib251c2VzXCIsXG4gIEFDOiAgICAgICAgICAgICAgICAgXCJBQ1wiLFxuICBBTElHTk1FTlQ6ICAgICAgICAgIFwiQWxpZ25tZW50XCIsXG4gIEFNTU9fVFlQRTogICAgICAgICAgXCJBbW1vIFR5cGVcIixcbiAgQVJNT1JfUFJPRklDSUVOQ0lFUzpcImFybW9yLXByb2ZcIixcbiAgQVRUQUNLX1RZUEU6ICAgICAgICBcImF0dGFja190eXBlXCIsXG4gIEFUVFVORU1FTlQ6ICAgICAgICAgXCJBdHR1bmVtZW50XCIsXG4gIEFUVFVORV9SRVE6ICAgICAgICAgXCJBdHR1bmVfUmVxXCIsXG4gIENBU1RJTkdfVElNRTogICAgICAgXCJjYXN0aW5nX3RpbWVcIixcbiAgQ0hBUklTTUE6ICAgICAgICAgICBcImNoYXJpc21hXCIsXG4gIENIQV9NT0Q6ICAgICAgICAgICAgXCJjaGFfbW9kXCIsXG4gIENPTkNFTlRSQVRJT046ICAgICAgXCJjb25jZW50cmF0aW9uXCIsXG4gIENPTkRJVElPTl9JTU06ICAgICAgXCJjb25kX2ltbXVuaXR5XCIsXG4gIENPTlNUSVRVVElPTjogICAgICAgXCJjb25zdGl0dXRpb25cIixcbiAgQ09OX01PRDogICAgICAgICAgICBcImNvbl9tb2RcIixcbiAgQ09TVDogICAgICAgICAgICAgICBcImNvc3RcIixcbiAgQ09NUE9ORU5UUzogICAgICAgICBcIkNvbXBvbmVudHNcIixcbiAgQ0hBTExFTkdFX1JBVElORzogICBcIkNSXCIsXG4gIERBTUFHRV9UWVBFOiAgICAgICAgXCJkYW1hZ2VfdHlwZVwiLFxuICBEQU1BR0VfVFlQRVM6ICAgICAgIFwiZGFtYWdlVHlwZXNcIixcbiAgREFNQUdFOiAgICAgICAgICAgICBcImRhbWFnZVwiLFxuICBEQU1BR0VfUkVTOiAgICAgICAgIFwiZG1nX3Jlc2lzdGFuY2VcIixcbiAgREFNQUdFX0lNTTogICAgICAgICBcImRtZ19pbW11bml0eVwiLFxuICBERVhURVJJVFk6ICAgICAgICAgIFwiZGV4dGVyaXR5XCIsXG4gIERFWF9NT0Q6ICAgICAgICAgICAgXCJkZXhfbW9kXCIsXG4gIERVUkFUSU9OOiAgICAgICAgICAgXCJkdXJhdGlvblwiLFxuICBSVUxFU0VUOiAgICAgICAgICAgIFwicnVsZXNldFwiLFxuICBIUDogICAgICAgICAgICAgICAgIFwiSFBcIixcbiAgSU5URUxMSUdFTkNFOiAgICAgICBcImludGVsbGlnZW5jZVwiLFxuICBJTlRfTU9EOiAgICAgICAgICAgIFwiaW50X21vZFwiLFxuICBMQU5HVUFHRVM6ICAgICAgICAgIFwibGFuZ3VhZ2VzXCIsXG4gIExFVkVMOiAgICAgICAgICAgICAgXCJsZXZlbFwiLFxuICBNQUdJQ0FMOiAgICAgICAgICAgIFwibWFnaWNhbFwiLFxuICBNQVRFUklBTDogICAgICAgICAgIFwibWF0ZXJpYWxcIixcbiAgTkFNRTogICAgICAgICAgICAgICBcIm5hbWVcIixcbiAgUFJPUEVSVElFUzogICAgICAgICBcInByb3BlcnRpZXNcIixcbiAgUkFOR0U6ICAgICAgICAgICAgICBcInJhbmdlXCIsXG4gIFJBUklUWTogICAgICAgICAgICAgXCJyYXJpdHlcIixcbiAgUkVMT0FEOiAgICAgICAgICAgICBcInJlbG9hZFwiLFxuICBSSVRVQUw6ICAgICAgICAgICAgIFwicml0dWFsXCIsXG4gIFNBVkU6ICAgICAgICAgICAgICAgXCJzYXZlXCIsXG4gIFNBVklOR19USFJPV1M6ICAgICAgXCJzYXZpbmdfdGhyb3dzXCIsXG4gIFNDSE9PTDogICAgICAgICAgICAgXCJzY2hvb2xcIixcbiAgU0VOU0VTOiAgICAgICAgICAgICBcInNlbnNlc1wiLFxuICBTSVpFOiAgICAgICAgICAgICAgIFwic2l6ZVwiLFxuICBTS0lMTFM6ICAgICAgICAgICAgIFwic2tpbGxzXCIsXG4gIFNLSUxMX0NIT0lDRV9MSVNUOiAgXCJza2lsbF9jaG9pY2VfbGlzdFwiLFxuICBTT01BVElDOiAgICAgICAgICAgIFwic29tYXRpY1wiLFxuICBTT1VSQ0U6ICAgICAgICAgICAgIFwic291cmNlXCIsXG4gIFNQRUNJRVM6ICAgICAgICAgICAgXCJzcGVjaWVzXCIsXG4gIFNQRUVEOiAgICAgICAgICAgICAgXCJzcGVlZFwiLFxuICBTUEVMTF9DQVNUX01PRDogICAgIFwiU3BlbGwgQ2FzdCBNb2RcIixcbiAgU1BFTExfUkFOR0U6ICAgICAgICBcIlJhbmdlXCIsXG4gIFNURUFMVEhfRElTQURWQU5UQUdFOiBcInN0ZWFsdGhEaXNhZHZhbnRhZ2VcIixcbiAgU1RSRU5HVEg6ICAgICAgICAgICBcInN0cmVuZ3RoXCIsXG4gIFNUUl9NT0Q6ICAgICAgICAgICAgXCJzdHJfbW9kXCIsXG4gIFNVQlJBQ0VTOiAgICAgICAgICAgXCJzdWJyYWNlc1wiLFxuICBUT09MX1BST0ZJQ0lFTkNJRVM6IFwidG9vbC1wcm9mXCIsXG4gIFRPT0xfQ0hPSUNFX0xJU1Q6ICBcInRvb2xfY2hvaWNlX2xpc3RcIixcbiAgVFJBSVRTOiAgICAgICAgICAgICBcInRyYWl0c1wiLFxuICBUWVBFOiAgICAgICAgICAgICAgIFwidHlwZVwiLFxuICBWQVJJQU5UOiAgICAgICAgICAgIFwiVmFyaWFudFwiLFxuICBWRVJCQUw6ICAgICAgICAgICAgIFwidmVyYmFsXCIsXG4gIFZFUk1VTjogICAgICAgICAgICAgXCJ2ZXJtdW5cIixcbiAgV0VBUE9OX1BST0ZJQ0lFTkNJRVM6IFwid2VhcG9uLXByb2ZcIixcbiAgV0VJR0hUOiAgICAgICAgICAgICBcIndlaWdodFwiLFxuICBXSVNET006ICAgICAgICAgICAgIFwid2lzZG9tXCIsXG4gIFdJU19NT0Q6ICAgICAgICAgICAgXCJ3aXNfbW9kXCIsXG59IGFzIGNvbnN0O1xuXG5leHBvcnQgdHlwZSBGTUtleSA9IGtleW9mIHR5cGVvZiBGTV9GSUVMRFM7XG5leHBvcnQgdHlwZSBGcm9udG1hdHRlciA9IFBhcnRpYWw8UmVjb3JkPHR5cGVvZiBGTV9GSUVMRFNbRk1LZXldLCB1bmtub3duPj47XG5cbi8vIFx1MjUwMFx1MjUwMFx1MjUwMCBEZWZpbml0aW9uIG9mIGEgc2luZ2xlIGZpZWxkIG1hcHBpbmcgXHUyNTAwXHUyNTAwXHUyNTAwXG5leHBvcnQgaW50ZXJmYWNlIEZpZWxkRGVmIHtcbiAgLyoqIFdoaWNoIGNhbGxcdTIwMTBzaWduIChrZXkgaW4gRk1fRklFTERTKSAqL1xuICBjYWxsU2lnbjogRk1LZXk7XG4gIC8qKiBXaGljaCBKU09OIHByb3BlcnR5IHRvIHJlYWQgKi9cbiAganNvbktleTogIHN0cmluZyB8IHN0cmluZ1tdO1xuICAvKiogT3B0aW9uYWwgdHJhbnNmb3JtZXI6IHJhdyBKU09OIFx1MjE5MiBmaW5hbCB2YWx1ZSAqL1xuICBjb252PzogICAgKHJhdzogYW55LCBhbGxKc29uPzogYW55KSA9PiB1bmtub3duO1xufVxuXG5jb25zdCB1bmlmaWVkQXJtb3JQcm9mcyA9ICh2YWw6IGFueSk6IHN0cmluZ1tdID0+XG4gIEFycmF5LmlzQXJyYXkodmFsPy5hcm1vcikgPyB2YWwuYXJtb3IubWFwKGNhcCkgOlxuICBBcnJheS5pc0FycmF5KHZhbCkgPyB2YWwubWFwKGNhcCkgOiBbXTtcblxuLy8gZnJvbnRtYXR0ZXIudHNcblxuZXhwb3J0IGZ1bmN0aW9uIHVuaWZpZWRXZWFwb25Qcm9mcyh2YWw6IGFueSk6IHN0cmluZ1tdIHtcbiAgLy8gcHVsbCB0aGUgXHUyMDFDd2VhcG9uc1x1MjAxRCBhcnJheSBvZmYgZWl0aGVyIGEgcmF3IGFycmF5IG9yIGEgc3RhcnRpbmdQcm9maWNpZW5jaWVzIG9iamVjdFxuICBjb25zdCByYXdBcnI6IGFueVtdID0gQXJyYXkuaXNBcnJheSh2YWw/LndlYXBvbnMpXG4gICAgPyB2YWwud2VhcG9uc1xuICAgIDogQXJyYXkuaXNBcnJheSh2YWwpXG4gICAgPyB2YWxcbiAgICA6IFtdO1xuXG4gIGNvbnN0IG91dCA9IG5ldyBTZXQ8c3RyaW5nPigpO1xuXG4gIGZ1bmN0aW9uIGhhbmRsZU9uZShlbnRyeTogYW55KSB7XG4gICAgaWYgKEFycmF5LmlzQXJyYXkoZW50cnkpKSB7XG4gICAgICAvLyBmbGF0dGVuIG5lc3RlZCBhcnJheXNcbiAgICAgIGVudHJ5LmZvckVhY2goaGFuZGxlT25lKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAodHlwZW9mIGVudHJ5ID09PSBcInN0cmluZ1wiKSB7XG4gICAgICBjb25zdCBsaXQgPSBlbnRyeS50cmltKCkudG9Mb3dlckNhc2UoKTtcbiAgICAgIGlmIChsaXQgPT09IFwic2ltcGxlXCIpIHtcbiAgICAgICAgb3V0LmFkZChcIlNpbXBsZSBXZWFwb25zXCIpO1xuICAgICAgfSBlbHNlIGlmIChsaXQgPT09IFwibWFydGlhbFwiKSB7XG4gICAgICAgIG91dC5hZGQoXCJNYXJ0aWFsIFdlYXBvbnNcIik7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBkZXRlY3QgdGFnZ2VkIGl0ZW1zIHZzIHNpbXBsZSB3b3Jkc1xuICAgICAgICBjb25zdCB0ZXh0ID0gZW50cnkuc3RhcnRzV2l0aChcIntAXCIpXG4gICAgICAgICAgPyByZXBsYWNlNWVUYWdzKGVudHJ5KVxuICAgICAgICAgIDogY2FwKGVudHJ5KTtcbiAgICAgICAgb3V0LmFkZCh0ZXh0KTtcbiAgICAgIH1cbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAoZW50cnkgJiYgdHlwZW9mIGVudHJ5ID09PSBcIm9iamVjdFwiICYmIGVudHJ5LnByb2ZpY2llbmN5KSB7XG4gICAgICAvLyB7IHByb2ZpY2llbmN5OiBcImZpcmVhcm1zXCIsIG9wdGlvbmFsOiB0cnVlIH1cbiAgICAgIGNvbnN0IG5hbWUgPSBjYXAoZW50cnkucHJvZmljaWVuY3kpO1xuICAgICAgb3V0LmFkZChlbnRyeS5vcHRpb25hbCA/IGAke25hbWV9IChvcHRpb25hbClgIDogbmFtZSk7XG4gICAgfVxuICB9XG5cbiAgcmF3QXJyLmZvckVhY2goaGFuZGxlT25lKTtcbiAgcmV0dXJuIFsuLi5vdXRdO1xufVxuXG5cbmNvbnN0IHVuaWZpZWRTYXZlcyA9ICh2YWw6IGFueSk6IHN0cmluZ1tdID0+IHtcbiAgaWYgKEFycmF5LmlzQXJyYXkodmFsKSkge1xuICAgICAgcmV0dXJuIHZhbC5tYXAoKGs6IHN0cmluZykgPT5cbiAgICAgICAgKHsgc3RyOiBcIlN0cmVuZ3RoXCIsIGRleDogXCJEZXh0ZXJpdHlcIiwgY29uOiBcIkNvbnN0aXR1dGlvblwiLFxuICAgICAgICAgIGludDogXCJJbnRlbGxpZ2VuY2VcIiwgd2lzOiBcIldpc2RvbVwiLCBjaGE6IFwiQ2hhcmlzbWFcIiB9W2tdID8/IGsudG9VcHBlckNhc2UoKSlcbiAgICAgICk7XG4gIH1cbiAgaWYgKHR5cGVvZiB2YWwgPT09IFwib2JqZWN0XCIgJiYgdmFsICE9PSBudWxsKSB7XG4gICAgcmV0dXJuIE9iamVjdC5rZXlzKHZhbCkubWFwKGsgPT4gay50b1VwcGVyQ2FzZSgpKTtcbiAgfVxuICByZXR1cm4gW107XG59O1xuXG5leHBvcnQgY29uc3QgdW5pZmllZFNraWxscyA9ICh2YWw6IGFueSk6IHN0cmluZ1tdID0+IHtcbiAgLy8gMSkgXHUyMDFDQmVzdGlhcnlcdTIwMUQgc3R5bGU6IGZsYXQgb2JqZWN0IG1hcHBpbmcgc2tpbGxcdTIxOTJtb2RpZmllclxuICBpZiAoXG4gICAgdmFsICYmXG4gICAgIUFycmF5LmlzQXJyYXkodmFsKSAmJlxuICAgIHR5cGVvZiB2YWwgPT09IFwib2JqZWN0XCIgJiZcbiAgICAvLyBlbnN1cmUgZXZlcnkgdmFsdWUgaXMgYSBzdHJpbmcgb3IgbnVtYmVyXG4gICAgT2JqZWN0LnZhbHVlcyh2YWwpLmV2ZXJ5KHYgPT4gdHlwZW9mIHYgPT09IFwic3RyaW5nXCIgfHwgdHlwZW9mIHYgPT09IFwibnVtYmVyXCIpXG4gICkge1xuICAgIHJldHVybiBPYmplY3QuZW50cmllcyh2YWwpLm1hcChcbiAgICAgIChbc2tpbGwsIG1vZF0pID0+IGAke2NhcChza2lsbCl9ICR7bW9kfWAudHJpbSgpXG4gICAgKTtcbiAgfVxuXG4gIC8vIDIpIG5lc3RlZCB1bmRlciAuc2tpbGxzIC8gLnNraWxsUHJvZmljaWVuY2llcyAvIC5za2lsbFByb2ZcbiAgaWYgKHZhbCAmJiAhQXJyYXkuaXNBcnJheSh2YWwpICYmIHR5cGVvZiB2YWwgPT09IFwib2JqZWN0XCIpIHtcbiAgICBjb25zdCBuZXN0ZWQgPSAodmFsIGFzIGFueSkuc2tpbGxzXG4gICAgICA/PyAodmFsIGFzIGFueSkuc2tpbGxQcm9mXG4gICAgICA/PyAodmFsIGFzIGFueSkuc2tpbGxQcm9maWNpZW5jaWVzO1xuICAgIHJldHVybiB1bmlmaWVkU2tpbGxzKG5lc3RlZCk7XG4gIH1cblxuICAvLyAzKSBhcnJheS1zdHlsZVxuICBpZiAoIUFycmF5LmlzQXJyYXkodmFsKSkgcmV0dXJuIFtdO1xuXG4gIGNvbnN0IG91dCA9IG5ldyBTZXQ8c3RyaW5nPigpO1xuICBmb3IgKGNvbnN0IGUgb2YgdmFsKSB7XG4gICAgLy8gM2EpIHsgYW55OiBOIH1cbiAgICBpZiAoZSAmJiB0eXBlb2YgZSA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgKGUgYXMgYW55KS5hbnkgPT09IFwibnVtYmVyXCIpIHtcbiAgICAgIG91dC5hZGQoYENob29zZSAkeyhlIGFzIGFueSkuYW55fWApO1xuICAgICAgY29udGludWU7XG4gICAgfVxuICAgIC8vIDNiKSB7IGNob29zZTogeyBjb3VudCwgXHUyMDI2IH0gfVxuICAgIGlmIChlICYmIHR5cGVvZiBlID09PSBcIm9iamVjdFwiICYmIChlIGFzIGFueSkuY2hvb3NlKSB7XG4gICAgICBjb25zdCBjbnQgPSAoZSBhcyBhbnkpLmNob29zZS5jb3VudCA/PyAxO1xuICAgICAgb3V0LmFkZChgQ2hvb3NlICR7Y250fWApO1xuICAgIH1cbiAgICAvLyAzYykgZml4ZWQgZmxhZ3MgZm9vOiB0cnVlXG4gICAgaWYgKGUgJiYgdHlwZW9mIGUgPT09IFwib2JqZWN0XCIpIHtcbiAgICAgIGZvciAoY29uc3QgW2ssIHZdIG9mIE9iamVjdC5lbnRyaWVzKGUpKSB7XG4gICAgICAgIGlmICh2ID09PSB0cnVlKSBvdXQuYWRkKGNhcChrKSk7XG4gICAgICB9XG4gICAgfVxuICAgIC8vIDNkKSBsaXRlcmFsIHN0cmluZ3NcbiAgICBpZiAodHlwZW9mIGUgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgIG91dC5hZGQoY2FwKGUpKTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gWy4uLm91dF07XG59O1xuXG5cbiBcbmV4cG9ydCBjb25zdCB1bmlmaWVkVG9vbFByb2ZzID0gKHZhbDogYW55KTogc3RyaW5nW10gPT4ge1xuICAvLyBwdWxsIG5lc3RlZCBhcnJheSBpZiBzb21lb25lIHBhc3NlZCB5b3UgdGhlIHdob2xlIHN0YXJ0aW5nUHJvZmljaWVuY2llcyBvYmpcbiAgbGV0IGVudHJpZXM6IGFueVtdID0gQXJyYXkuaXNBcnJheSh2YWwpID8gdmFsXG4gICAgOiBBcnJheS5pc0FycmF5KHZhbD8udG9vbFByb2ZpY2llbmNpZXMpID8gdmFsLnRvb2xQcm9maWNpZW5jaWVzXG4gICAgOiBBcnJheS5pc0FycmF5KHZhbD8udG9vbHMpICAgICAgICAgICAgID8gdmFsLnRvb2xzXG4gICAgOiBbXTtcblxuICBjb25zdCBvdXQgPSBuZXcgU2V0PHN0cmluZz4oKTtcbiAgbGV0IHNhd0Nob29zZSA9IGZhbHNlO1xuXG4gIGZvciAoY29uc3QgZSBvZiBlbnRyaWVzKSB7XG4gICAgaWYgKHR5cGVvZiBlID09PSBcInN0cmluZ1wiKSB7XG4gICAgICBvdXQuYWRkKGNhcChlKSk7XG4gICAgICBjb250aW51ZTtcbiAgICB9XG5cbiAgICBpZiAoZT8uY2hvb3NlKSB7XG4gICAgICBjb25zdCBjbnQgPSBlLmNob29zZS5jb3VudCA/PyAxO1xuICAgICAgc2F3Q2hvb3NlID0gdHJ1ZTtcbiAgICAgIG91dC5hZGQoYENob29zZSAke2NudH1gKTtcbiAgICB9XG5cbiAgICAvLyBwdWxsIG91dCBhbnkgZml4ZWQgXHUyMDFDZm9vOiB0cnVlXHUyMDFEIG9yIG51bWVyaWMgXHUyMDFDYW55Rm9vOiBOXHUyMDFEXG4gICAgZm9yIChjb25zdCBbayx2XSBvZiBPYmplY3QuZW50cmllcyhlKSkge1xuICAgICAgaWYgKHYgPT09IHRydWUpIHtcbiAgICAgICAgb3V0LmFkZChjYXAoaykpO1xuICAgICAgfSBlbHNlIGlmICh0eXBlb2YgdiA9PT0gXCJudW1iZXJcIiAmJiBrLnN0YXJ0c1dpdGgoXCJhbnlcIikpIHtcbiAgICAgICAgLy8gZS5nLiBhbnlBcnRpc2Fuc1Rvb2w6MVxuICAgICAgICBjb25zdCByYXcgPSBrLnJlcGxhY2UoL15hbnkvLCBcIlwiKTtcbiAgICAgICAgY29uc3Qgc3BhY2VkID0gcmF3XG4gICAgICAgICAgLnJlcGxhY2UoLyhbYS16XSkoW0EtWl0pL2csIFwiJDEgJDJcIilcbiAgICAgICAgICAuc3BsaXQoXCIgXCIpXG4gICAgICAgICAgLm1hcChjYXApXG4gICAgICAgICAgLmpvaW4oXCIgXCIpO1xuICAgICAgICBvdXQuYWRkKGBDaG9vc2UgJHt2fSAke3NwYWNlZH1gKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICByZXR1cm4gWy4uLm91dF07XG59O1xuXG5leHBvcnQgY29uc3QgQUxMX0ZJRUxEX0RFRlM6IEZpZWxkRGVmW10gPSBbXG4gIC8vIFx1MjUwMFx1MjUwMFx1MjUwMCBDb3JlIFx1MjUwMFx1MjUwMFx1MjUwMFxuICB7IGNhbGxTaWduOiBcIk5BTUVcIiwgIGpzb25LZXk6IFwibmFtZVwiIH0sXG4gIHsgY2FsbFNpZ246IFwiU09VUkNFXCIsIGpzb25LZXk6IFtcInNvdXJjZVwiXSwgY29udjogKHJhdywgYWxsKSA9PiB7XG4gICAgICBjb25zdCBvdXQgPSBuZXcgU2V0PHN0cmluZz4oKTtcbiAgICAgIGNvbnN0IGFyciA9IEFycmF5LmlzQXJyYXkocmF3KSA/IHJhdyA6IFtyYXddO1xuICAgICAgYXJyLmZvckVhY2goc3JjID0+IG91dC5hZGQoZ2V0RnVsbFNvdXJjZU5hbWUoc3JjLCAoYWxsIGFzIGFueSkuX2VkaXRpb25JZCkpKTtcbiAgICAgIGZvciAoY29uc3Qgb3Mgb2YgYWxsLm90aGVyU291cmNlcyA/PyBbXSkgb3V0LmFkZChnZXRGdWxsU291cmNlTmFtZShvcy5zb3VyY2UsIChhbGwgYXMgYW55KS5fZWRpdGlvbklkKSk7XG4gICAgICBmb3IgKGNvbnN0IHJlcCBvZiBhbGwucmVwcmludGVkQXMgPz8gW10pIHtcbiAgICAgICAgY29uc3QgWywgc3JjXSA9IChyZXAgYXMgc3RyaW5nKS5zcGxpdChcInxcIik7XG4gICAgICAgIG91dC5hZGQoZ2V0RnVsbFNvdXJjZU5hbWUoc3JjLCAoYWxsIGFzIGFueSkuX2VkaXRpb25JZCkpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIFsuLi5vdXRdO1xuICB9fSxcblxuICAvLyBcdTI1MDBcdTI1MDBcdTI1MDAgUHJvZmljaWVuY2llcyBcdTI1MDBcdTI1MDBcdTI1MDBcbiAgeyBjYWxsU2lnbjogXCJBUk1PUl9QUk9GSUNJRU5DSUVTXCIsICBqc29uS2V5OiBbXCJhcm1vclByb2ZpY2llbmNpZXNcIiwgXCJhcm1vclByb2ZzXCIsIFwic3RhcnRpbmdQcm9maWNpZW5jaWVzXCJdLCBjb252OiB1bmlmaWVkQXJtb3JQcm9mcyB9LFxuICB7IFxuICAgIGNhbGxTaWduOiBcIldFQVBPTl9QUk9GSUNJRU5DSUVTXCIsXG4gICAganNvbktleTogW1wid2VhcG9uUHJvZmljaWVuY2llc1wiLFwid2VhcG9uUHJvZnNcIixcInN0YXJ0aW5nUHJvZmljaWVuY2llc1wiXSxcbiAgICBjb252OiB1bmlmaWVkV2VhcG9uUHJvZnNcbiAgfSxcbiAgeyBjYWxsU2lnbjogXCJUT09MX1BST0ZJQ0lFTkNJRVNcIiwgICBqc29uS2V5OiBbXCJ0b29sUHJvZmljaWVuY2llc1wiLCBcInRvb2xQcm9mc1wiLCBcInN0YXJ0aW5nUHJvZmljaWVuY2llc1wiXSwgY29udjogdW5pZmllZFRvb2xQcm9mcyB9LFxuICB7XG4gICAgY2FsbFNpZ246IFwiVE9PTF9DSE9JQ0VfTElTVFwiLFxuICAgIGpzb25LZXk6IFtcInRvb2xQcm9maWNpZW5jaWVzXCIsIFwidG9vbFByb2ZzXCIsIFwic3RhcnRpbmdQcm9maWNpZW5jaWVzXCJdLFxuICAgIGNvbnY6IChyYXc6IGFueSkgPT4ge1xuICAgICAgY29uc3QgYXJyID0gQXJyYXkuaXNBcnJheShyYXcpXG4gICAgICAgID8gcmF3XG4gICAgICAgIDogQXJyYXkuaXNBcnJheShyYXc/LnRvb2xQcm9maWNpZW5jaWVzKVxuICAgICAgICA/IHJhdy50b29sUHJvZmljaWVuY2llc1xuICAgICAgICA6IEFycmF5LmlzQXJyYXkocmF3Py50b29scylcbiAgICAgICAgPyByYXcudG9vbHNcbiAgICAgICAgOiBbXTtcbiAgICAgIGNvbnN0IGNob2ljZSA9IGFyci5maW5kKChlOiBhbnkpID0+IGU/LmNob29zZSk7XG4gICAgICByZXR1cm4gY2hvaWNlPy5jaG9vc2U/LmZyb20/Lm1hcCgoczogc3RyaW5nKSA9PiBjYXAocykpID8/IFtdO1xuICAgIH1cbiAgfSxcbiAgeyBjYWxsU2lnbjogXCJTQVZJTkdfVEhST1dTXCIsICAgICAgICBqc29uS2V5OiBbXCJzYXZlXCIsIFwicHJvZmljaWVuY3lcIl0sIGNvbnY6IHVuaWZpZWRTYXZlcyB9LFxuICB7XG4gICAgY2FsbFNpZ246IFwiU0tJTExTXCIsXG4gICAganNvbktleTogW1wic2tpbGxcIiwgXCJza2lsbFByb2ZcIiwgXCJza2lsbFByb2ZpY2llbmNpZXNcIiwgXCJzdGFydGluZ1Byb2ZpY2llbmNpZXNcIl0sXG4gICAgY29udjogdW5pZmllZFNraWxsc1xuICB9LFxuXG4gIHtcbiAgICBjYWxsU2lnbjogXCJTS0lMTF9DSE9JQ0VfTElTVFwiLFxuICAgIGpzb25LZXk6IFtcInNraWxsXCIsIFwic2tpbGxQcm9mXCIsIFwic2tpbGxQcm9maWNpZW5jaWVzXCIsIFwic3RhcnRpbmdQcm9maWNpZW5jaWVzXCJdLFxuICAgIGNvbnY6IChyYXc6IGFueSkgPT4ge1xuICAgICAgLy8gbm9ybWFsaXplIGludG8gYW4gYXJyYXkgb2YgZW50cmllc1xuICAgICAgY29uc3QgYXJyOiBhbnlbXSA9IEFycmF5LmlzQXJyYXkocmF3KVxuICAgICAgICA/IHJhd1xuICAgICAgICA6IEFycmF5LmlzQXJyYXkocmF3Py5za2lsbFByb2ZpY2llbmNpZXMpXG4gICAgICAgID8gcmF3LnNraWxsUHJvZmljaWVuY2llc1xuICAgICAgICA6IEFycmF5LmlzQXJyYXkocmF3Py5za2lsbHMpXG4gICAgICAgID8gcmF3LnNraWxsc1xuICAgICAgICA6IEFycmF5LmlzQXJyYXkocmF3Py5za2lsbFByb2YpXG4gICAgICAgID8gcmF3LnNraWxsUHJvZlxuICAgICAgICA6IFtdO1xuXG4gICAgICAvLyBmaW5kIHRoZSBvbmUgZW50cnkgdGhhdCByZXByZXNlbnRzIHRoZSBcdTIwMUNjaG9vc2VcdTIwMUQgYnVja2V0XG4gICAgICBjb25zdCBjaG9pY2VPYmogPSBhcnIuZmluZChlID0+IGU/LmNob29zZSB8fCB0eXBlb2YgZS5hbnkgPT09IFwibnVtYmVyXCIpO1xuICAgICAgaWYgKCFjaG9pY2VPYmopIHJldHVybiBbXTtcblxuICAgICAgLy8gZXhwbGljaXQgXHUyMDFDY2hvb3NlIGZyb20gWyAuLi4gXVx1MjAxRFxuICAgICAgaWYgKGNob2ljZU9iai5jaG9vc2UgJiYgQXJyYXkuaXNBcnJheShjaG9pY2VPYmouY2hvb3NlLmZyb20pKSB7XG4gICAgICAgIHJldHVybiBjaG9pY2VPYmouY2hvb3NlLmZyb20ubWFwKGNhcCk7XG4gICAgICB9XG5cbiAgICAgIC8vIHRoZSBcdTIwMUNhbnk6IDNcdTIwMUQgc2hvcnRoYW5kIFx1MjE5MiBvZmZlciBldmVyeSBza2lsbFxuICAgICAgaWYgKHR5cGVvZiBjaG9pY2VPYmouYW55ID09PSBcIm51bWJlclwiKSB7XG4gICAgICAgIC8vIFNLSUxMX09QVElPTlMgaXMgeW91ciBjb25zdCBbXCJBY3JvYmF0aWNzXCIsIFwiQW5pbWFsIEhhbmRsaW5nXCIsIFx1MjAyNl1cbiAgICAgICAgcmV0dXJuIFNLSUxMX09QVElPTlM7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBbXTtcbiAgICB9XG4gIH0sXG4gIHsgY2FsbFNpZ246IFwiU1BFTExfQ0FTVF9NT0RcIixqc29uS2V5OiBcInNwZWxsY2FzdGluZ0FiaWxpdHlcIiwgIFxuICAgIGNvbnY6IChyYXcpID0+IHtcbiAgICAvLyByYXcgbWlnaHQgYmUgXCJjaGFcIiBvciBcIkNIQVwiXG4gICAgY29uc3Qga2V5ID0gU3RyaW5nKHJhdykudG9Mb3dlckNhc2UoKTtcbiAgICByZXR1cm4gQUJJTElUWV9GVUxMW2tleV0gfHwga2V5LnRvVXBwZXJDYXNlKCk7XG4gIH19LFxuXG4gIHtcbiAgICBjYWxsU2lnbjogXCJSVUxFU0VUXCIsXG4gICAganNvbktleTogXCJuYW1lXCIsXG4gICAgLy8gaWdub3JlIHRoZSByYXcgdmFsdWUsIGFsd2F5cyBwcmludCBIRUxMT1xuICAgIGNvbnY6IChfcmF3LCBfYWxsKSA9PiBcIkQmRCA1ZSAoMjAyNSlcIixcbiAgfSwgXG5cbiAgLy8gXHUyNTAwXHUyNTAwXHUyNTAwIFNwZWxscyBcdTI1MDBcdTI1MDBcdTI1MDBcbiAgeyBjYWxsU2lnbjogXCJMRVZFTFwiLCAgICAgICAgIGpzb25LZXk6IFwibGV2ZWxcIiB9LFxuICB7IGNhbGxTaWduOiBcIlNDSE9PTFwiLCAgICAgICAganNvbktleTogXCJzY2hvb2xcIiwgICBjb252OiBzID0+IFNDSE9PTF9NQVBbc10gPz8gcyB9LFxuICB7IGNhbGxTaWduOiBcIkNBU1RJTkdfVElNRVwiLCAganNvbktleTogXCJ0aW1lXCIsICAgICBjb252OiBmb3JtYXRUaW1lIH0sXG4gIHsgY2FsbFNpZ246IFwiU1BFTExfUkFOR0VcIiwgICBqc29uS2V5OiBcInJhbmdlXCIsICAgIGNvbnY6IGZvcm1hdFJhbmdlIH0sXG4gIHsgY2FsbFNpZ246IFwiRFVSQVRJT05cIiwgICAgICBqc29uS2V5OiBcImR1cmF0aW9uXCIsIGNvbnY6IGZvcm1hdER1cmF0aW9uIH0sXG4gIHsgY2FsbFNpZ246IFwiVkVSQkFMXCIsICAgICAgICBqc29uS2V5OiBcImNvbXBvbmVudHNcIiwgY29udjogKGM6YW55KSA9PiAhIWMudiB9LFxuICB7IGNhbGxTaWduOiBcIlNPTUFUSUNcIiwgICAgICAganNvbktleTogXCJjb21wb25lbnRzXCIsIGNvbnY6IChjOmFueSkgPT4gISFjLnMgfSxcbiAgeyBjYWxsU2lnbjogXCJNQVRFUklBTFwiLCAgICAgIGpzb25LZXk6IFwiY29tcG9uZW50c1wiLCBjb252OiAoYzphbnkpID0+ICEhYy5tIH0sXG4gIHsgY2FsbFNpZ246IFwiQ09NUE9ORU5UU1wiLFxuICAgIGpzb25LZXk6ICBcImNvbXBvbmVudHNcIixcbiAgICBjb252OiAoYzogYW55KTogc3RyaW5nW10gPT4ge1xuICAgICAgaWYgKCFjLm0pIHJldHVybiBbXTtcblxuICAgICAgY29uc3QgcmF3ID0gQXJyYXkuaXNBcnJheShjLm0pID8gYy5tIDogW2MubV07XG5cbiAgICAgIHJldHVybiByYXdcbiAgICAgICAgLm1hcCgoaXRlbTogYW55KTogc3RyaW5nIHwgbnVsbCA9PiB7XG4gICAgICAgICAgaWYgKHR5cGVvZiBpdGVtID09PSBcInN0cmluZ1wiKSByZXR1cm4gaXRlbTtcbiAgICAgICAgICBpZiAoaXRlbSAmJiB0eXBlb2YgaXRlbSA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgaXRlbS50ZXh0ID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICByZXR1cm4gaXRlbS50ZXh0O1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfSlcbiAgICAgICAgLmZpbHRlcigoY29tcDogc3RyaW5nIHwgbnVsbCk6IGNvbXAgaXMgc3RyaW5nID0+IGNvbXAgIT09IG51bGwpO1xuICAgIH1cbiAgfSwgXG4gIHsgY2FsbFNpZ246IFwiQVRUQUNLX1RZUEVcIiwgICBqc29uS2V5OiBcImF0dGFja1R5cGVcIiB9LFxuICB7IGNhbGxTaWduOiBcIkRBTUFHRV9UWVBFXCIsICAganNvbktleTogXCJkYW1hZ2VJbmZsaWN0XCIsIGNvbnY6IGQgPT4gQXJyYXkuaXNBcnJheShkKSA/IGRbMF0gOiBkIH0sXG4gIHsgY2FsbFNpZ246IFwiUklUVUFMXCIsICAgICAgICBqc29uS2V5OiBcInJpdHVhbFwiIH0sXG4gIHsgY2FsbFNpZ246IFwiQ09OQ0VOVFJBVElPTlwiLCBqc29uS2V5OiBcImR1cmF0aW9uXCIsIGNvbnY6IGRzID0+IEFycmF5LmlzQXJyYXkoZHMpICYmIGRzLnNvbWUoKHg6YW55KT0+IHguY29uY2VudHJhdGlvbikgfSxcbiAgeyBjYWxsU2lnbjogXCJTQVZFXCIsICAgICAgICAgIGpzb25LZXk6IFwic2F2ZUF0dHJcIiB9LFxuXG4gIC8vIFx1MjUwMFx1MjUwMFx1MjUwMCBTcGVjaWVzIC8gQ3JlYXR1cmVzIFx1MjUwMFx1MjUwMFx1MjUwMFxuICB7IGNhbGxTaWduOiBcIlNQRUNJRVNcIiwganNvbktleTogXCJuYW1lXCIgfSxcbiAgeyBjYWxsU2lnbjogXCJTSVpFXCIsIGpzb25LZXk6IFwic2l6ZVwiLCBjb252OiAocmF3OiBhbnkpID0+IHtcbiAgICAgIC8vIGhhbmRsZSBbXCJTXCIsXCJNXCJdIG9yIGp1c3QgXCJMXCJcbiAgICAgIGlmIChBcnJheS5pc0FycmF5KHJhdykpIHtcbiAgICAgICAgcmV0dXJuIHJhdy5tYXAociA9PiBTSVpFX01BUFtyXSB8fCByKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBTSVpFX01BUFtyYXddIHx8IHJhdztcbiAgICAgIH1cbiAgICB9XG4gIH0sXG4gICAge1xuICBjYWxsU2lnbjogXCJTUEVFRFwiLFxuICBqc29uS2V5OiAgIFwic3BlZWRcIixcbiAgY29udjogKHNwOiBudW1iZXIgfCBSZWNvcmQ8c3RyaW5nLCBhbnk+KSA9PiB7XG4gICAgLy8gaGFuZGxlIGJvdGggbnVtZXJpYyBzcGVlZHMgYW5kIG9iamVjdCBzcGVlZHNcbiAgICBpZiAodHlwZW9mIHNwID09PSBcIm51bWJlclwiKSB7XG4gICAgICByZXR1cm4gW2BXYWxrICR7c3B9IGZ0LmBdO1xuICAgIH1cbiAgICBpZiAoIXNwIHx8IHR5cGVvZiBzcCAhPT0gXCJvYmplY3RcIikgcmV0dXJuIFtdO1xuICAgIHJldHVybiBPYmplY3QuZW50cmllcyhzcClcbiAgICAgIC5maWx0ZXIoKFttb2RlXSkgPT4gbW9kZSAhPT0gXCJjYW5Ib3ZlclwiKVxuICAgICAgLm1hcCgoW21vZGUsIHZdKSA9PiB7XG4gICAgICAgIGNvbnN0IG4gPSB0eXBlb2YgdiA9PT0gXCJvYmplY3RcIiAmJiB2ICE9PSBudWxsICYmIFwibnVtYmVyXCIgaW4gdiA/ICh2IGFzIGFueSkubnVtYmVyIDogdjtcbiAgICAgICAgY29uc3QgbGFiZWwgPSBtb2RlID09PSBcIndhbGtcIiA/IFwiV2Fsa1wiIDogY2FwKG1vZGUpO1xuICAgICAgICByZXR1cm4gYCR7bGFiZWx9ICR7bn0gZnQuYDtcbiAgICAgIH0pO1xuICB9LFxufSxcbnsgY2FsbFNpZ246IFwiTEFOR1VBR0VTXCIsIGpzb25LZXk6IFtcImxhbmd1YWdlc1wiLCBcImxhbmd1YWdlUHJvZmljaWVuY2llc1wiXSwgY29udjogYXJyID0+IHtcbiAgICAgIGlmICghQXJyYXkuaXNBcnJheShhcnIpKSByZXR1cm4gW107XG4gICAgICBjb25zdCBvdXQ6IHN0cmluZ1tdID0gW107XG4gICAgICBmb3IgKGNvbnN0IGxwIG9mIGFycikge1xuICAgICAgICBpZiAodHlwZW9mIGxwID09PSBcInN0cmluZ1wiKSBvdXQucHVzaChjYXAobHApKTtcbiAgICAgICAgZWxzZSBpZiAodHlwZW9mIGxwID09PSBcIm9iamVjdFwiKSB7XG4gICAgICAgICAgZm9yIChjb25zdCBbbGFuZywgdmFsXSBvZiBPYmplY3QuZW50cmllcyhscCkpIHtcbiAgICAgICAgICAgIGlmICh2YWwpIG91dC5wdXNoKGNhcChsYW5nKSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gWy4uLm5ldyBTZXQob3V0KV07XG4gIH19LFxuICB7IGNhbGxTaWduOiBcIlNFTlNFU1wiLCBqc29uS2V5OiBcInNlbnNlc1wiLCBjb252OiBzZW4gPT4ge1xuICAgICAgaWYgKEFycmF5LmlzQXJyYXkoc2VuKSkgcmV0dXJuIHNlbi5tYXAoKHM6c3RyaW5nKT0+cy5yZXBsYWNlKC9eXFxkK1xccyovLFwiXCIpLnJlcGxhY2UoL14uLyxjPT5jLnRvVXBwZXJDYXNlKCkpKTtcbiAgICAgIGlmIChzZW4gJiYgdHlwZW9mIHNlbj09PVwib2JqZWN0XCIpIHJldHVybiBPYmplY3QuZW50cmllcyhzZW4pLm1hcCgoW2ssdl0pPT5gJHtrLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpK2suc2xpY2UoMSl9ICR7dn1gKTtcbiAgICAgIHJldHVybiBbXTtcbiAgfX0sIFxue1xuICBjYWxsU2lnbjogXCJUUkFJVFNcIixcbiAganNvbktleTogW1wiY2xhc3NGZWF0dXJlc1wiLCBcImVudHJpZXNcIl0sXG4gIGNvbnY6IChyYXc6IGFueSwgYWxsSnNvbjogYW55KTogc3RyaW5nW10gPT4ge1xuICAgIC8vIHB1bGwgdGhlIGNsYXNzIHJlY29yZCBzbyB3ZSBrbm93IGl0cyBkaXNwbGF5IG5hbWVcbiAgICBjb25zdCBjbHNSZWMgPSBBcnJheS5pc0FycmF5KGFsbEpzb24uY2xhc3MpID8gYWxsSnNvbi5jbGFzc1swXSA6IGFsbEpzb247XG4gICAgY29uc3QgY2xhc3NOYW1lID0gdHlwZW9mIGNsc1JlYy5uYW1lID09PSBcInN0cmluZ1wiID8gY2xzUmVjLm5hbWUgOiBcIlwiO1xuXG4gICAgLy8gbmFtZXMgd2UgbmV2ZXIgd2FudCB0byBlbWl0XG4gICAgY29uc3Qgb21pdCA9IG5ldyBTZXQoW1xuICAgICAgXCJBYmlsaXR5IFNjb3JlIEltcHJvdmVtZW50XCIsXG4gICAgICBcIkFyY2hldHlwZSBGZWF0dXJlXCIsXG4gICAgICBcIlN1YmNsYXNzIEZlYXR1cmVcIixcbiAgICAgIC8vIGFkZCBtb3JlIGlmIHlvdSBsaWtlXHUyMDI2XG4gICAgXSk7XG4gICAgY29uc3Qgc2VlbiA9IG5ldyBTZXQ8c3RyaW5nPigpO1xuXG4gICAgLy8gMSkgaWYgdGhlcmUncyBhIGNsYXNzRmVhdHVyZXMgYXJyYXksIHVzZSBpdFxuICAgIGlmIChBcnJheS5pc0FycmF5KGFsbEpzb24uY2xhc3NGZWF0dXJlcykpIHtcbiAgICAgIHJldHVybiBhbGxKc29uLmNsYXNzRmVhdHVyZXMuZmxhdE1hcCgoZmVhdDogYW55KSA9PiB7XG4gICAgICAgIC8vIHNraXAgc3ViY2xhc3NcdTIwMTBpbmplY3RlZCBmZWF0dXJlcyBlbnRpcmVseVxuICAgICAgICBpZiAoZmVhdCAmJiB0eXBlb2YgZmVhdCA9PT0gXCJvYmplY3RcIiAmJiBmZWF0LmdhaW5TdWJjbGFzc0ZlYXR1cmUpIHJldHVybiBbXTtcblxuICAgICAgICAvLyBub3JtYWxpemUgdG8gYSBzdHJpbmdcbiAgICAgICAgY29uc3QgcmF3TmFtZSA9XG4gICAgICAgICAgdHlwZW9mIGZlYXQgPT09IFwic3RyaW5nXCJcbiAgICAgICAgICAgID8gZmVhdFxuICAgICAgICAgICAgOiB0eXBlb2YgZmVhdC5jbGFzc0ZlYXR1cmUgPT09IFwic3RyaW5nXCJcbiAgICAgICAgICAgID8gZmVhdC5jbGFzc0ZlYXR1cmVcbiAgICAgICAgICAgIDogXCJcIjtcblxuICAgICAgICAvLyBkcm9wIGV2ZXJ5dGhpbmcgYWZ0ZXIgdGhlIGZpcnN0IFx1MjAxQ3xcdTIwMURcbiAgICAgICAgY29uc3QgbmFtZSA9IHJhd05hbWUuc3BsaXQoXCJ8XCIpWzBdLnRyaW0oKTtcbiAgICAgICAgaWYgKCFuYW1lIHx8IG9taXQuaGFzKG5hbWUpIHx8IHNlZW4uaGFzKG5hbWUpKSByZXR1cm4gW107XG4gICAgICAgIHNlZW4uYWRkKG5hbWUpO1xuXG4gICAgICAgIC8vIGJ1aWxkIGEgbmljZSBhbmNob3IgKG11c3QgbWF0Y2ggeW91ciBoZWFkZXJzKVxuICAgICAgICBjb25zdCBhbmNob3IgPSBuYW1lXG4gICAgICAgICAgLnJlcGxhY2UoL1teXFx3XFxzXS9nLCBcIlwiKSAgICAvLyBzdHJpcCBwdW5jdHVhdGlvblxuICAgICAgICAgIC5yZXBsYWNlKC9cXHMrL2csIFwiIFwiKSAgICAgICAvLyBjb2xsYXBzZSBzcGFjZXNcbiAgICAgICAgICAudHJpbSgpXG4gICAgICAgICAgLnJlcGxhY2UoL1xcYlxcdy9nLCAoYzogYW55KSA9PiBjLnRvVXBwZXJDYXNlKCkpOyAvLyBUaXRsZSBDYXNlXG5cbiAgICAgICAgLy8gcHJvZHVjZSBhIGZpbGUtYW5jaG9yIGxpbmtcbiAgICAgICAgcmV0dXJuIGBbWyR7Y2xhc3NOYW1lfSMke2FuY2hvcn18JHtuYW1lfV1dYDtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIDIpIG90aGVyd2lzZSBmYWxsIGJhY2sgdG8geW91ciBvbGQgZW50cmllcy1iYXNlZCBsb2dpY1xuICAgIGNvbnN0IGVudHMgPSBBcnJheS5pc0FycmF5KHJhdykgPyByYXcgOiBbXTtcbiAgICBjb25zdCBmZWF0dXJlTmFtZXMgPSBlbnRzXG4gICAgICAuZmlsdGVyKChlOiBhbnkpID0+IGU/LmRhdGE/LmlzRmVhdHVyZSAmJiB0eXBlb2YgZS5uYW1lID09PSBcInN0cmluZ1wiKVxuICAgICAgLm1hcCgoZTogYW55KSA9PiBlLm5hbWUucmVwbGFjZSgvXkZlYXR1cmU6XFxzKi8sIFwiXCIpLnRyaW0oKSk7XG4gICAgaWYgKGZlYXR1cmVOYW1lcy5sZW5ndGgpIHJldHVybiBmZWF0dXJlTmFtZXM7XG5cbiAgICByZXR1cm4gZW50c1xuICAgICAgLmZpbHRlcigoZTogYW55KSA9PiBlICYmIHR5cGVvZiBlLm5hbWUgPT09IFwic3RyaW5nXCIpXG4gICAgICAubWFwKChlOiBhbnkpID0+IGUubmFtZS5yZXBsYWNlKC9eRmVhdHVyZTpcXHMqLywgXCJcIikudHJpbSgpKTtcbiAgfSxcbn0sXG5cblxuICB7IGNhbGxTaWduOiBcIkFDXCIsIGpzb25LZXk6IFwiYWNcIiwgY29udjogYSA9PiBBcnJheS5pc0FycmF5KGEpP2FbMF0uYWM6YSB9LFxuICB7IGNhbGxTaWduOiBcIkhQXCIsIGpzb25LZXk6IFwiaHBcIiwgY29udjogaHAgPT4gaHA/LmF2ZXJhZ2UgPz8gaHAgfSxcbiAgeyBjYWxsU2lnbjogXCJDSEFMTEVOR0VfUkFUSU5HXCIsIGpzb25LZXk6IFwiY3JcIiB9LFxuICB7IGNhbGxTaWduOiBcIlNUUkVOR1RIXCIsICAgICBqc29uS2V5OiBcImFiaWxpdHlcIiwgY29udjogYXJyPT5BcnJheS5pc0FycmF5KGFycik/YXJyWzBdOmFycj8uc3RyID8/IDAgfSxcbiAgeyBjYWxsU2lnbjogXCJERVhURVJJVFlcIiwgICAganNvbktleTogXCJhYmlsaXR5XCIsIGNvbnY6IGFycj0+QXJyYXkuaXNBcnJheShhcnIpP2FyclsxXTphcnI/LmRleCA/PyAwIH0sXG4gIHsgY2FsbFNpZ246IFwiQ09OU1RJVFVUSU9OXCIsIGpzb25LZXk6IFwiYWJpbGl0eVwiLCBjb252OiBhcnI9PkFycmF5LmlzQXJyYXkoYXJyKT9hcnJbMl06YXJyPy5jb24gPz8gMCB9LFxuICB7IGNhbGxTaWduOiBcIklOVEVMTElHRU5DRVwiLCBqc29uS2V5OiBcImFiaWxpdHlcIiwgY29udjogYXJyPT5BcnJheS5pc0FycmF5KGFycik/YXJyWzNdOmFycj8uaW50ID8/IDAgfSxcbiAgeyBjYWxsU2lnbjogXCJXSVNET01cIiwgICAgICAganNvbktleTogXCJhYmlsaXR5XCIsIGNvbnY6IGFycj0+QXJyYXkuaXNBcnJheShhcnIpP2Fycls0XTphcnI/LndpcyA/PyAwIH0sXG4gIHsgY2FsbFNpZ246IFwiQ0hBUklTTUFcIiwgICAgIGpzb25LZXk6IFwiYWJpbGl0eVwiLCBjb252OiBhcnI9PkFycmF5LmlzQXJyYXkoYXJyKT9hcnJbNV06YXJyPy5jaGEgPz8gMCB9LFxuICB7XG4gICAgY2FsbFNpZ246IFwiQUxJR05NRU5UXCIsXG4gICAganNvbktleTogXCJhbGlnbm1lbnRcIixcbiAgICBjb252OiAoYTogYW55KSA9PiB7XG4gICAgICBjb25zdCByYXcgPSBBcnJheS5pc0FycmF5KGEpID8gYS5qb2luKFwiIFwiKSA6IHR5cGVvZiBhID09PSBcInN0cmluZ1wiID8gYSA6IFN0cmluZyhhKTtcbiAgICAgIGNvbnN0IGNsZWFuZWQgPSByYXdcbiAgICAgICAgLnJlcGxhY2UoL1xcYkFcXGIvZywgXCJBbnlcIilcbiAgICAgICAgLnJlcGxhY2UoL1xcYlVcXGIvZywgXCJVbmFsaWduZWRcIilcbiAgICAgICAgLnJlcGxhY2UoL1xcYk5cXGIvZywgXCJOZXV0cmFsXCIpXG4gICAgICAgIC5yZXBsYWNlKC9cXGJMXFxiL2csIFwiTGF3ZnVsXCIpXG4gICAgICAgIC5yZXBsYWNlKC9cXGJDXFxiL2csIFwiQ2hhb3RpY1wiKVxuICAgICAgICAucmVwbGFjZSgvXFxiR1xcYi9nLCBcIkdvb2RcIilcbiAgICAgICAgLnJlcGxhY2UoL1xcYkVcXGIvZywgXCJFdmlsXCIpO1xuXG4gICAgICByZXR1cm4gZm9ybWF0QWxpZ25tZW50QWJicmV2KGNsZWFuZWQpOyAvLyByZXVzZSB5b3VyIG5vcm1hbGl6ZXIgaWYgaXQgZXhpc3RzXG4gICAgfVxuICB9LFxuICAgIHtcbiAgICAgIGNhbGxTaWduOiBcIlRZUEVcIixcbiAgICAgIGpzb25LZXk6IFwidHlwZVwiLFxuICAgICAgY29udjogKHQ6IGFueSk6IHN0cmluZyB8IHVuZGVmaW5lZCA9PiB7XG4gICAgICAgIC8vIDEpIElmIGl0XHUyMDE5cyBhIHNpbXBsZSBzdHJpbmcgY29kZSwgbWFwIGl0XG4gICAgICAgIGlmICh0eXBlb2YgdCA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgIC8vIGRpcmVjdCBsb29rdXBcdTIwMTRpZiBubyBtYXBwaW5nLCBqdXN0IHRpdGxlXHUyMDEwY2FzZSB0aGUgY29kZVxuICAgICAgICAgIHJldHVybiBJVEVNX1RZUEVfTUFQW3RdID8/IGNhcCh0KTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIDIpIElmIGl0XHUyMDE5cyBhbiBvYmplY3Qgd2l0aCBhIC50eXBlIHRhZ1xuICAgICAgICBpZiAodCAmJiB0eXBlb2YgdCA9PT0gXCJvYmplY3RcIikge1xuICAgICAgICAgIGNvbnN0IGNvZGUgPSBTdHJpbmcodC50eXBlIHx8IFwiXCIpLnRvVXBwZXJDYXNlKCk7XG4gICAgICAgICAgLy8gdHJ5IHRoZSBtYXAgZmlyc3RcbiAgICAgICAgICBpZiAoSVRFTV9UWVBFX01BUFtjb2RlXSkge1xuICAgICAgICAgICAgcmV0dXJuIElURU1fVFlQRV9NQVBbY29kZV07XG4gICAgICAgICAgfVxuICAgICAgICAgIC8vIG90aGVyd2lzZSBmYWxsIGJhY2sgdG8gXHUyMDFDQmFzZSAodGFnc1x1MjAyNilcdTIwMUQgc3R5bGVcbiAgICAgICAgICBjb25zdCBiYXNlID0gdC50eXBlID8gY2FwKHQudHlwZSkgOiBcIlVua25vd25cIjtcbiAgICAgICAgICBjb25zdCB0YWdzID0gQXJyYXkuaXNBcnJheSh0LnRhZ3MpID8gdC50YWdzLm1hcChjYXApIDogW107XG4gICAgICAgICAgcmV0dXJuIHRhZ3MubGVuZ3RoID8gYCR7YmFzZX0gKCR7dGFncy5qb2luKFwiLCBcIil9KWAgOiBiYXNlO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgIH1cbiAgICB9LFxuXG5cbiAgLy8gXHUyNTAwXHUyNTAwXHUyNTAwIEl0ZW1zIFx1MjUwMFx1MjUwMFx1MjUwMFxuICB7IGNhbGxTaWduOiBcIlRZUEVcIiwgICBqc29uS2V5OiBcIl9wYXJzZWRUeXBlXCIgfSxcbiAgeyBjYWxsU2lnbjogXCJSQVJJVFlcIiwganNvbktleTogXCJyYXJpdHlcIiwgY29udjogciA9PiB7XG4gICAgICBjb25zdCBzID0gU3RyaW5nKHJ8fFwiXCIpLnRvTG93ZXJDYXNlKCk7XG4gICAgICByZXR1cm4gcyAmJiBzIT09XCJub25lXCIgPyBzWzBdLnRvVXBwZXJDYXNlKCkrcy5zbGljZSgxKSA6IHVuZGVmaW5lZDtcbiAgfX0sXG4gIHtcbiAgICBjYWxsU2lnbjogXCJDT1NUXCIsXG4gICAganNvbktleTogXCJ2YWx1ZVwiLFxuICAgIGNvbnY6IChyYXc6IGFueSkgPT4ge1xuICAgICAgY29uc3QgcyA9IFN0cmluZyhyYXcpLnRyaW0oKS50b0xvd2VyQ2FzZSgpO1xuICAgICAgbGV0IG51bTogbnVtYmVyO1xuXG4gICAgICAvLyBleHBsaWNpdCBjb3BwZXI/XG4gICAgICBpZiAocy5lbmRzV2l0aChcImNwXCIpKSB7XG4gICAgICAgIG51bSA9IHBhcnNlRmxvYXQocyk7XG4gICAgICAgIC8vIGNvbnZlcnQgdG8gZ3Agb25seSBpZiAxMDArIGNwXG4gICAgICAgIHJldHVybiBudW0gPj0gMTAwXG4gICAgICAgICAgPyBgJHtNYXRoLnJvdW5kKChudW0vMTAwKSAqIDEwMCkvMTAwfWdwYFxuICAgICAgICAgIDogYCR7bnVtfWNwYDtcbiAgICAgIH1cblxuICAgICAgLy8gZXhwbGljaXQgc2lsdmVyP1xuICAgICAgaWYgKHMuZW5kc1dpdGgoXCJzcFwiKSkge1xuICAgICAgICBudW0gPSBwYXJzZUZsb2F0KHMpO1xuICAgICAgICAvLyBjb252ZXJ0IHRvIGdwIG9ubHkgaWYgMTArIHNwXG4gICAgICAgIHJldHVybiBudW0gPj0gMTBcbiAgICAgICAgICA/IGAke01hdGgucm91bmQoKG51bS8xMCkgKiAxMDApLzEwMH1ncGBcbiAgICAgICAgICA6IGAke251bX1zcGA7XG4gICAgICB9XG5cbiAgICAgIC8vIGV4cGxpY2l0IGdvbGQ/XG4gICAgICBpZiAocy5lbmRzV2l0aChcImdwXCIpKSB7XG4gICAgICAgIG51bSA9IHBhcnNlRmxvYXQocyk7XG4gICAgICAgIHJldHVybiBgJHtNYXRoLnJvdW5kKG51bSAqIDEwMCkvMTAwfWdwYDtcbiAgICAgIH1cblxuICAgICAgLy8gYmFyZSBudW1iZXIgXHUyMTkyIGFzc3VtZSBjb3BwZXJcbiAgICAgIG51bSA9IHBhcnNlRmxvYXQocykgfHwgMDtcbiAgICAgIHJldHVybiBudW0gPj0gMTAwXG4gICAgICAgID8gYCR7TWF0aC5yb3VuZCgobnVtLzEwMCkgKiAxMDApLzEwMH1ncGBcbiAgICAgICAgOiBgJHtudW19Y3BgO1xuICAgIH1cbiAgfSxcbiAgeyBjYWxsU2lnbjogXCJXRUlHSFRcIiwganNvbktleTogXCJ3ZWlnaHRcIiB9LFxuICB7IGNhbGxTaWduOiBcIk1BR0lDQUxcIiwganNvbktleTogXCJ3b25kcm91c1wiLCBjb252OiAoX3csYWxsKSA9PiAhIWFsbC53b25kcm91cyB8fCAhIWFsbC5yZXFBdHR1bmUgfSxcbiAgeyBjYWxsU2lnbjogXCJWQVJJQU5UXCIsIGpzb25LZXk6IFwiYm9udXNXZWFwb25cIiwgY29udjogYiA9PiB0eXBlb2YgYj09PVwic3RyaW5nXCIgJiYgYi5zdGFydHNXaXRoKFwiK1wiKSB9LFxuICB7IGNhbGxTaWduOiBcIlBST1BFUlRJRVNcIiwganNvbktleTogXCJwcm9wZXJ0eVwiLCBjb252OiBhcnIgPT4gQXJyYXkuaXNBcnJheShhcnIpID8gYXJyLm1hcChwID0+IFBST1BFUlRZX01BUFtwXSB8fCBwKSA6IFtdIH0sXG4gIHsgY2FsbFNpZ246IFwiREFNQUdFXCIsIGpzb25LZXk6IFwiZG1nMVwiLCBjb252OiAoZCxhbGwpID0+IGQgPyBhbGwuZG1nMiA/IGAke2R9IC8gJHthbGwuZG1nMn1gIDogYCR7ZH1gIDogdW5kZWZpbmVkIH0sXG4gIHsgY2FsbFNpZ246IFwiREFNQUdFX1RZUEVTXCIsIGpzb25LZXk6IFwiZG1nVHlwZVwiLCBjb252OiBkdCA9PiBkdCA9PSBudWxsID8gW10gOiBBcnJheS5pc0FycmF5KGR0KSA/IGR0IDogW2R0XSB9LFxuICB7IGNhbGxTaWduOiBcIlJBTkdFXCIsIGpzb25LZXk6IFwicmFuZ2VcIiB9LFxuICB7IGNhbGxTaWduOiBcIlJFTE9BRFwiLCBqc29uS2V5OiBcInJlbG9hZFwiIH0sXG4gIHsgY2FsbFNpZ246IFwiQU1NT19UWVBFXCIsIGpzb25LZXk6IFwiYW1tb1R5cGVcIiB9LFxuICB7IGNhbGxTaWduOiBcIlNURUFMVEhfRElTQURWQU5UQUdFXCIsIGpzb25LZXk6IFwic3RlYWx0aFwiIH0sXG4gIHtcbiAgICBjYWxsU2lnbjogXCJBVFRVTkVNRU5UXCIsXG4gICAganNvbktleTogW1wid29uZHJvdXNcIiwgXCJyZXFBdHR1bmVcIiwgXCJyZXFfYXR0dW5lXCIsIFwicmVxQXR0dW5lVGFnc1wiXSxcbiAgICBjb252OiAoX3JhdywgYWxsSnNvbikgPT4ge1xuICAgICAgY29uc3QgaiA9IGFsbEpzb24gYXMgYW55O1xuICAgICAgY29uc3QgaGFzVGV4dCA9IHR5cGVvZiBqLnJlcUF0dHVuZSA9PT0gXCJzdHJpbmdcIiAmJiBqLnJlcUF0dHVuZS50cmltKCkgIT09IFwiXCI7XG4gICAgICBjb25zdCBoYXNUYWdzID0gQXJyYXkuaXNBcnJheShqLnJlcUF0dHVuZVRhZ3MpICYmIGoucmVxQXR0dW5lVGFncy5sZW5ndGggPiAwO1xuICAgICAgcmV0dXJuIGhhc1RleHQgfHwgaGFzVGFncztcbiAgICB9XG4gIH0sXG4gIHtcbiAgICBjYWxsU2lnbjogXCJBVFRVTkVfUkVRXCIsXG4gICAganNvbktleTogXCJyZXFBdHR1bmVUYWdzXCIsXG4gICAgY29udjogKHRhZ3M6IGFueVtdID0gW10sIF9hbGwpID0+IHtcbiAgICAgIGNvbnN0IG1hcExldHRlcjogUmVjb3JkPHN0cmluZyxzdHJpbmc+ID0ge1xuICAgICAgICBBOiBcIkFueVwiLCBVOiBcIlVuYWxpZ25lZFwiLCBOOiBcIk5ldXRyYWxcIixcbiAgICAgICAgTDogXCJMYXdmdWxcIiwgQzogXCJDaGFvdGljXCIsIEc6IFwiR29vZFwiLCBFOiBcIkV2aWxcIlxuICAgICAgfTtcbiAgICAgIGNvbnN0IHJlcXM6IHN0cmluZ1tdID0gW107XG5cbiAgICAgIGZvciAoY29uc3QgdGFnIG9mIHRhZ3MpIHtcbiAgICAgICAgaWYgKHRhZy5jbGFzcyAmJiBBcnJheS5pc0FycmF5KHRhZy5hbGlnbm1lbnQpKSB7XG4gICAgICAgICAgY29uc3QgY2xzID0gY2FwKHRhZy5jbGFzcyk7XG4gICAgICAgICAgZm9yIChjb25zdCBjb2RlIG9mIHRhZy5hbGlnbm1lbnQpIHtcbiAgICAgICAgICAgIHJlcXMucHVzaChgJHttYXBMZXR0ZXJbY29kZV0gfHwgY29kZX0gJHtjbHN9YCk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKHRhZy5jbGFzcykge1xuICAgICAgICAgIHJlcXMucHVzaChjYXAodGFnLmNsYXNzKSk7XG4gICAgICAgIH0gZWxzZSBpZiAoQXJyYXkuaXNBcnJheSh0YWcuYWxpZ25tZW50KSkge1xuICAgICAgICAgIGZvciAoY29uc3QgY29kZSBvZiB0YWcuYWxpZ25tZW50KSB7XG4gICAgICAgICAgICByZXFzLnB1c2gobWFwTGV0dGVyW2NvZGVdIHx8IGNvZGUpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmICh0YWcuYmFja2dyb3VuZCkge1xuICAgICAgICAgIGNvbnN0IFtiZ10gPSBTdHJpbmcodGFnLmJhY2tncm91bmQpLnNwbGl0KFwifFwiKTtcbiAgICAgICAgICByZXFzLnB1c2goYmcuc3BsaXQoXCIgXCIpLm1hcChjYXApLmpvaW4oXCIgXCIpKTtcbiAgICAgICAgfSBlbHNlIGlmICh0YWcuc3BlbGxjYXN0aW5nKSB7XG4gICAgICAgICAgcmVxcy5wdXNoKFwiU3BlbGxjYXN0ZXJcIik7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiBBcnJheS5mcm9tKG5ldyBTZXQocmVxcykpO1xuICAgIH1cbiAgfSxcbiAge1xuICAgIGNhbGxTaWduOiBcIlZFUk1VTlwiLFxuICAgIGpzb25LZXk6IFwid29uZHJvdXNcIiwgICAgICAgICAgICAvLyBvciB3aGF0ZXZlciBwcm9wZXJ0eSB5b3UgdXNlIHRvIGRldGVjdCBcdTIwMUNtYWdpY2FsXHUyMDFEXG4gICAgY29udjogKF9yYXcsIGFsbCkgPT4gISFhbGwud29uZHJvdXMgfHwgISFhbGwucmVxQXR0dW5lXG4gIH0sICAgICAgICAgIFxuICAvLyBcdTI1MDBcdTI1MDBcdTI1MDAgT3RoZXIgXHUyNTAwXHUyNTAwXHUyNTAwXG4gIHsgY2FsbFNpZ246IFwiREFNQUdFX1JFU1wiLCBqc29uS2V5OiBcInJlc2lzdFwiLCBjb252OiB2ID0+IEFycmF5LmlzQXJyYXkodikgPyB2Lm1hcChjYXApIDogW10gfSxcbiAgeyBjYWxsU2lnbjogXCJSVUxFU0VUXCIsIGpzb25LZXk6IFwiX2VkaXRpb25JZFwiIH0sXG4gIFxuICAgIC8vIFx1MjUwMFx1MjUwMFx1MjUwMCBBYmlsaXR5XHUyMDEwc2NvcmUgbW9kaWZpZXJzIChvbmx5IGVtaXQgd2hlbiBub256ZXJvKSBcdTI1MDBcdTI1MDBcdTI1MDBcbiAge1xuICAgIGNhbGxTaWduOiBcIlNUUl9NT0RcIixcbiAgICBqc29uS2V5OiAgXCJhYmlsaXR5XCIsXG4gICAgY29udjogKGFycjogYW55KTogbnVtYmVyIHwgdW5kZWZpbmVkID0+IHtcbiAgICAgIGNvbnN0IHYgPSBBcnJheS5pc0FycmF5KGFycikgPyAoYXJyWzBdLnN0ciA/PyAwKSA6IChhcnIuc3RyID8/IDApO1xuICAgICAgcmV0dXJuIHYgIT09IDAgPyB2IDogdW5kZWZpbmVkO1xuICAgIH0sXG4gIH0sXG4gIHtcbiAgICBjYWxsU2lnbjogXCJERVhfTU9EXCIsXG4gICAganNvbktleTogIFwiYWJpbGl0eVwiLFxuICAgIGNvbnY6IChhcnI6IGFueSk6IG51bWJlciB8IHVuZGVmaW5lZCA9PiB7XG4gICAgICBjb25zdCB2ID0gQXJyYXkuaXNBcnJheShhcnIpID8gKGFyclswXS5kZXggPz8gMCkgOiAoYXJyLmRleCA/PyAwKTtcbiAgICAgIHJldHVybiB2ICE9PSAwID8gdiA6IHVuZGVmaW5lZDtcbiAgICB9LFxuICB9LFxuICB7XG4gICAgY2FsbFNpZ246IFwiQ09OX01PRFwiLFxuICAgIGpzb25LZXk6ICBcImFiaWxpdHlcIixcbiAgICBjb252OiAoYXJyOiBhbnkpOiBudW1iZXIgfCB1bmRlZmluZWQgPT4ge1xuICAgICAgY29uc3QgdiA9IEFycmF5LmlzQXJyYXkoYXJyKSA/IChhcnJbMF0uY29uID8/IDApIDogKGFyci5jb24gPz8gMCk7XG4gICAgICByZXR1cm4gdiAhPT0gMCA/IHYgOiB1bmRlZmluZWQ7XG4gICAgfSxcbiAgfSxcbiAge1xuICAgIGNhbGxTaWduOiBcIklOVF9NT0RcIixcbiAgICBqc29uS2V5OiAgXCJhYmlsaXR5XCIsXG4gICAgY29udjogKGFycjogYW55KTogbnVtYmVyIHwgdW5kZWZpbmVkID0+IHtcbiAgICAgIGNvbnN0IHYgPSBBcnJheS5pc0FycmF5KGFycikgPyAoYXJyWzBdLmludCA/PyAwKSA6IChhcnIuaW50ID8/IDApO1xuICAgICAgcmV0dXJuIHYgIT09IDAgPyB2IDogdW5kZWZpbmVkO1xuICAgIH0sXG4gIH0sXG4gIHtcbiAgICBjYWxsU2lnbjogXCJXSVNfTU9EXCIsXG4gICAganNvbktleTogIFwiYWJpbGl0eVwiLFxuICAgIGNvbnY6IChhcnI6IGFueSk6IG51bWJlciB8IHVuZGVmaW5lZCA9PiB7XG4gICAgICBjb25zdCB2ID0gQXJyYXkuaXNBcnJheShhcnIpID8gKGFyclswXS53aXMgPz8gMCkgOiAoYXJyLndpcyA/PyAwKTtcbiAgICAgIHJldHVybiB2ICE9PSAwID8gdiA6IHVuZGVmaW5lZDtcbiAgICB9LFxuICB9LFxuICB7XG4gICAgY2FsbFNpZ246IFwiQ0hBX01PRFwiLFxuICAgIGpzb25LZXk6ICBcImFiaWxpdHlcIixcbiAgICBjb252OiAoYXJyOiBhbnkpOiBudW1iZXIgfCB1bmRlZmluZWQgPT4ge1xuICAgICAgY29uc3QgdiA9IEFycmF5LmlzQXJyYXkoYXJyKSA/IChhcnJbMF0uY2hhID8/IDApIDogKGFyci5jaGEgPz8gMCk7XG4gICAgICByZXR1cm4gdiAhPT0gMCA/IHYgOiB1bmRlZmluZWQ7XG4gICAgfSxcbiAgfSxcblxuXG5dO1xuXG5cbi8vIFx1MjUwMFx1MjUwMFx1MjUwMCBHZW5lcmljIGJ1aWxkZXIgXHUyNTAwXHUyNTAwXHUyNTAwXG5leHBvcnQgZnVuY3Rpb24gYnVpbGRGTShqc29uOiBhbnksIGRlZnM6IEZpZWxkRGVmW10pOiBGcm9udG1hdHRlciB7XG4gIGNvbnN0IGZtOiBGcm9udG1hdHRlciA9IHt9O1xuICBmb3IgKGNvbnN0IHsgY2FsbFNpZ24sIGpzb25LZXksIGNvbnYgfSBvZiBkZWZzKSB7XG4gICAgY29uc3Qga2V5cyA9IEFycmF5LmlzQXJyYXkoanNvbktleSkgPyBqc29uS2V5IDogW2pzb25LZXldO1xuICAgIGxldCByYXc6IGFueSA9IHVuZGVmaW5lZDtcblxuICAgIGZvciAoY29uc3Qga2V5IG9mIGtleXMpIHtcbiAgICAgIGlmIChqc29uW2tleV0gIT0gbnVsbCkge1xuICAgICAgICByYXcgPSBqc29uW2tleV07XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChyYXcgPT0gbnVsbCkgY29udGludWU7XG4gICAgY29uc3QgdmFsID0gY29udiA/IGNvbnYocmF3LCBqc29uKSA6IHJhdztcbiAgICBmbVtGTV9GSUVMRFNbY2FsbFNpZ25dXSA9IHZhbDtcbiAgfVxuICByZXR1cm4gZm07XG59XG5cblxuXG4vLyBmcm9udG1hdHRlci50c1xuXG5leHBvcnQgZnVuY3Rpb24gc2VyaWFsaXplRnJvbnRtYXR0ZXIoXG4gIGZtOiBGcm9udG1hdHRlcixcbiAgZGVmcz86IEZpZWxkRGVmW11cbik6IHN0cmluZyB7XG4gIGNvbnN0IGZpbHRlcmVkOiBSZWNvcmQ8c3RyaW5nLCBhbnk+ID0ge307XG5cbiAgLy8gZGV0ZWN0IGlmIHdlIGhhdmUgYW55IGFjdHVhbCBjaG9pY2UtbGlzdHNcbiAgY29uc3QgaGFzU2tpbGxDaG9pY2UgPSBBcnJheS5pc0FycmF5KGZtW0ZNX0ZJRUxEUy5TS0lMTF9DSE9JQ0VfTElTVF0pIFxuICAgICYmIChmbVtGTV9GSUVMRFMuU0tJTExfQ0hPSUNFX0xJU1RdIGFzIGFueVtdKS5sZW5ndGggPiAwO1xuICBjb25zdCBoYXNUb29sQ2hvaWNlID0gQXJyYXkuaXNBcnJheShmbVtGTV9GSUVMRFMuVE9PTF9DSE9JQ0VfTElTVF0pIFxuICAgICYmIChmbVtGTV9GSUVMRFMuVE9PTF9DSE9JQ0VfTElTVF0gYXMgYW55W10pLmxlbmd0aCA+IDA7XG5cblxuICBmb3IgKGNvbnN0IFtrLCB2XSBvZiBPYmplY3QuZW50cmllcyhmbSkpIHtcbiAgICAvLyAxKSBuZXZlciBlbWl0IHVuZGVmaW5lZFxuICAgIGlmICh2ID09PSB1bmRlZmluZWQpIGNvbnRpbnVlO1xuICAgIC8vIDIpIGRyb3AgZW1wdHkgQ09NUE9ORU5UUywgVE9PTF9DSE9JQ0VfTElTVCwgU0tJTExfQ0hPSUNFX0xJU1RcbiAgICBpZiAoayA9PT0gRk1fRklFTERTLkNPTVBPTkVOVFMgJiYgQXJyYXkuaXNBcnJheSh2KSAmJiB2Lmxlbmd0aCA9PT0gMCkgY29udGludWU7XG4gICAgaWYgKFxuICAgICAgKGsgPT09IEZNX0ZJRUxEUy5UT09MX0NIT0lDRV9MSVNUIHx8IGsgPT09IEZNX0ZJRUxEUy5TS0lMTF9DSE9JQ0VfTElTVCkgJiZcbiAgICAgIEFycmF5LmlzQXJyYXkodikgJiYgdi5sZW5ndGggPT09IDBcbiAgICApIGNvbnRpbnVlO1xuXG4gICAgZmlsdGVyZWRba10gPSB2O1xuICB9XG5cbiAgLy8gYnVpbGQgdGhlIGxpc3Qgb2Yga2V5cyBpbiB0aGUgZXhhY3Qgb3JkZXIgZnJvbSBkZWZzXG4gIGxldCBrZXlzVG9FbWl0OiBzdHJpbmdbXTtcbiAgaWYgKGRlZnMpIHtcbiAgICAvLyBtYXAgZWFjaCBGaWVsZERlZiB0byBpdHMgZnJvbnRtYXR0ZXIga2V5XG4gICAgY29uc3Qgd2FudGVkID0gZGVmcy5tYXAoZCA9PiBGTV9GSUVMRFNbZC5jYWxsU2lnbl0pO1xuICAgIC8vIG9ubHkga2VlcCB0aGUgb25lcyB3ZSBhY3R1YWxseSBoYXZlLCBpbiBvcmRlclxuICAgIGtleXNUb0VtaXQgPSB3YW50ZWQuZmlsdGVyKGsgPT4gayBpbiBmaWx0ZXJlZCk7XG4gICAgLy8gdGhlbiBhcHBlbmQgYW55IGV4dHJhIGtleXMgdGhhdCB3ZXJlbid0IGluIGRlZnNcbiAgICBrZXlzVG9FbWl0LnB1c2goXG4gICAgICAuLi5PYmplY3Qua2V5cyhmaWx0ZXJlZCkuZmlsdGVyKGsgPT4gIWtleXNUb0VtaXQuaW5jbHVkZXMoaykpXG4gICAgKTtcbiAgfSBlbHNlIHtcbiAgICBrZXlzVG9FbWl0ID0gT2JqZWN0LmtleXMoZmlsdGVyZWQpO1xuICB9XG5cbiAgLy8gbm93IGVtaXQgWUFNTCBpbiB0aGF0IG9yZGVyXG4gIHJldHVybiBrZXlzVG9FbWl0XG4gICAgLm1hcChrID0+IHtcbiAgICAgIGNvbnN0IHYgPSBmaWx0ZXJlZFtrXTtcbiAgICAgIGlmIChBcnJheS5pc0FycmF5KHYpKSB7XG4gICAgICAgIC8vIEpTT04uc3RyaW5naWZ5IHRvIGhhbmRsZSBzcGFjZXMsIGNvbW1hcywgZXRjLlxuICAgICAgICBjb25zdCBpbmxpbmUgPSB2Lm1hcChpdGVtID0+IEpTT04uc3RyaW5naWZ5KGl0ZW0pKS5qb2luKFwiLCBcIik7XG4gICAgICAgIHJldHVybiBgJHtrfTogWyR7aW5saW5lfV1gO1xuICAgICAgfVxuICAgICAgaWYgKHR5cGVvZiB2ID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgIHJldHVybiBgJHtrfTogXCIke3Z9XCJgO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGAke2t9OiAke3Z9YDtcbiAgICB9KVxuICAgIC5qb2luKFwiXFxuXCIpO1xufVxuXG5cbi8vIFx1MjUwMFx1MjUwMFx1MjUwMCBTa2lsbCBoZWxwZXJzIFx1MjUwMFx1MjUwMFx1MjUwMFxuZXhwb3J0IGNvbnN0IFNLSUxMX09QVElPTlMgPSBbXG4gIFwiQWNyb2JhdGljc1wiLFwiQW5pbWFsIEhhbmRsaW5nXCIsXCJBcmNhbmFcIixcIkF0aGxldGljc1wiLFwiRGVjZXB0aW9uXCIsXCJIaXN0b3J5XCIsXG4gIFwiSW5zaWdodFwiLFwiSW50aW1pZGF0aW9uXCIsXCJJbnZlc3RpZ2F0aW9uXCIsXCJNZWRpY2luZVwiLFwiTmF0dXJlXCIsXCJQZXJjZXB0aW9uXCIsXG4gIFwiUGVyZm9ybWFuY2VcIixcIlBlcnN1YXNpb25cIixcIlJlbGlnaW9uXCIsXCJTbGVpZ2h0IG9mIEhhbmRcIixcIlN0ZWFsdGhcIixcIlN1cnZpdmFsXCIsXG5dIGFzIGNvbnN0O1xuZXhwb3J0IHR5cGUgU2tpbGxPcHRpb24gPSB0eXBlb2YgU0tJTExfT1BUSU9OU1tudW1iZXJdO1xuZXhwb3J0IGZ1bmN0aW9uIG5vcm1hbGl6ZVNraWxsKHJhdzogc3RyaW5nKTogU2tpbGxPcHRpb24gfCBudWxsIHtcbiAgY29uc3QgbG93ZXIgPSByYXcudHJpbSgpLnRvTG93ZXJDYXNlKCk7XG4gIHJldHVybiBTS0lMTF9PUFRJT05TLmZpbmQoc2tpbGwgPT4gc2tpbGwudG9Mb3dlckNhc2UoKSA9PT0gbG93ZXIpID8/IG51bGw7XG59XG5leHBvcnQgZnVuY3Rpb24gZmlsdGVyVmFsaWRTa2lsbHMocmF3QXJyOiBhbnlbXSk6IFNraWxsT3B0aW9uW10ge1xuICBpZiAoIUFycmF5LmlzQXJyYXkocmF3QXJyKSkgcmV0dXJuIFtdO1xuICBjb25zdCBzZWVuID0gbmV3IFNldDxTa2lsbE9wdGlvbj4oKTtcbiAgZm9yIChjb25zdCBlbnQgb2YgcmF3QXJyKSB7XG4gICAgbGV0IGNhbmRpZGF0ZTogc3RyaW5nIHwgdW5kZWZpbmVkO1xuICAgIGlmICh0eXBlb2YgZW50ID09PSBcInN0cmluZ1wiKSBjYW5kaWRhdGUgPSBlbnQ7XG4gICAgZWxzZSBpZiAoZW50Lm5hbWUgJiYgdHlwZW9mIGVudC5uYW1lID09PSBcInN0cmluZ1wiKSBjYW5kaWRhdGUgPSBlbnQubmFtZTtcbiAgICBpZiAoY2FuZGlkYXRlKSB7XG4gICAgICBjb25zdCBub3JtID0gbm9ybWFsaXplU2tpbGwoY2FuZGlkYXRlKTtcbiAgICAgIGlmIChub3JtKSBzZWVuLmFkZChub3JtKTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIFsuLi5zZWVuXTtcbn1cblxuLy8gXHUyNTAwXHUyNTAwXHUyNTAwIFdoaWNoIEZNX0tFWVMgZWFjaCBwYXJzZXIgc2hvdWxkIGluY2x1ZGUgXHUyNTAwXHUyNTAwXHUyNTAwXG5leHBvcnQgY29uc3QgU1BFTExfS0VZUzogRk1LZXlbXSA9IFtcbiAgXCJOQU1FXCIsXG4gIFwiTEVWRUxcIixcbiAgXCJTQ0hPT0xcIixcbiAgXCJDQVNUSU5HX1RJTUVcIixcbiAgXCJTUEVMTF9SQU5HRVwiLFxuICBcIkRVUkFUSU9OXCIsXG4gIFwiVkVSQkFMXCIsXG4gIFwiU09NQVRJQ1wiLFxuICBcIk1BVEVSSUFMXCIsXG4gIFwiQ09NUE9ORU5UU1wiLFxuICBcIkNPTkNFTlRSQVRJT05cIixcbiAgXCJTT1VSQ0VcIixcbiAgXCJSVUxFU0VUXCJcbl07XG5cbmV4cG9ydCBjb25zdCBTUEVDSUVTX0tFWVM6IEZNS2V5W10gPSBbXG4gIFwiU1BFQ0lFU1wiLFxuICBcIlNJWkVcIixcbiAgXCJTUEVFRFwiLFxuICBcIkxBTkdVQUdFU1wiLFxuICBcIlRSQUlUU1wiLFxuICBcIlNLSUxMU1wiLFxuICBcIlNUUl9NT0RcIixcbiAgXCJERVhfTU9EXCIsXG4gIFwiQ09OX01PRFwiLFxuICBcIklOVF9NT0RcIixcbiAgXCJXSVNfTU9EXCIsXG4gIFwiQ0hBX01PRFwiLFxuICBcIlNLSUxMX0NIT0lDRV9MSVNUXCIsXG4gIFwiVE9PTF9QUk9GSUNJRU5DSUVTXCIsXG4gIFwiVE9PTF9DSE9JQ0VfTElTVFwiLFxuICBcIldFQVBPTl9QUk9GSUNJRU5DSUVTXCIsXG4gIFwiU0VOU0VTXCIsXG4gIFwiREFNQUdFX1JFU1wiLFxuICBcIlNPVVJDRVwiLFxuICBcIlJVTEVTRVRcIlxuXTtcblxuZXhwb3J0IGNvbnN0IElURU1fS0VZUzogRk1LZXlbXSA9IFtcbiAgXCJOQU1FXCIsXG4gIFwiVFlQRVwiLFxuICBcIlJBUklUWVwiLFxuICBcIkNPU1RcIixcbiAgXCJXRUlHSFRcIixcbiAgXCJQUk9QRVJUSUVTXCIsXG4gIFwiREFNQUdFXCIsXG4gIFwiREFNQUdFX1RZUEVTXCIsXG4gIFwiUkFOR0VcIixcbiAgXCJSRUxPQURcIixcbiAgXCJBTU1PX1RZUEVcIixcbiAgXCJBQ1wiLFxuICBcIlNURUFMVEhfRElTQURWQU5UQUdFXCIsXG4gIFwiTUFHSUNBTFwiLFxuICBcIkFUVFVORU1FTlRcIixcbiAgXCJBVFRVTkVfUkVRXCIsXG4gIFwiVkVSTVVOXCIsXG4gIFwiU09VUkNFXCIsXG4gIFwiUlVMRVNFVFwiXG5dO1xuXG5leHBvcnQgY29uc3QgQkVTVElBUllfS0VZUzogRk1LZXlbXSA9IFtcbiAgXCJOQU1FXCIsXG4gIFwiU0laRVwiLFxuICBcIlRZUEVcIixcbiAgXCJBTElHTk1FTlRcIixcbiAgXCJBQ1wiLFxuICBcIkhQXCIsXG4gIFwiU1BFRURcIixcbiAgXCJTVFJFTkdUSFwiLFxuICBcIkRFWFRFUklUWVwiLFxuICBcIkNPTlNUSVRVVElPTlwiLFxuICBcIklOVEVMTElHRU5DRVwiLFxuICBcIldJU0RPTVwiLFxuICBcIkNIQVJJU01BXCIsXG4gIFwiU0FWSU5HX1RIUk9XU1wiLFxuICBcIlNLSUxMU1wiLFxuICBcIlNFTlNFU1wiLFxuICBcIkxBTkdVQUdFU1wiLFxuICBcIkNIQUxMRU5HRV9SQVRJTkdcIixcbiAgXCJTT1VSQ0VcIixcbiAgXCJSVUxFU0VUXCJcbl07XG5cbmV4cG9ydCBjb25zdCBDTEFTU19LRVlTOiBGTUtleVtdID0gW1xuICBcIk5BTUVcIixcbiAgXCJTUEVMTF9DQVNUX01PRFwiLFxuICBcIkFSTU9SX1BST0ZJQ0lFTkNJRVNcIixcbiAgXCJXRUFQT05fUFJPRklDSUVOQ0lFU1wiLFxuICBcIlRPT0xfUFJPRklDSUVOQ0lFU1wiLFxuICBcIlRPT0xfQ0hPSUNFX0xJU1RcIixcbiAgXCJTQVZJTkdfVEhST1dTXCIsXG4gIFwiU0tJTExTXCIsXG4gIFwiU0tJTExfQ0hPSUNFX0xJU1RcIixcbiAgXCJUUkFJVFNcIixcbiAgXCJTT1VSQ0VcIixcbiAgXCJSVUxFU0VUXCJcbl07XG5cbmV4cG9ydCBjb25zdCBCQUNLR1JPVU5EX0tFWVM6IEZNS2V5W10gPSBbXG4gIFwiTkFNRVwiLFxuICBcIlNLSUxMU1wiLFxuICBcIlNLSUxMX0NIT0lDRV9MSVNUXCIsICBcbiAgXCJUT09MX1BST0ZJQ0lFTkNJRVNcIixcbiAgXCJUT09MX0NIT0lDRV9MSVNUXCIsXG4gIFwiVFJBSVRTXCIsXG4gIFwiU09VUkNFXCIsXG4gIFwiUlVMRVNFVFwiXG5dO1xuXG5leHBvcnQgY29uc3QgRkVBVFNfS0VZUzogRk1LZXlbXSA9IFtcbiAgXCJTT1VSQ0VcIixcbiAgXCJSVUxFU0VUXCJcbl07XG5cbi8vIFx1MjUwMFx1MjUwMFx1MjUwMCBGaWVsZCBzdWJzZXRzIGZvciBlYWNoIHBhcnNlciBcdTI1MDBcdTI1MDBcdTI1MDBcbmV4cG9ydCBjb25zdCBTUEVMTF9NRVRBX0RFRlM6IEZpZWxkRGVmW10gPSBTUEVMTF9LRVlTLm1hcChrZXkgPT4ge1xuICBjb25zdCBkZWYgPSBBTExfRklFTERfREVGUy5maW5kKGQgPT4gZC5jYWxsU2lnbiA9PT0ga2V5KTtcbiAgaWYgKCFkZWYpIHRocm93IG5ldyBFcnJvcihgTWlzc2luZyBGaWVsZERlZiBmb3IgU1BFTExfS0VZICR7a2V5fWApO1xuICByZXR1cm4gZGVmO1xufSk7XG5leHBvcnQgY29uc3QgU1BFQ0lFU19NRVRBX0RFRlM6IEZpZWxkRGVmW10gPSBTUEVDSUVTX0tFWVMubWFwKGtleSA9PiB7XG4gIGNvbnN0IGRlZiA9IEFMTF9GSUVMRF9ERUZTLmZpbmQoZCA9PiBkLmNhbGxTaWduID09PSBrZXkpO1xuICBpZiAoIWRlZikgdGhyb3cgbmV3IEVycm9yKGBNaXNzaW5nIEZpZWxkRGVmIGZvciBTUEVDSUVTX0tFWSAke2tleX1gKTtcbiAgcmV0dXJuIGRlZjtcbn0pO1xuZXhwb3J0IGNvbnN0IElURU1fTUVUQV9ERUZTOiBGaWVsZERlZltdID0gSVRFTV9LRVlTLm1hcChrZXkgPT4ge1xuICBjb25zdCBkZWYgPSBBTExfRklFTERfREVGUy5maW5kKGQgPT4gZC5jYWxsU2lnbiA9PT0ga2V5KTtcbiAgaWYgKCFkZWYpIHRocm93IG5ldyBFcnJvcihgTWlzc2luZyBGaWVsZERlZiBmb3IgSVRFTV9LRVkgJHtrZXl9YCk7XG4gIHJldHVybiBkZWY7XG59KTtcbmV4cG9ydCBjb25zdCBCRVNUSUFSWV9NRVRBX0RFRlM6IEZpZWxkRGVmW10gPSBCRVNUSUFSWV9LRVlTLm1hcChrZXkgPT4ge1xuICBjb25zdCBkZWYgPSBBTExfRklFTERfREVGUy5maW5kKGQgPT4gZC5jYWxsU2lnbiA9PT0ga2V5KTtcbiAgaWYgKCFkZWYpIHRocm93IG5ldyBFcnJvcihgTWlzc2luZyBGaWVsZERlZiBmb3IgQkVTVElBUllfS0VZICR7a2V5fWApO1xuICByZXR1cm4gZGVmO1xufSk7XG5leHBvcnQgY29uc3QgQ0xBU1NfTUVUQV9ERUZTOiBGaWVsZERlZltdID0gQ0xBU1NfS0VZUy5tYXAoa2V5ID0+IHtcbiAgY29uc3QgZGVmID0gQUxMX0ZJRUxEX0RFRlMuZmluZChkID0+IGQuY2FsbFNpZ24gPT09IGtleSk7XG4gIGlmICghZGVmKSB0aHJvdyBuZXcgRXJyb3IoYE1pc3NpbmcgRmllbGREZWYgZm9yIENMQVNTX0tFWSAke2tleX1gKTtcbiAgcmV0dXJuIGRlZjtcbn0pO1xuZXhwb3J0IGNvbnN0IEJBQ0tHUk9VTkRfTUVUQV9ERUZTOiBGaWVsZERlZltdID0gQkFDS0dST1VORF9LRVlTLm1hcChrZXkgPT4ge1xuICBjb25zdCBkZWYgPSBBTExfRklFTERfREVGUy5maW5kKGQgPT4gZC5jYWxsU2lnbiA9PT0ga2V5KTtcbiAgaWYgKCFkZWYpIHRocm93IG5ldyBFcnJvcihgTWlzc2luZyBGaWVsZERlZiBmb3IgQkFDS0dST1VORF9LRVkgJHtrZXl9YCk7XG4gIHJldHVybiBkZWY7XG59KTtcbmV4cG9ydCBjb25zdCBGRUFUU19NRVRBX0RFRlM6IEZpZWxkRGVmW10gPSBGRUFUU19LRVlTLm1hcChrZXkgPT4ge1xuICBjb25zdCBkZWYgPSBBTExfRklFTERfREVGUy5maW5kKGQgPT4gZC5jYWxsU2lnbiA9PT0ga2V5KTtcbiAgaWYgKCFkZWYpIHRocm93IG5ldyBFcnJvcihgTWlzc2luZyBGaWVsZERlZiBmb3IgQkFDS0dST1VORF9LRVkgJHtrZXl9YCk7XG4gIHJldHVybiBkZWY7XG59KTsiLCAiaW1wb3J0IHR5cGUgeyBQYXJzZWRNYXJrZG93bkZpbGUgfSBmcm9tIFwic3JjL3R5cGVzXCI7XG5pbXBvcnQgeyByZXBsYWNlNWVUYWdzIH0gZnJvbSBcIi4vaGVscGVycy90YWdSZXBsYWNlclwiO1xuaW1wb3J0IHsgZ2V0RnVsbFNvdXJjZU5hbWUgfSBmcm9tIFwiLi9oZWxwZXJzL3NvdXJjZU1hcFwiO1xuaW1wb3J0IHsgcmVuZGVyTWFya2Rvd25UYWJsZSB9IGZyb20gXCIuL2hlbHBlcnMvbWFya2Rvd25UYWJsZVwiO1xuaW1wb3J0IHsgZm9ybWF0RW50cnkgfSBmcm9tIFwiLi9oZWxwZXJzL2Zvcm1hdEVudHJ5XCI7XG5pbXBvcnQgeyBidWlsZEZNLCBzZXJpYWxpemVGcm9udG1hdHRlciwgU1BFTExfTUVUQV9ERUZTIH0gZnJvbSBcIi4vaGVscGVycy9mcm9udG1hdHRlclwiO1xuXG5cbmV4cG9ydCBjb25zdCBTQ0hPT0xfTUFQOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+ID0ge1xuICBBOiBcIkFianVyYXRpb25cIixcbiAgQzogXCJDb25qdXJhdGlvblwiLFxuICBEOiBcIkRpdmluYXRpb25cIixcbiAgRTogXCJFbmNoYW50bWVudFwiLFxuICBWOiBcIkV2b2NhdGlvblwiLFxuICBJOiBcIklsbHVzaW9uXCIsXG4gIE46IFwiTmVjcm9tYW5jeVwiLFxuICBUOiBcIlRyYW5zbXV0YXRpb25cIixcbn07XG5cbmZ1bmN0aW9uIG9yZGluYWwobjogbnVtYmVyKTogc3RyaW5nIHtcbiAgY29uc3Qgc3VmZml4ID0gKG4gPT09IDEpID8gXCJzdFwiIDogKG4gPT09IDIpID8gXCJuZFwiIDogKG4gPT09IDMpID8gXCJyZFwiIDogXCJ0aFwiO1xuICByZXR1cm4gYCR7bn0ke3N1ZmZpeH1gO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZm9ybWF0UmFuZ2UocmFuZ2U6IGFueSk6IHN0cmluZyB7XG4gIGlmICghcmFuZ2UpIHJldHVybiBcIlwiO1xuXG4gIGlmICh0eXBlb2YgcmFuZ2UgPT09IFwic3RyaW5nXCIpIHJldHVybiByYW5nZTtcblxuICBpZiAocmFuZ2UudHlwZSA9PT0gXCJzcGVjaWFsXCIpIHJldHVybiBcIlNwZWNpYWxcIjtcbiAgaWYgKHJhbmdlLnR5cGUgPT09IFwicG9pbnRcIiAmJiByYW5nZS5kaXN0YW5jZSkge1xuICAgIGNvbnN0IGRpc3QgPSByYW5nZS5kaXN0YW5jZTtcbiAgICBpZiAoZGlzdC50eXBlID09PSBcInRvdWNoXCIpIHJldHVybiBcIlRvdWNoXCI7XG4gICAgaWYgKGRpc3QudHlwZSA9PT0gXCJzZWxmXCIpIHJldHVybiBcIlNlbGZcIjtcbiAgICBpZiAoZGlzdC50eXBlID09PSBcInNpZ2h0XCIpIHJldHVybiBcIlNpZ2h0XCI7XG4gICAgaWYgKGRpc3QuYW1vdW50KSByZXR1cm4gYCR7ZGlzdC5hbW91bnR9ICR7ZGlzdC50eXBlfWA7XG4gIH1cblxuICByZXR1cm4gXCJWYXJpZXNcIjtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGZvcm1hdFRpbWUodGltZTogYW55W10pOiBzdHJpbmcge1xuICBpZiAoIUFycmF5LmlzQXJyYXkodGltZSkpIHJldHVybiBcIlwiO1xuXG4gIHJldHVybiB0aW1lLm1hcCh0ID0+IGAke3QubnVtYmVyfSAke3QudW5pdH1gKS5qb2luKFwiLCBcIik7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBmb3JtYXREdXJhdGlvbihkdXJhdGlvbjogYW55W10pOiBzdHJpbmcge1xuICBpZiAoIUFycmF5LmlzQXJyYXkoZHVyYXRpb24pKSByZXR1cm4gXCJcIjtcblxuICByZXR1cm4gZHVyYXRpb24ubWFwKGQgPT4ge1xuICAgIGlmIChkLnR5cGUgPT09IFwiaW5zdGFudFwiKSByZXR1cm4gXCJJbnN0YW50YW5lb3VzXCI7XG4gICAgaWYgKGQudHlwZSA9PT0gXCJ0aW1lZFwiICYmIGQuZHVyYXRpb24pIHtcbiAgICAgIHJldHVybiBgJHtkLmR1cmF0aW9uLmFtb3VudH0gJHtkLmR1cmF0aW9uLnR5cGV9JHtkLmNvbmNlbnRyYXRpb24gPyBcIiAoY29uY2VudHJhdGlvbilcIiA6IFwiXCJ9YDtcbiAgICB9XG4gICAgaWYgKGQudHlwZSA9PT0gXCJwZXJtYW5lbnRcIikgcmV0dXJuIFwiUGVybWFuZW50XCI7XG4gICAgcmV0dXJuIFwiU3BlY2lhbFwiO1xuICB9KS5qb2luKFwiLCBcIik7XG59XG4vLyBpbiBwYXJzZXJzLzVlLWpzb24vcGFyc2VTcGVsbHNGaWxlLnRzIChvciB3aGVyZXZlciBmb3JtYXRDb21wb25lbnRzIGxpdmVzKVxuXG5mdW5jdGlvbiBmb3JtYXRDb21wb25lbnRzKGNvbXBvbmVudHM6IGFueSk6IHN0cmluZyB7XG4gIGlmICghY29tcG9uZW50cykgcmV0dXJuIFwiXCI7XG5cbiAgY29uc3QgcGFydHM6IHN0cmluZ1tdID0gW107XG5cbiAgaWYgKGNvbXBvbmVudHMudikgcGFydHMucHVzaChcIlZcIik7XG4gIGlmIChjb21wb25lbnRzLnMpIHBhcnRzLnB1c2goXCJTXCIpO1xuXG4gIGlmIChjb21wb25lbnRzLm0pIHtcbiAgICAvLyBwdWxsIG91dCB0aGUgYWN0dWFsIG1hdGVyaWFsIHRleHQocylcbiAgICBsZXQgbWF0RGV0YWlsczogc3RyaW5nW10gPSBbXTtcblxuICAgIGlmIChBcnJheS5pc0FycmF5KGNvbXBvbmVudHMubSkpIHtcbiAgICAgIG1hdERldGFpbHMgPSBjb21wb25lbnRzLm1cbiAgICAgICAgLm1hcCgoaXRlbTphbnkpID0+XG4gICAgICAgICAgdHlwZW9mIGl0ZW0gPT09IFwic3RyaW5nXCJcbiAgICAgICAgICAgID8gaXRlbVxuICAgICAgICAgICAgOiBpdGVtICYmIHR5cGVvZiBpdGVtLnRleHQgPT09IFwic3RyaW5nXCJcbiAgICAgICAgICAgID8gaXRlbS50ZXh0XG4gICAgICAgICAgICA6IG51bGxcbiAgICAgICAgKVxuICAgICAgICAuZmlsdGVyKCh0OmFueSk6IHQgaXMgc3RyaW5nID0+ICEhdCk7XG4gICAgfSBlbHNlIGlmICh0eXBlb2YgY29tcG9uZW50cy5tID09PSBcInN0cmluZ1wiKSB7XG4gICAgICBtYXREZXRhaWxzID0gW2NvbXBvbmVudHMubV07XG4gICAgfSBlbHNlIGlmIChjb21wb25lbnRzLm0udGV4dCkge1xuICAgICAgbWF0RGV0YWlscyA9IFtjb21wb25lbnRzLm0udGV4dF07XG4gICAgfVxuXG4gICAgLy8gYnVpbGQgdGhlIFx1MjAxQ01cdTIwMUQgZW50cnksIGFwcGVuZGluZyBkZXRhaWxzIGlmIGFueVxuICAgIGNvbnN0IG1hdFBhcnQgPVxuICAgICAgbWF0RGV0YWlscy5sZW5ndGggPiAwXG4gICAgICAgID8gYE0gKCR7bWF0RGV0YWlscy5qb2luKFwiLCBcIil9KWBcbiAgICAgICAgOiBcIk1cIjtcblxuICAgIHBhcnRzLnB1c2gobWF0UGFydCk7XG4gIH1cblxuICByZXR1cm4gcGFydHMuam9pbihcIiwgXCIpO1xufVxuXG5cbmV4cG9ydCBmdW5jdGlvbiBwYXJzZVNwZWxsc0ZpbGUoanNvbjogYW55LCBlZGl0aW9uSWQ6IHN0cmluZyk6IFBhcnNlZE1hcmtkb3duRmlsZVtdIHtcbiAgaWYgKCFqc29uLnNwZWxsKSByZXR1cm4gW107XG5cbiAgLy8gbWFrZSBlZGl0aW9uSWQgYXZhaWxhYmxlIGZvciBvdXIgU09VUkNFIGNvbnZlcnRlclxuICAoanNvbiBhcyBhbnkpLl9lZGl0aW9uSWQgPSBlZGl0aW9uSWQ7XG5cbiAgcmV0dXJuIGpzb24uc3BlbGwubWFwKChzcGVsbDogYW55KSA9PiB7XG4gICAgLy8gXHUyMDE0IGdhdGhlciBkYXRhIGZvciBoZWFkZXIvYm9keS9mb290ZXIgYXMgYmVmb3JlIFx1MjAxNFxuICAgIGNvbnN0IHNvdXJjZXMgPSBzcGVsbC5zb3VyY2VcbiAgICAgID8gQXJyYXkuaXNBcnJheShzcGVsbC5zb3VyY2UpID8gc3BlbGwuc291cmNlIDogW3NwZWxsLnNvdXJjZV1cbiAgICAgIDogW1widW5rbm93blwiXTtcbiAgICBjb25zdCBuYW1lID0gc3BlbGwubmFtZTtcbiAgICBjb25zdCBzY2hvb2wgPSBTQ0hPT0xfTUFQW3NwZWxsLnNjaG9vbF0gPz8gc3BlbGwuc2Nob29sO1xuICAgIGNvbnN0IGxldmVsID0gc3BlbGwubGV2ZWw7XG4gICAgY29uc3QgcmFuZ2UgPSBmb3JtYXRSYW5nZShzcGVsbC5yYW5nZSk7XG4gICAgY29uc3QgY2FzdGluZ1RpbWUgPSBmb3JtYXRUaW1lKHNwZWxsLnRpbWUpO1xuICAgIGNvbnN0IGR1cmF0aW9uID0gZm9ybWF0RHVyYXRpb24oc3BlbGwuZHVyYXRpb24pO1xuICAgIGNvbnN0IGZvcm1hdHRlZFNvdXJjZXMgPSBzb3VyY2VzLm1hcCgoczogc3RyaW5nKSA9PiBnZXRGdWxsU291cmNlTmFtZShzLCBlZGl0aW9uSWQpKTtcblxuICAgIGNvbnN0IGF0dGFja1R5cGUgPSBzcGVsbC5hdHRhY2tUeXBlIHx8IFwiXCI7XG4gICAgY29uc3QgZGFtYWdlVHlwZSA9IHNwZWxsLmRhbWFnZUluZmxpY3Q/LlswXSB8fCBcIlRlbGVwb3J0YXRpb25cIjtcbiAgICBjb25zdCByaXR1YWwgPSBzcGVsbC5yaXR1YWwgPT09IHRydWU7XG4gICAgY29uc3QgY29uY2VudHJhdGlvbiA9IHNwZWxsLmR1cmF0aW9uPy5zb21lKChkOiBhbnkpID0+IGQuY29uY2VudHJhdGlvbikgPz8gZmFsc2U7XG5cbmNvbnN0IEZNICAgPSBidWlsZEZNKHNwZWxsLCBTUEVMTF9NRVRBX0RFRlMpO1xuY29uc3QgeWFtbCA9IHNlcmlhbGl6ZUZyb250bWF0dGVyKEZNLCBTUEVMTF9NRVRBX0RFRlMpO1xuXG4gICAgLy8gXHUyMDE0IHRpdGxlL3N1YnRpdGxlIGFuZCBib2R5IGxheW91dCBcdTIwMTRcbiAgICBjb25zdCBzYWZlTmFtZSA9IG5hbWUucmVwbGFjZSgvXFwvL2csIFwiLVwiKTtcbiAgICBjb25zdCB0aXRsZSA9IGAjICR7bmFtZX1gO1xuICAgIGNvbnN0IGxldmVsTGFiZWwgPVxuICAgICAgbGV2ZWwgPT09IDBcbiAgICAgICAgPyBgJHtzY2hvb2x9IENhbnRyaXBgXG4gICAgICAgIDogYCR7b3JkaW5hbChsZXZlbCl9LWxldmVsICR7c2Nob29sfSBTcGVsbGA7XG4gICAgY29uc3Qgc3VidGl0bGUgPSBgIyMjICoke2xldmVsTGFiZWx9KiR7Y29uY2VudHJhdGlvbiA/IFwiICooQ29uY2VudHJhdGlvbikqXCIgOiBcIlwifWA7XG5cbiAgICBjb25zdCBoZWFkZXJMaW5lcyA9IFtcbiAgICAgIHRpdGxlLFxuICAgICAgc3VidGl0bGUsXG4gICAgICBgKipDYXN0aW5nIFRpbWU6KiogJHtjYXN0aW5nVGltZX1gLFxuICAgICAgYCoqUmFuZ2U6KiogJHtyYW5nZX1gLFxuICAgICAgYCoqQ29tcG9uZW50czoqKiAke2Zvcm1hdENvbXBvbmVudHMoc3BlbGwuY29tcG9uZW50cyl9YCxcbiAgICAgIGAqKkR1cmF0aW9uOioqICR7ZHVyYXRpb259YCxcbiAgICBdO1xuXG4gICAgY29uc3QgYm9keUxpbmVzID0gW1xuICAgICAgLi4uKChzcGVsbC5lbnRyaWVzID8/IFtdKS5tYXAoKGU6IGFueSkgPT4gZm9ybWF0RW50cnkoZSkpKSxcbiAgICAgIC4uLigoc3BlbGwuZW50cmllc0hpZ2hlckxldmVsID8/IFtdKS5tYXAoKGU6IGFueSkgPT4gZm9ybWF0RW50cnkoZSkpKSxcbiAgICBdO1xuXG4gICAgY29uc3QgZm9vdGVyTGluZXMgPSBbXG4gICAgICBgLS0tYCxcbiAgICAgIGAqKlNvdXJjZToqKiAke2Zvcm1hdHRlZFNvdXJjZXMuam9pbihcIiwgXCIpfWAsXG4gICAgXTtcblxuICAgIC8vIFx1MjAxNCBhc3NlbWJsZSB0aGUgbm90ZSB3aXRoIFlBTUwgZnJvbnRtYXR0ZXIgXHUyMDE0XG4gICAgcmV0dXJuIHtcbiAgICAgIHBhdGg6IGAke3NhZmVOYW1lfS5tZGAsXG4gICAgICBjb250ZW50OiBbXG4gICAgICAgIGAtLS1cXG4ke3lhbWx9XFxuLS0tYCxcbiAgICAgICAgaGVhZGVyTGluZXMuam9pbihcIlxcblwiKSxcbiAgICAgICAgYGAsXG4gICAgICAgIGJvZHlMaW5lcy5qb2luKFwiXFxuXFxuXCIpLFxuICAgICAgICBgYCxcbiAgICAgICAgZm9vdGVyTGluZXMuam9pbihcIlxcblwiKSxcbiAgICAgIF0uam9pbihcIlxcblwiKSxcbiAgICB9O1xuICB9KTtcbn1cblxuIiwgImltcG9ydCB0eXBlIHsgUGFyc2VkTWFya2Rvd25GaWxlIH0gZnJvbSBcIi4uLy4uL3R5cGVzXCI7XG5pbXBvcnQgeyByZXBsYWNlNWVUYWdzIH0gZnJvbSBcIi4vaGVscGVycy90YWdSZXBsYWNlclwiO1xuaW1wb3J0IHtcbiAgYnVpbGRGTSxcbiAgc2VyaWFsaXplRnJvbnRtYXR0ZXIsXG4gIEZNX0ZJRUxEUyxcbiAgU1BFQ0lFU19NRVRBX0RFRlMsXG4gIFNJWkVfTUFQLFxufSBmcm9tIFwiLi9oZWxwZXJzL2Zyb250bWF0dGVyXCI7XG5pbXBvcnQgeyByZW5kZXJNYXJrZG93blRhYmxlIH0gZnJvbSBcIi4vaGVscGVycy9tYXJrZG93blRhYmxlXCI7XG5pbXBvcnQgeyBmb3JtYXRFbnRyeSB9IGZyb20gXCIuL2hlbHBlcnMvZm9ybWF0RW50cnlcIjtcblxuZnVuY3Rpb24gc2x1ZyhuYW1lOiBzdHJpbmcpOiBzdHJpbmcge1xuICByZXR1cm4gbmFtZVxuICAgIC5yZXBsYWNlKC87L2csIFwiOlwiKSAgICAgICAvLyBzZW1pY29sb24gXHUyMTkyIGRhc2hcbiAgICAucmVwbGFjZSgvW1xcLzpcIl0vZywgXCI6XCIpICAvLyBzbGFzaCwgY29sb24sIHF1b3RlIFx1MjE5MiBkYXNoXG4gICAgLnRyaW0oKTtcbn1cblxuY29uc3QgQkxPQ0tFRF9UUkFJVFMgPSBbXCJBZ2VcIiwgXCJTaXplXCIsIFwiTGFuZ3VhZ2VzXCIsIFwiQ3JlYXR1cmUgVHlwZVwiLCBcIlNwZWVkXCJdO1xuXG5leHBvcnQgZnVuY3Rpb24gcGFyc2VTcGVjaWVzRmlsZShcbiAganNvbjogeyByYWNlOiBhbnlbXTsgc3VicmFjZT86IGFueVtdOyBfZWRpdGlvbklkPzogc3RyaW5nIH0sXG4gIGVkaXRpb25JZDogc3RyaW5nXG4pOiBQYXJzZWRNYXJrZG93bkZpbGVbXSB7XG4gIGlmICghQXJyYXkuaXNBcnJheShqc29uLnJhY2UpKSByZXR1cm4gW107XG4gIGpzb24uX2VkaXRpb25JZCA9IGVkaXRpb25JZDtcblxuICAvLyAxKSBGaWx0ZXIgb3V0IHJlcHJpbnRzXG4gIGNvbnN0IHJhd1ZhcmlhbnRzID0ganNvbi5yYWNlLmZpbHRlcigocjogYW55KSA9PlxuICAgICEoXCJyZXByaW50ZWRBc1wiIGluIHIpICYmXG4gICAgIS9cXCgoPzpLYWxhZGVzaHxaZW5kaWthcnxBbW9ua2hldHxJbm5pc3RyYWR8SXhhbGFuKVxcKSQvLnRlc3Qoci5uYW1lKVxuICApO1xuXG4gIC8vIDIpIEdyb3VwIGJ5IHJhY2UgbmFtZVxuICBjb25zdCBieU5hbWUgPSBuZXcgTWFwPHN0cmluZywgYW55W10+KCk7XG4gIGZvciAoY29uc3QgciBvZiByYXdWYXJpYW50cykge1xuICAgIGNvbnN0IGxpc3QgPSBieU5hbWUuZ2V0KHIubmFtZSkgPz8gW107XG4gICAgbGlzdC5wdXNoKHIpO1xuICAgIGJ5TmFtZS5zZXQoci5uYW1lLCBsaXN0KTtcbiAgfVxuXG4gIC8vIDMpIEFsbCBzdWJyYWNlcyBhcnJheVxuICBjb25zdCBzdWJyYWNlc0xpc3QgPSBBcnJheS5pc0FycmF5KGpzb24uc3VicmFjZSkgPyBqc29uLnN1YnJhY2UgOiBbXTtcblxuICBjb25zdCBvdXQ6IFBhcnNlZE1hcmtkb3duRmlsZVtdID0gW107XG5cbiAgLy8gNCkgTWFpbiBsb29wIG92ZXIgZWFjaCBzcGVjaWVzXG4gIGZvciAoY29uc3QgW3JhY2VOYW1lLCByYWNlVmFyaWFudHNdIG9mIGJ5TmFtZS5lbnRyaWVzKCkpIHtcbiAgICBjb25zdCBzYWZlTmFtZSA9IHNsdWcocmFjZU5hbWUpO1xuXG4gICAgLy8gcGljayB0aGUgXHUyMDFDZnVsbGVzdFx1MjAxRCB2YXJpYW50IGFzIHByaW1hcnlcbiAgICBjb25zdCBwcmltYXJ5ID0gcmFjZVZhcmlhbnRzLnJlZHVjZShcbiAgICAgIChiZXN0LCBjdXIpID0+XG4gICAgICAgIE9iamVjdC5rZXlzKGN1cikubGVuZ3RoID4gT2JqZWN0LmtleXMoYmVzdCkubGVuZ3RoID8gY3VyIDogYmVzdCxcbiAgICAgIHJhY2VWYXJpYW50c1swXVxuICAgICk7XG5cbiAgICAvLyBvbmVcdTIwMTBvZmY6IGdyYWZ0IEh1bWFuIGFiaWxpdHkgaWYgbWlzc2luZ1xuICAgIGlmICghcHJpbWFyeS5hYmlsaXR5KSB7XG4gICAgICBjb25zdCBodW1hbkVudHJ5ID0gc3VicmFjZXNMaXN0LmZpbmQoKHNyOiBhbnkpID0+XG4gICAgICAgIHNyLnJhY2VOYW1lID09PSByYWNlTmFtZSAmJlxuICAgICAgICBzci5yYWNlU291cmNlID09PSBwcmltYXJ5LnNvdXJjZSAmJlxuICAgICAgICAhKFwibmFtZVwiIGluIHNyKSAmJlxuICAgICAgICBBcnJheS5pc0FycmF5KHNyLmFiaWxpdHkpXG4gICAgICApO1xuICAgICAgaWYgKGh1bWFuRW50cnkpIHByaW1hcnkuYWJpbGl0eSA9IGh1bWFuRW50cnkuYWJpbGl0eTtcbiAgICB9XG5cbiAgICAvLyBidWlsZCBmcm9udG1hdHRlclxuICAgIGNvbnN0IGZtID0gYnVpbGRGTShwcmltYXJ5LCBTUEVDSUVTX01FVEFfREVGUyk7XG4gICAgY29uc3Qgc2Vuc2VzOiBzdHJpbmdbXSA9IFtdO1xuICAgIGlmIChwcmltYXJ5LmRhcmt2aXNpb24pICBzZW5zZXMucHVzaChgRGFya3Zpc2lvbiAke3ByaW1hcnkuZGFya3Zpc2lvbn0gZnQuYCk7XG4gICAgaWYgKHByaW1hcnkuYmxpbmRzaWdodCkgIHNlbnNlcy5wdXNoKGBCbGluZHNpZ2h0ICR7cHJpbWFyeS5ibGluZHNpZ2h0fSBmdC5gKTtcbiAgICBpZiAocHJpbWFyeS50cmVtb3JzZW5zZSkgc2Vuc2VzLnB1c2goYFRyZW1vcnNlbnNlICR7cHJpbWFyeS50cmVtb3JzZW5zZX0gZnQuYCk7XG4gICAgaWYgKHByaW1hcnkudHJ1ZXNpZ2h0KSAgIHNlbnNlcy5wdXNoKGBUcnVlc2lnaHQgJHtwcmltYXJ5LnRydWVzaWdodH0gZnQuYCk7XG4gICAgaWYgKHNlbnNlcy5sZW5ndGgpIGZtLnNlbnNlcyA9IHNlbnNlcztcbiAgICBpZiAoQXJyYXkuaXNBcnJheShmbS50cmFpdHMpKSB7XG4gICAgICBmbS50cmFpdHMgPSBmbS50cmFpdHMuZmlsdGVyKHQgPT4gIUJMT0NLRURfVFJBSVRTLmluY2x1ZGVzKHQpKTtcbiAgICB9XG4gICAgY29uc3QgeWFtbCA9IHNlcmlhbGl6ZUZyb250bWF0dGVyKGZtLCBTUEVDSUVTX01FVEFfREVGUyk7XG5cbiAgICAvLyBidWlsZCBzcGVjaWVzIGJvZHlcbiAgICBjb25zdCBsaW5lczogc3RyaW5nW10gPSBbXTtcbiAgICBsaW5lcy5wdXNoKGAjICR7cmFjZU5hbWV9YCwgYCMjIFN0YXRzYCk7XG5cbiAgICAvLyBTaXplXG4gICAgY29uc3Qgc2l6ZSA9IEFycmF5LmlzQXJyYXkocHJpbWFyeS5zaXplKVxuICAgICAgPyBwcmltYXJ5LnNpemUubWFwKChzOiBzdHJpbmcpID0+IFNJWkVfTUFQW3NdIHx8IHMpLmpvaW4oXCIvXCIpXG4gICAgICA6IFNJWkVfTUFQW3ByaW1hcnkuc2l6ZV0gPz8gcHJpbWFyeS5zaXplO1xuICAgIGxpbmVzLnB1c2goYCoqU2l6ZToqKiAke3NpemV9YCk7XG5cbiAgICAvLyBTcGVlZFxuICAgIGNvbnN0IHNwZWVkID0gdHlwZW9mIHByaW1hcnkuc3BlZWQgPT09IFwibnVtYmVyXCJcbiAgICAgID8gcHJpbWFyeS5zcGVlZFxuICAgICAgOiBwcmltYXJ5LnNwZWVkPy53YWxrID8/IHByaW1hcnkuc3BlZWQ/LmJhc2UgPz8gMDtcbiAgICBsaW5lcy5wdXNoKGAqKlNwZWVkOioqICR7c3BlZWR9IGZ0LiB3YWxraW5nYCk7XG5cbiAgICAvLyBBYmlsaXRpZXNcbiAgICBjb25zdCBraWRzID0gc3VicmFjZXNMaXN0LmZpbHRlcihzciA9PlxuICAgICAgc3IubmFtZSAmJiBzci5yYWNlTmFtZSA9PT0gcmFjZU5hbWUgJiYgc3IucmFjZVNvdXJjZSA9PT0gcHJpbWFyeS5zb3VyY2VcbiAgICApO1xuICAgIGNvbnN0IHJhd0FiaWxpdHkgPSBBcnJheS5pc0FycmF5KHByaW1hcnkuYWJpbGl0eSlcbiAgICAgID8gcHJpbWFyeS5hYmlsaXR5XG4gICAgICA6IEFycmF5LmlzQXJyYXkoa2lkc1swXT8uYWJpbGl0eSkgPyBraWRzWzBdLmFiaWxpdHkgOiBbXTtcbiAgICBpZiAoQXJyYXkuaXNBcnJheShyYXdBYmlsaXR5KSAmJiByYXdBYmlsaXR5Lmxlbmd0aCkge1xuICAgICAgY29uc3QgYm9udXNlcyA9IHsgc3RyOjAsZGV4OjAsY29uOjAsaW50OjAsd2lzOjAsY2hhOjAgfTtcbiAgICAgIGxldCBjaG9vc2VPcHQ6IGFueSA9IG51bGw7XG4gICAgICBmb3IgKGNvbnN0IG9iaiBvZiByYXdBYmlsaXR5KSB7XG4gICAgICAgIGlmIChcImNob29zZVwiIGluIG9iaikgY2hvb3NlT3B0ID0gb2JqLmNob29zZTtcbiAgICAgICAgZWxzZSBmb3IgKGNvbnN0IFtrLHZdIG9mIE9iamVjdC5lbnRyaWVzKG9iaikpIChib251c2VzIGFzIGFueSlba10gKz0gdiBhcyBudW1iZXI7XG4gICAgICB9XG4gICAgICBjb25zdCBwYWlycyA9IE9iamVjdC5lbnRyaWVzKGJvbnVzZXMpIGFzIFtzdHJpbmcsbnVtYmVyXVtdO1xuICAgICAgY29uc3QgcGFydHMgPSBwYWlycy5maWx0ZXIoKFssdl0pPT52IT09MCkubWFwKChbayx2XSk9PmAke2sudG9VcHBlckNhc2UoKX0gJHt2Pj0wP1wiK1wiOlwiXCJ9JHt2fWApO1xuICAgICAgaWYgKGNob29zZU9wdD8uY291bnQgJiYgQXJyYXkuaXNBcnJheShjaG9vc2VPcHQuZnJvbSkpIHtcbiAgICAgICAgcGFydHMucHVzaChgQ0hPT1NFICR7Y2hvb3NlT3B0LmNvdW50fSBmcm9tICR7Y2hvb3NlT3B0LmZyb20ubWFwKChzOnN0cmluZyk9PnMudG9VcHBlckNhc2UoKSkuam9pbihcIiwgXCIpfWApO1xuICAgICAgfVxuICAgICAgaWYgKHBhcnRzLmxlbmd0aCkgbGluZXMucHVzaChgKipBYmlsaXR5IFNjb3JlczoqKiAke3BhcnRzLmpvaW4oXCIsIFwiKX1gKTtcbiAgICB9XG5cbiAgICAvLyBMYW5ndWFnZXNcbiAgICBjb25zdCBsYW5ncyA9IGZtLmxhbmd1YWdlcyBhcyBzdHJpbmdbXXx1bmRlZmluZWQ7XG4gICAgaWYgKGxhbmdzPy5sZW5ndGgpIGxpbmVzLnB1c2goYCoqTGFuZ3VhZ2VzOioqICR7bGFuZ3Muam9pbihcIiwgXCIpfWApO1xuXG4gICAgLy8gU2tpbGxzXG4gICAgaWYgKEFycmF5LmlzQXJyYXkocHJpbWFyeS5za2lsbFByb2ZpY2llbmNpZXMpKSB7XG4gICAgICBjb25zdCBza2lsbExhYmVsczogc3RyaW5nW10gPSBbXTtcbiAgICAgIGZvciAoY29uc3QgZSBvZiBwcmltYXJ5LnNraWxsUHJvZmljaWVuY2llcyBhcyBhbnlbXSkge1xuICAgICAgICBpZiAoZS5jaG9vc2U/LmZyb20pIHtcbiAgICAgICAgICBza2lsbExhYmVscy5wdXNoKGBDaG9vc2UgZnJvbTogJHtlLmNob29zZS5mcm9tLm1hcCgoczpzdHJpbmcpPT5zLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpK3Muc2xpY2UoMSkpLmpvaW4oXCIsIFwiKX1gKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjb25zdCB2YWwgPSBlLnByb2ZpY2llbmN5ID8/IGUubmFtZSA/PyBlO1xuICAgICAgICAgIGlmICh0eXBlb2YgdmFsID09PSBcInN0cmluZ1wiKSBza2lsbExhYmVscy5wdXNoKHZhbC5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSt2YWwuc2xpY2UoMSkpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAoc2tpbGxMYWJlbHMubGVuZ3RoKSBsaW5lcy5wdXNoKGAqKlNraWxsIFByb2ZpY2llbmNpZXM6KiogJHtza2lsbExhYmVscy5qb2luKFwiOyBcIil9YCk7XG4gICAgfVxuXG4gICAgLy8gVG9vbCAvIFdlYXBvbiAvIEFybW9yXG4gICAgY29uc3QgdHAgPSBmbVtGTV9GSUVMRFMuVE9PTF9QUk9GSUNJRU5DSUVTXSBhcyBzdHJpbmdbXXx1bmRlZmluZWQ7XG4gICAgY29uc3Qgd3AgPSBmbVtGTV9GSUVMRFMuV0VBUE9OX1BST0ZJQ0lFTkNJRVNdIGFzIHN0cmluZ1tdfHVuZGVmaW5lZDtcbiAgICBjb25zdCBhcCA9IGZtW0ZNX0ZJRUxEUy5BUk1PUl9QUk9GSUNJRU5DSUVTXSBhcyBzdHJpbmdbXXx1bmRlZmluZWQ7XG4gICAgaWYgKHRwPy5sZW5ndGgpIGxpbmVzLnB1c2goYCoqVG9vbCBQcm9maWNpZW5jaWVzOioqICR7dHAuam9pbihcIiwgXCIpfWApO1xuICAgIGlmICh3cD8ubGVuZ3RoKSBsaW5lcy5wdXNoKGAqKldlYXBvbiBQcm9maWNpZW5jaWVzOioqICR7d3Auam9pbihcIiwgXCIpfWApO1xuICAgIGlmIChhcD8ubGVuZ3RoKSBsaW5lcy5wdXNoKGAqKkFybW9yIFByb2ZpY2llbmNpZXM6KiogJHthcC5qb2luKFwiLCBcIil9YCk7XG5cbiAgICAvLyBUcmFpdHNcbiAgICBsaW5lcy5wdXNoKGAjIyBUcmFpdHNgKTtcbiAgICBjb25zdCBzZWVuID0gbmV3IFNldDxzdHJpbmc+KCk7XG4gICAgZm9yIChjb25zdCB0cmFpdCBvZiBmbS50cmFpdHMgYXMgc3RyaW5nW118fFtdKSB7XG4gICAgICBsaW5lcy5wdXNoKGAjIyMjIyAke3RyYWl0fWApO1xuICAgICAgY29uc3QgZW50ID0gcHJpbWFyeS5lbnRyaWVzPy5maW5kKChlOmFueSk9PmUubmFtZT09PXRyYWl0KTtcbiAgICAgIGlmIChlbnQ/LmVudHJpZXMpIHtcbiAgICAgICAgZW50LmVudHJpZXMuZm9yRWFjaCgoc3ViOmFueSxpZHg6bnVtYmVyKT0+e1xuICAgICAgICAgIGxldCBibGs6c3RyaW5nfHVuZGVmaW5lZDtcbiAgICAgICAgICBpZiAoc3ViLnR5cGU9PT1cInRhYmxlXCIpICAgICAgIGJsayA9IHJlbmRlck1hcmtkb3duVGFibGUoc3ViKTtcbiAgICAgICAgICBlbHNlIGlmIChzdWIudHlwZT09PVwibGlzdFwiKSAgIGJsayA9IHN1Yi5pdGVtcy5tYXAoKGl0OmFueSk9PnR5cGVvZiBpdD09PVwic3RyaW5nXCI/YC0gJHtyZXBsYWNlNWVUYWdzKGl0KX1gOmAtICR7aXQubmFtZX1gICkuam9pbihcIlxcblwiKTtcbiAgICAgICAgICBlbHNlIGlmICh0eXBlb2Ygc3ViPT09XCJzdHJpbmdcIikgYmxrID0gcmVwbGFjZTVlVGFncyhzdWIpO1xuICAgICAgICAgIGlmIChibGsgJiYgIXNlZW4uaGFzKGJsaykpIHtcbiAgICAgICAgICAgIGxpbmVzLnB1c2goYmxrKTtcbiAgICAgICAgICAgIHNlZW4uYWRkKGJsayk7XG4gICAgICAgICAgICBpZiAoZW50LmVudHJpZXMubGVuZ3RoPjEgJiYgaWR4PGVudC5lbnRyaWVzLmxlbmd0aC0xKSBsaW5lcy5wdXNoKFwiXCIpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gXHUyNTAwXHUyNTAwXHUyNTAwIE5vdyBicmFuY2ggb24gc3VicmFjZXMgXHUyNTAwXHUyNTAwXHUyNTAwXG4gICAgY29uc3Qgc3VicyA9IGtpZHM7ICAvLyBhbHJlYWR5IGZpbHRlcmVkXG4gICAgaWYgKHN1YnMubGVuZ3RoKSB7XG4gICAgICAvLyAxKSBtYWluIGZpbGUgaW4gZm9sZGVyXG4gICAgICBvdXQucHVzaCh7XG4gICAgICAgIHBhdGg6IGBTcGVjaWVzLyR7c2FmZU5hbWV9LyR7c2FmZU5hbWV9Lm1kYCxcbiAgICAgICAgY29udGVudDogYC0tLVxcbiR7eWFtbH1cXG4tLS1cXG5cXG4ke2xpbmVzLmpvaW4oXCJcXG5cIil9YCxcbiAgICAgIH0pO1xuXG4gICAgICAvLyAyKSBlYWNoIHN1YnNwZWNpZXNcbiAgICAgIGNvbnN0IHN1YkZvbGRlciA9IGBTcGVjaWVzLyR7c2FmZU5hbWV9L1JhY2VzYDtcbiAgICAgIGZvciAoY29uc3Qgc3Igb2Ygc3VicykgeyBcbiAgICAgICAgLy8gdHVybiBzZW1pY29sb25zIFx1MjE5MiBjb2xvbnNcbiAgICAgICAgY29uc3QgZGlzcGxheSA9IHNyLm5hbWUucmVwbGFjZSgvOy9nLCBcIjpcIik7XG4gICAgICAgIGNvbnN0IHN1YkxpbmVzOiBzdHJpbmdbXSA9IFtgIyAke2Rpc3BsYXl9YF07XG5cbiAgICAgICAgLy8gY29weSBTdGF0cyBibG9jayBpZiB5b3UgbGlrZTpcbiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoc3IuYWJpbGl0eSkpIHtcbiAgICAgICAgICBjb25zdCBib251c2VzID0geyBzdHI6MCxkZXg6MCxjb246MCxpbnQ6MCx3aXM6MCxjaGE6MCB9O1xuICAgICAgICAgIGxldCBjaG9vc2VPcHQ6YW55ID0gbnVsbDtcbiAgICAgICAgICBmb3IgKGNvbnN0IG9iaiBvZiBzci5hYmlsaXR5KSB7XG4gICAgICAgICAgICBpZiAoXCJjaG9vc2VcIiBpbiBvYmopIGNob29zZU9wdCA9IG9iai5jaG9vc2U7XG4gICAgICAgICAgICBlbHNlIGZvciAoY29uc3QgW2ssdl0gb2YgT2JqZWN0LmVudHJpZXMob2JqKSkgKGJvbnVzZXMgYXMgYW55KVtrXSs9diBhcyBudW1iZXI7XG4gICAgICAgICAgfVxuICAgICAgICAgIGNvbnN0IHBhaXJzID0gT2JqZWN0LmVudHJpZXMoYm9udXNlcykgYXMgW3N0cmluZyxudW1iZXJdW107XG4gICAgICAgICAgY29uc3QgcGFydHMgPSBwYWlycy5maWx0ZXIoKFssdl0pPT52IT09MCkubWFwKChbayx2XSk9PmAke2sudG9VcHBlckNhc2UoKX0gJHt2Pj0wP1wiK1wiOlwiXCJ9JHt2fWApO1xuICAgICAgICAgIGlmIChjaG9vc2VPcHQ/LmNvdW50KSBwYXJ0cy5wdXNoKGBDSE9PU0UgJHtjaG9vc2VPcHQuY291bnR9IGZyb20gJHsoY2hvb3NlT3B0LmZyb20gYXMgc3RyaW5nW10pLm1hcChzPT5zLnRvVXBwZXJDYXNlKCkpLmpvaW4oXCIsIFwiKX1gKTtcbiAgICAgICAgICBpZiAocGFydHMubGVuZ3RoKSBzdWJMaW5lcy5wdXNoKGAqKkFiaWxpdHkgU2NvcmVzOioqICR7cGFydHMuam9pbihcIiwgXCIpfWApO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gdGhlbiB0cmFpdHMvZW50cmllc1xuICAgICAgICBmb3IgKGNvbnN0IGVudHJ5IG9mIHNyLmVudHJpZXMgfHwgW10pIHtcbiAgICAgICAgICBzdWJMaW5lcy5wdXNoKGZvcm1hdEVudHJ5KGVudHJ5KSk7XG4gICAgICAgICAgc3ViTGluZXMucHVzaChcIlwiKTsgLy8gb3B0aW9uYWwgYmxhbmsgbGluZSBiZXR3ZWVuIGZlYXR1cmVzXG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBzdWJZYW1sID0gc2VyaWFsaXplRnJvbnRtYXR0ZXIoYnVpbGRGTShzciwgU1BFQ0lFU19NRVRBX0RFRlMpLCBTUEVDSUVTX01FVEFfREVGUyk7XG4gICAgICAgIG91dC5wdXNoKHtcbiAgICAgICAgICBwYXRoOiBgJHtzdWJGb2xkZXJ9LyR7c2x1Zyhzci5uYW1lKX0ubWRgLFxuICAgICAgICAgIGNvbnRlbnQ6IGAtLS1cXG4ke3N1YllhbWx9XFxuLS0tXFxuXFxuJHtzdWJMaW5lcy5qb2luKFwiXFxuXCIpfWAsXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICAvLyBubyBzdWJyYWNlcyBcdTIxRDIgYSBzaW5nbGUgZmxhdCBmaWxlXG4gICAgICBvdXQucHVzaCh7XG4gICAgICAgIHBhdGg6IGBTcGVjaWVzLyR7c2FmZU5hbWV9Lm1kYCxcbiAgICAgICAgY29udGVudDogYC0tLVxcbiR7eWFtbH1cXG4tLS1cXG5cXG4ke2xpbmVzLmpvaW4oXCJcXG5cIil9YCxcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIC8vIDUpIFNvcnQgJiByZXR1cm5cbiAgcmV0dXJuIG91dC5zb3J0KChhLCBiKSA9PiBhLnBhdGgubG9jYWxlQ29tcGFyZShiLnBhdGgpKTtcbn1cbiIsICJpbXBvcnQgdHlwZSB7IFBhcnNlZE1hcmtkb3duRmlsZSB9IGZyb20gXCIuLi8uLi90eXBlc1wiO1xuaW1wb3J0IHsgXG4gIGJ1aWxkRk0sIFxuICBzZXJpYWxpemVGcm9udG1hdHRlciwgXG4gIENMQVNTX01FVEFfREVGUywgXG4gIHVuaWZpZWRUb29sUHJvZnMsIFxuICB1bmlmaWVkV2VhcG9uUHJvZnMsIFxuICBTa2lsbE9wdGlvbixcbiAgdW5pZmllZFNraWxscyxcbiAgU0tJTExfT1BUSU9OUywgXG4gIEZNX0ZJRUxEU1xufSBmcm9tIFwiLi9oZWxwZXJzL2Zyb250bWF0dGVyXCI7XG5pbXBvcnQgeyByZW5kZXJNYXJrZG93blRhYmxlIH0gZnJvbSBcIi4vaGVscGVycy9tYXJrZG93blRhYmxlXCI7XG5pbXBvcnQgeyByZXBsYWNlNWVUYWdzIH0gZnJvbSBcIi4vaGVscGVycy90YWdSZXBsYWNlclwiO1xuaW1wb3J0IHsgZm9ybWF0RW50cnkgfSBmcm9tIFwiLi9oZWxwZXJzL2Zvcm1hdEVudHJ5XCI7XG5cbmZ1bmN0aW9uIGZvcm1hdEZlYXR1cmVMaW5rKG5hbWU6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgY29uc3QgaWdub3JlID0gW1wiQWJpbGl0eSBTY29yZSBJbXByb3ZlbWVudFwiLCBcIkFyY2hldHlwZSBGZWF0dXJlXCIsIFwiU3ViY2xhc3MgRmVhdHVyZVwiXTtcbiAgICBpZiAoaWdub3JlLnNvbWUoc3ViID0+IG5hbWUudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhzdWIudG9Mb3dlckNhc2UoKSkpKSB7XG4gICAgICByZXR1cm4gbmFtZTtcbiAgICB9XG4gIFxuICAgIGNvbnN0IGFuY2hvciA9IG5hbWVcbiAgICAgIC5yZXBsYWNlKC9bXlxcd1xcc10vZywgXCJcIikgICAgICAgICAgIC8vIHJlbW92ZSBwdW5jdHVhdGlvbiAoa2VlcCBzcGFjZXMpXG4gICAgICAucmVwbGFjZSgvLS9nLCBcIiBcIikgICAgICAgICAgICAgICAgLy8gcmVtb3ZlIGRhc2hlc1xuICAgICAgLnJlcGxhY2UoL1xccysvZywgXCIgXCIpICAgICAgICAgICAgICAvLyBub3JtYWxpemUgd2hpdGVzcGFjZVxuICAgICAgLnRyaW0oKVxuICAgICAgLnJlcGxhY2UoL1xcYlxcdy9nLCBsID0+IGwudG9VcHBlckNhc2UoKSk7IC8vIGNhcGl0YWxpemUgd29yZHNcbiAgXG4gICAgcmV0dXJuIGBbWyMke2FuY2hvcn1dXWA7XG4gIH1cbiAgXG5leHBvcnQgY29uc3QgT1BUX0ZFQVRVUkVfVFlQRV9UT19GVUxMOiBSZWNvcmQ8c3RyaW5nLHN0cmluZz4gPSB7XG4gIEFJOiAgIFwiQXJ0aWZpY2VyIEluZnVzaW9uXCIsXG4gIEVEOiAgIFwiRWxlbWVudGFsIERpc2NpcGxpbmVcIixcbiAgRUk6ICAgXCJFbGRyaXRjaCBJbnZvY2F0aW9uXCIsXG4gIE1NOiAgIFwiTWV0YW1hZ2ljXCIsXG4gIE1WOiAgIFwiTWFuZXV2ZXJcIixcbiAgXCJNVjpCXCI6ICAgIFwiTWFuZXV2ZXIsIEJhdHRsZSBNYXN0ZXJcIixcbiAgXCJNVjpDMi1VQVwiOlwiTWFuZXV2ZXIsIENhdmFsaWVyIFYyIChVQSlcIixcbiAgXCJBUzpWMS1VQVwiOlwiQXJjYW5lIFNob3QsIFYxIChVQSlcIixcbiAgXCJBUzpWMi1VQVwiOlwiQXJjYW5lIFNob3QsIFYyIChVQSlcIixcbiAgQVM6ICAgXCJBcmNhbmUgU2hvdFwiLFxuICBPVEg6ICBcIk90aGVyXCIsXG4gIFwiRlM6RlwiOlwiRmlnaHRpbmcgU3R5bGU7IEZpZ2h0ZXJcIixcbiAgXCJGUzpCXCI6XCJGaWdodGluZyBTdHlsZTsgQmFyZFwiLFxuICBcIkZTOlBcIjpcIkZpZ2h0aW5nIFN0eWxlOyBQYWxhZGluXCIsXG4gIFwiRlM6UlwiOlwiRmlnaHRpbmcgU3R5bGU7IFJhbmdlclwiLFxuICBQQjogICBcIlBhY3QgQm9vblwiLFxuICBPUjogICBcIk9ub21hbmN5IFJlc29uYW50XCIsXG4gIFJOOiAgIFwiUnVuZSBLbmlnaHQgUnVuZVwiLFxuICBBRjogICBcIkFsY2hlbWljYWwgRm9ybXVsYVwiLFxuICBUVDogICBcIlRyYXZlbGVyJ3MgVHJpY2tcIixcbn07XG4gIFxuICBmdW5jdGlvbiByZW5kZXJFbnRyaWVzKGVudHJpZXM6IGFueVtdKTogc3RyaW5nIHtcbiAgICByZXR1cm4gZW50cmllcy5tYXAoKGVudHJ5KSA9PiB7XG4gICAgICBpZiAodHlwZW9mIGVudHJ5ID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgIHJldHVybiByZXBsYWNlNWVUYWdzKGVudHJ5KTtcbiAgICAgIH1cbiAgXG4gICAgICBpZiAodHlwZW9mIGVudHJ5ID09PSBcIm9iamVjdFwiKSB7XG4gICAgICAgIGlmIChlbnRyeS50eXBlID09PSBcInJlZkNsYXNzRmVhdHVyZVwiKSB7XG4gICAgICAgICAgY29uc3QgW25hbWVdID0gZW50cnkuY2xhc3NGZWF0dXJlLnNwbGl0KFwifFwiKTtcbiAgICAgICAgICByZXR1cm4gYCpTZWUgZmVhdHVyZTogKioke25hbWV9KioqYDtcbiAgICAgICAgfVxuICBcbiAgICAgICAgaWYgKGVudHJ5LnR5cGUgPT09IFwiZW50cmllc1wiICYmIGVudHJ5Lm5hbWUpIHtcbiAgICAgICAgICBjb25zdCBpbm5lciA9IHJlbmRlckVudHJpZXMoZW50cnkuZW50cmllcyB8fCBbXSk7XG4gICAgICAgICAgcmV0dXJuIGAqKiR7ZW50cnkubmFtZX0qKlxcblxcbiR7aW5uZXJ9YDtcbiAgICAgICAgfVxuICBcbiAgICAgICAgaWYgKGVudHJ5LnR5cGUgPT09IFwiaW5zZXRcIiAmJiBlbnRyeS5uYW1lKSB7XG4gICAgICAgICAgY29uc3QgaW5uZXIgPSByZW5kZXJFbnRyaWVzKGVudHJ5LmVudHJpZXMgfHwgW10pO1xuICAgICAgICAgIHJldHVybiBgPiAqKiR7ZW50cnkubmFtZX0qKlxcbj5cXG4+ICR7aW5uZXIuc3BsaXQoXCJcXG5cIikuam9pbihcIlxcbj4gXCIpfWA7XG4gICAgICAgIH1cbiAgXG4gICAgICAgIC8vIGZhbGxiYWNrXG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KGVudHJ5LmVudHJpZXMpKSB7XG4gICAgICAgICAgcmV0dXJuIHJlbmRlckVudHJpZXMoZW50cnkuZW50cmllcyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgXG4gICAgICByZXR1cm4gXCJcIjtcbiAgICB9KS5maWx0ZXIoQm9vbGVhbikuam9pbihcIlxcblwiKTtcbiAgfVxuICBcbmV4cG9ydCBmdW5jdGlvbiBwYXJzZUNsYXNzRmlsZShcbiAganNvbjogYW55LFxuICBlZGl0aW9uSWQ6IHN0cmluZyxcbiAgZmlsZU5hbWU6IHN0cmluZyxcbiAgb3B0aW9uYWxGZWF0dXJlczogYW55W11cbik6IFBhcnNlZE1hcmtkb3duRmlsZVtdIHtcbiAgLy8gbWFrZSBlZGl0aW9uSWQgYXZhaWxhYmxlIGZvciBmcm9udG1hdHRlclxuICAoanNvbiBhcyBhbnkpLl9lZGl0aW9uSWQgPSBlZGl0aW9uSWQ7XG5cbiAgLy8gdW53cmFwIHRoZSByZWFsIGNsYXNzIHJlY29yZFxuICBjb25zdCBjbHMgPSBBcnJheS5pc0FycmF5KGpzb24uY2xhc3MpID8ganNvbi5jbGFzc1swXSA6IGpzb247XG4gIC8vIGRlcml2ZSB0aGUgTWFya2Rvd24gZmlsZW5hbWVcbiAgY29uc3QgY2xhc3NOYW1lID1cbiAgICB0eXBlb2YgY2xzLm5hbWUgPT09IFwic3RyaW5nXCJcbiAgICAgID8gY2xzLm5hbWVcbiAgICAgIDogZmlsZU5hbWVcbiAgICAgID8gZmlsZU5hbWUucmVwbGFjZSgvXmNsYXNzLS8sIFwiXCIpLnJlcGxhY2UoL1xcLmpzb24kLywgXCJcIilcbiAgICAgIDogXCJVbmtub3duXCI7XG5cbiAgY29uc3Qgc3ViY2xhc3NGaWxlczogUGFyc2VkTWFya2Rvd25GaWxlW10gPSBbXTtcblxuICBjb25zdCBQUk9GX0JPTlVTX0JZX0xFVkVMID0gW1xuICAgIFwiKzJcIiwgXCIrMlwiLCBcIisyXCIsIFwiKzJcIixcbiAgICBcIiszXCIsIFwiKzNcIiwgXCIrM1wiLCBcIiszXCIsXG4gICAgXCIrNFwiLCBcIis0XCIsIFwiKzRcIiwgXCIrNFwiLFxuICAgIFwiKzVcIiwgXCIrNVwiLCBcIis1XCIsIFwiKzVcIixcbiAgICBcIis2XCIsIFwiKzZcIiwgXCIrNlwiLCBcIis2XCJcbiAgXTtcbiAgXG4gIC8vIG5vcm1hbGl6ZSBoaXRcdTIwMTBkaWNlXG4gIGNvbnN0IGhkTnVtICAgPSBjbHMuaGQ/Lm51bWJlciA/PyAxO1xuICBjb25zdCBoZEZhY2VzID0gY2xzLmhkPy5mYWNlcyAgPz8gNjtcbiAgY29uc3QgaGRTdHIgICA9IGAke2hkTnVtfWQke2hkRmFjZXN9YDtcbiAgY29uc3QgaGRNYXggICA9IGhkTnVtICogaGRGYWNlcztcbiAgY29uc3QgaGRBdmcgICA9IE1hdGguY2VpbCgoaGRGYWNlcyArIDEpIC8gMik7XG5cbmNvbnN0IGJhc2VGTSA9IGJ1aWxkRk0oY2xzLCBDTEFTU19NRVRBX0RFRlMpO1xuY29uc3QgZm0gICAgID0geyAuLi5iYXNlRk0sIGhkOiBoZFN0ciB9O1xuY29uc3QgeWFtbCAgID0gc2VyaWFsaXplRnJvbnRtYXR0ZXIoZm0sIENMQVNTX01FVEFfREVGUyk7XG5cbi8vIDEpIERlY2xhcmUgeW91ciBsaW5lcyBidWZmZXIgaW1tZWRpYXRlbHlcbmNvbnN0IGxpbmVzOiBzdHJpbmdbXSA9IFtdO1xuXG4vLyA0KSBOb3cgY2Fycnkgb24gd2l0aCB0aGUgcmVzdCBvZiB5b3VyIGJvZHlcbmxpbmVzLnB1c2goYCMgJHtjbGFzc05hbWV9YCk7XG5pZiAoY2xzLnNvdXJjZSkgbGluZXMucHVzaChgKipTb3VyY2U6KiogJHtjbHMuc291cmNlfWApO1xubGluZXMucHVzaChgYCk7XG5saW5lcy5wdXNoKGAtLS1gKTtcblxuICAvLyBcdTI1MDBcdTI1MDBcdTI1MDAgSGl0IFBvaW50cyBcdTI1MDBcdTI1MDBcdTI1MDBcbiAgbGluZXMucHVzaChgIyMgSGl0IFBvaW50c2ApO1xuICBsaW5lcy5wdXNoKGAqKkhpdCBEaWNlOioqICR7aGRTdHJ9IHBlciAke2NsYXNzTmFtZX0gbGV2ZWxgKTtcbiAgbGluZXMucHVzaChgKipIaXQgUG9pbnRzIGF0IDFzdCBMZXZlbDoqKiAke2hkTWF4fSArIHlvdXIgQ29uc3RpdHV0aW9uIG1vZGlmaWVyYCk7XG4gIGxpbmVzLnB1c2goXG4gICAgYCoqSGl0IFBvaW50cyBhdCBIaWdoZXIgTGV2ZWxzOioqICR7aGRTdHJ9IChvciAke2hkQXZnfSkgKyB5b3VyIENvbnN0aXR1dGlvbiBtb2RpZmllciBwZXIgbGV2ZWwgYWZ0ZXIgMXN0YFxuICApO1xuXG4vLyBcdTI1MDBcdTI1MDBcdTI1MDAgUHJvZmljaWVuY2llcyBcdTI1MDBcdTI1MDBcdTI1MDBcbmxpbmVzLnB1c2goYGApO1xubGluZXMucHVzaChgLS0tYCk7XG5saW5lcy5wdXNoKGAjIyBQcm9maWNpZW5jaWVzYCk7XG5cbmNvbnN0IHNwID0gY2xzLnN0YXJ0aW5nUHJvZmljaWVuY2llcyA/PyB7fTtcblxuLy8gQXJtb3JcbmlmIChBcnJheS5pc0FycmF5KHNwLmFybW9yKSAmJiBzcC5hcm1vci5sZW5ndGgpIHtcbiAgbGluZXMucHVzaChgLSAqKkFybW9yOioqICR7c3AuYXJtb3Iuam9pbihcIiwgXCIpfWApO1xufVxuXG4vLyBXZWFwb25zXG5jb25zdCB3ZWFwb25MaXN0ID0gdW5pZmllZFdlYXBvblByb2ZzKHNwKTtcbmlmICh3ZWFwb25MaXN0Lmxlbmd0aCkge1xuICBsaW5lcy5wdXNoKGAtICoqV2VhcG9uczoqKiAke3dlYXBvbkxpc3Quam9pbihcIiwgXCIpfWApO1xufVxuXG4vLyBUb29sc1xuY29uc3QgdG9vbExpc3QgPSB1bmlmaWVkVG9vbFByb2ZzKHNwKTtcbmlmICh0b29sTGlzdC5sZW5ndGgpIHtcbiAgbGluZXMucHVzaChgLSAqKlRvb2xzOioqICR7dG9vbExpc3Quam9pbihcIiwgXCIpfWApO1xufVxuXG4vLyBTYXZpbmcgVGhyb3dzXG5jb25zdCBzYXZlcyA9IEFycmF5LmlzQXJyYXkoY2xzLnByb2ZpY2llbmN5KVxuICA/IGNscy5wcm9maWNpZW5jeS5tYXAoKGs6IHN0cmluZykgPT5cbiAgICAgICh7IHN0cjpcIlN0cmVuZ3RoXCIsIGRleDpcIkRleHRlcml0eVwiLCBjb246XCJDb25zdGl0dXRpb25cIixcbiAgICAgICAgIGludDpcIkludGVsbGlnZW5jZVwiLCB3aXM6XCJXaXNkb21cIiwgY2hhOlwiQ2hhcmlzbWFcIiB9W2tdIHx8IGsudG9VcHBlckNhc2UoKSlcbiAgICApXG4gIDogW107XG5pZiAoc2F2ZXMubGVuZ3RoKSB7XG4gIGxpbmVzLnB1c2goYC0gKipTYXZpbmcgVGhyb3dzOioqICR7c2F2ZXMuam9pbihcIiwgXCIpfWApO1xufVxuXG5cbi8vIFx1MjUwMFx1MjUwMFx1MjUwMCBTa2lsbHMgXHUyNTAwXHUyNTAwXHUyNTAwXG57XG4gIC8vIDEpIGdyYWIgd2hhdGV2ZXIgYXJyYXkgaG9sZHMgdGhlIHJhdyBvYmplY3RzL3N0cmluZ3NcbiAgY29uc3QgcmF3U2tpbGxzOiBhbnlbXSA9XG4gICAgQXJyYXkuaXNBcnJheShzcC5za2lsbFByb2ZpY2llbmNpZXMpID8gc3Auc2tpbGxQcm9maWNpZW5jaWVzXG4gICAgOiBBcnJheS5pc0FycmF5KHNwLnNraWxscykgICAgICAgICAgICAgPyBzcC5za2lsbHNcbiAgICA6IEFycmF5LmlzQXJyYXkoc3Auc2tpbGxQcm9mKSAgICAgICAgICA/IHNwLnNraWxsUHJvZlxuICAgIDogW107XG5cbiAgLy8gMikgbG9vayBmb3IgdGhlIFx1MjAxQ2Nob29zZSBOIGZyb20gW1x1MjAyNl1cdTIwMUQgZW50cnlcbiAgY29uc3QgY2hvaWNlRW50cnkgPSByYXdTa2lsbHMuZmluZChcbiAgICBlID0+IGUgJiZcbiAgICAgICAgICh0eXBlb2YgZS5jaG9vc2UgPT09IFwib2JqZWN0XCIgfHwgdHlwZW9mIGUuYW55ID09PSBcIm51bWJlclwiKVxuICApO1xuXG4gIGlmIChjaG9pY2VFbnRyeSkge1xuICAgIC8vIGhvdyBtYW55IHRvIGNob29zZVxuICAgIGNvbnN0IGNvdW50ID0gY2hvaWNlRW50cnkuY2hvb3NlPy5jb3VudCA/PyBjaG9pY2VFbnRyeS5hbnkgPz8gMTtcblxuICAgIC8vIHB1bGwgdGhlIGFjdHVhbCBsaXN0IG9mIG9wdGlvbnMsIG9yIGZhbGwgYmFjayB0byB0aGUgZ2xvYmFsIFNLSUxMX09QVElPTlNcbiAgICBjb25zdCBvcHRpb25zOiBzdHJpbmdbXSA9IEFycmF5LmlzQXJyYXkoY2hvaWNlRW50cnkuY2hvb3NlPy5mcm9tKVxuICAgICAgPyBjaG9pY2VFbnRyeS5jaG9vc2UuZnJvbS5tYXAoKHM6IHN0cmluZykgPT5cbiAgICAgICAgICAvLyB0aXRsZS1jYXNlIGVhY2ggd29yZCAob3IganVzdCB1c2UgcylcbiAgICAgICAgICBzLnNwbGl0KFwiIFwiKS5tYXAodyA9PiB3WzBdLnRvVXBwZXJDYXNlKCkgKyB3LnNsaWNlKDEpKS5qb2luKFwiIFwiKVxuICAgICAgICApXG4gICAgICA6IFNLSUxMX09QVElPTlM7XG5cbiAgICBsaW5lcy5wdXNoKGAtICoqU2tpbGxzIChDaG9vc2UgJHtjb3VudH0pOioqICR7b3B0aW9ucy5qb2luKFwiLCBcIil9YCk7XG5cbiAgfSBlbHNlIHtcbiAgICAvLyBubyBjaG9vc2UtZnJvbSBvYmplY3QgXHUyMTkyIGZsYXQgbGlzdCBmcm9tIHlvdXIgdW5pZmllZCBoZWxwZXJcbiAgICBjb25zdCBmbGF0ID0gdW5pZmllZFNraWxscyhzcCk7XG4gICAgaWYgKGZsYXQubGVuZ3RoKSB7XG4gICAgICBsaW5lcy5wdXNoKGAtICoqU2tpbGxzOioqICR7ZmxhdC5qb2luKFwiLCBcIil9YCk7XG4gICAgfVxuICB9XG59XG5cblxuXG4gIC8vIFx1MjUwMFx1MjUwMFx1MjUwMCBFcXVpcG1lbnQgXHUyNTAwXHUyNTAwXHUyNTAwXG4gIGlmIChBcnJheS5pc0FycmF5KGNscy5zdGFydGluZ0VxdWlwbWVudCkpIHtcbiAgICBsaW5lcy5wdXNoKGBcXG4jIyMgRXF1aXBtZW50YCk7XG4gICAgY2xzLnN0YXJ0aW5nRXF1aXBtZW50XG4gICAgICAuZmlsdGVyKChlOiBhbnkpID0+IHR5cGVvZiBlID09PSBcInN0cmluZ1wiKVxuICAgICAgLmZvckVhY2goKGl0ZW06IHN0cmluZykgPT4gbGluZXMucHVzaChgLSAke2l0ZW19YCkpO1xuICB9XG5cbi8vIFx1MjUwMFx1MjUwMFx1MjUwMCBDbGFzcyBQcm9ncmVzc2lvbiBcdTI1MDBcdTI1MDBcdTI1MDBcbmNvbnN0IHByb2dHcm91cHMgPSBjbHMuY2xhc3NUYWJsZUdyb3VwcyA/PyBbXTtcbmNvbnN0IG1heExldmVsID0gMjA7XG5cbmlmICghcHJvZ0dyb3Vwcy5sZW5ndGgpIHtcbiAgbGluZXMucHVzaChgKihObyBjbGFzcyB0YWJsZSBwcm92aWRlZCBmb3IgdGhpcyBjbGFzcy4pKmApO1xufSBlbHNlIHtcbiAgLy8gMSkgQnVpbGQgbGV2ZWwgXHUyMTkyIGZlYXR1cmUgbWFwXG4gIGNvbnN0IGZlYXR1cmVzQnlMZXZlbDogUmVjb3JkPG51bWJlciwgc3RyaW5nW10+ID0ge307XG4gIGZvciAoY29uc3QgZmVhdCBvZiBjbHMuY2xhc3NGZWF0dXJlcyA/PyBbXSkge1xuICAgIGNvbnN0IHJhdyA9IHR5cGVvZiBmZWF0ID09PSBcIm9iamVjdFwiICYmIGZlYXQuY2xhc3NGZWF0dXJlID8gZmVhdC5jbGFzc0ZlYXR1cmUgOiBTdHJpbmcoZmVhdCk7XG4gICAgY29uc3QgW25hbWUsLCAsbHZsU3RyXSA9IHJhdy5zcGxpdChcInxcIik7XG4gICAgY29uc3QgbHZsID0gTnVtYmVyKGx2bFN0ciA/PyAwKTtcbiAgICBpZiAoIWZlYXR1cmVzQnlMZXZlbFtsdmxdKSBmZWF0dXJlc0J5TGV2ZWxbbHZsXSA9IFtdO1xuICAgIGZlYXR1cmVzQnlMZXZlbFtsdmxdLnB1c2gobmFtZSk7XG4gIH1cblxuICAvLyAyKSBHYXRoZXIgZXZlcnkgY29sdW1uIGxhYmVsICYgcm93IHZhbHVlXG4gIGNvbnN0IGFsbExhYmVsc1NldCA9IG5ldyBTZXQ8c3RyaW5nPigpO1xuICBjb25zdCByb3dNYXBzOiBSZWNvcmQ8bnVtYmVyLCBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+PiA9IHt9O1xuXG4gIGZvciAoY29uc3QgZ3JvdXAgb2YgcHJvZ0dyb3Vwcykge1xuICAgIGNvbnN0IGxhYmVscyA9IEFycmF5LmlzQXJyYXkoZ3JvdXAuY29sTGFiZWxzKVxuICAgICAgPyBncm91cC5jb2xMYWJlbHMubWFwKChsOiBzdHJpbmcpID0+IHJlcGxhY2U1ZVRhZ3MobCkpXG4gICAgICA6IFtdO1xuICAgIGNvbnN0IHJvd3MgPSBBcnJheS5pc0FycmF5KGdyb3VwLnJvd3MpXG4gICAgICA/IGdyb3VwLnJvd3NcbiAgICAgIDogQXJyYXkuaXNBcnJheShncm91cC5yb3dzU3BlbGxQcm9ncmVzc2lvbilcbiAgICAgICAgPyBncm91cC5yb3dzU3BlbGxQcm9ncmVzc2lvblxuICAgICAgICA6IFtdO1xuXG4gICAgaWYgKCFsYWJlbHMubGVuZ3RoIHx8ICFyb3dzLmxlbmd0aCkgY29udGludWU7XG5cbiAgICBmb3IgKGxldCBsdmwgPSAwOyBsdmwgPCByb3dzLmxlbmd0aDsgbHZsKyspIHtcbiAgICAgIGNvbnN0IGxldmVsTnVtID0gbHZsICsgMTtcbiAgICAgIGlmICghcm93TWFwc1tsZXZlbE51bV0pIHJvd01hcHNbbGV2ZWxOdW1dID0ge307XG4gICAgICBjb25zdCByb3dNYXAgPSByb3dNYXBzW2xldmVsTnVtXTtcbiAgICAgIGNvbnN0IGNlbGxzID0gcm93c1tsdmxdO1xuXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxhYmVscy5sZW5ndGg7IGkrKykge1xuICAgICAgICBjb25zdCBsYWJlbCA9IGxhYmVsc1tpXTtcbiAgICAgICAgbGV0IHZhbCA9IFwiXCI7XG4gICAgICAgIGNvbnN0IGNlbGwgPSBjZWxsc1tpXTtcblxuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShjZWxsKSkge1xuICAgICAgICAgIHZhbCA9IGNlbGwuam9pbihcIiwgXCIpO1xuICAgICAgICB9IGVsc2UgaWYgKGNlbGwgJiYgdHlwZW9mIGNlbGwgPT09IFwib2JqZWN0XCIgJiYgXCJ2YWx1ZVwiIGluIGNlbGwpIHtcbiAgICAgICAgICB2YWwgPSBTdHJpbmcoY2VsbC52YWx1ZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdmFsID0gU3RyaW5nKGNlbGwgPz8gXCJcIik7XG4gICAgICAgIH1cblxuICAgICAgICBhbGxMYWJlbHNTZXQuYWRkKGxhYmVsKTtcbiAgICAgICAgcm93TWFwW2xhYmVsXSA9IHZhbDtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvLyAzKSAqKkZpbHRlciBvdXQqKiBhbnkgc3BlbGxcdTIwMTB0YWJsZSBjb2x1bW5zXG4gIGNvbnN0IGFsbExhYmVscyA9IEFycmF5LmZyb20oYWxsTGFiZWxzU2V0KS5maWx0ZXIobGJsID0+XG4gICAgIS9DYW50cmlwcyBLbm93bnxTcGVsbHMgS25vd258XFxkKyhzdHxuZHxyZHx0aCkvLnRlc3QobGJsKVxuICApO1xuXG4gIC8vIDQpIEJ1aWxkIGZpbmFsIGhlYWRlciAmIHJvd3NcbiAgY29uc3QgbWVyZ2VkTGFiZWxzID0gW1wiTGV2ZWxcIiwgXCJQcm9maWNpZW5jeSBCb251c1wiLCBcIkNsYXNzIEZlYXR1cmVzXCIsIC4uLmFsbExhYmVsc107XG4gIGNvbnN0IG1lcmdlZFJvd3M6IHN0cmluZ1tdW10gPSBbXTtcblxuICBmb3IgKGxldCBsdmwgPSAxOyBsdmwgPD0gbWF4TGV2ZWw7IGx2bCsrKSB7XG4gICAgY29uc3QgZmVhdHVyZUxpc3QgPSAoZmVhdHVyZXNCeUxldmVsW2x2bF0gPz8gW10pLm1hcChmb3JtYXRGZWF0dXJlTGluayk7XG4gICAgY29uc3Qgcm93TWFwID0gcm93TWFwc1tsdmxdID8/IHt9O1xuXG4gICAgbWVyZ2VkUm93cy5wdXNoKFtcbiAgICAgIGx2bC50b1N0cmluZygpLFxuICAgICAgUFJPRl9CT05VU19CWV9MRVZFTFtsdmwgLSAxXSB8fCBcIlwiLFxuICAgICAgZmVhdHVyZUxpc3Quam9pbihcIiwgXCIpLnJlcGxhY2UoL1xcfC9nLCBcIiYjMTI0O1wiKSxcbiAgICAgIC4uLmFsbExhYmVscy5tYXAobGFiZWwgPT4gcm93TWFwW2xhYmVsXSA/PyBcIlwiKVxuICAgIF0pO1xuICB9XG5cbiAgLy8gNSkgUmVuZGVyIHRoZSBmZWF0dXJlc1x1MjAxMG9ubHkgdGFibGVcbmxpbmVzLnB1c2goYFxcbj4gWyFleGFtcGxlXS0gQ2xhc3MgUHJvZ3Jlc3Npb24gVGFibGVgKTtcbmxpbmVzLnB1c2goXG4gIHJlbmRlck1hcmtkb3duVGFibGUoe1xuICAgIHR5cGU6ICAgICAgXCJ0YWJsZVwiLFxuICAgIGNhcHRpb246ICAgXCJcIixcbiAgICBjb2xMYWJlbHM6IG1lcmdlZExhYmVscyxcbiAgICByb3dzOiAgICAgIG1lcmdlZFJvd3MsXG4gIH0pKTtcbn1cblxuLy8gXHUyNTAwXHUyNTAwXHUyNTAwIFNwZWxsIFByb2dyZXNzaW9uIFx1MjUwMFx1MjUwMFx1MjUwMFxuLy8gMSkgZmluZCB0aGUgdHdvIGdyb3Vwc1xuY29uc3QgY3NHcm91cCA9IHByb2dHcm91cHMuZmluZCgoZzogYW55KSA9PlxuICBBcnJheS5pc0FycmF5KGcuY29sTGFiZWxzKSAmJlxuICBnLmNvbExhYmVscy5zb21lKChsYmw6IGFueSkgPT4gL0NhbnRyaXBzIEtub3dufFNwZWxscyBLbm93bi8udGVzdChTdHJpbmcobGJsKSkpXG4pO1xuY29uc3Qgc2xvdEdyb3VwID0gcHJvZ0dyb3Vwcy5maW5kKChnOiBhbnkpID0+XG4gIEFycmF5LmlzQXJyYXkoZy5jb2xMYWJlbHMpICYmXG4gIGcudGl0bGUgPT09IFwiU3BlbGwgU2xvdHMgcGVyIFNwZWxsIExldmVsXCJcbik7XG5cbmlmIChjc0dyb3VwICYmIHNsb3RHcm91cCkge1xuICAvLyAyKSByYXcgbGFiZWxzXG4gIGNvbnN0IGNzTGFiZWxzICAgPSAoY3NHcm91cC5jb2xMYWJlbHMgYXMgc3RyaW5nW10pLm1hcChsID0+IHJlcGxhY2U1ZVRhZ3MobCkpO1xuICBjb25zdCBzbG90TGFiZWxzID0gKHNsb3RHcm91cC5jb2xMYWJlbHMgYXMgc3RyaW5nW10pLm1hcChsID0+IHJlcGxhY2U1ZVRhZ3MobCkpO1xuXG4gIC8vIDMpIHJhdyByb3dzXG4gIGNvbnN0IGNzUm93cyAgID0gKGNzR3JvdXAucm93cyAgICAgIGFzIGFueVtdW10pICAgICAgICAgICAgICB8fCBbXTtcbiAgY29uc3Qgc2xvdFJvd3MgPSAoc2xvdEdyb3VwLnJvd3NTcGVsbFByb2dyZXNzaW9uIGFzIGFueVtdW10pIHx8IFtdO1xuXG4gIC8vIDQpIGJ1aWxkIGhlYWRlcjogTGV2ZWwgKyBjYW50cmlwcy9zcGVsbHMgKyBlYWNoIHNsb3QgbGV2ZWxcbiAgY29uc3QgY29sTGFiZWxzID0gW1wiTGV2ZWxcIiwgLi4uY3NMYWJlbHMsIC4uLnNsb3RMYWJlbHNdO1xuXG4gIC8vIDUpIGJ1aWxkIGVhY2ggcm93IGJ5IHppcHBpbmcgY3NSb3dzW2ldICsgc2xvdFJvd3NbaV1cbiAgY29uc3Qgc3BlbGxSb3dzOiBzdHJpbmdbXVtdID0gW107XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgTWF0aC5tYXgoY3NSb3dzLmxlbmd0aCwgc2xvdFJvd3MubGVuZ3RoKTsgaSsrKSB7XG4gICAgY29uc3QgbHZsID0gU3RyaW5nKGkgKyAxKTtcbiAgICBjb25zdCBjc0NlbGxzICAgPSBjc1Jvd3NbaV0gICA/IGNzUm93c1tpXS5tYXAoU3RyaW5nKSAgIDogY3NMYWJlbHMubWFwKF8gPT4gXCJcIik7XG4gICAgY29uc3Qgc2xvdENlbGxzID0gc2xvdFJvd3NbaV0gPyBzbG90Um93c1tpXS5tYXAoU3RyaW5nKSA6IHNsb3RMYWJlbHMubWFwKF8gPT4gXCJcIik7XG4gICAgc3BlbGxSb3dzLnB1c2goW2x2bCwgLi4uY3NDZWxscywgLi4uc2xvdENlbGxzXSk7XG4gIH1cblxuICAvLyA2KSByZW5kZXIhXG4gIGxpbmVzLnB1c2goYFxcbj4gWyF0aXBdLSBTcGVsbCBQcm9ncmVzc2lvbiBUYWJsZWApO1xuICBsaW5lcy5wdXNoKFxuICAgIHJlbmRlck1hcmtkb3duVGFibGUoe1xuICAgICAgdHlwZTogICAgICBcInRhYmxlXCIsXG4gICAgICBjYXB0aW9uOiAgIFwiXCIsXG4gICAgICBjb2xMYWJlbHM6IGNvbExhYmVscyxcbiAgICAgIHJvd3M6ICAgICAgc3BlbGxSb3dzLFxuICB9KSk7XG59XG5cblxuLy8gXHUyNTAwXHUyNTAwXHUyNTAwIFN1YmNsYXNzZXMgXHUyNTAwXHUyNTAwXHUyNTAwXG5jb25zdCBzdWJzID0gQXJyYXkuaXNBcnJheShqc29uLnN1YmNsYXNzKSA/IGpzb24uc3ViY2xhc3MgOiBbXTtcbmNvbnN0IHN1YmNsYXNzRmVhdHVyZXMgPSBBcnJheS5pc0FycmF5KGpzb24uc3ViY2xhc3NGZWF0dXJlKVxuICA/IGpzb24uc3ViY2xhc3NGZWF0dXJlXG4gIDoganNvbi5sb29rdXA/LnN1YmNsYXNzRmVhdHVyZSA/PyBbXTtcblxuZm9yIChjb25zdCBzYyBvZiBzdWJzKSB7XG4gIGNvbnN0IHN1YmNsYXNzTmFtZSA9IHNjLm5hbWU7XG4gIGNvbnN0IHN1YkxpbmVzOiBzdHJpbmdbXSA9IFtdO1xuXG4gIC8vIFx1MjUwMFx1MjUwMFx1MjUwMCBIZWFkZXIgbWV0YWRhdGEgXHUyNTAwXHUyNTAwXHUyNTAwXG4gIHN1YkxpbmVzLnB1c2goYCMgJHtzdWJjbGFzc05hbWV9YCk7XG4gIHN1YkxpbmVzLnB1c2goYCoqUGFyZW50IENsYXNzOioqIFtbJHtjbGFzc05hbWV9XV1gKTtcbiAgaWYgKHNjLnNvdXJjZSkgc3ViTGluZXMucHVzaChgKipTb3VyY2U6KiogJHtzYy5zb3VyY2V9YCk7XG4gIHN1YkxpbmVzLnB1c2goYGApOyAvLyBibGFuayBsaW5lXG5cbiAgLy8gXHUyNTAwXHUyNTAwXHUyNTAwIEludHJvIGVudHJ5IChsZXZlbCAzIGZlYXR1cmUgZGVzY3JpcHRpb24pIFx1MjUwMFx1MjUwMFx1MjUwMFxuICBjb25zdCBpbnRybyA9IHN1YmNsYXNzRmVhdHVyZXMuZmluZCgoZjogYW55KSA9PlxuICAgIGYubmFtZSA9PT0gc2MubmFtZSAmJlxuICAgIGYubGV2ZWwgPT09IDMgJiZcbiAgICBmLnN1YmNsYXNzU2hvcnROYW1lID09PSBzYy5zaG9ydE5hbWUgJiZcbiAgICBmLnN1YmNsYXNzU291cmNlID09PSBzYy5zb3VyY2VcbiAgKTtcbiAgaWYgKGludHJvPy5lbnRyaWVzPy5sZW5ndGgpIHtcbiAgICBjb25zdCBpbnRyb1RleHQgPSBBcnJheS5pc0FycmF5KGludHJvLmVudHJpZXMpXG4gICAgICA/IGludHJvLmVudHJpZXMubWFwKChlOiBhbnkpID0+XG4gICAgICAgICAgdHlwZW9mIGUgPT09IFwic3RyaW5nXCIgPyByZXBsYWNlNWVUYWdzKGUpIDogZm9ybWF0RW50cnkoZSlcbiAgICAgICAgKS5qb2luKFwiXFxuXFxuXCIpXG4gICAgICA6IGZvcm1hdEVudHJ5KGludHJvLmVudHJpZXMpO1xuICAgIHN1YkxpbmVzLnB1c2goaW50cm9UZXh0LCBgYCk7XG4gIH1cblxuICAvLyBcdTI1MDBcdTI1MDBcdTI1MDAgT3B0aW9uYWxcdTIwMTBmZWF0dXJlIGJsb2NrIFx1MjUwMFx1MjUwMFx1MjUwMFxuICBjb25zdCBjb2RlID0gKE9iamVjdC5lbnRyaWVzKE9QVF9GRUFUVVJFX1RZUEVfVE9fRlVMTCkgYXMgW3N0cmluZyxzdHJpbmddW10pXG4gICAgLmZpbmQoKFssIGZ1bGxdKSA9PlxuICAgICAgZnVsbC50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKHN1YmNsYXNzTmFtZS50b0xvd2VyQ2FzZSgpKVxuICAgICk/LlswXTtcbiAgaWYgKGNvZGUpIHtcbiAgICBjb25zdCBtYXRjaGVzID0gb3B0aW9uYWxGZWF0dXJlcy5maWx0ZXIob2YgPT5cbiAgICAgIEFycmF5LmlzQXJyYXkob2YuZmVhdHVyZVR5cGUpICYmIG9mLmZlYXR1cmVUeXBlLmluY2x1ZGVzKGNvZGUpXG4gICAgKTtcbiAgICBpZiAobWF0Y2hlcy5sZW5ndGgpIHtcbiAgICAgIHN1YkxpbmVzLnB1c2goYCMjICR7c3ViY2xhc3NOYW1lfSBPcHRpb25hbCBGZWF0dXJlc2ApO1xuICAgICAgZm9yIChjb25zdCBmZWF0IG9mIG1hdGNoZXMpIHtcbiAgICAgICAgZm9yIChjb25zdCBlbnRyeSBvZiBmZWF0LmVudHJpZXMpIHtcbiAgICAgICAgICBjb25zdCB0eHQgPSB0eXBlb2YgZW50cnkgPT09IFwic3RyaW5nXCJcbiAgICAgICAgICAgID8gcmVwbGFjZTVlVGFncyhlbnRyeSlcbiAgICAgICAgICAgIDogZm9ybWF0RW50cnkoZW50cnkpO1xuICAgICAgICAgIHN1YkxpbmVzLnB1c2goYCoqJHtmZWF0Lm5hbWV9OioqICR7dHh0fWApO1xuICAgICAgICB9XG4gICAgICAgIHN1YkxpbmVzLnB1c2goYGApO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8vIFx1MjUwMFx1MjUwMFx1MjUwMCBTdWJjbGFzcyBwcm9ncmVzc2lvbiB0YWJsZSBcdTI1MDBcdTI1MDBcdTI1MDBcbiAgY29uc3QgcHJvZyA9IHNjLnN1YmNsYXNzVGFibGVHcm91cHMgPz8gW107XG4gIGlmIChwcm9nLmxlbmd0aCkge1xuICAgIGNvbnN0IGxhYmVscyA9IG5ldyBTZXQ8c3RyaW5nPigpO1xuICAgIGNvbnN0IHJvd3NNYXA6IFJlY29yZDxudW1iZXIsIFJlY29yZDxzdHJpbmcsc3RyaW5nPj4gPSB7fTtcbiAgICBmb3IgKGNvbnN0IGcgb2YgcHJvZykge1xuICAgICAgY29uc3QgY29scyA9IChnLmNvbExhYmVscyA/PyBbXSkubWFwKHJlcGxhY2U1ZVRhZ3MpO1xuICAgICAgY29uc3Qgcm93cyA9IEFycmF5LmlzQXJyYXkoZy5yb3dzKVxuICAgICAgICA/IGcucm93c1xuICAgICAgICA6IEFycmF5LmlzQXJyYXkoZy5yb3dzU3BlbGxQcm9ncmVzc2lvbilcbiAgICAgICAgICA/IGcucm93c1NwZWxsUHJvZ3Jlc3Npb25cbiAgICAgICAgICA6IFtdO1xuICAgICAgcm93cy5mb3JFYWNoKChyOiBhbnksIGk6IGFueSkgPT4ge1xuICAgICAgICBjb25zdCBsdmwgPSBpICsgMTtcbiAgICAgICAgcm93c01hcFtsdmxdID8/PSB7fTtcbiAgICAgICAgci5mb3JFYWNoKChjOiBhbnksIGo6IG51bWJlcikgPT4ge1xuICAgICAgICAgIGNvbnN0IGxhYiA9IGNvbHNbal07XG4gICAgICAgICAgaWYgKCFsYWIpIHJldHVybjtcbiAgICAgICAgICBsYWJlbHMuYWRkKGxhYik7XG4gICAgICAgICAgcm93c01hcFtsdmxdW2xhYl0gPSB0eXBlb2YgYyA9PT0gXCJvYmplY3RcIiAmJiBjICE9PSBudWxsICYmIFwidmFsdWVcIiBpbiBjXG4gICAgICAgICAgICA/IFN0cmluZyhjLnZhbHVlKVxuICAgICAgICAgICAgOiBTdHJpbmcoYyA/PyBcIlwiKTtcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9XG4gICAgY29uc3QgaGRycyA9IEFycmF5LmZyb20obGFiZWxzKTtcbiAgICBzdWJMaW5lcy5wdXNoKGAjIyBTdWJjbGFzcyBQcm9ncmVzc2lvbmApO1xuICAgIHN1YkxpbmVzLnB1c2gocmVuZGVyTWFya2Rvd25UYWJsZSh7XG4gICAgICB0eXBlOiAgICAgIFwidGFibGVcIixcbiAgICAgIGNhcHRpb246ICAgXCJcIixcbiAgICAgIGNvbExhYmVsczogW1wiTGV2ZWxcIiwgLi4uaGRyc10sXG4gICAgICByb3dzOiAgICAgIEFycmF5LmZyb20oeyBsZW5ndGg6IDIwIH0sIChfLCBpKSA9PiB7XG4gICAgICAgIGNvbnN0IGx2bCA9IGkgKyAxO1xuICAgICAgICByZXR1cm4gW1N0cmluZyhsdmwpLCAuLi5oZHJzLm1hcChoID0+IHJvd3NNYXBbbHZsXT8uW2hdID8/IFwiXCIpXTtcbiAgICAgIH0pXG4gICAgfSkpO1xuICB9XG5cbi8vIFx1MjUwMFx1MjUwMFx1MjUwMCBEZXRhaWxlZCBsZXZlbFx1MjAxMGJ5XHUyMDEwbGV2ZWwgZmVhdHVyZXMgXHUyNTAwXHUyNTAwXHUyNTAwXG5jb25zdCBmZWF0c0J5THZsOiBSZWNvcmQ8bnVtYmVyLCBhbnlbXT4gPSB7fTtcbmZvciAoY29uc3QgZiBvZiBzdWJjbGFzc0ZlYXR1cmVzKSB7XG4gIGlmIChcbiAgICBmLnN1YmNsYXNzU2hvcnROYW1lID09PSBzYy5zaG9ydE5hbWUgJiZcbiAgICBmLnN1YmNsYXNzU291cmNlID09PSBzYy5zb3VyY2UgJiZcbiAgICBmLmNsYXNzTmFtZSA9PT0gY2xhc3NOYW1lXG4gICkge1xuICAgIGNvbnN0IGx2bCA9IGYubGV2ZWwgPz8gMDtcbiAgICA7KGZlYXRzQnlMdmxbbHZsXSA/Pz0gW10pLnB1c2goZik7XG4gIH1cbn1cblxuZm9yIChjb25zdCBsdmwgb2YgT2JqZWN0LmtleXMoZmVhdHNCeUx2bCkubWFwKE51bWJlcikuc29ydCgoYSxiKT0+YS1iKSkge1xuICBzdWJMaW5lcy5wdXNoKGAtLS1gLCBgIyMgTGV2ZWwgJHtsdmx9YCk7XG5cbiAgZm9yIChjb25zdCBmIG9mIGZlYXRzQnlMdmxbbHZsXSkge1xuICBzdWJMaW5lcy5wdXNoKGAjIyMgJHtmLm5hbWV9YCk7XG5cbiAgLy8gV2FsayBlYWNoIGVudHJ5IGZvciB0aGlzIGZlYXR1cmVcbiAgZm9yIChjb25zdCBlbnQgb2YgQXJyYXkuaXNBcnJheShmLmVudHJpZXMpID8gZi5lbnRyaWVzIDogW2YuZW50cmllc10pIHtcbiAgICAvLyAxKSBQbGFpbiBwYXJhZ3JhcGggZW50cmllc1xuICAgIGlmICh0eXBlb2YgZW50ID09PSBcInN0cmluZ1wiKSB7XG4gICAgICBzdWJMaW5lcy5wdXNoKHJlcGxhY2U1ZVRhZ3MoZW50KSk7XG4gICAgICBjb250aW51ZTtcbiAgICB9XG5cbiAgICAvLyAyKSBJZiBpdCdzIHRoZSBcIk1hbmV1dmVyc1wiIGVudHJpZXNcdTIwMTBibG9jaywgaW5qZWN0IHlvdXIgbGlzdCBoZXJlXG4gICAgaWYgKGVudC50eXBlID09PSBcImVudHJpZXNcIiAmJiAvXk1hbmV1dmVycyQvaS50ZXN0KGVudC5uYW1lKSkge1xuICAgICAgLy8gZmlyc3QgcHJpbnQgdGhlIHN1Ylx1MjAxMGhlYWRpbmcgYW5kIGFueSB0ZXh0IGl0IGhhZFxuICAgICAgc3ViTGluZXMucHVzaChgIyMjIyMgJHtlbnQubmFtZX1gKTtcbiAgICAgIGZvciAoY29uc3QgdHh0IG9mIEFycmF5LmlzQXJyYXkoZW50LmVudHJpZXMpID8gZW50LmVudHJpZXMgOiBbZW50LmVudHJpZXNdKSB7XG4gICAgICAgIHN1YkxpbmVzLnB1c2godHlwZW9mIHR4dCA9PT0gXCJzdHJpbmdcIlxuICAgICAgICAgID8gcmVwbGFjZTVlVGFncyh0eHQpXG4gICAgICAgICAgOiBmb3JtYXRFbnRyeSh0eHQpKTtcbiAgICAgIH1cblxuICAgICAgLy8gbm93IGluamVjdCB0aGUgZnVsbCBtYW5ldXZlciBkZWZpbml0aW9ucyBmb3IgdGhpcyBzdWJjbGFzc1xuICAgICAgY29uc3QgY29kZSA9IChPYmplY3QuZW50cmllcyhPUFRfRkVBVFVSRV9UWVBFX1RPX0ZVTEwpIGFzIFtzdHJpbmcsc3RyaW5nXVtdKVxuICAgICAgICAuZmluZCgoWywgZnVsbF0pID0+XG4gICAgICAgICAgZnVsbC50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKHN1YmNsYXNzTmFtZS50b0xvd2VyQ2FzZSgpKVxuICAgICAgICApPy5bMF07XG4gICAgICBpZiAoY29kZSkge1xuICAgICAgICBjb25zdCBtYXRjaGVzID0gb3B0aW9uYWxGZWF0dXJlcy5maWx0ZXIob2YgPT5cbiAgICAgICAgICBBcnJheS5pc0FycmF5KG9mLmZlYXR1cmVUeXBlKSAmJiBvZi5mZWF0dXJlVHlwZS5pbmNsdWRlcyhjb2RlKVxuICAgICAgICApO1xuICAgICAgICBmb3IgKGNvbnN0IGZlYXREZWYgb2YgbWF0Y2hlcykge1xuICAgICAgICAgIGZvciAoY29uc3Qgc3ViIG9mIGZlYXREZWYuZW50cmllcykge1xuICAgICAgICAgICAgY29uc3QgbGluZSA9IHR5cGVvZiBzdWIgPT09IFwic3RyaW5nXCJcbiAgICAgICAgICAgICAgPyByZXBsYWNlNWVUYWdzKHN1YilcbiAgICAgICAgICAgICAgOiBmb3JtYXRFbnRyeShzdWIpO1xuICAgICAgICAgICAgc3ViTGluZXMucHVzaChgKioke2ZlYXREZWYubmFtZX06KiogJHtsaW5lfWApO1xuICAgICAgICAgIH1cbiAgICAgICAgICBzdWJMaW5lcy5wdXNoKFwiXCIpOyAvLyBzcGFjZXJcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgY29udGludWU7XG4gICAgfVxuXG4gICAgLy8gMykgQW55IG90aGVyIG5lc3RlZCBcImVudHJpZXNcIiBibG9ja3NcbiAgICBpZiAoZW50LnR5cGUgPT09IFwiZW50cmllc1wiICYmIGVudC5uYW1lKSB7XG4gICAgICBzdWJMaW5lcy5wdXNoKGAjIyMjIyAke2VudC5uYW1lfWApO1xuICAgICAgZm9yIChjb25zdCBlMiBvZiBBcnJheS5pc0FycmF5KGVudC5lbnRyaWVzKSA/IGVudC5lbnRyaWVzIDogW2VudC5lbnRyaWVzXSkge1xuICAgICAgICBzdWJMaW5lcy5wdXNoKGZvcm1hdEVudHJ5KGUyKSk7XG4gICAgICB9XG4gICAgICBjb250aW51ZTtcbiAgICB9XG5cbiAgICAvLyA0KSBJbnNldHNcbiAgICBpZiAoZW50LnR5cGUgPT09IFwiaW5zZXRcIiAmJiBlbnQubmFtZSkge1xuICAgICAgY29uc3QgaW5uZXIgPSBBcnJheS5pc0FycmF5KGVudC5lbnRyaWVzKSA/IGVudC5lbnRyaWVzIDogW2VudC5lbnRyaWVzXTtcbiAgICAgIHN1YkxpbmVzLnB1c2goYD4gKioke2VudC5uYW1lfSoqYCk7XG4gICAgICBpbm5lci5mb3JFYWNoKChlMjogYW55KSA9PiBzdWJMaW5lcy5wdXNoKGA+ICR7Zm9ybWF0RW50cnkoZTIpfWApKTtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cblxuICAgIC8vIDUpIEZhbGxiYWNrXG4gICAgY29uc3QgZmIgPSBmb3JtYXRFbnRyeShlbnQpO1xuICAgIGlmIChmYikgc3ViTGluZXMucHVzaChmYik7XG4gIH1cbiAgfVxufVxuXG5cbiAgLy8gXHUyNTAwXHUyNTAwXHUyNTAwIENsZWFuIHVwICYgcHVzaCBcdTI1MDBcdTI1MDBcdTI1MDBcbiAgY29uc3Qgc3ViY2xhc3NDb250ZW50ID0gc3ViTGluZXNcbiAgICAuam9pbihcIlxcblxcblwiKVxuICAgIC5yZXBsYWNlKC9cXG57Myx9L2csIFwiXFxuXFxuXCIpO1xuICBzdWJjbGFzc0ZpbGVzLnB1c2goe1xuICAgIHBhdGg6IGBDbGFzc2VzLyR7Y2xhc3NOYW1lfS9TdWJjbGFzc2VzLyR7c3ViY2xhc3NOYW1lfS5tZGAsXG4gICAgY29udGVudDogc3ViY2xhc3NDb250ZW50XG4gIH0pO1xufVxuXG5cblxuLy8gXHUyNTAwXHUyNTAwXHUyNTAwIFN1YmNsYXNzZXMgU3VtbWFyeSBcdTI1MDBcdTI1MDBcdTI1MDBcbmlmIChzdWJzLmxlbmd0aCkge1xuICBjb25zdCBsaW5rcyA9IHN1YnMubWFwKChzYzogYW55KSA9PlxuICAgIGBbW1N1YmNsYXNzZXMvJHtzYy5uYW1lLnJlcGxhY2UoL1tcXFxcL10vZywgXCItXCIpfXwke3NjLm5hbWV9XV1gXG4gICk7XG4gIGxpbmVzLnB1c2goYFxcbioqU3ViY2xhc3NlczoqKiAke2xpbmtzLmpvaW4oXCIsIFwiKX1gKTtcbn1cblxuXG4gIC8vIEdldCBmdWxsIGNsYXNzIGZlYXR1cmUgZGVmaW5pdGlvbnNcbmNvbnN0IGFsbEZlYXR1cmVzID0gQXJyYXkuaXNBcnJheShqc29uLmNsYXNzRmVhdHVyZSkgPyBqc29uLmNsYXNzRmVhdHVyZSA6IGpzb24ubG9va3VwPy5jbGFzc0ZlYXR1cmUgPz8gW107XG5jb25zdCBmZWF0dXJlc0J5TGV2ZWw6IFJlY29yZDxudW1iZXIsIGFueVtdPiA9IHt9O1xuXG5mb3IgKGNvbnN0IGVudHJ5IG9mIGFsbEZlYXR1cmVzKSB7XG4gIGlmIChlbnRyeS5jbGFzc05hbWUgIT09IGNsYXNzTmFtZSkgY29udGludWU7XG4gIGNvbnN0IGx2bCA9IGVudHJ5LmxldmVsID8/IDA7XG4gIGlmICghZmVhdHVyZXNCeUxldmVsW2x2bF0pIGZlYXR1cmVzQnlMZXZlbFtsdmxdID0gW107XG4gIGZlYXR1cmVzQnlMZXZlbFtsdmxdLnB1c2goZW50cnkpO1xufVxuXG5cbi8vIFx1MjUwMFx1MjUwMFx1MjUwMCBMZXZlbCBGZWF0dXJlcyBcdTI1MDBcdTI1MDBcdTI1MDBcbmxpbmVzLnB1c2goYGApO1xubGluZXMucHVzaChgLS0tYCk7XG5saW5lcy5wdXNoKGAjIyBMZXZlbCBGZWF0dXJlc2ApO1xuXG5jb25zdCBsZXZlbHMgPSBPYmplY3RcbiAgLmtleXMoZmVhdHVyZXNCeUxldmVsKVxuICAubWFwKG4gPT4gK24pXG4gIC5zb3J0KChhLCBiKSA9PiBhIC0gYik7XG5cbmZvciAoY29uc3QgbHZsIG9mIGxldmVscykge1xuICBsaW5lcy5wdXNoKGAjIyMgTGV2ZWwgJHtsdmx9YCk7XG5cbiAgZm9yIChjb25zdCBmZWF0IG9mIGZlYXR1cmVzQnlMZXZlbFtsdmxdKSB7XG4gICAgLy8gRmVhdHVyZSBoZWFkZXJcbiAgICBsaW5lcy5wdXNoKGAjIyMjICR7ZmVhdC5uYW1lfWApO1xuXG4gICAgLy8gRW5zdXJlIGVudHJpZXMgaXMgYWx3YXlzIGFuIGFycmF5XG4gICAgY29uc3QgZW50cmllcyA9IEFycmF5LmlzQXJyYXkoZmVhdC5lbnRyaWVzKVxuICAgICAgPyBmZWF0LmVudHJpZXNcbiAgICAgIDogW2ZlYXQuZW50cmllc107XG5cbiAgICBmb3IgKGNvbnN0IGVudCBvZiBlbnRyaWVzKSB7XG4gICAgICAvLyAxKSBQbGFpbi10ZXh0IHBhcmFncmFwaFxuICAgICAgICBpZiAodHlwZW9mIGVudCA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgIGNvbnN0IHR4dCA9IGZvcm1hdEVudHJ5KGVudCkudHJpbSgpO1xuICAgICAgICAgIC8vIHNraXAgYW55IHB1cmUtYnJhY2UgbGluZXNcbiAgICAgICAgICBpZiAodHh0ID09PSBcIntcIiB8fCB0eHQgPT09IFwifVwiKSBjb250aW51ZTtcbiAgICAgICAgICBsaW5lcy5wdXNoKHR4dCk7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoZW50LnR5cGUgPT09IFwibGlzdFwiICYmIEFycmF5LmlzQXJyYXkoZW50Lml0ZW1zKSkge1xuICAgIGZvciAoY29uc3QgaXRlbSBvZiBlbnQuaXRlbXMpIHtcbiAgICAgIGxpbmVzLnB1c2goYC0gJHtyZXBsYWNlNWVUYWdzKGl0ZW0pfWApO1xuICAgIH1cbiAgICBjb250aW51ZTtcbiAgfVxuICAgICAgLy8gXHUyNTAwXHUyNTAwXHUyNTAwIGluc2lkZSB5b3VyIGZvciAoY29uc3QgZW50IG9mIGVudHJpZXMpIGxvb3AgXHUyNTAwXHUyNTAwXHUyNTAwXG4gICAgICBpZiAoZW50LnR5cGUgPT09IFwib3B0aW9uc1wiKSB7XG4gIGlmIChlbnQuY291bnQpIHtcbiAgICBsaW5lcy5wdXNoKFwiXCIpO1xuICAgIGxpbmVzLnB1c2goYCoqQ2hvb3NlICR7ZW50LmNvdW50fSBvZiB0aGUgZm9sbG93aW5nIG9wdGlvbnM6KipgKTtcbiAgICBsaW5lcy5wdXNoKFwiXCIpO1xuICB9XG5cbiAgZm9yIChjb25zdCBvcHRSZWYgb2YgQXJyYXkuaXNBcnJheShlbnQuZW50cmllcykgPyBlbnQuZW50cmllcyA6IFtlbnQuZW50cmllc10pIHtcbiAgICBpZiAob3B0UmVmLnR5cGUgPT09IFwicmVmT3B0aW9uYWxmZWF0dXJlXCIpIHtcbiAgICAgIGNvbnN0IFtvcHROYW1lLCBvcHRTcmNdID0gb3B0UmVmLm9wdGlvbmFsZmVhdHVyZS5zcGxpdChcInxcIik7XG4gICAgICBjb25zdCBmZWF0RGVmID0gb3B0aW9uYWxGZWF0dXJlcy5maW5kKFxuICAgICAgICBmID0+IGYubmFtZSA9PT0gb3B0TmFtZSAmJiAoIW9wdFNyYyB8fCBmLnNvdXJjZSA9PT0gb3B0U3JjKVxuICAgICAgKTtcblxuICAgICAgaWYgKGZlYXREZWYpIHtcbiAgICAgICAgLy8gbG9vcCB0aHJvdWdoIGVhY2ggbGluZSBpbiB0aGUgZmVhdHVyZVx1MjAxOXMgZW50cmllc1tdXG4gICAgICAgIGZlYXREZWYuZW50cmllcy5mb3JFYWNoKChzdWJFbnRyeTogYW55LCBpZHg6IGFueSkgPT4ge1xuICAgICAgICAgIC8vIHJlbmRlciB0ZXh0XG4gICAgICAgICAgY29uc3QgdGV4dCA9IHR5cGVvZiBzdWJFbnRyeSA9PT0gXCJzdHJpbmdcIlxuICAgICAgICAgICAgPyByZXBsYWNlNWVUYWdzKHN1YkVudHJ5KVxuICAgICAgICAgICAgOiBmb3JtYXRFbnRyeShzdWJFbnRyeSk7XG5cbiAgICAgICAgICBpZiAoaWR4ID09PSAwKSB7XG4gICAgICAgICAgICAvLyBmaXJzdCBsaW5lOiBib2xkZWQgbmFtZSArIGRlc2NyaXB0aW9uXG4gICAgICAgICAgICBsaW5lcy5wdXNoKGAtICoqJHtmZWF0RGVmLm5hbWV9OioqICR7dGV4dH1gKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gc3Vic2VxdWVudCBsaW5lczogbmVzdGVkIGJ1bGxldFxuICAgICAgICAgICAgbGluZXMucHVzaChgICAtICR7dGV4dH1gKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICBsaW5lcy5wdXNoKFwiXCIpOyAvLyBibGFuayBsaW5lIGFmdGVyIGVhY2ggZmVhdHVyZSBibG9ja1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gZmFsbGJhY2sgaWYgbm90IGZvdW5kXG4gICAgICAgIGxpbmVzLnB1c2goYCoqJHtvcHROYW1lfToqKmApO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICAvLyBub25cdTIwMTByZWZPcHRpb25hbGZlYXR1cmUgZmFsbGJhY2tcbiAgICAgIGNvbnN0IHR4dCA9IGZvcm1hdEVudHJ5KG9wdFJlZik7XG4gICAgICBpZiAodHh0KSBsaW5lcy5wdXNoKGAtICR7dHh0fWApO1xuICAgIH1cbiAgfVxuXG4gIGNvbnRpbnVlO1xufVxuXG5cbiAgICAgIC8vIDMpIFN0YW5kYWxvbmUgcmVmT3B0aW9uYWxmZWF0dXJlXG4gICAgICBpZiAoZW50LnR5cGUgPT09IFwicmVmT3B0aW9uYWxmZWF0dXJlXCIpIHtcbiAgICAgICAgY29uc3QgW25hbWVdID0gZW50Lm9wdGlvbmFsZmVhdHVyZS5zcGxpdChcInxcIik7XG4gICAgICAgIGxpbmVzLnB1c2goYC0gW1ske25hbWV9fCR7bmFtZX1dXWApO1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgLy8gNCkgTmVzdGVkIFx1MjAxQ2VudHJpZXNcdTIwMUQgYmxvY2sgd2l0aCBpdHMgb3duIGhlYWRpbmdcbiAgICAgIGlmIChlbnQudHlwZSA9PT0gXCJlbnRyaWVzXCIgJiYgZW50Lm5hbWUpIHtcbiAgICAgICAgbGluZXMucHVzaChgIyMjIyMgJHtlbnQubmFtZX1gKTtcbiAgICAgICAgY29uc3QgaW5uZXIgPSBBcnJheS5pc0FycmF5KGVudC5lbnRyaWVzKSA/IGVudC5lbnRyaWVzIDogW2VudC5lbnRyaWVzXTtcbiAgICAgICAgZm9yIChjb25zdCBlMiBvZiBpbm5lcikge1xuICAgICAgICAgIGxpbmVzLnB1c2goZm9ybWF0RW50cnkoZTIpKTtcbiAgICAgICAgfVxuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgLy8gNSkgRmFsbGJhY2sgZm9yIGFueSBvdGhlciBvYmplY3Qgc2hhcGVcbiAgICAgIGNvbnN0IGZhbGxiYWNrID0gZm9ybWF0RW50cnkoZW50KTtcbiAgICAgIGlmIChmYWxsYmFjaykgbGluZXMucHVzaChmYWxsYmFjayk7XG4gICAgfVxuXG4gICAgLy8gQmxhbmsgbGluZSBhZnRlciBlYWNoIGZlYXR1cmVcbiAgICBsaW5lcy5wdXNoKGBgKTtcbiAgfSBcblxuICAvLyBEaXZpZGVyIGJldHdlZW4gbGV2ZWxzXG4gIGxpbmVzLnB1c2goYC0tLWApO1xufVxuXG5cblxuICAvLyBzdGl0Y2gsIHJlcGxhY2UgdGFncywgcmV0dXJuXG4gIGxldCBjb250ZW50ID0gYC0tLVxcbiR7eWFtbH1cXG4tLS1cXG5cXG4ke2xpbmVzLmpvaW4oXCJcXG5cIil9YDtcbiAgLy8gY29tbWVudCB0aGlzIG91dCB3aGlsZSBkZWJ1Z2dpbmc6XG4gIGNvbnRlbnQgPSByZXBsYWNlNWVUYWdzKGNvbnRlbnQpO1xuXG4gIGNvbnRlbnQgPSBjb250ZW50XG4gIC5yZXBsYWNlKC9cXG57Myx9L2csICdcXG5cXG4nKSAgIC8vIG5vIG1vcmUgdGhhbiAyIG5ld2xpbmVzIGluIGEgcm93XG4gIC5yZXBsYWNlKC9cXG4gK1xcbi9nLCAnXFxuXFxuJyk7ICAvLyB0cmltIGJsYW5rIGxpbmVzIHdpdGggdHJhaWxpbmcgc3BhY2VzXG5cbiAgcmV0dXJuIFtcbiAgICB7XG4gICAgICBwYXRoOiBgQ2xhc3Nlcy8ke2NsYXNzTmFtZX0vJHtjbGFzc05hbWV9Lm1kYCxcbiAgICAgIGNvbnRlbnQsXG4gICAgfSxcbiAgICAuLi5zdWJjbGFzc0ZpbGVzLFxuICBdO1xuICBcbn1cbiIsICIvLyBzcmMvcGFyc2Vycy9ydWxlcy50c1xuaW1wb3J0IHR5cGUgeyBQYXJzZWRNYXJrZG93bkZpbGUgfSBmcm9tIFwiLi4vLi4vdHlwZXNcIjtcbmltcG9ydCB7IHJlcGxhY2U1ZVRhZ3MgfSBmcm9tIFwiLi9oZWxwZXJzL3RhZ1JlcGxhY2VyXCI7XG5cbi8qKlxuICogUGFyc2UgYWN0aW9ucy5qc29uIGludG8gYSBzaW5nbGUgTWFya2Rvd24gbm90ZSB3aXRoICMjIGhlYWRlcnMgZm9yIGVhY2ggYWN0aW9uLFxuICogaGFuZGxpbmcgbmVzdGVkIGVudHJpZXMsIGluc2V0cywgbGlzdHMsIHRhYmxlcywgYW5kIGFkZGluZyBzZXBhcmF0b3JzLlxuICovXG5leHBvcnQgZnVuY3Rpb24gcGFyc2VBY3Rpb25zRmlsZShqc29uOiBhbnksIGVkaXRpb25JZDogc3RyaW5nKTogUGFyc2VkTWFya2Rvd25GaWxlW10ge1xuICBpZiAoIUFycmF5LmlzQXJyYXkoanNvbi5hY3Rpb24pKSByZXR1cm4gW107XG5cbiAgY29uc3QgbGluZXM6IHN0cmluZ1tdID0gW107XG4gIGZvciAoY29uc3QgYWN0aW9uIG9mIGpzb24uYWN0aW9uKSB7XG4gICAgbGluZXMucHVzaChgIyMgJHthY3Rpb24ubmFtZX1gKTtcbiAgICBjb25zdCBlbnRyaWVzID0gQXJyYXkuaXNBcnJheShhY3Rpb24uZW50cmllcykgPyBhY3Rpb24uZW50cmllcyA6IFthY3Rpb24uZW50cmllc107XG4gICAgZm9yIChjb25zdCBlbnRyeSBvZiBlbnRyaWVzKSB7XG4gICAgICBpZiAoIWVudHJ5KSBjb250aW51ZTtcbiAgICAgIGlmICh0eXBlb2YgZW50cnkgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgY29uc3QgcGFyYXMgPSBlbnRyeS5zcGxpdCgvXFxuezIsfS8pO1xuICAgICAgICBmb3IgKGNvbnN0IHBhcmEgb2YgcGFyYXMpIHtcbiAgICAgICAgICBjb25zdCB0ID0gcGFyYS50cmltKCk7XG4gICAgICAgICAgaWYgKHQpIHtcbiAgICAgICAgICAgIGxpbmVzLnB1c2gocmVwbGFjZTVlVGFncyh0KSk7XG4gICAgICAgICAgICBsaW5lcy5wdXNoKFwiXCIpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChlbnRyeS50eXBlID09PSBcImxpc3RcIiAmJiBBcnJheS5pc0FycmF5KGVudHJ5Lml0ZW1zKSkge1xuICAgICAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgZW50cnkuaXRlbXMpIHtcbiAgICAgICAgICBsaW5lcy5wdXNoKGAtICR7cmVwbGFjZTVlVGFncyhpdGVtKX1gKTtcbiAgICAgICAgfVxuICAgICAgICBsaW5lcy5wdXNoKFwiXCIpO1xuICAgICAgfSBlbHNlIGlmICgoZW50cnkudHlwZSA9PT0gXCJlbnRyaWVzXCIgfHwgZW50cnkudHlwZSA9PT0gXCJpbnNldFwiKSAmJiBBcnJheS5pc0FycmF5KGVudHJ5LmVudHJpZXMpKSB7XG4gICAgICAgIGxpbmVzLnB1c2goYCMjIyAke2VudHJ5Lm5hbWV9YCk7XG4gICAgICAgIGZvciAoY29uc3Qgc3ViIG9mIGVudHJ5LmVudHJpZXMpIHtcbiAgICAgICAgICBpZiAodHlwZW9mIHN1YiA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgY29uc3QgcHMgPSBzdWIuc3BsaXQoL1xcbnsyLH0vKTtcbiAgICAgICAgICAgIGZvciAoY29uc3QgcCBvZiBwcykge1xuICAgICAgICAgICAgICBjb25zdCB0dCA9IHAudHJpbSgpO1xuICAgICAgICAgICAgICBpZiAodHQpIHtcbiAgICAgICAgICAgICAgICBsaW5lcy5wdXNoKHJlcGxhY2U1ZVRhZ3ModHQpKTtcbiAgICAgICAgICAgICAgICBsaW5lcy5wdXNoKFwiXCIpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBlbHNlIGlmIChzdWIudHlwZSA9PT0gXCJsaXN0XCIgJiYgQXJyYXkuaXNBcnJheShzdWIuaXRlbXMpKSB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGxpIG9mIHN1Yi5pdGVtcykge1xuICAgICAgICAgICAgICBsaW5lcy5wdXNoKGAtICR7cmVwbGFjZTVlVGFncyhsaSl9YCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsaW5lcy5wdXNoKFwiXCIpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb25zdCB0eHQgPSBBcnJheS5pc0FycmF5KHN1YilcbiAgICAgICAgICAgICAgPyBzdWIuam9pbihcIiBcIilcbiAgICAgICAgICAgICAgOiB0eXBlb2Ygc3ViID09PSBcIm9iamVjdFwiXG4gICAgICAgICAgICAgICAgPyBKU09OLnN0cmluZ2lmeShzdWIpXG4gICAgICAgICAgICAgICAgOiBTdHJpbmcoc3ViKTtcbiAgICAgICAgICAgIGxpbmVzLnB1c2gocmVwbGFjZTVlVGFncyh0eHQpKTtcbiAgICAgICAgICAgIGxpbmVzLnB1c2goXCJcIik7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKGVudHJ5LnR5cGUgPT09IFwidGFibGVcIiAmJiBBcnJheS5pc0FycmF5KGVudHJ5LnJvd3MpKSB7XG4gICAgICAgIGNvbnN0IGhlYWRlcnMgPSBlbnRyeS5jb2xMYWJlbHMgfHwgW107XG4gICAgICAgIGxpbmVzLnB1c2goYHwgJHtoZWFkZXJzLmpvaW4oXCIgfCBcIil9IHxgKTtcbiAgICAgICAgbGluZXMucHVzaChgfCAke2hlYWRlcnMubWFwKCgpID0+IFwiLS0tXCIpLmpvaW4oXCIgfCBcIil9IHxgKTtcbiAgICAgICAgZm9yIChjb25zdCByb3cgb2YgZW50cnkucm93cykge1xuICAgICAgICAgIGxpbmVzLnB1c2goYHwgJHtyb3cuam9pbihcIiB8IFwiKX0gfGApO1xuICAgICAgICB9XG4gICAgICAgIGxpbmVzLnB1c2goXCJcIik7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zdCB0eHQgPSBBcnJheS5pc0FycmF5KGVudHJ5KVxuICAgICAgICAgID8gZW50cnkuam9pbihcIiBcIilcbiAgICAgICAgICA6IHR5cGVvZiBlbnRyeSA9PT0gXCJvYmplY3RcIlxuICAgICAgICAgICAgPyBKU09OLnN0cmluZ2lmeShlbnRyeSlcbiAgICAgICAgICAgIDogU3RyaW5nKGVudHJ5KTtcbiAgICAgICAgbGluZXMucHVzaChyZXBsYWNlNWVUYWdzKHR4dCkpO1xuICAgICAgICBsaW5lcy5wdXNoKFwiXCIpO1xuICAgICAgfVxuICAgIH1cbiAgICAvLyBTZXBhcmF0b3IgYmV0d2VlbiBhY3Rpb25zXG4gICAgbGluZXMucHVzaChcIi0tLVwiKTtcbiAgfVxuICBjb25zdCBjbGVhbmVkID0gbGluZXMucmVkdWNlPHN0cmluZ1tdPigoYWNjLCBjdXJyKSA9PiB7XG4gICAgaWYgKGN1cnIgPT09IFwiXCIgJiYgYWNjLmxlbmd0aCAmJiBhY2NbYWNjLmxlbmd0aCAtIDFdID09PSBcIlwiKSByZXR1cm4gYWNjO1xuICAgIHJldHVybiBhY2MuY29uY2F0KGN1cnIpO1xuICB9LCBbXSk7XG4gIHJldHVybiBbXG4gICAge1xuICAgICAgcGF0aDogXCJSdWxlcyBhbmQgUmVmZXJlbmNlL0FjdGlvbnMubWRcIixcbiAgICAgIGNvbnRlbnQ6IGNsZWFuZWQuam9pbihcIlxcblwiKS50cmltKCkgKyBcIlxcblwiLFxuICAgIH0sXG4gIF07XG59XG5cbi8qKlxuICogUGFyc2UgY29tYmluZWQgY29uZGl0aW9uc2Rpc2Vhc2VzLmpzb24gaW50byB0d28gTWFya2Rvd24gbm90ZXM6IENvbmRpdGlvbnMubWQgYW5kIERpc2Vhc2VzLm1kXG4gKiBhZGRpbmcgc2VwYXJhdG9ycyBiZXR3ZWVuIGVudHJpZXMuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBwYXJzZUNvbmRpdGlvbnNEaXNlYXNlc0ZpbGUoanNvbjogYW55LCBlZGl0aW9uSWQ6IHN0cmluZyk6IFBhcnNlZE1hcmtkb3duRmlsZVtdIHtcbiAgY29uc3Qgb3V0cHV0czogUGFyc2VkTWFya2Rvd25GaWxlW10gPSBbXTtcbiAgY29uc3QgcHJvY2Vzc0l0ZW1zID0gKGl0ZW1zOiBhbnlbXSwgb3V0UGF0aDogc3RyaW5nKSA9PiB7XG4gICAgY29uc3QgbGluZXM6IHN0cmluZ1tdID0gW107XG4gICAgZm9yIChjb25zdCBpdGVtIG9mIGl0ZW1zKSB7XG4gICAgICBsaW5lcy5wdXNoKGAjIyAke2l0ZW0ubmFtZX1gKTtcbiAgICAgIGNvbnN0IGVudHJpZXMgPSBBcnJheS5pc0FycmF5KGl0ZW0uZW50cmllcykgPyBpdGVtLmVudHJpZXMgOiBbaXRlbS5lbnRyaWVzXTtcbiAgICAgIGZvciAoY29uc3QgZW50cnkgb2YgZW50cmllcykge1xuICAgICAgICBpZiAoIWVudHJ5KSBjb250aW51ZTtcbiAgICAgICAgaWYgKHR5cGVvZiBlbnRyeSA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgIGNvbnN0IHBhcmFzID0gZW50cnkuc3BsaXQoL1xcbnsyLH0vKTtcbiAgICAgICAgICBmb3IgKGNvbnN0IHBhcmEgb2YgcGFyYXMpIHtcbiAgICAgICAgICAgIGNvbnN0IHQgPSBwYXJhLnRyaW0oKTtcbiAgICAgICAgICAgIGlmICh0KSB7XG4gICAgICAgICAgICAgIGxpbmVzLnB1c2gocmVwbGFjZTVlVGFncyh0KSk7XG4gICAgICAgICAgICAgIGxpbmVzLnB1c2goXCJcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKGVudHJ5LnR5cGUgPT09IFwibGlzdFwiICYmIEFycmF5LmlzQXJyYXkoZW50cnkuaXRlbXMpKSB7XG4gICAgICAgICAgZm9yIChjb25zdCB0eHQgb2YgZW50cnkuaXRlbXMpIHtcbiAgICAgICAgICAgIGxpbmVzLnB1c2goYC0gJHtyZXBsYWNlNWVUYWdzKHR4dCl9YCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGxpbmVzLnB1c2goXCJcIik7XG4gICAgICAgIH0gZWxzZSBpZiAoZW50cnkudHlwZSA9PT0gXCJ0YWJsZVwiICYmIEFycmF5LmlzQXJyYXkoZW50cnkucm93cykpIHtcbiAgICAgICAgICBjb25zdCBoZWFkZXJzID0gZW50cnkuY29sTGFiZWxzIHx8IFtdO1xuICAgICAgICAgIGxpbmVzLnB1c2goYHwgJHtoZWFkZXJzLmpvaW4oXCIgfCBcIil9IHxgKTtcbiAgICAgICAgICBsaW5lcy5wdXNoKGB8ICR7aGVhZGVycy5tYXAoKCkgPT4gXCItLS1cIikuam9pbihcIiB8IFwiKX0gfGApO1xuICAgICAgICAgIGZvciAoY29uc3Qgcm93IG9mIGVudHJ5LnJvd3MpIHtcbiAgICAgICAgICAgIGxpbmVzLnB1c2goYHwgJHtyb3cuam9pbihcIiB8IFwiKX0gfGApO1xuICAgICAgICAgIH1cbiAgICAgICAgICBsaW5lcy5wdXNoKFwiXCIpO1xuICAgICAgICB9IGVsc2UgaWYgKGVudHJ5LnR5cGUgPT09IFwiZW50cmllc1wiICYmIEFycmF5LmlzQXJyYXkoZW50cnkuZW50cmllcykpIHtcbiAgICAgICAgICBsaW5lcy5wdXNoKGAjIyMgJHtlbnRyeS5uYW1lfWApO1xuICAgICAgICAgIGZvciAoY29uc3Qgc3ViIG9mIGVudHJ5LmVudHJpZXMpIHtcbiAgICAgICAgICAgIGNvbnN0IHR4dCA9IHR5cGVvZiBzdWIgPT09IFwic3RyaW5nXCIgPyBzdWIgOiBTdHJpbmcoc3ViKTtcbiAgICAgICAgICAgIGxpbmVzLnB1c2gocmVwbGFjZTVlVGFncyh0eHQpKTtcbiAgICAgICAgICAgIGxpbmVzLnB1c2goXCJcIik7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNvbnN0IHR4dCA9IEFycmF5LmlzQXJyYXkoZW50cnkpID8gZW50cnkuam9pbihcIiBcIikgOiBTdHJpbmcoZW50cnkpO1xuICAgICAgICAgIGxpbmVzLnB1c2gocmVwbGFjZTVlVGFncyh0eHQpKTtcbiAgICAgICAgICBsaW5lcy5wdXNoKFwiXCIpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICAvLyBTZXBhcmF0b3IgYmV0d2VlbiBpdGVtc1xuICAgICAgbGluZXMucHVzaChcIi0tLVwiKTtcbiAgICB9XG4gICAgY29uc3QgY2xlYW5lZCA9IGxpbmVzLnJlZHVjZTxzdHJpbmdbXT4oKGFjYywgY3VycikgPT4ge1xuICAgICAgaWYgKGN1cnIgPT09IFwiXCIgJiYgYWNjLmxlbmd0aCAmJiBhY2NbYWNjLmxlbmd0aCAtIDFdID09PSBcIlwiKSByZXR1cm4gYWNjO1xuICAgICAgcmV0dXJuIGFjYy5jb25jYXQoY3Vycik7XG4gICAgfSwgW10pO1xuICAgIG91dHB1dHMucHVzaCh7IHBhdGg6IG91dFBhdGgsIGNvbnRlbnQ6IGNsZWFuZWQuam9pbihcIlxcblwiKS50cmltKCkgKyBcIlxcblwiIH0pO1xuICB9O1xuICBwcm9jZXNzSXRlbXMoanNvbi5jb25kaXRpb24gfHwgW10sIFwiUnVsZXMgYW5kIFJlZmVyZW5jZS9Db25kaXRpb25zLm1kXCIpO1xuICBwcm9jZXNzSXRlbXMoanNvbi5kaXNlYXNlIHx8IFtdLCBcIlJ1bGVzIGFuZCBSZWZlcmVuY2UvRGlzZWFzZXMubWRcIik7XG4gIHJldHVybiBvdXRwdXRzO1xufVxuXG4vKipcbiAqIFBhcnNlIHNlbnNlcy5qc29uIGludG8gYSBzaW5nbGUgTWFya2Rvd24gbm90ZSB3aXRoICMjIGhlYWRlcnMgZm9yIGVhY2ggc2Vuc2UsXG4gKiBoYW5kbGluZyBsaXN0cywgdGFibGVzLCBuZXN0ZWQgZW50cmllcy9pbnNldHMsIGFuZCBzZXBhcmF0b3JzLlxuICovXG5leHBvcnQgZnVuY3Rpb24gcGFyc2VTZW5zZXNGaWxlKGpzb246IGFueSwgZWRpdGlvbklkOiBzdHJpbmcpOiBQYXJzZWRNYXJrZG93bkZpbGVbXSB7XG4gIGNvbnN0IGl0ZW1zID0gQXJyYXkuaXNBcnJheShqc29uLnNlbnNlKSA/IGpzb24uc2Vuc2UgOiBBcnJheS5pc0FycmF5KGpzb24uc2Vuc2VzKSA/IGpzb24uc2Vuc2VzIDogW107XG4gIGlmICghaXRlbXMubGVuZ3RoKSByZXR1cm4gW107XG5cbiAgY29uc3QgbGluZXM6IHN0cmluZ1tdID0gW107XG4gIGZvciAoY29uc3Qgc2Vuc2Ugb2YgaXRlbXMpIHtcbiAgICBsaW5lcy5wdXNoKGAjIyAke3NlbnNlLm5hbWV9YCk7XG4gICAgY29uc3QgZW50cmllcyA9IEFycmF5LmlzQXJyYXkoc2Vuc2UuZW50cmllcykgPyBzZW5zZS5lbnRyaWVzIDogW3NlbnNlLmVudHJpZXNdO1xuICAgIGZvciAoY29uc3QgZW50cnkgb2YgZW50cmllcykge1xuICAgICAgaWYgKCFlbnRyeSkgY29udGludWU7XG4gICAgICBpZiAodHlwZW9mIGVudHJ5ID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgIGNvbnN0IHBhcmFzID0gZW50cnkuc3BsaXQoL1xcbnsyLH0vKTtcbiAgICAgICAgZm9yIChjb25zdCBwYXJhIG9mIHBhcmFzKSB7XG4gICAgICAgICAgY29uc3QgdCA9IHBhcmEudHJpbSgpO1xuICAgICAgICAgIGlmICh0KSB7XG4gICAgICAgICAgICBsaW5lcy5wdXNoKHJlcGxhY2U1ZVRhZ3ModCkpO1xuICAgICAgICAgICAgbGluZXMucHVzaChcIlwiKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAoZW50cnkudHlwZSA9PT0gXCJsaXN0XCIgJiYgQXJyYXkuaXNBcnJheShlbnRyeS5pdGVtcykpIHtcbiAgICAgICAgZm9yIChjb25zdCBpdGVtIG9mIGVudHJ5Lml0ZW1zKSB7XG4gICAgICAgICAgbGluZXMucHVzaChgLSAke3JlcGxhY2U1ZVRhZ3MoaXRlbSl9YCk7XG4gICAgICAgIH1cbiAgICAgICAgbGluZXMucHVzaChcIlwiKTtcbiAgICAgIH0gZWxzZSBpZiAoKGVudHJ5LnR5cGUgPT09IFwiZW50cmllc1wiIHx8IGVudHJ5LnR5cGUgPT09IFwiaW5zZXRcIikgJiYgQXJyYXkuaXNBcnJheShlbnRyeS5lbnRyaWVzKSkge1xuICAgICAgICBsaW5lcy5wdXNoKGAjIyMgJHtlbnRyeS5uYW1lfWApO1xuICAgICAgICBmb3IgKGNvbnN0IHN1YiBvZiBlbnRyeS5lbnRyaWVzKSB7XG4gICAgICAgICAgY29uc3QgdHh0ID0gdHlwZW9mIHN1YiA9PT0gXCJzdHJpbmdcIiA/IHN1YiA6IFN0cmluZyhzdWIpO1xuICAgICAgICAgIGxpbmVzLnB1c2gocmVwbGFjZTVlVGFncyh0eHQpKTtcbiAgICAgICAgICBsaW5lcy5wdXNoKFwiXCIpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKGVudHJ5LnR5cGUgPT09IFwidGFibGVcIiAmJiBBcnJheS5pc0FycmF5KGVudHJ5LnJvd3MpKSB7XG4gICAgICAgIGNvbnN0IGhlYWRlcnMgPSBlbnRyeS5jb2xMYWJlbHMgfHwgW107XG4gICAgICAgIGxpbmVzLnB1c2goYHwgJHtoZWFkZXJzLmpvaW4oXCIgfCBcIil9IHxgKTtcbiAgICAgICAgbGluZXMucHVzaChgfCAke2hlYWRlcnMubWFwKCgpID0+IFwiLS0tXCIpLmpvaW4oXCIgfCBcIil9IHxgKTtcbiAgICAgICAgZm9yIChjb25zdCByb3cgb2YgZW50cnkucm93cykge1xuICAgICAgICAgIGxpbmVzLnB1c2goYHwgJHtyb3cuam9pbihcIiB8IFwiKX0gfGApO1xuICAgICAgICB9XG4gICAgICAgIGxpbmVzLnB1c2goXCJcIik7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zdCB0eHQgPSBBcnJheS5pc0FycmF5KGVudHJ5KSA/IGVudHJ5LmpvaW4oXCIgXCIpIDogU3RyaW5nKGVudHJ5KTtcbiAgICAgICAgbGluZXMucHVzaChyZXBsYWNlNWVUYWdzKHR4dCkpO1xuICAgICAgICBsaW5lcy5wdXNoKFwiXCIpO1xuICAgICAgfVxuICAgIH1cbiAgICAvLyBTZXBhcmF0b3IgYmV0d2VlbiBzZW5zZXNcbiAgICBsaW5lcy5wdXNoKFwiLS0tXCIpO1xuICB9XG4gIGNvbnN0IGNsZWFuZWQgPSBsaW5lcy5yZWR1Y2U8c3RyaW5nW10+KChhY2MsIGN1cnIpID0+IHtcbiAgICBpZiAoY3VyciA9PT0gXCJcIiAmJiBhY2MubGVuZ3RoICYmIGFjY1thY2MubGVuZ3RoIC0gMV0gPT09IFwiXCIpIHJldHVybiBhY2M7XG4gICAgcmV0dXJuIGFjYy5jb25jYXQoY3Vycik7XG4gIH0sIFtdKTtcblxuICByZXR1cm4gW1xuICAgIHtcbiAgICAgIHBhdGg6IFwiUnVsZXMgYW5kIFJlZmVyZW5jZS9TZW5zZXMubWRcIixcbiAgICAgIGNvbnRlbnQ6IGNsZWFuZWQuam9pbihcIlxcblwiKS50cmltKCkgKyBcIlxcblwiLFxuICAgIH0sXG4gIF07XG59XG5cbi8qKlxuICogUGFyc2Ugc2tpbGxzLmpzb24gaW50byBhIHNpbmdsZSBNYXJrZG93biBub3RlIHdpdGggIyMgaGVhZGVycyBmb3IgZWFjaCBza2lsbCxcbiAqIHByZXBlbmRpbmcgYW4gYWJpbGl0eSBsaW5lLCBoYW5kbGluZyBwYXJhZ3JhcGhzLCBhbmQgc2VwYXJhdG9ycy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlU2tpbGxzRmlsZShqc29uOiBhbnksIGVkaXRpb25JZDogc3RyaW5nKTogUGFyc2VkTWFya2Rvd25GaWxlW10ge1xuICBjb25zdCBpdGVtcyA9IEFycmF5LmlzQXJyYXkoanNvbi5za2lsbClcbiAgICA/IGpzb24uc2tpbGxcbiAgICA6IEFycmF5LmlzQXJyYXkoanNvbi5za2lsbHMpXG4gICAgPyBqc29uLnNraWxsc1xuICAgIDogW107XG4gIGlmICghaXRlbXMubGVuZ3RoKSByZXR1cm4gW107XG5cbiAgY29uc3QgbGluZXM6IHN0cmluZ1tdID0gW107XG4gIGZvciAoY29uc3Qgc2tpbGwgb2YgaXRlbXMpIHtcbiAgICBsaW5lcy5wdXNoKGAjIyAke3NraWxsLm5hbWV9YCk7XG4gICAgaWYgKHNraWxsLmFiaWxpdHkpIHtcbiAgICAgIGxpbmVzLnB1c2goYCpBYmlsaXR5OiAke3NraWxsLmFiaWxpdHl9KmApO1xuICAgICAgbGluZXMucHVzaChcIlwiKTtcbiAgICB9XG4gICAgY29uc3QgZW50cmllcyA9IEFycmF5LmlzQXJyYXkoc2tpbGwuZW50cmllcykgPyBza2lsbC5lbnRyaWVzIDogW3NraWxsLmVudHJpZXNdO1xuICAgIGZvciAoY29uc3QgZW50cnkgb2YgZW50cmllcykge1xuICAgICAgaWYgKCFlbnRyeSkgY29udGludWU7XG4gICAgICBpZiAodHlwZW9mIGVudHJ5ID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgIGNvbnN0IHBhcmFzID0gZW50cnkuc3BsaXQoL1xcbnsyLH0vKTtcbiAgICAgICAgZm9yIChjb25zdCBwYXJhIG9mIHBhcmFzKSB7XG4gICAgICAgICAgY29uc3QgdCA9IHBhcmEudHJpbSgpO1xuICAgICAgICAgIGlmICh0KSB7XG4gICAgICAgICAgICBsaW5lcy5wdXNoKHJlcGxhY2U1ZVRhZ3ModCkpO1xuICAgICAgICAgICAgbGluZXMucHVzaChcIlwiKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAoZW50cnkudHlwZSA9PT0gXCJsaXN0XCIgJiYgQXJyYXkuaXNBcnJheShlbnRyeS5pdGVtcykpIHtcbiAgICAgICAgZm9yIChjb25zdCBpdGVtIG9mIGVudHJ5Lml0ZW1zKSB7XG4gICAgICAgICAgbGluZXMucHVzaChgLSAke3JlcGxhY2U1ZVRhZ3MoaXRlbSl9YCk7XG4gICAgICAgIH1cbiAgICAgICAgbGluZXMucHVzaChcIlwiKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnN0IHR4dCA9IEFycmF5LmlzQXJyYXkoZW50cnkpID8gZW50cnkuam9pbihcIiBcIikgOiBTdHJpbmcoZW50cnkpO1xuICAgICAgICBsaW5lcy5wdXNoKHJlcGxhY2U1ZVRhZ3ModHh0KSk7XG4gICAgICAgIGxpbmVzLnB1c2goXCJcIik7XG4gICAgICB9XG4gICAgfVxuICAgIC8vIFNlcGFyYXRvciBiZXR3ZWVuIHNraWxsc1xuICAgIGxpbmVzLnB1c2goXCItLS1cIik7XG4gIH1cbiAgY29uc3QgY2xlYW5lZCA9IGxpbmVzLnJlZHVjZTxzdHJpbmdbXT4oKGFjYywgY3VycikgPT4ge1xuICAgIGlmIChjdXJyID09PSBcIlwiICYmIGFjYy5sZW5ndGggJiYgYWNjW2FjYy5sZW5ndGggLSAxXSA9PT0gXCJcIikgcmV0dXJuIGFjYztcbiAgICByZXR1cm4gYWNjLmNvbmNhdChjdXJyKTtcbiAgfSwgW10pO1xuXG4gIHJldHVybiBbXG4gICAge1xuICAgICAgcGF0aDogXCJSdWxlcyBhbmQgUmVmZXJlbmNlL1NraWxscy5tZFwiLFxuICAgICAgY29udGVudDogY2xlYW5lZC5qb2luKFwiXFxuXCIpLnRyaW0oKSArIFwiXFxuXCIsXG4gICAgfSxcbiAgXTtcbn1cbiIsICJpbXBvcnQgdHlwZSB7IFBhcnNlZE1hcmtkb3duRmlsZSB9IGZyb20gXCIuLi8uLi90eXBlc1wiO1xuaW1wb3J0IHsgcmVwbGFjZTVlVGFncyB9IGZyb20gXCIuL2hlbHBlcnMvdGFnUmVwbGFjZXJcIjtcbmltcG9ydCB7IGJ1aWxkRk0sIHNlcmlhbGl6ZUZyb250bWF0dGVyLCBGRUFUU19NRVRBX0RFRlMgfSBmcm9tIFwiLi9oZWxwZXJzL2Zyb250bWF0dGVyXCI7XG5cbi8qKlxuICogUGFyc2UgZmVhdHMuanNvbiBpbnRvIG9uZSBNYXJrZG93biBmaWxlIHBlciBmZWF0IHVuZGVyIFBsYXllciBCdWlsZC9GZWF0cyxcbiAqIGluY2x1ZGluZyBmcm9udG1hdHRlciwgY2xlYW5lZCBwcmVyZXF1aXNpdGVzLCBhbmQgZm9ybWF0dGVkIGVudHJpZXMuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBwYXJzZUZlYXRzRmlsZShqc29uOiBhbnksIGVkaXRpb25JZDogc3RyaW5nKTogUGFyc2VkTWFya2Rvd25GaWxlW10ge1xuICBjb25zdCBmZWF0czogYW55W10gPSBBcnJheS5pc0FycmF5KGpzb24uZmVhdClcbiAgICA/IGpzb24uZmVhdFxuICAgIDogQXJyYXkuaXNBcnJheShqc29uLmZlYXRzKVxuICAgID8ganNvbi5mZWF0c1xuICAgIDogW107XG5cbiAgcmV0dXJuIGZlYXRzLm1hcCgoZmVhdDogYW55KSA9PiB7XG4gICAgY29uc3QgbGluZXM6IHN0cmluZ1tdID0gW107XG5cbiAgICAvLyBcdTI1MDBcdTI1MDBcdTI1MDAgRnJvbnRtYXR0ZXIgXHUyNTAwXHUyNTAwXHUyNTAwXG4gICAgY29uc3QgZm0gPSBidWlsZEZNKHsgLi4uZmVhdCwgX2VkaXRpb25JZDogZWRpdGlvbklkIH0sIEZFQVRTX01FVEFfREVGUyk7XG4gICAgbGluZXMucHVzaChcIi0tLVwiKTtcbiAgICBsaW5lcy5wdXNoKHNlcmlhbGl6ZUZyb250bWF0dGVyKGZtLCBGRUFUU19NRVRBX0RFRlMpKTtcbiAgICBsaW5lcy5wdXNoKFwiLS0tXCIsIFwiXCIpO1xuXG4gICAgLy8gXHUyNTAwXHUyNTAwXHUyNTAwIFRpdGxlIFx1MjUwMFx1MjUwMFx1MjUwMFxuICAgIGxpbmVzLnB1c2goYCMgJHtmZWF0Lm5hbWV9YCwgXCJcIik7XG5cbiAgICAvLyBcdTI1MDBcdTI1MDBcdTI1MDAgUHJlcmVxdWlzaXRlcyBcdTI1MDBcdTI1MDBcdTI1MDBcbiAgICBjb25zdCBwcmVyZXFzOiBzdHJpbmdbXSA9IFtdO1xuICAgIGlmIChBcnJheS5pc0FycmF5KGZlYXQucHJlcmVxdWlzaXRlKSkge1xuICAgICAgZmVhdC5wcmVyZXF1aXNpdGUuZm9yRWFjaCgocHI6IGFueSkgPT4ge1xuICAgICAgICBpZiAocHIubGV2ZWwpIHByZXJlcXMucHVzaChgTGV2ZWwgJHtwci5sZXZlbH1gKTtcbiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkocHIuZmVhdCkpIHtcbiAgICAgICAgICBwci5mZWF0LmZvckVhY2goKGY6IHN0cmluZykgPT4ge1xuICAgICAgICAgICAgY29uc3QgbmFtZSA9IGYuc3BsaXQoXCJ8XCIpWzBdLnJlcGxhY2UoL1xcYlxcdy9nLCBjID0+IGMudG9VcHBlckNhc2UoKSk7XG4gICAgICAgICAgICBwcmVyZXFzLnB1c2goYFByZXJlcXVpc2l0ZTogW1ske25hbWV9XV1gKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICAgIGlmIChmZWF0LnNwZWxsY2FzdGluZ1ByZXBhcmVkKSBwcmVyZXFzLnB1c2goYFByZXJlcXVpc2l0ZTogU3BlbGxjYXN0ZXJgKTtcbiAgICBpZiAoQXJyYXkuaXNBcnJheShmZWF0LnRvb2xQcm9maWNpZW5jaWVzKSkge1xuICAgICAgZmVhdC50b29sUHJvZmljaWVuY2llcy5mb3JFYWNoKCh0cDogYW55KSA9PiB7XG4gICAgICAgIE9iamVjdC5lbnRyaWVzKHRwKS5mb3JFYWNoKChba2V5XSkgPT4ge1xuICAgICAgICAgIGlmIChrZXkgPT09ICdhbnlBcnRpc2Fuc1Rvb2wnKSB7XG4gICAgICAgICAgICBwcmVyZXFzLnB1c2goYFByZXJlcXVpc2l0ZTogUHJvZmljaWVudCB3aXRoIGFuIGFydGlzYW4ncyB0b29sYCk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHByZXJlcXMucHVzaChgUHJlcmVxdWlzaXRlOiBQcm9maWNpZW50IHdpdGggJHtrZXkucmVwbGFjZSgvKFtBLVpdKS9nLCcgJDEnKS50cmltKCl9YCk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH1cbiAgICBpZiAoQXJyYXkuaXNBcnJheShmZWF0LmFybW9yUHJvZmljaWVuY2llcykpIHtcbiAgICAgIGZlYXQuYXJtb3JQcm9maWNpZW5jaWVzLmZvckVhY2goKGFybTogYW55KSA9PiB7XG4gICAgICAgIGNvbnN0IGFybVN0ciA9IHR5cGVvZiBhcm0gPT09ICdzdHJpbmcnID8gYXJtIDogSlNPTi5zdHJpbmdpZnkoYXJtKTtcbiAgICAgICAgcHJlcmVxcy5wdXNoKGBQcmVyZXF1aXNpdGU6IFByb2ZpY2llbnQgd2l0aCAke2FybVN0ci5yZXBsYWNlKC8oW0EtWl0pL2csJyAkMScpLnRyaW0oKX1gKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgICBpZiAoZmVhdC5yYWNlKSBwcmVyZXFzLnB1c2goYFByZXJlcXVpc2l0ZTogJHtmZWF0LnJhY2V9YCk7XG5cbiAgICBpZiAocHJlcmVxcy5sZW5ndGgpIHtcbiAgICAgIGxpbmVzLnB1c2goXCIqKlByZXJlcXVpc2l0ZXMqKlwiKTtcbiAgICAgIHByZXJlcXMuZm9yRWFjaChwID0+IGxpbmVzLnB1c2goYC0gJHtwfWApKTtcbiAgICAgIGxpbmVzLnB1c2goXCJcIik7XG4gICAgfVxuXG4gICAgLy8gXHUyNTAwXHUyNTAwXHUyNTAwIEVudHJpZXMgcmVuZGVyaW5nIFx1MjUwMFx1MjUwMFx1MjUwMFxuICAgIGNvbnN0IGVudHJpZXMgPSBBcnJheS5pc0FycmF5KGZlYXQuZW50cmllcykgPyBmZWF0LmVudHJpZXMgOiBbZmVhdC5lbnRyaWVzXTtcbiAgICBlbnRyaWVzLmZvckVhY2goKGVudHJ5OiBhbnkpID0+IHtcbiAgICAgIGlmICghZW50cnkpIHJldHVybjtcblxuICAgICAgLy8gUGxhaW4gdGV4dFxuICAgICAgaWYgKHR5cGVvZiBlbnRyeSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgZW50cnkuc3BsaXQoL1xcbnsyLH0vKS5mb3JFYWNoKHAgPT4ge1xuICAgICAgICAgIGNvbnN0IHQgPSBwLnRyaW0oKTtcbiAgICAgICAgICBpZiAodCkge1xuICAgICAgICAgICAgbGluZXMucHVzaChyZXBsYWNlNWVUYWdzKHQpKTtcbiAgICAgICAgICAgIGxpbmVzLnB1c2goXCJcIik7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgLy8gTGlzdFxuICAgICAgfSBlbHNlIGlmIChlbnRyeS50eXBlID09PSAnbGlzdCcgJiYgQXJyYXkuaXNBcnJheShlbnRyeS5pdGVtcykpIHtcbiAgICAgICAgZW50cnkuaXRlbXMuZm9yRWFjaCgoaXQ6IGFueSkgPT4ge1xuICAgICAgICAgIGlmICh0eXBlb2YgaXQgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICBsaW5lcy5wdXNoKGAtICR7cmVwbGFjZTVlVGFncyhpdCl9YCk7XG4gICAgICAgICAgfSBlbHNlIGlmIChpdC50eXBlID09PSAnaXRlbScgJiYgaXQubmFtZSkge1xuICAgICAgICAgICAgbGluZXMucHVzaChgLSAqKiR7aXQubmFtZX0qKmApO1xuICAgICAgICAgICAgY29uc3Qgc3VicyA9IEFycmF5LmlzQXJyYXkoaXQuZW50cmllcykgPyBpdC5lbnRyaWVzIDogW2l0LmVudHJpZXNdO1xuICAgICAgICAgICAgc3Vicy5mb3JFYWNoKChzOiBhbnkpID0+XG4gICAgICAgICAgICAgIGxpbmVzLnB1c2goYCAgLSAke3JlcGxhY2U1ZVRhZ3ModHlwZW9mIHMgPT09ICdzdHJpbmcnID8gcyA6IEpTT04uc3RyaW5naWZ5KHMpKX1gKVxuICAgICAgICAgICAgKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICBsaW5lcy5wdXNoKFwiXCIpO1xuXG4gICAgICAvLyBJbnNldCBhcyBpbmRlbnRlZCBidWxsZXRcbiAgICAgIH0gZWxzZSBpZiAoZW50cnkudHlwZSA9PT0gJ2luc2V0Jykge1xuICAgICAgICBsaW5lcy5wdXNoKGAtICoke2VudHJ5Lm5hbWV9KmApO1xuICAgICAgICBjb25zdCBzdWJzID0gQXJyYXkuaXNBcnJheShlbnRyeS5lbnRyaWVzKSA/IGVudHJ5LmVudHJpZXMgOiBbZW50cnkuZW50cmllc107XG4gICAgICAgIHN1YnMuZm9yRWFjaCgoczogYW55KSA9PiBsaW5lcy5wdXNoKGAgIC0gJHtyZXBsYWNlNWVUYWdzKHMpfWApKTtcbiAgICAgICAgbGluZXMucHVzaChcIlwiKTtcblxuICAgICAgLy8gU2VjdGlvbiBvciBlbnRyaWVzXG4gICAgICB9IGVsc2UgaWYgKChlbnRyeS50eXBlID09PSAnc2VjdGlvbicgfHwgZW50cnkudHlwZSA9PT0gJ2VudHJpZXMnKSAmJiBBcnJheS5pc0FycmF5KGVudHJ5LmVudHJpZXMpKSB7XG4gICAgICAgIGlmIChlbnRyeS5uYW1lKSB7XG4gICAgICAgICAgbGluZXMucHVzaChgIyMgJHtlbnRyeS5uYW1lfWApO1xuICAgICAgICAgIGxpbmVzLnB1c2goXCJcIik7XG4gICAgICAgIH1cbiAgICAgICAgZW50cnkuZW50cmllcy5mb3JFYWNoKChzOiBhbnkpID0+IHtcbiAgICAgICAgICBsaW5lcy5wdXNoKHJlcGxhY2U1ZVRhZ3ModHlwZW9mIHMgPT09ICdzdHJpbmcnID8gcyA6IEpTT04uc3RyaW5naWZ5KHMpKSk7XG4gICAgICAgICAgbGluZXMucHVzaChcIlwiKTtcbiAgICAgICAgfSk7XG5cbiAgICAgIC8vIFRhYmxlXG4gICAgICB9IGVsc2UgaWYgKGVudHJ5LnR5cGUgPT09ICd0YWJsZScgJiYgQXJyYXkuaXNBcnJheShlbnRyeS5yb3dzKSkge1xuICAgICAgICBjb25zdCBoZHIgPSBlbnRyeS5jb2xMYWJlbHMgfHwgW107XG4gICAgICAgIGxpbmVzLnB1c2goYHwgJHtoZHIuam9pbignIHwgJyl9IHxgKTtcbiAgICAgICAgbGluZXMucHVzaChgfCAke2hkci5tYXAoKCkgPT4gJy0tLScpLmpvaW4oJyB8ICcpfSB8YCk7XG4gICAgICAgIGVudHJ5LnJvd3MuZm9yRWFjaCgocm93OiBhbnlbXSkgPT5cbiAgICAgICAgICBsaW5lcy5wdXNoKGB8ICR7cm93LmpvaW4oJyB8ICcpfSB8YClcbiAgICAgICAgKTtcbiAgICAgICAgbGluZXMucHVzaChcIlwiKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIHJldHVybiB7XG4gICAgICBwYXRoOiBgUGxheWVyIEJ1aWxkL0ZlYXRzLyR7ZmVhdC5uYW1lfS5tZGAsXG4gICAgICBjb250ZW50OiBsaW5lcy5qb2luKFwiXFxuXCIpLnRyaW0oKSArIFwiXFxuXCIsXG4gICAgfTtcbiAgfSk7XG59XG4iLCAiLy8gc3JjL3BhcnNlcnMvYmFja2dyb3VuZHMudHNcbmltcG9ydCB0eXBlIHsgUGFyc2VkTWFya2Rvd25GaWxlIH0gZnJvbSBcIi4uLy4uL3R5cGVzXCI7XG5pbXBvcnQgeyByZXBsYWNlNWVUYWdzIH0gZnJvbSBcIi4vaGVscGVycy90YWdSZXBsYWNlclwiO1xuaW1wb3J0IHsgcmVuZGVyTWFya2Rvd25UYWJsZSB9IGZyb20gXCIuL2hlbHBlcnMvbWFya2Rvd25UYWJsZVwiO1xuaW1wb3J0IHsgYnVpbGRGTSwgc2VyaWFsaXplRnJvbnRtYXR0ZXIsIEZNX0ZJRUxEUywgZmlsdGVyVmFsaWRTa2lsbHMsIEJBQ0tHUk9VTkRfTUVUQV9ERUZTIH0gZnJvbSBcIi4vaGVscGVycy9mcm9udG1hdHRlclwiO1xuXG4vKipcbiAqIFBhcnNlIGJhY2tncm91bmRzLmpzb24gaW50byBvbmUgTWFya2Rvd24gZmlsZSBwZXIgYmFja2dyb3VuZCB1bmRlciBQbGF5ZXIgQnVpbGQvQmFja2dyb3VuZHMsXG4gKiBleGNsdWRpbmcgYW55IFx1MjAxQ1ZhcmlhbnRcdTIwMjZcdTIwMUQgb3IgXHUyMDFDQmFsZHVyXHUyMDE5cyBHYXRlXHUyMDI2XHUyMDFEIGVudHJpZXMuXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlQmFja2dyb3VuZHNGaWxlKGpzb246IGFueSwgZWRpdGlvbklkOiBzdHJpbmcpOiBQYXJzZWRNYXJrZG93bkZpbGVbXSB7XG4gIC8vIHB1bGwgaW4gdGhlIGFycmF5XG4gIGNvbnN0IHJhdzogYW55W10gPSBBcnJheS5pc0FycmF5KGpzb24uYmFja2dyb3VuZClcbiAgICA/IGpzb24uYmFja2dyb3VuZFxuICAgIDogQXJyYXkuaXNBcnJheShqc29uLmJhY2tncm91bmRzKVxuICAgID8ganNvbi5iYWNrZ3JvdW5kc1xuICAgIDogW107XG5cbiAgLy8gZmlsdGVyIG91dCB1bndhbnRlZCBlbnRyaWVzXG4gIGNvbnN0IGJhY2tncm91bmRzID0gcmF3LmZpbHRlcihiZyA9PiB7XG4gICAgY29uc3Qgbm06IHN0cmluZyA9IGJnLm5hbWUgfHwgXCJcIjtcbiAgICByZXR1cm4gIW5tLnN0YXJ0c1dpdGgoXCJWYXJpYW50XCIpICYmICFubS5pbmNsdWRlcyhcIkJhbGR1cidzIEdhdGVcIik7XG4gIH0pO1xuXG4gIGNvbnN0IG91dHB1dHM6IFBhcnNlZE1hcmtkb3duRmlsZVtdID0gW107XG5cbiAgYmFja2dyb3VuZHMuZm9yRWFjaChiZyA9PiB7XG4gICAgY29uc3QgbGluZXM6IHN0cmluZ1tdID0gW107XG5cbi8vIFx1MjUwMFx1MjUwMFx1MjUwMCBidWlsZCBmcm9udG1hdHRlciBcdTI1MDBcdTI1MDBcdTI1MDBcbmNvbnN0IGZtID0gYnVpbGRGTShiZywgQkFDS0dST1VORF9NRVRBX0RFRlMpO1xuXG4vLyBcdTI1MDBcdTI1MDBcdTI1MDAgY29sbGVjdCBvbmx5IHRoZSBlbnRyaWVzIGZsYWdnZWQgaXNGZWF0dXJlIFx1MjUwMFx1MjUwMFx1MjUwMFxuY29uc3QgZXh0cmFUcmFpdHM6IHN0cmluZ1tdID0gQXJyYXkuaXNBcnJheShiZy5lbnRyaWVzKVxuICA/IChiZy5lbnRyaWVzIGFzIGFueVtdKVxuICAgICAgLmZpbHRlcigoZTogYW55KSA9PiBlLmRhdGE/LmlzRmVhdHVyZSAmJiB0eXBlb2YgZS5uYW1lID09PSBcInN0cmluZ1wiKVxuICAgICAgLm1hcCgoZTogYW55KSA9PiB7XG4gICAgICAgIGNvbnN0IG5hbWUgPSBlLm5hbWUucmVwbGFjZSgvXkZlYXR1cmU6XFxzKi8sIFwiXCIpO1xuICAgICAgICByZXR1cm4gYFtbJHtiZy5uYW1lfSMke25hbWV9XV1gO1xuICAgICAgfSlcbiAgOiBbXTtcblxuLy8gXHUyNTAwXHUyNTAwXHUyNTAwIHNlcmlhbGl6ZSBmcm9udG1hdHRlciBcdTI1MDBcdTI1MDBcdTI1MDBcbmNvbnN0IHlhbWwgPSBzZXJpYWxpemVGcm9udG1hdHRlcihmbSwgQkFDS0dST1VORF9NRVRBX0RFRlMpO1xubGluZXMucHVzaChcIi0tLVwiLCB5YW1sLCBcIi0tLVwiLCBcIlwiKTtcblxuIFxuICAgIC8vIHRpdGxlXG4gICAgbGluZXMucHVzaChgIyAke2JnLm5hbWV9YCwgXCJcIik7XG5cbiAgICAvLyBcdTI1MDBcdTI1MDBcdTI1MDAgc2tpbGwgcHJvZmljaWVuY2llcyBcdTI1MDBcdTI1MDBcdTI1MDBcbiAgICBpZiAoQXJyYXkuaXNBcnJheShiZy5za2lsbFByb2ZpY2llbmNpZXMpICYmIGJnLnNraWxsUHJvZmljaWVuY2llcy5sZW5ndGgpIHtcbiAgICAgIGNvbnN0IHNraWxsczogc3RyaW5nW10gPSBbXTtcbiAgICAgIGJnLnNraWxsUHJvZmljaWVuY2llcy5mb3JFYWNoKChlbnQ6IGFueSkgPT4ge1xuICAgICAgICBpZiAodHlwZW9mIGVudCA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgIHNraWxscy5wdXNoKGNhcChlbnQpKTtcbiAgICAgICAgfSBlbHNlIGlmIChlbnQuY2hvb3NlICYmIEFycmF5LmlzQXJyYXkoZW50LmNob29zZS5mcm9tKSkge1xuICAgICAgICAgIHNraWxscy5wdXNoKGBDaG9vc2UgJHtlbnQuY2hvb3NlLmFtb3VudH0gZnJvbSAke2VudC5jaG9vc2UuZnJvbS5qb2luKFwiLCBcIil9YCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgT2JqZWN0LmVudHJpZXMoZW50KVxuICAgICAgICAgICAgLmZpbHRlcigoWywgdl0pID0+IHYgPT09IHRydWUpXG4gICAgICAgICAgICAuZm9yRWFjaCgoW2tdKSA9PiBza2lsbHMucHVzaChjYXAoaykpKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICBsaW5lcy5wdXNoKGAqKlNraWxsIFByb2ZpY2llbmNpZXM6KiogJHtza2lsbHMuam9pbihcIiwgXCIpfWAsIFwiXCIpO1xuICAgIH1cblxuICAgIC8vIFx1MjUwMFx1MjUwMFx1MjUwMCBsYW5ndWFnZSBwcm9maWNpZW5jaWVzIFx1MjUwMFx1MjUwMFx1MjUwMFxuICAgIGlmIChBcnJheS5pc0FycmF5KGJnLmxhbmd1YWdlUHJvZmljaWVuY2llcykgJiYgYmcubGFuZ3VhZ2VQcm9maWNpZW5jaWVzLmxlbmd0aCkge1xuICAgICAgY29uc3QgbGFuZ3M6IHN0cmluZ1tdID0gW107XG4gICAgICBiZy5sYW5ndWFnZVByb2ZpY2llbmNpZXMuZm9yRWFjaCgoZW50OiBhbnkpID0+IHtcbiAgICAgICAgaWYgKGVudC5hbnlTdGFuZGFyZCkge1xuICAgICAgICAgIGxhbmdzLnB1c2goYCR7ZW50LmFueVN0YW5kYXJkfSBvZiB5b3VyIGNob2ljZWApO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIE9iamVjdC5lbnRyaWVzKGVudClcbiAgICAgICAgICAgIC5maWx0ZXIoKFssIHZdKSA9PiB2ID09PSB0cnVlKVxuICAgICAgICAgICAgLmZvckVhY2goKFtrXSkgPT4gbGFuZ3MucHVzaChjYXAoaykpKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICBsaW5lcy5wdXNoKGAqKkxhbmd1YWdlczoqKiAke2xhbmdzLmpvaW4oXCIsIFwiKX1gLCBcIlwiKTtcbiAgICB9XG5cbiAgICAvLyBcdTI1MDBcdTI1MDBcdTI1MDAgdG9vbCBwcm9maWNpZW5jaWVzIFx1MjUwMFx1MjUwMFx1MjUwMFxuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShiZy50b29sUHJvZmljaWVuY2llcykgJiYgYmcudG9vbFByb2ZpY2llbmNpZXMubGVuZ3RoKSB7XG4gICAgICAgIGNvbnN0IHRvb2xzOiBzdHJpbmdbXSA9IFtdO1xuXG4gICAgICAgIGJnLnRvb2xQcm9maWNpZW5jaWVzLmZvckVhY2goKGVudDogYW55KSA9PiB7XG4gICAgICAgICAgICAvLyBcdTIwMUNDaG9vc2UgWCBmcm9tIFx1MjAyNlx1MjAxRFxuICAgICAgICAgICAgaWYgKGVudC5jaG9vc2UgJiYgQXJyYXkuaXNBcnJheShlbnQuY2hvb3NlLmZyb20pKSB7XG4gICAgICAgICAgICBjb25zdCBsaXN0ID0gZW50LmNob29zZS5mcm9tLm1hcChodW1hbml6ZSkuam9pbihcIiwgXCIpO1xuICAgICAgICAgICAgdG9vbHMucHVzaChgQ2hvb3NlICR7ZW50LmNob29zZS5jb3VudH0gZnJvbSAke2xpc3R9YCk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIHBsYWluIHN0cmluZyAocmFyZSBoZXJlLCBidXQganVzdCBpbiBjYXNlKVxuICAgICAgICAgICAgaWYgKHR5cGVvZiBlbnQgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgIHRvb2xzLnB1c2goaHVtYW5pemUoZW50KSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIG9iamVjdCB3aXRoIGJvb2xlYW4gZmxhZ3M6IGdhdGhlciAqYWxsKiB0cnVlIGtleXNcbiAgICAgICAgICAgIE9iamVjdC5lbnRyaWVzKGVudClcbiAgICAgICAgICAgIC5maWx0ZXIoKFtfLCB2XSkgPT4gdiA9PT0gdHJ1ZSlcbiAgICAgICAgICAgIC5mb3JFYWNoKChba10pID0+IHRvb2xzLnB1c2goaHVtYW5pemUoaykpKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgbGluZXMucHVzaChgKipUb29sIFByb2ZpY2llbmNpZXM6KiogJHt0b29scy5qb2luKFwiLCBcIil9YCwgXCJcIik7XG4gICAgICAgIH1cblxuXG5cbiAgICAvLyBcdTI1MDBcdTI1MDBcdTI1MDAgc3RhcnRpbmcgZXF1aXBtZW50IFx1MjUwMFx1MjUwMFx1MjUwMFxuICAgIGlmIChBcnJheS5pc0FycmF5KGJnLnN0YXJ0aW5nRXF1aXBtZW50KSAmJiBiZy5zdGFydGluZ0VxdWlwbWVudC5sZW5ndGgpIHtcbiAgICAgIGxpbmVzLnB1c2goYCoqRXF1aXBtZW50OioqYCk7XG4gICAgICBiZy5zdGFydGluZ0VxdWlwbWVudC5mb3JFYWNoKChncnA6IGFueSkgPT4ge1xuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShncnAuXykpIHtcbiAgICAgICAgICBncnAuXy5mb3JFYWNoKChpdDogYW55KSA9PiBsaW5lcy5wdXNoKGAtICR7Zm10SXRlbShpdCl9YCkpO1xuICAgICAgICB9XG4gICAgICAgIFtcImFcIiwgXCJiXCJdLmZvckVhY2goa2V5ID0+IHtcbiAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShncnBba2V5XSkpIHtcbiAgICAgICAgICAgIGdycFtrZXldLmZvckVhY2goKGl0OiBhbnkpID0+IGxpbmVzLnB1c2goYC0gJHtmbXRJdGVtKGl0KX1gKSk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgICAgbGluZXMucHVzaChcIlwiKTtcbiAgICB9XG5cbiAgICAvLyBcdTI1MDBcdTI1MDBcdTI1MDAgYWxsIGZlYXR1cmUgJiBlbnRyaWVzIGJsb2NrcyBcdTI1MDBcdTI1MDBcdTI1MDBcbiAgICBpZiAoQXJyYXkuaXNBcnJheShiZy5lbnRyaWVzKSkge1xuICAgICAgYmcuZW50cmllcy5mb3JFYWNoKChlbnRyeTogYW55KSA9PiB7XG4gICAgICAgIC8vIHNraXAgdGhlIHN1bW1hcnkgbGlzdCBibG9ja1xuICAgICAgICBpZiAoZW50cnkudHlwZSA9PT0gXCJsaXN0XCIgJiYgZW50cnkuc3R5bGUgPT09IFwibGlzdC1oYW5nLW5vdGl0bGVcIikge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICAvLyBzZWN0aW9uIGhlYWRlclxuICAgICAgICBpZiAoZW50cnkubmFtZSkge1xuY29uc3QgaGVhZGVyID0gZW50cnkuZGF0YT8uaXNGZWF0dXJlXG4gID8gZW50cnkubmFtZS5yZXBsYWNlKC9eRmVhdHVyZTpcXHMqLywgXCJcIilcbiAgOiBlbnRyeS5uYW1lO1xubGluZXMucHVzaChgIyMgJHtoZWFkZXJ9YCwgXCJcIik7ICAgICAgICB9XG4gICAgICAgIC8vIGVudHJ5IGNvbnRlbnRcbiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoZW50cnkuZW50cmllcykpIHtcbiAgICAgICAgICBlbnRyeS5lbnRyaWVzLmZvckVhY2goKGU6IGFueSkgPT4ge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBlID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICAgIGxpbmVzLnB1c2gocmVwbGFjZTVlVGFncyhlKSwgXCJcIik7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGUudHlwZSA9PT0gXCJsaXN0XCIgJiYgQXJyYXkuaXNBcnJheShlLml0ZW1zKSkge1xuICAgICAgICAgICAgICBlLml0ZW1zLmZvckVhY2goKGl0OiBhbnkpID0+XG4gICAgICAgICAgICAgICAgbGluZXMucHVzaChgLSAke3JlcGxhY2U1ZVRhZ3MoaXQuZW50cnkgPz8gaXQpfWApXG4gICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgIGxpbmVzLnB1c2goXCJcIik7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGUudHlwZSA9PT0gXCJ0YWJsZVwiKSB7XG4gICAgICAgICAgICAgIGNvbnN0IHRibCA9IHJlbmRlck1hcmtkb3duVGFibGUoZSk7XG4gICAgICAgICAgICAgIGlmICh0YmwpIGxpbmVzLnB1c2godGJsLCBcIlwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIGlmIChlbnRyeS50eXBlID09PSBcImxpc3RcIiAmJiBBcnJheS5pc0FycmF5KGVudHJ5Lml0ZW1zKSkge1xuICAgICAgICAgIGVudHJ5Lml0ZW1zLmZvckVhY2goKGl0OiBhbnkpID0+XG4gICAgICAgICAgICBsaW5lcy5wdXNoKGAtICR7cmVwbGFjZTVlVGFncyhpdC5lbnRyeSA/PyBpdCl9YClcbiAgICAgICAgICApO1xuICAgICAgICAgIGxpbmVzLnB1c2goXCJcIik7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cblxuICAgIG91dHB1dHMucHVzaCh7XG4gICAgICBwYXRoOiBgUGxheWVyIEJ1aWxkL0JhY2tncm91bmRzLyR7YmcubmFtZX0ubWRgLFxuICAgICAgY29udGVudDogbGluZXMuam9pbihcIlxcblwiKS50cmltRW5kKCkgKyBcIlxcblwiLFxuICAgIH0pO1xuICB9KTtcblxuICByZXR1cm4gb3V0cHV0cztcbn1cblxuLy8gXHUyMDE0XHUyMDE0XHUyMDE0IGhlbHBlcnMgXHUyMDE0XHUyMDE0XHUyMDE0XG5mdW5jdGlvbiBjYXAoc3RyOiBzdHJpbmcpIHtcbiAgcmV0dXJuIHN0ci5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIHN0ci5zbGljZSgxKTtcbn1cblxuXG5mdW5jdGlvbiBmbXRJdGVtKGl0ZW06IGFueSk6IHN0cmluZyB7XG4gIC8vIDEpIHJhdyBzdHJpbmcgb3IgdGFnZ2VkIGl0ZW1cbiAgaWYgKHR5cGVvZiBpdGVtID09PSBcInN0cmluZ1wiKSB7XG4gICAgaWYgKGl0ZW0uaW5jbHVkZXMoXCJ8XCIpKSB7XG4gICAgICByZXR1cm4gcmVwbGFjZTVlVGFncyhge0BpdGVtICR7aXRlbX19YCk7XG4gICAgfVxuICAgIHJldHVybiByZXBsYWNlNWVUYWdzKGl0ZW0pO1xuICB9XG5cbiAgLy8gMikgcHVyZSBnb2xkLXBpZWNlIGVudHJ5OiB7IHZhbHVlOiAxMCB9IG9yIHsgY29udGFpbnNWYWx1ZTogMTUwMCB9XG4gIGNvbnN0IHByaWNlUmF3ID0gKGl0ZW0uY29udGFpbnNWYWx1ZSA/PyBpdGVtLnZhbHVlKSBhcyBudW1iZXIgfCB1bmRlZmluZWQ7XG4gIGlmIChcbiAgICB0eXBlb2YgcHJpY2VSYXcgPT09IFwibnVtYmVyXCIgJiZcbiAgICAvLyBtYWtlIHN1cmUgaXRcdTIwMTlzIG5vdCBhbHNvIGFuIFx1MjAxQ2l0ZW1cdTIwMUQgb3IgXHUyMDFDZXF1aXBtZW50VHlwZVx1MjAxRFxuICAgICFpdGVtLml0ZW0gJiZcbiAgICAhaXRlbS5lcXVpcG1lbnRUeXBlICYmXG4gICAgIWl0ZW0uc3BlY2lhbFxuICApIHtcbiAgICBjb25zdCBncCA9IHByaWNlUmF3ID49IDEwMCA/IHByaWNlUmF3IC8gMTAwIDogcHJpY2VSYXc7XG4gICAgcmV0dXJuIGAke2dwfSBncGA7XG4gIH1cblxuICAvLyAzKSBleHBsaWNpdCBpdGVtIG9iamVjdCB3aXRoIG9wdGlvbmFsIHByaWNlXG4gIGlmIChpdGVtLml0ZW0pIHtcbiAgICBjb25zdCBsaW5rID0gcmVwbGFjZTVlVGFncyhge0BpdGVtICR7aXRlbS5pdGVtfX1gKTtcbiAgICBpZiAodHlwZW9mIHByaWNlUmF3ID09PSBcIm51bWJlclwiKSB7XG4gICAgICBjb25zdCBncCA9IHByaWNlUmF3ID49IDEwMCA/IHByaWNlUmF3IC8gMTAwIDogcHJpY2VSYXc7XG4gICAgICByZXR1cm4gYCR7bGlua30gKCR7Z3B9IGdwKWA7XG4gICAgfVxuICAgIHJldHVybiBsaW5rO1xuICB9XG5cbiAgLy8gNCkgc3BlY2lhbC1jYXNlIHRleHRcbiAgaWYgKHR5cGVvZiBpdGVtLnNwZWNpYWwgPT09IFwic3RyaW5nXCIpIHtcbiAgICByZXR1cm4gaXRlbS5zcGVjaWFsO1xuICB9XG5cbiAgLy8gNSkga25vd24gZXF1aXBtZW50VHlwZSBrZXlzXG4gIGlmIChpdGVtLmVxdWlwbWVudFR5cGUpIHtcbiAgICBzd2l0Y2ggKGl0ZW0uZXF1aXBtZW50VHlwZSkge1xuICAgICAgY2FzZSBcInRvb2xBcnRpc2FuXCI6XG4gICAgICAgIHJldHVybiBcIk9uZSB0eXBlIG9mIGFydGlzYW5cdTIwMTlzIHRvb2xzIChvZiB5b3VyIGNob2ljZSlcIjtcbiAgICAgIGNhc2UgXCJpbnN0cnVtZW50TXVzaWNhbFwiOlxuICAgICAgICByZXR1cm4gXCJPbmUgdHlwZSBvZiBtdXNpY2FsIGluc3RydW1lbnQgKG9mIHlvdXIgY2hvaWNlKVwiO1xuICAgICAgY2FzZSBcInNldEdhbWluZ1wiOlxuICAgICAgICByZXR1cm4gXCJPbmUgc2V0IG9mIGdhbWluZyBkaWNlIChvZiB5b3VyIGNob2ljZSlcIjtcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiBodW1hbml6ZShpdGVtLmVxdWlwbWVudFR5cGUpO1xuICAgIH1cbiAgfVxuXG4gIC8vIDYpIGZhbGxiYWNrOiBkdW1wIGFueSBsZWZ0b3ZlciB0YWcgc3ludGF4XG4gIHJldHVybiByZXBsYWNlNWVUYWdzKEpTT04uc3RyaW5naWZ5KGl0ZW0pKTtcbn1cblxuXG5cbmZ1bmN0aW9uIGh1bWFuaXplKHN0cjogc3RyaW5nKTogc3RyaW5nIHtcbiAgY29uc3Qgc3BhY2VkID0gc3RyLnJlcGxhY2UoLyhbYS16XSkoW0EtWl0pL2csIFwiJDEgJDJcIik7XG4gIHJldHVybiBzcGFjZWQuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBzcGFjZWQuc2xpY2UoMSk7XG59XG4iLCAiLy81ZSAyMDI1IGluc3RhbGxlclxuXG5pbXBvcnQgeyBBcHAsIG5vcm1hbGl6ZVBhdGggfSBmcm9tIFwib2JzaWRpYW5cIjtcbmltcG9ydCB0eXBlIHsgRWRpdGlvbiB9IGZyb20gXCIuLi8uLi9lZGl0aW9uc1wiO1xuaW1wb3J0IHsgcGFyc2VTcGVsbHNGaWxlIH0gZnJvbSBcIi4vc3BlbGxzXCI7XG5pbXBvcnQgeyBwYXJzZUJlc3RpYXJ5RmlsZSB9IGZyb20gXCIuL2Jlc3RpYXJ5XCI7XG5pbXBvcnQgeyBwYXJzZUl0ZW1zRmlsZSB9IGZyb20gXCIuL2l0ZW1zXCI7XG5pbXBvcnQgeyBwYXJzZVNwZWNpZXNGaWxlIH0gZnJvbSBcIi4vc3BlY2llc1wiO1xuaW1wb3J0IHsgcGFyc2VDbGFzc0ZpbGUgfSBmcm9tIFwiLi9jbGFzc2VzXCI7XG5pbXBvcnQgeyBwYXJzZUFjdGlvbnNGaWxlLCBwYXJzZUNvbmRpdGlvbnNEaXNlYXNlc0ZpbGUsIHBhcnNlU2Vuc2VzRmlsZSwgcGFyc2VTa2lsbHNGaWxlIH0gZnJvbSBcIi4vcnVsZXNcIjtcbmltcG9ydCB7IHBhcnNlRmVhdHNGaWxlIH0gZnJvbSBcIi4vZmVhdHNcIjtcbmltcG9ydCB7IHBhcnNlQmFja2dyb3VuZHNGaWxlIH0gZnJvbSBcIi4vYmFja2dyb3VuZHNcIjtcbmltcG9ydCB7IFRGaWxlIH0gZnJvbSBcIm9ic2lkaWFuXCI7XG5cblxuLy8gXHUyMDE0IEdpdEh1YiBsaXN0aW5ncyBcdTIwMTRcbmFzeW5jIGZ1bmN0aW9uIGxpc3RTcGVsbEZpbGVzRnJvbUdpdEh1YihyZXBvOiBzdHJpbmcpOiBQcm9taXNlPHN0cmluZ1tdPiB7XG4gIGNvbnN0IHVybCA9IGBodHRwczovL2FwaS5naXRodWIuY29tL3JlcG9zLyR7cmVwb30vY29udGVudHMvZGF0YS9zcGVsbHNgO1xuICBjb25zdCByZXMgPSBhd2FpdCBmZXRjaCh1cmwpO1xuICBjb25zdCBkYXRhID0gKGF3YWl0IHJlcy5qc29uKCkpIGFzIEFycmF5PHsgbmFtZTogc3RyaW5nOyB0eXBlOiBzdHJpbmcgfT47XG4gIHJldHVybiBkYXRhXG4gICAgLmZpbHRlcihpdGVtID0+IGl0ZW0udHlwZSA9PT0gXCJmaWxlXCIgJiYgaXRlbS5uYW1lLnN0YXJ0c1dpdGgoXCJzcGVsbHMtXCIpICYmIGl0ZW0ubmFtZS5lbmRzV2l0aChcIi5qc29uXCIpKVxuICAgIC5tYXAoaXRlbSA9PiBpdGVtLm5hbWUpO1xufVxuXG5hc3luYyBmdW5jdGlvbiBsaXN0QmVzdGlhcnlGaWxlc0Zyb21HaXRIdWIocmVwbzogc3RyaW5nKTogUHJvbWlzZTxzdHJpbmdbXT4ge1xuICBjb25zdCB1cmwgPSBgaHR0cHM6Ly9hcGkuZ2l0aHViLmNvbS9yZXBvcy8ke3JlcG99L2NvbnRlbnRzL2RhdGEvYmVzdGlhcnlgO1xuICBjb25zdCByZXMgPSBhd2FpdCBmZXRjaCh1cmwpO1xuICBjb25zdCBsaXN0ID0gKGF3YWl0IHJlcy5qc29uKCkpIGFzIEFycmF5PHsgbmFtZTogc3RyaW5nOyB0eXBlOiBzdHJpbmcgfT47XG4gIGNvbnN0IENPUkVfU09VUkNFUyA9IFtcbiAgICBcImJlc3RpYXJ5LXBoYi5qc29uXCIsIFwiYmVzdGlhcnktbW0uanNvblwiLCBcImJlc3RpYXJ5LWRtZy5qc29uXCIsXG4gICAgXCJiZXN0aWFyeS14Z2UuanNvblwiLCBcImJlc3RpYXJ5LXZnbS5qc29uXCIsIFwiYmVzdGlhcnktdGNlLmpzb25cIixcbiAgICBcImJlc3RpYXJ5LWVndy5qc29uXCIsIFwiYmVzdGlhcnktZXJsdy5qc29uXCIsIFwiYmVzdGlhcnktbXRmLmpzb25cIixcbiAgICBcImJlc3RpYXJ5LXZyZ3IuanNvblwiLCBcImJlc3RpYXJ5LWNvcy5qc29uXCIsIFwiYmVzdGlhcnktb290YS5qc29uXCIsXG4gICAgXCJiZXN0aWFyeS1wb3RhLmpzb25cIiwgXCJiZXN0aWFyeS1ob3RkcS5qc29uXCIsIFwiYmVzdGlhcnktcm90Lmpzb25cIixcbiAgICBcImJlc3RpYXJ5LXNrdC5qc29uXCIsIFwiYmVzdGlhcnktdGZ0eXAuanNvblwiLCBcImJlc3RpYXJ5LXRvYS5qc29uXCJcbiAgXTtcbiAgcmV0dXJuIGxpc3RcbiAgICAuZmlsdGVyKGl0ZW0gPT4gaXRlbS50eXBlID09PSBcImZpbGVcIiAmJiBDT1JFX1NPVVJDRVMuaW5jbHVkZXMoaXRlbS5uYW1lKSlcbiAgICAubWFwKGl0ZW0gPT4gaXRlbS5uYW1lKTtcbn1cblxuY29uc3QgSVRFTV9KU09OX0ZJTEVTID0gW1xuICBcIml0ZW1zLWJhc2UuanNvblwiLFxuICBcIml0ZW1zLmpzb25cIixcbiAgXCJvYmplY3RzLmpzb25cIixcbiAgXCJ2ZWhpY2xlcy5qc29uXCIsXG4gIFwiZGVja3MuanNvblwiLFxuXTtcblxuYXN5bmMgZnVuY3Rpb24gbGlzdEl0ZW1GaWxlc0Zyb21HaXRIdWIocmVwbzogc3RyaW5nKTogUHJvbWlzZTxzdHJpbmdbXT4ge1xuICBjb25zdCB1cmwgPSBgaHR0cHM6Ly9hcGkuZ2l0aHViLmNvbS9yZXBvcy8ke3JlcG99L2NvbnRlbnRzL2RhdGFgO1xuICBjb25zdCByZXMgPSBhd2FpdCBmZXRjaCh1cmwpO1xuICBjb25zdCBkYXRhID0gKGF3YWl0IHJlcy5qc29uKCkpIGFzIEFycmF5PHsgbmFtZTogc3RyaW5nOyB0eXBlOiBzdHJpbmcgfT47XG4gIHJldHVybiBkYXRhXG4gICAgLmZpbHRlcihpdGVtID0+IGl0ZW0udHlwZSA9PT0gXCJmaWxlXCIgJiYgSVRFTV9KU09OX0ZJTEVTLmluY2x1ZGVzKGl0ZW0ubmFtZSkpXG4gICAgLm1hcChpdGVtID0+IGl0ZW0ubmFtZSk7XG59XG5cbmFzeW5jIGZ1bmN0aW9uIGxpc3RDbGFzc0ZpbGVzRnJvbUdpdEh1YihyZXBvOiBzdHJpbmcpOiBQcm9taXNlPHN0cmluZ1tdPiB7XG4gIGNvbnN0IHVybCA9IGBodHRwczovL2FwaS5naXRodWIuY29tL3JlcG9zLyR7cmVwb30vY29udGVudHMvZGF0YS9jbGFzc2A7XG4gIGNvbnN0IHJlcyA9IGF3YWl0IGZldGNoKHVybCk7XG4gIGNvbnN0IGxpc3RpbmcgPSAoYXdhaXQgcmVzLmpzb24oKSkgYXMgQXJyYXk8eyBuYW1lOiBzdHJpbmc7IHR5cGU6IHN0cmluZyB9PjtcbiAgcmV0dXJuIGxpc3RpbmdcbiAgICAuZmlsdGVyKGl0ZW0gPT5cbiAgICAgIGl0ZW0udHlwZSA9PT0gXCJmaWxlXCIgJiZcbiAgICAgIGl0ZW0ubmFtZS5zdGFydHNXaXRoKFwiY2xhc3MtXCIpICYmXG4gICAgICBpdGVtLm5hbWUuZW5kc1dpdGgoXCIuanNvblwiKVxuICAgIClcbiAgICAubWFwKGl0ZW0gPT4gaXRlbS5uYW1lKTtcbn1cblxuLy8gXHUyMDE0IGVuc3VyZSB0aGUgdmF1bHQgZm9sZGVyIGV4aXN0cyBcdTIwMTRcbmFzeW5jIGZ1bmN0aW9uIGVuc3VyZUZvbGRlcihhcHA6IEFwcCwgZm9sZGVyUGF0aDogc3RyaW5nKSB7XG4gIGNvbnN0IHBhcnRzID0gZm9sZGVyUGF0aC5zcGxpdChcIi9cIik7XG4gIGxldCBjdXJyID0gXCJcIjtcbiAgZm9yIChjb25zdCBwIG9mIHBhcnRzKSB7XG4gICAgY3VyciA9IGN1cnIgPyBgJHtjdXJyfS8ke3B9YCA6IHA7XG4gICAgdHJ5IHsgYXdhaXQgYXBwLnZhdWx0LmNyZWF0ZUZvbGRlcihjdXJyKTsgfVxuICAgIGNhdGNoIHt9IC8vIGFscmVhZHkgZXhpc3RzXG4gIH1cbn1cblxuLy8gXHUyMDE0IHRoZSBvbmUgZW50cnktcG9pbnQgdGhhdCB5b3VyIHRvcC1sZXZlbCBjYWxscyBcdTIwMTRcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBpbXBvcnRFZGl0aW9uRGF0YShwYXJhbXM6IHtcbiAgYXBwOiBBcHA7XG4gIGVkaXRpb246IEVkaXRpb247XG4gIHRhcmdldFBhdGg6IHN0cmluZztcbn0pIHtcbiAgY29uc3QgeyBhcHAsIGVkaXRpb24sIHRhcmdldFBhdGggfSA9IHBhcmFtcztcbiAgY29uc3QgcmVwbyA9IGVkaXRpb24ucmVwbyA/PyBcIlwiO1xuXG4gIC8vIFx1RDgzRFx1REQzOSBTUEVMTFNcbiAge1xuICAgIGNvbnN0IHNwZWxsRmlsZXMgPSBhd2FpdCBsaXN0U3BlbGxGaWxlc0Zyb21HaXRIdWIocmVwbyk7XG4gICAgZm9yIChjb25zdCBmaWxlTmFtZSBvZiBzcGVsbEZpbGVzKSB7XG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCByZXMgID0gYXdhaXQgZmV0Y2goYCR7ZWRpdGlvbi5zb3VyY2VVcmx9L3NwZWxscy8ke2ZpbGVOYW1lfWApO1xuICAgICAgICBjb25zdCBqc29uID0gYXdhaXQgcmVzLmpzb24oKTtcbiAgICAgICAgY29uc3QgZmlsZXMgPSBwYXJzZVNwZWxsc0ZpbGUoanNvbiwgZWRpdGlvbi5pZCk7XG4gICAgICAgIGZvciAoY29uc3QgbWQgb2YgZmlsZXMpIHtcbiAgICAgICAgICBjb25zdCBmdWxsUGF0aCA9IG5vcm1hbGl6ZVBhdGgoYCR7dGFyZ2V0UGF0aH0vU3BlbGxzLyR7bWQucGF0aH1gKTtcbiAgICAgICAgICBjb25zdCBmb2xkZXIgICA9IGZ1bGxQYXRoLnNwbGl0KFwiL1wiKS5zbGljZSgwLCAtMSkuam9pbihcIi9cIik7XG4gICAgICAgICAgYXdhaXQgZW5zdXJlRm9sZGVyKGFwcCwgZm9sZGVyKTtcbiAgICAgICAgICBhd2FpdCBhcHAudmF1bHQuYWRhcHRlci53cml0ZShmdWxsUGF0aCwgbWQuY29udGVudCk7XG4gICAgICAgIH1cbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgY29uc29sZS53YXJuKGBGYWlsZWQgdG8gaW1wb3J0IHNwZWxsICR7ZmlsZU5hbWV9OmAsIGUpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8vIFx1RDgzRFx1REQzOSBCRVNUSUFSWVxuICB7XG4gICAgY29uc3QgYmVzdGlhcnlGaWxlcyA9IGF3YWl0IGxpc3RCZXN0aWFyeUZpbGVzRnJvbUdpdEh1YihyZXBvKTtcbiAgICBmb3IgKGNvbnN0IGZpbGVOYW1lIG9mIGJlc3RpYXJ5RmlsZXMpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHJlcyAgICA9IGF3YWl0IGZldGNoKGAke2VkaXRpb24uc291cmNlVXJsfS9iZXN0aWFyeS8ke2ZpbGVOYW1lfWApO1xuICAgICAgICBjb25zdCBqc29uICAgPSBhd2FpdCByZXMuanNvbigpO1xuICAgICAgICBjb25zdCBwYXJzZWQgPSBwYXJzZUJlc3RpYXJ5RmlsZShqc29uLCBlZGl0aW9uLmlkKTtcbiAgICAgICAgZm9yIChjb25zdCBtZCBvZiBwYXJzZWQpIHtcbiAgICAgICAgICBjb25zdCBmdWxsUGF0aCA9IG5vcm1hbGl6ZVBhdGgoYCR7dGFyZ2V0UGF0aH0vQmVzdGlhcnkvJHttZC5wYXRofWApO1xuICAgICAgICAgIGNvbnN0IGZvbGRlciAgID0gZnVsbFBhdGguc3BsaXQoXCIvXCIpLnNsaWNlKDAsIC0xKS5qb2luKFwiL1wiKTtcbiAgICAgICAgICBhd2FpdCBlbnN1cmVGb2xkZXIoYXBwLCBmb2xkZXIpO1xuICAgICAgICAgIGF3YWl0IGFwcC52YXVsdC5hZGFwdGVyLndyaXRlKGZ1bGxQYXRoLCBtZC5jb250ZW50KTtcbiAgICAgICAgfVxuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBjb25zb2xlLndhcm4oYEZhaWxlZCB0byBpbXBvcnQgYmVzdGlhcnkgJHtmaWxlTmFtZX06YCwgZSk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLy8gXHVEODNEXHVERDM5IElURU1TXG4gIHtcbiAgICBjb25zdCBpdGVtRmlsZXMgPSBhd2FpdCBsaXN0SXRlbUZpbGVzRnJvbUdpdEh1YihyZXBvKTtcbiAgICBmb3IgKGNvbnN0IGZuIG9mIGl0ZW1GaWxlcykge1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgcmVzICA9IGF3YWl0IGZldGNoKGAke2VkaXRpb24uc291cmNlVXJsfS8ke2ZufWApO1xuICAgICAgICBjb25zdCBqc29uID0gYXdhaXQgcmVzLmpzb24oKTtcbiAgICAgICAgY29uc3QgbWRGaWxlcyA9IHBhcnNlSXRlbXNGaWxlKGpzb24sIGVkaXRpb24uaWQpO1xuICAgICAgICBmb3IgKGNvbnN0IG1kIG9mIG1kRmlsZXMpIHtcbiAgICAgICAgICBjb25zdCBmdWxsUGF0aCA9IG5vcm1hbGl6ZVBhdGgoYCR7dGFyZ2V0UGF0aH0vJHttZC5wYXRofWApO1xuICAgICAgICAgIGNvbnN0IGZvbGRlciAgID0gZnVsbFBhdGguc3BsaXQoXCIvXCIpLnNsaWNlKDAsIC0xKS5qb2luKFwiL1wiKTtcbiAgICAgICAgICBhd2FpdCBlbnN1cmVGb2xkZXIoYXBwLCBmb2xkZXIpO1xuICAgICAgICAgIGF3YWl0IGFwcC52YXVsdC5hZGFwdGVyLndyaXRlKGZ1bGxQYXRoLCBtZC5jb250ZW50KTtcbiAgICAgICAgfVxuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBjb25zb2xlLndhcm4oYEZhaWxlZCB0byBpbXBvcnQgaXRlbXMgZnJvbSAke2ZufTpgLCBlKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbi8vIFx1RDgzRFx1REQzOSBTUEVDSUVTXG57XG4gIGNvbnN0IHJlcyAgPSBhd2FpdCBmZXRjaChgJHtlZGl0aW9uLnNvdXJjZVVybH0vcmFjZXMuanNvbmApO1xuICBjb25zdCBqc29uID0gYXdhaXQgcmVzLmpzb24oKTtcbiAgY29uc3QgbWRGaWxlcyA9IHBhcnNlU3BlY2llc0ZpbGUoanNvbiwgZWRpdGlvbi5pZCk7XG4gIGZvciAoY29uc3QgbWQgb2YgbWRGaWxlcykge1xuICAgIGNvbnN0IGZ1bGxQYXRoID0gbm9ybWFsaXplUGF0aChgJHt0YXJnZXRQYXRofS9QbGF5ZXIgQnVpbGQvJHttZC5wYXRofWApO1xuICAgIGF3YWl0IGVuc3VyZUZvbGRlcihhcHAsIGZ1bGxQYXRoLnNwbGl0KFwiL1wiKS5zbGljZSgwLCAtMSkuam9pbihcIi9cIikpO1xuICAgIGF3YWl0IGFwcC52YXVsdC5hZGFwdGVyLndyaXRlKGZ1bGxQYXRoLCBtZC5jb250ZW50KTtcbiAgfVxuLy8gXHVEODNEXHVERDM5IEZFVENIIE9QVElPTkFMIEZFQVRVUkVTIEpTT05cbmxldCBvcHRpb25hbEZlYXR1cmVzOiBhbnlbXSA9IFtdO1xudHJ5IHtcbiAgY29uc3QgdXJsICA9IGAke2VkaXRpb24uc291cmNlVXJsfS9vcHRpb25hbGZlYXR1cmVzLmpzb25gO1xuICBjb25zdCByZXMgID0gYXdhaXQgZmV0Y2godXJsKTtcbiAgY29uc3QgdGV4dCA9IGF3YWl0IHJlcy50ZXh0KCk7XG5cbiAgLy8gc3RyaXAgYW55IEpTT04taGlqYWNrIHByZWZpeCAoZS5nLiApXX0nLCkgYW5kIGFueSBCT00vd2hpdGVzcGFjZVxuICBjb25zdCBzdGFydCA9IHRleHQuaW5kZXhPZihcIntcIik7XG4gIGlmIChzdGFydCA9PT0gLTEpIHRocm93IG5ldyBFcnJvcihcIk5vIEpTT04gb2JqZWN0IGZvdW5kXCIpO1xuICBjb25zdCBjbGVhbkpzb24gPSB0ZXh0LnNsaWNlKHN0YXJ0KTtcblxuICBjb25zdCByYXcgPSBKU09OLnBhcnNlKGNsZWFuSnNvbik7XG4gIG9wdGlvbmFsRmVhdHVyZXMgPSBBcnJheS5pc0FycmF5KHJhdy5vcHRpb25hbGZlYXR1cmUpXG4gICAgPyByYXcub3B0aW9uYWxmZWF0dXJlXG4gICAgOiBbXTtcbn0gY2F0Y2ggKGUpIHtcbiAgY29uc29sZS53YXJuKFwiRmFpbGVkIHRvIGltcG9ydCBvcHRpb25hbGZlYXR1cmVzLmpzb246XCIsIGUpO1xufVxuLy8gXHVEODNEXHVERDM5IENMQVNTRVNcbntcbiAgY29uc3QgY2xhc3NGaWxlcyA9IGF3YWl0IGxpc3RDbGFzc0ZpbGVzRnJvbUdpdEh1YihyZXBvKTtcbiAgZm9yIChjb25zdCBmaWxlTmFtZSBvZiBjbGFzc0ZpbGVzKSB7XG4gICAgdHJ5IHtcbiAgICAgIC8vIGZldGNoIHRoZSByYXcgY2xhc3MgSlNPTlxuICAgICAgY29uc3QgcmVzICAgID0gYXdhaXQgZmV0Y2goYCR7ZWRpdGlvbi5zb3VyY2VVcmx9L2NsYXNzLyR7ZmlsZU5hbWV9YCk7XG4gICAgICBjb25zdCBqc29uICAgPSBhd2FpdCByZXMuanNvbigpO1xuXG4gICAgICAvLyBwYXJzZSBpbnRvIG9uZSBvciBtb3JlIG1hcmtkb3duIGZpbGVzXG4gICAgICBjb25zdCBtZEZpbGVzID0gcGFyc2VDbGFzc0ZpbGUoXG4gICAgICAgIGpzb24sXG4gICAgICAgIGVkaXRpb24uaWQsXG4gICAgICAgIGZpbGVOYW1lLFxuICAgICAgICBvcHRpb25hbEZlYXR1cmVzXG4gICAgICApO1xuICAgICAgZm9yIChjb25zdCBtZCBvZiBtZEZpbGVzKSB7XG4gICAgICAgIGNvbnN0IGZ1bGxQYXRoID0gbm9ybWFsaXplUGF0aChgJHt0YXJnZXRQYXRofS9QbGF5ZXIgQnVpbGQvJHttZC5wYXRofWApO1xuICAgICAgICAvLyAxKSBlbnN1cmUgdGhlIGZvbGRlciBleGlzdHNcbiAgICAgICAgYXdhaXQgZW5zdXJlRm9sZGVyKGFwcCwgZnVsbFBhdGguc3BsaXQoXCIvXCIpLnNsaWNlKDAsIC0xKS5qb2luKFwiL1wiKSk7XG5cbiAgICAgICAgLy8gMikgd3JpdGUgdmlhIE9ic2lkaWFuXHUyMDE5cyBBUEkgc28gbm90ZXMgcmVmcmVzaFxuICAgICAgICBjb25zdCBleGlzdGluZyA9IGFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoZnVsbFBhdGgpO1xuICAgICAgICBpZiAoZXhpc3RpbmcgaW5zdGFuY2VvZiBURmlsZSkge1xuICAgICAgICAgIC8vIE92ZXJ3cml0ZSBhbiBleGlzdGluZyBub3RlIGFuZCBmaXJlIHRoZSBjaGFuZ2UgZXZlbnRcbiAgICAgICAgICBhd2FpdCBhcHAudmF1bHQubW9kaWZ5KGV4aXN0aW5nLCBtZC5jb250ZW50KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBDcmVhdGUgYSBicmFuZC1uZXcgbm90ZSAoYWxzbyBmaXJlcyB0aGUgY2hhbmdlIGV2ZW50KVxuICAgICAgICAgIGF3YWl0IGFwcC52YXVsdC5jcmVhdGUoZnVsbFBhdGgsIG1kLmNvbnRlbnQpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgY29uc29sZS53YXJuKGBGYWlsZWQgdG8gaW1wb3J0IGNsYXNzICR7ZmlsZU5hbWV9OmAsIGUpO1xuICAgIH1cbiAgfVxufVxuXG5cbiAvLyBcdUQ4M0RcdUREMzkgUlVMRVM6IEFDVElPTlNcbiAge1xuICAgIHRyeSB7XG5cbiAgICAgIGNvbnN0IHJlcyAgPSBhd2FpdCBmZXRjaChgJHtlZGl0aW9uLnNvdXJjZVVybH0vYWN0aW9ucy5qc29uYCk7XG4gICAgICBjb25zdCBqc29uID0gYXdhaXQgcmVzLmpzb24oKTtcbiAgICBcbiAgICAgIGNvbnN0IG1kRmlsZXMgPSBwYXJzZUFjdGlvbnNGaWxlKGpzb24sIGVkaXRpb24uaWQpO1xuICAgIFxuICAgICAgZm9yIChjb25zdCBtZCBvZiBtZEZpbGVzKSB7XG4gICAgICAgIGNvbnN0IGZ1bGxQYXRoID0gbm9ybWFsaXplUGF0aChcbiAgICAgICAgICBgJHt0YXJnZXRQYXRofS8ke21kLnBhdGh9YFxuICAgICAgICApO1xuICAgICAgICBjb25zdCBmb2xkZXIgPSBmdWxsUGF0aC5zcGxpdChcIi9cIikuc2xpY2UoMCwgLTEpLmpvaW4oXCIvXCIpO1xuXG4gICAgICAgIGF3YWl0IGVuc3VyZUZvbGRlcihhcHAsIGZvbGRlcik7XG4gICAgICAgIGF3YWl0IGFwcC52YXVsdC5hZGFwdGVyLndyaXRlKGZ1bGxQYXRoLCBtZC5jb250ZW50KTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICBjb25zb2xlLndhcm4oXCJGYWlsZWQgdG8gaW1wb3J0IGFjdGlvbnMuanNvbjpcIiwgZSk7XG4gICAgfVxuICB9XG5cblxuICAgIC8vIFx1RDgzRFx1REQzOSBSVUxFUzogQ09ORElUSU9OUyAmIERJU0VBU0VTXG4gIHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgcmVzICA9IGF3YWl0IGZldGNoKGAke2VkaXRpb24uc291cmNlVXJsfS9jb25kaXRpb25zZGlzZWFzZXMuanNvbmApO1xuICAgICAgY29uc3QganNvbiA9IGF3YWl0IHJlcy5qc29uKCk7XG4gICAgICBjb25zdCBtZEZpbGVzID0gcGFyc2VDb25kaXRpb25zRGlzZWFzZXNGaWxlKGpzb24sIGVkaXRpb24uaWQpO1xuICAgICAgZm9yIChjb25zdCBtZCBvZiBtZEZpbGVzKSB7XG4gICAgICAgIGNvbnN0IGZ1bGxQYXRoID0gbm9ybWFsaXplUGF0aChcbiAgICAgICAgICBgJHt0YXJnZXRQYXRofS8ke21kLnBhdGh9YFxuICAgICAgICApO1xuICAgICAgICBjb25zdCBmb2xkZXIgPSBmdWxsUGF0aC5zcGxpdChcIi9cIikuc2xpY2UoMCwgLTEpLmpvaW4oXCIvXCIpO1xuICAgICAgICBhd2FpdCBlbnN1cmVGb2xkZXIoYXBwLCBmb2xkZXIpO1xuICAgICAgICBhd2FpdCBhcHAudmF1bHQuYWRhcHRlci53cml0ZShmdWxsUGF0aCwgbWQuY29udGVudCk7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgY29uc29sZS53YXJuKFwiRmFpbGVkIHRvIGltcG9ydCBjb25kaXRpb25zZGlzZWFzZXMuanNvbjpcIiwgZSk7XG4gICAgfVxuICB9XG5cbiAgIC8vIFx1RDgzRFx1REQzOSBSVUxFUzogU0VOU0VTXG4gIHtcbiAgICB0cnkge1xuXG4gICAgICBjb25zdCByZXMgID0gYXdhaXQgZmV0Y2goYCR7ZWRpdGlvbi5zb3VyY2VVcmx9L3NlbnNlcy5qc29uYCk7XG4gICAgICBjb25zdCBqc29uID0gYXdhaXQgcmVzLmpzb24oKTtcbiAgICBcbiAgICAgIGNvbnN0IG1kRmlsZXMgPSBwYXJzZVNlbnNlc0ZpbGUoanNvbiwgZWRpdGlvbi5pZCk7XG4gICAgXG4gICAgICBmb3IgKGNvbnN0IG1kIG9mIG1kRmlsZXMpIHtcbiAgICAgICAgY29uc3QgZnVsbFBhdGggPSBub3JtYWxpemVQYXRoKFxuICAgICAgICAgIGAke3RhcmdldFBhdGh9LyR7bWQucGF0aH1gXG4gICAgICAgICk7XG4gICAgICAgIGNvbnN0IGZvbGRlciA9IGZ1bGxQYXRoLnNwbGl0KFwiL1wiKS5zbGljZSgwLCAtMSkuam9pbihcIi9cIik7XG5cbiAgICAgICAgYXdhaXQgZW5zdXJlRm9sZGVyKGFwcCwgZm9sZGVyKTtcbiAgICAgICAgYXdhaXQgYXBwLnZhdWx0LmFkYXB0ZXIud3JpdGUoZnVsbFBhdGgsIG1kLmNvbnRlbnQpO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIGNvbnNvbGUud2FybihcIkZhaWxlZCB0byBpbXBvcnQgc2Vuc2VzLmpzb246XCIsIGUpO1xuICAgIH1cbiAgfVxuXG4gICAgIC8vIFx1RDgzRFx1REQzOSBSVUxFUzogU0tJTExTXG4gIHtcbiAgICB0cnkge1xuXG4gICAgICBjb25zdCByZXMgID0gYXdhaXQgZmV0Y2goYCR7ZWRpdGlvbi5zb3VyY2VVcmx9L3NraWxscy5qc29uYCk7XG4gICAgICBjb25zdCBqc29uID0gYXdhaXQgcmVzLmpzb24oKTtcbiAgICBcbiAgICAgIGNvbnN0IG1kRmlsZXMgPSBwYXJzZVNraWxsc0ZpbGUoanNvbiwgZWRpdGlvbi5pZCk7XG4gICAgXG4gICAgICBmb3IgKGNvbnN0IG1kIG9mIG1kRmlsZXMpIHtcbiAgICAgICAgY29uc3QgZnVsbFBhdGggPSBub3JtYWxpemVQYXRoKFxuICAgICAgICAgIGAke3RhcmdldFBhdGh9LyR7bWQucGF0aH1gXG4gICAgICAgICk7XG4gICAgICAgIGNvbnN0IGZvbGRlciA9IGZ1bGxQYXRoLnNwbGl0KFwiL1wiKS5zbGljZSgwLCAtMSkuam9pbihcIi9cIik7XG5cbiAgICAgICAgYXdhaXQgZW5zdXJlRm9sZGVyKGFwcCwgZm9sZGVyKTtcbiAgICAgICAgYXdhaXQgYXBwLnZhdWx0LmFkYXB0ZXIud3JpdGUoZnVsbFBhdGgsIG1kLmNvbnRlbnQpO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIGNvbnNvbGUud2FybihcIkZhaWxlZCB0byBpbXBvcnQgc2tpbGxzLmpzb246XCIsIGUpO1xuICAgIH1cbiAgfVxuXG4gICAvLyBcdUQ4M0RcdUREMzkgRkVBVFNcbiAge1xuICAgIHRyeSB7XG5cbiAgICAgIGNvbnN0IHJlcyAgPSBhd2FpdCBmZXRjaChgJHtlZGl0aW9uLnNvdXJjZVVybH0vZmVhdHMuanNvbmApO1xuICAgICAgY29uc3QganNvbiA9IGF3YWl0IHJlcy5qc29uKCk7XG4gICAgXG4gICAgICBjb25zdCBtZEZpbGVzID0gcGFyc2VGZWF0c0ZpbGUoanNvbiwgZWRpdGlvbi5pZCk7XG4gICAgXG4gICAgICBmb3IgKGNvbnN0IG1kIG9mIG1kRmlsZXMpIHtcbiAgICAgICAgY29uc3QgZnVsbFBhdGggPSBub3JtYWxpemVQYXRoKFxuICAgICAgICAgIGAke3RhcmdldFBhdGh9LyR7bWQucGF0aH1gXG4gICAgICAgICk7XG4gICAgICAgIGNvbnN0IGZvbGRlciA9IGZ1bGxQYXRoLnNwbGl0KFwiL1wiKS5zbGljZSgwLCAtMSkuam9pbihcIi9cIik7XG5cbiAgICAgICAgYXdhaXQgZW5zdXJlRm9sZGVyKGFwcCwgZm9sZGVyKTtcbiAgICAgICAgYXdhaXQgYXBwLnZhdWx0LmFkYXB0ZXIud3JpdGUoZnVsbFBhdGgsIG1kLmNvbnRlbnQpO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIGNvbnNvbGUud2FybihcIkZhaWxlZCB0byBpbXBvcnQgZmVhdHMuanNvbjpcIiwgZSk7XG4gICAgfVxuICB9XG5cbi8vIFx1RDgzRFx1REQzOSBCQUNLR1JPVU5EU1xue1xuICB0cnkge1xuICAgIGNvbnN0IHJlcyAgPSBhd2FpdCBmZXRjaChgJHtlZGl0aW9uLnNvdXJjZVVybH0vYmFja2dyb3VuZHMuanNvbmApO1xuICAgIGNvbnN0IGpzb24gPSBhd2FpdCByZXMuanNvbigpO1xuXG4gICAgY29uc3QgbWRGaWxlcyA9IHBhcnNlQmFja2dyb3VuZHNGaWxlKGpzb24sIGVkaXRpb24uaWQpO1xuXG4gICAgZm9yIChjb25zdCBtZCBvZiBtZEZpbGVzKSB7XG4gICAgICAvLyBtZC5wYXRoIGlzIFwiUGxheWVyIEJ1aWxkL0JhY2tncm91bmRzLzxOYW1lPi5tZFwiXG4gICAgICBjb25zdCBmdWxsUGF0aCA9IG5vcm1hbGl6ZVBhdGgoYCR7dGFyZ2V0UGF0aH0vJHttZC5wYXRofWApO1xuICAgICAgY29uc3QgZm9sZGVyICAgPSBmdWxsUGF0aC5zcGxpdChcIi9cIikuc2xpY2UoMCwgLTEpLmpvaW4oXCIvXCIpO1xuXG4gICAgICBhd2FpdCBlbnN1cmVGb2xkZXIoYXBwLCBmb2xkZXIpO1xuICAgICAgYXdhaXQgYXBwLnZhdWx0LmFkYXB0ZXIud3JpdGUoZnVsbFBhdGgsIG1kLmNvbnRlbnQpO1xuICAgIH1cbiAgfSBjYXRjaCAoZSkge1xuICAgIGNvbnNvbGUud2FybihcIkZhaWxlZCB0byBpbXBvcnQgYmFja2dyb3VuZHMuanNvbjpcIiwgZSk7XG4gIH1cbn1cbn1cbn0iLCAiLy8gaGVscGVycy9zb3VyY2VNYXAudHNcblxuLy8gTWFwIG9mIDVlIHNvdXJjZSBhYmJyZXZpYXRpb25zIHRvIHRoZWlyIGZ1bGwgdGl0bGVzXG5jb25zdCBTT1VSQ0VfTkFNRV9NQVA6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4gPSB7XG4gIC8vIENvcmUgcnVsZWJvb2tzXG4gIFBIQjogXCJQbGF5ZXIncyBIYW5kYm9va1wiLFxuICBNTTogIFwiTW9uc3RlciBNYW51YWxcIixcbiAgRE1HOiBcIkR1bmdlb24gTWFzdGVyJ3MgR3VpZGVcIixcblxuICAvLyBPZmZpY2lhbCBleHBhbnNpb25zICYgYWR2ZW50dXJlIG1vZHVsZXNcbiAgQ29TOiAgXCJDdXJzZSBvZiBTdHJhaGRcIixcbiAgT290QTogXCJPdXQgb2YgdGhlIEFieXNzXCIsXG4gIFBvdEE6IFwiUHJpbmNlcyBvZiB0aGUgQXBvY2FseXBzZVwiLFxuICBIb3REUTogXCJIb2FyZCBvZiB0aGUgRHJhZ29uIFF1ZWVuXCIsXG4gIFJvVDogIFwiUmlzZSBvZiBUaWFtYXRcIixcbiAgU0tUOiAgXCJTdG9ybSBLaW5nJ3MgVGh1bmRlclwiLFxuICBUZnRZUDpcIlRhbGVzIGZyb20gdGhlIFlhd25pbmcgUG9ydGFsXCIsXG4gIFRvQTogIFwiVG9tYiBvZiBBbm5paGlsYXRpb25cIixcblxuICAvLyBTdXBwbGVtZW50YWwgZ3VpZGVzXG4gIFhHRTogXCJYYW5hdGhhcidzIEd1aWRlIHRvIEV2ZXJ5dGhpbmdcIixcbiAgVkdNOiBcIlZvbG8ncyBHdWlkZSB0byBNb25zdGVyc1wiLFxuICBUQ0U6IFwiVGFzaGEncyBDYXVsZHJvbiBvZiBFdmVyeXRoaW5nXCIsXG4gIEVHVzogXCJFYmVycm9uOiBSaXNpbmcgZnJvbSB0aGUgTGFzdCBXYXJcIixcbiAgRVJMVzpcIkV4cGxvcmVyJ3MgR3VpZGUgdG8gV2lsZGVtb3VudFwiLFxuICBNVEY6IFwiTW9uc3RlcnMgb2YgdGhlIE11bHRpdmVyc2VcIixcbiAgVlJHUjpcIlZhbiBSaWNodGVuJ3MgR3VpZGUgdG8gUmF2ZW5sb2Z0XCIsXG5cbiAgLy8gQWRkaXRpb25hbCBzb3VyY2Vib29rc1xuICBBQUc6ICAgICAgXCJBc3RyYWwgQWR2ZW50dXJlclx1MjAxOXMgR3VpZGVcIixcbiAgQUk6ICAgICAgIFwiQWNxdWlzaXRpb25zIEluY29ycG9yYXRlZFwiLFxuICBBaXRGUkFWRlQ6XCJBZHZlbnR1cmVzIGluIHRoZSBGb3Jnb3R0ZW4gUmVhbG1zOiBBIFZpc3VhbCBGaWVsZCBUZXN0XCIsXG4gIEJNVDogICAgICBcIkJpZyBNb25zdGVyIFRvbWVcIixcbiAgRG9EazogICAgIFwiRHJhZ29uIG9mIERhcmtrZWVwXCIsXG4gIEZURDogICAgICBcIkZpemJhblx1MjAxOXMgVHJlYXN1cnkgb2YgRHJhZ29uc1wiLFxuICBHR1I6ICAgICAgXCJHdWlsZG1hc3Rlclx1MjAxOXMgR3VpZGUgdG8gUmF2bmljYVwiLFxuICBHSExvRTogICAgXCJHaG9zdHMgb2YgdGhlIEhvcml6b246IExpZ2h0IE92ZXIgRWxlbnNhcmlhXCIsXG4gIElEUm90RjogICBcIkljZXdpbmQgRGFsZTogUmltZSBvZiB0aGUgRnJvc3RtYWlkZW5cIixcbiAgTExLOiAgICAgIFwiTG9zdCBMYWJvcmF0b3J5IG9mIEt3YWxpc2hcIixcbiAgU2F0TzogICAgIFwiU2FwcGhpcmUgb2YgVHJ1dGhcIixcbiAgU0NDOiAgICAgIFwiU3RyaXhoYXZlbjogQ3VycmljdWx1bSBvZiBDaGFvc1wiLFxuICBURENTUjogICAgXCJUaGUgRHVuZ2VvbiBDb2FjaFx1MjAxOXMgUnVsZWJvb2tcIixcbiAgSnR0UkM6ICAgIFwiSm91cm5leXMgdGhyb3VnaCB0aGUgUmFkaWFudCBDaXRhZGVsXCIsXG4gIFwiQWl0RlItQVZUXCI6XCJBZHZlbnR1cmVzIGluIHRoZSBGb3Jnb3R0ZW4gUmVhbG1zOiBBIFZlcmRhbnQgVG9tYlwiLFxuICBcIkFpdEZSLUZDRFwiOlwiQWR2ZW50dXJlcyBpbiB0aGUgRm9yZ290dGVuIFJlYWxtczogRnJvbSBDeWFuIERlcHRoc1wiLFxuICBSTVI6ICAgICAgXCJEdW5nZW9ucyBhbmQgRHJhZ29uczogUmljayBhbmQgTW9ydHlcIixcbiAgU0NBRzogICAgIFwiU3dvcmQgQ29hc3QgQWR2ZW50dXJlcidzIEd1aWRlXCIsXG4gIEVFUEM6ICAgICBcIkVsZW1lbnRhbCBFdmlsIFBsYXllcidzIENvbXBhbmlvblwiLFxuICBNT1Q6ICAgICAgXCJNeXRoaWMgT2R5c3NleXMgb2YgVGhlcm9zXCIsXG4gIFdCdFc6ICAgICBcIlRoZSBXaWxkIEJleW9uZCB0aGUgV2l0Y2hsaWdodFwiLFxuICBCR0RJQTogICAgXCJCYWxkdXIncyBHYXRlOiBEZXNjZW50IEludG8gQXZlcm51c1wiLFxuICBUb0ZXOiAgICAgXCJUdXJuIG9mIEZvcnR1bmUncyBXaGVlbFwiLFxuICBDb0E6ICAgICAgXCJDaGFpbnMgb2YgQXNtb2RldXNcIixcbiAgQ1JDb3ROOiAgIFwiQ3JpdGljYWwgUm9sZTogQ2FsbCBvZiB0aGUgTmV0aGVyZGVlcFwiLFxuICBUb0Q6ICAgICAgXCJUeXJhbm55IG9mIERyYWdvbnNcIixcbiAgTVBNTTogICAgIFwiTW9yZGVua2FpbmVuIFByZXNlbnRzOiBNb25zdGVycyBvZiB0aGUgTXVsdGl2ZXJzZVwiLFxuICBMb1g6ICAgICAgXCJMaWdodCBvZiBYYXJ5eGlzXCIsXG4gIFFmdElTOiAgICBcIlF1ZXN0cyBmcm9tIHRoZSBJbmZpbml0ZSBTdGFpcmNhc2VcIixcbiAgV0RIOiAgICAgIFwiV2F0ZXJkZWVwOiBEcmFnb24gSGVpc3RcIixcbiAgV0RNTTogICAgIFwiV2F0ZXJkZWVwOiBEdW5nZW9uIG9mIHRoZSBNYWQgTWFnZVwiLFxuICBQYUJUU086ICAgXCJQaGFuZGVsdmVyIGFuZCBCZWxvdzogVGhlIFNoYXR0ZXJlZCBPYmVsaXNrXCIsXG4gIENNOiAgICAgICBcIkNhbmRsZWtlZXAgTXlzdGVyaWVzXCIsXG4gIEdvUzogICAgICBcIkdob3N0cyBvZiBTYWx0bWFyc2hcIixcbiAgRFNvdERROiAgIFwiRHJhZ29ubGFuY2U6IFNoYWRvdyBvZiB0aGUgRHJhZ29uIFF1ZWVuXCIsXG4gIEtmdEdWOiAgICBcIktleXMgZnJvbSB0aGUgR29sZGVuIFZhdWx0XCIsXG4gIFNEVzogICAgICBcIkVzc2VudGlhbHMgS2l0OiBTbGVlcGluZyBEcmFnb24ncyBXYWtlXCIsXG4gIERvU0k6ICAgICBcIkRyYWdvbnMgb2YgU3Rvcm13cmVjayBJc2xlXCIsXG4gIEdvdFNGOiAgICBcIkdpYW50cyBvZiB0aGUgU3RhciBGb3JnZVwiLFxuICBESVA6ICAgICAgXCJFc3NlbnRpYWxzIEtpdDogRHJhZ29uIG9mIEljZXNwaXJlIFBlYWtcIixcbiAgU0xXOiAgICAgIFwiRXNzZW50aWFscyBLaXQ6IFN0b3JtIExvcmQncyBXcmF0aFwiLFxuICBJTVI6ICAgICAgXCJJbmZlcm5hbCBNYWNoaW5lIFJlYnVpbGRcIixcbiAgVkVvUjogICAgIFwiVmVjbmE6IEV2ZSBvZiBSdWluXCIsXG4gIFBTSTogICAgICBcIlBsYW5lIFNoaWZ0OiBJbm5pc3RyYWRcIixcbiAgQUFUTTogICAgIFwiQWR2ZW50dXJlIEF0bGFzOiBUaGUgTW9ydHVhcnlcIixcbiAgUFNaOiAgICAgIFwiUGxhbmUgU2hpZnQ6IFplbmRpa2FyXCIsXG4gIERDOiAgICAgICBcIkVzc2VudGlhbHMgS2l0OiBEaXZpbmUgQ29udGVudGlvblwiLFxuICBMTW9QOiAgICAgXCJMb3N0IE1pbmUgb2YgUGhhbmRlbHZlclwiLFxuICBSTUJSRTogICAgXCJUaGUgTG9zdCBEdW5nZW9uIG9mIFJpY2tlZG5lc3M6IEJpZyBSaWNrIEVuZXJneVwiLFxuICBIZnRUOiAgICAgXCJIdW50IGZvciB0aGUgVGhlc3NhbGh5ZHJhXCIsXG4gIFBTWDogICAgICBcIlBsYW5lIFNoaWZ0OiBJeGFsYW5cIixcbiAgSEZTdENNOiAgIFwiSGVyb2VzJyBGZWFzdDogU2F2aW5nIHRoZSBDaGlsZHJlbnMgTWVudVwiLFxuICBTakE6ICAgICAgXCJTcGVsbGphbW1lciBBY2FkZW15XCIsXG4gIExLOiAgICAgICBcIkxpZ2h0bmluZyBLZWVwXCIsXG4gIFJ0RzogICAgICBcIlJldHVybiB0byB0aGUgR2xvcnlcIixcbiAgVFRQOiAgICAgIFwiVGhlIFRvcnRsZSBQYWNrYWdlXCIsXG4gIExSOiAgICAgICBcIkxvY2F0aGFoIFJpc2luZ1wiLFxuICBQU0E6ICAgICAgXCJQbGFuZSBTaGlmdDogQW1vbmtoZXRcIixcbiAgT0dBOiAgICAgIFwiT25lIEdydW5nIEFib3ZlXCIsXG4gIFwiTlJILVRMVFwiOiAgXCJOZXJkcyBSZXN0b3JpbmcgSGFybW9ueTogVGhlIExvc3QgVG9tYlwiLFxuICBcIk5SSC1BVFwiOiAgIFwiTmVyZHMgUmVzdG9yaW5nIEhhcm1vbnk6IEFkdmVudHVyZSBUb2dldGhlclwiLFxuICBCR0c6ICAgICAgXCJCaWdieSBQcmVzZW50czogR2xvcnkgb2YgdGhlIEdpYW50c1wiLFxuICBSb1RPUzogICAgXCJUaGUgUmlzZSBvZiBUaWFtYXQgT25saW5lIFN1cHBsZW1lbnRcIixcbiAgWE10UzogICAgIFwiWCBNYXJrcyB0aGUgU3BvdFwiLFxuICBcIkhBVC1MTUlcIjogIFwiSG9ub3IgQW1vbmcgVGhlaXZlczogTGVnZW5kYXJ5IE1hZ2ljIEl0ZW1zXCIsXG4gIERpdExDb1Q6ICBcIkRlc2NlbnQgaW50byB0aGUgTG9zdCBDYXZlcm5zIG9mIFRzb2pjYW50aFwiLFxuICBcIkFpdEZSLUROXCI6IFwiQWR2ZW50dXJlcyBpbiB0aGUgRm9yZ290dGVuIFJlYWxtczogRGVlcGVzdCBOaWdodFwiLFxuICBcIkFpdEZSLVRIUFwiOlwiQWR2ZW50dXJlcyBpbiB0aGUgRm9yZ290dGVuIFJlYWxtczogVGhlIEhpZGRlbiBQYWdlc1wiLFxuICBCQU06ICAgICAgXCJCb28ncyBBc3RyYWwgTWVuYWdlcmllXCIsXG4gIEFaZnlUOiAgICBcIkEgWmliIGZvciBZb3VyIFRob3VndHNcIixcbiAgTUNWMkRDOiAgIFwiTW9uc3Ryb3VzIENvbXBlbmRpdW0gVm9sdW1lIDI6IERyYWdvbmxhbmNlIENyZWF0dXJlc1wiLFxuICBQU0s6ICAgICAgXCJQbGFuZSBTaGlmdDogS2FsYWRlc2hcIixcbiAgUFNEOiAgICAgIFwiUGxhbmUgU2hpZnQ6IERvbWluYXJpYVwiLFxuICBBV006ICAgICAgXCJBZHZlbnR1cmUgd2l0aCBNdWtcIixcbiAgVUFUaGVNeXN0aWNDbGFzczogXCJVbmVhcnRoZWQgQXJjYW5hOiBUaGUgTXlzdGljIENsYXNzXCIsXG4gIEFMQ3Vyc2VPZlN0cmFoZDogXCJBZHZlbnR1cmVycyBMZWFndWU6IEN1cnNlIG9mIFN0cmFoZFwiLFxuICBBTEVsZW1lbnRhbEV2aWw6IFwiQWR2ZW50dXJlcnMgTGVhZ3VlOiBFbGVtZW50YWwgRXZpbFwiLFxuICBBTFJhZ2VPZkRlbW9uczogIFwiQWR2ZW50dXJlcnMgTGVhZ3VlOiBSYWdlIG9mIERlbW9uc1wiXG59O1xuXG4vKipcbiAqIFJldHVybnMgdGhlIGZ1bGwgc291cmNlIG5hbWUgZm9yIGEgZ2l2ZW4gYWJicmV2aWF0aW9uLlxuICogT3B0aW9uYWxseSBhcHBlbmRzIHllYXIgZm9yIFBIQiB2YXJpYW50cy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldEZ1bGxTb3VyY2VOYW1lKGFiYnJldjogc3RyaW5nLCBlZGl0aW9uSWQ/OiBzdHJpbmcpOiBzdHJpbmcge1xuICBsZXQgbmFtZSA9IFNPVVJDRV9OQU1FX01BUFthYmJyZXZdID8/IGFiYnJldjtcblxuICAvLyBBcHBlbmQgeWVhciBmb3IgUEhCIGlmIHRoZSBlZGl0aW9uIGNvbnRleHQgaXMga25vd25cbiAgaWYgKGFiYnJldiA9PT0gXCJQSEJcIikge1xuICAgIGlmIChlZGl0aW9uSWQ/LmluY2x1ZGVzKFwiMjAxNFwiKSkgbmFtZSArPSBcIiAoMjAxNClcIjtcbiAgICBlbHNlIGlmIChlZGl0aW9uSWQ/LmluY2x1ZGVzKFwiMjAyNVwiKSkgbmFtZSArPSBcIiAoMjAyNSlcIjtcbiAgfVxuXG4gIHJldHVybiBuYW1lO1xufVxuIiwgIi8vIHBhcnNlcnMvNWUtanNvbi9oZWxwZXJzL3RhZ1JlcGxhY2VyLnRzXG5cbmV4cG9ydCBmdW5jdGlvbiByZXBsYWNlNWVUYWdzKGlucHV0OiB1bmtub3duKTogc3RyaW5nIHtcbiAgLy8gMSkgVHVybiBhcnJheXMgaW50byBzcGFjZS1qb2luZWQgc3RyaW5nc1xuICAvLyAyKSBMZWF2ZSBzdHJpbmdzIGFsb25lXG4gIC8vIDMpIENvZXJjZSBldmVyeXRoaW5nIGVsc2UgdG8gc3RyaW5nIChvciBlbXB0eSlcbiAgbGV0IHRleHQ6IHN0cmluZztcbiAgaWYgKEFycmF5LmlzQXJyYXkoaW5wdXQpKSB7XG4gICAgdGV4dCA9IGlucHV0LmpvaW4oXCIgXCIpO1xuICB9IGVsc2UgaWYgKHR5cGVvZiBpbnB1dCA9PT0gXCJzdHJpbmdcIikge1xuICAgIHRleHQgPSBpbnB1dDtcbiAgfSBlbHNlIHtcbiAgICB0ZXh0ID0gU3RyaW5nKGlucHV0ID8/IFwiXCIpO1xuICB9XG5cbiAgLy8gbm93IHJ1biBhbGwgeW91ciBALXRhZyByZXBsYWNlbWVudHMgb24gdGhhdCB0ZXh0XG4gIHJldHVybiB0ZXh0XG4gICAgLnJlcGxhY2UoL1xce0Aoc3BlbGx8aXRlbXxjcmVhdHVyZXxyYWNlKSAoW158fV0rKSg/OlxcfFtefV0rKT9cXH0vZywgKF8sIF9fLCBuYW1lKSA9PlxuICAgICAgYFtbJHtjYXBpdGFsaXplRWFjaChuYW1lKX1dXWBcbiAgICApXG4gICAgLnJlcGxhY2UoL1xce0AoY29uZGl0aW9ufHN0YXR1c3xhY3Rpb258c2tpbGwpIChbXnx9XSspKD86XFx8W159XSspP1xcfS9nLCAoXywgdGFnLCBuYW1lKSA9PlxuICAgICAgYFtbJHtjYXBpdGFsaXplKHRhZyl9cyMke25hbWV9fCR7Y2FwaXRhbGl6ZUVhY2gobmFtZSl9XV1gXG4gICAgKVxuICAgIC5yZXBsYWNlKC9cXHtAY2xhc3NGZWF0dXJlIChbXnx9XSspXFx8KFtefH1dKykoPzpcXHxbXn1dKyk/XFx9L2csIChfLCBmZWF0dXJlLCBjbHMpID0+XG4gICAgICBgW1ske2Nsc30jJHtmZWF0dXJlfV1dYFxuICAgIClcbiAgICAucmVwbGFjZSgvXFx7QChib29rfGZpbHRlcikgKFtefH1dKykoPzpcXHxbXn1dKyk/XFx9L2csIChfLCBfXywgdHh0KSA9PiB0eHQpXG4gICAgLnJlcGxhY2UoL1xce0Bub3RlIChbXn1dKylcXH0vZywgKF8sIG5vdGUpID0+IGAqJHtub3RlfSpgKVxuICAgIC5yZXBsYWNlKC9cXHtAKGRhbWFnZXxkaWNlfGRjfGhpdHxzZW5zZSkgKFtefV0rKVxcfS9nLCAoXywgX18sIHZhbHVlKSA9PiB2YWx1ZSlcbiAgICAucmVwbGFjZSgvXFx7QGNoYW5jZSAoW158fV0rKSg/OlxcfFtefV0rKT9cXH0vZywgKF8sIHZhbHVlKSA9PiBgJHt2YWx1ZX0lYClcbiAgICAucmVwbGFjZSgvXFx7QHF1aWNrcmVmIChbXnx9XSspKD86XFx8W158XSpcXHxbXn1dKik/XFx9L2csIChfLCB0ZXJtKSA9PiB7XG4gICAgICBjb25zdCBrbm93biA9IFtcbiAgICAgICAgXCJkaWZmaWN1bHQgdGVycmFpblwiLCBcInRvdGFsIGNvdmVyXCIsIFwiaGFsZiBjb3ZlclwiLCBcInRocmVlLXF1YXJ0ZXJzIGNvdmVyXCIsXG4gICAgICAgIFwiaGVhdmlseSBvYnNjdXJlZFwiLCBcImxpZ2h0bHkgb2JzY3VyZWRcIlxuICAgICAgXTtcbiAgICAgIHJldHVybiBrbm93bi5pbmNsdWRlcyh0ZXJtLnRvTG93ZXJDYXNlKCkpXG4gICAgICAgID8gYFtbUnVsZXMjJHtjYXBpdGFsaXplRWFjaCh0ZXJtKX1dXWBcbiAgICAgICAgOiB0ZXJtO1xuICAgIH0pXG4gICAgLnJlcGxhY2UoL1xce1xcQDVldG9vbHNcXHMrKFtefH1dKylcXHxbXn1dK1xcfS9nLCAnJDEnKVxuICAgIC5yZXBsYWNlKC9cXHtAcmVjaGFyZ2VcXHMqKFtefV0rKVxcfS9nLCAoXywgbnVtKSA9PiBgKHJlY2hhcmdlOiAke251bS50cmltKCl9KWApXG4gICAgLnJlcGxhY2UoL1xce0Aoc2NhbGVkaWNlfHNjYWxlZGFtYWdlKVtefV0qXFx8KFtefH1dKylcXH0vZywgKF8sIF9fLCB2YWx1ZSkgPT4gdmFsdWUpXG4gICAgLnJlcGxhY2UoL1xce0BkMjBbXn1dKlxcfS9nLCBcIlwiKVxuICAgIC5yZXBsYWNlKC9cXHtAW159XStcXH0vZywgXCJcIik7XG59XG5cbmZ1bmN0aW9uIGNhcGl0YWxpemUoc3RyOiBzdHJpbmcpOiBzdHJpbmcge1xuICByZXR1cm4gc3RyLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgc3RyLnNsaWNlKDEpLnRvTG93ZXJDYXNlKCk7XG59XG5cbmZ1bmN0aW9uIGNhcGl0YWxpemVFYWNoKHN0cjogc3RyaW5nKTogc3RyaW5nIHtcbiAgcmV0dXJuIHN0ci5zcGxpdChcIiBcIikubWFwKGNhcGl0YWxpemUpLmpvaW4oXCIgXCIpO1xufVxuIiwgImltcG9ydCB7IHJlcGxhY2U1ZVRhZ3MgfSBmcm9tIFwiLi90YWdSZXBsYWNlclwiO1xuXG5leHBvcnQgZnVuY3Rpb24gcmVuZGVyTWFya2Rvd25UYWJsZShlbnRyeTogYW55KTogc3RyaW5nIHtcbiAgaWYgKGVudHJ5LnR5cGUgIT09IFwidGFibGVcIiB8fCAhQXJyYXkuaXNBcnJheShlbnRyeS5yb3dzKSkgcmV0dXJuIFwiXCI7XG5cbiAgY29uc3QgY2FwdGlvbiA9IGVudHJ5LmNhcHRpb24gPyBgIyMjIyMgJHtlbnRyeS5jYXB0aW9ufVxcbmAgOiBcIlwiO1xuXG4gIGNvbnN0IGhlYWRlcnMgPSAoZW50cnkuY29sTGFiZWxzID8/IFtdKVxuICAgIC5tYXAoKGg6IHN0cmluZykgPT4gcmVwbGFjZTVlVGFncyhoLnRyaW0oKSkpOyAvLyBcdTI3MDUgdGFnIHJlcGxhY2Ugb24gaGVhZGVyc1xuXG4gIGNvbnN0IGhlYWRlclJvdyA9IGB8ICR7aGVhZGVycy5qb2luKFwiIHwgXCIpfSB8YDtcbiAgY29uc3QgZGl2aWRlclJvdyA9IGB8ICR7aGVhZGVycy5tYXAoKCkgPT4gXCI6LS1cIikuam9pbihcIiB8IFwiKX0gfGA7XG5cbiAgY29uc3QgYm9keVJvd3MgPSBlbnRyeS5yb3dzLm1hcCgocm93OiBhbnlbXSkgPT4ge1xuICAgIGNvbnN0IGNlbGxzID0gcm93Lm1hcCgoY2VsbCkgPT4ge1xuICAgICAgaWYgKHR5cGVvZiBjZWxsID09PSBcInN0cmluZ1wiKSByZXR1cm4gcmVwbGFjZTVlVGFncyhjZWxsKTsgLy8gXHUyNzA1IHRhZyByZXBsYWNlIHN0cmluZ3NcblxuICAgICAgaWYgKHR5cGVvZiBjZWxsID09PSBcIm9iamVjdFwiKSB7XG4gICAgICAgIGlmIChjZWxsLnJvbGw/LmV4YWN0ICE9PSB1bmRlZmluZWQpIHJldHVybiBgJHtjZWxsLnJvbGwuZXhhY3R9YDtcbiAgICAgICAgaWYgKGNlbGwucm9sbD8ubWluICE9PSB1bmRlZmluZWQgJiYgY2VsbC5yb2xsPy5tYXggIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgIHJldHVybiBgJHtjZWxsLnJvbGwubWlufVx1MjAxMyR7Y2VsbC5yb2xsLm1heH1gO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXBsYWNlNWVUYWdzKEpTT04uc3RyaW5naWZ5KGNlbGwpKTsgLy8gZmFsbGJhY2sgZm9yIHVua25vd24gc2hhcGVzXG4gICAgICB9XG5cbiAgICAgIHJldHVybiByZXBsYWNlNWVUYWdzKFN0cmluZyhjZWxsKSk7XG4gICAgfSk7XG5cbiAgICByZXR1cm4gYHwgJHtjZWxscy5qb2luKFwiIHwgXCIpfSB8YDtcbiAgfSk7XG5cbiAgcmV0dXJuIGAke2NhcHRpb259JHtoZWFkZXJSb3d9XFxuJHtkaXZpZGVyUm93fVxcbiR7Ym9keVJvd3Muam9pbihcIlxcblwiKX1gO1xufVxuIiwgIi8vIDVlIDIwMjUgZm9ybWF0RW50cnkudHNcbmltcG9ydCB7IHJlcGxhY2U1ZVRhZ3MgfSBmcm9tIFwiLi90YWdSZXBsYWNlclwiO1xuaW1wb3J0IHsgcmVuZGVyTWFya2Rvd25UYWJsZSB9IGZyb20gXCIuL21hcmtkb3duVGFibGVcIjtcblxuZnVuY3Rpb24gaXNUeXBlZEVudHJ5KHg6IGFueSk6IHggaXMgeyB0eXBlOiBzdHJpbmc7IFtrOiBzdHJpbmddOiBhbnkgfSB7XG4gIHJldHVybiAoXG4gICAgeCAhPSBudWxsICYmXG4gICAgdHlwZW9mIHggPT09IFwib2JqZWN0XCIgJiZcbiAgICAhQXJyYXkuaXNBcnJheSh4KSAmJlxuICAgIHR5cGVvZiAoeCBhcyBhbnkpLnR5cGUgPT09IFwic3RyaW5nXCJcbiAgKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGZvcm1hdEVudHJ5KGVudHJ5OiBhbnkpOiBzdHJpbmcge1xuICBpZiAodHlwZW9mIGVudHJ5ID09PSBcInN0cmluZ1wiKSB7XG4gICAgY29uc3QgY2xlYW5lZCA9IGVudHJ5LnRyaW0oKTtcbiAgICBpZiAoIWNsZWFuZWQgfHwgY2xlYW5lZCA9PT0gXCJ9XCIpIHJldHVybiBcIlwiO1xuICAgIHJldHVybiByZXBsYWNlNWVUYWdzKGNsZWFuZWQpO1xuICB9XG5cbiAgaWYgKGlzVHlwZWRFbnRyeShlbnRyeSkgJiYgZW50cnkudHlwZSA9PT0gXCJlbnRyaWVzXCIgJiYgQXJyYXkuaXNBcnJheShlbnRyeS5lbnRyaWVzKSkge1xuICAgIGNvbnN0IGJvZHkgPSBlbnRyeS5lbnRyaWVzXG4gICAgICAubWFwKGZvcm1hdEVudHJ5KVxuICAgICAgLmZpbHRlcigoc3RyOiBzdHJpbmcpID0+IHN0ci50cmltKCkubGVuZ3RoID4gMClcbiAgICAgIC5qb2luKFwiXFxuXFxuXCIpO1xuXG4gICAgcmV0dXJuIGVudHJ5Lm5hbWVcbiAgICAgID8gYCMjIyMjICR7ZW50cnkubmFtZX1cXG4ke2JvZHl9YFxuICAgICAgOiBib2R5O1xuICB9XG5cbiAgaWYgKGlzVHlwZWRFbnRyeShlbnRyeSkgJiYgZW50cnkudHlwZSA9PT0gXCJsaXN0XCIgJiYgQXJyYXkuaXNBcnJheShlbnRyeS5pdGVtcykpIHtcbiAgICByZXR1cm4gZW50cnkuaXRlbXNcbiAgICAgIC5tYXAoKGk6IGFueSkgPT4gYC0gJHtyZXBsYWNlNWVUYWdzKHR5cGVvZiBpID09PSBcInN0cmluZ1wiID8gaSA6IEpTT04uc3RyaW5naWZ5KGkpKX1gKVxuICAgICAgLmpvaW4oXCJcXG5cIik7XG4gIH1cblxuICBpZiAoaXNUeXBlZEVudHJ5KGVudHJ5KSAmJiBlbnRyeS50eXBlID09PSBcInRhYmxlXCIgJiYgQXJyYXkuaXNBcnJheShlbnRyeS5yb3dzKSkge1xuICAgIHJldHVybiByZW5kZXJNYXJrZG93blRhYmxlKGVudHJ5KTtcbiAgfVxuXG4gIGlmIChpc1R5cGVkRW50cnkoZW50cnkpICYmIGVudHJ5LnR5cGUgPT09IFwicXVvdGVcIiAmJiBBcnJheS5pc0FycmF5KGVudHJ5LmVudHJpZXMpKSB7XG4gICAgY29uc3QgcXVvdGUgPSBlbnRyeS5lbnRyaWVzLm1hcChmb3JtYXRFbnRyeSkuam9pbihcIiBcIikudHJpbSgpO1xuICAgIGNvbnN0IGF1dGhvciA9IGVudHJ5LmJ5ID8gYCBcdTIwMTQgJHtlbnRyeS5ieX1gIDogXCJcIjtcbiAgICByZXR1cm4gYCpcIiR7cXVvdGV9JHthdXRob3J9XCIqYDtcbiAgfVxuXG4gIGlmIChpc1R5cGVkRW50cnkoZW50cnkpICYmIGVudHJ5LnR5cGUgPT09IFwiaW5zZXRcIiAmJiBBcnJheS5pc0FycmF5KGVudHJ5LmVudHJpZXMpKSB7XG4gICAgY29uc3QgaW5zZXQgPSBlbnRyeS5lbnRyaWVzLm1hcChmb3JtYXRFbnRyeSkuam9pbihcIlxcblwiKS50cmltKCk7XG4gICAgcmV0dXJuIGA+ICR7aW5zZXQucmVwbGFjZSgvXFxuL2csIFwiXFxuPiBcIil9YDtcbiAgfVxuXG4gIGlmIChpc1R5cGVkRW50cnkoZW50cnkpICYmIGVudHJ5LnR5cGUgPT09IFwicmVmQ2xhc3NGZWF0dXJlXCIgJiYgdHlwZW9mIGVudHJ5LmNsYXNzRmVhdHVyZSA9PT0gXCJzdHJpbmdcIikge1xuICAgIGNvbnN0IFtuYW1lXSA9IGVudHJ5LmNsYXNzRmVhdHVyZS5zcGxpdChcInxcIik7XG4gICAgY29uc3QgYW5jaG9yID0gbmFtZVxuICAgICAgLnJlcGxhY2UoL1teXFx3XFxzLV0vZywgXCJcIilcbiAgICAgIC5yZXBsYWNlKC9cXHMrL2csIFwiLVwiKVxuICAgICAgLnRvTG93ZXJDYXNlKCk7XG4gICAgcmV0dXJuIGBbWyMke2FuY2hvcn1dXWA7XG4gIH1cblxuICAvLyBJZiBpdCdzIGFuIHVua25vd24gb2JqZWN0LCBza2lwIGl0IHNhZmVseVxuICByZXR1cm4gXCJcIjtcbn1cbiIsICIvLyBwYXJzZXJzLzVlLWpzb24vYmVzdGlhcnkudHNcblxuaW1wb3J0IHR5cGUgeyBQYXJzZWRNYXJrZG93bkZpbGUgfSBmcm9tIFwic3JjL3R5cGVzXCI7XG5pbXBvcnQgeyBnZXRGdWxsU291cmNlTmFtZSB9IGZyb20gXCIuL2hlbHBlcnMvc291cmNlTWFwXCI7XG5pbXBvcnQgeyByZXBsYWNlNWVUYWdzIH0gZnJvbSBcIi4vaGVscGVycy90YWdSZXBsYWNlclwiO1xuaW1wb3J0IHsgcmVuZGVyTWFya2Rvd25UYWJsZSB9IGZyb20gXCIuL2hlbHBlcnMvbWFya2Rvd25UYWJsZVwiO1xuaW1wb3J0IHsgYnVpbGRGTSwgc2VyaWFsaXplRnJvbnRtYXR0ZXIsIEJFU1RJQVJZX01FVEFfREVGUywgdW5pZmllZFNraWxscywgRk1fRklFTERTIH0gZnJvbSBcIi4vaGVscGVycy9mcm9udG1hdHRlclwiO1xuXG5jb25zdCBza2lwcGVkTW9uc3RlcnM6IHN0cmluZ1tdID0gW107XG5cbi8vIFNpemUgYWJicmV2aWF0aW9ucyBtYXBwaW5nXG5leHBvcnQgXG5jb25zdCBTSVpFX01BUDogUmVjb3JkPHN0cmluZywgc3RyaW5nPiA9IHtcbiAgVDogXCJUaW55XCIsXG4gIFM6IFwiU21hbGxcIixcbiAgTTogXCJNZWRpdW1cIixcbiAgTDogXCJMYXJnZVwiLFxuICBIOiBcIkh1Z2VcIixcbiAgRzogXCJHYXJnYW50dWFuXCJcbn07XG5cbi8vIEFsaWdubWVudCBhYmJyZXZpYXRpb25zIG1hcHBpbmdcbmNvbnN0IEFMSUdOTUVOVF9NQVA6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4gPSB7XG4gIEw6IFwiTGF3ZnVsXCIsXG4gIE46IFwiTmV1dHJhbFwiLFxuICBDOiBcIkNoYW90aWNcIixcbiAgRzogXCJHb29kXCIsXG4gIEU6IFwiRXZpbFwiLFxuICBVOiBcIlVuYWxpZ25lZFwiXG59O1xuXG4vLyBIZWxwZXIgdG8gY2FwaXRhbGl6ZSBmaXJzdCBsZXR0ZXIgb2YgYSBzdHJpbmdcbmZ1bmN0aW9uIGNhcGl0YWxpemVGaXJzdChzdHI6IHVua25vd24pOiBzdHJpbmcge1xuICBjb25zdCBzID0gU3RyaW5nKHN0ciB8fCBcIlwiKTtcbiAgcmV0dXJuIHMuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBzLnNsaWNlKDEpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZm9ybWF0U2l6ZUFiYnJldihhYmJyZXY6IHN0cmluZyk6IHN0cmluZyB7XG4gIHJldHVybiBTSVpFX01BUFthYmJyZXZdIHx8IGFiYnJldjtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGZvcm1hdEFsaWdubWVudEFiYnJldihhYmJyZXY6IHN0cmluZyk6IHN0cmluZyB7XG4gIHJldHVybiBhYmJyZXZcbiAgICAudHJpbSgpXG4gICAgLnNwbGl0KC9cXHMrLylcbiAgICAubWFwKGxldHRlciA9PiBBTElHTk1FTlRfTUFQW2xldHRlcl0gfHwgbGV0dGVyKVxuICAgIC5qb2luKFwiIFwiKTtcbn1cblxuY29uc3QgUkFXX05QQ1M6IHN0cmluZ1tdID0gW1xuICBcIkFianVyZXJcIiwgXCJBY29seXRlXCIsIFwiQXBwcmVudGljZSBXaXphcmRcIiwgXCJBcmNoZHJ1aWRcIiwgXCJBcmNoZXJcIiwgXCJBcmNobWFnZVwiLCBcIkFzc2Fzc2luXCIsXG4gIFwiQmFuZGl0XCIsIFwiQmFuZGl0IENhcHRhaW5cIiwgXCJCYXJkXCIsIFwiQmVyc2Vya2VyXCIsIFwiQmxhY2tndWFyZFwiLCBcIkNoYW1waW9uXCIsIFwiQ29tbW9uZXJcIixcbiAgXCJDb25qdXJlclwiLCBcIkN1bHQgRmFuYXRpY1wiLCBcIkN1bHRpc3RcIiwgXCJEaXZpbmVyXCIsIFwiRHJ1aWQgKE5QQylcIiwgXCJEcnVpZCBOUENcIiwgXCJFbmNoYW50ZXJcIixcbiAgXCJFdm9rZXJcIiwgXCJHbGFkaWF0b3JcIiwgXCJHdWFyZFwiLCBcIklsbHVzaW9uaXN0XCIsIFwiS25pZ2h0XCIsIFwiS3Jha2VuIFByaWVzdFwiLCBcIk1hZ2VcIixcbiAgXCJNYXJ0aWFsIEFydHMgQWRlcHRcIiwgXCJNYXN0ZXIgVGhpZWZcIiwgXCJOZWNyb21hbmNlclwiLCBcIk5vYmxlXCIsIFwiUHJpZXN0XCIsIFwiU2NvdXRcIiwgXCJTcHlcIixcbiAgXCJTd2FzaGJ1Y2tsZXJcIiwgXCJUaHVnXCIsIFwiVHJhbnNtdXRlclwiLCBcIlRyaWJhbCBXYXJyaW9yXCIsIFwiVmV0ZXJhblwiLCBcIldhciBQcmllc3RcIixcbiAgXCJXYXJsb2NrIG9mIHRoZSBBcmNoZmV5XCIsIFwiV2FybG9jayBvZiB0aGUgRmllbmRcIiwgXCJXYXJsb2NrIG9mIHRoZSBHcmVhdCBPbGQgT25lXCIsIFwiV2FybG9yZFwiXG5dO1xuY29uc3QgTk9STUFMSVpFRF9OUENfTkFNRVMgPSBuZXcgU2V0KFJBV19OUENTLm1hcChuID0+IG5vcm1hbGl6ZU5hbWUobikpKTtcblxuZnVuY3Rpb24gbm9ybWFsaXplTmFtZShuYW1lOiBzdHJpbmcpOiBzdHJpbmcge1xuICByZXR1cm4gbmFtZS5yZXBsYWNlKC9cXHMrL2csIFwiIFwiKS50cmltKCkudG9Mb3dlckNhc2UoKTtcbn1cblxuZnVuY3Rpb24gY2F0ZWdvcml6ZUNyZWF0dXJlKG1vbnN0ZXI6IGFueSk6IHN0cmluZyB7XG4gIGNvbnN0IHR5cGVWYWx1ZSA9IG1vbnN0ZXIudHlwZTtcbiAgY29uc3QgbmFtZSA9IG1vbnN0ZXIubmFtZTtcbiAgY29uc3QgdCA9IHR5cGVvZiB0eXBlVmFsdWUgPT09IFwic3RyaW5nXCJcbiAgICA/IHR5cGVWYWx1ZS50b0xvd2VyQ2FzZSgpXG4gICAgOiB0eXBlVmFsdWU/LnR5cGU/LnRvTG93ZXJDYXNlKCkgfHwgU3RyaW5nKHR5cGVWYWx1ZSkudG9Mb3dlckNhc2UoKTtcblxuICBjb25zdCBub3JtYWxpemVkTmFtZSA9IG5vcm1hbGl6ZU5hbWUobmFtZSk7XG5cbiAgaWYgKG1vbnN0ZXIuaXNOcGMgfHwgbW9uc3Rlci5pc05hbWVkQ3JlYXR1cmUpIHJldHVybiBcIlN0b3J5IE5QQ3NcIjtcbiAgaWYgKHQgPT09IFwiYmVhc3RcIikgcmV0dXJuIFwiQmVhc3RzXCI7XG4gIGlmICh0ID09PSBcImh1bWFub2lkXCIgJiYgTk9STUFMSVpFRF9OUENfTkFNRVMuaGFzKG5vcm1hbGl6ZWROYW1lKSkgcmV0dXJuIFwiTm9uLUJlYXN0c1wiO1xuICBpZiAodCA9PT0gXCJodW1hbm9pZFwiKSByZXR1cm4gXCJNb25zdGVyc1wiO1xuICByZXR1cm4gXCJNb25zdGVyc1wiO1xufVxuXG5mdW5jdGlvbiByZW5kZXJBYmlsaXRpZXNUYWJsZShzdHI6IG51bWJlciwgZGV4OiBudW1iZXIsIGNvbjogbnVtYmVyLCBpbnQ6IG51bWJlciwgd2lzOiBudW1iZXIsIGNoYTogbnVtYmVyKTogc3RyaW5nIHtcbiAgcmV0dXJuIFtcbiAgICBgfCBTVFIgfCBERVggfCBDT04gfCBJTlQgfCBXSVMgfCBDSEEgfGAsXG4gICAgYHwgLS0tIHwgLS0tIHwgLS0tIHwgLS0tIHwgLS0tIHwgLS0tIHxgLFxuICAgIGB8ICR7c3RyfSB8ICR7ZGV4fSB8ICR7Y29ufSB8ICR7aW50fSB8ICR7d2lzfSB8ICR7Y2hhfSB8YFxuICBdLmpvaW4oXCJcXG5cIik7XG59XG5cbmZ1bmN0aW9uIHJlbmRlckVudHJ5KGVudHJ5OiBhbnkpOiBzdHJpbmcge1xuICBjb25zdCBuYW1lID0gZW50cnkubmFtZTtcbiAgbGV0IGRlc2NyaXB0aW9uczogc3RyaW5nW10gPSBbXTtcbiAgaWYgKEFycmF5LmlzQXJyYXkoZW50cnkuZW50cmllcykpIHtcbiAgICBkZXNjcmlwdGlvbnMgPSBlbnRyeS5lbnRyaWVzO1xuICB9IGVsc2UgaWYgKHR5cGVvZiBlbnRyeS5lbnRyaWVzID09PSBcInN0cmluZ1wiKSB7XG4gICAgZGVzY3JpcHRpb25zID0gW2VudHJ5LmVudHJpZXNdO1xuICB9IGVsc2UgaWYgKEFycmF5LmlzQXJyYXkoZW50cnkuZGVzYykpIHtcbiAgICBkZXNjcmlwdGlvbnMgPSBlbnRyeS5kZXNjO1xuICB9IGVsc2UgaWYgKHR5cGVvZiBlbnRyeS5kZXNjID09PSBcInN0cmluZ1wiKSB7XG4gICAgZGVzY3JpcHRpb25zID0gW2VudHJ5LmRlc2NdO1xuICB9XG4gIGNvbnN0IHJhdyA9IGRlc2NyaXB0aW9ucy5qb2luKFwiIFwiKTtcbiAgY29uc3QgZGVzYyA9IHJlcGxhY2U1ZVRhZ3MocmF3KTtcbiAgcmV0dXJuIGAqKioke25hbWV9LioqKiAke2Rlc2N9YDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlQmVzdGlhcnlGaWxlKGpzb246IGFueSwgZWRpdGlvbklkOiBzdHJpbmcpOiBQYXJzZWRNYXJrZG93bkZpbGVbXSB7XG4gICAgaWYgKCFqc29uLm1vbnN0ZXIpIHJldHVybiBbXTtcbiAgICAoanNvbiBhcyBhbnkpLl9lZGl0aW9uSWQgPSBlZGl0aW9uSWQ7XG4gIFxuICAgIC8vIDEpIEZpbHRlciBvdXQgXHUyMDFDcmVmZXJlbmNlXHUyMDFEIGVudHJpZXMgd2l0aCBubyBBQyBvciBIUFxuICAgIGNvbnN0IHZhbGlkTW9uc3RlcnMgPSBqc29uLm1vbnN0ZXIuZmlsdGVyKChtOiBhbnkpID0+IHtcbiAgICBjb25zdCBhY1ZhbCA9IEFycmF5LmlzQXJyYXkobS5hYylcbiAgICAgID8gbS5hY1swXT8uYWMgPz8gbS5hY1swXVxuICAgICAgOiB0eXBlb2YgbS5hYyA9PT0gXCJvYmplY3RcIlxuICAgICAgICA/IG0uYWM/LmFjID8/IG51bGxcbiAgICAgICAgOiBtLmFjO1xuXG4gICAgY29uc3QgaHBWYWwgPSB0eXBlb2YgbS5ocCA9PT0gXCJvYmplY3RcIlxuICAgICAgPyBtLmhwPy5hdmVyYWdlID8/IG0uaHA/LmhwID8/IG51bGxcbiAgICAgIDogbS5ocDtcbiAgICAgIHJldHVybiBhY1ZhbCAhPSBudWxsICYmIGhwVmFsICE9IG51bGwgJiYgIWlzTmFOKE51bWJlcihhY1ZhbCkpICYmICFpc05hTihOdW1iZXIoaHBWYWwpKTtcbiAgICB9KTtcblxuICAgIGNvbnN0IGFsbE5hbWVzID0gbmV3IFNldChqc29uLm1vbnN0ZXIubWFwKChtOiBhbnkpID0+IG0ubmFtZSkpO1xuY29uc3QgdmFsaWROYW1lcyA9IG5ldyBTZXQodmFsaWRNb25zdGVycy5tYXAoKG06IGFueSkgPT4gbS5uYW1lKSk7XG5jb25zdCBtaXNzaW5nID0gWy4uLmFsbE5hbWVzXS5maWx0ZXIobmFtZSA9PiAhdmFsaWROYW1lcy5oYXMobmFtZSkpO1xuXG4gIFxuICAgIHJldHVybiB2YWxpZE1vbnN0ZXJzLm1hcCgobW9uc3RlcjogYW55KSA9PiB7XG4gICAgICBjb25zdCBuYW1lICAgICA9IG1vbnN0ZXIubmFtZSBhcyBzdHJpbmc7XG4gICAgICBjb25zdCBzYWZlTmFtZSA9IG5hbWUucmVwbGFjZSgvXFwvL2csIFwiLVwiKTtcbiAgXG4gICAgICAvLyBcdTIwMTQgUmF3IGZpZWxkcyAmIGZvcm1hdHRpbmcgXHUyMDE0XG4gICAgICBjb25zdCByYXdTaXplICAgICAgPSBtb25zdGVyLnNpemUgfHwgXCJNXCI7XG4gICAgICBjb25zdCByYXdBbGlnbm1lbnQgPSBBcnJheS5pc0FycmF5KG1vbnN0ZXIuYWxpZ25tZW50KVxuICAgICAgICA/IG1vbnN0ZXIuYWxpZ25tZW50LmpvaW4oXCIgXCIpXG4gICAgICAgIDogbW9uc3Rlci5hbGlnbm1lbnQgfHwgXCJOXCI7XG4gICAgbGV0IHJhd1R5cGUgPSBcIlVua25vd25cIjtcblxuICAgIGlmICh0eXBlb2YgbW9uc3Rlci50eXBlID09PSBcInN0cmluZ1wiKSB7XG4gICAgICByYXdUeXBlID0gY2FwaXRhbGl6ZUZpcnN0KG1vbnN0ZXIudHlwZSk7XG4gICAgfSBlbHNlIGlmIChtb25zdGVyLnR5cGU/LnR5cGUpIHtcbiAgICAgIGNvbnN0IGJhc2UgPSBjYXBpdGFsaXplRmlyc3QobW9uc3Rlci50eXBlLnR5cGUpO1xuICAgICAgY29uc3QgdGFncyA9IG1vbnN0ZXIudHlwZS50YWdzPy5sZW5ndGggPyBgICgke21vbnN0ZXIudHlwZS50YWdzLm1hcChjYXBpdGFsaXplRmlyc3QpLmpvaW4oXCIsIFwiKX0pYCA6IFwiXCI7XG4gICAgICByYXdUeXBlID0gYCR7YmFzZX0ke3RhZ3N9YDtcbiAgICB9XG5cbiAgICBtb25zdGVyLl9wYXJzZWRUeXBlID0gcmF3VHlwZTtcbiAgICAgIFxuICAgIC8vIFx1MjAxNCBBQywgSFAsIENSIFx1MjAxNFxuICAgIGNvbnN0IGFjID0gQXJyYXkuaXNBcnJheShtb25zdGVyLmFjKSA/IG1vbnN0ZXIuYWNbMF0uYWMgOiBtb25zdGVyLmFjO1xuICAgIGNvbnN0IGhwID0gbW9uc3Rlci5ocD8uYXZlcmFnZSA/PyBtb25zdGVyLmhwO1xuICAgIGNvbnN0IGNyID0gbW9uc3Rlci5jcjtcblxuICAgIC8vIFNraXAgbW9uc3RlcnMgd2l0aCBubyBBQyBhbmQgSFBcbiAgICBpZiAoIWFjICYmICFocCkge1xuICAgICAgc2tpcHBlZE1vbnN0ZXJzLnB1c2gobW9uc3Rlci5uYW1lKTtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICAgIFxuICAgICAgLy8gXHUyMDE0IEFiaWxpdGllcyBcdTIwMTRcbiAgICAgIGNvbnN0IGFiaWxpdGllcyA9IEFycmF5LmlzQXJyYXkobW9uc3Rlci5hYmlsaXR5KVxuICAgICAgICA/IG1vbnN0ZXIuYWJpbGl0eVxuICAgICAgICA6IFttb25zdGVyLnN0ciwgbW9uc3Rlci5kZXgsIG1vbnN0ZXIuY29uLCBtb25zdGVyLmludCwgbW9uc3Rlci53aXMsIG1vbnN0ZXIuY2hhXTtcbiAgICAgIGNvbnN0IFtzdHIgPSAxMCwgZGV4ID0gMTAsIGNvbiA9IDEwLCBpbnQgPSAxMCwgd2lzID0gMTAsIGNoYSA9IDEwXSA9IGFiaWxpdGllcztcbiAgXG4gICAgICAvLyBcdTIwMTQgU3BlZWQgKGhhbmRsZXMgaG92ZXIgJiBvYmplY3Qgc3BlZWRzKSBcdTIwMTRcbiAgICAgIGNvbnN0IHNwZWVkTGlzdDogc3RyaW5nW10gPSBbXTtcbiAgICAgIGlmICh0eXBlb2YgbW9uc3Rlci5zcGVlZCA9PT0gXCJvYmplY3RcIikge1xuICAgICAgICBmb3IgKGNvbnN0IFttb2RlLCB2YWxdIG9mIE9iamVjdC5lbnRyaWVzKG1vbnN0ZXIuc3BlZWQpKSB7XG4gICAgICAgICAgaWYgKG1vZGUgPT09IFwiY2FuSG92ZXJcIikgY29udGludWU7XG4gICAgICAgICAgaWYgKHZhbCAmJiB0eXBlb2YgdmFsID09PSBcIm9iamVjdFwiICYmIFwibnVtYmVyXCIgaW4gdmFsKSB7XG4gICAgICAgICAgICBjb25zdCBudW0gID0gKHZhbCBhcyBhbnkpLm51bWJlcjtcbiAgICAgICAgICAgIGNvbnN0IGNvbmQgPSAodmFsIGFzIGFueSkuY29uZGl0aW9uID8gYCAkeyh2YWwgYXMgYW55KS5jb25kaXRpb259YCA6IFwiXCI7XG4gICAgICAgICAgICBzcGVlZExpc3QucHVzaChgJHttb2RlfSAke251bX0gZnQuJHtjb25kfWApO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBzcGVlZExpc3QucHVzaChgJHttb2RlfSAke3ZhbH0gZnQuYCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzcGVlZExpc3QucHVzaChgJHttb25zdGVyLnNwZWVkfSBmdC5gKTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IHNwZWVkID0gc3BlZWRMaXN0LmpvaW4oXCIsIFwiKTtcbiAgXG4gICAgICAvLyBcdTIwMTQgU291cmNlIHNhbml0aXphdGlvbiBcdTIwMTRcbiAgICAgIGxldCBzb3VyY2UgPSBnZXRGdWxsU291cmNlTmFtZShtb25zdGVyLnNvdXJjZSwgZWRpdGlvbklkKTtcbiAgICAgIHNvdXJjZSAgICAgPSBzb3VyY2UucmVwbGFjZSgvOi9nLCBcIiAtXCIpO1xuICBcbiAgICAgIC8vIFx1MjAxNCBDYXRlZ29yeSBmb3IgZm9sZGVyIFx1MjAxNFxuICAgICAgY29uc3QgY2F0ZWdvcnkgPSBjYXRlZ29yaXplQ3JlYXR1cmUobW9uc3Rlcik7XG4gIFxuICAgICAgY29uc3QgZm0gICA9IGJ1aWxkRk0obW9uc3RlciwgQkVTVElBUllfTUVUQV9ERUZTKTtcbiAgICAgIGNvbnN0IHlhbWwgPSBzZXJpYWxpemVGcm9udG1hdHRlcihmbSwgQkVTVElBUllfTUVUQV9ERUZTKTtcbiAgICAgIFxuICAgICAgY29uc3Qgc2F2aW5nVGhyb3dzID0gKGZtW0ZNX0ZJRUxEUy5TQVZJTkdfVEhST1dTXSBhcyBzdHJpbmdbXSkgfHwgW107XG4gICAgICBjb25zdCBza2lsbHMgICAgICAgPSAoZm1bRk1fRklFTERTLlNLSUxMU10gICAgICAgIGFzIHN0cmluZ1tdKSB8fCBbXTtcbiAgICAgIGNvbnN0IHNlbnNlcyAgICAgICA9IChmbVtGTV9GSUVMRFMuU0VOU0VTXSAgICAgICAgYXMgc3RyaW5nW10pIHx8IFtdO1xuICAgICAgY29uc3QgbGFuZ3VhZ2VzICAgID0gKGZtW0ZNX0ZJRUxEUy5MQU5HVUFHRVNdICAgICBhcyBzdHJpbmdbXSkgfHwgW107XG5cblxuICAgICAgLy8gXHUyMDE0IEJvZHkgXHUyMDE0XG4gICAgICBsZXQgYm9keSA9XG4gICAgICBgIyAke25hbWV9XFxuXFxuYCArXG4gICAgICBgJHtmb3JtYXRTaXplQWJicmV2KHJhd1NpemUpfSAke3Jhd1R5cGV9LCAke2Zvcm1hdEFsaWdubWVudEFiYnJldihyYXdBbGlnbm1lbnQpfVxcblxcbmAgK1xuICAgICAgYCoqQXJtb3IgQ2xhc3MqKjogJHthY31cXG5gICtcbiAgICAgIGAqKkhpdCBQb2ludHMqKjogJHtocH1cXG5gICtcbiAgICAgIGAqKlNwZWVkKio6ICR7c3BlZWR9XFxuYCArXG4gICAgICAoc2F2aW5nVGhyb3dzLmxlbmd0aFxuICAgICAgICA/IGAqKlNhdmluZyBUaHJvd3MqKjogJHtzYXZpbmdUaHJvd3Muam9pbihcIiwgXCIpfVxcbmBcbiAgICAgICAgOiBcIlwiKSArXG4gICAgICAoc2tpbGxzLmxlbmd0aFxuICAgICAgICA/IGAqKlNraWxscyoqOiAke3NraWxscy5qb2luKFwiLCBcIil9XFxuYFxuICAgICAgICA6IFwiXCIpICtcbiAgICAgIChzZW5zZXMubGVuZ3RoXG4gICAgICAgID8gYCoqU2Vuc2VzKio6ICR7c2Vuc2VzLmpvaW4oXCIsIFwiKX1cXG5gXG4gICAgICAgIDogXCJcIikgK1xuICAgICAgKGxhbmd1YWdlcy5sZW5ndGhcbiAgICAgICAgPyBgKipMYW5ndWFnZXMqKjogJHtsYW5ndWFnZXMuam9pbihcIiwgXCIpfVxcbmBcbiAgICAgICAgOiBcIlwiKSArXG4gICAgICBgKipDaGFsbGVuZ2UqKjogJHtjcn1cXG5cXG5gICtcbiAgICAgIHJlbmRlckFiaWxpdGllc1RhYmxlKHN0ciwgZGV4LCBjb24sIGludCwgd2lzLCBjaGEpO1xuXG4gIFxuICAgICAgaWYgKG1vbnN0ZXIudHJhaXQpICAgICBib2R5ICs9IGBcXG5cXG4jIyMgVHJhaXRzXFxuJHttb25zdGVyLnRyYWl0Lm1hcChyZW5kZXJFbnRyeSkuam9pbihcIlxcblxcblwiKX1gO1xuICAgICAgaWYgKG1vbnN0ZXIuYWN0aW9uKSAgICBib2R5ICs9IGBcXG5cXG4jIyMgQWN0aW9uc1xcbiR7bW9uc3Rlci5hY3Rpb24ubWFwKHJlbmRlckVudHJ5KS5qb2luKFwiXFxuXFxuXCIpfWA7XG4gICAgICBpZiAobW9uc3Rlci5yZWFjdGlvbikgIGJvZHkgKz0gYFxcblxcbiMjIyBSZWFjdGlvbnNcXG4ke21vbnN0ZXIucmVhY3Rpb24ubWFwKHJlbmRlckVudHJ5KS5qb2luKFwiXFxuXFxuXCIpfWA7XG4gICAgICBpZiAobW9uc3Rlci5sZWdlbmRhcnkpIGJvZHkgKz0gYFxcblxcbiMjIyBMZWdlbmRhcnkgQWN0aW9uc1xcbiR7bW9uc3Rlci5sZWdlbmRhcnkubWFwKHJlbmRlckVudHJ5KS5qb2luKFwiXFxuXFxuXCIpfWA7XG4gIFxuICAgICAgY29uc3QgY29udGVudCA9IGAtLS1cXG4ke3lhbWx9XFxuLS0tXFxuXFxuJHtib2R5fWA7XG4gIFxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgcGF0aDogICAgYCR7Y2F0ZWdvcnl9LyR7c2FmZU5hbWV9Lm1kYCxcbiAgICAgICAgY29udGVudCxcbiAgICAgIH07XG4gICAgfSk7XG4gIH1cbiIsICIvLyA1ZSAyMDI1IGl0ZW1zIHBhcnNlclxuXG5pbXBvcnQgdHlwZSB7IFBhcnNlZE1hcmtkb3duRmlsZSB9IGZyb20gXCIuLi8uLi90eXBlc1wiO1xuaW1wb3J0IHsgcmVwbGFjZTVlVGFncyB9ICAgICBmcm9tIFwiLi9oZWxwZXJzL3RhZ1JlcGxhY2VyXCI7XG5pbXBvcnQgeyBnZXRGdWxsU291cmNlTmFtZSB9IGZyb20gXCIuL2hlbHBlcnMvc291cmNlTWFwXCI7XG5pbXBvcnQgeyBidWlsZEZNLCBzZXJpYWxpemVGcm9udG1hdHRlciwgSVRFTV9NRVRBX0RFRlMsIEZNX0ZJRUxEUyB9IGZyb20gXCIuL2hlbHBlcnMvZnJvbnRtYXR0ZXJcIjtcblxuXG4vKiogSGVscGVyIHRvIGNhcGl0YWxpemUgZmlyc3QgbGV0dGVyIFx1MjAxMyBuZXZlciBjcmFzaGVzIG9uIG5vbi1zdHJpbmdzICovXG5mdW5jdGlvbiBjYXBpdGFsaXplRmlyc3QoaW5wdXQ6IGFueSk6IHN0cmluZyB7XG4gIC8vIGlmIGl0XHUyMDE5cyBub3QgYSBub24tZW1wdHkgc3RyaW5nLCBiYWlsIG91dFxuICBpZiAodHlwZW9mIGlucHV0ICE9PSBcInN0cmluZ1wiIHx8IGlucHV0Lmxlbmd0aCA9PT0gMCkgcmV0dXJuIFwiXCI7XG4gIGNvbnN0IHMgPSBpbnB1dC50cmltKCk7XG4gIHJldHVybiBzLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgcy5zbGljZSgxKS50b0xvd2VyQ2FzZSgpO1xufVxuXG5cbmV4cG9ydCBjb25zdCBEQU1BR0VfVFlQRV9NQVA6IFJlY29yZDxzdHJpbmcsc3RyaW5nPiA9IHtcbiAgUDogXCJQaWVyY2luZ1wiLFxuICBCOiBcIkJsdWRnZW9uaW5nXCIsXG4gIFM6IFwiU2xhc2hpbmdcIixcbiAgTjogXCJOZWNyb3RpY1wiLFxuICBSOiBcIlJhZGlhbnRcIixcbiAgRjogXCJGaXJlXCIsXG4gIEM6IFwiQ29sZFwiLFxuICBMOiBcIkxpZ2h0bmluZ1wiLFxuICBUOiBcIlRodW5kZXJcIixcbiAgQTogXCJBY2lkXCIsXG4gIEg6IFwiSGVhbGluZ1wiLFxuICBVOiBcIkZvcmNlXCIsXG4gIFY6IFwiUHN5Y2hpY1wiLFxufTtcblxuZXhwb3J0IGNvbnN0IFBST1BFUlRZX01BUDogUmVjb3JkPHN0cmluZyxzdHJpbmc+ID0ge1xuICBBOiBcIkFtbXVuaXRpb25cIixcbiAgRjogXCJGaW5lc3NlXCIsXG4gIEg6IFwiSGVhdnlcIixcbiAgTDogXCJMaWdodFwiLFxuICBSOiBcIlJlbG9hZFwiLFxuICBTOiBcIlNwZWNpYWxcIixcbiAgXCIySFwiOiBcIlR3by1IYW5kZWRcIixcbiAgVDogXCJUaHJvd25cIixcbiAgVjogXCJWZXJzYXRpbGVcIlxufTtcblxuZXhwb3J0IGNvbnN0IElURU1fVFlQRV9NQVA6IFJlY29yZDxzdHJpbmcsc3RyaW5nPiA9IHtcbiAgJEM6ICBcIkN1cnJlbmN5XCIsXG4gICRHOiAgXCJHZW1cIixcbiAgQTogICBcIkFtbXVuaXRpb25cIixcbiAgXCJBSVJ8RE1HXCI6IFwiVmVoaWNsZSAoYWlyKVwiLFxuICBcIkFGfERNR1wiOiBcIkZ1dHVyZSBBbW1vXCIsXG4gIEFUOiAgXCJBcnRpc2FuIFRvb2xzXCIsXG4gIEVYUDogXCJFeHBsb3NpdmVcIixcbiAgRkQ6ICBcIkZvb2QgYW5kIERyaW5rXCIsXG4gIEc6ICAgXCJHZWFyXCIsXG4gIEdTOiAgXCJHYW1lXCIsXG4gIEhBOiAgXCJIZWF2eSBBcm1vclwiLFxuICBcIklER3xURENTUlwiOiBcIklsbGljaXQgRHJ1Z1wiLFxuICBJTlM6IFwiSW5zdHJ1bWVudFwiLFxuICBMQTogIFwiTGlnaHQgQXJtb3JcIixcbiAgTTogICBcIldlYXBvblwiLFxuICBNQTogIFwiTWVkaXVtIEFybW9yXCIsXG4gIE1OVDogXCJNb3VudHMgYW5kIFZlaGljbGVzXCIsXG4gIE9ESDogXCJNaXNjZWxsYW5lb3VzXCIsXG4gIFA6ICAgXCJDb25zdW1hYmxlXCIsXG4gIFI6ICAgXCJSYW5nZWQgV2VhcG9uXCIsXG4gIFJEOiAgXCJSb2RcIixcbiAgUkc6ICBcIlJpbmdcIixcbiAgUzogICBcIlNoaWVsZFwiLFxuICBTQzogIFwiU2Nyb2xsXCIsXG4gIFNDRjogXCJTcGVsbCBDYXN0aW5nIEZvY3VzXCIsXG4gIFNIUDogXCJTaGlwXCIsXG4gIFQ6ICAgXCJUb29sXCIsXG4gIFRBSDogXCJNb3VudHMgYW5kIFZlaGljbGVzXCIsXG4gIFRHOiAgXCJUcmFkZSBHb29kc1wiLFxuICBWRUg6IFwiTW91bnRzIGFuZCBWZWhpY2xlc1wiLFxuICBXRDogIFwiV2FuZFwiLFxufTtcblxuLyoqIGNvZGUgXHUyMTkyIGZ1bGwgZm9sZGVyIHBhdGggdW5kZXIgSXRlbXMvICovXG5jb25zdCBjb2RlRm9sZGVyTWFwOiBSZWNvcmQ8c3RyaW5nLHN0cmluZz4gPSB7XG4gIC8vIFdlYXBvbnMgJiBBcm1vclxuICBcIkFcIjogICBcIldlYXBvbnMgYW5kIEFybW9yL0FtbXVuaXRpb25cIixcbiAgXCJNXCI6ICAgXCJXZWFwb25zIGFuZCBBcm1vci9XZWFwb25zXCIsXG4gIFwiUlwiOiAgIFwiV2VhcG9ucyBhbmQgQXJtb3IvUmFuZ2VkIFdlYXBvbnNcIixcbiAgXCJTXCI6ICAgXCJXZWFwb25zIGFuZCBBcm1vci9TaGllbGRzXCIsXG4gIFwiTEFcIjogIFwiV2VhcG9ucyBhbmQgQXJtb3IvQXJtb3IvTGlnaHQgQXJtb3JcIixcbiAgXCJNQVwiOiAgXCJXZWFwb25zIGFuZCBBcm1vci9Bcm1vci9NZWRpdW0gQXJtb3JcIixcbiAgXCJIQVwiOiAgXCJXZWFwb25zIGFuZCBBcm1vci9Bcm1vci9IZWF2eSBBcm1vclwiLFxuICBcIkVYUFwiOiBcIldlYXBvbnMgYW5kIEFybW9yL1dlYXBvbnMvRXhwbG9zaXZlc1wiLFxuICAvLyBGdXR1cmUgQW1tbyAoQUZ8RE1HIFx1MjE5MiByYXdDb2RlIFwiQUZcIilcbiAgXCJBRlwiOiAgXCJXZWFwb25zIGFuZCBBcm1vci9BbW11bml0aW9uL0Z1dHVyZSBBbW1vXCIsXG5cbiAgLy8gTWFnaWNhbCBJdGVtc1xuICBcIlJEXCI6ICBcIk1hZ2ljYWwgSXRlbXMvUm9kc1wiLFxuICBcIlJHXCI6ICBcIk1hZ2ljYWwgSXRlbXMvUmluZ3NcIixcbiAgXCJTQ1wiOiAgXCJNYWdpY2FsIEl0ZW1zL1Njcm9sbHNcIixcbiAgXCJTQ0ZcIjogXCJNYWdpY2FsIEl0ZW1zL1NwZWxsIENhc3RpbmcgRm9jdXNcIixcbiAgXCJXRFwiOiAgXCJNYWdpY2FsIEl0ZW1zL1dhbmRzXCIsXG5cbiAgLy8gVmFsdWFibGVzXG4gIFwiJEdcIjogXCJWYWx1YWJsZXMvR2Vtc1wiLFxuICAvLyBDdXJyZW5jeSAocmF3Q29kZSBiZWNvbWVzIFwiQ1wiIGFmdGVyIHN0cmlwcGluZyAkKVxuICBcIkNcIjogIFwiVmFsdWFibGVzL0N1cnJlbmN5XCIsXG4gIFwiVEdcIjogXCJWYWx1YWJsZXMvVHJhZGUgR29vZHNcIixcblxuICAvLyBBcnRpc2FuIEdvb2RzXG4gIFwiQVRcIjogIFwiQXJ0aXNhbiBHb29kcy9Ub29sc1wiLFxuICBcIlRcIjogICBcIkFydGlzYW4gR29vZHMvVG9vbHNcIixcbiAgXCJJTlNcIjogXCJBcnRpc2FuIEdvb2RzL0luc3RydW1lbnRzXCIsXG4gIFwiR1NcIjogIFwiQXJ0aXNhbiBHb29kcy9HYW1lc1wiLFxuXG4gIC8vIEdlYXIgJiBNb3VudHNcbiAgXCJHXCI6ICAgXCJHZWFyXCIsXG4gIC8vIE1vdW50cyAmIFZlaGljbGVzXG4gIFwiTU5UXCI6IFwiR2Vhci9Nb3VudHMgYW5kIFZlaGljbGVzXCIsXG4gIFwiVEFIXCI6IFwiR2Vhci9Nb3VudHMgYW5kIFZlaGljbGVzXCIsXG4gIFwiVkVIXCI6IFwiR2Vhci9Nb3VudHMgYW5kIFZlaGljbGVzXCIsXG4gIC8vIEFpciB2ZWhpY2xlcyAoQUlSfERNRyBcdTIxOTIgcmF3Q29kZSBcIkFJUlwiKVxuICBcIkFJUlwiOiBcIkdlYXIvTW91bnRzIGFuZCBWZWhpY2xlcy9BaXJcIixcblxuICAvLyBDb25zdW1hYmxlc1xuICBcIlBcIjogICBcIkNvbnN1bWFibGVzXCIsXG4gIC8vIEZvb2QgJiBEcmlua1xuICBcIkZEXCI6ICBcIkNvbnN1bWFibGVzL0Zvb2QgYW5kIERyaW5rXCIsXG5cbiAgLy8gSWxsaWNpdCBEcnVncyAoSURHfFREQ1NSIFx1MjE5MiByYXdDb2RlIFwiSURHXCIpXG4gIFwiSURHXCI6IFwiR2Vhci9JbGxpY2l0IERydWdzXCIsXG5cbiAgLy8gTWlzY2VsbGFuZW91cyAoT0RIKVxuICBcIk9ESFwiOiBcIkdlYXIvTWlzY2VsbGFuZW91c1wiLFxufTtcblxuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlSXRlbXNGaWxlKGpzb246IGFueSwgZWRpdGlvbklkOiBzdHJpbmcpOiBQYXJzZWRNYXJrZG93bkZpbGVbXSB7XG4gIGNvbnN0IHJhd0l0ZW1zOiBhbnlbXSA9IFtdO1xuICBpZiAoQXJyYXkuaXNBcnJheShqc29uLmJhc2VpdGVtKSkgcmF3SXRlbXMucHVzaCguLi5qc29uLmJhc2VpdGVtKTtcbiAgaWYgKEFycmF5LmlzQXJyYXkoanNvbi5pdGVtKSkgICAgIHJhd0l0ZW1zLnB1c2goLi4uanNvbi5pdGVtKTtcbiAgaWYgKEFycmF5LmlzQXJyYXkoanNvbi5vYmplY3QpKSAgIHJhd0l0ZW1zLnB1c2goLi4uanNvbi5vYmplY3QpO1xuICBpZiAoQXJyYXkuaXNBcnJheShqc29uLnZlaGljbGUpKSAgcmF3SXRlbXMucHVzaCguLi5qc29uLnZlaGljbGUpO1xuICBpZiAoIXJhd0l0ZW1zLmxlbmd0aCkgcmV0dXJuIFtdO1xuXG4gIGNvbnN0IGJhc2VOYW1lcyA9IG5ldyBTZXQ8c3RyaW5nPihcbiAgICBBcnJheS5pc0FycmF5KGpzb24uYmFzZWl0ZW0pID8ganNvbi5iYXNlaXRlbS5tYXAoKGI6IGFueSkgPT4gYi5uYW1lKSA6IFtdXG4gICk7XG4gIGNvbnN0IG91dDogUGFyc2VkTWFya2Rvd25GaWxlW10gPSBbXTtcblxuICBmb3IgKGNvbnN0IGl0IG9mIHJhd0l0ZW1zKSB7XG4gICAgY29uc3QgbmFtZSAgICAgPSBpdC5uYW1lIGFzIHN0cmluZztcbiAgICBjb25zdCBzYWZlTmFtZSA9IG5hbWUucmVwbGFjZSgvW1xcL1xcXFw6XS9nLCBcIi1cIik7XG5cbiAgICAvLyBEZXRlcm1pbmUgZm9sZGVyXG4gICAgY29uc3QgcmF3Q29kZSA9IChpdC50eXBlIGFzIHN0cmluZyB8fCBcIlwiKS5zcGxpdChcInxcIilbMF1cbiAgICAgICAgLnNwbGl0KFwifFwiKVswXSAgICAgIC8vIGRyb3AgYW55dGhpbmcgYWZ0ZXIgXHUyMDFDfFx1MjAxRFxuICAgICAgICAucmVwbGFjZSgvXlxcJC8sIFwiXCIpOyAvLyBzdHJpcCBsZWFkaW5nIFx1MjAxQyRcdTIwMURcbiAgICBsZXQgZm9sZGVyICAgID0gY29kZUZvbGRlck1hcFtyYXdDb2RlXSA/PyBcIk1pc2NlbGxhbmVvdXNcIjtcblxuICAgIC8vIFZhcmlhbnRzXG4gICAgaWYgKGl0LmJvbnVzV2VhcG9uKSB7XG4gICAgICBmb2xkZXIgPSBgJHtmb2xkZXJ9L1ZhcmlhbnRzYDtcbiAgICB9XG4gICAgLy8gTWFnaWNhbFxuICAgIGVsc2Uge1xuICAgICAgY29uc3QgaXNNYWdpYyA9ICEhaXQud29uZHJvdXMgfHwgISFpdC5yZXFBdHR1bmUgfHwgISFpdC5yZXFfYXR0dW5lXG4gICAgICAgIHx8IFN0cmluZyhpdC5yYXJpdHkpLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoXCJtYWdpY1wiKTtcbiAgICAgIGlmIChpc01hZ2ljKSB7XG4gICAgICAgIGNvbnN0IFsgLCAuLi5yZXN0IF0gPSBmb2xkZXIuc3BsaXQoXCIvXCIpO1xuICAgICAgICBmb2xkZXIgPSBbXCJNYWdpY2FsIEl0ZW1zXCIsIC4uLnJlc3RdLmpvaW4oXCIvXCIpO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIFdlYXBvbiBjYXRlZ29yeSBzdWJmb2xkZXJcbiAgICBpZiAoKGZvbGRlci5zdGFydHNXaXRoKFwiV2VhcG9ucyBhbmQgQXJtb3IvV2VhcG9uc1wiKSB8fFxuICAgICAgICAgZm9sZGVyLnN0YXJ0c1dpdGgoXCJXZWFwb25zIGFuZCBBcm1vci9SYW5nZWQgV2VhcG9uc1wiKSkgJiYgaXQud2VhcG9uQ2F0ZWdvcnkpIHtcbiAgICAgIGZvbGRlciA9IGAke2ZvbGRlcn0vJHtjYXBpdGFsaXplRmlyc3QoaXQud2VhcG9uQ2F0ZWdvcnkpfWA7XG4gICAgfVxuXG4gICAgLy8gbWFrZSBlZGl0aW9uSWQgYXZhaWxhYmxlIGZvciB0aGUgU09VUkNFIGZpZWxkXG4oanNvbiBhcyBhbnkpLl9lZGl0aW9uSWQgPSBlZGl0aW9uSWQ7XG5cbi8vIGJ1aWxkIGEgRnJvbnRtYXR0ZXIgb2JqZWN0IGZyb20gdGhlIEpTT05cbmNvbnN0IGZtICAgPSBidWlsZEZNKGl0LCBJVEVNX01FVEFfREVGUyk7XG5cbi8vIGlmIHRoZSBidWlsdCBmcm9udG1hdHRlciBzYXlzIHRoaXMgaXMgYSBtYWdpY2FsIGl0ZW1cdTIwMjZcbmlmIChmbVtGTV9GSUVMRFMuTUFHSUNBTF0pIHtcbiAgLy8gXHUyMDI2dGhlbiBhZGQgb3VyIFZlcm11biBmbGFnXG4gIGZtW0ZNX0ZJRUxEUy5WRVJNVU5dID0gZmFsc2U7XG59XG5cbmlmIChyYXdDb2RlID09PSBcIk1cIiAmJiBpdC53ZWFwb25DYXRlZ29yeSkge1xuICAvLyBcdTIwMUNNXHUyMDFEIFx1MjE5MiB1c2Ugd2VhcG9uQ2F0ZWdvcnkgKFx1MjAxQ1NpbXBsZVx1MjAxRC9cdTIwMUNNYXJ0aWFsXHUyMDFEKVxuICBmbS50eXBlID0gYCR7Y2FwaXRhbGl6ZUZpcnN0KGl0LndlYXBvbkNhdGVnb3J5KX0gV2VhcG9uYDtcbn0gZWxzZSBpZiAoSVRFTV9UWVBFX01BUFtyYXdDb2RlXSkge1xuICAvLyBhbnkgb3RoZXIgY29kZSBcdTIxOTIgbWFwcGVkIGxhYmVsXG4gIGZtLnR5cGUgPSBJVEVNX1RZUEVfTUFQW3Jhd0NvZGVdO1xufVxuaWYgKEFycmF5LmlzQXJyYXkoZm0uZGFtYWdlVHlwZXMpKSB7XG4gIGZtLmRhbWFnZVR5cGVzID0gZm0uZGFtYWdlVHlwZXMubWFwKChjb2RlOiBzdHJpbmcpID0+XG4gICAgREFNQUdFX1RZUEVfTUFQW2NvZGVdIHx8IGNvZGVcbiAgKTtcbn1cbi8vIHNlcmlhbGl6ZSBpdCB0byBZQU1MXG5sZXQgeWFtbCA9IHNlcmlhbGl6ZUZyb250bWF0dGVyKGZtLCBJVEVNX01FVEFfREVGUyk7XG5cbi8vIGlmIHlvdSBzdGlsbCB3YW50IHBhY2tDb250ZW50cywgYXBwZW5kIGl0IGhlcmU6XG5pZiAoQXJyYXkuaXNBcnJheShpdC5wYWNrQ29udGVudHMpKSB7XG4gIHlhbWwgKz0gXCJcXG5wYWNrQ29udGVudHM6XCI7XG4gIGZvciAoY29uc3QgcGMgb2YgaXQucGFja0NvbnRlbnRzKSB7XG4gICAgeWFtbCArPSBgXFxuICAtIGl0ZW06IFwiJHtwYy5pdGVtfVwiXFxuICAgIHF1YW50aXR5OiAke3BjLnF1YW50aXR5fWA7XG4gIH1cbn1cbiBcbi8vIHdyYXAgaXQgaW4gdGhlIFlBTUwgZmVuY2VcbmNvbnN0IGZyb250bWF0dGVyID0gYC0tLVxcbiR7eWFtbH1cXG4tLS1gO1xuXG5cbiAgICAvLyBCb2R5IGxpbmVzXG4gICAgY29uc3QgbGluZXM6IHN0cmluZ1tdID0gW107XG4gICAgbGluZXMucHVzaChgIyAke25hbWV9YCk7XG4gICAgbGluZXMucHVzaChcIlwiKTtcblxuICAgIC8vIFN1YnRpdGxlXG4gICAgY29uc3Qgc3VidGl0bGUgPSBpdC53ZWFwb25cbiAgICAgID8gYCR7Y2FwaXRhbGl6ZUZpcnN0KGl0LndlYXBvbkNhdGVnb3J5KX0gV2VhcG9uYFxuICAgICAgOiBpdC5hcm1vclxuICAgICAgICA/IGZvbGRlci5zcGxpdChcIi9cIikucG9wKCkgfHwgXCJBcm1vclwiXG4gICAgICAgIDogXCJcIjtcbiAgICBpZiAoc3VidGl0bGUpIGxpbmVzLnB1c2goYCMjIyAqJHtzdWJ0aXRsZX0qYCk7XG5cbiAgICAvLyBTdGF0cyBsaW5lc1xuICAgIGlmIChpdC53ZWFwb24pIHtcbiAgICAgIGxpbmVzLnB1c2goYCoqQ2F0ZWdvcnkqKjogJHtjYXBpdGFsaXplRmlyc3QoaXQud2VhcG9uQ2F0ZWdvcnkpfWApO1xuICAgICAgbGluZXMucHVzaChgKipEYW1hZ2UqKjogJHtpdC5kbWcxID8/IFwiXCJ9JHtpdC5kbWcyID8gYCAvICR7aXQuZG1nMn1gIDogXCJcIn1gKTtcbiAgICAgIGNvbnN0IHR5cGVzQm9keSA9IChBcnJheS5pc0FycmF5KGl0LmRtZ1R5cGUpID8gaXQuZG1nVHlwZSA6IFtpdC5kbWdUeXBlXSlcbiAgICAgICAgLmZpbHRlcigodDogYW55KSA9PiBCb29sZWFuKHQpKVxuICAgICAgICAubWFwKCh0OiBzdHJpbmcpID0+IERBTUFHRV9UWVBFX01BUFt0XSB8fCB0KTtcbiAgICAgIGxpbmVzLnB1c2goYCoqRGFtYWdlIFR5cGUqKjogJHt0eXBlc0JvZHkuam9pbihcIiwgXCIpfWApO1xuICAgICAgbGluZXMucHVzaChgKipSYW5nZSoqOiAke2l0LnJhbmdlID8/IFwiXHUyMDE0XCJ9YCk7XG4gICAgICBsaW5lcy5wdXNoKGAqKlJlbG9hZCoqOiAke2l0LnJlbG9hZCA/PyBcIlx1MjAxNFwifWApO1xuICAgICAgaWYgKGl0LmFtbW9UeXBlKSBsaW5lcy5wdXNoKGAqKkFtbW8gVHlwZSoqOiAke2l0LmFtbW9UeXBlfWApO1xuICAgICAgaWYgKEFycmF5LmlzQXJyYXkoaXQucHJvcGVydHkpICYmIGl0LnByb3BlcnR5Lmxlbmd0aCkge1xuICAgICAgICBjb25zdCBwcm9wc0JvZHkgPSBpdC5wcm9wZXJ0eS5tYXAoKHA6IHN0cmluZykgPT4gUFJPUEVSVFlfTUFQW3BdIHx8IHApO1xuICAgICAgICBsaW5lcy5wdXNoKGAqKlByb3BlcnRpZXMqKjogJHtwcm9wc0JvZHkuam9pbihcIiwgXCIpfWApO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAoaXQuYXJtb3IpIHtcbiAgICAgIGxpbmVzLnB1c2goYCoqQXJtb3IgQ2xhc3MqKjogJHtpdC5hY31gKTtcbiAgICAgIGlmIChpdC5zdGVhbHRoKSBsaW5lcy5wdXNoKGAqKlN0ZWFsdGggRGlzYWR2YW50YWdlKio6IHRydWVgKTtcbiAgICAgIGxpbmVzLnB1c2goXCJcIik7XG4gICAgfVxuXG4gICAgLy8gRGVzY3JpcHRpb24gd2l0aCBuZXN0ZWQgZW50cmllc1xuICAgIGNvbnN0IGRlc2MgPSBpdC5lbnRyaWVzID8/IGl0LmRlc2M7XG4gICAgaWYgKGRlc2MpIHtcbiAgICAgIGZvciAoY29uc3QgcCBvZiBBcnJheS5pc0FycmF5KGRlc2MpID8gZGVzYyA6IFtkZXNjXSkge1xuICAgICAgICBpZiAodHlwZW9mIHAgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgZm9yIChjb25zdCBsaW5lIG9mIHJlcGxhY2U1ZVRhZ3MocCkuc3BsaXQoXCJcXG5cIikpIHtcbiAgICAgICAgICAgIGxpbmVzLnB1c2gobGluZSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGxpbmVzLnB1c2goXCJcIik7XG4gICAgICAgIH0gZWxzZSBpZiAocCAmJiB0eXBlb2YgcCA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgICBpZiAobGluZXNbbGluZXMubGVuZ3RoIC0gMV0gPT09IFwiXCIpIHtcbiAgICAgICAgICAgIGxpbmVzLnBvcCgpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBsaW5lcy5wdXNoKGAjIyMjICR7cC5uYW1lfWApO1xuICAgICAgICAgIGNvbnN0IHN1YiA9IEFycmF5LmlzQXJyYXkocC5lbnRyaWVzKSA/IHAuZW50cmllcyA6IFtdO1xuICAgICAgICAgIGZvciAoY29uc3Qgc3Agb2Ygc3ViKSB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGxpbmUgb2YgcmVwbGFjZTVlVGFncyhzcCkuc3BsaXQoXCJcXG5cIikpIHtcbiAgICAgICAgICAgICAgbGluZXMucHVzaChsaW5lKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgbGluZXMucHVzaChcIlwiKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGNvbnN0IGJvZHkgPSBsaW5lcy5qb2luKFwiXFxuXCIpO1xuXG4gICAgb3V0LnB1c2goeyBwYXRoOiBgSXRlbXMvJHtmb2xkZXJ9LyR7c2FmZU5hbWV9Lm1kYCwgY29udGVudDogYCR7ZnJvbnRtYXR0ZXJ9XFxuXFxuJHtib2R5fWAgfSk7XG4gIH1cblxuICByZXR1cm4gb3V0LnNvcnQoKGEsYikgPT4gYS5wYXRoLmxvY2FsZUNvbXBhcmUoYi5wYXRoKSk7XG59IiwgIi8vIGZyb250bWF0dGVyIDVlIDIwMjVcblxuaW1wb3J0IHsgZ2V0RnVsbFNvdXJjZU5hbWUgfSBmcm9tIFwiLi9zb3VyY2VNYXBcIjtcbmltcG9ydCB7IGZvcm1hdFNpemVBYmJyZXYsIGZvcm1hdEFsaWdubWVudEFiYnJldiB9IGZyb20gXCIuLi9iZXN0aWFyeVwiO1xuaW1wb3J0IHsgZm9ybWF0UmFuZ2UsIGZvcm1hdFRpbWUsIGZvcm1hdER1cmF0aW9uLCBTQ0hPT0xfTUFQIH0gZnJvbSBcIi4uL3NwZWxsc1wiO1xuaW1wb3J0IHsgUFJPUEVSVFlfTUFQLCBEQU1BR0VfVFlQRV9NQVAsIElURU1fVFlQRV9NQVAgfSBmcm9tIFwiLi4vaXRlbXNcIjtcbmltcG9ydCB7IHJlcGxhY2U1ZVRhZ3MgfSBmcm9tIFwiLi90YWdSZXBsYWNlclwiO1xuXG5mdW5jdGlvbiBibGFua1VuZGVmaW5lZCh2YWw6IGFueSk6IGFueSB7XG4gIHJldHVybiB2YWwgPT09IHVuZGVmaW5lZCA/IFwiXCIgOiB2YWw7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjYXAoc3RyOiBhbnkpOiBzdHJpbmcge1xuICBpZiAodHlwZW9mIHN0ciAhPT0gXCJzdHJpbmdcIikgcmV0dXJuIFwiXCI7XG4gIHJldHVybiBzdHIuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBzdHIuc2xpY2UoMSk7XG59XG5cbmV4cG9ydCBjb25zdCBBQklMSVRZX0ZVTEw6IFJlY29yZDxzdHJpbmcsc3RyaW5nPiA9IHtcbiAgc3RyOiBcIlN0cmVuZ3RoXCIsXG4gIGRleDogXCJEZXh0ZXJpdHlcIixcbiAgY29uOiBcIkNvbnN0aXR1dGlvblwiLFxuICBpbnQ6IFwiSW50ZWxsaWdlbmNlXCIsXG4gIHdpczogXCJXaXNkb21cIixcbiAgY2hhOiBcIkNoYXJpc21hXCIsXG59O1xuXG5leHBvcnQgY29uc3QgU0laRV9NQVA6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4gPSB7XG4gIFQ6IFwiVGlueVwiLFxuICBTOiBcIlNtYWxsXCIsXG4gIE06IFwiTWVkaXVtXCIsXG4gIEw6IFwiTGFyZ2VcIixcbiAgSDogXCJIdWdlXCIsXG4gIEc6IFwiR2FyZ2FudHVhblwiXG59O1xuXG4vLyBcdTI1MDBcdTI1MDBcdTI1MDAgVW5pdmVyc2FsIGZyb250bWF0dGVyIGtleXMgXHUyNTAwXHUyNTAwXHUyNTAwICBcbmV4cG9ydCBjb25zdCBGTV9GSUVMRFMgPSB7XG4gIEFCSUxJVFlfQk9OVVNFUzogICAgXCJhYmlsaXR5X2JvbnVzZXNcIixcbiAgQUM6ICAgICAgICAgICAgICAgICBcIkFDXCIsXG4gIEFMSUdOTUVOVDogICAgICAgICAgXCJBbGlnbm1lbnRcIixcbiAgQU1NT19UWVBFOiAgICAgICAgICBcIkFtbW8gVHlwZVwiLFxuICBBUk1PUl9QUk9GSUNJRU5DSUVTOlwiYXJtb3ItcHJvZlwiLFxuICBBVFRBQ0tfVFlQRTogICAgICAgIFwiYXR0YWNrX3R5cGVcIixcbiAgQVRUVU5FTUVOVDogICAgICAgICBcIkF0dHVuZW1lbnRcIixcbiAgQVRUVU5FX1JFUTogICAgICAgICBcIkF0dHVuZV9SZXFcIixcbiAgQ0FTVElOR19USU1FOiAgICAgICBcImNhc3RpbmdfdGltZVwiLFxuICBDSEFSSVNNQTogICAgICAgICAgIFwiY2hhcmlzbWFcIixcbiAgQ0hBX01PRDogICAgICAgICAgICBcImNoYV9tb2RcIixcbiAgQ09OQ0VOVFJBVElPTjogICAgICBcImNvbmNlbnRyYXRpb25cIixcbiAgQ09ORElUSU9OX0lNTTogICAgICBcImNvbmRfaW1tdW5pdHlcIixcbiAgQ09OU1RJVFVUSU9OOiAgICAgICBcImNvbnN0aXR1dGlvblwiLFxuICBDT05fTU9EOiAgICAgICAgICAgIFwiY29uX21vZFwiLFxuICBDT1NUOiAgICAgICAgICAgICAgIFwiY29zdFwiLFxuICBDT01QT05FTlRTOiAgICAgICAgIFwiQ29tcG9uZW50c1wiLFxuICBDSEFMTEVOR0VfUkFUSU5HOiAgIFwiQ1JcIixcbiAgREFNQUdFX1RZUEU6ICAgICAgICBcImRhbWFnZV90eXBlXCIsXG4gIERBTUFHRV9UWVBFUzogICAgICAgXCJkYW1hZ2VUeXBlc1wiLFxuICBEQU1BR0U6ICAgICAgICAgICAgIFwiZGFtYWdlXCIsXG4gIERBTUFHRV9SRVM6ICAgICAgICAgXCJkbWdfcmVzaXN0YW5jZVwiLFxuICBEQU1BR0VfSU1NOiAgICAgICAgIFwiZG1nX2ltbXVuaXR5XCIsXG4gIERFWFRFUklUWTogICAgICAgICAgXCJkZXh0ZXJpdHlcIixcbiAgREVYX01PRDogICAgICAgICAgICBcImRleF9tb2RcIixcbiAgRFVSQVRJT046ICAgICAgICAgICBcImR1cmF0aW9uXCIsXG4gIFJVTEVTRVQ6ICAgICAgICAgICAgXCJydWxlc2V0XCIsXG4gIEhQOiAgICAgICAgICAgICAgICAgXCJIUFwiLFxuICBJTlRFTExJR0VOQ0U6ICAgICAgIFwiaW50ZWxsaWdlbmNlXCIsXG4gIElOVF9NT0Q6ICAgICAgICAgICAgXCJpbnRfbW9kXCIsXG4gIExBTkdVQUdFUzogICAgICAgICAgXCJsYW5ndWFnZXNcIixcbiAgTEVWRUw6ICAgICAgICAgICAgICBcImxldmVsXCIsXG4gIE1BR0lDQUw6ICAgICAgICAgICAgXCJtYWdpY2FsXCIsXG4gIE1BVEVSSUFMOiAgICAgICAgICAgXCJtYXRlcmlhbFwiLFxuICBOQU1FOiAgICAgICAgICAgICAgIFwibmFtZVwiLFxuICBQUk9QRVJUSUVTOiAgICAgICAgIFwicHJvcGVydGllc1wiLFxuICBSQU5HRTogICAgICAgICAgICAgIFwicmFuZ2VcIixcbiAgUkFSSVRZOiAgICAgICAgICAgICBcInJhcml0eVwiLFxuICBSRUxPQUQ6ICAgICAgICAgICAgIFwicmVsb2FkXCIsXG4gIFJJVFVBTDogICAgICAgICAgICAgXCJyaXR1YWxcIixcbiAgU0FWRTogICAgICAgICAgICAgICBcInNhdmVcIixcbiAgU0FWSU5HX1RIUk9XUzogICAgICBcInNhdmluZ190aHJvd3NcIixcbiAgU0NIT09MOiAgICAgICAgICAgICBcInNjaG9vbFwiLFxuICBTRU5TRVM6ICAgICAgICAgICAgIFwic2Vuc2VzXCIsXG4gIFNJWkU6ICAgICAgICAgICAgICAgXCJzaXplXCIsXG4gIFNLSUxMUzogICAgICAgICAgICAgXCJza2lsbHNcIixcbiAgU0tJTExfQ0hPSUNFX0xJU1Q6ICBcInNraWxsX2Nob2ljZV9saXN0XCIsXG4gIFNPTUFUSUM6ICAgICAgICAgICAgXCJzb21hdGljXCIsXG4gIFNPVVJDRTogICAgICAgICAgICAgXCJzb3VyY2VcIixcbiAgU1BFQ0lFUzogICAgICAgICAgICBcInNwZWNpZXNcIixcbiAgU1BFRUQ6ICAgICAgICAgICAgICBcInNwZWVkXCIsXG4gIFNQRUxMX0NBU1RfTU9EOiAgICAgXCJTcGVsbCBDYXN0IE1vZFwiLFxuICBTUEVMTF9SQU5HRTogICAgICAgIFwiUmFuZ2VcIixcbiAgU1RFQUxUSF9ESVNBRFZBTlRBR0U6IFwic3RlYWx0aERpc2FkdmFudGFnZVwiLFxuICBTVFJFTkdUSDogICAgICAgICAgIFwic3RyZW5ndGhcIixcbiAgU1RSX01PRDogICAgICAgICAgICBcInN0cl9tb2RcIixcbiAgU1VCUkFDRVM6ICAgICAgICAgICBcInN1YnJhY2VzXCIsXG4gIFRPT0xfUFJPRklDSUVOQ0lFUzogXCJ0b29sLXByb2ZcIixcbiAgVE9PTF9DSE9JQ0VfTElTVDogIFwidG9vbF9jaG9pY2VfbGlzdFwiLFxuICBUUkFJVFM6ICAgICAgICAgICAgIFwidHJhaXRzXCIsXG4gIFRZUEU6ICAgICAgICAgICAgICAgXCJ0eXBlXCIsXG4gIFZBUklBTlQ6ICAgICAgICAgICAgXCJWYXJpYW50XCIsXG4gIFZFUkJBTDogICAgICAgICAgICAgXCJ2ZXJiYWxcIixcbiAgVkVSTVVOOiAgICAgICAgICAgICBcInZlcm11blwiLFxuICBXRUFQT05fUFJPRklDSUVOQ0lFUzogXCJ3ZWFwb24tcHJvZlwiLFxuICBXRUlHSFQ6ICAgICAgICAgICAgIFwid2VpZ2h0XCIsXG4gIFdJU0RPTTogICAgICAgICAgICAgXCJ3aXNkb21cIixcbiAgV0lTX01PRDogICAgICAgICAgICBcIndpc19tb2RcIixcbn0gYXMgY29uc3Q7XG5cbmV4cG9ydCB0eXBlIEZNS2V5ID0ga2V5b2YgdHlwZW9mIEZNX0ZJRUxEUztcbmV4cG9ydCB0eXBlIEZyb250bWF0dGVyID0gUGFydGlhbDxSZWNvcmQ8dHlwZW9mIEZNX0ZJRUxEU1tGTUtleV0sIHVua25vd24+PjtcblxuLy8gXHUyNTAwXHUyNTAwXHUyNTAwIERlZmluaXRpb24gb2YgYSBzaW5nbGUgZmllbGQgbWFwcGluZyBcdTI1MDBcdTI1MDBcdTI1MDBcbmV4cG9ydCBpbnRlcmZhY2UgRmllbGREZWYge1xuICAvKiogV2hpY2ggY2FsbFx1MjAxMHNpZ24gKGtleSBpbiBGTV9GSUVMRFMpICovXG4gIGNhbGxTaWduOiBGTUtleTtcbiAgLyoqIFdoaWNoIEpTT04gcHJvcGVydHkgdG8gcmVhZCAqL1xuICBqc29uS2V5OiAgc3RyaW5nIHwgc3RyaW5nW107XG4gIC8qKiBPcHRpb25hbCB0cmFuc2Zvcm1lcjogcmF3IEpTT04gXHUyMTkyIGZpbmFsIHZhbHVlICovXG4gIGNvbnY/OiAgICAocmF3OiBhbnksIGFsbEpzb24/OiBhbnkpID0+IHVua25vd247XG59XG5cbmNvbnN0IHVuaWZpZWRBcm1vclByb2ZzID0gKHZhbDogYW55KTogc3RyaW5nW10gPT5cbiAgQXJyYXkuaXNBcnJheSh2YWw/LmFybW9yKSA/IHZhbC5hcm1vci5tYXAoY2FwKSA6XG4gIEFycmF5LmlzQXJyYXkodmFsKSA/IHZhbC5tYXAoY2FwKSA6IFtdO1xuXG4vLyBmcm9udG1hdHRlci50c1xuXG5leHBvcnQgZnVuY3Rpb24gdW5pZmllZFdlYXBvblByb2ZzKHZhbDogYW55KTogc3RyaW5nW10ge1xuICAvLyBwdWxsIHRoZSBcdTIwMUN3ZWFwb25zXHUyMDFEIGFycmF5IG9mZiBlaXRoZXIgYSByYXcgYXJyYXkgb3IgYSBzdGFydGluZ1Byb2ZpY2llbmNpZXMgb2JqZWN0XG4gIGNvbnN0IHJhd0FycjogYW55W10gPSBBcnJheS5pc0FycmF5KHZhbD8ud2VhcG9ucylcbiAgICA/IHZhbC53ZWFwb25zXG4gICAgOiBBcnJheS5pc0FycmF5KHZhbClcbiAgICA/IHZhbFxuICAgIDogW107XG5cbiAgY29uc3Qgb3V0ID0gbmV3IFNldDxzdHJpbmc+KCk7XG5cbiAgZnVuY3Rpb24gaGFuZGxlT25lKGVudHJ5OiBhbnkpIHtcbiAgICBpZiAoQXJyYXkuaXNBcnJheShlbnRyeSkpIHtcbiAgICAgIC8vIGZsYXR0ZW4gbmVzdGVkIGFycmF5c1xuICAgICAgZW50cnkuZm9yRWFjaChoYW5kbGVPbmUpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmICh0eXBlb2YgZW50cnkgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgIGNvbnN0IGxpdCA9IGVudHJ5LnRyaW0oKS50b0xvd2VyQ2FzZSgpO1xuICAgICAgaWYgKGxpdCA9PT0gXCJzaW1wbGVcIikge1xuICAgICAgICBvdXQuYWRkKFwiU2ltcGxlIFdlYXBvbnNcIik7XG4gICAgICB9IGVsc2UgaWYgKGxpdCA9PT0gXCJtYXJ0aWFsXCIpIHtcbiAgICAgICAgb3V0LmFkZChcIk1hcnRpYWwgV2VhcG9uc1wiKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIGRldGVjdCB0YWdnZWQgaXRlbXMgdnMgc2ltcGxlIHdvcmRzXG4gICAgICAgIGNvbnN0IHRleHQgPSBlbnRyeS5zdGFydHNXaXRoKFwie0BcIilcbiAgICAgICAgICA/IHJlcGxhY2U1ZVRhZ3MoZW50cnkpXG4gICAgICAgICAgOiBjYXAoZW50cnkpO1xuICAgICAgICBvdXQuYWRkKHRleHQpO1xuICAgICAgfVxuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmIChlbnRyeSAmJiB0eXBlb2YgZW50cnkgPT09IFwib2JqZWN0XCIgJiYgZW50cnkucHJvZmljaWVuY3kpIHtcbiAgICAgIC8vIHsgcHJvZmljaWVuY3k6IFwiZmlyZWFybXNcIiwgb3B0aW9uYWw6IHRydWUgfVxuICAgICAgY29uc3QgbmFtZSA9IGNhcChlbnRyeS5wcm9maWNpZW5jeSk7XG4gICAgICBvdXQuYWRkKGVudHJ5Lm9wdGlvbmFsID8gYCR7bmFtZX0gKG9wdGlvbmFsKWAgOiBuYW1lKTtcbiAgICB9XG4gIH1cblxuICByYXdBcnIuZm9yRWFjaChoYW5kbGVPbmUpO1xuICByZXR1cm4gWy4uLm91dF07XG59XG5cblxuY29uc3QgdW5pZmllZFNhdmVzID0gKHZhbDogYW55KTogc3RyaW5nW10gPT4ge1xuICBpZiAoQXJyYXkuaXNBcnJheSh2YWwpKSB7XG4gICAgICByZXR1cm4gdmFsLm1hcCgoazogc3RyaW5nKSA9PlxuICAgICAgICAoeyBzdHI6IFwiU3RyZW5ndGhcIiwgZGV4OiBcIkRleHRlcml0eVwiLCBjb246IFwiQ29uc3RpdHV0aW9uXCIsXG4gICAgICAgICAgaW50OiBcIkludGVsbGlnZW5jZVwiLCB3aXM6IFwiV2lzZG9tXCIsIGNoYTogXCJDaGFyaXNtYVwiIH1ba10gPz8gay50b1VwcGVyQ2FzZSgpKVxuICAgICAgKTtcbiAgfVxuICBpZiAodHlwZW9mIHZhbCA9PT0gXCJvYmplY3RcIiAmJiB2YWwgIT09IG51bGwpIHtcbiAgICByZXR1cm4gT2JqZWN0LmtleXModmFsKS5tYXAoayA9PiBrLnRvVXBwZXJDYXNlKCkpO1xuICB9XG4gIHJldHVybiBbXTtcbn07XG5cbmV4cG9ydCBjb25zdCB1bmlmaWVkU2tpbGxzID0gKHZhbDogYW55KTogc3RyaW5nW10gPT4ge1xuICAvLyAxKSBcdTIwMUNCZXN0aWFyeVx1MjAxRCBzdHlsZTogZmxhdCBvYmplY3QgbWFwcGluZyBza2lsbFx1MjE5Mm1vZGlmaWVyXG4gIGlmIChcbiAgICB2YWwgJiZcbiAgICAhQXJyYXkuaXNBcnJheSh2YWwpICYmXG4gICAgdHlwZW9mIHZhbCA9PT0gXCJvYmplY3RcIiAmJlxuICAgIC8vIGVuc3VyZSBldmVyeSB2YWx1ZSBpcyBhIHN0cmluZyBvciBudW1iZXJcbiAgICBPYmplY3QudmFsdWVzKHZhbCkuZXZlcnkodiA9PiB0eXBlb2YgdiA9PT0gXCJzdHJpbmdcIiB8fCB0eXBlb2YgdiA9PT0gXCJudW1iZXJcIilcbiAgKSB7XG4gICAgcmV0dXJuIE9iamVjdC5lbnRyaWVzKHZhbCkubWFwKFxuICAgICAgKFtza2lsbCwgbW9kXSkgPT4gYCR7Y2FwKHNraWxsKX0gJHttb2R9YC50cmltKClcbiAgICApO1xuICB9XG5cbiAgLy8gMikgbmVzdGVkIHVuZGVyIC5za2lsbHMgLyAuc2tpbGxQcm9maWNpZW5jaWVzIC8gLnNraWxsUHJvZlxuICBpZiAodmFsICYmICFBcnJheS5pc0FycmF5KHZhbCkgJiYgdHlwZW9mIHZhbCA9PT0gXCJvYmplY3RcIikge1xuICAgIGNvbnN0IG5lc3RlZCA9ICh2YWwgYXMgYW55KS5za2lsbHNcbiAgICAgID8/ICh2YWwgYXMgYW55KS5za2lsbFByb2ZcbiAgICAgID8/ICh2YWwgYXMgYW55KS5za2lsbFByb2ZpY2llbmNpZXM7XG4gICAgcmV0dXJuIHVuaWZpZWRTa2lsbHMobmVzdGVkKTtcbiAgfVxuXG4gIC8vIDMpIGFycmF5LXN0eWxlXG4gIGlmICghQXJyYXkuaXNBcnJheSh2YWwpKSByZXR1cm4gW107XG5cbiAgY29uc3Qgb3V0ID0gbmV3IFNldDxzdHJpbmc+KCk7XG4gIGZvciAoY29uc3QgZSBvZiB2YWwpIHtcbiAgICAvLyAzYSkgeyBhbnk6IE4gfVxuICAgIGlmIChlICYmIHR5cGVvZiBlID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiAoZSBhcyBhbnkpLmFueSA9PT0gXCJudW1iZXJcIikge1xuICAgICAgb3V0LmFkZChgQ2hvb3NlICR7KGUgYXMgYW55KS5hbnl9YCk7XG4gICAgICBjb250aW51ZTtcbiAgICB9XG4gICAgLy8gM2IpIHsgY2hvb3NlOiB7IGNvdW50LCBcdTIwMjYgfSB9XG4gICAgaWYgKGUgJiYgdHlwZW9mIGUgPT09IFwib2JqZWN0XCIgJiYgKGUgYXMgYW55KS5jaG9vc2UpIHtcbiAgICAgIGNvbnN0IGNudCA9IChlIGFzIGFueSkuY2hvb3NlLmNvdW50ID8/IDE7XG4gICAgICBvdXQuYWRkKGBDaG9vc2UgJHtjbnR9YCk7XG4gICAgfVxuICAgIC8vIDNjKSBmaXhlZCBmbGFncyBmb286IHRydWVcbiAgICBpZiAoZSAmJiB0eXBlb2YgZSA9PT0gXCJvYmplY3RcIikge1xuICAgICAgZm9yIChjb25zdCBbaywgdl0gb2YgT2JqZWN0LmVudHJpZXMoZSkpIHtcbiAgICAgICAgaWYgKHYgPT09IHRydWUpIG91dC5hZGQoY2FwKGspKTtcbiAgICAgIH1cbiAgICB9XG4gICAgLy8gM2QpIGxpdGVyYWwgc3RyaW5nc1xuICAgIGlmICh0eXBlb2YgZSA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgb3V0LmFkZChjYXAoZSkpO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBbLi4ub3V0XTtcbn07XG5cblxuIFxuZXhwb3J0IGNvbnN0IHVuaWZpZWRUb29sUHJvZnMgPSAodmFsOiBhbnkpOiBzdHJpbmdbXSA9PiB7XG4gIC8vIHB1bGwgbmVzdGVkIGFycmF5IGlmIHNvbWVvbmUgcGFzc2VkIHlvdSB0aGUgd2hvbGUgc3RhcnRpbmdQcm9maWNpZW5jaWVzIG9ialxuICBsZXQgZW50cmllczogYW55W10gPSBBcnJheS5pc0FycmF5KHZhbCkgPyB2YWxcbiAgICA6IEFycmF5LmlzQXJyYXkodmFsPy50b29sUHJvZmljaWVuY2llcykgPyB2YWwudG9vbFByb2ZpY2llbmNpZXNcbiAgICA6IEFycmF5LmlzQXJyYXkodmFsPy50b29scykgICAgICAgICAgICAgPyB2YWwudG9vbHNcbiAgICA6IFtdO1xuXG4gIGNvbnN0IG91dCA9IG5ldyBTZXQ8c3RyaW5nPigpO1xuICBsZXQgc2F3Q2hvb3NlID0gZmFsc2U7XG5cbiAgZm9yIChjb25zdCBlIG9mIGVudHJpZXMpIHtcbiAgICBpZiAodHlwZW9mIGUgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgIG91dC5hZGQoY2FwKGUpKTtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cblxuICAgIGlmIChlPy5jaG9vc2UpIHtcbiAgICAgIGNvbnN0IGNudCA9IGUuY2hvb3NlLmNvdW50ID8/IDE7XG4gICAgICBzYXdDaG9vc2UgPSB0cnVlO1xuICAgICAgb3V0LmFkZChgQ2hvb3NlICR7Y250fWApO1xuICAgIH1cblxuICAgIC8vIHB1bGwgb3V0IGFueSBmaXhlZCBcdTIwMUNmb286IHRydWVcdTIwMUQgb3IgbnVtZXJpYyBcdTIwMUNhbnlGb286IE5cdTIwMURcbiAgICBmb3IgKGNvbnN0IFtrLHZdIG9mIE9iamVjdC5lbnRyaWVzKGUpKSB7XG4gICAgICBpZiAodiA9PT0gdHJ1ZSkge1xuICAgICAgICBvdXQuYWRkKGNhcChrKSk7XG4gICAgICB9IGVsc2UgaWYgKHR5cGVvZiB2ID09PSBcIm51bWJlclwiICYmIGsuc3RhcnRzV2l0aChcImFueVwiKSkge1xuICAgICAgICAvLyBlLmcuIGFueUFydGlzYW5zVG9vbDoxXG4gICAgICAgIGNvbnN0IHJhdyA9IGsucmVwbGFjZSgvXmFueS8sIFwiXCIpO1xuICAgICAgICBjb25zdCBzcGFjZWQgPSByYXdcbiAgICAgICAgICAucmVwbGFjZSgvKFthLXpdKShbQS1aXSkvZywgXCIkMSAkMlwiKVxuICAgICAgICAgIC5zcGxpdChcIiBcIilcbiAgICAgICAgICAubWFwKGNhcClcbiAgICAgICAgICAuam9pbihcIiBcIik7XG4gICAgICAgIG91dC5hZGQoYENob29zZSAke3Z9ICR7c3BhY2VkfWApO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiBbLi4ub3V0XTtcbn07XG5cbmV4cG9ydCBjb25zdCBBTExfRklFTERfREVGUzogRmllbGREZWZbXSA9IFtcbiAgLy8gXHUyNTAwXHUyNTAwXHUyNTAwIENvcmUgXHUyNTAwXHUyNTAwXHUyNTAwXG4gIHsgY2FsbFNpZ246IFwiTkFNRVwiLCAganNvbktleTogXCJuYW1lXCIgfSxcbntcbiAgY2FsbFNpZ246IFwiU09VUkNFXCIsXG4gIGpzb25LZXk6IFtcInNvdXJjZVwiXSxcbiAgY29udjogKHJhdzogYW55LCBhbGxKc29uOiBhbnkpOiBzdHJpbmdbXSA9PiB7XG4gICAgY29uc3Qgb3V0ID0gbmV3IFNldDxzdHJpbmc+KCk7XG4gICAgY29uc3QgZWRpdGlvbklkID0gKGFsbEpzb24gYXMgYW55KS5fZWRpdGlvbklkO1xuXG4gICAgLy8gMSkgcHJpbWFyeSBzb3VyY2UocylcbiAgICBjb25zdCBhcnIgPSBBcnJheS5pc0FycmF5KHJhdykgPyByYXcgOiBbcmF3XTtcbiAgICBhcnIuZm9yRWFjaChzcmMgPT4ge1xuICAgICAgb3V0LmFkZChnZXRGdWxsU291cmNlTmFtZShzcmMsIGVkaXRpb25JZCkpO1xuICAgIH0pO1xuXG4gICAgLy8gMikgYW55IG90aGVyU291cmNlcyBlbnRyaWVzXG4gICAgZm9yIChjb25zdCBvcyBvZiBhbGxKc29uLm90aGVyU291cmNlcyA/PyBbXSkge1xuICAgICAgaWYgKG9zICYmIHR5cGVvZiBvcy5zb3VyY2UgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgb3V0LmFkZChnZXRGdWxsU291cmNlTmFtZShvcy5zb3VyY2UsIGVkaXRpb25JZCkpO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIDMpIHJlcHJpbnRlZEFzIGVudHJpZXMgKGd1YXJkIGJlZm9yZSBzcGxpdHRpbmcpXG4gICAgZm9yIChjb25zdCByZXAgb2YgYWxsSnNvbi5yZXByaW50ZWRBcyA/PyBbXSkge1xuICAgICAgLy8gZW5zdXJlIHdlIGhhdmUgYSBzdHJpbmcgdG8gc3BsaXRcbiAgICAgIGNvbnN0IHJlcFN0ciA9IHR5cGVvZiByZXAgPT09IFwic3RyaW5nXCIgPyByZXAgOiBTdHJpbmcocmVwKTtcbiAgICAgIGNvbnN0IHBhcnRzID0gcmVwU3RyLnNwbGl0KFwifFwiKTtcbiAgICAgIC8vIGlmIHRoZXJlJ3Mgbm8gcGlwZSwgcGFydHNbMV0gd2lsbCBiZSB1bmRlZmluZWQsIHNvIGZhbGxiYWNrIHRvIHBhcnRzWzBdXG4gICAgICBjb25zdCBzcmMgPSBwYXJ0c1sxXSA/PyBwYXJ0c1swXTtcbiAgICAgIG91dC5hZGQoZ2V0RnVsbFNvdXJjZU5hbWUoc3JjLCBlZGl0aW9uSWQpKTtcbiAgICB9XG5cbiAgICByZXR1cm4gWy4uLm91dF07XG4gIH1cbn0sXG5cblxuICAvLyBcdTI1MDBcdTI1MDBcdTI1MDAgUHJvZmljaWVuY2llcyBcdTI1MDBcdTI1MDBcdTI1MDBcbiAgeyBjYWxsU2lnbjogXCJBUk1PUl9QUk9GSUNJRU5DSUVTXCIsICBqc29uS2V5OiBbXCJhcm1vclByb2ZpY2llbmNpZXNcIiwgXCJhcm1vclByb2ZzXCIsIFwic3RhcnRpbmdQcm9maWNpZW5jaWVzXCJdLCBjb252OiB1bmlmaWVkQXJtb3JQcm9mcyB9LFxuICB7IFxuICAgIGNhbGxTaWduOiBcIldFQVBPTl9QUk9GSUNJRU5DSUVTXCIsXG4gICAganNvbktleTogW1wid2VhcG9uUHJvZmljaWVuY2llc1wiLFwid2VhcG9uUHJvZnNcIixcInN0YXJ0aW5nUHJvZmljaWVuY2llc1wiXSxcbiAgICBjb252OiB1bmlmaWVkV2VhcG9uUHJvZnNcbiAgfSxcbiAgeyBjYWxsU2lnbjogXCJUT09MX1BST0ZJQ0lFTkNJRVNcIiwgICBqc29uS2V5OiBbXCJ0b29sUHJvZmljaWVuY2llc1wiLCBcInRvb2xQcm9mc1wiLCBcInN0YXJ0aW5nUHJvZmljaWVuY2llc1wiXSwgY29udjogdW5pZmllZFRvb2xQcm9mcyB9LFxuICB7XG4gICAgY2FsbFNpZ246IFwiVE9PTF9DSE9JQ0VfTElTVFwiLFxuICAgIGpzb25LZXk6IFtcInRvb2xQcm9maWNpZW5jaWVzXCIsIFwidG9vbFByb2ZzXCIsIFwic3RhcnRpbmdQcm9maWNpZW5jaWVzXCJdLFxuICAgIGNvbnY6IChyYXc6IGFueSkgPT4ge1xuICAgICAgY29uc3QgYXJyID0gQXJyYXkuaXNBcnJheShyYXcpXG4gICAgICAgID8gcmF3XG4gICAgICAgIDogQXJyYXkuaXNBcnJheShyYXc/LnRvb2xQcm9maWNpZW5jaWVzKVxuICAgICAgICA/IHJhdy50b29sUHJvZmljaWVuY2llc1xuICAgICAgICA6IEFycmF5LmlzQXJyYXkocmF3Py50b29scylcbiAgICAgICAgPyByYXcudG9vbHNcbiAgICAgICAgOiBbXTtcbiAgICAgIGNvbnN0IGNob2ljZSA9IGFyci5maW5kKChlOiBhbnkpID0+IGU/LmNob29zZSk7XG4gICAgICByZXR1cm4gY2hvaWNlPy5jaG9vc2U/LmZyb20/Lm1hcCgoczogc3RyaW5nKSA9PiBjYXAocykpID8/IFtdO1xuICAgIH1cbiAgfSxcbiAgeyBjYWxsU2lnbjogXCJTQVZJTkdfVEhST1dTXCIsICAgICAgICBqc29uS2V5OiBbXCJzYXZlXCIsIFwicHJvZmljaWVuY3lcIl0sIGNvbnY6IHVuaWZpZWRTYXZlcyB9LFxuICB7XG4gICAgY2FsbFNpZ246IFwiU0tJTExTXCIsXG4gICAganNvbktleTogW1wic2tpbGxcIiwgXCJza2lsbFByb2ZcIiwgXCJza2lsbFByb2ZpY2llbmNpZXNcIiwgXCJzdGFydGluZ1Byb2ZpY2llbmNpZXNcIl0sXG4gICAgY29udjogdW5pZmllZFNraWxsc1xuICB9LFxuXG4gIHtcbiAgICBjYWxsU2lnbjogXCJTS0lMTF9DSE9JQ0VfTElTVFwiLFxuICAgIGpzb25LZXk6IFtcInNraWxsXCIsIFwic2tpbGxQcm9mXCIsIFwic2tpbGxQcm9maWNpZW5jaWVzXCIsIFwic3RhcnRpbmdQcm9maWNpZW5jaWVzXCJdLFxuICAgIGNvbnY6IChyYXc6IGFueSkgPT4ge1xuICAgICAgLy8gbm9ybWFsaXplIGludG8gYW4gYXJyYXkgb2YgZW50cmllc1xuICAgICAgY29uc3QgYXJyOiBhbnlbXSA9IEFycmF5LmlzQXJyYXkocmF3KVxuICAgICAgICA/IHJhd1xuICAgICAgICA6IEFycmF5LmlzQXJyYXkocmF3Py5za2lsbFByb2ZpY2llbmNpZXMpXG4gICAgICAgID8gcmF3LnNraWxsUHJvZmljaWVuY2llc1xuICAgICAgICA6IEFycmF5LmlzQXJyYXkocmF3Py5za2lsbHMpXG4gICAgICAgID8gcmF3LnNraWxsc1xuICAgICAgICA6IEFycmF5LmlzQXJyYXkocmF3Py5za2lsbFByb2YpXG4gICAgICAgID8gcmF3LnNraWxsUHJvZlxuICAgICAgICA6IFtdO1xuXG4gICAgICAvLyBmaW5kIHRoZSBvbmUgZW50cnkgdGhhdCByZXByZXNlbnRzIHRoZSBcdTIwMUNjaG9vc2VcdTIwMUQgYnVja2V0XG4gICAgICBjb25zdCBjaG9pY2VPYmogPSBhcnIuZmluZChlID0+IGU/LmNob29zZSB8fCB0eXBlb2YgZS5hbnkgPT09IFwibnVtYmVyXCIpO1xuICAgICAgaWYgKCFjaG9pY2VPYmopIHJldHVybiBbXTtcblxuICAgICAgLy8gZXhwbGljaXQgXHUyMDFDY2hvb3NlIGZyb20gWyAuLi4gXVx1MjAxRFxuICAgICAgaWYgKGNob2ljZU9iai5jaG9vc2UgJiYgQXJyYXkuaXNBcnJheShjaG9pY2VPYmouY2hvb3NlLmZyb20pKSB7XG4gICAgICAgIHJldHVybiBjaG9pY2VPYmouY2hvb3NlLmZyb20ubWFwKGNhcCk7XG4gICAgICB9XG5cbiAgICAgIC8vIHRoZSBcdTIwMUNhbnk6IDNcdTIwMUQgc2hvcnRoYW5kIFx1MjE5MiBvZmZlciBldmVyeSBza2lsbFxuICAgICAgaWYgKHR5cGVvZiBjaG9pY2VPYmouYW55ID09PSBcIm51bWJlclwiKSB7XG4gICAgICAgIC8vIFNLSUxMX09QVElPTlMgaXMgeW91ciBjb25zdCBbXCJBY3JvYmF0aWNzXCIsIFwiQW5pbWFsIEhhbmRsaW5nXCIsIFx1MjAyNl1cbiAgICAgICAgcmV0dXJuIFNLSUxMX09QVElPTlM7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBbXTtcbiAgICB9XG4gIH0sXG4gIHsgY2FsbFNpZ246IFwiU1BFTExfQ0FTVF9NT0RcIixqc29uS2V5OiBcInNwZWxsY2FzdGluZ0FiaWxpdHlcIiwgIFxuICAgIGNvbnY6IChyYXcpID0+IHtcbiAgICAvLyByYXcgbWlnaHQgYmUgXCJjaGFcIiBvciBcIkNIQVwiXG4gICAgY29uc3Qga2V5ID0gU3RyaW5nKHJhdykudG9Mb3dlckNhc2UoKTtcbiAgICByZXR1cm4gQUJJTElUWV9GVUxMW2tleV0gfHwga2V5LnRvVXBwZXJDYXNlKCk7XG4gIH19LFxuXG5cbiAgLy8gXHUyNTAwXHUyNTAwXHUyNTAwIFNwZWxscyBcdTI1MDBcdTI1MDBcdTI1MDBcbiAgeyBjYWxsU2lnbjogXCJMRVZFTFwiLCAgICAgICAgIGpzb25LZXk6IFwibGV2ZWxcIiB9LFxuICB7IGNhbGxTaWduOiBcIlNDSE9PTFwiLCAgICAgICAganNvbktleTogXCJzY2hvb2xcIiwgICBjb252OiBzID0+IFNDSE9PTF9NQVBbc10gPz8gcyB9LFxuICB7IGNhbGxTaWduOiBcIkNBU1RJTkdfVElNRVwiLCAganNvbktleTogXCJ0aW1lXCIsICAgICBjb252OiBmb3JtYXRUaW1lIH0sXG4gIHsgY2FsbFNpZ246IFwiU1BFTExfUkFOR0VcIiwgICBqc29uS2V5OiBcInJhbmdlXCIsICAgIGNvbnY6IGZvcm1hdFJhbmdlIH0sXG4gIHsgY2FsbFNpZ246IFwiRFVSQVRJT05cIiwgICAgICBqc29uS2V5OiBcImR1cmF0aW9uXCIsIGNvbnY6IGZvcm1hdER1cmF0aW9uIH0sXG4gIHsgY2FsbFNpZ246IFwiVkVSQkFMXCIsICAgICAgICBqc29uS2V5OiBcImNvbXBvbmVudHNcIiwgY29udjogKGM6YW55KSA9PiAhIWMudiB9LFxuICB7IGNhbGxTaWduOiBcIlNPTUFUSUNcIiwgICAgICAganNvbktleTogXCJjb21wb25lbnRzXCIsIGNvbnY6IChjOmFueSkgPT4gISFjLnMgfSxcbiAgeyBjYWxsU2lnbjogXCJNQVRFUklBTFwiLCAgICAgIGpzb25LZXk6IFwiY29tcG9uZW50c1wiLCBjb252OiAoYzphbnkpID0+ICEhYy5tIH0sXG4gIHsgY2FsbFNpZ246IFwiQ09NUE9ORU5UU1wiLFxuICAgIGpzb25LZXk6ICBcImNvbXBvbmVudHNcIixcbiAgICBjb252OiAoYzogYW55KTogc3RyaW5nW10gPT4ge1xuICAgICAgaWYgKCFjLm0pIHJldHVybiBbXTtcblxuICAgICAgY29uc3QgcmF3ID0gQXJyYXkuaXNBcnJheShjLm0pID8gYy5tIDogW2MubV07XG5cbiAgICAgIHJldHVybiByYXdcbiAgICAgICAgLm1hcCgoaXRlbTogYW55KTogc3RyaW5nIHwgbnVsbCA9PiB7XG4gICAgICAgICAgaWYgKHR5cGVvZiBpdGVtID09PSBcInN0cmluZ1wiKSByZXR1cm4gaXRlbTtcbiAgICAgICAgICBpZiAoaXRlbSAmJiB0eXBlb2YgaXRlbSA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgaXRlbS50ZXh0ID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICByZXR1cm4gaXRlbS50ZXh0O1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfSlcbiAgICAgICAgLmZpbHRlcigoY29tcDogc3RyaW5nIHwgbnVsbCk6IGNvbXAgaXMgc3RyaW5nID0+IGNvbXAgIT09IG51bGwpO1xuICAgIH1cbiAgfSwgXG4gIHsgY2FsbFNpZ246IFwiQVRUQUNLX1RZUEVcIiwgICBqc29uS2V5OiBcImF0dGFja1R5cGVcIiB9LFxuICB7IGNhbGxTaWduOiBcIkRBTUFHRV9UWVBFXCIsICAganNvbktleTogXCJkYW1hZ2VJbmZsaWN0XCIsIGNvbnY6IGQgPT4gQXJyYXkuaXNBcnJheShkKSA/IGRbMF0gOiBkIH0sXG4gIHsgY2FsbFNpZ246IFwiUklUVUFMXCIsICAgICAgICBqc29uS2V5OiBcInJpdHVhbFwiIH0sXG4gIHsgY2FsbFNpZ246IFwiQ09OQ0VOVFJBVElPTlwiLCBqc29uS2V5OiBcImR1cmF0aW9uXCIsIGNvbnY6IGRzID0+IEFycmF5LmlzQXJyYXkoZHMpICYmIGRzLnNvbWUoKHg6YW55KT0+IHguY29uY2VudHJhdGlvbikgfSxcbiAgeyBjYWxsU2lnbjogXCJTQVZFXCIsICAgICAgICAgIGpzb25LZXk6IFwic2F2ZUF0dHJcIiB9LFxuXG4gIC8vIFx1MjUwMFx1MjUwMFx1MjUwMCBTcGVjaWVzIC8gQ3JlYXR1cmVzIFx1MjUwMFx1MjUwMFx1MjUwMFxuICB7IGNhbGxTaWduOiBcIlNQRUNJRVNcIiwganNvbktleTogXCJuYW1lXCIgfSxcbiAgeyBjYWxsU2lnbjogXCJTSVpFXCIsIGpzb25LZXk6IFwic2l6ZVwiLCBjb252OiAocmF3OiBhbnkpID0+IHtcbiAgICAgIC8vIGhhbmRsZSBbXCJTXCIsXCJNXCJdIG9yIGp1c3QgXCJMXCJcbiAgICAgIGlmIChBcnJheS5pc0FycmF5KHJhdykpIHtcbiAgICAgICAgcmV0dXJuIHJhdy5tYXAociA9PiBTSVpFX01BUFtyXSB8fCByKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBTSVpFX01BUFtyYXddIHx8IHJhdztcbiAgICAgIH1cbiAgICB9XG4gIH0sXG4gICAge1xuICBjYWxsU2lnbjogXCJTUEVFRFwiLFxuICBqc29uS2V5OiAgIFwic3BlZWRcIixcbiAgY29udjogKHNwOiBudW1iZXIgfCBSZWNvcmQ8c3RyaW5nLCBhbnk+KSA9PiB7XG4gICAgLy8gaGFuZGxlIGJvdGggbnVtZXJpYyBzcGVlZHMgYW5kIG9iamVjdCBzcGVlZHNcbiAgICBpZiAodHlwZW9mIHNwID09PSBcIm51bWJlclwiKSB7XG4gICAgICByZXR1cm4gW2BXYWxrICR7c3B9IGZ0LmBdO1xuICAgIH1cbiAgICBpZiAoIXNwIHx8IHR5cGVvZiBzcCAhPT0gXCJvYmplY3RcIikgcmV0dXJuIFtdO1xuICAgIHJldHVybiBPYmplY3QuZW50cmllcyhzcClcbiAgICAgIC5maWx0ZXIoKFttb2RlXSkgPT4gbW9kZSAhPT0gXCJjYW5Ib3ZlclwiKVxuICAgICAgLm1hcCgoW21vZGUsIHZdKSA9PiB7XG4gICAgICAgIGNvbnN0IG4gPSB0eXBlb2YgdiA9PT0gXCJvYmplY3RcIiAmJiB2ICE9PSBudWxsICYmIFwibnVtYmVyXCIgaW4gdiA/ICh2IGFzIGFueSkubnVtYmVyIDogdjtcbiAgICAgICAgY29uc3QgbGFiZWwgPSBtb2RlID09PSBcIndhbGtcIiA/IFwiV2Fsa1wiIDogY2FwKG1vZGUpO1xuICAgICAgICByZXR1cm4gYCR7bGFiZWx9ICR7bn0gZnQuYDtcbiAgICAgIH0pO1xuICB9LFxufSxcbnsgY2FsbFNpZ246IFwiTEFOR1VBR0VTXCIsIGpzb25LZXk6IFtcImxhbmd1YWdlc1wiLCBcImxhbmd1YWdlUHJvZmljaWVuY2llc1wiXSwgY29udjogYXJyID0+IHtcbiAgICAgIGlmICghQXJyYXkuaXNBcnJheShhcnIpKSByZXR1cm4gW107XG4gICAgICBjb25zdCBvdXQ6IHN0cmluZ1tdID0gW107XG4gICAgICBmb3IgKGNvbnN0IGxwIG9mIGFycikge1xuICAgICAgICBpZiAodHlwZW9mIGxwID09PSBcInN0cmluZ1wiKSBvdXQucHVzaChjYXAobHApKTtcbiAgICAgICAgZWxzZSBpZiAodHlwZW9mIGxwID09PSBcIm9iamVjdFwiKSB7XG4gICAgICAgICAgZm9yIChjb25zdCBbbGFuZywgdmFsXSBvZiBPYmplY3QuZW50cmllcyhscCkpIHtcbiAgICAgICAgICAgIGlmICh2YWwpIG91dC5wdXNoKGNhcChsYW5nKSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gWy4uLm5ldyBTZXQob3V0KV07XG4gIH19LFxuICB7IGNhbGxTaWduOiBcIlNFTlNFU1wiLCBqc29uS2V5OiBcInNlbnNlc1wiLCBjb252OiBzZW4gPT4ge1xuICAgICAgaWYgKEFycmF5LmlzQXJyYXkoc2VuKSkgcmV0dXJuIHNlbi5tYXAoKHM6c3RyaW5nKT0+cy5yZXBsYWNlKC9eXFxkK1xccyovLFwiXCIpLnJlcGxhY2UoL14uLyxjPT5jLnRvVXBwZXJDYXNlKCkpKTtcbiAgICAgIGlmIChzZW4gJiYgdHlwZW9mIHNlbj09PVwib2JqZWN0XCIpIHJldHVybiBPYmplY3QuZW50cmllcyhzZW4pLm1hcCgoW2ssdl0pPT5gJHtrLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpK2suc2xpY2UoMSl9ICR7dn1gKTtcbiAgICAgIHJldHVybiBbXTtcbiAgfX0sIFxue1xuICBjYWxsU2lnbjogXCJUUkFJVFNcIixcbiAganNvbktleTogW1wiY2xhc3NGZWF0dXJlc1wiLCBcImVudHJpZXNcIl0sXG4gIGNvbnY6IChyYXc6IGFueSwgYWxsSnNvbjogYW55KTogc3RyaW5nW10gPT4ge1xuICAgIC8vIHB1bGwgdGhlIGNsYXNzIHJlY29yZCBzbyB3ZSBrbm93IGl0cyBkaXNwbGF5IG5hbWVcbiAgICBjb25zdCBjbHNSZWMgPSBBcnJheS5pc0FycmF5KGFsbEpzb24uY2xhc3MpID8gYWxsSnNvbi5jbGFzc1swXSA6IGFsbEpzb247XG4gICAgY29uc3QgY2xhc3NOYW1lID0gdHlwZW9mIGNsc1JlYy5uYW1lID09PSBcInN0cmluZ1wiID8gY2xzUmVjLm5hbWUgOiBcIlwiO1xuXG4gICAgLy8gbmFtZXMgd2UgbmV2ZXIgd2FudCB0byBlbWl0XG4gICAgY29uc3Qgb21pdCA9IG5ldyBTZXQoW1xuICAgICAgXCJBYmlsaXR5IFNjb3JlIEltcHJvdmVtZW50XCIsXG4gICAgICBcIkFyY2hldHlwZSBGZWF0dXJlXCIsXG4gICAgICBcIlN1YmNsYXNzIEZlYXR1cmVcIixcbiAgICAgIC8vIGFkZCBtb3JlIGlmIHlvdSBsaWtlXHUyMDI2XG4gICAgXSk7XG4gICAgY29uc3Qgc2VlbiA9IG5ldyBTZXQ8c3RyaW5nPigpO1xuXG4gICAgLy8gMSkgaWYgdGhlcmUncyBhIGNsYXNzRmVhdHVyZXMgYXJyYXksIHVzZSBpdFxuICAgIGlmIChBcnJheS5pc0FycmF5KGFsbEpzb24uY2xhc3NGZWF0dXJlcykpIHtcbiAgICAgIHJldHVybiBhbGxKc29uLmNsYXNzRmVhdHVyZXMuZmxhdE1hcCgoZmVhdDogYW55KSA9PiB7XG4gICAgICAgIC8vIHNraXAgc3ViY2xhc3NcdTIwMTBpbmplY3RlZCBmZWF0dXJlcyBlbnRpcmVseVxuICAgICAgICBpZiAoZmVhdCAmJiB0eXBlb2YgZmVhdCA9PT0gXCJvYmplY3RcIiAmJiBmZWF0LmdhaW5TdWJjbGFzc0ZlYXR1cmUpIHJldHVybiBbXTtcblxuICAgICAgICAvLyBub3JtYWxpemUgdG8gYSBzdHJpbmdcbiAgICAgICAgY29uc3QgcmF3TmFtZSA9XG4gICAgICAgICAgdHlwZW9mIGZlYXQgPT09IFwic3RyaW5nXCJcbiAgICAgICAgICAgID8gZmVhdFxuICAgICAgICAgICAgOiB0eXBlb2YgZmVhdC5jbGFzc0ZlYXR1cmUgPT09IFwic3RyaW5nXCJcbiAgICAgICAgICAgID8gZmVhdC5jbGFzc0ZlYXR1cmVcbiAgICAgICAgICAgIDogXCJcIjtcblxuICAgICAgICAvLyBkcm9wIGV2ZXJ5dGhpbmcgYWZ0ZXIgdGhlIGZpcnN0IFx1MjAxQ3xcdTIwMURcbiAgICAgICAgY29uc3QgbmFtZSA9IHJhd05hbWUuc3BsaXQoXCJ8XCIpWzBdLnRyaW0oKTtcbiAgICAgICAgaWYgKCFuYW1lIHx8IG9taXQuaGFzKG5hbWUpIHx8IHNlZW4uaGFzKG5hbWUpKSByZXR1cm4gW107XG4gICAgICAgIHNlZW4uYWRkKG5hbWUpO1xuXG4gICAgICAgIC8vIGJ1aWxkIGEgbmljZSBhbmNob3IgKG11c3QgbWF0Y2ggeW91ciBoZWFkZXJzKVxuICAgICAgICBjb25zdCBhbmNob3IgPSBuYW1lXG4gICAgICAgICAgLnJlcGxhY2UoL1teXFx3XFxzXS9nLCBcIlwiKSAgICAvLyBzdHJpcCBwdW5jdHVhdGlvblxuICAgICAgICAgIC5yZXBsYWNlKC9cXHMrL2csIFwiIFwiKSAgICAgICAvLyBjb2xsYXBzZSBzcGFjZXNcbiAgICAgICAgICAudHJpbSgpXG4gICAgICAgICAgLnJlcGxhY2UoL1xcYlxcdy9nLCAoYzogYW55KSA9PiBjLnRvVXBwZXJDYXNlKCkpOyAvLyBUaXRsZSBDYXNlXG5cbiAgICAgICAgLy8gcHJvZHVjZSBhIGZpbGUtYW5jaG9yIGxpbmtcbiAgICAgICAgcmV0dXJuIGBbWyR7Y2xhc3NOYW1lfSMke2FuY2hvcn18JHtuYW1lfV1dYDtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIDIpIG90aGVyd2lzZSBmYWxsIGJhY2sgdG8geW91ciBvbGQgZW50cmllcy1iYXNlZCBsb2dpY1xuICAgIGNvbnN0IGVudHMgPSBBcnJheS5pc0FycmF5KHJhdykgPyByYXcgOiBbXTtcbiAgICBjb25zdCBmZWF0dXJlTmFtZXMgPSBlbnRzXG4gICAgICAuZmlsdGVyKChlOiBhbnkpID0+IGU/LmRhdGE/LmlzRmVhdHVyZSAmJiB0eXBlb2YgZS5uYW1lID09PSBcInN0cmluZ1wiKVxuICAgICAgLm1hcCgoZTogYW55KSA9PiBlLm5hbWUucmVwbGFjZSgvXkZlYXR1cmU6XFxzKi8sIFwiXCIpLnRyaW0oKSk7XG4gICAgaWYgKGZlYXR1cmVOYW1lcy5sZW5ndGgpIHJldHVybiBmZWF0dXJlTmFtZXM7XG5cbiAgICByZXR1cm4gZW50c1xuICAgICAgLmZpbHRlcigoZTogYW55KSA9PiBlICYmIHR5cGVvZiBlLm5hbWUgPT09IFwic3RyaW5nXCIpXG4gICAgICAubWFwKChlOiBhbnkpID0+IGUubmFtZS5yZXBsYWNlKC9eRmVhdHVyZTpcXHMqLywgXCJcIikudHJpbSgpKTtcbiAgfSxcbn0sXG5cblxuICB7IGNhbGxTaWduOiBcIkFDXCIsIGpzb25LZXk6IFwiYWNcIiwgY29udjogYSA9PiBBcnJheS5pc0FycmF5KGEpP2FbMF0uYWM6YSB9LFxuICB7IGNhbGxTaWduOiBcIkhQXCIsIGpzb25LZXk6IFwiaHBcIiwgY29udjogaHAgPT4gaHA/LmF2ZXJhZ2UgPz8gaHAgfSxcbiAgeyBjYWxsU2lnbjogXCJDSEFMTEVOR0VfUkFUSU5HXCIsIGpzb25LZXk6IFwiY3JcIiB9LFxuICB7IGNhbGxTaWduOiBcIlNUUkVOR1RIXCIsICAgICBqc29uS2V5OiBcImFiaWxpdHlcIiwgY29udjogYXJyPT5BcnJheS5pc0FycmF5KGFycik/YXJyWzBdOmFycj8uc3RyID8/IDAgfSxcbiAgeyBjYWxsU2lnbjogXCJERVhURVJJVFlcIiwgICAganNvbktleTogXCJhYmlsaXR5XCIsIGNvbnY6IGFycj0+QXJyYXkuaXNBcnJheShhcnIpP2FyclsxXTphcnI/LmRleCA/PyAwIH0sXG4gIHsgY2FsbFNpZ246IFwiQ09OU1RJVFVUSU9OXCIsIGpzb25LZXk6IFwiYWJpbGl0eVwiLCBjb252OiBhcnI9PkFycmF5LmlzQXJyYXkoYXJyKT9hcnJbMl06YXJyPy5jb24gPz8gMCB9LFxuICB7IGNhbGxTaWduOiBcIklOVEVMTElHRU5DRVwiLCBqc29uS2V5OiBcImFiaWxpdHlcIiwgY29udjogYXJyPT5BcnJheS5pc0FycmF5KGFycik/YXJyWzNdOmFycj8uaW50ID8/IDAgfSxcbiAgeyBjYWxsU2lnbjogXCJXSVNET01cIiwgICAgICAganNvbktleTogXCJhYmlsaXR5XCIsIGNvbnY6IGFycj0+QXJyYXkuaXNBcnJheShhcnIpP2Fycls0XTphcnI/LndpcyA/PyAwIH0sXG4gIHsgY2FsbFNpZ246IFwiQ0hBUklTTUFcIiwgICAgIGpzb25LZXk6IFwiYWJpbGl0eVwiLCBjb252OiBhcnI9PkFycmF5LmlzQXJyYXkoYXJyKT9hcnJbNV06YXJyPy5jaGEgPz8gMCB9LFxuICB7XG4gICAgY2FsbFNpZ246IFwiQUxJR05NRU5UXCIsXG4gICAganNvbktleTogXCJhbGlnbm1lbnRcIixcbiAgICBjb252OiAoYTogYW55KSA9PiB7XG4gICAgICBjb25zdCByYXcgPSBBcnJheS5pc0FycmF5KGEpID8gYS5qb2luKFwiIFwiKSA6IHR5cGVvZiBhID09PSBcInN0cmluZ1wiID8gYSA6IFN0cmluZyhhKTtcbiAgICAgIGNvbnN0IGNsZWFuZWQgPSByYXdcbiAgICAgICAgLnJlcGxhY2UoL1xcYkFcXGIvZywgXCJBbnlcIilcbiAgICAgICAgLnJlcGxhY2UoL1xcYlVcXGIvZywgXCJVbmFsaWduZWRcIilcbiAgICAgICAgLnJlcGxhY2UoL1xcYk5cXGIvZywgXCJOZXV0cmFsXCIpXG4gICAgICAgIC5yZXBsYWNlKC9cXGJMXFxiL2csIFwiTGF3ZnVsXCIpXG4gICAgICAgIC5yZXBsYWNlKC9cXGJDXFxiL2csIFwiQ2hhb3RpY1wiKVxuICAgICAgICAucmVwbGFjZSgvXFxiR1xcYi9nLCBcIkdvb2RcIilcbiAgICAgICAgLnJlcGxhY2UoL1xcYkVcXGIvZywgXCJFdmlsXCIpO1xuXG4gICAgICByZXR1cm4gZm9ybWF0QWxpZ25tZW50QWJicmV2KGNsZWFuZWQpOyAvLyByZXVzZSB5b3VyIG5vcm1hbGl6ZXIgaWYgaXQgZXhpc3RzXG4gICAgfVxuICB9LFxuICAgIHtcbiAgICAgIGNhbGxTaWduOiBcIlRZUEVcIixcbiAgICAgIGpzb25LZXk6IFwidHlwZVwiLFxuICAgICAgY29udjogKHQ6IGFueSk6IHN0cmluZyB8IHVuZGVmaW5lZCA9PiB7XG4gICAgICAgIC8vIDEpIElmIGl0XHUyMDE5cyBhIHNpbXBsZSBzdHJpbmcgY29kZSwgbWFwIGl0XG4gICAgICAgIGlmICh0eXBlb2YgdCA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgIC8vIGRpcmVjdCBsb29rdXBcdTIwMTRpZiBubyBtYXBwaW5nLCBqdXN0IHRpdGxlXHUyMDEwY2FzZSB0aGUgY29kZVxuICAgICAgICAgIHJldHVybiBJVEVNX1RZUEVfTUFQW3RdID8/IGNhcCh0KTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIDIpIElmIGl0XHUyMDE5cyBhbiBvYmplY3Qgd2l0aCBhIC50eXBlIHRhZ1xuICAgICAgICBpZiAodCAmJiB0eXBlb2YgdCA9PT0gXCJvYmplY3RcIikge1xuICAgICAgICAgIGNvbnN0IGNvZGUgPSBTdHJpbmcodC50eXBlIHx8IFwiXCIpLnRvVXBwZXJDYXNlKCk7XG4gICAgICAgICAgLy8gdHJ5IHRoZSBtYXAgZmlyc3RcbiAgICAgICAgICBpZiAoSVRFTV9UWVBFX01BUFtjb2RlXSkge1xuICAgICAgICAgICAgcmV0dXJuIElURU1fVFlQRV9NQVBbY29kZV07XG4gICAgICAgICAgfVxuICAgICAgICAgIC8vIG90aGVyd2lzZSBmYWxsIGJhY2sgdG8gXHUyMDFDQmFzZSAodGFnc1x1MjAyNilcdTIwMUQgc3R5bGVcbiAgICAgICAgICBjb25zdCBiYXNlID0gdC50eXBlID8gY2FwKHQudHlwZSkgOiBcIlVua25vd25cIjtcbiAgICAgICAgICBjb25zdCB0YWdzID0gQXJyYXkuaXNBcnJheSh0LnRhZ3MpID8gdC50YWdzLm1hcChjYXApIDogW107XG4gICAgICAgICAgcmV0dXJuIHRhZ3MubGVuZ3RoID8gYCR7YmFzZX0gKCR7dGFncy5qb2luKFwiLCBcIil9KWAgOiBiYXNlO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgIH1cbiAgICB9LFxuXG5cbiAgLy8gXHUyNTAwXHUyNTAwXHUyNTAwIEl0ZW1zIFx1MjUwMFx1MjUwMFx1MjUwMFxuICB7IGNhbGxTaWduOiBcIlRZUEVcIiwgICBqc29uS2V5OiBcIl9wYXJzZWRUeXBlXCIgfSxcbiAgeyBjYWxsU2lnbjogXCJSQVJJVFlcIiwganNvbktleTogXCJyYXJpdHlcIiwgY29udjogciA9PiB7XG4gICAgICBjb25zdCBzID0gU3RyaW5nKHJ8fFwiXCIpLnRvTG93ZXJDYXNlKCk7XG4gICAgICByZXR1cm4gcyAmJiBzIT09XCJub25lXCIgPyBzWzBdLnRvVXBwZXJDYXNlKCkrcy5zbGljZSgxKSA6IHVuZGVmaW5lZDtcbiAgfX0sXG4gIHtcbiAgICBjYWxsU2lnbjogXCJDT1NUXCIsXG4gICAganNvbktleTogXCJ2YWx1ZVwiLFxuICAgIGNvbnY6IChyYXc6IGFueSkgPT4ge1xuICAgICAgY29uc3QgcyA9IFN0cmluZyhyYXcpLnRyaW0oKS50b0xvd2VyQ2FzZSgpO1xuICAgICAgbGV0IG51bTogbnVtYmVyO1xuXG4gICAgICAvLyBleHBsaWNpdCBjb3BwZXI/XG4gICAgICBpZiAocy5lbmRzV2l0aChcImNwXCIpKSB7XG4gICAgICAgIG51bSA9IHBhcnNlRmxvYXQocyk7XG4gICAgICAgIC8vIGNvbnZlcnQgdG8gZ3Agb25seSBpZiAxMDArIGNwXG4gICAgICAgIHJldHVybiBudW0gPj0gMTAwXG4gICAgICAgICAgPyBgJHtNYXRoLnJvdW5kKChudW0vMTAwKSAqIDEwMCkvMTAwfWdwYFxuICAgICAgICAgIDogYCR7bnVtfWNwYDtcbiAgICAgIH1cblxuICAgICAgLy8gZXhwbGljaXQgc2lsdmVyP1xuICAgICAgaWYgKHMuZW5kc1dpdGgoXCJzcFwiKSkge1xuICAgICAgICBudW0gPSBwYXJzZUZsb2F0KHMpO1xuICAgICAgICAvLyBjb252ZXJ0IHRvIGdwIG9ubHkgaWYgMTArIHNwXG4gICAgICAgIHJldHVybiBudW0gPj0gMTBcbiAgICAgICAgICA/IGAke01hdGgucm91bmQoKG51bS8xMCkgKiAxMDApLzEwMH1ncGBcbiAgICAgICAgICA6IGAke251bX1zcGA7XG4gICAgICB9XG5cbiAgICAgIC8vIGV4cGxpY2l0IGdvbGQ/XG4gICAgICBpZiAocy5lbmRzV2l0aChcImdwXCIpKSB7XG4gICAgICAgIG51bSA9IHBhcnNlRmxvYXQocyk7XG4gICAgICAgIHJldHVybiBgJHtNYXRoLnJvdW5kKG51bSAqIDEwMCkvMTAwfWdwYDtcbiAgICAgIH1cblxuICAgICAgLy8gYmFyZSBudW1iZXIgXHUyMTkyIGFzc3VtZSBjb3BwZXJcbiAgICAgIG51bSA9IHBhcnNlRmxvYXQocykgfHwgMDtcbiAgICAgIHJldHVybiBudW0gPj0gMTAwXG4gICAgICAgID8gYCR7TWF0aC5yb3VuZCgobnVtLzEwMCkgKiAxMDApLzEwMH1ncGBcbiAgICAgICAgOiBgJHtudW19Y3BgO1xuICAgIH1cbiAgfSxcbiAgeyBjYWxsU2lnbjogXCJXRUlHSFRcIiwganNvbktleTogXCJ3ZWlnaHRcIiB9LFxuICB7IGNhbGxTaWduOiBcIk1BR0lDQUxcIiwganNvbktleTogXCJ3b25kcm91c1wiLCBjb252OiAoX3csYWxsKSA9PiAhIWFsbC53b25kcm91cyB8fCAhIWFsbC5yZXFBdHR1bmUgfSxcbiAgeyBjYWxsU2lnbjogXCJWQVJJQU5UXCIsIGpzb25LZXk6IFwiYm9udXNXZWFwb25cIiwgY29udjogYiA9PiB0eXBlb2YgYj09PVwic3RyaW5nXCIgJiYgYi5zdGFydHNXaXRoKFwiK1wiKSB9LFxuICB7IGNhbGxTaWduOiBcIlBST1BFUlRJRVNcIiwganNvbktleTogXCJwcm9wZXJ0eVwiLCBjb252OiBhcnIgPT4gQXJyYXkuaXNBcnJheShhcnIpID8gYXJyLm1hcChwID0+IFBST1BFUlRZX01BUFtwXSB8fCBwKSA6IFtdIH0sXG4gIHsgY2FsbFNpZ246IFwiREFNQUdFXCIsIGpzb25LZXk6IFwiZG1nMVwiLCBjb252OiAoZCxhbGwpID0+IGQgPyBhbGwuZG1nMiA/IGAke2R9IC8gJHthbGwuZG1nMn1gIDogYCR7ZH1gIDogdW5kZWZpbmVkIH0sXG4gIHsgY2FsbFNpZ246IFwiREFNQUdFX1RZUEVTXCIsIGpzb25LZXk6IFwiZG1nVHlwZVwiLCBjb252OiBkdCA9PiBkdCA9PSBudWxsID8gW10gOiBBcnJheS5pc0FycmF5KGR0KSA/IGR0IDogW2R0XSB9LFxuICB7IGNhbGxTaWduOiBcIlJBTkdFXCIsIGpzb25LZXk6IFwicmFuZ2VcIiB9LFxuICB7IGNhbGxTaWduOiBcIlJFTE9BRFwiLCBqc29uS2V5OiBcInJlbG9hZFwiIH0sXG4gIHsgY2FsbFNpZ246IFwiQU1NT19UWVBFXCIsIGpzb25LZXk6IFwiYW1tb1R5cGVcIiB9LFxuICB7IGNhbGxTaWduOiBcIlNURUFMVEhfRElTQURWQU5UQUdFXCIsIGpzb25LZXk6IFwic3RlYWx0aFwiIH0sXG4gIHtcbiAgICBjYWxsU2lnbjogXCJBVFRVTkVNRU5UXCIsXG4gICAganNvbktleTogW1wid29uZHJvdXNcIiwgXCJyZXFBdHR1bmVcIiwgXCJyZXFfYXR0dW5lXCIsIFwicmVxQXR0dW5lVGFnc1wiXSxcbiAgICBjb252OiAoX3JhdywgYWxsSnNvbikgPT4ge1xuICAgICAgY29uc3QgaiA9IGFsbEpzb24gYXMgYW55O1xuICAgICAgY29uc3QgaGFzVGV4dCA9IHR5cGVvZiBqLnJlcUF0dHVuZSA9PT0gXCJzdHJpbmdcIiAmJiBqLnJlcUF0dHVuZS50cmltKCkgIT09IFwiXCI7XG4gICAgICBjb25zdCBoYXNUYWdzID0gQXJyYXkuaXNBcnJheShqLnJlcUF0dHVuZVRhZ3MpICYmIGoucmVxQXR0dW5lVGFncy5sZW5ndGggPiAwO1xuICAgICAgcmV0dXJuIGhhc1RleHQgfHwgaGFzVGFncztcbiAgICB9XG4gIH0sXG4gICAge1xuICAgIGNhbGxTaWduOiBcIkFUVFVORV9SRVFcIixcbiAgICBqc29uS2V5OiBcInJlcUF0dHVuZVRhZ3NcIixcbiAgICBjb252OiAodGFnczogYW55W10gPSBbXSwgX2FsbCkgPT4ge1xuICAgICAgY29uc3QgbWFwTGV0dGVyOiBSZWNvcmQ8c3RyaW5nLHN0cmluZz4gPSB7XG4gICAgICAgIEE6IFwiQW55XCIsIFU6IFwiVW5hbGlnbmVkXCIsIE46IFwiTmV1dHJhbFwiLFxuICAgICAgICBMOiBcIkxhd2Z1bFwiLCBDOiBcIkNoYW90aWNcIiwgRzogXCJHb29kXCIsIEU6IFwiRXZpbFwiXG4gICAgICB9O1xuICAgICAgY29uc3QgcmVxczogc3RyaW5nW10gPSBbXTtcblxuICAgICAgZm9yIChjb25zdCB0YWcgb2YgdGFncykge1xuICAgICAgICBpZiAodGFnLmNsYXNzICYmIEFycmF5LmlzQXJyYXkodGFnLmFsaWdubWVudCkpIHtcbiAgICAgICAgICBjb25zdCBjbHMgPSBjYXAodGFnLmNsYXNzKTtcbiAgICAgICAgICBmb3IgKGNvbnN0IGNvZGUgb2YgdGFnLmFsaWdubWVudCkge1xuICAgICAgICAgICAgcmVxcy5wdXNoKGAke21hcExldHRlcltjb2RlXSB8fCBjb2RlfSAke2Nsc31gKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAodGFnLmNsYXNzKSB7XG4gICAgICAgICAgcmVxcy5wdXNoKGNhcCh0YWcuY2xhc3MpKTtcbiAgICAgICAgfSBlbHNlIGlmIChBcnJheS5pc0FycmF5KHRhZy5hbGlnbm1lbnQpKSB7XG4gICAgICAgICAgZm9yIChjb25zdCBjb2RlIG9mIHRhZy5hbGlnbm1lbnQpIHtcbiAgICAgICAgICAgIHJlcXMucHVzaChtYXBMZXR0ZXJbY29kZV0gfHwgY29kZSk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKHRhZy5iYWNrZ3JvdW5kKSB7XG4gICAgICAgICAgY29uc3QgW2JnXSA9IFN0cmluZyh0YWcuYmFja2dyb3VuZCkuc3BsaXQoXCJ8XCIpO1xuICAgICAgICAgIHJlcXMucHVzaChiZy5zcGxpdChcIiBcIikubWFwKGNhcCkuam9pbihcIiBcIikpO1xuICAgICAgICB9IGVsc2UgaWYgKHRhZy5zcGVsbGNhc3RpbmcpIHtcbiAgICAgICAgICByZXFzLnB1c2goXCJTcGVsbGNhc3RlclwiKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gQXJyYXkuZnJvbShuZXcgU2V0KHJlcXMpKTtcbiAgICB9XG4gIH0sXG4gICAge1xuICAgIGNhbGxTaWduOiBcIlZFUk1VTlwiLFxuICAgIGpzb25LZXk6IFwid29uZHJvdXNcIiwgICAgICAgICAgICAvLyBvciB3aGF0ZXZlciBwcm9wZXJ0eSB5b3UgdXNlIHRvIGRldGVjdCBcdTIwMUNtYWdpY2FsXHUyMDFEXG4gICAgY29udjogKF9yYXcsIGFsbCkgPT4gISFhbGwud29uZHJvdXMgfHwgISFhbGwucmVxQXR0dW5lXG4gIH0sXG4gIC8vIFx1MjUwMFx1MjUwMFx1MjUwMCBPdGhlciBcdTI1MDBcdTI1MDBcdTI1MDBcbiAgeyBjYWxsU2lnbjogXCJEQU1BR0VfUkVTXCIsIGpzb25LZXk6IFwicmVzaXN0XCIsIGNvbnY6IHYgPT4gQXJyYXkuaXNBcnJheSh2KSA/IHYubWFwKGNhcCkgOiBbXSB9LFxue1xuICBjYWxsU2lnbjogXCJSVUxFU0VUXCIsXG4gIGpzb25LZXk6IFwibmFtZVwiLFxuICAvLyBpZ25vcmUgdGhlIHJhdyB2YWx1ZSwgYWx3YXlzIHByaW50IEhFTExPXG4gIGNvbnY6IChfcmF3LCBfYWxsKSA9PiBcIkQmRCA1ZSAoMjAyNSlcIixcbn0sIFxuICAgIC8vIFx1MjUwMFx1MjUwMFx1MjUwMCBBYmlsaXR5XHUyMDEwc2NvcmUgbW9kaWZpZXJzIChvbmx5IGVtaXQgd2hlbiBub256ZXJvKSBcdTI1MDBcdTI1MDBcdTI1MDBcbiAge1xuICAgIGNhbGxTaWduOiBcIlNUUl9NT0RcIixcbiAgICBqc29uS2V5OiAgXCJhYmlsaXR5XCIsXG4gICAgY29udjogKGFycjogYW55KTogbnVtYmVyIHwgdW5kZWZpbmVkID0+IHtcbiAgICAgIGNvbnN0IHYgPSBBcnJheS5pc0FycmF5KGFycikgPyAoYXJyWzBdLnN0ciA/PyAwKSA6IChhcnIuc3RyID8/IDApO1xuICAgICAgcmV0dXJuIHYgIT09IDAgPyB2IDogdW5kZWZpbmVkO1xuICAgIH0sXG4gIH0sXG4gIHtcbiAgICBjYWxsU2lnbjogXCJERVhfTU9EXCIsXG4gICAganNvbktleTogIFwiYWJpbGl0eVwiLFxuICAgIGNvbnY6IChhcnI6IGFueSk6IG51bWJlciB8IHVuZGVmaW5lZCA9PiB7XG4gICAgICBjb25zdCB2ID0gQXJyYXkuaXNBcnJheShhcnIpID8gKGFyclswXS5kZXggPz8gMCkgOiAoYXJyLmRleCA/PyAwKTtcbiAgICAgIHJldHVybiB2ICE9PSAwID8gdiA6IHVuZGVmaW5lZDtcbiAgICB9LFxuICB9LFxuICB7XG4gICAgY2FsbFNpZ246IFwiQ09OX01PRFwiLFxuICAgIGpzb25LZXk6ICBcImFiaWxpdHlcIixcbiAgICBjb252OiAoYXJyOiBhbnkpOiBudW1iZXIgfCB1bmRlZmluZWQgPT4ge1xuICAgICAgY29uc3QgdiA9IEFycmF5LmlzQXJyYXkoYXJyKSA/IChhcnJbMF0uY29uID8/IDApIDogKGFyci5jb24gPz8gMCk7XG4gICAgICByZXR1cm4gdiAhPT0gMCA/IHYgOiB1bmRlZmluZWQ7XG4gICAgfSxcbiAgfSxcbiAge1xuICAgIGNhbGxTaWduOiBcIklOVF9NT0RcIixcbiAgICBqc29uS2V5OiAgXCJhYmlsaXR5XCIsXG4gICAgY29udjogKGFycjogYW55KTogbnVtYmVyIHwgdW5kZWZpbmVkID0+IHtcbiAgICAgIGNvbnN0IHYgPSBBcnJheS5pc0FycmF5KGFycikgPyAoYXJyWzBdLmludCA/PyAwKSA6IChhcnIuaW50ID8/IDApO1xuICAgICAgcmV0dXJuIHYgIT09IDAgPyB2IDogdW5kZWZpbmVkO1xuICAgIH0sXG4gIH0sXG4gIHtcbiAgICBjYWxsU2lnbjogXCJXSVNfTU9EXCIsXG4gICAganNvbktleTogIFwiYWJpbGl0eVwiLFxuICAgIGNvbnY6IChhcnI6IGFueSk6IG51bWJlciB8IHVuZGVmaW5lZCA9PiB7XG4gICAgICBjb25zdCB2ID0gQXJyYXkuaXNBcnJheShhcnIpID8gKGFyclswXS53aXMgPz8gMCkgOiAoYXJyLndpcyA/PyAwKTtcbiAgICAgIHJldHVybiB2ICE9PSAwID8gdiA6IHVuZGVmaW5lZDtcbiAgICB9LFxuICB9LFxuICB7XG4gICAgY2FsbFNpZ246IFwiQ0hBX01PRFwiLFxuICAgIGpzb25LZXk6ICBcImFiaWxpdHlcIixcbiAgICBjb252OiAoYXJyOiBhbnkpOiBudW1iZXIgfCB1bmRlZmluZWQgPT4ge1xuICAgICAgY29uc3QgdiA9IEFycmF5LmlzQXJyYXkoYXJyKSA/IChhcnJbMF0uY2hhID8/IDApIDogKGFyci5jaGEgPz8gMCk7XG4gICAgICByZXR1cm4gdiAhPT0gMCA/IHYgOiB1bmRlZmluZWQ7XG4gICAgfSxcbiAgfSxcblxuXG5dO1xuXG5cbi8vIFx1MjUwMFx1MjUwMFx1MjUwMCBHZW5lcmljIGJ1aWxkZXIgXHUyNTAwXHUyNTAwXHUyNTAwXG5leHBvcnQgZnVuY3Rpb24gYnVpbGRGTShqc29uOiBhbnksIGRlZnM6IEZpZWxkRGVmW10pOiBGcm9udG1hdHRlciB7XG4gIGNvbnN0IGZtOiBGcm9udG1hdHRlciA9IHt9O1xuICBmb3IgKGNvbnN0IHsgY2FsbFNpZ24sIGpzb25LZXksIGNvbnYgfSBvZiBkZWZzKSB7XG4gICAgY29uc3Qga2V5cyA9IEFycmF5LmlzQXJyYXkoanNvbktleSkgPyBqc29uS2V5IDogW2pzb25LZXldO1xuICAgIGxldCByYXc6IGFueSA9IHVuZGVmaW5lZDtcblxuICAgIGZvciAoY29uc3Qga2V5IG9mIGtleXMpIHtcbiAgICAgIGlmIChqc29uW2tleV0gIT0gbnVsbCkge1xuICAgICAgICByYXcgPSBqc29uW2tleV07XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChyYXcgPT0gbnVsbCkgY29udGludWU7XG4gICAgY29uc3QgdmFsID0gY29udiA/IGNvbnYocmF3LCBqc29uKSA6IHJhdztcbiAgICBmbVtGTV9GSUVMRFNbY2FsbFNpZ25dXSA9IHZhbDtcbiAgfVxuICByZXR1cm4gZm07XG59XG5cbi8vIGZyb250bWF0dGVyLnRzXG5cbmV4cG9ydCBmdW5jdGlvbiBzZXJpYWxpemVGcm9udG1hdHRlcihcbiAgZm06IEZyb250bWF0dGVyLFxuICBkZWZzPzogRmllbGREZWZbXVxuKTogc3RyaW5nIHtcbiAgY29uc3QgZmlsdGVyZWQ6IFJlY29yZDxzdHJpbmcsIGFueT4gPSB7fTtcblxuICAvLyBkZXRlY3QgaWYgd2UgaGF2ZSBhbnkgYWN0dWFsIGNob2ljZS1saXN0c1xuICBjb25zdCBoYXNTa2lsbENob2ljZSA9IEFycmF5LmlzQXJyYXkoZm1bRk1fRklFTERTLlNLSUxMX0NIT0lDRV9MSVNUXSkgXG4gICAgJiYgKGZtW0ZNX0ZJRUxEUy5TS0lMTF9DSE9JQ0VfTElTVF0gYXMgYW55W10pLmxlbmd0aCA+IDA7XG4gIGNvbnN0IGhhc1Rvb2xDaG9pY2UgPSBBcnJheS5pc0FycmF5KGZtW0ZNX0ZJRUxEUy5UT09MX0NIT0lDRV9MSVNUXSkgXG4gICAgJiYgKGZtW0ZNX0ZJRUxEUy5UT09MX0NIT0lDRV9MSVNUXSBhcyBhbnlbXSkubGVuZ3RoID4gMDtcblxuXG4gIGZvciAoY29uc3QgW2ssIHZdIG9mIE9iamVjdC5lbnRyaWVzKGZtKSkge1xuICAgIC8vIDEpIG5ldmVyIGVtaXQgdW5kZWZpbmVkXG4gICAgaWYgKHYgPT09IHVuZGVmaW5lZCkgY29udGludWU7XG4gICAgLy8gMikgZHJvcCBlbXB0eSBDT01QT05FTlRTLCBUT09MX0NIT0lDRV9MSVNULCBTS0lMTF9DSE9JQ0VfTElTVFxuICAgIGlmIChrID09PSBGTV9GSUVMRFMuQ09NUE9ORU5UUyAmJiBBcnJheS5pc0FycmF5KHYpICYmIHYubGVuZ3RoID09PSAwKSBjb250aW51ZTtcbiAgICBpZiAoXG4gICAgICAoayA9PT0gRk1fRklFTERTLlRPT0xfQ0hPSUNFX0xJU1QgfHwgayA9PT0gRk1fRklFTERTLlNLSUxMX0NIT0lDRV9MSVNUKSAmJlxuICAgICAgQXJyYXkuaXNBcnJheSh2KSAmJiB2Lmxlbmd0aCA9PT0gMFxuICAgICkgY29udGludWU7XG5cbiAgICBmaWx0ZXJlZFtrXSA9IHY7XG4gIH1cblxuICAvLyBidWlsZCB0aGUgbGlzdCBvZiBrZXlzIGluIHRoZSBleGFjdCBvcmRlciBmcm9tIGRlZnNcbiAgbGV0IGtleXNUb0VtaXQ6IHN0cmluZ1tdO1xuICBpZiAoZGVmcykge1xuICAgIC8vIG1hcCBlYWNoIEZpZWxkRGVmIHRvIGl0cyBmcm9udG1hdHRlciBrZXlcbiAgICBjb25zdCB3YW50ZWQgPSBkZWZzLm1hcChkID0+IEZNX0ZJRUxEU1tkLmNhbGxTaWduXSk7XG4gICAgLy8gb25seSBrZWVwIHRoZSBvbmVzIHdlIGFjdHVhbGx5IGhhdmUsIGluIG9yZGVyXG4gICAga2V5c1RvRW1pdCA9IHdhbnRlZC5maWx0ZXIoayA9PiBrIGluIGZpbHRlcmVkKTtcbiAgICAvLyB0aGVuIGFwcGVuZCBhbnkgZXh0cmEga2V5cyB0aGF0IHdlcmVuJ3QgaW4gZGVmc1xuICAgIGtleXNUb0VtaXQucHVzaChcbiAgICAgIC4uLk9iamVjdC5rZXlzKGZpbHRlcmVkKS5maWx0ZXIoayA9PiAha2V5c1RvRW1pdC5pbmNsdWRlcyhrKSlcbiAgICApO1xuICB9IGVsc2Uge1xuICAgIGtleXNUb0VtaXQgPSBPYmplY3Qua2V5cyhmaWx0ZXJlZCk7XG4gIH1cblxuICAvLyBub3cgZW1pdCBZQU1MIGluIHRoYXQgb3JkZXJcbiAgcmV0dXJuIGtleXNUb0VtaXRcbiAgICAubWFwKGsgPT4ge1xuICAgICAgY29uc3QgdiA9IGZpbHRlcmVkW2tdO1xuICAgICAgaWYgKEFycmF5LmlzQXJyYXkodikpIHtcbiAgICAgICAgLy8gSlNPTi5zdHJpbmdpZnkgdG8gaGFuZGxlIHNwYWNlcywgY29tbWFzLCBldGMuXG4gICAgICAgIGNvbnN0IGlubGluZSA9IHYubWFwKGl0ZW0gPT4gSlNPTi5zdHJpbmdpZnkoaXRlbSkpLmpvaW4oXCIsIFwiKTtcbiAgICAgICAgcmV0dXJuIGAke2t9OiBbJHtpbmxpbmV9XWA7XG4gICAgICB9XG4gICAgICBpZiAodHlwZW9mIHYgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgcmV0dXJuIGAke2t9OiBcIiR7dn1cImA7XG4gICAgICB9XG4gICAgICByZXR1cm4gYCR7a306ICR7dn1gO1xuICAgIH0pXG4gICAgLmpvaW4oXCJcXG5cIik7XG59XG5cblxuLy8gXHUyNTAwXHUyNTAwXHUyNTAwIFNraWxsIGhlbHBlcnMgXHUyNTAwXHUyNTAwXHUyNTAwXG5leHBvcnQgY29uc3QgU0tJTExfT1BUSU9OUyA9IFtcbiAgXCJBY3JvYmF0aWNzXCIsXCJBbmltYWwgSGFuZGxpbmdcIixcIkFyY2FuYVwiLFwiQXRobGV0aWNzXCIsXCJEZWNlcHRpb25cIixcIkhpc3RvcnlcIixcbiAgXCJJbnNpZ2h0XCIsXCJJbnRpbWlkYXRpb25cIixcIkludmVzdGlnYXRpb25cIixcIk1lZGljaW5lXCIsXCJOYXR1cmVcIixcIlBlcmNlcHRpb25cIixcbiAgXCJQZXJmb3JtYW5jZVwiLFwiUGVyc3Vhc2lvblwiLFwiUmVsaWdpb25cIixcIlNsZWlnaHQgb2YgSGFuZFwiLFwiU3RlYWx0aFwiLFwiU3Vydml2YWxcIixcbl0gYXMgY29uc3Q7XG5leHBvcnQgdHlwZSBTa2lsbE9wdGlvbiA9IHR5cGVvZiBTS0lMTF9PUFRJT05TW251bWJlcl07XG5leHBvcnQgZnVuY3Rpb24gbm9ybWFsaXplU2tpbGwocmF3OiBzdHJpbmcpOiBTa2lsbE9wdGlvbiB8IG51bGwge1xuICBjb25zdCBsb3dlciA9IHJhdy50cmltKCkudG9Mb3dlckNhc2UoKTtcbiAgcmV0dXJuIFNLSUxMX09QVElPTlMuZmluZChza2lsbCA9PiBza2lsbC50b0xvd2VyQ2FzZSgpID09PSBsb3dlcikgPz8gbnVsbDtcbn1cbmV4cG9ydCBmdW5jdGlvbiBmaWx0ZXJWYWxpZFNraWxscyhyYXdBcnI6IGFueVtdKTogU2tpbGxPcHRpb25bXSB7XG4gIGlmICghQXJyYXkuaXNBcnJheShyYXdBcnIpKSByZXR1cm4gW107XG4gIGNvbnN0IHNlZW4gPSBuZXcgU2V0PFNraWxsT3B0aW9uPigpO1xuICBmb3IgKGNvbnN0IGVudCBvZiByYXdBcnIpIHtcbiAgICBsZXQgY2FuZGlkYXRlOiBzdHJpbmcgfCB1bmRlZmluZWQ7XG4gICAgaWYgKHR5cGVvZiBlbnQgPT09IFwic3RyaW5nXCIpIGNhbmRpZGF0ZSA9IGVudDtcbiAgICBlbHNlIGlmIChlbnQubmFtZSAmJiB0eXBlb2YgZW50Lm5hbWUgPT09IFwic3RyaW5nXCIpIGNhbmRpZGF0ZSA9IGVudC5uYW1lO1xuICAgIGlmIChjYW5kaWRhdGUpIHtcbiAgICAgIGNvbnN0IG5vcm0gPSBub3JtYWxpemVTa2lsbChjYW5kaWRhdGUpO1xuICAgICAgaWYgKG5vcm0pIHNlZW4uYWRkKG5vcm0pO1xuICAgIH1cbiAgfVxuICByZXR1cm4gWy4uLnNlZW5dO1xufVxuXG4vLyBcdTI1MDBcdTI1MDBcdTI1MDAgV2hpY2ggRk1fS0VZUyBlYWNoIHBhcnNlciBzaG91bGQgaW5jbHVkZSBcdTI1MDBcdTI1MDBcdTI1MDBcbmV4cG9ydCBjb25zdCBTUEVMTF9LRVlTOiBGTUtleVtdID0gW1xuICBcIk5BTUVcIixcbiAgXCJMRVZFTFwiLFxuICBcIlNDSE9PTFwiLFxuICBcIkNBU1RJTkdfVElNRVwiLFxuICBcIlNQRUxMX1JBTkdFXCIsXG4gIFwiRFVSQVRJT05cIixcbiAgXCJWRVJCQUxcIixcbiAgXCJTT01BVElDXCIsXG4gIFwiTUFURVJJQUxcIixcbiAgXCJDT01QT05FTlRTXCIsXG4gIFwiQ09OQ0VOVFJBVElPTlwiLFxuICBcIlNPVVJDRVwiLFxuICBcIlJVTEVTRVRcIlxuXTtcblxuZXhwb3J0IGNvbnN0IFNQRUNJRVNfS0VZUzogRk1LZXlbXSA9IFtcbiAgXCJTUEVDSUVTXCIsXG4gIFwiU0laRVwiLFxuICBcIlNQRUVEXCIsXG4gIFwiTEFOR1VBR0VTXCIsXG4gIFwiVFJBSVRTXCIsXG4gIFwiU0tJTExTXCIsXG4gIFwiU1RSX01PRFwiLFxuICBcIkRFWF9NT0RcIixcbiAgXCJDT05fTU9EXCIsXG4gIFwiSU5UX01PRFwiLFxuICBcIldJU19NT0RcIixcbiAgXCJDSEFfTU9EXCIsXG4gIFwiU0tJTExfQ0hPSUNFX0xJU1RcIixcbiAgXCJUT09MX1BST0ZJQ0lFTkNJRVNcIixcbiAgXCJUT09MX0NIT0lDRV9MSVNUXCIsXG4gIFwiV0VBUE9OX1BST0ZJQ0lFTkNJRVNcIixcbiAgXCJTRU5TRVNcIixcbiAgXCJEQU1BR0VfUkVTXCIsXG4gIFwiU09VUkNFXCIsXG4gIFwiUlVMRVNFVFwiXG5dO1xuXG5leHBvcnQgY29uc3QgSVRFTV9LRVlTOiBGTUtleVtdID0gW1xuICBcIk5BTUVcIixcbiAgXCJUWVBFXCIsXG4gIFwiUkFSSVRZXCIsXG4gIFwiQ09TVFwiLFxuICBcIldFSUdIVFwiLFxuICBcIlBST1BFUlRJRVNcIixcbiAgXCJEQU1BR0VcIixcbiAgXCJEQU1BR0VfVFlQRVNcIixcbiAgXCJSQU5HRVwiLFxuICBcIlJFTE9BRFwiLFxuICBcIkFNTU9fVFlQRVwiLFxuICBcIkFDXCIsXG4gIFwiU1RFQUxUSF9ESVNBRFZBTlRBR0VcIixcbiAgXCJNQUdJQ0FMXCIsXG4gIFwiQVRUVU5FTUVOVFwiLFxuICBcIkFUVFVORV9SRVFcIixcbiAgXCJWRVJNVU5cIixcbiAgXCJTT1VSQ0VcIixcbiAgXCJSVUxFU0VUXCJcbl07XG5cbmV4cG9ydCBjb25zdCBCRVNUSUFSWV9LRVlTOiBGTUtleVtdID0gW1xuICBcIk5BTUVcIixcbiAgXCJTSVpFXCIsXG4gIFwiVFlQRVwiLFxuICBcIkFMSUdOTUVOVFwiLFxuICBcIkFDXCIsXG4gIFwiSFBcIixcbiAgXCJTUEVFRFwiLFxuICBcIlNUUkVOR1RIXCIsXG4gIFwiREVYVEVSSVRZXCIsXG4gIFwiQ09OU1RJVFVUSU9OXCIsXG4gIFwiSU5URUxMSUdFTkNFXCIsXG4gIFwiV0lTRE9NXCIsXG4gIFwiQ0hBUklTTUFcIixcbiAgXCJTQVZJTkdfVEhST1dTXCIsXG4gIFwiU0tJTExTXCIsXG4gIFwiU0VOU0VTXCIsXG4gIFwiTEFOR1VBR0VTXCIsXG4gIFwiQ0hBTExFTkdFX1JBVElOR1wiLFxuICBcIlNPVVJDRVwiLFxuICBcIlJVTEVTRVRcIlxuXTtcblxuZXhwb3J0IGNvbnN0IENMQVNTX0tFWVM6IEZNS2V5W10gPSBbXG4gIFwiTkFNRVwiLFxuICBcIlNQRUxMX0NBU1RfTU9EXCIsXG4gIFwiQVJNT1JfUFJPRklDSUVOQ0lFU1wiLFxuICBcIldFQVBPTl9QUk9GSUNJRU5DSUVTXCIsXG4gIFwiVE9PTF9QUk9GSUNJRU5DSUVTXCIsXG4gIFwiVE9PTF9DSE9JQ0VfTElTVFwiLFxuICBcIlNBVklOR19USFJPV1NcIixcbiAgXCJTS0lMTFNcIixcbiAgXCJTS0lMTF9DSE9JQ0VfTElTVFwiLFxuICBcIlRSQUlUU1wiLFxuICBcIlNPVVJDRVwiLFxuICBcIlJVTEVTRVRcIlxuXTtcblxuZXhwb3J0IGNvbnN0IEJBQ0tHUk9VTkRfS0VZUzogRk1LZXlbXSA9IFtcbiAgXCJOQU1FXCIsXG4gIFwiU0tJTExTXCIsXG4gIFwiU0tJTExfQ0hPSUNFX0xJU1RcIiwgIFxuICBcIlRPT0xfUFJPRklDSUVOQ0lFU1wiLFxuICBcIlRPT0xfQ0hPSUNFX0xJU1RcIixcbiAgXCJUUkFJVFNcIixcbiAgXCJTT1VSQ0VcIixcbiAgXCJSVUxFU0VUXCJcbl07XG5cbmV4cG9ydCBjb25zdCBGRUFUU19LRVlTOiBGTUtleVtdID0gW1xuICBcIlNPVVJDRVwiLFxuICBcIlJVTEVTRVRcIlxuXTtcblxuLy8gXHUyNTAwXHUyNTAwXHUyNTAwIEZpZWxkIHN1YnNldHMgZm9yIGVhY2ggcGFyc2VyIFx1MjUwMFx1MjUwMFx1MjUwMFxuZXhwb3J0IGNvbnN0IFNQRUxMX01FVEFfREVGUzogRmllbGREZWZbXSA9IFNQRUxMX0tFWVMubWFwKGtleSA9PiB7XG4gIGNvbnN0IGRlZiA9IEFMTF9GSUVMRF9ERUZTLmZpbmQoZCA9PiBkLmNhbGxTaWduID09PSBrZXkpO1xuICBpZiAoIWRlZikgdGhyb3cgbmV3IEVycm9yKGBNaXNzaW5nIEZpZWxkRGVmIGZvciBTUEVMTF9LRVkgJHtrZXl9YCk7XG4gIHJldHVybiBkZWY7XG59KTtcbmV4cG9ydCBjb25zdCBTUEVDSUVTX01FVEFfREVGUzogRmllbGREZWZbXSA9IFNQRUNJRVNfS0VZUy5tYXAoa2V5ID0+IHtcbiAgY29uc3QgZGVmID0gQUxMX0ZJRUxEX0RFRlMuZmluZChkID0+IGQuY2FsbFNpZ24gPT09IGtleSk7XG4gIGlmICghZGVmKSB0aHJvdyBuZXcgRXJyb3IoYE1pc3NpbmcgRmllbGREZWYgZm9yIFNQRUNJRVNfS0VZICR7a2V5fWApO1xuICByZXR1cm4gZGVmO1xufSk7XG5leHBvcnQgY29uc3QgSVRFTV9NRVRBX0RFRlM6IEZpZWxkRGVmW10gPSBJVEVNX0tFWVMubWFwKGtleSA9PiB7XG4gIGNvbnN0IGRlZiA9IEFMTF9GSUVMRF9ERUZTLmZpbmQoZCA9PiBkLmNhbGxTaWduID09PSBrZXkpO1xuICBpZiAoIWRlZikgdGhyb3cgbmV3IEVycm9yKGBNaXNzaW5nIEZpZWxkRGVmIGZvciBJVEVNX0tFWSAke2tleX1gKTtcbiAgcmV0dXJuIGRlZjtcbn0pO1xuZXhwb3J0IGNvbnN0IEJFU1RJQVJZX01FVEFfREVGUzogRmllbGREZWZbXSA9IEJFU1RJQVJZX0tFWVMubWFwKGtleSA9PiB7XG4gIGNvbnN0IGRlZiA9IEFMTF9GSUVMRF9ERUZTLmZpbmQoZCA9PiBkLmNhbGxTaWduID09PSBrZXkpO1xuICBpZiAoIWRlZikgdGhyb3cgbmV3IEVycm9yKGBNaXNzaW5nIEZpZWxkRGVmIGZvciBCRVNUSUFSWV9LRVkgJHtrZXl9YCk7XG4gIHJldHVybiBkZWY7XG59KTtcbmV4cG9ydCBjb25zdCBDTEFTU19NRVRBX0RFRlM6IEZpZWxkRGVmW10gPSBDTEFTU19LRVlTLm1hcChrZXkgPT4ge1xuICBjb25zdCBkZWYgPSBBTExfRklFTERfREVGUy5maW5kKGQgPT4gZC5jYWxsU2lnbiA9PT0ga2V5KTtcbiAgaWYgKCFkZWYpIHRocm93IG5ldyBFcnJvcihgTWlzc2luZyBGaWVsZERlZiBmb3IgQ0xBU1NfS0VZICR7a2V5fWApO1xuICByZXR1cm4gZGVmO1xufSk7XG5leHBvcnQgY29uc3QgQkFDS0dST1VORF9NRVRBX0RFRlM6IEZpZWxkRGVmW10gPSBCQUNLR1JPVU5EX0tFWVMubWFwKGtleSA9PiB7XG4gIGNvbnN0IGRlZiA9IEFMTF9GSUVMRF9ERUZTLmZpbmQoZCA9PiBkLmNhbGxTaWduID09PSBrZXkpO1xuICBpZiAoIWRlZikgdGhyb3cgbmV3IEVycm9yKGBNaXNzaW5nIEZpZWxkRGVmIGZvciBCQUNLR1JPVU5EX0tFWSAke2tleX1gKTtcbiAgcmV0dXJuIGRlZjtcbn0pO1xuZXhwb3J0IGNvbnN0IEZFQVRTX01FVEFfREVGUzogRmllbGREZWZbXSA9IEZFQVRTX0tFWVMubWFwKGtleSA9PiB7XG4gIGNvbnN0IGRlZiA9IEFMTF9GSUVMRF9ERUZTLmZpbmQoZCA9PiBkLmNhbGxTaWduID09PSBrZXkpO1xuICBpZiAoIWRlZikgdGhyb3cgbmV3IEVycm9yKGBNaXNzaW5nIEZpZWxkRGVmIGZvciBCQUNLR1JPVU5EX0tFWSAke2tleX1gKTtcbiAgcmV0dXJuIGRlZjtcbn0pOyIsICJpbXBvcnQgdHlwZSB7IFBhcnNlZE1hcmtkb3duRmlsZSB9IGZyb20gXCJzcmMvdHlwZXNcIjtcbmltcG9ydCB7IHJlcGxhY2U1ZVRhZ3MgfSBmcm9tIFwiLi9oZWxwZXJzL3RhZ1JlcGxhY2VyXCI7XG5pbXBvcnQgeyBnZXRGdWxsU291cmNlTmFtZSB9IGZyb20gXCIuL2hlbHBlcnMvc291cmNlTWFwXCI7XG5pbXBvcnQgeyByZW5kZXJNYXJrZG93blRhYmxlIH0gZnJvbSBcIi4vaGVscGVycy9tYXJrZG93blRhYmxlXCI7XG5pbXBvcnQgeyBmb3JtYXRFbnRyeSB9IGZyb20gXCIuL2hlbHBlcnMvZm9ybWF0RW50cnlcIjtcbmltcG9ydCB7IGJ1aWxkRk0sIHNlcmlhbGl6ZUZyb250bWF0dGVyLCBTUEVMTF9NRVRBX0RFRlMgfSBmcm9tIFwiLi9oZWxwZXJzL2Zyb250bWF0dGVyXCI7XG5cblxuZXhwb3J0IGNvbnN0IFNDSE9PTF9NQVA6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4gPSB7XG4gIEE6IFwiQWJqdXJhdGlvblwiLFxuICBDOiBcIkNvbmp1cmF0aW9uXCIsXG4gIEQ6IFwiRGl2aW5hdGlvblwiLFxuICBFOiBcIkVuY2hhbnRtZW50XCIsXG4gIFY6IFwiRXZvY2F0aW9uXCIsXG4gIEk6IFwiSWxsdXNpb25cIixcbiAgTjogXCJOZWNyb21hbmN5XCIsXG4gIFQ6IFwiVHJhbnNtdXRhdGlvblwiLFxufTtcblxuZnVuY3Rpb24gb3JkaW5hbChuOiBudW1iZXIpOiBzdHJpbmcge1xuICBjb25zdCBzdWZmaXggPSAobiA9PT0gMSkgPyBcInN0XCIgOiAobiA9PT0gMikgPyBcIm5kXCIgOiAobiA9PT0gMykgPyBcInJkXCIgOiBcInRoXCI7XG4gIHJldHVybiBgJHtufSR7c3VmZml4fWA7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBmb3JtYXRSYW5nZShyYW5nZTogYW55KTogc3RyaW5nIHtcbiAgaWYgKCFyYW5nZSkgcmV0dXJuIFwiXCI7XG5cbiAgaWYgKHR5cGVvZiByYW5nZSA9PT0gXCJzdHJpbmdcIikgcmV0dXJuIHJhbmdlO1xuXG4gIGlmIChyYW5nZS50eXBlID09PSBcInNwZWNpYWxcIikgcmV0dXJuIFwiU3BlY2lhbFwiO1xuICBpZiAocmFuZ2UudHlwZSA9PT0gXCJwb2ludFwiICYmIHJhbmdlLmRpc3RhbmNlKSB7XG4gICAgY29uc3QgZGlzdCA9IHJhbmdlLmRpc3RhbmNlO1xuICAgIGlmIChkaXN0LnR5cGUgPT09IFwidG91Y2hcIikgcmV0dXJuIFwiVG91Y2hcIjtcbiAgICBpZiAoZGlzdC50eXBlID09PSBcInNlbGZcIikgcmV0dXJuIFwiU2VsZlwiO1xuICAgIGlmIChkaXN0LnR5cGUgPT09IFwic2lnaHRcIikgcmV0dXJuIFwiU2lnaHRcIjtcbiAgICBpZiAoZGlzdC5hbW91bnQpIHJldHVybiBgJHtkaXN0LmFtb3VudH0gJHtkaXN0LnR5cGV9YDtcbiAgfVxuXG4gIHJldHVybiBcIlZhcmllc1wiO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZm9ybWF0VGltZSh0aW1lOiBhbnlbXSk6IHN0cmluZyB7XG4gIGlmICghQXJyYXkuaXNBcnJheSh0aW1lKSkgcmV0dXJuIFwiXCI7XG5cbiAgcmV0dXJuIHRpbWUubWFwKHQgPT4gYCR7dC5udW1iZXJ9ICR7dC51bml0fWApLmpvaW4oXCIsIFwiKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGZvcm1hdER1cmF0aW9uKGR1cmF0aW9uOiBhbnlbXSk6IHN0cmluZyB7XG4gIGlmICghQXJyYXkuaXNBcnJheShkdXJhdGlvbikpIHJldHVybiBcIlwiO1xuXG4gIHJldHVybiBkdXJhdGlvbi5tYXAoZCA9PiB7XG4gICAgaWYgKGQudHlwZSA9PT0gXCJpbnN0YW50XCIpIHJldHVybiBcIkluc3RhbnRhbmVvdXNcIjtcbiAgICBpZiAoZC50eXBlID09PSBcInRpbWVkXCIgJiYgZC5kdXJhdGlvbikge1xuICAgICAgcmV0dXJuIGAke2QuZHVyYXRpb24uYW1vdW50fSAke2QuZHVyYXRpb24udHlwZX0ke2QuY29uY2VudHJhdGlvbiA/IFwiIChjb25jZW50cmF0aW9uKVwiIDogXCJcIn1gO1xuICAgIH1cbiAgICBpZiAoZC50eXBlID09PSBcInBlcm1hbmVudFwiKSByZXR1cm4gXCJQZXJtYW5lbnRcIjtcbiAgICByZXR1cm4gXCJTcGVjaWFsXCI7XG4gIH0pLmpvaW4oXCIsIFwiKTtcbn1cbi8vIGluIHBhcnNlcnMvNWUtanNvbi9wYXJzZVNwZWxsc0ZpbGUudHMgKG9yIHdoZXJldmVyIGZvcm1hdENvbXBvbmVudHMgbGl2ZXMpXG5cbmZ1bmN0aW9uIGZvcm1hdENvbXBvbmVudHMoY29tcG9uZW50czogYW55KTogc3RyaW5nIHtcbiAgaWYgKCFjb21wb25lbnRzKSByZXR1cm4gXCJcIjtcblxuICBjb25zdCBwYXJ0czogc3RyaW5nW10gPSBbXTtcblxuICBpZiAoY29tcG9uZW50cy52KSBwYXJ0cy5wdXNoKFwiVlwiKTtcbiAgaWYgKGNvbXBvbmVudHMucykgcGFydHMucHVzaChcIlNcIik7XG5cbiAgaWYgKGNvbXBvbmVudHMubSkge1xuICAgIC8vIHB1bGwgb3V0IHRoZSBhY3R1YWwgbWF0ZXJpYWwgdGV4dChzKVxuICAgIGxldCBtYXREZXRhaWxzOiBzdHJpbmdbXSA9IFtdO1xuXG4gICAgaWYgKEFycmF5LmlzQXJyYXkoY29tcG9uZW50cy5tKSkge1xuICAgICAgbWF0RGV0YWlscyA9IGNvbXBvbmVudHMubVxuICAgICAgICAubWFwKChpdGVtOmFueSkgPT5cbiAgICAgICAgICB0eXBlb2YgaXRlbSA9PT0gXCJzdHJpbmdcIlxuICAgICAgICAgICAgPyBpdGVtXG4gICAgICAgICAgICA6IGl0ZW0gJiYgdHlwZW9mIGl0ZW0udGV4dCA9PT0gXCJzdHJpbmdcIlxuICAgICAgICAgICAgPyBpdGVtLnRleHRcbiAgICAgICAgICAgIDogbnVsbFxuICAgICAgICApXG4gICAgICAgIC5maWx0ZXIoKHQ6YW55KTogdCBpcyBzdHJpbmcgPT4gISF0KTtcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiBjb21wb25lbnRzLm0gPT09IFwic3RyaW5nXCIpIHtcbiAgICAgIG1hdERldGFpbHMgPSBbY29tcG9uZW50cy5tXTtcbiAgICB9IGVsc2UgaWYgKGNvbXBvbmVudHMubS50ZXh0KSB7XG4gICAgICBtYXREZXRhaWxzID0gW2NvbXBvbmVudHMubS50ZXh0XTtcbiAgICB9XG5cbiAgICAvLyBidWlsZCB0aGUgXHUyMDFDTVx1MjAxRCBlbnRyeSwgYXBwZW5kaW5nIGRldGFpbHMgaWYgYW55XG4gICAgY29uc3QgbWF0UGFydCA9XG4gICAgICBtYXREZXRhaWxzLmxlbmd0aCA+IDBcbiAgICAgICAgPyBgTSAoJHttYXREZXRhaWxzLmpvaW4oXCIsIFwiKX0pYFxuICAgICAgICA6IFwiTVwiO1xuXG4gICAgcGFydHMucHVzaChtYXRQYXJ0KTtcbiAgfVxuXG4gIHJldHVybiBwYXJ0cy5qb2luKFwiLCBcIik7XG59XG5cblxuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlU3BlbGxzRmlsZShqc29uOiBhbnksIGVkaXRpb25JZDogc3RyaW5nKTogUGFyc2VkTWFya2Rvd25GaWxlW10ge1xuICBpZiAoIWpzb24uc3BlbGwpIHJldHVybiBbXTtcblxuICAvLyBtYWtlIGVkaXRpb25JZCBhdmFpbGFibGUgZm9yIG91ciBTT1VSQ0UgY29udmVydGVyXG4gIChqc29uIGFzIGFueSkuX2VkaXRpb25JZCA9IGVkaXRpb25JZDtcblxuICByZXR1cm4ganNvbi5zcGVsbC5tYXAoKHNwZWxsOiBhbnkpID0+IHtcbiAgICAvLyBcdTIwMTQgZ2F0aGVyIGRhdGEgZm9yIGhlYWRlci9ib2R5L2Zvb3RlciBhcyBiZWZvcmUgXHUyMDE0XG4gICAgY29uc3Qgc291cmNlcyA9IHNwZWxsLnNvdXJjZVxuICAgICAgPyBBcnJheS5pc0FycmF5KHNwZWxsLnNvdXJjZSkgPyBzcGVsbC5zb3VyY2UgOiBbc3BlbGwuc291cmNlXVxuICAgICAgOiBbXCJ1bmtub3duXCJdO1xuICAgIGNvbnN0IG5hbWUgPSBzcGVsbC5uYW1lO1xuICAgIGNvbnN0IHNjaG9vbCA9IFNDSE9PTF9NQVBbc3BlbGwuc2Nob29sXSA/PyBzcGVsbC5zY2hvb2w7XG4gICAgY29uc3QgbGV2ZWwgPSBzcGVsbC5sZXZlbDtcbiAgICBjb25zdCByYW5nZSA9IGZvcm1hdFJhbmdlKHNwZWxsLnJhbmdlKTtcbiAgICBjb25zdCBjYXN0aW5nVGltZSA9IGZvcm1hdFRpbWUoc3BlbGwudGltZSk7XG4gICAgY29uc3QgZHVyYXRpb24gPSBmb3JtYXREdXJhdGlvbihzcGVsbC5kdXJhdGlvbik7XG4gICAgY29uc3QgZm9ybWF0dGVkU291cmNlcyA9IHNvdXJjZXMubWFwKChzOiBzdHJpbmcpID0+IGdldEZ1bGxTb3VyY2VOYW1lKHMsIGVkaXRpb25JZCkpO1xuXG4gICAgY29uc3QgYXR0YWNrVHlwZSA9IHNwZWxsLmF0dGFja1R5cGUgfHwgXCJcIjtcbiAgICBjb25zdCBkYW1hZ2VUeXBlID0gc3BlbGwuZGFtYWdlSW5mbGljdD8uWzBdIHx8IFwiVGVsZXBvcnRhdGlvblwiO1xuICAgIGNvbnN0IHJpdHVhbCA9IHNwZWxsLnJpdHVhbCA9PT0gdHJ1ZTtcbiAgICBjb25zdCBjb25jZW50cmF0aW9uID0gc3BlbGwuZHVyYXRpb24/LnNvbWUoKGQ6IGFueSkgPT4gZC5jb25jZW50cmF0aW9uKSA/PyBmYWxzZTtcblxuY29uc3QgRk0gICA9IGJ1aWxkRk0oc3BlbGwsIFNQRUxMX01FVEFfREVGUyk7XG5jb25zdCB5YW1sID0gc2VyaWFsaXplRnJvbnRtYXR0ZXIoRk0sIFNQRUxMX01FVEFfREVGUyk7XG5cbiAgICAvLyBcdTIwMTQgdGl0bGUvc3VidGl0bGUgYW5kIGJvZHkgbGF5b3V0IFx1MjAxNFxuICAgIGNvbnN0IHNhZmVOYW1lID0gbmFtZS5yZXBsYWNlKC9cXC8vZywgXCItXCIpO1xuICAgIGNvbnN0IHRpdGxlID0gYCMgJHtuYW1lfWA7XG4gICAgY29uc3QgbGV2ZWxMYWJlbCA9XG4gICAgICBsZXZlbCA9PT0gMFxuICAgICAgICA/IGAke3NjaG9vbH0gQ2FudHJpcGBcbiAgICAgICAgOiBgJHtvcmRpbmFsKGxldmVsKX0tbGV2ZWwgJHtzY2hvb2x9IFNwZWxsYDtcbiAgICBjb25zdCBzdWJ0aXRsZSA9IGAjIyMgKiR7bGV2ZWxMYWJlbH0qJHtjb25jZW50cmF0aW9uID8gXCIgKihDb25jZW50cmF0aW9uKSpcIiA6IFwiXCJ9YDtcblxuICAgIGNvbnN0IGhlYWRlckxpbmVzID0gW1xuICAgICAgdGl0bGUsXG4gICAgICBzdWJ0aXRsZSxcbiAgICAgIGAqKkNhc3RpbmcgVGltZToqKiAke2Nhc3RpbmdUaW1lfWAsXG4gICAgICBgKipSYW5nZToqKiAke3JhbmdlfWAsXG4gICAgICBgKipDb21wb25lbnRzOioqICR7Zm9ybWF0Q29tcG9uZW50cyhzcGVsbC5jb21wb25lbnRzKX1gLFxuICAgICAgYCoqRHVyYXRpb246KiogJHtkdXJhdGlvbn1gLFxuICAgIF07XG5cbiAgICBjb25zdCBib2R5TGluZXMgPSBbXG4gICAgICAuLi4oKHNwZWxsLmVudHJpZXMgPz8gW10pLm1hcCgoZTogYW55KSA9PiBmb3JtYXRFbnRyeShlKSkpLFxuICAgICAgLi4uKChzcGVsbC5lbnRyaWVzSGlnaGVyTGV2ZWwgPz8gW10pLm1hcCgoZTogYW55KSA9PiBmb3JtYXRFbnRyeShlKSkpLFxuICAgIF07XG5cbiAgICBjb25zdCBmb290ZXJMaW5lcyA9IFtcbiAgICAgIGAtLS1gLFxuICAgICAgYCoqU291cmNlOioqICR7Zm9ybWF0dGVkU291cmNlcy5qb2luKFwiLCBcIil9YCxcbiAgICBdO1xuXG4gICAgLy8gXHUyMDE0IGFzc2VtYmxlIHRoZSBub3RlIHdpdGggWUFNTCBmcm9udG1hdHRlciBcdTIwMTRcbiAgICByZXR1cm4ge1xuICAgICAgcGF0aDogYCR7c2FmZU5hbWV9Lm1kYCxcbiAgICAgIGNvbnRlbnQ6IFtcbiAgICAgICAgYC0tLVxcbiR7eWFtbH1cXG4tLS1gLFxuICAgICAgICBoZWFkZXJMaW5lcy5qb2luKFwiXFxuXCIpLFxuICAgICAgICBgYCxcbiAgICAgICAgYm9keUxpbmVzLmpvaW4oXCJcXG5cXG5cIiksXG4gICAgICAgIGBgLFxuICAgICAgICBmb290ZXJMaW5lcy5qb2luKFwiXFxuXCIpLFxuICAgICAgXS5qb2luKFwiXFxuXCIpLFxuICAgIH07XG4gIH0pO1xufVxuXG4iLCAiaW1wb3J0IHR5cGUgeyBQYXJzZWRNYXJrZG93bkZpbGUgfSBmcm9tIFwiLi4vLi4vdHlwZXNcIjtcbmltcG9ydCB7IHJlcGxhY2U1ZVRhZ3MgfSBmcm9tIFwiLi9oZWxwZXJzL3RhZ1JlcGxhY2VyXCI7XG5pbXBvcnQge1xuICBidWlsZEZNLFxuICBzZXJpYWxpemVGcm9udG1hdHRlcixcbiAgRk1fRklFTERTLFxuICBTUEVDSUVTX01FVEFfREVGUyxcbiAgU0laRV9NQVAsXG59IGZyb20gXCIuL2hlbHBlcnMvZnJvbnRtYXR0ZXJcIjtcbmltcG9ydCB7IHJlbmRlck1hcmtkb3duVGFibGUgfSBmcm9tIFwiLi9oZWxwZXJzL21hcmtkb3duVGFibGVcIjtcbmltcG9ydCB7IGZvcm1hdEVudHJ5IH0gZnJvbSBcIi4vaGVscGVycy9mb3JtYXRFbnRyeVwiO1xuXG5mdW5jdGlvbiBzbHVnKG5hbWU6IHN0cmluZyk6IHN0cmluZyB7XG4gIHJldHVybiBuYW1lXG4gICAgLnJlcGxhY2UoLzsvZywgXCI6XCIpICAgICAgIC8vIHNlbWljb2xvbiBcdTIxOTIgZGFzaFxuICAgIC5yZXBsYWNlKC9bXFwvOlwiXS9nLCBcIjpcIikgIC8vIHNsYXNoLCBjb2xvbiwgcXVvdGUgXHUyMTkyIGRhc2hcbiAgICAudHJpbSgpO1xufVxuXG5jb25zdCBCTE9DS0VEX1RSQUlUUyA9IFtcIkFnZVwiLCBcIlNpemVcIiwgXCJMYW5ndWFnZXNcIiwgXCJDcmVhdHVyZSBUeXBlXCIsIFwiU3BlZWRcIl07XG5cbmV4cG9ydCBmdW5jdGlvbiBwYXJzZVNwZWNpZXNGaWxlKFxuICBqc29uOiB7IHJhY2U6IGFueVtdOyBzdWJyYWNlPzogYW55W107IF9lZGl0aW9uSWQ/OiBzdHJpbmcgfSxcbiAgZWRpdGlvbklkOiBzdHJpbmdcbik6IFBhcnNlZE1hcmtkb3duRmlsZVtdIHtcbiAgaWYgKCFBcnJheS5pc0FycmF5KGpzb24ucmFjZSkpIHJldHVybiBbXTtcbiAganNvbi5fZWRpdGlvbklkID0gZWRpdGlvbklkO1xuXG4gIC8vIDEpIEZpbHRlciBvdXQgcmVwcmludHNcbmNvbnN0IHJhd1ZhcmlhbnRzID0ganNvbi5yYWNlLmZpbHRlcigocjogYW55KSA9PlxuICAhL1xcKCg/OkthbGFkZXNofFplbmRpa2FyfEFtb25raGV0fElubmlzdHJhZHxJeGFsYW4pXFwpJC8udGVzdChyLm5hbWUpXG4pO1xuXG4gIC8vIDIpIEdyb3VwIGJ5IHJhY2UgbmFtZVxuICBjb25zdCBieU5hbWUgPSBuZXcgTWFwPHN0cmluZywgYW55W10+KCk7XG4gIGZvciAoY29uc3QgciBvZiByYXdWYXJpYW50cykge1xuICAgIGNvbnN0IGxpc3QgPSBieU5hbWUuZ2V0KHIubmFtZSkgPz8gW107XG4gICAgbGlzdC5wdXNoKHIpO1xuICAgIGJ5TmFtZS5zZXQoci5uYW1lLCBsaXN0KTtcbiAgfVxuXG4gIC8vIDMpIEFsbCBzdWJyYWNlcyBhcnJheVxuICBjb25zdCBzdWJyYWNlc0xpc3QgPSBBcnJheS5pc0FycmF5KGpzb24uc3VicmFjZSkgPyBqc29uLnN1YnJhY2UgOiBbXTtcblxuICBjb25zdCBvdXQ6IFBhcnNlZE1hcmtkb3duRmlsZVtdID0gW107XG5cbiAgLy8gNCkgTWFpbiBsb29wIG92ZXIgZWFjaCBzcGVjaWVzXG4gIGZvciAoY29uc3QgW3JhY2VOYW1lLCByYWNlVmFyaWFudHNdIG9mIGJ5TmFtZS5lbnRyaWVzKCkpIHtcbiAgICBjb25zdCBzYWZlTmFtZSA9IHNsdWcocmFjZU5hbWUpO1xuXG4gICAgLy8gcGljayB0aGUgXHUyMDFDZnVsbGVzdFx1MjAxRCB2YXJpYW50IGFzIHByaW1hcnlcbiAgICBjb25zdCBwcmltYXJ5ID0gcmFjZVZhcmlhbnRzLnJlZHVjZShcbiAgICAgIChiZXN0LCBjdXIpID0+XG4gICAgICAgIE9iamVjdC5rZXlzKGN1cikubGVuZ3RoID4gT2JqZWN0LmtleXMoYmVzdCkubGVuZ3RoID8gY3VyIDogYmVzdCxcbiAgICAgIHJhY2VWYXJpYW50c1swXVxuICAgICk7XG5cbiAgICAvLyBvbmVcdTIwMTBvZmY6IGdyYWZ0IEh1bWFuIGFiaWxpdHkgaWYgbWlzc2luZ1xuICAgIGlmICghcHJpbWFyeS5hYmlsaXR5KSB7XG4gICAgICBjb25zdCBodW1hbkVudHJ5ID0gc3VicmFjZXNMaXN0LmZpbmQoKHNyOiBhbnkpID0+XG4gICAgICAgIHNyLnJhY2VOYW1lID09PSByYWNlTmFtZSAmJlxuICAgICAgICBzci5yYWNlU291cmNlID09PSBwcmltYXJ5LnNvdXJjZSAmJlxuICAgICAgICAhKFwibmFtZVwiIGluIHNyKSAmJlxuICAgICAgICBBcnJheS5pc0FycmF5KHNyLmFiaWxpdHkpXG4gICAgICApO1xuICAgICAgaWYgKGh1bWFuRW50cnkpIHByaW1hcnkuYWJpbGl0eSA9IGh1bWFuRW50cnkuYWJpbGl0eTtcbiAgICB9XG5cbiAgICAvLyBidWlsZCBmcm9udG1hdHRlclxuICAgIGNvbnN0IGZtID0gYnVpbGRGTShwcmltYXJ5LCBTUEVDSUVTX01FVEFfREVGUyk7XG4gICAgY29uc3Qgc2Vuc2VzOiBzdHJpbmdbXSA9IFtdO1xuICAgIGlmIChwcmltYXJ5LmRhcmt2aXNpb24pICBzZW5zZXMucHVzaChgRGFya3Zpc2lvbiAke3ByaW1hcnkuZGFya3Zpc2lvbn0gZnQuYCk7XG4gICAgaWYgKHByaW1hcnkuYmxpbmRzaWdodCkgIHNlbnNlcy5wdXNoKGBCbGluZHNpZ2h0ICR7cHJpbWFyeS5ibGluZHNpZ2h0fSBmdC5gKTtcbiAgICBpZiAocHJpbWFyeS50cmVtb3JzZW5zZSkgc2Vuc2VzLnB1c2goYFRyZW1vcnNlbnNlICR7cHJpbWFyeS50cmVtb3JzZW5zZX0gZnQuYCk7XG4gICAgaWYgKHByaW1hcnkudHJ1ZXNpZ2h0KSAgIHNlbnNlcy5wdXNoKGBUcnVlc2lnaHQgJHtwcmltYXJ5LnRydWVzaWdodH0gZnQuYCk7XG4gICAgaWYgKHNlbnNlcy5sZW5ndGgpIGZtLnNlbnNlcyA9IHNlbnNlcztcbiAgICBpZiAoQXJyYXkuaXNBcnJheShmbS50cmFpdHMpKSB7XG4gICAgICBmbS50cmFpdHMgPSBmbS50cmFpdHMuZmlsdGVyKHQgPT4gIUJMT0NLRURfVFJBSVRTLmluY2x1ZGVzKHQpKTtcbiAgICB9XG4gICAgY29uc3QgeWFtbCA9IHNlcmlhbGl6ZUZyb250bWF0dGVyKGZtLCBTUEVDSUVTX01FVEFfREVGUyk7XG5cbiAgICAvLyBidWlsZCBzcGVjaWVzIGJvZHlcbiAgICBjb25zdCBsaW5lczogc3RyaW5nW10gPSBbXTtcbiAgICBsaW5lcy5wdXNoKGAjICR7cmFjZU5hbWV9YCwgYCMjIFN0YXRzYCk7XG5cbiAgICAvLyBTaXplXG4gICAgY29uc3Qgc2l6ZSA9IEFycmF5LmlzQXJyYXkocHJpbWFyeS5zaXplKVxuICAgICAgPyBwcmltYXJ5LnNpemUubWFwKChzOiBzdHJpbmcpID0+IFNJWkVfTUFQW3NdIHx8IHMpLmpvaW4oXCIvXCIpXG4gICAgICA6IFNJWkVfTUFQW3ByaW1hcnkuc2l6ZV0gPz8gcHJpbWFyeS5zaXplO1xuICAgIGxpbmVzLnB1c2goYCoqU2l6ZToqKiAke3NpemV9YCk7XG5cbiAgICAvLyBTcGVlZFxuICAgIGNvbnN0IHNwZWVkID0gdHlwZW9mIHByaW1hcnkuc3BlZWQgPT09IFwibnVtYmVyXCJcbiAgICAgID8gcHJpbWFyeS5zcGVlZFxuICAgICAgOiBwcmltYXJ5LnNwZWVkPy53YWxrID8/IHByaW1hcnkuc3BlZWQ/LmJhc2UgPz8gMDtcbiAgICBsaW5lcy5wdXNoKGAqKlNwZWVkOioqICR7c3BlZWR9IGZ0LiB3YWxraW5nYCk7XG5cbiAgICAvLyBBYmlsaXRpZXNcbiAgICBjb25zdCBraWRzID0gc3VicmFjZXNMaXN0LmZpbHRlcihzciA9PlxuICAgICAgc3IubmFtZSAmJiBzci5yYWNlTmFtZSA9PT0gcmFjZU5hbWUgJiYgc3IucmFjZVNvdXJjZSA9PT0gcHJpbWFyeS5zb3VyY2VcbiAgICApO1xuICAgIGNvbnN0IHJhd0FiaWxpdHkgPSBBcnJheS5pc0FycmF5KHByaW1hcnkuYWJpbGl0eSlcbiAgICAgID8gcHJpbWFyeS5hYmlsaXR5XG4gICAgICA6IEFycmF5LmlzQXJyYXkoa2lkc1swXT8uYWJpbGl0eSkgPyBraWRzWzBdLmFiaWxpdHkgOiBbXTtcbiAgICBpZiAoQXJyYXkuaXNBcnJheShyYXdBYmlsaXR5KSAmJiByYXdBYmlsaXR5Lmxlbmd0aCkge1xuICAgICAgY29uc3QgYm9udXNlcyA9IHsgc3RyOjAsZGV4OjAsY29uOjAsaW50OjAsd2lzOjAsY2hhOjAgfTtcbiAgICAgIGxldCBjaG9vc2VPcHQ6IGFueSA9IG51bGw7XG4gICAgICBmb3IgKGNvbnN0IG9iaiBvZiByYXdBYmlsaXR5KSB7XG4gICAgICAgIGlmIChcImNob29zZVwiIGluIG9iaikgY2hvb3NlT3B0ID0gb2JqLmNob29zZTtcbiAgICAgICAgZWxzZSBmb3IgKGNvbnN0IFtrLHZdIG9mIE9iamVjdC5lbnRyaWVzKG9iaikpIChib251c2VzIGFzIGFueSlba10gKz0gdiBhcyBudW1iZXI7XG4gICAgICB9XG4gICAgICBjb25zdCBwYWlycyA9IE9iamVjdC5lbnRyaWVzKGJvbnVzZXMpIGFzIFtzdHJpbmcsbnVtYmVyXVtdO1xuICAgICAgY29uc3QgcGFydHMgPSBwYWlycy5maWx0ZXIoKFssdl0pPT52IT09MCkubWFwKChbayx2XSk9PmAke2sudG9VcHBlckNhc2UoKX0gJHt2Pj0wP1wiK1wiOlwiXCJ9JHt2fWApO1xuICAgICAgaWYgKGNob29zZU9wdD8uY291bnQgJiYgQXJyYXkuaXNBcnJheShjaG9vc2VPcHQuZnJvbSkpIHtcbiAgICAgICAgcGFydHMucHVzaChgQ0hPT1NFICR7Y2hvb3NlT3B0LmNvdW50fSBmcm9tICR7Y2hvb3NlT3B0LmZyb20ubWFwKChzOnN0cmluZyk9PnMudG9VcHBlckNhc2UoKSkuam9pbihcIiwgXCIpfWApO1xuICAgICAgfVxuICAgICAgaWYgKHBhcnRzLmxlbmd0aCkgbGluZXMucHVzaChgKipBYmlsaXR5IFNjb3JlczoqKiAke3BhcnRzLmpvaW4oXCIsIFwiKX1gKTtcbiAgICB9XG5cbiAgICAvLyBMYW5ndWFnZXNcbiAgICBjb25zdCBsYW5ncyA9IGZtLmxhbmd1YWdlcyBhcyBzdHJpbmdbXXx1bmRlZmluZWQ7XG4gICAgaWYgKGxhbmdzPy5sZW5ndGgpIGxpbmVzLnB1c2goYCoqTGFuZ3VhZ2VzOioqICR7bGFuZ3Muam9pbihcIiwgXCIpfWApO1xuXG4gICAgLy8gU2tpbGxzXG4gICAgaWYgKEFycmF5LmlzQXJyYXkocHJpbWFyeS5za2lsbFByb2ZpY2llbmNpZXMpKSB7XG4gICAgICBjb25zdCBza2lsbExhYmVsczogc3RyaW5nW10gPSBbXTtcbiAgICAgIGZvciAoY29uc3QgZSBvZiBwcmltYXJ5LnNraWxsUHJvZmljaWVuY2llcyBhcyBhbnlbXSkge1xuICAgICAgICBpZiAoZS5jaG9vc2U/LmZyb20pIHtcbiAgICAgICAgICBza2lsbExhYmVscy5wdXNoKGBDaG9vc2UgZnJvbTogJHtlLmNob29zZS5mcm9tLm1hcCgoczpzdHJpbmcpPT5zLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpK3Muc2xpY2UoMSkpLmpvaW4oXCIsIFwiKX1gKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjb25zdCB2YWwgPSBlLnByb2ZpY2llbmN5ID8/IGUubmFtZSA/PyBlO1xuICAgICAgICAgIGlmICh0eXBlb2YgdmFsID09PSBcInN0cmluZ1wiKSBza2lsbExhYmVscy5wdXNoKHZhbC5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSt2YWwuc2xpY2UoMSkpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAoc2tpbGxMYWJlbHMubGVuZ3RoKSBsaW5lcy5wdXNoKGAqKlNraWxsIFByb2ZpY2llbmNpZXM6KiogJHtza2lsbExhYmVscy5qb2luKFwiOyBcIil9YCk7XG4gICAgfVxuXG4gICAgLy8gVG9vbCAvIFdlYXBvbiAvIEFybW9yXG4gICAgY29uc3QgdHAgPSBmbVtGTV9GSUVMRFMuVE9PTF9QUk9GSUNJRU5DSUVTXSBhcyBzdHJpbmdbXXx1bmRlZmluZWQ7XG4gICAgY29uc3Qgd3AgPSBmbVtGTV9GSUVMRFMuV0VBUE9OX1BST0ZJQ0lFTkNJRVNdIGFzIHN0cmluZ1tdfHVuZGVmaW5lZDtcbiAgICBjb25zdCBhcCA9IGZtW0ZNX0ZJRUxEUy5BUk1PUl9QUk9GSUNJRU5DSUVTXSBhcyBzdHJpbmdbXXx1bmRlZmluZWQ7XG4gICAgaWYgKHRwPy5sZW5ndGgpIGxpbmVzLnB1c2goYCoqVG9vbCBQcm9maWNpZW5jaWVzOioqICR7dHAuam9pbihcIiwgXCIpfWApO1xuICAgIGlmICh3cD8ubGVuZ3RoKSBsaW5lcy5wdXNoKGAqKldlYXBvbiBQcm9maWNpZW5jaWVzOioqICR7d3Auam9pbihcIiwgXCIpfWApO1xuICAgIGlmIChhcD8ubGVuZ3RoKSBsaW5lcy5wdXNoKGAqKkFybW9yIFByb2ZpY2llbmNpZXM6KiogJHthcC5qb2luKFwiLCBcIil9YCk7XG5cbiAgICAvLyBUcmFpdHNcbiAgICBsaW5lcy5wdXNoKGAjIyBUcmFpdHNgKTtcbiAgICBjb25zdCBzZWVuID0gbmV3IFNldDxzdHJpbmc+KCk7XG4gICAgZm9yIChjb25zdCB0cmFpdCBvZiBmbS50cmFpdHMgYXMgc3RyaW5nW118fFtdKSB7XG4gICAgICBsaW5lcy5wdXNoKGAjIyMjIyAke3RyYWl0fWApO1xuICAgICAgY29uc3QgZW50ID0gcHJpbWFyeS5lbnRyaWVzPy5maW5kKChlOmFueSk9PmUubmFtZT09PXRyYWl0KTtcbiAgICAgIGlmIChlbnQ/LmVudHJpZXMpIHtcbiAgICAgICAgZW50LmVudHJpZXMuZm9yRWFjaCgoc3ViOmFueSxpZHg6bnVtYmVyKT0+e1xuICAgICAgICAgIGxldCBibGs6c3RyaW5nfHVuZGVmaW5lZDtcbiAgICAgICAgICBpZiAoc3ViLnR5cGU9PT1cInRhYmxlXCIpICAgICAgIGJsayA9IHJlbmRlck1hcmtkb3duVGFibGUoc3ViKTtcbiAgICAgICAgICBlbHNlIGlmIChzdWIudHlwZT09PVwibGlzdFwiKSAgIGJsayA9IHN1Yi5pdGVtcy5tYXAoKGl0OmFueSk9PnR5cGVvZiBpdD09PVwic3RyaW5nXCI/YC0gJHtyZXBsYWNlNWVUYWdzKGl0KX1gOmAtICR7aXQubmFtZX1gICkuam9pbihcIlxcblwiKTtcbiAgICAgICAgICBlbHNlIGlmICh0eXBlb2Ygc3ViPT09XCJzdHJpbmdcIikgYmxrID0gcmVwbGFjZTVlVGFncyhzdWIpO1xuICAgICAgICAgIGlmIChibGsgJiYgIXNlZW4uaGFzKGJsaykpIHtcbiAgICAgICAgICAgIGxpbmVzLnB1c2goYmxrKTtcbiAgICAgICAgICAgIHNlZW4uYWRkKGJsayk7XG4gICAgICAgICAgICBpZiAoZW50LmVudHJpZXMubGVuZ3RoPjEgJiYgaWR4PGVudC5lbnRyaWVzLmxlbmd0aC0xKSBsaW5lcy5wdXNoKFwiXCIpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gXHUyNTAwXHUyNTAwXHUyNTAwIE5vdyBicmFuY2ggb24gc3VicmFjZXMgXHUyNTAwXHUyNTAwXHUyNTAwXG4gICAgY29uc3Qgc3VicyA9IGtpZHM7ICAvLyBhbHJlYWR5IGZpbHRlcmVkXG4gICAgaWYgKHN1YnMubGVuZ3RoKSB7XG4gICAgICAvLyAxKSBtYWluIGZpbGUgaW4gZm9sZGVyXG4gICAgICBvdXQucHVzaCh7XG4gICAgICAgIHBhdGg6IGBTcGVjaWVzLyR7c2FmZU5hbWV9LyR7c2FmZU5hbWV9Lm1kYCxcbiAgICAgICAgY29udGVudDogYC0tLVxcbiR7eWFtbH1cXG4tLS1cXG5cXG4ke2xpbmVzLmpvaW4oXCJcXG5cIil9YCxcbiAgICAgIH0pO1xuXG4gICAgICAvLyAyKSBlYWNoIHN1YnNwZWNpZXNcbiAgICAgIGNvbnN0IHN1YkZvbGRlciA9IGBTcGVjaWVzLyR7c2FmZU5hbWV9L1JhY2VzYDtcbiAgICAgIGZvciAoY29uc3Qgc3Igb2Ygc3Vicykge1xuICAgICAgICAvLyB0dXJuIHNlbWljb2xvbnMgXHUyMTkyIGNvbG9uc1xuICAgICAgICBjb25zdCBkaXNwbGF5ID0gc3IubmFtZS5yZXBsYWNlKC87L2csIFwiOlwiKTtcbiAgICAgICAgY29uc3Qgc3ViTGluZXM6IHN0cmluZ1tdID0gW2AjICR7ZGlzcGxheX1gXTtcblxuICAgICAgICAvLyBjb3B5IFN0YXRzIGJsb2NrIGlmIHlvdSBsaWtlOlxuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShzci5hYmlsaXR5KSkge1xuICAgICAgICAgIGNvbnN0IGJvbnVzZXMgPSB7IHN0cjowLGRleDowLGNvbjowLGludDowLHdpczowLGNoYTowIH07XG4gICAgICAgICAgbGV0IGNob29zZU9wdDphbnkgPSBudWxsO1xuICAgICAgICAgIGZvciAoY29uc3Qgb2JqIG9mIHNyLmFiaWxpdHkpIHtcbiAgICAgICAgICAgIGlmIChcImNob29zZVwiIGluIG9iaikgY2hvb3NlT3B0ID0gb2JqLmNob29zZTtcbiAgICAgICAgICAgIGVsc2UgZm9yIChjb25zdCBbayx2XSBvZiBPYmplY3QuZW50cmllcyhvYmopKSAoYm9udXNlcyBhcyBhbnkpW2tdKz12IGFzIG51bWJlcjtcbiAgICAgICAgICB9XG4gICAgICAgICAgY29uc3QgcGFpcnMgPSBPYmplY3QuZW50cmllcyhib251c2VzKSBhcyBbc3RyaW5nLG51bWJlcl1bXTtcbiAgICAgICAgICBjb25zdCBwYXJ0cyA9IHBhaXJzLmZpbHRlcigoWyx2XSk9PnYhPT0wKS5tYXAoKFtrLHZdKT0+YCR7ay50b1VwcGVyQ2FzZSgpfSAke3Y+PTA/XCIrXCI6XCJcIn0ke3Z9YCk7XG4gICAgICAgICAgaWYgKGNob29zZU9wdD8uY291bnQpIHBhcnRzLnB1c2goYENIT09TRSAke2Nob29zZU9wdC5jb3VudH0gZnJvbSAkeyhjaG9vc2VPcHQuZnJvbSBhcyBzdHJpbmdbXSkubWFwKHM9PnMudG9VcHBlckNhc2UoKSkuam9pbihcIiwgXCIpfWApO1xuICAgICAgICAgIGlmIChwYXJ0cy5sZW5ndGgpIHN1YkxpbmVzLnB1c2goYCoqQWJpbGl0eSBTY29yZXM6KiogJHtwYXJ0cy5qb2luKFwiLCBcIil9YCk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyB0aGVuIHRyYWl0cy9lbnRyaWVzXG4gICAgICAgIGZvciAoY29uc3QgZW50cnkgb2Ygc3IuZW50cmllcyB8fCBbXSkge1xuICAgICAgICAgIHN1YkxpbmVzLnB1c2goZm9ybWF0RW50cnkoZW50cnkpKTtcbiAgICAgICAgICBzdWJMaW5lcy5wdXNoKFwiXCIpOyAvLyBvcHRpb25hbCBibGFuayBsaW5lIGJldHdlZW4gZmVhdHVyZXNcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHN1YllhbWwgPSBzZXJpYWxpemVGcm9udG1hdHRlcihidWlsZEZNKHNyLCBTUEVDSUVTX01FVEFfREVGUyksIFNQRUNJRVNfTUVUQV9ERUZTKTtcbiAgICAgICAgb3V0LnB1c2goe1xuICAgICAgICAgIHBhdGg6IGAke3N1YkZvbGRlcn0vJHtzbHVnKHNyLm5hbWUpfS5tZGAsXG4gICAgICAgICAgY29udGVudDogYC0tLVxcbiR7c3ViWWFtbH1cXG4tLS1cXG5cXG4ke3N1YkxpbmVzLmpvaW4oXCJcXG5cIil9YCxcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIG5vIHN1YnJhY2VzIFx1MjFEMiBhIHNpbmdsZSBmbGF0IGZpbGVcbiAgICAgIG91dC5wdXNoKHtcbiAgICAgICAgcGF0aDogYFNwZWNpZXMvJHtzYWZlTmFtZX0ubWRgLFxuICAgICAgICBjb250ZW50OiBgLS0tXFxuJHt5YW1sfVxcbi0tLVxcblxcbiR7bGluZXMuam9pbihcIlxcblwiKX1gLFxuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgLy8gNSkgU29ydCAmIHJldHVyblxuICByZXR1cm4gb3V0LnNvcnQoKGEsIGIpID0+IGEucGF0aC5sb2NhbGVDb21wYXJlKGIucGF0aCkpO1xufVxuIiwgIi8vNWUgMjAyNSBjbGFzc2VzXG5cbmltcG9ydCB0eXBlIHsgUGFyc2VkTWFya2Rvd25GaWxlIH0gZnJvbSBcIi4uLy4uL3R5cGVzXCI7XG5pbXBvcnQgeyBcbiAgYnVpbGRGTSwgXG4gIHNlcmlhbGl6ZUZyb250bWF0dGVyLCBcbiAgQ0xBU1NfTUVUQV9ERUZTLCBcbiAgdW5pZmllZFRvb2xQcm9mcywgXG4gIHVuaWZpZWRXZWFwb25Qcm9mcywgXG4gIFNraWxsT3B0aW9uLFxuICB1bmlmaWVkU2tpbGxzLFxuICBTS0lMTF9PUFRJT05TLCBcbiAgRk1fRklFTERTXG59IGZyb20gXCIuL2hlbHBlcnMvZnJvbnRtYXR0ZXJcIjtcbmltcG9ydCB7IHJlbmRlck1hcmtkb3duVGFibGUgfSBmcm9tIFwiLi9oZWxwZXJzL21hcmtkb3duVGFibGVcIjtcbmltcG9ydCB7IHJlcGxhY2U1ZVRhZ3MgfSBmcm9tIFwiLi9oZWxwZXJzL3RhZ1JlcGxhY2VyXCI7XG5pbXBvcnQgeyBmb3JtYXRFbnRyeSB9IGZyb20gXCIuL2hlbHBlcnMvZm9ybWF0RW50cnlcIjtcblxuZnVuY3Rpb24gaXNUeXBlZEVudHJ5KHg6IGFueSk6IHggaXMgeyB0eXBlOiBzdHJpbmc7IFtrOiBzdHJpbmddOiBhbnkgfSB7XG4gIHJldHVybiAoXG4gICAgeCAhPSBudWxsICYmXG4gICAgdHlwZW9mIHggPT09IFwib2JqZWN0XCIgJiZcbiAgICAhQXJyYXkuaXNBcnJheSh4KSAmJlxuICAgIHR5cGVvZiAoeCBhcyBhbnkpLnR5cGUgPT09IFwic3RyaW5nXCJcbiAgKTtcbn1cblxuZnVuY3Rpb24gZm9ybWF0RmVhdHVyZUxpbmsobmFtZTogc3RyaW5nKTogc3RyaW5nIHtcbiAgICBjb25zdCBpZ25vcmUgPSBbXCJBYmlsaXR5IFNjb3JlIEltcHJvdmVtZW50XCIsIFwiQXJjaGV0eXBlIEZlYXR1cmVcIiwgXCJTdWJjbGFzcyBGZWF0dXJlXCJdO1xuICAgIGlmIChpZ25vcmUuc29tZShzdWIgPT4gbmFtZS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKHN1Yi50b0xvd2VyQ2FzZSgpKSkpIHtcbiAgICAgIHJldHVybiBuYW1lO1xuICAgIH1cbiAgXG4gICAgY29uc3QgYW5jaG9yID0gbmFtZVxuICAgICAgLnJlcGxhY2UoL1teXFx3XFxzXS9nLCBcIlwiKSAgICAgICAgICAgLy8gcmVtb3ZlIHB1bmN0dWF0aW9uIChrZWVwIHNwYWNlcylcbiAgICAgIC5yZXBsYWNlKC8tL2csIFwiIFwiKSAgICAgICAgICAgICAgICAvLyByZW1vdmUgZGFzaGVzXG4gICAgICAucmVwbGFjZSgvXFxzKy9nLCBcIiBcIikgICAgICAgICAgICAgIC8vIG5vcm1hbGl6ZSB3aGl0ZXNwYWNlXG4gICAgICAudHJpbSgpXG4gICAgICAucmVwbGFjZSgvXFxiXFx3L2csIGwgPT4gbC50b1VwcGVyQ2FzZSgpKTsgLy8gY2FwaXRhbGl6ZSB3b3Jkc1xuICBcbiAgICByZXR1cm4gYFtbIyR7YW5jaG9yfV1dYDtcbiAgfVxuICBcbmV4cG9ydCBjb25zdCBPUFRfRkVBVFVSRV9UWVBFX1RPX0ZVTEw6IFJlY29yZDxzdHJpbmcsc3RyaW5nPiA9IHtcbiAgQUk6ICAgXCJBcnRpZmljZXIgSW5mdXNpb25cIixcbiAgRUQ6ICAgXCJFbGVtZW50YWwgRGlzY2lwbGluZVwiLFxuICBFSTogICBcIkVsZHJpdGNoIEludm9jYXRpb25cIixcbiAgTU06ICAgXCJNZXRhbWFnaWNcIixcbiAgTVY6ICAgXCJNYW5ldXZlclwiLFxuICBcIk1WOkJcIjogICAgXCJNYW5ldXZlciwgQmF0dGxlIE1hc3RlclwiLFxuICBcIk1WOkMyLVVBXCI6XCJNYW5ldXZlciwgQ2F2YWxpZXIgVjIgKFVBKVwiLFxuICBcIkFTOlYxLVVBXCI6XCJBcmNhbmUgU2hvdCwgVjEgKFVBKVwiLFxuICBcIkFTOlYyLVVBXCI6XCJBcmNhbmUgU2hvdCwgVjIgKFVBKVwiLFxuICBBUzogICBcIkFyY2FuZSBTaG90XCIsXG4gIE9USDogIFwiT3RoZXJcIixcbiAgXCJGUzpGXCI6XCJGaWdodGluZyBTdHlsZTsgRmlnaHRlclwiLFxuICBcIkZTOkJcIjpcIkZpZ2h0aW5nIFN0eWxlOyBCYXJkXCIsXG4gIFwiRlM6UFwiOlwiRmlnaHRpbmcgU3R5bGU7IFBhbGFkaW5cIixcbiAgXCJGUzpSXCI6XCJGaWdodGluZyBTdHlsZTsgUmFuZ2VyXCIsXG4gIFBCOiAgIFwiUGFjdCBCb29uXCIsXG4gIE9SOiAgIFwiT25vbWFuY3kgUmVzb25hbnRcIixcbiAgUk46ICAgXCJSdW5lIEtuaWdodCBSdW5lXCIsXG4gIEFGOiAgIFwiQWxjaGVtaWNhbCBGb3JtdWxhXCIsXG4gIFRUOiAgIFwiVHJhdmVsZXIncyBUcmlja1wiLFxufTtcbiAgXG4gIGZ1bmN0aW9uIHJlbmRlckVudHJpZXMoZW50cmllczogYW55W10pOiBzdHJpbmcge1xuICAgIHJldHVybiBlbnRyaWVzLm1hcCgoZW50cnkpID0+IHtcbiAgICAgIGlmICh0eXBlb2YgZW50cnkgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgcmV0dXJuIHJlcGxhY2U1ZVRhZ3MoZW50cnkpO1xuICAgICAgfVxuICBcbiAgICAgIGlmICh0eXBlb2YgZW50cnkgPT09IFwib2JqZWN0XCIpIHtcbiAgICAgICAgaWYgKGlzVHlwZWRFbnRyeShlbnRyeSkgJiYgZW50cnkudHlwZSA9PT0gXCJyZWZDbGFzc0ZlYXR1cmVcIikge1xuICAgICAgICAgIGNvbnN0IFtuYW1lXSA9IGVudHJ5LmNsYXNzRmVhdHVyZS5zcGxpdChcInxcIik7XG4gICAgICAgICAgcmV0dXJuIGAqU2VlIGZlYXR1cmU6ICoqJHtuYW1lfSoqKmA7XG4gICAgICAgIH1cbiAgXG4gICAgICAgIGlmIChpc1R5cGVkRW50cnkoZW50cnkpICYmIGVudHJ5LnR5cGUgPT09IFwiZW50cmllc1wiKSB7XG4gICAgICAgICAgY29uc3QgaW5uZXIgPSByZW5kZXJFbnRyaWVzKGVudHJ5LmVudHJpZXMgfHwgW10pO1xuICAgICAgICAgIHJldHVybiBgKioke2VudHJ5Lm5hbWV9KipcXG5cXG4ke2lubmVyfWA7XG4gICAgICAgIH1cbiAgXG4gICAgICAgIGlmIChpc1R5cGVkRW50cnkoZW50cnkpICYmIGVudHJ5LnR5cGUgPT09IFwiZW50cmllc1wiKSB7XG4gICAgICAgICAgY29uc3QgaW5uZXIgPSByZW5kZXJFbnRyaWVzKGVudHJ5LmVudHJpZXMgfHwgW10pO1xuICAgICAgICAgIHJldHVybiBgPiAqKiR7ZW50cnkubmFtZX0qKlxcbj5cXG4+ICR7aW5uZXIuc3BsaXQoXCJcXG5cIikuam9pbihcIlxcbj4gXCIpfWA7XG4gICAgICAgIH1cbiAgXG4gICAgICAgIC8vIGZhbGxiYWNrXG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KGVudHJ5LmVudHJpZXMpKSB7XG4gICAgICAgICAgcmV0dXJuIHJlbmRlckVudHJpZXMoZW50cnkuZW50cmllcyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgXG4gICAgICByZXR1cm4gXCJcIjtcbiAgICB9KS5maWx0ZXIoQm9vbGVhbikuam9pbihcIlxcblwiKTtcbiAgfVxuICBcbmV4cG9ydCBmdW5jdGlvbiBwYXJzZUNsYXNzRmlsZShcbiAganNvbjogYW55LFxuICBlZGl0aW9uSWQ6IHN0cmluZyxcbiAgZmlsZU5hbWU6IHN0cmluZyxcbiAgb3B0aW9uYWxGZWF0dXJlczogYW55W11cbik6IFBhcnNlZE1hcmtkb3duRmlsZVtdIHtcbiAgLy8gbWFrZSBlZGl0aW9uSWQgYXZhaWxhYmxlIGZvciBmcm9udG1hdHRlclxuICAoanNvbiBhcyBhbnkpLl9lZGl0aW9uSWQgPSBlZGl0aW9uSWQ7XG5cbiAgLy8gdW53cmFwIHRoZSByZWFsIGNsYXNzIHJlY29yZFxuICBjb25zdCBjbHMgPSBBcnJheS5pc0FycmF5KGpzb24uY2xhc3MpID8ganNvbi5jbGFzc1swXSA6IGpzb247XG4gIC8vIGRlcml2ZSB0aGUgTWFya2Rvd24gZmlsZW5hbWVcbiAgY29uc3QgY2xhc3NOYW1lID1cbiAgICB0eXBlb2YgY2xzLm5hbWUgPT09IFwic3RyaW5nXCJcbiAgICAgID8gY2xzLm5hbWVcbiAgICAgIDogZmlsZU5hbWVcbiAgICAgID8gZmlsZU5hbWUucmVwbGFjZSgvXmNsYXNzLS8sIFwiXCIpLnJlcGxhY2UoL1xcLmpzb24kLywgXCJcIilcbiAgICAgIDogXCJVbmtub3duXCI7XG5cbiAgY29uc3Qgc3ViY2xhc3NGaWxlczogUGFyc2VkTWFya2Rvd25GaWxlW10gPSBbXTtcblxuICBjb25zdCBQUk9GX0JPTlVTX0JZX0xFVkVMID0gW1xuICAgIFwiKzJcIiwgXCIrMlwiLCBcIisyXCIsIFwiKzJcIixcbiAgICBcIiszXCIsIFwiKzNcIiwgXCIrM1wiLCBcIiszXCIsXG4gICAgXCIrNFwiLCBcIis0XCIsIFwiKzRcIiwgXCIrNFwiLFxuICAgIFwiKzVcIiwgXCIrNVwiLCBcIis1XCIsIFwiKzVcIixcbiAgICBcIis2XCIsIFwiKzZcIiwgXCIrNlwiLCBcIis2XCJcbiAgXTtcbiAgXG4gIC8vIG5vcm1hbGl6ZSBoaXRcdTIwMTBkaWNlXG4gIGNvbnN0IGhkTnVtICAgPSBjbHMuaGQ/Lm51bWJlciA/PyAxO1xuICBjb25zdCBoZEZhY2VzID0gY2xzLmhkPy5mYWNlcyAgPz8gNjtcbiAgY29uc3QgaGRTdHIgICA9IGAke2hkTnVtfWQke2hkRmFjZXN9YDtcbiAgY29uc3QgaGRNYXggICA9IGhkTnVtICogaGRGYWNlcztcbiAgY29uc3QgaGRBdmcgICA9IE1hdGguY2VpbCgoaGRGYWNlcyArIDEpIC8gMik7XG5cbmNvbnN0IGJhc2VGTSA9IGJ1aWxkRk0oY2xzLCBDTEFTU19NRVRBX0RFRlMpO1xuY29uc3QgZm0gICAgID0geyAuLi5iYXNlRk0sIGhkOiBoZFN0ciB9O1xuY29uc3QgeWFtbCAgID0gc2VyaWFsaXplRnJvbnRtYXR0ZXIoZm0sIENMQVNTX01FVEFfREVGUyk7XG5cbi8vIDEpIERlY2xhcmUgeW91ciBsaW5lcyBidWZmZXIgaW1tZWRpYXRlbHlcbmNvbnN0IGxpbmVzOiBzdHJpbmdbXSA9IFtdO1xuXG4vLyA0KSBOb3cgY2Fycnkgb24gd2l0aCB0aGUgcmVzdCBvZiB5b3VyIGJvZHlcbmxpbmVzLnB1c2goYCMgJHtjbGFzc05hbWV9YCk7XG5pZiAoY2xzLnNvdXJjZSkgbGluZXMucHVzaChgKipTb3VyY2U6KiogJHtjbHMuc291cmNlfWApO1xubGluZXMucHVzaChgYCk7XG5saW5lcy5wdXNoKGAtLS1gKTtcblxuICAvLyBcdTI1MDBcdTI1MDBcdTI1MDAgSGl0IFBvaW50cyBcdTI1MDBcdTI1MDBcdTI1MDBcbiAgbGluZXMucHVzaChgIyMgSGl0IFBvaW50c2ApO1xuICBsaW5lcy5wdXNoKGAqKkhpdCBEaWNlOioqICR7aGRTdHJ9IHBlciAke2NsYXNzTmFtZX0gbGV2ZWxgKTtcbiAgbGluZXMucHVzaChgKipIaXQgUG9pbnRzIGF0IDFzdCBMZXZlbDoqKiAke2hkTWF4fSArIHlvdXIgQ29uc3RpdHV0aW9uIG1vZGlmaWVyYCk7XG4gIGxpbmVzLnB1c2goXG4gICAgYCoqSGl0IFBvaW50cyBhdCBIaWdoZXIgTGV2ZWxzOioqICR7aGRTdHJ9IChvciAke2hkQXZnfSkgKyB5b3VyIENvbnN0aXR1dGlvbiBtb2RpZmllciBwZXIgbGV2ZWwgYWZ0ZXIgMXN0YFxuICApO1xuXG4vLyBcdTI1MDBcdTI1MDBcdTI1MDAgUHJvZmljaWVuY2llcyBcdTI1MDBcdTI1MDBcdTI1MDBcbmxpbmVzLnB1c2goYGApO1xubGluZXMucHVzaChgLS0tYCk7XG5saW5lcy5wdXNoKGAjIyBQcm9maWNpZW5jaWVzYCk7XG5cbmNvbnN0IHNwID0gY2xzLnN0YXJ0aW5nUHJvZmljaWVuY2llcyA/PyB7fTtcblxuLy8gQXJtb3JcbmlmIChBcnJheS5pc0FycmF5KHNwLmFybW9yKSAmJiBzcC5hcm1vci5sZW5ndGgpIHtcbiAgbGluZXMucHVzaChgLSAqKkFybW9yOioqICR7c3AuYXJtb3Iuam9pbihcIiwgXCIpfWApO1xufVxuXG4vLyBXZWFwb25zXG5jb25zdCB3ZWFwb25MaXN0ID0gdW5pZmllZFdlYXBvblByb2ZzKHNwKTtcbmlmICh3ZWFwb25MaXN0Lmxlbmd0aCkge1xuICBsaW5lcy5wdXNoKGAtICoqV2VhcG9uczoqKiAke3dlYXBvbkxpc3Quam9pbihcIiwgXCIpfWApO1xufVxuXG4vLyBUb29sc1xuY29uc3QgdG9vbExpc3QgPSB1bmlmaWVkVG9vbFByb2ZzKHNwKTtcbmlmICh0b29sTGlzdC5sZW5ndGgpIHtcbiAgbGluZXMucHVzaChgLSAqKlRvb2xzOioqICR7dG9vbExpc3Quam9pbihcIiwgXCIpfWApO1xufVxuXG4vLyBTYXZpbmcgVGhyb3dzXG5jb25zdCBzYXZlcyA9IEFycmF5LmlzQXJyYXkoY2xzLnByb2ZpY2llbmN5KVxuICA/IGNscy5wcm9maWNpZW5jeS5tYXAoKGs6IHN0cmluZykgPT5cbiAgICAgICh7IHN0cjpcIlN0cmVuZ3RoXCIsIGRleDpcIkRleHRlcml0eVwiLCBjb246XCJDb25zdGl0dXRpb25cIixcbiAgICAgICAgIGludDpcIkludGVsbGlnZW5jZVwiLCB3aXM6XCJXaXNkb21cIiwgY2hhOlwiQ2hhcmlzbWFcIiB9W2tdIHx8IGsudG9VcHBlckNhc2UoKSlcbiAgICApXG4gIDogW107XG5pZiAoc2F2ZXMubGVuZ3RoKSB7XG4gIGxpbmVzLnB1c2goYC0gKipTYXZpbmcgVGhyb3dzOioqICR7c2F2ZXMuam9pbihcIiwgXCIpfWApO1xufVxuXG5cbi8vIFx1MjUwMFx1MjUwMFx1MjUwMCBTa2lsbHMgXHUyNTAwXHUyNTAwXHUyNTAwXG57XG4gIC8vIDEpIGdyYWIgd2hhdGV2ZXIgYXJyYXkgaG9sZHMgdGhlIHJhdyBvYmplY3RzL3N0cmluZ3NcbiAgY29uc3QgcmF3U2tpbGxzOiBhbnlbXSA9XG4gICAgQXJyYXkuaXNBcnJheShzcC5za2lsbFByb2ZpY2llbmNpZXMpID8gc3Auc2tpbGxQcm9maWNpZW5jaWVzXG4gICAgOiBBcnJheS5pc0FycmF5KHNwLnNraWxscykgICAgICAgICAgICAgPyBzcC5za2lsbHNcbiAgICA6IEFycmF5LmlzQXJyYXkoc3Auc2tpbGxQcm9mKSAgICAgICAgICA/IHNwLnNraWxsUHJvZlxuICAgIDogW107XG5cbiAgLy8gMikgbG9vayBmb3IgdGhlIFx1MjAxQ2Nob29zZSBOIGZyb20gW1x1MjAyNl1cdTIwMUQgZW50cnlcbiAgY29uc3QgY2hvaWNlRW50cnkgPSByYXdTa2lsbHMuZmluZChcbiAgICBlID0+IGUgJiZcbiAgICAgICAgICh0eXBlb2YgZS5jaG9vc2UgPT09IFwib2JqZWN0XCIgfHwgdHlwZW9mIGUuYW55ID09PSBcIm51bWJlclwiKVxuICApO1xuXG4gIGlmIChjaG9pY2VFbnRyeSkge1xuICAgIC8vIGhvdyBtYW55IHRvIGNob29zZVxuICAgIGNvbnN0IGNvdW50ID0gY2hvaWNlRW50cnkuY2hvb3NlPy5jb3VudCA/PyBjaG9pY2VFbnRyeS5hbnkgPz8gMTtcblxuICAgIC8vIHB1bGwgdGhlIGFjdHVhbCBsaXN0IG9mIG9wdGlvbnMsIG9yIGZhbGwgYmFjayB0byB0aGUgZ2xvYmFsIFNLSUxMX09QVElPTlNcbiAgICBjb25zdCBvcHRpb25zOiBzdHJpbmdbXSA9IEFycmF5LmlzQXJyYXkoY2hvaWNlRW50cnkuY2hvb3NlPy5mcm9tKVxuICAgICAgPyBjaG9pY2VFbnRyeS5jaG9vc2UuZnJvbS5tYXAoKHM6IHN0cmluZykgPT5cbiAgICAgICAgICAvLyB0aXRsZS1jYXNlIGVhY2ggd29yZCAob3IganVzdCB1c2UgcylcbiAgICAgICAgICBzLnNwbGl0KFwiIFwiKS5tYXAodyA9PiB3WzBdLnRvVXBwZXJDYXNlKCkgKyB3LnNsaWNlKDEpKS5qb2luKFwiIFwiKVxuICAgICAgICApXG4gICAgICA6IFNLSUxMX09QVElPTlM7XG5cbiAgICBsaW5lcy5wdXNoKGAtICoqU2tpbGxzIChDaG9vc2UgJHtjb3VudH0pOioqICR7b3B0aW9ucy5qb2luKFwiLCBcIil9YCk7XG5cbiAgfSBlbHNlIHtcbiAgICAvLyBubyBjaG9vc2UtZnJvbSBvYmplY3QgXHUyMTkyIGZsYXQgbGlzdCBmcm9tIHlvdXIgdW5pZmllZCBoZWxwZXJcbiAgICBjb25zdCBmbGF0ID0gdW5pZmllZFNraWxscyhzcCk7XG4gICAgaWYgKGZsYXQubGVuZ3RoKSB7XG4gICAgICBsaW5lcy5wdXNoKGAtICoqU2tpbGxzOioqICR7ZmxhdC5qb2luKFwiLCBcIil9YCk7XG4gICAgfVxuICB9XG59XG5cblxuXG4gIC8vIFx1MjUwMFx1MjUwMFx1MjUwMCBFcXVpcG1lbnQgXHUyNTAwXHUyNTAwXHUyNTAwXG4gIGlmIChBcnJheS5pc0FycmF5KGNscy5zdGFydGluZ0VxdWlwbWVudCkpIHtcbiAgICBsaW5lcy5wdXNoKGBcXG4jIyMgRXF1aXBtZW50YCk7XG4gICAgY2xzLnN0YXJ0aW5nRXF1aXBtZW50XG4gICAgICAuZmlsdGVyKChlOiBhbnkpID0+IHR5cGVvZiBlID09PSBcInN0cmluZ1wiKVxuICAgICAgLmZvckVhY2goKGl0ZW06IHN0cmluZykgPT4gbGluZXMucHVzaChgLSAke2l0ZW19YCkpO1xuICB9XG5cbi8vIFx1MjUwMFx1MjUwMFx1MjUwMCBDbGFzcyBQcm9ncmVzc2lvbiBcdTI1MDBcdTI1MDBcdTI1MDBcbmNvbnN0IHByb2dHcm91cHMgPSBjbHMuY2xhc3NUYWJsZUdyb3VwcyA/PyBbXTtcbmNvbnN0IG1heExldmVsID0gMjA7XG5cbmlmICghcHJvZ0dyb3Vwcy5sZW5ndGgpIHtcbiAgbGluZXMucHVzaChgKihObyBjbGFzcyB0YWJsZSBwcm92aWRlZCBmb3IgdGhpcyBjbGFzcy4pKmApO1xufSBlbHNlIHtcbiAgLy8gMSkgQnVpbGQgbGV2ZWwgXHUyMTkyIGZlYXR1cmUgbWFwXG4gIGNvbnN0IGZlYXR1cmVzQnlMZXZlbDogUmVjb3JkPG51bWJlciwgc3RyaW5nW10+ID0ge307XG4gIGZvciAoY29uc3QgZmVhdCBvZiBjbHMuY2xhc3NGZWF0dXJlcyA/PyBbXSkge1xuICAgIGNvbnN0IHJhdyA9IHR5cGVvZiBmZWF0ID09PSBcIm9iamVjdFwiICYmIGZlYXQuY2xhc3NGZWF0dXJlID8gZmVhdC5jbGFzc0ZlYXR1cmUgOiBTdHJpbmcoZmVhdCk7XG4gICAgY29uc3QgW25hbWUsLCAsbHZsU3RyXSA9IHJhdy5zcGxpdChcInxcIik7XG4gICAgY29uc3QgbHZsID0gTnVtYmVyKGx2bFN0ciA/PyAwKTtcbiAgICBpZiAoIWZlYXR1cmVzQnlMZXZlbFtsdmxdKSBmZWF0dXJlc0J5TGV2ZWxbbHZsXSA9IFtdO1xuICAgIGZlYXR1cmVzQnlMZXZlbFtsdmxdLnB1c2gobmFtZSk7XG4gIH1cblxuICAvLyAyKSBHYXRoZXIgZXZlcnkgY29sdW1uIGxhYmVsICYgcm93IHZhbHVlXG4gIGNvbnN0IGFsbExhYmVsc1NldCA9IG5ldyBTZXQ8c3RyaW5nPigpO1xuICBjb25zdCByb3dNYXBzOiBSZWNvcmQ8bnVtYmVyLCBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+PiA9IHt9O1xuXG4gIGZvciAoY29uc3QgZ3JvdXAgb2YgcHJvZ0dyb3Vwcykge1xuICAgIGNvbnN0IGxhYmVscyA9IEFycmF5LmlzQXJyYXkoZ3JvdXAuY29sTGFiZWxzKVxuICAgICAgPyBncm91cC5jb2xMYWJlbHMubWFwKChsOiBzdHJpbmcpID0+IHJlcGxhY2U1ZVRhZ3MobCkpXG4gICAgICA6IFtdO1xuICAgIGNvbnN0IHJvd3MgPSBBcnJheS5pc0FycmF5KGdyb3VwLnJvd3MpXG4gICAgICA/IGdyb3VwLnJvd3NcbiAgICAgIDogQXJyYXkuaXNBcnJheShncm91cC5yb3dzU3BlbGxQcm9ncmVzc2lvbilcbiAgICAgICAgPyBncm91cC5yb3dzU3BlbGxQcm9ncmVzc2lvblxuICAgICAgICA6IFtdO1xuXG4gICAgaWYgKCFsYWJlbHMubGVuZ3RoIHx8ICFyb3dzLmxlbmd0aCkgY29udGludWU7XG5cbiAgICBmb3IgKGxldCBsdmwgPSAwOyBsdmwgPCByb3dzLmxlbmd0aDsgbHZsKyspIHtcbiAgICAgIGNvbnN0IGxldmVsTnVtID0gbHZsICsgMTtcbiAgICAgIGlmICghcm93TWFwc1tsZXZlbE51bV0pIHJvd01hcHNbbGV2ZWxOdW1dID0ge307XG4gICAgICBjb25zdCByb3dNYXAgPSByb3dNYXBzW2xldmVsTnVtXTtcbiAgICAgIGNvbnN0IGNlbGxzID0gcm93c1tsdmxdO1xuXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxhYmVscy5sZW5ndGg7IGkrKykge1xuICAgICAgICBjb25zdCBsYWJlbCA9IGxhYmVsc1tpXTtcbiAgICAgICAgbGV0IHZhbCA9IFwiXCI7XG4gICAgICAgIGNvbnN0IGNlbGwgPSBjZWxsc1tpXTtcblxuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShjZWxsKSkge1xuICAgICAgICAgIHZhbCA9IGNlbGwuam9pbihcIiwgXCIpO1xuICAgICAgICB9IGVsc2UgaWYgKGNlbGwgJiYgdHlwZW9mIGNlbGwgPT09IFwib2JqZWN0XCIgJiYgXCJ2YWx1ZVwiIGluIGNlbGwpIHtcbiAgICAgICAgICB2YWwgPSBTdHJpbmcoY2VsbC52YWx1ZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdmFsID0gU3RyaW5nKGNlbGwgPz8gXCJcIik7XG4gICAgICAgIH1cblxuICAgICAgICBhbGxMYWJlbHNTZXQuYWRkKGxhYmVsKTtcbiAgICAgICAgcm93TWFwW2xhYmVsXSA9IHZhbDtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvLyAzKSAqKkZpbHRlciBvdXQqKiBhbnkgc3BlbGxcdTIwMTB0YWJsZSBjb2x1bW5zXG4gIGNvbnN0IGFsbExhYmVscyA9IEFycmF5LmZyb20oYWxsTGFiZWxzU2V0KS5maWx0ZXIobGJsID0+XG4gICAgIS9DYW50cmlwcyBLbm93bnxTcGVsbHMgS25vd258XFxkKyhzdHxuZHxyZHx0aCkvLnRlc3QobGJsKVxuICApO1xuXG4gIC8vIDQpIEJ1aWxkIGZpbmFsIGhlYWRlciAmIHJvd3NcbiAgY29uc3QgbWVyZ2VkTGFiZWxzID0gW1wiTGV2ZWxcIiwgXCJQcm9maWNpZW5jeSBCb251c1wiLCBcIkNsYXNzIEZlYXR1cmVzXCIsIC4uLmFsbExhYmVsc107XG4gIGNvbnN0IG1lcmdlZFJvd3M6IHN0cmluZ1tdW10gPSBbXTtcblxuICBmb3IgKGxldCBsdmwgPSAxOyBsdmwgPD0gbWF4TGV2ZWw7IGx2bCsrKSB7XG4gICAgY29uc3QgZmVhdHVyZUxpc3QgPSAoZmVhdHVyZXNCeUxldmVsW2x2bF0gPz8gW10pLm1hcChmb3JtYXRGZWF0dXJlTGluayk7XG4gICAgY29uc3Qgcm93TWFwID0gcm93TWFwc1tsdmxdID8/IHt9O1xuXG4gICAgbWVyZ2VkUm93cy5wdXNoKFtcbiAgICAgIGx2bC50b1N0cmluZygpLFxuICAgICAgUFJPRl9CT05VU19CWV9MRVZFTFtsdmwgLSAxXSB8fCBcIlwiLFxuICAgICAgZmVhdHVyZUxpc3Quam9pbihcIiwgXCIpLnJlcGxhY2UoL1xcfC9nLCBcIiYjMTI0O1wiKSxcbiAgICAgIC4uLmFsbExhYmVscy5tYXAobGFiZWwgPT4gcm93TWFwW2xhYmVsXSA/PyBcIlwiKVxuICAgIF0pO1xuICB9XG5cbiAgLy8gNSkgUmVuZGVyIHRoZSBmZWF0dXJlc1x1MjAxMG9ubHkgdGFibGVcbmxpbmVzLnB1c2goYFxcbj4gWyFleGFtcGxlXS0gQ2xhc3MgUHJvZ3Jlc3Npb24gVGFibGVgKTtcbmxpbmVzLnB1c2goXG4gIHJlbmRlck1hcmtkb3duVGFibGUoe1xuICAgIHR5cGU6ICAgICAgXCJ0YWJsZVwiLFxuICAgIGNhcHRpb246ICAgXCJcIixcbiAgICBjb2xMYWJlbHM6IG1lcmdlZExhYmVscyxcbiAgICByb3dzOiAgICAgIG1lcmdlZFJvd3MsXG4gIH0pKTtcbn1cblxuLy8gXHUyNTAwXHUyNTAwXHUyNTAwIFNwZWxsIFByb2dyZXNzaW9uIFx1MjUwMFx1MjUwMFx1MjUwMFxuLy8gMSkgZmluZCB0aGUgdHdvIGdyb3Vwc1xuY29uc3QgY3NHcm91cCA9IHByb2dHcm91cHMuZmluZCgoZzogYW55KSA9PlxuICBBcnJheS5pc0FycmF5KGcuY29sTGFiZWxzKSAmJlxuICBnLmNvbExhYmVscy5zb21lKChsYmw6IGFueSkgPT4gL0NhbnRyaXBzIEtub3dufFNwZWxscyBLbm93bi8udGVzdChTdHJpbmcobGJsKSkpXG4pO1xuY29uc3Qgc2xvdEdyb3VwID0gcHJvZ0dyb3Vwcy5maW5kKChnOiBhbnkpID0+XG4gIEFycmF5LmlzQXJyYXkoZy5jb2xMYWJlbHMpICYmXG4gIGcudGl0bGUgPT09IFwiU3BlbGwgU2xvdHMgcGVyIFNwZWxsIExldmVsXCJcbik7XG5cbmlmIChjc0dyb3VwICYmIHNsb3RHcm91cCkge1xuICAvLyAyKSByYXcgbGFiZWxzXG4gIGNvbnN0IGNzTGFiZWxzICAgPSAoY3NHcm91cC5jb2xMYWJlbHMgYXMgc3RyaW5nW10pLm1hcChsID0+IHJlcGxhY2U1ZVRhZ3MobCkpO1xuICBjb25zdCBzbG90TGFiZWxzID0gKHNsb3RHcm91cC5jb2xMYWJlbHMgYXMgc3RyaW5nW10pLm1hcChsID0+IHJlcGxhY2U1ZVRhZ3MobCkpO1xuXG4gIC8vIDMpIHJhdyByb3dzXG4gIGNvbnN0IGNzUm93cyAgID0gKGNzR3JvdXAucm93cyAgICAgIGFzIGFueVtdW10pICAgICAgICAgICAgICB8fCBbXTtcbiAgY29uc3Qgc2xvdFJvd3MgPSAoc2xvdEdyb3VwLnJvd3NTcGVsbFByb2dyZXNzaW9uIGFzIGFueVtdW10pIHx8IFtdO1xuXG4gIC8vIDQpIGJ1aWxkIGhlYWRlcjogTGV2ZWwgKyBjYW50cmlwcy9zcGVsbHMgKyBlYWNoIHNsb3QgbGV2ZWxcbiAgY29uc3QgY29sTGFiZWxzID0gW1wiTGV2ZWxcIiwgLi4uY3NMYWJlbHMsIC4uLnNsb3RMYWJlbHNdO1xuXG4gIC8vIDUpIGJ1aWxkIGVhY2ggcm93IGJ5IHppcHBpbmcgY3NSb3dzW2ldICsgc2xvdFJvd3NbaV1cbiAgY29uc3Qgc3BlbGxSb3dzOiBzdHJpbmdbXVtdID0gW107XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgTWF0aC5tYXgoY3NSb3dzLmxlbmd0aCwgc2xvdFJvd3MubGVuZ3RoKTsgaSsrKSB7XG4gICAgY29uc3QgbHZsID0gU3RyaW5nKGkgKyAxKTtcbiAgICBjb25zdCBjc0NlbGxzICAgPSBjc1Jvd3NbaV0gICA/IGNzUm93c1tpXS5tYXAoU3RyaW5nKSAgIDogY3NMYWJlbHMubWFwKF8gPT4gXCJcIik7XG4gICAgY29uc3Qgc2xvdENlbGxzID0gc2xvdFJvd3NbaV0gPyBzbG90Um93c1tpXS5tYXAoU3RyaW5nKSA6IHNsb3RMYWJlbHMubWFwKF8gPT4gXCJcIik7XG4gICAgc3BlbGxSb3dzLnB1c2goW2x2bCwgLi4uY3NDZWxscywgLi4uc2xvdENlbGxzXSk7XG4gIH1cblxuICAvLyA2KSByZW5kZXIhXG4gIGxpbmVzLnB1c2goYFxcbj4gWyF0aXBdLSBTcGVsbCBQcm9ncmVzc2lvbiBUYWJsZWApO1xuICBsaW5lcy5wdXNoKFxuICAgIHJlbmRlck1hcmtkb3duVGFibGUoe1xuICAgICAgdHlwZTogICAgICBcInRhYmxlXCIsXG4gICAgICBjYXB0aW9uOiAgIFwiXCIsXG4gICAgICBjb2xMYWJlbHM6IGNvbExhYmVscyxcbiAgICAgIHJvd3M6ICAgICAgc3BlbGxSb3dzLFxuICB9KSk7XG59XG5cblxuLy8gXHUyNTAwXHUyNTAwXHUyNTAwIFN1YmNsYXNzZXMgXHUyNTAwXHUyNTAwXHUyNTAwXG5jb25zdCBzdWJzID0gQXJyYXkuaXNBcnJheShqc29uLnN1YmNsYXNzKSA/IGpzb24uc3ViY2xhc3MgOiBbXTtcbmNvbnN0IHN1YmNsYXNzRmVhdHVyZXMgPSBBcnJheS5pc0FycmF5KGpzb24uc3ViY2xhc3NGZWF0dXJlKVxuICA/IGpzb24uc3ViY2xhc3NGZWF0dXJlXG4gIDoganNvbi5sb29rdXA/LnN1YmNsYXNzRmVhdHVyZSA/PyBbXTtcblxuZm9yIChjb25zdCBzYyBvZiBzdWJzKSB7XG4gIGNvbnN0IHN1YmNsYXNzTmFtZSA9IHNjLm5hbWU7XG4gIGNvbnN0IHN1YkxpbmVzOiBzdHJpbmdbXSA9IFtdO1xuXG4gIC8vIFx1MjUwMFx1MjUwMFx1MjUwMCBIZWFkZXIgbWV0YWRhdGEgXHUyNTAwXHUyNTAwXHUyNTAwXG4gIHN1YkxpbmVzLnB1c2goYCMgJHtzdWJjbGFzc05hbWV9YCk7XG4gIHN1YkxpbmVzLnB1c2goYCoqUGFyZW50IENsYXNzOioqIFtbJHtjbGFzc05hbWV9XV1gKTtcbiAgaWYgKHNjLnNvdXJjZSkgc3ViTGluZXMucHVzaChgKipTb3VyY2U6KiogJHtzYy5zb3VyY2V9YCk7XG4gIHN1YkxpbmVzLnB1c2goYGApOyAvLyBibGFuayBsaW5lXG5cbiAgLy8gXHUyNTAwXHUyNTAwXHUyNTAwIEludHJvIGVudHJ5IChsZXZlbCAzIGZlYXR1cmUgZGVzY3JpcHRpb24pIFx1MjUwMFx1MjUwMFx1MjUwMFxuICBjb25zdCBpbnRybyA9IHN1YmNsYXNzRmVhdHVyZXMuZmluZCgoZjogYW55KSA9PlxuICAgIGYubmFtZSA9PT0gc2MubmFtZSAmJlxuICAgIGYubGV2ZWwgPT09IDMgJiZcbiAgICBmLnN1YmNsYXNzU2hvcnROYW1lID09PSBzYy5zaG9ydE5hbWUgJiZcbiAgICBmLnN1YmNsYXNzU291cmNlID09PSBzYy5zb3VyY2VcbiAgKTtcbiAgaWYgKGludHJvPy5lbnRyaWVzPy5sZW5ndGgpIHtcbiAgICBjb25zdCBpbnRyb1RleHQgPSBBcnJheS5pc0FycmF5KGludHJvLmVudHJpZXMpXG4gICAgICA/IGludHJvLmVudHJpZXMubWFwKChlOiBhbnkpID0+XG4gICAgICAgICAgdHlwZW9mIGUgPT09IFwic3RyaW5nXCIgPyByZXBsYWNlNWVUYWdzKGUpIDogZm9ybWF0RW50cnkoZSlcbiAgICAgICAgKS5qb2luKFwiXFxuXFxuXCIpXG4gICAgICA6IGZvcm1hdEVudHJ5KGludHJvLmVudHJpZXMpO1xuICAgIHN1YkxpbmVzLnB1c2goaW50cm9UZXh0LCBgYCk7XG4gIH1cblxuICAvLyBcdTI1MDBcdTI1MDBcdTI1MDAgT3B0aW9uYWxcdTIwMTBmZWF0dXJlIGJsb2NrIFx1MjUwMFx1MjUwMFx1MjUwMFxuICBjb25zdCBjb2RlID0gKE9iamVjdC5lbnRyaWVzKE9QVF9GRUFUVVJFX1RZUEVfVE9fRlVMTCkgYXMgW3N0cmluZyxzdHJpbmddW10pXG4gICAgLmZpbmQoKFssIGZ1bGxdKSA9PlxuICAgICAgZnVsbC50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKHN1YmNsYXNzTmFtZS50b0xvd2VyQ2FzZSgpKVxuICAgICk/LlswXTtcbiAgaWYgKGNvZGUpIHtcbiAgICBjb25zdCBtYXRjaGVzID0gb3B0aW9uYWxGZWF0dXJlcy5maWx0ZXIob2YgPT5cbiAgICAgIEFycmF5LmlzQXJyYXkob2YuZmVhdHVyZVR5cGUpICYmIG9mLmZlYXR1cmVUeXBlLmluY2x1ZGVzKGNvZGUpXG4gICAgKTtcbiAgICBpZiAobWF0Y2hlcy5sZW5ndGgpIHtcbiAgICAgIHN1YkxpbmVzLnB1c2goYCMjICR7c3ViY2xhc3NOYW1lfSBPcHRpb25hbCBGZWF0dXJlc2ApO1xuICAgICAgZm9yIChjb25zdCBmZWF0IG9mIG1hdGNoZXMpIHtcbiAgICAgICAgZm9yIChjb25zdCBlbnRyeSBvZiBmZWF0LmVudHJpZXMpIHtcbiAgICAgICAgICBjb25zdCB0eHQgPSB0eXBlb2YgZW50cnkgPT09IFwic3RyaW5nXCJcbiAgICAgICAgICAgID8gcmVwbGFjZTVlVGFncyhlbnRyeSlcbiAgICAgICAgICAgIDogZm9ybWF0RW50cnkoZW50cnkpO1xuICAgICAgICAgIHN1YkxpbmVzLnB1c2goYCoqJHtmZWF0Lm5hbWV9OioqICR7dHh0fWApO1xuICAgICAgICB9XG4gICAgICAgIHN1YkxpbmVzLnB1c2goYGApO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8vIFx1MjUwMFx1MjUwMFx1MjUwMCBTdWJjbGFzcyBwcm9ncmVzc2lvbiB0YWJsZSBcdTI1MDBcdTI1MDBcdTI1MDBcbiAgY29uc3QgcHJvZyA9IHNjLnN1YmNsYXNzVGFibGVHcm91cHMgPz8gW107XG4gIGlmIChwcm9nLmxlbmd0aCkge1xuICAgIGNvbnN0IGxhYmVscyA9IG5ldyBTZXQ8c3RyaW5nPigpO1xuICAgIGNvbnN0IHJvd3NNYXA6IFJlY29yZDxudW1iZXIsIFJlY29yZDxzdHJpbmcsc3RyaW5nPj4gPSB7fTtcbiAgICBmb3IgKGNvbnN0IGcgb2YgcHJvZykge1xuICAgICAgY29uc3QgY29scyA9IChnLmNvbExhYmVscyA/PyBbXSkubWFwKHJlcGxhY2U1ZVRhZ3MpO1xuICAgICAgY29uc3Qgcm93cyA9IEFycmF5LmlzQXJyYXkoZy5yb3dzKVxuICAgICAgICA/IGcucm93c1xuICAgICAgICA6IEFycmF5LmlzQXJyYXkoZy5yb3dzU3BlbGxQcm9ncmVzc2lvbilcbiAgICAgICAgICA/IGcucm93c1NwZWxsUHJvZ3Jlc3Npb25cbiAgICAgICAgICA6IFtdO1xuICAgICAgcm93cy5mb3JFYWNoKChyOiBhbnksIGk6IGFueSkgPT4ge1xuICAgICAgICBjb25zdCBsdmwgPSBpICsgMTtcbiAgICAgICAgcm93c01hcFtsdmxdID8/PSB7fTtcbiAgICAgICAgci5mb3JFYWNoKChjOiBhbnksIGo6IG51bWJlcikgPT4ge1xuICAgICAgICAgIGNvbnN0IGxhYiA9IGNvbHNbal07XG4gICAgICAgICAgaWYgKCFsYWIpIHJldHVybjtcbiAgICAgICAgICBsYWJlbHMuYWRkKGxhYik7XG4gICAgICAgICAgcm93c01hcFtsdmxdW2xhYl0gPSB0eXBlb2YgYyA9PT0gXCJvYmplY3RcIiAmJiBjICE9PSBudWxsICYmIFwidmFsdWVcIiBpbiBjXG4gICAgICAgICAgICA/IFN0cmluZyhjLnZhbHVlKVxuICAgICAgICAgICAgOiBTdHJpbmcoYyA/PyBcIlwiKTtcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9XG4gICAgY29uc3QgaGRycyA9IEFycmF5LmZyb20obGFiZWxzKTtcbiAgICBzdWJMaW5lcy5wdXNoKGAjIyBTdWJjbGFzcyBQcm9ncmVzc2lvbmApO1xuICAgIHN1YkxpbmVzLnB1c2gocmVuZGVyTWFya2Rvd25UYWJsZSh7XG4gICAgICB0eXBlOiAgICAgIFwidGFibGVcIixcbiAgICAgIGNhcHRpb246ICAgXCJcIixcbiAgICAgIGNvbExhYmVsczogW1wiTGV2ZWxcIiwgLi4uaGRyc10sXG4gICAgICByb3dzOiAgICAgIEFycmF5LmZyb20oeyBsZW5ndGg6IDIwIH0sIChfLCBpKSA9PiB7XG4gICAgICAgIGNvbnN0IGx2bCA9IGkgKyAxO1xuICAgICAgICByZXR1cm4gW1N0cmluZyhsdmwpLCAuLi5oZHJzLm1hcChoID0+IHJvd3NNYXBbbHZsXT8uW2hdID8/IFwiXCIpXTtcbiAgICAgIH0pXG4gICAgfSkpO1xuICB9XG5cbi8vIFx1MjUwMFx1MjUwMFx1MjUwMCBEZXRhaWxlZCBsZXZlbFx1MjAxMGJ5XHUyMDEwbGV2ZWwgZmVhdHVyZXMgXHUyNTAwXHUyNTAwXHUyNTAwXG5jb25zdCBmZWF0c0J5THZsOiBSZWNvcmQ8bnVtYmVyLCBhbnlbXT4gPSB7fTtcbmZvciAoY29uc3QgZiBvZiBzdWJjbGFzc0ZlYXR1cmVzKSB7XG4gIGlmIChcbiAgICBmLnN1YmNsYXNzU2hvcnROYW1lID09PSBzYy5zaG9ydE5hbWUgJiZcbiAgICBmLnN1YmNsYXNzU291cmNlID09PSBzYy5zb3VyY2UgJiZcbiAgICBmLmNsYXNzTmFtZSA9PT0gY2xhc3NOYW1lXG4gICkge1xuICAgIGNvbnN0IGx2bCA9IGYubGV2ZWwgPz8gMDtcbiAgICA7KGZlYXRzQnlMdmxbbHZsXSA/Pz0gW10pLnB1c2goZik7XG4gIH1cbn1cblxuZm9yIChjb25zdCBsdmwgb2YgT2JqZWN0LmtleXMoZmVhdHNCeUx2bCkubWFwKE51bWJlcikuc29ydCgoYSxiKT0+YS1iKSkge1xuICBzdWJMaW5lcy5wdXNoKGAtLS1gLCBgIyMgTGV2ZWwgJHtsdmx9YCk7XG5cbiAgZm9yIChjb25zdCBmIG9mIGZlYXRzQnlMdmxbbHZsXSkge1xuICBzdWJMaW5lcy5wdXNoKGAjIyMgJHtmLm5hbWV9YCk7XG5cbiAgLy8gV2FsayBlYWNoIGVudHJ5IGZvciB0aGlzIGZlYXR1cmVcbiAgZm9yIChjb25zdCBlbnQgb2YgQXJyYXkuaXNBcnJheShmLmVudHJpZXMpID8gZi5lbnRyaWVzIDogW2YuZW50cmllc10pIHtcbiAgICAvLyAxKSBQbGFpbiBwYXJhZ3JhcGggZW50cmllc1xuICAgIGlmICh0eXBlb2YgZW50ID09PSBcInN0cmluZ1wiKSB7XG4gICAgICBzdWJMaW5lcy5wdXNoKHJlcGxhY2U1ZVRhZ3MoZW50KSk7XG4gICAgICBjb250aW51ZTtcbiAgICB9XG5cbiAgICAvLyAyKSBJZiBpdCdzIHRoZSBcIk1hbmV1dmVyc1wiIGVudHJpZXNcdTIwMTBibG9jaywgaW5qZWN0IHlvdXIgbGlzdCBoZXJlXG4gICAgaWYgKGlzVHlwZWRFbnRyeShlbnQpICYmIGVudC50eXBlID09PSBcImVudHJpZXNcIiAmJiAvXk1hbmV1dmVycyQvaS50ZXN0KGVudC5uYW1lKSkge1xuICAgICAgLy8gZmlyc3QgcHJpbnQgdGhlIHN1Ylx1MjAxMGhlYWRpbmcgYW5kIGFueSB0ZXh0IGl0IGhhZFxuICAgICAgc3ViTGluZXMucHVzaChgIyMjIyMgJHtlbnQubmFtZX1gKTtcbiAgICAgIGZvciAoY29uc3QgdHh0IG9mIEFycmF5LmlzQXJyYXkoZW50LmVudHJpZXMpID8gZW50LmVudHJpZXMgOiBbZW50LmVudHJpZXNdKSB7XG4gICAgICAgIHN1YkxpbmVzLnB1c2godHlwZW9mIHR4dCA9PT0gXCJzdHJpbmdcIlxuICAgICAgICAgID8gcmVwbGFjZTVlVGFncyh0eHQpXG4gICAgICAgICAgOiBmb3JtYXRFbnRyeSh0eHQpKTtcbiAgICAgIH1cblxuICAgICAgLy8gbm93IGluamVjdCB0aGUgZnVsbCBtYW5ldXZlciBkZWZpbml0aW9ucyBmb3IgdGhpcyBzdWJjbGFzc1xuICAgICAgY29uc3QgY29kZSA9IChPYmplY3QuZW50cmllcyhPUFRfRkVBVFVSRV9UWVBFX1RPX0ZVTEwpIGFzIFtzdHJpbmcsc3RyaW5nXVtdKVxuICAgICAgICAuZmluZCgoWywgZnVsbF0pID0+XG4gICAgICAgICAgZnVsbC50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKHN1YmNsYXNzTmFtZS50b0xvd2VyQ2FzZSgpKVxuICAgICAgICApPy5bMF07XG4gICAgICBpZiAoY29kZSkge1xuICAgICAgICBjb25zdCBtYXRjaGVzID0gb3B0aW9uYWxGZWF0dXJlcy5maWx0ZXIob2YgPT5cbiAgICAgICAgICBBcnJheS5pc0FycmF5KG9mLmZlYXR1cmVUeXBlKSAmJiBvZi5mZWF0dXJlVHlwZS5pbmNsdWRlcyhjb2RlKVxuICAgICAgICApO1xuICAgICAgICBmb3IgKGNvbnN0IGZlYXREZWYgb2YgbWF0Y2hlcykge1xuICAgICAgICAgIGZvciAoY29uc3Qgc3ViIG9mIGZlYXREZWYuZW50cmllcykge1xuICAgICAgICAgICAgY29uc3QgbGluZSA9IHR5cGVvZiBzdWIgPT09IFwic3RyaW5nXCJcbiAgICAgICAgICAgICAgPyByZXBsYWNlNWVUYWdzKHN1YilcbiAgICAgICAgICAgICAgOiBmb3JtYXRFbnRyeShzdWIpO1xuICAgICAgICAgICAgc3ViTGluZXMucHVzaChgKioke2ZlYXREZWYubmFtZX06KiogJHtsaW5lfWApO1xuICAgICAgICAgIH1cbiAgICAgICAgICBzdWJMaW5lcy5wdXNoKFwiXCIpOyAvLyBzcGFjZXJcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgY29udGludWU7XG4gICAgfVxuXG4gICAgLy8gMykgQW55IG90aGVyIG5lc3RlZCBcImVudHJpZXNcIiBibG9ja3NcbiAgICBpZiAoaXNUeXBlZEVudHJ5KGVudCkgJiYgZW50LnR5cGUgPT09IFwiZW50cmllc1wiICYmIGVudC5uYW1lKSB7XG4gICAgICBzdWJMaW5lcy5wdXNoKGAjIyMjIyAke2VudC5uYW1lfWApO1xuICAgICAgZm9yIChjb25zdCBlMiBvZiBBcnJheS5pc0FycmF5KGVudC5lbnRyaWVzKSA/IGVudC5lbnRyaWVzIDogW2VudC5lbnRyaWVzXSkge1xuICAgICAgICBzdWJMaW5lcy5wdXNoKGZvcm1hdEVudHJ5KGUyKSk7XG4gICAgICB9XG4gICAgICBjb250aW51ZTtcbiAgICB9XG5cbiAgICAvLyA0KSBJbnNldHNcbiAgICBpZiAoaXNUeXBlZEVudHJ5KGVudCkgJiYgZW50LnR5cGUgPT09IFwiaW5zZXRcIiAmJiBlbnQubmFtZSkge1xuICAgICAgY29uc3QgaW5uZXIgPSBBcnJheS5pc0FycmF5KGVudC5lbnRyaWVzKSA/IGVudC5lbnRyaWVzIDogW2VudC5lbnRyaWVzXTtcbiAgICAgIHN1YkxpbmVzLnB1c2goYD4gKioke2VudC5uYW1lfSoqYCk7XG4gICAgICBpbm5lci5mb3JFYWNoKChlMjogYW55KSA9PiBzdWJMaW5lcy5wdXNoKGA+ICR7Zm9ybWF0RW50cnkoZTIpfWApKTtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cblxuICAgIC8vIDUpIEZhbGxiYWNrXG4gICAgY29uc3QgZmIgPSBmb3JtYXRFbnRyeShlbnQpO1xuICAgIGlmIChmYikgc3ViTGluZXMucHVzaChmYik7XG4gIH1cbiAgfVxufVxuXG5cbiAgLy8gXHUyNTAwXHUyNTAwXHUyNTAwIENsZWFuIHVwICYgcHVzaCBcdTI1MDBcdTI1MDBcdTI1MDBcbiAgY29uc3Qgc3ViY2xhc3NDb250ZW50ID0gc3ViTGluZXNcbiAgICAuam9pbihcIlxcblxcblwiKVxuICAgIC5yZXBsYWNlKC9cXG57Myx9L2csIFwiXFxuXFxuXCIpO1xuICBzdWJjbGFzc0ZpbGVzLnB1c2goe1xuICAgIHBhdGg6IGBDbGFzc2VzLyR7Y2xhc3NOYW1lfS9TdWJjbGFzc2VzLyR7c3ViY2xhc3NOYW1lfS5tZGAsXG4gICAgY29udGVudDogc3ViY2xhc3NDb250ZW50XG4gIH0pO1xufVxuXG5cblxuLy8gXHUyNTAwXHUyNTAwXHUyNTAwIFN1YmNsYXNzZXMgU3VtbWFyeSBcdTI1MDBcdTI1MDBcdTI1MDBcbmlmIChzdWJzLmxlbmd0aCkge1xuICBjb25zdCBsaW5rcyA9IHN1YnMubWFwKChzYzogYW55KSA9PlxuICAgIGBbW1N1YmNsYXNzZXMvJHtzYy5uYW1lLnJlcGxhY2UoL1tcXFxcL10vZywgXCItXCIpfXwke3NjLm5hbWV9XV1gXG4gICk7XG4gIGxpbmVzLnB1c2goYFxcbioqU3ViY2xhc3NlczoqKiAke2xpbmtzLmpvaW4oXCIsIFwiKX1gKTtcbn1cblxuXG4gIC8vIEdldCBmdWxsIGNsYXNzIGZlYXR1cmUgZGVmaW5pdGlvbnNcbmNvbnN0IGFsbEZlYXR1cmVzID0gQXJyYXkuaXNBcnJheShqc29uLmNsYXNzRmVhdHVyZSkgPyBqc29uLmNsYXNzRmVhdHVyZSA6IGpzb24ubG9va3VwPy5jbGFzc0ZlYXR1cmUgPz8gW107XG5jb25zdCBmZWF0dXJlc0J5TGV2ZWw6IFJlY29yZDxudW1iZXIsIGFueVtdPiA9IHt9O1xuXG5mb3IgKGNvbnN0IGVudHJ5IG9mIGFsbEZlYXR1cmVzKSB7XG4gIGlmIChlbnRyeS5jbGFzc05hbWUgIT09IGNsYXNzTmFtZSkgY29udGludWU7XG4gIGNvbnN0IGx2bCA9IGVudHJ5LmxldmVsID8/IDA7XG4gIGlmICghZmVhdHVyZXNCeUxldmVsW2x2bF0pIGZlYXR1cmVzQnlMZXZlbFtsdmxdID0gW107XG4gIGZlYXR1cmVzQnlMZXZlbFtsdmxdLnB1c2goZW50cnkpO1xufVxuXG5cbi8vIFx1MjUwMFx1MjUwMFx1MjUwMCBMZXZlbCBGZWF0dXJlcyBcdTI1MDBcdTI1MDBcdTI1MDBcbmxpbmVzLnB1c2goYGApO1xubGluZXMucHVzaChgLS0tYCk7XG5saW5lcy5wdXNoKGAjIyBMZXZlbCBGZWF0dXJlc2ApO1xuXG5jb25zdCBsZXZlbHMgPSBPYmplY3RcbiAgLmtleXMoZmVhdHVyZXNCeUxldmVsKVxuICAubWFwKG4gPT4gK24pXG4gIC5zb3J0KChhLCBiKSA9PiBhIC0gYik7XG5cbmZvciAoY29uc3QgbHZsIG9mIGxldmVscykge1xuICBsaW5lcy5wdXNoKGAjIyMgTGV2ZWwgJHtsdmx9YCk7XG5cbiAgZm9yIChjb25zdCBmZWF0IG9mIGZlYXR1cmVzQnlMZXZlbFtsdmxdKSB7XG4gICAgLy8gRmVhdHVyZSBoZWFkZXJcbiAgICBsaW5lcy5wdXNoKGAjIyMjICR7ZmVhdC5uYW1lfWApO1xuXG4gICAgLy8gRW5zdXJlIGVudHJpZXMgaXMgYWx3YXlzIGFuIGFycmF5XG4gICAgY29uc3QgZW50cmllcyA9IEFycmF5LmlzQXJyYXkoZmVhdC5lbnRyaWVzKVxuICAgICAgPyBmZWF0LmVudHJpZXNcbiAgICAgIDogW2ZlYXQuZW50cmllc107XG5cbiAgICBmb3IgKGNvbnN0IGVudCBvZiBlbnRyaWVzKSB7XG4gICAgICAvLyAxKSBQbGFpbi10ZXh0IHBhcmFncmFwaFxuICAgICAgICBpZiAodHlwZW9mIGVudCA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgIGNvbnN0IHR4dCA9IGZvcm1hdEVudHJ5KGVudCkudHJpbSgpO1xuICAgICAgICAgIC8vIHNraXAgYW55IHB1cmUtYnJhY2UgbGluZXNcbiAgICAgICAgICBpZiAodHh0ID09PSBcIntcIiB8fCB0eHQgPT09IFwifVwiKSBjb250aW51ZTtcbiAgICAgICAgICBsaW5lcy5wdXNoKHR4dCk7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoaXNUeXBlZEVudHJ5KGVudCkgJiYgZW50LnR5cGUgPT09IFwibGlzdFwiICYmIEFycmF5LmlzQXJyYXkoZW50Lml0ZW1zKSkge1xuICAgIGZvciAoY29uc3QgaXRlbSBvZiBlbnQuaXRlbXMpIHtcbiAgICAgIGxpbmVzLnB1c2goYC0gJHtyZXBsYWNlNWVUYWdzKGl0ZW0pfWApO1xuICAgIH1cbiAgICBjb250aW51ZTtcbiAgfVxuICAgICAgLy8gXHUyNTAwXHUyNTAwXHUyNTAwIGluc2lkZSB5b3VyIGZvciAoY29uc3QgZW50IG9mIGVudHJpZXMpIGxvb3AgXHUyNTAwXHUyNTAwXHUyNTAwXG4gICAgICBpZiAoaXNUeXBlZEVudHJ5KGVudCkgJiYgZW50LnR5cGUgPT09IFwib3B0aW9uc1wiKSB7XG4gIGlmIChlbnQuY291bnQpIHtcbiAgICBsaW5lcy5wdXNoKFwiXCIpO1xuICAgIGxpbmVzLnB1c2goYCoqQ2hvb3NlICR7ZW50LmNvdW50fSBvZiB0aGUgZm9sbG93aW5nIG9wdGlvbnM6KipgKTtcbiAgICBsaW5lcy5wdXNoKFwiXCIpO1xuICB9XG5cbiAgZm9yIChjb25zdCBvcHRSZWYgb2YgQXJyYXkuaXNBcnJheShlbnQuZW50cmllcykgPyBlbnQuZW50cmllcyA6IFtlbnQuZW50cmllc10pIHtcbiAgICBpZiAob3B0UmVmLnR5cGUgPT09IFwicmVmT3B0aW9uYWxmZWF0dXJlXCIpIHtcbiAgICAgIGNvbnN0IFtvcHROYW1lLCBvcHRTcmNdID0gb3B0UmVmLm9wdGlvbmFsZmVhdHVyZS5zcGxpdChcInxcIik7XG4gICAgICBjb25zdCBmZWF0RGVmID0gb3B0aW9uYWxGZWF0dXJlcy5maW5kKFxuICAgICAgICBmID0+IGYubmFtZSA9PT0gb3B0TmFtZSAmJiAoIW9wdFNyYyB8fCBmLnNvdXJjZSA9PT0gb3B0U3JjKVxuICAgICAgKTtcblxuICAgICAgaWYgKGZlYXREZWYpIHtcbiAgICAgICAgLy8gbG9vcCB0aHJvdWdoIGVhY2ggbGluZSBpbiB0aGUgZmVhdHVyZVx1MjAxOXMgZW50cmllc1tdXG4gICAgICAgIGZlYXREZWYuZW50cmllcy5mb3JFYWNoKChzdWJFbnRyeTogYW55LCBpZHg6IGFueSkgPT4ge1xuICAgICAgICAgIC8vIHJlbmRlciB0ZXh0XG4gICAgICAgICAgY29uc3QgdGV4dCA9IHR5cGVvZiBzdWJFbnRyeSA9PT0gXCJzdHJpbmdcIlxuICAgICAgICAgICAgPyByZXBsYWNlNWVUYWdzKHN1YkVudHJ5KVxuICAgICAgICAgICAgOiBmb3JtYXRFbnRyeShzdWJFbnRyeSk7XG5cbiAgICAgICAgICBpZiAoaWR4ID09PSAwKSB7XG4gICAgICAgICAgICAvLyBmaXJzdCBsaW5lOiBib2xkZWQgbmFtZSArIGRlc2NyaXB0aW9uXG4gICAgICAgICAgICBsaW5lcy5wdXNoKGAtICoqJHtmZWF0RGVmLm5hbWV9OioqICR7dGV4dH1gKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gc3Vic2VxdWVudCBsaW5lczogbmVzdGVkIGJ1bGxldFxuICAgICAgICAgICAgbGluZXMucHVzaChgICAtICR7dGV4dH1gKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICBsaW5lcy5wdXNoKFwiXCIpOyAvLyBibGFuayBsaW5lIGFmdGVyIGVhY2ggZmVhdHVyZSBibG9ja1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gZmFsbGJhY2sgaWYgbm90IGZvdW5kXG4gICAgICAgIGxpbmVzLnB1c2goYCoqJHtvcHROYW1lfToqKmApO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICAvLyBub25cdTIwMTByZWZPcHRpb25hbGZlYXR1cmUgZmFsbGJhY2tcbiAgICAgIGNvbnN0IHR4dCA9IGZvcm1hdEVudHJ5KG9wdFJlZik7XG4gICAgICBpZiAodHh0KSBsaW5lcy5wdXNoKGAtICR7dHh0fWApO1xuICAgIH1cbiAgfVxuXG4gIGNvbnRpbnVlO1xufVxuXG5cbiAgICAgIC8vIDMpIFN0YW5kYWxvbmUgcmVmT3B0aW9uYWxmZWF0dXJlXG4gICAgICBpZiAoaXNUeXBlZEVudHJ5KGVudCkgJiYgZW50LnR5cGUgPT09IFwicmVmT3B0aW9uYWxmZWF0dXJlXCIpIHtcbiAgICAgICAgY29uc3QgW25hbWVdID0gZW50Lm9wdGlvbmFsZmVhdHVyZS5zcGxpdChcInxcIik7XG4gICAgICAgIGxpbmVzLnB1c2goYC0gW1ske25hbWV9fCR7bmFtZX1dXWApO1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgLy8gNCkgTmVzdGVkIFx1MjAxQ2VudHJpZXNcdTIwMUQgYmxvY2sgd2l0aCBpdHMgb3duIGhlYWRpbmdcbiAgICAgIGlmIChpc1R5cGVkRW50cnkoZW50KSAmJiBlbnQudHlwZSA9PT0gXCJlbnRyaWVzXCIgJiYgZW50Lm5hbWUpIHtcbiAgICAgICAgbGluZXMucHVzaChgIyMjIyMgJHtlbnQubmFtZX1gKTtcbiAgICAgICAgY29uc3QgaW5uZXIgPSBBcnJheS5pc0FycmF5KGVudC5lbnRyaWVzKSA/IGVudC5lbnRyaWVzIDogW2VudC5lbnRyaWVzXTtcbiAgICAgICAgZm9yIChjb25zdCBlMiBvZiBpbm5lcikge1xuICAgICAgICAgIGxpbmVzLnB1c2goZm9ybWF0RW50cnkoZTIpKTtcbiAgICAgICAgfVxuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgLy8gNSkgRmFsbGJhY2sgZm9yIGFueSBvdGhlciBvYmplY3Qgc2hhcGVcbiAgICAgIGNvbnN0IGZhbGxiYWNrID0gZm9ybWF0RW50cnkoZW50KTtcbiAgICAgIGlmIChmYWxsYmFjaykgbGluZXMucHVzaChmYWxsYmFjayk7XG4gICAgfVxuXG4gICAgLy8gQmxhbmsgbGluZSBhZnRlciBlYWNoIGZlYXR1cmVcbiAgICBsaW5lcy5wdXNoKGBgKTtcbiAgfSBcblxuICAvLyBEaXZpZGVyIGJldHdlZW4gbGV2ZWxzXG4gIGxpbmVzLnB1c2goYC0tLWApO1xufVxuXG5cblxuICAvLyBzdGl0Y2gsIHJlcGxhY2UgdGFncywgcmV0dXJuXG4gIGxldCBjb250ZW50ID0gYC0tLVxcbiR7eWFtbH1cXG4tLS1cXG5cXG4ke2xpbmVzLmpvaW4oXCJcXG5cIil9YDtcbiAgLy8gY29tbWVudCB0aGlzIG91dCB3aGlsZSBkZWJ1Z2dpbmc6XG4gIGNvbnRlbnQgPSByZXBsYWNlNWVUYWdzKGNvbnRlbnQpO1xuXG4gIGNvbnRlbnQgPSBjb250ZW50XG4gIC5yZXBsYWNlKC9cXG57Myx9L2csICdcXG5cXG4nKSAgIC8vIG5vIG1vcmUgdGhhbiAyIG5ld2xpbmVzIGluIGEgcm93XG4gIC5yZXBsYWNlKC9cXG4gK1xcbi9nLCAnXFxuXFxuJyk7ICAvLyB0cmltIGJsYW5rIGxpbmVzIHdpdGggdHJhaWxpbmcgc3BhY2VzXG5cbiAgcmV0dXJuIFtcbiAgICB7XG4gICAgICBwYXRoOiBgQ2xhc3Nlcy8ke2NsYXNzTmFtZX0vJHtjbGFzc05hbWV9Lm1kYCxcbiAgICAgIGNvbnRlbnQsXG4gICAgfSxcbiAgICAuLi5zdWJjbGFzc0ZpbGVzLFxuICBdO1xuICBcbn1cbiIsICIvLzVlIDIwMjUgcnVsZXNcblxuaW1wb3J0IHR5cGUgeyBQYXJzZWRNYXJrZG93bkZpbGUgfSBmcm9tIFwiLi4vLi4vdHlwZXNcIjtcbmltcG9ydCB7IHJlcGxhY2U1ZVRhZ3MgfSBmcm9tIFwiLi9oZWxwZXJzL3RhZ1JlcGxhY2VyXCI7XG5cbi8qKlxuICogUGFyc2UgYWN0aW9ucy5qc29uIGludG8gYSBzaW5nbGUgTWFya2Rvd24gbm90ZSB3aXRoICMjIGhlYWRlcnMgZm9yIGVhY2ggYWN0aW9uLFxuICogaGFuZGxpbmcgbmVzdGVkIGVudHJpZXMsIGluc2V0cywgbGlzdHMsIHRhYmxlcywgYW5kIGFkZGluZyBzZXBhcmF0b3JzLlxuICovXG5leHBvcnQgZnVuY3Rpb24gcGFyc2VBY3Rpb25zRmlsZShqc29uOiBhbnksIGVkaXRpb25JZDogc3RyaW5nKTogUGFyc2VkTWFya2Rvd25GaWxlW10ge1xuICBpZiAoIUFycmF5LmlzQXJyYXkoanNvbi5hY3Rpb24pKSByZXR1cm4gW107XG5cbiAgY29uc3QgbGluZXM6IHN0cmluZ1tdID0gW107XG5cbiAgLyoqIFJlY3Vyc2l2ZWx5IGVtaXQgYW55IGJsb2NrOiB0ZXh0LCBsaXN0LCB0YWJsZSwgZW50cmllcy9pbnNldCwgb3IgZmFsbGJhY2sgKi9cbiAgZnVuY3Rpb24gZW1pdEJsb2NrKGJsb2NrOiBhbnkpIHtcbiAgICBpZiAoIWJsb2NrKSByZXR1cm47XG5cbiAgICAvLyAxKSBQbGFpbiB0ZXh0IHBhcmFncmFwaHNcbiAgICBpZiAodHlwZW9mIGJsb2NrID09PSBcInN0cmluZ1wiKSB7XG4gICAgICBmb3IgKGNvbnN0IHBhcmEgb2YgYmxvY2suc3BsaXQoL1xcbnsyLH0vKSkge1xuICAgICAgICBjb25zdCB0ID0gcGFyYS50cmltKCk7XG4gICAgICAgIGlmICh0KSB7XG4gICAgICAgICAgbGluZXMucHVzaChyZXBsYWNlNWVUYWdzKHQpKTtcbiAgICAgICAgICBsaW5lcy5wdXNoKFwiXCIpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gMikgQnVsbGV0IGxpc3RcbiAgICBpZiAoYmxvY2sudHlwZSA9PT0gXCJsaXN0XCIgJiYgQXJyYXkuaXNBcnJheShibG9jay5pdGVtcykpIHtcbiAgICAgIGZvciAoY29uc3QgaXRlbSBvZiBibG9jay5pdGVtcykge1xuICAgICAgICBsaW5lcy5wdXNoKGAtICR7cmVwbGFjZTVlVGFncyhpdGVtKX1gKTtcbiAgICAgIH1cbiAgICAgIGxpbmVzLnB1c2goXCJcIik7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gMykgVGFibGVcbiAgICBpZiAoYmxvY2sudHlwZSA9PT0gXCJ0YWJsZVwiICYmIEFycmF5LmlzQXJyYXkoYmxvY2sucm93cykpIHtcbiAgICAgIGNvbnN0IGhlYWRlcnMgPSBibG9jay5jb2xMYWJlbHMgfHwgW107XG4gICAgICBsaW5lcy5wdXNoKGB8ICR7aGVhZGVycy5qb2luKFwiIHwgXCIpfSB8YCk7XG4gICAgICBsaW5lcy5wdXNoKGB8ICR7aGVhZGVycy5tYXAoKCkgPT4gXCItLS1cIikuam9pbihcIiB8IFwiKX0gfGApO1xuICAgICAgZm9yIChjb25zdCByb3cgb2YgYmxvY2sucm93cykge1xuICAgICAgICBsaW5lcy5wdXNoKGB8ICR7cm93LmpvaW4oXCIgfCBcIil9IHxgKTtcbiAgICAgIH1cbiAgICAgIGxpbmVzLnB1c2goXCJcIik7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gNCkgTmVzdGVkIGVudHJpZXMvaW5zZXRcbiAgICBpZiAoKGJsb2NrLnR5cGUgPT09IFwiZW50cmllc1wiIHx8IGJsb2NrLnR5cGUgPT09IFwiaW5zZXRcIikgJiYgQXJyYXkuaXNBcnJheShibG9jay5lbnRyaWVzKSkge1xuICAgICAgaWYgKGJsb2NrLm5hbWUpIHtcbiAgICAgICAgaWYgKGxpbmVzW2xpbmVzLmxlbmd0aCAtIDFdID09PSBcIlwiKSBsaW5lcy5wb3AoKTtcbiAgICAgICAgbGluZXMucHVzaChgIyMjICR7YmxvY2submFtZX1gKTtcbiAgICAgIH1cbiAgICAgIGZvciAoY29uc3QgY2hpbGQgb2YgYmxvY2suZW50cmllcykge1xuICAgICAgICBlbWl0QmxvY2soY2hpbGQpO1xuICAgICAgfVxuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIDUpIEZhbGxiYWNrIGZvciBhbnkgb3RoZXIgb2JqZWN0IG9yIGFycmF5XG4gICAgY29uc3QgdHh0ID0gQXJyYXkuaXNBcnJheShibG9jaylcbiAgICAgID8gYmxvY2suam9pbihcIiBcIilcbiAgICAgIDogdHlwZW9mIGJsb2NrID09PSBcIm9iamVjdFwiXG4gICAgICA/IEpTT04uc3RyaW5naWZ5KGJsb2NrKVxuICAgICAgOiBTdHJpbmcoYmxvY2spO1xuICAgIGxpbmVzLnB1c2gocmVwbGFjZTVlVGFncyh0eHQpKTtcbiAgICBsaW5lcy5wdXNoKFwiXCIpO1xuICB9XG5cbiAgLy8gTG9vcCB0aHJvdWdoIGVhY2ggYWN0aW9uXG4gIGZvciAoY29uc3QgYWN0aW9uIG9mIGpzb24uYWN0aW9uKSB7XG4gICAgbGluZXMucHVzaChgIyMgJHthY3Rpb24ubmFtZX1gKTtcbiAgICBmb3IgKGNvbnN0IGVudHJ5IG9mIEFycmF5LmlzQXJyYXkoYWN0aW9uLmVudHJpZXMpID8gYWN0aW9uLmVudHJpZXMgOiBbYWN0aW9uLmVudHJpZXNdKSB7XG4gICAgICBlbWl0QmxvY2soZW50cnkpO1xuICAgIH1cblxuICAgIC8vIFx1MjAxQ1NlZSBBbHNvXHUyMDFEIHNlY3Rpb25cbiAgICBpZiAoQXJyYXkuaXNBcnJheShhY3Rpb24uc2VlQWxzb0FjdGlvbikpIHtcbiAgICAgIGxpbmVzLnB1c2goXCIqKlNlZSBBbHNvOioqXCIpO1xuICAgICAgbGluZXMucHVzaChcIlwiKTtcbiAgICAgIGZvciAoY29uc3QgcmVmIG9mIGFjdGlvbi5zZWVBbHNvQWN0aW9uKSB7XG4gICAgICAgIGNvbnN0IFtuYW1lXSA9IFN0cmluZyhyZWYpLnNwbGl0KFwifFwiKTtcbiAgICAgICAgbGluZXMucHVzaChgLSBbWyR7bmFtZX1dXWApO1xuICAgICAgfVxuICAgICAgbGluZXMucHVzaChcIlwiKTtcbiAgICB9XG5cbiAgICAvLyBTZXBhcmF0b3JcbiAgICBsaW5lcy5wdXNoKFwiLS0tXCIpO1xuICB9XG5cbiAgLy8gUmVtb3ZlIGFueSBkb3VibGUtYmxhbmsgbGluZXNcbiAgY29uc3QgY2xlYW5lZCA9IGxpbmVzLnJlZHVjZTxzdHJpbmdbXT4oKGFjYywgY3VycikgPT4ge1xuICAgIGlmIChjdXJyID09PSBcIlwiICYmIGFjYy5sZW5ndGggJiYgYWNjW2FjYy5sZW5ndGggLSAxXSA9PT0gXCJcIikgcmV0dXJuIGFjYztcbiAgICByZXR1cm4gYWNjLmNvbmNhdChjdXJyKTtcbiAgfSwgW10pO1xuXG4gIHJldHVybiBbXG4gICAge1xuICAgICAgcGF0aDogXCJSdWxlcyBhbmQgUmVmZXJlbmNlL0FjdGlvbnMubWRcIixcbiAgICAgIGNvbnRlbnQ6IGNsZWFuZWQuam9pbihcIlxcblwiKS50cmltKCkgKyBcIlxcblwiLFxuICAgIH0sXG4gIF07XG59XG5cbi8qKlxuICogUGFyc2UgY29tYmluZWQgY29uZGl0aW9uc2Rpc2Vhc2VzLmpzb24gaW50byB0d28gTWFya2Rvd24gbm90ZXM6IENvbmRpdGlvbnMubWQgYW5kIERpc2Vhc2VzLm1kXG4gKiBhZGRpbmcgc2VwYXJhdG9ycyBiZXR3ZWVuIGVudHJpZXMuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBwYXJzZUNvbmRpdGlvbnNEaXNlYXNlc0ZpbGUoanNvbjogYW55LCBlZGl0aW9uSWQ6IHN0cmluZyk6IFBhcnNlZE1hcmtkb3duRmlsZVtdIHtcbiAgY29uc3Qgb3V0cHV0czogUGFyc2VkTWFya2Rvd25GaWxlW10gPSBbXTtcblxuICBjb25zdCBwcm9jZXNzSXRlbXMgPSAoaXRlbXM6IGFueVtdLCBvdXRQYXRoOiBzdHJpbmcpID0+IHtcbiAgICBjb25zdCBsaW5lczogc3RyaW5nW10gPSBbXTtcblxuICAgIGZvciAoY29uc3QgaXRlbSBvZiBpdGVtcykge1xuICAgICAgLy8gVG9wXHUyMDEwbGV2ZWwgaGVhZGVyIGZvciBlYWNoIGNvbmRpdGlvbi9kaXNlYXNlXG4gICAgICBsaW5lcy5wdXNoKGAjIyAke2l0ZW0ubmFtZX1gKTtcblxuICAgICAgY29uc3QgZW50cmllcyA9IEFycmF5LmlzQXJyYXkoaXRlbS5lbnRyaWVzKSA/IGl0ZW0uZW50cmllcyA6IFtpdGVtLmVudHJpZXNdO1xuICAgICAgZm9yIChjb25zdCBlbnRyeSBvZiBlbnRyaWVzKSB7XG4gICAgICAgIGlmICghZW50cnkpIGNvbnRpbnVlO1xuXG4gICAgICAgIC8vIDEpIFBsYWluIHRleHQgcGFyYWdyYXBoc1xuICAgICAgICBpZiAodHlwZW9mIGVudHJ5ID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgZm9yIChjb25zdCBwYXJhIG9mIGVudHJ5LnNwbGl0KC9cXG57Mix9LykpIHtcbiAgICAgICAgICAgIGNvbnN0IHQgPSBwYXJhLnRyaW0oKTtcbiAgICAgICAgICAgIGlmICh0KSB7XG4gICAgICAgICAgICAgIGxpbmVzLnB1c2gocmVwbGFjZTVlVGFncyh0KSk7XG4gICAgICAgICAgICAgIGxpbmVzLnB1c2goXCJcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vIDIpIEJ1bGxldCBsaXN0c1xuICAgICAgICBlbHNlIGlmIChlbnRyeS50eXBlID09PSBcImxpc3RcIiAmJiBBcnJheS5pc0FycmF5KGVudHJ5Lml0ZW1zKSkge1xuICAgICAgICAgIGZvciAoY29uc3QgdHh0IG9mIGVudHJ5Lml0ZW1zKSB7XG4gICAgICAgICAgICBsaW5lcy5wdXNoKGAtICR7cmVwbGFjZTVlVGFncyh0eHQpfWApO1xuICAgICAgICAgIH1cbiAgICAgICAgICBsaW5lcy5wdXNoKFwiXCIpO1xuICAgICAgICB9XG4gICAgICAgIC8vIDMpIFRhYmxlc1xuICAgICAgICBlbHNlIGlmIChlbnRyeS50eXBlID09PSBcInRhYmxlXCIgJiYgQXJyYXkuaXNBcnJheShlbnRyeS5yb3dzKSkge1xuICAgICAgICAgIGNvbnN0IGhlYWRlcnMgPSBlbnRyeS5jb2xMYWJlbHMgfHwgW107XG4gICAgICAgICAgbGluZXMucHVzaChgfCAke2hlYWRlcnMuam9pbihcIiB8IFwiKX0gfGApO1xuICAgICAgICAgIGxpbmVzLnB1c2goYHwgJHtoZWFkZXJzLm1hcCgoKSA9PiBcIi0tLVwiKS5qb2luKFwiIHwgXCIpfSB8YCk7XG4gICAgICAgICAgZm9yIChjb25zdCByb3cgb2YgZW50cnkucm93cykge1xuICAgICAgICAgICAgbGluZXMucHVzaChgfCAke3Jvdy5qb2luKFwiIHwgXCIpfSB8YCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGxpbmVzLnB1c2goXCJcIik7XG4gICAgICAgIH1cbiAgICAgICAgLy8gNCkgTmVzdGVkIFwiZW50cmllc1wiIGJsb2Nrc1xuICAgICAgICBlbHNlIGlmIChlbnRyeS50eXBlID09PSBcImVudHJpZXNcIiAmJiBBcnJheS5pc0FycmF5KGVudHJ5LmVudHJpZXMpKSB7XG4gICAgICAgICAgLy8gSWYgdGhpcyBibG9jayBoYXMgaXRzIG93biBuYW1lLCBlbWl0IGl0XG4gICAgICAgICAgaWYgKGVudHJ5Lm5hbWUpIHtcbiAgICAgICAgICAgIGxpbmVzLnB1c2goYCMjIyAke2VudHJ5Lm5hbWV9YCk7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IHN1YiBvZiBlbnRyeS5lbnRyaWVzKSB7XG4gICAgICAgICAgICAgIC8vIE5hbWVkIHN1Ylx1MjAxMGJsb2NrIChlLmcuIFwiQ2FuJ3QgU2VlXCIpXG4gICAgICAgICAgICAgIGlmIChzdWIudHlwZSA9PT0gXCJlbnRyaWVzXCIgJiYgc3ViLm5hbWUgJiYgQXJyYXkuaXNBcnJheShzdWIuZW50cmllcykpIHtcbiAgICAgICAgICAgICAgICBpZiAobGluZXNbbGluZXMubGVuZ3RoIC0gMV0gPT09IFwiXCIpIGxpbmVzLnBvcCgpO1xuICAgICAgICAgICAgICAgIGxpbmVzLnB1c2goYCMjIyMgJHtzdWIubmFtZX1gKTtcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IHR4dEVudHJ5IG9mIHN1Yi5lbnRyaWVzKSB7XG4gICAgICAgICAgICAgICAgICBjb25zdCB0ZXh0ID0gdHlwZW9mIHR4dEVudHJ5ID09PSBcInN0cmluZ1wiXG4gICAgICAgICAgICAgICAgICAgID8gcmVwbGFjZTVlVGFncyh0eHRFbnRyeSlcbiAgICAgICAgICAgICAgICAgICAgOiByZXBsYWNlNWVUYWdzKFN0cmluZyh0eHRFbnRyeSkpO1xuICAgICAgICAgICAgICAgICAgbGluZXMucHVzaCh0ZXh0KTtcbiAgICAgICAgICAgICAgICAgIGxpbmVzLnB1c2goXCJcIik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIC8vIFBsYWluXHUyMDEwdGV4dCBzdWJcdTIwMTBlbnRyeVxuICAgICAgICAgICAgICBlbHNlIGlmICh0eXBlb2Ygc3ViID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICAgICAgbGluZXMucHVzaChyZXBsYWNlNWVUYWdzKHN1YikpO1xuICAgICAgICAgICAgICAgIGxpbmVzLnB1c2goXCJcIik7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gVW5uYW1lZCB3cmFwcGVyOiBqdXN0IGZsYXR0ZW4gaXRzIGNoaWxkcmVuXG4gICAgICAgICAgICBmb3IgKGNvbnN0IHN1YiBvZiBlbnRyeS5lbnRyaWVzKSB7XG4gICAgICAgICAgICAgIGlmIChzdWIudHlwZSA9PT0gXCJlbnRyaWVzXCIgJiYgc3ViLm5hbWUgJiYgQXJyYXkuaXNBcnJheShzdWIuZW50cmllcykpIHtcbiAgICAgICAgICAgICAgICBpZiAobGluZXNbbGluZXMubGVuZ3RoIC0gMV0gPT09IFwiXCIpIGxpbmVzLnBvcCgpO1xuICAgICAgICAgICAgICAgIGxpbmVzLnB1c2goYCMjIyAke3N1Yi5uYW1lfWApO1xuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgdHh0RW50cnkgb2Ygc3ViLmVudHJpZXMpIHtcbiAgICAgICAgICAgICAgICAgIGNvbnN0IHRleHQgPSB0eXBlb2YgdHh0RW50cnkgPT09IFwic3RyaW5nXCJcbiAgICAgICAgICAgICAgICAgICAgPyByZXBsYWNlNWVUYWdzKHR4dEVudHJ5KVxuICAgICAgICAgICAgICAgICAgICA6IHJlcGxhY2U1ZVRhZ3MoU3RyaW5nKHR4dEVudHJ5KSk7XG4gICAgICAgICAgICAgICAgICBsaW5lcy5wdXNoKHRleHQpO1xuICAgICAgICAgICAgICAgICAgbGluZXMucHVzaChcIlwiKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIHN1YiA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgICAgIGxpbmVzLnB1c2gocmVwbGFjZTVlVGFncyhzdWIpKTtcbiAgICAgICAgICAgICAgICBsaW5lcy5wdXNoKFwiXCIpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vIDUpIEFueXRoaW5nIGVsc2UgKGZhbGxiYWNrKVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICBjb25zdCB0eHQgPSBBcnJheS5pc0FycmF5KGVudHJ5KVxuICAgICAgICAgICAgPyBlbnRyeS5qb2luKFwiIFwiKVxuICAgICAgICAgICAgOiB0eXBlb2YgZW50cnkgPT09IFwib2JqZWN0XCJcbiAgICAgICAgICAgICAgPyBKU09OLnN0cmluZ2lmeShlbnRyeSlcbiAgICAgICAgICAgICAgOiBTdHJpbmcoZW50cnkpO1xuICAgICAgICAgIGxpbmVzLnB1c2gocmVwbGFjZTVlVGFncyh0eHQpKTtcbiAgICAgICAgICBsaW5lcy5wdXNoKFwiXCIpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIFNlcGFyYXRvciBiZXR3ZWVuIGVudHJpZXNcbiAgICAgIGxpbmVzLnB1c2goXCItLS1cIik7XG4gICAgfVxuXG4gICAgLy8gQ2xlYW4gdXAgYW55IGRvdWJsZVx1MjAxMGJsYW5rIGxpbmVzXG4gICAgY29uc3QgY2xlYW5lZCA9IGxpbmVzLnJlZHVjZTxzdHJpbmdbXT4oKGFjYywgY3VycikgPT4ge1xuICAgICAgaWYgKGN1cnIgPT09IFwiXCIgJiYgYWNjLmxlbmd0aCAmJiBhY2NbYWNjLmxlbmd0aCAtIDFdID09PSBcIlwiKSByZXR1cm4gYWNjO1xuICAgICAgcmV0dXJuIGFjYy5jb25jYXQoY3Vycik7XG4gICAgfSwgW10pO1xuXG4gICAgb3V0cHV0cy5wdXNoKHtcbiAgICAgIHBhdGg6IG91dFBhdGgsXG4gICAgICBjb250ZW50OiBjbGVhbmVkLmpvaW4oXCJcXG5cIikudHJpbSgpICsgXCJcXG5cIixcbiAgICB9KTtcbiAgfTtcblxuICBwcm9jZXNzSXRlbXMoanNvbi5jb25kaXRpb24gfHwgW10sICAgXCJSdWxlcyBhbmQgUmVmZXJlbmNlL0NvbmRpdGlvbnMubWRcIik7XG4gIHByb2Nlc3NJdGVtcyhqc29uLmRpc2Vhc2UgICB8fCBbXSwgICBcIlJ1bGVzIGFuZCBSZWZlcmVuY2UvRGlzZWFzZXMubWRcIik7XG4gIHJldHVybiBvdXRwdXRzO1xufVxuXG4vKipcbiAqIFBhcnNlIHNlbnNlcy5qc29uIGludG8gYSBzaW5nbGUgTWFya2Rvd24gbm90ZSB3aXRoICMjIGhlYWRlcnMgZm9yIGVhY2ggc2Vuc2UsXG4gKiBoYW5kbGluZyBsaXN0cywgdGFibGVzLCBuZXN0ZWQgZW50cmllcy9pbnNldHMsIGFuZCBzZXBhcmF0b3JzLlxuICovXG5leHBvcnQgZnVuY3Rpb24gcGFyc2VTZW5zZXNGaWxlKGpzb246IGFueSwgZWRpdGlvbklkOiBzdHJpbmcpOiBQYXJzZWRNYXJrZG93bkZpbGVbXSB7XG4gIGNvbnN0IGl0ZW1zID0gQXJyYXkuaXNBcnJheShqc29uLnNlbnNlKVxuICAgID8ganNvbi5zZW5zZVxuICAgIDogQXJyYXkuaXNBcnJheShqc29uLnNlbnNlcylcbiAgICA/IGpzb24uc2Vuc2VzXG4gICAgOiBbXTtcbiAgaWYgKCFpdGVtcy5sZW5ndGgpIHJldHVybiBbXTtcblxuICBjb25zdCBsaW5lczogc3RyaW5nW10gPSBbXTtcblxuICBmdW5jdGlvbiBlbWl0QmxvY2soYmxvY2s6IGFueSkge1xuICAgIGlmICghYmxvY2spIHJldHVybjtcblxuICAgIC8vIDEpIFBsYWluXHUyMDEwdGV4dCBwYXJhZ3JhcGgocylcbiAgICBpZiAodHlwZW9mIGJsb2NrID09PSBcInN0cmluZ1wiKSB7XG4gICAgICBmb3IgKGNvbnN0IHBhcmEgb2YgYmxvY2suc3BsaXQoL1xcbnsyLH0vKSkge1xuICAgICAgICBjb25zdCB0ID0gcGFyYS50cmltKCk7XG4gICAgICAgIGlmICh0KSB7XG4gICAgICAgICAgbGluZXMucHVzaChyZXBsYWNlNWVUYWdzKHQpKTtcbiAgICAgICAgICBsaW5lcy5wdXNoKFwiXCIpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gMikgQnVsbGV0IGxpc3QgKGhhbmRsZXMgYm90aCBzdHJpbmcgaXRlbXMgYW5kIG9iamVjdCBpdGVtcylcbiAgICBpZiAoYmxvY2sudHlwZSA9PT0gXCJsaXN0XCIgJiYgQXJyYXkuaXNBcnJheShibG9jay5pdGVtcykpIHtcbiAgICAgIGZvciAoY29uc3QgaXRlbSBvZiBibG9jay5pdGVtcykge1xuICAgICAgICBpZiAodHlwZW9mIGl0ZW0gPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICBsaW5lcy5wdXNoKGAtICR7cmVwbGFjZTVlVGFncyhpdGVtKX1gKTtcbiAgICAgICAgICBsaW5lcy5wdXNoKFwiXCIpO1xuICAgICAgICB9IGVsc2UgaWYgKGl0ZW0gJiYgdHlwZW9mIGl0ZW0gPT09IFwib2JqZWN0XCIpIHtcbiAgICAgICAgICAvLyBvYmplY3QgaXRlbXMgd2l0aCBuYW1lK2VudHJpZXNcbiAgICAgICAgICBpZiAoaXRlbS5uYW1lICYmIEFycmF5LmlzQXJyYXkoaXRlbS5lbnRyaWVzKSkge1xuICAgICAgICAgICAgbGluZXMucHVzaChgLSAqKiR7aXRlbS5uYW1lfSoqYCk7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGVudCBvZiBpdGVtLmVudHJpZXMpIHtcbiAgICAgICAgICAgICAgbGluZXMucHVzaChgICAtICR7cmVwbGFjZTVlVGFncyhlbnQpfWApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbGluZXMucHVzaChcIlwiKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gZmFsbGJhY2s6IHN0cmluZ2lmeVxuICAgICAgICAgICAgbGluZXMucHVzaChgLSAke3JlcGxhY2U1ZVRhZ3MoSlNPTi5zdHJpbmdpZnkoaXRlbSkpfWApO1xuICAgICAgICAgICAgbGluZXMucHVzaChcIlwiKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyAzKSBUYWJsZVxuICAgIGlmIChibG9jay50eXBlID09PSBcInRhYmxlXCIgJiYgQXJyYXkuaXNBcnJheShibG9jay5yb3dzKSkge1xuICAgICAgY29uc3QgaGVhZGVycyA9IGJsb2NrLmNvbExhYmVscyB8fCBbXTtcbiAgICAgIGxpbmVzLnB1c2goYHwgJHtoZWFkZXJzLmpvaW4oXCIgfCBcIil9IHxgKTtcbiAgICAgIGxpbmVzLnB1c2goYHwgJHtoZWFkZXJzLm1hcCgoKSA9PiBcIi0tLVwiKS5qb2luKFwiIHwgXCIpfSB8YCk7XG4gICAgICBmb3IgKGNvbnN0IHJvdyBvZiBibG9jay5yb3dzKSB7XG4gICAgICAgIGxpbmVzLnB1c2goYHwgJHtyb3cuam9pbihcIiB8IFwiKX0gfGApO1xuICAgICAgfVxuICAgICAgbGluZXMucHVzaChcIlwiKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyA0KSBOZXN0ZWQgZW50cmllcyAvIGluc2V0c1xuICAgIGlmICgoYmxvY2sudHlwZSA9PT0gXCJlbnRyaWVzXCIgfHwgYmxvY2sudHlwZSA9PT0gXCJpbnNldFwiKSAmJiBBcnJheS5pc0FycmF5KGJsb2NrLmVudHJpZXMpKSB7XG4gICAgICAvLyBuYW1lZCBibG9jayBcdTIxOTIgXCIjIyMgTmFtZVwiXG4gICAgICBpZiAoYmxvY2submFtZSkge1xuICAgICAgICBpZiAobGluZXNbbGluZXMubGVuZ3RoIC0gMV0gPT09IFwiXCIpIGxpbmVzLnBvcCgpO1xuICAgICAgICBsaW5lcy5wdXNoKGAjIyMgJHtibG9jay5uYW1lfWApO1xuICAgICAgfVxuICAgICAgLy8gcmVjdXJzZSBpbnRvIGNoaWxkcmVuXG4gICAgICBmb3IgKGNvbnN0IGNoaWxkIG9mIGJsb2NrLmVudHJpZXMpIHtcbiAgICAgICAgZW1pdEJsb2NrKGNoaWxkKTtcbiAgICAgIH1cbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyA1KSBGYWxsYmFjayBmb3IgYXJyYXlzIG9yIG90aGVyIG9iamVjdHNcbiAgICBjb25zdCB0eHQgPVxuICAgICAgQXJyYXkuaXNBcnJheShibG9jaylcbiAgICAgICAgPyBibG9jay5qb2luKFwiIFwiKVxuICAgICAgICA6IHR5cGVvZiBibG9jayA9PT0gXCJvYmplY3RcIlxuICAgICAgICA/IEpTT04uc3RyaW5naWZ5KGJsb2NrKVxuICAgICAgICA6IFN0cmluZyhibG9jayk7XG4gICAgbGluZXMucHVzaChyZXBsYWNlNWVUYWdzKHR4dCkpO1xuICAgIGxpbmVzLnB1c2goXCJcIik7XG4gIH1cblxuICAvLyBCdWlsZCBvdXQgZWFjaCBzZW5zZVxuICBmb3IgKGNvbnN0IHNlbnNlIG9mIGl0ZW1zKSB7XG4gICAgbGluZXMucHVzaChgIyMgJHtzZW5zZS5uYW1lfWApO1xuICAgIGZvciAoY29uc3QgZW50cnkgb2YgQXJyYXkuaXNBcnJheShzZW5zZS5lbnRyaWVzKSA/IHNlbnNlLmVudHJpZXMgOiBbc2Vuc2UuZW50cmllc10pIHtcbiAgICAgIGVtaXRCbG9jayhlbnRyeSk7XG4gICAgfVxuICAgIGxpbmVzLnB1c2goXCItLS1cIik7XG4gIH1cblxuICAvLyBSZW1vdmUgYW55IGRvdWJsZVx1MjAxMGJsYW5rIGxpbmVzXG4gIGNvbnN0IGNsZWFuZWQgPSBsaW5lcy5yZWR1Y2U8c3RyaW5nW10+KChhY2MsIGN1cnIpID0+IHtcbiAgICBpZiAoY3VyciA9PT0gXCJcIiAmJiBhY2MubGVuZ3RoICYmIGFjY1thY2MubGVuZ3RoIC0gMV0gPT09IFwiXCIpIHJldHVybiBhY2M7XG4gICAgcmV0dXJuIGFjYy5jb25jYXQoY3Vycik7XG4gIH0sIFtdKTtcblxuICByZXR1cm4gW1xuICAgIHtcbiAgICAgIHBhdGg6IFwiUnVsZXMgYW5kIFJlZmVyZW5jZS9TZW5zZXMubWRcIixcbiAgICAgIGNvbnRlbnQ6IGNsZWFuZWQuam9pbihcIlxcblwiKS50cmltKCkgKyBcIlxcblwiLFxuICAgIH0sXG4gIF07XG59XG5cbi8qKlxuICogUGFyc2Ugc2tpbGxzLmpzb24gaW50byBhIHNpbmdsZSBNYXJrZG93biBub3RlIHdpdGggIyMgaGVhZGVycyBmb3IgZWFjaCBza2lsbCxcbiAqIHByZXBlbmRpbmcgYW4gYWJpbGl0eSBsaW5lLCBoYW5kbGluZyBwYXJhZ3JhcGhzLCBhbmQgc2VwYXJhdG9ycy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlU2tpbGxzRmlsZShqc29uOiBhbnksIGVkaXRpb25JZDogc3RyaW5nKTogUGFyc2VkTWFya2Rvd25GaWxlW10ge1xuICBjb25zdCBpdGVtcyA9IEFycmF5LmlzQXJyYXkoanNvbi5za2lsbClcbiAgICA/IGpzb24uc2tpbGxcbiAgICA6IEFycmF5LmlzQXJyYXkoanNvbi5za2lsbHMpXG4gICAgPyBqc29uLnNraWxsc1xuICAgIDogW107XG4gIGlmICghaXRlbXMubGVuZ3RoKSByZXR1cm4gW107XG5cbiAgY29uc3QgbGluZXM6IHN0cmluZ1tdID0gW107XG4gIGZvciAoY29uc3Qgc2tpbGwgb2YgaXRlbXMpIHtcbiAgICBsaW5lcy5wdXNoKGAjIyAke3NraWxsLm5hbWV9YCk7XG4gICAgaWYgKHNraWxsLmFiaWxpdHkpIHtcbiAgICAgIGxpbmVzLnB1c2goYCpBYmlsaXR5OiAke3NraWxsLmFiaWxpdHl9KmApO1xuICAgICAgbGluZXMucHVzaChcIlwiKTtcbiAgICB9XG4gICAgY29uc3QgZW50cmllcyA9IEFycmF5LmlzQXJyYXkoc2tpbGwuZW50cmllcykgPyBza2lsbC5lbnRyaWVzIDogW3NraWxsLmVudHJpZXNdO1xuICAgIGZvciAoY29uc3QgZW50cnkgb2YgZW50cmllcykge1xuICAgICAgaWYgKCFlbnRyeSkgY29udGludWU7XG4gICAgICBpZiAodHlwZW9mIGVudHJ5ID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgIGNvbnN0IHBhcmFzID0gZW50cnkuc3BsaXQoL1xcbnsyLH0vKTtcbiAgICAgICAgZm9yIChjb25zdCBwYXJhIG9mIHBhcmFzKSB7XG4gICAgICAgICAgY29uc3QgdCA9IHBhcmEudHJpbSgpO1xuICAgICAgICAgIGlmICh0KSB7XG4gICAgICAgICAgICBsaW5lcy5wdXNoKHJlcGxhY2U1ZVRhZ3ModCkpO1xuICAgICAgICAgICAgbGluZXMucHVzaChcIlwiKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAoZW50cnkudHlwZSA9PT0gXCJsaXN0XCIgJiYgQXJyYXkuaXNBcnJheShlbnRyeS5pdGVtcykpIHtcbiAgICAgICAgZm9yIChjb25zdCBpdGVtIG9mIGVudHJ5Lml0ZW1zKSB7XG4gICAgICAgICAgbGluZXMucHVzaChgLSAke3JlcGxhY2U1ZVRhZ3MoaXRlbSl9YCk7XG4gICAgICAgIH1cbiAgICAgICAgbGluZXMucHVzaChcIlwiKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnN0IHR4dCA9IEFycmF5LmlzQXJyYXkoZW50cnkpID8gZW50cnkuam9pbihcIiBcIikgOiBTdHJpbmcoZW50cnkpO1xuICAgICAgICBsaW5lcy5wdXNoKHJlcGxhY2U1ZVRhZ3ModHh0KSk7XG4gICAgICAgIGxpbmVzLnB1c2goXCJcIik7XG4gICAgICB9XG4gICAgfVxuICAgIC8vIFNlcGFyYXRvciBiZXR3ZWVuIHNraWxsc1xuICAgIGxpbmVzLnB1c2goXCItLS1cIik7XG4gIH1cbiAgY29uc3QgY2xlYW5lZCA9IGxpbmVzLnJlZHVjZTxzdHJpbmdbXT4oKGFjYywgY3VycikgPT4ge1xuICAgIGlmIChjdXJyID09PSBcIlwiICYmIGFjYy5sZW5ndGggJiYgYWNjW2FjYy5sZW5ndGggLSAxXSA9PT0gXCJcIikgcmV0dXJuIGFjYztcbiAgICByZXR1cm4gYWNjLmNvbmNhdChjdXJyKTtcbiAgfSwgW10pO1xuXG4gIHJldHVybiBbXG4gICAge1xuICAgICAgcGF0aDogXCJSdWxlcyBhbmQgUmVmZXJlbmNlL1NraWxscy5tZFwiLFxuICAgICAgY29udGVudDogY2xlYW5lZC5qb2luKFwiXFxuXCIpLnRyaW0oKSArIFwiXFxuXCIsXG4gICAgfSxcbiAgXTtcbn1cbiIsICJpbXBvcnQgdHlwZSB7IFBhcnNlZE1hcmtkb3duRmlsZSB9IGZyb20gXCIuLi8uLi90eXBlc1wiO1xuaW1wb3J0IHsgcmVwbGFjZTVlVGFncyB9IGZyb20gXCIuL2hlbHBlcnMvdGFnUmVwbGFjZXJcIjtcbmltcG9ydCB7IGJ1aWxkRk0sIHNlcmlhbGl6ZUZyb250bWF0dGVyLCBGRUFUU19NRVRBX0RFRlMgfSBmcm9tIFwiLi9oZWxwZXJzL2Zyb250bWF0dGVyXCI7XG5cbi8qKlxuICogUGFyc2UgZmVhdHMuanNvbiBpbnRvIG9uZSBNYXJrZG93biBmaWxlIHBlciBmZWF0IHVuZGVyIFBsYXllciBCdWlsZC9GZWF0cyxcbiAqIGluY2x1ZGluZyBmcm9udG1hdHRlciwgY2xlYW5lZCBwcmVyZXF1aXNpdGVzLCBhbmQgZm9ybWF0dGVkIGVudHJpZXMuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBwYXJzZUZlYXRzRmlsZShqc29uOiBhbnksIGVkaXRpb25JZDogc3RyaW5nKTogUGFyc2VkTWFya2Rvd25GaWxlW10ge1xuICBjb25zdCBmZWF0czogYW55W10gPSBBcnJheS5pc0FycmF5KGpzb24uZmVhdClcbiAgICA/IGpzb24uZmVhdFxuICAgIDogQXJyYXkuaXNBcnJheShqc29uLmZlYXRzKVxuICAgID8ganNvbi5mZWF0c1xuICAgIDogW107XG5cbiAgcmV0dXJuIGZlYXRzLm1hcCgoZmVhdDogYW55KSA9PiB7XG4gICAgY29uc3QgbGluZXM6IHN0cmluZ1tdID0gW107XG5cbiAgICAvLyBcdTI1MDBcdTI1MDBcdTI1MDAgRnJvbnRtYXR0ZXIgXHUyNTAwXHUyNTAwXHUyNTAwXG4gICAgY29uc3QgZm0gPSBidWlsZEZNKHsgLi4uZmVhdCwgX2VkaXRpb25JZDogZWRpdGlvbklkIH0sIEZFQVRTX01FVEFfREVGUyk7XG4gICAgbGluZXMucHVzaChcIi0tLVwiKTtcbiAgICBsaW5lcy5wdXNoKHNlcmlhbGl6ZUZyb250bWF0dGVyKGZtLCBGRUFUU19NRVRBX0RFRlMpKTtcbiAgICBsaW5lcy5wdXNoKFwiLS0tXCIsIFwiXCIpO1xuXG4gICAgLy8gXHUyNTAwXHUyNTAwXHUyNTAwIFRpdGxlIFx1MjUwMFx1MjUwMFx1MjUwMFxuICAgIGxpbmVzLnB1c2goYCMgJHtmZWF0Lm5hbWV9YCwgXCJcIik7XG5cbiAgICAvLyBcdTI1MDBcdTI1MDBcdTI1MDAgUHJlcmVxdWlzaXRlcyBcdTI1MDBcdTI1MDBcdTI1MDBcbiAgICBjb25zdCBwcmVyZXFzOiBzdHJpbmdbXSA9IFtdO1xuICAgIGlmIChBcnJheS5pc0FycmF5KGZlYXQucHJlcmVxdWlzaXRlKSkge1xuICAgICAgZmVhdC5wcmVyZXF1aXNpdGUuZm9yRWFjaCgocHI6IGFueSkgPT4ge1xuICAgICAgICBpZiAocHIubGV2ZWwpIHByZXJlcXMucHVzaChgTGV2ZWwgJHtwci5sZXZlbH1gKTtcbiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkocHIuZmVhdCkpIHtcbiAgICAgICAgICBwci5mZWF0LmZvckVhY2goKGY6IHN0cmluZykgPT4ge1xuICAgICAgICAgICAgY29uc3QgbmFtZSA9IGYuc3BsaXQoXCJ8XCIpWzBdLnJlcGxhY2UoL1xcYlxcdy9nLCBjID0+IGMudG9VcHBlckNhc2UoKSk7XG4gICAgICAgICAgICBwcmVyZXFzLnB1c2goYFByZXJlcXVpc2l0ZTogW1ske25hbWV9XV1gKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICAgIGlmIChmZWF0LnNwZWxsY2FzdGluZ1ByZXBhcmVkKSBwcmVyZXFzLnB1c2goYFByZXJlcXVpc2l0ZTogU3BlbGxjYXN0ZXJgKTtcbiAgICBpZiAoQXJyYXkuaXNBcnJheShmZWF0LnRvb2xQcm9maWNpZW5jaWVzKSkge1xuICAgICAgZmVhdC50b29sUHJvZmljaWVuY2llcy5mb3JFYWNoKCh0cDogYW55KSA9PiB7XG4gICAgICAgIE9iamVjdC5lbnRyaWVzKHRwKS5mb3JFYWNoKChba2V5XSkgPT4ge1xuICAgICAgICAgIGlmIChrZXkgPT09ICdhbnlBcnRpc2Fuc1Rvb2wnKSB7XG4gICAgICAgICAgICBwcmVyZXFzLnB1c2goYFByZXJlcXVpc2l0ZTogUHJvZmljaWVudCB3aXRoIGFuIGFydGlzYW4ncyB0b29sYCk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHByZXJlcXMucHVzaChgUHJlcmVxdWlzaXRlOiBQcm9maWNpZW50IHdpdGggJHtrZXkucmVwbGFjZSgvKFtBLVpdKS9nLCcgJDEnKS50cmltKCl9YCk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH1cbiAgICBpZiAoQXJyYXkuaXNBcnJheShmZWF0LmFybW9yUHJvZmljaWVuY2llcykpIHtcbiAgICAgIGZlYXQuYXJtb3JQcm9maWNpZW5jaWVzLmZvckVhY2goKGFybTogYW55KSA9PiB7XG4gICAgICAgIGNvbnN0IGFybVN0ciA9IHR5cGVvZiBhcm0gPT09ICdzdHJpbmcnID8gYXJtIDogSlNPTi5zdHJpbmdpZnkoYXJtKTtcbiAgICAgICAgcHJlcmVxcy5wdXNoKGBQcmVyZXF1aXNpdGU6IFByb2ZpY2llbnQgd2l0aCAke2FybVN0ci5yZXBsYWNlKC8oW0EtWl0pL2csJyAkMScpLnRyaW0oKX1gKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgICBpZiAoZmVhdC5yYWNlKSBwcmVyZXFzLnB1c2goYFByZXJlcXVpc2l0ZTogJHtmZWF0LnJhY2V9YCk7XG5cbiAgICBpZiAocHJlcmVxcy5sZW5ndGgpIHtcbiAgICAgIGxpbmVzLnB1c2goXCIqKlByZXJlcXVpc2l0ZXMqKlwiKTtcbiAgICAgIHByZXJlcXMuZm9yRWFjaChwID0+IGxpbmVzLnB1c2goYC0gJHtwfWApKTtcbiAgICAgIGxpbmVzLnB1c2goXCJcIik7XG4gICAgfVxuXG4gICAgLy8gXHUyNTAwXHUyNTAwXHUyNTAwIEVudHJpZXMgcmVuZGVyaW5nIFx1MjUwMFx1MjUwMFx1MjUwMFxuICAgIGNvbnN0IGVudHJpZXMgPSBBcnJheS5pc0FycmF5KGZlYXQuZW50cmllcykgPyBmZWF0LmVudHJpZXMgOiBbZmVhdC5lbnRyaWVzXTtcbiAgICBlbnRyaWVzLmZvckVhY2goKGVudHJ5OiBhbnkpID0+IHtcbiAgICAgIGlmICghZW50cnkpIHJldHVybjtcblxuICAgICAgLy8gUGxhaW4gdGV4dFxuICAgICAgaWYgKHR5cGVvZiBlbnRyeSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgZW50cnkuc3BsaXQoL1xcbnsyLH0vKS5mb3JFYWNoKHAgPT4ge1xuICAgICAgICAgIGNvbnN0IHQgPSBwLnRyaW0oKTtcbiAgICAgICAgICBpZiAodCkge1xuICAgICAgICAgICAgbGluZXMucHVzaChyZXBsYWNlNWVUYWdzKHQpKTtcbiAgICAgICAgICAgIGxpbmVzLnB1c2goXCJcIik7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgLy8gTGlzdFxuICAgICAgfSBlbHNlIGlmIChlbnRyeS50eXBlID09PSAnbGlzdCcgJiYgQXJyYXkuaXNBcnJheShlbnRyeS5pdGVtcykpIHtcbiAgICAgICAgZW50cnkuaXRlbXMuZm9yRWFjaCgoaXQ6IGFueSkgPT4ge1xuICAgICAgICAgIGlmICh0eXBlb2YgaXQgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICBsaW5lcy5wdXNoKGAtICR7cmVwbGFjZTVlVGFncyhpdCl9YCk7XG4gICAgICAgICAgfSBlbHNlIGlmIChpdC50eXBlID09PSAnaXRlbScgJiYgaXQubmFtZSkge1xuICAgICAgICAgICAgbGluZXMucHVzaChgLSAqKiR7aXQubmFtZX0qKmApO1xuICAgICAgICAgICAgY29uc3Qgc3VicyA9IEFycmF5LmlzQXJyYXkoaXQuZW50cmllcykgPyBpdC5lbnRyaWVzIDogW2l0LmVudHJpZXNdO1xuICAgICAgICAgICAgc3Vicy5mb3JFYWNoKChzOiBhbnkpID0+XG4gICAgICAgICAgICAgIGxpbmVzLnB1c2goYCAgLSAke3JlcGxhY2U1ZVRhZ3ModHlwZW9mIHMgPT09ICdzdHJpbmcnID8gcyA6IEpTT04uc3RyaW5naWZ5KHMpKX1gKVxuICAgICAgICAgICAgKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICBsaW5lcy5wdXNoKFwiXCIpO1xuXG4gICAgICAvLyBJbnNldCBhcyBpbmRlbnRlZCBidWxsZXRcbiAgICAgIH0gZWxzZSBpZiAoZW50cnkudHlwZSA9PT0gJ2luc2V0Jykge1xuICAgICAgICBsaW5lcy5wdXNoKGAtICoke2VudHJ5Lm5hbWV9KmApO1xuICAgICAgICBjb25zdCBzdWJzID0gQXJyYXkuaXNBcnJheShlbnRyeS5lbnRyaWVzKSA/IGVudHJ5LmVudHJpZXMgOiBbZW50cnkuZW50cmllc107XG4gICAgICAgIHN1YnMuZm9yRWFjaCgoczogYW55KSA9PiBsaW5lcy5wdXNoKGAgIC0gJHtyZXBsYWNlNWVUYWdzKHMpfWApKTtcbiAgICAgICAgbGluZXMucHVzaChcIlwiKTtcblxuICAgICAgLy8gU2VjdGlvbiBvciBlbnRyaWVzXG4gICAgICB9IGVsc2UgaWYgKChlbnRyeS50eXBlID09PSAnc2VjdGlvbicgfHwgZW50cnkudHlwZSA9PT0gJ2VudHJpZXMnKSAmJiBBcnJheS5pc0FycmF5KGVudHJ5LmVudHJpZXMpKSB7XG4gICAgICAgIGlmIChlbnRyeS5uYW1lKSB7XG4gICAgICAgICAgbGluZXMucHVzaChgIyMgJHtlbnRyeS5uYW1lfWApO1xuICAgICAgICAgIGxpbmVzLnB1c2goXCJcIik7XG4gICAgICAgIH1cbiAgICAgICAgZW50cnkuZW50cmllcy5mb3JFYWNoKChzOiBhbnkpID0+IHtcbiAgICAgICAgICBsaW5lcy5wdXNoKHJlcGxhY2U1ZVRhZ3ModHlwZW9mIHMgPT09ICdzdHJpbmcnID8gcyA6IEpTT04uc3RyaW5naWZ5KHMpKSk7XG4gICAgICAgICAgbGluZXMucHVzaChcIlwiKTtcbiAgICAgICAgfSk7XG5cbiAgICAgIC8vIFRhYmxlXG4gICAgICB9IGVsc2UgaWYgKGVudHJ5LnR5cGUgPT09ICd0YWJsZScgJiYgQXJyYXkuaXNBcnJheShlbnRyeS5yb3dzKSkge1xuICAgICAgICBjb25zdCBoZHIgPSBlbnRyeS5jb2xMYWJlbHMgfHwgW107XG4gICAgICAgIGxpbmVzLnB1c2goYHwgJHtoZHIuam9pbignIHwgJyl9IHxgKTtcbiAgICAgICAgbGluZXMucHVzaChgfCAke2hkci5tYXAoKCkgPT4gJy0tLScpLmpvaW4oJyB8ICcpfSB8YCk7XG4gICAgICAgIGVudHJ5LnJvd3MuZm9yRWFjaCgocm93OiBhbnlbXSkgPT5cbiAgICAgICAgICBsaW5lcy5wdXNoKGB8ICR7cm93LmpvaW4oJyB8ICcpfSB8YClcbiAgICAgICAgKTtcbiAgICAgICAgbGluZXMucHVzaChcIlwiKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIHJldHVybiB7XG4gICAgICBwYXRoOiBgUGxheWVyIEJ1aWxkL0ZlYXRzLyR7ZmVhdC5uYW1lfS5tZGAsXG4gICAgICBjb250ZW50OiBsaW5lcy5qb2luKFwiXFxuXCIpLnRyaW0oKSArIFwiXFxuXCIsXG4gICAgfTtcbiAgfSk7XG59XG4iLCAiLy8gc3JjL3BhcnNlcnMvYmFja2dyb3VuZHMudHNcbmltcG9ydCB0eXBlIHsgUGFyc2VkTWFya2Rvd25GaWxlIH0gZnJvbSBcIi4uLy4uL3R5cGVzXCI7XG5pbXBvcnQgeyByZXBsYWNlNWVUYWdzIH0gZnJvbSBcIi4vaGVscGVycy90YWdSZXBsYWNlclwiO1xuaW1wb3J0IHsgcmVuZGVyTWFya2Rvd25UYWJsZSB9IGZyb20gXCIuL2hlbHBlcnMvbWFya2Rvd25UYWJsZVwiO1xuaW1wb3J0IHsgYnVpbGRGTSwgc2VyaWFsaXplRnJvbnRtYXR0ZXIsIEZNX0ZJRUxEUywgZmlsdGVyVmFsaWRTa2lsbHMsIEJBQ0tHUk9VTkRfTUVUQV9ERUZTIH0gZnJvbSBcIi4vaGVscGVycy9mcm9udG1hdHRlclwiO1xuXG4vKipcbiAqIFBhcnNlIGJhY2tncm91bmRzLmpzb24gaW50byBvbmUgTWFya2Rvd24gZmlsZSBwZXIgYmFja2dyb3VuZCB1bmRlciBQbGF5ZXIgQnVpbGQvQmFja2dyb3VuZHMsXG4gKiBleGNsdWRpbmcgYW55IFx1MjAxQ1ZhcmlhbnRcdTIwMjZcdTIwMUQgb3IgXHUyMDFDQmFsZHVyXHUyMDE5cyBHYXRlXHUyMDI2XHUyMDFEIGVudHJpZXMuXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlQmFja2dyb3VuZHNGaWxlKGpzb246IGFueSwgZWRpdGlvbklkOiBzdHJpbmcpOiBQYXJzZWRNYXJrZG93bkZpbGVbXSB7XG4gIC8vIHB1bGwgaW4gdGhlIGFycmF5XG4gIGNvbnN0IHJhdzogYW55W10gPSBBcnJheS5pc0FycmF5KGpzb24uYmFja2dyb3VuZClcbiAgICA/IGpzb24uYmFja2dyb3VuZFxuICAgIDogQXJyYXkuaXNBcnJheShqc29uLmJhY2tncm91bmRzKVxuICAgID8ganNvbi5iYWNrZ3JvdW5kc1xuICAgIDogW107XG5cbiAgLy8gZmlsdGVyIG91dCB1bndhbnRlZCBlbnRyaWVzXG4gIGNvbnN0IGJhY2tncm91bmRzID0gcmF3LmZpbHRlcihiZyA9PiB7XG4gICAgY29uc3Qgbm06IHN0cmluZyA9IGJnLm5hbWUgfHwgXCJcIjtcbiAgICByZXR1cm4gIW5tLnN0YXJ0c1dpdGgoXCJWYXJpYW50XCIpICYmICFubS5pbmNsdWRlcyhcIkJhbGR1cidzIEdhdGVcIik7XG4gIH0pO1xuXG4gIGNvbnN0IG91dHB1dHM6IFBhcnNlZE1hcmtkb3duRmlsZVtdID0gW107XG5cbiAgYmFja2dyb3VuZHMuZm9yRWFjaChiZyA9PiB7XG4gICAgY29uc3QgbGluZXM6IHN0cmluZ1tdID0gW107XG5cbi8vIFx1MjUwMFx1MjUwMFx1MjUwMCBidWlsZCBmcm9udG1hdHRlciBcdTI1MDBcdTI1MDBcdTI1MDBcbmNvbnN0IGZtID0gYnVpbGRGTShiZywgQkFDS0dST1VORF9NRVRBX0RFRlMpO1xuXG4vLyBcdTI1MDBcdTI1MDBcdTI1MDAgY29sbGVjdCBvbmx5IHRoZSBlbnRyaWVzIGZsYWdnZWQgaXNGZWF0dXJlIFx1MjUwMFx1MjUwMFx1MjUwMFxuY29uc3QgZXh0cmFUcmFpdHM6IHN0cmluZ1tdID0gQXJyYXkuaXNBcnJheShiZy5lbnRyaWVzKVxuICA/IChiZy5lbnRyaWVzIGFzIGFueVtdKVxuICAgICAgLmZpbHRlcigoZTogYW55KSA9PiBlLmRhdGE/LmlzRmVhdHVyZSAmJiB0eXBlb2YgZS5uYW1lID09PSBcInN0cmluZ1wiKVxuICAgICAgLm1hcCgoZTogYW55KSA9PiB7XG4gICAgICAgIGNvbnN0IG5hbWUgPSBlLm5hbWUucmVwbGFjZSgvXkZlYXR1cmU6XFxzKi8sIFwiXCIpO1xuICAgICAgICByZXR1cm4gYFtbJHtiZy5uYW1lfSMke25hbWV9XV1gO1xuICAgICAgfSlcbiAgOiBbXTtcblxuLy8gXHUyNTAwXHUyNTAwXHUyNTAwIHNlcmlhbGl6ZSBmcm9udG1hdHRlciBcdTI1MDBcdTI1MDBcdTI1MDBcbmNvbnN0IHlhbWwgPSBzZXJpYWxpemVGcm9udG1hdHRlcihmbSwgQkFDS0dST1VORF9NRVRBX0RFRlMpO1xubGluZXMucHVzaChcIi0tLVwiLCB5YW1sLCBcIi0tLVwiLCBcIlwiKTtcblxuIFxuICAgIC8vIHRpdGxlXG4gICAgbGluZXMucHVzaChgIyAke2JnLm5hbWV9YCwgXCJcIik7XG5cbiAgICAvLyBcdTI1MDBcdTI1MDBcdTI1MDAgc2tpbGwgcHJvZmljaWVuY2llcyBcdTI1MDBcdTI1MDBcdTI1MDBcbiAgICBpZiAoQXJyYXkuaXNBcnJheShiZy5za2lsbFByb2ZpY2llbmNpZXMpICYmIGJnLnNraWxsUHJvZmljaWVuY2llcy5sZW5ndGgpIHtcbiAgICAgIGNvbnN0IHNraWxsczogc3RyaW5nW10gPSBbXTtcbiAgICAgIGJnLnNraWxsUHJvZmljaWVuY2llcy5mb3JFYWNoKChlbnQ6IGFueSkgPT4ge1xuICAgICAgICBpZiAodHlwZW9mIGVudCA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgIHNraWxscy5wdXNoKGNhcChlbnQpKTtcbiAgICAgICAgfSBlbHNlIGlmIChlbnQuY2hvb3NlICYmIEFycmF5LmlzQXJyYXkoZW50LmNob29zZS5mcm9tKSkge1xuICAgICAgICAgIHNraWxscy5wdXNoKGBDaG9vc2UgJHtlbnQuY2hvb3NlLmFtb3VudH0gZnJvbSAke2VudC5jaG9vc2UuZnJvbS5qb2luKFwiLCBcIil9YCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgT2JqZWN0LmVudHJpZXMoZW50KVxuICAgICAgICAgICAgLmZpbHRlcigoWywgdl0pID0+IHYgPT09IHRydWUpXG4gICAgICAgICAgICAuZm9yRWFjaCgoW2tdKSA9PiBza2lsbHMucHVzaChjYXAoaykpKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICBsaW5lcy5wdXNoKGAqKlNraWxsIFByb2ZpY2llbmNpZXM6KiogJHtza2lsbHMuam9pbihcIiwgXCIpfWAsIFwiXCIpO1xuICAgIH1cblxuICAgIC8vIFx1MjUwMFx1MjUwMFx1MjUwMCBsYW5ndWFnZSBwcm9maWNpZW5jaWVzIFx1MjUwMFx1MjUwMFx1MjUwMFxuICAgIGlmIChBcnJheS5pc0FycmF5KGJnLmxhbmd1YWdlUHJvZmljaWVuY2llcykgJiYgYmcubGFuZ3VhZ2VQcm9maWNpZW5jaWVzLmxlbmd0aCkge1xuICAgICAgY29uc3QgbGFuZ3M6IHN0cmluZ1tdID0gW107XG4gICAgICBiZy5sYW5ndWFnZVByb2ZpY2llbmNpZXMuZm9yRWFjaCgoZW50OiBhbnkpID0+IHtcbiAgICAgICAgaWYgKGVudC5hbnlTdGFuZGFyZCkge1xuICAgICAgICAgIGxhbmdzLnB1c2goYCR7ZW50LmFueVN0YW5kYXJkfSBvZiB5b3VyIGNob2ljZWApO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIE9iamVjdC5lbnRyaWVzKGVudClcbiAgICAgICAgICAgIC5maWx0ZXIoKFssIHZdKSA9PiB2ID09PSB0cnVlKVxuICAgICAgICAgICAgLmZvckVhY2goKFtrXSkgPT4gbGFuZ3MucHVzaChjYXAoaykpKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICBsaW5lcy5wdXNoKGAqKkxhbmd1YWdlczoqKiAke2xhbmdzLmpvaW4oXCIsIFwiKX1gLCBcIlwiKTtcbiAgICB9XG5cbiAgICAvLyBcdTI1MDBcdTI1MDBcdTI1MDAgdG9vbCBwcm9maWNpZW5jaWVzIFx1MjUwMFx1MjUwMFx1MjUwMFxuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShiZy50b29sUHJvZmljaWVuY2llcykgJiYgYmcudG9vbFByb2ZpY2llbmNpZXMubGVuZ3RoKSB7XG4gICAgICAgIGNvbnN0IHRvb2xzOiBzdHJpbmdbXSA9IFtdO1xuXG4gICAgICAgIGJnLnRvb2xQcm9maWNpZW5jaWVzLmZvckVhY2goKGVudDogYW55KSA9PiB7XG4gICAgICAgICAgICAvLyBcdTIwMUNDaG9vc2UgWCBmcm9tIFx1MjAyNlx1MjAxRFxuICAgICAgICAgICAgaWYgKGVudC5jaG9vc2UgJiYgQXJyYXkuaXNBcnJheShlbnQuY2hvb3NlLmZyb20pKSB7XG4gICAgICAgICAgICBjb25zdCBsaXN0ID0gZW50LmNob29zZS5mcm9tLm1hcChodW1hbml6ZSkuam9pbihcIiwgXCIpO1xuICAgICAgICAgICAgdG9vbHMucHVzaChgQ2hvb3NlICR7ZW50LmNob29zZS5jb3VudH0gZnJvbSAke2xpc3R9YCk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIHBsYWluIHN0cmluZyAocmFyZSBoZXJlLCBidXQganVzdCBpbiBjYXNlKVxuICAgICAgICAgICAgaWYgKHR5cGVvZiBlbnQgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgIHRvb2xzLnB1c2goaHVtYW5pemUoZW50KSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIG9iamVjdCB3aXRoIGJvb2xlYW4gZmxhZ3M6IGdhdGhlciAqYWxsKiB0cnVlIGtleXNcbiAgICAgICAgICAgIE9iamVjdC5lbnRyaWVzKGVudClcbiAgICAgICAgICAgIC5maWx0ZXIoKFtfLCB2XSkgPT4gdiA9PT0gdHJ1ZSlcbiAgICAgICAgICAgIC5mb3JFYWNoKChba10pID0+IHRvb2xzLnB1c2goaHVtYW5pemUoaykpKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgbGluZXMucHVzaChgKipUb29sIFByb2ZpY2llbmNpZXM6KiogJHt0b29scy5qb2luKFwiLCBcIil9YCwgXCJcIik7XG4gICAgICAgIH1cblxuXG5cbiAgICAvLyBcdTI1MDBcdTI1MDBcdTI1MDAgc3RhcnRpbmcgZXF1aXBtZW50IFx1MjUwMFx1MjUwMFx1MjUwMFxuICAgIGlmIChBcnJheS5pc0FycmF5KGJnLnN0YXJ0aW5nRXF1aXBtZW50KSAmJiBiZy5zdGFydGluZ0VxdWlwbWVudC5sZW5ndGgpIHtcbiAgICAgIGxpbmVzLnB1c2goYCoqRXF1aXBtZW50OioqYCk7XG4gICAgICBiZy5zdGFydGluZ0VxdWlwbWVudC5mb3JFYWNoKChncnA6IGFueSkgPT4ge1xuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShncnAuXykpIHtcbiAgICAgICAgICBncnAuXy5mb3JFYWNoKChpdDogYW55KSA9PiBsaW5lcy5wdXNoKGAtICR7Zm10SXRlbShpdCl9YCkpO1xuICAgICAgICB9XG4gICAgICAgIFtcImFcIiwgXCJiXCJdLmZvckVhY2goa2V5ID0+IHtcbiAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShncnBba2V5XSkpIHtcbiAgICAgICAgICAgIGdycFtrZXldLmZvckVhY2goKGl0OiBhbnkpID0+IGxpbmVzLnB1c2goYC0gJHtmbXRJdGVtKGl0KX1gKSk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgICAgbGluZXMucHVzaChcIlwiKTtcbiAgICB9XG5cbiAgICAvLyBcdTI1MDBcdTI1MDBcdTI1MDAgYWxsIGZlYXR1cmUgJiBlbnRyaWVzIGJsb2NrcyBcdTI1MDBcdTI1MDBcdTI1MDBcbiAgICBpZiAoQXJyYXkuaXNBcnJheShiZy5lbnRyaWVzKSkge1xuICAgICAgYmcuZW50cmllcy5mb3JFYWNoKChlbnRyeTogYW55KSA9PiB7XG4gICAgICAgIC8vIHNraXAgdGhlIHN1bW1hcnkgbGlzdCBibG9ja1xuICAgICAgICBpZiAoZW50cnkudHlwZSA9PT0gXCJsaXN0XCIgJiYgZW50cnkuc3R5bGUgPT09IFwibGlzdC1oYW5nLW5vdGl0bGVcIikge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICAvLyBzZWN0aW9uIGhlYWRlclxuICAgICAgICBpZiAoZW50cnkubmFtZSkge1xuY29uc3QgaGVhZGVyID0gZW50cnkuZGF0YT8uaXNGZWF0dXJlXG4gID8gZW50cnkubmFtZS5yZXBsYWNlKC9eRmVhdHVyZTpcXHMqLywgXCJcIilcbiAgOiBlbnRyeS5uYW1lO1xubGluZXMucHVzaChgIyMgJHtoZWFkZXJ9YCwgXCJcIik7ICAgICAgICB9XG4gICAgICAgIC8vIGVudHJ5IGNvbnRlbnRcbiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoZW50cnkuZW50cmllcykpIHtcbiAgICAgICAgICBlbnRyeS5lbnRyaWVzLmZvckVhY2goKGU6IGFueSkgPT4ge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBlID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICAgIGxpbmVzLnB1c2gocmVwbGFjZTVlVGFncyhlKSwgXCJcIik7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGUudHlwZSA9PT0gXCJsaXN0XCIgJiYgQXJyYXkuaXNBcnJheShlLml0ZW1zKSkge1xuICAgICAgICAgICAgICBlLml0ZW1zLmZvckVhY2goKGl0OiBhbnkpID0+XG4gICAgICAgICAgICAgICAgbGluZXMucHVzaChgLSAke3JlcGxhY2U1ZVRhZ3MoaXQuZW50cnkgPz8gaXQpfWApXG4gICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgIGxpbmVzLnB1c2goXCJcIik7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGUudHlwZSA9PT0gXCJ0YWJsZVwiKSB7XG4gICAgICAgICAgICAgIGNvbnN0IHRibCA9IHJlbmRlck1hcmtkb3duVGFibGUoZSk7XG4gICAgICAgICAgICAgIGlmICh0YmwpIGxpbmVzLnB1c2godGJsLCBcIlwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIGlmIChlbnRyeS50eXBlID09PSBcImxpc3RcIiAmJiBBcnJheS5pc0FycmF5KGVudHJ5Lml0ZW1zKSkge1xuICAgICAgICAgIGVudHJ5Lml0ZW1zLmZvckVhY2goKGl0OiBhbnkpID0+XG4gICAgICAgICAgICBsaW5lcy5wdXNoKGAtICR7cmVwbGFjZTVlVGFncyhpdC5lbnRyeSA/PyBpdCl9YClcbiAgICAgICAgICApO1xuICAgICAgICAgIGxpbmVzLnB1c2goXCJcIik7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cblxuICAgIG91dHB1dHMucHVzaCh7XG4gICAgICBwYXRoOiBgUGxheWVyIEJ1aWxkL0JhY2tncm91bmRzLyR7YmcubmFtZX0ubWRgLFxuICAgICAgY29udGVudDogbGluZXMuam9pbihcIlxcblwiKS50cmltRW5kKCkgKyBcIlxcblwiLFxuICAgIH0pO1xuICB9KTtcblxuICByZXR1cm4gb3V0cHV0cztcbn1cblxuLy8gXHUyMDE0XHUyMDE0XHUyMDE0IGhlbHBlcnMgXHUyMDE0XHUyMDE0XHUyMDE0XG5mdW5jdGlvbiBjYXAoc3RyOiBzdHJpbmcpIHtcbiAgcmV0dXJuIHN0ci5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIHN0ci5zbGljZSgxKTtcbn1cblxuXG5mdW5jdGlvbiBmbXRJdGVtKGl0ZW06IGFueSk6IHN0cmluZyB7XG4gIC8vIDEpIHJhdyBzdHJpbmcgb3IgdGFnZ2VkIGl0ZW1cbiAgaWYgKHR5cGVvZiBpdGVtID09PSBcInN0cmluZ1wiKSB7XG4gICAgaWYgKGl0ZW0uaW5jbHVkZXMoXCJ8XCIpKSB7XG4gICAgICByZXR1cm4gcmVwbGFjZTVlVGFncyhge0BpdGVtICR7aXRlbX19YCk7XG4gICAgfVxuICAgIHJldHVybiByZXBsYWNlNWVUYWdzKGl0ZW0pO1xuICB9XG5cbiAgLy8gMikgcHVyZSBnb2xkLXBpZWNlIGVudHJ5OiB7IHZhbHVlOiAxMCB9IG9yIHsgY29udGFpbnNWYWx1ZTogMTUwMCB9XG4gIGNvbnN0IHByaWNlUmF3ID0gKGl0ZW0uY29udGFpbnNWYWx1ZSA/PyBpdGVtLnZhbHVlKSBhcyBudW1iZXIgfCB1bmRlZmluZWQ7XG4gIGlmIChcbiAgICB0eXBlb2YgcHJpY2VSYXcgPT09IFwibnVtYmVyXCIgJiZcbiAgICAvLyBtYWtlIHN1cmUgaXRcdTIwMTlzIG5vdCBhbHNvIGFuIFx1MjAxQ2l0ZW1cdTIwMUQgb3IgXHUyMDFDZXF1aXBtZW50VHlwZVx1MjAxRFxuICAgICFpdGVtLml0ZW0gJiZcbiAgICAhaXRlbS5lcXVpcG1lbnRUeXBlICYmXG4gICAgIWl0ZW0uc3BlY2lhbFxuICApIHtcbiAgICBjb25zdCBncCA9IHByaWNlUmF3ID49IDEwMCA/IHByaWNlUmF3IC8gMTAwIDogcHJpY2VSYXc7XG4gICAgcmV0dXJuIGAke2dwfSBncGA7XG4gIH1cblxuICAvLyAzKSBleHBsaWNpdCBpdGVtIG9iamVjdCB3aXRoIG9wdGlvbmFsIHByaWNlXG4gIGlmIChpdGVtLml0ZW0pIHtcbiAgICBjb25zdCBsaW5rID0gcmVwbGFjZTVlVGFncyhge0BpdGVtICR7aXRlbS5pdGVtfX1gKTtcbiAgICBpZiAodHlwZW9mIHByaWNlUmF3ID09PSBcIm51bWJlclwiKSB7XG4gICAgICBjb25zdCBncCA9IHByaWNlUmF3ID49IDEwMCA/IHByaWNlUmF3IC8gMTAwIDogcHJpY2VSYXc7XG4gICAgICByZXR1cm4gYCR7bGlua30gKCR7Z3B9IGdwKWA7XG4gICAgfVxuICAgIHJldHVybiBsaW5rO1xuICB9XG5cbiAgLy8gNCkgc3BlY2lhbC1jYXNlIHRleHRcbiAgaWYgKHR5cGVvZiBpdGVtLnNwZWNpYWwgPT09IFwic3RyaW5nXCIpIHtcbiAgICByZXR1cm4gaXRlbS5zcGVjaWFsO1xuICB9XG5cbiAgLy8gNSkga25vd24gZXF1aXBtZW50VHlwZSBrZXlzXG4gIGlmIChpdGVtLmVxdWlwbWVudFR5cGUpIHtcbiAgICBzd2l0Y2ggKGl0ZW0uZXF1aXBtZW50VHlwZSkge1xuICAgICAgY2FzZSBcInRvb2xBcnRpc2FuXCI6XG4gICAgICAgIHJldHVybiBcIk9uZSB0eXBlIG9mIGFydGlzYW5cdTIwMTlzIHRvb2xzIChvZiB5b3VyIGNob2ljZSlcIjtcbiAgICAgIGNhc2UgXCJpbnN0cnVtZW50TXVzaWNhbFwiOlxuICAgICAgICByZXR1cm4gXCJPbmUgdHlwZSBvZiBtdXNpY2FsIGluc3RydW1lbnQgKG9mIHlvdXIgY2hvaWNlKVwiO1xuICAgICAgY2FzZSBcInNldEdhbWluZ1wiOlxuICAgICAgICByZXR1cm4gXCJPbmUgc2V0IG9mIGdhbWluZyBkaWNlIChvZiB5b3VyIGNob2ljZSlcIjtcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiBodW1hbml6ZShpdGVtLmVxdWlwbWVudFR5cGUpO1xuICAgIH1cbiAgfVxuXG4gIC8vIDYpIGZhbGxiYWNrOiBkdW1wIGFueSBsZWZ0b3ZlciB0YWcgc3ludGF4XG4gIHJldHVybiByZXBsYWNlNWVUYWdzKEpTT04uc3RyaW5naWZ5KGl0ZW0pKTtcbn1cblxuXG5cbmZ1bmN0aW9uIGh1bWFuaXplKHN0cjogc3RyaW5nKTogc3RyaW5nIHtcbiAgY29uc3Qgc3BhY2VkID0gc3RyLnJlcGxhY2UoLyhbYS16XSkoW0EtWl0pL2csIFwiJDEgJDJcIik7XG4gIHJldHVybiBzcGFjZWQuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBzcGFjZWQuc2xpY2UoMSk7XG59XG4iLCAiLy8gc3JjL3J1bGVzZXRJbnN0YWxsZXIudHNcbmltcG9ydCB7IEFwcCB9IGZyb20gXCJvYnNpZGlhblwiO1xuaW1wb3J0IHsgQVZBSUxBQkxFX0VESVRJT05TIH0gZnJvbSBcIi4vZWRpdGlvbnNcIjtcblxuLy8gU1RBVElDIGltcG9ydCBvZiBldmVyeSBpbnN0YWxsZXIgeW91IHNoaXA6XG5pbXBvcnQgKiBhcyBmaXZlZTIwMTRJbnN0YWxsZXIgZnJvbSBcIi4vcGFyc2Vycy81ZS0yMDE0L2luc3RhbGxlclwiO1xuaW1wb3J0ICogYXMgZml2ZWUyMDI1SW5zdGFsbGVyIGZyb20gXCIuL3BhcnNlcnMvNWUtMjAyNS9pbnN0YWxsZXJcIjtcbi8vIGltcG9ydCAqIGFzIGFub3RoZXJJbnN0YWxsZXIgZnJvbSBcIi4vcGFyc2Vycy9vdGhlci9pbnN0YWxsZXJcIjtcblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGltcG9ydFJ1bGVzZXREYXRhKHBhcmFtczoge1xuICBhcHA6IEFwcDtcbiAgZWRpdGlvbktleTogc3RyaW5nO1xuICB0YXJnZXRQYXRoOiBzdHJpbmc7XG59KSB7XG4gIGNvbnN0IHsgYXBwLCBlZGl0aW9uS2V5LCB0YXJnZXRQYXRoIH0gPSBwYXJhbXM7XG4gIGNvbnN0IGVkaXRpb24gPSBBVkFJTEFCTEVfRURJVElPTlMuZmluZCgoZSkgPT4gZS5pZCA9PT0gZWRpdGlvbktleSk7XG4gIGlmICghZWRpdGlvbikge1xuICAgIGNvbnNvbGUud2FybihcIkVkaXRpb24gbm90IGZvdW5kIGZvcjpcIiwgZWRpdGlvbktleSk7XG4gICAgcmV0dXJuO1xuICB9XG4gIGlmICghZWRpdGlvbi5wYXJzZXIpIHtcbiAgICBjb25zb2xlLndhcm4oXCJObyBwYXJzZXIgZGVmaW5lZCBmb3I6XCIsIGVkaXRpb25LZXkpO1xuICAgIHJldHVybjtcbiAgfVxuXG4gIC8vIGFsbCBpbnN0YWxsZXJzIGV4cG9zZSBpbXBvcnRFZGl0aW9uRGF0YSgpXG4gIGxldCBpbnN0YWxsZXJNb2R1bGU6IHsgaW1wb3J0RWRpdGlvbkRhdGE6IChhcmdzOiB7IGFwcDogQXBwOyBlZGl0aW9uOiB0eXBlb2YgZWRpdGlvbjsgdGFyZ2V0UGF0aDogc3RyaW5nIH0pID0+IFByb21pc2U8dm9pZD4gfTtcblxuICBzd2l0Y2ggKGVkaXRpb24ucGFyc2VyKSB7XG4gICAgY2FzZSBcIjVlLTIwMTRcIjpcbiAgICAgIGluc3RhbGxlck1vZHVsZSA9IGZpdmVlMjAxNEluc3RhbGxlcjtcbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgXCI1ZS0yMDI1XCI6XG4gICAgICBpbnN0YWxsZXJNb2R1bGUgPSBmaXZlZTIwMjVJbnN0YWxsZXI7XG4gICAgICBicmVhaztcbiAgICAvLyBjYXNlIFwib3RoZXItcGFyc2VyXCI6XG4gICAgLy8gICBpbnN0YWxsZXJNb2R1bGUgPSBhbm90aGVySW5zdGFsbGVyO1xuICAgIC8vICAgYnJlYWs7XG4gICAgZGVmYXVsdDpcbiAgICAgIHRocm93IG5ldyBFcnJvcihgVW5rbm93biBwYXJzZXI6ICR7ZWRpdGlvbi5wYXJzZXJ9YCk7XG4gIH1cblxuICBhd2FpdCBpbnN0YWxsZXJNb2R1bGUuaW1wb3J0RWRpdGlvbkRhdGEoeyBhcHAsIGVkaXRpb24sIHRhcmdldFBhdGggfSk7XG59XG4iLCAiLy8gY3VzdG9tSW5zdGFsbE1vZGFsLnRzXG5pbXBvcnQgeyBBcHAsIE1vZGFsLCBzZXRJY29uLCBOb3RpY2UgfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgdHlwZSBWVnVuZGVybG9yZVRvb2xraXRQbHVnaW4gZnJvbSAnLi9tYWluJztcblxuZXhwb3J0IGNsYXNzIEluc3RhbGxpbmdNb2RhbCBleHRlbmRzIE1vZGFsIHtcbiAgY29uc3RydWN0b3IoYXBwOiBBcHApIHtcbiAgICBzdXBlcihhcHApO1xuICB9XG4gIG9uT3BlbigpIHtcbiAgICB0aGlzLmNvbnRlbnRFbC5lbXB0eSgpO1xuICAgIGNvbnN0IGxvYWRpbmdFbCA9IHRoaXMuY29udGVudEVsXG4gICAgICAuY3JlYXRlRGl2KHsgdGV4dDogJ0luc3RhbGxpbmdcdTIwMjYnLCBjbHM6ICdtb2QtcXVpZXQnIH0pXG4gICAgICBsb2FkaW5nRWwuYWRkQ2xhc3MoXCJ2di1pdGFsaWNcIiwgXCJ2di1tdXRlZFwiLCBcInZ2LWNlbnRlcnRleHRcIiwgXCJ2di1wLW1kXCIpO1xuICB9XG4gIG9uQ2xvc2UoKSB7XG4gICAgdGhpcy5jb250ZW50RWwuZW1wdHkoKTtcbiAgfVxufVxuXG5pbnRlcmZhY2UgVHJlZU5vZGUge1xuICBuYW1lOiBzdHJpbmc7XG4gIGZ1bGxQYXRoOiBzdHJpbmc7XG4gIGlzRm9sZGVyOiBib29sZWFuO1xuICBjaGlsZHJlbjogUmVjb3JkPHN0cmluZywgVHJlZU5vZGU+O1xufVxuXG4vKipcbiAqIFNob3dzIGEgXHUyMDFDQ3VzdG9tIEluc3RhbGxcdTIwMUQgbW9kYWwuIE9uY2UgdGhlIHVzZXIgY2xpY2tzIFx1MjAxQ0luc3RhbGwgU2VsZWN0ZWQsXHUyMDFEXG4gKiB0aGlzIGhhbmRzIGJhY2sgYW4gYXJyYXkgb2YgYHsgcGF0aCwgaXNGb2xkZXIgfWAgdG8gYHBsdWdpbi5wZXJmb3JtQ3VzdG9tSW5zdGFsbCguLi4pYC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNob3dDdXN0b21JbnN0YWxsTW9kYWwoXG4gIGFwcDogQXBwLFxuICBwbHVnaW46IFZWdW5kZXJsb3JlVG9vbGtpdFBsdWdpblxuKSB7XG4gIC8vICgxKSBCdWlsZCBhIHF1aWNrIG1hcDogZnVsbFBhdGggXHUyMTkyIG1hbmlmZXN0S2V5IChmb3IgZGVwZW5kZW5jeSBsb29rdXBzKVxuICBjb25zdCBmdWxsUGF0aFRvS2V5OiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+ID0ge307XG4gIGZvciAoY29uc3QgZiBvZiBwbHVnaW4ubWFuaWZlc3RDYWNoZS5mb2xkZXJzKSB7XG4gICAgZnVsbFBhdGhUb0tleVtmLnBhdGhdID0gZi5rZXk7XG4gIH1cbiAgZm9yIChjb25zdCBmIG9mIHBsdWdpbi5tYW5pZmVzdENhY2hlLmZpbGVzKSB7XG4gICAgZnVsbFBhdGhUb0tleVtmLnBhdGhdID0gZi5rZXk7XG4gIH1cblxuICAvLyAoMikgQnVpbGQgYSBuZXN0ZWQgVHJlZU5vZGUgc3RydWN0dXJlIGZyb20gbWFuaWZlc3RDYWNoZVxuICBjb25zdCByb290OiBUcmVlTm9kZSA9IHsgbmFtZTogJycsIGZ1bGxQYXRoOiAnJywgaXNGb2xkZXI6IHRydWUsIGNoaWxkcmVuOiB7fSB9O1xuXG4gIGZ1bmN0aW9uIGVuc3VyZUZvbGRlck5vZGUoc2VnbWVudHM6IHN0cmluZ1tdKTogVHJlZU5vZGUge1xuICAgIGxldCBjdXJzb3IgPSByb290O1xuICAgIGxldCBidWlsdFNvRmFyID0gJyc7XG4gICAgZm9yIChjb25zdCBzZWcgb2Ygc2VnbWVudHMpIHtcbiAgICAgIGJ1aWx0U29GYXIgPSBidWlsdFNvRmFyID8gYCR7YnVpbHRTb0Zhcn0vJHtzZWd9YCA6IHNlZztcbiAgICAgIGlmICghY3Vyc29yLmNoaWxkcmVuW3NlZ10pIHtcbiAgICAgICAgY3Vyc29yLmNoaWxkcmVuW3NlZ10gPSB7XG4gICAgICAgICAgbmFtZTogc2VnLFxuICAgICAgICAgIGZ1bGxQYXRoOiBidWlsdFNvRmFyLFxuICAgICAgICAgIGlzRm9sZGVyOiB0cnVlLFxuICAgICAgICAgIGNoaWxkcmVuOiB7fSxcbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICAgIGN1cnNvciA9IGN1cnNvci5jaGlsZHJlbltzZWddO1xuICAgIH1cbiAgICByZXR1cm4gY3Vyc29yO1xuICB9XG5cbiAgLy8gSW5zZXJ0IGFsbCBmb2xkZXIgZW50cmllcyBmaXJzdFxuICBmb3IgKGNvbnN0IGZvbGRlckVudHJ5IG9mIHBsdWdpbi5tYW5pZmVzdENhY2hlLmZvbGRlcnMpIHtcbiAgICBjb25zdCBzZWdtZW50cyA9IGZvbGRlckVudHJ5LnBhdGguc3BsaXQoJy8nKTtcbiAgICBlbnN1cmVGb2xkZXJOb2RlKHNlZ21lbnRzKTtcbiAgfVxuXG4gIC8vIEluc2VydCBhbGwgZmlsZSBlbnRyaWVzIHVuZGVyIHRoZWlyIHBhcmVudCBmb2xkZXIgbm9kZXNcbiAgZm9yIChjb25zdCBmaWxlRW50cnkgb2YgcGx1Z2luLm1hbmlmZXN0Q2FjaGUuZmlsZXMpIHtcbiAgICBjb25zdCBzZWdtZW50cyA9IGZpbGVFbnRyeS5wYXRoLnNwbGl0KCcvJyk7XG4gICAgY29uc3QgZmlsZU5hbWUgPSBzZWdtZW50cy5wb3AoKSE7XG4gICAgY29uc3QgcGFyZW50Tm9kZSA9IHNlZ21lbnRzLmxlbmd0aCA/IGVuc3VyZUZvbGRlck5vZGUoc2VnbWVudHMpIDogcm9vdDtcbiAgICBwYXJlbnROb2RlLmNoaWxkcmVuW2ZpbGVOYW1lXSA9IHtcbiAgICAgIG5hbWU6IGZpbGVOYW1lLFxuICAgICAgZnVsbFBhdGg6IGZpbGVFbnRyeS5wYXRoLFxuICAgICAgaXNGb2xkZXI6IGZhbHNlLFxuICAgICAgY2hpbGRyZW46IHt9LFxuICAgIH07XG4gIH1cblxuICAvLyAoMykgRGVmaW5lIG91ciBNb2RhbCBzdWJjbGFzc1xuICBjbGFzcyBDdXN0b21JbnN0YWxsTW9kYWwgZXh0ZW5kcyBNb2RhbCB7XG4gICAgcHJpdmF0ZSBjaGVja2JveE1hcDogUmVjb3JkPHN0cmluZywgSFRNTElucHV0RWxlbWVudD4gPSB7fTtcbiAgICBwcml2YXRlIGNvbnNvbGVFbDogSFRNTEVsZW1lbnQ7ICAgICAgICAgICAgICAgIC8vIDxkaXY+IHRoYXQgaG9sZHMgXHUyMDFDZGVwZW5kZW5jeSBjb25zb2xlXHUyMDFEXG4gICAgcHJpdmF0ZSBjdXJyZW50QmF0Y2hMaW5lczogSFRNTEVsZW1lbnRbXSA9IFtdOyAgLy8gbGluZXMgZnJvbSB0aGUgbW9zdCByZWNlbnQgZGVwZW5kZW5jeSBwYXNzXG5cbiAgICAvLyBUb3BcdTIwMTBsZXZlbCBmaWx0ZXIgY2hlY2tib3hlczpcbiAgICBwcml2YXRlIHBsdWdpbkNoZWNrYm94OiBIVE1MSW5wdXRFbGVtZW50O1xuICAgIHByaXZhdGUgZGVtb0NoZWNrYm94OiBIVE1MSW5wdXRFbGVtZW50O1xuICAgIHByaXZhdGUgc2V0dGluZ3NDaGVja2JveDogSFRNTElucHV0RWxlbWVudDtcblxuICAgIGNvbnN0cnVjdG9yKGFwcDogQXBwKSB7XG4gICAgICBzdXBlcihhcHApO1xuICAgIH1cblxuICAgIG9uT3BlbigpIHtcbiAgICAgIHRoaXMuY29udGVudEVsLmVtcHR5KCk7XG4gICAgICB0aGlzLnRpdGxlRWwuc2V0VGV4dCgnQ3VzdG9tIEluc3RhbGwnKTtcbiAgICBcbiAgICAgIGNvbnN0IGRlc2NyaXB0aW9uRWwgPSB0aGlzLmNvbnRlbnRFbC5jcmVhdGVEaXYoKTtcbiAgICAgIGRlc2NyaXB0aW9uRWwudGV4dENvbnRlbnQgPSAnQWxsIGNoZWNrZWQgaXRlbXMgd2lsbCBiZSBpbnN0YWxsZWQuIERlcGVuZGVuY2llcyB3aWxsIGJlIG1hbmFnZWQgYXV0b21hdGljYWxseS4nO1xuICAgICAgZGVzY3JpcHRpb25FbC5hZGRDbGFzcyhcImN1c3RvbWluc3RhbGwtaGVhZHR4dFwiKTtcbiBcblxuICAgICAgLy9cbiAgICAgIC8vIFx1MjUwMFx1MjUwMFx1MjUwMCAoQSkgU0lOR0xFIFNDUk9MTEFCTEUgQk9YIEZPUiBcdTIwMUNPUFRJT05TICsgVFJFRVx1MjAxRCBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcbiAgICAgIC8vXG4gICAgICBjb25zdCBvcHRpb25zQm94ID0gdGhpcy5jb250ZW50RWwuY3JlYXRlRGl2KCk7XG4gICAgICBPYmplY3QuYXNzaWduKG9wdGlvbnNCb3guc3R5bGUsIHtcbiAgICAgICAgbWF4SGVpZ2h0OiAnNDgwcHgnLCAgICAgICAgICAgICAgIC8vIEVub3VnaCBzcGFjZSBmb3IgY2hlY2tib3hlcyArIHRyZWVcbiAgICAgICAgb3ZlcmZsb3dZOiAnYXV0bycsICAgICAgICAgICAgICAgIC8vIEV2ZXJ5dGhpbmcgaW5zaWRlIG9wdGlvbnNCb3ggd2lsbCBzY3JvbGxcbiAgICAgICAgbWFyZ2luOiAnMC41ZW0gMCcsXG4gICAgICAgIGJvcmRlcjogJzFweCBzb2xpZCB2YXIoLS1kaXZpZGVyLWNvbG9yKScsXG4gICAgICAgIGJvcmRlclJhZGl1czogJzRweCcsXG4gICAgICAgIHBhZGRpbmc6ICcwLjVlbScsXG4gICAgICB9KTtcbiAgICBcbiAgICAgIC8vXG4gICAgICAvLyBcdTI1MDBcdTI1MDBcdTI1MDAgKEExKSBcdTIwMUNJbmNsdWRlIFx1MjAyNlx1MjAxRCBDSEVDS0JPWEVTIEFUIFRIRSBUT1AgXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXG4gICAgICAvL1xuICAgICAgLy8gV2UgY3JlYXRlIG9uZSBzbWFsbCBcdTIwMUNjaGVja2JveCBwYW5lbFx1MjAxRCB0aGF0IHNpdHMgYXQgdGhlIHRvcCBvZiBvcHRpb25zQm94LlxuICAgICAgY29uc3QgY2hlY2tib3hTZWN0aW9uID0gb3B0aW9uc0JveC5jcmVhdGVEaXYoKTtcbiAgICAgIE9iamVjdC5hc3NpZ24oY2hlY2tib3hTZWN0aW9uLnN0eWxlLCB7XG4gICAgICAgIGRpc3BsYXk6ICdmbGV4JyxcbiAgICAgICAgZmxleERpcmVjdGlvbjogJ2NvbHVtbicsXG4gICAgICAgIGdhcDogJzAuNWVtJyxcbiAgICAgICAgbWFyZ2luQm90dG9tOiAnMC43NWVtJyxcbiAgICAgIH0pO1xuICAgIFxuICAgICAgLy8gMSkgXHUyMDFDSW5jbHVkZSBQbHVnaW5zXHUyMDFEXG4gICAgICBjb25zdCBwbHVnaW5Sb3cgPSBjaGVja2JveFNlY3Rpb24uY3JlYXRlRGl2KCk7XG4gICAgICBwbHVnaW5Sb3cuYWRkQ2xhc3MoXCJ2di1jaGVja2JveC1yb3ctYlwiKTtcbiAgICAgIHRoaXMucGx1Z2luQ2hlY2tib3ggPSBwbHVnaW5Sb3cuY3JlYXRlRWwoJ2lucHV0JywgeyB0eXBlOiAnY2hlY2tib3gnIH0pIGFzIEhUTUxJbnB1dEVsZW1lbnQ7XG4gICAgICB0aGlzLnBsdWdpbkNoZWNrYm94LmNoZWNrZWQgPSB0cnVlO1xuICAgICAgdGhpcy5wbHVnaW5DaGVja2JveC5pZCA9ICd2dnVuZGVybG9yZS1jaGVja2JveC1wbHVnaW5zJztcbiAgICAgIHRoaXMucGx1Z2luQ2hlY2tib3guYWRkQ2xhc3MoXCJ2di1jaGVja2JveC1tXCIpO1xuICAgICAgcGx1Z2luUm93LmNyZWF0ZUVsKCdsYWJlbCcsIHtcbiAgICAgICAgdGV4dDogJ0NvbW11bml0eSBQbHVnaW5zJyxcbiAgICAgICAgYXR0cjogeyBmb3I6IHRoaXMucGx1Z2luQ2hlY2tib3guaWQgfSxcbiAgICAgIH0pO1xuICAgIFxuICAgICAgLy8gMikgXHUyMDFDSW5jbHVkZSBEZW1vIEZpbGVzXHUyMDFEXG4gICAgICBjb25zdCBkZW1vUm93ID0gY2hlY2tib3hTZWN0aW9uLmNyZWF0ZURpdigpO1xuICAgICAgZGVtb1Jvdy5hZGRDbGFzcyhcInZ2LWNoZWNrYm94LXJvdy1iXCIpO1xuICAgICAgdGhpcy5kZW1vQ2hlY2tib3ggPSBkZW1vUm93LmNyZWF0ZUVsKCdpbnB1dCcsIHsgdHlwZTogJ2NoZWNrYm94JyB9KSBhcyBIVE1MSW5wdXRFbGVtZW50O1xuICAgICAgdGhpcy5kZW1vQ2hlY2tib3guY2hlY2tlZCA9IHRydWU7XG4gICAgICB0aGlzLmRlbW9DaGVja2JveC5pZCA9ICd2dnVuZGVybG9yZS1jaGVja2JveC1kZW1vJztcbiAgICAgIHRoaXMuZGVtb0NoZWNrYm94LmFkZENsYXNzKFwidnYtY2hlY2tib3gtbVwiKTtcbiAgICAgIGRlbW9Sb3cuY3JlYXRlRWwoJ2xhYmVsJywge1xuICAgICAgICB0ZXh0OiAnVlZ1bmRlcmxvcmUgRGVtbyBGaWxlcycsXG4gICAgICAgIGF0dHI6IHsgZm9yOiB0aGlzLmRlbW9DaGVja2JveC5pZCB9LFxuICAgICAgfSk7XG4gICAgXG4gICAgICAvLyAzKSBcdTIwMUNJbmNsdWRlIFZhdWx0IFNldHRpbmdzIChob3RrZXlzLCBldGMuKVx1MjAxRFxuICAgICAgY29uc3Qgc2V0dGluZ3NSb3cgPSBjaGVja2JveFNlY3Rpb24uY3JlYXRlRGl2KCk7XG4gICAgICBzZXR0aW5nc1Jvdy5hZGRDbGFzcyhcInZ2LWNoZWNrYm94LXJvdy1iXCIpO1xuICAgICAgdGhpcy5zZXR0aW5nc0NoZWNrYm94ID0gc2V0dGluZ3NSb3cuY3JlYXRlRWwoJ2lucHV0JywgeyB0eXBlOiAnY2hlY2tib3gnIH0pIGFzIEhUTUxJbnB1dEVsZW1lbnQ7XG4gICAgICB0aGlzLnNldHRpbmdzQ2hlY2tib3guY2hlY2tlZCA9IHRydWU7XG4gICAgICB0aGlzLnNldHRpbmdzQ2hlY2tib3guaWQgPSAndnZ1bmRlcmxvcmUtY2hlY2tib3gtc2V0dGluZ3MnO1xuICAgICAgdGhpcy5zZXR0aW5nc0NoZWNrYm94LmFkZENsYXNzKFwidnYtY2hlY2tib3gtbVwiKTtcbiAgICAgIHNldHRpbmdzUm93LmNyZWF0ZUVsKCdsYWJlbCcsIHtcbiAgICAgICAgdGV4dDogJ1ZhdWx0IFNldHRpbmdzIChhcHBlcmFuY2UsIGhvdGtleXMsIGdyYXBoIHNldHVwLCBldGMuKScsXG4gICAgICAgIGF0dHI6IHsgZm9yOiB0aGlzLnNldHRpbmdzQ2hlY2tib3guaWQgfSxcbiAgICAgIH0pO1xuICAgIFxuICAgICAgLy9cbiAgICAgIC8vIFx1MjUwMFx1MjUwMFx1MjUwMCAoQTIpIFRISU4gRElWSURFUiBMSU5FIEJFVFdFRU4gQ0hFQ0tCT1hFUyBBTkQgVFJFRSBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcbiAgICAgIC8vXG4gICAgICBjb25zdCBkaXZpZGVyID0gb3B0aW9uc0JveC5jcmVhdGVEaXYoKTtcbiAgICAgIE9iamVjdC5hc3NpZ24oZGl2aWRlci5zdHlsZSwge1xuICAgICAgICBib3JkZXJUb3A6ICcxcHggc29saWQgdmFyKC0tZGl2aWRlci1jb2xvciknLFxuICAgICAgICBtYXJnaW46ICcwLjVlbSAwJyxcbiAgICAgIH0pO1xuICAgIFxuICAgICAgLy9cbiAgICAgIC8vIFx1MjUwMFx1MjUwMFx1MjUwMCAoQTMpIE1BTklGRVNUIFRSRUUgUkVOREVSRUQgQkVMT1cgVEhFIERJVklERVIgXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXG4gICAgICAvL1xuICAgICAgY29uc3QgY29udGFpbmVyID0gb3B0aW9uc0JveC5jcmVhdGVEaXYoKTtcbiAgICAgIE9iamVjdC5hc3NpZ24oY29udGFpbmVyLnN0eWxlLCB7XG4gICAgICAgIC8vIFdlIG5vIGxvbmdlciBnaXZlIHRoaXMgaW5uZXIgZGl2IGl0cyBvd24gc2Nyb2xsYmFyLlxuICAgICAgICAvLyBJbnN0ZWFkLCBjb250YWluZXIgd2lsbCBleHBhbmQgaW5zaWRlIG9wdGlvbnNCb3gsIGFuZFxuICAgICAgICAvLyBvcHRpb25zQm94IHdpbGwgc2Nyb2xsIGV2ZXJ5dGhpbmcgKGNoZWNrYm94ZXMgKyB0cmVlKSB0b2dldGhlci5cbiAgICAgICAgbWFyZ2luOiAnMCcsXG4gICAgICAgIHBhZGRpbmc6ICcwJyxcbiAgICAgICAgYm9yZGVyOiAnbm9uZScsXG4gICAgICB9KTtcbiAgICBcbiAgICAgIGNvbnN0IElOREVOVF9QWCA9IDE2O1xuICAgICAgY29uc3QgbG9va3VwRW50cnkgPSAoZnVsbFBhdGg6IHN0cmluZykgPT4ge1xuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgIHBsdWdpbi5tYW5pZmVzdENhY2hlLmZvbGRlcnMuZmluZCgoZikgPT4gZi5wYXRoID09PSBmdWxsUGF0aCkgfHxcbiAgICAgICAgICBwbHVnaW4ubWFuaWZlc3RDYWNoZS5maWxlcy5maW5kKChmKSA9PiBmLnBhdGggPT09IGZ1bGxQYXRoKVxuICAgICAgICApO1xuICAgICAgfTtcbiAgICBcbiAgICAgIC8vIFJlcmVuZGVyIGxvZ2ljIGZvciB0aGUgdHJlZTsgaGlkZXMgb3B0aW9uYWwgaXRlbXMgaWYgdGhlIGRlbW9DaGVja2JveCBpcyB1bmNoZWNrZWRcbiAgICAgIGNvbnN0IHJlbmRlclRyZWUgPSAoKSA9PiB7XG4gICAgICAgIGNvbnRhaW5lci5lbXB0eSgpO1xuICAgICAgICB0aGlzLmNoZWNrYm94TWFwID0ge307XG4gICAgICAgIHRoaXMuY3VycmVudEJhdGNoTGluZXMgPSBbXTtcbiAgICBcbiAgICAgICAgY29uc3QgZGVtb0FsbG93ZWQgPSB0aGlzLmRlbW9DaGVja2JveC5jaGVja2VkO1xuICAgIFxuICAgICAgICBjb25zdCByZW5kZXJOb2RlID0gKG5vZGU6IFRyZWVOb2RlLCBwYXJlbnRFbDogSFRNTEVsZW1lbnQsIGluZGVudCA9IDApID0+IHtcbiAgICAgICAgICAvLyBJZiB0aGlzIG5vZGUgY29ycmVzcG9uZHMgdG8gYSBtYW5pZmVzdCBlbnRyeTpcbiAgICAgICAgICBpZiAobm9kZS5mdWxsUGF0aCkge1xuICAgICAgICAgICAgY29uc3QgZW50cnkgPSBsb29rdXBFbnRyeShub2RlLmZ1bGxQYXRoKTtcbiAgICAgICAgICAgIGlmIChlbnRyeSAmJiBlbnRyeS5vcHRpb25hbCAmJiAhZGVtb0FsbG93ZWQpIHtcbiAgICAgICAgICAgICAgLy8gU2tpcCBvcHRpb25hbCBkZW1vIGl0ZW1zIHdoZW4gXHUyMDFDSW5jbHVkZSBEZW1vIEZpbGVzXHUyMDFEIGlzIGZhbHNlXG4gICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgaWYgKG5vZGUuaXNGb2xkZXIpIHtcbiAgICAgICAgICAgIC8vIFx1MjUwMFx1MjUwMFx1MjUwMCBGT0xERVIgQ0FTRSBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcbiAgICAgICAgICAgIGNvbnN0IGRldGFpbHMgPSBwYXJlbnRFbC5jcmVhdGVFbCgnZGV0YWlscycpO1xuICAgICAgICAgICAgZGV0YWlscy5vcGVuID0gdHJ1ZTtcbiAgICAgICAgICAgIGRldGFpbHMuYWRkQ2xhc3MoXCJ2di1mb2xkZXJkZXRhaXNsXCIpO1xuICAgIFxuICAgICAgICAgICAgY29uc3Qgc3VtbWFyeSA9IGRldGFpbHMuY3JlYXRlRWwoJ3N1bW1hcnknKTtcbiAgICAgICAgICAgIE9iamVjdC5hc3NpZ24oc3VtbWFyeS5zdHlsZSwge1xuICAgICAgICAgICAgICBkaXNwbGF5OiAnZmxleCcsXG4gICAgICAgICAgICAgIGFsaWduSXRlbXM6ICdjZW50ZXInLFxuICAgICAgICAgICAgICBtYXJnaW5MZWZ0OiBgJHtpbmRlbnQgKiBJTkRFTlRfUFh9cHhgLFxuICAgICAgICAgICAgICBjdXJzb3I6ICdwb2ludGVyJyxcbiAgICAgICAgICAgICAgcGFkZGluZzogJzJweCA2cHgnLFxuICAgICAgICAgICAgICBib3JkZXJSYWRpdXM6ICc0cHgnLFxuICAgICAgICAgICAgICB1c2VyU2VsZWN0OiAnbm9uZScsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHN1bW1hcnkuYWRkRXZlbnRMaXN0ZW5lcignbW91c2VlbnRlcicsICgpID0+IHtcbiAgICAgICAgICAgICAgc3VtbWFyeS5hZGRDbGFzcyhcInZ2LW1vdXNlZW50ZXItdHh0XCIpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBzdW1tYXJ5LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbGVhdmUnLCAoKSA9PiB7XG4gICAgICAgICAgICAgIHN1bW1hcnkuYWRkQ2xhc3MoXCJ2di1tb3VzZWxlYXZlLXRleHRcIik7XG4gICAgICAgICAgICB9KTtcbiAgICBcbiAgICAgICAgICAgIC8vICgxKSBGb2xkZXIgY2hlY2tib3hcbiAgICAgICAgICAgIGNvbnN0IGNiID0gc3VtbWFyeS5jcmVhdGVFbCgnaW5wdXQnLCB7IHR5cGU6ICdjaGVja2JveCcgfSkgYXMgSFRNTElucHV0RWxlbWVudDtcbiAgICAgICAgICAgIGNiLmFkZENsYXNzKFwiY3VzdG9taW5zdGFsbC1mb2xkZXItaWNvblwiKTtcbiAgICAgICAgICAgIGNiLmNoZWNrZWQgPSB0cnVlO1xuICAgICAgICAgICAgdGhpcy5jaGVja2JveE1hcFtub2RlLmZ1bGxQYXRoXSA9IGNiO1xuICAgIFxuICAgICAgICAgICAgLy8gKDIpIEZvbGRlciBpY29uXG4gICAgICAgICAgICBjb25zdCBpY29uRWwgPSBzdW1tYXJ5LmNyZWF0ZURpdih7IGNsczogJ3N1Z2dlc3Rpb24taWNvbicgfSk7XG4gICAgICAgICAgICBzZXRJY29uKGljb25FbCwgJ2ZvbGRlcicpO1xuICAgICAgICAgICAgaWNvbkVsLmFkZENsYXNzKFwiY3VzdG9taW5zdGFsbC1mb2xkZXItaWNvblwiKTtcbiAgICBcbiAgICAgICAgICAgIC8vICgzKSBGb2xkZXIgbGFiZWxcbiAgICAgICAgICAgIGNvbnN0IGxhYmVsID0gc3VtbWFyeS5jcmVhdGVFbCgnc3BhbicsIHsgdGV4dDogbm9kZS5uYW1lIH0pO1xuICAgICAgICAgICAgbGFiZWwuYWRkQ2xhc3MoXCJjdXN0b21pbnN0YWxsLWZvbGRlci1sYWJlbFwiKTtcbiAgICBcbiAgICAgICAgICAgIC8vICg0KSBXaGVuIGZvbGRlclx1MjAxMGNoZWNrYm94IHRvZ2dsZXM6XG4gICAgICAgICAgICBjYi5vbmNoYW5nZSA9ICgpID0+IHtcbiAgICAgICAgICAgICAgdGhpcy50b2dnbGVEZXNjZW5kYW50cyhub2RlLCBjYi5jaGVja2VkKTtcbiAgICAgICAgICAgICAgdGhpcy5lbmZvcmNlRGVwZW5kZW5jaWVzKG5vZGUuZnVsbFBhdGgsIGNiLmNoZWNrZWQpO1xuICAgICAgICAgICAgICB0aGlzLmZhZGVBbGxFeGNlcHRDdXJyZW50QmF0Y2goKTtcbiAgICAgICAgICAgIH07XG4gICAgXG4gICAgICAgICAgICAvLyAoNSkgUmVjdXJzZSBpbnRvIGNoaWxkcmVuXG4gICAgICAgICAgICBjb25zdCBjaGlsZHJlbkNvbnRhaW5lciA9IGRldGFpbHMuY3JlYXRlRGl2KCk7XG4gICAgICAgICAgICBjaGlsZHJlbkNvbnRhaW5lci5hZGRDbGFzcyhcInZ2LWNoaWxkcmVuaW5kZW50XCIpO1xuICAgICAgICAgICAgZm9yIChjb25zdCBjaGlsZE5hbWUgb2YgT2JqZWN0LmtleXMobm9kZS5jaGlsZHJlbikuc29ydCgpKSB7XG4gICAgICAgICAgICAgIHJlbmRlck5vZGUobm9kZS5jaGlsZHJlbltjaGlsZE5hbWVdLCBjaGlsZHJlbkNvbnRhaW5lciwgaW5kZW50ICsgMSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIFx1MjUwMFx1MjUwMFx1MjUwMCBGSUxFIENBU0UgXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXG4gICAgICAgICAgICBjb25zdCByb3cgPSBwYXJlbnRFbC5jcmVhdGVEaXYoKTtcbiAgICAgICAgICAgIE9iamVjdC5hc3NpZ24ocm93LnN0eWxlLCB7XG4gICAgICAgICAgICAgIGRpc3BsYXk6ICdmbGV4JyxcbiAgICAgICAgICAgICAgYWxpZ25JdGVtczogJ2NlbnRlcicsXG4gICAgICAgICAgICAgIG1hcmdpbkxlZnQ6IGAke2luZGVudCAqIElOREVOVF9QWH1weGAsXG4gICAgICAgICAgICAgIHBhZGRpbmc6ICcycHggNnB4JyxcbiAgICAgICAgICAgICAgYm9yZGVyUmFkaXVzOiAnNHB4JyxcbiAgICAgICAgICAgICAgbWFyZ2luVG9wOiAnMnB4JyxcbiAgICAgICAgICAgICAgbWFyZ2luQm90dG9tOiAnMnB4JyxcbiAgICAgICAgICAgICAgdXNlclNlbGVjdDogJ25vbmUnLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByb3cuYWRkRXZlbnRMaXN0ZW5lcignbW91c2VlbnRlcicsICgpID0+IHtcbiAgICAgICAgICAgICAgcm93LmFkZENsYXNzKFwidnYtbW91c2VlbnRlci10eHRcIik7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJvdy5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWxlYXZlJywgKCkgPT4ge1xuICAgICAgICAgICAgICByb3cuYWRkQ2xhc3MoXCJ2di1tb3VzZWxlYXZlLXR4dFwiKTtcbiAgICAgICAgICAgIH0pO1xuICAgIFxuICAgICAgICAgICAgLy8gKDEpIEZpbGUgY2hlY2tib3hcbiAgICAgICAgICAgIGNvbnN0IGNiID0gcm93LmNyZWF0ZUVsKCdpbnB1dCcsIHsgdHlwZTogJ2NoZWNrYm94JyB9KSBhcyBIVE1MSW5wdXRFbGVtZW50O1xuICAgICAgICAgICAgY2IuYWRkQ2xhc3MoXCJjdXN0b21pbnN0YWxsLWZvbGRlci1jaGVja2JveFwiKTtcbiAgICAgICAgICAgIGNiLmNoZWNrZWQgPSB0cnVlO1xuICAgICAgICAgICAgdGhpcy5jaGVja2JveE1hcFtub2RlLmZ1bGxQYXRoXSA9IGNiO1xuICAgIFxuICAgICAgICAgICAgLy8gKDIpIEZpbGUgaWNvblxuICAgICAgICAgICAgY29uc3QgaWNvbkVsID0gcm93LmNyZWF0ZURpdih7IGNsczogJ3N1Z2dlc3Rpb24taWNvbicgfSk7XG4gICAgICAgICAgICBzZXRJY29uKGljb25FbCwgJ2RvY3VtZW50Jyk7XG4gICAgICAgICAgICBpY29uRWwuYWRkQ2xhc3MoXCJjdXN0b21pbnN0YWxsLWZvbGRlci1pY29uXCIpO1xuICAgIFxuICAgICAgICAgICAgLy8gKDMpIEZpbGUgbGFiZWxcbiAgICAgICAgICAgIGNvbnN0IGxhYmVsID0gcm93LmNyZWF0ZUVsKCdsYWJlbCcsIHsgdGV4dDogbm9kZS5uYW1lIH0pO1xuICAgICAgICAgICAgbGFiZWwuYWRkQ2xhc3MoXCJjdXN0b21pbnN0YWxsLWZpbGUtbGFiZWxcIik7XG4gICAgXG4gICAgICAgICAgICAvLyAoNCkgV2hlbiBmaWxlXHUyMDEwY2hlY2tib3ggdG9nZ2xlczpcbiAgICAgICAgICAgIGNiLm9uY2hhbmdlID0gKCkgPT4ge1xuICAgICAgICAgICAgICB0aGlzLmVuZm9yY2VEZXBlbmRlbmNpZXMobm9kZS5mdWxsUGF0aCwgY2IuY2hlY2tlZCk7XG4gICAgICAgICAgICAgIHRoaXMuZmFkZUFsbEV4Y2VwdEN1cnJlbnRCYXRjaCgpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgXG4gICAgICAgIC8vIEtpY2sgb2ZmIHJlY3Vyc2lvbiBhdCByb290XG4gICAgICAgIGZvciAoY29uc3QgdG9wTmFtZSBvZiBPYmplY3Qua2V5cyhyb290LmNoaWxkcmVuKS5zb3J0KCkpIHtcbiAgICAgICAgICByZW5kZXJOb2RlKHJvb3QuY2hpbGRyZW5bdG9wTmFtZV0sIGNvbnRhaW5lciwgMCk7XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgXG4gICAgICAvLyBGaXJzdCBkcmF3IG9mIHRoZSB0cmVlIChiZWxvdyB0aGUgZGl2aWRlcilcbiAgICAgIHJlbmRlclRyZWUoKTtcbiAgICBcbiAgICAgIC8vXG4gICAgICAvLyBcdTI1MDBcdTI1MDBcdTI1MDAgKEIpIERFUEVOREVOQ1kgQ09OU09MRSBCRUxPVyBUSEUgU0NST0xMQUJMRSBPUFRJT05TIEJPWCBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcbiAgICAgIC8vXG4gICAgICB0aGlzLmNvbnNvbGVFbCA9IHRoaXMuY29udGVudEVsLmNyZWF0ZURpdih7IGNsczogJ2N1c3RvbS1jb25zb2xlJyB9KTtcbiAgICAgIE9iamVjdC5hc3NpZ24odGhpcy5jb25zb2xlRWwuc3R5bGUsIHtcbiAgICAgICAgaGVpZ2h0OiAnMTQwcHgnLFxuICAgICAgICBtYXJnaW46ICcwLjVlbSAwJyxcbiAgICAgICAgcGFkZGluZzogJzhweCcsXG4gICAgICAgIGJhY2tncm91bmRDb2xvcjogJ3ZhcigtLWJhY2tncm91bmQtc2Vjb25kYXJ5KScsXG4gICAgICAgIGJvcmRlcjogJzFweCBzb2xpZCB2YXIoLS1kaXZpZGVyLWNvbG9yKScsXG4gICAgICAgIGJvcmRlclJhZGl1czogJzRweCcsXG4gICAgICAgIGZvbnRGYW1pbHk6ICdtb25vc3BhY2UnLFxuICAgICAgICBmb250U2l6ZTogJzAuODJlbScsXG4gICAgICAgIGxpbmVIZWlnaHQ6ICcxLjRlbScsXG4gICAgICAgIGNvbG9yOiAndmFyKC0tdGV4dC1ub3JtYWwpJyxcbiAgICAgICAgb3ZlcmZsb3dZOiAnYXV0bycsXG4gICAgICAgIHdoaXRlU3BhY2U6ICdwcmUtd3JhcCcsXG4gICAgICB9KTtcbiAgICAgIGNvbnN0IHBsYWNlaG9sZGVyID0gdGhpcy5jb25zb2xlRWwuY3JlYXRlRGl2KHtcbiAgICAgICAgdGV4dDogJz4gRGVwZW5kZW5jeSBlcnJvcnMgYW5kIHdhcm5pbmdzIHdpbGwgYXBwZWFyIGhlcmVcdTIwMjYnLFxuICAgICAgfSk7XG4gICAgICBPYmplY3QuYXNzaWduKHBsYWNlaG9sZGVyLnN0eWxlLCB7XG4gICAgICAgIG9wYWNpdHk6ICcwLjQnLFxuICAgICAgICBmb250U3R5bGU6ICdpdGFsaWMnLFxuICAgICAgICBtYXJnaW5Cb3R0b206ICc0cHgnLFxuICAgICAgfSk7XG4gICAgXG4gICAgICAvL1xuICAgICAgLy8gXHUyNTAwXHUyNTAwXHUyNTAwIChDKSBFVkVOVCBIQU5ETEVSUyBGT1IgVEhFIFRIUkVFIENIRUNLQk9YRVMgXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXG4gICAgICAvL1xuICAgICAgLy8gMSkgXHUyMDFDSW5jbHVkZSBQbHVnaW5zXHUyMDFEIHRvZ2dsZWRcbiAgICAgIHRoaXMucGx1Z2luQ2hlY2tib3gub25jaGFuZ2UgPSAoKSA9PiB7XG4gICAgICAgIGNvbnN0IFdBUk5JTkdfQ0xBU1MgPSAndnZ1bmRlcmxvcmUtd2FybmluZyc7XG4gICAgICAgIGlmICghdGhpcy5wbHVnaW5DaGVja2JveC5jaGVja2VkKSB7XG4gICAgICAgICAgLy8gSWYgY29uc29sZSBvbmx5IGhhcyB0aGUgcGxhY2Vob2xkZXIsIGNsZWFyIGl0XG4gICAgICAgICAgaWYgKFxuICAgICAgICAgICAgdGhpcy5jb25zb2xlRWwuY2hpbGRyZW4ubGVuZ3RoID09PSAxICYmXG4gICAgICAgICAgICAodGhpcy5jb25zb2xlRWwuY2hpbGRyZW5bMF0gYXMgSFRNTEVsZW1lbnQpLnRleHRDb250ZW50Py5zdGFydHNXaXRoKFxuICAgICAgICAgICAgICAnPiBEZXBlbmRlbmN5IGNvbnNvbGUnXG4gICAgICAgICAgICApXG4gICAgICAgICAgKSB7XG4gICAgICAgICAgICB0aGlzLmNvbnNvbGVFbC5lbXB0eSgpO1xuICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAvLyBBZGQgYSByZWQgd2FybmluZyBsaW5lXG4gICAgICAgICAgY29uc3Qgd2FybmluZ0xpbmUgPSB0aGlzLmNvbnNvbGVFbC5jcmVhdGVEaXYoe1xuICAgICAgICAgICAgdGV4dDpcbiAgICAgICAgICAgICAgJ1dBUk5JTkc6IFRoZSBWVnVuZGVybG9yZSBUb29sa2l0IHdpbGwgbm90IGZ1bmN0aW9uIHdpdGhvdXQgYWxsIGluY2x1ZGVkIHBsdWdpbnMhIFlvdSBwcm9iYWJseSB3YW50IHRvIHJlLWNoZWNrIHRoYXQgb25lLicsXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgd2FybmluZ0xpbmUuYWRkQ2xhc3MoV0FSTklOR19DTEFTUyk7XG4gICAgICAgICAgd2FybmluZ0xpbmUuYWRkQ2xhc3MoXCJ2di1idG4td2FybmluZ1wiKTtcbiAgICBcbiAgICAgICAgICAvLyBTY3JvbGwgY29uc29sZSB0byBib3R0b21cbiAgICAgICAgICB0aGlzLmNvbnNvbGVFbC5zY3JvbGxUb3AgPSB0aGlzLmNvbnNvbGVFbC5zY3JvbGxIZWlnaHQ7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gUmVtb3ZlIG9ubHkgb3VyIHdhcm5pbmcgbGluZXMgKGxlYXZlIGFueSBvdGhlciBtZXNzYWdlcyBhbG9uZSlcbiAgICAgICAgICBjb25zdCBleGlzdGluZ1dhcm5pbmdzID0gdGhpcy5jb25zb2xlRWwucXVlcnlTZWxlY3RvckFsbChgLiR7V0FSTklOR19DTEFTU31gKTtcbiAgICAgICAgICBleGlzdGluZ1dhcm5pbmdzLmZvckVhY2goKGVsKSA9PiBlbC5yZW1vdmUoKSk7XG4gICAgXG4gICAgICAgICAgLy8gSWYgY29uc29sZSBpcyBub3cgZW1wdHksIHJlXHUyMDEwaW5zZXJ0IHRoZSBwbGFjZWhvbGRlclxuICAgICAgICAgIGlmICh0aGlzLmNvbnNvbGVFbC5jaGlsZHJlbi5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIGNvbnN0IHBoID0gdGhpcy5jb25zb2xlRWwuY3JlYXRlRGl2KHtcbiAgICAgICAgICAgICAgdGV4dDogJz4gRGVwZW5kZW5jeSBjb25zb2xlIG91dHB1dCB3aWxsIGFwcGVhciBoZXJlXHUyMDI2JyxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgT2JqZWN0LmFzc2lnbihwaC5zdHlsZSwge1xuICAgICAgICAgICAgICBvcGFjaXR5OiAnMC40JyxcbiAgICAgICAgICAgICAgZm9udFN0eWxlOiAnaXRhbGljJyxcbiAgICAgICAgICAgICAgbWFyZ2luQm90dG9tOiAnNHB4JyxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAvLyBTY3JvbGwgdG8gYm90dG9tIGFnYWluXG4gICAgICAgICAgdGhpcy5jb25zb2xlRWwuc2Nyb2xsVG9wID0gdGhpcy5jb25zb2xlRWwuc2Nyb2xsSGVpZ2h0O1xuICAgICAgICB9XG4gICAgICB9O1xuICAgIFxuICAgICAgLy8gMikgXHUyMDFDSW5jbHVkZSBEZW1vIEZpbGVzXHUyMDFEIHRvZ2dsZWRcbiAgICAgIHRoaXMuZGVtb0NoZWNrYm94Lm9uY2hhbmdlID0gKCkgPT4ge1xuICAgICAgICByZW5kZXJUcmVlKCk7XG4gICAgICB9O1xuICAgIFxuICAgICAgLy8gMykgXHUyMDFDSW5jbHVkZSBWYXVsdCBTZXR0aW5nc1x1MjAxRCB0b2dnbGVkXG4gICAgICAvLyAobm8gbmVlZCB0byByZS1yZW5kZXIgdGhlIHRyZWUsIHNpbmNlIHZhdWx0IHNldHRpbmdzIGFyZW5cdTIwMTl0IGluIHRoZSBtYW5pZmVzdCB0cmVlKVxuICAgIFxuICAgICAgLy9cbiAgICAgIGNvbnN0IGJ1dHRvblJvdyA9IHRoaXMuY29udGVudEVsLmNyZWF0ZURpdigpO1xuICAgICAgT2JqZWN0LmFzc2lnbihidXR0b25Sb3cuc3R5bGUsIHtcbiAgICAgICAgZGlzcGxheTogJ2ZsZXgnLFxuICAgICAgICBqdXN0aWZ5Q29udGVudDogJ3NwYWNlLWJldHdlZW4nLCAgIC8vIHB1c2ggbGVmdCB2cyByaWdodFxuICAgICAgICBhbGlnbkl0ZW1zOiAnY2VudGVyJyxcbiAgICAgICAgcGFkZGluZ1RvcDogJzhweCcsXG4gICAgICAgIGJvcmRlclRvcDogJzFweCBzb2xpZCB2YXIoLS1kaXZpZGVyLWNvbG9yKScsXG4gICAgICAgIG1hcmdpblRvcDogJzhweCcsXG4gICAgICB9KTtcbiAgICAgIFxuICAgICAgLy8gMSkgXHUyMDFDUmVzZXQgU2VsZWN0aW9uXHUyMDFEIG9uIHRoZSBMRUZUXG4gICAgICBjb25zdCByZXNldEJ0biA9IGJ1dHRvblJvdy5jcmVhdGVFbCgnYnV0dG9uJywgeyB0ZXh0OiAnUmVzZXQgU2VsZWN0aW9uJyB9KTtcbiAgICAgIHJlc2V0QnRuLmFkZENsYXNzKFwiY3VzdG9taW5zdGFsbC1yZXNldHNlbFwiKTtcbiAgICAgIHJlc2V0QnRuLm9uY2xpY2sgPSAoKSA9PiB7XG4gICAgICAgIC8vIDEpIEdhdGhlciBhbnkgZXhpc3RpbmcgV0FSTklORyBsaW5lc1xuICAgICAgICBjb25zdCB3YXJuaW5ncyA9IEFycmF5LmZyb20oXG4gICAgICAgICAgdGhpcy5jb25zb2xlRWwucXVlcnlTZWxlY3RvckFsbCgnLnZ2dW5kZXJsb3JlLXdhcm5pbmcnKVxuICAgICAgICApIGFzIEhUTUxFbGVtZW50W107XG4gICAgICBcbiAgICAgICAgLy8gMikgV2lwZSBvdXQgdGhlIGNvbnNvbGUgZW50aXJlbHkgKHRoaXMgcmVtb3ZlcyBhbGwgZGVwZW5kZW5jeSBsaW5lcylcbiAgICAgICAgdGhpcy5jb25zb2xlRWwuZW1wdHkoKTtcbiAgICAgIFxuICAgICAgICAvLyAzKSBSZVx1MjAxMGFwcGVuZCBlYWNoIHBsdWdpblx1MjAxMHdhcm5pbmcgYmFjayBpbnRvIHRoZSBjb25zb2xlXG4gICAgICAgIHdhcm5pbmdzLmZvckVhY2goKHdhcm5pbmdFbCkgPT4ge1xuICAgICAgICAgIHRoaXMuY29uc29sZUVsLmFwcGVuZENoaWxkKHdhcm5pbmdFbCk7XG4gICAgICAgIH0pO1xuICAgICAgXG4gICAgICAgIC8vIDQpIFJlXHUyMDEwY2hlY2sgZXZlcnkgc2luZ2xlIG1hbmlmZXN0XHUyMDEwdHJlZSBjaGVja2JveFxuICAgICAgICBPYmplY3QudmFsdWVzKHRoaXMuY2hlY2tib3hNYXApLmZvckVhY2goKGNiKSA9PiB7XG4gICAgICAgICAgY2IuY2hlY2tlZCA9IHRydWU7XG4gICAgICAgIH0pO1xuICAgICAgfTtcbiAgICAgIFxuICAgICAgXG4gICAgICAvLyAyKSBDcmVhdGUgYSByaWdodFx1MjAxMGFsaWduZWQgc3ViXHUyMDEwY29udGFpbmVyIGZvciBcdTIwMUNJbnN0YWxsIFNlbGVjdGVkXHUyMDFEICsgXHUyMDFDQ2FuY2VsXHUyMDFEXG4gICAgICBjb25zdCByaWdodEdyb3VwID0gYnV0dG9uUm93LmNyZWF0ZURpdigpO1xuICAgICAgT2JqZWN0LmFzc2lnbihyaWdodEdyb3VwLnN0eWxlLCB7XG4gICAgICAgIGRpc3BsYXk6ICdmbGV4JyxcbiAgICAgICAgZ2FwOiAnMC41ZW0nLFxuICAgICAgfSk7XG4gICAgICBcbiAgICAgIC8vIDJhKSBcdTIwMUNJbnN0YWxsIFNlbGVjdGVkXHUyMDFEIChwcmltYXJ5IENUQSlcbiAgICAgIGNvbnN0IGluc3RhbGxCdG4gPSByaWdodEdyb3VwLmNyZWF0ZUVsKCdidXR0b24nLCB7XG4gICAgICAgIHRleHQ6ICdJbnN0YWxsIFNlbGVjdGVkJyxcbiAgICAgICAgY2xzOiAnbW9kLWN0YScsXG4gICAgICB9KTtcbiAgICAgIGluc3RhbGxCdG4ub25jbGljayA9IGFzeW5jICgpID0+IHtcbiAgICAgICAgaW5zdGFsbEJ0bi5zZXRBdHRyaWJ1dGUoJ2Rpc2FibGVkJywgJycpO1xuICAgICAgXG4gICAgICAgIC8vIChpKSBDbG9zZSB0aGlzIGN1c3RvbVx1MjAxMGluc3RhbGwgbW9kYWxcbiAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgXG4gICAgICAgIC8vIChpaSkgU2hvdyBcdTIwMUNJbnN0YWxsaW5nXHUyMDI2XHUyMDFEIHBsYWNlaG9sZGVyXG4gICAgICAgIGNvbnN0IGluc3RhbGxpbmcgPSBuZXcgSW5zdGFsbGluZ01vZGFsKGFwcCk7XG4gICAgICAgIGluc3RhbGxpbmcub3BlbigpO1xuICAgICAgXG4gICAgICAgIC8vIChpaWkpIEdhdGhlciBhbGwgY2hlY2tlZCBtYW5pZmVzdCBlbnRyaWVzXG4gICAgICAgIGNvbnN0IHRvSW5zdGFsbDogeyBwYXRoOiBzdHJpbmc7IGlzRm9sZGVyOiBib29sZWFuIH1bXSA9IFtdO1xuICAgICAgICBmb3IgKGNvbnN0IFtmcCwgY2hlY2tib3hdIG9mIE9iamVjdC5lbnRyaWVzKHRoaXMuY2hlY2tib3hNYXApKSB7XG4gICAgICAgICAgaWYgKGNoZWNrYm94LmNoZWNrZWQpIHtcbiAgICAgICAgICAgIGNvbnN0IGlzRm9sZGVyID0gcGx1Z2luLm1hbmlmZXN0Q2FjaGUuZm9sZGVycy5zb21lKChmKSA9PiBmLnBhdGggPT09IGZwKTtcbiAgICAgICAgICAgIHRvSW5zdGFsbC5wdXNoKHsgcGF0aDogZnAsIGlzRm9sZGVyIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgXG4gICAgICAgIC8vIChpdikgSWYgXHUyMDFDSW5jbHVkZSBQbHVnaW5zXHUyMDFEIGlzIGNoZWNrZWQgXHUyMTkyIHB1bGwgZG93biBgLm9ic2lkaWFuL3BsdWdpbnNgICsgYGNvbW11bml0eS1wbHVnaW5zLmpzb25gXG4gICAgICAgIC8vIChpdikgSWYgXHUyMDFDSW5jbHVkZSBQbHVnaW5zXHUyMDFEIGlzIGNoZWNrZWQgXHUyMTkyIGZldGNoIHRoZSBHaXRIdWItc2lkZSAub2JzaWRpYW4vcGx1Z2lucyBhbmQgb25seSBlbnF1ZXVlXG4vLyAgICAgdGhvc2UgZm9sZGVycy9maWxlcyB0aGF0IGFyZW5cdTIwMTl0IGFscmVhZHkgaW4gdGhlIHZhdWx0LlxuaWYgKHRoaXMucGx1Z2luQ2hlY2tib3guY2hlY2tlZCkge1xuICB0cnkge1xuICAgIGNvbnN0IGFwaVVybCA9XG4gICAgLy8gTm90ZTogVGhpcyBpcyBhIEdpdEh1YiByZXBvIHBhdGgsIG5vdCB0aGUgbG9jYWwgdmF1bHQgY29uZmlnRGlyXG4gICAgICAnaHR0cHM6Ly9hcGkuZ2l0aHViLmNvbS9yZXBvcy9zbGFtd2lzZTAwMDEvVlZ1bmRlcmxvcmUtVG9vbGtpdC1GdWxsL2NvbnRlbnRzLy5vYnNpZGlhbi9wbHVnaW5zP3JlZj1tYWluJztcbiAgICBjb25zdCByZXNwID0gYXdhaXQgZmV0Y2goYXBpVXJsKTtcbiAgICBpZiAocmVzcC5vaykge1xuICAgICAgY29uc3QgcGx1Z2luRmlsZXM6IEFycmF5PHsgbmFtZTogc3RyaW5nOyB0eXBlOiAnZmlsZScgfCAnZGlyJyB9PiA9IGF3YWl0IHJlc3AuanNvbigpO1xuICAgICAgZm9yIChjb25zdCBpdGVtIG9mIHBsdWdpbkZpbGVzKSB7XG4gICAgICAgIGNvbnN0IGxvY2FsUGF0aCA9IGAke3RoaXMuYXBwLnZhdWx0LmNvbmZpZ0Rpcn0vcGx1Z2lucy8ke2l0ZW0ubmFtZX1gO1xuICAgICAgICAvLyBJZiB0aGF0IHBsdWdpbiBmb2xkZXIgKG9yIGZpbGUpIGRvZXMgX25vdF8gYWxyZWFkeSBleGlzdCBpbiB0aGUgdmF1bHQsIGVucXVldWUgaXQ6XG4gICAgICAgIGNvbnN0IGV4aXN0c0xvY2FsbHkgPSBhd2FpdCB0aGlzLmFwcC52YXVsdC5hZGFwdGVyLmV4aXN0cyhsb2NhbFBhdGgpO1xuICAgICAgICBpZiAoIWV4aXN0c0xvY2FsbHkpIHtcbiAgICAgICAgICBpZiAoaXRlbS50eXBlID09PSAnZGlyJykge1xuICAgICAgICAgICAgdG9JbnN0YWxsLnB1c2goeyBwYXRoOiBsb2NhbFBhdGgsIGlzRm9sZGVyOiB0cnVlIH0pO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0b0luc3RhbGwucHVzaCh7IHBhdGg6IGxvY2FsUGF0aCwgaXNGb2xkZXI6IGZhbHNlIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfSBjYXRjaCAoZSkge1xuICAgIC8vIEdpdEh1YiBwYXRoLCBub3QgYSB2YXVsdCBwYXRoIFx1MjAxNCB1c2VkIGZvciByZW1vdGUgcGx1Z2luIGZvbGRlciBsaXN0aW5nXG4gICAgY29uc29sZS5lcnJvcignRmFpbGVkIHRvIGVudW1lcmF0ZSAub2JzaWRpYW4vcGx1Z2lucyBmcm9tIEdpdEh1YjonLCBlKTtcbiAgfVxuXG4gIHRvSW5zdGFsbC5wdXNoKHsgcGF0aDogYCR7YXBwLnZhdWx0LmNvbmZpZ0Rpcn0vY29tbXVuaXR5LXBsdWdpbnMuanNvbmAsIGlzRm9sZGVyOiBmYWxzZSB9KTtcbn1cblxuICAgICAgXG4gICAgICAgIC8vICh2KSBJZiBcdTIwMUNJbmNsdWRlIFZhdWx0IFNldHRpbmdzXHUyMDFEIGlzIGNoZWNrZWQgXHUyMTkyIGFkZCB0aGUgZm91ciBKU09OIGZpbGVzIHVuZGVyIGAub2JzaWRpYW4vYFxuICAgICAgICBpZiAodGhpcy5zZXR0aW5nc0NoZWNrYm94LmNoZWNrZWQpIHtcbiAgICAgICAgICBjb25zdCB2YXVsdFNldHRpbmdzUGF0aHMgPSBbXG4gICAgICAgICAgICBgJHthcHAudmF1bHQuY29uZmlnRGlyfS9hcHAuanNvbmAsXG4gICAgICAgICAgICBgJHthcHAudmF1bHQuY29uZmlnRGlyfS9hcHBlYXJhbmNlLmpzb25gLFxuICAgICAgICAgICAgYCR7YXBwLnZhdWx0LmNvbmZpZ0Rpcn0vZ3JhcGguanNvbmAsXG4gICAgICAgICAgICBgJHthcHAudmF1bHQuY29uZmlnRGlyfS9ob3RrZXlzLmpzb25gLFxuICAgICAgICAgIF07XG4gICAgICAgICAgZm9yIChjb25zdCB2cyBvZiB2YXVsdFNldHRpbmdzUGF0aHMpIHtcbiAgICAgICAgICAgIHRvSW5zdGFsbC5wdXNoKHsgcGF0aDogdnMsIGlzRm9sZGVyOiBmYWxzZSB9KTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIFxuICAgICAgICAvLyAodmkpIFBlcmZvcm0gdGhlIGFjdHVhbCBpbnN0YWxsXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgYXdhaXQgcGx1Z2luLnBlcmZvcm1DdXN0b21JbnN0YWxsKHRvSW5zdGFsbCk7XG4gICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1x1Mjc0QyBwZXJmb3JtQ3VzdG9tSW5zdGFsbCgpIHRocmV3OicsIGVycik7XG4gICAgICAgICAgbmV3IE5vdGljZSgnXHUyNzRDIEN1c3RvbSBpbnN0YWxsIGZhaWxlZFx1MjAxNHNlZSBjb25zb2xlJyk7XG4gICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgaW5zdGFsbGluZy5jbG9zZSgpO1xuICAgICAgICB9XG4gICAgICB9O1xuICAgICAgXG4gICAgICAvLyAyYikgXHUyMDFDQ2FuY2VsXHUyMDFEIG9uIHRoZSByaWdodFxuICAgICAgY29uc3QgY2FuY2VsQnRuID0gcmlnaHRHcm91cC5jcmVhdGVFbCgnYnV0dG9uJywgeyB0ZXh0OiAnQ2FuY2VsJyB9KTtcbiAgICAgIGNhbmNlbEJ0bi5vbmNsaWNrID0gKCkgPT4gdGhpcy5jbG9zZSgpO1xuICAgIH1cbiAgICBcblxuICAgIG9uQ2xvc2UoKSB7XG4gICAgICB0aGlzLmNvbnRlbnRFbC5lbXB0eSgpO1xuICAgIH1cblxuICAgIC8qKiBSZWN1cnNpdmVseSB0b2dnbGUgZGVzY2VuZGFudHNcdTIwMTkgY2hlY2tlZFx1MjAxMHN0YXRlIHdpdGhvdXQgbG9nZ2luZyBlYWNoIG9uZS4gKi9cbiAgICBwcml2YXRlIHRvZ2dsZURlc2NlbmRhbnRzKG5vZGU6IFRyZWVOb2RlLCBjaGVja2VkOiBib29sZWFuKSB7XG4gICAgICBmb3IgKGNvbnN0IGNoaWxkIG9mIE9iamVjdC52YWx1ZXMobm9kZS5jaGlsZHJlbikpIHtcbiAgICAgICAgY29uc3QgY2IgPSB0aGlzLmNoZWNrYm94TWFwW2NoaWxkLmZ1bGxQYXRoXTtcbiAgICAgICAgaWYgKGNiKSBjYi5jaGVja2VkID0gY2hlY2tlZDtcbiAgICAgICAgaWYgKGNoaWxkLmlzRm9sZGVyKSB7XG4gICAgICAgICAgdGhpcy50b2dnbGVEZXNjZW5kYW50cyhjaGlsZCwgY2hlY2tlZCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBFbmZvcmNlIGRlcGVuZGVuY3kgbG9naWMgKGF1dG9cdTIwMTBjaGVjayBwcmVyZXF1aXNpdGVzLCBhdXRvXHUyMDEwdW5jaGVjayBkZXBlbmRlbnRzKS5cbiAgICAgKiBFYWNoIHRpbWUgd2UgZmxpcCBhIGJveCBcdTIwMUNiZWNhdXNlIG9mIGEgZGVwZW5kZW5jeSxcdTIwMUQgd2UgbG9nIG9uZSBsaW5lIHRvIHRoZSBjb25zb2xlLlxuICAgICAqL1xuICAgIHByaXZhdGUgZW5mb3JjZURlcGVuZGVuY2llcyhjaGFuZ2VkUGF0aDogc3RyaW5nLCBpc0NoZWNrZWQ6IGJvb2xlYW4pIHtcbiAgICAgIGNvbnN0IGNoYW5nZWRLZXkgPSBmdWxsUGF0aFRvS2V5W2NoYW5nZWRQYXRoXTtcbiAgICAgIGlmICghY2hhbmdlZEtleSkgcmV0dXJuO1xuXG4gICAgICAvLyBCdWlsZCBhIHF1aWNrIG1hcDogZnVsbFBhdGggXHUyMTkyIGRpc3BsYXlOYW1lXG4gICAgICBjb25zdCBmdWxsUGF0aFRvRGlzcGxheTogUmVjb3JkPHN0cmluZywgc3RyaW5nPiA9IHt9O1xuICAgICAgZm9yIChjb25zdCBmIG9mIHBsdWdpbi5tYW5pZmVzdENhY2hlLmZvbGRlcnMpIHtcbiAgICAgICAgZnVsbFBhdGhUb0Rpc3BsYXlbZi5wYXRoXSA9IGYuZGlzcGxheU5hbWUgPz8gZi5wYXRoLnNwbGl0KCcvJykucG9wKCkhO1xuICAgICAgfVxuICAgICAgZm9yIChjb25zdCBmIG9mIHBsdWdpbi5tYW5pZmVzdENhY2hlLmZpbGVzKSB7XG4gICAgICAgIGZ1bGxQYXRoVG9EaXNwbGF5W2YucGF0aF0gPSBmLmRpc3BsYXlOYW1lID8/IGYucGF0aC5zcGxpdCgnLycpLnBvcCgpITtcbiAgICAgIH1cbiAgICAgIGNvbnN0IGNoYW5nZWROYW1lID0gZnVsbFBhdGhUb0Rpc3BsYXlbY2hhbmdlZFBhdGhdID8/IGNoYW5nZWRQYXRoLnNwbGl0KCcvJykucG9wKCkhO1xuXG4gICAgICAvLyBTdGFydCBhIG5ldyBcdTIwMUNiYXRjaFx1MjAxRDpcbiAgICAgIHRoaXMuY3VycmVudEJhdGNoTGluZXMgPSBbXTtcblxuICAgICAgaWYgKGlzQ2hlY2tlZCkge1xuICAgICAgICAvLyBcdTI1QjYgQXV0b1x1MjAxMGNoZWNrIHByZXJlcXVpc2l0ZXNcbiAgICAgICAgY29uc3Qgc3RhY2sgPSBbY2hhbmdlZEtleV07XG4gICAgICAgIHdoaWxlIChzdGFjay5sZW5ndGgpIHtcbiAgICAgICAgICBjb25zdCBjdXIgPSBzdGFjay5wb3AoKSE7XG4gICAgICAgICAgY29uc3QgZGVwcyA9IHBsdWdpbi5yZXF1aXJlc0dyYXBoLmdldChjdXIpID8/IFtdO1xuICAgICAgICAgIGZvciAoY29uc3QgZGVwS2V5IG9mIGRlcHMpIHtcbiAgICAgICAgICAgIGNvbnN0IGRlcEVudHJ5ID1cbiAgICAgICAgICAgICAgcGx1Z2luLm1hbmlmZXN0Q2FjaGUuZmlsZXMuZmluZCgoeCkgPT4geC5rZXkgPT09IGRlcEtleSkgfHxcbiAgICAgICAgICAgICAgcGx1Z2luLm1hbmlmZXN0Q2FjaGUuZm9sZGVycy5maW5kKCh4KSA9PiB4LmtleSA9PT0gZGVwS2V5KTtcbiAgICAgICAgICAgIGlmIChkZXBFbnRyeSkge1xuICAgICAgICAgICAgICBjb25zdCBkZXBQYXRoID0gZGVwRW50cnkucGF0aDtcbiAgICAgICAgICAgICAgY29uc3QgY2IgPSB0aGlzLmNoZWNrYm94TWFwW2RlcFBhdGhdO1xuICAgICAgICAgICAgICBpZiAoY2IgJiYgIWNiLmNoZWNrZWQpIHtcbiAgICAgICAgICAgICAgICBjYi5jaGVja2VkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBjb25zdCBkZXBOYW1lID0gZnVsbFBhdGhUb0Rpc3BsYXlbZGVwUGF0aF0gPz8gZGVwUGF0aC5zcGxpdCgnLycpLnBvcCgpITtcbiAgICAgICAgICAgICAgICBjb25zdCBsaW5lRWwgPSB0aGlzLmFwcGVuZExvZ0xpbmUoXG4gICAgICAgICAgICAgICAgICBkZXBQYXRoLFxuICAgICAgICAgICAgICAgICAgYD4gJHtkZXBOYW1lfSBhdXRvbWF0aWNhbGx5IGNoZWNrZWQgKHJlcXVpcmVkIGJ5ICR7Y2hhbmdlZE5hbWV9KWBcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudEJhdGNoTGluZXMucHVzaChsaW5lRWwpO1xuICAgICAgICAgICAgICAgIHN0YWNrLnB1c2goZGVwS2V5KTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gXHUyNUI2IEF1dG9cdTIwMTB1bmNoZWNrIGRlcGVuZGVudHNcbiAgICAgICAgY29uc3QgZGVwZW5kZW50c09mID0gKHRhcmdldEtleTogc3RyaW5nKSA9PlxuICAgICAgICAgIEFycmF5LmZyb20ocGx1Z2luLnJlcXVpcmVzR3JhcGguZW50cmllcygpKVxuICAgICAgICAgICAgLmZpbHRlcigoWywgZGVwc10pID0+IGRlcHMuaW5jbHVkZXModGFyZ2V0S2V5KSlcbiAgICAgICAgICAgIC5tYXAoKFtrXSkgPT4gayk7XG5cbiAgICAgICAgY29uc3Qgc3RhY2sgPSBbY2hhbmdlZEtleV07XG4gICAgICAgIHdoaWxlIChzdGFjay5sZW5ndGgpIHtcbiAgICAgICAgICBjb25zdCBjdXIgPSBzdGFjay5wb3AoKSE7XG4gICAgICAgICAgZm9yIChjb25zdCBjaGlsZEtleSBvZiBkZXBlbmRlbnRzT2YoY3VyKSkge1xuICAgICAgICAgICAgY29uc3QgY2hpbGRFbnRyeSA9XG4gICAgICAgICAgICAgIHBsdWdpbi5tYW5pZmVzdENhY2hlLmZpbGVzLmZpbmQoKHgpID0+IHgua2V5ID09PSBjaGlsZEtleSkgfHxcbiAgICAgICAgICAgICAgcGx1Z2luLm1hbmlmZXN0Q2FjaGUuZm9sZGVycy5maW5kKCh4KSA9PiB4LmtleSA9PT0gY2hpbGRLZXkpO1xuICAgICAgICAgICAgaWYgKGNoaWxkRW50cnkpIHtcbiAgICAgICAgICAgICAgY29uc3QgY2hpbGRQYXRoID0gY2hpbGRFbnRyeS5wYXRoO1xuICAgICAgICAgICAgICBjb25zdCBjYiA9IHRoaXMuY2hlY2tib3hNYXBbY2hpbGRQYXRoXTtcbiAgICAgICAgICAgICAgaWYgKGNiICYmIGNiLmNoZWNrZWQpIHtcbiAgICAgICAgICAgICAgICBjYi5jaGVja2VkID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgY29uc3QgY2hpbGROYW1lID0gZnVsbFBhdGhUb0Rpc3BsYXlbY2hpbGRQYXRoXSA/PyBjaGlsZFBhdGguc3BsaXQoJy8nKS5wb3AoKSE7XG4gICAgICAgICAgICAgICAgY29uc3QgbGluZUVsID0gdGhpcy5hcHBlbmRMb2dMaW5lKFxuICAgICAgICAgICAgICAgICAgY2hpbGRQYXRoLFxuICAgICAgICAgICAgICAgICAgYD4gJHtjaGlsZE5hbWV9IGF1dG9tYXRpY2FsbHkgdW5jaGVja2VkIChkZXBlbmRzIG9uICR7Y2hhbmdlZE5hbWV9KWBcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudEJhdGNoTGluZXMucHVzaChsaW5lRWwpO1xuICAgICAgICAgICAgICAgIHN0YWNrLnB1c2goY2hpbGRLZXkpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHRoaXMuZmFkZUFsbEV4Y2VwdEN1cnJlbnRCYXRjaCgpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEFwcGVuZCBvbmUgXHUyMDFDbW9ub1x1MjAxRCBsaW5lIHBsdXMgYSB0aW55IHVuZG8gYnV0dG9uLiBSZXR1cm5zIHRoZSBuZXcgPGRpdj4uXG4gICAgICovXG4gICAgcHJpdmF0ZSBhcHBlbmRMb2dMaW5lKGZ1bGxQYXRoOiBzdHJpbmcsIHRleHQ6IHN0cmluZyk6IEhUTUxFbGVtZW50IHtcblxuICAgICAgLy8gKDIpIEJ1aWxkIGEgbmV3IDxkaXY+IGZvciB0aGlzIGxpbmVcbiAgICAgIGNvbnN0IGxpbmUgPSB0aGlzLmNvbnNvbGVFbC5jcmVhdGVEaXYoKTtcbiAgICAgIE9iamVjdC5hc3NpZ24obGluZS5zdHlsZSwge1xuICAgICAgICBkaXNwbGF5OiAnZmxleCcsXG4gICAgICAgIGp1c3RpZnlDb250ZW50OiAnc3BhY2UtYmV0d2VlbicsXG4gICAgICAgIGFsaWduSXRlbXM6ICdjZW50ZXInLFxuICAgICAgICBtYXJnaW46ICcycHggMCcsXG4gICAgICAgIG9wYWNpdHk6ICcxLjAnLFxuICAgICAgICB0cmFuc2l0aW9uOiAnb3BhY2l0eSAwLjJzIGVhc2UnLFxuICAgICAgfSk7XG5cbiAgICAgIC8vICgzKSBMZWZ0OiB0aGUgbWVzc2FnZSB0ZXh0XG4gICAgICBsaW5lLmNyZWF0ZVNwYW4oeyB0ZXh0IH0pO1xuXG4gICAgICAvLyAoNCkgUmlnaHQ6IFx1MjAxQ3VuZG9cdTIwMUQgYnV0dG9uXG4gICAgICBjb25zdCB1bmRvQnRuID0gbGluZS5jcmVhdGVFbCgnYnV0dG9uJywgeyB0ZXh0OiAndW5kbycsIGNsczogJ21vZC1zbWFsbCcgfSk7XG4gICAgICBPYmplY3QuYXNzaWduKHVuZG9CdG4uc3R5bGUsIHtcbiAgICAgICAgbWFyZ2luTGVmdDogJzAuNWVtJyxcbiAgICAgICAgZm9udFNpemU6ICcwLjc1ZW0nLFxuICAgICAgICBwYWRkaW5nOiAnMnB4IDRweCcsXG4gICAgICAgIGN1cnNvcjogJ3BvaW50ZXInLFxuICAgICAgfSk7XG4gICAgICB1bmRvQnRuLm9uY2xpY2sgPSAoKSA9PiB7XG4gICAgICAgIGNvbnN0IGNiID0gdGhpcy5jaGVja2JveE1hcFtmdWxsUGF0aF07XG4gICAgICAgIGlmIChjYikge1xuICAgICAgICAgIGNiLmNoZWNrZWQgPSAhY2IuY2hlY2tlZDtcbiAgICAgICAgICB0aGlzLmVuZm9yY2VEZXBlbmRlbmNpZXMoZnVsbFBhdGgsIGNiLmNoZWNrZWQpO1xuICAgICAgICAgIHRoaXMuZmFkZUFsbEV4Y2VwdEN1cnJlbnRCYXRjaCgpO1xuICAgICAgICB9XG4gICAgICB9O1xuXG4gICAgICAvLyAoNSkgU2Nyb2xsIHRoZSBjb25zb2xlIHRvIGJvdHRvbVxuICAgICAgdGhpcy5jb25zb2xlRWwuc2Nyb2xsVG9wID0gdGhpcy5jb25zb2xlRWwuc2Nyb2xsSGVpZ2h0O1xuICAgICAgcmV0dXJuIGxpbmU7XG4gICAgfVxuXG4gICAgLyoqIEZhZGUgb3V0IGV2ZXJ5IGNvbnNvbGUgbGluZSB0aGF0IGlzICpub3QqIHBhcnQgb2YgY3VycmVudEJhdGNoTGluZXMuICovXG4gICAgcHJpdmF0ZSBmYWRlQWxsRXhjZXB0Q3VycmVudEJhdGNoKCkge1xuICAgICAgY29uc3QgdG90YWwgPSB0aGlzLmNvbnNvbGVFbC5jaGlsZHJlbi5sZW5ndGg7XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRvdGFsOyBpKyspIHtcbiAgICAgICAgY29uc3QgY2hpbGQgPSB0aGlzLmNvbnNvbGVFbC5jaGlsZHJlbltpXSBhcyBIVE1MRWxlbWVudDtcbiAgICAgICAgaWYgKHRoaXMuY3VycmVudEJhdGNoTGluZXMuaW5jbHVkZXMoY2hpbGQpKSB7XG4gICAgICAgICAgY2hpbGQuYWRkQ2xhc3MoXCJjdXN0b21pbnN0YWxsLWNvbnNvbGVmYWRlLWFcIik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY2hpbGQuYWRkQ2xhc3MoXCJjdXN0b21pbnN0YWxsLWNvbnNvbGVmYWRlLWJcIik7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvLyAoNCkgRmluYWxseSwgb3BlbiB0aGUgbW9kYWxcbiAgbmV3IEN1c3RvbUluc3RhbGxNb2RhbChhcHApLm9wZW4oKTtcbn1cbiIsICJpbXBvcnQgeyBWYXVsdCB9IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCB7IGNyZWF0ZUhhc2ggfSBmcm9tICdjcnlwdG8nO1xuXG5leHBvcnQgaW50ZXJmYWNlIFRvb2xraXRGaWxlQ2FjaGVFbnRyeSB7XG5cdGhhc2g6IHN0cmluZztcblx0Z2l0aHViUGF0aDogc3RyaW5nO1xufVxuXG5leHBvcnQgdHlwZSBUb29sa2l0RmlsZUNhY2hlID0gUmVjb3JkPHN0cmluZywgVG9vbGtpdEZpbGVDYWNoZUVudHJ5PjsgLy8gdmF1bHRQYXRoID0+IHtoYXNoLCBnaXRodWJQYXRofVxuXG5leHBvcnQgY2xhc3MgVG9vbGtpdEZpbGVDYWNoZU1hbmFnZXIge1xuXHRwcml2YXRlIHZhdWx0OiBWYXVsdDtcblx0cHJpdmF0ZSBjYWNoZTogVG9vbGtpdEZpbGVDYWNoZTtcblx0cHJpdmF0ZSBzYXZlOiAoKSA9PiBQcm9taXNlPHZvaWQ+O1xuXG5cdGNvbnN0cnVjdG9yKHZhdWx0OiBWYXVsdCwgaW5pdGlhbENhY2hlOiBUb29sa2l0RmlsZUNhY2hlIHwgdW5kZWZpbmVkLCBzYXZlQ2FsbGJhY2s6ICgpID0+IFByb21pc2U8dm9pZD4pIHtcblx0XHR0aGlzLnZhdWx0ID0gdmF1bHQ7XG5cdFx0dGhpcy5jYWNoZSA9IGluaXRpYWxDYWNoZSB8fCB7fTtcblx0XHR0aGlzLnNhdmUgPSBzYXZlQ2FsbGJhY2s7XG5cdH1cblxuXHRwcml2YXRlIGhhc2hDb250ZW50KGNvbnRlbnQ6IHN0cmluZyk6IHN0cmluZyB7XG5cdFx0cmV0dXJuIGNyZWF0ZUhhc2goJ3NoYTI1NicpLnVwZGF0ZShjb250ZW50KS5kaWdlc3QoJ2hleCcpO1xuXHR9XG5cblx0YXN5bmMgaXNVcFRvRGF0ZSh2YXVsdFBhdGg6IHN0cmluZyk6IFByb21pc2U8Ym9vbGVhbj4ge1xuXHRcdC8vY29uc29sZS5sb2coYFx1RDgzRFx1REQwRCBDaGVja2luZyBpZiBcIiR7dmF1bHRQYXRofVwiIGlzIHVwIHRvIGRhdGUuYCk7XG5cdFxuXHRcdGNvbnN0IGVudHJ5ID0gdGhpcy5jYWNoZVt2YXVsdFBhdGhdO1xuXHRcdGlmICghZW50cnkpIHtcblx0XHRcdC8vY29uc29sZS5sb2coYFx1Mjc0QyBObyBjYWNoZWQgaGFzaCBmb3VuZCBmb3I6ICR7dmF1bHRQYXRofWApO1xuXHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdH1cblx0XG5cdFx0Y29uc3QgZXhpc3RzID0gYXdhaXQgdGhpcy52YXVsdC5hZGFwdGVyLmV4aXN0cyh2YXVsdFBhdGgpO1xuXHRcdGlmICghZXhpc3RzKSB7XG5cdFx0XHQvL2NvbnNvbGUubG9nKGBcdTI3NEMgRmlsZSBkb2VzIG5vdCBleGlzdCBpbiB2YXVsdDogJHt2YXVsdFBhdGh9YCk7XG5cdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0fVxuXHRcblx0XHRjb25zdCBjb250ZW50ID0gYXdhaXQgdGhpcy52YXVsdC5hZGFwdGVyLnJlYWQodmF1bHRQYXRoKTtcblx0XHRjb25zdCBsb2NhbEhhc2ggPSB0aGlzLmhhc2hDb250ZW50KGNvbnRlbnQpO1xuXHRcdGNvbnN0IGlzU2FtZSA9IGxvY2FsSGFzaCA9PT0gZW50cnkuaGFzaDtcblx0XG5cdFx0Ly9jb25zb2xlLmxvZyhgXHVEODNEXHVERDIyIExvY2FsIGhhc2g6ICAke2xvY2FsSGFzaH1gKTtcblx0XHQvL2NvbnNvbGUubG9nKGBcdUQ4M0RcdURDRTYgQ2FjaGVkIGhhc2g6ICR7ZW50cnkuaGFzaH1gKTtcblx0XHQvL2NvbnNvbGUubG9nKGlzU2FtZSA/IGBcdTI3MDUgRmlsZSBpcyB1cCB0byBkYXRlLmAgOiBgXHVEODNEXHVERDAxIEZpbGUgbmVlZHMgdXBkYXRlLmApO1xuXHRcblx0XHRyZXR1cm4gaXNTYW1lO1xuXHR9XG5cdFxuXG5cdGFzeW5jIHVwZGF0ZUNhY2hlKHZhdWx0UGF0aDogc3RyaW5nLCBjb250ZW50OiBzdHJpbmcsIGdpdGh1YlBhdGg6IHN0cmluZywgc2F2ZU5vdzogYm9vbGVhbiA9IHRydWUpIHtcblx0XHR0aGlzLmNhY2hlW3ZhdWx0UGF0aF0gPSB7XG5cdFx0XHRoYXNoOiB0aGlzLmhhc2hDb250ZW50KGNvbnRlbnQpLFxuXHRcdFx0Z2l0aHViUGF0aFxuXHRcdH07XG5cdFx0aWYgKHNhdmVOb3cpIGF3YWl0IHRoaXMuc2F2ZSgpO1xuXHR9XG5cblx0Z2V0Q2FjaGUoKTogVG9vbGtpdEZpbGVDYWNoZSB7XG5cdFx0cmV0dXJuIHRoaXMuY2FjaGU7XG5cdH1cblxuXHRnZXRUcmFja2VkRmlsZXMoKTogc3RyaW5nW10ge1xuXHRcdHJldHVybiBPYmplY3Qua2V5cyh0aGlzLmNhY2hlKTtcblx0fVxuXG5cdGdldEdpdEh1YlBhdGgodmF1bHRQYXRoOiBzdHJpbmcpOiBzdHJpbmcgfCB1bmRlZmluZWQge1xuXHRcdHJldHVybiB0aGlzLmNhY2hlW3ZhdWx0UGF0aF0/LmdpdGh1YlBhdGg7XG5cdH1cblxuXHRyZXNldENhY2hlKCkge1xuXHRcdHRoaXMuY2FjaGUgPSB7fTtcblx0fVxuXG5cdGFzeW5jIHJlbW92ZUZyb21DYWNoZSh2YXVsdFBhdGg6IHN0cmluZykge1xuXHRcdGRlbGV0ZSB0aGlzLmNhY2hlW3ZhdWx0UGF0aF07XG5cdFx0YXdhaXQgdGhpcy5zYXZlKCk7XG5cdH1cbn1cbiIsICJpbXBvcnQgeyBub3JtYWxpemVQYXRoLCBWYXVsdCwgQXBwLCBOb3RpY2UgfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgeyBkaXJuYW1lLCBiYXNlbmFtZSwgam9pbiB9IGZyb20gJ3BhdGgnO1xuaW1wb3J0IHsgcHJvbWlzZXMgYXMgZnMgfSBmcm9tICdmcyc7XG5cbmV4cG9ydCBjbGFzcyBCYWNrdXBNYW5hZ2VyIHtcbiAgY29uc3RydWN0b3IocHJpdmF0ZSBhcHA6IEFwcCkge31cblxuICAvKipcbiAgICogTWlycm9yIGV2ZXJ5IHZhdWx0IGZpbGUgKGV4Y2x1ZGluZyAub2JzaWRpYW4gJiBiYWNrdXBzKSBpbnRvIGEgdGltZXN0YW1wZWQgZm9sZGVyLFxuICAgKiB0aGVuIHBydW5lIHRvIGtlZXAgb25seSB0aGUgbGF0ZXN0IE4gZnVsbCBzbmFwc2hvdHMuXG4gICAqIEBwYXJhbSBsYWJlbCBPcHRpb25hbCBzdWZmaXggZm9yIHRoZSBiYWNrdXAgZm9sZGVyIG5hbWVcbiAgICogQHBhcmFtIG1heEZ1bGxCYWNrdXBzIE51bWJlciBvZiBmdWxsIHNuYXBzaG90cyB0byByZXRhaW4gKGRlZmF1bHQ6IDUpXG4gICAqL1xuICBhc3luYyBiYWNrdXBWYXVsdE1pcnJvcihsYWJlbD86IHN0cmluZywgbWF4RnVsbEJhY2t1cHM6IG51bWJlciA9IDUpOiBQcm9taXNlPHN0cmluZz4ge1xuICAgIGNvbnN0IHRzID0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpLnJlcGxhY2UoL1s6Ll0vZywgJy0nKTtcbiAgICBjb25zdCB0YWcgPSBsYWJlbCA/IGAtJHtsYWJlbH1gIDogJyc7XG4gICAgY29uc3QgYmFzZSA9IG5vcm1hbGl6ZVBhdGgoYC52YXVsdC1iYWNrdXBzL2Z1bGwvJHt0c30ke3RhZ31gKTtcblxuICAgIGF3YWl0IHRoaXMuZW5zdXJlRm9sZGVyRXhpc3RzKGJhc2UpO1xuXG4gICAgZm9yIChjb25zdCBmaWxlIG9mIHRoaXMuYXBwLnZhdWx0LmdldEZpbGVzKCkpIHtcbiAgICAgIGlmIChmaWxlLnBhdGguc3RhcnRzV2l0aCgnLnZhdWx0LWJhY2t1cHMvJykgfHwgZmlsZS5wYXRoLnN0YXJ0c1dpdGgoYCR7dGhpcy5hcHAudmF1bHQuY29uZmlnRGlyfS9gKSkge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IGNvbnRlbnQgPSBhd2FpdCB0aGlzLmFwcC52YXVsdC5yZWFkKGZpbGUpO1xuICAgICAgY29uc3QgdGFyZ2V0ID0gbm9ybWFsaXplUGF0aChgJHtiYXNlfS8ke2ZpbGUucGF0aH1gKTtcbiAgICAgIGF3YWl0IHRoaXMuZW5zdXJlRm9sZGVyRXhpc3RzKGRpcm5hbWUodGFyZ2V0KSk7XG4gICAgICBhd2FpdCB0aGlzLmFwcC52YXVsdC5jcmVhdGUodGFyZ2V0LCBjb250ZW50KTtcbiAgICB9XG5cbiAgICAvLyBjb25zb2xlLmxvZygnW0JhY2t1cE1hbmFnZXJdIE1pcnJvciBiYWNrdXAgY29tcGxldGUuIFBydW5pbmcgb2xkIGJhY2t1cHMuLi4nKTtcbiAgICBhd2FpdCB0aGlzLnBydW5lRnVsbEJhY2t1cHMoYmFzZSwgbWF4RnVsbEJhY2t1cHMpO1xuICAgIG5ldyBOb3RpY2UoXCJcdTI3MDUgQmFja3VwIGNvbXBsZXRlIVwiKTtcbiAgICByZXR1cm4gYmFzZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBMZWdhY3kgYWxpYXMgZm9yIG1pcnJvci1iYXNlZCBiYWNrdXBzXG4gICAqL1xuICBhc3luYyBiYWNrdXBWYXVsdFRvWmlwKGxhYmVsPzogc3RyaW5nKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgICByZXR1cm4gdGhpcy5iYWNrdXBWYXVsdE1pcnJvcihsYWJlbCk7XG4gIH1cblxuICAvKipcbiAgICogRGVsZXRlcyBvbGRlc3QgZnVsbCBiYWNrdXAgZm9sZGVycywga2VlcGluZyBvbmx5IHRoZSBtb3N0IHJlY2VudCBga2VlcGAgc25hcHNob3RzLlxuICAgKi9cbiAgcHJpdmF0ZSBhc3luYyBwcnVuZUZ1bGxCYWNrdXBzKGN1cnJlbnRQYXRoOiBzdHJpbmcsIGtlZXA6IG51bWJlcikge1xuICAgIGNvbnN0IHJvb3QgPSBub3JtYWxpemVQYXRoKCcudmF1bHQtYmFja3Vwcy9mdWxsJyk7XG4gICAvLyBjb25zb2xlLmxvZyhgW0JhY2t1cE1hbmFnZXJdIHBydW5lRnVsbEJhY2t1cHM6IHJvb3Q9JHtyb290fSwga2VlcD0ke2tlZXB9YCk7XG5cbiAgICAvLyBlbnN1cmUgdGhlIHJvb3QgZXhpc3RzXG4gICAgYXdhaXQgdGhpcy5lbnN1cmVGb2xkZXJFeGlzdHMocm9vdCk7XG4gICAgaWYgKCEoYXdhaXQgdGhpcy5hcHAudmF1bHQuYWRhcHRlci5leGlzdHMocm9vdCkpKSB7XG4gICAgIC8vIGNvbnNvbGUubG9nKCdbQmFja3VwTWFuYWdlcl0gcHJ1bmVGdWxsQmFja3Vwczogcm9vdCBmb2xkZXIgbm90IGZvdW5kJyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gZ2V0IGZvbGRlciBuYW1lc1xuICAgIGNvbnN0IGxpc3RpbmcgPSBhd2FpdCB0aGlzLmFwcC52YXVsdC5hZGFwdGVyLmxpc3Qocm9vdCk7XG4gICAgY29uc3QgcmF3Rm9sZGVyczogc3RyaW5nW10gPSBBcnJheS5pc0FycmF5KGxpc3RpbmcpXG4gICAgICA/IGxpc3RpbmcgYXMgc3RyaW5nW11cbiAgICAgIDogJ2ZvbGRlcnMnIGluIGxpc3RpbmdcbiAgICAgID8gKGxpc3RpbmcgYXMgYW55KS5mb2xkZXJzXG4gICAgICA6IFtdO1xuICAgIGNvbnN0IGZvbGRlcnMgPSByYXdGb2xkZXJzLm1hcChmID0+IGJhc2VuYW1lKGYpKTtcbiAgICAvL2NvbnNvbGUubG9nKCdbQmFja3VwTWFuYWdlcl0gcHJ1bmVGdWxsQmFja3VwczogZm9sZGVycyAoYmFzZW5hbWVzKTonLCBmb2xkZXJzKTtcblxuICAgIC8vIHNvcnQgZGVzY2VuZGluZyBzbyBuZXdlc3QgZmlyc3RcbiAgICBjb25zdCBzb3J0ZWQgPSBbLi4uZm9sZGVyc10uc29ydCgoYSwgYikgPT4gYi5sb2NhbGVDb21wYXJlKGEpKTtcbiAgICAvL2NvbnNvbGUubG9nKCdbQmFja3VwTWFuYWdlcl0gcHJ1bmVGdWxsQmFja3Vwczogc29ydGVkOicsIHNvcnRlZCk7XG5cbiAgICAvLyBjb21wdXRlIGZpbGVzeXN0ZW0gcm9vdCB0byByZW1vdmUgZnJvbVxuICAgIGNvbnN0IGFkYXB0ZXJBbnkgPSB0aGlzLmFwcC52YXVsdC5hZGFwdGVyIGFzIGFueTtcbiAgICBjb25zdCBmc1Jvb3QgPSBhZGFwdGVyQW55LmJhc2VQYXRoID8gam9pbihhZGFwdGVyQW55LmJhc2VQYXRoLCByb290KSA6IG51bGw7XG4gICAgaWYgKCFmc1Jvb3QpIHtcbiAgICAgIC8vY29uc29sZS53YXJuKCdbQmFja3VwTWFuYWdlcl0gcHJ1bmVGdWxsQmFja3VwczogY2Fubm90IGRldGVybWluZSBGUyByb290LCBza2lwcGluZyBwcnVuZScpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIHJlbW92ZSBvbGQgc25hcHNob3RzIGJleW9uZCBga2VlcGBcbiAgICBmb3IgKGxldCBpID0ga2VlcDsgaSA8IHNvcnRlZC5sZW5ndGg7IGkrKykge1xuICAgICAgY29uc3QgbmFtZSA9IHNvcnRlZFtpXTtcbiAgICAgIGNvbnN0IHZhdWx0UGF0aCA9IG5vcm1hbGl6ZVBhdGgoYCR7cm9vdH0vJHtuYW1lfWApO1xuICAgICAgaWYgKHZhdWx0UGF0aCA9PT0gY3VycmVudFBhdGgpIHtcbiAgICAgICAvLyBjb25zb2xlLmxvZyhgW0JhY2t1cE1hbmFnZXJdIHBydW5lRnVsbEJhY2t1cHM6IHNraXBwaW5nIGN1cnJlbnQgJHtuYW1lfWApO1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICAgIC8vY29uc29sZS5sb2coYFtCYWNrdXBNYW5hZ2VyXSBwcnVuZUZ1bGxCYWNrdXBzOiByZW1vdmluZyBGUyBmb2xkZXI6ICR7bmFtZX1gKTtcbiAgICAgIGNvbnN0IHJlbW92ZVBhdGggPSBqb2luKGZzUm9vdCwgbmFtZSk7XG4gICAgICB0cnkge1xuICAgICAgICBhd2FpdCBmcy5ybShyZW1vdmVQYXRoLCB7IHJlY3Vyc2l2ZTogdHJ1ZSwgZm9yY2U6IHRydWUgfSk7XG4gICAgICAgIC8vY29uc29sZS5sb2coYFtCYWNrdXBNYW5hZ2VyXSBwcnVuZUZ1bGxCYWNrdXBzOiByZW1vdmVkICR7cmVtb3ZlUGF0aH1gKTtcbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAvLyBjb25zb2xlLmVycm9yKGBbQmFja3VwTWFuYWdlcl0gcHJ1bmVGdWxsQmFja3VwczogZmFpbGVkIHRvIHJlbW92ZSAke3JlbW92ZVBhdGh9YCwgZSk7XG4gICAgICB9XG4gICAgICAvLyBhbHNvIGNsZWFuIHVwIHZhdWx0IGluZGV4XG4gICAgICBjb25zdCBhZiA9IHRoaXMuYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aCh2YXVsdFBhdGgpO1xuICAgICAgaWYgKGFmKSB7XG4gICAgICAgIGF3YWl0IHRoaXMuYXBwLmZpbGVNYW5hZ2VyLnRyYXNoRmlsZShhZik7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFJlY3Vyc2l2ZWx5IGVuc3VyZXMgdGhhdCBhIGRpcmVjdG9yeSBleGlzdHMgaW4gdGhlIHZhdWx0LlxuICAgKi9cbiAgcHJpdmF0ZSBhc3luYyBlbnN1cmVGb2xkZXJFeGlzdHMoZm9sZGVyUGF0aDogc3RyaW5nKSB7XG4gICAgaWYgKCFmb2xkZXJQYXRoIHx8IChhd2FpdCB0aGlzLmFwcC52YXVsdC5hZGFwdGVyLmV4aXN0cyhmb2xkZXJQYXRoKSkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3QgcGFyZW50ID0gZGlybmFtZShmb2xkZXJQYXRoKTtcbiAgICBhd2FpdCB0aGlzLmVuc3VyZUZvbGRlckV4aXN0cyhwYXJlbnQpO1xuICAgIGF3YWl0IHRoaXMuYXBwLnZhdWx0LmNyZWF0ZUZvbGRlcihmb2xkZXJQYXRoKTtcbiAgfVxufVxuIl0sCiAgIm1hcHBpbmdzIjogIjs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLElBQUFBLG1CQVVPOzs7QUNWUCxJQUFBQyxtQkFpQk87OztBQ2hCUCxJQUFBQyxtQkFBbUU7OztBQ3VCMUQsSUFBTSxxQkFBZ0M7QUFBQSxFQUMzQztBQUFBLElBQ0UsSUFBSTtBQUFBLElBQ0osT0FBTztBQUFBLElBQ1AsTUFBTTtBQUFBLElBQ04sUUFBUTtBQUFBLElBQ1IsV0FBVztBQUFBLEVBQ2I7QUFBQSxFQUNBO0FBQUEsSUFDRSxJQUFJO0FBQUEsSUFDSixPQUFPO0FBQUEsSUFDUCxNQUFNO0FBQUEsSUFDTixRQUFRO0FBQUEsSUFDUixXQUFXO0FBQUEsSUFDWCxZQUFZLENBQUMsRUFBRTtBQUFBLEVBQ2pCO0FBQUEsRUFDQTtBQUFBLElBQ0UsSUFBSTtBQUFBLElBQ0osT0FBTztBQUFBLElBQ1AsTUFBTTtBQUFBLElBQ04sUUFBUTtBQUFBLElBQ1IsV0FBVztBQUFBLEVBQ2I7QUFJRjs7O0FDbERGO0FBQUE7QUFBQTtBQUFBO0FBQUEsc0JBQW1DOzs7QUNHbkMsSUFBTSxrQkFBMEM7QUFBQTtBQUFBLEVBRTlDLEtBQUs7QUFBQSxFQUNMLElBQUs7QUFBQSxFQUNMLEtBQUs7QUFBQTtBQUFBLEVBR0wsS0FBTTtBQUFBLEVBQ04sTUFBTTtBQUFBLEVBQ04sTUFBTTtBQUFBLEVBQ04sT0FBTztBQUFBLEVBQ1AsS0FBTTtBQUFBLEVBQ04sS0FBTTtBQUFBLEVBQ04sT0FBTTtBQUFBLEVBQ04sS0FBTTtBQUFBO0FBQUEsRUFHTixLQUFLO0FBQUEsRUFDTCxLQUFLO0FBQUEsRUFDTCxLQUFLO0FBQUEsRUFDTCxLQUFLO0FBQUEsRUFDTCxNQUFLO0FBQUEsRUFDTCxLQUFLO0FBQUEsRUFDTCxNQUFLO0FBQUE7QUFBQSxFQUdMLEtBQVU7QUFBQSxFQUNWLElBQVU7QUFBQSxFQUNWLFdBQVU7QUFBQSxFQUNWLEtBQVU7QUFBQSxFQUNWLE1BQVU7QUFBQSxFQUNWLEtBQVU7QUFBQSxFQUNWLEtBQVU7QUFBQSxFQUNWLE9BQVU7QUFBQSxFQUNWLFFBQVU7QUFBQSxFQUNWLEtBQVU7QUFBQSxFQUNWLE1BQVU7QUFBQSxFQUNWLEtBQVU7QUFBQSxFQUNWLE9BQVU7QUFBQSxFQUNWLE9BQVU7QUFBQSxFQUNWLGFBQVk7QUFBQSxFQUNaLGFBQVk7QUFBQSxFQUNaLEtBQVU7QUFBQSxFQUNWLE1BQVU7QUFBQSxFQUNWLE1BQVU7QUFBQSxFQUNWLEtBQVU7QUFBQSxFQUNWLE1BQVU7QUFBQSxFQUNWLE9BQVU7QUFBQSxFQUNWLE1BQVU7QUFBQSxFQUNWLEtBQVU7QUFBQSxFQUNWLFFBQVU7QUFBQSxFQUNWLEtBQVU7QUFBQSxFQUNWLE1BQVU7QUFBQSxFQUNWLEtBQVU7QUFBQSxFQUNWLE9BQVU7QUFBQSxFQUNWLEtBQVU7QUFBQSxFQUNWLE1BQVU7QUFBQSxFQUNWLFFBQVU7QUFBQSxFQUNWLElBQVU7QUFBQSxFQUNWLEtBQVU7QUFBQSxFQUNWLFFBQVU7QUFBQSxFQUNWLE9BQVU7QUFBQSxFQUNWLEtBQVU7QUFBQSxFQUNWLE1BQVU7QUFBQSxFQUNWLE9BQVU7QUFBQSxFQUNWLEtBQVU7QUFBQSxFQUNWLEtBQVU7QUFBQSxFQUNWLEtBQVU7QUFBQSxFQUNWLE1BQVU7QUFBQSxFQUNWLEtBQVU7QUFBQSxFQUNWLE1BQVU7QUFBQSxFQUNWLEtBQVU7QUFBQSxFQUNWLElBQVU7QUFBQSxFQUNWLE1BQVU7QUFBQSxFQUNWLE9BQVU7QUFBQSxFQUNWLE1BQVU7QUFBQSxFQUNWLEtBQVU7QUFBQSxFQUNWLFFBQVU7QUFBQSxFQUNWLEtBQVU7QUFBQSxFQUNWLElBQVU7QUFBQSxFQUNWLEtBQVU7QUFBQSxFQUNWLEtBQVU7QUFBQSxFQUNWLElBQVU7QUFBQSxFQUNWLEtBQVU7QUFBQSxFQUNWLEtBQVU7QUFBQSxFQUNWLFdBQVk7QUFBQSxFQUNaLFVBQVk7QUFBQSxFQUNaLEtBQVU7QUFBQSxFQUNWLE9BQVU7QUFBQSxFQUNWLE1BQVU7QUFBQSxFQUNWLFdBQVk7QUFBQSxFQUNaLFNBQVU7QUFBQSxFQUNWLFlBQVk7QUFBQSxFQUNaLGFBQVk7QUFBQSxFQUNaLEtBQVU7QUFBQSxFQUNWLE9BQVU7QUFBQSxFQUNWLFFBQVU7QUFBQSxFQUNWLEtBQVU7QUFBQSxFQUNW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LElBQUksRUFBRSxNQUFNLENBQUMsRUFBRSxZQUFZO0FBQzVEO0FBR08sSUFBTUMsbUJBQXlDO0FBQUEsRUFDcEQsR0FBRztBQUFBLEVBQ0gsR0FBRztBQUFBLEVBQ0gsR0FBRztBQUFBLEVBQ0gsR0FBRztBQUFBLEVBQ0gsR0FBRztBQUFBLEVBQ0gsR0FBRztBQUFBLEVBQ0gsR0FBRztBQUFBLEVBQ0gsR0FBRztBQUFBLEVBQ0gsR0FBRztBQUFBLEVBQ0gsR0FBRztBQUFBLEVBQ0gsR0FBRztBQUFBLEVBQ0gsR0FBRztBQUFBLEVBQ0gsR0FBRztBQUNMO0FBRU8sSUFBTUMsZ0JBQXNDO0FBQUEsRUFDakQsR0FBRztBQUFBLEVBQ0gsR0FBRztBQUFBLEVBQ0gsR0FBRztBQUFBLEVBQ0gsR0FBRztBQUFBLEVBQ0gsR0FBRztBQUFBLEVBQ0gsR0FBRztBQUFBLEVBQ0gsTUFBTTtBQUFBLEVBQ04sR0FBRztBQUFBLEVBQ0gsR0FBRztBQUNMO0FBRU8sSUFBTUMsaUJBQXVDO0FBQUEsRUFDbEQsSUFBSztBQUFBLEVBQ0wsSUFBSztBQUFBLEVBQ0wsR0FBSztBQUFBLEVBQ0wsV0FBVztBQUFBLEVBQ1gsVUFBVTtBQUFBLEVBQ1YsSUFBSztBQUFBLEVBQ0wsS0FBSztBQUFBLEVBQ0wsSUFBSztBQUFBLEVBQ0wsR0FBSztBQUFBLEVBQ0wsSUFBSztBQUFBLEVBQ0wsSUFBSztBQUFBLEVBQ0wsYUFBYTtBQUFBLEVBQ2IsS0FBSztBQUFBLEVBQ0wsSUFBSztBQUFBLEVBQ0wsR0FBSztBQUFBLEVBQ0wsSUFBSztBQUFBLEVBQ0wsS0FBSztBQUFBLEVBQ0wsS0FBSztBQUFBLEVBQ0wsR0FBSztBQUFBLEVBQ0wsR0FBSztBQUFBLEVBQ0wsSUFBSztBQUFBLEVBQ0wsSUFBSztBQUFBLEVBQ0wsR0FBSztBQUFBLEVBQ0wsSUFBSztBQUFBLEVBQ0wsS0FBSztBQUFBLEVBQ0wsS0FBSztBQUFBLEVBQ0wsR0FBSztBQUFBLEVBQ0wsS0FBSztBQUFBLEVBQ0wsSUFBSztBQUFBLEVBQ0wsS0FBSztBQUFBLEVBQ0wsSUFBSztB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ZGlhbiIsICJpbXBvcnRfb2JzaWRpYW4iLCAiaW1wb3J0X29ic2lkaWFuIiwgImNhcGl0YWxpemVGaXJzdCIsICJTSVpFX01BUCIsICJ1bmlmaWVkU2tpbGxzIiwgIlNJWkVfTUFQIiwgInVuaWZpZWRTa2lsbHMiLCAiZmVhdHVyZXNCeUxldmVsIiwgImNvZGUiLCAiY2FwIiwgImltcG9ydF9vYnNpZGlhbiIsICJpbnN0YWxsZXJfZXhwb3J0cyIsICJpbXBvcnRFZGl0aW9uRGF0YSIsICJpbXBvcnRfb2JzaWRpYW4iLCAiU09VUkNFX05BTUVfTUFQIiwgImdldEZ1bGxTb3VyY2VOYW1lIiwgInJlcGxhY2U1ZVRhZ3MiLCAiY2FwaXRhbGl6ZUVhY2giLCAiY2FwaXRhbGl6ZSIsICJyZW5kZXJNYXJrZG93blRhYmxlIiwgInJlcGxhY2U1ZVRhZ3MiLCAiZm9ybWF0RW50cnkiLCAicmVwbGFjZTVlVGFncyIsICJyZW5kZXJNYXJrZG93blRhYmxlIiwgInNraXBwZWRNb25zdGVycyIsICJTSVpFX01BUCIsICJBTElHTk1FTlRfTUFQIiwgImNhcGl0YWxpemVGaXJzdCIsICJmb3JtYXRTaXplQWJicmV2IiwgImZvcm1hdEFsaWdubWVudEFiYnJldiIsICJSQVdfTlBDUyIsICJOT1JNQUxJWkVEX05QQ19OQU1FUyIsICJub3JtYWxpemVOYW1lIiwgImNhdGVnb3JpemVDcmVhdHVyZSIsICJyZW5kZXJBYmlsaXRpZXNUYWJsZSIsICJyZW5kZXJFbnRyeSIsICJyZXBsYWNlNWVUYWdzIiwgInBhcnNlQmVzdGlhcnlGaWxlIiwgImdldEZ1bGxTb3VyY2VOYW1lIiwgImJ1aWxkRk0iLCAiQkVTVElBUllfTUVUQV9ERUZTIiwgInNlcmlhbGl6ZUZyb250bWF0dGVyIiwgIkZNX0ZJRUxEUyIsICJjYXBpdGFsaXplRmlyc3QiLCAiREFNQUdFX1RZUEVfTUFQIiwgIlBST1BFUlRZX01BUCIsICJJVEVNX1RZUEVfTUFQIiwgImNvZGVGb2xkZXJNYXAiLCAicGFyc2VJdGVtc0ZpbGUiLCAiYnVpbGRGTSIsICJJVEVNX01FVEFfREVGUyIsICJGTV9GSUVMRFMiLCAic2VyaWFsaXplRnJvbnRtYXR0ZXIiLCAicmVwbGFjZTVlVGFncyIsICJjYXAiLCAiQUJJTElUWV9GVUxMIiwgIlNJWkVfTUFQIiwgIkZNX0ZJRUxEUyIsICJ1bmlmaWVkQXJtb3JQcm9mcyIsICJ1bmlmaWVkV2VhcG9uUHJvZnMiLCAicmVwbGFjZTVlVGFncyIsICJ1bmlmaWVkU2F2ZXMiLCAidW5pZmllZFNraWxscyIsICJ1bmlmaWVkVG9vbFByb2ZzIiwgIkFMTF9GSUVMRF9ERUZTIiwgImdldEZ1bGxTb3VyY2VOYW1lIiwgIlNLSUxMX09QVElPTlMiLCAiU0NIT09MX01BUCIsICJmb3JtYXRUaW1lIiwgImZvcm1hdFJhbmdlIiwgImZvcm1hdER1cmF0aW9uIiwgImZvcm1hdEFsaWdubWVudEFiYnJldiIsICJJVEVNX1RZUEVfTUFQIiwgIlBST1BFUlRZX01BUCIsICJidWlsZEZNIiwgInNlcmlhbGl6ZUZyb250bWF0dGVyIiwgIlNQRUxMX0tFWVMiLCAiU1BFQ0lFU19LRVlTIiwgIklURU1fS0VZUyIsICJCRVNUSUFSWV9LRVlTIiwgIkNMQVNTX0tFWVMiLCAiQkFDS0dST1VORF9LRVlTIiwgIkZFQVRTX0tFWVMiLCAiU1BFTExfTUVUQV9ERUZTIiwgIkFMTF9GSUVMRF9ERUZTIiwgIlNQRUNJRVNfTUVUQV9ERUZTIiwgIklURU1fTUVUQV9ERUZTIiwgIkJFU1RJQVJZX01FVEFfREVGUyIsICJDTEFTU19NRVRBX0RFRlMiLCAiQkFDS0dST1VORF9NRVRBX0RFRlMiLCAiRkVBVFNfTUVUQV9ERUZTIiwgIlNDSE9PTF9NQVAiLCAib3JkaW5hbCIsICJmb3JtYXRSYW5nZSIsICJmb3JtYXRUaW1lIiwgImZvcm1hdER1cmF0aW9uIiwgImZvcm1hdENvbXBvbmVudHMiLCAicGFyc2VTcGVsbHNGaWxlIiwgImdldEZ1bGxTb3VyY2VOYW1lIiwgImJ1aWxkRk0iLCAiU1BFTExfTUVUQV9ERUZTIiwgInNlcmlhbGl6ZUZyb250bWF0dGVyIiwgImZvcm1hdEVudHJ5IiwgInNsdWciLCAiQkxPQ0tFRF9UUkFJVFMiLCAicGFyc2VTcGVjaWVzRmlsZSIsICJidWlsZEZNIiwgIlNQRUNJRVNfTUVUQV9ERUZTIiwgInNlcmlhbGl6ZUZyb250bWF0dGVyIiwgIlNJWkVfTUFQIiwgIkZNX0ZJRUxEUyIsICJyZW5kZXJNYXJrZG93blRhYmxlIiwgInJlcGxhY2U1ZVRhZ3MiLCAiZm9ybWF0RW50cnkiLCAiaXNUeXBlZEVudHJ5IiwgImZvcm1hdEZlYXR1cmVMaW5rIiwgIk9QVF9GRUFUVVJFX1RZUEVfVE9fRlVMTCIsICJwYXJzZUNsYXNzRmlsZSIsICJidWlsZEZNIiwgIkNMQVNTX01FVEFfREVGUyIsICJzZXJpYWxpemVGcm9udG1hdHRlciIsICJ1bmlmaWVkV2VhcG9uUHJvZnMiLCAidW5pZmllZFRvb2xQcm9mcyIsICJTS0lMTF9PUFRJT05TIiwgInVuaWZpZWRTa2lsbHMiLCAiZmVhdHVyZXNCeUxldmVsIiwgInJlcGxhY2U1ZVRhZ3MiLCAiZm9ybWF0RmVhdHVyZUxpbmsiLCAicmVuZGVyTWFya2Rvd25UYWJsZSIsICJmb3JtYXRFbnRyeSIsICJPUFRfRkVBVFVSRV9UWVBFX1RPX0ZVTEwiLCAiaXNUeXBlZEVudHJ5IiwgImNvZGUiLCAicGFyc2VBY3Rpb25zRmlsZSIsICJyZXBsYWNlNWVUYWdzIiwgInBhcnNlQ29uZGl0aW9uc0Rpc2Vhc2VzRmlsZSIsICJwYXJzZVNlbnNlc0ZpbGUiLCAicGFyc2VTa2lsbHNGaWxlIiwgInBhcnNlRmVhdHNGaWxlIiwgImJ1aWxkRk0iLCAiRkVBVFNfTUVUQV9ERUZTIiwgInNlcmlhbGl6ZUZyb250bWF0dGVyIiwgInJlcGxhY2U1ZVRhZ3MiLCAicGFyc2VCYWNrZ3JvdW5kc0ZpbGUiLCAiYnVpbGRGTSIsICJCQUNLR1JPVU5EX01FVEFfREVGUyIsICJzZXJpYWxpemVGcm9udG1hdHRlciIsICJjYXAiLCAiaHVtYW5pemUiLCAiZm10SXRlbSIsICJyZXBsYWNlNWVUYWdzIiwgInJlbmRlck1hcmtkb3duVGFibGUiLCAiaW1wb3J0X29ic2lkaWFuIiwgImxpc3RTcGVsbEZpbGVzRnJvbUdpdEh1YiIsICJsaXN0QmVzdGlhcnlGaWxlc0Zyb21HaXRIdWIiLCAiSVRFTV9KU09OX0ZJTEVTIiwgImxpc3RJdGVtRmlsZXNGcm9tR2l0SHViIiwgImxpc3RDbGFzc0ZpbGVzRnJvbUdpdEh1YiIsICJlbnN1cmVGb2xkZXIiLCAiaW1wb3J0RWRpdGlvbkRhdGEiLCAicGFyc2VTcGVsbHNGaWxlIiwgInBhcnNlQmVzdGlhcnlGaWxlIiwgInBhcnNlSXRlbXNGaWxlIiwgInBhcnNlU3BlY2llc0ZpbGUiLCAicmVzIiwgImpzb24iLCAibWRGaWxlcyIsICJwYXJzZUNsYXNzRmlsZSIsICJwYXJzZUFjdGlvbnNGaWxlIiwgInBhcnNlQ29uZGl0aW9uc0Rpc2Vhc2VzRmlsZSIsICJwYXJzZVNlbnNlc0ZpbGUiLCAicGFyc2VTa2lsbHNGaWxlIiwgInBhcnNlRmVhdHNGaWxlIiwgInBhcnNlQmFja2dyb3VuZHNGaWxlIiwgImluc3RhbGxlcl9leHBvcnRzIiwgImltcG9ydF9vYnNpZGlhbiIsICJJbnN0YWxsaW5nTW9kYWwiLCAiYXBwIiwgInBhdGgiLCAiaW1wb3J0X29ic2lkaWFuIiwgImZzIiwgInBhdGgiLCAiY29udGVudCJdCn0K

/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __create = Object.create;
var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __getProtoOf = Object.getPrototypeOf;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toESM = (mod, isNodeMode, target) => (target = mod != null ? __create(__getProtoOf(mod)) : {}, __copyProps(
  // If the importer is in node compatibility mode or this is not an ESM
  // file that has been converted to a CommonJS file using a Babel-
  // compatible transform (i.e. "__esModule" has not been set), then set
  // "default" to the CommonJS "module.exports" for node compatibility.
  isNodeMode || !mod || !mod.__esModule ? __defProp(target, "default", { value: mod, enumerable: true }) : target,
  mod
));
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// src/main.ts
var main_exports = {};
__export(main_exports, {
  InstallingModal: () => InstallingModal,
  default: () => VVunderloreToolkitPlugin
});
module.exports = __toCommonJS(main_exports);
var import_obsidian10 = require("obsidian");

// src/settings.ts
var import_obsidian6 = require("obsidian");

// src/firstinstallconfirm.ts
var import_obsidian5 = require("obsidian");

// src/editions.ts
var AVAILABLE_EDITIONS = [
  {
    id: "none",
    label: "None",
    repo: "",
    parser: "",
    sourceUrl: ""
  },
  {
    id: "5e-2014",
    label: "D&D 5e (2014)",
    repo: "5etools-mirror-3/5etools-2014-src",
    parser: "5e-2014",
    sourceUrl: "https://raw.githubusercontent.com/5etools-mirror-3/5etools-2014-src/main/data",
    categories: [""]
  },
  {
    id: "5e-2025",
    label: "D&D 5e (2024)",
    repo: "5etools-mirror-3/5etools-src",
    parser: "5e-2025",
    sourceUrl: "https://raw.githubusercontent.com/5etools-mirror-3/5etools-src/main/data"
  }
];

// src/parsers/5e-2014/installer.ts
var installer_exports = {};
__export(installer_exports, {
  importEditionData: () => importEditionData
});
var import_obsidian = require("obsidian");

// src/parsers/5e-2014/helpers/sourceMap.ts
var SOURCE_NAME_MAP = {
  // Core rulebooks
  PHB: "Player's Handbook",
  MM: "Monster Manual",
  DMG: "Dungeon Master's Guide",
  // Official expansions & adventure modules
  CoS: "Curse of Strahd",
  OotA: "Out of the Abyss",
  PotA: "Princes of the Apocalypse",
  HotDQ: "Hoard of the Dragon Queen",
  RoT: "Rise of Tiamat",
  SKT: "Storm King's Thunder",
  TftYP: "Tales from the Yawning Portal",
  ToA: "Tomb of Annihilation",
  // Supplemental guides
  XGE: "Xanathar's Guide to Everything",
  VGM: "Volo's Guide to Monsters",
  TCE: "Tasha's Cauldron of Everything",
  EGW: "Eberron: Rising from the Last War",
  ERLW: "Explorer's Guide to Wildemount",
  MTF: "Monsters of the Multiverse",
  VRGR: "Van Richten's Guide to Ravenloft",
  // Additional sourcebooks
  AAG: "Astral Adventurer\u2019s Guide",
  AI: "Acquisitions Incorporated",
  AitFRAVFT: "Adventures in the Forgotten Realms: A Visual Field Test",
  BMT: "Big Monster Tome",
  DoDk: "Dragon of Darkkeep",
  FTD: "Fizban\u2019s Treasury of Dragons",
  GGR: "Guildmaster\u2019s Guide to Ravnica",
  GHLoE: "Ghosts of the Horizon: Light Over Elensaria",
  IDRotF: "Icewind Dale: Rime of the Frostmaiden",
  LLK: "Lost Laboratory of Kwalish",
  SatO: "Sapphire of Truth",
  SCC: "Strixhaven: Curriculum of Chaos",
  TDCSR: "The Dungeon Coach\u2019s Rulebook",
  JttRC: "Journeys through the Radiant Citadel",
  "AitFR-AVT": "Adventures in the Forgotten Realms: A Verdant Tomb",
  "AitFR-FCD": "Adventures in the Forgotten Realms: From Cyan Depths",
  RMR: "Dungeons and Dragons: Rick and Morty",
  SCAG: "Sword Coast Adventurer's Guide",
  EEPC: "Elemental Evil Player's Companion",
  MOT: "Mythic Odysseys of Theros",
  WBtW: "The Wild Beyond the Witchlight",
  BGDIA: "Baldur's Gate: Descent Into Avernus",
  ToFW: "Turn of Fortune's Wheel",
  CoA: "Chains of Asmodeus",
  CRCotN: "Critical Role: Call of the Netherdeep",
  ToD: "Tyranny of Dragons",
  MPMM: "Mordenkainen Presents: Monsters of the Multiverse",
  LoX: "Light of Xaryxis",
  QftIS: "Quests from the Infinite Staircase",
  WDH: "Waterdeep: Dragon Heist",
  WDMM: "Waterdeep: Dungeon of the Mad Mage",
  PaBTSO: "Phandelver and Below: The Shattered Obelisk",
  CM: "Candlekeep Mysteries",
  GoS: "Ghosts of Saltmarsh",
  DSotDQ: "Dragonlance: Shadow of the Dragon Queen",
  KftGV: "Keys from the Golden Vault",
  SDW: "Essentials Kit: Sleeping Dragon's Wake",
  DoSI: "Dragons of Stormwreck Isle",
  GotSF: "Giants of the Star Forge",
  DIP: "Essentials Kit: Dragon of Icespire Peak",
  SLW: "Essentials Kit: Storm Lord's Wrath",
  IMR: "Infernal Machine Rebuild",
  VEoR: "Vecna: Eve of Ruin",
  PSI: "Plane Shift: Innistrad",
  AATM: "Adventure Atlas: The Mortuary",
  PSZ: "Plane Shift: Zendikar",
  DC: "Essentials Kit: Divine Contention",
  LMoP: "Lost Mine of Phandelver",
  RMBRE: "The Lost Dungeon of Rickedness: Big Rick Energy",
  HftT: "Hunt for the Thessalhydra",
  PSX: "Plane Shift: Ixalan",
  HFStCM: "Heroes' Feast: Saving the Childrens Menu",
  SjA: "Spelljammer Academy",
  LK: "Lightning Keep",
  RtG: "Return to the Glory",
  TTP: "The Tortle Package",
  LR: "Locathah Rising",
  PSA: "Plane Shift: Amonkhet",
  OGA: "One Grung Above",
  "NRH-TLT": "Nerds Restoring Harmony: The Lost Tomb",
  "NRH-AT": "Nerds Restoring Harmony: Adventure Together",
  BGG: "Bigby Presents: Glory of the Giants",
  RoTOS: "The Rise of Tiamat Online Supplement",
  XMtS: "X Marks the Spot",
  "HAT-LMI": "Honor Among Theives: Legendary Magic Items",
  DitLCoT: "Descent into the Lost Caverns of Tsojcanth",
  "AitFR-DN": "Adventures in the Forgotten Realms: Deepest Night",
  "AitFR-THP": "Adventures in the Forgotten Realms: The Hidden Pages",
  BAM: "Boo's Astral Menagerie",
  AZfyT: "A Zib for Your Thougts",
  MCV2DC: "Monstrous Compendium Volume 2: Dragonlance Creatures",
  PSK: "Plane Shift: Kaladesh",
  PSD: "Plane Shift: Dominaria",
  AWM: "Adventure with Muk",
  UATheMysticClass: "Unearthed Arcana: The Mystic Class",
  ALCurseOfStrahd: "Adventurers League: Curse of Strahd",
  ALElementalEvil: "Adventurers League: Elemental Evil",
  ALRageOfDemons: "Adventurers League: Rage of Demons"
};
function getFullSourceName(abbrev, editionId) {
  let name = SOURCE_NAME_MAP[abbrev] ?? abbrev;
  if (abbrev === "PHB") {
    if (editionId?.includes("2014")) name += " (2014)";
    else if (editionId?.includes("2025")) name += " (2025)";
  }
  return name;
}

// src/parsers/5e-2014/helpers/tagReplacer.ts
function replace5eTags(input) {
  let text;
  if (Array.isArray(input)) {
    text = input.join(" ");
  } else if (typeof input === "string") {
    text = input;
  } else {
    text = String(input ?? "");
  }
  return text.replace(
    /\{#itemEntry\s+([^}|]+)(?:\|[^}]*)?\}/gi,
    (_m, rawName) => {
      return `[[${capitalizeEach(String(rawName).trim())}]]`;
    }
  ).replace(
    /\{@(spell|item|creature|race) ([^|}]+)(?:\|[^}]+)?\}/g,
    (_, __, name) => `[[${capitalizeEach(name)}]]`
  ).replace(
    /\{@(condition|status|action|skill) ([^|}]+)(?:\|[^}]+)?\}/g,
    (_, tag, name) => `[[${capitalize(tag)}s#${name}|${capitalizeEach(name)}]]`
  ).replace(
    /\{@classFeature ([^|}]+)\|([^|}]+)(?:\|[^}]+)?\}/g,
    (_, feature, cls) => `[[${cls}#${feature}]]`
  ).replace(/\{@(book|filter) ([^|}]+)(?:\|[^}]+)?\}/g, (_, __, txt) => txt).replace(/\{@note ([^}]+)\}/g, (_, note) => `*${note}*`).replace(/\{@(damage|dice|dc|hit|sense) ([^}]+)\}/g, (_, __, value) => value).replace(/\{@chance ([^|}]+)(?:\|[^}]+)?\}/g, (_, value) => `${value}%`).replace(/\{@quickref ([^|}]+)(?:\|[^|]*\|[^}]*)?\}/g, (_, term) => {
    const known = [
      "difficult terrain",
      "total cover",
      "half cover",
      "three-quarters cover",
      "heavily obscured",
      "lightly obscured"
    ];
    return known.includes(term.toLowerCase()) ? `[[Rules#${capitalizeEach(term)}]]` : term;
  }).replace(/\{\@5etools\s+([^|}]+)\|[^}]+\}/g, "$1").replace(/\{@recharge\s*([^}]+)\}/g, (_, num) => `(recharge: ${num.trim()})`).replace(/\{@(scaledice|scaledamage)[^}]*\|([^|}]+)\}/g, (_, __, value) => value).replace(/\{@d20[^}]*\}/g, "").replace(/\{@[^}]+\}/g, "");
}
function capitalize(str) {
  return str.charAt(0).toUpperCase() + str.slice(1).toLowerCase();
}
function capitalizeEach(str) {
  return str.split(" ").map(capitalize).join(" ");
}

// src/parsers/5e-2014/helpers/markdownTable.ts
function renderMarkdownTable(entry) {
  if (entry.type !== "table" || !Array.isArray(entry.rows)) return "";
  const caption = entry.caption ? `##### ${entry.caption}
` : "";
  const headers = (entry.colLabels ?? []).map((h) => replace5eTags(h.trim()));
  const headerRow = `| ${headers.join(" | ")} |`;
  const dividerRow = `| ${headers.map(() => ":--").join(" | ")} |`;
  const bodyRows = entry.rows.map((row) => {
    const cells = row.map((cell) => {
      if (typeof cell === "string") return replace5eTags(cell);
      if (typeof cell === "object") {
        if (cell.roll?.exact !== void 0) return `${cell.roll.exact}`;
        if (cell.roll?.min !== void 0 && cell.roll?.max !== void 0) {
          return `${cell.roll.min}\u2013${cell.roll.max}`;
        }
        return replace5eTags(JSON.stringify(cell));
      }
      return replace5eTags(String(cell));
    });
    return `| ${cells.join(" | ")} |`;
  });
  return `${caption}${headerRow}
${dividerRow}
${bodyRows.join("\n")}`;
}

// src/parsers/5e-2014/helpers/formatEntry.ts
var ensurePeriod = (s) => /[.!?]\s*$/.test(s) ? s : `${s}.`;
function renderList(list) {
  const items = Array.isArray(list?.items) ? list.items : [];
  if (!items.length) return "";
  const lines = [];
  for (const it of items) {
    if (typeof it === "string") {
      lines.push(`- ${replace5eTags(it)}`);
      continue;
    }
    if (it && typeof it === "object") {
      const head = typeof it.name === "string" && it.name.trim() ? `***${ensurePeriod(replace5eTags(it.name))}***` : "";
      let body = "";
      if (typeof it.entry === "string") {
        body = replace5eTags(it.entry);
      } else if (Array.isArray(it.entries)) {
        body = it.entries.map(
          (e) => typeof e === "string" ? replace5eTags(e) : formatEntry(e)
        ).join(" ");
      }
      const line = [head, body].filter(Boolean).join(" ").trim();
      lines.push(`- ${line}`.trim());
      continue;
    }
    lines.push(`- ${String(it ?? "")}`);
  }
  return lines.join("\n");
}
function renderTable(t) {
  const headers = Array.isArray(t?.colLabels) ? t.colLabels.map((h) => replace5eTags(h)) : [];
  const rows = Array.isArray(t?.rows) ? t.rows.map(
    (r) => Array.isArray(r) ? r.map((cell) => replace5eTags(cell)) : []
  ) : [];
  return renderMarkdownTable([headers, ...rows]);
}
function formatEntry(entry) {
  if (typeof entry === "string") return replace5eTags(entry);
  if (!entry || typeof entry !== "object") return String(entry ?? "");
  if (entry.type === "list") {
    return renderList(entry);
  }
  if (entry.type === "entries") {
    const head = typeof entry.name === "string" && entry.name.trim() ? `***${ensurePeriod(replace5eTags(entry.name))}*** ` : "";
    const body = Array.isArray(entry.entries) ? entry.entries.map((e) => formatEntry(e)).join("\n\n") : "";
    return (head + body).trim();
  }
  if (entry.type === "table") {
    return renderTable(entry);
  }
  if (Array.isArray(entry.entries)) {
    return entry.entries.map((e) => formatEntry(e)).join("\n\n");
  }
  if (typeof entry.entry === "string") {
    return replace5eTags(entry.entry);
  }
  return replace5eTags(String(entry));
}

// src/parsers/5e-2014/bestiary.ts
var skippedMonsters = [];
var SIZE_MAP = {
  T: "Tiny",
  S: "Small",
  M: "Medium",
  L: "Large",
  H: "Huge",
  G: "Gargantuan"
};
var ALIGNMENT_MAP = {
  L: "Lawful",
  N: "Neutral",
  C: "Chaotic",
  G: "Good",
  E: "Evil",
  U: "Unaligned"
};
function capitalizeFirst(str) {
  const s = String(str || "");
  return s.charAt(0).toUpperCase() + s.slice(1);
}
function formatSizeAbbrev(abbrev) {
  return SIZE_MAP[abbrev] || abbrev;
}
function formatAlignmentAbbrev(abbrev) {
  return abbrev.trim().split(/\s+/).map((letter) => ALIGNMENT_MAP[letter] || letter).join(" ");
}
var RAW_NPCS = [
  "Abjurer",
  "Acolyte",
  "Apprentice Wizard",
  "Archdruid",
  "Archer",
  "Archmage",
  "Assassin",
  "Bandit",
  "Bandit Captain",
  "Bard",
  "Berserker",
  "Blackguard",
  "Champion",
  "Commoner",
  "Conjurer",
  "Cult Fanatic",
  "Cultist",
  "Diviner",
  "Druid (NPC)",
  "Druid NPC",
  "Enchanter",
  "Evoker",
  "Gladiator",
  "Guard",
  "Illusionist",
  "Knight",
  "Kraken Priest",
  "Mage",
  "Martial Arts Adept",
  "Master Thief",
  "Necromancer",
  "Noble",
  "Priest",
  "Scout",
  "Spy",
  "Swashbuckler",
  "Thug",
  "Transmuter",
  "Tribal Warrior",
  "Veteran",
  "War Priest",
  "Warlock of the Archfey",
  "Warlock of the Fiend",
  "Warlock of the Great Old One",
  "Warlord"
];
var NORMALIZED_NPC_NAMES = new Set(RAW_NPCS.map((n) => normalizeName(n)));
function normalizeName(name) {
  return name.replace(/\s+/g, " ").trim().toLowerCase();
}
function categorizeCreature(monster) {
  const typeValue = monster.type;
  const name = monster.name;
  const t = typeof typeValue === "string" ? typeValue.toLowerCase() : typeValue?.type?.toLowerCase() || String(typeValue).toLowerCase();
  const normalizedName = normalizeName(name);
  if (monster.isNpc || monster.isNamedCreature) return "Story NPCs";
  if (t === "beast") return "Beasts";
  if (t === "humanoid" && NORMALIZED_NPC_NAMES.has(normalizedName)) return "Non-Beasts";
  if (t === "humanoid") return "Monsters";
  return "Monsters";
}
function renderAbilitiesTable(str, dex, con, int, wis, cha) {
  return [
    `| STR | DEX | CON | INT | WIS | CHA |`,
    `| --- | --- | --- | --- | --- | --- |`,
    `| ${str} | ${dex} | ${con} | ${int} | ${wis} | ${cha} |`
  ].join("\n");
}
function renderEntry(entry, inBreathBlock = false) {
  const ensurePeriod2 = (s) => /[.!?]\s*$/.test(s) ? s : `${s}.`;
  const renderStr = (s) => replace5eTags(s);
  if (typeof entry === "string") return renderStr(entry);
  if (!entry || typeof entry !== "object") return String(entry ?? "");
  const rawName = typeof entry.name === "string" ? entry.name : "";
  const nameTxt = rawName ? renderStr(rawName) : "";
  const isBreath = /\bbreath weapon/i.test(nameTxt);
  const lead = nameTxt ? `***${ensurePeriod2(nameTxt)}***` : "";
  const blocks = [];
  if (Array.isArray(entry.entries)) blocks.push(...entry.entries);
  else if (typeof entry.entries === "string") blocks.push(entry.entries);
  else if (Array.isArray(entry.desc)) blocks.push(...entry.desc);
  else if (typeof entry.desc === "string") blocks.push(entry.desc);
  else if (Array.isArray(entry.entry)) blocks.push(...entry.entry);
  else if (typeof entry.entry === "string") blocks.push(entry.entry);
  const out = [];
  for (const blk of blocks) {
    if (typeof blk === "string") {
      out.push(renderStr(blk));
      continue;
    }
    const isHangNoTitleList = blk && blk.type === "list" && blk.style === "list-hang-notitle" && Array.isArray(blk.items) && blk.items.every((it) => it?.type === "item");
    if ((isBreath || inBreathBlock || isHangNoTitleList) && blk && blk.type === "list" && Array.isArray(blk.items)) {
      const bullets = [];
      for (const it of blk.items) {
        const itName = it?.name ? renderStr(String(it.name).trim()) : "";
        let itBody = "";
        if (typeof it?.entry === "string") itBody = renderStr(it.entry);
        else if (Array.isArray(it?.entries)) itBody = it.entries.map((e) => renderEntry(e, true)).join(" ");
        else if (typeof it?.entries === "string") itBody = renderStr(it.entries);
        const head = itName ? `***${ensurePeriod2(itName)}***` : "";
        const line = [head, itBody].filter(Boolean).join(" ").trim();
        if (line) bullets.push(`- ${line}`);
      }
      if (bullets.length) out.push("\n" + bullets.join("\n"));
      continue;
    }
    out.push(String(blk));
  }
  return [lead, out.join(" ")].filter(Boolean).join(" ").replace(/[ \t]+/g, " ").trim();
}
function parseBestiaryFile(json, editionId) {
  if (!json.monster) return [];
  json._editionId = editionId;
  const validMonsters = json.monster.filter((m) => {
    const acVal = Array.isArray(m.ac) ? m.ac[0]?.ac ?? m.ac[0] : typeof m.ac === "object" ? m.ac?.ac ?? null : m.ac;
    const hpVal = typeof m.hp === "object" ? m.hp?.average ?? m.hp?.hp ?? null : m.hp;
    return acVal != null && hpVal != null && !isNaN(Number(acVal)) && !isNaN(Number(hpVal));
  });
  const allNames = new Set(json.monster.map((m) => m.name));
  const validNames = new Set(validMonsters.map((m) => m.name));
  const missing = [...allNames].filter((name) => !validNames.has(name));
  return validMonsters.map((monster) => {
    const name = monster.name;
    const safeName = name.replace(/\//g, "-");
    const rawSize = monster.size || "M";
    const rawAlignment = Array.isArray(monster.alignment) ? monster.alignment.join(" ") : monster.alignment || "N";
    let rawType = "Unknown";
    if (typeof monster.type === "string") {
      rawType = capitalizeFirst(monster.type);
    } else if (monster.type?.type) {
      const base = capitalizeFirst(monster.type.type);
      const tags = monster.type.tags?.length ? ` (${monster.type.tags.map(capitalizeFirst).join(", ")})` : "";
      rawType = `${base}${tags}`;
    }
    monster._parsedType = rawType;
    const ac = Array.isArray(monster.ac) ? monster.ac[0].ac : monster.ac;
    const hp = monster.hp?.average ?? monster.hp;
    if (!ac && !hp) {
      skippedMonsters.push(monster.name);
      return null;
    }
    const abilities = Array.isArray(monster.ability) ? monster.ability : [monster.str, monster.dex, monster.con, monster.int, monster.wis, monster.cha];
    const [str = 10, dex = 10, con = 10, int = 10, wis = 10, cha = 10] = abilities;
    const speedList = [];
    if (typeof monster.speed === "object") {
      for (const [mode, val] of Object.entries(monster.speed)) {
        if (mode === "canHover") continue;
        if (val && typeof val === "object" && "number" in val) {
          const num = val.number;
          const cond = val.condition ? ` ${val.condition}` : "";
          speedList.push(`${mode} ${num} ft.${cond}`);
        } else {
          speedList.push(`${mode} ${val} ft.`);
        }
      }
    } else {
      speedList.push(`${monster.speed} ft.`);
    }
    const speed = speedList.join(", ");
    let source = getFullSourceName(monster.source, editionId);
    source = source.replace(/:/g, " -");
    const category = categorizeCreature(monster);
    const fm = buildFM(monster, BESTIARY_META_DEFS);
    const yaml = serializeFrontmatter(fm, BESTIARY_META_DEFS);
    const fmAny = fm;
    const challengeText = String(fmAny["CR"] ?? fmAny["challenge"] ?? "");
    const savingThrows = fm[FM_FIELDS.SAVING_THROWS] || [];
    const skills = fm[FM_FIELDS.SKILLS] || [];
    const senses = fm[FM_FIELDS.SENSES] || [];
    const languages = fm[FM_FIELDS.LANGUAGES] || [];
    let body = `# ${name}

${formatSizeAbbrev(rawSize)} ${rawType}, ${formatAlignmentAbbrev(rawAlignment)}

**Armor Class**: ${ac}
**Hit Points**: ${hp}
**Speed**: ${speed}
` + (savingThrows.length ? `**Saving Throws**: ${savingThrows.join(", ")}
` : "") + (skills.length ? `**Skills**: ${skills.join(", ")}
` : "") + (senses.length ? `**Senses**: ${senses.join(", ")}
` : "") + (languages.length ? `**Languages**: ${languages.join(", ")}
` : "") + `**Challenge**: ${challengeText}

` + renderAbilitiesTable(str, dex, con, int, wis, cha);
    if (monster.spellcasting) {
      body += `

### Spellcasting
${monster.spellcasting.map((sc) => {
        const name2 = sc.name || "Spellcasting";
        const parts = [];
        if (sc.headerEntries) {
          const headers = Array.isArray(sc.headerEntries) ? sc.headerEntries : [sc.headerEntries];
          parts.push(headers.map((e) => replace5eTags(e)).join(" "));
        }
        if (sc.will) {
          parts.push(`- **At will:** ${sc.will.map((s) => replace5eTags(String(s))).join(", ")}`);
        }
        if (sc.daily) {
          for (const [k, arr] of Object.entries(sc.daily)) {
            const spells = arr.map((s) => replace5eTags(String(s))).join(", ");
            const n = parseInt(k, 10) || 0;
            const each = /e$/i.test(k);
            const label = n > 0 ? each ? `${n}/day each` : `${n}/day` : "Daily";
            parts.push(`- **${label}:** ${spells}`);
          }
        }
        return `***${name2}.***
${parts.join("\n")}`;
      }).join("\n\n")}`;
    }
    if (monster.trait) body += `

### Traits
${monster.trait.map(renderEntry).join("\n\n")}`;
    if (monster.action) body += `

### Actions
${monster.action.map(renderEntry).join("\n\n")}`;
    if (monster.reaction) body += `

### Reactions
${monster.reaction.map(renderEntry).join("\n\n")}`;
    if (monster.legendary) body += `

### Legendary Actions
${monster.legendary.map(renderEntry).join("\n\n")}`;
    const content = `---
${yaml}
---

${body}`;
    return {
      path: `${category}/${safeName}.md`,
      content
    };
  });
}

// src/parsers/5e-2014/items.ts
function capitalizeFirst2(input) {
  if (typeof input !== "string" || input.length === 0) return "";
  const s = input.trim();
  return s.charAt(0).toUpperCase() + s.slice(1).toLowerCase();
}
function render5eTable(t) {
  const headers = Array.isArray(t.colLabels) ? t.colLabels.map((h) => replace5eTags(h)) : [];
  const rows = Array.isArray(t.rows) ? t.rows.map(
    (r) => Array.isArray(r) ? r.map((cell) => replace5eTags(cell)) : []
  ) : [];
  return renderMarkdownTable({ headers, rows });
}
var DAMAGE_TYPE_MAP = {
  P: "Piercing",
  B: "Bludgeoning",
  S: "Slashing",
  N: "Necrotic",
  R: "Radiant",
  F: "Fire",
  C: "Cold",
  L: "Lightning",
  T: "Thunder",
  A: "Acid",
  H: "Healing",
  U: "Force",
  V: "Psychic"
};
var PROPERTY_MAP = {
  A: "Ammunition",
  F: "Finesse",
  H: "Heavy",
  L: "Light",
  R: "Reload",
  S: "Special",
  "2H": "Two-Handed",
  T: "Thrown",
  V: "Versatile"
};
var ITEM_TYPE_MAP = {
  $C: "Currency",
  $G: "Gem",
  A: "Ammunition",
  "AIR|DMG": "Vehicle (air)",
  "AF|DMG": "Future Ammo",
  AT: "Artisan Tools",
  EXP: "Explosive",
  FD: "Food and Drink",
  G: "Gear",
  GS: "Game",
  HA: "Heavy Armor",
  "IDG|TDCSR": "Illicit Drug",
  INS: "Instrument",
  LA: "Light Armor",
  M: "Weapon",
  MA: "Medium Armor",
  MNT: "Mounts and Vehicles",
  ODH: "Miscellaneous",
  P: "Consumable",
  R: "Ranged Weapon",
  RD: "Rod",
  RG: "Ring",
  S: "Shield",
  SC: "Scroll",
  SCF: "Spell Casting Focus",
  SHP: "Ship",
  T: "Tool",
  TAH: "Mounts and Vehicles",
  TG: "Trade Goods",
  VEH: "Mounts and Vehicles",
  WD: "Wand"
};
var codeFolderMap = {
  // Weapons & Armor
  "A": "Weapons and Armor/Ammunition",
  "M": "Weapons and Armor/Weapons",
  "R": "Weapons and Armor/Ranged Weapons",
  "S": "Weapons and Armor/Shields",
  "LA": "Weapons and Armor/Armor/Light Armor",
  "MA": "Weapons and Armor/Armor/Medium Armor",
  "HA": "Weapons and Armor/Armor/Heavy Armor",
  "EXP": "Weapons and Armor/Weapons/Explosives",
  // Future Ammo (AF|DMG → rawCode "AF")
  "AF": "Weapons and Armor/Ammunition/Future Ammo",
  // Magical Items
  "RD": "Magical Items/Rods",
  "RG": "Magical Items/Rings",
  "SC": "Magical Items/Scrolls",
  "SCF": "Magical Items/Spell Casting Focus",
  "WD": "Magical Items/Wands",
  // Valuables
  "$G": "Valuables/Gems",
  // Currency (rawCode becomes "C" after stripping $)
  "C": "Valuables/Currency",
  "TG": "Valuables/Trade Goods",
  // Artisan Goods
  "AT": "Artisan Goods/Tools",
  "T": "Artisan Goods/Tools",
  "INS": "Artisan Goods/Instruments",
  "GS": "Artisan Goods/Games",
  // Gear & Mounts
  "G": "Gear",
  // Mounts & Vehicles
  "MNT": "Gear/Mounts and Vehicles",
  "TAH": "Gear/Mounts and Vehicles",
  "VEH": "Gear/Mounts and Vehicles",
  // Air vehicles (AIR|DMG → rawCode "AIR")
  "AIR": "Gear/Mounts and Vehicles/Air",
  // Consumables
  "P": "Consumables",
  // Food & Drink
  "FD": "Consumables/Food and Drink",
  // Illicit Drugs (IDG|TDCSR → rawCode "IDG")
  "IDG": "Gear/Illicit Drugs",
  // Miscellaneous (ODH)
  "ODH": "Gear/Miscellaneous"
};
function parseItemsFile(json, editionId) {
  const rawItems = [];
  if (Array.isArray(json.baseitem)) rawItems.push(...json.baseitem);
  if (Array.isArray(json.item)) rawItems.push(...json.item);
  if (Array.isArray(json.object)) rawItems.push(...json.object);
  if (Array.isArray(json.vehicle)) rawItems.push(...json.vehicle);
  if (!rawItems.length) return [];
  const baseNames = new Set(
    Array.isArray(json.baseitem) ? json.baseitem.map((b) => b.name) : []
  );
  const out = [];
  for (const it of rawItems) {
    const name = it.name;
    const safeName = name.replace(/[\/\\:]/g, "-");
    const rawCode = (it.type || "").split("|")[0].split("|")[0].replace(/^\$/, "");
    let folder = codeFolderMap[rawCode] ?? "Miscellaneous";
    if (it.bonusWeapon) {
      folder = `${folder}/Variants`;
    } else {
      const isMagic = !!it.wondrous || !!it.reqAttune || !!it.req_attune || String(it.rarity).toLowerCase().includes("magic");
      if (isMagic) {
        const [, ...rest] = folder.split("/");
        folder = ["Magical Items", ...rest].join("/");
      }
    }
    if ((folder.startsWith("Weapons and Armor/Weapons") || folder.startsWith("Weapons and Armor/Ranged Weapons")) && it.weaponCategory) {
      folder = `${folder}/${capitalizeFirst2(it.weaponCategory)}`;
    }
    json._editionId = editionId;
    const fm = buildFM(it, ITEM_META_DEFS);
    if (fm[FM_FIELDS.MAGICAL]) {
      fm[FM_FIELDS.VERMUN] = false;
    }
    if (rawCode === "M" && it.weaponCategory) {
      fm.type = `${capitalizeFirst2(it.weaponCategory)} Weapon`;
    } else if (ITEM_TYPE_MAP[rawCode]) {
      fm.type = ITEM_TYPE_MAP[rawCode];
    }
    if (Array.isArray(fm.damageTypes)) {
      fm.damageTypes = fm.damageTypes.map(
        (code) => DAMAGE_TYPE_MAP[code] || code
      );
    }
    let yaml = serializeFrontmatter(fm, ITEM_META_DEFS);
    if (Array.isArray(it.packContents)) {
      yaml += "\npackContents:";
      for (const pc of it.packContents) {
        yaml += `
  - item: "${pc.item}"
    quantity: ${pc.quantity}`;
      }
    }
    const frontmatter = `---
${yaml}
---`;
    const lines = [];
    lines.push(`# ${name}`);
    lines.push("");
    const subtitle = it.weapon ? `${capitalizeFirst2(it.weaponCategory)} Weapon` : it.armor ? folder.split("/").pop() || "Armor" : "";
    if (subtitle) lines.push(`### *${subtitle}*`);
    if (it.weapon) {
      lines.push(`**Category**: ${capitalizeFirst2(it.weaponCategory)}`);
      lines.push(`**Damage**: ${it.dmg1 ?? ""}${it.dmg2 ? ` / ${it.dmg2}` : ""}`);
      const typesBody = (Array.isArray(it.dmgType) ? it.dmgType : [it.dmgType]).filter((t) => Boolean(t)).map((t) => DAMAGE_TYPE_MAP[t] || t);
      lines.push(`**Damage Type**: ${typesBody.join(", ")}`);
      lines.push(`**Range**: ${it.range ?? "\u2014"}`);
      lines.push(`**Reload**: ${it.reload ?? "\u2014"}`);
      if (it.ammoType) lines.push(`**Ammo Type**: ${it.ammoType}`);
      if (Array.isArray(it.property) && it.property.length) {
        const propsBody = it.property.map((p) => PROPERTY_MAP[p] || p);
        lines.push(`**Properties**: ${propsBody.join(", ")}`);
      }
    }
    if (it.armor) {
      lines.push(`**Armor Class**: ${it.ac}`);
      if (it.stealth) lines.push(`**Stealth Disadvantage**: true`);
      lines.push("");
    }
    const desc = it.entries ?? it.desc;
    if (desc) {
      for (const p of Array.isArray(desc) ? desc : [desc]) {
        if (typeof p === "string") {
          for (const line of replace5eTags(p).split("\n")) lines.push(line);
          lines.push("");
          continue;
        }
        if (p && typeof p === "object" && p.type === "table") {
          if (lines[lines.length - 1] !== "") lines.push("");
          lines.push(render5eTable(p));
          lines.push("");
          continue;
        }
        if (p && typeof p === "object" && p.type === "list" && Array.isArray(p.items)) {
          if (lines[lines.length - 1] !== "") lines.push("");
          for (const item of p.items) {
            if (typeof item === "string") {
              lines.push(`- ${replace5eTags(item)}`);
              continue;
            }
            const head = item?.name ? `**${replace5eTags(String(item.name)).replace(/[.!?]$/, (m) => m).replace(/([^.!?])$/, "$1.")}**` : "";
            let body2 = "";
            if (typeof item?.entry === "string") body2 = replace5eTags(item.entry);
            else if (Array.isArray(item?.entries)) {
              body2 = item.entries.map((e) => typeof e === "string" ? replace5eTags(e) : "").join(" ");
            }
            const line = [head, body2].filter(Boolean).join(" ").trim();
            if (line) lines.push(`- ${line}`);
          }
          lines.push("");
          continue;
        }
        if (p && typeof p === "object") {
          if (lines[lines.length - 1] === "") lines.pop();
          if (typeof p.name === "string" && p.name.trim()) {
            lines.push(`#### ${p.name}`);
          }
          const sub = Array.isArray(p.entries) ? p.entries : [];
          for (const sp of sub) {
            if (sp && typeof sp === "object" && sp.type === "table") {
              if (lines[lines.length - 1] !== "") lines.push("");
              lines.push(render5eTable(sp));
              lines.push("");
              continue;
            }
            if (sp && typeof sp === "object" && sp.type === "list" && Array.isArray(sp.items)) {
              if (lines[lines.length - 1] !== "") lines.push("");
              for (const item of sp.items) {
                if (typeof item === "string") {
                  lines.push(`- ${replace5eTags(item)}`);
                  continue;
                }
                const head = item?.name ? `**${replace5eTags(String(item.name)).replace(/[.!?]$/, (m) => m).replace(/([^.!?])$/, "$1.")}**` : "";
                let body2 = "";
                if (typeof item?.entry === "string") body2 = replace5eTags(item.entry);
                else if (Array.isArray(item?.entries)) {
                  body2 = item.entries.map((e) => typeof e === "string" ? replace5eTags(e) : "").join(" ");
                }
                const line = [head, body2].filter(Boolean).join(" ").trim();
                if (line) lines.push(`- ${line}`);
              }
              lines.push("");
              continue;
            }
            if (sp && typeof sp === "object" && sp.type === "entries" && sp.name) {
              const head = `- ***${replace5eTags(sp.name)}.***`;
              const body2 = (Array.isArray(sp.entries) ? sp.entries : []).map((e) => typeof e === "string" ? replace5eTags(e) : "").join(" ");
              if (body2.trim()) lines.push(`${head} ${body2}`.trim());
              else lines.push(head);
              continue;
            }
            if (typeof sp === "string") {
              for (const line of replace5eTags(sp).split("\n")) lines.push(line);
              continue;
            }
            if (sp && typeof sp === "object" && Array.isArray(sp.entries)) {
              for (const inner of sp.entries) {
                if (typeof inner === "string") {
                  for (const line of replace5eTags(inner).split("\n")) lines.push(line);
                }
              }
            }
          }
          lines.push("");
        }
      }
    }
    const body = lines.join("\n");
    out.push({ path: `Items/${folder}/${safeName}.md`, content: `${frontmatter}

${body}` });
  }
  return out.sort((a, b) => a.path.localeCompare(b.path));
}

// src/parsers/5e-2014/helpers/frontmatter.ts
function cap(str) {
  if (typeof str !== "string") return "";
  return str.charAt(0).toUpperCase() + str.slice(1);
}
var ABILITY_FULL = {
  str: "Strength",
  dex: "Dexterity",
  con: "Constitution",
  int: "Intelligence",
  wis: "Wisdom",
  cha: "Charisma"
};
var SIZE_MAP2 = {
  T: "Tiny",
  S: "Small",
  M: "Medium",
  L: "Large",
  H: "Huge",
  G: "Gargantuan"
};
var FM_FIELDS = {
  ABILITY_BONUSES: "ability_bonuses",
  AC: "AC",
  ALIGNMENT: "Alignment",
  AMMO_TYPE: "Ammo Type",
  ARMOR_PROFICIENCIES: "armor-prof",
  ATTACK_TYPE: "attack_type",
  ATTUNEMENT: "Attunement",
  ATTUNE_REQ: "Attune_Req",
  CASTING_TIME: "casting_time",
  CHARISMA: "charisma",
  CHA_MOD: "cha_mod",
  CONCENTRATION: "concentration",
  CONDITION_IMM: "cond_immunity",
  CONSTITUTION: "constitution",
  CON_MOD: "con_mod",
  COST: "cost",
  COMPONENTS: "Components",
  CHALLENGE_RATING: "CR",
  DAMAGE_TYPE: "damage_type",
  DAMAGE_TYPES: "damageTypes",
  DAMAGE: "damage",
  DAMAGE_RES: "dmg_resistance",
  DAMAGE_IMM: "dmg_immunity",
  DEXTERITY: "dexterity",
  DEX_MOD: "dex_mod",
  DURATION: "duration",
  RULESET: "ruleset",
  HP: "HP",
  INTELLIGENCE: "intelligence",
  INT_MOD: "int_mod",
  LANGUAGES: "languages",
  LEVEL: "level",
  MAGICAL: "magical",
  MATERIAL: "material",
  NAME: "name",
  PROPERTIES: "properties",
  RANGE: "range",
  RARITY: "rarity",
  RELOAD: "reload",
  RITUAL: "ritual",
  SAVE: "save",
  SAVING_THROWS: "saving_throws",
  SCHOOL: "school",
  SENSES: "senses",
  SIZE: "size",
  SKILLS: "skills",
  SKILL_CHOICE_LIST: "skill_choice_list",
  SOMATIC: "somatic",
  SOURCE: "source",
  SPECIES: "species",
  SPEED: "speed",
  SPELL_CAST_MOD: "Spell Cast Mod",
  SPELL_RANGE: "Range",
  STEALTH_DISADVANTAGE: "stealthDisadvantage",
  STRENGTH: "strength",
  STR_MOD: "str_mod",
  SUBRACES: "subraces",
  TOOL_PROFICIENCIES: "tool-prof",
  TOOL_CHOICE_LIST: "tool_choice_list",
  TRAITS: "traits",
  TYPE: "type",
  VARIANT: "Variant",
  VERBAL: "verbal",
  VERMUN: "vermun",
  WEAPON_PROFICIENCIES: "weapon-prof",
  WEIGHT: "weight",
  WISDOM: "wisdom",
  WIS_MOD: "wis_mod"
};
var unifiedArmorProfs = (val) => Array.isArray(val?.armor) ? val.armor.map(cap) : Array.isArray(val) ? val.map(cap) : [];
function unifiedWeaponProfs(val) {
  const rawArr = Array.isArray(val?.weapons) ? val.weapons : Array.isArray(val) ? val : [];
  const out = /* @__PURE__ */ new Set();
  function handleOne(entry) {
    if (Array.isArray(entry)) {
      entry.forEach(handleOne);
      return;
    }
    if (typeof entry === "string") {
      const lit = entry.trim().toLowerCase();
      if (lit === "simple") {
        out.add("Simple Weapons");
      } else if (lit === "martial") {
        out.add("Martial Weapons");
      } else {
        const text = entry.startsWith("{@") ? replace5eTags(entry) : cap(entry);
        out.add(text);
      }
      return;
    }
    if (entry && typeof entry === "object" && entry.proficiency) {
      const name = cap(entry.proficiency);
      out.add(entry.optional ? `${name} (optional)` : name);
    }
  }
  rawArr.forEach(handleOne);
  return [...out];
}
var SAVE_NAME_MAP = {
  str: "Strength",
  strength: "Strength",
  dex: "Dexterity",
  dexterity: "Dexterity",
  con: "Constitution",
  constitution: "Constitution",
  int: "Intelligence",
  intelligence: "Intelligence",
  wis: "Wisdom",
  wisdom: "Wisdom",
  cha: "Charisma",
  charisma: "Charisma"
};
function unifiedSaves(val) {
  if (!val) return [];
  if (Array.isArray(val)) {
    return val.map((k) => {
      const key2 = String(k).toLowerCase();
      return SAVE_NAME_MAP[key2] || key2.charAt(0).toUpperCase() + key2.slice(1);
    });
  }
  if (typeof val === "object") {
    return Object.keys(val).map((k) => {
      const key2 = k.toLowerCase();
      return SAVE_NAME_MAP[key2] || key2.charAt(0).toUpperCase() + key2.slice(1);
    });
  }
  const key = String(val).toLowerCase();
  return [SAVE_NAME_MAP[key] || key.charAt(0).toUpperCase() + key.slice(1)];
}
var unifiedSkills2 = (val) => {
  if (val && !Array.isArray(val) && typeof val === "object" && // ensure every value is a string or number
  Object.values(val).every((v) => typeof v === "string" || typeof v === "number")) {
    return Object.entries(val).map(
      ([skill, mod]) => `${cap(skill)} ${mod}`.trim()
    );
  }
  if (val && !Array.isArray(val) && typeof val === "object") {
    const nested = val.skills ?? val.skillProf ?? val.skillProficiencies;
    return unifiedSkills2(nested);
  }
  if (!Array.isArray(val)) return [];
  const out = /* @__PURE__ */ new Set();
  for (const e of val) {
    if (e && typeof e === "object" && typeof e.any === "number") {
      out.add(`Choose ${e.any}`);
      continue;
    }
    if (e && typeof e === "object" && e.choose) {
      const cnt = e.choose.count ?? 1;
      out.add(`Choose ${cnt}`);
    }
    if (e && typeof e === "object") {
      for (const [k, v] of Object.entries(e)) {
        if (v === true) out.add(cap(k));
      }
    }
    if (typeof e === "string") {
      out.add(cap(e));
    }
  }
  return [...out];
};
var unifiedToolProfs = (val) => {
  let entries = Array.isArray(val) ? val : Array.isArray(val?.toolProficiencies) ? val.toolProficiencies : Array.isArray(val?.tools) ? val.tools : [];
  const out = /* @__PURE__ */ new Set();
  let sawChoose = false;
  for (const e of entries) {
    if (typeof e === "string") {
      out.add(cap(e));
      continue;
    }
    if (e?.choose) {
      const cnt = e.choose.count ?? 1;
      sawChoose = true;
      out.add(`Choose ${cnt}`);
    }
    for (const [k, v] of Object.entries(e)) {
      if (v === true) {
        out.add(cap(k));
      } else if (typeof v === "number" && k.startsWith("any")) {
        const raw = k.replace(/^any/, "");
        const spaced = raw.replace(/([a-z])([A-Z])/g, "$1 $2").split(" ").map(cap).join(" ");
        out.add(`Choose ${v} ${spaced}`);
      }
    }
  }
  return [...out];
};
var ALL_FIELD_DEFS = [
  // ─── Core ───
  { callSign: "NAME", jsonKey: "name" },
  { callSign: "SOURCE", jsonKey: ["source"], conv: (raw, all) => {
    const out = /* @__PURE__ */ new Set();
    const arr = Array.isArray(raw) ? raw : [raw];
    arr.forEach((src) => out.add(getFullSourceName(src, all._editionId)));
    for (const os of all.otherSources ?? []) out.add(getFullSourceName(os.source, all._editionId));
    for (const rep of all.reprintedAs ?? []) {
      const [, src] = rep.split("|");
      out.add(getFullSourceName(src, all._editionId));
    }
    return [...out];
  } },
  // ─── Proficiencies ───
  { callSign: "ARMOR_PROFICIENCIES", jsonKey: ["armorProficiencies", "armorProfs", "startingProficiencies"], conv: unifiedArmorProfs },
  {
    callSign: "WEAPON_PROFICIENCIES",
    jsonKey: ["weaponProficiencies", "weaponProfs", "startingProficiencies"],
    conv: unifiedWeaponProfs
  },
  { callSign: "TOOL_PROFICIENCIES", jsonKey: ["toolProficiencies", "toolProfs", "startingProficiencies"], conv: unifiedToolProfs },
  {
    callSign: "TOOL_CHOICE_LIST",
    jsonKey: ["toolProficiencies", "toolProfs", "startingProficiencies"],
    conv: (raw) => {
      const arr = Array.isArray(raw) ? raw : Array.isArray(raw?.toolProficiencies) ? raw.toolProficiencies : Array.isArray(raw?.tools) ? raw.tools : [];
      const choice = arr.find((e) => e?.choose);
      return choice?.choose?.from?.map((s) => cap(s)) ?? [];
    }
  },
  { callSign: "SAVING_THROWS", jsonKey: ["save", "proficiency", "savingThrow"], conv: unifiedSaves },
  {
    callSign: "SKILLS",
    jsonKey: ["skill", "skillProf", "skillProficiencies", "startingProficiencies"],
    conv: unifiedSkills2
  },
  {
    callSign: "SKILL_CHOICE_LIST",
    jsonKey: ["skill", "skillProf", "skillProficiencies", "startingProficiencies"],
    conv: (raw) => {
      const arr = Array.isArray(raw) ? raw : Array.isArray(raw?.skillProficiencies) ? raw.skillProficiencies : Array.isArray(raw?.skills) ? raw.skills : Array.isArray(raw?.skillProf) ? raw.skillProf : [];
      const choiceObj = arr.find((e) => e?.choose || typeof e.any === "number");
      if (!choiceObj) return [];
      if (choiceObj.choose && Array.isArray(choiceObj.choose.from)) {
        return choiceObj.choose.from.map(cap);
      }
      if (typeof choiceObj.any === "number") {
        return SKILL_OPTIONS;
      }
      return [];
    }
  },
  {
    callSign: "SPELL_CAST_MOD",
    jsonKey: "spellcastingAbility",
    conv: (raw) => {
      const key = String(raw).toLowerCase();
      return ABILITY_FULL[key] || key.toUpperCase();
    }
  },
  {
    callSign: "RULESET",
    jsonKey: "name",
    // ignore the raw value, always print HELLO
    conv: (_raw, _all) => "D&D 5e (2014)"
  },
  // ─── Spells ───
  { callSign: "LEVEL", jsonKey: "level" },
  { callSign: "SCHOOL", jsonKey: "school", conv: (s) => SCHOOL_MAP[s] ?? s },
  { callSign: "CASTING_TIME", jsonKey: "time", conv: formatTime },
  { callSign: "SPELL_RANGE", jsonKey: "range", conv: formatRange },
  { callSign: "DURATION", jsonKey: "duration", conv: formatDuration },
  { callSign: "VERBAL", jsonKey: "components", conv: (c) => !!c.v },
  { callSign: "SOMATIC", jsonKey: "components", conv: (c) => !!c.s },
  { callSign: "MATERIAL", jsonKey: "components", conv: (c) => !!c.m },
  {
    callSign: "COMPONENTS",
    jsonKey: "components",
    conv: (c) => {
      if (!c.m) return [];
      const raw = Array.isArray(c.m) ? c.m : [c.m];
      return raw.map((item) => {
        if (typeof item === "string") return item;
        if (item && typeof item === "object" && typeof item.text === "string") {
          return item.text;
        }
        return null;
      }).filter((comp) => comp !== null);
    }
  },
  { callSign: "ATTACK_TYPE", jsonKey: "attackType" },
  { callSign: "DAMAGE_TYPE", jsonKey: "damageInflict", conv: (d) => Array.isArray(d) ? d[0] : d },
  { callSign: "RITUAL", jsonKey: "ritual" },
  { callSign: "CONCENTRATION", jsonKey: "duration", conv: (ds) => Array.isArray(ds) && ds.some((x) => x.concentration) },
  { callSign: "SAVE", jsonKey: "saveAttr" },
  // ─── Species / Creatures ───
  { callSign: "SPECIES", jsonKey: "name" },
  {
    callSign: "SIZE",
    jsonKey: "size",
    conv: (raw) => {
      if (Array.isArray(raw)) {
        return raw.map((r) => SIZE_MAP2[r] || r);
      } else {
        return SIZE_MAP2[raw] || raw;
      }
    }
  },
  {
    callSign: "SPEED",
    jsonKey: "speed",
    conv: (sp) => {
      if (typeof sp === "number") {
        return [`Walk ${sp} ft.`];
      }
      if (!sp || typeof sp !== "object") return [];
      return Object.entries(sp).filter(([mode]) => mode !== "canHover").map(([mode, v]) => {
        const n = typeof v === "object" && v !== null && "number" in v ? v.number : v;
        const label = mode === "walk" ? "Walk" : cap(mode);
        return `${label} ${n} ft.`;
      });
    }
  },
  { callSign: "LANGUAGES", jsonKey: ["languages", "languageProficiencies"], conv: (arr) => {
    if (!Array.isArray(arr)) return [];
    const out = [];
    for (const lp of arr) {
      if (typeof lp === "string") out.push(cap(lp));
      else if (typeof lp === "object") {
        for (const [lang, val] of Object.entries(lp)) {
          if (val) out.push(cap(lang));
        }
      }
    }
    return [...new Set(out)];
  } },
  { callSign: "SENSES", jsonKey: "senses", conv: (sen) => {
    if (Array.isArray(sen)) return sen.map((s) => s.replace(/^\d+\s*/, "").replace(/^./, (c) => c.toUpperCase()));
    if (sen && typeof sen === "object") return Object.entries(sen).map(([k, v]) => `${k.charAt(0).toUpperCase() + k.slice(1)} ${v}`);
    return [];
  } },
  {
    callSign: "TRAITS",
    jsonKey: ["classFeatures", "entries"],
    conv: (raw, allJson) => {
      const rec = Array.isArray(allJson.class) ? allJson.class[0] : Array.isArray(allJson.race) ? allJson.race[0] : allJson;
      const fileName = typeof rec?.name === "string" ? rec.name : typeof allJson?.name === "string" ? allJson.name : "";
      const omit = /* @__PURE__ */ new Set([
        // class-specific
        "Ability Score Improvement",
        "Archetype Feature",
        "Subclass Feature",
        // species-specific common headings
        "Age",
        "Size",
        "Speed",
        "Languages"
        // backgrounds often have generic sections too; add more if needed
      ]);
      const seen = /* @__PURE__ */ new Set();
      if (Array.isArray(allJson.classFeatures)) {
        const classRec = Array.isArray(allJson.class) ? allJson.class[0] : allJson;
        const className = typeof classRec?.name === "string" ? classRec.name : fileName;
        return allJson.classFeatures.flatMap((feat) => {
          if (feat && typeof feat === "object" && feat.gainSubclassFeature) return [];
          const rawName = typeof feat === "string" ? feat : typeof feat.classFeature === "string" ? feat.classFeature : "";
          const name = rawName.split("|")[0].trim();
          if (!name || omit.has(name) || seen.has(name)) return [];
          seen.add(name);
          const anchor = name.replace(/[^\w\s]/g, "").replace(/\s+/g, " ").trim().replace(/\b\w/g, (c) => c.toUpperCase());
          return className ? [`[[${className}#${anchor}|${name}]]`] : [name];
        });
      }
      const ents = Array.isArray(raw) ? raw : [];
      const names = [];
      const pushName = (n) => {
        const name = (n ?? "").replace(/^Feature:\s*/, "").trim();
        if (!name || omit.has(name) || seen.has(name)) return;
        seen.add(name);
        names.push(name);
      };
      for (const e of ents) {
        if (!e) continue;
        if (typeof e === "object" && typeof e.name === "string") {
          pushName(e.name);
        }
        if (typeof e === "object" && Array.isArray(e.entries)) {
          for (const sub of e.entries) {
            if (sub && typeof sub === "object" && typeof sub.name === "string") {
              pushName(sub.name);
            }
          }
        }
      }
      if (names.length) {
        return names.map((name) => {
          const anchor = name.replace(/[^\w\s]/g, "").replace(/\s+/g, " ").trim().replace(/\b\w/g, (c) => c.toUpperCase());
          return fileName ? `[[${fileName}#${anchor}|${name}]]` : name;
        });
      }
      return ents.filter((e) => e && typeof e.name === "string").map((e) => e.name.replace(/^Feature:\s*/, "").trim());
    }
  },
  { callSign: "AC", jsonKey: "ac", conv: (a) => Array.isArray(a) ? a[0].ac : a },
  { callSign: "HP", jsonKey: "hp", conv: (hp) => hp?.average ?? hp },
  { callSign: "CHALLENGE_RATING", jsonKey: "cr", conv: (raw) => typeof raw === "object" && raw !== null && "cr" in raw ? raw.cr : raw },
  { callSign: "STRENGTH", jsonKey: "ability", conv: (arr) => Array.isArray(arr) ? arr[0] : arr?.str ?? 0 },
  { callSign: "DEXTERITY", jsonKey: "ability", conv: (arr) => Array.isArray(arr) ? arr[1] : arr?.dex ?? 0 },
  { callSign: "CONSTITUTION", jsonKey: "ability", conv: (arr) => Array.isArray(arr) ? arr[2] : arr?.con ?? 0 },
  { callSign: "INTELLIGENCE", jsonKey: "ability", conv: (arr) => Array.isArray(arr) ? arr[3] : arr?.int ?? 0 },
  { callSign: "WISDOM", jsonKey: "ability", conv: (arr) => Array.isArray(arr) ? arr[4] : arr?.wis ?? 0 },
  { callSign: "CHARISMA", jsonKey: "ability", conv: (arr) => Array.isArray(arr) ? arr[5] : arr?.cha ?? 0 },
  {
    callSign: "ALIGNMENT",
    jsonKey: "alignment",
    conv: (a) => {
      const raw = Array.isArray(a) ? a.join(" ") : typeof a === "string" ? a : String(a);
      const cleaned = raw.replace(/\bA\b/g, "Any").replace(/\bU\b/g, "Unaligned").replace(/\bN\b/g, "Neutral").replace(/\bL\b/g, "Lawful").replace(/\bC\b/g, "Chaotic").replace(/\bG\b/g, "Good").replace(/\bE\b/g, "Evil");
      return formatAlignmentAbbrev(cleaned);
    }
  },
  {
    callSign: "TYPE",
    jsonKey: "type",
    conv: (t) => {
      if (typeof t === "string") {
        return ITEM_TYPE_MAP[t] ?? cap(t);
      }
      if (t && typeof t === "object") {
        const code = String(t.type || "").toUpperCase();
        if (ITEM_TYPE_MAP[code]) {
          return ITEM_TYPE_MAP[code];
        }
        const base = t.type ? cap(t.type) : "Unknown";
        const tags = Array.isArray(t.tags) ? t.tags.map(cap) : [];
        return tags.length ? `${base} (${tags.join(", ")})` : base;
      }
      return void 0;
    }
  },
  // ─── Items ───
  { callSign: "TYPE", jsonKey: "_parsedType" },
  { callSign: "RARITY", jsonKey: "rarity", conv: (r) => {
    const s = String(r || "").toLowerCase();
    return s && s !== "none" ? s[0].toUpperCase() + s.slice(1) : void 0;
  } },
  {
    callSign: "COST",
    jsonKey: "value",
    conv: (raw) => {
      const s = String(raw).trim().toLowerCase();
      let num;
      if (s.endsWith("cp")) {
        num = parseFloat(s);
        return num >= 100 ? `${Math.round(num / 100 * 100) / 100}gp` : `${num}cp`;
      }
      if (s.endsWith("sp")) {
        num = parseFloat(s);
        return num >= 10 ? `${Math.round(num / 10 * 100) / 100}gp` : `${num}sp`;
      }
      if (s.endsWith("gp")) {
        num = parseFloat(s);
        return `${Math.round(num * 100) / 100}gp`;
      }
      num = parseFloat(s) || 0;
      return num >= 100 ? `${Math.round(num / 100 * 100) / 100}gp` : `${num}cp`;
    }
  },
  { callSign: "WEIGHT", jsonKey: "weight" },
  { callSign: "MAGICAL", jsonKey: "wondrous", conv: (_w, all) => !!all.wondrous || !!all.reqAttune },
  { callSign: "VARIANT", jsonKey: "bonusWeapon", conv: (b) => typeof b === "string" && b.startsWith("+") },
  { callSign: "PROPERTIES", jsonKey: "property", conv: (arr) => Array.isArray(arr) ? arr.map((p) => PROPERTY_MAP[p] || p) : [] },
  { callSign: "DAMAGE", jsonKey: "dmg1", conv: (d, all) => d ? all.dmg2 ? `${d} / ${all.dmg2}` : `${d}` : void 0 },
  { callSign: "DAMAGE_TYPES", jsonKey: "dmgType", conv: (dt) => dt == null ? [] : Array.isArray(dt) ? dt : [dt] },
  { callSign: "RANGE", jsonKey: "range" },
  { callSign: "RELOAD", jsonKey: "reload" },
  { callSign: "AMMO_TYPE", jsonKey: "ammoType", conv: (v) => typeof v === "string" ? v.split("|")[0].charAt(0).toUpperCase() + v.split("|")[0].slice(1).toLowerCase() : "" },
  { callSign: "STEALTH_DISADVANTAGE", jsonKey: "stealth" },
  {
    callSign: "ATTUNEMENT",
    jsonKey: ["wondrous", "reqAttune", "req_attune", "reqAttuneTags"],
    conv: (_raw, allJson) => {
      const j = allJson;
      const hasText = typeof j.reqAttune === "string" && j.reqAttune.trim() !== "";
      const hasTags = Array.isArray(j.reqAttuneTags) && j.reqAttuneTags.length > 0;
      return hasText || hasTags;
    }
  },
  {
    callSign: "ATTUNE_REQ",
    jsonKey: "reqAttuneTags",
    conv: (tags = [], _all) => {
      const mapLetter = {
        A: "Any",
        U: "Unaligned",
        N: "Neutral",
        L: "Lawful",
        C: "Chaotic",
        G: "Good",
        E: "Evil"
      };
      const reqs = [];
      for (const tag of tags) {
        if (tag.class && Array.isArray(tag.alignment)) {
          const cls = cap(tag.class);
          for (const code of tag.alignment) {
            reqs.push(`${mapLetter[code] || code} ${cls}`);
          }
        } else if (tag.class) {
          reqs.push(cap(tag.class));
        } else if (Array.isArray(tag.alignment)) {
          for (const code of tag.alignment) {
            reqs.push(mapLetter[code] || code);
          }
        } else if (tag.background) {
          const [bg] = String(tag.background).split("|");
          reqs.push(bg.split(" ").map(cap).join(" "));
        } else if (tag.spellcasting) {
          reqs.push("Spellcaster");
        }
      }
      return Array.from(new Set(reqs));
    }
  },
  {
    callSign: "VERMUN",
    jsonKey: "wondrous",
    // or whatever property you use to detect “magical”
    conv: (_raw, all) => !!all.wondrous || !!all.reqAttune
  },
  // ─── Other ───
  { callSign: "DAMAGE_RES", jsonKey: "resist", conv: (v) => Array.isArray(v) ? v.map(cap) : [] },
  { callSign: "RULESET", jsonKey: "_editionId" },
  // ─── Ability‐score modifiers (only emit when nonzero) ───
  {
    callSign: "STR_MOD",
    jsonKey: "ability",
    conv: (arr) => {
      const v = Array.isArray(arr) ? arr[0].str ?? 0 : arr.str ?? 0;
      return v !== 0 ? v : void 0;
    }
  },
  {
    callSign: "DEX_MOD",
    jsonKey: "ability",
    conv: (arr) => {
      const v = Array.isArray(arr) ? arr[0].dex ?? 0 : arr.dex ?? 0;
      return v !== 0 ? v : void 0;
    }
  },
  {
    callSign: "CON_MOD",
    jsonKey: "ability",
    conv: (arr) => {
      const v = Array.isArray(arr) ? arr[0].con ?? 0 : arr.con ?? 0;
      return v !== 0 ? v : void 0;
    }
  },
  {
    callSign: "INT_MOD",
    jsonKey: "ability",
    conv: (arr) => {
      const v = Array.isArray(arr) ? arr[0].int ?? 0 : arr.int ?? 0;
      return v !== 0 ? v : void 0;
    }
  },
  {
    callSign: "WIS_MOD",
    jsonKey: "ability",
    conv: (arr) => {
      const v = Array.isArray(arr) ? arr[0].wis ?? 0 : arr.wis ?? 0;
      return v !== 0 ? v : void 0;
    }
  },
  {
    callSign: "CHA_MOD",
    jsonKey: "ability",
    conv: (arr) => {
      const v = Array.isArray(arr) ? arr[0].cha ?? 0 : arr.cha ?? 0;
      return v !== 0 ? v : void 0;
    }
  }
];
function buildFM(json, defs) {
  const fm = {};
  for (const { callSign, jsonKey, conv } of defs) {
    const keys = Array.isArray(jsonKey) ? jsonKey : [jsonKey];
    let raw = void 0;
    for (const key of keys) {
      if (json[key] != null) {
        raw = json[key];
        break;
      }
    }
    if (raw == null) continue;
    const val = conv ? conv(raw, json) : raw;
    fm[FM_FIELDS[callSign]] = val;
  }
  return fm;
}
function serializeFrontmatter(fm, defs) {
  const filtered = {};
  const hasSkillChoice = Array.isArray(fm[FM_FIELDS.SKILL_CHOICE_LIST]) && fm[FM_FIELDS.SKILL_CHOICE_LIST].length > 0;
  const hasToolChoice = Array.isArray(fm[FM_FIELDS.TOOL_CHOICE_LIST]) && fm[FM_FIELDS.TOOL_CHOICE_LIST].length > 0;
  for (const [k, v] of Object.entries(fm)) {
    if (v === void 0) continue;
    if (k === FM_FIELDS.COMPONENTS && Array.isArray(v) && v.length === 0) continue;
    if ((k === FM_FIELDS.TOOL_CHOICE_LIST || k === FM_FIELDS.SKILL_CHOICE_LIST) && Array.isArray(v) && v.length === 0) continue;
    filtered[k] = v;
  }
  let keysToEmit;
  if (defs) {
    const wanted = defs.map((d) => FM_FIELDS[d.callSign]);
    keysToEmit = wanted.filter((k) => k in filtered);
    keysToEmit.push(
      ...Object.keys(filtered).filter((k) => !keysToEmit.includes(k))
    );
  } else {
    keysToEmit = Object.keys(filtered);
  }
  return keysToEmit.map((k) => {
    const v = filtered[k];
    if (Array.isArray(v)) {
      const inline = v.map((item) => JSON.stringify(item)).join(", ");
      return `${k}: [${inline}]`;
    }
    if (typeof v === "string") {
      return `${k}: "${v}"`;
    }
    return `${k}: ${v}`;
  }).join("\n");
}
var SKILL_OPTIONS = [
  "Acrobatics",
  "Animal Handling",
  "Arcana",
  "Athletics",
  "Deception",
  "History",
  "Insight",
  "Intimidation",
  "Investigation",
  "Medicine",
  "Nature",
  "Perception",
  "Performance",
  "Persuasion",
  "Religion",
  "Sleight of Hand",
  "Stealth",
  "Survival"
];
var SPELL_KEYS = [
  "NAME",
  "LEVEL",
  "SCHOOL",
  "CASTING_TIME",
  "SPELL_RANGE",
  "SAVING_THROWS",
  "DAMAGE_TYPE",
  "DURATION",
  "VERBAL",
  "SOMATIC",
  "MATERIAL",
  "COMPONENTS",
  "CONCENTRATION",
  "SOURCE",
  "RULESET"
];
var SPECIES_KEYS = [
  "SPECIES",
  "SIZE",
  "SPEED",
  "LANGUAGES",
  "TRAITS",
  "SKILLS",
  "STR_MOD",
  "DEX_MOD",
  "CON_MOD",
  "INT_MOD",
  "WIS_MOD",
  "CHA_MOD",
  "SKILL_CHOICE_LIST",
  "TOOL_PROFICIENCIES",
  "TOOL_CHOICE_LIST",
  "WEAPON_PROFICIENCIES",
  "SENSES",
  "DAMAGE_RES",
  "SOURCE",
  "RULESET"
];
var ITEM_KEYS = [
  "NAME",
  "TYPE",
  "RARITY",
  "COST",
  "WEIGHT",
  "PROPERTIES",
  "DAMAGE",
  "DAMAGE_TYPES",
  "RANGE",
  "RELOAD",
  "AMMO_TYPE",
  "AC",
  "STEALTH_DISADVANTAGE",
  "MAGICAL",
  "ATTUNEMENT",
  "ATTUNE_REQ",
  "VERMUN",
  "SOURCE",
  "RULESET"
];
var BESTIARY_KEYS = [
  "NAME",
  "SIZE",
  "TYPE",
  "ALIGNMENT",
  "AC",
  "HP",
  "SPEED",
  "STRENGTH",
  "DEXTERITY",
  "CONSTITUTION",
  "INTELLIGENCE",
  "WISDOM",
  "CHARISMA",
  "SAVING_THROWS",
  "SKILLS",
  "SENSES",
  "LANGUAGES",
  "CHALLENGE_RATING",
  "SOURCE",
  "RULESET"
];
var CLASS_KEYS = [
  "NAME",
  "SPELL_CAST_MOD",
  "ARMOR_PROFICIENCIES",
  "WEAPON_PROFICIENCIES",
  "TOOL_PROFICIENCIES",
  "TOOL_CHOICE_LIST",
  "SAVING_THROWS",
  "SKILLS",
  "SKILL_CHOICE_LIST",
  "TRAITS",
  "SOURCE",
  "RULESET"
];
var BACKGROUND_KEYS = [
  "NAME",
  "SKILLS",
  "SKILL_CHOICE_LIST",
  "TOOL_PROFICIENCIES",
  "TOOL_CHOICE_LIST",
  "TRAITS",
  "SOURCE",
  "RULESET"
];
var FEATS_KEYS = [
  "SOURCE",
  "RULESET"
];
var SPELL_META_DEFS = SPELL_KEYS.map((key) => {
  const def = ALL_FIELD_DEFS.find((d) => d.callSign === key);
  if (!def) throw new Error(`Missing FieldDef for SPELL_KEY ${key}`);
  return def;
});
var SPECIES_META_DEFS = SPECIES_KEYS.map((key) => {
  const def = ALL_FIELD_DEFS.find((d) => d.callSign === key);
  if (!def) throw new Error(`Missing FieldDef for SPECIES_KEY ${key}`);
  return def;
});
var ITEM_META_DEFS = ITEM_KEYS.map((key) => {
  const def = ALL_FIELD_DEFS.find((d) => d.callSign === key);
  if (!def) throw new Error(`Missing FieldDef for ITEM_KEY ${key}`);
  return def;
});
var BESTIARY_META_DEFS = BESTIARY_KEYS.map((key) => {
  const def = ALL_FIELD_DEFS.find((d) => d.callSign === key);
  if (!def) throw new Error(`Missing FieldDef for BESTIARY_KEY ${key}`);
  return def;
});
var CLASS_META_DEFS = CLASS_KEYS.map((key) => {
  const def = ALL_FIELD_DEFS.find((d) => d.callSign === key);
  if (!def) throw new Error(`Missing FieldDef for CLASS_KEY ${key}`);
  return def;
});
var BACKGROUND_META_DEFS = BACKGROUND_KEYS.map((key) => {
  const def = ALL_FIELD_DEFS.find((d) => d.callSign === key);
  if (!def) throw new Error(`Missing FieldDef for BACKGROUND_KEY ${key}`);
  return def;
});
var FEATS_META_DEFS = FEATS_KEYS.map((key) => {
  const def = ALL_FIELD_DEFS.find((d) => d.callSign === key);
  if (!def) throw new Error(`Missing FieldDef for BACKGROUND_KEY ${key}`);
  return def;
});

// src/parsers/5e-2014/spells.ts
var SCHOOL_MAP = {
  A: "Abjuration",
  C: "Conjuration",
  D: "Divination",
  E: "Enchantment",
  V: "Evocation",
  I: "Illusion",
  N: "Necromancy",
  T: "Transmutation"
};
function ordinal(n) {
  const suffix = n === 1 ? "st" : n === 2 ? "nd" : n === 3 ? "rd" : "th";
  return `${n}${suffix}`;
}
function formatRange(range) {
  if (!range) return "";
  if (typeof range === "string") return range;
  if (range.type === "special") return "Special";
  if (range.type === "point" && range.distance) {
    const dist = range.distance;
    if (dist.type === "touch") return "Touch";
    if (dist.type === "self") return "Self";
    if (dist.type === "sight") return "Sight";
    if (dist.amount) return `${dist.amount} ${dist.type}`;
  }
  return "Varies";
}
function formatTime(time) {
  if (!Array.isArray(time)) return "";
  return time.map((t) => `${t.number} ${t.unit}`).join(", ");
}
function formatDuration(duration) {
  if (!Array.isArray(duration)) return "";
  return duration.map((d) => {
    if (d.type === "instant") return "Instantaneous";
    if (d.type === "timed" && d.duration) {
      return `${d.duration.amount} ${d.duration.type}${d.concentration ? " (concentration)" : ""}`;
    }
    if (d.type === "permanent") return "Permanent";
    return "Special";
  }).join(", ");
}
function formatComponents(components) {
  if (!components) return "";
  const parts = [];
  if (components.v) parts.push("V");
  if (components.s) parts.push("S");
  if (components.m) {
    let matDetails = [];
    if (Array.isArray(components.m)) {
      matDetails = components.m.map(
        (item) => typeof item === "string" ? item : item && typeof item.text === "string" ? item.text : null
      ).filter((t) => !!t);
    } else if (typeof components.m === "string") {
      matDetails = [components.m];
    } else if (components.m.text) {
      matDetails = [components.m.text];
    }
    const matPart = matDetails.length > 0 ? `M (${matDetails.join(", ")})` : "M";
    parts.push(matPart);
  }
  return parts.join(", ");
}
function parseSpellsFile(json, editionId) {
  if (!json.spell) return [];
  json._editionId = editionId;
  return json.spell.map((spell) => {
    const sources = spell.source ? Array.isArray(spell.source) ? spell.source : [spell.source] : ["unknown"];
    const name = spell.name;
    const school = SCHOOL_MAP[spell.school] ?? spell.school;
    const level = spell.level;
    const range = formatRange(spell.range);
    const castingTime = formatTime(spell.time);
    const duration = formatDuration(spell.duration);
    const formattedSources = sources.map((s) => getFullSourceName(s, editionId));
    const attackType = spell.attackType || "";
    const damageType = spell.damageInflict?.[0] || "Teleportation";
    const ritual = spell.ritual === true;
    const concentration = spell.duration?.some((d) => d.concentration) ?? false;
    const FM = buildFM(spell, SPELL_META_DEFS);
    const yaml = serializeFrontmatter(FM, SPELL_META_DEFS);
    const savingThrows = FM[FM_FIELDS.SAVING_THROWS] || [];
    const saveAttr = FM[FM_FIELDS.SAVE];
    const safeName = name.replace(/\//g, "-");
    const title = `# ${name}`;
    const levelLabel = level === 0 ? `${school} Cantrip` : `${ordinal(level)}-level ${school} Spell`;
    const subtitle = `### *${levelLabel}*${concentration ? " *(Concentration)*" : ""}`;
    const headerLines = [
      title,
      subtitle,
      `**Casting Time:** ${castingTime}`,
      `**Range:** ${range}`,
      `**Components:** ${formatComponents(spell.components)}`,
      ...savingThrows.length ? [`**Saving Throw:** ${savingThrows.join(", ")}`] : [],
      `**Duration:** ${duration}`
    ];
    const bodyLines = [
      ...(spell.entries ?? []).map((e) => formatEntry(e)),
      ...(spell.entriesHigherLevel ?? []).map((e) => formatEntry(e))
    ];
    const footerLines = [
      `---`,
      `**Source:** ${formattedSources.join(", ")}`
    ];
    return {
      path: `${safeName}.md`,
      content: [
        `---
${yaml}
---`,
        headerLines.join("\n"),
        ``,
        bodyLines.join("\n\n"),
        ``,
        footerLines.join("\n")
      ].join("\n")
    };
  });
}

// src/parsers/5e-2014/species.ts
function slug(name) {
  return name.replace(/;/g, ":").replace(/[\/:"]/g, ":").trim();
}
var BLOCKED_TRAITS = ["Age", "Size", "Languages", "Creature Type", "Speed"];
function linkDisplay(str) {
  if (typeof str !== "string") return String(str ?? "");
  const m = str.match(/^\[\[(.+?)\]\]$/);
  if (!m) return str;
  const inner = m[1];
  const pipe = inner.split("|");
  if (pipe.length > 1) return pipe[1].trim();
  const hash = inner.split("#");
  if (hash.length > 1) return hash[1].trim();
  return inner.trim();
}
function normName(n) {
  return String(n ?? "").replace(/^Feature:\s*/i, "").replace(/\s+/g, " ").trim().toLowerCase();
}
function findEntryByName(entries, display) {
  if (!Array.isArray(entries)) return null;
  const target = normName(display);
  const direct = entries.find((e) => typeof e?.name === "string" && normName(e.name) === target);
  if (direct) return direct;
  for (const e of entries) {
    if (Array.isArray(e?.entries)) {
      const sub = e.entries.find((s) => typeof s?.name === "string" && normName(s.name) === target);
      if (sub) return sub;
    }
  }
  return null;
}
function parseSpeciesFile(json, editionId) {
  if (!Array.isArray(json.race)) return [];
  json._editionId = editionId;
  const rawVariants = json.race.filter(
    (r) => !("reprintedAs" in r) && !/\((?:Kaladesh|Zendikar|Amonkhet|Innistrad|Ixalan)\)$/.test(r.name)
  );
  const byName = /* @__PURE__ */ new Map();
  for (const r of rawVariants) {
    const list = byName.get(r.name) ?? [];
    list.push(r);
    byName.set(r.name, list);
  }
  const subracesList = Array.isArray(json.subrace) ? json.subrace : [];
  const out = [];
  for (const [raceName, raceVariants] of byName.entries()) {
    const safeName = slug(raceName);
    const primary = raceVariants.reduce(
      (best, cur) => Object.keys(cur).length > Object.keys(best).length ? cur : best,
      raceVariants[0]
    );
    if (!primary.ability) {
      const humanEntry = subracesList.find(
        (sr) => sr.raceName === raceName && sr.raceSource === primary.source && !("name" in sr) && Array.isArray(sr.ability)
      );
      if (humanEntry) primary.ability = humanEntry.ability;
    }
    const fm = buildFM(primary, SPECIES_META_DEFS);
    const senses = [];
    if (primary.darkvision) senses.push(`Darkvision ${primary.darkvision} ft.`);
    if (primary.blindsight) senses.push(`Blindsight ${primary.blindsight} ft.`);
    if (primary.tremorsense) senses.push(`Tremorsense ${primary.tremorsense} ft.`);
    if (primary.truesight) senses.push(`Truesight ${primary.truesight} ft.`);
    if (senses.length) fm.senses = senses;
    if (Array.isArray(fm.traits)) {
      fm.traits = fm.traits.filter((t) => !BLOCKED_TRAITS.includes(t));
    }
    const yaml = serializeFrontmatter(fm, SPECIES_META_DEFS);
    const lines = [];
    lines.push(`# ${raceName}`, `## Stats`);
    const size = Array.isArray(primary.size) ? primary.size.map((s) => SIZE_MAP2[s] || s).join("/") : SIZE_MAP2[primary.size] ?? primary.size;
    lines.push(`**Size:** ${size}`);
    const speed = typeof primary.speed === "number" ? primary.speed : primary.speed?.walk ?? primary.speed?.base ?? 0;
    lines.push(`**Speed:** ${speed} ft. walking`);
    const kids = subracesList.filter(
      (sr) => sr.name && sr.raceName === raceName && sr.raceSource === primary.source
    );
    const rawAbility = Array.isArray(primary.ability) ? primary.ability : Array.isArray(kids[0]?.ability) ? kids[0].ability : [];
    if (Array.isArray(rawAbility) && rawAbility.length) {
      const bonuses = { str: 0, dex: 0, con: 0, int: 0, wis: 0, cha: 0 };
      let chooseOpt = null;
      for (const obj of rawAbility) {
        if ("choose" in obj) chooseOpt = obj.choose;
        else for (const [k, v] of Object.entries(obj)) bonuses[k] += v;
      }
      const pairs = Object.entries(bonuses);
      const parts = pairs.filter(([, v]) => v !== 0).map(([k, v]) => `${k.toUpperCase()} ${v >= 0 ? "+" : ""}${v}`);
      if (chooseOpt?.count && Array.isArray(chooseOpt.from)) {
        parts.push(`CHOOSE ${chooseOpt.count} from ${chooseOpt.from.map((s) => s.toUpperCase()).join(", ")}`);
      }
      if (parts.length) lines.push(`**Ability Scores:** ${parts.join(", ")}`);
    }
    const langs = fm.languages;
    if (langs?.length) lines.push(`**Languages:** ${langs.join(", ")}`);
    if (Array.isArray(primary.skillProficiencies)) {
      const skillLabels = [];
      for (const e of primary.skillProficiencies) {
        if (e.choose?.from) {
          skillLabels.push(`Choose from: ${e.choose.from.map((s) => s.charAt(0).toUpperCase() + s.slice(1)).join(", ")}`);
        } else {
          const val = e.proficiency ?? e.name ?? e;
          if (typeof val === "string") skillLabels.push(val.charAt(0).toUpperCase() + val.slice(1));
        }
      }
      if (skillLabels.length) lines.push(`**Skill Proficiencies:** ${skillLabels.join("; ")}`);
    }
    const tp = fm[FM_FIELDS.TOOL_PROFICIENCIES];
    const wp = fm[FM_FIELDS.WEAPON_PROFICIENCIES];
    const ap = fm[FM_FIELDS.ARMOR_PROFICIENCIES];
    if (tp?.length) lines.push(`**Tool Proficiencies:** ${tp.join(", ")}`);
    if (wp?.length) lines.push(`**Weapon Proficiencies:** ${wp.join(", ")}`);
    if (ap?.length) lines.push(`**Armor Proficiencies:** ${ap.join(", ")}`);
    lines.push(`## Traits`);
    const seen = /* @__PURE__ */ new Set();
    for (const trait of fm.traits || []) {
      const title = linkDisplay(trait);
      lines.push(`##### ${title}`);
      const ent = findEntryByName(primary.entries, title);
      if (ent?.entries) {
        ent.entries.forEach((sub, idx) => {
          let blk;
          if (sub.type === "table") {
            blk = renderMarkdownTable(sub);
          } else if (sub.type === "list") {
            blk = sub.items.map((it) => typeof it === "string" ? `- ${replace5eTags(it)}` : `- ${it.name}`).join("\n");
          } else if (typeof sub === "string") {
            blk = replace5eTags(sub);
          }
          if (blk && !seen.has(blk)) {
            lines.push(blk);
            seen.add(blk);
            if (ent.entries.length > 1 && idx < ent.entries.length - 1) lines.push("");
          }
        });
      }
    }
    const subs = kids;
    if (subs.length) {
      out.push({
        path: `Species/${safeName}/${safeName}.md`,
        content: `---
${yaml}
---

${lines.join("\n")}`
      });
      const subFolder = `Species/${safeName}/Races`;
      for (const sr of subs) {
        const display = sr.name.replace(/;/g, ":");
        const subLines = [`# ${display}`];
        if (Array.isArray(sr.ability)) {
          const bonuses = { str: 0, dex: 0, con: 0, int: 0, wis: 0, cha: 0 };
          let chooseOpt = null;
          for (const obj of sr.ability) {
            if ("choose" in obj) chooseOpt = obj.choose;
            else for (const [k, v] of Object.entries(obj)) bonuses[k] += v;
          }
          const pairs = Object.entries(bonuses);
          const parts = pairs.filter(([, v]) => v !== 0).map(([k, v]) => `${k.toUpperCase()} ${v >= 0 ? "+" : ""}${v}`);
          if (chooseOpt?.count) parts.push(`CHOOSE ${chooseOpt.count} from ${chooseOpt.from.map((s) => s.toUpperCase()).join(", ")}`);
          if (parts.length) subLines.push(`**Ability Scores:** ${parts.join(", ")}`);
        }
        for (const entry of sr.entries || []) {
          subLines.push(formatEntry(entry));
          subLines.push("");
        }
        const subYaml = serializeFrontmatter(buildFM(sr, SPECIES_META_DEFS), SPECIES_META_DEFS);
        out.push({
          path: `${subFolder}/${slug(sr.name)}.md`,
          content: `---
${subYaml}
---

${subLines.join("\n")}`
        });
      }
    } else {
      out.push({
        path: `Species/${safeName}.md`,
        content: `---
${yaml}
---

${lines.join("\n")}`
      });
    }
  }
  return out.sort((a, b) => a.path.localeCompare(b.path));
}

// src/parsers/5e-2014/classes.ts
function formatFeatureLink(name) {
  const ignore = ["Ability Score Improvement", "Archetype Feature", "Subclass Feature"];
  if (ignore.some((sub) => name.toLowerCase().includes(sub.toLowerCase()))) {
    return name;
  }
  const anchor = name.replace(/[^\w\s]/g, "").replace(/-/g, " ").replace(/\s+/g, " ").trim().replace(/\b\w/g, (l) => l.toUpperCase());
  return `[[#${anchor}]]`;
}
function toHeaderAnchor(name) {
  return name.replace(/[^\w\s]/g, "").replace(/-/g, " ").replace(/\s+/g, " ").trim().replace(/\b\w/g, (l) => l.toUpperCase());
}
var OPT_FEATURE_TYPE_TO_FULL = {
  AI: "Artificer Infusion",
  ED: "Elemental Discipline",
  EI: "Eldritch Invocation",
  MM: "Metamagic",
  MV: "Maneuver",
  "MV:B": "Maneuver, Battle Master",
  "MV:C2-UA": "Maneuver, Cavalier V2 (UA)",
  "AS:V1-UA": "Arcane Shot, V1 (UA)",
  "AS:V2-UA": "Arcane Shot, V2 (UA)",
  AS: "Arcane Shot",
  OTH: "Other",
  "FS:F": "Fighting Style; Fighter",
  "FS:B": "Fighting Style; Bard",
  "FS:P": "Fighting Style; Paladin",
  "FS:R": "Fighting Style; Ranger",
  PB: "Pact Boon",
  OR: "Onomancy Resonant",
  RN: "Rune Knight Rune",
  AF: "Alchemical Formula",
  TT: "Traveler's Trick"
};
function parseClassFile(json, editionId, fileName, optionalFeatures) {
  json._editionId = editionId;
  const cls = Array.isArray(json.class) ? json.class[0] : json;
  const className = typeof cls.name === "string" ? cls.name : fileName ? fileName.replace(/^class-/, "").replace(/\.json$/, "") : "Unknown";
  const subclassFiles = [];
  const PROF_BONUS_BY_LEVEL = [
    "+2",
    "+2",
    "+2",
    "+2",
    "+3",
    "+3",
    "+3",
    "+3",
    "+4",
    "+4",
    "+4",
    "+4",
    "+5",
    "+5",
    "+5",
    "+5",
    "+6",
    "+6",
    "+6",
    "+6"
  ];
  const hdNum = cls.hd?.number ?? 1;
  const hdFaces = cls.hd?.faces ?? 6;
  const hdStr = `${hdNum}d${hdFaces}`;
  const hdMax = hdNum * hdFaces;
  const hdAvg = Math.ceil((hdFaces + 1) / 2);
  const baseFM = buildFM(cls, CLASS_META_DEFS);
  const fm = { ...baseFM, hd: hdStr };
  const yaml = serializeFrontmatter(fm, CLASS_META_DEFS);
  const lines = [];
  lines.push(`# ${className}`);
  if (cls.source) lines.push(`**Source:** ${cls.source}`);
  lines.push(``);
  lines.push(`---`);
  lines.push(`## Hit Points`);
  lines.push(`**Hit Dice:** ${hdStr} per ${className} level`);
  lines.push(`**Hit Points at 1st Level:** ${hdMax} + your Constitution modifier`);
  lines.push(
    `**Hit Points at Higher Levels:** ${hdStr} (or ${hdAvg}) + your Constitution modifier per level after 1st`
  );
  lines.push(``);
  lines.push(`---`);
  lines.push(`## Proficiencies`);
  const sp = cls.startingProficiencies ?? {};
  if (Array.isArray(sp.armor) && sp.armor.length) {
    lines.push(`- **Armor:** ${sp.armor.join(", ")}`);
  }
  const weaponList = unifiedWeaponProfs(sp);
  if (weaponList.length) {
    lines.push(`- **Weapons:** ${weaponList.join(", ")}`);
  }
  const toolList = unifiedToolProfs(sp);
  if (toolList.length) {
    lines.push(`- **Tools:** ${toolList.join(", ")}`);
  }
  const saves = Array.isArray(cls.proficiency) ? cls.proficiency.map(
    (k) => ({
      str: "Strength",
      dex: "Dexterity",
      con: "Constitution",
      int: "Intelligence",
      wis: "Wisdom",
      cha: "Charisma"
    })[k] || k.toUpperCase()
  ) : [];
  if (saves.length) {
    lines.push(`- **Saving Throws:** ${saves.join(", ")}`);
  }
  {
    const rawSkills = Array.isArray(sp.skillProficiencies) ? sp.skillProficiencies : Array.isArray(sp.skills) ? sp.skills : Array.isArray(sp.skillProf) ? sp.skillProf : [];
    const choiceEntry = rawSkills.find(
      (e) => e && (typeof e.choose === "object" || typeof e.any === "number")
    );
    if (choiceEntry) {
      const count = choiceEntry.choose?.count ?? choiceEntry.any ?? 1;
      const options = Array.isArray(choiceEntry.choose?.from) ? choiceEntry.choose.from.map(
        (s) => (
          // title-case each word (or just use s)
          s.split(" ").map((w) => w[0].toUpperCase() + w.slice(1)).join(" ")
        )
      ) : SKILL_OPTIONS;
      lines.push(`- **Skills (Choose ${count}):** ${options.join(", ")}`);
    } else {
      const flat = unifiedSkills2(sp);
      if (flat.length) {
        lines.push(`- **Skills:** ${flat.join(", ")}`);
      }
    }
  }
  if (Array.isArray(cls.startingEquipment)) {
    lines.push(`
### Equipment`);
    cls.startingEquipment.filter((e) => typeof e === "string").forEach((item) => lines.push(`- ${item}`));
  }
  const progGroups = cls.classTableGroups ?? [];
  const maxLevel = 20;
  if (!progGroups.length) {
    lines.push(`*(No class table provided for this class.)*`);
  } else {
    const featuresByLevel2 = {};
    for (const feat of cls.classFeatures ?? []) {
      const raw = typeof feat === "object" && feat.classFeature ? feat.classFeature : String(feat);
      const [name, , , lvlStr] = raw.split("|");
      const lvl = Number(lvlStr ?? 0);
      if (!featuresByLevel2[lvl]) featuresByLevel2[lvl] = [];
      featuresByLevel2[lvl].push(name);
    }
    const allLabelsSet = /* @__PURE__ */ new Set();
    const rowMaps = {};
    for (const group of progGroups) {
      const labels = Array.isArray(group.colLabels) ? group.colLabels.map((l) => replace5eTags(l)) : [];
      const rows = Array.isArray(group.rows) ? group.rows : Array.isArray(group.rowsSpellProgression) ? group.rowsSpellProgression : [];
      if (!labels.length || !rows.length) continue;
      for (let lvl = 0; lvl < rows.length; lvl++) {
        const levelNum = lvl + 1;
        if (!rowMaps[levelNum]) rowMaps[levelNum] = {};
        const rowMap = rowMaps[levelNum];
        const cells = rows[lvl];
        for (let i = 0; i < labels.length; i++) {
          const label = labels[i];
          let val = "";
          const cell = cells[i];
          if (Array.isArray(cell)) {
            val = cell.join(", ");
          } else if (cell && typeof cell === "object" && "value" in cell) {
            val = String(cell.value);
          } else {
            val = String(cell ?? "");
          }
          allLabelsSet.add(label);
          rowMap[label] = val;
        }
      }
    }
    const allLabels = Array.from(allLabelsSet).filter(
      (lbl) => !/Cantrips Known|Spells Known|\d+(st|nd|rd|th)/.test(lbl)
    );
    const mergedLabels = ["Level", "Proficiency Bonus", "Class Features", ...allLabels];
    const mergedRows = [];
    for (let lvl = 1; lvl <= maxLevel; lvl++) {
      const featureList = (featuresByLevel2[lvl] ?? []).map(formatFeatureLink);
      const rowMap = rowMaps[lvl] ?? {};
      mergedRows.push([
        lvl.toString(),
        PROF_BONUS_BY_LEVEL[lvl - 1] || "",
        featureList.join(", ").replace(/\|/g, "&#124;"),
        ...allLabels.map((label) => rowMap[label] ?? "")
      ]);
    }
    lines.push(`
> [!example]- Class Progression Table`);
    lines.push(
      renderMarkdownTable({
        type: "table",
        caption: "",
        colLabels: mergedLabels,
        rows: mergedRows
      })
    );
  }
  const csGroup = progGroups.find(
    (g) => Array.isArray(g.colLabels) && g.colLabels.some((lbl) => /Cantrips Known|Spells Known/.test(String(lbl)))
  );
  const slotGroup = progGroups.find(
    (g) => Array.isArray(g.colLabels) && g.title === "Spell Slots per Spell Level"
  );
  if (csGroup && slotGroup) {
    const csLabels = csGroup.colLabels.map((l) => replace5eTags(l));
    const slotLabels = slotGroup.colLabels.map((l) => replace5eTags(l));
    const csRows = csGroup.rows || [];
    const slotRows = slotGroup.rowsSpellProgression || [];
    const colLabels = ["Level", ...csLabels, ...slotLabels];
    const spellRows = [];
    for (let i = 0; i < Math.max(csRows.length, slotRows.length); i++) {
      const lvl = String(i + 1);
      const csCells = csRows[i] ? csRows[i].map(String) : csLabels.map((_) => "");
      const slotCells = slotRows[i] ? slotRows[i].map(String) : slotLabels.map((_) => "");
      spellRows.push([lvl, ...csCells, ...slotCells]);
    }
    lines.push(`
> [!tip]- Spell Progression Table`);
    lines.push(
      renderMarkdownTable({
        type: "table",
        caption: "",
        colLabels,
        rows: spellRows
      })
    );
  }
  const subs = Array.isArray(json.subclass) ? json.subclass : [];
  const subclassFeatures = Array.isArray(json.subclassFeature) ? json.subclassFeature : json.lookup?.subclassFeature ?? [];
  for (const sc of subs) {
    const subclassName = sc.name;
    const subLines = [];
    subLines.push(`# ${subclassName}`);
    subLines.push(`**Parent Class:** [[${className}]]`);
    if (sc.source) subLines.push(`**Source:** ${sc.source}`);
    subLines.push(``);
    const intro = subclassFeatures.find(
      (f) => f.name === sc.name && f.level === 3 && f.subclassShortName === sc.shortName && f.subclassSource === sc.source
    );
    if (intro?.entries?.length) {
      const introText = Array.isArray(intro.entries) ? intro.entries.map(
        (e) => typeof e === "string" ? replace5eTags(e) : formatEntry(e)
      ).join("\n\n") : formatEntry(intro.entries);
      subLines.push(introText, ``);
    }
    const code = Object.entries(OPT_FEATURE_TYPE_TO_FULL).find(
      ([, full]) => full.toLowerCase().includes(subclassName.toLowerCase())
    )?.[0];
    if (code) {
      const matches = optionalFeatures.filter(
        (of) => Array.isArray(of.featureType) && of.featureType.includes(code)
      );
      if (matches.length) {
        subLines.push(`## ${subclassName} Optional Features`);
        for (const feat of matches) {
          for (const entry of feat.entries) {
            const txt = typeof entry === "string" ? replace5eTags(entry) : formatEntry(entry);
            subLines.push(`**${feat.name}:** ${txt}`);
          }
          subLines.push(``);
        }
      }
    }
    const prog = sc.subclassTableGroups ?? [];
    if (prog.length) {
      const labels = /* @__PURE__ */ new Set();
      const rowsMap = {};
      for (const g of prog) {
        const cols = (g.colLabels ?? []).map(replace5eTags);
        const rows = Array.isArray(g.rows) ? g.rows : Array.isArray(g.rowsSpellProgression) ? g.rowsSpellProgression : [];
        rows.forEach((r, i) => {
          const lvl = i + 1;
          rowsMap[lvl] ?? (rowsMap[lvl] = {});
          r.forEach((c, j) => {
            const lab = cols[j];
            if (!lab) return;
            labels.add(lab);
            rowsMap[lvl][lab] = typeof c === "object" && c !== null && "value" in c ? String(c.value) : String(c ?? "");
          });
        });
      }
      const hdrs = Array.from(labels);
      subLines.push(`## Subclass Progression`);
      subLines.push(renderMarkdownTable({
        type: "table",
        caption: "",
        colLabels: ["Level", ...hdrs],
        rows: Array.from({ length: 20 }, (_, i) => {
          const lvl = i + 1;
          return [String(lvl), ...hdrs.map((h) => rowsMap[lvl]?.[h] ?? "")];
        })
      }));
    }
    const featsByLvl = {};
    for (const f of subclassFeatures) {
      if (f.subclassShortName === sc.shortName && f.subclassSource === sc.source && f.className === className) {
        const lvl = f.level ?? 0;
        ;
        (featsByLvl[lvl] ?? (featsByLvl[lvl] = [])).push(f);
      }
    }
    const IGNORE_TRAITS = ["Ability Score Improvement", "Archetype Feature", "Subclass Feature"];
    const traitNames = Array.from(
      new Set(
        Object.values(featsByLvl).flat().map((f) => String(f?.name || "").trim()).filter((n) => n && !IGNORE_TRAITS.some((s) => n.toLowerCase().includes(s.toLowerCase())))
      )
    );
    const traitLinks = traitNames.map((n) => `[[${subclassName}#${toHeaderAnchor(n)}|${n}]]`);
    const subYaml = serializeFrontmatter({ traits: traitLinks }, CLASS_META_DEFS);
    for (const lvl of Object.keys(featsByLvl).map(Number).sort((a, b) => a - b)) {
      subLines.push(`---`, `## Level ${lvl}`);
      for (const f of featsByLvl[lvl]) {
        subLines.push(`### ${f.name}`);
        for (const ent of Array.isArray(f.entries) ? f.entries : [f.entries]) {
          if (typeof ent === "string") {
            subLines.push(replace5eTags(ent));
            continue;
          }
          if (ent.type === "entries" && /^Maneuvers$/i.test(ent.name)) {
            subLines.push(`##### ${ent.name}`);
            for (const txt of Array.isArray(ent.entries) ? ent.entries : [ent.entries]) {
              subLines.push(typeof txt === "string" ? replace5eTags(txt) : formatEntry(txt));
            }
            const code2 = Object.entries(OPT_FEATURE_TYPE_TO_FULL).find(
              ([, full]) => full.toLowerCase().includes(subclassName.toLowerCase())
            )?.[0];
            if (code2) {
              const matches = optionalFeatures.filter(
                (of) => Array.isArray(of.featureType) && of.featureType.includes(code2)
              );
              for (const featDef of matches) {
                for (const sub of featDef.entries) {
                  const line = typeof sub === "string" ? replace5eTags(sub) : formatEntry(sub);
                  subLines.push(`**${featDef.name}:** ${line}`);
                }
                subLines.push("");
              }
            }
            continue;
          }
          if (ent.type === "entries" && ent.name) {
            subLines.push(`##### ${ent.name}`);
            for (const e2 of Array.isArray(ent.entries) ? ent.entries : [ent.entries]) {
              subLines.push(formatEntry(e2));
            }
            continue;
          }
          if (ent.type === "inset" && ent.name) {
            const inner = Array.isArray(ent.entries) ? ent.entries : [ent.entries];
            subLines.push(`> **${ent.name}**`);
            inner.forEach((e2) => subLines.push(`> ${formatEntry(e2)}`));
            continue;
          }
          const fb = formatEntry(ent);
          if (fb) subLines.push(fb);
        }
      }
    }
    const subclassContentBody = subLines.join("\n\n").replace(/\n{3,}/g, "\n\n");
    const subclassContent = `---
${subYaml}
---

${subclassContentBody}`;
    subclassFiles.push({
      path: `Classes/${className}/Subclasses/${subclassName}.md`,
      content: subclassContent
    });
  }
  if (subs.length) {
    const links = subs.map(
      (sc) => `[[Subclasses/${sc.name.replace(/[\\/]/g, "-")}|${sc.name}]]`
    );
    lines.push(`
**Subclasses:** ${links.join(", ")}`);
  }
  const allFeatures = Array.isArray(json.classFeature) ? json.classFeature : json.lookup?.classFeature ?? [];
  const featuresByLevel = {};
  for (const entry of allFeatures) {
    if (entry.className !== className) continue;
    const lvl = entry.level ?? 0;
    if (!featuresByLevel[lvl]) featuresByLevel[lvl] = [];
    featuresByLevel[lvl].push(entry);
  }
  lines.push(``);
  lines.push(`---`);
  lines.push(`## Level Features`);
  const levels = Object.keys(featuresByLevel).map((n) => +n).sort((a, b) => a - b);
  for (const lvl of levels) {
    lines.push(`### Level ${lvl}`);
    for (const feat of featuresByLevel[lvl]) {
      lines.push(`#### ${feat.name}`);
      const entries = Array.isArray(feat.entries) ? feat.entries : [feat.entries];
      for (const ent of entries) {
        if (typeof ent === "string") {
          const txt = formatEntry(ent).trim();
          if (txt === "{" || txt === "}") continue;
          lines.push(txt);
          continue;
        }
        if (ent.type === "list" && Array.isArray(ent.items)) {
          for (const item of ent.items) {
            lines.push(`- ${replace5eTags(item)}`);
          }
          continue;
        }
        if (ent.type === "options") {
          if (ent.count) {
            lines.push("");
            lines.push(`**Choose ${ent.count} of the following options:**`);
            lines.push("");
          }
          for (const optRef of Array.isArray(ent.entries) ? ent.entries : [ent.entries]) {
            if (optRef.type === "refOptionalfeature") {
              const [optName, optSrc] = optRef.optionalfeature.split("|");
              const featDef = optionalFeatures.find(
                (f) => f.name === optName && (!optSrc || f.source === optSrc)
              );
              if (featDef) {
                featDef.entries.forEach((subEntry, idx) => {
                  const text = typeof subEntry === "string" ? replace5eTags(subEntry) : formatEntry(subEntry);
                  if (idx === 0) {
                    lines.push(`- **${featDef.name}:** ${text}`);
                  } else {
                    lines.push(`  - ${text}`);
                  }
                });
                lines.push("");
              } else {
                lines.push(`**${optName}:**`);
              }
            } else {
              const txt = formatEntry(optRef);
              if (txt) lines.push(`- ${txt}`);
            }
          }
          continue;
        }
        if (ent.type === "refOptionalfeature") {
          const [name] = ent.optionalfeature.split("|");
          lines.push(`- [[${name}|${name}]]`);
          continue;
        }
        if (ent.type === "entries" && ent.name) {
          lines.push(`##### ${ent.name}`);
          const inner = Array.isArray(ent.entries) ? ent.entries : [ent.entries];
          for (const e2 of inner) {
            lines.push(formatEntry(e2));
          }
          continue;
        }
        const fallback = formatEntry(ent);
        if (fallback) lines.push(fallback);
      }
      lines.push(``);
    }
    lines.push(`---`);
  }
  let content = `---
${yaml}
---

${lines.join("\n")}`;
  content = replace5eTags(content);
  content = content.replace(/\n{3,}/g, "\n\n").replace(/\n +\n/g, "\n\n");
  return [
    {
      path: `Classes/${className}/${className}.md`,
      content
    },
    ...subclassFiles
  ];
}

// src/parsers/5e-2014/rules.ts
function parseActionsFile(json, editionId) {
  if (!Array.isArray(json.action)) return [];
  const lines = [];
  for (const action of json.action) {
    lines.push(`## ${action.name}`);
    const entries = Array.isArray(action.entries) ? action.entries : [action.entries];
    for (const entry of entries) {
      if (!entry) continue;
      if (typeof entry === "string") {
        const paras = entry.split(/\n{2,}/);
        for (const para of paras) {
          const t = para.trim();
          if (t) {
            lines.push(replace5eTags(t));
            lines.push("");
          }
        }
      } else if (entry.type === "list" && Array.isArray(entry.items)) {
        for (const item of entry.items) {
          lines.push(`- ${replace5eTags(item)}`);
        }
        lines.push("");
      } else if ((entry.type === "entries" || entry.type === "inset") && Array.isArray(entry.entries)) {
        lines.push(`### ${entry.name}`);
        for (const sub of entry.entries) {
          if (typeof sub === "string") {
            const ps = sub.split(/\n{2,}/);
            for (const p of ps) {
              const tt = p.trim();
              if (tt) {
                lines.push(replace5eTags(tt));
                lines.push("");
              }
            }
          } else if (sub.type === "list" && Array.isArray(sub.items)) {
            for (const li of sub.items) {
              lines.push(`- ${replace5eTags(li)}`);
            }
            lines.push("");
          } else {
            const txt = Array.isArray(sub) ? sub.join(" ") : typeof sub === "object" ? JSON.stringify(sub) : String(sub);
            lines.push(replace5eTags(txt));
            lines.push("");
          }
        }
      } else if (entry.type === "table" && Array.isArray(entry.rows)) {
        const headers = entry.colLabels || [];
        lines.push(`| ${headers.join(" | ")} |`);
        lines.push(`| ${headers.map(() => "---").join(" | ")} |`);
        for (const row of entry.rows) {
          lines.push(`| ${row.join(" | ")} |`);
        }
        lines.push("");
      } else {
        const txt = Array.isArray(entry) ? entry.join(" ") : typeof entry === "object" ? JSON.stringify(entry) : String(entry);
        lines.push(replace5eTags(txt));
        lines.push("");
      }
    }
    lines.push("---");
  }
  const cleaned = lines.reduce((acc, curr) => {
    if (curr === "" && acc.length && acc[acc.length - 1] === "") return acc;
    return acc.concat(curr);
  }, []);
  return [
    {
      path: "Rules and Reference/Actions.md",
      content: cleaned.join("\n").trim() + "\n"
    }
  ];
}
function parseConditionsDiseasesFile(json, editionId) {
  const outputs = [];
  const processItems = (items, outPath) => {
    const lines = [];
    for (const item of items) {
      lines.push(`## ${item.name}`);
      const entries = Array.isArray(item.entries) ? item.entries : [item.entries];
      for (const entry of entries) {
        if (!entry) continue;
        if (typeof entry === "string") {
          const paras = entry.split(/\n{2,}/);
          for (const para of paras) {
            const t = para.trim();
            if (t) {
              lines.push(replace5eTags(t));
              lines.push("");
            }
          }
        } else if (entry.type === "list" && Array.isArray(entry.items)) {
          for (const txt of entry.items) {
            lines.push(`- ${replace5eTags(txt)}`);
          }
          lines.push("");
        } else if (entry.type === "table" && Array.isArray(entry.rows)) {
          const headers = entry.colLabels || [];
          lines.push(`| ${headers.join(" | ")} |`);
          lines.push(`| ${headers.map(() => "---").join(" | ")} |`);
          for (const row of entry.rows) {
            lines.push(`| ${row.join(" | ")} |`);
          }
          lines.push("");
        } else if (entry.type === "entries" && Array.isArray(entry.entries)) {
          lines.push(`### ${entry.name}`);
          for (const sub of entry.entries) {
            const txt = typeof sub === "string" ? sub : String(sub);
            lines.push(replace5eTags(txt));
            lines.push("");
          }
        } else {
          const txt = Array.isArray(entry) ? entry.join(" ") : String(entry);
          lines.push(replace5eTags(txt));
          lines.push("");
        }
      }
      lines.push("---");
    }
    const cleaned = lines.reduce((acc, curr) => {
      if (curr === "" && acc.length && acc[acc.length - 1] === "") return acc;
      return acc.concat(curr);
    }, []);
    outputs.push({ path: outPath, content: cleaned.join("\n").trim() + "\n" });
  };
  processItems(json.condition || [], "Rules and Reference/Conditions.md");
  processItems(json.disease || [], "Rules and Reference/Diseases.md");
  return outputs;
}
function parseSensesFile(json, editionId) {
  const items = Array.isArray(json.sense) ? json.sense : Array.isArray(json.senses) ? json.senses : [];
  if (!items.length) return [];
  const lines = [];
  for (const sense of items) {
    lines.push(`## ${sense.name}`);
    const entries = Array.isArray(sense.entries) ? sense.entries : [sense.entries];
    for (const entry of entries) {
      if (!entry) continue;
      if (typeof entry === "string") {
        const paras = entry.split(/\n{2,}/);
        for (const para of paras) {
          const t = para.trim();
          if (t) {
            lines.push(replace5eTags(t));
            lines.push("");
          }
        }
      } else if (entry.type === "list" && Array.isArray(entry.items)) {
        for (const item of entry.items) {
          lines.push(`- ${replace5eTags(item)}`);
        }
        lines.push("");
      } else if ((entry.type === "entries" || entry.type === "inset") && Array.isArray(entry.entries)) {
        lines.push(`### ${entry.name}`);
        for (const sub of entry.entries) {
          const txt = typeof sub === "string" ? sub : String(sub);
          lines.push(replace5eTags(txt));
          lines.push("");
        }
      } else if (entry.type === "table" && Array.isArray(entry.rows)) {
        const headers = entry.colLabels || [];
        lines.push(`| ${headers.join(" | ")} |`);
        lines.push(`| ${headers.map(() => "---").join(" | ")} |`);
        for (const row of entry.rows) {
          lines.push(`| ${row.join(" | ")} |`);
        }
        lines.push("");
      } else {
        const txt = Array.isArray(entry) ? entry.join(" ") : String(entry);
        lines.push(replace5eTags(txt));
        lines.push("");
      }
    }
    lines.push("---");
  }
  const cleaned = lines.reduce((acc, curr) => {
    if (curr === "" && acc.length && acc[acc.length - 1] === "") return acc;
    return acc.concat(curr);
  }, []);
  return [
    {
      path: "Rules and Reference/Senses.md",
      content: cleaned.join("\n").trim() + "\n"
    }
  ];
}
function parseSkillsFile(json, editionId) {
  const items = Array.isArray(json.skill) ? json.skill : Array.isArray(json.skills) ? json.skills : [];
  if (!items.length) return [];
  const lines = [];
  for (const skill of items) {
    lines.push(`## ${skill.name}`);
    if (skill.ability) {
      lines.push(`*Ability: ${skill.ability}*`);
      lines.push("");
    }
    const entries = Array.isArray(skill.entries) ? skill.entries : [skill.entries];
    for (const entry of entries) {
      if (!entry) continue;
      if (typeof entry === "string") {
        const paras = entry.split(/\n{2,}/);
        for (const para of paras) {
          const t = para.trim();
          if (t) {
            lines.push(replace5eTags(t));
            lines.push("");
          }
        }
      } else if (entry.type === "list" && Array.isArray(entry.items)) {
        for (const item of entry.items) {
          lines.push(`- ${replace5eTags(item)}`);
        }
        lines.push("");
      } else {
        const txt = Array.isArray(entry) ? entry.join(" ") : String(entry);
        lines.push(replace5eTags(txt));
        lines.push("");
      }
    }
    lines.push("---");
  }
  const cleaned = lines.reduce((acc, curr) => {
    if (curr === "" && acc.length && acc[acc.length - 1] === "") return acc;
    return acc.concat(curr);
  }, []);
  return [
    {
      path: "Rules and Reference/Skills.md",
      content: cleaned.join("\n").trim() + "\n"
    }
  ];
}

// src/parsers/5e-2014/feats.ts
function parseFeatsFile(json, editionId) {
  const feats = Array.isArray(json.feat) ? json.feat : Array.isArray(json.feats) ? json.feats : [];
  return feats.map((feat) => {
    const lines = [];
    const fm = buildFM({ ...feat, _editionId: editionId }, FEATS_META_DEFS);
    lines.push("---");
    lines.push(serializeFrontmatter(fm, FEATS_META_DEFS));
    lines.push("---", "");
    lines.push(`# ${feat.name}`, "");
    const prereqs = [];
    if (Array.isArray(feat.prerequisite)) {
      feat.prerequisite.forEach((pr) => {
        if (pr.level) prereqs.push(`Level ${pr.level}`);
        if (Array.isArray(pr.feat)) {
          pr.feat.forEach((f) => {
            const name = f.split("|")[0].replace(/\b\w/g, (c) => c.toUpperCase());
            prereqs.push(`Prerequisite: [[${name}]]`);
          });
        }
      });
    }
    if (feat.spellcastingPrepared) prereqs.push(`Prerequisite: Spellcaster`);
    if (Array.isArray(feat.toolProficiencies)) {
      feat.toolProficiencies.forEach((tp) => {
        Object.entries(tp).forEach(([key]) => {
          if (key === "anyArtisansTool") {
            prereqs.push(`Prerequisite: Proficient with an artisan's tool`);
          } else {
            prereqs.push(`Prerequisite: Proficient with ${key.replace(/([A-Z])/g, " $1").trim()}`);
          }
        });
      });
    }
    if (Array.isArray(feat.armorProficiencies)) {
      feat.armorProficiencies.forEach((arm) => {
        const armStr = typeof arm === "string" ? arm : JSON.stringify(arm);
        prereqs.push(`Prerequisite: Proficient with ${armStr.replace(/([A-Z])/g, " $1").trim()}`);
      });
    }
    if (feat.race) prereqs.push(`Prerequisite: ${feat.race}`);
    if (prereqs.length) {
      lines.push("**Prerequisites**");
      prereqs.forEach((p) => lines.push(`- ${p}`));
      lines.push("");
    }
    const entries = Array.isArray(feat.entries) ? feat.entries : [feat.entries];
    entries.forEach((entry) => {
      if (!entry) return;
      if (typeof entry === "string") {
        entry.split(/\n{2,}/).forEach((p) => {
          const t = p.trim();
          if (t) {
            lines.push(replace5eTags(t));
            lines.push("");
          }
        });
      } else if (entry.type === "list" && Array.isArray(entry.items)) {
        entry.items.forEach((it) => {
          if (typeof it === "string") {
            lines.push(`- ${replace5eTags(it)}`);
          } else if (it.type === "item" && it.name) {
            lines.push(`- **${it.name}**`);
            const subs = Array.isArray(it.entries) ? it.entries : [it.entries];
            subs.forEach(
              (s) => lines.push(`  - ${replace5eTags(typeof s === "string" ? s : JSON.stringify(s))}`)
            );
          }
        });
        lines.push("");
      } else if (entry.type === "inset") {
        lines.push(`- *${entry.name}*`);
        const subs = Array.isArray(entry.entries) ? entry.entries : [entry.entries];
        subs.forEach((s) => lines.push(`  - ${replace5eTags(s)}`));
        lines.push("");
      } else if ((entry.type === "section" || entry.type === "entries") && Array.isArray(entry.entries)) {
        if (entry.name) {
          lines.push(`## ${entry.name}`);
          lines.push("");
        }
        entry.entries.forEach((s) => {
          lines.push(replace5eTags(typeof s === "string" ? s : JSON.stringify(s)));
          lines.push("");
        });
      } else if (entry.type === "table" && Array.isArray(entry.rows)) {
        const hdr = entry.colLabels || [];
        lines.push(`| ${hdr.join(" | ")} |`);
        lines.push(`| ${hdr.map(() => "---").join(" | ")} |`);
        entry.rows.forEach(
          (row) => lines.push(`| ${row.join(" | ")} |`)
        );
        lines.push("");
      }
    });
    return {
      path: `Player Build/Feats/${feat.name}.md`,
      content: lines.join("\n").trim() + "\n"
    };
  });
}

// src/parsers/5e-2014/backgrounds.ts
function parseBackgroundsFile(json, editionId) {
  const raw = Array.isArray(json.background) ? json.background : Array.isArray(json.backgrounds) ? json.backgrounds : [];
  const backgrounds = raw.filter((bg) => {
    const nm = bg.name || "";
    return !nm.startsWith("Variant") && !nm.includes("Baldur's Gate");
  });
  const outputs = [];
  backgrounds.forEach((bg) => {
    const lines = [];
    const fm = buildFM(bg, BACKGROUND_META_DEFS);
    const extraTraits = Array.isArray(bg.entries) ? bg.entries.filter((e) => e.data?.isFeature && typeof e.name === "string").map((e) => {
      const name = e.name.replace(/^Feature:\s*/, "");
      return `[[${bg.name}#${name}]]`;
    }) : [];
    const yaml = serializeFrontmatter(fm, BACKGROUND_META_DEFS);
    lines.push("---", yaml, "---", "");
    lines.push(`# ${bg.name}`, "");
    if (Array.isArray(bg.skillProficiencies) && bg.skillProficiencies.length) {
      const skills = [];
      bg.skillProficiencies.forEach((ent) => {
        if (typeof ent === "string") {
          skills.push(cap2(ent));
        } else if (ent.choose && Array.isArray(ent.choose.from)) {
          skills.push(`Choose ${ent.choose.amount} from ${ent.choose.from.join(", ")}`);
        } else {
          Object.entries(ent).filter(([, v]) => v === true).forEach(([k]) => skills.push(cap2(k)));
        }
      });
      lines.push(`**Skill Proficiencies:** ${skills.join(", ")}`, "");
    }
    if (Array.isArray(bg.languageProficiencies) && bg.languageProficiencies.length) {
      const langs = [];
      bg.languageProficiencies.forEach((ent) => {
        if (ent.anyStandard) {
          langs.push(`${ent.anyStandard} of your choice`);
        } else {
          Object.entries(ent).filter(([, v]) => v === true).forEach(([k]) => langs.push(cap2(k)));
        }
      });
      lines.push(`**Languages:** ${langs.join(", ")}`, "");
    }
    if (Array.isArray(bg.toolProficiencies) && bg.toolProficiencies.length) {
      const tools = [];
      bg.toolProficiencies.forEach((ent) => {
        if (ent.choose && Array.isArray(ent.choose.from)) {
          const list = ent.choose.from.map(humanize).join(", ");
          tools.push(`Choose ${ent.choose.count} from ${list}`);
          return;
        }
        if (typeof ent === "string") {
          tools.push(humanize(ent));
          return;
        }
        Object.entries(ent).filter(([_, v]) => v === true).forEach(([k]) => tools.push(humanize(k)));
      });
      lines.push(`**Tool Proficiencies:** ${tools.join(", ")}`, "");
    }
    if (Array.isArray(bg.startingEquipment) && bg.startingEquipment.length) {
      lines.push(`**Equipment:**`);
      bg.startingEquipment.forEach((grp) => {
        if (Array.isArray(grp._)) {
          grp._.forEach((it) => lines.push(`- ${fmtItem(it)}`));
        }
        ["a", "b"].forEach((key) => {
          if (Array.isArray(grp[key])) {
            grp[key].forEach((it) => lines.push(`- ${fmtItem(it)}`));
          }
        });
      });
      lines.push("");
    }
    if (Array.isArray(bg.entries)) {
      bg.entries.forEach((entry) => {
        if (entry.type === "list" && entry.style === "list-hang-notitle") {
          return;
        }
        if (entry.name) {
          const header = entry.data?.isFeature ? entry.name.replace(/^Feature:\s*/, "") : entry.name;
          lines.push(`## ${header}`, "");
        }
        if (Array.isArray(entry.entries)) {
          entry.entries.forEach((e) => {
            if (typeof e === "string") {
              lines.push(replace5eTags(e), "");
            } else if (e.type === "list" && Array.isArray(e.items)) {
              e.items.forEach(
                (it) => lines.push(`- ${replace5eTags(it.entry ?? it)}`)
              );
              lines.push("");
            } else if (e.type === "table") {
              const tbl = renderMarkdownTable(e);
              if (tbl) lines.push(tbl, "");
            }
          });
        } else if (entry.type === "list" && Array.isArray(entry.items)) {
          entry.items.forEach(
            (it) => lines.push(`- ${replace5eTags(it.entry ?? it)}`)
          );
          lines.push("");
        }
      });
    }
    outputs.push({
      path: `Player Build/Backgrounds/${bg.name}.md`,
      content: lines.join("\n").trimEnd() + "\n"
    });
  });
  return outputs;
}
function cap2(str) {
  return str.charAt(0).toUpperCase() + str.slice(1);
}
function fmtItem(item) {
  if (typeof item === "string") {
    if (item.includes("|")) {
      return replace5eTags(`{@item ${item}}`);
    }
    return replace5eTags(item);
  }
  const priceRaw = item.containsValue ?? item.value;
  if (typeof priceRaw === "number" && // make sure it’s not also an “item” or “equipmentType”
  !item.item && !item.equipmentType && !item.special) {
    const gp = priceRaw >= 100 ? priceRaw / 100 : priceRaw;
    return `${gp} gp`;
  }
  if (item.item) {
    const link = replace5eTags(`{@item ${item.item}}`);
    if (typeof priceRaw === "number") {
      const gp = priceRaw >= 100 ? priceRaw / 100 : priceRaw;
      return `${link} (${gp} gp)`;
    }
    return link;
  }
  if (typeof item.special === "string") {
    return item.special;
  }
  if (item.equipmentType) {
    switch (item.equipmentType) {
      case "toolArtisan":
        return "One type of artisan\u2019s tools (of your choice)";
      case "instrumentMusical":
        return "One type of musical instrument (of your choice)";
      case "setGaming":
        return "One set of gaming dice (of your choice)";
      default:
        return humanize(item.equipmentType);
    }
  }
  return replace5eTags(JSON.stringify(item));
}
function humanize(str) {
  const spaced = str.replace(/([a-z])([A-Z])/g, "$1 $2");
  return spaced.charAt(0).toUpperCase() + spaced.slice(1);
}

// src/parsers/5e-2014/installer.ts
var import_obsidian2 = require("obsidian");
async function listSpellFilesFromGitHub(repo) {
  const url = `https://api.github.com/repos/${repo}/contents/data/spells`;
  const res = await fetch(url);
  const data = await res.json();
  return data.filter((item) => item.type === "file" && item.name.startsWith("spells-") && item.name.endsWith(".json")).map((item) => item.name);
}
async function listBestiaryFilesFromGitHub(repo) {
  const url = `https://api.github.com/repos/${repo}/contents/data/bestiary`;
  const res = await fetch(url);
  const list = await res.json();
  const CORE_SOURCES = [
    "bestiary-phb.json",
    "bestiary-mm.json",
    "bestiary-dmg.json",
    "bestiary-xge.json",
    "bestiary-vgm.json",
    "bestiary-tce.json",
    "bestiary-egw.json",
    "bestiary-erlw.json",
    "bestiary-mtf.json",
    "bestiary-vrgr.json",
    "bestiary-cos.json",
    "bestiary-oota.json",
    "bestiary-pota.json",
    "bestiary-hotdq.json",
    "bestiary-rot.json",
    "bestiary-skt.json",
    "bestiary-tftyp.json",
    "bestiary-toa.json"
  ];
  return list.filter((item) => item.type === "file" && CORE_SOURCES.includes(item.name)).map((item) => item.name);
}
var ITEM_JSON_FILES = [
  "items-base.json",
  "items.json",
  "objects.json",
  "vehicles.json",
  "decks.json"
];
async function listItemFilesFromGitHub(repo) {
  const url = `https://api.github.com/repos/${repo}/contents/data`;
  const res = await fetch(url);
  const data = await res.json();
  return data.filter((item) => item.type === "file" && ITEM_JSON_FILES.includes(item.name)).map((item) => item.name);
}
async function listClassFilesFromGitHub(repo) {
  const url = `https://api.github.com/repos/${repo}/contents/data/class`;
  const res = await fetch(url);
  const listing = await res.json();
  return listing.filter(
    (item) => item.type === "file" && item.name.startsWith("class-") && item.name.endsWith(".json")
  ).map((item) => item.name);
}
async function ensureFolder(app, folderPath) {
  const parts = folderPath.split("/");
  let curr = "";
  for (const p of parts) {
    curr = curr ? `${curr}/${p}` : p;
    try {
      await app.vault.createFolder(curr);
    } catch {
    }
  }
}
async function importEditionData(params) {
  const { app, edition, targetPath } = params;
  const repo = edition.repo ?? "";
  {
    const spellFiles = await listSpellFilesFromGitHub(repo);
    for (const fileName of spellFiles) {
      try {
        const res = await fetch(`${edition.sourceUrl}/spells/${fileName}`);
        const json = await res.json();
        const files = parseSpellsFile(json, edition.id);
        for (const md of files) {
          const fullPath = (0, import_obsidian.normalizePath)(`${targetPath}/Spells/${md.path}`);
          const folder = fullPath.split("/").slice(0, -1).join("/");
          await ensureFolder(app, folder);
          await app.vault.adapter.write(fullPath, md.content);
        }
      } catch (e) {
        console.warn(`Failed to import spell ${fileName}:`, e);
      }
    }
  }
  {
    const bestiaryFiles = await listBestiaryFilesFromGitHub(repo);
    for (const fileName of bestiaryFiles) {
      try {
        const res = await fetch(`${edition.sourceUrl}/bestiary/${fileName}`);
        const json = await res.json();
        const parsed = parseBestiaryFile(json, edition.id);
        for (const md of parsed) {
          const fullPath = (0, import_obsidian.normalizePath)(`${targetPath}/Bestiary/${md.path}`);
          const folder = fullPath.split("/").slice(0, -1).join("/");
          await ensureFolder(app, folder);
          await app.vault.adapter.write(fullPath, md.content);
        }
      } catch (e) {
        console.warn(`Failed to import bestiary ${fileName}:`, e);
      }
    }
  }
  {
    const itemFiles = await listItemFilesFromGitHub(repo);
    for (const fn of itemFiles) {
      try {
        const res = await fetch(`${edition.sourceUrl}/${fn}`);
        const json = await res.json();
        const mdFiles = parseItemsFile(json, edition.id);
        for (const md of mdFiles) {
          const fullPath = (0, import_obsidian.normalizePath)(`${targetPath}/${md.path}`);
          const folder = fullPath.split("/").slice(0, -1).join("/");
          await ensureFolder(app, folder);
          await app.vault.adapter.write(fullPath, md.content);
        }
      } catch (e) {
        console.warn(`Failed to import items from ${fn}:`, e);
      }
    }
  }
  {
    const res = await fetch(`${edition.sourceUrl}/races.json`);
    const json = await res.json();
    const mdFiles = parseSpeciesFile(json, edition.id);
    for (const md of mdFiles) {
      const fullPath = (0, import_obsidian.normalizePath)(`${targetPath}/Player Build/${md.path}`);
      await ensureFolder(app, fullPath.split("/").slice(0, -1).join("/"));
      await app.vault.adapter.write(fullPath, md.content);
    }
  }
  let optionalFeatures = [];
  try {
    const res = await fetch(`${edition.sourceUrl}/optionalfeatures.json`);
    const raw = await res.json();
    optionalFeatures = Array.isArray(raw.optionalfeature) ? raw.optionalfeature : [];
  } catch (e) {
    console.warn("Failed to import optionalfeatures.json:", e);
  }
  {
    const classFiles = await listClassFilesFromGitHub(repo);
    for (const fileName of classFiles) {
      try {
        const res = await fetch(`${edition.sourceUrl}/class/${fileName}`);
        const json = await res.json();
        const mdFiles = parseClassFile(
          json,
          edition.id,
          fileName,
          optionalFeatures
        );
        for (const md of mdFiles) {
          const fullPath = (0, import_obsidian.normalizePath)(`${targetPath}/Player Build/${md.path}`);
          await ensureFolder(app, fullPath.split("/").slice(0, -1).join("/"));
          const existing = app.vault.getAbstractFileByPath(fullPath);
          if (existing instanceof import_obsidian2.TFile) {
            await app.vault.modify(existing, md.content);
          } else {
            await app.vault.create(fullPath, md.content);
          }
        }
      } catch (e) {
        console.warn(`Failed to import class ${fileName}:`, e);
      }
    }
  }
  {
    try {
      const res = await fetch(`${edition.sourceUrl}/actions.json`);
      const json = await res.json();
      const mdFiles = parseActionsFile(json, edition.id);
      for (const md of mdFiles) {
        const fullPath = (0, import_obsidian.normalizePath)(
          `${targetPath}/${md.path}`
        );
        const folder = fullPath.split("/").slice(0, -1).join("/");
        await ensureFolder(app, folder);
        await app.vault.adapter.write(fullPath, md.content);
      }
    } catch (e) {
      console.warn("Failed to import actions.json:", e);
    }
  }
  {
    try {
      const res = await fetch(`${edition.sourceUrl}/conditionsdiseases.json`);
      const json = await res.json();
      const mdFiles = parseConditionsDiseasesFile(json, edition.id);
      for (const md of mdFiles) {
        const fullPath = (0, import_obsidian.normalizePath)(
          `${targetPath}/${md.path}`
        );
        const folder = fullPath.split("/").slice(0, -1).join("/");
        await ensureFolder(app, folder);
        await app.vault.adapter.write(fullPath, md.content);
      }
    } catch (e) {
      console.warn("Failed to import conditionsdiseases.json:", e);
    }
  }
  {
    try {
      const res = await fetch(`${edition.sourceUrl}/senses.json`);
      const json = await res.json();
      const mdFiles = parseSensesFile(json, edition.id);
      for (const md of mdFiles) {
        const fullPath = (0, import_obsidian.normalizePath)(
          `${targetPath}/${md.path}`
        );
        const folder = fullPath.split("/").slice(0, -1).join("/");
        await ensureFolder(app, folder);
        await app.vault.adapter.write(fullPath, md.content);
      }
    } catch (e) {
      console.warn("Failed to import senses.json:", e);
    }
  }
  {
    try {
      const res = await fetch(`${edition.sourceUrl}/skills.json`);
      const json = await res.json();
      const mdFiles = parseSkillsFile(json, edition.id);
      for (const md of mdFiles) {
        const fullPath = (0, import_obsidian.normalizePath)(
          `${targetPath}/${md.path}`
        );
        const folder = fullPath.split("/").slice(0, -1).join("/");
        await ensureFolder(app, folder);
        await app.vault.adapter.write(fullPath, md.content);
      }
    } catch (e) {
      console.warn("Failed to import skills.json:", e);
    }
  }
  {
    try {
      const res = await fetch(`${edition.sourceUrl}/feats.json`);
      const json = await res.json();
      const mdFiles = parseFeatsFile(json, edition.id);
      for (const md of mdFiles) {
        const fullPath = (0, import_obsidian.normalizePath)(
          `${targetPath}/${md.path}`
        );
        const folder = fullPath.split("/").slice(0, -1).join("/");
        await ensureFolder(app, folder);
        await app.vault.adapter.write(fullPath, md.content);
      }
    } catch (e) {
      console.warn("Failed to import feats.json:", e);
    }
  }
  {
    try {
      const res = await fetch(`${edition.sourceUrl}/backgrounds.json`);
      const json = await res.json();
      const mdFiles = parseBackgroundsFile(json, edition.id);
      for (const md of mdFiles) {
        const fullPath = (0, import_obsidian.normalizePath)(`${targetPath}/${md.path}`);
        const folder = fullPath.split("/").slice(0, -1).join("/");
        await ensureFolder(app, folder);
        await app.vault.adapter.write(fullPath, md.content);
      }
    } catch (e) {
      console.warn("Failed to import backgrounds.json:", e);
    }
  }
}

// src/parsers/5e-2025/installer.ts
var installer_exports2 = {};
__export(installer_exports2, {
  importEditionData: () => importEditionData2
});
var import_obsidian3 = require("obsidian");

// src/parsers/5e-2025/helpers/sourceMap.ts
var SOURCE_NAME_MAP2 = {
  // Core rulebooks
  PHB: "Player's Handbook",
  MM: "Monster Manual",
  DMG: "Dungeon Master's Guide",
  // Official expansions & adventure modules
  CoS: "Curse of Strahd",
  OotA: "Out of the Abyss",
  PotA: "Princes of the Apocalypse",
  HotDQ: "Hoard of the Dragon Queen",
  RoT: "Rise of Tiamat",
  SKT: "Storm King's Thunder",
  TftYP: "Tales from the Yawning Portal",
  ToA: "Tomb of Annihilation",
  // Supplemental guides
  XGE: "Xanathar's Guide to Everything",
  VGM: "Volo's Guide to Monsters",
  TCE: "Tasha's Cauldron of Everything",
  EGW: "Eberron: Rising from the Last War",
  ERLW: "Explorer's Guide to Wildemount",
  MTF: "Monsters of the Multiverse",
  VRGR: "Van Richten's Guide to Ravenloft",
  // Additional sourcebooks
  AAG: "Astral Adventurer\u2019s Guide",
  AI: "Acquisitions Incorporated",
  AitFRAVFT: "Adventures in the Forgotten Realms: A Visual Field Test",
  BMT: "Big Monster Tome",
  DoDk: "Dragon of Darkkeep",
  FTD: "Fizban\u2019s Treasury of Dragons",
  GGR: "Guildmaster\u2019s Guide to Ravnica",
  GHLoE: "Ghosts of the Horizon: Light Over Elensaria",
  IDRotF: "Icewind Dale: Rime of the Frostmaiden",
  LLK: "Lost Laboratory of Kwalish",
  SatO: "Sapphire of Truth",
  SCC: "Strixhaven: Curriculum of Chaos",
  TDCSR: "The Dungeon Coach\u2019s Rulebook",
  JttRC: "Journeys through the Radiant Citadel",
  "AitFR-AVT": "Adventures in the Forgotten Realms: A Verdant Tomb",
  "AitFR-FCD": "Adventures in the Forgotten Realms: From Cyan Depths",
  RMR: "Dungeons and Dragons: Rick and Morty",
  SCAG: "Sword Coast Adventurer's Guide",
  EEPC: "Elemental Evil Player's Companion",
  MOT: "Mythic Odysseys of Theros",
  WBtW: "The Wild Beyond the Witchlight",
  BGDIA: "Baldur's Gate: Descent Into Avernus",
  ToFW: "Turn of Fortune's Wheel",
  CoA: "Chains of Asmodeus",
  CRCotN: "Critical Role: Call of the Netherdeep",
  ToD: "Tyranny of Dragons",
  MPMM: "Mordenkainen Presents: Monsters of the Multiverse",
  LoX: "Light of Xaryxis",
  QftIS: "Quests from the Infinite Staircase",
  WDH: "Waterdeep: Dragon Heist",
  WDMM: "Waterdeep: Dungeon of the Mad Mage",
  PaBTSO: "Phandelver and Below: The Shattered Obelisk",
  CM: "Candlekeep Mysteries",
  GoS: "Ghosts of Saltmarsh",
  DSotDQ: "Dragonlance: Shadow of the Dragon Queen",
  KftGV: "Keys from the Golden Vault",
  SDW: "Essentials Kit: Sleeping Dragon's Wake",
  DoSI: "Dragons of Stormwreck Isle",
  GotSF: "Giants of the Star Forge",
  DIP: "Essentials Kit: Dragon of Icespire Peak",
  SLW: "Essentials Kit: Storm Lord's Wrath",
  IMR: "Infernal Machine Rebuild",
  VEoR: "Vecna: Eve of Ruin",
  PSI: "Plane Shift: Innistrad",
  AATM: "Adventure Atlas: The Mortuary",
  PSZ: "Plane Shift: Zendikar",
  DC: "Essentials Kit: Divine Contention",
  LMoP: "Lost Mine of Phandelver",
  RMBRE: "The Lost Dungeon of Rickedness: Big Rick Energy",
  HftT: "Hunt for the Thessalhydra",
  PSX: "Plane Shift: Ixalan",
  HFStCM: "Heroes' Feast: Saving the Childrens Menu",
  SjA: "Spelljammer Academy",
  LK: "Lightning Keep",
  RtG: "Return to the Glory",
  TTP: "The Tortle Package",
  LR: "Locathah Rising",
  PSA: "Plane Shift: Amonkhet",
  OGA: "One Grung Above",
  "NRH-TLT": "Nerds Restoring Harmony: The Lost Tomb",
  "NRH-AT": "Nerds Restoring Harmony: Adventure Together",
  BGG: "Bigby Presents: Glory of the Giants",
  RoTOS: "The Rise of Tiamat Online Supplement",
  XMtS: "X Marks the Spot",
  "HAT-LMI": "Honor Among Theives: Legendary Magic Items",
  DitLCoT: "Descent into the Lost Caverns of Tsojcanth",
  "AitFR-DN": "Adventures in the Forgotten Realms: Deepest Night",
  "AitFR-THP": "Adventures in the Forgotten Realms: The Hidden Pages",
  BAM: "Boo's Astral Menagerie",
  AZfyT: "A Zib for Your Thougts",
  MCV2DC: "Monstrous Compendium Volume 2: Dragonlance Creatures",
  PSK: "Plane Shift: Kaladesh",
  PSD: "Plane Shift: Dominaria",
  AWM: "Adventure with Muk",
  UATheMysticClass: "Unearthed Arcana: The Mystic Class",
  ALCurseOfStrahd: "Adventurers League: Curse of Strahd",
  ALElementalEvil: "Adventurers League: Elemental Evil",
  ALRageOfDemons: "Adventurers League: Rage of Demons"
};
function getFullSourceName2(abbrev, editionId) {
  let name = SOURCE_NAME_MAP2[abbrev] ?? abbrev;
  if (abbrev === "PHB") {
    if (editionId?.includes("2014")) name += " (2014)";
    else if (editionId?.includes("2025")) name += " (2025)";
  }
  return name;
}

// src/parsers/5e-2025/helpers/tagReplacer.ts
function replace5eTags2(input) {
  let text;
  if (Array.isArray(input)) {
    text = input.join(" ");
  } else if (typeof input === "string") {
    text = input;
  } else {
    text = String(input ?? "");
  }
  return text.replace(
    /\{#itemEntry\s+([^}|]+)(?:\|[^}]*)?\}/gi,
    (_m, rawName) => {
      return `[[${capitalizeEach2(String(rawName).trim())}]]`;
    }
  ).replace(
    /\{@(spell|item|creature|race) ([^|}]+)(?:\|[^}]+)?\}/g,
    (_, __, name) => `[[${capitalizeEach2(name)}]]`
  ).replace(
    /\{@(condition|status|action|skill) ([^|}]+)(?:\|[^}]+)?\}/g,
    (_, tag, name) => `[[${capitalize2(tag)}s#${name}|${capitalizeEach2(name)}]]`
  ).replace(
    /\{@classFeature ([^|}]+)\|([^|}]+)(?:\|[^}]+)?\}/g,
    (_, feature, cls) => `[[${cls}#${feature}]]`
  ).replace(/\{@(book|filter) ([^|}]+)(?:\|[^}]+)?\}/g, (_, __, txt) => txt).replace(/\{@note ([^}]+)\}/g, (_, note) => `*${note}*`).replace(/\{@(damage|dice|dc|hit|sense) ([^}]+)\}/g, (_, __, value) => value).replace(/\{@chance ([^|}]+)(?:\|[^}]+)?\}/g, (_, value) => `${value}%`).replace(/\{@quickref ([^|}]+)(?:\|[^|]*\|[^}]*)?\}/g, (_, term) => {
    const known = [
      "difficult terrain",
      "total cover",
      "half cover",
      "three-quarters cover",
      "heavily obscured",
      "lightly obscured"
    ];
    return known.includes(term.toLowerCase()) ? `[[Rules#${capitalizeEach2(term)}]]` : term;
  }).replace(/\{\@5etools\s+([^|}]+)\|[^}]+\}/g, "$1").replace(/\{@recharge\s*([^}]+)\}/g, (_, num) => `(recharge: ${num.trim()})`).replace(/\{@(scaledice|scaledamage)[^}]*\|([^|}]+)\}/g, (_, __, value) => value).replace(/\{@d20[^}]*\}/g, "").replace(/\{@[^}]+\}/g, "");
}
function capitalize2(str) {
  return str.charAt(0).toUpperCase() + str.slice(1).toLowerCase();
}
function capitalizeEach2(str) {
  return str.split(" ").map(capitalize2).join(" ");
}

// src/parsers/5e-2025/helpers/markdownTable.ts
function renderMarkdownTable2(entry) {
  if (entry.type !== "table" || !Array.isArray(entry.rows)) return "";
  const caption = entry.caption ? `##### ${entry.caption}
` : "";
  const headers = (entry.colLabels ?? []).map((h) => replace5eTags2(h.trim()));
  const headerRow = `| ${headers.join(" | ")} |`;
  const dividerRow = `| ${headers.map(() => ":--").join(" | ")} |`;
  const bodyRows = entry.rows.map((row) => {
    const cells = row.map((cell) => {
      if (typeof cell === "string") return replace5eTags2(cell);
      if (typeof cell === "object") {
        if (cell.roll?.exact !== void 0) return `${cell.roll.exact}`;
        if (cell.roll?.min !== void 0 && cell.roll?.max !== void 0) {
          return `${cell.roll.min}\u2013${cell.roll.max}`;
        }
        return replace5eTags2(JSON.stringify(cell));
      }
      return replace5eTags2(String(cell));
    });
    return `| ${cells.join(" | ")} |`;
  });
  return `${caption}${headerRow}
${dividerRow}
${bodyRows.join("\n")}`;
}

// src/parsers/5e-2025/helpers/formatEntry.ts
function isTypedEntry(x) {
  return x != null && typeof x === "object" && !Array.isArray(x) && typeof x.type === "string";
}
function formatEntry2(entry) {
  if (typeof entry === "string") {
    const cleaned = entry.trim();
    if (!cleaned || cleaned === "}") return "";
    return replace5eTags2(cleaned);
  }
  if (isTypedEntry(entry) && entry.type === "entries" && Array.isArray(entry.entries)) {
    const body = entry.entries.map(formatEntry2).filter((str) => str.trim().length > 0).join("\n\n");
    return entry.name ? `##### ${entry.name}
${body}` : body;
  }
  if (isTypedEntry(entry) && entry.type === "list" && Array.isArray(entry.items)) {
    return entry.items.map((i) => `- ${replace5eTags2(typeof i === "string" ? i : JSON.stringify(i))}`).join("\n");
  }
  if (isTypedEntry(entry) && entry.type === "table" && Array.isArray(entry.rows)) {
    return renderMarkdownTable2(entry);
  }
  if (isTypedEntry(entry) && entry.type === "quote" && Array.isArray(entry.entries)) {
    const quote = entry.entries.map(formatEntry2).join(" ").trim();
    const author = entry.by ? ` \u2014 ${entry.by}` : "";
    return `*"${quote}${author}"*`;
  }
  if (isTypedEntry(entry) && entry.type === "inset" && Array.isArray(entry.entries)) {
    const inset = entry.entries.map(formatEntry2).join("\n").trim();
    return `> ${inset.replace(/\n/g, "\n> ")}`;
  }
  if (isTypedEntry(entry) && entry.type === "refClassFeature" && typeof entry.classFeature === "string") {
    const [name] = entry.classFeature.split("|");
    const anchor = name.replace(/[^\w\s-]/g, "").replace(/\s+/g, "-").toLowerCase();
    return `[[#${anchor}]]`;
  }
  return "";
}

// src/parsers/5e-2025/bestiary.ts
var skippedMonsters2 = [];
var SIZE_MAP3 = {
  T: "Tiny",
  S: "Small",
  M: "Medium",
  L: "Large",
  H: "Huge",
  G: "Gargantuan"
};
var ALIGNMENT_MAP2 = {
  L: "Lawful",
  N: "Neutral",
  C: "Chaotic",
  G: "Good",
  E: "Evil",
  U: "Unaligned"
};
function capitalizeFirst3(str) {
  const s = String(str || "");
  return s.charAt(0).toUpperCase() + s.slice(1);
}
function formatSizeAbbrev3(abbrev) {
  return SIZE_MAP3[abbrev] || abbrev;
}
function formatAlignmentAbbrev2(abbrev) {
  return abbrev.trim().split(/\s+/).map((letter) => ALIGNMENT_MAP2[letter] || letter).join(" ");
}
var RAW_NPCS2 = [
  "Abjurer",
  "Acolyte",
  "Apprentice Wizard",
  "Archdruid",
  "Archer",
  "Archmage",
  "Assassin",
  "Bandit",
  "Bandit Captain",
  "Bard",
  "Berserker",
  "Blackguard",
  "Champion",
  "Commoner",
  "Conjurer",
  "Cult Fanatic",
  "Cultist",
  "Diviner",
  "Druid (NPC)",
  "Druid NPC",
  "Enchanter",
  "Evoker",
  "Gladiator",
  "Guard",
  "Illusionist",
  "Knight",
  "Kraken Priest",
  "Mage",
  "Martial Arts Adept",
  "Master Thief",
  "Necromancer",
  "Noble",
  "Priest",
  "Scout",
  "Spy",
  "Swashbuckler",
  "Thug",
  "Transmuter",
  "Tribal Warrior",
  "Veteran",
  "War Priest",
  "Warlock of the Archfey",
  "Warlock of the Fiend",
  "Warlock of the Great Old One",
  "Warlord"
];
var NORMALIZED_NPC_NAMES2 = new Set(RAW_NPCS2.map((n) => normalizeName2(n)));
function normalizeName2(name) {
  return name.replace(/\s+/g, " ").trim().toLowerCase();
}
function categorizeCreature2(monster) {
  const typeValue = monster.type;
  const name = monster.name;
  const t = typeof typeValue === "string" ? typeValue.toLowerCase() : typeValue?.type?.toLowerCase() || String(typeValue).toLowerCase();
  const normalizedName = normalizeName2(name);
  if (monster.isNpc || monster.isNamedCreature) return "Story NPCs";
  if (t === "beast") return "Beasts";
  if (t === "humanoid" && NORMALIZED_NPC_NAMES2.has(normalizedName)) return "Non-Beasts";
  if (t === "humanoid") return "Monsters";
  return "Monsters";
}
function renderAbilitiesTable2(str, dex, con, int, wis, cha) {
  return [
    `| STR | DEX | CON | INT | WIS | CHA |`,
    `| --- | --- | --- | --- | --- | --- |`,
    `| ${str} | ${dex} | ${con} | ${int} | ${wis} | ${cha} |`
  ].join("\n");
}
function renderEntry2(entry, inBreathBlock = false) {
  const ensurePeriod2 = (s) => /[.!?]\s*$/.test(s) ? s : `${s}.`;
  const renderStr = (s) => replace5eTags2(s);
  if (typeof entry === "string") return renderStr(entry);
  if (!entry || typeof entry !== "object") return String(entry ?? "");
  const rawName = typeof entry.name === "string" ? entry.name : "";
  const nameTxt = rawName ? renderStr(rawName) : "";
  const isBreath = /\bbreath weapon/i.test(nameTxt);
  const lead = nameTxt ? `***${ensurePeriod2(nameTxt)}***` : "";
  const blocks = [];
  if (Array.isArray(entry.entries)) blocks.push(...entry.entries);
  else if (typeof entry.entries === "string") blocks.push(entry.entries);
  else if (Array.isArray(entry.desc)) blocks.push(...entry.desc);
  else if (typeof entry.desc === "string") blocks.push(entry.desc);
  else if (Array.isArray(entry.entry)) blocks.push(...entry.entry);
  else if (typeof entry.entry === "string") blocks.push(entry.entry);
  const out = [];
  for (const blk of blocks) {
    if (typeof blk === "string") {
      out.push(renderStr(blk));
      continue;
    }
    const isHangNoTitleList = blk && blk.type === "list" && blk.style === "list-hang-notitle" && Array.isArray(blk.items) && blk.items.every((it) => it?.type === "item");
    if ((isBreath || inBreathBlock || isHangNoTitleList) && blk && blk.type === "list" && Array.isArray(blk.items)) {
      const bullets = [];
      for (const it of blk.items) {
        const itName = it?.name ? renderStr(String(it.name).trim()) : "";
        let itBody = "";
        if (typeof it?.entry === "string") itBody = renderStr(it.entry);
        else if (Array.isArray(it?.entries)) itBody = it.entries.map((e) => renderEntry2(e, true)).join(" ");
        else if (typeof it?.entries === "string") itBody = renderStr(it.entries);
        const head = itName ? `***${ensurePeriod2(itName)}***` : "";
        const line = [head, itBody].filter(Boolean).join(" ").trim();
        if (line) bullets.push(`- ${line}`);
      }
      if (bullets.length) out.push("\n" + bullets.join("\n"));
      continue;
    }
    out.push(String(blk));
  }
  return [lead, out.join(" ")].filter(Boolean).join(" ").replace(/[ \t]+/g, " ").trim();
}
function parseBestiaryFile2(json, editionId) {
  if (!json.monster) return [];
  json._editionId = editionId;
  const validMonsters = json.monster.filter((m) => {
    const acVal = Array.isArray(m.ac) ? m.ac[0]?.ac ?? m.ac[0] : typeof m.ac === "object" ? m.ac?.ac ?? null : m.ac;
    const hpVal = typeof m.hp === "object" ? m.hp?.average ?? m.hp?.hp ?? null : m.hp;
    return acVal != null && hpVal != null && !isNaN(Number(acVal)) && !isNaN(Number(hpVal));
  });
  const allNames = new Set(json.monster.map((m) => m.name));
  const validNames = new Set(validMonsters.map((m) => m.name));
  const missing = [...allNames].filter((name) => !validNames.has(name));
  return validMonsters.map((monster) => {
    const name = monster.name;
    const safeName = name.replace(/\//g, "-");
    const rawSize = monster.size || "M";
    const rawAlignment = Array.isArray(monster.alignment) ? monster.alignment.join(" ") : monster.alignment || "N";
    let rawType = "Unknown";
    if (typeof monster.type === "string") {
      rawType = capitalizeFirst3(monster.type);
    } else if (monster.type?.type) {
      const base = capitalizeFirst3(monster.type.type);
      const tags = monster.type.tags?.length ? ` (${monster.type.tags.map(capitalizeFirst3).join(", ")})` : "";
      rawType = `${base}${tags}`;
    }
    monster._parsedType = rawType;
    const ac = Array.isArray(monster.ac) ? monster.ac[0].ac : monster.ac;
    const hp = monster.hp?.average ?? monster.hp;
    if (!ac && !hp) {
      skippedMonsters2.push(monster.name);
      return null;
    }
    const abilities = Array.isArray(monster.ability) ? monster.ability : [monster.str, monster.dex, monster.con, monster.int, monster.wis, monster.cha];
    const [str = 10, dex = 10, con = 10, int = 10, wis = 10, cha = 10] = abilities;
    const speedList = [];
    if (typeof monster.speed === "object") {
      for (const [mode, val] of Object.entries(monster.speed)) {
        if (mode === "canHover") continue;
        if (val && typeof val === "object" && "number" in val) {
          const num = val.number;
          const cond = val.condition ? ` ${val.condition}` : "";
          speedList.push(`${mode} ${num} ft.${cond}`);
        } else {
          speedList.push(`${mode} ${val} ft.`);
        }
      }
    } else {
      speedList.push(`${monster.speed} ft.`);
    }
    const speed = speedList.join(", ");
    let source = getFullSourceName2(monster.source, editionId);
    source = source.replace(/:/g, " -");
    const category = categorizeCreature2(monster);
    const fm = buildFM2(monster, BESTIARY_META_DEFS2);
    const yaml = serializeFrontmatter2(fm, BESTIARY_META_DEFS2);
    const fmAny = fm;
    const challengeText = String(fmAny["CR"] ?? fmAny["challenge"] ?? "");
    const savingThrows = fm[FM_FIELDS4.SAVING_THROWS] || [];
    const skills = fm[FM_FIELDS4.SKILLS] || [];
    const senses = fm[FM_FIELDS4.SENSES] || [];
    const languages = fm[FM_FIELDS4.LANGUAGES] || [];
    let body = `# ${name}

${formatSizeAbbrev3(rawSize)} ${rawType}, ${formatAlignmentAbbrev2(rawAlignment)}

**Armor Class**: ${ac}
**Hit Points**: ${hp}
**Speed**: ${speed}
` + (savingThrows.length ? `**Saving Throws**: ${savingThrows.join(", ")}
` : "") + (skills.length ? `**Skills**: ${skills.join(", ")}
` : "") + (senses.length ? `**Senses**: ${senses.join(", ")}
` : "") + (languages.length ? `**Languages**: ${languages.join(", ")}
` : "") + `**Challenge**: ${challengeText}

` + renderAbilitiesTable2(str, dex, con, int, wis, cha);
    if (monster.spellcasting) {
      body += `

### Spellcasting
${monster.spellcasting.map((sc) => {
        const name2 = sc.name || "Spellcasting";
        const parts = [];
        if (sc.headerEntries) {
          const headers = Array.isArray(sc.headerEntries) ? sc.headerEntries : [sc.headerEntries];
          parts.push(headers.map((e) => replace5eTags2(e)).join(" "));
        }
        if (sc.will) {
          parts.push(`- **At will:** ${sc.will.map((s) => replace5eTags2(String(s))).join(", ")}`);
        }
        if (sc.daily) {
          for (const [k, arr] of Object.entries(sc.daily)) {
            const spells = arr.map((s) => replace5eTags2(String(s))).join(", ");
            const n = parseInt(k, 10) || 0;
            const each = /e$/i.test(k);
            const label = n > 0 ? each ? `${n}/day each` : `${n}/day` : "Daily";
            parts.push(`- **${label}:** ${spells}`);
          }
        }
        return `***${name2}.***
${parts.join("\n")}`;
      }).join("\n\n")}`;
    }
    if (monster.trait) body += `

### Traits
${monster.trait.map(renderEntry2).join("\n\n")}`;
    if (monster.action) body += `

### Actions
${monster.action.map(renderEntry2).join("\n\n")}`;
    if (monster.reaction) body += `

### Reactions
${monster.reaction.map(renderEntry2).join("\n\n")}`;
    if (monster.legendary) body += `

### Legendary Actions
${monster.legendary.map(renderEntry2).join("\n\n")}`;
    const content = `---
${yaml}
---

${body}`;
    return {
      path: `${category}/${safeName}.md`,
      content
    };
  });
}

// src/parsers/5e-2025/items.ts
function capitalizeFirst4(input) {
  if (typeof input !== "string" || input.length === 0) return "";
  const s = input.trim();
  return s.charAt(0).toUpperCase() + s.slice(1).toLowerCase();
}
var DAMAGE_TYPE_MAP3 = {
  P: "Piercing",
  B: "Bludgeoning",
  S: "Slashing",
  N: "Necrotic",
  R: "Radiant",
  F: "Fire",
  C: "Cold",
  L: "Lightning",
  T: "Thunder",
  A: "Acid",
  H: "Healing",
  U: "Force",
  V: "Psychic"
};
var PROPERTY_MAP2 = {
  A: "Ammunition",
  F: "Finesse",
  H: "Heavy",
  L: "Light",
  R: "Reload",
  S: "Special",
  "2H": "Two-Handed",
  T: "Thrown",
  V: "Versatile"
};
var ITEM_TYPE_MAP2 = {
  $C: "Currency",
  $G: "Gem",
  A: "Ammunition",
  "AIR|DMG": "Vehicle (air)",
  "AF|DMG": "Future Ammo",
  AT: "Artisan Tools",
  EXP: "Explosive",
  FD: "Food and Drink",
  G: "Gear",
  GS: "Game",
  HA: "Heavy Armor",
  "IDG|TDCSR": "Illicit Drug",
  INS: "Instrument",
  LA: "Light Armor",
  M: "Weapon",
  MA: "Medium Armor",
  MNT: "Mounts and Vehicles",
  ODH: "Miscellaneous",
  P: "Consumable",
  R: "Ranged Weapon",
  RD: "Rod",
  RG: "Ring",
  S: "Shield",
  SC: "Scroll",
  SCF: "Spell Casting Focus",
  SHP: "Ship",
  T: "Tool",
  TAH: "Mounts and Vehicles",
  TG: "Trade Goods",
  VEH: "Mounts and Vehicles",
  WD: "Wand"
};
var codeFolderMap2 = {
  // Weapons & Armor
  "A": "Weapons and Armor/Ammunition",
  "M": "Weapons and Armor/Weapons",
  "R": "Weapons and Armor/Ranged Weapons",
  "S": "Weapons and Armor/Shields",
  "LA": "Weapons and Armor/Armor/Light Armor",
  "MA": "Weapons and Armor/Armor/Medium Armor",
  "HA": "Weapons and Armor/Armor/Heavy Armor",
  "EXP": "Weapons and Armor/Weapons/Explosives",
  // Future Ammo (AF|DMG → rawCode "AF")
  "AF": "Weapons and Armor/Ammunition/Future Ammo",
  // Magical Items
  "RD": "Magical Items/Rods",
  "RG": "Magical Items/Rings",
  "SC": "Magical Items/Scrolls",
  "SCF": "Magical Items/Spell Casting Focus",
  "WD": "Magical Items/Wands",
  // Valuables
  "$G": "Valuables/Gems",
  // Currency (rawCode becomes "C" after stripping $)
  "C": "Valuables/Currency",
  "TG": "Valuables/Trade Goods",
  // Artisan Goods
  "AT": "Artisan Goods/Tools",
  "T": "Artisan Goods/Tools",
  "INS": "Artisan Goods/Instruments",
  "GS": "Artisan Goods/Games",
  // Gear & Mounts
  "G": "Gear",
  // Mounts & Vehicles
  "MNT": "Gear/Mounts and Vehicles",
  "TAH": "Gear/Mounts and Vehicles",
  "VEH": "Gear/Mounts and Vehicles",
  // Air vehicles (AIR|DMG → rawCode "AIR")
  "AIR": "Gear/Mounts and Vehicles/Air",
  // Consumables
  "P": "Consumables",
  // Food & Drink
  "FD": "Consumables/Food and Drink",
  // Illicit Drugs (IDG|TDCSR → rawCode "IDG")
  "IDG": "Gear/Illicit Drugs",
  // Miscellaneous (ODH)
  "ODH": "Gear/Miscellaneous"
};
function parseItemsFile2(json, editionId) {
  const rawItems = [];
  if (Array.isArray(json.baseitem)) rawItems.push(...json.baseitem);
  if (Array.isArray(json.item)) rawItems.push(...json.item);
  if (Array.isArray(json.object)) rawItems.push(...json.object);
  if (Array.isArray(json.vehicle)) rawItems.push(...json.vehicle);
  if (!rawItems.length) return [];
  const baseNames = new Set(
    Array.isArray(json.baseitem) ? json.baseitem.map((b) => b.name) : []
  );
  const out = [];
  for (const it of rawItems) {
    const name = it.name;
    const safeName = name.replace(/[\/\\:]/g, "-");
    const rawCode = (it.type || "").split("|")[0].split("|")[0].replace(/^\$/, "");
    let folder = codeFolderMap2[rawCode] ?? "Miscellaneous";
    if (it.bonusWeapon) {
      folder = `${folder}/Variants`;
    } else {
      const isMagic = !!it.wondrous || !!it.reqAttune || !!it.req_attune || String(it.rarity).toLowerCase().includes("magic");
      if (isMagic) {
        const [, ...rest] = folder.split("/");
        folder = ["Magical Items", ...rest].join("/");
      }
    }
    if ((folder.startsWith("Weapons and Armor/Weapons") || folder.startsWith("Weapons and Armor/Ranged Weapons")) && it.weaponCategory) {
      folder = `${folder}/${capitalizeFirst4(it.weaponCategory)}`;
    }
    json._editionId = editionId;
    const fm = buildFM2(it, ITEM_META_DEFS2);
    if (fm[FM_FIELDS4.MAGICAL]) {
      fm[FM_FIELDS4.VERMUN] = false;
    }
    if (rawCode === "M" && it.weaponCategory) {
      fm.type = `${capitalizeFirst4(it.weaponCategory)} Weapon`;
    } else if (ITEM_TYPE_MAP2[rawCode]) {
      fm.type = ITEM_TYPE_MAP2[rawCode];
    }
    if (Array.isArray(fm.damageTypes)) {
      fm.damageTypes = fm.damageTypes.map(
        (code) => DAMAGE_TYPE_MAP3[code] || code
      );
    }
    let yaml = serializeFrontmatter2(fm, ITEM_META_DEFS2);
    if (Array.isArray(it.packContents)) {
      yaml += "\npackContents:";
      for (const pc of it.packContents) {
        yaml += `
  - item: "${pc.item}"
    quantity: ${pc.quantity}`;
      }
    }
    const frontmatter = `---
${yaml}
---`;
    const lines = [];
    lines.push(`# ${name}`);
    lines.push("");
    const subtitle = it.weapon ? `${capitalizeFirst4(it.weaponCategory)} Weapon` : it.armor ? folder.split("/").pop() || "Armor" : "";
    if (subtitle) lines.push(`### *${subtitle}*`);
    if (it.weapon) {
      lines.push(`**Category**: ${capitalizeFirst4(it.weaponCategory)}`);
      lines.push(`**Damage**: ${it.dmg1 ?? ""}${it.dmg2 ? ` / ${it.dmg2}` : ""}`);
      const typesBody = (Array.isArray(it.dmgType) ? it.dmgType : [it.dmgType]).filter((t) => Boolean(t)).map((t) => DAMAGE_TYPE_MAP3[t] || t);
      lines.push(`**Damage Type**: ${typesBody.join(", ")}`);
      lines.push(`**Range**: ${it.range ?? "\u2014"}`);
      lines.push(`**Reload**: ${it.reload ?? "\u2014"}`);
      if (it.ammoType) lines.push(`**Ammo Type**: ${it.ammoType}`);
      if (Array.isArray(it.property) && it.property.length) {
        const propsBody = it.property.map((p) => PROPERTY_MAP2[p] || p);
        lines.push(`**Properties**: ${propsBody.join(", ")}`);
      }
    }
    if (it.armor) {
      lines.push(`**Armor Class**: ${it.ac}`);
      if (it.stealth) lines.push(`**Stealth Disadvantage**: true`);
      lines.push("");
    }
    const desc = it.entries ?? it.desc;
    if (desc) {
      for (const p of Array.isArray(desc) ? desc : [desc]) {
        if (typeof p === "string") {
          for (const line of replace5eTags2(p).split("\n")) lines.push(line);
          lines.push("");
        } else if (p && typeof p === "object" && p.type === "list" && Array.isArray(p.items)) {
          if (lines[lines.length - 1] !== "") lines.push("");
          for (const item of p.items) {
            if (typeof item === "string") {
              lines.push(`- ${replace5eTags2(item)}`);
              continue;
            }
            const head = item?.name ? `**${replace5eTags2(String(item.name)).replace(/[.!?]$/, (m) => m).replace(/([^.!?])$/, "$1.")}**` : "";
            let body2 = "";
            if (typeof item?.entry === "string") body2 = replace5eTags2(item.entry);
            else if (Array.isArray(item?.entries)) body2 = item.entries.map((e) => typeof e === "string" ? replace5eTags2(e) : "").join(" ");
            const line = [head, body2].filter(Boolean).join(" ").trim();
            if (line) lines.push(`- ${line}`);
          }
          lines.push("");
        } else if (p && typeof p === "object") {
          if (lines[lines.length - 1] === "") lines.pop();
          if (typeof p.name === "string" && p.name.trim()) {
            lines.push(`#### ${p.name}`);
          }
          const sub = Array.isArray(p.entries) ? p.entries : [];
          for (const sp of sub) {
            if (sp && typeof sp === "object" && sp.type === "list" && Array.isArray(sp.items)) {
              if (lines[lines.length - 1] !== "") lines.push("");
              for (const item of sp.items) {
                if (typeof item === "string") {
                  lines.push(`- ${replace5eTags2(item)}`);
                  continue;
                }
                const head = item?.name ? `**${replace5eTags2(String(item.name)).replace(/[.!?]$/, (m) => m).replace(/([^.!?])$/, "$1.")}**` : "";
                let body2 = "";
                if (typeof item?.entry === "string") body2 = replace5eTags2(item.entry);
                else if (Array.isArray(item?.entries)) body2 = item.entries.map((e) => typeof e === "string" ? replace5eTags2(e) : "").join(" ");
                const line = [head, body2].filter(Boolean).join(" ").trim();
                if (line) lines.push(`- ${line}`);
              }
              lines.push("");
              continue;
            }
            if (typeof sp === "string") {
              for (const line of replace5eTags2(sp).split("\n")) lines.push(line);
              continue;
            }
            if (sp && typeof sp === "object" && sp.type === "entries" && sp.name) {
              const head = `- ***${replace5eTags2(sp.name)}.***`;
              const body2 = (Array.isArray(sp.entries) ? sp.entries : []).map((e) => typeof e === "string" ? replace5eTags2(e) : "").join(" ");
              if (body2.trim()) {
                lines.push(`${head} ${body2}`.trim());
              } else {
                lines.push(head);
              }
              continue;
            }
            if (sp && typeof sp === "object" && Array.isArray(sp.entries)) {
              for (const inner of sp.entries) {
                if (typeof inner === "string") {
                  for (const line of replace5eTags2(inner).split("\n")) lines.push(line);
                }
              }
            }
          }
          lines.push("");
        }
      }
    }
    const body = lines.join("\n");
    out.push({ path: `Items/${folder}/${safeName}.md`, content: `${frontmatter}

${body}` });
  }
  return out.sort((a, b) => a.path.localeCompare(b.path));
}

// src/parsers/5e-2025/helpers/frontmatter.ts
function cap3(str) {
  if (typeof str !== "string") return "";
  return str.charAt(0).toUpperCase() + str.slice(1);
}
var ABILITY_FULL2 = {
  str: "Strength",
  dex: "Dexterity",
  con: "Constitution",
  int: "Intelligence",
  wis: "Wisdom",
  cha: "Charisma"
};
var SIZE_MAP4 = {
  T: "Tiny",
  S: "Small",
  M: "Medium",
  L: "Large",
  H: "Huge",
  G: "Gargantuan"
};
var FM_FIELDS4 = {
  ABILITY_BONUSES: "ability_bonuses",
  AC: "AC",
  ALIGNMENT: "Alignment",
  AMMO_TYPE: "Ammo Type",
  ARMOR_PROFICIENCIES: "armor-prof",
  ATTACK_TYPE: "attack_type",
  ATTUNEMENT: "Attunement",
  ATTUNE_REQ: "Attune_Req",
  CASTING_TIME: "casting_time",
  CHARISMA: "charisma",
  CHA_MOD: "cha_mod",
  CONCENTRATION: "concentration",
  CONDITION_IMM: "cond_immunity",
  CONSTITUTION: "constitution",
  CON_MOD: "con_mod",
  COST: "cost",
  COMPONENTS: "Components",
  CHALLENGE_RATING: "CR",
  DAMAGE_TYPE: "damage_type",
  DAMAGE_TYPES: "damageTypes",
  DAMAGE: "damage",
  DAMAGE_RES: "dmg_resistance",
  DAMAGE_IMM: "dmg_immunity",
  DEXTERITY: "dexterity",
  DEX_MOD: "dex_mod",
  DURATION: "duration",
  RULESET: "ruleset",
  HP: "HP",
  INTELLIGENCE: "intelligence",
  INT_MOD: "int_mod",
  LANGUAGES: "languages",
  LEVEL: "level",
  MAGICAL: "magical",
  MATERIAL: "material",
  NAME: "name",
  PROPERTIES: "properties",
  RANGE: "range",
  RARITY: "rarity",
  RELOAD: "reload",
  RITUAL: "ritual",
  SAVE: "save",
  SAVING_THROWS: "saving_throws",
  SCHOOL: "school",
  SENSES: "senses",
  SIZE: "size",
  SKILLS: "skills",
  SKILL_CHOICE_LIST: "skill_choice_list",
  SOMATIC: "somatic",
  SOURCE: "source",
  SPECIES: "species",
  SPEED: "speed",
  SPELL_CAST_MOD: "Spell Cast Mod",
  SPELL_RANGE: "Range",
  STEALTH_DISADVANTAGE: "stealthDisadvantage",
  STRENGTH: "strength",
  STR_MOD: "str_mod",
  SUBRACES: "subraces",
  TOOL_PROFICIENCIES: "tool-prof",
  TOOL_CHOICE_LIST: "tool_choice_list",
  TRAITS: "traits",
  TYPE: "type",
  VARIANT: "Variant",
  VERBAL: "verbal",
  VERMUN: "vermun",
  WEAPON_PROFICIENCIES: "weapon-prof",
  WEIGHT: "weight",
  WISDOM: "wisdom",
  WIS_MOD: "wis_mod"
};
var unifiedArmorProfs2 = (val) => Array.isArray(val?.armor) ? val.armor.map(cap3) : Array.isArray(val) ? val.map(cap3) : [];
function unifiedWeaponProfs2(val) {
  const rawArr = Array.isArray(val?.weapons) ? val.weapons : Array.isArray(val) ? val : [];
  const out = /* @__PURE__ */ new Set();
  function handleOne(entry) {
    if (Array.isArray(entry)) {
      entry.forEach(handleOne);
      return;
    }
    if (typeof entry === "string") {
      const lit = entry.trim().toLowerCase();
      if (lit === "simple") {
        out.add("Simple Weapons");
      } else if (lit === "martial") {
        out.add("Martial Weapons");
      } else {
        const text = entry.startsWith("{@") ? replace5eTags2(entry) : cap3(entry);
        out.add(text);
      }
      return;
    }
    if (entry && typeof entry === "object" && entry.proficiency) {
      const name = cap3(entry.proficiency);
      out.add(entry.optional ? `${name} (optional)` : name);
    }
  }
  rawArr.forEach(handleOne);
  return [...out];
}
var SAVE_NAME_MAP2 = {
  str: "Strength",
  strength: "Strength",
  dex: "Dexterity",
  dexterity: "Dexterity",
  con: "Constitution",
  constitution: "Constitution",
  int: "Intelligence",
  intelligence: "Intelligence",
  wis: "Wisdom",
  wisdom: "Wisdom",
  cha: "Charisma",
  charisma: "Charisma"
};
function unifiedSaves2(val) {
  if (!val) return [];
  if (Array.isArray(val)) {
    return val.map((k) => {
      const key2 = String(k).toLowerCase();
      return SAVE_NAME_MAP2[key2] || key2.charAt(0).toUpperCase() + key2.slice(1);
    });
  }
  if (typeof val === "object") {
    return Object.keys(val).map((k) => {
      const key2 = k.toLowerCase();
      return SAVE_NAME_MAP2[key2] || key2.charAt(0).toUpperCase() + key2.slice(1);
    });
  }
  const key = String(val).toLowerCase();
  return [SAVE_NAME_MAP2[key] || key.charAt(0).toUpperCase() + key.slice(1)];
}
var unifiedSkills4 = (val) => {
  if (val && !Array.isArray(val) && typeof val === "object" && // ensure every value is a string or number
  Object.values(val).every((v) => typeof v === "string" || typeof v === "number")) {
    return Object.entries(val).map(
      ([skill, mod]) => `${cap3(skill)} ${mod}`.trim()
    );
  }
  if (val && !Array.isArray(val) && typeof val === "object") {
    const nested = val.skills ?? val.skillProf ?? val.skillProficiencies;
    return unifiedSkills4(nested);
  }
  if (!Array.isArray(val)) return [];
  const out = /* @__PURE__ */ new Set();
  for (const e of val) {
    if (e && typeof e === "object" && typeof e.any === "number") {
      out.add(`Choose ${e.any}`);
      continue;
    }
    if (e && typeof e === "object" && e.choose) {
      const cnt = e.choose.count ?? 1;
      out.add(`Choose ${cnt}`);
    }
    if (e && typeof e === "object") {
      for (const [k, v] of Object.entries(e)) {
        if (v === true) out.add(cap3(k));
      }
    }
    if (typeof e === "string") {
      out.add(cap3(e));
    }
  }
  return [...out];
};
var unifiedToolProfs2 = (val) => {
  let entries = Array.isArray(val) ? val : Array.isArray(val?.toolProficiencies) ? val.toolProficiencies : Array.isArray(val?.tools) ? val.tools : [];
  const out = /* @__PURE__ */ new Set();
  let sawChoose = false;
  for (const e of entries) {
    if (typeof e === "string") {
      out.add(cap3(e));
      continue;
    }
    if (e?.choose) {
      const cnt = e.choose.count ?? 1;
      sawChoose = true;
      out.add(`Choose ${cnt}`);
    }
    for (const [k, v] of Object.entries(e)) {
      if (v === true) {
        out.add(cap3(k));
      } else if (typeof v === "number" && k.startsWith("any")) {
        const raw = k.replace(/^any/, "");
        const spaced = raw.replace(/([a-z])([A-Z])/g, "$1 $2").split(" ").map(cap3).join(" ");
        out.add(`Choose ${v} ${spaced}`);
      }
    }
  }
  return [...out];
};
var ALL_FIELD_DEFS2 = [
  // ─── Core ───
  { callSign: "NAME", jsonKey: "name" },
  {
    callSign: "SOURCE",
    jsonKey: ["source"],
    conv: (raw, allJson) => {
      const out = /* @__PURE__ */ new Set();
      const editionId = allJson._editionId;
      const arr = Array.isArray(raw) ? raw : [raw];
      arr.forEach((src) => {
        out.add(getFullSourceName2(src, editionId));
      });
      for (const os of allJson.otherSources ?? []) {
        if (os && typeof os.source === "string") {
          out.add(getFullSourceName2(os.source, editionId));
        }
      }
      for (const rep of allJson.reprintedAs ?? []) {
        const repStr = typeof rep === "string" ? rep : String(rep);
        const parts = repStr.split("|");
        const src = parts[1] ?? parts[0];
        out.add(getFullSourceName2(src, editionId));
      }
      return [...out];
    }
  },
  // ─── Proficiencies ───
  { callSign: "ARMOR_PROFICIENCIES", jsonKey: ["armorProficiencies", "armorProfs", "startingProficiencies"], conv: unifiedArmorProfs2 },
  {
    callSign: "WEAPON_PROFICIENCIES",
    jsonKey: ["weaponProficiencies", "weaponProfs", "startingProficiencies"],
    conv: unifiedWeaponProfs2
  },
  { callSign: "TOOL_PROFICIENCIES", jsonKey: ["toolProficiencies", "toolProfs", "startingProficiencies"], conv: unifiedToolProfs2 },
  {
    callSign: "TOOL_CHOICE_LIST",
    jsonKey: ["toolProficiencies", "toolProfs", "startingProficiencies"],
    conv: (raw) => {
      const arr = Array.isArray(raw) ? raw : Array.isArray(raw?.toolProficiencies) ? raw.toolProficiencies : Array.isArray(raw?.tools) ? raw.tools : [];
      const choice = arr.find((e) => e?.choose);
      return choice?.choose?.from?.map((s) => cap3(s)) ?? [];
    }
  },
  { callSign: "SAVING_THROWS", jsonKey: ["save", "proficiency", "savingThrow"], conv: unifiedSaves2 },
  {
    callSign: "SKILLS",
    jsonKey: ["skill", "skillProf", "skillProficiencies", "startingProficiencies"],
    conv: unifiedSkills4
  },
  {
    callSign: "SKILL_CHOICE_LIST",
    jsonKey: ["skill", "skillProf", "skillProficiencies", "startingProficiencies"],
    conv: (raw) => {
      const arr = Array.isArray(raw) ? raw : Array.isArray(raw?.skillProficiencies) ? raw.skillProficiencies : Array.isArray(raw?.skills) ? raw.skills : Array.isArray(raw?.skillProf) ? raw.skillProf : [];
      const choiceObj = arr.find((e) => e?.choose || typeof e.any === "number");
      if (!choiceObj) return [];
      if (choiceObj.choose && Array.isArray(choiceObj.choose.from)) {
        return choiceObj.choose.from.map(cap3);
      }
      if (typeof choiceObj.any === "number") {
        return SKILL_OPTIONS2;
      }
      return [];
    }
  },
  {
    callSign: "SPELL_CAST_MOD",
    jsonKey: "spellcastingAbility",
    conv: (raw) => {
      const key = String(raw).toLowerCase();
      return ABILITY_FULL2[key] || key.toUpperCase();
    }
  },
  // ─── Spells ───
  { callSign: "LEVEL", jsonKey: "level" },
  { callSign: "SCHOOL", jsonKey: "school", conv: (s) => SCHOOL_MAP2[s] ?? s },
  { callSign: "CASTING_TIME", jsonKey: "time", conv: formatTime2 },
  { callSign: "SPELL_RANGE", jsonKey: "range", conv: formatRange2 },
  { callSign: "DURATION", jsonKey: "duration", conv: formatDuration2 },
  { callSign: "VERBAL", jsonKey: "components", conv: (c) => !!c.v },
  { callSign: "SOMATIC", jsonKey: "components", conv: (c) => !!c.s },
  { callSign: "MATERIAL", jsonKey: "components", conv: (c) => !!c.m },
  {
    callSign: "COMPONENTS",
    jsonKey: "components",
    conv: (c) => {
      if (!c.m) return [];
      const raw = Array.isArray(c.m) ? c.m : [c.m];
      return raw.map((item) => {
        if (typeof item === "string") return item;
        if (item && typeof item === "object" && typeof item.text === "string") {
          return item.text;
        }
        return null;
      }).filter((comp) => comp !== null);
    }
  },
  { callSign: "ATTACK_TYPE", jsonKey: "attackType" },
  { callSign: "DAMAGE_TYPE", jsonKey: "damageInflict", conv: (d) => Array.isArray(d) ? d[0] : d },
  { callSign: "RITUAL", jsonKey: "ritual" },
  { callSign: "CONCENTRATION", jsonKey: "duration", conv: (ds) => Array.isArray(ds) && ds.some((x) => x.concentration) },
  { callSign: "SAVE", jsonKey: "saveAttr" },
  // ─── Species / Creatures ───
  { callSign: "SPECIES", jsonKey: "name" },
  {
    callSign: "SIZE",
    jsonKey: "size",
    conv: (raw) => {
      if (Array.isArray(raw)) {
        return raw.map((r) => SIZE_MAP4[r] || r);
      } else {
        return SIZE_MAP4[raw] || raw;
      }
    }
  },
  {
    callSign: "SPEED",
    jsonKey: "speed",
    conv: (sp) => {
      if (typeof sp === "number") {
        return [`Walk ${sp} ft.`];
      }
      if (!sp || typeof sp !== "object") return [];
      return Object.entries(sp).filter(([mode]) => mode !== "canHover").map(([mode, v]) => {
        const n = typeof v === "object" && v !== null && "number" in v ? v.number : v;
        const label = mode === "walk" ? "Walk" : cap3(mode);
        return `${label} ${n} ft.`;
      });
    }
  },
  { callSign: "LANGUAGES", jsonKey: ["languages", "languageProficiencies"], conv: (arr) => {
    if (!Array.isArray(arr)) return [];
    const out = [];
    for (const lp of arr) {
      if (typeof lp === "string") out.push(cap3(lp));
      else if (typeof lp === "object") {
        for (const [lang, val] of Object.entries(lp)) {
          if (val) out.push(cap3(lang));
        }
      }
    }
    return [...new Set(out)];
  } },
  { callSign: "SENSES", jsonKey: "senses", conv: (sen) => {
    if (Array.isArray(sen)) return sen.map((s) => s.replace(/^\d+\s*/, "").replace(/^./, (c) => c.toUpperCase()));
    if (sen && typeof sen === "object") return Object.entries(sen).map(([k, v]) => `${k.charAt(0).toUpperCase() + k.slice(1)} ${v}`);
    return [];
  } },
  {
    callSign: "TRAITS",
    jsonKey: ["classFeatures", "entries"],
    conv: (raw, allJson) => {
      const rec = Array.isArray(allJson.class) ? allJson.class[0] : Array.isArray(allJson.race) ? allJson.race[0] : allJson;
      const fileName = typeof rec?.name === "string" ? rec.name : typeof allJson?.name === "string" ? allJson.name : "";
      const omit = /* @__PURE__ */ new Set([
        // class-specific
        "Ability Score Improvement",
        "Archetype Feature",
        "Subclass Feature",
        // species-specific common headings
        "Age",
        "Size",
        "Speed",
        "Languages"
        // backgrounds often have generic sections too; add more if needed
      ]);
      const seen = /* @__PURE__ */ new Set();
      if (Array.isArray(allJson.classFeatures)) {
        const classRec = Array.isArray(allJson.class) ? allJson.class[0] : allJson;
        const className = typeof classRec?.name === "string" ? classRec.name : fileName;
        return allJson.classFeatures.flatMap((feat) => {
          if (feat && typeof feat === "object" && feat.gainSubclassFeature) return [];
          const rawName = typeof feat === "string" ? feat : typeof feat.classFeature === "string" ? feat.classFeature : "";
          const name = rawName.split("|")[0].trim();
          if (!name || omit.has(name) || seen.has(name)) return [];
          seen.add(name);
          const anchor = name.replace(/[^\w\s]/g, "").replace(/\s+/g, " ").trim().replace(/\b\w/g, (c) => c.toUpperCase());
          return className ? [`[[${className}#${anchor}|${name}]]`] : [name];
        });
      }
      const ents = Array.isArray(raw) ? raw : [];
      const names = [];
      const pushName = (n) => {
        const name = (n ?? "").replace(/^Feature:\s*/, "").trim();
        if (!name || omit.has(name) || seen.has(name)) return;
        seen.add(name);
        names.push(name);
      };
      for (const e of ents) {
        if (!e) continue;
        if (typeof e === "object" && typeof e.name === "string") {
          pushName(e.name);
        }
        if (typeof e === "object" && Array.isArray(e.entries)) {
          for (const sub of e.entries) {
            if (sub && typeof sub === "object" && typeof sub.name === "string") {
              pushName(sub.name);
            }
          }
        }
      }
      if (names.length) {
        return names.map((name) => {
          const anchor = name.replace(/[^\w\s]/g, "").replace(/\s+/g, " ").trim().replace(/\b\w/g, (c) => c.toUpperCase());
          return fileName ? `[[${fileName}#${anchor}|${name}]]` : name;
        });
      }
      return ents.filter((e) => e && typeof e.name === "string").map((e) => e.name.replace(/^Feature:\s*/, "").trim());
    }
  },
  { callSign: "AC", jsonKey: "ac", conv: (a) => Array.isArray(a) ? a[0].ac : a },
  { callSign: "HP", jsonKey: "hp", conv: (hp) => hp?.average ?? hp },
  { callSign: "CHALLENGE_RATING", jsonKey: "cr" },
  { callSign: "STRENGTH", jsonKey: "ability", conv: (arr) => Array.isArray(arr) ? arr[0] : arr?.str ?? 0 },
  { callSign: "DEXTERITY", jsonKey: "ability", conv: (arr) => Array.isArray(arr) ? arr[1] : arr?.dex ?? 0 },
  { callSign: "CONSTITUTION", jsonKey: "ability", conv: (arr) => Array.isArray(arr) ? arr[2] : arr?.con ?? 0 },
  { callSign: "INTELLIGENCE", jsonKey: "ability", conv: (arr) => Array.isArray(arr) ? arr[3] : arr?.int ?? 0 },
  { callSign: "WISDOM", jsonKey: "ability", conv: (arr) => Array.isArray(arr) ? arr[4] : arr?.wis ?? 0 },
  { callSign: "CHARISMA", jsonKey: "ability", conv: (arr) => Array.isArray(arr) ? arr[5] : arr?.cha ?? 0 },
  {
    callSign: "ALIGNMENT",
    jsonKey: "alignment",
    conv: (a) => {
      const raw = Array.isArray(a) ? a.join(" ") : typeof a === "string" ? a : String(a);
      const cleaned = raw.replace(/\bA\b/g, "Any").replace(/\bU\b/g, "Unaligned").replace(/\bN\b/g, "Neutral").replace(/\bL\b/g, "Lawful").replace(/\bC\b/g, "Chaotic").replace(/\bG\b/g, "Good").replace(/\bE\b/g, "Evil");
      return formatAlignmentAbbrev2(cleaned);
    }
  },
  {
    callSign: "TYPE",
    jsonKey: "type",
    conv: (t) => {
      if (typeof t === "string") {
        return ITEM_TYPE_MAP2[t] ?? cap3(t);
      }
      if (t && typeof t === "object") {
        const code = String(t.type || "").toUpperCase();
        if (ITEM_TYPE_MAP2[code]) {
          return ITEM_TYPE_MAP2[code];
        }
        const base = t.type ? cap3(t.type) : "Unknown";
        const tags = Array.isArray(t.tags) ? t.tags.map(cap3) : [];
        return tags.length ? `${base} (${tags.join(", ")})` : base;
      }
      return void 0;
    }
  },
  // ─── Items ───
  { callSign: "TYPE", jsonKey: "_parsedType" },
  { callSign: "RARITY", jsonKey: "rarity", conv: (r) => {
    const s = String(r || "").toLowerCase();
    return s && s !== "none" ? s[0].toUpperCase() + s.slice(1) : void 0;
  } },
  {
    callSign: "COST",
    jsonKey: "value",
    conv: (raw) => {
      const s = String(raw).trim().toLowerCase();
      let num;
      if (s.endsWith("cp")) {
        num = parseFloat(s);
        return num >= 100 ? `${Math.round(num / 100 * 100) / 100}gp` : `${num}cp`;
      }
      if (s.endsWith("sp")) {
        num = parseFloat(s);
        return num >= 10 ? `${Math.round(num / 10 * 100) / 100}gp` : `${num}sp`;
      }
      if (s.endsWith("gp")) {
        num = parseFloat(s);
        return `${Math.round(num * 100) / 100}gp`;
      }
      num = parseFloat(s) || 0;
      return num >= 100 ? `${Math.round(num / 100 * 100) / 100}gp` : `${num}cp`;
    }
  },
  { callSign: "WEIGHT", jsonKey: "weight" },
  { callSign: "MAGICAL", jsonKey: "wondrous", conv: (_w, all) => !!all.wondrous || !!all.reqAttune },
  { callSign: "VARIANT", jsonKey: "bonusWeapon", conv: (b) => typeof b === "string" && b.startsWith("+") },
  { callSign: "PROPERTIES", jsonKey: "property", conv: (arr) => Array.isArray(arr) ? arr.map((p) => PROPERTY_MAP2[p] || p) : [] },
  { callSign: "DAMAGE", jsonKey: "dmg1", conv: (d, all) => d ? all.dmg2 ? `${d} / ${all.dmg2}` : `${d}` : void 0 },
  { callSign: "DAMAGE_TYPES", jsonKey: "dmgType", conv: (dt) => dt == null ? [] : Array.isArray(dt) ? dt : [dt] },
  { callSign: "RANGE", jsonKey: "range" },
  { callSign: "RELOAD", jsonKey: "reload" },
  { callSign: "AMMO_TYPE", jsonKey: "ammoType", conv: (v) => typeof v === "string" ? v.split("|")[0].charAt(0).toUpperCase() + v.split("|")[0].slice(1).toLowerCase() : "" },
  { callSign: "STEALTH_DISADVANTAGE", jsonKey: "stealth" },
  {
    callSign: "ATTUNEMENT",
    jsonKey: ["wondrous", "reqAttune", "req_attune", "reqAttuneTags"],
    conv: (_raw, allJson) => {
      const j = allJson;
      const hasText = typeof j.reqAttune === "string" && j.reqAttune.trim() !== "";
      const hasTags = Array.isArray(j.reqAttuneTags) && j.reqAttuneTags.length > 0;
      return hasText || hasTags;
    }
  },
  {
    callSign: "ATTUNE_REQ",
    jsonKey: "reqAttuneTags",
    conv: (tags = [], _all) => {
      const mapLetter = {
        A: "Any",
        U: "Unaligned",
        N: "Neutral",
        L: "Lawful",
        C: "Chaotic",
        G: "Good",
        E: "Evil"
      };
      const reqs = [];
      for (const tag of tags) {
        if (tag.class && Array.isArray(tag.alignment)) {
          const cls = cap3(tag.class);
          for (const code of tag.alignment) {
            reqs.push(`${mapLetter[code] || code} ${cls}`);
          }
        } else if (tag.class) {
          reqs.push(cap3(tag.class));
        } else if (Array.isArray(tag.alignment)) {
          for (const code of tag.alignment) {
            reqs.push(mapLetter[code] || code);
          }
        } else if (tag.background) {
          const [bg] = String(tag.background).split("|");
          reqs.push(bg.split(" ").map(cap3).join(" "));
        } else if (tag.spellcasting) {
          reqs.push("Spellcaster");
        }
      }
      return Array.from(new Set(reqs));
    }
  },
  {
    callSign: "VERMUN",
    jsonKey: "wondrous",
    // or whatever property you use to detect “magical”
    conv: (_raw, all) => !!all.wondrous || !!all.reqAttune
  },
  // ─── Other ───
  { callSign: "DAMAGE_RES", jsonKey: "resist", conv: (v) => Array.isArray(v) ? v.map(cap3) : [] },
  {
    callSign: "RULESET",
    jsonKey: "name",
    // ignore the raw value, always print HELLO
    conv: (_raw, _all) => "D&D 5e (2025)"
  },
  // ─── Ability‐score modifiers (only emit when nonzero) ───
  {
    callSign: "STR_MOD",
    jsonKey: "ability",
    conv: (arr) => {
      const v = Array.isArray(arr) ? arr[0].str ?? 0 : arr.str ?? 0;
      return v !== 0 ? v : void 0;
    }
  },
  {
    callSign: "DEX_MOD",
    jsonKey: "ability",
    conv: (arr) => {
      const v = Array.isArray(arr) ? arr[0].dex ?? 0 : arr.dex ?? 0;
      return v !== 0 ? v : void 0;
    }
  },
  {
    callSign: "CON_MOD",
    jsonKey: "ability",
    conv: (arr) => {
      const v = Array.isArray(arr) ? arr[0].con ?? 0 : arr.con ?? 0;
      return v !== 0 ? v : void 0;
    }
  },
  {
    callSign: "INT_MOD",
    jsonKey: "ability",
    conv: (arr) => {
      const v = Array.isArray(arr) ? arr[0].int ?? 0 : arr.int ?? 0;
      return v !== 0 ? v : void 0;
    }
  },
  {
    callSign: "WIS_MOD",
    jsonKey: "ability",
    conv: (arr) => {
      const v = Array.isArray(arr) ? arr[0].wis ?? 0 : arr.wis ?? 0;
      return v !== 0 ? v : void 0;
    }
  },
  {
    callSign: "CHA_MOD",
    jsonKey: "ability",
    conv: (arr) => {
      const v = Array.isArray(arr) ? arr[0].cha ?? 0 : arr.cha ?? 0;
      return v !== 0 ? v : void 0;
    }
  }
];
function buildFM2(json, defs) {
  const fm = {};
  for (const { callSign, jsonKey, conv } of defs) {
    const keys = Array.isArray(jsonKey) ? jsonKey : [jsonKey];
    let raw = void 0;
    for (const key of keys) {
      if (json[key] != null) {
        raw = json[key];
        break;
      }
    }
    if (raw == null) continue;
    const val = conv ? conv(raw, json) : raw;
    fm[FM_FIELDS4[callSign]] = val;
  }
  return fm;
}
function serializeFrontmatter2(fm, defs) {
  const filtered = {};
  const hasSkillChoice = Array.isArray(fm[FM_FIELDS4.SKILL_CHOICE_LIST]) && fm[FM_FIELDS4.SKILL_CHOICE_LIST].length > 0;
  const hasToolChoice = Array.isArray(fm[FM_FIELDS4.TOOL_CHOICE_LIST]) && fm[FM_FIELDS4.TOOL_CHOICE_LIST].length > 0;
  for (const [k, v] of Object.entries(fm)) {
    if (v === void 0) continue;
    if (k === FM_FIELDS4.COMPONENTS && Array.isArray(v) && v.length === 0) continue;
    if ((k === FM_FIELDS4.TOOL_CHOICE_LIST || k === FM_FIELDS4.SKILL_CHOICE_LIST) && Array.isArray(v) && v.length === 0) continue;
    filtered[k] = v;
  }
  let keysToEmit;
  if (defs) {
    const wanted = defs.map((d) => FM_FIELDS4[d.callSign]);
    keysToEmit = wanted.filter((k) => k in filtered);
    keysToEmit.push(
      ...Object.keys(filtered).filter((k) => !keysToEmit.includes(k))
    );
  } else {
    keysToEmit = Object.keys(filtered);
  }
  return keysToEmit.map((k) => {
    const v = filtered[k];
    if (Array.isArray(v)) {
      const inline = v.map((item) => JSON.stringify(item)).join(", ");
      return `${k}: [${inline}]`;
    }
    if (typeof v === "string") {
      return `${k}: "${v}"`;
    }
    return `${k}: ${v}`;
  }).join("\n");
}
var SKILL_OPTIONS2 = [
  "Acrobatics",
  "Animal Handling",
  "Arcana",
  "Athletics",
  "Deception",
  "History",
  "Insight",
  "Intimidation",
  "Investigation",
  "Medicine",
  "Nature",
  "Perception",
  "Performance",
  "Persuasion",
  "Religion",
  "Sleight of Hand",
  "Stealth",
  "Survival"
];
var SPELL_KEYS2 = [
  "NAME",
  "LEVEL",
  "SCHOOL",
  "CASTING_TIME",
  "SPELL_RANGE",
  "SAVING_THROWS",
  "DURATION",
  "VERBAL",
  "SOMATIC",
  "MATERIAL",
  "COMPONENTS",
  "CONCENTRATION",
  "SOURCE",
  "RULESET"
];
var SPECIES_KEYS2 = [
  "SPECIES",
  "SIZE",
  "SPEED",
  "LANGUAGES",
  "TRAITS",
  "SKILLS",
  "STR_MOD",
  "DEX_MOD",
  "CON_MOD",
  "INT_MOD",
  "WIS_MOD",
  "CHA_MOD",
  "SKILL_CHOICE_LIST",
  "TOOL_PROFICIENCIES",
  "TOOL_CHOICE_LIST",
  "WEAPON_PROFICIENCIES",
  "SENSES",
  "DAMAGE_RES",
  "SOURCE",
  "RULESET"
];
var ITEM_KEYS2 = [
  "NAME",
  "TYPE",
  "RARITY",
  "COST",
  "WEIGHT",
  "PROPERTIES",
  "DAMAGE",
  "DAMAGE_TYPES",
  "RANGE",
  "RELOAD",
  "AMMO_TYPE",
  "AC",
  "STEALTH_DISADVANTAGE",
  "MAGICAL",
  "ATTUNEMENT",
  "ATTUNE_REQ",
  "VERMUN",
  "SOURCE",
  "RULESET"
];
var BESTIARY_KEYS2 = [
  "NAME",
  "SIZE",
  "TYPE",
  "ALIGNMENT",
  "AC",
  "HP",
  "SPEED",
  "STRENGTH",
  "DEXTERITY",
  "CONSTITUTION",
  "INTELLIGENCE",
  "WISDOM",
  "CHARISMA",
  "SAVING_THROWS",
  "SKILLS",
  "SENSES",
  "LANGUAGES",
  "CHALLENGE_RATING",
  "SOURCE",
  "RULESET"
];
var CLASS_KEYS2 = [
  "NAME",
  "SPELL_CAST_MOD",
  "ARMOR_PROFICIENCIES",
  "WEAPON_PROFICIENCIES",
  "TOOL_PROFICIENCIES",
  "TOOL_CHOICE_LIST",
  "SAVING_THROWS",
  "SKILLS",
  "SKILL_CHOICE_LIST",
  "TRAITS",
  "SOURCE",
  "RULESET"
];
var BACKGROUND_KEYS2 = [
  "NAME",
  "SKILLS",
  "SKILL_CHOICE_LIST",
  "TOOL_PROFICIENCIES",
  "TOOL_CHOICE_LIST",
  "TRAITS",
  "SOURCE",
  "RULESET"
];
var FEATS_KEYS2 = [
  "SOURCE",
  "RULESET"
];
var SPELL_META_DEFS2 = SPELL_KEYS2.map((key) => {
  const def = ALL_FIELD_DEFS2.find((d) => d.callSign === key);
  if (!def) throw new Error(`Missing FieldDef for SPELL_KEY ${key}`);
  return def;
});
var SPECIES_META_DEFS2 = SPECIES_KEYS2.map((key) => {
  const def = ALL_FIELD_DEFS2.find((d) => d.callSign === key);
  if (!def) throw new Error(`Missing FieldDef for SPECIES_KEY ${key}`);
  return def;
});
var ITEM_META_DEFS2 = ITEM_KEYS2.map((key) => {
  const def = ALL_FIELD_DEFS2.find((d) => d.callSign === key);
  if (!def) throw new Error(`Missing FieldDef for ITEM_KEY ${key}`);
  return def;
});
var BESTIARY_META_DEFS2 = BESTIARY_KEYS2.map((key) => {
  const def = ALL_FIELD_DEFS2.find((d) => d.callSign === key);
  if (!def) throw new Error(`Missing FieldDef for BESTIARY_KEY ${key}`);
  return def;
});
var CLASS_META_DEFS2 = CLASS_KEYS2.map((key) => {
  const def = ALL_FIELD_DEFS2.find((d) => d.callSign === key);
  if (!def) throw new Error(`Missing FieldDef for CLASS_KEY ${key}`);
  return def;
});
var BACKGROUND_META_DEFS2 = BACKGROUND_KEYS2.map((key) => {
  const def = ALL_FIELD_DEFS2.find((d) => d.callSign === key);
  if (!def) throw new Error(`Missing FieldDef for BACKGROUND_KEY ${key}`);
  return def;
});
var FEATS_META_DEFS2 = FEATS_KEYS2.map((key) => {
  const def = ALL_FIELD_DEFS2.find((d) => d.callSign === key);
  if (!def) throw new Error(`Missing FieldDef for BACKGROUND_KEY ${key}`);
  return def;
});

// src/parsers/5e-2025/spells.ts
var SCHOOL_MAP2 = {
  A: "Abjuration",
  C: "Conjuration",
  D: "Divination",
  E: "Enchantment",
  V: "Evocation",
  I: "Illusion",
  N: "Necromancy",
  T: "Transmutation"
};
function ordinal2(n) {
  const suffix = n === 1 ? "st" : n === 2 ? "nd" : n === 3 ? "rd" : "th";
  return `${n}${suffix}`;
}
function formatRange2(range) {
  if (!range) return "";
  if (typeof range === "string") return range;
  if (range.type === "special") return "Special";
  if (range.type === "point" && range.distance) {
    const dist = range.distance;
    if (dist.type === "touch") return "Touch";
    if (dist.type === "self") return "Self";
    if (dist.type === "sight") return "Sight";
    if (dist.amount) return `${dist.amount} ${dist.type}`;
  }
  return "Varies";
}
function formatTime2(time) {
  if (!Array.isArray(time)) return "";
  return time.map((t) => `${t.number} ${t.unit}`).join(", ");
}
function formatDuration2(duration) {
  if (!Array.isArray(duration)) return "";
  return duration.map((d) => {
    if (d.type === "instant") return "Instantaneous";
    if (d.type === "timed" && d.duration) {
      return `${d.duration.amount} ${d.duration.type}${d.concentration ? " (concentration)" : ""}`;
    }
    if (d.type === "permanent") return "Permanent";
    return "Special";
  }).join(", ");
}
function formatComponents2(components) {
  if (!components) return "";
  const parts = [];
  if (components.v) parts.push("V");
  if (components.s) parts.push("S");
  if (components.m) {
    let matDetails = [];
    if (Array.isArray(components.m)) {
      matDetails = components.m.map(
        (item) => typeof item === "string" ? item : item && typeof item.text === "string" ? item.text : null
      ).filter((t) => !!t);
    } else if (typeof components.m === "string") {
      matDetails = [components.m];
    } else if (components.m.text) {
      matDetails = [components.m.text];
    }
    const matPart = matDetails.length > 0 ? `M (${matDetails.join(", ")})` : "M";
    parts.push(matPart);
  }
  return parts.join(", ");
}
function parseSpellsFile2(json, editionId) {
  if (!json.spell) return [];
  json._editionId = editionId;
  return json.spell.map((spell) => {
    const sources = spell.source ? Array.isArray(spell.source) ? spell.source : [spell.source] : ["unknown"];
    const name = spell.name;
    const school = SCHOOL_MAP2[spell.school] ?? spell.school;
    const level = spell.level;
    const range = formatRange2(spell.range);
    const castingTime = formatTime2(spell.time);
    const duration = formatDuration2(spell.duration);
    const formattedSources = sources.map((s) => getFullSourceName2(s, editionId));
    const attackType = spell.attackType || "";
    const damageType = spell.damageInflict?.[0] || "Teleportation";
    const ritual = spell.ritual === true;
    const concentration = spell.duration?.some((d) => d.concentration) ?? false;
    const FM = buildFM2(spell, SPELL_META_DEFS2);
    const yaml = serializeFrontmatter2(FM, SPELL_META_DEFS2);
    const savingThrows = FM[FM_FIELDS4.SAVING_THROWS] || [];
    const saveAttr = FM[FM_FIELDS4.SAVE];
    const safeName = name.replace(/\//g, "-");
    const title = `# ${name}`;
    const levelLabel = level === 0 ? `${school} Cantrip` : `${ordinal2(level)}-level ${school} Spell`;
    const subtitle = `### *${levelLabel}*${concentration ? " *(Concentration)*" : ""}`;
    const headerLines = [
      title,
      subtitle,
      `**Casting Time:** ${castingTime}`,
      `**Range:** ${range}`,
      `**Components:** ${formatComponents2(spell.components)}`,
      ...savingThrows.length ? [`**Saving Throw:** ${savingThrows.join(", ")}`] : [],
      `**Duration:** ${duration}`
    ];
    const bodyLines = [
      ...(spell.entries ?? []).map((e) => formatEntry2(e)),
      ...(spell.entriesHigherLevel ?? []).map((e) => formatEntry2(e))
    ];
    const footerLines = [
      `---`,
      `**Source:** ${formattedSources.join(", ")}`
    ];
    return {
      path: `${safeName}.md`,
      content: [
        `---
${yaml}
---`,
        headerLines.join("\n"),
        ``,
        bodyLines.join("\n\n"),
        ``,
        footerLines.join("\n")
      ].join("\n")
    };
  });
}

// src/parsers/5e-2025/species.ts
function slug2(name) {
  return name.replace(/;/g, ":").replace(/[\/:"]/g, ":").trim();
}
var BLOCKED_TRAITS2 = ["Age", "Size", "Languages", "Creature Type", "Speed"];
function linkDisplay2(str) {
  if (typeof str !== "string") return String(str ?? "");
  const m = str.match(/^\[\[(.+?)\]\]$/);
  if (!m) return str;
  const inner = m[1];
  const pipe = inner.split("|");
  if (pipe.length > 1) return pipe[1].trim();
  const hash = inner.split("#");
  if (hash.length > 1) return hash[1].trim();
  return inner.trim();
}
function normName2(n) {
  return String(n ?? "").replace(/^Feature:\s*/i, "").replace(/\s+/g, " ").trim().toLowerCase();
}
function findEntryByName2(entries, display) {
  if (!Array.isArray(entries)) return null;
  const target = normName2(display);
  const direct = entries.find((e) => typeof e?.name === "string" && normName2(e.name) === target);
  if (direct) return direct;
  for (const e of entries) {
    if (Array.isArray(e?.entries)) {
      const sub = e.entries.find((s) => typeof s?.name === "string" && normName2(s.name) === target);
      if (sub) return sub;
    }
  }
  return null;
}
function parseSpeciesFile2(json, editionId) {
  if (!Array.isArray(json.race)) return [];
  json._editionId = editionId;
  const rawVariants = json.race.filter(
    (r) => !/\((?:Kaladesh|Zendikar|Amonkhet|Innistrad|Ixalan)\)$/.test(r.name)
  );
  const byName = /* @__PURE__ */ new Map();
  for (const r of rawVariants) {
    const list = byName.get(r.name) ?? [];
    list.push(r);
    byName.set(r.name, list);
  }
  const subracesList = Array.isArray(json.subrace) ? json.subrace : [];
  const out = [];
  for (const [raceName, raceVariants] of byName.entries()) {
    const safeName = slug2(raceName);
    const primary = raceVariants.reduce(
      (best, cur) => Object.keys(cur).length > Object.keys(best).length ? cur : best,
      raceVariants[0]
    );
    if (!primary.ability) {
      const humanEntry = subracesList.find(
        (sr) => sr.raceName === raceName && sr.raceSource === primary.source && !("name" in sr) && Array.isArray(sr.ability)
      );
      if (humanEntry) primary.ability = humanEntry.ability;
    }
    const fm = buildFM2(primary, SPECIES_META_DEFS2);
    const senses = [];
    if (primary.darkvision) senses.push(`Darkvision ${primary.darkvision} ft.`);
    if (primary.blindsight) senses.push(`Blindsight ${primary.blindsight} ft.`);
    if (primary.tremorsense) senses.push(`Tremorsense ${primary.tremorsense} ft.`);
    if (primary.truesight) senses.push(`Truesight ${primary.truesight} ft.`);
    if (senses.length) fm.senses = senses;
    if (Array.isArray(fm.traits)) {
      fm.traits = fm.traits.filter((t) => !BLOCKED_TRAITS2.includes(t));
    }
    const yaml = serializeFrontmatter2(fm, SPECIES_META_DEFS2);
    const lines = [];
    lines.push(`# ${raceName}`, `## Stats`);
    const size = Array.isArray(primary.size) ? primary.size.map((s) => SIZE_MAP4[s] || s).join("/") : SIZE_MAP4[primary.size] ?? primary.size;
    lines.push(`**Size:** ${size}`);
    const speed = typeof primary.speed === "number" ? primary.speed : primary.speed?.walk ?? primary.speed?.base ?? 0;
    lines.push(`**Speed:** ${speed} ft. walking`);
    const kids = subracesList.filter(
      (sr) => sr.name && sr.raceName === raceName && sr.raceSource === primary.source
    );
    const rawAbility = Array.isArray(primary.ability) ? primary.ability : Array.isArray(kids[0]?.ability) ? kids[0].ability : [];
    if (Array.isArray(rawAbility) && rawAbility.length) {
      const bonuses = { str: 0, dex: 0, con: 0, int: 0, wis: 0, cha: 0 };
      let chooseOpt = null;
      for (const obj of rawAbility) {
        if ("choose" in obj) chooseOpt = obj.choose;
        else for (const [k, v] of Object.entries(obj)) bonuses[k] += v;
      }
      const pairs = Object.entries(bonuses);
      const parts = pairs.filter(([, v]) => v !== 0).map(([k, v]) => `${k.toUpperCase()} ${v >= 0 ? "+" : ""}${v}`);
      if (chooseOpt?.count && Array.isArray(chooseOpt.from)) {
        parts.push(`CHOOSE ${chooseOpt.count} from ${chooseOpt.from.map((s) => s.toUpperCase()).join(", ")}`);
      }
      if (parts.length) lines.push(`**Ability Scores:** ${parts.join(", ")}`);
    }
    const langs = fm.languages;
    if (langs?.length) lines.push(`**Languages:** ${langs.join(", ")}`);
    if (Array.isArray(primary.skillProficiencies)) {
      const skillLabels = [];
      for (const e of primary.skillProficiencies) {
        if (e.choose?.from) {
          skillLabels.push(`Choose from: ${e.choose.from.map((s) => s.charAt(0).toUpperCase() + s.slice(1)).join(", ")}`);
        } else {
          const val = e.proficiency ?? e.name ?? e;
          if (typeof val === "string") skillLabels.push(val.charAt(0).toUpperCase() + val.slice(1));
        }
      }
      if (skillLabels.length) lines.push(`**Skill Proficiencies:** ${skillLabels.join("; ")}`);
    }
    const tp = fm[FM_FIELDS4.TOOL_PROFICIENCIES];
    const wp = fm[FM_FIELDS4.WEAPON_PROFICIENCIES];
    const ap = fm[FM_FIELDS4.ARMOR_PROFICIENCIES];
    if (tp?.length) lines.push(`**Tool Proficiencies:** ${tp.join(", ")}`);
    if (wp?.length) lines.push(`**Weapon Proficiencies:** ${wp.join(", ")}`);
    if (ap?.length) lines.push(`**Armor Proficiencies:** ${ap.join(", ")}`);
    lines.push(`## Traits`);
    const seen = /* @__PURE__ */ new Set();
    for (const trait of fm.traits || []) {
      const title = linkDisplay2(trait);
      lines.push(`##### ${title}`);
      const ent = findEntryByName2(primary.entries, title);
      if (ent?.entries) {
        ent.entries.forEach((sub, idx) => {
          let blk;
          if (sub.type === "table") {
            blk = renderMarkdownTable2(sub);
          } else if (sub.type === "list") {
            blk = sub.items.map((it) => typeof it === "string" ? `- ${replace5eTags2(it)}` : `- ${it.name}`).join("\n");
          } else if (typeof sub === "string") {
            blk = replace5eTags2(sub);
          }
          if (blk && !seen.has(blk)) {
            lines.push(blk);
            seen.add(blk);
            if (ent.entries.length > 1 && idx < ent.entries.length - 1) lines.push("");
          }
        });
      }
    }
    const subs = kids;
    if (subs.length) {
      out.push({
        path: `Species/${safeName}/${safeName}.md`,
        content: `---
${yaml}
---

${lines.join("\n")}`
      });
      const subFolder = `Species/${safeName}/Races`;
      for (const sr of subs) {
        const display = sr.name.replace(/;/g, ":");
        const subLines = [`# ${display}`];
        if (Array.isArray(sr.ability)) {
          const bonuses = { str: 0, dex: 0, con: 0, int: 0, wis: 0, cha: 0 };
          let chooseOpt = null;
          for (const obj of sr.ability) {
            if ("choose" in obj) chooseOpt = obj.choose;
            else for (const [k, v] of Object.entries(obj)) bonuses[k] += v;
          }
          const pairs = Object.entries(bonuses);
          const parts = pairs.filter(([, v]) => v !== 0).map(([k, v]) => `${k.toUpperCase()} ${v >= 0 ? "+" : ""}${v}`);
          if (chooseOpt?.count) parts.push(`CHOOSE ${chooseOpt.count} from ${chooseOpt.from.map((s) => s.toUpperCase()).join(", ")}`);
          if (parts.length) subLines.push(`**Ability Scores:** ${parts.join(", ")}`);
        }
        for (const entry of sr.entries || []) {
          subLines.push(formatEntry2(entry));
          subLines.push("");
        }
        const subYaml = serializeFrontmatter2(buildFM2(sr, SPECIES_META_DEFS2), SPECIES_META_DEFS2);
        out.push({
          path: `${subFolder}/${slug2(sr.name)}.md`,
          content: `---
${subYaml}
---

${subLines.join("\n")}`
        });
      }
    } else {
      out.push({
        path: `Species/${safeName}.md`,
        content: `---
${yaml}
---

${lines.join("\n")}`
      });
    }
  }
  return out.sort((a, b) => a.path.localeCompare(b.path));
}

// src/parsers/5e-2025/classes.ts
function isTypedEntry2(x) {
  return x != null && typeof x === "object" && !Array.isArray(x) && typeof x.type === "string";
}
function formatFeatureLink2(name) {
  const ignore = ["Ability Score Improvement", "Archetype Feature", "Subclass Feature"];
  if (ignore.some((sub) => name.toLowerCase().includes(sub.toLowerCase()))) {
    return name;
  }
  const anchor = name.replace(/[^\w\s]/g, "").replace(/-/g, " ").replace(/\s+/g, " ").trim().replace(/\b\w/g, (l) => l.toUpperCase());
  return `[[#${anchor}]]`;
}
function toHeaderAnchor2(name) {
  return name.replace(/[^\w\s]/g, "").replace(/-/g, " ").replace(/\s+/g, " ").trim().replace(/\b\w/g, (l) => l.toUpperCase());
}
var OPT_FEATURE_TYPE_TO_FULL2 = {
  AI: "Artificer Infusion",
  ED: "Elemental Discipline",
  EI: "Eldritch Invocation",
  MM: "Metamagic",
  MV: "Maneuver",
  "MV:B": "Maneuver, Battle Master",
  "MV:C2-UA": "Maneuver, Cavalier V2 (UA)",
  "AS:V1-UA": "Arcane Shot, V1 (UA)",
  "AS:V2-UA": "Arcane Shot, V2 (UA)",
  AS: "Arcane Shot",
  OTH: "Other",
  "FS:F": "Fighting Style; Fighter",
  "FS:B": "Fighting Style; Bard",
  "FS:P": "Fighting Style; Paladin",
  "FS:R": "Fighting Style; Ranger",
  PB: "Pact Boon",
  OR: "Onomancy Resonant",
  RN: "Rune Knight Rune",
  AF: "Alchemical Formula",
  TT: "Traveler's Trick"
};
function parseClassFile2(json, editionId, fileName, optionalFeatures) {
  json._editionId = editionId;
  const cls = Array.isArray(json.class) ? json.class[0] : json;
  const className = typeof cls.name === "string" ? cls.name : fileName ? fileName.replace(/^class-/, "").replace(/\.json$/, "") : "Unknown";
  const subclassFiles = [];
  const PROF_BONUS_BY_LEVEL = [
    "+2",
    "+2",
    "+2",
    "+2",
    "+3",
    "+3",
    "+3",
    "+3",
    "+4",
    "+4",
    "+4",
    "+4",
    "+5",
    "+5",
    "+5",
    "+5",
    "+6",
    "+6",
    "+6",
    "+6"
  ];
  const hdNum = cls.hd?.number ?? 1;
  const hdFaces = cls.hd?.faces ?? 6;
  const hdStr = `${hdNum}d${hdFaces}`;
  const hdMax = hdNum * hdFaces;
  const hdAvg = Math.ceil((hdFaces + 1) / 2);
  const baseFM = buildFM2(cls, CLASS_META_DEFS2);
  const fm = { ...baseFM, hd: hdStr };
  const yaml = serializeFrontmatter2(fm, CLASS_META_DEFS2);
  const lines = [];
  lines.push(`# ${className}`);
  if (cls.source) lines.push(`**Source:** ${cls.source}`);
  lines.push(``);
  lines.push(`---`);
  lines.push(`## Hit Points`);
  lines.push(`**Hit Dice:** ${hdStr} per ${className} level`);
  lines.push(`**Hit Points at 1st Level:** ${hdMax} + your Constitution modifier`);
  lines.push(
    `**Hit Points at Higher Levels:** ${hdStr} (or ${hdAvg}) + your Constitution modifier per level after 1st`
  );
  lines.push(``);
  lines.push(`---`);
  lines.push(`## Proficiencies`);
  const sp = cls.startingProficiencies ?? {};
  if (Array.isArray(sp.armor) && sp.armor.length) {
    lines.push(`- **Armor:** ${sp.armor.join(", ")}`);
  }
  const weaponList = unifiedWeaponProfs2(sp);
  if (weaponList.length) {
    lines.push(`- **Weapons:** ${weaponList.join(", ")}`);
  }
  const toolList = unifiedToolProfs2(sp);
  if (toolList.length) {
    lines.push(`- **Tools:** ${toolList.join(", ")}`);
  }
  const saves = Array.isArray(cls.proficiency) ? cls.proficiency.map(
    (k) => ({
      str: "Strength",
      dex: "Dexterity",
      con: "Constitution",
      int: "Intelligence",
      wis: "Wisdom",
      cha: "Charisma"
    })[k] || k.toUpperCase()
  ) : [];
  if (saves.length) {
    lines.push(`- **Saving Throws:** ${saves.join(", ")}`);
  }
  {
    const rawSkills = Array.isArray(sp.skillProficiencies) ? sp.skillProficiencies : Array.isArray(sp.skills) ? sp.skills : Array.isArray(sp.skillProf) ? sp.skillProf : [];
    const choiceEntry = rawSkills.find(
      (e) => e && (typeof e.choose === "object" || typeof e.any === "number")
    );
    if (choiceEntry) {
      const count = choiceEntry.choose?.count ?? choiceEntry.any ?? 1;
      const options = Array.isArray(choiceEntry.choose?.from) ? choiceEntry.choose.from.map(
        (s) => (
          // title-case each word (or just use s)
          s.split(" ").map((w) => w[0].toUpperCase() + w.slice(1)).join(" ")
        )
      ) : SKILL_OPTIONS2;
      lines.push(`- **Skills (Choose ${count}):** ${options.join(", ")}`);
    } else {
      const flat = unifiedSkills4(sp);
      if (flat.length) {
        lines.push(`- **Skills:** ${flat.join(", ")}`);
      }
    }
  }
  if (Array.isArray(cls.startingEquipment)) {
    lines.push(`
### Equipment`);
    cls.startingEquipment.filter((e) => typeof e === "string").forEach((item) => lines.push(`- ${item}`));
  }
  const progGroups = cls.classTableGroups ?? [];
  const maxLevel = 20;
  if (!progGroups.length) {
    lines.push(`*(No class table provided for this class.)*`);
  } else {
    const featuresByLevel2 = {};
    for (const feat of cls.classFeatures ?? []) {
      const raw = typeof feat === "object" && feat.classFeature ? feat.classFeature : String(feat);
      const [name, , , lvlStr] = raw.split("|");
      const lvl = Number(lvlStr ?? 0);
      if (!featuresByLevel2[lvl]) featuresByLevel2[lvl] = [];
      featuresByLevel2[lvl].push(name);
    }
    const allLabelsSet = /* @__PURE__ */ new Set();
    const rowMaps = {};
    for (const group of progGroups) {
      const labels = Array.isArray(group.colLabels) ? group.colLabels.map((l) => replace5eTags2(l)) : [];
      const rows = Array.isArray(group.rows) ? group.rows : Array.isArray(group.rowsSpellProgression) ? group.rowsSpellProgression : [];
      if (!labels.length || !rows.length) continue;
      for (let lvl = 0; lvl < rows.length; lvl++) {
        const levelNum = lvl + 1;
        if (!rowMaps[levelNum]) rowMaps[levelNum] = {};
        const rowMap = rowMaps[levelNum];
        const cells = rows[lvl];
        for (let i = 0; i < labels.length; i++) {
          const label = labels[i];
          let val = "";
          const cell = cells[i];
          if (Array.isArray(cell)) {
            val = cell.join(", ");
          } else if (cell && typeof cell === "object" && "value" in cell) {
            val = String(cell.value);
          } else {
            val = String(cell ?? "");
          }
          allLabelsSet.add(label);
          rowMap[label] = val;
        }
      }
    }
    const allLabels = Array.from(allLabelsSet).filter(
      (lbl) => !/Cantrips Known|Spells Known|\d+(st|nd|rd|th)/.test(lbl)
    );
    const mergedLabels = ["Level", "Proficiency Bonus", "Class Features", ...allLabels];
    const mergedRows = [];
    for (let lvl = 1; lvl <= maxLevel; lvl++) {
      const featureList = (featuresByLevel2[lvl] ?? []).map(formatFeatureLink2);
      const rowMap = rowMaps[lvl] ?? {};
      mergedRows.push([
        lvl.toString(),
        PROF_BONUS_BY_LEVEL[lvl - 1] || "",
        featureList.join(", ").replace(/\|/g, "&#124;"),
        ...allLabels.map((label) => rowMap[label] ?? "")
      ]);
    }
    lines.push(`
> [!example]- Class Progression Table`);
    lines.push(
      renderMarkdownTable2({
        type: "table",
        caption: "",
        colLabels: mergedLabels,
        rows: mergedRows
      })
    );
  }
  const csGroup = progGroups.find(
    (g) => Array.isArray(g.colLabels) && g.colLabels.some((lbl) => /Cantrips Known|Spells Known/.test(String(lbl)))
  );
  const slotGroup = progGroups.find(
    (g) => Array.isArray(g.colLabels) && g.title === "Spell Slots per Spell Level"
  );
  if (csGroup && slotGroup) {
    const csLabels = csGroup.colLabels.map((l) => replace5eTags2(l));
    const slotLabels = slotGroup.colLabels.map((l) => replace5eTags2(l));
    const csRows = csGroup.rows || [];
    const slotRows = slotGroup.rowsSpellProgression || [];
    const colLabels = ["Level", ...csLabels, ...slotLabels];
    const spellRows = [];
    for (let i = 0; i < Math.max(csRows.length, slotRows.length); i++) {
      const lvl = String(i + 1);
      const csCells = csRows[i] ? csRows[i].map(String) : csLabels.map((_) => "");
      const slotCells = slotRows[i] ? slotRows[i].map(String) : slotLabels.map((_) => "");
      spellRows.push([lvl, ...csCells, ...slotCells]);
    }
    lines.push(`
> [!tip]- Spell Progression Table`);
    lines.push(
      renderMarkdownTable2({
        type: "table",
        caption: "",
        colLabels,
        rows: spellRows
      })
    );
  }
  const subs = Array.isArray(json.subclass) ? json.subclass : [];
  const subclassFeatures = Array.isArray(json.subclassFeature) ? json.subclassFeature : json.lookup?.subclassFeature ?? [];
  for (const sc of subs) {
    const subclassName = sc.name;
    const subLines = [];
    subLines.push(`# ${subclassName}`);
    subLines.push(`**Parent Class:** [[${className}]]`);
    if (sc.source) subLines.push(`**Source:** ${sc.source}`);
    subLines.push(``);
    const intro = subclassFeatures.find(
      (f) => f.name === sc.name && f.level === 3 && f.subclassShortName === sc.shortName && f.subclassSource === sc.source
    );
    if (intro?.entries?.length) {
      const introText = Array.isArray(intro.entries) ? intro.entries.map(
        (e) => typeof e === "string" ? replace5eTags2(e) : formatEntry2(e)
      ).join("\n\n") : formatEntry2(intro.entries);
      subLines.push(introText, ``);
    }
    const code = Object.entries(OPT_FEATURE_TYPE_TO_FULL2).find(
      ([, full]) => full.toLowerCase().includes(subclassName.toLowerCase())
    )?.[0];
    if (code) {
      const matches = optionalFeatures.filter(
        (of) => Array.isArray(of.featureType) && of.featureType.includes(code)
      );
      if (matches.length) {
        subLines.push(`## ${subclassName} Optional Features`);
        for (const feat of matches) {
          for (const entry of feat.entries) {
            const txt = typeof entry === "string" ? replace5eTags2(entry) : formatEntry2(entry);
            subLines.push(`**${feat.name}:** ${txt}`);
          }
          subLines.push(``);
        }
      }
    }
    const prog = sc.subclassTableGroups ?? [];
    if (prog.length) {
      const labels = /* @__PURE__ */ new Set();
      const rowsMap = {};
      for (const g of prog) {
        const cols = (g.colLabels ?? []).map(replace5eTags2);
        const rows = Array.isArray(g.rows) ? g.rows : Array.isArray(g.rowsSpellProgression) ? g.rowsSpellProgression : [];
        rows.forEach((r, i) => {
          const lvl = i + 1;
          rowsMap[lvl] ?? (rowsMap[lvl] = {});
          r.forEach((c, j) => {
            const lab = cols[j];
            if (!lab) return;
            labels.add(lab);
            rowsMap[lvl][lab] = typeof c === "object" && c !== null && "value" in c ? String(c.value) : String(c ?? "");
          });
        });
      }
      const hdrs = Array.from(labels);
      subLines.push(`## Subclass Progression`);
      subLines.push(renderMarkdownTable2({
        type: "table",
        caption: "",
        colLabels: ["Level", ...hdrs],
        rows: Array.from({ length: 20 }, (_, i) => {
          const lvl = i + 1;
          return [String(lvl), ...hdrs.map((h) => rowsMap[lvl]?.[h] ?? "")];
        })
      }));
    }
    const featsByLvl = {};
    for (const f of subclassFeatures) {
      if (f.subclassShortName === sc.shortName && f.subclassSource === sc.source && f.className === className) {
        const lvl = f.level ?? 0;
        ;
        (featsByLvl[lvl] ?? (featsByLvl[lvl] = [])).push(f);
      }
    }
    const IGNORE_TRAITS = ["Ability Score Improvement", "Archetype Feature", "Subclass Feature"];
    const traitNames = Array.from(
      new Set(
        Object.values(featsByLvl).flat().map((f) => String(f?.name || "").trim()).filter((n) => n && !IGNORE_TRAITS.some((s) => n.toLowerCase().includes(s.toLowerCase())))
      )
    );
    const traitLinks = traitNames.map((n) => `[[${subclassName}#${toHeaderAnchor2(n)}|${n}]]`);
    const subYaml = serializeFrontmatter2({ traits: traitLinks }, CLASS_META_DEFS2);
    for (const lvl of Object.keys(featsByLvl).map(Number).sort((a, b) => a - b)) {
      subLines.push(`---`, `## Level ${lvl}`);
      for (const f of featsByLvl[lvl]) {
        subLines.push(`### ${f.name}`);
        for (const ent of Array.isArray(f.entries) ? f.entries : [f.entries]) {
          if (typeof ent === "string") {
            subLines.push(replace5eTags2(ent));
            continue;
          }
          if (isTypedEntry2(ent) && ent.type === "entries" && /^Maneuvers$/i.test(ent.name)) {
            subLines.push(`##### ${ent.name}`);
            for (const txt of Array.isArray(ent.entries) ? ent.entries : [ent.entries]) {
              subLines.push(typeof txt === "string" ? replace5eTags2(txt) : formatEntry2(txt));
            }
            const code2 = Object.entries(OPT_FEATURE_TYPE_TO_FULL2).find(
              ([, full]) => full.toLowerCase().includes(subclassName.toLowerCase())
            )?.[0];
            if (code2) {
              const matches = optionalFeatures.filter(
                (of) => Array.isArray(of.featureType) && of.featureType.includes(code2)
              );
              for (const featDef of matches) {
                for (const sub of featDef.entries) {
                  const line = typeof sub === "string" ? replace5eTags2(sub) : formatEntry2(sub);
                  subLines.push(`**${featDef.name}:** ${line}`);
                }
                subLines.push("");
              }
            }
            continue;
          }
          if (isTypedEntry2(ent) && ent.type === "entries" && ent.name) {
            subLines.push(`##### ${ent.name}`);
            for (const e2 of Array.isArray(ent.entries) ? ent.entries : [ent.entries]) {
              subLines.push(formatEntry2(e2));
            }
            continue;
          }
          if (isTypedEntry2(ent) && ent.type === "inset" && ent.name) {
            const inner = Array.isArray(ent.entries) ? ent.entries : [ent.entries];
            subLines.push(`> **${ent.name}**`);
            inner.forEach((e2) => subLines.push(`> ${formatEntry2(e2)}`));
            continue;
          }
          const fb = formatEntry2(ent);
          if (fb) subLines.push(fb);
        }
      }
    }
    const subclassContentBody = subLines.join("\n\n").replace(/\n{3,}/g, "\n\n");
    const subclassContent = `---
${subYaml}
---

${subclassContentBody}`;
    subclassFiles.push({
      path: `Classes/${className}/Subclasses/${subclassName}.md`,
      content: subclassContent
    });
  }
  if (subs.length) {
    const links = subs.map(
      (sc) => `[[Subclasses/${sc.name.replace(/[\\/]/g, "-")}|${sc.name}]]`
    );
    lines.push(`
**Subclasses:** ${links.join(", ")}`);
  }
  const allFeatures = Array.isArray(json.classFeature) ? json.classFeature : json.lookup?.classFeature ?? [];
  const featuresByLevel = {};
  for (const entry of allFeatures) {
    if (entry.className !== className) continue;
    const lvl = entry.level ?? 0;
    if (!featuresByLevel[lvl]) featuresByLevel[lvl] = [];
    featuresByLevel[lvl].push(entry);
  }
  lines.push(``);
  lines.push(`---`);
  lines.push(`## Level Features`);
  const levels = Object.keys(featuresByLevel).map((n) => +n).sort((a, b) => a - b);
  for (const lvl of levels) {
    lines.push(`### Level ${lvl}`);
    for (const feat of featuresByLevel[lvl]) {
      lines.push(`#### ${feat.name}`);
      const entries = Array.isArray(feat.entries) ? feat.entries : [feat.entries];
      for (const ent of entries) {
        if (typeof ent === "string") {
          const txt = formatEntry2(ent).trim();
          if (txt === "{" || txt === "}") continue;
          lines.push(txt);
          continue;
        }
        if (isTypedEntry2(ent) && ent.type === "list" && Array.isArray(ent.items)) {
          for (const item of ent.items) {
            lines.push(`- ${replace5eTags2(item)}`);
          }
          continue;
        }
        if (isTypedEntry2(ent) && ent.type === "options") {
          if (ent.count) {
            lines.push("");
            lines.push(`**Choose ${ent.count} of the following options:**`);
            lines.push("");
          }
          for (const optRef of Array.isArray(ent.entries) ? ent.entries : [ent.entries]) {
            if (optRef.type === "refOptionalfeature") {
              const [optName, optSrc] = optRef.optionalfeature.split("|");
              const featDef = optionalFeatures.find(
                (f) => f.name === optName && (!optSrc || f.source === optSrc)
              );
              if (featDef) {
                featDef.entries.forEach((subEntry, idx) => {
                  const text = typeof subEntry === "string" ? replace5eTags2(subEntry) : formatEntry2(subEntry);
                  if (idx === 0) {
                    lines.push(`- **${featDef.name}:** ${text}`);
                  } else {
                    lines.push(`  - ${text}`);
                  }
                });
                lines.push("");
              } else {
                lines.push(`**${optName}:**`);
              }
            } else {
              const txt = formatEntry2(optRef);
              if (txt) lines.push(`- ${txt}`);
            }
          }
          continue;
        }
        if (isTypedEntry2(ent) && ent.type === "refOptionalfeature") {
          const [name] = ent.optionalfeature.split("|");
          lines.push(`- [[${name}|${name}]]`);
          continue;
        }
        if (isTypedEntry2(ent) && ent.type === "entries" && ent.name) {
          lines.push(`##### ${ent.name}`);
          const inner = Array.isArray(ent.entries) ? ent.entries : [ent.entries];
          for (const e2 of inner) {
            lines.push(formatEntry2(e2));
          }
          continue;
        }
        const fallback = formatEntry2(ent);
        if (fallback) lines.push(fallback);
      }
      lines.push(``);
    }
    lines.push(`---`);
  }
  let content = `---
${yaml}
---

${lines.join("\n")}`;
  content = replace5eTags2(content);
  content = content.replace(/\n{3,}/g, "\n\n").replace(/\n +\n/g, "\n\n");
  return [
    {
      path: `Classes/${className}/${className}.md`,
      content
    },
    ...subclassFiles
  ];
}

// src/parsers/5e-2025/rules.ts
function parseActionsFile2(json, editionId) {
  if (!Array.isArray(json.action)) return [];
  const lines = [];
  function emitBlock(block) {
    if (!block) return;
    if (typeof block === "string") {
      for (const para of block.split(/\n{2,}/)) {
        const t = para.trim();
        if (t) {
          lines.push(replace5eTags2(t));
          lines.push("");
        }
      }
      return;
    }
    if (block.type === "list" && Array.isArray(block.items)) {
      for (const item of block.items) {
        lines.push(`- ${replace5eTags2(item)}`);
      }
      lines.push("");
      return;
    }
    if (block.type === "table" && Array.isArray(block.rows)) {
      const headers = block.colLabels || [];
      lines.push(`| ${headers.join(" | ")} |`);
      lines.push(`| ${headers.map(() => "---").join(" | ")} |`);
      for (const row of block.rows) {
        lines.push(`| ${row.join(" | ")} |`);
      }
      lines.push("");
      return;
    }
    if ((block.type === "entries" || block.type === "inset") && Array.isArray(block.entries)) {
      if (block.name) {
        if (lines[lines.length - 1] === "") lines.pop();
        lines.push(`### ${block.name}`);
      }
      for (const child of block.entries) {
        emitBlock(child);
      }
      return;
    }
    const txt = Array.isArray(block) ? block.join(" ") : typeof block === "object" ? JSON.stringify(block) : String(block);
    lines.push(replace5eTags2(txt));
    lines.push("");
  }
  for (const action of json.action) {
    lines.push(`## ${action.name}`);
    for (const entry of Array.isArray(action.entries) ? action.entries : [action.entries]) {
      emitBlock(entry);
    }
    if (Array.isArray(action.seeAlsoAction)) {
      lines.push("**See Also:**");
      lines.push("");
      for (const ref of action.seeAlsoAction) {
        const [name] = String(ref).split("|");
        lines.push(`- [[${name}]]`);
      }
      lines.push("");
    }
    lines.push("---");
  }
  const cleaned = lines.reduce((acc, curr) => {
    if (curr === "" && acc.length && acc[acc.length - 1] === "") return acc;
    return acc.concat(curr);
  }, []);
  return [
    {
      path: "Rules and Reference/Actions.md",
      content: cleaned.join("\n").trim() + "\n"
    }
  ];
}
function parseConditionsDiseasesFile2(json, editionId) {
  const outputs = [];
  const processItems = (items, outPath) => {
    const lines = [];
    for (const item of items) {
      lines.push(`## ${item.name}`);
      const entries = Array.isArray(item.entries) ? item.entries : [item.entries];
      for (const entry of entries) {
        if (!entry) continue;
        if (typeof entry === "string") {
          for (const para of entry.split(/\n{2,}/)) {
            const t = para.trim();
            if (t) {
              lines.push(replace5eTags2(t));
              lines.push("");
            }
          }
        } else if (entry.type === "list" && Array.isArray(entry.items)) {
          for (const txt of entry.items) {
            lines.push(`- ${replace5eTags2(txt)}`);
          }
          lines.push("");
        } else if (entry.type === "table" && Array.isArray(entry.rows)) {
          const headers = entry.colLabels || [];
          lines.push(`| ${headers.join(" | ")} |`);
          lines.push(`| ${headers.map(() => "---").join(" | ")} |`);
          for (const row of entry.rows) {
            lines.push(`| ${row.join(" | ")} |`);
          }
          lines.push("");
        } else if (entry.type === "entries" && Array.isArray(entry.entries)) {
          if (entry.name) {
            lines.push(`### ${entry.name}`);
            for (const sub of entry.entries) {
              if (sub.type === "entries" && sub.name && Array.isArray(sub.entries)) {
                if (lines[lines.length - 1] === "") lines.pop();
                lines.push(`#### ${sub.name}`);
                for (const txtEntry of sub.entries) {
                  const text = typeof txtEntry === "string" ? replace5eTags2(txtEntry) : replace5eTags2(String(txtEntry));
                  lines.push(text);
                  lines.push("");
                }
              } else if (typeof sub === "string") {
                lines.push(replace5eTags2(sub));
                lines.push("");
              }
            }
          } else {
            for (const sub of entry.entries) {
              if (sub.type === "entries" && sub.name && Array.isArray(sub.entries)) {
                if (lines[lines.length - 1] === "") lines.pop();
                lines.push(`### ${sub.name}`);
                for (const txtEntry of sub.entries) {
                  const text = typeof txtEntry === "string" ? replace5eTags2(txtEntry) : replace5eTags2(String(txtEntry));
                  lines.push(text);
                  lines.push("");
                }
              } else if (typeof sub === "string") {
                lines.push(replace5eTags2(sub));
                lines.push("");
              }
            }
          }
        } else {
          const txt = Array.isArray(entry) ? entry.join(" ") : typeof entry === "object" ? JSON.stringify(entry) : String(entry);
          lines.push(replace5eTags2(txt));
          lines.push("");
        }
      }
      lines.push("---");
    }
    const cleaned = lines.reduce((acc, curr) => {
      if (curr === "" && acc.length && acc[acc.length - 1] === "") return acc;
      return acc.concat(curr);
    }, []);
    outputs.push({
      path: outPath,
      content: cleaned.join("\n").trim() + "\n"
    });
  };
  processItems(json.condition || [], "Rules and Reference/Conditions.md");
  processItems(json.disease || [], "Rules and Reference/Diseases.md");
  return outputs;
}
function parseSensesFile2(json, editionId) {
  const items = Array.isArray(json.sense) ? json.sense : Array.isArray(json.senses) ? json.senses : [];
  if (!items.length) return [];
  const lines = [];
  function emitBlock(block) {
    if (!block) return;
    if (typeof block === "string") {
      for (const para of block.split(/\n{2,}/)) {
        const t = para.trim();
        if (t) {
          lines.push(replace5eTags2(t));
          lines.push("");
        }
      }
      return;
    }
    if (block.type === "list" && Array.isArray(block.items)) {
      for (const item of block.items) {
        if (typeof item === "string") {
          lines.push(`- ${replace5eTags2(item)}`);
          lines.push("");
        } else if (item && typeof item === "object") {
          if (item.name && Array.isArray(item.entries)) {
            lines.push(`- **${item.name}**`);
            for (const ent of item.entries) {
              lines.push(`  - ${replace5eTags2(ent)}`);
            }
            lines.push("");
          } else {
            lines.push(`- ${replace5eTags2(JSON.stringify(item))}`);
            lines.push("");
          }
        }
      }
      return;
    }
    if (block.type === "table" && Array.isArray(block.rows)) {
      const headers = block.colLabels || [];
      lines.push(`| ${headers.join(" | ")} |`);
      lines.push(`| ${headers.map(() => "---").join(" | ")} |`);
      for (const row of block.rows) {
        lines.push(`| ${row.join(" | ")} |`);
      }
      lines.push("");
      return;
    }
    if ((block.type === "entries" || block.type === "inset") && Array.isArray(block.entries)) {
      if (block.name) {
        if (lines[lines.length - 1] === "") lines.pop();
        lines.push(`### ${block.name}`);
      }
      for (const child of block.entries) {
        emitBlock(child);
      }
      return;
    }
    const txt = Array.isArray(block) ? block.join(" ") : typeof block === "object" ? JSON.stringify(block) : String(block);
    lines.push(replace5eTags2(txt));
    lines.push("");
  }
  for (const sense of items) {
    lines.push(`## ${sense.name}`);
    for (const entry of Array.isArray(sense.entries) ? sense.entries : [sense.entries]) {
      emitBlock(entry);
    }
    lines.push("---");
  }
  const cleaned = lines.reduce((acc, curr) => {
    if (curr === "" && acc.length && acc[acc.length - 1] === "") return acc;
    return acc.concat(curr);
  }, []);
  return [
    {
      path: "Rules and Reference/Senses.md",
      content: cleaned.join("\n").trim() + "\n"
    }
  ];
}
function parseSkillsFile2(json, editionId) {
  const items = Array.isArray(json.skill) ? json.skill : Array.isArray(json.skills) ? json.skills : [];
  if (!items.length) return [];
  const lines = [];
  for (const skill of items) {
    lines.push(`## ${skill.name}`);
    if (skill.ability) {
      lines.push(`*Ability: ${skill.ability}*`);
      lines.push("");
    }
    const entries = Array.isArray(skill.entries) ? skill.entries : [skill.entries];
    for (const entry of entries) {
      if (!entry) continue;
      if (typeof entry === "string") {
        const paras = entry.split(/\n{2,}/);
        for (const para of paras) {
          const t = para.trim();
          if (t) {
            lines.push(replace5eTags2(t));
            lines.push("");
          }
        }
      } else if (entry.type === "list" && Array.isArray(entry.items)) {
        for (const item of entry.items) {
          lines.push(`- ${replace5eTags2(item)}`);
        }
        lines.push("");
      } else {
        const txt = Array.isArray(entry) ? entry.join(" ") : String(entry);
        lines.push(replace5eTags2(txt));
        lines.push("");
      }
    }
    lines.push("---");
  }
  const cleaned = lines.reduce((acc, curr) => {
    if (curr === "" && acc.length && acc[acc.length - 1] === "") return acc;
    return acc.concat(curr);
  }, []);
  return [
    {
      path: "Rules and Reference/Skills.md",
      content: cleaned.join("\n").trim() + "\n"
    }
  ];
}

// src/parsers/5e-2025/feats.ts
function parseFeatsFile2(json, editionId) {
  const feats = Array.isArray(json.feat) ? json.feat : Array.isArray(json.feats) ? json.feats : [];
  return feats.map((feat) => {
    const lines = [];
    const fm = buildFM2({ ...feat, _editionId: editionId }, FEATS_META_DEFS2);
    lines.push("---");
    lines.push(serializeFrontmatter2(fm, FEATS_META_DEFS2));
    lines.push("---", "");
    lines.push(`# ${feat.name}`, "");
    const prereqs = [];
    if (Array.isArray(feat.prerequisite)) {
      feat.prerequisite.forEach((pr) => {
        if (pr.level) prereqs.push(`Level ${pr.level}`);
        if (Array.isArray(pr.feat)) {
          pr.feat.forEach((f) => {
            const name = f.split("|")[0].replace(/\b\w/g, (c) => c.toUpperCase());
            prereqs.push(`Prerequisite: [[${name}]]`);
          });
        }
      });
    }
    if (feat.spellcastingPrepared) prereqs.push(`Prerequisite: Spellcaster`);
    if (Array.isArray(feat.toolProficiencies)) {
      feat.toolProficiencies.forEach((tp) => {
        Object.entries(tp).forEach(([key]) => {
          if (key === "anyArtisansTool") {
            prereqs.push(`Prerequisite: Proficient with an artisan's tool`);
          } else {
            prereqs.push(`Prerequisite: Proficient with ${key.replace(/([A-Z])/g, " $1").trim()}`);
          }
        });
      });
    }
    if (Array.isArray(feat.armorProficiencies)) {
      feat.armorProficiencies.forEach((arm) => {
        const armStr = typeof arm === "string" ? arm : JSON.stringify(arm);
        prereqs.push(`Prerequisite: Proficient with ${armStr.replace(/([A-Z])/g, " $1").trim()}`);
      });
    }
    if (feat.race) prereqs.push(`Prerequisite: ${feat.race}`);
    if (prereqs.length) {
      lines.push("**Prerequisites**");
      prereqs.forEach((p) => lines.push(`- ${p}`));
      lines.push("");
    }
    const entries = Array.isArray(feat.entries) ? feat.entries : [feat.entries];
    entries.forEach((entry) => {
      if (!entry) return;
      if (typeof entry === "string") {
        entry.split(/\n{2,}/).forEach((p) => {
          const t = p.trim();
          if (t) {
            lines.push(replace5eTags2(t));
            lines.push("");
          }
        });
      } else if (entry.type === "list" && Array.isArray(entry.items)) {
        entry.items.forEach((it) => {
          if (typeof it === "string") {
            lines.push(`- ${replace5eTags2(it)}`);
          } else if (it.type === "item" && it.name) {
            lines.push(`- **${it.name}**`);
            const subs = Array.isArray(it.entries) ? it.entries : [it.entries];
            subs.forEach(
              (s) => lines.push(`  - ${replace5eTags2(typeof s === "string" ? s : JSON.stringify(s))}`)
            );
          }
        });
        lines.push("");
      } else if (entry.type === "inset") {
        lines.push(`- *${entry.name}*`);
        const subs = Array.isArray(entry.entries) ? entry.entries : [entry.entries];
        subs.forEach((s) => lines.push(`  - ${replace5eTags2(s)}`));
        lines.push("");
      } else if ((entry.type === "section" || entry.type === "entries") && Array.isArray(entry.entries)) {
        if (entry.name) {
          lines.push(`## ${entry.name}`);
          lines.push("");
        }
        entry.entries.forEach((s) => {
          lines.push(replace5eTags2(typeof s === "string" ? s : JSON.stringify(s)));
          lines.push("");
        });
      } else if (entry.type === "table" && Array.isArray(entry.rows)) {
        const hdr = entry.colLabels || [];
        lines.push(`| ${hdr.join(" | ")} |`);
        lines.push(`| ${hdr.map(() => "---").join(" | ")} |`);
        entry.rows.forEach(
          (row) => lines.push(`| ${row.join(" | ")} |`)
        );
        lines.push("");
      }
    });
    return {
      path: `Player Build/Feats/${feat.name}.md`,
      content: lines.join("\n").trim() + "\n"
    };
  });
}

// src/parsers/5e-2025/backgrounds.ts
function parseBackgroundsFile2(json, editionId) {
  const raw = Array.isArray(json.background) ? json.background : Array.isArray(json.backgrounds) ? json.backgrounds : [];
  const backgrounds = raw.filter((bg) => {
    const nm = bg.name || "";
    return !nm.startsWith("Variant") && !nm.includes("Baldur's Gate");
  });
  const outputs = [];
  backgrounds.forEach((bg) => {
    const lines = [];
    const fm = buildFM2(bg, BACKGROUND_META_DEFS2);
    const extraTraits = Array.isArray(bg.entries) ? bg.entries.filter((e) => e.data?.isFeature && typeof e.name === "string").map((e) => {
      const name = e.name.replace(/^Feature:\s*/, "");
      return `[[${bg.name}#${name}]]`;
    }) : [];
    const yaml = serializeFrontmatter2(fm, BACKGROUND_META_DEFS2);
    lines.push("---", yaml, "---", "");
    lines.push(`# ${bg.name}`, "");
    if (Array.isArray(bg.skillProficiencies) && bg.skillProficiencies.length) {
      const skills = [];
      bg.skillProficiencies.forEach((ent) => {
        if (typeof ent === "string") {
          skills.push(cap4(ent));
        } else if (ent.choose && Array.isArray(ent.choose.from)) {
          skills.push(`Choose ${ent.choose.amount} from ${ent.choose.from.join(", ")}`);
        } else {
          Object.entries(ent).filter(([, v]) => v === true).forEach(([k]) => skills.push(cap4(k)));
        }
      });
      lines.push(`**Skill Proficiencies:** ${skills.join(", ")}`, "");
    }
    if (Array.isArray(bg.languageProficiencies) && bg.languageProficiencies.length) {
      const langs = [];
      bg.languageProficiencies.forEach((ent) => {
        if (ent.anyStandard) {
          langs.push(`${ent.anyStandard} of your choice`);
        } else {
          Object.entries(ent).filter(([, v]) => v === true).forEach(([k]) => langs.push(cap4(k)));
        }
      });
      lines.push(`**Languages:** ${langs.join(", ")}`, "");
    }
    if (Array.isArray(bg.toolProficiencies) && bg.toolProficiencies.length) {
      const tools = [];
      bg.toolProficiencies.forEach((ent) => {
        if (ent.choose && Array.isArray(ent.choose.from)) {
          const list = ent.choose.from.map(humanize2).join(", ");
          tools.push(`Choose ${ent.choose.count} from ${list}`);
          return;
        }
        if (typeof ent === "string") {
          tools.push(humanize2(ent));
          return;
        }
        Object.entries(ent).filter(([_, v]) => v === true).forEach(([k]) => tools.push(humanize2(k)));
      });
      lines.push(`**Tool Proficiencies:** ${tools.join(", ")}`, "");
    }
    if (Array.isArray(bg.startingEquipment) && bg.startingEquipment.length) {
      lines.push(`**Equipment:**`);
      bg.startingEquipment.forEach((grp) => {
        if (Array.isArray(grp._)) {
          grp._.forEach((it) => lines.push(`- ${fmtItem2(it)}`));
        }
        ["a", "b"].forEach((key) => {
          if (Array.isArray(grp[key])) {
            grp[key].forEach((it) => lines.push(`- ${fmtItem2(it)}`));
          }
        });
      });
      lines.push("");
    }
    if (Array.isArray(bg.entries)) {
      bg.entries.forEach((entry) => {
        if (entry.type === "list" && entry.style === "list-hang-notitle") {
          return;
        }
        if (entry.name) {
          const header = entry.data?.isFeature ? entry.name.replace(/^Feature:\s*/, "") : entry.name;
          lines.push(`## ${header}`, "");
        }
        if (Array.isArray(entry.entries)) {
          entry.entries.forEach((e) => {
            if (typeof e === "string") {
              lines.push(replace5eTags2(e), "");
            } else if (e.type === "list" && Array.isArray(e.items)) {
              e.items.forEach(
                (it) => lines.push(`- ${replace5eTags2(it.entry ?? it)}`)
              );
              lines.push("");
            } else if (e.type === "table") {
              const tbl = renderMarkdownTable2(e);
              if (tbl) lines.push(tbl, "");
            }
          });
        } else if (entry.type === "list" && Array.isArray(entry.items)) {
          entry.items.forEach(
            (it) => lines.push(`- ${replace5eTags2(it.entry ?? it)}`)
          );
          lines.push("");
        }
      });
    }
    outputs.push({
      path: `Player Build/Backgrounds/${bg.name}.md`,
      content: lines.join("\n").trimEnd() + "\n"
    });
  });
  return outputs;
}
function cap4(str) {
  return str.charAt(0).toUpperCase() + str.slice(1);
}
function fmtItem2(item) {
  if (typeof item === "string") {
    if (item.includes("|")) {
      return replace5eTags2(`{@item ${item}}`);
    }
    return replace5eTags2(item);
  }
  const priceRaw = item.containsValue ?? item.value;
  if (typeof priceRaw === "number" && // make sure it’s not also an “item” or “equipmentType”
  !item.item && !item.equipmentType && !item.special) {
    const gp = priceRaw >= 100 ? priceRaw / 100 : priceRaw;
    return `${gp} gp`;
  }
  if (item.item) {
    const link = replace5eTags2(`{@item ${item.item}}`);
    if (typeof priceRaw === "number") {
      const gp = priceRaw >= 100 ? priceRaw / 100 : priceRaw;
      return `${link} (${gp} gp)`;
    }
    return link;
  }
  if (typeof item.special === "string") {
    return item.special;
  }
  if (item.equipmentType) {
    switch (item.equipmentType) {
      case "toolArtisan":
        return "One type of artisan\u2019s tools (of your choice)";
      case "instrumentMusical":
        return "One type of musical instrument (of your choice)";
      case "setGaming":
        return "One set of gaming dice (of your choice)";
      default:
        return humanize2(item.equipmentType);
    }
  }
  return replace5eTags2(JSON.stringify(item));
}
function humanize2(str) {
  const spaced = str.replace(/([a-z])([A-Z])/g, "$1 $2");
  return spaced.charAt(0).toUpperCase() + spaced.slice(1);
}

// src/parsers/5e-2025/installer.ts
var import_obsidian4 = require("obsidian");
async function listSpellFilesFromGitHub2(repo) {
  const url = `https://api.github.com/repos/${repo}/contents/data/spells`;
  const res = await fetch(url);
  const data = await res.json();
  return data.filter((item) => item.type === "file" && item.name.startsWith("spells-") && item.name.endsWith(".json")).map((item) => item.name);
}
async function listBestiaryFilesFromGitHub2(repo) {
  const url = `https://api.github.com/repos/${repo}/contents/data/bestiary`;
  const res = await fetch(url);
  const list = await res.json();
  const CORE_SOURCES = [
    "bestiary-phb.json",
    "bestiary-mm.json",
    "bestiary-dmg.json",
    "bestiary-xge.json",
    "bestiary-vgm.json",
    "bestiary-tce.json",
    "bestiary-egw.json",
    "bestiary-erlw.json",
    "bestiary-mtf.json",
    "bestiary-vrgr.json",
    "bestiary-cos.json",
    "bestiary-oota.json",
    "bestiary-pota.json",
    "bestiary-hotdq.json",
    "bestiary-rot.json",
    "bestiary-skt.json",
    "bestiary-tftyp.json",
    "bestiary-toa.json"
  ];
  return list.filter((item) => item.type === "file" && CORE_SOURCES.includes(item.name)).map((item) => item.name);
}
var ITEM_JSON_FILES2 = [
  "items-base.json",
  "items.json",
  "objects.json",
  "vehicles.json",
  "decks.json"
];
async function listItemFilesFromGitHub2(repo) {
  const url = `https://api.github.com/repos/${repo}/contents/data`;
  const res = await fetch(url);
  const data = await res.json();
  return data.filter((item) => item.type === "file" && ITEM_JSON_FILES2.includes(item.name)).map((item) => item.name);
}
async function listClassFilesFromGitHub2(repo) {
  const url = `https://api.github.com/repos/${repo}/contents/data/class`;
  const res = await fetch(url);
  const listing = await res.json();
  return listing.filter(
    (item) => item.type === "file" && item.name.startsWith("class-") && item.name.endsWith(".json")
  ).map((item) => item.name);
}
async function ensureFolder2(app, folderPath) {
  const parts = folderPath.split("/");
  let curr = "";
  for (const p of parts) {
    curr = curr ? `${curr}/${p}` : p;
    try {
      await app.vault.createFolder(curr);
    } catch {
    }
  }
}
async function importEditionData2(params) {
  const { app, edition, targetPath } = params;
  const repo = edition.repo ?? "";
  {
    const spellFiles = await listSpellFilesFromGitHub2(repo);
    for (const fileName of spellFiles) {
      try {
        const res = await fetch(`${edition.sourceUrl}/spells/${fileName}`);
        const json = await res.json();
        const files = parseSpellsFile2(json, edition.id);
        for (const md of files) {
          const fullPath = (0, import_obsidian3.normalizePath)(`${targetPath}/Spells/${md.path}`);
          const folder = fullPath.split("/").slice(0, -1).join("/");
          await ensureFolder2(app, folder);
          await app.vault.adapter.write(fullPath, md.content);
        }
      } catch (e) {
        console.warn(`Failed to import spell ${fileName}:`, e);
      }
    }
  }
  {
    const bestiaryFiles = await listBestiaryFilesFromGitHub2(repo);
    for (const fileName of bestiaryFiles) {
      try {
        const res = await fetch(`${edition.sourceUrl}/bestiary/${fileName}`);
        const json = await res.json();
        const parsed = parseBestiaryFile2(json, edition.id);
        for (const md of parsed) {
          const fullPath = (0, import_obsidian3.normalizePath)(`${targetPath}/Bestiary/${md.path}`);
          const folder = fullPath.split("/").slice(0, -1).join("/");
          await ensureFolder2(app, folder);
          await app.vault.adapter.write(fullPath, md.content);
        }
      } catch (e) {
        console.warn(`Failed to import bestiary ${fileName}:`, e);
      }
    }
  }
  {
    const itemFiles = await listItemFilesFromGitHub2(repo);
    for (const fn of itemFiles) {
      try {
        const res = await fetch(`${edition.sourceUrl}/${fn}`);
        const json = await res.json();
        const mdFiles = parseItemsFile2(json, edition.id);
        for (const md of mdFiles) {
          const fullPath = (0, import_obsidian3.normalizePath)(`${targetPath}/${md.path}`);
          const folder = fullPath.split("/").slice(0, -1).join("/");
          await ensureFolder2(app, folder);
          await app.vault.adapter.write(fullPath, md.content);
        }
      } catch (e) {
        console.warn(`Failed to import items from ${fn}:`, e);
      }
    }
  }
  {
    const res = await fetch(`${edition.sourceUrl}/races.json`);
    const json = await res.json();
    const mdFiles = parseSpeciesFile2(json, edition.id);
    for (const md of mdFiles) {
      const fullPath = (0, import_obsidian3.normalizePath)(`${targetPath}/Player Build/${md.path}`);
      await ensureFolder2(app, fullPath.split("/").slice(0, -1).join("/"));
      await app.vault.adapter.write(fullPath, md.content);
    }
    let optionalFeatures = [];
    try {
      const url = `${edition.sourceUrl}/optionalfeatures.json`;
      const res2 = await fetch(url);
      const text = await res2.text();
      const start = text.indexOf("{");
      if (start === -1) throw new Error("No JSON object found");
      const cleanJson = text.slice(start);
      const raw = JSON.parse(cleanJson);
      optionalFeatures = Array.isArray(raw.optionalfeature) ? raw.optionalfeature : [];
    } catch (e) {
      console.warn("Failed to import optionalfeatures.json:", e);
    }
    {
      const classFiles = await listClassFilesFromGitHub2(repo);
      for (const fileName of classFiles) {
        try {
          const res2 = await fetch(`${edition.sourceUrl}/class/${fileName}`);
          const json2 = await res2.json();
          const mdFiles2 = parseClassFile2(
            json2,
            edition.id,
            fileName,
            optionalFeatures
          );
          for (const md of mdFiles2) {
            const fullPath = (0, import_obsidian3.normalizePath)(`${targetPath}/Player Build/${md.path}`);
            await ensureFolder2(app, fullPath.split("/").slice(0, -1).join("/"));
            const existing = app.vault.getAbstractFileByPath(fullPath);
            if (existing instanceof import_obsidian4.TFile) {
              await app.vault.modify(existing, md.content);
            } else {
              await app.vault.create(fullPath, md.content);
            }
          }
        } catch (e) {
          console.warn(`Failed to import class ${fileName}:`, e);
        }
      }
    }
    {
      try {
        const res2 = await fetch(`${edition.sourceUrl}/actions.json`);
        const json2 = await res2.json();
        const mdFiles2 = parseActionsFile2(json2, edition.id);
        for (const md of mdFiles2) {
          const fullPath = (0, import_obsidian3.normalizePath)(
            `${targetPath}/${md.path}`
          );
          const folder = fullPath.split("/").slice(0, -1).join("/");
          await ensureFolder2(app, folder);
          await app.vault.adapter.write(fullPath, md.content);
        }
      } catch (e) {
        console.warn("Failed to import actions.json:", e);
      }
    }
    {
      try {
        const res2 = await fetch(`${edition.sourceUrl}/conditionsdiseases.json`);
        const json2 = await res2.json();
        const mdFiles2 = parseConditionsDiseasesFile2(json2, edition.id);
        for (const md of mdFiles2) {
          const fullPath = (0, import_obsidian3.normalizePath)(
            `${targetPath}/${md.path}`
          );
          const folder = fullPath.split("/").slice(0, -1).join("/");
          await ensureFolder2(app, folder);
          await app.vault.adapter.write(fullPath, md.content);
        }
      } catch (e) {
        console.warn("Failed to import conditionsdiseases.json:", e);
      }
    }
    {
      try {
        const res2 = await fetch(`${edition.sourceUrl}/senses.json`);
        const json2 = await res2.json();
        const mdFiles2 = parseSensesFile2(json2, edition.id);
        for (const md of mdFiles2) {
          const fullPath = (0, import_obsidian3.normalizePath)(
            `${targetPath}/${md.path}`
          );
          const folder = fullPath.split("/").slice(0, -1).join("/");
          await ensureFolder2(app, folder);
          await app.vault.adapter.write(fullPath, md.content);
        }
      } catch (e) {
        console.warn("Failed to import senses.json:", e);
      }
    }
    {
      try {
        const res2 = await fetch(`${edition.sourceUrl}/skills.json`);
        const json2 = await res2.json();
        const mdFiles2 = parseSkillsFile2(json2, edition.id);
        for (const md of mdFiles2) {
          const fullPath = (0, import_obsidian3.normalizePath)(
            `${targetPath}/${md.path}`
          );
          const folder = fullPath.split("/").slice(0, -1).join("/");
          await ensureFolder2(app, folder);
          await app.vault.adapter.write(fullPath, md.content);
        }
      } catch (e) {
        console.warn("Failed to import skills.json:", e);
      }
    }
    {
      try {
        const res2 = await fetch(`${edition.sourceUrl}/feats.json`);
        const json2 = await res2.json();
        const mdFiles2 = parseFeatsFile2(json2, edition.id);
        for (const md of mdFiles2) {
          const fullPath = (0, import_obsidian3.normalizePath)(
            `${targetPath}/${md.path}`
          );
          const folder = fullPath.split("/").slice(0, -1).join("/");
          await ensureFolder2(app, folder);
          await app.vault.adapter.write(fullPath, md.content);
        }
      } catch (e) {
        console.warn("Failed to import feats.json:", e);
      }
    }
    {
      try {
        const res2 = await fetch(`${edition.sourceUrl}/backgrounds.json`);
        const json2 = await res2.json();
        const mdFiles2 = parseBackgroundsFile2(json2, edition.id);
        for (const md of mdFiles2) {
          const fullPath = (0, import_obsidian3.normalizePath)(`${targetPath}/${md.path}`);
          const folder = fullPath.split("/").slice(0, -1).join("/");
          await ensureFolder2(app, folder);
          await app.vault.adapter.write(fullPath, md.content);
        }
      } catch (e) {
        console.warn("Failed to import backgrounds.json:", e);
      }
    }
  }
}

// src/rulesetInstaller.ts
async function importRulesetData(params) {
  const { app, editionKey, targetPath } = params;
  const edition = AVAILABLE_EDITIONS.find((e) => e.id === editionKey);
  if (!edition) {
    console.warn("Edition not found for:", editionKey);
    return;
  }
  if (!edition.parser) {
    console.warn("No parser defined for:", editionKey);
    return;
  }
  let installerModule;
  switch (edition.parser) {
    case "5e-2014":
      installerModule = installer_exports;
      break;
    case "5e-2025":
      installerModule = installer_exports2;
      break;
    // case "other-parser":
    //   installerModule = anotherInstaller;
    //   break;
    default:
      throw new Error(`Unknown parser: ${edition.parser}`);
  }
  await installerModule.importEditionData({ app, edition, targetPath });
}

// src/firstinstallconfirm.ts
var ConfirmFreshInstallModal = class extends import_obsidian5.Modal {
  constructor(app, plugin) {
    super(app);
    this.plugin = plugin;
  }
  onOpen() {
    this.contentEl.empty();
    this.titleEl.setText("\u26A0\uFE0F Warning: Fresh Vault Recommended");
    const warningEl = this.contentEl.createEl("div", {
      text: "The full VVunderlore install is intended for a fresh, empty Obsidian vault. If you install in a vault that already has files, any file whose path matches a VVunderlore Toolkit file will be overwritten.\n\nAlso things could just get messy.\n\nMake a perception check and proceed with caution!"
    });
    warningEl.addClass("installconf-disclaimer");
    const buttonRow = this.contentEl.createEl("div");
    buttonRow.addClass("installconf-buttonrow");
    new import_obsidian5.ButtonComponent(buttonRow).setButtonText("Oh god, cancel!").onClick(() => {
      this.close();
    });
    new import_obsidian5.ButtonComponent(buttonRow).setButtonText("Install!!").setCta().onClick(async () => {
      this.app.workspace.getLeavesOfType("markdown").forEach((leaf) => leaf.detach());
      this.app.workspace.getLeavesOfType("graph").forEach((leaf) => leaf.detach());
      this.close();
      const installing = new InstallingModal(this.app);
      installing.open();
      const compendium = this.plugin.settings.rulesetCompendium;
      const references = [...this.plugin.settings.rulesetReference];
      try {
        await this.plugin.installFullToolkit({ compendium, references });
        if (compendium) {
          await importRulesetData({
            app: this.app,
            editionKey: compendium,
            targetPath: "Compendium"
          });
        }
      } catch (err) {
        console.error("\u274C installFullToolkit() failed:", err);
      }
      this.plugin.settings.isFirstRun = "no";
      await this.plugin.saveSettings();
      installing.close();
      const successModal = new import_obsidian5.Modal(this.app);
      successModal.onOpen = () => {
        successModal.contentEl.empty();
        successModal.titleEl.setText("\u2705 Toolkit Installed");
        const msg = successModal.contentEl.createEl("div", {
          text: "Reloading vault in 3 seconds\u2026"
        });
        msg.addClass("installsuccess");
      };
      successModal.open();
      setTimeout(() => {
        successModal.close();
        location.reload();
      }, 3e3);
    });
  }
  onClose() {
    this.contentEl.empty();
  }
};

// src/settings.ts
var path = __toESM(require("path"));
var FilePathSuggester = class extends import_obsidian6.AbstractInputSuggest {
  constructor(app, inputEl) {
    super(app, inputEl);
    this.paths = [];
    this.currentSuggestions = [];
    this.renderedSuggestions = /* @__PURE__ */ new Map();
    this.inputEl = inputEl;
    const folders = Object.values(app.vault.getAllLoadedFiles()).filter((f) => f instanceof import_obsidian6.TFolder).map((f) => ({ path: f.path, isFolder: true }));
    const files = app.vault.getMarkdownFiles().map((f) => ({ path: f.path, isFolder: false }));
    this.paths = [...folders, ...files];
    this.inputEl.addEventListener("keydown", (e) => {
      if (e.key === "Enter") {
        setTimeout(() => {
          const container = this.containerEl;
          if (!container) return;
          const selectedEl = container.querySelector(".suggestion-item.is-selected");
          if (selectedEl) {
            const selectedPath = this.renderedSuggestions.get(selectedEl);
            if (selectedPath) {
              this.selectSuggestion(selectedPath);
            }
          }
        }, 0);
      }
    });
  }
  getSuggestions(inputStr) {
    const query = inputStr.toLowerCase();
    this.currentSuggestions = this.paths.filter(({ path: path2 }) => path2.toLowerCase().includes(query)).map((p) => p.path);
    return this.currentSuggestions;
  }
  renderSuggestion(path2, el) {
    const isFolder = this.paths.find((p) => p.path === path2)?.isFolder;
    el.addClass("mod-complex");
    const iconEl = el.createDiv({ cls: "suggestion-icon" });
    (0, import_obsidian6.setIcon)(iconEl, isFolder ? "folder" : "document");
    const name = path2.split("/").pop();
    const displayName = isFolder ? name : name.replace(/\.md$/, "");
    el.createDiv({ text: displayName, cls: "suggestion-title" });
    const parentPath = path2.split("/").slice(0, -1).join("/");
    el.createDiv({ text: parentPath, cls: "search-suggest-info-text" });
    el.addEventListener("click", (e) => {
      e.stopPropagation();
      this.selectSuggestion(path2);
    });
    this.renderedSuggestions.set(el, path2);
  }
  selectSuggestion(path2) {
    this.inputEl.value = path2;
    this.inputEl.dispatchEvent(new Event("input"));
    this.close();
  }
};
var MarkdownPreviewModal = class extends import_obsidian6.Modal {
  constructor(app, content) {
    super(app);
    this.content = content;
  }
  onOpen() {
    this.contentEl.addEventListener("click", (e) => e.stopPropagation());
    this.contentEl.empty();
    this.contentEl.createEl("h2", { text: "Toolkit Changelog" });
    const md = this.contentEl.createDiv();
    const dummyComponent = new class extends import_obsidian6.Component {
    }();
    import_obsidian6.MarkdownRenderer.renderMarkdown(this.content, md, "/", dummyComponent);
  }
  onClose() {
    this.contentEl.empty();
  }
};
var ToolkitSettingsTab = class extends import_obsidian6.PluginSettingTab {
  constructor(app, plugin) {
    super(app, plugin);
    this.versionValueEl = null;
    this.forceWarningEl = null;
    this.rulesetValueEl = null;
    this.plugin = plugin;
  }
  renderHeader(root) {
    const header = root.createDiv();
    header.addClass("settings-header");
    header.createEl("h3", { text: "VVunderlore Toolkit Settings" });
    const headerBtns = header.createDiv();
    headerBtns.addClass("settings-header-btn");
    const docsBtn = headerBtns.createEl("button", { text: "Docs" });
    docsBtn.onclick = () => window.open("http://vvunderlore.com", "_blank");
    const githubBtn = headerBtns.createEl("button", { text: "GitHub" });
    githubBtn.onclick = () => window.open("https://github.com/slamwise0001/VVunderlore-Toolkit-Full", "_blank");
    const kofiBtn = headerBtns.createEl("button", {
      text: "\u2615 Ko-fi",
      cls: "mod-cta"
    });
    kofiBtn.addClass("settings-kofi");
    kofiBtn.onclick = () => window.open("https://ko-fi.com/vvunderlore", "_blank");
  }
  renderFirstRunCard(root) {
    const card = root.createEl("div", { cls: "vvunderlore-first-run" });
    Object.assign(card.style, {
      display: "flex",
      flexDirection: "column",
      alignItems: "center",
      textAlign: "center",
      marginTop: "2em",
      padding: "1em",
      border: "2px solid var(--divider-color)",
      borderRadius: "18px",
      /* (optional) round the corners slightly */
      backgroundColor: "var(--background-primary)"
      /* (optional) white/gray background */
    });
    const title = card.createEl("h2", {
      text: "\u{1F3F0} Welcome to VVunderlore",
      cls: "vv-card-title"
    });
    title.addClass("vv-mb-sm");
    const desc = card.createEl("p", {
      text: "Get started by installing the default toolkit\u2014\nor choose individual pieces to suit your vault.",
      cls: "vv-card-desc"
    });
    desc.addClass("vv-mb-lg");
    const plugin = this.plugin;
    const grid = card.createDiv();
    Object.assign(grid.style, {
      display: "grid",
      gridTemplateColumns: "max-content max-content",
      columnGap: "1rem",
      rowGap: "0.25rem",
      justifyContent: "center",
      justifyItems: "center",
      marginBottom: "1rem"
    });
    const labelRs = grid.createEl("div", { text: "Ruleset" });
    labelRs.addClass("install-rulesheader");
    const labelRef = grid.createEl("div", { text: "Reference (optional)" });
    labelRef.addClass("install-rulesheader");
    const rsCell = grid.createDiv({ attr: { style: "text-align:center" } });
    const refCell = grid.createDiv({ attr: { style: "text-align:center" } });
    const summaryBar = grid.createDiv();
    Object.assign(summaryBar.style, {
      gridColumn: "1 / span 2",
      display: "flex",
      alignItems: "center",
      flexWrap: "wrap",
      gap: "0.5rem",
      fontSize: "0.85em",
      color: "var(--text-muted)",
      fontStyle: "italic",
      marginTop: "0.25rem",
      marginBottom: "1rem"
    });
    const rulesetSpan = summaryBar.createSpan({
      text: `Ruleset: ${plugin.settings.rulesetCompendium ? `D&D 5E (${plugin.settings.rulesetCompendium})` : ""}`
    });
    rulesetSpan.addClass("install-rulesheader");
    summaryBar.createSpan({ text: "References:" });
    const chipsWrapper = summaryBar.createDiv();
    Object.assign(chipsWrapper.style, { display: "flex", gap: "4px" });
    function addChip(id) {
      const ed = AVAILABLE_EDITIONS.find((e) => e.id === id);
      const chip = chipsWrapper.createDiv({
        attr: {
          style: "background: var(--interactive-accent); color: white; padding:2px 6px; border-radius:4px; display:inline-flex; align-items:center; gap:4px;"
        }
      });
      chip.createSpan({ text: ed.label });
      const rem = chip.createSpan({
        text: "\xD7",
        attr: { style: "cursor:pointer; margin-left:4px;" }
      });
      rem.onclick = async () => {
        plugin.settings.rulesetReference = plugin.settings.rulesetReference.filter((x) => x !== id);
        await plugin.saveSettings();
        chip.remove();
        updateInstallButtons();
      };
    }
    ;
    plugin.settings.rulesetReference.forEach((e) => addChip(e));
    const rsDropdown = new import_obsidian6.DropdownComponent(rsCell);
    rsDropdown.addOption("", "Select edition\u2026");
    AVAILABLE_EDITIONS.forEach((ed) => {
      rsDropdown.addOption(ed.id, ed.label);
    });
    rsDropdown.setValue(this.plugin.settings.rulesetCompendium).onChange(async (val) => {
      this.plugin.settings.rulesetCompendium = val;
      await this.plugin.saveSettings();
      const chosen = AVAILABLE_EDITIONS.find((e) => e.id === val);
      rulesetSpan.textContent = chosen ? chosen.label : "";
      chipsWrapper.empty();
      updateInstallButtons();
    });
    const searchWrapperEl = refCell.createDiv({ attr: { style: "text-align:center;" } });
    const searchComp = new import_obsidian6.SearchComponent(searchWrapperEl);
    searchComp.setPlaceholder("Add reference rules\u2026");
    const suggestionInputEl = searchComp.inputEl;
    new class extends import_obsidian6.AbstractInputSuggest {
      constructor(app, inputEl) {
        super(app, inputEl);
      }
      // 1) Propose edition IDs (minus the one they picked as the main ruleset)
      getSuggestions(input) {
        return AVAILABLE_EDITIONS.filter((ed) => ed.id !== plugin.settings.rulesetCompendium).filter((ed) => ed.label.toLowerCase().includes(input.toLowerCase())).map((ed) => ed.id);
      }
      // 2) Render the human-readable label
      renderSuggestion(item, el) {
        const ed = AVAILABLE_EDITIONS.find((e) => e.id === item);
        el.createDiv({ text: ed.label });
      }
      // 3) When they pick one, store its ID and add a chip
      selectSuggestion(item) {
        if (!plugin.settings.rulesetReference.includes(item)) {
          plugin.settings.rulesetReference.push(item);
          plugin.saveSettings();
          addChip(item);
        }
        this.close();
        suggestionInputEl.value = "";
        updateInstallButtons();
      }
    }(this.app, suggestionInputEl);
    const btnRow1 = card.createEl("div", { cls: "vv-button-row" });
    Object.assign(btnRow1.style, {
      display: "flex",
      gap: "0.75em",
      justifyContent: "center",
      marginBottom: "1.5em"
    });
    const installBtn1 = btnRow1.createEl("button", {
      text: "Install Toolkit",
      cls: "mod-cta"
    });
    installBtn1.onClickEvent(
      () => new ConfirmFreshInstallModal(this.app, this.plugin).open()
    );
    const updateInstallButtons = () => {
      const hasRuleset = Boolean(this.plugin.settings.rulesetCompendium);
      installBtn1.toggleAttribute("disabled", !hasRuleset);
    };
    updateInstallButtons();
    const skipPara = card.createEl("p", { cls: "vv-skip-link" });
    Object.assign(skipPara.style, {
      textAlign: "center",
      marginTop: "0.25em"
    });
    skipPara.createEl("a", {
      text: "Already have the Toolkit? Show me the settings \u2192"
    }).onClickEvent(async () => {
      const markerPath = ".vvunderlore_installed";
      try {
        if (!await this.app.vault.adapter.exists(markerPath)) {
          await this.app.vault.create(markerPath, "");
        }
      } catch (e) {
        console.error("\u274C Failed to create marker file:", e);
      }
      this.display();
    });
  }
  formatRulesetLabel(id) {
    if (!id) return "Unknown";
    const ed = AVAILABLE_EDITIONS.find((e) => e.id === id);
    return ed ? ed.label : String(id);
  }
  async resolveRulesetId() {
    const s = this.plugin?.settings;
    const fromSettings = s?.rulesetCompendium || // <— your installer dropdown saves here
    s?.rulesetId || s?.ruleset || null;
    if (fromSettings) return String(fromSettings);
    try {
      const txt = await this.app.vault.adapter.read("Compendium/.ruleset.json");
      const j = JSON.parse(txt);
      return j.rulesetId || j.ruleset || null;
    } catch (_) {
    }
    try {
      const txt = await this.app.vault.adapter.read(".version.json");
      const j = JSON.parse(txt);
      return j.rulesetId || j.ruleset || null;
    } catch (_) {
    }
    return null;
  }
  async updateRulesetDisplay() {
    if (!this.rulesetValueEl) return;
    const id = await this.resolveRulesetId();
    const label = this.formatRulesetLabel(id);
    this.rulesetValueEl.textContent = label;
    this.rulesetValueEl.classList.remove("vv-success", "vv-warn", "vv-error");
    this.rulesetValueEl.addClass(id ? "vv-success" : "vv-warn");
  }
  async display() {
    const { containerEl } = this;
    const savedScrollTop = containerEl.scrollTop;
    containerEl.empty();
    const markerPath = ".vvunderlore_installed";
    const isInstalled = await this.app.vault.adapter.exists(markerPath);
    if (!isInstalled) {
      this.renderFirstRunCard(containerEl);
      containerEl.scrollTop = savedScrollTop;
      return;
    }
    this.renderHeader(containerEl);
    ;
    (async () => {
      const versionRow = containerEl.createDiv();
      versionRow.addClass("settings-versionrow");
      const versionInfo = versionRow.createDiv();
      versionInfo.addClass("settings-versioninfo");
      let installed = "Not installed";
      try {
        const verContent = await this.app.vault.adapter.read(".version.json");
        const json = JSON.parse(verContent);
        installed = json.version ?? "Not installed";
      } catch (err) {
        console.warn("Could not read .version.json from vault:", err);
      }
      const latest = this.plugin.settings.latestToolkitVersion ?? "Could not fetch";
      const isMatch = installed === latest;
      const vaultRow = versionInfo.createDiv();
      vaultRow.appendText("Vault Toolkit Version: ");
      this.versionValueEl = vaultRow.createSpan();
      this.versionValueEl.textContent = installed;
      this.versionValueEl.addClass("vv-bold", isMatch ? "vv-success" : "vv-error");
      const latestRow = versionInfo.createEl("div", { text: "Latest Official Version: " });
      latestRow.createSpan({
        text: latest,
        attr: { style: "font-weight: bold; color: var(--text-success);" }
      });
      const versionControls = versionRow.createDiv();
      versionControls.addClass("settings-versioncontrols");
      const buttonRow = versionControls.createDiv();
      buttonRow.addClass("settings-buttonrow");
      const checkBtn = buttonRow.createEl("button", {
        text: installed !== latest ? "Preview Update" : "Check for Updates",
        cls: "mod-cta"
      });
      checkBtn.addEventListener("click", async () => {
        if (installed !== latest) {
          this.plugin.previewUpdatesModal();
        } else {
          await this.plugin.checkForUpdates();
        }
      });
      const changelogBtn = buttonRow.createEl("button", { text: "\u{1F4D6} View Changelog" });
      changelogBtn.addEventListener("click", () => {
        new MarkdownPreviewModal(this.app, this.plugin.changelog).open();
      });
      if (this.plugin.settings.lastChecked) {
        const lastChecked = versionControls.createDiv();
        lastChecked.addClass("settings-lastchecked");
        lastChecked.textContent = `Last checked: ${new Date(this.plugin.settings.lastChecked).toLocaleString()}`;
      }
      const rulesetRow = versionInfo.createDiv();
      rulesetRow.addClass("settings-rulesetrow");
      rulesetRow.setAttr("style", "margin-top: 6px;margin-bottom: 12px;");
      rulesetRow.appendText("Vault Ruleset: ");
      this.rulesetValueEl = rulesetRow.createSpan({});
      this.rulesetValueEl.textContent = "Detecting\u2026";
      await this.updateRulesetDisplay();
      const fixDetails = containerEl.createEl("details", { cls: "vk-section" });
      const fixHeader = fixDetails.createEl("summary", { cls: "vk-section-header" });
      Object.assign(fixHeader.style, {
        display: "flex",
        flexDirection: "column",
        alignItems: "stretch",
        padding: "0.5em 0",
        borderBottom: "1px solid var(--divider-color)",
        cursor: "pointer"
      });
      const fixHeaderRow = fixHeader.createDiv({
        attr: {
          style: `
			display: flex;
			justify-content: space-between;
			align-items: flex-end;
			`
        }
      });
      const fixTitleBlock = fixHeaderRow.createDiv({
        attr: { style: "display: flex; flex-direction: column;" }
      });
      fixTitleBlock.createEl("h5", { text: "Fix Your Vault" });
      fixTitleBlock.createEl("div", {
        text: "Fix and broken, deleted, or misplaced files in your toolkit.",
        cls: "setting-item-description",
        attr: { style: "margin-top: 0.25em;" }
      });
      const fixToggleIcon = fixHeaderRow.createEl("span", { text: "VV", cls: "vk-toggle-icon" });
      Object.assign(fixToggleIcon.style, {
        fontWeight: "bold",
        display: "inline-block",
        transition: "transform 0.2s ease",
        transformOrigin: "50% 50%",
        // Rotate around its own center
        userSelect: "none",
        transform: fixDetails.open ? "rotate(0deg)" : "rotate(180deg)"
      });
      fixDetails.ontoggle = () => {
        fixToggleIcon.addClass("vv-rotated");
      };
      const fixBody = fixDetails.createDiv({ cls: "vk-section-body" });
      fixBody.addClass("vv-pl-md");
      const fixButtonRow = fixBody.createDiv();
      fixButtonRow.addClass("vv-checkbox-row", "vv-justify-between");
      const warningContainer = fixButtonRow.createDiv();
      this.forceWarningEl = warningContainer;
      let installedVersionStr = "";
      try {
        const versionFile = await this.plugin.app.vault.adapter.read(".version.json");
        const parsed = JSON.parse(versionFile);
        installedVersionStr = (parsed.version ?? "").trim();
      } catch {
        installedVersionStr = "";
      }
      const latestVersionStr = (this.plugin.settings.latestToolkitVersion ?? "").trim();
      if (installedVersionStr && latestVersionStr && installedVersionStr !== latestVersionStr) {
        const warn = warningContainer.createEl("div", {
          text: `\u26A0\uFE0F New version available (${installedVersionStr} \u2192 ${latestVersionStr}) \u2014 use regular update instead`
        });
        warn.addClass("vv-small", "vv-muted", "vv-italic");
        warn.setAttr(
          "title",
          "Force updating while a new version is available may skip important changes."
        );
      }
      const buttonGroup = fixButtonRow.createDiv();
      buttonGroup.addClass("settings-buttonrow");
      buttonGroup.createEl("button", { text: "Force Update Vault", cls: "mod-cta" }).onclick = async () => {
        await this.plugin.forceUpdatePreviewAndConfirm();
        if (this.plugin.settings.reparseGamesets) {
          await this.plugin.refreshGameSetData();
        }
      };
      buttonGroup.createEl("button", {
        text: "Undo Update"
      }).onclick = async () => {
        await this.plugin.undoForceUpdate();
      };
      const fixTimestampRow = fixBody.createDiv();
      Object.assign(fixTimestampRow.style, {
        textAlign: "right",
        fontSize: "11px",
        color: "var(--text-muted)",
        marginTop: "0.25em"
      });
      fixTimestampRow.textContent = `Last forced: ${this.plugin.settings.lastForceUpdate ? new Date(this.plugin.settings.lastForceUpdate).toLocaleString() : "Not forced yet"}`;
      fixBody.createEl("div", {
        attr: {
          style: "border-top: 1px solid var(--divider-color); margin: 0.75em 0;"
        }
      });
      const reparseRow = fixBody.createDiv();
      reparseRow.addClass("vv-mt-sm");
      new import_obsidian6.Setting(reparseRow).setName("Re-parse Game Sets On Force Update").setDesc(
        "Also re-parse your ruleset compendium and reference sets. This won't delete any files in the Compendium or Reference folders."
      ).addToggle(
        (tog) => tog.setValue(this.plugin.settings.reparseGamesets).onChange(async (value) => {
          this.plugin.settings.reparseGamesets = value;
          await this.plugin.saveSettings();
        })
      );
      const backupDetails = containerEl.createEl("details", { cls: "vk-section" });
      const backupSummary = backupDetails.createEl("summary", { cls: "vk-section-header" });
      Object.assign(backupSummary.style, {
        display: "flex",
        flexDirection: "column",
        alignItems: "stretch",
        padding: "0.5em 0",
        borderBottom: "1px solid var(--divider-color)",
        cursor: "pointer"
      });
      const backupTitleRow = backupSummary.createDiv({
        attr: {
          style: `
			display: flex;
			justify-content: space-between;
			align-items: flex-end;
			`
        }
      });
      const titleBlock = backupTitleRow.createDiv({
        attr: { style: "display: flex; flex-direction: column;" }
      });
      titleBlock.createEl("h5", { text: "Vault Backups" });
      titleBlock.createEl("div", {
        text: "The Toolkit will back up your vault automatically before updates. You can also back up manually anytime.",
        cls: "setting-item-description",
        attr: { style: "margin-top: 0.25em;" }
      });
      const backupVvIcon = backupTitleRow.createEl("span", { text: "VV", cls: "vk-toggle-icon" });
      Object.assign(backupVvIcon.style, {
        fontWeight: "bold",
        display: "inline-block",
        transition: "transform 0.2s ease",
        transformOrigin: "50% 50%",
        userSelect: "none",
        transform: backupDetails.open ? "rotate(0deg)" : "rotate(180deg)"
      });
      backupDetails.ontoggle = () => {
        backupVvIcon.addClass("vv-rotated");
      };
      const backupBody = backupDetails.createDiv({ cls: "vk-section-body" });
      backupBody.addClass("vv-pl-md");
      new import_obsidian6.Setting(backupBody).setName("Auto-Backup Before Update").setDesc("Create a full .zip of the vault before applying version updates. Force updates will only back up the files that will be modified or removed.").addToggle(
        (t) => t.setValue(this.plugin.settings.autoBackupBeforeUpdate).onChange(async (v) => {
          this.plugin.settings.autoBackupBeforeUpdate = v;
          await this.plugin.saveSettings();
        })
      );
      new import_obsidian6.Setting(backupBody).setName("Manual Backup").setDesc("Immediately create a zip backup of your vault").addButton(
        (b) => b.setButtonText("Backup Vault Now").setCta().onClick(async () => {
          const path2 = await this.plugin.backupManager.backupVaultToZip("manual");
          new import_obsidian6.Notice(`Backup created: ${path2}`);
        })
      );
      new import_obsidian6.Setting(backupBody).setName("Open Backups Folder").setDesc("Open the backups folder on disk. MacOS: Cant see it? Hit Shift+Cmd+(period).").addButton(
        (b) => b.setButtonText("Open Folder").onClick(async () => {
          try {
            const vaultBasePath = this.plugin.app.vault.adapter.getBasePath();
            const backupFolderPath = path.join(
              vaultBasePath,
              ".vault-backups"
            );
            const { shell } = window.require("electron");
            const result = await shell.openPath(backupFolderPath);
            if (typeof result === "string" && result.length > 0) {
              console.error("\u274C shell.openPath error:", result);
              new import_obsidian6.Notice("Could not open backups folder. See console.");
            }
          } catch (err) {
            console.error("\u274C Could not open backups folder:", err);
            new import_obsidian6.Notice("Could not open backups folder. See console.");
          }
        })
      );
      backupBody.createEl("div", {
        attr: {
          style: "border-top: 1px solid var(--divider-color); margin-top: 1.5em;"
        }
      });
      const customizationDetails = containerEl.createEl("details", { cls: "vk-section" });
      const customizationSummary = customizationDetails.createEl("summary", { cls: "vk-section-header" });
      Object.assign(customizationSummary.style, {
        display: "flex",
        flexDirection: "column",
        alignItems: "flex-start",
        padding: "0.5em 0",
        cursor: "pointer"
      });
      const titleRow = customizationSummary.createDiv({
        attr: {
          style: `
			display: flex;
			width: 100%;
			justify-content: space-between;
			align-items: flex-end;
			`
        }
      });
      const customizationTitleBlock = titleRow.createDiv({
        attr: { style: "display: flex; flex-direction: column;" }
      });
      const h5 = customizationTitleBlock.createEl("h5");
      h5.appendText("Custom File Management ");
      customizationTitleBlock.createEl("div", {
        text: "Skip updates on certain files or remap relocated Toolkit files so they can update.",
        cls: "setting-item-description",
        attr: { style: "margin-top: 0.25em;" }
      });
      const customVvIcon = titleRow.createEl("span", { text: "VV", cls: "vk-toggle-icon" });
      Object.assign(customVvIcon.style, {
        fontWeight: "bold",
        transition: "transform 0.2s ease",
        transformOrigin: "50% 50%",
        userSelect: "none",
        transform: customizationDetails.open ? "rotate(0deg)" : "rotate(180deg)"
      });
      customizationDetails.ontoggle = () => {
        customVvIcon.addClass("vv-rotated");
      };
      const customizationBodyWrapper = customizationDetails.createDiv({
        attr: { style: "padding-left: 1em; padding-right: 1em;" }
      });
      const customizationBody = customizationBodyWrapper.createDiv({ cls: "vk-section-body" });
      const skipSection = customizationBody.createDiv();
      const settingItem = skipSection.createDiv({ cls: "setting-item" });
      const info = settingItem.createDiv({ cls: "setting-item-info" });
      info.createDiv({ text: "Skip Toolkit Items", cls: "setting-item-name" });
      info.createDiv({
        text: "Files listed here will be ignored during toolkit updates.",
        cls: "setting-item-description"
      });
      const control = settingItem.createDiv({ cls: "setting-item-control" });
      const dropdown = new import_obsidian6.DropdownComponent(control);
      dropdown.selectEl.addClass("dropdownwidth");
      dropdown.addOption("", "Select an item\u2026");
      this.plugin.manifestCache.files.filter((f) => !f.optional).forEach((f) => dropdown.addOption(f.path, f.displayName ?? f.path.split("/").pop()));
      this.plugin.manifestCache.folders.filter((f) => !f.optional).forEach((f) => dropdown.addOption(f.path, (f.displayName ?? f.path.split("/").pop()) + "/ (folder)"));
      new import_obsidian6.ButtonComponent(control).setButtonText("Add").setCta().onClick(async () => {
        const key = dropdown.getValue();
        if (!key) return new import_obsidian6.Notice("Pick something to skip.");
        if (!this.plugin.settings.customPaths.some((c) => c.manifestKey === key)) {
          this.plugin.settings.customPaths.push({ vaultPath: key, manifestKey: key, doUpdate: false });
          await this.plugin.saveSettings();
          renderSkipTable();
        }
      });
      const skipTableWrapper = skipSection.createDiv({ cls: "vk-table-wrapper", attr: { style: "margin-top:0.75em" } });
      const renderSkipTable = () => {
        skipTableWrapper.empty();
        const items = this.plugin.settings.customPaths.filter((c) => !c.doUpdate);
        if (items.length === 0) {
          const emptyMsg = skipTableWrapper.createEl("div", { text: "No items skipped." });
          emptyMsg.addClass("settings-emptymsg");
          return;
        }
        const table = skipTableWrapper.createEl("table", { cls: "setting-table" });
        const header = table.createTHead().insertRow();
        header.insertCell().textContent = "Skipped Files/Folders";
        const body = table.createTBody();
        items.forEach((entry) => {
          const row = body.insertRow();
          const contentCell = row.insertCell();
          contentCell.addClass("settings-filetable");
          contentCell.createSpan({ text: entry.manifestKey });
          const removeLink = contentCell.createEl("a", { text: "Remove entry", href: "#" });
          removeLink.addClass("settings-removelink");
          removeLink.onclick = async (e) => {
            e.preventDefault();
            this.plugin.settings.customPaths.remove(entry);
            await this.plugin.saveSettings();
            renderSkipTable();
          };
        });
      };
      renderSkipTable();
      customizationBody.createEl("div", {
        attr: { style: "height: 1em; border-top: 1px solid var(--divider-color); margin: 1em 0;" }
      });
      const remapSection = customizationBody.createDiv();
      const remapSetting = remapSection.createDiv({ cls: "setting-item" });
      const remapInfo = remapSetting.createDiv({ cls: "setting-item-info" });
      remapInfo.createDiv({ text: "Remap File Paths", cls: "setting-item-name" });
      remapInfo.createDiv({
        text: "Remap toolkit files vault paths if you chose to move anything. Moving files without remapping will result in duplicate and/or out-of-date files after update.",
        cls: "setting-item-description"
      });
      const remapControlBlock = remapSection.createDiv({ cls: "vk-inline-add-controls" });
      remapControlBlock.addClass("settings-remapcontrol");
      let remapDrop;
      let remapInput;
      remapDrop = new import_obsidian6.DropdownComponent(remapControlBlock);
      remapDrop.selectEl.addClass("dropdownwidth");
      remapDrop.addOption("", "Select an item\u2026");
      this.plugin.manifestCache.files.forEach(
        (f) => remapDrop.addOption(f.path, f.displayName ?? f.path.split("/").pop())
      );
      this.plugin.manifestCache.folders.forEach(
        (f) => remapDrop.addOption(f.path, (f.displayName ?? f.path.split("/").pop()) + "/ (folder)")
      );
      const searchWrapper = remapControlBlock.createDiv();
      const searchComponent = new import_obsidian6.SearchComponent(searchWrapper);
      searchComponent.setPlaceholder("Search vault path\u2026");
      new FilePathSuggester(this.app, searchComponent.inputEl);
      remapInput = searchComponent.inputEl;
      new import_obsidian6.ButtonComponent(remapControlBlock).setButtonText("Add Remap").setCta().onClick(async () => {
        const key = remapDrop.getValue();
        const vp = remapInput.value.trim();
        if (!key || !vp) return new import_obsidian6.Notice("Select an item and enter a vault path.");
        if (!this.app.vault.getAbstractFileByPath(vp)) return new import_obsidian6.Notice("Vault path not found.");
        this.plugin.settings.customPaths = this.plugin.settings.customPaths.filter((c) => c.manifestKey !== key);
        this.plugin.settings.customPaths.push({ manifestKey: key, vaultPath: vp, doUpdate: true });
        await this.plugin.saveSettings();
        remapInput.value = "";
        remapDrop.setValue("");
        renderRemapPanel();
      });
      const remapTableWrapper = remapSection.createDiv({ cls: "vk-table-wrapper", attr: { style: "margin-top: 0.75em" } });
      const renderRemapPanel = () => {
        remapTableWrapper.empty();
        const toRemap = this.plugin.settings.customPaths.filter((c) => c.doUpdate);
        if (toRemap.length === 0) {
          const emptyMsg = remapTableWrapper.createEl("div", { text: "No custom paths defined." });
          emptyMsg.addClass("settings-emptymsg");
          return;
        }
        const table = remapTableWrapper.createEl("table", { cls: "setting-table" });
        const head = table.createTHead().insertRow();
        ["Toolit Item", "New Vault Path", ""].forEach((txt) => head.insertCell().textContent = txt);
        const body = table.createTBody();
        toRemap.forEach((entry) => {
          const row = body.insertRow();
          row.insertCell().textContent = entry.manifestKey;
          row.insertCell().textContent = entry.vaultPath;
          const removeCell = row.insertCell();
          const removeLink = removeCell.createEl("a", { text: "Remove entry", href: "#" });
          removeLink.addClass("settings-removelink");
          removeLink.onclick = async (e) => {
            e.preventDefault();
            this.plugin.settings.customPaths.remove(entry);
            await this.plugin.saveSettings();
            renderRemapPanel();
          };
        });
      };
      renderRemapPanel();
      customizationBody.createEl("div", {
        attr: {
          style: "border-top: 1px solid var(--divider-color); margin: 0.5em 0;"
        }
      });
      const behaviorDetails = containerEl.createEl("details", { cls: "vk-section" });
      const behaviorSummary = behaviorDetails.createEl("summary", { cls: "vk-section-header" });
      Object.assign(behaviorSummary.style, {
        display: "flex",
        flexDirection: "column",
        alignItems: "stretch",
        padding: "0.5em 0",
        borderBottom: "1px solid var(--divider-color)",
        cursor: "pointer"
      });
      const behaviorRow = behaviorSummary.createDiv({
        attr: { style: "display:flex; justify-content:space-between; align-items:flex-end;" }
      });
      const behaviorTitle = behaviorRow.createDiv({ attr: { style: "display:flex; flex-direction:column;" } });
      behaviorTitle.createEl("h5", { text: "Toolkit Behavior" });
      behaviorTitle.createEl("div", {
        text: "Fine-tune how the toolkit behaves during common workflows.",
        cls: "setting-item-description",
        attr: { style: "margin-top:0.25em;" }
      });
      const behaviorIcon = behaviorRow.createEl("span", { text: "VV", cls: "vk-toggle-icon" });
      Object.assign(behaviorIcon.style, {
        fontWeight: "bold",
        display: "inline-block",
        transition: "transform 0.2s ease",
        transformOrigin: "50% 50%",
        userSelect: "none",
        transform: behaviorDetails.open ? "rotate(0deg)" : "rotate(180deg)"
      });
      behaviorDetails.ontoggle = () => {
        behaviorIcon.addClass("vv-rotated");
      };
      const behaviorBody = behaviorDetails.createDiv({ cls: "vk-section-body" });
      behaviorBody.addClass("vv-pl-md");
      new import_obsidian6.Setting(behaviorBody).setName("Session Template Naming").setDesc("When both a date and a name are entered in the New Session form, choose which one to use in the session note title. For example, 'Session 14 - Burning Down the Village' vs 'Session 14 - 4.5.63'").addDropdown((dd) => {
        dd.addOption("name", "Session Name");
        dd.addOption("date", "Date");
        dd.setValue(this.plugin.settings.sessionTitlePreference ?? "name");
        dd.onChange(async (val) => {
          this.plugin.settings.sessionTitlePreference = val;
          await this.plugin.saveSettings();
        });
      });
      new import_obsidian6.Setting(behaviorBody).setName("Enable Page Previews in Sidebars").setDesc("If enabled, links in VVunderlore sidebars (VVorldbuilding, Gameplay) will show hover previews.").addToggle((toggle) => {
        toggle.setValue(this.plugin.settings.enableSidebarPreviews ?? false);
        toggle.onChange(async (val) => {
          this.plugin.settings.enableSidebarPreviews = val;
          await this.plugin.saveSettings();
          this.app.workspace.trigger("vv:sidebar-previews-changed", { enabled: val });
        });
      });
      const highlightDetails = containerEl.createEl("details", { cls: "vk-section" });
      const highlightSummary = highlightDetails.createEl("summary", { cls: "vk-section-header" });
      Object.assign(highlightSummary.style, {
        display: "flex",
        flexDirection: "column",
        alignItems: "stretch",
        padding: "0.5em 0",
        borderBottom: "1px solid var(--divider-color)",
        cursor: "pointer"
      });
      const highlightTitleRow = highlightSummary.createDiv({
        attr: {
          style: `
			display: flex;
			justify-content: space-between;
			align-items: flex-end;
			`
        }
      });
      const hlTitleBlock = highlightTitleRow.createDiv({
        attr: { style: "display: flex; flex-direction: column;" }
      });
      hlTitleBlock.createEl("h5", { text: "File Highlights" });
      hlTitleBlock.createEl("div", {
        text: "Toggle on/off the highlighting of Toolkit-specific files. Also make the highlights cool colors.",
        cls: "setting-item-description",
        attr: { style: "margin-top: 0.25em;" }
      });
      const hlToggleIcon = highlightTitleRow.createEl("span", { text: "VV", cls: "vk-toggle-icon" });
      Object.assign(hlToggleIcon.style, {
        fontWeight: "bold",
        display: "inline-block",
        transition: "transform 0.2s ease",
        transformOrigin: "50% 50%",
        userSelect: "none",
        transform: highlightDetails.open ? "rotate(0deg)" : "rotate(180deg)"
      });
      highlightDetails.ontoggle = () => {
        hlToggleIcon.addClass("vv-rotated");
      };
      const highlightBody = highlightDetails.createDiv({ cls: "vk-section-body" });
      highlightBody.addClass("vv-pl-md");
      new import_obsidian6.Setting(highlightBody).setName("Enable File Highlighting").setDesc("Any file installed by VVunderlore will have this background.").addToggle((toggle) => {
        toggle.setValue(this.plugin.settings.highlightEnabled).onChange(async (enabled) => {
          this.plugin.settings.highlightEnabled = enabled;
          await this.plugin.saveSettings();
          if (enabled) {
            this.plugin.enableHighlight();
          } else {
            this.plugin.disableHighlight();
          }
          renderHighlightColorPickers();
        });
      });
      const colorPickerWrapper = highlightBody.createDiv();
      const renderHighlightColorPickers = () => {
        colorPickerWrapper.empty();
        if (!this.plugin.settings.highlightEnabled) {
          return;
        }
        new import_obsidian6.Setting(colorPickerWrapper).setName("Light Mode Highlight Color").setDesc("Choose the background color for files/folders in Light mode.").addColorPicker((picker) => {
          picker.setValue(this.plugin.settings.highlightColorLight).onChange(async (newColor) => {
            this.plugin.settings.highlightColorLight = newColor;
            await this.plugin.saveSettings();
            this.plugin.disableHighlight();
            this.plugin.enableHighlight();
          });
        });
        new import_obsidian6.Setting(colorPickerWrapper).setName("Dark Mode Highlight Color").setDesc("Choose the background color for files/folders in Dark mode.").addColorPicker((picker) => {
          picker.setValue(this.plugin.settings.highlightColorDark).onChange(async (newColor) => {
            this.plugin.settings.highlightColorDark = newColor;
            await this.plugin.saveSettings();
            this.plugin.disableHighlight();
            this.plugin.enableHighlight();
          });
        });
      };
      renderHighlightColorPickers();
      renderSkipTable();
      renderRemapPanel();
      const removeDemoSetting = new import_obsidian6.Setting(containerEl);
      removeDemoSetting.settingEl.addClass("vv-no-border-top");
      removeDemoSetting.setName("Remove Demo Files").setDesc("Delete every \u201Coptional\u201D demo file and folder from your vault.").addButton(
        (button) => button.setButtonText("Remove Demo Files").onClick(async () => {
          const optionalFileEntries = this.plugin.manifestCache.files.filter((f) => f.optional);
          const optionalFolderEntries = this.plugin.manifestCache.folders.filter((f) => f.optional);
          const totalCountFiles = optionalFileEntries.length;
          const totalCountFolders = optionalFolderEntries.length;
          const totalCount = totalCountFiles + totalCountFolders;
          if (totalCount === 0) {
            new import_obsidian6.Notice("No \u201Coptional\u201D demo files or folders to remove.");
            return;
          }
          const userConfirmed = await new Promise((resolve) => {
            const confirmModal = new class extends import_obsidian6.Modal {
              constructor(app) {
                super(app);
              }
              onOpen() {
                this.contentEl.empty();
                this.contentEl.createEl("h2", { text: "Confirm Removal" });
                this.contentEl.createEl("p", {
                  text: `This will permanently delete ${totalCountFiles} file(s) and ${totalCountFolders} folder(s). Continue?`
                });
                const btnRow = this.contentEl.createEl("div");
                Object.assign(btnRow.style, {
                  display: "flex",
                  justifyContent: "flex-end",
                  gap: "0.5em",
                  marginTop: "1.5em"
                });
                btnRow.createEl("button", { text: "Cancel" }).onclick = () => {
                  resolve(false);
                  this.close();
                };
                btnRow.createEl("button", { text: "Yes, Remove", cls: "mod-danger" }).onclick = () => {
                  resolve(true);
                  this.close();
                };
              }
              onClose() {
                this.contentEl.empty();
              }
            }(this.app);
            confirmModal.open();
          });
          if (!userConfirmed) {
            return;
          }
          let filesDeleted = 0;
          for (const fileEntry of optionalFileEntries) {
            const mapped = this.plugin.settings.customPaths.find((c) => c.manifestKey === fileEntry.key);
            const vaultPath = mapped?.vaultPath ?? fileEntry.path;
            if (await this.app.vault.adapter.exists(vaultPath)) {
              try {
                await this.app.vault.adapter.remove(vaultPath);
                filesDeleted++;
              } catch (err) {
                console.error(`Failed to delete optional file ${vaultPath}`, err);
              }
            }
          }
          let foldersDeleted = 0;
          for (const folderEntry of optionalFolderEntries) {
            const mapped = this.plugin.settings.customPaths.find((c) => c.manifestKey === folderEntry.key);
            const vaultFolderPath = mapped?.vaultPath ?? folderEntry.path;
            if (await this.app.vault.adapter.exists(vaultFolderPath)) {
              try {
                await this.app.vault.adapter.rmdir(vaultFolderPath, true);
                foldersDeleted++;
              } catch (err) {
                console.error(`Failed to delete optional folder ${vaultFolderPath}`, err);
              }
            }
          }
          this.plugin.settings.customPaths = this.plugin.settings.customPaths.filter((c) => {
            const isOptFile = optionalFileEntries.some((f) => f.key === c.manifestKey);
            const isOptFolder = optionalFolderEntries.some((f) => f.key === c.manifestKey);
            return !isOptFile && !isOptFolder;
          });
          await this.plugin.saveSettings();
          new import_obsidian6.Notice(`Deleted ${filesDeleted} file(s) and ${foldersDeleted} folder(s).`);
          this.display();
        })
      );
      const footer = containerEl.createDiv({ cls: "setting-item" });
      Object.assign(footer.style, {
        fontSize: "0.85em",
        color: "var(--text-muted)",
        marginTop: "1em"
      });
      footer.createEl("span", {
        text: `VVunderlore Toolkit Plugin v${this.plugin.manifest.version}   \u2022 `
      });
      footer.createEl("a", {
        text: "View on GitHub",
        href: "https://github.com/slamwise0001/vvunderlore-toolkit-plugin",
        attr: { target: "_blank" }
      });
      containerEl.scrollTop = savedScrollTop;
    })();
  }
  async updateVersionDisplay() {
    if (!this.versionValueEl || !this.forceWarningEl) return;
    let installed = "";
    try {
      const ver = await this.plugin.app.vault.adapter.read(".version.json");
      installed = JSON.parse(ver).version ?? "";
    } catch {
    }
    const latest = (this.plugin.settings.latestToolkitVersion ?? "").trim();
    const isMatch = installed === latest;
    this.versionValueEl.textContent = installed || "Not installed";
    this.versionValueEl.addClass(isMatch ? "vv-success" : "vv-error");
    this.forceWarningEl.empty();
    if (installed && latest && installed !== latest) {
      const warn = this.forceWarningEl.createDiv({
        text: `\u26A0\uFE0F New version available (${installed} \u2192 ${latest}) \u2014 use regular update instead`
      });
      warn.addClass("vv-small", "vv-muted", "vv-italic");
      warn.setAttr("title", "Force updating while a new version is available may skip important changes.");
    }
  }
};

// src/fileCacheManager.ts
var import_crypto = require("crypto");
var ToolkitFileCacheManager = class {
  constructor(vault, initialCache, saveCallback) {
    this.vault = vault;
    this.cache = initialCache || {};
    this.save = saveCallback;
  }
  hashContent(content) {
    return (0, import_crypto.createHash)("sha256").update(content).digest("hex");
  }
  async isUpToDate(vaultPath) {
    const entry = this.cache[vaultPath];
    if (!entry) {
      return false;
    }
    const exists = await this.vault.adapter.exists(vaultPath);
    if (!exists) {
      return false;
    }
    const content = await this.vault.adapter.read(vaultPath);
    const localHash = this.hashContent(content);
    const isSame = localHash === entry.hash;
    return isSame;
  }
  async updateCache(vaultPath, content, githubPath, saveNow = true) {
    this.cache[vaultPath] = {
      hash: this.hashContent(content),
      githubPath
    };
    if (saveNow) await this.save();
  }
  getCache() {
    return this.cache;
  }
  getTrackedFiles() {
    return Object.keys(this.cache);
  }
  getGitHubPath(vaultPath) {
    return this.cache[vaultPath]?.githubPath;
  }
  resetCache() {
    this.cache = {};
  }
  async removeFromCache(vaultPath) {
    delete this.cache[vaultPath];
    await this.save();
  }
};

// src/backup/BackupManager.ts
var import_obsidian7 = require("obsidian");
var import_path = require("path");
var BackupManager = class {
  constructor(app) {
    this.app = app;
  }
  async backupVaultMirror(label, maxFullBackups = 5) {
    const ts = (/* @__PURE__ */ new Date()).toISOString().replace(/[:.]/g, "-");
    const tag = label ? `-${label}` : "";
    const base = (0, import_obsidian7.normalizePath)(`.vault-backups/full/${ts}${tag}`);
    await this.ensureFolderExists(base);
    for (const file of this.app.vault.getFiles()) {
      const p = file.path;
      if (p.startsWith(".vault-backups/") || p.startsWith(`${this.app.vault.configDir}/`) || p.startsWith(".trash/") || p.startsWith(".git/")) {
        continue;
      }
      const target = (0, import_obsidian7.normalizePath)(`${base}/${p}`);
      await this.ensureFolderExists((0, import_path.dirname)(target));
      try {
        const data = await this.app.vault.adapter.readBinary(p);
        await this.app.vault.adapter.writeBinary(target, data);
      } catch (e) {
        console.error("[BackupManager] copy failed:", p, e);
      }
    }
    await this.pruneFullBackups(base, maxFullBackups);
    new import_obsidian7.Notice("\u2705 Backup complete!");
    return base;
  }
  /**
   * Legacy alias for mirror-based backups
   */
  async backupVaultToZip(label) {
    return this.backupVaultMirror(label);
  }
  /**
   * Deletes oldest full backup folders, keeping only the most recent `keep` snapshots.
   */
  async pruneFullBackups(currentPath, keep) {
    const root = (0, import_obsidian7.normalizePath)(".vault-backups/full");
    await this.ensureFolderExists(root);
    const listing = await this.app.vault.adapter.list(root);
    const folderPaths = listing?.folders ?? [];
    const names = folderPaths.map((f) => (0, import_path.basename)(f));
    const sorted = [...names].sort((a, b) => b.localeCompare(a));
    const toRemove = sorted.slice(keep);
    for (const name of toRemove) {
      const vaultPath = (0, import_obsidian7.normalizePath)(`${root}/${name}`);
      try {
        await this.app.vault.adapter.rmdir(vaultPath, true);
      } catch (e) {
        console.error("[BackupManager] prune failed:", vaultPath, e);
      }
    }
  }
  /**
   * Recursively ensures that a directory exists in the vault.
   */
  async ensureFolderExists(folderPath) {
    if (!folderPath || await this.app.vault.adapter.exists(folderPath)) {
      return;
    }
    const parent = (0, import_path.dirname)(folderPath);
    await this.ensureFolderExists(parent);
    await this.app.vault.createFolder(folderPath);
  }
};

// src/sidebar/sb-worldbuilding.ts
var import_obsidian8 = require("obsidian");
function getToolkit(app) {
  return app.plugins.getPlugin("vvunderlore-toolkit") || app.plugins.plugins?.["vvunderlore-toolkit"];
}
var SIDEBAR_VIEW_TYPE = "vvunderlore-templates-sidebar";
var TEMPLATE_BUTTONS = [
  { label: "New Adventure", path: "Extras/Templates/newadventure_template.md" },
  { label: "New PC", path: "Extras/Templates/playercharacter_template.md" },
  { label: "New NPC", path: "Extras/Templates/npc_template.md" },
  { label: "New Item", path: "Extras/Templates/newitem_template.md" },
  { label: "New Place", path: "Extras/Templates/newplace_template.md" },
  { label: "New Creature", path: "Extras/Templates/newcreature_template.md" }
];
var SCHOOL_ABBR = {
  Abjuration: "Abj.",
  Conjuration: "Conj.",
  Divination: "Div.",
  Enchantment: "Ench.",
  Evocation: "Envo.",
  Illusion: "Illu.",
  Necromancy: "Nec.",
  Transmutation: "Trans."
};
var DAMAGE_ABBR = {
  acid: "Acid",
  cold: "Cold",
  fire: "Fire",
  force: "Force",
  lightning: "Ltng.",
  necrotic: "Necro",
  poison: "Pois.",
  psychic: "Psyc.",
  radiant: "Radi.",
  thunder: "Thun.",
  bludgeoning: "Bludg.",
  piercing: "Pierce",
  slashing: "Slash"
};
var SidebarTemplatesView = class extends import_obsidian8.ItemView {
  constructor(leaf) {
    super(leaf);
    this.spellSortKey = "name";
    this.spellSortDir = 1;
    // ── Selected Spells (memory only; no persistence) ───────────────────
    this.picks = [];
    this.addBtnByPath = /* @__PURE__ */ new Map();
  }
  getViewType() {
    return SIDEBAR_VIEW_TYPE;
  }
  getDisplayText() {
    return "VVorldbuiling";
  }
  getIcon() {
    return "mapmaking";
  }
  // table “Add” buttons by file path
  buildDataviewForPicks() {
    const paths = this.picks.map((p) => `"${p.replace(/"/g, '\\"')}"`).join(", ");
    return [
      "```dataview",
      "TABLE",
      '  level AS "Lvl",',
      '  school AS "School",',
      '  damage_type AS "Damage",',
      '  range AS "Range",',
      '  casting_time AS "Casting Time"',
      "WHERE contains([" + paths + "], file.path)",
      "SORT level ASC, name ASC",
      "```"
    ].join("\n");
  }
  _rewirePreviews() {
    const enablePreview = !!getToolkit(this.app)?.settings?.enableSidebarPreviews;
    const wrap = this.contentEl;
    const pagePreview = this.app.internalPlugins?.getPluginById?.("page-preview")?.instance;
    if (wrap._vvHoverWired && !enablePreview) {
      const prev = wrap._vvHoverHandler;
      if (prev) wrap.removeEventListener("mousemove", prev);
      delete wrap._vvHoverWired;
      delete wrap._vvHoverHandler;
    }
    if (enablePreview && pagePreview?.onLinkHover && !wrap._vvHoverWired) {
      const handler = (ev) => {
        const t = ev.target;
        const a = t?.closest("a.internal-link");
        if (!a) return;
        const linkText = a.getAttribute("data-href") || a.getAttribute("href");
        if (!linkText) return;
        pagePreview.onLinkHover(ev, a, linkText, "");
      };
      wrap.addEventListener("mousemove", handler);
      wrap._vvHoverWired = true;
      wrap._vvHoverHandler = handler;
    }
  }
  renderPicks() {
    const picksDiv = this.containerEl.find("#spellbook-picks");
    if (!picksDiv) return;
    picksDiv.empty();
    const wrapper = picksDiv.createDiv();
    wrapper.setAttr("style", [
      "border:1.5px solid black",
      "border-radius:6px",
      "padding:8px",
      "margin-top:8px",
      "background:var(--background-secondary)"
    ].join(";"));
    const details = wrapper.createEl("details", { attr: { open: "true" } });
    const summary = details.createEl("summary", { text: "Selected Spells" });
    summary.setAttr("style", [
      "font-size:1.1em",
      "font-weight:600",
      "margin:0 0 4px",
      "cursor:pointer",
      "padding:4px 8px",
      "background:var(--background-secondary)",
      "border-radius:4px"
    ].join(";"));
    const body = details.createDiv();
    const grid = body.createDiv();
    grid.setAttr("style", [
      "display:grid",
      "grid-template-columns:1fr",
      "row-gap:2px",
      "margin:8px 0",
      "padding:0 16px"
      //sidepadding
    ].join(";"));
    if (!this.picks.length) {
      const empty = grid.createEl("div", { text: "No spells selected yet." });
      empty.setAttr("style", "opacity:0.7;");
    } else {
      for (const path2 of this.picks) {
        const file = this.app.vault.getAbstractFileByPath(path2);
        const row = grid.createDiv();
        row.setAttr("style", [
          "display:flex",
          "align-items:center",
          "justify-content:space-between",
          "gap:8px",
          "padding:2px 0"
        ].join(";"));
        const nameLink = row.createEl("a", {
          text: (() => {
            if (file instanceof import_obsidian8.TFile) {
              const fm = this.app.metadataCache.getFileCache(file)?.frontmatter;
              return fm?.name || file.basename;
            }
            const base = path2.split("/").pop() || path2;
            return base.replace(/\.md$/, "");
          })(),
          href: "#"
        });
        const enablePreview = !!getToolkit(this.app)?.settings?.enableSidebarPreviews;
        if (enablePreview) {
          if (file instanceof import_obsidian8.TFile) {
            nameLink.classList.add("internal-link");
            nameLink.setAttr("data-href", file.path);
            nameLink.setAttr("href", file.path);
          }
        }
        nameLink.setAttr("style", "font-weight:600; text-decoration:none; color:var(--text-accent);");
        nameLink.addEventListener("click", (e) => {
          e.preventDefault();
          this.app.workspace.openLinkText(path2, "", false);
        });
        const rmBtn = row.createEl("span", { text: "\xD7" });
        rmBtn.setAttr("style", "cursor:pointer; font-size:1.2em; line-height:1;");
        rmBtn.addEventListener("click", async (e) => {
          e.preventDefault();
          this.picks = this.picks.filter((p) => p !== path2);
          const btn = this.addBtnByPath.get(path2);
          if (btn) {
            btn.disabled = false;
            btn.textContent = "\uFF0B";
          }
          this.renderPicks();
        });
      }
    }
    const actions = body.createDiv();
    actions.setAttr(
      "style",
      "display:flex;gap:8px;justify-content:flex-end;margin-top:4px;"
    );
    const clearBtn = actions.createEl("button", { text: "Clear" });
    clearBtn.setAttr("style", "opacity:0.9;");
    clearBtn.addEventListener("click", (e) => {
      e.preventDefault();
      this.picks = [];
      this.addBtnByPath.forEach((btn) => {
        if (!btn.isConnected) return;
        btn.disabled = false;
        btn.textContent = "\uFF0B";
      });
      this.renderPicks();
    });
    const copyBtn = actions.createEl("button", { text: "Copy Spellbook" });
    copyBtn.classList.add("mod-cta");
    copyBtn.toggleAttribute("disabled", this.picks.length === 0);
    copyBtn.addEventListener("click", async (e) => {
      e.preventDefault();
      if (!this.picks.length) return;
      const md = this.buildDataviewForPicks();
      try {
        await navigator.clipboard.writeText(md);
        new import_obsidian8.Notice("\u{1F4CB} Dataview table copied to clipboard.");
      } catch {
        const ta = body.createEl("textarea", { text: md });
        ta.setAttr("style", "width:100%;height:220px;margin-top:8px;");
        ta.select();
        new import_obsidian8.Notice("Clipboard blocked. Dataview shown below\u2014copy manually.");
      }
    });
  }
  async onOpen() {
    this.contentEl.empty();
    this.picks = [];
    this.addBtnByPath.clear();
    this.contentEl.createEl("h4", { text: "TEMPLATES" });
    const btnContainer = this.contentEl.createDiv();
    btnContainer.addClass("sb-btn");
    for (const { label, path: path2 } of TEMPLATE_BUTTONS) {
      const btn = new import_obsidian8.ButtonComponent(btnContainer).setButtonText(label).onClick(() => this.runTemplate(path2));
      btn.buttonEl.style.flex = "1";
      btn.buttonEl.style.minWidth = "120px";
    }
    this.contentEl.createEl("hr", { attr: { style: "margin: 12px 0;" } });
    const advDetails = this.contentEl.createEl("details", { attr: { open: "true" } });
    const advSummary = advDetails.createEl("summary", { text: "ADVENTURES" });
    advSummary.setAttr("style", "font-size: 1.3em; font-weight: 600; margin: 0.5em 0;");
    const advContainer = advDetails.createDiv({ attr: { style: "margin:8px 0;" } });
    new import_obsidian8.Setting(advContainer).setName("Filter by Adventure:").addDropdown((drop) => {
      const names = Array.from(new Set(
        this.app.vault.getFiles().filter((f) => f.path.startsWith("Adventures/")).map((f) => f.path.split("/")[1])
      ));
      drop.addOption("", "\u2014 pick one \u2014");
      names.forEach((n) => drop.addOption(n, n));
      drop.onChange(async (adv) => {
        advContainer.findAll(".vvunderlore-adventure-assets").forEach((el) => el.remove());
        const wrapper = advContainer.createDiv({ cls: "vvunderlore-adventure-assets" });
        if (!adv) return;
        const quick = wrapper.createDiv();
        quick.setAttr("style", "display:flex;justify-content:center;gap:20px;flex-wrap:wrap;margin:6px 0 10px;");
        const hubExactPath = `Adventures/${adv}/${adv} - Adventure Hub.md`;
        let hubFile = null;
        const exact = this.app.vault.getAbstractFileByPath(hubExactPath);
        if (exact instanceof import_obsidian8.TFile) {
          hubFile = exact;
        } else {
          hubFile = this.app.vault.getFiles().find(
            (f) => f.path.startsWith(`Adventures/${adv}/`) && f.parent?.path === `Adventures/${adv}` && f.basename.toLowerCase().includes("adventure hub")
          ) ?? null;
        }
        if (hubFile) {
          const hubLink = quick.createEl("a", { text: "Adventure Hub", href: "#" });
          hubLink.addClass("sb-adv-nav");
          hubLink.addEventListener("click", (e) => {
            e.preventDefault();
            this.app.workspace.openLinkText(hubFile.path, "", false);
          });
          const enablePreview = !!getToolkit(this.app)?.settings?.enableSidebarPreviews;
          if (enablePreview) {
            const p = hubFile.path;
            hubLink.classList.add("internal-link");
            hubLink.setAttr("data-href", p);
            hubLink.setAttr("href", p);
          }
        }
        const sessionDir = `Adventures/${adv}/Session Notes/`;
        const sessionFiles = this.app.vault.getFiles().filter((f) => f.path.startsWith(sessionDir));
        if (sessionFiles.length) {
          sessionFiles.sort((a, b) => b.stat.mtime - a.stat.mtime);
          const latest = sessionFiles[0];
          const sessionLink = quick.createEl("a", { text: "Most Recent Session", href: "#" });
          sessionLink.addClass("sb-adv-nav");
          sessionLink.addEventListener("click", (e) => {
            e.preventDefault();
            this.app.workspace.openLinkText(latest.path, "", false);
          });
          const enablePreview = !!getToolkit(this.app)?.settings?.enableSidebarPreviews;
          if (enablePreview) {
            const p = latest.path;
            sessionLink.classList.add("internal-link");
            sessionLink.setAttr("data-href", p);
            sessionLink.setAttr("href", p);
          }
        }
        const list = wrapper.createDiv();
        await this.showAdventureAssets(adv, list);
      });
    });
    this.contentEl.createEl("hr");
    await this.showSpellbookSection();
    this._rewirePreviews();
    this.registerEvent(
      this.app.workspace.on("vv:sidebar-previews-changed", (_data) => {
        this._rewirePreviews();
      })
    );
  }
  async onClose() {
    this.picks = [];
    this.addBtnByPath.clear();
    this.contentEl.empty();
  }
  async runTemplate(path2) {
    const tpl = this.app.vault.getAbstractFileByPath(path2);
    if (!(tpl instanceof import_obsidian8.TFile)) {
      new import_obsidian8.Notice(`\u26A0\uFE0F Template not found: ${path2}`);
      return;
    }
    const tpObs = this.app.plugins.getPlugin("templater-obsidian");
    const tpAlt = this.app.plugins.getPlugin("templater");
    const templater = tpObs || tpAlt;
    if (!templater) {
      new import_obsidian8.Notice("\u26A0\uFE0F Could not find Templater \u2013 is it enabled?");
      return;
    }
    const tpObj = templater.templater?.current_functions_object;
    if (!tpObj) {
      new import_obsidian8.Notice("\u26A0\uFE0F Templater API not ready\u2014add a startup template and restart.");
      return;
    }
    const rawSel = window.getSelection()?.toString().trim() || "";
    if (rawSel) {
      const srcView = this.app.workspace.getActiveViewOfType(import_obsidian8.MarkdownView);
      const selectedText = srcView?.editor.getSelection()?.trim() || rawSel;
      const base = selectedText.replace(/[\/:*?"<>|]/g, "").slice(0, 100);
      const TEMPLATE_DEST = {
        "newadventure_template.md": "Adventures",
        "playercharacter_template.md": "World/People/Player Characters/Active",
        "npc_template.md": "World/People/Non-Player Characters",
        "newitem_template.md": "Extras/Items",
        "newplace_template.md": "World/Places",
        "newcreature_template.md": "Bestiary"
      };
      const destPath = TEMPLATE_DEST[tpl["name"]] || tpl.parent.path;
      let destFolderRaw = this.app.vault.getAbstractFileByPath(destPath);
      if (!(destFolderRaw instanceof import_obsidian8.TFolder)) {
        try {
          await this.app.vault.createFolder(destPath);
        } catch {
        }
        destFolderRaw = this.app.vault.getAbstractFileByPath(destPath);
      }
      if (!(destFolderRaw instanceof import_obsidian8.TFolder)) {
        new import_obsidian8.Notice(`\u26A0\uFE0F Could not create folder: ${destPath}`);
        return;
      }
      const destFolder = destFolderRaw;
      let newFile;
      try {
        newFile = await tpObj.file.create_new(
          tpl,
          base,
          true,
          destFolder
        );
      } catch (e) {
        console.error("Templater.create_new failed", e);
        new import_obsidian8.Notice("\u274C Could not instantiate template.");
        return;
      }
      const stillExists = this.app.vault.getAbstractFileByPath(newFile.path) instanceof import_obsidian8.TFile;
      if (stillExists && srcView && selectedText) {
        const ed = srcView.editor;
        const current = ed.getValue();
        const link = `[[${base}]]`;
        if (current.includes(selectedText)) {
          const updated = current.replace(selectedText, link);
          await this.app.vault.modify(srcView.file, updated);
        } else {
          ed.replaceSelection(link);
        }
      }
      if (stillExists) {
        this.app.workspace.getLeaf(true).openFile(newFile);
      }
    } else {
      let wrapperFile;
      try {
        wrapperFile = await tpObj.file.create_new(
          tpl,
          void 0,
          false
        );
      } catch (e) {
        console.error("Error invoking Templater:", e);
        new import_obsidian8.Notice("\u274C Failed to run template; check console.");
        return;
      }
      try {
        await this.app.vault.delete(wrapperFile);
      } catch (e) {
        console.warn("Could not delete wrapper file:", e);
      }
    }
  }
  //-------+++++++++++ ADVENTURE FILTER
  async showAdventureAssets(adventureName, renderInto) {
    const prefix = `Adventures/${adventureName}/`;
    const files = this.app.vault.getFiles().filter((f) => f.path.startsWith(prefix));
    const linkedPaths = /* @__PURE__ */ new Set();
    for (const file of files) {
      const cache = this.app.metadataCache.getFileCache(file);
      (cache?.links || []).forEach((link) => {
        const dest = this.app.metadataCache.getFirstLinkpathDest(link.link, file.path);
        if (dest) linkedPaths.add(dest.path);
      });
    }
    renderInto.empty();
    if (linkedPaths.size === 0) {
      renderInto.createEl("div", { text: "No linked pages found." });
      return;
    }
    const overrides = [
      [/Non-Player Characters\//, "NPCs"],
      [/Player Characters\//, "Player Characters"],
      [/Factions\//, "Factions"],
      [/Compendium\/Bestiary\//, "Monsters"],
      [/Compendium\/Items\//, "Items"],
      [/Compendium\/Spells\//, "Spells"],
      [/World\/History\//, "History"],
      [/World\/Events\//, "Events"],
      [/Deities\//, "Deities"],
      [/World\/Places\//, "Places"]
    ];
    const groups = {};
    for (const fullPath of linkedPaths) {
      let section = "Other";
      for (const [pattern, name] of overrides) {
        if (pattern.test(fullPath)) {
          section = name;
          break;
        }
      }
      (groups[section] || (groups[section] = [])).push(fullPath);
    }
    for (const section of Object.keys(groups).sort()) {
      const details = renderInto.createEl("details", { attr: { open: "true" } });
      const summary = details.createEl("summary", { text: section });
      summary.addClass("sb-summary");
      const grid = details.createDiv();
      grid.addClass("sb-adv-grid");
      groups[section].sort((a, b) => {
        const aName = a.split("/").pop().replace(/\.md$/, "").toLowerCase();
        const bName = b.split("/").pop().replace(/\.md$/, "").toLowerCase();
        return aName.localeCompare(bName);
      }).forEach((path2) => {
        const name = path2.split("/").pop().replace(/\.md$/, "");
        const linkEl = grid.createEl("a", { text: name, href: "#" });
        linkEl.addClass("sb-adv-links");
        linkEl.addEventListener("click", () => {
          this.app.workspace.openLinkText(path2, "", false);
        });
        const enablePreview = !!getToolkit(this.app)?.settings?.enableSidebarPreviews;
        if (enablePreview) {
          linkEl.classList.add("internal-link");
          linkEl.setAttr("data-href", path2);
          linkEl.setAttr("href", path2);
        }
      });
    }
  }
  //---------_++++++++++ SPELLBOOK
  async showSpellbookSection() {
    const sbDetails = this.contentEl.createEl("details");
    sbDetails.createEl("summary", { text: "SPELLBOOK" }).setAttr("style", "font-size:1.3em;font-weight:600;margin:0.5em 0;");
    const container = sbDetails.createDiv({
      attr: { style: "display:flex;flex-direction:column;gap:8px;margin:8px 0;" }
    });
    const spellFiles = this.app.vault.getMarkdownFiles().filter((f) => f.path.startsWith("Compendium/Spells"));
    const levels = /* @__PURE__ */ new Set();
    const schools = /* @__PURE__ */ new Set();
    const damages = /* @__PURE__ */ new Set();
    for (const f of spellFiles) {
      const fm = this.app.metadataCache.getFileCache(f)?.frontmatter;
      if (!fm) continue;
      if (typeof fm.level === "number") levels.add(fm.level);
      if (typeof fm.school === "string") schools.add(fm.school);
      if (typeof fm.damage_type === "string") damages.add(fm.damage_type);
    }
    const filters = container.createDiv({
      attr: { style: "display:flex; gap:16px; margin-bottom:12px;" }
    });
    const makeCheckboxDropdown = (title, items) => {
      const wrapper = filters.createEl("details");
      wrapper.classList.add("sb-dd");
      const summary = wrapper.createEl("summary");
      summary.classList.add("sb-dd__button");
      summary.setText(`${title} (0)`);
      const panel = wrapper.createEl("div");
      panel.classList.add("sb-dd__panel");
      panel.addEventListener("click", (evt) => evt.stopPropagation());
      const inputs = [];
      for (const { value, label } of items) {
        const row = panel.createEl("label");
        row.classList.add("sb-dd__item");
        const cb = row.createEl("input", { attr: { type: "checkbox", value } });
        inputs.push(cb);
        row.createEl("span", { text: label });
        cb.addEventListener("change", () => {
          const count = inputs.filter((i) => i.checked).length;
          summary.setText(`${title} (${count})`);
        });
      }
      return {
        wrapper,
        getSelected: () => inputs.filter((i) => i.checked).map((i) => i.value)
      };
    };
    const levelItems = Array.from(levels).sort((a, b) => a - b).map((lvl) => ({ value: `${lvl}`, label: lvl === 0 ? "Cantrip" : `Level ${lvl}` }));
    const schoolItems = Array.from(schools).sort().map((sch) => ({ value: sch, label: sch }));
    const damageItems = Array.from(damages).sort().map((dmg) => ({ value: dmg, label: dmg }));
    const { wrapper: lvlDD, getSelected: getLevels } = makeCheckboxDropdown("Levels", levelItems);
    const { wrapper: schoolDD, getSelected: getSchools } = makeCheckboxDropdown("Schools", schoolItems);
    const { wrapper: dmgDD, getSelected: getDamages } = makeCheckboxDropdown("Damage", damageItems);
    document.addEventListener("click", (evt) => {
      for (const dd of [lvlDD, schoolDD, dmgDD]) {
        if (dd.open && !dd.contains(evt.target)) dd.open = false;
      }
    });
    const btnWrap = container.createDiv({
      attr: { style: "display:flex; justify-content:center; margin-bottom:8px;" }
    });
    const goBtn = btnWrap.createEl("button", { text: "Go", cls: "mod-cta" });
    goBtn.setAttr("style", "flex:1;");
    goBtn.addEventListener("click", () => {
      this.renderTable(getLevels(), getSchools(), getDamages());
    });
    const clearBtn = btnWrap.createEl("button", { text: "Clear Filters and Reset" });
    clearBtn.setAttr("style", "flex:1; margin-left:8px;");
    clearBtn.addEventListener("click", () => {
      [
        [lvlDD, "Levels"],
        [schoolDD, "Schools"],
        [dmgDD, "Damage"]
      ].forEach(([dd, title]) => {
        dd.querySelectorAll("input[type=checkbox]").forEach((cb) => cb.checked = false);
        dd.querySelector("summary")?.setText(`${title} (0)`);
        dd.open = false;
      });
      const tableDiv = container.find("#spellbook-table");
      if (tableDiv) tableDiv.empty();
    });
    container.createEl("div", { attr: { id: "spellbook-picks" } });
    container.createEl("div", { attr: { id: "spellbook-table" } });
    this.renderPicks();
  }
  renderTable(selectedLevels, selectedSchools, selectedDamages) {
    const tableDiv = this.containerEl.find("#spellbook-table");
    if (!tableDiv) return;
    tableDiv.replaceChildren();
    this.addBtnByPath.clear();
    const allSpells = this.app.vault.getMarkdownFiles().filter((f) => f.path.startsWith("Compendium/Spells"));
    const filtered = allSpells.filter((f) => {
      const fm = this.app.metadataCache.getFileCache(f)?.frontmatter;
      if (!fm) return false;
      const lvl = String(fm.level);
      const sch = String(fm.school);
      const dmgRaw = typeof fm.damage_type === "string" ? fm.damage_type : "";
      return (!selectedLevels.length || selectedLevels.includes(lvl)) && (!selectedSchools.length || selectedSchools.includes(sch)) && (!selectedDamages.length || selectedDamages.includes(dmgRaw));
    });
    filtered.sort((a, b) => {
      const fa = this.app.metadataCache.getFileCache(a).frontmatter;
      const fb = this.app.metadataCache.getFileCache(b).frontmatter;
      let va, vb;
      switch (this.spellSortKey) {
        case "level":
          va = fa.level ?? 0;
          break;
        case "school":
          va = String(fa.school ?? "").toLowerCase();
          break;
        case "damage":
          va = String(fa.damage_type ?? "").toLowerCase();
          break;
        default:
          va = String(fa.name ?? a.basename).toLowerCase();
      }
      switch (this.spellSortKey) {
        case "level":
          vb = fb.level ?? 0;
          break;
        case "school":
          vb = String(fb.school ?? "").toLowerCase();
          break;
        case "damage":
          vb = String(fb.damage_type ?? "").toLowerCase();
          break;
        default:
          vb = String(fb.name ?? b.basename).toLowerCase();
      }
      if (va < vb) return -1 * this.spellSortDir;
      if (va > vb) return 1 * this.spellSortDir;
      return 0;
    });
    const table = tableDiv.createEl("table");
    table.setAttr("style", "width:100%;border-collapse:collapse;");
    const headerRow = table.createEl("tr");
    headerRow.setAttr("style", "display:flex;");
    const actTh = headerRow.createEl("th");
    actTh.setAttr("style", [
      "flex:0 0 56px",
      "padding:4px",
      "text-align:left"
    ].join(";"));
    const columns = [
      { label: "Name", key: "name", flex: 2 },
      { label: "Lvl", key: "level", flex: 1 },
      { label: "School", key: "school", flex: 1 },
      { label: "Dmg Type", key: "damage", flex: 1 }
    ];
    for (const { label, key, flex } of columns) {
      const th = headerRow.createEl("th");
      th.setText(label);
      th.setAttr(
        "style",
        [
          `flex:${flex}`,
          "padding:4px",
          key === "name" ? "text-align:left" : "text-align:center",
          "cursor:pointer"
        ].join(";")
      );
      th.addEventListener("click", () => {
        if (this.spellSortKey === key) {
          this.spellSortDir = this.spellSortDir === 1 ? -1 : 1;
        } else {
          this.spellSortKey = key;
          this.spellSortDir = 1;
        }
        this.renderTable(selectedLevels, selectedSchools, selectedDamages);
      });
    }
    let found = 0;
    for (const f of filtered) {
      const fm = this.app.metadataCache.getFileCache(f).frontmatter;
      const lvl = String(fm.level);
      const sch = String(fm.school);
      const dmgRaw = typeof fm.damage_type === "string" ? fm.damage_type : "";
      const row = table.createEl("tr");
      row.setAttr("style", "display:flex;");
      const actTd = row.createEl("td");
      actTd.setAttr(
        "style",
        "flex:0 0 28px; padding:0; display:flex; align-items:center; justify-content:center;"
      );
      const addBtn = actTd.createEl("button", { text: "\uFF0B" });
      addBtn.addClass("sb-spelladd-btn");
      this.addBtnByPath.set(f.path, addBtn);
      if (this.picks.includes(f.path)) {
        addBtn.textContent = "\u2713";
        addBtn.disabled = true;
      }
      addBtn.addEventListener("click", (e) => {
        e.preventDefault();
        if (this.picks.includes(f.path)) {
          new import_obsidian8.Notice("Already in Selected Spells.");
          return;
        }
        this.picks.push(f.path);
        addBtn.textContent = "\u2713";
        addBtn.disabled = true;
        this.renderPicks();
      });
      const nameTd = row.createEl("td");
      nameTd.setAttr("style", "flex:2;padding:4px;");
      const link = nameTd.createEl("a", { attr: { href: "#" } });
      link.setText(fm.name || f.basename);
      const enablePreview = !!getToolkit(this.app)?.settings?.enableSidebarPreviews;
      if (enablePreview) {
        link.classList.add("internal-link");
        link.setAttr("data-href", f.path);
        link.setAttr("href", f.path);
      }
      link.addEventListener("click", (e) => {
        e.preventDefault();
        this.app.workspace.openLinkText(f.path, "", false);
      });
      const lvlTd = row.createEl("td");
      lvlTd.setAttr("style", "flex:1; display:flex; align-items:center; justify-content:center; padding:4px;");
      lvlTd.createSpan({ text: lvl === "0" ? "Cantrip" : lvl });
      const schTd = row.createEl("td");
      schTd.setAttr("style", "flex:1; display:flex; align-items:center; justify-content:center; padding:4px;");
      schTd.createSpan({ text: SCHOOL_ABBR[sch] ?? sch.slice(0, 3) });
      const dmgTd = row.createEl("td");
      dmgTd.setAttr("style", "flex:1; display:flex; align-items:center; justify-content:center; padding:4px;");
      dmgTd.createSpan({ text: dmgRaw ? DAMAGE_ABBR[dmgRaw] ?? dmgRaw.slice(0, 3) : "\u2014" });
      found++;
    }
    if (!found) {
      tableDiv.createEl("p").setText("No spells match your filter criteria.");
    }
  }
};

// src/sidebar/sb-gameplay.ts
var import_obsidian9 = require("obsidian");
var GAMEPLAY_VIEW_TYPE = "vvunderlore-gameplay";
function getToolkit2(app) {
  return app.plugins.getPlugin("vvunderlore-toolkit") || app.plugins.plugins?.["vvunderlore-toolkit"];
}
var ALIGN_ABBR = {
  "lawful good": "LG",
  "neutral good": "NG",
  "chaotic good": "CG",
  "lawful neutral": "LN",
  "true neutral": "N",
  "neutral": "N",
  "chaotic neutral": "CN",
  "lawful evil": "LE",
  "neutral evil": "NE",
  "chaotic evil": "CE"
};
var ABILITY_ABBR = {
  strength: "STR",
  dexterity: "DEX",
  constitution: "CON",
  intelligence: "INT",
  wisdom: "WIS",
  charisma: "CHA"
};
var possessive = (n) => {
  const t = (n ?? "").trim();
  if (!t) return "";
  return /s$/i.test(t) ? `${t}'` : `${t}'s`;
};
function sanitizeSpeed(raw) {
  if (!raw) return "\u2014";
  const lower = raw.toLowerCase();
  const walkMatch = lower.match(/walk\s+(\d+)/);
  const walk = walkMatch ? walkMatch[1] : "";
  const flyMatch = lower.match(/fly\s+(\d+)/);
  const fly = flyMatch ? flyMatch[1] : "";
  if (walk && fly) return `${walk} / ${fly}`;
  if (walk) return walk;
  if (fly) return fly;
  return "\u2014";
}
var EditListModal = class extends import_obsidian9.Modal {
  constructor(app, opts) {
    super(app);
    this.hoverIndex = -1;
    this.filtered = [];
    this.values = [...opts.initial || []];
    this._candidates = Array.from(
      new Set((opts.candidates || []).map((s) => this.ensureWikilink(s)))
    ).sort();
    this.opts = opts;
  }
  ensureWikilink(s) {
    let t = (s ?? "").toString().trim();
    if (!t) return "";
    try {
      const j = JSON.parse(t);
      if (typeof j === "string") t = j;
    } catch {
    }
    t = t.replace(/^\[+\s*|\s*\]+$/g, "");
    t = t.split("|")[0].split("#")[0].trim();
    if (!t.startsWith("[[")) t = `[[${t}]]`;
    return t;
  }
  get candidates() {
    return this._candidates;
  }
  // ── helpers: link parsing / labels ───────────────────────────────────
  labelFor(s) {
    const m = String(s).match(/\[\[([^|\]]+)(?:\|([^\]]+))?\]\]/);
    const label = (m ? m[2] || m[1] : s).split("/").pop().replace(/\.md$/, "");
    return label.trim();
  }
  parseLinkish(s) {
    const m = String(s).match(/\[\[([^|\]]+)(?:\|([^\]]+))?\]\]/);
    return m ? { path: m[1], label: this.labelFor(s) } : { label: this.labelFor(s) };
  }
  keyFor(s) {
    return this.labelFor(s).toLowerCase();
  }
  matchCandidateByLabel(label) {
    const low = label.trim().toLowerCase();
    const hit = this.candidates.find((c) => this.labelFor(c).toLowerCase() === low);
    return hit ?? null;
  }
  // ── modal lifecycle ──────────────────────────────────────────────────
  onOpen() {
    const { contentEl } = this;
    this.modalEl.addClass("vv-fixed-modal");
    this.modalEl.style.width = "520px";
    this.modalEl.style.maxWidth = "96vw";
    this.modalEl.style.maxHeight = "92vh";
    contentEl.createEl("h2", { text: this.opts.title });
    const row = contentEl.createDiv({ cls: "vv-field-row" });
    this.inputWrap = row.createDiv({ cls: "vv-searchwrap" });
    this.inputEl = this.inputWrap.createEl("input", {
      type: "text",
      placeholder: this.opts.placeholder || "Search\u2026",
      cls: "prompt-input"
    });
    this.addBtn = row.createEl("button", { text: "Add", cls: "mod-cta vv-addbtn" });
    this.suggestWrap = this.inputWrap.createDiv({ cls: "vv-suggest", attr: { "aria-hidden": "true" } });
    this.listWrap = contentEl.createDiv({ cls: "vv-list-wrap" });
    this.paintList();
    const actions = contentEl.createDiv({ cls: "vv-actions" });
    const save = actions.createEl("button", { text: "Save", cls: "mod-cta" });
    const cancel = actions.createEl("button", { text: "Cancel", cls: "vv-cancel" });
    const commitCurrent = () => {
      const raw = this.inputEl.value.trim();
      if (!raw) return;
      this.addValue(raw);
    };
    this.inputEl.addEventListener("input", () => this.showSuggestions(this.inputEl.value));
    this.inputEl.addEventListener("keydown", (e) => {
      if (e.key === "Enter") {
        e.preventDefault();
        if (this.hoverIndex >= 0 && this.filtered[this.hoverIndex]) {
          this.addValue(this.labelFor(this.filtered[this.hoverIndex]));
        } else {
          commitCurrent();
        }
      }
      if (e.key === "ArrowDown") {
        e.preventDefault();
        this.moveHover(1);
      }
      if (e.key === "ArrowUp") {
        e.preventDefault();
        this.moveHover(-1);
      }
      if (e.key === "Escape") {
        this.hideSuggestions();
      }
    });
    this.addBtn.addEventListener("click", commitCurrent);
    save.addEventListener("click", async () => {
      await this.opts.onSave?.([...this.values]);
      this.close();
    });
    cancel.addEventListener("click", () => this.close());
    setTimeout(() => this.inputEl.focus(), 0);
  }
  onClose() {
    this.modalEl.classList.remove("vv-fixed-modal");
    this.modalEl.style.removeProperty("width");
    this.modalEl.style.removeProperty("max-width");
    this.modalEl.style.removeProperty("max-height");
    this.contentEl.empty();
  }
  // ── list ops ─────────────────────────────────────────────────────────
  addValue(raw) {
    const match = this.matchCandidateByLabel(this.labelFor(raw));
    const v = match ?? raw;
    if (this.values.some((x) => this.keyFor(x) === this.keyFor(v))) return;
    this.values.push(v);
    this.values.sort((a, b) => this.labelFor(a).localeCompare(this.labelFor(b)));
    this.paintList();
    this.inputEl.value = "";
    this.hideSuggestions();
    this.inputEl.focus();
  }
  removeValue(v) {
    this.values = this.values.filter((x) => x !== v);
    this.paintList();
  }
  paintList() {
    this.listWrap.empty();
    if (!this.values.length) {
      this.listWrap.createDiv({ cls: "vv-list-empty", text: "Nothing added yet." });
      return;
    }
    const ul = this.listWrap.createEl("ul", { cls: "vv-list" });
    for (const v of this.values) {
      const li = ul.createEl("li", { cls: "vv-li" });
      const rm = li.createEl("button", {
        cls: "vv-li-x",
        text: "\xD7",
        attr: { "aria-label": `Remove ${v}` }
      });
      rm.addEventListener("click", () => this.removeValue(v));
      li.createSpan({ cls: "vv-li-text", text: String(v).replace(/^\[\[|\]\]$/g, "") });
    }
  }
  // ── suggestions ──────────────────────────────────────────────────────
  showSuggestions(q) {
    const needle = q.trim().toLowerCase();
    if (!needle) return this.hideSuggestions();
    this.filtered = this.candidates.filter((c) => c.toLowerCase().includes(needle) && !this.values.includes(c)).slice(0, 50);
    this.suggestWrap.empty();
    if (!this.filtered.length) return this.hideSuggestions();
    const modalRect = this.modalEl.getBoundingClientRect();
    const wrapRect = this.inputWrap.getBoundingClientRect();
    const PAD = 12;
    const spaceBelow = Math.floor(modalRect.bottom - wrapRect.bottom - PAD);
    const spaceAbove = Math.floor(wrapRect.top - modalRect.top - PAD);
    const dropUp = spaceBelow < 220 && spaceAbove > spaceBelow;
    const available = dropUp ? spaceAbove : spaceBelow;
    const maxH = Math.max(140, Math.min(360, available));
    this.suggestWrap.classList.toggle("drop-up", dropUp);
    this.suggestWrap.style.maxHeight = `${maxH}px`;
    this.suggestWrap.setAttr("aria-hidden", "false");
    this.suggestWrap.addClass("is-open");
    this.filtered.forEach((opt, i) => {
      const li = this.suggestWrap.createDiv({
        cls: "vv-suggest-item",
        text: opt.replace(/^\[\[|\]\]$/g, "")
      });
      li.addEventListener("mouseenter", () => this.setHover(i));
      li.addEventListener("mouseleave", () => this.setHover(-1));
      li.addEventListener("mousedown", (e) => {
        e.preventDefault();
        this.addValue(opt);
      });
    });
  }
  hideSuggestions() {
    this.suggestWrap.empty();
    this.suggestWrap.setAttr("aria-hidden", "true");
    this.suggestWrap.toggleClass("is-open", false);
    this.suggestWrap.classList.remove("drop-up");
    this.suggestWrap.style.maxHeight = "";
    this.filtered = [];
    this.hoverIndex = -1;
  }
  setHover(i) {
    this.hoverIndex = i;
    const kids = Array.from(this.suggestWrap.children);
    kids.forEach((el, idx) => el.toggleClass("is-hover", idx === i));
  }
  moveHover(delta) {
    if (!this.filtered.length) return;
    this.hoverIndex = (this.hoverIndex + delta + this.filtered.length) % this.filtered.length;
    this.setHover(this.hoverIndex);
  }
};
var GameplaySidebarView = class extends import_obsidian9.ItemView {
  constructor(leaf) {
    super(leaf);
    this.partyTableWrap = null;
    this.detailsWrap = null;
    this.detailsOpenPath = null;
    this.tableRefreshTimer = null;
    this.queueTable = () => {
      if (this.tableRefreshTimer) window.clearTimeout(this.tableRefreshTimer);
      this.tableRefreshTimer = window.setTimeout(async () => {
        this.tableRefreshTimer = null;
        await this.renderTable();
      }, 120);
    };
    this.detailRefreshTimer = null;
    this.queueDetail = () => {
      if (this.detailRefreshTimer) window.clearTimeout(this.detailRefreshTimer);
      this.detailRefreshTimer = window.setTimeout(async () => {
        this.detailRefreshTimer = null;
        const p = this.detailsOpenPath;
        if (!p) return;
        const f = this.app.vault.getAbstractFileByPath(p);
        if (f instanceof import_obsidian9.TFile) await this.showDetails(f);
      }, 120);
    };
    this.isSelectedPath = (path2) => {
      const plugin = getToolkit2(this.app);
      const s = plugin?.settings?.gameplay || {};
      const list = s.selectedPlayers || [];
      return list.includes(path2);
    };
  }
  getViewType() {
    return GAMEPLAY_VIEW_TYPE;
  }
  getDisplayText() {
    return "Gameplay";
  }
  getIcon() {
    return "gameplay";
  }
  async saveFrontmatterNumber(file, key, value) {
    const raw = await this.app.vault.read(file);
    const fmMatch = raw.match(/^---\r?\n([\s\S]*?)\r?\n---\r?\n?/);
    if (!fmMatch) {
      const yaml = `---
${key}: ${value}
---
`;
      await this.app.vault.modify(file, yaml + raw);
      return;
    }
    const full = fmMatch[0];
    const body = fmMatch[1];
    const hasKey = new RegExp(`^${key}\\s*:`, "mi").test(body);
    let newBody;
    if (hasKey) {
      newBody = body.replace(new RegExp(`^${key}\\s*:\\s*.*$`, "mi"), `${key}: ${value}`);
    } else {
      newBody = body.replace(/\s*$/, `
${key}: ${value}
`);
    }
    const updated = raw.replace(full, `---
${newBody.replace(/\r?\n$/, "")}
---
`);
    await this.app.vault.modify(file, updated);
  }
  collectCandidates(folder, asWikilinks = true) {
    const root = folder.replace(/\/+$/, "") + "/";
    return this.app.vault.getMarkdownFiles().filter((f) => f.path.startsWith(root)).map((f) => asWikilinks ? `[[${f.basename}]]` : f.basename);
  }
  // Merge candidates from multiple folders, de-dupe, sort
  collectFromFolders(folders, asWikilinks = true) {
    return Array.from(
      new Set(folders.flatMap((f) => this.collectCandidates(f, asWikilinks)))
    ).sort((a, b) => a.localeCompare(b));
  }
  refreshDetailPlaceholder() {
    const wrap = this.detailsWrap;
    const hasCard = !!wrap.querySelector(".vv-gp-card");
    const empty = wrap.querySelector(".vv-gp-detail-empty");
    if (hasCard && empty) empty.remove();
    if (!hasCard && !empty) {
      wrap.createDiv({ cls: "vv-gp-detail-empty", text: "Click a name to see details\u2026" });
    }
  }
  getActiveFolderPrefix() {
    const plugin = getToolkit2(this.app);
    const s = plugin?.settings?.gameplay || {};
    return (s.activeFolder || "World/People/Player Characters/Active").replace(/\/+$/, "") + "/";
  }
  async showDetails(file) {
    this.detailsOpenPath = file.path;
    const wrap = this.detailsWrap;
    {
      const cards = Array.from(wrap.querySelectorAll(".vv-gp-card"));
      const pinnedForPath = cards.find((el) => el.dataset.pinned === "true" && el.dataset.path === file.path);
      if (pinnedForPath) {
        this.refreshDetailPlaceholder();
        pinnedForPath.scrollIntoView({ block: "nearest", behavior: "smooth" });
        return;
      }
    }
    {
      const existingUnpinned = wrap.querySelector('.vv-gp-card[data-pinned="false"]');
      if (existingUnpinned) existingUnpinned.remove();
    }
    const card = document.createElement("div");
    card.addClass("vv-gp-card");
    card.dataset.pinned = "false";
    card.dataset.path = file.path;
    const placeCard = (c) => {
      const kids = Array.from(wrap.children);
      const cards = kids.filter((el) => el.classList.contains("vv-gp-card"));
      const pinned = cards.filter((el) => el.dataset.pinned === "true");
      if (pinned.length) {
        const after = pinned[pinned.length - 1];
        wrap.insertBefore(c, after.nextSibling);
      } else {
        wrap.insertBefore(c, wrap.firstChild);
      }
    };
    const reposition = (c) => {
      if (c.parentElement === wrap) wrap.removeChild(c);
      placeCard(c);
    };
    placeCard(card);
    this.refreshDetailPlaceholder();
    const controls = card.createDiv({ cls: "vv-gp-detail-controls" });
    const pinBtn = controls.createEl("button", { text: "pin", cls: "vv-gp-btn" });
    pinBtn.title = "Pin card";
    pinBtn.addEventListener("click", () => {
      const pinned = card.dataset.pinned === "true";
      card.dataset.pinned = (!pinned).toString();
      pinBtn.textContent = !pinned ? "unpin" : "pin";
      pinBtn.title = !pinned ? "Unpin card" : "Pin card";
      reposition(card);
    });
    const closeBtn = controls.createEl("button", { text: "\u2715", cls: "vv-gp-btn" });
    closeBtn.title = "Close card";
    closeBtn.addEventListener("click", () => {
      card.remove();
      this.refreshDetailPlaceholder();
    });
    const box = card;
    const fm = this.app.metadataCache.getFileCache(file)?.frontmatter || {};
    const name = fm["Name"] ?? file.basename;
    const header = box.createDiv({ cls: "vv-gp-detail-header" });
    const titleEl = header.createEl("h2", { text: name });
    titleEl.classList.add("vv-gp-detail-title");
    const linkTo = (target, label) => {
      const dest = this.app.metadataCache.getFirstLinkpathDest(target, file.path);
      const text = (label ?? target.split("/").pop().replace(/\.md$/, "")).trim();
      const plugin2 = getToolkit2(this.app);
      const enablePreview = !!plugin2?.settings?.enableSidebarPreviews;
      return dest ? `<a class="vv-link${enablePreview ? " internal-link" : ""}" href="${dest.path}"${enablePreview ? ` data-href="${dest.path}"` : ""}>${text}</a>` : text;
    };
    const parseMaybeLink = (val) => {
      if (!val) return "N/A";
      if (typeof val === "object" && val.path) {
        const p = String(val.path);
        return linkTo(p);
      }
      const s = String(val);
      const m = s.match(/\[\[([^|\]]+)(?:\|([^\]]+))?\]\]/);
      if (m) return linkTo(m[1], m[2]);
      return s;
    };
    const arrToList = (v) => {
      if (Array.isArray(v)) return v.map((x) => String(x));
      if (typeof v === "string") return v.split(",").map((x) => x.trim()).filter(Boolean);
      return [];
    };
    const species = parseMaybeLink(fm["species"]);
    const race = parseMaybeLink(fm["race"]);
    const klass = parseMaybeLink(fm["class"]);
    const subclass = parseMaybeLink(fm["subclass"]);
    const skillProfs = arrToList(fm["skills"]);
    const stProfs = arrToList(fm["saving_throws"]).map((s) => {
      const key = s.toLowerCase().trim();
      return ABILITY_ABBR[key] ?? s;
    });
    const joinComma = (items) => {
      const xs = items.filter(Boolean);
      return xs.length ? xs.join(", ") : "\u2014";
    };
    const profsHtml = joinComma(skillProfs);
    const stHtml = joinComma(stProfs);
    const kv = box.createDiv({ cls: "vv-gp-kvlist" });
    const makeKVRow = (label, html) => {
      const row = kv.createDiv({ cls: "vv-gp-kvrow" });
      row.createEl("div", { cls: "vv-gp-kvlabel", text: label });
      const val = row.createDiv({ cls: "vv-gp-kvvalue" });
      val.innerHTML = html;
    };
    makeKVRow("Species", species);
    makeKVRow("Race", race);
    makeKVRow("Class", klass);
    makeKVRow("Subclass", subclass);
    makeKVRow("Proficiencies", profsHtml);
    makeKVRow("Saving Throws", stHtml);
    const languagesArr = arrToList(fm["languages"]);
    const languagesHtml = languagesArr.length ? joinComma(languagesArr) : "\u2014";
    makeKVRow("Languages", languagesHtml);
    {
      const sec = box.createDiv({ cls: "vv-gp-detail-section" });
      const h = sec.createEl("h4", { text: "Key Items" });
      const edit = h.createSpan({ cls: "vv-gp-edit-link", text: "edit" });
      const list = sec.createEl("div", { cls: "vv-gp-detail-inline" });
      const read = () => this.readFmStringList(fm, ["key_items", "Key Items"]);
      const paint = (arr) => {
        list.empty();
        list.innerHTML = (arr.length ? arr : ["\u2014"]).map((s) => {
          const m = String(s).match(/\[\[([^|\]]+)(?:\|([^\]]+))?\]\]/);
          return m ? linkTo(m[1], m[2]) : s;
        }).join(" , ");
      };
      paint(read());
      edit.addEventListener("click", () => {
        const candidates = this.collectFromFolders(
          ["Compendium/Items", "Compendium/Magic Items"],
          true
        );
        new EditListModal(this.app, {
          title: `${possessive(name)} Key Items`,
          initial: read(),
          candidates,
          placeholder: "Search items\u2026",
          onSave: async (newList) => {
            await this.writeFmStringList(file, "key_items", newList);
            const newFm = this.app.metadataCache.getFileCache(file)?.frontmatter || {};
            paint(this.readFmStringList(newFm, ["key_items", "Key Items"]));
          }
        }).open();
      });
    }
    {
      const sec = box.createDiv({ cls: "vv-gp-detail-section" });
      const h = sec.createEl("h4", { text: "Spells" });
      const edit = h.createSpan({ cls: "vv-gp-edit-link", text: "edit" });
      const get = () => this.readFmStringList(fm, ["Spells", "spells"]);
      const tableWrap = sec.createDiv();
      const paintTable = (names) => {
        tableWrap.empty();
        const st = tableWrap.createEl("table", { cls: "vv-gp-spell-table" });
        const thead = st.createEl("thead").createEl("tr");
        ["Spell", "Lvl", "Cast", "Range", "Save"].forEach((h2) => thead.createEl("th", { text: h2 }));
        const tbody = st.createEl("tbody");
        const rows = [];
        const normalize = (raw) => {
          const m = raw.match(/\[\[([^|\]]+)(?:\|([^\]]+))?\]\]/);
          if (m) return { linkText: m[1], label: m[2] };
          return { linkText: raw };
        };
        for (const s of names) {
          const n = normalize(String(s));
          let dest = this.app.metadataCache.getFirstLinkpathDest(n.linkText, file.path);
          if (!dest && !n.linkText.includes("/")) {
            dest = this.app.metadataCache.getFirstLinkpathDest(`Compendium/Spells/${n.linkText}`, file.path);
          }
          const displayName = (n.label ?? n.linkText).split("/").pop().replace(/\.md$/, "").trim();
          const plugin2 = getToolkit2(this.app);
          const enablePreview = !!plugin2?.settings?.enableSidebarPreviews;
          const nameHtml = dest ? `<a class="vv-link${enablePreview ? " internal-link" : ""}" href="${dest.path}"${enablePreview ? ` data-href="${dest.path}"` : ""}>${displayName}</a>` : displayName;
          const fmSpell = dest ? this.app.metadataCache.getFileCache(dest)?.frontmatter || {} : {};
          const lvlRaw = fmSpell["level"];
          const lvlNum = Number(lvlRaw);
          const level = Number.isFinite(lvlNum) ? lvlNum : lvlRaw ?? "\u2014";
          rows.push({
            nameHtml,
            level,
            cast: String(fmSpell["casting_time"] ?? "\u2014"),
            range: String(fmSpell["Range"] ?? "\u2014"),
            save: (fmSpell["saving_throws"] ?? "").toString().trim() || "\u2014"
          });
        }
        rows.sort((a, b) => {
          const an = typeof a.level === "number" ? a.level : 99;
          const bn = typeof b.level === "number" ? b.level : 99;
          return an - bn;
        });
        for (const r of rows) {
          const tr = tbody.createEl("tr");
          const nameTd = tr.createEl("td");
          nameTd.innerHTML = r.nameHtml;
          tr.createEl("td", { text: String(r.level) });
          tr.createEl("td", { text: r.cast });
          tr.createEl("td", { text: r.range });
          tr.createEl("td", { text: r.save });
        }
      };
      const openSpellEditor = (initial) => {
        const candidates = this.collectFromFolders(["Compendium/Spells", "Spells"], true);
        new EditListModal(this.app, {
          title: `${possessive(name)} Spells`,
          initial,
          candidates,
          placeholder: "Search spells\u2026",
          onSave: async (newList) => {
            await this.writeFmStringList(file, "Spells", newList);
            const refreshed = this.app.metadataCache.getFileCache(file)?.frontmatter || {};
            paintTable(this.readFmStringList(refreshed, ["Spells", "spells"]));
          }
        }).open();
      };
      paintTable(get());
      edit.addEventListener("click", () => openSpellEditor(get()));
    }
    card.addEventListener("click", (e) => {
      const t = e.target;
      const a = t?.closest("a.vv-link");
      if (!a) return;
      e.preventDefault();
      const target = a.getAttribute("href");
      if (!target) return;
      this.app.workspace.openLinkText(target, file.path, true);
    });
    const plugin = getToolkit2(this.app);
    const pagePreview = this.app.internalPlugins?.getPluginById?.("page-preview")?.instance;
    if (pagePreview?.onLinkHover) {
      card.addEventListener("mousemove", (ev) => {
        const t = ev.target;
        const a = t?.closest("a.vv-link");
        if (!a) return;
        const linkText = a.getAttribute("data-href") || a.getAttribute("href");
        if (!linkText) return;
        if (plugin.settings.enableSidebarPreviews) {
          pagePreview.onLinkHover(ev, a, linkText, file.path);
        }
      });
    }
  }
  startLiveUpdates() {
    this.registerEvent(
      this.app.metadataCache.on("changed", (file) => {
        if (file instanceof import_obsidian9.TFile && this.isSelectedPath(file.path)) {
          this.queueTable();
        }
        if (this.detailsOpenPath) this.queueDetail();
      })
    );
    this.registerEvent(
      this.app.vault.on("modify", async (file) => {
        if (!(file instanceof import_obsidian9.TFile)) return;
        if (file.extension !== "md") return;
        if (file.path.startsWith(this.getActiveFolderPrefix())) {
          await this.renderAddRow();
        }
      })
    );
    this.registerEvent(
      this.app.metadataCache.on("resolved", () => {
        this.queueTable();
      })
    );
    this.registerEvent(
      this.app.vault.on("modify", (file) => {
        if (file instanceof import_obsidian9.TFile && this.isSelectedPath(file.path)) {
          this.queueTable();
        }
      })
    );
    this.registerEvent(
      this.app.vault.on("create", async (file) => {
        if (!(file instanceof import_obsidian9.TFile)) return;
        if (file.extension !== "md") return;
        if (file.path.startsWith(this.getActiveFolderPrefix())) {
          await this.renderAddRow();
        }
      })
    );
    this.registerEvent(
      this.app.vault.on("rename", async (file) => {
        if (!(file instanceof import_obsidian9.TFile)) return;
        await this.renderAddRow();
      })
    );
    this.registerEvent(
      this.app.vault.on("delete", async (file) => {
        if (!(file instanceof import_obsidian9.TFile)) return;
        await this.renderAddRow();
      })
    );
    this.registerEvent(
      this.app.vault.on("rename", async (file, oldPath) => {
        if (!(file instanceof import_obsidian9.TFile)) return;
        const plugin = getToolkit2(this.app);
        const s = plugin?.settings?.gameplay || {};
        const list = s.selectedPlayers || [];
        const idx = list.indexOf(oldPath);
        if (idx !== -1) {
          list[idx] = file.path;
          plugin.settings.gameplay.selectedPlayers = list;
          await plugin.saveSettings();
          this.queueTable();
        }
      })
    );
    this.registerEvent(
      this.app.vault.on("delete", async (file) => {
        if (!(file instanceof import_obsidian9.TFile)) return;
        const plugin = getToolkit2(this.app);
        const s = plugin?.settings?.gameplay || {};
        const list = s.selectedPlayers || [];
        if (list.includes(file.path)) {
          plugin.settings.gameplay.selectedPlayers = list.filter((p) => p !== file.path);
          await plugin.saveSettings();
          this.queueTable();
        }
      })
    );
  }
  // Read a string-array frontmatter field regardless of key casing/shape
  readFmStringList(fm, keys) {
    for (const k of keys) {
      const v = fm?.[k];
      if (!v) continue;
      if (Array.isArray(v)) return v.map((x) => String(x));
      if (typeof v === "string") {
        try {
          const j = JSON.parse(v);
          if (Array.isArray(j)) return j.map(String);
        } catch {
        }
        return v.split(",").map((s) => s.trim()).filter(Boolean);
      }
    }
    return [];
  }
  // Write array back to a SINGLE canonical key (creates if missing)
  async writeFmStringList(file, key, list) {
    await this.app.fileManager.processFrontMatter(file, (fm) => {
      fm[key] = list;
    });
  }
  async onOpen() {
    const cont = this.containerEl.children[1];
    cont.empty();
    const party = cont.createEl("details", { attr: { open: "true" } });
    party.addClass("vv-gp-root");
    const summary = party.createEl("summary", { text: "Party Overview" });
    summary.addClass("vv-gp-summary");
    const desc = party.createDiv({ cls: "vv-gp-desc" });
    desc.setText("Add players to the list below to see their general stats. Click a name for expanded details.");
    const body = party.createDiv({ cls: "vv-gp-root-body" });
    this.folderRow = body.createDiv({ cls: "vv-gameplay-folderrow" });
    this.addRow = body.createDiv({ cls: "vv-gameplay-addrow" });
    this.partyTableWrap = body.createDiv({ cls: "vv-gameplay-tablewrap" });
    this.detailsWrap = body.createDiv({ cls: "vv-gp-detailwrap" });
    this.detailsWrap.createDiv({ cls: "vv-gp-detail-empty", text: "Click a name to see details\u2026" });
    await this.renderAddRow();
    await this.renderTable();
    this.startLiveUpdates();
    this.registerEvent(
      this.app.workspace.on("vv:sidebar-previews-changed", async (data) => {
        await this.renderTable();
        if (this.detailsOpenPath) {
          const f = this.app.vault.getAbstractFileByPath(this.detailsOpenPath);
          if (f instanceof import_obsidian9.TFile) await this.showDetails(f);
        }
      })
    );
  }
  async onClose() {
  }
  async renderAddRow() {
    const plugin = getToolkit2(this.app);
    const s = plugin?.settings?.gameplay || {};
    this.addRow.empty();
    const wrap = this.addRow.createDiv({ cls: "vv-gp-addwrap" });
    const count = (s.selectedPlayers || []).length;
    const trigger = wrap.createEl("button", { cls: "vv-gp-checkdd-trigger", text: `Add Players` });
    const clearBtn = wrap.createEl("button", { cls: "vv-gp-clearall", text: "Clear All" });
    clearBtn.addEventListener("click", async () => {
      plugin.settings.gameplay.selectedPlayers = [];
      await plugin.saveSettings();
      await this.renderTable();
      await this.renderAddRow();
    });
    const panel = this.addRow.createDiv({ cls: "vv-gp-checkdd-panel" });
    const folder = this.getActiveFolderPrefix();
    const files = this.app.vault.getMarkdownFiles().filter((f) => f.path.startsWith(folder)).sort((a, b) => a.basename.localeCompare(b.basename));
    const selected = new Set(s.selectedPlayers || []);
    const updateCountLabel = () => {
      const n = selected.size;
      trigger.textContent = `Players (${n})`;
    };
    for (const f of files) {
      const row = panel.createDiv({ cls: "vv-gp-checkdd-row" });
      const id = `gp-${f.path.replace(/[^\w-]+/g, "_")}`;
      const cb = row.createEl("input", { type: "checkbox", attr: { id } });
      cb.checked = selected.has(f.path);
      const lab = row.createEl("label", { attr: { for: id } });
      lab.textContent = f.basename;
      cb.addEventListener("change", async () => {
        if (cb.checked) selected.add(f.path);
        else selected.delete(f.path);
        plugin.settings.gameplay.selectedPlayers = Array.from(selected);
        await plugin.saveSettings();
        updateCountLabel();
        await this.renderTable();
      });
    }
    const open = () => {
      if (panel.classList.contains("open")) return;
      panel.classList.add("open");
      const rect = trigger.getBoundingClientRect();
      const containerRect = this.containerEl.getBoundingClientRect();
      panel.style.left = `${rect.left - containerRect.left}px`;
      panel.style.top = `${rect.bottom - containerRect.top + 4}px`;
      const onDocClick = (ev) => {
        if (panel.contains(ev.target) || trigger.contains(ev.target)) return;
        close();
      };
      const onEsc = (ev) => {
        if (ev.key === "Escape") close();
      };
      const close = () => {
        panel.classList.remove("open");
        document.removeEventListener("mousedown", onDocClick, true);
        document.removeEventListener("keydown", onEsc, true);
      };
      panel._close = close;
      document.addEventListener("mousedown", onDocClick, true);
      document.addEventListener("keydown", onEsc, true);
    };
    trigger.addEventListener("click", () => {
      if (panel.classList.contains("open")) panel._close?.();
      else open();
    });
  }
  // ── Party table ─────────────────────────────────────────────────────
  async renderTable() {
    const plugin = getToolkit2(this.app);
    const s = plugin?.settings?.gameplay || {};
    this.partyTableWrap.empty();
    const paths = s.selectedPlayers || [];
    if (!paths.length) {
      this.partyTableWrap.createEl("div", { text: "No players selected.", cls: "vv-gp-empty" });
      return;
    }
    const rows = [];
    for (const p of paths) {
      const file = this.app.vault.getAbstractFileByPath(p);
      if (!(file instanceof import_obsidian9.TFile)) continue;
      const fm = this.app.metadataCache.getFileCache(file)?.frontmatter || {};
      const name = fm["Name"] ?? file.basename;
      const wis = Number(fm["wisdom"] ?? 10);
      const wisMod = Math.floor((wis - 10) / 2);
      const prof = Number(
        fm["Proficiency bonus"] ?? fm["Proficiency Bonus"] ?? 0
      );
      const rawSkills = fm["skills"] ?? fm["Skill Proficiencies"];
      const skillsArr = Array.isArray(rawSkills) ? rawSkills.map(String) : typeof rawSkills === "string" ? rawSkills.split(",").map((s2) => s2.trim()) : [];
      const hasPerception = skillsArr.some((s2) => s2.toLowerCase() === "perception");
      const pp = 10 + wisMod + (hasPerception ? prof : 0);
      const ac = (fm["ac"] ?? "N/A") + "";
      const hpM = (fm["hp"] ?? "N/A") + "";
      const hpC = (fm["current_hp"] ?? fm["hp"] ?? "N/A") + "";
      const spdRaw = (fm["Speed"] ?? fm["speed"] ?? "") + "";
      const spd = sanitizeSpeed(spdRaw);
      let alnRaw = (fm["Alignment"] ?? fm["Alignnment"] ?? "") + "";
      let aln = "\u2014";
      if (alnRaw) {
        const key = alnRaw.toLowerCase().trim();
        aln = ALIGN_ABBR[key] ?? alnRaw;
      }
      rows.push({
        file,
        name,
        ac: ac || "N/A",
        hpCur: hpC || "N/A",
        hpMax: hpM || "N/A",
        speed: spd || "N/A",
        align: aln,
        pp
      });
    }
    rows.sort((a, b) => a.name.localeCompare(b.name));
    const table = this.partyTableWrap.createEl("table", { cls: "vv-gp-table" });
    const cg = table.createEl("colgroup");
    [
      ["name", ""],
      // auto → absorbs leftover space
      ["pp", "pp"],
      ["ac", "ac"],
      ["hp", "hp"],
      ["spd", "spd"],
      ["aln", "aln"],
      ["rm", "rm"]
      // the tiny × column
    ].forEach(([cls]) => cg.createEl("col", { cls: `vv-col-${cls}` }));
    const thead = table.createEl("thead");
    const trH = thead.createEl("tr");
    ["Name", "PP", "AC", "HP", "Spd", "Align"].forEach((h) => {
      trH.createEl("th", { text: h });
    });
    const tbody = table.createEl("tbody");
    for (const r of rows) {
      const tr = tbody.createEl("tr");
      const nameTd = tr.createEl("td");
      const a = nameTd.createEl("a", { text: r.name, href: r.file.path });
      a.addEventListener("click", async (e) => {
        e.preventDefault();
        if (e.metaKey || e.ctrlKey) {
          this.app.workspace.openLinkText(r.file.path, "", false);
          return;
        }
        await this.showDetails(r.file);
      });
      a.addEventListener("contextmenu", (e) => {
        e.preventDefault();
        this.app.workspace.openLinkText(r.file.path, "", true);
      });
      const enablePreview2 = !!getToolkit2(this.app)?.settings?.enableSidebarPreviews;
      a.classList.add("vv-link");
      if (enablePreview2) {
        a.classList.add("internal-link");
        a.setAttr("data-href", r.file.path);
      }
      tr.createEl("td", { text: String(r.pp), attr: { style: "text-align:center; white-space:nowrap;" } });
      tr.createEl("td", { text: r.ac, attr: { style: "text-align:center; white-space:nowrap;" } });
      {
        const td = tr.createEl("td");
        const wrap = td.createDiv({ cls: "vv-gp-hpwrap", attr: { title: "Click to edit current HP" } });
        const cur = wrap.createEl("input", { type: "text", cls: "vv-gp-hpcur" });
        cur.value = String(r.hpCur ?? "");
        cur.inputMode = "numeric";
        cur.pattern = "\\d*";
        wrap.createSpan({ text: "/", cls: "vv-gp-hpsep" });
        wrap.createSpan({ text: String(r.hpMax ?? "N/A"), cls: "vv-gp-hpmax" });
        const commit = async () => {
          const cleaned = cur.value.trim();
          if (!/^\d+$/.test(cleaned)) {
            new import_obsidian9.Notice("HP must be a number");
            cur.value = String(r.hpCur ?? "");
            return;
          }
          if (cleaned === String(r.hpCur ?? "")) return;
          try {
            await this.saveFrontmatterNumber(r.file, "current_hp", Number(cleaned));
            r.hpCur = cleaned;
          } catch (e) {
            console.error(e);
            new import_obsidian9.Notice("Failed to update HP");
            cur.value = String(r.hpCur ?? "");
          }
        };
        cur.addEventListener("keydown", (ev) => {
          if (ev.key === "Enter") {
            ev.preventDefault();
            ev.target.blur();
          }
          if (ev.key === "Escape") {
            ev.preventDefault();
            cur.value = String(r.hpCur ?? "");
            cur.blur();
          }
        });
        cur.addEventListener("blur", commit);
      }
      tr.createEl("td", { text: r.speed, attr: { style: "text-align:center; white-space:nowrap;" } });
      tr.createEl("td", { text: r.align, attr: { style: "text-align:center; white-space:nowrap;" } });
      const rmTd = tr.createEl("td", { cls: "vv-gp-rmcell" });
      const rmBtn = rmTd.createEl("button", { text: "x", cls: "vv-gp-rm-btn" });
      rmBtn.setAttr("title", "Remove from roster");
      rmBtn.addEventListener("click", async (e) => {
        e.preventDefault();
        const plugin2 = getToolkit2(this.app);
        const s2 = plugin2?.settings?.gameplay || {};
        const list = s2.selectedPlayers || [];
        const idx = list.indexOf(r.file.path);
        if (idx !== -1) {
          list.splice(idx, 1);
          plugin2.settings.gameplay.selectedPlayers = list;
          await plugin2.saveSettings();
          const openPanel = this.containerEl.querySelector(".vv-gp-checkdd-panel.open");
          openPanel?._close?.();
          await this.renderTable();
          await this.renderAddRow();
        }
      });
    }
    const pagePreview = this.app.internalPlugins?.getPluginById?.("page-preview")?.instance;
    const enablePreview = !!getToolkit2(this.app)?.settings?.enableSidebarPreviews;
    if (this.partyTableWrap && this.partyTableWrap._vvHoverWired && !enablePreview) {
      const prev = this.partyTableWrap._vvHoverHandler;
      if (prev) this.partyTableWrap.removeEventListener("mousemove", prev);
      delete this.partyTableWrap._vvHoverWired;
      delete this.partyTableWrap._vvHoverHandler;
    }
    if (pagePreview?.onLinkHover && enablePreview && this.partyTableWrap && !this.partyTableWrap._vvHoverWired) {
      this.partyTableWrap._vvHoverWired = true;
      const handler = (ev) => {
        const t = ev.target;
        const a = t?.closest("a.internal-link");
        if (!a) return;
        const linkText = a.getAttribute("data-href") || a.getAttribute("href");
        if (!linkText) return;
        pagePreview.onLinkHover(ev, a, linkText, a.getAttribute("href") || "");
      };
      this.partyTableWrap.addEventListener("mousemove", handler);
      this.partyTableWrap._vvHoverWired = true;
      this.partyTableWrap._vvHoverHandler = handler;
    }
  }
};

// src/main.ts
function getRulesetDisplayName(key) {
  const ed = AVAILABLE_EDITIONS.find((e) => e.id === key);
  return ed?.label ?? key;
}
var mapmaking_icon = `
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" aria-hidden="true">
    <g stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round">
      <path d="M20.97 10.15v7.08c0 .38-.21.72-.55.89l-4.55 2.28c-.56.28-1.23.28-1.79 0l-4.21-2.11c-.56-.28-1.23-.28-1.79 0L4.42 20.12a1 1 0 0 1-1.45-.9V6.47c0-.38.21-.72.55-.89l4.55-2.28c.56-.28 1.23-.28 1.79 0l2.52 1.28"/>
      <path d="M14.97 13.51v7.1"/>
      <path d="M8.97 3.09v15"/>
      <path d="M21.48 5.03a1.79 1.79 0 1 0-2.53-2.53l-4.22 4.22c-.2.2-.35.45-.43.72l-.7 2.42a.4.4 0 0 0 .53.49l2.42-.7c.27-.08.52-.23.72-.43l4.22-4.22Z"/>
    </g>
  </svg>
`;
var gameplay_icon = `
<svg id="Layer_1" xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 24 24">
  <!-- Generator: Adobe Illustrator 29.2.1, SVG Export Plug-In . SVG Version: 2.1.0 Build 116)  -->
  <defs>
    <style>
      .st0 {
        fill: currentColor;
      }

      .st0, .st1 {
        stroke: currentColor;
        stroke-miterlimit: 10;
      }

      .st0, .st1, .st2 {
        stroke-width: 2px;
      }

      .st1, .st2 {
        fill: none;
      }

      .st2 {
        stroke: currentColor;
        stroke-linecap: round;
        stroke-linejoin: round;
      }

      .st3 {
        display: none;
      }
    </style>
  </defs>
  <g id="Layer_4" class="st3">
    <path class="st0" d="M11.98-25.16c-1.29,0-2.79.18-3.25.23-.07,0-.12-.03-.12-.08l.19-2.56c0-.08.05-.16.11-.21.22-.17.91-.51,3.06-.51"/>
    <path class="st1" d="M8.24-26.61s-2.39.43-2.78.76c-.22.19-1.52,9.89-1.9,12.91-.07.56.18,1.12.64,1.44.57.39,1.31.84,1.67.84"/>
    <path class="st1" d="M11.98-8.36c-2.92,0-5.04-.09-5.7-.13-.13,0-.21-.11-.21-.24.03-.42.11-1.5.16-2.1.02-.26.19-.49.44-.57l2.65-1.28h2.66"/>
    <path class="st0" d="M11.98-8.36c-2.92,0-5.04-.09-5.7-.13-.13,0-.21-.11-.21-.24.03-.42.11-1.5.16-2.1.02-.26.19-.49.44-.57l2.65-1.28h2.66"/>
    <path class="st0" d="M11.98-8.36c2.92,0,5.04-.09,5.7-.13.13,0,.21-.11.21-.24-.03-.42-.11-1.5-.16-2.1-.02-.26-.19-.49-.44-.57l-2.65-1.28h-2.66"/>
    <path class="st0" d="M11.98-25.16c1.29,0,2.79.18,3.25.23.07,0,.12-.03.12-.08l-.19-2.56c0-.08-.05-.16-.11-.21-.22-.17-.91-.51-3.06-.51"/>
    <path class="st1" d="M9-24.92l-1.47,6.19c-.12.52-.19,1.06-.17,1.59,0,.41.05.88.15,1.29.25.94,1.39,2.3,1.39,3.17h6.17c0-.86,1.13-2.23,1.38-3.17.11-.4.14-.88.15-1.29.01-.54-.05-1.07-.17-1.59l-1.47-6.19-.23-.11c-1.83-.22-3.67-.22-5.5,0,0,0-.23.11-.23.11Z"/>
    <path class="st1" d="M15.77-26.61s2.39.43,2.78.76c.22.19,1.52,9.89,1.9,12.91.07.56-.18,1.12-.64,1.44-.57.39-1.31.84-1.67.84"/>
  </g>
  <g id="Layer_5" class="st3">
    <path class="st2" d="M20.97-16.16v7.08c0,.38-.21.72-.55.89l-4.55,2.28c-.56.28-1.23.28-1.79,0l-4.21-2.11c-.56-.28-1.23-.28-1.79,0l-3.66,1.83c-.49.25-1.09.05-1.34-.45-.07-.14-.11-.29-.11-.45v-12.76c0-.38.21-.72.55-.89l4.55-2.28c.56-.28,1.23-.28,1.79,0l2.52,1.28"/>
    <path class="st2" d="M14.97-12.8v7.1"/>
    <path class="st2" d="M8.97-23.23v15"/>
    <path class="st2" d="M21.48-21.29c.7-.7.7-1.83,0-2.53s-1.83-.7-2.53,0l-4.22,4.22c-.2.2-.35.45-.43.72l-.7,2.42c-.07.22.06.46.29.52.08.02.16.02.24,0l2.42-.7c.27-.08.52-.23.72-.43l4.22-4.22h0Z"/>
  </g>
  <g id="Layer_6">
    <path class="st2" d="M5.87,10.85h12.15v9.15c0,.55-.45,1-1,1H6.87c-.55,0-1-.45-1-1v-9.15h0Z"/>
    <polyline class="st2" points="5.87 10.85 1.97 9.1 1.97 19.15 6.56 20.95"/>
    <polyline class="st2" points="18.02 10.85 22 9.1 22 19.15 17.33 20.95"/>
  </g>
  <g id="Layer_7">
    <path class="st2" d="M8.5,5.77s-2.08-.95-1.89-3.34c0,0,1.56,1.84,2.79,1.86"/>
    <path class="st2" d="M15.51,5.77s2.08-.95,1.89-3.34c0,0-1.56,1.84-2.79,1.86"/>
  </g>
  <g id="Layer_3" class="st3">
    <path class="st2" d="M40.66,11.97h-5"/>
    <path class="st2" d="M40.66,7.97h-5"/>
    <path class="st2" d="M44.66,16.97V4.97c0-1.1-.9-2-2-2h-13"/>
    <path class="st2" d="M33.66,20.97h12c1.1,0,2-.9,2-2v-1c0-.55-.45-1-1-1h-10c-.55,0-1,.45-1,1v1c0,1.1-.9,2-2,2s-2-.9-2-2V4.97c0-1.1-.9-2-2-2s-2,.9-2,2v2c0,.55.45,1,1,1h3"/>
  </g>
  <path class="st2" d="M14.17,10.67c.97-.69,1.65-2.05,1.65-3.34,0-2.11-1.71-3.82-3.82-3.82s-3.82,1.71-3.82,3.82c0,1.29.69,2.64,1.66,3.34"/>
</svg>
`;
var loadingIcon = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAANEAAADRCAYAAABSOlfvAAAACXBIWXMAABcRAAAXEQHKJvM/AAAL5klEQVR4nO3dT6wdZRnH8V9hyguFYltKSgXxFAhoQqUUQiBGuBgxETG6qUFctBpN3NbEuDCR28T4Jy5AjQkLE0t0oSZGdOXC2INKMBrN3YALGzkQIEqUXrFCX5wWF2dMjM7znN73mZl7zu33k5zNPJl33nvP/fVMnvP2nU3C/6lSOiTpYMfDHq5zXul4TMyBar0nMKdGkpY6HnNbx+NhTpy33hMAFh0hAoIIERBEiIAgQgQE0Z1bu6OSHjVqByUdMmoPVSmt9jGhNnXOdw91rXMdIVq7Z+ucx22FKqUl57x9vcwG647bOSCIEAFBhAgIIkRAECECgujODeewpJJV3LdI2m7UDki6qq1QpXSs4Fq0xgsQouGsWK1xT5VSJWmXUf6HpNNGbWmt10IZbueAIEIEBBEiIIgQAUGECAiiO9ehOudlScsdD/s5lXXarJXmkvQHq1Cl9EbBtcbncmucTyIgiBABQYQICCJEQBAhAoIIERC0ab0nsGiqlJYlPdjxsPdIetyo1XXOrW3nZqX2knHeW5zrfdOpvdOpPWwc3yPp40Ztw7e/+SQCgggREESIgCBCBAQRIiCIEAFBG7rF3WzrW7Rhxxy5u2RvBk+V0nVWrc75uHPeAaskaYtRu0HSZ4zahmh/80kEBBEiIIgQAUGECAgiREDQQuyxUKW0TWUPyRpJGnc6mX46mjdJ2mbU9lUpWeet1DmXPH3vtYJzpOmOq20uknSZUXtV9nswcR6MtlrnXLLt8uAWosUdaFV33kKtUjpP9u/N+32ekWRtAnJM0l0F0+m8/e2pUhoZpd2S7jNqz9Q5f8sYb0n2+7ow7W9u54AgQgQEESIgiBABQYQICJqbFveMNvZIZa1qs0XadJpGBWNukt+Fs2pnnHPe5NRWJFlt7JL2tqqU3uaUTzm1S4zjm525nHTGW1VZ+3tS5zxxxh3U3LS4h2539rThSB/6WMX9baf8nFP7nXH8jKTXjdqJOuffntXE/suMv4cjzb7nc4HbOSCIEAFBhAgIIkRAECECggZvcTtty5HsdqfXqi5d4S3nep6RylrjHq+NnaqUrjZqJyXVbYU651ec63nv+8ipWVsdn9Z0tXYbbx4er/3t/R0N3v4evMXtPM6wqI0dWOFd1CbtqTVutrGrlD4qyQqRGb465yeti1UpPebM5YNObWQcP1Xn/BfnvE7NeA8Gb39zOwcEESIgiBABQYQICCJEQFAvLW6n/Sh138YeOWN6JgXn/Oc863oj2R2s0tXYuyVdY9TOyFglXSV7dxNJO53aE07tduP4S5IG687Nm76+JzJbznXOJW31fc6Yg25oUed8VNLRttqM1uvhwtXY75f9SMk+WLv2SNLfjONjLf6e58W4nQOCCBEQRIiAIEIEBBEiIKiXBajOIlOzO1eltFXTp6q1uUXSI0ZtbrabbVr71lzM38lZsN6nyJiWrzi1zxaMN2k6mmvStOgvN8r7m9dajfvYdnludvuRtFXSrUbt+iEnEvC4pF8YtZ+rbL/td8v+Lwhv1Dn3ESTLctvBWZvMyPhKYIYk6Sqj9vs6558Yc1mWv8p+XDAXF7dzQBAhAoIIERBEiIAgQgQEFXfnmi6I5YhzntWuvUz209ZOSvqSUXvGmcd6sLplR1W+2twac8jOnGci/z1fts5z2t9Z0vNG7ZIqJauTu9uaR1+Kvycq+S6oOc+qLWnaBm7zK0n3GrXTdc7WTjNYZ33ssd4E6BajfJ/sf4x72cSE2zkgiBABQYQICCJEQBAhAoLWYwHqknHc20/bexKb9xhHbEwvSzpu1CaSXjBq+512+9HSPbznKUQj55wzdc65+6lgQb2s6Sb6bZ6V/f3SfkkfMGpjFe4Axe0cEESIgCBCBAQRIiCIEAFBbncusFL7Ruc8a5+BVWfMiTMezj2nnNrTkn5m1O6UdGXXk5nV4jY3fJixUvt+Z0wrROOhHxOIxVTnfEpGkKqUnpb9/NirJL2r6/lwOwcEESIgiBABQYQICCJEQFBfC1CtPbVx7lmRvT/5qErJ2n9hpc75cFuhSumQpIPGeRc2rzZXWJOM6CtEW3saFwumznlVxi5HzSYmSwXDjgrP6wW3c0AQIQKCCBEQRIiAIEIEBPXVnbuzp3EByd/X/Kbm1WafpJuN2kNVSqtG7XCd84o1mb5CtLOncQE1u/JM2mrNHvGXGqeOnGG93aa2efPhdg4IIkRAECECgggREESIgKC+unMnexoXmOWM7C2G/+Scd7NmdOEsfYWo7mlc4GxYj0L9p6SXjJr1wISZuJ0DgggREESIgCBCBAQRIiCor+6ctY0r0Lf9kj5p1DZLusCobS+9YF8hsvr0QN+2S9oz5AW5nQOCCBEQRIiAIEIEBBEiIKiv7twPnRqbmKBPX5f0HaN2uez9P74oaW/JBfkkAoIIERBEiIAgQgQEESIgiBABQX21uH/k1L5gHL+t2QK2zbjO2XpkIeZY8zQ865GS4zrnTR1fcqukK43axyQd6vh6fBIBUYQICCJEQBAhAoIIERBEiIAgt8XttR+ddvSs835glHZLuteoXVCltMuovV7nfMK6HjaeKqVlSQ92POzddc7jkhP5JAKCCBEQRIiAIEIEBBEiIIgQAUF9reI21Tl/onUiKV0t6QHjtGsk/dmojSWxwnsd9bFSu0pJkqzznpL0faO2U9JlRu2K5tUpPomAIEIEBBEiIIgQAUGECAiKdOfG5qDTbk0rZ5FflvScUfuXc72Jc73VOucVay5YG+f3PJL9/pT+/i+QtMOobZN0kVHbIukSZ8zOdb1JhKTyFd6F11qS316l/d2RITeSaVbt32OU75B0u1Hb3bzWilXcwHohREAQIQKCCBEQRIiAoL4WoP7SvGD37ehVlbW/PZM650nBeQtvxu9rbBw337cqpW2S9hVMZbuktxu13ZIuNmqbnTEnzavN6lnNqkVfLW7rB5Skk8bxPtqkS7Lb354jdc7LXc5lUXT99UTgPfCcllRbl5R0vlHr5X3ldg4IIkRAECECgggREESIgKC+WtynndrYOO61o1+V9LxRe73O+a9GzWt/uxahNV6ltE/TFc1dGnc83inZq/PP13TVdZtK06feWawPgBckvWjUrL+hkF5a3CVmtEL/KOkho/ZinfOPO57Lssr2eh60NV6ldEzSUpdj9rDKfo+k1s1pNA3JDUZth6RbCy75NUkPG7XVOufi74Ms3M4BQYQICCJEQBAhAoIIERA0+DbCjlck/dqpXW/UdlQp/b3gel47eqJhW+OlJuq+JW0q/Nl2yd6692LZm5F47e2J7NXYxzVtq7exFq2GzFOL+0JNf+Ftbpf0vY4v2Xk7uqfHIHqKN9co4a3wdmRJ1vd4SdO9s9dqrlbZczsHBBEiIIgQAUGECAgiREDQPLW4a0lWq/opSUeM2lslHTJqL0v6jVWrUrLa5nubV5ux0xGzjvdlUnJS00VsNaPr9V3juLflbyXpUqNm7YUgTX+2R43a2DlvcHPT4i41Y/X3cUnfMGonmlebByR9xKjNVXu1ROlmJFVK7zVK75D01ei8/sfC7KPO7RwQRIiAIEIEBBEiIIgQAUHz1OIuNZHd/t4q6X1G7TXZq31vLJlIldIO2auS75G9wPZoyQYnVUqHNH3UY5tH1jpeM+ayU7a6etYcZpnIbmNPCscc3MKHqPnjW26rNe3vTw84nR2SrjVqn9K0FdxmrLI/moOyNyp5rGA8yV+F/lPjuPUPxyyTRf+6QOJ2DggjREAQIQKCCBEQRIiAoIXvzs0wkd3+luwFuHc1r9aa0wb29iCwVjJL0pYqJav+Htmt8Tc7Y3p7dHv7Vdzv1K4zjl/knDPRBmhjexZ+FXepKqVNsn/+ByV9vmDY482rzW2yW8EflvSkUfuy7P+Wca3sZ5d+yDgu+WHvdF9zLdBq7FLczgFBhAgIIkRAECECgggRELTRW9yzWF2qY07Ns1f2IlOvDXxA0h3OmFaLe7MzpteqLuV9XWCZdD2JeXPOtrj7sA57cQ+q60dRbhTczgFBhAgIIkRAECECgggREHSut7i7Nl7vCWB4/wYRBbn198/rpAAAAABJRU5ErkJggg==";
var InstallingModal = class extends import_obsidian10.Modal {
  constructor(app) {
    super(app);
  }
  onOpen() {
    this.contentEl.empty();
    const img = this.contentEl.createEl("img", {
      attr: { src: loadingIcon, alt: "Installing\u2026" }
    });
    Object.assign(img.style, {
      display: "block",
      margin: "1em auto 0.5em",
      width: "100px",
      height: "100px"
    });
    img.animate(
      [
        { transform: "rotate(0deg)" },
        { transform: "rotate(-360deg)" }
      ],
      {
        duration: 1500,
        // one and a half seconds per revolution
        iterations: Infinity,
        easing: "linear"
      }
    );
    const txt = this.contentEl.createDiv({ text: "Installing\u2026", cls: "mod-quiet" });
    txt.addClass("installmodal-txt");
  }
  onClose() {
    this.contentEl.empty();
  }
};
var DEFAULT_SETTINGS = {
  installedVersion: "1.0.0",
  customizeUpdates: false,
  updateTargets: {
    tools: true,
    toolsPath: "Tools",
    templates: true,
    templatesPath: "Extras/Templates",
    omninomicon: true,
    omninomiconPath: "Adventures/Omninomicon.md",
    spellbook: true,
    spellbookPath: "Compendium/Spells/_Spellbook.md"
  },
  latestDefaults: void 0,
  pathOverrides: {},
  backupFiles: {},
  backupPath: "",
  autoBackup: false,
  lastBackupTime: "",
  backupError: "",
  customPaths: [],
  autoBackupBeforeUpdate: true,
  highlightEnabled: false,
  highlightColorLight: "#DFE7E2",
  highlightColorDark: "#1F2943",
  rulesetCompendium: "",
  rulesetReference: [],
  reparseGamesets: true,
  isFirstRun: "yes",
  sessionTitlePreference: "name",
  enableSidebarPreviews: true
};
var VVunderloreToolkitPlugin = class extends import_obsidian10.Plugin {
  constructor() {
    super(...arguments);
    this.manifestCache = { files: [], folders: [] };
    this.changelog = "";
    this.autoCheckInterval = null;
    this.oldPathsByGithub = {};
    this.styleEl = null;
    this.excludedPaths = [
      ".DS_Store",
      ".gitignore",
      ".gitattributes",
      ".github",
      "README.md",
      "Compendium",
      `${this.app.vault.configDir}/plugins/vvunderlore-toolkit-plugin/manifest.json`,
      `${this.app.vault.configDir}/plugins/vvunderlore-toolkit-plugin/main.js`,
      `${this.app.vault.configDir}/plugins/vvunderlore-toolkit-plugin/styles.css`
    ];
    this.isFirstRun = false;
    this.pendingRulesetKey = "";
    this.pendingReferenceKeys = [];
  }
  // ─── HELPERS ────────────────────────────────────────────────────────
  /** Given a GitHub path, return the overridden vault path or the original. */
  resolveVaultPath(githubPath) {
    const custom = this.settings.customPaths.find(
      (c) => c.manifestKey === githubPath || c.manifestKey === this.keyFor(githubPath)
    );
    return custom?.vaultPath ?? githubPath;
  }
  /** Convert “some/folder/file.md” → “some-folder-file” (lowercased, no extension). */
  keyFor(path2) {
    return path2.replace(/[/\\]/g, "-").replace(/\.[^.]+$/, "").toLowerCase();
  }
  isExcluded(path2) {
    return this.excludedPaths.some(
      (ex) => path2 === ex || path2.startsWith(`${ex}/`) || path2.includes(`/${ex}/`) || path2.endsWith(`/${ex}`) || path2.includes(`/${ex}`)
    );
  }
  // ─── CUSTOM INSTALL LOGIC ───────────────────────────────────────────
  async performCustomInstall(toInstall) {
    this.app.workspace.getLeavesOfType("markdown").forEach((l) => l.detach());
    this.app.workspace.getLeavesOfType("graph").forEach((l) => l.detach());
    const installing = new InstallingModal(this.app);
    installing.open();
    try {
      const allFiles = this.app.vault.getAllLoadedFiles().filter((f) => f instanceof import_obsidian10.TFile).map((f) => f.path).filter((p) => p !== ".vvunderlore_installed");
      if (allFiles.length && this.settings.autoBackupBeforeUpdate) {
        const folder = await this.backupManager.backupVaultMirror("pre-custom-install");
        new import_obsidian10.Notice(`Backup before custom\u2010install at: ${folder}`);
      }
      for (const entry of toInstall) {
        if (entry.isFolder) {
          if (!await this.app.vault.adapter.exists(entry.path)) {
            await this.app.vault.createFolder(entry.path);
          }
        } else {
          const manifestEntry = this.manifestCache.files.find((f) => f.path === entry.path);
          if (!manifestEntry) continue;
          await this.updateEntryFromManifest(manifestEntry, true);
        }
      }
      await this.updateVersionFile();
      this.settings.installedVersion = this.settings.latestToolkitVersion;
      this.settings.lastForceUpdate = (/* @__PURE__ */ new Date()).toISOString();
      await this.saveSettings();
      const comp = this.settings.rulesetCompendium;
      const refs = this.settings.rulesetReference ?? [];
      if (comp) {
        const jobs = [
          importRulesetData({ app: this.app, editionKey: comp, targetPath: "Compendium" }),
          ...refs.map((refKey) => {
            const label = getRulesetDisplayName(refKey);
            return importRulesetData({
              app: this.app,
              editionKey: refKey,
              targetPath: `Resources/Rulesets/${label}`
            });
          })
        ];
        await Promise.all(jobs);
      }
      const marker = ".vvunderlore_installed";
      if (!await this.app.vault.adapter.exists(marker)) {
        await this.app.vault.create(marker, "");
      }
      this.settings.highlightEnabled = true;
      await this.saveSettings();
      this.enableHighlight();
      if (this.settingsTab) this.settingsTab.display();
      installing.close();
      const success = new import_obsidian10.Modal(this.app);
      success.onOpen = () => {
        success.contentEl.empty();
        success.titleEl.setText("\u2705 Custom Install Complete");
        success.contentEl.createEl("div", {
          text: "Reloading vault in 3 seconds\u2026",
          cls: "installsuccess"
        });
      };
      success.open();
      setTimeout(() => {
        success.close();
        location.reload();
      }, 3e3);
    } catch (err) {
      console.error("\u274C performCustomInstall failed:", err);
      installing.close();
      new import_obsidian10.Notice("\u274C Custom install failed; check console for details.");
    }
  }
  // ─── HIGHLIGHTING (Light + Dark Mode) ──────────────────────────────
  get highlightCSS() {
    const light = this.settings.highlightColorLight.trim() || "rgba(107,146,120,1)";
    const dark = this.settings.highlightColorDark.trim() || "rgba( 50, 70, 50,1)";
    const fileSelectors = this.manifestCache.files.map((f) => {
      const escaped = f.path.replace(/"/g, '\\"');
      return `.nav-file-title[data-path="${escaped}"]`;
    });
    const lines = [
      `:root {`,
      `  --vvunderlore-toolkit-highlight: ${light};`,
      `}`,
      ``,
      `body.theme-dark {`,
      `  --vvunderlore-toolkit-highlight: ${dark};`,
      `}`,
      ``
    ];
    if (fileSelectors.length) {
      lines.push(`${fileSelectors.join(", ")} {`);
      lines.push(`  background-color: var(--vvunderlore-toolkit-highlight);`);
      lines.push(`  border-radius: 3px;`);
      lines.push(`}`);
      lines.push(``);
    }
    return lines.join("\n");
  }
  enableHighlight() {
    if (this.styleEl) return;
    this.styleEl = document.createElement("style");
    this.styleEl.id = "vvunderlore-highlight-inject";
    this.styleEl.textContent = this.highlightCSS;
    document.head.appendChild(this.styleEl);
  }
  disableHighlight() {
    if (!this.styleEl) return;
    this.styleEl.remove();
    this.styleEl = null;
  }
  // ─── REMOTE BASELINE CACHING ─────────────────────────────────────────
  async fetchRemoteBaseline() {
    if (!this.manifestCache || !Array.isArray(this.manifestCache.files)) {
      console.warn("\u26A0\uFE0F manifestCache is missing or invalid");
      return;
    }
    for (const entry of this.manifestCache.files) {
      try {
        const rawUrl = `https://raw.githubusercontent.com/slamwise0001/VVunderlore-Toolkit-Full/main/${entry.path}`;
        const remoteText = await (await fetch(rawUrl)).text();
        const resolved = this.resolveVaultPath(entry.path);
        if (resolved !== entry.path) {
          await this.fileCacheManager.removeFromCache(entry.path);
        }
        await this.fileCacheManager.updateCache(
          resolved,
          remoteText,
          entry.path,
          false
        );
      } catch (e) {
        console.error(`Failed to fetch raw baseline for ${entry.path}`, e);
      }
    }
  }
  // ─── MARKER FILE CHECKS (first‐run detection) ───────────────────────
  async checkMarkerFile() {
    const markerPath = ".vvunderlore_installed";
    const markerExists = await this.app.vault.adapter.exists(markerPath);
    this.isFirstRun = !markerExists;
    delete this.settings.needsInstall;
    await this.saveSettings();
    this.settingsTab.display();
  }
  // ─── MANIFEST SYNC ────────────────────────────────────────────────────
  async syncManifest() {
    try {
      const res = await (0, import_obsidian10.requestUrl)({
        url: "https://raw.githubusercontent.com/slamwise0001/VVunderlore-Toolkit-Full/main/manifest.json"
      });
      const manifest = res.json;
      this.settings.latestDefaults = manifest.defaultPaths || {};
      this.manifestCache = manifest;
      const manifestContent = JSON.stringify(manifest, null, 2);
      await this.app.vault.adapter.write("manifest.json", manifestContent);
      await this.saveSettings();
    } catch (error) {
      console.error("Error syncing manifest:", error);
      new import_obsidian10.Notice("Failed to sync manifest.");
    }
  }
  // ─── PLUGIN LIFECYCLE ─────────────────────────────────────────────────
  async onload() {
    await this.loadSettings();
    (0, import_obsidian10.addIcon)("mapmaking", mapmaking_icon);
    (0, import_obsidian10.addIcon)("gameplay", gameplay_icon);
    this.backupManager = new BackupManager(this.app);
    this.fileCacheManager = new ToolkitFileCacheManager(
      this.app.vault,
      this.settings.fileCache ?? {},
      async () => await this.saveSettings()
    );
    this.settingsTab = new ToolkitSettingsTab(this.app, this);
    this.addSettingTab(this.settingsTab);
    this.registerView(SIDEBAR_VIEW_TYPE, (leaf) => new SidebarTemplatesView(leaf));
    this.registerView(GAMEPLAY_VIEW_TYPE, (leaf) => new GameplaySidebarView(leaf));
    this.addCommand({
      id: "open-templates-sidebar",
      name: "Open Templates Sidebar",
      icon: "mapmaking",
      callback: async () => {
        let leaf = this.app.workspace.getLeavesOfType(SIDEBAR_VIEW_TYPE)[0];
        if (!leaf) {
          leaf = this.app.workspace.getRightLeaf(false) ?? this.app.workspace.getRightLeaf(true);
        }
        if (!leaf) {
          new import_obsidian10.Notice("\u274C Could not open Templates sidebar");
          return;
        }
        await leaf.setViewState({ type: SIDEBAR_VIEW_TYPE, active: true });
        this.app.workspace.revealLeaf(leaf);
      }
    });
    this.addCommand({
      id: "open-gameplay-sidebar",
      name: "Open Gameplay Sidebar",
      icon: "gameplay",
      callback: async () => {
        let leaf = this.app.workspace.getLeavesOfType(GAMEPLAY_VIEW_TYPE)[0];
        if (!leaf) {
          leaf = this.app.workspace.getRightLeaf(false) ?? this.app.workspace.getRightLeaf(true);
        }
        if (!leaf) {
          new import_obsidian10.Notice("\u274C Could not open Gameplay sidebar");
          return;
        }
        await leaf.setViewState({ type: GAMEPLAY_VIEW_TYPE, active: true });
        this.app.workspace.revealLeaf(leaf);
      }
    });
    this.addRibbonIcon("scroll-text", "VVunderlore Sidebars", async () => {
      await this.openSidebar(SIDEBAR_VIEW_TYPE, "right");
      await this.openSidebar(GAMEPLAY_VIEW_TYPE, "right");
    });
    if (this.settings.isFirstRun !== "yes") {
      try {
        const content = await this.app.vault.adapter.read("manifest.json");
        this.manifestCache = JSON.parse(content);
      } catch {
      }
    }
    if (this.settings.highlightEnabled) this.enableHighlight();
    setTimeout(async () => {
      await this.syncManifest();
      await this.showIndexingModal();
      await this.checkForUpdates();
      try {
        const raw = await this.app.vault.adapter.read("manifest.json");
        const manifest = JSON.parse(raw);
        const entries = [...manifest.folders || [], ...manifest.files || []];
        this.requiresGraph = new Map(entries.map((e) => [e.key, e.requires || []]));
      } catch {
        this.requiresGraph = /* @__PURE__ */ new Map();
      }
    }, 250);
    this.scheduleAutoUpdateCheck();
    this.registerEvent(
      this.app.vault.on("delete", () => this.registerEvent(
        this.app.vault.on(
          "delete",
          () => this.app.commands.executeCommandById("dataview:clear-cache")
        )
      ))
    );
    this.registerEvent(
      this.app.vault.on(
        "rename",
        () => this.app.commands.executeCommandById("dataview:clear-cache")
      )
    );
    if (this.settings.isFirstRun === "no") {
      this.app.workspace.onLayoutReady(() => {
        const welcome = this.app.vault.getAbstractFileByPath("Welcome.md");
        if (welcome instanceof import_obsidian10.TFile) {
          this.app.workspace.detachLeavesOfType("settings");
          this.app.workspace.getLeaf(true).openFile(welcome);
        }
        this.settings.isFirstRun = "shown";
        this.saveSettings();
      });
    }
  }
  onunload() {
    this.disableHighlight();
    this.app.workspace.detachLeavesOfType(SIDEBAR_VIEW_TYPE);
    if (this.autoCheckInterval) clearInterval(this.autoCheckInterval);
  }
  scheduleAutoUpdateCheck() {
    this.autoCheckInterval = window.setInterval(() => {
      this.checkForUpdates();
    }, 60 * 60 * 1e3);
  }
  async activateTemplatesSidebar() {
    this.app.workspace.detachLeavesOfType(SIDEBAR_VIEW_TYPE);
    await this.app.workspace.getLeftLeaf(false).setViewState({ type: SIDEBAR_VIEW_TYPE, active: true });
  }
  async openSidebar(viewType, side) {
    const ws = this.app.workspace;
    const existing = ws.getLeavesOfType(viewType)[0];
    if (existing) {
      await existing.setViewState({ type: viewType, active: true });
      ws.revealLeaf(existing);
      return;
    }
    const leaf = side === "left" ? ws.getLeftLeaf(false) ?? ws.getLeftLeaf(true) : ws.getRightLeaf(false) ?? ws.getRightLeaf(true);
    if (!leaf) {
      new import_obsidian10.Notice(`\u274C Could not open ${viewType} sidebar`);
      return;
    }
    await leaf.setViewState({ type: viewType, active: true });
    ws.revealLeaf(leaf);
  }
  // ─── BACKUP & UNDO ────────────────────────────────────────────────────
  async backupFile(filePath, content) {
    this.settings.backupFiles = this.settings.backupFiles || {};
    this.settings.backupFiles[filePath] = content;
    await this.saveSettings();
  }
  async undoForceUpdate() {
    if (!this.settings.backupFiles || Object.keys(this.settings.backupFiles).length === 0) {
      new import_obsidian10.Notice("No backups available to restore.");
      return;
    }
    for (const [filePath, backupContent] of Object.entries(this.settings.backupFiles)) {
      if (await this.app.vault.adapter.exists(filePath)) {
        await this.app.vault.adapter.write(filePath, backupContent);
      } else {
        await this.app.vault.create(filePath, backupContent);
      }
    }
    new import_obsidian10.Notice("\u2705 Force update undone.");
    this.settings.backupFiles = {};
    await this.saveSettings();
  }
  // ─── FOLDER SYNC ───────────────────────────────────────────────────────
  async syncMissingFolders() {
    if (this.manifestCache && this.manifestCache.folders) {
      for (const folderEntry of this.manifestCache.folders) {
        const folderPath = folderEntry.path;
        if (!await this.app.vault.adapter.exists(folderPath)) {
          await this.app.vault.createFolder(folderPath);
        }
      }
    }
  }
  // ─── FORCE-UPDATE PREVIEW ──────────────────────────────────────────────
  async buildForceUpdatePreview() {
    const previewList = [];
    const denyListedFolders = this.settings.customPaths.filter((c) => c.doUpdate === false).map((c) => c.manifestKey);
    for (const entry of this.manifestCache.files) {
      if (entry.optional) {
        continue;
      }
      const custom = this.settings.customPaths.find((c) => c.manifestKey === entry.key);
      const isInDenyFolder = denyListedFolders.some(
        (folder) => entry.path.startsWith(folder + "/")
      );
      if (custom?.doUpdate === false || isInDenyFolder) {
        const vp = custom?.vaultPath ?? this.resolveVaultPath(entry.path);
        const exists = await this.app.vault.adapter.exists(vp);
        const upToDate = exists && await this.fileCacheManager.isUpToDate(vp);
        if (!exists || !upToDate) {
          previewList.push({
            filePath: vp,
            action: "deny-listed \u2013 will not update",
            selected: false
          });
        }
      }
    }
    if (!this.settings.customizeUpdates) {
      for (const f of this.manifestCache.files) {
        if (f.optional) {
          continue;
        }
        const custom = this.settings.customPaths.find((c) => c.manifestKey === f.key);
        const isInDenyFolder = denyListedFolders.some(
          (folder) => f.path.startsWith(folder + "/")
        );
        if (custom?.doUpdate === false || isInDenyFolder) {
          continue;
        }
        const vp = this.resolveVaultPath(f.path);
        let tag = "";
        if (vp !== f.path) tag = " (remapped)";
        const exists = await this.app.vault.adapter.exists(vp);
        if (!exists) {
          previewList.push({
            filePath: vp,
            action: `new file${tag}`,
            selected: true
          });
        } else if (!await this.fileCacheManager.isUpToDate(vp)) {
          previewList.push({
            filePath: vp,
            action: `will be overwritten${tag}`,
            selected: true
          });
        }
      }
      for (const fld of this.manifestCache.folders) {
        if (fld.optional) {
          continue;
        }
        const isDenyFolder = denyListedFolders.includes(fld.path);
        if (!await this.app.vault.adapter.exists(fld.path) && !isDenyFolder) {
          previewList.push({
            filePath: fld.path,
            action: "missing folder (will be created)",
            selected: true,
            isFolder: true
          });
        }
      }
      return previewList;
    }
    for (const entry of this.manifestCache.files) {
      if (entry.optional) {
        continue;
      }
      const custom = this.settings.customPaths.find((c) => c.manifestKey === entry.key);
      const isInDenyFolder = denyListedFolders.some(
        (folder) => entry.path.startsWith(folder + "/")
      );
      if (custom?.doUpdate === false || isInDenyFolder) {
        continue;
      }
      const vaultPath = custom?.vaultPath ?? this.resolveVaultPath(entry.path);
      const exists = await this.app.vault.adapter.exists(vaultPath);
      const upToDate = exists && await this.fileCacheManager.isUpToDate(vaultPath);
      let tag = "";
      if (vaultPath !== entry.path) tag = " (remapped)";
      if (!exists) {
        previewList.push({
          filePath: vaultPath,
          action: `new file${tag}`,
          selected: true
        });
      } else if (!upToDate) {
        previewList.push({
          filePath: vaultPath,
          action: `will be overwritten${tag}`,
          selected: true
        });
      }
    }
    for (const entry of this.manifestCache.folders) {
      if (entry.optional) {
        continue;
      }
      const isDenyFolder = denyListedFolders.includes(entry.path);
      if (!await this.app.vault.adapter.exists(entry.path) && !isDenyFolder) {
        previewList.push({
          filePath: entry.path,
          action: "missing folder (will be created)",
          selected: true,
          isFolder: true
        });
      }
    }
    for (const f of this.manifestCache.files) {
      if (f.optional) {
        continue;
      }
      const manifestKey = f.key;
      const manifestPath = f.path;
      const custom = this.settings.customPaths.find((c) => c.manifestKey === manifestKey);
      const prevPath = this.oldPathsByGithub[manifestPath];
      const isInDenyFolder = denyListedFolders.some(
        (folder) => manifestPath.startsWith(folder + "/")
      );
      if (custom?.doUpdate === false || isInDenyFolder) {
        continue;
      }
      if (custom && custom.vaultPath && custom.vaultPath !== manifestPath) {
        continue;
      }
      if (prevPath && prevPath !== manifestPath && (!custom || custom.vaultPath === manifestPath)) {
        previewList.push({
          filePath: prevPath,
          action: `moved \u2192 ${manifestPath}`,
          selected: true
        });
      }
    }
    return previewList;
  }
  async forceUpdatePreviewAndConfirm() {
    const previewList = await this.buildForceUpdatePreview();
    const denyItems = [];
    const normalItems = [];
    for (const item of previewList) {
      if (item.action.startsWith("deny-listed")) {
        denyItems.push(item);
      } else {
        normalItems.push(item);
      }
    }
    const modal = new class extends import_obsidian10.Modal {
      constructor(app, normal, denied) {
        super(app);
        this.normal = normal;
        this.denied = denied;
      }
      onOpen() {
        this.contentEl.addEventListener("click", (e) => e.stopPropagation());
        this.contentEl.empty();
        this.titleEl.setText("Force Update Preview");
        this.contentEl.createEl("p", {
          text: 'The following items will be updated. Uncheck any items you do NOT want to change, then click "Confirm and Update".'
        });
        if (this.normal.length) {
          const normalContainer = this.contentEl.createEl("div");
          Object.assign(normalContainer.style, {
            maxHeight: "300px",
            overflowY: "auto",
            marginTop: "1em"
          });
          this.normal.forEach((item) => {
            const row = normalContainer.createDiv();
            Object.assign(row.style, {
              display: "flex",
              alignItems: "flex-start",
              justifyContent: "space-between",
              padding: "6px 0",
              fontFamily: "monospace"
            });
            const label = row.createDiv();
            label.addClass("forceupdate-flexcolumn");
            const labelWrapper = label.createDiv();
            labelWrapper.textContent = item.filePath;
            const note = label.createDiv({ text: item.action });
            note.addClass("forceupdate-note");
            const checkbox = row.createEl("input", { type: "checkbox" });
            checkbox.checked = item.selected;
            checkbox.onchange = () => {
              item.selected = checkbox.checked;
            };
          });
        } else {
          const noCandidates = this.contentEl.createEl("div");
          Object.assign(noCandidates.style, {
            display: "inline-block",
            fontFamily: "monospace",
            fontStyle: "italic",
            marginTop: "0.5em"
          });
          noCandidates.textContent = "No force-update candidates.";
        }
        if (this.denied.length) {
          const denyDetails = this.contentEl.createEl("details", { cls: "vk-section" });
          denyDetails.open = false;
          const summary = denyDetails.createEl("summary", { cls: "vk-section-header" });
          Object.assign(summary.style, {
            cursor: "pointer",
            display: "flex",
            color: "var(--text-faint)",
            alignItems: "center",
            gap: "0.5em",
            marginTop: "1em"
          });
          summary.createEl("span", { text: `Deny-List Files (${this.denied.length})` });
          const toggleIcon = summary.createEl("span", { text: "VV", cls: "vk-toggle-icon" });
          Object.assign(toggleIcon.style, {
            fontWeight: "bold",
            display: "inline-block",
            transition: "transform 0.2s ease",
            transformOrigin: "50% 50%",
            userSelect: "none",
            transform: "rotate(180deg)"
          });
          denyDetails.ontoggle = () => {
            toggleIcon.toggleClass("vv-rotated", !denyDetails.open);
          };
          const denyBody = denyDetails.createDiv({ cls: "vk-section-body" });
          denyBody.addClass("denylist");
          this.denied.forEach((item) => {
            const row = denyBody.createDiv();
            Object.assign(row.style, {
              display: "flex",
              alignItems: "flex-start",
              justifyContent: "space-between",
              padding: "6px 0",
              fontFamily: "monospace",
              color: "var(--text-faint)",
              fontStyle: "italic"
            });
            const labelWrapper = row.createDiv();
            labelWrapper.textContent = item.filePath;
            labelWrapper.addClass("forceupdate-labelwrapper");
            const note = row.createDiv({ text: item.action });
            note.addClass("forceupdate-note-b");
            const checkbox = row.createEl("input", { type: "checkbox" });
            checkbox.checked = item.selected;
            checkbox.disabled = true;
            checkbox.title = "This item is deny-listed";
          });
        }
        if (this.plugin.settings.reparseGamesets) {
          this.contentEl.createDiv({ cls: "mod-aux-text" }).setText("\u{1F504} Refreshing Gameset Data");
        }
        const buttonRow = this.contentEl.createEl("div");
        Object.assign(buttonRow.style, {
          display: "flex",
          justifyContent: "flex-end",
          gap: "0.5em",
          marginTop: "1.5em"
        });
        const cancelBtn = buttonRow.createEl("button", { text: "Cancel" });
        cancelBtn.onclick = () => this.close();
        const confirmBtn = buttonRow.createEl("button", {
          text: "Confirm and Update",
          cls: "mod-cta"
        });
        confirmBtn.onclick = async () => {
          this.close();
          await this.plugin.performForceUpdateWithSelection([...this.normal, ...this.denied]);
        };
      }
      onClose() {
        this.contentEl.empty();
      }
    }(this.app, normalItems, denyItems);
    modal.plugin = this;
    modal.open();
  }
  async updateEntryFromManifest(entry, force = false) {
    const custom = this.settings.customPaths.find((c) => c.manifestKey === entry.key);
    if (custom?.doUpdate === false) {
      return;
    }
    const finalVaultPath = custom?.vaultPath ?? this.resolveVaultPath(entry.path);
    if (!force && await this.fileCacheManager.isUpToDate(finalVaultPath)) {
      return;
    }
    const url = `https://raw.githubusercontent.com/slamwise0001/vvunderlore-toolkit-full/main/${entry.path}`;
    try {
      const res = await fetch(url);
      const text = await res.text();
      await this.app.vault.adapter.write(finalVaultPath, text);
      await this.fileCacheManager.updateCache(finalVaultPath, text, entry.path);
    } catch (e) {
      console.error(`\u274C Error updating ${entry.displayName}:`, e);
    }
  }
  async performForceUpdateWithSelection(previewList) {
    if (this.settings.autoBackupBeforeUpdate) {
    }
    this.settings.backupFiles = {};
    await this.saveSettings();
    try {
      const toUpdate = previewList.filter(
        (item) => item.selected && !item.isFolder && !this.settings.customPaths.some(
          (c) => c.vaultPath === item.filePath && c.doUpdate === false
        )
      );
      for (const item of toUpdate) {
        const entry = this.manifestCache.files.find(
          (f) => this.resolveVaultPath(f.path) === item.filePath
        );
        if (!entry) {
          console.warn(`\u26A0\uFE0F Could not match preview item to manifest: ${item.filePath}`);
          continue;
        }
        await this.updateEntryFromManifest(entry, true);
      }
      for (const entry of this.manifestCache.folders) {
        if (!await this.app.vault.adapter.exists(entry.path)) {
          await this.app.vault.createFolder(entry.path);
        }
      }
      await this.updateVersionFile();
      this.settings.installedVersion = this.settings.latestToolkitVersion ?? "unknown";
      this.settings.lastForceUpdate = (/* @__PURE__ */ new Date()).toISOString();
      await this.saveSettings();
      new import_obsidian10.Notice("\u2705 Toolkit force\u2010updated with your selections.");
      if (this.settings.reparseGamesets) {
        new import_obsidian10.Notice("\u{1F504} Refreshing Game Set Data\u2026");
        await this.refreshGameSetData();
      }
      if (this.settingsTab) {
        await this.settingsTab.updateVersionDisplay();
      }
    } catch (err) {
      console.error("\u274C Force update failed. Version not changed.", err);
      new import_obsidian10.Notice("\u274C One or more files failed. Version NOT updated.");
    }
    if (this.settings.highlightEnabled) {
      this.enableHighlight();
    }
  }
  // ─── SINGLE-FILE UPDATE (with GitHub API + raw fallback) ──────────────
  async updateSingleFileFromGitHub({ githubPath, vaultPath }, force = false) {
    if (this.settings.customizeUpdates) {
      vaultPath = this.resolveVaultPath(githubPath);
      const custom = this.settings.customPaths.find((c) => c.manifestKey === githubPath);
      if (custom?.doUpdate === false) {
        return;
      }
    } else {
      vaultPath = githubPath;
    }
    if (!vaultPath) {
      console.error(`\u274C No valid vault path resolved for ${githubPath}`);
      return;
    }
    const oldVault = this.oldPathsByGithub[githubPath];
    if (oldVault && oldVault !== vaultPath) {
      if (await this.app.vault.adapter.exists(vaultPath)) {
        const stray = await this.app.vault.adapter.read(vaultPath);
        await this.backupFile(vaultPath, stray);
        await this.app.vault.adapter.remove(vaultPath);
      }
      const oldFile = this.app.vault.getAbstractFileByPath(oldVault);
      if (oldFile instanceof import_obsidian10.TFile) {
        await this.app.vault.rename(oldFile, vaultPath);
        const newContent = await this.app.vault.adapter.read(vaultPath);
        await this.fileCacheManager.updateCache(vaultPath, newContent, githubPath);
        return;
      }
    }
    const fileExists = await this.app.vault.adapter.exists(vaultPath);
    if (force && fileExists) {
      const current = await this.app.vault.adapter.read(vaultPath);
      await this.backupFile(vaultPath, current);
    }
    if (!force && fileExists && await this.fileCacheManager.isUpToDate(vaultPath)) {
      return;
    }
    const apiUrl = encodeURI(
      `https://api.github.com/repos/slamwise0001/VVunderlore-Toolkit-Full/contents/${githubPath}?ref=main`
    );
    try {
      let res = await fetch(apiUrl);
      if (res.status === 404) {
        const rawUrl = encodeURI(
          `https://raw.githubusercontent.com/slamwise0001/VVunderlore-Toolkit-Full/main/${githubPath}`
        );
        res = await fetch(rawUrl);
        if (!res.ok) throw new Error(`Raw fetch failed: ${res.statusText}`);
        const content2 = await res.text();
        if (fileExists) {
          await this.app.vault.adapter.write(vaultPath, content2);
        } else {
          await this.app.vault.create(vaultPath, content2);
        }
        await this.fileCacheManager.updateCache(vaultPath, content2, githubPath);
        return;
      }
      if (!res.ok) throw new Error(`GitHub API error: ${res.statusText}`);
      const { download_url } = await res.json();
      const content = await (await fetch(download_url)).text();
      if (fileExists) {
        await this.app.vault.adapter.write(vaultPath, content);
      } else {
        await this.app.vault.create(vaultPath, content);
      }
      await this.fileCacheManager.updateCache(vaultPath, content, githubPath);
    } catch (e) {
      console.error(`\u274C Failed to update ${vaultPath}`, e);
    }
  }
  // ─── PREVIEW + REMOTE-BASELINE + DIFF ─────────────────────────────────
  async previewUpdatesModal() {
    const loading = new class extends import_obsidian10.Modal {
      constructor(app) {
        super(app);
      }
      onOpen() {
        this.contentEl.empty();
        this.contentEl.createDiv({
          text: "\u{1F504} Checking for updates\u2026",
          cls: "mod-warning"
        }).addEventListener("click", (e) => e.stopPropagation());
      }
    }(this.app);
    loading.open();
    await this.syncManifest();
    await this.fetchRemoteBaseline();
    const diffs = await this.buildUpdatePreview();
    loading.close();
    const denyListedLines = [];
    const normalLines = [];
    for (const d of diffs) {
      if (d.startsWith("\u274C deny\u2010listed")) {
        denyListedLines.push(d);
      } else {
        normalLines.push(d);
      }
    }
    const modal = new class extends import_obsidian10.Modal {
      constructor(app, normal, denied) {
        super(app);
        this.normal = normal;
        this.denied = denied;
      }
      onOpen() {
        this.contentEl.empty();
        this.titleEl.setText("Update Preview");
        this.contentEl.createEl("p", {
          text: "Only files whose contents differ from GitHub will be updated:"
        });
        if (this.normal.length) {
          const ul = this.contentEl.createEl("ul");
          this.normal.forEach((line) => {
            const li = ul.createEl("li", { text: line });
          });
        } else {
          this.contentEl.createEl("div", {
            text: "\u2705 Everything is already up to date!",
            cls: "mod-info"
          });
        }
        if (this.denied.length) {
          const denyDetails = this.contentEl.createEl("details", { cls: "vk-section" });
          denyDetails.open = false;
          const summary = denyDetails.createEl("summary", { cls: "vk-section-header" });
          Object.assign(summary.style, {
            cursor: "pointer",
            display: "flex",
            color: "var(--text-faint)",
            alignItems: "center",
            gap: "0.5em"
          });
          summary.createEl("span", { text: `Deny\u2010List Files (${this.denied.length})` });
          const toggleIcon = summary.createEl("span", { text: "VV", cls: "vk-toggle-icon" });
          Object.assign(toggleIcon.style, {
            fontWeight: "bold",
            display: "inline-block",
            transition: "transform 0.2s ease",
            transformOrigin: "50% 50%",
            userSelect: "none",
            transform: "rotate(180deg)"
          });
          denyDetails.ontoggle = () => {
            toggleIcon.toggleClass("vv-rotated", !denyDetails.open);
          };
          const denyBody = denyDetails.createDiv({ cls: "vk-section-body" });
          denyBody.addClass("denylist");
          const denyUl = denyBody.createEl("ul");
          this.denied.forEach((line) => {
            const li = denyUl.createEl("li", { text: line });
            li.addClass("forceupdate-note-c");
          });
        }
        const buttonRow = this.contentEl.createEl("div");
        Object.assign(buttonRow.style, {
          display: "flex",
          justifyContent: "flex-end",
          marginTop: "1.25em"
          // tweak spacing as you like
        });
        const confirmBtn = buttonRow.createEl("button", {
          text: "Confirm & Update",
          cls: "mod-cta"
        });
        confirmBtn.onclick = async () => {
          await this.plugin.updateSelectedToolkitContent();
          this.close();
        };
        const cancelBtn = buttonRow.createEl("button", { text: "Cancel" });
        cancelBtn.onclick = () => this.close();
      }
      onClose() {
        this.contentEl.empty();
      }
    }(this.app, normalLines, denyListedLines);
    modal.plugin = this;
    modal.open();
  }
  async buildUpdatePreview() {
    const changes = [];
    const denyListedFolders = this.settings.customPaths.filter((c) => c.doUpdate === false).map((c) => c.manifestKey);
    for (const f of this.manifestCache.files) {
      if (f.optional) {
        continue;
      }
      const custom = this.settings.customPaths.find((c) => c.manifestKey === f.path);
      const isInDenyFolder = denyListedFolders.some(
        (folder) => f.path.startsWith(folder + "/")
      );
      if (custom?.doUpdate === false || isInDenyFolder) {
        const vp = custom?.vaultPath ?? this.resolveVaultPath(f.path);
        const exists = await this.app.vault.adapter.exists(vp);
        const upToDate = exists && await this.fileCacheManager.isUpToDate(vp);
        if (!exists || !upToDate) {
          changes.push(`\u274C deny\u2010listed \u2013 will not update: ${vp}`);
        }
      }
    }
    if (!this.settings.customizeUpdates) {
      for (const f of this.manifestCache.files) {
        if (f.optional) {
          continue;
        }
        const custom = this.settings.customPaths.find((c) => c.manifestKey === f.path);
        const isInDenyFolder = denyListedFolders.some(
          (folder) => f.path.startsWith(folder + "/")
        );
        if (custom?.doUpdate === false || isInDenyFolder) {
          continue;
        }
        const vp = this.resolveVaultPath(f.path);
        let tag = "";
        if (vp !== f.path) tag = " (remapped)";
        const exists = await this.app.vault.adapter.exists(vp);
        const upToDate = exists && await this.fileCacheManager.isUpToDate(vp);
        if (!exists) {
          changes.push(`\u{1F4C4} New file: ${vp}${tag}`);
        } else if (!upToDate) {
          changes.push(`\u{1F501} Will update: ${vp}${tag}`);
        }
      }
      for (const fld of this.manifestCache.folders) {
        if (fld.optional) {
          continue;
        }
        const isDenyFolder = denyListedFolders.includes(fld.path);
        const exists = await this.app.vault.adapter.exists(fld.path);
        if (!exists && !isDenyFolder) {
          changes.push(`\u{1F4C1} New folder: ${fld.path}`);
        }
      }
      return changes.length ? changes : ["\u2705 Everything is already up to date!"];
    }
    for (const f of this.manifestCache.files) {
      if (f.optional) {
        continue;
      }
      const custom = this.settings.customPaths.find((c) => c.manifestKey === f.path);
      const isInDenyFolder = denyListedFolders.some(
        (folder) => f.path.startsWith(folder + "/")
      );
      if (custom?.doUpdate === false || isInDenyFolder) {
        continue;
      }
      const vp = custom?.vaultPath ?? this.resolveVaultPath(f.path);
      let tag = "";
      if (vp !== f.path) tag = " (remapped)";
      const exists = await this.app.vault.adapter.exists(vp);
      const upToDate = exists && await this.fileCacheManager.isUpToDate(vp);
      if (!exists) {
        changes.push(`\u{1F4C4} New file: ${vp}${tag}`);
      } else if (!upToDate) {
        changes.push(`\u{1F501} Will update: ${vp}${tag}`);
      }
    }
    for (const fld of this.manifestCache.folders) {
      if (fld.optional) {
        continue;
      }
      const isDenyFolder = denyListedFolders.includes(fld.path);
      const exists = await this.app.vault.adapter.exists(fld.path);
      if (!exists && !isDenyFolder) {
        changes.push(`\u{1F4C1} New folder: ${fld.path}`);
      }
    }
    for (const f of this.manifestCache.files) {
      if (f.optional) {
        continue;
      }
      const manifestKey = f.key;
      const manifestPath = f.path;
      const custom = this.settings.customPaths.find((c) => c.manifestKey === manifestKey);
      const prevPath = this.oldPathsByGithub[manifestPath];
      const isInDenyFolder = denyListedFolders.some(
        (folder) => manifestPath.startsWith(folder + "/")
      );
      if (custom?.doUpdate === false || isInDenyFolder) {
        continue;
      }
      if (custom && custom.vaultPath && custom.vaultPath !== manifestPath) {
        continue;
      }
      if (prevPath && prevPath !== manifestPath && (!custom || custom.vaultPath === manifestPath)) {
        changes.push(`\u27A1\uFE0F Moved: ${prevPath} \u2192 ${manifestPath}`);
      }
    }
    return changes.length ? changes : ["\u2705 Everything is already up to date!"];
  }
  // ─── VERSION-CHECK / UPDATE FLOW ─────────────────────────────────────
  async checkForUpdates() {
    const isNewerVersion = (remote, local) => {
      const pa = remote.replace(/^v/, "").split(".").map((n) => parseInt(n, 10) || 0);
      const pb = local.replace(/^v/, "").split(".").map((n) => parseInt(n, 10) || 0);
      for (let i = 0; i < Math.max(pa.length, pb.length); i++) {
        if ((pa[i] || 0) > (pb[i] || 0)) return true;
        if ((pa[i] || 0) < (pb[i] || 0)) return false;
      }
      return false;
    };
    const toolkitPath = ".version.json";
    const toolkitUrl = "https://raw.githubusercontent.com/slamwise0001/vvunderlore-toolkit-full/main/.version.json";
    const pluginUrl = "https://raw.githubusercontent.com/slamwise0001/vvunderlore-toolkit-plugin/main/version.json";
    const changelogUrl = "https://raw.githubusercontent.com/slamwise0001/VVunderlore-Toolkit-Full/main/README.md";
    let localTK = "0.0.0";
    if (this.settings.isFirstRun !== "yes") {
      try {
        const content = await this.app.vault.adapter.read(toolkitPath);
        const json = JSON.parse(content);
        localTK = json.version || localTK;
      } catch (err) {
        console.error("\u274C Failed to read local toolkit version:", err);
      }
    }
    let remoteTK = "0.0.0";
    try {
      const res = await fetch(toolkitUrl);
      const data = await res.json();
      remoteTK = data.version || remoteTK;
      this.settings.latestToolkitVersion = remoteTK;
      if (data.defaultPaths) {
        this.settings.latestDefaults = data.defaultPaths;
      }
      this.settings.lastChecked = (/* @__PURE__ */ new Date()).toISOString();
      await this.saveSettings();
    } catch (err) {
      console.error("\u274C Failed to fetch remote toolkit version:", err);
    }
    if (isNewerVersion(remoteTK, localTK)) {
      new import_obsidian10.Notice(`\u26A0\uFE0F Toolkit update available! Latest: v${remoteTK}`);
      await this.fetchRemoteBaseline();
    }
    const localPL = this.manifest.version;
    let remotePL = localPL;
    try {
      const res = await fetch(pluginUrl);
      const data = await res.json();
      remotePL = data.version || remotePL;
    } catch (err) {
    }
    if (isNewerVersion(remotePL, localPL)) {
      new import_obsidian10.Notice(`\u2699\uFE0F Plugin update available! Latest: v${remotePL}`);
    }
    try {
      const changelogRes = await fetch(changelogUrl);
      this.changelog = await changelogRes.text();
    } catch (err) {
      console.error("\u274C Failed to fetch changelog:", err);
    }
  }
  async loadSettings() {
    const raw = await this.loadData();
    const cleaned = raw ?? {};
    if (cleaned.needsInstall != null) {
      delete cleaned.needsInstall;
    }
    this.settings = Object.assign({}, DEFAULT_SETTINGS, cleaned);
    if (typeof cleaned.preferNameWhenBoth === "boolean") {
      this.settings.sessionTitlePreference = cleaned.preferNameWhenBoth ? "name" : "date";
      delete this.settings.preferNameWhenBoth;
    }
    ;
    this.isFirstRun = !await this.app.vault.adapter.exists(".vvunderlore_installed");
    this.fileCacheManager = new ToolkitFileCacheManager(
      this.app.vault,
      cleaned.fileCache ?? {},
      async () => await this.saveSettings()
    );
    await this.saveSettings();
    if (typeof this.settings.rulesetCompendium !== "string") {
      this.settings.rulesetCompendium = "";
    }
    if (!Array.isArray(this.settings.rulesetReference)) {
      this.settings.rulesetReference = [];
    }
  }
  async saveSettings() {
    await this.saveData({
      ...this.settings,
      fileCache: this.fileCacheManager.getCache()
    });
  }
  async getLocalToolkitVersion() {
    try {
      const content = await this.app.vault.adapter.read(".version.json");
      const json = JSON.parse(content);
      return json.version || null;
    } catch (err) {
      console.error("\u274C Failed to read .version.json:", err);
      return null;
    }
  }
  async updateFullToolkitRepo() {
    const excluded = [
      this.app.vault.configDir,
      ".gitignore",
      ".gitattributes",
      ".DS_Store",
      "plugins",
      "Compendium",
      "README.md",
      ".version.json",
      ".github"
    ];
    const fetchRepoRoot = async () => {
      const apiUrl = "https://api.github.com/repos/slamwise0001/VVunderlore-Toolkit-Full/contents/";
      const response = await fetch(apiUrl);
      if (!response.ok) throw new Error(`Failed to fetch repo root`);
      return await response.json();
    };
    try {
      const contents = await fetchRepoRoot();
      const filtered = contents.filter(
        (item) => !excluded.some(
          (ex) => item.path === ex || item.path.startsWith(`${ex}/`)
        )
      );
      filtered.sort((a, b) => a.type === b.type ? 0 : a.type === "tree" ? -1 : 1);
      for (const item of filtered) {
        if (item.type === "dir") {
          await this.updateFolderFromGitHub(item.path, item.path);
        }
        if (item.type === "file") {
          const response = await fetch(item.download_url);
          const content = await response.text();
          const filePath = item.path;
          const exists = await this.app.vault.adapter.exists(filePath);
          if (!exists) {
            await this.app.vault.create(filePath, content);
          } else {
            const current = await this.app.vault.adapter.read(filePath);
            if (current !== content) {
              await this.app.vault.adapter.write(filePath, content);
            }
          }
          await this.fileCacheManager.updateCache(filePath, content, item.path, false);
        }
      }
      await this.saveSettings();
      const markerPath = ".vvunderlore_installed";
      if (!await this.app.vault.adapter.exists(markerPath)) {
        await this.app.vault.create(markerPath, "");
      }
      if (this.settings.highlightEnabled) {
        this.enableHighlight();
      }
      new import_obsidian10.Notice("\u2705 VVunderlore Toolkit successfully installed!");
    } catch (err) {
      console.error("\u274C updateFullToolkitRepo() error:", err);
      new import_obsidian10.Notice("\u274C Failed to update toolkit. See console for details.");
    }
  }
  async updateSelectedToolkitContent() {
    if (this.settings.autoBackupBeforeUpdate) {
      const folder = await this.backupManager.backupVaultMirror("pre-update");
      new import_obsidian10.Notice(`Vault mirror backup created at: ${folder}`);
    }
    if (!this.settings.latestDefaults) {
      new import_obsidian10.Notice("\u274C GitHub defaults not loaded yet.");
      return;
    }
    const allManifestFiles = this.manifestCache.files.map((f) => f.path);
    const fileOverrides = Object.fromEntries(
      this.settings.customPaths.map((c) => [c.manifestKey, c])
    );
    try {
      for (const ghPath of allManifestFiles) {
        const override = fileOverrides[ghPath];
        if (override?.doUpdate === false) {
          continue;
        }
        const vaultPath = this.settings.customizeUpdates ? this.resolveVaultPath(ghPath) : ghPath;
        const entry = this.manifestCache.files.find((f) => f.path === ghPath);
        if (!entry) continue;
        await this.updateEntryFromManifest(entry, false);
      }
      for (const folder of this.manifestCache.folders) {
        if (!await this.app.vault.adapter.exists(folder.path)) {
          await this.app.vault.createFolder(folder.path);
        }
      }
      await this.updateVersionFile();
      this.settings.installedVersion = this.settings.latestToolkitVersion;
      await this.saveSettings();
      new import_obsidian10.Notice("\u2705 Toolkit content updated.");
      if (this.settingsTab) {
        await this.settingsTab.updateVersionDisplay();
      }
    } catch (err) {
      console.error("\u274C CUstom update failed. Version not updated.", err);
      new import_obsidian10.Notice("\u274C Update failed. See console for details.");
    }
    if (this.settings.highlightEnabled) {
      this.enableHighlight();
    }
  }
  async updateFolderFromGitHub(githubFolderPath, vaultFolderPath) {
    const excluded = [
      this.app.vault.configDir,
      ".gitignore",
      ".gitattributes",
      ".DS_Store",
      "plugins",
      "Compendium",
      "README.md",
      ".version.json",
      ".github"
    ];
    if (excluded.some((ex) => githubFolderPath === ex || githubFolderPath.startsWith(`${ex}/`))) {
      return;
    }
    const apiUrl = `https://api.github.com/repos/slamwise0001/VVunderlore-Toolkit-Full/contents/${githubFolderPath}`;
    try {
      const response = await fetch(apiUrl);
      if (!response.ok) throw new Error(`Failed to fetch folder: ${githubFolderPath}`);
      const files = await response.json();
      if (!await this.app.vault.adapter.exists(vaultFolderPath)) {
        await this.app.vault.createFolder(vaultFolderPath);
      }
      for (const file of files) {
        if (excluded.some((ex) => file.path === ex || file.path.startsWith(`${ex}/`))) {
          continue;
        }
        const filePath = `${vaultFolderPath}/${file.name}`;
        if (file.type === "file") {
          const fileResponse = await fetch(file.download_url);
          const content = await fileResponse.text();
          const exists = await this.app.vault.adapter.exists(filePath);
          if (exists) {
            const current = await this.app.vault.adapter.read(filePath);
            if (current !== content) {
              await this.backupFile(filePath, current);
            }
          }
          if (!exists) {
            await this.app.vault.create(filePath, content);
          } else {
            if (await this.app.vault.adapter.read(filePath) !== content) {
              await this.app.vault.adapter.write(filePath, content);
            }
          }
          await this.fileCacheManager.updateCache(filePath, content, file.path, false);
        } else if (file.type === "dir") {
          await this.updateFolderFromGitHub(file.path, `${vaultFolderPath}/${file.name}`);
        }
      }
      await this.saveSettings();
      new import_obsidian10.Notice(`\u2705 Folder synced: ${vaultFolderPath}`);
    } catch (error) {
      console.error(`\u274C Failed to sync folder with m-repo: ${vaultFolderPath}`, error);
      new import_obsidian10.Notice(`\u274C Failed to update folder: ${vaultFolderPath}`);
    }
  }
  async rebuildFileCache() {
    const cache = this.fileCacheManager;
    const tasks = [];
    for (const entry of this.manifestCache.files) {
      const vaultPath = this.resolveVaultPath(entry.path);
      if (await this.app.vault.adapter.exists(vaultPath)) {
        tasks.push((async () => {
          const content = await this.app.vault.adapter.read(vaultPath);
          await cache.updateCache(vaultPath, content, entry.path, false);
        })());
      }
    }
    for (const folderEntry of this.manifestCache.folders) {
      const folderPath = folderEntry.path;
      const folder = this.app.vault.getAbstractFileByPath(folderPath);
      if (folder instanceof import_obsidian10.TFolder) {
        import_obsidian10.Vault.recurseChildren(folder, (file) => {
          if (file instanceof import_obsidian10.TFile && file.extension === "md") {
            const filePath = file.path;
            tasks.push((async () => {
              const content = await this.app.vault.adapter.read(filePath);
              await cache.updateCache(filePath, content, filePath, false);
            })());
          }
        });
      }
    }
    const batchSize = 10;
    for (let i = 0; i < tasks.length; i += batchSize) {
      await Promise.all(tasks.slice(i, i + batchSize));
    }
    await this.saveSettings();
  }
  async showIndexingModal() {
    const modal = new class extends import_obsidian10.Modal {
      constructor(app) {
        super(app);
      }
      onOpen() {
        this.contentEl.addEventListener("click", (e) => e.stopPropagation());
        this.titleEl.setText("\u{1F504} Indexing Toolkit Files...");
        this.contentEl.createEl("p", {
          text: "Indexing and caching your VVunderlore Vault for faster updates and safer syncing."
        });
      }
    }(this.app);
    modal.open();
    await this.rebuildFileCache();
    modal.close();
    new import_obsidian10.Notice("\u2705 VVunderlore caching complete.");
  }
  async updateVersionFile() {
    if (!this.settings.latestToolkitVersion) {
      return;
    }
    const versionPath = ".version.json";
    const content = JSON.stringify({ version: this.settings.latestToolkitVersion }, null, 2);
    const exists = await this.app.vault.adapter.exists(versionPath);
    if (exists) {
      await this.app.vault.adapter.write(versionPath, content);
    } else {
      await this.app.vault.create(versionPath, content);
    }
  }
  /** main.ts **/
  /** 
   * Install the selected compendium and zero or more reference editions.
   */
  async installFullToolkit(opts = { compendium: "", references: [] }) {
    const { compendium, references } = opts;
    if (!compendium) {
      throw new Error("No compendium edition selected");
    }
    let installSucceeded = false;
    try {
      const treeApi = "https://api.github.com/repos/slamwise0001/VVunderlore-Toolkit-Full/git/trees/main?recursive=1";
      const resp = await fetch(treeApi);
      if (!resp.ok) {
        throw new Error(`Failed to list repo tree: ${resp.statusText}`);
      }
      const json = await resp.json();
      const items = Array.isArray(json.tree) ? json.tree : [];
      const staticEntries = items.filter(
        (item) => !this.excludedPaths.some(
          (ex) => item.path === ex || item.path.startsWith(`${ex}/`)
        )
      ).sort((a, b) => a.type === b.type ? 0 : a.type === "tree" ? -1 : 1);
      for (const entry of staticEntries) {
        if (entry.type === "tree") {
          if (!await this.app.vault.adapter.exists(entry.path)) {
            await this.app.vault.createFolder(entry.path);
          }
        } else {
          const rawUrl = `https://raw.githubusercontent.com/slamwise0001/VVunderlore-Toolkit-Full/main/${encodeURIComponent(entry.path)}`;
          const fileResp = await fetch(rawUrl);
          if (!fileResp.ok) continue;
          const text = await fileResp.text();
          if (await this.app.vault.adapter.exists(entry.path)) {
            const old = await this.app.vault.adapter.read(entry.path);
            if (old !== text) {
              await this.app.vault.adapter.write(entry.path, text);
            }
          } else {
            await this.app.vault.create(entry.path, text);
          }
        }
      }
      this.settings.rulesetCompendium = compendium;
      const pickedRefs = references.length > 0 ? references : this.settings.rulesetReference;
      this.settings.rulesetReference = pickedRefs;
      await this.saveSettings();
      const jobs = [
        importRulesetData({ app: this.app, editionKey: compendium, targetPath: "Compendium" }),
        ...pickedRefs.map((refKey) => {
          const displayName = getRulesetDisplayName(refKey);
          return importRulesetData({
            app: this.app,
            editionKey: refKey,
            targetPath: `Resources/Rulesets/${displayName}`
          });
        })
      ];
      await Promise.all(jobs);
      const parseJobs = [
        importRulesetData({
          app: this.app,
          editionKey: compendium,
          targetPath: `Compendium`
        }),
        ...references.map((refKey) => {
          const displayName = getRulesetDisplayName(refKey);
          return importRulesetData({
            app: this.app,
            editionKey: refKey,
            targetPath: `Resources/Rulesets/${displayName}`
          });
        })
      ];
      await Promise.all(parseJobs);
      const marker = ".vvunderlore_installed";
      if (!await this.app.vault.adapter.exists(marker)) {
        await this.app.vault.create(marker, "");
      }
      this.settings.highlightEnabled = true;
      await this.saveSettings();
      this.enableHighlight();
      installSucceeded = true;
    } catch (err) {
      console.error("\u274C installFullToolkit()", err);
    } finally {
      if (this.settingsTab) this.settingsTab.display();
      new import_obsidian10.Notice(
        installSucceeded ? "\u2705 VVunderlore Toolkit successfully installed!" : "\u274C Failed to install toolkit. See console for details."
      );
    }
  }
  // * Re-parse all gameset data (ruleset compendium + reference sets)
  async refreshGameSetData() {
    const { rulesetCompendium, rulesetReference } = this.settings;
    if (!rulesetCompendium && rulesetReference.length === 0) {
      new import_obsidian10.Notice("\u26A0\uFE0F No gameset keys set; nothing to refresh.");
      return;
    }
    const jobs = [];
    if (rulesetCompendium) {
      jobs.push(importRulesetData({
        app: this.app,
        editionKey: rulesetCompendium,
        targetPath: "Compendium"
      }));
    }
    for (const ref of rulesetReference) {
      const displayName = getRulesetDisplayName(ref);
      jobs.push(importRulesetData({
        app: this.app,
        editionKey: ref,
        targetPath: `Resources/Rulesets/${displayName}`
      }));
    }
    await Promise.all(jobs);
    new import_obsidian10.Notice("\u2705 Game Set Data refreshed.");
  }
};
// Annotate the CommonJS export names for ESM import in node:
0 && (module.exports = {
  InstallingModal
});
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsic3JjL21haW4udHMiLCAic3JjL3NldHRpbmdzLnRzIiwgInNyYy9maXJzdGluc3RhbGxjb25maXJtLnRzIiwgInNyYy9lZGl0aW9ucy50cyIsICJzcmMvcGFyc2Vycy81ZS0yMDE0L2luc3RhbGxlci50cyIsICJzcmMvcGFyc2Vycy81ZS0yMDE0L2hlbHBlcnMvc291cmNlTWFwLnRzIiwgInNyYy9wYXJzZXJzLzVlLTIwMTQvaGVscGVycy90YWdSZXBsYWNlci50cyIsICJzcmMvcGFyc2Vycy81ZS0yMDE0L2hlbHBlcnMvbWFya2Rvd25UYWJsZS50cyIsICJzcmMvcGFyc2Vycy81ZS0yMDE0L2hlbHBlcnMvZm9ybWF0RW50cnkudHMiLCAic3JjL3BhcnNlcnMvNWUtMjAxNC9iZXN0aWFyeS50cyIsICJzcmMvcGFyc2Vycy81ZS0yMDE0L2l0ZW1zLnRzIiwgInNyYy9wYXJzZXJzLzVlLTIwMTQvaGVscGVycy9mcm9udG1hdHRlci50cyIsICJzcmMvcGFyc2Vycy81ZS0yMDE0L3NwZWxscy50cyIsICJzcmMvcGFyc2Vycy81ZS0yMDE0L3NwZWNpZXMudHMiLCAic3JjL3BhcnNlcnMvNWUtMjAxNC9jbGFzc2VzLnRzIiwgInNyYy9wYXJzZXJzLzVlLTIwMTQvcnVsZXMudHMiLCAic3JjL3BhcnNlcnMvNWUtMjAxNC9mZWF0cy50cyIsICJzcmMvcGFyc2Vycy81ZS0yMDE0L2JhY2tncm91bmRzLnRzIiwgInNyYy9wYXJzZXJzLzVlLTIwMjUvaW5zdGFsbGVyLnRzIiwgInNyYy9wYXJzZXJzLzVlLTIwMjUvaGVscGVycy9zb3VyY2VNYXAudHMiLCAic3JjL3BhcnNlcnMvNWUtMjAyNS9oZWxwZXJzL3RhZ1JlcGxhY2VyLnRzIiwgInNyYy9wYXJzZXJzLzVlLTIwMjUvaGVscGVycy9tYXJrZG93blRhYmxlLnRzIiwgInNyYy9wYXJzZXJzLzVlLTIwMjUvaGVscGVycy9mb3JtYXRFbnRyeS50cyIsICJzcmMvcGFyc2Vycy81ZS0yMDI1L2Jlc3RpYXJ5LnRzIiwgInNyYy9wYXJzZXJzLzVlLTIwMjUvaXRlbXMudHMiLCAic3JjL3BhcnNlcnMvNWUtMjAyNS9oZWxwZXJzL2Zyb250bWF0dGVyLnRzIiwgInNyYy9wYXJzZXJzLzVlLTIwMjUvc3BlbGxzLnRzIiwgInNyYy9wYXJzZXJzLzVlLTIwMjUvc3BlY2llcy50cyIsICJzcmMvcGFyc2Vycy81ZS0yMDI1L2NsYXNzZXMudHMiLCAic3JjL3BhcnNlcnMvNWUtMjAyNS9ydWxlcy50cyIsICJzcmMvcGFyc2Vycy81ZS0yMDI1L2ZlYXRzLnRzIiwgInNyYy9wYXJzZXJzLzVlLTIwMjUvYmFja2dyb3VuZHMudHMiLCAic3JjL3J1bGVzZXRJbnN0YWxsZXIudHMiLCAic3JjL2ZpbGVDYWNoZU1hbmFnZXIudHMiLCAic3JjL2JhY2t1cC9CYWNrdXBNYW5hZ2VyLnRzIiwgInNyYy9zaWRlYmFyL3NiLXdvcmxkYnVpbGRpbmcudHMiLCAic3JjL3NpZGViYXIvc2ItZ2FtZXBsYXkudHMiXSwKICAic291cmNlc0NvbnRlbnQiOiBbImltcG9ydCB7XG4gIEFwcCxcbiAgUGx1Z2luLFxuICBOb3RpY2UsXG4gIE1vZGFsLFxuICBTZXR0aW5nLFxuICBURm9sZGVyLFxuICBURmlsZSxcbiAgVmF1bHQsXG4gIHJlcXVlc3RVcmwsXG4gIFdvcmtzcGFjZUxlYWYsXG4gIGFkZEljb25cbn0gZnJvbSAnb2JzaWRpYW4nO1xuXG5pbXBvcnQgeyBUb29sa2l0U2V0dGluZ3NUYWIgfSBmcm9tICcuL3NldHRpbmdzJztcbmltcG9ydCB7IFRvb2xraXRGaWxlQ2FjaGVNYW5hZ2VyIH0gZnJvbSAnLi9maWxlQ2FjaGVNYW5hZ2VyJztcbmltcG9ydCB0eXBlIHsgVG9vbGtpdEZpbGVDYWNoZUVudHJ5IH0gZnJvbSAnLi9maWxlQ2FjaGVNYW5hZ2VyJztcbmltcG9ydCB7IEJhY2t1cE1hbmFnZXIgfSBmcm9tICcuL2JhY2t1cC9CYWNrdXBNYW5hZ2VyJztcbmltcG9ydCB7IHNob3dDdXN0b21JbnN0YWxsTW9kYWwgfSBmcm9tICcuL2N1c3RvbUluc3RhbGxNb2RhbCc7XG5pbXBvcnQgeyBBVkFJTEFCTEVfRURJVElPTlMgfSBmcm9tICcuL2VkaXRpb25zJztcbmltcG9ydCB7IGltcG9ydFJ1bGVzZXREYXRhIH0gZnJvbSAnLi9ydWxlc2V0SW5zdGFsbGVyJztcbmltcG9ydCB7IENvbmZpcm1GcmVzaEluc3RhbGxNb2RhbCB9IGZyb20gJy4vZmlyc3RpbnN0YWxsY29uZmlybSc7XG5pbXBvcnQgXCIuLi9zdHlsZXMuY3NzXCI7XG5pbXBvcnQgeyBTaWRlYmFyVGVtcGxhdGVzVmlldywgU0lERUJBUl9WSUVXX1RZUEUgfSBmcm9tICcuL3NpZGViYXIvc2Itd29ybGRidWlsZGluZyc7XG5pbXBvcnQgeyBHYW1lcGxheVNpZGViYXJWaWV3LCBHQU1FUExBWV9WSUVXX1RZUEUgfSBmcm9tICcuL3NpZGViYXIvc2ItZ2FtZXBsYXknO1xuXG5mdW5jdGlvbiBnZXRSdWxlc2V0RGlzcGxheU5hbWUoa2V5OiBzdHJpbmcpOiBzdHJpbmcge1xuICBjb25zdCBlZCA9IEFWQUlMQUJMRV9FRElUSU9OUy5maW5kKGUgPT4gZS5pZCA9PT0ga2V5KTtcbiAgcmV0dXJuIGVkPy5sYWJlbCA/PyBrZXk7XG59XG5cbmNvbnN0IG1hcG1ha2luZ19pY29uID0gYFxuICA8c3ZnIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiB2aWV3Qm94PVwiMCAwIDI0IDI0XCIgYXJpYS1oaWRkZW49XCJ0cnVlXCI+XG4gICAgPGcgc3Ryb2tlPVwiY3VycmVudENvbG9yXCIgc3Ryb2tlLXdpZHRoPVwiMlwiIGZpbGw9XCJub25lXCIgc3Ryb2tlLWxpbmVjYXA9XCJyb3VuZFwiIHN0cm9rZS1saW5lam9pbj1cInJvdW5kXCI+XG4gICAgICA8cGF0aCBkPVwiTTIwLjk3IDEwLjE1djcuMDhjMCAuMzgtLjIxLjcyLS41NS44OWwtNC41NSAyLjI4Yy0uNTYuMjgtMS4yMy4yOC0xLjc5IDBsLTQuMjEtMi4xMWMtLjU2LS4yOC0xLjIzLS4yOC0xLjc5IDBMNC40MiAyMC4xMmExIDEgMCAwIDEtMS40NS0uOVY2LjQ3YzAtLjM4LjIxLS43Mi41NS0uODlsNC41NS0yLjI4Yy41Ni0uMjggMS4yMy0uMjggMS43OSAwbDIuNTIgMS4yOFwiLz5cbiAgICAgIDxwYXRoIGQ9XCJNMTQuOTcgMTMuNTF2Ny4xXCIvPlxuICAgICAgPHBhdGggZD1cIk04Ljk3IDMuMDl2MTVcIi8+XG4gICAgICA8cGF0aCBkPVwiTTIxLjQ4IDUuMDNhMS43OSAxLjc5IDAgMSAwLTIuNTMtMi41M2wtNC4yMiA0LjIyYy0uMi4yLS4zNS40NS0uNDMuNzJsLS43IDIuNDJhLjQuNCAwIDAgMCAuNTMuNDlsMi40Mi0uN2MuMjctLjA4LjUyLS4yMy43Mi0uNDNsNC4yMi00LjIyWlwiLz5cbiAgICA8L2c+XG4gIDwvc3ZnPlxuYDtcblxuY29uc3QgZ2FtZXBsYXlfaWNvbiA9IGBcbjxzdmcgaWQ9XCJMYXllcl8xXCIgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiIHZlcnNpb249XCIxLjFcIiB2aWV3Qm94PVwiMCAwIDI0IDI0XCI+XG4gIDwhLS0gR2VuZXJhdG9yOiBBZG9iZSBJbGx1c3RyYXRvciAyOS4yLjEsIFNWRyBFeHBvcnQgUGx1Zy1JbiAuIFNWRyBWZXJzaW9uOiAyLjEuMCBCdWlsZCAxMTYpICAtLT5cbiAgPGRlZnM+XG4gICAgPHN0eWxlPlxuICAgICAgLnN0MCB7XG4gICAgICAgIGZpbGw6IGN1cnJlbnRDb2xvcjtcbiAgICAgIH1cblxuICAgICAgLnN0MCwgLnN0MSB7XG4gICAgICAgIHN0cm9rZTogY3VycmVudENvbG9yO1xuICAgICAgICBzdHJva2UtbWl0ZXJsaW1pdDogMTA7XG4gICAgICB9XG5cbiAgICAgIC5zdDAsIC5zdDEsIC5zdDIge1xuICAgICAgICBzdHJva2Utd2lkdGg6IDJweDtcbiAgICAgIH1cblxuICAgICAgLnN0MSwgLnN0MiB7XG4gICAgICAgIGZpbGw6IG5vbmU7XG4gICAgICB9XG5cbiAgICAgIC5zdDIge1xuICAgICAgICBzdHJva2U6IGN1cnJlbnRDb2xvcjtcbiAgICAgICAgc3Ryb2tlLWxpbmVjYXA6IHJvdW5kO1xuICAgICAgICBzdHJva2UtbGluZWpvaW46IHJvdW5kO1xuICAgICAgfVxuXG4gICAgICAuc3QzIHtcbiAgICAgICAgZGlzcGxheTogbm9uZTtcbiAgICAgIH1cbiAgICA8L3N0eWxlPlxuICA8L2RlZnM+XG4gIDxnIGlkPVwiTGF5ZXJfNFwiIGNsYXNzPVwic3QzXCI+XG4gICAgPHBhdGggY2xhc3M9XCJzdDBcIiBkPVwiTTExLjk4LTI1LjE2Yy0xLjI5LDAtMi43OS4xOC0zLjI1LjIzLS4wNywwLS4xMi0uMDMtLjEyLS4wOGwuMTktMi41NmMwLS4wOC4wNS0uMTYuMTEtLjIxLjIyLS4xNy45MS0uNTEsMy4wNi0uNTFcIi8+XG4gICAgPHBhdGggY2xhc3M9XCJzdDFcIiBkPVwiTTguMjQtMjYuNjFzLTIuMzkuNDMtMi43OC43NmMtLjIyLjE5LTEuNTIsOS44OS0xLjksMTIuOTEtLjA3LjU2LjE4LDEuMTIuNjQsMS40NC41Ny4zOSwxLjMxLjg0LDEuNjcuODRcIi8+XG4gICAgPHBhdGggY2xhc3M9XCJzdDFcIiBkPVwiTTExLjk4LTguMzZjLTIuOTIsMC01LjA0LS4wOS01LjctLjEzLS4xMywwLS4yMS0uMTEtLjIxLS4yNC4wMy0uNDIuMTEtMS41LjE2LTIuMS4wMi0uMjYuMTktLjQ5LjQ0LS41N2wyLjY1LTEuMjhoMi42NlwiLz5cbiAgICA8cGF0aCBjbGFzcz1cInN0MFwiIGQ9XCJNMTEuOTgtOC4zNmMtMi45MiwwLTUuMDQtLjA5LTUuNy0uMTMtLjEzLDAtLjIxLS4xMS0uMjEtLjI0LjAzLS40Mi4xMS0xLjUuMTYtMi4xLjAyLS4yNi4xOS0uNDkuNDQtLjU3bDIuNjUtMS4yOGgyLjY2XCIvPlxuICAgIDxwYXRoIGNsYXNzPVwic3QwXCIgZD1cIk0xMS45OC04LjM2YzIuOTIsMCw1LjA0LS4wOSw1LjctLjEzLjEzLDAsLjIxLS4xMS4yMS0uMjQtLjAzLS40Mi0uMTEtMS41LS4xNi0yLjEtLjAyLS4yNi0uMTktLjQ5LS40NC0uNTdsLTIuNjUtMS4yOGgtMi42NlwiLz5cbiAgICA8cGF0aCBjbGFzcz1cInN0MFwiIGQ9XCJNMTEuOTgtMjUuMTZjMS4yOSwwLDIuNzkuMTgsMy4yNS4yMy4wNywwLC4xMi0uMDMuMTItLjA4bC0uMTktMi41NmMwLS4wOC0uMDUtLjE2LS4xMS0uMjEtLjIyLS4xNy0uOTEtLjUxLTMuMDYtLjUxXCIvPlxuICAgIDxwYXRoIGNsYXNzPVwic3QxXCIgZD1cIk05LTI0LjkybC0xLjQ3LDYuMTljLS4xMi41Mi0uMTksMS4wNi0uMTcsMS41OSwwLC40MS4wNS44OC4xNSwxLjI5LjI1Ljk0LDEuMzksMi4zLDEuMzksMy4xN2g2LjE3YzAtLjg2LDEuMTMtMi4yMywxLjM4LTMuMTcuMTEtLjQuMTQtLjg4LjE1LTEuMjkuMDEtLjU0LS4wNS0xLjA3LS4xNy0xLjU5bC0xLjQ3LTYuMTktLjIzLS4xMWMtMS44My0uMjItMy42Ny0uMjItNS41LDAsMCwwLS4yMy4xMS0uMjMuMTFaXCIvPlxuICAgIDxwYXRoIGNsYXNzPVwic3QxXCIgZD1cIk0xNS43Ny0yNi42MXMyLjM5LjQzLDIuNzguNzZjLjIyLjE5LDEuNTIsOS44OSwxLjksMTIuOTEuMDcuNTYtLjE4LDEuMTItLjY0LDEuNDQtLjU3LjM5LTEuMzEuODQtMS42Ny44NFwiLz5cbiAgPC9nPlxuICA8ZyBpZD1cIkxheWVyXzVcIiBjbGFzcz1cInN0M1wiPlxuICAgIDxwYXRoIGNsYXNzPVwic3QyXCIgZD1cIk0yMC45Ny0xNi4xNnY3LjA4YzAsLjM4LS4yMS43Mi0uNTUuODlsLTQuNTUsMi4yOGMtLjU2LjI4LTEuMjMuMjgtMS43OSwwbC00LjIxLTIuMTFjLS41Ni0uMjgtMS4yMy0uMjgtMS43OSwwbC0zLjY2LDEuODNjLS40OS4yNS0xLjA5LjA1LTEuMzQtLjQ1LS4wNy0uMTQtLjExLS4yOS0uMTEtLjQ1di0xMi43NmMwLS4zOC4yMS0uNzIuNTUtLjg5bDQuNTUtMi4yOGMuNTYtLjI4LDEuMjMtLjI4LDEuNzksMGwyLjUyLDEuMjhcIi8+XG4gICAgPHBhdGggY2xhc3M9XCJzdDJcIiBkPVwiTTE0Ljk3LTEyLjh2Ny4xXCIvPlxuICAgIDxwYXRoIGNsYXNzPVwic3QyXCIgZD1cIk04Ljk3LTIzLjIzdjE1XCIvPlxuICAgIDxwYXRoIGNsYXNzPVwic3QyXCIgZD1cIk0yMS40OC0yMS4yOWMuNy0uNy43LTEuODMsMC0yLjUzcy0xLjgzLS43LTIuNTMsMGwtNC4yMiw0LjIyYy0uMi4yLS4zNS40NS0uNDMuNzJsLS43LDIuNDJjLS4wNy4yMi4wNi40Ni4yOS41Mi4wOC4wMi4xNi4wMi4yNCwwbDIuNDItLjdjLjI3LS4wOC41Mi0uMjMuNzItLjQzbDQuMjItNC4yMmgwWlwiLz5cbiAgPC9nPlxuICA8ZyBpZD1cIkxheWVyXzZcIj5cbiAgICA8cGF0aCBjbGFzcz1cInN0MlwiIGQ9XCJNNS44NywxMC44NWgxMi4xNXY5LjE1YzAsLjU1LS40NSwxLTEsMUg2Ljg3Yy0uNTUsMC0xLS40NS0xLTF2LTkuMTVoMFpcIi8+XG4gICAgPHBvbHlsaW5lIGNsYXNzPVwic3QyXCIgcG9pbnRzPVwiNS44NyAxMC44NSAxLjk3IDkuMSAxLjk3IDE5LjE1IDYuNTYgMjAuOTVcIi8+XG4gICAgPHBvbHlsaW5lIGNsYXNzPVwic3QyXCIgcG9pbnRzPVwiMTguMDIgMTAuODUgMjIgOS4xIDIyIDE5LjE1IDE3LjMzIDIwLjk1XCIvPlxuICA8L2c+XG4gIDxnIGlkPVwiTGF5ZXJfN1wiPlxuICAgIDxwYXRoIGNsYXNzPVwic3QyXCIgZD1cIk04LjUsNS43N3MtMi4wOC0uOTUtMS44OS0zLjM0YzAsMCwxLjU2LDEuODQsMi43OSwxLjg2XCIvPlxuICAgIDxwYXRoIGNsYXNzPVwic3QyXCIgZD1cIk0xNS41MSw1Ljc3czIuMDgtLjk1LDEuODktMy4zNGMwLDAtMS41NiwxLjg0LTIuNzksMS44NlwiLz5cbiAgPC9nPlxuICA8ZyBpZD1cIkxheWVyXzNcIiBjbGFzcz1cInN0M1wiPlxuICAgIDxwYXRoIGNsYXNzPVwic3QyXCIgZD1cIk00MC42NiwxMS45N2gtNVwiLz5cbiAgICA8cGF0aCBjbGFzcz1cInN0MlwiIGQ9XCJNNDAuNjYsNy45N2gtNVwiLz5cbiAgICA8cGF0aCBjbGFzcz1cInN0MlwiIGQ9XCJNNDQuNjYsMTYuOTdWNC45N2MwLTEuMS0uOS0yLTItMmgtMTNcIi8+XG4gICAgPHBhdGggY2xhc3M9XCJzdDJcIiBkPVwiTTMzLjY2LDIwLjk3aDEyYzEuMSwwLDItLjksMi0ydi0xYzAtLjU1LS40NS0xLTEtMWgtMTBjLS41NSwwLTEsLjQ1LTEsMXYxYzAsMS4xLS45LDItMiwycy0yLS45LTItMlY0Ljk3YzAtMS4xLS45LTItMi0ycy0yLC45LTIsMnYyYzAsLjU1LjQ1LDEsMSwxaDNcIi8+XG4gIDwvZz5cbiAgPHBhdGggY2xhc3M9XCJzdDJcIiBkPVwiTTE0LjE3LDEwLjY3Yy45Ny0uNjksMS42NS0yLjA1LDEuNjUtMy4zNCwwLTIuMTEtMS43MS0zLjgyLTMuODItMy44MnMtMy44MiwxLjcxLTMuODIsMy44MmMwLDEuMjkuNjksMi42NCwxLjY2LDMuMzRcIi8+XG48L3N2Zz5cbmBcblxuY29uc3QgbG9hZGluZ0ljb24gPVxuICAnZGF0YTppbWFnZS9wbmc7YmFzZTY0LCcgK1xuICAnaVZCT1J3MEtHZ29BQUFBTlNVaEVVZ0FBQU5FQUFBRFJDQVlBQUFCU09sZnZBQUFBQ1hCSVdYTUFBQmNSQUFBWEVRSEtKdk0vQUFBTDVrbEVRVlI0bk8zZFQ2d2RaUm5IOFY5aHlndUZZbHRLU2dYeEZBaG9RcVVVUWlCR3VCZ3hFVEc2cVVGY3RCcE4zTmJFdURDUjI4VDRKeTVBalFrTEUwdDBvU1pHZE9YQzJJTktNQnJOM1lBTEd6a1FJRXFVWHJGQ1g1d1dGMmRNak03em5ONzNtWmw3enUzM2s1ek5QSmwzM252UC9mVk1udlAyblUzQy82bFNPaVRwWU1mREhxNXpYdWw0VE15QmFyMG5NS2RHa3BZNkhuTmJ4K05oVHB5MzNoTUFGaDBoQW9JSUVSQkVpSUFnUWdRRTBaMWJ1Nk9TSGpWcUJ5VWRNbW9QVlNtdDlqR2hOblhPZHc5MXJYTWRJVnE3Wit1Y3gyMkZLcVVsNTd4OXZjd0c2NDdiT1NDSUVBRkJoQWdJSWtSQUVDRUNndWpPRGVld3BKSlYzTGRJMm03VURraTZxcTFRcFhTczRGcTB4Z3NRb3VHc1dLMXhUNVZTSldtWFVmNkhwTk5HYldtdDEwSVpidWVBSUVJRUJCRWlJSWdRQVVHRUNBaWlPOWVoT3VkbFNjc2REL3M1bFhYYXJKWG1rdlFIcTFDbDlFYkJ0Y2JuY211Y1R5SWdpQkFCUVlRSUNDSkVRQkFoQW9JSUVSQzBhYjBuc0dpcWxKWWxQZGp4c1BkSWV0eW8xWFhPclczblpxWDJrbkhlVzV6cmZkT3B2ZE9wUFd3YzN5UHA0MFp0dzdlLytTUUNnZ2dSRUVTSWdDQkNCQVFSSWlDSUVBRkJHN3JGM1d6clc3Umh4eHk1dTJSdkJrK1YwblZXcmM3NXVIUGVBYXNrYVl0UnUwSFNaNHphaG1oLzgwa0VCQkVpSUlnUUFVR0VDQWdpUkVEUVF1eXhVS1cwVFdVUHlScEpHbmM2bVg0Nm1qZEoybWJVOWxVcFdlZXQxRG1YUEgzdnRZSnpwT21PcTIwdWtuU1pVWHRWOW5zd2NSNk10bHJuWExMdDh1QVdvc1VkYUZWMzNrS3RVanBQOXUvTiszMmVrV1J0QW5KTTBsMEYwK204L2UycFVob1pwZDJTN2pOcXo5UTVmOHNZYjBuMis3b3c3Vzl1NTRBZ1FnUUVFU0lnaUJBQlFZUUlDSnFiRnZlTU52WklaYTFxczBYYWRKcEdCV051a3QrRnMycG5uSFBlNU5SV0pGbHQ3SkwydHFxVTN1YVVUem0xUzR6am01MjVuSFRHVzFWWiszdFM1enh4eGgzVTNMUzRoMjUzOXJUaFNCLzZXTVg5YmFmOG5GUDduWEg4aktUWGpkcUpPdWZmbnRYRS9zdU12NGNqemI3bmM0SGJPU0NJRUFGQmhBZ0lJa1JBRUNFQ2dnWnZjVHR0eTVIc2RxZlhxaTVkNFMzbmVwNlJ5bHJqSHErTm5hcVVyalpxSnlYVmJZVTY1MWVjNjNudis4aXBXVnNkbjlaMHRYWWJieDRlci8zdC9SME4zdjRldk1YdFBNNndxSTBkV09GZDFDYnRxVFZ1dHJHcmxENHF5UXFSR2I0NjV5ZXRpMVVwUGViTTVZTk9iV1FjUDFYbi9CZm52RTdOZUE4R2IzOXpPd2NFRVNJZ2lCQUJRWVFJQ0NKRVFGQXZMVzZuL1NoMTM4WWVPV042SmdYbi9PYzg2M29qMlIyczB0WFl1eVZkWTlUT3lGZ2xYU1Y3ZHhOSk81M2FFMDd0ZHVQNFM1SUc2ODdObTc2K0p6SmJ6blhPSlczMWZjNllnMjVvVWVkOFZOTFJ0dHFNMXV2aHd0WFk3NWY5U01rK1dMdjJTTkxmak9OakxmNmU1OFc0blFPQ0NCRVFSSWlBSUVJRUJCRWlJS2lYQmFqT0lsT3pPMWVsdEZYVHA2cTF1VVhTSTBadGJyYWJiVnI3MWx6TTM4bFpzTjZueUppV3J6aTF6eGFNTjJrNm1tdlN0T2d2TjhyN205ZGFqZnZZZG5sdWR2dVJ0RlhTclVidCtpRW5FdkM0cEY4WXRaK3JiTC90ZDh2K0x3aHYxRG4zRVNUTGN0dkJXWnZNeVBoS1lJWWs2U3FqOXZzNjU1OFljMW1XdjhwK1hEQVhGN2R6UUJBaEFvSUlFUkJFaUlBZ1FnUUVGWGZubWk2STVZaHpudFd1dlV6MjA5Wk9TdnFTVVh2R21jZDZzTHBsUjFXKzJ0d2FjOGpPbkdjaS96MWZ0czV6MnQ5WjB2Tkc3WklxSmF1VHU5dWFSMStLdnljcStTNm9PYytxTFduYUJtN3pLMG4zR3JYVGRjN1dUak5ZWjMzc3NkNEU2QmFqZkovc2Y0eDcyY1NFMnprZ2lCQUJRWVFJQ0NKRVFCQWhBb0xXWXdIcWtuSGMyMC9iZXhLYjl4aEhiRXd2U3pwdTFDYVNYakJxKzUxMis5SFNQYnpuS1VRajU1d3pkYzY1KzZsZ1FiMnM2U2I2Ylo2Vi9mM1Nma2tmTUdwakZlNEF4ZTBjRUVTSWdDQkNCQVFSSWlDSUVBRkJibmN1c0ZMN1J1YzhhNStCVldmTWlUTWV6ajJubk5yVGtuNW0xTzZVZEdYWGs1blY0alkzZkppeFV2dCtaMHdyUk9PaEh4T0l4VlRuZkVwR2tLcVVucGI5L05pckpMMnI2L2x3T3djRUVTSWdpQkFCUVlRSUNDSkVRRkJmQzFDdFBiVng3bG1SdlQvNXFFckoybjlocGM3NWNGdWhTdW1RcElQR2VSYzJyelpYV0pPTTZDdEVXM3NhRnd1bXpubFZ4aTVIelNZbVN3WERqZ3JQNndXM2MwQVFJUUtDQ0JFUVJJaUFJRUlFQlBYVm5idXpwM0VCeWQvWC9LYm0xV2FmcEp1TjJrTlZTcXRHN1hDZDg0bzFtYjVDdExPbmNRRTF1L0pNMm1yTkh2R1hHcWVPbkdHOTNhYTJlZlBoZGc0SUlrUkFFQ0VDZ2dnUkVFU0lnS0MrdW5NbmV4b1htT1dNN0MyRy8rU2NkN05tZE9Fc2ZZV283bWxjNEd4WWowTDlwNlNYakpyMXdJU1p1SjBEZ2dnUkVFU0lnQ0JDQkFRUklpQ29yKzZjdFkwcjBMZjlrajVwMURaTHVzQ29iUys5WUY4aHN2cjBRTisyUzlvejVBVzVuUU9DQ0JFUVJJaUFJRUlFQkJFaUlLaXY3dHdQblJxYm1LQlBYNWYwSGFOMnVlejlQNzRvYVcvSkJma2tBb0lJRVJCRWlJQWdRZ1FFRVNJZ2lCQUJRWDIxdUgvazFMNWdITCt0MlFLMnpiak8yWHBrSWVaWTh6UTg2NUdTNHpyblRSMWZjcXVrSzQzYXh5UWQ2dmg2ZkJJQlVZUUlDQ0pFUUJBaEFvSUlFUkJFaUlBZ3Q4WHR0UitkZHZTczgzNWdsSFpMdXRlb1hWQ2x0TXVvdlY3bmZNSzZIamFlS3FWbFNROTJQT3pkZGM3amtoUDVKQUtDQ0JFUVJJaUFJRUlFQkJFaUlJZ1FBVUY5cmVJMjFUbC9vblVpS1YwdDZRSGp0R3NrL2Rtb2pTV3h3bnNkOWJGU3UwcEprcXp6bnBMMGZhTzJVOUpsUnUySzV0VXBQb21BSUVJRUJCRWlJSWdRQVVHRUNBaUtkT2ZHNXFEVGJrMHJaNUZmbHZTY1VmdVhjNzJKYzczVk91Y1ZheTVZRytmM1BKTDkvcFQrL2krUXRNT29iWk4wa1ZIYkl1a1NaOHpPZGIxSmhLVHlGZDZGMTFxUzMxNmwvZDJSSVRlU2FWYnQzMk9VNzVCMHUxSGIzYnpXaWxYY3dIb2hSRUFRSVFLQ0NCRVFSSWlBb0w0V29QN1N2R0QzN2VoVmxiVy9QWk02NTBuQmVRdHZ4dTlyYkJ3MzM3Y3FwVzJTOWhWTVpidWt0eHUxM1pJdU5tcWJuVEVuemF2TjZsbk5xa1ZmTFc3ckI1U2trOGJ4UHRxa1M3TGIzNTRqZGM3TFhjNWxVWFQ5OVVUZ1BmQ2NsbFJibDVSMHZsSHI1WDNsZGc0SUlrUkFFQ0VDZ2dnUkVFU0lnS0MrV3R5bm5kcllPTzYxbzErVjlMeFJlNzNPK2E5R3pXdC91eGFoTlY2bHRFL1RGYzFkR25jODNpblpxL1BQMTNUVmRadEswNmZlV2F3UGdCY2t2V2pVckwraGtGNWEzQ1ZtdEVML0tPa2hvL1ppbmZPUE81N0xzc3IyZWg2ME5WNmxkRXpTVXBkajlyREtmbytrMXMxcE5BM0pEVVp0aDZSYkN5NzVOVWtQRzdYVk91Zmk3NE1zM000QlFZUUlDQ0pFUUJBaEFvSUlFUkEwK0RiQ2psY2svZHFwWFcvVWRsUXAvYjNnZWw0N2VxSmhXK09sSnVxK0pXMHEvTmwyeWQ2NjkyTFptNUY0N2UySjdOWFl4elZ0cTdleEZxMkd6Rk9MKzBKTmYrRnRicGYwdlk0djJYazd1cWZISUhxS045Y280YTN3ZG1SSjF2ZDRTZE85czlkcXJsYlpjenNIQkJFaUlJZ1FBVUdFQ0FnaVJFRFFQTFc0YTBsV3Evb3BTVWVNMmxzbEhUSnFMMHY2alZXclVyTGE1bnViVjV1eDB4R3pqdmRsVW5KUzAwVnNOYVByOVYzanVMZmxieVhwVXFObTdZVWdUWCsyUjQzYTJEbHZjSFBUNGk0MVkvWDNjVW5mTUdvbm1sZWJCeVI5eEtqTlZYdTFST2xtSkZWSzd6Vks3NUQwMWVpOC9zZkM3S1BPN1J3UVJJaUFJRUlFQkJFaUlJZ1FBVUh6MU9JdU5aSGQvdDRxNlgxRzdUWFpxMzF2TEpsSWxkSU8yYXVTNzVHOXdQWm95UVluVlVxSE5IM1VZNXRIMWpwZU0rYXlVN2E2ZXRZY1pwbklibU5QQ3NjYzNNS0hxUG5qVzI2ck5lM3ZUdzg0blIyU3JqVnFuOUswRmR4bXJMSS9tb095TnlwNXJHQTh5VitGL2xQanVQVVB4eXlUUmYrNlFPSjJEZ2dqUkVBUUlRS0NDQkVRUklpQW9JWHZ6czB3a2QzK2x1d0Z1SGMxcjlhYTB3YjI5aUN3VmpKTDBwWXFKYXYrSHRtdDhUYzdZM3A3ZEh2N1ZkenYxSzR6amwva25EUFJCbWhqZXhaK0ZYZXBLcVZOc24vK0J5Vjl2bURZNDgycnpXMnlXOEVmbHZTa1VmdXk3UCtXY2Ezc1o1ZCt5RGd1K1dIdmRGOXpMZEJxN0ZMY3pnRkJoQWdJSWtSQUVDRUNnZ2dSRUxUUlc5eXpXRjJxWTA3TnMxZjJJbE92RFh4QTBoM09tRmFMZTdNenB0ZXFMdVY5WFdDWmREMkplWFBPdHJqN3NBNTdjUStxNjBkUmJoVGN6Z0ZCaEFnSUlrUkFFQ0VDZ2dnUkVIU3V0N2k3Tmw3dkNXQjQvd1lSQmJuMTk4L3JwQUFBQUFCSlJVNUVya0pnZ2c9PSdcblxuY2xhc3MgSW5zdGFsbGluZ01vZGFsIGV4dGVuZHMgTW9kYWwge1xuICBjb25zdHJ1Y3RvcihhcHA6IEFwcCkgeyBzdXBlcihhcHApOyB9XG4gIG9uT3BlbigpIHtcbiAgICB0aGlzLmNvbnRlbnRFbC5lbXB0eSgpO1xuICAgIGNvbnN0IGltZyA9IHRoaXMuY29udGVudEVsLmNyZWF0ZUVsKCdpbWcnLCB7XG4gICAgICBhdHRyOiB7IHNyYzogbG9hZGluZ0ljb24sIGFsdDogJ0luc3RhbGxpbmdcdTIwMjYnIH0sXG4gICAgfSk7XG4gICAgT2JqZWN0LmFzc2lnbihpbWcuc3R5bGUsIHtcbiAgICAgIGRpc3BsYXk6ICdibG9jaycsXG4gICAgICBtYXJnaW46ICcxZW0gYXV0byAwLjVlbScsXG4gICAgICB3aWR0aDogJzEwMHB4JyxcbiAgICAgIGhlaWdodDogJzEwMHB4JyxcbiAgICB9KTtcbiAgICBpbWcuYW5pbWF0ZShcbiAgICAgIFtcbiAgICAgICAgeyB0cmFuc2Zvcm06ICdyb3RhdGUoMGRlZyknIH0sXG4gICAgICAgIHsgdHJhbnNmb3JtOiAncm90YXRlKC0zNjBkZWcpJyB9XG4gICAgICBdLFxuICAgICAge1xuICAgICAgICBkdXJhdGlvbjogMTUwMCwgICAgICAvLyBvbmUgYW5kIGEgaGFsZiBzZWNvbmRzIHBlciByZXZvbHV0aW9uXG4gICAgICAgIGl0ZXJhdGlvbnM6IEluZmluaXR5LFxuICAgICAgICBlYXNpbmc6ICdsaW5lYXInXG4gICAgICB9XG4gICAgKTtcbiAgICBjb25zdCB0eHQgPSB0aGlzLmNvbnRlbnRFbC5jcmVhdGVEaXYoeyB0ZXh0OiAnSW5zdGFsbGluZ1x1MjAyNicsIGNsczogJ21vZC1xdWlldCcgfSk7XG4gICAgdHh0LmFkZENsYXNzKFwiaW5zdGFsbG1vZGFsLXR4dFwiKTtcbiAgfVxuICBvbkNsb3NlKCkge1xuICAgIHRoaXMuY29udGVudEVsLmVtcHR5KCk7XG4gIH1cbn1cblxuXG5pbnRlcmZhY2UgUHJldmlld0l0ZW0ge1xuICBmaWxlUGF0aDogc3RyaW5nO1xuICBhY3Rpb246IHN0cmluZztcbiAgc2VsZWN0ZWQ6IGJvb2xlYW47XG4gIGlzRm9sZGVyPzogYm9vbGVhbjtcbn1cblxuaW50ZXJmYWNlIFRvb2xraXRTZXR0aW5ncyB7XG4gIGluc3RhbGxlZFZlcnNpb246IHN0cmluZztcbiAgbGF0ZXN0VG9vbGtpdFZlcnNpb24/OiBzdHJpbmc7XG4gIGN1c3RvbWl6ZVVwZGF0ZXM6IGJvb2xlYW47XG4gIHVwZGF0ZVRhcmdldHM6IHtcbiAgICB0b29sczogYm9vbGVhbjtcbiAgICB0b29sc1BhdGg/OiBzdHJpbmc7XG4gICAgdGVtcGxhdGVzOiBib29sZWFuO1xuICAgIHRlbXBsYXRlc1BhdGg/OiBzdHJpbmc7XG4gICAgb21uaW5vbWljb246IGJvb2xlYW47XG4gICAgb21uaW5vbWljb25QYXRoPzogc3RyaW5nO1xuICAgIHNwZWxsYm9vazogYm9vbGVhbjtcbiAgICBzcGVsbGJvb2tQYXRoOiBzdHJpbmc7XG4gIH07XG4gIGxhdGVzdERlZmF1bHRzPzoge1xuICAgIHRvb2xzPzogc3RyaW5nO1xuICAgIHRlbXBsYXRlcz86IHN0cmluZztcbiAgICBvbW5pbm9taWNvbj86IHN0cmluZztcbiAgICBzcGVsbGJvb2s/OiBzdHJpbmc7XG4gIH07XG4gIGxhc3RDaGVja2VkPzogc3RyaW5nO1xuICBsYXN0Rm9yY2VVcGRhdGU/OiBzdHJpbmc7XG4gIGZpbGVDYWNoZT86IFJlY29yZDxzdHJpbmcsIFRvb2xraXRGaWxlQ2FjaGVFbnRyeT47XG4gIHBhdGhPdmVycmlkZXM/OiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+O1xuICBiYWNrdXBGaWxlcz86IFJlY29yZDxzdHJpbmcsIHN0cmluZz47XG4gIGJhY2t1cFBhdGg/OiBzdHJpbmc7XG4gIGF1dG9CYWNrdXA/OiBib29sZWFuO1xuICBsYXN0QmFja3VwVGltZT86IHN0cmluZztcbiAgYmFja3VwRXJyb3I/OiBzdHJpbmc7XG4gIGN1c3RvbVBhdGhzOiBDdXN0b21QYXRoRW50cnlbXTtcbiAgYXV0b0JhY2t1cEJlZm9yZVVwZGF0ZTogYm9vbGVhbjtcbiAgaGlnaGxpZ2h0RW5hYmxlZDogYm9vbGVhbjtcbiAgaGlnaGxpZ2h0Q29sb3JMaWdodDogc3RyaW5nO1xuICBoaWdobGlnaHRDb2xvckRhcms6IHN0cmluZztcbiAgcnVsZXNldENvbXBlbmRpdW06IHN0cmluZztcbiAgcnVsZXNldFJlZmVyZW5jZTogc3RyaW5nW107XG4gIHJlcGFyc2VHYW1lc2V0czogYm9vbGVhbjtcbiAgaXNGaXJzdFJ1bjogXCJ5ZXNcIiB8IFwibm9cIiB8IFwic2hvd25cIjtcbiAgc2Vzc2lvblRpdGxlUHJlZmVyZW5jZTogXCJuYW1lXCIgfCBcImRhdGVcIjtcbiAgZW5hYmxlU2lkZWJhclByZXZpZXdzOiBib29sZWFuO1xuXG59XG5cbmNvbnN0IERFRkFVTFRfU0VUVElOR1M6IFRvb2xraXRTZXR0aW5ncyA9IHtcbiAgaW5zdGFsbGVkVmVyc2lvbjogJzEuMC4wJyxcbiAgY3VzdG9taXplVXBkYXRlczogZmFsc2UsXG4gIHVwZGF0ZVRhcmdldHM6IHtcbiAgICB0b29sczogdHJ1ZSxcbiAgICB0b29sc1BhdGg6ICdUb29scycsXG4gICAgdGVtcGxhdGVzOiB0cnVlLFxuICAgIHRlbXBsYXRlc1BhdGg6ICdFeHRyYXMvVGVtcGxhdGVzJyxcbiAgICBvbW5pbm9taWNvbjogdHJ1ZSxcbiAgICBvbW5pbm9taWNvblBhdGg6ICdBZHZlbnR1cmVzL09tbmlub21pY29uLm1kJyxcbiAgICBzcGVsbGJvb2s6IHRydWUsXG4gICAgc3BlbGxib29rUGF0aDogJ0NvbXBlbmRpdW0vU3BlbGxzL19TcGVsbGJvb2subWQnLFxuICB9LFxuICBsYXRlc3REZWZhdWx0czogdW5kZWZpbmVkLFxuICBwYXRoT3ZlcnJpZGVzOiB7fSxcbiAgYmFja3VwRmlsZXM6IHt9LFxuICBiYWNrdXBQYXRoOiAnJyxcbiAgYXV0b0JhY2t1cDogZmFsc2UsXG4gIGxhc3RCYWNrdXBUaW1lOiAnJyxcbiAgYmFja3VwRXJyb3I6ICcnLFxuICBjdXN0b21QYXRoczogW10sXG4gIGF1dG9CYWNrdXBCZWZvcmVVcGRhdGU6IHRydWUsXG4gIGhpZ2hsaWdodEVuYWJsZWQ6IGZhbHNlLFxuICBoaWdobGlnaHRDb2xvckxpZ2h0OiAnI0RGRTdFMicsXG4gIGhpZ2hsaWdodENvbG9yRGFyazogJyMxRjI5NDMnLFxuICBydWxlc2V0Q29tcGVuZGl1bTogXCJcIixcbiAgcnVsZXNldFJlZmVyZW5jZTogW10sXG4gIHJlcGFyc2VHYW1lc2V0czogdHJ1ZSxcbiAgaXNGaXJzdFJ1bjogXCJ5ZXNcIixcbiAgc2Vzc2lvblRpdGxlUHJlZmVyZW5jZTogXCJuYW1lXCIsXG4gIGVuYWJsZVNpZGViYXJQcmV2aWV3czogdHJ1ZSxcbn07XG5cbmludGVyZmFjZSBDdXN0b21QYXRoRW50cnkge1xuICB2YXVsdFBhdGg6IHN0cmluZztcbiAgbWFuaWZlc3RLZXk6IHN0cmluZztcbiAgZG9VcGRhdGU6IGJvb2xlYW47XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgTWFuaWZlc3RGaWxlRW50cnkge1xuICBwYXRoOiBzdHJpbmc7XG4gIGtleTogc3RyaW5nO1xuICBjdXN0b21PdmVycmlkZT86IGJvb2xlYW47XG4gIGRpc3BsYXlOYW1lPzogc3RyaW5nO1xuICBvcHRpb25hbD86IGJvb2xlYW47IFxufVxuXG5leHBvcnQgaW50ZXJmYWNlIEluc3RhbGxPcHRpb25zIHtcbiAgY29tcGVuZGl1bTogc3RyaW5nO1xuICByZWZlcmVuY2VzOiBzdHJpbmdbXTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgVlZ1bmRlcmxvcmVUb29sa2l0UGx1Z2luIGV4dGVuZHMgUGx1Z2luIHtcbiAgcmVxdWlyZXNHcmFwaDogTWFwPHN0cmluZywgc3RyaW5nW10+O1xuICBwdWJsaWMgc2V0dGluZ3NUYWI6IFRvb2xraXRTZXR0aW5nc1RhYjtcbiAgc2V0dGluZ3M6IFRvb2xraXRTZXR0aW5ncztcbiAgZmlsZUNhY2hlTWFuYWdlcjogVG9vbGtpdEZpbGVDYWNoZU1hbmFnZXI7XG4gIG1hbmlmZXN0Q2FjaGU6IHtcbiAgICBmaWxlczogTWFuaWZlc3RGaWxlRW50cnlbXTtcbiAgICBmb2xkZXJzOiBNYW5pZmVzdEZpbGVFbnRyeVtdO1xuICB9ID0geyBmaWxlczogW10sIGZvbGRlcnM6IFtdIH07XG4gIGNoYW5nZWxvZzogc3RyaW5nID0gJyc7XG4gIHByaXZhdGUgYXV0b0NoZWNrSW50ZXJ2YWw6IG51bWJlciB8IG51bGwgPSBudWxsO1xuICBwcml2YXRlIG9sZFBhdGhzQnlHaXRodWI6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4gPSB7fTtcbiAgcHJpdmF0ZSBzdHlsZUVsOiBIVE1MU3R5bGVFbGVtZW50IHwgbnVsbCA9IG51bGw7XG5cbiAgYmFja3VwTWFuYWdlcjogQmFja3VwTWFuYWdlcjtcbiAgZXhjbHVkZWRQYXRocyA9IFtcbiAgICAnLkRTX1N0b3JlJyxcbiAgICAnLmdpdGlnbm9yZScsXG4gICAgJy5naXRhdHRyaWJ1dGVzJyxcbiAgICAnLmdpdGh1YicsXG4gICAgJ1JFQURNRS5tZCcsXG4gICAgJ0NvbXBlbmRpdW0nLFxuICAgIGAke3RoaXMuYXBwLnZhdWx0LmNvbmZpZ0Rpcn0vcGx1Z2lucy92dnVuZGVybG9yZS10b29sa2l0LXBsdWdpbi9tYW5pZmVzdC5qc29uYCxcbiAgICBgJHt0aGlzLmFwcC52YXVsdC5jb25maWdEaXJ9L3BsdWdpbnMvdnZ1bmRlcmxvcmUtdG9vbGtpdC1wbHVnaW4vbWFpbi5qc2AsXG4gICAgYCR7dGhpcy5hcHAudmF1bHQuY29uZmlnRGlyfS9wbHVnaW5zL3Z2dW5kZXJsb3JlLXRvb2xraXQtcGx1Z2luL3N0eWxlcy5jc3NgXG4gIF07XG5cbiAgcHJpdmF0ZSBpc0ZpcnN0UnVuOiBib29sZWFuID0gZmFsc2U7XG5cbiAgcHVibGljIHBlbmRpbmdSdWxlc2V0S2V5OiBzdHJpbmcgPSAnJztcbiAgcHVibGljIHBlbmRpbmdSZWZlcmVuY2VLZXlzOiBzdHJpbmdbXSA9IFtdO1xuXG4gIC8vIFx1MjUwMFx1MjUwMFx1MjUwMCBIRUxQRVJTIFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFxuXG4gIC8qKiBHaXZlbiBhIEdpdEh1YiBwYXRoLCByZXR1cm4gdGhlIG92ZXJyaWRkZW4gdmF1bHQgcGF0aCBvciB0aGUgb3JpZ2luYWwuICovXG4gIHJlc29sdmVWYXVsdFBhdGgoZ2l0aHViUGF0aDogc3RyaW5nKTogc3RyaW5nIHtcbiAgICBjb25zdCBjdXN0b20gPSB0aGlzLnNldHRpbmdzLmN1c3RvbVBhdGhzLmZpbmQoXG4gICAgICAoYykgPT5cbiAgICAgICAgYy5tYW5pZmVzdEtleSA9PT0gZ2l0aHViUGF0aCB8fFxuICAgICAgICBjLm1hbmlmZXN0S2V5ID09PSB0aGlzLmtleUZvcihnaXRodWJQYXRoKVxuICAgICk7XG4gICAgcmV0dXJuIGN1c3RvbT8udmF1bHRQYXRoID8/IGdpdGh1YlBhdGg7XG4gIH1cblxuXG5cbiAgLyoqIENvbnZlcnQgXHUyMDFDc29tZS9mb2xkZXIvZmlsZS5tZFx1MjAxRCBcdTIxOTIgXHUyMDFDc29tZS1mb2xkZXItZmlsZVx1MjAxRCAobG93ZXJjYXNlZCwgbm8gZXh0ZW5zaW9uKS4gKi9cbiAga2V5Rm9yKHBhdGg6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgcmV0dXJuIHBhdGhcbiAgICAgIC5yZXBsYWNlKC9bL1xcXFxdL2csICctJylcbiAgICAgIC5yZXBsYWNlKC9cXC5bXi5dKyQvLCAnJylcbiAgICAgIC50b0xvd2VyQ2FzZSgpO1xuICB9XG5cbiAgaXNFeGNsdWRlZChwYXRoOiBzdHJpbmcpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5leGNsdWRlZFBhdGhzLnNvbWUoXG4gICAgICAoZXgpID0+XG4gICAgICAgIHBhdGggPT09IGV4IHx8XG4gICAgICAgIHBhdGguc3RhcnRzV2l0aChgJHtleH0vYCkgfHxcbiAgICAgICAgcGF0aC5pbmNsdWRlcyhgLyR7ZXh9L2ApIHx8XG4gICAgICAgIHBhdGguZW5kc1dpdGgoYC8ke2V4fWApIHx8XG4gICAgICAgIHBhdGguaW5jbHVkZXMoYC8ke2V4fWApXG4gICAgKTtcbiAgfVxuXG4gIC8vIFx1MjUwMFx1MjUwMFx1MjUwMCBDVVNUT00gSU5TVEFMTCBMT0dJQyBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcblxuICBwdWJsaWMgYXN5bmMgcGVyZm9ybUN1c3RvbUluc3RhbGwoXG4gICAgdG9JbnN0YWxsOiB7IHBhdGg6IHN0cmluZzsgaXNGb2xkZXI6IGJvb2xlYW4gfVtdXG4gICk6IFByb21pc2U8dm9pZD4ge1xuICAgIC8vIDApIENsb3NlIGFueSBvcGVuIG1hcmtkb3duICYgZ3JhcGggcGFuZXNcbiAgICB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0TGVhdmVzT2ZUeXBlKCdtYXJrZG93bicpLmZvckVhY2gobCA9PiBsLmRldGFjaCgpKTtcbiAgICB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0TGVhdmVzT2ZUeXBlKCdncmFwaCcpLmZvckVhY2gobCA9PiBsLmRldGFjaCgpKTtcblxuICAgIC8vIDEpIFNob3cgdGhlIFx1MjAxQ0luc3RhbGxpbmdcdTIwMjZcdTIwMUQgc3Bpbm5lclxuICAgIGNvbnN0IGluc3RhbGxpbmcgPSBuZXcgSW5zdGFsbGluZ01vZGFsKHRoaXMuYXBwKTtcbiAgICBpbnN0YWxsaW5nLm9wZW4oKTtcblxuICAgIHRyeSB7XG4gICAgICAvLyAyKSBPcHRpb25hbCBiYWNrdXBcbiAgICAgIGNvbnN0IGFsbEZpbGVzID0gdGhpcy5hcHAudmF1bHQuZ2V0QWxsTG9hZGVkRmlsZXMoKVxuICAgICAgICAuZmlsdGVyKChmKTogZiBpcyBURmlsZSA9PiBmIGluc3RhbmNlb2YgVEZpbGUpXG4gICAgICAgIC5tYXAoZiA9PiBmLnBhdGgpXG4gICAgICAgIC5maWx0ZXIocCA9PiBwICE9PSAnLnZ2dW5kZXJsb3JlX2luc3RhbGxlZCcpO1xuICAgICAgaWYgKGFsbEZpbGVzLmxlbmd0aCAmJiB0aGlzLnNldHRpbmdzLmF1dG9CYWNrdXBCZWZvcmVVcGRhdGUpIHtcbiAgICAgICAgY29uc3QgZm9sZGVyID0gYXdhaXQgdGhpcy5iYWNrdXBNYW5hZ2VyLmJhY2t1cFZhdWx0TWlycm9yKCdwcmUtY3VzdG9tLWluc3RhbGwnKTtcbiAgICAgICAgbmV3IE5vdGljZShgQmFja3VwIGJlZm9yZSBjdXN0b21cdTIwMTBpbnN0YWxsIGF0OiAke2ZvbGRlcn1gKTtcbiAgICAgIH1cblxuICAgICAgLy8gMykgTG9vcCBvdmVyIGV4YWN0bHkgdGhlIHNlbGVjdGVkIGZpbGVzL2ZvbGRlcnNcbiAgICAgIGZvciAoY29uc3QgZW50cnkgb2YgdG9JbnN0YWxsKSB7XG4gICAgICAgIGlmIChlbnRyeS5pc0ZvbGRlcikge1xuICAgICAgICAgIGlmICghKGF3YWl0IHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXIuZXhpc3RzKGVudHJ5LnBhdGgpKSkge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5hcHAudmF1bHQuY3JlYXRlRm9sZGVyKGVudHJ5LnBhdGgpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjb25zdCBtYW5pZmVzdEVudHJ5ID0gdGhpcy5tYW5pZmVzdENhY2hlLmZpbGVzLmZpbmQoZiA9PiBmLnBhdGggPT09IGVudHJ5LnBhdGgpO1xuICAgICAgICAgIGlmICghbWFuaWZlc3RFbnRyeSkgY29udGludWU7XG4gICAgICAgICAgYXdhaXQgdGhpcy51cGRhdGVFbnRyeUZyb21NYW5pZmVzdChtYW5pZmVzdEVudHJ5LCB0cnVlKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyA0KSBCdW1wIHZlcnNpb24uanNvbiArIHNldHRpbmdzXG4gICAgICBhd2FpdCB0aGlzLnVwZGF0ZVZlcnNpb25GaWxlKCk7XG4gICAgICB0aGlzLnNldHRpbmdzLmluc3RhbGxlZFZlcnNpb24gPSB0aGlzLnNldHRpbmdzLmxhdGVzdFRvb2xraXRWZXJzaW9uITtcbiAgICAgIHRoaXMuc2V0dGluZ3MubGFzdEZvcmNlVXBkYXRlID0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpO1xuICAgICAgYXdhaXQgdGhpcy5zYXZlU2V0dGluZ3MoKTtcblxuICAgICAgLy8gNSkgSW1wb3J0IHNlbGVjdGVkIGNvbXBlbmRpdW0gKyByZWZlcmVuY2VzXG4gICAgICBjb25zdCBjb21wID0gdGhpcy5zZXR0aW5ncy5ydWxlc2V0Q29tcGVuZGl1bTtcbiAgICAgIGNvbnN0IHJlZnMgPSB0aGlzLnNldHRpbmdzLnJ1bGVzZXRSZWZlcmVuY2UgPz8gW107XG4gICAgICBpZiAoY29tcCkge1xuICAgICAgICBjb25zdCBqb2JzOiBQcm9taXNlPHVua25vd24+W10gPSBbXG4gICAgICAgICAgaW1wb3J0UnVsZXNldERhdGEoeyBhcHA6IHRoaXMuYXBwLCBlZGl0aW9uS2V5OiBjb21wLCB0YXJnZXRQYXRoOiBcIkNvbXBlbmRpdW1cIiB9KSxcbiAgICAgICAgICAuLi5yZWZzLm1hcChyZWZLZXkgPT4ge1xuICAgICAgICAgICAgY29uc3QgbGFiZWwgPSBnZXRSdWxlc2V0RGlzcGxheU5hbWUocmVmS2V5KTtcbiAgICAgICAgICAgIHJldHVybiBpbXBvcnRSdWxlc2V0RGF0YSh7XG4gICAgICAgICAgICAgIGFwcDogdGhpcy5hcHAsXG4gICAgICAgICAgICAgIGVkaXRpb25LZXk6IHJlZktleSxcbiAgICAgICAgICAgICAgdGFyZ2V0UGF0aDogYFJlc291cmNlcy9SdWxlc2V0cy8ke2xhYmVsfWAsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9KVxuICAgICAgICBdO1xuICAgICAgICBhd2FpdCBQcm9taXNlLmFsbChqb2JzKTtcbiAgICAgIH1cblxuICAgICAgLy8gNikgTWFya2VyICsgcmVcdTIwMTBlbmFibGUgaGlnaGxpZ2h0aW5nICsgcmVwYWludCBVSVxuICAgICAgY29uc3QgbWFya2VyID0gJy52dnVuZGVybG9yZV9pbnN0YWxsZWQnO1xuICAgICAgaWYgKCEoYXdhaXQgdGhpcy5hcHAudmF1bHQuYWRhcHRlci5leGlzdHMobWFya2VyKSkpIHtcbiAgICAgICAgYXdhaXQgdGhpcy5hcHAudmF1bHQuY3JlYXRlKG1hcmtlciwgJycpO1xuICAgICAgfVxuICAgICAgdGhpcy5zZXR0aW5ncy5oaWdobGlnaHRFbmFibGVkID0gdHJ1ZTtcbiAgICAgIGF3YWl0IHRoaXMuc2F2ZVNldHRpbmdzKCk7XG4gICAgICB0aGlzLmVuYWJsZUhpZ2hsaWdodCgpO1xuICAgICAgaWYgKHRoaXMuc2V0dGluZ3NUYWIpIHRoaXMuc2V0dGluZ3NUYWIuZGlzcGxheSgpO1xuXG4gICAgICAvLyA3KSBTdWNjZXNzIG1vZGFsICYgcmVsb2FkIHZhdWx0XG4gICAgICBpbnN0YWxsaW5nLmNsb3NlKCk7XG4gICAgICBjb25zdCBzdWNjZXNzID0gbmV3IE1vZGFsKHRoaXMuYXBwKTtcbiAgICAgIHN1Y2Nlc3Mub25PcGVuID0gKCkgPT4ge1xuICAgICAgICBzdWNjZXNzLmNvbnRlbnRFbC5lbXB0eSgpO1xuICAgICAgICBzdWNjZXNzLnRpdGxlRWwuc2V0VGV4dCgnXHUyNzA1IEN1c3RvbSBJbnN0YWxsIENvbXBsZXRlJyk7XG4gICAgICAgIHN1Y2Nlc3MuY29udGVudEVsLmNyZWF0ZUVsKCdkaXYnLCB7XG4gICAgICAgICAgdGV4dDogJ1JlbG9hZGluZyB2YXVsdCBpbiAzIHNlY29uZHNcdTIwMjYnLFxuICAgICAgICAgIGNsczogJ2luc3RhbGxzdWNjZXNzJ1xuICAgICAgICB9KTtcbiAgICAgIH07XG4gICAgICBzdWNjZXNzLm9wZW4oKTtcbiAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICBzdWNjZXNzLmNsb3NlKCk7XG4gICAgICAgIGxvY2F0aW9uLnJlbG9hZCgpO1xuICAgICAgfSwgMzAwMCk7XG5cbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ1x1Mjc0QyBwZXJmb3JtQ3VzdG9tSW5zdGFsbCBmYWlsZWQ6JywgZXJyKTtcbiAgICAgIGluc3RhbGxpbmcuY2xvc2UoKTtcbiAgICAgIG5ldyBOb3RpY2UoJ1x1Mjc0QyBDdXN0b20gaW5zdGFsbCBmYWlsZWQ7IGNoZWNrIGNvbnNvbGUgZm9yIGRldGFpbHMuJyk7XG4gICAgfVxuICB9XG5cblxuICAvLyBcdTI1MDBcdTI1MDBcdTI1MDAgSElHSExJR0hUSU5HIChMaWdodCArIERhcmsgTW9kZSkgXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXG5cbiAgcHJpdmF0ZSBnZXQgaGlnaGxpZ2h0Q1NTKCk6IHN0cmluZyB7XG4gICAgY29uc3QgbGlnaHQgPSB0aGlzLnNldHRpbmdzLmhpZ2hsaWdodENvbG9yTGlnaHQudHJpbSgpIHx8ICdyZ2JhKDEwNywxNDYsMTIwLDEpJztcbiAgICBjb25zdCBkYXJrID0gdGhpcy5zZXR0aW5ncy5oaWdobGlnaHRDb2xvckRhcmsudHJpbSgpIHx8ICdyZ2JhKCA1MCwgNzAsIDUwLDEpJztcblxuICAgIGNvbnN0IGZpbGVTZWxlY3RvcnMgPSB0aGlzLm1hbmlmZXN0Q2FjaGUuZmlsZXMubWFwKChmKSA9PiB7XG4gICAgICBjb25zdCBlc2NhcGVkID0gZi5wYXRoLnJlcGxhY2UoL1wiL2csICdcXFxcXCInKTtcbiAgICAgIHJldHVybiBgLm5hdi1maWxlLXRpdGxlW2RhdGEtcGF0aD1cIiR7ZXNjYXBlZH1cIl1gO1xuICAgIH0pO1xuXG4gICAgLy8gY29uc3QgZm9sZGVyU2VsZWN0b3JzID0gdGhpcy5tYW5pZmVzdENhY2hlLmZvbGRlcnMubWFwKChmKSA9PiB7XG4gICAgLy8gICBjb25zdCBlc2NhcGVkID0gZi5wYXRoLnJlcGxhY2UoL1wiL2csICdcXFxcXCInKTtcbiAgICAvLyAgIHJldHVybiBgLm5hdi1mb2xkZXItdGl0bGVbZGF0YS1wYXRoPVwiJHtlc2NhcGVkfVwiXWA7XG4gICAgLy8gfSk7XG5cbiAgICBjb25zdCBsaW5lczogc3RyaW5nW10gPSBbXG4gICAgICBgOnJvb3Qge2AsXG4gICAgICBgICAtLXZ2dW5kZXJsb3JlLXRvb2xraXQtaGlnaGxpZ2h0OiAke2xpZ2h0fTtgLFxuICAgICAgYH1gLFxuICAgICAgYGAsXG4gICAgICBgYm9keS50aGVtZS1kYXJrIHtgLFxuICAgICAgYCAgLS12dnVuZGVybG9yZS10b29sa2l0LWhpZ2hsaWdodDogJHtkYXJrfTtgLFxuICAgICAgYH1gLFxuICAgICAgYGAsXG4gICAgXTtcblxuICAgIGlmIChmaWxlU2VsZWN0b3JzLmxlbmd0aCkge1xuICAgICAgbGluZXMucHVzaChgJHtmaWxlU2VsZWN0b3JzLmpvaW4oJywgJyl9IHtgKTtcbiAgICAgIGxpbmVzLnB1c2goYCAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tdnZ1bmRlcmxvcmUtdG9vbGtpdC1oaWdobGlnaHQpO2ApO1xuICAgICAgbGluZXMucHVzaChgICBib3JkZXItcmFkaXVzOiAzcHg7YCk7XG4gICAgICBsaW5lcy5wdXNoKGB9YCk7XG4gICAgICBsaW5lcy5wdXNoKGBgKTtcbiAgICB9XG5cbiAgICAvLyBpZiAoZm9sZGVyU2VsZWN0b3JzLmxlbmd0aCkge1xuICAgIC8vICAgbGluZXMucHVzaChgJHtmb2xkZXJTZWxlY3RvcnMuam9pbignLCAnKX0ge2ApO1xuICAgIC8vICAgbGluZXMucHVzaChgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS12dnVuZGVybG9yZS10b29sa2l0LWhpZ2hsaWdodCk7YCk7XG4gICAgLy8gICBsaW5lcy5wdXNoKGAgIGJvcmRlci1yYWRpdXM6IDNweDtgKTtcbiAgICAvLyAgIGxpbmVzLnB1c2goYH1gKTtcbiAgICAvLyAgIGxpbmVzLnB1c2goYGApO1xuICAgIC8vIH1cblxuICAgIHJldHVybiBsaW5lcy5qb2luKCdcXG4nKTtcbiAgfVxuXG4gIHB1YmxpYyBlbmFibGVIaWdobGlnaHQoKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuc3R5bGVFbCkgcmV0dXJuO1xuICAgIHRoaXMuc3R5bGVFbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3N0eWxlJyk7XG4gICAgdGhpcy5zdHlsZUVsLmlkID0gJ3Z2dW5kZXJsb3JlLWhpZ2hsaWdodC1pbmplY3QnO1xuICAgIHRoaXMuc3R5bGVFbC50ZXh0Q29udGVudCA9IHRoaXMuaGlnaGxpZ2h0Q1NTO1xuICAgIGRvY3VtZW50LmhlYWQuYXBwZW5kQ2hpbGQodGhpcy5zdHlsZUVsKTtcbiAgfVxuXG4gIHB1YmxpYyBkaXNhYmxlSGlnaGxpZ2h0KCk6IHZvaWQge1xuICAgIGlmICghdGhpcy5zdHlsZUVsKSByZXR1cm47XG4gICAgdGhpcy5zdHlsZUVsLnJlbW92ZSgpO1xuICAgIHRoaXMuc3R5bGVFbCA9IG51bGw7XG4gIH1cblxuICAvLyBcdTI1MDBcdTI1MDBcdTI1MDAgUkVNT1RFIEJBU0VMSU5FIENBQ0hJTkcgXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXG5cbiAgcHVibGljIGFzeW5jIGZldGNoUmVtb3RlQmFzZWxpbmUoKTogUHJvbWlzZTx2b2lkPiB7XG5cbiAgICBpZiAoIXRoaXMubWFuaWZlc3RDYWNoZSB8fCAhQXJyYXkuaXNBcnJheSh0aGlzLm1hbmlmZXN0Q2FjaGUuZmlsZXMpKSB7XG4gICAgICBjb25zb2xlLndhcm4oJ1x1MjZBMFx1RkUwRiBtYW5pZmVzdENhY2hlIGlzIG1pc3Npbmcgb3IgaW52YWxpZCcpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGZvciAoY29uc3QgZW50cnkgb2YgdGhpcy5tYW5pZmVzdENhY2hlLmZpbGVzKSB7XG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCByYXdVcmwgPSBgaHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tL3NsYW13aXNlMDAwMS9WVnVuZGVybG9yZS1Ub29sa2l0LUZ1bGwvbWFpbi8ke2VudHJ5LnBhdGh9YDtcbiAgICAgICAgY29uc3QgcmVtb3RlVGV4dCA9IGF3YWl0IChhd2FpdCBmZXRjaChyYXdVcmwpKS50ZXh0KCk7XG4gICAgICAgIGNvbnN0IHJlc29sdmVkID0gdGhpcy5yZXNvbHZlVmF1bHRQYXRoKGVudHJ5LnBhdGgpO1xuXG4gICAgICAgIC8vIElmIHJlbWFwcGVkLCByZW1vdmUgdGhlIG9sZCBjYWNoZSBlbnRyeVxuICAgICAgICBpZiAocmVzb2x2ZWQgIT09IGVudHJ5LnBhdGgpIHtcbiAgICAgICAgICBhd2FpdCB0aGlzLmZpbGVDYWNoZU1hbmFnZXIucmVtb3ZlRnJvbUNhY2hlKGVudHJ5LnBhdGgpO1xuICAgICAgICB9XG5cbiAgICAgICAgYXdhaXQgdGhpcy5maWxlQ2FjaGVNYW5hZ2VyLnVwZGF0ZUNhY2hlKFxuICAgICAgICAgIHJlc29sdmVkLFxuICAgICAgICAgIHJlbW90ZVRleHQsXG4gICAgICAgICAgZW50cnkucGF0aCxcbiAgICAgICAgICBmYWxzZVxuICAgICAgICApO1xuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBjb25zb2xlLmVycm9yKGBGYWlsZWQgdG8gZmV0Y2ggcmF3IGJhc2VsaW5lIGZvciAke2VudHJ5LnBhdGh9YCwgZSk7XG4gICAgICB9XG4gICAgfVxuXG4gIH1cblxuICAvLyBcdTI1MDBcdTI1MDBcdTI1MDAgTUFSS0VSIEZJTEUgQ0hFQ0tTIChmaXJzdFx1MjAxMHJ1biBkZXRlY3Rpb24pIFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFxuXG4gIHByaXZhdGUgYXN5bmMgY2hlY2tNYXJrZXJGaWxlKCkge1xuICAgIGNvbnN0IG1hcmtlclBhdGggPSAnLnZ2dW5kZXJsb3JlX2luc3RhbGxlZCc7XG4gICAgY29uc3QgbWFya2VyRXhpc3RzID0gYXdhaXQgdGhpcy5hcHAudmF1bHQuYWRhcHRlci5leGlzdHMobWFya2VyUGF0aCk7XG4gICAgdGhpcy5pc0ZpcnN0UnVuID0gIW1hcmtlckV4aXN0cztcbiAgICBkZWxldGUgKHRoaXMuc2V0dGluZ3MgYXMgYW55KS5uZWVkc0luc3RhbGw7XG4gICAgYXdhaXQgdGhpcy5zYXZlU2V0dGluZ3MoKTtcbiAgICB0aGlzLnNldHRpbmdzVGFiLmRpc3BsYXkoKTtcbiAgfVxuXG5cbiAgLy8gXHUyNTAwXHUyNTAwXHUyNTAwIE1BTklGRVNUIFNZTkMgXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXG5cbiAgYXN5bmMgc3luY01hbmlmZXN0KCk6IFByb21pc2U8dm9pZD4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCByZXMgPSBhd2FpdCByZXF1ZXN0VXJsKHtcbiAgICAgICAgdXJsOiAnaHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tL3NsYW13aXNlMDAwMS9WVnVuZGVybG9yZS1Ub29sa2l0LUZ1bGwvbWFpbi9tYW5pZmVzdC5qc29uJ1xuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IG1hbmlmZXN0ID0gcmVzLmpzb247XG4gICAgICB0aGlzLnNldHRpbmdzLmxhdGVzdERlZmF1bHRzID0gbWFuaWZlc3QuZGVmYXVsdFBhdGhzIHx8IHt9O1xuICAgICAgdGhpcy5tYW5pZmVzdENhY2hlID0gbWFuaWZlc3Q7XG5cbiAgICAgIGNvbnN0IG1hbmlmZXN0Q29udGVudCA9IEpTT04uc3RyaW5naWZ5KG1hbmlmZXN0LCBudWxsLCAyKTtcbiAgICAgIGF3YWl0IHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXIud3JpdGUoJ21hbmlmZXN0Lmpzb24nLCBtYW5pZmVzdENvbnRlbnQpO1xuICAgICAgYXdhaXQgdGhpcy5zYXZlU2V0dGluZ3MoKTtcblxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBzeW5jaW5nIG1hbmlmZXN0OicsIGVycm9yKTtcbiAgICAgIG5ldyBOb3RpY2UoJ0ZhaWxlZCB0byBzeW5jIG1hbmlmZXN0LicpO1xuICAgIH1cbiAgfVxuXG4gIC8vIFx1MjUwMFx1MjUwMFx1MjUwMCBQTFVHSU4gTElGRUNZQ0xFIFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFxuXG4gIGFzeW5jIG9ubG9hZCgpIHtcbiAgICBhd2FpdCB0aGlzLmxvYWRTZXR0aW5ncygpO1xuXG4gICAgYWRkSWNvbignbWFwbWFraW5nJywgbWFwbWFraW5nX2ljb24pXG4gICAgYWRkSWNvbignZ2FtZXBsYXknLCBnYW1lcGxheV9pY29uKVxuICAgIC8vIFx1MjUwMFx1MjUwMFx1MjUwMCBDT1JFIE1BTkFHRVJTIFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFxuICAgIHRoaXMuYmFja3VwTWFuYWdlciA9IG5ldyBCYWNrdXBNYW5hZ2VyKHRoaXMuYXBwKTtcbiAgICB0aGlzLmZpbGVDYWNoZU1hbmFnZXIgPSBuZXcgVG9vbGtpdEZpbGVDYWNoZU1hbmFnZXIoXG4gICAgICB0aGlzLmFwcC52YXVsdCxcbiAgICAgIHRoaXMuc2V0dGluZ3MuZmlsZUNhY2hlID8/IHt9LFxuICAgICAgYXN5bmMgKCkgPT4gYXdhaXQgdGhpcy5zYXZlU2V0dGluZ3MoKVxuICAgICk7XG5cbiAgICAvLyBcdTI1MDBcdTI1MDBcdTI1MDAgU0VUVElOR1MgVUkgXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXG4gICAgdGhpcy5zZXR0aW5nc1RhYiA9IG5ldyBUb29sa2l0U2V0dGluZ3NUYWIodGhpcy5hcHAsIHRoaXMpO1xuICAgIHRoaXMuYWRkU2V0dGluZ1RhYih0aGlzLnNldHRpbmdzVGFiKTtcblxuICAgIC8vIHNpZGViYXJzXG4gICAgdGhpcy5yZWdpc3RlclZpZXcoU0lERUJBUl9WSUVXX1RZUEUsIChsZWFmKSA9PiBuZXcgU2lkZWJhclRlbXBsYXRlc1ZpZXcobGVhZikpO1xuICAgIHRoaXMucmVnaXN0ZXJWaWV3KEdBTUVQTEFZX1ZJRVdfVFlQRSwgKGxlYWYpID0+IG5ldyBHYW1lcGxheVNpZGViYXJWaWV3KGxlYWYpKTtcbiAgICB0aGlzLmFkZENvbW1hbmQoe1xuICAgICAgaWQ6IFwib3Blbi10ZW1wbGF0ZXMtc2lkZWJhclwiLFxuICAgICAgbmFtZTogXCJPcGVuIFRlbXBsYXRlcyBTaWRlYmFyXCIsXG4gICAgICBpY29uOiBcIm1hcG1ha2luZ1wiLFxuICAgICAgY2FsbGJhY2s6IGFzeW5jICgpID0+IHtcbiAgICAgICAgbGV0IGxlYWY6IFdvcmtzcGFjZUxlYWYgfCB1bmRlZmluZWQgfCBudWxsID1cbiAgICAgICAgICB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0TGVhdmVzT2ZUeXBlKFNJREVCQVJfVklFV19UWVBFKVswXTtcbiAgICAgICAgaWYgKCFsZWFmKSB7XG4gICAgICAgICAgbGVhZiA9XG4gICAgICAgICAgICB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0UmlnaHRMZWFmKGZhbHNlKSA/P1xuICAgICAgICAgICAgdGhpcy5hcHAud29ya3NwYWNlLmdldFJpZ2h0TGVhZih0cnVlKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIWxlYWYpIHtcbiAgICAgICAgICBuZXcgTm90aWNlKFwiXHUyNzRDIENvdWxkIG5vdCBvcGVuIFRlbXBsYXRlcyBzaWRlYmFyXCIpO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBhd2FpdCBsZWFmLnNldFZpZXdTdGF0ZSh7IHR5cGU6IFNJREVCQVJfVklFV19UWVBFLCBhY3RpdmU6IHRydWUgfSk7XG4gICAgICAgIHRoaXMuYXBwLndvcmtzcGFjZS5yZXZlYWxMZWFmKGxlYWYpO1xuICAgICAgfSxcbiAgICB9KTtcbiAgICB0aGlzLmFkZENvbW1hbmQoe1xuICAgICAgaWQ6IFwib3Blbi1nYW1lcGxheS1zaWRlYmFyXCIsXG4gICAgICBuYW1lOiBcIk9wZW4gR2FtZXBsYXkgU2lkZWJhclwiLFxuICAgICAgaWNvbjogXCJnYW1lcGxheVwiLFxuICAgICAgY2FsbGJhY2s6IGFzeW5jICgpID0+IHtcbiAgICAgICAgbGV0IGxlYWY6IFdvcmtzcGFjZUxlYWYgfCB1bmRlZmluZWQgfCBudWxsID1cbiAgICAgICAgICB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0TGVhdmVzT2ZUeXBlKEdBTUVQTEFZX1ZJRVdfVFlQRSlbMF07XG4gICAgICAgIGlmICghbGVhZikge1xuICAgICAgICAgIGxlYWYgPVxuICAgICAgICAgICAgdGhpcy5hcHAud29ya3NwYWNlLmdldFJpZ2h0TGVhZihmYWxzZSkgPz9cbiAgICAgICAgICAgIHRoaXMuYXBwLndvcmtzcGFjZS5nZXRSaWdodExlYWYodHJ1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFsZWFmKSB7XG4gICAgICAgICAgbmV3IE5vdGljZShcIlx1Mjc0QyBDb3VsZCBub3Qgb3BlbiBHYW1lcGxheSBzaWRlYmFyXCIpO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBhd2FpdCBsZWFmLnNldFZpZXdTdGF0ZSh7IHR5cGU6IEdBTUVQTEFZX1ZJRVdfVFlQRSwgYWN0aXZlOiB0cnVlIH0pO1xuICAgICAgICB0aGlzLmFwcC53b3Jrc3BhY2UucmV2ZWFsTGVhZihsZWFmKTtcbiAgICAgIH0sXG4gICAgfSk7XG5cbiAgICB0aGlzLmFkZFJpYmJvbkljb24oJ3Njcm9sbC10ZXh0JywgJ1ZWdW5kZXJsb3JlIFNpZGViYXJzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgYXdhaXQgdGhpcy5vcGVuU2lkZWJhcihTSURFQkFSX1ZJRVdfVFlQRSwgJ3JpZ2h0Jyk7XG4gICAgICBhd2FpdCB0aGlzLm9wZW5TaWRlYmFyKEdBTUVQTEFZX1ZJRVdfVFlQRSwgJ3JpZ2h0Jyk7XG4gICAgfSk7XG5cblxuICAgIC8vIFx1MjUwMFx1MjUwMFx1MjUwMCBSRVNUT1JFIFNUQVRFIFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFxuICAgIGlmICh0aGlzLnNldHRpbmdzLmlzRmlyc3RSdW4gIT09ICd5ZXMnKSB7XG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCBjb250ZW50ID0gYXdhaXQgdGhpcy5hcHAudmF1bHQuYWRhcHRlci5yZWFkKCdtYW5pZmVzdC5qc29uJyk7XG4gICAgICAgIHRoaXMubWFuaWZlc3RDYWNoZSA9IEpTT04ucGFyc2UoY29udGVudCk7XG4gICAgICB9IGNhdGNoIHsgfVxuICAgIH1cbiAgICAvLyAgXHUyMDIyIEhpZ2hsaWdodCBuYXYgaXRlbXMgaWYgZW5hYmxlZFxuICAgIGlmICh0aGlzLnNldHRpbmdzLmhpZ2hsaWdodEVuYWJsZWQpIHRoaXMuZW5hYmxlSGlnaGxpZ2h0KCk7XG5cbiAgICAvLyBcdTI1MDBcdTI1MDBcdTI1MDAgREVGRVIgSEVBVlkgVEFTS1MgXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXG4gICAgc2V0VGltZW91dChhc3luYyAoKSA9PiB7XG4gICAgICBhd2FpdCB0aGlzLnN5bmNNYW5pZmVzdCgpO1xuICAgICAgYXdhaXQgdGhpcy5zaG93SW5kZXhpbmdNb2RhbCgpO1xuICAgICAgYXdhaXQgdGhpcy5jaGVja0ZvclVwZGF0ZXMoKTtcblxuICAgICAgLy8gYnVpbGQgeW91ciByZXF1aXJlc0dyYXBoIGZyb20gbWFuaWZlc3QuanNvblxuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgcmF3ID0gYXdhaXQgdGhpcy5hcHAudmF1bHQuYWRhcHRlci5yZWFkKCdtYW5pZmVzdC5qc29uJyk7XG4gICAgICAgIGNvbnN0IG1hbmlmZXN0ID0gSlNPTi5wYXJzZShyYXcpO1xuICAgICAgICBjb25zdCBlbnRyaWVzID0gWy4uLihtYW5pZmVzdC5mb2xkZXJzIHx8IFtdKSwgLi4uKG1hbmlmZXN0LmZpbGVzIHx8IFtdKV07XG4gICAgICAgIHRoaXMucmVxdWlyZXNHcmFwaCA9IG5ldyBNYXAoZW50cmllcy5tYXAoZSA9PiBbZS5rZXksIGUucmVxdWlyZXMgfHwgW11dKSk7XG4gICAgICB9IGNhdGNoIHtcbiAgICAgICAgdGhpcy5yZXF1aXJlc0dyYXBoID0gbmV3IE1hcCgpO1xuICAgICAgfVxuICAgIH0sIDI1MCk7XG5cbiAgICAvLyBcdTI1MDBcdTI1MDBcdTI1MDAgQVVUTy1VUERBVEUgVElNRVIgJiBFVkVOVFMgXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXG4gICAgdGhpcy5zY2hlZHVsZUF1dG9VcGRhdGVDaGVjaygpO1xuICAgIHRoaXMucmVnaXN0ZXJFdmVudChcbiAgICAgIHRoaXMuYXBwLnZhdWx0Lm9uKCdkZWxldGUnLCAoKSA9PlxuICAgICAgICB0aGlzLnJlZ2lzdGVyRXZlbnQoXG4gICAgICAgICAgdGhpcy5hcHAudmF1bHQub24oJ2RlbGV0ZScsICgpID0+XG4gICAgICAgICAgICAodGhpcy5hcHAgYXMgYW55KS5jb21tYW5kcy5leGVjdXRlQ29tbWFuZEJ5SWQoJ2RhdGF2aWV3OmNsZWFyLWNhY2hlJylcbiAgICAgICAgICApXG4gICAgICAgICkpKTtcbiAgICB0aGlzLnJlZ2lzdGVyRXZlbnQoXG4gICAgICB0aGlzLmFwcC52YXVsdC5vbigncmVuYW1lJywgKCkgPT5cbiAgICAgICAgKHRoaXMuYXBwIGFzIGFueSkuY29tbWFuZHMuZXhlY3V0ZUNvbW1hbmRCeUlkKCdkYXRhdmlldzpjbGVhci1jYWNoZScpXG4gICAgICApXG4gICAgKTtcblxuICAgIC8vIFx1MjUwMFx1MjUwMFx1MjUwMCBGSVJTVC1SVU4gXHUyMDFDV2VsY29tZS5tZFx1MjAxRCBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcbiAgICBpZiAodGhpcy5zZXR0aW5ncy5pc0ZpcnN0UnVuID09PSAnbm8nKSB7XG4gICAgICB0aGlzLmFwcC53b3Jrc3BhY2Uub25MYXlvdXRSZWFkeSgoKSA9PiB7XG4gICAgICAgIGNvbnN0IHdlbGNvbWUgPSB0aGlzLmFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoJ1dlbGNvbWUubWQnKTtcbiAgICAgICAgaWYgKHdlbGNvbWUgaW5zdGFuY2VvZiBURmlsZSkge1xuICAgICAgICAgIHRoaXMuYXBwLndvcmtzcGFjZS5kZXRhY2hMZWF2ZXNPZlR5cGUoJ3NldHRpbmdzJyk7XG4gICAgICAgICAgdGhpcy5hcHAud29ya3NwYWNlLmdldExlYWYodHJ1ZSkub3BlbkZpbGUod2VsY29tZSk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gbWFyayBzaG93blxuICAgICAgICB0aGlzLnNldHRpbmdzLmlzRmlyc3RSdW4gPSAnc2hvd24nO1xuICAgICAgICB0aGlzLnNhdmVTZXR0aW5ncygpO1xuICAgICAgfSk7XG4gICAgfVxuICB9XG5cblxuICBvbnVubG9hZCgpIHtcbiAgICB0aGlzLmRpc2FibGVIaWdobGlnaHQoKTtcbiAgICB0aGlzLmFwcC53b3Jrc3BhY2UuZGV0YWNoTGVhdmVzT2ZUeXBlKFNJREVCQVJfVklFV19UWVBFKTtcbiAgICBpZiAodGhpcy5hdXRvQ2hlY2tJbnRlcnZhbCkgY2xlYXJJbnRlcnZhbCh0aGlzLmF1dG9DaGVja0ludGVydmFsKTtcbiAgfVxuXG4gIHNjaGVkdWxlQXV0b1VwZGF0ZUNoZWNrKCkge1xuICAgIHRoaXMuYXV0b0NoZWNrSW50ZXJ2YWwgPSB3aW5kb3cuc2V0SW50ZXJ2YWwoKCkgPT4ge1xuICAgICAgdGhpcy5jaGVja0ZvclVwZGF0ZXMoKTtcbiAgICB9LCA2MCAqIDYwICogMTAwMCk7XG4gIH1cblxuICBwdWJsaWMgYXN5bmMgYWN0aXZhdGVUZW1wbGF0ZXNTaWRlYmFyKCk6IFByb21pc2U8dm9pZD4ge1xuICAgIC8vIENsb3NlIGFueSBvcGVuIHNpZGViYXIgb2Ygb3VyIHZpZXcgdHlwZVxuICAgIHRoaXMuYXBwLndvcmtzcGFjZS5kZXRhY2hMZWF2ZXNPZlR5cGUoU0lERUJBUl9WSUVXX1RZUEUpO1xuXG4gICAgLy8gT3BlbiBhIG5ldyBvbmUgb24gdGhlIGxlZnRcbiAgICBhd2FpdCB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0TGVmdExlYWYoZmFsc2UpIVxuICAgICAgLnNldFZpZXdTdGF0ZSh7IHR5cGU6IFNJREVCQVJfVklFV19UWVBFLCBhY3RpdmU6IHRydWUgfSk7XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIG9wZW5TaWRlYmFyKHZpZXdUeXBlOiBzdHJpbmcsIHNpZGU6ICdsZWZ0JyB8ICdyaWdodCcpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBjb25zdCB3cyA9IHRoaXMuYXBwLndvcmtzcGFjZTtcbiAgICBjb25zdCBleGlzdGluZyA9IHdzLmdldExlYXZlc09mVHlwZSh2aWV3VHlwZSlbMF07XG4gICAgaWYgKGV4aXN0aW5nKSB7XG4gICAgICBhd2FpdCBleGlzdGluZy5zZXRWaWV3U3RhdGUoeyB0eXBlOiB2aWV3VHlwZSwgYWN0aXZlOiB0cnVlIH0pO1xuICAgICAgd3MucmV2ZWFsTGVhZihleGlzdGluZyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IGxlYWYgPSBzaWRlID09PSAnbGVmdCcgPyB3cy5nZXRMZWZ0TGVhZihmYWxzZSkgPz8gd3MuZ2V0TGVmdExlYWYodHJ1ZSlcbiAgICAgIDogd3MuZ2V0UmlnaHRMZWFmKGZhbHNlKSA/PyB3cy5nZXRSaWdodExlYWYodHJ1ZSk7XG4gICAgaWYgKCFsZWFmKSB7XG4gICAgICBuZXcgTm90aWNlKGBcdTI3NEMgQ291bGQgbm90IG9wZW4gJHt2aWV3VHlwZX0gc2lkZWJhcmApO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBhd2FpdCBsZWFmLnNldFZpZXdTdGF0ZSh7IHR5cGU6IHZpZXdUeXBlLCBhY3RpdmU6IHRydWUgfSk7XG4gICAgd3MucmV2ZWFsTGVhZihsZWFmKTtcbiAgfVxuXG4gIC8vIFx1MjUwMFx1MjUwMFx1MjUwMCBCQUNLVVAgJiBVTkRPIFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFxuXG4gIGFzeW5jIGJhY2t1cEZpbGUoZmlsZVBhdGg6IHN0cmluZywgY29udGVudDogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgdGhpcy5zZXR0aW5ncy5iYWNrdXBGaWxlcyA9IHRoaXMuc2V0dGluZ3MuYmFja3VwRmlsZXMgfHwge307XG4gICAgdGhpcy5zZXR0aW5ncy5iYWNrdXBGaWxlc1tmaWxlUGF0aF0gPSBjb250ZW50O1xuICAgIGF3YWl0IHRoaXMuc2F2ZVNldHRpbmdzKCk7XG4gIH1cblxuICBhc3luYyB1bmRvRm9yY2VVcGRhdGUoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgaWYgKCF0aGlzLnNldHRpbmdzLmJhY2t1cEZpbGVzIHx8IE9iamVjdC5rZXlzKHRoaXMuc2V0dGluZ3MuYmFja3VwRmlsZXMpLmxlbmd0aCA9PT0gMCkge1xuICAgICAgbmV3IE5vdGljZSgnTm8gYmFja3VwcyBhdmFpbGFibGUgdG8gcmVzdG9yZS4nKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgZm9yIChjb25zdCBbZmlsZVBhdGgsIGJhY2t1cENvbnRlbnRdIG9mIE9iamVjdC5lbnRyaWVzKHRoaXMuc2V0dGluZ3MuYmFja3VwRmlsZXMpKSB7XG4gICAgICBpZiAoYXdhaXQgdGhpcy5hcHAudmF1bHQuYWRhcHRlci5leGlzdHMoZmlsZVBhdGgpKSB7XG4gICAgICAgIGF3YWl0IHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXIud3JpdGUoZmlsZVBhdGgsIGJhY2t1cENvbnRlbnQpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgYXdhaXQgdGhpcy5hcHAudmF1bHQuY3JlYXRlKGZpbGVQYXRoLCBiYWNrdXBDb250ZW50KTtcbiAgICAgIH1cbiAgICB9XG4gICAgbmV3IE5vdGljZSgnXHUyNzA1IEZvcmNlIHVwZGF0ZSB1bmRvbmUuJyk7XG4gICAgdGhpcy5zZXR0aW5ncy5iYWNrdXBGaWxlcyA9IHt9O1xuICAgIGF3YWl0IHRoaXMuc2F2ZVNldHRpbmdzKCk7XG4gIH1cblxuICAvLyBcdTI1MDBcdTI1MDBcdTI1MDAgRk9MREVSIFNZTkMgXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXG5cbiAgYXN5bmMgc3luY01pc3NpbmdGb2xkZXJzKCk6IFByb21pc2U8dm9pZD4ge1xuICAgIGlmICh0aGlzLm1hbmlmZXN0Q2FjaGUgJiYgdGhpcy5tYW5pZmVzdENhY2hlLmZvbGRlcnMpIHtcbiAgICAgIGZvciAoY29uc3QgZm9sZGVyRW50cnkgb2YgdGhpcy5tYW5pZmVzdENhY2hlLmZvbGRlcnMpIHtcbiAgICAgICAgY29uc3QgZm9sZGVyUGF0aCA9IGZvbGRlckVudHJ5LnBhdGg7XG4gICAgICAgIGlmICghKGF3YWl0IHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXIuZXhpc3RzKGZvbGRlclBhdGgpKSkge1xuICAgICAgICAgIGF3YWl0IHRoaXMuYXBwLnZhdWx0LmNyZWF0ZUZvbGRlcihmb2xkZXJQYXRoKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8vIFx1MjUwMFx1MjUwMFx1MjUwMCBGT1JDRS1VUERBVEUgUFJFVklFVyBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcblxuICBhc3luYyBidWlsZEZvcmNlVXBkYXRlUHJldmlldygpOiBQcm9taXNlPFByZXZpZXdJdGVtW10+IHtcbiAgICBjb25zdCBwcmV2aWV3TGlzdDogUHJldmlld0l0ZW1bXSA9IFtdO1xuXG4gICAgLy8gMCkgQ29sbGVjdCBhbGwgYmxhY2tsaXN0ZWQgZm9sZGVycyAobWFuaWZlc3RLZXkgdmFsdWVzIHdoZXJlIGRvVXBkYXRlID09PSBmYWxzZSlcbiAgICBjb25zdCBkZW55TGlzdGVkRm9sZGVycyA9IHRoaXMuc2V0dGluZ3MuY3VzdG9tUGF0aHNcbiAgICAgIC5maWx0ZXIoKGMpID0+IGMuZG9VcGRhdGUgPT09IGZhbHNlKVxuICAgICAgLm1hcCgoYykgPT4gYy5tYW5pZmVzdEtleSk7XG5cbiAgICAvLyAxKSBEZW55LWxpc3RlZCBmaWxlcyBmaXJzdFx1MjAxNGJ1dCBvbmx5IGlmIHRoZXkgd291bGQgYWN0dWFsbHkgYmUgXCJuZXdcIiBvciBcIm91dCBvZiBkYXRlXCJcbiAgICBmb3IgKGNvbnN0IGVudHJ5IG9mIHRoaXMubWFuaWZlc3RDYWNoZS5maWxlcykge1xuICAgICAgLy8gXHUyNTAwXHUyNTAwIFNLSVAgYW55IG9wdGlvbmFsOnRydWUgZmlsZVxuICAgICAgaWYgKGVudHJ5Lm9wdGlvbmFsKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBjdXN0b20gPSB0aGlzLnNldHRpbmdzLmN1c3RvbVBhdGhzLmZpbmQoKGMpID0+IGMubWFuaWZlc3RLZXkgPT09IGVudHJ5LmtleSk7XG4gICAgICBjb25zdCBpc0luRGVueUZvbGRlciA9IGRlbnlMaXN0ZWRGb2xkZXJzLnNvbWUoKGZvbGRlcikgPT5cbiAgICAgICAgZW50cnkucGF0aC5zdGFydHNXaXRoKGZvbGRlciArICcvJylcbiAgICAgICk7XG4gICAgICBpZiAoY3VzdG9tPy5kb1VwZGF0ZSA9PT0gZmFsc2UgfHwgaXNJbkRlbnlGb2xkZXIpIHtcbiAgICAgICAgLy8gUmVzb2x2ZSB2YXVsdCBwYXRoIChhY2NvdW50aW5nIGZvciBhbnkgcmVtYXBwaW5nKVxuICAgICAgICBjb25zdCB2cCA9IGN1c3RvbT8udmF1bHRQYXRoID8/IHRoaXMucmVzb2x2ZVZhdWx0UGF0aChlbnRyeS5wYXRoKTtcblxuICAgICAgICAvLyBDaGVjazogZG9lcyB0aGUgZmlsZSBleGlzdCBsb2NhbGx5PyBBbmQgaXMgaXQgdXAtdG8tZGF0ZT9cbiAgICAgICAgY29uc3QgZXhpc3RzID0gYXdhaXQgdGhpcy5hcHAudmF1bHQuYWRhcHRlci5leGlzdHModnApO1xuICAgICAgICBjb25zdCB1cFRvRGF0ZSA9IGV4aXN0cyAmJiAoYXdhaXQgdGhpcy5maWxlQ2FjaGVNYW5hZ2VyLmlzVXBUb0RhdGUodnApKTtcblxuICAgICAgICAvLyBPbmx5IHNob3cgYXMgZGVueS1saXN0ZWQgaWYgaXQgd291bGQgaGF2ZSBiZWVuIFx1MjAxQ25ld1x1MjAxRCAobWlzc2luZykgb3IgXHUyMDFDb3V0LW9mLWRhdGVcdTIwMURcbiAgICAgICAgaWYgKCFleGlzdHMgfHwgIXVwVG9EYXRlKSB7XG4gICAgICAgICAgcHJldmlld0xpc3QucHVzaCh7XG4gICAgICAgICAgICBmaWxlUGF0aDogdnAsXG4gICAgICAgICAgICBhY3Rpb246ICdkZW55LWxpc3RlZCBcdTIwMTMgd2lsbCBub3QgdXBkYXRlJyxcbiAgICAgICAgICAgIHNlbGVjdGVkOiBmYWxzZSxcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIC8vIDIpIEZVTEwtU1lOQyBtb2RlIChza2lwIGFueSBmaWxlL2ZvbGRlciB0aGF0IGlzIGJsYWNrbGlzdGVkKVxuICAgIGlmICghdGhpcy5zZXR0aW5ncy5jdXN0b21pemVVcGRhdGVzKSB7XG4gICAgICBmb3IgKGNvbnN0IGYgb2YgdGhpcy5tYW5pZmVzdENhY2hlLmZpbGVzKSB7XG4gICAgICAgIC8vIFx1MjUwMFx1MjUwMCBTS0lQIGFueSBvcHRpb25hbDp0cnVlIGZpbGVcbiAgICAgICAgaWYgKGYub3B0aW9uYWwpIHtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGN1c3RvbSA9IHRoaXMuc2V0dGluZ3MuY3VzdG9tUGF0aHMuZmluZCgoYykgPT4gYy5tYW5pZmVzdEtleSA9PT0gZi5rZXkpO1xuICAgICAgICBjb25zdCBpc0luRGVueUZvbGRlciA9IGRlbnlMaXN0ZWRGb2xkZXJzLnNvbWUoKGZvbGRlcikgPT5cbiAgICAgICAgICBmLnBhdGguc3RhcnRzV2l0aChmb2xkZXIgKyAnLycpXG4gICAgICAgICk7XG4gICAgICAgIGlmIChjdXN0b20/LmRvVXBkYXRlID09PSBmYWxzZSB8fCBpc0luRGVueUZvbGRlcikge1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgdnAgPSB0aGlzLnJlc29sdmVWYXVsdFBhdGgoZi5wYXRoKTtcbiAgICAgICAgbGV0IHRhZyA9ICcnO1xuICAgICAgICBpZiAodnAgIT09IGYucGF0aCkgdGFnID0gJyAocmVtYXBwZWQpJztcblxuICAgICAgICBjb25zdCBleGlzdHMgPSBhd2FpdCB0aGlzLmFwcC52YXVsdC5hZGFwdGVyLmV4aXN0cyh2cCk7XG4gICAgICAgIGlmICghZXhpc3RzKSB7XG4gICAgICAgICAgcHJldmlld0xpc3QucHVzaCh7XG4gICAgICAgICAgICBmaWxlUGF0aDogdnAsXG4gICAgICAgICAgICBhY3Rpb246IGBuZXcgZmlsZSR7dGFnfWAsXG4gICAgICAgICAgICBzZWxlY3RlZDogdHJ1ZSxcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIGlmICghKGF3YWl0IHRoaXMuZmlsZUNhY2hlTWFuYWdlci5pc1VwVG9EYXRlKHZwKSkpIHtcbiAgICAgICAgICBwcmV2aWV3TGlzdC5wdXNoKHtcbiAgICAgICAgICAgIGZpbGVQYXRoOiB2cCxcbiAgICAgICAgICAgIGFjdGlvbjogYHdpbGwgYmUgb3ZlcndyaXR0ZW4ke3RhZ31gLFxuICAgICAgICAgICAgc2VsZWN0ZWQ6IHRydWUsXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgZm9yIChjb25zdCBmbGQgb2YgdGhpcy5tYW5pZmVzdENhY2hlLmZvbGRlcnMpIHtcbiAgICAgICAgLy8gXHUyNTAwXHUyNTAwIFNLSVAgYW55IG9wdGlvbmFsOnRydWUgZm9sZGVyXG4gICAgICAgIGlmIChmbGQub3B0aW9uYWwpIHtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGlzRGVueUZvbGRlciA9IGRlbnlMaXN0ZWRGb2xkZXJzLmluY2x1ZGVzKGZsZC5wYXRoKTtcbiAgICAgICAgaWYgKCEoYXdhaXQgdGhpcy5hcHAudmF1bHQuYWRhcHRlci5leGlzdHMoZmxkLnBhdGgpKSAmJiAhaXNEZW55Rm9sZGVyKSB7XG4gICAgICAgICAgcHJldmlld0xpc3QucHVzaCh7XG4gICAgICAgICAgICBmaWxlUGF0aDogZmxkLnBhdGgsXG4gICAgICAgICAgICBhY3Rpb246ICdtaXNzaW5nIGZvbGRlciAod2lsbCBiZSBjcmVhdGVkKScsXG4gICAgICAgICAgICBzZWxlY3RlZDogdHJ1ZSxcbiAgICAgICAgICAgIGlzRm9sZGVyOiB0cnVlLFxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBwcmV2aWV3TGlzdDtcbiAgICB9XG5cbiAgICAvLyAzKSBDVVNUT00tU1lOQyBtb2RlIChza2lwIGFueSBmaWxlL2ZvbGRlciB0aGF0IGlzIGJsYWNrbGlzdGVkKVxuICAgIGZvciAoY29uc3QgZW50cnkgb2YgdGhpcy5tYW5pZmVzdENhY2hlLmZpbGVzKSB7XG4gICAgICAvLyBcdTI1MDBcdTI1MDAgU0tJUCBhbnkgb3B0aW9uYWw6dHJ1ZSBmaWxlXG4gICAgICBpZiAoZW50cnkub3B0aW9uYWwpIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGN1c3RvbSA9IHRoaXMuc2V0dGluZ3MuY3VzdG9tUGF0aHMuZmluZCgoYykgPT4gYy5tYW5pZmVzdEtleSA9PT0gZW50cnkua2V5KTtcbiAgICAgIGNvbnN0IGlzSW5EZW55Rm9sZGVyID0gZGVueUxpc3RlZEZvbGRlcnMuc29tZSgoZm9sZGVyKSA9PlxuICAgICAgICBlbnRyeS5wYXRoLnN0YXJ0c1dpdGgoZm9sZGVyICsgJy8nKVxuICAgICAgKTtcbiAgICAgIGlmIChjdXN0b20/LmRvVXBkYXRlID09PSBmYWxzZSB8fCBpc0luRGVueUZvbGRlcikge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgY29uc3QgdmF1bHRQYXRoID0gY3VzdG9tPy52YXVsdFBhdGggPz8gdGhpcy5yZXNvbHZlVmF1bHRQYXRoKGVudHJ5LnBhdGgpO1xuICAgICAgY29uc3QgZXhpc3RzID0gYXdhaXQgdGhpcy5hcHAudmF1bHQuYWRhcHRlci5leGlzdHModmF1bHRQYXRoKTtcbiAgICAgIGNvbnN0IHVwVG9EYXRlID0gZXhpc3RzICYmIChhd2FpdCB0aGlzLmZpbGVDYWNoZU1hbmFnZXIuaXNVcFRvRGF0ZSh2YXVsdFBhdGgpKTtcblxuICAgICAgbGV0IHRhZyA9ICcnO1xuICAgICAgaWYgKHZhdWx0UGF0aCAhPT0gZW50cnkucGF0aCkgdGFnID0gJyAocmVtYXBwZWQpJztcblxuICAgICAgaWYgKCFleGlzdHMpIHtcbiAgICAgICAgcHJldmlld0xpc3QucHVzaCh7XG4gICAgICAgICAgZmlsZVBhdGg6IHZhdWx0UGF0aCxcbiAgICAgICAgICBhY3Rpb246IGBuZXcgZmlsZSR7dGFnfWAsXG4gICAgICAgICAgc2VsZWN0ZWQ6IHRydWUsXG4gICAgICAgIH0pO1xuICAgICAgfSBlbHNlIGlmICghdXBUb0RhdGUpIHtcbiAgICAgICAgcHJldmlld0xpc3QucHVzaCh7XG4gICAgICAgICAgZmlsZVBhdGg6IHZhdWx0UGF0aCxcbiAgICAgICAgICBhY3Rpb246IGB3aWxsIGJlIG92ZXJ3cml0dGVuJHt0YWd9YCxcbiAgICAgICAgICBzZWxlY3RlZDogdHJ1ZSxcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgZm9yIChjb25zdCBlbnRyeSBvZiB0aGlzLm1hbmlmZXN0Q2FjaGUuZm9sZGVycykge1xuICAgICAgLy8gXHUyNTAwXHUyNTAwIFNLSVAgYW55IG9wdGlvbmFsOnRydWUgZm9sZGVyXG4gICAgICBpZiAoZW50cnkub3B0aW9uYWwpIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGlzRGVueUZvbGRlciA9IGRlbnlMaXN0ZWRGb2xkZXJzLmluY2x1ZGVzKGVudHJ5LnBhdGgpO1xuICAgICAgaWYgKCEoYXdhaXQgdGhpcy5hcHAudmF1bHQuYWRhcHRlci5leGlzdHMoZW50cnkucGF0aCkpICYmICFpc0RlbnlGb2xkZXIpIHtcbiAgICAgICAgcHJldmlld0xpc3QucHVzaCh7XG4gICAgICAgICAgZmlsZVBhdGg6IGVudHJ5LnBhdGgsXG4gICAgICAgICAgYWN0aW9uOiAnbWlzc2luZyBmb2xkZXIgKHdpbGwgYmUgY3JlYXRlZCknLFxuICAgICAgICAgIHNlbGVjdGVkOiB0cnVlLFxuICAgICAgICAgIGlzRm9sZGVyOiB0cnVlLFxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyAzYykgXHUyMDFDTW92ZWRcdTIwMUQgZGV0ZWN0aW9uIChza2lwIGJsYWNrbGlzdGVkKVxuICAgIGZvciAoY29uc3QgZiBvZiB0aGlzLm1hbmlmZXN0Q2FjaGUuZmlsZXMpIHtcbiAgICAgIC8vIFx1MjUwMFx1MjUwMCBTS0lQIGFueSBvcHRpb25hbDp0cnVlIGZpbGVcbiAgICAgIGlmIChmLm9wdGlvbmFsKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBtYW5pZmVzdEtleSA9IGYua2V5O1xuICAgICAgY29uc3QgbWFuaWZlc3RQYXRoID0gZi5wYXRoO1xuICAgICAgY29uc3QgY3VzdG9tID0gdGhpcy5zZXR0aW5ncy5jdXN0b21QYXRocy5maW5kKChjKSA9PiBjLm1hbmlmZXN0S2V5ID09PSBtYW5pZmVzdEtleSk7XG4gICAgICBjb25zdCBwcmV2UGF0aCA9IHRoaXMub2xkUGF0aHNCeUdpdGh1YlttYW5pZmVzdFBhdGhdO1xuXG4gICAgICBjb25zdCBpc0luRGVueUZvbGRlciA9IGRlbnlMaXN0ZWRGb2xkZXJzLnNvbWUoKGZvbGRlcikgPT5cbiAgICAgICAgbWFuaWZlc3RQYXRoLnN0YXJ0c1dpdGgoZm9sZGVyICsgJy8nKVxuICAgICAgKTtcbiAgICAgIGlmIChjdXN0b20/LmRvVXBkYXRlID09PSBmYWxzZSB8fCBpc0luRGVueUZvbGRlcikge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICAgIGlmIChjdXN0b20gJiYgY3VzdG9tLnZhdWx0UGF0aCAmJiBjdXN0b20udmF1bHRQYXRoICE9PSBtYW5pZmVzdFBhdGgpIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgICBpZiAoXG4gICAgICAgIHByZXZQYXRoICYmXG4gICAgICAgIHByZXZQYXRoICE9PSBtYW5pZmVzdFBhdGggJiZcbiAgICAgICAgKCFjdXN0b20gfHwgY3VzdG9tLnZhdWx0UGF0aCA9PT0gbWFuaWZlc3RQYXRoKVxuICAgICAgKSB7XG4gICAgICAgIHByZXZpZXdMaXN0LnB1c2goe1xuICAgICAgICAgIGZpbGVQYXRoOiBwcmV2UGF0aCxcbiAgICAgICAgICBhY3Rpb246IGBtb3ZlZCBcdTIxOTIgJHttYW5pZmVzdFBhdGh9YCxcbiAgICAgICAgICBzZWxlY3RlZDogdHJ1ZSxcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHByZXZpZXdMaXN0O1xuICB9XG5cblxuXG5cbiAgYXN5bmMgZm9yY2VVcGRhdGVQcmV2aWV3QW5kQ29uZmlybSgpIHtcbiAgICAvLyAxKSBCdWlsZCB0aGUgZmxhdCBsaXN0IG9mIFByZXZpZXdJdGVtIG9iamVjdHNcbiAgICBjb25zdCBwcmV2aWV3TGlzdCA9IGF3YWl0IHRoaXMuYnVpbGRGb3JjZVVwZGF0ZVByZXZpZXcoKTtcblxuICAgIC8vIDIpIFNwbGl0IHRoZSBpdGVtcyBpbnRvIFx1MjAxQ2RlbnktbGlzdGVkXHUyMDFEIHZzLiBcdTIwMUNub3JtYWxcdTIwMUQgaXRlbXNcbiAgICAvLyAgICAoYnVpbGRGb3JjZVVwZGF0ZVByZXZpZXcgdXNlcyBhY3Rpb24gPSAnZGVueS1saXN0ZWQgXHUyMDEzIHdpbGwgbm90IHVwZGF0ZScpXG4gICAgY29uc3QgZGVueUl0ZW1zOiBQcmV2aWV3SXRlbVtdID0gW107XG4gICAgY29uc3Qgbm9ybWFsSXRlbXM6IFByZXZpZXdJdGVtW10gPSBbXTtcbiAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgcHJldmlld0xpc3QpIHtcbiAgICAgIGlmIChpdGVtLmFjdGlvbi5zdGFydHNXaXRoKCdkZW55LWxpc3RlZCcpKSB7XG4gICAgICAgIGRlbnlJdGVtcy5wdXNoKGl0ZW0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbm9ybWFsSXRlbXMucHVzaChpdGVtKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyAzKSBDcmVhdGUgYW5kIG9wZW4gdGhlIG1vZGFsIHdpdGggYm90aCBsaXN0c1xuICAgIGNvbnN0IG1vZGFsID0gbmV3IChjbGFzcyBleHRlbmRzIE1vZGFsIHtcbiAgICAgIHBsdWdpbjogVlZ1bmRlcmxvcmVUb29sa2l0UGx1Z2luO1xuICAgICAgbm9ybWFsOiBQcmV2aWV3SXRlbVtdO1xuICAgICAgZGVuaWVkOiBQcmV2aWV3SXRlbVtdO1xuXG4gICAgICBjb25zdHJ1Y3RvcihhcHA6IEFwcCwgbm9ybWFsOiBQcmV2aWV3SXRlbVtdLCBkZW5pZWQ6IFByZXZpZXdJdGVtW10pIHtcbiAgICAgICAgc3VwZXIoYXBwKTtcbiAgICAgICAgdGhpcy5ub3JtYWwgPSBub3JtYWw7XG4gICAgICAgIHRoaXMuZGVuaWVkID0gZGVuaWVkO1xuICAgICAgfVxuXG4gICAgICBvbk9wZW4oKSB7XG4gICAgICAgIC8vIFByZXZlbnQgY2xpY2tzIGZyb20gY2xvc2luZyBhbnl0aGluZyBiZWhpbmRcbiAgICAgICAgdGhpcy5jb250ZW50RWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4gZS5zdG9wUHJvcGFnYXRpb24oKSk7XG4gICAgICAgIHRoaXMuY29udGVudEVsLmVtcHR5KCk7XG4gICAgICAgIHRoaXMudGl0bGVFbC5zZXRUZXh0KCdGb3JjZSBVcGRhdGUgUHJldmlldycpO1xuXG4gICAgICAgIC8vIEludHJvIHBhcmFncmFwaFxuICAgICAgICB0aGlzLmNvbnRlbnRFbC5jcmVhdGVFbCgncCcsIHtcbiAgICAgICAgICB0ZXh0OlxuICAgICAgICAgICAgJ1RoZSBmb2xsb3dpbmcgaXRlbXMgd2lsbCBiZSB1cGRhdGVkLiBVbmNoZWNrIGFueSBpdGVtcyB5b3UgZG8gTk9UIHdhbnQgdG8gY2hhbmdlLCB0aGVuIGNsaWNrIFwiQ29uZmlybSBhbmQgVXBkYXRlXCIuJyxcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gNCkgUmVuZGVyIFx1MjAxQ25vcm1hbFx1MjAxRCAobm9uLWRlbnkpIGl0ZW1zIHdpdGggY2hlY2tib3hlc1xuICAgICAgICBpZiAodGhpcy5ub3JtYWwubGVuZ3RoKSB7XG4gICAgICAgICAgY29uc3Qgbm9ybWFsQ29udGFpbmVyID0gdGhpcy5jb250ZW50RWwuY3JlYXRlRWwoJ2RpdicpO1xuICAgICAgICAgIE9iamVjdC5hc3NpZ24obm9ybWFsQ29udGFpbmVyLnN0eWxlLCB7XG4gICAgICAgICAgICBtYXhIZWlnaHQ6ICczMDBweCcsXG4gICAgICAgICAgICBvdmVyZmxvd1k6ICdhdXRvJyxcbiAgICAgICAgICAgIG1hcmdpblRvcDogJzFlbScsXG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgICB0aGlzLm5vcm1hbC5mb3JFYWNoKChpdGVtKSA9PiB7XG4gICAgICAgICAgICBjb25zdCByb3cgPSBub3JtYWxDb250YWluZXIuY3JlYXRlRGl2KCk7XG4gICAgICAgICAgICBPYmplY3QuYXNzaWduKHJvdy5zdHlsZSwge1xuICAgICAgICAgICAgICBkaXNwbGF5OiAnZmxleCcsXG4gICAgICAgICAgICAgIGFsaWduSXRlbXM6ICdmbGV4LXN0YXJ0JyxcbiAgICAgICAgICAgICAganVzdGlmeUNvbnRlbnQ6ICdzcGFjZS1iZXR3ZWVuJyxcbiAgICAgICAgICAgICAgcGFkZGluZzogJzZweCAwJyxcbiAgICAgICAgICAgICAgZm9udEZhbWlseTogJ21vbm9zcGFjZScsXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgLy8gTGVmdDogZmlsZSBwYXRoICsgYWN0aW9uIG5vdGVcbiAgICAgICAgICAgIGNvbnN0IGxhYmVsID0gcm93LmNyZWF0ZURpdigpO1xuICAgICAgICAgICAgbGFiZWwuYWRkQ2xhc3MoXCJmb3JjZXVwZGF0ZS1mbGV4Y29sdW1uXCIpO1xuXG4gICAgICAgICAgICBjb25zdCBsYWJlbFdyYXBwZXIgPSBsYWJlbC5jcmVhdGVEaXYoKTtcbiAgICAgICAgICAgIGxhYmVsV3JhcHBlci50ZXh0Q29udGVudCA9IGl0ZW0uZmlsZVBhdGg7XG5cbiAgICAgICAgICAgIGNvbnN0IG5vdGUgPSBsYWJlbC5jcmVhdGVEaXYoeyB0ZXh0OiBpdGVtLmFjdGlvbiB9KTtcbiAgICAgICAgICAgIG5vdGUuYWRkQ2xhc3MoXCJmb3JjZXVwZGF0ZS1ub3RlXCIpO1xuXG4gICAgICAgICAgICAvLyBSaWdodDogY2hlY2tib3hcbiAgICAgICAgICAgIGNvbnN0IGNoZWNrYm94ID0gcm93LmNyZWF0ZUVsKCdpbnB1dCcsIHsgdHlwZTogJ2NoZWNrYm94JyB9KTtcbiAgICAgICAgICAgIGNoZWNrYm94LmNoZWNrZWQgPSBpdGVtLnNlbGVjdGVkO1xuICAgICAgICAgICAgY2hlY2tib3gub25jaGFuZ2UgPSAoKSA9PiB7XG4gICAgICAgICAgICAgIGl0ZW0uc2VsZWN0ZWQgPSBjaGVja2JveC5jaGVja2VkO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjb25zdCBub0NhbmRpZGF0ZXMgPSB0aGlzLmNvbnRlbnRFbC5jcmVhdGVFbCgnZGl2Jyk7XG4gICAgICAgICAgT2JqZWN0LmFzc2lnbihub0NhbmRpZGF0ZXMuc3R5bGUsIHtcbiAgICAgICAgICAgIGRpc3BsYXk6ICdpbmxpbmUtYmxvY2snLFxuICAgICAgICAgICAgZm9udEZhbWlseTogJ21vbm9zcGFjZScsXG4gICAgICAgICAgICBmb250U3R5bGU6ICdpdGFsaWMnLFxuICAgICAgICAgICAgbWFyZ2luVG9wOiAnMC41ZW0nLFxuICAgICAgICAgIH0pO1xuICAgICAgICAgIG5vQ2FuZGlkYXRlcy50ZXh0Q29udGVudCA9ICdObyBmb3JjZS11cGRhdGUgY2FuZGlkYXRlcy4nO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gNSkgUmVuZGVyIFx1MjAxQ2RlbnktbGlzdGVkXHUyMDFEIGl0ZW1zIGluc2lkZSBhIGNvbGxhcHNlZCA8ZGV0YWlscz5cbiAgICAgICAgaWYgKHRoaXMuZGVuaWVkLmxlbmd0aCkge1xuICAgICAgICAgIGNvbnN0IGRlbnlEZXRhaWxzID0gdGhpcy5jb250ZW50RWwuY3JlYXRlRWwoJ2RldGFpbHMnLCB7IGNsczogJ3ZrLXNlY3Rpb24nIH0pO1xuICAgICAgICAgIGRlbnlEZXRhaWxzLm9wZW4gPSBmYWxzZTtcblxuICAgICAgICAgIGNvbnN0IHN1bW1hcnkgPSBkZW55RGV0YWlscy5jcmVhdGVFbCgnc3VtbWFyeScsIHsgY2xzOiAndmstc2VjdGlvbi1oZWFkZXInIH0pO1xuICAgICAgICAgIE9iamVjdC5hc3NpZ24oc3VtbWFyeS5zdHlsZSwge1xuICAgICAgICAgICAgY3Vyc29yOiAncG9pbnRlcicsXG4gICAgICAgICAgICBkaXNwbGF5OiAnZmxleCcsXG4gICAgICAgICAgICBjb2xvcjogJ3ZhcigtLXRleHQtZmFpbnQpJyxcbiAgICAgICAgICAgIGFsaWduSXRlbXM6ICdjZW50ZXInLFxuICAgICAgICAgICAgZ2FwOiAnMC41ZW0nLFxuICAgICAgICAgICAgbWFyZ2luVG9wOiAnMWVtJyxcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBzdW1tYXJ5LmNyZWF0ZUVsKCdzcGFuJywgeyB0ZXh0OiBgRGVueS1MaXN0IEZpbGVzICgke3RoaXMuZGVuaWVkLmxlbmd0aH0pYCB9KTtcblxuICAgICAgICAgIC8vIFJvdGF0aW5nIFx1MjAxQ1ZWXHUyMDFEIGljb24gb24gZXhwYW5kL2NvbGxhcHNlXG4gICAgICAgICAgY29uc3QgdG9nZ2xlSWNvbiA9IHN1bW1hcnkuY3JlYXRlRWwoJ3NwYW4nLCB7IHRleHQ6ICdWVicsIGNsczogJ3ZrLXRvZ2dsZS1pY29uJyB9KTtcbiAgICAgICAgICBPYmplY3QuYXNzaWduKHRvZ2dsZUljb24uc3R5bGUsIHtcbiAgICAgICAgICAgIGZvbnRXZWlnaHQ6ICdib2xkJyxcbiAgICAgICAgICAgIGRpc3BsYXk6ICdpbmxpbmUtYmxvY2snLFxuICAgICAgICAgICAgdHJhbnNpdGlvbjogJ3RyYW5zZm9ybSAwLjJzIGVhc2UnLFxuICAgICAgICAgICAgdHJhbnNmb3JtT3JpZ2luOiAnNTAlIDUwJScsXG4gICAgICAgICAgICB1c2VyU2VsZWN0OiAnbm9uZScsXG4gICAgICAgICAgICB0cmFuc2Zvcm06ICdyb3RhdGUoMTgwZGVnKScsXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgZGVueURldGFpbHMub250b2dnbGUgPSAoKSA9PiB7XG4gICAgICAgICAgICB0b2dnbGVJY29uLnRvZ2dsZUNsYXNzKFwidnYtcm90YXRlZFwiLCAhZGVueURldGFpbHMub3Blbik7XG4gICAgICAgICAgfTtcblxuICAgICAgICAgIC8vIEJvZHkgb2YgPGRldGFpbHM+IFx1MjAxNCBlYWNoIGRlbnktbGlzdGVkIGl0ZW0gaXMgZmFpbnQgYW5kIGRpc2FibGVkXG4gICAgICAgICAgY29uc3QgZGVueUJvZHkgPSBkZW55RGV0YWlscy5jcmVhdGVEaXYoeyBjbHM6ICd2ay1zZWN0aW9uLWJvZHknIH0pO1xuICAgICAgICAgIGRlbnlCb2R5LmFkZENsYXNzKFwiZGVueWxpc3RcIik7XG5cbiAgICAgICAgICB0aGlzLmRlbmllZC5mb3JFYWNoKChpdGVtKSA9PiB7XG4gICAgICAgICAgICBjb25zdCByb3cgPSBkZW55Qm9keS5jcmVhdGVEaXYoKTtcbiAgICAgICAgICAgIE9iamVjdC5hc3NpZ24ocm93LnN0eWxlLCB7XG4gICAgICAgICAgICAgIGRpc3BsYXk6ICdmbGV4JyxcbiAgICAgICAgICAgICAgYWxpZ25JdGVtczogJ2ZsZXgtc3RhcnQnLFxuICAgICAgICAgICAgICBqdXN0aWZ5Q29udGVudDogJ3NwYWNlLWJldHdlZW4nLFxuICAgICAgICAgICAgICBwYWRkaW5nOiAnNnB4IDAnLFxuICAgICAgICAgICAgICBmb250RmFtaWx5OiAnbW9ub3NwYWNlJyxcbiAgICAgICAgICAgICAgY29sb3I6ICd2YXIoLS10ZXh0LWZhaW50KScsXG4gICAgICAgICAgICAgIGZvbnRTdHlsZTogJ2l0YWxpYycsXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgY29uc3QgbGFiZWxXcmFwcGVyID0gcm93LmNyZWF0ZURpdigpO1xuICAgICAgICAgICAgbGFiZWxXcmFwcGVyLnRleHRDb250ZW50ID0gaXRlbS5maWxlUGF0aDtcbiAgICAgICAgICAgIGxhYmVsV3JhcHBlci5hZGRDbGFzcyhcImZvcmNldXBkYXRlLWxhYmVsd3JhcHBlclwiKTtcblxuICAgICAgICAgICAgY29uc3Qgbm90ZSA9IHJvdy5jcmVhdGVEaXYoeyB0ZXh0OiBpdGVtLmFjdGlvbiB9KTtcbiAgICAgICAgICAgIG5vdGUuYWRkQ2xhc3MoXCJmb3JjZXVwZGF0ZS1ub3RlLWJcIik7XG5cbiAgICAgICAgICAgIC8vIERlbnktbGlzdGVkIGNoZWNrYm94IGlzIGRpc2FibGVkXG4gICAgICAgICAgICBjb25zdCBjaGVja2JveCA9IHJvdy5jcmVhdGVFbCgnaW5wdXQnLCB7IHR5cGU6ICdjaGVja2JveCcgfSk7XG4gICAgICAgICAgICBjaGVja2JveC5jaGVja2VkID0gaXRlbS5zZWxlY3RlZDtcbiAgICAgICAgICAgIGNoZWNrYm94LmRpc2FibGVkID0gdHJ1ZTtcbiAgICAgICAgICAgIGNoZWNrYm94LnRpdGxlID0gJ1RoaXMgaXRlbSBpcyBkZW55LWxpc3RlZCc7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGhpcy5wbHVnaW4uc2V0dGluZ3MucmVwYXJzZUdhbWVzZXRzKSB7XG4gICAgICAgICAgdGhpcy5jb250ZW50RWxcbiAgICAgICAgICAgIC5jcmVhdGVEaXYoeyBjbHM6ICdtb2QtYXV4LXRleHQnIH0pXG4gICAgICAgICAgICAuc2V0VGV4dCgnXHVEODNEXHVERDA0IFJlZnJlc2hpbmcgR2FtZXNldCBEYXRhJyk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyA2KSBCdXR0b25zIGF0IHRoZSBib3R0b21cbiAgICAgICAgY29uc3QgYnV0dG9uUm93ID0gdGhpcy5jb250ZW50RWwuY3JlYXRlRWwoJ2RpdicpO1xuICAgICAgICBPYmplY3QuYXNzaWduKGJ1dHRvblJvdy5zdHlsZSwge1xuICAgICAgICAgIGRpc3BsYXk6ICdmbGV4JyxcbiAgICAgICAgICBqdXN0aWZ5Q29udGVudDogJ2ZsZXgtZW5kJyxcbiAgICAgICAgICBnYXA6ICcwLjVlbScsXG4gICAgICAgICAgbWFyZ2luVG9wOiAnMS41ZW0nLFxuICAgICAgICB9KTtcblxuICAgICAgICBjb25zdCBjYW5jZWxCdG4gPSBidXR0b25Sb3cuY3JlYXRlRWwoJ2J1dHRvbicsIHsgdGV4dDogJ0NhbmNlbCcgfSk7XG4gICAgICAgIGNhbmNlbEJ0bi5vbmNsaWNrID0gKCkgPT4gdGhpcy5jbG9zZSgpO1xuXG4gICAgICAgIGNvbnN0IGNvbmZpcm1CdG4gPSBidXR0b25Sb3cuY3JlYXRlRWwoJ2J1dHRvbicsIHtcbiAgICAgICAgICB0ZXh0OiAnQ29uZmlybSBhbmQgVXBkYXRlJyxcbiAgICAgICAgICBjbHM6ICdtb2QtY3RhJyxcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbmZpcm1CdG4ub25jbGljayA9IGFzeW5jICgpID0+IHtcbiAgICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICAgICAgLy8gUGFzcyBldmVyeXRoaW5nIGludG8gcGVyZm9ybUZvcmNlVXBkYXRlV2l0aFNlbGVjdGlvbjsgZGVueS1saXN0ZWQgaXRlbXMgd2lsbCBiZSBza2lwcGVkXG4gICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4ucGVyZm9ybUZvcmNlVXBkYXRlV2l0aFNlbGVjdGlvbihbLi4udGhpcy5ub3JtYWwsIC4uLnRoaXMuZGVuaWVkXSk7XG4gICAgICAgIH07XG4gICAgICB9XG5cbiAgICAgIG9uQ2xvc2UoKSB7XG4gICAgICAgIHRoaXMuY29udGVudEVsLmVtcHR5KCk7XG4gICAgICB9XG4gICAgfSkodGhpcy5hcHAsIG5vcm1hbEl0ZW1zLCBkZW55SXRlbXMpO1xuXG4gICAgLy8gQXR0YWNoIHBsdWdpbiBwb2ludGVyIGFuZCBvcGVuXG4gICAgKG1vZGFsIGFzIGFueSkucGx1Z2luID0gdGhpcztcbiAgICBtb2RhbC5vcGVuKCk7XG4gIH1cblxuXG4gIGFzeW5jIHVwZGF0ZUVudHJ5RnJvbU1hbmlmZXN0KGVudHJ5OiBNYW5pZmVzdEZpbGVFbnRyeSwgZm9yY2U6IGJvb2xlYW4gPSBmYWxzZSkge1xuICAgIGNvbnN0IGN1c3RvbSA9IHRoaXMuc2V0dGluZ3MuY3VzdG9tUGF0aHMuZmluZCgoYykgPT4gYy5tYW5pZmVzdEtleSA9PT0gZW50cnkua2V5KTtcbiAgICBpZiAoY3VzdG9tPy5kb1VwZGF0ZSA9PT0gZmFsc2UpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBmaW5hbFZhdWx0UGF0aCA9IGN1c3RvbT8udmF1bHRQYXRoID8/IHRoaXMucmVzb2x2ZVZhdWx0UGF0aChlbnRyeS5wYXRoKTtcbiAgICBpZiAoIWZvcmNlICYmIChhd2FpdCB0aGlzLmZpbGVDYWNoZU1hbmFnZXIuaXNVcFRvRGF0ZShmaW5hbFZhdWx0UGF0aCkpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgdXJsID0gYGh0dHBzOi8vcmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbS9zbGFtd2lzZTAwMDEvdnZ1bmRlcmxvcmUtdG9vbGtpdC1mdWxsL21haW4vJHtlbnRyeS5wYXRofWA7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IGZldGNoKHVybCk7XG4gICAgICBjb25zdCB0ZXh0ID0gYXdhaXQgcmVzLnRleHQoKTtcbiAgICAgIGF3YWl0IHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXIud3JpdGUoZmluYWxWYXVsdFBhdGgsIHRleHQpO1xuICAgICAgYXdhaXQgdGhpcy5maWxlQ2FjaGVNYW5hZ2VyLnVwZGF0ZUNhY2hlKGZpbmFsVmF1bHRQYXRoLCB0ZXh0LCBlbnRyeS5wYXRoKTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICBjb25zb2xlLmVycm9yKGBcdTI3NEMgRXJyb3IgdXBkYXRpbmcgJHtlbnRyeS5kaXNwbGF5TmFtZX06YCwgZSk7XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgcGVyZm9ybUZvcmNlVXBkYXRlV2l0aFNlbGVjdGlvbihwcmV2aWV3TGlzdDogUHJldmlld0l0ZW1bXSkge1xuICAgIGlmICh0aGlzLnNldHRpbmdzLmF1dG9CYWNrdXBCZWZvcmVVcGRhdGUpIHtcbiAgICAgIC8vIFx1MjAyNiAoeW91ciBleGlzdGluZyBiYWNrdXAgY29kZSkgXHUyMDI2XG4gICAgfVxuXG4gICAgdGhpcy5zZXR0aW5ncy5iYWNrdXBGaWxlcyA9IHt9O1xuICAgIGF3YWl0IHRoaXMuc2F2ZVNldHRpbmdzKCk7XG5cbiAgICB0cnkge1xuICAgICAgLy8gXHUyNDYwIEZpbHRlciBvdXQgZm9sZGVycywgdW5jaGVja2VkLCBhbmQgZGVueS1saXN0ZWQ6XG4gICAgICBjb25zdCB0b1VwZGF0ZSA9IHByZXZpZXdMaXN0LmZpbHRlcihcbiAgICAgICAgKGl0ZW0pID0+XG4gICAgICAgICAgaXRlbS5zZWxlY3RlZCAmJlxuICAgICAgICAgICFpdGVtLmlzRm9sZGVyICYmXG4gICAgICAgICAgIXRoaXMuc2V0dGluZ3MuY3VzdG9tUGF0aHMuc29tZShcbiAgICAgICAgICAgIChjKSA9PiBjLnZhdWx0UGF0aCA9PT0gaXRlbS5maWxlUGF0aCAmJiBjLmRvVXBkYXRlID09PSBmYWxzZVxuICAgICAgICAgIClcbiAgICAgICk7XG5cbiAgICAgIC8vIFx1MjQ2MSBVcGRhdGUgZWFjaCBzZWxlY3RlZCBmaWxlXG4gICAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgdG9VcGRhdGUpIHtcbiAgICAgICAgY29uc3QgZW50cnkgPSB0aGlzLm1hbmlmZXN0Q2FjaGUuZmlsZXMuZmluZChcbiAgICAgICAgICAoZikgPT4gdGhpcy5yZXNvbHZlVmF1bHRQYXRoKGYucGF0aCkgPT09IGl0ZW0uZmlsZVBhdGhcbiAgICAgICAgKTtcbiAgICAgICAgaWYgKCFlbnRyeSkge1xuICAgICAgICAgIGNvbnNvbGUud2FybihgXHUyNkEwXHVGRTBGIENvdWxkIG5vdCBtYXRjaCBwcmV2aWV3IGl0ZW0gdG8gbWFuaWZlc3Q6ICR7aXRlbS5maWxlUGF0aH1gKTtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBhd2FpdCB0aGlzLnVwZGF0ZUVudHJ5RnJvbU1hbmlmZXN0KGVudHJ5LCB0cnVlKTtcbiAgICAgIH1cblxuICAgICAgLy8gXHUyNDYyIEVuc3VyZSBhbGwgbWFuaWZlc3QgZm9sZGVycyBleGlzdFxuICAgICAgZm9yIChjb25zdCBlbnRyeSBvZiB0aGlzLm1hbmlmZXN0Q2FjaGUuZm9sZGVycykge1xuICAgICAgICBpZiAoIShhd2FpdCB0aGlzLmFwcC52YXVsdC5hZGFwdGVyLmV4aXN0cyhlbnRyeS5wYXRoKSkpIHtcbiAgICAgICAgICBhd2FpdCB0aGlzLmFwcC52YXVsdC5jcmVhdGVGb2xkZXIoZW50cnkucGF0aCk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gNCkgQnVtcCB2ZXJzaW9uXG4gICAgICBhd2FpdCB0aGlzLnVwZGF0ZVZlcnNpb25GaWxlKCk7XG4gICAgICB0aGlzLnNldHRpbmdzLmluc3RhbGxlZFZlcnNpb24gPSB0aGlzLnNldHRpbmdzLmxhdGVzdFRvb2xraXRWZXJzaW9uID8/ICd1bmtub3duJztcbiAgICAgIHRoaXMuc2V0dGluZ3MubGFzdEZvcmNlVXBkYXRlID0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpO1xuICAgICAgYXdhaXQgdGhpcy5zYXZlU2V0dGluZ3MoKTtcblxuICAgICAgbmV3IE5vdGljZSgnXHUyNzA1IFRvb2xraXQgZm9yY2VcdTIwMTB1cGRhdGVkIHdpdGggeW91ciBzZWxlY3Rpb25zLicpO1xuXG4gICAgICBpZiAodGhpcy5zZXR0aW5ncy5yZXBhcnNlR2FtZXNldHMpIHtcbiAgICAgICAgbmV3IE5vdGljZSgnXHVEODNEXHVERDA0IFJlZnJlc2hpbmcgR2FtZSBTZXQgRGF0YVx1MjAyNicpO1xuICAgICAgICBhd2FpdCB0aGlzLnJlZnJlc2hHYW1lU2V0RGF0YSgpO1xuICAgICAgfVxuXG4gICAgICBpZiAodGhpcy5zZXR0aW5nc1RhYikge1xuICAgICAgICBhd2FpdCB0aGlzLnNldHRpbmdzVGFiLnVwZGF0ZVZlcnNpb25EaXNwbGF5KCk7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdcdTI3NEMgRm9yY2UgdXBkYXRlIGZhaWxlZC4gVmVyc2lvbiBub3QgY2hhbmdlZC4nLCBlcnIpO1xuICAgICAgbmV3IE5vdGljZSgnXHUyNzRDIE9uZSBvciBtb3JlIGZpbGVzIGZhaWxlZC4gVmVyc2lvbiBOT1QgdXBkYXRlZC4nKTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5zZXR0aW5ncy5oaWdobGlnaHRFbmFibGVkKSB7XG4gICAgICB0aGlzLmVuYWJsZUhpZ2hsaWdodCgpO1xuICAgIH1cbiAgfVxuXG4gIC8vIFx1MjUwMFx1MjUwMFx1MjUwMCBTSU5HTEUtRklMRSBVUERBVEUgKHdpdGggR2l0SHViIEFQSSArIHJhdyBmYWxsYmFjaykgXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXG5cbiAgYXN5bmMgdXBkYXRlU2luZ2xlRmlsZUZyb21HaXRIdWIoXG4gICAgeyBnaXRodWJQYXRoLCB2YXVsdFBhdGggfTogeyBnaXRodWJQYXRoOiBzdHJpbmc7IHZhdWx0UGF0aDogc3RyaW5nIH0sXG4gICAgZm9yY2U6IGJvb2xlYW4gPSBmYWxzZVxuICApIHtcbiAgICBpZiAodGhpcy5zZXR0aW5ncy5jdXN0b21pemVVcGRhdGVzKSB7XG4gICAgICB2YXVsdFBhdGggPSB0aGlzLnJlc29sdmVWYXVsdFBhdGgoZ2l0aHViUGF0aCk7XG4gICAgICBjb25zdCBjdXN0b20gPSB0aGlzLnNldHRpbmdzLmN1c3RvbVBhdGhzLmZpbmQoKGMpID0+IGMubWFuaWZlc3RLZXkgPT09IGdpdGh1YlBhdGgpO1xuICAgICAgaWYgKGN1c3RvbT8uZG9VcGRhdGUgPT09IGZhbHNlKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgdmF1bHRQYXRoID0gZ2l0aHViUGF0aDtcbiAgICB9XG5cbiAgICBpZiAoIXZhdWx0UGF0aCkge1xuICAgICAgY29uc29sZS5lcnJvcihgXHUyNzRDIE5vIHZhbGlkIHZhdWx0IHBhdGggcmVzb2x2ZWQgZm9yICR7Z2l0aHViUGF0aH1gKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyAxKSBIYW5kbGUgbG9jYWwgcmVuYW1lcyBmaXJzdFxuICAgIGNvbnN0IG9sZFZhdWx0ID0gdGhpcy5vbGRQYXRoc0J5R2l0aHViW2dpdGh1YlBhdGhdO1xuICAgIGlmIChvbGRWYXVsdCAmJiBvbGRWYXVsdCAhPT0gdmF1bHRQYXRoKSB7XG4gICAgICBpZiAoYXdhaXQgdGhpcy5hcHAudmF1bHQuYWRhcHRlci5leGlzdHModmF1bHRQYXRoKSkge1xuICAgICAgICBjb25zdCBzdHJheSA9IGF3YWl0IHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXIucmVhZCh2YXVsdFBhdGgpO1xuICAgICAgICBhd2FpdCB0aGlzLmJhY2t1cEZpbGUodmF1bHRQYXRoLCBzdHJheSk7XG4gICAgICAgIGF3YWl0IHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXIucmVtb3ZlKHZhdWx0UGF0aCk7XG4gICAgICB9XG4gICAgICBjb25zdCBvbGRGaWxlID0gdGhpcy5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKG9sZFZhdWx0KTtcbiAgICAgIGlmIChvbGRGaWxlIGluc3RhbmNlb2YgVEZpbGUpIHtcbiAgICAgICAgYXdhaXQgdGhpcy5hcHAudmF1bHQucmVuYW1lKG9sZEZpbGUsIHZhdWx0UGF0aCk7XG4gICAgICAgIGNvbnN0IG5ld0NvbnRlbnQgPSBhd2FpdCB0aGlzLmFwcC52YXVsdC5hZGFwdGVyLnJlYWQodmF1bHRQYXRoKTtcbiAgICAgICAgYXdhaXQgdGhpcy5maWxlQ2FjaGVNYW5hZ2VyLnVwZGF0ZUNhY2hlKHZhdWx0UGF0aCwgbmV3Q29udGVudCwgZ2l0aHViUGF0aCk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyAyKSBFeGlzdGVuY2UsIGJhY2t1cCAmIHNraXAgbG9naWNcbiAgICBjb25zdCBmaWxlRXhpc3RzID0gYXdhaXQgdGhpcy5hcHAudmF1bHQuYWRhcHRlci5leGlzdHModmF1bHRQYXRoKTtcbiAgICBpZiAoZm9yY2UgJiYgZmlsZUV4aXN0cykge1xuICAgICAgY29uc3QgY3VycmVudCA9IGF3YWl0IHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXIucmVhZCh2YXVsdFBhdGgpO1xuICAgICAgYXdhaXQgdGhpcy5iYWNrdXBGaWxlKHZhdWx0UGF0aCwgY3VycmVudCk7XG4gICAgfVxuICAgIGlmICghZm9yY2UgJiYgZmlsZUV4aXN0cyAmJiAoYXdhaXQgdGhpcy5maWxlQ2FjaGVNYW5hZ2VyLmlzVXBUb0RhdGUodmF1bHRQYXRoKSkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyAzKSBGZXRjaCB2aWEgR2l0SHViIEFQSSwgZmFsbGJhY2sgdG8gcmF3XG4gICAgY29uc3QgYXBpVXJsID0gZW5jb2RlVVJJKFxuICAgICAgYGh0dHBzOi8vYXBpLmdpdGh1Yi5jb20vcmVwb3Mvc2xhbXdpc2UwMDAxL1ZWdW5kZXJsb3JlLVRvb2xraXQtRnVsbC9jb250ZW50cy8ke2dpdGh1YlBhdGh9P3JlZj1tYWluYFxuICAgICk7XG4gICAgdHJ5IHtcbiAgICAgIGxldCByZXMgPSBhd2FpdCBmZXRjaChhcGlVcmwpO1xuICAgICAgaWYgKHJlcy5zdGF0dXMgPT09IDQwNCkge1xuICAgICAgICBjb25zdCByYXdVcmwgPSBlbmNvZGVVUkkoXG4gICAgICAgICAgYGh0dHBzOi8vcmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbS9zbGFtd2lzZTAwMDEvVlZ1bmRlcmxvcmUtVG9vbGtpdC1GdWxsL21haW4vJHtnaXRodWJQYXRofWBcbiAgICAgICAgKTtcbiAgICAgICAgcmVzID0gYXdhaXQgZmV0Y2gocmF3VXJsKTtcbiAgICAgICAgaWYgKCFyZXMub2spIHRocm93IG5ldyBFcnJvcihgUmF3IGZldGNoIGZhaWxlZDogJHtyZXMuc3RhdHVzVGV4dH1gKTtcbiAgICAgICAgY29uc3QgY29udGVudCA9IGF3YWl0IHJlcy50ZXh0KCk7XG4gICAgICAgIGlmIChmaWxlRXhpc3RzKSB7XG4gICAgICAgICAgYXdhaXQgdGhpcy5hcHAudmF1bHQuYWRhcHRlci53cml0ZSh2YXVsdFBhdGgsIGNvbnRlbnQpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGF3YWl0IHRoaXMuYXBwLnZhdWx0LmNyZWF0ZSh2YXVsdFBhdGgsIGNvbnRlbnQpO1xuICAgICAgICB9XG4gICAgICAgIGF3YWl0IHRoaXMuZmlsZUNhY2hlTWFuYWdlci51cGRhdGVDYWNoZSh2YXVsdFBhdGgsIGNvbnRlbnQsIGdpdGh1YlBhdGgpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGlmICghcmVzLm9rKSB0aHJvdyBuZXcgRXJyb3IoYEdpdEh1YiBBUEkgZXJyb3I6ICR7cmVzLnN0YXR1c1RleHR9YCk7XG4gICAgICBjb25zdCB7IGRvd25sb2FkX3VybCB9ID0gKGF3YWl0IHJlcy5qc29uKCkpIGFzIHsgZG93bmxvYWRfdXJsOiBzdHJpbmcgfTtcbiAgICAgIGNvbnN0IGNvbnRlbnQgPSBhd2FpdCAoYXdhaXQgZmV0Y2goZG93bmxvYWRfdXJsKSkudGV4dCgpO1xuICAgICAgaWYgKGZpbGVFeGlzdHMpIHtcbiAgICAgICAgYXdhaXQgdGhpcy5hcHAudmF1bHQuYWRhcHRlci53cml0ZSh2YXVsdFBhdGgsIGNvbnRlbnQpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgYXdhaXQgdGhpcy5hcHAudmF1bHQuY3JlYXRlKHZhdWx0UGF0aCwgY29udGVudCk7XG4gICAgICB9XG4gICAgICBhd2FpdCB0aGlzLmZpbGVDYWNoZU1hbmFnZXIudXBkYXRlQ2FjaGUodmF1bHRQYXRoLCBjb250ZW50LCBnaXRodWJQYXRoKTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICBjb25zb2xlLmVycm9yKGBcdTI3NEMgRmFpbGVkIHRvIHVwZGF0ZSAke3ZhdWx0UGF0aH1gLCBlKTtcbiAgICB9XG4gIH1cblxuICAvLyBcdTI1MDBcdTI1MDBcdTI1MDAgUFJFVklFVyArIFJFTU9URS1CQVNFTElORSArIERJRkYgXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXG5cbiAgYXN5bmMgcHJldmlld1VwZGF0ZXNNb2RhbCgpIHtcbiAgICAvLyBcdTIwMUNMb2FkaW5nXHUyMDI2XHUyMDFEIHBsYWNlaG9sZGVyIHdoaWxlIHN5bmNpbmdcbiAgICBjb25zdCBsb2FkaW5nID0gbmV3IChjbGFzcyBleHRlbmRzIE1vZGFsIHtcbiAgICAgIGNvbnN0cnVjdG9yKGFwcDogQXBwKSB7XG4gICAgICAgIHN1cGVyKGFwcCk7XG4gICAgICB9XG4gICAgICBvbk9wZW4oKSB7XG4gICAgICAgIHRoaXMuY29udGVudEVsLmVtcHR5KCk7XG4gICAgICAgIHRoaXMuY29udGVudEVsXG4gICAgICAgICAgLmNyZWF0ZURpdih7XG4gICAgICAgICAgICB0ZXh0OiAnXHVEODNEXHVERDA0IENoZWNraW5nIGZvciB1cGRhdGVzXHUyMDI2JyxcbiAgICAgICAgICAgIGNsczogJ21vZC13YXJuaW5nJyxcbiAgICAgICAgICB9KVxuICAgICAgICAgIC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiBlLnN0b3BQcm9wYWdhdGlvbigpKTtcbiAgICAgIH1cbiAgICB9KSh0aGlzLmFwcCk7XG5cbiAgICBsb2FkaW5nLm9wZW4oKTtcbiAgICBhd2FpdCB0aGlzLnN5bmNNYW5pZmVzdCgpO1xuICAgIGF3YWl0IHRoaXMuZmV0Y2hSZW1vdGVCYXNlbGluZSgpO1xuICAgIC8vIGJ1aWxkVXBkYXRlUHJldmlldygpIG5vdyByZXR1cm5zIG9ubHkgXHUyMDFDcmVhbFx1MjAxRCBkaWZmcyAobm8gc3RhbGUgZGVueVx1MjAxMGxpc3QpXG4gICAgY29uc3QgZGlmZnMgPSBhd2FpdCB0aGlzLmJ1aWxkVXBkYXRlUHJldmlldygpO1xuICAgIGxvYWRpbmcuY2xvc2UoKTtcblxuICAgIC8vIFNwbGl0IG91dCBkZW55XHUyMDEwbGlzdGVkIGxpbmVzIHZzLiBldmVyeXRoaW5nIGVsc2VcbiAgICBjb25zdCBkZW55TGlzdGVkTGluZXM6IHN0cmluZ1tdID0gW107XG4gICAgY29uc3Qgbm9ybWFsTGluZXM6IHN0cmluZ1tdID0gW107XG5cbiAgICBmb3IgKGNvbnN0IGQgb2YgZGlmZnMpIHtcbiAgICAgIGlmIChkLnN0YXJ0c1dpdGgoJ1x1Mjc0QyBkZW55XHUyMDEwbGlzdGVkJykpIHtcbiAgICAgICAgZGVueUxpc3RlZExpbmVzLnB1c2goZCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBub3JtYWxMaW5lcy5wdXNoKGQpO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIE5vdyBjcmVhdGUgdGhlIG1vZGFsXG4gICAgY29uc3QgbW9kYWwgPSBuZXcgKGNsYXNzIGV4dGVuZHMgTW9kYWwge1xuICAgICAgcGx1Z2luOiBWVnVuZGVybG9yZVRvb2xraXRQbHVnaW47XG4gICAgICBub3JtYWw6IHN0cmluZ1tdO1xuICAgICAgZGVuaWVkOiBzdHJpbmdbXTtcblxuICAgICAgY29uc3RydWN0b3IoYXBwOiBBcHAsIG5vcm1hbDogc3RyaW5nW10sIGRlbmllZDogc3RyaW5nW10pIHtcbiAgICAgICAgc3VwZXIoYXBwKTtcbiAgICAgICAgdGhpcy5ub3JtYWwgPSBub3JtYWw7XG4gICAgICAgIHRoaXMuZGVuaWVkID0gZGVuaWVkO1xuICAgICAgfVxuXG4gICAgICBvbk9wZW4oKSB7XG4gICAgICAgIHRoaXMuY29udGVudEVsLmVtcHR5KCk7XG4gICAgICAgIHRoaXMudGl0bGVFbC5zZXRUZXh0KCdVcGRhdGUgUHJldmlldycpO1xuXG4gICAgICAgIC8vIEludHJvIHBhcmFncmFwaFxuICAgICAgICB0aGlzLmNvbnRlbnRFbC5jcmVhdGVFbCgncCcsIHtcbiAgICAgICAgICB0ZXh0OiAnT25seSBmaWxlcyB3aG9zZSBjb250ZW50cyBkaWZmZXIgZnJvbSBHaXRIdWIgd2lsbCBiZSB1cGRhdGVkOicsXG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIDEpIElmIHRoZXJlIGFyZSBhbnkgXHUyMDFDbm9ybWFsXHUyMDFEIGRpZmZzLCByZW5kZXIgdGhlbSBpbiBhIGJ1bGxldCBsaXN0XG4gICAgICAgIGlmICh0aGlzLm5vcm1hbC5sZW5ndGgpIHtcbiAgICAgICAgICBjb25zdCB1bCA9IHRoaXMuY29udGVudEVsLmNyZWF0ZUVsKCd1bCcpO1xuICAgICAgICAgIHRoaXMubm9ybWFsLmZvckVhY2goKGxpbmUpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGxpID0gdWwuY3JlYXRlRWwoJ2xpJywgeyB0ZXh0OiBsaW5lIH0pO1xuICAgICAgICAgICAgLy8gTm8gc3BlY2lhbCBzdHlsaW5nIGZvciB0aGVzZTsgdGhleSBzaG93IHVwIG5vcm1hbGx5LlxuICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIElmIG5vIG5vcm1hbCBkaWZmcywgc2F5IFx1MjAxQ1VwIHRvIGRhdGVcdTIwMURcbiAgICAgICAgICB0aGlzLmNvbnRlbnRFbC5jcmVhdGVFbCgnZGl2Jywge1xuICAgICAgICAgICAgdGV4dDogJ1x1MjcwNSBFdmVyeXRoaW5nIGlzIGFscmVhZHkgdXAgdG8gZGF0ZSEnLFxuICAgICAgICAgICAgY2xzOiAnbW9kLWluZm8nLFxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gMikgSWYgdGhlcmUgYXJlIGFueSBkZW55XHUyMDEwbGlzdGVkIGxpbmVzLCB0dWNrIHRoZW0gaW50byBhIDxkZXRhaWxzPiBibG9ja1xuICAgICAgICBpZiAodGhpcy5kZW5pZWQubGVuZ3RoKSB7XG4gICAgICAgICAgY29uc3QgZGVueURldGFpbHMgPSB0aGlzLmNvbnRlbnRFbC5jcmVhdGVFbCgnZGV0YWlscycsIHsgY2xzOiAndmstc2VjdGlvbicgfSk7XG4gICAgICAgICAgLy8gQWx3YXlzIHN0YXJ0IGNvbGxhcHNlZCBieSBkZWZhdWx0XG4gICAgICAgICAgZGVueURldGFpbHMub3BlbiA9IGZhbHNlO1xuXG4gICAgICAgICAgLy8gU3VtbWFyeSBsaW5lOiBzaG93cyBcdTIwMUNEZW55XHUyMDEwTGlzdCBGaWxlcyAobilcdTIwMURcbiAgICAgICAgICBjb25zdCBzdW1tYXJ5ID0gZGVueURldGFpbHMuY3JlYXRlRWwoJ3N1bW1hcnknLCB7IGNsczogJ3ZrLXNlY3Rpb24taGVhZGVyJyB9KTtcbiAgICAgICAgICBPYmplY3QuYXNzaWduKHN1bW1hcnkuc3R5bGUsIHtcbiAgICAgICAgICAgIGN1cnNvcjogJ3BvaW50ZXInLFxuICAgICAgICAgICAgZGlzcGxheTogJ2ZsZXgnLFxuICAgICAgICAgICAgY29sb3I6ICd2YXIoLS10ZXh0LWZhaW50KScsXG4gICAgICAgICAgICBhbGlnbkl0ZW1zOiAnY2VudGVyJyxcbiAgICAgICAgICAgIGdhcDogJzAuNWVtJyxcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBzdW1tYXJ5LmNyZWF0ZUVsKCdzcGFuJywgeyB0ZXh0OiBgRGVueVx1MjAxMExpc3QgRmlsZXMgKCR7dGhpcy5kZW5pZWQubGVuZ3RofSlgIH0pO1xuXG4gICAgICAgICAgLy8gUmlnaHRcdTIwMTBzaWRlIGljb24gcm90YXRpbmcgb24gZXhwYW5kL2NvbGxhcHNlXG4gICAgICAgICAgY29uc3QgdG9nZ2xlSWNvbiA9IHN1bW1hcnkuY3JlYXRlRWwoJ3NwYW4nLCB7IHRleHQ6ICdWVicsIGNsczogJ3ZrLXRvZ2dsZS1pY29uJyB9KTtcbiAgICAgICAgICBPYmplY3QuYXNzaWduKHRvZ2dsZUljb24uc3R5bGUsIHtcbiAgICAgICAgICAgIGZvbnRXZWlnaHQ6ICdib2xkJyxcbiAgICAgICAgICAgIGRpc3BsYXk6ICdpbmxpbmUtYmxvY2snLFxuICAgICAgICAgICAgdHJhbnNpdGlvbjogJ3RyYW5zZm9ybSAwLjJzIGVhc2UnLFxuICAgICAgICAgICAgdHJhbnNmb3JtT3JpZ2luOiAnNTAlIDUwJScsXG4gICAgICAgICAgICB1c2VyU2VsZWN0OiAnbm9uZScsXG4gICAgICAgICAgICB0cmFuc2Zvcm06ICdyb3RhdGUoMTgwZGVnKScsXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgZGVueURldGFpbHMub250b2dnbGUgPSAoKSA9PiB7XG4gICAgICAgICAgICB0b2dnbGVJY29uLnRvZ2dsZUNsYXNzKFwidnYtcm90YXRlZFwiLCAhZGVueURldGFpbHMub3Blbik7XG4gICAgICAgICAgfTtcblxuICAgICAgICAgIC8vIEJvZHkgb2YgdGhlIGRldGFpbHM6IGEgc2ltcGxlIDx1bD4gY29udGFpbmluZyBvbmx5IGRlbnlcdTIwMTBsaXN0ZWQgbGluZXNcbiAgICAgICAgICBjb25zdCBkZW55Qm9keSA9IGRlbnlEZXRhaWxzLmNyZWF0ZURpdih7IGNsczogJ3ZrLXNlY3Rpb24tYm9keScgfSk7XG4gICAgICAgICAgZGVueUJvZHkuYWRkQ2xhc3MoXCJkZW55bGlzdFwiKTtcbiAgICAgICAgICBjb25zdCBkZW55VWwgPSBkZW55Qm9keS5jcmVhdGVFbCgndWwnKTtcbiAgICAgICAgICB0aGlzLmRlbmllZC5mb3JFYWNoKChsaW5lKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBsaSA9IGRlbnlVbC5jcmVhdGVFbCgnbGknLCB7IHRleHQ6IGxpbmUgfSk7XG4gICAgICAgICAgICBsaS5hZGRDbGFzcyhcImZvcmNldXBkYXRlLW5vdGUtY1wiKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGJ1dHRvblJvdyA9IHRoaXMuY29udGVudEVsLmNyZWF0ZUVsKCdkaXYnKTtcbiAgICAgICAgT2JqZWN0LmFzc2lnbihidXR0b25Sb3cuc3R5bGUsIHtcbiAgICAgICAgICBkaXNwbGF5OiAnZmxleCcsXG4gICAgICAgICAganVzdGlmeUNvbnRlbnQ6ICdmbGV4LWVuZCcsXG4gICAgICAgICAgbWFyZ2luVG9wOiAnMS4yNWVtJywgICAgICAgLy8gdHdlYWsgc3BhY2luZyBhcyB5b3UgbGlrZVxuICAgICAgICB9KTtcblxuICAgICAgICAvLyBcdTIwMUNDb25maXJtICYgVXBkYXRlXHUyMDFEIGJ1dHRvblxuICAgICAgICBjb25zdCBjb25maXJtQnRuID0gYnV0dG9uUm93LmNyZWF0ZUVsKCdidXR0b24nLCB7XG4gICAgICAgICAgdGV4dDogJ0NvbmZpcm0gJiBVcGRhdGUnLFxuICAgICAgICAgIGNsczogJ21vZC1jdGEnLFxuICAgICAgICB9KTtcbiAgICAgICAgY29uZmlybUJ0bi5vbmNsaWNrID0gYXN5bmMgKCkgPT4ge1xuICAgICAgICAgIGF3YWl0ICh0aGlzIGFzIGFueSkucGx1Z2luLnVwZGF0ZVNlbGVjdGVkVG9vbGtpdENvbnRlbnQoKTtcbiAgICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICAgIH07XG5cbiAgICAgICAgLy8gXHUyMDFDQ2FuY2VsXHUyMDFEIGJ1dHRvblxuICAgICAgICBjb25zdCBjYW5jZWxCdG4gPSBidXR0b25Sb3cuY3JlYXRlRWwoJ2J1dHRvbicsIHsgdGV4dDogJ0NhbmNlbCcgfSk7XG4gICAgICAgIGNhbmNlbEJ0bi5vbmNsaWNrID0gKCkgPT4gdGhpcy5jbG9zZSgpO1xuICAgICAgfVxuXG4gICAgICBvbkNsb3NlKCkge1xuICAgICAgICB0aGlzLmNvbnRlbnRFbC5lbXB0eSgpO1xuICAgICAgfVxuICAgIH0pKHRoaXMuYXBwLCBub3JtYWxMaW5lcywgZGVueUxpc3RlZExpbmVzKTtcblxuICAgIC8vIEF0dGFjaCBwbHVnaW4gcG9pbnRlciBhbmQgb3BlblxuICAgIChtb2RhbCBhcyBhbnkpLnBsdWdpbiA9IHRoaXM7XG4gICAgbW9kYWwub3BlbigpO1xuICB9XG5cblxuICBhc3luYyBidWlsZFVwZGF0ZVByZXZpZXcoKTogUHJvbWlzZTxzdHJpbmdbXT4ge1xuICAgIGNvbnN0IGNoYW5nZXM6IHN0cmluZ1tdID0gW107XG5cbiAgICAvLyAwKSBDb2xsZWN0IGFsbCBibGFja2xpc3RlZCBmb2xkZXJzIChtYW5pZmVzdEtleSB2YWx1ZXMgd2hlcmUgZG9VcGRhdGUgPT09IGZhbHNlKVxuICAgIGNvbnN0IGRlbnlMaXN0ZWRGb2xkZXJzID0gdGhpcy5zZXR0aW5ncy5jdXN0b21QYXRoc1xuICAgICAgLmZpbHRlcigoYykgPT4gYy5kb1VwZGF0ZSA9PT0gZmFsc2UpXG4gICAgICAubWFwKChjKSA9PiBjLm1hbmlmZXN0S2V5KTtcblxuICAgIC8vIDEpIERlbnlcdTIwMTBsaXN0ZWQgZW50cmllc1x1MjAxNGJ1dCBvbmx5IGlmIHRoZXlcdTIwMTlkIGFjdHVhbGx5IGJlIFx1MjAxQ25ld1x1MjAxRCAobWlzc2luZykgb3IgXHUyMDFDb3V0XHUyMDEwb2ZcdTIwMTBkYXRlXHUyMDFEXG4gICAgZm9yIChjb25zdCBmIG9mIHRoaXMubWFuaWZlc3RDYWNoZS5maWxlcykge1xuICAgICAgLy8gXHUyNTAwXHUyNTAwIFNLSVAgYW55IG9wdGlvbmFsOnRydWUgZmlsZVxuICAgICAgaWYgKGYub3B0aW9uYWwpIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGN1c3RvbSA9IHRoaXMuc2V0dGluZ3MuY3VzdG9tUGF0aHMuZmluZCgoYykgPT4gYy5tYW5pZmVzdEtleSA9PT0gZi5wYXRoKTtcbiAgICAgIGNvbnN0IGlzSW5EZW55Rm9sZGVyID0gZGVueUxpc3RlZEZvbGRlcnMuc29tZSgoZm9sZGVyKSA9PlxuICAgICAgICBmLnBhdGguc3RhcnRzV2l0aChmb2xkZXIgKyAnLycpXG4gICAgICApO1xuICAgICAgaWYgKGN1c3RvbT8uZG9VcGRhdGUgPT09IGZhbHNlIHx8IGlzSW5EZW55Rm9sZGVyKSB7XG4gICAgICAgIC8vIFJlc29sdmUgdGhlIHZhdWx0IHBhdGggKGhhbmRsZXMgcmVtYXBwaW5nIGlmIHByZXNlbnQpXG4gICAgICAgIGNvbnN0IHZwID0gY3VzdG9tPy52YXVsdFBhdGggPz8gdGhpcy5yZXNvbHZlVmF1bHRQYXRoKGYucGF0aCk7XG5cbiAgICAgICAgLy8gQ2hlY2sgaWYgZmlsZSBleGlzdHMgbG9jYWxseSBhbmQgaWYgaXRcdTIwMTlzIHVwXHUyMDEwdG9cdTIwMTBkYXRlXG4gICAgICAgIGNvbnN0IGV4aXN0cyA9IGF3YWl0IHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXIuZXhpc3RzKHZwKTtcbiAgICAgICAgY29uc3QgdXBUb0RhdGUgPSBleGlzdHMgJiYgKGF3YWl0IHRoaXMuZmlsZUNhY2hlTWFuYWdlci5pc1VwVG9EYXRlKHZwKSk7XG5cbiAgICAgICAgLy8gT25seSBzaG93IGEgZGVueVx1MjAxMGxpc3RlZCBlbnRyeSBpZiBpdCB3b3VsZCBvdGhlcndpc2UgYmUgY3JlYXRlZCBvciBvdmVyd3JpdHRlblxuICAgICAgICBpZiAoIWV4aXN0cyB8fCAhdXBUb0RhdGUpIHtcbiAgICAgICAgICBjaGFuZ2VzLnB1c2goYFx1Mjc0QyBkZW55XHUyMDEwbGlzdGVkIFx1MjAxMyB3aWxsIG5vdCB1cGRhdGU6ICR7dnB9YCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyAyKSBGVUxMXHUyMDEwU1lOQyBtb2RlIChza2lwIGFueSBmaWxlL2ZvbGRlciB0aGF0XHUyMDE5cyBibGFja2xpc3RlZClcbiAgICBpZiAoIXRoaXMuc2V0dGluZ3MuY3VzdG9taXplVXBkYXRlcykge1xuICAgICAgZm9yIChjb25zdCBmIG9mIHRoaXMubWFuaWZlc3RDYWNoZS5maWxlcykge1xuICAgICAgICAvLyBcdTI1MDBcdTI1MDAgU0tJUCBhbnkgb3B0aW9uYWw6dHJ1ZSBmaWxlXG4gICAgICAgIGlmIChmLm9wdGlvbmFsKSB7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBjdXN0b20gPSB0aGlzLnNldHRpbmdzLmN1c3RvbVBhdGhzLmZpbmQoKGMpID0+IGMubWFuaWZlc3RLZXkgPT09IGYucGF0aCk7XG4gICAgICAgIGNvbnN0IGlzSW5EZW55Rm9sZGVyID0gZGVueUxpc3RlZEZvbGRlcnMuc29tZSgoZm9sZGVyKSA9PlxuICAgICAgICAgIGYucGF0aC5zdGFydHNXaXRoKGZvbGRlciArICcvJylcbiAgICAgICAgKTtcbiAgICAgICAgaWYgKGN1c3RvbT8uZG9VcGRhdGUgPT09IGZhbHNlIHx8IGlzSW5EZW55Rm9sZGVyKSB7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCB2cCA9IHRoaXMucmVzb2x2ZVZhdWx0UGF0aChmLnBhdGgpO1xuICAgICAgICBsZXQgdGFnID0gJyc7XG4gICAgICAgIGlmICh2cCAhPT0gZi5wYXRoKSB0YWcgPSAnIChyZW1hcHBlZCknO1xuXG4gICAgICAgIGNvbnN0IGV4aXN0cyA9IGF3YWl0IHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXIuZXhpc3RzKHZwKTtcbiAgICAgICAgY29uc3QgdXBUb0RhdGUgPSBleGlzdHMgJiYgKGF3YWl0IHRoaXMuZmlsZUNhY2hlTWFuYWdlci5pc1VwVG9EYXRlKHZwKSk7XG5cbiAgICAgICAgaWYgKCFleGlzdHMpIHtcbiAgICAgICAgICBjaGFuZ2VzLnB1c2goYFx1RDgzRFx1RENDNCBOZXcgZmlsZTogJHt2cH0ke3RhZ31gKTtcbiAgICAgICAgfSBlbHNlIGlmICghdXBUb0RhdGUpIHtcbiAgICAgICAgICBjaGFuZ2VzLnB1c2goYFx1RDgzRFx1REQwMSBXaWxsIHVwZGF0ZTogJHt2cH0ke3RhZ31gKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBmb3IgKGNvbnN0IGZsZCBvZiB0aGlzLm1hbmlmZXN0Q2FjaGUuZm9sZGVycykge1xuICAgICAgICAvLyBcdTI1MDBcdTI1MDAgU0tJUCBhbnkgb3B0aW9uYWw6dHJ1ZSBmb2xkZXJcbiAgICAgICAgaWYgKGZsZC5vcHRpb25hbCkge1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgaXNEZW55Rm9sZGVyID0gZGVueUxpc3RlZEZvbGRlcnMuaW5jbHVkZXMoZmxkLnBhdGgpO1xuICAgICAgICBjb25zdCBleGlzdHMgPSBhd2FpdCB0aGlzLmFwcC52YXVsdC5hZGFwdGVyLmV4aXN0cyhmbGQucGF0aCk7XG4gICAgICAgIGlmICghZXhpc3RzICYmICFpc0RlbnlGb2xkZXIpIHtcbiAgICAgICAgICBjaGFuZ2VzLnB1c2goYFx1RDgzRFx1RENDMSBOZXcgZm9sZGVyOiAke2ZsZC5wYXRofWApO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBjaGFuZ2VzLmxlbmd0aCA/IGNoYW5nZXMgOiBbJ1x1MjcwNSBFdmVyeXRoaW5nIGlzIGFscmVhZHkgdXAgdG8gZGF0ZSEnXTtcbiAgICB9XG5cbiAgICAvLyAzKSBDVVNUT01cdTIwMTBTWU5DIG1vZGUgKHNraXAgYW55IGZpbGUvZm9sZGVyIHRoYXRcdTIwMTlzIGJsYWNrbGlzdGVkKVxuICAgIGZvciAoY29uc3QgZiBvZiB0aGlzLm1hbmlmZXN0Q2FjaGUuZmlsZXMpIHtcbiAgICAgIC8vIFx1MjUwMFx1MjUwMCBTS0lQIGFueSBvcHRpb25hbDp0cnVlIGZpbGVcbiAgICAgIGlmIChmLm9wdGlvbmFsKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBjdXN0b20gPSB0aGlzLnNldHRpbmdzLmN1c3RvbVBhdGhzLmZpbmQoKGMpID0+IGMubWFuaWZlc3RLZXkgPT09IGYucGF0aCk7XG4gICAgICBjb25zdCBpc0luRGVueUZvbGRlciA9IGRlbnlMaXN0ZWRGb2xkZXJzLnNvbWUoKGZvbGRlcikgPT5cbiAgICAgICAgZi5wYXRoLnN0YXJ0c1dpdGgoZm9sZGVyICsgJy8nKVxuICAgICAgKTtcbiAgICAgIGlmIChjdXN0b20/LmRvVXBkYXRlID09PSBmYWxzZSB8fCBpc0luRGVueUZvbGRlcikge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgY29uc3QgdnAgPSBjdXN0b20/LnZhdWx0UGF0aCA/PyB0aGlzLnJlc29sdmVWYXVsdFBhdGgoZi5wYXRoKTtcbiAgICAgIGxldCB0YWcgPSAnJztcbiAgICAgIGlmICh2cCAhPT0gZi5wYXRoKSB0YWcgPSAnIChyZW1hcHBlZCknO1xuXG4gICAgICBjb25zdCBleGlzdHMgPSBhd2FpdCB0aGlzLmFwcC52YXVsdC5hZGFwdGVyLmV4aXN0cyh2cCk7XG4gICAgICBjb25zdCB1cFRvRGF0ZSA9IGV4aXN0cyAmJiAoYXdhaXQgdGhpcy5maWxlQ2FjaGVNYW5hZ2VyLmlzVXBUb0RhdGUodnApKTtcblxuICAgICAgaWYgKCFleGlzdHMpIHtcbiAgICAgICAgY2hhbmdlcy5wdXNoKGBcdUQ4M0RcdURDQzQgTmV3IGZpbGU6ICR7dnB9JHt0YWd9YCk7XG4gICAgICB9IGVsc2UgaWYgKCF1cFRvRGF0ZSkge1xuICAgICAgICBjaGFuZ2VzLnB1c2goYFx1RDgzRFx1REQwMSBXaWxsIHVwZGF0ZTogJHt2cH0ke3RhZ31gKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBmb3IgKGNvbnN0IGZsZCBvZiB0aGlzLm1hbmlmZXN0Q2FjaGUuZm9sZGVycykge1xuICAgICAgLy8gXHUyNTAwXHUyNTAwIFNLSVAgYW55IG9wdGlvbmFsOnRydWUgZm9sZGVyXG4gICAgICBpZiAoZmxkLm9wdGlvbmFsKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBpc0RlbnlGb2xkZXIgPSBkZW55TGlzdGVkRm9sZGVycy5pbmNsdWRlcyhmbGQucGF0aCk7XG4gICAgICBjb25zdCBleGlzdHMgPSBhd2FpdCB0aGlzLmFwcC52YXVsdC5hZGFwdGVyLmV4aXN0cyhmbGQucGF0aCk7XG4gICAgICBpZiAoIWV4aXN0cyAmJiAhaXNEZW55Rm9sZGVyKSB7XG4gICAgICAgIGNoYW5nZXMucHVzaChgXHVEODNEXHVEQ0MxIE5ldyBmb2xkZXI6ICR7ZmxkLnBhdGh9YCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gM2MpIFx1MjAxQ01vdmVkXHUyMDFEIGRldGVjdGlvbiAoc2tpcCBibGFja2xpc3RlZClcbiAgICBmb3IgKGNvbnN0IGYgb2YgdGhpcy5tYW5pZmVzdENhY2hlLmZpbGVzKSB7XG4gICAgICAvLyBcdTI1MDBcdTI1MDAgU0tJUCBhbnkgb3B0aW9uYWw6dHJ1ZSBmaWxlXG4gICAgICBpZiAoZi5vcHRpb25hbCkge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgY29uc3QgbWFuaWZlc3RLZXkgPSBmLmtleTtcbiAgICAgIGNvbnN0IG1hbmlmZXN0UGF0aCA9IGYucGF0aDtcbiAgICAgIGNvbnN0IGN1c3RvbSA9IHRoaXMuc2V0dGluZ3MuY3VzdG9tUGF0aHMuZmluZCgoYykgPT4gYy5tYW5pZmVzdEtleSA9PT0gbWFuaWZlc3RLZXkpO1xuICAgICAgY29uc3QgcHJldlBhdGggPSB0aGlzLm9sZFBhdGhzQnlHaXRodWJbbWFuaWZlc3RQYXRoXTtcblxuICAgICAgY29uc3QgaXNJbkRlbnlGb2xkZXIgPSBkZW55TGlzdGVkRm9sZGVycy5zb21lKChmb2xkZXIpID0+XG4gICAgICAgIG1hbmlmZXN0UGF0aC5zdGFydHNXaXRoKGZvbGRlciArICcvJylcbiAgICAgICk7XG4gICAgICBpZiAoY3VzdG9tPy5kb1VwZGF0ZSA9PT0gZmFsc2UgfHwgaXNJbkRlbnlGb2xkZXIpIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgICBpZiAoY3VzdG9tICYmIGN1c3RvbS52YXVsdFBhdGggJiYgY3VzdG9tLnZhdWx0UGF0aCAhPT0gbWFuaWZlc3RQYXRoKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuICAgICAgaWYgKFxuICAgICAgICBwcmV2UGF0aCAmJlxuICAgICAgICBwcmV2UGF0aCAhPT0gbWFuaWZlc3RQYXRoICYmXG4gICAgICAgICghY3VzdG9tIHx8IGN1c3RvbS52YXVsdFBhdGggPT09IG1hbmlmZXN0UGF0aClcbiAgICAgICkge1xuICAgICAgICBjaGFuZ2VzLnB1c2goYFx1MjdBMVx1RkUwRiBNb3ZlZDogJHtwcmV2UGF0aH0gXHUyMTkyICR7bWFuaWZlc3RQYXRofWApO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBjaGFuZ2VzLmxlbmd0aCA/IGNoYW5nZXMgOiBbJ1x1MjcwNSBFdmVyeXRoaW5nIGlzIGFscmVhZHkgdXAgdG8gZGF0ZSEnXTtcbiAgfVxuXG5cblxuICAvLyBcdTI1MDBcdTI1MDBcdTI1MDAgVkVSU0lPTi1DSEVDSyAvIFVQREFURSBGTE9XIFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFxuXG4gIGFzeW5jIGNoZWNrRm9yVXBkYXRlcygpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBjb25zdCBpc05ld2VyVmVyc2lvbiA9IChyZW1vdGU6IHN0cmluZywgbG9jYWw6IHN0cmluZyk6IGJvb2xlYW4gPT4ge1xuICAgICAgY29uc3QgcGEgPSByZW1vdGVcbiAgICAgICAgLnJlcGxhY2UoL152LywgJycpXG4gICAgICAgIC5zcGxpdCgnLicpXG4gICAgICAgIC5tYXAoKG4pID0+IHBhcnNlSW50KG4sIDEwKSB8fCAwKTtcbiAgICAgIGNvbnN0IHBiID0gbG9jYWxcbiAgICAgICAgLnJlcGxhY2UoL152LywgJycpXG4gICAgICAgIC5zcGxpdCgnLicpXG4gICAgICAgIC5tYXAoKG4pID0+IHBhcnNlSW50KG4sIDEwKSB8fCAwKTtcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgTWF0aC5tYXgocGEubGVuZ3RoLCBwYi5sZW5ndGgpOyBpKyspIHtcbiAgICAgICAgaWYgKChwYVtpXSB8fCAwKSA+IChwYltpXSB8fCAwKSkgcmV0dXJuIHRydWU7XG4gICAgICAgIGlmICgocGFbaV0gfHwgMCkgPCAocGJbaV0gfHwgMCkpIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9O1xuXG4gICAgY29uc3QgdG9vbGtpdFBhdGggPSAnLnZlcnNpb24uanNvbic7XG4gICAgY29uc3QgdG9vbGtpdFVybCA9XG4gICAgICAnaHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tL3NsYW13aXNlMDAwMS92dnVuZGVybG9yZS10b29sa2l0LWZ1bGwvbWFpbi8udmVyc2lvbi5qc29uJztcbiAgICBjb25zdCBwbHVnaW5VcmwgPVxuICAgICAgJ2h0dHBzOi8vcmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbS9zbGFtd2lzZTAwMDEvdnZ1bmRlcmxvcmUtdG9vbGtpdC1wbHVnaW4vbWFpbi92ZXJzaW9uLmpzb24nO1xuICAgIGNvbnN0IGNoYW5nZWxvZ1VybCA9XG4gICAgICAnaHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tL3NsYW13aXNlMDAwMS9WVnVuZGVybG9yZS1Ub29sa2l0LUZ1bGwvbWFpbi9SRUFETUUubWQnO1xuXG4gICAgLy8gMSkgUmVhZCBsb2NhbCB0b29sa2l0IHZlcnNpb25cbiAgICBsZXQgbG9jYWxUSyA9ICcwLjAuMCc7XG4gICAgaWYgKHRoaXMuc2V0dGluZ3MuaXNGaXJzdFJ1biAhPT0gXCJ5ZXNcIikge1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgY29udGVudCA9IGF3YWl0IHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXIucmVhZCh0b29sa2l0UGF0aCk7XG4gICAgICAgIGNvbnN0IGpzb24gPSBKU09OLnBhcnNlKGNvbnRlbnQpO1xuICAgICAgICBsb2NhbFRLID0ganNvbi52ZXJzaW9uIHx8IGxvY2FsVEs7XG4gICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignXHUyNzRDIEZhaWxlZCB0byByZWFkIGxvY2FsIHRvb2xraXQgdmVyc2lvbjonLCBlcnIpO1xuICAgICAgfVxuICAgIH1cbiAgICAvLyAyKSBGZXRjaCByZW1vdGUgdG9vbGtpdCB2ZXJzaW9uICYgZGVmYXVsdHNcbiAgICBsZXQgcmVtb3RlVEsgPSAnMC4wLjAnO1xuICAgIHRyeSB7XG4gICAgICBjb25zdCByZXMgPSBhd2FpdCBmZXRjaCh0b29sa2l0VXJsKTtcbiAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXMuanNvbigpO1xuICAgICAgcmVtb3RlVEsgPSBkYXRhLnZlcnNpb24gfHwgcmVtb3RlVEs7XG5cbiAgICAgIHRoaXMuc2V0dGluZ3MubGF0ZXN0VG9vbGtpdFZlcnNpb24gPSByZW1vdGVUSztcbiAgICAgIGlmIChkYXRhLmRlZmF1bHRQYXRocykge1xuICAgICAgICB0aGlzLnNldHRpbmdzLmxhdGVzdERlZmF1bHRzID0gZGF0YS5kZWZhdWx0UGF0aHM7XG4gICAgICB9XG4gICAgICB0aGlzLnNldHRpbmdzLmxhc3RDaGVja2VkID0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpO1xuICAgICAgYXdhaXQgdGhpcy5zYXZlU2V0dGluZ3MoKTtcbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ1x1Mjc0QyBGYWlsZWQgdG8gZmV0Y2ggcmVtb3RlIHRvb2xraXQgdmVyc2lvbjonLCBlcnIpO1xuICAgIH1cblxuICAgIGlmIChpc05ld2VyVmVyc2lvbihyZW1vdGVUSywgbG9jYWxUSykpIHtcbiAgICAgIG5ldyBOb3RpY2UoYFx1MjZBMFx1RkUwRiBUb29sa2l0IHVwZGF0ZSBhdmFpbGFibGUhIExhdGVzdDogdiR7cmVtb3RlVEt9YCk7XG4gICAgICBhd2FpdCB0aGlzLmZldGNoUmVtb3RlQmFzZWxpbmUoKTtcbiAgICB9XG5cbiAgICAvLyA0KSBSZWFkIGxvY2FsIHBsdWdpbiB2ZXJzaW9uXG4gICAgY29uc3QgbG9jYWxQTCA9IHRoaXMubWFuaWZlc3QudmVyc2lvbjtcblxuICAgIC8vIDUpIEZldGNoIHJlbW90ZSBwbHVnaW4gdmVyc2lvbiAmIGNvbXBhcmVcbiAgICBsZXQgcmVtb3RlUEwgPSBsb2NhbFBMO1xuICAgIHRyeSB7XG4gICAgICBjb25zdCByZXMgPSBhd2FpdCBmZXRjaChwbHVnaW5VcmwpO1xuICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlcy5qc29uKCk7XG4gICAgICByZW1vdGVQTCA9IGRhdGEudmVyc2lvbiB8fCByZW1vdGVQTDtcbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICB9XG5cbiAgICBpZiAoaXNOZXdlclZlcnNpb24ocmVtb3RlUEwsIGxvY2FsUEwpKSB7XG4gICAgICBuZXcgTm90aWNlKGBcdTI2OTlcdUZFMEYgUGx1Z2luIHVwZGF0ZSBhdmFpbGFibGUhIExhdGVzdDogdiR7cmVtb3RlUEx9YCk7XG4gICAgfVxuXG4gICAgLy8gNikgRmV0Y2ggY2hhbmdlbG9nIGZvciBVSSBkaXNwbGF5XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGNoYW5nZWxvZ1JlcyA9IGF3YWl0IGZldGNoKGNoYW5nZWxvZ1VybCk7XG4gICAgICB0aGlzLmNoYW5nZWxvZyA9IGF3YWl0IGNoYW5nZWxvZ1Jlcy50ZXh0KCk7XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdcdTI3NEMgRmFpbGVkIHRvIGZldGNoIGNoYW5nZWxvZzonLCBlcnIpO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIGxvYWRTZXR0aW5ncygpIHtcbiAgICAvLyAxKSBncmFiIHdoYXRldmVyXHUyMDE5cyBvbiBkaXNrIChtaWdodCBiZSBudWxsKVxuICAgIGNvbnN0IHJhdyA9IChhd2FpdCB0aGlzLmxvYWREYXRhKCkpIGFzIFBhcnRpYWw8VG9vbGtpdFNldHRpbmdzPiB8IG51bGw7XG4gICAgY29uc3QgY2xlYW5lZCA9IHJhdyA/PyB7fTtcblxuICAgIC8vIDIpIGRyb3AgdGhlIG9sZCBuZWVkc0luc3RhbGwgZmxhZ1xuICAgIGlmICgoY2xlYW5lZCBhcyBhbnkpLm5lZWRzSW5zdGFsbCAhPSBudWxsKSB7XG4gICAgICBkZWxldGUgKGNsZWFuZWQgYXMgYW55KS5uZWVkc0luc3RhbGw7XG4gICAgfVxuXG4gICAgLy8gMykgbWVyZ2UgZGVmYXVsdHMgKyBjbGVhbmVkIGRhdGFcbiAgICB0aGlzLnNldHRpbmdzID0gT2JqZWN0LmFzc2lnbih7fSwgREVGQVVMVF9TRVRUSU5HUywgY2xlYW5lZCk7XG4gICAgaWYgKHR5cGVvZiAoY2xlYW5lZCBhcyBhbnkpLnByZWZlck5hbWVXaGVuQm90aCA9PT0gXCJib29sZWFuXCIpIHtcbiAgICAgIHRoaXMuc2V0dGluZ3Muc2Vzc2lvblRpdGxlUHJlZmVyZW5jZSA9XG4gICAgICAgIChjbGVhbmVkIGFzIGFueSkucHJlZmVyTmFtZVdoZW5Cb3RoID8gXCJuYW1lXCIgOiBcImRhdGVcIjtcbiAgICAgIGRlbGV0ZSAodGhpcy5zZXR0aW5ncyBhcyBhbnkpLnByZWZlck5hbWVXaGVuQm90aDtcbiAgICB9O1xuXG4gICAgLy8gNCkgZmlndXJlIG91dCB3aGV0aGVyIHdlXHUyMDE5cmUgZmlyc3QtcnVuXG4gICAgdGhpcy5pc0ZpcnN0UnVuID0gIShhd2FpdCB0aGlzLmFwcC52YXVsdC5hZGFwdGVyLmV4aXN0cygnLnZ2dW5kZXJsb3JlX2luc3RhbGxlZCcpKTtcblxuICAgIC8vIDUpIHNldCB1cCBjYWNoZU1hbmFnZXIgc28gc2F2ZVNldHRpbmdzKCkgY2FuIHNhZmVseSB1c2UgLmdldENhY2hlKClcbiAgICB0aGlzLmZpbGVDYWNoZU1hbmFnZXIgPSBuZXcgVG9vbGtpdEZpbGVDYWNoZU1hbmFnZXIoXG4gICAgICB0aGlzLmFwcC52YXVsdCxcbiAgICAgIGNsZWFuZWQuZmlsZUNhY2hlID8/IHt9LFxuICAgICAgYXN5bmMgKCkgPT4gYXdhaXQgdGhpcy5zYXZlU2V0dGluZ3MoKVxuICAgICk7XG5cbiAgICAvLyA2KSBub3cgcGVyc2lzdCB0aGUgXHUyMDFDY2xlYW5lZFx1MjAxRCBzZXR0aW5ncyBiYWNrIHRvIGRpc2sgZXhhY3RseSBvbmNlXG4gICAgYXdhaXQgdGhpcy5zYXZlU2V0dGluZ3MoKTtcblxuICAgIC8vIDcpIGJhY2stZmlsbCBhbnkgYnJhbmQtbmV3IGZpZWxkc1xuICAgIGlmICh0eXBlb2YgdGhpcy5zZXR0aW5ncy5ydWxlc2V0Q29tcGVuZGl1bSAhPT0gJ3N0cmluZycpIHtcbiAgICAgIHRoaXMuc2V0dGluZ3MucnVsZXNldENvbXBlbmRpdW0gPSAnJztcbiAgICB9XG4gICAgaWYgKCFBcnJheS5pc0FycmF5KHRoaXMuc2V0dGluZ3MucnVsZXNldFJlZmVyZW5jZSkpIHtcbiAgICAgIHRoaXMuc2V0dGluZ3MucnVsZXNldFJlZmVyZW5jZSA9IFtdO1xuICAgIH1cbiAgfVxuXG5cblxuICBhc3luYyBzYXZlU2V0dGluZ3MoKSB7XG4gICAgYXdhaXQgdGhpcy5zYXZlRGF0YSh7XG4gICAgICAuLi50aGlzLnNldHRpbmdzLFxuICAgICAgZmlsZUNhY2hlOiB0aGlzLmZpbGVDYWNoZU1hbmFnZXIuZ2V0Q2FjaGUoKSxcbiAgICB9KTtcbiAgfVxuXG4gIGFzeW5jIGdldExvY2FsVG9vbGtpdFZlcnNpb24oKTogUHJvbWlzZTxzdHJpbmcgfCBudWxsPiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGNvbnRlbnQgPSBhd2FpdCB0aGlzLmFwcC52YXVsdC5hZGFwdGVyLnJlYWQoJy52ZXJzaW9uLmpzb24nKTtcbiAgICAgIGNvbnN0IGpzb24gPSBKU09OLnBhcnNlKGNvbnRlbnQpO1xuICAgICAgcmV0dXJuIGpzb24udmVyc2lvbiB8fCBudWxsO1xuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgY29uc29sZS5lcnJvcignXHUyNzRDIEZhaWxlZCB0byByZWFkIC52ZXJzaW9uLmpzb246JywgZXJyKTtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIHVwZGF0ZUZ1bGxUb29sa2l0UmVwbygpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBjb25zdCBleGNsdWRlZCA9IFtcbiAgICAgIHRoaXMuYXBwLnZhdWx0LmNvbmZpZ0RpcixcbiAgICAgICcuZ2l0aWdub3JlJyxcbiAgICAgICcuZ2l0YXR0cmlidXRlcycsXG4gICAgICAnLkRTX1N0b3JlJyxcbiAgICAgICdwbHVnaW5zJyxcbiAgICAgICdDb21wZW5kaXVtJyxcbiAgICAgICdSRUFETUUubWQnLFxuICAgICAgJy52ZXJzaW9uLmpzb24nLFxuICAgICAgJy5naXRodWInXG4gICAgXTtcblxuICAgIGNvbnN0IGZldGNoUmVwb1Jvb3QgPSBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBhcGlVcmwgPVxuICAgICAgICAnaHR0cHM6Ly9hcGkuZ2l0aHViLmNvbS9yZXBvcy9zbGFtd2lzZTAwMDEvVlZ1bmRlcmxvcmUtVG9vbGtpdC1GdWxsL2NvbnRlbnRzLyc7XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKGFwaVVybCk7XG4gICAgICBpZiAoIXJlc3BvbnNlLm9rKSB0aHJvdyBuZXcgRXJyb3IoYEZhaWxlZCB0byBmZXRjaCByZXBvIHJvb3RgKTtcbiAgICAgIHJldHVybiBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gICAgfTtcblxuICAgIHRyeSB7XG4gICAgICBjb25zdCBjb250ZW50cyA9IGF3YWl0IGZldGNoUmVwb1Jvb3QoKTtcbiAgICAgIC8vIGZpbHRlciBvdXQgZXhjbHVkZWQgdG9wLWxldmVsIGl0ZW1zXG4gICAgICBjb25zdCBmaWx0ZXJlZCA9IGNvbnRlbnRzLmZpbHRlcihcbiAgICAgICAgKGl0ZW06IGFueSkgPT5cbiAgICAgICAgICAhZXhjbHVkZWQuc29tZShcbiAgICAgICAgICAgIChleCkgPT5cbiAgICAgICAgICAgICAgaXRlbS5wYXRoID09PSBleCB8fFxuICAgICAgICAgICAgICBpdGVtLnBhdGguc3RhcnRzV2l0aChgJHtleH0vYClcbiAgICAgICAgICApXG4gICAgICApO1xuXG4gICAgICAvLyBTb3J0IHNvIFx1MjAxQ3RyZWVcdTIwMUQgKGZvbGRlcnMpIGNvbWUgYmVmb3JlIFx1MjAxQ2Jsb2JcdTIwMUQgKGZpbGVzKVxuICAgICAgZmlsdGVyZWQuc29ydCgoYTogYW55LCBiOiBhbnkpID0+IChhLnR5cGUgPT09IGIudHlwZSA/IDAgOiBhLnR5cGUgPT09ICd0cmVlJyA/IC0xIDogMSkpO1xuXG4gICAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgZmlsdGVyZWQpIHtcbiAgICAgICAgaWYgKGl0ZW0udHlwZSA9PT0gJ2RpcicpIHtcbiAgICAgICAgICBhd2FpdCB0aGlzLnVwZGF0ZUZvbGRlckZyb21HaXRIdWIoaXRlbS5wYXRoLCBpdGVtLnBhdGgpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpdGVtLnR5cGUgPT09ICdmaWxlJykge1xuICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goaXRlbS5kb3dubG9hZF91cmwpO1xuICAgICAgICAgIGNvbnN0IGNvbnRlbnQgPSBhd2FpdCByZXNwb25zZS50ZXh0KCk7XG4gICAgICAgICAgY29uc3QgZmlsZVBhdGggPSBpdGVtLnBhdGg7XG4gICAgICAgICAgY29uc3QgZXhpc3RzID0gYXdhaXQgdGhpcy5hcHAudmF1bHQuYWRhcHRlci5leGlzdHMoZmlsZVBhdGgpO1xuICAgICAgICAgIGlmICghZXhpc3RzKSB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLmFwcC52YXVsdC5jcmVhdGUoZmlsZVBhdGgsIGNvbnRlbnQpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb25zdCBjdXJyZW50ID0gYXdhaXQgdGhpcy5hcHAudmF1bHQuYWRhcHRlci5yZWFkKGZpbGVQYXRoKTtcbiAgICAgICAgICAgIGlmIChjdXJyZW50ICE9PSBjb250ZW50KSB7XG4gICAgICAgICAgICAgIGF3YWl0IHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXIud3JpdGUoZmlsZVBhdGgsIGNvbnRlbnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBhd2FpdCB0aGlzLmZpbGVDYWNoZU1hbmFnZXIudXBkYXRlQ2FjaGUoZmlsZVBhdGgsIGNvbnRlbnQsIGl0ZW0ucGF0aCwgZmFsc2UpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGF3YWl0IHRoaXMuc2F2ZVNldHRpbmdzKCk7XG5cbiAgICAgIGNvbnN0IG1hcmtlclBhdGggPSAnLnZ2dW5kZXJsb3JlX2luc3RhbGxlZCc7XG4gICAgICBpZiAoIShhd2FpdCB0aGlzLmFwcC52YXVsdC5hZGFwdGVyLmV4aXN0cyhtYXJrZXJQYXRoKSkpIHtcbiAgICAgICAgYXdhaXQgdGhpcy5hcHAudmF1bHQuY3JlYXRlKG1hcmtlclBhdGgsICcnKTtcbiAgICAgIH1cblxuICAgICAgaWYgKHRoaXMuc2V0dGluZ3MuaGlnaGxpZ2h0RW5hYmxlZCkge1xuICAgICAgICB0aGlzLmVuYWJsZUhpZ2hsaWdodCgpO1xuICAgICAgfVxuXG4gICAgICBuZXcgTm90aWNlKCdcdTI3MDUgVlZ1bmRlcmxvcmUgVG9vbGtpdCBzdWNjZXNzZnVsbHkgaW5zdGFsbGVkIScpO1xuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgY29uc29sZS5lcnJvcignXHUyNzRDIHVwZGF0ZUZ1bGxUb29sa2l0UmVwbygpIGVycm9yOicsIGVycik7XG4gICAgICBuZXcgTm90aWNlKCdcdTI3NEMgRmFpbGVkIHRvIHVwZGF0ZSB0b29sa2l0LiBTZWUgY29uc29sZSBmb3IgZGV0YWlscy4nKTtcbiAgICB9XG4gIH1cblxuICBhc3luYyB1cGRhdGVTZWxlY3RlZFRvb2xraXRDb250ZW50KCkge1xuICAgIGlmICh0aGlzLnNldHRpbmdzLmF1dG9CYWNrdXBCZWZvcmVVcGRhdGUpIHtcbiAgICAgIGNvbnN0IGZvbGRlciA9IGF3YWl0IHRoaXMuYmFja3VwTWFuYWdlci5iYWNrdXBWYXVsdE1pcnJvcigncHJlLXVwZGF0ZScpO1xuICAgICAgbmV3IE5vdGljZShgVmF1bHQgbWlycm9yIGJhY2t1cCBjcmVhdGVkIGF0OiAke2ZvbGRlcn1gKTtcbiAgICB9XG5cbiAgICBpZiAoIXRoaXMuc2V0dGluZ3MubGF0ZXN0RGVmYXVsdHMpIHtcbiAgICAgIG5ldyBOb3RpY2UoJ1x1Mjc0QyBHaXRIdWIgZGVmYXVsdHMgbm90IGxvYWRlZCB5ZXQuJyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgYWxsTWFuaWZlc3RGaWxlcyA9IHRoaXMubWFuaWZlc3RDYWNoZS5maWxlcy5tYXAoKGYpID0+IGYucGF0aCk7XG4gICAgY29uc3QgZmlsZU92ZXJyaWRlcyA9IE9iamVjdC5mcm9tRW50cmllcyhcbiAgICAgIHRoaXMuc2V0dGluZ3MuY3VzdG9tUGF0aHMubWFwKChjKSA9PiBbYy5tYW5pZmVzdEtleSwgY10pXG4gICAgKTtcblxuICAgIHRyeSB7XG4gICAgICBmb3IgKGNvbnN0IGdoUGF0aCBvZiBhbGxNYW5pZmVzdEZpbGVzKSB7XG4gICAgICAgIGNvbnN0IG92ZXJyaWRlID0gZmlsZU92ZXJyaWRlc1tnaFBhdGhdO1xuICAgICAgICBpZiAob3ZlcnJpZGU/LmRvVXBkYXRlID09PSBmYWxzZSkge1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgdmF1bHRQYXRoID0gdGhpcy5zZXR0aW5ncy5jdXN0b21pemVVcGRhdGVzXG4gICAgICAgICAgPyB0aGlzLnJlc29sdmVWYXVsdFBhdGgoZ2hQYXRoKVxuICAgICAgICAgIDogZ2hQYXRoO1xuXG4gICAgICAgIGNvbnN0IGVudHJ5ID0gdGhpcy5tYW5pZmVzdENhY2hlLmZpbGVzLmZpbmQoKGYpID0+IGYucGF0aCA9PT0gZ2hQYXRoKTtcbiAgICAgICAgaWYgKCFlbnRyeSkgY29udGludWU7XG4gICAgICAgIGF3YWl0IHRoaXMudXBkYXRlRW50cnlGcm9tTWFuaWZlc3QoZW50cnksIGZhbHNlKTtcbiAgICAgIH1cblxuICAgICAgZm9yIChjb25zdCBmb2xkZXIgb2YgdGhpcy5tYW5pZmVzdENhY2hlLmZvbGRlcnMpIHtcbiAgICAgICAgaWYgKCEoYXdhaXQgdGhpcy5hcHAudmF1bHQuYWRhcHRlci5leGlzdHMoZm9sZGVyLnBhdGgpKSkge1xuICAgICAgICAgIGF3YWl0IHRoaXMuYXBwLnZhdWx0LmNyZWF0ZUZvbGRlcihmb2xkZXIucGF0aCk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgYXdhaXQgdGhpcy51cGRhdGVWZXJzaW9uRmlsZSgpO1xuICAgICAgdGhpcy5zZXR0aW5ncy5pbnN0YWxsZWRWZXJzaW9uID0gdGhpcy5zZXR0aW5ncy5sYXRlc3RUb29sa2l0VmVyc2lvbiE7XG4gICAgICBhd2FpdCB0aGlzLnNhdmVTZXR0aW5ncygpO1xuICAgICAgbmV3IE5vdGljZSgnXHUyNzA1IFRvb2xraXQgY29udGVudCB1cGRhdGVkLicpO1xuXG4gICAgICBpZiAodGhpcy5zZXR0aW5nc1RhYikge1xuICAgICAgICBhd2FpdCB0aGlzLnNldHRpbmdzVGFiLnVwZGF0ZVZlcnNpb25EaXNwbGF5KCk7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdcdTI3NEMgQ1VzdG9tIHVwZGF0ZSBmYWlsZWQuIFZlcnNpb24gbm90IHVwZGF0ZWQuJywgZXJyKTtcbiAgICAgIG5ldyBOb3RpY2UoJ1x1Mjc0QyBVcGRhdGUgZmFpbGVkLiBTZWUgY29uc29sZSBmb3IgZGV0YWlscy4nKTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5zZXR0aW5ncy5oaWdobGlnaHRFbmFibGVkKSB7XG4gICAgICB0aGlzLmVuYWJsZUhpZ2hsaWdodCgpO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIHVwZGF0ZUZvbGRlckZyb21HaXRIdWIoZ2l0aHViRm9sZGVyUGF0aDogc3RyaW5nLCB2YXVsdEZvbGRlclBhdGg6IHN0cmluZykge1xuICAgIGNvbnN0IGV4Y2x1ZGVkID0gW1xuICAgICAgdGhpcy5hcHAudmF1bHQuY29uZmlnRGlyLFxuICAgICAgJy5naXRpZ25vcmUnLFxuICAgICAgJy5naXRhdHRyaWJ1dGVzJyxcbiAgICAgICcuRFNfU3RvcmUnLFxuICAgICAgJ3BsdWdpbnMnLFxuICAgICAgJ0NvbXBlbmRpdW0nLFxuICAgICAgJ1JFQURNRS5tZCcsXG4gICAgICAnLnZlcnNpb24uanNvbicsXG4gICAgICAnLmdpdGh1YidcbiAgICBdO1xuICAgIGlmIChleGNsdWRlZC5zb21lKChleCkgPT4gZ2l0aHViRm9sZGVyUGF0aCA9PT0gZXggfHwgZ2l0aHViRm9sZGVyUGF0aC5zdGFydHNXaXRoKGAke2V4fS9gKSkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3QgYXBpVXJsID0gYGh0dHBzOi8vYXBpLmdpdGh1Yi5jb20vcmVwb3Mvc2xhbXdpc2UwMDAxL1ZWdW5kZXJsb3JlLVRvb2xraXQtRnVsbC9jb250ZW50cy8ke2dpdGh1YkZvbGRlclBhdGh9YDtcbiAgICB0cnkge1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChhcGlVcmwpO1xuICAgICAgaWYgKCFyZXNwb25zZS5vaykgdGhyb3cgbmV3IEVycm9yKGBGYWlsZWQgdG8gZmV0Y2ggZm9sZGVyOiAke2dpdGh1YkZvbGRlclBhdGh9YCk7XG4gICAgICBjb25zdCBmaWxlcyA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgICAgIGlmICghKGF3YWl0IHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXIuZXhpc3RzKHZhdWx0Rm9sZGVyUGF0aCkpKSB7XG4gICAgICAgIGF3YWl0IHRoaXMuYXBwLnZhdWx0LmNyZWF0ZUZvbGRlcih2YXVsdEZvbGRlclBhdGgpO1xuICAgICAgfVxuICAgICAgZm9yIChjb25zdCBmaWxlIG9mIGZpbGVzKSB7XG4gICAgICAgIGlmIChleGNsdWRlZC5zb21lKChleCkgPT4gZmlsZS5wYXRoID09PSBleCB8fCBmaWxlLnBhdGguc3RhcnRzV2l0aChgJHtleH0vYCkpKSB7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgZmlsZVBhdGggPSBgJHt2YXVsdEZvbGRlclBhdGh9LyR7ZmlsZS5uYW1lfWA7XG4gICAgICAgIGlmIChmaWxlLnR5cGUgPT09ICdmaWxlJykge1xuICAgICAgICAgIGNvbnN0IGZpbGVSZXNwb25zZSA9IGF3YWl0IGZldGNoKGZpbGUuZG93bmxvYWRfdXJsKTtcbiAgICAgICAgICBjb25zdCBjb250ZW50ID0gYXdhaXQgZmlsZVJlc3BvbnNlLnRleHQoKTtcbiAgICAgICAgICBjb25zdCBleGlzdHMgPSBhd2FpdCB0aGlzLmFwcC52YXVsdC5hZGFwdGVyLmV4aXN0cyhmaWxlUGF0aCk7XG4gICAgICAgICAgaWYgKGV4aXN0cykge1xuICAgICAgICAgICAgY29uc3QgY3VycmVudCA9IGF3YWl0IHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXIucmVhZChmaWxlUGF0aCk7XG4gICAgICAgICAgICBpZiAoY3VycmVudCAhPT0gY29udGVudCkge1xuICAgICAgICAgICAgICBhd2FpdCB0aGlzLmJhY2t1cEZpbGUoZmlsZVBhdGgsIGN1cnJlbnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoIWV4aXN0cykge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5hcHAudmF1bHQuY3JlYXRlKGZpbGVQYXRoLCBjb250ZW50KTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaWYgKChhd2FpdCB0aGlzLmFwcC52YXVsdC5hZGFwdGVyLnJlYWQoZmlsZVBhdGgpKSAhPT0gY29udGVudCkge1xuICAgICAgICAgICAgICBhd2FpdCB0aGlzLmFwcC52YXVsdC5hZGFwdGVyLndyaXRlKGZpbGVQYXRoLCBjb250ZW50KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgYXdhaXQgdGhpcy5maWxlQ2FjaGVNYW5hZ2VyLnVwZGF0ZUNhY2hlKGZpbGVQYXRoLCBjb250ZW50LCBmaWxlLnBhdGgsIGZhbHNlKTtcbiAgICAgICAgfSBlbHNlIGlmIChmaWxlLnR5cGUgPT09ICdkaXInKSB7XG4gICAgICAgICAgYXdhaXQgdGhpcy51cGRhdGVGb2xkZXJGcm9tR2l0SHViKGZpbGUucGF0aCwgYCR7dmF1bHRGb2xkZXJQYXRofS8ke2ZpbGUubmFtZX1gKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgYXdhaXQgdGhpcy5zYXZlU2V0dGluZ3MoKTtcbiAgICAgIG5ldyBOb3RpY2UoYFx1MjcwNSBGb2xkZXIgc3luY2VkOiAke3ZhdWx0Rm9sZGVyUGF0aH1gKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcihgXHUyNzRDIEZhaWxlZCB0byBzeW5jIGZvbGRlciB3aXRoIG0tcmVwbzogJHt2YXVsdEZvbGRlclBhdGh9YCwgZXJyb3IpO1xuICAgICAgbmV3IE5vdGljZShgXHUyNzRDIEZhaWxlZCB0byB1cGRhdGUgZm9sZGVyOiAke3ZhdWx0Rm9sZGVyUGF0aH1gKTtcbiAgICB9XG4gIH1cblxuICBhc3luYyByZWJ1aWxkRmlsZUNhY2hlKCkge1xuICAgIGNvbnN0IGNhY2hlID0gdGhpcy5maWxlQ2FjaGVNYW5hZ2VyO1xuICAgIGNvbnN0IHRhc2tzOiBQcm9taXNlPHZvaWQ+W10gPSBbXTtcblxuICAgIC8vIDEpIEluZGV4IGV4YWN0bHkgdGhlIGZpbGVzIGxpc3RlZCBpbiB0aGUgbWFuaWZlc3RcbiAgICBmb3IgKGNvbnN0IGVudHJ5IG9mIHRoaXMubWFuaWZlc3RDYWNoZS5maWxlcykge1xuICAgICAgY29uc3QgdmF1bHRQYXRoID0gdGhpcy5yZXNvbHZlVmF1bHRQYXRoKGVudHJ5LnBhdGgpO1xuICAgICAgaWYgKGF3YWl0IHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXIuZXhpc3RzKHZhdWx0UGF0aCkpIHtcbiAgICAgICAgdGFza3MucHVzaCgoYXN5bmMgKCkgPT4ge1xuICAgICAgICAgIGNvbnN0IGNvbnRlbnQgPSBhd2FpdCB0aGlzLmFwcC52YXVsdC5hZGFwdGVyLnJlYWQodmF1bHRQYXRoKTtcbiAgICAgICAgICBhd2FpdCBjYWNoZS51cGRhdGVDYWNoZSh2YXVsdFBhdGgsIGNvbnRlbnQsIGVudHJ5LnBhdGgsIGZhbHNlKTtcbiAgICAgICAgfSkoKSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gMikgSW5kZXggYW55IG1hcmtkb3duIGNoaWxkcmVuIHVuZGVyIG1hbmlmZXN0IGZvbGRlcnNcbiAgICBmb3IgKGNvbnN0IGZvbGRlckVudHJ5IG9mIHRoaXMubWFuaWZlc3RDYWNoZS5mb2xkZXJzKSB7XG4gICAgICBjb25zdCBmb2xkZXJQYXRoID0gZm9sZGVyRW50cnkucGF0aDtcbiAgICAgIGNvbnN0IGZvbGRlciA9IHRoaXMuYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChmb2xkZXJQYXRoKTtcbiAgICAgIGlmIChmb2xkZXIgaW5zdGFuY2VvZiBURm9sZGVyKSB7XG4gICAgICAgIFZhdWx0LnJlY3Vyc2VDaGlsZHJlbihmb2xkZXIsIChmaWxlKSA9PiB7XG4gICAgICAgICAgaWYgKGZpbGUgaW5zdGFuY2VvZiBURmlsZSAmJiBmaWxlLmV4dGVuc2lvbiA9PT0gJ21kJykge1xuICAgICAgICAgICAgY29uc3QgZmlsZVBhdGggPSBmaWxlLnBhdGg7XG4gICAgICAgICAgICB0YXNrcy5wdXNoKChhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgIGNvbnN0IGNvbnRlbnQgPSBhd2FpdCB0aGlzLmFwcC52YXVsdC5hZGFwdGVyLnJlYWQoZmlsZVBhdGgpO1xuICAgICAgICAgICAgICBhd2FpdCBjYWNoZS51cGRhdGVDYWNoZShmaWxlUGF0aCwgY29udGVudCwgZmlsZVBhdGgsIGZhbHNlKTtcbiAgICAgICAgICAgIH0pKCkpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgY29uc3QgYmF0Y2hTaXplID0gMTA7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0YXNrcy5sZW5ndGg7IGkgKz0gYmF0Y2hTaXplKSB7XG4gICAgICBhd2FpdCBQcm9taXNlLmFsbCh0YXNrcy5zbGljZShpLCBpICsgYmF0Y2hTaXplKSk7XG4gICAgfVxuXG4gICAgYXdhaXQgdGhpcy5zYXZlU2V0dGluZ3MoKTtcbiAgfVxuXG4gIGFzeW5jIHNob3dJbmRleGluZ01vZGFsKCkge1xuICAgIGNvbnN0IG1vZGFsID0gbmV3IChjbGFzcyBleHRlbmRzIE1vZGFsIHtcbiAgICAgIGNvbnN0cnVjdG9yKGFwcDogQXBwKSB7XG4gICAgICAgIHN1cGVyKGFwcCk7XG4gICAgICB9XG4gICAgICBvbk9wZW4oKSB7XG4gICAgICAgIHRoaXMuY29udGVudEVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IGUuc3RvcFByb3BhZ2F0aW9uKCkpO1xuICAgICAgICB0aGlzLnRpdGxlRWwuc2V0VGV4dCgnXHVEODNEXHVERDA0IEluZGV4aW5nIFRvb2xraXQgRmlsZXMuLi4nKTtcbiAgICAgICAgdGhpcy5jb250ZW50RWwuY3JlYXRlRWwoJ3AnLCB7XG4gICAgICAgICAgdGV4dDogJ0luZGV4aW5nIGFuZCBjYWNoaW5nIHlvdXIgVlZ1bmRlcmxvcmUgVmF1bHQgZm9yIGZhc3RlciB1cGRhdGVzIGFuZCBzYWZlciBzeW5jaW5nLidcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSkodGhpcy5hcHApO1xuXG4gICAgbW9kYWwub3BlbigpO1xuICAgIGF3YWl0IHRoaXMucmVidWlsZEZpbGVDYWNoZSgpO1xuICAgIG1vZGFsLmNsb3NlKCk7XG4gICAgbmV3IE5vdGljZSgnXHUyNzA1IFZWdW5kZXJsb3JlIGNhY2hpbmcgY29tcGxldGUuJyk7XG4gIH1cblxuICBhc3luYyB1cGRhdGVWZXJzaW9uRmlsZSgpIHtcbiAgICBpZiAoIXRoaXMuc2V0dGluZ3MubGF0ZXN0VG9vbGtpdFZlcnNpb24pIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3QgdmVyc2lvblBhdGggPSAnLnZlcnNpb24uanNvbic7XG4gICAgY29uc3QgY29udGVudCA9IEpTT04uc3RyaW5naWZ5KHsgdmVyc2lvbjogdGhpcy5zZXR0aW5ncy5sYXRlc3RUb29sa2l0VmVyc2lvbiB9LCBudWxsLCAyKTtcbiAgICBjb25zdCBleGlzdHMgPSBhd2FpdCB0aGlzLmFwcC52YXVsdC5hZGFwdGVyLmV4aXN0cyh2ZXJzaW9uUGF0aCk7XG4gICAgaWYgKGV4aXN0cykge1xuICAgICAgYXdhaXQgdGhpcy5hcHAudmF1bHQuYWRhcHRlci53cml0ZSh2ZXJzaW9uUGF0aCwgY29udGVudCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGF3YWl0IHRoaXMuYXBwLnZhdWx0LmNyZWF0ZSh2ZXJzaW9uUGF0aCwgY29udGVudCk7XG4gICAgfVxuICB9XG5cbiAgLyoqIG1haW4udHMgKiovXG5cbiAgLyoqIFxuICAgKiBJbnN0YWxsIHRoZSBzZWxlY3RlZCBjb21wZW5kaXVtIGFuZCB6ZXJvIG9yIG1vcmUgcmVmZXJlbmNlIGVkaXRpb25zLlxuICAgKi9cbiAgcHVibGljIGFzeW5jIGluc3RhbGxGdWxsVG9vbGtpdChcbiAgICBvcHRzOiB7IGNvbXBlbmRpdW06IHN0cmluZzsgcmVmZXJlbmNlczogc3RyaW5nW10gfSA9IHsgY29tcGVuZGl1bTogXCJcIiwgcmVmZXJlbmNlczogW10gfVxuICApOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBjb25zdCB7IGNvbXBlbmRpdW0sIHJlZmVyZW5jZXMgfSA9IG9wdHM7XG4gICAgaWYgKCFjb21wZW5kaXVtKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJObyBjb21wZW5kaXVtIGVkaXRpb24gc2VsZWN0ZWRcIik7XG4gICAgfVxuXG5cbiAgICBsZXQgaW5zdGFsbFN1Y2NlZWRlZCA9IGZhbHNlO1xuICAgIHRyeSB7XG4gICAgICAvLyAyKSBTdGF0aWMgY29weSBvZiBldmVyeXRoaW5nIGluIHRoZSByZXBvIEVYQ0VQVCBhbnkgQ29tcGVuZGl1bS8qXG4gICAgICBjb25zdCB0cmVlQXBpID1cbiAgICAgICAgXCJodHRwczovL2FwaS5naXRodWIuY29tL3JlcG9zL3NsYW13aXNlMDAwMS9WVnVuZGVybG9yZS1Ub29sa2l0LUZ1bGwvZ2l0L3RyZWVzL21haW4/cmVjdXJzaXZlPTFcIjtcbiAgICAgIGNvbnN0IHJlc3AgPSBhd2FpdCBmZXRjaCh0cmVlQXBpKTtcbiAgICAgIGlmICghcmVzcC5vaykge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEZhaWxlZCB0byBsaXN0IHJlcG8gdHJlZTogJHtyZXNwLnN0YXR1c1RleHR9YCk7XG4gICAgICB9XG4gICAgICBjb25zdCBqc29uOiBhbnkgPSBhd2FpdCByZXNwLmpzb24oKTtcbiAgICAgIGNvbnN0IGl0ZW1zID0gQXJyYXkuaXNBcnJheShqc29uLnRyZWUpID8ganNvbi50cmVlIDogW107XG5cbiAgICAgIC8vIFVzZSB5b3VyIGV4Y2x1ZGVkUGF0aHMgKHdoaWNoIGFscmVhZHkgY29udGFpbnMgXCJDb21wZW5kaXVtXCIpXG4gICAgICBjb25zdCBzdGF0aWNFbnRyaWVzID0gKGl0ZW1zIGFzIEFycmF5PHsgcGF0aDogc3RyaW5nOyB0eXBlOiBzdHJpbmcgfT4pXG4gICAgICAgIC5maWx0ZXIoKGl0ZW0pID0+XG4gICAgICAgICAgIXRoaXMuZXhjbHVkZWRQYXRocy5zb21lKGV4ID0+XG4gICAgICAgICAgICBpdGVtLnBhdGggPT09IGV4IHx8IGl0ZW0ucGF0aC5zdGFydHNXaXRoKGAke2V4fS9gKVxuICAgICAgICAgIClcbiAgICAgICAgKVxuICAgICAgICAuc29ydCgoYSwgYikgPT4gKGEudHlwZSA9PT0gYi50eXBlID8gMCA6IGEudHlwZSA9PT0gXCJ0cmVlXCIgPyAtMSA6IDEpKTtcblxuICAgICAgZm9yIChjb25zdCBlbnRyeSBvZiBzdGF0aWNFbnRyaWVzKSB7XG4gICAgICAgIGlmIChlbnRyeS50eXBlID09PSBcInRyZWVcIikge1xuICAgICAgICAgIGlmICghKGF3YWl0IHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXIuZXhpc3RzKGVudHJ5LnBhdGgpKSkge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5hcHAudmF1bHQuY3JlYXRlRm9sZGVyKGVudHJ5LnBhdGgpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjb25zdCByYXdVcmwgPVxuICAgICAgICAgICAgYGh0dHBzOi8vcmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbS9zbGFtd2lzZTAwMDEvVlZ1bmRlcmxvcmUtVG9vbGtpdC1GdWxsL21haW4vJHtlbmNvZGVVUklDb21wb25lbnQoZW50cnkucGF0aCl9YDtcbiAgICAgICAgICBjb25zdCBmaWxlUmVzcCA9IGF3YWl0IGZldGNoKHJhd1VybCk7XG4gICAgICAgICAgaWYgKCFmaWxlUmVzcC5vaykgY29udGludWU7XG4gICAgICAgICAgY29uc3QgdGV4dCA9IGF3YWl0IGZpbGVSZXNwLnRleHQoKTtcbiAgICAgICAgICBpZiAoYXdhaXQgdGhpcy5hcHAudmF1bHQuYWRhcHRlci5leGlzdHMoZW50cnkucGF0aCkpIHtcbiAgICAgICAgICAgIGNvbnN0IG9sZCA9IGF3YWl0IHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXIucmVhZChlbnRyeS5wYXRoKTtcbiAgICAgICAgICAgIGlmIChvbGQgIT09IHRleHQpIHtcbiAgICAgICAgICAgICAgYXdhaXQgdGhpcy5hcHAudmF1bHQuYWRhcHRlci53cml0ZShlbnRyeS5wYXRoLCB0ZXh0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5hcHAudmF1bHQuY3JlYXRlKGVudHJ5LnBhdGgsIHRleHQpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICB0aGlzLnNldHRpbmdzLnJ1bGVzZXRDb21wZW5kaXVtID0gY29tcGVuZGl1bTtcbiAgICAgIGNvbnN0IHBpY2tlZFJlZnMgPSByZWZlcmVuY2VzLmxlbmd0aCA+IDBcbiAgICAgICAgPyByZWZlcmVuY2VzXG4gICAgICAgIDogdGhpcy5zZXR0aW5ncy5ydWxlc2V0UmVmZXJlbmNlO1xuICAgICAgdGhpcy5zZXR0aW5ncy5ydWxlc2V0UmVmZXJlbmNlID0gcGlja2VkUmVmcztcblxuICAgICAgYXdhaXQgdGhpcy5zYXZlU2V0dGluZ3MoKTtcblxuICAgICAgLy8gbm93IHJ1biB0aGUgaW1wb3J0IGpvYnMgYWdhaW5zdCB0aGUgY29tcGVuZGl1bSArIHRoZSBhY3R1YWwgcmVmc1xuICAgICAgY29uc3Qgam9icyA9IFtcbiAgICAgICAgaW1wb3J0UnVsZXNldERhdGEoeyBhcHA6IHRoaXMuYXBwLCBlZGl0aW9uS2V5OiBjb21wZW5kaXVtLCB0YXJnZXRQYXRoOiBcIkNvbXBlbmRpdW1cIiB9KSxcbiAgICAgICAgLi4ucGlja2VkUmVmcy5tYXAocmVmS2V5ID0+IHtcbiAgICAgICAgICBjb25zdCBkaXNwbGF5TmFtZSA9IGdldFJ1bGVzZXREaXNwbGF5TmFtZShyZWZLZXkpO1xuICAgICAgICAgIHJldHVybiBpbXBvcnRSdWxlc2V0RGF0YSh7XG4gICAgICAgICAgICBhcHA6IHRoaXMuYXBwLFxuICAgICAgICAgICAgZWRpdGlvbktleTogcmVmS2V5LFxuICAgICAgICAgICAgdGFyZ2V0UGF0aDogYFJlc291cmNlcy9SdWxlc2V0cy8ke2Rpc3BsYXlOYW1lfWAsXG4gICAgICAgICAgfSlcbiAgICAgICAgfSlcbiAgICAgIF07XG4gICAgICBhd2FpdCBQcm9taXNlLmFsbChqb2JzKTtcblxuICAgICAgLy8gMykgS2ljayBvZmYgeW91ciBKU09OXHUyMTkyTUQgcGFyc2VycyBpbiBwYXJhbGxlbFxuICAgICAgY29uc3QgcGFyc2VKb2JzID0gW1xuICAgICAgICBpbXBvcnRSdWxlc2V0RGF0YSh7XG4gICAgICAgICAgYXBwOiB0aGlzLmFwcCxcbiAgICAgICAgICBlZGl0aW9uS2V5OiBjb21wZW5kaXVtLFxuICAgICAgICAgIHRhcmdldFBhdGg6IGBDb21wZW5kaXVtYCxcbiAgICAgICAgfSksXG4gICAgICAgIC4uLnJlZmVyZW5jZXMubWFwKHJlZktleSA9PiB7XG4gICAgICAgICAgY29uc3QgZGlzcGxheU5hbWUgPSBnZXRSdWxlc2V0RGlzcGxheU5hbWUocmVmS2V5KTtcbiAgICAgICAgICByZXR1cm4gaW1wb3J0UnVsZXNldERhdGEoe1xuICAgICAgICAgICAgYXBwOiB0aGlzLmFwcCxcbiAgICAgICAgICAgIGVkaXRpb25LZXk6IHJlZktleSxcbiAgICAgICAgICAgIHRhcmdldFBhdGg6IGBSZXNvdXJjZXMvUnVsZXNldHMvJHtkaXNwbGF5TmFtZX1gLFxuICAgICAgICAgIH0pXG4gICAgICAgIH0pLFxuICAgICAgXTtcbiAgICAgIC8vIHRoaXMgd29uXHUyMDE5dCByZXNvbHZlIHVudGlsIF9hbGxfIHBhcnNlcnMgaGF2ZSBmaW5pc2hlZCB3cml0aW5nIHRoZWlyIE1EIGZpbGVzXG4gICAgICBhd2FpdCBQcm9taXNlLmFsbChwYXJzZUpvYnMpO1xuXG4gICAgICAvLyA0KSBQb3N0LWluc3RhbGwgaG91c2VrZWVwaW5nXG4gICAgICBjb25zdCBtYXJrZXIgPSBcIi52dnVuZGVybG9yZV9pbnN0YWxsZWRcIjtcbiAgICAgIGlmICghKGF3YWl0IHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXIuZXhpc3RzKG1hcmtlcikpKSB7XG4gICAgICAgIGF3YWl0IHRoaXMuYXBwLnZhdWx0LmNyZWF0ZShtYXJrZXIsIFwiXCIpO1xuICAgICAgfVxuICAgICAgdGhpcy5zZXR0aW5ncy5oaWdobGlnaHRFbmFibGVkID0gdHJ1ZTtcbiAgICAgIGF3YWl0IHRoaXMuc2F2ZVNldHRpbmdzKCk7XG4gICAgICB0aGlzLmVuYWJsZUhpZ2hsaWdodCgpO1xuXG4gICAgICBpbnN0YWxsU3VjY2VlZGVkID0gdHJ1ZTtcbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJcdTI3NEMgaW5zdGFsbEZ1bGxUb29sa2l0KClcIiwgZXJyKTtcbiAgICB9IGZpbmFsbHkge1xuICAgICAgLy8gb25seSBub3cgY2xvc2UgdGhlIHNwaW5uZXIgJiByZWRyYXcgdGhlIFVJXG4gICAgICBpZiAodGhpcy5zZXR0aW5nc1RhYikgdGhpcy5zZXR0aW5nc1RhYi5kaXNwbGF5KCk7XG4gICAgICBuZXcgTm90aWNlKFxuICAgICAgICBpbnN0YWxsU3VjY2VlZGVkXG4gICAgICAgICAgPyBcIlx1MjcwNSBWVnVuZGVybG9yZSBUb29sa2l0IHN1Y2Nlc3NmdWxseSBpbnN0YWxsZWQhXCJcbiAgICAgICAgICA6IFwiXHUyNzRDIEZhaWxlZCB0byBpbnN0YWxsIHRvb2xraXQuIFNlZSBjb25zb2xlIGZvciBkZXRhaWxzLlwiXG4gICAgICApO1xuICAgIH1cbiAgfVxuXG4gIC8vICogUmUtcGFyc2UgYWxsIGdhbWVzZXQgZGF0YSAocnVsZXNldCBjb21wZW5kaXVtICsgcmVmZXJlbmNlIHNldHMpXG4gIGFzeW5jIHJlZnJlc2hHYW1lU2V0RGF0YSgpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBjb25zdCB7IHJ1bGVzZXRDb21wZW5kaXVtLCBydWxlc2V0UmVmZXJlbmNlIH0gPSB0aGlzLnNldHRpbmdzO1xuXG4gICAgaWYgKCFydWxlc2V0Q29tcGVuZGl1bSAmJiBydWxlc2V0UmVmZXJlbmNlLmxlbmd0aCA9PT0gMCkge1xuICAgICAgbmV3IE5vdGljZShcIlx1MjZBMFx1RkUwRiBObyBnYW1lc2V0IGtleXMgc2V0OyBub3RoaW5nIHRvIHJlZnJlc2guXCIpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IGpvYnM6IFByb21pc2U8dW5rbm93bj5bXSA9IFtdO1xuICAgIGlmIChydWxlc2V0Q29tcGVuZGl1bSkge1xuICAgICAgam9icy5wdXNoKGltcG9ydFJ1bGVzZXREYXRhKHtcbiAgICAgICAgYXBwOiB0aGlzLmFwcCxcbiAgICAgICAgZWRpdGlvbktleTogcnVsZXNldENvbXBlbmRpdW0sXG4gICAgICAgIHRhcmdldFBhdGg6IFwiQ29tcGVuZGl1bVwiLFxuICAgICAgfSkpO1xuICAgIH1cbiAgICBmb3IgKGNvbnN0IHJlZiBvZiBydWxlc2V0UmVmZXJlbmNlKSB7XG4gICAgICBjb25zdCBkaXNwbGF5TmFtZSA9IGdldFJ1bGVzZXREaXNwbGF5TmFtZShyZWYpO1xuICAgICAgam9icy5wdXNoKGltcG9ydFJ1bGVzZXREYXRhKHtcbiAgICAgICAgYXBwOiB0aGlzLmFwcCxcbiAgICAgICAgZWRpdGlvbktleTogcmVmLFxuICAgICAgICB0YXJnZXRQYXRoOiBgUmVzb3VyY2VzL1J1bGVzZXRzLyR7ZGlzcGxheU5hbWV9YCxcbiAgICAgIH0pKTtcbiAgICB9XG5cbiAgICBhd2FpdCBQcm9taXNlLmFsbChqb2JzKTtcbiAgICBuZXcgTm90aWNlKFwiXHUyNzA1IEdhbWUgU2V0IERhdGEgcmVmcmVzaGVkLlwiKTtcbiAgfVxuXG5cblxufVxuZXhwb3J0IHsgSW5zdGFsbGluZ01vZGFsIH07IiwgImltcG9ydCB7XG5cdFBsdWdpblNldHRpbmdUYWIsXG5cdFNldHRpbmcsXG5cdEFwcCxcblx0VEZpbGUsXG5cdFRGb2xkZXIsXG5cdEFic3RyYWN0SW5wdXRTdWdnZXN0LFxuXHRzZXRJY29uLFxuXHRNb2RhbCxcblx0TWFya2Rvd25SZW5kZXJlcixcblx0Q29tcG9uZW50LFxuXHROb3RpY2UsXG5cdFRleHRDb21wb25lbnQsXG5cdFRvZ2dsZUNvbXBvbmVudCxcblx0QnV0dG9uQ29tcG9uZW50LFxuXHREcm9wZG93bkNvbXBvbmVudCxcblx0U2VhcmNoQ29tcG9uZW50XG59IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCB0eXBlIFZWdW5kZXJsb3JlVG9vbGtpdFBsdWdpbiBmcm9tICcuL21haW4nO1xuaW1wb3J0IHsgQ29uZmlybUZyZXNoSW5zdGFsbE1vZGFsIH0gZnJvbSAnLi9maXJzdGluc3RhbGxjb25maXJtJztcbmltcG9ydCB7IHNob3dDdXN0b21JbnN0YWxsTW9kYWwgfSBmcm9tIFwiLi9jdXN0b21JbnN0YWxsTW9kYWxcIjtcbmltcG9ydCAqIGFzIHBhdGggZnJvbSAncGF0aCc7XG5pbXBvcnQgeyBBVkFJTEFCTEVfRURJVElPTlMsIEVkaXRpb24gfSBmcm9tICcuL2VkaXRpb25zJ1xuXG5cbi8vIERlZmluZSB5b3VyIEN1c3RvbVBhdGhFbnRyeSBpbnRlcmZhY2UuXG5pbnRlcmZhY2UgQ3VzdG9tUGF0aEVudHJ5IHtcblx0dmF1bHRQYXRoOiBzdHJpbmc7XG5cdG1hbmlmZXN0S2V5OiBzdHJpbmc7XG5cdGRvVXBkYXRlOiBib29sZWFuO1xufVxuXG4vLyBGaWxlUGF0aFN1Z2dlc3RlciBmb3IgbGl2ZSBzZWFyY2ggb24gdmF1bHQgZmlsZXMuXG5jbGFzcyBGaWxlUGF0aFN1Z2dlc3RlciBleHRlbmRzIEFic3RyYWN0SW5wdXRTdWdnZXN0PHN0cmluZz4ge1xuXHRwcml2YXRlIGlucHV0RWw6IEhUTUxJbnB1dEVsZW1lbnQ7XG5cdHByaXZhdGUgcGF0aHM6IHsgcGF0aDogc3RyaW5nOyBpc0ZvbGRlcjogYm9vbGVhbiB9W10gPSBbXTtcblx0cHJpdmF0ZSBjdXJyZW50U3VnZ2VzdGlvbnM6IHN0cmluZ1tdID0gW107XG5cdHByaXZhdGUgcmVuZGVyZWRTdWdnZXN0aW9uczogTWFwPEhUTUxFbGVtZW50LCBzdHJpbmc+ID0gbmV3IE1hcCgpO1xuXG5cdGNvbnN0cnVjdG9yKGFwcDogQXBwLCBpbnB1dEVsOiBIVE1MSW5wdXRFbGVtZW50KSB7XG5cdFx0c3VwZXIoYXBwLCBpbnB1dEVsKTtcblx0XHR0aGlzLmlucHV0RWwgPSBpbnB1dEVsO1xuXG5cdFx0Ly8gR2V0IGZvbGRlcnMgYW5kIG1hcmtkb3duIGZpbGVzIGZyb20gdGhlIHZhdWx0LlxuXHRcdGNvbnN0IGZvbGRlcnMgPSBPYmplY3QudmFsdWVzKGFwcC52YXVsdC5nZXRBbGxMb2FkZWRGaWxlcygpKVxuXHRcdFx0LmZpbHRlcigoZik6IGYgaXMgVEZvbGRlciA9PiBmIGluc3RhbmNlb2YgVEZvbGRlcilcblx0XHRcdC5tYXAoZiA9PiAoeyBwYXRoOiBmLnBhdGgsIGlzRm9sZGVyOiB0cnVlIH0pKTtcblx0XHRjb25zdCBmaWxlcyA9IGFwcC52YXVsdC5nZXRNYXJrZG93bkZpbGVzKClcblx0XHRcdC5tYXAoZiA9PiAoeyBwYXRoOiBmLnBhdGgsIGlzRm9sZGVyOiBmYWxzZSB9KSk7XG5cdFx0dGhpcy5wYXRocyA9IFsuLi5mb2xkZXJzLCAuLi5maWxlc107XG5cblx0XHR0aGlzLmlucHV0RWwuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIChlOiBLZXlib2FyZEV2ZW50KSA9PiB7XG5cdFx0XHRpZiAoZS5rZXkgPT09ICdFbnRlcicpIHtcblx0XHRcdFx0c2V0VGltZW91dCgoKSA9PiB7XG5cdFx0XHRcdFx0Y29uc3QgY29udGFpbmVyID0gKHRoaXMgYXMgYW55KS5jb250YWluZXJFbCBhcyBIVE1MRWxlbWVudDtcblx0XHRcdFx0XHRpZiAoIWNvbnRhaW5lcikgcmV0dXJuO1xuXHRcdFx0XHRcdGNvbnN0IHNlbGVjdGVkRWwgPSBjb250YWluZXIucXVlcnlTZWxlY3RvcignLnN1Z2dlc3Rpb24taXRlbS5pcy1zZWxlY3RlZCcpIGFzIEhUTUxFbGVtZW50O1xuXHRcdFx0XHRcdGlmIChzZWxlY3RlZEVsKSB7XG5cdFx0XHRcdFx0XHRjb25zdCBzZWxlY3RlZFBhdGggPSB0aGlzLnJlbmRlcmVkU3VnZ2VzdGlvbnMuZ2V0KHNlbGVjdGVkRWwpO1xuXHRcdFx0XHRcdFx0aWYgKHNlbGVjdGVkUGF0aCkge1xuXHRcdFx0XHRcdFx0XHR0aGlzLnNlbGVjdFN1Z2dlc3Rpb24oc2VsZWN0ZWRQYXRoKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0sIDApO1xuXHRcdFx0fVxuXHRcdH0pO1xuXHR9XG5cblx0Z2V0U3VnZ2VzdGlvbnMoaW5wdXRTdHI6IHN0cmluZyk6IHN0cmluZ1tdIHtcblx0XHRjb25zdCBxdWVyeSA9IGlucHV0U3RyLnRvTG93ZXJDYXNlKCk7XG5cdFx0dGhpcy5jdXJyZW50U3VnZ2VzdGlvbnMgPSB0aGlzLnBhdGhzXG5cdFx0XHQuZmlsdGVyKCh7IHBhdGggfSkgPT4gcGF0aC50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKHF1ZXJ5KSlcblx0XHRcdC5tYXAocCA9PiBwLnBhdGgpO1xuXHRcdHJldHVybiB0aGlzLmN1cnJlbnRTdWdnZXN0aW9ucztcblx0fVxuXG5cdHJlbmRlclN1Z2dlc3Rpb24ocGF0aDogc3RyaW5nLCBlbDogSFRNTEVsZW1lbnQpOiB2b2lkIHtcblx0XHRjb25zdCBpc0ZvbGRlciA9IHRoaXMucGF0aHMuZmluZChwID0+IHAucGF0aCA9PT0gcGF0aCk/LmlzRm9sZGVyO1xuXHRcdGVsLmFkZENsYXNzKFwibW9kLWNvbXBsZXhcIik7XG5cdFx0Y29uc3QgaWNvbkVsID0gZWwuY3JlYXRlRGl2KHsgY2xzOiAnc3VnZ2VzdGlvbi1pY29uJyB9KTtcblx0XHRzZXRJY29uKGljb25FbCwgaXNGb2xkZXIgPyAnZm9sZGVyJyA6ICdkb2N1bWVudCcpO1xuXG5cdFx0Y29uc3QgbmFtZSA9IHBhdGguc3BsaXQoJy8nKS5wb3AoKSE7XG5cdFx0Y29uc3QgZGlzcGxheU5hbWUgPSBpc0ZvbGRlciA/IG5hbWUgOiBuYW1lLnJlcGxhY2UoL1xcLm1kJC8sICcnKTtcblx0XHRlbC5jcmVhdGVEaXYoeyB0ZXh0OiBkaXNwbGF5TmFtZSwgY2xzOiAnc3VnZ2VzdGlvbi10aXRsZScgfSk7XG5cdFx0Y29uc3QgcGFyZW50UGF0aCA9IHBhdGguc3BsaXQoJy8nKS5zbGljZSgwLCAtMSkuam9pbignLycpO1xuXHRcdGVsLmNyZWF0ZURpdih7IHRleHQ6IHBhcmVudFBhdGgsIGNsczogJ3NlYXJjaC1zdWdnZXN0LWluZm8tdGV4dCcgfSk7XG5cdFx0ZWwuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChlOiBNb3VzZUV2ZW50KSA9PiB7XG5cdFx0XHRlLnN0b3BQcm9wYWdhdGlvbigpO1xuXHRcdFx0dGhpcy5zZWxlY3RTdWdnZXN0aW9uKHBhdGgpO1xuXHRcdH0pO1xuXHRcdHRoaXMucmVuZGVyZWRTdWdnZXN0aW9ucy5zZXQoZWwsIHBhdGgpO1xuXHR9XG5cblx0c2VsZWN0U3VnZ2VzdGlvbihwYXRoOiBzdHJpbmcpOiB2b2lkIHtcblx0XHR0aGlzLmlucHV0RWwudmFsdWUgPSBwYXRoO1xuXHRcdHRoaXMuaW5wdXRFbC5kaXNwYXRjaEV2ZW50KG5ldyBFdmVudChcImlucHV0XCIpKTtcblx0XHR0aGlzLmNsb3NlKCk7XG5cdH1cbn1cblxuLy8gTW9kYWwgZm9yIGRpc3BsYXlpbmcgdGhlIGNoYW5nZWxvZy5cbmNsYXNzIE1hcmtkb3duUHJldmlld01vZGFsIGV4dGVuZHMgTW9kYWwge1xuXHRjb25zdHJ1Y3RvcihhcHA6IEFwcCwgcHJpdmF0ZSBjb250ZW50OiBzdHJpbmcpIHtcblx0XHRzdXBlcihhcHApO1xuXHR9XG5cblx0b25PcGVuKCk6IHZvaWQge1xuXHRcdHRoaXMuY29udGVudEVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IGUuc3RvcFByb3BhZ2F0aW9uKCkpO1xuXHRcdHRoaXMuY29udGVudEVsLmVtcHR5KCk7XG5cdFx0dGhpcy5jb250ZW50RWwuY3JlYXRlRWwoJ2gyJywgeyB0ZXh0OiAnVG9vbGtpdCBDaGFuZ2Vsb2cnIH0pO1xuXHRcdGNvbnN0IG1kID0gdGhpcy5jb250ZW50RWwuY3JlYXRlRGl2KCk7XG5cdFx0Y29uc3QgZHVtbXlDb21wb25lbnQgPSBuZXcgY2xhc3MgZXh0ZW5kcyBDb21wb25lbnQgeyB9KCk7XG5cdFx0TWFya2Rvd25SZW5kZXJlci5yZW5kZXJNYXJrZG93bih0aGlzLmNvbnRlbnQsIG1kLCAnLycsIGR1bW15Q29tcG9uZW50KTtcblx0fVxuXG5cdG9uQ2xvc2UoKTogdm9pZCB7XG5cdFx0dGhpcy5jb250ZW50RWwuZW1wdHkoKTtcblx0fVxufVxuXG4vLyBUaGUgZnVsbCBzZXR0aW5ncyB0YWIuXG5leHBvcnQgY2xhc3MgVG9vbGtpdFNldHRpbmdzVGFiIGV4dGVuZHMgUGx1Z2luU2V0dGluZ1RhYiB7XG5cdHBsdWdpbjogVlZ1bmRlcmxvcmVUb29sa2l0UGx1Z2luO1xuXG5cdGNvbnN0cnVjdG9yKGFwcDogQXBwLCBwbHVnaW46IFZWdW5kZXJsb3JlVG9vbGtpdFBsdWdpbikge1xuXHRcdHN1cGVyKGFwcCwgcGx1Z2luKTtcblx0XHR0aGlzLnBsdWdpbiA9IHBsdWdpbjtcblx0fVxuXHRwcml2YXRlIHJlbmRlckhlYWRlcihyb290OiBIVE1MRWxlbWVudCk6IHZvaWQge1xuXHRcdGNvbnN0IGhlYWRlciA9IHJvb3QuY3JlYXRlRGl2KCk7XG5cdFx0aGVhZGVyLmFkZENsYXNzKFwic2V0dGluZ3MtaGVhZGVyXCIpO1xuXG5cdFx0aGVhZGVyLmNyZWF0ZUVsKCdoMycsIHsgdGV4dDogJ1ZWdW5kZXJsb3JlIFRvb2xraXQgU2V0dGluZ3MnIH0pO1xuXG5cdFx0Y29uc3QgaGVhZGVyQnRucyA9IGhlYWRlci5jcmVhdGVEaXYoKTtcblx0XHRoZWFkZXJCdG5zLmFkZENsYXNzKFwic2V0dGluZ3MtaGVhZGVyLWJ0blwiKTtcblxuXHRcdGNvbnN0IGRvY3NCdG4gPSBoZWFkZXJCdG5zLmNyZWF0ZUVsKCdidXR0b24nLCB7IHRleHQ6ICdEb2NzJyB9KTtcblx0XHRkb2NzQnRuLm9uY2xpY2sgPSAoKSA9PiB3aW5kb3cub3BlbignaHR0cDovL3Z2dW5kZXJsb3JlLmNvbScsICdfYmxhbmsnKTtcblxuXHRcdGNvbnN0IGdpdGh1YkJ0biA9IGhlYWRlckJ0bnMuY3JlYXRlRWwoJ2J1dHRvbicsIHsgdGV4dDogJ0dpdEh1YicgfSk7XG5cdFx0Z2l0aHViQnRuLm9uY2xpY2sgPSAoKSA9PlxuXHRcdFx0d2luZG93Lm9wZW4oJ2h0dHBzOi8vZ2l0aHViLmNvbS9zbGFtd2lzZTAwMDEvVlZ1bmRlcmxvcmUtVG9vbGtpdC1GdWxsJywgJ19ibGFuaycpO1xuXG5cdFx0Y29uc3Qga29maUJ0biA9IGhlYWRlckJ0bnMuY3JlYXRlRWwoJ2J1dHRvbicsIHtcblx0XHRcdHRleHQ6ICdcdTI2MTUgS28tZmknLFxuXHRcdFx0Y2xzOiAnbW9kLWN0YScsXG5cdFx0fSk7XG5cdFx0a29maUJ0bi5hZGRDbGFzcyhcInNldHRpbmdzLWtvZmlcIik7XG5cdFx0a29maUJ0bi5vbmNsaWNrID0gKCkgPT4gd2luZG93Lm9wZW4oJ2h0dHBzOi8va28tZmkuY29tL3Z2dW5kZXJsb3JlJywgJ19ibGFuaycpO1xuXHR9XG5cblx0cHJpdmF0ZSByZW5kZXJGaXJzdFJ1bkNhcmQocm9vdDogSFRNTEVsZW1lbnQpIHtcblxuXHRcdC8vIDEpIE91dGVyIHdyYXBwZXJcblx0XHRjb25zdCBjYXJkID0gcm9vdC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICd2dnVuZGVybG9yZS1maXJzdC1ydW4nIH0pO1xuXHRcdE9iamVjdC5hc3NpZ24oY2FyZC5zdHlsZSwge1xuXHRcdFx0ZGlzcGxheTogJ2ZsZXgnLFxuXHRcdFx0ZmxleERpcmVjdGlvbjogJ2NvbHVtbicsXG5cdFx0XHRhbGlnbkl0ZW1zOiAnY2VudGVyJyxcblx0XHRcdHRleHRBbGlnbjogJ2NlbnRlcicsXG5cdFx0XHRtYXJnaW5Ub3A6ICcyZW0nLFxuXHRcdFx0cGFkZGluZzogJzFlbScsXG5cdFx0XHRib3JkZXI6ICcycHggc29saWQgdmFyKC0tZGl2aWRlci1jb2xvciknLFxuXHRcdFx0Ym9yZGVyUmFkaXVzOiAnMThweCcsICAgICAgICAvKiAob3B0aW9uYWwpIHJvdW5kIHRoZSBjb3JuZXJzIHNsaWdodGx5ICovXG5cdFx0XHRiYWNrZ3JvdW5kQ29sb3I6ICd2YXIoLS1iYWNrZ3JvdW5kLXByaW1hcnkpJywgLyogKG9wdGlvbmFsKSB3aGl0ZS9ncmF5IGJhY2tncm91bmQgKi9cblx0XHR9KTtcblxuXHRcdC8vIDIpIEhlYWRlclxuXHRcdGNvbnN0IHRpdGxlID0gY2FyZC5jcmVhdGVFbCgnaDInLCB7XG5cdFx0XHR0ZXh0OiAnXHVEODNDXHVERkYwIFdlbGNvbWUgdG8gVlZ1bmRlcmxvcmUnLFxuXHRcdFx0Y2xzOiAndnYtY2FyZC10aXRsZScsXG5cdFx0fSk7XG5cdFx0Ly8gR2l2ZSB0aGUgdGl0bGUgYSBsaXR0bGUgYm90dG9tIG1hcmdpblxuXHRcdHRpdGxlLmFkZENsYXNzKFwidnYtbWItc21cIik7XG5cblx0XHQvLyAzKSBJbnN0cnVjdGlvbmFsIGNvcHlcblx0XHRjb25zdCBkZXNjID0gY2FyZC5jcmVhdGVFbCgncCcsIHtcblx0XHRcdHRleHQ6XG5cdFx0XHRcdCdHZXQgc3RhcnRlZCBieSBpbnN0YWxsaW5nIHRoZSBkZWZhdWx0IHRvb2xraXRcdTIwMTRcXG5vciBjaG9vc2UgaW5kaXZpZHVhbCBwaWVjZXMgdG8gc3VpdCB5b3VyIHZhdWx0LicsXG5cdFx0XHRjbHM6ICd2di1jYXJkLWRlc2MnLFxuXHRcdH0pO1xuXHRcdC8vIFNsaWdodCBib3R0b20gbWFyZ2luIHNvIGl0IGRvZXNuJ3QgYnV0dCByaWdodCB1cCBhZ2FpbnN0IHRoZSBidXR0b25zXG5cdFx0ZGVzYy5hZGRDbGFzcyhcInZ2LW1iLWxnXCIpO1xuXG5cdFx0Ly8gXHUyNTAwXHUyNTAwXHUyNTAwIFJVTEVTRVQgLyBSRUZFUkVOQ0UgR1JJRCBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcblx0XHRjb25zdCBwbHVnaW4gPSB0aGlzLnBsdWdpbjtcblxuXHRcdC8vIDEpIEdyaWQgY29udGFpbmVyXG5cdFx0Y29uc3QgZ3JpZCA9IGNhcmQuY3JlYXRlRGl2KCk7XG5cdFx0T2JqZWN0LmFzc2lnbihncmlkLnN0eWxlLCB7XG5cdFx0XHRkaXNwbGF5OiAnZ3JpZCcsXG5cdFx0XHRncmlkVGVtcGxhdGVDb2x1bW5zOiAnbWF4LWNvbnRlbnQgbWF4LWNvbnRlbnQnLFxuXHRcdFx0Y29sdW1uR2FwOiAnMXJlbScsXG5cdFx0XHRyb3dHYXA6ICcwLjI1cmVtJyxcblx0XHRcdGp1c3RpZnlDb250ZW50OiAnY2VudGVyJyxcblx0XHRcdGp1c3RpZnlJdGVtczogJ2NlbnRlcicsXG5cdFx0XHRtYXJnaW5Cb3R0b206ICcxcmVtJyxcblx0XHR9KTtcblxuXHRcdC8vIDIpIEhlYWRlciByb3dcblx0XHRjb25zdCBsYWJlbFJzID0gZ3JpZC5jcmVhdGVFbCgnZGl2JywgeyB0ZXh0OiAnUnVsZXNldCcgfSk7XG5cdFx0bGFiZWxScy5hZGRDbGFzcyhcImluc3RhbGwtcnVsZXNoZWFkZXJcIik7XG5cdFx0Y29uc3QgbGFiZWxSZWYgPSBncmlkLmNyZWF0ZUVsKCdkaXYnLCB7IHRleHQ6ICdSZWZlcmVuY2UgKG9wdGlvbmFsKScgfSk7XG5cdFx0bGFiZWxSZWYuYWRkQ2xhc3MoXCJpbnN0YWxsLXJ1bGVzaGVhZGVyXCIpO1xuXG5cdFx0Ly8gMykgSW5wdXQgY2VsbHNcblx0XHRjb25zdCByc0NlbGwgPSBncmlkLmNyZWF0ZURpdih7IGF0dHI6IHsgc3R5bGU6ICd0ZXh0LWFsaWduOmNlbnRlcicgfSB9KTtcblx0XHRjb25zdCByZWZDZWxsID0gZ3JpZC5jcmVhdGVEaXYoeyBhdHRyOiB7IHN0eWxlOiAndGV4dC1hbGlnbjpjZW50ZXInIH0gfSk7XG5cblx0XHQvLyA0KSBNdXRlZCwgaXRhbGljIHN1bW1hcnkgYmFyIChzcGFucyBib3RoIGNvbHVtbnMpXG5cdFx0Y29uc3Qgc3VtbWFyeUJhciA9IGdyaWQuY3JlYXRlRGl2KCk7XG5cdFx0T2JqZWN0LmFzc2lnbihzdW1tYXJ5QmFyLnN0eWxlLCB7XG5cdFx0XHRncmlkQ29sdW1uOiAnMSAvIHNwYW4gMicsXG5cdFx0XHRkaXNwbGF5OiAnZmxleCcsXG5cdFx0XHRhbGlnbkl0ZW1zOiAnY2VudGVyJyxcblx0XHRcdGZsZXhXcmFwOiAnd3JhcCcsXG5cdFx0XHRnYXA6ICcwLjVyZW0nLFxuXHRcdFx0Zm9udFNpemU6ICcwLjg1ZW0nLFxuXHRcdFx0Y29sb3I6ICd2YXIoLS10ZXh0LW11dGVkKScsXG5cdFx0XHRmb250U3R5bGU6ICdpdGFsaWMnLFxuXHRcdFx0bWFyZ2luVG9wOiAnMC4yNXJlbScsXG5cdFx0XHRtYXJnaW5Cb3R0b206ICcxcmVtJyxcblx0XHR9KTtcblx0XHRjb25zdCBydWxlc2V0U3BhbiA9IHN1bW1hcnlCYXIuY3JlYXRlU3Bhbih7XG5cdFx0XHR0ZXh0OiBgUnVsZXNldDogJHtwbHVnaW4uc2V0dGluZ3MucnVsZXNldENvbXBlbmRpdW1cblx0XHRcdFx0PyBgRCZEIDVFICgke3BsdWdpbi5zZXR0aW5ncy5ydWxlc2V0Q29tcGVuZGl1bX0pYFxuXHRcdFx0XHQ6ICcnXG5cdFx0XHRcdH1gLFxuXHRcdH0pO1xuXHRcdHJ1bGVzZXRTcGFuLmFkZENsYXNzKFwiaW5zdGFsbC1ydWxlc2hlYWRlclwiKTtcblx0XHRzdW1tYXJ5QmFyLmNyZWF0ZVNwYW4oeyB0ZXh0OiAnUmVmZXJlbmNlczonIH0pO1xuXHRcdGNvbnN0IGNoaXBzV3JhcHBlciA9IHN1bW1hcnlCYXIuY3JlYXRlRGl2KCk7XG5cdFx0T2JqZWN0LmFzc2lnbihjaGlwc1dyYXBwZXIuc3R5bGUsIHsgZGlzcGxheTogJ2ZsZXgnLCBnYXA6ICc0cHgnIH0pO1xuXG5cdFx0Ly8gSGVscGVyIHRvIHJlbmRlciBhIGNoaXBcblx0XHRmdW5jdGlvbiBhZGRDaGlwKGlkOiBzdHJpbmcpIHtcblx0XHRcdGNvbnN0IGVkID0gQVZBSUxBQkxFX0VESVRJT05TLmZpbmQoZSA9PiBlLmlkID09PSBpZCkhO1xuXHRcdFx0Y29uc3QgY2hpcCA9IGNoaXBzV3JhcHBlci5jcmVhdGVEaXYoe1xuXHRcdFx0XHRhdHRyOiB7XG5cdFx0XHRcdFx0c3R5bGU6XG5cdFx0XHRcdFx0XHQnYmFja2dyb3VuZDogdmFyKC0taW50ZXJhY3RpdmUtYWNjZW50KTsgY29sb3I6IHdoaXRlOyBwYWRkaW5nOjJweCA2cHg7ICcgK1xuXHRcdFx0XHRcdFx0J2JvcmRlci1yYWRpdXM6NHB4OyBkaXNwbGF5OmlubGluZS1mbGV4OyBhbGlnbi1pdGVtczpjZW50ZXI7IGdhcDo0cHg7J1xuXHRcdFx0XHR9XG5cdFx0XHR9KTtcblx0XHRcdGNoaXAuY3JlYXRlU3Bhbih7IHRleHQ6IGVkLmxhYmVsIH0pO1xuXHRcdFx0Y29uc3QgcmVtID0gY2hpcC5jcmVhdGVTcGFuKHtcblx0XHRcdFx0dGV4dDogJ1x1MDBENycsXG5cdFx0XHRcdGF0dHI6IHsgc3R5bGU6ICdjdXJzb3I6cG9pbnRlcjsgbWFyZ2luLWxlZnQ6NHB4OycgfVxuXHRcdFx0fSk7XG5cdFx0XHRyZW0ub25jbGljayA9IGFzeW5jICgpID0+IHtcblx0XHRcdFx0cGx1Z2luLnNldHRpbmdzLnJ1bGVzZXRSZWZlcmVuY2UgPSBwbHVnaW4uc2V0dGluZ3MucnVsZXNldFJlZmVyZW5jZS5maWx0ZXIoeCA9PiB4ICE9PSBpZCk7XG5cdFx0XHRcdGF3YWl0IHBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcblx0XHRcdFx0Y2hpcC5yZW1vdmUoKTtcblx0XHRcdFx0dXBkYXRlSW5zdGFsbEJ1dHRvbnMoKTtcblx0XHRcdH07XG5cdFx0fVxuXHRcdDtcblxuXHRcdC8vIEluaXRpYWwgY2hpcHMgZHJhd1xuXHRcdHBsdWdpbi5zZXR0aW5ncy5ydWxlc2V0UmVmZXJlbmNlLmZvckVhY2goZSA9PiBhZGRDaGlwKGUpKTtcblxuXHRcdC8vIDUpIFJ1bGVzZXQgZHJvcGRvd25cblx0XHRjb25zdCByc0Ryb3Bkb3duID0gbmV3IERyb3Bkb3duQ29tcG9uZW50KHJzQ2VsbCk7XG5cdFx0cnNEcm9wZG93bi5hZGRPcHRpb24oJycsICdTZWxlY3QgZWRpdGlvblx1MjAyNicpO1xuXHRcdEFWQUlMQUJMRV9FRElUSU9OUy5mb3JFYWNoKChlZDogRWRpdGlvbikgPT4ge1xuXHRcdFx0cnNEcm9wZG93bi5hZGRPcHRpb24oZWQuaWQsIGVkLmxhYmVsKTtcblx0XHR9KTtcblx0XHRyc0Ryb3Bkb3duXG5cdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MucnVsZXNldENvbXBlbmRpdW0pXG5cdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbCkgPT4ge1xuXHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5ydWxlc2V0Q29tcGVuZGl1bSA9IHZhbDtcblx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG5cblx0XHRcdFx0Ly8gTGl2ZVx1MjAxMHVwZGF0ZSB5b3VyIHN1bW1hcnkgYmFyOlxuXHRcdFx0XHRjb25zdCBjaG9zZW4gPSBBVkFJTEFCTEVfRURJVElPTlMuZmluZChlID0+IGUuaWQgPT09IHZhbCk7XG5cdFx0XHRcdHJ1bGVzZXRTcGFuLnRleHRDb250ZW50ID0gY2hvc2VuID8gY2hvc2VuLmxhYmVsIDogJyc7XG5cblx0XHRcdFx0Ly8gQ2xlYXIgYW55IGV4aXN0aW5nIHJlZmVyZW5jZSBjaGlwczpcblx0XHRcdFx0Y2hpcHNXcmFwcGVyLmVtcHR5KCk7XG5cblx0XHRcdFx0dXBkYXRlSW5zdGFsbEJ1dHRvbnMoKTtcblx0XHRcdH0pO1xuXG5cdFx0Y29uc3Qgc2VhcmNoV3JhcHBlckVsID0gcmVmQ2VsbC5jcmVhdGVEaXYoeyBhdHRyOiB7IHN0eWxlOiAndGV4dC1hbGlnbjpjZW50ZXI7JyB9IH0pO1xuXHRcdGNvbnN0IHNlYXJjaENvbXAgPSBuZXcgU2VhcmNoQ29tcG9uZW50KHNlYXJjaFdyYXBwZXJFbCk7XG5cdFx0c2VhcmNoQ29tcC5zZXRQbGFjZWhvbGRlcignQWRkIHJlZmVyZW5jZSBydWxlc1x1MjAyNicpO1xuXHRcdGNvbnN0IHN1Z2dlc3Rpb25JbnB1dEVsID0gc2VhcmNoQ29tcC5pbnB1dEVsO1xuXG5cdFx0bmV3IGNsYXNzIGV4dGVuZHMgQWJzdHJhY3RJbnB1dFN1Z2dlc3Q8c3RyaW5nPiB7XG5cdFx0XHRjb25zdHJ1Y3RvcihhcHA6IEFwcCwgaW5wdXRFbDogSFRNTElucHV0RWxlbWVudCkge1xuXHRcdFx0XHRzdXBlcihhcHAsIGlucHV0RWwpO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyAxKSBQcm9wb3NlIGVkaXRpb24gSURzIChtaW51cyB0aGUgb25lIHRoZXkgcGlja2VkIGFzIHRoZSBtYWluIHJ1bGVzZXQpXG5cdFx0XHRnZXRTdWdnZXN0aW9ucyhpbnB1dDogc3RyaW5nKTogc3RyaW5nW10ge1xuXHRcdFx0XHRyZXR1cm4gQVZBSUxBQkxFX0VESVRJT05TXG5cdFx0XHRcdFx0LmZpbHRlcihlZCA9PiBlZC5pZCAhPT0gcGx1Z2luLnNldHRpbmdzLnJ1bGVzZXRDb21wZW5kaXVtKSAgICAgICAgICAgIC8vIGZpbHRlciBvdXQgdGhlIGNob3NlbiBydWxlc2V0XG5cdFx0XHRcdFx0LmZpbHRlcihlZCA9PiBlZC5sYWJlbC50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKGlucHV0LnRvTG93ZXJDYXNlKCkpKSAgICAgLy8gbWF0Y2ggb24gbGFiZWwgdGV4dFxuXHRcdFx0XHRcdC5tYXAoZWQgPT4gZWQuaWQpOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHJldHVybiB0aGUgSUQgZm9yIGVhY2hcblx0XHRcdH1cblxuXHRcdFx0Ly8gMikgUmVuZGVyIHRoZSBodW1hbi1yZWFkYWJsZSBsYWJlbFxuXHRcdFx0cmVuZGVyU3VnZ2VzdGlvbihpdGVtOiBzdHJpbmcsIGVsOiBIVE1MRWxlbWVudCk6IHZvaWQge1xuXHRcdFx0XHRjb25zdCBlZCA9IEFWQUlMQUJMRV9FRElUSU9OUy5maW5kKGUgPT4gZS5pZCA9PT0gaXRlbSkhO1xuXHRcdFx0XHRlbC5jcmVhdGVEaXYoeyB0ZXh0OiBlZC5sYWJlbCB9KTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gMykgV2hlbiB0aGV5IHBpY2sgb25lLCBzdG9yZSBpdHMgSUQgYW5kIGFkZCBhIGNoaXBcblx0XHRcdHNlbGVjdFN1Z2dlc3Rpb24oaXRlbTogc3RyaW5nKTogdm9pZCB7XG5cdFx0XHRcdGlmICghcGx1Z2luLnNldHRpbmdzLnJ1bGVzZXRSZWZlcmVuY2UuaW5jbHVkZXMoaXRlbSkpIHtcblx0XHRcdFx0XHRwbHVnaW4uc2V0dGluZ3MucnVsZXNldFJlZmVyZW5jZS5wdXNoKGl0ZW0pO1xuXHRcdFx0XHRcdHBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcblx0XHRcdFx0XHRhZGRDaGlwKGl0ZW0pO1xuXHRcdFx0XHR9XG5cdFx0XHRcdHRoaXMuY2xvc2UoKTtcblx0XHRcdFx0c3VnZ2VzdGlvbklucHV0RWwudmFsdWUgPSAnJztcblx0XHRcdFx0dXBkYXRlSW5zdGFsbEJ1dHRvbnMoKTtcblx0XHRcdH1cblx0XHR9KHRoaXMuYXBwLCBzdWdnZXN0aW9uSW5wdXRFbCk7XG5cblxuXG5cblxuXHRcdC8vIFx1MjUwMFx1MjUwMFx1MjUwMCBCdXR0b24gcm93IFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFxuXHRcdGNvbnN0IGJ0blJvdzEgPSBjYXJkLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3Z2LWJ1dHRvbi1yb3cnIH0pO1xuXHRcdE9iamVjdC5hc3NpZ24oYnRuUm93MS5zdHlsZSwge1xuXHRcdFx0ZGlzcGxheTogJ2ZsZXgnLFxuXHRcdFx0Z2FwOiAnMC43NWVtJyxcblx0XHRcdGp1c3RpZnlDb250ZW50OiAnY2VudGVyJyxcblx0XHRcdG1hcmdpbkJvdHRvbTogJzEuNWVtJyxcblx0XHR9KTtcblxuXHRcdGNvbnN0IGluc3RhbGxCdG4xID0gYnRuUm93MS5jcmVhdGVFbCgnYnV0dG9uJywge1xuXHRcdFx0dGV4dDogJ0luc3RhbGwgVG9vbGtpdCcsXG5cdFx0XHRjbHM6ICdtb2QtY3RhJyxcblx0XHR9KTtcblx0XHRpbnN0YWxsQnRuMS5vbkNsaWNrRXZlbnQoKCkgPT5cblx0XHRcdG5ldyBDb25maXJtRnJlc2hJbnN0YWxsTW9kYWwodGhpcy5hcHAsIHRoaXMucGx1Z2luKS5vcGVuKClcblx0XHQpO1xuXG5cdFx0Ly8gY29uc3QgY3VzdG9tQnRuMSA9IGJ0blJvdzEuY3JlYXRlRWwoJ2J1dHRvbicsIHtcblx0XHQvLyB0ZXh0OiAnQ3VzdG9tIEluc3RhbGwnLFxuXHRcdC8vIGNsczogJ21vZC1jdGEnLFxuXHRcdC8vIH0pO1xuXHRcdC8vIE9iamVjdC5hc3NpZ24oY3VzdG9tQnRuMS5zdHlsZSwge1xuXHRcdC8vIGJhY2tncm91bmQ6ICdub25lJyxcblx0XHQvLyBib3JkZXI6ICcxcHggc29saWQgdmFyKC0taW50ZXJhY3RpdmUtYWNjZW50KScsXG5cdFx0Ly8gY29sb3I6ICd2YXIoLS10ZXh0LW5vcm1hbCknLFxuXHRcdC8vIH0pO1xuXHRcdC8vIGN1c3RvbUJ0bjEub25DbGlja0V2ZW50KCgpID0+IHNob3dDdXN0b21JbnN0YWxsTW9kYWwodGhpcy5hcHAsIHRoaXMucGx1Z2luKSk7XG5cblx0XHQvLyBcdTI1MDBcdTI1MDBcdTI1MDAgSGVscGVyIHRvIGVuYWJsZS9kaXNhYmxlIHRoZSBidXR0b25zIFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFxuXHRcdGNvbnN0IHVwZGF0ZUluc3RhbGxCdXR0b25zID0gKCkgPT4ge1xuXHRcdFx0Y29uc3QgaGFzUnVsZXNldCA9IEJvb2xlYW4odGhpcy5wbHVnaW4uc2V0dGluZ3MucnVsZXNldENvbXBlbmRpdW0pO1xuXHRcdFx0aW5zdGFsbEJ0bjEudG9nZ2xlQXR0cmlidXRlKCdkaXNhYmxlZCcsICFoYXNSdWxlc2V0KTtcblx0XHRcdC8vIGN1c3RvbUJ0bjEudG9nZ2xlQXR0cmlidXRlKCdkaXNhYmxlZCcsICFoYXNSdWxlc2V0KTtcblx0XHR9O1xuXG5cdFx0Ly8gNykgSW5pdGlhbCBjYWxsLCBpbiBjYXNlIHdlXHUyMDE5cmUgcmUtcmVuZGVyaW5nXG5cdFx0dXBkYXRlSW5zdGFsbEJ1dHRvbnMoKTtcblxuXG5cdFx0Ly8gNSkgXHUyMDFDU2tpcFx1MjAxRCBsaW5rXG5cdFx0Y29uc3Qgc2tpcFBhcmEgPSBjYXJkLmNyZWF0ZUVsKCdwJywgeyBjbHM6ICd2di1za2lwLWxpbmsnIH0pO1xuXHRcdC8vIENlbnRlciBpdCBhbmQgZ2l2ZSBpdCBhIHRpbnkgdG9wIG1hcmdpblxuXHRcdE9iamVjdC5hc3NpZ24oc2tpcFBhcmEuc3R5bGUsIHtcblx0XHRcdHRleHRBbGlnbjogJ2NlbnRlcicsXG5cdFx0XHRtYXJnaW5Ub3A6ICcwLjI1ZW0nLFxuXHRcdH0pO1xuXHRcdHNraXBQYXJhXG5cdFx0XHQuY3JlYXRlRWwoJ2EnLCB7XG5cdFx0XHRcdHRleHQ6ICdBbHJlYWR5IGhhdmUgdGhlIFRvb2xraXQ/IFNob3cgbWUgdGhlIHNldHRpbmdzIFx1MjE5MicsXG5cdFx0XHR9KVxuXHRcdFx0Lm9uQ2xpY2tFdmVudChhc3luYyAoKSA9PiB7XG5cdFx0XHRcdC8vIDEpIENyZWF0ZSB0aGUgaGlkZGVuIG1hcmtlciBmaWxlIHNvIFwiZmlyc3RcdTIwMTBydW5cIiBuZXZlciBzaG93cyBhZ2Fpbjpcblx0XHRcdFx0Y29uc3QgbWFya2VyUGF0aCA9ICcudnZ1bmRlcmxvcmVfaW5zdGFsbGVkJztcblx0XHRcdFx0dHJ5IHtcblx0XHRcdFx0XHQvLyBPbmx5IHdyaXRlIGl0IGlmIGl0IGRvZXMgbm90IGV4aXN0IHlldFxuXHRcdFx0XHRcdGlmICghKGF3YWl0IHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXIuZXhpc3RzKG1hcmtlclBhdGgpKSkge1xuXHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5hcHAudmF1bHQuY3JlYXRlKG1hcmtlclBhdGgsICcnKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0gY2F0Y2ggKGUpIHtcblx0XHRcdFx0XHRjb25zb2xlLmVycm9yKCdcdTI3NEMgRmFpbGVkIHRvIGNyZWF0ZSBtYXJrZXIgZmlsZTonLCBlKTtcblx0XHRcdFx0fVxuXG5cblx0XHRcdFx0Ly8gMykgUmVcdTIwMTByZW5kZXIgdGhlIG5vcm1hbCBzZXR0aW5ncyBVSVxuXHRcdFx0XHR0aGlzLmRpc3BsYXkoKTtcblx0XHRcdH0pO1xuXHR9XG5cblx0cHJpdmF0ZSBmb3JtYXRSdWxlc2V0TGFiZWwoaWQ/OiBzdHJpbmcgfCBudWxsKTogc3RyaW5nIHtcblx0XHRpZiAoIWlkKSByZXR1cm4gXCJVbmtub3duXCI7XG5cdFx0Y29uc3QgZWQgPSBBVkFJTEFCTEVfRURJVElPTlMuZmluZChlID0+IGUuaWQgPT09IGlkKTtcblx0XHRyZXR1cm4gZWQgPyBlZC5sYWJlbCA6IFN0cmluZyhpZCk7XG5cdH1cblxuXHRwcml2YXRlIGFzeW5jIHJlc29sdmVSdWxlc2V0SWQoKTogUHJvbWlzZTxzdHJpbmcgfCBudWxsPiB7XG5cdFx0Ly8gMSkgc2V0dGluZ3MgKHByZWZlcnJlZClcblx0XHRjb25zdCBzID0gdGhpcy5wbHVnaW4/LnNldHRpbmdzIGFzIGFueTtcblx0XHRjb25zdCBmcm9tU2V0dGluZ3MgPVxuXHRcdFx0cz8ucnVsZXNldENvbXBlbmRpdW0gfHwgIC8vIDxcdTIwMTQgeW91ciBpbnN0YWxsZXIgZHJvcGRvd24gc2F2ZXMgaGVyZVxuXHRcdFx0cz8ucnVsZXNldElkIHx8XG5cdFx0XHRzPy5ydWxlc2V0IHx8XG5cdFx0XHRudWxsO1xuXHRcdGlmIChmcm9tU2V0dGluZ3MpIHJldHVybiBTdHJpbmcoZnJvbVNldHRpbmdzKTtcblxuXHRcdC8vIDIpIG9wdGlvbmFsIHNlbnRpbmVsc1xuXHRcdHRyeSB7XG5cdFx0XHRjb25zdCB0eHQgPSBhd2FpdCB0aGlzLmFwcC52YXVsdC5hZGFwdGVyLnJlYWQoXCJDb21wZW5kaXVtLy5ydWxlc2V0Lmpzb25cIik7XG5cdFx0XHRjb25zdCBqID0gSlNPTi5wYXJzZSh0eHQpO1xuXHRcdFx0cmV0dXJuIGoucnVsZXNldElkIHx8IGoucnVsZXNldCB8fCBudWxsO1xuXHRcdH0gY2F0Y2ggKF8pIHsgfVxuXG5cdFx0dHJ5IHtcblx0XHRcdGNvbnN0IHR4dCA9IGF3YWl0IHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXIucmVhZChcIi52ZXJzaW9uLmpzb25cIik7XG5cdFx0XHRjb25zdCBqID0gSlNPTi5wYXJzZSh0eHQpO1xuXHRcdFx0cmV0dXJuIGoucnVsZXNldElkIHx8IGoucnVsZXNldCB8fCBudWxsO1xuXHRcdH0gY2F0Y2ggKF8pIHsgfVxuXG5cdFx0cmV0dXJuIG51bGw7XG5cdH1cblxuXHRwcml2YXRlIGFzeW5jIHVwZGF0ZVJ1bGVzZXREaXNwbGF5KCk6IFByb21pc2U8dm9pZD4ge1xuXHRcdGlmICghdGhpcy5ydWxlc2V0VmFsdWVFbCkgcmV0dXJuO1xuXHRcdGNvbnN0IGlkID0gYXdhaXQgdGhpcy5yZXNvbHZlUnVsZXNldElkKCk7XG5cdFx0Y29uc3QgbGFiZWwgPSB0aGlzLmZvcm1hdFJ1bGVzZXRMYWJlbChpZCk7XG5cblx0XHR0aGlzLnJ1bGVzZXRWYWx1ZUVsLnRleHRDb250ZW50ID0gbGFiZWw7XG5cdFx0dGhpcy5ydWxlc2V0VmFsdWVFbC5jbGFzc0xpc3QucmVtb3ZlKFwidnYtc3VjY2Vzc1wiLCBcInZ2LXdhcm5cIiwgXCJ2di1lcnJvclwiKTtcblx0XHR0aGlzLnJ1bGVzZXRWYWx1ZUVsLmFkZENsYXNzKGlkID8gXCJ2di1zdWNjZXNzXCIgOiBcInZ2LXdhcm5cIik7XG5cdH1cblxuXG5cdHByaXZhdGUgdmVyc2lvblZhbHVlRWw6IEhUTUxFbGVtZW50IHwgbnVsbCA9IG51bGw7XG5cdHByaXZhdGUgZm9yY2VXYXJuaW5nRWw6IEhUTUxFbGVtZW50IHwgbnVsbCA9IG51bGw7XG5cdHByaXZhdGUgcnVsZXNldFZhbHVlRWw6IEhUTUxTcGFuRWxlbWVudCB8IG51bGwgPSBudWxsO1xuXG5cdGFzeW5jIGRpc3BsYXkoKTogUHJvbWlzZTx2b2lkPiB7XG5cdFx0Y29uc3QgeyBjb250YWluZXJFbCB9ID0gdGhpcztcblx0XHRjb25zdCBzYXZlZFNjcm9sbFRvcCA9IGNvbnRhaW5lckVsLnNjcm9sbFRvcDtcblx0XHRjb250YWluZXJFbC5lbXB0eSgpO1xuXG5cdFx0Y29uc3QgbWFya2VyUGF0aCA9ICcudnZ1bmRlcmxvcmVfaW5zdGFsbGVkJztcblx0XHRjb25zdCBpc0luc3RhbGxlZCA9IGF3YWl0IHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXIuZXhpc3RzKG1hcmtlclBhdGgpO1xuXHRcdGlmICghaXNJbnN0YWxsZWQpIHtcblx0XHRcdHRoaXMucmVuZGVyRmlyc3RSdW5DYXJkKGNvbnRhaW5lckVsKTtcblx0XHRcdGNvbnRhaW5lckVsLnNjcm9sbFRvcCA9IHNhdmVkU2Nyb2xsVG9wO1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdHRoaXMucmVuZGVySGVhZGVyKGNvbnRhaW5lckVsKTsgLy8gXHVEODNEXHVEQzQ4XHUwMEEwQWx3YXlzIHJlbmRlciBoZWFkZXIgZmlyc3RcblxuXHRcdDsgKGFzeW5jICgpID0+IHtcblxuXHRcdFx0LyoqIFx1MjUwMFx1MjUwMFx1MjUwMCBWRVJTSU9OIFNFQ1RJT04gXHUyNTAwXHUyNTAwXHUyNTAwICovXG5cdFx0XHRjb25zdCB2ZXJzaW9uUm93ID0gY29udGFpbmVyRWwuY3JlYXRlRGl2KCk7XG5cdFx0XHR2ZXJzaW9uUm93LmFkZENsYXNzKFwic2V0dGluZ3MtdmVyc2lvbnJvd1wiKTtcblxuXHRcdFx0Y29uc3QgdmVyc2lvbkluZm8gPSB2ZXJzaW9uUm93LmNyZWF0ZURpdigpO1xuXHRcdFx0dmVyc2lvbkluZm8uYWRkQ2xhc3MoXCJzZXR0aW5ncy12ZXJzaW9uaW5mb1wiKTtcblxuXHRcdFx0bGV0IGluc3RhbGxlZCA9ICdOb3QgaW5zdGFsbGVkJztcblx0XHRcdHRyeSB7XG5cdFx0XHRcdGNvbnN0IHZlckNvbnRlbnQgPSBhd2FpdCB0aGlzLmFwcC52YXVsdC5hZGFwdGVyLnJlYWQoJy52ZXJzaW9uLmpzb24nKTtcblx0XHRcdFx0Y29uc3QganNvbiA9IEpTT04ucGFyc2UodmVyQ29udGVudCk7XG5cdFx0XHRcdGluc3RhbGxlZCA9IGpzb24udmVyc2lvbiA/PyAnTm90IGluc3RhbGxlZCc7XG5cdFx0XHR9IGNhdGNoIChlcnIpIHtcblx0XHRcdFx0Y29uc29sZS53YXJuKCdDb3VsZCBub3QgcmVhZCAudmVyc2lvbi5qc29uIGZyb20gdmF1bHQ6JywgZXJyKTtcblx0XHRcdH1cblx0XHRcdGNvbnN0IGxhdGVzdCA9IHRoaXMucGx1Z2luLnNldHRpbmdzLmxhdGVzdFRvb2xraXRWZXJzaW9uID8/ICdDb3VsZCBub3QgZmV0Y2gnO1xuXHRcdFx0Y29uc3QgaXNNYXRjaCA9IGluc3RhbGxlZCA9PT0gbGF0ZXN0O1xuXG5cdFx0XHRjb25zdCB2YXVsdFJvdyA9IHZlcnNpb25JbmZvLmNyZWF0ZURpdigpO1xuXHRcdFx0dmF1bHRSb3cuYXBwZW5kVGV4dCgnVmF1bHQgVG9vbGtpdCBWZXJzaW9uOiAnKTtcblxuXHRcdFx0dGhpcy52ZXJzaW9uVmFsdWVFbCA9IHZhdWx0Um93LmNyZWF0ZVNwYW4oKTsgIC8vIFx1RDgzRFx1REQyNSBzYXZlIHJlZlxuXHRcdFx0dGhpcy52ZXJzaW9uVmFsdWVFbC50ZXh0Q29udGVudCA9IGluc3RhbGxlZDtcblx0XHRcdHRoaXMudmVyc2lvblZhbHVlRWwuYWRkQ2xhc3MoXCJ2di1ib2xkXCIsIGlzTWF0Y2ggPyBcInZ2LXN1Y2Nlc3NcIiA6IFwidnYtZXJyb3JcIik7XG5cblxuXHRcdFx0Y29uc3QgbGF0ZXN0Um93ID0gdmVyc2lvbkluZm8uY3JlYXRlRWwoJ2RpdicsIHsgdGV4dDogJ0xhdGVzdCBPZmZpY2lhbCBWZXJzaW9uOiAnIH0pO1xuXHRcdFx0bGF0ZXN0Um93LmNyZWF0ZVNwYW4oe1xuXHRcdFx0XHR0ZXh0OiBsYXRlc3QsXG5cdFx0XHRcdGF0dHI6IHsgc3R5bGU6ICdmb250LXdlaWdodDogYm9sZDsgY29sb3I6IHZhcigtLXRleHQtc3VjY2Vzcyk7JyB9XG5cdFx0XHR9KTtcblxuXHRcdFx0Y29uc3QgdmVyc2lvbkNvbnRyb2xzID0gdmVyc2lvblJvdy5jcmVhdGVEaXYoKTtcblx0XHRcdHZlcnNpb25Db250cm9scy5hZGRDbGFzcyhcInNldHRpbmdzLXZlcnNpb25jb250cm9sc1wiKTtcblxuXHRcdFx0Y29uc3QgYnV0dG9uUm93ID0gdmVyc2lvbkNvbnRyb2xzLmNyZWF0ZURpdigpO1xuXHRcdFx0YnV0dG9uUm93LmFkZENsYXNzKFwic2V0dGluZ3MtYnV0dG9ucm93XCIpO1xuXG5cdFx0XHRjb25zdCBjaGVja0J0biA9IGJ1dHRvblJvdy5jcmVhdGVFbCgnYnV0dG9uJywge1xuXHRcdFx0XHR0ZXh0OiBpbnN0YWxsZWQgIT09IGxhdGVzdCA/ICdQcmV2aWV3IFVwZGF0ZScgOiAnQ2hlY2sgZm9yIFVwZGF0ZXMnLFxuXHRcdFx0XHRjbHM6ICdtb2QtY3RhJ1xuXHRcdFx0fSk7XG5cdFx0XHRjaGVja0J0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGFzeW5jICgpID0+IHtcblx0XHRcdFx0aWYgKGluc3RhbGxlZCAhPT0gbGF0ZXN0KSB7XG5cdFx0XHRcdFx0dGhpcy5wbHVnaW4ucHJldmlld1VwZGF0ZXNNb2RhbCgpO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLmNoZWNrRm9yVXBkYXRlcygpO1xuXHRcdFx0XHR9XG5cdFx0XHR9KTtcblx0XHRcdGNvbnN0IGNoYW5nZWxvZ0J0biA9IGJ1dHRvblJvdy5jcmVhdGVFbCgnYnV0dG9uJywgeyB0ZXh0OiAnXHVEODNEXHVEQ0Q2IFZpZXcgQ2hhbmdlbG9nJyB9KTtcblx0XHRcdGNoYW5nZWxvZ0J0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcblx0XHRcdFx0bmV3IE1hcmtkb3duUHJldmlld01vZGFsKHRoaXMuYXBwLCB0aGlzLnBsdWdpbi5jaGFuZ2Vsb2cpLm9wZW4oKTtcblx0XHRcdH0pO1xuXHRcdFx0aWYgKHRoaXMucGx1Z2luLnNldHRpbmdzLmxhc3RDaGVja2VkKSB7XG5cdFx0XHRcdGNvbnN0IGxhc3RDaGVja2VkID0gdmVyc2lvbkNvbnRyb2xzLmNyZWF0ZURpdigpO1xuXHRcdFx0XHRsYXN0Q2hlY2tlZC5hZGRDbGFzcyhcInNldHRpbmdzLWxhc3RjaGVja2VkXCIpO1xuXHRcdFx0XHRsYXN0Q2hlY2tlZC50ZXh0Q29udGVudCA9IGBMYXN0IGNoZWNrZWQ6ICR7bmV3IERhdGUodGhpcy5wbHVnaW4uc2V0dGluZ3MubGFzdENoZWNrZWQpLnRvTG9jYWxlU3RyaW5nKCl9YDtcblx0XHRcdH1cblx0XHRcdC8vcnVsZXNldCBpZGVudFxuXHRcdFx0Y29uc3QgcnVsZXNldFJvdyA9IHZlcnNpb25JbmZvLmNyZWF0ZURpdigpO1xuXHRcdFx0cnVsZXNldFJvdy5hZGRDbGFzcyhcInNldHRpbmdzLXJ1bGVzZXRyb3dcIik7XG5cdFx0XHRydWxlc2V0Um93LnNldEF0dHIoXCJzdHlsZVwiLCBcIm1hcmdpbi10b3A6IDZweDttYXJnaW4tYm90dG9tOiAxMnB4O1wiKTtcblxuXHRcdFx0cnVsZXNldFJvdy5hcHBlbmRUZXh0KFwiVmF1bHQgUnVsZXNldDogXCIpO1xuXHRcdFx0dGhpcy5ydWxlc2V0VmFsdWVFbCA9IHJ1bGVzZXRSb3cuY3JlYXRlU3Bhbih7fSk7XG5cdFx0XHR0aGlzLnJ1bGVzZXRWYWx1ZUVsLnRleHRDb250ZW50ID0gXCJEZXRlY3RpbmdcdTIwMjZcIjtcblxuXHRcdFx0YXdhaXQgdGhpcy51cGRhdGVSdWxlc2V0RGlzcGxheSgpO1xuXG5cblxuXHRcdFx0LyoqIFx1MjUwMFx1MjUwMFx1MjUwMCBGSVggWU9VUiBWQVVMVCBTRUNUSU9OIChjb2xsYXBzaWJsZSwgZml4ZWRcdTIwMTBpY29uKSBcdTI1MDBcdTI1MDBcdTI1MDAgKi9cblx0XHRcdGNvbnN0IGZpeERldGFpbHMgPSBjb250YWluZXJFbC5jcmVhdGVFbCgnZGV0YWlscycsIHsgY2xzOiAndmstc2VjdGlvbicgfSk7XG5cblx0XHRcdC8vIFx1MjUwMFx1MjUwMFx1MjUwMCBSZXBsYWNlIHlvdXIgb2xkIGZpeEhlYWRlciB3aXRoIHRoaXMgPHN1bW1hcnk+IFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFxuXHRcdFx0Y29uc3QgZml4SGVhZGVyID0gZml4RGV0YWlscy5jcmVhdGVFbCgnc3VtbWFyeScsIHsgY2xzOiAndmstc2VjdGlvbi1oZWFkZXInIH0pO1xuXHRcdFx0T2JqZWN0LmFzc2lnbihmaXhIZWFkZXIuc3R5bGUsIHtcblx0XHRcdFx0ZGlzcGxheTogJ2ZsZXgnLFxuXHRcdFx0XHRmbGV4RGlyZWN0aW9uOiAnY29sdW1uJyxcblx0XHRcdFx0YWxpZ25JdGVtczogJ3N0cmV0Y2gnLFxuXHRcdFx0XHRwYWRkaW5nOiAnMC41ZW0gMCcsXG5cdFx0XHRcdGJvcmRlckJvdHRvbTogJzFweCBzb2xpZCB2YXIoLS1kaXZpZGVyLWNvbG9yKScsXG5cdFx0XHRcdGN1cnNvcjogJ3BvaW50ZXInLFxuXHRcdFx0fSk7XG5cblx0XHRcdC8vIFx1MjUwMFx1MjUwMCBDcmVhdGUgYSBzaW5nbGUgZmxleFx1MjAxMHJvdyBpbnNpZGUgdGhlIHN1bW1hcnkgZm9yIHRpdGxlK2ljb24gXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXG5cdFx0XHRjb25zdCBmaXhIZWFkZXJSb3cgPSBmaXhIZWFkZXIuY3JlYXRlRGl2KHtcblx0XHRcdFx0YXR0cjoge1xuXHRcdFx0XHRcdHN0eWxlOiBgXG5cdFx0XHRkaXNwbGF5OiBmbGV4O1xuXHRcdFx0anVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuO1xuXHRcdFx0YWxpZ24taXRlbXM6IGZsZXgtZW5kO1xuXHRcdFx0YCxcblx0XHRcdFx0fSxcblx0XHRcdH0pO1xuXG5cdFx0XHQvLyBcdTI1MDBcdTI1MDAgTGVmdCBzaWRlOiB0aXRsZSArIGRlc2NyaXB0aW9uIGJsb2NrIFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFxuXHRcdFx0Y29uc3QgZml4VGl0bGVCbG9jayA9IGZpeEhlYWRlclJvdy5jcmVhdGVEaXYoe1xuXHRcdFx0XHRhdHRyOiB7IHN0eWxlOiAnZGlzcGxheTogZmxleDsgZmxleC1kaXJlY3Rpb246IGNvbHVtbjsnIH1cblx0XHRcdH0pO1xuXHRcdFx0Zml4VGl0bGVCbG9jay5jcmVhdGVFbCgnaDUnLCB7IHRleHQ6ICdGaXggWW91ciBWYXVsdCcgfSk7XG5cdFx0XHRmaXhUaXRsZUJsb2NrLmNyZWF0ZUVsKCdkaXYnLCB7XG5cdFx0XHRcdHRleHQ6ICdGaXggYW5kIGJyb2tlbiwgZGVsZXRlZCwgb3IgbWlzcGxhY2VkIGZpbGVzIGluIHlvdXIgdG9vbGtpdC4nLFxuXHRcdFx0XHRjbHM6ICdzZXR0aW5nLWl0ZW0tZGVzY3JpcHRpb24nLFxuXHRcdFx0XHRhdHRyOiB7IHN0eWxlOiAnbWFyZ2luLXRvcDogMC4yNWVtOycgfSxcblx0XHRcdH0pO1xuXG5cdFx0XHQvLyBcdTI1MDBcdTI1MDAgUmlnaHQgc2lkZTogc3RhdGljIHRvZ2dsZSBpY29uIChyb3RhdGVzIGluIHBsYWNlIG9ubHkpIFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFxuXHRcdFx0Y29uc3QgZml4VG9nZ2xlSWNvbiA9IGZpeEhlYWRlclJvdy5jcmVhdGVFbCgnc3BhbicsIHsgdGV4dDogJ1ZWJywgY2xzOiAndmstdG9nZ2xlLWljb24nIH0pO1xuXHRcdFx0T2JqZWN0LmFzc2lnbihmaXhUb2dnbGVJY29uLnN0eWxlLCB7XG5cdFx0XHRcdGZvbnRXZWlnaHQ6ICdib2xkJyxcblx0XHRcdFx0ZGlzcGxheTogJ2lubGluZS1ibG9jaycsXG5cdFx0XHRcdHRyYW5zaXRpb246ICd0cmFuc2Zvcm0gMC4ycyBlYXNlJyxcblx0XHRcdFx0dHJhbnNmb3JtT3JpZ2luOiAnNTAlIDUwJScsIC8vIFJvdGF0ZSBhcm91bmQgaXRzIG93biBjZW50ZXJcblx0XHRcdFx0dXNlclNlbGVjdDogJ25vbmUnLFxuXHRcdFx0XHR0cmFuc2Zvcm06IGZpeERldGFpbHMub3BlbiA/ICdyb3RhdGUoMGRlZyknIDogJ3JvdGF0ZSgxODBkZWcpJyxcblx0XHRcdH0pO1xuXHRcdFx0Zml4RGV0YWlscy5vbnRvZ2dsZSA9ICgpID0+IHtcblx0XHRcdFx0Zml4VG9nZ2xlSWNvbi5hZGRDbGFzcyhcInZ2LXJvdGF0ZWRcIik7XG5cdFx0XHR9O1xuXG5cdFx0XHQvLyBcdTI1MDBcdTI1MDBcdTI1MDAgQm9keSAoc2FtZSBhcyBiZWZvcmUsIGp1c3QgaW5kZW50ZWQgdW5kZXIgPGRldGFpbHM+KSBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcblx0XHRcdGNvbnN0IGZpeEJvZHkgPSBmaXhEZXRhaWxzLmNyZWF0ZURpdih7IGNsczogJ3ZrLXNlY3Rpb24tYm9keScgfSk7XG5cdFx0XHRmaXhCb2R5LmFkZENsYXNzKFwidnYtcGwtbWRcIik7XG5cblx0XHRcdC8vIFx1MjUwMFx1MjUwMCBCdXR0b24gKyB3YXJuaW5nIHJvdyBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcblx0XHRcdGNvbnN0IGZpeEJ1dHRvblJvdyA9IGZpeEJvZHkuY3JlYXRlRGl2KCk7XG5cdFx0XHRmaXhCdXR0b25Sb3cuYWRkQ2xhc3MoXCJ2di1jaGVja2JveC1yb3dcIiwgXCJ2di1qdXN0aWZ5LWJldHdlZW5cIik7XG5cblx0XHRcdGNvbnN0IHdhcm5pbmdDb250YWluZXIgPSBmaXhCdXR0b25Sb3cuY3JlYXRlRGl2KCk7XG5cdFx0XHR0aGlzLmZvcmNlV2FybmluZ0VsID0gd2FybmluZ0NvbnRhaW5lcjtcblxuXHRcdFx0bGV0IGluc3RhbGxlZFZlcnNpb25TdHIgPSAnJztcblx0XHRcdHRyeSB7XG5cdFx0XHRcdGNvbnN0IHZlcnNpb25GaWxlID0gYXdhaXQgdGhpcy5wbHVnaW4uYXBwLnZhdWx0LmFkYXB0ZXIucmVhZCgnLnZlcnNpb24uanNvbicpO1xuXHRcdFx0XHRjb25zdCBwYXJzZWQgPSBKU09OLnBhcnNlKHZlcnNpb25GaWxlKTtcblx0XHRcdFx0aW5zdGFsbGVkVmVyc2lvblN0ciA9IChwYXJzZWQudmVyc2lvbiA/PyAnJykudHJpbSgpO1xuXHRcdFx0fSBjYXRjaCB7XG5cdFx0XHRcdGluc3RhbGxlZFZlcnNpb25TdHIgPSAnJztcblx0XHRcdH1cblxuXHRcdFx0Y29uc3QgbGF0ZXN0VmVyc2lvblN0ciA9ICh0aGlzLnBsdWdpbi5zZXR0aW5ncy5sYXRlc3RUb29sa2l0VmVyc2lvbiA/PyAnJykudHJpbSgpO1xuXG5cdFx0XHRpZiAoaW5zdGFsbGVkVmVyc2lvblN0ciAmJiBsYXRlc3RWZXJzaW9uU3RyICYmIGluc3RhbGxlZFZlcnNpb25TdHIgIT09IGxhdGVzdFZlcnNpb25TdHIpIHtcblx0XHRcdFx0Y29uc3Qgd2FybiA9IHdhcm5pbmdDb250YWluZXIuY3JlYXRlRWwoJ2RpdicsIHtcblx0XHRcdFx0XHR0ZXh0OiBgXHUyNkEwXHVGRTBGIE5ldyB2ZXJzaW9uIGF2YWlsYWJsZSAoJHtpbnN0YWxsZWRWZXJzaW9uU3RyfSBcdTIxOTIgJHtsYXRlc3RWZXJzaW9uU3RyfSkgXHUyMDE0IHVzZSByZWd1bGFyIHVwZGF0ZSBpbnN0ZWFkYCxcblx0XHRcdFx0fSk7XG5cdFx0XHRcdHdhcm4uYWRkQ2xhc3MoXCJ2di1zbWFsbFwiLCBcInZ2LW11dGVkXCIsIFwidnYtaXRhbGljXCIpO1xuXHRcdFx0XHR3YXJuLnNldEF0dHIoXG5cdFx0XHRcdFx0J3RpdGxlJyxcblx0XHRcdFx0XHQnRm9yY2UgdXBkYXRpbmcgd2hpbGUgYSBuZXcgdmVyc2lvbiBpcyBhdmFpbGFibGUgbWF5IHNraXAgaW1wb3J0YW50IGNoYW5nZXMuJ1xuXHRcdFx0XHQpO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBcdTI3QTFcdUZFMEYgUmlnaHQgc2lkZTogYWN0aW9uIGJ1dHRvbnNcblx0XHRcdGNvbnN0IGJ1dHRvbkdyb3VwID0gZml4QnV0dG9uUm93LmNyZWF0ZURpdigpO1xuXHRcdFx0YnV0dG9uR3JvdXAuYWRkQ2xhc3MoXCJzZXR0aW5ncy1idXR0b25yb3dcIik7XG5cblx0XHRcdGJ1dHRvbkdyb3VwXG5cdFx0XHRcdC5jcmVhdGVFbChcImJ1dHRvblwiLCB7IHRleHQ6IFwiRm9yY2UgVXBkYXRlIFZhdWx0XCIsIGNsczogXCJtb2QtY3RhXCIgfSlcblx0XHRcdFx0Lm9uY2xpY2sgPSBhc3luYyAoKSA9PiB7XG5cdFx0XHRcdFx0Ly8gZmlyc3QgZG8geW91ciBub3JtYWwgXHUyMDFDZm9yY2UgdXBkYXRlXHUyMDFEIGZsb3c6XG5cdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uZm9yY2VVcGRhdGVQcmV2aWV3QW5kQ29uZmlybSgpO1xuXHRcdFx0XHRcdC8vIHRoZW4sIGlmIHRoZSB1c2VyIGFza2VkIGZvciBhIHJlLXBhcnNlLCBkbyB0aGF0OlxuXHRcdFx0XHRcdGlmICh0aGlzLnBsdWdpbi5zZXR0aW5ncy5yZXBhcnNlR2FtZXNldHMpIHtcblx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnJlZnJlc2hHYW1lU2V0RGF0YSgpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fTtcblxuXG5cdFx0XHRidXR0b25Hcm91cC5jcmVhdGVFbCgnYnV0dG9uJywge1xuXHRcdFx0XHR0ZXh0OiAnVW5kbyBVcGRhdGUnXG5cdFx0XHR9KS5vbmNsaWNrID0gYXN5bmMgKCkgPT4ge1xuXHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi51bmRvRm9yY2VVcGRhdGUoKTtcblx0XHRcdH07XG5cblxuXHRcdFx0Ly8gXHUyNTAwXHUyNTAwIFRpbWVzdGFtcCByb3cgXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXG5cdFx0XHRjb25zdCBmaXhUaW1lc3RhbXBSb3cgPSBmaXhCb2R5LmNyZWF0ZURpdigpO1xuXHRcdFx0T2JqZWN0LmFzc2lnbihmaXhUaW1lc3RhbXBSb3cuc3R5bGUsIHtcblx0XHRcdFx0dGV4dEFsaWduOiAncmlnaHQnLFxuXHRcdFx0XHRmb250U2l6ZTogJzExcHgnLFxuXHRcdFx0XHRjb2xvcjogJ3ZhcigtLXRleHQtbXV0ZWQpJyxcblx0XHRcdFx0bWFyZ2luVG9wOiAnMC4yNWVtJ1xuXHRcdFx0fSk7XG5cdFx0XHRmaXhUaW1lc3RhbXBSb3cudGV4dENvbnRlbnQgPSBgTGFzdCBmb3JjZWQ6ICR7dGhpcy5wbHVnaW4uc2V0dGluZ3MubGFzdEZvcmNlVXBkYXRlXG5cdFx0XHRcdD8gbmV3IERhdGUodGhpcy5wbHVnaW4uc2V0dGluZ3MubGFzdEZvcmNlVXBkYXRlKS50b0xvY2FsZVN0cmluZygpXG5cdFx0XHRcdDogJ05vdCBmb3JjZWQgeWV0J1xuXHRcdFx0XHR9YDtcblxuXHRcdFx0Ly8gXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwIGRpdmlkZXIgXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXG5cdFx0XHRmaXhCb2R5LmNyZWF0ZUVsKCdkaXYnLCB7XG5cdFx0XHRcdGF0dHI6IHtcblx0XHRcdFx0XHRzdHlsZTogJ2JvcmRlci10b3A6IDFweCBzb2xpZCB2YXIoLS1kaXZpZGVyLWNvbG9yKTsgbWFyZ2luOiAwLjc1ZW0gMDsnXG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXG5cdFx0XHQvLyBcdTI1MDBcdTI1MDBcdTI1MDAgTmV3IFx1MjAxQ3JlLXBhcnNlIGdhbWVzZXRzXHUyMDFEIHRvZ2dsZSBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcblx0XHRcdGNvbnN0IHJlcGFyc2VSb3cgPSBmaXhCb2R5LmNyZWF0ZURpdigpO1xuXHRcdFx0cmVwYXJzZVJvdy5hZGRDbGFzcyhcInZ2LW10LXNtXCIpO1xuXHRcdFx0bmV3IFNldHRpbmcocmVwYXJzZVJvdylcblx0XHRcdFx0LnNldE5hbWUoXCJSZS1wYXJzZSBHYW1lIFNldHMgT24gRm9yY2UgVXBkYXRlXCIpXG5cdFx0XHRcdC5zZXREZXNjKFxuXHRcdFx0XHRcdFwiQWxzbyByZS1wYXJzZSB5b3VyIHJ1bGVzZXQgY29tcGVuZGl1bSBhbmQgcmVmZXJlbmNlIHNldHMuIFRoaXMgd29uJ3QgZGVsZXRlIGFueSBmaWxlcyBpbiB0aGUgQ29tcGVuZGl1bSBvciBSZWZlcmVuY2UgZm9sZGVycy5cIlxuXHRcdFx0XHQpXG5cblx0XHRcdFx0LmFkZFRvZ2dsZSgodG9nKSA9PlxuXHRcdFx0XHRcdHRvZ1xuXHRcdFx0XHRcdFx0LnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLnJlcGFyc2VHYW1lc2V0cylcblx0XHRcdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcblx0XHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MucmVwYXJzZUdhbWVzZXRzID0gdmFsdWU7XG5cdFx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuXHRcdFx0XHRcdFx0fSlcblx0XHRcdFx0KTtcblxuXHRcdFx0Ly8gXHUyNTAwXHUyNTAwXHUyNTAwIEJBQ0tVUCBTRUNUSU9OIFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFxuXHRcdFx0Y29uc3QgYmFja3VwRGV0YWlscyA9IGNvbnRhaW5lckVsLmNyZWF0ZUVsKCdkZXRhaWxzJywgeyBjbHM6ICd2ay1zZWN0aW9uJyB9KTtcblxuXHRcdFx0Ly8gU3VtbWFyeSBibG9jazogc3RhY2tlZCBjb2x1bW4gbGF5b3V0XG5cdFx0XHRjb25zdCBiYWNrdXBTdW1tYXJ5ID0gYmFja3VwRGV0YWlscy5jcmVhdGVFbCgnc3VtbWFyeScsIHsgY2xzOiAndmstc2VjdGlvbi1oZWFkZXInIH0pO1xuXG5cdFx0XHRPYmplY3QuYXNzaWduKGJhY2t1cFN1bW1hcnkuc3R5bGUsIHtcblx0XHRcdFx0ZGlzcGxheTogJ2ZsZXgnLFxuXHRcdFx0XHRmbGV4RGlyZWN0aW9uOiAnY29sdW1uJyxcblx0XHRcdFx0YWxpZ25JdGVtczogJ3N0cmV0Y2gnLFxuXHRcdFx0XHRwYWRkaW5nOiAnMC41ZW0gMCcsXG5cdFx0XHRcdGJvcmRlckJvdHRvbTogJzFweCBzb2xpZCB2YXIoLS1kaXZpZGVyLWNvbG9yKScsXG5cdFx0XHRcdGN1cnNvcjogJ3BvaW50ZXInLFxuXHRcdFx0fSk7XG5cblx0XHRcdC8vIENyZWF0ZSB0aXRsZSArIGljb24gcm93XG5cdFx0XHRjb25zdCBiYWNrdXBUaXRsZVJvdyA9IGJhY2t1cFN1bW1hcnkuY3JlYXRlRGl2KHtcblx0XHRcdFx0YXR0cjoge1xuXHRcdFx0XHRcdHN0eWxlOiBgXG5cdFx0XHRkaXNwbGF5OiBmbGV4O1xuXHRcdFx0anVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuO1xuXHRcdFx0YWxpZ24taXRlbXM6IGZsZXgtZW5kO1xuXHRcdFx0YCxcblx0XHRcdFx0fSxcblx0XHRcdH0pO1xuXG5cdFx0XHQvLyBMZWZ0OiBoZWFkZXIgYmxvY2sgKHRpdGxlICsgZGVzY3JpcHRpb24gdG9nZXRoZXIpIFxuXHRcdFx0Y29uc3QgdGl0bGVCbG9jayA9IGJhY2t1cFRpdGxlUm93LmNyZWF0ZURpdih7XG5cdFx0XHRcdGF0dHI6IHsgc3R5bGU6ICdkaXNwbGF5OiBmbGV4OyBmbGV4LWRpcmVjdGlvbjogY29sdW1uOycgfVxuXHRcdFx0fSk7XG5cblx0XHRcdHRpdGxlQmxvY2suY3JlYXRlRWwoJ2g1JywgeyB0ZXh0OiAnVmF1bHQgQmFja3VwcycgfSk7XG5cblx0XHRcdHRpdGxlQmxvY2suY3JlYXRlRWwoJ2RpdicsIHtcblx0XHRcdFx0dGV4dDogJ1RoZSBUb29sa2l0IHdpbGwgYmFjayB1cCB5b3VyIHZhdWx0IGF1dG9tYXRpY2FsbHkgYmVmb3JlIHVwZGF0ZXMuIFlvdSBjYW4gYWxzbyBiYWNrIHVwIG1hbnVhbGx5IGFueXRpbWUuJyxcblx0XHRcdFx0Y2xzOiAnc2V0dGluZy1pdGVtLWRlc2NyaXB0aW9uJyxcblx0XHRcdFx0YXR0cjogeyBzdHlsZTogJ21hcmdpbi10b3A6IDAuMjVlbTsnIH0sXG5cdFx0XHR9KTtcblxuXHRcdFx0Ly8gUmlnaHQ6IGNvbGxhcHNlIGljb25cblx0XHRcdGNvbnN0IGJhY2t1cFZ2SWNvbiA9IGJhY2t1cFRpdGxlUm93LmNyZWF0ZUVsKCdzcGFuJywgeyB0ZXh0OiAnVlYnLCBjbHM6ICd2ay10b2dnbGUtaWNvbicgfSk7XG5cblx0XHRcdE9iamVjdC5hc3NpZ24oYmFja3VwVnZJY29uLnN0eWxlLCB7XG5cdFx0XHRcdGZvbnRXZWlnaHQ6ICdib2xkJyxcblx0XHRcdFx0ZGlzcGxheTogJ2lubGluZS1ibG9jaycsXG5cdFx0XHRcdHRyYW5zaXRpb246ICd0cmFuc2Zvcm0gMC4ycyBlYXNlJyxcblx0XHRcdFx0dHJhbnNmb3JtT3JpZ2luOiAnNTAlIDUwJScsXG5cdFx0XHRcdHVzZXJTZWxlY3Q6ICdub25lJyxcblx0XHRcdFx0dHJhbnNmb3JtOiBiYWNrdXBEZXRhaWxzLm9wZW4gPyAncm90YXRlKDBkZWcpJyA6ICdyb3RhdGUoMTgwZGVnKScsXG5cdFx0XHR9KTtcblxuXHRcdFx0Ly8gQ29sbGFwc2Ugcm90YXRpb24gYmVoYXZpb3Jcblx0XHRcdGJhY2t1cERldGFpbHMub250b2dnbGUgPSAoKSA9PiB7XG5cdFx0XHRcdGJhY2t1cFZ2SWNvbi5hZGRDbGFzcyhcInZ2LXJvdGF0ZWRcIik7XG5cdFx0XHR9O1xuXG5cdFx0XHQvLyAyKSBCb2R5XG5cdFx0XHRjb25zdCBiYWNrdXBCb2R5ID0gYmFja3VwRGV0YWlscy5jcmVhdGVEaXYoeyBjbHM6ICd2ay1zZWN0aW9uLWJvZHknIH0pO1xuXHRcdFx0YmFja3VwQm9keS5hZGRDbGFzcyhcInZ2LXBsLW1kXCIpO1xuXG5cdFx0XHRuZXcgU2V0dGluZyhiYWNrdXBCb2R5KVxuXHRcdFx0XHQuc2V0TmFtZSgnQXV0by1CYWNrdXAgQmVmb3JlIFVwZGF0ZScpXG5cdFx0XHRcdC5zZXREZXNjKCdDcmVhdGUgYSBmdWxsIC56aXAgb2YgdGhlIHZhdWx0IGJlZm9yZSBhcHBseWluZyB2ZXJzaW9uIHVwZGF0ZXMuIEZvcmNlIHVwZGF0ZXMgd2lsbCBvbmx5IGJhY2sgdXAgdGhlIGZpbGVzIHRoYXQgd2lsbCBiZSBtb2RpZmllZCBvciByZW1vdmVkLicpXG5cdFx0XHRcdC5hZGRUb2dnbGUodCA9PlxuXHRcdFx0XHRcdHRcblx0XHRcdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5hdXRvQmFja3VwQmVmb3JlVXBkYXRlKVxuXHRcdFx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jIHYgPT4ge1xuXHRcdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5hdXRvQmFja3VwQmVmb3JlVXBkYXRlID0gdjtcblx0XHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG5cdFx0XHRcdFx0XHR9KVxuXHRcdFx0XHQpO1xuXG5cdFx0XHRuZXcgU2V0dGluZyhiYWNrdXBCb2R5KVxuXHRcdFx0XHQuc2V0TmFtZSgnTWFudWFsIEJhY2t1cCcpXG5cdFx0XHRcdC5zZXREZXNjKCdJbW1lZGlhdGVseSBjcmVhdGUgYSB6aXAgYmFja3VwIG9mIHlvdXIgdmF1bHQnKVxuXHRcdFx0XHQuYWRkQnV0dG9uKGIgPT5cblx0XHRcdFx0XHRiXG5cdFx0XHRcdFx0XHQuc2V0QnV0dG9uVGV4dCgnQmFja3VwIFZhdWx0IE5vdycpXG5cdFx0XHRcdFx0XHQuc2V0Q3RhKClcblx0XHRcdFx0XHRcdC5vbkNsaWNrKGFzeW5jICgpID0+IHtcblx0XHRcdFx0XHRcdFx0Y29uc3QgcGF0aCA9IGF3YWl0IHRoaXMucGx1Z2luLmJhY2t1cE1hbmFnZXIuYmFja3VwVmF1bHRUb1ppcCgnbWFudWFsJyk7XG5cdFx0XHRcdFx0XHRcdG5ldyBOb3RpY2UoYEJhY2t1cCBjcmVhdGVkOiAke3BhdGh9YCk7XG5cdFx0XHRcdFx0XHR9KVxuXHRcdFx0XHQpO1xuXG5cdFx0XHRuZXcgU2V0dGluZyhiYWNrdXBCb2R5KVxuXHRcdFx0XHQuc2V0TmFtZSgnT3BlbiBCYWNrdXBzIEZvbGRlcicpXG5cdFx0XHRcdC5zZXREZXNjKCdPcGVuIHRoZSBiYWNrdXBzIGZvbGRlciBvbiBkaXNrLiBNYWNPUzogQ2FudCBzZWUgaXQ/IEhpdCBTaGlmdCtDbWQrKHBlcmlvZCkuJylcblx0XHRcdFx0LmFkZEJ1dHRvbihiID0+XG5cdFx0XHRcdFx0YlxuXHRcdFx0XHRcdFx0LnNldEJ1dHRvblRleHQoJ09wZW4gRm9sZGVyJylcblx0XHRcdFx0XHRcdC5vbkNsaWNrKGFzeW5jICgpID0+IHtcblx0XHRcdFx0XHRcdFx0dHJ5IHtcblxuXHRcdFx0XHRcdFx0XHRcdGNvbnN0IHZhdWx0QmFzZVBhdGg6IHN0cmluZyA9ICh0aGlzLnBsdWdpbi5hcHAudmF1bHQuYWRhcHRlciBhcyBhbnkpLmdldEJhc2VQYXRoKCk7XG5cblx0XHRcdFx0XHRcdFx0XHRjb25zdCBiYWNrdXBGb2xkZXJQYXRoID0gcGF0aC5qb2luKFxuXHRcdFx0XHRcdFx0XHRcdFx0dmF1bHRCYXNlUGF0aCxcblx0XHRcdFx0XHRcdFx0XHRcdCcudmF1bHQtYmFja3Vwcydcblx0XHRcdFx0XHRcdFx0XHQpO1xuXG5cdFx0XHRcdFx0XHRcdFx0Y29uc3QgeyBzaGVsbCB9ID0gKHdpbmRvdyBhcyBhbnkpLnJlcXVpcmUoJ2VsZWN0cm9uJyk7XG5cdFx0XHRcdFx0XHRcdFx0Y29uc3QgcmVzdWx0ID0gYXdhaXQgc2hlbGwub3BlblBhdGgoYmFja3VwRm9sZGVyUGF0aCk7XG5cdFx0XHRcdFx0XHRcdFx0aWYgKHR5cGVvZiByZXN1bHQgPT09ICdzdHJpbmcnICYmIHJlc3VsdC5sZW5ndGggPiAwKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRjb25zb2xlLmVycm9yKCdcdTI3NEMgc2hlbGwub3BlblBhdGggZXJyb3I6JywgcmVzdWx0KTtcblx0XHRcdFx0XHRcdFx0XHRcdG5ldyBOb3RpY2UoJ0NvdWxkIG5vdCBvcGVuIGJhY2t1cHMgZm9sZGVyLiBTZWUgY29uc29sZS4nKTtcblx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdH0gY2F0Y2ggKGVycikge1xuXHRcdFx0XHRcdFx0XHRcdGNvbnNvbGUuZXJyb3IoJ1x1Mjc0QyBDb3VsZCBub3Qgb3BlbiBiYWNrdXBzIGZvbGRlcjonLCBlcnIpO1xuXHRcdFx0XHRcdFx0XHRcdG5ldyBOb3RpY2UoJ0NvdWxkIG5vdCBvcGVuIGJhY2t1cHMgZm9sZGVyLiBTZWUgY29uc29sZS4nKTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fSlcblx0XHRcdFx0KTtcblx0XHRcdGJhY2t1cEJvZHkuY3JlYXRlRWwoJ2RpdicsIHtcblx0XHRcdFx0YXR0cjoge1xuXHRcdFx0XHRcdHN0eWxlOiAnYm9yZGVyLXRvcDogMXB4IHNvbGlkIHZhcigtLWRpdmlkZXItY29sb3IpOyBtYXJnaW4tdG9wOiAxLjVlbTsnXG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXG5cblxuXHRcdFx0Ly8gXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwIENVU1RPTSBVUERBVEVTIFNFQ1RJT04gXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXG5cdFx0XHRjb25zdCBjdXN0b21pemF0aW9uRGV0YWlscyA9IGNvbnRhaW5lckVsLmNyZWF0ZUVsKCdkZXRhaWxzJywgeyBjbHM6ICd2ay1zZWN0aW9uJyB9KTtcblxuXHRcdFx0Y29uc3QgY3VzdG9taXphdGlvblN1bW1hcnkgPSBjdXN0b21pemF0aW9uRGV0YWlscy5jcmVhdGVFbCgnc3VtbWFyeScsIHsgY2xzOiAndmstc2VjdGlvbi1oZWFkZXInIH0pO1xuXG5cdFx0XHRPYmplY3QuYXNzaWduKGN1c3RvbWl6YXRpb25TdW1tYXJ5LnN0eWxlLCB7XG5cdFx0XHRcdGRpc3BsYXk6ICdmbGV4Jyxcblx0XHRcdFx0ZmxleERpcmVjdGlvbjogJ2NvbHVtbicsXG5cdFx0XHRcdGFsaWduSXRlbXM6ICdmbGV4LXN0YXJ0Jyxcblx0XHRcdFx0cGFkZGluZzogJzAuNWVtIDAnLFxuXHRcdFx0XHRjdXJzb3I6ICdwb2ludGVyJyxcblx0XHRcdH0pO1xuXG5cdFx0XHRjb25zdCB0aXRsZVJvdyA9IGN1c3RvbWl6YXRpb25TdW1tYXJ5LmNyZWF0ZURpdih7XG5cdFx0XHRcdGF0dHI6IHtcblx0XHRcdFx0XHRzdHlsZTogYFxuXHRcdFx0ZGlzcGxheTogZmxleDtcblx0XHRcdHdpZHRoOiAxMDAlO1xuXHRcdFx0anVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuO1xuXHRcdFx0YWxpZ24taXRlbXM6IGZsZXgtZW5kO1xuXHRcdFx0YCxcblx0XHRcdFx0fSxcblx0XHRcdH0pO1xuXG5cdFx0XHRjb25zdCBjdXN0b21pemF0aW9uVGl0bGVCbG9jayA9IHRpdGxlUm93LmNyZWF0ZURpdih7XG5cdFx0XHRcdGF0dHI6IHsgc3R5bGU6ICdkaXNwbGF5OiBmbGV4OyBmbGV4LWRpcmVjdGlvbjogY29sdW1uOycgfVxuXHRcdFx0fSk7XG5cblx0XHRcdGNvbnN0IGg1ID0gY3VzdG9taXphdGlvblRpdGxlQmxvY2suY3JlYXRlRWwoJ2g1Jyk7XG5cdFx0XHRoNS5hcHBlbmRUZXh0KCdDdXN0b20gRmlsZSBNYW5hZ2VtZW50ICcpO1xuXG5cdFx0XHRjdXN0b21pemF0aW9uVGl0bGVCbG9jay5jcmVhdGVFbCgnZGl2Jywge1xuXHRcdFx0XHR0ZXh0OiAnU2tpcCB1cGRhdGVzIG9uIGNlcnRhaW4gZmlsZXMgb3IgcmVtYXAgcmVsb2NhdGVkIFRvb2xraXQgZmlsZXMgc28gdGhleSBjYW4gdXBkYXRlLicsXG5cdFx0XHRcdGNsczogJ3NldHRpbmctaXRlbS1kZXNjcmlwdGlvbicsXG5cdFx0XHRcdGF0dHI6IHsgc3R5bGU6ICdtYXJnaW4tdG9wOiAwLjI1ZW07JyB9LFxuXHRcdFx0fSk7XG5cblx0XHRcdGNvbnN0IGN1c3RvbVZ2SWNvbiA9IHRpdGxlUm93LmNyZWF0ZUVsKCdzcGFuJywgeyB0ZXh0OiAnVlYnLCBjbHM6ICd2ay10b2dnbGUtaWNvbicgfSk7XG5cblx0XHRcdE9iamVjdC5hc3NpZ24oY3VzdG9tVnZJY29uLnN0eWxlLCB7XG5cdFx0XHRcdGZvbnRXZWlnaHQ6ICdib2xkJyxcblx0XHRcdFx0dHJhbnNpdGlvbjogJ3RyYW5zZm9ybSAwLjJzIGVhc2UnLFxuXHRcdFx0XHR0cmFuc2Zvcm1PcmlnaW46ICc1MCUgNTAlJyxcblx0XHRcdFx0dXNlclNlbGVjdDogJ25vbmUnLFxuXHRcdFx0XHR0cmFuc2Zvcm06IGN1c3RvbWl6YXRpb25EZXRhaWxzLm9wZW4gPyAncm90YXRlKDBkZWcpJyA6ICdyb3RhdGUoMTgwZGVnKScsXG5cdFx0XHR9KTtcblxuXHRcdFx0Y3VzdG9taXphdGlvbkRldGFpbHMub250b2dnbGUgPSAoKSA9PiB7XG5cdFx0XHRcdGN1c3RvbVZ2SWNvbi5hZGRDbGFzcyhcInZ2LXJvdGF0ZWRcIik7XG5cdFx0XHR9O1xuXG5cdFx0XHRjb25zdCBjdXN0b21pemF0aW9uQm9keVdyYXBwZXIgPSBjdXN0b21pemF0aW9uRGV0YWlscy5jcmVhdGVEaXYoe1xuXHRcdFx0XHRhdHRyOiB7IHN0eWxlOiAncGFkZGluZy1sZWZ0OiAxZW07IHBhZGRpbmctcmlnaHQ6IDFlbTsnIH1cblx0XHRcdH0pO1xuXHRcdFx0Y29uc3QgY3VzdG9taXphdGlvbkJvZHkgPSBjdXN0b21pemF0aW9uQm9keVdyYXBwZXIuY3JlYXRlRGl2KHsgY2xzOiAndmstc2VjdGlvbi1ib2R5JyB9KTtcblxuXG5cblx0XHRcdC8vIFx1MjUwMFx1MjUwMFx1MjUwMCBTS0lQLUxJU1QgUEFORUwgXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXG5cblx0XHRcdGNvbnN0IHNraXBTZWN0aW9uID0gY3VzdG9taXphdGlvbkJvZHkuY3JlYXRlRGl2KCk7XG5cblx0XHRcdC8vIDEuIENyZWF0ZSBzZXR0aW5nIGJsb2NrIChtYXRjaGVzIE9ic2lkaWFuIG5hdGl2ZSBVSSBsYXlvdXQpXG5cdFx0XHRjb25zdCBzZXR0aW5nSXRlbSA9IHNraXBTZWN0aW9uLmNyZWF0ZURpdih7IGNsczogJ3NldHRpbmctaXRlbScgfSk7XG5cblx0XHRcdC8vIDIuIExlZnQgY29sdW1uOiB0aXRsZSArIGRlc2NyaXB0aW9uXG5cdFx0XHRjb25zdCBpbmZvID0gc2V0dGluZ0l0ZW0uY3JlYXRlRGl2KHsgY2xzOiAnc2V0dGluZy1pdGVtLWluZm8nIH0pO1xuXHRcdFx0aW5mby5jcmVhdGVEaXYoeyB0ZXh0OiAnU2tpcCBUb29sa2l0IEl0ZW1zJywgY2xzOiAnc2V0dGluZy1pdGVtLW5hbWUnIH0pO1xuXHRcdFx0aW5mby5jcmVhdGVEaXYoe1xuXHRcdFx0XHR0ZXh0OiAnRmlsZXMgbGlzdGVkIGhlcmUgd2lsbCBiZSBpZ25vcmVkIGR1cmluZyB0b29sa2l0IHVwZGF0ZXMuJyxcblx0XHRcdFx0Y2xzOiAnc2V0dGluZy1pdGVtLWRlc2NyaXB0aW9uJyxcblx0XHRcdH0pO1xuXG5cdFx0XHQvLyAzLiBSaWdodCBjb2x1bW46IGRyb3Bkb3duICsgYnV0dG9uXG5cdFx0XHRjb25zdCBjb250cm9sID0gc2V0dGluZ0l0ZW0uY3JlYXRlRGl2KHsgY2xzOiAnc2V0dGluZy1pdGVtLWNvbnRyb2wnIH0pO1xuXG5cdFx0XHRjb25zdCBkcm9wZG93biA9IG5ldyBEcm9wZG93bkNvbXBvbmVudChjb250cm9sKTtcblx0XHRcdGRyb3Bkb3duLnNlbGVjdEVsLmFkZENsYXNzKFwiZHJvcGRvd253aWR0aFwiKTtcblx0XHRcdGRyb3Bkb3duLmFkZE9wdGlvbignJywgJ1NlbGVjdCBhbiBpdGVtXHUyMDI2Jyk7XG5cdFx0XHR0aGlzLnBsdWdpbi5tYW5pZmVzdENhY2hlLmZpbGVzXG5cdFx0XHRcdC5maWx0ZXIoZiA9PiAhZi5vcHRpb25hbClcblx0XHRcdFx0LmZvckVhY2goZiA9PiBkcm9wZG93bi5hZGRPcHRpb24oZi5wYXRoLCBmLmRpc3BsYXlOYW1lID8/IGYucGF0aC5zcGxpdCgnLycpLnBvcCgpISkpO1xuXHRcdFx0dGhpcy5wbHVnaW4ubWFuaWZlc3RDYWNoZS5mb2xkZXJzXG5cdFx0XHRcdC5maWx0ZXIoZiA9PiAhZi5vcHRpb25hbClcblx0XHRcdFx0LmZvckVhY2goZiA9PiBkcm9wZG93bi5hZGRPcHRpb24oZi5wYXRoLCAoZi5kaXNwbGF5TmFtZSA/PyBmLnBhdGguc3BsaXQoJy8nKS5wb3AoKSEpICsgJy8gKGZvbGRlciknKSk7XG5cblx0XHRcdG5ldyBCdXR0b25Db21wb25lbnQoY29udHJvbClcblx0XHRcdFx0LnNldEJ1dHRvblRleHQoJ0FkZCcpXG5cdFx0XHRcdC5zZXRDdGEoKVxuXHRcdFx0XHQub25DbGljayhhc3luYyAoKSA9PiB7XG5cdFx0XHRcdFx0Y29uc3Qga2V5ID0gZHJvcGRvd24uZ2V0VmFsdWUoKTtcblx0XHRcdFx0XHRpZiAoIWtleSkgcmV0dXJuIG5ldyBOb3RpY2UoJ1BpY2sgc29tZXRoaW5nIHRvIHNraXAuJyk7XG5cdFx0XHRcdFx0aWYgKCF0aGlzLnBsdWdpbi5zZXR0aW5ncy5jdXN0b21QYXRocy5zb21lKGMgPT4gYy5tYW5pZmVzdEtleSA9PT0ga2V5KSkge1xuXHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MuY3VzdG9tUGF0aHMucHVzaCh7IHZhdWx0UGF0aDoga2V5LCBtYW5pZmVzdEtleToga2V5LCBkb1VwZGF0ZTogZmFsc2UgfSk7XG5cdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcblx0XHRcdFx0XHRcdHJlbmRlclNraXBUYWJsZSgpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSk7XG5cblx0XHRcdC8vIDQuIFRhYmxlIHdyYXBwZXIgZm9yIHNraXBwZWQgaXRlbXNcblx0XHRcdGNvbnN0IHNraXBUYWJsZVdyYXBwZXIgPSBza2lwU2VjdGlvbi5jcmVhdGVEaXYoeyBjbHM6ICd2ay10YWJsZS13cmFwcGVyJywgYXR0cjogeyBzdHlsZTogJ21hcmdpbi10b3A6MC43NWVtJyB9IH0pO1xuXG5cdFx0XHRjb25zdCByZW5kZXJTa2lwVGFibGUgPSAoKSA9PiB7XG5cdFx0XHRcdHNraXBUYWJsZVdyYXBwZXIuZW1wdHkoKTtcblxuXHRcdFx0XHRjb25zdCBpdGVtcyA9IHRoaXMucGx1Z2luLnNldHRpbmdzLmN1c3RvbVBhdGhzLmZpbHRlcihjID0+ICFjLmRvVXBkYXRlKTtcblxuXHRcdFx0XHRpZiAoaXRlbXMubGVuZ3RoID09PSAwKSB7XG5cdFx0XHRcdFx0Ly8gTm8gdGFibGUgaWYgbm90aGluZyB0byBzaG93IFx1MjAxNCBqdXN0IGFuIGVtcHR5IHN0YXRlIG1lc3NhZ2Vcblx0XHRcdFx0XHRjb25zdCBlbXB0eU1zZyA9IHNraXBUYWJsZVdyYXBwZXIuY3JlYXRlRWwoJ2RpdicsIHsgdGV4dDogJ05vIGl0ZW1zIHNraXBwZWQuJyB9KTtcblx0XHRcdFx0XHRlbXB0eU1zZy5hZGRDbGFzcyhcInNldHRpbmdzLWVtcHR5bXNnXCIpO1xuXHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdC8vIFJlbmRlciB0YWJsZSBvbmx5IGlmIGl0ZW1zIGV4aXN0XG5cdFx0XHRcdGNvbnN0IHRhYmxlID0gc2tpcFRhYmxlV3JhcHBlci5jcmVhdGVFbCgndGFibGUnLCB7IGNsczogJ3NldHRpbmctdGFibGUnIH0pO1xuXG5cdFx0XHRcdGNvbnN0IGhlYWRlciA9IHRhYmxlLmNyZWF0ZVRIZWFkKCkuaW5zZXJ0Um93KCk7XG5cdFx0XHRcdGhlYWRlci5pbnNlcnRDZWxsKCkudGV4dENvbnRlbnQgPSAnU2tpcHBlZCBGaWxlcy9Gb2xkZXJzJztcblxuXHRcdFx0XHRjb25zdCBib2R5ID0gdGFibGUuY3JlYXRlVEJvZHkoKTtcblxuXHRcdFx0XHRpdGVtcy5mb3JFYWNoKChlbnRyeSkgPT4ge1xuXHRcdFx0XHRcdGNvbnN0IHJvdyA9IGJvZHkuaW5zZXJ0Um93KCk7XG5cdFx0XHRcdFx0Y29uc3QgY29udGVudENlbGwgPSByb3cuaW5zZXJ0Q2VsbCgpO1xuXHRcdFx0XHRcdGNvbnRlbnRDZWxsLmFkZENsYXNzKFwic2V0dGluZ3MtZmlsZXRhYmxlXCIpO1xuXG5cdFx0XHRcdFx0Y29udGVudENlbGwuY3JlYXRlU3Bhbih7IHRleHQ6IGVudHJ5Lm1hbmlmZXN0S2V5IH0pO1xuXG5cdFx0XHRcdFx0Y29uc3QgcmVtb3ZlTGluayA9IGNvbnRlbnRDZWxsLmNyZWF0ZUVsKCdhJywgeyB0ZXh0OiAnUmVtb3ZlIGVudHJ5JywgaHJlZjogJyMnIH0pO1xuXHRcdFx0XHRcdHJlbW92ZUxpbmsuYWRkQ2xhc3MoXCJzZXR0aW5ncy1yZW1vdmVsaW5rXCIpO1xuXHRcdFx0XHRcdHJlbW92ZUxpbmsub25jbGljayA9IGFzeW5jIChlKSA9PiB7XG5cdFx0XHRcdFx0XHRlLnByZXZlbnREZWZhdWx0KCk7XG5cdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5jdXN0b21QYXRocy5yZW1vdmUoZW50cnkpO1xuXHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG5cdFx0XHRcdFx0XHRyZW5kZXJTa2lwVGFibGUoKTtcblx0XHRcdFx0XHR9O1xuXHRcdFx0XHR9KTtcblx0XHRcdH07XG5cblx0XHRcdHJlbmRlclNraXBUYWJsZSgpO1xuXG5cdFx0XHQvLyBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDAgU3BhY2VyICYgRGl2aWRlciBCZWZvcmUgUmVtYXAgUGFuZWwgXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXG5cdFx0XHRjdXN0b21pemF0aW9uQm9keS5jcmVhdGVFbCgnZGl2Jywge1xuXHRcdFx0XHRhdHRyOiB7IHN0eWxlOiAnaGVpZ2h0OiAxZW07IGJvcmRlci10b3A6IDFweCBzb2xpZCB2YXIoLS1kaXZpZGVyLWNvbG9yKTsgbWFyZ2luOiAxZW0gMDsnIH1cblx0XHRcdH0pO1xuXG5cdFx0XHQvLyBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDAgUkVNQVAgUEFORUwgXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXG5cdFx0XHRjb25zdCByZW1hcFNlY3Rpb24gPSBjdXN0b21pemF0aW9uQm9keS5jcmVhdGVEaXYoKTtcblxuXG5cdFx0XHQvLyBTZXR0aW5nLXN0eWxlIHdyYXBwZXJcblx0XHRcdGNvbnN0IHJlbWFwU2V0dGluZyA9IHJlbWFwU2VjdGlvbi5jcmVhdGVEaXYoeyBjbHM6ICdzZXR0aW5nLWl0ZW0nIH0pO1xuXG5cdFx0XHQvLyBMZWZ0OiBoZWFkZXIgKyBkZXNjcmlwdGlvbiAodW5jaGFuZ2VkIHN0eWxlKVxuXHRcdFx0Y29uc3QgcmVtYXBJbmZvID0gcmVtYXBTZXR0aW5nLmNyZWF0ZURpdih7IGNsczogJ3NldHRpbmctaXRlbS1pbmZvJyB9KTtcblx0XHRcdHJlbWFwSW5mby5jcmVhdGVEaXYoeyB0ZXh0OiAnUmVtYXAgRmlsZSBQYXRocycsIGNsczogJ3NldHRpbmctaXRlbS1uYW1lJyB9KTtcblx0XHRcdHJlbWFwSW5mby5jcmVhdGVEaXYoe1xuXHRcdFx0XHR0ZXh0OiAnUmVtYXAgdG9vbGtpdCBmaWxlcyB2YXVsdCBwYXRocyBpZiB5b3UgY2hvc2UgdG8gbW92ZSBhbnl0aGluZy4gTW92aW5nIGZpbGVzIHdpdGhvdXQgcmVtYXBwaW5nIHdpbGwgcmVzdWx0IGluIGR1cGxpY2F0ZSBhbmQvb3Igb3V0LW9mLWRhdGUgZmlsZXMgYWZ0ZXIgdXBkYXRlLicsXG5cdFx0XHRcdGNsczogJ3NldHRpbmctaXRlbS1kZXNjcmlwdGlvbidcblx0XHRcdH0pO1xuXG5cdFx0XHQvLyBOZXcgZnVsbC13aWR0aCBibG9jayBiZWxvdyBmb3IgY29udHJvbHNcblx0XHRcdGNvbnN0IHJlbWFwQ29udHJvbEJsb2NrID0gcmVtYXBTZWN0aW9uLmNyZWF0ZURpdih7IGNsczogJ3ZrLWlubGluZS1hZGQtY29udHJvbHMnIH0pO1xuXHRcdFx0cmVtYXBDb250cm9sQmxvY2suYWRkQ2xhc3MoXCJzZXR0aW5ncy1yZW1hcGNvbnRyb2xcIik7XG5cblx0XHRcdGxldCByZW1hcERyb3A6IERyb3Bkb3duQ29tcG9uZW50O1xuXHRcdFx0bGV0IHJlbWFwSW5wdXQ6IEhUTUxJbnB1dEVsZW1lbnQ7XG5cblx0XHRcdHJlbWFwRHJvcCA9IG5ldyBEcm9wZG93bkNvbXBvbmVudChyZW1hcENvbnRyb2xCbG9jayk7XG5cdFx0XHRyZW1hcERyb3Auc2VsZWN0RWwuYWRkQ2xhc3MoXCJkcm9wZG93bndpZHRoXCIpO1xuXHRcdFx0cmVtYXBEcm9wLmFkZE9wdGlvbignJywgJ1NlbGVjdCBhbiBpdGVtXHUyMDI2Jyk7XG5cdFx0XHR0aGlzLnBsdWdpbi5tYW5pZmVzdENhY2hlLmZpbGVzLmZvckVhY2goZiA9PlxuXHRcdFx0XHRyZW1hcERyb3AuYWRkT3B0aW9uKGYucGF0aCwgZi5kaXNwbGF5TmFtZSA/PyBmLnBhdGguc3BsaXQoJy8nKS5wb3AoKSEpXG5cdFx0XHQpO1xuXHRcdFx0dGhpcy5wbHVnaW4ubWFuaWZlc3RDYWNoZS5mb2xkZXJzLmZvckVhY2goZiA9PlxuXHRcdFx0XHRyZW1hcERyb3AuYWRkT3B0aW9uKGYucGF0aCwgKGYuZGlzcGxheU5hbWUgPz8gZi5wYXRoLnNwbGl0KCcvJykucG9wKCkhKSArICcvIChmb2xkZXIpJylcblx0XHRcdCk7XG5cblx0XHRcdGNvbnN0IHNlYXJjaFdyYXBwZXIgPSByZW1hcENvbnRyb2xCbG9jay5jcmVhdGVEaXYoKTtcblx0XHRcdGNvbnN0IHNlYXJjaENvbXBvbmVudCA9IG5ldyBTZWFyY2hDb21wb25lbnQoc2VhcmNoV3JhcHBlcik7XG5cdFx0XHRzZWFyY2hDb21wb25lbnQuc2V0UGxhY2Vob2xkZXIoJ1NlYXJjaCB2YXVsdCBwYXRoXHUyMDI2Jyk7XG5cdFx0XHRuZXcgRmlsZVBhdGhTdWdnZXN0ZXIodGhpcy5hcHAsIHNlYXJjaENvbXBvbmVudC5pbnB1dEVsKTtcblx0XHRcdHJlbWFwSW5wdXQgPSBzZWFyY2hDb21wb25lbnQuaW5wdXRFbDtcblxuXHRcdFx0bmV3IEJ1dHRvbkNvbXBvbmVudChyZW1hcENvbnRyb2xCbG9jaylcblx0XHRcdFx0LnNldEJ1dHRvblRleHQoJ0FkZCBSZW1hcCcpXG5cdFx0XHRcdC5zZXRDdGEoKVxuXHRcdFx0XHQub25DbGljayhhc3luYyAoKSA9PiB7XG5cdFx0XHRcdFx0Y29uc3Qga2V5ID0gcmVtYXBEcm9wLmdldFZhbHVlKCk7XG5cdFx0XHRcdFx0Y29uc3QgdnAgPSByZW1hcElucHV0LnZhbHVlLnRyaW0oKTtcblx0XHRcdFx0XHRpZiAoIWtleSB8fCAhdnApIHJldHVybiBuZXcgTm90aWNlKCdTZWxlY3QgYW4gaXRlbSBhbmQgZW50ZXIgYSB2YXVsdCBwYXRoLicpO1xuXHRcdFx0XHRcdGlmICghdGhpcy5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKHZwKSkgcmV0dXJuIG5ldyBOb3RpY2UoJ1ZhdWx0IHBhdGggbm90IGZvdW5kLicpO1xuXHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmN1c3RvbVBhdGhzID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MuY3VzdG9tUGF0aHMuZmlsdGVyKGMgPT4gYy5tYW5pZmVzdEtleSAhPT0ga2V5KTtcblx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5jdXN0b21QYXRocy5wdXNoKHsgbWFuaWZlc3RLZXk6IGtleSwgdmF1bHRQYXRoOiB2cCwgZG9VcGRhdGU6IHRydWUgfSk7XG5cdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG5cdFx0XHRcdFx0cmVtYXBJbnB1dC52YWx1ZSA9ICcnO1xuXHRcdFx0XHRcdHJlbWFwRHJvcC5zZXRWYWx1ZSgnJyk7XG5cdFx0XHRcdFx0cmVuZGVyUmVtYXBQYW5lbCgpO1xuXHRcdFx0XHR9KTtcblxuXG5cdFx0XHQvLyA0LiBUYWJsZSB3cmFwcGVyXG5cdFx0XHRjb25zdCByZW1hcFRhYmxlV3JhcHBlciA9IHJlbWFwU2VjdGlvbi5jcmVhdGVEaXYoeyBjbHM6ICd2ay10YWJsZS13cmFwcGVyJywgYXR0cjogeyBzdHlsZTogJ21hcmdpbi10b3A6IDAuNzVlbScgfSB9KTtcblxuXHRcdFx0Y29uc3QgcmVuZGVyUmVtYXBQYW5lbCA9ICgpID0+IHtcblx0XHRcdFx0cmVtYXBUYWJsZVdyYXBwZXIuZW1wdHkoKTtcblxuXHRcdFx0XHRjb25zdCB0b1JlbWFwID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MuY3VzdG9tUGF0aHMuZmlsdGVyKGMgPT4gYy5kb1VwZGF0ZSk7XG5cblx0XHRcdFx0aWYgKHRvUmVtYXAubGVuZ3RoID09PSAwKSB7XG5cdFx0XHRcdFx0Y29uc3QgZW1wdHlNc2cgPSByZW1hcFRhYmxlV3JhcHBlci5jcmVhdGVFbCgnZGl2JywgeyB0ZXh0OiAnTm8gY3VzdG9tIHBhdGhzIGRlZmluZWQuJyB9KTtcblx0XHRcdFx0XHRlbXB0eU1zZy5hZGRDbGFzcyhcInNldHRpbmdzLWVtcHR5bXNnXCIpO1xuXHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdGNvbnN0IHRhYmxlID0gcmVtYXBUYWJsZVdyYXBwZXIuY3JlYXRlRWwoJ3RhYmxlJywgeyBjbHM6ICdzZXR0aW5nLXRhYmxlJyB9KTtcblx0XHRcdFx0Y29uc3QgaGVhZCA9IHRhYmxlLmNyZWF0ZVRIZWFkKCkuaW5zZXJ0Um93KCk7XG5cdFx0XHRcdFsnVG9vbGl0IEl0ZW0nLCAnTmV3IFZhdWx0IFBhdGgnLCAnJ10uZm9yRWFjaCh0eHQgPT4gaGVhZC5pbnNlcnRDZWxsKCkudGV4dENvbnRlbnQgPSB0eHQpO1xuXG5cdFx0XHRcdGNvbnN0IGJvZHkgPSB0YWJsZS5jcmVhdGVUQm9keSgpO1xuXHRcdFx0XHR0b1JlbWFwLmZvckVhY2goZW50cnkgPT4ge1xuXHRcdFx0XHRcdGNvbnN0IHJvdyA9IGJvZHkuaW5zZXJ0Um93KCk7XG5cblx0XHRcdFx0XHQvLyBNYW5pZmVzdCBLZXlcblx0XHRcdFx0XHRyb3cuaW5zZXJ0Q2VsbCgpLnRleHRDb250ZW50ID0gZW50cnkubWFuaWZlc3RLZXk7XG5cblx0XHRcdFx0XHQvLyBWYXVsdCBQYXRoXG5cdFx0XHRcdFx0cm93Lmluc2VydENlbGwoKS50ZXh0Q29udGVudCA9IGVudHJ5LnZhdWx0UGF0aDtcblxuXHRcdFx0XHRcdC8vIFJlbW92ZSBsaW5rXG5cdFx0XHRcdFx0Y29uc3QgcmVtb3ZlQ2VsbCA9IHJvdy5pbnNlcnRDZWxsKCk7XG5cdFx0XHRcdFx0Y29uc3QgcmVtb3ZlTGluayA9IHJlbW92ZUNlbGwuY3JlYXRlRWwoJ2EnLCB7IHRleHQ6ICdSZW1vdmUgZW50cnknLCBocmVmOiAnIycgfSk7XG5cdFx0XHRcdFx0cmVtb3ZlTGluay5hZGRDbGFzcyhcInNldHRpbmdzLXJlbW92ZWxpbmtcIik7XG5cdFx0XHRcdFx0cmVtb3ZlTGluay5vbmNsaWNrID0gYXN5bmMgKGUpID0+IHtcblx0XHRcdFx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcblx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmN1c3RvbVBhdGhzLnJlbW92ZShlbnRyeSk7XG5cdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcblx0XHRcdFx0XHRcdHJlbmRlclJlbWFwUGFuZWwoKTtcblx0XHRcdFx0XHR9O1xuXHRcdFx0XHR9KTtcblx0XHRcdH07XG5cblx0XHRcdHJlbmRlclJlbWFwUGFuZWwoKTtcblxuXHRcdFx0Ly8gQWRkIGRpdmlkZXIgaW5zaWRlIHRoZSBib2R5LCBhdCB0aGUgdG9wXG5cdFx0XHRjdXN0b21pemF0aW9uQm9keS5jcmVhdGVFbCgnZGl2Jywge1xuXHRcdFx0XHRhdHRyOiB7XG5cdFx0XHRcdFx0c3R5bGU6ICdib3JkZXItdG9wOiAxcHggc29saWQgdmFyKC0tZGl2aWRlci1jb2xvcik7IG1hcmdpbjogMC41ZW0gMDsnXG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXG5cdFx0XHQvLyBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDAgVE9PTEtJVCBCRUhBVklPUiBTRUNUSU9OIFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFxuXHRcdFx0Y29uc3QgYmVoYXZpb3JEZXRhaWxzID0gY29udGFpbmVyRWwuY3JlYXRlRWwoJ2RldGFpbHMnLCB7IGNsczogJ3ZrLXNlY3Rpb24nIH0pO1xuXG5cdFx0XHRjb25zdCBiZWhhdmlvclN1bW1hcnkgPSBiZWhhdmlvckRldGFpbHMuY3JlYXRlRWwoJ3N1bW1hcnknLCB7IGNsczogJ3ZrLXNlY3Rpb24taGVhZGVyJyB9KTtcblx0XHRcdE9iamVjdC5hc3NpZ24oYmVoYXZpb3JTdW1tYXJ5LnN0eWxlLCB7XG5cdFx0XHRcdGRpc3BsYXk6ICdmbGV4Jyxcblx0XHRcdFx0ZmxleERpcmVjdGlvbjogJ2NvbHVtbicsXG5cdFx0XHRcdGFsaWduSXRlbXM6ICdzdHJldGNoJyxcblx0XHRcdFx0cGFkZGluZzogJzAuNWVtIDAnLFxuXHRcdFx0XHRib3JkZXJCb3R0b206ICcxcHggc29saWQgdmFyKC0tZGl2aWRlci1jb2xvciknLFxuXHRcdFx0XHRjdXJzb3I6ICdwb2ludGVyJyxcblx0XHRcdH0pO1xuXG5cdFx0XHRjb25zdCBiZWhhdmlvclJvdyA9IGJlaGF2aW9yU3VtbWFyeS5jcmVhdGVEaXYoe1xuXHRcdFx0XHRhdHRyOiB7IHN0eWxlOiAnZGlzcGxheTpmbGV4OyBqdXN0aWZ5LWNvbnRlbnQ6c3BhY2UtYmV0d2VlbjsgYWxpZ24taXRlbXM6ZmxleC1lbmQ7JyB9XG5cdFx0XHR9KTtcblxuXHRcdFx0Y29uc3QgYmVoYXZpb3JUaXRsZSA9IGJlaGF2aW9yUm93LmNyZWF0ZURpdih7IGF0dHI6IHsgc3R5bGU6ICdkaXNwbGF5OmZsZXg7IGZsZXgtZGlyZWN0aW9uOmNvbHVtbjsnIH0gfSk7XG5cdFx0XHRiZWhhdmlvclRpdGxlLmNyZWF0ZUVsKCdoNScsIHsgdGV4dDogJ1Rvb2xraXQgQmVoYXZpb3InIH0pO1xuXHRcdFx0YmVoYXZpb3JUaXRsZS5jcmVhdGVFbCgnZGl2Jywge1xuXHRcdFx0XHR0ZXh0OiAnRmluZS10dW5lIGhvdyB0aGUgdG9vbGtpdCBiZWhhdmVzIGR1cmluZyBjb21tb24gd29ya2Zsb3dzLicsXG5cdFx0XHRcdGNsczogJ3NldHRpbmctaXRlbS1kZXNjcmlwdGlvbicsXG5cdFx0XHRcdGF0dHI6IHsgc3R5bGU6ICdtYXJnaW4tdG9wOjAuMjVlbTsnIH0sXG5cdFx0XHR9KTtcblxuXHRcdFx0Y29uc3QgYmVoYXZpb3JJY29uID0gYmVoYXZpb3JSb3cuY3JlYXRlRWwoJ3NwYW4nLCB7IHRleHQ6ICdWVicsIGNsczogJ3ZrLXRvZ2dsZS1pY29uJyB9KTtcblx0XHRcdE9iamVjdC5hc3NpZ24oYmVoYXZpb3JJY29uLnN0eWxlLCB7XG5cdFx0XHRcdGZvbnRXZWlnaHQ6ICdib2xkJyxcblx0XHRcdFx0ZGlzcGxheTogJ2lubGluZS1ibG9jaycsXG5cdFx0XHRcdHRyYW5zaXRpb246ICd0cmFuc2Zvcm0gMC4ycyBlYXNlJyxcblx0XHRcdFx0dHJhbnNmb3JtT3JpZ2luOiAnNTAlIDUwJScsXG5cdFx0XHRcdHVzZXJTZWxlY3Q6ICdub25lJyxcblx0XHRcdFx0dHJhbnNmb3JtOiBiZWhhdmlvckRldGFpbHMub3BlbiA/ICdyb3RhdGUoMGRlZyknIDogJ3JvdGF0ZSgxODBkZWcpJyxcblx0XHRcdH0pO1xuXHRcdFx0YmVoYXZpb3JEZXRhaWxzLm9udG9nZ2xlID0gKCkgPT4ge1xuXHRcdFx0XHRiZWhhdmlvckljb24uYWRkQ2xhc3MoXCJ2di1yb3RhdGVkXCIpO1xuXHRcdFx0fTtcblxuXHRcdFx0Y29uc3QgYmVoYXZpb3JCb2R5ID0gYmVoYXZpb3JEZXRhaWxzLmNyZWF0ZURpdih7IGNsczogJ3ZrLXNlY3Rpb24tYm9keScgfSk7XG5cdFx0XHRiZWhhdmlvckJvZHkuYWRkQ2xhc3MoXCJ2di1wbC1tZFwiKTtcblxuXHRcdFx0Ly8gRHJvcGRvd246IFNlc3Npb24gdGl0bGUgcHJlZmVyZW5jZVxuXHRcdFx0bmV3IFNldHRpbmcoYmVoYXZpb3JCb2R5KVxuXHRcdFx0XHQuc2V0TmFtZShcIlNlc3Npb24gVGVtcGxhdGUgTmFtaW5nXCIpXG5cdFx0XHRcdC5zZXREZXNjKFwiV2hlbiBib3RoIGEgZGF0ZSBhbmQgYSBuYW1lIGFyZSBlbnRlcmVkIGluIHRoZSBOZXcgU2Vzc2lvbiBmb3JtLCBjaG9vc2Ugd2hpY2ggb25lIHRvIHVzZSBpbiB0aGUgc2Vzc2lvbiBub3RlIHRpdGxlLiBGb3IgZXhhbXBsZSwgJ1Nlc3Npb24gMTQgLSBCdXJuaW5nIERvd24gdGhlIFZpbGxhZ2UnIHZzICdTZXNzaW9uIDE0IC0gNC41LjYzJ1wiKVxuXHRcdFx0XHQuYWRkRHJvcGRvd24oKGRkKSA9PiB7XG5cdFx0XHRcdFx0ZGQuYWRkT3B0aW9uKFwibmFtZVwiLCBcIlNlc3Npb24gTmFtZVwiKTtcblx0XHRcdFx0XHRkZC5hZGRPcHRpb24oXCJkYXRlXCIsIFwiRGF0ZVwiKTtcblx0XHRcdFx0XHRkZC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5zZXNzaW9uVGl0bGVQcmVmZXJlbmNlID8/IFwibmFtZVwiKTtcblx0XHRcdFx0XHRkZC5vbkNoYW5nZShhc3luYyAodmFsOiBcIm5hbWVcIiB8IFwiZGF0ZVwiKSA9PiB7XG5cdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5zZXNzaW9uVGl0bGVQcmVmZXJlbmNlID0gdmFsO1xuXHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdH0pO1xuXG5cdFx0XHQvLyBUb2dnbGU6IERpc2FibGUgcGFnZSBwcmV2aWV3cyBpbiBzaWRlYmFyc1xuXHRcdFx0bmV3IFNldHRpbmcoYmVoYXZpb3JCb2R5KVxuXHRcdFx0XHQuc2V0TmFtZShcIkVuYWJsZSBQYWdlIFByZXZpZXdzIGluIFNpZGViYXJzXCIpXG5cdFx0XHRcdC5zZXREZXNjKFwiSWYgZW5hYmxlZCwgbGlua3MgaW4gVlZ1bmRlcmxvcmUgc2lkZWJhcnMgKFZWb3JsZGJ1aWxkaW5nLCBHYW1lcGxheSkgd2lsbCBzaG93IGhvdmVyIHByZXZpZXdzLlwiKVxuXHRcdFx0XHQuYWRkVG9nZ2xlKCh0b2dnbGUpID0+IHtcblx0XHRcdFx0XHR0b2dnbGUuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuZW5hYmxlU2lkZWJhclByZXZpZXdzID8/IGZhbHNlKTtcblx0XHRcdFx0XHR0b2dnbGUub25DaGFuZ2UoYXN5bmMgKHZhbDogYm9vbGVhbikgPT4ge1xuXHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MuZW5hYmxlU2lkZWJhclByZXZpZXdzID0gdmFsO1xuXHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG5cdFx0XHRcdFx0XHQodGhpcy5hcHAud29ya3NwYWNlIGFzIGFueSkudHJpZ2dlcigndnY6c2lkZWJhci1wcmV2aWV3cy1jaGFuZ2VkJywgeyBlbmFibGVkOiB2YWwgfSk7XG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdH0pO1xuXG5cdFx0XHQvLyBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDAgSElHSExJR0hUIFNFQ1RJT04gXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXG5cdFx0XHRjb25zdCBoaWdobGlnaHREZXRhaWxzID0gY29udGFpbmVyRWwuY3JlYXRlRWwoJ2RldGFpbHMnLCB7IGNsczogJ3ZrLXNlY3Rpb24nIH0pO1xuXG5cdFx0XHQvLyAxKSBCdWlsZCB0aGUgPHN1bW1hcnk+IGZvciBoaWdobGlnaHQsIG1hdGNoaW5nIGJhY2t1cCBzdHlsZTpcblx0XHRcdGNvbnN0IGhpZ2hsaWdodFN1bW1hcnkgPSBoaWdobGlnaHREZXRhaWxzLmNyZWF0ZUVsKCdzdW1tYXJ5JywgeyBjbHM6ICd2ay1zZWN0aW9uLWhlYWRlcicgfSk7XG5cdFx0XHRPYmplY3QuYXNzaWduKGhpZ2hsaWdodFN1bW1hcnkuc3R5bGUsIHtcblx0XHRcdFx0ZGlzcGxheTogJ2ZsZXgnLFxuXHRcdFx0XHRmbGV4RGlyZWN0aW9uOiAnY29sdW1uJyxcblx0XHRcdFx0YWxpZ25JdGVtczogJ3N0cmV0Y2gnLFxuXHRcdFx0XHRwYWRkaW5nOiAnMC41ZW0gMCcsXG5cdFx0XHRcdGJvcmRlckJvdHRvbTogJzFweCBzb2xpZCB2YXIoLS1kaXZpZGVyLWNvbG9yKScsXG5cdFx0XHRcdGN1cnNvcjogJ3BvaW50ZXInLFxuXHRcdFx0fSk7XG5cblx0XHRcdC8vIDFhKSBDcmVhdGUgdGhlIHRpdGxlICsgaWNvbiByb3cgKGZsZXggcm93IGp1c3RpZnkgc3BhY2UtYmV0d2Vlbik6XG5cdFx0XHRjb25zdCBoaWdobGlnaHRUaXRsZVJvdyA9IGhpZ2hsaWdodFN1bW1hcnkuY3JlYXRlRGl2KHtcblx0XHRcdFx0YXR0cjoge1xuXHRcdFx0XHRcdHN0eWxlOiBgXG5cdFx0XHRkaXNwbGF5OiBmbGV4O1xuXHRcdFx0anVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuO1xuXHRcdFx0YWxpZ24taXRlbXM6IGZsZXgtZW5kO1xuXHRcdFx0YCxcblx0XHRcdFx0fSxcblx0XHRcdH0pO1xuXG5cdFx0XHQvLyAxYikgTGVmdCBzaWRlOiB0aXRsZSArIGRlc2NyaXB0aW9uXG5cdFx0XHRjb25zdCBobFRpdGxlQmxvY2sgPSBoaWdobGlnaHRUaXRsZVJvdy5jcmVhdGVEaXYoe1xuXHRcdFx0XHRhdHRyOiB7IHN0eWxlOiAnZGlzcGxheTogZmxleDsgZmxleC1kaXJlY3Rpb246IGNvbHVtbjsnIH1cblx0XHRcdH0pO1xuXHRcdFx0aGxUaXRsZUJsb2NrLmNyZWF0ZUVsKCdoNScsIHsgdGV4dDogJ0ZpbGUgSGlnaGxpZ2h0cycgfSk7XG5cdFx0XHRobFRpdGxlQmxvY2suY3JlYXRlRWwoJ2RpdicsIHtcblx0XHRcdFx0dGV4dDogJ1RvZ2dsZSBvbi9vZmYgdGhlIGhpZ2hsaWdodGluZyBvZiBUb29sa2l0LXNwZWNpZmljIGZpbGVzLiBBbHNvIG1ha2UgdGhlIGhpZ2hsaWdodHMgY29vbCBjb2xvcnMuJyxcblx0XHRcdFx0Y2xzOiAnc2V0dGluZy1pdGVtLWRlc2NyaXB0aW9uJyxcblx0XHRcdFx0YXR0cjogeyBzdHlsZTogJ21hcmdpbi10b3A6IDAuMjVlbTsnIH0sXG5cdFx0XHR9KTtcblxuXHRcdFx0Ly8gMWMpIFJpZ2h0IHNpZGU6IGNvbGxhcHNpbmcgYXJyb3cvaWNvblxuXHRcdFx0Y29uc3QgaGxUb2dnbGVJY29uID0gaGlnaGxpZ2h0VGl0bGVSb3cuY3JlYXRlRWwoJ3NwYW4nLCB7IHRleHQ6ICdWVicsIGNsczogJ3ZrLXRvZ2dsZS1pY29uJyB9KTtcblx0XHRcdE9iamVjdC5hc3NpZ24oaGxUb2dnbGVJY29uLnN0eWxlLCB7XG5cdFx0XHRcdGZvbnRXZWlnaHQ6ICdib2xkJyxcblx0XHRcdFx0ZGlzcGxheTogJ2lubGluZS1ibG9jaycsXG5cdFx0XHRcdHRyYW5zaXRpb246ICd0cmFuc2Zvcm0gMC4ycyBlYXNlJyxcblx0XHRcdFx0dHJhbnNmb3JtT3JpZ2luOiAnNTAlIDUwJScsXG5cdFx0XHRcdHVzZXJTZWxlY3Q6ICdub25lJyxcblx0XHRcdFx0dHJhbnNmb3JtOiBoaWdobGlnaHREZXRhaWxzLm9wZW4gPyAncm90YXRlKDBkZWcpJyA6ICdyb3RhdGUoMTgwZGVnKScsXG5cdFx0XHR9KTtcblxuXHRcdFx0Ly8gMWQpIE1ha2UgdGhlIGljb24gcm90YXRlIHdoZW4gdGhlIDxkZXRhaWxzPiBvcGVucy9jbG9zZXM6XG5cdFx0XHRoaWdobGlnaHREZXRhaWxzLm9udG9nZ2xlID0gKCkgPT4ge1xuXHRcdFx0XHRobFRvZ2dsZUljb24uYWRkQ2xhc3MoXCJ2di1yb3RhdGVkXCIpO1xuXHRcdFx0fTtcblxuXHRcdFx0Ly8gMikgQ3JlYXRlIHRoZSBib2R5IGNvbnRhaW5lciAoaW5kZW50ZWQsIHNhbWUgYXMgYmFja3VwKVxuXHRcdFx0Y29uc3QgaGlnaGxpZ2h0Qm9keSA9IGhpZ2hsaWdodERldGFpbHMuY3JlYXRlRGl2KHsgY2xzOiAndmstc2VjdGlvbi1ib2R5JyB9KTtcblx0XHRcdGhpZ2hsaWdodEJvZHkuYWRkQ2xhc3MoXCJ2di1wbC1tZFwiKTtcblxuXHRcdFx0Ly8gMykgXHUyMDFDRW5hYmxlIEhpZ2hsaWdodFx1MjAxRCB0b2dnbGUgYXMgYSBTZXR0aW5nIGluc2lkZSBoaWdobGlnaHRCb2R5OlxuXHRcdFx0bmV3IFNldHRpbmcoaGlnaGxpZ2h0Qm9keSlcblx0XHRcdFx0LnNldE5hbWUoJ0VuYWJsZSBGaWxlIEhpZ2hsaWdodGluZycpXG5cdFx0XHRcdC5zZXREZXNjKCdBbnkgZmlsZSBpbnN0YWxsZWQgYnkgVlZ1bmRlcmxvcmUgd2lsbCBoYXZlIHRoaXMgYmFja2dyb3VuZC4nKVxuXHRcdFx0XHQuYWRkVG9nZ2xlKHRvZ2dsZSA9PiB7XG5cdFx0XHRcdFx0dG9nZ2xlXG5cdFx0XHRcdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuaGlnaGxpZ2h0RW5hYmxlZClcblx0XHRcdFx0XHRcdC5vbkNoYW5nZShhc3luYyAoZW5hYmxlZCkgPT4ge1xuXHRcdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5oaWdobGlnaHRFbmFibGVkID0gZW5hYmxlZDtcblx0XHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG5cblx0XHRcdFx0XHRcdFx0aWYgKGVuYWJsZWQpIHtcblx0XHRcdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5lbmFibGVIaWdobGlnaHQoKTtcblx0XHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5kaXNhYmxlSGlnaGxpZ2h0KCk7XG5cdFx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0XHQvLyBSZVx1MjAxMHJlbmRlciB0aGUgY29sb3IgcGlja2VycyB3aGVuZXZlciB0aGUgdG9nZ2xlIGNoYW5nZXM6XG5cdFx0XHRcdFx0XHRcdHJlbmRlckhpZ2hsaWdodENvbG9yUGlja2VycygpO1xuXHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdH0pO1xuXG5cdFx0XHQvLyA0KSBXcmFwcGVyIGZvciBMaWdodC9EYXJrIGNvbG9yIHBpY2tlcnM6XG5cdFx0XHRjb25zdCBjb2xvclBpY2tlcldyYXBwZXIgPSBoaWdobGlnaHRCb2R5LmNyZWF0ZURpdigpO1xuXG5cdFx0XHQvLyA1KSBBIGZ1bmN0aW9uIHRvIHJlbmRlciBvciBjbGVhciB0aGUgdHdvIENvbG9yUGlja2VyIHNldHRpbmdzOlxuXHRcdFx0Y29uc3QgcmVuZGVySGlnaGxpZ2h0Q29sb3JQaWNrZXJzID0gKCkgPT4ge1xuXHRcdFx0XHRjb2xvclBpY2tlcldyYXBwZXIuZW1wdHkoKTtcblxuXHRcdFx0XHRpZiAoIXRoaXMucGx1Z2luLnNldHRpbmdzLmhpZ2hsaWdodEVuYWJsZWQpIHtcblx0XHRcdFx0XHRyZXR1cm47IC8vIGRvIG5vdCBzaG93IHBpY2tlcnMgaWYgaGlnaGxpZ2h0aW5nIGlzIGRpc2FibGVkXG5cdFx0XHRcdH1cblxuXHRcdFx0XHQvLyA1YSkgTGlnaHQgbW9kZSBjb2xvciBwaWNrZXJcblx0XHRcdFx0bmV3IFNldHRpbmcoY29sb3JQaWNrZXJXcmFwcGVyKVxuXHRcdFx0XHRcdC5zZXROYW1lKCdMaWdodCBNb2RlIEhpZ2hsaWdodCBDb2xvcicpXG5cdFx0XHRcdFx0LnNldERlc2MoJ0Nob29zZSB0aGUgYmFja2dyb3VuZCBjb2xvciBmb3IgZmlsZXMvZm9sZGVycyBpbiBMaWdodCBtb2RlLicpXG5cdFx0XHRcdFx0LmFkZENvbG9yUGlja2VyKHBpY2tlciA9PiB7XG5cdFx0XHRcdFx0XHRwaWNrZXJcblx0XHRcdFx0XHRcdFx0LnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmhpZ2hsaWdodENvbG9yTGlnaHQpXG5cdFx0XHRcdFx0XHRcdC5vbkNoYW5nZShhc3luYyAobmV3Q29sb3IpID0+IHtcblx0XHRcdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5oaWdobGlnaHRDb2xvckxpZ2h0ID0gbmV3Q29sb3I7XG5cdFx0XHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG5cblx0XHRcdFx0XHRcdFx0XHQvLyBSZVx1MjAxMGluamVjdCBDU1Mgc28gdGhlIG5ldyBjb2xvciB0YWtlcyBlZmZlY3QgaW1tZWRpYXRlbHk6XG5cdFx0XHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uZGlzYWJsZUhpZ2hsaWdodCgpO1xuXHRcdFx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLmVuYWJsZUhpZ2hsaWdodCgpO1xuXHRcdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHR9KTtcblxuXHRcdFx0XHQvLyA1YikgRGFyayBtb2RlIGNvbG9yIHBpY2tlclxuXHRcdFx0XHRuZXcgU2V0dGluZyhjb2xvclBpY2tlcldyYXBwZXIpXG5cdFx0XHRcdFx0LnNldE5hbWUoJ0RhcmsgTW9kZSBIaWdobGlnaHQgQ29sb3InKVxuXHRcdFx0XHRcdC5zZXREZXNjKCdDaG9vc2UgdGhlIGJhY2tncm91bmQgY29sb3IgZm9yIGZpbGVzL2ZvbGRlcnMgaW4gRGFyayBtb2RlLicpXG5cdFx0XHRcdFx0LmFkZENvbG9yUGlja2VyKHBpY2tlciA9PiB7XG5cdFx0XHRcdFx0XHRwaWNrZXJcblx0XHRcdFx0XHRcdFx0LnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmhpZ2hsaWdodENvbG9yRGFyaylcblx0XHRcdFx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jIChuZXdDb2xvcikgPT4ge1xuXHRcdFx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmhpZ2hsaWdodENvbG9yRGFyayA9IG5ld0NvbG9yO1xuXHRcdFx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuXG5cdFx0XHRcdFx0XHRcdFx0Ly8gUmVcdTIwMTBpbmplY3QgQ1NTIHNvIHRoZSBuZXcgY29sb3IgdGFrZXMgZWZmZWN0IGltbWVkaWF0ZWx5OlxuXHRcdFx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLmRpc2FibGVIaWdobGlnaHQoKTtcblx0XHRcdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5lbmFibGVIaWdobGlnaHQoKTtcblx0XHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0fSk7XG5cdFx0XHR9O1xuXG5cdFx0XHQvLyA2KSBDYWxsIG9uY2Ugb24gaW5pdGlhbCByZW5kZXIgc28gdGhhdCBpZiBoaWdobGlnaHRFbmFibGVkID09PSB0cnVlLCB0aGUgcGlja2VycyBzaG93IHVwLlxuXHRcdFx0cmVuZGVySGlnaGxpZ2h0Q29sb3JQaWNrZXJzKCk7XG5cblxuXHRcdFx0Ly8gXHUyNTAwXHUyNTAwXHUyNTAwIElOSVRJQUwgRFJBVyBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcblx0XHRcdHJlbmRlclNraXBUYWJsZSgpO1xuXHRcdFx0cmVuZGVyUmVtYXBQYW5lbCgpO1xuXG5cblx0XHRcdC8vUkVNT1ZFIERFTU8gRklMRVNcblx0XHRcdC8vIFx1MjUwMFx1MjUwMFx1MjUwMCBSRU1PVkUgREVNTyBGSUxFUyAodXBkYXRlZCkgXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXG5cblx0XHRcdC8vIDEpIENyZWF0ZSBhIFNldHRpbmcgcm93LCBidXQgaW1tZWRpYXRlbHkgc3RyaXAgb2ZmIGl0cyBkZWZhdWx0IHRvcFx1MjAxMGJvcmRlcjpcblx0XHRcdGNvbnN0IHJlbW92ZURlbW9TZXR0aW5nID0gbmV3IFNldHRpbmcoY29udGFpbmVyRWwpO1xuXHRcdFx0KHJlbW92ZURlbW9TZXR0aW5nLnNldHRpbmdFbCBhcyBIVE1MRWxlbWVudCkuYWRkQ2xhc3MoXCJ2di1uby1ib3JkZXItdG9wXCIpO1xuXG5cdFx0XHRyZW1vdmVEZW1vU2V0dGluZ1xuXHRcdFx0XHQuc2V0TmFtZSgnUmVtb3ZlIERlbW8gRmlsZXMnKVxuXHRcdFx0XHQuc2V0RGVzYygnRGVsZXRlIGV2ZXJ5IFx1MjAxQ29wdGlvbmFsXHUyMDFEIGRlbW8gZmlsZSBhbmQgZm9sZGVyIGZyb20geW91ciB2YXVsdC4nKVxuXHRcdFx0XHQuYWRkQnV0dG9uKChidXR0b24pID0+XG5cdFx0XHRcdFx0YnV0dG9uXG5cdFx0XHRcdFx0XHQuc2V0QnV0dG9uVGV4dCgnUmVtb3ZlIERlbW8gRmlsZXMnKVxuXG5cdFx0XHRcdFx0XHQub25DbGljayhhc3luYyAoKSA9PiB7XG5cdFx0XHRcdFx0XHRcdGNvbnN0IG9wdGlvbmFsRmlsZUVudHJpZXMgPSB0aGlzLnBsdWdpbi5tYW5pZmVzdENhY2hlLmZpbGVzLmZpbHRlcigoZikgPT4gZi5vcHRpb25hbCk7XG5cdFx0XHRcdFx0XHRcdGNvbnN0IG9wdGlvbmFsRm9sZGVyRW50cmllcyA9IHRoaXMucGx1Z2luLm1hbmlmZXN0Q2FjaGUuZm9sZGVycy5maWx0ZXIoKGYpID0+IGYub3B0aW9uYWwpO1xuXG5cdFx0XHRcdFx0XHRcdGNvbnN0IHRvdGFsQ291bnRGaWxlcyA9IG9wdGlvbmFsRmlsZUVudHJpZXMubGVuZ3RoO1xuXHRcdFx0XHRcdFx0XHRjb25zdCB0b3RhbENvdW50Rm9sZGVycyA9IG9wdGlvbmFsRm9sZGVyRW50cmllcy5sZW5ndGg7XG5cdFx0XHRcdFx0XHRcdGNvbnN0IHRvdGFsQ291bnQgPSB0b3RhbENvdW50RmlsZXMgKyB0b3RhbENvdW50Rm9sZGVycztcblxuXHRcdFx0XHRcdFx0XHRpZiAodG90YWxDb3VudCA9PT0gMCkge1xuXHRcdFx0XHRcdFx0XHRcdG5ldyBOb3RpY2UoJ05vIFx1MjAxQ29wdGlvbmFsXHUyMDFEIGRlbW8gZmlsZXMgb3IgZm9sZGVycyB0byByZW1vdmUuJyk7XG5cdFx0XHRcdFx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdFx0Ly8gLS0tIDIpIEFzayBmb3IgY29uZmlybWF0aW9uIGluIGEgc21hbGwgTW9kYWwgLS0tXG5cdFx0XHRcdFx0XHRcdGNvbnN0IHVzZXJDb25maXJtZWQgPSBhd2FpdCBuZXcgUHJvbWlzZTxib29sZWFuPigocmVzb2x2ZSkgPT4ge1xuXHRcdFx0XHRcdFx0XHRcdGNvbnN0IGNvbmZpcm1Nb2RhbCA9IG5ldyBjbGFzcyBleHRlbmRzIE1vZGFsIHtcblx0XHRcdFx0XHRcdFx0XHRcdGNvbnN0cnVjdG9yKGFwcDogQXBwKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdHN1cGVyKGFwcCk7XG5cdFx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0XHRvbk9wZW4oKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdHRoaXMuY29udGVudEVsLmVtcHR5KCk7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdHRoaXMuY29udGVudEVsLmNyZWF0ZUVsKCdoMicsIHsgdGV4dDogJ0NvbmZpcm0gUmVtb3ZhbCcgfSk7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdHRoaXMuY29udGVudEVsLmNyZWF0ZUVsKCdwJywge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdHRleHQ6IGBUaGlzIHdpbGwgcGVybWFuZW50bHkgZGVsZXRlICR7dG90YWxDb3VudEZpbGVzfSBmaWxlKHMpIGFuZCAke3RvdGFsQ291bnRGb2xkZXJzfSBmb2xkZXIocykuIENvbnRpbnVlP2AsXG5cdFx0XHRcdFx0XHRcdFx0XHRcdH0pO1xuXG5cdFx0XHRcdFx0XHRcdFx0XHRcdGNvbnN0IGJ0blJvdyA9IHRoaXMuY29udGVudEVsLmNyZWF0ZUVsKCdkaXYnKTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0T2JqZWN0LmFzc2lnbihidG5Sb3cuc3R5bGUsIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRkaXNwbGF5OiAnZmxleCcsXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0anVzdGlmeUNvbnRlbnQ6ICdmbGV4LWVuZCcsXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0Z2FwOiAnMC41ZW0nLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdG1hcmdpblRvcDogJzEuNWVtJyxcblx0XHRcdFx0XHRcdFx0XHRcdFx0fSk7XG5cblx0XHRcdFx0XHRcdFx0XHRcdFx0YnRuUm93LmNyZWF0ZUVsKCdidXR0b24nLCB7IHRleHQ6ICdDYW5jZWwnIH0pLm9uY2xpY2sgPSAoKSA9PiB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0cmVzb2x2ZShmYWxzZSk7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0dGhpcy5jbG9zZSgpO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHR9O1xuXG5cdFx0XHRcdFx0XHRcdFx0XHRcdGJ0blJvdy5jcmVhdGVFbCgnYnV0dG9uJywgeyB0ZXh0OiAnWWVzLCBSZW1vdmUnLCBjbHM6ICdtb2QtZGFuZ2VyJyB9KS5vbmNsaWNrID0gKCkgPT4ge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdHJlc29sdmUodHJ1ZSk7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0dGhpcy5jbG9zZSgpO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHR9O1xuXHRcdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdFx0b25DbG9zZSgpIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0dGhpcy5jb250ZW50RWwuZW1wdHkoKTtcblx0XHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHR9KHRoaXMuYXBwKTtcblxuXHRcdFx0XHRcdFx0XHRcdGNvbmZpcm1Nb2RhbC5vcGVuKCk7XG5cdFx0XHRcdFx0XHRcdH0pO1xuXG5cdFx0XHRcdFx0XHRcdGlmICghdXNlckNvbmZpcm1lZCkge1xuXHRcdFx0XHRcdFx0XHRcdHJldHVybjsgLy8gdXNlciBjbGlja2VkIFx1MjAxQ0NhbmNlbFx1MjAxRFxuXHRcdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdFx0Ly8gLS0tIDMpIERlbGV0ZSBvcHRpb25hbCBmaWxlcyBvbmUgYnkgb25lIC0tLVxuXHRcdFx0XHRcdFx0XHRsZXQgZmlsZXNEZWxldGVkID0gMDtcblx0XHRcdFx0XHRcdFx0Zm9yIChjb25zdCBmaWxlRW50cnkgb2Ygb3B0aW9uYWxGaWxlRW50cmllcykge1xuXHRcdFx0XHRcdFx0XHRcdC8vIDNhKSBSZXNwZWN0IGFueSByZW1hcHBpbmcgaW4gY3VzdG9tUGF0aHNcblx0XHRcdFx0XHRcdFx0XHRjb25zdCBtYXBwZWQgPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5jdXN0b21QYXRocy5maW5kKChjKSA9PiBjLm1hbmlmZXN0S2V5ID09PSBmaWxlRW50cnkua2V5KTtcblx0XHRcdFx0XHRcdFx0XHRjb25zdCB2YXVsdFBhdGggPSBtYXBwZWQ/LnZhdWx0UGF0aCA/PyBmaWxlRW50cnkucGF0aDtcblxuXHRcdFx0XHRcdFx0XHRcdC8vIDNiKSBJZiBpdCBhY3R1YWxseSBleGlzdHMsIHJlbW92ZSBpdFxuXHRcdFx0XHRcdFx0XHRcdGlmIChhd2FpdCB0aGlzLmFwcC52YXVsdC5hZGFwdGVyLmV4aXN0cyh2YXVsdFBhdGgpKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHR0cnkge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRhd2FpdCB0aGlzLmFwcC52YXVsdC5hZGFwdGVyLnJlbW92ZSh2YXVsdFBhdGgpO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRmaWxlc0RlbGV0ZWQrKztcblx0XHRcdFx0XHRcdFx0XHRcdH0gY2F0Y2ggKGVycikge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRjb25zb2xlLmVycm9yKGBGYWlsZWQgdG8gZGVsZXRlIG9wdGlvbmFsIGZpbGUgJHt2YXVsdFBhdGh9YCwgZXJyKTtcblx0XHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0XHQvLyAtLS0gNCkgRGVsZXRlIG9wdGlvbmFsIGZvbGRlcnMgcmVjdXJzaXZlbHkgLS0tXG5cdFx0XHRcdFx0XHRcdGxldCBmb2xkZXJzRGVsZXRlZCA9IDA7XG5cdFx0XHRcdFx0XHRcdGZvciAoY29uc3QgZm9sZGVyRW50cnkgb2Ygb3B0aW9uYWxGb2xkZXJFbnRyaWVzKSB7XG5cdFx0XHRcdFx0XHRcdFx0Y29uc3QgbWFwcGVkID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MuY3VzdG9tUGF0aHMuZmluZCgoYykgPT4gYy5tYW5pZmVzdEtleSA9PT0gZm9sZGVyRW50cnkua2V5KTtcblx0XHRcdFx0XHRcdFx0XHRjb25zdCB2YXVsdEZvbGRlclBhdGggPSBtYXBwZWQ/LnZhdWx0UGF0aCA/PyBmb2xkZXJFbnRyeS5wYXRoO1xuXG5cdFx0XHRcdFx0XHRcdFx0aWYgKGF3YWl0IHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXIuZXhpc3RzKHZhdWx0Rm9sZGVyUGF0aCkpIHtcblx0XHRcdFx0XHRcdFx0XHRcdHRyeSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdC8vIFRoZSBzZWNvbmQgYXJndW1lbnQgYHRydWVgIGVuc3VyZXMgcmVjdXJzaXZlIGRlbGV0ZVxuXHRcdFx0XHRcdFx0XHRcdFx0XHRhd2FpdCB0aGlzLmFwcC52YXVsdC5hZGFwdGVyLnJtZGlyKHZhdWx0Rm9sZGVyUGF0aCwgdHJ1ZSk7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdGZvbGRlcnNEZWxldGVkKys7XG5cdFx0XHRcdFx0XHRcdFx0XHR9IGNhdGNoIChlcnIpIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0Y29uc29sZS5lcnJvcihgRmFpbGVkIHRvIGRlbGV0ZSBvcHRpb25hbCBmb2xkZXIgJHt2YXVsdEZvbGRlclBhdGh9YCwgZXJyKTtcblx0XHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0XHQvLyAtLS0gNSkgQ2xlYW4gdXAgYW55IFx1MjAxQ2N1c3RvbVBhdGhzXHUyMDFEIGVudHJpZXMgZm9yIG9wdGlvbmFsIGl0ZW1zIC0tLVxuXHRcdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5jdXN0b21QYXRocyA9IHRoaXMucGx1Z2luLnNldHRpbmdzLmN1c3RvbVBhdGhzLmZpbHRlcigoYykgPT4ge1xuXHRcdFx0XHRcdFx0XHRcdC8vIElmIHRoaXMgbWFwcGluZ1x1MjAxOXMgbWFuaWZlc3RLZXkgd2FzIG9wdGlvbmFsLCBkcm9wIGl0XG5cdFx0XHRcdFx0XHRcdFx0Y29uc3QgaXNPcHRGaWxlID0gb3B0aW9uYWxGaWxlRW50cmllcy5zb21lKChmKSA9PiBmLmtleSA9PT0gYy5tYW5pZmVzdEtleSk7XG5cdFx0XHRcdFx0XHRcdFx0Y29uc3QgaXNPcHRGb2xkZXIgPSBvcHRpb25hbEZvbGRlckVudHJpZXMuc29tZSgoZikgPT4gZi5rZXkgPT09IGMubWFuaWZlc3RLZXkpO1xuXHRcdFx0XHRcdFx0XHRcdHJldHVybiAhaXNPcHRGaWxlICYmICFpc09wdEZvbGRlcjtcblx0XHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuXG5cdFx0XHRcdFx0XHRcdC8vIC0tLSA2KSBTaG93IGEgbm90aWNlIGFuZCByZS1yZW5kZXIgdGhlIHNldHRpbmdzIHBhZ2UgLS0tXG5cdFx0XHRcdFx0XHRcdG5ldyBOb3RpY2UoYERlbGV0ZWQgJHtmaWxlc0RlbGV0ZWR9IGZpbGUocykgYW5kICR7Zm9sZGVyc0RlbGV0ZWR9IGZvbGRlcihzKS5gKTtcblx0XHRcdFx0XHRcdFx0dGhpcy5kaXNwbGF5KCk7XG5cdFx0XHRcdFx0XHR9KVxuXHRcdFx0XHQpO1xuXG5cblxuXG5cdFx0XHQvKiogXHUyNTAwXHUyNTAwXHUyNTAwIEZPT1RFUiBTRUNUSU9OIFx1MjUwMFx1MjUwMFx1MjUwMCAqL1xuXHRcdFx0Y29uc3QgZm9vdGVyID0gY29udGFpbmVyRWwuY3JlYXRlRGl2KHsgY2xzOiAnc2V0dGluZy1pdGVtJyB9KTtcblx0XHRcdE9iamVjdC5hc3NpZ24oZm9vdGVyLnN0eWxlLCB7XG5cdFx0XHRcdGZvbnRTaXplOiAnMC44NWVtJyxcblx0XHRcdFx0Y29sb3I6ICd2YXIoLS10ZXh0LW11dGVkKScsXG5cdFx0XHRcdG1hcmdpblRvcDogJzFlbScsXG5cdFx0XHR9KTtcblx0XHRcdGZvb3Rlci5jcmVhdGVFbCgnc3BhbicsIHtcblx0XHRcdFx0dGV4dDogYFZWdW5kZXJsb3JlIFRvb2xraXQgUGx1Z2luIHYke3RoaXMucGx1Z2luLm1hbmlmZXN0LnZlcnNpb259ICAgXHUyMDIyIGBcblx0XHRcdH0pO1xuXHRcdFx0Zm9vdGVyLmNyZWF0ZUVsKCdhJywge1xuXHRcdFx0XHR0ZXh0OiAnVmlldyBvbiBHaXRIdWInLFxuXHRcdFx0XHRocmVmOiAnaHR0cHM6Ly9naXRodWIuY29tL3NsYW13aXNlMDAwMS92dnVuZGVybG9yZS10b29sa2l0LXBsdWdpbicsXG5cdFx0XHRcdGF0dHI6IHsgdGFyZ2V0OiAnX2JsYW5rJyB9XG5cdFx0XHR9KTtcblx0XHRcdGNvbnRhaW5lckVsLnNjcm9sbFRvcCA9IHNhdmVkU2Nyb2xsVG9wO1xuXHRcdH0pKCk7XG5cdH1cblxuXHRhc3luYyB1cGRhdGVWZXJzaW9uRGlzcGxheSgpOiBQcm9taXNlPHZvaWQ+IHtcblx0XHRpZiAoIXRoaXMudmVyc2lvblZhbHVlRWwgfHwgIXRoaXMuZm9yY2VXYXJuaW5nRWwpIHJldHVybjtcblxuXHRcdC8vIHJlYWQgLnZlcnNpb24uanNvblxuXHRcdGxldCBpbnN0YWxsZWQgPSAnJztcblx0XHR0cnkge1xuXHRcdFx0Y29uc3QgdmVyID0gYXdhaXQgdGhpcy5wbHVnaW4uYXBwLnZhdWx0LmFkYXB0ZXIucmVhZCgnLnZlcnNpb24uanNvbicpO1xuXHRcdFx0aW5zdGFsbGVkID0gSlNPTi5wYXJzZSh2ZXIpLnZlcnNpb24gPz8gJyc7XG5cdFx0fSBjYXRjaCB7IH1cblx0XHRjb25zdCBsYXRlc3QgPSAodGhpcy5wbHVnaW4uc2V0dGluZ3MubGF0ZXN0VG9vbGtpdFZlcnNpb24gPz8gJycpLnRyaW0oKTtcblx0XHRjb25zdCBpc01hdGNoID0gaW5zdGFsbGVkID09PSBsYXRlc3Q7XG5cblx0XHQvLyB1cGRhdGUganVzdCB0aGUgdmVyc2lvbiBzcGFuXG5cdFx0dGhpcy52ZXJzaW9uVmFsdWVFbC50ZXh0Q29udGVudCA9IGluc3RhbGxlZCB8fCAnTm90IGluc3RhbGxlZCc7XG5cdFx0dGhpcy52ZXJzaW9uVmFsdWVFbC5hZGRDbGFzcyhpc01hdGNoID8gXCJ2di1zdWNjZXNzXCIgOiBcInZ2LWVycm9yXCIpO1xuXG5cdFx0Ly8gY2xlYXIgYW5kIHJlLXJlbmRlciBqdXN0IHRoZSB3YXJuaW5nIGNvbnRhaW5lclxuXHRcdHRoaXMuZm9yY2VXYXJuaW5nRWwuZW1wdHkoKTtcblx0XHRpZiAoaW5zdGFsbGVkICYmIGxhdGVzdCAmJiBpbnN0YWxsZWQgIT09IGxhdGVzdCkge1xuXHRcdFx0Y29uc3Qgd2FybiA9IHRoaXMuZm9yY2VXYXJuaW5nRWwuY3JlYXRlRGl2KHtcblx0XHRcdFx0dGV4dDogYFx1MjZBMFx1RkUwRiBOZXcgdmVyc2lvbiBhdmFpbGFibGUgKCR7aW5zdGFsbGVkfSBcdTIxOTIgJHtsYXRlc3R9KSBcdTIwMTQgdXNlIHJlZ3VsYXIgdXBkYXRlIGluc3RlYWRgLFxuXHRcdFx0fSk7XG5cdFx0XHR3YXJuLmFkZENsYXNzKFwidnYtc21hbGxcIiwgXCJ2di1tdXRlZFwiLCBcInZ2LWl0YWxpY1wiKTtcblx0XHRcdHdhcm4uc2V0QXR0cigndGl0bGUnLCAnRm9yY2UgdXBkYXRpbmcgd2hpbGUgYSBuZXcgdmVyc2lvbiBpcyBhdmFpbGFibGUgbWF5IHNraXAgaW1wb3J0YW50IGNoYW5nZXMuJyk7XG5cdFx0fVxuXHR9XG5cbn0gIFxuIiwgIi8vIHNyYy9maXJzdGluc3RhbGxjb25maXJtLnRzXG5pbXBvcnQgeyBBcHAsIE1vZGFsLCBCdXR0b25Db21wb25lbnQsIE5vdGljZSwgbm9ybWFsaXplUGF0aCB9IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCB0eXBlIFZWdW5kZXJsb3JlVG9vbGtpdFBsdWdpbiBmcm9tICcuL21haW4nO1xuaW1wb3J0IHsgSW5zdGFsbE9wdGlvbnMsIEluc3RhbGxpbmdNb2RhbCB9IGZyb20gJy4vbWFpbic7XG5pbXBvcnQgeyBpbXBvcnRSdWxlc2V0RGF0YSB9IGZyb20gXCIuL3J1bGVzZXRJbnN0YWxsZXJcIjtcblxuYXN5bmMgZnVuY3Rpb24gYWN0aXZhdGVDb3BpZWRQbHVnaW5zKGFwcDogQXBwKSB7XG4gIGNvbnN0IGZpbGVQYXRoID0gbm9ybWFsaXplUGF0aChgJHthcHAudmF1bHQuY29uZmlnRGlyfS9jb21tdW5pdHktcGx1Z2lucy5qc29uYCk7XG5cbiAgdHJ5IHtcbiAgICBjb25zdCByYXcgPSBhd2FpdCBhcHAudmF1bHQuYWRhcHRlci5yZWFkKGZpbGVQYXRoKTtcbiAgICBjb25zdCBwbHVnaW5zVG9FbmFibGU6IHN0cmluZ1tdID0gSlNPTi5wYXJzZShyYXcpO1xuXG4gICAgaWYgKCFBcnJheS5pc0FycmF5KHBsdWdpbnNUb0VuYWJsZSkpIHJldHVybjtcblxuICAgIGNvbnN0IGxvYWRlZCA9IChhcHAgYXMgYW55KS5wbHVnaW5zO1xuXG4gICAgZm9yIChjb25zdCBwbHVnaW5JZCBvZiBwbHVnaW5zVG9FbmFibGUpIHtcbiAgICAgIGlmICghbG9hZGVkLmVuYWJsZWRQbHVnaW5zLmhhcyhwbHVnaW5JZCkpIHtcbiAgICAgICAgYXdhaXQgbG9hZGVkLmVuYWJsZVBsdWdpbkFuZFNhdmUocGx1Z2luSWQpO1xuICAgICAgfVxuICAgIH1cblxuICB9IGNhdGNoIChlKSB7XG4gICAgY29uc29sZS53YXJuKFwiRmFpbGVkIHRvIGVuYWJsZSB0b29sa2l0IHBsdWdpbnM6XCIsIGUpO1xuICB9XG59XG5cblxuZXhwb3J0IGNsYXNzIENvbmZpcm1GcmVzaEluc3RhbGxNb2RhbCBleHRlbmRzIE1vZGFsIHtcbiAgcHJpdmF0ZSBwbHVnaW46IFZWdW5kZXJsb3JlVG9vbGtpdFBsdWdpbjtcblxuICBjb25zdHJ1Y3RvcihhcHA6IEFwcCwgcGx1Z2luOiBWVnVuZGVybG9yZVRvb2xraXRQbHVnaW4pIHtcbiAgICBzdXBlcihhcHApO1xuICAgIHRoaXMucGx1Z2luID0gcGx1Z2luO1xuICB9XG4gIFxuXG4gIG9uT3BlbigpIHtcbiAgICB0aGlzLmNvbnRlbnRFbC5lbXB0eSgpO1xuXG4gICAgdGhpcy50aXRsZUVsLnNldFRleHQoXCJcdTI2QTBcdUZFMEYgV2FybmluZzogRnJlc2ggVmF1bHQgUmVjb21tZW5kZWRcIik7XG5cbiAgICAvLyBEaXNjbGFpbWVyIHRleHRcbiAgICBjb25zdCB3YXJuaW5nRWwgPSB0aGlzLmNvbnRlbnRFbFxuICAgICAgLmNyZWF0ZUVsKCdkaXYnLCB7XG4gICAgICAgIHRleHQ6XG4gICAgICAgICAgXCJUaGUgZnVsbCBWVnVuZGVybG9yZSBpbnN0YWxsIGlzIGludGVuZGVkIGZvciBhIGZyZXNoLCBlbXB0eSBPYnNpZGlhbiB2YXVsdC4gXCIgK1xuICAgICAgICAgIFwiSWYgeW91IGluc3RhbGwgaW4gYSB2YXVsdCB0aGF0IGFscmVhZHkgaGFzIGZpbGVzLCBhbnkgZmlsZSB3aG9zZSBwYXRoIG1hdGNoZXMgYSBcIiArXG4gICAgICAgICAgXCJWVnVuZGVybG9yZSBUb29sa2l0IGZpbGUgd2lsbCBiZSBvdmVyd3JpdHRlbi5cXG5cXG5cIiArXG4gICAgICAgICAgXCJBbHNvIHRoaW5ncyBjb3VsZCBqdXN0IGdldCBtZXNzeS5cXG5cXG5cIiArXG4gICAgICAgICAgXCJNYWtlIGEgcGVyY2VwdGlvbiBjaGVjayBhbmQgcHJvY2VlZCB3aXRoIGNhdXRpb24hXCIsXG4gICAgICB9KVxuICAgICAgd2FybmluZ0VsLmFkZENsYXNzKFwiaW5zdGFsbGNvbmYtZGlzY2xhaW1lclwiKTtcblxuICAgIC8vIEJ1dHRvbiByb3cgY29udGFpbmVyXG4gICAgY29uc3QgYnV0dG9uUm93ID0gdGhpcy5jb250ZW50RWwuY3JlYXRlRWwoJ2RpdicpO1xuICAgIGJ1dHRvblJvdy5hZGRDbGFzcyhcImluc3RhbGxjb25mLWJ1dHRvbnJvd1wiKTtcblxuICAgIC8vIFwiT2ggZ29kLCBjYW5jZWwhXCIgYnV0dG9uXG4gICAgbmV3IEJ1dHRvbkNvbXBvbmVudChidXR0b25Sb3cpXG4gICAgICAuc2V0QnV0dG9uVGV4dChcIk9oIGdvZCwgY2FuY2VsIVwiKVxuICAgICAgLm9uQ2xpY2soKCkgPT4ge1xuICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICB9KTtcblxuICAgIC8vIFwiSW5zdGFsbCEhXCIgYnV0dG9uXG4gICAgbmV3IEJ1dHRvbkNvbXBvbmVudChidXR0b25Sb3cpXG4gICAgICAuc2V0QnV0dG9uVGV4dChcIkluc3RhbGwhIVwiKVxuICAgICAgLnNldEN0YSgpXG4gICAgICAub25DbGljayhhc3luYyAoKSA9PiB7XG4gICAgICAgIHRoaXMuYXBwLndvcmtzcGFjZS5nZXRMZWF2ZXNPZlR5cGUoJ21hcmtkb3duJykuZm9yRWFjaChsZWFmID0+IGxlYWYuZGV0YWNoKCkpO1xuICAgICAgICB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0TGVhdmVzT2ZUeXBlKCdncmFwaCcpLmZvckVhY2gobGVhZiA9PiBsZWFmLmRldGFjaCgpKTtcbiAgICAgIFxuICAgICAgICB0aGlzLmNsb3NlKCk7XG5cbiAgICAgICAgY29uc3QgaW5zdGFsbGluZyA9IG5ldyBJbnN0YWxsaW5nTW9kYWwodGhpcy5hcHApO1xuICAgICAgICBpbnN0YWxsaW5nLm9wZW4oKTtcblxuICAgICAgICAvLyAyKSBSdW4geW91ciBpbnN0YWxsZXIgKyBjb21wZW5kaXVtIGltcG9ydFxuICAgICAgICBjb25zdCBjb21wZW5kaXVtID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MucnVsZXNldENvbXBlbmRpdW07XG4gICAgICAgIGNvbnN0IHJlZmVyZW5jZXMgPSBbLi4udGhpcy5wbHVnaW4uc2V0dGluZ3MucnVsZXNldFJlZmVyZW5jZV07XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uaW5zdGFsbEZ1bGxUb29sa2l0KHsgY29tcGVuZGl1bSwgcmVmZXJlbmNlcyB9KTtcbiAgICAgICAgICBpZiAoY29tcGVuZGl1bSkge1xuICAgICAgICAgICAgYXdhaXQgaW1wb3J0UnVsZXNldERhdGEoe1xuICAgICAgICAgICAgICBhcHA6IHRoaXMuYXBwLFxuICAgICAgICAgICAgICBlZGl0aW9uS2V5OiBjb21wZW5kaXVtLFxuICAgICAgICAgICAgICB0YXJnZXRQYXRoOiBcIkNvbXBlbmRpdW1cIixcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcihcIlx1Mjc0QyBpbnN0YWxsRnVsbFRvb2xraXQoKSBmYWlsZWQ6XCIsIGVycik7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5pc0ZpcnN0UnVuID0gXCJub1wiO1xuICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcblxuICAgICAgICAvLyA0KSBTd2FwIHRvIHN1Y2Nlc3Mgc2NyZWVuXG4gICAgICAgIGluc3RhbGxpbmcuY2xvc2UoKTtcblxuICAgICAgICBjb25zdCBzdWNjZXNzTW9kYWwgPSBuZXcgTW9kYWwodGhpcy5hcHApO1xuICAgICAgICBzdWNjZXNzTW9kYWwub25PcGVuID0gKCkgPT4ge1xuICAgICAgICAgIHN1Y2Nlc3NNb2RhbC5jb250ZW50RWwuZW1wdHkoKTtcbiAgICAgICAgICBzdWNjZXNzTW9kYWwudGl0bGVFbC5zZXRUZXh0KFwiXHUyNzA1IFRvb2xraXQgSW5zdGFsbGVkXCIpO1xuICAgICAgICAgIGNvbnN0IG1zZyA9IHN1Y2Nlc3NNb2RhbC5jb250ZW50RWwuY3JlYXRlRWwoXCJkaXZcIiwge1xuICAgICAgICAgICAgdGV4dDogXCJSZWxvYWRpbmcgdmF1bHQgaW4gMyBzZWNvbmRzXHUyMDI2XCIsXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgbXNnLmFkZENsYXNzKFwiaW5zdGFsbHN1Y2Nlc3NcIik7XG4gICAgICAgIH07XG4gICAgICAgIHN1Y2Nlc3NNb2RhbC5vcGVuKCk7XG5cbiAgICAgICAgLy8gNSkgcmVsb2FkXG4gICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgIHN1Y2Nlc3NNb2RhbC5jbG9zZSgpO1xuICAgICAgICAgIGxvY2F0aW9uLnJlbG9hZCgpO1xuICAgICAgICB9LCAzMDAwKTtcbiAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICBvbkNsb3NlKCkge1xuICAgICAgICB0aGlzLmNvbnRlbnRFbC5lbXB0eSgpO1xuICAgICAgfVxuICAgIH1cblxuXG4gIiwgIi8vIEZVVFVSRSBTWVNURU1TOiBcbi8vIENhbGwgb2YgQ3RodWx1IFxuLy8gTW90aGVyc2hpcFxuLy8gUEYyRVxuLy8gTVx1MDBGNnJrIEJvcmdcbi8vIEJsYWRlcyBpbiB0aGUgRGFya1xuLy8gRGVsdGEgR3JlZW5cbi8vIFN0YXJmaW5kZXJcbi8vIFRoZSBPbmUgUmluZ1xuLy8gRmF0ZSBcbi8vIEN5YmVycHVua1xuLy8gTGFuY2VyXG4vLyBQb3dlcmVkIGJ5IHRoZSBBcG9jYWx5cHNlXG4vLyBTdGFyIFdhcnMgUlBHXG5cbmV4cG9ydCBpbnRlcmZhY2UgRWRpdGlvbiB7XG4gICAgaWQ6IHN0cmluZzsgICAgICAgICAgICAgIFxuICAgIGxhYmVsOiBzdHJpbmc7ICAgICAgICAgICBcbiAgICByZXBvPzogc3RyaW5nOyAgICAgICAgICAgIFxuICAgIHBhcnNlcj86IHN0cmluZzsgICAgICAgXG4gICAgc291cmNlVXJsPzogc3RyaW5nO1xuICAgIGNhdGVnb3JpZXM/OiBzdHJpbmdbXTtcbiAgfVxuICBcbiAgZXhwb3J0IGNvbnN0IEFWQUlMQUJMRV9FRElUSU9OUzogRWRpdGlvbltdID0gW1xuICAgIHtcbiAgICAgIGlkOiAnbm9uZScsXG4gICAgICBsYWJlbDogJ05vbmUnLFxuICAgICAgcmVwbzogJycsXG4gICAgICBwYXJzZXI6ICcnLFxuICAgICAgc291cmNlVXJsOiAnJyxcbiAgICB9LFxuICAgIHtcbiAgICAgIGlkOiAnNWUtMjAxNCcsXG4gICAgICBsYWJlbDogJ0QmRCA1ZSAoMjAxNCknLFxuICAgICAgcmVwbzogJzVldG9vbHMtbWlycm9yLTMvNWV0b29scy0yMDE0LXNyYycsXG4gICAgICBwYXJzZXI6ICc1ZS0yMDE0JyxcbiAgICAgIHNvdXJjZVVybDogJ2h0dHBzOi8vcmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbS81ZXRvb2xzLW1pcnJvci0zLzVldG9vbHMtMjAxNC1zcmMvbWFpbi9kYXRhJyxcbiAgICAgIGNhdGVnb3JpZXM6IFsnJ10sXG4gICAgfSxcbiAgICB7XG4gICAgICBpZDogJzVlLTIwMjUnLFxuICAgICAgbGFiZWw6ICdEJkQgNWUgKDIwMjQpJyxcbiAgICAgIHJlcG86ICc1ZXRvb2xzLW1pcnJvci0zLzVldG9vbHMtc3JjJyxcbiAgICAgIHBhcnNlcjogJzVlLTIwMjUnLFxuICAgICAgc291cmNlVXJsOiAnaHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tLzVldG9vbHMtbWlycm9yLTMvNWV0b29scy1zcmMvbWFpbi9kYXRhJyxcbiAgICB9LFxuIFxuICAgIFxuXG4gIF07XG5cbiAgICAvLyB7XG4gICAgLy8gICBpZDogJycsXG4gICAgLy8gICBsYWJlbDogJycsXG4gICAgLy8gICByZXBvOiAnJyxcbiAgICAvLyAgIHBhcnNlcjogJycsXG4gICAgLy8gICBzb3VyY2VVcmw6ICcnLFxuICAgIC8vICAgY2F0ZWdvcmllczogWycnXSxcbiAgICAvLyB9LCAgIiwgIi8vZG5kIDVlIDIwMTQgaW5zdGFsbGVyXG5cbmltcG9ydCB7IEFwcCwgbm9ybWFsaXplUGF0aCB9IGZyb20gXCJvYnNpZGlhblwiO1xuaW1wb3J0IHR5cGUgeyBFZGl0aW9uIH0gZnJvbSBcIi4uLy4uL2VkaXRpb25zXCI7XG5pbXBvcnQgeyBwYXJzZVNwZWxsc0ZpbGUgfSBmcm9tIFwiLi9zcGVsbHNcIjtcbmltcG9ydCB7IHBhcnNlQmVzdGlhcnlGaWxlIH0gZnJvbSBcIi4vYmVzdGlhcnlcIjtcbmltcG9ydCB7IHBhcnNlSXRlbXNGaWxlIH0gZnJvbSBcIi4vaXRlbXNcIjtcbmltcG9ydCB7IHBhcnNlU3BlY2llc0ZpbGUgfSBmcm9tIFwiLi9zcGVjaWVzXCI7XG5pbXBvcnQgeyBwYXJzZUNsYXNzRmlsZSB9IGZyb20gXCIuL2NsYXNzZXNcIjtcbmltcG9ydCB7IHBhcnNlQWN0aW9uc0ZpbGUsIHBhcnNlQ29uZGl0aW9uc0Rpc2Vhc2VzRmlsZSwgcGFyc2VTZW5zZXNGaWxlLCBwYXJzZVNraWxsc0ZpbGUgfSBmcm9tIFwiLi9ydWxlc1wiO1xuaW1wb3J0IHsgcGFyc2VGZWF0c0ZpbGUgfSBmcm9tIFwiLi9mZWF0c1wiO1xuaW1wb3J0IHsgcGFyc2VCYWNrZ3JvdW5kc0ZpbGUgfSBmcm9tIFwiLi9iYWNrZ3JvdW5kc1wiO1xuaW1wb3J0IHsgVEZpbGUgfSBmcm9tIFwib2JzaWRpYW5cIjtcblxuXG4vLyBcdTIwMTQgR2l0SHViIGxpc3RpbmdzIFx1MjAxNFxuYXN5bmMgZnVuY3Rpb24gbGlzdFNwZWxsRmlsZXNGcm9tR2l0SHViKHJlcG86IHN0cmluZyk6IFByb21pc2U8c3RyaW5nW10+IHtcbiAgY29uc3QgdXJsID0gYGh0dHBzOi8vYXBpLmdpdGh1Yi5jb20vcmVwb3MvJHtyZXBvfS9jb250ZW50cy9kYXRhL3NwZWxsc2A7XG4gIGNvbnN0IHJlcyA9IGF3YWl0IGZldGNoKHVybCk7XG4gIGNvbnN0IGRhdGEgPSAoYXdhaXQgcmVzLmpzb24oKSkgYXMgQXJyYXk8eyBuYW1lOiBzdHJpbmc7IHR5cGU6IHN0cmluZyB9PjtcbiAgcmV0dXJuIGRhdGFcbiAgICAuZmlsdGVyKGl0ZW0gPT4gaXRlbS50eXBlID09PSBcImZpbGVcIiAmJiBpdGVtLm5hbWUuc3RhcnRzV2l0aChcInNwZWxscy1cIikgJiYgaXRlbS5uYW1lLmVuZHNXaXRoKFwiLmpzb25cIikpXG4gICAgLm1hcChpdGVtID0+IGl0ZW0ubmFtZSk7XG59XG5cbmFzeW5jIGZ1bmN0aW9uIGxpc3RCZXN0aWFyeUZpbGVzRnJvbUdpdEh1YihyZXBvOiBzdHJpbmcpOiBQcm9taXNlPHN0cmluZ1tdPiB7XG4gIGNvbnN0IHVybCA9IGBodHRwczovL2FwaS5naXRodWIuY29tL3JlcG9zLyR7cmVwb30vY29udGVudHMvZGF0YS9iZXN0aWFyeWA7XG4gIGNvbnN0IHJlcyA9IGF3YWl0IGZldGNoKHVybCk7XG4gIGNvbnN0IGxpc3QgPSAoYXdhaXQgcmVzLmpzb24oKSkgYXMgQXJyYXk8eyBuYW1lOiBzdHJpbmc7IHR5cGU6IHN0cmluZyB9PjtcbiAgY29uc3QgQ09SRV9TT1VSQ0VTID0gW1xuICAgIFwiYmVzdGlhcnktcGhiLmpzb25cIiwgXCJiZXN0aWFyeS1tbS5qc29uXCIsIFwiYmVzdGlhcnktZG1nLmpzb25cIixcbiAgICBcImJlc3RpYXJ5LXhnZS5qc29uXCIsIFwiYmVzdGlhcnktdmdtLmpzb25cIiwgXCJiZXN0aWFyeS10Y2UuanNvblwiLFxuICAgIFwiYmVzdGlhcnktZWd3Lmpzb25cIiwgXCJiZXN0aWFyeS1lcmx3Lmpzb25cIiwgXCJiZXN0aWFyeS1tdGYuanNvblwiLFxuICAgIFwiYmVzdGlhcnktdnJnci5qc29uXCIsIFwiYmVzdGlhcnktY29zLmpzb25cIiwgXCJiZXN0aWFyeS1vb3RhLmpzb25cIixcbiAgICBcImJlc3RpYXJ5LXBvdGEuanNvblwiLCBcImJlc3RpYXJ5LWhvdGRxLmpzb25cIiwgXCJiZXN0aWFyeS1yb3QuanNvblwiLFxuICAgIFwiYmVzdGlhcnktc2t0Lmpzb25cIiwgXCJiZXN0aWFyeS10ZnR5cC5qc29uXCIsIFwiYmVzdGlhcnktdG9hLmpzb25cIlxuICBdO1xuICByZXR1cm4gbGlzdFxuICAgIC5maWx0ZXIoaXRlbSA9PiBpdGVtLnR5cGUgPT09IFwiZmlsZVwiICYmIENPUkVfU09VUkNFUy5pbmNsdWRlcyhpdGVtLm5hbWUpKVxuICAgIC5tYXAoaXRlbSA9PiBpdGVtLm5hbWUpO1xufVxuXG5jb25zdCBJVEVNX0pTT05fRklMRVMgPSBbXG4gIFwiaXRlbXMtYmFzZS5qc29uXCIsXG4gIFwiaXRlbXMuanNvblwiLFxuICBcIm9iamVjdHMuanNvblwiLFxuICBcInZlaGljbGVzLmpzb25cIixcbiAgXCJkZWNrcy5qc29uXCIsXG5dO1xuXG5hc3luYyBmdW5jdGlvbiBsaXN0SXRlbUZpbGVzRnJvbUdpdEh1YihyZXBvOiBzdHJpbmcpOiBQcm9taXNlPHN0cmluZ1tdPiB7XG4gIGNvbnN0IHVybCA9IGBodHRwczovL2FwaS5naXRodWIuY29tL3JlcG9zLyR7cmVwb30vY29udGVudHMvZGF0YWA7XG4gIGNvbnN0IHJlcyA9IGF3YWl0IGZldGNoKHVybCk7XG4gIGNvbnN0IGRhdGEgPSAoYXdhaXQgcmVzLmpzb24oKSkgYXMgQXJyYXk8eyBuYW1lOiBzdHJpbmc7IHR5cGU6IHN0cmluZyB9PjtcbiAgcmV0dXJuIGRhdGFcbiAgICAuZmlsdGVyKGl0ZW0gPT4gaXRlbS50eXBlID09PSBcImZpbGVcIiAmJiBJVEVNX0pTT05fRklMRVMuaW5jbHVkZXMoaXRlbS5uYW1lKSlcbiAgICAubWFwKGl0ZW0gPT4gaXRlbS5uYW1lKTtcbn1cblxuYXN5bmMgZnVuY3Rpb24gbGlzdENsYXNzRmlsZXNGcm9tR2l0SHViKHJlcG86IHN0cmluZyk6IFByb21pc2U8c3RyaW5nW10+IHtcbiAgY29uc3QgdXJsID0gYGh0dHBzOi8vYXBpLmdpdGh1Yi5jb20vcmVwb3MvJHtyZXBvfS9jb250ZW50cy9kYXRhL2NsYXNzYDtcbiAgY29uc3QgcmVzID0gYXdhaXQgZmV0Y2godXJsKTtcbiAgY29uc3QgbGlzdGluZyA9IChhd2FpdCByZXMuanNvbigpKSBhcyBBcnJheTx7IG5hbWU6IHN0cmluZzsgdHlwZTogc3RyaW5nIH0+O1xuICByZXR1cm4gbGlzdGluZ1xuICAgIC5maWx0ZXIoaXRlbSA9PlxuICAgICAgaXRlbS50eXBlID09PSBcImZpbGVcIiAmJlxuICAgICAgaXRlbS5uYW1lLnN0YXJ0c1dpdGgoXCJjbGFzcy1cIikgJiZcbiAgICAgIGl0ZW0ubmFtZS5lbmRzV2l0aChcIi5qc29uXCIpXG4gICAgKVxuICAgIC5tYXAoaXRlbSA9PiBpdGVtLm5hbWUpO1xufVxuXG4vLyBcdTIwMTQgZW5zdXJlIHRoZSB2YXVsdCBmb2xkZXIgZXhpc3RzIFx1MjAxNFxuYXN5bmMgZnVuY3Rpb24gZW5zdXJlRm9sZGVyKGFwcDogQXBwLCBmb2xkZXJQYXRoOiBzdHJpbmcpIHtcbiAgY29uc3QgcGFydHMgPSBmb2xkZXJQYXRoLnNwbGl0KFwiL1wiKTtcbiAgbGV0IGN1cnIgPSBcIlwiO1xuICBmb3IgKGNvbnN0IHAgb2YgcGFydHMpIHtcbiAgICBjdXJyID0gY3VyciA/IGAke2N1cnJ9LyR7cH1gIDogcDtcbiAgICB0cnkgeyBhd2FpdCBhcHAudmF1bHQuY3JlYXRlRm9sZGVyKGN1cnIpOyB9XG4gICAgY2F0Y2gge30gLy8gYWxyZWFkeSBleGlzdHNcbiAgfVxufVxuXG4vLyBcdTIwMTQgdGhlIG9uZSBlbnRyeS1wb2ludCB0aGF0IHlvdXIgdG9wLWxldmVsIGNhbGxzIFx1MjAxNFxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGltcG9ydEVkaXRpb25EYXRhKHBhcmFtczoge1xuICBhcHA6IEFwcDtcbiAgZWRpdGlvbjogRWRpdGlvbjtcbiAgdGFyZ2V0UGF0aDogc3RyaW5nO1xufSkge1xuICBjb25zdCB7IGFwcCwgZWRpdGlvbiwgdGFyZ2V0UGF0aCB9ID0gcGFyYW1zO1xuICBjb25zdCByZXBvID0gZWRpdGlvbi5yZXBvID8/IFwiXCI7XG5cbiAgLy8gXHVEODNEXHVERDM5IFNQRUxMU1xuICB7XG4gICAgY29uc3Qgc3BlbGxGaWxlcyA9IGF3YWl0IGxpc3RTcGVsbEZpbGVzRnJvbUdpdEh1YihyZXBvKTtcbiAgICBmb3IgKGNvbnN0IGZpbGVOYW1lIG9mIHNwZWxsRmlsZXMpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHJlcyAgPSBhd2FpdCBmZXRjaChgJHtlZGl0aW9uLnNvdXJjZVVybH0vc3BlbGxzLyR7ZmlsZU5hbWV9YCk7XG4gICAgICAgIGNvbnN0IGpzb24gPSBhd2FpdCByZXMuanNvbigpO1xuICAgICAgICBjb25zdCBmaWxlcyA9IHBhcnNlU3BlbGxzRmlsZShqc29uLCBlZGl0aW9uLmlkKTtcbiAgICAgICAgZm9yIChjb25zdCBtZCBvZiBmaWxlcykge1xuICAgICAgICAgIGNvbnN0IGZ1bGxQYXRoID0gbm9ybWFsaXplUGF0aChgJHt0YXJnZXRQYXRofS9TcGVsbHMvJHttZC5wYXRofWApO1xuICAgICAgICAgIGNvbnN0IGZvbGRlciAgID0gZnVsbFBhdGguc3BsaXQoXCIvXCIpLnNsaWNlKDAsIC0xKS5qb2luKFwiL1wiKTtcbiAgICAgICAgICBhd2FpdCBlbnN1cmVGb2xkZXIoYXBwLCBmb2xkZXIpO1xuICAgICAgICAgIGF3YWl0IGFwcC52YXVsdC5hZGFwdGVyLndyaXRlKGZ1bGxQYXRoLCBtZC5jb250ZW50KTtcbiAgICAgICAgfVxuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBjb25zb2xlLndhcm4oYEZhaWxlZCB0byBpbXBvcnQgc3BlbGwgJHtmaWxlTmFtZX06YCwgZSk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLy8gXHVEODNEXHVERDM5IEJFU1RJQVJZXG4gIHtcbiAgICBjb25zdCBiZXN0aWFyeUZpbGVzID0gYXdhaXQgbGlzdEJlc3RpYXJ5RmlsZXNGcm9tR2l0SHViKHJlcG8pO1xuICAgIGZvciAoY29uc3QgZmlsZU5hbWUgb2YgYmVzdGlhcnlGaWxlcykge1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgcmVzICAgID0gYXdhaXQgZmV0Y2goYCR7ZWRpdGlvbi5zb3VyY2VVcmx9L2Jlc3RpYXJ5LyR7ZmlsZU5hbWV9YCk7XG4gICAgICAgIGNvbnN0IGpzb24gICA9IGF3YWl0IHJlcy5qc29uKCk7XG4gICAgICAgIGNvbnN0IHBhcnNlZCA9IHBhcnNlQmVzdGlhcnlGaWxlKGpzb24sIGVkaXRpb24uaWQpO1xuICAgICAgICBmb3IgKGNvbnN0IG1kIG9mIHBhcnNlZCkge1xuICAgICAgICAgIGNvbnN0IGZ1bGxQYXRoID0gbm9ybWFsaXplUGF0aChgJHt0YXJnZXRQYXRofS9CZXN0aWFyeS8ke21kLnBhdGh9YCk7XG4gICAgICAgICAgY29uc3QgZm9sZGVyICAgPSBmdWxsUGF0aC5zcGxpdChcIi9cIikuc2xpY2UoMCwgLTEpLmpvaW4oXCIvXCIpO1xuICAgICAgICAgIGF3YWl0IGVuc3VyZUZvbGRlcihhcHAsIGZvbGRlcik7XG4gICAgICAgICAgYXdhaXQgYXBwLnZhdWx0LmFkYXB0ZXIud3JpdGUoZnVsbFBhdGgsIG1kLmNvbnRlbnQpO1xuICAgICAgICB9XG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGNvbnNvbGUud2FybihgRmFpbGVkIHRvIGltcG9ydCBiZXN0aWFyeSAke2ZpbGVOYW1lfTpgLCBlKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvLyBcdUQ4M0RcdUREMzkgSVRFTVNcbiAge1xuICAgIGNvbnN0IGl0ZW1GaWxlcyA9IGF3YWl0IGxpc3RJdGVtRmlsZXNGcm9tR2l0SHViKHJlcG8pO1xuICAgIGZvciAoY29uc3QgZm4gb2YgaXRlbUZpbGVzKSB7XG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCByZXMgID0gYXdhaXQgZmV0Y2goYCR7ZWRpdGlvbi5zb3VyY2VVcmx9LyR7Zm59YCk7XG4gICAgICAgIGNvbnN0IGpzb24gPSBhd2FpdCByZXMuanNvbigpO1xuICAgICAgICBjb25zdCBtZEZpbGVzID0gcGFyc2VJdGVtc0ZpbGUoanNvbiwgZWRpdGlvbi5pZCk7XG4gICAgICAgIGZvciAoY29uc3QgbWQgb2YgbWRGaWxlcykge1xuICAgICAgICAgIGNvbnN0IGZ1bGxQYXRoID0gbm9ybWFsaXplUGF0aChgJHt0YXJnZXRQYXRofS8ke21kLnBhdGh9YCk7XG4gICAgICAgICAgY29uc3QgZm9sZGVyICAgPSBmdWxsUGF0aC5zcGxpdChcIi9cIikuc2xpY2UoMCwgLTEpLmpvaW4oXCIvXCIpO1xuICAgICAgICAgIGF3YWl0IGVuc3VyZUZvbGRlcihhcHAsIGZvbGRlcik7XG4gICAgICAgICAgYXdhaXQgYXBwLnZhdWx0LmFkYXB0ZXIud3JpdGUoZnVsbFBhdGgsIG1kLmNvbnRlbnQpO1xuICAgICAgICB9XG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGNvbnNvbGUud2FybihgRmFpbGVkIHRvIGltcG9ydCBpdGVtcyBmcm9tICR7Zm59OmAsIGUpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuLy8gXHVEODNEXHVERDM5IFNQRUNJRVNcbntcbiAgY29uc3QgcmVzICA9IGF3YWl0IGZldGNoKGAke2VkaXRpb24uc291cmNlVXJsfS9yYWNlcy5qc29uYCk7XG4gIGNvbnN0IGpzb24gPSBhd2FpdCByZXMuanNvbigpO1xuICBjb25zdCBtZEZpbGVzID0gcGFyc2VTcGVjaWVzRmlsZShqc29uLCBlZGl0aW9uLmlkKTtcbiAgZm9yIChjb25zdCBtZCBvZiBtZEZpbGVzKSB7XG4gICAgY29uc3QgZnVsbFBhdGggPSBub3JtYWxpemVQYXRoKGAke3RhcmdldFBhdGh9L1BsYXllciBCdWlsZC8ke21kLnBhdGh9YCk7XG4gICAgYXdhaXQgZW5zdXJlRm9sZGVyKGFwcCwgZnVsbFBhdGguc3BsaXQoXCIvXCIpLnNsaWNlKDAsIC0xKS5qb2luKFwiL1wiKSk7XG4gICAgYXdhaXQgYXBwLnZhdWx0LmFkYXB0ZXIud3JpdGUoZnVsbFBhdGgsIG1kLmNvbnRlbnQpO1xuICB9XG59XG4vLyBcdUQ4M0RcdUREMzkgRkVUQ0ggT1BUSU9OQUwgRkVBVFVSRVMgSlNPTlxubGV0IG9wdGlvbmFsRmVhdHVyZXM6IGFueVtdID0gW107XG50cnkge1xuICBjb25zdCByZXMgID0gYXdhaXQgZmV0Y2goYCR7ZWRpdGlvbi5zb3VyY2VVcmx9L29wdGlvbmFsZmVhdHVyZXMuanNvbmApO1xuICBjb25zdCByYXcgID0gYXdhaXQgcmVzLmpzb24oKTtcbiAgb3B0aW9uYWxGZWF0dXJlcyA9IEFycmF5LmlzQXJyYXkocmF3Lm9wdGlvbmFsZmVhdHVyZSlcbiAgICA/IHJhdy5vcHRpb25hbGZlYXR1cmVcbiAgICA6IFtdO1xufSBjYXRjaCAoZSkge1xuICBjb25zb2xlLndhcm4oXCJGYWlsZWQgdG8gaW1wb3J0IG9wdGlvbmFsZmVhdHVyZXMuanNvbjpcIiwgZSk7XG59XG5cbi8vIFx1RDgzRFx1REQzOSBDTEFTU0VTXG57XG4gIGNvbnN0IGNsYXNzRmlsZXMgPSBhd2FpdCBsaXN0Q2xhc3NGaWxlc0Zyb21HaXRIdWIocmVwbyk7XG4gIGZvciAoY29uc3QgZmlsZU5hbWUgb2YgY2xhc3NGaWxlcykge1xuICAgIHRyeSB7XG4gICAgICAvLyBmZXRjaCB0aGUgcmF3IGNsYXNzIEpTT05cbiAgICAgIGNvbnN0IHJlcyAgICA9IGF3YWl0IGZldGNoKGAke2VkaXRpb24uc291cmNlVXJsfS9jbGFzcy8ke2ZpbGVOYW1lfWApO1xuICAgICAgY29uc3QganNvbiAgID0gYXdhaXQgcmVzLmpzb24oKTtcblxuICAgICAgLy8gcGFyc2UgaW50byBvbmUgb3IgbW9yZSBtYXJrZG93biBmaWxlc1xuICAgICAgY29uc3QgbWRGaWxlcyA9IHBhcnNlQ2xhc3NGaWxlKFxuICAgICAgICBqc29uLFxuICAgICAgICBlZGl0aW9uLmlkLFxuICAgICAgICBmaWxlTmFtZSxcbiAgICAgICAgb3B0aW9uYWxGZWF0dXJlc1xuICAgICAgKTtcbiAgICAgIGZvciAoY29uc3QgbWQgb2YgbWRGaWxlcykge1xuICAgICAgICBjb25zdCBmdWxsUGF0aCA9IG5vcm1hbGl6ZVBhdGgoYCR7dGFyZ2V0UGF0aH0vUGxheWVyIEJ1aWxkLyR7bWQucGF0aH1gKTtcbiAgICAgICAgLy8gMSkgZW5zdXJlIHRoZSBmb2xkZXIgZXhpc3RzXG4gICAgICAgIGF3YWl0IGVuc3VyZUZvbGRlcihhcHAsIGZ1bGxQYXRoLnNwbGl0KFwiL1wiKS5zbGljZSgwLCAtMSkuam9pbihcIi9cIikpO1xuXG4gICAgICAgIC8vIDIpIHdyaXRlIHZpYSBPYnNpZGlhblx1MjAxOXMgQVBJIHNvIG5vdGVzIHJlZnJlc2hcbiAgICAgICAgY29uc3QgZXhpc3RpbmcgPSBhcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKGZ1bGxQYXRoKTtcbiAgICAgICAgaWYgKGV4aXN0aW5nIGluc3RhbmNlb2YgVEZpbGUpIHtcbiAgICAgICAgICAvLyBPdmVyd3JpdGUgYW4gZXhpc3Rpbmcgbm90ZSBhbmQgZmlyZSB0aGUgY2hhbmdlIGV2ZW50XG4gICAgICAgICAgYXdhaXQgYXBwLnZhdWx0Lm1vZGlmeShleGlzdGluZywgbWQuY29udGVudCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gQ3JlYXRlIGEgYnJhbmQtbmV3IG5vdGUgKGFsc28gZmlyZXMgdGhlIGNoYW5nZSBldmVudClcbiAgICAgICAgICBhd2FpdCBhcHAudmF1bHQuY3JlYXRlKGZ1bGxQYXRoLCBtZC5jb250ZW50KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIGNvbnNvbGUud2FybihgRmFpbGVkIHRvIGltcG9ydCBjbGFzcyAke2ZpbGVOYW1lfTpgLCBlKTtcbiAgICB9XG4gIH1cbn1cblxuXG4gLy8gXHVEODNEXHVERDM5IFJVTEVTOiBBQ1RJT05TXG4gIHtcbiAgICB0cnkge1xuXG4gICAgICBjb25zdCByZXMgID0gYXdhaXQgZmV0Y2goYCR7ZWRpdGlvbi5zb3VyY2VVcmx9L2FjdGlvbnMuanNvbmApO1xuICAgICAgY29uc3QganNvbiA9IGF3YWl0IHJlcy5qc29uKCk7XG4gICAgXG4gICAgICBjb25zdCBtZEZpbGVzID0gcGFyc2VBY3Rpb25zRmlsZShqc29uLCBlZGl0aW9uLmlkKTtcbiAgICBcbiAgICAgIGZvciAoY29uc3QgbWQgb2YgbWRGaWxlcykge1xuICAgICAgICBjb25zdCBmdWxsUGF0aCA9IG5vcm1hbGl6ZVBhdGgoXG4gICAgICAgICAgYCR7dGFyZ2V0UGF0aH0vJHttZC5wYXRofWBcbiAgICAgICAgKTtcbiAgICAgICAgY29uc3QgZm9sZGVyID0gZnVsbFBhdGguc3BsaXQoXCIvXCIpLnNsaWNlKDAsIC0xKS5qb2luKFwiL1wiKTtcblxuICAgICAgICBhd2FpdCBlbnN1cmVGb2xkZXIoYXBwLCBmb2xkZXIpO1xuICAgICAgICBhd2FpdCBhcHAudmF1bHQuYWRhcHRlci53cml0ZShmdWxsUGF0aCwgbWQuY29udGVudCk7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgY29uc29sZS53YXJuKFwiRmFpbGVkIHRvIGltcG9ydCBhY3Rpb25zLmpzb246XCIsIGUpO1xuICAgIH1cbiAgfVxuXG5cbiAgICAvLyBcdUQ4M0RcdUREMzkgUlVMRVM6IENPTkRJVElPTlMgJiBESVNFQVNFU1xuICB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHJlcyAgPSBhd2FpdCBmZXRjaChgJHtlZGl0aW9uLnNvdXJjZVVybH0vY29uZGl0aW9uc2Rpc2Vhc2VzLmpzb25gKTtcbiAgICAgIGNvbnN0IGpzb24gPSBhd2FpdCByZXMuanNvbigpO1xuICAgICAgY29uc3QgbWRGaWxlcyA9IHBhcnNlQ29uZGl0aW9uc0Rpc2Vhc2VzRmlsZShqc29uLCBlZGl0aW9uLmlkKTtcbiAgICAgIGZvciAoY29uc3QgbWQgb2YgbWRGaWxlcykge1xuICAgICAgICBjb25zdCBmdWxsUGF0aCA9IG5vcm1hbGl6ZVBhdGgoXG4gICAgICAgICAgYCR7dGFyZ2V0UGF0aH0vJHttZC5wYXRofWBcbiAgICAgICAgKTtcbiAgICAgICAgY29uc3QgZm9sZGVyID0gZnVsbFBhdGguc3BsaXQoXCIvXCIpLnNsaWNlKDAsIC0xKS5qb2luKFwiL1wiKTtcbiAgICAgICAgYXdhaXQgZW5zdXJlRm9sZGVyKGFwcCwgZm9sZGVyKTtcbiAgICAgICAgYXdhaXQgYXBwLnZhdWx0LmFkYXB0ZXIud3JpdGUoZnVsbFBhdGgsIG1kLmNvbnRlbnQpO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIGNvbnNvbGUud2FybihcIkZhaWxlZCB0byBpbXBvcnQgY29uZGl0aW9uc2Rpc2Vhc2VzLmpzb246XCIsIGUpO1xuICAgIH1cbiAgfVxuXG4gICAvLyBcdUQ4M0RcdUREMzkgUlVMRVM6IFNFTlNFU1xuICB7XG4gICAgdHJ5IHtcblxuICAgICAgY29uc3QgcmVzICA9IGF3YWl0IGZldGNoKGAke2VkaXRpb24uc291cmNlVXJsfS9zZW5zZXMuanNvbmApO1xuICAgICAgY29uc3QganNvbiA9IGF3YWl0IHJlcy5qc29uKCk7XG4gICAgXG4gICAgICBjb25zdCBtZEZpbGVzID0gcGFyc2VTZW5zZXNGaWxlKGpzb24sIGVkaXRpb24uaWQpO1xuICAgIFxuICAgICAgZm9yIChjb25zdCBtZCBvZiBtZEZpbGVzKSB7XG4gICAgICAgIGNvbnN0IGZ1bGxQYXRoID0gbm9ybWFsaXplUGF0aChcbiAgICAgICAgICBgJHt0YXJnZXRQYXRofS8ke21kLnBhdGh9YFxuICAgICAgICApO1xuICAgICAgICBjb25zdCBmb2xkZXIgPSBmdWxsUGF0aC5zcGxpdChcIi9cIikuc2xpY2UoMCwgLTEpLmpvaW4oXCIvXCIpO1xuXG4gICAgICAgIGF3YWl0IGVuc3VyZUZvbGRlcihhcHAsIGZvbGRlcik7XG4gICAgICAgIGF3YWl0IGFwcC52YXVsdC5hZGFwdGVyLndyaXRlKGZ1bGxQYXRoLCBtZC5jb250ZW50KTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICBjb25zb2xlLndhcm4oXCJGYWlsZWQgdG8gaW1wb3J0IHNlbnNlcy5qc29uOlwiLCBlKTtcbiAgICB9XG4gIH1cblxuICAgICAvLyBcdUQ4M0RcdUREMzkgUlVMRVM6IFNLSUxMU1xuICB7XG4gICAgdHJ5IHtcblxuICAgICAgY29uc3QgcmVzICA9IGF3YWl0IGZldGNoKGAke2VkaXRpb24uc291cmNlVXJsfS9za2lsbHMuanNvbmApO1xuICAgICAgY29uc3QganNvbiA9IGF3YWl0IHJlcy5qc29uKCk7XG4gICAgXG4gICAgICBjb25zdCBtZEZpbGVzID0gcGFyc2VTa2lsbHNGaWxlKGpzb24sIGVkaXRpb24uaWQpO1xuICAgIFxuICAgICAgZm9yIChjb25zdCBtZCBvZiBtZEZpbGVzKSB7XG4gICAgICAgIGNvbnN0IGZ1bGxQYXRoID0gbm9ybWFsaXplUGF0aChcbiAgICAgICAgICBgJHt0YXJnZXRQYXRofS8ke21kLnBhdGh9YFxuICAgICAgICApO1xuICAgICAgICBjb25zdCBmb2xkZXIgPSBmdWxsUGF0aC5zcGxpdChcIi9cIikuc2xpY2UoMCwgLTEpLmpvaW4oXCIvXCIpO1xuXG4gICAgICAgIGF3YWl0IGVuc3VyZUZvbGRlcihhcHAsIGZvbGRlcik7XG4gICAgICAgIGF3YWl0IGFwcC52YXVsdC5hZGFwdGVyLndyaXRlKGZ1bGxQYXRoLCBtZC5jb250ZW50KTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICBjb25zb2xlLndhcm4oXCJGYWlsZWQgdG8gaW1wb3J0IHNraWxscy5qc29uOlwiLCBlKTtcbiAgICB9XG4gIH1cblxuICAgLy8gXHVEODNEXHVERDM5IEZFQVRTXG4gIHtcbiAgICB0cnkge1xuXG4gICAgICBjb25zdCByZXMgID0gYXdhaXQgZmV0Y2goYCR7ZWRpdGlvbi5zb3VyY2VVcmx9L2ZlYXRzLmpzb25gKTtcbiAgICAgIGNvbnN0IGpzb24gPSBhd2FpdCByZXMuanNvbigpO1xuICAgIFxuICAgICAgY29uc3QgbWRGaWxlcyA9IHBhcnNlRmVhdHNGaWxlKGpzb24sIGVkaXRpb24uaWQpO1xuICAgIFxuICAgICAgZm9yIChjb25zdCBtZCBvZiBtZEZpbGVzKSB7XG4gICAgICAgIGNvbnN0IGZ1bGxQYXRoID0gbm9ybWFsaXplUGF0aChcbiAgICAgICAgICBgJHt0YXJnZXRQYXRofS8ke21kLnBhdGh9YFxuICAgICAgICApO1xuICAgICAgICBjb25zdCBmb2xkZXIgPSBmdWxsUGF0aC5zcGxpdChcIi9cIikuc2xpY2UoMCwgLTEpLmpvaW4oXCIvXCIpO1xuXG4gICAgICAgIGF3YWl0IGVuc3VyZUZvbGRlcihhcHAsIGZvbGRlcik7XG4gICAgICAgIGF3YWl0IGFwcC52YXVsdC5hZGFwdGVyLndyaXRlKGZ1bGxQYXRoLCBtZC5jb250ZW50KTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICBjb25zb2xlLndhcm4oXCJGYWlsZWQgdG8gaW1wb3J0IGZlYXRzLmpzb246XCIsIGUpO1xuICAgIH1cbiAgfVxuXG4vLyBcdUQ4M0RcdUREMzkgQkFDS0dST1VORFNcbntcbiAgdHJ5IHtcbiAgICBjb25zdCByZXMgID0gYXdhaXQgZmV0Y2goYCR7ZWRpdGlvbi5zb3VyY2VVcmx9L2JhY2tncm91bmRzLmpzb25gKTtcbiAgICBjb25zdCBqc29uID0gYXdhaXQgcmVzLmpzb24oKTtcblxuICAgIGNvbnN0IG1kRmlsZXMgPSBwYXJzZUJhY2tncm91bmRzRmlsZShqc29uLCBlZGl0aW9uLmlkKTtcblxuICAgIGZvciAoY29uc3QgbWQgb2YgbWRGaWxlcykge1xuICAgICAgLy8gbWQucGF0aCBpcyBcIlBsYXllciBCdWlsZC9CYWNrZ3JvdW5kcy88TmFtZT4ubWRcIlxuICAgICAgY29uc3QgZnVsbFBhdGggPSBub3JtYWxpemVQYXRoKGAke3RhcmdldFBhdGh9LyR7bWQucGF0aH1gKTtcbiAgICAgIGNvbnN0IGZvbGRlciAgID0gZnVsbFBhdGguc3BsaXQoXCIvXCIpLnNsaWNlKDAsIC0xKS5qb2luKFwiL1wiKTtcblxuICAgICAgYXdhaXQgZW5zdXJlRm9sZGVyKGFwcCwgZm9sZGVyKTtcbiAgICAgIGF3YWl0IGFwcC52YXVsdC5hZGFwdGVyLndyaXRlKGZ1bGxQYXRoLCBtZC5jb250ZW50KTtcbiAgICB9XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICBjb25zb2xlLndhcm4oXCJGYWlsZWQgdG8gaW1wb3J0IGJhY2tncm91bmRzLmpzb246XCIsIGUpO1xuICB9XG59XG5cbn0iLCAiLy8gaGVscGVycy9zb3VyY2VNYXAudHNcblxuLy8gTWFwIG9mIDVlIHNvdXJjZSBhYmJyZXZpYXRpb25zIHRvIHRoZWlyIGZ1bGwgdGl0bGVzXG5jb25zdCBTT1VSQ0VfTkFNRV9NQVA6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4gPSB7XG4gIC8vIENvcmUgcnVsZWJvb2tzXG4gIFBIQjogXCJQbGF5ZXIncyBIYW5kYm9va1wiLFxuICBNTTogIFwiTW9uc3RlciBNYW51YWxcIixcbiAgRE1HOiBcIkR1bmdlb24gTWFzdGVyJ3MgR3VpZGVcIixcblxuICAvLyBPZmZpY2lhbCBleHBhbnNpb25zICYgYWR2ZW50dXJlIG1vZHVsZXNcbiAgQ29TOiAgXCJDdXJzZSBvZiBTdHJhaGRcIixcbiAgT290QTogXCJPdXQgb2YgdGhlIEFieXNzXCIsXG4gIFBvdEE6IFwiUHJpbmNlcyBvZiB0aGUgQXBvY2FseXBzZVwiLFxuICBIb3REUTogXCJIb2FyZCBvZiB0aGUgRHJhZ29uIFF1ZWVuXCIsXG4gIFJvVDogIFwiUmlzZSBvZiBUaWFtYXRcIixcbiAgU0tUOiAgXCJTdG9ybSBLaW5nJ3MgVGh1bmRlclwiLFxuICBUZnRZUDpcIlRhbGVzIGZyb20gdGhlIFlhd25pbmcgUG9ydGFsXCIsXG4gIFRvQTogIFwiVG9tYiBvZiBBbm5paGlsYXRpb25cIixcblxuICAvLyBTdXBwbGVtZW50YWwgZ3VpZGVzXG4gIFhHRTogXCJYYW5hdGhhcidzIEd1aWRlIHRvIEV2ZXJ5dGhpbmdcIixcbiAgVkdNOiBcIlZvbG8ncyBHdWlkZSB0byBNb25zdGVyc1wiLFxuICBUQ0U6IFwiVGFzaGEncyBDYXVsZHJvbiBvZiBFdmVyeXRoaW5nXCIsXG4gIEVHVzogXCJFYmVycm9uOiBSaXNpbmcgZnJvbSB0aGUgTGFzdCBXYXJcIixcbiAgRVJMVzpcIkV4cGxvcmVyJ3MgR3VpZGUgdG8gV2lsZGVtb3VudFwiLFxuICBNVEY6IFwiTW9uc3RlcnMgb2YgdGhlIE11bHRpdmVyc2VcIixcbiAgVlJHUjpcIlZhbiBSaWNodGVuJ3MgR3VpZGUgdG8gUmF2ZW5sb2Z0XCIsXG5cbiAgLy8gQWRkaXRpb25hbCBzb3VyY2Vib29rc1xuICBBQUc6ICAgICAgXCJBc3RyYWwgQWR2ZW50dXJlclx1MjAxOXMgR3VpZGVcIixcbiAgQUk6ICAgICAgIFwiQWNxdWlzaXRpb25zIEluY29ycG9yYXRlZFwiLFxuICBBaXRGUkFWRlQ6XCJBZHZlbnR1cmVzIGluIHRoZSBGb3Jnb3R0ZW4gUmVhbG1zOiBBIFZpc3VhbCBGaWVsZCBUZXN0XCIsXG4gIEJNVDogICAgICBcIkJpZyBNb25zdGVyIFRvbWVcIixcbiAgRG9EazogICAgIFwiRHJhZ29uIG9mIERhcmtrZWVwXCIsXG4gIEZURDogICAgICBcIkZpemJhblx1MjAxOXMgVHJlYXN1cnkgb2YgRHJhZ29uc1wiLFxuICBHR1I6ICAgICAgXCJHdWlsZG1hc3Rlclx1MjAxOXMgR3VpZGUgdG8gUmF2bmljYVwiLFxuICBHSExvRTogICAgXCJHaG9zdHMgb2YgdGhlIEhvcml6b246IExpZ2h0IE92ZXIgRWxlbnNhcmlhXCIsXG4gIElEUm90RjogICBcIkljZXdpbmQgRGFsZTogUmltZSBvZiB0aGUgRnJvc3RtYWlkZW5cIixcbiAgTExLOiAgICAgIFwiTG9zdCBMYWJvcmF0b3J5IG9mIEt3YWxpc2hcIixcbiAgU2F0TzogICAgIFwiU2FwcGhpcmUgb2YgVHJ1dGhcIixcbiAgU0NDOiAgICAgIFwiU3RyaXhoYXZlbjogQ3VycmljdWx1bSBvZiBDaGFvc1wiLFxuICBURENTUjogICAgXCJUaGUgRHVuZ2VvbiBDb2FjaFx1MjAxOXMgUnVsZWJvb2tcIixcbiAgSnR0UkM6ICAgIFwiSm91cm5leXMgdGhyb3VnaCB0aGUgUmFkaWFudCBDaXRhZGVsXCIsXG4gIFwiQWl0RlItQVZUXCI6XCJBZHZlbnR1cmVzIGluIHRoZSBGb3Jnb3R0ZW4gUmVhbG1zOiBBIFZlcmRhbnQgVG9tYlwiLFxuICBcIkFpdEZSLUZDRFwiOlwiQWR2ZW50dXJlcyBpbiB0aGUgRm9yZ290dGVuIFJlYWxtczogRnJvbSBDeWFuIERlcHRoc1wiLFxuICBSTVI6ICAgICAgXCJEdW5nZW9ucyBhbmQgRHJhZ29uczogUmljayBhbmQgTW9ydHlcIixcbiAgU0NBRzogICAgIFwiU3dvcmQgQ29hc3QgQWR2ZW50dXJlcidzIEd1aWRlXCIsXG4gIEVFUEM6ICAgICBcIkVsZW1lbnRhbCBFdmlsIFBsYXllcidzIENvbXBhbmlvblwiLFxuICBNT1Q6ICAgICAgXCJNeXRoaWMgT2R5c3NleXMgb2YgVGhlcm9zXCIsXG4gIFdCdFc6ICAgICBcIlRoZSBXaWxkIEJleW9uZCB0aGUgV2l0Y2hsaWdodFwiLFxuICBCR0RJQTogICAgXCJCYWxkdXIncyBHYXRlOiBEZXNjZW50IEludG8gQXZlcm51c1wiLFxuICBUb0ZXOiAgICAgXCJUdXJuIG9mIEZvcnR1bmUncyBXaGVlbFwiLFxuICBDb0E6ICAgICAgXCJDaGFpbnMgb2YgQXNtb2RldXNcIixcbiAgQ1JDb3ROOiAgIFwiQ3JpdGljYWwgUm9sZTogQ2FsbCBvZiB0aGUgTmV0aGVyZGVlcFwiLFxuICBUb0Q6ICAgICAgXCJUeXJhbm55IG9mIERyYWdvbnNcIixcbiAgTVBNTTogICAgIFwiTW9yZGVua2FpbmVuIFByZXNlbnRzOiBNb25zdGVycyBvZiB0aGUgTXVsdGl2ZXJzZVwiLFxuICBMb1g6ICAgICAgXCJMaWdodCBvZiBYYXJ5eGlzXCIsXG4gIFFmdElTOiAgICBcIlF1ZXN0cyBmcm9tIHRoZSBJbmZpbml0ZSBTdGFpcmNhc2VcIixcbiAgV0RIOiAgICAgIFwiV2F0ZXJkZWVwOiBEcmFnb24gSGVpc3RcIixcbiAgV0RNTTogICAgIFwiV2F0ZXJkZWVwOiBEdW5nZW9uIG9mIHRoZSBNYWQgTWFnZVwiLFxuICBQYUJUU086ICAgXCJQaGFuZGVsdmVyIGFuZCBCZWxvdzogVGhlIFNoYXR0ZXJlZCBPYmVsaXNrXCIsXG4gIENNOiAgICAgICBcIkNhbmRsZWtlZXAgTXlzdGVyaWVzXCIsXG4gIEdvUzogICAgICBcIkdob3N0cyBvZiBTYWx0bWFyc2hcIixcbiAgRFNvdERROiAgIFwiRHJhZ29ubGFuY2U6IFNoYWRvdyBvZiB0aGUgRHJhZ29uIFF1ZWVuXCIsXG4gIEtmdEdWOiAgICBcIktleXMgZnJvbSB0aGUgR29sZGVuIFZhdWx0XCIsXG4gIFNEVzogICAgICBcIkVzc2VudGlhbHMgS2l0OiBTbGVlcGluZyBEcmFnb24ncyBXYWtlXCIsXG4gIERvU0k6ICAgICBcIkRyYWdvbnMgb2YgU3Rvcm13cmVjayBJc2xlXCIsXG4gIEdvdFNGOiAgICBcIkdpYW50cyBvZiB0aGUgU3RhciBGb3JnZVwiLFxuICBESVA6ICAgICAgXCJFc3NlbnRpYWxzIEtpdDogRHJhZ29uIG9mIEljZXNwaXJlIFBlYWtcIixcbiAgU0xXOiAgICAgIFwiRXNzZW50aWFscyBLaXQ6IFN0b3JtIExvcmQncyBXcmF0aFwiLFxuICBJTVI6ICAgICAgXCJJbmZlcm5hbCBNYWNoaW5lIFJlYnVpbGRcIixcbiAgVkVvUjogICAgIFwiVmVjbmE6IEV2ZSBvZiBSdWluXCIsXG4gIFBTSTogICAgICBcIlBsYW5lIFNoaWZ0OiBJbm5pc3RyYWRcIixcbiAgQUFUTTogICAgIFwiQWR2ZW50dXJlIEF0bGFzOiBUaGUgTW9ydHVhcnlcIixcbiAgUFNaOiAgICAgIFwiUGxhbmUgU2hpZnQ6IFplbmRpa2FyXCIsXG4gIERDOiAgICAgICBcIkVzc2VudGlhbHMgS2l0OiBEaXZpbmUgQ29udGVudGlvblwiLFxuICBMTW9QOiAgICAgXCJMb3N0IE1pbmUgb2YgUGhhbmRlbHZlclwiLFxuICBSTUJSRTogICAgXCJUaGUgTG9zdCBEdW5nZW9uIG9mIFJpY2tlZG5lc3M6IEJpZyBSaWNrIEVuZXJneVwiLFxuICBIZnRUOiAgICAgXCJIdW50IGZvciB0aGUgVGhlc3NhbGh5ZHJhXCIsXG4gIFBTWDogICAgICBcIlBsYW5lIFNoaWZ0OiBJeGFsYW5cIixcbiAgSEZTdENNOiAgIFwiSGVyb2VzJyBGZWFzdDogU2F2aW5nIHRoZSBDaGlsZHJlbnMgTWVudVwiLFxuICBTakE6ICAgICAgXCJTcGVsbGphbW1lciBBY2FkZW15XCIsXG4gIExLOiAgICAgICBcIkxpZ2h0bmluZyBLZWVwXCIsXG4gIFJ0RzogICAgICBcIlJldHVybiB0byB0aGUgR2xvcnlcIixcbiAgVFRQOiAgICAgIFwiVGhlIFRvcnRsZSBQYWNrYWdlXCIsXG4gIExSOiAgICAgICBcIkxvY2F0aGFoIFJpc2luZ1wiLFxuICBQU0E6ICAgICAgXCJQbGFuZSBTaGlmdDogQW1vbmtoZXRcIixcbiAgT0dBOiAgICAgIFwiT25lIEdydW5nIEFib3ZlXCIsXG4gIFwiTlJILVRMVFwiOiAgXCJOZXJkcyBSZXN0b3JpbmcgSGFybW9ueTogVGhlIExvc3QgVG9tYlwiLFxuICBcIk5SSC1BVFwiOiAgIFwiTmVyZHMgUmVzdG9yaW5nIEhhcm1vbnk6IEFkdmVudHVyZSBUb2dldGhlclwiLFxuICBCR0c6ICAgICAgXCJCaWdieSBQcmVzZW50czogR2xvcnkgb2YgdGhlIEdpYW50c1wiLFxuICBSb1RPUzogICAgXCJUaGUgUmlzZSBvZiBUaWFtYXQgT25saW5lIFN1cHBsZW1lbnRcIixcbiAgWE10UzogICAgIFwiWCBNYXJrcyB0aGUgU3BvdFwiLFxuICBcIkhBVC1MTUlcIjogIFwiSG9ub3IgQW1vbmcgVGhlaXZlczogTGVnZW5kYXJ5IE1hZ2ljIEl0ZW1zXCIsXG4gIERpdExDb1Q6ICBcIkRlc2NlbnQgaW50byB0aGUgTG9zdCBDYXZlcm5zIG9mIFRzb2pjYW50aFwiLFxuICBcIkFpdEZSLUROXCI6IFwiQWR2ZW50dXJlcyBpbiB0aGUgRm9yZ290dGVuIFJlYWxtczogRGVlcGVzdCBOaWdodFwiLFxuICBcIkFpdEZSLVRIUFwiOlwiQWR2ZW50dXJlcyBpbiB0aGUgRm9yZ290dGVuIFJlYWxtczogVGhlIEhpZGRlbiBQYWdlc1wiLFxuICBCQU06ICAgICAgXCJCb28ncyBBc3RyYWwgTWVuYWdlcmllXCIsXG4gIEFaZnlUOiAgICBcIkEgWmliIGZvciBZb3VyIFRob3VndHNcIixcbiAgTUNWMkRDOiAgIFwiTW9uc3Ryb3VzIENvbXBlbmRpdW0gVm9sdW1lIDI6IERyYWdvbmxhbmNlIENyZWF0dXJlc1wiLFxuICBQU0s6ICAgICAgXCJQbGFuZSBTaGlmdDogS2FsYWRlc2hcIixcbiAgUFNEOiAgICAgIFwiUGxhbmUgU2hpZnQ6IERvbWluYXJpYVwiLFxuICBBV006ICAgICAgXCJBZHZlbnR1cmUgd2l0aCBNdWtcIixcbiAgVUFUaGVNeXN0aWNDbGFzczogXCJVbmVhcnRoZWQgQXJjYW5hOiBUaGUgTXlzdGljIENsYXNzXCIsXG4gIEFMQ3Vyc2VPZlN0cmFoZDogXCJBZHZlbnR1cmVycyBMZWFndWU6IEN1cnNlIG9mIFN0cmFoZFwiLFxuICBBTEVsZW1lbnRhbEV2aWw6IFwiQWR2ZW50dXJlcnMgTGVhZ3VlOiBFbGVtZW50YWwgRXZpbFwiLFxuICBBTFJhZ2VPZkRlbW9uczogIFwiQWR2ZW50dXJlcnMgTGVhZ3VlOiBSYWdlIG9mIERlbW9uc1wiXG59O1xuXG4vKipcbiAqIFJldHVybnMgdGhlIGZ1bGwgc291cmNlIG5hbWUgZm9yIGEgZ2l2ZW4gYWJicmV2aWF0aW9uLlxuICogT3B0aW9uYWxseSBhcHBlbmRzIHllYXIgZm9yIFBIQiB2YXJpYW50cy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldEZ1bGxTb3VyY2VOYW1lKGFiYnJldjogc3RyaW5nLCBlZGl0aW9uSWQ/OiBzdHJpbmcpOiBzdHJpbmcge1xuICBsZXQgbmFtZSA9IFNPVVJDRV9OQU1FX01BUFthYmJyZXZdID8/IGFiYnJldjtcblxuICAvLyBBcHBlbmQgeWVhciBmb3IgUEhCIGlmIHRoZSBlZGl0aW9uIGNvbnRleHQgaXMga25vd25cbiAgaWYgKGFiYnJldiA9PT0gXCJQSEJcIikge1xuICAgIGlmIChlZGl0aW9uSWQ/LmluY2x1ZGVzKFwiMjAxNFwiKSkgbmFtZSArPSBcIiAoMjAxNClcIjtcbiAgICBlbHNlIGlmIChlZGl0aW9uSWQ/LmluY2x1ZGVzKFwiMjAyNVwiKSkgbmFtZSArPSBcIiAoMjAyNSlcIjtcbiAgfVxuXG4gIHJldHVybiBuYW1lO1xufVxuIiwgIi8vIHBhcnNlcnMvNWUtanNvbi9oZWxwZXJzL3RhZ1JlcGxhY2VyLnRzXG5cbmV4cG9ydCBmdW5jdGlvbiByZXBsYWNlNWVUYWdzKGlucHV0OiB1bmtub3duKTogc3RyaW5nIHtcbiAgLy8gMSkgVHVybiBhcnJheXMgaW50byBzcGFjZS1qb2luZWQgc3RyaW5nc1xuICAvLyAyKSBMZWF2ZSBzdHJpbmdzIGFsb25lXG4gIC8vIDMpIENvZXJjZSBldmVyeXRoaW5nIGVsc2UgdG8gc3RyaW5nIChvciBlbXB0eSlcbiAgbGV0IHRleHQ6IHN0cmluZztcbiAgaWYgKEFycmF5LmlzQXJyYXkoaW5wdXQpKSB7XG4gICAgdGV4dCA9IGlucHV0LmpvaW4oXCIgXCIpO1xuICB9IGVsc2UgaWYgKHR5cGVvZiBpbnB1dCA9PT0gXCJzdHJpbmdcIikge1xuICAgIHRleHQgPSBpbnB1dDtcbiAgfSBlbHNlIHtcbiAgICB0ZXh0ID0gU3RyaW5nKGlucHV0ID8/IFwiXCIpO1xuICB9XG5cbiAgLy8gbm93IHJ1biBhbGwgeW91ciBALXRhZyByZXBsYWNlbWVudHMgb24gdGhhdCB0ZXh0XG4gIHJldHVybiB0ZXh0XG4gICAgLnJlcGxhY2UoL1xceyNpdGVtRW50cnlcXHMrKFtefXxdKykoPzpcXHxbXn1dKik/XFx9L2dpLCAoX20sIHJhd05hbWUpID0+IHtcbiAgICAgIHJldHVybiBgW1ske2NhcGl0YWxpemVFYWNoKFN0cmluZyhyYXdOYW1lKS50cmltKCkpfV1dYDtcbiAgICB9XG4gICAgKVxuICAgIC5yZXBsYWNlKC9cXHtAKHNwZWxsfGl0ZW18Y3JlYXR1cmV8cmFjZSkgKFtefH1dKykoPzpcXHxbXn1dKyk/XFx9L2csIChfLCBfXywgbmFtZSkgPT5cbiAgICAgIGBbWyR7Y2FwaXRhbGl6ZUVhY2gobmFtZSl9XV1gXG4gICAgKVxuICAgIC5yZXBsYWNlKC9cXHtAKGNvbmRpdGlvbnxzdGF0dXN8YWN0aW9ufHNraWxsKSAoW158fV0rKSg/OlxcfFtefV0rKT9cXH0vZywgKF8sIHRhZywgbmFtZSkgPT5cbiAgICAgIGBbWyR7Y2FwaXRhbGl6ZSh0YWcpfXMjJHtuYW1lfXwke2NhcGl0YWxpemVFYWNoKG5hbWUpfV1dYFxuICAgIClcbiAgICAucmVwbGFjZSgvXFx7QGNsYXNzRmVhdHVyZSAoW158fV0rKVxcfChbXnx9XSspKD86XFx8W159XSspP1xcfS9nLCAoXywgZmVhdHVyZSwgY2xzKSA9PlxuICAgICAgYFtbJHtjbHN9IyR7ZmVhdHVyZX1dXWBcbiAgICApXG4gICAgLnJlcGxhY2UoL1xce0AoYm9va3xmaWx0ZXIpIChbXnx9XSspKD86XFx8W159XSspP1xcfS9nLCAoXywgX18sIHR4dCkgPT4gdHh0KVxuICAgIC5yZXBsYWNlKC9cXHtAbm90ZSAoW159XSspXFx9L2csIChfLCBub3RlKSA9PiBgKiR7bm90ZX0qYClcbiAgICAucmVwbGFjZSgvXFx7QChkYW1hZ2V8ZGljZXxkY3xoaXR8c2Vuc2UpIChbXn1dKylcXH0vZywgKF8sIF9fLCB2YWx1ZSkgPT4gdmFsdWUpXG4gICAgLnJlcGxhY2UoL1xce0BjaGFuY2UgKFtefH1dKykoPzpcXHxbXn1dKyk/XFx9L2csIChfLCB2YWx1ZSkgPT4gYCR7dmFsdWV9JWApXG4gICAgLnJlcGxhY2UoL1xce0BxdWlja3JlZiAoW158fV0rKSg/OlxcfFtefF0qXFx8W159XSopP1xcfS9nLCAoXywgdGVybSkgPT4ge1xuICAgICAgY29uc3Qga25vd24gPSBbXG4gICAgICAgIFwiZGlmZmljdWx0IHRlcnJhaW5cIiwgXCJ0b3RhbCBjb3ZlclwiLCBcImhhbGYgY292ZXJcIiwgXCJ0aHJlZS1xdWFydGVycyBjb3ZlclwiLFxuICAgICAgICBcImhlYXZpbHkgb2JzY3VyZWRcIiwgXCJsaWdodGx5IG9ic2N1cmVkXCJcbiAgICAgIF07XG4gICAgICByZXR1cm4ga25vd24uaW5jbHVkZXModGVybS50b0xvd2VyQ2FzZSgpKVxuICAgICAgICA/IGBbW1J1bGVzIyR7Y2FwaXRhbGl6ZUVhY2godGVybSl9XV1gXG4gICAgICAgIDogdGVybTtcbiAgICB9KVxuICAgIC5yZXBsYWNlKC9cXHtcXEA1ZXRvb2xzXFxzKyhbXnx9XSspXFx8W159XStcXH0vZywgJyQxJylcbiAgICAucmVwbGFjZSgvXFx7QHJlY2hhcmdlXFxzKihbXn1dKylcXH0vZywgKF8sIG51bSkgPT4gYChyZWNoYXJnZTogJHtudW0udHJpbSgpfSlgKVxuICAgIC5yZXBsYWNlKC9cXHtAKHNjYWxlZGljZXxzY2FsZWRhbWFnZSlbXn1dKlxcfChbXnx9XSspXFx9L2csIChfLCBfXywgdmFsdWUpID0+IHZhbHVlKVxuICAgIC5yZXBsYWNlKC9cXHtAZDIwW159XSpcXH0vZywgXCJcIilcbiAgICAucmVwbGFjZSgvXFx7QFtefV0rXFx9L2csIFwiXCIpO1xufVxuXG5mdW5jdGlvbiBjYXBpdGFsaXplKHN0cjogc3RyaW5nKTogc3RyaW5nIHtcbiAgcmV0dXJuIHN0ci5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIHN0ci5zbGljZSgxKS50b0xvd2VyQ2FzZSgpO1xufVxuXG5mdW5jdGlvbiBjYXBpdGFsaXplRWFjaChzdHI6IHN0cmluZyk6IHN0cmluZyB7XG4gIHJldHVybiBzdHIuc3BsaXQoXCIgXCIpLm1hcChjYXBpdGFsaXplKS5qb2luKFwiIFwiKTtcbn1cbiIsICJpbXBvcnQgeyByZXBsYWNlNWVUYWdzIH0gZnJvbSBcIi4vdGFnUmVwbGFjZXJcIjtcblxuZXhwb3J0IGZ1bmN0aW9uIHJlbmRlck1hcmtkb3duVGFibGUoZW50cnk6IGFueSk6IHN0cmluZyB7XG4gIGlmIChlbnRyeS50eXBlICE9PSBcInRhYmxlXCIgfHwgIUFycmF5LmlzQXJyYXkoZW50cnkucm93cykpIHJldHVybiBcIlwiO1xuXG4gIGNvbnN0IGNhcHRpb24gPSBlbnRyeS5jYXB0aW9uID8gYCMjIyMjICR7ZW50cnkuY2FwdGlvbn1cXG5gIDogXCJcIjtcblxuICBjb25zdCBoZWFkZXJzID0gKGVudHJ5LmNvbExhYmVscyA/PyBbXSlcbiAgICAubWFwKChoOiBzdHJpbmcpID0+IHJlcGxhY2U1ZVRhZ3MoaC50cmltKCkpKTsgLy8gXHUyNzA1IHRhZyByZXBsYWNlIG9uIGhlYWRlcnNcblxuICBjb25zdCBoZWFkZXJSb3cgPSBgfCAke2hlYWRlcnMuam9pbihcIiB8IFwiKX0gfGA7XG4gIGNvbnN0IGRpdmlkZXJSb3cgPSBgfCAke2hlYWRlcnMubWFwKCgpID0+IFwiOi0tXCIpLmpvaW4oXCIgfCBcIil9IHxgO1xuXG4gIGNvbnN0IGJvZHlSb3dzID0gZW50cnkucm93cy5tYXAoKHJvdzogYW55W10pID0+IHtcbiAgICBjb25zdCBjZWxscyA9IHJvdy5tYXAoKGNlbGwpID0+IHtcbiAgICAgIGlmICh0eXBlb2YgY2VsbCA9PT0gXCJzdHJpbmdcIikgcmV0dXJuIHJlcGxhY2U1ZVRhZ3MoY2VsbCk7IC8vIFx1MjcwNSB0YWcgcmVwbGFjZSBzdHJpbmdzXG5cbiAgICAgIGlmICh0eXBlb2YgY2VsbCA9PT0gXCJvYmplY3RcIikge1xuICAgICAgICBpZiAoY2VsbC5yb2xsPy5leGFjdCAhPT0gdW5kZWZpbmVkKSByZXR1cm4gYCR7Y2VsbC5yb2xsLmV4YWN0fWA7XG4gICAgICAgIGlmIChjZWxsLnJvbGw/Lm1pbiAhPT0gdW5kZWZpbmVkICYmIGNlbGwucm9sbD8ubWF4ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICByZXR1cm4gYCR7Y2VsbC5yb2xsLm1pbn1cdTIwMTMke2NlbGwucm9sbC5tYXh9YDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVwbGFjZTVlVGFncyhKU09OLnN0cmluZ2lmeShjZWxsKSk7IC8vIGZhbGxiYWNrIGZvciB1bmtub3duIHNoYXBlc1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gcmVwbGFjZTVlVGFncyhTdHJpbmcoY2VsbCkpO1xuICAgIH0pO1xuXG4gICAgcmV0dXJuIGB8ICR7Y2VsbHMuam9pbihcIiB8IFwiKX0gfGA7XG4gIH0pO1xuXG4gIHJldHVybiBgJHtjYXB0aW9ufSR7aGVhZGVyUm93fVxcbiR7ZGl2aWRlclJvd31cXG4ke2JvZHlSb3dzLmpvaW4oXCJcXG5cIil9YDtcbn1cbiIsICIvL2Zvcm1hdGVudHJ5IGRuZCA1ZSAyMDE0XG5pbXBvcnQgeyByZXBsYWNlNWVUYWdzIH0gZnJvbSBcIi4vdGFnUmVwbGFjZXJcIjtcbmltcG9ydCB7IHJlbmRlck1hcmtkb3duVGFibGUgfSBmcm9tIFwiLi9tYXJrZG93blRhYmxlXCI7XG5cbmNvbnN0IGVuc3VyZVBlcmlvZCA9IChzOiBzdHJpbmcpID0+ICgvWy4hP11cXHMqJC8udGVzdChzKSA/IHMgOiBgJHtzfS5gKTtcblxuZnVuY3Rpb24gcmVuZGVyTGlzdChsaXN0OiBhbnkpOiBzdHJpbmcge1xuICBjb25zdCBpdGVtcyA9IEFycmF5LmlzQXJyYXkobGlzdD8uaXRlbXMpID8gbGlzdC5pdGVtcyA6IFtdO1xuICBpZiAoIWl0ZW1zLmxlbmd0aCkgcmV0dXJuIFwiXCI7XG5cbiAgY29uc3QgbGluZXM6IHN0cmluZ1tdID0gW107XG5cbiAgZm9yIChjb25zdCBpdCBvZiBpdGVtcykge1xuICAgIC8vIHNpbXBsZSBzdHJpbmcgYnVsbGV0XG4gICAgaWYgKHR5cGVvZiBpdCA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgbGluZXMucHVzaChgLSAke3JlcGxhY2U1ZVRhZ3MoaXQpfWApO1xuICAgICAgY29udGludWU7XG4gICAgfVxuXG4gICAgLy8gb2JqZWN0IGJ1bGxldDogbmFtZSArIGVudHJ5L2VudHJpZXNcbiAgICBpZiAoaXQgJiYgdHlwZW9mIGl0ID09PSBcIm9iamVjdFwiKSB7XG4gICAgICBjb25zdCBoZWFkID1cbiAgICAgICAgdHlwZW9mIGl0Lm5hbWUgPT09IFwic3RyaW5nXCIgJiYgaXQubmFtZS50cmltKClcbiAgICAgICAgICA/IGAqKioke2Vuc3VyZVBlcmlvZChyZXBsYWNlNWVUYWdzKGl0Lm5hbWUpKX0qKipgXG4gICAgICAgICAgOiBcIlwiO1xuXG4gICAgICBsZXQgYm9keSA9IFwiXCI7XG4gICAgICBpZiAodHlwZW9mIGl0LmVudHJ5ID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgIGJvZHkgPSByZXBsYWNlNWVUYWdzKGl0LmVudHJ5KTtcbiAgICAgIH0gZWxzZSBpZiAoQXJyYXkuaXNBcnJheShpdC5lbnRyaWVzKSkge1xuICAgICAgICBib2R5ID0gaXQuZW50cmllc1xuICAgICAgICAgIC5tYXAoKGU6IGFueSkgPT5cbiAgICAgICAgICAgIHR5cGVvZiBlID09PSBcInN0cmluZ1wiID8gcmVwbGFjZTVlVGFncyhlKSA6IGZvcm1hdEVudHJ5KGUpXG4gICAgICAgICAgKVxuICAgICAgICAgIC5qb2luKFwiIFwiKTtcbiAgICAgIH1cblxuICAgICAgY29uc3QgbGluZSA9IFtoZWFkLCBib2R5XS5maWx0ZXIoQm9vbGVhbikuam9pbihcIiBcIikudHJpbSgpO1xuICAgICAgbGluZXMucHVzaChgLSAke2xpbmV9YC50cmltKCkpO1xuICAgICAgY29udGludWU7XG4gICAgfVxuXG4gICAgLy8gZmluYWwgZmFsbGJhY2sgKHNob3VsZG5cdTIwMTl0IHVzdWFsbHkgaGl0KVxuICAgIGxpbmVzLnB1c2goYC0gJHtTdHJpbmcoaXQgPz8gXCJcIil9YCk7XG4gIH1cblxuICByZXR1cm4gbGluZXMuam9pbihcIlxcblwiKTtcbn1cblxuZnVuY3Rpb24gcmVuZGVyVGFibGUodDogYW55KTogc3RyaW5nIHtcbiAgY29uc3QgaGVhZGVyczogc3RyaW5nW10gPSBBcnJheS5pc0FycmF5KHQ/LmNvbExhYmVscylcbiAgICA/IHQuY29sTGFiZWxzLm1hcCgoaDogYW55KSA9PiByZXBsYWNlNWVUYWdzKGgpKVxuICAgIDogW107XG5cbiAgY29uc3Qgcm93czogc3RyaW5nW11bXSA9IEFycmF5LmlzQXJyYXkodD8ucm93cylcbiAgICA/IHQucm93cy5tYXAoKHI6IGFueSkgPT5cbiAgICAgICAgQXJyYXkuaXNBcnJheShyKSA/IHIubWFwKChjZWxsOiBhbnkpID0+IHJlcGxhY2U1ZVRhZ3MoY2VsbCkpIDogW11cbiAgICAgIClcbiAgICA6IFtdO1xuXG4gIHJldHVybiByZW5kZXJNYXJrZG93blRhYmxlKFtoZWFkZXJzLCAuLi5yb3dzXSk7XG5cbn1cblxuLyoqIEdlbmVyaWMgNWUudG9vbHMgZW50cnkgXHUyMTkyIG1hcmtkb3duIHBhcmFncmFwaC9idWxsZXRzL2V0Yy4gKi9cbmV4cG9ydCBmdW5jdGlvbiBmb3JtYXRFbnRyeShlbnRyeTogYW55KTogc3RyaW5nIHtcbiAgLy8gYmFyZSBzdHJpbmdcbiAgaWYgKHR5cGVvZiBlbnRyeSA9PT0gXCJzdHJpbmdcIikgcmV0dXJuIHJlcGxhY2U1ZVRhZ3MoZW50cnkpO1xuXG4gIC8vIG51bGwvdW5kZWZpbmVkIG9yIG5vbi1vYmplY3RzXG4gIGlmICghZW50cnkgfHwgdHlwZW9mIGVudHJ5ICE9PSBcIm9iamVjdFwiKSByZXR1cm4gU3RyaW5nKGVudHJ5ID8/IFwiXCIpO1xuXG4gIC8vIGV4cGxpY2l0IGxpc3QgXHUyMTkyIGJ1bGxldHNcbiAgaWYgKGVudHJ5LnR5cGUgPT09IFwibGlzdFwiKSB7XG4gICAgcmV0dXJuIHJlbmRlckxpc3QoZW50cnkpO1xuICB9XG5cbiAgLy8gbmVzdGVkIFx1MjAxQ2VudHJpZXNcdTIwMUQgYmxvY2s7IHRpdGxlIGlmIHByZXNlbnRcbiAgaWYgKGVudHJ5LnR5cGUgPT09IFwiZW50cmllc1wiKSB7XG4gICAgY29uc3QgaGVhZCA9XG4gICAgICB0eXBlb2YgZW50cnkubmFtZSA9PT0gXCJzdHJpbmdcIiAmJiBlbnRyeS5uYW1lLnRyaW0oKVxuICAgICAgICA/IGAqKioke2Vuc3VyZVBlcmlvZChyZXBsYWNlNWVUYWdzKGVudHJ5Lm5hbWUpKX0qKiogYFxuICAgICAgICA6IFwiXCI7XG5cbiAgICBjb25zdCBib2R5ID0gQXJyYXkuaXNBcnJheShlbnRyeS5lbnRyaWVzKVxuICAgICAgPyBlbnRyeS5lbnRyaWVzLm1hcCgoZTogYW55KSA9PiBmb3JtYXRFbnRyeShlKSkuam9pbihcIlxcblxcblwiKVxuICAgICAgOiBcIlwiO1xuXG4gICAgcmV0dXJuIChoZWFkICsgYm9keSkudHJpbSgpO1xuICB9XG5cbiAgLy8gdGFibGVcbiAgaWYgKGVudHJ5LnR5cGUgPT09IFwidGFibGVcIikge1xuICAgIHJldHVybiByZW5kZXJUYWJsZShlbnRyeSk7XG4gIH1cblxuICAvLyBmYWxsYmFjazogdHJ5IGNvbW1vbiBmaWVsZHMgb3Igc3RyaW5naWZ5XG4gIGlmIChBcnJheS5pc0FycmF5KGVudHJ5LmVudHJpZXMpKSB7XG4gICAgcmV0dXJuIGVudHJ5LmVudHJpZXMubWFwKChlOiBhbnkpID0+IGZvcm1hdEVudHJ5KGUpKS5qb2luKFwiXFxuXFxuXCIpO1xuICB9XG4gIGlmICh0eXBlb2YgZW50cnkuZW50cnkgPT09IFwic3RyaW5nXCIpIHtcbiAgICByZXR1cm4gcmVwbGFjZTVlVGFncyhlbnRyeS5lbnRyeSk7XG4gIH1cblxuICByZXR1cm4gcmVwbGFjZTVlVGFncyhTdHJpbmcoZW50cnkpKTtcbn1cbiIsICIvLyBkbmQgNWUgMjAxNCBiZXN0aWFyeSBwYXJzZXJcblxuaW1wb3J0IHR5cGUgeyBQYXJzZWRNYXJrZG93bkZpbGUgfSBmcm9tIFwic3JjL3R5cGVzXCI7XG5pbXBvcnQgeyBnZXRGdWxsU291cmNlTmFtZSB9IGZyb20gXCIuL2hlbHBlcnMvc291cmNlTWFwXCI7XG5pbXBvcnQgeyByZXBsYWNlNWVUYWdzIH0gZnJvbSBcIi4vaGVscGVycy90YWdSZXBsYWNlclwiO1xuaW1wb3J0IHsgcmVuZGVyTWFya2Rvd25UYWJsZSB9IGZyb20gXCIuL2hlbHBlcnMvbWFya2Rvd25UYWJsZVwiO1xuaW1wb3J0IHsgYnVpbGRGTSwgc2VyaWFsaXplRnJvbnRtYXR0ZXIsIEJFU1RJQVJZX01FVEFfREVGUywgdW5pZmllZFNraWxscywgRk1fRklFTERTIH0gZnJvbSBcIi4vaGVscGVycy9mcm9udG1hdHRlclwiO1xuXG5jb25zdCBza2lwcGVkTW9uc3RlcnM6IHN0cmluZ1tdID0gW107XG5cbi8vIFNpemUgYWJicmV2aWF0aW9ucyBtYXBwaW5nXG5leHBvcnQgXG5jb25zdCBTSVpFX01BUDogUmVjb3JkPHN0cmluZywgc3RyaW5nPiA9IHtcbiAgVDogXCJUaW55XCIsXG4gIFM6IFwiU21hbGxcIixcbiAgTTogXCJNZWRpdW1cIixcbiAgTDogXCJMYXJnZVwiLFxuICBIOiBcIkh1Z2VcIixcbiAgRzogXCJHYXJnYW50dWFuXCJcbn07XG5cbi8vIEFsaWdubWVudCBhYmJyZXZpYXRpb25zIG1hcHBpbmdcbmNvbnN0IEFMSUdOTUVOVF9NQVA6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4gPSB7XG4gIEw6IFwiTGF3ZnVsXCIsXG4gIE46IFwiTmV1dHJhbFwiLFxuICBDOiBcIkNoYW90aWNcIixcbiAgRzogXCJHb29kXCIsXG4gIEU6IFwiRXZpbFwiLFxuICBVOiBcIlVuYWxpZ25lZFwiXG59O1xuXG4vLyBIZWxwZXIgdG8gY2FwaXRhbGl6ZSBmaXJzdCBsZXR0ZXIgb2YgYSBzdHJpbmdcbmZ1bmN0aW9uIGNhcGl0YWxpemVGaXJzdChzdHI6IHVua25vd24pOiBzdHJpbmcge1xuICBjb25zdCBzID0gU3RyaW5nKHN0ciB8fCBcIlwiKTtcbiAgcmV0dXJuIHMuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBzLnNsaWNlKDEpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZm9ybWF0U2l6ZUFiYnJldihhYmJyZXY6IHN0cmluZyk6IHN0cmluZyB7XG4gIHJldHVybiBTSVpFX01BUFthYmJyZXZdIHx8IGFiYnJldjtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGZvcm1hdEFsaWdubWVudEFiYnJldihhYmJyZXY6IHN0cmluZyk6IHN0cmluZyB7XG4gIHJldHVybiBhYmJyZXZcbiAgICAudHJpbSgpXG4gICAgLnNwbGl0KC9cXHMrLylcbiAgICAubWFwKGxldHRlciA9PiBBTElHTk1FTlRfTUFQW2xldHRlcl0gfHwgbGV0dGVyKVxuICAgIC5qb2luKFwiIFwiKTtcbn1cblxuY29uc3QgUkFXX05QQ1M6IHN0cmluZ1tdID0gW1xuICBcIkFianVyZXJcIiwgXCJBY29seXRlXCIsIFwiQXBwcmVudGljZSBXaXphcmRcIiwgXCJBcmNoZHJ1aWRcIiwgXCJBcmNoZXJcIiwgXCJBcmNobWFnZVwiLCBcIkFzc2Fzc2luXCIsXG4gIFwiQmFuZGl0XCIsIFwiQmFuZGl0IENhcHRhaW5cIiwgXCJCYXJkXCIsIFwiQmVyc2Vya2VyXCIsIFwiQmxhY2tndWFyZFwiLCBcIkNoYW1waW9uXCIsIFwiQ29tbW9uZXJcIixcbiAgXCJDb25qdXJlclwiLCBcIkN1bHQgRmFuYXRpY1wiLCBcIkN1bHRpc3RcIiwgXCJEaXZpbmVyXCIsIFwiRHJ1aWQgKE5QQylcIiwgXCJEcnVpZCBOUENcIiwgXCJFbmNoYW50ZXJcIixcbiAgXCJFdm9rZXJcIiwgXCJHbGFkaWF0b3JcIiwgXCJHdWFyZFwiLCBcIklsbHVzaW9uaXN0XCIsIFwiS25pZ2h0XCIsIFwiS3Jha2VuIFByaWVzdFwiLCBcIk1hZ2VcIixcbiAgXCJNYXJ0aWFsIEFydHMgQWRlcHRcIiwgXCJNYXN0ZXIgVGhpZWZcIiwgXCJOZWNyb21hbmNlclwiLCBcIk5vYmxlXCIsIFwiUHJpZXN0XCIsIFwiU2NvdXRcIiwgXCJTcHlcIixcbiAgXCJTd2FzaGJ1Y2tsZXJcIiwgXCJUaHVnXCIsIFwiVHJhbnNtdXRlclwiLCBcIlRyaWJhbCBXYXJyaW9yXCIsIFwiVmV0ZXJhblwiLCBcIldhciBQcmllc3RcIixcbiAgXCJXYXJsb2NrIG9mIHRoZSBBcmNoZmV5XCIsIFwiV2FybG9jayBvZiB0aGUgRmllbmRcIiwgXCJXYXJsb2NrIG9mIHRoZSBHcmVhdCBPbGQgT25lXCIsIFwiV2FybG9yZFwiXG5dO1xuY29uc3QgTk9STUFMSVpFRF9OUENfTkFNRVMgPSBuZXcgU2V0KFJBV19OUENTLm1hcChuID0+IG5vcm1hbGl6ZU5hbWUobikpKTtcblxuZnVuY3Rpb24gbm9ybWFsaXplTmFtZShuYW1lOiBzdHJpbmcpOiBzdHJpbmcge1xuICByZXR1cm4gbmFtZS5yZXBsYWNlKC9cXHMrL2csIFwiIFwiKS50cmltKCkudG9Mb3dlckNhc2UoKTtcbn1cblxuZnVuY3Rpb24gY2F0ZWdvcml6ZUNyZWF0dXJlKG1vbnN0ZXI6IGFueSk6IHN0cmluZyB7XG4gIGNvbnN0IHR5cGVWYWx1ZSA9IG1vbnN0ZXIudHlwZTtcbiAgY29uc3QgbmFtZSA9IG1vbnN0ZXIubmFtZTtcbiAgY29uc3QgdCA9IHR5cGVvZiB0eXBlVmFsdWUgPT09IFwic3RyaW5nXCJcbiAgICA/IHR5cGVWYWx1ZS50b0xvd2VyQ2FzZSgpXG4gICAgOiB0eXBlVmFsdWU/LnR5cGU/LnRvTG93ZXJDYXNlKCkgfHwgU3RyaW5nKHR5cGVWYWx1ZSkudG9Mb3dlckNhc2UoKTtcblxuICBjb25zdCBub3JtYWxpemVkTmFtZSA9IG5vcm1hbGl6ZU5hbWUobmFtZSk7XG5cbiAgaWYgKG1vbnN0ZXIuaXNOcGMgfHwgbW9uc3Rlci5pc05hbWVkQ3JlYXR1cmUpIHJldHVybiBcIlN0b3J5IE5QQ3NcIjtcbiAgaWYgKHQgPT09IFwiYmVhc3RcIikgcmV0dXJuIFwiQmVhc3RzXCI7XG4gIGlmICh0ID09PSBcImh1bWFub2lkXCIgJiYgTk9STUFMSVpFRF9OUENfTkFNRVMuaGFzKG5vcm1hbGl6ZWROYW1lKSkgcmV0dXJuIFwiTm9uLUJlYXN0c1wiO1xuICBpZiAodCA9PT0gXCJodW1hbm9pZFwiKSByZXR1cm4gXCJNb25zdGVyc1wiO1xuICByZXR1cm4gXCJNb25zdGVyc1wiO1xufVxuXG5mdW5jdGlvbiByZW5kZXJBYmlsaXRpZXNUYWJsZShzdHI6IG51bWJlciwgZGV4OiBudW1iZXIsIGNvbjogbnVtYmVyLCBpbnQ6IG51bWJlciwgd2lzOiBudW1iZXIsIGNoYTogbnVtYmVyKTogc3RyaW5nIHtcbiAgcmV0dXJuIFtcbiAgICBgfCBTVFIgfCBERVggfCBDT04gfCBJTlQgfCBXSVMgfCBDSEEgfGAsXG4gICAgYHwgLS0tIHwgLS0tIHwgLS0tIHwgLS0tIHwgLS0tIHwgLS0tIHxgLFxuICAgIGB8ICR7c3RyfSB8ICR7ZGV4fSB8ICR7Y29ufSB8ICR7aW50fSB8ICR7d2lzfSB8ICR7Y2hhfSB8YFxuICBdLmpvaW4oXCJcXG5cIik7XG59XG5cbiAgZnVuY3Rpb24gcmVuZGVyRW50cnkoZW50cnk6IGFueSwgaW5CcmVhdGhCbG9jayA9IGZhbHNlKTogc3RyaW5nIHtcbiAgICBjb25zdCBlbnN1cmVQZXJpb2QgPSAoczogc3RyaW5nKSA9PiAoL1suIT9dXFxzKiQvLnRlc3QocykgPyBzIDogYCR7c30uYCk7XG4gICAgY29uc3QgcmVuZGVyU3RyID0gKHM6IHN0cmluZykgPT4gcmVwbGFjZTVlVGFncyhzKTtcblxuICAgIGlmICh0eXBlb2YgZW50cnkgPT09IFwic3RyaW5nXCIpIHJldHVybiByZW5kZXJTdHIoZW50cnkpO1xuICAgIGlmICghZW50cnkgfHwgdHlwZW9mIGVudHJ5ICE9PSBcIm9iamVjdFwiKSByZXR1cm4gU3RyaW5nKGVudHJ5ID8/IFwiXCIpO1xuXG4gICAgY29uc3QgcmF3TmFtZSA9IHR5cGVvZiBlbnRyeS5uYW1lID09PSBcInN0cmluZ1wiID8gZW50cnkubmFtZSA6IFwiXCI7XG4gICAgY29uc3QgbmFtZVR4dCA9IHJhd05hbWUgPyByZW5kZXJTdHIocmF3TmFtZSkgOiBcIlwiO1xuICAgIGNvbnN0IGlzQnJlYXRoID0gL1xcYmJyZWF0aCB3ZWFwb24vaS50ZXN0KG5hbWVUeHQpO1xuXG4gICAgY29uc3QgbGVhZCA9IG5hbWVUeHQgPyBgKioqJHtlbnN1cmVQZXJpb2QobmFtZVR4dCl9KioqYCA6IFwiXCI7XG5cbiAgICBjb25zdCBibG9ja3M6IGFueVtdID0gW107XG4gICAgaWYgKEFycmF5LmlzQXJyYXkoZW50cnkuZW50cmllcykpIGJsb2Nrcy5wdXNoKC4uLmVudHJ5LmVudHJpZXMpO1xuICAgIGVsc2UgaWYgKHR5cGVvZiBlbnRyeS5lbnRyaWVzID09PSBcInN0cmluZ1wiKSBibG9ja3MucHVzaChlbnRyeS5lbnRyaWVzKTtcbiAgICBlbHNlIGlmIChBcnJheS5pc0FycmF5KGVudHJ5LmRlc2MpKSBibG9ja3MucHVzaCguLi5lbnRyeS5kZXNjKTtcbiAgICBlbHNlIGlmICh0eXBlb2YgZW50cnkuZGVzYyA9PT0gXCJzdHJpbmdcIikgYmxvY2tzLnB1c2goZW50cnkuZGVzYyk7XG4gICAgZWxzZSBpZiAoQXJyYXkuaXNBcnJheSgoZW50cnkgYXMgYW55KS5lbnRyeSkpIGJsb2Nrcy5wdXNoKC4uLihlbnRyeSBhcyBhbnkpLmVudHJ5KTtcbiAgICBlbHNlIGlmICh0eXBlb2YgKGVudHJ5IGFzIGFueSkuZW50cnkgPT09IFwic3RyaW5nXCIpIGJsb2Nrcy5wdXNoKChlbnRyeSBhcyBhbnkpLmVudHJ5KTtcblxuICAgIGNvbnN0IG91dDogc3RyaW5nW10gPSBbXTtcbiAgICBmb3IgKGNvbnN0IGJsayBvZiBibG9ja3MpIHtcbiAgICAgIGlmICh0eXBlb2YgYmxrID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgIG91dC5wdXNoKHJlbmRlclN0cihibGspKTtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGlzSGFuZ05vVGl0bGVMaXN0ID1cbiAgICAgICAgYmxrICYmXG4gICAgICAgIGJsay50eXBlID09PSBcImxpc3RcIiAmJlxuICAgICAgICBibGsuc3R5bGUgPT09IFwibGlzdC1oYW5nLW5vdGl0bGVcIiAmJlxuICAgICAgICBBcnJheS5pc0FycmF5KGJsay5pdGVtcykgJiZcbiAgICAgICAgYmxrLml0ZW1zLmV2ZXJ5KChpdDogYW55KSA9PiBpdD8udHlwZSA9PT0gXCJpdGVtXCIpO1xuXG4gICAgICBpZiAoKGlzQnJlYXRoIHx8IGluQnJlYXRoQmxvY2sgfHwgaXNIYW5nTm9UaXRsZUxpc3QpICYmIGJsayAmJiBibGsudHlwZSA9PT0gXCJsaXN0XCIgJiYgQXJyYXkuaXNBcnJheShibGsuaXRlbXMpKSB7XG4gICAgICAgIGNvbnN0IGJ1bGxldHM6IHN0cmluZ1tdID0gW107XG4gICAgICAgIGZvciAoY29uc3QgaXQgb2YgYmxrLml0ZW1zKSB7XG4gICAgICAgICAgY29uc3QgaXROYW1lID0gaXQ/Lm5hbWUgPyByZW5kZXJTdHIoU3RyaW5nKGl0Lm5hbWUpLnRyaW0oKSkgOiBcIlwiO1xuICAgICAgICAgIGxldCBpdEJvZHkgPSBcIlwiO1xuICAgICAgICAgIGlmICh0eXBlb2YgaXQ/LmVudHJ5ID09PSBcInN0cmluZ1wiKSBpdEJvZHkgPSByZW5kZXJTdHIoaXQuZW50cnkpO1xuICAgICAgICAgIGVsc2UgaWYgKEFycmF5LmlzQXJyYXkoaXQ/LmVudHJpZXMpKSBpdEJvZHkgPSBpdC5lbnRyaWVzLm1hcCgoZTogYW55KSA9PiByZW5kZXJFbnRyeShlLCB0cnVlKSkuam9pbihcIiBcIik7XG4gICAgICAgICAgZWxzZSBpZiAodHlwZW9mIGl0Py5lbnRyaWVzID09PSBcInN0cmluZ1wiKSBpdEJvZHkgPSByZW5kZXJTdHIoaXQuZW50cmllcyk7XG5cbiAgICAgICAgICBjb25zdCBoZWFkID0gaXROYW1lID8gYCoqKiR7ZW5zdXJlUGVyaW9kKGl0TmFtZSl9KioqYCA6IFwiXCI7XG4gICAgICAgICAgY29uc3QgbGluZSA9IFtoZWFkLCBpdEJvZHldLmZpbHRlcihCb29sZWFuKS5qb2luKFwiIFwiKS50cmltKCk7XG4gICAgICAgICAgaWYgKGxpbmUpIGJ1bGxldHMucHVzaChgLSAke2xpbmV9YCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGJ1bGxldHMubGVuZ3RoKSBvdXQucHVzaChcIlxcblwiICsgYnVsbGV0cy5qb2luKFwiXFxuXCIpKTtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIG91dC5wdXNoKFN0cmluZyhibGspKTtcbiAgICB9XG5cbiAgICByZXR1cm4gW2xlYWQsIG91dC5qb2luKFwiIFwiKV0uZmlsdGVyKEJvb2xlYW4pLmpvaW4oXCIgXCIpLnJlcGxhY2UoL1sgXFx0XSsvZywgXCIgXCIpLnRyaW0oKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHJlbmRlclNwZWxsY2FzdGluZyhzcGVsbGNhc3RpbmdBcnI6IGFueVtdKTogc3RyaW5nIHtcbiAgICBpZiAoIUFycmF5LmlzQXJyYXkoc3BlbGxjYXN0aW5nQXJyKSB8fCBzcGVsbGNhc3RpbmdBcnIubGVuZ3RoID09PSAwKSByZXR1cm4gXCJcIjtcblxuICAgIGNvbnN0IGxpbmVzOiBzdHJpbmdbXSA9IFtdO1xuXG4gICAgLy8gRWFjaCBlbnRyeSBiZWNvbWVzIGl0cyBvd24gc3Vic2VjdGlvbiAoZS5nLiwgXCJJbm5hdGUgU3BlbGxjYXN0aW5nXCIsIFwiU3BlbGxjYXN0aW5nXCIpXG4gICAgZm9yIChjb25zdCBzYyBvZiBzcGVsbGNhc3RpbmdBcnIpIHtcbiAgICAgIGlmICghc2MgfHwgdHlwZW9mIHNjICE9PSBcIm9iamVjdFwiKSBjb250aW51ZTtcblxuICAgICAgY29uc3QgdGl0bGUgPSB0eXBlb2Ygc2MubmFtZSA9PT0gXCJzdHJpbmdcIiAmJiBzYy5uYW1lLnRyaW0oKSA/IHNjLm5hbWUudHJpbSgpIDogXCJTcGVsbGNhc3RpbmdcIjtcbiAgICAgIGNvbnN0IGhlYWRlciA9IGAjIyMgJHtyZXBsYWNlNWVUYWdzKHRpdGxlKX1gO1xuICAgICAgY29uc3QgYm9keVBhcnRzOiBzdHJpbmdbXSA9IFtdO1xuXG4gICAgICAvLyAxKSBIZWFkZXIgdGV4dCBibG9jayhzKVxuICAgICAgY29uc3QgaGVhZGVyRW50cmllcyA9IEFycmF5LmlzQXJyYXkoc2MuaGVhZGVyRW50cmllcylcbiAgICAgICAgPyBzYy5oZWFkZXJFbnRyaWVzXG4gICAgICAgIDogdHlwZW9mIHNjLmhlYWRlckVudHJpZXMgPT09IFwic3RyaW5nXCJcbiAgICAgICAgPyBbc2MuaGVhZGVyRW50cmllc11cbiAgICAgICAgOiBbXTtcbiAgICAgIGlmIChoZWFkZXJFbnRyaWVzLmxlbmd0aCkge1xuICAgICAgICBib2R5UGFydHMucHVzaChoZWFkZXJFbnRyaWVzLm1hcCgoZTogYW55KSA9PiByZXBsYWNlNWVUYWdzKGUpKS5qb2luKFwiIFwiKSk7XG4gICAgICB9XG5cbiAgICAgIC8vIDIpIFx1MjAxQ0F0IHdpbGxcdTIwMURcbiAgICAgIGlmIChBcnJheS5pc0FycmF5KHNjLndpbGwpICYmIHNjLndpbGwubGVuZ3RoKSB7XG4gICAgICAgIGNvbnN0IHNwZWxscyA9IHNjLndpbGwubWFwKChzOiBhbnkpID0+IHJlcGxhY2U1ZVRhZ3MoU3RyaW5nKHMpKSkuam9pbihcIiwgXCIpO1xuICAgICAgICBib2R5UGFydHMucHVzaChgLSAqKkF0IHdpbGw6KiogJHtzcGVsbHN9YCk7XG4gICAgICB9XG5cbiAgICAgIC8vIDMpIFx1MjAxQ0RhaWx5XHUyMDFEIGJ1Y2tldHMgXHUyMDE0IGtleXMgbGlrZSBcIjFcIiwgXCIyXCIsIFwiM1wiLCBhbmQgXCIxZVwiL1wiMmVcIiAoXHUyMDFDZWFjaFx1MjAxRClcbiAgICAgIGlmIChzYy5kYWlseSAmJiB0eXBlb2Ygc2MuZGFpbHkgPT09IFwib2JqZWN0XCIpIHtcbiAgICAgICAgY29uc3Qga2V5cyA9IE9iamVjdC5rZXlzKHNjLmRhaWx5KS5zb3J0KChhLGIpID0+IHtcbiAgICAgICAgICAvLyBudW1lcmljLWZpcnN0IHNvcnQ6IDEsIDFlLCAyLCAyZSwgXHUyMDI2XG4gICAgICAgICAgY29uc3QgcGFyc2UgPSAoazogc3RyaW5nKSA9PiAoeyBuOiBwYXJzZUludChrLCAxMCkgfHwgMCwgZTogL2UkL2kudGVzdChrKSA/IDEgOiAwIH0pO1xuICAgICAgICAgIGNvbnN0IEEgPSBwYXJzZShhKSwgQiA9IHBhcnNlKGIpO1xuICAgICAgICAgIHJldHVybiBBLm4gLSBCLm4gfHwgQS5lIC0gQi5lO1xuICAgICAgICB9KTtcblxuICAgICAgICBmb3IgKGNvbnN0IGsgb2Yga2V5cykge1xuICAgICAgICAgIGNvbnN0IGFyciA9IEFycmF5LmlzQXJyYXkoc2MuZGFpbHlba10pID8gc2MuZGFpbHlba10gOiBbXTtcbiAgICAgICAgICBpZiAoIWFyci5sZW5ndGgpIGNvbnRpbnVlO1xuICAgICAgICAgIGNvbnN0IG4gPSBwYXJzZUludChrLCAxMCkgfHwgMDtcbiAgICAgICAgICBjb25zdCBlYWNoID0gL2UkL2kudGVzdChrKTtcbiAgICAgICAgICBjb25zdCBsYWJlbCA9IG4gPiAwXG4gICAgICAgICAgICA/IGVhY2ggPyBgJHtufS9kYXkgZWFjaGAgOiBgJHtufS9kYXlgXG4gICAgICAgICAgICA6IFwiRGFpbHlcIjtcblxuICAgICAgICAgIGNvbnN0IHNwZWxscyA9IGFyci5tYXAoKHM6IGFueSkgPT4gcmVwbGFjZTVlVGFncyhTdHJpbmcocykpKS5qb2luKFwiLCBcIik7XG4gICAgICAgICAgYm9keVBhcnRzLnB1c2goYC0gKioke2xhYmVsfToqKiAke3NwZWxsc31gKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyA0KSBPcHRpb25hbDogb3RoZXIgYnVja2V0cyB1c2VkIG9jY2FzaW9uYWxseSBieSA1ZXRvb2xzIChcdTIwMUNyZXN0XHUyMDFELCBcdTIwMUNyaXR1YWxcdTIwMUQsIGV0Yy4pXG4gICAgICAvLyAgICBXZSBrZWVwIHRoaXMgY29uc2VydmF0aXZlOyBhZGQgbW9yZSBpZiB5b3Ugc2VlIHRoZW0gaW4geW91ciBmZWVkcy5cbiAgICAgIGlmIChzYy5yaXR1YWwgJiYgQXJyYXkuaXNBcnJheShzYy5yaXR1YWwpICYmIHNjLnJpdHVhbC5sZW5ndGgpIHtcbiAgICAgICAgY29uc3Qgc3BlbGxzID0gc2Mucml0dWFsLm1hcCgoczogYW55KSA9PiByZXBsYWNlNWVUYWdzKFN0cmluZyhzKSkpLmpvaW4oXCIsIFwiKTtcbiAgICAgICAgYm9keVBhcnRzLnB1c2goYC0gKipSaXR1YWxzOioqICR7c3BlbGxzfWApO1xuICAgICAgfVxuXG4gICAgICAvLyBTdGl0Y2ggdGhpcyBibG9ja1xuICAgICAgaWYgKGJvZHlQYXJ0cy5sZW5ndGgpIHtcbiAgICAgICAgbGluZXMucHVzaChgJHtoZWFkZXJ9XFxuJHtib2R5UGFydHMuam9pbihcIlxcblwiKX1gKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gbGluZXMuam9pbihcIlxcblxcblwiKTtcbiAgfVxuXG4gIGV4cG9ydCBmdW5jdGlvbiBwYXJzZUJlc3RpYXJ5RmlsZShqc29uOiBhbnksIGVkaXRpb25JZDogc3RyaW5nKTogUGFyc2VkTWFya2Rvd25GaWxlW10ge1xuICAgICAgaWYgKCFqc29uLm1vbnN0ZXIpIHJldHVybiBbXTtcbiAgICAgIChqc29uIGFzIGFueSkuX2VkaXRpb25JZCA9IGVkaXRpb25JZDtcbiAgICBcbiAgICAgIC8vIDEpIEZpbHRlciBvdXQgXHUyMDFDcmVmZXJlbmNlXHUyMDFEIGVudHJpZXMgd2l0aCBubyBBQyBvciBIUFxuICAgICAgY29uc3QgdmFsaWRNb25zdGVycyA9IGpzb24ubW9uc3Rlci5maWx0ZXIoKG06IGFueSkgPT4ge1xuICAgICAgY29uc3QgYWNWYWwgPSBBcnJheS5pc0FycmF5KG0uYWMpXG4gICAgICAgID8gbS5hY1swXT8uYWMgPz8gbS5hY1swXVxuICAgICAgICA6IHR5cGVvZiBtLmFjID09PSBcIm9iamVjdFwiXG4gICAgICAgICAgPyBtLmFjPy5hYyA/PyBudWxsXG4gICAgICAgICAgOiBtLmFjO1xuXG4gICAgICBjb25zdCBocFZhbCA9IHR5cGVvZiBtLmhwID09PSBcIm9iamVjdFwiXG4gICAgICAgID8gbS5ocD8uYXZlcmFnZSA/PyBtLmhwPy5ocCA/PyBudWxsXG4gICAgICAgIDogbS5ocDtcbiAgICAgICAgcmV0dXJuIGFjVmFsICE9IG51bGwgJiYgaHBWYWwgIT0gbnVsbCAmJiAhaXNOYU4oTnVtYmVyKGFjVmFsKSkgJiYgIWlzTmFOKE51bWJlcihocFZhbCkpO1xuICAgICAgfSk7XG5cbiAgICBjb25zdCBhbGxOYW1lcyA9IG5ldyBTZXQoanNvbi5tb25zdGVyLm1hcCgobTogYW55KSA9PiBtLm5hbWUpKTtcbiAgICBjb25zdCB2YWxpZE5hbWVzID0gbmV3IFNldCh2YWxpZE1vbnN0ZXJzLm1hcCgobTogYW55KSA9PiBtLm5hbWUpKTtcbiAgICBjb25zdCBtaXNzaW5nID0gWy4uLmFsbE5hbWVzXS5maWx0ZXIobmFtZSA9PiAhdmFsaWROYW1lcy5oYXMobmFtZSkpO1xuXG4gIFxuICAgIHJldHVybiB2YWxpZE1vbnN0ZXJzLm1hcCgobW9uc3RlcjogYW55KSA9PiB7XG4gICAgICBjb25zdCBuYW1lICAgICA9IG1vbnN0ZXIubmFtZSBhcyBzdHJpbmc7XG4gICAgICBjb25zdCBzYWZlTmFtZSA9IG5hbWUucmVwbGFjZSgvXFwvL2csIFwiLVwiKTtcbiAgXG4gICAgICAvLyBcdTIwMTQgUmF3IGZpZWxkcyAmIGZvcm1hdHRpbmcgXHUyMDE0XG4gICAgICBjb25zdCByYXdTaXplICAgICAgPSBtb25zdGVyLnNpemUgfHwgXCJNXCI7XG4gICAgICBjb25zdCByYXdBbGlnbm1lbnQgPSBBcnJheS5pc0FycmF5KG1vbnN0ZXIuYWxpZ25tZW50KVxuICAgICAgICA/IG1vbnN0ZXIuYWxpZ25tZW50LmpvaW4oXCIgXCIpXG4gICAgICAgIDogbW9uc3Rlci5hbGlnbm1lbnQgfHwgXCJOXCI7XG4gICAgbGV0IHJhd1R5cGUgPSBcIlVua25vd25cIjtcblxuICAgIGlmICh0eXBlb2YgbW9uc3Rlci50eXBlID09PSBcInN0cmluZ1wiKSB7XG4gICAgICByYXdUeXBlID0gY2FwaXRhbGl6ZUZpcnN0KG1vbnN0ZXIudHlwZSk7XG4gICAgfSBlbHNlIGlmIChtb25zdGVyLnR5cGU/LnR5cGUpIHtcbiAgICAgIGNvbnN0IGJhc2UgPSBjYXBpdGFsaXplRmlyc3QobW9uc3Rlci50eXBlLnR5cGUpO1xuICAgICAgY29uc3QgdGFncyA9IG1vbnN0ZXIudHlwZS50YWdzPy5sZW5ndGggPyBgICgke21vbnN0ZXIudHlwZS50YWdzLm1hcChjYXBpdGFsaXplRmlyc3QpLmpvaW4oXCIsIFwiKX0pYCA6IFwiXCI7XG4gICAgICByYXdUeXBlID0gYCR7YmFzZX0ke3RhZ3N9YDtcbiAgICB9XG5cbiAgICBtb25zdGVyLl9wYXJzZWRUeXBlID0gcmF3VHlwZTtcblxuICAgIGNvbnN0IGFjID0gQXJyYXkuaXNBcnJheShtb25zdGVyLmFjKSA/IG1vbnN0ZXIuYWNbMF0uYWMgOiBtb25zdGVyLmFjO1xuICAgIGNvbnN0IGhwID0gbW9uc3Rlci5ocD8uYXZlcmFnZSA/PyBtb25zdGVyLmhwO1xuXG4gICAgLy8gU2tpcCBtb25zdGVycyB3aXRoIG5vIEFDIGFuZCBIUFxuICAgIGlmICghYWMgJiYgIWhwKSB7XG4gICAgICBza2lwcGVkTW9uc3RlcnMucHVzaChtb25zdGVyLm5hbWUpO1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgICAgXG4gICAgICAvLyBcdTIwMTQgQWJpbGl0aWVzIFx1MjAxNFxuICAgICAgY29uc3QgYWJpbGl0aWVzID0gQXJyYXkuaXNBcnJheShtb25zdGVyLmFiaWxpdHkpXG4gICAgICAgID8gbW9uc3Rlci5hYmlsaXR5XG4gICAgICAgIDogW21vbnN0ZXIuc3RyLCBtb25zdGVyLmRleCwgbW9uc3Rlci5jb24sIG1vbnN0ZXIuaW50LCBtb25zdGVyLndpcywgbW9uc3Rlci5jaGFdO1xuICAgICAgY29uc3QgW3N0ciA9IDEwLCBkZXggPSAxMCwgY29uID0gMTAsIGludCA9IDEwLCB3aXMgPSAxMCwgY2hhID0gMTBdID0gYWJpbGl0aWVzO1xuICBcbiAgICAgIC8vIFx1MjAxNCBTcGVlZCAoaGFuZGxlcyBob3ZlciAmIG9iamVjdCBzcGVlZHMpIFx1MjAxNFxuICAgICAgY29uc3Qgc3BlZWRMaXN0OiBzdHJpbmdbXSA9IFtdO1xuICAgICAgaWYgKHR5cGVvZiBtb25zdGVyLnNwZWVkID09PSBcIm9iamVjdFwiKSB7XG4gICAgICAgIGZvciAoY29uc3QgW21vZGUsIHZhbF0gb2YgT2JqZWN0LmVudHJpZXMobW9uc3Rlci5zcGVlZCkpIHtcbiAgICAgICAgICBpZiAobW9kZSA9PT0gXCJjYW5Ib3ZlclwiKSBjb250aW51ZTtcbiAgICAgICAgICBpZiAodmFsICYmIHR5cGVvZiB2YWwgPT09IFwib2JqZWN0XCIgJiYgXCJudW1iZXJcIiBpbiB2YWwpIHtcbiAgICAgICAgICAgIGNvbnN0IG51bSAgPSAodmFsIGFzIGFueSkubnVtYmVyO1xuICAgICAgICAgICAgY29uc3QgY29uZCA9ICh2YWwgYXMgYW55KS5jb25kaXRpb24gPyBgICR7KHZhbCBhcyBhbnkpLmNvbmRpdGlvbn1gIDogXCJcIjtcbiAgICAgICAgICAgIHNwZWVkTGlzdC5wdXNoKGAke21vZGV9ICR7bnVtfSBmdC4ke2NvbmR9YCk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHNwZWVkTGlzdC5wdXNoKGAke21vZGV9ICR7dmFsfSBmdC5gKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHNwZWVkTGlzdC5wdXNoKGAke21vbnN0ZXIuc3BlZWR9IGZ0LmApO1xuICAgICAgfVxuICAgICAgY29uc3Qgc3BlZWQgPSBzcGVlZExpc3Quam9pbihcIiwgXCIpO1xuICBcbiAgICAgIC8vIFx1MjAxNCBTb3VyY2Ugc2FuaXRpemF0aW9uIFx1MjAxNFxuICAgICAgbGV0IHNvdXJjZSA9IGdldEZ1bGxTb3VyY2VOYW1lKG1vbnN0ZXIuc291cmNlLCBlZGl0aW9uSWQpO1xuICAgICAgc291cmNlICAgICA9IHNvdXJjZS5yZXBsYWNlKC86L2csIFwiIC1cIik7XG4gIFxuICAgICAgLy8gXHUyMDE0IENhdGVnb3J5IGZvciBmb2xkZXIgXHUyMDE0XG4gICAgICBjb25zdCBjYXRlZ29yeSA9IGNhdGVnb3JpemVDcmVhdHVyZShtb25zdGVyKTtcbiAgXG4gICAgICBjb25zdCBmbSAgID0gYnVpbGRGTShtb25zdGVyLCBCRVNUSUFSWV9NRVRBX0RFRlMpO1xuICAgICAgY29uc3QgeWFtbCA9IHNlcmlhbGl6ZUZyb250bWF0dGVyKGZtLCBCRVNUSUFSWV9NRVRBX0RFRlMpO1xuICAgICAgY29uc3QgZm1BbnkgPSBmbSBhcyBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPjtcbiAgICAgIGNvbnN0IGNoYWxsZW5nZVRleHQgPSBTdHJpbmcoZm1BbnlbXCJDUlwiXSA/PyBmbUFueVtcImNoYWxsZW5nZVwiXSA/PyBcIlwiKTtcbiAgICAgIGNvbnN0IHNhdmluZ1Rocm93cyA9IChmbVtGTV9GSUVMRFMuU0FWSU5HX1RIUk9XU10gYXMgc3RyaW5nW10pIHx8IFtdO1xuICAgICAgY29uc3Qgc2tpbGxzICAgICAgID0gKGZtW0ZNX0ZJRUxEUy5TS0lMTFNdICAgICAgICBhcyBzdHJpbmdbXSkgfHwgW107XG4gICAgICBjb25zdCBzZW5zZXMgICAgICAgPSAoZm1bRk1fRklFTERTLlNFTlNFU10gICAgICAgIGFzIHN0cmluZ1tdKSB8fCBbXTtcbiAgICAgIGNvbnN0IGxhbmd1YWdlcyAgICA9IChmbVtGTV9GSUVMRFMuTEFOR1VBR0VTXSAgICAgYXMgc3RyaW5nW10pIHx8IFtdO1xuXG4gXG4gICAgICAvLyBcdTIwMTQgQm9keSBcdTIwMTRcbiAgICAgIGxldCBib2R5ID1cbiAgICAgIGAjICR7bmFtZX1cXG5cXG5gICtcbiAgICAgIGAke2Zvcm1hdFNpemVBYmJyZXYocmF3U2l6ZSl9ICR7cmF3VHlwZX0sICR7Zm9ybWF0QWxpZ25tZW50QWJicmV2KHJhd0FsaWdubWVudCl9XFxuXFxuYCArXG4gICAgICBgKipBcm1vciBDbGFzcyoqOiAke2FjfVxcbmAgK1xuICAgICAgYCoqSGl0IFBvaW50cyoqOiAke2hwfVxcbmAgK1xuICAgICAgYCoqU3BlZWQqKjogJHtzcGVlZH1cXG5gICtcbiAgICAgIChzYXZpbmdUaHJvd3MubGVuZ3RoXG4gICAgICAgID8gYCoqU2F2aW5nIFRocm93cyoqOiAke3NhdmluZ1Rocm93cy5qb2luKFwiLCBcIil9XFxuYFxuICAgICAgICA6IFwiXCIpICtcbiAgICAgIChza2lsbHMubGVuZ3RoXG4gICAgICAgID8gYCoqU2tpbGxzKio6ICR7c2tpbGxzLmpvaW4oXCIsIFwiKX1cXG5gXG4gICAgICAgIDogXCJcIikgK1xuICAgICAgKHNlbnNlcy5sZW5ndGhcbiAgICAgICAgPyBgKipTZW5zZXMqKjogJHtzZW5zZXMuam9pbihcIiwgXCIpfVxcbmBcbiAgICAgICAgOiBcIlwiKSArXG4gICAgICAobGFuZ3VhZ2VzLmxlbmd0aFxuICAgICAgICA/IGAqKkxhbmd1YWdlcyoqOiAke2xhbmd1YWdlcy5qb2luKFwiLCBcIil9XFxuYFxuICAgICAgICA6IFwiXCIpICtcbiAgICAgIGAqKkNoYWxsZW5nZSoqOiAke2NoYWxsZW5nZVRleHR9XFxuXFxuYCArXG4gICAgICByZW5kZXJBYmlsaXRpZXNUYWJsZShzdHIsIGRleCwgY29uLCBpbnQsIHdpcywgY2hhKTtcblxuICAgICAgaWYgKG1vbnN0ZXIuc3BlbGxjYXN0aW5nKSB7XG4gICAgICAgIGJvZHkgKz0gYFxcblxcbiMjIyBTcGVsbGNhc3RpbmdcXG4ke21vbnN0ZXIuc3BlbGxjYXN0aW5nXG4gICAgICAgICAgLm1hcCgoc2M6IGFueSkgPT4ge1xuICAgICAgICAgICAgY29uc3QgbmFtZSA9IHNjLm5hbWUgfHwgXCJTcGVsbGNhc3RpbmdcIjtcbiAgICAgICAgICAgIGNvbnN0IHBhcnRzOiBzdHJpbmdbXSA9IFtdO1xuXG4gICAgICAgICAgICBpZiAoc2MuaGVhZGVyRW50cmllcykge1xuICAgICAgICAgICAgICBjb25zdCBoZWFkZXJzID0gQXJyYXkuaXNBcnJheShzYy5oZWFkZXJFbnRyaWVzKVxuICAgICAgICAgICAgICAgID8gc2MuaGVhZGVyRW50cmllc1xuICAgICAgICAgICAgICAgIDogW3NjLmhlYWRlckVudHJpZXNdO1xuICAgICAgICAgICAgICBwYXJ0cy5wdXNoKGhlYWRlcnMubWFwKChlOiBhbnkpID0+IHJlcGxhY2U1ZVRhZ3MoZSkpLmpvaW4oXCIgXCIpKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKHNjLndpbGwpIHtcbiAgICAgICAgICAgICAgcGFydHMucHVzaChgLSAqKkF0IHdpbGw6KiogJHtzYy53aWxsLm1hcCgoczogYW55KSA9PiByZXBsYWNlNWVUYWdzKFN0cmluZyhzKSkpLmpvaW4oXCIsIFwiKX1gKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKHNjLmRhaWx5KSB7XG4gICAgICAgICAgICAgIGZvciAoY29uc3QgW2ssIGFycl0gb2YgT2JqZWN0LmVudHJpZXMoc2MuZGFpbHkpKSB7XG4gICAgICAgICAgICAgICAgY29uc3Qgc3BlbGxzID0gKGFyciBhcyBhbnlbXSkubWFwKHMgPT4gcmVwbGFjZTVlVGFncyhTdHJpbmcocykpKS5qb2luKFwiLCBcIik7XG4gICAgICAgICAgICAgICAgY29uc3QgbiA9IHBhcnNlSW50KGssIDEwKSB8fCAwO1xuICAgICAgICAgICAgICAgIGNvbnN0IGVhY2ggPSAvZSQvaS50ZXN0KGspO1xuICAgICAgICAgICAgICAgIGNvbnN0IGxhYmVsID0gbiA+IDAgPyAoZWFjaCA/IGAke259L2RheSBlYWNoYCA6IGAke259L2RheWApIDogXCJEYWlseVwiO1xuICAgICAgICAgICAgICAgIHBhcnRzLnB1c2goYC0gKioke2xhYmVsfToqKiAke3NwZWxsc31gKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gYCoqKiR7bmFtZX0uKioqXFxuJHtwYXJ0cy5qb2luKFwiXFxuXCIpfWA7XG4gICAgICAgICAgfSlcbiAgICAgICAgLmpvaW4oXCJcXG5cXG5cIil9YDtcbiAgICAgIH1cbiAgICAgIGlmIChtb25zdGVyLnRyYWl0KSAgICAgYm9keSArPSBgXFxuXFxuIyMjIFRyYWl0c1xcbiR7bW9uc3Rlci50cmFpdC5tYXAocmVuZGVyRW50cnkpLmpvaW4oXCJcXG5cXG5cIil9YDtcbiAgICAgIGlmIChtb25zdGVyLmFjdGlvbikgICAgYm9keSArPSBgXFxuXFxuIyMjIEFjdGlvbnNcXG4ke21vbnN0ZXIuYWN0aW9uLm1hcChyZW5kZXJFbnRyeSkuam9pbihcIlxcblxcblwiKX1gO1xuICAgICAgaWYgKG1vbnN0ZXIucmVhY3Rpb24pICBib2R5ICs9IGBcXG5cXG4jIyMgUmVhY3Rpb25zXFxuJHttb25zdGVyLnJlYWN0aW9uLm1hcChyZW5kZXJFbnRyeSkuam9pbihcIlxcblxcblwiKX1gO1xuICAgICAgaWYgKG1vbnN0ZXIubGVnZW5kYXJ5KSBib2R5ICs9IGBcXG5cXG4jIyMgTGVnZW5kYXJ5IEFjdGlvbnNcXG4ke21vbnN0ZXIubGVnZW5kYXJ5Lm1hcChyZW5kZXJFbnRyeSkuam9pbihcIlxcblxcblwiKX1gO1xuICBcbiAgICAgIGNvbnN0IGNvbnRlbnQgPSBgLS0tXFxuJHt5YW1sfVxcbi0tLVxcblxcbiR7Ym9keX1gO1xuICBcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHBhdGg6ICAgIGAke2NhdGVnb3J5fS8ke3NhZmVOYW1lfS5tZGAsXG4gICAgICAgIGNvbnRlbnQsXG4gICAgICB9O1xuICAgIH0pO1xuICB9XG4iLCAiaW1wb3J0IHR5cGUgeyBQYXJzZWRNYXJrZG93bkZpbGUgfSBmcm9tIFwiLi4vLi4vdHlwZXNcIjtcbmltcG9ydCB7IHJlcGxhY2U1ZVRhZ3MgfSAgICAgZnJvbSBcIi4vaGVscGVycy90YWdSZXBsYWNlclwiO1xuaW1wb3J0IHsgZ2V0RnVsbFNvdXJjZU5hbWUgfSBmcm9tIFwiLi9oZWxwZXJzL3NvdXJjZU1hcFwiO1xuaW1wb3J0IHsgYnVpbGRGTSwgc2VyaWFsaXplRnJvbnRtYXR0ZXIsIElURU1fTUVUQV9ERUZTLCBGTV9GSUVMRFMgfSBmcm9tIFwiLi9oZWxwZXJzL2Zyb250bWF0dGVyXCI7XG5pbXBvcnQgeyByZW5kZXJNYXJrZG93blRhYmxlIH0gZnJvbSBcIi4vaGVscGVycy9tYXJrZG93blRhYmxlXCI7XG5cblxuLyoqIEhlbHBlciB0byBjYXBpdGFsaXplIGZpcnN0IGxldHRlciBcdTIwMTMgbmV2ZXIgY3Jhc2hlcyBvbiBub24tc3RyaW5ncyAqL1xuZnVuY3Rpb24gY2FwaXRhbGl6ZUZpcnN0KGlucHV0OiBhbnkpOiBzdHJpbmcge1xuICAvLyBpZiBpdFx1MjAxOXMgbm90IGEgbm9uLWVtcHR5IHN0cmluZywgYmFpbCBvdXRcbiAgaWYgKHR5cGVvZiBpbnB1dCAhPT0gXCJzdHJpbmdcIiB8fCBpbnB1dC5sZW5ndGggPT09IDApIHJldHVybiBcIlwiO1xuICBjb25zdCBzID0gaW5wdXQudHJpbSgpO1xuICByZXR1cm4gcy5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIHMuc2xpY2UoMSkudG9Mb3dlckNhc2UoKTtcbn1cblxuZnVuY3Rpb24gcmVuZGVyNWVUYWJsZSh0OiBhbnkpOiBzdHJpbmcge1xuICBjb25zdCBoZWFkZXJzOiBzdHJpbmdbXSA9IEFycmF5LmlzQXJyYXkodC5jb2xMYWJlbHMpXG4gICAgPyB0LmNvbExhYmVscy5tYXAoKGg6IGFueSkgPT4gcmVwbGFjZTVlVGFncyhoKSlcbiAgICA6IFtdO1xuXG4gIGNvbnN0IHJvd3M6IHN0cmluZ1tdW10gPSBBcnJheS5pc0FycmF5KHQucm93cylcbiAgICA/IHQucm93cy5tYXAoKHI6IGFueSkgPT5cbiAgICAgICAgQXJyYXkuaXNBcnJheShyKSA/IHIubWFwKChjZWxsOiBhbnkpID0+IHJlcGxhY2U1ZVRhZ3MoY2VsbCkpIDogW11cbiAgICAgIClcbiAgICA6IFtdO1xuXG4gIC8vIFx1MjE5MCBtYXJrZG93blRhYmxlIGV4cGVjdHMgYSBzaW5nbGUgb2JqZWN0XG4gIHJldHVybiByZW5kZXJNYXJrZG93blRhYmxlKHsgaGVhZGVycywgcm93cyB9KTtcbn1cblxuXG5cbmV4cG9ydCBjb25zdCBEQU1BR0VfVFlQRV9NQVA6IFJlY29yZDxzdHJpbmcsc3RyaW5nPiA9IHtcbiAgUDogXCJQaWVyY2luZ1wiLFxuICBCOiBcIkJsdWRnZW9uaW5nXCIsXG4gIFM6IFwiU2xhc2hpbmdcIixcbiAgTjogXCJOZWNyb3RpY1wiLFxuICBSOiBcIlJhZGlhbnRcIixcbiAgRjogXCJGaXJlXCIsXG4gIEM6IFwiQ29sZFwiLFxuICBMOiBcIkxpZ2h0bmluZ1wiLFxuICBUOiBcIlRodW5kZXJcIixcbiAgQTogXCJBY2lkXCIsXG4gIEg6IFwiSGVhbGluZ1wiLFxuICBVOiBcIkZvcmNlXCIsXG4gIFY6IFwiUHN5Y2hpY1wiLFxufTtcblxuZXhwb3J0IGNvbnN0IFBST1BFUlRZX01BUDogUmVjb3JkPHN0cmluZyxzdHJpbmc+ID0ge1xuICBBOiBcIkFtbXVuaXRpb25cIixcbiAgRjogXCJGaW5lc3NlXCIsXG4gIEg6IFwiSGVhdnlcIixcbiAgTDogXCJMaWdodFwiLFxuICBSOiBcIlJlbG9hZFwiLFxuICBTOiBcIlNwZWNpYWxcIixcbiAgXCIySFwiOiBcIlR3by1IYW5kZWRcIixcbiAgVDogXCJUaHJvd25cIixcbiAgVjogXCJWZXJzYXRpbGVcIlxufTtcblxuZXhwb3J0IGNvbnN0IElURU1fVFlQRV9NQVA6IFJlY29yZDxzdHJpbmcsc3RyaW5nPiA9IHtcbiAgJEM6ICBcIkN1cnJlbmN5XCIsXG4gICRHOiAgXCJHZW1cIixcbiAgQTogICBcIkFtbXVuaXRpb25cIixcbiAgXCJBSVJ8RE1HXCI6IFwiVmVoaWNsZSAoYWlyKVwiLFxuICBcIkFGfERNR1wiOiBcIkZ1dHVyZSBBbW1vXCIsXG4gIEFUOiAgXCJBcnRpc2FuIFRvb2xzXCIsXG4gIEVYUDogXCJFeHBsb3NpdmVcIixcbiAgRkQ6ICBcIkZvb2QgYW5kIERyaW5rXCIsXG4gIEc6ICAgXCJHZWFyXCIsXG4gIEdTOiAgXCJHYW1lXCIsXG4gIEhBOiAgXCJIZWF2eSBBcm1vclwiLFxuICBcIklER3xURENTUlwiOiBcIklsbGljaXQgRHJ1Z1wiLFxuICBJTlM6IFwiSW5zdHJ1bWVudFwiLFxuICBMQTogIFwiTGlnaHQgQXJtb3JcIixcbiAgTTogICBcIldlYXBvblwiLFxuICBNQTogIFwiTWVkaXVtIEFybW9yXCIsXG4gIE1OVDogXCJNb3VudHMgYW5kIFZlaGljbGVzXCIsXG4gIE9ESDogXCJNaXNjZWxsYW5lb3VzXCIsXG4gIFA6ICAgXCJDb25zdW1hYmxlXCIsXG4gIFI6ICAgXCJSYW5nZWQgV2VhcG9uXCIsXG4gIFJEOiAgXCJSb2RcIixcbiAgUkc6ICBcIlJpbmdcIixcbiAgUzogICBcIlNoaWVsZFwiLFxuICBTQzogIFwiU2Nyb2xsXCIsXG4gIFNDRjogXCJTcGVsbCBDYXN0aW5nIEZvY3VzXCIsXG4gIFNIUDogXCJTaGlwXCIsXG4gIFQ6ICAgXCJUb29sXCIsXG4gIFRBSDogXCJNb3VudHMgYW5kIFZlaGljbGVzXCIsXG4gIFRHOiAgXCJUcmFkZSBHb29kc1wiLFxuICBWRUg6IFwiTW91bnRzIGFuZCBWZWhpY2xlc1wiLFxuICBXRDogIFwiV2FuZFwiLFxufTtcblxuLyoqIGNvZGUgXHUyMTkyIGZ1bGwgZm9sZGVyIHBhdGggdW5kZXIgSXRlbXMvICovXG5jb25zdCBjb2RlRm9sZGVyTWFwOiBSZWNvcmQ8c3RyaW5nLHN0cmluZz4gPSB7XG4gIC8vIFdlYXBvbnMgJiBBcm1vclxuICBcIkFcIjogICBcIldlYXBvbnMgYW5kIEFybW9yL0FtbXVuaXRpb25cIixcbiAgXCJNXCI6ICAgXCJXZWFwb25zIGFuZCBBcm1vci9XZWFwb25zXCIsXG4gIFwiUlwiOiAgIFwiV2VhcG9ucyBhbmQgQXJtb3IvUmFuZ2VkIFdlYXBvbnNcIixcbiAgXCJTXCI6ICAgXCJXZWFwb25zIGFuZCBBcm1vci9TaGllbGRzXCIsXG4gIFwiTEFcIjogIFwiV2VhcG9ucyBhbmQgQXJtb3IvQXJtb3IvTGlnaHQgQXJtb3JcIixcbiAgXCJNQVwiOiAgXCJXZWFwb25zIGFuZCBBcm1vci9Bcm1vci9NZWRpdW0gQXJtb3JcIixcbiAgXCJIQVwiOiAgXCJXZWFwb25zIGFuZCBBcm1vci9Bcm1vci9IZWF2eSBBcm1vclwiLFxuICBcIkVYUFwiOiBcIldlYXBvbnMgYW5kIEFybW9yL1dlYXBvbnMvRXhwbG9zaXZlc1wiLFxuICAvLyBGdXR1cmUgQW1tbyAoQUZ8RE1HIFx1MjE5MiByYXdDb2RlIFwiQUZcIilcbiAgXCJBRlwiOiAgXCJXZWFwb25zIGFuZCBBcm1vci9BbW11bml0aW9uL0Z1dHVyZSBBbW1vXCIsXG5cbiAgLy8gTWFnaWNhbCBJdGVtc1xuICBcIlJEXCI6ICBcIk1hZ2ljYWwgSXRlbXMvUm9kc1wiLFxuICBcIlJHXCI6ICBcIk1hZ2ljYWwgSXRlbXMvUmluZ3NcIixcbiAgXCJTQ1wiOiAgXCJNYWdpY2FsIEl0ZW1zL1Njcm9sbHNcIixcbiAgXCJTQ0ZcIjogXCJNYWdpY2FsIEl0ZW1zL1NwZWxsIENhc3RpbmcgRm9jdXNcIixcbiAgXCJXRFwiOiAgXCJNYWdpY2FsIEl0ZW1zL1dhbmRzXCIsXG5cbiAgLy8gVmFsdWFibGVzXG4gIFwiJEdcIjogXCJWYWx1YWJsZXMvR2Vtc1wiLFxuICAvLyBDdXJyZW5jeSAocmF3Q29kZSBiZWNvbWVzIFwiQ1wiIGFmdGVyIHN0cmlwcGluZyAkKVxuICBcIkNcIjogIFwiVmFsdWFibGVzL0N1cnJlbmN5XCIsXG4gIFwiVEdcIjogXCJWYWx1YWJsZXMvVHJhZGUgR29vZHNcIixcblxuICAvLyBBcnRpc2FuIEdvb2RzXG4gIFwiQVRcIjogIFwiQXJ0aXNhbiBHb29kcy9Ub29sc1wiLFxuICBcIlRcIjogICBcIkFydGlzYW4gR29vZHMvVG9vbHNcIixcbiAgXCJJTlNcIjogXCJBcnRpc2FuIEdvb2RzL0luc3RydW1lbnRzXCIsXG4gIFwiR1NcIjogIFwiQXJ0aXNhbiBHb29kcy9HYW1lc1wiLFxuXG4gIC8vIEdlYXIgJiBNb3VudHNcbiAgXCJHXCI6ICAgXCJHZWFyXCIsXG4gIC8vIE1vdW50cyAmIFZlaGljbGVzXG4gIFwiTU5UXCI6IFwiR2Vhci9Nb3VudHMgYW5kIFZlaGljbGVzXCIsXG4gIFwiVEFIXCI6IFwiR2Vhci9Nb3VudHMgYW5kIFZlaGljbGVzXCIsXG4gIFwiVkVIXCI6IFwiR2Vhci9Nb3VudHMgYW5kIFZlaGljbGVzXCIsXG4gIC8vIEFpciB2ZWhpY2xlcyAoQUlSfERNRyBcdTIxOTIgcmF3Q29kZSBcIkFJUlwiKVxuICBcIkFJUlwiOiBcIkdlYXIvTW91bnRzIGFuZCBWZWhpY2xlcy9BaXJcIixcblxuICAvLyBDb25zdW1hYmxlc1xuICBcIlBcIjogICBcIkNvbnN1bWFibGVzXCIsXG4gIC8vIEZvb2QgJiBEcmlua1xuICBcIkZEXCI6ICBcIkNvbnN1bWFibGVzL0Zvb2QgYW5kIERyaW5rXCIsXG5cbiAgLy8gSWxsaWNpdCBEcnVncyAoSURHfFREQ1NSIFx1MjE5MiByYXdDb2RlIFwiSURHXCIpXG4gIFwiSURHXCI6IFwiR2Vhci9JbGxpY2l0IERydWdzXCIsXG5cbiAgLy8gTWlzY2VsbGFuZW91cyAoT0RIKVxuICBcIk9ESFwiOiBcIkdlYXIvTWlzY2VsbGFuZW91c1wiLFxufTtcblxuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlSXRlbXNGaWxlKGpzb246IGFueSwgZWRpdGlvbklkOiBzdHJpbmcpOiBQYXJzZWRNYXJrZG93bkZpbGVbXSB7XG4gIGNvbnN0IHJhd0l0ZW1zOiBhbnlbXSA9IFtdO1xuICBpZiAoQXJyYXkuaXNBcnJheShqc29uLmJhc2VpdGVtKSkgcmF3SXRlbXMucHVzaCguLi5qc29uLmJhc2VpdGVtKTtcbiAgaWYgKEFycmF5LmlzQXJyYXkoanNvbi5pdGVtKSkgICAgIHJhd0l0ZW1zLnB1c2goLi4uanNvbi5pdGVtKTtcbiAgaWYgKEFycmF5LmlzQXJyYXkoanNvbi5vYmplY3QpKSAgIHJhd0l0ZW1zLnB1c2goLi4uanNvbi5vYmplY3QpO1xuICBpZiAoQXJyYXkuaXNBcnJheShqc29uLnZlaGljbGUpKSAgcmF3SXRlbXMucHVzaCguLi5qc29uLnZlaGljbGUpO1xuICBpZiAoIXJhd0l0ZW1zLmxlbmd0aCkgcmV0dXJuIFtdO1xuXG4gIGNvbnN0IGJhc2VOYW1lcyA9IG5ldyBTZXQ8c3RyaW5nPihcbiAgICBBcnJheS5pc0FycmF5KGpzb24uYmFzZWl0ZW0pID8ganNvbi5iYXNlaXRlbS5tYXAoKGI6IGFueSkgPT4gYi5uYW1lKSA6IFtdXG4gICk7XG4gIGNvbnN0IG91dDogUGFyc2VkTWFya2Rvd25GaWxlW10gPSBbXTtcblxuICBmb3IgKGNvbnN0IGl0IG9mIHJhd0l0ZW1zKSB7XG4gICAgY29uc3QgbmFtZSAgICAgPSBpdC5uYW1lIGFzIHN0cmluZztcbiAgICBjb25zdCBzYWZlTmFtZSA9IG5hbWUucmVwbGFjZSgvW1xcL1xcXFw6XS9nLCBcIi1cIik7XG5cbiAgICAvLyBEZXRlcm1pbmUgZm9sZGVyXG4gICAgY29uc3QgcmF3Q29kZSA9IChpdC50eXBlIGFzIHN0cmluZyB8fCBcIlwiKS5zcGxpdChcInxcIilbMF1cbiAgICAgICAgLnNwbGl0KFwifFwiKVswXSAgICAgIC8vIGRyb3AgYW55dGhpbmcgYWZ0ZXIgXHUyMDFDfFx1MjAxRFxuICAgICAgICAucmVwbGFjZSgvXlxcJC8sIFwiXCIpOyAvLyBzdHJpcCBsZWFkaW5nIFx1MjAxQyRcdTIwMURcbiAgICBsZXQgZm9sZGVyICAgID0gY29kZUZvbGRlck1hcFtyYXdDb2RlXSA/PyBcIk1pc2NlbGxhbmVvdXNcIjtcblxuICAgIC8vIFZhcmlhbnRzXG4gICAgaWYgKGl0LmJvbnVzV2VhcG9uKSB7XG4gICAgICBmb2xkZXIgPSBgJHtmb2xkZXJ9L1ZhcmlhbnRzYDtcbiAgICB9XG4gICAgLy8gTWFnaWNhbFxuICAgIGVsc2Uge1xuICAgICAgY29uc3QgaXNNYWdpYyA9ICEhaXQud29uZHJvdXMgfHwgISFpdC5yZXFBdHR1bmUgfHwgISFpdC5yZXFfYXR0dW5lXG4gICAgICAgIHx8IFN0cmluZyhpdC5yYXJpdHkpLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoXCJtYWdpY1wiKTtcbiAgICAgIGlmIChpc01hZ2ljKSB7XG4gICAgICAgIGNvbnN0IFsgLCAuLi5yZXN0IF0gPSBmb2xkZXIuc3BsaXQoXCIvXCIpO1xuICAgICAgICBmb2xkZXIgPSBbXCJNYWdpY2FsIEl0ZW1zXCIsIC4uLnJlc3RdLmpvaW4oXCIvXCIpO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIFdlYXBvbiBjYXRlZ29yeSBzdWJmb2xkZXJcbiAgICBpZiAoKGZvbGRlci5zdGFydHNXaXRoKFwiV2VhcG9ucyBhbmQgQXJtb3IvV2VhcG9uc1wiKSB8fFxuICAgICAgICAgZm9sZGVyLnN0YXJ0c1dpdGgoXCJXZWFwb25zIGFuZCBBcm1vci9SYW5nZWQgV2VhcG9uc1wiKSkgJiYgaXQud2VhcG9uQ2F0ZWdvcnkpIHtcbiAgICAgIGZvbGRlciA9IGAke2ZvbGRlcn0vJHtjYXBpdGFsaXplRmlyc3QoaXQud2VhcG9uQ2F0ZWdvcnkpfWA7XG4gICAgfVxuXG4gICAgLy8gbWFrZSBlZGl0aW9uSWQgYXZhaWxhYmxlIGZvciB0aGUgU09VUkNFIGZpZWxkXG4oanNvbiBhcyBhbnkpLl9lZGl0aW9uSWQgPSBlZGl0aW9uSWQ7XG5cbi8vIGJ1aWxkIGEgRnJvbnRtYXR0ZXIgb2JqZWN0IGZyb20gdGhlIEpTT05cbmNvbnN0IGZtICAgPSBidWlsZEZNKGl0LCBJVEVNX01FVEFfREVGUyk7XG5cbi8vIGlmIHRoZSBidWlsdCBmcm9udG1hdHRlciBzYXlzIHRoaXMgaXMgYSBtYWdpY2FsIGl0ZW1cdTIwMjZcbmlmIChmbVtGTV9GSUVMRFMuTUFHSUNBTF0pIHtcbiAgLy8gXHUyMDI2dGhlbiBhZGQgb3VyIFZlcm11biBmbGFnXG4gIGZtW0ZNX0ZJRUxEUy5WRVJNVU5dID0gZmFsc2U7XG59XG5cbmlmIChyYXdDb2RlID09PSBcIk1cIiAmJiBpdC53ZWFwb25DYXRlZ29yeSkge1xuICAvLyBcdTIwMUNNXHUyMDFEIFx1MjE5MiB1c2Ugd2VhcG9uQ2F0ZWdvcnkgKFx1MjAxQ1NpbXBsZVx1MjAxRC9cdTIwMUNNYXJ0aWFsXHUyMDFEKVxuICBmbS50eXBlID0gYCR7Y2FwaXRhbGl6ZUZpcnN0KGl0LndlYXBvbkNhdGVnb3J5KX0gV2VhcG9uYDtcbn0gZWxzZSBpZiAoSVRFTV9UWVBFX01BUFtyYXdDb2RlXSkge1xuICAvLyBhbnkgb3RoZXIgY29kZSBcdTIxOTIgbWFwcGVkIGxhYmVsXG4gIGZtLnR5cGUgPSBJVEVNX1RZUEVfTUFQW3Jhd0NvZGVdO1xufVxuaWYgKEFycmF5LmlzQXJyYXkoZm0uZGFtYWdlVHlwZXMpKSB7XG4gIGZtLmRhbWFnZVR5cGVzID0gZm0uZGFtYWdlVHlwZXMubWFwKChjb2RlOiBzdHJpbmcpID0+XG4gICAgREFNQUdFX1RZUEVfTUFQW2NvZGVdIHx8IGNvZGVcbiAgKTtcbn1cbi8vIHNlcmlhbGl6ZSBpdCB0byBZQU1MXG5sZXQgeWFtbCA9IHNlcmlhbGl6ZUZyb250bWF0dGVyKGZtLCBJVEVNX01FVEFfREVGUyk7XG5cbi8vIGlmIHlvdSBzdGlsbCB3YW50IHBhY2tDb250ZW50cywgYXBwZW5kIGl0IGhlcmU6XG5pZiAoQXJyYXkuaXNBcnJheShpdC5wYWNrQ29udGVudHMpKSB7XG4gIHlhbWwgKz0gXCJcXG5wYWNrQ29udGVudHM6XCI7XG4gIGZvciAoY29uc3QgcGMgb2YgaXQucGFja0NvbnRlbnRzKSB7XG4gICAgeWFtbCArPSBgXFxuICAtIGl0ZW06IFwiJHtwYy5pdGVtfVwiXFxuICAgIHF1YW50aXR5OiAke3BjLnF1YW50aXR5fWA7XG4gIH1cbn1cbiBcbi8vIHdyYXAgaXQgaW4gdGhlIFlBTUwgZmVuY2VcbmNvbnN0IGZyb250bWF0dGVyID0gYC0tLVxcbiR7eWFtbH1cXG4tLS1gO1xuXG5cbiAgICAvLyBCb2R5IGxpbmVzXG4gICAgY29uc3QgbGluZXM6IHN0cmluZ1tdID0gW107XG4gICAgbGluZXMucHVzaChgIyAke25hbWV9YCk7XG4gICAgbGluZXMucHVzaChcIlwiKTtcblxuICAgIC8vIFN1YnRpdGxlXG4gICAgY29uc3Qgc3VidGl0bGUgPSBpdC53ZWFwb25cbiAgICAgID8gYCR7Y2FwaXRhbGl6ZUZpcnN0KGl0LndlYXBvbkNhdGVnb3J5KX0gV2VhcG9uYFxuICAgICAgOiBpdC5hcm1vclxuICAgICAgICA/IGZvbGRlci5zcGxpdChcIi9cIikucG9wKCkgfHwgXCJBcm1vclwiXG4gICAgICAgIDogXCJcIjtcbiAgICBpZiAoc3VidGl0bGUpIGxpbmVzLnB1c2goYCMjIyAqJHtzdWJ0aXRsZX0qYCk7XG5cbiAgICAvLyBTdGF0cyBsaW5lc1xuICAgIGlmIChpdC53ZWFwb24pIHtcbiAgICAgIGxpbmVzLnB1c2goYCoqQ2F0ZWdvcnkqKjogJHtjYXBpdGFsaXplRmlyc3QoaXQud2VhcG9uQ2F0ZWdvcnkpfWApO1xuICAgICAgbGluZXMucHVzaChgKipEYW1hZ2UqKjogJHtpdC5kbWcxID8/IFwiXCJ9JHtpdC5kbWcyID8gYCAvICR7aXQuZG1nMn1gIDogXCJcIn1gKTtcbiAgICAgIGNvbnN0IHR5cGVzQm9keSA9IChBcnJheS5pc0FycmF5KGl0LmRtZ1R5cGUpID8gaXQuZG1nVHlwZSA6IFtpdC5kbWdUeXBlXSlcbiAgICAgICAgLmZpbHRlcigodDogYW55KSA9PiBCb29sZWFuKHQpKVxuICAgICAgICAubWFwKCh0OiBzdHJpbmcpID0+IERBTUFHRV9UWVBFX01BUFt0XSB8fCB0KTtcbiAgICAgIGxpbmVzLnB1c2goYCoqRGFtYWdlIFR5cGUqKjogJHt0eXBlc0JvZHkuam9pbihcIiwgXCIpfWApO1xuICAgICAgbGluZXMucHVzaChgKipSYW5nZSoqOiAke2l0LnJhbmdlID8/IFwiXHUyMDE0XCJ9YCk7XG4gICAgICBsaW5lcy5wdXNoKGAqKlJlbG9hZCoqOiAke2l0LnJlbG9hZCA/PyBcIlx1MjAxNFwifWApO1xuICAgICAgaWYgKGl0LmFtbW9UeXBlKSBsaW5lcy5wdXNoKGAqKkFtbW8gVHlwZSoqOiAke2l0LmFtbW9UeXBlfWApO1xuICAgICAgaWYgKEFycmF5LmlzQXJyYXkoaXQucHJvcGVydHkpICYmIGl0LnByb3BlcnR5Lmxlbmd0aCkge1xuICAgICAgICBjb25zdCBwcm9wc0JvZHkgPSBpdC5wcm9wZXJ0eS5tYXAoKHA6IHN0cmluZykgPT4gUFJPUEVSVFlfTUFQW3BdIHx8IHApO1xuICAgICAgICBsaW5lcy5wdXNoKGAqKlByb3BlcnRpZXMqKjogJHtwcm9wc0JvZHkuam9pbihcIiwgXCIpfWApO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAoaXQuYXJtb3IpIHtcbiAgICAgIGxpbmVzLnB1c2goYCoqQXJtb3IgQ2xhc3MqKjogJHtpdC5hY31gKTtcbiAgICAgIGlmIChpdC5zdGVhbHRoKSBsaW5lcy5wdXNoKGAqKlN0ZWFsdGggRGlzYWR2YW50YWdlKio6IHRydWVgKTtcbiAgICAgIGxpbmVzLnB1c2goXCJcIik7XG4gICAgfVxuXG4gICAgLy8gRGVzY3JpcHRpb24gd2l0aCBuZXN0ZWQgZW50cmllc1xuLy8gRGVzY3JpcHRpb24gd2l0aCBuZXN0ZWQgZW50cmllc1xuY29uc3QgZGVzYyA9IGl0LmVudHJpZXMgPz8gaXQuZGVzYztcbmlmIChkZXNjKSB7XG4gIGZvciAoY29uc3QgcCBvZiAoQXJyYXkuaXNBcnJheShkZXNjKSA/IGRlc2MgOiBbZGVzY10pKSB7XG4gICAgLy8gcGxhaW4gcGFyYWdyYXBoXG4gICAgaWYgKHR5cGVvZiBwID09PSBcInN0cmluZ1wiKSB7XG4gICAgICBmb3IgKGNvbnN0IGxpbmUgb2YgcmVwbGFjZTVlVGFncyhwKS5zcGxpdChcIlxcblwiKSkgbGluZXMucHVzaChsaW5lKTtcbiAgICAgIGxpbmVzLnB1c2goXCJcIik7XG4gICAgICBjb250aW51ZTtcbiAgICB9XG5cbiAgICAvLyB0YWJsZSBibG9ja1xuICAgIGlmIChwICYmIHR5cGVvZiBwID09PSBcIm9iamVjdFwiICYmIHAudHlwZSA9PT0gXCJ0YWJsZVwiKSB7XG4gICAgICBpZiAobGluZXNbbGluZXMubGVuZ3RoIC0gMV0gIT09IFwiXCIpIGxpbmVzLnB1c2goXCJcIik7XG4gICAgICBsaW5lcy5wdXNoKHJlbmRlcjVlVGFibGUocCkpO1xuICAgICAgbGluZXMucHVzaChcIlwiKTtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cblxuICAgIC8vIGJ1bGxldCBsaXN0XG4gICAgaWYgKHAgJiYgdHlwZW9mIHAgPT09IFwib2JqZWN0XCIgJiYgcC50eXBlID09PSBcImxpc3RcIiAmJiBBcnJheS5pc0FycmF5KHAuaXRlbXMpKSB7XG4gICAgICBpZiAobGluZXNbbGluZXMubGVuZ3RoIC0gMV0gIT09IFwiXCIpIGxpbmVzLnB1c2goXCJcIik7XG4gICAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgcC5pdGVtcykge1xuICAgICAgICBpZiAodHlwZW9mIGl0ZW0gPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICBsaW5lcy5wdXNoKGAtICR7cmVwbGFjZTVlVGFncyhpdGVtKX1gKTtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBoZWFkID0gaXRlbT8ubmFtZVxuICAgICAgICAgID8gYCoqJHtyZXBsYWNlNWVUYWdzKFN0cmluZyhpdGVtLm5hbWUpKVxuICAgICAgICAgICAgICAgIC5yZXBsYWNlKC9bLiE/XSQvLCBtID0+IG0pXG4gICAgICAgICAgICAgICAgLnJlcGxhY2UoLyhbXi4hP10pJC8sIFwiJDEuXCIpfSoqYFxuICAgICAgICAgIDogXCJcIjtcbiAgICAgICAgbGV0IGJvZHkgPSBcIlwiO1xuICAgICAgICBpZiAodHlwZW9mIGl0ZW0/LmVudHJ5ID09PSBcInN0cmluZ1wiKSBib2R5ID0gcmVwbGFjZTVlVGFncyhpdGVtLmVudHJ5KTtcbiAgICAgICAgZWxzZSBpZiAoQXJyYXkuaXNBcnJheShpdGVtPy5lbnRyaWVzKSkge1xuICAgICAgICAgIGJvZHkgPSBpdGVtLmVudHJpZXNcbiAgICAgICAgICAgIC5tYXAoKGU6IGFueSkgPT4gKHR5cGVvZiBlID09PSBcInN0cmluZ1wiID8gcmVwbGFjZTVlVGFncyhlKSA6IFwiXCIpKVxuICAgICAgICAgICAgLmpvaW4oXCIgXCIpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGxpbmUgPSBbaGVhZCwgYm9keV0uZmlsdGVyKEJvb2xlYW4pLmpvaW4oXCIgXCIpLnRyaW0oKTtcbiAgICAgICAgaWYgKGxpbmUpIGxpbmVzLnB1c2goYC0gJHtsaW5lfWApO1xuICAgICAgfVxuICAgICAgbGluZXMucHVzaChcIlwiKTtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cblxuICAgIC8vIGdlbmVyaWMgb2JqZWN0IChpbnNldHMsIG5hbWVkIHNlY3Rpb25zLCBldGMuKVxuICAgIGlmIChwICYmIHR5cGVvZiBwID09PSBcIm9iamVjdFwiKSB7XG4gICAgICBpZiAobGluZXNbbGluZXMubGVuZ3RoIC0gMV0gPT09IFwiXCIpIGxpbmVzLnBvcCgpO1xuICAgICAgaWYgKHR5cGVvZiBwLm5hbWUgPT09IFwic3RyaW5nXCIgJiYgcC5uYW1lLnRyaW0oKSkge1xuICAgICAgICBsaW5lcy5wdXNoKGAjIyMjICR7cC5uYW1lfWApO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBzdWIgPSBBcnJheS5pc0FycmF5KHAuZW50cmllcykgPyBwLmVudHJpZXMgOiBbXTtcbiAgICAgIGZvciAoY29uc3Qgc3Agb2Ygc3ViKSB7XG4gICAgICAgIC8vIG5lc3RlZCB0YWJsZVxuICAgICAgICBpZiAoc3AgJiYgdHlwZW9mIHNwID09PSBcIm9iamVjdFwiICYmIHNwLnR5cGUgPT09IFwidGFibGVcIikge1xuICAgICAgICAgIGlmIChsaW5lc1tsaW5lcy5sZW5ndGggLSAxXSAhPT0gXCJcIikgbGluZXMucHVzaChcIlwiKTtcbiAgICAgICAgICBsaW5lcy5wdXNoKHJlbmRlcjVlVGFibGUoc3ApKTtcbiAgICAgICAgICBsaW5lcy5wdXNoKFwiXCIpO1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gbmVzdGVkIGJ1bGxldCBsaXN0XG4gICAgICAgIGlmIChzcCAmJiB0eXBlb2Ygc3AgPT09IFwib2JqZWN0XCIgJiYgc3AudHlwZSA9PT0gXCJsaXN0XCIgJiYgQXJyYXkuaXNBcnJheShzcC5pdGVtcykpIHtcbiAgICAgICAgICBpZiAobGluZXNbbGluZXMubGVuZ3RoIC0gMV0gIT09IFwiXCIpIGxpbmVzLnB1c2goXCJcIik7XG4gICAgICAgICAgZm9yIChjb25zdCBpdGVtIG9mIHNwLml0ZW1zKSB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIGl0ZW0gPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgICAgbGluZXMucHVzaChgLSAke3JlcGxhY2U1ZVRhZ3MoaXRlbSl9YCk7XG4gICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgaGVhZCA9IGl0ZW0/Lm5hbWVcbiAgICAgICAgICAgICAgPyBgKioke3JlcGxhY2U1ZVRhZ3MoU3RyaW5nKGl0ZW0ubmFtZSkpXG4gICAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKC9bLiE/XSQvLCBtID0+IG0pXG4gICAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKC8oW14uIT9dKSQvLCBcIiQxLlwiKX0qKmBcbiAgICAgICAgICAgICAgOiBcIlwiO1xuICAgICAgICAgICAgbGV0IGJvZHkgPSBcIlwiO1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBpdGVtPy5lbnRyeSA9PT0gXCJzdHJpbmdcIikgYm9keSA9IHJlcGxhY2U1ZVRhZ3MoaXRlbS5lbnRyeSk7XG4gICAgICAgICAgICBlbHNlIGlmIChBcnJheS5pc0FycmF5KGl0ZW0/LmVudHJpZXMpKSB7XG4gICAgICAgICAgICAgIGJvZHkgPSBpdGVtLmVudHJpZXNcbiAgICAgICAgICAgICAgICAubWFwKChlOiBhbnkpID0+ICh0eXBlb2YgZSA9PT0gXCJzdHJpbmdcIiA/IHJlcGxhY2U1ZVRhZ3MoZSkgOiBcIlwiKSlcbiAgICAgICAgICAgICAgICAuam9pbihcIiBcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBsaW5lID0gW2hlYWQsIGJvZHldLmZpbHRlcihCb29sZWFuKS5qb2luKFwiIFwiKS50cmltKCk7XG4gICAgICAgICAgICBpZiAobGluZSkgbGluZXMucHVzaChgLSAke2xpbmV9YCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGxpbmVzLnB1c2goXCJcIik7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBcdTIwMUNlbnRyaWVzXHUyMDFEIGJsb2NrcyB0aGF0IHNob3VsZCBiZSByZW5kZXJlZCBhcyBhIGJvbGRlZCBidWxsZXQgbGVhZFxuICAgICAgICBpZiAoc3AgJiYgdHlwZW9mIHNwID09PSBcIm9iamVjdFwiICYmIHNwLnR5cGUgPT09IFwiZW50cmllc1wiICYmIHNwLm5hbWUpIHtcbiAgICAgICAgICBjb25zdCBoZWFkID0gYC0gKioqJHtyZXBsYWNlNWVUYWdzKHNwLm5hbWUpfS4qKipgO1xuICAgICAgICAgIGNvbnN0IGJvZHkgPSAoQXJyYXkuaXNBcnJheShzcC5lbnRyaWVzKSA/IHNwLmVudHJpZXMgOiBbXSlcbiAgICAgICAgICAgIC5tYXAoKGU6IGFueSkgPT4gKHR5cGVvZiBlID09PSBcInN0cmluZ1wiID8gcmVwbGFjZTVlVGFncyhlKSA6IFwiXCIpKVxuICAgICAgICAgICAgLmpvaW4oXCIgXCIpO1xuICAgICAgICAgIGlmIChib2R5LnRyaW0oKSkgbGluZXMucHVzaChgJHtoZWFkfSAke2JvZHl9YC50cmltKCkpO1xuICAgICAgICAgIGVsc2UgbGluZXMucHVzaChoZWFkKTtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIG5lc3RlZCBwbGFpbiBwYXJhZ3JhcGhzXG4gICAgICAgIGlmICh0eXBlb2Ygc3AgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICBmb3IgKGNvbnN0IGxpbmUgb2YgcmVwbGFjZTVlVGFncyhzcCkuc3BsaXQoXCJcXG5cIikpIGxpbmVzLnB1c2gobGluZSk7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBnZW5lcmljIG5lc3RlZCBlbnRyaWVzIGZhbGxiYWNrXG4gICAgICAgIGlmIChzcCAmJiB0eXBlb2Ygc3AgPT09IFwib2JqZWN0XCIgJiYgQXJyYXkuaXNBcnJheShzcC5lbnRyaWVzKSkge1xuICAgICAgICAgIGZvciAoY29uc3QgaW5uZXIgb2Ygc3AuZW50cmllcykge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBpbm5lciA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgICBmb3IgKGNvbnN0IGxpbmUgb2YgcmVwbGFjZTVlVGFncyhpbm5lcikuc3BsaXQoXCJcXG5cIikpIGxpbmVzLnB1c2gobGluZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGxpbmVzLnB1c2goXCJcIik7XG4gICAgfVxuICB9XG59XG5cblxuICAgIGNvbnN0IGJvZHkgPSBsaW5lcy5qb2luKFwiXFxuXCIpO1xuXG4gICAgb3V0LnB1c2goeyBwYXRoOiBgSXRlbXMvJHtmb2xkZXJ9LyR7c2FmZU5hbWV9Lm1kYCwgY29udGVudDogYCR7ZnJvbnRtYXR0ZXJ9XFxuXFxuJHtib2R5fWAgfSk7XG4gIH1cblxuICByZXR1cm4gb3V0LnNvcnQoKGEsYikgPT4gYS5wYXRoLmxvY2FsZUNvbXBhcmUoYi5wYXRoKSk7XG59IiwgIi8vZG5kIDVlIDIwMTQgZWRpdGlvblxuXG5pbXBvcnQgeyBnZXRGdWxsU291cmNlTmFtZSB9IGZyb20gXCIuL3NvdXJjZU1hcFwiO1xuaW1wb3J0IHsgZm9ybWF0U2l6ZUFiYnJldiwgZm9ybWF0QWxpZ25tZW50QWJicmV2IH0gZnJvbSBcIi4uL2Jlc3RpYXJ5XCI7XG5pbXBvcnQgeyBmb3JtYXRSYW5nZSwgZm9ybWF0VGltZSwgZm9ybWF0RHVyYXRpb24sIFNDSE9PTF9NQVAgfSBmcm9tIFwiLi4vc3BlbGxzXCI7XG5pbXBvcnQgeyBQUk9QRVJUWV9NQVAsIERBTUFHRV9UWVBFX01BUCwgSVRFTV9UWVBFX01BUCB9IGZyb20gXCIuLi9pdGVtc1wiO1xuaW1wb3J0IHsgcmVwbGFjZTVlVGFncyB9IGZyb20gXCIuL3RhZ1JlcGxhY2VyXCI7XG5cbmZ1bmN0aW9uIGJsYW5rVW5kZWZpbmVkKHZhbDogYW55KTogYW55IHtcbiAgcmV0dXJuIHZhbCA9PT0gdW5kZWZpbmVkID8gXCJcIiA6IHZhbDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNhcChzdHI6IGFueSk6IHN0cmluZyB7XG4gIGlmICh0eXBlb2Ygc3RyICE9PSBcInN0cmluZ1wiKSByZXR1cm4gXCJcIjtcbiAgcmV0dXJuIHN0ci5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIHN0ci5zbGljZSgxKTtcbn1cblxuZXhwb3J0IGNvbnN0IEFCSUxJVFlfRlVMTDogUmVjb3JkPHN0cmluZyxzdHJpbmc+ID0ge1xuICBzdHI6IFwiU3RyZW5ndGhcIixcbiAgZGV4OiBcIkRleHRlcml0eVwiLFxuICBjb246IFwiQ29uc3RpdHV0aW9uXCIsXG4gIGludDogXCJJbnRlbGxpZ2VuY2VcIixcbiAgd2lzOiBcIldpc2RvbVwiLFxuICBjaGE6IFwiQ2hhcmlzbWFcIixcbn07XG5cbmV4cG9ydCBjb25zdCBTSVpFX01BUDogUmVjb3JkPHN0cmluZywgc3RyaW5nPiA9IHtcbiAgVDogXCJUaW55XCIsXG4gIFM6IFwiU21hbGxcIixcbiAgTTogXCJNZWRpdW1cIixcbiAgTDogXCJMYXJnZVwiLFxuICBIOiBcIkh1Z2VcIixcbiAgRzogXCJHYXJnYW50dWFuXCJcbn07XG5cbi8vIFx1MjUwMFx1MjUwMFx1MjUwMCBVbml2ZXJzYWwgZnJvbnRtYXR0ZXIga2V5cyBcdTI1MDBcdTI1MDBcdTI1MDAgIFxuZXhwb3J0IGNvbnN0IEZNX0ZJRUxEUyA9IHtcbiAgQUJJTElUWV9CT05VU0VTOiAgICBcImFiaWxpdHlfYm9udXNlc1wiLFxuICBBQzogICAgICAgICAgICAgICAgIFwiQUNcIixcbiAgQUxJR05NRU5UOiAgICAgICAgICBcIkFsaWdubWVudFwiLFxuICBBTU1PX1RZUEU6ICAgICAgICAgIFwiQW1tbyBUeXBlXCIsXG4gIEFSTU9SX1BST0ZJQ0lFTkNJRVM6XCJhcm1vci1wcm9mXCIsXG4gIEFUVEFDS19UWVBFOiAgICAgICAgXCJhdHRhY2tfdHlwZVwiLFxuICBBVFRVTkVNRU5UOiAgICAgICAgIFwiQXR0dW5lbWVudFwiLFxuICBBVFRVTkVfUkVROiAgICAgICAgIFwiQXR0dW5lX1JlcVwiLFxuICBDQVNUSU5HX1RJTUU6ICAgICAgIFwiY2FzdGluZ190aW1lXCIsXG4gIENIQVJJU01BOiAgICAgICAgICAgXCJjaGFyaXNtYVwiLFxuICBDSEFfTU9EOiAgICAgICAgICAgIFwiY2hhX21vZFwiLFxuICBDT05DRU5UUkFUSU9OOiAgICAgIFwiY29uY2VudHJhdGlvblwiLFxuICBDT05ESVRJT05fSU1NOiAgICAgIFwiY29uZF9pbW11bml0eVwiLFxuICBDT05TVElUVVRJT046ICAgICAgIFwiY29uc3RpdHV0aW9uXCIsXG4gIENPTl9NT0Q6ICAgICAgICAgICAgXCJjb25fbW9kXCIsXG4gIENPU1Q6ICAgICAgICAgICAgICAgXCJjb3N0XCIsXG4gIENPTVBPTkVOVFM6ICAgICAgICAgXCJDb21wb25lbnRzXCIsXG4gIENIQUxMRU5HRV9SQVRJTkc6ICAgXCJDUlwiLFxuICBEQU1BR0VfVFlQRTogICAgICAgIFwiZGFtYWdlX3R5cGVcIixcbiAgREFNQUdFX1RZUEVTOiAgICAgICBcImRhbWFnZVR5cGVzXCIsXG4gIERBTUFHRTogICAgICAgICAgICAgXCJkYW1hZ2VcIixcbiAgREFNQUdFX1JFUzogICAgICAgICBcImRtZ19yZXNpc3RhbmNlXCIsXG4gIERBTUFHRV9JTU06ICAgICAgICAgXCJkbWdfaW1tdW5pdHlcIixcbiAgREVYVEVSSVRZOiAgICAgICAgICBcImRleHRlcml0eVwiLFxuICBERVhfTU9EOiAgICAgICAgICAgIFwiZGV4X21vZFwiLFxuICBEVVJBVElPTjogICAgICAgICAgIFwiZHVyYXRpb25cIixcbiAgUlVMRVNFVDogICAgICAgICAgICBcInJ1bGVzZXRcIixcbiAgSFA6ICAgICAgICAgICAgICAgICBcIkhQXCIsXG4gIElOVEVMTElHRU5DRTogICAgICAgXCJpbnRlbGxpZ2VuY2VcIixcbiAgSU5UX01PRDogICAgICAgICAgICBcImludF9tb2RcIixcbiAgTEFOR1VBR0VTOiAgICAgICAgICBcImxhbmd1YWdlc1wiLFxuICBMRVZFTDogICAgICAgICAgICAgIFwibGV2ZWxcIixcbiAgTUFHSUNBTDogICAgICAgICAgICBcIm1hZ2ljYWxcIixcbiAgTUFURVJJQUw6ICAgICAgICAgICBcIm1hdGVyaWFsXCIsXG4gIE5BTUU6ICAgICAgICAgICAgICAgXCJuYW1lXCIsXG4gIFBST1BFUlRJRVM6ICAgICAgICAgXCJwcm9wZXJ0aWVzXCIsXG4gIFJBTkdFOiAgICAgICAgICAgICAgXCJyYW5nZVwiLFxuICBSQVJJVFk6ICAgICAgICAgICAgIFwicmFyaXR5XCIsXG4gIFJFTE9BRDogICAgICAgICAgICAgXCJyZWxvYWRcIixcbiAgUklUVUFMOiAgICAgICAgICAgICBcInJpdHVhbFwiLFxuICBTQVZFOiAgICAgICAgICAgICAgIFwic2F2ZVwiLFxuICBTQVZJTkdfVEhST1dTOiAgICAgIFwic2F2aW5nX3Rocm93c1wiLFxuICBTQ0hPT0w6ICAgICAgICAgICAgIFwic2Nob29sXCIsXG4gIFNFTlNFUzogICAgICAgICAgICAgXCJzZW5zZXNcIixcbiAgU0laRTogICAgICAgICAgICAgICBcInNpemVcIixcbiAgU0tJTExTOiAgICAgICAgICAgICBcInNraWxsc1wiLFxuICBTS0lMTF9DSE9JQ0VfTElTVDogIFwic2tpbGxfY2hvaWNlX2xpc3RcIixcbiAgU09NQVRJQzogICAgICAgICAgICBcInNvbWF0aWNcIixcbiAgU09VUkNFOiAgICAgICAgICAgICBcInNvdXJjZVwiLFxuICBTUEVDSUVTOiAgICAgICAgICAgIFwic3BlY2llc1wiLFxuICBTUEVFRDogICAgICAgICAgICAgIFwic3BlZWRcIixcbiAgU1BFTExfQ0FTVF9NT0Q6ICAgICBcIlNwZWxsIENhc3QgTW9kXCIsXG4gIFNQRUxMX1JBTkdFOiAgICAgICAgXCJSYW5nZVwiLFxuICBTVEVBTFRIX0RJU0FEVkFOVEFHRTogXCJzdGVhbHRoRGlzYWR2YW50YWdlXCIsXG4gIFNUUkVOR1RIOiAgICAgICAgICAgXCJzdHJlbmd0aFwiLFxuICBTVFJfTU9EOiAgICAgICAgICAgIFwic3RyX21vZFwiLFxuICBTVUJSQUNFUzogICAgICAgICAgIFwic3VicmFjZXNcIixcbiAgVE9PTF9QUk9GSUNJRU5DSUVTOiBcInRvb2wtcHJvZlwiLFxuICBUT09MX0NIT0lDRV9MSVNUOiAgXCJ0b29sX2Nob2ljZV9saXN0XCIsXG4gIFRSQUlUUzogICAgICAgICAgICAgXCJ0cmFpdHNcIixcbiAgVFlQRTogICAgICAgICAgICAgICBcInR5cGVcIixcbiAgVkFSSUFOVDogICAgICAgICAgICBcIlZhcmlhbnRcIixcbiAgVkVSQkFMOiAgICAgICAgICAgICBcInZlcmJhbFwiLFxuICBWRVJNVU46ICAgICAgICAgICAgIFwidmVybXVuXCIsXG4gIFdFQVBPTl9QUk9GSUNJRU5DSUVTOiBcIndlYXBvbi1wcm9mXCIsXG4gIFdFSUdIVDogICAgICAgICAgICAgXCJ3ZWlnaHRcIixcbiAgV0lTRE9NOiAgICAgICAgICAgICBcIndpc2RvbVwiLFxuICBXSVNfTU9EOiAgICAgICAgICAgIFwid2lzX21vZFwiLFxufSBhcyBjb25zdDtcblxuZXhwb3J0IHR5cGUgRk1LZXkgPSBrZXlvZiB0eXBlb2YgRk1fRklFTERTO1xuZXhwb3J0IHR5cGUgRnJvbnRtYXR0ZXIgPSBQYXJ0aWFsPFJlY29yZDx0eXBlb2YgRk1fRklFTERTW0ZNS2V5XSwgdW5rbm93bj4+O1xuXG4vLyBcdTI1MDBcdTI1MDBcdTI1MDAgRGVmaW5pdGlvbiBvZiBhIHNpbmdsZSBmaWVsZCBtYXBwaW5nIFx1MjUwMFx1MjUwMFx1MjUwMFxuZXhwb3J0IGludGVyZmFjZSBGaWVsZERlZiB7XG4gIC8qKiBXaGljaCBjYWxsXHUyMDEwc2lnbiAoa2V5IGluIEZNX0ZJRUxEUykgKi9cbiAgY2FsbFNpZ246IEZNS2V5O1xuICAvKiogV2hpY2ggSlNPTiBwcm9wZXJ0eSB0byByZWFkICovXG4gIGpzb25LZXk6ICBzdHJpbmcgfCBzdHJpbmdbXTtcbiAgLyoqIE9wdGlvbmFsIHRyYW5zZm9ybWVyOiByYXcgSlNPTiBcdTIxOTIgZmluYWwgdmFsdWUgKi9cbiAgY29udj86ICAgIChyYXc6IGFueSwgYWxsSnNvbj86IGFueSkgPT4gdW5rbm93bjtcbn1cblxuY29uc3QgdW5pZmllZEFybW9yUHJvZnMgPSAodmFsOiBhbnkpOiBzdHJpbmdbXSA9PlxuICBBcnJheS5pc0FycmF5KHZhbD8uYXJtb3IpID8gdmFsLmFybW9yLm1hcChjYXApIDpcbiAgQXJyYXkuaXNBcnJheSh2YWwpID8gdmFsLm1hcChjYXApIDogW107XG5cbi8vIGZyb250bWF0dGVyLnRzXG5cbmV4cG9ydCBmdW5jdGlvbiB1bmlmaWVkV2VhcG9uUHJvZnModmFsOiBhbnkpOiBzdHJpbmdbXSB7XG4gIC8vIHB1bGwgdGhlIFx1MjAxQ3dlYXBvbnNcdTIwMUQgYXJyYXkgb2ZmIGVpdGhlciBhIHJhdyBhcnJheSBvciBhIHN0YXJ0aW5nUHJvZmljaWVuY2llcyBvYmplY3RcbiAgY29uc3QgcmF3QXJyOiBhbnlbXSA9IEFycmF5LmlzQXJyYXkodmFsPy53ZWFwb25zKVxuICAgID8gdmFsLndlYXBvbnNcbiAgICA6IEFycmF5LmlzQXJyYXkodmFsKVxuICAgID8gdmFsXG4gICAgOiBbXTtcblxuICBjb25zdCBvdXQgPSBuZXcgU2V0PHN0cmluZz4oKTtcblxuICBmdW5jdGlvbiBoYW5kbGVPbmUoZW50cnk6IGFueSkge1xuICAgIGlmIChBcnJheS5pc0FycmF5KGVudHJ5KSkge1xuICAgICAgLy8gZmxhdHRlbiBuZXN0ZWQgYXJyYXlzXG4gICAgICBlbnRyeS5mb3JFYWNoKGhhbmRsZU9uZSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKHR5cGVvZiBlbnRyeSA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgY29uc3QgbGl0ID0gZW50cnkudHJpbSgpLnRvTG93ZXJDYXNlKCk7XG4gICAgICBpZiAobGl0ID09PSBcInNpbXBsZVwiKSB7XG4gICAgICAgIG91dC5hZGQoXCJTaW1wbGUgV2VhcG9uc1wiKTtcbiAgICAgIH0gZWxzZSBpZiAobGl0ID09PSBcIm1hcnRpYWxcIikge1xuICAgICAgICBvdXQuYWRkKFwiTWFydGlhbCBXZWFwb25zXCIpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gZGV0ZWN0IHRhZ2dlZCBpdGVtcyB2cyBzaW1wbGUgd29yZHNcbiAgICAgICAgY29uc3QgdGV4dCA9IGVudHJ5LnN0YXJ0c1dpdGgoXCJ7QFwiKVxuICAgICAgICAgID8gcmVwbGFjZTVlVGFncyhlbnRyeSlcbiAgICAgICAgICA6IGNhcChlbnRyeSk7XG4gICAgICAgIG91dC5hZGQodGV4dCk7XG4gICAgICB9XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKGVudHJ5ICYmIHR5cGVvZiBlbnRyeSA9PT0gXCJvYmplY3RcIiAmJiBlbnRyeS5wcm9maWNpZW5jeSkge1xuICAgICAgLy8geyBwcm9maWNpZW5jeTogXCJmaXJlYXJtc1wiLCBvcHRpb25hbDogdHJ1ZSB9XG4gICAgICBjb25zdCBuYW1lID0gY2FwKGVudHJ5LnByb2ZpY2llbmN5KTtcbiAgICAgIG91dC5hZGQoZW50cnkub3B0aW9uYWwgPyBgJHtuYW1lfSAob3B0aW9uYWwpYCA6IG5hbWUpO1xuICAgIH1cbiAgfVxuXG4gIHJhd0Fyci5mb3JFYWNoKGhhbmRsZU9uZSk7XG4gIHJldHVybiBbLi4ub3V0XTtcbn1cblxuXG5jb25zdCBTQVZFX05BTUVfTUFQOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+ID0ge1xuICBzdHI6IFwiU3RyZW5ndGhcIixcbiAgc3RyZW5ndGg6IFwiU3RyZW5ndGhcIixcbiAgZGV4OiBcIkRleHRlcml0eVwiLFxuICBkZXh0ZXJpdHk6IFwiRGV4dGVyaXR5XCIsXG4gIGNvbjogXCJDb25zdGl0dXRpb25cIixcbiAgY29uc3RpdHV0aW9uOiBcIkNvbnN0aXR1dGlvblwiLFxuICBpbnQ6IFwiSW50ZWxsaWdlbmNlXCIsXG4gIGludGVsbGlnZW5jZTogXCJJbnRlbGxpZ2VuY2VcIixcbiAgd2lzOiBcIldpc2RvbVwiLFxuICB3aXNkb206IFwiV2lzZG9tXCIsXG4gIGNoYTogXCJDaGFyaXNtYVwiLFxuICBjaGFyaXNtYTogXCJDaGFyaXNtYVwiLFxufTtcblxuZXhwb3J0IGZ1bmN0aW9uIHVuaWZpZWRTYXZlcyh2YWw6IGFueSk6IHN0cmluZ1tdIHtcbiAgaWYgKCF2YWwpIHJldHVybiBbXTtcblxuICAvLyBBcnJheSBmb3JtXG4gIGlmIChBcnJheS5pc0FycmF5KHZhbCkpIHtcbiAgICByZXR1cm4gdmFsLm1hcCgoaykgPT4ge1xuICAgICAgY29uc3Qga2V5ID0gU3RyaW5nKGspLnRvTG93ZXJDYXNlKCk7XG4gICAgICByZXR1cm4gU0FWRV9OQU1FX01BUFtrZXldIHx8IChrZXkuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBrZXkuc2xpY2UoMSkpO1xuICAgIH0pO1xuICB9XG5cbiAgLy8gT2JqZWN0IGZvcm0gKGUuZy4sIHsgY29uOiB0cnVlLCBkZXg6IHRydWUgfSlcbiAgaWYgKHR5cGVvZiB2YWwgPT09IFwib2JqZWN0XCIpIHtcbiAgICByZXR1cm4gT2JqZWN0LmtleXModmFsKS5tYXAoKGspID0+IHtcbiAgICAgIGNvbnN0IGtleSA9IGsudG9Mb3dlckNhc2UoKTtcbiAgICAgIHJldHVybiBTQVZFX05BTUVfTUFQW2tleV0gfHwgKGtleS5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIGtleS5zbGljZSgxKSk7XG4gICAgfSk7XG4gIH1cblxuICAvLyBTdHJpbmcgZm9ybVxuICBjb25zdCBrZXkgPSBTdHJpbmcodmFsKS50b0xvd2VyQ2FzZSgpO1xuICByZXR1cm4gW1NBVkVfTkFNRV9NQVBba2V5XSB8fCAoa2V5LmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsga2V5LnNsaWNlKDEpKV07XG59XG5cbmV4cG9ydCBjb25zdCB1bmlmaWVkU2tpbGxzID0gKHZhbDogYW55KTogc3RyaW5nW10gPT4ge1xuICAvLyAxKSBcdTIwMUNCZXN0aWFyeVx1MjAxRCBzdHlsZTogZmxhdCBvYmplY3QgbWFwcGluZyBza2lsbFx1MjE5Mm1vZGlmaWVyXG4gIGlmIChcbiAgICB2YWwgJiZcbiAgICAhQXJyYXkuaXNBcnJheSh2YWwpICYmXG4gICAgdHlwZW9mIHZhbCA9PT0gXCJvYmplY3RcIiAmJlxuICAgIC8vIGVuc3VyZSBldmVyeSB2YWx1ZSBpcyBhIHN0cmluZyBvciBudW1iZXJcbiAgICBPYmplY3QudmFsdWVzKHZhbCkuZXZlcnkodiA9PiB0eXBlb2YgdiA9PT0gXCJzdHJpbmdcIiB8fCB0eXBlb2YgdiA9PT0gXCJudW1iZXJcIilcbiAgKSB7XG4gICAgcmV0dXJuIE9iamVjdC5lbnRyaWVzKHZhbCkubWFwKFxuICAgICAgKFtza2lsbCwgbW9kXSkgPT4gYCR7Y2FwKHNraWxsKX0gJHttb2R9YC50cmltKClcbiAgICApO1xuICB9XG5cbiAgLy8gMikgbmVzdGVkIHVuZGVyIC5za2lsbHMgLyAuc2tpbGxQcm9maWNpZW5jaWVzIC8gLnNraWxsUHJvZlxuICBpZiAodmFsICYmICFBcnJheS5pc0FycmF5KHZhbCkgJiYgdHlwZW9mIHZhbCA9PT0gXCJvYmplY3RcIikge1xuICAgIGNvbnN0IG5lc3RlZCA9ICh2YWwgYXMgYW55KS5za2lsbHNcbiAgICAgID8/ICh2YWwgYXMgYW55KS5za2lsbFByb2ZcbiAgICAgID8/ICh2YWwgYXMgYW55KS5za2lsbFByb2ZpY2llbmNpZXM7XG4gICAgcmV0dXJuIHVuaWZpZWRTa2lsbHMobmVzdGVkKTtcbiAgfVxuXG4gIC8vIDMpIGFycmF5LXN0eWxlXG4gIGlmICghQXJyYXkuaXNBcnJheSh2YWwpKSByZXR1cm4gW107XG5cbiAgY29uc3Qgb3V0ID0gbmV3IFNldDxzdHJpbmc+KCk7XG4gIGZvciAoY29uc3QgZSBvZiB2YWwpIHtcbiAgICAvLyAzYSkgeyBhbnk6IE4gfVxuICAgIGlmIChlICYmIHR5cGVvZiBlID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiAoZSBhcyBhbnkpLmFueSA9PT0gXCJudW1iZXJcIikge1xuICAgICAgb3V0LmFkZChgQ2hvb3NlICR7KGUgYXMgYW55KS5hbnl9YCk7XG4gICAgICBjb250aW51ZTtcbiAgICB9XG4gICAgLy8gM2IpIHsgY2hvb3NlOiB7IGNvdW50LCBcdTIwMjYgfSB9XG4gICAgaWYgKGUgJiYgdHlwZW9mIGUgPT09IFwib2JqZWN0XCIgJiYgKGUgYXMgYW55KS5jaG9vc2UpIHtcbiAgICAgIGNvbnN0IGNudCA9IChlIGFzIGFueSkuY2hvb3NlLmNvdW50ID8/IDE7XG4gICAgICBvdXQuYWRkKGBDaG9vc2UgJHtjbnR9YCk7XG4gICAgfVxuICAgIC8vIDNjKSBmaXhlZCBmbGFncyBmb286IHRydWVcbiAgICBpZiAoZSAmJiB0eXBlb2YgZSA9PT0gXCJvYmplY3RcIikge1xuICAgICAgZm9yIChjb25zdCBbaywgdl0gb2YgT2JqZWN0LmVudHJpZXMoZSkpIHtcbiAgICAgICAgaWYgKHYgPT09IHRydWUpIG91dC5hZGQoY2FwKGspKTtcbiAgICAgIH1cbiAgICB9XG4gICAgLy8gM2QpIGxpdGVyYWwgc3RyaW5nc1xuICAgIGlmICh0eXBlb2YgZSA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgb3V0LmFkZChjYXAoZSkpO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBbLi4ub3V0XTtcbn07XG5cblxuIFxuZXhwb3J0IGNvbnN0IHVuaWZpZWRUb29sUHJvZnMgPSAodmFsOiBhbnkpOiBzdHJpbmdbXSA9PiB7XG4gIC8vIHB1bGwgbmVzdGVkIGFycmF5IGlmIHNvbWVvbmUgcGFzc2VkIHlvdSB0aGUgd2hvbGUgc3RhcnRpbmdQcm9maWNpZW5jaWVzIG9ialxuICBsZXQgZW50cmllczogYW55W10gPSBBcnJheS5pc0FycmF5KHZhbCkgPyB2YWxcbiAgICA6IEFycmF5LmlzQXJyYXkodmFsPy50b29sUHJvZmljaWVuY2llcykgPyB2YWwudG9vbFByb2ZpY2llbmNpZXNcbiAgICA6IEFycmF5LmlzQXJyYXkodmFsPy50b29scykgICAgICAgICAgICAgPyB2YWwudG9vbHNcbiAgICA6IFtdO1xuXG4gIGNvbnN0IG91dCA9IG5ldyBTZXQ8c3RyaW5nPigpO1xuICBsZXQgc2F3Q2hvb3NlID0gZmFsc2U7XG5cbiAgZm9yIChjb25zdCBlIG9mIGVudHJpZXMpIHtcbiAgICBpZiAodHlwZW9mIGUgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgIG91dC5hZGQoY2FwKGUpKTtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cblxuICAgIGlmIChlPy5jaG9vc2UpIHtcbiAgICAgIGNvbnN0IGNudCA9IGUuY2hvb3NlLmNvdW50ID8/IDE7XG4gICAgICBzYXdDaG9vc2UgPSB0cnVlO1xuICAgICAgb3V0LmFkZChgQ2hvb3NlICR7Y250fWApO1xuICAgIH1cblxuICAgIC8vIHB1bGwgb3V0IGFueSBmaXhlZCBcdTIwMUNmb286IHRydWVcdTIwMUQgb3IgbnVtZXJpYyBcdTIwMUNhbnlGb286IE5cdTIwMURcbiAgICBmb3IgKGNvbnN0IFtrLHZdIG9mIE9iamVjdC5lbnRyaWVzKGUpKSB7XG4gICAgICBpZiAodiA9PT0gdHJ1ZSkge1xuICAgICAgICBvdXQuYWRkKGNhcChrKSk7XG4gICAgICB9IGVsc2UgaWYgKHR5cGVvZiB2ID09PSBcIm51bWJlclwiICYmIGsuc3RhcnRzV2l0aChcImFueVwiKSkge1xuICAgICAgICAvLyBlLmcuIGFueUFydGlzYW5zVG9vbDoxXG4gICAgICAgIGNvbnN0IHJhdyA9IGsucmVwbGFjZSgvXmFueS8sIFwiXCIpO1xuICAgICAgICBjb25zdCBzcGFjZWQgPSByYXdcbiAgICAgICAgICAucmVwbGFjZSgvKFthLXpdKShbQS1aXSkvZywgXCIkMSAkMlwiKVxuICAgICAgICAgIC5zcGxpdChcIiBcIilcbiAgICAgICAgICAubWFwKGNhcClcbiAgICAgICAgICAuam9pbihcIiBcIik7XG4gICAgICAgIG91dC5hZGQoYENob29zZSAke3Z9ICR7c3BhY2VkfWApO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiBbLi4ub3V0XTtcbn07XG5cbmV4cG9ydCBjb25zdCBBTExfRklFTERfREVGUzogRmllbGREZWZbXSA9IFtcbiAgLy8gXHUyNTAwXHUyNTAwXHUyNTAwIENvcmUgXHUyNTAwXHUyNTAwXHUyNTAwXG4gIHsgY2FsbFNpZ246IFwiTkFNRVwiLCAganNvbktleTogXCJuYW1lXCIgfSxcbiAgeyBjYWxsU2lnbjogXCJTT1VSQ0VcIiwganNvbktleTogW1wic291cmNlXCJdLCBjb252OiAocmF3LCBhbGwpID0+IHtcbiAgICAgIGNvbnN0IG91dCA9IG5ldyBTZXQ8c3RyaW5nPigpO1xuICAgICAgY29uc3QgYXJyID0gQXJyYXkuaXNBcnJheShyYXcpID8gcmF3IDogW3Jhd107XG4gICAgICBhcnIuZm9yRWFjaChzcmMgPT4gb3V0LmFkZChnZXRGdWxsU291cmNlTmFtZShzcmMsIChhbGwgYXMgYW55KS5fZWRpdGlvbklkKSkpO1xuICAgICAgZm9yIChjb25zdCBvcyBvZiBhbGwub3RoZXJTb3VyY2VzID8/IFtdKSBvdXQuYWRkKGdldEZ1bGxTb3VyY2VOYW1lKG9zLnNvdXJjZSwgKGFsbCBhcyBhbnkpLl9lZGl0aW9uSWQpKTtcbiAgICAgIGZvciAoY29uc3QgcmVwIG9mIGFsbC5yZXByaW50ZWRBcyA/PyBbXSkge1xuICAgICAgICBjb25zdCBbLCBzcmNdID0gKHJlcCBhcyBzdHJpbmcpLnNwbGl0KFwifFwiKTtcbiAgICAgICAgb3V0LmFkZChnZXRGdWxsU291cmNlTmFtZShzcmMsIChhbGwgYXMgYW55KS5fZWRpdGlvbklkKSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gWy4uLm91dF07XG4gIH19LFxuXG4gIC8vIFx1MjUwMFx1MjUwMFx1MjUwMCBQcm9maWNpZW5jaWVzIFx1MjUwMFx1MjUwMFx1MjUwMFxuICB7IGNhbGxTaWduOiBcIkFSTU9SX1BST0ZJQ0lFTkNJRVNcIiwgIGpzb25LZXk6IFtcImFybW9yUHJvZmljaWVuY2llc1wiLCBcImFybW9yUHJvZnNcIiwgXCJzdGFydGluZ1Byb2ZpY2llbmNpZXNcIl0sIGNvbnY6IHVuaWZpZWRBcm1vclByb2ZzIH0sXG4gIHsgXG4gICAgY2FsbFNpZ246IFwiV0VBUE9OX1BST0ZJQ0lFTkNJRVNcIixcbiAgICBqc29uS2V5OiBbXCJ3ZWFwb25Qcm9maWNpZW5jaWVzXCIsXCJ3ZWFwb25Qcm9mc1wiLFwic3RhcnRpbmdQcm9maWNpZW5jaWVzXCJdLFxuICAgIGNvbnY6IHVuaWZpZWRXZWFwb25Qcm9mc1xuICB9LFxuICB7IGNhbGxTaWduOiBcIlRPT0xfUFJPRklDSUVOQ0lFU1wiLCAgIGpzb25LZXk6IFtcInRvb2xQcm9maWNpZW5jaWVzXCIsIFwidG9vbFByb2ZzXCIsIFwic3RhcnRpbmdQcm9maWNpZW5jaWVzXCJdLCBjb252OiB1bmlmaWVkVG9vbFByb2ZzIH0sXG4gIHtcbiAgICBjYWxsU2lnbjogXCJUT09MX0NIT0lDRV9MSVNUXCIsXG4gICAganNvbktleTogW1widG9vbFByb2ZpY2llbmNpZXNcIiwgXCJ0b29sUHJvZnNcIiwgXCJzdGFydGluZ1Byb2ZpY2llbmNpZXNcIl0sXG4gICAgY29udjogKHJhdzogYW55KSA9PiB7XG4gICAgICBjb25zdCBhcnIgPSBBcnJheS5pc0FycmF5KHJhdylcbiAgICAgICAgPyByYXdcbiAgICAgICAgOiBBcnJheS5pc0FycmF5KHJhdz8udG9vbFByb2ZpY2llbmNpZXMpXG4gICAgICAgID8gcmF3LnRvb2xQcm9maWNpZW5jaWVzXG4gICAgICAgIDogQXJyYXkuaXNBcnJheShyYXc/LnRvb2xzKVxuICAgICAgICA/IHJhdy50b29sc1xuICAgICAgICA6IFtdO1xuICAgICAgY29uc3QgY2hvaWNlID0gYXJyLmZpbmQoKGU6IGFueSkgPT4gZT8uY2hvb3NlKTtcbiAgICAgIHJldHVybiBjaG9pY2U/LmNob29zZT8uZnJvbT8ubWFwKChzOiBzdHJpbmcpID0+IGNhcChzKSkgPz8gW107XG4gICAgfVxuICB9LFxuICB7IGNhbGxTaWduOiBcIlNBVklOR19USFJPV1NcIiwgICAgICAgIGpzb25LZXk6IFtcInNhdmVcIiwgXCJwcm9maWNpZW5jeVwiLCBcInNhdmluZ1Rocm93XCJdLCBjb252OiB1bmlmaWVkU2F2ZXMgfSxcbiAge1xuICAgIGNhbGxTaWduOiBcIlNLSUxMU1wiLFxuICAgIGpzb25LZXk6IFtcInNraWxsXCIsIFwic2tpbGxQcm9mXCIsIFwic2tpbGxQcm9maWNpZW5jaWVzXCIsIFwic3RhcnRpbmdQcm9maWNpZW5jaWVzXCJdLFxuICAgIGNvbnY6IHVuaWZpZWRTa2lsbHNcbiAgfSxcblxuICB7XG4gICAgY2FsbFNpZ246IFwiU0tJTExfQ0hPSUNFX0xJU1RcIixcbiAgICBqc29uS2V5OiBbXCJza2lsbFwiLCBcInNraWxsUHJvZlwiLCBcInNraWxsUHJvZmljaWVuY2llc1wiLCBcInN0YXJ0aW5nUHJvZmljaWVuY2llc1wiXSxcbiAgICBjb252OiAocmF3OiBhbnkpID0+IHtcbiAgICAgIC8vIG5vcm1hbGl6ZSBpbnRvIGFuIGFycmF5IG9mIGVudHJpZXNcbiAgICAgIGNvbnN0IGFycjogYW55W10gPSBBcnJheS5pc0FycmF5KHJhdylcbiAgICAgICAgPyByYXdcbiAgICAgICAgOiBBcnJheS5pc0FycmF5KHJhdz8uc2tpbGxQcm9maWNpZW5jaWVzKVxuICAgICAgICA/IHJhdy5za2lsbFByb2ZpY2llbmNpZXNcbiAgICAgICAgOiBBcnJheS5pc0FycmF5KHJhdz8uc2tpbGxzKVxuICAgICAgICA/IHJhdy5za2lsbHNcbiAgICAgICAgOiBBcnJheS5pc0FycmF5KHJhdz8uc2tpbGxQcm9mKVxuICAgICAgICA/IHJhdy5za2lsbFByb2ZcbiAgICAgICAgOiBbXTtcblxuICAgICAgLy8gZmluZCB0aGUgb25lIGVudHJ5IHRoYXQgcmVwcmVzZW50cyB0aGUgXHUyMDFDY2hvb3NlXHUyMDFEIGJ1Y2tldFxuICAgICAgY29uc3QgY2hvaWNlT2JqID0gYXJyLmZpbmQoZSA9PiBlPy5jaG9vc2UgfHwgdHlwZW9mIGUuYW55ID09PSBcIm51bWJlclwiKTtcbiAgICAgIGlmICghY2hvaWNlT2JqKSByZXR1cm4gW107XG5cbiAgICAgIC8vIGV4cGxpY2l0IFx1MjAxQ2Nob29zZSBmcm9tIFsgLi4uIF1cdTIwMURcbiAgICAgIGlmIChjaG9pY2VPYmouY2hvb3NlICYmIEFycmF5LmlzQXJyYXkoY2hvaWNlT2JqLmNob29zZS5mcm9tKSkge1xuICAgICAgICByZXR1cm4gY2hvaWNlT2JqLmNob29zZS5mcm9tLm1hcChjYXApO1xuICAgICAgfVxuXG4gICAgICAvLyB0aGUgXHUyMDFDYW55OiAzXHUyMDFEIHNob3J0aGFuZCBcdTIxOTIgb2ZmZXIgZXZlcnkgc2tpbGxcbiAgICAgIGlmICh0eXBlb2YgY2hvaWNlT2JqLmFueSA9PT0gXCJudW1iZXJcIikge1xuICAgICAgICAvLyBTS0lMTF9PUFRJT05TIGlzIHlvdXIgY29uc3QgW1wiQWNyb2JhdGljc1wiLCBcIkFuaW1hbCBIYW5kbGluZ1wiLCBcdTIwMjZdXG4gICAgICAgIHJldHVybiBTS0lMTF9PUFRJT05TO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gW107XG4gICAgfVxuICB9LFxuICB7IGNhbGxTaWduOiBcIlNQRUxMX0NBU1RfTU9EXCIsanNvbktleTogXCJzcGVsbGNhc3RpbmdBYmlsaXR5XCIsICBcbiAgICBjb252OiAocmF3KSA9PiB7XG4gICAgLy8gcmF3IG1pZ2h0IGJlIFwiY2hhXCIgb3IgXCJDSEFcIlxuICAgIGNvbnN0IGtleSA9IFN0cmluZyhyYXcpLnRvTG93ZXJDYXNlKCk7XG4gICAgcmV0dXJuIEFCSUxJVFlfRlVMTFtrZXldIHx8IGtleS50b1VwcGVyQ2FzZSgpO1xuICB9fSxcblxuICB7XG4gICAgY2FsbFNpZ246IFwiUlVMRVNFVFwiLFxuICAgIGpzb25LZXk6IFwibmFtZVwiLFxuICAgIC8vIGlnbm9yZSB0aGUgcmF3IHZhbHVlLCBhbHdheXMgcHJpbnQgSEVMTE9cbiAgICBjb252OiAoX3JhdywgX2FsbCkgPT4gXCJEJkQgNWUgKDIwMTQpXCIsXG4gIH0sIFxuXG4gIC8vIFx1MjUwMFx1MjUwMFx1MjUwMCBTcGVsbHMgXHUyNTAwXHUyNTAwXHUyNTAwXG4gIHsgY2FsbFNpZ246IFwiTEVWRUxcIiwgICAgICAgICBqc29uS2V5OiBcImxldmVsXCIgfSxcbiAgeyBjYWxsU2lnbjogXCJTQ0hPT0xcIiwgICAgICAgIGpzb25LZXk6IFwic2Nob29sXCIsICAgY29udjogcyA9PiBTQ0hPT0xfTUFQW3NdID8/IHMgfSxcbiAgeyBjYWxsU2lnbjogXCJDQVNUSU5HX1RJTUVcIiwgIGpzb25LZXk6IFwidGltZVwiLCAgICAgY29udjogZm9ybWF0VGltZSB9LFxuICB7IGNhbGxTaWduOiBcIlNQRUxMX1JBTkdFXCIsICAganNvbktleTogXCJyYW5nZVwiLCAgICBjb252OiBmb3JtYXRSYW5nZSB9LFxuICB7IGNhbGxTaWduOiBcIkRVUkFUSU9OXCIsICAgICAganNvbktleTogXCJkdXJhdGlvblwiLCBjb252OiBmb3JtYXREdXJhdGlvbiB9LFxuICB7IGNhbGxTaWduOiBcIlZFUkJBTFwiLCAgICAgICAganNvbktleTogXCJjb21wb25lbnRzXCIsIGNvbnY6IChjOmFueSkgPT4gISFjLnYgfSxcbiAgeyBjYWxsU2lnbjogXCJTT01BVElDXCIsICAgICAgIGpzb25LZXk6IFwiY29tcG9uZW50c1wiLCBjb252OiAoYzphbnkpID0+ICEhYy5zIH0sXG4gIHsgY2FsbFNpZ246IFwiTUFURVJJQUxcIiwgICAgICBqc29uS2V5OiBcImNvbXBvbmVudHNcIiwgY29udjogKGM6YW55KSA9PiAhIWMubSB9LFxuICB7IGNhbGxTaWduOiBcIkNPTVBPTkVOVFNcIixcbiAgICBqc29uS2V5OiAgXCJjb21wb25lbnRzXCIsXG4gICAgY29udjogKGM6IGFueSk6IHN0cmluZ1tdID0+IHtcbiAgICAgIGlmICghYy5tKSByZXR1cm4gW107XG5cbiAgICAgIGNvbnN0IHJhdyA9IEFycmF5LmlzQXJyYXkoYy5tKSA/IGMubSA6IFtjLm1dO1xuXG4gICAgICByZXR1cm4gcmF3XG4gICAgICAgIC5tYXAoKGl0ZW06IGFueSk6IHN0cmluZyB8IG51bGwgPT4ge1xuICAgICAgICAgIGlmICh0eXBlb2YgaXRlbSA9PT0gXCJzdHJpbmdcIikgcmV0dXJuIGl0ZW07XG4gICAgICAgICAgaWYgKGl0ZW0gJiYgdHlwZW9mIGl0ZW0gPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIGl0ZW0udGV4dCA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgcmV0dXJuIGl0ZW0udGV4dDtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH0pXG4gICAgICAgIC5maWx0ZXIoKGNvbXA6IHN0cmluZyB8IG51bGwpOiBjb21wIGlzIHN0cmluZyA9PiBjb21wICE9PSBudWxsKTtcbiAgICB9XG4gIH0sIFxuICB7IGNhbGxTaWduOiBcIkFUVEFDS19UWVBFXCIsICAganNvbktleTogXCJhdHRhY2tUeXBlXCIgfSxcbiAgeyBjYWxsU2lnbjogXCJEQU1BR0VfVFlQRVwiLCAgIGpzb25LZXk6IFwiZGFtYWdlSW5mbGljdFwiLCBjb252OiBkID0+IEFycmF5LmlzQXJyYXkoZCkgPyBkWzBdIDogZCB9LFxuICB7IGNhbGxTaWduOiBcIlJJVFVBTFwiLCAgICAgICAganNvbktleTogXCJyaXR1YWxcIiB9LFxuICB7IGNhbGxTaWduOiBcIkNPTkNFTlRSQVRJT05cIiwganNvbktleTogXCJkdXJhdGlvblwiLCBjb252OiBkcyA9PiBBcnJheS5pc0FycmF5KGRzKSAmJiBkcy5zb21lKCh4OmFueSk9PiB4LmNvbmNlbnRyYXRpb24pIH0sXG4gIHsgY2FsbFNpZ246IFwiU0FWRVwiLCAgICAgICAgICBqc29uS2V5OiBcInNhdmVBdHRyXCIgfSxcblxuICAvLyBcdTI1MDBcdTI1MDBcdTI1MDAgU3BlY2llcyAvIENyZWF0dXJlcyBcdTI1MDBcdTI1MDBcdTI1MDBcbiAgeyBjYWxsU2lnbjogXCJTUEVDSUVTXCIsIGpzb25LZXk6IFwibmFtZVwiIH0sXG4gIHsgY2FsbFNpZ246IFwiU0laRVwiLCBqc29uS2V5OiBcInNpemVcIiwgY29udjogKHJhdzogYW55KSA9PiB7XG4gICAgICAvLyBoYW5kbGUgW1wiU1wiLFwiTVwiXSBvciBqdXN0IFwiTFwiXG4gICAgICBpZiAoQXJyYXkuaXNBcnJheShyYXcpKSB7XG4gICAgICAgIHJldHVybiByYXcubWFwKHIgPT4gU0laRV9NQVBbcl0gfHwgcik7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gU0laRV9NQVBbcmF3XSB8fCByYXc7XG4gICAgICB9XG4gICAgfVxuICB9LFxuICAgIHtcbiAgY2FsbFNpZ246IFwiU1BFRURcIixcbiAganNvbktleTogICBcInNwZWVkXCIsXG4gIGNvbnY6IChzcDogbnVtYmVyIHwgUmVjb3JkPHN0cmluZywgYW55PikgPT4ge1xuICAgIC8vIGhhbmRsZSBib3RoIG51bWVyaWMgc3BlZWRzIGFuZCBvYmplY3Qgc3BlZWRzXG4gICAgaWYgKHR5cGVvZiBzcCA9PT0gXCJudW1iZXJcIikge1xuICAgICAgcmV0dXJuIFtgV2FsayAke3NwfSBmdC5gXTtcbiAgICB9XG4gICAgaWYgKCFzcCB8fCB0eXBlb2Ygc3AgIT09IFwib2JqZWN0XCIpIHJldHVybiBbXTtcbiAgICByZXR1cm4gT2JqZWN0LmVudHJpZXMoc3ApXG4gICAgICAuZmlsdGVyKChbbW9kZV0pID0+IG1vZGUgIT09IFwiY2FuSG92ZXJcIilcbiAgICAgIC5tYXAoKFttb2RlLCB2XSkgPT4ge1xuICAgICAgICBjb25zdCBuID0gdHlwZW9mIHYgPT09IFwib2JqZWN0XCIgJiYgdiAhPT0gbnVsbCAmJiBcIm51bWJlclwiIGluIHYgPyAodiBhcyBhbnkpLm51bWJlciA6IHY7XG4gICAgICAgIGNvbnN0IGxhYmVsID0gbW9kZSA9PT0gXCJ3YWxrXCIgPyBcIldhbGtcIiA6IGNhcChtb2RlKTtcbiAgICAgICAgcmV0dXJuIGAke2xhYmVsfSAke259IGZ0LmA7XG4gICAgICB9KTtcbiAgfSxcbn0sXG57IGNhbGxTaWduOiBcIkxBTkdVQUdFU1wiLCBqc29uS2V5OiBbXCJsYW5ndWFnZXNcIiwgXCJsYW5ndWFnZVByb2ZpY2llbmNpZXNcIl0sIGNvbnY6IGFyciA9PiB7XG4gICAgICBpZiAoIUFycmF5LmlzQXJyYXkoYXJyKSkgcmV0dXJuIFtdO1xuICAgICAgY29uc3Qgb3V0OiBzdHJpbmdbXSA9IFtdO1xuICAgICAgZm9yIChjb25zdCBscCBvZiBhcnIpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBscCA9PT0gXCJzdHJpbmdcIikgb3V0LnB1c2goY2FwKGxwKSk7XG4gICAgICAgIGVsc2UgaWYgKHR5cGVvZiBscCA9PT0gXCJvYmplY3RcIikge1xuICAgICAgICAgIGZvciAoY29uc3QgW2xhbmcsIHZhbF0gb2YgT2JqZWN0LmVudHJpZXMobHApKSB7XG4gICAgICAgICAgICBpZiAodmFsKSBvdXQucHVzaChjYXAobGFuZykpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIFsuLi5uZXcgU2V0KG91dCldO1xuICB9fSxcbiAgeyBjYWxsU2lnbjogXCJTRU5TRVNcIiwganNvbktleTogXCJzZW5zZXNcIiwgY29udjogc2VuID0+IHtcbiAgICAgIGlmIChBcnJheS5pc0FycmF5KHNlbikpIHJldHVybiBzZW4ubWFwKChzOnN0cmluZyk9PnMucmVwbGFjZSgvXlxcZCtcXHMqLyxcIlwiKS5yZXBsYWNlKC9eLi8sYz0+Yy50b1VwcGVyQ2FzZSgpKSk7XG4gICAgICBpZiAoc2VuICYmIHR5cGVvZiBzZW49PT1cIm9iamVjdFwiKSByZXR1cm4gT2JqZWN0LmVudHJpZXMoc2VuKS5tYXAoKFtrLHZdKT0+YCR7ay5jaGFyQXQoMCkudG9VcHBlckNhc2UoKStrLnNsaWNlKDEpfSAke3Z9YCk7XG4gICAgICByZXR1cm4gW107XG4gIH19LCBcbntcbiAgY2FsbFNpZ246IFwiVFJBSVRTXCIsXG4gIGpzb25LZXk6IFtcImNsYXNzRmVhdHVyZXNcIiwgXCJlbnRyaWVzXCJdLFxuICBjb252OiAocmF3OiBhbnksIGFsbEpzb246IGFueSk6IHN0cmluZ1tdID0+IHtcbiAgICAvLyBEaXNwbGF5L2ZpbGUgbmFtZSB0byB0YXJnZXQgZm9yIHRoZSBmaWxlLWFuY2hvclxuICAgIGNvbnN0IHJlYyA9XG4gICAgICBBcnJheS5pc0FycmF5KGFsbEpzb24uY2xhc3MpID8gYWxsSnNvbi5jbGFzc1swXSA6XG4gICAgICBBcnJheS5pc0FycmF5KGFsbEpzb24ucmFjZSkgID8gYWxsSnNvbi5yYWNlWzBdICA6XG4gICAgICBhbGxKc29uO1xuICAgIGNvbnN0IGZpbGVOYW1lID0gdHlwZW9mIHJlYz8ubmFtZSA9PT0gXCJzdHJpbmdcIlxuICAgICAgPyByZWMubmFtZVxuICAgICAgOiAodHlwZW9mIGFsbEpzb24/Lm5hbWUgPT09IFwic3RyaW5nXCIgPyBhbGxKc29uLm5hbWUgOiBcIlwiKTtcblxuICAgIC8vIE5hbWVzIHRvIG9taXQgYWNyb3NzIHR5cGVzXG4gICAgY29uc3Qgb21pdCA9IG5ldyBTZXQoW1xuICAgICAgLy8gY2xhc3Mtc3BlY2lmaWNcbiAgICAgIFwiQWJpbGl0eSBTY29yZSBJbXByb3ZlbWVudFwiLFxuICAgICAgXCJBcmNoZXR5cGUgRmVhdHVyZVwiLFxuICAgICAgXCJTdWJjbGFzcyBGZWF0dXJlXCIsXG4gICAgICAvLyBzcGVjaWVzLXNwZWNpZmljIGNvbW1vbiBoZWFkaW5nc1xuICAgICAgXCJBZ2VcIixcbiAgICAgIFwiU2l6ZVwiLFxuICAgICAgXCJTcGVlZFwiLFxuICAgICAgXCJMYW5ndWFnZXNcIixcbiAgICAgIC8vIGJhY2tncm91bmRzIG9mdGVuIGhhdmUgZ2VuZXJpYyBzZWN0aW9ucyB0b287IGFkZCBtb3JlIGlmIG5lZWRlZFxuICAgIF0pO1xuXG4gICAgY29uc3Qgc2VlbiA9IG5ldyBTZXQ8c3RyaW5nPigpO1xuXG4gICAgLy8gXHUyNTAwXHUyNTAwIDEpIENsYXNzZXM6IHVzZSBjbGFzc0ZlYXR1cmVzIGlmIGF2YWlsYWJsZSAoZXhpc3RpbmcgYmVoYXZpb3IpXG4gICAgaWYgKEFycmF5LmlzQXJyYXkoYWxsSnNvbi5jbGFzc0ZlYXR1cmVzKSkge1xuICAgICAgY29uc3QgY2xhc3NSZWMgPSBBcnJheS5pc0FycmF5KGFsbEpzb24uY2xhc3MpID8gYWxsSnNvbi5jbGFzc1swXSA6IGFsbEpzb247XG4gICAgICBjb25zdCBjbGFzc05hbWUgPSB0eXBlb2YgY2xhc3NSZWM/Lm5hbWUgPT09IFwic3RyaW5nXCIgPyBjbGFzc1JlYy5uYW1lIDogZmlsZU5hbWU7XG5cbiAgICAgIHJldHVybiBhbGxKc29uLmNsYXNzRmVhdHVyZXMuZmxhdE1hcCgoZmVhdDogYW55KSA9PiB7XG4gICAgICAgIGlmIChmZWF0ICYmIHR5cGVvZiBmZWF0ID09PSBcIm9iamVjdFwiICYmIGZlYXQuZ2FpblN1YmNsYXNzRmVhdHVyZSkgcmV0dXJuIFtdO1xuXG4gICAgICAgIGNvbnN0IHJhd05hbWUgPVxuICAgICAgICAgIHR5cGVvZiBmZWF0ID09PSBcInN0cmluZ1wiICAgICAgICAgICAgICA/IGZlYXQgOlxuICAgICAgICAgIHR5cGVvZiBmZWF0LmNsYXNzRmVhdHVyZSA9PT0gXCJzdHJpbmdcIiA/IGZlYXQuY2xhc3NGZWF0dXJlIDpcbiAgICAgICAgICBcIlwiO1xuXG4gICAgICAgIGNvbnN0IG5hbWUgPSByYXdOYW1lLnNwbGl0KFwifFwiKVswXS50cmltKCk7XG4gICAgICAgIGlmICghbmFtZSB8fCBvbWl0LmhhcyhuYW1lKSB8fCBzZWVuLmhhcyhuYW1lKSkgcmV0dXJuIFtdO1xuICAgICAgICBzZWVuLmFkZChuYW1lKTtcblxuICAgICAgICBjb25zdCBhbmNob3IgPSBuYW1lXG4gICAgICAgICAgLnJlcGxhY2UoL1teXFx3XFxzXS9nLCBcIlwiKVxuICAgICAgICAgIC5yZXBsYWNlKC9cXHMrL2csIFwiIFwiKVxuICAgICAgICAgIC50cmltKClcbiAgICAgICAgICAucmVwbGFjZSgvXFxiXFx3L2csIChjOiBhbnkpID0+IGMudG9VcHBlckNhc2UoKSk7XG5cbiAgICAgICAgcmV0dXJuIGNsYXNzTmFtZSA/IFtgW1ske2NsYXNzTmFtZX0jJHthbmNob3J9fCR7bmFtZX1dXWBdIDogW25hbWVdO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gXHUyNTAwXHUyNTAwIDIpIEJhY2tncm91bmRzIC8gU3BlY2llcyAvIFN1Yi1zcGVjaWVzOiBtaW5lIG5hbWVzIGZyb20gZW50cmllc1tdXG4gICAgY29uc3QgZW50cyA9IEFycmF5LmlzQXJyYXkocmF3KSA/IHJhdyA6IFtdO1xuICAgIGNvbnN0IG5hbWVzOiBzdHJpbmdbXSA9IFtdO1xuXG4gICAgY29uc3QgcHVzaE5hbWUgPSAobjogc3RyaW5nIHwgdW5kZWZpbmVkKSA9PiB7XG4gICAgICBjb25zdCBuYW1lID0gKG4gPz8gXCJcIikucmVwbGFjZSgvXkZlYXR1cmU6XFxzKi8sIFwiXCIpLnRyaW0oKTtcbiAgICAgIGlmICghbmFtZSB8fCBvbWl0LmhhcyhuYW1lKSB8fCBzZWVuLmhhcyhuYW1lKSkgcmV0dXJuO1xuICAgICAgc2Vlbi5hZGQobmFtZSk7XG4gICAgICBuYW1lcy5wdXNoKG5hbWUpO1xuICAgIH07XG5cbiAgICBmb3IgKGNvbnN0IGUgb2YgZW50cykge1xuICAgICAgaWYgKCFlKSBjb250aW51ZTtcbiAgICAgIGlmICh0eXBlb2YgZSA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgZS5uYW1lID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgIHB1c2hOYW1lKGUubmFtZSk7XG4gICAgICB9XG4gICAgICAvLyBuZXN0ZWQgZW50cmllcyBibG9ja3MgY2FuIGFsc28gY2FycnkgbmFtZWQgc2VjdGlvbnNcbiAgICAgIGlmICh0eXBlb2YgZSA9PT0gXCJvYmplY3RcIiAmJiBBcnJheS5pc0FycmF5KGUuZW50cmllcykpIHtcbiAgICAgICAgZm9yIChjb25zdCBzdWIgb2YgZS5lbnRyaWVzKSB7XG4gICAgICAgICAgaWYgKHN1YiAmJiB0eXBlb2Ygc3ViID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiBzdWIubmFtZSA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgcHVzaE5hbWUoc3ViLm5hbWUpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIC8vIElmIHdlIGZvdW5kIG5hbWVzLCBsaW5rIHRoZW0gdG8gdGhlIGN1cnJlbnQgZmlsZVx1MjAxOXMgaGVhZGVyc1xuICAgIGlmIChuYW1lcy5sZW5ndGgpIHtcbiAgICAgIHJldHVybiBuYW1lcy5tYXAobmFtZSA9PiB7XG4gICAgICAgIGNvbnN0IGFuY2hvciA9IG5hbWVcbiAgICAgICAgICAucmVwbGFjZSgvW15cXHdcXHNdL2csIFwiXCIpXG4gICAgICAgICAgLnJlcGxhY2UoL1xccysvZywgXCIgXCIpXG4gICAgICAgICAgLnRyaW0oKVxuICAgICAgICAgIC5yZXBsYWNlKC9cXGJcXHcvZywgKGM6IGFueSkgPT4gYy50b1VwcGVyQ2FzZSgpKTtcbiAgICAgICAgcmV0dXJuIGZpbGVOYW1lID8gYFtbJHtmaWxlTmFtZX0jJHthbmNob3J9fCR7bmFtZX1dXWAgOiBuYW1lO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gXHUyNTAwXHUyNTAwIDMpIEZhbGxiYWNrOiBwcmVzZXJ2ZSBwcmV2aW91cyBub24tbGluayBiZWhhdmlvciB3aGVuIG5vdGhpbmcgbWF0Y2hlZFxuICAgIHJldHVybiBlbnRzXG4gICAgICAuZmlsdGVyKChlOiBhbnkpID0+IGUgJiYgdHlwZW9mIGUubmFtZSA9PT0gXCJzdHJpbmdcIilcbiAgICAgIC5tYXAoKGU6IGFueSkgPT4gZS5uYW1lLnJlcGxhY2UoL15GZWF0dXJlOlxccyovLCBcIlwiKS50cmltKCkpO1xuICB9LFxufSxcblxuXG4gIHsgY2FsbFNpZ246IFwiQUNcIiwganNvbktleTogXCJhY1wiLCBjb252OiBhID0+IEFycmF5LmlzQXJyYXkoYSk/YVswXS5hYzphIH0sXG4gIHsgY2FsbFNpZ246IFwiSFBcIiwganNvbktleTogXCJocFwiLCBjb252OiBocCA9PiBocD8uYXZlcmFnZSA/PyBocCB9LFxuICB7IGNhbGxTaWduOiBcIkNIQUxMRU5HRV9SQVRJTkdcIixqc29uS2V5OiBcImNyXCIsIGNvbnY6IChyYXc6IGFueSkgPT4gKHR5cGVvZiByYXcgPT09IFwib2JqZWN0XCIgJiYgcmF3ICE9PSBudWxsICYmIFwiY3JcIiBpbiByYXcgPyByYXcuY3IgOiByYXcpfSxcbiAgeyBjYWxsU2lnbjogXCJTVFJFTkdUSFwiLCAgICAganNvbktleTogXCJhYmlsaXR5XCIsIGNvbnY6IGFycj0+QXJyYXkuaXNBcnJheShhcnIpP2FyclswXTphcnI/LnN0ciA/PyAwIH0sXG4gIHsgY2FsbFNpZ246IFwiREVYVEVSSVRZXCIsICAgIGpzb25LZXk6IFwiYWJpbGl0eVwiLCBjb252OiBhcnI9PkFycmF5LmlzQXJyYXkoYXJyKT9hcnJbMV06YXJyPy5kZXggPz8gMCB9LFxuICB7IGNhbGxTaWduOiBcIkNPTlNUSVRVVElPTlwiLCBqc29uS2V5OiBcImFiaWxpdHlcIiwgY29udjogYXJyPT5BcnJheS5pc0FycmF5KGFycik/YXJyWzJdOmFycj8uY29uID8/IDAgfSxcbiAgeyBjYWxsU2lnbjogXCJJTlRFTExJR0VOQ0VcIiwganNvbktleTogXCJhYmlsaXR5XCIsIGNvbnY6IGFycj0+QXJyYXkuaXNBcnJheShhcnIpP2FyclszXTphcnI/LmludCA/PyAwIH0sXG4gIHsgY2FsbFNpZ246IFwiV0lTRE9NXCIsICAgICAgIGpzb25LZXk6IFwiYWJpbGl0eVwiLCBjb252OiBhcnI9PkFycmF5LmlzQXJyYXkoYXJyKT9hcnJbNF06YXJyPy53aXMgPz8gMCB9LFxuICB7IGNhbGxTaWduOiBcIkNIQVJJU01BXCIsICAgICBqc29uS2V5OiBcImFiaWxpdHlcIiwgY29udjogYXJyPT5BcnJheS5pc0FycmF5KGFycik/YXJyWzVdOmFycj8uY2hhID8/IDAgfSxcbiAge1xuICAgIGNhbGxTaWduOiBcIkFMSUdOTUVOVFwiLFxuICAgIGpzb25LZXk6IFwiYWxpZ25tZW50XCIsXG4gICAgY29udjogKGE6IGFueSkgPT4ge1xuICAgICAgY29uc3QgcmF3ID0gQXJyYXkuaXNBcnJheShhKSA/IGEuam9pbihcIiBcIikgOiB0eXBlb2YgYSA9PT0gXCJzdHJpbmdcIiA/IGEgOiBTdHJpbmcoYSk7XG4gICAgICBjb25zdCBjbGVhbmVkID0gcmF3XG4gICAgICAgIC5yZXBsYWNlKC9cXGJBXFxiL2csIFwiQW55XCIpXG4gICAgICAgIC5yZXBsYWNlKC9cXGJVXFxiL2csIFwiVW5hbGlnbmVkXCIpXG4gICAgICAgIC5yZXBsYWNlKC9cXGJOXFxiL2csIFwiTmV1dHJhbFwiKVxuICAgICAgICAucmVwbGFjZSgvXFxiTFxcYi9nLCBcIkxhd2Z1bFwiKVxuICAgICAgICAucmVwbGFjZSgvXFxiQ1xcYi9nLCBcIkNoYW90aWNcIilcbiAgICAgICAgLnJlcGxhY2UoL1xcYkdcXGIvZywgXCJHb29kXCIpXG4gICAgICAgIC5yZXBsYWNlKC9cXGJFXFxiL2csIFwiRXZpbFwiKTtcblxuICAgICAgcmV0dXJuIGZvcm1hdEFsaWdubWVudEFiYnJldihjbGVhbmVkKTsgLy8gcmV1c2UgeW91ciBub3JtYWxpemVyIGlmIGl0IGV4aXN0c1xuICAgIH1cbiAgfSxcbiAgICB7XG4gICAgICBjYWxsU2lnbjogXCJUWVBFXCIsXG4gICAgICBqc29uS2V5OiBcInR5cGVcIixcbiAgICAgIGNvbnY6ICh0OiBhbnkpOiBzdHJpbmcgfCB1bmRlZmluZWQgPT4ge1xuICAgICAgICAvLyAxKSBJZiBpdFx1MjAxOXMgYSBzaW1wbGUgc3RyaW5nIGNvZGUsIG1hcCBpdFxuICAgICAgICBpZiAodHlwZW9mIHQgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAvLyBkaXJlY3QgbG9va3VwXHUyMDE0aWYgbm8gbWFwcGluZywganVzdCB0aXRsZVx1MjAxMGNhc2UgdGhlIGNvZGVcbiAgICAgICAgICByZXR1cm4gSVRFTV9UWVBFX01BUFt0XSA/PyBjYXAodCk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyAyKSBJZiBpdFx1MjAxOXMgYW4gb2JqZWN0IHdpdGggYSAudHlwZSB0YWdcbiAgICAgICAgaWYgKHQgJiYgdHlwZW9mIHQgPT09IFwib2JqZWN0XCIpIHtcbiAgICAgICAgICBjb25zdCBjb2RlID0gU3RyaW5nKHQudHlwZSB8fCBcIlwiKS50b1VwcGVyQ2FzZSgpO1xuICAgICAgICAgIC8vIHRyeSB0aGUgbWFwIGZpcnN0XG4gICAgICAgICAgaWYgKElURU1fVFlQRV9NQVBbY29kZV0pIHtcbiAgICAgICAgICAgIHJldHVybiBJVEVNX1RZUEVfTUFQW2NvZGVdO1xuICAgICAgICAgIH1cbiAgICAgICAgICAvLyBvdGhlcndpc2UgZmFsbCBiYWNrIHRvIFx1MjAxQ0Jhc2UgKHRhZ3NcdTIwMjYpXHUyMDFEIHN0eWxlXG4gICAgICAgICAgY29uc3QgYmFzZSA9IHQudHlwZSA/IGNhcCh0LnR5cGUpIDogXCJVbmtub3duXCI7XG4gICAgICAgICAgY29uc3QgdGFncyA9IEFycmF5LmlzQXJyYXkodC50YWdzKSA/IHQudGFncy5tYXAoY2FwKSA6IFtdO1xuICAgICAgICAgIHJldHVybiB0YWdzLmxlbmd0aCA/IGAke2Jhc2V9ICgke3RhZ3Muam9pbihcIiwgXCIpfSlgIDogYmFzZTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICB9XG4gICAgfSxcblxuXG4gIC8vIFx1MjUwMFx1MjUwMFx1MjUwMCBJdGVtcyBcdTI1MDBcdTI1MDBcdTI1MDBcbiAgeyBjYWxsU2lnbjogXCJUWVBFXCIsICAganNvbktleTogXCJfcGFyc2VkVHlwZVwiIH0sXG4gIHsgY2FsbFNpZ246IFwiUkFSSVRZXCIsIGpzb25LZXk6IFwicmFyaXR5XCIsIGNvbnY6IHIgPT4ge1xuICAgICAgY29uc3QgcyA9IFN0cmluZyhyfHxcIlwiKS50b0xvd2VyQ2FzZSgpO1xuICAgICAgcmV0dXJuIHMgJiYgcyE9PVwibm9uZVwiID8gc1swXS50b1VwcGVyQ2FzZSgpK3Muc2xpY2UoMSkgOiB1bmRlZmluZWQ7XG4gIH19LFxuICB7XG4gICAgY2FsbFNpZ246IFwiQ09TVFwiLFxuICAgIGpzb25LZXk6IFwidmFsdWVcIixcbiAgICBjb252OiAocmF3OiBhbnkpID0+IHtcbiAgICAgIGNvbnN0IHMgPSBTdHJpbmcocmF3KS50cmltKCkudG9Mb3dlckNhc2UoKTtcbiAgICAgIGxldCBudW06IG51bWJlcjtcblxuICAgICAgLy8gZXhwbGljaXQgY29wcGVyP1xuICAgICAgaWYgKHMuZW5kc1dpdGgoXCJjcFwiKSkge1xuICAgICAgICBudW0gPSBwYXJzZUZsb2F0KHMpO1xuICAgICAgICAvLyBjb252ZXJ0IHRvIGdwIG9ubHkgaWYgMTAwKyBjcFxuICAgICAgICByZXR1cm4gbnVtID49IDEwMFxuICAgICAgICAgID8gYCR7TWF0aC5yb3VuZCgobnVtLzEwMCkgKiAxMDApLzEwMH1ncGBcbiAgICAgICAgICA6IGAke251bX1jcGA7XG4gICAgICB9XG5cbiAgICAgIC8vIGV4cGxpY2l0IHNpbHZlcj9cbiAgICAgIGlmIChzLmVuZHNXaXRoKFwic3BcIikpIHtcbiAgICAgICAgbnVtID0gcGFyc2VGbG9hdChzKTtcbiAgICAgICAgLy8gY29udmVydCB0byBncCBvbmx5IGlmIDEwKyBzcFxuICAgICAgICByZXR1cm4gbnVtID49IDEwXG4gICAgICAgICAgPyBgJHtNYXRoLnJvdW5kKChudW0vMTApICogMTAwKS8xMDB9Z3BgXG4gICAgICAgICAgOiBgJHtudW19c3BgO1xuICAgICAgfVxuXG4gICAgICAvLyBleHBsaWNpdCBnb2xkP1xuICAgICAgaWYgKHMuZW5kc1dpdGgoXCJncFwiKSkge1xuICAgICAgICBudW0gPSBwYXJzZUZsb2F0KHMpO1xuICAgICAgICByZXR1cm4gYCR7TWF0aC5yb3VuZChudW0gKiAxMDApLzEwMH1ncGA7XG4gICAgICB9XG5cbiAgICAgIC8vIGJhcmUgbnVtYmVyIFx1MjE5MiBhc3N1bWUgY29wcGVyXG4gICAgICBudW0gPSBwYXJzZUZsb2F0KHMpIHx8IDA7XG4gICAgICByZXR1cm4gbnVtID49IDEwMFxuICAgICAgICA/IGAke01hdGgucm91bmQoKG51bS8xMDApICogMTAwKS8xMDB9Z3BgXG4gICAgICAgIDogYCR7bnVtfWNwYDtcbiAgICB9XG4gIH0sXG4gIHsgY2FsbFNpZ246IFwiV0VJR0hUXCIsIGpzb25LZXk6IFwid2VpZ2h0XCIgfSxcbiAgeyBjYWxsU2lnbjogXCJNQUdJQ0FMXCIsIGpzb25LZXk6IFwid29uZHJvdXNcIiwgY29udjogKF93LGFsbCkgPT4gISFhbGwud29uZHJvdXMgfHwgISFhbGwucmVxQXR0dW5lIH0sXG4gIHsgY2FsbFNpZ246IFwiVkFSSUFOVFwiLCBqc29uS2V5OiBcImJvbnVzV2VhcG9uXCIsIGNvbnY6IGIgPT4gdHlwZW9mIGI9PT1cInN0cmluZ1wiICYmIGIuc3RhcnRzV2l0aChcIitcIikgfSxcbiAgeyBjYWxsU2lnbjogXCJQUk9QRVJUSUVTXCIsIGpzb25LZXk6IFwicHJvcGVydHlcIiwgY29udjogYXJyID0+IEFycmF5LmlzQXJyYXkoYXJyKSA/IGFyci5tYXAocCA9PiBQUk9QRVJUWV9NQVBbcF0gfHwgcCkgOiBbXSB9LFxuICB7IGNhbGxTaWduOiBcIkRBTUFHRVwiLCBqc29uS2V5OiBcImRtZzFcIiwgY29udjogKGQsYWxsKSA9PiBkID8gYWxsLmRtZzIgPyBgJHtkfSAvICR7YWxsLmRtZzJ9YCA6IGAke2R9YCA6IHVuZGVmaW5lZCB9LFxuICB7IGNhbGxTaWduOiBcIkRBTUFHRV9UWVBFU1wiLCBqc29uS2V5OiBcImRtZ1R5cGVcIiwgY29udjogZHQgPT4gZHQgPT0gbnVsbCA/IFtdIDogQXJyYXkuaXNBcnJheShkdCkgPyBkdCA6IFtkdF0gfSxcbiAgeyBjYWxsU2lnbjogXCJSQU5HRVwiLCBqc29uS2V5OiBcInJhbmdlXCIgfSxcbiAgeyBjYWxsU2lnbjogXCJSRUxPQURcIiwganNvbktleTogXCJyZWxvYWRcIiB9LFxuICB7IGNhbGxTaWduOiBcIkFNTU9fVFlQRVwiLCBqc29uS2V5OiBcImFtbW9UeXBlXCIsIGNvbnY6ICh2OiBhbnkpID0+IHR5cGVvZiB2ID09PSBcInN0cmluZ1wiID8gdi5zcGxpdChcInxcIilbMF0uY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyB2LnNwbGl0KFwifFwiKVswXS5zbGljZSgxKS50b0xvd2VyQ2FzZSgpIDogXCJcIiB9LFxuICB7IGNhbGxTaWduOiBcIlNURUFMVEhfRElTQURWQU5UQUdFXCIsIGpzb25LZXk6IFwic3RlYWx0aFwiIH0sXG4gIHtcbiAgICBjYWxsU2lnbjogXCJBVFRVTkVNRU5UXCIsXG4gICAganNvbktleTogW1wid29uZHJvdXNcIiwgXCJyZXFBdHR1bmVcIiwgXCJyZXFfYXR0dW5lXCIsIFwicmVxQXR0dW5lVGFnc1wiXSxcbiAgICBjb252OiAoX3JhdywgYWxsSnNvbikgPT4ge1xuICAgICAgY29uc3QgaiA9IGFsbEpzb24gYXMgYW55O1xuICAgICAgY29uc3QgaGFzVGV4dCA9IHR5cGVvZiBqLnJlcUF0dHVuZSA9PT0gXCJzdHJpbmdcIiAmJiBqLnJlcUF0dHVuZS50cmltKCkgIT09IFwiXCI7XG4gICAgICBjb25zdCBoYXNUYWdzID0gQXJyYXkuaXNBcnJheShqLnJlcUF0dHVuZVRhZ3MpICYmIGoucmVxQXR0dW5lVGFncy5sZW5ndGggPiAwO1xuICAgICAgcmV0dXJuIGhhc1RleHQgfHwgaGFzVGFncztcbiAgICB9XG4gIH0sXG4gIHtcbiAgICBjYWxsU2lnbjogXCJBVFRVTkVfUkVRXCIsXG4gICAganNvbktleTogXCJyZXFBdHR1bmVUYWdzXCIsXG4gICAgY29udjogKHRhZ3M6IGFueVtdID0gW10sIF9hbGwpID0+IHtcbiAgICAgIGNvbnN0IG1hcExldHRlcjogUmVjb3JkPHN0cmluZyxzdHJpbmc+ID0ge1xuICAgICAgICBBOiBcIkFueVwiLCBVOiBcIlVuYWxpZ25lZFwiLCBOOiBcIk5ldXRyYWxcIixcbiAgICAgICAgTDogXCJMYXdmdWxcIiwgQzogXCJDaGFvdGljXCIsIEc6IFwiR29vZFwiLCBFOiBcIkV2aWxcIlxuICAgICAgfTtcbiAgICAgIGNvbnN0IHJlcXM6IHN0cmluZ1tdID0gW107XG5cbiAgICAgIGZvciAoY29uc3QgdGFnIG9mIHRhZ3MpIHtcbiAgICAgICAgaWYgKHRhZy5jbGFzcyAmJiBBcnJheS5pc0FycmF5KHRhZy5hbGlnbm1lbnQpKSB7XG4gICAgICAgICAgY29uc3QgY2xzID0gY2FwKHRhZy5jbGFzcyk7XG4gICAgICAgICAgZm9yIChjb25zdCBjb2RlIG9mIHRhZy5hbGlnbm1lbnQpIHtcbiAgICAgICAgICAgIHJlcXMucHVzaChgJHttYXBMZXR0ZXJbY29kZV0gfHwgY29kZX0gJHtjbHN9YCk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKHRhZy5jbGFzcykge1xuICAgICAgICAgIHJlcXMucHVzaChjYXAodGFnLmNsYXNzKSk7XG4gICAgICAgIH0gZWxzZSBpZiAoQXJyYXkuaXNBcnJheSh0YWcuYWxpZ25tZW50KSkge1xuICAgICAgICAgIGZvciAoY29uc3QgY29kZSBvZiB0YWcuYWxpZ25tZW50KSB7XG4gICAgICAgICAgICByZXFzLnB1c2gobWFwTGV0dGVyW2NvZGVdIHx8IGNvZGUpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmICh0YWcuYmFja2dyb3VuZCkge1xuICAgICAgICAgIGNvbnN0IFtiZ10gPSBTdHJpbmcodGFnLmJhY2tncm91bmQpLnNwbGl0KFwifFwiKTtcbiAgICAgICAgICByZXFzLnB1c2goYmcuc3BsaXQoXCIgXCIpLm1hcChjYXApLmpvaW4oXCIgXCIpKTtcbiAgICAgICAgfSBlbHNlIGlmICh0YWcuc3BlbGxjYXN0aW5nKSB7XG4gICAgICAgICAgcmVxcy5wdXNoKFwiU3BlbGxjYXN0ZXJcIik7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiBBcnJheS5mcm9tKG5ldyBTZXQocmVxcykpO1xuICAgIH1cbiAgfSxcbiAge1xuICAgIGNhbGxTaWduOiBcIlZFUk1VTlwiLFxuICAgIGpzb25LZXk6IFwid29uZHJvdXNcIiwgICAgICAgICAgICAvLyBvciB3aGF0ZXZlciBwcm9wZXJ0eSB5b3UgdXNlIHRvIGRldGVjdCBcdTIwMUNtYWdpY2FsXHUyMDFEXG4gICAgY29udjogKF9yYXcsIGFsbCkgPT4gISFhbGwud29uZHJvdXMgfHwgISFhbGwucmVxQXR0dW5lXG4gIH0sICAgICAgICAgIFxuICAvLyBcdTI1MDBcdTI1MDBcdTI1MDAgT3RoZXIgXHUyNTAwXHUyNTAwXHUyNTAwXG4gIHsgY2FsbFNpZ246IFwiREFNQUdFX1JFU1wiLCBqc29uS2V5OiBcInJlc2lzdFwiLCBjb252OiB2ID0+IEFycmF5LmlzQXJyYXkodikgPyB2Lm1hcChjYXApIDogW10gfSxcbiAgeyBjYWxsU2lnbjogXCJSVUxFU0VUXCIsIGpzb25LZXk6IFwiX2VkaXRpb25JZFwiIH0sXG4gIFxuICAgIC8vIFx1MjUwMFx1MjUwMFx1MjUwMCBBYmlsaXR5XHUyMDEwc2NvcmUgbW9kaWZpZXJzIChvbmx5IGVtaXQgd2hlbiBub256ZXJvKSBcdTI1MDBcdTI1MDBcdTI1MDBcbiAge1xuICAgIGNhbGxTaWduOiBcIlNUUl9NT0RcIixcbiAgICBqc29uS2V5OiAgXCJhYmlsaXR5XCIsXG4gICAgY29udjogKGFycjogYW55KTogbnVtYmVyIHwgdW5kZWZpbmVkID0+IHtcbiAgICAgIGNvbnN0IHYgPSBBcnJheS5pc0FycmF5KGFycikgPyAoYXJyWzBdLnN0ciA/PyAwKSA6IChhcnIuc3RyID8/IDApO1xuICAgICAgcmV0dXJuIHYgIT09IDAgPyB2IDogdW5kZWZpbmVkO1xuICAgIH0sXG4gIH0sXG4gIHtcbiAgICBjYWxsU2lnbjogXCJERVhfTU9EXCIsXG4gICAganNvbktleTogIFwiYWJpbGl0eVwiLFxuICAgIGNvbnY6IChhcnI6IGFueSk6IG51bWJlciB8IHVuZGVmaW5lZCA9PiB7XG4gICAgICBjb25zdCB2ID0gQXJyYXkuaXNBcnJheShhcnIpID8gKGFyclswXS5kZXggPz8gMCkgOiAoYXJyLmRleCA/PyAwKTtcbiAgICAgIHJldHVybiB2ICE9PSAwID8gdiA6IHVuZGVmaW5lZDtcbiAgICB9LFxuICB9LFxuICB7XG4gICAgY2FsbFNpZ246IFwiQ09OX01PRFwiLFxuICAgIGpzb25LZXk6ICBcImFiaWxpdHlcIixcbiAgICBjb252OiAoYXJyOiBhbnkpOiBudW1iZXIgfCB1bmRlZmluZWQgPT4ge1xuICAgICAgY29uc3QgdiA9IEFycmF5LmlzQXJyYXkoYXJyKSA/IChhcnJbMF0uY29uID8/IDApIDogKGFyci5jb24gPz8gMCk7XG4gICAgICByZXR1cm4gdiAhPT0gMCA/IHYgOiB1bmRlZmluZWQ7XG4gICAgfSxcbiAgfSxcbiAge1xuICAgIGNhbGxTaWduOiBcIklOVF9NT0RcIixcbiAgICBqc29uS2V5OiAgXCJhYmlsaXR5XCIsXG4gICAgY29udjogKGFycjogYW55KTogbnVtYmVyIHwgdW5kZWZpbmVkID0+IHtcbiAgICAgIGNvbnN0IHYgPSBBcnJheS5pc0FycmF5KGFycikgPyAoYXJyWzBdLmludCA/PyAwKSA6IChhcnIuaW50ID8/IDApO1xuICAgICAgcmV0dXJuIHYgIT09IDAgPyB2IDogdW5kZWZpbmVkO1xuICAgIH0sXG4gIH0sXG4gIHtcbiAgICBjYWxsU2lnbjogXCJXSVNfTU9EXCIsXG4gICAganNvbktleTogIFwiYWJpbGl0eVwiLFxuICAgIGNvbnY6IChhcnI6IGFueSk6IG51bWJlciB8IHVuZGVmaW5lZCA9PiB7XG4gICAgICBjb25zdCB2ID0gQXJyYXkuaXNBcnJheShhcnIpID8gKGFyclswXS53aXMgPz8gMCkgOiAoYXJyLndpcyA/PyAwKTtcbiAgICAgIHJldHVybiB2ICE9PSAwID8gdiA6IHVuZGVmaW5lZDtcbiAgICB9LFxuICB9LFxuICB7XG4gICAgY2FsbFNpZ246IFwiQ0hBX01PRFwiLFxuICAgIGpzb25LZXk6ICBcImFiaWxpdHlcIixcbiAgICBjb252OiAoYXJyOiBhbnkpOiBudW1iZXIgfCB1bmRlZmluZWQgPT4ge1xuICAgICAgY29uc3QgdiA9IEFycmF5LmlzQXJyYXkoYXJyKSA/IChhcnJbMF0uY2hhID8/IDApIDogKGFyci5jaGEgPz8gMCk7XG4gICAgICByZXR1cm4gdiAhPT0gMCA/IHYgOiB1bmRlZmluZWQ7XG4gICAgfSxcbiAgfSxcblxuXG5dO1xuXG5cbi8vIFx1MjUwMFx1MjUwMFx1MjUwMCBHZW5lcmljIGJ1aWxkZXIgXHUyNTAwXHUyNTAwXHUyNTAwXG5leHBvcnQgZnVuY3Rpb24gYnVpbGRGTShqc29uOiBhbnksIGRlZnM6IEZpZWxkRGVmW10pOiBGcm9udG1hdHRlciB7XG4gIGNvbnN0IGZtOiBGcm9udG1hdHRlciA9IHt9O1xuICBmb3IgKGNvbnN0IHsgY2FsbFNpZ24sIGpzb25LZXksIGNvbnYgfSBvZiBkZWZzKSB7XG4gICAgY29uc3Qga2V5cyA9IEFycmF5LmlzQXJyYXkoanNvbktleSkgPyBqc29uS2V5IDogW2pzb25LZXldO1xuICAgIGxldCByYXc6IGFueSA9IHVuZGVmaW5lZDtcblxuICAgIGZvciAoY29uc3Qga2V5IG9mIGtleXMpIHtcbiAgICAgIGlmIChqc29uW2tleV0gIT0gbnVsbCkge1xuICAgICAgICByYXcgPSBqc29uW2tleV07XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChyYXcgPT0gbnVsbCkgY29udGludWU7XG4gICAgY29uc3QgdmFsID0gY29udiA/IGNvbnYocmF3LCBqc29uKSA6IHJhdztcbiAgICBmbVtGTV9GSUVMRFNbY2FsbFNpZ25dXSA9IHZhbDtcbiAgfVxuICByZXR1cm4gZm07XG59XG5cblxuXG4vLyBmcm9udG1hdHRlci50c1xuXG5leHBvcnQgZnVuY3Rpb24gc2VyaWFsaXplRnJvbnRtYXR0ZXIoXG4gIGZtOiBGcm9udG1hdHRlcixcbiAgZGVmcz86IEZpZWxkRGVmW11cbik6IHN0cmluZyB7XG4gIGNvbnN0IGZpbHRlcmVkOiBSZWNvcmQ8c3RyaW5nLCBhbnk+ID0ge307XG5cbiAgLy8gZGV0ZWN0IGlmIHdlIGhhdmUgYW55IGFjdHVhbCBjaG9pY2UtbGlzdHNcbiAgY29uc3QgaGFzU2tpbGxDaG9pY2UgPSBBcnJheS5pc0FycmF5KGZtW0ZNX0ZJRUxEUy5TS0lMTF9DSE9JQ0VfTElTVF0pIFxuICAgICYmIChmbVtGTV9GSUVMRFMuU0tJTExfQ0hPSUNFX0xJU1RdIGFzIGFueVtdKS5sZW5ndGggPiAwO1xuICBjb25zdCBoYXNUb29sQ2hvaWNlID0gQXJyYXkuaXNBcnJheShmbVtGTV9GSUVMRFMuVE9PTF9DSE9JQ0VfTElTVF0pIFxuICAgICYmIChmbVtGTV9GSUVMRFMuVE9PTF9DSE9JQ0VfTElTVF0gYXMgYW55W10pLmxlbmd0aCA+IDA7XG5cblxuICBmb3IgKGNvbnN0IFtrLCB2XSBvZiBPYmplY3QuZW50cmllcyhmbSkpIHtcbiAgICAvLyAxKSBuZXZlciBlbWl0IHVuZGVmaW5lZFxuICAgIGlmICh2ID09PSB1bmRlZmluZWQpIGNvbnRpbnVlO1xuICAgIC8vIDIpIGRyb3AgZW1wdHkgQ09NUE9ORU5UUywgVE9PTF9DSE9JQ0VfTElTVCwgU0tJTExfQ0hPSUNFX0xJU1RcbiAgICBpZiAoayA9PT0gRk1fRklFTERTLkNPTVBPTkVOVFMgJiYgQXJyYXkuaXNBcnJheSh2KSAmJiB2Lmxlbmd0aCA9PT0gMCkgY29udGludWU7XG4gICAgaWYgKFxuICAgICAgKGsgPT09IEZNX0ZJRUxEUy5UT09MX0NIT0lDRV9MSVNUIHx8IGsgPT09IEZNX0ZJRUxEUy5TS0lMTF9DSE9JQ0VfTElTVCkgJiZcbiAgICAgIEFycmF5LmlzQXJyYXkodikgJiYgdi5sZW5ndGggPT09IDBcbiAgICApIGNvbnRpbnVlO1xuXG4gICAgZmlsdGVyZWRba10gPSB2O1xuICB9XG5cbiAgLy8gYnVpbGQgdGhlIGxpc3Qgb2Yga2V5cyBpbiB0aGUgZXhhY3Qgb3JkZXIgZnJvbSBkZWZzXG4gIGxldCBrZXlzVG9FbWl0OiBzdHJpbmdbXTtcbiAgaWYgKGRlZnMpIHtcbiAgICAvLyBtYXAgZWFjaCBGaWVsZERlZiB0byBpdHMgZnJvbnRtYXR0ZXIga2V5XG4gICAgY29uc3Qgd2FudGVkID0gZGVmcy5tYXAoZCA9PiBGTV9GSUVMRFNbZC5jYWxsU2lnbl0pO1xuICAgIC8vIG9ubHkga2VlcCB0aGUgb25lcyB3ZSBhY3R1YWxseSBoYXZlLCBpbiBvcmRlclxuICAgIGtleXNUb0VtaXQgPSB3YW50ZWQuZmlsdGVyKGsgPT4gayBpbiBmaWx0ZXJlZCk7XG4gICAgLy8gdGhlbiBhcHBlbmQgYW55IGV4dHJhIGtleXMgdGhhdCB3ZXJlbid0IGluIGRlZnNcbiAgICBrZXlzVG9FbWl0LnB1c2goXG4gICAgICAuLi5PYmplY3Qua2V5cyhmaWx0ZXJlZCkuZmlsdGVyKGsgPT4gIWtleXNUb0VtaXQuaW5jbHVkZXMoaykpXG4gICAgKTtcbiAgfSBlbHNlIHtcbiAgICBrZXlzVG9FbWl0ID0gT2JqZWN0LmtleXMoZmlsdGVyZWQpO1xuICB9XG5cbiAgLy8gbm93IGVtaXQgWUFNTCBpbiB0aGF0IG9yZGVyXG4gIHJldHVybiBrZXlzVG9FbWl0XG4gICAgLm1hcChrID0+IHtcbiAgICAgIGNvbnN0IHYgPSBmaWx0ZXJlZFtrXTtcbiAgICAgIGlmIChBcnJheS5pc0FycmF5KHYpKSB7XG4gICAgICAgIC8vIEpTT04uc3RyaW5naWZ5IHRvIGhhbmRsZSBzcGFjZXMsIGNvbW1hcywgZXRjLlxuICAgICAgICBjb25zdCBpbmxpbmUgPSB2Lm1hcChpdGVtID0+IEpTT04uc3RyaW5naWZ5KGl0ZW0pKS5qb2luKFwiLCBcIik7XG4gICAgICAgIHJldHVybiBgJHtrfTogWyR7aW5saW5lfV1gO1xuICAgICAgfVxuICAgICAgaWYgKHR5cGVvZiB2ID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgIHJldHVybiBgJHtrfTogXCIke3Z9XCJgO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGAke2t9OiAke3Z9YDtcbiAgICB9KVxuICAgIC5qb2luKFwiXFxuXCIpO1xufVxuXG5cbi8vIFx1MjUwMFx1MjUwMFx1MjUwMCBTa2lsbCBoZWxwZXJzIFx1MjUwMFx1MjUwMFx1MjUwMFxuZXhwb3J0IGNvbnN0IFNLSUxMX09QVElPTlMgPSBbXG4gIFwiQWNyb2JhdGljc1wiLFwiQW5pbWFsIEhhbmRsaW5nXCIsXCJBcmNhbmFcIixcIkF0aGxldGljc1wiLFwiRGVjZXB0aW9uXCIsXCJIaXN0b3J5XCIsXG4gIFwiSW5zaWdodFwiLFwiSW50aW1pZGF0aW9uXCIsXCJJbnZlc3RpZ2F0aW9uXCIsXCJNZWRpY2luZVwiLFwiTmF0dXJlXCIsXCJQZXJjZXB0aW9uXCIsXG4gIFwiUGVyZm9ybWFuY2VcIixcIlBlcnN1YXNpb25cIixcIlJlbGlnaW9uXCIsXCJTbGVpZ2h0IG9mIEhhbmRcIixcIlN0ZWFsdGhcIixcIlN1cnZpdmFsXCIsXG5dIGFzIGNvbnN0O1xuZXhwb3J0IHR5cGUgU2tpbGxPcHRpb24gPSB0eXBlb2YgU0tJTExfT1BUSU9OU1tudW1iZXJdO1xuZXhwb3J0IGZ1bmN0aW9uIG5vcm1hbGl6ZVNraWxsKHJhdzogc3RyaW5nKTogU2tpbGxPcHRpb24gfCBudWxsIHtcbiAgY29uc3QgbG93ZXIgPSByYXcudHJpbSgpLnRvTG93ZXJDYXNlKCk7XG4gIHJldHVybiBTS0lMTF9PUFRJT05TLmZpbmQoc2tpbGwgPT4gc2tpbGwudG9Mb3dlckNhc2UoKSA9PT0gbG93ZXIpID8/IG51bGw7XG59XG5leHBvcnQgZnVuY3Rpb24gZmlsdGVyVmFsaWRTa2lsbHMocmF3QXJyOiBhbnlbXSk6IFNraWxsT3B0aW9uW10ge1xuICBpZiAoIUFycmF5LmlzQXJyYXkocmF3QXJyKSkgcmV0dXJuIFtdO1xuICBjb25zdCBzZWVuID0gbmV3IFNldDxTa2lsbE9wdGlvbj4oKTtcbiAgZm9yIChjb25zdCBlbnQgb2YgcmF3QXJyKSB7XG4gICAgbGV0IGNhbmRpZGF0ZTogc3RyaW5nIHwgdW5kZWZpbmVkO1xuICAgIGlmICh0eXBlb2YgZW50ID09PSBcInN0cmluZ1wiKSBjYW5kaWRhdGUgPSBlbnQ7XG4gICAgZWxzZSBpZiAoZW50Lm5hbWUgJiYgdHlwZW9mIGVudC5uYW1lID09PSBcInN0cmluZ1wiKSBjYW5kaWRhdGUgPSBlbnQubmFtZTtcbiAgICBpZiAoY2FuZGlkYXRlKSB7XG4gICAgICBjb25zdCBub3JtID0gbm9ybWFsaXplU2tpbGwoY2FuZGlkYXRlKTtcbiAgICAgIGlmIChub3JtKSBzZWVuLmFkZChub3JtKTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIFsuLi5zZWVuXTtcbn1cblxuLy8gXHUyNTAwXHUyNTAwXHUyNTAwIFdoaWNoIEZNX0tFWVMgZWFjaCBwYXJzZXIgc2hvdWxkIGluY2x1ZGUgXHUyNTAwXHUyNTAwXHUyNTAwXG5leHBvcnQgY29uc3QgU1BFTExfS0VZUzogRk1LZXlbXSA9IFtcbiAgXCJOQU1FXCIsXG4gIFwiTEVWRUxcIixcbiAgXCJTQ0hPT0xcIixcbiAgXCJDQVNUSU5HX1RJTUVcIixcbiAgXCJTUEVMTF9SQU5HRVwiLFxuICBcIlNBVklOR19USFJPV1NcIixcbiAgXCJEQU1BR0VfVFlQRVwiLFxuICBcIkRVUkFUSU9OXCIsXG4gIFwiVkVSQkFMXCIsXG4gIFwiU09NQVRJQ1wiLFxuICBcIk1BVEVSSUFMXCIsXG4gIFwiQ09NUE9ORU5UU1wiLFxuICBcIkNPTkNFTlRSQVRJT05cIixcbiAgXCJTT1VSQ0VcIixcbiAgXCJSVUxFU0VUXCJcbl07XG5cbmV4cG9ydCBjb25zdCBTUEVDSUVTX0tFWVM6IEZNS2V5W10gPSBbXG4gIFwiU1BFQ0lFU1wiLFxuICBcIlNJWkVcIixcbiAgXCJTUEVFRFwiLFxuICBcIkxBTkdVQUdFU1wiLFxuICBcIlRSQUlUU1wiLFxuICBcIlNLSUxMU1wiLFxuICBcIlNUUl9NT0RcIixcbiAgXCJERVhfTU9EXCIsXG4gIFwiQ09OX01PRFwiLFxuICBcIklOVF9NT0RcIixcbiAgXCJXSVNfTU9EXCIsXG4gIFwiQ0hBX01PRFwiLFxuICBcIlNLSUxMX0NIT0lDRV9MSVNUXCIsXG4gIFwiVE9PTF9QUk9GSUNJRU5DSUVTXCIsXG4gIFwiVE9PTF9DSE9JQ0VfTElTVFwiLFxuICBcIldFQVBPTl9QUk9GSUNJRU5DSUVTXCIsXG4gIFwiU0VOU0VTXCIsXG4gIFwiREFNQUdFX1JFU1wiLFxuICBcIlNPVVJDRVwiLFxuICBcIlJVTEVTRVRcIlxuXTtcblxuZXhwb3J0IGNvbnN0IElURU1fS0VZUzogRk1LZXlbXSA9IFtcbiAgXCJOQU1FXCIsXG4gIFwiVFlQRVwiLFxuICBcIlJBUklUWVwiLFxuICBcIkNPU1RcIixcbiAgXCJXRUlHSFRcIixcbiAgXCJQUk9QRVJUSUVTXCIsXG4gIFwiREFNQUdFXCIsXG4gIFwiREFNQUdFX1RZUEVTXCIsXG4gIFwiUkFOR0VcIixcbiAgXCJSRUxPQURcIixcbiAgXCJBTU1PX1RZUEVcIixcbiAgXCJBQ1wiLFxuICBcIlNURUFMVEhfRElTQURWQU5UQUdFXCIsXG4gIFwiTUFHSUNBTFwiLFxuICBcIkFUVFVORU1FTlRcIixcbiAgXCJBVFRVTkVfUkVRXCIsXG4gIFwiVkVSTVVOXCIsXG4gIFwiU09VUkNFXCIsXG4gIFwiUlVMRVNFVFwiXG5dO1xuXG5leHBvcnQgY29uc3QgQkVTVElBUllfS0VZUzogRk1LZXlbXSA9IFtcbiAgXCJOQU1FXCIsXG4gIFwiU0laRVwiLFxuICBcIlRZUEVcIixcbiAgXCJBTElHTk1FTlRcIixcbiAgXCJBQ1wiLFxuICBcIkhQXCIsXG4gIFwiU1BFRURcIixcbiAgXCJTVFJFTkdUSFwiLFxuICBcIkRFWFRFUklUWVwiLFxuICBcIkNPTlNUSVRVVElPTlwiLFxuICBcIklOVEVMTElHRU5DRVwiLFxuICBcIldJU0RPTVwiLFxuICBcIkNIQVJJU01BXCIsXG4gIFwiU0FWSU5HX1RIUk9XU1wiLFxuICBcIlNLSUxMU1wiLFxuICBcIlNFTlNFU1wiLFxuICBcIkxBTkdVQUdFU1wiLFxuICBcIkNIQUxMRU5HRV9SQVRJTkdcIixcbiAgXCJTT1VSQ0VcIixcbiAgXCJSVUxFU0VUXCJcbl07XG5cbmV4cG9ydCBjb25zdCBDTEFTU19LRVlTOiBGTUtleVtdID0gW1xuICBcIk5BTUVcIixcbiAgXCJTUEVMTF9DQVNUX01PRFwiLFxuICBcIkFSTU9SX1BST0ZJQ0lFTkNJRVNcIixcbiAgXCJXRUFQT05fUFJPRklDSUVOQ0lFU1wiLFxuICBcIlRPT0xfUFJPRklDSUVOQ0lFU1wiLFxuICBcIlRPT0xfQ0hPSUNFX0xJU1RcIixcbiAgXCJTQVZJTkdfVEhST1dTXCIsXG4gIFwiU0tJTExTXCIsXG4gIFwiU0tJTExfQ0hPSUNFX0xJU1RcIixcbiAgXCJUUkFJVFNcIixcbiAgXCJTT1VSQ0VcIixcbiAgXCJSVUxFU0VUXCJcbl07XG5cbmV4cG9ydCBjb25zdCBCQUNLR1JPVU5EX0tFWVM6IEZNS2V5W10gPSBbXG4gIFwiTkFNRVwiLFxuICBcIlNLSUxMU1wiLFxuICBcIlNLSUxMX0NIT0lDRV9MSVNUXCIsICBcbiAgXCJUT09MX1BST0ZJQ0lFTkNJRVNcIixcbiAgXCJUT09MX0NIT0lDRV9MSVNUXCIsXG4gIFwiVFJBSVRTXCIsXG4gIFwiU09VUkNFXCIsXG4gIFwiUlVMRVNFVFwiXG5dO1xuXG5leHBvcnQgY29uc3QgRkVBVFNfS0VZUzogRk1LZXlbXSA9IFtcbiAgXCJTT1VSQ0VcIixcbiAgXCJSVUxFU0VUXCJcbl07XG5cbi8vIFx1MjUwMFx1MjUwMFx1MjUwMCBGaWVsZCBzdWJzZXRzIGZvciBlYWNoIHBhcnNlciBcdTI1MDBcdTI1MDBcdTI1MDBcbmV4cG9ydCBjb25zdCBTUEVMTF9NRVRBX0RFRlM6IEZpZWxkRGVmW10gPSBTUEVMTF9LRVlTLm1hcChrZXkgPT4ge1xuICBjb25zdCBkZWYgPSBBTExfRklFTERfREVGUy5maW5kKGQgPT4gZC5jYWxsU2lnbiA9PT0ga2V5KTtcbiAgaWYgKCFkZWYpIHRocm93IG5ldyBFcnJvcihgTWlzc2luZyBGaWVsZERlZiBmb3IgU1BFTExfS0VZICR7a2V5fWApO1xuICByZXR1cm4gZGVmO1xufSk7XG5leHBvcnQgY29uc3QgU1BFQ0lFU19NRVRBX0RFRlM6IEZpZWxkRGVmW10gPSBTUEVDSUVTX0tFWVMubWFwKGtleSA9PiB7XG4gIGNvbnN0IGRlZiA9IEFMTF9GSUVMRF9ERUZTLmZpbmQoZCA9PiBkLmNhbGxTaWduID09PSBrZXkpO1xuICBpZiAoIWRlZikgdGhyb3cgbmV3IEVycm9yKGBNaXNzaW5nIEZpZWxkRGVmIGZvciBTUEVDSUVTX0tFWSAke2tleX1gKTtcbiAgcmV0dXJuIGRlZjtcbn0pO1xuZXhwb3J0IGNvbnN0IElURU1fTUVUQV9ERUZTOiBGaWVsZERlZltdID0gSVRFTV9LRVlTLm1hcChrZXkgPT4ge1xuICBjb25zdCBkZWYgPSBBTExfRklFTERfREVGUy5maW5kKGQgPT4gZC5jYWxsU2lnbiA9PT0ga2V5KTtcbiAgaWYgKCFkZWYpIHRocm93IG5ldyBFcnJvcihgTWlzc2luZyBGaWVsZERlZiBmb3IgSVRFTV9LRVkgJHtrZXl9YCk7XG4gIHJldHVybiBkZWY7XG59KTtcbmV4cG9ydCBjb25zdCBCRVNUSUFSWV9NRVRBX0RFRlM6IEZpZWxkRGVmW10gPSBCRVNUSUFSWV9LRVlTLm1hcChrZXkgPT4ge1xuICBjb25zdCBkZWYgPSBBTExfRklFTERfREVGUy5maW5kKGQgPT4gZC5jYWxsU2lnbiA9PT0ga2V5KTtcbiAgaWYgKCFkZWYpIHRocm93IG5ldyBFcnJvcihgTWlzc2luZyBGaWVsZERlZiBmb3IgQkVTVElBUllfS0VZICR7a2V5fWApO1xuICByZXR1cm4gZGVmO1xufSk7XG5leHBvcnQgY29uc3QgQ0xBU1NfTUVUQV9ERUZTOiBGaWVsZERlZltdID0gQ0xBU1NfS0VZUy5tYXAoa2V5ID0+IHtcbiAgY29uc3QgZGVmID0gQUxMX0ZJRUxEX0RFRlMuZmluZChkID0+IGQuY2FsbFNpZ24gPT09IGtleSk7XG4gIGlmICghZGVmKSB0aHJvdyBuZXcgRXJyb3IoYE1pc3NpbmcgRmllbGREZWYgZm9yIENMQVNTX0tFWSAke2tleX1gKTtcbiAgcmV0dXJuIGRlZjtcbn0pO1xuZXhwb3J0IGNvbnN0IEJBQ0tHUk9VTkRfTUVUQV9ERUZTOiBGaWVsZERlZltdID0gQkFDS0dST1VORF9LRVlTLm1hcChrZXkgPT4ge1xuICBjb25zdCBkZWYgPSBBTExfRklFTERfREVGUy5maW5kKGQgPT4gZC5jYWxsU2lnbiA9PT0ga2V5KTtcbiAgaWYgKCFkZWYpIHRocm93IG5ldyBFcnJvcihgTWlzc2luZyBGaWVsZERlZiBmb3IgQkFDS0dST1VORF9LRVkgJHtrZXl9YCk7XG4gIHJldHVybiBkZWY7XG59KTtcbmV4cG9ydCBjb25zdCBGRUFUU19NRVRBX0RFRlM6IEZpZWxkRGVmW10gPSBGRUFUU19LRVlTLm1hcChrZXkgPT4ge1xuICBjb25zdCBkZWYgPSBBTExfRklFTERfREVGUy5maW5kKGQgPT4gZC5jYWxsU2lnbiA9PT0ga2V5KTtcbiAgaWYgKCFkZWYpIHRocm93IG5ldyBFcnJvcihgTWlzc2luZyBGaWVsZERlZiBmb3IgQkFDS0dST1VORF9LRVkgJHtrZXl9YCk7XG4gIHJldHVybiBkZWY7XG59KTsiLCAiLy9kbmQgNWUgMjAxNCBlZCBzcGVsbHNcblxuaW1wb3J0IHR5cGUgeyBQYXJzZWRNYXJrZG93bkZpbGUgfSBmcm9tIFwic3JjL3R5cGVzXCI7XG5pbXBvcnQgeyByZXBsYWNlNWVUYWdzIH0gZnJvbSBcIi4vaGVscGVycy90YWdSZXBsYWNlclwiO1xuaW1wb3J0IHsgZ2V0RnVsbFNvdXJjZU5hbWUgfSBmcm9tIFwiLi9oZWxwZXJzL3NvdXJjZU1hcFwiO1xuaW1wb3J0IHsgcmVuZGVyTWFya2Rvd25UYWJsZSB9IGZyb20gXCIuL2hlbHBlcnMvbWFya2Rvd25UYWJsZVwiO1xuaW1wb3J0IHsgZm9ybWF0RW50cnkgfSBmcm9tIFwiLi9oZWxwZXJzL2Zvcm1hdEVudHJ5XCI7XG5pbXBvcnQgeyBidWlsZEZNLCBzZXJpYWxpemVGcm9udG1hdHRlciwgU1BFTExfTUVUQV9ERUZTLCBGTV9GSUVMRFMgfSBmcm9tIFwiLi9oZWxwZXJzL2Zyb250bWF0dGVyXCI7XG5cblxuZXhwb3J0IGNvbnN0IFNDSE9PTF9NQVA6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4gPSB7XG4gIEE6IFwiQWJqdXJhdGlvblwiLFxuICBDOiBcIkNvbmp1cmF0aW9uXCIsXG4gIEQ6IFwiRGl2aW5hdGlvblwiLFxuICBFOiBcIkVuY2hhbnRtZW50XCIsXG4gIFY6IFwiRXZvY2F0aW9uXCIsXG4gIEk6IFwiSWxsdXNpb25cIixcbiAgTjogXCJOZWNyb21hbmN5XCIsXG4gIFQ6IFwiVHJhbnNtdXRhdGlvblwiLFxufTtcblxuZnVuY3Rpb24gb3JkaW5hbChuOiBudW1iZXIpOiBzdHJpbmcge1xuICBjb25zdCBzdWZmaXggPSAobiA9PT0gMSkgPyBcInN0XCIgOiAobiA9PT0gMikgPyBcIm5kXCIgOiAobiA9PT0gMykgPyBcInJkXCIgOiBcInRoXCI7XG4gIHJldHVybiBgJHtufSR7c3VmZml4fWA7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBmb3JtYXRSYW5nZShyYW5nZTogYW55KTogc3RyaW5nIHtcbiAgaWYgKCFyYW5nZSkgcmV0dXJuIFwiXCI7XG5cbiAgaWYgKHR5cGVvZiByYW5nZSA9PT0gXCJzdHJpbmdcIikgcmV0dXJuIHJhbmdlO1xuXG4gIGlmIChyYW5nZS50eXBlID09PSBcInNwZWNpYWxcIikgcmV0dXJuIFwiU3BlY2lhbFwiO1xuICBpZiAocmFuZ2UudHlwZSA9PT0gXCJwb2ludFwiICYmIHJhbmdlLmRpc3RhbmNlKSB7XG4gICAgY29uc3QgZGlzdCA9IHJhbmdlLmRpc3RhbmNlO1xuICAgIGlmIChkaXN0LnR5cGUgPT09IFwidG91Y2hcIikgcmV0dXJuIFwiVG91Y2hcIjtcbiAgICBpZiAoZGlzdC50eXBlID09PSBcInNlbGZcIikgcmV0dXJuIFwiU2VsZlwiO1xuICAgIGlmIChkaXN0LnR5cGUgPT09IFwic2lnaHRcIikgcmV0dXJuIFwiU2lnaHRcIjtcbiAgICBpZiAoZGlzdC5hbW91bnQpIHJldHVybiBgJHtkaXN0LmFtb3VudH0gJHtkaXN0LnR5cGV9YDtcbiAgfVxuXG4gIHJldHVybiBcIlZhcmllc1wiO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZm9ybWF0VGltZSh0aW1lOiBhbnlbXSk6IHN0cmluZyB7XG4gIGlmICghQXJyYXkuaXNBcnJheSh0aW1lKSkgcmV0dXJuIFwiXCI7XG5cbiAgcmV0dXJuIHRpbWUubWFwKHQgPT4gYCR7dC5udW1iZXJ9ICR7dC51bml0fWApLmpvaW4oXCIsIFwiKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGZvcm1hdER1cmF0aW9uKGR1cmF0aW9uOiBhbnlbXSk6IHN0cmluZyB7XG4gIGlmICghQXJyYXkuaXNBcnJheShkdXJhdGlvbikpIHJldHVybiBcIlwiO1xuXG4gIHJldHVybiBkdXJhdGlvbi5tYXAoZCA9PiB7XG4gICAgaWYgKGQudHlwZSA9PT0gXCJpbnN0YW50XCIpIHJldHVybiBcIkluc3RhbnRhbmVvdXNcIjtcbiAgICBpZiAoZC50eXBlID09PSBcInRpbWVkXCIgJiYgZC5kdXJhdGlvbikge1xuICAgICAgcmV0dXJuIGAke2QuZHVyYXRpb24uYW1vdW50fSAke2QuZHVyYXRpb24udHlwZX0ke2QuY29uY2VudHJhdGlvbiA/IFwiIChjb25jZW50cmF0aW9uKVwiIDogXCJcIn1gO1xuICAgIH1cbiAgICBpZiAoZC50eXBlID09PSBcInBlcm1hbmVudFwiKSByZXR1cm4gXCJQZXJtYW5lbnRcIjtcbiAgICByZXR1cm4gXCJTcGVjaWFsXCI7XG4gIH0pLmpvaW4oXCIsIFwiKTtcbn1cbi8vIGluIHBhcnNlcnMvNWUtanNvbi9wYXJzZVNwZWxsc0ZpbGUudHMgKG9yIHdoZXJldmVyIGZvcm1hdENvbXBvbmVudHMgbGl2ZXMpXG5cbmZ1bmN0aW9uIGZvcm1hdENvbXBvbmVudHMoY29tcG9uZW50czogYW55KTogc3RyaW5nIHtcbiAgaWYgKCFjb21wb25lbnRzKSByZXR1cm4gXCJcIjtcblxuICBjb25zdCBwYXJ0czogc3RyaW5nW10gPSBbXTtcblxuICBpZiAoY29tcG9uZW50cy52KSBwYXJ0cy5wdXNoKFwiVlwiKTtcbiAgaWYgKGNvbXBvbmVudHMucykgcGFydHMucHVzaChcIlNcIik7XG5cbiAgaWYgKGNvbXBvbmVudHMubSkge1xuICAgIC8vIHB1bGwgb3V0IHRoZSBhY3R1YWwgbWF0ZXJpYWwgdGV4dChzKVxuICAgIGxldCBtYXREZXRhaWxzOiBzdHJpbmdbXSA9IFtdO1xuXG4gICAgaWYgKEFycmF5LmlzQXJyYXkoY29tcG9uZW50cy5tKSkge1xuICAgICAgbWF0RGV0YWlscyA9IGNvbXBvbmVudHMubVxuICAgICAgICAubWFwKChpdGVtOmFueSkgPT5cbiAgICAgICAgICB0eXBlb2YgaXRlbSA9PT0gXCJzdHJpbmdcIlxuICAgICAgICAgICAgPyBpdGVtXG4gICAgICAgICAgICA6IGl0ZW0gJiYgdHlwZW9mIGl0ZW0udGV4dCA9PT0gXCJzdHJpbmdcIlxuICAgICAgICAgICAgPyBpdGVtLnRleHRcbiAgICAgICAgICAgIDogbnVsbFxuICAgICAgICApXG4gICAgICAgIC5maWx0ZXIoKHQ6YW55KTogdCBpcyBzdHJpbmcgPT4gISF0KTtcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiBjb21wb25lbnRzLm0gPT09IFwic3RyaW5nXCIpIHtcbiAgICAgIG1hdERldGFpbHMgPSBbY29tcG9uZW50cy5tXTtcbiAgICB9IGVsc2UgaWYgKGNvbXBvbmVudHMubS50ZXh0KSB7XG4gICAgICBtYXREZXRhaWxzID0gW2NvbXBvbmVudHMubS50ZXh0XTtcbiAgICB9XG5cbiAgICAvLyBidWlsZCB0aGUgXHUyMDFDTVx1MjAxRCBlbnRyeSwgYXBwZW5kaW5nIGRldGFpbHMgaWYgYW55XG4gICAgY29uc3QgbWF0UGFydCA9XG4gICAgICBtYXREZXRhaWxzLmxlbmd0aCA+IDBcbiAgICAgICAgPyBgTSAoJHttYXREZXRhaWxzLmpvaW4oXCIsIFwiKX0pYFxuICAgICAgICA6IFwiTVwiO1xuXG4gICAgcGFydHMucHVzaChtYXRQYXJ0KTtcbiAgfVxuXG4gIHJldHVybiBwYXJ0cy5qb2luKFwiLCBcIik7XG59XG5cblxuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlU3BlbGxzRmlsZShqc29uOiBhbnksIGVkaXRpb25JZDogc3RyaW5nKTogUGFyc2VkTWFya2Rvd25GaWxlW10ge1xuICBpZiAoIWpzb24uc3BlbGwpIHJldHVybiBbXTtcblxuICAvLyBtYWtlIGVkaXRpb25JZCBhdmFpbGFibGUgZm9yIG91ciBTT1VSQ0UgY29udmVydGVyXG4gIChqc29uIGFzIGFueSkuX2VkaXRpb25JZCA9IGVkaXRpb25JZDtcblxuICByZXR1cm4ganNvbi5zcGVsbC5tYXAoKHNwZWxsOiBhbnkpID0+IHtcbiAgICAvLyBcdTIwMTQgZ2F0aGVyIGRhdGEgZm9yIGhlYWRlci9ib2R5L2Zvb3RlciBhcyBiZWZvcmUgXHUyMDE0XG4gICAgY29uc3Qgc291cmNlcyA9IHNwZWxsLnNvdXJjZVxuICAgICAgPyBBcnJheS5pc0FycmF5KHNwZWxsLnNvdXJjZSkgPyBzcGVsbC5zb3VyY2UgOiBbc3BlbGwuc291cmNlXVxuICAgICAgOiBbXCJ1bmtub3duXCJdO1xuICAgIGNvbnN0IG5hbWUgPSBzcGVsbC5uYW1lO1xuICAgIGNvbnN0IHNjaG9vbCA9IFNDSE9PTF9NQVBbc3BlbGwuc2Nob29sXSA/PyBzcGVsbC5zY2hvb2w7XG4gICAgY29uc3QgbGV2ZWwgPSBzcGVsbC5sZXZlbDtcbiAgICBjb25zdCByYW5nZSA9IGZvcm1hdFJhbmdlKHNwZWxsLnJhbmdlKTtcbiAgICBjb25zdCBjYXN0aW5nVGltZSA9IGZvcm1hdFRpbWUoc3BlbGwudGltZSk7XG4gICAgY29uc3QgZHVyYXRpb24gPSBmb3JtYXREdXJhdGlvbihzcGVsbC5kdXJhdGlvbik7XG4gICAgY29uc3QgZm9ybWF0dGVkU291cmNlcyA9IHNvdXJjZXMubWFwKChzOiBzdHJpbmcpID0+IGdldEZ1bGxTb3VyY2VOYW1lKHMsIGVkaXRpb25JZCkpO1xuXG4gICAgY29uc3QgYXR0YWNrVHlwZSA9IHNwZWxsLmF0dGFja1R5cGUgfHwgXCJcIjtcbiAgICBjb25zdCBkYW1hZ2VUeXBlID0gc3BlbGwuZGFtYWdlSW5mbGljdD8uWzBdIHx8IFwiVGVsZXBvcnRhdGlvblwiO1xuICAgIGNvbnN0IHJpdHVhbCA9IHNwZWxsLnJpdHVhbCA9PT0gdHJ1ZTtcbiAgICBjb25zdCBjb25jZW50cmF0aW9uID0gc3BlbGwuZHVyYXRpb24/LnNvbWUoKGQ6IGFueSkgPT4gZC5jb25jZW50cmF0aW9uKSA/PyBmYWxzZTtcbiAgICBcbiAgICBjb25zdCBGTSAgID0gYnVpbGRGTShzcGVsbCwgU1BFTExfTUVUQV9ERUZTKTtcbiAgICBjb25zdCB5YW1sID0gc2VyaWFsaXplRnJvbnRtYXR0ZXIoRk0sIFNQRUxMX01FVEFfREVGUyk7XG4gICAgY29uc3Qgc2F2aW5nVGhyb3dzID0gKEZNW0ZNX0ZJRUxEUy5TQVZJTkdfVEhST1dTXSBhcyBzdHJpbmdbXSkgfHwgW107XG4gICAgY29uc3Qgc2F2ZUF0dHIgPSBGTVtGTV9GSUVMRFMuU0FWRV0gYXMgc3RyaW5nIHwgdW5kZWZpbmVkO1xuXG4gICAgLy8gXHUyMDE0IHRpdGxlL3N1YnRpdGxlIGFuZCBib2R5IGxheW91dCBcdTIwMTRcbiAgICBjb25zdCBzYWZlTmFtZSA9IG5hbWUucmVwbGFjZSgvXFwvL2csIFwiLVwiKTtcbiAgICBjb25zdCB0aXRsZSA9IGAjICR7bmFtZX1gO1xuICAgIGNvbnN0IGxldmVsTGFiZWwgPVxuICAgICAgbGV2ZWwgPT09IDBcbiAgICAgICAgPyBgJHtzY2hvb2x9IENhbnRyaXBgXG4gICAgICAgIDogYCR7b3JkaW5hbChsZXZlbCl9LWxldmVsICR7c2Nob29sfSBTcGVsbGA7XG4gICAgY29uc3Qgc3VidGl0bGUgPSBgIyMjICoke2xldmVsTGFiZWx9KiR7Y29uY2VudHJhdGlvbiA/IFwiICooQ29uY2VudHJhdGlvbikqXCIgOiBcIlwifWA7XG5cbiAgICBjb25zdCBoZWFkZXJMaW5lcyA9IFtcbiAgICAgIHRpdGxlLFxuICAgICAgc3VidGl0bGUsXG4gICAgICBgKipDYXN0aW5nIFRpbWU6KiogJHtjYXN0aW5nVGltZX1gLFxuICAgICAgYCoqUmFuZ2U6KiogJHtyYW5nZX1gLFxuICAgICAgYCoqQ29tcG9uZW50czoqKiAke2Zvcm1hdENvbXBvbmVudHMoc3BlbGwuY29tcG9uZW50cyl9YCxcbiAgICAgIC4uLihzYXZpbmdUaHJvd3MubGVuZ3RoID8gW2AqKlNhdmluZyBUaHJvdzoqKiAke3NhdmluZ1Rocm93cy5qb2luKFwiLCBcIil9YF0gOiBbXSksXG4gICAgICBgKipEdXJhdGlvbjoqKiAke2R1cmF0aW9ufWAsXG4gICAgXTtcblxuICAgIGNvbnN0IGJvZHlMaW5lcyA9IFtcbiAgICAgIC4uLigoc3BlbGwuZW50cmllcyA/PyBbXSkubWFwKChlOiBhbnkpID0+IGZvcm1hdEVudHJ5KGUpKSksXG4gICAgICAuLi4oKHNwZWxsLmVudHJpZXNIaWdoZXJMZXZlbCA/PyBbXSkubWFwKChlOiBhbnkpID0+IGZvcm1hdEVudHJ5KGUpKSksXG4gICAgXTtcblxuICAgIGNvbnN0IGZvb3RlckxpbmVzID0gW1xuICAgICAgYC0tLWAsXG4gICAgICBgKipTb3VyY2U6KiogJHtmb3JtYXR0ZWRTb3VyY2VzLmpvaW4oXCIsIFwiKX1gLFxuICAgIF07XG5cbiAgICAvLyBcdTIwMTQgYXNzZW1ibGUgdGhlIG5vdGUgd2l0aCBZQU1MIGZyb250bWF0dGVyIFx1MjAxNFxuICAgIHJldHVybiB7XG4gICAgICBwYXRoOiBgJHtzYWZlTmFtZX0ubWRgLFxuICAgICAgY29udGVudDogW1xuICAgICAgICBgLS0tXFxuJHt5YW1sfVxcbi0tLWAsXG4gICAgICAgIGhlYWRlckxpbmVzLmpvaW4oXCJcXG5cIiksXG4gICAgICAgIGBgLFxuICAgICAgICBib2R5TGluZXMuam9pbihcIlxcblxcblwiKSxcbiAgICAgICAgYGAsXG4gICAgICAgIGZvb3RlckxpbmVzLmpvaW4oXCJcXG5cIiksXG4gICAgICBdLmpvaW4oXCJcXG5cIiksXG4gICAgfTtcbiAgfSk7XG59XG5cbiIsICIvLyBkbmQgNWUgMjAxNCBzcGVjaWVzXG5pbXBvcnQgdHlwZSB7IFBhcnNlZE1hcmtkb3duRmlsZSB9IGZyb20gXCIuLi8uLi90eXBlc1wiO1xuaW1wb3J0IHsgcmVwbGFjZTVlVGFncyB9IGZyb20gXCIuL2hlbHBlcnMvdGFnUmVwbGFjZXJcIjtcbmltcG9ydCB7XG4gIGJ1aWxkRk0sXG4gIHNlcmlhbGl6ZUZyb250bWF0dGVyLFxuICBGTV9GSUVMRFMsXG4gIFNQRUNJRVNfTUVUQV9ERUZTLFxuICBTSVpFX01BUCxcbn0gZnJvbSBcIi4vaGVscGVycy9mcm9udG1hdHRlclwiO1xuaW1wb3J0IHsgcmVuZGVyTWFya2Rvd25UYWJsZSB9IGZyb20gXCIuL2hlbHBlcnMvbWFya2Rvd25UYWJsZVwiO1xuaW1wb3J0IHsgZm9ybWF0RW50cnkgfSBmcm9tIFwiLi9oZWxwZXJzL2Zvcm1hdEVudHJ5XCI7XG5cbmZ1bmN0aW9uIHNsdWcobmFtZTogc3RyaW5nKTogc3RyaW5nIHtcbiAgcmV0dXJuIG5hbWVcbiAgICAucmVwbGFjZSgvOy9nLCBcIjpcIikgICAgICAgLy8gc2VtaWNvbG9uIFx1MjE5MiBkYXNoXG4gICAgLnJlcGxhY2UoL1tcXC86XCJdL2csIFwiOlwiKSAgLy8gc2xhc2gsIGNvbG9uLCBxdW90ZSBcdTIxOTIgZGFzaFxuICAgIC50cmltKCk7XG59XG5cbmNvbnN0IEJMT0NLRURfVFJBSVRTID0gW1wiQWdlXCIsIFwiU2l6ZVwiLCBcIkxhbmd1YWdlc1wiLCBcIkNyZWF0dXJlIFR5cGVcIiwgXCJTcGVlZFwiXTtcblxuLy8gRXh0cmFjdCB0aGUgZGlzcGxheSB0ZXh0IGZyb20gYSB3aWtpbGluayBsaWtlIFtbRmlsZSNIZWFkZXJ8RGlzcGxheV1dXG5mdW5jdGlvbiBsaW5rRGlzcGxheShzdHI6IHN0cmluZyk6IHN0cmluZyB7XG4gIGlmICh0eXBlb2Ygc3RyICE9PSBcInN0cmluZ1wiKSByZXR1cm4gU3RyaW5nKHN0ciA/PyBcIlwiKTtcbiAgY29uc3QgbSA9IHN0ci5tYXRjaCgvXlxcW1xcWyguKz8pXFxdXFxdJC8pO1xuICBpZiAoIW0pIHJldHVybiBzdHI7XG4gIGNvbnN0IGlubmVyID0gbVsxXTtcbiAgY29uc3QgcGlwZSA9IGlubmVyLnNwbGl0KFwifFwiKTtcbiAgaWYgKHBpcGUubGVuZ3RoID4gMSkgcmV0dXJuIHBpcGVbMV0udHJpbSgpOyAgICAgICAgIC8vIC4uLnxEaXNwbGF5XG4gIGNvbnN0IGhhc2ggPSBpbm5lci5zcGxpdChcIiNcIik7XG4gIGlmIChoYXNoLmxlbmd0aCA+IDEpIHJldHVybiBoYXNoWzFdLnRyaW0oKTsgICAgICAgICAvLyBGaWxlI0hlYWRlclxuICByZXR1cm4gaW5uZXIudHJpbSgpO1xufVxuXG4vLyBOb3JtYWxpemUgaGVhZGluZyBuYW1lcyBmb3IgY29tcGFyaXNvbiBhbmQgbG9va3VwXG5mdW5jdGlvbiBub3JtTmFtZShuOiBzdHJpbmcpOiBzdHJpbmcge1xuICByZXR1cm4gU3RyaW5nKG4gPz8gXCJcIilcbiAgICAucmVwbGFjZSgvXkZlYXR1cmU6XFxzKi9pLCBcIlwiKVxuICAgIC5yZXBsYWNlKC9cXHMrL2csIFwiIFwiKVxuICAgIC50cmltKClcbiAgICAudG9Mb3dlckNhc2UoKTtcbn1cblxuLy8gRmluZCBhIG5hbWVkIGVudHJ5IGVpdGhlciBhdCB0b3AgbGV2ZWwgb3Igb25lIGxldmVsIG5lc3RlZCB1bmRlciBlbnRyaWVzW11cbmZ1bmN0aW9uIGZpbmRFbnRyeUJ5TmFtZShlbnRyaWVzOiBhbnlbXSB8IHVuZGVmaW5lZCwgZGlzcGxheTogc3RyaW5nKTogYW55IHwgbnVsbCB7XG4gIGlmICghQXJyYXkuaXNBcnJheShlbnRyaWVzKSkgcmV0dXJuIG51bGw7XG4gIGNvbnN0IHRhcmdldCA9IG5vcm1OYW1lKGRpc3BsYXkpO1xuXG4gIC8vIGRpcmVjdCBoaXRcbiAgY29uc3QgZGlyZWN0ID0gZW50cmllcy5maW5kKGUgPT4gdHlwZW9mIGU/Lm5hbWUgPT09IFwic3RyaW5nXCIgJiYgbm9ybU5hbWUoZS5uYW1lKSA9PT0gdGFyZ2V0KTtcbiAgaWYgKGRpcmVjdCkgcmV0dXJuIGRpcmVjdDtcblxuICAvLyBvbmUgbGV2ZWwgbmVzdGVkXG4gIGZvciAoY29uc3QgZSBvZiBlbnRyaWVzKSB7XG4gICAgaWYgKEFycmF5LmlzQXJyYXkoZT8uZW50cmllcykpIHtcbiAgICAgIGNvbnN0IHN1YiA9IGUuZW50cmllcy5maW5kKChzOiBhbnkpID0+IHR5cGVvZiBzPy5uYW1lID09PSBcInN0cmluZ1wiICYmIG5vcm1OYW1lKHMubmFtZSkgPT09IHRhcmdldCk7XG4gICAgICBpZiAoc3ViKSByZXR1cm4gc3ViO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBudWxsO1xufVxuXG5cbmV4cG9ydCBmdW5jdGlvbiBwYXJzZVNwZWNpZXNGaWxlKFxuICBqc29uOiB7IHJhY2U6IGFueVtdOyBzdWJyYWNlPzogYW55W107IF9lZGl0aW9uSWQ/OiBzdHJpbmcgfSxcbiAgZWRpdGlvbklkOiBzdHJpbmdcbik6IFBhcnNlZE1hcmtkb3duRmlsZVtdIHtcbiAgaWYgKCFBcnJheS5pc0FycmF5KGpzb24ucmFjZSkpIHJldHVybiBbXTtcbiAganNvbi5fZWRpdGlvbklkID0gZWRpdGlvbklkO1xuXG4gIC8vIDEpIEZpbHRlciBvdXQgcmVwcmludHNcbiAgY29uc3QgcmF3VmFyaWFudHMgPSBqc29uLnJhY2UuZmlsdGVyKChyOiBhbnkpID0+XG4gICAgIShcInJlcHJpbnRlZEFzXCIgaW4gcikgJiZcbiAgICAhL1xcKCg/OkthbGFkZXNofFplbmRpa2FyfEFtb25raGV0fElubmlzdHJhZHxJeGFsYW4pXFwpJC8udGVzdChyLm5hbWUpXG4gICk7XG5cbiAgLy8gMikgR3JvdXAgYnkgcmFjZSBuYW1lXG4gIGNvbnN0IGJ5TmFtZSA9IG5ldyBNYXA8c3RyaW5nLCBhbnlbXT4oKTtcbiAgZm9yIChjb25zdCByIG9mIHJhd1ZhcmlhbnRzKSB7XG4gICAgY29uc3QgbGlzdCA9IGJ5TmFtZS5nZXQoci5uYW1lKSA/PyBbXTtcbiAgICBsaXN0LnB1c2gocik7XG4gICAgYnlOYW1lLnNldChyLm5hbWUsIGxpc3QpO1xuICB9XG5cbiAgLy8gMykgQWxsIHN1YnJhY2VzIGFycmF5XG4gIGNvbnN0IHN1YnJhY2VzTGlzdCA9IEFycmF5LmlzQXJyYXkoanNvbi5zdWJyYWNlKSA/IGpzb24uc3VicmFjZSA6IFtdO1xuXG4gIGNvbnN0IG91dDogUGFyc2VkTWFya2Rvd25GaWxlW10gPSBbXTtcblxuICAvLyA0KSBNYWluIGxvb3Agb3ZlciBlYWNoIHNwZWNpZXNcbiAgZm9yIChjb25zdCBbcmFjZU5hbWUsIHJhY2VWYXJpYW50c10gb2YgYnlOYW1lLmVudHJpZXMoKSkge1xuICAgIGNvbnN0IHNhZmVOYW1lID0gc2x1ZyhyYWNlTmFtZSk7XG5cbiAgICAvLyBwaWNrIHRoZSBcdTIwMUNmdWxsZXN0XHUyMDFEIHZhcmlhbnQgYXMgcHJpbWFyeVxuICAgIGNvbnN0IHByaW1hcnkgPSByYWNlVmFyaWFudHMucmVkdWNlKFxuICAgICAgKGJlc3QsIGN1cikgPT5cbiAgICAgICAgT2JqZWN0LmtleXMoY3VyKS5sZW5ndGggPiBPYmplY3Qua2V5cyhiZXN0KS5sZW5ndGggPyBjdXIgOiBiZXN0LFxuICAgICAgcmFjZVZhcmlhbnRzWzBdXG4gICAgKTtcblxuICAgIC8vIG9uZVx1MjAxMG9mZjogZ3JhZnQgSHVtYW4gYWJpbGl0eSBpZiBtaXNzaW5nXG4gICAgaWYgKCFwcmltYXJ5LmFiaWxpdHkpIHtcbiAgICAgIGNvbnN0IGh1bWFuRW50cnkgPSBzdWJyYWNlc0xpc3QuZmluZCgoc3I6IGFueSkgPT5cbiAgICAgICAgc3IucmFjZU5hbWUgPT09IHJhY2VOYW1lICYmXG4gICAgICAgIHNyLnJhY2VTb3VyY2UgPT09IHByaW1hcnkuc291cmNlICYmXG4gICAgICAgICEoXCJuYW1lXCIgaW4gc3IpICYmXG4gICAgICAgIEFycmF5LmlzQXJyYXkoc3IuYWJpbGl0eSlcbiAgICAgICk7XG4gICAgICBpZiAoaHVtYW5FbnRyeSkgcHJpbWFyeS5hYmlsaXR5ID0gaHVtYW5FbnRyeS5hYmlsaXR5O1xuICAgIH1cblxuICAgIC8vIGJ1aWxkIGZyb250bWF0dGVyXG4gICAgY29uc3QgZm0gPSBidWlsZEZNKHByaW1hcnksIFNQRUNJRVNfTUVUQV9ERUZTKTtcbiAgICBjb25zdCBzZW5zZXM6IHN0cmluZ1tdID0gW107XG4gICAgaWYgKHByaW1hcnkuZGFya3Zpc2lvbikgIHNlbnNlcy5wdXNoKGBEYXJrdmlzaW9uICR7cHJpbWFyeS5kYXJrdmlzaW9ufSBmdC5gKTtcbiAgICBpZiAocHJpbWFyeS5ibGluZHNpZ2h0KSAgc2Vuc2VzLnB1c2goYEJsaW5kc2lnaHQgJHtwcmltYXJ5LmJsaW5kc2lnaHR9IGZ0LmApO1xuICAgIGlmIChwcmltYXJ5LnRyZW1vcnNlbnNlKSBzZW5zZXMucHVzaChgVHJlbW9yc2Vuc2UgJHtwcmltYXJ5LnRyZW1vcnNlbnNlfSBmdC5gKTtcbiAgICBpZiAocHJpbWFyeS50cnVlc2lnaHQpICAgc2Vuc2VzLnB1c2goYFRydWVzaWdodCAke3ByaW1hcnkudHJ1ZXNpZ2h0fSBmdC5gKTtcbiAgICBpZiAoc2Vuc2VzLmxlbmd0aCkgZm0uc2Vuc2VzID0gc2Vuc2VzO1xuICAgIGlmIChBcnJheS5pc0FycmF5KGZtLnRyYWl0cykpIHtcbiAgICAgIGZtLnRyYWl0cyA9IGZtLnRyYWl0cy5maWx0ZXIodCA9PiAhQkxPQ0tFRF9UUkFJVFMuaW5jbHVkZXModCkpO1xuICAgIH1cbiAgICBjb25zdCB5YW1sID0gc2VyaWFsaXplRnJvbnRtYXR0ZXIoZm0sIFNQRUNJRVNfTUVUQV9ERUZTKTtcblxuICAgIC8vIGJ1aWxkIHNwZWNpZXMgYm9keVxuICAgIGNvbnN0IGxpbmVzOiBzdHJpbmdbXSA9IFtdO1xuICAgIGxpbmVzLnB1c2goYCMgJHtyYWNlTmFtZX1gLCBgIyMgU3RhdHNgKTtcblxuICAgIC8vIFNpemVcbiAgICBjb25zdCBzaXplID0gQXJyYXkuaXNBcnJheShwcmltYXJ5LnNpemUpXG4gICAgICA/IHByaW1hcnkuc2l6ZS5tYXAoKHM6IHN0cmluZykgPT4gU0laRV9NQVBbc10gfHwgcykuam9pbihcIi9cIilcbiAgICAgIDogU0laRV9NQVBbcHJpbWFyeS5zaXplXSA/PyBwcmltYXJ5LnNpemU7XG4gICAgbGluZXMucHVzaChgKipTaXplOioqICR7c2l6ZX1gKTtcblxuICAgIC8vIFNwZWVkXG4gICAgY29uc3Qgc3BlZWQgPSB0eXBlb2YgcHJpbWFyeS5zcGVlZCA9PT0gXCJudW1iZXJcIlxuICAgICAgPyBwcmltYXJ5LnNwZWVkXG4gICAgICA6IHByaW1hcnkuc3BlZWQ/LndhbGsgPz8gcHJpbWFyeS5zcGVlZD8uYmFzZSA/PyAwO1xuICAgIGxpbmVzLnB1c2goYCoqU3BlZWQ6KiogJHtzcGVlZH0gZnQuIHdhbGtpbmdgKTtcblxuICAgIC8vIEFiaWxpdGllc1xuICAgIGNvbnN0IGtpZHMgPSBzdWJyYWNlc0xpc3QuZmlsdGVyKHNyID0+XG4gICAgICBzci5uYW1lICYmIHNyLnJhY2VOYW1lID09PSByYWNlTmFtZSAmJiBzci5yYWNlU291cmNlID09PSBwcmltYXJ5LnNvdXJjZVxuICAgICk7XG4gICAgY29uc3QgcmF3QWJpbGl0eSA9IEFycmF5LmlzQXJyYXkocHJpbWFyeS5hYmlsaXR5KVxuICAgICAgPyBwcmltYXJ5LmFiaWxpdHlcbiAgICAgIDogQXJyYXkuaXNBcnJheShraWRzWzBdPy5hYmlsaXR5KSA/IGtpZHNbMF0uYWJpbGl0eSA6IFtdO1xuICAgIGlmIChBcnJheS5pc0FycmF5KHJhd0FiaWxpdHkpICYmIHJhd0FiaWxpdHkubGVuZ3RoKSB7XG4gICAgICBjb25zdCBib251c2VzID0geyBzdHI6MCxkZXg6MCxjb246MCxpbnQ6MCx3aXM6MCxjaGE6MCB9O1xuICAgICAgbGV0IGNob29zZU9wdDogYW55ID0gbnVsbDtcbiAgICAgIGZvciAoY29uc3Qgb2JqIG9mIHJhd0FiaWxpdHkpIHtcbiAgICAgICAgaWYgKFwiY2hvb3NlXCIgaW4gb2JqKSBjaG9vc2VPcHQgPSBvYmouY2hvb3NlO1xuICAgICAgICBlbHNlIGZvciAoY29uc3QgW2ssdl0gb2YgT2JqZWN0LmVudHJpZXMob2JqKSkgKGJvbnVzZXMgYXMgYW55KVtrXSArPSB2IGFzIG51bWJlcjtcbiAgICAgIH1cbiAgICAgIGNvbnN0IHBhaXJzID0gT2JqZWN0LmVudHJpZXMoYm9udXNlcykgYXMgW3N0cmluZyxudW1iZXJdW107XG4gICAgICBjb25zdCBwYXJ0cyA9IHBhaXJzLmZpbHRlcigoWyx2XSk9PnYhPT0wKS5tYXAoKFtrLHZdKT0+YCR7ay50b1VwcGVyQ2FzZSgpfSAke3Y+PTA/XCIrXCI6XCJcIn0ke3Z9YCk7XG4gICAgICBpZiAoY2hvb3NlT3B0Py5jb3VudCAmJiBBcnJheS5pc0FycmF5KGNob29zZU9wdC5mcm9tKSkge1xuICAgICAgICBwYXJ0cy5wdXNoKGBDSE9PU0UgJHtjaG9vc2VPcHQuY291bnR9IGZyb20gJHtjaG9vc2VPcHQuZnJvbS5tYXAoKHM6c3RyaW5nKT0+cy50b1VwcGVyQ2FzZSgpKS5qb2luKFwiLCBcIil9YCk7XG4gICAgICB9XG4gICAgICBpZiAocGFydHMubGVuZ3RoKSBsaW5lcy5wdXNoKGAqKkFiaWxpdHkgU2NvcmVzOioqICR7cGFydHMuam9pbihcIiwgXCIpfWApO1xuICAgIH1cblxuICAgIC8vIExhbmd1YWdlc1xuICAgIGNvbnN0IGxhbmdzID0gZm0ubGFuZ3VhZ2VzIGFzIHN0cmluZ1tdfHVuZGVmaW5lZDtcbiAgICBpZiAobGFuZ3M/Lmxlbmd0aCkgbGluZXMucHVzaChgKipMYW5ndWFnZXM6KiogJHtsYW5ncy5qb2luKFwiLCBcIil9YCk7XG5cbiAgICAvLyBTa2lsbHNcbiAgICBpZiAoQXJyYXkuaXNBcnJheShwcmltYXJ5LnNraWxsUHJvZmljaWVuY2llcykpIHtcbiAgICAgIGNvbnN0IHNraWxsTGFiZWxzOiBzdHJpbmdbXSA9IFtdO1xuICAgICAgZm9yIChjb25zdCBlIG9mIHByaW1hcnkuc2tpbGxQcm9maWNpZW5jaWVzIGFzIGFueVtdKSB7XG4gICAgICAgIGlmIChlLmNob29zZT8uZnJvbSkge1xuICAgICAgICAgIHNraWxsTGFiZWxzLnB1c2goYENob29zZSBmcm9tOiAke2UuY2hvb3NlLmZyb20ubWFwKChzOnN0cmluZyk9PnMuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkrcy5zbGljZSgxKSkuam9pbihcIiwgXCIpfWApO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNvbnN0IHZhbCA9IGUucHJvZmljaWVuY3kgPz8gZS5uYW1lID8/IGU7XG4gICAgICAgICAgaWYgKHR5cGVvZiB2YWwgPT09IFwic3RyaW5nXCIpIHNraWxsTGFiZWxzLnB1c2godmFsLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpK3ZhbC5zbGljZSgxKSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmIChza2lsbExhYmVscy5sZW5ndGgpIGxpbmVzLnB1c2goYCoqU2tpbGwgUHJvZmljaWVuY2llczoqKiAke3NraWxsTGFiZWxzLmpvaW4oXCI7IFwiKX1gKTtcbiAgICB9XG5cbiAgICAvLyBUb29sIC8gV2VhcG9uIC8gQXJtb3JcbiAgICBjb25zdCB0cCA9IGZtW0ZNX0ZJRUxEUy5UT09MX1BST0ZJQ0lFTkNJRVNdIGFzIHN0cmluZ1tdfHVuZGVmaW5lZDtcbiAgICBjb25zdCB3cCA9IGZtW0ZNX0ZJRUxEUy5XRUFQT05fUFJPRklDSUVOQ0lFU10gYXMgc3RyaW5nW118dW5kZWZpbmVkO1xuICAgIGNvbnN0IGFwID0gZm1bRk1fRklFTERTLkFSTU9SX1BST0ZJQ0lFTkNJRVNdIGFzIHN0cmluZ1tdfHVuZGVmaW5lZDtcbiAgICBpZiAodHA/Lmxlbmd0aCkgbGluZXMucHVzaChgKipUb29sIFByb2ZpY2llbmNpZXM6KiogJHt0cC5qb2luKFwiLCBcIil9YCk7XG4gICAgaWYgKHdwPy5sZW5ndGgpIGxpbmVzLnB1c2goYCoqV2VhcG9uIFByb2ZpY2llbmNpZXM6KiogJHt3cC5qb2luKFwiLCBcIil9YCk7XG4gICAgaWYgKGFwPy5sZW5ndGgpIGxpbmVzLnB1c2goYCoqQXJtb3IgUHJvZmljaWVuY2llczoqKiAke2FwLmpvaW4oXCIsIFwiKX1gKTtcblxuICAgIC8vIFRyYWl0c1xuICAgIGxpbmVzLnB1c2goYCMjIFRyYWl0c2ApO1xuICAgICAgICBjb25zdCBzZWVuID0gbmV3IFNldDxzdHJpbmc+KCk7XG4gICAgZm9yIChjb25zdCB0cmFpdCBvZiAoZm0udHJhaXRzIGFzIHN0cmluZ1tdIHx8IFtdKSkge1xuICAgICAgY29uc3QgdGl0bGUgPSBsaW5rRGlzcGxheSh0cmFpdCk7ICAgICAgICAgLy8gcGxhaW4gaGVhZGVyIHRleHQsIG5vIGxpbmtcbiAgICAgIGxpbmVzLnB1c2goYCMjIyMjICR7dGl0bGV9YCk7XG5cbiAgICAgIGNvbnN0IGVudCA9IGZpbmRFbnRyeUJ5TmFtZShwcmltYXJ5LmVudHJpZXMsIHRpdGxlKTtcbiAgICAgIGlmIChlbnQ/LmVudHJpZXMpIHtcbiAgICAgICAgZW50LmVudHJpZXMuZm9yRWFjaCgoc3ViOiBhbnksIGlkeDogbnVtYmVyKSA9PiB7XG4gICAgICAgICAgbGV0IGJsazogc3RyaW5nIHwgdW5kZWZpbmVkO1xuICAgICAgICAgIGlmIChzdWIudHlwZSA9PT0gXCJ0YWJsZVwiKSB7XG4gICAgICAgICAgICBibGsgPSByZW5kZXJNYXJrZG93blRhYmxlKHN1Yik7XG4gICAgICAgICAgfSBlbHNlIGlmIChzdWIudHlwZSA9PT0gXCJsaXN0XCIpIHtcbiAgICAgICAgICAgIGJsayA9IHN1Yi5pdGVtc1xuICAgICAgICAgICAgICAubWFwKChpdDogYW55KSA9PiAodHlwZW9mIGl0ID09PSBcInN0cmluZ1wiID8gYC0gJHtyZXBsYWNlNWVUYWdzKGl0KX1gIDogYC0gJHtpdC5uYW1lfWApKVxuICAgICAgICAgICAgICAuam9pbihcIlxcblwiKTtcbiAgICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiBzdWIgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgIGJsayA9IHJlcGxhY2U1ZVRhZ3Moc3ViKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKGJsayAmJiAhc2Vlbi5oYXMoYmxrKSkge1xuICAgICAgICAgICAgbGluZXMucHVzaChibGspO1xuICAgICAgICAgICAgc2Vlbi5hZGQoYmxrKTtcbiAgICAgICAgICAgIGlmIChlbnQuZW50cmllcy5sZW5ndGggPiAxICYmIGlkeCA8IGVudC5lbnRyaWVzLmxlbmd0aCAtIDEpIGxpbmVzLnB1c2goXCJcIik7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG5cblxuICAgIC8vIFx1MjUwMFx1MjUwMFx1MjUwMCBOb3cgYnJhbmNoIG9uIHN1YnJhY2VzIFx1MjUwMFx1MjUwMFx1MjUwMFxuICAgIGNvbnN0IHN1YnMgPSBraWRzOyAgLy8gYWxyZWFkeSBmaWx0ZXJlZFxuICAgIGlmIChzdWJzLmxlbmd0aCkge1xuICAgICAgLy8gMSkgbWFpbiBmaWxlIGluIGZvbGRlclxuICAgICAgb3V0LnB1c2goe1xuICAgICAgICBwYXRoOiBgU3BlY2llcy8ke3NhZmVOYW1lfS8ke3NhZmVOYW1lfS5tZGAsXG4gICAgICAgIGNvbnRlbnQ6IGAtLS1cXG4ke3lhbWx9XFxuLS0tXFxuXFxuJHtsaW5lcy5qb2luKFwiXFxuXCIpfWAsXG4gICAgICB9KTtcblxuICAgICAgLy8gMikgZWFjaCBzdWJzcGVjaWVzXG4gICAgICBjb25zdCBzdWJGb2xkZXIgPSBgU3BlY2llcy8ke3NhZmVOYW1lfS9SYWNlc2A7XG4gICAgICBmb3IgKGNvbnN0IHNyIG9mIHN1YnMpIHsgXG4gICAgICAgIC8vIHR1cm4gc2VtaWNvbG9ucyBcdTIxOTIgY29sb25zXG4gICAgICAgIGNvbnN0IGRpc3BsYXkgPSBzci5uYW1lLnJlcGxhY2UoLzsvZywgXCI6XCIpO1xuICAgICAgICBjb25zdCBzdWJMaW5lczogc3RyaW5nW10gPSBbYCMgJHtkaXNwbGF5fWBdO1xuXG4gICAgICAgIC8vIGNvcHkgU3RhdHMgYmxvY2sgaWYgeW91IGxpa2U6XG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KHNyLmFiaWxpdHkpKSB7XG4gICAgICAgICAgY29uc3QgYm9udXNlcyA9IHsgc3RyOjAsZGV4OjAsY29uOjAsaW50OjAsd2lzOjAsY2hhOjAgfTtcbiAgICAgICAgICBsZXQgY2hvb3NlT3B0OmFueSA9IG51bGw7XG4gICAgICAgICAgZm9yIChjb25zdCBvYmogb2Ygc3IuYWJpbGl0eSkge1xuICAgICAgICAgICAgaWYgKFwiY2hvb3NlXCIgaW4gb2JqKSBjaG9vc2VPcHQgPSBvYmouY2hvb3NlO1xuICAgICAgICAgICAgZWxzZSBmb3IgKGNvbnN0IFtrLHZdIG9mIE9iamVjdC5lbnRyaWVzKG9iaikpIChib251c2VzIGFzIGFueSlba10rPXYgYXMgbnVtYmVyO1xuICAgICAgICAgIH1cbiAgICAgICAgICBjb25zdCBwYWlycyA9IE9iamVjdC5lbnRyaWVzKGJvbnVzZXMpIGFzIFtzdHJpbmcsbnVtYmVyXVtdO1xuICAgICAgICAgIGNvbnN0IHBhcnRzID0gcGFpcnMuZmlsdGVyKChbLHZdKT0+diE9PTApLm1hcCgoW2ssdl0pPT5gJHtrLnRvVXBwZXJDYXNlKCl9ICR7dj49MD9cIitcIjpcIlwifSR7dn1gKTtcbiAgICAgICAgICBpZiAoY2hvb3NlT3B0Py5jb3VudCkgcGFydHMucHVzaChgQ0hPT1NFICR7Y2hvb3NlT3B0LmNvdW50fSBmcm9tICR7KGNob29zZU9wdC5mcm9tIGFzIHN0cmluZ1tdKS5tYXAocz0+cy50b1VwcGVyQ2FzZSgpKS5qb2luKFwiLCBcIil9YCk7XG4gICAgICAgICAgaWYgKHBhcnRzLmxlbmd0aCkgc3ViTGluZXMucHVzaChgKipBYmlsaXR5IFNjb3JlczoqKiAke3BhcnRzLmpvaW4oXCIsIFwiKX1gKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIHRoZW4gdHJhaXRzL2VudHJpZXNcbiAgICAgICAgZm9yIChjb25zdCBlbnRyeSBvZiBzci5lbnRyaWVzIHx8IFtdKSB7XG4gICAgICAgICAgc3ViTGluZXMucHVzaChmb3JtYXRFbnRyeShlbnRyeSkpO1xuICAgICAgICAgIHN1YkxpbmVzLnB1c2goXCJcIik7IC8vIG9wdGlvbmFsIGJsYW5rIGxpbmUgYmV0d2VlbiBmZWF0dXJlc1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3Qgc3ViWWFtbCA9IHNlcmlhbGl6ZUZyb250bWF0dGVyKGJ1aWxkRk0oc3IsIFNQRUNJRVNfTUVUQV9ERUZTKSwgU1BFQ0lFU19NRVRBX0RFRlMpO1xuICAgICAgICBvdXQucHVzaCh7XG4gICAgICAgICAgcGF0aDogYCR7c3ViRm9sZGVyfS8ke3NsdWcoc3IubmFtZSl9Lm1kYCxcbiAgICAgICAgICBjb250ZW50OiBgLS0tXFxuJHtzdWJZYW1sfVxcbi0tLVxcblxcbiR7c3ViTGluZXMuam9pbihcIlxcblwiKX1gLFxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgLy8gbm8gc3VicmFjZXMgXHUyMUQyIGEgc2luZ2xlIGZsYXQgZmlsZVxuICAgICAgb3V0LnB1c2goe1xuICAgICAgICBwYXRoOiBgU3BlY2llcy8ke3NhZmVOYW1lfS5tZGAsXG4gICAgICAgIGNvbnRlbnQ6IGAtLS1cXG4ke3lhbWx9XFxuLS0tXFxuXFxuJHtsaW5lcy5qb2luKFwiXFxuXCIpfWAsXG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuICAvLyA1KSBTb3J0ICYgcmV0dXJuXG4gIHJldHVybiBvdXQuc29ydCgoYSwgYikgPT4gYS5wYXRoLmxvY2FsZUNvbXBhcmUoYi5wYXRoKSk7XG59XG4iLCAiLy9jbGFzcyBwYXJzZXIgZG5kIDVlIDIwMTRcblxuaW1wb3J0IHR5cGUgeyBQYXJzZWRNYXJrZG93bkZpbGUgfSBmcm9tIFwiLi4vLi4vdHlwZXNcIjtcbmltcG9ydCB7IFxuICBidWlsZEZNLCBcbiAgc2VyaWFsaXplRnJvbnRtYXR0ZXIsIFxuICBDTEFTU19NRVRBX0RFRlMsIFxuICB1bmlmaWVkVG9vbFByb2ZzLCBcbiAgdW5pZmllZFdlYXBvblByb2ZzLCBcbiAgU2tpbGxPcHRpb24sXG4gIHVuaWZpZWRTa2lsbHMsXG4gIFNLSUxMX09QVElPTlMsIFxuICBGTV9GSUVMRFNcbn0gZnJvbSBcIi4vaGVscGVycy9mcm9udG1hdHRlclwiO1xuaW1wb3J0IHsgcmVuZGVyTWFya2Rvd25UYWJsZSB9IGZyb20gXCIuL2hlbHBlcnMvbWFya2Rvd25UYWJsZVwiO1xuaW1wb3J0IHsgcmVwbGFjZTVlVGFncyB9IGZyb20gXCIuL2hlbHBlcnMvdGFnUmVwbGFjZXJcIjtcbmltcG9ydCB7IGZvcm1hdEVudHJ5IH0gZnJvbSBcIi4vaGVscGVycy9mb3JtYXRFbnRyeVwiO1xuXG5mdW5jdGlvbiBmb3JtYXRGZWF0dXJlTGluayhuYW1lOiBzdHJpbmcpOiBzdHJpbmcge1xuICAgIGNvbnN0IGlnbm9yZSA9IFtcIkFiaWxpdHkgU2NvcmUgSW1wcm92ZW1lbnRcIiwgXCJBcmNoZXR5cGUgRmVhdHVyZVwiLCBcIlN1YmNsYXNzIEZlYXR1cmVcIl07XG4gICAgaWYgKGlnbm9yZS5zb21lKHN1YiA9PiBuYW1lLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoc3ViLnRvTG93ZXJDYXNlKCkpKSkge1xuICAgICAgcmV0dXJuIG5hbWU7XG4gICAgfVxuICBcbiAgICBjb25zdCBhbmNob3IgPSBuYW1lXG4gICAgICAucmVwbGFjZSgvW15cXHdcXHNdL2csIFwiXCIpICAgICAgICAgICAvLyByZW1vdmUgcHVuY3R1YXRpb24gKGtlZXAgc3BhY2VzKVxuICAgICAgLnJlcGxhY2UoLy0vZywgXCIgXCIpICAgICAgICAgICAgICAgIC8vIHJlbW92ZSBkYXNoZXNcbiAgICAgIC5yZXBsYWNlKC9cXHMrL2csIFwiIFwiKSAgICAgICAgICAgICAgLy8gbm9ybWFsaXplIHdoaXRlc3BhY2VcbiAgICAgIC50cmltKClcbiAgICAgIC5yZXBsYWNlKC9cXGJcXHcvZywgbCA9PiBsLnRvVXBwZXJDYXNlKCkpOyAvLyBjYXBpdGFsaXplIHdvcmRzXG4gIFxuICAgIHJldHVybiBgW1sjJHthbmNob3J9XV1gO1xuICB9XG5mdW5jdGlvbiB0b0hlYWRlckFuY2hvcihuYW1lOiBzdHJpbmcpOiBzdHJpbmcge1xuICByZXR1cm4gbmFtZVxuICAgIC5yZXBsYWNlKC9bXlxcd1xcc10vZywgXCJcIilcbiAgICAucmVwbGFjZSgvLS9nLCBcIiBcIilcbiAgICAucmVwbGFjZSgvXFxzKy9nLCBcIiBcIilcbiAgICAudHJpbSgpXG4gICAgLnJlcGxhY2UoL1xcYlxcdy9nLCBsID0+IGwudG9VcHBlckNhc2UoKSk7XG59ICBcbmV4cG9ydCBjb25zdCBPUFRfRkVBVFVSRV9UWVBFX1RPX0ZVTEw6IFJlY29yZDxzdHJpbmcsc3RyaW5nPiA9IHtcbiAgQUk6ICAgXCJBcnRpZmljZXIgSW5mdXNpb25cIixcbiAgRUQ6ICAgXCJFbGVtZW50YWwgRGlzY2lwbGluZVwiLFxuICBFSTogICBcIkVsZHJpdGNoIEludm9jYXRpb25cIixcbiAgTU06ICAgXCJNZXRhbWFnaWNcIixcbiAgTVY6ICAgXCJNYW5ldXZlclwiLFxuICBcIk1WOkJcIjogICAgXCJNYW5ldXZlciwgQmF0dGxlIE1hc3RlclwiLFxuICBcIk1WOkMyLVVBXCI6XCJNYW5ldXZlciwgQ2F2YWxpZXIgVjIgKFVBKVwiLFxuICBcIkFTOlYxLVVBXCI6XCJBcmNhbmUgU2hvdCwgVjEgKFVBKVwiLFxuICBcIkFTOlYyLVVBXCI6XCJBcmNhbmUgU2hvdCwgVjIgKFVBKVwiLFxuICBBUzogICBcIkFyY2FuZSBTaG90XCIsXG4gIE9USDogIFwiT3RoZXJcIixcbiAgXCJGUzpGXCI6XCJGaWdodGluZyBTdHlsZTsgRmlnaHRlclwiLFxuICBcIkZTOkJcIjpcIkZpZ2h0aW5nIFN0eWxlOyBCYXJkXCIsXG4gIFwiRlM6UFwiOlwiRmlnaHRpbmcgU3R5bGU7IFBhbGFkaW5cIixcbiAgXCJGUzpSXCI6XCJGaWdodGluZyBTdHlsZTsgUmFuZ2VyXCIsXG4gIFBCOiAgIFwiUGFjdCBCb29uXCIsXG4gIE9SOiAgIFwiT25vbWFuY3kgUmVzb25hbnRcIixcbiAgUk46ICAgXCJSdW5lIEtuaWdodCBSdW5lXCIsXG4gIEFGOiAgIFwiQWxjaGVtaWNhbCBGb3JtdWxhXCIsXG4gIFRUOiAgIFwiVHJhdmVsZXIncyBUcmlja1wiLFxufTtcbiAgXG4gIGZ1bmN0aW9uIHJlbmRlckVudHJpZXMoZW50cmllczogYW55W10pOiBzdHJpbmcge1xuICAgIHJldHVybiBlbnRyaWVzLm1hcCgoZW50cnkpID0+IHtcbiAgICAgIGlmICh0eXBlb2YgZW50cnkgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgcmV0dXJuIHJlcGxhY2U1ZVRhZ3MoZW50cnkpO1xuICAgICAgfVxuICBcbiAgICAgIGlmICh0eXBlb2YgZW50cnkgPT09IFwib2JqZWN0XCIpIHtcbiAgICAgICAgaWYgKGVudHJ5LnR5cGUgPT09IFwicmVmQ2xhc3NGZWF0dXJlXCIpIHtcbiAgICAgICAgICBjb25zdCBbbmFtZV0gPSBlbnRyeS5jbGFzc0ZlYXR1cmUuc3BsaXQoXCJ8XCIpO1xuICAgICAgICAgIHJldHVybiBgKlNlZSBmZWF0dXJlOiAqKiR7bmFtZX0qKipgO1xuICAgICAgICB9XG4gIFxuICAgICAgICBpZiAoZW50cnkudHlwZSA9PT0gXCJlbnRyaWVzXCIgJiYgZW50cnkubmFtZSkge1xuICAgICAgICAgIGNvbnN0IGlubmVyID0gcmVuZGVyRW50cmllcyhlbnRyeS5lbnRyaWVzIHx8IFtdKTtcbiAgICAgICAgICByZXR1cm4gYCoqJHtlbnRyeS5uYW1lfSoqXFxuXFxuJHtpbm5lcn1gO1xuICAgICAgICB9XG4gIFxuICAgICAgICBpZiAoZW50cnkudHlwZSA9PT0gXCJpbnNldFwiICYmIGVudHJ5Lm5hbWUpIHtcbiAgICAgICAgICBjb25zdCBpbm5lciA9IHJlbmRlckVudHJpZXMoZW50cnkuZW50cmllcyB8fCBbXSk7XG4gICAgICAgICAgcmV0dXJuIGA+ICoqJHtlbnRyeS5uYW1lfSoqXFxuPlxcbj4gJHtpbm5lci5zcGxpdChcIlxcblwiKS5qb2luKFwiXFxuPiBcIil9YDtcbiAgICAgICAgfVxuICBcbiAgICAgICAgLy8gZmFsbGJhY2tcbiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoZW50cnkuZW50cmllcykpIHtcbiAgICAgICAgICByZXR1cm4gcmVuZGVyRW50cmllcyhlbnRyeS5lbnRyaWVzKTtcbiAgICAgICAgfVxuICAgICAgfVxuICBcbiAgICAgIHJldHVybiBcIlwiO1xuICAgIH0pLmZpbHRlcihCb29sZWFuKS5qb2luKFwiXFxuXCIpO1xuICB9XG4gIFxuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlQ2xhc3NGaWxlKFxuICBqc29uOiBhbnksXG4gIGVkaXRpb25JZDogc3RyaW5nLFxuICBmaWxlTmFtZTogc3RyaW5nLFxuICBvcHRpb25hbEZlYXR1cmVzOiBhbnlbXVxuKTogUGFyc2VkTWFya2Rvd25GaWxlW10ge1xuICAvLyBtYWtlIGVkaXRpb25JZCBhdmFpbGFibGUgZm9yIGZyb250bWF0dGVyXG4gIChqc29uIGFzIGFueSkuX2VkaXRpb25JZCA9IGVkaXRpb25JZDtcblxuICAvLyB1bndyYXAgdGhlIHJlYWwgY2xhc3MgcmVjb3JkXG4gIGNvbnN0IGNscyA9IEFycmF5LmlzQXJyYXkoanNvbi5jbGFzcykgPyBqc29uLmNsYXNzWzBdIDoganNvbjtcbiAgLy8gZGVyaXZlIHRoZSBNYXJrZG93biBmaWxlbmFtZVxuICBjb25zdCBjbGFzc05hbWUgPVxuICAgIHR5cGVvZiBjbHMubmFtZSA9PT0gXCJzdHJpbmdcIlxuICAgICAgPyBjbHMubmFtZVxuICAgICAgOiBmaWxlTmFtZVxuICAgICAgPyBmaWxlTmFtZS5yZXBsYWNlKC9eY2xhc3MtLywgXCJcIikucmVwbGFjZSgvXFwuanNvbiQvLCBcIlwiKVxuICAgICAgOiBcIlVua25vd25cIjtcblxuICBjb25zdCBzdWJjbGFzc0ZpbGVzOiBQYXJzZWRNYXJrZG93bkZpbGVbXSA9IFtdO1xuXG4gIGNvbnN0IFBST0ZfQk9OVVNfQllfTEVWRUwgPSBbXG4gICAgXCIrMlwiLCBcIisyXCIsIFwiKzJcIiwgXCIrMlwiLFxuICAgIFwiKzNcIiwgXCIrM1wiLCBcIiszXCIsIFwiKzNcIixcbiAgICBcIis0XCIsIFwiKzRcIiwgXCIrNFwiLCBcIis0XCIsXG4gICAgXCIrNVwiLCBcIis1XCIsIFwiKzVcIiwgXCIrNVwiLFxuICAgIFwiKzZcIiwgXCIrNlwiLCBcIis2XCIsIFwiKzZcIlxuICBdO1xuICBcbiAgLy8gbm9ybWFsaXplIGhpdFx1MjAxMGRpY2VcbiAgY29uc3QgaGROdW0gICA9IGNscy5oZD8ubnVtYmVyID8/IDE7XG4gIGNvbnN0IGhkRmFjZXMgPSBjbHMuaGQ/LmZhY2VzICA/PyA2O1xuICBjb25zdCBoZFN0ciAgID0gYCR7aGROdW19ZCR7aGRGYWNlc31gO1xuICBjb25zdCBoZE1heCAgID0gaGROdW0gKiBoZEZhY2VzO1xuICBjb25zdCBoZEF2ZyAgID0gTWF0aC5jZWlsKChoZEZhY2VzICsgMSkgLyAyKTtcblxuY29uc3QgYmFzZUZNID0gYnVpbGRGTShjbHMsIENMQVNTX01FVEFfREVGUyk7XG5jb25zdCBmbSAgICAgPSB7IC4uLmJhc2VGTSwgaGQ6IGhkU3RyIH07XG5jb25zdCB5YW1sICAgPSBzZXJpYWxpemVGcm9udG1hdHRlcihmbSwgQ0xBU1NfTUVUQV9ERUZTKTtcblxuLy8gMSkgRGVjbGFyZSB5b3VyIGxpbmVzIGJ1ZmZlciBpbW1lZGlhdGVseVxuY29uc3QgbGluZXM6IHN0cmluZ1tdID0gW107XG5cbi8vIDQpIE5vdyBjYXJyeSBvbiB3aXRoIHRoZSByZXN0IG9mIHlvdXIgYm9keVxubGluZXMucHVzaChgIyAke2NsYXNzTmFtZX1gKTtcbmlmIChjbHMuc291cmNlKSBsaW5lcy5wdXNoKGAqKlNvdXJjZToqKiAke2Nscy5zb3VyY2V9YCk7XG5saW5lcy5wdXNoKGBgKTtcbmxpbmVzLnB1c2goYC0tLWApO1xuXG4gIC8vIFx1MjUwMFx1MjUwMFx1MjUwMCBIaXQgUG9pbnRzIFx1MjUwMFx1MjUwMFx1MjUwMFxuICBsaW5lcy5wdXNoKGAjIyBIaXQgUG9pbnRzYCk7XG4gIGxpbmVzLnB1c2goYCoqSGl0IERpY2U6KiogJHtoZFN0cn0gcGVyICR7Y2xhc3NOYW1lfSBsZXZlbGApO1xuICBsaW5lcy5wdXNoKGAqKkhpdCBQb2ludHMgYXQgMXN0IExldmVsOioqICR7aGRNYXh9ICsgeW91ciBDb25zdGl0dXRpb24gbW9kaWZpZXJgKTtcbiAgbGluZXMucHVzaChcbiAgICBgKipIaXQgUG9pbnRzIGF0IEhpZ2hlciBMZXZlbHM6KiogJHtoZFN0cn0gKG9yICR7aGRBdmd9KSArIHlvdXIgQ29uc3RpdHV0aW9uIG1vZGlmaWVyIHBlciBsZXZlbCBhZnRlciAxc3RgXG4gICk7XG5cbi8vIFx1MjUwMFx1MjUwMFx1MjUwMCBQcm9maWNpZW5jaWVzIFx1MjUwMFx1MjUwMFx1MjUwMFxubGluZXMucHVzaChgYCk7XG5saW5lcy5wdXNoKGAtLS1gKTtcbmxpbmVzLnB1c2goYCMjIFByb2ZpY2llbmNpZXNgKTtcblxuY29uc3Qgc3AgPSBjbHMuc3RhcnRpbmdQcm9maWNpZW5jaWVzID8/IHt9O1xuXG4vLyBBcm1vclxuaWYgKEFycmF5LmlzQXJyYXkoc3AuYXJtb3IpICYmIHNwLmFybW9yLmxlbmd0aCkge1xuICBsaW5lcy5wdXNoKGAtICoqQXJtb3I6KiogJHtzcC5hcm1vci5qb2luKFwiLCBcIil9YCk7XG59XG5cbi8vIFdlYXBvbnNcbmNvbnN0IHdlYXBvbkxpc3QgPSB1bmlmaWVkV2VhcG9uUHJvZnMoc3ApO1xuaWYgKHdlYXBvbkxpc3QubGVuZ3RoKSB7XG4gIGxpbmVzLnB1c2goYC0gKipXZWFwb25zOioqICR7d2VhcG9uTGlzdC5qb2luKFwiLCBcIil9YCk7XG59XG5cbi8vIFRvb2xzXG5jb25zdCB0b29sTGlzdCA9IHVuaWZpZWRUb29sUHJvZnMoc3ApO1xuaWYgKHRvb2xMaXN0Lmxlbmd0aCkge1xuICBsaW5lcy5wdXNoKGAtICoqVG9vbHM6KiogJHt0b29sTGlzdC5qb2luKFwiLCBcIil9YCk7XG59XG5cbi8vIFNhdmluZyBUaHJvd3NcbmNvbnN0IHNhdmVzID0gQXJyYXkuaXNBcnJheShjbHMucHJvZmljaWVuY3kpXG4gID8gY2xzLnByb2ZpY2llbmN5Lm1hcCgoazogc3RyaW5nKSA9PlxuICAgICAgKHsgc3RyOlwiU3RyZW5ndGhcIiwgZGV4OlwiRGV4dGVyaXR5XCIsIGNvbjpcIkNvbnN0aXR1dGlvblwiLFxuICAgICAgICAgaW50OlwiSW50ZWxsaWdlbmNlXCIsIHdpczpcIldpc2RvbVwiLCBjaGE6XCJDaGFyaXNtYVwiIH1ba10gfHwgay50b1VwcGVyQ2FzZSgpKVxuICAgIClcbiAgOiBbXTtcbmlmIChzYXZlcy5sZW5ndGgpIHtcbiAgbGluZXMucHVzaChgLSAqKlNhdmluZyBUaHJvd3M6KiogJHtzYXZlcy5qb2luKFwiLCBcIil9YCk7XG59XG5cblxuLy8gXHUyNTAwXHUyNTAwXHUyNTAwIFNraWxscyBcdTI1MDBcdTI1MDBcdTI1MDBcbntcbiAgLy8gMSkgZ3JhYiB3aGF0ZXZlciBhcnJheSBob2xkcyB0aGUgcmF3IG9iamVjdHMvc3RyaW5nc1xuICBjb25zdCByYXdTa2lsbHM6IGFueVtdID1cbiAgICBBcnJheS5pc0FycmF5KHNwLnNraWxsUHJvZmljaWVuY2llcykgPyBzcC5za2lsbFByb2ZpY2llbmNpZXNcbiAgICA6IEFycmF5LmlzQXJyYXkoc3Auc2tpbGxzKSAgICAgICAgICAgICA/IHNwLnNraWxsc1xuICAgIDogQXJyYXkuaXNBcnJheShzcC5za2lsbFByb2YpICAgICAgICAgID8gc3Auc2tpbGxQcm9mXG4gICAgOiBbXTtcblxuICAvLyAyKSBsb29rIGZvciB0aGUgXHUyMDFDY2hvb3NlIE4gZnJvbSBbXHUyMDI2XVx1MjAxRCBlbnRyeVxuICBjb25zdCBjaG9pY2VFbnRyeSA9IHJhd1NraWxscy5maW5kKFxuICAgIGUgPT4gZSAmJlxuICAgICAgICAgKHR5cGVvZiBlLmNob29zZSA9PT0gXCJvYmplY3RcIiB8fCB0eXBlb2YgZS5hbnkgPT09IFwibnVtYmVyXCIpXG4gICk7XG5cbiAgaWYgKGNob2ljZUVudHJ5KSB7XG4gICAgLy8gaG93IG1hbnkgdG8gY2hvb3NlXG4gICAgY29uc3QgY291bnQgPSBjaG9pY2VFbnRyeS5jaG9vc2U/LmNvdW50ID8/IGNob2ljZUVudHJ5LmFueSA/PyAxO1xuXG4gICAgLy8gcHVsbCB0aGUgYWN0dWFsIGxpc3Qgb2Ygb3B0aW9ucywgb3IgZmFsbCBiYWNrIHRvIHRoZSBnbG9iYWwgU0tJTExfT1BUSU9OU1xuICAgIGNvbnN0IG9wdGlvbnM6IHN0cmluZ1tdID0gQXJyYXkuaXNBcnJheShjaG9pY2VFbnRyeS5jaG9vc2U/LmZyb20pXG4gICAgICA/IGNob2ljZUVudHJ5LmNob29zZS5mcm9tLm1hcCgoczogc3RyaW5nKSA9PlxuICAgICAgICAgIC8vIHRpdGxlLWNhc2UgZWFjaCB3b3JkIChvciBqdXN0IHVzZSBzKVxuICAgICAgICAgIHMuc3BsaXQoXCIgXCIpLm1hcCh3ID0+IHdbMF0udG9VcHBlckNhc2UoKSArIHcuc2xpY2UoMSkpLmpvaW4oXCIgXCIpXG4gICAgICAgIClcbiAgICAgIDogU0tJTExfT1BUSU9OUztcblxuICAgIGxpbmVzLnB1c2goYC0gKipTa2lsbHMgKENob29zZSAke2NvdW50fSk6KiogJHtvcHRpb25zLmpvaW4oXCIsIFwiKX1gKTtcblxuICB9IGVsc2Uge1xuICAgIC8vIG5vIGNob29zZS1mcm9tIG9iamVjdCBcdTIxOTIgZmxhdCBsaXN0IGZyb20geW91ciB1bmlmaWVkIGhlbHBlclxuICAgIGNvbnN0IGZsYXQgPSB1bmlmaWVkU2tpbGxzKHNwKTtcbiAgICBpZiAoZmxhdC5sZW5ndGgpIHtcbiAgICAgIGxpbmVzLnB1c2goYC0gKipTa2lsbHM6KiogJHtmbGF0LmpvaW4oXCIsIFwiKX1gKTtcbiAgICB9XG4gIH1cbn1cblxuXG5cbiAgLy8gXHUyNTAwXHUyNTAwXHUyNTAwIEVxdWlwbWVudCBcdTI1MDBcdTI1MDBcdTI1MDBcbiAgaWYgKEFycmF5LmlzQXJyYXkoY2xzLnN0YXJ0aW5nRXF1aXBtZW50KSkge1xuICAgIGxpbmVzLnB1c2goYFxcbiMjIyBFcXVpcG1lbnRgKTtcbiAgICBjbHMuc3RhcnRpbmdFcXVpcG1lbnRcbiAgICAgIC5maWx0ZXIoKGU6IGFueSkgPT4gdHlwZW9mIGUgPT09IFwic3RyaW5nXCIpXG4gICAgICAuZm9yRWFjaCgoaXRlbTogc3RyaW5nKSA9PiBsaW5lcy5wdXNoKGAtICR7aXRlbX1gKSk7XG4gIH1cblxuLy8gXHUyNTAwXHUyNTAwXHUyNTAwIENsYXNzIFByb2dyZXNzaW9uIFx1MjUwMFx1MjUwMFx1MjUwMFxuY29uc3QgcHJvZ0dyb3VwcyA9IGNscy5jbGFzc1RhYmxlR3JvdXBzID8/IFtdO1xuY29uc3QgbWF4TGV2ZWwgPSAyMDtcblxuaWYgKCFwcm9nR3JvdXBzLmxlbmd0aCkge1xuICBsaW5lcy5wdXNoKGAqKE5vIGNsYXNzIHRhYmxlIHByb3ZpZGVkIGZvciB0aGlzIGNsYXNzLikqYCk7XG59IGVsc2Uge1xuICAvLyAxKSBCdWlsZCBsZXZlbCBcdTIxOTIgZmVhdHVyZSBtYXBcbiAgY29uc3QgZmVhdHVyZXNCeUxldmVsOiBSZWNvcmQ8bnVtYmVyLCBzdHJpbmdbXT4gPSB7fTtcbiAgZm9yIChjb25zdCBmZWF0IG9mIGNscy5jbGFzc0ZlYXR1cmVzID8/IFtdKSB7XG4gICAgY29uc3QgcmF3ID0gdHlwZW9mIGZlYXQgPT09IFwib2JqZWN0XCIgJiYgZmVhdC5jbGFzc0ZlYXR1cmUgPyBmZWF0LmNsYXNzRmVhdHVyZSA6IFN0cmluZyhmZWF0KTtcbiAgICBjb25zdCBbbmFtZSwsICxsdmxTdHJdID0gcmF3LnNwbGl0KFwifFwiKTtcbiAgICBjb25zdCBsdmwgPSBOdW1iZXIobHZsU3RyID8/IDApO1xuICAgIGlmICghZmVhdHVyZXNCeUxldmVsW2x2bF0pIGZlYXR1cmVzQnlMZXZlbFtsdmxdID0gW107XG4gICAgZmVhdHVyZXNCeUxldmVsW2x2bF0ucHVzaChuYW1lKTtcbiAgfVxuXG4gIC8vIDIpIEdhdGhlciBldmVyeSBjb2x1bW4gbGFiZWwgJiByb3cgdmFsdWVcbiAgY29uc3QgYWxsTGFiZWxzU2V0ID0gbmV3IFNldDxzdHJpbmc+KCk7XG4gIGNvbnN0IHJvd01hcHM6IFJlY29yZDxudW1iZXIsIFJlY29yZDxzdHJpbmcsIHN0cmluZz4+ID0ge307XG5cbiAgZm9yIChjb25zdCBncm91cCBvZiBwcm9nR3JvdXBzKSB7XG4gICAgY29uc3QgbGFiZWxzID0gQXJyYXkuaXNBcnJheShncm91cC5jb2xMYWJlbHMpXG4gICAgICA/IGdyb3VwLmNvbExhYmVscy5tYXAoKGw6IHN0cmluZykgPT4gcmVwbGFjZTVlVGFncyhsKSlcbiAgICAgIDogW107XG4gICAgY29uc3Qgcm93cyA9IEFycmF5LmlzQXJyYXkoZ3JvdXAucm93cylcbiAgICAgID8gZ3JvdXAucm93c1xuICAgICAgOiBBcnJheS5pc0FycmF5KGdyb3VwLnJvd3NTcGVsbFByb2dyZXNzaW9uKVxuICAgICAgICA/IGdyb3VwLnJvd3NTcGVsbFByb2dyZXNzaW9uXG4gICAgICAgIDogW107XG5cbiAgICBpZiAoIWxhYmVscy5sZW5ndGggfHwgIXJvd3MubGVuZ3RoKSBjb250aW51ZTtcblxuICAgIGZvciAobGV0IGx2bCA9IDA7IGx2bCA8IHJvd3MubGVuZ3RoOyBsdmwrKykge1xuICAgICAgY29uc3QgbGV2ZWxOdW0gPSBsdmwgKyAxO1xuICAgICAgaWYgKCFyb3dNYXBzW2xldmVsTnVtXSkgcm93TWFwc1tsZXZlbE51bV0gPSB7fTtcbiAgICAgIGNvbnN0IHJvd01hcCA9IHJvd01hcHNbbGV2ZWxOdW1dO1xuICAgICAgY29uc3QgY2VsbHMgPSByb3dzW2x2bF07XG5cbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGFiZWxzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGNvbnN0IGxhYmVsID0gbGFiZWxzW2ldO1xuICAgICAgICBsZXQgdmFsID0gXCJcIjtcbiAgICAgICAgY29uc3QgY2VsbCA9IGNlbGxzW2ldO1xuXG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KGNlbGwpKSB7XG4gICAgICAgICAgdmFsID0gY2VsbC5qb2luKFwiLCBcIik7XG4gICAgICAgIH0gZWxzZSBpZiAoY2VsbCAmJiB0eXBlb2YgY2VsbCA9PT0gXCJvYmplY3RcIiAmJiBcInZhbHVlXCIgaW4gY2VsbCkge1xuICAgICAgICAgIHZhbCA9IFN0cmluZyhjZWxsLnZhbHVlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB2YWwgPSBTdHJpbmcoY2VsbCA/PyBcIlwiKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGFsbExhYmVsc1NldC5hZGQobGFiZWwpO1xuICAgICAgICByb3dNYXBbbGFiZWxdID0gdmFsO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8vIDMpICoqRmlsdGVyIG91dCoqIGFueSBzcGVsbFx1MjAxMHRhYmxlIGNvbHVtbnNcbiAgY29uc3QgYWxsTGFiZWxzID0gQXJyYXkuZnJvbShhbGxMYWJlbHNTZXQpLmZpbHRlcihsYmwgPT5cbiAgICAhL0NhbnRyaXBzIEtub3dufFNwZWxscyBLbm93bnxcXGQrKHN0fG5kfHJkfHRoKS8udGVzdChsYmwpXG4gICk7XG5cbiAgLy8gNCkgQnVpbGQgZmluYWwgaGVhZGVyICYgcm93c1xuICBjb25zdCBtZXJnZWRMYWJlbHMgPSBbXCJMZXZlbFwiLCBcIlByb2ZpY2llbmN5IEJvbnVzXCIsIFwiQ2xhc3MgRmVhdHVyZXNcIiwgLi4uYWxsTGFiZWxzXTtcbiAgY29uc3QgbWVyZ2VkUm93czogc3RyaW5nW11bXSA9IFtdO1xuXG4gIGZvciAobGV0IGx2bCA9IDE7IGx2bCA8PSBtYXhMZXZlbDsgbHZsKyspIHtcbiAgICBjb25zdCBmZWF0dXJlTGlzdCA9IChmZWF0dXJlc0J5TGV2ZWxbbHZsXSA/PyBbXSkubWFwKGZvcm1hdEZlYXR1cmVMaW5rKTtcbiAgICBjb25zdCByb3dNYXAgPSByb3dNYXBzW2x2bF0gPz8ge307XG5cbiAgICBtZXJnZWRSb3dzLnB1c2goW1xuICAgICAgbHZsLnRvU3RyaW5nKCksXG4gICAgICBQUk9GX0JPTlVTX0JZX0xFVkVMW2x2bCAtIDFdIHx8IFwiXCIsXG4gICAgICBmZWF0dXJlTGlzdC5qb2luKFwiLCBcIikucmVwbGFjZSgvXFx8L2csIFwiJiMxMjQ7XCIpLFxuICAgICAgLi4uYWxsTGFiZWxzLm1hcChsYWJlbCA9PiByb3dNYXBbbGFiZWxdID8/IFwiXCIpXG4gICAgXSk7XG4gIH1cblxuICAvLyA1KSBSZW5kZXIgdGhlIGZlYXR1cmVzXHUyMDEwb25seSB0YWJsZVxubGluZXMucHVzaChgXFxuPiBbIWV4YW1wbGVdLSBDbGFzcyBQcm9ncmVzc2lvbiBUYWJsZWApO1xubGluZXMucHVzaChcbiAgcmVuZGVyTWFya2Rvd25UYWJsZSh7XG4gICAgdHlwZTogICAgICBcInRhYmxlXCIsXG4gICAgY2FwdGlvbjogICBcIlwiLFxuICAgIGNvbExhYmVsczogbWVyZ2VkTGFiZWxzLFxuICAgIHJvd3M6ICAgICAgbWVyZ2VkUm93cyxcbiAgfSkpO1xufVxuXG4vLyBcdTI1MDBcdTI1MDBcdTI1MDAgU3BlbGwgUHJvZ3Jlc3Npb24gXHUyNTAwXHUyNTAwXHUyNTAwXG4vLyAxKSBmaW5kIHRoZSB0d28gZ3JvdXBzXG5jb25zdCBjc0dyb3VwID0gcHJvZ0dyb3Vwcy5maW5kKChnOiBhbnkpID0+XG4gIEFycmF5LmlzQXJyYXkoZy5jb2xMYWJlbHMpICYmXG4gIGcuY29sTGFiZWxzLnNvbWUoKGxibDogYW55KSA9PiAvQ2FudHJpcHMgS25vd258U3BlbGxzIEtub3duLy50ZXN0KFN0cmluZyhsYmwpKSlcbik7XG5jb25zdCBzbG90R3JvdXAgPSBwcm9nR3JvdXBzLmZpbmQoKGc6IGFueSkgPT5cbiAgQXJyYXkuaXNBcnJheShnLmNvbExhYmVscykgJiZcbiAgZy50aXRsZSA9PT0gXCJTcGVsbCBTbG90cyBwZXIgU3BlbGwgTGV2ZWxcIlxuKTtcblxuaWYgKGNzR3JvdXAgJiYgc2xvdEdyb3VwKSB7XG4gIC8vIDIpIHJhdyBsYWJlbHNcbiAgY29uc3QgY3NMYWJlbHMgICA9IChjc0dyb3VwLmNvbExhYmVscyBhcyBzdHJpbmdbXSkubWFwKGwgPT4gcmVwbGFjZTVlVGFncyhsKSk7XG4gIGNvbnN0IHNsb3RMYWJlbHMgPSAoc2xvdEdyb3VwLmNvbExhYmVscyBhcyBzdHJpbmdbXSkubWFwKGwgPT4gcmVwbGFjZTVlVGFncyhsKSk7XG5cbiAgLy8gMykgcmF3IHJvd3NcbiAgY29uc3QgY3NSb3dzICAgPSAoY3NHcm91cC5yb3dzICAgICAgYXMgYW55W11bXSkgICAgICAgICAgICAgIHx8IFtdO1xuICBjb25zdCBzbG90Um93cyA9IChzbG90R3JvdXAucm93c1NwZWxsUHJvZ3Jlc3Npb24gYXMgYW55W11bXSkgfHwgW107XG5cbiAgLy8gNCkgYnVpbGQgaGVhZGVyOiBMZXZlbCArIGNhbnRyaXBzL3NwZWxscyArIGVhY2ggc2xvdCBsZXZlbFxuICBjb25zdCBjb2xMYWJlbHMgPSBbXCJMZXZlbFwiLCAuLi5jc0xhYmVscywgLi4uc2xvdExhYmVsc107XG5cbiAgLy8gNSkgYnVpbGQgZWFjaCByb3cgYnkgemlwcGluZyBjc1Jvd3NbaV0gKyBzbG90Um93c1tpXVxuICBjb25zdCBzcGVsbFJvd3M6IHN0cmluZ1tdW10gPSBbXTtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBNYXRoLm1heChjc1Jvd3MubGVuZ3RoLCBzbG90Um93cy5sZW5ndGgpOyBpKyspIHtcbiAgICBjb25zdCBsdmwgPSBTdHJpbmcoaSArIDEpO1xuICAgIGNvbnN0IGNzQ2VsbHMgICA9IGNzUm93c1tpXSAgID8gY3NSb3dzW2ldLm1hcChTdHJpbmcpICAgOiBjc0xhYmVscy5tYXAoXyA9PiBcIlwiKTtcbiAgICBjb25zdCBzbG90Q2VsbHMgPSBzbG90Um93c1tpXSA/IHNsb3RSb3dzW2ldLm1hcChTdHJpbmcpIDogc2xvdExhYmVscy5tYXAoXyA9PiBcIlwiKTtcbiAgICBzcGVsbFJvd3MucHVzaChbbHZsLCAuLi5jc0NlbGxzLCAuLi5zbG90Q2VsbHNdKTtcbiAgfVxuXG4gIC8vIDYpIHJlbmRlciFcbiAgbGluZXMucHVzaChgXFxuPiBbIXRpcF0tIFNwZWxsIFByb2dyZXNzaW9uIFRhYmxlYCk7XG4gIGxpbmVzLnB1c2goXG4gICAgcmVuZGVyTWFya2Rvd25UYWJsZSh7XG4gICAgICB0eXBlOiAgICAgIFwidGFibGVcIixcbiAgICAgIGNhcHRpb246ICAgXCJcIixcbiAgICAgIGNvbExhYmVsczogY29sTGFiZWxzLFxuICAgICAgcm93czogICAgICBzcGVsbFJvd3MsXG4gIH0pKTtcbn1cblxuXG4vLyBcdTI1MDBcdTI1MDBcdTI1MDAgU3ViY2xhc3NlcyBcdTI1MDBcdTI1MDBcdTI1MDBcbmNvbnN0IHN1YnMgPSBBcnJheS5pc0FycmF5KGpzb24uc3ViY2xhc3MpID8ganNvbi5zdWJjbGFzcyA6IFtdO1xuY29uc3Qgc3ViY2xhc3NGZWF0dXJlcyA9IEFycmF5LmlzQXJyYXkoanNvbi5zdWJjbGFzc0ZlYXR1cmUpXG4gID8ganNvbi5zdWJjbGFzc0ZlYXR1cmVcbiAgOiBqc29uLmxvb2t1cD8uc3ViY2xhc3NGZWF0dXJlID8/IFtdO1xuXG5mb3IgKGNvbnN0IHNjIG9mIHN1YnMpIHtcbiAgY29uc3Qgc3ViY2xhc3NOYW1lID0gc2MubmFtZTtcbiAgY29uc3Qgc3ViTGluZXM6IHN0cmluZ1tdID0gW107XG5cbiAgLy8gXHUyNTAwXHUyNTAwXHUyNTAwIEhlYWRlciBtZXRhZGF0YSBcdTI1MDBcdTI1MDBcdTI1MDBcbiAgc3ViTGluZXMucHVzaChgIyAke3N1YmNsYXNzTmFtZX1gKTtcbiAgc3ViTGluZXMucHVzaChgKipQYXJlbnQgQ2xhc3M6KiogW1ske2NsYXNzTmFtZX1dXWApO1xuICBpZiAoc2Muc291cmNlKSBzdWJMaW5lcy5wdXNoKGAqKlNvdXJjZToqKiAke3NjLnNvdXJjZX1gKTtcbiAgc3ViTGluZXMucHVzaChgYCk7IC8vIGJsYW5rIGxpbmVcblxuICAvLyBcdTI1MDBcdTI1MDBcdTI1MDAgSW50cm8gZW50cnkgKGxldmVsIDMgZmVhdHVyZSBkZXNjcmlwdGlvbikgXHUyNTAwXHUyNTAwXHUyNTAwXG4gIGNvbnN0IGludHJvID0gc3ViY2xhc3NGZWF0dXJlcy5maW5kKChmOiBhbnkpID0+XG4gICAgZi5uYW1lID09PSBzYy5uYW1lICYmXG4gICAgZi5sZXZlbCA9PT0gMyAmJlxuICAgIGYuc3ViY2xhc3NTaG9ydE5hbWUgPT09IHNjLnNob3J0TmFtZSAmJlxuICAgIGYuc3ViY2xhc3NTb3VyY2UgPT09IHNjLnNvdXJjZVxuICApO1xuICBpZiAoaW50cm8/LmVudHJpZXM/Lmxlbmd0aCkge1xuICAgIGNvbnN0IGludHJvVGV4dCA9IEFycmF5LmlzQXJyYXkoaW50cm8uZW50cmllcylcbiAgICAgID8gaW50cm8uZW50cmllcy5tYXAoKGU6IGFueSkgPT5cbiAgICAgICAgICB0eXBlb2YgZSA9PT0gXCJzdHJpbmdcIiA/IHJlcGxhY2U1ZVRhZ3MoZSkgOiBmb3JtYXRFbnRyeShlKVxuICAgICAgICApLmpvaW4oXCJcXG5cXG5cIilcbiAgICAgIDogZm9ybWF0RW50cnkoaW50cm8uZW50cmllcyk7XG4gICAgc3ViTGluZXMucHVzaChpbnRyb1RleHQsIGBgKTtcbiAgfVxuXG4gIC8vIFx1MjUwMFx1MjUwMFx1MjUwMCBPcHRpb25hbFx1MjAxMGZlYXR1cmUgYmxvY2sgXHUyNTAwXHUyNTAwXHUyNTAwXG4gIGNvbnN0IGNvZGUgPSAoT2JqZWN0LmVudHJpZXMoT1BUX0ZFQVRVUkVfVFlQRV9UT19GVUxMKSBhcyBbc3RyaW5nLHN0cmluZ11bXSlcbiAgICAuZmluZCgoWywgZnVsbF0pID0+XG4gICAgICBmdWxsLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoc3ViY2xhc3NOYW1lLnRvTG93ZXJDYXNlKCkpXG4gICAgKT8uWzBdO1xuICBpZiAoY29kZSkge1xuICAgIGNvbnN0IG1hdGNoZXMgPSBvcHRpb25hbEZlYXR1cmVzLmZpbHRlcihvZiA9PlxuICAgICAgQXJyYXkuaXNBcnJheShvZi5mZWF0dXJlVHlwZSkgJiYgb2YuZmVhdHVyZVR5cGUuaW5jbHVkZXMoY29kZSlcbiAgICApO1xuICAgIGlmIChtYXRjaGVzLmxlbmd0aCkge1xuICAgICAgc3ViTGluZXMucHVzaChgIyMgJHtzdWJjbGFzc05hbWV9IE9wdGlvbmFsIEZlYXR1cmVzYCk7XG4gICAgICBmb3IgKGNvbnN0IGZlYXQgb2YgbWF0Y2hlcykge1xuICAgICAgICBmb3IgKGNvbnN0IGVudHJ5IG9mIGZlYXQuZW50cmllcykge1xuICAgICAgICAgIGNvbnN0IHR4dCA9IHR5cGVvZiBlbnRyeSA9PT0gXCJzdHJpbmdcIlxuICAgICAgICAgICAgPyByZXBsYWNlNWVUYWdzKGVudHJ5KVxuICAgICAgICAgICAgOiBmb3JtYXRFbnRyeShlbnRyeSk7XG4gICAgICAgICAgc3ViTGluZXMucHVzaChgKioke2ZlYXQubmFtZX06KiogJHt0eHR9YCk7XG4gICAgICAgIH1cbiAgICAgICAgc3ViTGluZXMucHVzaChgYCk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLy8gXHUyNTAwXHUyNTAwXHUyNTAwIFN1YmNsYXNzIHByb2dyZXNzaW9uIHRhYmxlIFx1MjUwMFx1MjUwMFx1MjUwMFxuICBjb25zdCBwcm9nID0gc2Muc3ViY2xhc3NUYWJsZUdyb3VwcyA/PyBbXTtcbiAgaWYgKHByb2cubGVuZ3RoKSB7XG4gICAgY29uc3QgbGFiZWxzID0gbmV3IFNldDxzdHJpbmc+KCk7XG4gICAgY29uc3Qgcm93c01hcDogUmVjb3JkPG51bWJlciwgUmVjb3JkPHN0cmluZyxzdHJpbmc+PiA9IHt9O1xuICAgIGZvciAoY29uc3QgZyBvZiBwcm9nKSB7XG4gICAgICBjb25zdCBjb2xzID0gKGcuY29sTGFiZWxzID8/IFtdKS5tYXAocmVwbGFjZTVlVGFncyk7XG4gICAgICBjb25zdCByb3dzID0gQXJyYXkuaXNBcnJheShnLnJvd3MpXG4gICAgICAgID8gZy5yb3dzXG4gICAgICAgIDogQXJyYXkuaXNBcnJheShnLnJvd3NTcGVsbFByb2dyZXNzaW9uKVxuICAgICAgICAgID8gZy5yb3dzU3BlbGxQcm9ncmVzc2lvblxuICAgICAgICAgIDogW107XG4gICAgICByb3dzLmZvckVhY2goKHI6IGFueSwgaTogYW55KSA9PiB7XG4gICAgICAgIGNvbnN0IGx2bCA9IGkgKyAxO1xuICAgICAgICByb3dzTWFwW2x2bF0gPz89IHt9O1xuICAgICAgICByLmZvckVhY2goKGM6IGFueSwgajogbnVtYmVyKSA9PiB7XG4gICAgICAgICAgY29uc3QgbGFiID0gY29sc1tqXTtcbiAgICAgICAgICBpZiAoIWxhYikgcmV0dXJuO1xuICAgICAgICAgIGxhYmVscy5hZGQobGFiKTtcbiAgICAgICAgICByb3dzTWFwW2x2bF1bbGFiXSA9IHR5cGVvZiBjID09PSBcIm9iamVjdFwiICYmIGMgIT09IG51bGwgJiYgXCJ2YWx1ZVwiIGluIGNcbiAgICAgICAgICAgID8gU3RyaW5nKGMudmFsdWUpXG4gICAgICAgICAgICA6IFN0cmluZyhjID8/IFwiXCIpO1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH1cbiAgICBjb25zdCBoZHJzID0gQXJyYXkuZnJvbShsYWJlbHMpO1xuICAgIHN1YkxpbmVzLnB1c2goYCMjIFN1YmNsYXNzIFByb2dyZXNzaW9uYCk7XG4gICAgc3ViTGluZXMucHVzaChyZW5kZXJNYXJrZG93blRhYmxlKHtcbiAgICAgIHR5cGU6ICAgICAgXCJ0YWJsZVwiLFxuICAgICAgY2FwdGlvbjogICBcIlwiLFxuICAgICAgY29sTGFiZWxzOiBbXCJMZXZlbFwiLCAuLi5oZHJzXSxcbiAgICAgIHJvd3M6ICAgICAgQXJyYXkuZnJvbSh7IGxlbmd0aDogMjAgfSwgKF8sIGkpID0+IHtcbiAgICAgICAgY29uc3QgbHZsID0gaSArIDE7XG4gICAgICAgIHJldHVybiBbU3RyaW5nKGx2bCksIC4uLmhkcnMubWFwKGggPT4gcm93c01hcFtsdmxdPy5baF0gPz8gXCJcIildO1xuICAgICAgfSlcbiAgICB9KSk7XG4gIH1cblxuLy8gXHUyNTAwXHUyNTAwXHUyNTAwIERldGFpbGVkIGxldmVsXHUyMDEwYnlcdTIwMTBsZXZlbCBmZWF0dXJlcyBcdTI1MDBcdTI1MDBcdTI1MDBcbmNvbnN0IGZlYXRzQnlMdmw6IFJlY29yZDxudW1iZXIsIGFueVtdPiA9IHt9O1xuZm9yIChjb25zdCBmIG9mIHN1YmNsYXNzRmVhdHVyZXMpIHtcbiAgaWYgKFxuICAgIGYuc3ViY2xhc3NTaG9ydE5hbWUgPT09IHNjLnNob3J0TmFtZSAmJlxuICAgIGYuc3ViY2xhc3NTb3VyY2UgPT09IHNjLnNvdXJjZSAmJlxuICAgIGYuY2xhc3NOYW1lID09PSBjbGFzc05hbWVcbiAgKSB7XG4gICAgY29uc3QgbHZsID0gZi5sZXZlbCA/PyAwO1xuICAgIDsoZmVhdHNCeUx2bFtsdmxdID8/PSBbXSkucHVzaChmKTtcbiAgfVxufVxuXG4vLyBCdWlsZCBzdWJjbGFzcyB0cmFpdHMgKHdpa2lsaW5rcyB0byBoZWFkZXJzIGluIHRoaXMgc3ViY2xhc3MgZmlsZSlcbmNvbnN0IElHTk9SRV9UUkFJVFMgPSBbXCJBYmlsaXR5IFNjb3JlIEltcHJvdmVtZW50XCIsIFwiQXJjaGV0eXBlIEZlYXR1cmVcIiwgXCJTdWJjbGFzcyBGZWF0dXJlXCJdO1xuY29uc3QgdHJhaXROYW1lcyA9IEFycmF5LmZyb20oXG4gIG5ldyBTZXQoXG4gICAgT2JqZWN0LnZhbHVlcyhmZWF0c0J5THZsKVxuICAgICAgLmZsYXQoKVxuICAgICAgLm1hcCgoZjogYW55KSA9PiBTdHJpbmcoZj8ubmFtZSB8fCBcIlwiKS50cmltKCkpXG4gICAgICAuZmlsdGVyKG4gPT4gbiAmJiAhSUdOT1JFX1RSQUlUUy5zb21lKHMgPT4gbi50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKHMudG9Mb3dlckNhc2UoKSkpKVxuICApXG4pO1xuXG5jb25zdCB0cmFpdExpbmtzID0gdHJhaXROYW1lcy5tYXAobiA9PiBgW1ske3N1YmNsYXNzTmFtZX0jJHt0b0hlYWRlckFuY2hvcihuKX18JHtufV1dYCk7XG5cbi8vIE1pbmltYWwgZnJvbnRtYXR0ZXIgZm9yIHN1YmNsYXNzZXM7IEZNX0ZJRUxEUyBrZWVwcyBvcmRlcmluZyBjb25zaXN0ZW50XG5jb25zdCBzdWJZYW1sID0gc2VyaWFsaXplRnJvbnRtYXR0ZXIoeyB0cmFpdHM6IHRyYWl0TGlua3MgfSwgQ0xBU1NfTUVUQV9ERUZTKTtcblxuXG5mb3IgKGNvbnN0IGx2bCBvZiBPYmplY3Qua2V5cyhmZWF0c0J5THZsKS5tYXAoTnVtYmVyKS5zb3J0KChhLGIpPT5hLWIpKSB7XG4gIHN1YkxpbmVzLnB1c2goYC0tLWAsIGAjIyBMZXZlbCAke2x2bH1gKTtcblxuICBmb3IgKGNvbnN0IGYgb2YgZmVhdHNCeUx2bFtsdmxdKSB7XG4gIHN1YkxpbmVzLnB1c2goYCMjIyAke2YubmFtZX1gKTtcblxuICBmb3IgKGNvbnN0IGVudCBvZiBBcnJheS5pc0FycmF5KGYuZW50cmllcykgPyBmLmVudHJpZXMgOiBbZi5lbnRyaWVzXSkge1xuICAgIC8vIDEpIFBsYWluIHBhcmFncmFwaCBlbnRyaWVzXG4gICAgaWYgKHR5cGVvZiBlbnQgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgIHN1YkxpbmVzLnB1c2gocmVwbGFjZTVlVGFncyhlbnQpKTtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cblxuICAgIGlmIChlbnQudHlwZSA9PT0gXCJlbnRyaWVzXCIgJiYgL15NYW5ldXZlcnMkL2kudGVzdChlbnQubmFtZSkpIHtcbiAgICAgIHN1YkxpbmVzLnB1c2goYCMjIyMjICR7ZW50Lm5hbWV9YCk7XG4gICAgICBmb3IgKGNvbnN0IHR4dCBvZiBBcnJheS5pc0FycmF5KGVudC5lbnRyaWVzKSA/IGVudC5lbnRyaWVzIDogW2VudC5lbnRyaWVzXSkge1xuICAgICAgICBzdWJMaW5lcy5wdXNoKHR5cGVvZiB0eHQgPT09IFwic3RyaW5nXCJcbiAgICAgICAgICA/IHJlcGxhY2U1ZVRhZ3ModHh0KVxuICAgICAgICAgIDogZm9ybWF0RW50cnkodHh0KSk7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGNvZGUgPSAoT2JqZWN0LmVudHJpZXMoT1BUX0ZFQVRVUkVfVFlQRV9UT19GVUxMKSBhcyBbc3RyaW5nLHN0cmluZ11bXSlcbiAgICAgICAgLmZpbmQoKFssIGZ1bGxdKSA9PlxuICAgICAgICAgIGZ1bGwudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhzdWJjbGFzc05hbWUudG9Mb3dlckNhc2UoKSlcbiAgICAgICAgKT8uWzBdO1xuICAgICAgaWYgKGNvZGUpIHtcbiAgICAgICAgY29uc3QgbWF0Y2hlcyA9IG9wdGlvbmFsRmVhdHVyZXMuZmlsdGVyKG9mID0+XG4gICAgICAgICAgQXJyYXkuaXNBcnJheShvZi5mZWF0dXJlVHlwZSkgJiYgb2YuZmVhdHVyZVR5cGUuaW5jbHVkZXMoY29kZSlcbiAgICAgICAgKTtcbiAgICAgICAgZm9yIChjb25zdCBmZWF0RGVmIG9mIG1hdGNoZXMpIHtcbiAgICAgICAgICBmb3IgKGNvbnN0IHN1YiBvZiBmZWF0RGVmLmVudHJpZXMpIHtcbiAgICAgICAgICAgIGNvbnN0IGxpbmUgPSB0eXBlb2Ygc3ViID09PSBcInN0cmluZ1wiXG4gICAgICAgICAgICAgID8gcmVwbGFjZTVlVGFncyhzdWIpXG4gICAgICAgICAgICAgIDogZm9ybWF0RW50cnkoc3ViKTtcbiAgICAgICAgICAgIHN1YkxpbmVzLnB1c2goYCoqJHtmZWF0RGVmLm5hbWV9OioqICR7bGluZX1gKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgc3ViTGluZXMucHVzaChcIlwiKTsgLy8gc3BhY2VyXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cblxuICAgIGlmIChlbnQudHlwZSA9PT0gXCJlbnRyaWVzXCIgJiYgZW50Lm5hbWUpIHtcbiAgICAgIHN1YkxpbmVzLnB1c2goYCMjIyMjICR7ZW50Lm5hbWV9YCk7XG4gICAgICBmb3IgKGNvbnN0IGUyIG9mIEFycmF5LmlzQXJyYXkoZW50LmVudHJpZXMpID8gZW50LmVudHJpZXMgOiBbZW50LmVudHJpZXNdKSB7XG4gICAgICAgIHN1YkxpbmVzLnB1c2goZm9ybWF0RW50cnkoZTIpKTtcbiAgICAgIH1cbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cblxuICAgIGlmIChlbnQudHlwZSA9PT0gXCJpbnNldFwiICYmIGVudC5uYW1lKSB7XG4gICAgICBjb25zdCBpbm5lciA9IEFycmF5LmlzQXJyYXkoZW50LmVudHJpZXMpID8gZW50LmVudHJpZXMgOiBbZW50LmVudHJpZXNdO1xuICAgICAgc3ViTGluZXMucHVzaChgPiAqKiR7ZW50Lm5hbWV9KipgKTtcbiAgICAgIGlubmVyLmZvckVhY2goKGUyOiBhbnkpID0+IHN1YkxpbmVzLnB1c2goYD4gJHtmb3JtYXRFbnRyeShlMil9YCkpO1xuICAgICAgY29udGludWU7XG4gICAgfVxuXG4gICAgY29uc3QgZmIgPSBmb3JtYXRFbnRyeShlbnQpO1xuICAgIGlmIChmYikgc3ViTGluZXMucHVzaChmYik7XG4gIH1cbiAgfVxufVxuXG5cbiAgLy8gXHUyNTAwXHUyNTAwXHUyNTAwIENsZWFuIHVwICYgcHVzaCBcdTI1MDBcdTI1MDBcdTI1MDBcbiAgY29uc3Qgc3ViY2xhc3NDb250ZW50Qm9keSA9IHN1YkxpbmVzXG4gICAgLmpvaW4oXCJcXG5cXG5cIilcbiAgICAucmVwbGFjZSgvXFxuezMsfS9nLCBcIlxcblxcblwiKTtcblxuICBjb25zdCBzdWJjbGFzc0NvbnRlbnQgPSBgLS0tXFxuJHtzdWJZYW1sfVxcbi0tLVxcblxcbiR7c3ViY2xhc3NDb250ZW50Qm9keX1gOyAgXG5cbiAgc3ViY2xhc3NGaWxlcy5wdXNoKHtcbiAgICBwYXRoOiBgQ2xhc3Nlcy8ke2NsYXNzTmFtZX0vU3ViY2xhc3Nlcy8ke3N1YmNsYXNzTmFtZX0ubWRgLFxuICAgIGNvbnRlbnQ6IHN1YmNsYXNzQ29udGVudFxuICB9KTtcbn1cblxuXG5cbi8vIFx1MjUwMFx1MjUwMFx1MjUwMCBTdWJjbGFzc2VzIFN1bW1hcnkgXHUyNTAwXHUyNTAwXHUyNTAwXG5pZiAoc3Vicy5sZW5ndGgpIHtcbiAgY29uc3QgbGlua3MgPSBzdWJzLm1hcCgoc2M6IGFueSkgPT5cbiAgICBgW1tTdWJjbGFzc2VzLyR7c2MubmFtZS5yZXBsYWNlKC9bXFxcXC9dL2csIFwiLVwiKX18JHtzYy5uYW1lfV1dYFxuICApO1xuICBsaW5lcy5wdXNoKGBcXG4qKlN1YmNsYXNzZXM6KiogJHtsaW5rcy5qb2luKFwiLCBcIil9YCk7XG59XG5cblxuICAvLyBHZXQgZnVsbCBjbGFzcyBmZWF0dXJlIGRlZmluaXRpb25zXG5jb25zdCBhbGxGZWF0dXJlcyA9IEFycmF5LmlzQXJyYXkoanNvbi5jbGFzc0ZlYXR1cmUpID8ganNvbi5jbGFzc0ZlYXR1cmUgOiBqc29uLmxvb2t1cD8uY2xhc3NGZWF0dXJlID8/IFtdO1xuY29uc3QgZmVhdHVyZXNCeUxldmVsOiBSZWNvcmQ8bnVtYmVyLCBhbnlbXT4gPSB7fTtcblxuZm9yIChjb25zdCBlbnRyeSBvZiBhbGxGZWF0dXJlcykge1xuICBpZiAoZW50cnkuY2xhc3NOYW1lICE9PSBjbGFzc05hbWUpIGNvbnRpbnVlO1xuICBjb25zdCBsdmwgPSBlbnRyeS5sZXZlbCA/PyAwO1xuICBpZiAoIWZlYXR1cmVzQnlMZXZlbFtsdmxdKSBmZWF0dXJlc0J5TGV2ZWxbbHZsXSA9IFtdO1xuICBmZWF0dXJlc0J5TGV2ZWxbbHZsXS5wdXNoKGVudHJ5KTtcbn1cblxuXG4vLyBcdTI1MDBcdTI1MDBcdTI1MDAgTGV2ZWwgRmVhdHVyZXMgXHUyNTAwXHUyNTAwXHUyNTAwXG5saW5lcy5wdXNoKGBgKTtcbmxpbmVzLnB1c2goYC0tLWApO1xubGluZXMucHVzaChgIyMgTGV2ZWwgRmVhdHVyZXNgKTtcblxuY29uc3QgbGV2ZWxzID0gT2JqZWN0XG4gIC5rZXlzKGZlYXR1cmVzQnlMZXZlbClcbiAgLm1hcChuID0+ICtuKVxuICAuc29ydCgoYSwgYikgPT4gYSAtIGIpO1xuXG5mb3IgKGNvbnN0IGx2bCBvZiBsZXZlbHMpIHtcbiAgbGluZXMucHVzaChgIyMjIExldmVsICR7bHZsfWApO1xuXG4gIGZvciAoY29uc3QgZmVhdCBvZiBmZWF0dXJlc0J5TGV2ZWxbbHZsXSkge1xuICAgIC8vIEZlYXR1cmUgaGVhZGVyXG4gICAgbGluZXMucHVzaChgIyMjIyAke2ZlYXQubmFtZX1gKTtcblxuICAgIC8vIEVuc3VyZSBlbnRyaWVzIGlzIGFsd2F5cyBhbiBhcnJheVxuICAgIGNvbnN0IGVudHJpZXMgPSBBcnJheS5pc0FycmF5KGZlYXQuZW50cmllcylcbiAgICAgID8gZmVhdC5lbnRyaWVzXG4gICAgICA6IFtmZWF0LmVudHJpZXNdO1xuXG4gICAgZm9yIChjb25zdCBlbnQgb2YgZW50cmllcykge1xuICAgICAgLy8gMSkgUGxhaW4tdGV4dCBwYXJhZ3JhcGhcbiAgICAgICAgaWYgKHR5cGVvZiBlbnQgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICBjb25zdCB0eHQgPSBmb3JtYXRFbnRyeShlbnQpLnRyaW0oKTtcbiAgICAgICAgICAvLyBza2lwIGFueSBwdXJlLWJyYWNlIGxpbmVzXG4gICAgICAgICAgaWYgKHR4dCA9PT0gXCJ7XCIgfHwgdHh0ID09PSBcIn1cIikgY29udGludWU7XG4gICAgICAgICAgbGluZXMucHVzaCh0eHQpO1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGVudC50eXBlID09PSBcImxpc3RcIiAmJiBBcnJheS5pc0FycmF5KGVudC5pdGVtcykpIHtcbiAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgZW50Lml0ZW1zKSB7XG4gICAgICBsaW5lcy5wdXNoKGAtICR7cmVwbGFjZTVlVGFncyhpdGVtKX1gKTtcbiAgICB9XG4gICAgY29udGludWU7XG4gIH1cbiAgICAgIC8vIFx1MjUwMFx1MjUwMFx1MjUwMCBpbnNpZGUgeW91ciBmb3IgKGNvbnN0IGVudCBvZiBlbnRyaWVzKSBsb29wIFx1MjUwMFx1MjUwMFx1MjUwMFxuICAgICAgaWYgKGVudC50eXBlID09PSBcIm9wdGlvbnNcIikge1xuICBpZiAoZW50LmNvdW50KSB7XG4gICAgbGluZXMucHVzaChcIlwiKTtcbiAgICBsaW5lcy5wdXNoKGAqKkNob29zZSAke2VudC5jb3VudH0gb2YgdGhlIGZvbGxvd2luZyBvcHRpb25zOioqYCk7XG4gICAgbGluZXMucHVzaChcIlwiKTtcbiAgfVxuXG4gIGZvciAoY29uc3Qgb3B0UmVmIG9mIEFycmF5LmlzQXJyYXkoZW50LmVudHJpZXMpID8gZW50LmVudHJpZXMgOiBbZW50LmVudHJpZXNdKSB7XG4gICAgaWYgKG9wdFJlZi50eXBlID09PSBcInJlZk9wdGlvbmFsZmVhdHVyZVwiKSB7XG4gICAgICBjb25zdCBbb3B0TmFtZSwgb3B0U3JjXSA9IG9wdFJlZi5vcHRpb25hbGZlYXR1cmUuc3BsaXQoXCJ8XCIpO1xuICAgICAgY29uc3QgZmVhdERlZiA9IG9wdGlvbmFsRmVhdHVyZXMuZmluZChcbiAgICAgICAgZiA9PiBmLm5hbWUgPT09IG9wdE5hbWUgJiYgKCFvcHRTcmMgfHwgZi5zb3VyY2UgPT09IG9wdFNyYylcbiAgICAgICk7XG5cbiAgICAgIGlmIChmZWF0RGVmKSB7XG4gICAgICAgIC8vIGxvb3AgdGhyb3VnaCBlYWNoIGxpbmUgaW4gdGhlIGZlYXR1cmVcdTIwMTlzIGVudHJpZXNbXVxuICAgICAgICBmZWF0RGVmLmVudHJpZXMuZm9yRWFjaCgoc3ViRW50cnk6IGFueSwgaWR4OiBhbnkpID0+IHtcbiAgICAgICAgICAvLyByZW5kZXIgdGV4dFxuICAgICAgICAgIGNvbnN0IHRleHQgPSB0eXBlb2Ygc3ViRW50cnkgPT09IFwic3RyaW5nXCJcbiAgICAgICAgICAgID8gcmVwbGFjZTVlVGFncyhzdWJFbnRyeSlcbiAgICAgICAgICAgIDogZm9ybWF0RW50cnkoc3ViRW50cnkpO1xuXG4gICAgICAgICAgaWYgKGlkeCA9PT0gMCkge1xuICAgICAgICAgICAgLy8gZmlyc3QgbGluZTogYm9sZGVkIG5hbWUgKyBkZXNjcmlwdGlvblxuICAgICAgICAgICAgbGluZXMucHVzaChgLSAqKiR7ZmVhdERlZi5uYW1lfToqKiAke3RleHR9YCk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIHN1YnNlcXVlbnQgbGluZXM6IG5lc3RlZCBidWxsZXRcbiAgICAgICAgICAgIGxpbmVzLnB1c2goYCAgLSAke3RleHR9YCk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgbGluZXMucHVzaChcIlwiKTsgLy8gYmxhbmsgbGluZSBhZnRlciBlYWNoIGZlYXR1cmUgYmxvY2tcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIGZhbGxiYWNrIGlmIG5vdCBmb3VuZFxuICAgICAgICBsaW5lcy5wdXNoKGAqKiR7b3B0TmFtZX06KipgKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgLy8gbm9uXHUyMDEwcmVmT3B0aW9uYWxmZWF0dXJlIGZhbGxiYWNrXG4gICAgICBjb25zdCB0eHQgPSBmb3JtYXRFbnRyeShvcHRSZWYpO1xuICAgICAgaWYgKHR4dCkgbGluZXMucHVzaChgLSAke3R4dH1gKTtcbiAgICB9XG4gIH1cblxuICBjb250aW51ZTtcbn1cblxuXG4gICAgICAvLyAzKSBTdGFuZGFsb25lIHJlZk9wdGlvbmFsZmVhdHVyZVxuICAgICAgaWYgKGVudC50eXBlID09PSBcInJlZk9wdGlvbmFsZmVhdHVyZVwiKSB7XG4gICAgICAgIGNvbnN0IFtuYW1lXSA9IGVudC5vcHRpb25hbGZlYXR1cmUuc3BsaXQoXCJ8XCIpO1xuICAgICAgICBsaW5lcy5wdXNoKGAtIFtbJHtuYW1lfXwke25hbWV9XV1gKTtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIC8vIDQpIE5lc3RlZCBcdTIwMUNlbnRyaWVzXHUyMDFEIGJsb2NrIHdpdGggaXRzIG93biBoZWFkaW5nXG4gICAgICBpZiAoZW50LnR5cGUgPT09IFwiZW50cmllc1wiICYmIGVudC5uYW1lKSB7XG4gICAgICAgIGxpbmVzLnB1c2goYCMjIyMjICR7ZW50Lm5hbWV9YCk7XG4gICAgICAgIGNvbnN0IGlubmVyID0gQXJyYXkuaXNBcnJheShlbnQuZW50cmllcykgPyBlbnQuZW50cmllcyA6IFtlbnQuZW50cmllc107XG4gICAgICAgIGZvciAoY29uc3QgZTIgb2YgaW5uZXIpIHtcbiAgICAgICAgICBsaW5lcy5wdXNoKGZvcm1hdEVudHJ5KGUyKSk7XG4gICAgICAgIH1cbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIC8vIDUpIEZhbGxiYWNrIGZvciBhbnkgb3RoZXIgb2JqZWN0IHNoYXBlXG4gICAgICBjb25zdCBmYWxsYmFjayA9IGZvcm1hdEVudHJ5KGVudCk7XG4gICAgICBpZiAoZmFsbGJhY2spIGxpbmVzLnB1c2goZmFsbGJhY2spO1xuICAgIH1cblxuICAgIC8vIEJsYW5rIGxpbmUgYWZ0ZXIgZWFjaCBmZWF0dXJlXG4gICAgbGluZXMucHVzaChgYCk7XG4gIH0gXG5cbiAgLy8gRGl2aWRlciBiZXR3ZWVuIGxldmVsc1xuICBsaW5lcy5wdXNoKGAtLS1gKTtcbn1cblxuXG5cbiAgLy8gc3RpdGNoLCByZXBsYWNlIHRhZ3MsIHJldHVyblxuICBsZXQgY29udGVudCA9IGAtLS1cXG4ke3lhbWx9XFxuLS0tXFxuXFxuJHtsaW5lcy5qb2luKFwiXFxuXCIpfWA7XG4gIC8vIGNvbW1lbnQgdGhpcyBvdXQgd2hpbGUgZGVidWdnaW5nOlxuICBjb250ZW50ID0gcmVwbGFjZTVlVGFncyhjb250ZW50KTtcblxuICBjb250ZW50ID0gY29udGVudFxuICAucmVwbGFjZSgvXFxuezMsfS9nLCAnXFxuXFxuJykgICAvLyBubyBtb3JlIHRoYW4gMiBuZXdsaW5lcyBpbiBhIHJvd1xuICAucmVwbGFjZSgvXFxuICtcXG4vZywgJ1xcblxcbicpOyAgLy8gdHJpbSBibGFuayBsaW5lcyB3aXRoIHRyYWlsaW5nIHNwYWNlc1xuXG4gIHJldHVybiBbXG4gICAge1xuICAgICAgcGF0aDogYENsYXNzZXMvJHtjbGFzc05hbWV9LyR7Y2xhc3NOYW1lfS5tZGAsXG4gICAgICBjb250ZW50LFxuICAgIH0sXG4gICAgLi4uc3ViY2xhc3NGaWxlcyxcbiAgXTtcbiAgXG59XG4iLCAiLy8gc3JjL3BhcnNlcnMvcnVsZXMudHNcbmltcG9ydCB0eXBlIHsgUGFyc2VkTWFya2Rvd25GaWxlIH0gZnJvbSBcIi4uLy4uL3R5cGVzXCI7XG5pbXBvcnQgeyByZXBsYWNlNWVUYWdzIH0gZnJvbSBcIi4vaGVscGVycy90YWdSZXBsYWNlclwiO1xuXG4vKipcbiAqIFBhcnNlIGFjdGlvbnMuanNvbiBpbnRvIGEgc2luZ2xlIE1hcmtkb3duIG5vdGUgd2l0aCAjIyBoZWFkZXJzIGZvciBlYWNoIGFjdGlvbixcbiAqIGhhbmRsaW5nIG5lc3RlZCBlbnRyaWVzLCBpbnNldHMsIGxpc3RzLCB0YWJsZXMsIGFuZCBhZGRpbmcgc2VwYXJhdG9ycy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlQWN0aW9uc0ZpbGUoanNvbjogYW55LCBlZGl0aW9uSWQ6IHN0cmluZyk6IFBhcnNlZE1hcmtkb3duRmlsZVtdIHtcbiAgaWYgKCFBcnJheS5pc0FycmF5KGpzb24uYWN0aW9uKSkgcmV0dXJuIFtdO1xuXG4gIGNvbnN0IGxpbmVzOiBzdHJpbmdbXSA9IFtdO1xuICBmb3IgKGNvbnN0IGFjdGlvbiBvZiBqc29uLmFjdGlvbikge1xuICAgIGxpbmVzLnB1c2goYCMjICR7YWN0aW9uLm5hbWV9YCk7XG4gICAgY29uc3QgZW50cmllcyA9IEFycmF5LmlzQXJyYXkoYWN0aW9uLmVudHJpZXMpID8gYWN0aW9uLmVudHJpZXMgOiBbYWN0aW9uLmVudHJpZXNdO1xuICAgIGZvciAoY29uc3QgZW50cnkgb2YgZW50cmllcykge1xuICAgICAgaWYgKCFlbnRyeSkgY29udGludWU7XG4gICAgICBpZiAodHlwZW9mIGVudHJ5ID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgIGNvbnN0IHBhcmFzID0gZW50cnkuc3BsaXQoL1xcbnsyLH0vKTtcbiAgICAgICAgZm9yIChjb25zdCBwYXJhIG9mIHBhcmFzKSB7XG4gICAgICAgICAgY29uc3QgdCA9IHBhcmEudHJpbSgpO1xuICAgICAgICAgIGlmICh0KSB7XG4gICAgICAgICAgICBsaW5lcy5wdXNoKHJlcGxhY2U1ZVRhZ3ModCkpO1xuICAgICAgICAgICAgbGluZXMucHVzaChcIlwiKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAoZW50cnkudHlwZSA9PT0gXCJsaXN0XCIgJiYgQXJyYXkuaXNBcnJheShlbnRyeS5pdGVtcykpIHtcbiAgICAgICAgZm9yIChjb25zdCBpdGVtIG9mIGVudHJ5Lml0ZW1zKSB7XG4gICAgICAgICAgbGluZXMucHVzaChgLSAke3JlcGxhY2U1ZVRhZ3MoaXRlbSl9YCk7XG4gICAgICAgIH1cbiAgICAgICAgbGluZXMucHVzaChcIlwiKTtcbiAgICAgIH0gZWxzZSBpZiAoKGVudHJ5LnR5cGUgPT09IFwiZW50cmllc1wiIHx8IGVudHJ5LnR5cGUgPT09IFwiaW5zZXRcIikgJiYgQXJyYXkuaXNBcnJheShlbnRyeS5lbnRyaWVzKSkge1xuICAgICAgICBsaW5lcy5wdXNoKGAjIyMgJHtlbnRyeS5uYW1lfWApO1xuICAgICAgICBmb3IgKGNvbnN0IHN1YiBvZiBlbnRyeS5lbnRyaWVzKSB7XG4gICAgICAgICAgaWYgKHR5cGVvZiBzdWIgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgIGNvbnN0IHBzID0gc3ViLnNwbGl0KC9cXG57Mix9Lyk7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IHAgb2YgcHMpIHtcbiAgICAgICAgICAgICAgY29uc3QgdHQgPSBwLnRyaW0oKTtcbiAgICAgICAgICAgICAgaWYgKHR0KSB7XG4gICAgICAgICAgICAgICAgbGluZXMucHVzaChyZXBsYWNlNWVUYWdzKHR0KSk7XG4gICAgICAgICAgICAgICAgbGluZXMucHVzaChcIlwiKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gZWxzZSBpZiAoc3ViLnR5cGUgPT09IFwibGlzdFwiICYmIEFycmF5LmlzQXJyYXkoc3ViLml0ZW1zKSkge1xuICAgICAgICAgICAgZm9yIChjb25zdCBsaSBvZiBzdWIuaXRlbXMpIHtcbiAgICAgICAgICAgICAgbGluZXMucHVzaChgLSAke3JlcGxhY2U1ZVRhZ3MobGkpfWApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbGluZXMucHVzaChcIlwiKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgdHh0ID0gQXJyYXkuaXNBcnJheShzdWIpXG4gICAgICAgICAgICAgID8gc3ViLmpvaW4oXCIgXCIpXG4gICAgICAgICAgICAgIDogdHlwZW9mIHN1YiA9PT0gXCJvYmplY3RcIlxuICAgICAgICAgICAgICAgID8gSlNPTi5zdHJpbmdpZnkoc3ViKVxuICAgICAgICAgICAgICAgIDogU3RyaW5nKHN1Yik7XG4gICAgICAgICAgICBsaW5lcy5wdXNoKHJlcGxhY2U1ZVRhZ3ModHh0KSk7XG4gICAgICAgICAgICBsaW5lcy5wdXNoKFwiXCIpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChlbnRyeS50eXBlID09PSBcInRhYmxlXCIgJiYgQXJyYXkuaXNBcnJheShlbnRyeS5yb3dzKSkge1xuICAgICAgICBjb25zdCBoZWFkZXJzID0gZW50cnkuY29sTGFiZWxzIHx8IFtdO1xuICAgICAgICBsaW5lcy5wdXNoKGB8ICR7aGVhZGVycy5qb2luKFwiIHwgXCIpfSB8YCk7XG4gICAgICAgIGxpbmVzLnB1c2goYHwgJHtoZWFkZXJzLm1hcCgoKSA9PiBcIi0tLVwiKS5qb2luKFwiIHwgXCIpfSB8YCk7XG4gICAgICAgIGZvciAoY29uc3Qgcm93IG9mIGVudHJ5LnJvd3MpIHtcbiAgICAgICAgICBsaW5lcy5wdXNoKGB8ICR7cm93LmpvaW4oXCIgfCBcIil9IHxgKTtcbiAgICAgICAgfVxuICAgICAgICBsaW5lcy5wdXNoKFwiXCIpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc3QgdHh0ID0gQXJyYXkuaXNBcnJheShlbnRyeSlcbiAgICAgICAgICA/IGVudHJ5LmpvaW4oXCIgXCIpXG4gICAgICAgICAgOiB0eXBlb2YgZW50cnkgPT09IFwib2JqZWN0XCJcbiAgICAgICAgICAgID8gSlNPTi5zdHJpbmdpZnkoZW50cnkpXG4gICAgICAgICAgICA6IFN0cmluZyhlbnRyeSk7XG4gICAgICAgIGxpbmVzLnB1c2gocmVwbGFjZTVlVGFncyh0eHQpKTtcbiAgICAgICAgbGluZXMucHVzaChcIlwiKTtcbiAgICAgIH1cbiAgICB9XG4gICAgLy8gU2VwYXJhdG9yIGJldHdlZW4gYWN0aW9uc1xuICAgIGxpbmVzLnB1c2goXCItLS1cIik7XG4gIH1cbiAgY29uc3QgY2xlYW5lZCA9IGxpbmVzLnJlZHVjZTxzdHJpbmdbXT4oKGFjYywgY3VycikgPT4ge1xuICAgIGlmIChjdXJyID09PSBcIlwiICYmIGFjYy5sZW5ndGggJiYgYWNjW2FjYy5sZW5ndGggLSAxXSA9PT0gXCJcIikgcmV0dXJuIGFjYztcbiAgICByZXR1cm4gYWNjLmNvbmNhdChjdXJyKTtcbiAgfSwgW10pO1xuICByZXR1cm4gW1xuICAgIHtcbiAgICAgIHBhdGg6IFwiUnVsZXMgYW5kIFJlZmVyZW5jZS9BY3Rpb25zLm1kXCIsXG4gICAgICBjb250ZW50OiBjbGVhbmVkLmpvaW4oXCJcXG5cIikudHJpbSgpICsgXCJcXG5cIixcbiAgICB9LFxuICBdO1xufVxuXG5cbmV4cG9ydCBmdW5jdGlvbiBwYXJzZUNvbmRpdGlvbnNEaXNlYXNlc0ZpbGUoanNvbjogYW55LCBlZGl0aW9uSWQ6IHN0cmluZyk6IFBhcnNlZE1hcmtkb3duRmlsZVtdIHtcbiAgY29uc3Qgb3V0cHV0czogUGFyc2VkTWFya2Rvd25GaWxlW10gPSBbXTtcbiAgY29uc3QgcHJvY2Vzc0l0ZW1zID0gKGl0ZW1zOiBhbnlbXSwgb3V0UGF0aDogc3RyaW5nKSA9PiB7XG4gICAgY29uc3QgbGluZXM6IHN0cmluZ1tdID0gW107XG4gICAgZm9yIChjb25zdCBpdGVtIG9mIGl0ZW1zKSB7XG4gICAgICBsaW5lcy5wdXNoKGAjIyAke2l0ZW0ubmFtZX1gKTtcbiAgICAgIGNvbnN0IGVudHJpZXMgPSBBcnJheS5pc0FycmF5KGl0ZW0uZW50cmllcykgPyBpdGVtLmVudHJpZXMgOiBbaXRlbS5lbnRyaWVzXTtcbiAgICAgIGZvciAoY29uc3QgZW50cnkgb2YgZW50cmllcykge1xuICAgICAgICBpZiAoIWVudHJ5KSBjb250aW51ZTtcbiAgICAgICAgaWYgKHR5cGVvZiBlbnRyeSA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgIGNvbnN0IHBhcmFzID0gZW50cnkuc3BsaXQoL1xcbnsyLH0vKTtcbiAgICAgICAgICBmb3IgKGNvbnN0IHBhcmEgb2YgcGFyYXMpIHtcbiAgICAgICAgICAgIGNvbnN0IHQgPSBwYXJhLnRyaW0oKTtcbiAgICAgICAgICAgIGlmICh0KSB7XG4gICAgICAgICAgICAgIGxpbmVzLnB1c2gocmVwbGFjZTVlVGFncyh0KSk7XG4gICAgICAgICAgICAgIGxpbmVzLnB1c2goXCJcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKGVudHJ5LnR5cGUgPT09IFwibGlzdFwiICYmIEFycmF5LmlzQXJyYXkoZW50cnkuaXRlbXMpKSB7XG4gICAgICAgICAgZm9yIChjb25zdCB0eHQgb2YgZW50cnkuaXRlbXMpIHtcbiAgICAgICAgICAgIGxpbmVzLnB1c2goYC0gJHtyZXBsYWNlNWVUYWdzKHR4dCl9YCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGxpbmVzLnB1c2goXCJcIik7XG4gICAgICAgIH0gZWxzZSBpZiAoZW50cnkudHlwZSA9PT0gXCJ0YWJsZVwiICYmIEFycmF5LmlzQXJyYXkoZW50cnkucm93cykpIHtcbiAgICAgICAgICBjb25zdCBoZWFkZXJzID0gZW50cnkuY29sTGFiZWxzIHx8IFtdO1xuICAgICAgICAgIGxpbmVzLnB1c2goYHwgJHtoZWFkZXJzLmpvaW4oXCIgfCBcIil9IHxgKTtcbiAgICAgICAgICBsaW5lcy5wdXNoKGB8ICR7aGVhZGVycy5tYXAoKCkgPT4gXCItLS1cIikuam9pbihcIiB8IFwiKX0gfGApO1xuICAgICAgICAgIGZvciAoY29uc3Qgcm93IG9mIGVudHJ5LnJvd3MpIHtcbiAgICAgICAgICAgIGxpbmVzLnB1c2goYHwgJHtyb3cuam9pbihcIiB8IFwiKX0gfGApO1xuICAgICAgICAgIH1cbiAgICAgICAgICBsaW5lcy5wdXNoKFwiXCIpO1xuICAgICAgICB9IGVsc2UgaWYgKGVudHJ5LnR5cGUgPT09IFwiZW50cmllc1wiICYmIEFycmF5LmlzQXJyYXkoZW50cnkuZW50cmllcykpIHtcbiAgICAgICAgICBsaW5lcy5wdXNoKGAjIyMgJHtlbnRyeS5uYW1lfWApO1xuICAgICAgICAgIGZvciAoY29uc3Qgc3ViIG9mIGVudHJ5LmVudHJpZXMpIHtcbiAgICAgICAgICAgIGNvbnN0IHR4dCA9IHR5cGVvZiBzdWIgPT09IFwic3RyaW5nXCIgPyBzdWIgOiBTdHJpbmcoc3ViKTtcbiAgICAgICAgICAgIGxpbmVzLnB1c2gocmVwbGFjZTVlVGFncyh0eHQpKTtcbiAgICAgICAgICAgIGxpbmVzLnB1c2goXCJcIik7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNvbnN0IHR4dCA9IEFycmF5LmlzQXJyYXkoZW50cnkpID8gZW50cnkuam9pbihcIiBcIikgOiBTdHJpbmcoZW50cnkpO1xuICAgICAgICAgIGxpbmVzLnB1c2gocmVwbGFjZTVlVGFncyh0eHQpKTtcbiAgICAgICAgICBsaW5lcy5wdXNoKFwiXCIpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICAvLyBTZXBhcmF0b3IgYmV0d2VlbiBpdGVtc1xuICAgICAgbGluZXMucHVzaChcIi0tLVwiKTtcbiAgICB9XG4gICAgY29uc3QgY2xlYW5lZCA9IGxpbmVzLnJlZHVjZTxzdHJpbmdbXT4oKGFjYywgY3VycikgPT4ge1xuICAgICAgaWYgKGN1cnIgPT09IFwiXCIgJiYgYWNjLmxlbmd0aCAmJiBhY2NbYWNjLmxlbmd0aCAtIDFdID09PSBcIlwiKSByZXR1cm4gYWNjO1xuICAgICAgcmV0dXJuIGFjYy5jb25jYXQoY3Vycik7XG4gICAgfSwgW10pO1xuICAgIG91dHB1dHMucHVzaCh7IHBhdGg6IG91dFBhdGgsIGNvbnRlbnQ6IGNsZWFuZWQuam9pbihcIlxcblwiKS50cmltKCkgKyBcIlxcblwiIH0pO1xuICB9O1xuICBwcm9jZXNzSXRlbXMoanNvbi5jb25kaXRpb24gfHwgW10sIFwiUnVsZXMgYW5kIFJlZmVyZW5jZS9Db25kaXRpb25zLm1kXCIpO1xuICBwcm9jZXNzSXRlbXMoanNvbi5kaXNlYXNlIHx8IFtdLCBcIlJ1bGVzIGFuZCBSZWZlcmVuY2UvRGlzZWFzZXMubWRcIik7XG4gIHJldHVybiBvdXRwdXRzO1xufVxuXG4vKipcbiAqIFBhcnNlIHNlbnNlcy5qc29uIGludG8gYSBzaW5nbGUgTWFya2Rvd24gbm90ZSB3aXRoICMjIGhlYWRlcnMgZm9yIGVhY2ggc2Vuc2UsXG4gKiBoYW5kbGluZyBsaXN0cywgdGFibGVzLCBuZXN0ZWQgZW50cmllcy9pbnNldHMsIGFuZCBzZXBhcmF0b3JzLlxuICovXG5leHBvcnQgZnVuY3Rpb24gcGFyc2VTZW5zZXNGaWxlKGpzb246IGFueSwgZWRpdGlvbklkOiBzdHJpbmcpOiBQYXJzZWRNYXJrZG93bkZpbGVbXSB7XG4gIGNvbnN0IGl0ZW1zID0gQXJyYXkuaXNBcnJheShqc29uLnNlbnNlKSA/IGpzb24uc2Vuc2UgOiBBcnJheS5pc0FycmF5KGpzb24uc2Vuc2VzKSA/IGpzb24uc2Vuc2VzIDogW107XG4gIGlmICghaXRlbXMubGVuZ3RoKSByZXR1cm4gW107XG5cbiAgY29uc3QgbGluZXM6IHN0cmluZ1tdID0gW107XG4gIGZvciAoY29uc3Qgc2Vuc2Ugb2YgaXRlbXMpIHtcbiAgICBsaW5lcy5wdXNoKGAjIyAke3NlbnNlLm5hbWV9YCk7XG4gICAgY29uc3QgZW50cmllcyA9IEFycmF5LmlzQXJyYXkoc2Vuc2UuZW50cmllcykgPyBzZW5zZS5lbnRyaWVzIDogW3NlbnNlLmVudHJpZXNdO1xuICAgIGZvciAoY29uc3QgZW50cnkgb2YgZW50cmllcykge1xuICAgICAgaWYgKCFlbnRyeSkgY29udGludWU7XG4gICAgICBpZiAodHlwZW9mIGVudHJ5ID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgIGNvbnN0IHBhcmFzID0gZW50cnkuc3BsaXQoL1xcbnsyLH0vKTtcbiAgICAgICAgZm9yIChjb25zdCBwYXJhIG9mIHBhcmFzKSB7XG4gICAgICAgICAgY29uc3QgdCA9IHBhcmEudHJpbSgpO1xuICAgICAgICAgIGlmICh0KSB7XG4gICAgICAgICAgICBsaW5lcy5wdXNoKHJlcGxhY2U1ZVRhZ3ModCkpO1xuICAgICAgICAgICAgbGluZXMucHVzaChcIlwiKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAoZW50cnkudHlwZSA9PT0gXCJsaXN0XCIgJiYgQXJyYXkuaXNBcnJheShlbnRyeS5pdGVtcykpIHtcbiAgICAgICAgZm9yIChjb25zdCBpdGVtIG9mIGVudHJ5Lml0ZW1zKSB7XG4gICAgICAgICAgbGluZXMucHVzaChgLSAke3JlcGxhY2U1ZVRhZ3MoaXRlbSl9YCk7XG4gICAgICAgIH1cbiAgICAgICAgbGluZXMucHVzaChcIlwiKTtcbiAgICAgIH0gZWxzZSBpZiAoKGVudHJ5LnR5cGUgPT09IFwiZW50cmllc1wiIHx8IGVudHJ5LnR5cGUgPT09IFwiaW5zZXRcIikgJiYgQXJyYXkuaXNBcnJheShlbnRyeS5lbnRyaWVzKSkge1xuICAgICAgICBsaW5lcy5wdXNoKGAjIyMgJHtlbnRyeS5uYW1lfWApO1xuICAgICAgICBmb3IgKGNvbnN0IHN1YiBvZiBlbnRyeS5lbnRyaWVzKSB7XG4gICAgICAgICAgY29uc3QgdHh0ID0gdHlwZW9mIHN1YiA9PT0gXCJzdHJpbmdcIiA/IHN1YiA6IFN0cmluZyhzdWIpO1xuICAgICAgICAgIGxpbmVzLnB1c2gocmVwbGFjZTVlVGFncyh0eHQpKTtcbiAgICAgICAgICBsaW5lcy5wdXNoKFwiXCIpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKGVudHJ5LnR5cGUgPT09IFwidGFibGVcIiAmJiBBcnJheS5pc0FycmF5KGVudHJ5LnJvd3MpKSB7XG4gICAgICAgIGNvbnN0IGhlYWRlcnMgPSBlbnRyeS5jb2xMYWJlbHMgfHwgW107XG4gICAgICAgIGxpbmVzLnB1c2goYHwgJHtoZWFkZXJzLmpvaW4oXCIgfCBcIil9IHxgKTtcbiAgICAgICAgbGluZXMucHVzaChgfCAke2hlYWRlcnMubWFwKCgpID0+IFwiLS0tXCIpLmpvaW4oXCIgfCBcIil9IHxgKTtcbiAgICAgICAgZm9yIChjb25zdCByb3cgb2YgZW50cnkucm93cykge1xuICAgICAgICAgIGxpbmVzLnB1c2goYHwgJHtyb3cuam9pbihcIiB8IFwiKX0gfGApO1xuICAgICAgICB9XG4gICAgICAgIGxpbmVzLnB1c2goXCJcIik7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zdCB0eHQgPSBBcnJheS5pc0FycmF5KGVudHJ5KSA/IGVudHJ5LmpvaW4oXCIgXCIpIDogU3RyaW5nKGVudHJ5KTtcbiAgICAgICAgbGluZXMucHVzaChyZXBsYWNlNWVUYWdzKHR4dCkpO1xuICAgICAgICBsaW5lcy5wdXNoKFwiXCIpO1xuICAgICAgfVxuICAgIH1cbiAgICAvLyBTZXBhcmF0b3IgYmV0d2VlbiBzZW5zZXNcbiAgICBsaW5lcy5wdXNoKFwiLS0tXCIpO1xuICB9XG4gIGNvbnN0IGNsZWFuZWQgPSBsaW5lcy5yZWR1Y2U8c3RyaW5nW10+KChhY2MsIGN1cnIpID0+IHtcbiAgICBpZiAoY3VyciA9PT0gXCJcIiAmJiBhY2MubGVuZ3RoICYmIGFjY1thY2MubGVuZ3RoIC0gMV0gPT09IFwiXCIpIHJldHVybiBhY2M7XG4gICAgcmV0dXJuIGFjYy5jb25jYXQoY3Vycik7XG4gIH0sIFtdKTtcblxuICByZXR1cm4gW1xuICAgIHtcbiAgICAgIHBhdGg6IFwiUnVsZXMgYW5kIFJlZmVyZW5jZS9TZW5zZXMubWRcIixcbiAgICAgIGNvbnRlbnQ6IGNsZWFuZWQuam9pbihcIlxcblwiKS50cmltKCkgKyBcIlxcblwiLFxuICAgIH0sXG4gIF07XG59XG5cbi8qKlxuICogUGFyc2Ugc2tpbGxzLmpzb24gaW50byBhIHNpbmdsZSBNYXJrZG93biBub3RlIHdpdGggIyMgaGVhZGVycyBmb3IgZWFjaCBza2lsbCxcbiAqIHByZXBlbmRpbmcgYW4gYWJpbGl0eSBsaW5lLCBoYW5kbGluZyBwYXJhZ3JhcGhzLCBhbmQgc2VwYXJhdG9ycy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlU2tpbGxzRmlsZShqc29uOiBhbnksIGVkaXRpb25JZDogc3RyaW5nKTogUGFyc2VkTWFya2Rvd25GaWxlW10ge1xuICBjb25zdCBpdGVtcyA9IEFycmF5LmlzQXJyYXkoanNvbi5za2lsbClcbiAgICA/IGpzb24uc2tpbGxcbiAgICA6IEFycmF5LmlzQXJyYXkoanNvbi5za2lsbHMpXG4gICAgPyBqc29uLnNraWxsc1xuICAgIDogW107XG4gIGlmICghaXRlbXMubGVuZ3RoKSByZXR1cm4gW107XG5cbiAgY29uc3QgbGluZXM6IHN0cmluZ1tdID0gW107XG4gIGZvciAoY29uc3Qgc2tpbGwgb2YgaXRlbXMpIHtcbiAgICBsaW5lcy5wdXNoKGAjIyAke3NraWxsLm5hbWV9YCk7XG4gICAgaWYgKHNraWxsLmFiaWxpdHkpIHtcbiAgICAgIGxpbmVzLnB1c2goYCpBYmlsaXR5OiAke3NraWxsLmFiaWxpdHl9KmApO1xuICAgICAgbGluZXMucHVzaChcIlwiKTtcbiAgICB9XG4gICAgY29uc3QgZW50cmllcyA9IEFycmF5LmlzQXJyYXkoc2tpbGwuZW50cmllcykgPyBza2lsbC5lbnRyaWVzIDogW3NraWxsLmVudHJpZXNdO1xuICAgIGZvciAoY29uc3QgZW50cnkgb2YgZW50cmllcykge1xuICAgICAgaWYgKCFlbnRyeSkgY29udGludWU7XG4gICAgICBpZiAodHlwZW9mIGVudHJ5ID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgIGNvbnN0IHBhcmFzID0gZW50cnkuc3BsaXQoL1xcbnsyLH0vKTtcbiAgICAgICAgZm9yIChjb25zdCBwYXJhIG9mIHBhcmFzKSB7XG4gICAgICAgICAgY29uc3QgdCA9IHBhcmEudHJpbSgpO1xuICAgICAgICAgIGlmICh0KSB7XG4gICAgICAgICAgICBsaW5lcy5wdXNoKHJlcGxhY2U1ZVRhZ3ModCkpO1xuICAgICAgICAgICAgbGluZXMucHVzaChcIlwiKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAoZW50cnkudHlwZSA9PT0gXCJsaXN0XCIgJiYgQXJyYXkuaXNBcnJheShlbnRyeS5pdGVtcykpIHtcbiAgICAgICAgZm9yIChjb25zdCBpdGVtIG9mIGVudHJ5Lml0ZW1zKSB7XG4gICAgICAgICAgbGluZXMucHVzaChgLSAke3JlcGxhY2U1ZVRhZ3MoaXRlbSl9YCk7XG4gICAgICAgIH1cbiAgICAgICAgbGluZXMucHVzaChcIlwiKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnN0IHR4dCA9IEFycmF5LmlzQXJyYXkoZW50cnkpID8gZW50cnkuam9pbihcIiBcIikgOiBTdHJpbmcoZW50cnkpO1xuICAgICAgICBsaW5lcy5wdXNoKHJlcGxhY2U1ZVRhZ3ModHh0KSk7XG4gICAgICAgIGxpbmVzLnB1c2goXCJcIik7XG4gICAgICB9XG4gICAgfVxuICAgIC8vIFNlcGFyYXRvciBiZXR3ZWVuIHNraWxsc1xuICAgIGxpbmVzLnB1c2goXCItLS1cIik7XG4gIH1cbiAgY29uc3QgY2xlYW5lZCA9IGxpbmVzLnJlZHVjZTxzdHJpbmdbXT4oKGFjYywgY3VycikgPT4ge1xuICAgIGlmIChjdXJyID09PSBcIlwiICYmIGFjYy5sZW5ndGggJiYgYWNjW2FjYy5sZW5ndGggLSAxXSA9PT0gXCJcIikgcmV0dXJuIGFjYztcbiAgICByZXR1cm4gYWNjLmNvbmNhdChjdXJyKTtcbiAgfSwgW10pO1xuXG4gIHJldHVybiBbXG4gICAge1xuICAgICAgcGF0aDogXCJSdWxlcyBhbmQgUmVmZXJlbmNlL1NraWxscy5tZFwiLFxuICAgICAgY29udGVudDogY2xlYW5lZC5qb2luKFwiXFxuXCIpLnRyaW0oKSArIFwiXFxuXCIsXG4gICAgfSxcbiAgXTtcbn1cbiIsICJpbXBvcnQgdHlwZSB7IFBhcnNlZE1hcmtkb3duRmlsZSB9IGZyb20gXCIuLi8uLi90eXBlc1wiO1xuaW1wb3J0IHsgcmVwbGFjZTVlVGFncyB9IGZyb20gXCIuL2hlbHBlcnMvdGFnUmVwbGFjZXJcIjtcbmltcG9ydCB7IGJ1aWxkRk0sIHNlcmlhbGl6ZUZyb250bWF0dGVyLCBGRUFUU19NRVRBX0RFRlMgfSBmcm9tIFwiLi9oZWxwZXJzL2Zyb250bWF0dGVyXCI7XG5cbi8qKlxuICogUGFyc2UgZmVhdHMuanNvbiBpbnRvIG9uZSBNYXJrZG93biBmaWxlIHBlciBmZWF0IHVuZGVyIFBsYXllciBCdWlsZC9GZWF0cyxcbiAqIGluY2x1ZGluZyBmcm9udG1hdHRlciwgY2xlYW5lZCBwcmVyZXF1aXNpdGVzLCBhbmQgZm9ybWF0dGVkIGVudHJpZXMuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBwYXJzZUZlYXRzRmlsZShqc29uOiBhbnksIGVkaXRpb25JZDogc3RyaW5nKTogUGFyc2VkTWFya2Rvd25GaWxlW10ge1xuICBjb25zdCBmZWF0czogYW55W10gPSBBcnJheS5pc0FycmF5KGpzb24uZmVhdClcbiAgICA/IGpzb24uZmVhdFxuICAgIDogQXJyYXkuaXNBcnJheShqc29uLmZlYXRzKVxuICAgID8ganNvbi5mZWF0c1xuICAgIDogW107XG5cbiAgcmV0dXJuIGZlYXRzLm1hcCgoZmVhdDogYW55KSA9PiB7XG4gICAgY29uc3QgbGluZXM6IHN0cmluZ1tdID0gW107XG5cbiAgICAvLyBcdTI1MDBcdTI1MDBcdTI1MDAgRnJvbnRtYXR0ZXIgXHUyNTAwXHUyNTAwXHUyNTAwXG4gICAgY29uc3QgZm0gPSBidWlsZEZNKHsgLi4uZmVhdCwgX2VkaXRpb25JZDogZWRpdGlvbklkIH0sIEZFQVRTX01FVEFfREVGUyk7XG4gICAgbGluZXMucHVzaChcIi0tLVwiKTtcbiAgICBsaW5lcy5wdXNoKHNlcmlhbGl6ZUZyb250bWF0dGVyKGZtLCBGRUFUU19NRVRBX0RFRlMpKTtcbiAgICBsaW5lcy5wdXNoKFwiLS0tXCIsIFwiXCIpO1xuXG4gICAgLy8gXHUyNTAwXHUyNTAwXHUyNTAwIFRpdGxlIFx1MjUwMFx1MjUwMFx1MjUwMFxuICAgIGxpbmVzLnB1c2goYCMgJHtmZWF0Lm5hbWV9YCwgXCJcIik7XG5cbiAgICAvLyBcdTI1MDBcdTI1MDBcdTI1MDAgUHJlcmVxdWlzaXRlcyBcdTI1MDBcdTI1MDBcdTI1MDBcbiAgICBjb25zdCBwcmVyZXFzOiBzdHJpbmdbXSA9IFtdO1xuICAgIGlmIChBcnJheS5pc0FycmF5KGZlYXQucHJlcmVxdWlzaXRlKSkge1xuICAgICAgZmVhdC5wcmVyZXF1aXNpdGUuZm9yRWFjaCgocHI6IGFueSkgPT4ge1xuICAgICAgICBpZiAocHIubGV2ZWwpIHByZXJlcXMucHVzaChgTGV2ZWwgJHtwci5sZXZlbH1gKTtcbiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkocHIuZmVhdCkpIHtcbiAgICAgICAgICBwci5mZWF0LmZvckVhY2goKGY6IHN0cmluZykgPT4ge1xuICAgICAgICAgICAgY29uc3QgbmFtZSA9IGYuc3BsaXQoXCJ8XCIpWzBdLnJlcGxhY2UoL1xcYlxcdy9nLCBjID0+IGMudG9VcHBlckNhc2UoKSk7XG4gICAgICAgICAgICBwcmVyZXFzLnB1c2goYFByZXJlcXVpc2l0ZTogW1ske25hbWV9XV1gKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICAgIGlmIChmZWF0LnNwZWxsY2FzdGluZ1ByZXBhcmVkKSBwcmVyZXFzLnB1c2goYFByZXJlcXVpc2l0ZTogU3BlbGxjYXN0ZXJgKTtcbiAgICBpZiAoQXJyYXkuaXNBcnJheShmZWF0LnRvb2xQcm9maWNpZW5jaWVzKSkge1xuICAgICAgZmVhdC50b29sUHJvZmljaWVuY2llcy5mb3JFYWNoKCh0cDogYW55KSA9PiB7XG4gICAgICAgIE9iamVjdC5lbnRyaWVzKHRwKS5mb3JFYWNoKChba2V5XSkgPT4ge1xuICAgICAgICAgIGlmIChrZXkgPT09ICdhbnlBcnRpc2Fuc1Rvb2wnKSB7XG4gICAgICAgICAgICBwcmVyZXFzLnB1c2goYFByZXJlcXVpc2l0ZTogUHJvZmljaWVudCB3aXRoIGFuIGFydGlzYW4ncyB0b29sYCk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHByZXJlcXMucHVzaChgUHJlcmVxdWlzaXRlOiBQcm9maWNpZW50IHdpdGggJHtrZXkucmVwbGFjZSgvKFtBLVpdKS9nLCcgJDEnKS50cmltKCl9YCk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH1cbiAgICBpZiAoQXJyYXkuaXNBcnJheShmZWF0LmFybW9yUHJvZmljaWVuY2llcykpIHtcbiAgICAgIGZlYXQuYXJtb3JQcm9maWNpZW5jaWVzLmZvckVhY2goKGFybTogYW55KSA9PiB7XG4gICAgICAgIGNvbnN0IGFybVN0ciA9IHR5cGVvZiBhcm0gPT09ICdzdHJpbmcnID8gYXJtIDogSlNPTi5zdHJpbmdpZnkoYXJtKTtcbiAgICAgICAgcHJlcmVxcy5wdXNoKGBQcmVyZXF1aXNpdGU6IFByb2ZpY2llbnQgd2l0aCAke2FybVN0ci5yZXBsYWNlKC8oW0EtWl0pL2csJyAkMScpLnRyaW0oKX1gKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgICBpZiAoZmVhdC5yYWNlKSBwcmVyZXFzLnB1c2goYFByZXJlcXVpc2l0ZTogJHtmZWF0LnJhY2V9YCk7XG5cbiAgICBpZiAocHJlcmVxcy5sZW5ndGgpIHtcbiAgICAgIGxpbmVzLnB1c2goXCIqKlByZXJlcXVpc2l0ZXMqKlwiKTtcbiAgICAgIHByZXJlcXMuZm9yRWFjaChwID0+IGxpbmVzLnB1c2goYC0gJHtwfWApKTtcbiAgICAgIGxpbmVzLnB1c2goXCJcIik7XG4gICAgfVxuXG4gICAgLy8gXHUyNTAwXHUyNTAwXHUyNTAwIEVudHJpZXMgcmVuZGVyaW5nIFx1MjUwMFx1MjUwMFx1MjUwMFxuICAgIGNvbnN0IGVudHJpZXMgPSBBcnJheS5pc0FycmF5KGZlYXQuZW50cmllcykgPyBmZWF0LmVudHJpZXMgOiBbZmVhdC5lbnRyaWVzXTtcbiAgICBlbnRyaWVzLmZvckVhY2goKGVudHJ5OiBhbnkpID0+IHtcbiAgICAgIGlmICghZW50cnkpIHJldHVybjtcblxuICAgICAgLy8gUGxhaW4gdGV4dFxuICAgICAgaWYgKHR5cGVvZiBlbnRyeSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgZW50cnkuc3BsaXQoL1xcbnsyLH0vKS5mb3JFYWNoKHAgPT4ge1xuICAgICAgICAgIGNvbnN0IHQgPSBwLnRyaW0oKTtcbiAgICAgICAgICBpZiAodCkge1xuICAgICAgICAgICAgbGluZXMucHVzaChyZXBsYWNlNWVUYWdzKHQpKTtcbiAgICAgICAgICAgIGxpbmVzLnB1c2goXCJcIik7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgLy8gTGlzdFxuICAgICAgfSBlbHNlIGlmIChlbnRyeS50eXBlID09PSAnbGlzdCcgJiYgQXJyYXkuaXNBcnJheShlbnRyeS5pdGVtcykpIHtcbiAgICAgICAgZW50cnkuaXRlbXMuZm9yRWFjaCgoaXQ6IGFueSkgPT4ge1xuICAgICAgICAgIGlmICh0eXBlb2YgaXQgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICBsaW5lcy5wdXNoKGAtICR7cmVwbGFjZTVlVGFncyhpdCl9YCk7XG4gICAgICAgICAgfSBlbHNlIGlmIChpdC50eXBlID09PSAnaXRlbScgJiYgaXQubmFtZSkge1xuICAgICAgICAgICAgbGluZXMucHVzaChgLSAqKiR7aXQubmFtZX0qKmApO1xuICAgICAgICAgICAgY29uc3Qgc3VicyA9IEFycmF5LmlzQXJyYXkoaXQuZW50cmllcykgPyBpdC5lbnRyaWVzIDogW2l0LmVudHJpZXNdO1xuICAgICAgICAgICAgc3Vicy5mb3JFYWNoKChzOiBhbnkpID0+XG4gICAgICAgICAgICAgIGxpbmVzLnB1c2goYCAgLSAke3JlcGxhY2U1ZVRhZ3ModHlwZW9mIHMgPT09ICdzdHJpbmcnID8gcyA6IEpTT04uc3RyaW5naWZ5KHMpKX1gKVxuICAgICAgICAgICAgKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICBsaW5lcy5wdXNoKFwiXCIpO1xuXG4gICAgICAvLyBJbnNldCBhcyBpbmRlbnRlZCBidWxsZXRcbiAgICAgIH0gZWxzZSBpZiAoZW50cnkudHlwZSA9PT0gJ2luc2V0Jykge1xuICAgICAgICBsaW5lcy5wdXNoKGAtICoke2VudHJ5Lm5hbWV9KmApO1xuICAgICAgICBjb25zdCBzdWJzID0gQXJyYXkuaXNBcnJheShlbnRyeS5lbnRyaWVzKSA/IGVudHJ5LmVudHJpZXMgOiBbZW50cnkuZW50cmllc107XG4gICAgICAgIHN1YnMuZm9yRWFjaCgoczogYW55KSA9PiBsaW5lcy5wdXNoKGAgIC0gJHtyZXBsYWNlNWVUYWdzKHMpfWApKTtcbiAgICAgICAgbGluZXMucHVzaChcIlwiKTtcblxuICAgICAgLy8gU2VjdGlvbiBvciBlbnRyaWVzXG4gICAgICB9IGVsc2UgaWYgKChlbnRyeS50eXBlID09PSAnc2VjdGlvbicgfHwgZW50cnkudHlwZSA9PT0gJ2VudHJpZXMnKSAmJiBBcnJheS5pc0FycmF5KGVudHJ5LmVudHJpZXMpKSB7XG4gICAgICAgIGlmIChlbnRyeS5uYW1lKSB7XG4gICAgICAgICAgbGluZXMucHVzaChgIyMgJHtlbnRyeS5uYW1lfWApO1xuICAgICAgICAgIGxpbmVzLnB1c2goXCJcIik7XG4gICAgICAgIH1cbiAgICAgICAgZW50cnkuZW50cmllcy5mb3JFYWNoKChzOiBhbnkpID0+IHtcbiAgICAgICAgICBsaW5lcy5wdXNoKHJlcGxhY2U1ZVRhZ3ModHlwZW9mIHMgPT09ICdzdHJpbmcnID8gcyA6IEpTT04uc3RyaW5naWZ5KHMpKSk7XG4gICAgICAgICAgbGluZXMucHVzaChcIlwiKTtcbiAgICAgICAgfSk7XG5cbiAgICAgIC8vIFRhYmxlXG4gICAgICB9IGVsc2UgaWYgKGVudHJ5LnR5cGUgPT09ICd0YWJsZScgJiYgQXJyYXkuaXNBcnJheShlbnRyeS5yb3dzKSkge1xuICAgICAgICBjb25zdCBoZHIgPSBlbnRyeS5jb2xMYWJlbHMgfHwgW107XG4gICAgICAgIGxpbmVzLnB1c2goYHwgJHtoZHIuam9pbignIHwgJyl9IHxgKTtcbiAgICAgICAgbGluZXMucHVzaChgfCAke2hkci5tYXAoKCkgPT4gJy0tLScpLmpvaW4oJyB8ICcpfSB8YCk7XG4gICAgICAgIGVudHJ5LnJvd3MuZm9yRWFjaCgocm93OiBhbnlbXSkgPT5cbiAgICAgICAgICBsaW5lcy5wdXNoKGB8ICR7cm93LmpvaW4oJyB8ICcpfSB8YClcbiAgICAgICAgKTtcbiAgICAgICAgbGluZXMucHVzaChcIlwiKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIHJldHVybiB7XG4gICAgICBwYXRoOiBgUGxheWVyIEJ1aWxkL0ZlYXRzLyR7ZmVhdC5uYW1lfS5tZGAsXG4gICAgICBjb250ZW50OiBsaW5lcy5qb2luKFwiXFxuXCIpLnRyaW0oKSArIFwiXFxuXCIsXG4gICAgfTtcbiAgfSk7XG59XG4iLCAiLy8gc3JjL3BhcnNlcnMvYmFja2dyb3VuZHMudHNcbmltcG9ydCB0eXBlIHsgUGFyc2VkTWFya2Rvd25GaWxlIH0gZnJvbSBcIi4uLy4uL3R5cGVzXCI7XG5pbXBvcnQgeyByZXBsYWNlNWVUYWdzIH0gZnJvbSBcIi4vaGVscGVycy90YWdSZXBsYWNlclwiO1xuaW1wb3J0IHsgcmVuZGVyTWFya2Rvd25UYWJsZSB9IGZyb20gXCIuL2hlbHBlcnMvbWFya2Rvd25UYWJsZVwiO1xuaW1wb3J0IHsgYnVpbGRGTSwgc2VyaWFsaXplRnJvbnRtYXR0ZXIsIEZNX0ZJRUxEUywgZmlsdGVyVmFsaWRTa2lsbHMsIEJBQ0tHUk9VTkRfTUVUQV9ERUZTIH0gZnJvbSBcIi4vaGVscGVycy9mcm9udG1hdHRlclwiO1xuXG4vKipcbiAqIFBhcnNlIGJhY2tncm91bmRzLmpzb24gaW50byBvbmUgTWFya2Rvd24gZmlsZSBwZXIgYmFja2dyb3VuZCB1bmRlciBQbGF5ZXIgQnVpbGQvQmFja2dyb3VuZHMsXG4gKiBleGNsdWRpbmcgYW55IFx1MjAxQ1ZhcmlhbnRcdTIwMjZcdTIwMUQgb3IgXHUyMDFDQmFsZHVyXHUyMDE5cyBHYXRlXHUyMDI2XHUyMDFEIGVudHJpZXMuXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlQmFja2dyb3VuZHNGaWxlKGpzb246IGFueSwgZWRpdGlvbklkOiBzdHJpbmcpOiBQYXJzZWRNYXJrZG93bkZpbGVbXSB7XG4gIC8vIHB1bGwgaW4gdGhlIGFycmF5XG4gIGNvbnN0IHJhdzogYW55W10gPSBBcnJheS5pc0FycmF5KGpzb24uYmFja2dyb3VuZClcbiAgICA/IGpzb24uYmFja2dyb3VuZFxuICAgIDogQXJyYXkuaXNBcnJheShqc29uLmJhY2tncm91bmRzKVxuICAgID8ganNvbi5iYWNrZ3JvdW5kc1xuICAgIDogW107XG5cbiAgLy8gZmlsdGVyIG91dCB1bndhbnRlZCBlbnRyaWVzXG4gIGNvbnN0IGJhY2tncm91bmRzID0gcmF3LmZpbHRlcihiZyA9PiB7XG4gICAgY29uc3Qgbm06IHN0cmluZyA9IGJnLm5hbWUgfHwgXCJcIjtcbiAgICByZXR1cm4gIW5tLnN0YXJ0c1dpdGgoXCJWYXJpYW50XCIpICYmICFubS5pbmNsdWRlcyhcIkJhbGR1cidzIEdhdGVcIik7XG4gIH0pO1xuXG4gIGNvbnN0IG91dHB1dHM6IFBhcnNlZE1hcmtkb3duRmlsZVtdID0gW107XG5cbiAgYmFja2dyb3VuZHMuZm9yRWFjaChiZyA9PiB7XG4gICAgY29uc3QgbGluZXM6IHN0cmluZ1tdID0gW107XG5cbi8vIFx1MjUwMFx1MjUwMFx1MjUwMCBidWlsZCBmcm9udG1hdHRlciBcdTI1MDBcdTI1MDBcdTI1MDBcbmNvbnN0IGZtID0gYnVpbGRGTShiZywgQkFDS0dST1VORF9NRVRBX0RFRlMpO1xuXG4vLyBcdTI1MDBcdTI1MDBcdTI1MDAgY29sbGVjdCBvbmx5IHRoZSBlbnRyaWVzIGZsYWdnZWQgaXNGZWF0dXJlIFx1MjUwMFx1MjUwMFx1MjUwMFxuY29uc3QgZXh0cmFUcmFpdHM6IHN0cmluZ1tdID0gQXJyYXkuaXNBcnJheShiZy5lbnRyaWVzKVxuICA/IChiZy5lbnRyaWVzIGFzIGFueVtdKVxuICAgICAgLmZpbHRlcigoZTogYW55KSA9PiBlLmRhdGE/LmlzRmVhdHVyZSAmJiB0eXBlb2YgZS5uYW1lID09PSBcInN0cmluZ1wiKVxuICAgICAgLm1hcCgoZTogYW55KSA9PiB7XG4gICAgICAgIGNvbnN0IG5hbWUgPSBlLm5hbWUucmVwbGFjZSgvXkZlYXR1cmU6XFxzKi8sIFwiXCIpO1xuICAgICAgICByZXR1cm4gYFtbJHtiZy5uYW1lfSMke25hbWV9XV1gO1xuICAgICAgfSlcbiAgOiBbXTtcblxuLy8gXHUyNTAwXHUyNTAwXHUyNTAwIHNlcmlhbGl6ZSBmcm9udG1hdHRlciBcdTI1MDBcdTI1MDBcdTI1MDBcbmNvbnN0IHlhbWwgPSBzZXJpYWxpemVGcm9udG1hdHRlcihmbSwgQkFDS0dST1VORF9NRVRBX0RFRlMpO1xubGluZXMucHVzaChcIi0tLVwiLCB5YW1sLCBcIi0tLVwiLCBcIlwiKTtcblxuIFxuICAgIC8vIHRpdGxlXG4gICAgbGluZXMucHVzaChgIyAke2JnLm5hbWV9YCwgXCJcIik7XG5cbiAgICAvLyBcdTI1MDBcdTI1MDBcdTI1MDAgc2tpbGwgcHJvZmljaWVuY2llcyBcdTI1MDBcdTI1MDBcdTI1MDBcbiAgICBpZiAoQXJyYXkuaXNBcnJheShiZy5za2lsbFByb2ZpY2llbmNpZXMpICYmIGJnLnNraWxsUHJvZmljaWVuY2llcy5sZW5ndGgpIHtcbiAgICAgIGNvbnN0IHNraWxsczogc3RyaW5nW10gPSBbXTtcbiAgICAgIGJnLnNraWxsUHJvZmljaWVuY2llcy5mb3JFYWNoKChlbnQ6IGFueSkgPT4ge1xuICAgICAgICBpZiAodHlwZW9mIGVudCA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgIHNraWxscy5wdXNoKGNhcChlbnQpKTtcbiAgICAgICAgfSBlbHNlIGlmIChlbnQuY2hvb3NlICYmIEFycmF5LmlzQXJyYXkoZW50LmNob29zZS5mcm9tKSkge1xuICAgICAgICAgIHNraWxscy5wdXNoKGBDaG9vc2UgJHtlbnQuY2hvb3NlLmFtb3VudH0gZnJvbSAke2VudC5jaG9vc2UuZnJvbS5qb2luKFwiLCBcIil9YCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgT2JqZWN0LmVudHJpZXMoZW50KVxuICAgICAgICAgICAgLmZpbHRlcigoWywgdl0pID0+IHYgPT09IHRydWUpXG4gICAgICAgICAgICAuZm9yRWFjaCgoW2tdKSA9PiBza2lsbHMucHVzaChjYXAoaykpKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICBsaW5lcy5wdXNoKGAqKlNraWxsIFByb2ZpY2llbmNpZXM6KiogJHtza2lsbHMuam9pbihcIiwgXCIpfWAsIFwiXCIpO1xuICAgIH1cblxuICAgIC8vIFx1MjUwMFx1MjUwMFx1MjUwMCBsYW5ndWFnZSBwcm9maWNpZW5jaWVzIFx1MjUwMFx1MjUwMFx1MjUwMFxuICAgIGlmIChBcnJheS5pc0FycmF5KGJnLmxhbmd1YWdlUHJvZmljaWVuY2llcykgJiYgYmcubGFuZ3VhZ2VQcm9maWNpZW5jaWVzLmxlbmd0aCkge1xuICAgICAgY29uc3QgbGFuZ3M6IHN0cmluZ1tdID0gW107XG4gICAgICBiZy5sYW5ndWFnZVByb2ZpY2llbmNpZXMuZm9yRWFjaCgoZW50OiBhbnkpID0+IHtcbiAgICAgICAgaWYgKGVudC5hbnlTdGFuZGFyZCkge1xuICAgICAgICAgIGxhbmdzLnB1c2goYCR7ZW50LmFueVN0YW5kYXJkfSBvZiB5b3VyIGNob2ljZWApO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIE9iamVjdC5lbnRyaWVzKGVudClcbiAgICAgICAgICAgIC5maWx0ZXIoKFssIHZdKSA9PiB2ID09PSB0cnVlKVxuICAgICAgICAgICAgLmZvckVhY2goKFtrXSkgPT4gbGFuZ3MucHVzaChjYXAoaykpKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICBsaW5lcy5wdXNoKGAqKkxhbmd1YWdlczoqKiAke2xhbmdzLmpvaW4oXCIsIFwiKX1gLCBcIlwiKTtcbiAgICB9XG5cbiAgICAvLyBcdTI1MDBcdTI1MDBcdTI1MDAgdG9vbCBwcm9maWNpZW5jaWVzIFx1MjUwMFx1MjUwMFx1MjUwMFxuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShiZy50b29sUHJvZmljaWVuY2llcykgJiYgYmcudG9vbFByb2ZpY2llbmNpZXMubGVuZ3RoKSB7XG4gICAgICAgIGNvbnN0IHRvb2xzOiBzdHJpbmdbXSA9IFtdO1xuXG4gICAgICAgIGJnLnRvb2xQcm9maWNpZW5jaWVzLmZvckVhY2goKGVudDogYW55KSA9PiB7XG4gICAgICAgICAgICAvLyBcdTIwMUNDaG9vc2UgWCBmcm9tIFx1MjAyNlx1MjAxRFxuICAgICAgICAgICAgaWYgKGVudC5jaG9vc2UgJiYgQXJyYXkuaXNBcnJheShlbnQuY2hvb3NlLmZyb20pKSB7XG4gICAgICAgICAgICBjb25zdCBsaXN0ID0gZW50LmNob29zZS5mcm9tLm1hcChodW1hbml6ZSkuam9pbihcIiwgXCIpO1xuICAgICAgICAgICAgdG9vbHMucHVzaChgQ2hvb3NlICR7ZW50LmNob29zZS5jb3VudH0gZnJvbSAke2xpc3R9YCk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIHBsYWluIHN0cmluZyAocmFyZSBoZXJlLCBidXQganVzdCBpbiBjYXNlKVxuICAgICAgICAgICAgaWYgKHR5cGVvZiBlbnQgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgIHRvb2xzLnB1c2goaHVtYW5pemUoZW50KSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIG9iamVjdCB3aXRoIGJvb2xlYW4gZmxhZ3M6IGdhdGhlciAqYWxsKiB0cnVlIGtleXNcbiAgICAgICAgICAgIE9iamVjdC5lbnRyaWVzKGVudClcbiAgICAgICAgICAgIC5maWx0ZXIoKFtfLCB2XSkgPT4gdiA9PT0gdHJ1ZSlcbiAgICAgICAgICAgIC5mb3JFYWNoKChba10pID0+IHRvb2xzLnB1c2goaHVtYW5pemUoaykpKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgbGluZXMucHVzaChgKipUb29sIFByb2ZpY2llbmNpZXM6KiogJHt0b29scy5qb2luKFwiLCBcIil9YCwgXCJcIik7XG4gICAgICAgIH1cblxuXG5cbiAgICAvLyBcdTI1MDBcdTI1MDBcdTI1MDAgc3RhcnRpbmcgZXF1aXBtZW50IFx1MjUwMFx1MjUwMFx1MjUwMFxuICAgIGlmIChBcnJheS5pc0FycmF5KGJnLnN0YXJ0aW5nRXF1aXBtZW50KSAmJiBiZy5zdGFydGluZ0VxdWlwbWVudC5sZW5ndGgpIHtcbiAgICAgIGxpbmVzLnB1c2goYCoqRXF1aXBtZW50OioqYCk7XG4gICAgICBiZy5zdGFydGluZ0VxdWlwbWVudC5mb3JFYWNoKChncnA6IGFueSkgPT4ge1xuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShncnAuXykpIHtcbiAgICAgICAgICBncnAuXy5mb3JFYWNoKChpdDogYW55KSA9PiBsaW5lcy5wdXNoKGAtICR7Zm10SXRlbShpdCl9YCkpO1xuICAgICAgICB9XG4gICAgICAgIFtcImFcIiwgXCJiXCJdLmZvckVhY2goa2V5ID0+IHtcbiAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShncnBba2V5XSkpIHtcbiAgICAgICAgICAgIGdycFtrZXldLmZvckVhY2goKGl0OiBhbnkpID0+IGxpbmVzLnB1c2goYC0gJHtmbXRJdGVtKGl0KX1gKSk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgICAgbGluZXMucHVzaChcIlwiKTtcbiAgICB9XG5cbiAgICAvLyBcdTI1MDBcdTI1MDBcdTI1MDAgYWxsIGZlYXR1cmUgJiBlbnRyaWVzIGJsb2NrcyBcdTI1MDBcdTI1MDBcdTI1MDBcbiAgICBpZiAoQXJyYXkuaXNBcnJheShiZy5lbnRyaWVzKSkge1xuICAgICAgYmcuZW50cmllcy5mb3JFYWNoKChlbnRyeTogYW55KSA9PiB7XG4gICAgICAgIC8vIHNraXAgdGhlIHN1bW1hcnkgbGlzdCBibG9ja1xuICAgICAgICBpZiAoZW50cnkudHlwZSA9PT0gXCJsaXN0XCIgJiYgZW50cnkuc3R5bGUgPT09IFwibGlzdC1oYW5nLW5vdGl0bGVcIikge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICAvLyBzZWN0aW9uIGhlYWRlclxuICAgICAgICBpZiAoZW50cnkubmFtZSkge1xuY29uc3QgaGVhZGVyID0gZW50cnkuZGF0YT8uaXNGZWF0dXJlXG4gID8gZW50cnkubmFtZS5yZXBsYWNlKC9eRmVhdHVyZTpcXHMqLywgXCJcIilcbiAgOiBlbnRyeS5uYW1lO1xubGluZXMucHVzaChgIyMgJHtoZWFkZXJ9YCwgXCJcIik7ICAgICAgICB9XG4gICAgICAgIC8vIGVudHJ5IGNvbnRlbnRcbiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoZW50cnkuZW50cmllcykpIHtcbiAgICAgICAgICBlbnRyeS5lbnRyaWVzLmZvckVhY2goKGU6IGFueSkgPT4ge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBlID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICAgIGxpbmVzLnB1c2gocmVwbGFjZTVlVGFncyhlKSwgXCJcIik7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGUudHlwZSA9PT0gXCJsaXN0XCIgJiYgQXJyYXkuaXNBcnJheShlLml0ZW1zKSkge1xuICAgICAgICAgICAgICBlLml0ZW1zLmZvckVhY2goKGl0OiBhbnkpID0+XG4gICAgICAgICAgICAgICAgbGluZXMucHVzaChgLSAke3JlcGxhY2U1ZVRhZ3MoaXQuZW50cnkgPz8gaXQpfWApXG4gICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgIGxpbmVzLnB1c2goXCJcIik7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGUudHlwZSA9PT0gXCJ0YWJsZVwiKSB7XG4gICAgICAgICAgICAgIGNvbnN0IHRibCA9IHJlbmRlck1hcmtkb3duVGFibGUoZSk7XG4gICAgICAgICAgICAgIGlmICh0YmwpIGxpbmVzLnB1c2godGJsLCBcIlwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIGlmIChlbnRyeS50eXBlID09PSBcImxpc3RcIiAmJiBBcnJheS5pc0FycmF5KGVudHJ5Lml0ZW1zKSkge1xuICAgICAgICAgIGVudHJ5Lml0ZW1zLmZvckVhY2goKGl0OiBhbnkpID0+XG4gICAgICAgICAgICBsaW5lcy5wdXNoKGAtICR7cmVwbGFjZTVlVGFncyhpdC5lbnRyeSA/PyBpdCl9YClcbiAgICAgICAgICApO1xuICAgICAgICAgIGxpbmVzLnB1c2goXCJcIik7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cblxuICAgIG91dHB1dHMucHVzaCh7XG4gICAgICBwYXRoOiBgUGxheWVyIEJ1aWxkL0JhY2tncm91bmRzLyR7YmcubmFtZX0ubWRgLFxuICAgICAgY29udGVudDogbGluZXMuam9pbihcIlxcblwiKS50cmltRW5kKCkgKyBcIlxcblwiLFxuICAgIH0pO1xuICB9KTtcblxuICByZXR1cm4gb3V0cHV0cztcbn1cblxuLy8gXHUyMDE0XHUyMDE0XHUyMDE0IGhlbHBlcnMgXHUyMDE0XHUyMDE0XHUyMDE0XG5mdW5jdGlvbiBjYXAoc3RyOiBzdHJpbmcpIHtcbiAgcmV0dXJuIHN0ci5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIHN0ci5zbGljZSgxKTtcbn1cblxuXG5mdW5jdGlvbiBmbXRJdGVtKGl0ZW06IGFueSk6IHN0cmluZyB7XG4gIC8vIDEpIHJhdyBzdHJpbmcgb3IgdGFnZ2VkIGl0ZW1cbiAgaWYgKHR5cGVvZiBpdGVtID09PSBcInN0cmluZ1wiKSB7XG4gICAgaWYgKGl0ZW0uaW5jbHVkZXMoXCJ8XCIpKSB7XG4gICAgICByZXR1cm4gcmVwbGFjZTVlVGFncyhge0BpdGVtICR7aXRlbX19YCk7XG4gICAgfVxuICAgIHJldHVybiByZXBsYWNlNWVUYWdzKGl0ZW0pO1xuICB9XG5cbiAgLy8gMikgcHVyZSBnb2xkLXBpZWNlIGVudHJ5OiB7IHZhbHVlOiAxMCB9IG9yIHsgY29udGFpbnNWYWx1ZTogMTUwMCB9XG4gIGNvbnN0IHByaWNlUmF3ID0gKGl0ZW0uY29udGFpbnNWYWx1ZSA/PyBpdGVtLnZhbHVlKSBhcyBudW1iZXIgfCB1bmRlZmluZWQ7XG4gIGlmIChcbiAgICB0eXBlb2YgcHJpY2VSYXcgPT09IFwibnVtYmVyXCIgJiZcbiAgICAvLyBtYWtlIHN1cmUgaXRcdTIwMTlzIG5vdCBhbHNvIGFuIFx1MjAxQ2l0ZW1cdTIwMUQgb3IgXHUyMDFDZXF1aXBtZW50VHlwZVx1MjAxRFxuICAgICFpdGVtLml0ZW0gJiZcbiAgICAhaXRlbS5lcXVpcG1lbnRUeXBlICYmXG4gICAgIWl0ZW0uc3BlY2lhbFxuICApIHtcbiAgICBjb25zdCBncCA9IHByaWNlUmF3ID49IDEwMCA/IHByaWNlUmF3IC8gMTAwIDogcHJpY2VSYXc7XG4gICAgcmV0dXJuIGAke2dwfSBncGA7XG4gIH1cblxuICAvLyAzKSBleHBsaWNpdCBpdGVtIG9iamVjdCB3aXRoIG9wdGlvbmFsIHByaWNlXG4gIGlmIChpdGVtLml0ZW0pIHtcbiAgICBjb25zdCBsaW5rID0gcmVwbGFjZTVlVGFncyhge0BpdGVtICR7aXRlbS5pdGVtfX1gKTtcbiAgICBpZiAodHlwZW9mIHByaWNlUmF3ID09PSBcIm51bWJlclwiKSB7XG4gICAgICBjb25zdCBncCA9IHByaWNlUmF3ID49IDEwMCA/IHByaWNlUmF3IC8gMTAwIDogcHJpY2VSYXc7XG4gICAgICByZXR1cm4gYCR7bGlua30gKCR7Z3B9IGdwKWA7XG4gICAgfVxuICAgIHJldHVybiBsaW5rO1xuICB9XG5cbiAgLy8gNCkgc3BlY2lhbC1jYXNlIHRleHRcbiAgaWYgKHR5cGVvZiBpdGVtLnNwZWNpYWwgPT09IFwic3RyaW5nXCIpIHtcbiAgICByZXR1cm4gaXRlbS5zcGVjaWFsO1xuICB9XG5cbiAgLy8gNSkga25vd24gZXF1aXBtZW50VHlwZSBrZXlzXG4gIGlmIChpdGVtLmVxdWlwbWVudFR5cGUpIHtcbiAgICBzd2l0Y2ggKGl0ZW0uZXF1aXBtZW50VHlwZSkge1xuICAgICAgY2FzZSBcInRvb2xBcnRpc2FuXCI6XG4gICAgICAgIHJldHVybiBcIk9uZSB0eXBlIG9mIGFydGlzYW5cdTIwMTlzIHRvb2xzIChvZiB5b3VyIGNob2ljZSlcIjtcbiAgICAgIGNhc2UgXCJpbnN0cnVtZW50TXVzaWNhbFwiOlxuICAgICAgICByZXR1cm4gXCJPbmUgdHlwZSBvZiBtdXNpY2FsIGluc3RydW1lbnQgKG9mIHlvdXIgY2hvaWNlKVwiO1xuICAgICAgY2FzZSBcInNldEdhbWluZ1wiOlxuICAgICAgICByZXR1cm4gXCJPbmUgc2V0IG9mIGdhbWluZyBkaWNlIChvZiB5b3VyIGNob2ljZSlcIjtcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiBodW1hbml6ZShpdGVtLmVxdWlwbWVudFR5cGUpO1xuICAgIH1cbiAgfVxuXG4gIC8vIDYpIGZhbGxiYWNrOiBkdW1wIGFueSBsZWZ0b3ZlciB0YWcgc3ludGF4XG4gIHJldHVybiByZXBsYWNlNWVUYWdzKEpTT04uc3RyaW5naWZ5KGl0ZW0pKTtcbn1cblxuXG5cbmZ1bmN0aW9uIGh1bWFuaXplKHN0cjogc3RyaW5nKTogc3RyaW5nIHtcbiAgY29uc3Qgc3BhY2VkID0gc3RyLnJlcGxhY2UoLyhbYS16XSkoW0EtWl0pL2csIFwiJDEgJDJcIik7XG4gIHJldHVybiBzcGFjZWQuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBzcGFjZWQuc2xpY2UoMSk7XG59XG4iLCAiLy81ZSAyMDI1IGluc3RhbGxlclxuXG5pbXBvcnQgeyBBcHAsIG5vcm1hbGl6ZVBhdGggfSBmcm9tIFwib2JzaWRpYW5cIjtcbmltcG9ydCB0eXBlIHsgRWRpdGlvbiB9IGZyb20gXCIuLi8uLi9lZGl0aW9uc1wiO1xuaW1wb3J0IHsgcGFyc2VTcGVsbHNGaWxlIH0gZnJvbSBcIi4vc3BlbGxzXCI7XG5pbXBvcnQgeyBwYXJzZUJlc3RpYXJ5RmlsZSB9IGZyb20gXCIuL2Jlc3RpYXJ5XCI7XG5pbXBvcnQgeyBwYXJzZUl0ZW1zRmlsZSB9IGZyb20gXCIuL2l0ZW1zXCI7XG5pbXBvcnQgeyBwYXJzZVNwZWNpZXNGaWxlIH0gZnJvbSBcIi4vc3BlY2llc1wiO1xuaW1wb3J0IHsgcGFyc2VDbGFzc0ZpbGUgfSBmcm9tIFwiLi9jbGFzc2VzXCI7XG5pbXBvcnQgeyBwYXJzZUFjdGlvbnNGaWxlLCBwYXJzZUNvbmRpdGlvbnNEaXNlYXNlc0ZpbGUsIHBhcnNlU2Vuc2VzRmlsZSwgcGFyc2VTa2lsbHNGaWxlIH0gZnJvbSBcIi4vcnVsZXNcIjtcbmltcG9ydCB7IHBhcnNlRmVhdHNGaWxlIH0gZnJvbSBcIi4vZmVhdHNcIjtcbmltcG9ydCB7IHBhcnNlQmFja2dyb3VuZHNGaWxlIH0gZnJvbSBcIi4vYmFja2dyb3VuZHNcIjtcbmltcG9ydCB7IFRGaWxlIH0gZnJvbSBcIm9ic2lkaWFuXCI7XG5cblxuLy8gXHUyMDE0IEdpdEh1YiBsaXN0aW5ncyBcdTIwMTRcbmFzeW5jIGZ1bmN0aW9uIGxpc3RTcGVsbEZpbGVzRnJvbUdpdEh1YihyZXBvOiBzdHJpbmcpOiBQcm9taXNlPHN0cmluZ1tdPiB7XG4gIGNvbnN0IHVybCA9IGBodHRwczovL2FwaS5naXRodWIuY29tL3JlcG9zLyR7cmVwb30vY29udGVudHMvZGF0YS9zcGVsbHNgO1xuICBjb25zdCByZXMgPSBhd2FpdCBmZXRjaCh1cmwpO1xuICBjb25zdCBkYXRhID0gKGF3YWl0IHJlcy5qc29uKCkpIGFzIEFycmF5PHsgbmFtZTogc3RyaW5nOyB0eXBlOiBzdHJpbmcgfT47XG4gIHJldHVybiBkYXRhXG4gICAgLmZpbHRlcihpdGVtID0+IGl0ZW0udHlwZSA9PT0gXCJmaWxlXCIgJiYgaXRlbS5uYW1lLnN0YXJ0c1dpdGgoXCJzcGVsbHMtXCIpICYmIGl0ZW0ubmFtZS5lbmRzV2l0aChcIi5qc29uXCIpKVxuICAgIC5tYXAoaXRlbSA9PiBpdGVtLm5hbWUpO1xufVxuXG5hc3luYyBmdW5jdGlvbiBsaXN0QmVzdGlhcnlGaWxlc0Zyb21HaXRIdWIocmVwbzogc3RyaW5nKTogUHJvbWlzZTxzdHJpbmdbXT4ge1xuICBjb25zdCB1cmwgPSBgaHR0cHM6Ly9hcGkuZ2l0aHViLmNvbS9yZXBvcy8ke3JlcG99L2NvbnRlbnRzL2RhdGEvYmVzdGlhcnlgO1xuICBjb25zdCByZXMgPSBhd2FpdCBmZXRjaCh1cmwpO1xuICBjb25zdCBsaXN0ID0gKGF3YWl0IHJlcy5qc29uKCkpIGFzIEFycmF5PHsgbmFtZTogc3RyaW5nOyB0eXBlOiBzdHJpbmcgfT47XG4gIGNvbnN0IENPUkVfU09VUkNFUyA9IFtcbiAgICBcImJlc3RpYXJ5LXBoYi5qc29uXCIsIFwiYmVzdGlhcnktbW0uanNvblwiLCBcImJlc3RpYXJ5LWRtZy5qc29uXCIsXG4gICAgXCJiZXN0aWFyeS14Z2UuanNvblwiLCBcImJlc3RpYXJ5LXZnbS5qc29uXCIsIFwiYmVzdGlhcnktdGNlLmpzb25cIixcbiAgICBcImJlc3RpYXJ5LWVndy5qc29uXCIsIFwiYmVzdGlhcnktZXJsdy5qc29uXCIsIFwiYmVzdGlhcnktbXRmLmpzb25cIixcbiAgICBcImJlc3RpYXJ5LXZyZ3IuanNvblwiLCBcImJlc3RpYXJ5LWNvcy5qc29uXCIsIFwiYmVzdGlhcnktb290YS5qc29uXCIsXG4gICAgXCJiZXN0aWFyeS1wb3RhLmpzb25cIiwgXCJiZXN0aWFyeS1ob3RkcS5qc29uXCIsIFwiYmVzdGlhcnktcm90Lmpzb25cIixcbiAgICBcImJlc3RpYXJ5LXNrdC5qc29uXCIsIFwiYmVzdGlhcnktdGZ0eXAuanNvblwiLCBcImJlc3RpYXJ5LXRvYS5qc29uXCJcbiAgXTtcbiAgcmV0dXJuIGxpc3RcbiAgICAuZmlsdGVyKGl0ZW0gPT4gaXRlbS50eXBlID09PSBcImZpbGVcIiAmJiBDT1JFX1NPVVJDRVMuaW5jbHVkZXMoaXRlbS5uYW1lKSlcbiAgICAubWFwKGl0ZW0gPT4gaXRlbS5uYW1lKTtcbn1cblxuY29uc3QgSVRFTV9KU09OX0ZJTEVTID0gW1xuICBcIml0ZW1zLWJhc2UuanNvblwiLFxuICBcIml0ZW1zLmpzb25cIixcbiAgXCJvYmplY3RzLmpzb25cIixcbiAgXCJ2ZWhpY2xlcy5qc29uXCIsXG4gIFwiZGVja3MuanNvblwiLFxuXTtcblxuYXN5bmMgZnVuY3Rpb24gbGlzdEl0ZW1GaWxlc0Zyb21HaXRIdWIocmVwbzogc3RyaW5nKTogUHJvbWlzZTxzdHJpbmdbXT4ge1xuICBjb25zdCB1cmwgPSBgaHR0cHM6Ly9hcGkuZ2l0aHViLmNvbS9yZXBvcy8ke3JlcG99L2NvbnRlbnRzL2RhdGFgO1xuICBjb25zdCByZXMgPSBhd2FpdCBmZXRjaCh1cmwpO1xuICBjb25zdCBkYXRhID0gKGF3YWl0IHJlcy5qc29uKCkpIGFzIEFycmF5PHsgbmFtZTogc3RyaW5nOyB0eXBlOiBzdHJpbmcgfT47XG4gIHJldHVybiBkYXRhXG4gICAgLmZpbHRlcihpdGVtID0+IGl0ZW0udHlwZSA9PT0gXCJmaWxlXCIgJiYgSVRFTV9KU09OX0ZJTEVTLmluY2x1ZGVzKGl0ZW0ubmFtZSkpXG4gICAgLm1hcChpdGVtID0+IGl0ZW0ubmFtZSk7XG59XG5cbmFzeW5jIGZ1bmN0aW9uIGxpc3RDbGFzc0ZpbGVzRnJvbUdpdEh1YihyZXBvOiBzdHJpbmcpOiBQcm9taXNlPHN0cmluZ1tdPiB7XG4gIGNvbnN0IHVybCA9IGBodHRwczovL2FwaS5naXRodWIuY29tL3JlcG9zLyR7cmVwb30vY29udGVudHMvZGF0YS9jbGFzc2A7XG4gIGNvbnN0IHJlcyA9IGF3YWl0IGZldGNoKHVybCk7XG4gIGNvbnN0IGxpc3RpbmcgPSAoYXdhaXQgcmVzLmpzb24oKSkgYXMgQXJyYXk8eyBuYW1lOiBzdHJpbmc7IHR5cGU6IHN0cmluZyB9PjtcbiAgcmV0dXJuIGxpc3RpbmdcbiAgICAuZmlsdGVyKGl0ZW0gPT5cbiAgICAgIGl0ZW0udHlwZSA9PT0gXCJmaWxlXCIgJiZcbiAgICAgIGl0ZW0ubmFtZS5zdGFydHNXaXRoKFwiY2xhc3MtXCIpICYmXG4gICAgICBpdGVtLm5hbWUuZW5kc1dpdGgoXCIuanNvblwiKVxuICAgIClcbiAgICAubWFwKGl0ZW0gPT4gaXRlbS5uYW1lKTtcbn1cblxuLy8gXHUyMDE0IGVuc3VyZSB0aGUgdmF1bHQgZm9sZGVyIGV4aXN0cyBcdTIwMTRcbmFzeW5jIGZ1bmN0aW9uIGVuc3VyZUZvbGRlcihhcHA6IEFwcCwgZm9sZGVyUGF0aDogc3RyaW5nKSB7XG4gIGNvbnN0IHBhcnRzID0gZm9sZGVyUGF0aC5zcGxpdChcIi9cIik7XG4gIGxldCBjdXJyID0gXCJcIjtcbiAgZm9yIChjb25zdCBwIG9mIHBhcnRzKSB7XG4gICAgY3VyciA9IGN1cnIgPyBgJHtjdXJyfS8ke3B9YCA6IHA7XG4gICAgdHJ5IHsgYXdhaXQgYXBwLnZhdWx0LmNyZWF0ZUZvbGRlcihjdXJyKTsgfVxuICAgIGNhdGNoIHt9IC8vIGFscmVhZHkgZXhpc3RzXG4gIH1cbn1cblxuLy8gXHUyMDE0IHRoZSBvbmUgZW50cnktcG9pbnQgdGhhdCB5b3VyIHRvcC1sZXZlbCBjYWxscyBcdTIwMTRcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBpbXBvcnRFZGl0aW9uRGF0YShwYXJhbXM6IHtcbiAgYXBwOiBBcHA7XG4gIGVkaXRpb246IEVkaXRpb247XG4gIHRhcmdldFBhdGg6IHN0cmluZztcbn0pIHtcbiAgY29uc3QgeyBhcHAsIGVkaXRpb24sIHRhcmdldFBhdGggfSA9IHBhcmFtcztcbiAgY29uc3QgcmVwbyA9IGVkaXRpb24ucmVwbyA/PyBcIlwiO1xuXG4gIC8vIFx1RDgzRFx1REQzOSBTUEVMTFNcbiAge1xuICAgIGNvbnN0IHNwZWxsRmlsZXMgPSBhd2FpdCBsaXN0U3BlbGxGaWxlc0Zyb21HaXRIdWIocmVwbyk7XG4gICAgZm9yIChjb25zdCBmaWxlTmFtZSBvZiBzcGVsbEZpbGVzKSB7XG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCByZXMgID0gYXdhaXQgZmV0Y2goYCR7ZWRpdGlvbi5zb3VyY2VVcmx9L3NwZWxscy8ke2ZpbGVOYW1lfWApO1xuICAgICAgICBjb25zdCBqc29uID0gYXdhaXQgcmVzLmpzb24oKTtcbiAgICAgICAgY29uc3QgZmlsZXMgPSBwYXJzZVNwZWxsc0ZpbGUoanNvbiwgZWRpdGlvbi5pZCk7XG4gICAgICAgIGZvciAoY29uc3QgbWQgb2YgZmlsZXMpIHtcbiAgICAgICAgICBjb25zdCBmdWxsUGF0aCA9IG5vcm1hbGl6ZVBhdGgoYCR7dGFyZ2V0UGF0aH0vU3BlbGxzLyR7bWQucGF0aH1gKTtcbiAgICAgICAgICBjb25zdCBmb2xkZXIgICA9IGZ1bGxQYXRoLnNwbGl0KFwiL1wiKS5zbGljZSgwLCAtMSkuam9pbihcIi9cIik7XG4gICAgICAgICAgYXdhaXQgZW5zdXJlRm9sZGVyKGFwcCwgZm9sZGVyKTtcbiAgICAgICAgICBhd2FpdCBhcHAudmF1bHQuYWRhcHRlci53cml0ZShmdWxsUGF0aCwgbWQuY29udGVudCk7XG4gICAgICAgIH1cbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgY29uc29sZS53YXJuKGBGYWlsZWQgdG8gaW1wb3J0IHNwZWxsICR7ZmlsZU5hbWV9OmAsIGUpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8vIFx1RDgzRFx1REQzOSBCRVNUSUFSWVxuICB7XG4gICAgY29uc3QgYmVzdGlhcnlGaWxlcyA9IGF3YWl0IGxpc3RCZXN0aWFyeUZpbGVzRnJvbUdpdEh1YihyZXBvKTtcbiAgICBmb3IgKGNvbnN0IGZpbGVOYW1lIG9mIGJlc3RpYXJ5RmlsZXMpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHJlcyAgICA9IGF3YWl0IGZldGNoKGAke2VkaXRpb24uc291cmNlVXJsfS9iZXN0aWFyeS8ke2ZpbGVOYW1lfWApO1xuICAgICAgICBjb25zdCBqc29uICAgPSBhd2FpdCByZXMuanNvbigpO1xuICAgICAgICBjb25zdCBwYXJzZWQgPSBwYXJzZUJlc3RpYXJ5RmlsZShqc29uLCBlZGl0aW9uLmlkKTtcbiAgICAgICAgZm9yIChjb25zdCBtZCBvZiBwYXJzZWQpIHtcbiAgICAgICAgICBjb25zdCBmdWxsUGF0aCA9IG5vcm1hbGl6ZVBhdGgoYCR7dGFyZ2V0UGF0aH0vQmVzdGlhcnkvJHttZC5wYXRofWApO1xuICAgICAgICAgIGNvbnN0IGZvbGRlciAgID0gZnVsbFBhdGguc3BsaXQoXCIvXCIpLnNsaWNlKDAsIC0xKS5qb2luKFwiL1wiKTtcbiAgICAgICAgICBhd2FpdCBlbnN1cmVGb2xkZXIoYXBwLCBmb2xkZXIpO1xuICAgICAgICAgIGF3YWl0IGFwcC52YXVsdC5hZGFwdGVyLndyaXRlKGZ1bGxQYXRoLCBtZC5jb250ZW50KTtcbiAgICAgICAgfVxuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBjb25zb2xlLndhcm4oYEZhaWxlZCB0byBpbXBvcnQgYmVzdGlhcnkgJHtmaWxlTmFtZX06YCwgZSk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLy8gXHVEODNEXHVERDM5IElURU1TXG4gIHtcbiAgICBjb25zdCBpdGVtRmlsZXMgPSBhd2FpdCBsaXN0SXRlbUZpbGVzRnJvbUdpdEh1YihyZXBvKTtcbiAgICBmb3IgKGNvbnN0IGZuIG9mIGl0ZW1GaWxlcykge1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgcmVzICA9IGF3YWl0IGZldGNoKGAke2VkaXRpb24uc291cmNlVXJsfS8ke2ZufWApO1xuICAgICAgICBjb25zdCBqc29uID0gYXdhaXQgcmVzLmpzb24oKTtcbiAgICAgICAgY29uc3QgbWRGaWxlcyA9IHBhcnNlSXRlbXNGaWxlKGpzb24sIGVkaXRpb24uaWQpO1xuICAgICAgICBmb3IgKGNvbnN0IG1kIG9mIG1kRmlsZXMpIHtcbiAgICAgICAgICBjb25zdCBmdWxsUGF0aCA9IG5vcm1hbGl6ZVBhdGgoYCR7dGFyZ2V0UGF0aH0vJHttZC5wYXRofWApO1xuICAgICAgICAgIGNvbnN0IGZvbGRlciAgID0gZnVsbFBhdGguc3BsaXQoXCIvXCIpLnNsaWNlKDAsIC0xKS5qb2luKFwiL1wiKTtcbiAgICAgICAgICBhd2FpdCBlbnN1cmVGb2xkZXIoYXBwLCBmb2xkZXIpO1xuICAgICAgICAgIGF3YWl0IGFwcC52YXVsdC5hZGFwdGVyLndyaXRlKGZ1bGxQYXRoLCBtZC5jb250ZW50KTtcbiAgICAgICAgfVxuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBjb25zb2xlLndhcm4oYEZhaWxlZCB0byBpbXBvcnQgaXRlbXMgZnJvbSAke2ZufTpgLCBlKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbi8vIFx1RDgzRFx1REQzOSBTUEVDSUVTXG57XG4gIGNvbnN0IHJlcyAgPSBhd2FpdCBmZXRjaChgJHtlZGl0aW9uLnNvdXJjZVVybH0vcmFjZXMuanNvbmApO1xuICBjb25zdCBqc29uID0gYXdhaXQgcmVzLmpzb24oKTtcbiAgY29uc3QgbWRGaWxlcyA9IHBhcnNlU3BlY2llc0ZpbGUoanNvbiwgZWRpdGlvbi5pZCk7XG4gIGZvciAoY29uc3QgbWQgb2YgbWRGaWxlcykge1xuICAgIGNvbnN0IGZ1bGxQYXRoID0gbm9ybWFsaXplUGF0aChgJHt0YXJnZXRQYXRofS9QbGF5ZXIgQnVpbGQvJHttZC5wYXRofWApO1xuICAgIGF3YWl0IGVuc3VyZUZvbGRlcihhcHAsIGZ1bGxQYXRoLnNwbGl0KFwiL1wiKS5zbGljZSgwLCAtMSkuam9pbihcIi9cIikpO1xuICAgIGF3YWl0IGFwcC52YXVsdC5hZGFwdGVyLndyaXRlKGZ1bGxQYXRoLCBtZC5jb250ZW50KTtcbiAgfVxuLy8gXHVEODNEXHVERDM5IEZFVENIIE9QVElPTkFMIEZFQVRVUkVTIEpTT05cbmxldCBvcHRpb25hbEZlYXR1cmVzOiBhbnlbXSA9IFtdO1xudHJ5IHtcbiAgY29uc3QgdXJsICA9IGAke2VkaXRpb24uc291cmNlVXJsfS9vcHRpb25hbGZlYXR1cmVzLmpzb25gO1xuICBjb25zdCByZXMgID0gYXdhaXQgZmV0Y2godXJsKTtcbiAgY29uc3QgdGV4dCA9IGF3YWl0IHJlcy50ZXh0KCk7XG5cbiAgLy8gc3RyaXAgYW55IEpTT04taGlqYWNrIHByZWZpeCAoZS5nLiApXX0nLCkgYW5kIGFueSBCT00vd2hpdGVzcGFjZVxuICBjb25zdCBzdGFydCA9IHRleHQuaW5kZXhPZihcIntcIik7XG4gIGlmIChzdGFydCA9PT0gLTEpIHRocm93IG5ldyBFcnJvcihcIk5vIEpTT04gb2JqZWN0IGZvdW5kXCIpO1xuICBjb25zdCBjbGVhbkpzb24gPSB0ZXh0LnNsaWNlKHN0YXJ0KTtcblxuICBjb25zdCByYXcgPSBKU09OLnBhcnNlKGNsZWFuSnNvbik7XG4gIG9wdGlvbmFsRmVhdHVyZXMgPSBBcnJheS5pc0FycmF5KHJhdy5vcHRpb25hbGZlYXR1cmUpXG4gICAgPyByYXcub3B0aW9uYWxmZWF0dXJlXG4gICAgOiBbXTtcbn0gY2F0Y2ggKGUpIHtcbiAgY29uc29sZS53YXJuKFwiRmFpbGVkIHRvIGltcG9ydCBvcHRpb25hbGZlYXR1cmVzLmpzb246XCIsIGUpO1xufVxuLy8gXHVEODNEXHVERDM5IENMQVNTRVNcbntcbiAgY29uc3QgY2xhc3NGaWxlcyA9IGF3YWl0IGxpc3RDbGFzc0ZpbGVzRnJvbUdpdEh1YihyZXBvKTtcbiAgZm9yIChjb25zdCBmaWxlTmFtZSBvZiBjbGFzc0ZpbGVzKSB7XG4gICAgdHJ5IHtcbiAgICAgIC8vIGZldGNoIHRoZSByYXcgY2xhc3MgSlNPTlxuICAgICAgY29uc3QgcmVzICAgID0gYXdhaXQgZmV0Y2goYCR7ZWRpdGlvbi5zb3VyY2VVcmx9L2NsYXNzLyR7ZmlsZU5hbWV9YCk7XG4gICAgICBjb25zdCBqc29uICAgPSBhd2FpdCByZXMuanNvbigpO1xuXG4gICAgICAvLyBwYXJzZSBpbnRvIG9uZSBvciBtb3JlIG1hcmtkb3duIGZpbGVzXG4gICAgICBjb25zdCBtZEZpbGVzID0gcGFyc2VDbGFzc0ZpbGUoXG4gICAgICAgIGpzb24sXG4gICAgICAgIGVkaXRpb24uaWQsXG4gICAgICAgIGZpbGVOYW1lLFxuICAgICAgICBvcHRpb25hbEZlYXR1cmVzXG4gICAgICApO1xuICAgICAgZm9yIChjb25zdCBtZCBvZiBtZEZpbGVzKSB7XG4gICAgICAgIGNvbnN0IGZ1bGxQYXRoID0gbm9ybWFsaXplUGF0aChgJHt0YXJnZXRQYXRofS9QbGF5ZXIgQnVpbGQvJHttZC5wYXRofWApO1xuICAgICAgICAvLyAxKSBlbnN1cmUgdGhlIGZvbGRlciBleGlzdHNcbiAgICAgICAgYXdhaXQgZW5zdXJlRm9sZGVyKGFwcCwgZnVsbFBhdGguc3BsaXQoXCIvXCIpLnNsaWNlKDAsIC0xKS5qb2luKFwiL1wiKSk7XG5cbiAgICAgICAgLy8gMikgd3JpdGUgdmlhIE9ic2lkaWFuXHUyMDE5cyBBUEkgc28gbm90ZXMgcmVmcmVzaFxuICAgICAgICBjb25zdCBleGlzdGluZyA9IGFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoZnVsbFBhdGgpO1xuICAgICAgICBpZiAoZXhpc3RpbmcgaW5zdGFuY2VvZiBURmlsZSkge1xuICAgICAgICAgIC8vIE92ZXJ3cml0ZSBhbiBleGlzdGluZyBub3RlIGFuZCBmaXJlIHRoZSBjaGFuZ2UgZXZlbnRcbiAgICAgICAgICBhd2FpdCBhcHAudmF1bHQubW9kaWZ5KGV4aXN0aW5nLCBtZC5jb250ZW50KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBDcmVhdGUgYSBicmFuZC1uZXcgbm90ZSAoYWxzbyBmaXJlcyB0aGUgY2hhbmdlIGV2ZW50KVxuICAgICAgICAgIGF3YWl0IGFwcC52YXVsdC5jcmVhdGUoZnVsbFBhdGgsIG1kLmNvbnRlbnQpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgY29uc29sZS53YXJuKGBGYWlsZWQgdG8gaW1wb3J0IGNsYXNzICR7ZmlsZU5hbWV9OmAsIGUpO1xuICAgIH1cbiAgfVxufVxuXG5cbiAvLyBcdUQ4M0RcdUREMzkgUlVMRVM6IEFDVElPTlNcbiAge1xuICAgIHRyeSB7XG5cbiAgICAgIGNvbnN0IHJlcyAgPSBhd2FpdCBmZXRjaChgJHtlZGl0aW9uLnNvdXJjZVVybH0vYWN0aW9ucy5qc29uYCk7XG4gICAgICBjb25zdCBqc29uID0gYXdhaXQgcmVzLmpzb24oKTtcbiAgICBcbiAgICAgIGNvbnN0IG1kRmlsZXMgPSBwYXJzZUFjdGlvbnNGaWxlKGpzb24sIGVkaXRpb24uaWQpO1xuICAgIFxuICAgICAgZm9yIChjb25zdCBtZCBvZiBtZEZpbGVzKSB7XG4gICAgICAgIGNvbnN0IGZ1bGxQYXRoID0gbm9ybWFsaXplUGF0aChcbiAgICAgICAgICBgJHt0YXJnZXRQYXRofS8ke21kLnBhdGh9YFxuICAgICAgICApO1xuICAgICAgICBjb25zdCBmb2xkZXIgPSBmdWxsUGF0aC5zcGxpdChcIi9cIikuc2xpY2UoMCwgLTEpLmpvaW4oXCIvXCIpO1xuXG4gICAgICAgIGF3YWl0IGVuc3VyZUZvbGRlcihhcHAsIGZvbGRlcik7XG4gICAgICAgIGF3YWl0IGFwcC52YXVsdC5hZGFwdGVyLndyaXRlKGZ1bGxQYXRoLCBtZC5jb250ZW50KTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICBjb25zb2xlLndhcm4oXCJGYWlsZWQgdG8gaW1wb3J0IGFjdGlvbnMuanNvbjpcIiwgZSk7XG4gICAgfVxuICB9XG5cblxuICAgIC8vIFx1RDgzRFx1REQzOSBSVUxFUzogQ09ORElUSU9OUyAmIERJU0VBU0VTXG4gIHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgcmVzICA9IGF3YWl0IGZldGNoKGAke2VkaXRpb24uc291cmNlVXJsfS9jb25kaXRpb25zZGlzZWFzZXMuanNvbmApO1xuICAgICAgY29uc3QganNvbiA9IGF3YWl0IHJlcy5qc29uKCk7XG4gICAgICBjb25zdCBtZEZpbGVzID0gcGFyc2VDb25kaXRpb25zRGlzZWFzZXNGaWxlKGpzb24sIGVkaXRpb24uaWQpO1xuICAgICAgZm9yIChjb25zdCBtZCBvZiBtZEZpbGVzKSB7XG4gICAgICAgIGNvbnN0IGZ1bGxQYXRoID0gbm9ybWFsaXplUGF0aChcbiAgICAgICAgICBgJHt0YXJnZXRQYXRofS8ke21kLnBhdGh9YFxuICAgICAgICApO1xuICAgICAgICBjb25zdCBmb2xkZXIgPSBmdWxsUGF0aC5zcGxpdChcIi9cIikuc2xpY2UoMCwgLTEpLmpvaW4oXCIvXCIpO1xuICAgICAgICBhd2FpdCBlbnN1cmVGb2xkZXIoYXBwLCBmb2xkZXIpO1xuICAgICAgICBhd2FpdCBhcHAudmF1bHQuYWRhcHRlci53cml0ZShmdWxsUGF0aCwgbWQuY29udGVudCk7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgY29uc29sZS53YXJuKFwiRmFpbGVkIHRvIGltcG9ydCBjb25kaXRpb25zZGlzZWFzZXMuanNvbjpcIiwgZSk7XG4gICAgfVxuICB9XG5cbiAgIC8vIFx1RDgzRFx1REQzOSBSVUxFUzogU0VOU0VTXG4gIHtcbiAgICB0cnkge1xuXG4gICAgICBjb25zdCByZXMgID0gYXdhaXQgZmV0Y2goYCR7ZWRpdGlvbi5zb3VyY2VVcmx9L3NlbnNlcy5qc29uYCk7XG4gICAgICBjb25zdCBqc29uID0gYXdhaXQgcmVzLmpzb24oKTtcbiAgICBcbiAgICAgIGNvbnN0IG1kRmlsZXMgPSBwYXJzZVNlbnNlc0ZpbGUoanNvbiwgZWRpdGlvbi5pZCk7XG4gICAgXG4gICAgICBmb3IgKGNvbnN0IG1kIG9mIG1kRmlsZXMpIHtcbiAgICAgICAgY29uc3QgZnVsbFBhdGggPSBub3JtYWxpemVQYXRoKFxuICAgICAgICAgIGAke3RhcmdldFBhdGh9LyR7bWQucGF0aH1gXG4gICAgICAgICk7XG4gICAgICAgIGNvbnN0IGZvbGRlciA9IGZ1bGxQYXRoLnNwbGl0KFwiL1wiKS5zbGljZSgwLCAtMSkuam9pbihcIi9cIik7XG5cbiAgICAgICAgYXdhaXQgZW5zdXJlRm9sZGVyKGFwcCwgZm9sZGVyKTtcbiAgICAgICAgYXdhaXQgYXBwLnZhdWx0LmFkYXB0ZXIud3JpdGUoZnVsbFBhdGgsIG1kLmNvbnRlbnQpO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIGNvbnNvbGUud2FybihcIkZhaWxlZCB0byBpbXBvcnQgc2Vuc2VzLmpzb246XCIsIGUpO1xuICAgIH1cbiAgfVxuXG4gICAgIC8vIFx1RDgzRFx1REQzOSBSVUxFUzogU0tJTExTXG4gIHtcbiAgICB0cnkge1xuXG4gICAgICBjb25zdCByZXMgID0gYXdhaXQgZmV0Y2goYCR7ZWRpdGlvbi5zb3VyY2VVcmx9L3NraWxscy5qc29uYCk7XG4gICAgICBjb25zdCBqc29uID0gYXdhaXQgcmVzLmpzb24oKTtcbiAgICBcbiAgICAgIGNvbnN0IG1kRmlsZXMgPSBwYXJzZVNraWxsc0ZpbGUoanNvbiwgZWRpdGlvbi5pZCk7XG4gICAgXG4gICAgICBmb3IgKGNvbnN0IG1kIG9mIG1kRmlsZXMpIHtcbiAgICAgICAgY29uc3QgZnVsbFBhdGggPSBub3JtYWxpemVQYXRoKFxuICAgICAgICAgIGAke3RhcmdldFBhdGh9LyR7bWQucGF0aH1gXG4gICAgICAgICk7XG4gICAgICAgIGNvbnN0IGZvbGRlciA9IGZ1bGxQYXRoLnNwbGl0KFwiL1wiKS5zbGljZSgwLCAtMSkuam9pbihcIi9cIik7XG5cbiAgICAgICAgYXdhaXQgZW5zdXJlRm9sZGVyKGFwcCwgZm9sZGVyKTtcbiAgICAgICAgYXdhaXQgYXBwLnZhdWx0LmFkYXB0ZXIud3JpdGUoZnVsbFBhdGgsIG1kLmNvbnRlbnQpO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIGNvbnNvbGUud2FybihcIkZhaWxlZCB0byBpbXBvcnQgc2tpbGxzLmpzb246XCIsIGUpO1xuICAgIH1cbiAgfVxuXG4gICAvLyBcdUQ4M0RcdUREMzkgRkVBVFNcbiAge1xuICAgIHRyeSB7XG5cbiAgICAgIGNvbnN0IHJlcyAgPSBhd2FpdCBmZXRjaChgJHtlZGl0aW9uLnNvdXJjZVVybH0vZmVhdHMuanNvbmApO1xuICAgICAgY29uc3QganNvbiA9IGF3YWl0IHJlcy5qc29uKCk7XG4gICAgXG4gICAgICBjb25zdCBtZEZpbGVzID0gcGFyc2VGZWF0c0ZpbGUoanNvbiwgZWRpdGlvbi5pZCk7XG4gICAgXG4gICAgICBmb3IgKGNvbnN0IG1kIG9mIG1kRmlsZXMpIHtcbiAgICAgICAgY29uc3QgZnVsbFBhdGggPSBub3JtYWxpemVQYXRoKFxuICAgICAgICAgIGAke3RhcmdldFBhdGh9LyR7bWQucGF0aH1gXG4gICAgICAgICk7XG4gICAgICAgIGNvbnN0IGZvbGRlciA9IGZ1bGxQYXRoLnNwbGl0KFwiL1wiKS5zbGljZSgwLCAtMSkuam9pbihcIi9cIik7XG5cbiAgICAgICAgYXdhaXQgZW5zdXJlRm9sZGVyKGFwcCwgZm9sZGVyKTtcbiAgICAgICAgYXdhaXQgYXBwLnZhdWx0LmFkYXB0ZXIud3JpdGUoZnVsbFBhdGgsIG1kLmNvbnRlbnQpO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIGNvbnNvbGUud2FybihcIkZhaWxlZCB0byBpbXBvcnQgZmVhdHMuanNvbjpcIiwgZSk7XG4gICAgfVxuICB9XG5cbi8vIFx1RDgzRFx1REQzOSBCQUNLR1JPVU5EU1xue1xuICB0cnkge1xuICAgIGNvbnN0IHJlcyAgPSBhd2FpdCBmZXRjaChgJHtlZGl0aW9uLnNvdXJjZVVybH0vYmFja2dyb3VuZHMuanNvbmApO1xuICAgIGNvbnN0IGpzb24gPSBhd2FpdCByZXMuanNvbigpO1xuXG4gICAgY29uc3QgbWRGaWxlcyA9IHBhcnNlQmFja2dyb3VuZHNGaWxlKGpzb24sIGVkaXRpb24uaWQpO1xuXG4gICAgZm9yIChjb25zdCBtZCBvZiBtZEZpbGVzKSB7XG4gICAgICAvLyBtZC5wYXRoIGlzIFwiUGxheWVyIEJ1aWxkL0JhY2tncm91bmRzLzxOYW1lPi5tZFwiXG4gICAgICBjb25zdCBmdWxsUGF0aCA9IG5vcm1hbGl6ZVBhdGgoYCR7dGFyZ2V0UGF0aH0vJHttZC5wYXRofWApO1xuICAgICAgY29uc3QgZm9sZGVyICAgPSBmdWxsUGF0aC5zcGxpdChcIi9cIikuc2xpY2UoMCwgLTEpLmpvaW4oXCIvXCIpO1xuXG4gICAgICBhd2FpdCBlbnN1cmVGb2xkZXIoYXBwLCBmb2xkZXIpO1xuICAgICAgYXdhaXQgYXBwLnZhdWx0LmFkYXB0ZXIud3JpdGUoZnVsbFBhdGgsIG1kLmNvbnRlbnQpO1xuICAgIH1cbiAgfSBjYXRjaCAoZSkge1xuICAgIGNvbnNvbGUud2FybihcIkZhaWxlZCB0byBpbXBvcnQgYmFja2dyb3VuZHMuanNvbjpcIiwgZSk7XG4gIH1cbn1cbn1cbn0iLCAiLy8gaGVscGVycy9zb3VyY2VNYXAudHNcblxuLy8gTWFwIG9mIDVlIHNvdXJjZSBhYmJyZXZpYXRpb25zIHRvIHRoZWlyIGZ1bGwgdGl0bGVzXG5jb25zdCBTT1VSQ0VfTkFNRV9NQVA6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4gPSB7XG4gIC8vIENvcmUgcnVsZWJvb2tzXG4gIFBIQjogXCJQbGF5ZXIncyBIYW5kYm9va1wiLFxuICBNTTogIFwiTW9uc3RlciBNYW51YWxcIixcbiAgRE1HOiBcIkR1bmdlb24gTWFzdGVyJ3MgR3VpZGVcIixcblxuICAvLyBPZmZpY2lhbCBleHBhbnNpb25zICYgYWR2ZW50dXJlIG1vZHVsZXNcbiAgQ29TOiAgXCJDdXJzZSBvZiBTdHJhaGRcIixcbiAgT290QTogXCJPdXQgb2YgdGhlIEFieXNzXCIsXG4gIFBvdEE6IFwiUHJpbmNlcyBvZiB0aGUgQXBvY2FseXBzZVwiLFxuICBIb3REUTogXCJIb2FyZCBvZiB0aGUgRHJhZ29uIFF1ZWVuXCIsXG4gIFJvVDogIFwiUmlzZSBvZiBUaWFtYXRcIixcbiAgU0tUOiAgXCJTdG9ybSBLaW5nJ3MgVGh1bmRlclwiLFxuICBUZnRZUDpcIlRhbGVzIGZyb20gdGhlIFlhd25pbmcgUG9ydGFsXCIsXG4gIFRvQTogIFwiVG9tYiBvZiBBbm5paGlsYXRpb25cIixcblxuICAvLyBTdXBwbGVtZW50YWwgZ3VpZGVzXG4gIFhHRTogXCJYYW5hdGhhcidzIEd1aWRlIHRvIEV2ZXJ5dGhpbmdcIixcbiAgVkdNOiBcIlZvbG8ncyBHdWlkZSB0byBNb25zdGVyc1wiLFxuICBUQ0U6IFwiVGFzaGEncyBDYXVsZHJvbiBvZiBFdmVyeXRoaW5nXCIsXG4gIEVHVzogXCJFYmVycm9uOiBSaXNpbmcgZnJvbSB0aGUgTGFzdCBXYXJcIixcbiAgRVJMVzpcIkV4cGxvcmVyJ3MgR3VpZGUgdG8gV2lsZGVtb3VudFwiLFxuICBNVEY6IFwiTW9uc3RlcnMgb2YgdGhlIE11bHRpdmVyc2VcIixcbiAgVlJHUjpcIlZhbiBSaWNodGVuJ3MgR3VpZGUgdG8gUmF2ZW5sb2Z0XCIsXG5cbiAgLy8gQWRkaXRpb25hbCBzb3VyY2Vib29rc1xuICBBQUc6ICAgICAgXCJBc3RyYWwgQWR2ZW50dXJlclx1MjAxOXMgR3VpZGVcIixcbiAgQUk6ICAgICAgIFwiQWNxdWlzaXRpb25zIEluY29ycG9yYXRlZFwiLFxuICBBaXRGUkFWRlQ6XCJBZHZlbnR1cmVzIGluIHRoZSBGb3Jnb3R0ZW4gUmVhbG1zOiBBIFZpc3VhbCBGaWVsZCBUZXN0XCIsXG4gIEJNVDogICAgICBcIkJpZyBNb25zdGVyIFRvbWVcIixcbiAgRG9EazogICAgIFwiRHJhZ29uIG9mIERhcmtrZWVwXCIsXG4gIEZURDogICAgICBcIkZpemJhblx1MjAxOXMgVHJlYXN1cnkgb2YgRHJhZ29uc1wiLFxuICBHR1I6ICAgICAgXCJHdWlsZG1hc3Rlclx1MjAxOXMgR3VpZGUgdG8gUmF2bmljYVwiLFxuICBHSExvRTogICAgXCJHaG9zdHMgb2YgdGhlIEhvcml6b246IExpZ2h0IE92ZXIgRWxlbnNhcmlhXCIsXG4gIElEUm90RjogICBcIkljZXdpbmQgRGFsZTogUmltZSBvZiB0aGUgRnJvc3RtYWlkZW5cIixcbiAgTExLOiAgICAgIFwiTG9zdCBMYWJvcmF0b3J5IG9mIEt3YWxpc2hcIixcbiAgU2F0TzogICAgIFwiU2FwcGhpcmUgb2YgVHJ1dGhcIixcbiAgU0NDOiAgICAgIFwiU3RyaXhoYXZlbjogQ3VycmljdWx1bSBvZiBDaGFvc1wiLFxuICBURENTUjogICAgXCJUaGUgRHVuZ2VvbiBDb2FjaFx1MjAxOXMgUnVsZWJvb2tcIixcbiAgSnR0UkM6ICAgIFwiSm91cm5leXMgdGhyb3VnaCB0aGUgUmFkaWFudCBDaXRhZGVsXCIsXG4gIFwiQWl0RlItQVZUXCI6XCJBZHZlbnR1cmVzIGluIHRoZSBGb3Jnb3R0ZW4gUmVhbG1zOiBBIFZlcmRhbnQgVG9tYlwiLFxuICBcIkFpdEZSLUZDRFwiOlwiQWR2ZW50dXJlcyBpbiB0aGUgRm9yZ290dGVuIFJlYWxtczogRnJvbSBDeWFuIERlcHRoc1wiLFxuICBSTVI6ICAgICAgXCJEdW5nZW9ucyBhbmQgRHJhZ29uczogUmljayBhbmQgTW9ydHlcIixcbiAgU0NBRzogICAgIFwiU3dvcmQgQ29hc3QgQWR2ZW50dXJlcidzIEd1aWRlXCIsXG4gIEVFUEM6ICAgICBcIkVsZW1lbnRhbCBFdmlsIFBsYXllcidzIENvbXBhbmlvblwiLFxuICBNT1Q6ICAgICAgXCJNeXRoaWMgT2R5c3NleXMgb2YgVGhlcm9zXCIsXG4gIFdCdFc6ICAgICBcIlRoZSBXaWxkIEJleW9uZCB0aGUgV2l0Y2hsaWdodFwiLFxuICBCR0RJQTogICAgXCJCYWxkdXIncyBHYXRlOiBEZXNjZW50IEludG8gQXZlcm51c1wiLFxuICBUb0ZXOiAgICAgXCJUdXJuIG9mIEZvcnR1bmUncyBXaGVlbFwiLFxuICBDb0E6ICAgICAgXCJDaGFpbnMgb2YgQXNtb2RldXNcIixcbiAgQ1JDb3ROOiAgIFwiQ3JpdGljYWwgUm9sZTogQ2FsbCBvZiB0aGUgTmV0aGVyZGVlcFwiLFxuICBUb0Q6ICAgICAgXCJUeXJhbm55IG9mIERyYWdvbnNcIixcbiAgTVBNTTogICAgIFwiTW9yZGVua2FpbmVuIFByZXNlbnRzOiBNb25zdGVycyBvZiB0aGUgTXVsdGl2ZXJzZVwiLFxuICBMb1g6ICAgICAgXCJMaWdodCBvZiBYYXJ5eGlzXCIsXG4gIFFmdElTOiAgICBcIlF1ZXN0cyBmcm9tIHRoZSBJbmZpbml0ZSBTdGFpcmNhc2VcIixcbiAgV0RIOiAgICAgIFwiV2F0ZXJkZWVwOiBEcmFnb24gSGVpc3RcIixcbiAgV0RNTTogICAgIFwiV2F0ZXJkZWVwOiBEdW5nZW9uIG9mIHRoZSBNYWQgTWFnZVwiLFxuICBQYUJUU086ICAgXCJQaGFuZGVsdmVyIGFuZCBCZWxvdzogVGhlIFNoYXR0ZXJlZCBPYmVsaXNrXCIsXG4gIENNOiAgICAgICBcIkNhbmRsZWtlZXAgTXlzdGVyaWVzXCIsXG4gIEdvUzogICAgICBcIkdob3N0cyBvZiBTYWx0bWFyc2hcIixcbiAgRFNvdERROiAgIFwiRHJhZ29ubGFuY2U6IFNoYWRvdyBvZiB0aGUgRHJhZ29uIFF1ZWVuXCIsXG4gIEtmdEdWOiAgICBcIktleXMgZnJvbSB0aGUgR29sZGVuIFZhdWx0XCIsXG4gIFNEVzogICAgICBcIkVzc2VudGlhbHMgS2l0OiBTbGVlcGluZyBEcmFnb24ncyBXYWtlXCIsXG4gIERvU0k6ICAgICBcIkRyYWdvbnMgb2YgU3Rvcm13cmVjayBJc2xlXCIsXG4gIEdvdFNGOiAgICBcIkdpYW50cyBvZiB0aGUgU3RhciBGb3JnZVwiLFxuICBESVA6ICAgICAgXCJFc3NlbnRpYWxzIEtpdDogRHJhZ29uIG9mIEljZXNwaXJlIFBlYWtcIixcbiAgU0xXOiAgICAgIFwiRXNzZW50aWFscyBLaXQ6IFN0b3JtIExvcmQncyBXcmF0aFwiLFxuICBJTVI6ICAgICAgXCJJbmZlcm5hbCBNYWNoaW5lIFJlYnVpbGRcIixcbiAgVkVvUjogICAgIFwiVmVjbmE6IEV2ZSBvZiBSdWluXCIsXG4gIFBTSTogICAgICBcIlBsYW5lIFNoaWZ0OiBJbm5pc3RyYWRcIixcbiAgQUFUTTogICAgIFwiQWR2ZW50dXJlIEF0bGFzOiBUaGUgTW9ydHVhcnlcIixcbiAgUFNaOiAgICAgIFwiUGxhbmUgU2hpZnQ6IFplbmRpa2FyXCIsXG4gIERDOiAgICAgICBcIkVzc2VudGlhbHMgS2l0OiBEaXZpbmUgQ29udGVudGlvblwiLFxuICBMTW9QOiAgICAgXCJMb3N0IE1pbmUgb2YgUGhhbmRlbHZlclwiLFxuICBSTUJSRTogICAgXCJUaGUgTG9zdCBEdW5nZW9uIG9mIFJpY2tlZG5lc3M6IEJpZyBSaWNrIEVuZXJneVwiLFxuICBIZnRUOiAgICAgXCJIdW50IGZvciB0aGUgVGhlc3NhbGh5ZHJhXCIsXG4gIFBTWDogICAgICBcIlBsYW5lIFNoaWZ0OiBJeGFsYW5cIixcbiAgSEZTdENNOiAgIFwiSGVyb2VzJyBGZWFzdDogU2F2aW5nIHRoZSBDaGlsZHJlbnMgTWVudVwiLFxuICBTakE6ICAgICAgXCJTcGVsbGphbW1lciBBY2FkZW15XCIsXG4gIExLOiAgICAgICBcIkxpZ2h0bmluZyBLZWVwXCIsXG4gIFJ0RzogICAgICBcIlJldHVybiB0byB0aGUgR2xvcnlcIixcbiAgVFRQOiAgICAgIFwiVGhlIFRvcnRsZSBQYWNrYWdlXCIsXG4gIExSOiAgICAgICBcIkxvY2F0aGFoIFJpc2luZ1wiLFxuICBQU0E6ICAgICAgXCJQbGFuZSBTaGlmdDogQW1vbmtoZXRcIixcbiAgT0dBOiAgICAgIFwiT25lIEdydW5nIEFib3ZlXCIsXG4gIFwiTlJILVRMVFwiOiAgXCJOZXJkcyBSZXN0b3JpbmcgSGFybW9ueTogVGhlIExvc3QgVG9tYlwiLFxuICBcIk5SSC1BVFwiOiAgIFwiTmVyZHMgUmVzdG9yaW5nIEhhcm1vbnk6IEFkdmVudHVyZSBUb2dldGhlclwiLFxuICBCR0c6ICAgICAgXCJCaWdieSBQcmVzZW50czogR2xvcnkgb2YgdGhlIEdpYW50c1wiLFxuICBSb1RPUzogICAgXCJUaGUgUmlzZSBvZiBUaWFtYXQgT25saW5lIFN1cHBsZW1lbnRcIixcbiAgWE10UzogICAgIFwiWCBNYXJrcyB0aGUgU3BvdFwiLFxuICBcIkhBVC1MTUlcIjogIFwiSG9ub3IgQW1vbmcgVGhlaXZlczogTGVnZW5kYXJ5IE1hZ2ljIEl0ZW1zXCIsXG4gIERpdExDb1Q6ICBcIkRlc2NlbnQgaW50byB0aGUgTG9zdCBDYXZlcm5zIG9mIFRzb2pjYW50aFwiLFxuICBcIkFpdEZSLUROXCI6IFwiQWR2ZW50dXJlcyBpbiB0aGUgRm9yZ290dGVuIFJlYWxtczogRGVlcGVzdCBOaWdodFwiLFxuICBcIkFpdEZSLVRIUFwiOlwiQWR2ZW50dXJlcyBpbiB0aGUgRm9yZ290dGVuIFJlYWxtczogVGhlIEhpZGRlbiBQYWdlc1wiLFxuICBCQU06ICAgICAgXCJCb28ncyBBc3RyYWwgTWVuYWdlcmllXCIsXG4gIEFaZnlUOiAgICBcIkEgWmliIGZvciBZb3VyIFRob3VndHNcIixcbiAgTUNWMkRDOiAgIFwiTW9uc3Ryb3VzIENvbXBlbmRpdW0gVm9sdW1lIDI6IERyYWdvbmxhbmNlIENyZWF0dXJlc1wiLFxuICBQU0s6ICAgICAgXCJQbGFuZSBTaGlmdDogS2FsYWRlc2hcIixcbiAgUFNEOiAgICAgIFwiUGxhbmUgU2hpZnQ6IERvbWluYXJpYVwiLFxuICBBV006ICAgICAgXCJBZHZlbnR1cmUgd2l0aCBNdWtcIixcbiAgVUFUaGVNeXN0aWNDbGFzczogXCJVbmVhcnRoZWQgQXJjYW5hOiBUaGUgTXlzdGljIENsYXNzXCIsXG4gIEFMQ3Vyc2VPZlN0cmFoZDogXCJBZHZlbnR1cmVycyBMZWFndWU6IEN1cnNlIG9mIFN0cmFoZFwiLFxuICBBTEVsZW1lbnRhbEV2aWw6IFwiQWR2ZW50dXJlcnMgTGVhZ3VlOiBFbGVtZW50YWwgRXZpbFwiLFxuICBBTFJhZ2VPZkRlbW9uczogIFwiQWR2ZW50dXJlcnMgTGVhZ3VlOiBSYWdlIG9mIERlbW9uc1wiXG59O1xuXG4vKipcbiAqIFJldHVybnMgdGhlIGZ1bGwgc291cmNlIG5hbWUgZm9yIGEgZ2l2ZW4gYWJicmV2aWF0aW9uLlxuICogT3B0aW9uYWxseSBhcHBlbmRzIHllYXIgZm9yIFBIQiB2YXJpYW50cy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldEZ1bGxTb3VyY2VOYW1lKGFiYnJldjogc3RyaW5nLCBlZGl0aW9uSWQ/OiBzdHJpbmcpOiBzdHJpbmcge1xuICBsZXQgbmFtZSA9IFNPVVJDRV9OQU1FX01BUFthYmJyZXZdID8/IGFiYnJldjtcblxuICAvLyBBcHBlbmQgeWVhciBmb3IgUEhCIGlmIHRoZSBlZGl0aW9uIGNvbnRleHQgaXMga25vd25cbiAgaWYgKGFiYnJldiA9PT0gXCJQSEJcIikge1xuICAgIGlmIChlZGl0aW9uSWQ/LmluY2x1ZGVzKFwiMjAxNFwiKSkgbmFtZSArPSBcIiAoMjAxNClcIjtcbiAgICBlbHNlIGlmIChlZGl0aW9uSWQ/LmluY2x1ZGVzKFwiMjAyNVwiKSkgbmFtZSArPSBcIiAoMjAyNSlcIjtcbiAgfVxuXG4gIHJldHVybiBuYW1lO1xufVxuIiwgIi8vIHBhcnNlcnMvNWUtanNvbi9oZWxwZXJzL3RhZ1JlcGxhY2VyLnRzXG5cbmV4cG9ydCBmdW5jdGlvbiByZXBsYWNlNWVUYWdzKGlucHV0OiB1bmtub3duKTogc3RyaW5nIHtcbiAgLy8gMSkgVHVybiBhcnJheXMgaW50byBzcGFjZS1qb2luZWQgc3RyaW5nc1xuICAvLyAyKSBMZWF2ZSBzdHJpbmdzIGFsb25lXG4gIC8vIDMpIENvZXJjZSBldmVyeXRoaW5nIGVsc2UgdG8gc3RyaW5nIChvciBlbXB0eSlcbiAgbGV0IHRleHQ6IHN0cmluZztcbiAgaWYgKEFycmF5LmlzQXJyYXkoaW5wdXQpKSB7XG4gICAgdGV4dCA9IGlucHV0LmpvaW4oXCIgXCIpO1xuICB9IGVsc2UgaWYgKHR5cGVvZiBpbnB1dCA9PT0gXCJzdHJpbmdcIikge1xuICAgIHRleHQgPSBpbnB1dDtcbiAgfSBlbHNlIHtcbiAgICB0ZXh0ID0gU3RyaW5nKGlucHV0ID8/IFwiXCIpO1xuICB9XG5cbiAgLy8gbm93IHJ1biBhbGwgeW91ciBALXRhZyByZXBsYWNlbWVudHMgb24gdGhhdCB0ZXh0XG4gIHJldHVybiB0ZXh0XG4gICAgLnJlcGxhY2UoL1xceyNpdGVtRW50cnlcXHMrKFtefXxdKykoPzpcXHxbXn1dKik/XFx9L2dpLCAoX20sIHJhd05hbWUpID0+IHtcbiAgICAgIHJldHVybiBgW1ske2NhcGl0YWxpemVFYWNoKFN0cmluZyhyYXdOYW1lKS50cmltKCkpfV1dYDtcbiAgICB9XG4gICAgKVxuICAgIC5yZXBsYWNlKC9cXHtAKHNwZWxsfGl0ZW18Y3JlYXR1cmV8cmFjZSkgKFtefH1dKykoPzpcXHxbXn1dKyk/XFx9L2csIChfLCBfXywgbmFtZSkgPT5cbiAgICAgIGBbWyR7Y2FwaXRhbGl6ZUVhY2gobmFtZSl9XV1gXG4gICAgKVxuICAgIC5yZXBsYWNlKC9cXHtAKGNvbmRpdGlvbnxzdGF0dXN8YWN0aW9ufHNraWxsKSAoW158fV0rKSg/OlxcfFtefV0rKT9cXH0vZywgKF8sIHRhZywgbmFtZSkgPT5cbiAgICAgIGBbWyR7Y2FwaXRhbGl6ZSh0YWcpfXMjJHtuYW1lfXwke2NhcGl0YWxpemVFYWNoKG5hbWUpfV1dYFxuICAgIClcbiAgICAucmVwbGFjZSgvXFx7QGNsYXNzRmVhdHVyZSAoW158fV0rKVxcfChbXnx9XSspKD86XFx8W159XSspP1xcfS9nLCAoXywgZmVhdHVyZSwgY2xzKSA9PlxuICAgICAgYFtbJHtjbHN9IyR7ZmVhdHVyZX1dXWBcbiAgICApXG4gICAgLnJlcGxhY2UoL1xce0AoYm9va3xmaWx0ZXIpIChbXnx9XSspKD86XFx8W159XSspP1xcfS9nLCAoXywgX18sIHR4dCkgPT4gdHh0KVxuICAgIC5yZXBsYWNlKC9cXHtAbm90ZSAoW159XSspXFx9L2csIChfLCBub3RlKSA9PiBgKiR7bm90ZX0qYClcbiAgICAucmVwbGFjZSgvXFx7QChkYW1hZ2V8ZGljZXxkY3xoaXR8c2Vuc2UpIChbXn1dKylcXH0vZywgKF8sIF9fLCB2YWx1ZSkgPT4gdmFsdWUpXG4gICAgLnJlcGxhY2UoL1xce0BjaGFuY2UgKFtefH1dKykoPzpcXHxbXn1dKyk/XFx9L2csIChfLCB2YWx1ZSkgPT4gYCR7dmFsdWV9JWApXG4gICAgLnJlcGxhY2UoL1xce0BxdWlja3JlZiAoW158fV0rKSg/OlxcfFtefF0qXFx8W159XSopP1xcfS9nLCAoXywgdGVybSkgPT4ge1xuICAgICAgY29uc3Qga25vd24gPSBbXG4gICAgICAgIFwiZGlmZmljdWx0IHRlcnJhaW5cIiwgXCJ0b3RhbCBjb3ZlclwiLCBcImhhbGYgY292ZXJcIiwgXCJ0aHJlZS1xdWFydGVycyBjb3ZlclwiLFxuICAgICAgICBcImhlYXZpbHkgb2JzY3VyZWRcIiwgXCJsaWdodGx5IG9ic2N1cmVkXCJcbiAgICAgIF07XG4gICAgICByZXR1cm4ga25vd24uaW5jbHVkZXModGVybS50b0xvd2VyQ2FzZSgpKVxuICAgICAgICA/IGBbW1J1bGVzIyR7Y2FwaXRhbGl6ZUVhY2godGVybSl9XV1gXG4gICAgICAgIDogdGVybTtcbiAgICB9KVxuICAgIC5yZXBsYWNlKC9cXHtcXEA1ZXRvb2xzXFxzKyhbXnx9XSspXFx8W159XStcXH0vZywgJyQxJylcbiAgICAucmVwbGFjZSgvXFx7QHJlY2hhcmdlXFxzKihbXn1dKylcXH0vZywgKF8sIG51bSkgPT4gYChyZWNoYXJnZTogJHtudW0udHJpbSgpfSlgKVxuICAgIC5yZXBsYWNlKC9cXHtAKHNjYWxlZGljZXxzY2FsZWRhbWFnZSlbXn1dKlxcfChbXnx9XSspXFx9L2csIChfLCBfXywgdmFsdWUpID0+IHZhbHVlKVxuICAgIC5yZXBsYWNlKC9cXHtAZDIwW159XSpcXH0vZywgXCJcIilcbiAgICAucmVwbGFjZSgvXFx7QFtefV0rXFx9L2csIFwiXCIpO1xufVxuXG5mdW5jdGlvbiBjYXBpdGFsaXplKHN0cjogc3RyaW5nKTogc3RyaW5nIHtcbiAgcmV0dXJuIHN0ci5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIHN0ci5zbGljZSgxKS50b0xvd2VyQ2FzZSgpO1xufVxuXG5mdW5jdGlvbiBjYXBpdGFsaXplRWFjaChzdHI6IHN0cmluZyk6IHN0cmluZyB7XG4gIHJldHVybiBzdHIuc3BsaXQoXCIgXCIpLm1hcChjYXBpdGFsaXplKS5qb2luKFwiIFwiKTtcbn1cbiIsICJpbXBvcnQgeyByZXBsYWNlNWVUYWdzIH0gZnJvbSBcIi4vdGFnUmVwbGFjZXJcIjtcblxuZXhwb3J0IGZ1bmN0aW9uIHJlbmRlck1hcmtkb3duVGFibGUoZW50cnk6IGFueSk6IHN0cmluZyB7XG4gIGlmIChlbnRyeS50eXBlICE9PSBcInRhYmxlXCIgfHwgIUFycmF5LmlzQXJyYXkoZW50cnkucm93cykpIHJldHVybiBcIlwiO1xuXG4gIGNvbnN0IGNhcHRpb24gPSBlbnRyeS5jYXB0aW9uID8gYCMjIyMjICR7ZW50cnkuY2FwdGlvbn1cXG5gIDogXCJcIjtcblxuICBjb25zdCBoZWFkZXJzID0gKGVudHJ5LmNvbExhYmVscyA/PyBbXSlcbiAgICAubWFwKChoOiBzdHJpbmcpID0+IHJlcGxhY2U1ZVRhZ3MoaC50cmltKCkpKTsgLy8gXHUyNzA1IHRhZyByZXBsYWNlIG9uIGhlYWRlcnNcblxuICBjb25zdCBoZWFkZXJSb3cgPSBgfCAke2hlYWRlcnMuam9pbihcIiB8IFwiKX0gfGA7XG4gIGNvbnN0IGRpdmlkZXJSb3cgPSBgfCAke2hlYWRlcnMubWFwKCgpID0+IFwiOi0tXCIpLmpvaW4oXCIgfCBcIil9IHxgO1xuXG4gIGNvbnN0IGJvZHlSb3dzID0gZW50cnkucm93cy5tYXAoKHJvdzogYW55W10pID0+IHtcbiAgICBjb25zdCBjZWxscyA9IHJvdy5tYXAoKGNlbGwpID0+IHtcbiAgICAgIGlmICh0eXBlb2YgY2VsbCA9PT0gXCJzdHJpbmdcIikgcmV0dXJuIHJlcGxhY2U1ZVRhZ3MoY2VsbCk7IC8vIFx1MjcwNSB0YWcgcmVwbGFjZSBzdHJpbmdzXG5cbiAgICAgIGlmICh0eXBlb2YgY2VsbCA9PT0gXCJvYmplY3RcIikge1xuICAgICAgICBpZiAoY2VsbC5yb2xsPy5leGFjdCAhPT0gdW5kZWZpbmVkKSByZXR1cm4gYCR7Y2VsbC5yb2xsLmV4YWN0fWA7XG4gICAgICAgIGlmIChjZWxsLnJvbGw/Lm1pbiAhPT0gdW5kZWZpbmVkICYmIGNlbGwucm9sbD8ubWF4ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICByZXR1cm4gYCR7Y2VsbC5yb2xsLm1pbn1cdTIwMTMke2NlbGwucm9sbC5tYXh9YDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVwbGFjZTVlVGFncyhKU09OLnN0cmluZ2lmeShjZWxsKSk7IC8vIGZhbGxiYWNrIGZvciB1bmtub3duIHNoYXBlc1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gcmVwbGFjZTVlVGFncyhTdHJpbmcoY2VsbCkpO1xuICAgIH0pO1xuXG4gICAgcmV0dXJuIGB8ICR7Y2VsbHMuam9pbihcIiB8IFwiKX0gfGA7XG4gIH0pO1xuXG4gIHJldHVybiBgJHtjYXB0aW9ufSR7aGVhZGVyUm93fVxcbiR7ZGl2aWRlclJvd31cXG4ke2JvZHlSb3dzLmpvaW4oXCJcXG5cIil9YDtcbn1cbiIsICIvLyA1ZSAyMDI1IGZvcm1hdEVudHJ5LnRzXG5pbXBvcnQgeyByZXBsYWNlNWVUYWdzIH0gZnJvbSBcIi4vdGFnUmVwbGFjZXJcIjtcbmltcG9ydCB7IHJlbmRlck1hcmtkb3duVGFibGUgfSBmcm9tIFwiLi9tYXJrZG93blRhYmxlXCI7XG5cbmZ1bmN0aW9uIGlzVHlwZWRFbnRyeSh4OiBhbnkpOiB4IGlzIHsgdHlwZTogc3RyaW5nOyBbazogc3RyaW5nXTogYW55IH0ge1xuICByZXR1cm4gKFxuICAgIHggIT0gbnVsbCAmJlxuICAgIHR5cGVvZiB4ID09PSBcIm9iamVjdFwiICYmXG4gICAgIUFycmF5LmlzQXJyYXkoeCkgJiZcbiAgICB0eXBlb2YgKHggYXMgYW55KS50eXBlID09PSBcInN0cmluZ1wiXG4gICk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBmb3JtYXRFbnRyeShlbnRyeTogYW55KTogc3RyaW5nIHtcbiAgaWYgKHR5cGVvZiBlbnRyeSA9PT0gXCJzdHJpbmdcIikge1xuICAgIGNvbnN0IGNsZWFuZWQgPSBlbnRyeS50cmltKCk7XG4gICAgaWYgKCFjbGVhbmVkIHx8IGNsZWFuZWQgPT09IFwifVwiKSByZXR1cm4gXCJcIjtcbiAgICByZXR1cm4gcmVwbGFjZTVlVGFncyhjbGVhbmVkKTtcbiAgfVxuXG4gIGlmIChpc1R5cGVkRW50cnkoZW50cnkpICYmIGVudHJ5LnR5cGUgPT09IFwiZW50cmllc1wiICYmIEFycmF5LmlzQXJyYXkoZW50cnkuZW50cmllcykpIHtcbiAgICBjb25zdCBib2R5ID0gZW50cnkuZW50cmllc1xuICAgICAgLm1hcChmb3JtYXRFbnRyeSlcbiAgICAgIC5maWx0ZXIoKHN0cjogc3RyaW5nKSA9PiBzdHIudHJpbSgpLmxlbmd0aCA+IDApXG4gICAgICAuam9pbihcIlxcblxcblwiKTtcblxuICAgIHJldHVybiBlbnRyeS5uYW1lXG4gICAgICA/IGAjIyMjIyAke2VudHJ5Lm5hbWV9XFxuJHtib2R5fWBcbiAgICAgIDogYm9keTtcbiAgfVxuXG4gIGlmIChpc1R5cGVkRW50cnkoZW50cnkpICYmIGVudHJ5LnR5cGUgPT09IFwibGlzdFwiICYmIEFycmF5LmlzQXJyYXkoZW50cnkuaXRlbXMpKSB7XG4gICAgcmV0dXJuIGVudHJ5Lml0ZW1zXG4gICAgICAubWFwKChpOiBhbnkpID0+IGAtICR7cmVwbGFjZTVlVGFncyh0eXBlb2YgaSA9PT0gXCJzdHJpbmdcIiA/IGkgOiBKU09OLnN0cmluZ2lmeShpKSl9YClcbiAgICAgIC5qb2luKFwiXFxuXCIpO1xuICB9XG5cbiAgaWYgKGlzVHlwZWRFbnRyeShlbnRyeSkgJiYgZW50cnkudHlwZSA9PT0gXCJ0YWJsZVwiICYmIEFycmF5LmlzQXJyYXkoZW50cnkucm93cykpIHtcbiAgICByZXR1cm4gcmVuZGVyTWFya2Rvd25UYWJsZShlbnRyeSk7XG4gIH1cblxuICBpZiAoaXNUeXBlZEVudHJ5KGVudHJ5KSAmJiBlbnRyeS50eXBlID09PSBcInF1b3RlXCIgJiYgQXJyYXkuaXNBcnJheShlbnRyeS5lbnRyaWVzKSkge1xuICAgIGNvbnN0IHF1b3RlID0gZW50cnkuZW50cmllcy5tYXAoZm9ybWF0RW50cnkpLmpvaW4oXCIgXCIpLnRyaW0oKTtcbiAgICBjb25zdCBhdXRob3IgPSBlbnRyeS5ieSA/IGAgXHUyMDE0ICR7ZW50cnkuYnl9YCA6IFwiXCI7XG4gICAgcmV0dXJuIGAqXCIke3F1b3RlfSR7YXV0aG9yfVwiKmA7XG4gIH1cblxuICBpZiAoaXNUeXBlZEVudHJ5KGVudHJ5KSAmJiBlbnRyeS50eXBlID09PSBcImluc2V0XCIgJiYgQXJyYXkuaXNBcnJheShlbnRyeS5lbnRyaWVzKSkge1xuICAgIGNvbnN0IGluc2V0ID0gZW50cnkuZW50cmllcy5tYXAoZm9ybWF0RW50cnkpLmpvaW4oXCJcXG5cIikudHJpbSgpO1xuICAgIHJldHVybiBgPiAke2luc2V0LnJlcGxhY2UoL1xcbi9nLCBcIlxcbj4gXCIpfWA7XG4gIH1cblxuICBpZiAoaXNUeXBlZEVudHJ5KGVudHJ5KSAmJiBlbnRyeS50eXBlID09PSBcInJlZkNsYXNzRmVhdHVyZVwiICYmIHR5cGVvZiBlbnRyeS5jbGFzc0ZlYXR1cmUgPT09IFwic3RyaW5nXCIpIHtcbiAgICBjb25zdCBbbmFtZV0gPSBlbnRyeS5jbGFzc0ZlYXR1cmUuc3BsaXQoXCJ8XCIpO1xuICAgIGNvbnN0IGFuY2hvciA9IG5hbWVcbiAgICAgIC5yZXBsYWNlKC9bXlxcd1xccy1dL2csIFwiXCIpXG4gICAgICAucmVwbGFjZSgvXFxzKy9nLCBcIi1cIilcbiAgICAgIC50b0xvd2VyQ2FzZSgpO1xuICAgIHJldHVybiBgW1sjJHthbmNob3J9XV1gO1xuICB9XG5cbiAgLy8gSWYgaXQncyBhbiB1bmtub3duIG9iamVjdCwgc2tpcCBpdCBzYWZlbHlcbiAgcmV0dXJuIFwiXCI7XG59XG4iLCAiLy8gcGFyc2Vycy81ZS1qc29uL2Jlc3RpYXJ5LnRzXG5cbmltcG9ydCB0eXBlIHsgUGFyc2VkTWFya2Rvd25GaWxlIH0gZnJvbSBcInNyYy90eXBlc1wiO1xuaW1wb3J0IHsgZ2V0RnVsbFNvdXJjZU5hbWUgfSBmcm9tIFwiLi9oZWxwZXJzL3NvdXJjZU1hcFwiO1xuaW1wb3J0IHsgcmVwbGFjZTVlVGFncyB9IGZyb20gXCIuL2hlbHBlcnMvdGFnUmVwbGFjZXJcIjtcbmltcG9ydCB7IHJlbmRlck1hcmtkb3duVGFibGUgfSBmcm9tIFwiLi9oZWxwZXJzL21hcmtkb3duVGFibGVcIjtcbmltcG9ydCB7IGJ1aWxkRk0sIHNlcmlhbGl6ZUZyb250bWF0dGVyLCBCRVNUSUFSWV9NRVRBX0RFRlMsIHVuaWZpZWRTa2lsbHMsIEZNX0ZJRUxEUyB9IGZyb20gXCIuL2hlbHBlcnMvZnJvbnRtYXR0ZXJcIjtcblxuY29uc3Qgc2tpcHBlZE1vbnN0ZXJzOiBzdHJpbmdbXSA9IFtdO1xuXG4vLyBTaXplIGFiYnJldmlhdGlvbnMgbWFwcGluZ1xuZXhwb3J0IFxuY29uc3QgU0laRV9NQVA6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4gPSB7XG4gIFQ6IFwiVGlueVwiLFxuICBTOiBcIlNtYWxsXCIsXG4gIE06IFwiTWVkaXVtXCIsXG4gIEw6IFwiTGFyZ2VcIixcbiAgSDogXCJIdWdlXCIsXG4gIEc6IFwiR2FyZ2FudHVhblwiXG59O1xuXG4vLyBBbGlnbm1lbnQgYWJicmV2aWF0aW9ucyBtYXBwaW5nXG5jb25zdCBBTElHTk1FTlRfTUFQOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+ID0ge1xuICBMOiBcIkxhd2Z1bFwiLFxuICBOOiBcIk5ldXRyYWxcIixcbiAgQzogXCJDaGFvdGljXCIsXG4gIEc6IFwiR29vZFwiLFxuICBFOiBcIkV2aWxcIixcbiAgVTogXCJVbmFsaWduZWRcIlxufTtcblxuLy8gSGVscGVyIHRvIGNhcGl0YWxpemUgZmlyc3QgbGV0dGVyIG9mIGEgc3RyaW5nXG5mdW5jdGlvbiBjYXBpdGFsaXplRmlyc3Qoc3RyOiB1bmtub3duKTogc3RyaW5nIHtcbiAgY29uc3QgcyA9IFN0cmluZyhzdHIgfHwgXCJcIik7XG4gIHJldHVybiBzLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgcy5zbGljZSgxKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGZvcm1hdFNpemVBYmJyZXYoYWJicmV2OiBzdHJpbmcpOiBzdHJpbmcge1xuICByZXR1cm4gU0laRV9NQVBbYWJicmV2XSB8fCBhYmJyZXY7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBmb3JtYXRBbGlnbm1lbnRBYmJyZXYoYWJicmV2OiBzdHJpbmcpOiBzdHJpbmcge1xuICByZXR1cm4gYWJicmV2XG4gICAgLnRyaW0oKVxuICAgIC5zcGxpdCgvXFxzKy8pXG4gICAgLm1hcChsZXR0ZXIgPT4gQUxJR05NRU5UX01BUFtsZXR0ZXJdIHx8IGxldHRlcilcbiAgICAuam9pbihcIiBcIik7XG59XG5cbmNvbnN0IFJBV19OUENTOiBzdHJpbmdbXSA9IFtcbiAgXCJBYmp1cmVyXCIsIFwiQWNvbHl0ZVwiLCBcIkFwcHJlbnRpY2UgV2l6YXJkXCIsIFwiQXJjaGRydWlkXCIsIFwiQXJjaGVyXCIsIFwiQXJjaG1hZ2VcIiwgXCJBc3Nhc3NpblwiLFxuICBcIkJhbmRpdFwiLCBcIkJhbmRpdCBDYXB0YWluXCIsIFwiQmFyZFwiLCBcIkJlcnNlcmtlclwiLCBcIkJsYWNrZ3VhcmRcIiwgXCJDaGFtcGlvblwiLCBcIkNvbW1vbmVyXCIsXG4gIFwiQ29uanVyZXJcIiwgXCJDdWx0IEZhbmF0aWNcIiwgXCJDdWx0aXN0XCIsIFwiRGl2aW5lclwiLCBcIkRydWlkIChOUEMpXCIsIFwiRHJ1aWQgTlBDXCIsIFwiRW5jaGFudGVyXCIsXG4gIFwiRXZva2VyXCIsIFwiR2xhZGlhdG9yXCIsIFwiR3VhcmRcIiwgXCJJbGx1c2lvbmlzdFwiLCBcIktuaWdodFwiLCBcIktyYWtlbiBQcmllc3RcIiwgXCJNYWdlXCIsXG4gIFwiTWFydGlhbCBBcnRzIEFkZXB0XCIsIFwiTWFzdGVyIFRoaWVmXCIsIFwiTmVjcm9tYW5jZXJcIiwgXCJOb2JsZVwiLCBcIlByaWVzdFwiLCBcIlNjb3V0XCIsIFwiU3B5XCIsXG4gIFwiU3dhc2hidWNrbGVyXCIsIFwiVGh1Z1wiLCBcIlRyYW5zbXV0ZXJcIiwgXCJUcmliYWwgV2FycmlvclwiLCBcIlZldGVyYW5cIiwgXCJXYXIgUHJpZXN0XCIsXG4gIFwiV2FybG9jayBvZiB0aGUgQXJjaGZleVwiLCBcIldhcmxvY2sgb2YgdGhlIEZpZW5kXCIsIFwiV2FybG9jayBvZiB0aGUgR3JlYXQgT2xkIE9uZVwiLCBcIldhcmxvcmRcIlxuXTtcbmNvbnN0IE5PUk1BTElaRURfTlBDX05BTUVTID0gbmV3IFNldChSQVdfTlBDUy5tYXAobiA9PiBub3JtYWxpemVOYW1lKG4pKSk7XG5cbmZ1bmN0aW9uIG5vcm1hbGl6ZU5hbWUobmFtZTogc3RyaW5nKTogc3RyaW5nIHtcbiAgcmV0dXJuIG5hbWUucmVwbGFjZSgvXFxzKy9nLCBcIiBcIikudHJpbSgpLnRvTG93ZXJDYXNlKCk7XG59XG5cbmZ1bmN0aW9uIGNhdGVnb3JpemVDcmVhdHVyZShtb25zdGVyOiBhbnkpOiBzdHJpbmcge1xuICBjb25zdCB0eXBlVmFsdWUgPSBtb25zdGVyLnR5cGU7XG4gIGNvbnN0IG5hbWUgPSBtb25zdGVyLm5hbWU7XG4gIGNvbnN0IHQgPSB0eXBlb2YgdHlwZVZhbHVlID09PSBcInN0cmluZ1wiXG4gICAgPyB0eXBlVmFsdWUudG9Mb3dlckNhc2UoKVxuICAgIDogdHlwZVZhbHVlPy50eXBlPy50b0xvd2VyQ2FzZSgpIHx8IFN0cmluZyh0eXBlVmFsdWUpLnRvTG93ZXJDYXNlKCk7XG5cbiAgY29uc3Qgbm9ybWFsaXplZE5hbWUgPSBub3JtYWxpemVOYW1lKG5hbWUpO1xuXG4gIGlmIChtb25zdGVyLmlzTnBjIHx8IG1vbnN0ZXIuaXNOYW1lZENyZWF0dXJlKSByZXR1cm4gXCJTdG9yeSBOUENzXCI7XG4gIGlmICh0ID09PSBcImJlYXN0XCIpIHJldHVybiBcIkJlYXN0c1wiO1xuICBpZiAodCA9PT0gXCJodW1hbm9pZFwiICYmIE5PUk1BTElaRURfTlBDX05BTUVTLmhhcyhub3JtYWxpemVkTmFtZSkpIHJldHVybiBcIk5vbi1CZWFzdHNcIjtcbiAgaWYgKHQgPT09IFwiaHVtYW5vaWRcIikgcmV0dXJuIFwiTW9uc3RlcnNcIjtcbiAgcmV0dXJuIFwiTW9uc3RlcnNcIjtcbn1cblxuZnVuY3Rpb24gcmVuZGVyQWJpbGl0aWVzVGFibGUoc3RyOiBudW1iZXIsIGRleDogbnVtYmVyLCBjb246IG51bWJlciwgaW50OiBudW1iZXIsIHdpczogbnVtYmVyLCBjaGE6IG51bWJlcik6IHN0cmluZyB7XG4gIHJldHVybiBbXG4gICAgYHwgU1RSIHwgREVYIHwgQ09OIHwgSU5UIHwgV0lTIHwgQ0hBIHxgLFxuICAgIGB8IC0tLSB8IC0tLSB8IC0tLSB8IC0tLSB8IC0tLSB8IC0tLSB8YCxcbiAgICBgfCAke3N0cn0gfCAke2RleH0gfCAke2Nvbn0gfCAke2ludH0gfCAke3dpc30gfCAke2NoYX0gfGBcbiAgXS5qb2luKFwiXFxuXCIpO1xufVxuXG4gIGZ1bmN0aW9uIHJlbmRlckVudHJ5KGVudHJ5OiBhbnksIGluQnJlYXRoQmxvY2sgPSBmYWxzZSk6IHN0cmluZyB7XG4gICAgY29uc3QgZW5zdXJlUGVyaW9kID0gKHM6IHN0cmluZykgPT4gKC9bLiE/XVxccyokLy50ZXN0KHMpID8gcyA6IGAke3N9LmApO1xuICAgIGNvbnN0IHJlbmRlclN0ciA9IChzOiBzdHJpbmcpID0+IHJlcGxhY2U1ZVRhZ3Mocyk7XG5cbiAgICBpZiAodHlwZW9mIGVudHJ5ID09PSBcInN0cmluZ1wiKSByZXR1cm4gcmVuZGVyU3RyKGVudHJ5KTtcbiAgICBpZiAoIWVudHJ5IHx8IHR5cGVvZiBlbnRyeSAhPT0gXCJvYmplY3RcIikgcmV0dXJuIFN0cmluZyhlbnRyeSA/PyBcIlwiKTtcblxuICAgIGNvbnN0IHJhd05hbWUgPSB0eXBlb2YgZW50cnkubmFtZSA9PT0gXCJzdHJpbmdcIiA/IGVudHJ5Lm5hbWUgOiBcIlwiO1xuICAgIGNvbnN0IG5hbWVUeHQgPSByYXdOYW1lID8gcmVuZGVyU3RyKHJhd05hbWUpIDogXCJcIjtcbiAgICBjb25zdCBpc0JyZWF0aCA9IC9cXGJicmVhdGggd2VhcG9uL2kudGVzdChuYW1lVHh0KTtcblxuICAgIGNvbnN0IGxlYWQgPSBuYW1lVHh0ID8gYCoqKiR7ZW5zdXJlUGVyaW9kKG5hbWVUeHQpfSoqKmAgOiBcIlwiO1xuXG4gICAgY29uc3QgYmxvY2tzOiBhbnlbXSA9IFtdO1xuICAgIGlmIChBcnJheS5pc0FycmF5KGVudHJ5LmVudHJpZXMpKSBibG9ja3MucHVzaCguLi5lbnRyeS5lbnRyaWVzKTtcbiAgICBlbHNlIGlmICh0eXBlb2YgZW50cnkuZW50cmllcyA9PT0gXCJzdHJpbmdcIikgYmxvY2tzLnB1c2goZW50cnkuZW50cmllcyk7XG4gICAgZWxzZSBpZiAoQXJyYXkuaXNBcnJheShlbnRyeS5kZXNjKSkgYmxvY2tzLnB1c2goLi4uZW50cnkuZGVzYyk7XG4gICAgZWxzZSBpZiAodHlwZW9mIGVudHJ5LmRlc2MgPT09IFwic3RyaW5nXCIpIGJsb2Nrcy5wdXNoKGVudHJ5LmRlc2MpO1xuICAgIGVsc2UgaWYgKEFycmF5LmlzQXJyYXkoKGVudHJ5IGFzIGFueSkuZW50cnkpKSBibG9ja3MucHVzaCguLi4oZW50cnkgYXMgYW55KS5lbnRyeSk7XG4gICAgZWxzZSBpZiAodHlwZW9mIChlbnRyeSBhcyBhbnkpLmVudHJ5ID09PSBcInN0cmluZ1wiKSBibG9ja3MucHVzaCgoZW50cnkgYXMgYW55KS5lbnRyeSk7XG5cbiAgICBjb25zdCBvdXQ6IHN0cmluZ1tdID0gW107XG4gICAgZm9yIChjb25zdCBibGsgb2YgYmxvY2tzKSB7XG4gICAgICBpZiAodHlwZW9mIGJsayA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICBvdXQucHVzaChyZW5kZXJTdHIoYmxrKSk7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBpc0hhbmdOb1RpdGxlTGlzdCA9XG4gICAgICAgIGJsayAmJlxuICAgICAgICBibGsudHlwZSA9PT0gXCJsaXN0XCIgJiZcbiAgICAgICAgYmxrLnN0eWxlID09PSBcImxpc3QtaGFuZy1ub3RpdGxlXCIgJiZcbiAgICAgICAgQXJyYXkuaXNBcnJheShibGsuaXRlbXMpICYmXG4gICAgICAgIGJsay5pdGVtcy5ldmVyeSgoaXQ6IGFueSkgPT4gaXQ/LnR5cGUgPT09IFwiaXRlbVwiKTtcblxuICAgICAgaWYgKChpc0JyZWF0aCB8fCBpbkJyZWF0aEJsb2NrIHx8IGlzSGFuZ05vVGl0bGVMaXN0KSAmJiBibGsgJiYgYmxrLnR5cGUgPT09IFwibGlzdFwiICYmIEFycmF5LmlzQXJyYXkoYmxrLml0ZW1zKSkge1xuICAgICAgICBjb25zdCBidWxsZXRzOiBzdHJpbmdbXSA9IFtdO1xuICAgICAgICBmb3IgKGNvbnN0IGl0IG9mIGJsay5pdGVtcykge1xuICAgICAgICAgIGNvbnN0IGl0TmFtZSA9IGl0Py5uYW1lID8gcmVuZGVyU3RyKFN0cmluZyhpdC5uYW1lKS50cmltKCkpIDogXCJcIjtcbiAgICAgICAgICBsZXQgaXRCb2R5ID0gXCJcIjtcbiAgICAgICAgICBpZiAodHlwZW9mIGl0Py5lbnRyeSA9PT0gXCJzdHJpbmdcIikgaXRCb2R5ID0gcmVuZGVyU3RyKGl0LmVudHJ5KTtcbiAgICAgICAgICBlbHNlIGlmIChBcnJheS5pc0FycmF5KGl0Py5lbnRyaWVzKSkgaXRCb2R5ID0gaXQuZW50cmllcy5tYXAoKGU6IGFueSkgPT4gcmVuZGVyRW50cnkoZSwgdHJ1ZSkpLmpvaW4oXCIgXCIpO1xuICAgICAgICAgIGVsc2UgaWYgKHR5cGVvZiBpdD8uZW50cmllcyA9PT0gXCJzdHJpbmdcIikgaXRCb2R5ID0gcmVuZGVyU3RyKGl0LmVudHJpZXMpO1xuXG4gICAgICAgICAgY29uc3QgaGVhZCA9IGl0TmFtZSA/IGAqKioke2Vuc3VyZVBlcmlvZChpdE5hbWUpfSoqKmAgOiBcIlwiO1xuICAgICAgICAgIGNvbnN0IGxpbmUgPSBbaGVhZCwgaXRCb2R5XS5maWx0ZXIoQm9vbGVhbikuam9pbihcIiBcIikudHJpbSgpO1xuICAgICAgICAgIGlmIChsaW5lKSBidWxsZXRzLnB1c2goYC0gJHtsaW5lfWApO1xuICAgICAgICB9XG4gICAgICAgIGlmIChidWxsZXRzLmxlbmd0aCkgb3V0LnB1c2goXCJcXG5cIiArIGJ1bGxldHMuam9pbihcIlxcblwiKSk7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICBvdXQucHVzaChTdHJpbmcoYmxrKSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIFtsZWFkLCBvdXQuam9pbihcIiBcIildLmZpbHRlcihCb29sZWFuKS5qb2luKFwiIFwiKS5yZXBsYWNlKC9bIFxcdF0rL2csIFwiIFwiKS50cmltKCk7XG4gIH1cblxuICBmdW5jdGlvbiByZW5kZXJTcGVsbGNhc3Rpbmcoc3BlbGxjYXN0aW5nQXJyOiBhbnlbXSk6IHN0cmluZyB7XG4gICAgaWYgKCFBcnJheS5pc0FycmF5KHNwZWxsY2FzdGluZ0FycikgfHwgc3BlbGxjYXN0aW5nQXJyLmxlbmd0aCA9PT0gMCkgcmV0dXJuIFwiXCI7XG5cbiAgICBjb25zdCBsaW5lczogc3RyaW5nW10gPSBbXTtcblxuICAgIC8vIEVhY2ggZW50cnkgYmVjb21lcyBpdHMgb3duIHN1YnNlY3Rpb24gKGUuZy4sIFwiSW5uYXRlIFNwZWxsY2FzdGluZ1wiLCBcIlNwZWxsY2FzdGluZ1wiKVxuICAgIGZvciAoY29uc3Qgc2Mgb2Ygc3BlbGxjYXN0aW5nQXJyKSB7XG4gICAgICBpZiAoIXNjIHx8IHR5cGVvZiBzYyAhPT0gXCJvYmplY3RcIikgY29udGludWU7XG5cbiAgICAgIGNvbnN0IHRpdGxlID0gdHlwZW9mIHNjLm5hbWUgPT09IFwic3RyaW5nXCIgJiYgc2MubmFtZS50cmltKCkgPyBzYy5uYW1lLnRyaW0oKSA6IFwiU3BlbGxjYXN0aW5nXCI7XG4gICAgICBjb25zdCBoZWFkZXIgPSBgIyMjICR7cmVwbGFjZTVlVGFncyh0aXRsZSl9YDtcbiAgICAgIGNvbnN0IGJvZHlQYXJ0czogc3RyaW5nW10gPSBbXTtcblxuICAgICAgLy8gMSkgSGVhZGVyIHRleHQgYmxvY2socylcbiAgICAgIGNvbnN0IGhlYWRlckVudHJpZXMgPSBBcnJheS5pc0FycmF5KHNjLmhlYWRlckVudHJpZXMpXG4gICAgICAgID8gc2MuaGVhZGVyRW50cmllc1xuICAgICAgICA6IHR5cGVvZiBzYy5oZWFkZXJFbnRyaWVzID09PSBcInN0cmluZ1wiXG4gICAgICAgID8gW3NjLmhlYWRlckVudHJpZXNdXG4gICAgICAgIDogW107XG4gICAgICBpZiAoaGVhZGVyRW50cmllcy5sZW5ndGgpIHtcbiAgICAgICAgYm9keVBhcnRzLnB1c2goaGVhZGVyRW50cmllcy5tYXAoKGU6IGFueSkgPT4gcmVwbGFjZTVlVGFncyhlKSkuam9pbihcIiBcIikpO1xuICAgICAgfVxuXG4gICAgICAvLyAyKSBcdTIwMUNBdCB3aWxsXHUyMDFEXG4gICAgICBpZiAoQXJyYXkuaXNBcnJheShzYy53aWxsKSAmJiBzYy53aWxsLmxlbmd0aCkge1xuICAgICAgICBjb25zdCBzcGVsbHMgPSBzYy53aWxsLm1hcCgoczogYW55KSA9PiByZXBsYWNlNWVUYWdzKFN0cmluZyhzKSkpLmpvaW4oXCIsIFwiKTtcbiAgICAgICAgYm9keVBhcnRzLnB1c2goYC0gKipBdCB3aWxsOioqICR7c3BlbGxzfWApO1xuICAgICAgfVxuXG4gICAgICAvLyAzKSBcdTIwMUNEYWlseVx1MjAxRCBidWNrZXRzIFx1MjAxNCBrZXlzIGxpa2UgXCIxXCIsIFwiMlwiLCBcIjNcIiwgYW5kIFwiMWVcIi9cIjJlXCIgKFx1MjAxQ2VhY2hcdTIwMUQpXG4gICAgICBpZiAoc2MuZGFpbHkgJiYgdHlwZW9mIHNjLmRhaWx5ID09PSBcIm9iamVjdFwiKSB7XG4gICAgICAgIGNvbnN0IGtleXMgPSBPYmplY3Qua2V5cyhzYy5kYWlseSkuc29ydCgoYSxiKSA9PiB7XG4gICAgICAgICAgLy8gbnVtZXJpYy1maXJzdCBzb3J0OiAxLCAxZSwgMiwgMmUsIFx1MjAyNlxuICAgICAgICAgIGNvbnN0IHBhcnNlID0gKGs6IHN0cmluZykgPT4gKHsgbjogcGFyc2VJbnQoaywgMTApIHx8IDAsIGU6IC9lJC9pLnRlc3QoaykgPyAxIDogMCB9KTtcbiAgICAgICAgICBjb25zdCBBID0gcGFyc2UoYSksIEIgPSBwYXJzZShiKTtcbiAgICAgICAgICByZXR1cm4gQS5uIC0gQi5uIHx8IEEuZSAtIEIuZTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgZm9yIChjb25zdCBrIG9mIGtleXMpIHtcbiAgICAgICAgICBjb25zdCBhcnIgPSBBcnJheS5pc0FycmF5KHNjLmRhaWx5W2tdKSA/IHNjLmRhaWx5W2tdIDogW107XG4gICAgICAgICAgaWYgKCFhcnIubGVuZ3RoKSBjb250aW51ZTtcbiAgICAgICAgICBjb25zdCBuID0gcGFyc2VJbnQoaywgMTApIHx8IDA7XG4gICAgICAgICAgY29uc3QgZWFjaCA9IC9lJC9pLnRlc3Qoayk7XG4gICAgICAgICAgY29uc3QgbGFiZWwgPSBuID4gMFxuICAgICAgICAgICAgPyBlYWNoID8gYCR7bn0vZGF5IGVhY2hgIDogYCR7bn0vZGF5YFxuICAgICAgICAgICAgOiBcIkRhaWx5XCI7XG5cbiAgICAgICAgICBjb25zdCBzcGVsbHMgPSBhcnIubWFwKChzOiBhbnkpID0+IHJlcGxhY2U1ZVRhZ3MoU3RyaW5nKHMpKSkuam9pbihcIiwgXCIpO1xuICAgICAgICAgIGJvZHlQYXJ0cy5wdXNoKGAtICoqJHtsYWJlbH06KiogJHtzcGVsbHN9YCk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gNCkgT3B0aW9uYWw6IG90aGVyIGJ1Y2tldHMgdXNlZCBvY2Nhc2lvbmFsbHkgYnkgNWV0b29scyAoXHUyMDFDcmVzdFx1MjAxRCwgXHUyMDFDcml0dWFsXHUyMDFELCBldGMuKVxuICAgICAgLy8gICAgV2Uga2VlcCB0aGlzIGNvbnNlcnZhdGl2ZTsgYWRkIG1vcmUgaWYgeW91IHNlZSB0aGVtIGluIHlvdXIgZmVlZHMuXG4gICAgICBpZiAoc2Mucml0dWFsICYmIEFycmF5LmlzQXJyYXkoc2Mucml0dWFsKSAmJiBzYy5yaXR1YWwubGVuZ3RoKSB7XG4gICAgICAgIGNvbnN0IHNwZWxscyA9IHNjLnJpdHVhbC5tYXAoKHM6IGFueSkgPT4gcmVwbGFjZTVlVGFncyhTdHJpbmcocykpKS5qb2luKFwiLCBcIik7XG4gICAgICAgIGJvZHlQYXJ0cy5wdXNoKGAtICoqUml0dWFsczoqKiAke3NwZWxsc31gKTtcbiAgICAgIH1cblxuICAgICAgLy8gU3RpdGNoIHRoaXMgYmxvY2tcbiAgICAgIGlmIChib2R5UGFydHMubGVuZ3RoKSB7XG4gICAgICAgIGxpbmVzLnB1c2goYCR7aGVhZGVyfVxcbiR7Ym9keVBhcnRzLmpvaW4oXCJcXG5cIil9YCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGxpbmVzLmpvaW4oXCJcXG5cXG5cIik7XG4gIH1cblxuICBleHBvcnQgZnVuY3Rpb24gcGFyc2VCZXN0aWFyeUZpbGUoanNvbjogYW55LCBlZGl0aW9uSWQ6IHN0cmluZyk6IFBhcnNlZE1hcmtkb3duRmlsZVtdIHtcbiAgICAgIGlmICghanNvbi5tb25zdGVyKSByZXR1cm4gW107XG4gICAgICAoanNvbiBhcyBhbnkpLl9lZGl0aW9uSWQgPSBlZGl0aW9uSWQ7XG4gICAgXG4gICAgICAvLyAxKSBGaWx0ZXIgb3V0IFx1MjAxQ3JlZmVyZW5jZVx1MjAxRCBlbnRyaWVzIHdpdGggbm8gQUMgb3IgSFBcbiAgICAgIGNvbnN0IHZhbGlkTW9uc3RlcnMgPSBqc29uLm1vbnN0ZXIuZmlsdGVyKChtOiBhbnkpID0+IHtcbiAgICAgIGNvbnN0IGFjVmFsID0gQXJyYXkuaXNBcnJheShtLmFjKVxuICAgICAgICA/IG0uYWNbMF0/LmFjID8/IG0uYWNbMF1cbiAgICAgICAgOiB0eXBlb2YgbS5hYyA9PT0gXCJvYmplY3RcIlxuICAgICAgICAgID8gbS5hYz8uYWMgPz8gbnVsbFxuICAgICAgICAgIDogbS5hYztcblxuICAgICAgY29uc3QgaHBWYWwgPSB0eXBlb2YgbS5ocCA9PT0gXCJvYmplY3RcIlxuICAgICAgICA/IG0uaHA/LmF2ZXJhZ2UgPz8gbS5ocD8uaHAgPz8gbnVsbFxuICAgICAgICA6IG0uaHA7XG4gICAgICAgIHJldHVybiBhY1ZhbCAhPSBudWxsICYmIGhwVmFsICE9IG51bGwgJiYgIWlzTmFOKE51bWJlcihhY1ZhbCkpICYmICFpc05hTihOdW1iZXIoaHBWYWwpKTtcbiAgICAgIH0pO1xuXG4gICAgY29uc3QgYWxsTmFtZXMgPSBuZXcgU2V0KGpzb24ubW9uc3Rlci5tYXAoKG06IGFueSkgPT4gbS5uYW1lKSk7XG4gICAgY29uc3QgdmFsaWROYW1lcyA9IG5ldyBTZXQodmFsaWRNb25zdGVycy5tYXAoKG06IGFueSkgPT4gbS5uYW1lKSk7XG4gICAgY29uc3QgbWlzc2luZyA9IFsuLi5hbGxOYW1lc10uZmlsdGVyKG5hbWUgPT4gIXZhbGlkTmFtZXMuaGFzKG5hbWUpKTtcblxuICBcbiAgICByZXR1cm4gdmFsaWRNb25zdGVycy5tYXAoKG1vbnN0ZXI6IGFueSkgPT4ge1xuICAgICAgY29uc3QgbmFtZSAgICAgPSBtb25zdGVyLm5hbWUgYXMgc3RyaW5nO1xuICAgICAgY29uc3Qgc2FmZU5hbWUgPSBuYW1lLnJlcGxhY2UoL1xcLy9nLCBcIi1cIik7XG4gIFxuICAgICAgLy8gXHUyMDE0IFJhdyBmaWVsZHMgJiBmb3JtYXR0aW5nIFx1MjAxNFxuICAgICAgY29uc3QgcmF3U2l6ZSAgICAgID0gbW9uc3Rlci5zaXplIHx8IFwiTVwiO1xuICAgICAgY29uc3QgcmF3QWxpZ25tZW50ID0gQXJyYXkuaXNBcnJheShtb25zdGVyLmFsaWdubWVudClcbiAgICAgICAgPyBtb25zdGVyLmFsaWdubWVudC5qb2luKFwiIFwiKVxuICAgICAgICA6IG1vbnN0ZXIuYWxpZ25tZW50IHx8IFwiTlwiO1xuICAgIGxldCByYXdUeXBlID0gXCJVbmtub3duXCI7XG5cbiAgICBpZiAodHlwZW9mIG1vbnN0ZXIudHlwZSA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgcmF3VHlwZSA9IGNhcGl0YWxpemVGaXJzdChtb25zdGVyLnR5cGUpO1xuICAgIH0gZWxzZSBpZiAobW9uc3Rlci50eXBlPy50eXBlKSB7XG4gICAgICBjb25zdCBiYXNlID0gY2FwaXRhbGl6ZUZpcnN0KG1vbnN0ZXIudHlwZS50eXBlKTtcbiAgICAgIGNvbnN0IHRhZ3MgPSBtb25zdGVyLnR5cGUudGFncz8ubGVuZ3RoID8gYCAoJHttb25zdGVyLnR5cGUudGFncy5tYXAoY2FwaXRhbGl6ZUZpcnN0KS5qb2luKFwiLCBcIil9KWAgOiBcIlwiO1xuICAgICAgcmF3VHlwZSA9IGAke2Jhc2V9JHt0YWdzfWA7XG4gICAgfVxuXG4gICAgbW9uc3Rlci5fcGFyc2VkVHlwZSA9IHJhd1R5cGU7XG5cbiAgICBjb25zdCBhYyA9IEFycmF5LmlzQXJyYXkobW9uc3Rlci5hYykgPyBtb25zdGVyLmFjWzBdLmFjIDogbW9uc3Rlci5hYztcbiAgICBjb25zdCBocCA9IG1vbnN0ZXIuaHA/LmF2ZXJhZ2UgPz8gbW9uc3Rlci5ocDtcblxuICAgIC8vIFNraXAgbW9uc3RlcnMgd2l0aCBubyBBQyBhbmQgSFBcbiAgICBpZiAoIWFjICYmICFocCkge1xuICAgICAgc2tpcHBlZE1vbnN0ZXJzLnB1c2gobW9uc3Rlci5uYW1lKTtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICAgIFxuICAgICAgLy8gXHUyMDE0IEFiaWxpdGllcyBcdTIwMTRcbiAgICAgIGNvbnN0IGFiaWxpdGllcyA9IEFycmF5LmlzQXJyYXkobW9uc3Rlci5hYmlsaXR5KVxuICAgICAgICA/IG1vbnN0ZXIuYWJpbGl0eVxuICAgICAgICA6IFttb25zdGVyLnN0ciwgbW9uc3Rlci5kZXgsIG1vbnN0ZXIuY29uLCBtb25zdGVyLmludCwgbW9uc3Rlci53aXMsIG1vbnN0ZXIuY2hhXTtcbiAgICAgIGNvbnN0IFtzdHIgPSAxMCwgZGV4ID0gMTAsIGNvbiA9IDEwLCBpbnQgPSAxMCwgd2lzID0gMTAsIGNoYSA9IDEwXSA9IGFiaWxpdGllcztcbiAgXG4gICAgICAvLyBcdTIwMTQgU3BlZWQgKGhhbmRsZXMgaG92ZXIgJiBvYmplY3Qgc3BlZWRzKSBcdTIwMTRcbiAgICAgIGNvbnN0IHNwZWVkTGlzdDogc3RyaW5nW10gPSBbXTtcbiAgICAgIGlmICh0eXBlb2YgbW9uc3Rlci5zcGVlZCA9PT0gXCJvYmplY3RcIikge1xuICAgICAgICBmb3IgKGNvbnN0IFttb2RlLCB2YWxdIG9mIE9iamVjdC5lbnRyaWVzKG1vbnN0ZXIuc3BlZWQpKSB7XG4gICAgICAgICAgaWYgKG1vZGUgPT09IFwiY2FuSG92ZXJcIikgY29udGludWU7XG4gICAgICAgICAgaWYgKHZhbCAmJiB0eXBlb2YgdmFsID09PSBcIm9iamVjdFwiICYmIFwibnVtYmVyXCIgaW4gdmFsKSB7XG4gICAgICAgICAgICBjb25zdCBudW0gID0gKHZhbCBhcyBhbnkpLm51bWJlcjtcbiAgICAgICAgICAgIGNvbnN0IGNvbmQgPSAodmFsIGFzIGFueSkuY29uZGl0aW9uID8gYCAkeyh2YWwgYXMgYW55KS5jb25kaXRpb259YCA6IFwiXCI7XG4gICAgICAgICAgICBzcGVlZExpc3QucHVzaChgJHttb2RlfSAke251bX0gZnQuJHtjb25kfWApO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBzcGVlZExpc3QucHVzaChgJHttb2RlfSAke3ZhbH0gZnQuYCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzcGVlZExpc3QucHVzaChgJHttb25zdGVyLnNwZWVkfSBmdC5gKTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IHNwZWVkID0gc3BlZWRMaXN0LmpvaW4oXCIsIFwiKTtcbiAgXG4gICAgICAvLyBcdTIwMTQgU291cmNlIHNhbml0aXphdGlvbiBcdTIwMTRcbiAgICAgIGxldCBzb3VyY2UgPSBnZXRGdWxsU291cmNlTmFtZShtb25zdGVyLnNvdXJjZSwgZWRpdGlvbklkKTtcbiAgICAgIHNvdXJjZSAgICAgPSBzb3VyY2UucmVwbGFjZSgvOi9nLCBcIiAtXCIpO1xuICBcbiAgICAgIC8vIFx1MjAxNCBDYXRlZ29yeSBmb3IgZm9sZGVyIFx1MjAxNFxuICAgICAgY29uc3QgY2F0ZWdvcnkgPSBjYXRlZ29yaXplQ3JlYXR1cmUobW9uc3Rlcik7XG4gIFxuICAgICAgY29uc3QgZm0gICA9IGJ1aWxkRk0obW9uc3RlciwgQkVTVElBUllfTUVUQV9ERUZTKTtcbiAgICAgIGNvbnN0IHlhbWwgPSBzZXJpYWxpemVGcm9udG1hdHRlcihmbSwgQkVTVElBUllfTUVUQV9ERUZTKTtcbiAgICAgIGNvbnN0IGZtQW55ID0gZm0gYXMgUmVjb3JkPHN0cmluZywgdW5rbm93bj47XG4gICAgICBjb25zdCBjaGFsbGVuZ2VUZXh0ID0gU3RyaW5nKGZtQW55W1wiQ1JcIl0gPz8gZm1BbnlbXCJjaGFsbGVuZ2VcIl0gPz8gXCJcIik7XG4gICAgICBjb25zdCBzYXZpbmdUaHJvd3MgPSAoZm1bRk1fRklFTERTLlNBVklOR19USFJPV1NdIGFzIHN0cmluZ1tdKSB8fCBbXTtcbiAgICAgIGNvbnN0IHNraWxscyAgICAgICA9IChmbVtGTV9GSUVMRFMuU0tJTExTXSAgICAgICAgYXMgc3RyaW5nW10pIHx8IFtdO1xuICAgICAgY29uc3Qgc2Vuc2VzICAgICAgID0gKGZtW0ZNX0ZJRUxEUy5TRU5TRVNdICAgICAgICBhcyBzdHJpbmdbXSkgfHwgW107XG4gICAgICBjb25zdCBsYW5ndWFnZXMgICAgPSAoZm1bRk1fRklFTERTLkxBTkdVQUdFU10gICAgIGFzIHN0cmluZ1tdKSB8fCBbXTtcblxuIFxuICAgICAgLy8gXHUyMDE0IEJvZHkgXHUyMDE0XG4gICAgICBsZXQgYm9keSA9XG4gICAgICBgIyAke25hbWV9XFxuXFxuYCArXG4gICAgICBgJHtmb3JtYXRTaXplQWJicmV2KHJhd1NpemUpfSAke3Jhd1R5cGV9LCAke2Zvcm1hdEFsaWdubWVudEFiYnJldihyYXdBbGlnbm1lbnQpfVxcblxcbmAgK1xuICAgICAgYCoqQXJtb3IgQ2xhc3MqKjogJHthY31cXG5gICtcbiAgICAgIGAqKkhpdCBQb2ludHMqKjogJHtocH1cXG5gICtcbiAgICAgIGAqKlNwZWVkKio6ICR7c3BlZWR9XFxuYCArXG4gICAgICAoc2F2aW5nVGhyb3dzLmxlbmd0aFxuICAgICAgICA/IGAqKlNhdmluZyBUaHJvd3MqKjogJHtzYXZpbmdUaHJvd3Muam9pbihcIiwgXCIpfVxcbmBcbiAgICAgICAgOiBcIlwiKSArXG4gICAgICAoc2tpbGxzLmxlbmd0aFxuICAgICAgICA/IGAqKlNraWxscyoqOiAke3NraWxscy5qb2luKFwiLCBcIil9XFxuYFxuICAgICAgICA6IFwiXCIpICtcbiAgICAgIChzZW5zZXMubGVuZ3RoXG4gICAgICAgID8gYCoqU2Vuc2VzKio6ICR7c2Vuc2VzLmpvaW4oXCIsIFwiKX1cXG5gXG4gICAgICAgIDogXCJcIikgK1xuICAgICAgKGxhbmd1YWdlcy5sZW5ndGhcbiAgICAgICAgPyBgKipMYW5ndWFnZXMqKjogJHtsYW5ndWFnZXMuam9pbihcIiwgXCIpfVxcbmBcbiAgICAgICAgOiBcIlwiKSArXG4gICAgICBgKipDaGFsbGVuZ2UqKjogJHtjaGFsbGVuZ2VUZXh0fVxcblxcbmAgK1xuICAgICAgcmVuZGVyQWJpbGl0aWVzVGFibGUoc3RyLCBkZXgsIGNvbiwgaW50LCB3aXMsIGNoYSk7XG5cbiAgICAgIGlmIChtb25zdGVyLnNwZWxsY2FzdGluZykge1xuICAgICAgICBib2R5ICs9IGBcXG5cXG4jIyMgU3BlbGxjYXN0aW5nXFxuJHttb25zdGVyLnNwZWxsY2FzdGluZ1xuICAgICAgICAgIC5tYXAoKHNjOiBhbnkpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IG5hbWUgPSBzYy5uYW1lIHx8IFwiU3BlbGxjYXN0aW5nXCI7XG4gICAgICAgICAgICBjb25zdCBwYXJ0czogc3RyaW5nW10gPSBbXTtcblxuICAgICAgICAgICAgaWYgKHNjLmhlYWRlckVudHJpZXMpIHtcbiAgICAgICAgICAgICAgY29uc3QgaGVhZGVycyA9IEFycmF5LmlzQXJyYXkoc2MuaGVhZGVyRW50cmllcylcbiAgICAgICAgICAgICAgICA/IHNjLmhlYWRlckVudHJpZXNcbiAgICAgICAgICAgICAgICA6IFtzYy5oZWFkZXJFbnRyaWVzXTtcbiAgICAgICAgICAgICAgcGFydHMucHVzaChoZWFkZXJzLm1hcCgoZTogYW55KSA9PiByZXBsYWNlNWVUYWdzKGUpKS5qb2luKFwiIFwiKSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChzYy53aWxsKSB7XG4gICAgICAgICAgICAgIHBhcnRzLnB1c2goYC0gKipBdCB3aWxsOioqICR7c2Mud2lsbC5tYXAoKHM6IGFueSkgPT4gcmVwbGFjZTVlVGFncyhTdHJpbmcocykpKS5qb2luKFwiLCBcIil9YCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChzYy5kYWlseSkge1xuICAgICAgICAgICAgICBmb3IgKGNvbnN0IFtrLCBhcnJdIG9mIE9iamVjdC5lbnRyaWVzKHNjLmRhaWx5KSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHNwZWxscyA9IChhcnIgYXMgYW55W10pLm1hcChzID0+IHJlcGxhY2U1ZVRhZ3MoU3RyaW5nKHMpKSkuam9pbihcIiwgXCIpO1xuICAgICAgICAgICAgICAgIGNvbnN0IG4gPSBwYXJzZUludChrLCAxMCkgfHwgMDtcbiAgICAgICAgICAgICAgICBjb25zdCBlYWNoID0gL2UkL2kudGVzdChrKTtcbiAgICAgICAgICAgICAgICBjb25zdCBsYWJlbCA9IG4gPiAwID8gKGVhY2ggPyBgJHtufS9kYXkgZWFjaGAgOiBgJHtufS9kYXlgKSA6IFwiRGFpbHlcIjtcbiAgICAgICAgICAgICAgICBwYXJ0cy5wdXNoKGAtICoqJHtsYWJlbH06KiogJHtzcGVsbHN9YCk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIGAqKioke25hbWV9LioqKlxcbiR7cGFydHMuam9pbihcIlxcblwiKX1gO1xuICAgICAgICAgIH0pXG4gICAgICAgIC5qb2luKFwiXFxuXFxuXCIpfWA7XG4gICAgICB9XG4gICAgICBpZiAobW9uc3Rlci50cmFpdCkgICAgIGJvZHkgKz0gYFxcblxcbiMjIyBUcmFpdHNcXG4ke21vbnN0ZXIudHJhaXQubWFwKHJlbmRlckVudHJ5KS5qb2luKFwiXFxuXFxuXCIpfWA7XG4gICAgICBpZiAobW9uc3Rlci5hY3Rpb24pICAgIGJvZHkgKz0gYFxcblxcbiMjIyBBY3Rpb25zXFxuJHttb25zdGVyLmFjdGlvbi5tYXAocmVuZGVyRW50cnkpLmpvaW4oXCJcXG5cXG5cIil9YDtcbiAgICAgIGlmIChtb25zdGVyLnJlYWN0aW9uKSAgYm9keSArPSBgXFxuXFxuIyMjIFJlYWN0aW9uc1xcbiR7bW9uc3Rlci5yZWFjdGlvbi5tYXAocmVuZGVyRW50cnkpLmpvaW4oXCJcXG5cXG5cIil9YDtcbiAgICAgIGlmIChtb25zdGVyLmxlZ2VuZGFyeSkgYm9keSArPSBgXFxuXFxuIyMjIExlZ2VuZGFyeSBBY3Rpb25zXFxuJHttb25zdGVyLmxlZ2VuZGFyeS5tYXAocmVuZGVyRW50cnkpLmpvaW4oXCJcXG5cXG5cIil9YDtcbiAgXG4gICAgICBjb25zdCBjb250ZW50ID0gYC0tLVxcbiR7eWFtbH1cXG4tLS1cXG5cXG4ke2JvZHl9YDtcbiAgXG4gICAgICByZXR1cm4ge1xuICAgICAgICBwYXRoOiAgICBgJHtjYXRlZ29yeX0vJHtzYWZlTmFtZX0ubWRgLFxuICAgICAgICBjb250ZW50LFxuICAgICAgfTtcbiAgICB9KTtcbiAgfVxuIiwgIi8vIDVlIDIwMjUgaXRlbXMgcGFyc2VyXG5cbmltcG9ydCB0eXBlIHsgUGFyc2VkTWFya2Rvd25GaWxlIH0gZnJvbSBcIi4uLy4uL3R5cGVzXCI7XG5pbXBvcnQgeyByZXBsYWNlNWVUYWdzIH0gICAgIGZyb20gXCIuL2hlbHBlcnMvdGFnUmVwbGFjZXJcIjtcbmltcG9ydCB7IGdldEZ1bGxTb3VyY2VOYW1lIH0gZnJvbSBcIi4vaGVscGVycy9zb3VyY2VNYXBcIjtcbmltcG9ydCB7IGJ1aWxkRk0sIHNlcmlhbGl6ZUZyb250bWF0dGVyLCBJVEVNX01FVEFfREVGUywgRk1fRklFTERTIH0gZnJvbSBcIi4vaGVscGVycy9mcm9udG1hdHRlclwiO1xuXG5cbi8qKiBIZWxwZXIgdG8gY2FwaXRhbGl6ZSBmaXJzdCBsZXR0ZXIgXHUyMDEzIG5ldmVyIGNyYXNoZXMgb24gbm9uLXN0cmluZ3MgKi9cbmZ1bmN0aW9uIGNhcGl0YWxpemVGaXJzdChpbnB1dDogYW55KTogc3RyaW5nIHtcbiAgLy8gaWYgaXRcdTIwMTlzIG5vdCBhIG5vbi1lbXB0eSBzdHJpbmcsIGJhaWwgb3V0XG4gIGlmICh0eXBlb2YgaW5wdXQgIT09IFwic3RyaW5nXCIgfHwgaW5wdXQubGVuZ3RoID09PSAwKSByZXR1cm4gXCJcIjtcbiAgY29uc3QgcyA9IGlucHV0LnRyaW0oKTtcbiAgcmV0dXJuIHMuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBzLnNsaWNlKDEpLnRvTG93ZXJDYXNlKCk7XG59XG5cblxuZXhwb3J0IGNvbnN0IERBTUFHRV9UWVBFX01BUDogUmVjb3JkPHN0cmluZyxzdHJpbmc+ID0ge1xuICBQOiBcIlBpZXJjaW5nXCIsXG4gIEI6IFwiQmx1ZGdlb25pbmdcIixcbiAgUzogXCJTbGFzaGluZ1wiLFxuICBOOiBcIk5lY3JvdGljXCIsXG4gIFI6IFwiUmFkaWFudFwiLFxuICBGOiBcIkZpcmVcIixcbiAgQzogXCJDb2xkXCIsXG4gIEw6IFwiTGlnaHRuaW5nXCIsXG4gIFQ6IFwiVGh1bmRlclwiLFxuICBBOiBcIkFjaWRcIixcbiAgSDogXCJIZWFsaW5nXCIsXG4gIFU6IFwiRm9yY2VcIixcbiAgVjogXCJQc3ljaGljXCIsXG59O1xuXG5leHBvcnQgY29uc3QgUFJPUEVSVFlfTUFQOiBSZWNvcmQ8c3RyaW5nLHN0cmluZz4gPSB7XG4gIEE6IFwiQW1tdW5pdGlvblwiLFxuICBGOiBcIkZpbmVzc2VcIixcbiAgSDogXCJIZWF2eVwiLFxuICBMOiBcIkxpZ2h0XCIsXG4gIFI6IFwiUmVsb2FkXCIsXG4gIFM6IFwiU3BlY2lhbFwiLFxuICBcIjJIXCI6IFwiVHdvLUhhbmRlZFwiLFxuICBUOiBcIlRocm93blwiLFxuICBWOiBcIlZlcnNhdGlsZVwiXG59O1xuXG5leHBvcnQgY29uc3QgSVRFTV9UWVBFX01BUDogUmVjb3JkPHN0cmluZyxzdHJpbmc+ID0ge1xuICAkQzogIFwiQ3VycmVuY3lcIixcbiAgJEc6ICBcIkdlbVwiLFxuICBBOiAgIFwiQW1tdW5pdGlvblwiLFxuICBcIkFJUnxETUdcIjogXCJWZWhpY2xlIChhaXIpXCIsXG4gIFwiQUZ8RE1HXCI6IFwiRnV0dXJlIEFtbW9cIixcbiAgQVQ6ICBcIkFydGlzYW4gVG9vbHNcIixcbiAgRVhQOiBcIkV4cGxvc2l2ZVwiLFxuICBGRDogIFwiRm9vZCBhbmQgRHJpbmtcIixcbiAgRzogICBcIkdlYXJcIixcbiAgR1M6ICBcIkdhbWVcIixcbiAgSEE6ICBcIkhlYXZ5IEFybW9yXCIsXG4gIFwiSURHfFREQ1NSXCI6IFwiSWxsaWNpdCBEcnVnXCIsXG4gIElOUzogXCJJbnN0cnVtZW50XCIsXG4gIExBOiAgXCJMaWdodCBBcm1vclwiLFxuICBNOiAgIFwiV2VhcG9uXCIsXG4gIE1BOiAgXCJNZWRpdW0gQXJtb3JcIixcbiAgTU5UOiBcIk1vdW50cyBhbmQgVmVoaWNsZXNcIixcbiAgT0RIOiBcIk1pc2NlbGxhbmVvdXNcIixcbiAgUDogICBcIkNvbnN1bWFibGVcIixcbiAgUjogICBcIlJhbmdlZCBXZWFwb25cIixcbiAgUkQ6ICBcIlJvZFwiLFxuICBSRzogIFwiUmluZ1wiLFxuICBTOiAgIFwiU2hpZWxkXCIsXG4gIFNDOiAgXCJTY3JvbGxcIixcbiAgU0NGOiBcIlNwZWxsIENhc3RpbmcgRm9jdXNcIixcbiAgU0hQOiBcIlNoaXBcIixcbiAgVDogICBcIlRvb2xcIixcbiAgVEFIOiBcIk1vdW50cyBhbmQgVmVoaWNsZXNcIixcbiAgVEc6ICBcIlRyYWRlIEdvb2RzXCIsXG4gIFZFSDogXCJNb3VudHMgYW5kIFZlaGljbGVzXCIsXG4gIFdEOiAgXCJXYW5kXCIsXG59O1xuXG4vKiogY29kZSBcdTIxOTIgZnVsbCBmb2xkZXIgcGF0aCB1bmRlciBJdGVtcy8gKi9cbmNvbnN0IGNvZGVGb2xkZXJNYXA6IFJlY29yZDxzdHJpbmcsc3RyaW5nPiA9IHtcbiAgLy8gV2VhcG9ucyAmIEFybW9yXG4gIFwiQVwiOiAgIFwiV2VhcG9ucyBhbmQgQXJtb3IvQW1tdW5pdGlvblwiLFxuICBcIk1cIjogICBcIldlYXBvbnMgYW5kIEFybW9yL1dlYXBvbnNcIixcbiAgXCJSXCI6ICAgXCJXZWFwb25zIGFuZCBBcm1vci9SYW5nZWQgV2VhcG9uc1wiLFxuICBcIlNcIjogICBcIldlYXBvbnMgYW5kIEFybW9yL1NoaWVsZHNcIixcbiAgXCJMQVwiOiAgXCJXZWFwb25zIGFuZCBBcm1vci9Bcm1vci9MaWdodCBBcm1vclwiLFxuICBcIk1BXCI6ICBcIldlYXBvbnMgYW5kIEFybW9yL0FybW9yL01lZGl1bSBBcm1vclwiLFxuICBcIkhBXCI6ICBcIldlYXBvbnMgYW5kIEFybW9yL0FybW9yL0hlYXZ5IEFybW9yXCIsXG4gIFwiRVhQXCI6IFwiV2VhcG9ucyBhbmQgQXJtb3IvV2VhcG9ucy9FeHBsb3NpdmVzXCIsXG4gIC8vIEZ1dHVyZSBBbW1vIChBRnxETUcgXHUyMTkyIHJhd0NvZGUgXCJBRlwiKVxuICBcIkFGXCI6ICBcIldlYXBvbnMgYW5kIEFybW9yL0FtbXVuaXRpb24vRnV0dXJlIEFtbW9cIixcblxuICAvLyBNYWdpY2FsIEl0ZW1zXG4gIFwiUkRcIjogIFwiTWFnaWNhbCBJdGVtcy9Sb2RzXCIsXG4gIFwiUkdcIjogIFwiTWFnaWNhbCBJdGVtcy9SaW5nc1wiLFxuICBcIlNDXCI6ICBcIk1hZ2ljYWwgSXRlbXMvU2Nyb2xsc1wiLFxuICBcIlNDRlwiOiBcIk1hZ2ljYWwgSXRlbXMvU3BlbGwgQ2FzdGluZyBGb2N1c1wiLFxuICBcIldEXCI6ICBcIk1hZ2ljYWwgSXRlbXMvV2FuZHNcIixcblxuICAvLyBWYWx1YWJsZXNcbiAgXCIkR1wiOiBcIlZhbHVhYmxlcy9HZW1zXCIsXG4gIC8vIEN1cnJlbmN5IChyYXdDb2RlIGJlY29tZXMgXCJDXCIgYWZ0ZXIgc3RyaXBwaW5nICQpXG4gIFwiQ1wiOiAgXCJWYWx1YWJsZXMvQ3VycmVuY3lcIixcbiAgXCJUR1wiOiBcIlZhbHVhYmxlcy9UcmFkZSBHb29kc1wiLFxuXG4gIC8vIEFydGlzYW4gR29vZHNcbiAgXCJBVFwiOiAgXCJBcnRpc2FuIEdvb2RzL1Rvb2xzXCIsXG4gIFwiVFwiOiAgIFwiQXJ0aXNhbiBHb29kcy9Ub29sc1wiLFxuICBcIklOU1wiOiBcIkFydGlzYW4gR29vZHMvSW5zdHJ1bWVudHNcIixcbiAgXCJHU1wiOiAgXCJBcnRpc2FuIEdvb2RzL0dhbWVzXCIsXG5cbiAgLy8gR2VhciAmIE1vdW50c1xuICBcIkdcIjogICBcIkdlYXJcIixcbiAgLy8gTW91bnRzICYgVmVoaWNsZXNcbiAgXCJNTlRcIjogXCJHZWFyL01vdW50cyBhbmQgVmVoaWNsZXNcIixcbiAgXCJUQUhcIjogXCJHZWFyL01vdW50cyBhbmQgVmVoaWNsZXNcIixcbiAgXCJWRUhcIjogXCJHZWFyL01vdW50cyBhbmQgVmVoaWNsZXNcIixcbiAgLy8gQWlyIHZlaGljbGVzIChBSVJ8RE1HIFx1MjE5MiByYXdDb2RlIFwiQUlSXCIpXG4gIFwiQUlSXCI6IFwiR2Vhci9Nb3VudHMgYW5kIFZlaGljbGVzL0FpclwiLFxuXG4gIC8vIENvbnN1bWFibGVzXG4gIFwiUFwiOiAgIFwiQ29uc3VtYWJsZXNcIixcbiAgLy8gRm9vZCAmIERyaW5rXG4gIFwiRkRcIjogIFwiQ29uc3VtYWJsZXMvRm9vZCBhbmQgRHJpbmtcIixcblxuICAvLyBJbGxpY2l0IERydWdzIChJREd8VERDU1IgXHUyMTkyIHJhd0NvZGUgXCJJREdcIilcbiAgXCJJREdcIjogXCJHZWFyL0lsbGljaXQgRHJ1Z3NcIixcblxuICAvLyBNaXNjZWxsYW5lb3VzIChPREgpXG4gIFwiT0RIXCI6IFwiR2Vhci9NaXNjZWxsYW5lb3VzXCIsXG59O1xuXG5leHBvcnQgZnVuY3Rpb24gcGFyc2VJdGVtc0ZpbGUoanNvbjogYW55LCBlZGl0aW9uSWQ6IHN0cmluZyk6IFBhcnNlZE1hcmtkb3duRmlsZVtdIHtcbiAgY29uc3QgcmF3SXRlbXM6IGFueVtdID0gW107XG4gIGlmIChBcnJheS5pc0FycmF5KGpzb24uYmFzZWl0ZW0pKSByYXdJdGVtcy5wdXNoKC4uLmpzb24uYmFzZWl0ZW0pO1xuICBpZiAoQXJyYXkuaXNBcnJheShqc29uLml0ZW0pKSAgICAgcmF3SXRlbXMucHVzaCguLi5qc29uLml0ZW0pO1xuICBpZiAoQXJyYXkuaXNBcnJheShqc29uLm9iamVjdCkpICAgcmF3SXRlbXMucHVzaCguLi5qc29uLm9iamVjdCk7XG4gIGlmIChBcnJheS5pc0FycmF5KGpzb24udmVoaWNsZSkpICByYXdJdGVtcy5wdXNoKC4uLmpzb24udmVoaWNsZSk7XG4gIGlmICghcmF3SXRlbXMubGVuZ3RoKSByZXR1cm4gW107XG5cbiAgY29uc3QgYmFzZU5hbWVzID0gbmV3IFNldDxzdHJpbmc+KFxuICAgIEFycmF5LmlzQXJyYXkoanNvbi5iYXNlaXRlbSkgPyBqc29uLmJhc2VpdGVtLm1hcCgoYjogYW55KSA9PiBiLm5hbWUpIDogW11cbiAgKTtcbiAgY29uc3Qgb3V0OiBQYXJzZWRNYXJrZG93bkZpbGVbXSA9IFtdO1xuXG4gIGZvciAoY29uc3QgaXQgb2YgcmF3SXRlbXMpIHtcbiAgICBjb25zdCBuYW1lICAgICA9IGl0Lm5hbWUgYXMgc3RyaW5nO1xuICAgIGNvbnN0IHNhZmVOYW1lID0gbmFtZS5yZXBsYWNlKC9bXFwvXFxcXDpdL2csIFwiLVwiKTtcblxuICAgIC8vIERldGVybWluZSBmb2xkZXJcbiAgICBjb25zdCByYXdDb2RlID0gKGl0LnR5cGUgYXMgc3RyaW5nIHx8IFwiXCIpLnNwbGl0KFwifFwiKVswXVxuICAgICAgICAuc3BsaXQoXCJ8XCIpWzBdICAgICAgLy8gZHJvcCBhbnl0aGluZyBhZnRlciBcdTIwMUN8XHUyMDFEXG4gICAgICAgIC5yZXBsYWNlKC9eXFwkLywgXCJcIik7IC8vIHN0cmlwIGxlYWRpbmcgXHUyMDFDJFx1MjAxRFxuICAgIGxldCBmb2xkZXIgICAgPSBjb2RlRm9sZGVyTWFwW3Jhd0NvZGVdID8/IFwiTWlzY2VsbGFuZW91c1wiO1xuXG4gICAgLy8gVmFyaWFudHNcbiAgICBpZiAoaXQuYm9udXNXZWFwb24pIHtcbiAgICAgIGZvbGRlciA9IGAke2ZvbGRlcn0vVmFyaWFudHNgO1xuICAgIH1cbiAgICAvLyBNYWdpY2FsXG4gICAgZWxzZSB7XG4gICAgICBjb25zdCBpc01hZ2ljID0gISFpdC53b25kcm91cyB8fCAhIWl0LnJlcUF0dHVuZSB8fCAhIWl0LnJlcV9hdHR1bmVcbiAgICAgICAgfHwgU3RyaW5nKGl0LnJhcml0eSkudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhcIm1hZ2ljXCIpO1xuICAgICAgaWYgKGlzTWFnaWMpIHtcbiAgICAgICAgY29uc3QgWyAsIC4uLnJlc3QgXSA9IGZvbGRlci5zcGxpdChcIi9cIik7XG4gICAgICAgIGZvbGRlciA9IFtcIk1hZ2ljYWwgSXRlbXNcIiwgLi4ucmVzdF0uam9pbihcIi9cIik7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gV2VhcG9uIGNhdGVnb3J5IHN1YmZvbGRlclxuICAgIGlmICgoZm9sZGVyLnN0YXJ0c1dpdGgoXCJXZWFwb25zIGFuZCBBcm1vci9XZWFwb25zXCIpIHx8XG4gICAgICAgICBmb2xkZXIuc3RhcnRzV2l0aChcIldlYXBvbnMgYW5kIEFybW9yL1JhbmdlZCBXZWFwb25zXCIpKSAmJiBpdC53ZWFwb25DYXRlZ29yeSkge1xuICAgICAgZm9sZGVyID0gYCR7Zm9sZGVyfS8ke2NhcGl0YWxpemVGaXJzdChpdC53ZWFwb25DYXRlZ29yeSl9YDtcbiAgICB9XG5cbiAgICAvLyBtYWtlIGVkaXRpb25JZCBhdmFpbGFibGUgZm9yIHRoZSBTT1VSQ0UgZmllbGRcbihqc29uIGFzIGFueSkuX2VkaXRpb25JZCA9IGVkaXRpb25JZDtcblxuLy8gYnVpbGQgYSBGcm9udG1hdHRlciBvYmplY3QgZnJvbSB0aGUgSlNPTlxuY29uc3QgZm0gICA9IGJ1aWxkRk0oaXQsIElURU1fTUVUQV9ERUZTKTtcblxuLy8gaWYgdGhlIGJ1aWx0IGZyb250bWF0dGVyIHNheXMgdGhpcyBpcyBhIG1hZ2ljYWwgaXRlbVx1MjAyNlxuaWYgKGZtW0ZNX0ZJRUxEUy5NQUdJQ0FMXSkge1xuICAvLyBcdTIwMjZ0aGVuIGFkZCBvdXIgVmVybXVuIGZsYWdcbiAgZm1bRk1fRklFTERTLlZFUk1VTl0gPSBmYWxzZTtcbn1cblxuaWYgKHJhd0NvZGUgPT09IFwiTVwiICYmIGl0LndlYXBvbkNhdGVnb3J5KSB7XG4gIC8vIFx1MjAxQ01cdTIwMUQgXHUyMTkyIHVzZSB3ZWFwb25DYXRlZ29yeSAoXHUyMDFDU2ltcGxlXHUyMDFEL1x1MjAxQ01hcnRpYWxcdTIwMUQpXG4gIGZtLnR5cGUgPSBgJHtjYXBpdGFsaXplRmlyc3QoaXQud2VhcG9uQ2F0ZWdvcnkpfSBXZWFwb25gO1xufSBlbHNlIGlmIChJVEVNX1RZUEVfTUFQW3Jhd0NvZGVdKSB7XG4gIC8vIGFueSBvdGhlciBjb2RlIFx1MjE5MiBtYXBwZWQgbGFiZWxcbiAgZm0udHlwZSA9IElURU1fVFlQRV9NQVBbcmF3Q29kZV07XG59XG5pZiAoQXJyYXkuaXNBcnJheShmbS5kYW1hZ2VUeXBlcykpIHtcbiAgZm0uZGFtYWdlVHlwZXMgPSBmbS5kYW1hZ2VUeXBlcy5tYXAoKGNvZGU6IHN0cmluZykgPT5cbiAgICBEQU1BR0VfVFlQRV9NQVBbY29kZV0gfHwgY29kZVxuICApO1xufVxuLy8gc2VyaWFsaXplIGl0IHRvIFlBTUxcbmxldCB5YW1sID0gc2VyaWFsaXplRnJvbnRtYXR0ZXIoZm0sIElURU1fTUVUQV9ERUZTKTtcblxuLy8gaWYgeW91IHN0aWxsIHdhbnQgcGFja0NvbnRlbnRzLCBhcHBlbmQgaXQgaGVyZTpcbmlmIChBcnJheS5pc0FycmF5KGl0LnBhY2tDb250ZW50cykpIHtcbiAgeWFtbCArPSBcIlxcbnBhY2tDb250ZW50czpcIjtcbiAgZm9yIChjb25zdCBwYyBvZiBpdC5wYWNrQ29udGVudHMpIHtcbiAgICB5YW1sICs9IGBcXG4gIC0gaXRlbTogXCIke3BjLml0ZW19XCJcXG4gICAgcXVhbnRpdHk6ICR7cGMucXVhbnRpdHl9YDtcbiAgfVxufVxuIFxuLy8gd3JhcCBpdCBpbiB0aGUgWUFNTCBmZW5jZVxuY29uc3QgZnJvbnRtYXR0ZXIgPSBgLS0tXFxuJHt5YW1sfVxcbi0tLWA7XG5cblxuICAgIC8vIEJvZHkgbGluZXNcbiAgICBjb25zdCBsaW5lczogc3RyaW5nW10gPSBbXTtcbiAgICBsaW5lcy5wdXNoKGAjICR7bmFtZX1gKTtcbiAgICBsaW5lcy5wdXNoKFwiXCIpO1xuXG4gICAgLy8gU3VidGl0bGVcbiAgICBjb25zdCBzdWJ0aXRsZSA9IGl0LndlYXBvblxuICAgICAgPyBgJHtjYXBpdGFsaXplRmlyc3QoaXQud2VhcG9uQ2F0ZWdvcnkpfSBXZWFwb25gXG4gICAgICA6IGl0LmFybW9yXG4gICAgICAgID8gZm9sZGVyLnNwbGl0KFwiL1wiKS5wb3AoKSB8fCBcIkFybW9yXCJcbiAgICAgICAgOiBcIlwiO1xuICAgIGlmIChzdWJ0aXRsZSkgbGluZXMucHVzaChgIyMjICoke3N1YnRpdGxlfSpgKTtcblxuICAgIC8vIFN0YXRzIGxpbmVzXG4gICAgaWYgKGl0LndlYXBvbikge1xuICAgICAgbGluZXMucHVzaChgKipDYXRlZ29yeSoqOiAke2NhcGl0YWxpemVGaXJzdChpdC53ZWFwb25DYXRlZ29yeSl9YCk7XG4gICAgICBsaW5lcy5wdXNoKGAqKkRhbWFnZSoqOiAke2l0LmRtZzEgPz8gXCJcIn0ke2l0LmRtZzIgPyBgIC8gJHtpdC5kbWcyfWAgOiBcIlwifWApO1xuICAgICAgY29uc3QgdHlwZXNCb2R5ID0gKEFycmF5LmlzQXJyYXkoaXQuZG1nVHlwZSkgPyBpdC5kbWdUeXBlIDogW2l0LmRtZ1R5cGVdKVxuICAgICAgICAuZmlsdGVyKCh0OiBhbnkpID0+IEJvb2xlYW4odCkpXG4gICAgICAgIC5tYXAoKHQ6IHN0cmluZykgPT4gREFNQUdFX1RZUEVfTUFQW3RdIHx8IHQpO1xuICAgICAgbGluZXMucHVzaChgKipEYW1hZ2UgVHlwZSoqOiAke3R5cGVzQm9keS5qb2luKFwiLCBcIil9YCk7XG4gICAgICBsaW5lcy5wdXNoKGAqKlJhbmdlKio6ICR7aXQucmFuZ2UgPz8gXCJcdTIwMTRcIn1gKTtcbiAgICAgIGxpbmVzLnB1c2goYCoqUmVsb2FkKio6ICR7aXQucmVsb2FkID8/IFwiXHUyMDE0XCJ9YCk7XG4gICAgICBpZiAoaXQuYW1tb1R5cGUpIGxpbmVzLnB1c2goYCoqQW1tbyBUeXBlKio6ICR7aXQuYW1tb1R5cGV9YCk7XG4gICAgICBpZiAoQXJyYXkuaXNBcnJheShpdC5wcm9wZXJ0eSkgJiYgaXQucHJvcGVydHkubGVuZ3RoKSB7XG4gICAgICAgIGNvbnN0IHByb3BzQm9keSA9IGl0LnByb3BlcnR5Lm1hcCgocDogc3RyaW5nKSA9PiBQUk9QRVJUWV9NQVBbcF0gfHwgcCk7XG4gICAgICAgIGxpbmVzLnB1c2goYCoqUHJvcGVydGllcyoqOiAke3Byb3BzQm9keS5qb2luKFwiLCBcIil9YCk7XG4gICAgICB9XG4gICAgfVxuICAgIGlmIChpdC5hcm1vcikge1xuICAgICAgbGluZXMucHVzaChgKipBcm1vciBDbGFzcyoqOiAke2l0LmFjfWApO1xuICAgICAgaWYgKGl0LnN0ZWFsdGgpIGxpbmVzLnB1c2goYCoqU3RlYWx0aCBEaXNhZHZhbnRhZ2UqKjogdHJ1ZWApO1xuICAgICAgbGluZXMucHVzaChcIlwiKTtcbiAgICB9XG5cbiAgICAvLyBEZXNjcmlwdGlvbiB3aXRoIG5lc3RlZCBlbnRyaWVzXG4gICAgY29uc3QgZGVzYyA9IGl0LmVudHJpZXMgPz8gaXQuZGVzYztcbiAgICBpZiAoZGVzYykge1xuICAgICAgZm9yIChjb25zdCBwIG9mIEFycmF5LmlzQXJyYXkoZGVzYykgPyBkZXNjIDogW2Rlc2NdKSB7XG4gICAgICAgIGlmICh0eXBlb2YgcCA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgIGZvciAoY29uc3QgbGluZSBvZiByZXBsYWNlNWVUYWdzKHApLnNwbGl0KFwiXFxuXCIpKSBsaW5lcy5wdXNoKGxpbmUpO1xuICAgICAgICAgIGxpbmVzLnB1c2goXCJcIik7XG4gICAgICAgIH0gZWxzZSBpZiAocCAmJiB0eXBlb2YgcCA9PT0gXCJvYmplY3RcIiAmJiBwLnR5cGUgPT09IFwibGlzdFwiICYmIEFycmF5LmlzQXJyYXkocC5pdGVtcykpIHtcbiAgICAgICAgICBpZiAobGluZXNbbGluZXMubGVuZ3RoIC0gMV0gIT09IFwiXCIpIGxpbmVzLnB1c2goXCJcIik7XG4gICAgICAgICAgZm9yIChjb25zdCBpdGVtIG9mIHAuaXRlbXMpIHtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgaXRlbSA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgICBsaW5lcy5wdXNoKGAtICR7cmVwbGFjZTVlVGFncyhpdGVtKX1gKTtcbiAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBoZWFkID0gaXRlbT8ubmFtZSA/IGAqKiR7cmVwbGFjZTVlVGFncyhTdHJpbmcoaXRlbS5uYW1lKSkucmVwbGFjZSgvWy4hP10kLywgbSA9PiBtKS5yZXBsYWNlKC8oW14uIT9dKSQvLCBcIiQxLlwiKX0qKmAgOiBcIlwiO1xuICAgICAgICAgICAgbGV0IGJvZHkgPSBcIlwiO1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBpdGVtPy5lbnRyeSA9PT0gXCJzdHJpbmdcIikgYm9keSA9IHJlcGxhY2U1ZVRhZ3MoaXRlbS5lbnRyeSk7XG4gICAgICAgICAgICBlbHNlIGlmIChBcnJheS5pc0FycmF5KGl0ZW0/LmVudHJpZXMpKSBib2R5ID0gaXRlbS5lbnRyaWVzLm1hcCgoZTogYW55KSA9PiB0eXBlb2YgZSA9PT0gXCJzdHJpbmdcIiA/IHJlcGxhY2U1ZVRhZ3MoZSkgOiBcIlwiKS5qb2luKFwiIFwiKTtcbiAgICAgICAgICAgIGNvbnN0IGxpbmUgPSBbaGVhZCwgYm9keV0uZmlsdGVyKEJvb2xlYW4pLmpvaW4oXCIgXCIpLnRyaW0oKTtcbiAgICAgICAgICAgIGlmIChsaW5lKSBsaW5lcy5wdXNoKGAtICR7bGluZX1gKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgbGluZXMucHVzaChcIlwiKTtcbiAgICAgICAgfSBlbHNlIGlmIChwICYmIHR5cGVvZiBwID09PSBcIm9iamVjdFwiKSB7XG4gICAgICAgICAgaWYgKGxpbmVzW2xpbmVzLmxlbmd0aCAtIDFdID09PSBcIlwiKSBsaW5lcy5wb3AoKTtcbiAgICAgICAgICBpZiAodHlwZW9mIHAubmFtZSA9PT0gXCJzdHJpbmdcIiAmJiBwLm5hbWUudHJpbSgpKSB7XG4gICAgICAgICAgICBsaW5lcy5wdXNoKGAjIyMjICR7cC5uYW1lfWApO1xuICAgICAgICAgIH1cbiAgICAgICAgICBjb25zdCBzdWIgPSBBcnJheS5pc0FycmF5KHAuZW50cmllcykgPyBwLmVudHJpZXMgOiBbXTtcbiAgICAgICAgICBmb3IgKGNvbnN0IHNwIG9mIHN1Yikge1xuICAgICAgICAgICAgaWYgKHNwICYmIHR5cGVvZiBzcCA9PT0gXCJvYmplY3RcIiAmJiBzcC50eXBlID09PSBcImxpc3RcIiAmJiBBcnJheS5pc0FycmF5KHNwLml0ZW1zKSkge1xuICAgICAgICAgICAgICBpZiAobGluZXNbbGluZXMubGVuZ3RoIC0gMV0gIT09IFwiXCIpIGxpbmVzLnB1c2goXCJcIik7XG4gICAgICAgICAgICAgIGZvciAoY29uc3QgaXRlbSBvZiBzcC5pdGVtcykge1xuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgaXRlbSA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgICAgICAgbGluZXMucHVzaChgLSAke3JlcGxhY2U1ZVRhZ3MoaXRlbSl9YCk7XG4gICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29uc3QgaGVhZCA9IGl0ZW0/Lm5hbWUgPyBgKioke3JlcGxhY2U1ZVRhZ3MoU3RyaW5nKGl0ZW0ubmFtZSkpLnJlcGxhY2UoL1suIT9dJC8sIG0gPT4gbSkucmVwbGFjZSgvKFteLiE/XSkkLywgXCIkMS5cIil9KipgIDogXCJcIjtcbiAgICAgICAgICAgICAgICBsZXQgYm9keSA9IFwiXCI7XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBpdGVtPy5lbnRyeSA9PT0gXCJzdHJpbmdcIikgYm9keSA9IHJlcGxhY2U1ZVRhZ3MoaXRlbS5lbnRyeSk7XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoQXJyYXkuaXNBcnJheShpdGVtPy5lbnRyaWVzKSkgYm9keSA9IGl0ZW0uZW50cmllcy5tYXAoKGU6IGFueSkgPT4gdHlwZW9mIGUgPT09IFwic3RyaW5nXCIgPyByZXBsYWNlNWVUYWdzKGUpIDogXCJcIikuam9pbihcIiBcIik7XG4gICAgICAgICAgICAgICAgY29uc3QgbGluZSA9IFtoZWFkLCBib2R5XS5maWx0ZXIoQm9vbGVhbikuam9pbihcIiBcIikudHJpbSgpO1xuICAgICAgICAgICAgICAgIGlmIChsaW5lKSBsaW5lcy5wdXNoKGAtICR7bGluZX1gKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBsaW5lcy5wdXNoKFwiXCIpO1xuICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKHR5cGVvZiBzcCA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgICBmb3IgKGNvbnN0IGxpbmUgb2YgcmVwbGFjZTVlVGFncyhzcCkuc3BsaXQoXCJcXG5cIikpIGxpbmVzLnB1c2gobGluZSk7XG4gICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoc3AgJiYgdHlwZW9mIHNwID09PSBcIm9iamVjdFwiICYmIHNwLnR5cGUgPT09IFwiZW50cmllc1wiICYmIHNwLm5hbWUpIHtcbiAgICAgICAgICAgICAgY29uc3QgaGVhZCA9IGAtICoqKiR7cmVwbGFjZTVlVGFncyhzcC5uYW1lKX0uKioqYDtcbiAgICAgICAgICAgICAgY29uc3QgYm9keSA9IChBcnJheS5pc0FycmF5KHNwLmVudHJpZXMpID8gc3AuZW50cmllcyA6IFtdKVxuICAgICAgICAgICAgICAgIC5tYXAoKGU6IGFueSkgPT4gdHlwZW9mIGUgPT09IFwic3RyaW5nXCIgPyByZXBsYWNlNWVUYWdzKGUpIDogXCJcIilcbiAgICAgICAgICAgICAgICAuam9pbihcIiBcIik7XG4gICAgICAgICAgICAgIGlmIChib2R5LnRyaW0oKSkge1xuICAgICAgICAgICAgICAgIGxpbmVzLnB1c2goYCR7aGVhZH0gJHtib2R5fWAudHJpbSgpKTtcbiAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBsaW5lcy5wdXNoKGhlYWQpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoc3AgJiYgdHlwZW9mIHNwID09PSBcIm9iamVjdFwiICYmIEFycmF5LmlzQXJyYXkoc3AuZW50cmllcykpIHtcbiAgICAgICAgICAgICAgZm9yIChjb25zdCBpbm5lciBvZiBzcC5lbnRyaWVzKSB7XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBpbm5lciA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBsaW5lIG9mIHJlcGxhY2U1ZVRhZ3MoaW5uZXIpLnNwbGl0KFwiXFxuXCIpKSBsaW5lcy5wdXNoKGxpbmUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBsaW5lcy5wdXNoKFwiXCIpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgY29uc3QgYm9keSA9IGxpbmVzLmpvaW4oXCJcXG5cIik7XG5cbiAgICBvdXQucHVzaCh7IHBhdGg6IGBJdGVtcy8ke2ZvbGRlcn0vJHtzYWZlTmFtZX0ubWRgLCBjb250ZW50OiBgJHtmcm9udG1hdHRlcn1cXG5cXG4ke2JvZHl9YCB9KTtcbiAgfVxuXG4gIHJldHVybiBvdXQuc29ydCgoYSxiKSA9PiBhLnBhdGgubG9jYWxlQ29tcGFyZShiLnBhdGgpKTtcbn0iLCAiLy8gZnJvbnRtYXR0ZXIgNWUgMjAyNFxuXG5pbXBvcnQgeyBnZXRGdWxsU291cmNlTmFtZSB9IGZyb20gXCIuL3NvdXJjZU1hcFwiO1xuaW1wb3J0IHsgZm9ybWF0U2l6ZUFiYnJldiwgZm9ybWF0QWxpZ25tZW50QWJicmV2IH0gZnJvbSBcIi4uL2Jlc3RpYXJ5XCI7XG5pbXBvcnQgeyBmb3JtYXRSYW5nZSwgZm9ybWF0VGltZSwgZm9ybWF0RHVyYXRpb24sIFNDSE9PTF9NQVAgfSBmcm9tIFwiLi4vc3BlbGxzXCI7XG5pbXBvcnQgeyBQUk9QRVJUWV9NQVAsIERBTUFHRV9UWVBFX01BUCwgSVRFTV9UWVBFX01BUCB9IGZyb20gXCIuLi9pdGVtc1wiO1xuaW1wb3J0IHsgcmVwbGFjZTVlVGFncyB9IGZyb20gXCIuL3RhZ1JlcGxhY2VyXCI7XG5cbmZ1bmN0aW9uIGJsYW5rVW5kZWZpbmVkKHZhbDogYW55KTogYW55IHtcbiAgcmV0dXJuIHZhbCA9PT0gdW5kZWZpbmVkID8gXCJcIiA6IHZhbDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNhcChzdHI6IGFueSk6IHN0cmluZyB7XG4gIGlmICh0eXBlb2Ygc3RyICE9PSBcInN0cmluZ1wiKSByZXR1cm4gXCJcIjtcbiAgcmV0dXJuIHN0ci5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIHN0ci5zbGljZSgxKTtcbn1cblxuZXhwb3J0IGNvbnN0IEFCSUxJVFlfRlVMTDogUmVjb3JkPHN0cmluZyxzdHJpbmc+ID0ge1xuICBzdHI6IFwiU3RyZW5ndGhcIixcbiAgZGV4OiBcIkRleHRlcml0eVwiLFxuICBjb246IFwiQ29uc3RpdHV0aW9uXCIsXG4gIGludDogXCJJbnRlbGxpZ2VuY2VcIixcbiAgd2lzOiBcIldpc2RvbVwiLFxuICBjaGE6IFwiQ2hhcmlzbWFcIixcbn07XG5cbmV4cG9ydCBjb25zdCBTSVpFX01BUDogUmVjb3JkPHN0cmluZywgc3RyaW5nPiA9IHtcbiAgVDogXCJUaW55XCIsXG4gIFM6IFwiU21hbGxcIixcbiAgTTogXCJNZWRpdW1cIixcbiAgTDogXCJMYXJnZVwiLFxuICBIOiBcIkh1Z2VcIixcbiAgRzogXCJHYXJnYW50dWFuXCJcbn07XG5cbi8vIFx1MjUwMFx1MjUwMFx1MjUwMCBVbml2ZXJzYWwgZnJvbnRtYXR0ZXIga2V5cyBcdTI1MDBcdTI1MDBcdTI1MDAgIFxuZXhwb3J0IGNvbnN0IEZNX0ZJRUxEUyA9IHtcbiAgQUJJTElUWV9CT05VU0VTOiAgICBcImFiaWxpdHlfYm9udXNlc1wiLFxuICBBQzogICAgICAgICAgICAgICAgIFwiQUNcIixcbiAgQUxJR05NRU5UOiAgICAgICAgICBcIkFsaWdubWVudFwiLFxuICBBTU1PX1RZUEU6ICAgICAgICAgIFwiQW1tbyBUeXBlXCIsXG4gIEFSTU9SX1BST0ZJQ0lFTkNJRVM6XCJhcm1vci1wcm9mXCIsXG4gIEFUVEFDS19UWVBFOiAgICAgICAgXCJhdHRhY2tfdHlwZVwiLFxuICBBVFRVTkVNRU5UOiAgICAgICAgIFwiQXR0dW5lbWVudFwiLFxuICBBVFRVTkVfUkVROiAgICAgICAgIFwiQXR0dW5lX1JlcVwiLFxuICBDQVNUSU5HX1RJTUU6ICAgICAgIFwiY2FzdGluZ190aW1lXCIsXG4gIENIQVJJU01BOiAgICAgICAgICAgXCJjaGFyaXNtYVwiLFxuICBDSEFfTU9EOiAgICAgICAgICAgIFwiY2hhX21vZFwiLFxuICBDT05DRU5UUkFUSU9OOiAgICAgIFwiY29uY2VudHJhdGlvblwiLFxuICBDT05ESVRJT05fSU1NOiAgICAgIFwiY29uZF9pbW11bml0eVwiLFxuICBDT05TVElUVVRJT046ICAgICAgIFwiY29uc3RpdHV0aW9uXCIsXG4gIENPTl9NT0Q6ICAgICAgICAgICAgXCJjb25fbW9kXCIsXG4gIENPU1Q6ICAgICAgICAgICAgICAgXCJjb3N0XCIsXG4gIENPTVBPTkVOVFM6ICAgICAgICAgXCJDb21wb25lbnRzXCIsXG4gIENIQUxMRU5HRV9SQVRJTkc6ICAgXCJDUlwiLFxuICBEQU1BR0VfVFlQRTogICAgICAgIFwiZGFtYWdlX3R5cGVcIixcbiAgREFNQUdFX1RZUEVTOiAgICAgICBcImRhbWFnZVR5cGVzXCIsXG4gIERBTUFHRTogICAgICAgICAgICAgXCJkYW1hZ2VcIixcbiAgREFNQUdFX1JFUzogICAgICAgICBcImRtZ19yZXNpc3RhbmNlXCIsXG4gIERBTUFHRV9JTU06ICAgICAgICAgXCJkbWdfaW1tdW5pdHlcIixcbiAgREVYVEVSSVRZOiAgICAgICAgICBcImRleHRlcml0eVwiLFxuICBERVhfTU9EOiAgICAgICAgICAgIFwiZGV4X21vZFwiLFxuICBEVVJBVElPTjogICAgICAgICAgIFwiZHVyYXRpb25cIixcbiAgUlVMRVNFVDogICAgICAgICAgICBcInJ1bGVzZXRcIixcbiAgSFA6ICAgICAgICAgICAgICAgICBcIkhQXCIsXG4gIElOVEVMTElHRU5DRTogICAgICAgXCJpbnRlbGxpZ2VuY2VcIixcbiAgSU5UX01PRDogICAgICAgICAgICBcImludF9tb2RcIixcbiAgTEFOR1VBR0VTOiAgICAgICAgICBcImxhbmd1YWdlc1wiLFxuICBMRVZFTDogICAgICAgICAgICAgIFwibGV2ZWxcIixcbiAgTUFHSUNBTDogICAgICAgICAgICBcIm1hZ2ljYWxcIixcbiAgTUFURVJJQUw6ICAgICAgICAgICBcIm1hdGVyaWFsXCIsXG4gIE5BTUU6ICAgICAgICAgICAgICAgXCJuYW1lXCIsXG4gIFBST1BFUlRJRVM6ICAgICAgICAgXCJwcm9wZXJ0aWVzXCIsXG4gIFJBTkdFOiAgICAgICAgICAgICAgXCJyYW5nZVwiLFxuICBSQVJJVFk6ICAgICAgICAgICAgIFwicmFyaXR5XCIsXG4gIFJFTE9BRDogICAgICAgICAgICAgXCJyZWxvYWRcIixcbiAgUklUVUFMOiAgICAgICAgICAgICBcInJpdHVhbFwiLFxuICBTQVZFOiAgICAgICAgICAgICAgIFwic2F2ZVwiLFxuICBTQVZJTkdfVEhST1dTOiAgICAgIFwic2F2aW5nX3Rocm93c1wiLFxuICBTQ0hPT0w6ICAgICAgICAgICAgIFwic2Nob29sXCIsXG4gIFNFTlNFUzogICAgICAgICAgICAgXCJzZW5zZXNcIixcbiAgU0laRTogICAgICAgICAgICAgICBcInNpemVcIixcbiAgU0tJTExTOiAgICAgICAgICAgICBcInNraWxsc1wiLFxuICBTS0lMTF9DSE9JQ0VfTElTVDogIFwic2tpbGxfY2hvaWNlX2xpc3RcIixcbiAgU09NQVRJQzogICAgICAgICAgICBcInNvbWF0aWNcIixcbiAgU09VUkNFOiAgICAgICAgICAgICBcInNvdXJjZVwiLFxuICBTUEVDSUVTOiAgICAgICAgICAgIFwic3BlY2llc1wiLFxuICBTUEVFRDogICAgICAgICAgICAgIFwic3BlZWRcIixcbiAgU1BFTExfQ0FTVF9NT0Q6ICAgICBcIlNwZWxsIENhc3QgTW9kXCIsXG4gIFNQRUxMX1JBTkdFOiAgICAgICAgXCJSYW5nZVwiLFxuICBTVEVBTFRIX0RJU0FEVkFOVEFHRTogXCJzdGVhbHRoRGlzYWR2YW50YWdlXCIsXG4gIFNUUkVOR1RIOiAgICAgICAgICAgXCJzdHJlbmd0aFwiLFxuICBTVFJfTU9EOiAgICAgICAgICAgIFwic3RyX21vZFwiLFxuICBTVUJSQUNFUzogICAgICAgICAgIFwic3VicmFjZXNcIixcbiAgVE9PTF9QUk9GSUNJRU5DSUVTOiBcInRvb2wtcHJvZlwiLFxuICBUT09MX0NIT0lDRV9MSVNUOiAgXCJ0b29sX2Nob2ljZV9saXN0XCIsXG4gIFRSQUlUUzogICAgICAgICAgICAgXCJ0cmFpdHNcIixcbiAgVFlQRTogICAgICAgICAgICAgICBcInR5cGVcIixcbiAgVkFSSUFOVDogICAgICAgICAgICBcIlZhcmlhbnRcIixcbiAgVkVSQkFMOiAgICAgICAgICAgICBcInZlcmJhbFwiLFxuICBWRVJNVU46ICAgICAgICAgICAgIFwidmVybXVuXCIsXG4gIFdFQVBPTl9QUk9GSUNJRU5DSUVTOiBcIndlYXBvbi1wcm9mXCIsXG4gIFdFSUdIVDogICAgICAgICAgICAgXCJ3ZWlnaHRcIixcbiAgV0lTRE9NOiAgICAgICAgICAgICBcIndpc2RvbVwiLFxuICBXSVNfTU9EOiAgICAgICAgICAgIFwid2lzX21vZFwiLFxufSBhcyBjb25zdDtcblxuZXhwb3J0IHR5cGUgRk1LZXkgPSBrZXlvZiB0eXBlb2YgRk1fRklFTERTO1xuZXhwb3J0IHR5cGUgRnJvbnRtYXR0ZXIgPSBQYXJ0aWFsPFJlY29yZDx0eXBlb2YgRk1fRklFTERTW0ZNS2V5XSwgdW5rbm93bj4+O1xuXG4vLyBcdTI1MDBcdTI1MDBcdTI1MDAgRGVmaW5pdGlvbiBvZiBhIHNpbmdsZSBmaWVsZCBtYXBwaW5nIFx1MjUwMFx1MjUwMFx1MjUwMFxuZXhwb3J0IGludGVyZmFjZSBGaWVsZERlZiB7XG4gIC8qKiBXaGljaCBjYWxsXHUyMDEwc2lnbiAoa2V5IGluIEZNX0ZJRUxEUykgKi9cbiAgY2FsbFNpZ246IEZNS2V5O1xuICAvKiogV2hpY2ggSlNPTiBwcm9wZXJ0eSB0byByZWFkICovXG4gIGpzb25LZXk6ICBzdHJpbmcgfCBzdHJpbmdbXTtcbiAgLyoqIE9wdGlvbmFsIHRyYW5zZm9ybWVyOiByYXcgSlNPTiBcdTIxOTIgZmluYWwgdmFsdWUgKi9cbiAgY29udj86ICAgIChyYXc6IGFueSwgYWxsSnNvbj86IGFueSkgPT4gdW5rbm93bjtcbn1cblxuY29uc3QgdW5pZmllZEFybW9yUHJvZnMgPSAodmFsOiBhbnkpOiBzdHJpbmdbXSA9PlxuICBBcnJheS5pc0FycmF5KHZhbD8uYXJtb3IpID8gdmFsLmFybW9yLm1hcChjYXApIDpcbiAgQXJyYXkuaXNBcnJheSh2YWwpID8gdmFsLm1hcChjYXApIDogW107XG5cbi8vIGZyb250bWF0dGVyLnRzXG5cbmV4cG9ydCBmdW5jdGlvbiB1bmlmaWVkV2VhcG9uUHJvZnModmFsOiBhbnkpOiBzdHJpbmdbXSB7XG4gIC8vIHB1bGwgdGhlIFx1MjAxQ3dlYXBvbnNcdTIwMUQgYXJyYXkgb2ZmIGVpdGhlciBhIHJhdyBhcnJheSBvciBhIHN0YXJ0aW5nUHJvZmljaWVuY2llcyBvYmplY3RcbiAgY29uc3QgcmF3QXJyOiBhbnlbXSA9IEFycmF5LmlzQXJyYXkodmFsPy53ZWFwb25zKVxuICAgID8gdmFsLndlYXBvbnNcbiAgICA6IEFycmF5LmlzQXJyYXkodmFsKVxuICAgID8gdmFsXG4gICAgOiBbXTtcblxuICBjb25zdCBvdXQgPSBuZXcgU2V0PHN0cmluZz4oKTtcblxuICBmdW5jdGlvbiBoYW5kbGVPbmUoZW50cnk6IGFueSkge1xuICAgIGlmIChBcnJheS5pc0FycmF5KGVudHJ5KSkge1xuICAgICAgLy8gZmxhdHRlbiBuZXN0ZWQgYXJyYXlzXG4gICAgICBlbnRyeS5mb3JFYWNoKGhhbmRsZU9uZSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKHR5cGVvZiBlbnRyeSA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgY29uc3QgbGl0ID0gZW50cnkudHJpbSgpLnRvTG93ZXJDYXNlKCk7XG4gICAgICBpZiAobGl0ID09PSBcInNpbXBsZVwiKSB7XG4gICAgICAgIG91dC5hZGQoXCJTaW1wbGUgV2VhcG9uc1wiKTtcbiAgICAgIH0gZWxzZSBpZiAobGl0ID09PSBcIm1hcnRpYWxcIikge1xuICAgICAgICBvdXQuYWRkKFwiTWFydGlhbCBXZWFwb25zXCIpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gZGV0ZWN0IHRhZ2dlZCBpdGVtcyB2cyBzaW1wbGUgd29yZHNcbiAgICAgICAgY29uc3QgdGV4dCA9IGVudHJ5LnN0YXJ0c1dpdGgoXCJ7QFwiKVxuICAgICAgICAgID8gcmVwbGFjZTVlVGFncyhlbnRyeSlcbiAgICAgICAgICA6IGNhcChlbnRyeSk7XG4gICAgICAgIG91dC5hZGQodGV4dCk7XG4gICAgICB9XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKGVudHJ5ICYmIHR5cGVvZiBlbnRyeSA9PT0gXCJvYmplY3RcIiAmJiBlbnRyeS5wcm9maWNpZW5jeSkge1xuICAgICAgLy8geyBwcm9maWNpZW5jeTogXCJmaXJlYXJtc1wiLCBvcHRpb25hbDogdHJ1ZSB9XG4gICAgICBjb25zdCBuYW1lID0gY2FwKGVudHJ5LnByb2ZpY2llbmN5KTtcbiAgICAgIG91dC5hZGQoZW50cnkub3B0aW9uYWwgPyBgJHtuYW1lfSAob3B0aW9uYWwpYCA6IG5hbWUpO1xuICAgIH1cbiAgfVxuXG4gIHJhd0Fyci5mb3JFYWNoKGhhbmRsZU9uZSk7XG4gIHJldHVybiBbLi4ub3V0XTtcbn1cblxuXG5jb25zdCBTQVZFX05BTUVfTUFQOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+ID0ge1xuICBzdHI6IFwiU3RyZW5ndGhcIixcbiAgc3RyZW5ndGg6IFwiU3RyZW5ndGhcIixcbiAgZGV4OiBcIkRleHRlcml0eVwiLFxuICBkZXh0ZXJpdHk6IFwiRGV4dGVyaXR5XCIsXG4gIGNvbjogXCJDb25zdGl0dXRpb25cIixcbiAgY29uc3RpdHV0aW9uOiBcIkNvbnN0aXR1dGlvblwiLFxuICBpbnQ6IFwiSW50ZWxsaWdlbmNlXCIsXG4gIGludGVsbGlnZW5jZTogXCJJbnRlbGxpZ2VuY2VcIixcbiAgd2lzOiBcIldpc2RvbVwiLFxuICB3aXNkb206IFwiV2lzZG9tXCIsXG4gIGNoYTogXCJDaGFyaXNtYVwiLFxuICBjaGFyaXNtYTogXCJDaGFyaXNtYVwiLFxufTtcblxuZXhwb3J0IGZ1bmN0aW9uIHVuaWZpZWRTYXZlcyh2YWw6IGFueSk6IHN0cmluZ1tdIHtcbiAgaWYgKCF2YWwpIHJldHVybiBbXTtcblxuICAvLyBBcnJheSBmb3JtXG4gIGlmIChBcnJheS5pc0FycmF5KHZhbCkpIHtcbiAgICByZXR1cm4gdmFsLm1hcCgoaykgPT4ge1xuICAgICAgY29uc3Qga2V5ID0gU3RyaW5nKGspLnRvTG93ZXJDYXNlKCk7XG4gICAgICByZXR1cm4gU0FWRV9OQU1FX01BUFtrZXldIHx8IChrZXkuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBrZXkuc2xpY2UoMSkpO1xuICAgIH0pO1xuICB9XG5cbiAgLy8gT2JqZWN0IGZvcm0gKGUuZy4sIHsgY29uOiB0cnVlLCBkZXg6IHRydWUgfSlcbiAgaWYgKHR5cGVvZiB2YWwgPT09IFwib2JqZWN0XCIpIHtcbiAgICByZXR1cm4gT2JqZWN0LmtleXModmFsKS5tYXAoKGspID0+IHtcbiAgICAgIGNvbnN0IGtleSA9IGsudG9Mb3dlckNhc2UoKTtcbiAgICAgIHJldHVybiBTQVZFX05BTUVfTUFQW2tleV0gfHwgKGtleS5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIGtleS5zbGljZSgxKSk7XG4gICAgfSk7XG4gIH1cblxuICAvLyBTdHJpbmcgZm9ybVxuICBjb25zdCBrZXkgPSBTdHJpbmcodmFsKS50b0xvd2VyQ2FzZSgpO1xuICByZXR1cm4gW1NBVkVfTkFNRV9NQVBba2V5XSB8fCAoa2V5LmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsga2V5LnNsaWNlKDEpKV07XG59XG5cbmV4cG9ydCBjb25zdCB1bmlmaWVkU2tpbGxzID0gKHZhbDogYW55KTogc3RyaW5nW10gPT4ge1xuICAvLyAxKSBcdTIwMUNCZXN0aWFyeVx1MjAxRCBzdHlsZTogZmxhdCBvYmplY3QgbWFwcGluZyBza2lsbFx1MjE5Mm1vZGlmaWVyXG4gIGlmIChcbiAgICB2YWwgJiZcbiAgICAhQXJyYXkuaXNBcnJheSh2YWwpICYmXG4gICAgdHlwZW9mIHZhbCA9PT0gXCJvYmplY3RcIiAmJlxuICAgIC8vIGVuc3VyZSBldmVyeSB2YWx1ZSBpcyBhIHN0cmluZyBvciBudW1iZXJcbiAgICBPYmplY3QudmFsdWVzKHZhbCkuZXZlcnkodiA9PiB0eXBlb2YgdiA9PT0gXCJzdHJpbmdcIiB8fCB0eXBlb2YgdiA9PT0gXCJudW1iZXJcIilcbiAgKSB7XG4gICAgcmV0dXJuIE9iamVjdC5lbnRyaWVzKHZhbCkubWFwKFxuICAgICAgKFtza2lsbCwgbW9kXSkgPT4gYCR7Y2FwKHNraWxsKX0gJHttb2R9YC50cmltKClcbiAgICApO1xuICB9XG5cbiAgLy8gMikgbmVzdGVkIHVuZGVyIC5za2lsbHMgLyAuc2tpbGxQcm9maWNpZW5jaWVzIC8gLnNraWxsUHJvZlxuICBpZiAodmFsICYmICFBcnJheS5pc0FycmF5KHZhbCkgJiYgdHlwZW9mIHZhbCA9PT0gXCJvYmplY3RcIikge1xuICAgIGNvbnN0IG5lc3RlZCA9ICh2YWwgYXMgYW55KS5za2lsbHNcbiAgICAgID8/ICh2YWwgYXMgYW55KS5za2lsbFByb2ZcbiAgICAgID8/ICh2YWwgYXMgYW55KS5za2lsbFByb2ZpY2llbmNpZXM7XG4gICAgcmV0dXJuIHVuaWZpZWRTa2lsbHMobmVzdGVkKTtcbiAgfVxuXG4gIC8vIDMpIGFycmF5LXN0eWxlXG4gIGlmICghQXJyYXkuaXNBcnJheSh2YWwpKSByZXR1cm4gW107XG5cbiAgY29uc3Qgb3V0ID0gbmV3IFNldDxzdHJpbmc+KCk7XG4gIGZvciAoY29uc3QgZSBvZiB2YWwpIHtcbiAgICAvLyAzYSkgeyBhbnk6IE4gfVxuICAgIGlmIChlICYmIHR5cGVvZiBlID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiAoZSBhcyBhbnkpLmFueSA9PT0gXCJudW1iZXJcIikge1xuICAgICAgb3V0LmFkZChgQ2hvb3NlICR7KGUgYXMgYW55KS5hbnl9YCk7XG4gICAgICBjb250aW51ZTtcbiAgICB9XG4gICAgLy8gM2IpIHsgY2hvb3NlOiB7IGNvdW50LCBcdTIwMjYgfSB9XG4gICAgaWYgKGUgJiYgdHlwZW9mIGUgPT09IFwib2JqZWN0XCIgJiYgKGUgYXMgYW55KS5jaG9vc2UpIHtcbiAgICAgIGNvbnN0IGNudCA9IChlIGFzIGFueSkuY2hvb3NlLmNvdW50ID8/IDE7XG4gICAgICBvdXQuYWRkKGBDaG9vc2UgJHtjbnR9YCk7XG4gICAgfVxuICAgIC8vIDNjKSBmaXhlZCBmbGFncyBmb286IHRydWVcbiAgICBpZiAoZSAmJiB0eXBlb2YgZSA9PT0gXCJvYmplY3RcIikge1xuICAgICAgZm9yIChjb25zdCBbaywgdl0gb2YgT2JqZWN0LmVudHJpZXMoZSkpIHtcbiAgICAgICAgaWYgKHYgPT09IHRydWUpIG91dC5hZGQoY2FwKGspKTtcbiAgICAgIH1cbiAgICB9XG4gICAgLy8gM2QpIGxpdGVyYWwgc3RyaW5nc1xuICAgIGlmICh0eXBlb2YgZSA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgb3V0LmFkZChjYXAoZSkpO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBbLi4ub3V0XTtcbn07XG5cblxuIFxuZXhwb3J0IGNvbnN0IHVuaWZpZWRUb29sUHJvZnMgPSAodmFsOiBhbnkpOiBzdHJpbmdbXSA9PiB7XG4gIC8vIHB1bGwgbmVzdGVkIGFycmF5IGlmIHNvbWVvbmUgcGFzc2VkIHlvdSB0aGUgd2hvbGUgc3RhcnRpbmdQcm9maWNpZW5jaWVzIG9ialxuICBsZXQgZW50cmllczogYW55W10gPSBBcnJheS5pc0FycmF5KHZhbCkgPyB2YWxcbiAgICA6IEFycmF5LmlzQXJyYXkodmFsPy50b29sUHJvZmljaWVuY2llcykgPyB2YWwudG9vbFByb2ZpY2llbmNpZXNcbiAgICA6IEFycmF5LmlzQXJyYXkodmFsPy50b29scykgICAgICAgICAgICAgPyB2YWwudG9vbHNcbiAgICA6IFtdO1xuXG4gIGNvbnN0IG91dCA9IG5ldyBTZXQ8c3RyaW5nPigpO1xuICBsZXQgc2F3Q2hvb3NlID0gZmFsc2U7XG5cbiAgZm9yIChjb25zdCBlIG9mIGVudHJpZXMpIHtcbiAgICBpZiAodHlwZW9mIGUgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgIG91dC5hZGQoY2FwKGUpKTtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cblxuICAgIGlmIChlPy5jaG9vc2UpIHtcbiAgICAgIGNvbnN0IGNudCA9IGUuY2hvb3NlLmNvdW50ID8/IDE7XG4gICAgICBzYXdDaG9vc2UgPSB0cnVlO1xuICAgICAgb3V0LmFkZChgQ2hvb3NlICR7Y250fWApO1xuICAgIH1cblxuICAgIC8vIHB1bGwgb3V0IGFueSBmaXhlZCBcdTIwMUNmb286IHRydWVcdTIwMUQgb3IgbnVtZXJpYyBcdTIwMUNhbnlGb286IE5cdTIwMURcbiAgICBmb3IgKGNvbnN0IFtrLHZdIG9mIE9iamVjdC5lbnRyaWVzKGUpKSB7XG4gICAgICBpZiAodiA9PT0gdHJ1ZSkge1xuICAgICAgICBvdXQuYWRkKGNhcChrKSk7XG4gICAgICB9IGVsc2UgaWYgKHR5cGVvZiB2ID09PSBcIm51bWJlclwiICYmIGsuc3RhcnRzV2l0aChcImFueVwiKSkge1xuICAgICAgICAvLyBlLmcuIGFueUFydGlzYW5zVG9vbDoxXG4gICAgICAgIGNvbnN0IHJhdyA9IGsucmVwbGFjZSgvXmFueS8sIFwiXCIpO1xuICAgICAgICBjb25zdCBzcGFjZWQgPSByYXdcbiAgICAgICAgICAucmVwbGFjZSgvKFthLXpdKShbQS1aXSkvZywgXCIkMSAkMlwiKVxuICAgICAgICAgIC5zcGxpdChcIiBcIilcbiAgICAgICAgICAubWFwKGNhcClcbiAgICAgICAgICAuam9pbihcIiBcIik7XG4gICAgICAgIG91dC5hZGQoYENob29zZSAke3Z9ICR7c3BhY2VkfWApO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiBbLi4ub3V0XTtcbn07XG5cbmV4cG9ydCBjb25zdCBBTExfRklFTERfREVGUzogRmllbGREZWZbXSA9IFtcbiAgLy8gXHUyNTAwXHUyNTAwXHUyNTAwIENvcmUgXHUyNTAwXHUyNTAwXHUyNTAwXG4gIHsgY2FsbFNpZ246IFwiTkFNRVwiLCAganNvbktleTogXCJuYW1lXCIgfSxcbntcbiAgY2FsbFNpZ246IFwiU09VUkNFXCIsXG4gIGpzb25LZXk6IFtcInNvdXJjZVwiXSxcbiAgY29udjogKHJhdzogYW55LCBhbGxKc29uOiBhbnkpOiBzdHJpbmdbXSA9PiB7XG4gICAgY29uc3Qgb3V0ID0gbmV3IFNldDxzdHJpbmc+KCk7XG4gICAgY29uc3QgZWRpdGlvbklkID0gKGFsbEpzb24gYXMgYW55KS5fZWRpdGlvbklkO1xuXG4gICAgLy8gMSkgcHJpbWFyeSBzb3VyY2UocylcbiAgICBjb25zdCBhcnIgPSBBcnJheS5pc0FycmF5KHJhdykgPyByYXcgOiBbcmF3XTtcbiAgICBhcnIuZm9yRWFjaChzcmMgPT4ge1xuICAgICAgb3V0LmFkZChnZXRGdWxsU291cmNlTmFtZShzcmMsIGVkaXRpb25JZCkpO1xuICAgIH0pO1xuXG4gICAgLy8gMikgYW55IG90aGVyU291cmNlcyBlbnRyaWVzXG4gICAgZm9yIChjb25zdCBvcyBvZiBhbGxKc29uLm90aGVyU291cmNlcyA/PyBbXSkge1xuICAgICAgaWYgKG9zICYmIHR5cGVvZiBvcy5zb3VyY2UgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgb3V0LmFkZChnZXRGdWxsU291cmNlTmFtZShvcy5zb3VyY2UsIGVkaXRpb25JZCkpO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIDMpIHJlcHJpbnRlZEFzIGVudHJpZXMgKGd1YXJkIGJlZm9yZSBzcGxpdHRpbmcpXG4gICAgZm9yIChjb25zdCByZXAgb2YgYWxsSnNvbi5yZXByaW50ZWRBcyA/PyBbXSkge1xuICAgICAgLy8gZW5zdXJlIHdlIGhhdmUgYSBzdHJpbmcgdG8gc3BsaXRcbiAgICAgIGNvbnN0IHJlcFN0ciA9IHR5cGVvZiByZXAgPT09IFwic3RyaW5nXCIgPyByZXAgOiBTdHJpbmcocmVwKTtcbiAgICAgIGNvbnN0IHBhcnRzID0gcmVwU3RyLnNwbGl0KFwifFwiKTtcbiAgICAgIC8vIGlmIHRoZXJlJ3Mgbm8gcGlwZSwgcGFydHNbMV0gd2lsbCBiZSB1bmRlZmluZWQsIHNvIGZhbGxiYWNrIHRvIHBhcnRzWzBdXG4gICAgICBjb25zdCBzcmMgPSBwYXJ0c1sxXSA/PyBwYXJ0c1swXTtcbiAgICAgIG91dC5hZGQoZ2V0RnVsbFNvdXJjZU5hbWUoc3JjLCBlZGl0aW9uSWQpKTtcbiAgICB9XG5cbiAgICByZXR1cm4gWy4uLm91dF07XG4gIH1cbn0sXG5cblxuICAvLyBcdTI1MDBcdTI1MDBcdTI1MDAgUHJvZmljaWVuY2llcyBcdTI1MDBcdTI1MDBcdTI1MDBcbiAgeyBjYWxsU2lnbjogXCJBUk1PUl9QUk9GSUNJRU5DSUVTXCIsICBqc29uS2V5OiBbXCJhcm1vclByb2ZpY2llbmNpZXNcIiwgXCJhcm1vclByb2ZzXCIsIFwic3RhcnRpbmdQcm9maWNpZW5jaWVzXCJdLCBjb252OiB1bmlmaWVkQXJtb3JQcm9mcyB9LFxuICB7IFxuICAgIGNhbGxTaWduOiBcIldFQVBPTl9QUk9GSUNJRU5DSUVTXCIsXG4gICAganNvbktleTogW1wid2VhcG9uUHJvZmljaWVuY2llc1wiLFwid2VhcG9uUHJvZnNcIixcInN0YXJ0aW5nUHJvZmljaWVuY2llc1wiXSxcbiAgICBjb252OiB1bmlmaWVkV2VhcG9uUHJvZnNcbiAgfSxcbiAgeyBjYWxsU2lnbjogXCJUT09MX1BST0ZJQ0lFTkNJRVNcIiwgICBqc29uS2V5OiBbXCJ0b29sUHJvZmljaWVuY2llc1wiLCBcInRvb2xQcm9mc1wiLCBcInN0YXJ0aW5nUHJvZmljaWVuY2llc1wiXSwgY29udjogdW5pZmllZFRvb2xQcm9mcyB9LFxuICB7XG4gICAgY2FsbFNpZ246IFwiVE9PTF9DSE9JQ0VfTElTVFwiLFxuICAgIGpzb25LZXk6IFtcInRvb2xQcm9maWNpZW5jaWVzXCIsIFwidG9vbFByb2ZzXCIsIFwic3RhcnRpbmdQcm9maWNpZW5jaWVzXCJdLFxuICAgIGNvbnY6IChyYXc6IGFueSkgPT4ge1xuICAgICAgY29uc3QgYXJyID0gQXJyYXkuaXNBcnJheShyYXcpXG4gICAgICAgID8gcmF3XG4gICAgICAgIDogQXJyYXkuaXNBcnJheShyYXc/LnRvb2xQcm9maWNpZW5jaWVzKVxuICAgICAgICA/IHJhdy50b29sUHJvZmljaWVuY2llc1xuICAgICAgICA6IEFycmF5LmlzQXJyYXkocmF3Py50b29scylcbiAgICAgICAgPyByYXcudG9vbHNcbiAgICAgICAgOiBbXTtcbiAgICAgIGNvbnN0IGNob2ljZSA9IGFyci5maW5kKChlOiBhbnkpID0+IGU/LmNob29zZSk7XG4gICAgICByZXR1cm4gY2hvaWNlPy5jaG9vc2U/LmZyb20/Lm1hcCgoczogc3RyaW5nKSA9PiBjYXAocykpID8/IFtdO1xuICAgIH1cbiAgfSxcbiAgeyBjYWxsU2lnbjogXCJTQVZJTkdfVEhST1dTXCIsICAgICAgICBqc29uS2V5OiBbXCJzYXZlXCIsIFwicHJvZmljaWVuY3lcIiwgXCJzYXZpbmdUaHJvd1wiXSwgY29udjogdW5pZmllZFNhdmVzIH0sXG4gIHtcbiAgICBjYWxsU2lnbjogXCJTS0lMTFNcIixcbiAgICBqc29uS2V5OiBbXCJza2lsbFwiLCBcInNraWxsUHJvZlwiLCBcInNraWxsUHJvZmljaWVuY2llc1wiLCBcInN0YXJ0aW5nUHJvZmljaWVuY2llc1wiXSxcbiAgICBjb252OiB1bmlmaWVkU2tpbGxzXG4gIH0sXG5cbiAge1xuICAgIGNhbGxTaWduOiBcIlNLSUxMX0NIT0lDRV9MSVNUXCIsXG4gICAganNvbktleTogW1wic2tpbGxcIiwgXCJza2lsbFByb2ZcIiwgXCJza2lsbFByb2ZpY2llbmNpZXNcIiwgXCJzdGFydGluZ1Byb2ZpY2llbmNpZXNcIl0sXG4gICAgY29udjogKHJhdzogYW55KSA9PiB7XG4gICAgICAvLyBub3JtYWxpemUgaW50byBhbiBhcnJheSBvZiBlbnRyaWVzXG4gICAgICBjb25zdCBhcnI6IGFueVtdID0gQXJyYXkuaXNBcnJheShyYXcpXG4gICAgICAgID8gcmF3XG4gICAgICAgIDogQXJyYXkuaXNBcnJheShyYXc/LnNraWxsUHJvZmljaWVuY2llcylcbiAgICAgICAgPyByYXcuc2tpbGxQcm9maWNpZW5jaWVzXG4gICAgICAgIDogQXJyYXkuaXNBcnJheShyYXc/LnNraWxscylcbiAgICAgICAgPyByYXcuc2tpbGxzXG4gICAgICAgIDogQXJyYXkuaXNBcnJheShyYXc/LnNraWxsUHJvZilcbiAgICAgICAgPyByYXcuc2tpbGxQcm9mXG4gICAgICAgIDogW107XG5cbiAgICAgIC8vIGZpbmQgdGhlIG9uZSBlbnRyeSB0aGF0IHJlcHJlc2VudHMgdGhlIFx1MjAxQ2Nob29zZVx1MjAxRCBidWNrZXRcbiAgICAgIGNvbnN0IGNob2ljZU9iaiA9IGFyci5maW5kKGUgPT4gZT8uY2hvb3NlIHx8IHR5cGVvZiBlLmFueSA9PT0gXCJudW1iZXJcIik7XG4gICAgICBpZiAoIWNob2ljZU9iaikgcmV0dXJuIFtdO1xuXG4gICAgICAvLyBleHBsaWNpdCBcdTIwMUNjaG9vc2UgZnJvbSBbIC4uLiBdXHUyMDFEXG4gICAgICBpZiAoY2hvaWNlT2JqLmNob29zZSAmJiBBcnJheS5pc0FycmF5KGNob2ljZU9iai5jaG9vc2UuZnJvbSkpIHtcbiAgICAgICAgcmV0dXJuIGNob2ljZU9iai5jaG9vc2UuZnJvbS5tYXAoY2FwKTtcbiAgICAgIH1cblxuICAgICAgLy8gdGhlIFx1MjAxQ2FueTogM1x1MjAxRCBzaG9ydGhhbmQgXHUyMTkyIG9mZmVyIGV2ZXJ5IHNraWxsXG4gICAgICBpZiAodHlwZW9mIGNob2ljZU9iai5hbnkgPT09IFwibnVtYmVyXCIpIHtcbiAgICAgICAgLy8gU0tJTExfT1BUSU9OUyBpcyB5b3VyIGNvbnN0IFtcIkFjcm9iYXRpY3NcIiwgXCJBbmltYWwgSGFuZGxpbmdcIiwgXHUyMDI2XVxuICAgICAgICByZXR1cm4gU0tJTExfT1BUSU9OUztcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIFtdO1xuICAgIH1cbiAgfSxcbiAgeyBjYWxsU2lnbjogXCJTUEVMTF9DQVNUX01PRFwiLGpzb25LZXk6IFwic3BlbGxjYXN0aW5nQWJpbGl0eVwiLCAgXG4gICAgY29udjogKHJhdykgPT4ge1xuICAgIC8vIHJhdyBtaWdodCBiZSBcImNoYVwiIG9yIFwiQ0hBXCJcbiAgICBjb25zdCBrZXkgPSBTdHJpbmcocmF3KS50b0xvd2VyQ2FzZSgpO1xuICAgIHJldHVybiBBQklMSVRZX0ZVTExba2V5XSB8fCBrZXkudG9VcHBlckNhc2UoKTtcbiAgfX0sXG5cblxuICAvLyBcdTI1MDBcdTI1MDBcdTI1MDAgU3BlbGxzIFx1MjUwMFx1MjUwMFx1MjUwMFxuICB7IGNhbGxTaWduOiBcIkxFVkVMXCIsICAgICAgICAganNvbktleTogXCJsZXZlbFwiIH0sXG4gIHsgY2FsbFNpZ246IFwiU0NIT09MXCIsICAgICAgICBqc29uS2V5OiBcInNjaG9vbFwiLCAgIGNvbnY6IHMgPT4gU0NIT09MX01BUFtzXSA/PyBzIH0sXG4gIHsgY2FsbFNpZ246IFwiQ0FTVElOR19USU1FXCIsICBqc29uS2V5OiBcInRpbWVcIiwgICAgIGNvbnY6IGZvcm1hdFRpbWUgfSxcbiAgeyBjYWxsU2lnbjogXCJTUEVMTF9SQU5HRVwiLCAgIGpzb25LZXk6IFwicmFuZ2VcIiwgICAgY29udjogZm9ybWF0UmFuZ2UgfSxcbiAgeyBjYWxsU2lnbjogXCJEVVJBVElPTlwiLCAgICAgIGpzb25LZXk6IFwiZHVyYXRpb25cIiwgY29udjogZm9ybWF0RHVyYXRpb24gfSxcbiAgeyBjYWxsU2lnbjogXCJWRVJCQUxcIiwgICAgICAgIGpzb25LZXk6IFwiY29tcG9uZW50c1wiLCBjb252OiAoYzphbnkpID0+ICEhYy52IH0sXG4gIHsgY2FsbFNpZ246IFwiU09NQVRJQ1wiLCAgICAgICBqc29uS2V5OiBcImNvbXBvbmVudHNcIiwgY29udjogKGM6YW55KSA9PiAhIWMucyB9LFxuICB7IGNhbGxTaWduOiBcIk1BVEVSSUFMXCIsICAgICAganNvbktleTogXCJjb21wb25lbnRzXCIsIGNvbnY6IChjOmFueSkgPT4gISFjLm0gfSxcbiAgeyBjYWxsU2lnbjogXCJDT01QT05FTlRTXCIsXG4gICAganNvbktleTogIFwiY29tcG9uZW50c1wiLFxuICAgIGNvbnY6IChjOiBhbnkpOiBzdHJpbmdbXSA9PiB7XG4gICAgICBpZiAoIWMubSkgcmV0dXJuIFtdO1xuXG4gICAgICBjb25zdCByYXcgPSBBcnJheS5pc0FycmF5KGMubSkgPyBjLm0gOiBbYy5tXTtcblxuICAgICAgcmV0dXJuIHJhd1xuICAgICAgICAubWFwKChpdGVtOiBhbnkpOiBzdHJpbmcgfCBudWxsID0+IHtcbiAgICAgICAgICBpZiAodHlwZW9mIGl0ZW0gPT09IFwic3RyaW5nXCIpIHJldHVybiBpdGVtO1xuICAgICAgICAgIGlmIChpdGVtICYmIHR5cGVvZiBpdGVtID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiBpdGVtLnRleHQgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgIHJldHVybiBpdGVtLnRleHQ7XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9KVxuICAgICAgICAuZmlsdGVyKChjb21wOiBzdHJpbmcgfCBudWxsKTogY29tcCBpcyBzdHJpbmcgPT4gY29tcCAhPT0gbnVsbCk7XG4gICAgfVxuICB9LCBcbiAgeyBjYWxsU2lnbjogXCJBVFRBQ0tfVFlQRVwiLCAgIGpzb25LZXk6IFwiYXR0YWNrVHlwZVwiIH0sXG4gIHsgY2FsbFNpZ246IFwiREFNQUdFX1RZUEVcIiwgICBqc29uS2V5OiBcImRhbWFnZUluZmxpY3RcIiwgY29udjogZCA9PiBBcnJheS5pc0FycmF5KGQpID8gZFswXSA6IGQgfSxcbiAgeyBjYWxsU2lnbjogXCJSSVRVQUxcIiwgICAgICAgIGpzb25LZXk6IFwicml0dWFsXCIgfSxcbiAgeyBjYWxsU2lnbjogXCJDT05DRU5UUkFUSU9OXCIsIGpzb25LZXk6IFwiZHVyYXRpb25cIiwgY29udjogZHMgPT4gQXJyYXkuaXNBcnJheShkcykgJiYgZHMuc29tZSgoeDphbnkpPT4geC5jb25jZW50cmF0aW9uKSB9LFxuICB7IGNhbGxTaWduOiBcIlNBVkVcIiwgICAgICAgICAganNvbktleTogXCJzYXZlQXR0clwiIH0sXG5cbiAgLy8gXHUyNTAwXHUyNTAwXHUyNTAwIFNwZWNpZXMgLyBDcmVhdHVyZXMgXHUyNTAwXHUyNTAwXHUyNTAwXG4gIHsgY2FsbFNpZ246IFwiU1BFQ0lFU1wiLCBqc29uS2V5OiBcIm5hbWVcIiB9LFxuICB7IGNhbGxTaWduOiBcIlNJWkVcIiwganNvbktleTogXCJzaXplXCIsIGNvbnY6IChyYXc6IGFueSkgPT4ge1xuICAgICAgLy8gaGFuZGxlIFtcIlNcIixcIk1cIl0gb3IganVzdCBcIkxcIlxuICAgICAgaWYgKEFycmF5LmlzQXJyYXkocmF3KSkge1xuICAgICAgICByZXR1cm4gcmF3Lm1hcChyID0+IFNJWkVfTUFQW3JdIHx8IHIpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIFNJWkVfTUFQW3Jhd10gfHwgcmF3O1xuICAgICAgfVxuICAgIH1cbiAgfSxcbiAgICB7XG4gIGNhbGxTaWduOiBcIlNQRUVEXCIsXG4gIGpzb25LZXk6ICAgXCJzcGVlZFwiLFxuICBjb252OiAoc3A6IG51bWJlciB8IFJlY29yZDxzdHJpbmcsIGFueT4pID0+IHtcbiAgICAvLyBoYW5kbGUgYm90aCBudW1lcmljIHNwZWVkcyBhbmQgb2JqZWN0IHNwZWVkc1xuICAgIGlmICh0eXBlb2Ygc3AgPT09IFwibnVtYmVyXCIpIHtcbiAgICAgIHJldHVybiBbYFdhbGsgJHtzcH0gZnQuYF07XG4gICAgfVxuICAgIGlmICghc3AgfHwgdHlwZW9mIHNwICE9PSBcIm9iamVjdFwiKSByZXR1cm4gW107XG4gICAgcmV0dXJuIE9iamVjdC5lbnRyaWVzKHNwKVxuICAgICAgLmZpbHRlcigoW21vZGVdKSA9PiBtb2RlICE9PSBcImNhbkhvdmVyXCIpXG4gICAgICAubWFwKChbbW9kZSwgdl0pID0+IHtcbiAgICAgICAgY29uc3QgbiA9IHR5cGVvZiB2ID09PSBcIm9iamVjdFwiICYmIHYgIT09IG51bGwgJiYgXCJudW1iZXJcIiBpbiB2ID8gKHYgYXMgYW55KS5udW1iZXIgOiB2O1xuICAgICAgICBjb25zdCBsYWJlbCA9IG1vZGUgPT09IFwid2Fsa1wiID8gXCJXYWxrXCIgOiBjYXAobW9kZSk7XG4gICAgICAgIHJldHVybiBgJHtsYWJlbH0gJHtufSBmdC5gO1xuICAgICAgfSk7XG4gIH0sXG59LFxueyBjYWxsU2lnbjogXCJMQU5HVUFHRVNcIiwganNvbktleTogW1wibGFuZ3VhZ2VzXCIsIFwibGFuZ3VhZ2VQcm9maWNpZW5jaWVzXCJdLCBjb252OiBhcnIgPT4ge1xuICAgICAgaWYgKCFBcnJheS5pc0FycmF5KGFycikpIHJldHVybiBbXTtcbiAgICAgIGNvbnN0IG91dDogc3RyaW5nW10gPSBbXTtcbiAgICAgIGZvciAoY29uc3QgbHAgb2YgYXJyKSB7XG4gICAgICAgIGlmICh0eXBlb2YgbHAgPT09IFwic3RyaW5nXCIpIG91dC5wdXNoKGNhcChscCkpO1xuICAgICAgICBlbHNlIGlmICh0eXBlb2YgbHAgPT09IFwib2JqZWN0XCIpIHtcbiAgICAgICAgICBmb3IgKGNvbnN0IFtsYW5nLCB2YWxdIG9mIE9iamVjdC5lbnRyaWVzKGxwKSkge1xuICAgICAgICAgICAgaWYgKHZhbCkgb3V0LnB1c2goY2FwKGxhbmcpKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiBbLi4ubmV3IFNldChvdXQpXTtcbiAgfX0sXG4gIHsgY2FsbFNpZ246IFwiU0VOU0VTXCIsIGpzb25LZXk6IFwic2Vuc2VzXCIsIGNvbnY6IHNlbiA9PiB7XG4gICAgICBpZiAoQXJyYXkuaXNBcnJheShzZW4pKSByZXR1cm4gc2VuLm1hcCgoczpzdHJpbmcpPT5zLnJlcGxhY2UoL15cXGQrXFxzKi8sXCJcIikucmVwbGFjZSgvXi4vLGM9PmMudG9VcHBlckNhc2UoKSkpO1xuICAgICAgaWYgKHNlbiAmJiB0eXBlb2Ygc2VuPT09XCJvYmplY3RcIikgcmV0dXJuIE9iamVjdC5lbnRyaWVzKHNlbikubWFwKChbayx2XSk9PmAke2suY2hhckF0KDApLnRvVXBwZXJDYXNlKCkray5zbGljZSgxKX0gJHt2fWApO1xuICAgICAgcmV0dXJuIFtdO1xuICB9fSwgXG57XG4gIGNhbGxTaWduOiBcIlRSQUlUU1wiLFxuICBqc29uS2V5OiBbXCJjbGFzc0ZlYXR1cmVzXCIsIFwiZW50cmllc1wiXSxcbiAgY29udjogKHJhdzogYW55LCBhbGxKc29uOiBhbnkpOiBzdHJpbmdbXSA9PiB7XG4gICAgLy8gRGlzcGxheS9maWxlIG5hbWUgdG8gdGFyZ2V0IGZvciB0aGUgZmlsZS1hbmNob3JcbiAgICBjb25zdCByZWMgPVxuICAgICAgQXJyYXkuaXNBcnJheShhbGxKc29uLmNsYXNzKSA/IGFsbEpzb24uY2xhc3NbMF0gOlxuICAgICAgQXJyYXkuaXNBcnJheShhbGxKc29uLnJhY2UpICA/IGFsbEpzb24ucmFjZVswXSAgOlxuICAgICAgYWxsSnNvbjtcbiAgICBjb25zdCBmaWxlTmFtZSA9IHR5cGVvZiByZWM/Lm5hbWUgPT09IFwic3RyaW5nXCJcbiAgICAgID8gcmVjLm5hbWVcbiAgICAgIDogKHR5cGVvZiBhbGxKc29uPy5uYW1lID09PSBcInN0cmluZ1wiID8gYWxsSnNvbi5uYW1lIDogXCJcIik7XG5cbiAgICAvLyBOYW1lcyB0byBvbWl0IGFjcm9zcyB0eXBlc1xuICAgIGNvbnN0IG9taXQgPSBuZXcgU2V0KFtcbiAgICAgIC8vIGNsYXNzLXNwZWNpZmljXG4gICAgICBcIkFiaWxpdHkgU2NvcmUgSW1wcm92ZW1lbnRcIixcbiAgICAgIFwiQXJjaGV0eXBlIEZlYXR1cmVcIixcbiAgICAgIFwiU3ViY2xhc3MgRmVhdHVyZVwiLFxuICAgICAgLy8gc3BlY2llcy1zcGVjaWZpYyBjb21tb24gaGVhZGluZ3NcbiAgICAgIFwiQWdlXCIsXG4gICAgICBcIlNpemVcIixcbiAgICAgIFwiU3BlZWRcIixcbiAgICAgIFwiTGFuZ3VhZ2VzXCIsXG4gICAgICAvLyBiYWNrZ3JvdW5kcyBvZnRlbiBoYXZlIGdlbmVyaWMgc2VjdGlvbnMgdG9vOyBhZGQgbW9yZSBpZiBuZWVkZWRcbiAgICBdKTtcblxuICAgIGNvbnN0IHNlZW4gPSBuZXcgU2V0PHN0cmluZz4oKTtcblxuICAgIC8vIFx1MjUwMFx1MjUwMCAxKSBDbGFzc2VzOiB1c2UgY2xhc3NGZWF0dXJlcyBpZiBhdmFpbGFibGUgKGV4aXN0aW5nIGJlaGF2aW9yKVxuICAgIGlmIChBcnJheS5pc0FycmF5KGFsbEpzb24uY2xhc3NGZWF0dXJlcykpIHtcbiAgICAgIGNvbnN0IGNsYXNzUmVjID0gQXJyYXkuaXNBcnJheShhbGxKc29uLmNsYXNzKSA/IGFsbEpzb24uY2xhc3NbMF0gOiBhbGxKc29uO1xuICAgICAgY29uc3QgY2xhc3NOYW1lID0gdHlwZW9mIGNsYXNzUmVjPy5uYW1lID09PSBcInN0cmluZ1wiID8gY2xhc3NSZWMubmFtZSA6IGZpbGVOYW1lO1xuXG4gICAgICByZXR1cm4gYWxsSnNvbi5jbGFzc0ZlYXR1cmVzLmZsYXRNYXAoKGZlYXQ6IGFueSkgPT4ge1xuICAgICAgICBpZiAoZmVhdCAmJiB0eXBlb2YgZmVhdCA9PT0gXCJvYmplY3RcIiAmJiBmZWF0LmdhaW5TdWJjbGFzc0ZlYXR1cmUpIHJldHVybiBbXTtcblxuICAgICAgICBjb25zdCByYXdOYW1lID1cbiAgICAgICAgICB0eXBlb2YgZmVhdCA9PT0gXCJzdHJpbmdcIiAgICAgICAgICAgICAgPyBmZWF0IDpcbiAgICAgICAgICB0eXBlb2YgZmVhdC5jbGFzc0ZlYXR1cmUgPT09IFwic3RyaW5nXCIgPyBmZWF0LmNsYXNzRmVhdHVyZSA6XG4gICAgICAgICAgXCJcIjtcblxuICAgICAgICBjb25zdCBuYW1lID0gcmF3TmFtZS5zcGxpdChcInxcIilbMF0udHJpbSgpO1xuICAgICAgICBpZiAoIW5hbWUgfHwgb21pdC5oYXMobmFtZSkgfHwgc2Vlbi5oYXMobmFtZSkpIHJldHVybiBbXTtcbiAgICAgICAgc2Vlbi5hZGQobmFtZSk7XG5cbiAgICAgICAgY29uc3QgYW5jaG9yID0gbmFtZVxuICAgICAgICAgIC5yZXBsYWNlKC9bXlxcd1xcc10vZywgXCJcIilcbiAgICAgICAgICAucmVwbGFjZSgvXFxzKy9nLCBcIiBcIilcbiAgICAgICAgICAudHJpbSgpXG4gICAgICAgICAgLnJlcGxhY2UoL1xcYlxcdy9nLCAoYzogYW55KSA9PiBjLnRvVXBwZXJDYXNlKCkpO1xuXG4gICAgICAgIHJldHVybiBjbGFzc05hbWUgPyBbYFtbJHtjbGFzc05hbWV9IyR7YW5jaG9yfXwke25hbWV9XV1gXSA6IFtuYW1lXTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIFx1MjUwMFx1MjUwMCAyKSBCYWNrZ3JvdW5kcyAvIFNwZWNpZXMgLyBTdWItc3BlY2llczogbWluZSBuYW1lcyBmcm9tIGVudHJpZXNbXVxuICAgIGNvbnN0IGVudHMgPSBBcnJheS5pc0FycmF5KHJhdykgPyByYXcgOiBbXTtcbiAgICBjb25zdCBuYW1lczogc3RyaW5nW10gPSBbXTtcblxuICAgIGNvbnN0IHB1c2hOYW1lID0gKG46IHN0cmluZyB8IHVuZGVmaW5lZCkgPT4ge1xuICAgICAgY29uc3QgbmFtZSA9IChuID8/IFwiXCIpLnJlcGxhY2UoL15GZWF0dXJlOlxccyovLCBcIlwiKS50cmltKCk7XG4gICAgICBpZiAoIW5hbWUgfHwgb21pdC5oYXMobmFtZSkgfHwgc2Vlbi5oYXMobmFtZSkpIHJldHVybjtcbiAgICAgIHNlZW4uYWRkKG5hbWUpO1xuICAgICAgbmFtZXMucHVzaChuYW1lKTtcbiAgICB9O1xuXG4gICAgZm9yIChjb25zdCBlIG9mIGVudHMpIHtcbiAgICAgIGlmICghZSkgY29udGludWU7XG4gICAgICBpZiAodHlwZW9mIGUgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIGUubmFtZSA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICBwdXNoTmFtZShlLm5hbWUpO1xuICAgICAgfVxuICAgICAgLy8gbmVzdGVkIGVudHJpZXMgYmxvY2tzIGNhbiBhbHNvIGNhcnJ5IG5hbWVkIHNlY3Rpb25zXG4gICAgICBpZiAodHlwZW9mIGUgPT09IFwib2JqZWN0XCIgJiYgQXJyYXkuaXNBcnJheShlLmVudHJpZXMpKSB7XG4gICAgICAgIGZvciAoY29uc3Qgc3ViIG9mIGUuZW50cmllcykge1xuICAgICAgICAgIGlmIChzdWIgJiYgdHlwZW9mIHN1YiA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2Ygc3ViLm5hbWUgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgIHB1c2hOYW1lKHN1Yi5uYW1lKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBJZiB3ZSBmb3VuZCBuYW1lcywgbGluayB0aGVtIHRvIHRoZSBjdXJyZW50IGZpbGVcdTIwMTlzIGhlYWRlcnNcbiAgICBpZiAobmFtZXMubGVuZ3RoKSB7XG4gICAgICByZXR1cm4gbmFtZXMubWFwKG5hbWUgPT4ge1xuICAgICAgICBjb25zdCBhbmNob3IgPSBuYW1lXG4gICAgICAgICAgLnJlcGxhY2UoL1teXFx3XFxzXS9nLCBcIlwiKVxuICAgICAgICAgIC5yZXBsYWNlKC9cXHMrL2csIFwiIFwiKVxuICAgICAgICAgIC50cmltKClcbiAgICAgICAgICAucmVwbGFjZSgvXFxiXFx3L2csIChjOiBhbnkpID0+IGMudG9VcHBlckNhc2UoKSk7XG4gICAgICAgIHJldHVybiBmaWxlTmFtZSA/IGBbWyR7ZmlsZU5hbWV9IyR7YW5jaG9yfXwke25hbWV9XV1gIDogbmFtZTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIFx1MjUwMFx1MjUwMCAzKSBGYWxsYmFjazogcHJlc2VydmUgcHJldmlvdXMgbm9uLWxpbmsgYmVoYXZpb3Igd2hlbiBub3RoaW5nIG1hdGNoZWRcbiAgICByZXR1cm4gZW50c1xuICAgICAgLmZpbHRlcigoZTogYW55KSA9PiBlICYmIHR5cGVvZiBlLm5hbWUgPT09IFwic3RyaW5nXCIpXG4gICAgICAubWFwKChlOiBhbnkpID0+IGUubmFtZS5yZXBsYWNlKC9eRmVhdHVyZTpcXHMqLywgXCJcIikudHJpbSgpKTtcbiAgfSxcbn0sXG5cblxuICB7IGNhbGxTaWduOiBcIkFDXCIsIGpzb25LZXk6IFwiYWNcIiwgY29udjogYSA9PiBBcnJheS5pc0FycmF5KGEpP2FbMF0uYWM6YSB9LFxuICB7IGNhbGxTaWduOiBcIkhQXCIsIGpzb25LZXk6IFwiaHBcIiwgY29udjogaHAgPT4gaHA/LmF2ZXJhZ2UgPz8gaHAgfSxcbiAgeyBjYWxsU2lnbjogXCJDSEFMTEVOR0VfUkFUSU5HXCIsIGpzb25LZXk6IFwiY3JcIiB9LFxuICB7IGNhbGxTaWduOiBcIlNUUkVOR1RIXCIsICAgICBqc29uS2V5OiBcImFiaWxpdHlcIiwgY29udjogYXJyPT5BcnJheS5pc0FycmF5KGFycik/YXJyWzBdOmFycj8uc3RyID8/IDAgfSxcbiAgeyBjYWxsU2lnbjogXCJERVhURVJJVFlcIiwgICAganNvbktleTogXCJhYmlsaXR5XCIsIGNvbnY6IGFycj0+QXJyYXkuaXNBcnJheShhcnIpP2FyclsxXTphcnI/LmRleCA/PyAwIH0sXG4gIHsgY2FsbFNpZ246IFwiQ09OU1RJVFVUSU9OXCIsIGpzb25LZXk6IFwiYWJpbGl0eVwiLCBjb252OiBhcnI9PkFycmF5LmlzQXJyYXkoYXJyKT9hcnJbMl06YXJyPy5jb24gPz8gMCB9LFxuICB7IGNhbGxTaWduOiBcIklOVEVMTElHRU5DRVwiLCBqc29uS2V5OiBcImFiaWxpdHlcIiwgY29udjogYXJyPT5BcnJheS5pc0FycmF5KGFycik/YXJyWzNdOmFycj8uaW50ID8/IDAgfSxcbiAgeyBjYWxsU2lnbjogXCJXSVNET01cIiwgICAgICAganNvbktleTogXCJhYmlsaXR5XCIsIGNvbnY6IGFycj0+QXJyYXkuaXNBcnJheShhcnIpP2Fycls0XTphcnI/LndpcyA/PyAwIH0sXG4gIHsgY2FsbFNpZ246IFwiQ0hBUklTTUFcIiwgICAgIGpzb25LZXk6IFwiYWJpbGl0eVwiLCBjb252OiBhcnI9PkFycmF5LmlzQXJyYXkoYXJyKT9hcnJbNV06YXJyPy5jaGEgPz8gMCB9LFxuICB7XG4gICAgY2FsbFNpZ246IFwiQUxJR05NRU5UXCIsXG4gICAganNvbktleTogXCJhbGlnbm1lbnRcIixcbiAgICBjb252OiAoYTogYW55KSA9PiB7XG4gICAgICBjb25zdCByYXcgPSBBcnJheS5pc0FycmF5KGEpID8gYS5qb2luKFwiIFwiKSA6IHR5cGVvZiBhID09PSBcInN0cmluZ1wiID8gYSA6IFN0cmluZyhhKTtcbiAgICAgIGNvbnN0IGNsZWFuZWQgPSByYXdcbiAgICAgICAgLnJlcGxhY2UoL1xcYkFcXGIvZywgXCJBbnlcIilcbiAgICAgICAgLnJlcGxhY2UoL1xcYlVcXGIvZywgXCJVbmFsaWduZWRcIilcbiAgICAgICAgLnJlcGxhY2UoL1xcYk5cXGIvZywgXCJOZXV0cmFsXCIpXG4gICAgICAgIC5yZXBsYWNlKC9cXGJMXFxiL2csIFwiTGF3ZnVsXCIpXG4gICAgICAgIC5yZXBsYWNlKC9cXGJDXFxiL2csIFwiQ2hhb3RpY1wiKVxuICAgICAgICAucmVwbGFjZSgvXFxiR1xcYi9nLCBcIkdvb2RcIilcbiAgICAgICAgLnJlcGxhY2UoL1xcYkVcXGIvZywgXCJFdmlsXCIpO1xuXG4gICAgICByZXR1cm4gZm9ybWF0QWxpZ25tZW50QWJicmV2KGNsZWFuZWQpOyAvLyByZXVzZSB5b3VyIG5vcm1hbGl6ZXIgaWYgaXQgZXhpc3RzXG4gICAgfVxuICB9LFxuICAgIHtcbiAgICAgIGNhbGxTaWduOiBcIlRZUEVcIixcbiAgICAgIGpzb25LZXk6IFwidHlwZVwiLFxuICAgICAgY29udjogKHQ6IGFueSk6IHN0cmluZyB8IHVuZGVmaW5lZCA9PiB7XG4gICAgICAgIC8vIDEpIElmIGl0XHUyMDE5cyBhIHNpbXBsZSBzdHJpbmcgY29kZSwgbWFwIGl0XG4gICAgICAgIGlmICh0eXBlb2YgdCA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgIC8vIGRpcmVjdCBsb29rdXBcdTIwMTRpZiBubyBtYXBwaW5nLCBqdXN0IHRpdGxlXHUyMDEwY2FzZSB0aGUgY29kZVxuICAgICAgICAgIHJldHVybiBJVEVNX1RZUEVfTUFQW3RdID8/IGNhcCh0KTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIDIpIElmIGl0XHUyMDE5cyBhbiBvYmplY3Qgd2l0aCBhIC50eXBlIHRhZ1xuICAgICAgICBpZiAodCAmJiB0eXBlb2YgdCA9PT0gXCJvYmplY3RcIikge1xuICAgICAgICAgIGNvbnN0IGNvZGUgPSBTdHJpbmcodC50eXBlIHx8IFwiXCIpLnRvVXBwZXJDYXNlKCk7XG4gICAgICAgICAgLy8gdHJ5IHRoZSBtYXAgZmlyc3RcbiAgICAgICAgICBpZiAoSVRFTV9UWVBFX01BUFtjb2RlXSkge1xuICAgICAgICAgICAgcmV0dXJuIElURU1fVFlQRV9NQVBbY29kZV07XG4gICAgICAgICAgfVxuICAgICAgICAgIC8vIG90aGVyd2lzZSBmYWxsIGJhY2sgdG8gXHUyMDFDQmFzZSAodGFnc1x1MjAyNilcdTIwMUQgc3R5bGVcbiAgICAgICAgICBjb25zdCBiYXNlID0gdC50eXBlID8gY2FwKHQudHlwZSkgOiBcIlVua25vd25cIjtcbiAgICAgICAgICBjb25zdCB0YWdzID0gQXJyYXkuaXNBcnJheSh0LnRhZ3MpID8gdC50YWdzLm1hcChjYXApIDogW107XG4gICAgICAgICAgcmV0dXJuIHRhZ3MubGVuZ3RoID8gYCR7YmFzZX0gKCR7dGFncy5qb2luKFwiLCBcIil9KWAgOiBiYXNlO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgIH1cbiAgICB9LFxuXG5cbiAgLy8gXHUyNTAwXHUyNTAwXHUyNTAwIEl0ZW1zIFx1MjUwMFx1MjUwMFx1MjUwMFxuICB7IGNhbGxTaWduOiBcIlRZUEVcIiwgICBqc29uS2V5OiBcIl9wYXJzZWRUeXBlXCIgfSxcbiAgeyBjYWxsU2lnbjogXCJSQVJJVFlcIiwganNvbktleTogXCJyYXJpdHlcIiwgY29udjogciA9PiB7XG4gICAgICBjb25zdCBzID0gU3RyaW5nKHJ8fFwiXCIpLnRvTG93ZXJDYXNlKCk7XG4gICAgICByZXR1cm4gcyAmJiBzIT09XCJub25lXCIgPyBzWzBdLnRvVXBwZXJDYXNlKCkrcy5zbGljZSgxKSA6IHVuZGVmaW5lZDtcbiAgfX0sXG4gIHtcbiAgICBjYWxsU2lnbjogXCJDT1NUXCIsXG4gICAganNvbktleTogXCJ2YWx1ZVwiLFxuICAgIGNvbnY6IChyYXc6IGFueSkgPT4ge1xuICAgICAgY29uc3QgcyA9IFN0cmluZyhyYXcpLnRyaW0oKS50b0xvd2VyQ2FzZSgpO1xuICAgICAgbGV0IG51bTogbnVtYmVyO1xuXG4gICAgICAvLyBleHBsaWNpdCBjb3BwZXI/XG4gICAgICBpZiAocy5lbmRzV2l0aChcImNwXCIpKSB7XG4gICAgICAgIG51bSA9IHBhcnNlRmxvYXQocyk7XG4gICAgICAgIC8vIGNvbnZlcnQgdG8gZ3Agb25seSBpZiAxMDArIGNwXG4gICAgICAgIHJldHVybiBudW0gPj0gMTAwXG4gICAgICAgICAgPyBgJHtNYXRoLnJvdW5kKChudW0vMTAwKSAqIDEwMCkvMTAwfWdwYFxuICAgICAgICAgIDogYCR7bnVtfWNwYDtcbiAgICAgIH1cblxuICAgICAgLy8gZXhwbGljaXQgc2lsdmVyP1xuICAgICAgaWYgKHMuZW5kc1dpdGgoXCJzcFwiKSkge1xuICAgICAgICBudW0gPSBwYXJzZUZsb2F0KHMpO1xuICAgICAgICAvLyBjb252ZXJ0IHRvIGdwIG9ubHkgaWYgMTArIHNwXG4gICAgICAgIHJldHVybiBudW0gPj0gMTBcbiAgICAgICAgICA/IGAke01hdGgucm91bmQoKG51bS8xMCkgKiAxMDApLzEwMH1ncGBcbiAgICAgICAgICA6IGAke251bX1zcGA7XG4gICAgICB9XG5cbiAgICAgIC8vIGV4cGxpY2l0IGdvbGQ/XG4gICAgICBpZiAocy5lbmRzV2l0aChcImdwXCIpKSB7XG4gICAgICAgIG51bSA9IHBhcnNlRmxvYXQocyk7XG4gICAgICAgIHJldHVybiBgJHtNYXRoLnJvdW5kKG51bSAqIDEwMCkvMTAwfWdwYDtcbiAgICAgIH1cblxuICAgICAgLy8gYmFyZSBudW1iZXIgXHUyMTkyIGFzc3VtZSBjb3BwZXJcbiAgICAgIG51bSA9IHBhcnNlRmxvYXQocykgfHwgMDtcbiAgICAgIHJldHVybiBudW0gPj0gMTAwXG4gICAgICAgID8gYCR7TWF0aC5yb3VuZCgobnVtLzEwMCkgKiAxMDApLzEwMH1ncGBcbiAgICAgICAgOiBgJHtudW19Y3BgO1xuICAgIH1cbiAgfSxcbiAgeyBjYWxsU2lnbjogXCJXRUlHSFRcIiwganNvbktleTogXCJ3ZWlnaHRcIiB9LFxuICB7IGNhbGxTaWduOiBcIk1BR0lDQUxcIiwganNvbktleTogXCJ3b25kcm91c1wiLCBjb252OiAoX3csYWxsKSA9PiAhIWFsbC53b25kcm91cyB8fCAhIWFsbC5yZXFBdHR1bmUgfSxcbiAgeyBjYWxsU2lnbjogXCJWQVJJQU5UXCIsIGpzb25LZXk6IFwiYm9udXNXZWFwb25cIiwgY29udjogYiA9PiB0eXBlb2YgYj09PVwic3RyaW5nXCIgJiYgYi5zdGFydHNXaXRoKFwiK1wiKSB9LFxuICB7IGNhbGxTaWduOiBcIlBST1BFUlRJRVNcIiwganNvbktleTogXCJwcm9wZXJ0eVwiLCBjb252OiBhcnIgPT4gQXJyYXkuaXNBcnJheShhcnIpID8gYXJyLm1hcChwID0+IFBST1BFUlRZX01BUFtwXSB8fCBwKSA6IFtdIH0sXG4gIHsgY2FsbFNpZ246IFwiREFNQUdFXCIsIGpzb25LZXk6IFwiZG1nMVwiLCBjb252OiAoZCxhbGwpID0+IGQgPyBhbGwuZG1nMiA/IGAke2R9IC8gJHthbGwuZG1nMn1gIDogYCR7ZH1gIDogdW5kZWZpbmVkIH0sXG4gIHsgY2FsbFNpZ246IFwiREFNQUdFX1RZUEVTXCIsIGpzb25LZXk6IFwiZG1nVHlwZVwiLCBjb252OiBkdCA9PiBkdCA9PSBudWxsID8gW10gOiBBcnJheS5pc0FycmF5KGR0KSA/IGR0IDogW2R0XSB9LFxuICB7IGNhbGxTaWduOiBcIlJBTkdFXCIsIGpzb25LZXk6IFwicmFuZ2VcIiB9LFxuICB7IGNhbGxTaWduOiBcIlJFTE9BRFwiLCBqc29uS2V5OiBcInJlbG9hZFwiIH0sXG4gIHsgY2FsbFNpZ246IFwiQU1NT19UWVBFXCIsIGpzb25LZXk6IFwiYW1tb1R5cGVcIiwgY29udjogKHY6IGFueSkgPT4gdHlwZW9mIHYgPT09IFwic3RyaW5nXCIgPyB2LnNwbGl0KFwifFwiKVswXS5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIHYuc3BsaXQoXCJ8XCIpWzBdLnNsaWNlKDEpLnRvTG93ZXJDYXNlKCkgOiBcIlwiIH0sXG4gIHsgY2FsbFNpZ246IFwiU1RFQUxUSF9ESVNBRFZBTlRBR0VcIiwganNvbktleTogXCJzdGVhbHRoXCIgfSxcbiAge1xuICAgIGNhbGxTaWduOiBcIkFUVFVORU1FTlRcIixcbiAgICBqc29uS2V5OiBbXCJ3b25kcm91c1wiLCBcInJlcUF0dHVuZVwiLCBcInJlcV9hdHR1bmVcIiwgXCJyZXFBdHR1bmVUYWdzXCJdLFxuICAgIGNvbnY6IChfcmF3LCBhbGxKc29uKSA9PiB7XG4gICAgICBjb25zdCBqID0gYWxsSnNvbiBhcyBhbnk7XG4gICAgICBjb25zdCBoYXNUZXh0ID0gdHlwZW9mIGoucmVxQXR0dW5lID09PSBcInN0cmluZ1wiICYmIGoucmVxQXR0dW5lLnRyaW0oKSAhPT0gXCJcIjtcbiAgICAgIGNvbnN0IGhhc1RhZ3MgPSBBcnJheS5pc0FycmF5KGoucmVxQXR0dW5lVGFncykgJiYgai5yZXFBdHR1bmVUYWdzLmxlbmd0aCA+IDA7XG4gICAgICByZXR1cm4gaGFzVGV4dCB8fCBoYXNUYWdzO1xuICAgIH1cbiAgfSxcbiAgICB7XG4gICAgY2FsbFNpZ246IFwiQVRUVU5FX1JFUVwiLFxuICAgIGpzb25LZXk6IFwicmVxQXR0dW5lVGFnc1wiLFxuICAgIGNvbnY6ICh0YWdzOiBhbnlbXSA9IFtdLCBfYWxsKSA9PiB7XG4gICAgICBjb25zdCBtYXBMZXR0ZXI6IFJlY29yZDxzdHJpbmcsc3RyaW5nPiA9IHtcbiAgICAgICAgQTogXCJBbnlcIiwgVTogXCJVbmFsaWduZWRcIiwgTjogXCJOZXV0cmFsXCIsXG4gICAgICAgIEw6IFwiTGF3ZnVsXCIsIEM6IFwiQ2hhb3RpY1wiLCBHOiBcIkdvb2RcIiwgRTogXCJFdmlsXCJcbiAgICAgIH07XG4gICAgICBjb25zdCByZXFzOiBzdHJpbmdbXSA9IFtdO1xuXG4gICAgICBmb3IgKGNvbnN0IHRhZyBvZiB0YWdzKSB7XG4gICAgICAgIGlmICh0YWcuY2xhc3MgJiYgQXJyYXkuaXNBcnJheSh0YWcuYWxpZ25tZW50KSkge1xuICAgICAgICAgIGNvbnN0IGNscyA9IGNhcCh0YWcuY2xhc3MpO1xuICAgICAgICAgIGZvciAoY29uc3QgY29kZSBvZiB0YWcuYWxpZ25tZW50KSB7XG4gICAgICAgICAgICByZXFzLnB1c2goYCR7bWFwTGV0dGVyW2NvZGVdIHx8IGNvZGV9ICR7Y2xzfWApO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmICh0YWcuY2xhc3MpIHtcbiAgICAgICAgICByZXFzLnB1c2goY2FwKHRhZy5jbGFzcykpO1xuICAgICAgICB9IGVsc2UgaWYgKEFycmF5LmlzQXJyYXkodGFnLmFsaWdubWVudCkpIHtcbiAgICAgICAgICBmb3IgKGNvbnN0IGNvZGUgb2YgdGFnLmFsaWdubWVudCkge1xuICAgICAgICAgICAgcmVxcy5wdXNoKG1hcExldHRlcltjb2RlXSB8fCBjb2RlKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAodGFnLmJhY2tncm91bmQpIHtcbiAgICAgICAgICBjb25zdCBbYmddID0gU3RyaW5nKHRhZy5iYWNrZ3JvdW5kKS5zcGxpdChcInxcIik7XG4gICAgICAgICAgcmVxcy5wdXNoKGJnLnNwbGl0KFwiIFwiKS5tYXAoY2FwKS5qb2luKFwiIFwiKSk7XG4gICAgICAgIH0gZWxzZSBpZiAodGFnLnNwZWxsY2FzdGluZykge1xuICAgICAgICAgIHJlcXMucHVzaChcIlNwZWxsY2FzdGVyXCIpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBBcnJheS5mcm9tKG5ldyBTZXQocmVxcykpO1xuICAgIH1cbiAgfSxcbiAgICB7XG4gICAgY2FsbFNpZ246IFwiVkVSTVVOXCIsXG4gICAganNvbktleTogXCJ3b25kcm91c1wiLCAgICAgICAgICAgIC8vIG9yIHdoYXRldmVyIHByb3BlcnR5IHlvdSB1c2UgdG8gZGV0ZWN0IFx1MjAxQ21hZ2ljYWxcdTIwMURcbiAgICBjb252OiAoX3JhdywgYWxsKSA9PiAhIWFsbC53b25kcm91cyB8fCAhIWFsbC5yZXFBdHR1bmVcbiAgfSxcbiAgLy8gXHUyNTAwXHUyNTAwXHUyNTAwIE90aGVyIFx1MjUwMFx1MjUwMFx1MjUwMFxuICB7IGNhbGxTaWduOiBcIkRBTUFHRV9SRVNcIiwganNvbktleTogXCJyZXNpc3RcIiwgY29udjogdiA9PiBBcnJheS5pc0FycmF5KHYpID8gdi5tYXAoY2FwKSA6IFtdIH0sXG57XG4gIGNhbGxTaWduOiBcIlJVTEVTRVRcIixcbiAganNvbktleTogXCJuYW1lXCIsXG4gIC8vIGlnbm9yZSB0aGUgcmF3IHZhbHVlLCBhbHdheXMgcHJpbnQgSEVMTE9cbiAgY29udjogKF9yYXcsIF9hbGwpID0+IFwiRCZEIDVlICgyMDI1KVwiLFxufSwgXG4gICAgLy8gXHUyNTAwXHUyNTAwXHUyNTAwIEFiaWxpdHlcdTIwMTBzY29yZSBtb2RpZmllcnMgKG9ubHkgZW1pdCB3aGVuIG5vbnplcm8pIFx1MjUwMFx1MjUwMFx1MjUwMFxuICB7XG4gICAgY2FsbFNpZ246IFwiU1RSX01PRFwiLFxuICAgIGpzb25LZXk6ICBcImFiaWxpdHlcIixcbiAgICBjb252OiAoYXJyOiBhbnkpOiBudW1iZXIgfCB1bmRlZmluZWQgPT4ge1xuICAgICAgY29uc3QgdiA9IEFycmF5LmlzQXJyYXkoYXJyKSA/IChhcnJbMF0uc3RyID8/IDApIDogKGFyci5zdHIgPz8gMCk7XG4gICAgICByZXR1cm4gdiAhPT0gMCA/IHYgOiB1bmRlZmluZWQ7XG4gICAgfSxcbiAgfSxcbiAge1xuICAgIGNhbGxTaWduOiBcIkRFWF9NT0RcIixcbiAgICBqc29uS2V5OiAgXCJhYmlsaXR5XCIsXG4gICAgY29udjogKGFycjogYW55KTogbnVtYmVyIHwgdW5kZWZpbmVkID0+IHtcbiAgICAgIGNvbnN0IHYgPSBBcnJheS5pc0FycmF5KGFycikgPyAoYXJyWzBdLmRleCA/PyAwKSA6IChhcnIuZGV4ID8/IDApO1xuICAgICAgcmV0dXJuIHYgIT09IDAgPyB2IDogdW5kZWZpbmVkO1xuICAgIH0sXG4gIH0sXG4gIHtcbiAgICBjYWxsU2lnbjogXCJDT05fTU9EXCIsXG4gICAganNvbktleTogIFwiYWJpbGl0eVwiLFxuICAgIGNvbnY6IChhcnI6IGFueSk6IG51bWJlciB8IHVuZGVmaW5lZCA9PiB7XG4gICAgICBjb25zdCB2ID0gQXJyYXkuaXNBcnJheShhcnIpID8gKGFyclswXS5jb24gPz8gMCkgOiAoYXJyLmNvbiA/PyAwKTtcbiAgICAgIHJldHVybiB2ICE9PSAwID8gdiA6IHVuZGVmaW5lZDtcbiAgICB9LFxuICB9LFxuICB7XG4gICAgY2FsbFNpZ246IFwiSU5UX01PRFwiLFxuICAgIGpzb25LZXk6ICBcImFiaWxpdHlcIixcbiAgICBjb252OiAoYXJyOiBhbnkpOiBudW1iZXIgfCB1bmRlZmluZWQgPT4ge1xuICAgICAgY29uc3QgdiA9IEFycmF5LmlzQXJyYXkoYXJyKSA/IChhcnJbMF0uaW50ID8/IDApIDogKGFyci5pbnQgPz8gMCk7XG4gICAgICByZXR1cm4gdiAhPT0gMCA/IHYgOiB1bmRlZmluZWQ7XG4gICAgfSxcbiAgfSxcbiAge1xuICAgIGNhbGxTaWduOiBcIldJU19NT0RcIixcbiAgICBqc29uS2V5OiAgXCJhYmlsaXR5XCIsXG4gICAgY29udjogKGFycjogYW55KTogbnVtYmVyIHwgdW5kZWZpbmVkID0+IHtcbiAgICAgIGNvbnN0IHYgPSBBcnJheS5pc0FycmF5KGFycikgPyAoYXJyWzBdLndpcyA/PyAwKSA6IChhcnIud2lzID8/IDApO1xuICAgICAgcmV0dXJuIHYgIT09IDAgPyB2IDogdW5kZWZpbmVkO1xuICAgIH0sXG4gIH0sXG4gIHtcbiAgICBjYWxsU2lnbjogXCJDSEFfTU9EXCIsXG4gICAganNvbktleTogIFwiYWJpbGl0eVwiLFxuICAgIGNvbnY6IChhcnI6IGFueSk6IG51bWJlciB8IHVuZGVmaW5lZCA9PiB7XG4gICAgICBjb25zdCB2ID0gQXJyYXkuaXNBcnJheShhcnIpID8gKGFyclswXS5jaGEgPz8gMCkgOiAoYXJyLmNoYSA/PyAwKTtcbiAgICAgIHJldHVybiB2ICE9PSAwID8gdiA6IHVuZGVmaW5lZDtcbiAgICB9LFxuICB9LFxuXG5cbl07XG5cblxuLy8gXHUyNTAwXHUyNTAwXHUyNTAwIEdlbmVyaWMgYnVpbGRlciBcdTI1MDBcdTI1MDBcdTI1MDBcbmV4cG9ydCBmdW5jdGlvbiBidWlsZEZNKGpzb246IGFueSwgZGVmczogRmllbGREZWZbXSk6IEZyb250bWF0dGVyIHtcbiAgY29uc3QgZm06IEZyb250bWF0dGVyID0ge307XG4gIGZvciAoY29uc3QgeyBjYWxsU2lnbiwganNvbktleSwgY29udiB9IG9mIGRlZnMpIHtcbiAgICBjb25zdCBrZXlzID0gQXJyYXkuaXNBcnJheShqc29uS2V5KSA/IGpzb25LZXkgOiBbanNvbktleV07XG4gICAgbGV0IHJhdzogYW55ID0gdW5kZWZpbmVkO1xuXG4gICAgZm9yIChjb25zdCBrZXkgb2Yga2V5cykge1xuICAgICAgaWYgKGpzb25ba2V5XSAhPSBudWxsKSB7XG4gICAgICAgIHJhdyA9IGpzb25ba2V5XTtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHJhdyA9PSBudWxsKSBjb250aW51ZTtcbiAgICBjb25zdCB2YWwgPSBjb252ID8gY29udihyYXcsIGpzb24pIDogcmF3O1xuICAgIGZtW0ZNX0ZJRUxEU1tjYWxsU2lnbl1dID0gdmFsO1xuICB9XG4gIHJldHVybiBmbTtcbn1cblxuLy8gZnJvbnRtYXR0ZXIudHNcblxuZXhwb3J0IGZ1bmN0aW9uIHNlcmlhbGl6ZUZyb250bWF0dGVyKFxuICBmbTogRnJvbnRtYXR0ZXIsXG4gIGRlZnM/OiBGaWVsZERlZltdXG4pOiBzdHJpbmcge1xuICBjb25zdCBmaWx0ZXJlZDogUmVjb3JkPHN0cmluZywgYW55PiA9IHt9O1xuXG4gIC8vIGRldGVjdCBpZiB3ZSBoYXZlIGFueSBhY3R1YWwgY2hvaWNlLWxpc3RzXG4gIGNvbnN0IGhhc1NraWxsQ2hvaWNlID0gQXJyYXkuaXNBcnJheShmbVtGTV9GSUVMRFMuU0tJTExfQ0hPSUNFX0xJU1RdKSBcbiAgICAmJiAoZm1bRk1fRklFTERTLlNLSUxMX0NIT0lDRV9MSVNUXSBhcyBhbnlbXSkubGVuZ3RoID4gMDtcbiAgY29uc3QgaGFzVG9vbENob2ljZSA9IEFycmF5LmlzQXJyYXkoZm1bRk1fRklFTERTLlRPT0xfQ0hPSUNFX0xJU1RdKSBcbiAgICAmJiAoZm1bRk1fRklFTERTLlRPT0xfQ0hPSUNFX0xJU1RdIGFzIGFueVtdKS5sZW5ndGggPiAwO1xuXG5cbiAgZm9yIChjb25zdCBbaywgdl0gb2YgT2JqZWN0LmVudHJpZXMoZm0pKSB7XG4gICAgLy8gMSkgbmV2ZXIgZW1pdCB1bmRlZmluZWRcbiAgICBpZiAodiA9PT0gdW5kZWZpbmVkKSBjb250aW51ZTtcbiAgICAvLyAyKSBkcm9wIGVtcHR5IENPTVBPTkVOVFMsIFRPT0xfQ0hPSUNFX0xJU1QsIFNLSUxMX0NIT0lDRV9MSVNUXG4gICAgaWYgKGsgPT09IEZNX0ZJRUxEUy5DT01QT05FTlRTICYmIEFycmF5LmlzQXJyYXkodikgJiYgdi5sZW5ndGggPT09IDApIGNvbnRpbnVlO1xuICAgIGlmIChcbiAgICAgIChrID09PSBGTV9GSUVMRFMuVE9PTF9DSE9JQ0VfTElTVCB8fCBrID09PSBGTV9GSUVMRFMuU0tJTExfQ0hPSUNFX0xJU1QpICYmXG4gICAgICBBcnJheS5pc0FycmF5KHYpICYmIHYubGVuZ3RoID09PSAwXG4gICAgKSBjb250aW51ZTtcblxuICAgIGZpbHRlcmVkW2tdID0gdjtcbiAgfVxuXG4gIC8vIGJ1aWxkIHRoZSBsaXN0IG9mIGtleXMgaW4gdGhlIGV4YWN0IG9yZGVyIGZyb20gZGVmc1xuICBsZXQga2V5c1RvRW1pdDogc3RyaW5nW107XG4gIGlmIChkZWZzKSB7XG4gICAgLy8gbWFwIGVhY2ggRmllbGREZWYgdG8gaXRzIGZyb250bWF0dGVyIGtleVxuICAgIGNvbnN0IHdhbnRlZCA9IGRlZnMubWFwKGQgPT4gRk1fRklFTERTW2QuY2FsbFNpZ25dKTtcbiAgICAvLyBvbmx5IGtlZXAgdGhlIG9uZXMgd2UgYWN0dWFsbHkgaGF2ZSwgaW4gb3JkZXJcbiAgICBrZXlzVG9FbWl0ID0gd2FudGVkLmZpbHRlcihrID0+IGsgaW4gZmlsdGVyZWQpO1xuICAgIC8vIHRoZW4gYXBwZW5kIGFueSBleHRyYSBrZXlzIHRoYXQgd2VyZW4ndCBpbiBkZWZzXG4gICAga2V5c1RvRW1pdC5wdXNoKFxuICAgICAgLi4uT2JqZWN0LmtleXMoZmlsdGVyZWQpLmZpbHRlcihrID0+ICFrZXlzVG9FbWl0LmluY2x1ZGVzKGspKVxuICAgICk7XG4gIH0gZWxzZSB7XG4gICAga2V5c1RvRW1pdCA9IE9iamVjdC5rZXlzKGZpbHRlcmVkKTtcbiAgfVxuXG4gIC8vIG5vdyBlbWl0IFlBTUwgaW4gdGhhdCBvcmRlclxuICByZXR1cm4ga2V5c1RvRW1pdFxuICAgIC5tYXAoayA9PiB7XG4gICAgICBjb25zdCB2ID0gZmlsdGVyZWRba107XG4gICAgICBpZiAoQXJyYXkuaXNBcnJheSh2KSkge1xuICAgICAgICAvLyBKU09OLnN0cmluZ2lmeSB0byBoYW5kbGUgc3BhY2VzLCBjb21tYXMsIGV0Yy5cbiAgICAgICAgY29uc3QgaW5saW5lID0gdi5tYXAoaXRlbSA9PiBKU09OLnN0cmluZ2lmeShpdGVtKSkuam9pbihcIiwgXCIpO1xuICAgICAgICByZXR1cm4gYCR7a306IFske2lubGluZX1dYDtcbiAgICAgIH1cbiAgICAgIGlmICh0eXBlb2YgdiA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICByZXR1cm4gYCR7a306IFwiJHt2fVwiYDtcbiAgICAgIH1cbiAgICAgIHJldHVybiBgJHtrfTogJHt2fWA7XG4gICAgfSlcbiAgICAuam9pbihcIlxcblwiKTtcbn1cblxuXG4vLyBcdTI1MDBcdTI1MDBcdTI1MDAgU2tpbGwgaGVscGVycyBcdTI1MDBcdTI1MDBcdTI1MDBcbmV4cG9ydCBjb25zdCBTS0lMTF9PUFRJT05TID0gW1xuICBcIkFjcm9iYXRpY3NcIixcIkFuaW1hbCBIYW5kbGluZ1wiLFwiQXJjYW5hXCIsXCJBdGhsZXRpY3NcIixcIkRlY2VwdGlvblwiLFwiSGlzdG9yeVwiLFxuICBcIkluc2lnaHRcIixcIkludGltaWRhdGlvblwiLFwiSW52ZXN0aWdhdGlvblwiLFwiTWVkaWNpbmVcIixcIk5hdHVyZVwiLFwiUGVyY2VwdGlvblwiLFxuICBcIlBlcmZvcm1hbmNlXCIsXCJQZXJzdWFzaW9uXCIsXCJSZWxpZ2lvblwiLFwiU2xlaWdodCBvZiBIYW5kXCIsXCJTdGVhbHRoXCIsXCJTdXJ2aXZhbFwiLFxuXSBhcyBjb25zdDtcbmV4cG9ydCB0eXBlIFNraWxsT3B0aW9uID0gdHlwZW9mIFNLSUxMX09QVElPTlNbbnVtYmVyXTtcbmV4cG9ydCBmdW5jdGlvbiBub3JtYWxpemVTa2lsbChyYXc6IHN0cmluZyk6IFNraWxsT3B0aW9uIHwgbnVsbCB7XG4gIGNvbnN0IGxvd2VyID0gcmF3LnRyaW0oKS50b0xvd2VyQ2FzZSgpO1xuICByZXR1cm4gU0tJTExfT1BUSU9OUy5maW5kKHNraWxsID0+IHNraWxsLnRvTG93ZXJDYXNlKCkgPT09IGxvd2VyKSA/PyBudWxsO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGZpbHRlclZhbGlkU2tpbGxzKHJhd0FycjogYW55W10pOiBTa2lsbE9wdGlvbltdIHtcbiAgaWYgKCFBcnJheS5pc0FycmF5KHJhd0FycikpIHJldHVybiBbXTtcbiAgY29uc3Qgc2VlbiA9IG5ldyBTZXQ8U2tpbGxPcHRpb24+KCk7XG4gIGZvciAoY29uc3QgZW50IG9mIHJhd0Fycikge1xuICAgIGxldCBjYW5kaWRhdGU6IHN0cmluZyB8IHVuZGVmaW5lZDtcbiAgICBpZiAodHlwZW9mIGVudCA9PT0gXCJzdHJpbmdcIikgY2FuZGlkYXRlID0gZW50O1xuICAgIGVsc2UgaWYgKGVudC5uYW1lICYmIHR5cGVvZiBlbnQubmFtZSA9PT0gXCJzdHJpbmdcIikgY2FuZGlkYXRlID0gZW50Lm5hbWU7XG4gICAgaWYgKGNhbmRpZGF0ZSkge1xuICAgICAgY29uc3Qgbm9ybSA9IG5vcm1hbGl6ZVNraWxsKGNhbmRpZGF0ZSk7XG4gICAgICBpZiAobm9ybSkgc2Vlbi5hZGQobm9ybSk7XG4gICAgfVxuICB9XG4gIHJldHVybiBbLi4uc2Vlbl07XG59XG5cbi8vIFx1MjUwMFx1MjUwMFx1MjUwMCBXaGljaCBGTV9LRVlTIGVhY2ggcGFyc2VyIHNob3VsZCBpbmNsdWRlIFx1MjUwMFx1MjUwMFx1MjUwMFxuZXhwb3J0IGNvbnN0IFNQRUxMX0tFWVM6IEZNS2V5W10gPSBbXG4gIFwiTkFNRVwiLFxuICBcIkxFVkVMXCIsXG4gIFwiU0NIT09MXCIsXG4gIFwiQ0FTVElOR19USU1FXCIsXG4gIFwiU1BFTExfUkFOR0VcIixcbiAgXCJTQVZJTkdfVEhST1dTXCIsXG4gIFwiRFVSQVRJT05cIixcbiAgXCJWRVJCQUxcIixcbiAgXCJTT01BVElDXCIsXG4gIFwiTUFURVJJQUxcIixcbiAgXCJDT01QT05FTlRTXCIsXG4gIFwiQ09OQ0VOVFJBVElPTlwiLFxuICBcIlNPVVJDRVwiLFxuICBcIlJVTEVTRVRcIlxuXTtcblxuZXhwb3J0IGNvbnN0IFNQRUNJRVNfS0VZUzogRk1LZXlbXSA9IFtcbiAgXCJTUEVDSUVTXCIsXG4gIFwiU0laRVwiLFxuICBcIlNQRUVEXCIsXG4gIFwiTEFOR1VBR0VTXCIsXG4gIFwiVFJBSVRTXCIsXG4gIFwiU0tJTExTXCIsXG4gIFwiU1RSX01PRFwiLFxuICBcIkRFWF9NT0RcIixcbiAgXCJDT05fTU9EXCIsXG4gIFwiSU5UX01PRFwiLFxuICBcIldJU19NT0RcIixcbiAgXCJDSEFfTU9EXCIsXG4gIFwiU0tJTExfQ0hPSUNFX0xJU1RcIixcbiAgXCJUT09MX1BST0ZJQ0lFTkNJRVNcIixcbiAgXCJUT09MX0NIT0lDRV9MSVNUXCIsXG4gIFwiV0VBUE9OX1BST0ZJQ0lFTkNJRVNcIixcbiAgXCJTRU5TRVNcIixcbiAgXCJEQU1BR0VfUkVTXCIsXG4gIFwiU09VUkNFXCIsXG4gIFwiUlVMRVNFVFwiXG5dO1xuXG5leHBvcnQgY29uc3QgSVRFTV9LRVlTOiBGTUtleVtdID0gW1xuICBcIk5BTUVcIixcbiAgXCJUWVBFXCIsXG4gIFwiUkFSSVRZXCIsXG4gIFwiQ09TVFwiLFxuICBcIldFSUdIVFwiLFxuICBcIlBST1BFUlRJRVNcIixcbiAgXCJEQU1BR0VcIixcbiAgXCJEQU1BR0VfVFlQRVNcIixcbiAgXCJSQU5HRVwiLFxuICBcIlJFTE9BRFwiLFxuICBcIkFNTU9fVFlQRVwiLFxuICBcIkFDXCIsXG4gIFwiU1RFQUxUSF9ESVNBRFZBTlRBR0VcIixcbiAgXCJNQUdJQ0FMXCIsXG4gIFwiQVRUVU5FTUVOVFwiLFxuICBcIkFUVFVORV9SRVFcIixcbiAgXCJWRVJNVU5cIixcbiAgXCJTT1VSQ0VcIixcbiAgXCJSVUxFU0VUXCJcbl07XG5cbmV4cG9ydCBjb25zdCBCRVNUSUFSWV9LRVlTOiBGTUtleVtdID0gW1xuICBcIk5BTUVcIixcbiAgXCJTSVpFXCIsXG4gIFwiVFlQRVwiLFxuICBcIkFMSUdOTUVOVFwiLFxuICBcIkFDXCIsXG4gIFwiSFBcIixcbiAgXCJTUEVFRFwiLFxuICBcIlNUUkVOR1RIXCIsXG4gIFwiREVYVEVSSVRZXCIsXG4gIFwiQ09OU1RJVFVUSU9OXCIsXG4gIFwiSU5URUxMSUdFTkNFXCIsXG4gIFwiV0lTRE9NXCIsXG4gIFwiQ0hBUklTTUFcIixcbiAgXCJTQVZJTkdfVEhST1dTXCIsXG4gIFwiU0tJTExTXCIsXG4gIFwiU0VOU0VTXCIsXG4gIFwiTEFOR1VBR0VTXCIsXG4gIFwiQ0hBTExFTkdFX1JBVElOR1wiLFxuICBcIlNPVVJDRVwiLFxuICBcIlJVTEVTRVRcIlxuXTtcblxuZXhwb3J0IGNvbnN0IENMQVNTX0tFWVM6IEZNS2V5W10gPSBbXG4gIFwiTkFNRVwiLFxuICBcIlNQRUxMX0NBU1RfTU9EXCIsXG4gIFwiQVJNT1JfUFJPRklDSUVOQ0lFU1wiLFxuICBcIldFQVBPTl9QUk9GSUNJRU5DSUVTXCIsXG4gIFwiVE9PTF9QUk9GSUNJRU5DSUVTXCIsXG4gIFwiVE9PTF9DSE9JQ0VfTElTVFwiLFxuICBcIlNBVklOR19USFJPV1NcIixcbiAgXCJTS0lMTFNcIixcbiAgXCJTS0lMTF9DSE9JQ0VfTElTVFwiLFxuICBcIlRSQUlUU1wiLFxuICBcIlNPVVJDRVwiLFxuICBcIlJVTEVTRVRcIlxuXTtcblxuZXhwb3J0IGNvbnN0IEJBQ0tHUk9VTkRfS0VZUzogRk1LZXlbXSA9IFtcbiAgXCJOQU1FXCIsXG4gIFwiU0tJTExTXCIsXG4gIFwiU0tJTExfQ0hPSUNFX0xJU1RcIiwgIFxuICBcIlRPT0xfUFJPRklDSUVOQ0lFU1wiLFxuICBcIlRPT0xfQ0hPSUNFX0xJU1RcIixcbiAgXCJUUkFJVFNcIixcbiAgXCJTT1VSQ0VcIixcbiAgXCJSVUxFU0VUXCJcbl07XG5cbmV4cG9ydCBjb25zdCBGRUFUU19LRVlTOiBGTUtleVtdID0gW1xuICBcIlNPVVJDRVwiLFxuICBcIlJVTEVTRVRcIlxuXTtcblxuLy8gXHUyNTAwXHUyNTAwXHUyNTAwIEZpZWxkIHN1YnNldHMgZm9yIGVhY2ggcGFyc2VyIFx1MjUwMFx1MjUwMFx1MjUwMFxuZXhwb3J0IGNvbnN0IFNQRUxMX01FVEFfREVGUzogRmllbGREZWZbXSA9IFNQRUxMX0tFWVMubWFwKGtleSA9PiB7XG4gIGNvbnN0IGRlZiA9IEFMTF9GSUVMRF9ERUZTLmZpbmQoZCA9PiBkLmNhbGxTaWduID09PSBrZXkpO1xuICBpZiAoIWRlZikgdGhyb3cgbmV3IEVycm9yKGBNaXNzaW5nIEZpZWxkRGVmIGZvciBTUEVMTF9LRVkgJHtrZXl9YCk7XG4gIHJldHVybiBkZWY7XG59KTtcbmV4cG9ydCBjb25zdCBTUEVDSUVTX01FVEFfREVGUzogRmllbGREZWZbXSA9IFNQRUNJRVNfS0VZUy5tYXAoa2V5ID0+IHtcbiAgY29uc3QgZGVmID0gQUxMX0ZJRUxEX0RFRlMuZmluZChkID0+IGQuY2FsbFNpZ24gPT09IGtleSk7XG4gIGlmICghZGVmKSB0aHJvdyBuZXcgRXJyb3IoYE1pc3NpbmcgRmllbGREZWYgZm9yIFNQRUNJRVNfS0VZICR7a2V5fWApO1xuICByZXR1cm4gZGVmO1xufSk7XG5leHBvcnQgY29uc3QgSVRFTV9NRVRBX0RFRlM6IEZpZWxkRGVmW10gPSBJVEVNX0tFWVMubWFwKGtleSA9PiB7XG4gIGNvbnN0IGRlZiA9IEFMTF9GSUVMRF9ERUZTLmZpbmQoZCA9PiBkLmNhbGxTaWduID09PSBrZXkpO1xuICBpZiAoIWRlZikgdGhyb3cgbmV3IEVycm9yKGBNaXNzaW5nIEZpZWxkRGVmIGZvciBJVEVNX0tFWSAke2tleX1gKTtcbiAgcmV0dXJuIGRlZjtcbn0pO1xuZXhwb3J0IGNvbnN0IEJFU1RJQVJZX01FVEFfREVGUzogRmllbGREZWZbXSA9IEJFU1RJQVJZX0tFWVMubWFwKGtleSA9PiB7XG4gIGNvbnN0IGRlZiA9IEFMTF9GSUVMRF9ERUZTLmZpbmQoZCA9PiBkLmNhbGxTaWduID09PSBrZXkpO1xuICBpZiAoIWRlZikgdGhyb3cgbmV3IEVycm9yKGBNaXNzaW5nIEZpZWxkRGVmIGZvciBCRVNUSUFSWV9LRVkgJHtrZXl9YCk7XG4gIHJldHVybiBkZWY7XG59KTtcbmV4cG9ydCBjb25zdCBDTEFTU19NRVRBX0RFRlM6IEZpZWxkRGVmW10gPSBDTEFTU19LRVlTLm1hcChrZXkgPT4ge1xuICBjb25zdCBkZWYgPSBBTExfRklFTERfREVGUy5maW5kKGQgPT4gZC5jYWxsU2lnbiA9PT0ga2V5KTtcbiAgaWYgKCFkZWYpIHRocm93IG5ldyBFcnJvcihgTWlzc2luZyBGaWVsZERlZiBmb3IgQ0xBU1NfS0VZICR7a2V5fWApO1xuICByZXR1cm4gZGVmO1xufSk7XG5leHBvcnQgY29uc3QgQkFDS0dST1VORF9NRVRBX0RFRlM6IEZpZWxkRGVmW10gPSBCQUNLR1JPVU5EX0tFWVMubWFwKGtleSA9PiB7XG4gIGNvbnN0IGRlZiA9IEFMTF9GSUVMRF9ERUZTLmZpbmQoZCA9PiBkLmNhbGxTaWduID09PSBrZXkpO1xuICBpZiAoIWRlZikgdGhyb3cgbmV3IEVycm9yKGBNaXNzaW5nIEZpZWxkRGVmIGZvciBCQUNLR1JPVU5EX0tFWSAke2tleX1gKTtcbiAgcmV0dXJuIGRlZjtcbn0pO1xuZXhwb3J0IGNvbnN0IEZFQVRTX01FVEFfREVGUzogRmllbGREZWZbXSA9IEZFQVRTX0tFWVMubWFwKGtleSA9PiB7XG4gIGNvbnN0IGRlZiA9IEFMTF9GSUVMRF9ERUZTLmZpbmQoZCA9PiBkLmNhbGxTaWduID09PSBrZXkpO1xuICBpZiAoIWRlZikgdGhyb3cgbmV3IEVycm9yKGBNaXNzaW5nIEZpZWxkRGVmIGZvciBCQUNLR1JPVU5EX0tFWSAke2tleX1gKTtcbiAgcmV0dXJuIGRlZjtcbn0pOyIsICIvLyBkbmQgNWUgMjAyNCBlZGl0aW9uIHNwZWxsc1xuXG5pbXBvcnQgdHlwZSB7IFBhcnNlZE1hcmtkb3duRmlsZSB9IGZyb20gXCJzcmMvdHlwZXNcIjtcbmltcG9ydCB7IHJlcGxhY2U1ZVRhZ3MgfSBmcm9tIFwiLi9oZWxwZXJzL3RhZ1JlcGxhY2VyXCI7XG5pbXBvcnQgeyBnZXRGdWxsU291cmNlTmFtZSB9IGZyb20gXCIuL2hlbHBlcnMvc291cmNlTWFwXCI7XG5pbXBvcnQgeyByZW5kZXJNYXJrZG93blRhYmxlIH0gZnJvbSBcIi4vaGVscGVycy9tYXJrZG93blRhYmxlXCI7XG5pbXBvcnQgeyBmb3JtYXRFbnRyeSB9IGZyb20gXCIuL2hlbHBlcnMvZm9ybWF0RW50cnlcIjtcbmltcG9ydCB7IGJ1aWxkRk0sIHNlcmlhbGl6ZUZyb250bWF0dGVyLCBTUEVMTF9NRVRBX0RFRlMsIEZNX0ZJRUxEUyB9IGZyb20gXCIuL2hlbHBlcnMvZnJvbnRtYXR0ZXJcIjtcblxuXG5leHBvcnQgY29uc3QgU0NIT09MX01BUDogUmVjb3JkPHN0cmluZywgc3RyaW5nPiA9IHtcbiAgQTogXCJBYmp1cmF0aW9uXCIsXG4gIEM6IFwiQ29uanVyYXRpb25cIixcbiAgRDogXCJEaXZpbmF0aW9uXCIsXG4gIEU6IFwiRW5jaGFudG1lbnRcIixcbiAgVjogXCJFdm9jYXRpb25cIixcbiAgSTogXCJJbGx1c2lvblwiLFxuICBOOiBcIk5lY3JvbWFuY3lcIixcbiAgVDogXCJUcmFuc211dGF0aW9uXCIsXG59O1xuXG5mdW5jdGlvbiBvcmRpbmFsKG46IG51bWJlcik6IHN0cmluZyB7XG4gIGNvbnN0IHN1ZmZpeCA9IChuID09PSAxKSA/IFwic3RcIiA6IChuID09PSAyKSA/IFwibmRcIiA6IChuID09PSAzKSA/IFwicmRcIiA6IFwidGhcIjtcbiAgcmV0dXJuIGAke259JHtzdWZmaXh9YDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGZvcm1hdFJhbmdlKHJhbmdlOiBhbnkpOiBzdHJpbmcge1xuICBpZiAoIXJhbmdlKSByZXR1cm4gXCJcIjtcblxuICBpZiAodHlwZW9mIHJhbmdlID09PSBcInN0cmluZ1wiKSByZXR1cm4gcmFuZ2U7XG5cbiAgaWYgKHJhbmdlLnR5cGUgPT09IFwic3BlY2lhbFwiKSByZXR1cm4gXCJTcGVjaWFsXCI7XG4gIGlmIChyYW5nZS50eXBlID09PSBcInBvaW50XCIgJiYgcmFuZ2UuZGlzdGFuY2UpIHtcbiAgICBjb25zdCBkaXN0ID0gcmFuZ2UuZGlzdGFuY2U7XG4gICAgaWYgKGRpc3QudHlwZSA9PT0gXCJ0b3VjaFwiKSByZXR1cm4gXCJUb3VjaFwiO1xuICAgIGlmIChkaXN0LnR5cGUgPT09IFwic2VsZlwiKSByZXR1cm4gXCJTZWxmXCI7XG4gICAgaWYgKGRpc3QudHlwZSA9PT0gXCJzaWdodFwiKSByZXR1cm4gXCJTaWdodFwiO1xuICAgIGlmIChkaXN0LmFtb3VudCkgcmV0dXJuIGAke2Rpc3QuYW1vdW50fSAke2Rpc3QudHlwZX1gO1xuICB9XG5cbiAgcmV0dXJuIFwiVmFyaWVzXCI7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBmb3JtYXRUaW1lKHRpbWU6IGFueVtdKTogc3RyaW5nIHtcbiAgaWYgKCFBcnJheS5pc0FycmF5KHRpbWUpKSByZXR1cm4gXCJcIjtcblxuICByZXR1cm4gdGltZS5tYXAodCA9PiBgJHt0Lm51bWJlcn0gJHt0LnVuaXR9YCkuam9pbihcIiwgXCIpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZm9ybWF0RHVyYXRpb24oZHVyYXRpb246IGFueVtdKTogc3RyaW5nIHtcbiAgaWYgKCFBcnJheS5pc0FycmF5KGR1cmF0aW9uKSkgcmV0dXJuIFwiXCI7XG5cbiAgcmV0dXJuIGR1cmF0aW9uLm1hcChkID0+IHtcbiAgICBpZiAoZC50eXBlID09PSBcImluc3RhbnRcIikgcmV0dXJuIFwiSW5zdGFudGFuZW91c1wiO1xuICAgIGlmIChkLnR5cGUgPT09IFwidGltZWRcIiAmJiBkLmR1cmF0aW9uKSB7XG4gICAgICByZXR1cm4gYCR7ZC5kdXJhdGlvbi5hbW91bnR9ICR7ZC5kdXJhdGlvbi50eXBlfSR7ZC5jb25jZW50cmF0aW9uID8gXCIgKGNvbmNlbnRyYXRpb24pXCIgOiBcIlwifWA7XG4gICAgfVxuICAgIGlmIChkLnR5cGUgPT09IFwicGVybWFuZW50XCIpIHJldHVybiBcIlBlcm1hbmVudFwiO1xuICAgIHJldHVybiBcIlNwZWNpYWxcIjtcbiAgfSkuam9pbihcIiwgXCIpO1xufVxuLy8gaW4gcGFyc2Vycy81ZS1qc29uL3BhcnNlU3BlbGxzRmlsZS50cyAob3Igd2hlcmV2ZXIgZm9ybWF0Q29tcG9uZW50cyBsaXZlcylcblxuZnVuY3Rpb24gZm9ybWF0Q29tcG9uZW50cyhjb21wb25lbnRzOiBhbnkpOiBzdHJpbmcge1xuICBpZiAoIWNvbXBvbmVudHMpIHJldHVybiBcIlwiO1xuXG4gIGNvbnN0IHBhcnRzOiBzdHJpbmdbXSA9IFtdO1xuXG4gIGlmIChjb21wb25lbnRzLnYpIHBhcnRzLnB1c2goXCJWXCIpO1xuICBpZiAoY29tcG9uZW50cy5zKSBwYXJ0cy5wdXNoKFwiU1wiKTtcblxuICBpZiAoY29tcG9uZW50cy5tKSB7XG4gICAgLy8gcHVsbCBvdXQgdGhlIGFjdHVhbCBtYXRlcmlhbCB0ZXh0KHMpXG4gICAgbGV0IG1hdERldGFpbHM6IHN0cmluZ1tdID0gW107XG5cbiAgICBpZiAoQXJyYXkuaXNBcnJheShjb21wb25lbnRzLm0pKSB7XG4gICAgICBtYXREZXRhaWxzID0gY29tcG9uZW50cy5tXG4gICAgICAgIC5tYXAoKGl0ZW06YW55KSA9PlxuICAgICAgICAgIHR5cGVvZiBpdGVtID09PSBcInN0cmluZ1wiXG4gICAgICAgICAgICA/IGl0ZW1cbiAgICAgICAgICAgIDogaXRlbSAmJiB0eXBlb2YgaXRlbS50ZXh0ID09PSBcInN0cmluZ1wiXG4gICAgICAgICAgICA/IGl0ZW0udGV4dFxuICAgICAgICAgICAgOiBudWxsXG4gICAgICAgIClcbiAgICAgICAgLmZpbHRlcigodDphbnkpOiB0IGlzIHN0cmluZyA9PiAhIXQpO1xuICAgIH0gZWxzZSBpZiAodHlwZW9mIGNvbXBvbmVudHMubSA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgbWF0RGV0YWlscyA9IFtjb21wb25lbnRzLm1dO1xuICAgIH0gZWxzZSBpZiAoY29tcG9uZW50cy5tLnRleHQpIHtcbiAgICAgIG1hdERldGFpbHMgPSBbY29tcG9uZW50cy5tLnRleHRdO1xuICAgIH1cblxuICAgIC8vIGJ1aWxkIHRoZSBcdTIwMUNNXHUyMDFEIGVudHJ5LCBhcHBlbmRpbmcgZGV0YWlscyBpZiBhbnlcbiAgICBjb25zdCBtYXRQYXJ0ID1cbiAgICAgIG1hdERldGFpbHMubGVuZ3RoID4gMFxuICAgICAgICA/IGBNICgke21hdERldGFpbHMuam9pbihcIiwgXCIpfSlgXG4gICAgICAgIDogXCJNXCI7XG5cbiAgICBwYXJ0cy5wdXNoKG1hdFBhcnQpO1xuICB9XG5cbiAgcmV0dXJuIHBhcnRzLmpvaW4oXCIsIFwiKTtcbn1cblxuXG5leHBvcnQgZnVuY3Rpb24gcGFyc2VTcGVsbHNGaWxlKGpzb246IGFueSwgZWRpdGlvbklkOiBzdHJpbmcpOiBQYXJzZWRNYXJrZG93bkZpbGVbXSB7XG4gIGlmICghanNvbi5zcGVsbCkgcmV0dXJuIFtdO1xuXG4gIC8vIG1ha2UgZWRpdGlvbklkIGF2YWlsYWJsZSBmb3Igb3VyIFNPVVJDRSBjb252ZXJ0ZXJcbiAgKGpzb24gYXMgYW55KS5fZWRpdGlvbklkID0gZWRpdGlvbklkO1xuXG4gIHJldHVybiBqc29uLnNwZWxsLm1hcCgoc3BlbGw6IGFueSkgPT4ge1xuICAgIC8vIFx1MjAxNCBnYXRoZXIgZGF0YSBmb3IgaGVhZGVyL2JvZHkvZm9vdGVyIGFzIGJlZm9yZSBcdTIwMTRcbiAgICBjb25zdCBzb3VyY2VzID0gc3BlbGwuc291cmNlXG4gICAgICA/IEFycmF5LmlzQXJyYXkoc3BlbGwuc291cmNlKSA/IHNwZWxsLnNvdXJjZSA6IFtzcGVsbC5zb3VyY2VdXG4gICAgICA6IFtcInVua25vd25cIl07XG4gICAgY29uc3QgbmFtZSA9IHNwZWxsLm5hbWU7XG4gICAgY29uc3Qgc2Nob29sID0gU0NIT09MX01BUFtzcGVsbC5zY2hvb2xdID8/IHNwZWxsLnNjaG9vbDtcbiAgICBjb25zdCBsZXZlbCA9IHNwZWxsLmxldmVsO1xuICAgIGNvbnN0IHJhbmdlID0gZm9ybWF0UmFuZ2Uoc3BlbGwucmFuZ2UpO1xuICAgIGNvbnN0IGNhc3RpbmdUaW1lID0gZm9ybWF0VGltZShzcGVsbC50aW1lKTtcbiAgICBjb25zdCBkdXJhdGlvbiA9IGZvcm1hdER1cmF0aW9uKHNwZWxsLmR1cmF0aW9uKTtcbiAgICBjb25zdCBmb3JtYXR0ZWRTb3VyY2VzID0gc291cmNlcy5tYXAoKHM6IHN0cmluZykgPT4gZ2V0RnVsbFNvdXJjZU5hbWUocywgZWRpdGlvbklkKSk7XG5cbiAgICBjb25zdCBhdHRhY2tUeXBlID0gc3BlbGwuYXR0YWNrVHlwZSB8fCBcIlwiO1xuICAgIGNvbnN0IGRhbWFnZVR5cGUgPSBzcGVsbC5kYW1hZ2VJbmZsaWN0Py5bMF0gfHwgXCJUZWxlcG9ydGF0aW9uXCI7XG4gICAgY29uc3Qgcml0dWFsID0gc3BlbGwucml0dWFsID09PSB0cnVlO1xuICAgIGNvbnN0IGNvbmNlbnRyYXRpb24gPSBzcGVsbC5kdXJhdGlvbj8uc29tZSgoZDogYW55KSA9PiBkLmNvbmNlbnRyYXRpb24pID8/IGZhbHNlO1xuXG4gICAgY29uc3QgRk0gICA9IGJ1aWxkRk0oc3BlbGwsIFNQRUxMX01FVEFfREVGUyk7XG4gICAgY29uc3QgeWFtbCA9IHNlcmlhbGl6ZUZyb250bWF0dGVyKEZNLCBTUEVMTF9NRVRBX0RFRlMpO1xuICAgIGNvbnN0IHNhdmluZ1Rocm93cyA9IChGTVtGTV9GSUVMRFMuU0FWSU5HX1RIUk9XU10gYXMgc3RyaW5nW10pIHx8IFtdO1xuICAgIGNvbnN0IHNhdmVBdHRyID0gRk1bRk1fRklFTERTLlNBVkVdIGFzIHN0cmluZyB8IHVuZGVmaW5lZDtcblxuICAgIC8vIFx1MjAxNCB0aXRsZS9zdWJ0aXRsZSBhbmQgYm9keSBsYXlvdXQgXHUyMDE0XG4gICAgY29uc3Qgc2FmZU5hbWUgPSBuYW1lLnJlcGxhY2UoL1xcLy9nLCBcIi1cIik7XG4gICAgY29uc3QgdGl0bGUgPSBgIyAke25hbWV9YDtcbiAgICBjb25zdCBsZXZlbExhYmVsID1cbiAgICAgIGxldmVsID09PSAwXG4gICAgICAgID8gYCR7c2Nob29sfSBDYW50cmlwYFxuICAgICAgICA6IGAke29yZGluYWwobGV2ZWwpfS1sZXZlbCAke3NjaG9vbH0gU3BlbGxgO1xuICAgIGNvbnN0IHN1YnRpdGxlID0gYCMjIyAqJHtsZXZlbExhYmVsfSoke2NvbmNlbnRyYXRpb24gPyBcIiAqKENvbmNlbnRyYXRpb24pKlwiIDogXCJcIn1gO1xuXG4gICAgY29uc3QgaGVhZGVyTGluZXMgPSBbXG4gICAgICB0aXRsZSxcbiAgICAgIHN1YnRpdGxlLFxuICAgICAgYCoqQ2FzdGluZyBUaW1lOioqICR7Y2FzdGluZ1RpbWV9YCxcbiAgICAgIGAqKlJhbmdlOioqICR7cmFuZ2V9YCxcbiAgICAgIGAqKkNvbXBvbmVudHM6KiogJHtmb3JtYXRDb21wb25lbnRzKHNwZWxsLmNvbXBvbmVudHMpfWAsXG4gICAgICAuLi4oc2F2aW5nVGhyb3dzLmxlbmd0aCA/IFtgKipTYXZpbmcgVGhyb3c6KiogJHtzYXZpbmdUaHJvd3Muam9pbihcIiwgXCIpfWBdIDogW10pLFxuICAgICAgYCoqRHVyYXRpb246KiogJHtkdXJhdGlvbn1gLFxuICAgIF07XG5cbiAgICBjb25zdCBib2R5TGluZXMgPSBbXG4gICAgICAuLi4oKHNwZWxsLmVudHJpZXMgPz8gW10pLm1hcCgoZTogYW55KSA9PiBmb3JtYXRFbnRyeShlKSkpLFxuICAgICAgLi4uKChzcGVsbC5lbnRyaWVzSGlnaGVyTGV2ZWwgPz8gW10pLm1hcCgoZTogYW55KSA9PiBmb3JtYXRFbnRyeShlKSkpLFxuICAgIF07XG5cbiAgICBjb25zdCBmb290ZXJMaW5lcyA9IFtcbiAgICAgIGAtLS1gLFxuICAgICAgYCoqU291cmNlOioqICR7Zm9ybWF0dGVkU291cmNlcy5qb2luKFwiLCBcIil9YCxcbiAgICBdO1xuXG4gICAgLy8gXHUyMDE0IGFzc2VtYmxlIHRoZSBub3RlIHdpdGggWUFNTCBmcm9udG1hdHRlciBcdTIwMTRcbiAgICByZXR1cm4ge1xuICAgICAgcGF0aDogYCR7c2FmZU5hbWV9Lm1kYCxcbiAgICAgIGNvbnRlbnQ6IFtcbiAgICAgICAgYC0tLVxcbiR7eWFtbH1cXG4tLS1gLFxuICAgICAgICBoZWFkZXJMaW5lcy5qb2luKFwiXFxuXCIpLFxuICAgICAgICBgYCxcbiAgICAgICAgYm9keUxpbmVzLmpvaW4oXCJcXG5cXG5cIiksXG4gICAgICAgIGBgLFxuICAgICAgICBmb290ZXJMaW5lcy5qb2luKFwiXFxuXCIpLFxuICAgICAgXS5qb2luKFwiXFxuXCIpLFxuICAgIH07XG4gIH0pO1xufVxuXG4iLCAiLy8gZG5kIDVlIDIwMjQgc3BlY2llc1xuXG5pbXBvcnQgdHlwZSB7IFBhcnNlZE1hcmtkb3duRmlsZSB9IGZyb20gXCIuLi8uLi90eXBlc1wiO1xuaW1wb3J0IHsgcmVwbGFjZTVlVGFncyB9IGZyb20gXCIuL2hlbHBlcnMvdGFnUmVwbGFjZXJcIjtcbmltcG9ydCB7XG4gIGJ1aWxkRk0sXG4gIHNlcmlhbGl6ZUZyb250bWF0dGVyLFxuICBGTV9GSUVMRFMsXG4gIFNQRUNJRVNfTUVUQV9ERUZTLFxuICBTSVpFX01BUCxcbn0gZnJvbSBcIi4vaGVscGVycy9mcm9udG1hdHRlclwiO1xuaW1wb3J0IHsgcmVuZGVyTWFya2Rvd25UYWJsZSB9IGZyb20gXCIuL2hlbHBlcnMvbWFya2Rvd25UYWJsZVwiO1xuaW1wb3J0IHsgZm9ybWF0RW50cnkgfSBmcm9tIFwiLi9oZWxwZXJzL2Zvcm1hdEVudHJ5XCI7XG5cbmZ1bmN0aW9uIHNsdWcobmFtZTogc3RyaW5nKTogc3RyaW5nIHtcbiAgcmV0dXJuIG5hbWVcbiAgICAucmVwbGFjZSgvOy9nLCBcIjpcIikgICAgICAgLy8gc2VtaWNvbG9uIFx1MjE5MiBkYXNoXG4gICAgLnJlcGxhY2UoL1tcXC86XCJdL2csIFwiOlwiKSAgLy8gc2xhc2gsIGNvbG9uLCBxdW90ZSBcdTIxOTIgZGFzaFxuICAgIC50cmltKCk7XG59XG5cbmNvbnN0IEJMT0NLRURfVFJBSVRTID0gW1wiQWdlXCIsIFwiU2l6ZVwiLCBcIkxhbmd1YWdlc1wiLCBcIkNyZWF0dXJlIFR5cGVcIiwgXCJTcGVlZFwiXTtcblxuZnVuY3Rpb24gbGlua0Rpc3BsYXkoc3RyOiBzdHJpbmcpOiBzdHJpbmcge1xuICBpZiAodHlwZW9mIHN0ciAhPT0gXCJzdHJpbmdcIikgcmV0dXJuIFN0cmluZyhzdHIgPz8gXCJcIik7XG4gIGNvbnN0IG0gPSBzdHIubWF0Y2goL15cXFtcXFsoLis/KVxcXVxcXSQvKTtcbiAgaWYgKCFtKSByZXR1cm4gc3RyO1xuICBjb25zdCBpbm5lciA9IG1bMV07XG4gIGNvbnN0IHBpcGUgPSBpbm5lci5zcGxpdChcInxcIik7XG4gIGlmIChwaXBlLmxlbmd0aCA+IDEpIHJldHVybiBwaXBlWzFdLnRyaW0oKTsgICAgICAgICAvLyAuLi58RGlzcGxheVxuICBjb25zdCBoYXNoID0gaW5uZXIuc3BsaXQoXCIjXCIpO1xuICBpZiAoaGFzaC5sZW5ndGggPiAxKSByZXR1cm4gaGFzaFsxXS50cmltKCk7ICAgICAgICAgLy8gRmlsZSNIZWFkZXJcbiAgcmV0dXJuIGlubmVyLnRyaW0oKTtcbn1cblxuLy8gTm9ybWFsaXplIGhlYWRpbmcgbmFtZXMgZm9yIGNvbXBhcmlzb24gYW5kIGxvb2t1cFxuZnVuY3Rpb24gbm9ybU5hbWUobjogc3RyaW5nKTogc3RyaW5nIHtcbiAgcmV0dXJuIFN0cmluZyhuID8/IFwiXCIpXG4gICAgLnJlcGxhY2UoL15GZWF0dXJlOlxccyovaSwgXCJcIilcbiAgICAucmVwbGFjZSgvXFxzKy9nLCBcIiBcIilcbiAgICAudHJpbSgpXG4gICAgLnRvTG93ZXJDYXNlKCk7XG59XG5cbi8vIEZpbmQgYSBuYW1lZCBlbnRyeSBlaXRoZXIgYXQgdG9wIGxldmVsIG9yIG9uZSBsZXZlbCBuZXN0ZWQgdW5kZXIgZW50cmllc1tdXG5mdW5jdGlvbiBmaW5kRW50cnlCeU5hbWUoZW50cmllczogYW55W10gfCB1bmRlZmluZWQsIGRpc3BsYXk6IHN0cmluZyk6IGFueSB8IG51bGwge1xuICBpZiAoIUFycmF5LmlzQXJyYXkoZW50cmllcykpIHJldHVybiBudWxsO1xuICBjb25zdCB0YXJnZXQgPSBub3JtTmFtZShkaXNwbGF5KTtcblxuICAvLyBkaXJlY3QgaGl0XG4gIGNvbnN0IGRpcmVjdCA9IGVudHJpZXMuZmluZChlID0+IHR5cGVvZiBlPy5uYW1lID09PSBcInN0cmluZ1wiICYmIG5vcm1OYW1lKGUubmFtZSkgPT09IHRhcmdldCk7XG4gIGlmIChkaXJlY3QpIHJldHVybiBkaXJlY3Q7XG5cbiAgLy8gb25lIGxldmVsIG5lc3RlZFxuICBmb3IgKGNvbnN0IGUgb2YgZW50cmllcykge1xuICAgIGlmIChBcnJheS5pc0FycmF5KGU/LmVudHJpZXMpKSB7XG4gICAgICBjb25zdCBzdWIgPSBlLmVudHJpZXMuZmluZCgoczogYW55KSA9PiB0eXBlb2Ygcz8ubmFtZSA9PT0gXCJzdHJpbmdcIiAmJiBub3JtTmFtZShzLm5hbWUpID09PSB0YXJnZXQpO1xuICAgICAgaWYgKHN1YikgcmV0dXJuIHN1YjtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gbnVsbDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlU3BlY2llc0ZpbGUoXG4gIGpzb246IHsgcmFjZTogYW55W107IHN1YnJhY2U/OiBhbnlbXTsgX2VkaXRpb25JZD86IHN0cmluZyB9LFxuICBlZGl0aW9uSWQ6IHN0cmluZ1xuKTogUGFyc2VkTWFya2Rvd25GaWxlW10ge1xuICBpZiAoIUFycmF5LmlzQXJyYXkoanNvbi5yYWNlKSkgcmV0dXJuIFtdO1xuICBqc29uLl9lZGl0aW9uSWQgPSBlZGl0aW9uSWQ7XG5cbiAgLy8gMSkgRmlsdGVyIG91dCByZXByaW50c1xuY29uc3QgcmF3VmFyaWFudHMgPSBqc29uLnJhY2UuZmlsdGVyKChyOiBhbnkpID0+XG4gICEvXFwoKD86S2FsYWRlc2h8WmVuZGlrYXJ8QW1vbmtoZXR8SW5uaXN0cmFkfEl4YWxhbilcXCkkLy50ZXN0KHIubmFtZSlcbik7XG5cbiAgLy8gMikgR3JvdXAgYnkgcmFjZSBuYW1lXG4gIGNvbnN0IGJ5TmFtZSA9IG5ldyBNYXA8c3RyaW5nLCBhbnlbXT4oKTtcbiAgZm9yIChjb25zdCByIG9mIHJhd1ZhcmlhbnRzKSB7XG4gICAgY29uc3QgbGlzdCA9IGJ5TmFtZS5nZXQoci5uYW1lKSA/PyBbXTtcbiAgICBsaXN0LnB1c2gocik7XG4gICAgYnlOYW1lLnNldChyLm5hbWUsIGxpc3QpO1xuICB9XG5cbiAgLy8gMykgQWxsIHN1YnJhY2VzIGFycmF5XG4gIGNvbnN0IHN1YnJhY2VzTGlzdCA9IEFycmF5LmlzQXJyYXkoanNvbi5zdWJyYWNlKSA/IGpzb24uc3VicmFjZSA6IFtdO1xuXG4gIGNvbnN0IG91dDogUGFyc2VkTWFya2Rvd25GaWxlW10gPSBbXTtcblxuICAvLyA0KSBNYWluIGxvb3Agb3ZlciBlYWNoIHNwZWNpZXNcbiAgZm9yIChjb25zdCBbcmFjZU5hbWUsIHJhY2VWYXJpYW50c10gb2YgYnlOYW1lLmVudHJpZXMoKSkge1xuICAgIGNvbnN0IHNhZmVOYW1lID0gc2x1ZyhyYWNlTmFtZSk7XG5cbiAgICAvLyBwaWNrIHRoZSBcdTIwMUNmdWxsZXN0XHUyMDFEIHZhcmlhbnQgYXMgcHJpbWFyeVxuICAgIGNvbnN0IHByaW1hcnkgPSByYWNlVmFyaWFudHMucmVkdWNlKFxuICAgICAgKGJlc3QsIGN1cikgPT5cbiAgICAgICAgT2JqZWN0LmtleXMoY3VyKS5sZW5ndGggPiBPYmplY3Qua2V5cyhiZXN0KS5sZW5ndGggPyBjdXIgOiBiZXN0LFxuICAgICAgcmFjZVZhcmlhbnRzWzBdXG4gICAgKTtcblxuICAgIC8vIG9uZVx1MjAxMG9mZjogZ3JhZnQgSHVtYW4gYWJpbGl0eSBpZiBtaXNzaW5nXG4gICAgaWYgKCFwcmltYXJ5LmFiaWxpdHkpIHtcbiAgICAgIGNvbnN0IGh1bWFuRW50cnkgPSBzdWJyYWNlc0xpc3QuZmluZCgoc3I6IGFueSkgPT5cbiAgICAgICAgc3IucmFjZU5hbWUgPT09IHJhY2VOYW1lICYmXG4gICAgICAgIHNyLnJhY2VTb3VyY2UgPT09IHByaW1hcnkuc291cmNlICYmXG4gICAgICAgICEoXCJuYW1lXCIgaW4gc3IpICYmXG4gICAgICAgIEFycmF5LmlzQXJyYXkoc3IuYWJpbGl0eSlcbiAgICAgICk7XG4gICAgICBpZiAoaHVtYW5FbnRyeSkgcHJpbWFyeS5hYmlsaXR5ID0gaHVtYW5FbnRyeS5hYmlsaXR5O1xuICAgIH1cblxuICAgIC8vIGJ1aWxkIGZyb250bWF0dGVyXG4gICAgY29uc3QgZm0gPSBidWlsZEZNKHByaW1hcnksIFNQRUNJRVNfTUVUQV9ERUZTKTtcbiAgICBjb25zdCBzZW5zZXM6IHN0cmluZ1tdID0gW107XG4gICAgaWYgKHByaW1hcnkuZGFya3Zpc2lvbikgIHNlbnNlcy5wdXNoKGBEYXJrdmlzaW9uICR7cHJpbWFyeS5kYXJrdmlzaW9ufSBmdC5gKTtcbiAgICBpZiAocHJpbWFyeS5ibGluZHNpZ2h0KSAgc2Vuc2VzLnB1c2goYEJsaW5kc2lnaHQgJHtwcmltYXJ5LmJsaW5kc2lnaHR9IGZ0LmApO1xuICAgIGlmIChwcmltYXJ5LnRyZW1vcnNlbnNlKSBzZW5zZXMucHVzaChgVHJlbW9yc2Vuc2UgJHtwcmltYXJ5LnRyZW1vcnNlbnNlfSBmdC5gKTtcbiAgICBpZiAocHJpbWFyeS50cnVlc2lnaHQpICAgc2Vuc2VzLnB1c2goYFRydWVzaWdodCAke3ByaW1hcnkudHJ1ZXNpZ2h0fSBmdC5gKTtcbiAgICBpZiAoc2Vuc2VzLmxlbmd0aCkgZm0uc2Vuc2VzID0gc2Vuc2VzO1xuICAgIGlmIChBcnJheS5pc0FycmF5KGZtLnRyYWl0cykpIHtcbiAgICAgIGZtLnRyYWl0cyA9IGZtLnRyYWl0cy5maWx0ZXIodCA9PiAhQkxPQ0tFRF9UUkFJVFMuaW5jbHVkZXModCkpO1xuICAgIH1cbiAgICBjb25zdCB5YW1sID0gc2VyaWFsaXplRnJvbnRtYXR0ZXIoZm0sIFNQRUNJRVNfTUVUQV9ERUZTKTtcblxuICAgIC8vIGJ1aWxkIHNwZWNpZXMgYm9keVxuICAgIGNvbnN0IGxpbmVzOiBzdHJpbmdbXSA9IFtdO1xuICAgIGxpbmVzLnB1c2goYCMgJHtyYWNlTmFtZX1gLCBgIyMgU3RhdHNgKTtcblxuICAgIC8vIFNpemVcbiAgICBjb25zdCBzaXplID0gQXJyYXkuaXNBcnJheShwcmltYXJ5LnNpemUpXG4gICAgICA/IHByaW1hcnkuc2l6ZS5tYXAoKHM6IHN0cmluZykgPT4gU0laRV9NQVBbc10gfHwgcykuam9pbihcIi9cIilcbiAgICAgIDogU0laRV9NQVBbcHJpbWFyeS5zaXplXSA/PyBwcmltYXJ5LnNpemU7XG4gICAgbGluZXMucHVzaChgKipTaXplOioqICR7c2l6ZX1gKTtcblxuICAgIC8vIFNwZWVkXG4gICAgY29uc3Qgc3BlZWQgPSB0eXBlb2YgcHJpbWFyeS5zcGVlZCA9PT0gXCJudW1iZXJcIlxuICAgICAgPyBwcmltYXJ5LnNwZWVkXG4gICAgICA6IHByaW1hcnkuc3BlZWQ/LndhbGsgPz8gcHJpbWFyeS5zcGVlZD8uYmFzZSA/PyAwO1xuICAgIGxpbmVzLnB1c2goYCoqU3BlZWQ6KiogJHtzcGVlZH0gZnQuIHdhbGtpbmdgKTtcblxuICAgIC8vIEFiaWxpdGllc1xuICAgIGNvbnN0IGtpZHMgPSBzdWJyYWNlc0xpc3QuZmlsdGVyKHNyID0+XG4gICAgICBzci5uYW1lICYmIHNyLnJhY2VOYW1lID09PSByYWNlTmFtZSAmJiBzci5yYWNlU291cmNlID09PSBwcmltYXJ5LnNvdXJjZVxuICAgICk7XG4gICAgY29uc3QgcmF3QWJpbGl0eSA9IEFycmF5LmlzQXJyYXkocHJpbWFyeS5hYmlsaXR5KVxuICAgICAgPyBwcmltYXJ5LmFiaWxpdHlcbiAgICAgIDogQXJyYXkuaXNBcnJheShraWRzWzBdPy5hYmlsaXR5KSA/IGtpZHNbMF0uYWJpbGl0eSA6IFtdO1xuICAgIGlmIChBcnJheS5pc0FycmF5KHJhd0FiaWxpdHkpICYmIHJhd0FiaWxpdHkubGVuZ3RoKSB7XG4gICAgICBjb25zdCBib251c2VzID0geyBzdHI6MCxkZXg6MCxjb246MCxpbnQ6MCx3aXM6MCxjaGE6MCB9O1xuICAgICAgbGV0IGNob29zZU9wdDogYW55ID0gbnVsbDtcbiAgICAgIGZvciAoY29uc3Qgb2JqIG9mIHJhd0FiaWxpdHkpIHtcbiAgICAgICAgaWYgKFwiY2hvb3NlXCIgaW4gb2JqKSBjaG9vc2VPcHQgPSBvYmouY2hvb3NlO1xuICAgICAgICBlbHNlIGZvciAoY29uc3QgW2ssdl0gb2YgT2JqZWN0LmVudHJpZXMob2JqKSkgKGJvbnVzZXMgYXMgYW55KVtrXSArPSB2IGFzIG51bWJlcjtcbiAgICAgIH1cbiAgICAgIGNvbnN0IHBhaXJzID0gT2JqZWN0LmVudHJpZXMoYm9udXNlcykgYXMgW3N0cmluZyxudW1iZXJdW107XG4gICAgICBjb25zdCBwYXJ0cyA9IHBhaXJzLmZpbHRlcigoWyx2XSk9PnYhPT0wKS5tYXAoKFtrLHZdKT0+YCR7ay50b1VwcGVyQ2FzZSgpfSAke3Y+PTA/XCIrXCI6XCJcIn0ke3Z9YCk7XG4gICAgICBpZiAoY2hvb3NlT3B0Py5jb3VudCAmJiBBcnJheS5pc0FycmF5KGNob29zZU9wdC5mcm9tKSkge1xuICAgICAgICBwYXJ0cy5wdXNoKGBDSE9PU0UgJHtjaG9vc2VPcHQuY291bnR9IGZyb20gJHtjaG9vc2VPcHQuZnJvbS5tYXAoKHM6c3RyaW5nKT0+cy50b1VwcGVyQ2FzZSgpKS5qb2luKFwiLCBcIil9YCk7XG4gICAgICB9XG4gICAgICBpZiAocGFydHMubGVuZ3RoKSBsaW5lcy5wdXNoKGAqKkFiaWxpdHkgU2NvcmVzOioqICR7cGFydHMuam9pbihcIiwgXCIpfWApO1xuICAgIH1cblxuICAgIC8vIExhbmd1YWdlc1xuICAgIGNvbnN0IGxhbmdzID0gZm0ubGFuZ3VhZ2VzIGFzIHN0cmluZ1tdfHVuZGVmaW5lZDtcbiAgICBpZiAobGFuZ3M/Lmxlbmd0aCkgbGluZXMucHVzaChgKipMYW5ndWFnZXM6KiogJHtsYW5ncy5qb2luKFwiLCBcIil9YCk7XG5cbiAgICAvLyBTa2lsbHNcbiAgICBpZiAoQXJyYXkuaXNBcnJheShwcmltYXJ5LnNraWxsUHJvZmljaWVuY2llcykpIHtcbiAgICAgIGNvbnN0IHNraWxsTGFiZWxzOiBzdHJpbmdbXSA9IFtdO1xuICAgICAgZm9yIChjb25zdCBlIG9mIHByaW1hcnkuc2tpbGxQcm9maWNpZW5jaWVzIGFzIGFueVtdKSB7XG4gICAgICAgIGlmIChlLmNob29zZT8uZnJvbSkge1xuICAgICAgICAgIHNraWxsTGFiZWxzLnB1c2goYENob29zZSBmcm9tOiAke2UuY2hvb3NlLmZyb20ubWFwKChzOnN0cmluZyk9PnMuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkrcy5zbGljZSgxKSkuam9pbihcIiwgXCIpfWApO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNvbnN0IHZhbCA9IGUucHJvZmljaWVuY3kgPz8gZS5uYW1lID8/IGU7XG4gICAgICAgICAgaWYgKHR5cGVvZiB2YWwgPT09IFwic3RyaW5nXCIpIHNraWxsTGFiZWxzLnB1c2godmFsLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpK3ZhbC5zbGljZSgxKSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmIChza2lsbExhYmVscy5sZW5ndGgpIGxpbmVzLnB1c2goYCoqU2tpbGwgUHJvZmljaWVuY2llczoqKiAke3NraWxsTGFiZWxzLmpvaW4oXCI7IFwiKX1gKTtcbiAgICB9XG5cbiAgICAvLyBUb29sIC8gV2VhcG9uIC8gQXJtb3JcbiAgICBjb25zdCB0cCA9IGZtW0ZNX0ZJRUxEUy5UT09MX1BST0ZJQ0lFTkNJRVNdIGFzIHN0cmluZ1tdfHVuZGVmaW5lZDtcbiAgICBjb25zdCB3cCA9IGZtW0ZNX0ZJRUxEUy5XRUFQT05fUFJPRklDSUVOQ0lFU10gYXMgc3RyaW5nW118dW5kZWZpbmVkO1xuICAgIGNvbnN0IGFwID0gZm1bRk1fRklFTERTLkFSTU9SX1BST0ZJQ0lFTkNJRVNdIGFzIHN0cmluZ1tdfHVuZGVmaW5lZDtcbiAgICBpZiAodHA/Lmxlbmd0aCkgbGluZXMucHVzaChgKipUb29sIFByb2ZpY2llbmNpZXM6KiogJHt0cC5qb2luKFwiLCBcIil9YCk7XG4gICAgaWYgKHdwPy5sZW5ndGgpIGxpbmVzLnB1c2goYCoqV2VhcG9uIFByb2ZpY2llbmNpZXM6KiogJHt3cC5qb2luKFwiLCBcIil9YCk7XG4gICAgaWYgKGFwPy5sZW5ndGgpIGxpbmVzLnB1c2goYCoqQXJtb3IgUHJvZmljaWVuY2llczoqKiAke2FwLmpvaW4oXCIsIFwiKX1gKTtcblxuICAgIC8vIFRyYWl0c1xuICAgIGxpbmVzLnB1c2goYCMjIFRyYWl0c2ApO1xuICAgIGNvbnN0IHNlZW4gPSBuZXcgU2V0PHN0cmluZz4oKTtcbiAgICBmb3IgKGNvbnN0IHRyYWl0IG9mIChmbS50cmFpdHMgYXMgc3RyaW5nW10gfHwgW10pKSB7XG4gICAgICBjb25zdCB0aXRsZSA9IGxpbmtEaXNwbGF5KHRyYWl0KTsgICAgICAgICAvLyBwbGFpbiBoZWFkZXIgdGV4dCwgbm8gbGlua1xuICAgICAgbGluZXMucHVzaChgIyMjIyMgJHt0aXRsZX1gKTtcblxuICAgICAgY29uc3QgZW50ID0gZmluZEVudHJ5QnlOYW1lKHByaW1hcnkuZW50cmllcywgdGl0bGUpO1xuICAgICAgaWYgKGVudD8uZW50cmllcykge1xuICAgICAgICBlbnQuZW50cmllcy5mb3JFYWNoKChzdWI6IGFueSwgaWR4OiBudW1iZXIpID0+IHtcbiAgICAgICAgICBsZXQgYmxrOiBzdHJpbmcgfCB1bmRlZmluZWQ7XG4gICAgICAgICAgaWYgKHN1Yi50eXBlID09PSBcInRhYmxlXCIpIHtcbiAgICAgICAgICAgIGJsayA9IHJlbmRlck1hcmtkb3duVGFibGUoc3ViKTtcbiAgICAgICAgICB9IGVsc2UgaWYgKHN1Yi50eXBlID09PSBcImxpc3RcIikge1xuICAgICAgICAgICAgYmxrID0gc3ViLml0ZW1zXG4gICAgICAgICAgICAgIC5tYXAoKGl0OiBhbnkpID0+ICh0eXBlb2YgaXQgPT09IFwic3RyaW5nXCIgPyBgLSAke3JlcGxhY2U1ZVRhZ3MoaXQpfWAgOiBgLSAke2l0Lm5hbWV9YCkpXG4gICAgICAgICAgICAgIC5qb2luKFwiXFxuXCIpO1xuICAgICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIHN1YiA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgYmxrID0gcmVwbGFjZTVlVGFncyhzdWIpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoYmxrICYmICFzZWVuLmhhcyhibGspKSB7XG4gICAgICAgICAgICBsaW5lcy5wdXNoKGJsayk7XG4gICAgICAgICAgICBzZWVuLmFkZChibGspO1xuICAgICAgICAgICAgaWYgKGVudC5lbnRyaWVzLmxlbmd0aCA+IDEgJiYgaWR4IDwgZW50LmVudHJpZXMubGVuZ3RoIC0gMSkgbGluZXMucHVzaChcIlwiKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIFx1MjUwMFx1MjUwMFx1MjUwMCBOb3cgYnJhbmNoIG9uIHN1YnJhY2VzIFx1MjUwMFx1MjUwMFx1MjUwMFxuICAgIGNvbnN0IHN1YnMgPSBraWRzOyAgLy8gYWxyZWFkeSBmaWx0ZXJlZFxuICAgIGlmIChzdWJzLmxlbmd0aCkge1xuICAgICAgLy8gMSkgbWFpbiBmaWxlIGluIGZvbGRlclxuICAgICAgb3V0LnB1c2goe1xuICAgICAgICBwYXRoOiBgU3BlY2llcy8ke3NhZmVOYW1lfS8ke3NhZmVOYW1lfS5tZGAsXG4gICAgICAgIGNvbnRlbnQ6IGAtLS1cXG4ke3lhbWx9XFxuLS0tXFxuXFxuJHtsaW5lcy5qb2luKFwiXFxuXCIpfWAsXG4gICAgICB9KTtcblxuICAgICAgLy8gMikgZWFjaCBzdWJzcGVjaWVzXG4gICAgICBjb25zdCBzdWJGb2xkZXIgPSBgU3BlY2llcy8ke3NhZmVOYW1lfS9SYWNlc2A7XG4gICAgICBmb3IgKGNvbnN0IHNyIG9mIHN1YnMpIHtcbiAgICAgICAgLy8gdHVybiBzZW1pY29sb25zIFx1MjE5MiBjb2xvbnNcbiAgICAgICAgY29uc3QgZGlzcGxheSA9IHNyLm5hbWUucmVwbGFjZSgvOy9nLCBcIjpcIik7XG4gICAgICAgIGNvbnN0IHN1YkxpbmVzOiBzdHJpbmdbXSA9IFtgIyAke2Rpc3BsYXl9YF07XG5cbiAgICAgICAgLy8gY29weSBTdGF0cyBibG9jayBpZiB5b3UgbGlrZTpcbiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoc3IuYWJpbGl0eSkpIHtcbiAgICAgICAgICBjb25zdCBib251c2VzID0geyBzdHI6MCxkZXg6MCxjb246MCxpbnQ6MCx3aXM6MCxjaGE6MCB9O1xuICAgICAgICAgIGxldCBjaG9vc2VPcHQ6YW55ID0gbnVsbDtcbiAgICAgICAgICBmb3IgKGNvbnN0IG9iaiBvZiBzci5hYmlsaXR5KSB7XG4gICAgICAgICAgICBpZiAoXCJjaG9vc2VcIiBpbiBvYmopIGNob29zZU9wdCA9IG9iai5jaG9vc2U7XG4gICAgICAgICAgICBlbHNlIGZvciAoY29uc3QgW2ssdl0gb2YgT2JqZWN0LmVudHJpZXMob2JqKSkgKGJvbnVzZXMgYXMgYW55KVtrXSs9diBhcyBudW1iZXI7XG4gICAgICAgICAgfVxuICAgICAgICAgIGNvbnN0IHBhaXJzID0gT2JqZWN0LmVudHJpZXMoYm9udXNlcykgYXMgW3N0cmluZyxudW1iZXJdW107XG4gICAgICAgICAgY29uc3QgcGFydHMgPSBwYWlycy5maWx0ZXIoKFssdl0pPT52IT09MCkubWFwKChbayx2XSk9PmAke2sudG9VcHBlckNhc2UoKX0gJHt2Pj0wP1wiK1wiOlwiXCJ9JHt2fWApO1xuICAgICAgICAgIGlmIChjaG9vc2VPcHQ/LmNvdW50KSBwYXJ0cy5wdXNoKGBDSE9PU0UgJHtjaG9vc2VPcHQuY291bnR9IGZyb20gJHsoY2hvb3NlT3B0LmZyb20gYXMgc3RyaW5nW10pLm1hcChzPT5zLnRvVXBwZXJDYXNlKCkpLmpvaW4oXCIsIFwiKX1gKTtcbiAgICAgICAgICBpZiAocGFydHMubGVuZ3RoKSBzdWJMaW5lcy5wdXNoKGAqKkFiaWxpdHkgU2NvcmVzOioqICR7cGFydHMuam9pbihcIiwgXCIpfWApO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gdGhlbiB0cmFpdHMvZW50cmllc1xuICAgICAgICBmb3IgKGNvbnN0IGVudHJ5IG9mIHNyLmVudHJpZXMgfHwgW10pIHtcbiAgICAgICAgICBzdWJMaW5lcy5wdXNoKGZvcm1hdEVudHJ5KGVudHJ5KSk7XG4gICAgICAgICAgc3ViTGluZXMucHVzaChcIlwiKTsgLy8gb3B0aW9uYWwgYmxhbmsgbGluZSBiZXR3ZWVuIGZlYXR1cmVzXG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBzdWJZYW1sID0gc2VyaWFsaXplRnJvbnRtYXR0ZXIoYnVpbGRGTShzciwgU1BFQ0lFU19NRVRBX0RFRlMpLCBTUEVDSUVTX01FVEFfREVGUyk7XG4gICAgICAgIG91dC5wdXNoKHtcbiAgICAgICAgICBwYXRoOiBgJHtzdWJGb2xkZXJ9LyR7c2x1Zyhzci5uYW1lKX0ubWRgLFxuICAgICAgICAgIGNvbnRlbnQ6IGAtLS1cXG4ke3N1YllhbWx9XFxuLS0tXFxuXFxuJHtzdWJMaW5lcy5qb2luKFwiXFxuXCIpfWAsXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICAvLyBubyBzdWJyYWNlcyBcdTIxRDIgYSBzaW5nbGUgZmxhdCBmaWxlXG4gICAgICBvdXQucHVzaCh7XG4gICAgICAgIHBhdGg6IGBTcGVjaWVzLyR7c2FmZU5hbWV9Lm1kYCxcbiAgICAgICAgY29udGVudDogYC0tLVxcbiR7eWFtbH1cXG4tLS1cXG5cXG4ke2xpbmVzLmpvaW4oXCJcXG5cIil9YCxcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIC8vIDUpIFNvcnQgJiByZXR1cm5cbiAgcmV0dXJuIG91dC5zb3J0KChhLCBiKSA9PiBhLnBhdGgubG9jYWxlQ29tcGFyZShiLnBhdGgpKTtcbn1cbiIsICIvLzVlIDIwMjUgY2xhc3Nlc1xuXG5pbXBvcnQgdHlwZSB7IFBhcnNlZE1hcmtkb3duRmlsZSB9IGZyb20gXCIuLi8uLi90eXBlc1wiO1xuaW1wb3J0IHsgXG4gIGJ1aWxkRk0sIFxuICBzZXJpYWxpemVGcm9udG1hdHRlciwgXG4gIENMQVNTX01FVEFfREVGUywgXG4gIHVuaWZpZWRUb29sUHJvZnMsIFxuICB1bmlmaWVkV2VhcG9uUHJvZnMsIFxuICBTa2lsbE9wdGlvbixcbiAgdW5pZmllZFNraWxscyxcbiAgU0tJTExfT1BUSU9OUywgXG4gIEZNX0ZJRUxEU1xufSBmcm9tIFwiLi9oZWxwZXJzL2Zyb250bWF0dGVyXCI7XG5pbXBvcnQgeyByZW5kZXJNYXJrZG93blRhYmxlIH0gZnJvbSBcIi4vaGVscGVycy9tYXJrZG93blRhYmxlXCI7XG5pbXBvcnQgeyByZXBsYWNlNWVUYWdzIH0gZnJvbSBcIi4vaGVscGVycy90YWdSZXBsYWNlclwiO1xuaW1wb3J0IHsgZm9ybWF0RW50cnkgfSBmcm9tIFwiLi9oZWxwZXJzL2Zvcm1hdEVudHJ5XCI7XG5cbmZ1bmN0aW9uIGlzVHlwZWRFbnRyeSh4OiBhbnkpOiB4IGlzIHsgdHlwZTogc3RyaW5nOyBbazogc3RyaW5nXTogYW55IH0ge1xuICByZXR1cm4gKFxuICAgIHggIT0gbnVsbCAmJlxuICAgIHR5cGVvZiB4ID09PSBcIm9iamVjdFwiICYmXG4gICAgIUFycmF5LmlzQXJyYXkoeCkgJiZcbiAgICB0eXBlb2YgKHggYXMgYW55KS50eXBlID09PSBcInN0cmluZ1wiXG4gICk7XG59XG5cbmZ1bmN0aW9uIGZvcm1hdEZlYXR1cmVMaW5rKG5hbWU6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgY29uc3QgaWdub3JlID0gW1wiQWJpbGl0eSBTY29yZSBJbXByb3ZlbWVudFwiLCBcIkFyY2hldHlwZSBGZWF0dXJlXCIsIFwiU3ViY2xhc3MgRmVhdHVyZVwiXTtcbiAgICBpZiAoaWdub3JlLnNvbWUoc3ViID0+IG5hbWUudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhzdWIudG9Mb3dlckNhc2UoKSkpKSB7XG4gICAgICByZXR1cm4gbmFtZTtcbiAgICB9XG4gIFxuICAgIGNvbnN0IGFuY2hvciA9IG5hbWVcbiAgICAgIC5yZXBsYWNlKC9bXlxcd1xcc10vZywgXCJcIikgICAgICAgICAgIC8vIHJlbW92ZSBwdW5jdHVhdGlvbiAoa2VlcCBzcGFjZXMpXG4gICAgICAucmVwbGFjZSgvLS9nLCBcIiBcIikgICAgICAgICAgICAgICAgLy8gcmVtb3ZlIGRhc2hlc1xuICAgICAgLnJlcGxhY2UoL1xccysvZywgXCIgXCIpICAgICAgICAgICAgICAvLyBub3JtYWxpemUgd2hpdGVzcGFjZVxuICAgICAgLnRyaW0oKVxuICAgICAgLnJlcGxhY2UoL1xcYlxcdy9nLCBsID0+IGwudG9VcHBlckNhc2UoKSk7IC8vIGNhcGl0YWxpemUgd29yZHNcbiAgXG4gICAgcmV0dXJuIGBbWyMke2FuY2hvcn1dXWA7XG4gIH1cblxuZnVuY3Rpb24gdG9IZWFkZXJBbmNob3IobmFtZTogc3RyaW5nKTogc3RyaW5nIHtcbiAgcmV0dXJuIG5hbWVcbiAgICAucmVwbGFjZSgvW15cXHdcXHNdL2csIFwiXCIpXG4gICAgLnJlcGxhY2UoLy0vZywgXCIgXCIpXG4gICAgLnJlcGxhY2UoL1xccysvZywgXCIgXCIpXG4gICAgLnRyaW0oKVxuICAgIC5yZXBsYWNlKC9cXGJcXHcvZywgbCA9PiBsLnRvVXBwZXJDYXNlKCkpO1xufVxuICBcbmV4cG9ydCBjb25zdCBPUFRfRkVBVFVSRV9UWVBFX1RPX0ZVTEw6IFJlY29yZDxzdHJpbmcsc3RyaW5nPiA9IHtcbiAgQUk6ICAgXCJBcnRpZmljZXIgSW5mdXNpb25cIixcbiAgRUQ6ICAgXCJFbGVtZW50YWwgRGlzY2lwbGluZVwiLFxuICBFSTogICBcIkVsZHJpdGNoIEludm9jYXRpb25cIixcbiAgTU06ICAgXCJNZXRhbWFnaWNcIixcbiAgTVY6ICAgXCJNYW5ldXZlclwiLFxuICBcIk1WOkJcIjogICAgXCJNYW5ldXZlciwgQmF0dGxlIE1hc3RlclwiLFxuICBcIk1WOkMyLVVBXCI6XCJNYW5ldXZlciwgQ2F2YWxpZXIgVjIgKFVBKVwiLFxuICBcIkFTOlYxLVVBXCI6XCJBcmNhbmUgU2hvdCwgVjEgKFVBKVwiLFxuICBcIkFTOlYyLVVBXCI6XCJBcmNhbmUgU2hvdCwgVjIgKFVBKVwiLFxuICBBUzogICBcIkFyY2FuZSBTaG90XCIsXG4gIE9USDogIFwiT3RoZXJcIixcbiAgXCJGUzpGXCI6XCJGaWdodGluZyBTdHlsZTsgRmlnaHRlclwiLFxuICBcIkZTOkJcIjpcIkZpZ2h0aW5nIFN0eWxlOyBCYXJkXCIsXG4gIFwiRlM6UFwiOlwiRmlnaHRpbmcgU3R5bGU7IFBhbGFkaW5cIixcbiAgXCJGUzpSXCI6XCJGaWdodGluZyBTdHlsZTsgUmFuZ2VyXCIsXG4gIFBCOiAgIFwiUGFjdCBCb29uXCIsXG4gIE9SOiAgIFwiT25vbWFuY3kgUmVzb25hbnRcIixcbiAgUk46ICAgXCJSdW5lIEtuaWdodCBSdW5lXCIsXG4gIEFGOiAgIFwiQWxjaGVtaWNhbCBGb3JtdWxhXCIsXG4gIFRUOiAgIFwiVHJhdmVsZXIncyBUcmlja1wiLFxufTtcbiAgXG4gIGZ1bmN0aW9uIHJlbmRlckVudHJpZXMoZW50cmllczogYW55W10pOiBzdHJpbmcge1xuICAgIHJldHVybiBlbnRyaWVzLm1hcCgoZW50cnkpID0+IHtcbiAgICAgIGlmICh0eXBlb2YgZW50cnkgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgcmV0dXJuIHJlcGxhY2U1ZVRhZ3MoZW50cnkpO1xuICAgICAgfVxuICBcbiAgICAgIGlmICh0eXBlb2YgZW50cnkgPT09IFwib2JqZWN0XCIpIHtcbiAgICAgICAgaWYgKGlzVHlwZWRFbnRyeShlbnRyeSkgJiYgZW50cnkudHlwZSA9PT0gXCJyZWZDbGFzc0ZlYXR1cmVcIikge1xuICAgICAgICAgIGNvbnN0IFtuYW1lXSA9IGVudHJ5LmNsYXNzRmVhdHVyZS5zcGxpdChcInxcIik7XG4gICAgICAgICAgcmV0dXJuIGAqU2VlIGZlYXR1cmU6ICoqJHtuYW1lfSoqKmA7XG4gICAgICAgIH1cbiAgXG4gICAgICAgIGlmIChpc1R5cGVkRW50cnkoZW50cnkpICYmIGVudHJ5LnR5cGUgPT09IFwiZW50cmllc1wiKSB7XG4gICAgICAgICAgY29uc3QgaW5uZXIgPSByZW5kZXJFbnRyaWVzKGVudHJ5LmVudHJpZXMgfHwgW10pO1xuICAgICAgICAgIHJldHVybiBgKioke2VudHJ5Lm5hbWV9KipcXG5cXG4ke2lubmVyfWA7XG4gICAgICAgIH1cbiAgXG4gICAgICAgIGlmIChpc1R5cGVkRW50cnkoZW50cnkpICYmIGVudHJ5LnR5cGUgPT09IFwiZW50cmllc1wiKSB7XG4gICAgICAgICAgY29uc3QgaW5uZXIgPSByZW5kZXJFbnRyaWVzKGVudHJ5LmVudHJpZXMgfHwgW10pO1xuICAgICAgICAgIHJldHVybiBgPiAqKiR7ZW50cnkubmFtZX0qKlxcbj5cXG4+ICR7aW5uZXIuc3BsaXQoXCJcXG5cIikuam9pbihcIlxcbj4gXCIpfWA7XG4gICAgICAgIH1cbiAgXG4gICAgICAgIC8vIGZhbGxiYWNrXG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KGVudHJ5LmVudHJpZXMpKSB7XG4gICAgICAgICAgcmV0dXJuIHJlbmRlckVudHJpZXMoZW50cnkuZW50cmllcyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgXG4gICAgICByZXR1cm4gXCJcIjtcbiAgICB9KS5maWx0ZXIoQm9vbGVhbikuam9pbihcIlxcblwiKTtcbiAgfVxuICBcbmV4cG9ydCBmdW5jdGlvbiBwYXJzZUNsYXNzRmlsZShcbiAganNvbjogYW55LFxuICBlZGl0aW9uSWQ6IHN0cmluZyxcbiAgZmlsZU5hbWU6IHN0cmluZyxcbiAgb3B0aW9uYWxGZWF0dXJlczogYW55W11cbik6IFBhcnNlZE1hcmtkb3duRmlsZVtdIHtcbiAgLy8gbWFrZSBlZGl0aW9uSWQgYXZhaWxhYmxlIGZvciBmcm9udG1hdHRlclxuICAoanNvbiBhcyBhbnkpLl9lZGl0aW9uSWQgPSBlZGl0aW9uSWQ7XG5cbiAgLy8gdW53cmFwIHRoZSByZWFsIGNsYXNzIHJlY29yZFxuICBjb25zdCBjbHMgPSBBcnJheS5pc0FycmF5KGpzb24uY2xhc3MpID8ganNvbi5jbGFzc1swXSA6IGpzb247XG4gIC8vIGRlcml2ZSB0aGUgTWFya2Rvd24gZmlsZW5hbWVcbiAgY29uc3QgY2xhc3NOYW1lID1cbiAgICB0eXBlb2YgY2xzLm5hbWUgPT09IFwic3RyaW5nXCJcbiAgICAgID8gY2xzLm5hbWVcbiAgICAgIDogZmlsZU5hbWVcbiAgICAgID8gZmlsZU5hbWUucmVwbGFjZSgvXmNsYXNzLS8sIFwiXCIpLnJlcGxhY2UoL1xcLmpzb24kLywgXCJcIilcbiAgICAgIDogXCJVbmtub3duXCI7XG5cbiAgY29uc3Qgc3ViY2xhc3NGaWxlczogUGFyc2VkTWFya2Rvd25GaWxlW10gPSBbXTtcblxuICBjb25zdCBQUk9GX0JPTlVTX0JZX0xFVkVMID0gW1xuICAgIFwiKzJcIiwgXCIrMlwiLCBcIisyXCIsIFwiKzJcIixcbiAgICBcIiszXCIsIFwiKzNcIiwgXCIrM1wiLCBcIiszXCIsXG4gICAgXCIrNFwiLCBcIis0XCIsIFwiKzRcIiwgXCIrNFwiLFxuICAgIFwiKzVcIiwgXCIrNVwiLCBcIis1XCIsIFwiKzVcIixcbiAgICBcIis2XCIsIFwiKzZcIiwgXCIrNlwiLCBcIis2XCJcbiAgXTtcbiAgXG4gIC8vIG5vcm1hbGl6ZSBoaXRcdTIwMTBkaWNlXG4gIGNvbnN0IGhkTnVtICAgPSBjbHMuaGQ/Lm51bWJlciA/PyAxO1xuICBjb25zdCBoZEZhY2VzID0gY2xzLmhkPy5mYWNlcyAgPz8gNjtcbiAgY29uc3QgaGRTdHIgICA9IGAke2hkTnVtfWQke2hkRmFjZXN9YDtcbiAgY29uc3QgaGRNYXggICA9IGhkTnVtICogaGRGYWNlcztcbiAgY29uc3QgaGRBdmcgICA9IE1hdGguY2VpbCgoaGRGYWNlcyArIDEpIC8gMik7XG5cbmNvbnN0IGJhc2VGTSA9IGJ1aWxkRk0oY2xzLCBDTEFTU19NRVRBX0RFRlMpO1xuY29uc3QgZm0gICAgID0geyAuLi5iYXNlRk0sIGhkOiBoZFN0ciB9O1xuY29uc3QgeWFtbCAgID0gc2VyaWFsaXplRnJvbnRtYXR0ZXIoZm0sIENMQVNTX01FVEFfREVGUyk7XG5cbi8vIDEpIERlY2xhcmUgeW91ciBsaW5lcyBidWZmZXIgaW1tZWRpYXRlbHlcbmNvbnN0IGxpbmVzOiBzdHJpbmdbXSA9IFtdO1xuXG4vLyA0KSBOb3cgY2Fycnkgb24gd2l0aCB0aGUgcmVzdCBvZiB5b3VyIGJvZHlcbmxpbmVzLnB1c2goYCMgJHtjbGFzc05hbWV9YCk7XG5pZiAoY2xzLnNvdXJjZSkgbGluZXMucHVzaChgKipTb3VyY2U6KiogJHtjbHMuc291cmNlfWApO1xubGluZXMucHVzaChgYCk7XG5saW5lcy5wdXNoKGAtLS1gKTtcblxuICAvLyBcdTI1MDBcdTI1MDBcdTI1MDAgSGl0IFBvaW50cyBcdTI1MDBcdTI1MDBcdTI1MDBcbiAgbGluZXMucHVzaChgIyMgSGl0IFBvaW50c2ApO1xuICBsaW5lcy5wdXNoKGAqKkhpdCBEaWNlOioqICR7aGRTdHJ9IHBlciAke2NsYXNzTmFtZX0gbGV2ZWxgKTtcbiAgbGluZXMucHVzaChgKipIaXQgUG9pbnRzIGF0IDFzdCBMZXZlbDoqKiAke2hkTWF4fSArIHlvdXIgQ29uc3RpdHV0aW9uIG1vZGlmaWVyYCk7XG4gIGxpbmVzLnB1c2goXG4gICAgYCoqSGl0IFBvaW50cyBhdCBIaWdoZXIgTGV2ZWxzOioqICR7aGRTdHJ9IChvciAke2hkQXZnfSkgKyB5b3VyIENvbnN0aXR1dGlvbiBtb2RpZmllciBwZXIgbGV2ZWwgYWZ0ZXIgMXN0YFxuICApO1xuXG4vLyBcdTI1MDBcdTI1MDBcdTI1MDAgUHJvZmljaWVuY2llcyBcdTI1MDBcdTI1MDBcdTI1MDBcbmxpbmVzLnB1c2goYGApO1xubGluZXMucHVzaChgLS0tYCk7XG5saW5lcy5wdXNoKGAjIyBQcm9maWNpZW5jaWVzYCk7XG5cbmNvbnN0IHNwID0gY2xzLnN0YXJ0aW5nUHJvZmljaWVuY2llcyA/PyB7fTtcblxuLy8gQXJtb3JcbmlmIChBcnJheS5pc0FycmF5KHNwLmFybW9yKSAmJiBzcC5hcm1vci5sZW5ndGgpIHtcbiAgbGluZXMucHVzaChgLSAqKkFybW9yOioqICR7c3AuYXJtb3Iuam9pbihcIiwgXCIpfWApO1xufVxuXG4vLyBXZWFwb25zXG5jb25zdCB3ZWFwb25MaXN0ID0gdW5pZmllZFdlYXBvblByb2ZzKHNwKTtcbmlmICh3ZWFwb25MaXN0Lmxlbmd0aCkge1xuICBsaW5lcy5wdXNoKGAtICoqV2VhcG9uczoqKiAke3dlYXBvbkxpc3Quam9pbihcIiwgXCIpfWApO1xufVxuXG4vLyBUb29sc1xuY29uc3QgdG9vbExpc3QgPSB1bmlmaWVkVG9vbFByb2ZzKHNwKTtcbmlmICh0b29sTGlzdC5sZW5ndGgpIHtcbiAgbGluZXMucHVzaChgLSAqKlRvb2xzOioqICR7dG9vbExpc3Quam9pbihcIiwgXCIpfWApO1xufVxuXG4vLyBTYXZpbmcgVGhyb3dzXG5jb25zdCBzYXZlcyA9IEFycmF5LmlzQXJyYXkoY2xzLnByb2ZpY2llbmN5KVxuICA/IGNscy5wcm9maWNpZW5jeS5tYXAoKGs6IHN0cmluZykgPT5cbiAgICAgICh7IHN0cjpcIlN0cmVuZ3RoXCIsIGRleDpcIkRleHRlcml0eVwiLCBjb246XCJDb25zdGl0dXRpb25cIixcbiAgICAgICAgIGludDpcIkludGVsbGlnZW5jZVwiLCB3aXM6XCJXaXNkb21cIiwgY2hhOlwiQ2hhcmlzbWFcIiB9W2tdIHx8IGsudG9VcHBlckNhc2UoKSlcbiAgICApXG4gIDogW107XG5pZiAoc2F2ZXMubGVuZ3RoKSB7XG4gIGxpbmVzLnB1c2goYC0gKipTYXZpbmcgVGhyb3dzOioqICR7c2F2ZXMuam9pbihcIiwgXCIpfWApO1xufVxuXG5cbi8vIFx1MjUwMFx1MjUwMFx1MjUwMCBTa2lsbHMgXHUyNTAwXHUyNTAwXHUyNTAwXG57XG4gIC8vIDEpIGdyYWIgd2hhdGV2ZXIgYXJyYXkgaG9sZHMgdGhlIHJhdyBvYmplY3RzL3N0cmluZ3NcbiAgY29uc3QgcmF3U2tpbGxzOiBhbnlbXSA9XG4gICAgQXJyYXkuaXNBcnJheShzcC5za2lsbFByb2ZpY2llbmNpZXMpID8gc3Auc2tpbGxQcm9maWNpZW5jaWVzXG4gICAgOiBBcnJheS5pc0FycmF5KHNwLnNraWxscykgICAgICAgICAgICAgPyBzcC5za2lsbHNcbiAgICA6IEFycmF5LmlzQXJyYXkoc3Auc2tpbGxQcm9mKSAgICAgICAgICA/IHNwLnNraWxsUHJvZlxuICAgIDogW107XG5cbiAgLy8gMikgbG9vayBmb3IgdGhlIFx1MjAxQ2Nob29zZSBOIGZyb20gW1x1MjAyNl1cdTIwMUQgZW50cnlcbiAgY29uc3QgY2hvaWNlRW50cnkgPSByYXdTa2lsbHMuZmluZChcbiAgICBlID0+IGUgJiZcbiAgICAgICAgICh0eXBlb2YgZS5jaG9vc2UgPT09IFwib2JqZWN0XCIgfHwgdHlwZW9mIGUuYW55ID09PSBcIm51bWJlclwiKVxuICApO1xuXG4gIGlmIChjaG9pY2VFbnRyeSkge1xuICAgIC8vIGhvdyBtYW55IHRvIGNob29zZVxuICAgIGNvbnN0IGNvdW50ID0gY2hvaWNlRW50cnkuY2hvb3NlPy5jb3VudCA/PyBjaG9pY2VFbnRyeS5hbnkgPz8gMTtcblxuICAgIC8vIHB1bGwgdGhlIGFjdHVhbCBsaXN0IG9mIG9wdGlvbnMsIG9yIGZhbGwgYmFjayB0byB0aGUgZ2xvYmFsIFNLSUxMX09QVElPTlNcbiAgICBjb25zdCBvcHRpb25zOiBzdHJpbmdbXSA9IEFycmF5LmlzQXJyYXkoY2hvaWNlRW50cnkuY2hvb3NlPy5mcm9tKVxuICAgICAgPyBjaG9pY2VFbnRyeS5jaG9vc2UuZnJvbS5tYXAoKHM6IHN0cmluZykgPT5cbiAgICAgICAgICAvLyB0aXRsZS1jYXNlIGVhY2ggd29yZCAob3IganVzdCB1c2UgcylcbiAgICAgICAgICBzLnNwbGl0KFwiIFwiKS5tYXAodyA9PiB3WzBdLnRvVXBwZXJDYXNlKCkgKyB3LnNsaWNlKDEpKS5qb2luKFwiIFwiKVxuICAgICAgICApXG4gICAgICA6IFNLSUxMX09QVElPTlM7XG5cbiAgICBsaW5lcy5wdXNoKGAtICoqU2tpbGxzIChDaG9vc2UgJHtjb3VudH0pOioqICR7b3B0aW9ucy5qb2luKFwiLCBcIil9YCk7XG5cbiAgfSBlbHNlIHtcbiAgICAvLyBubyBjaG9vc2UtZnJvbSBvYmplY3QgXHUyMTkyIGZsYXQgbGlzdCBmcm9tIHlvdXIgdW5pZmllZCBoZWxwZXJcbiAgICBjb25zdCBmbGF0ID0gdW5pZmllZFNraWxscyhzcCk7XG4gICAgaWYgKGZsYXQubGVuZ3RoKSB7XG4gICAgICBsaW5lcy5wdXNoKGAtICoqU2tpbGxzOioqICR7ZmxhdC5qb2luKFwiLCBcIil9YCk7XG4gICAgfVxuICB9XG59XG5cblxuXG4gIC8vIFx1MjUwMFx1MjUwMFx1MjUwMCBFcXVpcG1lbnQgXHUyNTAwXHUyNTAwXHUyNTAwXG4gIGlmIChBcnJheS5pc0FycmF5KGNscy5zdGFydGluZ0VxdWlwbWVudCkpIHtcbiAgICBsaW5lcy5wdXNoKGBcXG4jIyMgRXF1aXBtZW50YCk7XG4gICAgY2xzLnN0YXJ0aW5nRXF1aXBtZW50XG4gICAgICAuZmlsdGVyKChlOiBhbnkpID0+IHR5cGVvZiBlID09PSBcInN0cmluZ1wiKVxuICAgICAgLmZvckVhY2goKGl0ZW06IHN0cmluZykgPT4gbGluZXMucHVzaChgLSAke2l0ZW19YCkpO1xuICB9XG5cbi8vIFx1MjUwMFx1MjUwMFx1MjUwMCBDbGFzcyBQcm9ncmVzc2lvbiBcdTI1MDBcdTI1MDBcdTI1MDBcbmNvbnN0IHByb2dHcm91cHMgPSBjbHMuY2xhc3NUYWJsZUdyb3VwcyA/PyBbXTtcbmNvbnN0IG1heExldmVsID0gMjA7XG5cbmlmICghcHJvZ0dyb3Vwcy5sZW5ndGgpIHtcbiAgbGluZXMucHVzaChgKihObyBjbGFzcyB0YWJsZSBwcm92aWRlZCBmb3IgdGhpcyBjbGFzcy4pKmApO1xufSBlbHNlIHtcbiAgLy8gMSkgQnVpbGQgbGV2ZWwgXHUyMTkyIGZlYXR1cmUgbWFwXG4gIGNvbnN0IGZlYXR1cmVzQnlMZXZlbDogUmVjb3JkPG51bWJlciwgc3RyaW5nW10+ID0ge307XG4gIGZvciAoY29uc3QgZmVhdCBvZiBjbHMuY2xhc3NGZWF0dXJlcyA/PyBbXSkge1xuICAgIGNvbnN0IHJhdyA9IHR5cGVvZiBmZWF0ID09PSBcIm9iamVjdFwiICYmIGZlYXQuY2xhc3NGZWF0dXJlID8gZmVhdC5jbGFzc0ZlYXR1cmUgOiBTdHJpbmcoZmVhdCk7XG4gICAgY29uc3QgW25hbWUsLCAsbHZsU3RyXSA9IHJhdy5zcGxpdChcInxcIik7XG4gICAgY29uc3QgbHZsID0gTnVtYmVyKGx2bFN0ciA/PyAwKTtcbiAgICBpZiAoIWZlYXR1cmVzQnlMZXZlbFtsdmxdKSBmZWF0dXJlc0J5TGV2ZWxbbHZsXSA9IFtdO1xuICAgIGZlYXR1cmVzQnlMZXZlbFtsdmxdLnB1c2gobmFtZSk7XG4gIH1cblxuICAvLyAyKSBHYXRoZXIgZXZlcnkgY29sdW1uIGxhYmVsICYgcm93IHZhbHVlXG4gIGNvbnN0IGFsbExhYmVsc1NldCA9IG5ldyBTZXQ8c3RyaW5nPigpO1xuICBjb25zdCByb3dNYXBzOiBSZWNvcmQ8bnVtYmVyLCBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+PiA9IHt9O1xuXG4gIGZvciAoY29uc3QgZ3JvdXAgb2YgcHJvZ0dyb3Vwcykge1xuICAgIGNvbnN0IGxhYmVscyA9IEFycmF5LmlzQXJyYXkoZ3JvdXAuY29sTGFiZWxzKVxuICAgICAgPyBncm91cC5jb2xMYWJlbHMubWFwKChsOiBzdHJpbmcpID0+IHJlcGxhY2U1ZVRhZ3MobCkpXG4gICAgICA6IFtdO1xuICAgIGNvbnN0IHJvd3MgPSBBcnJheS5pc0FycmF5KGdyb3VwLnJvd3MpXG4gICAgICA/IGdyb3VwLnJvd3NcbiAgICAgIDogQXJyYXkuaXNBcnJheShncm91cC5yb3dzU3BlbGxQcm9ncmVzc2lvbilcbiAgICAgICAgPyBncm91cC5yb3dzU3BlbGxQcm9ncmVzc2lvblxuICAgICAgICA6IFtdO1xuXG4gICAgaWYgKCFsYWJlbHMubGVuZ3RoIHx8ICFyb3dzLmxlbmd0aCkgY29udGludWU7XG5cbiAgICBmb3IgKGxldCBsdmwgPSAwOyBsdmwgPCByb3dzLmxlbmd0aDsgbHZsKyspIHtcbiAgICAgIGNvbnN0IGxldmVsTnVtID0gbHZsICsgMTtcbiAgICAgIGlmICghcm93TWFwc1tsZXZlbE51bV0pIHJvd01hcHNbbGV2ZWxOdW1dID0ge307XG4gICAgICBjb25zdCByb3dNYXAgPSByb3dNYXBzW2xldmVsTnVtXTtcbiAgICAgIGNvbnN0IGNlbGxzID0gcm93c1tsdmxdO1xuXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxhYmVscy5sZW5ndGg7IGkrKykge1xuICAgICAgICBjb25zdCBsYWJlbCA9IGxhYmVsc1tpXTtcbiAgICAgICAgbGV0IHZhbCA9IFwiXCI7XG4gICAgICAgIGNvbnN0IGNlbGwgPSBjZWxsc1tpXTtcblxuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShjZWxsKSkge1xuICAgICAgICAgIHZhbCA9IGNlbGwuam9pbihcIiwgXCIpO1xuICAgICAgICB9IGVsc2UgaWYgKGNlbGwgJiYgdHlwZW9mIGNlbGwgPT09IFwib2JqZWN0XCIgJiYgXCJ2YWx1ZVwiIGluIGNlbGwpIHtcbiAgICAgICAgICB2YWwgPSBTdHJpbmcoY2VsbC52YWx1ZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdmFsID0gU3RyaW5nKGNlbGwgPz8gXCJcIik7XG4gICAgICAgIH1cblxuICAgICAgICBhbGxMYWJlbHNTZXQuYWRkKGxhYmVsKTtcbiAgICAgICAgcm93TWFwW2xhYmVsXSA9IHZhbDtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvLyAzKSAqKkZpbHRlciBvdXQqKiBhbnkgc3BlbGxcdTIwMTB0YWJsZSBjb2x1bW5zXG4gIGNvbnN0IGFsbExhYmVscyA9IEFycmF5LmZyb20oYWxsTGFiZWxzU2V0KS5maWx0ZXIobGJsID0+XG4gICAgIS9DYW50cmlwcyBLbm93bnxTcGVsbHMgS25vd258XFxkKyhzdHxuZHxyZHx0aCkvLnRlc3QobGJsKVxuICApO1xuXG4gIC8vIDQpIEJ1aWxkIGZpbmFsIGhlYWRlciAmIHJvd3NcbiAgY29uc3QgbWVyZ2VkTGFiZWxzID0gW1wiTGV2ZWxcIiwgXCJQcm9maWNpZW5jeSBCb251c1wiLCBcIkNsYXNzIEZlYXR1cmVzXCIsIC4uLmFsbExhYmVsc107XG4gIGNvbnN0IG1lcmdlZFJvd3M6IHN0cmluZ1tdW10gPSBbXTtcblxuICBmb3IgKGxldCBsdmwgPSAxOyBsdmwgPD0gbWF4TGV2ZWw7IGx2bCsrKSB7XG4gICAgY29uc3QgZmVhdHVyZUxpc3QgPSAoZmVhdHVyZXNCeUxldmVsW2x2bF0gPz8gW10pLm1hcChmb3JtYXRGZWF0dXJlTGluayk7XG4gICAgY29uc3Qgcm93TWFwID0gcm93TWFwc1tsdmxdID8/IHt9O1xuXG4gICAgbWVyZ2VkUm93cy5wdXNoKFtcbiAgICAgIGx2bC50b1N0cmluZygpLFxuICAgICAgUFJPRl9CT05VU19CWV9MRVZFTFtsdmwgLSAxXSB8fCBcIlwiLFxuICAgICAgZmVhdHVyZUxpc3Quam9pbihcIiwgXCIpLnJlcGxhY2UoL1xcfC9nLCBcIiYjMTI0O1wiKSxcbiAgICAgIC4uLmFsbExhYmVscy5tYXAobGFiZWwgPT4gcm93TWFwW2xhYmVsXSA/PyBcIlwiKVxuICAgIF0pO1xuICB9XG5cbiAgLy8gNSkgUmVuZGVyIHRoZSBmZWF0dXJlc1x1MjAxMG9ubHkgdGFibGVcbmxpbmVzLnB1c2goYFxcbj4gWyFleGFtcGxlXS0gQ2xhc3MgUHJvZ3Jlc3Npb24gVGFibGVgKTtcbmxpbmVzLnB1c2goXG4gIHJlbmRlck1hcmtkb3duVGFibGUoe1xuICAgIHR5cGU6ICAgICAgXCJ0YWJsZVwiLFxuICAgIGNhcHRpb246ICAgXCJcIixcbiAgICBjb2xMYWJlbHM6IG1lcmdlZExhYmVscyxcbiAgICByb3dzOiAgICAgIG1lcmdlZFJvd3MsXG4gIH0pKTtcbn1cblxuLy8gXHUyNTAwXHUyNTAwXHUyNTAwIFNwZWxsIFByb2dyZXNzaW9uIFx1MjUwMFx1MjUwMFx1MjUwMFxuLy8gMSkgZmluZCB0aGUgdHdvIGdyb3Vwc1xuY29uc3QgY3NHcm91cCA9IHByb2dHcm91cHMuZmluZCgoZzogYW55KSA9PlxuICBBcnJheS5pc0FycmF5KGcuY29sTGFiZWxzKSAmJlxuICBnLmNvbExhYmVscy5zb21lKChsYmw6IGFueSkgPT4gL0NhbnRyaXBzIEtub3dufFNwZWxscyBLbm93bi8udGVzdChTdHJpbmcobGJsKSkpXG4pO1xuY29uc3Qgc2xvdEdyb3VwID0gcHJvZ0dyb3Vwcy5maW5kKChnOiBhbnkpID0+XG4gIEFycmF5LmlzQXJyYXkoZy5jb2xMYWJlbHMpICYmXG4gIGcudGl0bGUgPT09IFwiU3BlbGwgU2xvdHMgcGVyIFNwZWxsIExldmVsXCJcbik7XG5cbmlmIChjc0dyb3VwICYmIHNsb3RHcm91cCkge1xuICAvLyAyKSByYXcgbGFiZWxzXG4gIGNvbnN0IGNzTGFiZWxzICAgPSAoY3NHcm91cC5jb2xMYWJlbHMgYXMgc3RyaW5nW10pLm1hcChsID0+IHJlcGxhY2U1ZVRhZ3MobCkpO1xuICBjb25zdCBzbG90TGFiZWxzID0gKHNsb3RHcm91cC5jb2xMYWJlbHMgYXMgc3RyaW5nW10pLm1hcChsID0+IHJlcGxhY2U1ZVRhZ3MobCkpO1xuXG4gIC8vIDMpIHJhdyByb3dzXG4gIGNvbnN0IGNzUm93cyAgID0gKGNzR3JvdXAucm93cyAgICAgIGFzIGFueVtdW10pICAgICAgICAgICAgICB8fCBbXTtcbiAgY29uc3Qgc2xvdFJvd3MgPSAoc2xvdEdyb3VwLnJvd3NTcGVsbFByb2dyZXNzaW9uIGFzIGFueVtdW10pIHx8IFtdO1xuXG4gIC8vIDQpIGJ1aWxkIGhlYWRlcjogTGV2ZWwgKyBjYW50cmlwcy9zcGVsbHMgKyBlYWNoIHNsb3QgbGV2ZWxcbiAgY29uc3QgY29sTGFiZWxzID0gW1wiTGV2ZWxcIiwgLi4uY3NMYWJlbHMsIC4uLnNsb3RMYWJlbHNdO1xuXG4gIC8vIDUpIGJ1aWxkIGVhY2ggcm93IGJ5IHppcHBpbmcgY3NSb3dzW2ldICsgc2xvdFJvd3NbaV1cbiAgY29uc3Qgc3BlbGxSb3dzOiBzdHJpbmdbXVtdID0gW107XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgTWF0aC5tYXgoY3NSb3dzLmxlbmd0aCwgc2xvdFJvd3MubGVuZ3RoKTsgaSsrKSB7XG4gICAgY29uc3QgbHZsID0gU3RyaW5nKGkgKyAxKTtcbiAgICBjb25zdCBjc0NlbGxzICAgPSBjc1Jvd3NbaV0gICA/IGNzUm93c1tpXS5tYXAoU3RyaW5nKSAgIDogY3NMYWJlbHMubWFwKF8gPT4gXCJcIik7XG4gICAgY29uc3Qgc2xvdENlbGxzID0gc2xvdFJvd3NbaV0gPyBzbG90Um93c1tpXS5tYXAoU3RyaW5nKSA6IHNsb3RMYWJlbHMubWFwKF8gPT4gXCJcIik7XG4gICAgc3BlbGxSb3dzLnB1c2goW2x2bCwgLi4uY3NDZWxscywgLi4uc2xvdENlbGxzXSk7XG4gIH1cblxuICAvLyA2KSByZW5kZXIhXG4gIGxpbmVzLnB1c2goYFxcbj4gWyF0aXBdLSBTcGVsbCBQcm9ncmVzc2lvbiBUYWJsZWApO1xuICBsaW5lcy5wdXNoKFxuICAgIHJlbmRlck1hcmtkb3duVGFibGUoe1xuICAgICAgdHlwZTogICAgICBcInRhYmxlXCIsXG4gICAgICBjYXB0aW9uOiAgIFwiXCIsXG4gICAgICBjb2xMYWJlbHM6IGNvbExhYmVscyxcbiAgICAgIHJvd3M6ICAgICAgc3BlbGxSb3dzLFxuICB9KSk7XG59XG5cblxuLy8gXHUyNTAwXHUyNTAwXHUyNTAwIFN1YmNsYXNzZXMgXHUyNTAwXHUyNTAwXHUyNTAwXG5jb25zdCBzdWJzID0gQXJyYXkuaXNBcnJheShqc29uLnN1YmNsYXNzKSA/IGpzb24uc3ViY2xhc3MgOiBbXTtcbmNvbnN0IHN1YmNsYXNzRmVhdHVyZXMgPSBBcnJheS5pc0FycmF5KGpzb24uc3ViY2xhc3NGZWF0dXJlKVxuICA/IGpzb24uc3ViY2xhc3NGZWF0dXJlXG4gIDoganNvbi5sb29rdXA/LnN1YmNsYXNzRmVhdHVyZSA/PyBbXTtcblxuZm9yIChjb25zdCBzYyBvZiBzdWJzKSB7XG4gIGNvbnN0IHN1YmNsYXNzTmFtZSA9IHNjLm5hbWU7XG4gIGNvbnN0IHN1YkxpbmVzOiBzdHJpbmdbXSA9IFtdO1xuXG4gIC8vIFx1MjUwMFx1MjUwMFx1MjUwMCBIZWFkZXIgbWV0YWRhdGEgXHUyNTAwXHUyNTAwXHUyNTAwXG4gIHN1YkxpbmVzLnB1c2goYCMgJHtzdWJjbGFzc05hbWV9YCk7XG4gIHN1YkxpbmVzLnB1c2goYCoqUGFyZW50IENsYXNzOioqIFtbJHtjbGFzc05hbWV9XV1gKTtcbiAgaWYgKHNjLnNvdXJjZSkgc3ViTGluZXMucHVzaChgKipTb3VyY2U6KiogJHtzYy5zb3VyY2V9YCk7XG4gIHN1YkxpbmVzLnB1c2goYGApOyAvLyBibGFuayBsaW5lXG5cbiAgLy8gXHUyNTAwXHUyNTAwXHUyNTAwIEludHJvIGVudHJ5IChsZXZlbCAzIGZlYXR1cmUgZGVzY3JpcHRpb24pIFx1MjUwMFx1MjUwMFx1MjUwMFxuICBjb25zdCBpbnRybyA9IHN1YmNsYXNzRmVhdHVyZXMuZmluZCgoZjogYW55KSA9PlxuICAgIGYubmFtZSA9PT0gc2MubmFtZSAmJlxuICAgIGYubGV2ZWwgPT09IDMgJiZcbiAgICBmLnN1YmNsYXNzU2hvcnROYW1lID09PSBzYy5zaG9ydE5hbWUgJiZcbiAgICBmLnN1YmNsYXNzU291cmNlID09PSBzYy5zb3VyY2VcbiAgKTtcbiAgaWYgKGludHJvPy5lbnRyaWVzPy5sZW5ndGgpIHtcbiAgICBjb25zdCBpbnRyb1RleHQgPSBBcnJheS5pc0FycmF5KGludHJvLmVudHJpZXMpXG4gICAgICA/IGludHJvLmVudHJpZXMubWFwKChlOiBhbnkpID0+XG4gICAgICAgICAgdHlwZW9mIGUgPT09IFwic3RyaW5nXCIgPyByZXBsYWNlNWVUYWdzKGUpIDogZm9ybWF0RW50cnkoZSlcbiAgICAgICAgKS5qb2luKFwiXFxuXFxuXCIpXG4gICAgICA6IGZvcm1hdEVudHJ5KGludHJvLmVudHJpZXMpO1xuICAgIHN1YkxpbmVzLnB1c2goaW50cm9UZXh0LCBgYCk7XG4gIH1cblxuICAvLyBcdTI1MDBcdTI1MDBcdTI1MDAgT3B0aW9uYWxcdTIwMTBmZWF0dXJlIGJsb2NrIFx1MjUwMFx1MjUwMFx1MjUwMFxuICBjb25zdCBjb2RlID0gKE9iamVjdC5lbnRyaWVzKE9QVF9GRUFUVVJFX1RZUEVfVE9fRlVMTCkgYXMgW3N0cmluZyxzdHJpbmddW10pXG4gICAgLmZpbmQoKFssIGZ1bGxdKSA9PlxuICAgICAgZnVsbC50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKHN1YmNsYXNzTmFtZS50b0xvd2VyQ2FzZSgpKVxuICAgICk/LlswXTtcbiAgaWYgKGNvZGUpIHtcbiAgICBjb25zdCBtYXRjaGVzID0gb3B0aW9uYWxGZWF0dXJlcy5maWx0ZXIob2YgPT5cbiAgICAgIEFycmF5LmlzQXJyYXkob2YuZmVhdHVyZVR5cGUpICYmIG9mLmZlYXR1cmVUeXBlLmluY2x1ZGVzKGNvZGUpXG4gICAgKTtcbiAgICBpZiAobWF0Y2hlcy5sZW5ndGgpIHtcbiAgICAgIHN1YkxpbmVzLnB1c2goYCMjICR7c3ViY2xhc3NOYW1lfSBPcHRpb25hbCBGZWF0dXJlc2ApO1xuICAgICAgZm9yIChjb25zdCBmZWF0IG9mIG1hdGNoZXMpIHtcbiAgICAgICAgZm9yIChjb25zdCBlbnRyeSBvZiBmZWF0LmVudHJpZXMpIHtcbiAgICAgICAgICBjb25zdCB0eHQgPSB0eXBlb2YgZW50cnkgPT09IFwic3RyaW5nXCJcbiAgICAgICAgICAgID8gcmVwbGFjZTVlVGFncyhlbnRyeSlcbiAgICAgICAgICAgIDogZm9ybWF0RW50cnkoZW50cnkpO1xuICAgICAgICAgIHN1YkxpbmVzLnB1c2goYCoqJHtmZWF0Lm5hbWV9OioqICR7dHh0fWApO1xuICAgICAgICB9XG4gICAgICAgIHN1YkxpbmVzLnB1c2goYGApO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8vIFx1MjUwMFx1MjUwMFx1MjUwMCBTdWJjbGFzcyBwcm9ncmVzc2lvbiB0YWJsZSBcdTI1MDBcdTI1MDBcdTI1MDBcbiAgY29uc3QgcHJvZyA9IHNjLnN1YmNsYXNzVGFibGVHcm91cHMgPz8gW107XG4gIGlmIChwcm9nLmxlbmd0aCkge1xuICAgIGNvbnN0IGxhYmVscyA9IG5ldyBTZXQ8c3RyaW5nPigpO1xuICAgIGNvbnN0IHJvd3NNYXA6IFJlY29yZDxudW1iZXIsIFJlY29yZDxzdHJpbmcsc3RyaW5nPj4gPSB7fTtcbiAgICBmb3IgKGNvbnN0IGcgb2YgcHJvZykge1xuICAgICAgY29uc3QgY29scyA9IChnLmNvbExhYmVscyA/PyBbXSkubWFwKHJlcGxhY2U1ZVRhZ3MpO1xuICAgICAgY29uc3Qgcm93cyA9IEFycmF5LmlzQXJyYXkoZy5yb3dzKVxuICAgICAgICA/IGcucm93c1xuICAgICAgICA6IEFycmF5LmlzQXJyYXkoZy5yb3dzU3BlbGxQcm9ncmVzc2lvbilcbiAgICAgICAgICA/IGcucm93c1NwZWxsUHJvZ3Jlc3Npb25cbiAgICAgICAgICA6IFtdO1xuICAgICAgcm93cy5mb3JFYWNoKChyOiBhbnksIGk6IGFueSkgPT4ge1xuICAgICAgICBjb25zdCBsdmwgPSBpICsgMTtcbiAgICAgICAgcm93c01hcFtsdmxdID8/PSB7fTtcbiAgICAgICAgci5mb3JFYWNoKChjOiBhbnksIGo6IG51bWJlcikgPT4ge1xuICAgICAgICAgIGNvbnN0IGxhYiA9IGNvbHNbal07XG4gICAgICAgICAgaWYgKCFsYWIpIHJldHVybjtcbiAgICAgICAgICBsYWJlbHMuYWRkKGxhYik7XG4gICAgICAgICAgcm93c01hcFtsdmxdW2xhYl0gPSB0eXBlb2YgYyA9PT0gXCJvYmplY3RcIiAmJiBjICE9PSBudWxsICYmIFwidmFsdWVcIiBpbiBjXG4gICAgICAgICAgICA/IFN0cmluZyhjLnZhbHVlKVxuICAgICAgICAgICAgOiBTdHJpbmcoYyA/PyBcIlwiKTtcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9XG4gICAgY29uc3QgaGRycyA9IEFycmF5LmZyb20obGFiZWxzKTtcbiAgICBzdWJMaW5lcy5wdXNoKGAjIyBTdWJjbGFzcyBQcm9ncmVzc2lvbmApO1xuICAgIHN1YkxpbmVzLnB1c2gocmVuZGVyTWFya2Rvd25UYWJsZSh7XG4gICAgICB0eXBlOiAgICAgIFwidGFibGVcIixcbiAgICAgIGNhcHRpb246ICAgXCJcIixcbiAgICAgIGNvbExhYmVsczogW1wiTGV2ZWxcIiwgLi4uaGRyc10sXG4gICAgICByb3dzOiAgICAgIEFycmF5LmZyb20oeyBsZW5ndGg6IDIwIH0sIChfLCBpKSA9PiB7XG4gICAgICAgIGNvbnN0IGx2bCA9IGkgKyAxO1xuICAgICAgICByZXR1cm4gW1N0cmluZyhsdmwpLCAuLi5oZHJzLm1hcChoID0+IHJvd3NNYXBbbHZsXT8uW2hdID8/IFwiXCIpXTtcbiAgICAgIH0pXG4gICAgfSkpO1xuICB9XG5cbi8vIFx1MjUwMFx1MjUwMFx1MjUwMCBEZXRhaWxlZCBsZXZlbFx1MjAxMGJ5XHUyMDEwbGV2ZWwgZmVhdHVyZXMgXHUyNTAwXHUyNTAwXHUyNTAwXG5jb25zdCBmZWF0c0J5THZsOiBSZWNvcmQ8bnVtYmVyLCBhbnlbXT4gPSB7fTtcbmZvciAoY29uc3QgZiBvZiBzdWJjbGFzc0ZlYXR1cmVzKSB7XG4gIGlmIChcbiAgICBmLnN1YmNsYXNzU2hvcnROYW1lID09PSBzYy5zaG9ydE5hbWUgJiZcbiAgICBmLnN1YmNsYXNzU291cmNlID09PSBzYy5zb3VyY2UgJiZcbiAgICBmLmNsYXNzTmFtZSA9PT0gY2xhc3NOYW1lXG4gICkge1xuICAgIGNvbnN0IGx2bCA9IGYubGV2ZWwgPz8gMDtcbiAgICA7KGZlYXRzQnlMdmxbbHZsXSA/Pz0gW10pLnB1c2goZik7XG4gIH1cbn1cblxuY29uc3QgSUdOT1JFX1RSQUlUUyA9IFtcIkFiaWxpdHkgU2NvcmUgSW1wcm92ZW1lbnRcIiwgXCJBcmNoZXR5cGUgRmVhdHVyZVwiLCBcIlN1YmNsYXNzIEZlYXR1cmVcIl07XG5jb25zdCB0cmFpdE5hbWVzID0gQXJyYXkuZnJvbShcbiAgbmV3IFNldChcbiAgICBPYmplY3QudmFsdWVzKGZlYXRzQnlMdmwpXG4gICAgICAuZmxhdCgpXG4gICAgICAubWFwKChmOiBhbnkpID0+IFN0cmluZyhmPy5uYW1lIHx8IFwiXCIpLnRyaW0oKSlcbiAgICAgIC5maWx0ZXIobiA9PiBuICYmICFJR05PUkVfVFJBSVRTLnNvbWUocyA9PiBuLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMocy50b0xvd2VyQ2FzZSgpKSkpXG4gIClcbik7XG5cbmNvbnN0IHRyYWl0TGlua3MgPSB0cmFpdE5hbWVzLm1hcChuID0+IGBbWyR7c3ViY2xhc3NOYW1lfSMke3RvSGVhZGVyQW5jaG9yKG4pfXwke259XV1gKTtcblxuLy8gTWluaW1hbCBmcm9udG1hdHRlciBmb3Igc3ViY2xhc3NlczsgRk1fRklFTERTIGtlZXBzIG9yZGVyaW5nIGNvbnNpc3RlbnRcbmNvbnN0IHN1YllhbWwgPSBzZXJpYWxpemVGcm9udG1hdHRlcih7IHRyYWl0czogdHJhaXRMaW5rcyB9LCBDTEFTU19NRVRBX0RFRlMpO1xuXG5mb3IgKGNvbnN0IGx2bCBvZiBPYmplY3Qua2V5cyhmZWF0c0J5THZsKS5tYXAoTnVtYmVyKS5zb3J0KChhLGIpPT5hLWIpKSB7XG4gIHN1YkxpbmVzLnB1c2goYC0tLWAsIGAjIyBMZXZlbCAke2x2bH1gKTtcblxuICBmb3IgKGNvbnN0IGYgb2YgZmVhdHNCeUx2bFtsdmxdKSB7XG4gIHN1YkxpbmVzLnB1c2goYCMjIyAke2YubmFtZX1gKTtcblxuICAvLyBXYWxrIGVhY2ggZW50cnkgZm9yIHRoaXMgZmVhdHVyZVxuICBmb3IgKGNvbnN0IGVudCBvZiBBcnJheS5pc0FycmF5KGYuZW50cmllcykgPyBmLmVudHJpZXMgOiBbZi5lbnRyaWVzXSkge1xuICAgIC8vIDEpIFBsYWluIHBhcmFncmFwaCBlbnRyaWVzXG4gICAgaWYgKHR5cGVvZiBlbnQgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgIHN1YkxpbmVzLnB1c2gocmVwbGFjZTVlVGFncyhlbnQpKTtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cblxuICAgIC8vIDIpIElmIGl0J3MgdGhlIFwiTWFuZXV2ZXJzXCIgZW50cmllc1x1MjAxMGJsb2NrLCBpbmplY3QgeW91ciBsaXN0IGhlcmVcbiAgICBpZiAoaXNUeXBlZEVudHJ5KGVudCkgJiYgZW50LnR5cGUgPT09IFwiZW50cmllc1wiICYmIC9eTWFuZXV2ZXJzJC9pLnRlc3QoZW50Lm5hbWUpKSB7XG4gICAgICAvLyBmaXJzdCBwcmludCB0aGUgc3ViXHUyMDEwaGVhZGluZyBhbmQgYW55IHRleHQgaXQgaGFkXG4gICAgICBzdWJMaW5lcy5wdXNoKGAjIyMjIyAke2VudC5uYW1lfWApO1xuICAgICAgZm9yIChjb25zdCB0eHQgb2YgQXJyYXkuaXNBcnJheShlbnQuZW50cmllcykgPyBlbnQuZW50cmllcyA6IFtlbnQuZW50cmllc10pIHtcbiAgICAgICAgc3ViTGluZXMucHVzaCh0eXBlb2YgdHh0ID09PSBcInN0cmluZ1wiXG4gICAgICAgICAgPyByZXBsYWNlNWVUYWdzKHR4dClcbiAgICAgICAgICA6IGZvcm1hdEVudHJ5KHR4dCkpO1xuICAgICAgfVxuXG4gICAgICAvLyBub3cgaW5qZWN0IHRoZSBmdWxsIG1hbmV1dmVyIGRlZmluaXRpb25zIGZvciB0aGlzIHN1YmNsYXNzXG4gICAgICBjb25zdCBjb2RlID0gKE9iamVjdC5lbnRyaWVzKE9QVF9GRUFUVVJFX1RZUEVfVE9fRlVMTCkgYXMgW3N0cmluZyxzdHJpbmddW10pXG4gICAgICAgIC5maW5kKChbLCBmdWxsXSkgPT5cbiAgICAgICAgICBmdWxsLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoc3ViY2xhc3NOYW1lLnRvTG93ZXJDYXNlKCkpXG4gICAgICAgICk/LlswXTtcbiAgICAgIGlmIChjb2RlKSB7XG4gICAgICAgIGNvbnN0IG1hdGNoZXMgPSBvcHRpb25hbEZlYXR1cmVzLmZpbHRlcihvZiA9PlxuICAgICAgICAgIEFycmF5LmlzQXJyYXkob2YuZmVhdHVyZVR5cGUpICYmIG9mLmZlYXR1cmVUeXBlLmluY2x1ZGVzKGNvZGUpXG4gICAgICAgICk7XG4gICAgICAgIGZvciAoY29uc3QgZmVhdERlZiBvZiBtYXRjaGVzKSB7XG4gICAgICAgICAgZm9yIChjb25zdCBzdWIgb2YgZmVhdERlZi5lbnRyaWVzKSB7XG4gICAgICAgICAgICBjb25zdCBsaW5lID0gdHlwZW9mIHN1YiA9PT0gXCJzdHJpbmdcIlxuICAgICAgICAgICAgICA/IHJlcGxhY2U1ZVRhZ3Moc3ViKVxuICAgICAgICAgICAgICA6IGZvcm1hdEVudHJ5KHN1Yik7XG4gICAgICAgICAgICBzdWJMaW5lcy5wdXNoKGAqKiR7ZmVhdERlZi5uYW1lfToqKiAke2xpbmV9YCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHN1YkxpbmVzLnB1c2goXCJcIik7IC8vIHNwYWNlclxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBjb250aW51ZTtcbiAgICB9XG5cbiAgICAvLyAzKSBBbnkgb3RoZXIgbmVzdGVkIFwiZW50cmllc1wiIGJsb2Nrc1xuICAgIGlmIChpc1R5cGVkRW50cnkoZW50KSAmJiBlbnQudHlwZSA9PT0gXCJlbnRyaWVzXCIgJiYgZW50Lm5hbWUpIHtcbiAgICAgIHN1YkxpbmVzLnB1c2goYCMjIyMjICR7ZW50Lm5hbWV9YCk7XG4gICAgICBmb3IgKGNvbnN0IGUyIG9mIEFycmF5LmlzQXJyYXkoZW50LmVudHJpZXMpID8gZW50LmVudHJpZXMgOiBbZW50LmVudHJpZXNdKSB7XG4gICAgICAgIHN1YkxpbmVzLnB1c2goZm9ybWF0RW50cnkoZTIpKTtcbiAgICAgIH1cbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cblxuICAgIC8vIDQpIEluc2V0c1xuICAgIGlmIChpc1R5cGVkRW50cnkoZW50KSAmJiBlbnQudHlwZSA9PT0gXCJpbnNldFwiICYmIGVudC5uYW1lKSB7XG4gICAgICBjb25zdCBpbm5lciA9IEFycmF5LmlzQXJyYXkoZW50LmVudHJpZXMpID8gZW50LmVudHJpZXMgOiBbZW50LmVudHJpZXNdO1xuICAgICAgc3ViTGluZXMucHVzaChgPiAqKiR7ZW50Lm5hbWV9KipgKTtcbiAgICAgIGlubmVyLmZvckVhY2goKGUyOiBhbnkpID0+IHN1YkxpbmVzLnB1c2goYD4gJHtmb3JtYXRFbnRyeShlMil9YCkpO1xuICAgICAgY29udGludWU7XG4gICAgfVxuXG4gICAgLy8gNSkgRmFsbGJhY2tcbiAgICBjb25zdCBmYiA9IGZvcm1hdEVudHJ5KGVudCk7XG4gICAgaWYgKGZiKSBzdWJMaW5lcy5wdXNoKGZiKTtcbiAgfVxuICB9XG59XG5cblxuICAvLyBcdTI1MDBcdTI1MDBcdTI1MDAgQ2xlYW4gdXAgJiBwdXNoIFx1MjUwMFx1MjUwMFx1MjUwMFxuICBjb25zdCBzdWJjbGFzc0NvbnRlbnRCb2R5ID0gc3ViTGluZXNcbiAgICAuam9pbihcIlxcblxcblwiKVxuICAgIC5yZXBsYWNlKC9cXG57Myx9L2csIFwiXFxuXFxuXCIpO1xuXG4gIGNvbnN0IHN1YmNsYXNzQ29udGVudCA9IGAtLS1cXG4ke3N1YllhbWx9XFxuLS0tXFxuXFxuJHtzdWJjbGFzc0NvbnRlbnRCb2R5fWA7XG5cbiAgc3ViY2xhc3NGaWxlcy5wdXNoKHtcbiAgICBwYXRoOiBgQ2xhc3Nlcy8ke2NsYXNzTmFtZX0vU3ViY2xhc3Nlcy8ke3N1YmNsYXNzTmFtZX0ubWRgLFxuICAgIGNvbnRlbnQ6IHN1YmNsYXNzQ29udGVudFxuICB9KTtcbn1cblxuXG5cbi8vIFx1MjUwMFx1MjUwMFx1MjUwMCBTdWJjbGFzc2VzIFN1bW1hcnkgXHUyNTAwXHUyNTAwXHUyNTAwXG5pZiAoc3Vicy5sZW5ndGgpIHtcbiAgY29uc3QgbGlua3MgPSBzdWJzLm1hcCgoc2M6IGFueSkgPT5cbiAgICBgW1tTdWJjbGFzc2VzLyR7c2MubmFtZS5yZXBsYWNlKC9bXFxcXC9dL2csIFwiLVwiKX18JHtzYy5uYW1lfV1dYFxuICApO1xuICBsaW5lcy5wdXNoKGBcXG4qKlN1YmNsYXNzZXM6KiogJHtsaW5rcy5qb2luKFwiLCBcIil9YCk7XG59XG5cblxuICAvLyBHZXQgZnVsbCBjbGFzcyBmZWF0dXJlIGRlZmluaXRpb25zXG5jb25zdCBhbGxGZWF0dXJlcyA9IEFycmF5LmlzQXJyYXkoanNvbi5jbGFzc0ZlYXR1cmUpID8ganNvbi5jbGFzc0ZlYXR1cmUgOiBqc29uLmxvb2t1cD8uY2xhc3NGZWF0dXJlID8/IFtdO1xuY29uc3QgZmVhdHVyZXNCeUxldmVsOiBSZWNvcmQ8bnVtYmVyLCBhbnlbXT4gPSB7fTtcblxuZm9yIChjb25zdCBlbnRyeSBvZiBhbGxGZWF0dXJlcykge1xuICBpZiAoZW50cnkuY2xhc3NOYW1lICE9PSBjbGFzc05hbWUpIGNvbnRpbnVlO1xuICBjb25zdCBsdmwgPSBlbnRyeS5sZXZlbCA/PyAwO1xuICBpZiAoIWZlYXR1cmVzQnlMZXZlbFtsdmxdKSBmZWF0dXJlc0J5TGV2ZWxbbHZsXSA9IFtdO1xuICBmZWF0dXJlc0J5TGV2ZWxbbHZsXS5wdXNoKGVudHJ5KTtcbn1cblxuXG4vLyBcdTI1MDBcdTI1MDBcdTI1MDAgTGV2ZWwgRmVhdHVyZXMgXHUyNTAwXHUyNTAwXHUyNTAwXG5saW5lcy5wdXNoKGBgKTtcbmxpbmVzLnB1c2goYC0tLWApO1xubGluZXMucHVzaChgIyMgTGV2ZWwgRmVhdHVyZXNgKTtcblxuY29uc3QgbGV2ZWxzID0gT2JqZWN0XG4gIC5rZXlzKGZlYXR1cmVzQnlMZXZlbClcbiAgLm1hcChuID0+ICtuKVxuICAuc29ydCgoYSwgYikgPT4gYSAtIGIpO1xuXG5mb3IgKGNvbnN0IGx2bCBvZiBsZXZlbHMpIHtcbiAgbGluZXMucHVzaChgIyMjIExldmVsICR7bHZsfWApO1xuXG4gIGZvciAoY29uc3QgZmVhdCBvZiBmZWF0dXJlc0J5TGV2ZWxbbHZsXSkge1xuICAgIC8vIEZlYXR1cmUgaGVhZGVyXG4gICAgbGluZXMucHVzaChgIyMjIyAke2ZlYXQubmFtZX1gKTtcblxuICAgIC8vIEVuc3VyZSBlbnRyaWVzIGlzIGFsd2F5cyBhbiBhcnJheVxuICAgIGNvbnN0IGVudHJpZXMgPSBBcnJheS5pc0FycmF5KGZlYXQuZW50cmllcylcbiAgICAgID8gZmVhdC5lbnRyaWVzXG4gICAgICA6IFtmZWF0LmVudHJpZXNdO1xuXG4gICAgZm9yIChjb25zdCBlbnQgb2YgZW50cmllcykge1xuICAgICAgLy8gMSkgUGxhaW4tdGV4dCBwYXJhZ3JhcGhcbiAgICAgICAgaWYgKHR5cGVvZiBlbnQgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICBjb25zdCB0eHQgPSBmb3JtYXRFbnRyeShlbnQpLnRyaW0oKTtcbiAgICAgICAgICAvLyBza2lwIGFueSBwdXJlLWJyYWNlIGxpbmVzXG4gICAgICAgICAgaWYgKHR4dCA9PT0gXCJ7XCIgfHwgdHh0ID09PSBcIn1cIikgY29udGludWU7XG4gICAgICAgICAgbGluZXMucHVzaCh0eHQpO1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGlzVHlwZWRFbnRyeShlbnQpICYmIGVudC50eXBlID09PSBcImxpc3RcIiAmJiBBcnJheS5pc0FycmF5KGVudC5pdGVtcykpIHtcbiAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgZW50Lml0ZW1zKSB7XG4gICAgICBsaW5lcy5wdXNoKGAtICR7cmVwbGFjZTVlVGFncyhpdGVtKX1gKTtcbiAgICB9XG4gICAgY29udGludWU7XG4gIH1cbiAgICAgIC8vIFx1MjUwMFx1MjUwMFx1MjUwMCBpbnNpZGUgeW91ciBmb3IgKGNvbnN0IGVudCBvZiBlbnRyaWVzKSBsb29wIFx1MjUwMFx1MjUwMFx1MjUwMFxuICAgICAgaWYgKGlzVHlwZWRFbnRyeShlbnQpICYmIGVudC50eXBlID09PSBcIm9wdGlvbnNcIikge1xuICBpZiAoZW50LmNvdW50KSB7XG4gICAgbGluZXMucHVzaChcIlwiKTtcbiAgICBsaW5lcy5wdXNoKGAqKkNob29zZSAke2VudC5jb3VudH0gb2YgdGhlIGZvbGxvd2luZyBvcHRpb25zOioqYCk7XG4gICAgbGluZXMucHVzaChcIlwiKTtcbiAgfVxuXG4gIGZvciAoY29uc3Qgb3B0UmVmIG9mIEFycmF5LmlzQXJyYXkoZW50LmVudHJpZXMpID8gZW50LmVudHJpZXMgOiBbZW50LmVudHJpZXNdKSB7XG4gICAgaWYgKG9wdFJlZi50eXBlID09PSBcInJlZk9wdGlvbmFsZmVhdHVyZVwiKSB7XG4gICAgICBjb25zdCBbb3B0TmFtZSwgb3B0U3JjXSA9IG9wdFJlZi5vcHRpb25hbGZlYXR1cmUuc3BsaXQoXCJ8XCIpO1xuICAgICAgY29uc3QgZmVhdERlZiA9IG9wdGlvbmFsRmVhdHVyZXMuZmluZChcbiAgICAgICAgZiA9PiBmLm5hbWUgPT09IG9wdE5hbWUgJiYgKCFvcHRTcmMgfHwgZi5zb3VyY2UgPT09IG9wdFNyYylcbiAgICAgICk7XG5cbiAgICAgIGlmIChmZWF0RGVmKSB7XG4gICAgICAgIC8vIGxvb3AgdGhyb3VnaCBlYWNoIGxpbmUgaW4gdGhlIGZlYXR1cmVcdTIwMTlzIGVudHJpZXNbXVxuICAgICAgICBmZWF0RGVmLmVudHJpZXMuZm9yRWFjaCgoc3ViRW50cnk6IGFueSwgaWR4OiBhbnkpID0+IHtcbiAgICAgICAgICAvLyByZW5kZXIgdGV4dFxuICAgICAgICAgIGNvbnN0IHRleHQgPSB0eXBlb2Ygc3ViRW50cnkgPT09IFwic3RyaW5nXCJcbiAgICAgICAgICAgID8gcmVwbGFjZTVlVGFncyhzdWJFbnRyeSlcbiAgICAgICAgICAgIDogZm9ybWF0RW50cnkoc3ViRW50cnkpO1xuXG4gICAgICAgICAgaWYgKGlkeCA9PT0gMCkge1xuICAgICAgICAgICAgLy8gZmlyc3QgbGluZTogYm9sZGVkIG5hbWUgKyBkZXNjcmlwdGlvblxuICAgICAgICAgICAgbGluZXMucHVzaChgLSAqKiR7ZmVhdERlZi5uYW1lfToqKiAke3RleHR9YCk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIHN1YnNlcXVlbnQgbGluZXM6IG5lc3RlZCBidWxsZXRcbiAgICAgICAgICAgIGxpbmVzLnB1c2goYCAgLSAke3RleHR9YCk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgbGluZXMucHVzaChcIlwiKTsgLy8gYmxhbmsgbGluZSBhZnRlciBlYWNoIGZlYXR1cmUgYmxvY2tcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIGZhbGxiYWNrIGlmIG5vdCBmb3VuZFxuICAgICAgICBsaW5lcy5wdXNoKGAqKiR7b3B0TmFtZX06KipgKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgLy8gbm9uXHUyMDEwcmVmT3B0aW9uYWxmZWF0dXJlIGZhbGxiYWNrXG4gICAgICBjb25zdCB0eHQgPSBmb3JtYXRFbnRyeShvcHRSZWYpO1xuICAgICAgaWYgKHR4dCkgbGluZXMucHVzaChgLSAke3R4dH1gKTtcbiAgICB9XG4gIH1cblxuICBjb250aW51ZTtcbn1cblxuXG4gICAgICAvLyAzKSBTdGFuZGFsb25lIHJlZk9wdGlvbmFsZmVhdHVyZVxuICAgICAgaWYgKGlzVHlwZWRFbnRyeShlbnQpICYmIGVudC50eXBlID09PSBcInJlZk9wdGlvbmFsZmVhdHVyZVwiKSB7XG4gICAgICAgIGNvbnN0IFtuYW1lXSA9IGVudC5vcHRpb25hbGZlYXR1cmUuc3BsaXQoXCJ8XCIpO1xuICAgICAgICBsaW5lcy5wdXNoKGAtIFtbJHtuYW1lfXwke25hbWV9XV1gKTtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIC8vIDQpIE5lc3RlZCBcdTIwMUNlbnRyaWVzXHUyMDFEIGJsb2NrIHdpdGggaXRzIG93biBoZWFkaW5nXG4gICAgICBpZiAoaXNUeXBlZEVudHJ5KGVudCkgJiYgZW50LnR5cGUgPT09IFwiZW50cmllc1wiICYmIGVudC5uYW1lKSB7XG4gICAgICAgIGxpbmVzLnB1c2goYCMjIyMjICR7ZW50Lm5hbWV9YCk7XG4gICAgICAgIGNvbnN0IGlubmVyID0gQXJyYXkuaXNBcnJheShlbnQuZW50cmllcykgPyBlbnQuZW50cmllcyA6IFtlbnQuZW50cmllc107XG4gICAgICAgIGZvciAoY29uc3QgZTIgb2YgaW5uZXIpIHtcbiAgICAgICAgICBsaW5lcy5wdXNoKGZvcm1hdEVudHJ5KGUyKSk7XG4gICAgICAgIH1cbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIC8vIDUpIEZhbGxiYWNrIGZvciBhbnkgb3RoZXIgb2JqZWN0IHNoYXBlXG4gICAgICBjb25zdCBmYWxsYmFjayA9IGZvcm1hdEVudHJ5KGVudCk7XG4gICAgICBpZiAoZmFsbGJhY2spIGxpbmVzLnB1c2goZmFsbGJhY2spO1xuICAgIH1cblxuICAgIC8vIEJsYW5rIGxpbmUgYWZ0ZXIgZWFjaCBmZWF0dXJlXG4gICAgbGluZXMucHVzaChgYCk7XG4gIH0gXG5cbiAgLy8gRGl2aWRlciBiZXR3ZWVuIGxldmVsc1xuICBsaW5lcy5wdXNoKGAtLS1gKTtcbn1cblxuXG5cbiAgLy8gc3RpdGNoLCByZXBsYWNlIHRhZ3MsIHJldHVyblxuICBsZXQgY29udGVudCA9IGAtLS1cXG4ke3lhbWx9XFxuLS0tXFxuXFxuJHtsaW5lcy5qb2luKFwiXFxuXCIpfWA7XG4gIC8vIGNvbW1lbnQgdGhpcyBvdXQgd2hpbGUgZGVidWdnaW5nOlxuICBjb250ZW50ID0gcmVwbGFjZTVlVGFncyhjb250ZW50KTtcblxuICBjb250ZW50ID0gY29udGVudFxuICAucmVwbGFjZSgvXFxuezMsfS9nLCAnXFxuXFxuJykgICAvLyBubyBtb3JlIHRoYW4gMiBuZXdsaW5lcyBpbiBhIHJvd1xuICAucmVwbGFjZSgvXFxuICtcXG4vZywgJ1xcblxcbicpOyAgLy8gdHJpbSBibGFuayBsaW5lcyB3aXRoIHRyYWlsaW5nIHNwYWNlc1xuXG4gIHJldHVybiBbXG4gICAge1xuICAgICAgcGF0aDogYENsYXNzZXMvJHtjbGFzc05hbWV9LyR7Y2xhc3NOYW1lfS5tZGAsXG4gICAgICBjb250ZW50LFxuICAgIH0sXG4gICAgLi4uc3ViY2xhc3NGaWxlcyxcbiAgXTtcbiAgXG59XG4iLCAiLy81ZSAyMDI1IHJ1bGVzXG5cbmltcG9ydCB0eXBlIHsgUGFyc2VkTWFya2Rvd25GaWxlIH0gZnJvbSBcIi4uLy4uL3R5cGVzXCI7XG5pbXBvcnQgeyByZXBsYWNlNWVUYWdzIH0gZnJvbSBcIi4vaGVscGVycy90YWdSZXBsYWNlclwiO1xuXG4vKipcbiAqIFBhcnNlIGFjdGlvbnMuanNvbiBpbnRvIGEgc2luZ2xlIE1hcmtkb3duIG5vdGUgd2l0aCAjIyBoZWFkZXJzIGZvciBlYWNoIGFjdGlvbixcbiAqIGhhbmRsaW5nIG5lc3RlZCBlbnRyaWVzLCBpbnNldHMsIGxpc3RzLCB0YWJsZXMsIGFuZCBhZGRpbmcgc2VwYXJhdG9ycy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlQWN0aW9uc0ZpbGUoanNvbjogYW55LCBlZGl0aW9uSWQ6IHN0cmluZyk6IFBhcnNlZE1hcmtkb3duRmlsZVtdIHtcbiAgaWYgKCFBcnJheS5pc0FycmF5KGpzb24uYWN0aW9uKSkgcmV0dXJuIFtdO1xuXG4gIGNvbnN0IGxpbmVzOiBzdHJpbmdbXSA9IFtdO1xuXG4gIC8qKiBSZWN1cnNpdmVseSBlbWl0IGFueSBibG9jazogdGV4dCwgbGlzdCwgdGFibGUsIGVudHJpZXMvaW5zZXQsIG9yIGZhbGxiYWNrICovXG4gIGZ1bmN0aW9uIGVtaXRCbG9jayhibG9jazogYW55KSB7XG4gICAgaWYgKCFibG9jaykgcmV0dXJuO1xuXG4gICAgLy8gMSkgUGxhaW4gdGV4dCBwYXJhZ3JhcGhzXG4gICAgaWYgKHR5cGVvZiBibG9jayA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgZm9yIChjb25zdCBwYXJhIG9mIGJsb2NrLnNwbGl0KC9cXG57Mix9LykpIHtcbiAgICAgICAgY29uc3QgdCA9IHBhcmEudHJpbSgpO1xuICAgICAgICBpZiAodCkge1xuICAgICAgICAgIGxpbmVzLnB1c2gocmVwbGFjZTVlVGFncyh0KSk7XG4gICAgICAgICAgbGluZXMucHVzaChcIlwiKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIDIpIEJ1bGxldCBsaXN0XG4gICAgaWYgKGJsb2NrLnR5cGUgPT09IFwibGlzdFwiICYmIEFycmF5LmlzQXJyYXkoYmxvY2suaXRlbXMpKSB7XG4gICAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgYmxvY2suaXRlbXMpIHtcbiAgICAgICAgbGluZXMucHVzaChgLSAke3JlcGxhY2U1ZVRhZ3MoaXRlbSl9YCk7XG4gICAgICB9XG4gICAgICBsaW5lcy5wdXNoKFwiXCIpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIDMpIFRhYmxlXG4gICAgaWYgKGJsb2NrLnR5cGUgPT09IFwidGFibGVcIiAmJiBBcnJheS5pc0FycmF5KGJsb2NrLnJvd3MpKSB7XG4gICAgICBjb25zdCBoZWFkZXJzID0gYmxvY2suY29sTGFiZWxzIHx8IFtdO1xuICAgICAgbGluZXMucHVzaChgfCAke2hlYWRlcnMuam9pbihcIiB8IFwiKX0gfGApO1xuICAgICAgbGluZXMucHVzaChgfCAke2hlYWRlcnMubWFwKCgpID0+IFwiLS0tXCIpLmpvaW4oXCIgfCBcIil9IHxgKTtcbiAgICAgIGZvciAoY29uc3Qgcm93IG9mIGJsb2NrLnJvd3MpIHtcbiAgICAgICAgbGluZXMucHVzaChgfCAke3Jvdy5qb2luKFwiIHwgXCIpfSB8YCk7XG4gICAgICB9XG4gICAgICBsaW5lcy5wdXNoKFwiXCIpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIDQpIE5lc3RlZCBlbnRyaWVzL2luc2V0XG4gICAgaWYgKChibG9jay50eXBlID09PSBcImVudHJpZXNcIiB8fCBibG9jay50eXBlID09PSBcImluc2V0XCIpICYmIEFycmF5LmlzQXJyYXkoYmxvY2suZW50cmllcykpIHtcbiAgICAgIGlmIChibG9jay5uYW1lKSB7XG4gICAgICAgIGlmIChsaW5lc1tsaW5lcy5sZW5ndGggLSAxXSA9PT0gXCJcIikgbGluZXMucG9wKCk7XG4gICAgICAgIGxpbmVzLnB1c2goYCMjIyAke2Jsb2NrLm5hbWV9YCk7XG4gICAgICB9XG4gICAgICBmb3IgKGNvbnN0IGNoaWxkIG9mIGJsb2NrLmVudHJpZXMpIHtcbiAgICAgICAgZW1pdEJsb2NrKGNoaWxkKTtcbiAgICAgIH1cbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyA1KSBGYWxsYmFjayBmb3IgYW55IG90aGVyIG9iamVjdCBvciBhcnJheVxuICAgIGNvbnN0IHR4dCA9IEFycmF5LmlzQXJyYXkoYmxvY2spXG4gICAgICA/IGJsb2NrLmpvaW4oXCIgXCIpXG4gICAgICA6IHR5cGVvZiBibG9jayA9PT0gXCJvYmplY3RcIlxuICAgICAgPyBKU09OLnN0cmluZ2lmeShibG9jaylcbiAgICAgIDogU3RyaW5nKGJsb2NrKTtcbiAgICBsaW5lcy5wdXNoKHJlcGxhY2U1ZVRhZ3ModHh0KSk7XG4gICAgbGluZXMucHVzaChcIlwiKTtcbiAgfVxuXG4gIC8vIExvb3AgdGhyb3VnaCBlYWNoIGFjdGlvblxuICBmb3IgKGNvbnN0IGFjdGlvbiBvZiBqc29uLmFjdGlvbikge1xuICAgIGxpbmVzLnB1c2goYCMjICR7YWN0aW9uLm5hbWV9YCk7XG4gICAgZm9yIChjb25zdCBlbnRyeSBvZiBBcnJheS5pc0FycmF5KGFjdGlvbi5lbnRyaWVzKSA/IGFjdGlvbi5lbnRyaWVzIDogW2FjdGlvbi5lbnRyaWVzXSkge1xuICAgICAgZW1pdEJsb2NrKGVudHJ5KTtcbiAgICB9XG5cbiAgICAvLyBcdTIwMUNTZWUgQWxzb1x1MjAxRCBzZWN0aW9uXG4gICAgaWYgKEFycmF5LmlzQXJyYXkoYWN0aW9uLnNlZUFsc29BY3Rpb24pKSB7XG4gICAgICBsaW5lcy5wdXNoKFwiKipTZWUgQWxzbzoqKlwiKTtcbiAgICAgIGxpbmVzLnB1c2goXCJcIik7XG4gICAgICBmb3IgKGNvbnN0IHJlZiBvZiBhY3Rpb24uc2VlQWxzb0FjdGlvbikge1xuICAgICAgICBjb25zdCBbbmFtZV0gPSBTdHJpbmcocmVmKS5zcGxpdChcInxcIik7XG4gICAgICAgIGxpbmVzLnB1c2goYC0gW1ske25hbWV9XV1gKTtcbiAgICAgIH1cbiAgICAgIGxpbmVzLnB1c2goXCJcIik7XG4gICAgfVxuXG4gICAgLy8gU2VwYXJhdG9yXG4gICAgbGluZXMucHVzaChcIi0tLVwiKTtcbiAgfVxuXG4gIC8vIFJlbW92ZSBhbnkgZG91YmxlLWJsYW5rIGxpbmVzXG4gIGNvbnN0IGNsZWFuZWQgPSBsaW5lcy5yZWR1Y2U8c3RyaW5nW10+KChhY2MsIGN1cnIpID0+IHtcbiAgICBpZiAoY3VyciA9PT0gXCJcIiAmJiBhY2MubGVuZ3RoICYmIGFjY1thY2MubGVuZ3RoIC0gMV0gPT09IFwiXCIpIHJldHVybiBhY2M7XG4gICAgcmV0dXJuIGFjYy5jb25jYXQoY3Vycik7XG4gIH0sIFtdKTtcblxuICByZXR1cm4gW1xuICAgIHtcbiAgICAgIHBhdGg6IFwiUnVsZXMgYW5kIFJlZmVyZW5jZS9BY3Rpb25zLm1kXCIsXG4gICAgICBjb250ZW50OiBjbGVhbmVkLmpvaW4oXCJcXG5cIikudHJpbSgpICsgXCJcXG5cIixcbiAgICB9LFxuICBdO1xufVxuXG4vKipcbiAqIFBhcnNlIGNvbWJpbmVkIGNvbmRpdGlvbnNkaXNlYXNlcy5qc29uIGludG8gdHdvIE1hcmtkb3duIG5vdGVzOiBDb25kaXRpb25zLm1kIGFuZCBEaXNlYXNlcy5tZFxuICogYWRkaW5nIHNlcGFyYXRvcnMgYmV0d2VlbiBlbnRyaWVzLlxuICovXG5leHBvcnQgZnVuY3Rpb24gcGFyc2VDb25kaXRpb25zRGlzZWFzZXNGaWxlKGpzb246IGFueSwgZWRpdGlvbklkOiBzdHJpbmcpOiBQYXJzZWRNYXJrZG93bkZpbGVbXSB7XG4gIGNvbnN0IG91dHB1dHM6IFBhcnNlZE1hcmtkb3duRmlsZVtdID0gW107XG5cbiAgY29uc3QgcHJvY2Vzc0l0ZW1zID0gKGl0ZW1zOiBhbnlbXSwgb3V0UGF0aDogc3RyaW5nKSA9PiB7XG4gICAgY29uc3QgbGluZXM6IHN0cmluZ1tdID0gW107XG5cbiAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgaXRlbXMpIHtcbiAgICAgIC8vIFRvcFx1MjAxMGxldmVsIGhlYWRlciBmb3IgZWFjaCBjb25kaXRpb24vZGlzZWFzZVxuICAgICAgbGluZXMucHVzaChgIyMgJHtpdGVtLm5hbWV9YCk7XG5cbiAgICAgIGNvbnN0IGVudHJpZXMgPSBBcnJheS5pc0FycmF5KGl0ZW0uZW50cmllcykgPyBpdGVtLmVudHJpZXMgOiBbaXRlbS5lbnRyaWVzXTtcbiAgICAgIGZvciAoY29uc3QgZW50cnkgb2YgZW50cmllcykge1xuICAgICAgICBpZiAoIWVudHJ5KSBjb250aW51ZTtcblxuICAgICAgICAvLyAxKSBQbGFpbiB0ZXh0IHBhcmFncmFwaHNcbiAgICAgICAgaWYgKHR5cGVvZiBlbnRyeSA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgIGZvciAoY29uc3QgcGFyYSBvZiBlbnRyeS5zcGxpdCgvXFxuezIsfS8pKSB7XG4gICAgICAgICAgICBjb25zdCB0ID0gcGFyYS50cmltKCk7XG4gICAgICAgICAgICBpZiAodCkge1xuICAgICAgICAgICAgICBsaW5lcy5wdXNoKHJlcGxhY2U1ZVRhZ3ModCkpO1xuICAgICAgICAgICAgICBsaW5lcy5wdXNoKFwiXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvLyAyKSBCdWxsZXQgbGlzdHNcbiAgICAgICAgZWxzZSBpZiAoZW50cnkudHlwZSA9PT0gXCJsaXN0XCIgJiYgQXJyYXkuaXNBcnJheShlbnRyeS5pdGVtcykpIHtcbiAgICAgICAgICBmb3IgKGNvbnN0IHR4dCBvZiBlbnRyeS5pdGVtcykge1xuICAgICAgICAgICAgbGluZXMucHVzaChgLSAke3JlcGxhY2U1ZVRhZ3ModHh0KX1gKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgbGluZXMucHVzaChcIlwiKTtcbiAgICAgICAgfVxuICAgICAgICAvLyAzKSBUYWJsZXNcbiAgICAgICAgZWxzZSBpZiAoZW50cnkudHlwZSA9PT0gXCJ0YWJsZVwiICYmIEFycmF5LmlzQXJyYXkoZW50cnkucm93cykpIHtcbiAgICAgICAgICBjb25zdCBoZWFkZXJzID0gZW50cnkuY29sTGFiZWxzIHx8IFtdO1xuICAgICAgICAgIGxpbmVzLnB1c2goYHwgJHtoZWFkZXJzLmpvaW4oXCIgfCBcIil9IHxgKTtcbiAgICAgICAgICBsaW5lcy5wdXNoKGB8ICR7aGVhZGVycy5tYXAoKCkgPT4gXCItLS1cIikuam9pbihcIiB8IFwiKX0gfGApO1xuICAgICAgICAgIGZvciAoY29uc3Qgcm93IG9mIGVudHJ5LnJvd3MpIHtcbiAgICAgICAgICAgIGxpbmVzLnB1c2goYHwgJHtyb3cuam9pbihcIiB8IFwiKX0gfGApO1xuICAgICAgICAgIH1cbiAgICAgICAgICBsaW5lcy5wdXNoKFwiXCIpO1xuICAgICAgICB9XG4gICAgICAgIC8vIDQpIE5lc3RlZCBcImVudHJpZXNcIiBibG9ja3NcbiAgICAgICAgZWxzZSBpZiAoZW50cnkudHlwZSA9PT0gXCJlbnRyaWVzXCIgJiYgQXJyYXkuaXNBcnJheShlbnRyeS5lbnRyaWVzKSkge1xuICAgICAgICAgIC8vIElmIHRoaXMgYmxvY2sgaGFzIGl0cyBvd24gbmFtZSwgZW1pdCBpdFxuICAgICAgICAgIGlmIChlbnRyeS5uYW1lKSB7XG4gICAgICAgICAgICBsaW5lcy5wdXNoKGAjIyMgJHtlbnRyeS5uYW1lfWApO1xuICAgICAgICAgICAgZm9yIChjb25zdCBzdWIgb2YgZW50cnkuZW50cmllcykge1xuICAgICAgICAgICAgICAvLyBOYW1lZCBzdWJcdTIwMTBibG9jayAoZS5nLiBcIkNhbid0IFNlZVwiKVxuICAgICAgICAgICAgICBpZiAoc3ViLnR5cGUgPT09IFwiZW50cmllc1wiICYmIHN1Yi5uYW1lICYmIEFycmF5LmlzQXJyYXkoc3ViLmVudHJpZXMpKSB7XG4gICAgICAgICAgICAgICAgaWYgKGxpbmVzW2xpbmVzLmxlbmd0aCAtIDFdID09PSBcIlwiKSBsaW5lcy5wb3AoKTtcbiAgICAgICAgICAgICAgICBsaW5lcy5wdXNoKGAjIyMjICR7c3ViLm5hbWV9YCk7XG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCB0eHRFbnRyeSBvZiBzdWIuZW50cmllcykge1xuICAgICAgICAgICAgICAgICAgY29uc3QgdGV4dCA9IHR5cGVvZiB0eHRFbnRyeSA9PT0gXCJzdHJpbmdcIlxuICAgICAgICAgICAgICAgICAgICA/IHJlcGxhY2U1ZVRhZ3ModHh0RW50cnkpXG4gICAgICAgICAgICAgICAgICAgIDogcmVwbGFjZTVlVGFncyhTdHJpbmcodHh0RW50cnkpKTtcbiAgICAgICAgICAgICAgICAgIGxpbmVzLnB1c2godGV4dCk7XG4gICAgICAgICAgICAgICAgICBsaW5lcy5wdXNoKFwiXCIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAvLyBQbGFpblx1MjAxMHRleHQgc3ViXHUyMDEwZW50cnlcbiAgICAgICAgICAgICAgZWxzZSBpZiAodHlwZW9mIHN1YiA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgICAgIGxpbmVzLnB1c2gocmVwbGFjZTVlVGFncyhzdWIpKTtcbiAgICAgICAgICAgICAgICBsaW5lcy5wdXNoKFwiXCIpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIFVubmFtZWQgd3JhcHBlcjoganVzdCBmbGF0dGVuIGl0cyBjaGlsZHJlblxuICAgICAgICAgICAgZm9yIChjb25zdCBzdWIgb2YgZW50cnkuZW50cmllcykge1xuICAgICAgICAgICAgICBpZiAoc3ViLnR5cGUgPT09IFwiZW50cmllc1wiICYmIHN1Yi5uYW1lICYmIEFycmF5LmlzQXJyYXkoc3ViLmVudHJpZXMpKSB7XG4gICAgICAgICAgICAgICAgaWYgKGxpbmVzW2xpbmVzLmxlbmd0aCAtIDFdID09PSBcIlwiKSBsaW5lcy5wb3AoKTtcbiAgICAgICAgICAgICAgICBsaW5lcy5wdXNoKGAjIyMgJHtzdWIubmFtZX1gKTtcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IHR4dEVudHJ5IG9mIHN1Yi5lbnRyaWVzKSB7XG4gICAgICAgICAgICAgICAgICBjb25zdCB0ZXh0ID0gdHlwZW9mIHR4dEVudHJ5ID09PSBcInN0cmluZ1wiXG4gICAgICAgICAgICAgICAgICAgID8gcmVwbGFjZTVlVGFncyh0eHRFbnRyeSlcbiAgICAgICAgICAgICAgICAgICAgOiByZXBsYWNlNWVUYWdzKFN0cmluZyh0eHRFbnRyeSkpO1xuICAgICAgICAgICAgICAgICAgbGluZXMucHVzaCh0ZXh0KTtcbiAgICAgICAgICAgICAgICAgIGxpbmVzLnB1c2goXCJcIik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiBzdWIgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgICAgICBsaW5lcy5wdXNoKHJlcGxhY2U1ZVRhZ3Moc3ViKSk7XG4gICAgICAgICAgICAgICAgbGluZXMucHVzaChcIlwiKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvLyA1KSBBbnl0aGluZyBlbHNlIChmYWxsYmFjaylcbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgY29uc3QgdHh0ID0gQXJyYXkuaXNBcnJheShlbnRyeSlcbiAgICAgICAgICAgID8gZW50cnkuam9pbihcIiBcIilcbiAgICAgICAgICAgIDogdHlwZW9mIGVudHJ5ID09PSBcIm9iamVjdFwiXG4gICAgICAgICAgICAgID8gSlNPTi5zdHJpbmdpZnkoZW50cnkpXG4gICAgICAgICAgICAgIDogU3RyaW5nKGVudHJ5KTtcbiAgICAgICAgICBsaW5lcy5wdXNoKHJlcGxhY2U1ZVRhZ3ModHh0KSk7XG4gICAgICAgICAgbGluZXMucHVzaChcIlwiKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBTZXBhcmF0b3IgYmV0d2VlbiBlbnRyaWVzXG4gICAgICBsaW5lcy5wdXNoKFwiLS0tXCIpO1xuICAgIH1cblxuICAgIC8vIENsZWFuIHVwIGFueSBkb3VibGVcdTIwMTBibGFuayBsaW5lc1xuICAgIGNvbnN0IGNsZWFuZWQgPSBsaW5lcy5yZWR1Y2U8c3RyaW5nW10+KChhY2MsIGN1cnIpID0+IHtcbiAgICAgIGlmIChjdXJyID09PSBcIlwiICYmIGFjYy5sZW5ndGggJiYgYWNjW2FjYy5sZW5ndGggLSAxXSA9PT0gXCJcIikgcmV0dXJuIGFjYztcbiAgICAgIHJldHVybiBhY2MuY29uY2F0KGN1cnIpO1xuICAgIH0sIFtdKTtcblxuICAgIG91dHB1dHMucHVzaCh7XG4gICAgICBwYXRoOiBvdXRQYXRoLFxuICAgICAgY29udGVudDogY2xlYW5lZC5qb2luKFwiXFxuXCIpLnRyaW0oKSArIFwiXFxuXCIsXG4gICAgfSk7XG4gIH07XG5cbiAgcHJvY2Vzc0l0ZW1zKGpzb24uY29uZGl0aW9uIHx8IFtdLCAgIFwiUnVsZXMgYW5kIFJlZmVyZW5jZS9Db25kaXRpb25zLm1kXCIpO1xuICBwcm9jZXNzSXRlbXMoanNvbi5kaXNlYXNlICAgfHwgW10sICAgXCJSdWxlcyBhbmQgUmVmZXJlbmNlL0Rpc2Vhc2VzLm1kXCIpO1xuICByZXR1cm4gb3V0cHV0cztcbn1cblxuLyoqXG4gKiBQYXJzZSBzZW5zZXMuanNvbiBpbnRvIGEgc2luZ2xlIE1hcmtkb3duIG5vdGUgd2l0aCAjIyBoZWFkZXJzIGZvciBlYWNoIHNlbnNlLFxuICogaGFuZGxpbmcgbGlzdHMsIHRhYmxlcywgbmVzdGVkIGVudHJpZXMvaW5zZXRzLCBhbmQgc2VwYXJhdG9ycy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlU2Vuc2VzRmlsZShqc29uOiBhbnksIGVkaXRpb25JZDogc3RyaW5nKTogUGFyc2VkTWFya2Rvd25GaWxlW10ge1xuICBjb25zdCBpdGVtcyA9IEFycmF5LmlzQXJyYXkoanNvbi5zZW5zZSlcbiAgICA/IGpzb24uc2Vuc2VcbiAgICA6IEFycmF5LmlzQXJyYXkoanNvbi5zZW5zZXMpXG4gICAgPyBqc29uLnNlbnNlc1xuICAgIDogW107XG4gIGlmICghaXRlbXMubGVuZ3RoKSByZXR1cm4gW107XG5cbiAgY29uc3QgbGluZXM6IHN0cmluZ1tdID0gW107XG5cbiAgZnVuY3Rpb24gZW1pdEJsb2NrKGJsb2NrOiBhbnkpIHtcbiAgICBpZiAoIWJsb2NrKSByZXR1cm47XG5cbiAgICAvLyAxKSBQbGFpblx1MjAxMHRleHQgcGFyYWdyYXBoKHMpXG4gICAgaWYgKHR5cGVvZiBibG9jayA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgZm9yIChjb25zdCBwYXJhIG9mIGJsb2NrLnNwbGl0KC9cXG57Mix9LykpIHtcbiAgICAgICAgY29uc3QgdCA9IHBhcmEudHJpbSgpO1xuICAgICAgICBpZiAodCkge1xuICAgICAgICAgIGxpbmVzLnB1c2gocmVwbGFjZTVlVGFncyh0KSk7XG4gICAgICAgICAgbGluZXMucHVzaChcIlwiKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIDIpIEJ1bGxldCBsaXN0IChoYW5kbGVzIGJvdGggc3RyaW5nIGl0ZW1zIGFuZCBvYmplY3QgaXRlbXMpXG4gICAgaWYgKGJsb2NrLnR5cGUgPT09IFwibGlzdFwiICYmIEFycmF5LmlzQXJyYXkoYmxvY2suaXRlbXMpKSB7XG4gICAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgYmxvY2suaXRlbXMpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBpdGVtID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgbGluZXMucHVzaChgLSAke3JlcGxhY2U1ZVRhZ3MoaXRlbSl9YCk7XG4gICAgICAgICAgbGluZXMucHVzaChcIlwiKTtcbiAgICAgICAgfSBlbHNlIGlmIChpdGVtICYmIHR5cGVvZiBpdGVtID09PSBcIm9iamVjdFwiKSB7XG4gICAgICAgICAgLy8gb2JqZWN0IGl0ZW1zIHdpdGggbmFtZStlbnRyaWVzXG4gICAgICAgICAgaWYgKGl0ZW0ubmFtZSAmJiBBcnJheS5pc0FycmF5KGl0ZW0uZW50cmllcykpIHtcbiAgICAgICAgICAgIGxpbmVzLnB1c2goYC0gKioke2l0ZW0ubmFtZX0qKmApO1xuICAgICAgICAgICAgZm9yIChjb25zdCBlbnQgb2YgaXRlbS5lbnRyaWVzKSB7XG4gICAgICAgICAgICAgIGxpbmVzLnB1c2goYCAgLSAke3JlcGxhY2U1ZVRhZ3MoZW50KX1gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxpbmVzLnB1c2goXCJcIik7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIGZhbGxiYWNrOiBzdHJpbmdpZnlcbiAgICAgICAgICAgIGxpbmVzLnB1c2goYC0gJHtyZXBsYWNlNWVUYWdzKEpTT04uc3RyaW5naWZ5KGl0ZW0pKX1gKTtcbiAgICAgICAgICAgIGxpbmVzLnB1c2goXCJcIik7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gMykgVGFibGVcbiAgICBpZiAoYmxvY2sudHlwZSA9PT0gXCJ0YWJsZVwiICYmIEFycmF5LmlzQXJyYXkoYmxvY2sucm93cykpIHtcbiAgICAgIGNvbnN0IGhlYWRlcnMgPSBibG9jay5jb2xMYWJlbHMgfHwgW107XG4gICAgICBsaW5lcy5wdXNoKGB8ICR7aGVhZGVycy5qb2luKFwiIHwgXCIpfSB8YCk7XG4gICAgICBsaW5lcy5wdXNoKGB8ICR7aGVhZGVycy5tYXAoKCkgPT4gXCItLS1cIikuam9pbihcIiB8IFwiKX0gfGApO1xuICAgICAgZm9yIChjb25zdCByb3cgb2YgYmxvY2sucm93cykge1xuICAgICAgICBsaW5lcy5wdXNoKGB8ICR7cm93LmpvaW4oXCIgfCBcIil9IHxgKTtcbiAgICAgIH1cbiAgICAgIGxpbmVzLnB1c2goXCJcIik7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gNCkgTmVzdGVkIGVudHJpZXMgLyBpbnNldHNcbiAgICBpZiAoKGJsb2NrLnR5cGUgPT09IFwiZW50cmllc1wiIHx8IGJsb2NrLnR5cGUgPT09IFwiaW5zZXRcIikgJiYgQXJyYXkuaXNBcnJheShibG9jay5lbnRyaWVzKSkge1xuICAgICAgLy8gbmFtZWQgYmxvY2sgXHUyMTkyIFwiIyMjIE5hbWVcIlxuICAgICAgaWYgKGJsb2NrLm5hbWUpIHtcbiAgICAgICAgaWYgKGxpbmVzW2xpbmVzLmxlbmd0aCAtIDFdID09PSBcIlwiKSBsaW5lcy5wb3AoKTtcbiAgICAgICAgbGluZXMucHVzaChgIyMjICR7YmxvY2submFtZX1gKTtcbiAgICAgIH1cbiAgICAgIC8vIHJlY3Vyc2UgaW50byBjaGlsZHJlblxuICAgICAgZm9yIChjb25zdCBjaGlsZCBvZiBibG9jay5lbnRyaWVzKSB7XG4gICAgICAgIGVtaXRCbG9jayhjaGlsZCk7XG4gICAgICB9XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gNSkgRmFsbGJhY2sgZm9yIGFycmF5cyBvciBvdGhlciBvYmplY3RzXG4gICAgY29uc3QgdHh0ID1cbiAgICAgIEFycmF5LmlzQXJyYXkoYmxvY2spXG4gICAgICAgID8gYmxvY2suam9pbihcIiBcIilcbiAgICAgICAgOiB0eXBlb2YgYmxvY2sgPT09IFwib2JqZWN0XCJcbiAgICAgICAgPyBKU09OLnN0cmluZ2lmeShibG9jaylcbiAgICAgICAgOiBTdHJpbmcoYmxvY2spO1xuICAgIGxpbmVzLnB1c2gocmVwbGFjZTVlVGFncyh0eHQpKTtcbiAgICBsaW5lcy5wdXNoKFwiXCIpO1xuICB9XG5cbiAgLy8gQnVpbGQgb3V0IGVhY2ggc2Vuc2VcbiAgZm9yIChjb25zdCBzZW5zZSBvZiBpdGVtcykge1xuICAgIGxpbmVzLnB1c2goYCMjICR7c2Vuc2UubmFtZX1gKTtcbiAgICBmb3IgKGNvbnN0IGVudHJ5IG9mIEFycmF5LmlzQXJyYXkoc2Vuc2UuZW50cmllcykgPyBzZW5zZS5lbnRyaWVzIDogW3NlbnNlLmVudHJpZXNdKSB7XG4gICAgICBlbWl0QmxvY2soZW50cnkpO1xuICAgIH1cbiAgICBsaW5lcy5wdXNoKFwiLS0tXCIpO1xuICB9XG5cbiAgLy8gUmVtb3ZlIGFueSBkb3VibGVcdTIwMTBibGFuayBsaW5lc1xuICBjb25zdCBjbGVhbmVkID0gbGluZXMucmVkdWNlPHN0cmluZ1tdPigoYWNjLCBjdXJyKSA9PiB7XG4gICAgaWYgKGN1cnIgPT09IFwiXCIgJiYgYWNjLmxlbmd0aCAmJiBhY2NbYWNjLmxlbmd0aCAtIDFdID09PSBcIlwiKSByZXR1cm4gYWNjO1xuICAgIHJldHVybiBhY2MuY29uY2F0KGN1cnIpO1xuICB9LCBbXSk7XG5cbiAgcmV0dXJuIFtcbiAgICB7XG4gICAgICBwYXRoOiBcIlJ1bGVzIGFuZCBSZWZlcmVuY2UvU2Vuc2VzLm1kXCIsXG4gICAgICBjb250ZW50OiBjbGVhbmVkLmpvaW4oXCJcXG5cIikudHJpbSgpICsgXCJcXG5cIixcbiAgICB9LFxuICBdO1xufVxuXG4vKipcbiAqIFBhcnNlIHNraWxscy5qc29uIGludG8gYSBzaW5nbGUgTWFya2Rvd24gbm90ZSB3aXRoICMjIGhlYWRlcnMgZm9yIGVhY2ggc2tpbGwsXG4gKiBwcmVwZW5kaW5nIGFuIGFiaWxpdHkgbGluZSwgaGFuZGxpbmcgcGFyYWdyYXBocywgYW5kIHNlcGFyYXRvcnMuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBwYXJzZVNraWxsc0ZpbGUoanNvbjogYW55LCBlZGl0aW9uSWQ6IHN0cmluZyk6IFBhcnNlZE1hcmtkb3duRmlsZVtdIHtcbiAgY29uc3QgaXRlbXMgPSBBcnJheS5pc0FycmF5KGpzb24uc2tpbGwpXG4gICAgPyBqc29uLnNraWxsXG4gICAgOiBBcnJheS5pc0FycmF5KGpzb24uc2tpbGxzKVxuICAgID8ganNvbi5za2lsbHNcbiAgICA6IFtdO1xuICBpZiAoIWl0ZW1zLmxlbmd0aCkgcmV0dXJuIFtdO1xuXG4gIGNvbnN0IGxpbmVzOiBzdHJpbmdbXSA9IFtdO1xuICBmb3IgKGNvbnN0IHNraWxsIG9mIGl0ZW1zKSB7XG4gICAgbGluZXMucHVzaChgIyMgJHtza2lsbC5uYW1lfWApO1xuICAgIGlmIChza2lsbC5hYmlsaXR5KSB7XG4gICAgICBsaW5lcy5wdXNoKGAqQWJpbGl0eTogJHtza2lsbC5hYmlsaXR5fSpgKTtcbiAgICAgIGxpbmVzLnB1c2goXCJcIik7XG4gICAgfVxuICAgIGNvbnN0IGVudHJpZXMgPSBBcnJheS5pc0FycmF5KHNraWxsLmVudHJpZXMpID8gc2tpbGwuZW50cmllcyA6IFtza2lsbC5lbnRyaWVzXTtcbiAgICBmb3IgKGNvbnN0IGVudHJ5IG9mIGVudHJpZXMpIHtcbiAgICAgIGlmICghZW50cnkpIGNvbnRpbnVlO1xuICAgICAgaWYgKHR5cGVvZiBlbnRyeSA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICBjb25zdCBwYXJhcyA9IGVudHJ5LnNwbGl0KC9cXG57Mix9Lyk7XG4gICAgICAgIGZvciAoY29uc3QgcGFyYSBvZiBwYXJhcykge1xuICAgICAgICAgIGNvbnN0IHQgPSBwYXJhLnRyaW0oKTtcbiAgICAgICAgICBpZiAodCkge1xuICAgICAgICAgICAgbGluZXMucHVzaChyZXBsYWNlNWVUYWdzKHQpKTtcbiAgICAgICAgICAgIGxpbmVzLnB1c2goXCJcIik7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKGVudHJ5LnR5cGUgPT09IFwibGlzdFwiICYmIEFycmF5LmlzQXJyYXkoZW50cnkuaXRlbXMpKSB7XG4gICAgICAgIGZvciAoY29uc3QgaXRlbSBvZiBlbnRyeS5pdGVtcykge1xuICAgICAgICAgIGxpbmVzLnB1c2goYC0gJHtyZXBsYWNlNWVUYWdzKGl0ZW0pfWApO1xuICAgICAgICB9XG4gICAgICAgIGxpbmVzLnB1c2goXCJcIik7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zdCB0eHQgPSBBcnJheS5pc0FycmF5KGVudHJ5KSA/IGVudHJ5LmpvaW4oXCIgXCIpIDogU3RyaW5nKGVudHJ5KTtcbiAgICAgICAgbGluZXMucHVzaChyZXBsYWNlNWVUYWdzKHR4dCkpO1xuICAgICAgICBsaW5lcy5wdXNoKFwiXCIpO1xuICAgICAgfVxuICAgIH1cbiAgICAvLyBTZXBhcmF0b3IgYmV0d2VlbiBza2lsbHNcbiAgICBsaW5lcy5wdXNoKFwiLS0tXCIpO1xuICB9XG4gIGNvbnN0IGNsZWFuZWQgPSBsaW5lcy5yZWR1Y2U8c3RyaW5nW10+KChhY2MsIGN1cnIpID0+IHtcbiAgICBpZiAoY3VyciA9PT0gXCJcIiAmJiBhY2MubGVuZ3RoICYmIGFjY1thY2MubGVuZ3RoIC0gMV0gPT09IFwiXCIpIHJldHVybiBhY2M7XG4gICAgcmV0dXJuIGFjYy5jb25jYXQoY3Vycik7XG4gIH0sIFtdKTtcblxuICByZXR1cm4gW1xuICAgIHtcbiAgICAgIHBhdGg6IFwiUnVsZXMgYW5kIFJlZmVyZW5jZS9Ta2lsbHMubWRcIixcbiAgICAgIGNvbnRlbnQ6IGNsZWFuZWQuam9pbihcIlxcblwiKS50cmltKCkgKyBcIlxcblwiLFxuICAgIH0sXG4gIF07XG59XG4iLCAiaW1wb3J0IHR5cGUgeyBQYXJzZWRNYXJrZG93bkZpbGUgfSBmcm9tIFwiLi4vLi4vdHlwZXNcIjtcbmltcG9ydCB7IHJlcGxhY2U1ZVRhZ3MgfSBmcm9tIFwiLi9oZWxwZXJzL3RhZ1JlcGxhY2VyXCI7XG5pbXBvcnQgeyBidWlsZEZNLCBzZXJpYWxpemVGcm9udG1hdHRlciwgRkVBVFNfTUVUQV9ERUZTIH0gZnJvbSBcIi4vaGVscGVycy9mcm9udG1hdHRlclwiO1xuXG4vKipcbiAqIFBhcnNlIGZlYXRzLmpzb24gaW50byBvbmUgTWFya2Rvd24gZmlsZSBwZXIgZmVhdCB1bmRlciBQbGF5ZXIgQnVpbGQvRmVhdHMsXG4gKiBpbmNsdWRpbmcgZnJvbnRtYXR0ZXIsIGNsZWFuZWQgcHJlcmVxdWlzaXRlcywgYW5kIGZvcm1hdHRlZCBlbnRyaWVzLlxuICovXG5leHBvcnQgZnVuY3Rpb24gcGFyc2VGZWF0c0ZpbGUoanNvbjogYW55LCBlZGl0aW9uSWQ6IHN0cmluZyk6IFBhcnNlZE1hcmtkb3duRmlsZVtdIHtcbiAgY29uc3QgZmVhdHM6IGFueVtdID0gQXJyYXkuaXNBcnJheShqc29uLmZlYXQpXG4gICAgPyBqc29uLmZlYXRcbiAgICA6IEFycmF5LmlzQXJyYXkoanNvbi5mZWF0cylcbiAgICA/IGpzb24uZmVhdHNcbiAgICA6IFtdO1xuXG4gIHJldHVybiBmZWF0cy5tYXAoKGZlYXQ6IGFueSkgPT4ge1xuICAgIGNvbnN0IGxpbmVzOiBzdHJpbmdbXSA9IFtdO1xuXG4gICAgLy8gXHUyNTAwXHUyNTAwXHUyNTAwIEZyb250bWF0dGVyIFx1MjUwMFx1MjUwMFx1MjUwMFxuICAgIGNvbnN0IGZtID0gYnVpbGRGTSh7IC4uLmZlYXQsIF9lZGl0aW9uSWQ6IGVkaXRpb25JZCB9LCBGRUFUU19NRVRBX0RFRlMpO1xuICAgIGxpbmVzLnB1c2goXCItLS1cIik7XG4gICAgbGluZXMucHVzaChzZXJpYWxpemVGcm9udG1hdHRlcihmbSwgRkVBVFNfTUVUQV9ERUZTKSk7XG4gICAgbGluZXMucHVzaChcIi0tLVwiLCBcIlwiKTtcblxuICAgIC8vIFx1MjUwMFx1MjUwMFx1MjUwMCBUaXRsZSBcdTI1MDBcdTI1MDBcdTI1MDBcbiAgICBsaW5lcy5wdXNoKGAjICR7ZmVhdC5uYW1lfWAsIFwiXCIpO1xuXG4gICAgLy8gXHUyNTAwXHUyNTAwXHUyNTAwIFByZXJlcXVpc2l0ZXMgXHUyNTAwXHUyNTAwXHUyNTAwXG4gICAgY29uc3QgcHJlcmVxczogc3RyaW5nW10gPSBbXTtcbiAgICBpZiAoQXJyYXkuaXNBcnJheShmZWF0LnByZXJlcXVpc2l0ZSkpIHtcbiAgICAgIGZlYXQucHJlcmVxdWlzaXRlLmZvckVhY2goKHByOiBhbnkpID0+IHtcbiAgICAgICAgaWYgKHByLmxldmVsKSBwcmVyZXFzLnB1c2goYExldmVsICR7cHIubGV2ZWx9YCk7XG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KHByLmZlYXQpKSB7XG4gICAgICAgICAgcHIuZmVhdC5mb3JFYWNoKChmOiBzdHJpbmcpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IG5hbWUgPSBmLnNwbGl0KFwifFwiKVswXS5yZXBsYWNlKC9cXGJcXHcvZywgYyA9PiBjLnRvVXBwZXJDYXNlKCkpO1xuICAgICAgICAgICAgcHJlcmVxcy5wdXNoKGBQcmVyZXF1aXNpdGU6IFtbJHtuYW1lfV1dYCk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgICBpZiAoZmVhdC5zcGVsbGNhc3RpbmdQcmVwYXJlZCkgcHJlcmVxcy5wdXNoKGBQcmVyZXF1aXNpdGU6IFNwZWxsY2FzdGVyYCk7XG4gICAgaWYgKEFycmF5LmlzQXJyYXkoZmVhdC50b29sUHJvZmljaWVuY2llcykpIHtcbiAgICAgIGZlYXQudG9vbFByb2ZpY2llbmNpZXMuZm9yRWFjaCgodHA6IGFueSkgPT4ge1xuICAgICAgICBPYmplY3QuZW50cmllcyh0cCkuZm9yRWFjaCgoW2tleV0pID0+IHtcbiAgICAgICAgICBpZiAoa2V5ID09PSAnYW55QXJ0aXNhbnNUb29sJykge1xuICAgICAgICAgICAgcHJlcmVxcy5wdXNoKGBQcmVyZXF1aXNpdGU6IFByb2ZpY2llbnQgd2l0aCBhbiBhcnRpc2FuJ3MgdG9vbGApO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBwcmVyZXFzLnB1c2goYFByZXJlcXVpc2l0ZTogUHJvZmljaWVudCB3aXRoICR7a2V5LnJlcGxhY2UoLyhbQS1aXSkvZywnICQxJykudHJpbSgpfWApO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9XG4gICAgaWYgKEFycmF5LmlzQXJyYXkoZmVhdC5hcm1vclByb2ZpY2llbmNpZXMpKSB7XG4gICAgICBmZWF0LmFybW9yUHJvZmljaWVuY2llcy5mb3JFYWNoKChhcm06IGFueSkgPT4ge1xuICAgICAgICBjb25zdCBhcm1TdHIgPSB0eXBlb2YgYXJtID09PSAnc3RyaW5nJyA/IGFybSA6IEpTT04uc3RyaW5naWZ5KGFybSk7XG4gICAgICAgIHByZXJlcXMucHVzaChgUHJlcmVxdWlzaXRlOiBQcm9maWNpZW50IHdpdGggJHthcm1TdHIucmVwbGFjZSgvKFtBLVpdKS9nLCcgJDEnKS50cmltKCl9YCk7XG4gICAgICB9KTtcbiAgICB9XG4gICAgaWYgKGZlYXQucmFjZSkgcHJlcmVxcy5wdXNoKGBQcmVyZXF1aXNpdGU6ICR7ZmVhdC5yYWNlfWApO1xuXG4gICAgaWYgKHByZXJlcXMubGVuZ3RoKSB7XG4gICAgICBsaW5lcy5wdXNoKFwiKipQcmVyZXF1aXNpdGVzKipcIik7XG4gICAgICBwcmVyZXFzLmZvckVhY2gocCA9PiBsaW5lcy5wdXNoKGAtICR7cH1gKSk7XG4gICAgICBsaW5lcy5wdXNoKFwiXCIpO1xuICAgIH1cblxuICAgIC8vIFx1MjUwMFx1MjUwMFx1MjUwMCBFbnRyaWVzIHJlbmRlcmluZyBcdTI1MDBcdTI1MDBcdTI1MDBcbiAgICBjb25zdCBlbnRyaWVzID0gQXJyYXkuaXNBcnJheShmZWF0LmVudHJpZXMpID8gZmVhdC5lbnRyaWVzIDogW2ZlYXQuZW50cmllc107XG4gICAgZW50cmllcy5mb3JFYWNoKChlbnRyeTogYW55KSA9PiB7XG4gICAgICBpZiAoIWVudHJ5KSByZXR1cm47XG5cbiAgICAgIC8vIFBsYWluIHRleHRcbiAgICAgIGlmICh0eXBlb2YgZW50cnkgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgIGVudHJ5LnNwbGl0KC9cXG57Mix9LykuZm9yRWFjaChwID0+IHtcbiAgICAgICAgICBjb25zdCB0ID0gcC50cmltKCk7XG4gICAgICAgICAgaWYgKHQpIHtcbiAgICAgICAgICAgIGxpbmVzLnB1c2gocmVwbGFjZTVlVGFncyh0KSk7XG4gICAgICAgICAgICBsaW5lcy5wdXNoKFwiXCIpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgIC8vIExpc3RcbiAgICAgIH0gZWxzZSBpZiAoZW50cnkudHlwZSA9PT0gJ2xpc3QnICYmIEFycmF5LmlzQXJyYXkoZW50cnkuaXRlbXMpKSB7XG4gICAgICAgIGVudHJ5Lml0ZW1zLmZvckVhY2goKGl0OiBhbnkpID0+IHtcbiAgICAgICAgICBpZiAodHlwZW9mIGl0ID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgbGluZXMucHVzaChgLSAke3JlcGxhY2U1ZVRhZ3MoaXQpfWApO1xuICAgICAgICAgIH0gZWxzZSBpZiAoaXQudHlwZSA9PT0gJ2l0ZW0nICYmIGl0Lm5hbWUpIHtcbiAgICAgICAgICAgIGxpbmVzLnB1c2goYC0gKioke2l0Lm5hbWV9KipgKTtcbiAgICAgICAgICAgIGNvbnN0IHN1YnMgPSBBcnJheS5pc0FycmF5KGl0LmVudHJpZXMpID8gaXQuZW50cmllcyA6IFtpdC5lbnRyaWVzXTtcbiAgICAgICAgICAgIHN1YnMuZm9yRWFjaCgoczogYW55KSA9PlxuICAgICAgICAgICAgICBsaW5lcy5wdXNoKGAgIC0gJHtyZXBsYWNlNWVUYWdzKHR5cGVvZiBzID09PSAnc3RyaW5nJyA/IHMgOiBKU09OLnN0cmluZ2lmeShzKSl9YClcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgbGluZXMucHVzaChcIlwiKTtcblxuICAgICAgLy8gSW5zZXQgYXMgaW5kZW50ZWQgYnVsbGV0XG4gICAgICB9IGVsc2UgaWYgKGVudHJ5LnR5cGUgPT09ICdpbnNldCcpIHtcbiAgICAgICAgbGluZXMucHVzaChgLSAqJHtlbnRyeS5uYW1lfSpgKTtcbiAgICAgICAgY29uc3Qgc3VicyA9IEFycmF5LmlzQXJyYXkoZW50cnkuZW50cmllcykgPyBlbnRyeS5lbnRyaWVzIDogW2VudHJ5LmVudHJpZXNdO1xuICAgICAgICBzdWJzLmZvckVhY2goKHM6IGFueSkgPT4gbGluZXMucHVzaChgICAtICR7cmVwbGFjZTVlVGFncyhzKX1gKSk7XG4gICAgICAgIGxpbmVzLnB1c2goXCJcIik7XG5cbiAgICAgIC8vIFNlY3Rpb24gb3IgZW50cmllc1xuICAgICAgfSBlbHNlIGlmICgoZW50cnkudHlwZSA9PT0gJ3NlY3Rpb24nIHx8IGVudHJ5LnR5cGUgPT09ICdlbnRyaWVzJykgJiYgQXJyYXkuaXNBcnJheShlbnRyeS5lbnRyaWVzKSkge1xuICAgICAgICBpZiAoZW50cnkubmFtZSkge1xuICAgICAgICAgIGxpbmVzLnB1c2goYCMjICR7ZW50cnkubmFtZX1gKTtcbiAgICAgICAgICBsaW5lcy5wdXNoKFwiXCIpO1xuICAgICAgICB9XG4gICAgICAgIGVudHJ5LmVudHJpZXMuZm9yRWFjaCgoczogYW55KSA9PiB7XG4gICAgICAgICAgbGluZXMucHVzaChyZXBsYWNlNWVUYWdzKHR5cGVvZiBzID09PSAnc3RyaW5nJyA/IHMgOiBKU09OLnN0cmluZ2lmeShzKSkpO1xuICAgICAgICAgIGxpbmVzLnB1c2goXCJcIik7XG4gICAgICAgIH0pO1xuXG4gICAgICAvLyBUYWJsZVxuICAgICAgfSBlbHNlIGlmIChlbnRyeS50eXBlID09PSAndGFibGUnICYmIEFycmF5LmlzQXJyYXkoZW50cnkucm93cykpIHtcbiAgICAgICAgY29uc3QgaGRyID0gZW50cnkuY29sTGFiZWxzIHx8IFtdO1xuICAgICAgICBsaW5lcy5wdXNoKGB8ICR7aGRyLmpvaW4oJyB8ICcpfSB8YCk7XG4gICAgICAgIGxpbmVzLnB1c2goYHwgJHtoZHIubWFwKCgpID0+ICctLS0nKS5qb2luKCcgfCAnKX0gfGApO1xuICAgICAgICBlbnRyeS5yb3dzLmZvckVhY2goKHJvdzogYW55W10pID0+XG4gICAgICAgICAgbGluZXMucHVzaChgfCAke3Jvdy5qb2luKCcgfCAnKX0gfGApXG4gICAgICAgICk7XG4gICAgICAgIGxpbmVzLnB1c2goXCJcIik7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICByZXR1cm4ge1xuICAgICAgcGF0aDogYFBsYXllciBCdWlsZC9GZWF0cy8ke2ZlYXQubmFtZX0ubWRgLFxuICAgICAgY29udGVudDogbGluZXMuam9pbihcIlxcblwiKS50cmltKCkgKyBcIlxcblwiLFxuICAgIH07XG4gIH0pO1xufVxuIiwgIi8vIHNyYy9wYXJzZXJzL2JhY2tncm91bmRzLnRzXG5pbXBvcnQgdHlwZSB7IFBhcnNlZE1hcmtkb3duRmlsZSB9IGZyb20gXCIuLi8uLi90eXBlc1wiO1xuaW1wb3J0IHsgcmVwbGFjZTVlVGFncyB9IGZyb20gXCIuL2hlbHBlcnMvdGFnUmVwbGFjZXJcIjtcbmltcG9ydCB7IHJlbmRlck1hcmtkb3duVGFibGUgfSBmcm9tIFwiLi9oZWxwZXJzL21hcmtkb3duVGFibGVcIjtcbmltcG9ydCB7IGJ1aWxkRk0sIHNlcmlhbGl6ZUZyb250bWF0dGVyLCBGTV9GSUVMRFMsIGZpbHRlclZhbGlkU2tpbGxzLCBCQUNLR1JPVU5EX01FVEFfREVGUyB9IGZyb20gXCIuL2hlbHBlcnMvZnJvbnRtYXR0ZXJcIjtcblxuLyoqXG4gKiBQYXJzZSBiYWNrZ3JvdW5kcy5qc29uIGludG8gb25lIE1hcmtkb3duIGZpbGUgcGVyIGJhY2tncm91bmQgdW5kZXIgUGxheWVyIEJ1aWxkL0JhY2tncm91bmRzLFxuICogZXhjbHVkaW5nIGFueSBcdTIwMUNWYXJpYW50XHUyMDI2XHUyMDFEIG9yIFx1MjAxQ0JhbGR1clx1MjAxOXMgR2F0ZVx1MjAyNlx1MjAxRCBlbnRyaWVzLlxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBwYXJzZUJhY2tncm91bmRzRmlsZShqc29uOiBhbnksIGVkaXRpb25JZDogc3RyaW5nKTogUGFyc2VkTWFya2Rvd25GaWxlW10ge1xuICAvLyBwdWxsIGluIHRoZSBhcnJheVxuICBjb25zdCByYXc6IGFueVtdID0gQXJyYXkuaXNBcnJheShqc29uLmJhY2tncm91bmQpXG4gICAgPyBqc29uLmJhY2tncm91bmRcbiAgICA6IEFycmF5LmlzQXJyYXkoanNvbi5iYWNrZ3JvdW5kcylcbiAgICA/IGpzb24uYmFja2dyb3VuZHNcbiAgICA6IFtdO1xuXG4gIC8vIGZpbHRlciBvdXQgdW53YW50ZWQgZW50cmllc1xuICBjb25zdCBiYWNrZ3JvdW5kcyA9IHJhdy5maWx0ZXIoYmcgPT4ge1xuICAgIGNvbnN0IG5tOiBzdHJpbmcgPSBiZy5uYW1lIHx8IFwiXCI7XG4gICAgcmV0dXJuICFubS5zdGFydHNXaXRoKFwiVmFyaWFudFwiKSAmJiAhbm0uaW5jbHVkZXMoXCJCYWxkdXIncyBHYXRlXCIpO1xuICB9KTtcblxuICBjb25zdCBvdXRwdXRzOiBQYXJzZWRNYXJrZG93bkZpbGVbXSA9IFtdO1xuXG4gIGJhY2tncm91bmRzLmZvckVhY2goYmcgPT4ge1xuICAgIGNvbnN0IGxpbmVzOiBzdHJpbmdbXSA9IFtdO1xuXG4vLyBcdTI1MDBcdTI1MDBcdTI1MDAgYnVpbGQgZnJvbnRtYXR0ZXIgXHUyNTAwXHUyNTAwXHUyNTAwXG5jb25zdCBmbSA9IGJ1aWxkRk0oYmcsIEJBQ0tHUk9VTkRfTUVUQV9ERUZTKTtcblxuLy8gXHUyNTAwXHUyNTAwXHUyNTAwIGNvbGxlY3Qgb25seSB0aGUgZW50cmllcyBmbGFnZ2VkIGlzRmVhdHVyZSBcdTI1MDBcdTI1MDBcdTI1MDBcbmNvbnN0IGV4dHJhVHJhaXRzOiBzdHJpbmdbXSA9IEFycmF5LmlzQXJyYXkoYmcuZW50cmllcylcbiAgPyAoYmcuZW50cmllcyBhcyBhbnlbXSlcbiAgICAgIC5maWx0ZXIoKGU6IGFueSkgPT4gZS5kYXRhPy5pc0ZlYXR1cmUgJiYgdHlwZW9mIGUubmFtZSA9PT0gXCJzdHJpbmdcIilcbiAgICAgIC5tYXAoKGU6IGFueSkgPT4ge1xuICAgICAgICBjb25zdCBuYW1lID0gZS5uYW1lLnJlcGxhY2UoL15GZWF0dXJlOlxccyovLCBcIlwiKTtcbiAgICAgICAgcmV0dXJuIGBbWyR7YmcubmFtZX0jJHtuYW1lfV1dYDtcbiAgICAgIH0pXG4gIDogW107XG5cbi8vIFx1MjUwMFx1MjUwMFx1MjUwMCBzZXJpYWxpemUgZnJvbnRtYXR0ZXIgXHUyNTAwXHUyNTAwXHUyNTAwXG5jb25zdCB5YW1sID0gc2VyaWFsaXplRnJvbnRtYXR0ZXIoZm0sIEJBQ0tHUk9VTkRfTUVUQV9ERUZTKTtcbmxpbmVzLnB1c2goXCItLS1cIiwgeWFtbCwgXCItLS1cIiwgXCJcIik7XG5cbiBcbiAgICAvLyB0aXRsZVxuICAgIGxpbmVzLnB1c2goYCMgJHtiZy5uYW1lfWAsIFwiXCIpO1xuXG4gICAgLy8gXHUyNTAwXHUyNTAwXHUyNTAwIHNraWxsIHByb2ZpY2llbmNpZXMgXHUyNTAwXHUyNTAwXHUyNTAwXG4gICAgaWYgKEFycmF5LmlzQXJyYXkoYmcuc2tpbGxQcm9maWNpZW5jaWVzKSAmJiBiZy5za2lsbFByb2ZpY2llbmNpZXMubGVuZ3RoKSB7XG4gICAgICBjb25zdCBza2lsbHM6IHN0cmluZ1tdID0gW107XG4gICAgICBiZy5za2lsbFByb2ZpY2llbmNpZXMuZm9yRWFjaCgoZW50OiBhbnkpID0+IHtcbiAgICAgICAgaWYgKHR5cGVvZiBlbnQgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICBza2lsbHMucHVzaChjYXAoZW50KSk7XG4gICAgICAgIH0gZWxzZSBpZiAoZW50LmNob29zZSAmJiBBcnJheS5pc0FycmF5KGVudC5jaG9vc2UuZnJvbSkpIHtcbiAgICAgICAgICBza2lsbHMucHVzaChgQ2hvb3NlICR7ZW50LmNob29zZS5hbW91bnR9IGZyb20gJHtlbnQuY2hvb3NlLmZyb20uam9pbihcIiwgXCIpfWApO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIE9iamVjdC5lbnRyaWVzKGVudClcbiAgICAgICAgICAgIC5maWx0ZXIoKFssIHZdKSA9PiB2ID09PSB0cnVlKVxuICAgICAgICAgICAgLmZvckVhY2goKFtrXSkgPT4gc2tpbGxzLnB1c2goY2FwKGspKSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgbGluZXMucHVzaChgKipTa2lsbCBQcm9maWNpZW5jaWVzOioqICR7c2tpbGxzLmpvaW4oXCIsIFwiKX1gLCBcIlwiKTtcbiAgICB9XG5cbiAgICAvLyBcdTI1MDBcdTI1MDBcdTI1MDAgbGFuZ3VhZ2UgcHJvZmljaWVuY2llcyBcdTI1MDBcdTI1MDBcdTI1MDBcbiAgICBpZiAoQXJyYXkuaXNBcnJheShiZy5sYW5ndWFnZVByb2ZpY2llbmNpZXMpICYmIGJnLmxhbmd1YWdlUHJvZmljaWVuY2llcy5sZW5ndGgpIHtcbiAgICAgIGNvbnN0IGxhbmdzOiBzdHJpbmdbXSA9IFtdO1xuICAgICAgYmcubGFuZ3VhZ2VQcm9maWNpZW5jaWVzLmZvckVhY2goKGVudDogYW55KSA9PiB7XG4gICAgICAgIGlmIChlbnQuYW55U3RhbmRhcmQpIHtcbiAgICAgICAgICBsYW5ncy5wdXNoKGAke2VudC5hbnlTdGFuZGFyZH0gb2YgeW91ciBjaG9pY2VgKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBPYmplY3QuZW50cmllcyhlbnQpXG4gICAgICAgICAgICAuZmlsdGVyKChbLCB2XSkgPT4gdiA9PT0gdHJ1ZSlcbiAgICAgICAgICAgIC5mb3JFYWNoKChba10pID0+IGxhbmdzLnB1c2goY2FwKGspKSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgbGluZXMucHVzaChgKipMYW5ndWFnZXM6KiogJHtsYW5ncy5qb2luKFwiLCBcIil9YCwgXCJcIik7XG4gICAgfVxuXG4gICAgLy8gXHUyNTAwXHUyNTAwXHUyNTAwIHRvb2wgcHJvZmljaWVuY2llcyBcdTI1MDBcdTI1MDBcdTI1MDBcbiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoYmcudG9vbFByb2ZpY2llbmNpZXMpICYmIGJnLnRvb2xQcm9maWNpZW5jaWVzLmxlbmd0aCkge1xuICAgICAgICBjb25zdCB0b29sczogc3RyaW5nW10gPSBbXTtcblxuICAgICAgICBiZy50b29sUHJvZmljaWVuY2llcy5mb3JFYWNoKChlbnQ6IGFueSkgPT4ge1xuICAgICAgICAgICAgLy8gXHUyMDFDQ2hvb3NlIFggZnJvbSBcdTIwMjZcdTIwMURcbiAgICAgICAgICAgIGlmIChlbnQuY2hvb3NlICYmIEFycmF5LmlzQXJyYXkoZW50LmNob29zZS5mcm9tKSkge1xuICAgICAgICAgICAgY29uc3QgbGlzdCA9IGVudC5jaG9vc2UuZnJvbS5tYXAoaHVtYW5pemUpLmpvaW4oXCIsIFwiKTtcbiAgICAgICAgICAgIHRvb2xzLnB1c2goYENob29zZSAke2VudC5jaG9vc2UuY291bnR9IGZyb20gJHtsaXN0fWApO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBwbGFpbiBzdHJpbmcgKHJhcmUgaGVyZSwgYnV0IGp1c3QgaW4gY2FzZSlcbiAgICAgICAgICAgIGlmICh0eXBlb2YgZW50ID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICB0b29scy5wdXNoKGh1bWFuaXplKGVudCkpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBvYmplY3Qgd2l0aCBib29sZWFuIGZsYWdzOiBnYXRoZXIgKmFsbCogdHJ1ZSBrZXlzXG4gICAgICAgICAgICBPYmplY3QuZW50cmllcyhlbnQpXG4gICAgICAgICAgICAuZmlsdGVyKChbXywgdl0pID0+IHYgPT09IHRydWUpXG4gICAgICAgICAgICAuZm9yRWFjaCgoW2tdKSA9PiB0b29scy5wdXNoKGh1bWFuaXplKGspKSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGxpbmVzLnB1c2goYCoqVG9vbCBQcm9maWNpZW5jaWVzOioqICR7dG9vbHMuam9pbihcIiwgXCIpfWAsIFwiXCIpO1xuICAgICAgICB9XG5cblxuXG4gICAgLy8gXHUyNTAwXHUyNTAwXHUyNTAwIHN0YXJ0aW5nIGVxdWlwbWVudCBcdTI1MDBcdTI1MDBcdTI1MDBcbiAgICBpZiAoQXJyYXkuaXNBcnJheShiZy5zdGFydGluZ0VxdWlwbWVudCkgJiYgYmcuc3RhcnRpbmdFcXVpcG1lbnQubGVuZ3RoKSB7XG4gICAgICBsaW5lcy5wdXNoKGAqKkVxdWlwbWVudDoqKmApO1xuICAgICAgYmcuc3RhcnRpbmdFcXVpcG1lbnQuZm9yRWFjaCgoZ3JwOiBhbnkpID0+IHtcbiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoZ3JwLl8pKSB7XG4gICAgICAgICAgZ3JwLl8uZm9yRWFjaCgoaXQ6IGFueSkgPT4gbGluZXMucHVzaChgLSAke2ZtdEl0ZW0oaXQpfWApKTtcbiAgICAgICAgfVxuICAgICAgICBbXCJhXCIsIFwiYlwiXS5mb3JFYWNoKGtleSA9PiB7XG4gICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoZ3JwW2tleV0pKSB7XG4gICAgICAgICAgICBncnBba2V5XS5mb3JFYWNoKChpdDogYW55KSA9PiBsaW5lcy5wdXNoKGAtICR7Zm10SXRlbShpdCl9YCkpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICAgIGxpbmVzLnB1c2goXCJcIik7XG4gICAgfVxuXG4gICAgLy8gXHUyNTAwXHUyNTAwXHUyNTAwIGFsbCBmZWF0dXJlICYgZW50cmllcyBibG9ja3MgXHUyNTAwXHUyNTAwXHUyNTAwXG4gICAgaWYgKEFycmF5LmlzQXJyYXkoYmcuZW50cmllcykpIHtcbiAgICAgIGJnLmVudHJpZXMuZm9yRWFjaCgoZW50cnk6IGFueSkgPT4ge1xuICAgICAgICAvLyBza2lwIHRoZSBzdW1tYXJ5IGxpc3QgYmxvY2tcbiAgICAgICAgaWYgKGVudHJ5LnR5cGUgPT09IFwibGlzdFwiICYmIGVudHJ5LnN0eWxlID09PSBcImxpc3QtaGFuZy1ub3RpdGxlXCIpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgLy8gc2VjdGlvbiBoZWFkZXJcbiAgICAgICAgaWYgKGVudHJ5Lm5hbWUpIHtcbmNvbnN0IGhlYWRlciA9IGVudHJ5LmRhdGE/LmlzRmVhdHVyZVxuICA/IGVudHJ5Lm5hbWUucmVwbGFjZSgvXkZlYXR1cmU6XFxzKi8sIFwiXCIpXG4gIDogZW50cnkubmFtZTtcbmxpbmVzLnB1c2goYCMjICR7aGVhZGVyfWAsIFwiXCIpOyAgICAgICAgfVxuICAgICAgICAvLyBlbnRyeSBjb250ZW50XG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KGVudHJ5LmVudHJpZXMpKSB7XG4gICAgICAgICAgZW50cnkuZW50cmllcy5mb3JFYWNoKChlOiBhbnkpID0+IHtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgZSA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgICBsaW5lcy5wdXNoKHJlcGxhY2U1ZVRhZ3MoZSksIFwiXCIpO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChlLnR5cGUgPT09IFwibGlzdFwiICYmIEFycmF5LmlzQXJyYXkoZS5pdGVtcykpIHtcbiAgICAgICAgICAgICAgZS5pdGVtcy5mb3JFYWNoKChpdDogYW55KSA9PlxuICAgICAgICAgICAgICAgIGxpbmVzLnB1c2goYC0gJHtyZXBsYWNlNWVUYWdzKGl0LmVudHJ5ID8/IGl0KX1gKVxuICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICBsaW5lcy5wdXNoKFwiXCIpO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChlLnR5cGUgPT09IFwidGFibGVcIikge1xuICAgICAgICAgICAgICBjb25zdCB0YmwgPSByZW5kZXJNYXJrZG93blRhYmxlKGUpO1xuICAgICAgICAgICAgICBpZiAodGJsKSBsaW5lcy5wdXNoKHRibCwgXCJcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSBpZiAoZW50cnkudHlwZSA9PT0gXCJsaXN0XCIgJiYgQXJyYXkuaXNBcnJheShlbnRyeS5pdGVtcykpIHtcbiAgICAgICAgICBlbnRyeS5pdGVtcy5mb3JFYWNoKChpdDogYW55KSA9PlxuICAgICAgICAgICAgbGluZXMucHVzaChgLSAke3JlcGxhY2U1ZVRhZ3MoaXQuZW50cnkgPz8gaXQpfWApXG4gICAgICAgICAgKTtcbiAgICAgICAgICBsaW5lcy5wdXNoKFwiXCIpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBvdXRwdXRzLnB1c2goe1xuICAgICAgcGF0aDogYFBsYXllciBCdWlsZC9CYWNrZ3JvdW5kcy8ke2JnLm5hbWV9Lm1kYCxcbiAgICAgIGNvbnRlbnQ6IGxpbmVzLmpvaW4oXCJcXG5cIikudHJpbUVuZCgpICsgXCJcXG5cIixcbiAgICB9KTtcbiAgfSk7XG5cbiAgcmV0dXJuIG91dHB1dHM7XG59XG5cbi8vIFx1MjAxNFx1MjAxNFx1MjAxNCBoZWxwZXJzIFx1MjAxNFx1MjAxNFx1MjAxNFxuZnVuY3Rpb24gY2FwKHN0cjogc3RyaW5nKSB7XG4gIHJldHVybiBzdHIuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBzdHIuc2xpY2UoMSk7XG59XG5cblxuZnVuY3Rpb24gZm10SXRlbShpdGVtOiBhbnkpOiBzdHJpbmcge1xuICAvLyAxKSByYXcgc3RyaW5nIG9yIHRhZ2dlZCBpdGVtXG4gIGlmICh0eXBlb2YgaXRlbSA9PT0gXCJzdHJpbmdcIikge1xuICAgIGlmIChpdGVtLmluY2x1ZGVzKFwifFwiKSkge1xuICAgICAgcmV0dXJuIHJlcGxhY2U1ZVRhZ3MoYHtAaXRlbSAke2l0ZW19fWApO1xuICAgIH1cbiAgICByZXR1cm4gcmVwbGFjZTVlVGFncyhpdGVtKTtcbiAgfVxuXG4gIC8vIDIpIHB1cmUgZ29sZC1waWVjZSBlbnRyeTogeyB2YWx1ZTogMTAgfSBvciB7IGNvbnRhaW5zVmFsdWU6IDE1MDAgfVxuICBjb25zdCBwcmljZVJhdyA9IChpdGVtLmNvbnRhaW5zVmFsdWUgPz8gaXRlbS52YWx1ZSkgYXMgbnVtYmVyIHwgdW5kZWZpbmVkO1xuICBpZiAoXG4gICAgdHlwZW9mIHByaWNlUmF3ID09PSBcIm51bWJlclwiICYmXG4gICAgLy8gbWFrZSBzdXJlIGl0XHUyMDE5cyBub3QgYWxzbyBhbiBcdTIwMUNpdGVtXHUyMDFEIG9yIFx1MjAxQ2VxdWlwbWVudFR5cGVcdTIwMURcbiAgICAhaXRlbS5pdGVtICYmXG4gICAgIWl0ZW0uZXF1aXBtZW50VHlwZSAmJlxuICAgICFpdGVtLnNwZWNpYWxcbiAgKSB7XG4gICAgY29uc3QgZ3AgPSBwcmljZVJhdyA+PSAxMDAgPyBwcmljZVJhdyAvIDEwMCA6IHByaWNlUmF3O1xuICAgIHJldHVybiBgJHtncH0gZ3BgO1xuICB9XG5cbiAgLy8gMykgZXhwbGljaXQgaXRlbSBvYmplY3Qgd2l0aCBvcHRpb25hbCBwcmljZVxuICBpZiAoaXRlbS5pdGVtKSB7XG4gICAgY29uc3QgbGluayA9IHJlcGxhY2U1ZVRhZ3MoYHtAaXRlbSAke2l0ZW0uaXRlbX19YCk7XG4gICAgaWYgKHR5cGVvZiBwcmljZVJhdyA9PT0gXCJudW1iZXJcIikge1xuICAgICAgY29uc3QgZ3AgPSBwcmljZVJhdyA+PSAxMDAgPyBwcmljZVJhdyAvIDEwMCA6IHByaWNlUmF3O1xuICAgICAgcmV0dXJuIGAke2xpbmt9ICgke2dwfSBncClgO1xuICAgIH1cbiAgICByZXR1cm4gbGluaztcbiAgfVxuXG4gIC8vIDQpIHNwZWNpYWwtY2FzZSB0ZXh0XG4gIGlmICh0eXBlb2YgaXRlbS5zcGVjaWFsID09PSBcInN0cmluZ1wiKSB7XG4gICAgcmV0dXJuIGl0ZW0uc3BlY2lhbDtcbiAgfVxuXG4gIC8vIDUpIGtub3duIGVxdWlwbWVudFR5cGUga2V5c1xuICBpZiAoaXRlbS5lcXVpcG1lbnRUeXBlKSB7XG4gICAgc3dpdGNoIChpdGVtLmVxdWlwbWVudFR5cGUpIHtcbiAgICAgIGNhc2UgXCJ0b29sQXJ0aXNhblwiOlxuICAgICAgICByZXR1cm4gXCJPbmUgdHlwZSBvZiBhcnRpc2FuXHUyMDE5cyB0b29scyAob2YgeW91ciBjaG9pY2UpXCI7XG4gICAgICBjYXNlIFwiaW5zdHJ1bWVudE11c2ljYWxcIjpcbiAgICAgICAgcmV0dXJuIFwiT25lIHR5cGUgb2YgbXVzaWNhbCBpbnN0cnVtZW50IChvZiB5b3VyIGNob2ljZSlcIjtcbiAgICAgIGNhc2UgXCJzZXRHYW1pbmdcIjpcbiAgICAgICAgcmV0dXJuIFwiT25lIHNldCBvZiBnYW1pbmcgZGljZSAob2YgeW91ciBjaG9pY2UpXCI7XG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gaHVtYW5pemUoaXRlbS5lcXVpcG1lbnRUeXBlKTtcbiAgICB9XG4gIH1cblxuICAvLyA2KSBmYWxsYmFjazogZHVtcCBhbnkgbGVmdG92ZXIgdGFnIHN5bnRheFxuICByZXR1cm4gcmVwbGFjZTVlVGFncyhKU09OLnN0cmluZ2lmeShpdGVtKSk7XG59XG5cblxuXG5mdW5jdGlvbiBodW1hbml6ZShzdHI6IHN0cmluZyk6IHN0cmluZyB7XG4gIGNvbnN0IHNwYWNlZCA9IHN0ci5yZXBsYWNlKC8oW2Etel0pKFtBLVpdKS9nLCBcIiQxICQyXCIpO1xuICByZXR1cm4gc3BhY2VkLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgc3BhY2VkLnNsaWNlKDEpO1xufVxuIiwgIi8vIHNyYy9ydWxlc2V0SW5zdGFsbGVyLnRzXG5pbXBvcnQgeyBBcHAgfSBmcm9tIFwib2JzaWRpYW5cIjtcbmltcG9ydCB7IEFWQUlMQUJMRV9FRElUSU9OUyB9IGZyb20gXCIuL2VkaXRpb25zXCI7XG5cbi8vIFNUQVRJQyBpbXBvcnQgb2YgZXZlcnkgaW5zdGFsbGVyIHlvdSBzaGlwOlxuaW1wb3J0ICogYXMgZml2ZWUyMDE0SW5zdGFsbGVyIGZyb20gXCIuL3BhcnNlcnMvNWUtMjAxNC9pbnN0YWxsZXJcIjtcbmltcG9ydCAqIGFzIGZpdmVlMjAyNUluc3RhbGxlciBmcm9tIFwiLi9wYXJzZXJzLzVlLTIwMjUvaW5zdGFsbGVyXCI7XG4vLyBpbXBvcnQgKiBhcyBhbm90aGVySW5zdGFsbGVyIGZyb20gXCIuL3BhcnNlcnMvb3RoZXIvaW5zdGFsbGVyXCI7XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBpbXBvcnRSdWxlc2V0RGF0YShwYXJhbXM6IHtcbiAgYXBwOiBBcHA7XG4gIGVkaXRpb25LZXk6IHN0cmluZztcbiAgdGFyZ2V0UGF0aDogc3RyaW5nO1xufSkge1xuICBjb25zdCB7IGFwcCwgZWRpdGlvbktleSwgdGFyZ2V0UGF0aCB9ID0gcGFyYW1zO1xuICBjb25zdCBlZGl0aW9uID0gQVZBSUxBQkxFX0VESVRJT05TLmZpbmQoKGUpID0+IGUuaWQgPT09IGVkaXRpb25LZXkpO1xuICBpZiAoIWVkaXRpb24pIHtcbiAgICBjb25zb2xlLndhcm4oXCJFZGl0aW9uIG5vdCBmb3VuZCBmb3I6XCIsIGVkaXRpb25LZXkpO1xuICAgIHJldHVybjtcbiAgfVxuICBpZiAoIWVkaXRpb24ucGFyc2VyKSB7XG4gICAgY29uc29sZS53YXJuKFwiTm8gcGFyc2VyIGRlZmluZWQgZm9yOlwiLCBlZGl0aW9uS2V5KTtcbiAgICByZXR1cm47XG4gIH1cblxuICAvLyBhbGwgaW5zdGFsbGVycyBleHBvc2UgaW1wb3J0RWRpdGlvbkRhdGEoKVxuICBsZXQgaW5zdGFsbGVyTW9kdWxlOiB7IGltcG9ydEVkaXRpb25EYXRhOiAoYXJnczogeyBhcHA6IEFwcDsgZWRpdGlvbjogdHlwZW9mIGVkaXRpb247IHRhcmdldFBhdGg6IHN0cmluZyB9KSA9PiBQcm9taXNlPHZvaWQ+IH07XG5cbiAgc3dpdGNoIChlZGl0aW9uLnBhcnNlcikge1xuICAgIGNhc2UgXCI1ZS0yMDE0XCI6XG4gICAgICBpbnN0YWxsZXJNb2R1bGUgPSBmaXZlZTIwMTRJbnN0YWxsZXI7XG4gICAgICBicmVhaztcbiAgICBjYXNlIFwiNWUtMjAyNVwiOlxuICAgICAgaW5zdGFsbGVyTW9kdWxlID0gZml2ZWUyMDI1SW5zdGFsbGVyO1xuICAgICAgYnJlYWs7XG4gICAgLy8gY2FzZSBcIm90aGVyLXBhcnNlclwiOlxuICAgIC8vICAgaW5zdGFsbGVyTW9kdWxlID0gYW5vdGhlckluc3RhbGxlcjtcbiAgICAvLyAgIGJyZWFrO1xuICAgIGRlZmF1bHQ6XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYFVua25vd24gcGFyc2VyOiAke2VkaXRpb24ucGFyc2VyfWApO1xuICB9XG5cbiAgYXdhaXQgaW5zdGFsbGVyTW9kdWxlLmltcG9ydEVkaXRpb25EYXRhKHsgYXBwLCBlZGl0aW9uLCB0YXJnZXRQYXRoIH0pO1xufVxuIiwgImltcG9ydCB7IFZhdWx0IH0gZnJvbSAnb2JzaWRpYW4nO1xuaW1wb3J0IHsgY3JlYXRlSGFzaCB9IGZyb20gJ2NyeXB0byc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgVG9vbGtpdEZpbGVDYWNoZUVudHJ5IHtcblx0aGFzaDogc3RyaW5nO1xuXHRnaXRodWJQYXRoOiBzdHJpbmc7XG59XG5cbmV4cG9ydCB0eXBlIFRvb2xraXRGaWxlQ2FjaGUgPSBSZWNvcmQ8c3RyaW5nLCBUb29sa2l0RmlsZUNhY2hlRW50cnk+OyAvLyB2YXVsdFBhdGggPT4ge2hhc2gsIGdpdGh1YlBhdGh9XG5cbmV4cG9ydCBjbGFzcyBUb29sa2l0RmlsZUNhY2hlTWFuYWdlciB7XG5cdHByaXZhdGUgdmF1bHQ6IFZhdWx0O1xuXHRwcml2YXRlIGNhY2hlOiBUb29sa2l0RmlsZUNhY2hlO1xuXHRwcml2YXRlIHNhdmU6ICgpID0+IFByb21pc2U8dm9pZD47XG5cblx0Y29uc3RydWN0b3IodmF1bHQ6IFZhdWx0LCBpbml0aWFsQ2FjaGU6IFRvb2xraXRGaWxlQ2FjaGUgfCB1bmRlZmluZWQsIHNhdmVDYWxsYmFjazogKCkgPT4gUHJvbWlzZTx2b2lkPikge1xuXHRcdHRoaXMudmF1bHQgPSB2YXVsdDtcblx0XHR0aGlzLmNhY2hlID0gaW5pdGlhbENhY2hlIHx8IHt9O1xuXHRcdHRoaXMuc2F2ZSA9IHNhdmVDYWxsYmFjaztcblx0fVxuXG5cdHByaXZhdGUgaGFzaENvbnRlbnQoY29udGVudDogc3RyaW5nKTogc3RyaW5nIHtcblx0XHRyZXR1cm4gY3JlYXRlSGFzaCgnc2hhMjU2JykudXBkYXRlKGNvbnRlbnQpLmRpZ2VzdCgnaGV4Jyk7XG5cdH1cblxuXHRhc3luYyBpc1VwVG9EYXRlKHZhdWx0UGF0aDogc3RyaW5nKTogUHJvbWlzZTxib29sZWFuPiB7XG5cdFx0Ly9jb25zb2xlLmxvZyhgXHVEODNEXHVERDBEIENoZWNraW5nIGlmIFwiJHt2YXVsdFBhdGh9XCIgaXMgdXAgdG8gZGF0ZS5gKTtcblx0XG5cdFx0Y29uc3QgZW50cnkgPSB0aGlzLmNhY2hlW3ZhdWx0UGF0aF07XG5cdFx0aWYgKCFlbnRyeSkge1xuXHRcdFx0Ly9jb25zb2xlLmxvZyhgXHUyNzRDIE5vIGNhY2hlZCBoYXNoIGZvdW5kIGZvcjogJHt2YXVsdFBhdGh9YCk7XG5cdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0fVxuXHRcblx0XHRjb25zdCBleGlzdHMgPSBhd2FpdCB0aGlzLnZhdWx0LmFkYXB0ZXIuZXhpc3RzKHZhdWx0UGF0aCk7XG5cdFx0aWYgKCFleGlzdHMpIHtcblx0XHRcdC8vY29uc29sZS5sb2coYFx1Mjc0QyBGaWxlIGRvZXMgbm90IGV4aXN0IGluIHZhdWx0OiAke3ZhdWx0UGF0aH1gKTtcblx0XHRcdHJldHVybiBmYWxzZTtcblx0XHR9XG5cdFxuXHRcdGNvbnN0IGNvbnRlbnQgPSBhd2FpdCB0aGlzLnZhdWx0LmFkYXB0ZXIucmVhZCh2YXVsdFBhdGgpO1xuXHRcdGNvbnN0IGxvY2FsSGFzaCA9IHRoaXMuaGFzaENvbnRlbnQoY29udGVudCk7XG5cdFx0Y29uc3QgaXNTYW1lID0gbG9jYWxIYXNoID09PSBlbnRyeS5oYXNoO1xuXHRcblx0XHQvL2NvbnNvbGUubG9nKGBcdUQ4M0RcdUREMjIgTG9jYWwgaGFzaDogICR7bG9jYWxIYXNofWApO1xuXHRcdC8vY29uc29sZS5sb2coYFx1RDgzRFx1RENFNiBDYWNoZWQgaGFzaDogJHtlbnRyeS5oYXNofWApO1xuXHRcdC8vY29uc29sZS5sb2coaXNTYW1lID8gYFx1MjcwNSBGaWxlIGlzIHVwIHRvIGRhdGUuYCA6IGBcdUQ4M0RcdUREMDEgRmlsZSBuZWVkcyB1cGRhdGUuYCk7XG5cdFxuXHRcdHJldHVybiBpc1NhbWU7XG5cdH1cblx0XG5cblx0YXN5bmMgdXBkYXRlQ2FjaGUodmF1bHRQYXRoOiBzdHJpbmcsIGNvbnRlbnQ6IHN0cmluZywgZ2l0aHViUGF0aDogc3RyaW5nLCBzYXZlTm93OiBib29sZWFuID0gdHJ1ZSkge1xuXHRcdHRoaXMuY2FjaGVbdmF1bHRQYXRoXSA9IHtcblx0XHRcdGhhc2g6IHRoaXMuaGFzaENvbnRlbnQoY29udGVudCksXG5cdFx0XHRnaXRodWJQYXRoXG5cdFx0fTtcblx0XHRpZiAoc2F2ZU5vdykgYXdhaXQgdGhpcy5zYXZlKCk7XG5cdH1cblxuXHRnZXRDYWNoZSgpOiBUb29sa2l0RmlsZUNhY2hlIHtcblx0XHRyZXR1cm4gdGhpcy5jYWNoZTtcblx0fVxuXG5cdGdldFRyYWNrZWRGaWxlcygpOiBzdHJpbmdbXSB7XG5cdFx0cmV0dXJuIE9iamVjdC5rZXlzKHRoaXMuY2FjaGUpO1xuXHR9XG5cblx0Z2V0R2l0SHViUGF0aCh2YXVsdFBhdGg6IHN0cmluZyk6IHN0cmluZyB8IHVuZGVmaW5lZCB7XG5cdFx0cmV0dXJuIHRoaXMuY2FjaGVbdmF1bHRQYXRoXT8uZ2l0aHViUGF0aDtcblx0fVxuXG5cdHJlc2V0Q2FjaGUoKSB7XG5cdFx0dGhpcy5jYWNoZSA9IHt9O1xuXHR9XG5cblx0YXN5bmMgcmVtb3ZlRnJvbUNhY2hlKHZhdWx0UGF0aDogc3RyaW5nKSB7XG5cdFx0ZGVsZXRlIHRoaXMuY2FjaGVbdmF1bHRQYXRoXTtcblx0XHRhd2FpdCB0aGlzLnNhdmUoKTtcblx0fVxufVxuIiwgImltcG9ydCB7IG5vcm1hbGl6ZVBhdGgsIFZhdWx0LCBBcHAsIE5vdGljZSB9IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCB7IGRpcm5hbWUsIGJhc2VuYW1lLCBqb2luIH0gZnJvbSAncGF0aCc7XG5pbXBvcnQgeyBwcm9taXNlcyBhcyBmcyB9IGZyb20gJ2ZzJztcblxuZXhwb3J0IGNsYXNzIEJhY2t1cE1hbmFnZXIge1xuICBjb25zdHJ1Y3Rvcihwcml2YXRlIGFwcDogQXBwKSB7fVxuXG4gIGFzeW5jIGJhY2t1cFZhdWx0TWlycm9yKGxhYmVsPzogc3RyaW5nLCBtYXhGdWxsQmFja3VwczogbnVtYmVyID0gNSk6IFByb21pc2U8c3RyaW5nPiB7XG4gICAgY29uc3QgdHMgPSBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCkucmVwbGFjZSgvWzouXS9nLCAnLScpO1xuICAgIGNvbnN0IHRhZyA9IGxhYmVsID8gYC0ke2xhYmVsfWAgOiAnJztcbiAgICBjb25zdCBiYXNlID0gbm9ybWFsaXplUGF0aChgLnZhdWx0LWJhY2t1cHMvZnVsbC8ke3RzfSR7dGFnfWApO1xuXG4gICAgYXdhaXQgdGhpcy5lbnN1cmVGb2xkZXJFeGlzdHMoYmFzZSk7XG5cbiAgICBmb3IgKGNvbnN0IGZpbGUgb2YgdGhpcy5hcHAudmF1bHQuZ2V0RmlsZXMoKSkge1xuICAgICAgY29uc3QgcCA9IGZpbGUucGF0aDtcbiAgICAgIGlmIChcbiAgICAgICAgcC5zdGFydHNXaXRoKCcudmF1bHQtYmFja3Vwcy8nKSB8fFxuICAgICAgICBwLnN0YXJ0c1dpdGgoYCR7dGhpcy5hcHAudmF1bHQuY29uZmlnRGlyfS9gKSB8fFxuICAgICAgICBwLnN0YXJ0c1dpdGgoJy50cmFzaC8nKSB8fFxuICAgICAgICBwLnN0YXJ0c1dpdGgoJy5naXQvJylcbiAgICAgICkge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgY29uc3QgdGFyZ2V0ID0gbm9ybWFsaXplUGF0aChgJHtiYXNlfS8ke3B9YCk7XG4gICAgICBhd2FpdCB0aGlzLmVuc3VyZUZvbGRlckV4aXN0cyhkaXJuYW1lKHRhcmdldCkpO1xuXG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCBkYXRhID0gYXdhaXQgdGhpcy5hcHAudmF1bHQuYWRhcHRlci5yZWFkQmluYXJ5KHApO1xuICAgICAgICBhd2FpdCB0aGlzLmFwcC52YXVsdC5hZGFwdGVyLndyaXRlQmluYXJ5KHRhcmdldCwgZGF0YSk7XG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ1tCYWNrdXBNYW5hZ2VyXSBjb3B5IGZhaWxlZDonLCBwLCBlKTtcbiAgICAgICAgLy8gY29udGludWUgdG8gbmV4dCBmaWxlXG4gICAgICB9XG4gICAgfVxuICAgIGF3YWl0IHRoaXMucHJ1bmVGdWxsQmFja3VwcyhiYXNlLCBtYXhGdWxsQmFja3Vwcyk7XG4gICAgbmV3IE5vdGljZShcIlx1MjcwNSBCYWNrdXAgY29tcGxldGUhXCIpO1xuICAgIHJldHVybiBiYXNlO1xuICB9XG5cbiAgLyoqXG4gICAqIExlZ2FjeSBhbGlhcyBmb3IgbWlycm9yLWJhc2VkIGJhY2t1cHNcbiAgICovXG4gIGFzeW5jIGJhY2t1cFZhdWx0VG9aaXAobGFiZWw/OiBzdHJpbmcpOiBQcm9taXNlPHN0cmluZz4ge1xuICAgIHJldHVybiB0aGlzLmJhY2t1cFZhdWx0TWlycm9yKGxhYmVsKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBEZWxldGVzIG9sZGVzdCBmdWxsIGJhY2t1cCBmb2xkZXJzLCBrZWVwaW5nIG9ubHkgdGhlIG1vc3QgcmVjZW50IGBrZWVwYCBzbmFwc2hvdHMuXG4gICAqL1xuICBwcml2YXRlIGFzeW5jIHBydW5lRnVsbEJhY2t1cHMoY3VycmVudFBhdGg6IHN0cmluZywga2VlcDogbnVtYmVyKSB7XG4gIGNvbnN0IHJvb3QgPSBub3JtYWxpemVQYXRoKCcudmF1bHQtYmFja3Vwcy9mdWxsJyk7XG4gIGF3YWl0IHRoaXMuZW5zdXJlRm9sZGVyRXhpc3RzKHJvb3QpO1xuXG4gIGNvbnN0IGxpc3RpbmcgPSBhd2FpdCB0aGlzLmFwcC52YXVsdC5hZGFwdGVyLmxpc3Qocm9vdCk7XG4gIGNvbnN0IGZvbGRlclBhdGhzOiBzdHJpbmdbXSA9IChsaXN0aW5nIGFzIGFueSk/LmZvbGRlcnMgPz8gW107XG4gIGNvbnN0IG5hbWVzID0gZm9sZGVyUGF0aHMubWFwKGYgPT4gYmFzZW5hbWUoZikpO1xuXG4gIC8vIHNvcnQgbmV3ZXN0XHUyMTkyb2xkZXN0IGJ5IElTTy1pc2ggZm9sZGVyIG5hbWVcbiAgY29uc3Qgc29ydGVkID0gWy4uLm5hbWVzXS5zb3J0KChhLCBiKSA9PiBiLmxvY2FsZUNvbXBhcmUoYSkpO1xuXG4gIGNvbnN0IHRvUmVtb3ZlID0gc29ydGVkLnNsaWNlKGtlZXApO1xuICBmb3IgKGNvbnN0IG5hbWUgb2YgdG9SZW1vdmUpIHtcbiAgICBjb25zdCB2YXVsdFBhdGggPSBub3JtYWxpemVQYXRoKGAke3Jvb3R9LyR7bmFtZX1gKTtcbiAgICB0cnkge1xuICAgICAgLy8gcmVtb3ZlIHNuYXBzaG90IGZvbGRlciByZWN1cnNpdmVseSB2aWEgYWRhcHRlclxuICAgICAgYXdhaXQgdGhpcy5hcHAudmF1bHQuYWRhcHRlci5ybWRpcih2YXVsdFBhdGgsIHRydWUpO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ1tCYWNrdXBNYW5hZ2VyXSBwcnVuZSBmYWlsZWQ6JywgdmF1bHRQYXRoLCBlKTtcbiAgICB9XG4gIH1cbn1cblxuICAvKipcbiAgICogUmVjdXJzaXZlbHkgZW5zdXJlcyB0aGF0IGEgZGlyZWN0b3J5IGV4aXN0cyBpbiB0aGUgdmF1bHQuXG4gICAqL1xuICBwcml2YXRlIGFzeW5jIGVuc3VyZUZvbGRlckV4aXN0cyhmb2xkZXJQYXRoOiBzdHJpbmcpIHtcbiAgICBpZiAoIWZvbGRlclBhdGggfHwgKGF3YWl0IHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXIuZXhpc3RzKGZvbGRlclBhdGgpKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCBwYXJlbnQgPSBkaXJuYW1lKGZvbGRlclBhdGgpO1xuICAgIGF3YWl0IHRoaXMuZW5zdXJlRm9sZGVyRXhpc3RzKHBhcmVudCk7XG4gICAgYXdhaXQgdGhpcy5hcHAudmF1bHQuY3JlYXRlRm9sZGVyKGZvbGRlclBhdGgpO1xuICB9XG59XG4iLCAiaW1wb3J0IHtcbiAgSXRlbVZpZXcsXG4gIFdvcmtzcGFjZUxlYWYsXG4gIFRGaWxlLFxuICBOb3RpY2UsXG4gIEJ1dHRvbkNvbXBvbmVudCxcbiAgTWFya2Rvd25WaWV3LFxuICBTZXR0aW5nLFxuICBURm9sZGVyLFxuICBzZXRJY29uLFxuICBBcHBcbn0gZnJvbSAnb2JzaWRpYW4nO1xuaW1wb3J0IHsgU1BFTExCT09LX1ZJRVdfVFlQRSB9IGZyb20gJy4vc2Itc3BlbGxib29rJztcblxuZnVuY3Rpb24gZ2V0VG9vbGtpdChhcHA6IEFwcCk6IGFueSB7XG4gIHJldHVybiAoXG4gICAgKGFwcCBhcyBhbnkpLnBsdWdpbnMuZ2V0UGx1Z2luKCd2dnVuZGVybG9yZS10b29sa2l0JykgfHxcbiAgICAoYXBwIGFzIGFueSkucGx1Z2lucy5wbHVnaW5zPy5bJ3Z2dW5kZXJsb3JlLXRvb2xraXQnXVxuICApO1xufVxuXG5leHBvcnQgY29uc3QgU0lERUJBUl9WSUVXX1RZUEUgPSAndnZ1bmRlcmxvcmUtdGVtcGxhdGVzLXNpZGViYXInO1xuXG5jb25zdCBURU1QTEFURV9CVVRUT05TOiB7IGxhYmVsOiBzdHJpbmc7IHBhdGg6IHN0cmluZyB9W10gPSBbXG4gIHsgbGFiZWw6ICdOZXcgQWR2ZW50dXJlJywgcGF0aDogJ0V4dHJhcy9UZW1wbGF0ZXMvbmV3YWR2ZW50dXJlX3RlbXBsYXRlLm1kJyB9LFxuICB7IGxhYmVsOiAnTmV3IFBDJywgcGF0aDogJ0V4dHJhcy9UZW1wbGF0ZXMvcGxheWVyY2hhcmFjdGVyX3RlbXBsYXRlLm1kJyB9LFxuICB7IGxhYmVsOiAnTmV3IE5QQycsIHBhdGg6ICdFeHRyYXMvVGVtcGxhdGVzL25wY190ZW1wbGF0ZS5tZCcgfSxcbiAgeyBsYWJlbDogJ05ldyBJdGVtJywgcGF0aDogJ0V4dHJhcy9UZW1wbGF0ZXMvbmV3aXRlbV90ZW1wbGF0ZS5tZCcgfSxcbiAgeyBsYWJlbDogJ05ldyBQbGFjZScsIHBhdGg6ICdFeHRyYXMvVGVtcGxhdGVzL25ld3BsYWNlX3RlbXBsYXRlLm1kJyB9LFxuICB7IGxhYmVsOiAnTmV3IENyZWF0dXJlJywgcGF0aDogJ0V4dHJhcy9UZW1wbGF0ZXMvbmV3Y3JlYXR1cmVfdGVtcGxhdGUubWQnIH0sXG5dO1xuXG5jb25zdCBTQ0hPT0xfQUJCUjogUmVjb3JkPHN0cmluZywgc3RyaW5nPiA9IHtcbiAgQWJqdXJhdGlvbjogXCJBYmouXCIsXG4gIENvbmp1cmF0aW9uOiBcIkNvbmouXCIsXG4gIERpdmluYXRpb246IFwiRGl2LlwiLFxuICBFbmNoYW50bWVudDogXCJFbmNoLlwiLFxuICBFdm9jYXRpb246IFwiRW52by5cIixcbiAgSWxsdXNpb246IFwiSWxsdS5cIixcbiAgTmVjcm9tYW5jeTogXCJOZWMuXCIsXG4gIFRyYW5zbXV0YXRpb246IFwiVHJhbnMuXCJcbn07XG5cbmNvbnN0IERBTUFHRV9BQkJSOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+ID0ge1xuICBhY2lkOiBcIkFjaWRcIixcbiAgY29sZDogXCJDb2xkXCIsXG4gIGZpcmU6IFwiRmlyZVwiLFxuICBmb3JjZTogXCJGb3JjZVwiLFxuICBsaWdodG5pbmc6IFwiTHRuZy5cIixcbiAgbmVjcm90aWM6IFwiTmVjcm9cIixcbiAgcG9pc29uOiBcIlBvaXMuXCIsXG4gIHBzeWNoaWM6IFwiUHN5Yy5cIixcbiAgcmFkaWFudDogXCJSYWRpLlwiLFxuICB0aHVuZGVyOiBcIlRodW4uXCIsXG4gIGJsdWRnZW9uaW5nOiBcIkJsdWRnLlwiLFxuICBwaWVyY2luZzogXCJQaWVyY2VcIixcbiAgc2xhc2hpbmc6IFwiU2xhc2hcIlxufTtcblxuZXhwb3J0IGNsYXNzIFNpZGViYXJUZW1wbGF0ZXNWaWV3IGV4dGVuZHMgSXRlbVZpZXcge1xuICBjb25zdHJ1Y3RvcihsZWFmOiBXb3Jrc3BhY2VMZWFmKSB7XG4gICAgc3VwZXIobGVhZik7XG4gIH1cblxuICBnZXRWaWV3VHlwZSgpIHsgcmV0dXJuIFNJREVCQVJfVklFV19UWVBFOyB9XG4gIGdldERpc3BsYXlUZXh0KCkgeyByZXR1cm4gJ1ZWb3JsZGJ1aWxpbmcnOyB9XG4gIGdldEljb24oKSB7IHJldHVybiAnbWFwbWFraW5nJzsgfVxuXG4gIHByaXZhdGUgc3BlbGxTb3J0S2V5OiAnbmFtZScgfCAnbGV2ZWwnIHwgJ3NjaG9vbCcgfCAnZGFtYWdlJyA9ICduYW1lJztcbiAgcHJpdmF0ZSBzcGVsbFNvcnREaXI6IDEgfCAtMSA9IDE7XG5cbiAgLy8gXHUyNTAwXHUyNTAwIFNlbGVjdGVkIFNwZWxscyAobWVtb3J5IG9ubHk7IG5vIHBlcnNpc3RlbmNlKSBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcbiAgcHJpdmF0ZSBwaWNrczogc3RyaW5nW10gPSBbXTtcbiAgcHJpdmF0ZSBhZGRCdG5CeVBhdGggPSBuZXcgTWFwPHN0cmluZywgSFRNTEJ1dHRvbkVsZW1lbnQ+KCk7IC8vIHRhYmxlIFx1MjAxQ0FkZFx1MjAxRCBidXR0b25zIGJ5IGZpbGUgcGF0aFxuXG5cbiAgcHJpdmF0ZSBidWlsZERhdGF2aWV3Rm9yUGlja3MoKTogc3RyaW5nIHtcbiAgICBjb25zdCBwYXRocyA9IHRoaXMucGlja3MubWFwKHAgPT4gYFwiJHtwLnJlcGxhY2UoL1wiL2csICdcXFxcXCInKX1cImApLmpvaW4oJywgJyk7XG4gICAgcmV0dXJuIFtcbiAgICAgICdgYGBkYXRhdmlldycsXG4gICAgICAnVEFCTEUnLFxuICAgICAgJyAgbGV2ZWwgQVMgXCJMdmxcIiwnLFxuICAgICAgJyAgc2Nob29sIEFTIFwiU2Nob29sXCIsJyxcbiAgICAgICcgIGRhbWFnZV90eXBlIEFTIFwiRGFtYWdlXCIsJyxcbiAgICAgICcgIHJhbmdlIEFTIFwiUmFuZ2VcIiwnLFxuICAgICAgJyAgY2FzdGluZ190aW1lIEFTIFwiQ2FzdGluZyBUaW1lXCInLFxuICAgICAgJ1dIRVJFIGNvbnRhaW5zKFsnICsgcGF0aHMgKyAnXSwgZmlsZS5wYXRoKScsXG4gICAgICAnU09SVCBsZXZlbCBBU0MsIG5hbWUgQVNDJyxcbiAgICAgICdgYGAnXG4gICAgXS5qb2luKCdcXG4nKTtcbiAgfVxuXG4gIHByaXZhdGUgX3Jld2lyZVByZXZpZXdzKCk6IHZvaWQge1xuICAgIGNvbnN0IGVuYWJsZVByZXZpZXcgPSAhIWdldFRvb2xraXQodGhpcy5hcHApPy5zZXR0aW5ncz8uZW5hYmxlU2lkZWJhclByZXZpZXdzO1xuICAgIGNvbnN0IHdyYXAgPSB0aGlzLmNvbnRlbnRFbDsgLy8gcGFyZW50IGNvbnRhaW5lciBmb3IgdGhpcyB2aWV3XG4gICAgY29uc3QgcGFnZVByZXZpZXcgPSAodGhpcy5hcHAgYXMgYW55KS5pbnRlcm5hbFBsdWdpbnM/LmdldFBsdWdpbkJ5SWQ/LigncGFnZS1wcmV2aWV3Jyk/Lmluc3RhbmNlO1xuXG4gICAgLy8gSWYgcHJldmlvdXNseSB3aXJlZCBidXQgbm93IGRpc2FibGVkLCByZW1vdmUgdGhlIGhhbmRsZXJcbiAgICBpZiAoKHdyYXAgYXMgYW55KS5fdnZIb3ZlcldpcmVkICYmICFlbmFibGVQcmV2aWV3KSB7XG4gICAgICBjb25zdCBwcmV2ID0gKHdyYXAgYXMgYW55KS5fdnZIb3ZlckhhbmRsZXIgYXMgKChldjogTW91c2VFdmVudCkgPT4gdm9pZCkgfCB1bmRlZmluZWQ7XG4gICAgICBpZiAocHJldikgd3JhcC5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCBwcmV2KTtcbiAgICAgIGRlbGV0ZSAod3JhcCBhcyBhbnkpLl92dkhvdmVyV2lyZWQ7XG4gICAgICBkZWxldGUgKHdyYXAgYXMgYW55KS5fdnZIb3ZlckhhbmRsZXI7XG4gICAgfVxuXG4gICAgLy8gSWYgZW5hYmxlZCBhbmQgbm90IHlldCB3aXJlZCwgYXR0YWNoIGhhbmRsZXJcbiAgICBpZiAoZW5hYmxlUHJldmlldyAmJiBwYWdlUHJldmlldz8ub25MaW5rSG92ZXIgJiYgISh3cmFwIGFzIGFueSkuX3Z2SG92ZXJXaXJlZCkge1xuICAgICAgY29uc3QgaGFuZGxlciA9IChldjogTW91c2VFdmVudCkgPT4ge1xuICAgICAgICBjb25zdCB0ID0gZXYudGFyZ2V0IGFzIEhUTUxFbGVtZW50IHwgbnVsbDtcbiAgICAgICAgY29uc3QgYSA9IHQ/LmNsb3Nlc3QoJ2EuaW50ZXJuYWwtbGluaycpIGFzIEhUTUxBbmNob3JFbGVtZW50IHwgbnVsbDtcbiAgICAgICAgaWYgKCFhKSByZXR1cm47XG4gICAgICAgIGNvbnN0IGxpbmtUZXh0ID0gYS5nZXRBdHRyaWJ1dGUoJ2RhdGEtaHJlZicpIHx8IGEuZ2V0QXR0cmlidXRlKCdocmVmJyk7XG4gICAgICAgIGlmICghbGlua1RleHQpIHJldHVybjtcbiAgICAgICAgLy8gc291cmNlIHBhdGggbm90IGNyaXRpY2FsIGhlcmU7IHBhc3MgZW1wdHkgc2luY2UgdGhlc2UgbGlua3MgY2FuIGNvbWUgZnJvbSBtaXhlZCBzb3VyY2VzXG4gICAgICAgIHBhZ2VQcmV2aWV3Lm9uTGlua0hvdmVyKGV2LCBhLCBsaW5rVGV4dCwgJycpO1xuICAgICAgfTtcbiAgICAgIHdyYXAuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgaGFuZGxlcik7XG4gICAgICAod3JhcCBhcyBhbnkpLl92dkhvdmVyV2lyZWQgPSB0cnVlO1xuICAgICAgKHdyYXAgYXMgYW55KS5fdnZIb3ZlckhhbmRsZXIgPSBoYW5kbGVyO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgcmVuZGVyUGlja3MoKTogdm9pZCB7XG4gICAgY29uc3QgcGlja3NEaXYgPSB0aGlzLmNvbnRhaW5lckVsLmZpbmQoJyNzcGVsbGJvb2stcGlja3MnKSBhcyBIVE1MRGl2RWxlbWVudDtcbiAgICBpZiAoIXBpY2tzRGl2KSByZXR1cm47XG4gICAgcGlja3NEaXYuZW1wdHkoKTtcblxuICAgIC8vIE91dGVyIHdyYXBwZXIgd2l0aCBibGFjayBib3JkZXJcbiAgICBjb25zdCB3cmFwcGVyID0gcGlja3NEaXYuY3JlYXRlRGl2KCk7XG4gICAgd3JhcHBlci5zZXRBdHRyKCdzdHlsZScsIFtcbiAgICAgICdib3JkZXI6MS41cHggc29saWQgYmxhY2snLFxuICAgICAgJ2JvcmRlci1yYWRpdXM6NnB4JyxcbiAgICAgICdwYWRkaW5nOjhweCcsXG4gICAgICAnbWFyZ2luLXRvcDo4cHgnLFxuICAgICAgJ2JhY2tncm91bmQ6dmFyKC0tYmFja2dyb3VuZC1zZWNvbmRhcnkpJ1xuICAgIF0uam9pbignOycpKTtcblxuICAgIGNvbnN0IGRldGFpbHMgPSB3cmFwcGVyLmNyZWF0ZUVsKCdkZXRhaWxzJywgeyBhdHRyOiB7IG9wZW46ICd0cnVlJyB9IH0pO1xuXG4gICAgLy8gSGVhZGVyIHdpdGhvdXQgYm9yZGVyIG5vd1xuICAgIGNvbnN0IHN1bW1hcnkgPSBkZXRhaWxzLmNyZWF0ZUVsKCdzdW1tYXJ5JywgeyB0ZXh0OiAnU2VsZWN0ZWQgU3BlbGxzJyB9KTtcbiAgICBzdW1tYXJ5LnNldEF0dHIoJ3N0eWxlJywgW1xuICAgICAgJ2ZvbnQtc2l6ZToxLjFlbScsXG4gICAgICAnZm9udC13ZWlnaHQ6NjAwJyxcbiAgICAgICdtYXJnaW46MCAwIDRweCcsXG4gICAgICAnY3Vyc29yOnBvaW50ZXInLFxuICAgICAgJ3BhZGRpbmc6NHB4IDhweCcsXG4gICAgICAnYmFja2dyb3VuZDp2YXIoLS1iYWNrZ3JvdW5kLXNlY29uZGFyeSknLFxuICAgICAgJ2JvcmRlci1yYWRpdXM6NHB4J1xuICAgIF0uam9pbignOycpKTtcblxuICAgIGNvbnN0IGJvZHkgPSBkZXRhaWxzLmNyZWF0ZURpdigpO1xuICAgIGNvbnN0IGdyaWQgPSBib2R5LmNyZWF0ZURpdigpO1xuICAgIGdyaWQuc2V0QXR0cignc3R5bGUnLCBbXG4gICAgICAnZGlzcGxheTpncmlkJyxcbiAgICAgICdncmlkLXRlbXBsYXRlLWNvbHVtbnM6MWZyJyxcbiAgICAgICdyb3ctZ2FwOjJweCcsXG4gICAgICAnbWFyZ2luOjhweCAwJyxcbiAgICAgICdwYWRkaW5nOjAgMTZweCcgLy9zaWRlcGFkZGluZ1xuICAgIF0uam9pbignOycpKTtcblxuICAgIGlmICghdGhpcy5waWNrcy5sZW5ndGgpIHtcbiAgICAgIGNvbnN0IGVtcHR5ID0gZ3JpZC5jcmVhdGVFbCgnZGl2JywgeyB0ZXh0OiAnTm8gc3BlbGxzIHNlbGVjdGVkIHlldC4nIH0pO1xuICAgICAgZW1wdHkuc2V0QXR0cignc3R5bGUnLCAnb3BhY2l0eTowLjc7Jyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGZvciAoY29uc3QgcGF0aCBvZiB0aGlzLnBpY2tzKSB7XG4gICAgICAgIGNvbnN0IGZpbGUgPSB0aGlzLmFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgocGF0aCk7XG4gICAgICAgIGNvbnN0IHJvdyA9IGdyaWQuY3JlYXRlRGl2KCk7XG4gICAgICAgIHJvdy5zZXRBdHRyKCdzdHlsZScsIFtcbiAgICAgICAgICAnZGlzcGxheTpmbGV4JyxcbiAgICAgICAgICAnYWxpZ24taXRlbXM6Y2VudGVyJyxcbiAgICAgICAgICAnanVzdGlmeS1jb250ZW50OnNwYWNlLWJldHdlZW4nLFxuICAgICAgICAgICdnYXA6OHB4JyxcbiAgICAgICAgICAncGFkZGluZzoycHggMCdcbiAgICAgICAgXS5qb2luKCc7JykpO1xuXG4gICAgICAgIGNvbnN0IG5hbWVMaW5rID0gcm93LmNyZWF0ZUVsKCdhJywge1xuICAgICAgICAgIHRleHQ6ICgoKSA9PiB7XG4gICAgICAgICAgICBpZiAoZmlsZSBpbnN0YW5jZW9mIFRGaWxlKSB7XG4gICAgICAgICAgICAgIGNvbnN0IGZtID0gdGhpcy5hcHAubWV0YWRhdGFDYWNoZS5nZXRGaWxlQ2FjaGUoZmlsZSk/LmZyb250bWF0dGVyO1xuICAgICAgICAgICAgICByZXR1cm4gZm0/Lm5hbWUgfHwgZmlsZS5iYXNlbmFtZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGJhc2UgPSBwYXRoLnNwbGl0KCcvJykucG9wKCkgfHwgcGF0aDtcbiAgICAgICAgICAgIHJldHVybiBiYXNlLnJlcGxhY2UoL1xcLm1kJC8sICcnKTtcbiAgICAgICAgICB9KSgpLFxuICAgICAgICAgIGhyZWY6ICcjJ1xuICAgICAgICB9KTtcblxuICAgICAgICBjb25zdCBlbmFibGVQcmV2aWV3ID0gISFnZXRUb29sa2l0KHRoaXMuYXBwKT8uc2V0dGluZ3M/LmVuYWJsZVNpZGViYXJQcmV2aWV3cztcbiAgICAgICAgaWYgKGVuYWJsZVByZXZpZXcpIHtcbiAgICAgICAgICBpZiAoZmlsZSBpbnN0YW5jZW9mIFRGaWxlKSB7XG4gICAgICAgICAgICBuYW1lTGluay5jbGFzc0xpc3QuYWRkKCdpbnRlcm5hbC1saW5rJyk7XG4gICAgICAgICAgICBuYW1lTGluay5zZXRBdHRyKCdkYXRhLWhyZWYnLCBmaWxlLnBhdGgpO1xuICAgICAgICAgICAgbmFtZUxpbmsuc2V0QXR0cignaHJlZicsIGZpbGUucGF0aCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgbmFtZUxpbmsuc2V0QXR0cignc3R5bGUnLCAnZm9udC13ZWlnaHQ6NjAwOyB0ZXh0LWRlY29yYXRpb246bm9uZTsgY29sb3I6dmFyKC0tdGV4dC1hY2NlbnQpOycpO1xuICAgICAgICBuYW1lTGluay5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGUgPT4ge1xuICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICB0aGlzLmFwcC53b3Jrc3BhY2Uub3BlbkxpbmtUZXh0KHBhdGgsICcnLCBmYWxzZSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIFNtYWxsIFwiXHUwMEQ3XCIgcmVtb3ZlIGljb25cbiAgICAgICAgY29uc3Qgcm1CdG4gPSByb3cuY3JlYXRlRWwoJ3NwYW4nLCB7IHRleHQ6ICdcdTAwRDcnIH0pO1xuICAgICAgICBybUJ0bi5zZXRBdHRyKCdzdHlsZScsICdjdXJzb3I6cG9pbnRlcjsgZm9udC1zaXplOjEuMmVtOyBsaW5lLWhlaWdodDoxOycpO1xuICAgICAgICBybUJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGFzeW5jIGUgPT4ge1xuICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICB0aGlzLnBpY2tzID0gdGhpcy5waWNrcy5maWx0ZXIocCA9PiBwICE9PSBwYXRoKTtcbiAgICAgICAgICBjb25zdCBidG4gPSB0aGlzLmFkZEJ0bkJ5UGF0aC5nZXQocGF0aCk7XG4gICAgICAgICAgaWYgKGJ0bikge1xuICAgICAgICAgICAgYnRuLmRpc2FibGVkID0gZmFsc2U7XG4gICAgICAgICAgICBidG4udGV4dENvbnRlbnQgPSAnXHVGRjBCJztcbiAgICAgICAgICB9XG4gICAgICAgICAgdGhpcy5yZW5kZXJQaWNrcygpO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCBhY3Rpb25zID0gYm9keS5jcmVhdGVEaXYoKTtcbiAgICBhY3Rpb25zLnNldEF0dHIoXG4gICAgICAnc3R5bGUnLFxuICAgICAgJ2Rpc3BsYXk6ZmxleDtnYXA6OHB4O2p1c3RpZnktY29udGVudDpmbGV4LWVuZDttYXJnaW4tdG9wOjRweDsnXG4gICAgKTtcblxuICAgIC8vIENMRUFSIChzZWNvbmRhcnkpXG4gICAgY29uc3QgY2xlYXJCdG4gPSBhY3Rpb25zLmNyZWF0ZUVsKCdidXR0b24nLCB7IHRleHQ6ICdDbGVhcicgfSk7XG4gICAgLy8ga2VlcCBpdCB2aXN1YWxseSBcdTIwMUNzZWNvbmRhcnlcdTIwMURcbiAgICBjbGVhckJ0bi5zZXRBdHRyKCdzdHlsZScsICdvcGFjaXR5OjAuOTsnKTtcbiAgICBjbGVhckJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGUgPT4ge1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgLy8gZW1wdHkgcGlja3NcbiAgICAgIHRoaXMucGlja3MgPSBbXTtcbiAgICAgIC8vIHJlXHUyMDExZW5hYmxlIGFsbCArIGJ1dHRvbnMgd2UgdHJhY2tlZFxuICAgICAgdGhpcy5hZGRCdG5CeVBhdGguZm9yRWFjaCgoYnRuKSA9PiB7XG4gICAgICAgIGlmICghYnRuLmlzQ29ubmVjdGVkKSByZXR1cm47ICAgICAgLy8gaW4gY2FzZSB0YWJsZSByZS1yZW5kZXJlZFxuICAgICAgICBidG4uZGlzYWJsZWQgPSBmYWxzZTtcbiAgICAgICAgYnRuLnRleHRDb250ZW50ID0gJ1x1RkYwQic7XG4gICAgICB9KTtcbiAgICAgIHRoaXMucmVuZGVyUGlja3MoKTtcbiAgICB9KTtcblxuICAgIC8vIENPUFkgKHByaW1hcnkpXG4gICAgY29uc3QgY29weUJ0biA9IGFjdGlvbnMuY3JlYXRlRWwoJ2J1dHRvbicsIHsgdGV4dDogJ0NvcHkgU3BlbGxib29rJyB9KTtcbiAgICBjb3B5QnRuLmNsYXNzTGlzdC5hZGQoJ21vZC1jdGEnKTtcbiAgICAvLyBkaXNhYmxlIHdoZW4gbm90aGluZyBzZWxlY3RlZFxuICAgIGNvcHlCdG4udG9nZ2xlQXR0cmlidXRlKCdkaXNhYmxlZCcsIHRoaXMucGlja3MubGVuZ3RoID09PSAwKTtcblxuICAgIGNvcHlCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBhc3luYyBlID0+IHtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgIGlmICghdGhpcy5waWNrcy5sZW5ndGgpIHJldHVybjtcblxuICAgICAgY29uc3QgbWQgPSB0aGlzLmJ1aWxkRGF0YXZpZXdGb3JQaWNrcygpO1xuICAgICAgdHJ5IHtcbiAgICAgICAgYXdhaXQgbmF2aWdhdG9yLmNsaXBib2FyZC53cml0ZVRleHQobWQpO1xuICAgICAgICBuZXcgTm90aWNlKCdcdUQ4M0RcdURDQ0IgRGF0YXZpZXcgdGFibGUgY29waWVkIHRvIGNsaXBib2FyZC4nKTtcbiAgICAgIH0gY2F0Y2gge1xuICAgICAgICBjb25zdCB0YSA9IGJvZHkuY3JlYXRlRWwoJ3RleHRhcmVhJywgeyB0ZXh0OiBtZCB9KTtcbiAgICAgICAgdGEuc2V0QXR0cignc3R5bGUnLCAnd2lkdGg6MTAwJTtoZWlnaHQ6MjIwcHg7bWFyZ2luLXRvcDo4cHg7Jyk7XG4gICAgICAgIHRhLnNlbGVjdCgpO1xuICAgICAgICBuZXcgTm90aWNlKCdDbGlwYm9hcmQgYmxvY2tlZC4gRGF0YXZpZXcgc2hvd24gYmVsb3dcdTIwMTRjb3B5IG1hbnVhbGx5LicpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cblxuICBhc3luYyBvbk9wZW4oKSB7XG4gICAgdGhpcy5jb250ZW50RWwuZW1wdHkoKTtcblxuICAgIHRoaXMucGlja3MgPSBbXTtcbiAgICB0aGlzLmFkZEJ0bkJ5UGF0aC5jbGVhcigpO1xuXG4gICAgLy8gaGVhZGluZ1xuICAgIHRoaXMuY29udGVudEVsLmNyZWF0ZUVsKCdoNCcsIHsgdGV4dDogJ1RFTVBMQVRFUycgfSk7XG5cbiAgICAvLyB0ZW1wbGF0ZSBidXR0b25zXG4gICAgY29uc3QgYnRuQ29udGFpbmVyID0gdGhpcy5jb250ZW50RWwuY3JlYXRlRGl2KCk7XG4gICAgYnRuQ29udGFpbmVyLmFkZENsYXNzKFwic2ItYnRuXCIpO1xuICAgIGZvciAoY29uc3QgeyBsYWJlbCwgcGF0aCB9IG9mIFRFTVBMQVRFX0JVVFRPTlMpIHtcbiAgICAgIGNvbnN0IGJ0biA9IG5ldyBCdXR0b25Db21wb25lbnQoYnRuQ29udGFpbmVyKVxuICAgICAgICAuc2V0QnV0dG9uVGV4dChsYWJlbClcbiAgICAgICAgLm9uQ2xpY2soKCkgPT4gdGhpcy5ydW5UZW1wbGF0ZShwYXRoKSk7XG4gICAgICBidG4uYnV0dG9uRWwuc3R5bGUuZmxleCA9ICcxJztcbiAgICAgIGJ0bi5idXR0b25FbC5zdHlsZS5taW5XaWR0aCA9ICcxMjBweCc7XG4gICAgfVxuICAgIHRoaXMuY29udGVudEVsLmNyZWF0ZUVsKCdocicsIHsgYXR0cjogeyBzdHlsZTogJ21hcmdpbjogMTJweCAwOycgfSB9KTtcblxuICAgIC8vICBBRFZFTlRVUkUgTElOS1MgXG4gICAgY29uc3QgYWR2RGV0YWlscyA9IHRoaXMuY29udGVudEVsLmNyZWF0ZUVsKCdkZXRhaWxzJywgeyBhdHRyOiB7IG9wZW46ICd0cnVlJyB9IH0pO1xuICAgIGNvbnN0IGFkdlN1bW1hcnkgPSBhZHZEZXRhaWxzLmNyZWF0ZUVsKCdzdW1tYXJ5JywgeyB0ZXh0OiAnQURWRU5UVVJFUycgfSk7XG4gICAgYWR2U3VtbWFyeS5zZXRBdHRyKCdzdHlsZScsICdmb250LXNpemU6IDEuM2VtOyBmb250LXdlaWdodDogNjAwOyBtYXJnaW46IDAuNWVtIDA7Jyk7XG4gICAgY29uc3QgYWR2Q29udGFpbmVyID0gYWR2RGV0YWlscy5jcmVhdGVEaXYoeyBhdHRyOiB7IHN0eWxlOiAnbWFyZ2luOjhweCAwOycgfSB9KTtcblxuICAgIG5ldyBTZXR0aW5nKGFkdkNvbnRhaW5lcilcbiAgICAgIC5zZXROYW1lKCdGaWx0ZXIgYnkgQWR2ZW50dXJlOicpXG4gICAgICAuYWRkRHJvcGRvd24oZHJvcCA9PiB7XG4gICAgICAgIGNvbnN0IG5hbWVzID0gQXJyYXkuZnJvbShuZXcgU2V0KFxuICAgICAgICAgIHRoaXMuYXBwLnZhdWx0LmdldEZpbGVzKClcbiAgICAgICAgICAgIC5maWx0ZXIoZiA9PiBmLnBhdGguc3RhcnRzV2l0aCgnQWR2ZW50dXJlcy8nKSlcbiAgICAgICAgICAgIC5tYXAoZiA9PiBmLnBhdGguc3BsaXQoJy8nKVsxXSlcbiAgICAgICAgKSk7XG4gICAgICAgIGRyb3AuYWRkT3B0aW9uKCcnLCAnXHUyMDE0IHBpY2sgb25lIFx1MjAxNCcpO1xuICAgICAgICBuYW1lcy5mb3JFYWNoKG4gPT4gZHJvcC5hZGRPcHRpb24obiwgbikpO1xuXG4gICAgICAgIGRyb3Aub25DaGFuZ2UoYXN5bmMgYWR2ID0+IHtcbiAgICAgICAgICBhZHZDb250YWluZXIuZmluZEFsbCgnLnZ2dW5kZXJsb3JlLWFkdmVudHVyZS1hc3NldHMnKS5mb3JFYWNoKGVsID0+IGVsLnJlbW92ZSgpKTtcbiAgICAgICAgICBjb25zdCB3cmFwcGVyID0gYWR2Q29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogJ3Z2dW5kZXJsb3JlLWFkdmVudHVyZS1hc3NldHMnIH0pO1xuICAgICAgICAgIGlmICghYWR2KSByZXR1cm47XG5cbiAgICAgICAgICBjb25zdCBxdWljayA9IHdyYXBwZXIuY3JlYXRlRGl2KCk7XG4gICAgICAgICAgcXVpY2suc2V0QXR0cignc3R5bGUnLCAnZGlzcGxheTpmbGV4O2p1c3RpZnktY29udGVudDpjZW50ZXI7Z2FwOjIwcHg7ZmxleC13cmFwOndyYXA7bWFyZ2luOjZweCAwIDEwcHg7Jyk7XG5cbiAgICAgICAgICBjb25zdCBodWJFeGFjdFBhdGggPSBgQWR2ZW50dXJlcy8ke2Fkdn0vJHthZHZ9IC0gQWR2ZW50dXJlIEh1Yi5tZGA7XG4gICAgICAgICAgbGV0IGh1YkZpbGU6IFRGaWxlIHwgbnVsbCA9IG51bGw7XG5cbiAgICAgICAgICBjb25zdCBleGFjdCA9IHRoaXMuYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChodWJFeGFjdFBhdGgpO1xuICAgICAgICAgIGlmIChleGFjdCBpbnN0YW5jZW9mIFRGaWxlKSB7XG4gICAgICAgICAgICBodWJGaWxlID0gZXhhY3Q7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGh1YkZpbGUgPSAodGhpcy5hcHAudmF1bHQuZ2V0RmlsZXMoKS5maW5kKGYgPT5cbiAgICAgICAgICAgICAgZi5wYXRoLnN0YXJ0c1dpdGgoYEFkdmVudHVyZXMvJHthZHZ9L2ApICYmXG4gICAgICAgICAgICAgIGYucGFyZW50Py5wYXRoID09PSBgQWR2ZW50dXJlcy8ke2Fkdn1gICYmXG4gICAgICAgICAgICAgIGYuYmFzZW5hbWUudG9Mb3dlckNhc2UoKS5pbmNsdWRlcygnYWR2ZW50dXJlIGh1YicpXG4gICAgICAgICAgICApID8/IG51bGwpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmIChodWJGaWxlKSB7XG4gICAgICAgICAgICBjb25zdCBodWJMaW5rID0gcXVpY2suY3JlYXRlRWwoJ2EnLCB7IHRleHQ6ICdBZHZlbnR1cmUgSHViJywgaHJlZjogJyMnIH0pO1xuICAgICAgICAgICAgaHViTGluay5hZGRDbGFzcygnc2ItYWR2LW5hdicpO1xuICAgICAgICAgICAgaHViTGluay5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGUgPT4ge1xuICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgIHRoaXMuYXBwLndvcmtzcGFjZS5vcGVuTGlua1RleHQoaHViRmlsZSEucGF0aCwgJycsIGZhbHNlKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgY29uc3QgZW5hYmxlUHJldmlldyA9ICEhZ2V0VG9vbGtpdCh0aGlzLmFwcCk/LnNldHRpbmdzPy5lbmFibGVTaWRlYmFyUHJldmlld3M7XG4gICAgICAgICAgICBpZiAoZW5hYmxlUHJldmlldykge1xuICAgICAgICAgICAgICBjb25zdCBwID0gaHViRmlsZSEucGF0aCAvKiBvciBsYXRlc3QucGF0aCBmb3Igc2Vzc2lvbkxpbmsgKi87XG4gICAgICAgICAgICAgIGh1YkxpbmsuY2xhc3NMaXN0LmFkZCgnaW50ZXJuYWwtbGluaycpO1xuICAgICAgICAgICAgICBodWJMaW5rLnNldEF0dHIoJ2RhdGEtaHJlZicsIHApO1xuICAgICAgICAgICAgICBodWJMaW5rLnNldEF0dHIoJ2hyZWYnLCBwKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG5cbiAgICAgICAgICBjb25zdCBzZXNzaW9uRGlyID0gYEFkdmVudHVyZXMvJHthZHZ9L1Nlc3Npb24gTm90ZXMvYDtcbiAgICAgICAgICBjb25zdCBzZXNzaW9uRmlsZXMgPSB0aGlzLmFwcC52YXVsdC5nZXRGaWxlcygpLmZpbHRlcihmID0+IGYucGF0aC5zdGFydHNXaXRoKHNlc3Npb25EaXIpKTtcbiAgICAgICAgICBpZiAoc2Vzc2lvbkZpbGVzLmxlbmd0aCkge1xuICAgICAgICAgICAgc2Vzc2lvbkZpbGVzLnNvcnQoKGEsIGIpID0+IGIuc3RhdC5tdGltZSAtIGEuc3RhdC5tdGltZSk7XG4gICAgICAgICAgICBjb25zdCBsYXRlc3QgPSBzZXNzaW9uRmlsZXNbMF07XG4gICAgICAgICAgICBjb25zdCBzZXNzaW9uTGluayA9IHF1aWNrLmNyZWF0ZUVsKCdhJywgeyB0ZXh0OiAnTW9zdCBSZWNlbnQgU2Vzc2lvbicsIGhyZWY6ICcjJyB9KTtcbiAgICAgICAgICAgIHNlc3Npb25MaW5rLmFkZENsYXNzKCdzYi1hZHYtbmF2Jyk7XG4gICAgICAgICAgICBzZXNzaW9uTGluay5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGUgPT4ge1xuICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgIHRoaXMuYXBwLndvcmtzcGFjZS5vcGVuTGlua1RleHQobGF0ZXN0LnBhdGgsICcnLCBmYWxzZSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGNvbnN0IGVuYWJsZVByZXZpZXcgPSAhIWdldFRvb2xraXQodGhpcy5hcHApPy5zZXR0aW5ncz8uZW5hYmxlU2lkZWJhclByZXZpZXdzO1xuICAgICAgICAgICAgaWYgKGVuYWJsZVByZXZpZXcpIHtcbiAgICAgICAgICAgICAgY29uc3QgcCA9IGxhdGVzdC5wYXRoIC8qIG9yIGxhdGVzdC5wYXRoIGZvciBzZXNzaW9uTGluayAqLztcbiAgICAgICAgICAgICAgc2Vzc2lvbkxpbmsuY2xhc3NMaXN0LmFkZCgnaW50ZXJuYWwtbGluaycpO1xuICAgICAgICAgICAgICBzZXNzaW9uTGluay5zZXRBdHRyKCdkYXRhLWhyZWYnLCBwKTtcbiAgICAgICAgICAgICAgc2Vzc2lvbkxpbmsuc2V0QXR0cignaHJlZicsIHApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cblxuICAgICAgICAgIGNvbnN0IGxpc3QgPSB3cmFwcGVyLmNyZWF0ZURpdigpO1xuICAgICAgICAgIGF3YWl0IHRoaXMuc2hvd0FkdmVudHVyZUFzc2V0cyhhZHYsIGxpc3QpO1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuXG4gICAgdGhpcy5jb250ZW50RWwuY3JlYXRlRWwoJ2hyJyk7XG5cbiAgICAvLyBcdTI1MDBcdTI1MDBcdTI1MDAgU1BFTExCT09LIFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFxuICAgIGF3YWl0IHRoaXMuc2hvd1NwZWxsYm9va1NlY3Rpb24oKTtcblxuICAgIHRoaXMuX3Jld2lyZVByZXZpZXdzKCk7IC8vIGluaXRpYWxcbiAgICB0aGlzLnJlZ2lzdGVyRXZlbnQoXG4gICAgICAodGhpcy5hcHAud29ya3NwYWNlIGFzIGFueSkub24oJ3Z2OnNpZGViYXItcHJldmlld3MtY2hhbmdlZCcsIChfZGF0YT86IHsgZW5hYmxlZDogYm9vbGVhbiB9KSA9PiB7XG4gICAgICAgIHRoaXMuX3Jld2lyZVByZXZpZXdzKCk7XG4gICAgICB9KVxuICAgICk7XG4gIH1cblxuICBhc3luYyBvbkNsb3NlKCkge1xuICAgIHRoaXMucGlja3MgPSBbXTtcbiAgICB0aGlzLmFkZEJ0bkJ5UGF0aC5jbGVhcigpO1xuICAgIHRoaXMuY29udGVudEVsLmVtcHR5KCk7XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIHJ1blRlbXBsYXRlKHBhdGg6IHN0cmluZykge1xuICAgIGNvbnN0IHRwbCA9IHRoaXMuYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChwYXRoKTtcbiAgICBpZiAoISh0cGwgaW5zdGFuY2VvZiBURmlsZSkpIHtcbiAgICAgIG5ldyBOb3RpY2UoYFx1MjZBMFx1RkUwRiBUZW1wbGF0ZSBub3QgZm91bmQ6ICR7cGF0aH1gKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCB0cE9icyA9IHRoaXMuYXBwLnBsdWdpbnMuZ2V0UGx1Z2luKCd0ZW1wbGF0ZXItb2JzaWRpYW4nKSBhcyBhbnk7XG4gICAgY29uc3QgdHBBbHQgPSB0aGlzLmFwcC5wbHVnaW5zLmdldFBsdWdpbigndGVtcGxhdGVyJykgYXMgYW55O1xuICAgIGNvbnN0IHRlbXBsYXRlciA9IHRwT2JzIHx8IHRwQWx0O1xuICAgIGlmICghdGVtcGxhdGVyKSB7XG4gICAgICBuZXcgTm90aWNlKCdcdTI2QTBcdUZFMEYgQ291bGQgbm90IGZpbmQgVGVtcGxhdGVyIFx1MjAxMyBpcyBpdCBlbmFibGVkPycpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IHRwT2JqID0gdGVtcGxhdGVyLnRlbXBsYXRlcj8uY3VycmVudF9mdW5jdGlvbnNfb2JqZWN0O1xuICAgIGlmICghdHBPYmopIHtcbiAgICAgIG5ldyBOb3RpY2UoJ1x1MjZBMFx1RkUwRiBUZW1wbGF0ZXIgQVBJIG5vdCByZWFkeVx1MjAxNGFkZCBhIHN0YXJ0dXAgdGVtcGxhdGUgYW5kIHJlc3RhcnQuJyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgcmF3U2VsID0gd2luZG93LmdldFNlbGVjdGlvbigpPy50b1N0cmluZygpLnRyaW0oKSB8fCAnJztcblxuICAgIGlmIChyYXdTZWwpIHtcbiAgICAgIC8vIGNhcHR1cmUgdGhlIGVkaXRvciArIGV4YWN0IHNlbGVjdGlvbiB1cCBmcm9udCAoYnV0IGRvbid0IG11dGF0ZSB5ZXQpXG4gICAgICBjb25zdCBzcmNWaWV3ID0gdGhpcy5hcHAud29ya3NwYWNlLmdldEFjdGl2ZVZpZXdPZlR5cGUoTWFya2Rvd25WaWV3KTtcbiAgICAgIGNvbnN0IHNlbGVjdGVkVGV4dCA9XG4gICAgICAgIHNyY1ZpZXc/LmVkaXRvci5nZXRTZWxlY3Rpb24oKT8udHJpbSgpIHx8IHJhd1NlbDtcblxuICAgICAgLy8gc2FuaXRpemUgYSBmaWxlbmFtZSBmcm9tIHRoZSBzZWxlY3Rpb25cbiAgICAgIGNvbnN0IGJhc2UgPSBzZWxlY3RlZFRleHQucmVwbGFjZSgvW1xcLzoqP1wiPD58XS9nLCAnJykuc2xpY2UoMCwgMTAwKTtcblxuICAgICAgLy8gZmlndXJlIG91dCBkZXN0aW5hdGlvbiBhcyB5b3UgaGFkIGJlZm9yZVxuICAgICAgY29uc3QgVEVNUExBVEVfREVTVDogUmVjb3JkPHN0cmluZywgc3RyaW5nPiA9IHtcbiAgICAgICAgJ25ld2FkdmVudHVyZV90ZW1wbGF0ZS5tZCc6ICdBZHZlbnR1cmVzJyxcbiAgICAgICAgJ3BsYXllcmNoYXJhY3Rlcl90ZW1wbGF0ZS5tZCc6ICdXb3JsZC9QZW9wbGUvUGxheWVyIENoYXJhY3RlcnMvQWN0aXZlJyxcbiAgICAgICAgJ25wY190ZW1wbGF0ZS5tZCc6ICdXb3JsZC9QZW9wbGUvTm9uLVBsYXllciBDaGFyYWN0ZXJzJyxcbiAgICAgICAgJ25ld2l0ZW1fdGVtcGxhdGUubWQnOiAnRXh0cmFzL0l0ZW1zJyxcbiAgICAgICAgJ25ld3BsYWNlX3RlbXBsYXRlLm1kJzogJ1dvcmxkL1BsYWNlcycsXG4gICAgICAgICduZXdjcmVhdHVyZV90ZW1wbGF0ZS5tZCc6ICdCZXN0aWFyeScsXG4gICAgICB9O1xuICAgICAgY29uc3QgZGVzdFBhdGggPSBURU1QTEFURV9ERVNUW3RwbFsnbmFtZSddXSB8fCAodHBsIGFzIFRGaWxlKS5wYXJlbnQhLnBhdGg7XG5cbiAgICAgIC8vIGVuc3VyZSBmb2xkZXIgZXhpc3RzIChzYW1lIGFzIGJlZm9yZSlcbiAgICAgIGxldCBkZXN0Rm9sZGVyUmF3ID0gdGhpcy5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKGRlc3RQYXRoKTtcbiAgICAgIGlmICghKGRlc3RGb2xkZXJSYXcgaW5zdGFuY2VvZiBURm9sZGVyKSkge1xuICAgICAgICB0cnkgeyBhd2FpdCB0aGlzLmFwcC52YXVsdC5jcmVhdGVGb2xkZXIoZGVzdFBhdGgpOyB9IGNhdGNoIHsgfVxuICAgICAgICBkZXN0Rm9sZGVyUmF3ID0gdGhpcy5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKGRlc3RQYXRoKTtcbiAgICAgIH1cbiAgICAgIGlmICghKGRlc3RGb2xkZXJSYXcgaW5zdGFuY2VvZiBURm9sZGVyKSkge1xuICAgICAgICBuZXcgTm90aWNlKGBcdTI2QTBcdUZFMEYgQ291bGQgbm90IGNyZWF0ZSBmb2xkZXI6ICR7ZGVzdFBhdGh9YCk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGNvbnN0IGRlc3RGb2xkZXIgPSBkZXN0Rm9sZGVyUmF3IGFzIFRGb2xkZXI7XG5cbiAgICAgIC8vIHJ1biB0aGUgdGVtcGxhdGUgdG8gY3JlYXRlIHRoZSBuZXcgbm90ZVxuICAgICAgbGV0IG5ld0ZpbGU6IFRGaWxlO1xuICAgICAgdHJ5IHtcbiAgICAgICAgbmV3RmlsZSA9IGF3YWl0IHRwT2JqLmZpbGUuY3JlYXRlX25ldyhcbiAgICAgICAgICB0cGwsXG4gICAgICAgICAgYmFzZSxcbiAgICAgICAgICB0cnVlLFxuICAgICAgICAgIGRlc3RGb2xkZXJcbiAgICAgICAgKTtcbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignVGVtcGxhdGVyLmNyZWF0ZV9uZXcgZmFpbGVkJywgZSk7XG4gICAgICAgIG5ldyBOb3RpY2UoJ1x1Mjc0QyBDb3VsZCBub3QgaW5zdGFudGlhdGUgdGVtcGxhdGUuJyk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgLy8gKG9wdGlvbmFsKSB5b3VyIHN0cmF5IG1lcmdlIGxvZ2ljIGhlcmVcdTIwMjZcblxuICAgICAgLy8gQ2hlY2sgaWYgdGhlIHRlbXBsYXRlIHdhcyBjYW5jZWxlZCBhbmQgZGVsZXRlZCB0aGUgZmlsZS5cbiAgICAgIGNvbnN0IHN0aWxsRXhpc3RzID0gdGhpcy5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKG5ld0ZpbGUucGF0aCkgaW5zdGFuY2VvZiBURmlsZTtcblxuICAgICAgLy8gT25seSBub3csIGFmdGVyIHN1Y2Nlc3MsIHR1cm4gdGhlIG9yaWdpbmFsIHNlbGVjdGlvbiBpbnRvIGEgbGluay5cbiAgICAgIGlmIChzdGlsbEV4aXN0cyAmJiBzcmNWaWV3ICYmIHNlbGVjdGVkVGV4dCkge1xuICAgICAgICBjb25zdCBlZCA9IHNyY1ZpZXcuZWRpdG9yO1xuICAgICAgICBjb25zdCBjdXJyZW50ID0gZWQuZ2V0VmFsdWUoKTtcbiAgICAgICAgY29uc3QgbGluayA9IGBbWyR7YmFzZX1dXWA7XG5cbiAgICAgICAgLy8gUHJlZmVyIHJlcGxhY2luZyB0aGUgZXhhY3QgZmlyc3Qgb2NjdXJyZW5jZSBvZiB0aGUgY2FwdHVyZWQgdGV4dFxuICAgICAgICBpZiAoY3VycmVudC5pbmNsdWRlcyhzZWxlY3RlZFRleHQpKSB7XG4gICAgICAgICAgY29uc3QgdXBkYXRlZCA9IGN1cnJlbnQucmVwbGFjZShzZWxlY3RlZFRleHQsIGxpbmspO1xuICAgICAgICAgIGF3YWl0IHRoaXMuYXBwLnZhdWx0Lm1vZGlmeShzcmNWaWV3LmZpbGUhLCB1cGRhdGVkKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBGYWxsYmFjazogaWYgc2VsZWN0aW9uIGlzIHN0aWxsIGFjdGl2ZSwgcmVwbGFjZSBpdFxuICAgICAgICAgIGVkLnJlcGxhY2VTZWxlY3Rpb24obGluayk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gb3BlbiB0aGUgbmV3IGZpbGUgKG9ubHkgaWYgaXQgYWN0dWFsbHkgZXhpc3RzKVxuICAgICAgaWYgKHN0aWxsRXhpc3RzKSB7XG4gICAgICAgIHRoaXMuYXBwLndvcmtzcGFjZS5nZXRMZWFmKHRydWUpLm9wZW5GaWxlKG5ld0ZpbGUpO1xuICAgICAgfVxuXG4gICAgfSBlbHNlIHtcbiAgICAgIGxldCB3cmFwcGVyRmlsZTogVEZpbGU7XG4gICAgICB0cnkge1xuICAgICAgICB3cmFwcGVyRmlsZSA9IGF3YWl0IHRwT2JqLmZpbGUuY3JlYXRlX25ldyhcbiAgICAgICAgICB0cGwsXG4gICAgICAgICAgdW5kZWZpbmVkLFxuICAgICAgICAgIGZhbHNlXG4gICAgICAgICk7XG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGludm9raW5nIFRlbXBsYXRlcjonLCBlKTtcbiAgICAgICAgbmV3IE5vdGljZSgnXHUyNzRDIEZhaWxlZCB0byBydW4gdGVtcGxhdGU7IGNoZWNrIGNvbnNvbGUuJyk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgdHJ5IHtcbiAgICAgICAgYXdhaXQgdGhpcy5hcHAudmF1bHQuZGVsZXRlKHdyYXBwZXJGaWxlKTtcbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgY29uc29sZS53YXJuKCdDb3VsZCBub3QgZGVsZXRlIHdyYXBwZXIgZmlsZTonLCBlKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvLy0tLS0tLS0rKysrKysrKysrKyBBRFZFTlRVUkUgRklMVEVSXG5cbiAgcHJpdmF0ZSBhc3luYyBzaG93QWR2ZW50dXJlQXNzZXRzKGFkdmVudHVyZU5hbWU6IHN0cmluZywgcmVuZGVySW50bzogSFRNTEVsZW1lbnQpIHtcbiAgICBjb25zdCBwcmVmaXggPSBgQWR2ZW50dXJlcy8ke2FkdmVudHVyZU5hbWV9L2A7XG4gICAgY29uc3QgZmlsZXMgPSB0aGlzLmFwcC52YXVsdFxuICAgICAgLmdldEZpbGVzKClcbiAgICAgIC5maWx0ZXIoZiA9PiBmLnBhdGguc3RhcnRzV2l0aChwcmVmaXgpKTtcblxuICAgIGNvbnN0IGxpbmtlZFBhdGhzID0gbmV3IFNldDxzdHJpbmc+KCk7XG4gICAgZm9yIChjb25zdCBmaWxlIG9mIGZpbGVzKSB7XG4gICAgICBjb25zdCBjYWNoZSA9IHRoaXMuYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0RmlsZUNhY2hlKGZpbGUpO1xuICAgICAgKGNhY2hlPy5saW5rcyB8fCBbXSkuZm9yRWFjaChsaW5rID0+IHtcbiAgICAgICAgY29uc3QgZGVzdCA9IHRoaXMuYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0Rmlyc3RMaW5rcGF0aERlc3QobGluay5saW5rLCBmaWxlLnBhdGgpO1xuICAgICAgICBpZiAoZGVzdCkgbGlua2VkUGF0aHMuYWRkKGRlc3QucGF0aCk7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICByZW5kZXJJbnRvLmVtcHR5KCk7XG4gICAgaWYgKGxpbmtlZFBhdGhzLnNpemUgPT09IDApIHtcbiAgICAgIHJlbmRlckludG8uY3JlYXRlRWwoJ2RpdicsIHsgdGV4dDogJ05vIGxpbmtlZCBwYWdlcyBmb3VuZC4nIH0pO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IG92ZXJyaWRlczogW1JlZ0V4cCwgc3RyaW5nXVtdID0gW1xuICAgICAgWy9Ob24tUGxheWVyIENoYXJhY3RlcnNcXC8vLCAnTlBDcyddLFxuICAgICAgWy9QbGF5ZXIgQ2hhcmFjdGVyc1xcLy8sICdQbGF5ZXIgQ2hhcmFjdGVycyddLFxuICAgICAgWy9GYWN0aW9uc1xcLy8sICdGYWN0aW9ucyddLFxuICAgICAgWy9Db21wZW5kaXVtXFwvQmVzdGlhcnlcXC8vLCAnTW9uc3RlcnMnXSxcbiAgICAgIFsvQ29tcGVuZGl1bVxcL0l0ZW1zXFwvLywgJ0l0ZW1zJ10sXG4gICAgICBbL0NvbXBlbmRpdW1cXC9TcGVsbHNcXC8vLCAnU3BlbGxzJ10sXG4gICAgICBbL1dvcmxkXFwvSGlzdG9yeVxcLy8sICdIaXN0b3J5J10sXG4gICAgICBbL1dvcmxkXFwvRXZlbnRzXFwvLywgJ0V2ZW50cyddLFxuICAgICAgWy9EZWl0aWVzXFwvLywgJ0RlaXRpZXMnXSxcbiAgICAgIFsvV29ybGRcXC9QbGFjZXNcXC8vLCAnUGxhY2VzJ10sXG4gICAgXTtcblxuICAgIGNvbnN0IGdyb3VwczogUmVjb3JkPHN0cmluZywgc3RyaW5nW10+ID0ge307XG4gICAgZm9yIChjb25zdCBmdWxsUGF0aCBvZiBsaW5rZWRQYXRocykge1xuICAgICAgbGV0IHNlY3Rpb24gPSAnT3RoZXInO1xuICAgICAgZm9yIChjb25zdCBbcGF0dGVybiwgbmFtZV0gb2Ygb3ZlcnJpZGVzKSB7XG4gICAgICAgIGlmIChwYXR0ZXJuLnRlc3QoZnVsbFBhdGgpKSB7IHNlY3Rpb24gPSBuYW1lOyBicmVhazsgfVxuICAgICAgfVxuICAgICAgKGdyb3Vwc1tzZWN0aW9uXSB8fD0gW10pLnB1c2goZnVsbFBhdGgpO1xuICAgIH1cblxuICAgIGZvciAoY29uc3Qgc2VjdGlvbiBvZiBPYmplY3Qua2V5cyhncm91cHMpLnNvcnQoKSkge1xuICAgICAgY29uc3QgZGV0YWlscyA9IHJlbmRlckludG8uY3JlYXRlRWwoJ2RldGFpbHMnLCB7IGF0dHI6IHsgb3BlbjogJ3RydWUnIH0gfSk7XG4gICAgICBjb25zdCBzdW1tYXJ5ID0gZGV0YWlscy5jcmVhdGVFbCgnc3VtbWFyeScsIHsgdGV4dDogc2VjdGlvbiB9KTtcbiAgICAgIHN1bW1hcnkuYWRkQ2xhc3MoXCJzYi1zdW1tYXJ5XCIpO1xuXG4gICAgICBjb25zdCBncmlkID0gZGV0YWlscy5jcmVhdGVEaXYoKTtcbiAgICAgIGdyaWQuYWRkQ2xhc3MoXCJzYi1hZHYtZ3JpZFwiKTtcblxuICAgICAgZ3JvdXBzW3NlY3Rpb25dXG4gICAgICAgIC5zb3J0KChhLCBiKSA9PiB7XG4gICAgICAgICAgY29uc3QgYU5hbWUgPSBhLnNwbGl0KCcvJykucG9wKCkhLnJlcGxhY2UoL1xcLm1kJC8sICcnKS50b0xvd2VyQ2FzZSgpO1xuICAgICAgICAgIGNvbnN0IGJOYW1lID0gYi5zcGxpdCgnLycpLnBvcCgpIS5yZXBsYWNlKC9cXC5tZCQvLCAnJykudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgICByZXR1cm4gYU5hbWUubG9jYWxlQ29tcGFyZShiTmFtZSk7XG4gICAgICAgIH0pXG4gICAgICAgIC5mb3JFYWNoKHBhdGggPT4ge1xuICAgICAgICAgIGNvbnN0IG5hbWUgPSBwYXRoLnNwbGl0KCcvJykucG9wKCkhLnJlcGxhY2UoL1xcLm1kJC8sICcnKTtcbiAgICAgICAgICBjb25zdCBsaW5rRWwgPSBncmlkLmNyZWF0ZUVsKCdhJywgeyB0ZXh0OiBuYW1lLCBocmVmOiAnIycgfSk7XG4gICAgICAgICAgbGlua0VsLmFkZENsYXNzKFwic2ItYWR2LWxpbmtzXCIpO1xuICAgICAgICAgIGxpbmtFbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuYXBwLndvcmtzcGFjZS5vcGVuTGlua1RleHQocGF0aCwgJycsIGZhbHNlKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBjb25zdCBlbmFibGVQcmV2aWV3ID0gISFnZXRUb29sa2l0KHRoaXMuYXBwKT8uc2V0dGluZ3M/LmVuYWJsZVNpZGViYXJQcmV2aWV3cztcbiAgICAgICAgICBpZiAoZW5hYmxlUHJldmlldykge1xuICAgICAgICAgICAgbGlua0VsLmNsYXNzTGlzdC5hZGQoJ2ludGVybmFsLWxpbmsnKTtcbiAgICAgICAgICAgIGxpbmtFbC5zZXRBdHRyKCdkYXRhLWhyZWYnLCBwYXRoKTtcbiAgICAgICAgICAgIGxpbmtFbC5zZXRBdHRyKCdocmVmJywgcGF0aCk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG4gIH1cblxuICAvLy0tLS0tLS0tLV8rKysrKysrKysrIFNQRUxMQk9PS1xuICBwcml2YXRlIGFzeW5jIHNob3dTcGVsbGJvb2tTZWN0aW9uKCk6IFByb21pc2U8dm9pZD4ge1xuICAgIGNvbnN0IHNiRGV0YWlscyA9IHRoaXMuY29udGVudEVsLmNyZWF0ZUVsKCdkZXRhaWxzJyk7XG4gICAgc2JEZXRhaWxzLmNyZWF0ZUVsKCdzdW1tYXJ5JywgeyB0ZXh0OiAnU1BFTExCT09LJyB9KVxuICAgICAgLnNldEF0dHIoJ3N0eWxlJywgJ2ZvbnQtc2l6ZToxLjNlbTtmb250LXdlaWdodDo2MDA7bWFyZ2luOjAuNWVtIDA7Jyk7XG4gICAgY29uc3QgY29udGFpbmVyID0gc2JEZXRhaWxzLmNyZWF0ZURpdih7XG4gICAgICBhdHRyOiB7IHN0eWxlOiAnZGlzcGxheTpmbGV4O2ZsZXgtZGlyZWN0aW9uOmNvbHVtbjtnYXA6OHB4O21hcmdpbjo4cHggMDsnIH1cbiAgICB9KTtcblxuICAgIC8vIDEpIEJ1aWxkIFNldHNcbiAgICBjb25zdCBzcGVsbEZpbGVzID0gdGhpcy5hcHAudmF1bHQuZ2V0TWFya2Rvd25GaWxlcygpXG4gICAgICAuZmlsdGVyKGYgPT4gZi5wYXRoLnN0YXJ0c1dpdGgoJ0NvbXBlbmRpdW0vU3BlbGxzJykpO1xuICAgIGNvbnN0IGxldmVscyA9IG5ldyBTZXQ8bnVtYmVyPigpO1xuICAgIGNvbnN0IHNjaG9vbHMgPSBuZXcgU2V0PHN0cmluZz4oKTtcbiAgICBjb25zdCBkYW1hZ2VzID0gbmV3IFNldDxzdHJpbmc+KCk7XG4gICAgZm9yIChjb25zdCBmIG9mIHNwZWxsRmlsZXMpIHtcbiAgICAgIGNvbnN0IGZtID0gdGhpcy5hcHAubWV0YWRhdGFDYWNoZS5nZXRGaWxlQ2FjaGUoZik/LmZyb250bWF0dGVyO1xuICAgICAgaWYgKCFmbSkgY29udGludWU7XG4gICAgICBpZiAodHlwZW9mIGZtLmxldmVsID09PSAnbnVtYmVyJykgbGV2ZWxzLmFkZChmbS5sZXZlbCk7XG4gICAgICBpZiAodHlwZW9mIGZtLnNjaG9vbCA9PT0gJ3N0cmluZycpIHNjaG9vbHMuYWRkKGZtLnNjaG9vbCk7XG4gICAgICBpZiAodHlwZW9mIGZtLmRhbWFnZV90eXBlID09PSAnc3RyaW5nJykgZGFtYWdlcy5hZGQoZm0uZGFtYWdlX3R5cGUpO1xuICAgIH1cblxuICAgIC8vIDIpIENoZWNrYm94IGRyb3Bkb3duc1xuICAgIGNvbnN0IGZpbHRlcnMgPSBjb250YWluZXIuY3JlYXRlRGl2KHtcbiAgICAgIGF0dHI6IHsgc3R5bGU6ICdkaXNwbGF5OmZsZXg7IGdhcDoxNnB4OyBtYXJnaW4tYm90dG9tOjEycHg7JyB9XG4gICAgfSk7XG5cbiAgICB0eXBlIEl0ZW0gPSB7IHZhbHVlOiBzdHJpbmc7IGxhYmVsOiBzdHJpbmcgfTtcblxuICAgIGNvbnN0IG1ha2VDaGVja2JveERyb3Bkb3duID0gKFxuICAgICAgdGl0bGU6IHN0cmluZyxcbiAgICAgIGl0ZW1zOiBJdGVtW11cbiAgICApOiB7IHdyYXBwZXI6IEhUTUxEZXRhaWxzRWxlbWVudDsgZ2V0U2VsZWN0ZWQ6ICgpID0+IHN0cmluZ1tdIH0gPT4ge1xuICAgICAgLy8gd3JhcHBlclxuICAgICAgY29uc3Qgd3JhcHBlciA9IGZpbHRlcnMuY3JlYXRlRWwoJ2RldGFpbHMnKSBhcyBIVE1MRGV0YWlsc0VsZW1lbnQ7XG4gICAgICB3cmFwcGVyLmNsYXNzTGlzdC5hZGQoJ3NiLWRkJyk7IC8vIHN0eWxlIGhvb2tcblxuICAgICAgLy8gc2VsZWN0XHUyMDExbGlrZSBcdTIwMUNidXR0b25cdTIwMURcbiAgICAgIGNvbnN0IHN1bW1hcnkgPSB3cmFwcGVyLmNyZWF0ZUVsKCdzdW1tYXJ5JykgYXMgSFRNTEVsZW1lbnQ7XG4gICAgICBzdW1tYXJ5LmNsYXNzTGlzdC5hZGQoJ3NiLWRkX19idXR0b24nKTtcbiAgICAgIHN1bW1hcnkuc2V0VGV4dChgJHt0aXRsZX0gKDApYCk7XG5cbiAgICAgIC8vIGRyb3Bkb3duIHBhbmVsXG4gICAgICBjb25zdCBwYW5lbCA9IHdyYXBwZXIuY3JlYXRlRWwoJ2RpdicpO1xuICAgICAgcGFuZWwuY2xhc3NMaXN0LmFkZCgnc2ItZGRfX3BhbmVsJyk7XG4gICAgICBwYW5lbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChldnQ6IE1vdXNlRXZlbnQpID0+IGV2dC5zdG9wUHJvcGFnYXRpb24oKSk7XG5cbiAgICAgIC8vIGNoZWNrYm94IGxpc3RcbiAgICAgIGNvbnN0IGlucHV0czogSFRNTElucHV0RWxlbWVudFtdID0gW107XG4gICAgICBmb3IgKGNvbnN0IHsgdmFsdWUsIGxhYmVsIH0gb2YgaXRlbXMpIHtcbiAgICAgICAgY29uc3Qgcm93ID0gcGFuZWwuY3JlYXRlRWwoJ2xhYmVsJyk7XG4gICAgICAgIHJvdy5jbGFzc0xpc3QuYWRkKCdzYi1kZF9faXRlbScpO1xuXG4gICAgICAgIGNvbnN0IGNiID0gcm93LmNyZWF0ZUVsKCdpbnB1dCcsIHsgYXR0cjogeyB0eXBlOiAnY2hlY2tib3gnLCB2YWx1ZSB9IH0pIGFzIEhUTUxJbnB1dEVsZW1lbnQ7XG4gICAgICAgIGlucHV0cy5wdXNoKGNiKTtcblxuICAgICAgICByb3cuY3JlYXRlRWwoJ3NwYW4nLCB7IHRleHQ6IGxhYmVsIH0pO1xuXG4gICAgICAgIGNiLmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsICgpID0+IHtcbiAgICAgICAgICBjb25zdCBjb3VudCA9IGlucHV0cy5maWx0ZXIoaSA9PiBpLmNoZWNrZWQpLmxlbmd0aDtcbiAgICAgICAgICBzdW1tYXJ5LnNldFRleHQoYCR7dGl0bGV9ICgke2NvdW50fSlgKTtcbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB7XG4gICAgICAgIHdyYXBwZXIsXG4gICAgICAgIGdldFNlbGVjdGVkOiAoKSA9PiBpbnB1dHMuZmlsdGVyKGkgPT4gaS5jaGVja2VkKS5tYXAoaSA9PiBpLnZhbHVlKSxcbiAgICAgIH07XG4gICAgfTtcblxuXG4gICAgY29uc3QgbGV2ZWxJdGVtcyA9IEFycmF5LmZyb20obGV2ZWxzKS5zb3J0KChhLCBiKSA9PiBhIC0gYikubWFwKGx2bCA9PiAoeyB2YWx1ZTogYCR7bHZsfWAsIGxhYmVsOiBsdmwgPT09IDAgPyAnQ2FudHJpcCcgOiBgTGV2ZWwgJHtsdmx9YCB9KSk7XG4gICAgY29uc3Qgc2Nob29sSXRlbXMgPSBBcnJheS5mcm9tKHNjaG9vbHMpLnNvcnQoKS5tYXAoc2NoID0+ICh7IHZhbHVlOiBzY2gsIGxhYmVsOiBzY2ggfSkpO1xuICAgIGNvbnN0IGRhbWFnZUl0ZW1zID0gQXJyYXkuZnJvbShkYW1hZ2VzKS5zb3J0KCkubWFwKGRtZyA9PiAoeyB2YWx1ZTogZG1nLCBsYWJlbDogZG1nIH0pKTtcblxuICAgIGNvbnN0IHsgd3JhcHBlcjogbHZsREQsIGdldFNlbGVjdGVkOiBnZXRMZXZlbHMgfSA9IG1ha2VDaGVja2JveERyb3Bkb3duKCdMZXZlbHMnLCBsZXZlbEl0ZW1zKTtcbiAgICBjb25zdCB7IHdyYXBwZXI6IHNjaG9vbERELCBnZXRTZWxlY3RlZDogZ2V0U2Nob29scyB9ID0gbWFrZUNoZWNrYm94RHJvcGRvd24oJ1NjaG9vbHMnLCBzY2hvb2xJdGVtcyk7XG4gICAgY29uc3QgeyB3cmFwcGVyOiBkbWdERCwgZ2V0U2VsZWN0ZWQ6IGdldERhbWFnZXMgfSA9IG1ha2VDaGVja2JveERyb3Bkb3duKCdEYW1hZ2UnLCBkYW1hZ2VJdGVtcyk7XG5cbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGV2dCA9PiB7XG4gICAgICBmb3IgKGNvbnN0IGRkIG9mIFtsdmxERCwgc2Nob29sREQsIGRtZ0REXSkge1xuICAgICAgICBpZiAoZGQub3BlbiAmJiAhZGQuY29udGFpbnMoZXZ0LnRhcmdldCBhcyBOb2RlKSkgZGQub3BlbiA9IGZhbHNlO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgLy8gMykgR28gLyBDbGVhclxuICAgIGNvbnN0IGJ0bldyYXAgPSBjb250YWluZXIuY3JlYXRlRGl2KHtcbiAgICAgIGF0dHI6IHsgc3R5bGU6ICdkaXNwbGF5OmZsZXg7IGp1c3RpZnktY29udGVudDpjZW50ZXI7IG1hcmdpbi1ib3R0b206OHB4OycgfVxuICAgIH0pO1xuXG4gICAgY29uc3QgZ29CdG4gPSBidG5XcmFwLmNyZWF0ZUVsKCdidXR0b24nLCB7IHRleHQ6ICdHbycsIGNsczogJ21vZC1jdGEnIH0pO1xuICAgIGdvQnRuLnNldEF0dHIoJ3N0eWxlJywgJ2ZsZXg6MTsnKTtcbiAgICBnb0J0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgIHRoaXMucmVuZGVyVGFibGUoZ2V0TGV2ZWxzKCksIGdldFNjaG9vbHMoKSwgZ2V0RGFtYWdlcygpKTtcbiAgICB9KTtcblxuICAgIGNvbnN0IGNsZWFyQnRuID0gYnRuV3JhcC5jcmVhdGVFbCgnYnV0dG9uJywgeyB0ZXh0OiAnQ2xlYXIgRmlsdGVycyBhbmQgUmVzZXQnIH0pO1xuICAgIGNsZWFyQnRuLnNldEF0dHIoJ3N0eWxlJywgJ2ZsZXg6MTsgbWFyZ2luLWxlZnQ6OHB4OycpO1xuICAgIGNsZWFyQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgKFtcbiAgICAgICAgW2x2bERELCAnTGV2ZWxzJ10sXG4gICAgICAgIFtzY2hvb2xERCwgJ1NjaG9vbHMnXSxcbiAgICAgICAgW2RtZ0RELCAnRGFtYWdlJ10sXG4gICAgICBdIGFzIGNvbnN0KS5mb3JFYWNoKChbZGQsIHRpdGxlXSkgPT4ge1xuICAgICAgICBkZC5xdWVyeVNlbGVjdG9yQWxsKCdpbnB1dFt0eXBlPWNoZWNrYm94XScpLmZvckVhY2goY2IgPT4gKGNiIGFzIEhUTUxJbnB1dEVsZW1lbnQpLmNoZWNrZWQgPSBmYWxzZSk7XG4gICAgICAgIGRkLnF1ZXJ5U2VsZWN0b3IoJ3N1bW1hcnknKT8uc2V0VGV4dChgJHt0aXRsZX0gKDApYCk7XG4gICAgICAgIGRkLm9wZW4gPSBmYWxzZTtcbiAgICAgIH0pO1xuICAgICAgY29uc3QgdGFibGVEaXYgPSBjb250YWluZXIuZmluZCgnI3NwZWxsYm9vay10YWJsZScpIGFzIEhUTUxEaXZFbGVtZW50O1xuICAgICAgaWYgKHRhYmxlRGl2KSB0YWJsZURpdi5lbXB0eSgpO1xuICAgIH0pO1xuXG4gICAgLy8gUGlja3MgYXJlYSArIHRhYmxlXG4gICAgY29udGFpbmVyLmNyZWF0ZUVsKCdkaXYnLCB7IGF0dHI6IHsgaWQ6ICdzcGVsbGJvb2stcGlja3MnIH0gfSk7XG4gICAgY29udGFpbmVyLmNyZWF0ZUVsKCdkaXYnLCB7IGF0dHI6IHsgaWQ6ICdzcGVsbGJvb2stdGFibGUnIH0gfSk7XG5cbiAgICB0aGlzLnJlbmRlclBpY2tzKCk7XG4gIH1cblxuICBwcml2YXRlIHJlbmRlclRhYmxlKFxuICAgIHNlbGVjdGVkTGV2ZWxzOiBzdHJpbmdbXSxcbiAgICBzZWxlY3RlZFNjaG9vbHM6IHN0cmluZ1tdLFxuICAgIHNlbGVjdGVkRGFtYWdlczogc3RyaW5nW11cbiAgKTogdm9pZCB7XG4gICAgY29uc3QgdGFibGVEaXYgPSB0aGlzLmNvbnRhaW5lckVsLmZpbmQoJyNzcGVsbGJvb2stdGFibGUnKSBhcyBIVE1MRGl2RWxlbWVudDtcbiAgICBpZiAoIXRhYmxlRGl2KSByZXR1cm47XG4gICAgdGFibGVEaXYucmVwbGFjZUNoaWxkcmVuKCk7XG4gICAgdGhpcy5hZGRCdG5CeVBhdGguY2xlYXIoKTtcblxuXG4gICAgY29uc3QgYWxsU3BlbGxzID0gdGhpcy5hcHAudmF1bHRcbiAgICAgIC5nZXRNYXJrZG93bkZpbGVzKClcbiAgICAgIC5maWx0ZXIoZiA9PiBmLnBhdGguc3RhcnRzV2l0aCgnQ29tcGVuZGl1bS9TcGVsbHMnKSk7XG5cbiAgICBjb25zdCBmaWx0ZXJlZCA9IGFsbFNwZWxscy5maWx0ZXIoZiA9PiB7XG4gICAgICBjb25zdCBmbSA9IHRoaXMuYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0RmlsZUNhY2hlKGYpPy5mcm9udG1hdHRlcjtcbiAgICAgIGlmICghZm0pIHJldHVybiBmYWxzZTtcblxuICAgICAgY29uc3QgbHZsID0gU3RyaW5nKGZtLmxldmVsKTtcbiAgICAgIGNvbnN0IHNjaCA9IFN0cmluZyhmbS5zY2hvb2wpO1xuICAgICAgY29uc3QgZG1nUmF3ID0gdHlwZW9mIGZtLmRhbWFnZV90eXBlID09PSAnc3RyaW5nJyA/IGZtLmRhbWFnZV90eXBlIDogJyc7XG5cbiAgICAgIHJldHVybiAoXG4gICAgICAgICghc2VsZWN0ZWRMZXZlbHMubGVuZ3RoIHx8IHNlbGVjdGVkTGV2ZWxzLmluY2x1ZGVzKGx2bCkpICYmXG4gICAgICAgICghc2VsZWN0ZWRTY2hvb2xzLmxlbmd0aCB8fCBzZWxlY3RlZFNjaG9vbHMuaW5jbHVkZXMoc2NoKSkgJiZcbiAgICAgICAgKCFzZWxlY3RlZERhbWFnZXMubGVuZ3RoIHx8IHNlbGVjdGVkRGFtYWdlcy5pbmNsdWRlcyhkbWdSYXcpKVxuICAgICAgKTtcbiAgICB9KTtcblxuICAgIGZpbHRlcmVkLnNvcnQoKGEsIGIpID0+IHtcbiAgICAgIGNvbnN0IGZhID0gdGhpcy5hcHAubWV0YWRhdGFDYWNoZS5nZXRGaWxlQ2FjaGUoYSkhLmZyb250bWF0dGVyITtcbiAgICAgIGNvbnN0IGZiID0gdGhpcy5hcHAubWV0YWRhdGFDYWNoZS5nZXRGaWxlQ2FjaGUoYikhLmZyb250bWF0dGVyITtcblxuICAgICAgbGV0IHZhOiBhbnksIHZiOiBhbnk7XG4gICAgICBzd2l0Y2ggKHRoaXMuc3BlbGxTb3J0S2V5KSB7XG4gICAgICAgIGNhc2UgJ2xldmVsJzogdmEgPSBmYS5sZXZlbCA/PyAwOyBicmVhaztcbiAgICAgICAgY2FzZSAnc2Nob29sJzogdmEgPSBTdHJpbmcoZmEuc2Nob29sID8/ICcnKS50b0xvd2VyQ2FzZSgpOyBicmVhaztcbiAgICAgICAgY2FzZSAnZGFtYWdlJzogdmEgPSBTdHJpbmcoZmEuZGFtYWdlX3R5cGUgPz8gJycpLnRvTG93ZXJDYXNlKCk7IGJyZWFrO1xuICAgICAgICBkZWZhdWx0OiB2YSA9IFN0cmluZyhmYS5uYW1lID8/IGEuYmFzZW5hbWUpLnRvTG93ZXJDYXNlKCk7XG4gICAgICB9XG4gICAgICBzd2l0Y2ggKHRoaXMuc3BlbGxTb3J0S2V5KSB7XG4gICAgICAgIGNhc2UgJ2xldmVsJzogdmIgPSBmYi5sZXZlbCA/PyAwOyBicmVhaztcbiAgICAgICAgY2FzZSAnc2Nob29sJzogdmIgPSBTdHJpbmcoZmIuc2Nob29sID8/ICcnKS50b0xvd2VyQ2FzZSgpOyBicmVhaztcbiAgICAgICAgY2FzZSAnZGFtYWdlJzogdmIgPSBTdHJpbmcoZmIuZGFtYWdlX3R5cGUgPz8gJycpLnRvTG93ZXJDYXNlKCk7IGJyZWFrO1xuICAgICAgICBkZWZhdWx0OiB2YiA9IFN0cmluZyhmYi5uYW1lID8/IGIuYmFzZW5hbWUpLnRvTG93ZXJDYXNlKCk7XG4gICAgICB9XG5cbiAgICAgIGlmICh2YSA8IHZiKSByZXR1cm4gLTEgKiB0aGlzLnNwZWxsU29ydERpcjtcbiAgICAgIGlmICh2YSA+IHZiKSByZXR1cm4gMSAqIHRoaXMuc3BlbGxTb3J0RGlyO1xuICAgICAgcmV0dXJuIDA7XG4gICAgfSk7XG5cbiAgICBjb25zdCB0YWJsZSA9IHRhYmxlRGl2LmNyZWF0ZUVsKCd0YWJsZScpO1xuICAgIHRhYmxlLnNldEF0dHIoJ3N0eWxlJywgJ3dpZHRoOjEwMCU7Ym9yZGVyLWNvbGxhcHNlOmNvbGxhcHNlOycpO1xuXG4gICAgY29uc3QgaGVhZGVyUm93ID0gdGFibGUuY3JlYXRlRWwoJ3RyJyk7XG4gICAgaGVhZGVyUm93LnNldEF0dHIoJ3N0eWxlJywgJ2Rpc3BsYXk6ZmxleDsnKTtcblxuICAgIGNvbnN0IGFjdFRoID0gaGVhZGVyUm93LmNyZWF0ZUVsKCd0aCcpO1xuICAgIGFjdFRoLnNldEF0dHIoJ3N0eWxlJywgW1xuICAgICAgJ2ZsZXg6MCAwIDU2cHgnLFxuICAgICAgJ3BhZGRpbmc6NHB4JyxcbiAgICAgICd0ZXh0LWFsaWduOmxlZnQnXG4gICAgXS5qb2luKCc7JykpO1xuXG4gICAgY29uc3QgY29sdW1uczogeyBsYWJlbDogc3RyaW5nOyBrZXk6ICduYW1lJyB8ICdsZXZlbCcgfCAnc2Nob29sJyB8ICdkYW1hZ2UnOyBmbGV4OiBudW1iZXIgfVtdID0gW1xuICAgICAgeyBsYWJlbDogJ05hbWUnLCBrZXk6ICduYW1lJywgZmxleDogMiB9LFxuICAgICAgeyBsYWJlbDogJ0x2bCcsIGtleTogJ2xldmVsJywgZmxleDogMSB9LFxuICAgICAgeyBsYWJlbDogJ1NjaG9vbCcsIGtleTogJ3NjaG9vbCcsIGZsZXg6IDEgfSxcbiAgICAgIHsgbGFiZWw6ICdEbWcgVHlwZScsIGtleTogJ2RhbWFnZScsIGZsZXg6IDEgfSxcbiAgICBdO1xuXG4gICAgZm9yIChjb25zdCB7IGxhYmVsLCBrZXksIGZsZXggfSBvZiBjb2x1bW5zKSB7XG4gICAgICBjb25zdCB0aCA9IGhlYWRlclJvdy5jcmVhdGVFbCgndGgnKTtcbiAgICAgIHRoLnNldFRleHQobGFiZWwpO1xuICAgICAgdGguc2V0QXR0cihcbiAgICAgICAgJ3N0eWxlJyxcbiAgICAgICAgW1xuICAgICAgICAgIGBmbGV4OiR7ZmxleH1gLFxuICAgICAgICAgICdwYWRkaW5nOjRweCcsXG4gICAgICAgICAga2V5ID09PSAnbmFtZScgPyAndGV4dC1hbGlnbjpsZWZ0JyA6ICd0ZXh0LWFsaWduOmNlbnRlcicsXG4gICAgICAgICAgJ2N1cnNvcjpwb2ludGVyJyxcbiAgICAgICAgXS5qb2luKCc7JylcbiAgICAgICk7XG5cbiAgICAgIHRoLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICBpZiAodGhpcy5zcGVsbFNvcnRLZXkgPT09IGtleSkge1xuICAgICAgICAgIHRoaXMuc3BlbGxTb3J0RGlyID0gdGhpcy5zcGVsbFNvcnREaXIgPT09IDEgPyAtMSA6IDE7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy5zcGVsbFNvcnRLZXkgPSBrZXk7XG4gICAgICAgICAgdGhpcy5zcGVsbFNvcnREaXIgPSAxO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMucmVuZGVyVGFibGUoc2VsZWN0ZWRMZXZlbHMsIHNlbGVjdGVkU2Nob29scywgc2VsZWN0ZWREYW1hZ2VzKTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGxldCBmb3VuZCA9IDA7XG4gICAgZm9yIChjb25zdCBmIG9mIGZpbHRlcmVkKSB7XG4gICAgICBjb25zdCBmbSA9IHRoaXMuYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0RmlsZUNhY2hlKGYpIS5mcm9udG1hdHRlciE7XG4gICAgICBjb25zdCBsdmwgPSBTdHJpbmcoZm0ubGV2ZWwpO1xuICAgICAgY29uc3Qgc2NoID0gU3RyaW5nKGZtLnNjaG9vbCk7XG4gICAgICBjb25zdCBkbWdSYXcgPSB0eXBlb2YgZm0uZGFtYWdlX3R5cGUgPT09ICdzdHJpbmcnID8gZm0uZGFtYWdlX3R5cGUgOiAnJztcblxuICAgICAgY29uc3Qgcm93ID0gdGFibGUuY3JlYXRlRWwoJ3RyJyk7XG4gICAgICByb3cuc2V0QXR0cignc3R5bGUnLCAnZGlzcGxheTpmbGV4OycpO1xuXG4gICAgICBjb25zdCBhY3RUZCA9IHJvdy5jcmVhdGVFbCgndGQnKTtcbiAgICAgIGFjdFRkLnNldEF0dHIoXG4gICAgICAgICdzdHlsZScsXG4gICAgICAgICdmbGV4OjAgMCAyOHB4OyBwYWRkaW5nOjA7IGRpc3BsYXk6ZmxleDsgYWxpZ24taXRlbXM6Y2VudGVyOyBqdXN0aWZ5LWNvbnRlbnQ6Y2VudGVyOydcbiAgICAgICk7XG5cbiAgICAgIC8vIGNyZWF0ZSArIGJ1dHRvblxuICAgICAgY29uc3QgYWRkQnRuID0gYWN0VGQuY3JlYXRlRWwoJ2J1dHRvbicsIHsgdGV4dDogJ1x1RkYwQicgfSk7XG4gICAgICBhZGRCdG4uYWRkQ2xhc3MoJ3NiLXNwZWxsYWRkLWJ0bicpO1xuXG4gICAgICAvLyBcdTI0NjAgcmVtZW1iZXIgdGhpcyBidXR0b24gZm9yIHRoaXMgc3BlbGwgcGF0aFxuICAgICAgdGhpcy5hZGRCdG5CeVBhdGguc2V0KGYucGF0aCwgYWRkQnRuKTtcblxuICAgICAgLy8gXHUyNDYxIGlmIGFscmVhZHkgc2VsZWN0ZWQsIHNob3cgXHUyNzEzIGFuZCBkaXNhYmxlXG4gICAgICBpZiAodGhpcy5waWNrcy5pbmNsdWRlcyhmLnBhdGgpKSB7XG4gICAgICAgIGFkZEJ0bi50ZXh0Q29udGVudCA9ICdcdTI3MTMnO1xuICAgICAgICBhZGRCdG4uZGlzYWJsZWQgPSB0cnVlO1xuICAgICAgfVxuXG4gICAgICAvLyBcdTI0NjIgY2xpY2sgLT4gYWRkIHRvIHBpY2tzLCBmbGlwIHRvIFx1MjcxMywgZGlzYWJsZSwgYW5kIHJlLXJlbmRlciBwaWNrc1xuICAgICAgYWRkQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZSA9PiB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgaWYgKHRoaXMucGlja3MuaW5jbHVkZXMoZi5wYXRoKSkge1xuICAgICAgICAgIG5ldyBOb3RpY2UoJ0FscmVhZHkgaW4gU2VsZWN0ZWQgU3BlbGxzLicpO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnBpY2tzLnB1c2goZi5wYXRoKTtcbiAgICAgICAgYWRkQnRuLnRleHRDb250ZW50ID0gJ1x1MjcxMyc7XG4gICAgICAgIGFkZEJ0bi5kaXNhYmxlZCA9IHRydWU7XG4gICAgICAgIHRoaXMucmVuZGVyUGlja3MoKTsgICAvLyB0aGlzIHdpbGwgYWxzbyBzaG93IHRoZSBpdGVtIGluIHRoZSBTZWxlY3RlZCBTcGVsbHMgYm94XG4gICAgICB9KTtcblxuXG4gICAgICBjb25zdCBuYW1lVGQgPSByb3cuY3JlYXRlRWwoJ3RkJyk7XG4gICAgICBuYW1lVGQuc2V0QXR0cignc3R5bGUnLCAnZmxleDoyO3BhZGRpbmc6NHB4OycpO1xuICAgICAgY29uc3QgbGluayA9IG5hbWVUZC5jcmVhdGVFbCgnYScsIHsgYXR0cjogeyBocmVmOiAnIycgfSB9KTtcbiAgICAgIGxpbmsuc2V0VGV4dChmbS5uYW1lIHx8IGYuYmFzZW5hbWUpO1xuICAgICAgY29uc3QgZW5hYmxlUHJldmlldyA9ICEhZ2V0VG9vbGtpdCh0aGlzLmFwcCk/LnNldHRpbmdzPy5lbmFibGVTaWRlYmFyUHJldmlld3M7XG4gICAgICBpZiAoZW5hYmxlUHJldmlldykge1xuICAgICAgICBsaW5rLmNsYXNzTGlzdC5hZGQoJ2ludGVybmFsLWxpbmsnKTtcbiAgICAgICAgbGluay5zZXRBdHRyKCdkYXRhLWhyZWYnLCBmLnBhdGgpO1xuICAgICAgICBsaW5rLnNldEF0dHIoJ2hyZWYnLCBmLnBhdGgpO1xuICAgICAgfVxuICAgICAgbGluay5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGUgPT4ge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIHRoaXMuYXBwLndvcmtzcGFjZS5vcGVuTGlua1RleHQoZi5wYXRoLCAnJywgZmFsc2UpO1xuICAgICAgfSk7XG5cbiAgICAgIC8vIExldmVsXG4gICAgICBjb25zdCBsdmxUZCA9IHJvdy5jcmVhdGVFbCgndGQnKTtcbiAgICAgIGx2bFRkLnNldEF0dHIoJ3N0eWxlJywgJ2ZsZXg6MTsgZGlzcGxheTpmbGV4OyBhbGlnbi1pdGVtczpjZW50ZXI7IGp1c3RpZnktY29udGVudDpjZW50ZXI7IHBhZGRpbmc6NHB4OycpO1xuICAgICAgbHZsVGQuY3JlYXRlU3Bhbih7IHRleHQ6IGx2bCA9PT0gJzAnID8gJ0NhbnRyaXAnIDogbHZsIH0pO1xuXG4gICAgICAvLyBTY2hvb2xcbiAgICAgIGNvbnN0IHNjaFRkID0gcm93LmNyZWF0ZUVsKCd0ZCcpO1xuICAgICAgc2NoVGQuc2V0QXR0cignc3R5bGUnLCAnZmxleDoxOyBkaXNwbGF5OmZsZXg7IGFsaWduLWl0ZW1zOmNlbnRlcjsganVzdGlmeS1jb250ZW50OmNlbnRlcjsgcGFkZGluZzo0cHg7Jyk7XG4gICAgICBzY2hUZC5jcmVhdGVTcGFuKHsgdGV4dDogU0NIT09MX0FCQlJbc2NoXSA/PyBzY2guc2xpY2UoMCwgMykgfSk7XG5cbiAgICAgIC8vIERhbWFnZVxuICAgICAgY29uc3QgZG1nVGQgPSByb3cuY3JlYXRlRWwoJ3RkJyk7XG4gICAgICBkbWdUZC5zZXRBdHRyKCdzdHlsZScsICdmbGV4OjE7IGRpc3BsYXk6ZmxleDsgYWxpZ24taXRlbXM6Y2VudGVyOyBqdXN0aWZ5LWNvbnRlbnQ6Y2VudGVyOyBwYWRkaW5nOjRweDsnKTtcbiAgICAgIGRtZ1RkLmNyZWF0ZVNwYW4oeyB0ZXh0OiBkbWdSYXcgPyAoREFNQUdFX0FCQlJbZG1nUmF3XSA/PyBkbWdSYXcuc2xpY2UoMCwgMykpIDogJ1x1MjAxNCcgfSk7XG5cblxuICAgICAgZm91bmQrKztcbiAgICB9XG5cbiAgICBpZiAoIWZvdW5kKSB7XG4gICAgICB0YWJsZURpdi5jcmVhdGVFbCgncCcpLnNldFRleHQoJ05vIHNwZWxscyBtYXRjaCB5b3VyIGZpbHRlciBjcml0ZXJpYS4nKTtcbiAgICB9XG4gIH1cbn1cbiIsICIvLyBzYi1nYW1lcGxheS50c1xuXG4vLyBcdTI1MDBcdTI1MDAgR2FtZXBsYXkgU2lkZWJhciBWaWV3IFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFxuaW1wb3J0IHtcbiAgICBBcHAsXG4gICAgSXRlbVZpZXcsXG4gICAgV29ya3NwYWNlTGVhZixcbiAgICBURmlsZSxcbiAgICBOb3RpY2UsXG4gICAgTW9kYWxcbn0gZnJvbSAnb2JzaWRpYW4nO1xuXG5leHBvcnQgY29uc3QgR0FNRVBMQVlfVklFV19UWVBFID0gXCJ2dnVuZGVybG9yZS1nYW1lcGxheVwiO1xuXG4vLyBwbHVnaW4gYWNjZXNzb3JcbmZ1bmN0aW9uIGdldFRvb2xraXQoYXBwOiBBcHApOiBhbnkge1xuICAgIHJldHVybiAoXG4gICAgICAgIChhcHAgYXMgYW55KS5wbHVnaW5zLmdldFBsdWdpbihcInZ2dW5kZXJsb3JlLXRvb2xraXRcIikgfHxcbiAgICAgICAgKGFwcCBhcyBhbnkpLnBsdWdpbnMucGx1Z2lucz8uW1widnZ1bmRlcmxvcmUtdG9vbGtpdFwiXVxuICAgICk7XG59XG5cbmNvbnN0IEFMSUdOX0FCQlI6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4gPSB7XG4gICAgXCJsYXdmdWwgZ29vZFwiOiBcIkxHXCIsXG4gICAgXCJuZXV0cmFsIGdvb2RcIjogXCJOR1wiLFxuICAgIFwiY2hhb3RpYyBnb29kXCI6IFwiQ0dcIixcbiAgICBcImxhd2Z1bCBuZXV0cmFsXCI6IFwiTE5cIixcbiAgICBcInRydWUgbmV1dHJhbFwiOiBcIk5cIixcbiAgICBcIm5ldXRyYWxcIjogXCJOXCIsXG4gICAgXCJjaGFvdGljIG5ldXRyYWxcIjogXCJDTlwiLFxuICAgIFwibGF3ZnVsIGV2aWxcIjogXCJMRVwiLFxuICAgIFwibmV1dHJhbCBldmlsXCI6IFwiTkVcIixcbiAgICBcImNoYW90aWMgZXZpbFwiOiBcIkNFXCIsXG59O1xuXG5jb25zdCBBQklMSVRZX0FCQlI6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4gPSB7XG4gICAgc3RyZW5ndGg6IFwiU1RSXCIsXG4gICAgZGV4dGVyaXR5OiBcIkRFWFwiLFxuICAgIGNvbnN0aXR1dGlvbjogXCJDT05cIixcbiAgICBpbnRlbGxpZ2VuY2U6IFwiSU5UXCIsXG4gICAgd2lzZG9tOiBcIldJU1wiLFxuICAgIGNoYXJpc21hOiBcIkNIQVwiLFxufTtcblxuLy8gY29uc3QgU0tJTExfQUJCUjogUmVjb3JkPHN0cmluZywgc3RyaW5nPiA9IHtcbi8vICAgICBhY3JvYmF0aWNzOiBcIkFjcm9cIixcbi8vICAgICBcImFuaW1hbCBoYW5kbGluZ1wiOiBcIkFuaW1cIixcbi8vICAgICBhcmNhbmE6IFwiQXJjLlwiLFxuLy8gICAgIGF0aGxldGljczogXCJBdGguXCIsXG4vLyAgICAgZGVjZXB0aW9uOiBcIkRlYy5cIixcbi8vICAgICBoaXN0b3J5OiBcIkhpcy5cIixcbi8vICAgICBpbnNpZ2h0OiBcIklucy5cIixcbi8vICAgICBpbnRpbWlkYXRpb246IFwiSW50LlwiLFxuLy8gICAgIGludmVzdGlnYXRpb246IFwiSW52LlwiLFxuLy8gICAgIG1lZGljaW5lOiBcIk1lZC5cIixcbi8vICAgICBuYXR1cmU6IFwiTmF0LlwiLFxuLy8gICAgIHBlcmNlcHRpb246IFwiUGVyYy5cIixcbi8vICAgICBwZXJmb3JtYW5jZTogXCJQZXJmLlwiLFxuLy8gICAgIHBlcnN1YXNpb246IFwiUGVycy5cIixcbi8vICAgICByZWxpZ2lvbjogXCJSZWwuXCIsXG4vLyAgICAgXCJzbGVpZ2h0IG9mIGhhbmRcIjogXCJTb0hcIixcbi8vICAgICBzdGVhbHRoOiBcIlN0bC5cIixcbi8vICAgICBzdXJ2aXZhbDogXCJTdXJ2LlwiLFxuLy8gfTtcblxuXG50eXBlIFBsYXllclJvdyA9IHtcbiAgICBmaWxlOiBURmlsZTtcbiAgICBuYW1lOiBzdHJpbmc7XG4gICAgYWM6IHN0cmluZztcbiAgICBocEN1cjogc3RyaW5nO1xuICAgIGhwTWF4OiBzdHJpbmc7XG4gICAgc3BlZWQ6IHN0cmluZztcbiAgICBhbGlnbjogc3RyaW5nO1xuICAgIHBwOiBudW1iZXI7XG59O1xuXG5jb25zdCBwb3NzZXNzaXZlID0gKG46IHN0cmluZykgPT4ge1xuICBjb25zdCB0ID0gKG4gPz8gXCJcIikudHJpbSgpO1xuICBpZiAoIXQpIHJldHVybiBcIlwiO1xuICByZXR1cm4gL3MkL2kudGVzdCh0KSA/IGAke3R9J2AgOiBgJHt0fSdzYDtcbn07XG5cbmZ1bmN0aW9uIHNhbml0aXplU3BlZWQocmF3OiBzdHJpbmcpOiBzdHJpbmcge1xuICAgIGlmICghcmF3KSByZXR1cm4gXCJcdTIwMTRcIjtcbiAgICBjb25zdCBsb3dlciA9IHJhdy50b0xvd2VyQ2FzZSgpO1xuXG4gICAgLy8gZXh0cmFjdCB3YWxrXG4gICAgY29uc3Qgd2Fsa01hdGNoID0gbG93ZXIubWF0Y2goL3dhbGtcXHMrKFxcZCspLyk7XG4gICAgY29uc3Qgd2FsayA9IHdhbGtNYXRjaCA/IHdhbGtNYXRjaFsxXSA6IFwiXCI7XG5cbiAgICAvLyBleHRyYWN0IGZseVxuICAgIGNvbnN0IGZseU1hdGNoID0gbG93ZXIubWF0Y2goL2ZseVxccysoXFxkKykvKTtcbiAgICBjb25zdCBmbHkgPSBmbHlNYXRjaCA/IGZseU1hdGNoWzFdIDogXCJcIjtcblxuICAgIC8vIGJ1aWxkIGRpc3BsYXlcbiAgICBpZiAod2FsayAmJiBmbHkpIHJldHVybiBgJHt3YWxrfSAvICR7Zmx5fWA7XG4gICAgaWYgKHdhbGspIHJldHVybiB3YWxrO1xuICAgIGlmIChmbHkpIHJldHVybiBmbHk7XG5cbiAgICByZXR1cm4gXCJcdTIwMTRcIjtcbn1cblxuLy8gU1BFTEwgQU5EIElURU0gRURJVCBNT0RBTFxuXG50eXBlIEVkaXRMaXN0T3B0cyA9IHtcbiAgICB0aXRsZTogc3RyaW5nO1xuICAgIGluaXRpYWw6IHN0cmluZ1tdO1xuICAgIGNhbmRpZGF0ZXM6IHN0cmluZ1tdO1xuICAgIHBsYWNlaG9sZGVyPzogc3RyaW5nO1xuICAgIG9uU2F2ZTogKHZhbHVlczogc3RyaW5nW10pID0+IHZvaWQgfCBQcm9taXNlPHZvaWQ+O1xufTtcblxuZXhwb3J0IGNsYXNzIEVkaXRMaXN0TW9kYWwgZXh0ZW5kcyBNb2RhbCB7XG4gICAgcHJpdmF0ZSB2YWx1ZXM6IHN0cmluZ1tdO1xuICAgIHByaXZhdGUgb3B0czogRWRpdExpc3RPcHRzO1xuICAgIHByaXZhdGUgZW5zdXJlV2lraWxpbmsoczogc3RyaW5nKTogc3RyaW5nIHtcbiAgICAgICAgbGV0IHQgPSAocyA/PyBcIlwiKS50b1N0cmluZygpLnRyaW0oKTtcbiAgICAgICAgaWYgKCF0KSByZXR1cm4gXCJcIjtcbiAgICAgICAgLy8gaWYgc29tZW9uZSBwYXN0ZWQgYSBxdW90ZWQvSlNPTiBzdHJpbmcsIHVud3JhcCBpdFxuICAgICAgICB0cnkgeyBjb25zdCBqID0gSlNPTi5wYXJzZSh0KTsgaWYgKHR5cGVvZiBqID09PSBcInN0cmluZ1wiKSB0ID0gajsgfSBjYXRjaCB7IH1cbiAgICAgICAgLy8gc3RyaXAgc3Vycm91bmRpbmcgW10gdGhhdCBzb21ldGltZXMgc25lYWsgaW5cbiAgICAgICAgdCA9IHQucmVwbGFjZSgvXlxcWytcXHMqfFxccypcXF0rJC9nLCBcIlwiKTtcbiAgICAgICAgLy8gZHJvcCBhbGlhcy9hbmNob3IgZm9yIHN0b3JhZ2U7IHdlIG9ubHkgc3RvcmUgdGhlIHBhZ2VcbiAgICAgICAgdCA9IHQuc3BsaXQoXCJ8XCIpWzBdLnNwbGl0KFwiI1wiKVswXS50cmltKCk7XG4gICAgICAgIGlmICghdC5zdGFydHNXaXRoKFwiW1tcIikpIHQgPSBgW1ske3R9XV1gO1xuICAgICAgICByZXR1cm4gdDtcbiAgICB9XG4gICAgcHJpdmF0ZSBfY2FuZGlkYXRlczogc3RyaW5nW107XG4gICAgcHJpdmF0ZSBnZXQgY2FuZGlkYXRlcygpOiBzdHJpbmdbXSB7IHJldHVybiB0aGlzLl9jYW5kaWRhdGVzOyB9XG5cbiAgICBwcml2YXRlIGlucHV0V3JhcCE6IEhUTUxEaXZFbGVtZW50O1xuICAgIHByaXZhdGUgaW5wdXRFbCE6IEhUTUxJbnB1dEVsZW1lbnQ7XG4gICAgcHJpdmF0ZSBhZGRCdG4hOiBIVE1MQnV0dG9uRWxlbWVudDtcbiAgICBwcml2YXRlIHN1Z2dlc3RXcmFwITogSFRNTERpdkVsZW1lbnQ7XG4gICAgcHJpdmF0ZSBsaXN0V3JhcCE6IEhUTUxEaXZFbGVtZW50O1xuXG4gICAgcHJpdmF0ZSBob3ZlckluZGV4ID0gLTE7XG4gICAgcHJpdmF0ZSBmaWx0ZXJlZDogc3RyaW5nW10gPSBbXTtcblxuICAgIGNvbnN0cnVjdG9yKGFwcDogQXBwLCBvcHRzOiBFZGl0TGlzdE9wdHMpIHtcbiAgICAgICAgc3VwZXIoYXBwKTtcbiAgICAgICAgdGhpcy52YWx1ZXMgPSBbLi4uKG9wdHMuaW5pdGlhbCB8fCBbXSldO1xuICAgICAgICB0aGlzLl9jYW5kaWRhdGVzID0gQXJyYXkuZnJvbShcbiAgICAgICAgICAgIG5ldyBTZXQoKG9wdHMuY2FuZGlkYXRlcyB8fCBbXSkubWFwKHMgPT4gdGhpcy5lbnN1cmVXaWtpbGluayhzKSkpXG4gICAgICAgICkuc29ydCgpO1xuICAgICAgICB0aGlzLm9wdHMgPSBvcHRzO1xuICAgIH1cblxuXG4gICAgLy8gXHUyNTAwXHUyNTAwIGhlbHBlcnM6IGxpbmsgcGFyc2luZyAvIGxhYmVscyBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcbiAgICBwcml2YXRlIGxhYmVsRm9yKHM6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgICAgIGNvbnN0IG0gPSBTdHJpbmcocykubWF0Y2goL1xcW1xcWyhbXnxcXF1dKykoPzpcXHwoW15cXF1dKykpP1xcXVxcXS8pO1xuICAgICAgICBjb25zdCBsYWJlbCA9IChtID8gKG1bMl0gfHwgbVsxXSkgOiBzKS5zcGxpdChcIi9cIikucG9wKCkhLnJlcGxhY2UoL1xcLm1kJC8sIFwiXCIpO1xuICAgICAgICByZXR1cm4gbGFiZWwudHJpbSgpO1xuICAgIH1cbiAgICBwcml2YXRlIHBhcnNlTGlua2lzaChzOiBzdHJpbmcpOiB7IHBhdGg/OiBzdHJpbmc7IGxhYmVsOiBzdHJpbmcgfSB7XG4gICAgICAgIGNvbnN0IG0gPSBTdHJpbmcocykubWF0Y2goL1xcW1xcWyhbXnxcXF1dKykoPzpcXHwoW15cXF1dKykpP1xcXVxcXS8pO1xuICAgICAgICByZXR1cm4gbSA/IHsgcGF0aDogbVsxXSwgbGFiZWw6IHRoaXMubGFiZWxGb3IocykgfSA6IHsgbGFiZWw6IHRoaXMubGFiZWxGb3IocykgfTtcbiAgICB9XG4gICAgcHJpdmF0ZSBrZXlGb3Ioczogc3RyaW5nKTogc3RyaW5nIHsgcmV0dXJuIHRoaXMubGFiZWxGb3IocykudG9Mb3dlckNhc2UoKTsgfVxuICAgIHByaXZhdGUgbWF0Y2hDYW5kaWRhdGVCeUxhYmVsKGxhYmVsOiBzdHJpbmcpOiBzdHJpbmcgfCBudWxsIHtcbiAgICAgICAgY29uc3QgbG93ID0gbGFiZWwudHJpbSgpLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgIGNvbnN0IGhpdCA9IHRoaXMuY2FuZGlkYXRlcy5maW5kKChjKSA9PiB0aGlzLmxhYmVsRm9yKGMpLnRvTG93ZXJDYXNlKCkgPT09IGxvdyk7XG4gICAgICAgIHJldHVybiBoaXQgPz8gbnVsbDtcbiAgICB9XG5cbiAgICAvLyBcdTI1MDBcdTI1MDAgbW9kYWwgbGlmZWN5Y2xlIFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFxuICAgIG9uT3BlbigpIHtcbiAgICAgICAgY29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XG5cbiAgICAgICAgdGhpcy5tb2RhbEVsLmFkZENsYXNzKFwidnYtZml4ZWQtbW9kYWxcIik7XG4gICAgICAgIHRoaXMubW9kYWxFbC5zdHlsZS53aWR0aCA9IFwiNTIwcHhcIjsgIC8vIHRoaW5cbiAgICAgICAgdGhpcy5tb2RhbEVsLnN0eWxlLm1heFdpZHRoID0gXCI5NnZ3XCI7XG4gICAgICAgIHRoaXMubW9kYWxFbC5zdHlsZS5tYXhIZWlnaHQgPSBcIjkydmhcIjtcblxuICAgICAgICBjb250ZW50RWwuY3JlYXRlRWwoXCJoMlwiLCB7IHRleHQ6IHRoaXMub3B0cy50aXRsZSB9KTtcblxuICAgICAgICAvLyBzZWFyY2ggcm93XG4gICAgICAgIGNvbnN0IHJvdyA9IGNvbnRlbnRFbC5jcmVhdGVEaXYoeyBjbHM6IFwidnYtZmllbGQtcm93XCIgfSk7XG4gICAgICAgIHRoaXMuaW5wdXRXcmFwID0gcm93LmNyZWF0ZURpdih7IGNsczogXCJ2di1zZWFyY2h3cmFwXCIgfSk7XG4gICAgICAgIHRoaXMuaW5wdXRFbCA9IHRoaXMuaW5wdXRXcmFwLmNyZWF0ZUVsKFwiaW5wdXRcIiwge1xuICAgICAgICAgICAgdHlwZTogXCJ0ZXh0XCIsXG4gICAgICAgICAgICBwbGFjZWhvbGRlcjogdGhpcy5vcHRzLnBsYWNlaG9sZGVyIHx8IFwiU2VhcmNoXHUyMDI2XCIsXG4gICAgICAgICAgICBjbHM6IFwicHJvbXB0LWlucHV0XCIsXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmFkZEJ0biA9IHJvdy5jcmVhdGVFbChcImJ1dHRvblwiLCB7IHRleHQ6IFwiQWRkXCIsIGNsczogXCJtb2QtY3RhIHZ2LWFkZGJ0blwiIH0pO1xuICAgICAgICB0aGlzLnN1Z2dlc3RXcmFwID0gdGhpcy5pbnB1dFdyYXAuY3JlYXRlRGl2KHsgY2xzOiBcInZ2LXN1Z2dlc3RcIiwgYXR0cjogeyBcImFyaWEtaGlkZGVuXCI6IFwidHJ1ZVwiIH0gfSk7XG5cbiAgICAgICAgLy8gbGlzdFxuICAgICAgICB0aGlzLmxpc3RXcmFwID0gY29udGVudEVsLmNyZWF0ZURpdih7IGNsczogXCJ2di1saXN0LXdyYXBcIiB9KTtcbiAgICAgICAgdGhpcy5wYWludExpc3QoKTtcblxuICAgICAgICAvLyBmb290ZXJcbiAgICAgICAgY29uc3QgYWN0aW9ucyA9IGNvbnRlbnRFbC5jcmVhdGVEaXYoeyBjbHM6IFwidnYtYWN0aW9uc1wiIH0pO1xuICAgICAgICBjb25zdCBzYXZlID0gYWN0aW9ucy5jcmVhdGVFbChcImJ1dHRvblwiLCB7IHRleHQ6IFwiU2F2ZVwiLCBjbHM6IFwibW9kLWN0YVwiIH0pO1xuICAgICAgICBjb25zdCBjYW5jZWwgPSBhY3Rpb25zLmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHsgdGV4dDogXCJDYW5jZWxcIiwgY2xzOiBcInZ2LWNhbmNlbFwiIH0pO1xuXG4gICAgICAgIC8vIHdpcmluZ1xuICAgICAgICBjb25zdCBjb21taXRDdXJyZW50ID0gKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgcmF3ID0gdGhpcy5pbnB1dEVsLnZhbHVlLnRyaW0oKTtcbiAgICAgICAgICAgIGlmICghcmF3KSByZXR1cm47XG4gICAgICAgICAgICB0aGlzLmFkZFZhbHVlKHJhdyk7XG4gICAgICAgIH07XG5cbiAgICAgICAgdGhpcy5pbnB1dEVsLmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCAoKSA9PiB0aGlzLnNob3dTdWdnZXN0aW9ucyh0aGlzLmlucHV0RWwudmFsdWUpKTtcbiAgICAgICAgdGhpcy5pbnB1dEVsLmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIChlKSA9PiB7XG4gICAgICAgICAgICBpZiAoZS5rZXkgPT09IFwiRW50ZXJcIikge1xuICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5ob3ZlckluZGV4ID49IDAgJiYgdGhpcy5maWx0ZXJlZFt0aGlzLmhvdmVySW5kZXhdKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIGFkZCBieSBzdWdnZXN0aW9uIGxhYmVsXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYWRkVmFsdWUodGhpcy5sYWJlbEZvcih0aGlzLmZpbHRlcmVkW3RoaXMuaG92ZXJJbmRleF0pKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBjb21taXRDdXJyZW50KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGUua2V5ID09PSBcIkFycm93RG93blwiKSB7IGUucHJldmVudERlZmF1bHQoKTsgdGhpcy5tb3ZlSG92ZXIoMSk7IH1cbiAgICAgICAgICAgIGlmIChlLmtleSA9PT0gXCJBcnJvd1VwXCIpIHsgZS5wcmV2ZW50RGVmYXVsdCgpOyB0aGlzLm1vdmVIb3ZlcigtMSk7IH1cbiAgICAgICAgICAgIGlmIChlLmtleSA9PT0gXCJFc2NhcGVcIikgeyB0aGlzLmhpZGVTdWdnZXN0aW9ucygpOyB9XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmFkZEJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgY29tbWl0Q3VycmVudCk7XG4gICAgICAgIHNhdmUuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGFzeW5jICgpID0+IHsgYXdhaXQgdGhpcy5vcHRzLm9uU2F2ZT8uKFsuLi50aGlzLnZhbHVlc10pOyB0aGlzLmNsb3NlKCk7IH0pO1xuICAgICAgICBjYW5jZWwuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHRoaXMuY2xvc2UoKSk7XG5cbiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB0aGlzLmlucHV0RWwuZm9jdXMoKSwgMCk7XG4gICAgfVxuXG4gICAgb25DbG9zZSgpIHtcbiAgICAgICAgdGhpcy5tb2RhbEVsLmNsYXNzTGlzdC5yZW1vdmUoXCJ2di1maXhlZC1tb2RhbFwiKTtcbiAgICAgICAgdGhpcy5tb2RhbEVsLnN0eWxlLnJlbW92ZVByb3BlcnR5KFwid2lkdGhcIik7XG4gICAgICAgIHRoaXMubW9kYWxFbC5zdHlsZS5yZW1vdmVQcm9wZXJ0eShcIm1heC13aWR0aFwiKTtcbiAgICAgICAgdGhpcy5tb2RhbEVsLnN0eWxlLnJlbW92ZVByb3BlcnR5KFwibWF4LWhlaWdodFwiKTtcbiAgICAgICAgdGhpcy5jb250ZW50RWwuZW1wdHkoKTtcbiAgICB9XG5cbiAgICAvLyBcdTI1MDBcdTI1MDAgbGlzdCBvcHMgXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXG4gICAgcHJpdmF0ZSBhZGRWYWx1ZShyYXc6IHN0cmluZykge1xuICAgICAgICAvLyBJZiB0aGUgdHlwZWQgc3RyaW5nIG1hdGNoZXMgYSBrbm93biBjYW5kaWRhdGVcdTIwMTlzIGxhYmVsIFx1MjE5MiBzdG9yZSBpdHMgd2lraWxpbmsuXG4gICAgICAgIGNvbnN0IG1hdGNoID0gdGhpcy5tYXRjaENhbmRpZGF0ZUJ5TGFiZWwodGhpcy5sYWJlbEZvcihyYXcpKTtcbiAgICAgICAgY29uc3QgdiA9IG1hdGNoID8/IHJhdztcblxuICAgICAgICBpZiAodGhpcy52YWx1ZXMuc29tZSh4ID0+IHRoaXMua2V5Rm9yKHgpID09PSB0aGlzLmtleUZvcih2KSkpIHJldHVybjtcblxuICAgICAgICB0aGlzLnZhbHVlcy5wdXNoKHYpO1xuICAgICAgICB0aGlzLnZhbHVlcy5zb3J0KChhLCBiKSA9PiB0aGlzLmxhYmVsRm9yKGEpLmxvY2FsZUNvbXBhcmUodGhpcy5sYWJlbEZvcihiKSkpO1xuICAgICAgICB0aGlzLnBhaW50TGlzdCgpO1xuICAgICAgICB0aGlzLmlucHV0RWwudmFsdWUgPSBcIlwiO1xuICAgICAgICB0aGlzLmhpZGVTdWdnZXN0aW9ucygpO1xuICAgICAgICB0aGlzLmlucHV0RWwuZm9jdXMoKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHJlbW92ZVZhbHVlKHY6IHN0cmluZykge1xuICAgICAgICB0aGlzLnZhbHVlcyA9IHRoaXMudmFsdWVzLmZpbHRlcih4ID0+IHggIT09IHYpO1xuICAgICAgICB0aGlzLnBhaW50TGlzdCgpO1xuICAgIH1cblxuICAgIHByaXZhdGUgcGFpbnRMaXN0KCkge1xuICAgICAgICB0aGlzLmxpc3RXcmFwLmVtcHR5KCk7XG4gICAgICAgIGlmICghdGhpcy52YWx1ZXMubGVuZ3RoKSB7XG4gICAgICAgICAgICB0aGlzLmxpc3RXcmFwLmNyZWF0ZURpdih7IGNsczogXCJ2di1saXN0LWVtcHR5XCIsIHRleHQ6IFwiTm90aGluZyBhZGRlZCB5ZXQuXCIgfSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgdWwgPSB0aGlzLmxpc3RXcmFwLmNyZWF0ZUVsKFwidWxcIiwgeyBjbHM6IFwidnYtbGlzdFwiIH0pO1xuICAgICAgICBmb3IgKGNvbnN0IHYgb2YgdGhpcy52YWx1ZXMpIHtcbiAgICAgICAgICAgIGNvbnN0IGxpID0gdWwuY3JlYXRlRWwoXCJsaVwiLCB7IGNsczogXCJ2di1saVwiIH0pO1xuICAgICAgICAgICAgY29uc3Qgcm0gPSBsaS5jcmVhdGVFbChcImJ1dHRvblwiLCB7XG4gICAgICAgICAgICAgICAgY2xzOiBcInZ2LWxpLXhcIixcbiAgICAgICAgICAgICAgICB0ZXh0OiBcIlx1MDBEN1wiLFxuICAgICAgICAgICAgICAgIGF0dHI6IHsgXCJhcmlhLWxhYmVsXCI6IGBSZW1vdmUgJHt2fWAgfSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcm0uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHRoaXMucmVtb3ZlVmFsdWUodikpO1xuXG4gICAgICAgICAgICAvLyBTaG93IHBsYWluIHRleHQ7IGlmIGl0IGlzIGEgbGluaywgT2JzaWRpYW4gd2lsbCBzdGlsbCByZXNvbHZlIGl0XG4gICAgICAgICAgICBsaS5jcmVhdGVTcGFuKHsgY2xzOiBcInZ2LWxpLXRleHRcIiwgdGV4dDogU3RyaW5nKHYpLnJlcGxhY2UoL15cXFtcXFt8XFxdXFxdJC9nLCBcIlwiKSB9KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8vIFx1MjUwMFx1MjUwMCBzdWdnZXN0aW9ucyBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcbiAgICBwcml2YXRlIHNob3dTdWdnZXN0aW9ucyhxOiBzdHJpbmcpIHtcbiAgICAgICAgY29uc3QgbmVlZGxlID0gcS50cmltKCkudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgaWYgKCFuZWVkbGUpIHJldHVybiB0aGlzLmhpZGVTdWdnZXN0aW9ucygpO1xuXG4gICAgICAgIHRoaXMuZmlsdGVyZWQgPSB0aGlzLmNhbmRpZGF0ZXNcbiAgICAgICAgICAgIC5maWx0ZXIoYyA9PiBjLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMobmVlZGxlKSAmJiAhdGhpcy52YWx1ZXMuaW5jbHVkZXMoYykpXG4gICAgICAgICAgICAuc2xpY2UoMCwgNTApO1xuXG4gICAgICAgIHRoaXMuc3VnZ2VzdFdyYXAuZW1wdHkoKTtcbiAgICAgICAgaWYgKCF0aGlzLmZpbHRlcmVkLmxlbmd0aCkgcmV0dXJuIHRoaXMuaGlkZVN1Z2dlc3Rpb25zKCk7XG5cbiAgICAgICAgLy8gLS0tIENvbXB1dGUgYXZhaWxhYmxlIHNwYWNlIHdpdGhpbiB0aGUgbW9kYWwgLS0tXG4gICAgICAgIGNvbnN0IG1vZGFsUmVjdCA9IHRoaXMubW9kYWxFbC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgICAgY29uc3Qgd3JhcFJlY3QgPSB0aGlzLmlucHV0V3JhcC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgICAgY29uc3QgUEFEID0gMTI7IC8vIGxpdHRsZSBicmVhdGhpbmcgcm9vbSBmcm9tIGVkZ2VzXG5cbiAgICAgICAgY29uc3Qgc3BhY2VCZWxvdyA9IE1hdGguZmxvb3IobW9kYWxSZWN0LmJvdHRvbSAtIHdyYXBSZWN0LmJvdHRvbSAtIFBBRCk7XG4gICAgICAgIGNvbnN0IHNwYWNlQWJvdmUgPSBNYXRoLmZsb29yKHdyYXBSZWN0LnRvcCAtIG1vZGFsUmVjdC50b3AgLSBQQUQpO1xuXG4gICAgICAgIC8vIHByZWZlciBkb3duLCBidXQgZmxpcCBpZiBiZWxvdyBpcyB0aWdodCBhbmQgYWJvdmUgaXMgYmV0dGVyXG4gICAgICAgIGNvbnN0IGRyb3BVcCA9IHNwYWNlQmVsb3cgPCAyMjAgJiYgc3BhY2VBYm92ZSA+IHNwYWNlQmVsb3c7XG5cbiAgICAgICAgLy8gY2FwIHRvIHdoYXRcdTIwMTlzIGF2YWlsYWJsZSBpbnNpZGUgdGhlIG1vZGFsOyBrZWVwIHNhbmUgbWluL21heFxuICAgICAgICBjb25zdCBhdmFpbGFibGUgPSBkcm9wVXAgPyBzcGFjZUFib3ZlIDogc3BhY2VCZWxvdztcbiAgICAgICAgY29uc3QgbWF4SCA9IE1hdGgubWF4KDE0MCwgTWF0aC5taW4oMzYwLCBhdmFpbGFibGUpKTtcblxuICAgICAgICB0aGlzLnN1Z2dlc3RXcmFwLmNsYXNzTGlzdC50b2dnbGUoXCJkcm9wLXVwXCIsIGRyb3BVcCk7XG4gICAgICAgIHRoaXMuc3VnZ2VzdFdyYXAuc3R5bGUubWF4SGVpZ2h0ID0gYCR7bWF4SH1weGA7XG4gICAgICAgIHRoaXMuc3VnZ2VzdFdyYXAuc2V0QXR0cihcImFyaWEtaGlkZGVuXCIsIFwiZmFsc2VcIik7XG4gICAgICAgIHRoaXMuc3VnZ2VzdFdyYXAuYWRkQ2xhc3MoXCJpcy1vcGVuXCIpO1xuXG4gICAgICAgIHRoaXMuZmlsdGVyZWQuZm9yRWFjaCgob3B0LCBpKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBsaSA9IHRoaXMuc3VnZ2VzdFdyYXAuY3JlYXRlRGl2KHtcbiAgICAgICAgICAgICAgICBjbHM6IFwidnYtc3VnZ2VzdC1pdGVtXCIsXG4gICAgICAgICAgICAgICAgdGV4dDogb3B0LnJlcGxhY2UoL15cXFtcXFt8XFxdXFxdJC9nLCBcIlwiKVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBsaS5hZGRFdmVudExpc3RlbmVyKFwibW91c2VlbnRlclwiLCAoKSA9PiB0aGlzLnNldEhvdmVyKGkpKTtcbiAgICAgICAgICAgIGxpLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWxlYXZlXCIsICgpID0+IHRoaXMuc2V0SG92ZXIoLTEpKTtcbiAgICAgICAgICAgIGxpLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIiwgKGUpID0+IHsgZS5wcmV2ZW50RGVmYXVsdCgpOyB0aGlzLmFkZFZhbHVlKG9wdCk7IH0pO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGhpZGVTdWdnZXN0aW9ucygpIHtcbiAgICB0aGlzLnN1Z2dlc3RXcmFwLmVtcHR5KCk7XG4gICAgdGhpcy5zdWdnZXN0V3JhcC5zZXRBdHRyKFwiYXJpYS1oaWRkZW5cIiwgXCJ0cnVlXCIpO1xuICAgIHRoaXMuc3VnZ2VzdFdyYXAudG9nZ2xlQ2xhc3MoXCJpcy1vcGVuXCIsIGZhbHNlKTtcbiAgICB0aGlzLnN1Z2dlc3RXcmFwLmNsYXNzTGlzdC5yZW1vdmUoXCJkcm9wLXVwXCIpO1xuICAgIHRoaXMuc3VnZ2VzdFdyYXAuc3R5bGUubWF4SGVpZ2h0ID0gXCJcIjsgICAgIC8vIFx1MjE5MCByZXNldFxuICAgIHRoaXMuZmlsdGVyZWQgPSBbXTtcbiAgICB0aGlzLmhvdmVySW5kZXggPSAtMTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHNldEhvdmVyKGk6IG51bWJlcikge1xuICAgICAgICB0aGlzLmhvdmVySW5kZXggPSBpO1xuICAgICAgICBjb25zdCBraWRzID0gQXJyYXkuZnJvbSh0aGlzLnN1Z2dlc3RXcmFwLmNoaWxkcmVuKSBhcyBIVE1MRWxlbWVudFtdO1xuICAgICAgICBraWRzLmZvckVhY2goKGVsLCBpZHgpID0+IGVsLnRvZ2dsZUNsYXNzKFwiaXMtaG92ZXJcIiwgaWR4ID09PSBpKSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBtb3ZlSG92ZXIoZGVsdGE6IG51bWJlcikge1xuICAgICAgICBpZiAoIXRoaXMuZmlsdGVyZWQubGVuZ3RoKSByZXR1cm47XG4gICAgICAgIHRoaXMuaG92ZXJJbmRleCA9ICh0aGlzLmhvdmVySW5kZXggKyBkZWx0YSArIHRoaXMuZmlsdGVyZWQubGVuZ3RoKSAlIHRoaXMuZmlsdGVyZWQubGVuZ3RoO1xuICAgICAgICB0aGlzLnNldEhvdmVyKHRoaXMuaG92ZXJJbmRleCk7XG4gICAgfVxufVxuXG5cbmV4cG9ydCBjbGFzcyBHYW1lcGxheVNpZGViYXJWaWV3IGV4dGVuZHMgSXRlbVZpZXcge1xuICAgIHByaXZhdGUgZm9sZGVyUm93ITogSFRNTERpdkVsZW1lbnQ7XG4gICAgcHJpdmF0ZSBhZGRSb3chOiBIVE1MRGl2RWxlbWVudDtcbiAgICBwcml2YXRlIHBhcnR5VGFibGVXcmFwOiBIVE1MRGl2RWxlbWVudCB8IG51bGwgPSBudWxsO1xuICAgIHByaXZhdGUgZGV0YWlsc1dyYXA6IEhUTUxEaXZFbGVtZW50IHwgbnVsbCA9IG51bGw7XG4gICAgcHJpdmF0ZSBkZXRhaWxzT3BlblBhdGg6IHN0cmluZyB8IG51bGwgPSBudWxsO1xuXG4gICAgY29uc3RydWN0b3IobGVhZjogV29ya3NwYWNlTGVhZikgeyBzdXBlcihsZWFmKTsgfVxuICAgIGdldFZpZXdUeXBlKCkgeyByZXR1cm4gR0FNRVBMQVlfVklFV19UWVBFOyB9XG4gICAgZ2V0RGlzcGxheVRleHQoKSB7IHJldHVybiBcIkdhbWVwbGF5XCI7IH1cbiAgICBnZXRJY29uKCkgeyByZXR1cm4gXCJnYW1lcGxheVwiOyB9XG4gICAgcHJpdmF0ZSBhc3luYyBzYXZlRnJvbnRtYXR0ZXJOdW1iZXIoZmlsZTogVEZpbGUsIGtleTogc3RyaW5nLCB2YWx1ZTogbnVtYmVyKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGNvbnN0IHJhdyA9IGF3YWl0IHRoaXMuYXBwLnZhdWx0LnJlYWQoZmlsZSk7XG4gICAgICAgIC8vIGRldGVjdCBZQU1MIGZyb250bWF0dGVyXG4gICAgICAgIGNvbnN0IGZtTWF0Y2ggPSByYXcubWF0Y2goL14tLS1cXHI/XFxuKFtcXHNcXFNdKj8pXFxyP1xcbi0tLVxccj9cXG4/Lyk7XG4gICAgICAgIGlmICghZm1NYXRjaCkge1xuICAgICAgICAgICAgLy8gbm8gZnJvbnRtYXR0ZXIgXHUyMTkyIGNyZWF0ZSBvbmVcbiAgICAgICAgICAgIGNvbnN0IHlhbWwgPSBgLS0tXFxuJHtrZXl9OiAke3ZhbHVlfVxcbi0tLVxcbmA7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLmFwcC52YXVsdC5tb2RpZnkoZmlsZSwgeWFtbCArIHJhdyk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBmdWxsID0gZm1NYXRjaFswXTtcbiAgICAgICAgY29uc3QgYm9keSA9IGZtTWF0Y2hbMV07XG5cbiAgICAgICAgY29uc3QgaGFzS2V5ID0gbmV3IFJlZ0V4cChgXiR7a2V5fVxcXFxzKjpgLCBcIm1pXCIpLnRlc3QoYm9keSk7XG4gICAgICAgIGxldCBuZXdCb2R5OiBzdHJpbmc7XG5cbiAgICAgICAgaWYgKGhhc0tleSkge1xuICAgICAgICAgICAgLy8gcmVwbGFjZSBleGlzdGluZyBsaW5lXG4gICAgICAgICAgICBuZXdCb2R5ID0gYm9keS5yZXBsYWNlKG5ldyBSZWdFeHAoYF4ke2tleX1cXFxccyo6XFxcXHMqLiokYCwgXCJtaVwiKSwgYCR7a2V5fTogJHt2YWx1ZX1gKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIGluc2VydCBuZXcgbGluZSBhdCBlbmQgb2YgRk0gYm9keVxuICAgICAgICAgICAgbmV3Qm9keSA9IGJvZHkucmVwbGFjZSgvXFxzKiQvLCBgXFxuJHtrZXl9OiAke3ZhbHVlfVxcbmApO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgdXBkYXRlZCA9IHJhdy5yZXBsYWNlKGZ1bGwsIGAtLS1cXG4ke25ld0JvZHkucmVwbGFjZSgvXFxyP1xcbiQvLCBcIlwiKX1cXG4tLS1cXG5gKTtcbiAgICAgICAgYXdhaXQgdGhpcy5hcHAudmF1bHQubW9kaWZ5KGZpbGUsIHVwZGF0ZWQpO1xuICAgIH1cblxuXG4gICAgcHJpdmF0ZSBjb2xsZWN0Q2FuZGlkYXRlcyhmb2xkZXI6IHN0cmluZywgYXNXaWtpbGlua3MgPSB0cnVlKTogc3RyaW5nW10ge1xuICAgICAgICBjb25zdCByb290ID0gZm9sZGVyLnJlcGxhY2UoL1xcLyskLywgXCJcIikgKyBcIi9cIjtcbiAgICAgICAgcmV0dXJuIHRoaXMuYXBwLnZhdWx0XG4gICAgICAgICAgICAuZ2V0TWFya2Rvd25GaWxlcygpXG4gICAgICAgICAgICAuZmlsdGVyKGYgPT4gZi5wYXRoLnN0YXJ0c1dpdGgocm9vdCkpXG4gICAgICAgICAgICAubWFwKGYgPT4gKGFzV2lraWxpbmtzID8gYFtbJHtmLmJhc2VuYW1lfV1dYCA6IGYuYmFzZW5hbWUpKTtcbiAgICB9XG5cbiAgICAvLyBNZXJnZSBjYW5kaWRhdGVzIGZyb20gbXVsdGlwbGUgZm9sZGVycywgZGUtZHVwZSwgc29ydFxuICAgIHByaXZhdGUgY29sbGVjdEZyb21Gb2xkZXJzKGZvbGRlcnM6IHN0cmluZ1tdLCBhc1dpa2lsaW5rcyA9IHRydWUpOiBzdHJpbmdbXSB7XG4gICAgICAgIHJldHVybiBBcnJheS5mcm9tKFxuICAgICAgICAgICAgbmV3IFNldChmb2xkZXJzLmZsYXRNYXAoZiA9PiB0aGlzLmNvbGxlY3RDYW5kaWRhdGVzKGYsIGFzV2lraWxpbmtzKSkpXG4gICAgICAgICkuc29ydCgoYSwgYikgPT4gYS5sb2NhbGVDb21wYXJlKGIpKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHJlZnJlc2hEZXRhaWxQbGFjZWhvbGRlcigpIHtcbiAgICAgICAgY29uc3Qgd3JhcCA9IHRoaXMuZGV0YWlsc1dyYXAhO1xuICAgICAgICBjb25zdCBoYXNDYXJkID0gISF3cmFwLnF1ZXJ5U2VsZWN0b3IoXCIudnYtZ3AtY2FyZFwiKTtcbiAgICAgICAgY29uc3QgZW1wdHkgPSB3cmFwLnF1ZXJ5U2VsZWN0b3IoXCIudnYtZ3AtZGV0YWlsLWVtcHR5XCIpO1xuICAgICAgICBpZiAoaGFzQ2FyZCAmJiBlbXB0eSkgZW1wdHkucmVtb3ZlKCk7XG4gICAgICAgIGlmICghaGFzQ2FyZCAmJiAhZW1wdHkpIHtcbiAgICAgICAgICAgIHdyYXAuY3JlYXRlRGl2KHsgY2xzOiBcInZ2LWdwLWRldGFpbC1lbXB0eVwiLCB0ZXh0OiBcIkNsaWNrIGEgbmFtZSB0byBzZWUgZGV0YWlsc1x1MjAyNlwiIH0pO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBnZXRBY3RpdmVGb2xkZXJQcmVmaXgoKTogc3RyaW5nIHtcbiAgICAgICAgY29uc3QgcGx1Z2luID0gZ2V0VG9vbGtpdCh0aGlzLmFwcCk7XG4gICAgICAgIGNvbnN0IHMgPSBwbHVnaW4/LnNldHRpbmdzPy5nYW1lcGxheSB8fCB7fTtcbiAgICAgICAgcmV0dXJuICgocy5hY3RpdmVGb2xkZXIgfHwgXCJXb3JsZC9QZW9wbGUvUGxheWVyIENoYXJhY3RlcnMvQWN0aXZlXCIpLnJlcGxhY2UoL1xcLyskLywgXCJcIikpICsgXCIvXCI7XG4gICAgfVxuICAgIHByaXZhdGUgdGFibGVSZWZyZXNoVGltZXI6IG51bWJlciB8IG51bGwgPSBudWxsO1xuXG4gICAgcHJpdmF0ZSBxdWV1ZVRhYmxlID0gKCkgPT4ge1xuICAgICAgICBpZiAodGhpcy50YWJsZVJlZnJlc2hUaW1lcikgd2luZG93LmNsZWFyVGltZW91dCh0aGlzLnRhYmxlUmVmcmVzaFRpbWVyKTtcbiAgICAgICAgdGhpcy50YWJsZVJlZnJlc2hUaW1lciA9IHdpbmRvdy5zZXRUaW1lb3V0KGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMudGFibGVSZWZyZXNoVGltZXIgPSBudWxsO1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5yZW5kZXJUYWJsZSgpO1xuICAgICAgICB9LCAxMjApOyAvLyBzbWFsbCBkZWJvdW5jZVxuICAgIH07XG5cbiAgICBwcml2YXRlIGRldGFpbFJlZnJlc2hUaW1lcjogbnVtYmVyIHwgbnVsbCA9IG51bGw7XG4gICAgcHJpdmF0ZSBxdWV1ZURldGFpbCA9ICgpID0+IHtcbiAgICAgICAgaWYgKHRoaXMuZGV0YWlsUmVmcmVzaFRpbWVyKSB3aW5kb3cuY2xlYXJUaW1lb3V0KHRoaXMuZGV0YWlsUmVmcmVzaFRpbWVyKTtcbiAgICAgICAgdGhpcy5kZXRhaWxSZWZyZXNoVGltZXIgPSB3aW5kb3cuc2V0VGltZW91dChhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmRldGFpbFJlZnJlc2hUaW1lciA9IG51bGw7XG4gICAgICAgICAgICBjb25zdCBwID0gdGhpcy5kZXRhaWxzT3BlblBhdGg7XG4gICAgICAgICAgICBpZiAoIXApIHJldHVybjtcbiAgICAgICAgICAgIGNvbnN0IGYgPSB0aGlzLmFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgocCk7XG4gICAgICAgICAgICBpZiAoZiBpbnN0YW5jZW9mIFRGaWxlKSBhd2FpdCB0aGlzLnNob3dEZXRhaWxzKGYpO1xuICAgICAgICB9LCAxMjApO1xuICAgIH07XG5cbiAgICBwcml2YXRlIGlzU2VsZWN0ZWRQYXRoID0gKHBhdGg6IHN0cmluZyk6IGJvb2xlYW4gPT4ge1xuICAgICAgICBjb25zdCBwbHVnaW4gPSBnZXRUb29sa2l0KHRoaXMuYXBwKTtcbiAgICAgICAgY29uc3QgcyA9IHBsdWdpbj8uc2V0dGluZ3M/LmdhbWVwbGF5IHx8IHt9O1xuICAgICAgICBjb25zdCBsaXN0OiBzdHJpbmdbXSA9IHMuc2VsZWN0ZWRQbGF5ZXJzIHx8IFtdO1xuICAgICAgICByZXR1cm4gbGlzdC5pbmNsdWRlcyhwYXRoKTtcbiAgICB9O1xuXG4gICAgcHJpdmF0ZSBhc3luYyBzaG93RGV0YWlscyhmaWxlOiBURmlsZSkge1xuICAgICAgICB0aGlzLmRldGFpbHNPcGVuUGF0aCA9IGZpbGUucGF0aDtcblxuICAgICAgICBjb25zdCB3cmFwID0gdGhpcy5kZXRhaWxzV3JhcCE7XG5cbiAgICAgICAge1xuICAgICAgICAgICAgY29uc3QgY2FyZHMgPSBBcnJheS5mcm9tKHdyYXAucXVlcnlTZWxlY3RvckFsbDxIVE1MRWxlbWVudD4oXCIudnYtZ3AtY2FyZFwiKSk7XG4gICAgICAgICAgICBjb25zdCBwaW5uZWRGb3JQYXRoID0gY2FyZHMuZmluZChlbCA9PiBlbC5kYXRhc2V0LnBpbm5lZCA9PT0gXCJ0cnVlXCIgJiYgZWwuZGF0YXNldC5wYXRoID09PSBmaWxlLnBhdGgpO1xuICAgICAgICAgICAgaWYgKHBpbm5lZEZvclBhdGgpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnJlZnJlc2hEZXRhaWxQbGFjZWhvbGRlcigpO1xuICAgICAgICAgICAgICAgIHBpbm5lZEZvclBhdGguc2Nyb2xsSW50b1ZpZXcoeyBibG9jazogXCJuZWFyZXN0XCIsIGJlaGF2aW9yOiBcInNtb290aFwiIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB7XG4gICAgICAgICAgICBjb25zdCBleGlzdGluZ1VucGlubmVkID0gd3JhcC5xdWVyeVNlbGVjdG9yPEhUTUxFbGVtZW50PignLnZ2LWdwLWNhcmRbZGF0YS1waW5uZWQ9XCJmYWxzZVwiXScpO1xuICAgICAgICAgICAgaWYgKGV4aXN0aW5nVW5waW5uZWQpIGV4aXN0aW5nVW5waW5uZWQucmVtb3ZlKCk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBjYXJkID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgY2FyZC5hZGRDbGFzcyhcInZ2LWdwLWNhcmRcIik7XG4gICAgICAgIGNhcmQuZGF0YXNldC5waW5uZWQgPSBcImZhbHNlXCI7XG4gICAgICAgIGNhcmQuZGF0YXNldC5wYXRoID0gZmlsZS5wYXRoO1xuXG4gICAgICAgIGNvbnN0IHBsYWNlQ2FyZCA9IChjOiBIVE1MRWxlbWVudCkgPT4ge1xuICAgICAgICAgICAgY29uc3Qga2lkcyA9IEFycmF5LmZyb20od3JhcC5jaGlsZHJlbikgYXMgSFRNTEVsZW1lbnRbXTtcbiAgICAgICAgICAgIGNvbnN0IGNhcmRzID0ga2lkcy5maWx0ZXIoZWwgPT4gZWwuY2xhc3NMaXN0LmNvbnRhaW5zKFwidnYtZ3AtY2FyZFwiKSk7XG4gICAgICAgICAgICBjb25zdCBwaW5uZWQgPSBjYXJkcy5maWx0ZXIoZWwgPT4gZWwuZGF0YXNldC5waW5uZWQgPT09IFwidHJ1ZVwiKTtcblxuICAgICAgICAgICAgaWYgKHBpbm5lZC5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBhZnRlciA9IHBpbm5lZFtwaW5uZWQubGVuZ3RoIC0gMV07XG4gICAgICAgICAgICAgICAgd3JhcC5pbnNlcnRCZWZvcmUoYywgYWZ0ZXIubmV4dFNpYmxpbmcpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB3cmFwLmluc2VydEJlZm9yZShjLCB3cmFwLmZpcnN0Q2hpbGQpOyAvLyBuZXdlc3QtZmlyc3QgYXQgdG9wIG9mIHN0YWNrXG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IHJlcG9zaXRpb24gPSAoYzogSFRNTEVsZW1lbnQpID0+IHtcbiAgICAgICAgICAgIGlmIChjLnBhcmVudEVsZW1lbnQgPT09IHdyYXApIHdyYXAucmVtb3ZlQ2hpbGQoYyk7XG4gICAgICAgICAgICBwbGFjZUNhcmQoYyk7XG4gICAgICAgIH07XG5cbiAgICAgICAgcGxhY2VDYXJkKGNhcmQpO1xuICAgICAgICB0aGlzLnJlZnJlc2hEZXRhaWxQbGFjZWhvbGRlcigpO1xuXG4gICAgICAgIC8vIFx1MjUwMFx1MjUwMCBjb250cm9sc1xuICAgICAgICBjb25zdCBjb250cm9scyA9IGNhcmQuY3JlYXRlRGl2KHsgY2xzOiBcInZ2LWdwLWRldGFpbC1jb250cm9sc1wiIH0pO1xuXG4gICAgICAgIGNvbnN0IHBpbkJ0biA9IGNvbnRyb2xzLmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHsgdGV4dDogXCJwaW5cIiwgY2xzOiBcInZ2LWdwLWJ0blwiIH0pO1xuICAgICAgICBwaW5CdG4udGl0bGUgPSBcIlBpbiBjYXJkXCI7XG4gICAgICAgIHBpbkJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgcGlubmVkID0gY2FyZC5kYXRhc2V0LnBpbm5lZCA9PT0gXCJ0cnVlXCI7XG4gICAgICAgICAgICBjYXJkLmRhdGFzZXQucGlubmVkID0gKCFwaW5uZWQpLnRvU3RyaW5nKCk7XG4gICAgICAgICAgICBwaW5CdG4udGV4dENvbnRlbnQgPSAhcGlubmVkID8gXCJ1bnBpblwiIDogXCJwaW5cIjtcbiAgICAgICAgICAgIHBpbkJ0bi50aXRsZSA9ICFwaW5uZWQgPyBcIlVucGluIGNhcmRcIiA6IFwiUGluIGNhcmRcIjtcbiAgICAgICAgICAgIHJlcG9zaXRpb24oY2FyZCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGNvbnN0IGNsb3NlQnRuID0gY29udHJvbHMuY3JlYXRlRWwoXCJidXR0b25cIiwgeyB0ZXh0OiBcIlx1MjcxNVwiLCBjbHM6IFwidnYtZ3AtYnRuXCIgfSk7XG4gICAgICAgIGNsb3NlQnRuLnRpdGxlID0gXCJDbG9zZSBjYXJkXCI7XG4gICAgICAgIGNsb3NlQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICAgICAgICBjYXJkLnJlbW92ZSgpO1xuICAgICAgICAgICAgdGhpcy5yZWZyZXNoRGV0YWlsUGxhY2Vob2xkZXIoKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gcmVuZGVyIElOVE8gdGhlIGNhcmRcbiAgICAgICAgY29uc3QgYm94ID0gY2FyZDtcblxuXG4gICAgICAgIGNvbnN0IGZtID0gdGhpcy5hcHAubWV0YWRhdGFDYWNoZS5nZXRGaWxlQ2FjaGUoZmlsZSk/LmZyb250bWF0dGVyIHx8IHt9O1xuICAgICAgICBjb25zdCBuYW1lID0gKGZtW1wiTmFtZVwiXSA/PyBmaWxlLmJhc2VuYW1lKSBhcyBzdHJpbmc7XG5cbiAgICAgICAgY29uc3QgaGVhZGVyID0gYm94LmNyZWF0ZURpdih7IGNsczogXCJ2di1ncC1kZXRhaWwtaGVhZGVyXCIgfSk7XG4gICAgICAgIGNvbnN0IHRpdGxlRWwgPSBoZWFkZXIuY3JlYXRlRWwoXCJoMlwiLCB7IHRleHQ6IG5hbWUgfSk7XG4gICAgICAgIHRpdGxlRWwuY2xhc3NMaXN0LmFkZChcInZ2LWdwLWRldGFpbC10aXRsZVwiKTtcblxuICAgICAgICAvLyBoZWxwZXJzXG4gICAgICAgIGNvbnN0IGxpbmtUbyA9ICh0YXJnZXQ6IHN0cmluZywgbGFiZWw/OiBzdHJpbmcpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGRlc3QgPSB0aGlzLmFwcC5tZXRhZGF0YUNhY2hlLmdldEZpcnN0TGlua3BhdGhEZXN0KHRhcmdldCwgZmlsZS5wYXRoKTtcbiAgICAgICAgICAgIGNvbnN0IHRleHQgPSAobGFiZWwgPz8gdGFyZ2V0LnNwbGl0KFwiL1wiKS5wb3AoKSEucmVwbGFjZSgvXFwubWQkLywgXCJcIikpLnRyaW0oKTtcblxuICAgICAgICAgICAgY29uc3QgcGx1Z2luID0gZ2V0VG9vbGtpdCh0aGlzLmFwcCk7XG4gICAgICAgICAgICBjb25zdCBlbmFibGVQcmV2aWV3ID0gISFwbHVnaW4/LnNldHRpbmdzPy5lbmFibGVTaWRlYmFyUHJldmlld3M7XG5cbiAgICAgICAgICAgIHJldHVybiBkZXN0XG4gICAgICAgICAgICAgICAgPyBgPGEgY2xhc3M9XCJ2di1saW5rJHtlbmFibGVQcmV2aWV3ID8gXCIgaW50ZXJuYWwtbGlua1wiIDogXCJcIn1cIiBocmVmPVwiJHtkZXN0LnBhdGh9XCIke2VuYWJsZVByZXZpZXcgPyBgIGRhdGEtaHJlZj1cIiR7ZGVzdC5wYXRofVwiYCA6IFwiXCJ9PiR7dGV4dH08L2E+YFxuICAgICAgICAgICAgICAgIDogdGV4dDtcbiAgICAgICAgfTtcblxuXG4gICAgICAgIGNvbnN0IHBhcnNlTWF5YmVMaW5rID0gKHZhbDogdW5rbm93bik6IHN0cmluZyA9PiB7XG4gICAgICAgICAgICAvLyBzdXBwb3J0cyAnW1tQYXRofExhYmVsXV0nLCAnW1tQYXRoXV0nLCBwbGFpbiBzdHJpbmcsIG9yIGR2LWxpa2Uge3BhdGg6IFwiLi4uXCJ9XG4gICAgICAgICAgICBpZiAoIXZhbCkgcmV0dXJuIFwiTi9BXCI7XG4gICAgICAgICAgICBpZiAodHlwZW9mIHZhbCA9PT0gXCJvYmplY3RcIiAmJiAodmFsIGFzIGFueSkucGF0aCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHAgPSBTdHJpbmcoKHZhbCBhcyBhbnkpLnBhdGgpO1xuICAgICAgICAgICAgICAgIHJldHVybiBsaW5rVG8ocCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBzID0gU3RyaW5nKHZhbCk7XG4gICAgICAgICAgICBjb25zdCBtID0gcy5tYXRjaCgvXFxbXFxbKFtefFxcXV0rKSg/OlxcfChbXlxcXV0rKSk/XFxdXFxdLyk7XG4gICAgICAgICAgICBpZiAobSkgcmV0dXJuIGxpbmtUbyhtWzFdLCBtWzJdKTtcbiAgICAgICAgICAgIHJldHVybiBzO1xuICAgICAgICB9O1xuXG4gICAgICAgIGNvbnN0IGFyclRvTGlzdCA9ICh2OiB1bmtub3duKTogc3RyaW5nW10gPT4ge1xuICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkodikpIHJldHVybiB2Lm1hcCgoeCkgPT4gU3RyaW5nKHgpKTtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgdiA9PT0gXCJzdHJpbmdcIikgcmV0dXJuIHYuc3BsaXQoXCIsXCIpLm1hcCgoeCkgPT4geC50cmltKCkpLmZpbHRlcihCb29sZWFuKTtcbiAgICAgICAgICAgIHJldHVybiBbXTtcbiAgICAgICAgfTtcblxuICAgICAgICAvLyBzcGVjaWVzL2NsYXNzL3N1YmNsYXNzXG4gICAgICAgIGNvbnN0IHNwZWNpZXMgPSBwYXJzZU1heWJlTGluayhmbVtcInNwZWNpZXNcIl0pO1xuICAgICAgICBjb25zdCByYWNlID0gcGFyc2VNYXliZUxpbmsoZm1bXCJyYWNlXCJdKTtcbiAgICAgICAgY29uc3Qga2xhc3MgPSBwYXJzZU1heWJlTGluayhmbVtcImNsYXNzXCJdKTtcbiAgICAgICAgY29uc3Qgc3ViY2xhc3MgPSBwYXJzZU1heWJlTGluayhmbVtcInN1YmNsYXNzXCJdKTtcblxuICAgICAgICAvLyBwcm9maWNpZW5jaWVzICh2ZXJ0aWNhbCBsaXN0LCBjZW50ZXJlZCwgYWJicmV2aWF0ZWQpXG4gICAgICAgIGNvbnN0IHNraWxsUHJvZnMgPSBhcnJUb0xpc3QoZm1bXCJza2lsbHNcIl0pOyAvLyBrZWVwIGZ1bGwgbmFtZXNcbiAgICAgICAgY29uc3Qgc3RQcm9mcyA9IGFyclRvTGlzdChmbVtcInNhdmluZ190aHJvd3NcIl0pXG4gICAgICAgICAgICAubWFwKHMgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGtleSA9IHMudG9Mb3dlckNhc2UoKS50cmltKCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIEFCSUxJVFlfQUJCUltrZXldID8/IHM7IC8vIGFiYnJldmlhdGUgaWYgaXQgbWF0Y2hlcyBhYmlsaXR5XG4gICAgICAgICAgICB9KTtcblxuXG4gICAgICAgIGNvbnN0IGpvaW5Db21tYSA9IChpdGVtczogc3RyaW5nW10pOiBzdHJpbmcgPT4ge1xuICAgICAgICAgICAgY29uc3QgeHMgPSBpdGVtcy5maWx0ZXIoQm9vbGVhbik7XG4gICAgICAgICAgICByZXR1cm4geHMubGVuZ3RoID8geHMuam9pbihcIiwgXCIpIDogXCJcdTIwMTRcIjtcbiAgICAgICAgfTtcblxuICAgICAgICBjb25zdCBwcm9mc0h0bWwgPSBqb2luQ29tbWEoc2tpbGxQcm9mcyk7XG4gICAgICAgIGNvbnN0IHN0SHRtbCA9IGpvaW5Db21tYShzdFByb2ZzKTtcblxuICAgICAgICAvLyBoZWFkZXIgaXMgYWxyZWFkeSBjcmVhdGVkIGFib3ZlXHUyMDI2XG5cbiAgICAgICAgLy8ga2V5XHUyMDEzdmFsdWUgc3RhY2sgaGVhZGVyXG4gICAgICAgIGNvbnN0IGt2ID0gYm94LmNyZWF0ZURpdih7IGNsczogXCJ2di1ncC1rdmxpc3RcIiB9KTtcblxuICAgICAgICBjb25zdCBtYWtlS1ZSb3cgPSAobGFiZWw6IHN0cmluZywgaHRtbDogc3RyaW5nKSA9PiB7XG4gICAgICAgICAgICBjb25zdCByb3cgPSBrdi5jcmVhdGVEaXYoeyBjbHM6IFwidnYtZ3Ata3Zyb3dcIiB9KTtcbiAgICAgICAgICAgIHJvdy5jcmVhdGVFbChcImRpdlwiLCB7IGNsczogXCJ2di1ncC1rdmxhYmVsXCIsIHRleHQ6IGxhYmVsIH0pO1xuICAgICAgICAgICAgY29uc3QgdmFsID0gcm93LmNyZWF0ZURpdih7IGNsczogXCJ2di1ncC1rdnZhbHVlXCIgfSk7XG4gICAgICAgICAgICB2YWwuaW5uZXJIVE1MID0gaHRtbDtcbiAgICAgICAgfTtcblxuICAgICAgICAvLyByb3dzXG4gICAgICAgIG1ha2VLVlJvdyhcIlNwZWNpZXNcIiwgc3BlY2llcyk7XG4gICAgICAgIG1ha2VLVlJvdyhcIlJhY2VcIiwgcmFjZSk7XG4gICAgICAgIG1ha2VLVlJvdyhcIkNsYXNzXCIsIGtsYXNzKTtcbiAgICAgICAgbWFrZUtWUm93KFwiU3ViY2xhc3NcIiwgc3ViY2xhc3MpO1xuICAgICAgICBtYWtlS1ZSb3coXCJQcm9maWNpZW5jaWVzXCIsIHByb2ZzSHRtbCk7XG4gICAgICAgIG1ha2VLVlJvdyhcIlNhdmluZyBUaHJvd3NcIiwgc3RIdG1sKTtcblxuICAgICAgICAvLyBMYW5ndWFnZXMgKGZyb20gZm1bXCJsYW5ndWFnZXNcIl0pXG4gICAgICAgIGNvbnN0IGxhbmd1YWdlc0FyciA9IGFyclRvTGlzdChmbVtcImxhbmd1YWdlc1wiXSk7XG4gICAgICAgIGNvbnN0IGxhbmd1YWdlc0h0bWwgPSBsYW5ndWFnZXNBcnIubGVuZ3RoID8gam9pbkNvbW1hKGxhbmd1YWdlc0FycikgOiBcIlx1MjAxNFwiO1xuICAgICAgICBtYWtlS1ZSb3coXCJMYW5ndWFnZXNcIiwgbGFuZ3VhZ2VzSHRtbCk7XG5cblxuICAgICAgICAvLyBcdTIwMTRcdTIwMTRcdTIwMTQgS0VZIElURU1TIChlZGl0YWJsZSkgXHUyMDE0XHUyMDE0XHUyMDE0XHUyMDE0XHUyMDE0XHUyMDE0XHUyMDE0XHUyMDE0XHUyMDE0XHUyMDE0XHUyMDE0XHUyMDE0XHUyMDE0XHUyMDE0XHUyMDE0XHUyMDE0XHUyMDE0XHUyMDE0XHUyMDE0XHUyMDE0XHUyMDE0XHUyMDE0XHUyMDE0XHUyMDE0XHUyMDE0XHUyMDE0XHUyMDE0XHUyMDE0XHUyMDE0XHUyMDE0XHUyMDE0XHUyMDE0XG4gICAgICAgIHtcbiAgICAgICAgICAgIGNvbnN0IHNlYyA9IGJveC5jcmVhdGVEaXYoeyBjbHM6IFwidnYtZ3AtZGV0YWlsLXNlY3Rpb25cIiB9KTtcbiAgICAgICAgICAgIGNvbnN0IGggPSBzZWMuY3JlYXRlRWwoXCJoNFwiLCB7IHRleHQ6IFwiS2V5IEl0ZW1zXCIgfSk7XG4gICAgICAgICAgICBjb25zdCBlZGl0ID0gaC5jcmVhdGVTcGFuKHsgY2xzOiBcInZ2LWdwLWVkaXQtbGlua1wiLCB0ZXh0OiBcImVkaXRcIiB9KTtcbiAgICAgICAgICAgIGNvbnN0IGxpc3QgPSBzZWMuY3JlYXRlRWwoXCJkaXZcIiwgeyBjbHM6IFwidnYtZ3AtZGV0YWlsLWlubGluZVwiIH0pO1xuXG4gICAgICAgICAgICBjb25zdCByZWFkID0gKCkgPT4gdGhpcy5yZWFkRm1TdHJpbmdMaXN0KGZtLCBbXCJrZXlfaXRlbXNcIiwgXCJLZXkgSXRlbXNcIl0pO1xuXG4gICAgICAgICAgICBjb25zdCBwYWludCA9IChhcnI6IHN0cmluZ1tdKSA9PiB7XG4gICAgICAgICAgICAgICAgbGlzdC5lbXB0eSgpO1xuICAgICAgICAgICAgICAgIGxpc3QuaW5uZXJIVE1MID0gKGFyci5sZW5ndGggPyBhcnIgOiBbXCJcdTIwMTRcIl0pXG4gICAgICAgICAgICAgICAgICAgIC5tYXAoKHMpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG0gPSBTdHJpbmcocykubWF0Y2goL1xcW1xcWyhbXnxcXF1dKykoPzpcXHwoW15cXF1dKykpP1xcXVxcXS8pO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG0gPyBsaW5rVG8obVsxXSwgbVsyXSkgOiBzO1xuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAuam9pbihcIiAsIFwiKTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIHBhaW50KHJlYWQoKSk7XG5cbiAgICAgICAgICAgIGVkaXQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBjYW5kaWRhdGVzID0gdGhpcy5jb2xsZWN0RnJvbUZvbGRlcnMoXG4gICAgICAgICAgICAgICAgICAgIFtcIkNvbXBlbmRpdW0vSXRlbXNcIiwgXCJDb21wZW5kaXVtL01hZ2ljIEl0ZW1zXCJdLCB0cnVlXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICBuZXcgRWRpdExpc3RNb2RhbCh0aGlzLmFwcCwge1xuICAgICAgICAgICAgICAgICAgICB0aXRsZTogYCR7cG9zc2Vzc2l2ZShuYW1lKX0gS2V5IEl0ZW1zYCwgXG4gICAgICAgICAgICAgICAgICAgIGluaXRpYWw6IHJlYWQoKSxcbiAgICAgICAgICAgICAgICAgICAgY2FuZGlkYXRlcyxcbiAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI6IFwiU2VhcmNoIGl0ZW1zXHUyMDI2XCIsXG4gICAgICAgICAgICAgICAgICAgIG9uU2F2ZTogYXN5bmMgKG5ld0xpc3QpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMud3JpdGVGbVN0cmluZ0xpc3QoZmlsZSwgXCJrZXlfaXRlbXNcIiwgbmV3TGlzdCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBuZXdGbSA9IHRoaXMuYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0RmlsZUNhY2hlKGZpbGUpPy5mcm9udG1hdHRlciB8fCB7fTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhaW50KHRoaXMucmVhZEZtU3RyaW5nTGlzdChuZXdGbSwgW1wia2V5X2l0ZW1zXCIsIFwiS2V5IEl0ZW1zXCJdKSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KS5vcGVuKCk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICB9XG5cbiAgICAgICAgLy8gXHUyMDE0XHUyMDE0XHUyMDE0IFNQRUxMUyAoZWRpdGFibGUpIFx1MjAxNFx1MjAxNFx1MjAxNFx1MjAxNFx1MjAxNFx1MjAxNFx1MjAxNFx1MjAxNFx1MjAxNFx1MjAxNFx1MjAxNFx1MjAxNFx1MjAxNFx1MjAxNFx1MjAxNFx1MjAxNFx1MjAxNFx1MjAxNFx1MjAxNFx1MjAxNFx1MjAxNFx1MjAxNFx1MjAxNFx1MjAxNFx1MjAxNFx1MjAxNFx1MjAxNFx1MjAxNFx1MjAxNFx1MjAxNFx1MjAxNFx1MjAxNFxuICAgICAgICB7XG4gICAgICAgICAgICBjb25zdCBzZWMgPSBib3guY3JlYXRlRGl2KHsgY2xzOiBcInZ2LWdwLWRldGFpbC1zZWN0aW9uXCIgfSk7XG4gICAgICAgICAgICBjb25zdCBoID0gc2VjLmNyZWF0ZUVsKFwiaDRcIiwgeyB0ZXh0OiBcIlNwZWxsc1wiIH0pO1xuICAgICAgICAgICAgY29uc3QgZWRpdCA9IGguY3JlYXRlU3Bhbih7IGNsczogXCJ2di1ncC1lZGl0LWxpbmtcIiwgdGV4dDogXCJlZGl0XCIgfSk7XG5cbiAgICAgICAgICAgIGNvbnN0IGdldCA9ICgpID0+IHRoaXMucmVhZEZtU3RyaW5nTGlzdChmbSwgW1wiU3BlbGxzXCIsIFwic3BlbGxzXCJdKTtcblxuICAgICAgICAgICAgY29uc3QgdGFibGVXcmFwID0gc2VjLmNyZWF0ZURpdigpO1xuXG4gICAgICAgICAgICBjb25zdCBwYWludFRhYmxlID0gKG5hbWVzOiBzdHJpbmdbXSkgPT4ge1xuICAgICAgICAgICAgICAgIHRhYmxlV3JhcC5lbXB0eSgpO1xuXG4gICAgICAgICAgICAgICAgY29uc3Qgc3QgPSB0YWJsZVdyYXAuY3JlYXRlRWwoXCJ0YWJsZVwiLCB7IGNsczogXCJ2di1ncC1zcGVsbC10YWJsZVwiIH0pO1xuICAgICAgICAgICAgICAgIGNvbnN0IHRoZWFkID0gc3QuY3JlYXRlRWwoXCJ0aGVhZFwiKS5jcmVhdGVFbChcInRyXCIpO1xuICAgICAgICAgICAgICAgIFtcIlNwZWxsXCIsIFwiTHZsXCIsIFwiQ2FzdFwiLCBcIlJhbmdlXCIsIFwiU2F2ZVwiXS5mb3JFYWNoKGggPT4gdGhlYWQuY3JlYXRlRWwoXCJ0aFwiLCB7IHRleHQ6IGggfSkpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHRib2R5ID0gc3QuY3JlYXRlRWwoXCJ0Ym9keVwiKTtcblxuICAgICAgICAgICAgICAgIHR5cGUgUm93ID0geyBuYW1lSHRtbDogc3RyaW5nOyBsZXZlbDogbnVtYmVyIHwgc3RyaW5nOyBjYXN0OiBzdHJpbmc7IHJhbmdlOiBzdHJpbmc7IHNhdmU6IHN0cmluZyB9O1xuICAgICAgICAgICAgICAgIGNvbnN0IHJvd3M6IFJvd1tdID0gW107XG5cbiAgICAgICAgICAgICAgICBjb25zdCBub3JtYWxpemUgPSAocmF3OiBzdHJpbmcpOiB7IGxpbmtUZXh0OiBzdHJpbmc7IGxhYmVsPzogc3RyaW5nIH0gPT4ge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBtID0gcmF3Lm1hdGNoKC9cXFtcXFsoW158XFxdXSspKD86XFx8KFteXFxdXSspKT9cXF1cXF0vKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG0pIHJldHVybiB7IGxpbmtUZXh0OiBtWzFdLCBsYWJlbDogbVsyXSB9O1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4geyBsaW5rVGV4dDogcmF3IH07XG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgcyBvZiBuYW1lcykge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBuID0gbm9ybWFsaXplKFN0cmluZyhzKSk7XG4gICAgICAgICAgICAgICAgICAgIGxldCBkZXN0ID0gdGhpcy5hcHAubWV0YWRhdGFDYWNoZS5nZXRGaXJzdExpbmtwYXRoRGVzdChuLmxpbmtUZXh0LCBmaWxlLnBhdGgpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWRlc3QgJiYgIW4ubGlua1RleHQuaW5jbHVkZXMoXCIvXCIpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkZXN0ID0gdGhpcy5hcHAubWV0YWRhdGFDYWNoZS5nZXRGaXJzdExpbmtwYXRoRGVzdChgQ29tcGVuZGl1bS9TcGVsbHMvJHtuLmxpbmtUZXh0fWAsIGZpbGUucGF0aCk7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBjb25zdCBkaXNwbGF5TmFtZSA9IChuLmxhYmVsID8/IG4ubGlua1RleHQpLnNwbGl0KFwiL1wiKS5wb3AoKSEucmVwbGFjZSgvXFwubWQkLywgXCJcIikudHJpbSgpO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBwbHVnaW4gPSBnZXRUb29sa2l0KHRoaXMuYXBwKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZW5hYmxlUHJldmlldyA9ICEhcGx1Z2luPy5zZXR0aW5ncz8uZW5hYmxlU2lkZWJhclByZXZpZXdzO1xuXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG5hbWVIdG1sID0gZGVzdFxuICAgICAgICAgICAgICAgICAgICAgICAgPyBgPGEgY2xhc3M9XCJ2di1saW5rJHtlbmFibGVQcmV2aWV3ID8gXCIgaW50ZXJuYWwtbGlua1wiIDogXCJcIn1cIiBocmVmPVwiJHtkZXN0LnBhdGh9XCIke2VuYWJsZVByZXZpZXcgPyBgIGRhdGEtaHJlZj1cIiR7ZGVzdC5wYXRofVwiYCA6IFwiXCJ9PiR7ZGlzcGxheU5hbWV9PC9hPmBcbiAgICAgICAgICAgICAgICAgICAgICAgIDogZGlzcGxheU5hbWU7XG5cbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZm1TcGVsbCA9IGRlc3QgPyAodGhpcy5hcHAubWV0YWRhdGFDYWNoZS5nZXRGaWxlQ2FjaGUoZGVzdCk/LmZyb250bWF0dGVyIHx8IHt9KSA6IHt9O1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBsdmxSYXcgPSBmbVNwZWxsW1wibGV2ZWxcIl07XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGx2bE51bSA9IE51bWJlcihsdmxSYXcpO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBsZXZlbDogbnVtYmVyIHwgc3RyaW5nID0gTnVtYmVyLmlzRmluaXRlKGx2bE51bSkgPyBsdmxOdW0gOiAobHZsUmF3ID8/IFwiXHUyMDE0XCIpO1xuXG4gICAgICAgICAgICAgICAgICAgIHJvd3MucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgICAgICBuYW1lSHRtbCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldmVsLFxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzdDogU3RyaW5nKGZtU3BlbGxbXCJjYXN0aW5nX3RpbWVcIl0gPz8gXCJcdTIwMTRcIiksXG4gICAgICAgICAgICAgICAgICAgICAgICByYW5nZTogU3RyaW5nKGZtU3BlbGxbXCJSYW5nZVwiXSA/PyBcIlx1MjAxNFwiKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHNhdmU6IChmbVNwZWxsW1wic2F2aW5nX3Rocm93c1wiXSA/PyBcIlwiKS50b1N0cmluZygpLnRyaW0oKSB8fCBcIlx1MjAxNFwiLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICByb3dzLnNvcnQoKGEsIGIpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgYW4gPSB0eXBlb2YgYS5sZXZlbCA9PT0gXCJudW1iZXJcIiA/IGEubGV2ZWwgOiA5OTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgYm4gPSB0eXBlb2YgYi5sZXZlbCA9PT0gXCJudW1iZXJcIiA/IGIubGV2ZWwgOiA5OTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGFuIC0gYm47XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IHIgb2Ygcm93cykge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB0ciA9IHRib2R5LmNyZWF0ZUVsKFwidHJcIik7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG5hbWVUZCA9IHRyLmNyZWF0ZUVsKFwidGRcIik7IG5hbWVUZC5pbm5lckhUTUwgPSByLm5hbWVIdG1sO1xuICAgICAgICAgICAgICAgICAgICB0ci5jcmVhdGVFbChcInRkXCIsIHsgdGV4dDogU3RyaW5nKHIubGV2ZWwpIH0pO1xuICAgICAgICAgICAgICAgICAgICB0ci5jcmVhdGVFbChcInRkXCIsIHsgdGV4dDogci5jYXN0IH0pO1xuICAgICAgICAgICAgICAgICAgICB0ci5jcmVhdGVFbChcInRkXCIsIHsgdGV4dDogci5yYW5nZSB9KTtcbiAgICAgICAgICAgICAgICAgICAgdHIuY3JlYXRlRWwoXCJ0ZFwiLCB7IHRleHQ6IHIuc2F2ZSB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICBjb25zdCBvcGVuU3BlbGxFZGl0b3IgPSAoaW5pdGlhbDogc3RyaW5nW10pID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBjYW5kaWRhdGVzID0gdGhpcy5jb2xsZWN0RnJvbUZvbGRlcnMoW1wiQ29tcGVuZGl1bS9TcGVsbHNcIiwgXCJTcGVsbHNcIl0sIHRydWUpO1xuICAgICAgICAgICAgICAgIG5ldyBFZGl0TGlzdE1vZGFsKHRoaXMuYXBwLCB7XG4gICAgICAgICAgICAgICAgICAgIHRpdGxlOiBgJHtwb3NzZXNzaXZlKG5hbWUpfSBTcGVsbHNgLFxuICAgICAgICAgICAgICAgICAgICBpbml0aWFsLFxuICAgICAgICAgICAgICAgICAgICBjYW5kaWRhdGVzLFxuICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcjogXCJTZWFyY2ggc3BlbGxzXHUyMDI2XCIsXG4gICAgICAgICAgICAgICAgICAgIG9uU2F2ZTogYXN5bmMgKG5ld0xpc3QpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMud3JpdGVGbVN0cmluZ0xpc3QoZmlsZSwgXCJTcGVsbHNcIiwgbmV3TGlzdCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCByZWZyZXNoZWQgPSB0aGlzLmFwcC5tZXRhZGF0YUNhY2hlLmdldEZpbGVDYWNoZShmaWxlKT8uZnJvbnRtYXR0ZXIgfHwge307XG4gICAgICAgICAgICAgICAgICAgICAgICBwYWludFRhYmxlKHRoaXMucmVhZEZtU3RyaW5nTGlzdChyZWZyZXNoZWQsIFtcIlNwZWxsc1wiLCBcInNwZWxsc1wiXSkpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSkub3BlbigpO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgcGFpbnRUYWJsZShnZXQoKSk7XG4gICAgICAgICAgICBlZGl0LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiBvcGVuU3BlbGxFZGl0b3IoZ2V0KCkpKTtcblxuICAgICAgICB9XG4gICAgICAgIGNhcmQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChlKSA9PiB7XG4gICAgICAgICAgICBjb25zdCB0ID0gZS50YXJnZXQgYXMgSFRNTEVsZW1lbnQgfCBudWxsO1xuICAgICAgICAgICAgY29uc3QgYSA9IHQ/LmNsb3Nlc3QoXCJhLnZ2LWxpbmtcIikgYXMgSFRNTEFuY2hvckVsZW1lbnQgfCBudWxsO1xuICAgICAgICAgICAgaWYgKCFhKSByZXR1cm47XG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICBjb25zdCB0YXJnZXQgPSBhLmdldEF0dHJpYnV0ZShcImhyZWZcIik7XG4gICAgICAgICAgICBpZiAoIXRhcmdldCkgcmV0dXJuO1xuICAgICAgICAgICAgdGhpcy5hcHAud29ya3NwYWNlLm9wZW5MaW5rVGV4dCh0YXJnZXQsIGZpbGUucGF0aCwgdHJ1ZSk7IC8vIHNldCB0byBmYWxzZSB0byByZXVzZSBjdXJyZW50IHRhYlxuICAgICAgICB9KTtcbiAgICAgICAgY29uc3QgcGx1Z2luID0gZ2V0VG9vbGtpdCh0aGlzLmFwcCk7XG4gICAgICAgIGNvbnN0IHBhZ2VQcmV2aWV3ID0gKHRoaXMuYXBwIGFzIGFueSkuaW50ZXJuYWxQbHVnaW5zXG4gICAgICAgICAgICA/LmdldFBsdWdpbkJ5SWQ/LihcInBhZ2UtcHJldmlld1wiKVxuICAgICAgICAgICAgPy5pbnN0YW5jZTtcblxuICAgICAgICBpZiAocGFnZVByZXZpZXc/Lm9uTGlua0hvdmVyKSB7XG4gICAgICAgICAgICBjYXJkLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZW1vdmVcIiwgKGV2KSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgdCA9IGV2LnRhcmdldCBhcyBIVE1MRWxlbWVudCB8IG51bGw7XG4gICAgICAgICAgICAgICAgY29uc3QgYSA9IHQ/LmNsb3Nlc3QoXCJhLnZ2LWxpbmtcIikgYXMgSFRNTEFuY2hvckVsZW1lbnQgfCBudWxsO1xuICAgICAgICAgICAgICAgIGlmICghYSkgcmV0dXJuO1xuXG4gICAgICAgICAgICAgICAgY29uc3QgbGlua1RleHQgPSBhLmdldEF0dHJpYnV0ZShcImRhdGEtaHJlZlwiKSB8fCBhLmdldEF0dHJpYnV0ZShcImhyZWZcIik7XG4gICAgICAgICAgICAgICAgaWYgKCFsaW5rVGV4dCkgcmV0dXJuO1xuICAgICAgICAgICAgICAgIGlmIChwbHVnaW4uc2V0dGluZ3MuZW5hYmxlU2lkZWJhclByZXZpZXdzKSB7XG4gICAgICAgICAgICAgICAgICAgIHBhZ2VQcmV2aWV3Lm9uTGlua0hvdmVyKGV2LCBhLCBsaW5rVGV4dCwgZmlsZS5wYXRoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICB9XG5cbiAgICB9XG5cbiAgICBwcml2YXRlIHN0YXJ0TGl2ZVVwZGF0ZXMoKSB7XG4gICAgICAgIC8vIE1ldGFkYXRhIGZyb250bWF0dGVyIGNoYW5nZWQgKGZpcmVzIG9uIHNhdmUpXG4gICAgICAgIHRoaXMucmVnaXN0ZXJFdmVudChcbiAgICAgICAgICAgIHRoaXMuYXBwLm1ldGFkYXRhQ2FjaGUub24oXCJjaGFuZ2VkXCIsIChmaWxlKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKGZpbGUgaW5zdGFuY2VvZiBURmlsZSAmJiB0aGlzLmlzU2VsZWN0ZWRQYXRoKGZpbGUucGF0aCkpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5xdWV1ZVRhYmxlKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmRldGFpbHNPcGVuUGF0aCkgdGhpcy5xdWV1ZURldGFpbCgpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgKTtcblxuICAgICAgICB0aGlzLnJlZ2lzdGVyRXZlbnQoXG4gICAgICAgICAgICB0aGlzLmFwcC52YXVsdC5vbihcIm1vZGlmeVwiLCBhc3luYyAoZmlsZSkgPT4ge1xuICAgICAgICAgICAgICAgIGlmICghKGZpbGUgaW5zdGFuY2VvZiBURmlsZSkpIHJldHVybjtcbiAgICAgICAgICAgICAgICBpZiAoZmlsZS5leHRlbnNpb24gIT09IFwibWRcIikgcmV0dXJuO1xuICAgICAgICAgICAgICAgIGlmIChmaWxlLnBhdGguc3RhcnRzV2l0aCh0aGlzLmdldEFjdGl2ZUZvbGRlclByZWZpeCgpKSkge1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnJlbmRlckFkZFJvdygpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pXG4gICAgICAgICk7XG5cbiAgICAgICAgLy8gRnVsbCBtZXRhZGF0YSByZXNvbHZlICh1c2VmdWwgb24gaW5pdGlhbCBpbmRleCBvciBiaWcgY2hhbmdlcylcbiAgICAgICAgdGhpcy5yZWdpc3RlckV2ZW50KFxuICAgICAgICAgICAgdGhpcy5hcHAubWV0YWRhdGFDYWNoZS5vbihcInJlc29sdmVkXCIsICgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLnF1ZXVlVGFibGUoKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICk7XG5cbiAgICAgICAgLy8gRmlsZSBjb250ZW50IGNoYW5nZWQgKGV4dHJhIHNhZmV0eSlcbiAgICAgICAgdGhpcy5yZWdpc3RlckV2ZW50KFxuICAgICAgICAgICAgdGhpcy5hcHAudmF1bHQub24oXCJtb2RpZnlcIiwgKGZpbGUpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoZmlsZSBpbnN0YW5jZW9mIFRGaWxlICYmIHRoaXMuaXNTZWxlY3RlZFBhdGgoZmlsZS5wYXRoKSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnF1ZXVlVGFibGUoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KVxuICAgICAgICApO1xuXG4gICAgICAgIC8vIE5ldyBjaGFyYWN0ZXIgbm90ZSBjcmVhdGVkIFx1MjE5MiByZXBvcHVsYXRlIGRyb3Bkb3duIGlmIGl0XHUyMDE5cyBpbiB0aGUgYWN0aXZlIGZvbGRlclxuICAgICAgICB0aGlzLnJlZ2lzdGVyRXZlbnQoXG4gICAgICAgICAgICB0aGlzLmFwcC52YXVsdC5vbihcImNyZWF0ZVwiLCBhc3luYyAoZmlsZSkgPT4ge1xuICAgICAgICAgICAgICAgIGlmICghKGZpbGUgaW5zdGFuY2VvZiBURmlsZSkpIHJldHVybjtcbiAgICAgICAgICAgICAgICBpZiAoZmlsZS5leHRlbnNpb24gIT09IFwibWRcIikgcmV0dXJuO1xuICAgICAgICAgICAgICAgIGlmIChmaWxlLnBhdGguc3RhcnRzV2l0aCh0aGlzLmdldEFjdGl2ZUZvbGRlclByZWZpeCgpKSkge1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnJlbmRlckFkZFJvdygpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pXG4gICAgICAgICk7XG5cbiAgICAgICAgLy8gUmVuYW1lL21vdmUgY291bGQgYWRkL3JlbW92ZSBmcm9tIHRoZSBhY3RpdmUgZm9sZGVyIFx1MjE5MiByZWZyZXNoIGRyb3Bkb3duXG4gICAgICAgIHRoaXMucmVnaXN0ZXJFdmVudChcbiAgICAgICAgICAgIHRoaXMuYXBwLnZhdWx0Lm9uKFwicmVuYW1lXCIsIGFzeW5jIChmaWxlKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKCEoZmlsZSBpbnN0YW5jZW9mIFRGaWxlKSkgcmV0dXJuO1xuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucmVuZGVyQWRkUm93KCk7XG4gICAgICAgICAgICB9KVxuICAgICAgICApO1xuXG4gICAgICAgIC8vIERlbGV0aW9ucyBhZmZlY3QgYXZhaWxhYmxlIG9wdGlvbnMgdG9vIFx1MjE5MiByZWZyZXNoIGRyb3Bkb3duXG4gICAgICAgIHRoaXMucmVnaXN0ZXJFdmVudChcbiAgICAgICAgICAgIHRoaXMuYXBwLnZhdWx0Lm9uKFwiZGVsZXRlXCIsIGFzeW5jIChmaWxlKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKCEoZmlsZSBpbnN0YW5jZW9mIFRGaWxlKSkgcmV0dXJuO1xuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucmVuZGVyQWRkUm93KCk7XG4gICAgICAgICAgICB9KVxuICAgICAgICApO1xuXG5cbiAgICAgICAgLy8gSGFuZGxlIHJlbmFtZXM6IGtlZXAgcm9zdGVyIHBhdGhzIGN1cnJlbnRcbiAgICAgICAgdGhpcy5yZWdpc3RlckV2ZW50KFxuICAgICAgICAgICAgdGhpcy5hcHAudmF1bHQub24oXCJyZW5hbWVcIiwgYXN5bmMgKGZpbGUsIG9sZFBhdGgpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoIShmaWxlIGluc3RhbmNlb2YgVEZpbGUpKSByZXR1cm47XG4gICAgICAgICAgICAgICAgY29uc3QgcGx1Z2luID0gZ2V0VG9vbGtpdCh0aGlzLmFwcCk7XG4gICAgICAgICAgICAgICAgY29uc3QgcyA9IHBsdWdpbj8uc2V0dGluZ3M/LmdhbWVwbGF5IHx8IHt9O1xuICAgICAgICAgICAgICAgIGNvbnN0IGxpc3Q6IHN0cmluZ1tdID0gcy5zZWxlY3RlZFBsYXllcnMgfHwgW107XG4gICAgICAgICAgICAgICAgY29uc3QgaWR4ID0gbGlzdC5pbmRleE9mKG9sZFBhdGgpO1xuICAgICAgICAgICAgICAgIGlmIChpZHggIT09IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgIGxpc3RbaWR4XSA9IGZpbGUucGF0aDtcbiAgICAgICAgICAgICAgICAgICAgcGx1Z2luLnNldHRpbmdzLmdhbWVwbGF5LnNlbGVjdGVkUGxheWVycyA9IGxpc3Q7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5xdWV1ZVRhYmxlKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSlcbiAgICAgICAgKTtcblxuICAgICAgICAvLyBJZiBhIHNlbGVjdGVkIG5vdGUgaXMgZGVsZXRlZCwgZHJvcCBpdCBmcm9tIHRoZSByb3N0ZXJcbiAgICAgICAgdGhpcy5yZWdpc3RlckV2ZW50KFxuICAgICAgICAgICAgdGhpcy5hcHAudmF1bHQub24oXCJkZWxldGVcIiwgYXN5bmMgKGZpbGUpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoIShmaWxlIGluc3RhbmNlb2YgVEZpbGUpKSByZXR1cm47XG4gICAgICAgICAgICAgICAgY29uc3QgcGx1Z2luID0gZ2V0VG9vbGtpdCh0aGlzLmFwcCk7XG4gICAgICAgICAgICAgICAgY29uc3QgcyA9IHBsdWdpbj8uc2V0dGluZ3M/LmdhbWVwbGF5IHx8IHt9O1xuICAgICAgICAgICAgICAgIGNvbnN0IGxpc3Q6IHN0cmluZ1tdID0gcy5zZWxlY3RlZFBsYXllcnMgfHwgW107XG4gICAgICAgICAgICAgICAgaWYgKGxpc3QuaW5jbHVkZXMoZmlsZS5wYXRoKSkge1xuICAgICAgICAgICAgICAgICAgICBwbHVnaW4uc2V0dGluZ3MuZ2FtZXBsYXkuc2VsZWN0ZWRQbGF5ZXJzID0gbGlzdC5maWx0ZXIoKHApID0+IHAgIT09IGZpbGUucGF0aCk7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5xdWV1ZVRhYmxlKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSlcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvLyBSZWFkIGEgc3RyaW5nLWFycmF5IGZyb250bWF0dGVyIGZpZWxkIHJlZ2FyZGxlc3Mgb2Yga2V5IGNhc2luZy9zaGFwZVxuICAgIHByaXZhdGUgcmVhZEZtU3RyaW5nTGlzdChmbTogYW55LCBrZXlzOiBzdHJpbmdbXSk6IHN0cmluZ1tdIHtcbiAgICAgICAgZm9yIChjb25zdCBrIG9mIGtleXMpIHtcbiAgICAgICAgICAgIGNvbnN0IHYgPSBmbT8uW2tdO1xuICAgICAgICAgICAgaWYgKCF2KSBjb250aW51ZTtcbiAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KHYpKSByZXR1cm4gdi5tYXAoeCA9PiBTdHJpbmcoeCkpO1xuICAgICAgICAgICAgaWYgKHR5cGVvZiB2ID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICAgICAgLy8gdHJ5IEpTT04gb3IgY29tbWEgbGlzdFxuICAgICAgICAgICAgICAgIHRyeSB7IGNvbnN0IGogPSBKU09OLnBhcnNlKHYpOyBpZiAoQXJyYXkuaXNBcnJheShqKSkgcmV0dXJuIGoubWFwKFN0cmluZyk7IH0gY2F0Y2ggeyB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHYuc3BsaXQoXCIsXCIpLm1hcChzID0+IHMudHJpbSgpKS5maWx0ZXIoQm9vbGVhbik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFtdO1xuICAgIH1cblxuICAgIC8vIFdyaXRlIGFycmF5IGJhY2sgdG8gYSBTSU5HTEUgY2Fub25pY2FsIGtleSAoY3JlYXRlcyBpZiBtaXNzaW5nKVxuICAgIHByaXZhdGUgYXN5bmMgd3JpdGVGbVN0cmluZ0xpc3QoZmlsZTogVEZpbGUsIGtleTogc3RyaW5nLCBsaXN0OiBzdHJpbmdbXSkge1xuICAgICAgICBhd2FpdCB0aGlzLmFwcC5maWxlTWFuYWdlci5wcm9jZXNzRnJvbnRNYXR0ZXIoZmlsZSwgKGZtKSA9PiB7XG4gICAgICAgICAgICAoZm0gYXMgYW55KVtrZXldID0gbGlzdDtcbiAgICAgICAgfSk7XG4gICAgfVxuXG5cbiAgICBhc3luYyBvbk9wZW4oKSB7XG4gICAgICAgIGNvbnN0IGNvbnQgPSB0aGlzLmNvbnRhaW5lckVsLmNoaWxkcmVuWzFdIGFzIEhUTUxEaXZFbGVtZW50O1xuICAgICAgICBjb250LmVtcHR5KCk7XG5cbiAgICAgICAgLy8gT25lIGJpZyBjb2xsYXBzaWJsZSB3cmFwcGVyXG4gICAgICAgIGNvbnN0IHBhcnR5ID0gY29udC5jcmVhdGVFbChcImRldGFpbHNcIiwgeyBhdHRyOiB7IG9wZW46IFwidHJ1ZVwiIH0gfSk7XG4gICAgICAgIHBhcnR5LmFkZENsYXNzKFwidnYtZ3Atcm9vdFwiKTtcblxuICAgICAgICBjb25zdCBzdW1tYXJ5ID0gcGFydHkuY3JlYXRlRWwoXCJzdW1tYXJ5XCIsIHsgdGV4dDogXCJQYXJ0eSBPdmVydmlld1wiIH0pO1xuICAgICAgICBzdW1tYXJ5LmFkZENsYXNzKFwidnYtZ3Atc3VtbWFyeVwiKTtcblxuICAgICAgICBjb25zdCBkZXNjID0gcGFydHkuY3JlYXRlRGl2KHsgY2xzOiBcInZ2LWdwLWRlc2NcIiB9KTtcbiAgICAgICAgZGVzYy5zZXRUZXh0KFwiQWRkIHBsYXllcnMgdG8gdGhlIGxpc3QgYmVsb3cgdG8gc2VlIHRoZWlyIGdlbmVyYWwgc3RhdHMuIENsaWNrIGEgbmFtZSBmb3IgZXhwYW5kZWQgZGV0YWlscy5cIik7XG5cbiAgICAgICAgLy8gRXZlcnl0aGluZyBlbHNlIGxpdmVzIGluc2lkZSB0aGlzIGJvZHlcbiAgICAgICAgY29uc3QgYm9keSA9IHBhcnR5LmNyZWF0ZURpdih7IGNsczogXCJ2di1ncC1yb290LWJvZHlcIiB9KTtcblxuICAgICAgICAvLyBidWlsZCB0aGUgdXN1YWwgc2VjdGlvbnMsIGJ1dCBpbnNpZGUgYGJvZHlgXG4gICAgICAgIHRoaXMuZm9sZGVyUm93ID0gYm9keS5jcmVhdGVEaXYoeyBjbHM6IFwidnYtZ2FtZXBsYXktZm9sZGVycm93XCIgfSk7XG4gICAgICAgIHRoaXMuYWRkUm93ID0gYm9keS5jcmVhdGVEaXYoeyBjbHM6IFwidnYtZ2FtZXBsYXktYWRkcm93XCIgfSk7XG4gICAgICAgIHRoaXMucGFydHlUYWJsZVdyYXAgPSBib2R5LmNyZWF0ZURpdih7IGNsczogXCJ2di1nYW1lcGxheS10YWJsZXdyYXBcIiB9KTtcbiAgICAgICAgdGhpcy5kZXRhaWxzV3JhcCA9IGJvZHkuY3JlYXRlRGl2KHsgY2xzOiBcInZ2LWdwLWRldGFpbHdyYXBcIiB9KTtcbiAgICAgICAgdGhpcy5kZXRhaWxzV3JhcC5jcmVhdGVEaXYoeyBjbHM6IFwidnYtZ3AtZGV0YWlsLWVtcHR5XCIsIHRleHQ6IFwiQ2xpY2sgYSBuYW1lIHRvIHNlZSBkZXRhaWxzXHUyMDI2XCIgfSk7XG5cbiAgICAgICAgLy8gcmVuZGVyIGV2ZXJ5dGhpbmdcbiAgICAgICAgYXdhaXQgdGhpcy5yZW5kZXJBZGRSb3coKTtcbiAgICAgICAgYXdhaXQgdGhpcy5yZW5kZXJUYWJsZSgpO1xuICAgICAgICB0aGlzLnN0YXJ0TGl2ZVVwZGF0ZXMoKTtcbiAgICAgICAgdGhpcy5yZWdpc3RlckV2ZW50KFxuICAgICAgICAgICAgKHRoaXMuYXBwLndvcmtzcGFjZSBhcyBhbnkpLm9uKCd2djpzaWRlYmFyLXByZXZpZXdzLWNoYW5nZWQnLCBhc3luYyAoZGF0YT86IHsgZW5hYmxlZDogYm9vbGVhbiB9KSA9PiB7XG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5yZW5kZXJUYWJsZSgpO1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLmRldGFpbHNPcGVuUGF0aCkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBmID0gdGhpcy5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKHRoaXMuZGV0YWlsc09wZW5QYXRoKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGYgaW5zdGFuY2VvZiBURmlsZSkgYXdhaXQgdGhpcy5zaG93RGV0YWlscyhmKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KVxuICAgICAgICApO1xuICAgIH1cblxuICAgIGFzeW5jIG9uQ2xvc2UoKSB7IH1cblxuICAgIHByaXZhdGUgYXN5bmMgcmVuZGVyQWRkUm93KCkge1xuICAgICAgICBjb25zdCBwbHVnaW4gPSBnZXRUb29sa2l0KHRoaXMuYXBwKTtcbiAgICAgICAgY29uc3QgcyA9IHBsdWdpbj8uc2V0dGluZ3M/LmdhbWVwbGF5IHx8IHt9O1xuICAgICAgICB0aGlzLmFkZFJvdy5lbXB0eSgpO1xuXG4gICAgICAgIGNvbnN0IHdyYXAgPSB0aGlzLmFkZFJvdy5jcmVhdGVEaXYoeyBjbHM6IFwidnYtZ3AtYWRkd3JhcFwiIH0pO1xuXG4gICAgICAgIGNvbnN0IGNvdW50ID0gKHMuc2VsZWN0ZWRQbGF5ZXJzIHx8IFtdKS5sZW5ndGg7XG4gICAgICAgIGNvbnN0IHRyaWdnZXIgPSB3cmFwLmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHsgY2xzOiBcInZ2LWdwLWNoZWNrZGQtdHJpZ2dlclwiLCB0ZXh0OiBgQWRkIFBsYXllcnNgIH0pO1xuXG4gICAgICAgIGNvbnN0IGNsZWFyQnRuID0gd3JhcC5jcmVhdGVFbChcImJ1dHRvblwiLCB7IGNsczogXCJ2di1ncC1jbGVhcmFsbFwiLCB0ZXh0OiBcIkNsZWFyIEFsbFwiIH0pO1xuICAgICAgICBjbGVhckJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgcGx1Z2luLnNldHRpbmdzLmdhbWVwbGF5LnNlbGVjdGVkUGxheWVycyA9IFtdO1xuICAgICAgICAgICAgYXdhaXQgcGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5yZW5kZXJUYWJsZSgpO1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5yZW5kZXJBZGRSb3coKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgY29uc3QgcGFuZWwgPSB0aGlzLmFkZFJvdy5jcmVhdGVEaXYoeyBjbHM6IFwidnYtZ3AtY2hlY2tkZC1wYW5lbFwiIH0pO1xuXG4gICAgICAgIGNvbnN0IGZvbGRlciA9IHRoaXMuZ2V0QWN0aXZlRm9sZGVyUHJlZml4KCk7XG4gICAgICAgIGNvbnN0IGZpbGVzID0gdGhpcy5hcHAudmF1bHRcbiAgICAgICAgICAgIC5nZXRNYXJrZG93bkZpbGVzKClcbiAgICAgICAgICAgIC5maWx0ZXIoZiA9PiBmLnBhdGguc3RhcnRzV2l0aChmb2xkZXIpKVxuICAgICAgICAgICAgLnNvcnQoKGEsIGIpID0+IGEuYmFzZW5hbWUubG9jYWxlQ29tcGFyZShiLmJhc2VuYW1lKSk7XG5cbiAgICAgICAgY29uc3Qgc2VsZWN0ZWQgPSBuZXcgU2V0PHN0cmluZz4ocy5zZWxlY3RlZFBsYXllcnMgfHwgW10pO1xuXG4gICAgICAgIGNvbnN0IHVwZGF0ZUNvdW50TGFiZWwgPSAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBuID0gc2VsZWN0ZWQuc2l6ZTtcbiAgICAgICAgICAgIHRyaWdnZXIudGV4dENvbnRlbnQgPSBgUGxheWVycyAoJHtufSlgO1xuICAgICAgICB9O1xuXG4gICAgICAgIGZvciAoY29uc3QgZiBvZiBmaWxlcykge1xuICAgICAgICAgICAgY29uc3Qgcm93ID0gcGFuZWwuY3JlYXRlRGl2KHsgY2xzOiBcInZ2LWdwLWNoZWNrZGQtcm93XCIgfSk7XG4gICAgICAgICAgICBjb25zdCBpZCA9IGBncC0ke2YucGF0aC5yZXBsYWNlKC9bXlxcdy1dKy9nLCBcIl9cIil9YDtcbiAgICAgICAgICAgIGNvbnN0IGNiID0gcm93LmNyZWF0ZUVsKFwiaW5wdXRcIiwgeyB0eXBlOiBcImNoZWNrYm94XCIsIGF0dHI6IHsgaWQgfSB9KSBhcyBIVE1MSW5wdXRFbGVtZW50O1xuICAgICAgICAgICAgY2IuY2hlY2tlZCA9IHNlbGVjdGVkLmhhcyhmLnBhdGgpO1xuICAgICAgICAgICAgY29uc3QgbGFiID0gcm93LmNyZWF0ZUVsKFwibGFiZWxcIiwgeyBhdHRyOiB7IGZvcjogaWQgfSB9KTtcbiAgICAgICAgICAgIGxhYi50ZXh0Q29udGVudCA9IGYuYmFzZW5hbWU7XG5cbiAgICAgICAgICAgIGNiLmFkZEV2ZW50TGlzdGVuZXIoXCJjaGFuZ2VcIiwgYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChjYi5jaGVja2VkKSBzZWxlY3RlZC5hZGQoZi5wYXRoKTsgZWxzZSBzZWxlY3RlZC5kZWxldGUoZi5wYXRoKTtcbiAgICAgICAgICAgICAgICBwbHVnaW4uc2V0dGluZ3MuZ2FtZXBsYXkuc2VsZWN0ZWRQbGF5ZXJzID0gQXJyYXkuZnJvbShzZWxlY3RlZCk7XG4gICAgICAgICAgICAgICAgYXdhaXQgcGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgIHVwZGF0ZUNvdW50TGFiZWwoKTtcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnJlbmRlclRhYmxlKCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IG9wZW4gPSAoKSA9PiB7XG4gICAgICAgICAgICBpZiAocGFuZWwuY2xhc3NMaXN0LmNvbnRhaW5zKFwib3BlblwiKSkgcmV0dXJuO1xuICAgICAgICAgICAgcGFuZWwuY2xhc3NMaXN0LmFkZChcIm9wZW5cIik7XG4gICAgICAgICAgICBjb25zdCByZWN0ID0gdHJpZ2dlci5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgICAgICAgIGNvbnN0IGNvbnRhaW5lclJlY3QgPSB0aGlzLmNvbnRhaW5lckVsLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgICAgICAgcGFuZWwuc3R5bGUubGVmdCA9IGAke3JlY3QubGVmdCAtIGNvbnRhaW5lclJlY3QubGVmdH1weGA7XG4gICAgICAgICAgICBwYW5lbC5zdHlsZS50b3AgPSBgJHtyZWN0LmJvdHRvbSAtIGNvbnRhaW5lclJlY3QudG9wICsgNH1weGA7XG5cbiAgICAgICAgICAgIGNvbnN0IG9uRG9jQ2xpY2sgPSAoZXY6IE1vdXNlRXZlbnQpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAocGFuZWwuY29udGFpbnMoZXYudGFyZ2V0IGFzIE5vZGUpIHx8IHRyaWdnZXIuY29udGFpbnMoZXYudGFyZ2V0IGFzIE5vZGUpKSByZXR1cm47XG4gICAgICAgICAgICAgICAgY2xvc2UoKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBjb25zdCBvbkVzYyA9IChldjogS2V5Ym9hcmRFdmVudCkgPT4geyBpZiAoZXYua2V5ID09PSBcIkVzY2FwZVwiKSBjbG9zZSgpOyB9O1xuICAgICAgICAgICAgY29uc3QgY2xvc2UgPSAoKSA9PiB7XG4gICAgICAgICAgICAgICAgcGFuZWwuY2xhc3NMaXN0LnJlbW92ZShcIm9wZW5cIik7XG4gICAgICAgICAgICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCBvbkRvY0NsaWNrLCB0cnVlKTtcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCBvbkVzYywgdHJ1ZSk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgLy8gc3Rhc2ggY2xvc2Ugc28gd2UgY2FuIHJldXNlXG4gICAgICAgICAgICAocGFuZWwgYXMgYW55KS5fY2xvc2UgPSBjbG9zZTtcblxuICAgICAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCBvbkRvY0NsaWNrLCB0cnVlKTtcbiAgICAgICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIG9uRXNjLCB0cnVlKTtcbiAgICAgICAgfTtcblxuICAgICAgICB0cmlnZ2VyLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICAgICAgICBpZiAocGFuZWwuY2xhc3NMaXN0LmNvbnRhaW5zKFwib3BlblwiKSkgKHBhbmVsIGFzIGFueSkuX2Nsb3NlPy4oKTsgZWxzZSBvcGVuKCk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuXG4gICAgLy8gXHUyNTAwXHUyNTAwIFBhcnR5IHRhYmxlIFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFxuICAgIHByaXZhdGUgYXN5bmMgcmVuZGVyVGFibGUoKSB7XG4gICAgICAgIGNvbnN0IHBsdWdpbiA9IGdldFRvb2xraXQodGhpcy5hcHApO1xuICAgICAgICBjb25zdCBzID0gcGx1Z2luPy5zZXR0aW5ncz8uZ2FtZXBsYXkgfHwge307XG4gICAgICAgIHRoaXMucGFydHlUYWJsZVdyYXAhLmVtcHR5KCk7XG5cbiAgICAgICAgY29uc3QgcGF0aHM6IHN0cmluZ1tdID0gcy5zZWxlY3RlZFBsYXllcnMgfHwgW107XG4gICAgICAgIGlmICghcGF0aHMubGVuZ3RoKSB7XG4gICAgICAgICAgICB0aGlzLnBhcnR5VGFibGVXcmFwIS5jcmVhdGVFbChcImRpdlwiLCB7IHRleHQ6IFwiTm8gcGxheWVycyBzZWxlY3RlZC5cIiwgY2xzOiBcInZ2LWdwLWVtcHR5XCIgfSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCByb3dzOiBQbGF5ZXJSb3dbXSA9IFtdO1xuICAgICAgICBmb3IgKGNvbnN0IHAgb2YgcGF0aHMpIHtcbiAgICAgICAgICAgIGNvbnN0IGZpbGUgPSB0aGlzLmFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgocCk7XG4gICAgICAgICAgICBpZiAoIShmaWxlIGluc3RhbmNlb2YgVEZpbGUpKSBjb250aW51ZTtcbiAgICAgICAgICAgIGNvbnN0IGZtID0gdGhpcy5hcHAubWV0YWRhdGFDYWNoZS5nZXRGaWxlQ2FjaGUoZmlsZSk/LmZyb250bWF0dGVyIHx8IHt9O1xuICAgICAgICAgICAgY29uc3QgbmFtZSA9IChmbVtcIk5hbWVcIl0gPz8gZmlsZS5iYXNlbmFtZSkgYXMgc3RyaW5nO1xuXG4gICAgICAgICAgICBjb25zdCB3aXMgPSBOdW1iZXIoZm1bXCJ3aXNkb21cIl0gPz8gMTApO1xuICAgICAgICAgICAgY29uc3Qgd2lzTW9kID0gTWF0aC5mbG9vcigod2lzIC0gMTApIC8gMik7XG4gICAgICAgICAgICBjb25zdCBwcm9mID0gTnVtYmVyKFxuICAgICAgICAgICAgICAgIGZtW1wiUHJvZmljaWVuY3kgYm9udXNcIl0gPz8gZm1bXCJQcm9maWNpZW5jeSBCb251c1wiXSA/PyAwXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgY29uc3QgcmF3U2tpbGxzID0gZm1bXCJza2lsbHNcIl0gPz8gZm1bXCJTa2lsbCBQcm9maWNpZW5jaWVzXCJdO1xuICAgICAgICAgICAgY29uc3Qgc2tpbGxzQXJyOiBzdHJpbmdbXSA9XG4gICAgICAgICAgICAgICAgQXJyYXkuaXNBcnJheShyYXdTa2lsbHMpID8gcmF3U2tpbGxzLm1hcChTdHJpbmcpIDpcbiAgICAgICAgICAgICAgICAgICAgdHlwZW9mIHJhd1NraWxscyA9PT0gXCJzdHJpbmdcIiA/IHJhd1NraWxscy5zcGxpdChcIixcIikubWFwKHMgPT4gcy50cmltKCkpIDpcbiAgICAgICAgICAgICAgICAgICAgICAgIFtdO1xuICAgICAgICAgICAgY29uc3QgaGFzUGVyY2VwdGlvbiA9IHNraWxsc0Fyci5zb21lKHMgPT4gcy50b0xvd2VyQ2FzZSgpID09PSBcInBlcmNlcHRpb25cIik7XG4gICAgICAgICAgICBjb25zdCBwcCA9IDEwICsgd2lzTW9kICsgKGhhc1BlcmNlcHRpb24gPyBwcm9mIDogMCk7XG5cbiAgICAgICAgICAgIGNvbnN0IGFjID0gKGZtW1wiYWNcIl0gPz8gXCJOL0FcIikgKyBcIlwiO1xuICAgICAgICAgICAgY29uc3QgaHBNID0gKGZtW1wiaHBcIl0gPz8gXCJOL0FcIikgKyBcIlwiO1xuICAgICAgICAgICAgY29uc3QgaHBDID0gKGZtW1wiY3VycmVudF9ocFwiXSA/PyBmbVtcImhwXCJdID8/IFwiTi9BXCIpICsgXCJcIjtcbiAgICAgICAgICAgIGNvbnN0IHNwZFJhdyA9IChmbVtcIlNwZWVkXCJdID8/IGZtW1wic3BlZWRcIl0gPz8gXCJcIikgKyBcIlwiO1xuICAgICAgICAgICAgY29uc3Qgc3BkID0gc2FuaXRpemVTcGVlZChzcGRSYXcpO1xuICAgICAgICAgICAgbGV0IGFsblJhdyA9IChmbVtcIkFsaWdubWVudFwiXSA/PyBmbVtcIkFsaWdubm1lbnRcIl0gPz8gXCJcIikgKyBcIlwiO1xuICAgICAgICAgICAgbGV0IGFsbiA9IFwiXHUyMDE0XCI7XG4gICAgICAgICAgICBpZiAoYWxuUmF3KSB7XG4gICAgICAgICAgICAgICAgY29uc3Qga2V5ID0gYWxuUmF3LnRvTG93ZXJDYXNlKCkudHJpbSgpO1xuICAgICAgICAgICAgICAgIGFsbiA9IEFMSUdOX0FCQlJba2V5XSA/PyBhbG5SYXc7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJvd3MucHVzaCh7XG4gICAgICAgICAgICAgICAgZmlsZSwgbmFtZSxcbiAgICAgICAgICAgICAgICBhYzogYWMgfHwgXCJOL0FcIixcbiAgICAgICAgICAgICAgICBocEN1cjogaHBDIHx8IFwiTi9BXCIsXG4gICAgICAgICAgICAgICAgaHBNYXg6IGhwTSB8fCBcIk4vQVwiLFxuICAgICAgICAgICAgICAgIHNwZWVkOiBzcGQgfHwgXCJOL0FcIixcbiAgICAgICAgICAgICAgICBhbGlnbjogYWxuLFxuICAgICAgICAgICAgICAgIHBwXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJvd3Muc29ydCgoYSwgYikgPT4gYS5uYW1lLmxvY2FsZUNvbXBhcmUoYi5uYW1lKSk7XG5cbiAgICAgICAgY29uc3QgdGFibGUgPSB0aGlzLnBhcnR5VGFibGVXcmFwIS5jcmVhdGVFbChcInRhYmxlXCIsIHsgY2xzOiBcInZ2LWdwLXRhYmxlXCIgfSk7XG4gICAgICAgIGNvbnN0IGNnID0gdGFibGUuY3JlYXRlRWwoXCJjb2xncm91cFwiKTtcbiAgICAgICAgW1xuICAgICAgICAgICAgW1wibmFtZVwiLCBcIlwiXSwgICAgICAgIC8vIGF1dG8gXHUyMTkyIGFic29yYnMgbGVmdG92ZXIgc3BhY2VcbiAgICAgICAgICAgIFtcInBwXCIsIFwicHBcIl0sXG4gICAgICAgICAgICBbXCJhY1wiLCBcImFjXCJdLFxuICAgICAgICAgICAgW1wiaHBcIiwgXCJocFwiXSxcbiAgICAgICAgICAgIFtcInNwZFwiLCBcInNwZFwiXSxcbiAgICAgICAgICAgIFtcImFsblwiLCBcImFsblwiXSxcbiAgICAgICAgICAgIFtcInJtXCIsIFwicm1cIl0sICAgICAgICAvLyB0aGUgdGlueSBcdTAwRDcgY29sdW1uXG4gICAgICAgIF0uZm9yRWFjaCgoW2Nsc10pID0+IGNnLmNyZWF0ZUVsKFwiY29sXCIsIHsgY2xzOiBgdnYtY29sLSR7Y2xzfWAgfSkpO1xuICAgICAgICBjb25zdCB0aGVhZCA9IHRhYmxlLmNyZWF0ZUVsKFwidGhlYWRcIik7XG4gICAgICAgIGNvbnN0IHRySCA9IHRoZWFkLmNyZWF0ZUVsKFwidHJcIik7XG4gICAgICAgIFtcIk5hbWVcIiwgXCJQUFwiLCBcIkFDXCIsIFwiSFBcIiwgXCJTcGRcIiwgXCJBbGlnblwiXS5mb3JFYWNoKGggPT4ge1xuICAgICAgICAgICAgdHJILmNyZWF0ZUVsKFwidGhcIiwgeyB0ZXh0OiBoIH0pO1xuICAgICAgICB9KTtcblxuICAgICAgICBjb25zdCB0Ym9keSA9IHRhYmxlLmNyZWF0ZUVsKFwidGJvZHlcIik7XG4gICAgICAgIGZvciAoY29uc3QgciBvZiByb3dzKSB7XG4gICAgICAgICAgICBjb25zdCB0ciA9IHRib2R5LmNyZWF0ZUVsKFwidHJcIik7XG5cbiAgICAgICAgICAgIC8vIG5hbWVcbiAgICAgICAgICAgIGNvbnN0IG5hbWVUZCA9IHRyLmNyZWF0ZUVsKFwidGRcIik7XG4gICAgICAgICAgICBjb25zdCBhID0gbmFtZVRkLmNyZWF0ZUVsKFwiYVwiLCB7IHRleHQ6IHIubmFtZSwgaHJlZjogci5maWxlLnBhdGggfSk7XG4gICAgICAgICAgICBhLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBhc3luYyAoZSkgPT4ge1xuICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICAvLyBDbWQvQ3RybC1jbGljayBzdGlsbCBvcGVucyB0aGUgbm90ZVxuICAgICAgICAgICAgICAgIGlmIChlLm1ldGFLZXkgfHwgZS5jdHJsS2V5KSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYXBwLndvcmtzcGFjZS5vcGVuTGlua1RleHQoci5maWxlLnBhdGgsIFwiXCIsIGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnNob3dEZXRhaWxzKHIuZmlsZSk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgLy8gcmlnaHQtY2xpY2s6IG9wZW4gbm90ZSBpbiBuZXcgdGFiXG4gICAgICAgICAgICBhLmFkZEV2ZW50TGlzdGVuZXIoXCJjb250ZXh0bWVudVwiLCAoZSkgPT4ge1xuICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICB0aGlzLmFwcC53b3Jrc3BhY2Uub3BlbkxpbmtUZXh0KHIuZmlsZS5wYXRoLCBcIlwiLCB0cnVlKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgY29uc3QgZW5hYmxlUHJldmlldyA9ICEhZ2V0VG9vbGtpdCh0aGlzLmFwcCk/LnNldHRpbmdzPy5lbmFibGVTaWRlYmFyUHJldmlld3M7XG4gICAgICAgICAgICBhLmNsYXNzTGlzdC5hZGQoXCJ2di1saW5rXCIpO1xuICAgICAgICAgICAgaWYgKGVuYWJsZVByZXZpZXcpIHtcbiAgICAgICAgICAgICAgICBhLmNsYXNzTGlzdC5hZGQoXCJpbnRlcm5hbC1saW5rXCIpO1xuICAgICAgICAgICAgICAgIGEuc2V0QXR0cihcImRhdGEtaHJlZlwiLCByLmZpbGUucGF0aCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIHBwXG4gICAgICAgICAgICB0ci5jcmVhdGVFbChcInRkXCIsIHsgdGV4dDogU3RyaW5nKHIucHApLCBhdHRyOiB7IHN0eWxlOiBcInRleHQtYWxpZ246Y2VudGVyOyB3aGl0ZS1zcGFjZTpub3dyYXA7XCIgfSB9KTtcblxuICAgICAgICAgICAgLy8gYWNcbiAgICAgICAgICAgIHRyLmNyZWF0ZUVsKFwidGRcIiwgeyB0ZXh0OiByLmFjLCBhdHRyOiB7IHN0eWxlOiBcInRleHQtYWxpZ246Y2VudGVyOyB3aGl0ZS1zcGFjZTpub3dyYXA7XCIgfSB9KTtcblxuICAgICAgICAgICAgLy8gSFAgY2VsbCAoZWRpdGFibGUgQ1VSIC8gc3RhdGljIE1BWClcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBjb25zdCB0ZCA9IHRyLmNyZWF0ZUVsKFwidGRcIik7XG4gICAgICAgICAgICAgICAgY29uc3Qgd3JhcCA9IHRkLmNyZWF0ZURpdih7IGNsczogXCJ2di1ncC1ocHdyYXBcIiwgYXR0cjogeyB0aXRsZTogXCJDbGljayB0byBlZGl0IGN1cnJlbnQgSFBcIiB9IH0pO1xuXG4gICAgICAgICAgICAgICAgLy8gY3VycmVudCBIUCBpbnB1dFxuICAgICAgICAgICAgICAgIGNvbnN0IGN1ciA9IHdyYXAuY3JlYXRlRWwoXCJpbnB1dFwiLCB7IHR5cGU6IFwidGV4dFwiLCBjbHM6IFwidnYtZ3AtaHBjdXJcIiB9KSBhcyBIVE1MSW5wdXRFbGVtZW50O1xuICAgICAgICAgICAgICAgIGN1ci52YWx1ZSA9IFN0cmluZyhyLmhwQ3VyID8/IFwiXCIpO1xuICAgICAgICAgICAgICAgIGN1ci5pbnB1dE1vZGUgPSBcIm51bWVyaWNcIjtcbiAgICAgICAgICAgICAgICBjdXIucGF0dGVybiA9IFwiXFxcXGQqXCI7XG5cbiAgICAgICAgICAgICAgICAvLyBzZXBhcmF0b3IgYW5kIG1heFxuICAgICAgICAgICAgICAgIHdyYXAuY3JlYXRlU3Bhbih7IHRleHQ6IFwiL1wiLCBjbHM6IFwidnYtZ3AtaHBzZXBcIiB9KTtcbiAgICAgICAgICAgICAgICB3cmFwLmNyZWF0ZVNwYW4oeyB0ZXh0OiBTdHJpbmcoci5ocE1heCA/PyBcIk4vQVwiKSwgY2xzOiBcInZ2LWdwLWhwbWF4XCIgfSk7XG5cbiAgICAgICAgICAgICAgICBjb25zdCBjb21taXQgPSBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGNsZWFuZWQgPSBjdXIudmFsdWUudHJpbSgpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIS9eXFxkKyQvLnRlc3QoY2xlYW5lZCkpIHsgbmV3IE5vdGljZShcIkhQIG11c3QgYmUgYSBudW1iZXJcIik7IGN1ci52YWx1ZSA9IFN0cmluZyhyLmhwQ3VyID8/IFwiXCIpOyByZXR1cm47IH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKGNsZWFuZWQgPT09IFN0cmluZyhyLmhwQ3VyID8/IFwiXCIpKSByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnNhdmVGcm9udG1hdHRlck51bWJlcihyLmZpbGUsIFwiY3VycmVudF9ocFwiLCBOdW1iZXIoY2xlYW5lZCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgci5ocEN1ciA9IGNsZWFuZWQ7XG4gICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBuZXcgTm90aWNlKFwiRmFpbGVkIHRvIHVwZGF0ZSBIUFwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1ci52YWx1ZSA9IFN0cmluZyhyLmhwQ3VyID8/IFwiXCIpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgIGN1ci5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCAoZXYpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGV2LmtleSA9PT0gXCJFbnRlclwiKSB7IGV2LnByZXZlbnREZWZhdWx0KCk7IChldi50YXJnZXQgYXMgSFRNTElucHV0RWxlbWVudCkuYmx1cigpOyB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChldi5rZXkgPT09IFwiRXNjYXBlXCIpIHsgZXYucHJldmVudERlZmF1bHQoKTsgY3VyLnZhbHVlID0gU3RyaW5nKHIuaHBDdXIgPz8gXCJcIik7IGN1ci5ibHVyKCk7IH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBjdXIuYWRkRXZlbnRMaXN0ZW5lcihcImJsdXJcIiwgY29tbWl0KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gc3BlZWQgLyBhbGlnbiAvIGxhbmdcbiAgICAgICAgICAgIHRyLmNyZWF0ZUVsKFwidGRcIiwgeyB0ZXh0OiByLnNwZWVkLCBhdHRyOiB7IHN0eWxlOiBcInRleHQtYWxpZ246Y2VudGVyOyB3aGl0ZS1zcGFjZTpub3dyYXA7XCIgfSB9KTtcbiAgICAgICAgICAgIHRyLmNyZWF0ZUVsKFwidGRcIiwgeyB0ZXh0OiByLmFsaWduLCBhdHRyOiB7IHN0eWxlOiBcInRleHQtYWxpZ246Y2VudGVyOyB3aGl0ZS1zcGFjZTpub3dyYXA7XCIgfSB9KTtcblxuICAgICAgICAgICAgY29uc3Qgcm1UZCA9IHRyLmNyZWF0ZUVsKFwidGRcIiwgeyBjbHM6IFwidnYtZ3Atcm1jZWxsXCIgfSk7XG5cbiAgICAgICAgICAgIGNvbnN0IHJtQnRuID0gcm1UZC5jcmVhdGVFbChcImJ1dHRvblwiLCB7IHRleHQ6IFwieFwiLCBjbHM6IFwidnYtZ3Atcm0tYnRuXCIgfSk7XG4gICAgICAgICAgICBybUJ0bi5zZXRBdHRyKFwidGl0bGVcIiwgXCJSZW1vdmUgZnJvbSByb3N0ZXJcIik7XG5cbiAgICAgICAgICAgIHJtQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBhc3luYyAoZSkgPT4ge1xuICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcblxuICAgICAgICAgICAgICAgIGNvbnN0IHBsdWdpbiA9IGdldFRvb2xraXQodGhpcy5hcHApO1xuICAgICAgICAgICAgICAgIGNvbnN0IHMgPSBwbHVnaW4/LnNldHRpbmdzPy5nYW1lcGxheSB8fCB7fTtcbiAgICAgICAgICAgICAgICBjb25zdCBsaXN0OiBzdHJpbmdbXSA9IHMuc2VsZWN0ZWRQbGF5ZXJzIHx8IFtdO1xuICAgICAgICAgICAgICAgIGNvbnN0IGlkeCA9IGxpc3QuaW5kZXhPZihyLmZpbGUucGF0aCk7XG5cbiAgICAgICAgICAgICAgICBpZiAoaWR4ICE9PSAtMSkge1xuICAgICAgICAgICAgICAgICAgICBsaXN0LnNwbGljZShpZHgsIDEpO1xuICAgICAgICAgICAgICAgICAgICBwbHVnaW4uc2V0dGluZ3MuZ2FtZXBsYXkuc2VsZWN0ZWRQbGF5ZXJzID0gbGlzdDtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgcGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuXG4gICAgICAgICAgICAgICAgICAgIC8vIElmIHRoZSBkcm9wZG93biBpcyBvcGVuLCBjbG9zZSBpdCB0byBjbGVhciBpdHMgZG9jdW1lbnQgbGlzdGVuZXJzXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG9wZW5QYW5lbCA9IHRoaXMuY29udGFpbmVyRWwucXVlcnlTZWxlY3RvcignLnZ2LWdwLWNoZWNrZGQtcGFuZWwub3BlbicpIGFzIGFueTtcbiAgICAgICAgICAgICAgICAgICAgb3BlblBhbmVsPy5fY2xvc2U/LigpO1xuXG4gICAgICAgICAgICAgICAgICAgIC8vIFJlcGFpbnQgYm90aCB2aWV3cyBzbyB0aGUgY2hlY2tib3ggc3RhdGUgKyBjb3VudCBsYWJlbCB1cGRhdGVcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5yZW5kZXJUYWJsZSgpO1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnJlbmRlckFkZFJvdygpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcGFnZVByZXZpZXcgPSAodGhpcy5hcHAgYXMgYW55KS5pbnRlcm5hbFBsdWdpbnNcbiAgICAgICAgICAgID8uZ2V0UGx1Z2luQnlJZD8uKFwicGFnZS1wcmV2aWV3XCIpXG4gICAgICAgICAgICA/Lmluc3RhbmNlO1xuXG4gICAgICAgIGNvbnN0IGVuYWJsZVByZXZpZXcgPSAhIWdldFRvb2xraXQodGhpcy5hcHApPy5zZXR0aW5ncz8uZW5hYmxlU2lkZWJhclByZXZpZXdzO1xuXG4gICAgICAgIGlmICh0aGlzLnBhcnR5VGFibGVXcmFwICYmICh0aGlzLnBhcnR5VGFibGVXcmFwIGFzIGFueSkuX3Z2SG92ZXJXaXJlZCAmJiAhZW5hYmxlUHJldmlldykge1xuICAgICAgICAgICAgY29uc3QgcHJldiA9ICh0aGlzLnBhcnR5VGFibGVXcmFwIGFzIGFueSkuX3Z2SG92ZXJIYW5kbGVyIGFzICgoZXY6IE1vdXNlRXZlbnQpID0+IHZvaWQpIHwgdW5kZWZpbmVkO1xuICAgICAgICAgICAgaWYgKHByZXYpIHRoaXMucGFydHlUYWJsZVdyYXAucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgcHJldik7XG4gICAgICAgICAgICBkZWxldGUgKHRoaXMucGFydHlUYWJsZVdyYXAgYXMgYW55KS5fdnZIb3ZlcldpcmVkO1xuICAgICAgICAgICAgZGVsZXRlICh0aGlzLnBhcnR5VGFibGVXcmFwIGFzIGFueSkuX3Z2SG92ZXJIYW5kbGVyO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHBhZ2VQcmV2aWV3Py5vbkxpbmtIb3ZlciAmJiBlbmFibGVQcmV2aWV3ICYmIHRoaXMucGFydHlUYWJsZVdyYXAgJiYgISh0aGlzLnBhcnR5VGFibGVXcmFwIGFzIGFueSkuX3Z2SG92ZXJXaXJlZCkge1xuICAgICAgICAgICAgKHRoaXMucGFydHlUYWJsZVdyYXAgYXMgYW55KS5fdnZIb3ZlcldpcmVkID0gdHJ1ZTtcbiAgICAgICAgICAgIGNvbnN0IGhhbmRsZXIgPSAoZXY6IE1vdXNlRXZlbnQpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCB0ID0gZXYudGFyZ2V0IGFzIEhUTUxFbGVtZW50IHwgbnVsbDtcbiAgICAgICAgICAgICAgICBjb25zdCBhID0gdD8uY2xvc2VzdChcImEuaW50ZXJuYWwtbGlua1wiKSBhcyBIVE1MQW5jaG9yRWxlbWVudCB8IG51bGw7XG4gICAgICAgICAgICAgICAgaWYgKCFhKSByZXR1cm47XG4gICAgICAgICAgICAgICAgY29uc3QgbGlua1RleHQgPSBhLmdldEF0dHJpYnV0ZShcImRhdGEtaHJlZlwiKSB8fCBhLmdldEF0dHJpYnV0ZShcImhyZWZcIik7XG4gICAgICAgICAgICAgICAgaWYgKCFsaW5rVGV4dCkgcmV0dXJuO1xuICAgICAgICAgICAgICAgIHBhZ2VQcmV2aWV3Lm9uTGlua0hvdmVyKGV2LCBhLCBsaW5rVGV4dCwgYS5nZXRBdHRyaWJ1dGUoXCJocmVmXCIpIHx8IFwiXCIpO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgdGhpcy5wYXJ0eVRhYmxlV3JhcC5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vtb3ZlXCIsIGhhbmRsZXIpO1xuICAgICAgICAgICAgKHRoaXMucGFydHlUYWJsZVdyYXAgYXMgYW55KS5fdnZIb3ZlcldpcmVkID0gdHJ1ZTtcbiAgICAgICAgICAgICh0aGlzLnBhcnR5VGFibGVXcmFwIGFzIGFueSkuX3Z2SG92ZXJIYW5kbGVyID0gaGFuZGxlcjtcblxuICAgICAgICB9IFxuICAgIH1cbn1cbiJdLAogICJtYXBwaW5ncyI6ICI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxJQUFBQSxvQkFZTzs7O0FDWlAsSUFBQUMsbUJBaUJPOzs7QUNoQlAsSUFBQUMsbUJBQW1FOzs7QUN1QjFELElBQU0scUJBQWdDO0FBQUEsRUFDM0M7QUFBQSxJQUNFLElBQUk7QUFBQSxJQUNKLE9BQU87QUFBQSxJQUNQLE1BQU07QUFBQSxJQUNOLFFBQVE7QUFBQSxJQUNSLFdBQVc7QUFBQSxFQUNiO0FB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QUFNLGFBQXNCO0FBQUEsRUFDakM7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUNGO0FBRU8sSUFBTSxlQUF3QjtBQUFBLEVBQ25DO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUNGO0FBRU8sSUFBTSxZQUFxQjtBQUFBLEVBQ2hDO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQ0Y7QUFFTyxJQUFNLGdCQUF5QjtBQUFBLEVBQ3BDO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUNGO0FBRU8sSUFBTSxhQUFzQjtBQUFBLEVBQ2pDO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUFBLEVBQ0E7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QUFBQTtBQUVBLElBQUFDLG1CQUFtQzs7O0FDQ25DLElBQU1DLG1CQUEwQztBQUFBO0FBQUEsRUFFOUMsS0FBSztBQUFBLEVBQ0wsSUFBSztBQUFBLEVBQ0wsS0FBSztBQUFBO0FBQUEsRUFHTCxLQUFNO0FBQUEsRUFDTixNQUFNO0FBQUEsRUFDTixNQUFNO0FBQUEsRUFDTixPQUFPO0FBQUEsRUFDUCxLQUFNO0FBQUEsRUFDTixLQUFNO0FBQUEsRUFDTixPQUFNO0FBQUEsRUFDTixLQUFNO0FBQUE7QUFBQSxFQUdOLEtBQUs7QUFBQSxFQUNMLEtBQUs7QUFBQSxFQUNMLEtBQUs7QUFBQSxFQUNMLEtBQUs7QUFBQSxFQUNMLE1BQUs7QUFBQSxFQUNMLEtBQUs7QUFBQSxFQUNMLE1BQUs7QUFBQTtBQUFBLEVBR0wsS0FBVTtBQUFBLEVBQ1YsSUFBVTtBQUFBLEVBQ1YsV0FBVTtBQUFBLEVBQ1YsS0FBVTtBQUFBLEVBQ1YsTUFBVTtBQUFBLEVBQ1YsS0FBVTtBQUFBLEVBQ1YsS0FBVTtBQUFBLEVBQ1YsT0FBVTtBQUFBLEVBQ1YsUUFBVTtBQUFBLEVBQ1YsS0FBVTtBQUFBLEVBQ1YsTUFBVTtBQUFBLEVBQ1YsS0FBVTtBQUFBLEVBQ1YsT0FBVTtBQUFBLEVBQ1YsT0FBVTtBQUFBLEVBQ1YsYUFBWTtBQUFBLEVBQ1osYUFBWTtBQUFBLEVBQ1osS0FBVTtBQUFBLEVBQ1YsTUFBVTtBQUFBLEVBQ1YsTUFBVTtBQUFBLEVBQ1YsS0FBVTtBQUFBLEVBQ1YsTUFBVTtBQUFBLEVBQ1YsT0FBVTtBQUFBLEVBQ1YsTUFBVTtBQUFBLEVBQ1YsS0FBVTtBQUFBLEVBQ1YsUUFBVTtBQUFBLEVBQ1YsS0FBVTtBQUFBLEVBQ1YsTUFBVTtBQUFBLEVBQ1YsS0FBVTtBQUFBLEVBQ1YsT0FBVTtBQUFBLEVBQ1YsS0FBVTtBQUFBLEVBQ1YsTUFBVTtBQUFBLEVBQ1YsUUFBVTtBQUFBLEVBQ1YsSUFBVTtBQUFBLEVBQ1YsS0FBVTtBQUFBLEVBQ1YsUUFBVTtBQUFBLEVBQ1YsT0FBVTtBQUFBLEVBQ1YsS0FBVTtBQUFBLEVBQ1Ys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QUFFTyxJQUFNQyxpQkFBdUM7QUFBQSxFQUNsRCxJQUFLO0FBQUEsRUFDTCxJQUFLO0FBQUEsRUFDTCxHQUFLO0FBQUEsRUFDTCxXQUFXO0FBQUEsRUFDWCxVQUFVO0FBQUEsRUFDVixJQUFLO0FBQUEsRUFDTCxLQUFLO0FBQUEsRUFDTCxJQUFLO0FBQUEsRUFDTCxHQUFLO0FBQUEsRUFDTCxJQUFLO0FBQUEsRUFDTCxJQUFLO0FBQUEsRUFDTCxhQUFhO0FBQUEsRUFDYixLQUFLO0FBQUEsRUFDTCxJQUFLO0FBQUEsRUFDTCxHQUFLO0FBQUEsRUFDTCxJQUFLO0FBQUEsRUFDTCxLQUFLO0FBQUEsRUFDTCxLQUFLO0FBQUEsRUFDTCxHQUFLO0FBQUEsRUFDTCxHQUFLO0FBQUEsRUFDTCxJQUFLO0FBQUEsRUFDTCxJQUFLO0FBQUEsRUFDTCxHQUFLO0FBQUEsRUFDTCxJQUFLO0FBQUEsRUFDTCxLQUFLO0FBQUEsRUFDTCxLQUFLO0FBQUEsRUFDTCxHQUFLO0FBQUEsRUFDTCxLQUFLO0FBQUEsRUFDTCxJQUFLO0FBQUEsRUFDTCxLQUFLO0FBQUEsRUFDTCxJQUFLO0FBQ1A7QUFHQSxJQUFNQyxpQkFBdUM7QUFBQTtBQUFBLEVBRTNDLEtBQU87QUFBQSxFQUNQLEtBQU87QUFBQSxFQUNQLEtBQU87QUFBQSxFQUNQLEtBQU87QUFBQSxFQUNQLE1BQU87QUFBQSxFQUNQLE1BQU87QUFBQSxFQUNQLE1BQU87QUFBQSxFQUNQLE9BQU87QUFBQTtBQUFBLEVBRVAsTUFBTztBQUFBO0FBQUEsRUFHUCxNQUFPO0FBQUEsRUFDUCxNQUFPO0FBQUEsRUFDUCxNQUFPO0FBQUEsRUFDUCxPQUFPO0FBQUEsRUFDUCxNQUFPO0FBQUE7QUFBQSxFQUdQLE1BQU07QUFBQTtBQUFBLEVBRU4sS0FBTTtBQUFBLEVBQ04sTUFBTTtBQUFBO0FBQUEsRUFHTixNQUFPO0FBQUEsRUFDUCxLQUFPO0FBQUEsRUFDUCxPQUFPO0FBQUEsRUFDUCxNQUFPO0FBQUE7QUFBQSxFQUdQLEtBQU87QUFBQTtBQUFBLEVBRVAsT0FBTztBQUFBLEVB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LE9BQU8sa0JBQWtCO0FBQ2xDLFlBQU0sY0FBYyxzQkFBc0IsR0FBRztBQUM3QyxXQUFLLEtBQUssa0JBQWtCO0FBQUEsUUFDMUIsS0FBSyxLQUFLO0FBQUEsUUFDVixZQUFZO0FBQUEsUUFDWixZQUFZLHNCQUFzQixXQUFXO0FBQUEsTUFDL0MsQ0FBQyxDQUFDO0FBQUEsSUFDSjtBQUVBLFVBQU0sUUFBUSxJQUFJLElBQUk7QUFDdEIsUUFBSSx5QkFBTyxpQ0FBNEI7QUFBQSxFQUN6QztBQUlGOyIsCiAgIm5hbWVzIjogWyJpbXBvcnRfb2JzaWRpYW4iLCAiaW1wb3J0X29ic2lkaWFuIiwgImltcG9ydF9vYnNpZGlhbiIsICJlbnN1cmVQZXJpb2QiLCAibmFtZSIsICJjYXBpdGFsaXplRmlyc3QiLCAiYm9keSIsICJTSVpFX01BUCIsICJrZXkiLCAidW5pZmllZFNraWxscyIsICJTSVpFX01BUCIsICJ1bmlmaWVkU2tpbGxzIiwgImZlYXR1cmVzQnlMZXZlbCIsICJjb2RlIiwgImNhcCIsICJpbXBvcnRfb2JzaWRpYW4iLCAiaW5zdGFsbGVyX2V4cG9ydHMiLCAiaW1wb3J0RWRpdGlvbkRhdGEiLCAiaW1wb3J0X29ic2lkaWFuIiwgIlNPVVJDRV9OQU1FX01BUCIsICJnZXRGdWxsU291cmNlTmFtZSIsICJyZXBsYWNlNWVUYWdzIiwgImNhcGl0YWxpemVFYWNoIiwgImNhcGl0YWxpemUiLCAicmVuZGVyTWFya2Rvd25UYWJsZSIsICJyZXBsYWNlNWVUYWdzIiwgImZvcm1hdEVudHJ5IiwgInJlcGxhY2U1ZVRhZ3MiLCAicmVuZGVyTWFya2Rvd25UYWJsZSIsICJza2lwcGVkTW9uc3RlcnMiLCAiU0laRV9NQVAiLCAiQUxJR05NRU5UX01BUCIsICJjYXBpdGFsaXplRmlyc3QiLCAiZm9ybWF0U2l6ZUFiYnJldiIsICJmb3JtYXRBbGlnbm1lbnRBYmJyZXYiLCAiUkFXX05QQ1MiLCAiTk9STUFMSVpFRF9OUENfTkFNRVMiLCAibm9ybWFsaXplTmFtZSIsICJjYXRlZ29yaXplQ3JlYXR1cmUiLCAicmVuZGVyQWJpbGl0aWVzVGFibGUiLCAicmVuZGVyRW50cnkiLCAiZW5zdXJlUGVyaW9kIiwgInJlcGxhY2U1ZVRhZ3MiLCAicGFyc2VCZXN0aWFyeUZpbGUiLCAiY2FwaXRhbGl6ZUZpcnN0IiwgInNraXBwZWRNb25zdGVycyIsICJnZXRGdWxsU291cmNlTmFtZSIsICJjYXRlZ29yaXplQ3JlYXR1cmUiLCAiYnVpbGRGTSIsICJCRVNUSUFSWV9NRVRBX0RFRlMiLCAic2VyaWFsaXplRnJvbnRtYXR0ZXIiLCAiRk1fRklFTERTIiwgImZvcm1hdFNpemVBYmJyZXYiLCAiZm9ybWF0QWxpZ25tZW50QWJicmV2IiwgInJlbmRlckFiaWxpdGllc1RhYmxlIiwgIm5hbWUiLCAicmVwbGFjZTVlVGFncyIsICJyZW5kZXJFbnRyeSIsICJjYXBpdGFsaXplRmlyc3QiLCAiREFNQUdFX1RZUEVfTUFQIiwgIlBST1BFUlRZX01BUCIsICJJVEVNX1RZUEVfTUFQIiwgImNvZGVGb2xkZXJNYXAiLCAicGFyc2VJdGVtc0ZpbGUiLCAiYnVpbGRGTSIsICJJVEVNX01FVEFfREVGUyIsICJGTV9GSUVMRFMiLCAic2VyaWFsaXplRnJvbnRtYXR0ZXIiLCAicmVwbGFjZTVlVGFncyIsICJib2R5IiwgImNhcCIsICJBQklMSVRZX0ZVTEwiLCAiU0laRV9NQVAiLCAiRk1fRklFTERTIiwgInVuaWZpZWRBcm1vclByb2ZzIiwgInVuaWZpZWRXZWFwb25Qcm9mcyIsICJyZXBsYWNlNWVUYWdzIiwgIlNBVkVfTkFNRV9NQVAiLCAidW5pZmllZFNhdmVzIiwgImtleSIsICJ1bmlmaWVkU2tpbGxzIiwgInVuaWZpZWRUb29sUHJvZnMiLCAiQUxMX0ZJRUxEX0RFRlMiLCAiZ2V0RnVsbFNvdXJjZU5hbWUiLCAiU0tJTExfT1BUSU9OUyIsICJTQ0hPT0xfTUFQIiwgImZvcm1hdFRpbWUiLCAiZm9ybWF0UmFuZ2UiLCAiZm9ybWF0RHVyYXRpb24iLCAiZm9ybWF0QWxpZ25tZW50QWJicmV2IiwgIklURU1fVFlQRV9NQVAiLCAiUFJPUEVSVFlfTUFQIiwgImJ1aWxkRk0iLCAic2VyaWFsaXplRnJvbnRtYXR0ZXIiLCAiU1BFTExfS0VZUyIsICJTUEVDSUVTX0tFWVMiLCAiSVRFTV9LRVlTIiwgIkJFU1RJQVJZX0tFWVMiLCAiQ0xBU1NfS0VZUyIsICJCQUNLR1JPVU5EX0tFWVMiLCAiRkVBVFNfS0VZUyIsICJTUEVMTF9NRVRBX0RFRlMiLCAiQUxMX0ZJRUxEX0RFRlMiLCAiU1BFQ0lFU19NRVRBX0RFRlMiLCAiSVRFTV9NRVRBX0RFRlMiLCAiQkVTVElBUllfTUVUQV9ERUZTIiwgIkNMQVNTX01FVEFfREVGUyIsICJCQUNLR1JPVU5EX01FVEFfREVGUyIsICJGRUFUU19NRVRBX0RFRlMiLCAiU0NIT09MX01BUCIsICJvcmRpbmFsIiwgImZvcm1hdFJhbmdlIiwgImZvcm1hdFRpbWUiLCAiZm9ybWF0RHVyYXRpb24iLCAiZm9ybWF0Q29tcG9uZW50cyIsICJwYXJzZVNwZWxsc0ZpbGUiLCAiZ2V0RnVsbFNvdXJjZU5hbWUiLCAiYnVpbGRGTSIsICJTUEVMTF9NRVRBX0RFRlMiLCAic2VyaWFsaXplRnJvbnRtYXR0ZXIiLCAiRk1fRklFTERTIiwgImZvcm1hdEVudHJ5IiwgInNsdWciLCAiQkxPQ0tFRF9UUkFJVFMiLCAibGlua0Rpc3BsYXkiLCAibm9ybU5hbWUiLCAiZmluZEVudHJ5QnlOYW1lIiwgInBhcnNlU3BlY2llc0ZpbGUiLCAiYnVpbGRGTSIsICJTUEVDSUVTX01FVEFfREVGUyIsICJzZXJpYWxpemVGcm9udG1hdHRlciIsICJTSVpFX01BUCIsICJGTV9GSUVMRFMiLCAicmVuZGVyTWFya2Rvd25UYWJsZSIsICJyZXBsYWNlNWVUYWdzIiwgImZvcm1hdEVudHJ5IiwgImlzVHlwZWRFbnRyeSIsICJmb3JtYXRGZWF0dXJlTGluayIsICJ0b0hlYWRlckFuY2hvciIsICJPUFRfRkVBVFVSRV9UWVBFX1RPX0ZVTEwiLCAicGFyc2VDbGFzc0ZpbGUiLCAiYnVpbGRGTSIsICJDTEFTU19NRVRBX0RFRlMiLCAic2VyaWFsaXplRnJvbnRtYXR0ZXIiLCAidW5pZmllZFdlYXBvblByb2ZzIiwgInVuaWZpZWRUb29sUHJvZnMiLCAiU0tJTExfT1BUSU9OUyIsICJ1bmlmaWVkU2tpbGxzIiwgImZlYXR1cmVzQnlMZXZlbCIsICJyZXBsYWNlNWVUYWdzIiwgImZvcm1hdEZlYXR1cmVMaW5rIiwgInJlbmRlck1hcmtkb3duVGFibGUiLCAiZm9ybWF0RW50cnkiLCAiT1BUX0ZFQVRVUkVfVFlQRV9UT19GVUxMIiwgInRvSGVhZGVyQW5jaG9yIiwgImlzVHlwZWRFbnRyeSIsICJjb2RlIiwgInBhcnNlQWN0aW9uc0ZpbGUiLCAicmVwbGFjZTVlVGFncyIsICJwYXJzZUNvbmRpdGlvbnNEaXNlYXNlc0ZpbGUiLCAicGFyc2VTZW5zZXNGaWxlIiwgInBhcnNlU2tpbGxzRmlsZSIsICJwYXJzZUZlYXRzRmlsZSIsICJidWlsZEZNIiwgIkZFQVRTX01FVEFfREVGUyIsICJzZXJpYWxpemVGcm9udG1hdHRlciIsICJyZXBsYWNlNWVUYWdzIiwgInBhcnNlQmFja2dyb3VuZHNGaWxlIiwgImJ1aWxkRk0iLCAiQkFDS0dST1VORF9NRVRBX0RFRlMiLCAic2VyaWFsaXplRnJvbnRtYXR0ZXIiLCAiY2FwIiwgImh1bWFuaXplIiwgImZtdEl0ZW0iLCAicmVwbGFjZTVlVGFncyIsICJyZW5kZXJNYXJrZG93blRhYmxlIiwgImltcG9ydF9vYnNpZGlhbiIsICJsaXN0U3BlbGxGaWxlc0Zyb21HaXRIdWIiLCAibGlzdEJlc3RpYXJ5RmlsZXNGcm9tR2l0SHViIiwgIklURU1fSlNPTl9GSUxFUyIsICJsaXN0SXRlbUZpbGVzRnJvbUdpdEh1YiIsICJsaXN0Q2xhc3NGaWxlc0Zyb21HaXRIdWIiLCAiZW5zdXJlRm9sZGVyIiwgImltcG9ydEVkaXRpb25EYXRhIiwgInBhcnNlU3BlbGxzRmlsZSIsICJwYXJzZUJlc3RpYXJ5RmlsZSIsICJwYXJzZUl0ZW1zRmlsZSIsICJwYXJzZVNwZWNpZXNGaWxlIiwgInJlcyIsICJqc29uIiwgIm1kRmlsZXMiLCAicGFyc2VDbGFzc0ZpbGUiLCAicGFyc2VBY3Rpb25zRmlsZSIsICJwYXJzZUNvbmRpdGlvbnNEaXNlYXNlc0ZpbGUiLCAicGFyc2VTZW5zZXNGaWxlIiwgInBhcnNlU2tpbGxzRmlsZSIsICJwYXJzZUZlYXRzRmlsZSIsICJwYXJzZUJhY2tncm91bmRzRmlsZSIsICJpbnN0YWxsZXJfZXhwb3J0cyIsICJwYXRoIiwgImltcG9ydF9vYnNpZGlhbiIsICJpbXBvcnRfb2JzaWRpYW4iLCAicGF0aCIsICJpbXBvcnRfb2JzaWRpYW4iLCAiZ2V0VG9vbGtpdCIsICJwYXRoIiwgInBsdWdpbiIsICJoIiwgInMiLCAiZW5hYmxlUHJldmlldyIsICJwYXRoIiwgImNvbnRlbnQiXQp9Cg==

/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __create = Object.create;
var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __getProtoOf = Object.getPrototypeOf;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toESM = (mod, isNodeMode, target) => (target = mod != null ? __create(__getProtoOf(mod)) : {}, __copyProps(
  // If the importer is in node compatibility mode or this is not an ESM
  // file that has been converted to a CommonJS file using a Babel-
  // compatible transform (i.e. "__esModule" has not been set), then set
  // "default" to the CommonJS "module.exports" for node compatibility.
  isNodeMode || !mod || !mod.__esModule ? __defProp(target, "default", { value: mod, enumerable: true }) : target,
  mod
));
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// src/main.ts
var main_exports = {};
__export(main_exports, {
  InstallingModal: () => InstallingModal2,
  default: () => VVunderloreToolkitPlugin
});
module.exports = __toCommonJS(main_exports);
var import_obsidian9 = require("obsidian");

// src/settings.ts
var import_obsidian7 = require("obsidian");

// src/firstinstallconfirm.ts
var import_obsidian5 = require("obsidian");

// src/editions.ts
var AVAILABLE_EDITIONS = [
  {
    id: "none",
    label: "None",
    repo: "",
    parser: "",
    sourceUrl: ""
  },
  {
    id: "5e-2014",
    label: "D&D 5e (2014)",
    repo: "5etools-mirror-3/5etools-2014-src",
    parser: "5e-2014",
    sourceUrl: "https://raw.githubusercontent.com/5etools-mirror-3/5etools-2014-src/main/data",
    categories: [""]
  },
  {
    id: "5e-2025",
    label: "D&D 5e (2025)",
    repo: "5etools-mirror-3/5etools-src",
    parser: "5e-2025",
    sourceUrl: "https://raw.githubusercontent.com/5etools-mirror-3/5etools-src/main/data"
  }
];

// src/parsers/5e-2014/installer.ts
var installer_exports = {};
__export(installer_exports, {
  importEditionData: () => importEditionData
});
var import_obsidian = require("obsidian");

// src/parsers/5e-2014/helpers/sourceMap.ts
var SOURCE_NAME_MAP = {
  // Core rulebooks
  PHB: "Player's Handbook",
  MM: "Monster Manual",
  DMG: "Dungeon Master's Guide",
  // Official expansions & adventure modules
  CoS: "Curse of Strahd",
  OotA: "Out of the Abyss",
  PotA: "Princes of the Apocalypse",
  HotDQ: "Hoard of the Dragon Queen",
  RoT: "Rise of Tiamat",
  SKT: "Storm King's Thunder",
  TftYP: "Tales from the Yawning Portal",
  ToA: "Tomb of Annihilation",
  // Supplemental guides
  XGE: "Xanathar's Guide to Everything",
  VGM: "Volo's Guide to Monsters",
  TCE: "Tasha's Cauldron of Everything",
  EGW: "Eberron: Rising from the Last War",
  ERLW: "Explorer's Guide to Wildemount",
  MTF: "Monsters of the Multiverse",
  VRGR: "Van Richten's Guide to Ravenloft",
  // Additional sourcebooks
  AAG: "Astral Adventurer\u2019s Guide",
  AI: "Acquisitions Incorporated",
  AitFRAVFT: "Adventures in the Forgotten Realms: A Visual Field Test",
  BMT: "Big Monster Tome",
  DoDk: "Dragon of Darkkeep",
  FTD: "Fizban\u2019s Treasury of Dragons",
  GGR: "Guildmaster\u2019s Guide to Ravnica",
  GHLoE: "Ghosts of the Horizon: Light Over Elensaria",
  IDRotF: "Icewind Dale: Rime of the Frostmaiden",
  LLK: "Lost Laboratory of Kwalish",
  SatO: "Sapphire of Truth",
  SCC: "Strixhaven: Curriculum of Chaos",
  TDCSR: "The Dungeon Coach\u2019s Rulebook",
  JttRC: "Journeys through the Radiant Citadel",
  "AitFR-AVT": "Adventures in the Forgotten Realms: A Verdant Tomb",
  "AitFR-FCD": "Adventures in the Forgotten Realms: From Cyan Depths",
  RMR: "Dungeons and Dragons: Rick and Morty",
  SCAG: "Sword Coast Adventurer's Guide",
  EEPC: "Elemental Evil Player's Companion",
  MOT: "Mythic Odysseys of Theros",
  WBtW: "The Wild Beyond the Witchlight",
  BGDIA: "Baldur's Gate: Descent Into Avernus",
  ToFW: "Turn of Fortune's Wheel",
  CoA: "Chains of Asmodeus",
  CRCotN: "Critical Role: Call of the Netherdeep",
  ToD: "Tyranny of Dragons",
  MPMM: "Mordenkainen Presents: Monsters of the Multiverse",
  LoX: "Light of Xaryxis",
  QftIS: "Quests from the Infinite Staircase",
  WDH: "Waterdeep: Dragon Heist",
  WDMM: "Waterdeep: Dungeon of the Mad Mage",
  PaBTSO: "Phandelver and Below: The Shattered Obelisk",
  CM: "Candlekeep Mysteries",
  GoS: "Ghosts of Saltmarsh",
  DSotDQ: "Dragonlance: Shadow of the Dragon Queen",
  KftGV: "Keys from the Golden Vault",
  SDW: "Essentials Kit: Sleeping Dragon's Wake",
  DoSI: "Dragons of Stormwreck Isle",
  GotSF: "Giants of the Star Forge",
  DIP: "Essentials Kit: Dragon of Icespire Peak",
  SLW: "Essentials Kit: Storm Lord's Wrath",
  IMR: "Infernal Machine Rebuild",
  VEoR: "Vecna: Eve of Ruin",
  PSI: "Plane Shift: Innistrad",
  AATM: "Adventure Atlas: The Mortuary",
  PSZ: "Plane Shift: Zendikar",
  DC: "Essentials Kit: Divine Contention",
  LMoP: "Lost Mine of Phandelver",
  RMBRE: "The Lost Dungeon of Rickedness: Big Rick Energy",
  HftT: "Hunt for the Thessalhydra",
  PSX: "Plane Shift: Ixalan",
  HFStCM: "Heroes' Feast: Saving the Childrens Menu",
  SjA: "Spelljammer Academy",
  LK: "Lightning Keep",
  RtG: "Return to the Glory",
  TTP: "The Tortle Package",
  LR: "Locathah Rising",
  PSA: "Plane Shift: Amonkhet",
  OGA: "One Grung Above",
  "NRH-TLT": "Nerds Restoring Harmony: The Lost Tomb",
  "NRH-AT": "Nerds Restoring Harmony: Adventure Together",
  BGG: "Bigby Presents: Glory of the Giants",
  RoTOS: "The Rise of Tiamat Online Supplement",
  XMtS: "X Marks the Spot",
  "HAT-LMI": "Honor Among Theives: Legendary Magic Items",
  DitLCoT: "Descent into the Lost Caverns of Tsojcanth",
  "AitFR-DN": "Adventures in the Forgotten Realms: Deepest Night",
  "AitFR-THP": "Adventures in the Forgotten Realms: The Hidden Pages",
  BAM: "Boo's Astral Menagerie",
  AZfyT: "A Zib for Your Thougts",
  MCV2DC: "Monstrous Compendium Volume 2: Dragonlance Creatures",
  PSK: "Plane Shift: Kaladesh",
  PSD: "Plane Shift: Dominaria",
  AWM: "Adventure with Muk",
  UATheMysticClass: "Unearthed Arcana: The Mystic Class",
  ALCurseOfStrahd: "Adventurers League: Curse of Strahd",
  ALElementalEvil: "Adventurers League: Elemental Evil",
  ALRageOfDemons: "Adventurers League: Rage of Demons"
};
function getFullSourceName(abbrev, editionId) {
  let name = SOURCE_NAME_MAP[abbrev] ?? abbrev;
  if (abbrev === "PHB") {
    if (editionId?.includes("2014")) name += " (2014)";
    else if (editionId?.includes("2025")) name += " (2025)";
  }
  return name;
}

// src/parsers/5e-2014/helpers/tagReplacer.ts
function replace5eTags(input) {
  let text;
  if (Array.isArray(input)) {
    text = input.join(" ");
  } else if (typeof input === "string") {
    text = input;
  } else {
    text = String(input ?? "");
  }
  return text.replace(
    /\{@(spell|item|creature|race) ([^|}]+)(?:\|[^}]+)?\}/g,
    (_, __, name) => `[[${capitalizeEach(name)}]]`
  ).replace(
    /\{@(condition|status|action|skill) ([^|}]+)(?:\|[^}]+)?\}/g,
    (_, tag, name) => `[[${capitalize(tag)}s#${name}|${capitalizeEach(name)}]]`
  ).replace(
    /\{@classFeature ([^|}]+)\|([^|}]+)(?:\|[^}]+)?\}/g,
    (_, feature, cls) => `[[${cls}#${feature}]]`
  ).replace(/\{@(book|filter) ([^|}]+)(?:\|[^}]+)?\}/g, (_, __, txt) => txt).replace(/\{@note ([^}]+)\}/g, (_, note) => `*${note}*`).replace(/\{@(damage|dice|dc|hit|sense) ([^}]+)\}/g, (_, __, value) => value).replace(/\{@chance ([^|}]+)(?:\|[^}]+)?\}/g, (_, value) => `${value}%`).replace(/\{@quickref ([^|}]+)(?:\|[^|]*\|[^}]*)?\}/g, (_, term) => {
    const known = [
      "difficult terrain",
      "total cover",
      "half cover",
      "three-quarters cover",
      "heavily obscured",
      "lightly obscured"
    ];
    return known.includes(term.toLowerCase()) ? `[[Rules#${capitalizeEach(term)}]]` : term;
  }).replace(/\{\@5etools\s+([^|}]+)\|[^}]+\}/g, "$1").replace(/\{@recharge\s*([^}]+)\}/g, (_, num) => `(recharge: ${num.trim()})`).replace(/\{@(scaledice|scaledamage)[^}]*\|([^|}]+)\}/g, (_, __, value) => value).replace(/\{@d20[^}]*\}/g, "").replace(/\{@[^}]+\}/g, "");
}
function capitalize(str) {
  return str.charAt(0).toUpperCase() + str.slice(1).toLowerCase();
}
function capitalizeEach(str) {
  return str.split(" ").map(capitalize).join(" ");
}

// src/parsers/5e-2014/helpers/markdownTable.ts
function renderMarkdownTable(entry) {
  if (entry.type !== "table" || !Array.isArray(entry.rows)) return "";
  const caption = entry.caption ? `##### ${entry.caption}
` : "";
  const headers = (entry.colLabels ?? []).map((h) => replace5eTags(h.trim()));
  const headerRow = `| ${headers.join(" | ")} |`;
  const dividerRow = `| ${headers.map(() => ":--").join(" | ")} |`;
  const bodyRows = entry.rows.map((row) => {
    const cells = row.map((cell) => {
      if (typeof cell === "string") return replace5eTags(cell);
      if (typeof cell === "object") {
        if (cell.roll?.exact !== void 0) return `${cell.roll.exact}`;
        if (cell.roll?.min !== void 0 && cell.roll?.max !== void 0) {
          return `${cell.roll.min}\u2013${cell.roll.max}`;
        }
        return replace5eTags(JSON.stringify(cell));
      }
      return replace5eTags(String(cell));
    });
    return `| ${cells.join(" | ")} |`;
  });
  return `${caption}${headerRow}
${dividerRow}
${bodyRows.join("\n")}`;
}

// src/parsers/5e-2014/helpers/formatEntry.ts
function formatEntry(entry) {
  if (typeof entry === "string") {
    const cleaned = entry.trim();
    if (!cleaned || cleaned === "}") return "";
    return replace5eTags(cleaned);
  }
  if (entry.type === "entries" && Array.isArray(entry.entries)) {
    const body = entry.entries.map(formatEntry).filter((str) => str.trim().length > 0).join("\n\n");
    return entry.name ? `##### ${entry.name}
${body}` : body;
  }
  if (entry.type === "list" && Array.isArray(entry.items)) {
    return entry.items.map((i) => `- ${replace5eTags(typeof i === "string" ? i : JSON.stringify(i))}`).join("\n");
  }
  if (entry.type === "table" && Array.isArray(entry.rows)) {
    return renderMarkdownTable(entry);
  }
  if (entry.type === "quote" && Array.isArray(entry.entries)) {
    const quote = entry.entries.map(formatEntry).join(" ").trim();
    const author = entry.by ? ` \u2014 ${entry.by}` : "";
    return `*"${quote}${author}"*`;
  }
  if (entry.type === "inset" && Array.isArray(entry.entries)) {
    const inset = entry.entries.map(formatEntry).join("\n").trim();
    return `> ${inset.replace(/\n/g, "\n> ")}`;
  }
  if (entry.type === "refClassFeature" && typeof entry.classFeature === "string") {
    const [name] = entry.classFeature.split("|");
    const anchor = name.replace(/[^\w\s-]/g, "").replace(/\s+/g, "-").toLowerCase();
    return `[[#${anchor}]]`;
  }
  return "";
}

// src/parsers/5e-2014/bestiary.ts
var skippedMonsters = [];
var SIZE_MAP = {
  T: "Tiny",
  S: "Small",
  M: "Medium",
  L: "Large",
  H: "Huge",
  G: "Gargantuan"
};
var ALIGNMENT_MAP = {
  L: "Lawful",
  N: "Neutral",
  C: "Chaotic",
  G: "Good",
  E: "Evil",
  U: "Unaligned"
};
function capitalizeFirst(str) {
  const s = String(str || "");
  return s.charAt(0).toUpperCase() + s.slice(1);
}
function formatSizeAbbrev(abbrev) {
  return SIZE_MAP[abbrev] || abbrev;
}
function formatAlignmentAbbrev(abbrev) {
  return abbrev.trim().split(/\s+/).map((letter) => ALIGNMENT_MAP[letter] || letter).join(" ");
}
var RAW_NPCS = [
  "Abjurer",
  "Acolyte",
  "Apprentice Wizard",
  "Archdruid",
  "Archer",
  "Archmage",
  "Assassin",
  "Bandit",
  "Bandit Captain",
  "Bard",
  "Berserker",
  "Blackguard",
  "Champion",
  "Commoner",
  "Conjurer",
  "Cult Fanatic",
  "Cultist",
  "Diviner",
  "Druid (NPC)",
  "Druid NPC",
  "Enchanter",
  "Evoker",
  "Gladiator",
  "Guard",
  "Illusionist",
  "Knight",
  "Kraken Priest",
  "Mage",
  "Martial Arts Adept",
  "Master Thief",
  "Necromancer",
  "Noble",
  "Priest",
  "Scout",
  "Spy",
  "Swashbuckler",
  "Thug",
  "Transmuter",
  "Tribal Warrior",
  "Veteran",
  "War Priest",
  "Warlock of the Archfey",
  "Warlock of the Fiend",
  "Warlock of the Great Old One",
  "Warlord"
];
var NORMALIZED_NPC_NAMES = new Set(RAW_NPCS.map((n) => normalizeName(n)));
function normalizeName(name) {
  return name.replace(/\s+/g, " ").trim().toLowerCase();
}
function categorizeCreature(monster) {
  const typeValue = monster.type;
  const name = monster.name;
  const t = typeof typeValue === "string" ? typeValue.toLowerCase() : typeValue?.type?.toLowerCase() || String(typeValue).toLowerCase();
  const normalizedName = normalizeName(name);
  if (monster.isNpc || monster.isNamedCreature) return "Story NPCs";
  if (t === "beast") return "Beasts";
  if (t === "humanoid" && NORMALIZED_NPC_NAMES.has(normalizedName)) return "Non-Beasts";
  if (t === "humanoid") return "Monsters";
  return "Monsters";
}
function renderAbilitiesTable(str, dex, con, int, wis, cha) {
  return [
    `| STR | DEX | CON | INT | WIS | CHA |`,
    `| --- | --- | --- | --- | --- | --- |`,
    `| ${str} | ${dex} | ${con} | ${int} | ${wis} | ${cha} |`
  ].join("\n");
}
function renderEntry(entry) {
  const name = entry.name;
  let descriptions = [];
  if (Array.isArray(entry.entries)) {
    descriptions = entry.entries;
  } else if (typeof entry.entries === "string") {
    descriptions = [entry.entries];
  } else if (Array.isArray(entry.desc)) {
    descriptions = entry.desc;
  } else if (typeof entry.desc === "string") {
    descriptions = [entry.desc];
  }
  const raw = descriptions.join(" ");
  const desc = replace5eTags(raw);
  return `***${name}.*** ${desc}`;
}
function parseBestiaryFile(json, editionId) {
  if (!json.monster) return [];
  json._editionId = editionId;
  const validMonsters = json.monster.filter((m) => {
    const acVal = Array.isArray(m.ac) ? m.ac[0]?.ac ?? m.ac[0] : typeof m.ac === "object" ? m.ac?.ac ?? null : m.ac;
    const hpVal = typeof m.hp === "object" ? m.hp?.average ?? m.hp?.hp ?? null : m.hp;
    return acVal != null && hpVal != null && !isNaN(Number(acVal)) && !isNaN(Number(hpVal));
  });
  const allNames = new Set(json.monster.map((m) => m.name));
  const validNames = new Set(validMonsters.map((m) => m.name));
  const missing = [...allNames].filter((name) => !validNames.has(name));
  return validMonsters.map((monster) => {
    const name = monster.name;
    const safeName = name.replace(/\//g, "-");
    const rawSize = monster.size || "M";
    const rawAlignment = Array.isArray(monster.alignment) ? monster.alignment.join(" ") : monster.alignment || "N";
    let rawType = "Unknown";
    if (typeof monster.type === "string") {
      rawType = capitalizeFirst(monster.type);
    } else if (monster.type?.type) {
      const base = capitalizeFirst(monster.type.type);
      const tags = monster.type.tags?.length ? ` (${monster.type.tags.map(capitalizeFirst).join(", ")})` : "";
      rawType = `${base}${tags}`;
    }
    monster._parsedType = rawType;
    const ac = Array.isArray(monster.ac) ? monster.ac[0].ac : monster.ac;
    const hp = monster.hp?.average ?? monster.hp;
    const cr = monster.cr;
    if (!ac && !hp) {
      skippedMonsters.push(monster.name);
      return null;
    }
    const abilities = Array.isArray(monster.ability) ? monster.ability : [monster.str, monster.dex, monster.con, monster.int, monster.wis, monster.cha];
    const [str = 10, dex = 10, con = 10, int = 10, wis = 10, cha = 10] = abilities;
    const speedList = [];
    if (typeof monster.speed === "object") {
      for (const [mode, val] of Object.entries(monster.speed)) {
        if (mode === "canHover") continue;
        if (val && typeof val === "object" && "number" in val) {
          const num = val.number;
          const cond = val.condition ? ` ${val.condition}` : "";
          speedList.push(`${mode} ${num} ft.${cond}`);
        } else {
          speedList.push(`${mode} ${val} ft.`);
        }
      }
    } else {
      speedList.push(`${monster.speed} ft.`);
    }
    const speed = speedList.join(", ");
    let source = getFullSourceName(monster.source, editionId);
    source = source.replace(/:/g, " -");
    const category = categorizeCreature(monster);
    const fm = buildFM(monster, BESTIARY_META_DEFS);
    const yaml = serializeFrontmatter(fm, BESTIARY_META_DEFS);
    const savingThrows = fm[FM_FIELDS.SAVING_THROWS] || [];
    const skills = fm[FM_FIELDS.SKILLS] || [];
    const senses = fm[FM_FIELDS.SENSES] || [];
    const languages = fm[FM_FIELDS.LANGUAGES] || [];
    let body = `# ${name}

${formatSizeAbbrev(rawSize)} ${rawType}, ${formatAlignmentAbbrev(rawAlignment)}

**Armor Class**: ${ac}
**Hit Points**: ${hp}
**Speed**: ${speed}
` + (savingThrows.length ? `**Saving Throws**: ${savingThrows.join(", ")}
` : "") + (skills.length ? `**Skills**: ${skills.join(", ")}
` : "") + (senses.length ? `**Senses**: ${senses.join(", ")}
` : "") + (languages.length ? `**Languages**: ${languages.join(", ")}
` : "") + `**Challenge**: ${cr}

` + renderAbilitiesTable(str, dex, con, int, wis, cha);
    if (monster.trait) body += `

### Traits
${monster.trait.map(renderEntry).join("\n\n")}`;
    if (monster.action) body += `

### Actions
${monster.action.map(renderEntry).join("\n\n")}`;
    if (monster.reaction) body += `

### Reactions
${monster.reaction.map(renderEntry).join("\n\n")}`;
    if (monster.legendary) body += `

### Legendary Actions
${monster.legendary.map(renderEntry).join("\n\n")}`;
    const content = `---
${yaml}
---

${body}`;
    return {
      path: `${category}/${safeName}.md`,
      content
    };
  });
}

// src/parsers/5e-2014/items.ts
function capitalizeFirst2(input) {
  if (typeof input !== "string" || input.length === 0) return "";
  const s = input.trim();
  return s.charAt(0).toUpperCase() + s.slice(1).toLowerCase();
}
var DAMAGE_TYPE_MAP = {
  P: "Piercing",
  B: "Bludgeoning",
  S: "Slashing",
  N: "Necrotic",
  R: "Radiant",
  F: "Fire",
  C: "Cold",
  L: "Lightning",
  T: "Thunder",
  A: "Acid",
  H: "Healing",
  U: "Force",
  V: "Psychic"
};
var PROPERTY_MAP = {
  A: "Ammunition",
  F: "Finesse",
  H: "Heavy",
  L: "Light",
  R: "Reload",
  S: "Special",
  "2H": "Two-Handed",
  T: "Thrown",
  V: "Versatile"
};
var ITEM_TYPE_MAP = {
  $C: "Currency",
  $G: "Gem",
  A: "Ammunition",
  "AIR|DMG": "Vehicle (air)",
  "AF|DMG": "Future Ammo",
  AT: "Artisan Tools",
  EXP: "Explosive",
  FD: "Food and Drink",
  G: "Gear",
  GS: "Game",
  HA: "Heavy Armor",
  "IDG|TDCSR": "Illicit Drug",
  INS: "Instrument",
  LA: "Light Armor",
  M: "Weapon",
  MA: "Medium Armor",
  MNT: "Mounts and Vehicles",
  ODH: "Miscellaneous",
  P: "Consumable",
  R: "Ranged Weapon",
  RD: "Rod",
  RG: "Ring",
  S: "Shield",
  SC: "Scroll",
  SCF: "Spell Casting Focus",
  SHP: "Ship",
  T: "Tool",
  TAH: "Mounts and Vehicles",
  TG: "Trade Goods",
  VEH: "Mounts and Vehicles",
  WD: "Wand"
};
var codeFolderMap = {
  // Weapons & Armor
  "A": "Weapons and Armor/Ammunition",
  "M": "Weapons and Armor/Weapons",
  "R": "Weapons and Armor/Ranged Weapons",
  "S": "Weapons and Armor/Shields",
  "LA": "Weapons and Armor/Armor/Light Armor",
  "MA": "Weapons and Armor/Armor/Medium Armor",
  "HA": "Weapons and Armor/Armor/Heavy Armor",
  "EXP": "Weapons and Armor/Weapons/Explosives",
  // Future Ammo (AF|DMG → rawCode "AF")
  "AF": "Weapons and Armor/Ammunition/Future Ammo",
  // Magical Items
  "RD": "Magical Items/Rods",
  "RG": "Magical Items/Rings",
  "SC": "Magical Items/Scrolls",
  "SCF": "Magical Items/Spell Casting Focus",
  "WD": "Magical Items/Wands",
  // Valuables
  "$G": "Valuables/Gems",
  // Currency (rawCode becomes "C" after stripping $)
  "C": "Valuables/Currency",
  "TG": "Valuables/Trade Goods",
  // Artisan Goods
  "AT": "Artisan Goods/Tools",
  "T": "Artisan Goods/Tools",
  "INS": "Artisan Goods/Instruments",
  "GS": "Artisan Goods/Games",
  // Gear & Mounts
  "G": "Gear",
  // Mounts & Vehicles
  "MNT": "Gear/Mounts and Vehicles",
  "TAH": "Gear/Mounts and Vehicles",
  "VEH": "Gear/Mounts and Vehicles",
  // Air vehicles (AIR|DMG → rawCode "AIR")
  "AIR": "Gear/Mounts and Vehicles/Air",
  // Consumables
  "P": "Consumables",
  // Food & Drink
  "FD": "Consumables/Food and Drink",
  // Illicit Drugs (IDG|TDCSR → rawCode "IDG")
  "IDG": "Gear/Illicit Drugs",
  // Miscellaneous (ODH)
  "ODH": "Gear/Miscellaneous"
};
function parseItemsFile(json, editionId) {
  const rawItems = [];
  if (Array.isArray(json.baseitem)) rawItems.push(...json.baseitem);
  if (Array.isArray(json.item)) rawItems.push(...json.item);
  if (Array.isArray(json.object)) rawItems.push(...json.object);
  if (Array.isArray(json.vehicle)) rawItems.push(...json.vehicle);
  if (!rawItems.length) return [];
  const baseNames = new Set(
    Array.isArray(json.baseitem) ? json.baseitem.map((b) => b.name) : []
  );
  const out = [];
  for (const it of rawItems) {
    const name = it.name;
    const safeName = name.replace(/[\/\\:]/g, "-");
    const rawCode = (it.type || "").split("|")[0].split("|")[0].replace(/^\$/, "");
    let folder = codeFolderMap[rawCode] ?? "Miscellaneous";
    if (it.bonusWeapon) {
      folder = `${folder}/Variants`;
    } else {
      const isMagic = !!it.wondrous || !!it.reqAttune || !!it.req_attune || String(it.rarity).toLowerCase().includes("magic");
      if (isMagic) {
        const [, ...rest] = folder.split("/");
        folder = ["Magical Items", ...rest].join("/");
      }
    }
    if ((folder.startsWith("Weapons and Armor/Weapons") || folder.startsWith("Weapons and Armor/Ranged Weapons")) && it.weaponCategory) {
      folder = `${folder}/${capitalizeFirst2(it.weaponCategory)}`;
    }
    json._editionId = editionId;
    const fm = buildFM(it, ITEM_META_DEFS);
    if (rawCode === "M" && it.weaponCategory) {
      fm.type = `${capitalizeFirst2(it.weaponCategory)} Weapon`;
    } else if (ITEM_TYPE_MAP[rawCode]) {
      fm.type = ITEM_TYPE_MAP[rawCode];
    }
    if (Array.isArray(fm.damageTypes)) {
      fm.damageTypes = fm.damageTypes.map(
        (code) => DAMAGE_TYPE_MAP[code] || code
      );
    }
    let yaml = serializeFrontmatter(fm, ITEM_META_DEFS);
    if (Array.isArray(it.packContents)) {
      yaml += "\npackContents:";
      for (const pc of it.packContents) {
        yaml += `
  - item: "${pc.item}"
    quantity: ${pc.quantity}`;
      }
    }
    const frontmatter = `---
${yaml}
---`;
    const lines = [];
    lines.push(`# ${name}`);
    lines.push("");
    const subtitle = it.weapon ? `${capitalizeFirst2(it.weaponCategory)} Weapon` : it.armor ? folder.split("/").pop() || "Armor" : "";
    if (subtitle) lines.push(`### *${subtitle}*`);
    if (it.weapon) {
      lines.push(`**Category**: ${capitalizeFirst2(it.weaponCategory)}`);
      lines.push(`**Damage**: ${it.dmg1 ?? ""}${it.dmg2 ? ` / ${it.dmg2}` : ""}`);
      const typesBody = (Array.isArray(it.dmgType) ? it.dmgType : [it.dmgType]).filter((t) => Boolean(t)).map((t) => DAMAGE_TYPE_MAP[t] || t);
      lines.push(`**Damage Type**: ${typesBody.join(", ")}`);
      lines.push(`**Range**: ${it.range ?? "\u2014"}`);
      lines.push(`**Reload**: ${it.reload ?? "\u2014"}`);
      if (it.ammoType) lines.push(`**Ammo Type**: ${it.ammoType}`);
      if (Array.isArray(it.property) && it.property.length) {
        const propsBody = it.property.map((p) => PROPERTY_MAP[p] || p);
        lines.push(`**Properties**: ${propsBody.join(", ")}`);
      }
    }
    if (it.armor) {
      lines.push(`**Armor Class**: ${it.ac}`);
      if (it.stealth) lines.push(`**Stealth Disadvantage**: true`);
      lines.push("");
    }
    const desc = it.entries ?? it.desc;
    if (desc) {
      for (const p of Array.isArray(desc) ? desc : [desc]) {
        if (typeof p === "string") {
          for (const line of replace5eTags(p).split("\n")) {
            lines.push(line);
          }
          lines.push("");
        } else if (p && typeof p === "object") {
          if (lines[lines.length - 1] === "") {
            lines.pop();
          }
          lines.push(`#### ${p.name}`);
          const sub = Array.isArray(p.entries) ? p.entries : [];
          for (const sp of sub) {
            for (const line of replace5eTags(sp).split("\n")) {
              lines.push(line);
            }
          }
          lines.push("");
        }
      }
    }
    const body = lines.join("\n");
    out.push({ path: `Items/${folder}/${safeName}.md`, content: `${frontmatter}

${body}` });
  }
  return out.sort((a, b) => a.path.localeCompare(b.path));
}

// src/parsers/5e-2014/helpers/frontmatter.ts
function cap(str) {
  if (typeof str !== "string") return "";
  return str.charAt(0).toUpperCase() + str.slice(1);
}
var ABILITY_FULL = {
  str: "Strength",
  dex: "Dexterity",
  con: "Constitution",
  int: "Intelligence",
  wis: "Wisdom",
  cha: "Charisma"
};
var SIZE_MAP2 = {
  T: "Tiny",
  S: "Small",
  M: "Medium",
  L: "Large",
  H: "Huge",
  G: "Gargantuan"
};
var FM_FIELDS = {
  ABILITY_BONUSES: "ability_bonuses",
  AC: "AC",
  ALIGNMENT: "Alignment",
  AMMO_TYPE: "Ammo Type",
  ARMOR_PROFICIENCIES: "armor-prof",
  ATTACK_TYPE: "attack_type",
  ATTUNEMENT: "Attunement",
  ATTUNE_REQ: "Attune_Req",
  CASTING_TIME: "casting_time",
  CHARISMA: "charisma",
  CHA_MOD: "cha_mod",
  CONCENTRATION: "concentration",
  CONDITION_IMM: "cond_immunity",
  CONSTITUTION: "constitution",
  CON_MOD: "con_mod",
  COST: "cost",
  COMPONENTS: "Components",
  CHALLENGE_RATING: "CR",
  DAMAGE_TYPE: "damage_type",
  DAMAGE_TYPES: "damageTypes",
  DAMAGE: "damage",
  DAMAGE_RES: "dmg_resistance",
  DAMAGE_IMM: "dmg_immunity",
  DEXTERITY: "dexterity",
  DEX_MOD: "dex_mod",
  DURATION: "duration",
  RULESET: "ruleset",
  HP: "HP",
  INTELLIGENCE: "intelligence",
  INT_MOD: "int_mod",
  LANGUAGES: "languages",
  LEVEL: "level",
  MAGICAL: "magical",
  MATERIAL: "material",
  NAME: "name",
  PROPERTIES: "properties",
  RANGE: "range",
  RARITY: "rarity",
  RELOAD: "reload",
  RITUAL: "ritual",
  SAVE: "save",
  SAVING_THROWS: "saving_throws",
  SCHOOL: "school",
  SENSES: "senses",
  SIZE: "size",
  SKILLS: "skills",
  SKILL_CHOICE_LIST: "skill_choice_list",
  SOMATIC: "somatic",
  SOURCE: "source",
  SPECIES: "species",
  SPEED: "speed",
  SPELL_CAST_MOD: "Spell Cast Mod",
  SPELL_RANGE: "Range",
  STEALTH_DISADVANTAGE: "stealthDisadvantage",
  STRENGTH: "strength",
  STR_MOD: "str_mod",
  SUBRACES: "subraces",
  TOOL_PROFICIENCIES: "tool-prof",
  TOOL_CHOICE_LIST: "tool_choice_list",
  TRAITS: "traits",
  TYPE: "type",
  VARIANT: "Variant",
  VERBAL: "verbal",
  WEAPON_PROFICIENCIES: "weapon-prof",
  WEIGHT: "weight",
  WISDOM: "wisdom",
  WIS_MOD: "wis_mod"
};
var unifiedArmorProfs = (val) => Array.isArray(val?.armor) ? val.armor.map(cap) : Array.isArray(val) ? val.map(cap) : [];
function unifiedWeaponProfs(val) {
  const rawArr = Array.isArray(val?.weapons) ? val.weapons : Array.isArray(val) ? val : [];
  const out = /* @__PURE__ */ new Set();
  function handleOne(entry) {
    if (Array.isArray(entry)) {
      entry.forEach(handleOne);
      return;
    }
    if (typeof entry === "string") {
      const lit = entry.trim().toLowerCase();
      if (lit === "simple") {
        out.add("Simple Weapons");
      } else if (lit === "martial") {
        out.add("Martial Weapons");
      } else {
        const text = entry.startsWith("{@") ? replace5eTags(entry) : cap(entry);
        out.add(text);
      }
      return;
    }
    if (entry && typeof entry === "object" && entry.proficiency) {
      const name = cap(entry.proficiency);
      out.add(entry.optional ? `${name} (optional)` : name);
    }
  }
  rawArr.forEach(handleOne);
  return [...out];
}
var unifiedSaves = (val) => {
  if (Array.isArray(val)) {
    return val.map(
      (k) => ({
        str: "Strength",
        dex: "Dexterity",
        con: "Constitution",
        int: "Intelligence",
        wis: "Wisdom",
        cha: "Charisma"
      })[k] ?? k.toUpperCase()
    );
  }
  if (typeof val === "object" && val !== null) {
    return Object.keys(val).map((k) => k.toUpperCase());
  }
  return [];
};
var unifiedSkills2 = (val) => {
  if (val && !Array.isArray(val) && typeof val === "object" && // ensure every value is a string or number
  Object.values(val).every((v) => typeof v === "string" || typeof v === "number")) {
    return Object.entries(val).map(
      ([skill, mod]) => `${cap(skill)} ${mod}`.trim()
    );
  }
  if (val && !Array.isArray(val) && typeof val === "object") {
    const nested = val.skills ?? val.skillProf ?? val.skillProficiencies;
    return unifiedSkills2(nested);
  }
  if (!Array.isArray(val)) return [];
  const out = /* @__PURE__ */ new Set();
  for (const e of val) {
    if (e && typeof e === "object" && typeof e.any === "number") {
      out.add(`Choose ${e.any}`);
      continue;
    }
    if (e && typeof e === "object" && e.choose) {
      const cnt = e.choose.count ?? 1;
      out.add(`Choose ${cnt}`);
    }
    if (e && typeof e === "object") {
      for (const [k, v] of Object.entries(e)) {
        if (v === true) out.add(cap(k));
      }
    }
    if (typeof e === "string") {
      out.add(cap(e));
    }
  }
  return [...out];
};
var unifiedToolProfs = (val) => {
  let entries = Array.isArray(val) ? val : Array.isArray(val?.toolProficiencies) ? val.toolProficiencies : Array.isArray(val?.tools) ? val.tools : [];
  const out = /* @__PURE__ */ new Set();
  let sawChoose = false;
  for (const e of entries) {
    if (typeof e === "string") {
      out.add(cap(e));
      continue;
    }
    if (e?.choose) {
      const cnt = e.choose.count ?? 1;
      sawChoose = true;
      out.add(`Choose ${cnt}`);
    }
    for (const [k, v] of Object.entries(e)) {
      if (v === true) {
        out.add(cap(k));
      } else if (typeof v === "number" && k.startsWith("any")) {
        const raw = k.replace(/^any/, "");
        const spaced = raw.replace(/([a-z])([A-Z])/g, "$1 $2").split(" ").map(cap).join(" ");
        out.add(`Choose ${v} ${spaced}`);
      }
    }
  }
  return [...out];
};
var ALL_FIELD_DEFS = [
  // ─── Core ───
  { callSign: "NAME", jsonKey: "name" },
  { callSign: "SOURCE", jsonKey: ["source"], conv: (raw, all) => {
    const out = /* @__PURE__ */ new Set();
    const arr = Array.isArray(raw) ? raw : [raw];
    arr.forEach((src) => out.add(getFullSourceName(src, all._editionId)));
    for (const os of all.otherSources ?? []) out.add(getFullSourceName(os.source, all._editionId));
    for (const rep of all.reprintedAs ?? []) {
      const [, src] = rep.split("|");
      out.add(getFullSourceName(src, all._editionId));
    }
    return [...out];
  } },
  // ─── Proficiencies ───
  { callSign: "ARMOR_PROFICIENCIES", jsonKey: ["armorProficiencies", "armorProfs", "startingProficiencies"], conv: unifiedArmorProfs },
  {
    callSign: "WEAPON_PROFICIENCIES",
    jsonKey: ["weaponProficiencies", "weaponProfs", "startingProficiencies"],
    conv: unifiedWeaponProfs
  },
  { callSign: "TOOL_PROFICIENCIES", jsonKey: ["toolProficiencies", "toolProfs", "startingProficiencies"], conv: unifiedToolProfs },
  {
    callSign: "TOOL_CHOICE_LIST",
    jsonKey: ["toolProficiencies", "toolProfs", "startingProficiencies"],
    conv: (raw) => {
      const arr = Array.isArray(raw) ? raw : Array.isArray(raw?.toolProficiencies) ? raw.toolProficiencies : Array.isArray(raw?.tools) ? raw.tools : [];
      const choice = arr.find((e) => e?.choose);
      return choice?.choose?.from?.map((s) => cap(s)) ?? [];
    }
  },
  { callSign: "SAVING_THROWS", jsonKey: ["save", "proficiency"], conv: unifiedSaves },
  {
    callSign: "SKILLS",
    jsonKey: ["skill", "skillProf", "skillProficiencies", "startingProficiencies"],
    conv: unifiedSkills2
  },
  {
    callSign: "SKILL_CHOICE_LIST",
    jsonKey: ["skill", "skillProf", "skillProficiencies", "startingProficiencies"],
    conv: (raw) => {
      const arr = Array.isArray(raw) ? raw : Array.isArray(raw?.skillProficiencies) ? raw.skillProficiencies : Array.isArray(raw?.skills) ? raw.skills : Array.isArray(raw?.skillProf) ? raw.skillProf : [];
      const choiceObj = arr.find((e) => e?.choose || typeof e.any === "number");
      if (!choiceObj) return [];
      if (choiceObj.choose && Array.isArray(choiceObj.choose.from)) {
        return choiceObj.choose.from.map(cap);
      }
      if (typeof choiceObj.any === "number") {
        return SKILL_OPTIONS;
      }
      return [];
    }
  },
  {
    callSign: "SPELL_CAST_MOD",
    jsonKey: "spellcastingAbility",
    conv: (raw) => {
      const key = String(raw).toLowerCase();
      return ABILITY_FULL[key] || key.toUpperCase();
    }
  },
  {
    callSign: "RULESET",
    jsonKey: "name",
    // ignore the raw value, always print HELLO
    conv: (_raw, _all) => "D&D 5e (2025)"
  },
  // ─── Spells ───
  { callSign: "LEVEL", jsonKey: "level" },
  { callSign: "SCHOOL", jsonKey: "school", conv: (s) => SCHOOL_MAP[s] ?? s },
  { callSign: "CASTING_TIME", jsonKey: "time", conv: formatTime },
  { callSign: "SPELL_RANGE", jsonKey: "range", conv: formatRange },
  { callSign: "DURATION", jsonKey: "duration", conv: formatDuration },
  { callSign: "VERBAL", jsonKey: "components", conv: (c) => !!c.v },
  { callSign: "SOMATIC", jsonKey: "components", conv: (c) => !!c.s },
  { callSign: "MATERIAL", jsonKey: "components", conv: (c) => !!c.m },
  {
    callSign: "COMPONENTS",
    jsonKey: "components",
    conv: (c) => {
      if (!c.m) return [];
      const raw = Array.isArray(c.m) ? c.m : [c.m];
      return raw.map((item) => {
        if (typeof item === "string") return item;
        if (item && typeof item === "object" && typeof item.text === "string") {
          return item.text;
        }
        return null;
      }).filter((comp) => comp !== null);
    }
  },
  { callSign: "ATTACK_TYPE", jsonKey: "attackType" },
  { callSign: "DAMAGE_TYPE", jsonKey: "damageInflict", conv: (d) => Array.isArray(d) ? d[0] : d },
  { callSign: "RITUAL", jsonKey: "ritual" },
  { callSign: "CONCENTRATION", jsonKey: "duration", conv: (ds) => Array.isArray(ds) && ds.some((x) => x.concentration) },
  { callSign: "SAVE", jsonKey: "saveAttr" },
  // ─── Species / Creatures ───
  { callSign: "SPECIES", jsonKey: "name" },
  {
    callSign: "SIZE",
    jsonKey: "size",
    conv: (raw) => {
      if (Array.isArray(raw)) {
        return raw.map((r) => SIZE_MAP2[r] || r);
      } else {
        return SIZE_MAP2[raw] || raw;
      }
    }
  },
  {
    callSign: "SPEED",
    jsonKey: "speed",
    conv: (sp) => {
      if (typeof sp === "number") {
        return [`Walk ${sp} ft.`];
      }
      if (!sp || typeof sp !== "object") return [];
      return Object.entries(sp).filter(([mode]) => mode !== "canHover").map(([mode, v]) => {
        const n = typeof v === "object" && v !== null && "number" in v ? v.number : v;
        const label = mode === "walk" ? "Walk" : cap(mode);
        return `${label} ${n} ft.`;
      });
    }
  },
  { callSign: "LANGUAGES", jsonKey: ["languages", "languageProficiencies"], conv: (arr) => {
    if (!Array.isArray(arr)) return [];
    const out = [];
    for (const lp of arr) {
      if (typeof lp === "string") out.push(cap(lp));
      else if (typeof lp === "object") {
        for (const [lang, val] of Object.entries(lp)) {
          if (val) out.push(cap(lang));
        }
      }
    }
    return [...new Set(out)];
  } },
  { callSign: "SENSES", jsonKey: "senses", conv: (sen) => {
    if (Array.isArray(sen)) return sen.map((s) => s.replace(/^\d+\s*/, "").replace(/^./, (c) => c.toUpperCase()));
    if (sen && typeof sen === "object") return Object.entries(sen).map(([k, v]) => `${k.charAt(0).toUpperCase() + k.slice(1)} ${v}`);
    return [];
  } },
  {
    callSign: "TRAITS",
    jsonKey: ["classFeatures", "entries"],
    conv: (raw, allJson) => {
      const clsRec = Array.isArray(allJson.class) ? allJson.class[0] : allJson;
      const className = typeof clsRec.name === "string" ? clsRec.name : "";
      const omit = /* @__PURE__ */ new Set([
        "Ability Score Improvement",
        "Archetype Feature",
        "Subclass Feature"
        // add more if you like…
      ]);
      const seen = /* @__PURE__ */ new Set();
      if (Array.isArray(allJson.classFeatures)) {
        return allJson.classFeatures.flatMap((feat) => {
          if (feat && typeof feat === "object" && feat.gainSubclassFeature) return [];
          const rawName = typeof feat === "string" ? feat : typeof feat.classFeature === "string" ? feat.classFeature : "";
          const name = rawName.split("|")[0].trim();
          if (!name || omit.has(name) || seen.has(name)) return [];
          seen.add(name);
          const anchor = name.replace(/[^\w\s]/g, "").replace(/\s+/g, " ").trim().replace(/\b\w/g, (c) => c.toUpperCase());
          return `[[${className}#${anchor}|${name}]]`;
        });
      }
      const ents = Array.isArray(raw) ? raw : [];
      const featureNames = ents.filter((e) => e?.data?.isFeature && typeof e.name === "string").map((e) => e.name.replace(/^Feature:\s*/, "").trim());
      if (featureNames.length) return featureNames;
      return ents.filter((e) => e && typeof e.name === "string").map((e) => e.name.replace(/^Feature:\s*/, "").trim());
    }
  },
  { callSign: "AC", jsonKey: "ac", conv: (a) => Array.isArray(a) ? a[0].ac : a },
  { callSign: "HP", jsonKey: "hp", conv: (hp) => hp?.average ?? hp },
  { callSign: "CHALLENGE_RATING", jsonKey: "cr" },
  { callSign: "STRENGTH", jsonKey: "ability", conv: (arr) => Array.isArray(arr) ? arr[0] : arr?.str ?? 0 },
  { callSign: "DEXTERITY", jsonKey: "ability", conv: (arr) => Array.isArray(arr) ? arr[1] : arr?.dex ?? 0 },
  { callSign: "CONSTITUTION", jsonKey: "ability", conv: (arr) => Array.isArray(arr) ? arr[2] : arr?.con ?? 0 },
  { callSign: "INTELLIGENCE", jsonKey: "ability", conv: (arr) => Array.isArray(arr) ? arr[3] : arr?.int ?? 0 },
  { callSign: "WISDOM", jsonKey: "ability", conv: (arr) => Array.isArray(arr) ? arr[4] : arr?.wis ?? 0 },
  { callSign: "CHARISMA", jsonKey: "ability", conv: (arr) => Array.isArray(arr) ? arr[5] : arr?.cha ?? 0 },
  {
    callSign: "ALIGNMENT",
    jsonKey: "alignment",
    conv: (a) => {
      const raw = Array.isArray(a) ? a.join(" ") : typeof a === "string" ? a : String(a);
      const cleaned = raw.replace(/\bA\b/g, "Any").replace(/\bU\b/g, "Unaligned").replace(/\bN\b/g, "Neutral").replace(/\bL\b/g, "Lawful").replace(/\bC\b/g, "Chaotic").replace(/\bG\b/g, "Good").replace(/\bE\b/g, "Evil");
      return formatAlignmentAbbrev(cleaned);
    }
  },
  {
    callSign: "TYPE",
    jsonKey: "type",
    conv: (t) => {
      if (typeof t === "string") {
        return ITEM_TYPE_MAP[t] ?? cap(t);
      }
      if (t && typeof t === "object") {
        const code = String(t.type || "").toUpperCase();
        if (ITEM_TYPE_MAP[code]) {
          return ITEM_TYPE_MAP[code];
        }
        const base = t.type ? cap(t.type) : "Unknown";
        const tags = Array.isArray(t.tags) ? t.tags.map(cap) : [];
        return tags.length ? `${base} (${tags.join(", ")})` : base;
      }
      return void 0;
    }
  },
  // ─── Items ───
  { callSign: "TYPE", jsonKey: "_parsedType" },
  { callSign: "RARITY", jsonKey: "rarity", conv: (r) => {
    const s = String(r || "").toLowerCase();
    return s && s !== "none" ? s[0].toUpperCase() + s.slice(1) : void 0;
  } },
  {
    callSign: "COST",
    jsonKey: "value",
    conv: (raw) => {
      const s = String(raw).trim().toLowerCase();
      let num;
      if (s.endsWith("cp")) {
        num = parseFloat(s);
        return num >= 100 ? `${Math.round(num / 100 * 100) / 100}gp` : `${num}cp`;
      }
      if (s.endsWith("sp")) {
        num = parseFloat(s);
        return num >= 10 ? `${Math.round(num / 10 * 100) / 100}gp` : `${num}sp`;
      }
      if (s.endsWith("gp")) {
        num = parseFloat(s);
        return `${Math.round(num * 100) / 100}gp`;
      }
      num = parseFloat(s) || 0;
      return num >= 100 ? `${Math.round(num / 100 * 100) / 100}gp` : `${num}cp`;
    }
  },
  { callSign: "WEIGHT", jsonKey: "weight" },
  { callSign: "MAGICAL", jsonKey: "wondrous", conv: (_w, all) => !!all.wondrous || !!all.reqAttune },
  { callSign: "VARIANT", jsonKey: "bonusWeapon", conv: (b) => typeof b === "string" && b.startsWith("+") },
  { callSign: "PROPERTIES", jsonKey: "property", conv: (arr) => Array.isArray(arr) ? arr.map((p) => PROPERTY_MAP[p] || p) : [] },
  { callSign: "DAMAGE", jsonKey: "dmg1", conv: (d, all) => d ? all.dmg2 ? `${d} / ${all.dmg2}` : `${d}` : void 0 },
  { callSign: "DAMAGE_TYPES", jsonKey: "dmgType", conv: (dt) => dt == null ? [] : Array.isArray(dt) ? dt : [dt] },
  { callSign: "RANGE", jsonKey: "range" },
  { callSign: "RELOAD", jsonKey: "reload" },
  { callSign: "AMMO_TYPE", jsonKey: "ammoType" },
  { callSign: "STEALTH_DISADVANTAGE", jsonKey: "stealth" },
  {
    callSign: "ATTUNEMENT",
    jsonKey: ["wondrous", "reqAttune", "req_attune", "reqAttuneTags"],
    conv: (_raw, allJson) => {
      const j = allJson;
      const hasText = typeof j.reqAttune === "string" && j.reqAttune.trim() !== "";
      const hasTags = Array.isArray(j.reqAttuneTags) && j.reqAttuneTags.length > 0;
      return hasText || hasTags;
    }
  },
  {
    callSign: "ATTUNE_REQ",
    jsonKey: "reqAttuneTags",
    conv: (tags = [], _all) => {
      const mapLetter = {
        A: "Any",
        U: "Unaligned",
        N: "Neutral",
        L: "Lawful",
        C: "Chaotic",
        G: "Good",
        E: "Evil"
      };
      const reqs = [];
      for (const tag of tags) {
        if (tag.class && Array.isArray(tag.alignment)) {
          const cls = cap(tag.class);
          for (const code of tag.alignment) {
            reqs.push(`${mapLetter[code] || code} ${cls}`);
          }
        } else if (tag.class) {
          reqs.push(cap(tag.class));
        } else if (Array.isArray(tag.alignment)) {
          for (const code of tag.alignment) {
            reqs.push(mapLetter[code] || code);
          }
        } else if (tag.background) {
          const [bg] = String(tag.background).split("|");
          reqs.push(bg.split(" ").map(cap).join(" "));
        } else if (tag.spellcasting) {
          reqs.push("Spellcaster");
        }
      }
      return Array.from(new Set(reqs));
    }
  },
  // ─── Other ───
  { callSign: "DAMAGE_RES", jsonKey: "resist", conv: (v) => Array.isArray(v) ? v.map(cap) : [] },
  { callSign: "RULESET", jsonKey: "_editionId" },
  // ─── Ability‐score modifiers (only emit when nonzero) ───
  {
    callSign: "STR_MOD",
    jsonKey: "ability",
    conv: (arr) => {
      const v = Array.isArray(arr) ? arr[0].str ?? 0 : arr.str ?? 0;
      return v !== 0 ? v : void 0;
    }
  },
  {
    callSign: "DEX_MOD",
    jsonKey: "ability",
    conv: (arr) => {
      const v = Array.isArray(arr) ? arr[0].dex ?? 0 : arr.dex ?? 0;
      return v !== 0 ? v : void 0;
    }
  },
  {
    callSign: "CON_MOD",
    jsonKey: "ability",
    conv: (arr) => {
      const v = Array.isArray(arr) ? arr[0].con ?? 0 : arr.con ?? 0;
      return v !== 0 ? v : void 0;
    }
  },
  {
    callSign: "INT_MOD",
    jsonKey: "ability",
    conv: (arr) => {
      const v = Array.isArray(arr) ? arr[0].int ?? 0 : arr.int ?? 0;
      return v !== 0 ? v : void 0;
    }
  },
  {
    callSign: "WIS_MOD",
    jsonKey: "ability",
    conv: (arr) => {
      const v = Array.isArray(arr) ? arr[0].wis ?? 0 : arr.wis ?? 0;
      return v !== 0 ? v : void 0;
    }
  },
  {
    callSign: "CHA_MOD",
    jsonKey: "ability",
    conv: (arr) => {
      const v = Array.isArray(arr) ? arr[0].cha ?? 0 : arr.cha ?? 0;
      return v !== 0 ? v : void 0;
    }
  }
];
function buildFM(json, defs) {
  const fm = {};
  for (const { callSign, jsonKey, conv } of defs) {
    const keys = Array.isArray(jsonKey) ? jsonKey : [jsonKey];
    let raw = void 0;
    for (const key of keys) {
      if (json[key] != null) {
        raw = json[key];
        break;
      }
    }
    if (raw == null) continue;
    const val = conv ? conv(raw, json) : raw;
    fm[FM_FIELDS[callSign]] = val;
  }
  return fm;
}
function serializeFrontmatter(fm, defs) {
  const filtered = {};
  const hasSkillChoice = Array.isArray(fm[FM_FIELDS.SKILL_CHOICE_LIST]) && fm[FM_FIELDS.SKILL_CHOICE_LIST].length > 0;
  const hasToolChoice = Array.isArray(fm[FM_FIELDS.TOOL_CHOICE_LIST]) && fm[FM_FIELDS.TOOL_CHOICE_LIST].length > 0;
  for (const [k, v] of Object.entries(fm)) {
    if (v === void 0) continue;
    if (k === FM_FIELDS.COMPONENTS && Array.isArray(v) && v.length === 0) continue;
    if ((k === FM_FIELDS.TOOL_CHOICE_LIST || k === FM_FIELDS.SKILL_CHOICE_LIST) && Array.isArray(v) && v.length === 0) continue;
    filtered[k] = v;
  }
  let keysToEmit;
  if (defs) {
    const wanted = defs.map((d) => FM_FIELDS[d.callSign]);
    keysToEmit = wanted.filter((k) => k in filtered);
    keysToEmit.push(
      ...Object.keys(filtered).filter((k) => !keysToEmit.includes(k))
    );
  } else {
    keysToEmit = Object.keys(filtered);
  }
  return keysToEmit.map((k) => {
    const v = filtered[k];
    if (Array.isArray(v)) {
      const inline = v.map((item) => JSON.stringify(item)).join(", ");
      return `${k}: [${inline}]`;
    }
    if (typeof v === "string") {
      return `${k}: "${v}"`;
    }
    return `${k}: ${v}`;
  }).join("\n");
}
var SKILL_OPTIONS = [
  "Acrobatics",
  "Animal Handling",
  "Arcana",
  "Athletics",
  "Deception",
  "History",
  "Insight",
  "Intimidation",
  "Investigation",
  "Medicine",
  "Nature",
  "Perception",
  "Performance",
  "Persuasion",
  "Religion",
  "Sleight of Hand",
  "Stealth",
  "Survival"
];
var SPELL_KEYS = [
  "NAME",
  "LEVEL",
  "SCHOOL",
  "CASTING_TIME",
  "SPELL_RANGE",
  "DURATION",
  "VERBAL",
  "SOMATIC",
  "MATERIAL",
  "COMPONENTS",
  "CONCENTRATION",
  "SOURCE",
  "RULESET"
];
var SPECIES_KEYS = [
  "SPECIES",
  "SIZE",
  "SPEED",
  "LANGUAGES",
  "TRAITS",
  "SKILLS",
  "STR_MOD",
  "DEX_MOD",
  "CON_MOD",
  "INT_MOD",
  "WIS_MOD",
  "CHA_MOD",
  "SKILL_CHOICE_LIST",
  "TOOL_PROFICIENCIES",
  "TOOL_CHOICE_LIST",
  "WEAPON_PROFICIENCIES",
  "SENSES",
  "DAMAGE_RES",
  "SOURCE",
  "RULESET"
];
var ITEM_KEYS = [
  "NAME",
  "TYPE",
  "RARITY",
  "COST",
  "WEIGHT",
  "PROPERTIES",
  "DAMAGE",
  "DAMAGE_TYPES",
  "RANGE",
  "RELOAD",
  "AMMO_TYPE",
  "AC",
  "STEALTH_DISADVANTAGE",
  "MAGICAL",
  "ATTUNEMENT",
  "ATTUNE_REQ",
  "SOURCE",
  "RULESET"
];
var BESTIARY_KEYS = [
  "NAME",
  "SIZE",
  "TYPE",
  "ALIGNMENT",
  "AC",
  "HP",
  "SPEED",
  "STRENGTH",
  "DEXTERITY",
  "CONSTITUTION",
  "INTELLIGENCE",
  "WISDOM",
  "CHARISMA",
  "SAVING_THROWS",
  "SKILLS",
  "SENSES",
  "LANGUAGES",
  "CHALLENGE_RATING",
  "SOURCE",
  "RULESET"
];
var CLASS_KEYS = [
  "NAME",
  "SPELL_CAST_MOD",
  "ARMOR_PROFICIENCIES",
  "WEAPON_PROFICIENCIES",
  "TOOL_PROFICIENCIES",
  "TOOL_CHOICE_LIST",
  "SAVING_THROWS",
  "SKILLS",
  "SKILL_CHOICE_LIST",
  "TRAITS",
  "SOURCE",
  "RULESET"
];
var BACKGROUND_KEYS = [
  "NAME",
  "SKILLS",
  "SKILL_CHOICE_LIST",
  "TOOL_PROFICIENCIES",
  "TOOL_CHOICE_LIST",
  "TRAITS",
  "SOURCE",
  "RULESET"
];
var FEATS_KEYS = [
  "SOURCE",
  "RULESET"
];
var SPELL_META_DEFS = SPELL_KEYS.map((key) => {
  const def = ALL_FIELD_DEFS.find((d) => d.callSign === key);
  if (!def) throw new Error(`Missing FieldDef for SPELL_KEY ${key}`);
  return def;
});
var SPECIES_META_DEFS = SPECIES_KEYS.map((key) => {
  const def = ALL_FIELD_DEFS.find((d) => d.callSign === key);
  if (!def) throw new Error(`Missing FieldDef for SPECIES_KEY ${key}`);
  return def;
});
var ITEM_META_DEFS = ITEM_KEYS.map((key) => {
  const def = ALL_FIELD_DEFS.find((d) => d.callSign === key);
  if (!def) throw new Error(`Missing FieldDef for ITEM_KEY ${key}`);
  return def;
});
var BESTIARY_META_DEFS = BESTIARY_KEYS.map((key) => {
  const def = ALL_FIELD_DEFS.find((d) => d.callSign === key);
  if (!def) throw new Error(`Missing FieldDef for BESTIARY_KEY ${key}`);
  return def;
});
var CLASS_META_DEFS = CLASS_KEYS.map((key) => {
  const def = ALL_FIELD_DEFS.find((d) => d.callSign === key);
  if (!def) throw new Error(`Missing FieldDef for CLASS_KEY ${key}`);
  return def;
});
var BACKGROUND_META_DEFS = BACKGROUND_KEYS.map((key) => {
  const def = ALL_FIELD_DEFS.find((d) => d.callSign === key);
  if (!def) throw new Error(`Missing FieldDef for BACKGROUND_KEY ${key}`);
  return def;
});
var FEATS_META_DEFS = FEATS_KEYS.map((key) => {
  const def = ALL_FIELD_DEFS.find((d) => d.callSign === key);
  if (!def) throw new Error(`Missing FieldDef for BACKGROUND_KEY ${key}`);
  return def;
});

// src/parsers/5e-2014/spells.ts
var SCHOOL_MAP = {
  A: "Abjuration",
  C: "Conjuration",
  D: "Divination",
  E: "Enchantment",
  V: "Evocation",
  I: "Illusion",
  N: "Necromancy",
  T: "Transmutation"
};
function ordinal(n) {
  const suffix = n === 1 ? "st" : n === 2 ? "nd" : n === 3 ? "rd" : "th";
  return `${n}${suffix}`;
}
function formatRange(range) {
  if (!range) return "";
  if (typeof range === "string") return range;
  if (range.type === "special") return "Special";
  if (range.type === "point" && range.distance) {
    const dist = range.distance;
    if (dist.type === "touch") return "Touch";
    if (dist.type === "self") return "Self";
    if (dist.type === "sight") return "Sight";
    if (dist.amount) return `${dist.amount} ${dist.type}`;
  }
  return "Varies";
}
function formatTime(time) {
  if (!Array.isArray(time)) return "";
  return time.map((t) => `${t.number} ${t.unit}`).join(", ");
}
function formatDuration(duration) {
  if (!Array.isArray(duration)) return "";
  return duration.map((d) => {
    if (d.type === "instant") return "Instantaneous";
    if (d.type === "timed" && d.duration) {
      return `${d.duration.amount} ${d.duration.type}${d.concentration ? " (concentration)" : ""}`;
    }
    if (d.type === "permanent") return "Permanent";
    return "Special";
  }).join(", ");
}
function formatComponents(components) {
  if (!components) return "";
  const parts = [];
  if (components.v) parts.push("V");
  if (components.s) parts.push("S");
  if (components.m) {
    let matDetails = [];
    if (Array.isArray(components.m)) {
      matDetails = components.m.map(
        (item) => typeof item === "string" ? item : item && typeof item.text === "string" ? item.text : null
      ).filter((t) => !!t);
    } else if (typeof components.m === "string") {
      matDetails = [components.m];
    } else if (components.m.text) {
      matDetails = [components.m.text];
    }
    const matPart = matDetails.length > 0 ? `M (${matDetails.join(", ")})` : "M";
    parts.push(matPart);
  }
  return parts.join(", ");
}
function parseSpellsFile(json, editionId) {
  if (!json.spell) return [];
  json._editionId = editionId;
  return json.spell.map((spell) => {
    const sources = spell.source ? Array.isArray(spell.source) ? spell.source : [spell.source] : ["unknown"];
    const name = spell.name;
    const school = SCHOOL_MAP[spell.school] ?? spell.school;
    const level = spell.level;
    const range = formatRange(spell.range);
    const castingTime = formatTime(spell.time);
    const duration = formatDuration(spell.duration);
    const formattedSources = sources.map((s) => getFullSourceName(s, editionId));
    const attackType = spell.attackType || "";
    const damageType = spell.damageInflict?.[0] || "Teleportation";
    const ritual = spell.ritual === true;
    const concentration = spell.duration?.some((d) => d.concentration) ?? false;
    const FM = buildFM(spell, SPELL_META_DEFS);
    const yaml = serializeFrontmatter(FM, SPELL_META_DEFS);
    const safeName = name.replace(/\//g, "-");
    const title = `# ${name}`;
    const levelLabel = level === 0 ? `${school} Cantrip` : `${ordinal(level)}-level ${school} Spell`;
    const subtitle = `### *${levelLabel}*${concentration ? " *(Concentration)*" : ""}`;
    const headerLines = [
      title,
      subtitle,
      `**Casting Time:** ${castingTime}`,
      `**Range:** ${range}`,
      `**Components:** ${formatComponents(spell.components)}`,
      `**Duration:** ${duration}`
    ];
    const bodyLines = [
      ...(spell.entries ?? []).map((e) => formatEntry(e)),
      ...(spell.entriesHigherLevel ?? []).map((e) => formatEntry(e))
    ];
    const footerLines = [
      `---`,
      `**Source:** ${formattedSources.join(", ")}`
    ];
    return {
      path: `${safeName}.md`,
      content: [
        `---
${yaml}
---`,
        headerLines.join("\n"),
        ``,
        bodyLines.join("\n\n"),
        ``,
        footerLines.join("\n")
      ].join("\n")
    };
  });
}

// src/parsers/5e-2014/species.ts
function slug(name) {
  return name.replace(/;/g, ":").replace(/[\/:"]/g, ":").trim();
}
var BLOCKED_TRAITS = ["Age", "Size", "Languages", "Creature Type", "Speed"];
function parseSpeciesFile(json, editionId) {
  if (!Array.isArray(json.race)) return [];
  json._editionId = editionId;
  const rawVariants = json.race.filter(
    (r) => !("reprintedAs" in r) && !/\((?:Kaladesh|Zendikar|Amonkhet|Innistrad|Ixalan)\)$/.test(r.name)
  );
  const byName = /* @__PURE__ */ new Map();
  for (const r of rawVariants) {
    const list = byName.get(r.name) ?? [];
    list.push(r);
    byName.set(r.name, list);
  }
  const subracesList = Array.isArray(json.subrace) ? json.subrace : [];
  const out = [];
  for (const [raceName, raceVariants] of byName.entries()) {
    const safeName = slug(raceName);
    const primary = raceVariants.reduce(
      (best, cur) => Object.keys(cur).length > Object.keys(best).length ? cur : best,
      raceVariants[0]
    );
    if (!primary.ability) {
      const humanEntry = subracesList.find(
        (sr) => sr.raceName === raceName && sr.raceSource === primary.source && !("name" in sr) && Array.isArray(sr.ability)
      );
      if (humanEntry) primary.ability = humanEntry.ability;
    }
    const fm = buildFM(primary, SPECIES_META_DEFS);
    const senses = [];
    if (primary.darkvision) senses.push(`Darkvision ${primary.darkvision} ft.`);
    if (primary.blindsight) senses.push(`Blindsight ${primary.blindsight} ft.`);
    if (primary.tremorsense) senses.push(`Tremorsense ${primary.tremorsense} ft.`);
    if (primary.truesight) senses.push(`Truesight ${primary.truesight} ft.`);
    if (senses.length) fm.senses = senses;
    if (Array.isArray(fm.traits)) {
      fm.traits = fm.traits.filter((t) => !BLOCKED_TRAITS.includes(t));
    }
    const yaml = serializeFrontmatter(fm, SPECIES_META_DEFS);
    const lines = [];
    lines.push(`# ${raceName}`, `## Stats`);
    const size = Array.isArray(primary.size) ? primary.size.map((s) => SIZE_MAP2[s] || s).join("/") : SIZE_MAP2[primary.size] ?? primary.size;
    lines.push(`**Size:** ${size}`);
    const speed = typeof primary.speed === "number" ? primary.speed : primary.speed?.walk ?? primary.speed?.base ?? 0;
    lines.push(`**Speed:** ${speed} ft. walking`);
    const kids = subracesList.filter(
      (sr) => sr.name && sr.raceName === raceName && sr.raceSource === primary.source
    );
    const rawAbility = Array.isArray(primary.ability) ? primary.ability : Array.isArray(kids[0]?.ability) ? kids[0].ability : [];
    if (Array.isArray(rawAbility) && rawAbility.length) {
      const bonuses = { str: 0, dex: 0, con: 0, int: 0, wis: 0, cha: 0 };
      let chooseOpt = null;
      for (const obj of rawAbility) {
        if ("choose" in obj) chooseOpt = obj.choose;
        else for (const [k, v] of Object.entries(obj)) bonuses[k] += v;
      }
      const pairs = Object.entries(bonuses);
      const parts = pairs.filter(([, v]) => v !== 0).map(([k, v]) => `${k.toUpperCase()} ${v >= 0 ? "+" : ""}${v}`);
      if (chooseOpt?.count && Array.isArray(chooseOpt.from)) {
        parts.push(`CHOOSE ${chooseOpt.count} from ${chooseOpt.from.map((s) => s.toUpperCase()).join(", ")}`);
      }
      if (parts.length) lines.push(`**Ability Scores:** ${parts.join(", ")}`);
    }
    const langs = fm.languages;
    if (langs?.length) lines.push(`**Languages:** ${langs.join(", ")}`);
    if (Array.isArray(primary.skillProficiencies)) {
      const skillLabels = [];
      for (const e of primary.skillProficiencies) {
        if (e.choose?.from) {
          skillLabels.push(`Choose from: ${e.choose.from.map((s) => s.charAt(0).toUpperCase() + s.slice(1)).join(", ")}`);
        } else {
          const val = e.proficiency ?? e.name ?? e;
          if (typeof val === "string") skillLabels.push(val.charAt(0).toUpperCase() + val.slice(1));
        }
      }
      if (skillLabels.length) lines.push(`**Skill Proficiencies:** ${skillLabels.join("; ")}`);
    }
    const tp = fm[FM_FIELDS.TOOL_PROFICIENCIES];
    const wp = fm[FM_FIELDS.WEAPON_PROFICIENCIES];
    const ap = fm[FM_FIELDS.ARMOR_PROFICIENCIES];
    if (tp?.length) lines.push(`**Tool Proficiencies:** ${tp.join(", ")}`);
    if (wp?.length) lines.push(`**Weapon Proficiencies:** ${wp.join(", ")}`);
    if (ap?.length) lines.push(`**Armor Proficiencies:** ${ap.join(", ")}`);
    lines.push(`## Traits`);
    const seen = /* @__PURE__ */ new Set();
    for (const trait of fm.traits || []) {
      lines.push(`##### ${trait}`);
      const ent = primary.entries?.find((e) => e.name === trait);
      if (ent?.entries) {
        ent.entries.forEach((sub, idx) => {
          let blk;
          if (sub.type === "table") blk = renderMarkdownTable(sub);
          else if (sub.type === "list") blk = sub.items.map((it) => typeof it === "string" ? `- ${replace5eTags(it)}` : `- ${it.name}`).join("\n");
          else if (typeof sub === "string") blk = replace5eTags(sub);
          if (blk && !seen.has(blk)) {
            lines.push(blk);
            seen.add(blk);
            if (ent.entries.length > 1 && idx < ent.entries.length - 1) lines.push("");
          }
        });
      }
    }
    const subs = kids;
    if (subs.length) {
      out.push({
        path: `Species/${safeName}/${safeName}.md`,
        content: `---
${yaml}
---

${lines.join("\n")}`
      });
      const subFolder = `Species/${safeName}/Subspecies`;
      for (const sr of subs) {
        const display = sr.name.replace(/;/g, ":");
        const subLines = [`# ${display}`];
        if (Array.isArray(sr.ability)) {
          const bonuses = { str: 0, dex: 0, con: 0, int: 0, wis: 0, cha: 0 };
          let chooseOpt = null;
          for (const obj of sr.ability) {
            if ("choose" in obj) chooseOpt = obj.choose;
            else for (const [k, v] of Object.entries(obj)) bonuses[k] += v;
          }
          const pairs = Object.entries(bonuses);
          const parts = pairs.filter(([, v]) => v !== 0).map(([k, v]) => `${k.toUpperCase()} ${v >= 0 ? "+" : ""}${v}`);
          if (chooseOpt?.count) parts.push(`CHOOSE ${chooseOpt.count} from ${chooseOpt.from.map((s) => s.toUpperCase()).join(", ")}`);
          if (parts.length) subLines.push(`**Ability Scores:** ${parts.join(", ")}`);
        }
        for (const entry of sr.entries || []) {
          subLines.push(formatEntry(entry));
          subLines.push("");
        }
        const subYaml = serializeFrontmatter(buildFM(sr, SPECIES_META_DEFS), SPECIES_META_DEFS);
        out.push({
          path: `${subFolder}/${slug(sr.name)}.md`,
          content: `---
${subYaml}
---

${subLines.join("\n")}`
        });
      }
    } else {
      out.push({
        path: `Species/${safeName}.md`,
        content: `---
${yaml}
---

${lines.join("\n")}`
      });
    }
  }
  return out.sort((a, b) => a.path.localeCompare(b.path));
}

// src/parsers/5e-2014/classes.ts
function formatFeatureLink(name) {
  const ignore = ["Ability Score Improvement", "Archetype Feature", "Subclass Feature"];
  if (ignore.some((sub) => name.toLowerCase().includes(sub.toLowerCase()))) {
    return name;
  }
  const anchor = name.replace(/[^\w\s]/g, "").replace(/-/g, " ").replace(/\s+/g, " ").trim().replace(/\b\w/g, (l) => l.toUpperCase());
  return `[[#${anchor}]]`;
}
var OPT_FEATURE_TYPE_TO_FULL = {
  AI: "Artificer Infusion",
  ED: "Elemental Discipline",
  EI: "Eldritch Invocation",
  MM: "Metamagic",
  MV: "Maneuver",
  "MV:B": "Maneuver, Battle Master",
  "MV:C2-UA": "Maneuver, Cavalier V2 (UA)",
  "AS:V1-UA": "Arcane Shot, V1 (UA)",
  "AS:V2-UA": "Arcane Shot, V2 (UA)",
  AS: "Arcane Shot",
  OTH: "Other",
  "FS:F": "Fighting Style; Fighter",
  "FS:B": "Fighting Style; Bard",
  "FS:P": "Fighting Style; Paladin",
  "FS:R": "Fighting Style; Ranger",
  PB: "Pact Boon",
  OR: "Onomancy Resonant",
  RN: "Rune Knight Rune",
  AF: "Alchemical Formula",
  TT: "Traveler's Trick"
};
function parseClassFile(json, editionId, fileName, optionalFeatures) {
  json._editionId = editionId;
  const cls = Array.isArray(json.class) ? json.class[0] : json;
  const className = typeof cls.name === "string" ? cls.name : fileName ? fileName.replace(/^class-/, "").replace(/\.json$/, "") : "Unknown";
  const subclassFiles = [];
  const PROF_BONUS_BY_LEVEL = [
    "+2",
    "+2",
    "+2",
    "+2",
    "+3",
    "+3",
    "+3",
    "+3",
    "+4",
    "+4",
    "+4",
    "+4",
    "+5",
    "+5",
    "+5",
    "+5",
    "+6",
    "+6",
    "+6",
    "+6"
  ];
  const hdNum = cls.hd?.number ?? 1;
  const hdFaces = cls.hd?.faces ?? 6;
  const hdStr = `${hdNum}d${hdFaces}`;
  const hdMax = hdNum * hdFaces;
  const hdAvg = Math.ceil((hdFaces + 1) / 2);
  const baseFM = buildFM(cls, CLASS_META_DEFS);
  const fm = { ...baseFM, hd: hdStr };
  const yaml = serializeFrontmatter(fm, CLASS_META_DEFS);
  const lines = [];
  lines.push(`# ${className}`);
  if (cls.source) lines.push(`**Source:** ${cls.source}`);
  lines.push(``);
  lines.push(`---`);
  lines.push(`## Hit Points`);
  lines.push(`**Hit Dice:** ${hdStr} per ${className} level`);
  lines.push(`**Hit Points at 1st Level:** ${hdMax} + your Constitution modifier`);
  lines.push(
    `**Hit Points at Higher Levels:** ${hdStr} (or ${hdAvg}) + your Constitution modifier per level after 1st`
  );
  lines.push(``);
  lines.push(`---`);
  lines.push(`## Proficiencies`);
  const sp = cls.startingProficiencies ?? {};
  if (Array.isArray(sp.armor) && sp.armor.length) {
    lines.push(`- **Armor:** ${sp.armor.join(", ")}`);
  }
  const weaponList = unifiedWeaponProfs(sp);
  if (weaponList.length) {
    lines.push(`- **Weapons:** ${weaponList.join(", ")}`);
  }
  const toolList = unifiedToolProfs(sp);
  if (toolList.length) {
    lines.push(`- **Tools:** ${toolList.join(", ")}`);
  }
  const saves = Array.isArray(cls.proficiency) ? cls.proficiency.map(
    (k) => ({
      str: "Strength",
      dex: "Dexterity",
      con: "Constitution",
      int: "Intelligence",
      wis: "Wisdom",
      cha: "Charisma"
    })[k] || k.toUpperCase()
  ) : [];
  if (saves.length) {
    lines.push(`- **Saving Throws:** ${saves.join(", ")}`);
  }
  {
    const rawSkills = Array.isArray(sp.skillProficiencies) ? sp.skillProficiencies : Array.isArray(sp.skills) ? sp.skills : Array.isArray(sp.skillProf) ? sp.skillProf : [];
    const choiceEntry = rawSkills.find(
      (e) => e && (typeof e.choose === "object" || typeof e.any === "number")
    );
    if (choiceEntry) {
      const count = choiceEntry.choose?.count ?? choiceEntry.any ?? 1;
      const options = Array.isArray(choiceEntry.choose?.from) ? choiceEntry.choose.from.map(
        (s) => (
          // title-case each word (or just use s)
          s.split(" ").map((w) => w[0].toUpperCase() + w.slice(1)).join(" ")
        )
      ) : SKILL_OPTIONS;
      lines.push(`- **Skills (Choose ${count}):** ${options.join(", ")}`);
    } else {
      const flat = unifiedSkills2(sp);
      if (flat.length) {
        lines.push(`- **Skills:** ${flat.join(", ")}`);
      }
    }
  }
  if (Array.isArray(cls.startingEquipment)) {
    lines.push(`
### Equipment`);
    cls.startingEquipment.filter((e) => typeof e === "string").forEach((item) => lines.push(`- ${item}`));
  }
  const progGroups = cls.classTableGroups ?? [];
  const maxLevel = 20;
  if (!progGroups.length) {
    lines.push(`*(No class table provided for this class.)*`);
  } else {
    const featuresByLevel2 = {};
    for (const feat of cls.classFeatures ?? []) {
      const raw = typeof feat === "object" && feat.classFeature ? feat.classFeature : String(feat);
      const [name, , , lvlStr] = raw.split("|");
      const lvl = Number(lvlStr ?? 0);
      if (!featuresByLevel2[lvl]) featuresByLevel2[lvl] = [];
      featuresByLevel2[lvl].push(name);
    }
    const allLabelsSet = /* @__PURE__ */ new Set();
    const rowMaps = {};
    for (const group of progGroups) {
      const labels = Array.isArray(group.colLabels) ? group.colLabels.map((l) => replace5eTags(l)) : [];
      const rows = Array.isArray(group.rows) ? group.rows : Array.isArray(group.rowsSpellProgression) ? group.rowsSpellProgression : [];
      if (!labels.length || !rows.length) continue;
      for (let lvl = 0; lvl < rows.length; lvl++) {
        const levelNum = lvl + 1;
        if (!rowMaps[levelNum]) rowMaps[levelNum] = {};
        const rowMap = rowMaps[levelNum];
        const cells = rows[lvl];
        for (let i = 0; i < labels.length; i++) {
          const label = labels[i];
          let val = "";
          const cell = cells[i];
          if (Array.isArray(cell)) {
            val = cell.join(", ");
          } else if (cell && typeof cell === "object" && "value" in cell) {
            val = String(cell.value);
          } else {
            val = String(cell ?? "");
          }
          allLabelsSet.add(label);
          rowMap[label] = val;
        }
      }
    }
    const allLabels = Array.from(allLabelsSet).filter(
      (lbl) => !/Cantrips Known|Spells Known|\d+(st|nd|rd|th)/.test(lbl)
    );
    const mergedLabels = ["Level", "Proficiency Bonus", "Class Features", ...allLabels];
    const mergedRows = [];
    for (let lvl = 1; lvl <= maxLevel; lvl++) {
      const featureList = (featuresByLevel2[lvl] ?? []).map(formatFeatureLink);
      const rowMap = rowMaps[lvl] ?? {};
      mergedRows.push([
        lvl.toString(),
        PROF_BONUS_BY_LEVEL[lvl - 1] || "",
        featureList.join(", ").replace(/\|/g, "&#124;"),
        ...allLabels.map((label) => rowMap[label] ?? "")
      ]);
    }
    lines.push(`
> [!example]- Class Progression Table`);
    lines.push(
      renderMarkdownTable({
        type: "table",
        caption: "",
        colLabels: mergedLabels,
        rows: mergedRows
      })
    );
  }
  const csGroup = progGroups.find(
    (g) => Array.isArray(g.colLabels) && g.colLabels.some((lbl) => /Cantrips Known|Spells Known/.test(String(lbl)))
  );
  const slotGroup = progGroups.find(
    (g) => Array.isArray(g.colLabels) && g.title === "Spell Slots per Spell Level"
  );
  if (csGroup && slotGroup) {
    const csLabels = csGroup.colLabels.map((l) => replace5eTags(l));
    const slotLabels = slotGroup.colLabels.map((l) => replace5eTags(l));
    const csRows = csGroup.rows || [];
    const slotRows = slotGroup.rowsSpellProgression || [];
    const colLabels = ["Level", ...csLabels, ...slotLabels];
    const spellRows = [];
    for (let i = 0; i < Math.max(csRows.length, slotRows.length); i++) {
      const lvl = String(i + 1);
      const csCells = csRows[i] ? csRows[i].map(String) : csLabels.map((_) => "");
      const slotCells = slotRows[i] ? slotRows[i].map(String) : slotLabels.map((_) => "");
      spellRows.push([lvl, ...csCells, ...slotCells]);
    }
    lines.push(`
> [!tip]- Spell Progression Table`);
    lines.push(
      renderMarkdownTable({
        type: "table",
        caption: "",
        colLabels,
        rows: spellRows
      })
    );
  }
  const subs = Array.isArray(json.subclass) ? json.subclass : [];
  const subclassFeatures = Array.isArray(json.subclassFeature) ? json.subclassFeature : json.lookup?.subclassFeature ?? [];
  for (const sc of subs) {
    const subclassName = sc.name;
    const subLines = [];
    subLines.push(`# ${subclassName}`);
    subLines.push(`**Parent Class:** [[${className}]]`);
    if (sc.source) subLines.push(`**Source:** ${sc.source}`);
    subLines.push(``);
    const intro = subclassFeatures.find(
      (f) => f.name === sc.name && f.level === 3 && f.subclassShortName === sc.shortName && f.subclassSource === sc.source
    );
    if (intro?.entries?.length) {
      const introText = Array.isArray(intro.entries) ? intro.entries.map(
        (e) => typeof e === "string" ? replace5eTags(e) : formatEntry(e)
      ).join("\n\n") : formatEntry(intro.entries);
      subLines.push(introText, ``);
    }
    const code = Object.entries(OPT_FEATURE_TYPE_TO_FULL).find(
      ([, full]) => full.toLowerCase().includes(subclassName.toLowerCase())
    )?.[0];
    if (code) {
      const matches = optionalFeatures.filter(
        (of) => Array.isArray(of.featureType) && of.featureType.includes(code)
      );
      if (matches.length) {
        subLines.push(`## ${subclassName} Optional Features`);
        for (const feat of matches) {
          for (const entry of feat.entries) {
            const txt = typeof entry === "string" ? replace5eTags(entry) : formatEntry(entry);
            subLines.push(`**${feat.name}:** ${txt}`);
          }
          subLines.push(``);
        }
      }
    }
    const prog = sc.subclassTableGroups ?? [];
    if (prog.length) {
      const labels = /* @__PURE__ */ new Set();
      const rowsMap = {};
      for (const g of prog) {
        const cols = (g.colLabels ?? []).map(replace5eTags);
        const rows = Array.isArray(g.rows) ? g.rows : Array.isArray(g.rowsSpellProgression) ? g.rowsSpellProgression : [];
        rows.forEach((r, i) => {
          const lvl = i + 1;
          rowsMap[lvl] ?? (rowsMap[lvl] = {});
          r.forEach((c, j) => {
            const lab = cols[j];
            if (!lab) return;
            labels.add(lab);
            rowsMap[lvl][lab] = typeof c === "object" && c !== null && "value" in c ? String(c.value) : String(c ?? "");
          });
        });
      }
      const hdrs = Array.from(labels);
      subLines.push(`## Subclass Progression`);
      subLines.push(renderMarkdownTable({
        type: "table",
        caption: "",
        colLabels: ["Level", ...hdrs],
        rows: Array.from({ length: 20 }, (_, i) => {
          const lvl = i + 1;
          return [String(lvl), ...hdrs.map((h) => rowsMap[lvl]?.[h] ?? "")];
        })
      }));
    }
    const featsByLvl = {};
    for (const f of subclassFeatures) {
      if (f.subclassShortName === sc.shortName && f.subclassSource === sc.source && f.className === className) {
        const lvl = f.level ?? 0;
        ;
        (featsByLvl[lvl] ?? (featsByLvl[lvl] = [])).push(f);
      }
    }
    for (const lvl of Object.keys(featsByLvl).map(Number).sort((a, b) => a - b)) {
      subLines.push(`---`, `## Level ${lvl}`);
      for (const f of featsByLvl[lvl]) {
        subLines.push(`### ${f.name}`);
        for (const ent of Array.isArray(f.entries) ? f.entries : [f.entries]) {
          if (typeof ent === "string") {
            subLines.push(replace5eTags(ent));
            continue;
          }
          if (ent.type === "entries" && /^Maneuvers$/i.test(ent.name)) {
            subLines.push(`##### ${ent.name}`);
            for (const txt of Array.isArray(ent.entries) ? ent.entries : [ent.entries]) {
              subLines.push(typeof txt === "string" ? replace5eTags(txt) : formatEntry(txt));
            }
            const code2 = Object.entries(OPT_FEATURE_TYPE_TO_FULL).find(
              ([, full]) => full.toLowerCase().includes(subclassName.toLowerCase())
            )?.[0];
            if (code2) {
              const matches = optionalFeatures.filter(
                (of) => Array.isArray(of.featureType) && of.featureType.includes(code2)
              );
              for (const featDef of matches) {
                for (const sub of featDef.entries) {
                  const line = typeof sub === "string" ? replace5eTags(sub) : formatEntry(sub);
                  subLines.push(`**${featDef.name}:** ${line}`);
                }
                subLines.push("");
              }
            }
            continue;
          }
          if (ent.type === "entries" && ent.name) {
            subLines.push(`##### ${ent.name}`);
            for (const e2 of Array.isArray(ent.entries) ? ent.entries : [ent.entries]) {
              subLines.push(formatEntry(e2));
            }
            continue;
          }
          if (ent.type === "inset" && ent.name) {
            const inner = Array.isArray(ent.entries) ? ent.entries : [ent.entries];
            subLines.push(`> **${ent.name}**`);
            inner.forEach((e2) => subLines.push(`> ${formatEntry(e2)}`));
            continue;
          }
          const fb = formatEntry(ent);
          if (fb) subLines.push(fb);
        }
      }
    }
    const subclassContent = subLines.join("\n\n").replace(/\n{3,}/g, "\n\n");
    subclassFiles.push({
      path: `Classes/${className}/Subclasses/${subclassName}.md`,
      content: subclassContent
    });
  }
  if (subs.length) {
    const links = subs.map(
      (sc) => `[[Subclasses/${sc.name.replace(/[\\/]/g, "-")}|${sc.name}]]`
    );
    lines.push(`
**Subclasses:** ${links.join(", ")}`);
  }
  const allFeatures = Array.isArray(json.classFeature) ? json.classFeature : json.lookup?.classFeature ?? [];
  const featuresByLevel = {};
  for (const entry of allFeatures) {
    if (entry.className !== className) continue;
    const lvl = entry.level ?? 0;
    if (!featuresByLevel[lvl]) featuresByLevel[lvl] = [];
    featuresByLevel[lvl].push(entry);
  }
  lines.push(``);
  lines.push(`---`);
  lines.push(`## Level Features`);
  const levels = Object.keys(featuresByLevel).map((n) => +n).sort((a, b) => a - b);
  for (const lvl of levels) {
    lines.push(`### Level ${lvl}`);
    for (const feat of featuresByLevel[lvl]) {
      lines.push(`#### ${feat.name}`);
      const entries = Array.isArray(feat.entries) ? feat.entries : [feat.entries];
      for (const ent of entries) {
        if (typeof ent === "string") {
          const txt = formatEntry(ent).trim();
          if (txt === "{" || txt === "}") continue;
          lines.push(txt);
          continue;
        }
        if (ent.type === "list" && Array.isArray(ent.items)) {
          for (const item of ent.items) {
            lines.push(`- ${replace5eTags(item)}`);
          }
          continue;
        }
        if (ent.type === "options") {
          if (ent.count) {
            lines.push("");
            lines.push(`**Choose ${ent.count} of the following options:**`);
            lines.push("");
          }
          for (const optRef of Array.isArray(ent.entries) ? ent.entries : [ent.entries]) {
            if (optRef.type === "refOptionalfeature") {
              const [optName, optSrc] = optRef.optionalfeature.split("|");
              const featDef = optionalFeatures.find(
                (f) => f.name === optName && (!optSrc || f.source === optSrc)
              );
              if (featDef) {
                featDef.entries.forEach((subEntry, idx) => {
                  const text = typeof subEntry === "string" ? replace5eTags(subEntry) : formatEntry(subEntry);
                  if (idx === 0) {
                    lines.push(`- **${featDef.name}:** ${text}`);
                  } else {
                    lines.push(`  - ${text}`);
                  }
                });
                lines.push("");
              } else {
                lines.push(`**${optName}:**`);
              }
            } else {
              const txt = formatEntry(optRef);
              if (txt) lines.push(`- ${txt}`);
            }
          }
          continue;
        }
        if (ent.type === "refOptionalfeature") {
          const [name] = ent.optionalfeature.split("|");
          lines.push(`- [[${name}|${name}]]`);
          continue;
        }
        if (ent.type === "entries" && ent.name) {
          lines.push(`##### ${ent.name}`);
          const inner = Array.isArray(ent.entries) ? ent.entries : [ent.entries];
          for (const e2 of inner) {
            lines.push(formatEntry(e2));
          }
          continue;
        }
        const fallback = formatEntry(ent);
        if (fallback) lines.push(fallback);
      }
      lines.push(``);
    }
    lines.push(`---`);
  }
  let content = `---
${yaml}
---

${lines.join("\n")}`;
  content = replace5eTags(content);
  content = content.replace(/\n{3,}/g, "\n\n").replace(/\n +\n/g, "\n\n");
  return [
    {
      path: `Classes/${className}/${className}.md`,
      content
    },
    ...subclassFiles
  ];
}

// src/parsers/5e-2014/rules.ts
function parseActionsFile(json, editionId) {
  if (!Array.isArray(json.action)) return [];
  const lines = [];
  for (const action of json.action) {
    lines.push(`## ${action.name}`);
    const entries = Array.isArray(action.entries) ? action.entries : [action.entries];
    for (const entry of entries) {
      if (!entry) continue;
      if (typeof entry === "string") {
        const paras = entry.split(/\n{2,}/);
        for (const para of paras) {
          const t = para.trim();
          if (t) {
            lines.push(replace5eTags(t));
            lines.push("");
          }
        }
      } else if (entry.type === "list" && Array.isArray(entry.items)) {
        for (const item of entry.items) {
          lines.push(`- ${replace5eTags(item)}`);
        }
        lines.push("");
      } else if ((entry.type === "entries" || entry.type === "inset") && Array.isArray(entry.entries)) {
        lines.push(`### ${entry.name}`);
        for (const sub of entry.entries) {
          if (typeof sub === "string") {
            const ps = sub.split(/\n{2,}/);
            for (const p of ps) {
              const tt = p.trim();
              if (tt) {
                lines.push(replace5eTags(tt));
                lines.push("");
              }
            }
          } else if (sub.type === "list" && Array.isArray(sub.items)) {
            for (const li of sub.items) {
              lines.push(`- ${replace5eTags(li)}`);
            }
            lines.push("");
          } else {
            const txt = Array.isArray(sub) ? sub.join(" ") : typeof sub === "object" ? JSON.stringify(sub) : String(sub);
            lines.push(replace5eTags(txt));
            lines.push("");
          }
        }
      } else if (entry.type === "table" && Array.isArray(entry.rows)) {
        const headers = entry.colLabels || [];
        lines.push(`| ${headers.join(" | ")} |`);
        lines.push(`| ${headers.map(() => "---").join(" | ")} |`);
        for (const row of entry.rows) {
          lines.push(`| ${row.join(" | ")} |`);
        }
        lines.push("");
      } else {
        const txt = Array.isArray(entry) ? entry.join(" ") : typeof entry === "object" ? JSON.stringify(entry) : String(entry);
        lines.push(replace5eTags(txt));
        lines.push("");
      }
    }
    lines.push("---");
  }
  const cleaned = lines.reduce((acc, curr) => {
    if (curr === "" && acc.length && acc[acc.length - 1] === "") return acc;
    return acc.concat(curr);
  }, []);
  return [
    {
      path: "Rules and Reference/Actions.md",
      content: cleaned.join("\n").trim() + "\n"
    }
  ];
}
function parseConditionsDiseasesFile(json, editionId) {
  const outputs = [];
  const processItems = (items, outPath) => {
    const lines = [];
    for (const item of items) {
      lines.push(`## ${item.name}`);
      const entries = Array.isArray(item.entries) ? item.entries : [item.entries];
      for (const entry of entries) {
        if (!entry) continue;
        if (typeof entry === "string") {
          const paras = entry.split(/\n{2,}/);
          for (const para of paras) {
            const t = para.trim();
            if (t) {
              lines.push(replace5eTags(t));
              lines.push("");
            }
          }
        } else if (entry.type === "list" && Array.isArray(entry.items)) {
          for (const txt of entry.items) {
            lines.push(`- ${replace5eTags(txt)}`);
          }
          lines.push("");
        } else if (entry.type === "table" && Array.isArray(entry.rows)) {
          const headers = entry.colLabels || [];
          lines.push(`| ${headers.join(" | ")} |`);
          lines.push(`| ${headers.map(() => "---").join(" | ")} |`);
          for (const row of entry.rows) {
            lines.push(`| ${row.join(" | ")} |`);
          }
          lines.push("");
        } else if (entry.type === "entries" && Array.isArray(entry.entries)) {
          lines.push(`### ${entry.name}`);
          for (const sub of entry.entries) {
            const txt = typeof sub === "string" ? sub : String(sub);
            lines.push(replace5eTags(txt));
            lines.push("");
          }
        } else {
          const txt = Array.isArray(entry) ? entry.join(" ") : String(entry);
          lines.push(replace5eTags(txt));
          lines.push("");
        }
      }
      lines.push("---");
    }
    const cleaned = lines.reduce((acc, curr) => {
      if (curr === "" && acc.length && acc[acc.length - 1] === "") return acc;
      return acc.concat(curr);
    }, []);
    outputs.push({ path: outPath, content: cleaned.join("\n").trim() + "\n" });
  };
  processItems(json.condition || [], "Rules and Reference/Conditions.md");
  processItems(json.disease || [], "Rules and Reference/Diseases.md");
  return outputs;
}
function parseSensesFile(json, editionId) {
  const items = Array.isArray(json.sense) ? json.sense : Array.isArray(json.senses) ? json.senses : [];
  if (!items.length) return [];
  const lines = [];
  for (const sense of items) {
    lines.push(`## ${sense.name}`);
    const entries = Array.isArray(sense.entries) ? sense.entries : [sense.entries];
    for (const entry of entries) {
      if (!entry) continue;
      if (typeof entry === "string") {
        const paras = entry.split(/\n{2,}/);
        for (const para of paras) {
          const t = para.trim();
          if (t) {
            lines.push(replace5eTags(t));
            lines.push("");
          }
        }
      } else if (entry.type === "list" && Array.isArray(entry.items)) {
        for (const item of entry.items) {
          lines.push(`- ${replace5eTags(item)}`);
        }
        lines.push("");
      } else if ((entry.type === "entries" || entry.type === "inset") && Array.isArray(entry.entries)) {
        lines.push(`### ${entry.name}`);
        for (const sub of entry.entries) {
          const txt = typeof sub === "string" ? sub : String(sub);
          lines.push(replace5eTags(txt));
          lines.push("");
        }
      } else if (entry.type === "table" && Array.isArray(entry.rows)) {
        const headers = entry.colLabels || [];
        lines.push(`| ${headers.join(" | ")} |`);
        lines.push(`| ${headers.map(() => "---").join(" | ")} |`);
        for (const row of entry.rows) {
          lines.push(`| ${row.join(" | ")} |`);
        }
        lines.push("");
      } else {
        const txt = Array.isArray(entry) ? entry.join(" ") : String(entry);
        lines.push(replace5eTags(txt));
        lines.push("");
      }
    }
    lines.push("---");
  }
  const cleaned = lines.reduce((acc, curr) => {
    if (curr === "" && acc.length && acc[acc.length - 1] === "") return acc;
    return acc.concat(curr);
  }, []);
  return [
    {
      path: "Rules and Reference/Senses.md",
      content: cleaned.join("\n").trim() + "\n"
    }
  ];
}
function parseSkillsFile(json, editionId) {
  const items = Array.isArray(json.skill) ? json.skill : Array.isArray(json.skills) ? json.skills : [];
  if (!items.length) return [];
  const lines = [];
  for (const skill of items) {
    lines.push(`## ${skill.name}`);
    if (skill.ability) {
      lines.push(`*Ability: ${skill.ability}*`);
      lines.push("");
    }
    const entries = Array.isArray(skill.entries) ? skill.entries : [skill.entries];
    for (const entry of entries) {
      if (!entry) continue;
      if (typeof entry === "string") {
        const paras = entry.split(/\n{2,}/);
        for (const para of paras) {
          const t = para.trim();
          if (t) {
            lines.push(replace5eTags(t));
            lines.push("");
          }
        }
      } else if (entry.type === "list" && Array.isArray(entry.items)) {
        for (const item of entry.items) {
          lines.push(`- ${replace5eTags(item)}`);
        }
        lines.push("");
      } else {
        const txt = Array.isArray(entry) ? entry.join(" ") : String(entry);
        lines.push(replace5eTags(txt));
        lines.push("");
      }
    }
    lines.push("---");
  }
  const cleaned = lines.reduce((acc, curr) => {
    if (curr === "" && acc.length && acc[acc.length - 1] === "") return acc;
    return acc.concat(curr);
  }, []);
  return [
    {
      path: "Rules and Reference/Skills.md",
      content: cleaned.join("\n").trim() + "\n"
    }
  ];
}

// src/parsers/5e-2014/feats.ts
function parseFeatsFile(json, editionId) {
  const feats = Array.isArray(json.feat) ? json.feat : Array.isArray(json.feats) ? json.feats : [];
  return feats.map((feat) => {
    const lines = [];
    const fm = buildFM({ ...feat, _editionId: editionId }, FEATS_META_DEFS);
    lines.push("---");
    lines.push(serializeFrontmatter(fm, FEATS_META_DEFS));
    lines.push("---", "");
    lines.push(`# ${feat.name}`, "");
    const prereqs = [];
    if (Array.isArray(feat.prerequisite)) {
      feat.prerequisite.forEach((pr) => {
        if (pr.level) prereqs.push(`Level ${pr.level}`);
        if (Array.isArray(pr.feat)) {
          pr.feat.forEach((f) => {
            const name = f.split("|")[0].replace(/\b\w/g, (c) => c.toUpperCase());
            prereqs.push(`Prerequisite: [[${name}]]`);
          });
        }
      });
    }
    if (feat.spellcastingPrepared) prereqs.push(`Prerequisite: Spellcaster`);
    if (Array.isArray(feat.toolProficiencies)) {
      feat.toolProficiencies.forEach((tp) => {
        Object.entries(tp).forEach(([key]) => {
          if (key === "anyArtisansTool") {
            prereqs.push(`Prerequisite: Proficient with an artisan's tool`);
          } else {
            prereqs.push(`Prerequisite: Proficient with ${key.replace(/([A-Z])/g, " $1").trim()}`);
          }
        });
      });
    }
    if (Array.isArray(feat.armorProficiencies)) {
      feat.armorProficiencies.forEach((arm) => {
        const armStr = typeof arm === "string" ? arm : JSON.stringify(arm);
        prereqs.push(`Prerequisite: Proficient with ${armStr.replace(/([A-Z])/g, " $1").trim()}`);
      });
    }
    if (feat.race) prereqs.push(`Prerequisite: ${feat.race}`);
    if (prereqs.length) {
      lines.push("**Prerequisites**");
      prereqs.forEach((p) => lines.push(`- ${p}`));
      lines.push("");
    }
    const entries = Array.isArray(feat.entries) ? feat.entries : [feat.entries];
    entries.forEach((entry) => {
      if (!entry) return;
      if (typeof entry === "string") {
        entry.split(/\n{2,}/).forEach((p) => {
          const t = p.trim();
          if (t) {
            lines.push(replace5eTags(t));
            lines.push("");
          }
        });
      } else if (entry.type === "list" && Array.isArray(entry.items)) {
        entry.items.forEach((it) => {
          if (typeof it === "string") {
            lines.push(`- ${replace5eTags(it)}`);
          } else if (it.type === "item" && it.name) {
            lines.push(`- **${it.name}**`);
            const subs = Array.isArray(it.entries) ? it.entries : [it.entries];
            subs.forEach(
              (s) => lines.push(`  - ${replace5eTags(typeof s === "string" ? s : JSON.stringify(s))}`)
            );
          }
        });
        lines.push("");
      } else if (entry.type === "inset") {
        lines.push(`- *${entry.name}*`);
        const subs = Array.isArray(entry.entries) ? entry.entries : [entry.entries];
        subs.forEach((s) => lines.push(`  - ${replace5eTags(s)}`));
        lines.push("");
      } else if ((entry.type === "section" || entry.type === "entries") && Array.isArray(entry.entries)) {
        if (entry.name) {
          lines.push(`## ${entry.name}`);
          lines.push("");
        }
        entry.entries.forEach((s) => {
          lines.push(replace5eTags(typeof s === "string" ? s : JSON.stringify(s)));
          lines.push("");
        });
      } else if (entry.type === "table" && Array.isArray(entry.rows)) {
        const hdr = entry.colLabels || [];
        lines.push(`| ${hdr.join(" | ")} |`);
        lines.push(`| ${hdr.map(() => "---").join(" | ")} |`);
        entry.rows.forEach(
          (row) => lines.push(`| ${row.join(" | ")} |`)
        );
        lines.push("");
      }
    });
    return {
      path: `Player Build/Feats/${feat.name}.md`,
      content: lines.join("\n").trim() + "\n"
    };
  });
}

// src/parsers/5e-2014/backgrounds.ts
function parseBackgroundsFile(json, editionId) {
  const raw = Array.isArray(json.background) ? json.background : Array.isArray(json.backgrounds) ? json.backgrounds : [];
  const backgrounds = raw.filter((bg) => {
    const nm = bg.name || "";
    return !nm.startsWith("Variant") && !nm.includes("Baldur's Gate");
  });
  const outputs = [];
  backgrounds.forEach((bg) => {
    const lines = [];
    const fm = buildFM(bg, BACKGROUND_META_DEFS);
    const extraTraits = Array.isArray(bg.entries) ? bg.entries.filter((e) => e.data?.isFeature && typeof e.name === "string").map((e) => {
      const name = e.name.replace(/^Feature:\s*/, "");
      return `[[${bg.name}#${name}]]`;
    }) : [];
    const yaml = serializeFrontmatter(fm, BACKGROUND_META_DEFS);
    lines.push("---", yaml, "---", "");
    lines.push(`# ${bg.name}`, "");
    if (Array.isArray(bg.skillProficiencies) && bg.skillProficiencies.length) {
      const skills = [];
      bg.skillProficiencies.forEach((ent) => {
        if (typeof ent === "string") {
          skills.push(cap2(ent));
        } else if (ent.choose && Array.isArray(ent.choose.from)) {
          skills.push(`Choose ${ent.choose.amount} from ${ent.choose.from.join(", ")}`);
        } else {
          Object.entries(ent).filter(([, v]) => v === true).forEach(([k]) => skills.push(cap2(k)));
        }
      });
      lines.push(`**Skill Proficiencies:** ${skills.join(", ")}`, "");
    }
    if (Array.isArray(bg.languageProficiencies) && bg.languageProficiencies.length) {
      const langs = [];
      bg.languageProficiencies.forEach((ent) => {
        if (ent.anyStandard) {
          langs.push(`${ent.anyStandard} of your choice`);
        } else {
          Object.entries(ent).filter(([, v]) => v === true).forEach(([k]) => langs.push(cap2(k)));
        }
      });
      lines.push(`**Languages:** ${langs.join(", ")}`, "");
    }
    if (Array.isArray(bg.toolProficiencies) && bg.toolProficiencies.length) {
      const tools = [];
      bg.toolProficiencies.forEach((ent) => {
        if (ent.choose && Array.isArray(ent.choose.from)) {
          const list = ent.choose.from.map(humanize).join(", ");
          tools.push(`Choose ${ent.choose.count} from ${list}`);
          return;
        }
        if (typeof ent === "string") {
          tools.push(humanize(ent));
          return;
        }
        Object.entries(ent).filter(([_, v]) => v === true).forEach(([k]) => tools.push(humanize(k)));
      });
      lines.push(`**Tool Proficiencies:** ${tools.join(", ")}`, "");
    }
    if (Array.isArray(bg.startingEquipment) && bg.startingEquipment.length) {
      lines.push(`**Equipment:**`);
      bg.startingEquipment.forEach((grp) => {
        if (Array.isArray(grp._)) {
          grp._.forEach((it) => lines.push(`- ${fmtItem(it)}`));
        }
        ["a", "b"].forEach((key) => {
          if (Array.isArray(grp[key])) {
            grp[key].forEach((it) => lines.push(`- ${fmtItem(it)}`));
          }
        });
      });
      lines.push("");
    }
    if (Array.isArray(bg.entries)) {
      bg.entries.forEach((entry) => {
        if (entry.type === "list" && entry.style === "list-hang-notitle") {
          return;
        }
        if (entry.name) {
          const header = entry.data?.isFeature ? entry.name.replace(/^Feature:\s*/, "") : entry.name;
          lines.push(`## ${header}`, "");
        }
        if (Array.isArray(entry.entries)) {
          entry.entries.forEach((e) => {
            if (typeof e === "string") {
              lines.push(replace5eTags(e), "");
            } else if (e.type === "list" && Array.isArray(e.items)) {
              e.items.forEach(
                (it) => lines.push(`- ${replace5eTags(it.entry ?? it)}`)
              );
              lines.push("");
            } else if (e.type === "table") {
              const tbl = renderMarkdownTable(e);
              if (tbl) lines.push(tbl, "");
            }
          });
        } else if (entry.type === "list" && Array.isArray(entry.items)) {
          entry.items.forEach(
            (it) => lines.push(`- ${replace5eTags(it.entry ?? it)}`)
          );
          lines.push("");
        }
      });
    }
    outputs.push({
      path: `Player Build/Backgrounds/${bg.name}.md`,
      content: lines.join("\n").trimEnd() + "\n"
    });
  });
  return outputs;
}
function cap2(str) {
  return str.charAt(0).toUpperCase() + str.slice(1);
}
function fmtItem(item) {
  if (typeof item === "string") {
    if (item.includes("|")) {
      return replace5eTags(`{@item ${item}}`);
    }
    return replace5eTags(item);
  }
  const priceRaw = item.containsValue ?? item.value;
  if (typeof priceRaw === "number" && // make sure it’s not also an “item” or “equipmentType”
  !item.item && !item.equipmentType && !item.special) {
    const gp = priceRaw >= 100 ? priceRaw / 100 : priceRaw;
    return `${gp} gp`;
  }
  if (item.item) {
    const link = replace5eTags(`{@item ${item.item}}`);
    if (typeof priceRaw === "number") {
      const gp = priceRaw >= 100 ? priceRaw / 100 : priceRaw;
      return `${link} (${gp} gp)`;
    }
    return link;
  }
  if (typeof item.special === "string") {
    return item.special;
  }
  if (item.equipmentType) {
    switch (item.equipmentType) {
      case "toolArtisan":
        return "One type of artisan\u2019s tools (of your choice)";
      case "instrumentMusical":
        return "One type of musical instrument (of your choice)";
      case "setGaming":
        return "One set of gaming dice (of your choice)";
      default:
        return humanize(item.equipmentType);
    }
  }
  return replace5eTags(JSON.stringify(item));
}
function humanize(str) {
  const spaced = str.replace(/([a-z])([A-Z])/g, "$1 $2");
  return spaced.charAt(0).toUpperCase() + spaced.slice(1);
}

// src/parsers/5e-2014/installer.ts
var import_obsidian2 = require("obsidian");
async function listSpellFilesFromGitHub(repo) {
  const url = `https://api.github.com/repos/${repo}/contents/data/spells`;
  const res = await fetch(url);
  const data = await res.json();
  return data.filter((item) => item.type === "file" && item.name.startsWith("spells-") && item.name.endsWith(".json")).map((item) => item.name);
}
async function listBestiaryFilesFromGitHub(repo) {
  const url = `https://api.github.com/repos/${repo}/contents/data/bestiary`;
  const res = await fetch(url);
  const list = await res.json();
  const CORE_SOURCES = [
    "bestiary-phb.json",
    "bestiary-mm.json",
    "bestiary-dmg.json",
    "bestiary-xge.json",
    "bestiary-vgm.json",
    "bestiary-tce.json",
    "bestiary-egw.json",
    "bestiary-erlw.json",
    "bestiary-mtf.json",
    "bestiary-vrgr.json",
    "bestiary-cos.json",
    "bestiary-oota.json",
    "bestiary-pota.json",
    "bestiary-hotdq.json",
    "bestiary-rot.json",
    "bestiary-skt.json",
    "bestiary-tftyp.json",
    "bestiary-toa.json"
  ];
  return list.filter((item) => item.type === "file" && CORE_SOURCES.includes(item.name)).map((item) => item.name);
}
var ITEM_JSON_FILES = [
  "items-base.json",
  "items.json",
  "objects.json",
  "vehicles.json",
  "decks.json"
];
async function listItemFilesFromGitHub(repo) {
  const url = `https://api.github.com/repos/${repo}/contents/data`;
  const res = await fetch(url);
  const data = await res.json();
  return data.filter((item) => item.type === "file" && ITEM_JSON_FILES.includes(item.name)).map((item) => item.name);
}
async function listClassFilesFromGitHub(repo) {
  const url = `https://api.github.com/repos/${repo}/contents/data/class`;
  const res = await fetch(url);
  const listing = await res.json();
  return listing.filter(
    (item) => item.type === "file" && item.name.startsWith("class-") && item.name.endsWith(".json")
  ).map((item) => item.name);
}
async function ensureFolder(app, folderPath) {
  const parts = folderPath.split("/");
  let curr = "";
  for (const p of parts) {
    curr = curr ? `${curr}/${p}` : p;
    try {
      await app.vault.createFolder(curr);
    } catch {
    }
  }
}
async function importEditionData(params) {
  const { app, edition, targetPath } = params;
  const repo = edition.repo ?? "";
  {
    const spellFiles = await listSpellFilesFromGitHub(repo);
    for (const fileName of spellFiles) {
      try {
        const res = await fetch(`${edition.sourceUrl}/spells/${fileName}`);
        const json = await res.json();
        const files = parseSpellsFile(json, edition.id);
        for (const md of files) {
          const fullPath = (0, import_obsidian.normalizePath)(`${targetPath}/Spells/${md.path}`);
          const folder = fullPath.split("/").slice(0, -1).join("/");
          await ensureFolder(app, folder);
          await app.vault.adapter.write(fullPath, md.content);
        }
      } catch (e) {
        console.warn(`Failed to import spell ${fileName}:`, e);
      }
    }
  }
  {
    const bestiaryFiles = await listBestiaryFilesFromGitHub(repo);
    for (const fileName of bestiaryFiles) {
      try {
        const res = await fetch(`${edition.sourceUrl}/bestiary/${fileName}`);
        const json = await res.json();
        const parsed = parseBestiaryFile(json, edition.id);
        for (const md of parsed) {
          const fullPath = (0, import_obsidian.normalizePath)(`${targetPath}/Bestiary/${md.path}`);
          const folder = fullPath.split("/").slice(0, -1).join("/");
          await ensureFolder(app, folder);
          await app.vault.adapter.write(fullPath, md.content);
        }
      } catch (e) {
        console.warn(`Failed to import bestiary ${fileName}:`, e);
      }
    }
  }
  {
    const itemFiles = await listItemFilesFromGitHub(repo);
    for (const fn of itemFiles) {
      try {
        const res = await fetch(`${edition.sourceUrl}/${fn}`);
        const json = await res.json();
        const mdFiles = parseItemsFile(json, edition.id);
        for (const md of mdFiles) {
          const fullPath = (0, import_obsidian.normalizePath)(`${targetPath}/${md.path}`);
          const folder = fullPath.split("/").slice(0, -1).join("/");
          await ensureFolder(app, folder);
          await app.vault.adapter.write(fullPath, md.content);
        }
      } catch (e) {
        console.warn(`Failed to import items from ${fn}:`, e);
      }
    }
  }
  {
    const res = await fetch(`${edition.sourceUrl}/races.json`);
    const json = await res.json();
    const mdFiles = parseSpeciesFile(json, edition.id);
    for (const md of mdFiles) {
      const fullPath = (0, import_obsidian.normalizePath)(`${targetPath}/Player Build/${md.path}`);
      await ensureFolder(app, fullPath.split("/").slice(0, -1).join("/"));
      await app.vault.adapter.write(fullPath, md.content);
    }
  }
  let optionalFeatures = [];
  try {
    const res = await fetch(`${edition.sourceUrl}/optionalfeatures.json`);
    const raw = await res.json();
    optionalFeatures = Array.isArray(raw.optionalfeature) ? raw.optionalfeature : [];
  } catch (e) {
    console.warn("Failed to import optionalfeatures.json:", e);
  }
  {
    const classFiles = await listClassFilesFromGitHub(repo);
    for (const fileName of classFiles) {
      try {
        const res = await fetch(`${edition.sourceUrl}/class/${fileName}`);
        const json = await res.json();
        const mdFiles = parseClassFile(
          json,
          edition.id,
          fileName,
          optionalFeatures
        );
        for (const md of mdFiles) {
          const fullPath = (0, import_obsidian.normalizePath)(`${targetPath}/Player Build/${md.path}`);
          await ensureFolder(app, fullPath.split("/").slice(0, -1).join("/"));
          const existing = app.vault.getAbstractFileByPath(fullPath);
          if (existing instanceof import_obsidian2.TFile) {
            await app.vault.modify(existing, md.content);
          } else {
            await app.vault.create(fullPath, md.content);
          }
        }
      } catch (e) {
        console.warn(`Failed to import class ${fileName}:`, e);
      }
    }
  }
  {
    try {
      const res = await fetch(`${edition.sourceUrl}/actions.json`);
      const json = await res.json();
      const mdFiles = parseActionsFile(json, edition.id);
      for (const md of mdFiles) {
        const fullPath = (0, import_obsidian.normalizePath)(
          `${targetPath}/${md.path}`
        );
        const folder = fullPath.split("/").slice(0, -1).join("/");
        await ensureFolder(app, folder);
        await app.vault.adapter.write(fullPath, md.content);
      }
    } catch (e) {
      console.warn("Failed to import actions.json:", e);
    }
  }
  {
    try {
      const res = await fetch(`${edition.sourceUrl}/conditionsdiseases.json`);
      const json = await res.json();
      const mdFiles = parseConditionsDiseasesFile(json, edition.id);
      for (const md of mdFiles) {
        const fullPath = (0, import_obsidian.normalizePath)(
          `${targetPath}/${md.path}`
        );
        const folder = fullPath.split("/").slice(0, -1).join("/");
        await ensureFolder(app, folder);
        await app.vault.adapter.write(fullPath, md.content);
      }
    } catch (e) {
      console.warn("Failed to import conditionsdiseases.json:", e);
    }
  }
  {
    try {
      const res = await fetch(`${edition.sourceUrl}/senses.json`);
      const json = await res.json();
      const mdFiles = parseSensesFile(json, edition.id);
      for (const md of mdFiles) {
        const fullPath = (0, import_obsidian.normalizePath)(
          `${targetPath}/${md.path}`
        );
        const folder = fullPath.split("/").slice(0, -1).join("/");
        await ensureFolder(app, folder);
        await app.vault.adapter.write(fullPath, md.content);
      }
    } catch (e) {
      console.warn("Failed to import senses.json:", e);
    }
  }
  {
    try {
      const res = await fetch(`${edition.sourceUrl}/skills.json`);
      const json = await res.json();
      const mdFiles = parseSkillsFile(json, edition.id);
      for (const md of mdFiles) {
        const fullPath = (0, import_obsidian.normalizePath)(
          `${targetPath}/${md.path}`
        );
        const folder = fullPath.split("/").slice(0, -1).join("/");
        await ensureFolder(app, folder);
        await app.vault.adapter.write(fullPath, md.content);
      }
    } catch (e) {
      console.warn("Failed to import skills.json:", e);
    }
  }
  {
    try {
      const res = await fetch(`${edition.sourceUrl}/feats.json`);
      const json = await res.json();
      const mdFiles = parseFeatsFile(json, edition.id);
      for (const md of mdFiles) {
        const fullPath = (0, import_obsidian.normalizePath)(
          `${targetPath}/${md.path}`
        );
        const folder = fullPath.split("/").slice(0, -1).join("/");
        await ensureFolder(app, folder);
        await app.vault.adapter.write(fullPath, md.content);
      }
    } catch (e) {
      console.warn("Failed to import feats.json:", e);
    }
  }
  {
    try {
      const res = await fetch(`${edition.sourceUrl}/backgrounds.json`);
      const json = await res.json();
      const mdFiles = parseBackgroundsFile(json, edition.id);
      for (const md of mdFiles) {
        const fullPath = (0, import_obsidian.normalizePath)(`${targetPath}/${md.path}`);
        const folder = fullPath.split("/").slice(0, -1).join("/");
        await ensureFolder(app, folder);
        await app.vault.adapter.write(fullPath, md.content);
      }
    } catch (e) {
      console.warn("Failed to import backgrounds.json:", e);
    }
  }
}

// src/parsers/5e-2025/installer.ts
var installer_exports2 = {};
__export(installer_exports2, {
  importEditionData: () => importEditionData2
});
var import_obsidian3 = require("obsidian");

// src/parsers/5e-2025/helpers/sourceMap.ts
var SOURCE_NAME_MAP2 = {
  // Core rulebooks
  PHB: "Player's Handbook",
  MM: "Monster Manual",
  DMG: "Dungeon Master's Guide",
  // Official expansions & adventure modules
  CoS: "Curse of Strahd",
  OotA: "Out of the Abyss",
  PotA: "Princes of the Apocalypse",
  HotDQ: "Hoard of the Dragon Queen",
  RoT: "Rise of Tiamat",
  SKT: "Storm King's Thunder",
  TftYP: "Tales from the Yawning Portal",
  ToA: "Tomb of Annihilation",
  // Supplemental guides
  XGE: "Xanathar's Guide to Everything",
  VGM: "Volo's Guide to Monsters",
  TCE: "Tasha's Cauldron of Everything",
  EGW: "Eberron: Rising from the Last War",
  ERLW: "Explorer's Guide to Wildemount",
  MTF: "Monsters of the Multiverse",
  VRGR: "Van Richten's Guide to Ravenloft",
  // Additional sourcebooks
  AAG: "Astral Adventurer\u2019s Guide",
  AI: "Acquisitions Incorporated",
  AitFRAVFT: "Adventures in the Forgotten Realms: A Visual Field Test",
  BMT: "Big Monster Tome",
  DoDk: "Dragon of Darkkeep",
  FTD: "Fizban\u2019s Treasury of Dragons",
  GGR: "Guildmaster\u2019s Guide to Ravnica",
  GHLoE: "Ghosts of the Horizon: Light Over Elensaria",
  IDRotF: "Icewind Dale: Rime of the Frostmaiden",
  LLK: "Lost Laboratory of Kwalish",
  SatO: "Sapphire of Truth",
  SCC: "Strixhaven: Curriculum of Chaos",
  TDCSR: "The Dungeon Coach\u2019s Rulebook",
  JttRC: "Journeys through the Radiant Citadel",
  "AitFR-AVT": "Adventures in the Forgotten Realms: A Verdant Tomb",
  "AitFR-FCD": "Adventures in the Forgotten Realms: From Cyan Depths",
  RMR: "Dungeons and Dragons: Rick and Morty",
  SCAG: "Sword Coast Adventurer's Guide",
  EEPC: "Elemental Evil Player's Companion",
  MOT: "Mythic Odysseys of Theros",
  WBtW: "The Wild Beyond the Witchlight",
  BGDIA: "Baldur's Gate: Descent Into Avernus",
  ToFW: "Turn of Fortune's Wheel",
  CoA: "Chains of Asmodeus",
  CRCotN: "Critical Role: Call of the Netherdeep",
  ToD: "Tyranny of Dragons",
  MPMM: "Mordenkainen Presents: Monsters of the Multiverse",
  LoX: "Light of Xaryxis",
  QftIS: "Quests from the Infinite Staircase",
  WDH: "Waterdeep: Dragon Heist",
  WDMM: "Waterdeep: Dungeon of the Mad Mage",
  PaBTSO: "Phandelver and Below: The Shattered Obelisk",
  CM: "Candlekeep Mysteries",
  GoS: "Ghosts of Saltmarsh",
  DSotDQ: "Dragonlance: Shadow of the Dragon Queen",
  KftGV: "Keys from the Golden Vault",
  SDW: "Essentials Kit: Sleeping Dragon's Wake",
  DoSI: "Dragons of Stormwreck Isle",
  GotSF: "Giants of the Star Forge",
  DIP: "Essentials Kit: Dragon of Icespire Peak",
  SLW: "Essentials Kit: Storm Lord's Wrath",
  IMR: "Infernal Machine Rebuild",
  VEoR: "Vecna: Eve of Ruin",
  PSI: "Plane Shift: Innistrad",
  AATM: "Adventure Atlas: The Mortuary",
  PSZ: "Plane Shift: Zendikar",
  DC: "Essentials Kit: Divine Contention",
  LMoP: "Lost Mine of Phandelver",
  RMBRE: "The Lost Dungeon of Rickedness: Big Rick Energy",
  HftT: "Hunt for the Thessalhydra",
  PSX: "Plane Shift: Ixalan",
  HFStCM: "Heroes' Feast: Saving the Childrens Menu",
  SjA: "Spelljammer Academy",
  LK: "Lightning Keep",
  RtG: "Return to the Glory",
  TTP: "The Tortle Package",
  LR: "Locathah Rising",
  PSA: "Plane Shift: Amonkhet",
  OGA: "One Grung Above",
  "NRH-TLT": "Nerds Restoring Harmony: The Lost Tomb",
  "NRH-AT": "Nerds Restoring Harmony: Adventure Together",
  BGG: "Bigby Presents: Glory of the Giants",
  RoTOS: "The Rise of Tiamat Online Supplement",
  XMtS: "X Marks the Spot",
  "HAT-LMI": "Honor Among Theives: Legendary Magic Items",
  DitLCoT: "Descent into the Lost Caverns of Tsojcanth",
  "AitFR-DN": "Adventures in the Forgotten Realms: Deepest Night",
  "AitFR-THP": "Adventures in the Forgotten Realms: The Hidden Pages",
  BAM: "Boo's Astral Menagerie",
  AZfyT: "A Zib for Your Thougts",
  MCV2DC: "Monstrous Compendium Volume 2: Dragonlance Creatures",
  PSK: "Plane Shift: Kaladesh",
  PSD: "Plane Shift: Dominaria",
  AWM: "Adventure with Muk",
  UATheMysticClass: "Unearthed Arcana: The Mystic Class",
  ALCurseOfStrahd: "Adventurers League: Curse of Strahd",
  ALElementalEvil: "Adventurers League: Elemental Evil",
  ALRageOfDemons: "Adventurers League: Rage of Demons"
};
function getFullSourceName2(abbrev, editionId) {
  let name = SOURCE_NAME_MAP2[abbrev] ?? abbrev;
  if (abbrev === "PHB") {
    if (editionId?.includes("2014")) name += " (2014)";
    else if (editionId?.includes("2025")) name += " (2025)";
  }
  return name;
}

// src/parsers/5e-2025/helpers/tagReplacer.ts
function replace5eTags2(input) {
  let text;
  if (Array.isArray(input)) {
    text = input.join(" ");
  } else if (typeof input === "string") {
    text = input;
  } else {
    text = String(input ?? "");
  }
  return text.replace(
    /\{@(spell|item|creature|race) ([^|}]+)(?:\|[^}]+)?\}/g,
    (_, __, name) => `[[${capitalizeEach2(name)}]]`
  ).replace(
    /\{@(condition|status|action|skill) ([^|}]+)(?:\|[^}]+)?\}/g,
    (_, tag, name) => `[[${capitalize2(tag)}s#${name}|${capitalizeEach2(name)}]]`
  ).replace(
    /\{@classFeature ([^|}]+)\|([^|}]+)(?:\|[^}]+)?\}/g,
    (_, feature, cls) => `[[${cls}#${feature}]]`
  ).replace(/\{@(book|filter) ([^|}]+)(?:\|[^}]+)?\}/g, (_, __, txt) => txt).replace(/\{@note ([^}]+)\}/g, (_, note) => `*${note}*`).replace(/\{@(damage|dice|dc|hit|sense) ([^}]+)\}/g, (_, __, value) => value).replace(/\{@chance ([^|}]+)(?:\|[^}]+)?\}/g, (_, value) => `${value}%`).replace(/\{@quickref ([^|}]+)(?:\|[^|]*\|[^}]*)?\}/g, (_, term) => {
    const known = [
      "difficult terrain",
      "total cover",
      "half cover",
      "three-quarters cover",
      "heavily obscured",
      "lightly obscured"
    ];
    return known.includes(term.toLowerCase()) ? `[[Rules#${capitalizeEach2(term)}]]` : term;
  }).replace(/\{\@5etools\s+([^|}]+)\|[^}]+\}/g, "$1").replace(/\{@recharge\s*([^}]+)\}/g, (_, num) => `(recharge: ${num.trim()})`).replace(/\{@(scaledice|scaledamage)[^}]*\|([^|}]+)\}/g, (_, __, value) => value).replace(/\{@d20[^}]*\}/g, "").replace(/\{@[^}]+\}/g, "");
}
function capitalize2(str) {
  return str.charAt(0).toUpperCase() + str.slice(1).toLowerCase();
}
function capitalizeEach2(str) {
  return str.split(" ").map(capitalize2).join(" ");
}

// src/parsers/5e-2025/helpers/markdownTable.ts
function renderMarkdownTable2(entry) {
  if (entry.type !== "table" || !Array.isArray(entry.rows)) return "";
  const caption = entry.caption ? `##### ${entry.caption}
` : "";
  const headers = (entry.colLabels ?? []).map((h) => replace5eTags2(h.trim()));
  const headerRow = `| ${headers.join(" | ")} |`;
  const dividerRow = `| ${headers.map(() => ":--").join(" | ")} |`;
  const bodyRows = entry.rows.map((row) => {
    const cells = row.map((cell) => {
      if (typeof cell === "string") return replace5eTags2(cell);
      if (typeof cell === "object") {
        if (cell.roll?.exact !== void 0) return `${cell.roll.exact}`;
        if (cell.roll?.min !== void 0 && cell.roll?.max !== void 0) {
          return `${cell.roll.min}\u2013${cell.roll.max}`;
        }
        return replace5eTags2(JSON.stringify(cell));
      }
      return replace5eTags2(String(cell));
    });
    return `| ${cells.join(" | ")} |`;
  });
  return `${caption}${headerRow}
${dividerRow}
${bodyRows.join("\n")}`;
}

// src/parsers/5e-2025/helpers/formatEntry.ts
function isTypedEntry(x) {
  return x != null && typeof x === "object" && !Array.isArray(x) && typeof x.type === "string";
}
function formatEntry2(entry) {
  if (typeof entry === "string") {
    const cleaned = entry.trim();
    if (!cleaned || cleaned === "}") return "";
    return replace5eTags2(cleaned);
  }
  if (isTypedEntry(entry) && entry.type === "entries" && Array.isArray(entry.entries)) {
    const body = entry.entries.map(formatEntry2).filter((str) => str.trim().length > 0).join("\n\n");
    return entry.name ? `##### ${entry.name}
${body}` : body;
  }
  if (isTypedEntry(entry) && entry.type === "list" && Array.isArray(entry.items)) {
    return entry.items.map((i) => `- ${replace5eTags2(typeof i === "string" ? i : JSON.stringify(i))}`).join("\n");
  }
  if (isTypedEntry(entry) && entry.type === "table" && Array.isArray(entry.rows)) {
    return renderMarkdownTable2(entry);
  }
  if (isTypedEntry(entry) && entry.type === "quote" && Array.isArray(entry.entries)) {
    const quote = entry.entries.map(formatEntry2).join(" ").trim();
    const author = entry.by ? ` \u2014 ${entry.by}` : "";
    return `*"${quote}${author}"*`;
  }
  if (isTypedEntry(entry) && entry.type === "inset" && Array.isArray(entry.entries)) {
    const inset = entry.entries.map(formatEntry2).join("\n").trim();
    return `> ${inset.replace(/\n/g, "\n> ")}`;
  }
  if (isTypedEntry(entry) && entry.type === "refClassFeature" && typeof entry.classFeature === "string") {
    const [name] = entry.classFeature.split("|");
    const anchor = name.replace(/[^\w\s-]/g, "").replace(/\s+/g, "-").toLowerCase();
    return `[[#${anchor}]]`;
  }
  return "";
}

// src/parsers/5e-2025/bestiary.ts
var skippedMonsters2 = [];
var SIZE_MAP3 = {
  T: "Tiny",
  S: "Small",
  M: "Medium",
  L: "Large",
  H: "Huge",
  G: "Gargantuan"
};
var ALIGNMENT_MAP2 = {
  L: "Lawful",
  N: "Neutral",
  C: "Chaotic",
  G: "Good",
  E: "Evil",
  U: "Unaligned"
};
function capitalizeFirst3(str) {
  const s = String(str || "");
  return s.charAt(0).toUpperCase() + s.slice(1);
}
function formatSizeAbbrev3(abbrev) {
  return SIZE_MAP3[abbrev] || abbrev;
}
function formatAlignmentAbbrev2(abbrev) {
  return abbrev.trim().split(/\s+/).map((letter) => ALIGNMENT_MAP2[letter] || letter).join(" ");
}
var RAW_NPCS2 = [
  "Abjurer",
  "Acolyte",
  "Apprentice Wizard",
  "Archdruid",
  "Archer",
  "Archmage",
  "Assassin",
  "Bandit",
  "Bandit Captain",
  "Bard",
  "Berserker",
  "Blackguard",
  "Champion",
  "Commoner",
  "Conjurer",
  "Cult Fanatic",
  "Cultist",
  "Diviner",
  "Druid (NPC)",
  "Druid NPC",
  "Enchanter",
  "Evoker",
  "Gladiator",
  "Guard",
  "Illusionist",
  "Knight",
  "Kraken Priest",
  "Mage",
  "Martial Arts Adept",
  "Master Thief",
  "Necromancer",
  "Noble",
  "Priest",
  "Scout",
  "Spy",
  "Swashbuckler",
  "Thug",
  "Transmuter",
  "Tribal Warrior",
  "Veteran",
  "War Priest",
  "Warlock of the Archfey",
  "Warlock of the Fiend",
  "Warlock of the Great Old One",
  "Warlord"
];
var NORMALIZED_NPC_NAMES2 = new Set(RAW_NPCS2.map((n) => normalizeName2(n)));
function normalizeName2(name) {
  return name.replace(/\s+/g, " ").trim().toLowerCase();
}
function categorizeCreature2(monster) {
  const typeValue = monster.type;
  const name = monster.name;
  const t = typeof typeValue === "string" ? typeValue.toLowerCase() : typeValue?.type?.toLowerCase() || String(typeValue).toLowerCase();
  const normalizedName = normalizeName2(name);
  if (monster.isNpc || monster.isNamedCreature) return "Story NPCs";
  if (t === "beast") return "Beasts";
  if (t === "humanoid" && NORMALIZED_NPC_NAMES2.has(normalizedName)) return "Non-Beasts";
  if (t === "humanoid") return "Monsters";
  return "Monsters";
}
function renderAbilitiesTable2(str, dex, con, int, wis, cha) {
  return [
    `| STR | DEX | CON | INT | WIS | CHA |`,
    `| --- | --- | --- | --- | --- | --- |`,
    `| ${str} | ${dex} | ${con} | ${int} | ${wis} | ${cha} |`
  ].join("\n");
}
function renderEntry2(entry) {
  const name = entry.name;
  let descriptions = [];
  if (Array.isArray(entry.entries)) {
    descriptions = entry.entries;
  } else if (typeof entry.entries === "string") {
    descriptions = [entry.entries];
  } else if (Array.isArray(entry.desc)) {
    descriptions = entry.desc;
  } else if (typeof entry.desc === "string") {
    descriptions = [entry.desc];
  }
  const raw = descriptions.join(" ");
  const desc = replace5eTags2(raw);
  return `***${name}.*** ${desc}`;
}
function parseBestiaryFile2(json, editionId) {
  if (!json.monster) return [];
  json._editionId = editionId;
  const validMonsters = json.monster.filter((m) => {
    const acVal = Array.isArray(m.ac) ? m.ac[0]?.ac ?? m.ac[0] : typeof m.ac === "object" ? m.ac?.ac ?? null : m.ac;
    const hpVal = typeof m.hp === "object" ? m.hp?.average ?? m.hp?.hp ?? null : m.hp;
    return acVal != null && hpVal != null && !isNaN(Number(acVal)) && !isNaN(Number(hpVal));
  });
  const allNames = new Set(json.monster.map((m) => m.name));
  const validNames = new Set(validMonsters.map((m) => m.name));
  const missing = [...allNames].filter((name) => !validNames.has(name));
  return validMonsters.map((monster) => {
    const name = monster.name;
    const safeName = name.replace(/\//g, "-");
    const rawSize = monster.size || "M";
    const rawAlignment = Array.isArray(monster.alignment) ? monster.alignment.join(" ") : monster.alignment || "N";
    let rawType = "Unknown";
    if (typeof monster.type === "string") {
      rawType = capitalizeFirst3(monster.type);
    } else if (monster.type?.type) {
      const base = capitalizeFirst3(monster.type.type);
      const tags = monster.type.tags?.length ? ` (${monster.type.tags.map(capitalizeFirst3).join(", ")})` : "";
      rawType = `${base}${tags}`;
    }
    monster._parsedType = rawType;
    const ac = Array.isArray(monster.ac) ? monster.ac[0].ac : monster.ac;
    const hp = monster.hp?.average ?? monster.hp;
    const cr = monster.cr;
    if (!ac && !hp) {
      skippedMonsters2.push(monster.name);
      return null;
    }
    const abilities = Array.isArray(monster.ability) ? monster.ability : [monster.str, monster.dex, monster.con, monster.int, monster.wis, monster.cha];
    const [str = 10, dex = 10, con = 10, int = 10, wis = 10, cha = 10] = abilities;
    const speedList = [];
    if (typeof monster.speed === "object") {
      for (const [mode, val] of Object.entries(monster.speed)) {
        if (mode === "canHover") continue;
        if (val && typeof val === "object" && "number" in val) {
          const num = val.number;
          const cond = val.condition ? ` ${val.condition}` : "";
          speedList.push(`${mode} ${num} ft.${cond}`);
        } else {
          speedList.push(`${mode} ${val} ft.`);
        }
      }
    } else {
      speedList.push(`${monster.speed} ft.`);
    }
    const speed = speedList.join(", ");
    let source = getFullSourceName2(monster.source, editionId);
    source = source.replace(/:/g, " -");
    const category = categorizeCreature2(monster);
    const fm = buildFM2(monster, BESTIARY_META_DEFS2);
    const yaml = serializeFrontmatter2(fm, BESTIARY_META_DEFS2);
    const savingThrows = fm[FM_FIELDS4.SAVING_THROWS] || [];
    const skills = fm[FM_FIELDS4.SKILLS] || [];
    const senses = fm[FM_FIELDS4.SENSES] || [];
    const languages = fm[FM_FIELDS4.LANGUAGES] || [];
    let body = `# ${name}

${formatSizeAbbrev3(rawSize)} ${rawType}, ${formatAlignmentAbbrev2(rawAlignment)}

**Armor Class**: ${ac}
**Hit Points**: ${hp}
**Speed**: ${speed}
` + (savingThrows.length ? `**Saving Throws**: ${savingThrows.join(", ")}
` : "") + (skills.length ? `**Skills**: ${skills.join(", ")}
` : "") + (senses.length ? `**Senses**: ${senses.join(", ")}
` : "") + (languages.length ? `**Languages**: ${languages.join(", ")}
` : "") + `**Challenge**: ${cr}

` + renderAbilitiesTable2(str, dex, con, int, wis, cha);
    if (monster.trait) body += `

### Traits
${monster.trait.map(renderEntry2).join("\n\n")}`;
    if (monster.action) body += `

### Actions
${monster.action.map(renderEntry2).join("\n\n")}`;
    if (monster.reaction) body += `

### Reactions
${monster.reaction.map(renderEntry2).join("\n\n")}`;
    if (monster.legendary) body += `

### Legendary Actions
${monster.legendary.map(renderEntry2).join("\n\n")}`;
    const content = `---
${yaml}
---

${body}`;
    return {
      path: `${category}/${safeName}.md`,
      content
    };
  });
}

// src/parsers/5e-2025/items.ts
function capitalizeFirst4(input) {
  if (typeof input !== "string" || input.length === 0) return "";
  const s = input.trim();
  return s.charAt(0).toUpperCase() + s.slice(1).toLowerCase();
}
var DAMAGE_TYPE_MAP3 = {
  P: "Piercing",
  B: "Bludgeoning",
  S: "Slashing",
  N: "Necrotic",
  R: "Radiant",
  F: "Fire",
  C: "Cold",
  L: "Lightning",
  T: "Thunder",
  A: "Acid",
  H: "Healing",
  U: "Force",
  V: "Psychic"
};
var PROPERTY_MAP2 = {
  A: "Ammunition",
  F: "Finesse",
  H: "Heavy",
  L: "Light",
  R: "Reload",
  S: "Special",
  "2H": "Two-Handed",
  T: "Thrown",
  V: "Versatile"
};
var ITEM_TYPE_MAP2 = {
  $C: "Currency",
  $G: "Gem",
  A: "Ammunition",
  "AIR|DMG": "Vehicle (air)",
  "AF|DMG": "Future Ammo",
  AT: "Artisan Tools",
  EXP: "Explosive",
  FD: "Food and Drink",
  G: "Gear",
  GS: "Game",
  HA: "Heavy Armor",
  "IDG|TDCSR": "Illicit Drug",
  INS: "Instrument",
  LA: "Light Armor",
  M: "Weapon",
  MA: "Medium Armor",
  MNT: "Mounts and Vehicles",
  ODH: "Miscellaneous",
  P: "Consumable",
  R: "Ranged Weapon",
  RD: "Rod",
  RG: "Ring",
  S: "Shield",
  SC: "Scroll",
  SCF: "Spell Casting Focus",
  SHP: "Ship",
  T: "Tool",
  TAH: "Mounts and Vehicles",
  TG: "Trade Goods",
  VEH: "Mounts and Vehicles",
  WD: "Wand"
};
var codeFolderMap2 = {
  // Weapons & Armor
  "A": "Weapons and Armor/Ammunition",
  "M": "Weapons and Armor/Weapons",
  "R": "Weapons and Armor/Ranged Weapons",
  "S": "Weapons and Armor/Shields",
  "LA": "Weapons and Armor/Armor/Light Armor",
  "MA": "Weapons and Armor/Armor/Medium Armor",
  "HA": "Weapons and Armor/Armor/Heavy Armor",
  "EXP": "Weapons and Armor/Weapons/Explosives",
  // Future Ammo (AF|DMG → rawCode "AF")
  "AF": "Weapons and Armor/Ammunition/Future Ammo",
  // Magical Items
  "RD": "Magical Items/Rods",
  "RG": "Magical Items/Rings",
  "SC": "Magical Items/Scrolls",
  "SCF": "Magical Items/Spell Casting Focus",
  "WD": "Magical Items/Wands",
  // Valuables
  "$G": "Valuables/Gems",
  // Currency (rawCode becomes "C" after stripping $)
  "C": "Valuables/Currency",
  "TG": "Valuables/Trade Goods",
  // Artisan Goods
  "AT": "Artisan Goods/Tools",
  "T": "Artisan Goods/Tools",
  "INS": "Artisan Goods/Instruments",
  "GS": "Artisan Goods/Games",
  // Gear & Mounts
  "G": "Gear",
  // Mounts & Vehicles
  "MNT": "Gear/Mounts and Vehicles",
  "TAH": "Gear/Mounts and Vehicles",
  "VEH": "Gear/Mounts and Vehicles",
  // Air vehicles (AIR|DMG → rawCode "AIR")
  "AIR": "Gear/Mounts and Vehicles/Air",
  // Consumables
  "P": "Consumables",
  // Food & Drink
  "FD": "Consumables/Food and Drink",
  // Illicit Drugs (IDG|TDCSR → rawCode "IDG")
  "IDG": "Gear/Illicit Drugs",
  // Miscellaneous (ODH)
  "ODH": "Gear/Miscellaneous"
};
function parseItemsFile2(json, editionId) {
  const rawItems = [];
  if (Array.isArray(json.baseitem)) rawItems.push(...json.baseitem);
  if (Array.isArray(json.item)) rawItems.push(...json.item);
  if (Array.isArray(json.object)) rawItems.push(...json.object);
  if (Array.isArray(json.vehicle)) rawItems.push(...json.vehicle);
  if (!rawItems.length) return [];
  const baseNames = new Set(
    Array.isArray(json.baseitem) ? json.baseitem.map((b) => b.name) : []
  );
  const out = [];
  for (const it of rawItems) {
    const name = it.name;
    const safeName = name.replace(/[\/\\:]/g, "-");
    const rawCode = (it.type || "").split("|")[0].split("|")[0].replace(/^\$/, "");
    let folder = codeFolderMap2[rawCode] ?? "Miscellaneous";
    if (it.bonusWeapon) {
      folder = `${folder}/Variants`;
    } else {
      const isMagic = !!it.wondrous || !!it.reqAttune || !!it.req_attune || String(it.rarity).toLowerCase().includes("magic");
      if (isMagic) {
        const [, ...rest] = folder.split("/");
        folder = ["Magical Items", ...rest].join("/");
      }
    }
    if ((folder.startsWith("Weapons and Armor/Weapons") || folder.startsWith("Weapons and Armor/Ranged Weapons")) && it.weaponCategory) {
      folder = `${folder}/${capitalizeFirst4(it.weaponCategory)}`;
    }
    json._editionId = editionId;
    const fm = buildFM2(it, ITEM_META_DEFS2);
    if (rawCode === "M" && it.weaponCategory) {
      fm.type = `${capitalizeFirst4(it.weaponCategory)} Weapon`;
    } else if (ITEM_TYPE_MAP2[rawCode]) {
      fm.type = ITEM_TYPE_MAP2[rawCode];
    }
    if (Array.isArray(fm.damageTypes)) {
      fm.damageTypes = fm.damageTypes.map(
        (code) => DAMAGE_TYPE_MAP3[code] || code
      );
    }
    let yaml = serializeFrontmatter2(fm, ITEM_META_DEFS2);
    if (Array.isArray(it.packContents)) {
      yaml += "\npackContents:";
      for (const pc of it.packContents) {
        yaml += `
  - item: "${pc.item}"
    quantity: ${pc.quantity}`;
      }
    }
    const frontmatter = `---
${yaml}
---`;
    const lines = [];
    lines.push(`# ${name}`);
    lines.push("");
    const subtitle = it.weapon ? `${capitalizeFirst4(it.weaponCategory)} Weapon` : it.armor ? folder.split("/").pop() || "Armor" : "";
    if (subtitle) lines.push(`### *${subtitle}*`);
    if (it.weapon) {
      lines.push(`**Category**: ${capitalizeFirst4(it.weaponCategory)}`);
      lines.push(`**Damage**: ${it.dmg1 ?? ""}${it.dmg2 ? ` / ${it.dmg2}` : ""}`);
      const typesBody = (Array.isArray(it.dmgType) ? it.dmgType : [it.dmgType]).filter((t) => Boolean(t)).map((t) => DAMAGE_TYPE_MAP3[t] || t);
      lines.push(`**Damage Type**: ${typesBody.join(", ")}`);
      lines.push(`**Range**: ${it.range ?? "\u2014"}`);
      lines.push(`**Reload**: ${it.reload ?? "\u2014"}`);
      if (it.ammoType) lines.push(`**Ammo Type**: ${it.ammoType}`);
      if (Array.isArray(it.property) && it.property.length) {
        const propsBody = it.property.map((p) => PROPERTY_MAP2[p] || p);
        lines.push(`**Properties**: ${propsBody.join(", ")}`);
      }
    }
    if (it.armor) {
      lines.push(`**Armor Class**: ${it.ac}`);
      if (it.stealth) lines.push(`**Stealth Disadvantage**: true`);
      lines.push("");
    }
    const desc = it.entries ?? it.desc;
    if (desc) {
      for (const p of Array.isArray(desc) ? desc : [desc]) {
        if (typeof p === "string") {
          for (const line of replace5eTags2(p).split("\n")) {
            lines.push(line);
          }
          lines.push("");
        } else if (p && typeof p === "object") {
          if (lines[lines.length - 1] === "") {
            lines.pop();
          }
          lines.push(`#### ${p.name}`);
          const sub = Array.isArray(p.entries) ? p.entries : [];
          for (const sp of sub) {
            for (const line of replace5eTags2(sp).split("\n")) {
              lines.push(line);
            }
          }
          lines.push("");
        }
      }
    }
    const body = lines.join("\n");
    out.push({ path: `Items/${folder}/${safeName}.md`, content: `${frontmatter}

${body}` });
  }
  return out.sort((a, b) => a.path.localeCompare(b.path));
}

// src/parsers/5e-2025/helpers/frontmatter.ts
function cap3(str) {
  if (typeof str !== "string") return "";
  return str.charAt(0).toUpperCase() + str.slice(1);
}
var ABILITY_FULL2 = {
  str: "Strength",
  dex: "Dexterity",
  con: "Constitution",
  int: "Intelligence",
  wis: "Wisdom",
  cha: "Charisma"
};
var SIZE_MAP4 = {
  T: "Tiny",
  S: "Small",
  M: "Medium",
  L: "Large",
  H: "Huge",
  G: "Gargantuan"
};
var FM_FIELDS4 = {
  ABILITY_BONUSES: "ability_bonuses",
  AC: "AC",
  ALIGNMENT: "Alignment",
  AMMO_TYPE: "Ammo Type",
  ARMOR_PROFICIENCIES: "armor-prof",
  ATTACK_TYPE: "attack_type",
  ATTUNEMENT: "Attunement",
  ATTUNE_REQ: "Attune_Req",
  CASTING_TIME: "casting_time",
  CHARISMA: "charisma",
  CHA_MOD: "cha_mod",
  CONCENTRATION: "concentration",
  CONDITION_IMM: "cond_immunity",
  CONSTITUTION: "constitution",
  CON_MOD: "con_mod",
  COST: "cost",
  COMPONENTS: "Components",
  CHALLENGE_RATING: "CR",
  DAMAGE_TYPE: "damage_type",
  DAMAGE_TYPES: "damageTypes",
  DAMAGE: "damage",
  DAMAGE_RES: "dmg_resistance",
  DAMAGE_IMM: "dmg_immunity",
  DEXTERITY: "dexterity",
  DEX_MOD: "dex_mod",
  DURATION: "duration",
  RULESET: "ruleset",
  HP: "HP",
  INTELLIGENCE: "intelligence",
  INT_MOD: "int_mod",
  LANGUAGES: "languages",
  LEVEL: "level",
  MAGICAL: "magical",
  MATERIAL: "material",
  NAME: "name",
  PROPERTIES: "properties",
  RANGE: "range",
  RARITY: "rarity",
  RELOAD: "reload",
  RITUAL: "ritual",
  SAVE: "save",
  SAVING_THROWS: "saving_throws",
  SCHOOL: "school",
  SENSES: "senses",
  SIZE: "size",
  SKILLS: "skills",
  SKILL_CHOICE_LIST: "skill_choice_list",
  SOMATIC: "somatic",
  SOURCE: "source",
  SPECIES: "species",
  SPEED: "speed",
  SPELL_CAST_MOD: "Spell Cast Mod",
  SPELL_RANGE: "Range",
  STEALTH_DISADVANTAGE: "stealthDisadvantage",
  STRENGTH: "strength",
  STR_MOD: "str_mod",
  SUBRACES: "subraces",
  TOOL_PROFICIENCIES: "tool-prof",
  TOOL_CHOICE_LIST: "tool_choice_list",
  TRAITS: "traits",
  TYPE: "type",
  VARIANT: "Variant",
  VERBAL: "verbal",
  WEAPON_PROFICIENCIES: "weapon-prof",
  WEIGHT: "weight",
  WISDOM: "wisdom",
  WIS_MOD: "wis_mod"
};
var unifiedArmorProfs2 = (val) => Array.isArray(val?.armor) ? val.armor.map(cap3) : Array.isArray(val) ? val.map(cap3) : [];
function unifiedWeaponProfs2(val) {
  const rawArr = Array.isArray(val?.weapons) ? val.weapons : Array.isArray(val) ? val : [];
  const out = /* @__PURE__ */ new Set();
  function handleOne(entry) {
    if (Array.isArray(entry)) {
      entry.forEach(handleOne);
      return;
    }
    if (typeof entry === "string") {
      const lit = entry.trim().toLowerCase();
      if (lit === "simple") {
        out.add("Simple Weapons");
      } else if (lit === "martial") {
        out.add("Martial Weapons");
      } else {
        const text = entry.startsWith("{@") ? replace5eTags2(entry) : cap3(entry);
        out.add(text);
      }
      return;
    }
    if (entry && typeof entry === "object" && entry.proficiency) {
      const name = cap3(entry.proficiency);
      out.add(entry.optional ? `${name} (optional)` : name);
    }
  }
  rawArr.forEach(handleOne);
  return [...out];
}
var unifiedSaves2 = (val) => {
  if (Array.isArray(val)) {
    return val.map(
      (k) => ({
        str: "Strength",
        dex: "Dexterity",
        con: "Constitution",
        int: "Intelligence",
        wis: "Wisdom",
        cha: "Charisma"
      })[k] ?? k.toUpperCase()
    );
  }
  if (typeof val === "object" && val !== null) {
    return Object.keys(val).map((k) => k.toUpperCase());
  }
  return [];
};
var unifiedSkills4 = (val) => {
  if (val && !Array.isArray(val) && typeof val === "object" && // ensure every value is a string or number
  Object.values(val).every((v) => typeof v === "string" || typeof v === "number")) {
    return Object.entries(val).map(
      ([skill, mod]) => `${cap3(skill)} ${mod}`.trim()
    );
  }
  if (val && !Array.isArray(val) && typeof val === "object") {
    const nested = val.skills ?? val.skillProf ?? val.skillProficiencies;
    return unifiedSkills4(nested);
  }
  if (!Array.isArray(val)) return [];
  const out = /* @__PURE__ */ new Set();
  for (const e of val) {
    if (e && typeof e === "object" && typeof e.any === "number") {
      out.add(`Choose ${e.any}`);
      continue;
    }
    if (e && typeof e === "object" && e.choose) {
      const cnt = e.choose.count ?? 1;
      out.add(`Choose ${cnt}`);
    }
    if (e && typeof e === "object") {
      for (const [k, v] of Object.entries(e)) {
        if (v === true) out.add(cap3(k));
      }
    }
    if (typeof e === "string") {
      out.add(cap3(e));
    }
  }
  return [...out];
};
var unifiedToolProfs2 = (val) => {
  let entries = Array.isArray(val) ? val : Array.isArray(val?.toolProficiencies) ? val.toolProficiencies : Array.isArray(val?.tools) ? val.tools : [];
  const out = /* @__PURE__ */ new Set();
  let sawChoose = false;
  for (const e of entries) {
    if (typeof e === "string") {
      out.add(cap3(e));
      continue;
    }
    if (e?.choose) {
      const cnt = e.choose.count ?? 1;
      sawChoose = true;
      out.add(`Choose ${cnt}`);
    }
    for (const [k, v] of Object.entries(e)) {
      if (v === true) {
        out.add(cap3(k));
      } else if (typeof v === "number" && k.startsWith("any")) {
        const raw = k.replace(/^any/, "");
        const spaced = raw.replace(/([a-z])([A-Z])/g, "$1 $2").split(" ").map(cap3).join(" ");
        out.add(`Choose ${v} ${spaced}`);
      }
    }
  }
  return [...out];
};
var ALL_FIELD_DEFS2 = [
  // ─── Core ───
  { callSign: "NAME", jsonKey: "name" },
  {
    callSign: "SOURCE",
    jsonKey: ["source"],
    conv: (raw, allJson) => {
      const out = /* @__PURE__ */ new Set();
      const editionId = allJson._editionId;
      const arr = Array.isArray(raw) ? raw : [raw];
      arr.forEach((src) => {
        out.add(getFullSourceName2(src, editionId));
      });
      for (const os of allJson.otherSources ?? []) {
        if (os && typeof os.source === "string") {
          out.add(getFullSourceName2(os.source, editionId));
        }
      }
      for (const rep of allJson.reprintedAs ?? []) {
        const repStr = typeof rep === "string" ? rep : String(rep);
        const parts = repStr.split("|");
        const src = parts[1] ?? parts[0];
        out.add(getFullSourceName2(src, editionId));
      }
      return [...out];
    }
  },
  // ─── Proficiencies ───
  { callSign: "ARMOR_PROFICIENCIES", jsonKey: ["armorProficiencies", "armorProfs", "startingProficiencies"], conv: unifiedArmorProfs2 },
  {
    callSign: "WEAPON_PROFICIENCIES",
    jsonKey: ["weaponProficiencies", "weaponProfs", "startingProficiencies"],
    conv: unifiedWeaponProfs2
  },
  { callSign: "TOOL_PROFICIENCIES", jsonKey: ["toolProficiencies", "toolProfs", "startingProficiencies"], conv: unifiedToolProfs2 },
  {
    callSign: "TOOL_CHOICE_LIST",
    jsonKey: ["toolProficiencies", "toolProfs", "startingProficiencies"],
    conv: (raw) => {
      const arr = Array.isArray(raw) ? raw : Array.isArray(raw?.toolProficiencies) ? raw.toolProficiencies : Array.isArray(raw?.tools) ? raw.tools : [];
      const choice = arr.find((e) => e?.choose);
      return choice?.choose?.from?.map((s) => cap3(s)) ?? [];
    }
  },
  { callSign: "SAVING_THROWS", jsonKey: ["save", "proficiency"], conv: unifiedSaves2 },
  {
    callSign: "SKILLS",
    jsonKey: ["skill", "skillProf", "skillProficiencies", "startingProficiencies"],
    conv: unifiedSkills4
  },
  {
    callSign: "SKILL_CHOICE_LIST",
    jsonKey: ["skill", "skillProf", "skillProficiencies", "startingProficiencies"],
    conv: (raw) => {
      const arr = Array.isArray(raw) ? raw : Array.isArray(raw?.skillProficiencies) ? raw.skillProficiencies : Array.isArray(raw?.skills) ? raw.skills : Array.isArray(raw?.skillProf) ? raw.skillProf : [];
      const choiceObj = arr.find((e) => e?.choose || typeof e.any === "number");
      if (!choiceObj) return [];
      if (choiceObj.choose && Array.isArray(choiceObj.choose.from)) {
        return choiceObj.choose.from.map(cap3);
      }
      if (typeof choiceObj.any === "number") {
        return SKILL_OPTIONS2;
      }
      return [];
    }
  },
  {
    callSign: "SPELL_CAST_MOD",
    jsonKey: "spellcastingAbility",
    conv: (raw) => {
      const key = String(raw).toLowerCase();
      return ABILITY_FULL2[key] || key.toUpperCase();
    }
  },
  // ─── Spells ───
  { callSign: "LEVEL", jsonKey: "level" },
  { callSign: "SCHOOL", jsonKey: "school", conv: (s) => SCHOOL_MAP2[s] ?? s },
  { callSign: "CASTING_TIME", jsonKey: "time", conv: formatTime2 },
  { callSign: "SPELL_RANGE", jsonKey: "range", conv: formatRange2 },
  { callSign: "DURATION", jsonKey: "duration", conv: formatDuration2 },
  { callSign: "VERBAL", jsonKey: "components", conv: (c) => !!c.v },
  { callSign: "SOMATIC", jsonKey: "components", conv: (c) => !!c.s },
  { callSign: "MATERIAL", jsonKey: "components", conv: (c) => !!c.m },
  {
    callSign: "COMPONENTS",
    jsonKey: "components",
    conv: (c) => {
      if (!c.m) return [];
      const raw = Array.isArray(c.m) ? c.m : [c.m];
      return raw.map((item) => {
        if (typeof item === "string") return item;
        if (item && typeof item === "object" && typeof item.text === "string") {
          return item.text;
        }
        return null;
      }).filter((comp) => comp !== null);
    }
  },
  { callSign: "ATTACK_TYPE", jsonKey: "attackType" },
  { callSign: "DAMAGE_TYPE", jsonKey: "damageInflict", conv: (d) => Array.isArray(d) ? d[0] : d },
  { callSign: "RITUAL", jsonKey: "ritual" },
  { callSign: "CONCENTRATION", jsonKey: "duration", conv: (ds) => Array.isArray(ds) && ds.some((x) => x.concentration) },
  { callSign: "SAVE", jsonKey: "saveAttr" },
  // ─── Species / Creatures ───
  { callSign: "SPECIES", jsonKey: "name" },
  {
    callSign: "SIZE",
    jsonKey: "size",
    conv: (raw) => {
      if (Array.isArray(raw)) {
        return raw.map((r) => SIZE_MAP4[r] || r);
      } else {
        return SIZE_MAP4[raw] || raw;
      }
    }
  },
  {
    callSign: "SPEED",
    jsonKey: "speed",
    conv: (sp) => {
      if (typeof sp === "number") {
        return [`Walk ${sp} ft.`];
      }
      if (!sp || typeof sp !== "object") return [];
      return Object.entries(sp).filter(([mode]) => mode !== "canHover").map(([mode, v]) => {
        const n = typeof v === "object" && v !== null && "number" in v ? v.number : v;
        const label = mode === "walk" ? "Walk" : cap3(mode);
        return `${label} ${n} ft.`;
      });
    }
  },
  { callSign: "LANGUAGES", jsonKey: ["languages", "languageProficiencies"], conv: (arr) => {
    if (!Array.isArray(arr)) return [];
    const out = [];
    for (const lp of arr) {
      if (typeof lp === "string") out.push(cap3(lp));
      else if (typeof lp === "object") {
        for (const [lang, val] of Object.entries(lp)) {
          if (val) out.push(cap3(lang));
        }
      }
    }
    return [...new Set(out)];
  } },
  { callSign: "SENSES", jsonKey: "senses", conv: (sen) => {
    if (Array.isArray(sen)) return sen.map((s) => s.replace(/^\d+\s*/, "").replace(/^./, (c) => c.toUpperCase()));
    if (sen && typeof sen === "object") return Object.entries(sen).map(([k, v]) => `${k.charAt(0).toUpperCase() + k.slice(1)} ${v}`);
    return [];
  } },
  {
    callSign: "TRAITS",
    jsonKey: ["classFeatures", "entries"],
    conv: (raw, allJson) => {
      const clsRec = Array.isArray(allJson.class) ? allJson.class[0] : allJson;
      const className = typeof clsRec.name === "string" ? clsRec.name : "";
      const omit = /* @__PURE__ */ new Set([
        "Ability Score Improvement",
        "Archetype Feature",
        "Subclass Feature"
        // add more if you like…
      ]);
      const seen = /* @__PURE__ */ new Set();
      if (Array.isArray(allJson.classFeatures)) {
        return allJson.classFeatures.flatMap((feat) => {
          if (feat && typeof feat === "object" && feat.gainSubclassFeature) return [];
          const rawName = typeof feat === "string" ? feat : typeof feat.classFeature === "string" ? feat.classFeature : "";
          const name = rawName.split("|")[0].trim();
          if (!name || omit.has(name) || seen.has(name)) return [];
          seen.add(name);
          const anchor = name.replace(/[^\w\s]/g, "").replace(/\s+/g, " ").trim().replace(/\b\w/g, (c) => c.toUpperCase());
          return `[[${className}#${anchor}|${name}]]`;
        });
      }
      const ents = Array.isArray(raw) ? raw : [];
      const featureNames = ents.filter((e) => e?.data?.isFeature && typeof e.name === "string").map((e) => e.name.replace(/^Feature:\s*/, "").trim());
      if (featureNames.length) return featureNames;
      return ents.filter((e) => e && typeof e.name === "string").map((e) => e.name.replace(/^Feature:\s*/, "").trim());
    }
  },
  { callSign: "AC", jsonKey: "ac", conv: (a) => Array.isArray(a) ? a[0].ac : a },
  { callSign: "HP", jsonKey: "hp", conv: (hp) => hp?.average ?? hp },
  { callSign: "CHALLENGE_RATING", jsonKey: "cr" },
  { callSign: "STRENGTH", jsonKey: "ability", conv: (arr) => Array.isArray(arr) ? arr[0] : arr?.str ?? 0 },
  { callSign: "DEXTERITY", jsonKey: "ability", conv: (arr) => Array.isArray(arr) ? arr[1] : arr?.dex ?? 0 },
  { callSign: "CONSTITUTION", jsonKey: "ability", conv: (arr) => Array.isArray(arr) ? arr[2] : arr?.con ?? 0 },
  { callSign: "INTELLIGENCE", jsonKey: "ability", conv: (arr) => Array.isArray(arr) ? arr[3] : arr?.int ?? 0 },
  { callSign: "WISDOM", jsonKey: "ability", conv: (arr) => Array.isArray(arr) ? arr[4] : arr?.wis ?? 0 },
  { callSign: "CHARISMA", jsonKey: "ability", conv: (arr) => Array.isArray(arr) ? arr[5] : arr?.cha ?? 0 },
  {
    callSign: "ALIGNMENT",
    jsonKey: "alignment",
    conv: (a) => {
      const raw = Array.isArray(a) ? a.join(" ") : typeof a === "string" ? a : String(a);
      const cleaned = raw.replace(/\bA\b/g, "Any").replace(/\bU\b/g, "Unaligned").replace(/\bN\b/g, "Neutral").replace(/\bL\b/g, "Lawful").replace(/\bC\b/g, "Chaotic").replace(/\bG\b/g, "Good").replace(/\bE\b/g, "Evil");
      return formatAlignmentAbbrev2(cleaned);
    }
  },
  {
    callSign: "TYPE",
    jsonKey: "type",
    conv: (t) => {
      if (typeof t === "string") {
        return ITEM_TYPE_MAP2[t] ?? cap3(t);
      }
      if (t && typeof t === "object") {
        const code = String(t.type || "").toUpperCase();
        if (ITEM_TYPE_MAP2[code]) {
          return ITEM_TYPE_MAP2[code];
        }
        const base = t.type ? cap3(t.type) : "Unknown";
        const tags = Array.isArray(t.tags) ? t.tags.map(cap3) : [];
        return tags.length ? `${base} (${tags.join(", ")})` : base;
      }
      return void 0;
    }
  },
  // ─── Items ───
  { callSign: "TYPE", jsonKey: "_parsedType" },
  { callSign: "RARITY", jsonKey: "rarity", conv: (r) => {
    const s = String(r || "").toLowerCase();
    return s && s !== "none" ? s[0].toUpperCase() + s.slice(1) : void 0;
  } },
  {
    callSign: "COST",
    jsonKey: "value",
    conv: (raw) => {
      const s = String(raw).trim().toLowerCase();
      let num;
      if (s.endsWith("cp")) {
        num = parseFloat(s);
        return num >= 100 ? `${Math.round(num / 100 * 100) / 100}gp` : `${num}cp`;
      }
      if (s.endsWith("sp")) {
        num = parseFloat(s);
        return num >= 10 ? `${Math.round(num / 10 * 100) / 100}gp` : `${num}sp`;
      }
      if (s.endsWith("gp")) {
        num = parseFloat(s);
        return `${Math.round(num * 100) / 100}gp`;
      }
      num = parseFloat(s) || 0;
      return num >= 100 ? `${Math.round(num / 100 * 100) / 100}gp` : `${num}cp`;
    }
  },
  { callSign: "WEIGHT", jsonKey: "weight" },
  { callSign: "MAGICAL", jsonKey: "wondrous", conv: (_w, all) => !!all.wondrous || !!all.reqAttune },
  { callSign: "VARIANT", jsonKey: "bonusWeapon", conv: (b) => typeof b === "string" && b.startsWith("+") },
  { callSign: "PROPERTIES", jsonKey: "property", conv: (arr) => Array.isArray(arr) ? arr.map((p) => PROPERTY_MAP2[p] || p) : [] },
  { callSign: "DAMAGE", jsonKey: "dmg1", conv: (d, all) => d ? all.dmg2 ? `${d} / ${all.dmg2}` : `${d}` : void 0 },
  { callSign: "DAMAGE_TYPES", jsonKey: "dmgType", conv: (dt) => dt == null ? [] : Array.isArray(dt) ? dt : [dt] },
  { callSign: "RANGE", jsonKey: "range" },
  { callSign: "RELOAD", jsonKey: "reload" },
  { callSign: "AMMO_TYPE", jsonKey: "ammoType" },
  { callSign: "STEALTH_DISADVANTAGE", jsonKey: "stealth" },
  {
    callSign: "ATTUNEMENT",
    jsonKey: ["wondrous", "reqAttune", "req_attune", "reqAttuneTags"],
    conv: (_raw, allJson) => {
      const j = allJson;
      const hasText = typeof j.reqAttune === "string" && j.reqAttune.trim() !== "";
      const hasTags = Array.isArray(j.reqAttuneTags) && j.reqAttuneTags.length > 0;
      return hasText || hasTags;
    }
  },
  {
    callSign: "ATTUNE_REQ",
    jsonKey: "reqAttuneTags",
    conv: (tags = [], _all) => {
      const mapLetter = {
        A: "Any",
        U: "Unaligned",
        N: "Neutral",
        L: "Lawful",
        C: "Chaotic",
        G: "Good",
        E: "Evil"
      };
      const reqs = [];
      for (const tag of tags) {
        if (tag.class && Array.isArray(tag.alignment)) {
          const cls = cap3(tag.class);
          for (const code of tag.alignment) {
            reqs.push(`${mapLetter[code] || code} ${cls}`);
          }
        } else if (tag.class) {
          reqs.push(cap3(tag.class));
        } else if (Array.isArray(tag.alignment)) {
          for (const code of tag.alignment) {
            reqs.push(mapLetter[code] || code);
          }
        } else if (tag.background) {
          const [bg] = String(tag.background).split("|");
          reqs.push(bg.split(" ").map(cap3).join(" "));
        } else if (tag.spellcasting) {
          reqs.push("Spellcaster");
        }
      }
      return Array.from(new Set(reqs));
    }
  },
  // ─── Other ───
  { callSign: "DAMAGE_RES", jsonKey: "resist", conv: (v) => Array.isArray(v) ? v.map(cap3) : [] },
  {
    callSign: "RULESET",
    jsonKey: "name",
    // ignore the raw value, always print HELLO
    conv: (_raw, _all) => "D&D 5e (2025)"
  },
  // ─── Ability‐score modifiers (only emit when nonzero) ───
  {
    callSign: "STR_MOD",
    jsonKey: "ability",
    conv: (arr) => {
      const v = Array.isArray(arr) ? arr[0].str ?? 0 : arr.str ?? 0;
      return v !== 0 ? v : void 0;
    }
  },
  {
    callSign: "DEX_MOD",
    jsonKey: "ability",
    conv: (arr) => {
      const v = Array.isArray(arr) ? arr[0].dex ?? 0 : arr.dex ?? 0;
      return v !== 0 ? v : void 0;
    }
  },
  {
    callSign: "CON_MOD",
    jsonKey: "ability",
    conv: (arr) => {
      const v = Array.isArray(arr) ? arr[0].con ?? 0 : arr.con ?? 0;
      return v !== 0 ? v : void 0;
    }
  },
  {
    callSign: "INT_MOD",
    jsonKey: "ability",
    conv: (arr) => {
      const v = Array.isArray(arr) ? arr[0].int ?? 0 : arr.int ?? 0;
      return v !== 0 ? v : void 0;
    }
  },
  {
    callSign: "WIS_MOD",
    jsonKey: "ability",
    conv: (arr) => {
      const v = Array.isArray(arr) ? arr[0].wis ?? 0 : arr.wis ?? 0;
      return v !== 0 ? v : void 0;
    }
  },
  {
    callSign: "CHA_MOD",
    jsonKey: "ability",
    conv: (arr) => {
      const v = Array.isArray(arr) ? arr[0].cha ?? 0 : arr.cha ?? 0;
      return v !== 0 ? v : void 0;
    }
  }
];
function buildFM2(json, defs) {
  const fm = {};
  for (const { callSign, jsonKey, conv } of defs) {
    const keys = Array.isArray(jsonKey) ? jsonKey : [jsonKey];
    let raw = void 0;
    for (const key of keys) {
      if (json[key] != null) {
        raw = json[key];
        break;
      }
    }
    if (raw == null) continue;
    const val = conv ? conv(raw, json) : raw;
    fm[FM_FIELDS4[callSign]] = val;
  }
  return fm;
}
function serializeFrontmatter2(fm, defs) {
  const filtered = {};
  const hasSkillChoice = Array.isArray(fm[FM_FIELDS4.SKILL_CHOICE_LIST]) && fm[FM_FIELDS4.SKILL_CHOICE_LIST].length > 0;
  const hasToolChoice = Array.isArray(fm[FM_FIELDS4.TOOL_CHOICE_LIST]) && fm[FM_FIELDS4.TOOL_CHOICE_LIST].length > 0;
  for (const [k, v] of Object.entries(fm)) {
    if (v === void 0) continue;
    if (k === FM_FIELDS4.COMPONENTS && Array.isArray(v) && v.length === 0) continue;
    if ((k === FM_FIELDS4.TOOL_CHOICE_LIST || k === FM_FIELDS4.SKILL_CHOICE_LIST) && Array.isArray(v) && v.length === 0) continue;
    filtered[k] = v;
  }
  let keysToEmit;
  if (defs) {
    const wanted = defs.map((d) => FM_FIELDS4[d.callSign]);
    keysToEmit = wanted.filter((k) => k in filtered);
    keysToEmit.push(
      ...Object.keys(filtered).filter((k) => !keysToEmit.includes(k))
    );
  } else {
    keysToEmit = Object.keys(filtered);
  }
  return keysToEmit.map((k) => {
    const v = filtered[k];
    if (Array.isArray(v)) {
      const inline = v.map((item) => JSON.stringify(item)).join(", ");
      return `${k}: [${inline}]`;
    }
    if (typeof v === "string") {
      return `${k}: "${v}"`;
    }
    return `${k}: ${v}`;
  }).join("\n");
}
var SKILL_OPTIONS2 = [
  "Acrobatics",
  "Animal Handling",
  "Arcana",
  "Athletics",
  "Deception",
  "History",
  "Insight",
  "Intimidation",
  "Investigation",
  "Medicine",
  "Nature",
  "Perception",
  "Performance",
  "Persuasion",
  "Religion",
  "Sleight of Hand",
  "Stealth",
  "Survival"
];
var SPELL_KEYS2 = [
  "NAME",
  "LEVEL",
  "SCHOOL",
  "CASTING_TIME",
  "SPELL_RANGE",
  "DURATION",
  "VERBAL",
  "SOMATIC",
  "MATERIAL",
  "COMPONENTS",
  "CONCENTRATION",
  "SOURCE",
  "RULESET"
];
var SPECIES_KEYS2 = [
  "SPECIES",
  "SIZE",
  "SPEED",
  "LANGUAGES",
  "TRAITS",
  "SKILLS",
  "STR_MOD",
  "DEX_MOD",
  "CON_MOD",
  "INT_MOD",
  "WIS_MOD",
  "CHA_MOD",
  "SKILL_CHOICE_LIST",
  "TOOL_PROFICIENCIES",
  "TOOL_CHOICE_LIST",
  "WEAPON_PROFICIENCIES",
  "SENSES",
  "DAMAGE_RES",
  "SOURCE",
  "RULESET"
];
var ITEM_KEYS2 = [
  "NAME",
  "TYPE",
  "RARITY",
  "COST",
  "WEIGHT",
  "PROPERTIES",
  "DAMAGE",
  "DAMAGE_TYPES",
  "RANGE",
  "RELOAD",
  "AMMO_TYPE",
  "AC",
  "STEALTH_DISADVANTAGE",
  "MAGICAL",
  "ATTUNEMENT",
  "ATTUNE_REQ",
  "SOURCE",
  "RULESET"
];
var BESTIARY_KEYS2 = [
  "NAME",
  "SIZE",
  "TYPE",
  "ALIGNMENT",
  "AC",
  "HP",
  "SPEED",
  "STRENGTH",
  "DEXTERITY",
  "CONSTITUTION",
  "INTELLIGENCE",
  "WISDOM",
  "CHARISMA",
  "SAVING_THROWS",
  "SKILLS",
  "SENSES",
  "LANGUAGES",
  "CHALLENGE_RATING",
  "SOURCE",
  "RULESET"
];
var CLASS_KEYS2 = [
  "NAME",
  "SPELL_CAST_MOD",
  "ARMOR_PROFICIENCIES",
  "WEAPON_PROFICIENCIES",
  "TOOL_PROFICIENCIES",
  "TOOL_CHOICE_LIST",
  "SAVING_THROWS",
  "SKILLS",
  "SKILL_CHOICE_LIST",
  "TRAITS",
  "SOURCE",
  "RULESET"
];
var BACKGROUND_KEYS2 = [
  "NAME",
  "SKILLS",
  "SKILL_CHOICE_LIST",
  "TOOL_PROFICIENCIES",
  "TOOL_CHOICE_LIST",
  "TRAITS",
  "SOURCE",
  "RULESET"
];
var FEATS_KEYS2 = [
  "SOURCE",
  "RULESET"
];
var SPELL_META_DEFS2 = SPELL_KEYS2.map((key) => {
  const def = ALL_FIELD_DEFS2.find((d) => d.callSign === key);
  if (!def) throw new Error(`Missing FieldDef for SPELL_KEY ${key}`);
  return def;
});
var SPECIES_META_DEFS2 = SPECIES_KEYS2.map((key) => {
  const def = ALL_FIELD_DEFS2.find((d) => d.callSign === key);
  if (!def) throw new Error(`Missing FieldDef for SPECIES_KEY ${key}`);
  return def;
});
var ITEM_META_DEFS2 = ITEM_KEYS2.map((key) => {
  const def = ALL_FIELD_DEFS2.find((d) => d.callSign === key);
  if (!def) throw new Error(`Missing FieldDef for ITEM_KEY ${key}`);
  return def;
});
var BESTIARY_META_DEFS2 = BESTIARY_KEYS2.map((key) => {
  const def = ALL_FIELD_DEFS2.find((d) => d.callSign === key);
  if (!def) throw new Error(`Missing FieldDef for BESTIARY_KEY ${key}`);
  return def;
});
var CLASS_META_DEFS2 = CLASS_KEYS2.map((key) => {
  const def = ALL_FIELD_DEFS2.find((d) => d.callSign === key);
  if (!def) throw new Error(`Missing FieldDef for CLASS_KEY ${key}`);
  return def;
});
var BACKGROUND_META_DEFS2 = BACKGROUND_KEYS2.map((key) => {
  const def = ALL_FIELD_DEFS2.find((d) => d.callSign === key);
  if (!def) throw new Error(`Missing FieldDef for BACKGROUND_KEY ${key}`);
  return def;
});
var FEATS_META_DEFS2 = FEATS_KEYS2.map((key) => {
  const def = ALL_FIELD_DEFS2.find((d) => d.callSign === key);
  if (!def) throw new Error(`Missing FieldDef for BACKGROUND_KEY ${key}`);
  return def;
});

// src/parsers/5e-2025/spells.ts
var SCHOOL_MAP2 = {
  A: "Abjuration",
  C: "Conjuration",
  D: "Divination",
  E: "Enchantment",
  V: "Evocation",
  I: "Illusion",
  N: "Necromancy",
  T: "Transmutation"
};
function ordinal2(n) {
  const suffix = n === 1 ? "st" : n === 2 ? "nd" : n === 3 ? "rd" : "th";
  return `${n}${suffix}`;
}
function formatRange2(range) {
  if (!range) return "";
  if (typeof range === "string") return range;
  if (range.type === "special") return "Special";
  if (range.type === "point" && range.distance) {
    const dist = range.distance;
    if (dist.type === "touch") return "Touch";
    if (dist.type === "self") return "Self";
    if (dist.type === "sight") return "Sight";
    if (dist.amount) return `${dist.amount} ${dist.type}`;
  }
  return "Varies";
}
function formatTime2(time) {
  if (!Array.isArray(time)) return "";
  return time.map((t) => `${t.number} ${t.unit}`).join(", ");
}
function formatDuration2(duration) {
  if (!Array.isArray(duration)) return "";
  return duration.map((d) => {
    if (d.type === "instant") return "Instantaneous";
    if (d.type === "timed" && d.duration) {
      return `${d.duration.amount} ${d.duration.type}${d.concentration ? " (concentration)" : ""}`;
    }
    if (d.type === "permanent") return "Permanent";
    return "Special";
  }).join(", ");
}
function formatComponents2(components) {
  if (!components) return "";
  const parts = [];
  if (components.v) parts.push("V");
  if (components.s) parts.push("S");
  if (components.m) {
    let matDetails = [];
    if (Array.isArray(components.m)) {
      matDetails = components.m.map(
        (item) => typeof item === "string" ? item : item && typeof item.text === "string" ? item.text : null
      ).filter((t) => !!t);
    } else if (typeof components.m === "string") {
      matDetails = [components.m];
    } else if (components.m.text) {
      matDetails = [components.m.text];
    }
    const matPart = matDetails.length > 0 ? `M (${matDetails.join(", ")})` : "M";
    parts.push(matPart);
  }
  return parts.join(", ");
}
function parseSpellsFile2(json, editionId) {
  if (!json.spell) return [];
  json._editionId = editionId;
  return json.spell.map((spell) => {
    const sources = spell.source ? Array.isArray(spell.source) ? spell.source : [spell.source] : ["unknown"];
    const name = spell.name;
    const school = SCHOOL_MAP2[spell.school] ?? spell.school;
    const level = spell.level;
    const range = formatRange2(spell.range);
    const castingTime = formatTime2(spell.time);
    const duration = formatDuration2(spell.duration);
    const formattedSources = sources.map((s) => getFullSourceName2(s, editionId));
    const attackType = spell.attackType || "";
    const damageType = spell.damageInflict?.[0] || "Teleportation";
    const ritual = spell.ritual === true;
    const concentration = spell.duration?.some((d) => d.concentration) ?? false;
    const FM = buildFM2(spell, SPELL_META_DEFS2);
    const yaml = serializeFrontmatter2(FM, SPELL_META_DEFS2);
    const safeName = name.replace(/\//g, "-");
    const title = `# ${name}`;
    const levelLabel = level === 0 ? `${school} Cantrip` : `${ordinal2(level)}-level ${school} Spell`;
    const subtitle = `### *${levelLabel}*${concentration ? " *(Concentration)*" : ""}`;
    const headerLines = [
      title,
      subtitle,
      `**Casting Time:** ${castingTime}`,
      `**Range:** ${range}`,
      `**Components:** ${formatComponents2(spell.components)}`,
      `**Duration:** ${duration}`
    ];
    const bodyLines = [
      ...(spell.entries ?? []).map((e) => formatEntry2(e)),
      ...(spell.entriesHigherLevel ?? []).map((e) => formatEntry2(e))
    ];
    const footerLines = [
      `---`,
      `**Source:** ${formattedSources.join(", ")}`
    ];
    return {
      path: `${safeName}.md`,
      content: [
        `---
${yaml}
---`,
        headerLines.join("\n"),
        ``,
        bodyLines.join("\n\n"),
        ``,
        footerLines.join("\n")
      ].join("\n")
    };
  });
}

// src/parsers/5e-2025/species.ts
function slug2(name) {
  return name.replace(/;/g, ":").replace(/[\/:"]/g, ":").trim();
}
var BLOCKED_TRAITS2 = ["Age", "Size", "Languages", "Creature Type", "Speed"];
function parseSpeciesFile2(json, editionId) {
  if (!Array.isArray(json.race)) return [];
  json._editionId = editionId;
  const rawVariants = json.race.filter(
    (r) => (r.basicRules === true || r.basicRules2024 === true) && !/\((?:Kaladesh|Zendikar|Amonkhet|Innistrad|Ixalan)\)$/.test(r.name)
  );
  const byName = /* @__PURE__ */ new Map();
  for (const r of rawVariants) {
    const list = byName.get(r.name) ?? [];
    list.push(r);
    byName.set(r.name, list);
  }
  const subracesList = Array.isArray(json.subrace) ? json.subrace : [];
  const out = [];
  for (const [raceName, raceVariants] of byName.entries()) {
    const safeName = slug2(raceName);
    const primary = raceVariants.reduce(
      (best, cur) => Object.keys(cur).length > Object.keys(best).length ? cur : best,
      raceVariants[0]
    );
    if (!primary.ability) {
      const humanEntry = subracesList.find(
        (sr) => sr.raceName === raceName && sr.raceSource === primary.source && !("name" in sr) && Array.isArray(sr.ability)
      );
      if (humanEntry) primary.ability = humanEntry.ability;
    }
    const fm = buildFM2(primary, SPECIES_META_DEFS2);
    const senses = [];
    if (primary.darkvision) senses.push(`Darkvision ${primary.darkvision} ft.`);
    if (primary.blindsight) senses.push(`Blindsight ${primary.blindsight} ft.`);
    if (primary.tremorsense) senses.push(`Tremorsense ${primary.tremorsense} ft.`);
    if (primary.truesight) senses.push(`Truesight ${primary.truesight} ft.`);
    if (senses.length) fm.senses = senses;
    if (Array.isArray(fm.traits)) {
      fm.traits = fm.traits.filter((t) => !BLOCKED_TRAITS2.includes(t));
    }
    const yaml = serializeFrontmatter2(fm, SPECIES_META_DEFS2);
    const lines = [];
    lines.push(`# ${raceName}`, `## Stats`);
    const size = Array.isArray(primary.size) ? primary.size.map((s) => SIZE_MAP4[s] || s).join("/") : SIZE_MAP4[primary.size] ?? primary.size;
    lines.push(`**Size:** ${size}`);
    const speed = typeof primary.speed === "number" ? primary.speed : primary.speed?.walk ?? primary.speed?.base ?? 0;
    lines.push(`**Speed:** ${speed} ft. walking`);
    const kids = subracesList.filter(
      (sr) => sr.name && sr.raceName === raceName && sr.raceSource === primary.source
    );
    const rawAbility = Array.isArray(primary.ability) ? primary.ability : Array.isArray(kids[0]?.ability) ? kids[0].ability : [];
    if (Array.isArray(rawAbility) && rawAbility.length) {
      const bonuses = { str: 0, dex: 0, con: 0, int: 0, wis: 0, cha: 0 };
      let chooseOpt = null;
      for (const obj of rawAbility) {
        if ("choose" in obj) chooseOpt = obj.choose;
        else for (const [k, v] of Object.entries(obj)) bonuses[k] += v;
      }
      const pairs = Object.entries(bonuses);
      const parts = pairs.filter(([, v]) => v !== 0).map(([k, v]) => `${k.toUpperCase()} ${v >= 0 ? "+" : ""}${v}`);
      if (chooseOpt?.count && Array.isArray(chooseOpt.from)) {
        parts.push(`CHOOSE ${chooseOpt.count} from ${chooseOpt.from.map((s) => s.toUpperCase()).join(", ")}`);
      }
      if (parts.length) lines.push(`**Ability Scores:** ${parts.join(", ")}`);
    }
    const langs = fm.languages;
    if (langs?.length) lines.push(`**Languages:** ${langs.join(", ")}`);
    if (Array.isArray(primary.skillProficiencies)) {
      const skillLabels = [];
      for (const e of primary.skillProficiencies) {
        if (e.choose?.from) {
          skillLabels.push(`Choose from: ${e.choose.from.map((s) => s.charAt(0).toUpperCase() + s.slice(1)).join(", ")}`);
        } else {
          const val = e.proficiency ?? e.name ?? e;
          if (typeof val === "string") skillLabels.push(val.charAt(0).toUpperCase() + val.slice(1));
        }
      }
      if (skillLabels.length) lines.push(`**Skill Proficiencies:** ${skillLabels.join("; ")}`);
    }
    const tp = fm[FM_FIELDS4.TOOL_PROFICIENCIES];
    const wp = fm[FM_FIELDS4.WEAPON_PROFICIENCIES];
    const ap = fm[FM_FIELDS4.ARMOR_PROFICIENCIES];
    if (tp?.length) lines.push(`**Tool Proficiencies:** ${tp.join(", ")}`);
    if (wp?.length) lines.push(`**Weapon Proficiencies:** ${wp.join(", ")}`);
    if (ap?.length) lines.push(`**Armor Proficiencies:** ${ap.join(", ")}`);
    lines.push(`## Traits`);
    const seen = /* @__PURE__ */ new Set();
    for (const trait of fm.traits || []) {
      lines.push(`##### ${trait}`);
      const ent = primary.entries?.find((e) => e.name === trait);
      if (ent?.entries) {
        ent.entries.forEach((sub, idx) => {
          let blk;
          if (sub.type === "table") blk = renderMarkdownTable2(sub);
          else if (sub.type === "list") blk = sub.items.map((it) => typeof it === "string" ? `- ${replace5eTags2(it)}` : `- ${it.name}`).join("\n");
          else if (typeof sub === "string") blk = replace5eTags2(sub);
          if (blk && !seen.has(blk)) {
            lines.push(blk);
            seen.add(blk);
            if (ent.entries.length > 1 && idx < ent.entries.length - 1) lines.push("");
          }
        });
      }
    }
    const subs = kids;
    if (subs.length) {
      out.push({
        path: `Species/${safeName}/${safeName}.md`,
        content: `---
${yaml}
---

${lines.join("\n")}`
      });
      const subFolder = `Species/${safeName}/Subspecies`;
      for (const sr of subs) {
        const display = sr.name.replace(/;/g, ":");
        const subLines = [`# ${display}`];
        if (Array.isArray(sr.ability)) {
          const bonuses = { str: 0, dex: 0, con: 0, int: 0, wis: 0, cha: 0 };
          let chooseOpt = null;
          for (const obj of sr.ability) {
            if ("choose" in obj) chooseOpt = obj.choose;
            else for (const [k, v] of Object.entries(obj)) bonuses[k] += v;
          }
          const pairs = Object.entries(bonuses);
          const parts = pairs.filter(([, v]) => v !== 0).map(([k, v]) => `${k.toUpperCase()} ${v >= 0 ? "+" : ""}${v}`);
          if (chooseOpt?.count) parts.push(`CHOOSE ${chooseOpt.count} from ${chooseOpt.from.map((s) => s.toUpperCase()).join(", ")}`);
          if (parts.length) subLines.push(`**Ability Scores:** ${parts.join(", ")}`);
        }
        for (const entry of sr.entries || []) {
          subLines.push(formatEntry2(entry));
          subLines.push("");
        }
        const subYaml = serializeFrontmatter2(buildFM2(sr, SPECIES_META_DEFS2), SPECIES_META_DEFS2);
        out.push({
          path: `${subFolder}/${slug2(sr.name)}.md`,
          content: `---
${subYaml}
---

${subLines.join("\n")}`
        });
      }
    } else {
      out.push({
        path: `Species/${safeName}.md`,
        content: `---
${yaml}
---

${lines.join("\n")}`
      });
    }
  }
  return out.sort((a, b) => a.path.localeCompare(b.path));
}

// src/parsers/5e-2025/classes.ts
function isTypedEntry2(x) {
  return x != null && typeof x === "object" && !Array.isArray(x) && typeof x.type === "string";
}
function formatFeatureLink2(name) {
  const ignore = ["Ability Score Improvement", "Archetype Feature", "Subclass Feature"];
  if (ignore.some((sub) => name.toLowerCase().includes(sub.toLowerCase()))) {
    return name;
  }
  const anchor = name.replace(/[^\w\s]/g, "").replace(/-/g, " ").replace(/\s+/g, " ").trim().replace(/\b\w/g, (l) => l.toUpperCase());
  return `[[#${anchor}]]`;
}
var OPT_FEATURE_TYPE_TO_FULL2 = {
  AI: "Artificer Infusion",
  ED: "Elemental Discipline",
  EI: "Eldritch Invocation",
  MM: "Metamagic",
  MV: "Maneuver",
  "MV:B": "Maneuver, Battle Master",
  "MV:C2-UA": "Maneuver, Cavalier V2 (UA)",
  "AS:V1-UA": "Arcane Shot, V1 (UA)",
  "AS:V2-UA": "Arcane Shot, V2 (UA)",
  AS: "Arcane Shot",
  OTH: "Other",
  "FS:F": "Fighting Style; Fighter",
  "FS:B": "Fighting Style; Bard",
  "FS:P": "Fighting Style; Paladin",
  "FS:R": "Fighting Style; Ranger",
  PB: "Pact Boon",
  OR: "Onomancy Resonant",
  RN: "Rune Knight Rune",
  AF: "Alchemical Formula",
  TT: "Traveler's Trick"
};
function parseClassFile2(json, editionId, fileName, optionalFeatures) {
  json._editionId = editionId;
  const cls = Array.isArray(json.class) ? json.class[0] : json;
  const className = typeof cls.name === "string" ? cls.name : fileName ? fileName.replace(/^class-/, "").replace(/\.json$/, "") : "Unknown";
  const subclassFiles = [];
  const PROF_BONUS_BY_LEVEL = [
    "+2",
    "+2",
    "+2",
    "+2",
    "+3",
    "+3",
    "+3",
    "+3",
    "+4",
    "+4",
    "+4",
    "+4",
    "+5",
    "+5",
    "+5",
    "+5",
    "+6",
    "+6",
    "+6",
    "+6"
  ];
  const hdNum = cls.hd?.number ?? 1;
  const hdFaces = cls.hd?.faces ?? 6;
  const hdStr = `${hdNum}d${hdFaces}`;
  const hdMax = hdNum * hdFaces;
  const hdAvg = Math.ceil((hdFaces + 1) / 2);
  const baseFM = buildFM2(cls, CLASS_META_DEFS2);
  const fm = { ...baseFM, hd: hdStr };
  const yaml = serializeFrontmatter2(fm, CLASS_META_DEFS2);
  const lines = [];
  lines.push(`# ${className}`);
  if (cls.source) lines.push(`**Source:** ${cls.source}`);
  lines.push(``);
  lines.push(`---`);
  lines.push(`## Hit Points`);
  lines.push(`**Hit Dice:** ${hdStr} per ${className} level`);
  lines.push(`**Hit Points at 1st Level:** ${hdMax} + your Constitution modifier`);
  lines.push(
    `**Hit Points at Higher Levels:** ${hdStr} (or ${hdAvg}) + your Constitution modifier per level after 1st`
  );
  lines.push(``);
  lines.push(`---`);
  lines.push(`## Proficiencies`);
  const sp = cls.startingProficiencies ?? {};
  if (Array.isArray(sp.armor) && sp.armor.length) {
    lines.push(`- **Armor:** ${sp.armor.join(", ")}`);
  }
  const weaponList = unifiedWeaponProfs2(sp);
  if (weaponList.length) {
    lines.push(`- **Weapons:** ${weaponList.join(", ")}`);
  }
  const toolList = unifiedToolProfs2(sp);
  if (toolList.length) {
    lines.push(`- **Tools:** ${toolList.join(", ")}`);
  }
  const saves = Array.isArray(cls.proficiency) ? cls.proficiency.map(
    (k) => ({
      str: "Strength",
      dex: "Dexterity",
      con: "Constitution",
      int: "Intelligence",
      wis: "Wisdom",
      cha: "Charisma"
    })[k] || k.toUpperCase()
  ) : [];
  if (saves.length) {
    lines.push(`- **Saving Throws:** ${saves.join(", ")}`);
  }
  {
    const rawSkills = Array.isArray(sp.skillProficiencies) ? sp.skillProficiencies : Array.isArray(sp.skills) ? sp.skills : Array.isArray(sp.skillProf) ? sp.skillProf : [];
    const choiceEntry = rawSkills.find(
      (e) => e && (typeof e.choose === "object" || typeof e.any === "number")
    );
    if (choiceEntry) {
      const count = choiceEntry.choose?.count ?? choiceEntry.any ?? 1;
      const options = Array.isArray(choiceEntry.choose?.from) ? choiceEntry.choose.from.map(
        (s) => (
          // title-case each word (or just use s)
          s.split(" ").map((w) => w[0].toUpperCase() + w.slice(1)).join(" ")
        )
      ) : SKILL_OPTIONS2;
      lines.push(`- **Skills (Choose ${count}):** ${options.join(", ")}`);
    } else {
      const flat = unifiedSkills4(sp);
      if (flat.length) {
        lines.push(`- **Skills:** ${flat.join(", ")}`);
      }
    }
  }
  if (Array.isArray(cls.startingEquipment)) {
    lines.push(`
### Equipment`);
    cls.startingEquipment.filter((e) => typeof e === "string").forEach((item) => lines.push(`- ${item}`));
  }
  const progGroups = cls.classTableGroups ?? [];
  const maxLevel = 20;
  if (!progGroups.length) {
    lines.push(`*(No class table provided for this class.)*`);
  } else {
    const featuresByLevel2 = {};
    for (const feat of cls.classFeatures ?? []) {
      const raw = typeof feat === "object" && feat.classFeature ? feat.classFeature : String(feat);
      const [name, , , lvlStr] = raw.split("|");
      const lvl = Number(lvlStr ?? 0);
      if (!featuresByLevel2[lvl]) featuresByLevel2[lvl] = [];
      featuresByLevel2[lvl].push(name);
    }
    const allLabelsSet = /* @__PURE__ */ new Set();
    const rowMaps = {};
    for (const group of progGroups) {
      const labels = Array.isArray(group.colLabels) ? group.colLabels.map((l) => replace5eTags2(l)) : [];
      const rows = Array.isArray(group.rows) ? group.rows : Array.isArray(group.rowsSpellProgression) ? group.rowsSpellProgression : [];
      if (!labels.length || !rows.length) continue;
      for (let lvl = 0; lvl < rows.length; lvl++) {
        const levelNum = lvl + 1;
        if (!rowMaps[levelNum]) rowMaps[levelNum] = {};
        const rowMap = rowMaps[levelNum];
        const cells = rows[lvl];
        for (let i = 0; i < labels.length; i++) {
          const label = labels[i];
          let val = "";
          const cell = cells[i];
          if (Array.isArray(cell)) {
            val = cell.join(", ");
          } else if (cell && typeof cell === "object" && "value" in cell) {
            val = String(cell.value);
          } else {
            val = String(cell ?? "");
          }
          allLabelsSet.add(label);
          rowMap[label] = val;
        }
      }
    }
    const allLabels = Array.from(allLabelsSet).filter(
      (lbl) => !/Cantrips Known|Spells Known|\d+(st|nd|rd|th)/.test(lbl)
    );
    const mergedLabels = ["Level", "Proficiency Bonus", "Class Features", ...allLabels];
    const mergedRows = [];
    for (let lvl = 1; lvl <= maxLevel; lvl++) {
      const featureList = (featuresByLevel2[lvl] ?? []).map(formatFeatureLink2);
      const rowMap = rowMaps[lvl] ?? {};
      mergedRows.push([
        lvl.toString(),
        PROF_BONUS_BY_LEVEL[lvl - 1] || "",
        featureList.join(", ").replace(/\|/g, "&#124;"),
        ...allLabels.map((label) => rowMap[label] ?? "")
      ]);
    }
    lines.push(`
> [!example]- Class Progression Table`);
    lines.push(
      renderMarkdownTable2({
        type: "table",
        caption: "",
        colLabels: mergedLabels,
        rows: mergedRows
      })
    );
  }
  const csGroup = progGroups.find(
    (g) => Array.isArray(g.colLabels) && g.colLabels.some((lbl) => /Cantrips Known|Spells Known/.test(String(lbl)))
  );
  const slotGroup = progGroups.find(
    (g) => Array.isArray(g.colLabels) && g.title === "Spell Slots per Spell Level"
  );
  if (csGroup && slotGroup) {
    const csLabels = csGroup.colLabels.map((l) => replace5eTags2(l));
    const slotLabels = slotGroup.colLabels.map((l) => replace5eTags2(l));
    const csRows = csGroup.rows || [];
    const slotRows = slotGroup.rowsSpellProgression || [];
    const colLabels = ["Level", ...csLabels, ...slotLabels];
    const spellRows = [];
    for (let i = 0; i < Math.max(csRows.length, slotRows.length); i++) {
      const lvl = String(i + 1);
      const csCells = csRows[i] ? csRows[i].map(String) : csLabels.map((_) => "");
      const slotCells = slotRows[i] ? slotRows[i].map(String) : slotLabels.map((_) => "");
      spellRows.push([lvl, ...csCells, ...slotCells]);
    }
    lines.push(`
> [!tip]- Spell Progression Table`);
    lines.push(
      renderMarkdownTable2({
        type: "table",
        caption: "",
        colLabels,
        rows: spellRows
      })
    );
  }
  const subs = Array.isArray(json.subclass) ? json.subclass : [];
  const subclassFeatures = Array.isArray(json.subclassFeature) ? json.subclassFeature : json.lookup?.subclassFeature ?? [];
  for (const sc of subs) {
    const subclassName = sc.name;
    const subLines = [];
    subLines.push(`# ${subclassName}`);
    subLines.push(`**Parent Class:** [[${className}]]`);
    if (sc.source) subLines.push(`**Source:** ${sc.source}`);
    subLines.push(``);
    const intro = subclassFeatures.find(
      (f) => f.name === sc.name && f.level === 3 && f.subclassShortName === sc.shortName && f.subclassSource === sc.source
    );
    if (intro?.entries?.length) {
      const introText = Array.isArray(intro.entries) ? intro.entries.map(
        (e) => typeof e === "string" ? replace5eTags2(e) : formatEntry2(e)
      ).join("\n\n") : formatEntry2(intro.entries);
      subLines.push(introText, ``);
    }
    const code = Object.entries(OPT_FEATURE_TYPE_TO_FULL2).find(
      ([, full]) => full.toLowerCase().includes(subclassName.toLowerCase())
    )?.[0];
    if (code) {
      const matches = optionalFeatures.filter(
        (of) => Array.isArray(of.featureType) && of.featureType.includes(code)
      );
      if (matches.length) {
        subLines.push(`## ${subclassName} Optional Features`);
        for (const feat of matches) {
          for (const entry of feat.entries) {
            const txt = typeof entry === "string" ? replace5eTags2(entry) : formatEntry2(entry);
            subLines.push(`**${feat.name}:** ${txt}`);
          }
          subLines.push(``);
        }
      }
    }
    const prog = sc.subclassTableGroups ?? [];
    if (prog.length) {
      const labels = /* @__PURE__ */ new Set();
      const rowsMap = {};
      for (const g of prog) {
        const cols = (g.colLabels ?? []).map(replace5eTags2);
        const rows = Array.isArray(g.rows) ? g.rows : Array.isArray(g.rowsSpellProgression) ? g.rowsSpellProgression : [];
        rows.forEach((r, i) => {
          const lvl = i + 1;
          rowsMap[lvl] ?? (rowsMap[lvl] = {});
          r.forEach((c, j) => {
            const lab = cols[j];
            if (!lab) return;
            labels.add(lab);
            rowsMap[lvl][lab] = typeof c === "object" && c !== null && "value" in c ? String(c.value) : String(c ?? "");
          });
        });
      }
      const hdrs = Array.from(labels);
      subLines.push(`## Subclass Progression`);
      subLines.push(renderMarkdownTable2({
        type: "table",
        caption: "",
        colLabels: ["Level", ...hdrs],
        rows: Array.from({ length: 20 }, (_, i) => {
          const lvl = i + 1;
          return [String(lvl), ...hdrs.map((h) => rowsMap[lvl]?.[h] ?? "")];
        })
      }));
    }
    const featsByLvl = {};
    for (const f of subclassFeatures) {
      if (f.subclassShortName === sc.shortName && f.subclassSource === sc.source && f.className === className) {
        const lvl = f.level ?? 0;
        ;
        (featsByLvl[lvl] ?? (featsByLvl[lvl] = [])).push(f);
      }
    }
    for (const lvl of Object.keys(featsByLvl).map(Number).sort((a, b) => a - b)) {
      subLines.push(`---`, `## Level ${lvl}`);
      for (const f of featsByLvl[lvl]) {
        subLines.push(`### ${f.name}`);
        for (const ent of Array.isArray(f.entries) ? f.entries : [f.entries]) {
          if (typeof ent === "string") {
            subLines.push(replace5eTags2(ent));
            continue;
          }
          if (isTypedEntry2(ent) && ent.type === "entries" && /^Maneuvers$/i.test(ent.name)) {
            subLines.push(`##### ${ent.name}`);
            for (const txt of Array.isArray(ent.entries) ? ent.entries : [ent.entries]) {
              subLines.push(typeof txt === "string" ? replace5eTags2(txt) : formatEntry2(txt));
            }
            const code2 = Object.entries(OPT_FEATURE_TYPE_TO_FULL2).find(
              ([, full]) => full.toLowerCase().includes(subclassName.toLowerCase())
            )?.[0];
            if (code2) {
              const matches = optionalFeatures.filter(
                (of) => Array.isArray(of.featureType) && of.featureType.includes(code2)
              );
              for (const featDef of matches) {
                for (const sub of featDef.entries) {
                  const line = typeof sub === "string" ? replace5eTags2(sub) : formatEntry2(sub);
                  subLines.push(`**${featDef.name}:** ${line}`);
                }
                subLines.push("");
              }
            }
            continue;
          }
          if (isTypedEntry2(ent) && ent.type === "entries" && ent.name) {
            subLines.push(`##### ${ent.name}`);
            for (const e2 of Array.isArray(ent.entries) ? ent.entries : [ent.entries]) {
              subLines.push(formatEntry2(e2));
            }
            continue;
          }
          if (isTypedEntry2(ent) && ent.type === "inset" && ent.name) {
            const inner = Array.isArray(ent.entries) ? ent.entries : [ent.entries];
            subLines.push(`> **${ent.name}**`);
            inner.forEach((e2) => subLines.push(`> ${formatEntry2(e2)}`));
            continue;
          }
          const fb = formatEntry2(ent);
          if (fb) subLines.push(fb);
        }
      }
    }
    const subclassContent = subLines.join("\n\n").replace(/\n{3,}/g, "\n\n");
    subclassFiles.push({
      path: `Classes/${className}/Subclasses/${subclassName}.md`,
      content: subclassContent
    });
  }
  if (subs.length) {
    const links = subs.map(
      (sc) => `[[Subclasses/${sc.name.replace(/[\\/]/g, "-")}|${sc.name}]]`
    );
    lines.push(`
**Subclasses:** ${links.join(", ")}`);
  }
  const allFeatures = Array.isArray(json.classFeature) ? json.classFeature : json.lookup?.classFeature ?? [];
  const featuresByLevel = {};
  for (const entry of allFeatures) {
    if (entry.className !== className) continue;
    const lvl = entry.level ?? 0;
    if (!featuresByLevel[lvl]) featuresByLevel[lvl] = [];
    featuresByLevel[lvl].push(entry);
  }
  lines.push(``);
  lines.push(`---`);
  lines.push(`## Level Features`);
  const levels = Object.keys(featuresByLevel).map((n) => +n).sort((a, b) => a - b);
  for (const lvl of levels) {
    lines.push(`### Level ${lvl}`);
    for (const feat of featuresByLevel[lvl]) {
      lines.push(`#### ${feat.name}`);
      const entries = Array.isArray(feat.entries) ? feat.entries : [feat.entries];
      for (const ent of entries) {
        if (typeof ent === "string") {
          const txt = formatEntry2(ent).trim();
          if (txt === "{" || txt === "}") continue;
          lines.push(txt);
          continue;
        }
        if (isTypedEntry2(ent) && ent.type === "list" && Array.isArray(ent.items)) {
          for (const item of ent.items) {
            lines.push(`- ${replace5eTags2(item)}`);
          }
          continue;
        }
        if (isTypedEntry2(ent) && ent.type === "options") {
          if (ent.count) {
            lines.push("");
            lines.push(`**Choose ${ent.count} of the following options:**`);
            lines.push("");
          }
          for (const optRef of Array.isArray(ent.entries) ? ent.entries : [ent.entries]) {
            if (optRef.type === "refOptionalfeature") {
              const [optName, optSrc] = optRef.optionalfeature.split("|");
              const featDef = optionalFeatures.find(
                (f) => f.name === optName && (!optSrc || f.source === optSrc)
              );
              if (featDef) {
                featDef.entries.forEach((subEntry, idx) => {
                  const text = typeof subEntry === "string" ? replace5eTags2(subEntry) : formatEntry2(subEntry);
                  if (idx === 0) {
                    lines.push(`- **${featDef.name}:** ${text}`);
                  } else {
                    lines.push(`  - ${text}`);
                  }
                });
                lines.push("");
              } else {
                lines.push(`**${optName}:**`);
              }
            } else {
              const txt = formatEntry2(optRef);
              if (txt) lines.push(`- ${txt}`);
            }
          }
          continue;
        }
        if (isTypedEntry2(ent) && ent.type === "refOptionalfeature") {
          const [name] = ent.optionalfeature.split("|");
          lines.push(`- [[${name}|${name}]]`);
          continue;
        }
        if (isTypedEntry2(ent) && ent.type === "entries" && ent.name) {
          lines.push(`##### ${ent.name}`);
          const inner = Array.isArray(ent.entries) ? ent.entries : [ent.entries];
          for (const e2 of inner) {
            lines.push(formatEntry2(e2));
          }
          continue;
        }
        const fallback = formatEntry2(ent);
        if (fallback) lines.push(fallback);
      }
      lines.push(``);
    }
    lines.push(`---`);
  }
  let content = `---
${yaml}
---

${lines.join("\n")}`;
  content = replace5eTags2(content);
  content = content.replace(/\n{3,}/g, "\n\n").replace(/\n +\n/g, "\n\n");
  return [
    {
      path: `Classes/${className}/${className}.md`,
      content
    },
    ...subclassFiles
  ];
}

// src/parsers/5e-2025/rules.ts
function parseActionsFile2(json, editionId) {
  if (!Array.isArray(json.action)) return [];
  const lines = [];
  function emitBlock(block) {
    if (!block) return;
    if (typeof block === "string") {
      for (const para of block.split(/\n{2,}/)) {
        const t = para.trim();
        if (t) {
          lines.push(replace5eTags2(t));
          lines.push("");
        }
      }
      return;
    }
    if (block.type === "list" && Array.isArray(block.items)) {
      for (const item of block.items) {
        lines.push(`- ${replace5eTags2(item)}`);
      }
      lines.push("");
      return;
    }
    if (block.type === "table" && Array.isArray(block.rows)) {
      const headers = block.colLabels || [];
      lines.push(`| ${headers.join(" | ")} |`);
      lines.push(`| ${headers.map(() => "---").join(" | ")} |`);
      for (const row of block.rows) {
        lines.push(`| ${row.join(" | ")} |`);
      }
      lines.push("");
      return;
    }
    if ((block.type === "entries" || block.type === "inset") && Array.isArray(block.entries)) {
      if (block.name) {
        if (lines[lines.length - 1] === "") lines.pop();
        lines.push(`### ${block.name}`);
      }
      for (const child of block.entries) {
        emitBlock(child);
      }
      return;
    }
    const txt = Array.isArray(block) ? block.join(" ") : typeof block === "object" ? JSON.stringify(block) : String(block);
    lines.push(replace5eTags2(txt));
    lines.push("");
  }
  for (const action of json.action) {
    lines.push(`## ${action.name}`);
    for (const entry of Array.isArray(action.entries) ? action.entries : [action.entries]) {
      emitBlock(entry);
    }
    if (Array.isArray(action.seeAlsoAction)) {
      lines.push("**See Also:**");
      lines.push("");
      for (const ref of action.seeAlsoAction) {
        const [name] = String(ref).split("|");
        lines.push(`- [[${name}]]`);
      }
      lines.push("");
    }
    lines.push("---");
  }
  const cleaned = lines.reduce((acc, curr) => {
    if (curr === "" && acc.length && acc[acc.length - 1] === "") return acc;
    return acc.concat(curr);
  }, []);
  return [
    {
      path: "Rules and Reference/Actions.md",
      content: cleaned.join("\n").trim() + "\n"
    }
  ];
}
function parseConditionsDiseasesFile2(json, editionId) {
  const outputs = [];
  const processItems = (items, outPath) => {
    const lines = [];
    for (const item of items) {
      lines.push(`## ${item.name}`);
      const entries = Array.isArray(item.entries) ? item.entries : [item.entries];
      for (const entry of entries) {
        if (!entry) continue;
        if (typeof entry === "string") {
          for (const para of entry.split(/\n{2,}/)) {
            const t = para.trim();
            if (t) {
              lines.push(replace5eTags2(t));
              lines.push("");
            }
          }
        } else if (entry.type === "list" && Array.isArray(entry.items)) {
          for (const txt of entry.items) {
            lines.push(`- ${replace5eTags2(txt)}`);
          }
          lines.push("");
        } else if (entry.type === "table" && Array.isArray(entry.rows)) {
          const headers = entry.colLabels || [];
          lines.push(`| ${headers.join(" | ")} |`);
          lines.push(`| ${headers.map(() => "---").join(" | ")} |`);
          for (const row of entry.rows) {
            lines.push(`| ${row.join(" | ")} |`);
          }
          lines.push("");
        } else if (entry.type === "entries" && Array.isArray(entry.entries)) {
          if (entry.name) {
            lines.push(`### ${entry.name}`);
            for (const sub of entry.entries) {
              if (sub.type === "entries" && sub.name && Array.isArray(sub.entries)) {
                if (lines[lines.length - 1] === "") lines.pop();
                lines.push(`#### ${sub.name}`);
                for (const txtEntry of sub.entries) {
                  const text = typeof txtEntry === "string" ? replace5eTags2(txtEntry) : replace5eTags2(String(txtEntry));
                  lines.push(text);
                  lines.push("");
                }
              } else if (typeof sub === "string") {
                lines.push(replace5eTags2(sub));
                lines.push("");
              }
            }
          } else {
            for (const sub of entry.entries) {
              if (sub.type === "entries" && sub.name && Array.isArray(sub.entries)) {
                if (lines[lines.length - 1] === "") lines.pop();
                lines.push(`### ${sub.name}`);
                for (const txtEntry of sub.entries) {
                  const text = typeof txtEntry === "string" ? replace5eTags2(txtEntry) : replace5eTags2(String(txtEntry));
                  lines.push(text);
                  lines.push("");
                }
              } else if (typeof sub === "string") {
                lines.push(replace5eTags2(sub));
                lines.push("");
              }
            }
          }
        } else {
          const txt = Array.isArray(entry) ? entry.join(" ") : typeof entry === "object" ? JSON.stringify(entry) : String(entry);
          lines.push(replace5eTags2(txt));
          lines.push("");
        }
      }
      lines.push("---");
    }
    const cleaned = lines.reduce((acc, curr) => {
      if (curr === "" && acc.length && acc[acc.length - 1] === "") return acc;
      return acc.concat(curr);
    }, []);
    outputs.push({
      path: outPath,
      content: cleaned.join("\n").trim() + "\n"
    });
  };
  processItems(json.condition || [], "Rules and Reference/Conditions.md");
  processItems(json.disease || [], "Rules and Reference/Diseases.md");
  return outputs;
}
function parseSensesFile2(json, editionId) {
  const items = Array.isArray(json.sense) ? json.sense : Array.isArray(json.senses) ? json.senses : [];
  if (!items.length) return [];
  const lines = [];
  function emitBlock(block) {
    if (!block) return;
    if (typeof block === "string") {
      for (const para of block.split(/\n{2,}/)) {
        const t = para.trim();
        if (t) {
          lines.push(replace5eTags2(t));
          lines.push("");
        }
      }
      return;
    }
    if (block.type === "list" && Array.isArray(block.items)) {
      for (const item of block.items) {
        if (typeof item === "string") {
          lines.push(`- ${replace5eTags2(item)}`);
          lines.push("");
        } else if (item && typeof item === "object") {
          if (item.name && Array.isArray(item.entries)) {
            lines.push(`- **${item.name}**`);
            for (const ent of item.entries) {
              lines.push(`  - ${replace5eTags2(ent)}`);
            }
            lines.push("");
          } else {
            lines.push(`- ${replace5eTags2(JSON.stringify(item))}`);
            lines.push("");
          }
        }
      }
      return;
    }
    if (block.type === "table" && Array.isArray(block.rows)) {
      const headers = block.colLabels || [];
      lines.push(`| ${headers.join(" | ")} |`);
      lines.push(`| ${headers.map(() => "---").join(" | ")} |`);
      for (const row of block.rows) {
        lines.push(`| ${row.join(" | ")} |`);
      }
      lines.push("");
      return;
    }
    if ((block.type === "entries" || block.type === "inset") && Array.isArray(block.entries)) {
      if (block.name) {
        if (lines[lines.length - 1] === "") lines.pop();
        lines.push(`### ${block.name}`);
      }
      for (const child of block.entries) {
        emitBlock(child);
      }
      return;
    }
    const txt = Array.isArray(block) ? block.join(" ") : typeof block === "object" ? JSON.stringify(block) : String(block);
    lines.push(replace5eTags2(txt));
    lines.push("");
  }
  for (const sense of items) {
    lines.push(`## ${sense.name}`);
    for (const entry of Array.isArray(sense.entries) ? sense.entries : [sense.entries]) {
      emitBlock(entry);
    }
    lines.push("---");
  }
  const cleaned = lines.reduce((acc, curr) => {
    if (curr === "" && acc.length && acc[acc.length - 1] === "") return acc;
    return acc.concat(curr);
  }, []);
  return [
    {
      path: "Rules and Reference/Senses.md",
      content: cleaned.join("\n").trim() + "\n"
    }
  ];
}
function parseSkillsFile2(json, editionId) {
  const items = Array.isArray(json.skill) ? json.skill : Array.isArray(json.skills) ? json.skills : [];
  if (!items.length) return [];
  const lines = [];
  for (const skill of items) {
    lines.push(`## ${skill.name}`);
    if (skill.ability) {
      lines.push(`*Ability: ${skill.ability}*`);
      lines.push("");
    }
    const entries = Array.isArray(skill.entries) ? skill.entries : [skill.entries];
    for (const entry of entries) {
      if (!entry) continue;
      if (typeof entry === "string") {
        const paras = entry.split(/\n{2,}/);
        for (const para of paras) {
          const t = para.trim();
          if (t) {
            lines.push(replace5eTags2(t));
            lines.push("");
          }
        }
      } else if (entry.type === "list" && Array.isArray(entry.items)) {
        for (const item of entry.items) {
          lines.push(`- ${replace5eTags2(item)}`);
        }
        lines.push("");
      } else {
        const txt = Array.isArray(entry) ? entry.join(" ") : String(entry);
        lines.push(replace5eTags2(txt));
        lines.push("");
      }
    }
    lines.push("---");
  }
  const cleaned = lines.reduce((acc, curr) => {
    if (curr === "" && acc.length && acc[acc.length - 1] === "") return acc;
    return acc.concat(curr);
  }, []);
  return [
    {
      path: "Rules and Reference/Skills.md",
      content: cleaned.join("\n").trim() + "\n"
    }
  ];
}

// src/parsers/5e-2025/feats.ts
function parseFeatsFile2(json, editionId) {
  const feats = Array.isArray(json.feat) ? json.feat : Array.isArray(json.feats) ? json.feats : [];
  return feats.map((feat) => {
    const lines = [];
    const fm = buildFM2({ ...feat, _editionId: editionId }, FEATS_META_DEFS2);
    lines.push("---");
    lines.push(serializeFrontmatter2(fm, FEATS_META_DEFS2));
    lines.push("---", "");
    lines.push(`# ${feat.name}`, "");
    const prereqs = [];
    if (Array.isArray(feat.prerequisite)) {
      feat.prerequisite.forEach((pr) => {
        if (pr.level) prereqs.push(`Level ${pr.level}`);
        if (Array.isArray(pr.feat)) {
          pr.feat.forEach((f) => {
            const name = f.split("|")[0].replace(/\b\w/g, (c) => c.toUpperCase());
            prereqs.push(`Prerequisite: [[${name}]]`);
          });
        }
      });
    }
    if (feat.spellcastingPrepared) prereqs.push(`Prerequisite: Spellcaster`);
    if (Array.isArray(feat.toolProficiencies)) {
      feat.toolProficiencies.forEach((tp) => {
        Object.entries(tp).forEach(([key]) => {
          if (key === "anyArtisansTool") {
            prereqs.push(`Prerequisite: Proficient with an artisan's tool`);
          } else {
            prereqs.push(`Prerequisite: Proficient with ${key.replace(/([A-Z])/g, " $1").trim()}`);
          }
        });
      });
    }
    if (Array.isArray(feat.armorProficiencies)) {
      feat.armorProficiencies.forEach((arm) => {
        const armStr = typeof arm === "string" ? arm : JSON.stringify(arm);
        prereqs.push(`Prerequisite: Proficient with ${armStr.replace(/([A-Z])/g, " $1").trim()}`);
      });
    }
    if (feat.race) prereqs.push(`Prerequisite: ${feat.race}`);
    if (prereqs.length) {
      lines.push("**Prerequisites**");
      prereqs.forEach((p) => lines.push(`- ${p}`));
      lines.push("");
    }
    const entries = Array.isArray(feat.entries) ? feat.entries : [feat.entries];
    entries.forEach((entry) => {
      if (!entry) return;
      if (typeof entry === "string") {
        entry.split(/\n{2,}/).forEach((p) => {
          const t = p.trim();
          if (t) {
            lines.push(replace5eTags2(t));
            lines.push("");
          }
        });
      } else if (entry.type === "list" && Array.isArray(entry.items)) {
        entry.items.forEach((it) => {
          if (typeof it === "string") {
            lines.push(`- ${replace5eTags2(it)}`);
          } else if (it.type === "item" && it.name) {
            lines.push(`- **${it.name}**`);
            const subs = Array.isArray(it.entries) ? it.entries : [it.entries];
            subs.forEach(
              (s) => lines.push(`  - ${replace5eTags2(typeof s === "string" ? s : JSON.stringify(s))}`)
            );
          }
        });
        lines.push("");
      } else if (entry.type === "inset") {
        lines.push(`- *${entry.name}*`);
        const subs = Array.isArray(entry.entries) ? entry.entries : [entry.entries];
        subs.forEach((s) => lines.push(`  - ${replace5eTags2(s)}`));
        lines.push("");
      } else if ((entry.type === "section" || entry.type === "entries") && Array.isArray(entry.entries)) {
        if (entry.name) {
          lines.push(`## ${entry.name}`);
          lines.push("");
        }
        entry.entries.forEach((s) => {
          lines.push(replace5eTags2(typeof s === "string" ? s : JSON.stringify(s)));
          lines.push("");
        });
      } else if (entry.type === "table" && Array.isArray(entry.rows)) {
        const hdr = entry.colLabels || [];
        lines.push(`| ${hdr.join(" | ")} |`);
        lines.push(`| ${hdr.map(() => "---").join(" | ")} |`);
        entry.rows.forEach(
          (row) => lines.push(`| ${row.join(" | ")} |`)
        );
        lines.push("");
      }
    });
    return {
      path: `Player Build/Feats/${feat.name}.md`,
      content: lines.join("\n").trim() + "\n"
    };
  });
}

// src/parsers/5e-2025/backgrounds.ts
function parseBackgroundsFile2(json, editionId) {
  const raw = Array.isArray(json.background) ? json.background : Array.isArray(json.backgrounds) ? json.backgrounds : [];
  const backgrounds = raw.filter((bg) => {
    const nm = bg.name || "";
    return !nm.startsWith("Variant") && !nm.includes("Baldur's Gate");
  });
  const outputs = [];
  backgrounds.forEach((bg) => {
    const lines = [];
    const fm = buildFM2(bg, BACKGROUND_META_DEFS2);
    const extraTraits = Array.isArray(bg.entries) ? bg.entries.filter((e) => e.data?.isFeature && typeof e.name === "string").map((e) => {
      const name = e.name.replace(/^Feature:\s*/, "");
      return `[[${bg.name}#${name}]]`;
    }) : [];
    const yaml = serializeFrontmatter2(fm, BACKGROUND_META_DEFS2);
    lines.push("---", yaml, "---", "");
    lines.push(`# ${bg.name}`, "");
    if (Array.isArray(bg.skillProficiencies) && bg.skillProficiencies.length) {
      const skills = [];
      bg.skillProficiencies.forEach((ent) => {
        if (typeof ent === "string") {
          skills.push(cap4(ent));
        } else if (ent.choose && Array.isArray(ent.choose.from)) {
          skills.push(`Choose ${ent.choose.amount} from ${ent.choose.from.join(", ")}`);
        } else {
          Object.entries(ent).filter(([, v]) => v === true).forEach(([k]) => skills.push(cap4(k)));
        }
      });
      lines.push(`**Skill Proficiencies:** ${skills.join(", ")}`, "");
    }
    if (Array.isArray(bg.languageProficiencies) && bg.languageProficiencies.length) {
      const langs = [];
      bg.languageProficiencies.forEach((ent) => {
        if (ent.anyStandard) {
          langs.push(`${ent.anyStandard} of your choice`);
        } else {
          Object.entries(ent).filter(([, v]) => v === true).forEach(([k]) => langs.push(cap4(k)));
        }
      });
      lines.push(`**Languages:** ${langs.join(", ")}`, "");
    }
    if (Array.isArray(bg.toolProficiencies) && bg.toolProficiencies.length) {
      const tools = [];
      bg.toolProficiencies.forEach((ent) => {
        if (ent.choose && Array.isArray(ent.choose.from)) {
          const list = ent.choose.from.map(humanize2).join(", ");
          tools.push(`Choose ${ent.choose.count} from ${list}`);
          return;
        }
        if (typeof ent === "string") {
          tools.push(humanize2(ent));
          return;
        }
        Object.entries(ent).filter(([_, v]) => v === true).forEach(([k]) => tools.push(humanize2(k)));
      });
      lines.push(`**Tool Proficiencies:** ${tools.join(", ")}`, "");
    }
    if (Array.isArray(bg.startingEquipment) && bg.startingEquipment.length) {
      lines.push(`**Equipment:**`);
      bg.startingEquipment.forEach((grp) => {
        if (Array.isArray(grp._)) {
          grp._.forEach((it) => lines.push(`- ${fmtItem2(it)}`));
        }
        ["a", "b"].forEach((key) => {
          if (Array.isArray(grp[key])) {
            grp[key].forEach((it) => lines.push(`- ${fmtItem2(it)}`));
          }
        });
      });
      lines.push("");
    }
    if (Array.isArray(bg.entries)) {
      bg.entries.forEach((entry) => {
        if (entry.type === "list" && entry.style === "list-hang-notitle") {
          return;
        }
        if (entry.name) {
          const header = entry.data?.isFeature ? entry.name.replace(/^Feature:\s*/, "") : entry.name;
          lines.push(`## ${header}`, "");
        }
        if (Array.isArray(entry.entries)) {
          entry.entries.forEach((e) => {
            if (typeof e === "string") {
              lines.push(replace5eTags2(e), "");
            } else if (e.type === "list" && Array.isArray(e.items)) {
              e.items.forEach(
                (it) => lines.push(`- ${replace5eTags2(it.entry ?? it)}`)
              );
              lines.push("");
            } else if (e.type === "table") {
              const tbl = renderMarkdownTable2(e);
              if (tbl) lines.push(tbl, "");
            }
          });
        } else if (entry.type === "list" && Array.isArray(entry.items)) {
          entry.items.forEach(
            (it) => lines.push(`- ${replace5eTags2(it.entry ?? it)}`)
          );
          lines.push("");
        }
      });
    }
    outputs.push({
      path: `Player Build/Backgrounds/${bg.name}.md`,
      content: lines.join("\n").trimEnd() + "\n"
    });
  });
  return outputs;
}
function cap4(str) {
  return str.charAt(0).toUpperCase() + str.slice(1);
}
function fmtItem2(item) {
  if (typeof item === "string") {
    if (item.includes("|")) {
      return replace5eTags2(`{@item ${item}}`);
    }
    return replace5eTags2(item);
  }
  const priceRaw = item.containsValue ?? item.value;
  if (typeof priceRaw === "number" && // make sure it’s not also an “item” or “equipmentType”
  !item.item && !item.equipmentType && !item.special) {
    const gp = priceRaw >= 100 ? priceRaw / 100 : priceRaw;
    return `${gp} gp`;
  }
  if (item.item) {
    const link = replace5eTags2(`{@item ${item.item}}`);
    if (typeof priceRaw === "number") {
      const gp = priceRaw >= 100 ? priceRaw / 100 : priceRaw;
      return `${link} (${gp} gp)`;
    }
    return link;
  }
  if (typeof item.special === "string") {
    return item.special;
  }
  if (item.equipmentType) {
    switch (item.equipmentType) {
      case "toolArtisan":
        return "One type of artisan\u2019s tools (of your choice)";
      case "instrumentMusical":
        return "One type of musical instrument (of your choice)";
      case "setGaming":
        return "One set of gaming dice (of your choice)";
      default:
        return humanize2(item.equipmentType);
    }
  }
  return replace5eTags2(JSON.stringify(item));
}
function humanize2(str) {
  const spaced = str.replace(/([a-z])([A-Z])/g, "$1 $2");
  return spaced.charAt(0).toUpperCase() + spaced.slice(1);
}

// src/parsers/5e-2025/installer.ts
var import_obsidian4 = require("obsidian");
async function listSpellFilesFromGitHub2(repo) {
  const url = `https://api.github.com/repos/${repo}/contents/data/spells`;
  const res = await fetch(url);
  const data = await res.json();
  return data.filter((item) => item.type === "file" && item.name.startsWith("spells-") && item.name.endsWith(".json")).map((item) => item.name);
}
async function listBestiaryFilesFromGitHub2(repo) {
  const url = `https://api.github.com/repos/${repo}/contents/data/bestiary`;
  const res = await fetch(url);
  const list = await res.json();
  const CORE_SOURCES = [
    "bestiary-phb.json",
    "bestiary-mm.json",
    "bestiary-dmg.json",
    "bestiary-xge.json",
    "bestiary-vgm.json",
    "bestiary-tce.json",
    "bestiary-egw.json",
    "bestiary-erlw.json",
    "bestiary-mtf.json",
    "bestiary-vrgr.json",
    "bestiary-cos.json",
    "bestiary-oota.json",
    "bestiary-pota.json",
    "bestiary-hotdq.json",
    "bestiary-rot.json",
    "bestiary-skt.json",
    "bestiary-tftyp.json",
    "bestiary-toa.json"
  ];
  return list.filter((item) => item.type === "file" && CORE_SOURCES.includes(item.name)).map((item) => item.name);
}
var ITEM_JSON_FILES2 = [
  "items-base.json",
  "items.json",
  "objects.json",
  "vehicles.json",
  "decks.json"
];
async function listItemFilesFromGitHub2(repo) {
  const url = `https://api.github.com/repos/${repo}/contents/data`;
  const res = await fetch(url);
  const data = await res.json();
  return data.filter((item) => item.type === "file" && ITEM_JSON_FILES2.includes(item.name)).map((item) => item.name);
}
async function listClassFilesFromGitHub2(repo) {
  const url = `https://api.github.com/repos/${repo}/contents/data/class`;
  const res = await fetch(url);
  const listing = await res.json();
  return listing.filter(
    (item) => item.type === "file" && item.name.startsWith("class-") && item.name.endsWith(".json")
  ).map((item) => item.name);
}
async function ensureFolder2(app, folderPath) {
  const parts = folderPath.split("/");
  let curr = "";
  for (const p of parts) {
    curr = curr ? `${curr}/${p}` : p;
    try {
      await app.vault.createFolder(curr);
    } catch {
    }
  }
}
async function importEditionData2(params) {
  const { app, edition, targetPath } = params;
  const repo = edition.repo ?? "";
  {
    const spellFiles = await listSpellFilesFromGitHub2(repo);
    for (const fileName of spellFiles) {
      try {
        const res = await fetch(`${edition.sourceUrl}/spells/${fileName}`);
        const json = await res.json();
        const files = parseSpellsFile2(json, edition.id);
        for (const md of files) {
          const fullPath = (0, import_obsidian3.normalizePath)(`${targetPath}/Spells/${md.path}`);
          const folder = fullPath.split("/").slice(0, -1).join("/");
          await ensureFolder2(app, folder);
          await app.vault.adapter.write(fullPath, md.content);
        }
      } catch (e) {
        console.warn(`Failed to import spell ${fileName}:`, e);
      }
    }
  }
  {
    const bestiaryFiles = await listBestiaryFilesFromGitHub2(repo);
    for (const fileName of bestiaryFiles) {
      try {
        const res = await fetch(`${edition.sourceUrl}/bestiary/${fileName}`);
        const json = await res.json();
        const parsed = parseBestiaryFile2(json, edition.id);
        for (const md of parsed) {
          const fullPath = (0, import_obsidian3.normalizePath)(`${targetPath}/Bestiary/${md.path}`);
          const folder = fullPath.split("/").slice(0, -1).join("/");
          await ensureFolder2(app, folder);
          await app.vault.adapter.write(fullPath, md.content);
        }
      } catch (e) {
        console.warn(`Failed to import bestiary ${fileName}:`, e);
      }
    }
  }
  {
    const itemFiles = await listItemFilesFromGitHub2(repo);
    for (const fn of itemFiles) {
      try {
        const res = await fetch(`${edition.sourceUrl}/${fn}`);
        const json = await res.json();
        const mdFiles = parseItemsFile2(json, edition.id);
        for (const md of mdFiles) {
          const fullPath = (0, import_obsidian3.normalizePath)(`${targetPath}/${md.path}`);
          const folder = fullPath.split("/").slice(0, -1).join("/");
          await ensureFolder2(app, folder);
          await app.vault.adapter.write(fullPath, md.content);
        }
      } catch (e) {
        console.warn(`Failed to import items from ${fn}:`, e);
      }
    }
  }
  {
    const res = await fetch(`${edition.sourceUrl}/races.json`);
    const json = await res.json();
    const mdFiles = parseSpeciesFile2(json, edition.id);
    for (const md of mdFiles) {
      const fullPath = (0, import_obsidian3.normalizePath)(`${targetPath}/Player Build/${md.path}`);
      await ensureFolder2(app, fullPath.split("/").slice(0, -1).join("/"));
      await app.vault.adapter.write(fullPath, md.content);
    }
    let optionalFeatures = [];
    try {
      const url = `${edition.sourceUrl}/optionalfeatures.json`;
      const res2 = await fetch(url);
      const text = await res2.text();
      const start = text.indexOf("{");
      if (start === -1) throw new Error("No JSON object found");
      const cleanJson = text.slice(start);
      const raw = JSON.parse(cleanJson);
      optionalFeatures = Array.isArray(raw.optionalfeature) ? raw.optionalfeature : [];
    } catch (e) {
      console.warn("Failed to import optionalfeatures.json:", e);
    }
    {
      const classFiles = await listClassFilesFromGitHub2(repo);
      for (const fileName of classFiles) {
        try {
          const res2 = await fetch(`${edition.sourceUrl}/class/${fileName}`);
          const json2 = await res2.json();
          const mdFiles2 = parseClassFile2(
            json2,
            edition.id,
            fileName,
            optionalFeatures
          );
          for (const md of mdFiles2) {
            const fullPath = (0, import_obsidian3.normalizePath)(`${targetPath}/Player Build/${md.path}`);
            await ensureFolder2(app, fullPath.split("/").slice(0, -1).join("/"));
            const existing = app.vault.getAbstractFileByPath(fullPath);
            if (existing instanceof import_obsidian4.TFile) {
              await app.vault.modify(existing, md.content);
            } else {
              await app.vault.create(fullPath, md.content);
            }
          }
        } catch (e) {
          console.warn(`Failed to import class ${fileName}:`, e);
        }
      }
    }
    {
      try {
        const res2 = await fetch(`${edition.sourceUrl}/actions.json`);
        const json2 = await res2.json();
        const mdFiles2 = parseActionsFile2(json2, edition.id);
        for (const md of mdFiles2) {
          const fullPath = (0, import_obsidian3.normalizePath)(
            `${targetPath}/${md.path}`
          );
          const folder = fullPath.split("/").slice(0, -1).join("/");
          await ensureFolder2(app, folder);
          await app.vault.adapter.write(fullPath, md.content);
        }
      } catch (e) {
        console.warn("Failed to import actions.json:", e);
      }
    }
    {
      try {
        const res2 = await fetch(`${edition.sourceUrl}/conditionsdiseases.json`);
        const json2 = await res2.json();
        const mdFiles2 = parseConditionsDiseasesFile2(json2, edition.id);
        for (const md of mdFiles2) {
          const fullPath = (0, import_obsidian3.normalizePath)(
            `${targetPath}/${md.path}`
          );
          const folder = fullPath.split("/").slice(0, -1).join("/");
          await ensureFolder2(app, folder);
          await app.vault.adapter.write(fullPath, md.content);
        }
      } catch (e) {
        console.warn("Failed to import conditionsdiseases.json:", e);
      }
    }
    {
      try {
        const res2 = await fetch(`${edition.sourceUrl}/senses.json`);
        const json2 = await res2.json();
        const mdFiles2 = parseSensesFile2(json2, edition.id);
        for (const md of mdFiles2) {
          const fullPath = (0, import_obsidian3.normalizePath)(
            `${targetPath}/${md.path}`
          );
          const folder = fullPath.split("/").slice(0, -1).join("/");
          await ensureFolder2(app, folder);
          await app.vault.adapter.write(fullPath, md.content);
        }
      } catch (e) {
        console.warn("Failed to import senses.json:", e);
      }
    }
    {
      try {
        const res2 = await fetch(`${edition.sourceUrl}/skills.json`);
        const json2 = await res2.json();
        const mdFiles2 = parseSkillsFile2(json2, edition.id);
        for (const md of mdFiles2) {
          const fullPath = (0, import_obsidian3.normalizePath)(
            `${targetPath}/${md.path}`
          );
          const folder = fullPath.split("/").slice(0, -1).join("/");
          await ensureFolder2(app, folder);
          await app.vault.adapter.write(fullPath, md.content);
        }
      } catch (e) {
        console.warn("Failed to import skills.json:", e);
      }
    }
    {
      try {
        const res2 = await fetch(`${edition.sourceUrl}/feats.json`);
        const json2 = await res2.json();
        const mdFiles2 = parseFeatsFile2(json2, edition.id);
        for (const md of mdFiles2) {
          const fullPath = (0, import_obsidian3.normalizePath)(
            `${targetPath}/${md.path}`
          );
          const folder = fullPath.split("/").slice(0, -1).join("/");
          await ensureFolder2(app, folder);
          await app.vault.adapter.write(fullPath, md.content);
        }
      } catch (e) {
        console.warn("Failed to import feats.json:", e);
      }
    }
    {
      try {
        const res2 = await fetch(`${edition.sourceUrl}/backgrounds.json`);
        const json2 = await res2.json();
        const mdFiles2 = parseBackgroundsFile2(json2, edition.id);
        for (const md of mdFiles2) {
          const fullPath = (0, import_obsidian3.normalizePath)(`${targetPath}/${md.path}`);
          const folder = fullPath.split("/").slice(0, -1).join("/");
          await ensureFolder2(app, folder);
          await app.vault.adapter.write(fullPath, md.content);
        }
      } catch (e) {
        console.warn("Failed to import backgrounds.json:", e);
      }
    }
  }
}

// src/rulesetInstaller.ts
async function importRulesetData(params) {
  const { app, editionKey, targetPath } = params;
  const edition = AVAILABLE_EDITIONS.find((e) => e.id === editionKey);
  if (!edition) {
    console.warn("Edition not found for:", editionKey);
    return;
  }
  if (!edition.parser) {
    console.warn("No parser defined for:", editionKey);
    return;
  }
  let installerModule;
  switch (edition.parser) {
    case "5e-2014":
      installerModule = installer_exports;
      break;
    case "5e-2025":
      installerModule = installer_exports2;
      break;
    // case "other-parser":
    //   installerModule = anotherInstaller;
    //   break;
    default:
      throw new Error(`Unknown parser: ${edition.parser}`);
  }
  await installerModule.importEditionData({ app, edition, targetPath });
}

// src/firstinstallconfirm.ts
var ConfirmFreshInstallModal = class extends import_obsidian5.Modal {
  constructor(app, plugin) {
    super(app);
    this.plugin = plugin;
  }
  onOpen() {
    this.contentEl.empty();
    this.titleEl.setText("\u26A0\uFE0F Warning: Fresh Vault Recommended");
    this.contentEl.createEl("div", {
      text: "The full VVunderlore install is intended for a fresh, empty Obsidian vault. If you install in a vault that already has files, any file whose path matches a VVunderlore Toolkit file will be overwritten.\n\nAlso things could just get messy.\n\nMake a perception check and proceed with caution!"
    }).style.cssText = `
        white-space: pre-wrap;
        margin-bottom: 1em;
        line-height: 1.4em;
      `;
    const buttonRow = this.contentEl.createEl("div");
    buttonRow.style.cssText = `
      display: flex;
      justify-content: flex-end;
      gap: 0.5em;
    `;
    new import_obsidian5.ButtonComponent(buttonRow).setButtonText("Oh god, cancel!").onClick(() => {
      this.close();
    });
    new import_obsidian5.ButtonComponent(buttonRow).setButtonText("Install!!").setCta().onClick(async () => {
      const opts = {
        compendium: this.plugin.settings.rulesetCompendium,
        references: [...this.plugin.settings.rulesetReference]
      };
      new import_obsidian5.Notice("\u23F3 Installing toolkit\u2026");
      const compendium = this.plugin.settings.rulesetCompendium;
      const references = [...this.plugin.settings.rulesetReference];
      try {
        await this.plugin.installFullToolkit({ compendium, references });
        if (compendium) {
          await importRulesetData({
            app: this.app,
            editionKey: compendium,
            targetPath: "Compendium"
          });
        }
      } catch (err) {
        console.error("\u274C installToolkit() failed:", err);
        new import_obsidian5.Notice("\u274C Toolkit installation failed. See console.");
      }
      await this.plugin.saveSettings();
      this.plugin.settingsTab.display();
      this.contentEl.empty();
      this.titleEl.setText("\u2705 Toolkit Installed");
      this.contentEl.createEl("div", {
        text: "Reloading vault to finish setup. Don\u2019t touch anything."
      }).style.cssText = `
          font-size: 1em;
          margin-top: 1em;
          text-align: center;
        `;
      setTimeout(() => {
        location.reload();
      }, 3e3);
    });
  }
  onClose() {
    this.contentEl.empty();
  }
};

// src/customInstallModal.ts
var import_obsidian6 = require("obsidian");
var InstallingModal = class extends import_obsidian6.Modal {
  constructor(app) {
    super(app);
  }
  onOpen() {
    this.contentEl.empty();
    this.contentEl.createDiv({ text: "Installing\u2026", cls: "mod-quiet" }).style.cssText = "font-style: italic; color: var(--text-muted); text-align: center; padding: 1em;";
  }
  onClose() {
    this.contentEl.empty();
  }
};
function showCustomInstallModal(app, plugin) {
  const fullPathToKey = {};
  for (const f of plugin.manifestCache.folders) {
    fullPathToKey[f.path] = f.key;
  }
  for (const f of plugin.manifestCache.files) {
    fullPathToKey[f.path] = f.key;
  }
  const root = { name: "", fullPath: "", isFolder: true, children: {} };
  function ensureFolderNode(segments) {
    let cursor = root;
    let builtSoFar = "";
    for (const seg of segments) {
      builtSoFar = builtSoFar ? `${builtSoFar}/${seg}` : seg;
      if (!cursor.children[seg]) {
        cursor.children[seg] = {
          name: seg,
          fullPath: builtSoFar,
          isFolder: true,
          children: {}
        };
      }
      cursor = cursor.children[seg];
    }
    return cursor;
  }
  for (const folderEntry of plugin.manifestCache.folders) {
    const segments = folderEntry.path.split("/");
    ensureFolderNode(segments);
  }
  for (const fileEntry of plugin.manifestCache.files) {
    const segments = fileEntry.path.split("/");
    const fileName = segments.pop();
    const parentNode = segments.length ? ensureFolderNode(segments) : root;
    parentNode.children[fileName] = {
      name: fileName,
      fullPath: fileEntry.path,
      isFolder: false,
      children: {}
    };
  }
  class CustomInstallModal extends import_obsidian6.Modal {
    constructor(app2) {
      super(app2);
      this.checkboxMap = {};
      // <div> that holds “dependency console”
      this.currentBatchLines = [];
    }
    onOpen() {
      this.contentEl.empty();
      this.titleEl.setText("Custom Install");
      const descriptionEl = this.contentEl.createDiv();
      descriptionEl.textContent = "All checked items will be installed. Dependencies will be managed automatically.";
      descriptionEl.style.cssText = `
        font-size: 0.9em;
        color: var(--text-muted);
        margin-top: 0.25em;
        margin-bottom: 0.75em;
      `;
      const optionsBox = this.contentEl.createDiv();
      Object.assign(optionsBox.style, {
        maxHeight: "480px",
        // Enough space for checkboxes + tree
        overflowY: "auto",
        // Everything inside optionsBox will scroll
        margin: "0.5em 0",
        border: "1px solid var(--divider-color)",
        borderRadius: "4px",
        padding: "0.5em"
      });
      const checkboxSection = optionsBox.createDiv();
      Object.assign(checkboxSection.style, {
        display: "flex",
        flexDirection: "column",
        gap: "0.5em",
        marginBottom: "0.75em"
      });
      const pluginRow = checkboxSection.createDiv();
      pluginRow.style.display = "flex";
      pluginRow.style.alignItems = "center";
      this.pluginCheckbox = pluginRow.createEl("input", { type: "checkbox" });
      this.pluginCheckbox.checked = true;
      this.pluginCheckbox.id = "vvunderlore-checkbox-plugins";
      this.pluginCheckbox.style.marginRight = "0.5em";
      pluginRow.createEl("label", {
        text: "Community Plugins",
        attr: { for: this.pluginCheckbox.id }
      });
      const demoRow = checkboxSection.createDiv();
      demoRow.style.display = "flex";
      demoRow.style.alignItems = "center";
      this.demoCheckbox = demoRow.createEl("input", { type: "checkbox" });
      this.demoCheckbox.checked = true;
      this.demoCheckbox.id = "vvunderlore-checkbox-demo";
      this.demoCheckbox.style.marginRight = "0.5em";
      demoRow.createEl("label", {
        text: "VVunderlore Demo Files",
        attr: { for: this.demoCheckbox.id }
      });
      const settingsRow = checkboxSection.createDiv();
      settingsRow.style.display = "flex";
      settingsRow.style.alignItems = "center";
      this.settingsCheckbox = settingsRow.createEl("input", { type: "checkbox" });
      this.settingsCheckbox.checked = true;
      this.settingsCheckbox.id = "vvunderlore-checkbox-settings";
      this.settingsCheckbox.style.marginRight = "0.5em";
      settingsRow.createEl("label", {
        text: "Vault Settings (apperance, hotkeys, graph setup, etc.)",
        attr: { for: this.settingsCheckbox.id }
      });
      const divider = optionsBox.createDiv();
      Object.assign(divider.style, {
        borderTop: "1px solid var(--divider-color)",
        margin: "0.5em 0"
      });
      const container = optionsBox.createDiv();
      Object.assign(container.style, {
        // We no longer give this inner div its own scrollbar.
        // Instead, container will expand inside optionsBox, and
        // optionsBox will scroll everything (checkboxes + tree) together.
        margin: "0",
        padding: "0",
        border: "none"
      });
      const INDENT_PX = 16;
      const lookupEntry = (fullPath) => {
        return plugin.manifestCache.folders.find((f) => f.path === fullPath) || plugin.manifestCache.files.find((f) => f.path === fullPath);
      };
      const renderTree = () => {
        container.empty();
        this.checkboxMap = {};
        this.currentBatchLines = [];
        const demoAllowed = this.demoCheckbox.checked;
        const renderNode = (node, parentEl, indent = 0) => {
          if (node.fullPath) {
            const entry = lookupEntry(node.fullPath);
            if (entry && entry.optional && !demoAllowed) {
              return;
            }
          }
          if (node.isFolder) {
            const details = parentEl.createEl("details");
            details.open = true;
            details.style.margin = "4px 0";
            const summary = details.createEl("summary");
            Object.assign(summary.style, {
              display: "flex",
              alignItems: "center",
              marginLeft: `${indent * INDENT_PX}px`,
              cursor: "pointer",
              padding: "2px 6px",
              borderRadius: "4px",
              userSelect: "none"
            });
            summary.addEventListener("mouseenter", () => {
              summary.style.backgroundColor = "var(--background-modifier-hover)";
            });
            summary.addEventListener("mouseleave", () => {
              summary.style.backgroundColor = "transparent";
            });
            const cb = summary.createEl("input", { type: "checkbox" });
            cb.style.marginRight = "0.5em";
            cb.checked = true;
            cb.style.cursor = "pointer";
            this.checkboxMap[node.fullPath] = cb;
            const iconEl = summary.createDiv({ cls: "suggestion-icon" });
            (0, import_obsidian6.setIcon)(iconEl, "folder");
            iconEl.style.marginRight = "0.3em";
            iconEl.style.transform = "scale(0.9)";
            iconEl.style.opacity = "0.75";
            const label = summary.createEl("span", { text: node.name });
            label.style.fontWeight = "600";
            label.style.fontSize = "0.95em";
            cb.onchange = () => {
              this.toggleDescendants(node, cb.checked);
              this.enforceDependencies(node.fullPath, cb.checked);
              this.fadeAllExceptCurrentBatch();
            };
            const childrenContainer = details.createDiv();
            childrenContainer.style.marginTop = "4px";
            for (const childName of Object.keys(node.children).sort()) {
              renderNode(node.children[childName], childrenContainer, indent + 1);
            }
          } else {
            const row = parentEl.createDiv();
            Object.assign(row.style, {
              display: "flex",
              alignItems: "center",
              marginLeft: `${indent * INDENT_PX}px`,
              padding: "2px 6px",
              borderRadius: "4px",
              marginTop: "2px",
              marginBottom: "2px",
              userSelect: "none"
            });
            row.addEventListener("mouseenter", () => {
              row.style.backgroundColor = "var(--background-modifier-hover)";
            });
            row.addEventListener("mouseleave", () => {
              row.style.backgroundColor = "transparent";
            });
            const cb = row.createEl("input", { type: "checkbox" });
            cb.style.marginRight = "0.5em";
            cb.checked = true;
            cb.style.cursor = "pointer";
            this.checkboxMap[node.fullPath] = cb;
            const iconEl = row.createDiv({ cls: "suggestion-icon" });
            (0, import_obsidian6.setIcon)(iconEl, "document");
            iconEl.style.marginRight = "0.3em";
            iconEl.style.transform = "scale(0.8)";
            iconEl.style.opacity = "0.5";
            const label = row.createEl("label", { text: node.name });
            label.style.fontSize = "0.9em";
            cb.onchange = () => {
              this.enforceDependencies(node.fullPath, cb.checked);
              this.fadeAllExceptCurrentBatch();
            };
          }
        };
        for (const topName of Object.keys(root.children).sort()) {
          renderNode(root.children[topName], container, 0);
        }
      };
      renderTree();
      this.consoleEl = this.contentEl.createDiv({ cls: "custom-console" });
      Object.assign(this.consoleEl.style, {
        height: "140px",
        margin: "0.5em 0",
        padding: "8px",
        backgroundColor: "var(--background-secondary)",
        border: "1px solid var(--divider-color)",
        borderRadius: "4px",
        fontFamily: "monospace",
        fontSize: "0.82em",
        lineHeight: "1.4em",
        color: "var(--text-normal)",
        overflowY: "auto",
        whiteSpace: "pre-wrap"
      });
      const placeholder = this.consoleEl.createDiv({
        text: "> Dependency errors and warnings will appear here\u2026"
      });
      Object.assign(placeholder.style, {
        opacity: "0.4",
        fontStyle: "italic",
        marginBottom: "4px"
      });
      this.pluginCheckbox.onchange = () => {
        const WARNING_CLASS = "vvunderlore-warning";
        if (!this.pluginCheckbox.checked) {
          if (this.consoleEl.children.length === 1 && this.consoleEl.children[0].textContent?.startsWith(
            "> Dependency console"
          )) {
            this.consoleEl.empty();
          }
          const warningLine = this.consoleEl.createDiv({
            text: "WARNING: The VVunderlore Toolkit will not function without all included plugins! You probably want to re-check that one."
          });
          warningLine.addClass(WARNING_CLASS);
          warningLine.style.color = "#FF0000";
          this.consoleEl.scrollTop = this.consoleEl.scrollHeight;
        } else {
          const existingWarnings = this.consoleEl.querySelectorAll(`.${WARNING_CLASS}`);
          existingWarnings.forEach((el) => el.remove());
          if (this.consoleEl.children.length === 0) {
            const ph = this.consoleEl.createDiv({
              text: "> Dependency console output will appear here\u2026"
            });
            Object.assign(ph.style, {
              opacity: "0.4",
              fontStyle: "italic",
              marginBottom: "4px"
            });
          }
          this.consoleEl.scrollTop = this.consoleEl.scrollHeight;
        }
      };
      this.demoCheckbox.onchange = () => {
        renderTree();
      };
      const buttonRow = this.contentEl.createDiv();
      Object.assign(buttonRow.style, {
        display: "flex",
        justifyContent: "space-between",
        // push left vs right
        alignItems: "center",
        paddingTop: "8px",
        borderTop: "1px solid var(--divider-color)",
        marginTop: "8px"
      });
      const resetBtn = buttonRow.createEl("button", { text: "Reset Selection" });
      resetBtn.style.cssText = `
        font-size: 0.9em;
        color: var(--text-normal);
      `;
      resetBtn.onclick = () => {
        const warnings = Array.from(
          this.consoleEl.querySelectorAll(".vvunderlore-warning")
        );
        this.consoleEl.empty();
        warnings.forEach((warningEl) => {
          this.consoleEl.appendChild(warningEl);
        });
        Object.values(this.checkboxMap).forEach((cb) => {
          cb.checked = true;
        });
      };
      const rightGroup = buttonRow.createDiv();
      Object.assign(rightGroup.style, {
        display: "flex",
        gap: "0.5em"
      });
      const installBtn = rightGroup.createEl("button", {
        text: "Install Selected",
        cls: "mod-cta"
      });
      installBtn.onclick = async () => {
        installBtn.setAttribute("disabled", "");
        this.close();
        const installing = new InstallingModal(app);
        installing.open();
        const toInstall = [];
        for (const [fp, checkbox] of Object.entries(this.checkboxMap)) {
          if (checkbox.checked) {
            const isFolder = plugin.manifestCache.folders.some((f) => f.path === fp);
            toInstall.push({ path: fp, isFolder });
          }
        }
        if (this.pluginCheckbox.checked) {
          try {
            const apiUrl = "https://api.github.com/repos/slamwise0001/VVunderlore-Toolkit-Full/contents/.obsidian/plugins?ref=main";
            const resp = await fetch(apiUrl);
            if (resp.ok) {
              const pluginFiles = await resp.json();
              for (const item of pluginFiles) {
                const localPath = `.obsidian/plugins/${item.name}`;
                const existsLocally = await this.app.vault.adapter.exists(localPath);
                if (!existsLocally) {
                  if (item.type === "dir") {
                    toInstall.push({ path: localPath, isFolder: true });
                  } else {
                    toInstall.push({ path: localPath, isFolder: false });
                  }
                }
              }
            }
          } catch (e) {
            console.error("Failed to enumerate .obsidian/plugins from GitHub:", e);
          }
          toInstall.push({ path: ".obsidian/community-plugins.json", isFolder: false });
        }
        if (this.settingsCheckbox.checked) {
          const vaultSettingsPaths = [
            ".obsidian/app.json",
            ".obsidian/appearance.json",
            ".obsidian/graph.json",
            ".obsidian/hotkeys.json"
          ];
          for (const vs of vaultSettingsPaths) {
            toInstall.push({ path: vs, isFolder: false });
          }
        }
        try {
          await plugin.performCustomInstall(toInstall);
        } catch (err) {
          console.error("\u274C performCustomInstall() threw:", err);
          new import_obsidian6.Notice("\u274C Custom install failed\u2014see console");
        } finally {
          installing.close();
        }
      };
      const cancelBtn = rightGroup.createEl("button", { text: "Cancel" });
      cancelBtn.onclick = () => this.close();
    }
    onClose() {
      this.contentEl.empty();
    }
    /** Recursively toggle descendants’ checked‐state without logging each one. */
    toggleDescendants(node, checked) {
      for (const child of Object.values(node.children)) {
        const cb = this.checkboxMap[child.fullPath];
        if (cb) cb.checked = checked;
        if (child.isFolder) {
          this.toggleDescendants(child, checked);
        }
      }
    }
    /**
     * Enforce dependency logic (auto‐check prerequisites, auto‐uncheck dependents).
     * Each time we flip a box “because of a dependency,” we log one line to the console.
     */
    enforceDependencies(changedPath, isChecked) {
      const changedKey = fullPathToKey[changedPath];
      if (!changedKey) return;
      const fullPathToDisplay = {};
      for (const f of plugin.manifestCache.folders) {
        fullPathToDisplay[f.path] = f.displayName ?? f.path.split("/").pop();
      }
      for (const f of plugin.manifestCache.files) {
        fullPathToDisplay[f.path] = f.displayName ?? f.path.split("/").pop();
      }
      const changedName = fullPathToDisplay[changedPath] ?? changedPath.split("/").pop();
      this.currentBatchLines = [];
      if (isChecked) {
        const stack = [changedKey];
        while (stack.length) {
          const cur = stack.pop();
          const deps = plugin.requiresGraph.get(cur) ?? [];
          for (const depKey of deps) {
            const depEntry = plugin.manifestCache.files.find((x) => x.key === depKey) || plugin.manifestCache.folders.find((x) => x.key === depKey);
            if (depEntry) {
              const depPath = depEntry.path;
              const cb = this.checkboxMap[depPath];
              if (cb && !cb.checked) {
                cb.checked = true;
                const depName = fullPathToDisplay[depPath] ?? depPath.split("/").pop();
                const lineEl = this.appendLogLine(
                  depPath,
                  `> ${depName} automatically checked (required by ${changedName})`
                );
                this.currentBatchLines.push(lineEl);
                stack.push(depKey);
              }
            }
          }
        }
      } else {
        const dependentsOf = (targetKey) => Array.from(plugin.requiresGraph.entries()).filter(([, deps]) => deps.includes(targetKey)).map(([k]) => k);
        const stack = [changedKey];
        while (stack.length) {
          const cur = stack.pop();
          for (const childKey of dependentsOf(cur)) {
            const childEntry = plugin.manifestCache.files.find((x) => x.key === childKey) || plugin.manifestCache.folders.find((x) => x.key === childKey);
            if (childEntry) {
              const childPath = childEntry.path;
              const cb = this.checkboxMap[childPath];
              if (cb && cb.checked) {
                cb.checked = false;
                const childName = fullPathToDisplay[childPath] ?? childPath.split("/").pop();
                const lineEl = this.appendLogLine(
                  childPath,
                  `> ${childName} automatically unchecked (depends on ${changedName})`
                );
                this.currentBatchLines.push(lineEl);
                stack.push(childKey);
              }
            }
          }
        }
      }
      this.fadeAllExceptCurrentBatch();
    }
    /**
     * Append one “mono” line plus a tiny undo button. Returns the new <div>.
     */
    appendLogLine(fullPath, text) {
      const line = this.consoleEl.createDiv();
      Object.assign(line.style, {
        display: "flex",
        justifyContent: "space-between",
        alignItems: "center",
        margin: "2px 0",
        opacity: "1.0",
        transition: "opacity 0.2s ease"
      });
      line.createSpan({ text });
      const undoBtn = line.createEl("button", { text: "undo", cls: "mod-small" });
      Object.assign(undoBtn.style, {
        marginLeft: "0.5em",
        fontSize: "0.75em",
        padding: "2px 4px",
        cursor: "pointer"
      });
      undoBtn.onclick = () => {
        const cb = this.checkboxMap[fullPath];
        if (cb) {
          cb.checked = !cb.checked;
          this.enforceDependencies(fullPath, cb.checked);
          this.fadeAllExceptCurrentBatch();
        }
      };
      this.consoleEl.scrollTop = this.consoleEl.scrollHeight;
      return line;
    }
    /** Fade out every console line that is *not* part of currentBatchLines. */
    fadeAllExceptCurrentBatch() {
      const total = this.consoleEl.children.length;
      for (let i = 0; i < total; i++) {
        const child = this.consoleEl.children[i];
        if (this.currentBatchLines.includes(child)) {
          child.style.opacity = "1.0";
        } else {
          child.style.opacity = "0.6";
        }
      }
    }
  }
  new CustomInstallModal(app).open();
}

// src/settings.ts
var path = __toESM(require("path"));
var FilePathSuggester = class extends import_obsidian7.AbstractInputSuggest {
  constructor(app, inputEl) {
    super(app, inputEl);
    this.paths = [];
    this.currentSuggestions = [];
    this.renderedSuggestions = /* @__PURE__ */ new Map();
    this.inputEl = inputEl;
    const folders = Object.values(app.vault.getAllLoadedFiles()).filter((f) => f instanceof import_obsidian7.TFolder).map((f) => ({ path: f.path, isFolder: true }));
    const files = app.vault.getMarkdownFiles().map((f) => ({ path: f.path, isFolder: false }));
    this.paths = [...folders, ...files];
    this.inputEl.addEventListener("keydown", (e) => {
      if (e.key === "Enter") {
        setTimeout(() => {
          const container = this.containerEl;
          if (!container) return;
          const selectedEl = container.querySelector(".suggestion-item.is-selected");
          if (selectedEl) {
            const selectedPath = this.renderedSuggestions.get(selectedEl);
            if (selectedPath) {
              this.selectSuggestion(selectedPath);
            }
          }
        }, 0);
      }
    });
  }
  getSuggestions(inputStr) {
    const query = inputStr.toLowerCase();
    this.currentSuggestions = this.paths.filter(({ path: path2 }) => path2.toLowerCase().includes(query)).map((p) => p.path);
    return this.currentSuggestions;
  }
  renderSuggestion(path2, el) {
    const isFolder = this.paths.find((p) => p.path === path2)?.isFolder;
    el.addClass("mod-complex");
    const iconEl = el.createDiv({ cls: "suggestion-icon" });
    (0, import_obsidian7.setIcon)(iconEl, isFolder ? "folder" : "document");
    const name = path2.split("/").pop();
    const displayName = isFolder ? name : name.replace(/\.md$/, "");
    el.createDiv({ text: displayName, cls: "suggestion-title" });
    const parentPath = path2.split("/").slice(0, -1).join("/");
    el.createDiv({ text: parentPath, cls: "search-suggest-info-text" });
    el.addEventListener("click", (e) => {
      e.stopPropagation();
      this.selectSuggestion(path2);
    });
    this.renderedSuggestions.set(el, path2);
  }
  selectSuggestion(path2) {
    this.inputEl.value = path2;
    this.inputEl.dispatchEvent(new Event("input"));
    this.close();
  }
};
var MarkdownPreviewModal = class extends import_obsidian7.Modal {
  constructor(app, content) {
    super(app);
    this.content = content;
  }
  onOpen() {
    this.contentEl.addEventListener("click", (e) => e.stopPropagation());
    this.contentEl.empty();
    this.contentEl.createEl("h2", { text: "Toolkit Changelog" });
    const md = this.contentEl.createDiv();
    const dummyComponent = new class extends import_obsidian7.Component {
    }();
    import_obsidian7.MarkdownRenderer.renderMarkdown(this.content, md, "/", dummyComponent);
  }
  onClose() {
    this.contentEl.empty();
  }
};
var ToolkitSettingsTab = class extends import_obsidian7.PluginSettingTab {
  constructor(app, plugin) {
    super(app, plugin);
    this.versionValueEl = null;
    this.forceWarningEl = null;
    this.plugin = plugin;
  }
  renderHeader(root) {
    const header = root.createDiv();
    header.style.display = "flex";
    header.style.justifyContent = "space-between";
    header.style.alignItems = "center";
    header.style.borderBottom = "1px solid var(--divider-color)";
    header.style.marginBottom = "2em";
    header.style.paddingBottom = "0.5em";
    header.createEl("h3", { text: "VVunderlore Toolkit Settings" });
    const headerBtns = header.createDiv();
    headerBtns.style.display = "flex";
    headerBtns.style.gap = "0.5em";
    const docsBtn = headerBtns.createEl("button", { text: "Docs" });
    docsBtn.onclick = () => window.open("http://vvunderlore.com", "_blank");
    const githubBtn = headerBtns.createEl("button", { text: "GitHub" });
    githubBtn.onclick = () => window.open("https://github.com/slamwise0001/VVunderlore-Toolkit-Full", "_blank");
    const kofiBtn = headerBtns.createEl("button", {
      text: "\u2615 Ko-fi",
      cls: "mod-cta"
    });
    kofiBtn.style.backgroundColor = "#ff5900";
    kofiBtn.style.color = "white";
    kofiBtn.onclick = () => window.open("https://ko-fi.com/vvunderlore", "_blank");
  }
  renderFirstRunCard(root) {
    const card = root.createEl("div", { cls: "vvunderlore-first-run" });
    Object.assign(card.style, {
      display: "flex",
      flexDirection: "column",
      alignItems: "center",
      textAlign: "center",
      marginTop: "2em",
      padding: "1em",
      border: "2px solid var(--divider-color)",
      borderRadius: "18px",
      /* (optional) round the corners slightly */
      backgroundColor: "var(--background-primary)"
      /* (optional) white/gray background */
    });
    const title = card.createEl("h2", {
      text: "\u{1F3F0} Welcome to VVunderlore",
      cls: "vv-card-title"
    });
    title.style.marginBottom = "0.5em";
    const desc = card.createEl("p", {
      text: "Get started by installing the default toolkit\u2014\nor choose individual pieces to suit your vault.",
      cls: "vv-card-desc"
    });
    desc.style.marginBottom = "1.25em";
    const plugin = this.plugin;
    const grid = card.createDiv();
    Object.assign(grid.style, {
      display: "grid",
      gridTemplateColumns: "max-content max-content",
      columnGap: "1rem",
      rowGap: "0.25rem",
      justifyContent: "center",
      justifyItems: "center",
      marginBottom: "1rem"
    });
    const labelRs = grid.createEl("div", { text: "Ruleset" });
    labelRs.style.fontWeight = "bold";
    const labelRef = grid.createEl("div", { text: "Reference (optional)" });
    labelRef.style.fontWeight = "bold";
    const rsCell = grid.createDiv({ attr: { style: "text-align:center" } });
    const refCell = grid.createDiv({ attr: { style: "text-align:center" } });
    const summaryBar = grid.createDiv();
    Object.assign(summaryBar.style, {
      gridColumn: "1 / span 2",
      display: "flex",
      alignItems: "center",
      flexWrap: "wrap",
      gap: "0.5rem",
      fontSize: "0.85em",
      color: "var(--text-muted)",
      fontStyle: "italic",
      marginTop: "0.25rem",
      marginBottom: "1rem"
    });
    const rulesetSpan = summaryBar.createSpan({
      text: `Ruleset: ${plugin.settings.rulesetCompendium ? `D&D 5E (${plugin.settings.rulesetCompendium})` : ""}`
    });
    rulesetSpan.style.fontWeight = "bold";
    summaryBar.createSpan({ text: "References:" });
    const chipsWrapper = summaryBar.createDiv();
    Object.assign(chipsWrapper.style, { display: "flex", gap: "4px" });
    function addChip(id) {
      const ed = AVAILABLE_EDITIONS.find((e) => e.id === id);
      const chip = chipsWrapper.createDiv({
        attr: {
          style: "background: var(--interactive-accent); color: white; padding:2px 6px; border-radius:4px; display:inline-flex; align-items:center; gap:4px;"
        }
      });
      chip.createSpan({ text: ed.label });
      const rem = chip.createSpan({
        text: "\xD7",
        attr: { style: "cursor:pointer; margin-left:4px;" }
      });
      rem.onclick = async () => {
        plugin.settings.rulesetReference = plugin.settings.rulesetReference.filter((x) => x !== id);
        await plugin.saveSettings();
        chip.remove();
        updateInstallButtons();
      };
    }
    ;
    plugin.settings.rulesetReference.forEach((e) => addChip(e));
    const rsDropdown = new import_obsidian7.DropdownComponent(rsCell);
    rsDropdown.addOption("", "Select edition\u2026");
    AVAILABLE_EDITIONS.forEach((ed) => {
      rsDropdown.addOption(ed.id, ed.label);
    });
    rsDropdown.setValue(this.plugin.settings.rulesetCompendium).onChange(async (val) => {
      this.plugin.settings.rulesetCompendium = val;
      await this.plugin.saveSettings();
      const chosen = AVAILABLE_EDITIONS.find((e) => e.id === val);
      rulesetSpan.textContent = chosen ? chosen.label : "";
      chipsWrapper.empty();
      updateInstallButtons();
    });
    const searchWrapperEl = refCell.createDiv({ attr: { style: "text-align:center;" } });
    const searchComp = new import_obsidian7.SearchComponent(searchWrapperEl);
    searchComp.setPlaceholder("Add reference rules\u2026");
    const suggestionInputEl = searchComp.inputEl;
    new class extends import_obsidian7.AbstractInputSuggest {
      constructor(app, inputEl) {
        super(app, inputEl);
      }
      // 1) Propose edition IDs (minus the one they picked as the main ruleset)
      getSuggestions(input) {
        return AVAILABLE_EDITIONS.filter((ed) => ed.id !== plugin.settings.rulesetCompendium).filter((ed) => ed.label.toLowerCase().includes(input.toLowerCase())).map((ed) => ed.id);
      }
      // 2) Render the human-readable label
      renderSuggestion(item, el) {
        const ed = AVAILABLE_EDITIONS.find((e) => e.id === item);
        el.createDiv({ text: ed.label });
      }
      // 3) When they pick one, store its ID and add a chip
      selectSuggestion(item) {
        if (!plugin.settings.rulesetReference.includes(item)) {
          plugin.settings.rulesetReference.push(item);
          plugin.saveSettings();
          addChip(item);
        }
        this.close();
        suggestionInputEl.value = "";
        updateInstallButtons();
      }
    }(this.app, suggestionInputEl);
    const btnRow1 = card.createEl("div", { cls: "vv-button-row" });
    Object.assign(btnRow1.style, {
      display: "flex",
      gap: "0.75em",
      justifyContent: "center",
      marginBottom: "1.5em"
    });
    const installBtn1 = btnRow1.createEl("button", {
      text: "Install Toolkit",
      cls: "mod-cta"
    });
    installBtn1.onClickEvent(
      () => new ConfirmFreshInstallModal(this.app, this.plugin).open()
    );
    const customBtn1 = btnRow1.createEl("button", {
      text: "Custom Install",
      cls: "mod-cta"
    });
    Object.assign(customBtn1.style, {
      background: "none",
      border: "1px solid var(--interactive-accent)",
      color: "var(--text-normal)"
    });
    customBtn1.onClickEvent(() => showCustomInstallModal(this.app, this.plugin));
    const updateInstallButtons = () => {
      const hasRuleset = Boolean(this.plugin.settings.rulesetCompendium);
      installBtn1.toggleAttribute("disabled", !hasRuleset);
      customBtn1.toggleAttribute("disabled", !hasRuleset);
    };
    updateInstallButtons();
    const skipPara = card.createEl("p", { cls: "vv-skip-link" });
    Object.assign(skipPara.style, {
      textAlign: "center",
      marginTop: "0.25em"
    });
    skipPara.createEl("a", {
      text: "Already have the Toolkit? Show me the settings \u2192"
    }).onClickEvent(async () => {
      const markerPath = ".vvunderlore_installed";
      try {
        if (!await this.app.vault.adapter.exists(markerPath)) {
          await this.app.vault.create(markerPath, "");
        }
      } catch (e) {
        console.error("\u274C Failed to create marker file:", e);
      }
      this.display();
    });
  }
  async display() {
    console.log("\u{1F527} display() called");
    const { containerEl } = this;
    const savedScrollTop = containerEl.scrollTop;
    containerEl.empty();
    const markerPath = ".vvunderlore_installed";
    const isInstalled = await this.app.vault.adapter.exists(markerPath);
    if (!isInstalled) {
      console.log("\u{1F9EA} first-run: marker missing \u2192 show installer card");
      this.renderFirstRunCard(containerEl);
      containerEl.scrollTop = savedScrollTop;
      return;
    }
    this.renderHeader(containerEl);
    ;
    (async () => {
      const versionRow = containerEl.createDiv();
      versionRow.style.marginBottom = "1em";
      versionRow.style.display = "flex";
      versionRow.style.justifyContent = "space-between";
      versionRow.style.alignItems = "flex-start";
      versionRow.style.gap = "2em";
      versionRow.style.flexWrap = "wrap";
      versionRow.style.borderBottom = "1px solid var(--divider-color)";
      const versionInfo = versionRow.createDiv();
      versionInfo.style.display = "flex";
      versionInfo.style.flexDirection = "column";
      versionInfo.style.gap = "0.25em";
      let installed = "Not installed";
      try {
        const verContent = await this.app.vault.adapter.read(".version.json");
        const json = JSON.parse(verContent);
        installed = json.version ?? "Not installed";
      } catch (err) {
        console.warn("Could not read .version.json from vault:", err);
      }
      const latest = this.plugin.settings.latestToolkitVersion ?? "Could not fetch";
      const isMatch = installed === latest;
      const vaultRow = versionInfo.createDiv();
      vaultRow.appendText("Vault Toolkit Version: ");
      this.versionValueEl = vaultRow.createSpan();
      this.versionValueEl.textContent = installed;
      this.versionValueEl.style.fontWeight = "bold";
      this.versionValueEl.style.color = isMatch ? "var(--text-success)" : "var(--text-error)";
      const latestRow = versionInfo.createEl("div", { text: "Latest Official Version: " });
      latestRow.createSpan({
        text: latest,
        attr: { style: "font-weight: bold; color: var(--text-success);" }
      });
      const versionControls = versionRow.createDiv();
      versionControls.style.display = "flex";
      versionControls.style.flexDirection = "column";
      versionControls.style.alignItems = "flex-end";
      versionControls.style.gap = "0.5em";
      const buttonRow = versionControls.createDiv();
      buttonRow.style.display = "flex";
      buttonRow.style.gap = "0.5em";
      const checkBtn = buttonRow.createEl("button", {
        text: installed !== latest ? "Preview Update" : "Check for Updates",
        cls: "mod-cta"
      });
      checkBtn.addEventListener("click", async () => {
        if (installed !== latest) {
          this.plugin.previewUpdatesModal();
        } else {
          await this.plugin.checkForUpdates();
        }
      });
      const changelogBtn = buttonRow.createEl("button", { text: "\u{1F4D6} View Changelog" });
      changelogBtn.addEventListener("click", () => {
        new MarkdownPreviewModal(this.app, this.plugin.changelog).open();
      });
      if (this.plugin.settings.lastChecked) {
        const lastChecked = versionControls.createDiv();
        lastChecked.style.fontSize = "11px";
        lastChecked.style.color = "var(--text-muted)";
        lastChecked.textContent = `Last checked: ${new Date(this.plugin.settings.lastChecked).toLocaleString()}`;
      }
      const fixDetails = containerEl.createEl("details", { cls: "vk-section" });
      const fixHeader = fixDetails.createEl("summary", { cls: "vk-section-header" });
      Object.assign(fixHeader.style, {
        display: "flex",
        flexDirection: "column",
        alignItems: "stretch",
        padding: "0.5em 0",
        borderBottom: "1px solid var(--divider-color)",
        cursor: "pointer"
      });
      const fixHeaderRow = fixHeader.createDiv({
        attr: {
          style: `
			display: flex;
			justify-content: space-between;
			align-items: flex-end;
			`
        }
      });
      const fixTitleBlock = fixHeaderRow.createDiv({
        attr: { style: "display: flex; flex-direction: column;" }
      });
      fixTitleBlock.createEl("h5", { text: "Fix Your Vault" });
      fixTitleBlock.createEl("div", {
        text: "Fix and broken, deleted, or misplaced files in your toolkit.",
        cls: "setting-item-description",
        attr: { style: "margin-top: 0.25em;" }
      });
      const fixToggleIcon = fixHeaderRow.createEl("span", { text: "VV", cls: "vk-toggle-icon" });
      Object.assign(fixToggleIcon.style, {
        fontWeight: "bold",
        display: "inline-block",
        transition: "transform 0.2s ease",
        transformOrigin: "50% 50%",
        // Rotate around its own center
        userSelect: "none",
        transform: fixDetails.open ? "rotate(0deg)" : "rotate(180deg)"
      });
      fixDetails.ontoggle = () => {
        fixToggleIcon.style.transform = fixDetails.open ? "rotate(0deg)" : "rotate(180deg)";
      };
      const fixBody = fixDetails.createDiv({ cls: "vk-section-body" });
      fixBody.style.paddingLeft = "1em";
      const fixButtonRow = fixBody.createDiv();
      fixButtonRow.style.display = "flex";
      fixButtonRow.style.justifyContent = "space-between";
      fixButtonRow.style.alignItems = "center";
      fixButtonRow.style.marginTop = "0.5em";
      const warningContainer = fixButtonRow.createDiv();
      this.forceWarningEl = warningContainer;
      let installedVersionStr = "";
      try {
        const versionFile = await this.plugin.app.vault.adapter.read(".version.json");
        const parsed = JSON.parse(versionFile);
        installedVersionStr = (parsed.version ?? "").trim();
      } catch {
        installedVersionStr = "";
      }
      const latestVersionStr = (this.plugin.settings.latestToolkitVersion ?? "").trim();
      console.log("\u{1F9EA} Comparing versions:", installedVersionStr, latestVersionStr);
      if (installedVersionStr && latestVersionStr && installedVersionStr !== latestVersionStr) {
        const warn = warningContainer.createEl("div", {
          text: `\u26A0\uFE0F New version available (${installedVersionStr} \u2192 ${latestVersionStr}) \u2014 use regular update instead`
        });
        warn.style.fontSize = "0.85em";
        warn.style.color = "var(--text-muted)";
        warn.style.fontStyle = "italic";
        warn.setAttr(
          "title",
          "Force updating while a new version is available may skip important changes."
        );
      }
      const buttonGroup = fixButtonRow.createDiv();
      buttonGroup.style.display = "flex";
      buttonGroup.style.gap = "0.5em";
      buttonGroup.createEl("button", { text: "Force Update Vault", cls: "mod-cta" }).onclick = async () => {
        await this.plugin.forceUpdatePreviewAndConfirm();
        if (this.plugin.settings.reparseGamesets) {
          await this.plugin.refreshGameSetData();
        }
      };
      buttonGroup.createEl("button", {
        text: "Undo Update"
      }).onclick = async () => {
        await this.plugin.undoForceUpdate();
      };
      const fixTimestampRow = fixBody.createDiv();
      Object.assign(fixTimestampRow.style, {
        textAlign: "right",
        fontSize: "11px",
        color: "var(--text-muted)",
        marginTop: "0.25em"
      });
      fixTimestampRow.textContent = `Last forced: ${this.plugin.settings.lastForceUpdate ? new Date(this.plugin.settings.lastForceUpdate).toLocaleString() : "Not forced yet"}`;
      fixBody.createEl("div", {
        attr: {
          style: "border-top: 1px solid var(--divider-color); margin: 0.75em 0;"
        }
      });
      const reparseRow = fixBody.createDiv();
      reparseRow.style.marginTop = "0.5em";
      new import_obsidian7.Setting(reparseRow).setName("Re-parse Game Sets On Force Update").setDesc(
        "Also re-parse your ruleset compendium and reference sets. This won't delete any files in the Compendium or Reference folders."
      ).addToggle(
        (tog) => tog.setValue(this.plugin.settings.reparseGamesets).onChange(async (value) => {
          this.plugin.settings.reparseGamesets = value;
          await this.plugin.saveSettings();
        })
      );
      const backupDetails = containerEl.createEl("details", { cls: "vk-section" });
      const backupSummary = backupDetails.createEl("summary", { cls: "vk-section-header" });
      Object.assign(backupSummary.style, {
        display: "flex",
        flexDirection: "column",
        alignItems: "stretch",
        padding: "0.5em 0",
        borderBottom: "1px solid var(--divider-color)",
        cursor: "pointer"
      });
      const backupTitleRow = backupSummary.createDiv({
        attr: {
          style: `
			display: flex;
			justify-content: space-between;
			align-items: flex-end;
			`
        }
      });
      const titleBlock = backupTitleRow.createDiv({
        attr: { style: "display: flex; flex-direction: column;" }
      });
      titleBlock.createEl("h5", { text: "Vault Backups" });
      titleBlock.createEl("div", {
        text: "The Toolkit will back up your vault automatically before updates. You can also back up manually anytime.",
        cls: "setting-item-description",
        attr: { style: "margin-top: 0.25em;" }
      });
      const backupVvIcon = backupTitleRow.createEl("span", { text: "VV", cls: "vk-toggle-icon" });
      Object.assign(backupVvIcon.style, {
        fontWeight: "bold",
        display: "inline-block",
        transition: "transform 0.2s ease",
        transformOrigin: "50% 50%",
        userSelect: "none",
        transform: backupDetails.open ? "rotate(0deg)" : "rotate(180deg)"
      });
      backupDetails.ontoggle = () => {
        backupVvIcon.style.transform = backupDetails.open ? "rotate(0deg)" : "rotate(180deg)";
      };
      const backupBody = backupDetails.createDiv({ cls: "vk-section-body" });
      backupBody.style.paddingLeft = "1em";
      new import_obsidian7.Setting(backupBody).setName("Auto-Backup Before Update").setDesc("Create a full .zip of the vault before applying version updates. Force updates will only back up the files that will be modified or removed.").addToggle(
        (t) => t.setValue(this.plugin.settings.autoBackupBeforeUpdate).onChange(async (v) => {
          this.plugin.settings.autoBackupBeforeUpdate = v;
          await this.plugin.saveSettings();
        })
      );
      new import_obsidian7.Setting(backupBody).setName("Manual Backup").setDesc("Immediately create a zip backup of your vault").addButton(
        (b) => b.setButtonText("Backup Vault Now").setCta().onClick(async () => {
          const path2 = await this.plugin.backupManager.backupVaultToZip("manual");
          new import_obsidian7.Notice(`Backup created: ${path2}`);
        })
      );
      new import_obsidian7.Setting(backupBody).setName("Open Backups Folder").setDesc("Open the backups folder on disk. MacOS: Cant see it? Hit Shift+Cmd+(period).").addButton(
        (b) => b.setButtonText("Open Folder").onClick(async () => {
          try {
            const vaultBasePath = this.plugin.app.vault.adapter.getBasePath();
            const backupFolderPath = path.join(
              vaultBasePath,
              ".vault-backups"
            );
            const { shell } = window.require("electron");
            const result = await shell.openPath(backupFolderPath);
            if (typeof result === "string" && result.length > 0) {
              console.error("\u274C shell.openPath error:", result);
              new import_obsidian7.Notice("Could not open backups folder. See console.");
            }
          } catch (err) {
            console.error("\u274C Could not open backups folder:", err);
            new import_obsidian7.Notice("Could not open backups folder. See console.");
          }
        })
      );
      backupBody.createEl("div", {
        attr: {
          style: "border-top: 1px solid var(--divider-color); margin-top: 1.5em;"
        }
      });
      const customizationDetails = containerEl.createEl("details", { cls: "vk-section" });
      const customizationSummary = customizationDetails.createEl("summary", { cls: "vk-section-header" });
      Object.assign(customizationSummary.style, {
        display: "flex",
        flexDirection: "column",
        alignItems: "flex-start",
        padding: "0.5em 0",
        cursor: "pointer"
      });
      const titleRow = customizationSummary.createDiv({
        attr: {
          style: `
			display: flex;
			width: 100%;
			justify-content: space-between;
			align-items: flex-end;
			`
        }
      });
      const customizationTitleBlock = titleRow.createDiv({
        attr: { style: "display: flex; flex-direction: column;" }
      });
      const h5 = customizationTitleBlock.createEl("h5");
      h5.appendText("Custom File Management ");
      customizationTitleBlock.createEl("div", {
        text: "Skip updates on certain files or remap relocated Toolkit files so they can update.",
        cls: "setting-item-description",
        attr: { style: "margin-top: 0.25em;" }
      });
      const customVvIcon = titleRow.createEl("span", { text: "VV", cls: "vk-toggle-icon" });
      Object.assign(customVvIcon.style, {
        fontWeight: "bold",
        transition: "transform 0.2s ease",
        transformOrigin: "50% 50%",
        userSelect: "none",
        transform: customizationDetails.open ? "rotate(0deg)" : "rotate(180deg)"
      });
      customizationDetails.ontoggle = () => {
        customVvIcon.style.transform = customizationDetails.open ? "rotate(0deg)" : "rotate(180deg)";
      };
      const customizationBodyWrapper = customizationDetails.createDiv({
        attr: { style: "padding-left: 1em; padding-right: 1em;" }
      });
      const customizationBody = customizationBodyWrapper.createDiv({ cls: "vk-section-body" });
      const skipSection = customizationBody.createDiv();
      const settingItem = skipSection.createDiv({ cls: "setting-item" });
      const info = settingItem.createDiv({ cls: "setting-item-info" });
      info.createDiv({ text: "Skip Toolkit Items", cls: "setting-item-name" });
      info.createDiv({
        text: "Files listed here will be ignored during toolkit updates.",
        cls: "setting-item-description"
      });
      const control = settingItem.createDiv({ cls: "setting-item-control" });
      const dropdown = new import_obsidian7.DropdownComponent(control);
      dropdown.selectEl.style.minWidth = "220px";
      dropdown.addOption("", "Select an item\u2026");
      this.plugin.manifestCache.files.filter((f) => !f.optional).forEach((f) => dropdown.addOption(f.path, f.displayName ?? f.path.split("/").pop()));
      this.plugin.manifestCache.folders.filter((f) => !f.optional).forEach((f) => dropdown.addOption(f.path, (f.displayName ?? f.path.split("/").pop()) + "/ (folder)"));
      new import_obsidian7.ButtonComponent(control).setButtonText("Add").setCta().onClick(async () => {
        const key = dropdown.getValue();
        if (!key) return new import_obsidian7.Notice("Pick something to skip.");
        if (!this.plugin.settings.customPaths.some((c) => c.manifestKey === key)) {
          this.plugin.settings.customPaths.push({ vaultPath: key, manifestKey: key, doUpdate: false });
          await this.plugin.saveSettings();
          renderSkipTable();
        }
      });
      const skipTableWrapper = skipSection.createDiv({ cls: "vk-table-wrapper", attr: { style: "margin-top:0.75em" } });
      const renderSkipTable = () => {
        skipTableWrapper.empty();
        const items = this.plugin.settings.customPaths.filter((c) => !c.doUpdate);
        if (items.length === 0) {
          const emptyMsg = skipTableWrapper.createEl("div", { text: "No items skipped." });
          emptyMsg.style.textAlign = "center";
          emptyMsg.style.opacity = "0.6";
          emptyMsg.style.padding = "0.5em";
          return;
        }
        const table = skipTableWrapper.createEl("table", { cls: "setting-table" });
        const header = table.createTHead().insertRow();
        header.insertCell().textContent = "Skipped Files/Folders";
        const body = table.createTBody();
        items.forEach((entry) => {
          const row = body.insertRow();
          const contentCell = row.insertCell();
          contentCell.colSpan = 1;
          contentCell.style.display = "flex";
          contentCell.style.justifyContent = "space-between";
          contentCell.style.paddingLeft = "4em";
          contentCell.style.alignItems = "center";
          contentCell.style.gap = "1em";
          contentCell.style.fontWeight = "bold";
          contentCell.createSpan({ text: entry.manifestKey });
          const removeLink = contentCell.createEl("a", { text: "Remove entry", href: "#" });
          removeLink.style.fontSize = "0.8em";
          removeLink.style.color = "var(--text-faint)";
          removeLink.style.textDecoration = "underline";
          removeLink.onclick = async (e) => {
            e.preventDefault();
            this.plugin.settings.customPaths.remove(entry);
            await this.plugin.saveSettings();
            renderSkipTable();
          };
        });
      };
      renderSkipTable();
      customizationBody.createEl("div", {
        attr: { style: "height: 1em; border-top: 1px solid var(--divider-color); margin: 1em 0;" }
      });
      const remapSection = customizationBody.createDiv();
      const remapSetting = remapSection.createDiv({ cls: "setting-item" });
      const remapInfo = remapSetting.createDiv({ cls: "setting-item-info" });
      remapInfo.createDiv({ text: "Remap File Paths", cls: "setting-item-name" });
      remapInfo.createDiv({
        text: "Remap toolkit files vault paths if you chose to move anything. Moving files without remapping will result in duplicate and/or out-of-date files after update.",
        cls: "setting-item-description"
      });
      const remapControlBlock = remapSection.createDiv({ cls: "vk-inline-add-controls" });
      remapControlBlock.style.flexWrap = "wrap";
      remapControlBlock.style.marginTop = "0.5em";
      let remapDrop;
      let remapInput;
      remapDrop = new import_obsidian7.DropdownComponent(remapControlBlock);
      remapDrop.selectEl.style.minWidth = "220px";
      remapDrop.addOption("", "Select an item\u2026");
      this.plugin.manifestCache.files.forEach(
        (f) => remapDrop.addOption(f.path, f.displayName ?? f.path.split("/").pop())
      );
      this.plugin.manifestCache.folders.forEach(
        (f) => remapDrop.addOption(f.path, (f.displayName ?? f.path.split("/").pop()) + "/ (folder)")
      );
      const searchWrapper = remapControlBlock.createDiv();
      const searchComponent = new import_obsidian7.SearchComponent(searchWrapper);
      searchComponent.setPlaceholder("Search vault path\u2026");
      new FilePathSuggester(this.app, searchComponent.inputEl);
      remapInput = searchComponent.inputEl;
      new import_obsidian7.ButtonComponent(remapControlBlock).setButtonText("Add Remap").setCta().onClick(async () => {
        const key = remapDrop.getValue();
        const vp = remapInput.value.trim();
        if (!key || !vp) return new import_obsidian7.Notice("Select an item and enter a vault path.");
        if (!this.app.vault.getAbstractFileByPath(vp)) return new import_obsidian7.Notice("Vault path not found.");
        this.plugin.settings.customPaths = this.plugin.settings.customPaths.filter((c) => c.manifestKey !== key);
        this.plugin.settings.customPaths.push({ manifestKey: key, vaultPath: vp, doUpdate: true });
        await this.plugin.saveSettings();
        remapInput.value = "";
        remapDrop.setValue("");
        renderRemapPanel();
      });
      const remapTableWrapper = remapSection.createDiv({ cls: "vk-table-wrapper", attr: { style: "margin-top: 0.75em" } });
      const renderRemapPanel = () => {
        remapTableWrapper.empty();
        const toRemap = this.plugin.settings.customPaths.filter((c) => c.doUpdate);
        if (toRemap.length === 0) {
          const emptyMsg = remapTableWrapper.createEl("div", { text: "No custom paths defined." });
          emptyMsg.style.textAlign = "center";
          emptyMsg.style.opacity = "0.6";
          emptyMsg.style.padding = "0.5em";
          return;
        }
        const table = remapTableWrapper.createEl("table", { cls: "setting-table" });
        const head = table.createTHead().insertRow();
        ["Toolit Item", "New Vault Path", ""].forEach((txt) => head.insertCell().textContent = txt);
        const body = table.createTBody();
        toRemap.forEach((entry) => {
          const row = body.insertRow();
          row.insertCell().textContent = entry.manifestKey;
          row.insertCell().textContent = entry.vaultPath;
          const removeCell = row.insertCell();
          const removeLink = removeCell.createEl("a", { text: "Remove entry", href: "#" });
          removeLink.style.fontSize = "0.8em";
          removeLink.style.color = "var(--text-faint)";
          removeLink.style.textDecoration = "underline";
          removeLink.onclick = async (e) => {
            e.preventDefault();
            this.plugin.settings.customPaths.remove(entry);
            await this.plugin.saveSettings();
            renderRemapPanel();
          };
        });
      };
      renderRemapPanel();
      customizationBody.createEl("div", {
        attr: {
          style: "border-top: 1px solid var(--divider-color); margin: 0.5em 0;"
        }
      });
      const highlightDetails = containerEl.createEl("details", { cls: "vk-section" });
      const highlightSummary = highlightDetails.createEl("summary", { cls: "vk-section-header" });
      Object.assign(highlightSummary.style, {
        display: "flex",
        flexDirection: "column",
        alignItems: "stretch",
        padding: "0.5em 0",
        borderBottom: "1px solid var(--divider-color)",
        cursor: "pointer"
      });
      const highlightTitleRow = highlightSummary.createDiv({
        attr: {
          style: `
			display: flex;
			justify-content: space-between;
			align-items: flex-end;
			`
        }
      });
      const hlTitleBlock = highlightTitleRow.createDiv({
        attr: { style: "display: flex; flex-direction: column;" }
      });
      hlTitleBlock.createEl("h5", { text: "File Highlights" });
      hlTitleBlock.createEl("div", {
        text: "Toggle on/off the highlighting of Toolkit-specific files. Also make the highlights cool colors.",
        cls: "setting-item-description",
        attr: { style: "margin-top: 0.25em;" }
      });
      const hlToggleIcon = highlightTitleRow.createEl("span", { text: "VV", cls: "vk-toggle-icon" });
      Object.assign(hlToggleIcon.style, {
        fontWeight: "bold",
        display: "inline-block",
        transition: "transform 0.2s ease",
        transformOrigin: "50% 50%",
        userSelect: "none",
        transform: highlightDetails.open ? "rotate(0deg)" : "rotate(180deg)"
      });
      highlightDetails.ontoggle = () => {
        hlToggleIcon.style.transform = highlightDetails.open ? "rotate(0deg)" : "rotate(180deg)";
      };
      const highlightBody = highlightDetails.createDiv({ cls: "vk-section-body" });
      highlightBody.style.paddingLeft = "1em";
      new import_obsidian7.Setting(highlightBody).setName("Enable File/Folder Highlighting").setDesc("Any file/folder installed by VVunderlore will have this background.").addToggle((toggle) => {
        toggle.setValue(this.plugin.settings.highlightEnabled).onChange(async (enabled) => {
          this.plugin.settings.highlightEnabled = enabled;
          await this.plugin.saveSettings();
          if (enabled) {
            this.plugin.enableHighlight();
          } else {
            this.plugin.disableHighlight();
          }
          renderHighlightColorPickers();
        });
      });
      const colorPickerWrapper = highlightBody.createDiv();
      const renderHighlightColorPickers = () => {
        colorPickerWrapper.empty();
        if (!this.plugin.settings.highlightEnabled) {
          return;
        }
        new import_obsidian7.Setting(colorPickerWrapper).setName("Light Mode Highlight Color").setDesc("Choose the background color for files/folders in Light mode.").addColorPicker((picker) => {
          picker.setValue(this.plugin.settings.highlightColorLight).onChange(async (newColor) => {
            this.plugin.settings.highlightColorLight = newColor;
            await this.plugin.saveSettings();
            this.plugin.disableHighlight();
            this.plugin.enableHighlight();
          });
        });
        new import_obsidian7.Setting(colorPickerWrapper).setName("Dark Mode Highlight Color").setDesc("Choose the background color for files/folders in Dark mode.").addColorPicker((picker) => {
          picker.setValue(this.plugin.settings.highlightColorDark).onChange(async (newColor) => {
            this.plugin.settings.highlightColorDark = newColor;
            await this.plugin.saveSettings();
            this.plugin.disableHighlight();
            this.plugin.enableHighlight();
          });
        });
      };
      renderHighlightColorPickers();
      renderSkipTable();
      renderRemapPanel();
      const removeDemoSetting = new import_obsidian7.Setting(containerEl);
      removeDemoSetting.settingEl.style.borderTop = "none";
      removeDemoSetting.setName("Remove Demo Files").setDesc("Delete every \u201Coptional\u201D demo file and folder from your vault.").addButton(
        (button) => button.setButtonText("Remove Demo Files").onClick(async () => {
          const optionalFileEntries = this.plugin.manifestCache.files.filter((f) => f.optional);
          const optionalFolderEntries = this.plugin.manifestCache.folders.filter((f) => f.optional);
          const totalCountFiles = optionalFileEntries.length;
          const totalCountFolders = optionalFolderEntries.length;
          const totalCount = totalCountFiles + totalCountFolders;
          if (totalCount === 0) {
            new import_obsidian7.Notice("No \u201Coptional\u201D demo files or folders to remove.");
            return;
          }
          const userConfirmed = await new Promise((resolve) => {
            const confirmModal = new class extends import_obsidian7.Modal {
              constructor(app) {
                super(app);
              }
              onOpen() {
                this.contentEl.empty();
                this.contentEl.createEl("h2", { text: "Confirm Removal" });
                this.contentEl.createEl("p", {
                  text: `This will permanently delete ${totalCountFiles} file(s) and ${totalCountFolders} folder(s). Continue?`
                });
                const btnRow = this.contentEl.createEl("div");
                Object.assign(btnRow.style, {
                  display: "flex",
                  justifyContent: "flex-end",
                  gap: "0.5em",
                  marginTop: "1.5em"
                });
                btnRow.createEl("button", { text: "Cancel" }).onclick = () => {
                  resolve(false);
                  this.close();
                };
                btnRow.createEl("button", { text: "Yes, Remove", cls: "mod-danger" }).onclick = () => {
                  resolve(true);
                  this.close();
                };
              }
              onClose() {
                this.contentEl.empty();
              }
            }(this.app);
            confirmModal.open();
          });
          if (!userConfirmed) {
            return;
          }
          let filesDeleted = 0;
          for (const fileEntry of optionalFileEntries) {
            const mapped = this.plugin.settings.customPaths.find((c) => c.manifestKey === fileEntry.key);
            const vaultPath = mapped?.vaultPath ?? fileEntry.path;
            if (await this.app.vault.adapter.exists(vaultPath)) {
              try {
                await this.app.vault.adapter.remove(vaultPath);
                filesDeleted++;
              } catch (err) {
                console.error(`Failed to delete optional file ${vaultPath}`, err);
              }
            }
          }
          let foldersDeleted = 0;
          for (const folderEntry of optionalFolderEntries) {
            const mapped = this.plugin.settings.customPaths.find((c) => c.manifestKey === folderEntry.key);
            const vaultFolderPath = mapped?.vaultPath ?? folderEntry.path;
            if (await this.app.vault.adapter.exists(vaultFolderPath)) {
              try {
                await this.app.vault.adapter.rmdir(vaultFolderPath, true);
                foldersDeleted++;
              } catch (err) {
                console.error(`Failed to delete optional folder ${vaultFolderPath}`, err);
              }
            }
          }
          this.plugin.settings.customPaths = this.plugin.settings.customPaths.filter((c) => {
            const isOptFile = optionalFileEntries.some((f) => f.key === c.manifestKey);
            const isOptFolder = optionalFolderEntries.some((f) => f.key === c.manifestKey);
            return !isOptFile && !isOptFolder;
          });
          await this.plugin.saveSettings();
          new import_obsidian7.Notice(`Deleted ${filesDeleted} file(s) and ${foldersDeleted} folder(s).`);
          this.display();
        })
      );
      const footer = containerEl.createDiv({ cls: "setting-item" });
      Object.assign(footer.style, {
        fontSize: "0.85em",
        color: "var(--text-muted)",
        marginTop: "2em"
      });
      footer.createEl("span", {
        text: `VVunderlore Toolkit Plugin v${this.plugin.manifest.version} \u2022 `
      });
      footer.createEl("a", {
        text: "View on GitHub",
        href: "https://github.com/slamwise0001/vvunderlore-toolkit-plugin",
        attr: { target: "_blank" }
      });
      containerEl.scrollTop = savedScrollTop;
    })();
  }
  async updateVersionDisplay() {
    if (!this.versionValueEl || !this.forceWarningEl) return;
    let installed = "";
    try {
      const ver = await this.plugin.app.vault.adapter.read(".version.json");
      installed = JSON.parse(ver).version ?? "";
    } catch {
    }
    const latest = (this.plugin.settings.latestToolkitVersion ?? "").trim();
    const isMatch = installed === latest;
    this.versionValueEl.textContent = installed || "Not installed";
    this.versionValueEl.style.color = isMatch ? "var(--text-success)" : "var(--text-error)";
    this.forceWarningEl.empty();
    if (installed && latest && installed !== latest) {
      const warn = this.forceWarningEl.createDiv({
        text: `\u26A0\uFE0F New version available (${installed} \u2192 ${latest}) \u2014 use regular update instead`
      });
      warn.style.cssText = `
			font-size: 0.85em;
			color: var(--text-muted);
			font-style: italic;
		  `;
      warn.setAttr("title", "Force updating while a new version is available may skip important changes.");
    }
  }
};

// src/fileCacheManager.ts
var import_crypto = require("crypto");
var ToolkitFileCacheManager = class {
  constructor(vault, initialCache, saveCallback) {
    this.vault = vault;
    this.cache = initialCache || {};
    this.save = saveCallback;
  }
  hashContent(content) {
    return (0, import_crypto.createHash)("sha256").update(content).digest("hex");
  }
  async isUpToDate(vaultPath) {
    const entry = this.cache[vaultPath];
    if (!entry) {
      return false;
    }
    const exists = await this.vault.adapter.exists(vaultPath);
    if (!exists) {
      return false;
    }
    const content = await this.vault.adapter.read(vaultPath);
    const localHash = this.hashContent(content);
    const isSame = localHash === entry.hash;
    return isSame;
  }
  async updateCache(vaultPath, content, githubPath, saveNow = true) {
    this.cache[vaultPath] = {
      hash: this.hashContent(content),
      githubPath
    };
    if (saveNow) await this.save();
  }
  getCache() {
    return this.cache;
  }
  getTrackedFiles() {
    return Object.keys(this.cache);
  }
  getGitHubPath(vaultPath) {
    return this.cache[vaultPath]?.githubPath;
  }
  resetCache() {
    this.cache = {};
  }
  async removeFromCache(vaultPath) {
    delete this.cache[vaultPath];
    await this.save();
  }
};

// src/backup/BackupManager.ts
var import_obsidian8 = require("obsidian");
var import_path = require("path");
var import_fs = require("fs");
var BackupManager = class {
  constructor(vault) {
    this.vault = vault;
  }
  /**
   * Mirror every vault file (excluding .obsidian & backups) into a timestamped folder,
   * then prune to keep only the latest N full snapshots.
   * @param label Optional suffix for the backup folder name
   * @param maxFullBackups Number of full snapshots to retain (default: 5)
   */
  async backupVaultMirror(label, maxFullBackups = 5) {
    const ts = (/* @__PURE__ */ new Date()).toISOString().replace(/[:.]/g, "-");
    const tag = label ? `-${label}` : "";
    const base = (0, import_obsidian8.normalizePath)(`.vault-backups/full/${ts}${tag}`);
    console.log(`[BackupManager] Starting mirror backup: ${base}`);
    await this.ensureFolderExists(base);
    for (const file of this.vault.getFiles()) {
      if (file.path.startsWith(".vault-backups/") || file.path.startsWith(".obsidian/")) {
        continue;
      }
      const content = await this.vault.read(file);
      const target = (0, import_obsidian8.normalizePath)(`${base}/${file.path}`);
      await this.ensureFolderExists((0, import_path.dirname)(target));
      await this.vault.create(target, content);
    }
    console.log("[BackupManager] Mirror backup complete. Pruning old backups...");
    await this.pruneFullBackups(base, maxFullBackups);
    return base;
  }
  /**
   * Legacy alias for mirror-based backups
   */
  async backupVaultToZip(label) {
    return this.backupVaultMirror(label);
  }
  /**
   * Deletes oldest full backup folders, keeping only the most recent `keep` snapshots.
   */
  async pruneFullBackups(currentPath, keep) {
    const root = (0, import_obsidian8.normalizePath)(".vault-backups/full");
    await this.ensureFolderExists(root);
    if (!await this.vault.adapter.exists(root)) {
      return;
    }
    const listing = await this.vault.adapter.list(root);
    const rawFolders = Array.isArray(listing) ? listing : "folders" in listing ? listing.folders : [];
    const folders = rawFolders.map((f) => (0, import_path.basename)(f));
    const sorted = [...folders].sort((a, b) => b.localeCompare(a));
    const adapterAny = this.vault.adapter;
    const fsRoot = adapterAny.basePath ? (0, import_path.join)(adapterAny.basePath, root) : null;
    if (!fsRoot) {
      return;
    }
    for (let i = keep; i < sorted.length; i++) {
      const name = sorted[i];
      const vaultPath = (0, import_obsidian8.normalizePath)(`${root}/${name}`);
      if (vaultPath === currentPath) {
        continue;
      }
      const removePath = (0, import_path.join)(fsRoot, name);
      try {
        await import_fs.promises.rm(removePath, { recursive: true, force: true });
      } catch (e) {
      }
      const af = this.vault.getAbstractFileByPath(vaultPath);
      if (af) {
        await this.vault.delete(af);
      }
    }
  }
  /**
   * Recursively ensures that a directory exists in the vault.
   */
  async ensureFolderExists(folderPath) {
    if (!folderPath || await this.vault.adapter.exists(folderPath)) {
      return;
    }
    const parent = (0, import_path.dirname)(folderPath);
    await this.ensureFolderExists(parent);
    await this.vault.createFolder(folderPath);
  }
};

// src/main.ts
function getRulesetDisplayName(key) {
  const ed = AVAILABLE_EDITIONS.find((e) => e.id === key);
  return ed?.label ?? key;
}
var loadingIcon = "data:image/png;base64,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";
var InstallingModal2 = class extends import_obsidian9.Modal {
  constructor(app) {
    super(app);
  }
  onOpen() {
    this.contentEl.empty();
    const img = this.contentEl.createEl("img", {
      attr: { src: loadingIcon, alt: "Installing\u2026" }
    });
    Object.assign(img.style, {
      display: "block",
      margin: "1em auto 0.5em",
      width: "100px",
      height: "100px"
    });
    img.animate(
      [
        { transform: "rotate(0deg)" },
        { transform: "rotate(-360deg)" }
      ],
      {
        duration: 1500,
        // one and a half seconds per revolution
        iterations: Infinity,
        easing: "linear"
      }
    );
    const txt = this.contentEl.createDiv({ text: "Installing\u2026", cls: "mod-quiet" });
    txt.style.cssText = "font-style: italic; color: var(--text-muted); text-align: center; padding: 1em;";
  }
  onClose() {
    this.contentEl.empty();
  }
};
var DEFAULT_SETTINGS = {
  installedVersion: "1.0.0",
  customizeUpdates: false,
  updateTargets: {
    tools: true,
    toolsPath: "Tools",
    templates: true,
    templatesPath: "Extras/Templates",
    omninomicon: true,
    omninomiconPath: "Adventures/Omninomicon.md",
    spellbook: true,
    spellbookPath: "Compendium/Spells/_Spellbook.md"
  },
  latestDefaults: void 0,
  pathOverrides: {},
  backupFiles: {},
  backupPath: "",
  autoBackup: false,
  lastBackupTime: "",
  backupError: "",
  customPaths: [],
  autoBackupBeforeUpdate: true,
  highlightEnabled: false,
  highlightColorLight: "rgb(107, 146, 120)",
  highlightColorDark: "rgb( 50,  70,  50)",
  rulesetCompendium: "",
  rulesetReference: [],
  reparseGamesets: true
};
var VVunderloreToolkitPlugin = class extends import_obsidian9.Plugin {
  constructor() {
    super(...arguments);
    this.manifestCache = { files: [], folders: [] };
    this.changelog = "";
    this.autoCheckInterval = null;
    this.oldPathsByGithub = {};
    this.styleEl = null;
    this.excludedPaths = [
      ".DS_Store",
      ".gitignore",
      ".gitattributes",
      ".github",
      "README.md",
      "Compendium"
    ];
    this.isFirstRun = false;
    this.pendingRulesetKey = "";
    this.pendingReferenceKeys = [];
  }
  // ─── HELPERS ────────────────────────────────────────────────────────
  /** Given a GitHub path, return the overridden vault path or the original. */
  resolveVaultPath(githubPath) {
    const custom = this.settings.customPaths.find(
      (c) => c.manifestKey === githubPath || c.manifestKey === this.keyFor(githubPath)
    );
    return custom?.vaultPath ?? githubPath;
  }
  /** Convert “some/folder/file.md” → “some-folder-file” (lowercased, no extension). */
  keyFor(path2) {
    return path2.replace(/[/\\]/g, "-").replace(/\.[^.]+$/, "").toLowerCase();
  }
  isExcluded(path2) {
    return this.excludedPaths.some(
      (ex) => path2 === ex || path2.startsWith(`${ex}/`) || path2.includes(`/${ex}/`) || path2.endsWith(`/${ex}`) || path2.includes(`/${ex}`)
    );
  }
  // ─── CUSTOM INSTALL LOGIC ───────────────────────────────────────────
  async performCustomInstall(toInstall) {
    const allFiles = this.app.vault.getAllLoadedFiles().filter((f) => f instanceof import_obsidian9.TFile).map((f) => f.path);
    const nonMarkerFiles = allFiles.filter((p) => p !== ".vvunderlore_installed");
    if (nonMarkerFiles.length > 0 && this.settings.autoBackupBeforeUpdate) {
      const folder = await this.backupManager.backupVaultMirror("pre-custom-install");
      new import_obsidian9.Notice(`Backup before custom\u2010install created at: ${folder}`);
    }
    for (const entry of toInstall) {
      if (entry.isFolder) {
        if (!await this.app.vault.adapter.exists(entry.path)) {
          await this.app.vault.createFolder(entry.path);
          console.log(`Created folder: ${entry.path}`);
        }
      } else {
        const manifestEntry = this.manifestCache.files.find(
          (f) => f.path === entry.path
        );
        if (!manifestEntry) {
          console.warn(`Could not find manifest entry for file: ${entry.path}`);
          continue;
        }
        await this.updateEntryFromManifest(manifestEntry, true);
      }
    }
    await this.updateVersionFile();
    this.settings.installedVersion = this.settings.latestToolkitVersion ?? this.settings.installedVersion;
    this.settings.lastForceUpdate = (/* @__PURE__ */ new Date()).toISOString();
    await this.saveSettings();
    const markerPath = ".vvunderlore_installed";
    if (!await this.app.vault.adapter.exists(markerPath)) {
      await this.app.vault.create(markerPath, "");
    }
    this.settings.highlightEnabled = true;
    await this.saveSettings();
    this.enableHighlight();
    await this.updateVersionFile();
    if (this.settingsTab) {
      this.settingsTab.display();
    }
    new import_obsidian9.Notice("\u2705 Custom install complete \u2026");
  }
  // ─── HIGHLIGHTING (Light + Dark Mode) ──────────────────────────────
  get highlightCSS() {
    const light = this.settings.highlightColorLight.trim() || "rgba(107,146,120,1)";
    const dark = this.settings.highlightColorDark.trim() || "rgba( 50, 70, 50,1)";
    const fileSelectors = this.manifestCache.files.map((f) => {
      const escaped = f.path.replace(/"/g, '\\"');
      return `.nav-file-title[data-path="${escaped}"]`;
    });
    const folderSelectors = this.manifestCache.folders.map((f) => {
      const escaped = f.path.replace(/"/g, '\\"');
      return `.nav-folder-title[data-path="${escaped}"]`;
    });
    const lines = [
      `:root {`,
      `  --vvunderlore-toolkit-highlight: ${light};`,
      `}`,
      ``,
      `body.theme-dark {`,
      `  --vvunderlore-toolkit-highlight: ${dark};`,
      `}`,
      ``
    ];
    if (fileSelectors.length) {
      lines.push(`${fileSelectors.join(", ")} {`);
      lines.push(`  background-color: var(--vvunderlore-toolkit-highlight);`);
      lines.push(`  border-radius: 3px;`);
      lines.push(`}`);
      lines.push(``);
    }
    if (folderSelectors.length) {
      lines.push(`${folderSelectors.join(", ")} {`);
      lines.push(`  background-color: var(--vvunderlore-toolkit-highlight);`);
      lines.push(`  border-radius: 3px;`);
      lines.push(`}`);
      lines.push(``);
    }
    return lines.join("\n");
  }
  enableHighlight() {
    if (this.styleEl) return;
    this.styleEl = document.createElement("style");
    this.styleEl.id = "vvunderlore-highlight-inject";
    this.styleEl.textContent = this.highlightCSS;
    document.head.appendChild(this.styleEl);
  }
  disableHighlight() {
    if (!this.styleEl) return;
    this.styleEl.remove();
    this.styleEl = null;
  }
  // ─── REMOTE BASELINE CACHING ─────────────────────────────────────────
  async fetchRemoteBaseline() {
    console.log("\u{1F501} fetchRemoteBaseline() called");
    if (!this.manifestCache || !Array.isArray(this.manifestCache.files)) {
      console.warn("\u26A0\uFE0F manifestCache is missing or invalid");
      return;
    }
    for (const entry of this.manifestCache.files) {
      try {
        const rawUrl = `https://raw.githubusercontent.com/slamwise0001/VVunderlore-Toolkit-Full/main/${entry.path}`;
        const remoteText = await (await fetch(rawUrl)).text();
        const resolved = this.resolveVaultPath(entry.path);
        if (resolved !== entry.path) {
          await this.fileCacheManager.removeFromCache(entry.path);
        }
        await this.fileCacheManager.updateCache(
          resolved,
          remoteText,
          entry.path,
          false
        );
      } catch (e) {
        console.error(`Failed to fetch raw baseline for ${entry.path}`, e);
      }
    }
    console.log("\u{1F4E6} Final cache:", this.fileCacheManager.getCache());
  }
  // ─── MARKER FILE CHECKS (first‐run detection) ───────────────────────
  async checkMarkerFile() {
    const markerPath = ".vvunderlore_installed";
    const markerExists = await this.app.vault.adapter.exists(markerPath);
    this.isFirstRun = !markerExists;
    delete this.settings.needsInstall;
    await this.saveSettings();
    this.settingsTab.display();
  }
  // ─── MANIFEST SYNC ────────────────────────────────────────────────────
  async syncManifest() {
    try {
      const res = await fetch(
        "https://raw.githubusercontent.com/slamwise0001/VVunderlore-Toolkit-Full/main/manifest.json"
      );
      if (!res.ok) throw new Error(`Failed to fetch manifest: ${res.statusText}`);
      const manifest = await res.json();
      this.settings.latestDefaults = manifest.defaultPaths || {};
      this.manifestCache = manifest;
      const manifestContent = JSON.stringify(manifest, null, 2);
      await this.app.vault.adapter.write("manifest.json", manifestContent);
      await this.saveSettings();
      console.log("Manifest synced and local manifest updated.");
    } catch (error) {
      console.error("Error syncing manifest:", error);
      new import_obsidian9.Notice("Failed to sync manifest.");
    }
  }
  // ─── PLUGIN LIFECYCLE ─────────────────────────────────────────────────
  async onload() {
    await this.loadSettings();
    this.backupManager = new BackupManager(this.app.vault);
    this.fileCacheManager = new ToolkitFileCacheManager(
      this.app.vault,
      this.settings.fileCache ?? {},
      async () => await this.saveSettings()
    );
    const origError = console.error.bind(console);
    console.error = (msg, ...rest) => {
      if (typeof msg === "string" && msg.includes("Cannot index file") && msg.includes("Dataview")) {
        return;
      }
      origError(msg, ...rest);
    };
    this.settingsTab = new ToolkitSettingsTab(this.app, this);
    this.addSettingTab(this.settingsTab);
    try {
      const content = await this.app.vault.adapter.read("manifest.json");
      this.manifestCache = JSON.parse(content);
      console.log("\u2705 Loaded manifest from vault:", this.manifestCache);
    } catch (err) {
      console.warn("Manifest not found in vault; will fetch from GitHub shortly.");
    }
    if (this.settings.highlightEnabled) {
      this.enableHighlight();
    }
    setTimeout(async () => {
      await this.syncManifest();
      await this.showIndexingModal();
      await this.checkForUpdates();
      this.oldPathsByGithub = Object.entries(
        this.fileCacheManager.getCache()
      ).reduce((map, [vaultPath, entry]) => {
        map[entry.githubPath] = vaultPath;
        return map;
      }, {});
      console.log("\u{1F4E6} Cached Files:", this.fileCacheManager.getCache());
    }, 250);
    this.scheduleAutoUpdateCheck();
    this.registerEvent(
      this.app.vault.on("delete", () => this.app.commands.executeCommandById("dataview:clear-cache"))
    );
    this.registerEvent(
      this.app.vault.on(
        "rename",
        () => this.app.commands.executeCommandById("dataview:clear-cache")
      )
    );
    if (!this.settings.customPaths) {
      this.settings.customPaths = [];
    }
    try {
      const raw = await this.app.vault.adapter.read("manifest.json");
      const manifest = JSON.parse(raw);
      const entries = [...manifest.folders || [], ...manifest.files || []];
      this.requiresGraph = /* @__PURE__ */ new Map();
      for (const e of entries) {
        this.requiresGraph.set(e.key, e.requires ?? []);
      }
    } catch (e) {
      console.warn("Could not build requiresGraph (manifest.json missing or invalid).");
      this.requiresGraph = /* @__PURE__ */ new Map();
    }
    if (this.isFirstRun) {
      this.app.workspace.detachLeavesOfType("markdown");
      const welcome = this.app.vault.getAbstractFileByPath("Welcome.md");
      if (welcome instanceof import_obsidian9.TFile) {
        this.app.workspace.getLeaf(true).openFile(welcome);
      }
    }
  }
  onunload() {
    this.disableHighlight();
    if (this.autoCheckInterval) {
      clearInterval(this.autoCheckInterval);
    }
  }
  scheduleAutoUpdateCheck() {
    this.autoCheckInterval = window.setInterval(() => {
      this.checkForUpdates();
    }, 60 * 60 * 1e3);
  }
  // ─── BACKUP & UNDO ────────────────────────────────────────────────────
  async backupFile(filePath, content) {
    this.settings.backupFiles = this.settings.backupFiles || {};
    this.settings.backupFiles[filePath] = content;
    await this.saveSettings();
    console.log(`Backup stored for ${filePath}`);
  }
  async undoForceUpdate() {
    if (!this.settings.backupFiles || Object.keys(this.settings.backupFiles).length === 0) {
      new import_obsidian9.Notice("No backups available to restore.");
      return;
    }
    for (const [filePath, backupContent] of Object.entries(this.settings.backupFiles)) {
      if (await this.app.vault.adapter.exists(filePath)) {
        await this.app.vault.adapter.write(filePath, backupContent);
        console.log(`Restored ${filePath}`);
      } else {
        await this.app.vault.create(filePath, backupContent);
        console.log(`Recreated and restored ${filePath}`);
      }
    }
    new import_obsidian9.Notice("\u2705 Force update undone.");
    this.settings.backupFiles = {};
    await this.saveSettings();
  }
  // ─── FOLDER SYNC ───────────────────────────────────────────────────────
  async syncMissingFolders() {
    if (this.manifestCache && this.manifestCache.folders) {
      for (const folderEntry of this.manifestCache.folders) {
        const folderPath = folderEntry.path;
        if (!await this.app.vault.adapter.exists(folderPath)) {
          await this.app.vault.createFolder(folderPath);
          console.log(`\u{1F4C1} Created missing folder: ${folderPath}`);
        }
      }
    }
  }
  // ─── FORCE-UPDATE PREVIEW ──────────────────────────────────────────────
  async buildForceUpdatePreview() {
    const previewList = [];
    const denyListedFolders = this.settings.customPaths.filter((c) => c.doUpdate === false).map((c) => c.manifestKey);
    for (const entry of this.manifestCache.files) {
      if (entry.optional) {
        continue;
      }
      const custom = this.settings.customPaths.find((c) => c.manifestKey === entry.key);
      const isInDenyFolder = denyListedFolders.some(
        (folder) => entry.path.startsWith(folder + "/")
      );
      if (custom?.doUpdate === false || isInDenyFolder) {
        const vp = custom?.vaultPath ?? this.resolveVaultPath(entry.path);
        const exists = await this.app.vault.adapter.exists(vp);
        const upToDate = exists && await this.fileCacheManager.isUpToDate(vp);
        if (!exists || !upToDate) {
          previewList.push({
            filePath: vp,
            action: "deny-listed \u2013 will not update",
            selected: false
          });
        }
      }
    }
    if (!this.settings.customizeUpdates) {
      for (const f of this.manifestCache.files) {
        if (f.optional) {
          continue;
        }
        const custom = this.settings.customPaths.find((c) => c.manifestKey === f.key);
        const isInDenyFolder = denyListedFolders.some(
          (folder) => f.path.startsWith(folder + "/")
        );
        if (custom?.doUpdate === false || isInDenyFolder) {
          continue;
        }
        const vp = this.resolveVaultPath(f.path);
        let tag = "";
        if (vp !== f.path) tag = " (remapped)";
        const exists = await this.app.vault.adapter.exists(vp);
        if (!exists) {
          previewList.push({
            filePath: vp,
            action: `new file${tag}`,
            selected: true
          });
        } else if (!await this.fileCacheManager.isUpToDate(vp)) {
          previewList.push({
            filePath: vp,
            action: `will be overwritten${tag}`,
            selected: true
          });
        }
      }
      for (const fld of this.manifestCache.folders) {
        if (fld.optional) {
          continue;
        }
        const isDenyFolder = denyListedFolders.includes(fld.path);
        if (!await this.app.vault.adapter.exists(fld.path) && !isDenyFolder) {
          previewList.push({
            filePath: fld.path,
            action: "missing folder (will be created)",
            selected: true,
            isFolder: true
          });
        }
      }
      return previewList;
    }
    for (const entry of this.manifestCache.files) {
      if (entry.optional) {
        continue;
      }
      const custom = this.settings.customPaths.find((c) => c.manifestKey === entry.key);
      const isInDenyFolder = denyListedFolders.some(
        (folder) => entry.path.startsWith(folder + "/")
      );
      if (custom?.doUpdate === false || isInDenyFolder) {
        continue;
      }
      const vaultPath = custom?.vaultPath ?? this.resolveVaultPath(entry.path);
      const exists = await this.app.vault.adapter.exists(vaultPath);
      const upToDate = exists && await this.fileCacheManager.isUpToDate(vaultPath);
      let tag = "";
      if (vaultPath !== entry.path) tag = " (remapped)";
      if (!exists) {
        previewList.push({
          filePath: vaultPath,
          action: `new file${tag}`,
          selected: true
        });
      } else if (!upToDate) {
        previewList.push({
          filePath: vaultPath,
          action: `will be overwritten${tag}`,
          selected: true
        });
      }
    }
    for (const entry of this.manifestCache.folders) {
      if (entry.optional) {
        continue;
      }
      const isDenyFolder = denyListedFolders.includes(entry.path);
      if (!await this.app.vault.adapter.exists(entry.path) && !isDenyFolder) {
        previewList.push({
          filePath: entry.path,
          action: "missing folder (will be created)",
          selected: true,
          isFolder: true
        });
      }
    }
    for (const f of this.manifestCache.files) {
      if (f.optional) {
        continue;
      }
      const manifestKey = f.key;
      const manifestPath = f.path;
      const custom = this.settings.customPaths.find((c) => c.manifestKey === manifestKey);
      const prevPath = this.oldPathsByGithub[manifestPath];
      const isInDenyFolder = denyListedFolders.some(
        (folder) => manifestPath.startsWith(folder + "/")
      );
      if (custom?.doUpdate === false || isInDenyFolder) {
        continue;
      }
      if (custom && custom.vaultPath && custom.vaultPath !== manifestPath) {
        continue;
      }
      if (prevPath && prevPath !== manifestPath && (!custom || custom.vaultPath === manifestPath)) {
        previewList.push({
          filePath: prevPath,
          action: `moved \u2192 ${manifestPath}`,
          selected: true
        });
      }
    }
    return previewList;
  }
  async forceUpdatePreviewAndConfirm() {
    const previewList = await this.buildForceUpdatePreview();
    const denyItems = [];
    const normalItems = [];
    for (const item of previewList) {
      if (item.action.startsWith("deny-listed")) {
        denyItems.push(item);
      } else {
        normalItems.push(item);
      }
    }
    const modal = new class extends import_obsidian9.Modal {
      constructor(app, normal, denied) {
        super(app);
        this.normal = normal;
        this.denied = denied;
      }
      onOpen() {
        this.contentEl.addEventListener("click", (e) => e.stopPropagation());
        this.contentEl.empty();
        this.titleEl.setText("Force Update Preview");
        this.contentEl.createEl("p", {
          text: 'The following items will be updated. Uncheck any items you do NOT want to change, then click "Confirm and Update".'
        });
        if (this.normal.length) {
          const normalContainer = this.contentEl.createEl("div");
          Object.assign(normalContainer.style, {
            maxHeight: "300px",
            overflowY: "auto",
            marginTop: "1em"
          });
          this.normal.forEach((item) => {
            const row = normalContainer.createDiv();
            Object.assign(row.style, {
              display: "flex",
              alignItems: "flex-start",
              justifyContent: "space-between",
              padding: "6px 0",
              fontFamily: "monospace"
            });
            const label = row.createDiv();
            label.style.flexGrow = "1";
            label.style.display = "flex";
            label.style.flexDirection = "column";
            const labelWrapper = label.createDiv();
            labelWrapper.textContent = item.filePath;
            const note = label.createDiv({ text: item.action });
            note.style.fontSize = "13px";
            note.style.color = "var(--text-muted)";
            note.style.fontStyle = "italic";
            const checkbox = row.createEl("input", { type: "checkbox" });
            checkbox.checked = item.selected;
            checkbox.onchange = () => {
              item.selected = checkbox.checked;
            };
          });
        } else {
          const noCandidates = this.contentEl.createEl("div");
          Object.assign(noCandidates.style, {
            display: "inline-block",
            fontFamily: "monospace",
            fontStyle: "italic",
            marginTop: "0.5em"
          });
          noCandidates.textContent = "No force-update candidates.";
        }
        if (this.denied.length) {
          const denyDetails = this.contentEl.createEl("details", { cls: "vk-section" });
          denyDetails.open = false;
          const summary = denyDetails.createEl("summary", { cls: "vk-section-header" });
          Object.assign(summary.style, {
            cursor: "pointer",
            display: "flex",
            color: "var(--text-faint)",
            alignItems: "center",
            gap: "0.5em",
            marginTop: "1em"
          });
          summary.createEl("span", { text: `Deny-List Files (${this.denied.length})` });
          const toggleIcon = summary.createEl("span", { text: "VV", cls: "vk-toggle-icon" });
          Object.assign(toggleIcon.style, {
            fontWeight: "bold",
            display: "inline-block",
            transition: "transform 0.2s ease",
            transformOrigin: "50% 50%",
            userSelect: "none",
            transform: "rotate(180deg)"
          });
          denyDetails.ontoggle = () => {
            toggleIcon.style.transform = denyDetails.open ? "rotate(0deg)" : "rotate(180deg)";
          };
          const denyBody = denyDetails.createDiv({ cls: "vk-section-body" });
          denyBody.style.paddingLeft = "1em";
          this.denied.forEach((item) => {
            const row = denyBody.createDiv();
            Object.assign(row.style, {
              display: "flex",
              alignItems: "flex-start",
              justifyContent: "space-between",
              padding: "6px 0",
              fontFamily: "monospace",
              color: "var(--text-faint)",
              fontStyle: "italic"
            });
            const labelWrapper = row.createDiv();
            labelWrapper.textContent = item.filePath;
            labelWrapper.style.textDecoration = "line-through";
            const note = row.createDiv({ text: item.action });
            note.style.fontSize = "13px";
            note.style.color = "var(--text-faint)";
            note.style.fontStyle = "italic";
            const checkbox = row.createEl("input", { type: "checkbox" });
            checkbox.checked = item.selected;
            checkbox.disabled = true;
            checkbox.title = "This item is deny-listed";
          });
        }
        if (this.plugin.settings.reparseGamesets) {
          this.contentEl.createDiv({ cls: "mod-aux-text" }).setText("\u{1F504} Refreshing Gameset Data");
        }
        const buttonRow = this.contentEl.createEl("div");
        Object.assign(buttonRow.style, {
          display: "flex",
          justifyContent: "flex-end",
          gap: "0.5em",
          marginTop: "1.5em"
        });
        const cancelBtn = buttonRow.createEl("button", { text: "Cancel" });
        cancelBtn.onclick = () => this.close();
        const confirmBtn = buttonRow.createEl("button", {
          text: "Confirm and Update",
          cls: "mod-cta"
        });
        confirmBtn.onclick = async () => {
          this.close();
          await this.plugin.performForceUpdateWithSelection([...this.normal, ...this.denied]);
        };
      }
      onClose() {
        this.contentEl.empty();
      }
    }(this.app, normalItems, denyItems);
    modal.plugin = this;
    modal.open();
  }
  async updateEntryFromManifest(entry, force = false) {
    const custom = this.settings.customPaths.find((c) => c.manifestKey === entry.key);
    if (custom?.doUpdate === false) {
      console.log(`\u23ED\uFE0F Skipping ${entry.key} (${entry.displayName}) \u2014 blacklisted`);
      return;
    }
    const finalVaultPath = custom?.vaultPath ?? this.resolveVaultPath(entry.path);
    if (!force && await this.fileCacheManager.isUpToDate(finalVaultPath)) {
      console.log(`\u2714\uFE0F Already up to date: ${entry.displayName}`);
      return;
    }
    const url = `https://raw.githubusercontent.com/slamwise0001/vvunderlore-toolkit-full/main/${entry.path}`;
    try {
      const res = await fetch(url);
      const text = await res.text();
      await this.app.vault.adapter.write(finalVaultPath, text);
      await this.fileCacheManager.updateCache(finalVaultPath, text, entry.path);
      console.log(`\u2705 Updated ${entry.displayName} \u2192 ${finalVaultPath}`);
    } catch (e) {
      console.error(`\u274C Error updating ${entry.displayName}:`, e);
    }
  }
  async performForceUpdateWithSelection(previewList) {
    if (this.settings.autoBackupBeforeUpdate) {
    }
    this.settings.backupFiles = {};
    await this.saveSettings();
    try {
      const toUpdate = previewList.filter(
        (item) => item.selected && !item.isFolder && !this.settings.customPaths.some(
          (c) => c.vaultPath === item.filePath && c.doUpdate === false
        )
      );
      for (const item of toUpdate) {
        const entry = this.manifestCache.files.find(
          (f) => this.resolveVaultPath(f.path) === item.filePath
        );
        if (!entry) {
          console.warn(`\u26A0\uFE0F Could not match preview item to manifest: ${item.filePath}`);
          continue;
        }
        await this.updateEntryFromManifest(entry, true);
      }
      for (const entry of this.manifestCache.folders) {
        if (!await this.app.vault.adapter.exists(entry.path)) {
          await this.app.vault.createFolder(entry.path);
        }
      }
      await this.updateVersionFile();
      this.settings.installedVersion = this.settings.latestToolkitVersion ?? "unknown";
      this.settings.lastForceUpdate = (/* @__PURE__ */ new Date()).toISOString();
      await this.saveSettings();
      new import_obsidian9.Notice("\u2705 Toolkit force\u2010updated with your selections.");
      if (this.settings.reparseGamesets) {
        new import_obsidian9.Notice("\u{1F504} Refreshing Game Set Data\u2026");
        await this.refreshGameSetData();
      }
      if (this.settingsTab) {
        await this.settingsTab.updateVersionDisplay();
      }
    } catch (err) {
      console.error("\u274C Force update failed. Version not changed.", err);
      new import_obsidian9.Notice("\u274C One or more files failed. Version NOT updated.");
    }
    if (this.settings.highlightEnabled) {
      this.enableHighlight();
    }
  }
  // ─── SINGLE-FILE UPDATE (with GitHub API + raw fallback) ──────────────
  async updateSingleFileFromGitHub({ githubPath, vaultPath }, force = false) {
    if (this.settings.customizeUpdates) {
      vaultPath = this.resolveVaultPath(githubPath);
      const custom = this.settings.customPaths.find((c) => c.manifestKey === githubPath);
      if (custom?.doUpdate === false) {
        return;
      }
    } else {
      vaultPath = githubPath;
    }
    if (!vaultPath) {
      console.error(`\u274C No valid vault path resolved for ${githubPath}`);
      return;
    }
    const oldVault = this.oldPathsByGithub[githubPath];
    if (oldVault && oldVault !== vaultPath) {
      if (await this.app.vault.adapter.exists(vaultPath)) {
        const stray = await this.app.vault.adapter.read(vaultPath);
        await this.backupFile(vaultPath, stray);
        await this.app.vault.adapter.remove(vaultPath);
      }
      const oldFile = this.app.vault.getAbstractFileByPath(oldVault);
      if (oldFile instanceof import_obsidian9.TFile) {
        await this.app.vault.rename(oldFile, vaultPath);
        const newContent = await this.app.vault.adapter.read(vaultPath);
        await this.fileCacheManager.updateCache(vaultPath, newContent, githubPath);
        return;
      }
    }
    const fileExists = await this.app.vault.adapter.exists(vaultPath);
    if (force && fileExists) {
      const current = await this.app.vault.adapter.read(vaultPath);
      await this.backupFile(vaultPath, current);
    }
    if (!force && fileExists && await this.fileCacheManager.isUpToDate(vaultPath)) {
      return;
    }
    const apiUrl = encodeURI(
      `https://api.github.com/repos/slamwise0001/VVunderlore-Toolkit-Full/contents/${githubPath}?ref=main`
    );
    try {
      let res = await fetch(apiUrl);
      if (res.status === 404) {
        const rawUrl = encodeURI(
          `https://raw.githubusercontent.com/slamwise0001/VVunderlore-Toolkit-Full/main/${githubPath}`
        );
        res = await fetch(rawUrl);
        if (!res.ok) throw new Error(`Raw fetch failed: ${res.statusText}`);
        const content2 = await res.text();
        if (fileExists) {
          await this.app.vault.adapter.write(vaultPath, content2);
        } else {
          await this.app.vault.create(vaultPath, content2);
        }
        await this.fileCacheManager.updateCache(vaultPath, content2, githubPath);
        return;
      }
      if (!res.ok) throw new Error(`GitHub API error: ${res.statusText}`);
      const { download_url } = await res.json();
      const content = await (await fetch(download_url)).text();
      if (fileExists) {
        await this.app.vault.adapter.write(vaultPath, content);
      } else {
        await this.app.vault.create(vaultPath, content);
      }
      await this.fileCacheManager.updateCache(vaultPath, content, githubPath);
    } catch (e) {
      console.error(`\u274C Failed to update ${vaultPath}`, e);
    }
  }
  // ─── PREVIEW + REMOTE-BASELINE + DIFF ─────────────────────────────────
  async previewUpdatesModal() {
    const loading = new class extends import_obsidian9.Modal {
      constructor(app) {
        super(app);
      }
      onOpen() {
        this.contentEl.empty();
        this.contentEl.createDiv({
          text: "\u{1F504} Checking for updates\u2026",
          cls: "mod-warning"
        }).addEventListener("click", (e) => e.stopPropagation());
      }
    }(this.app);
    loading.open();
    await this.syncManifest();
    await this.fetchRemoteBaseline();
    const diffs = await this.buildUpdatePreview();
    loading.close();
    const denyListedLines = [];
    const normalLines = [];
    for (const d of diffs) {
      if (d.startsWith("\u274C deny\u2010listed")) {
        denyListedLines.push(d);
      } else {
        normalLines.push(d);
      }
    }
    const modal = new class extends import_obsidian9.Modal {
      constructor(app, normal, denied) {
        super(app);
        this.normal = normal;
        this.denied = denied;
      }
      onOpen() {
        this.contentEl.empty();
        this.titleEl.setText("Update Preview");
        this.contentEl.createEl("p", {
          text: "Only files whose contents differ from GitHub will be updated:"
        });
        if (this.normal.length) {
          const ul = this.contentEl.createEl("ul");
          this.normal.forEach((line) => {
            const li = ul.createEl("li", { text: line });
          });
        } else {
          this.contentEl.createEl("div", {
            text: "\u2705 Everything is already up to date!",
            cls: "mod-info"
          });
        }
        if (this.denied.length) {
          const denyDetails = this.contentEl.createEl("details", { cls: "vk-section" });
          denyDetails.open = false;
          const summary = denyDetails.createEl("summary", { cls: "vk-section-header" });
          Object.assign(summary.style, {
            cursor: "pointer",
            display: "flex",
            color: "var(--text-faint)",
            alignItems: "center",
            gap: "0.5em"
          });
          summary.createEl("span", { text: `Deny\u2010List Files (${this.denied.length})` });
          const toggleIcon = summary.createEl("span", { text: "VV", cls: "vk-toggle-icon" });
          Object.assign(toggleIcon.style, {
            fontWeight: "bold",
            display: "inline-block",
            transition: "transform 0.2s ease",
            transformOrigin: "50% 50%",
            userSelect: "none",
            transform: "rotate(180deg)"
          });
          denyDetails.ontoggle = () => {
            toggleIcon.style.transform = denyDetails.open ? "rotate(0deg)" : "rotate(180deg)";
          };
          const denyBody = denyDetails.createDiv({ cls: "vk-section-body" });
          denyBody.style.paddingLeft = "1em";
          const denyUl = denyBody.createEl("ul");
          this.denied.forEach((line) => {
            const li = denyUl.createEl("li", { text: line });
            li.style.color = "var(--text-faint)";
            li.style.fontStyle = "italic";
          });
        }
        const buttonRow = this.contentEl.createEl("div");
        Object.assign(buttonRow.style, {
          display: "flex",
          justifyContent: "flex-end",
          marginTop: "1.25em"
          // tweak spacing as you like
        });
        const confirmBtn = buttonRow.createEl("button", {
          text: "Confirm & Update",
          cls: "mod-cta"
        });
        confirmBtn.onclick = async () => {
          await this.plugin.updateSelectedToolkitContent();
          this.close();
        };
        const cancelBtn = buttonRow.createEl("button", { text: "Cancel" });
        cancelBtn.onclick = () => this.close();
      }
      onClose() {
        this.contentEl.empty();
      }
    }(this.app, normalLines, denyListedLines);
    modal.plugin = this;
    modal.open();
  }
  async buildUpdatePreview() {
    const changes = [];
    const denyListedFolders = this.settings.customPaths.filter((c) => c.doUpdate === false).map((c) => c.manifestKey);
    for (const f of this.manifestCache.files) {
      if (f.optional) {
        continue;
      }
      const custom = this.settings.customPaths.find((c) => c.manifestKey === f.path);
      const isInDenyFolder = denyListedFolders.some(
        (folder) => f.path.startsWith(folder + "/")
      );
      if (custom?.doUpdate === false || isInDenyFolder) {
        const vp = custom?.vaultPath ?? this.resolveVaultPath(f.path);
        const exists = await this.app.vault.adapter.exists(vp);
        const upToDate = exists && await this.fileCacheManager.isUpToDate(vp);
        if (!exists || !upToDate) {
          changes.push(`\u274C deny\u2010listed \u2013 will not update: ${vp}`);
        }
      }
    }
    if (!this.settings.customizeUpdates) {
      for (const f of this.manifestCache.files) {
        if (f.optional) {
          continue;
        }
        const custom = this.settings.customPaths.find((c) => c.manifestKey === f.path);
        const isInDenyFolder = denyListedFolders.some(
          (folder) => f.path.startsWith(folder + "/")
        );
        if (custom?.doUpdate === false || isInDenyFolder) {
          continue;
        }
        const vp = this.resolveVaultPath(f.path);
        let tag = "";
        if (vp !== f.path) tag = " (remapped)";
        const exists = await this.app.vault.adapter.exists(vp);
        const upToDate = exists && await this.fileCacheManager.isUpToDate(vp);
        if (!exists) {
          changes.push(`\u{1F4C4} New file: ${vp}${tag}`);
        } else if (!upToDate) {
          changes.push(`\u{1F501} Will update: ${vp}${tag}`);
        }
      }
      for (const fld of this.manifestCache.folders) {
        if (fld.optional) {
          continue;
        }
        const isDenyFolder = denyListedFolders.includes(fld.path);
        const exists = await this.app.vault.adapter.exists(fld.path);
        if (!exists && !isDenyFolder) {
          changes.push(`\u{1F4C1} New folder: ${fld.path}`);
        }
      }
      return changes.length ? changes : ["\u2705 Everything is already up to date!"];
    }
    for (const f of this.manifestCache.files) {
      if (f.optional) {
        continue;
      }
      const custom = this.settings.customPaths.find((c) => c.manifestKey === f.path);
      const isInDenyFolder = denyListedFolders.some(
        (folder) => f.path.startsWith(folder + "/")
      );
      if (custom?.doUpdate === false || isInDenyFolder) {
        continue;
      }
      const vp = custom?.vaultPath ?? this.resolveVaultPath(f.path);
      let tag = "";
      if (vp !== f.path) tag = " (remapped)";
      const exists = await this.app.vault.adapter.exists(vp);
      const upToDate = exists && await this.fileCacheManager.isUpToDate(vp);
      if (!exists) {
        changes.push(`\u{1F4C4} New file: ${vp}${tag}`);
      } else if (!upToDate) {
        changes.push(`\u{1F501} Will update: ${vp}${tag}`);
      }
    }
    for (const fld of this.manifestCache.folders) {
      if (fld.optional) {
        continue;
      }
      const isDenyFolder = denyListedFolders.includes(fld.path);
      const exists = await this.app.vault.adapter.exists(fld.path);
      if (!exists && !isDenyFolder) {
        changes.push(`\u{1F4C1} New folder: ${fld.path}`);
      }
    }
    for (const f of this.manifestCache.files) {
      if (f.optional) {
        continue;
      }
      const manifestKey = f.key;
      const manifestPath = f.path;
      const custom = this.settings.customPaths.find((c) => c.manifestKey === manifestKey);
      const prevPath = this.oldPathsByGithub[manifestPath];
      const isInDenyFolder = denyListedFolders.some(
        (folder) => manifestPath.startsWith(folder + "/")
      );
      if (custom?.doUpdate === false || isInDenyFolder) {
        continue;
      }
      if (custom && custom.vaultPath && custom.vaultPath !== manifestPath) {
        continue;
      }
      if (prevPath && prevPath !== manifestPath && (!custom || custom.vaultPath === manifestPath)) {
        changes.push(`\u27A1\uFE0F Moved: ${prevPath} \u2192 ${manifestPath}`);
      }
    }
    return changes.length ? changes : ["\u2705 Everything is already up to date!"];
  }
  // ─── VERSION-CHECK / UPDATE FLOW ─────────────────────────────────────
  async checkForUpdates() {
    const isNewerVersion = (remote, local) => {
      const pa = remote.replace(/^v/, "").split(".").map((n) => parseInt(n, 10) || 0);
      const pb = local.replace(/^v/, "").split(".").map((n) => parseInt(n, 10) || 0);
      for (let i = 0; i < Math.max(pa.length, pb.length); i++) {
        if ((pa[i] || 0) > (pb[i] || 0)) return true;
        if ((pa[i] || 0) < (pb[i] || 0)) return false;
      }
      return false;
    };
    const toolkitPath = ".version.json";
    const toolkitUrl = "https://raw.githubusercontent.com/slamwise0001/vvunderlore-toolkit-full/main/.version.json";
    const pluginUrl = "https://raw.githubusercontent.com/slamwise0001/vvunderlore-toolkit-plugin/main/version.json";
    const changelogUrl = "https://raw.githubusercontent.com/slamwise0001/VVunderlore-Toolkit-Full/main/README.md";
    let localTK = "0.0.0";
    try {
      const content = await this.app.vault.adapter.read(toolkitPath);
      const json = JSON.parse(content);
      localTK = json.version || localTK;
    } catch (err) {
      console.error("\u274C Failed to read local toolkit version:", err);
    }
    let remoteTK = "0.0.0";
    try {
      const res = await fetch(toolkitUrl);
      const data = await res.json();
      remoteTK = data.version || remoteTK;
      this.settings.latestToolkitVersion = remoteTK;
      if (data.defaultPaths) {
        this.settings.latestDefaults = data.defaultPaths;
      }
      this.settings.lastChecked = (/* @__PURE__ */ new Date()).toISOString();
      await this.saveSettings();
    } catch (err) {
      console.error("\u274C Failed to fetch remote toolkit version:", err);
    }
    console.log({ localTK, remoteTK });
    if (isNewerVersion(remoteTK, localTK)) {
      new import_obsidian9.Notice(`\u26A0\uFE0F Toolkit update available! Installed: v${localTK}, Latest: v${remoteTK}`);
      await this.fetchRemoteBaseline();
    } else {
      new import_obsidian9.Notice(`\u2705 Toolkit is up to date (v${localTK})`);
    }
    const localPL = this.manifest.version;
    let remotePL = localPL;
    try {
      const res = await fetch(pluginUrl);
      const data = await res.json();
      remotePL = data.version || remotePL;
    } catch (err) {
      console.error("\u274C Failed to fetch remote plugin version:", err);
    }
    console.log({ localPL, remotePL });
    if (isNewerVersion(remotePL, localPL)) {
      new import_obsidian9.Notice(`\u2699\uFE0F Plugin update available! Installed: v${localPL}, Latest: v${remotePL}`);
    } else {
      new import_obsidian9.Notice(`\u2705 Plugin is up to date (v${localPL})`);
    }
    try {
      const changelogRes = await fetch(changelogUrl);
      this.changelog = await changelogRes.text();
    } catch (err) {
      console.error("\u274C Failed to fetch changelog:", err);
    }
  }
  async loadSettings() {
    const raw = await this.loadData();
    const cleaned = raw ?? {};
    if (cleaned.needsInstall != null) {
      delete cleaned.needsInstall;
    }
    this.settings = Object.assign({}, DEFAULT_SETTINGS, cleaned);
    this.isFirstRun = !await this.app.vault.adapter.exists(".vvunderlore_installed");
    this.fileCacheManager = new ToolkitFileCacheManager(
      this.app.vault,
      cleaned.fileCache ?? {},
      async () => await this.saveSettings()
    );
    await this.saveSettings();
    if (typeof this.settings.rulesetCompendium !== "string") {
      this.settings.rulesetCompendium = "";
    }
    if (!Array.isArray(this.settings.rulesetReference)) {
      this.settings.rulesetReference = [];
    }
  }
  async saveSettings() {
    await this.saveData({
      ...this.settings,
      fileCache: this.fileCacheManager.getCache()
    });
  }
  async getLocalToolkitVersion() {
    try {
      const content = await this.app.vault.adapter.read(".version.json");
      const json = JSON.parse(content);
      return json.version || null;
    } catch (err) {
      console.error("\u274C Failed to read .version.json:", err);
      return null;
    }
  }
  async updateFullToolkitRepo() {
    const excluded = [
      ".obsidian",
      ".gitignore",
      ".gitattributes",
      ".DS_Store",
      "plugins",
      "Compendium",
      "README.md",
      ".version.json",
      ".github"
    ];
    const fetchRepoRoot = async () => {
      const apiUrl = "https://api.github.com/repos/slamwise0001/VVunderlore-Toolkit-Full/contents/";
      const response = await fetch(apiUrl);
      if (!response.ok) throw new Error(`Failed to fetch repo root`);
      return await response.json();
    };
    try {
      const contents = await fetchRepoRoot();
      const filtered = contents.filter(
        (item) => !excluded.some(
          (ex) => item.path === ex || item.path.startsWith(`${ex}/`)
        )
      );
      filtered.sort((a, b) => a.type === b.type ? 0 : a.type === "tree" ? -1 : 1);
      for (const item of filtered) {
        if (item.type === "dir") {
          await this.updateFolderFromGitHub(item.path, item.path);
        }
        if (item.type === "file") {
          const response = await fetch(item.download_url);
          const content = await response.text();
          const filePath = item.path;
          const exists = await this.app.vault.adapter.exists(filePath);
          if (!exists) {
            await this.app.vault.create(filePath, content);
          } else {
            const current = await this.app.vault.adapter.read(filePath);
            if (current !== content) {
              await this.app.vault.adapter.write(filePath, content);
            }
          }
          await this.fileCacheManager.updateCache(filePath, content, item.path, false);
        }
      }
      await this.saveSettings();
      const markerPath = ".vvunderlore_installed";
      if (!await this.app.vault.adapter.exists(markerPath)) {
        await this.app.vault.create(markerPath, "");
      }
      if (this.settings.highlightEnabled) {
        this.enableHighlight();
      }
      new import_obsidian9.Notice("\u2705 VVunderlore Toolkit successfully installed!");
    } catch (err) {
      console.error("\u274C updateFullToolkitRepo() error:", err);
      new import_obsidian9.Notice("\u274C Failed to install toolkit. See console for details.");
    }
  }
  async updateSelectedToolkitContent() {
    if (this.settings.autoBackupBeforeUpdate) {
      const folder = await this.backupManager.backupVaultMirror("pre-update");
      new import_obsidian9.Notice(`Vault mirror backup created at: ${folder}`);
    }
    if (!this.settings.latestDefaults) {
      new import_obsidian9.Notice("\u274C GitHub defaults not loaded yet.");
      return;
    }
    const allManifestFiles = this.manifestCache.files.map((f) => f.path);
    const fileOverrides = Object.fromEntries(
      this.settings.customPaths.map((c) => [c.manifestKey, c])
    );
    try {
      for (const ghPath of allManifestFiles) {
        const override = fileOverrides[ghPath];
        if (override?.doUpdate === false) {
          console.log(`\u23ED\uFE0F Skipping deny-listed: ${ghPath}`);
          continue;
        }
        const vaultPath = this.settings.customizeUpdates ? this.resolveVaultPath(ghPath) : ghPath;
        const entry = this.manifestCache.files.find((f) => f.path === ghPath);
        if (!entry) continue;
        await this.updateEntryFromManifest(entry, false);
      }
      for (const folder of this.manifestCache.folders) {
        if (!await this.app.vault.adapter.exists(folder.path)) {
          await this.app.vault.createFolder(folder.path);
        }
      }
      await this.updateVersionFile();
      this.settings.installedVersion = this.settings.latestToolkitVersion;
      await this.saveSettings();
      new import_obsidian9.Notice("\u2705 Toolkit content updated.");
      if (this.settingsTab) {
        await this.settingsTab.updateVersionDisplay();
      }
    } catch (err) {
      console.error("\u274C Update failed. Version not updated.", err);
      new import_obsidian9.Notice("\u274C Update failed. See console for details. Version file NOT changed.");
    }
    if (this.settings.highlightEnabled) {
      this.enableHighlight();
    }
  }
  async updateFolderFromGitHub(githubFolderPath, vaultFolderPath) {
    const excluded = [
      ".obsidian",
      ".gitignore",
      ".gitattributes",
      ".DS_Store",
      "plugins",
      "Compendium",
      "README.md",
      ".version.json",
      ".github"
    ];
    if (excluded.some((ex) => githubFolderPath === ex || githubFolderPath.startsWith(`${ex}/`))) {
      return;
    }
    const apiUrl = `https://api.github.com/repos/slamwise0001/VVunderlore-Toolkit-Full/contents/${githubFolderPath}`;
    try {
      const response = await fetch(apiUrl);
      if (!response.ok) throw new Error(`Failed to fetch folder: ${githubFolderPath}`);
      const files = await response.json();
      if (!await this.app.vault.adapter.exists(vaultFolderPath)) {
        await this.app.vault.createFolder(vaultFolderPath);
      }
      for (const file of files) {
        if (excluded.some((ex) => file.path === ex || file.path.startsWith(`${ex}/`))) {
          continue;
        }
        const filePath = `${vaultFolderPath}/${file.name}`;
        if (file.type === "file") {
          const fileResponse = await fetch(file.download_url);
          const content = await fileResponse.text();
          const exists = await this.app.vault.adapter.exists(filePath);
          if (exists) {
            const current = await this.app.vault.adapter.read(filePath);
            if (current !== content) {
              await this.backupFile(filePath, current);
            }
          }
          if (!exists) {
            await this.app.vault.create(filePath, content);
          } else {
            if (await this.app.vault.adapter.read(filePath) !== content) {
              await this.app.vault.adapter.write(filePath, content);
            }
          }
          await this.fileCacheManager.updateCache(filePath, content, file.path, false);
        } else if (file.type === "dir") {
          await this.updateFolderFromGitHub(file.path, `${vaultFolderPath}/${file.name}`);
        }
      }
      await this.saveSettings();
      new import_obsidian9.Notice(`\u2705 Folder synced: ${vaultFolderPath}`);
    } catch (error) {
      console.error(`\u274C Failed to sync folder: ${vaultFolderPath}`, error);
      new import_obsidian9.Notice(`\u274C Failed to update folder: ${vaultFolderPath}`);
    }
  }
  async rebuildFileCache() {
    const cache = this.fileCacheManager;
    const tasks = [];
    for (const entry of this.manifestCache.files) {
      const vaultPath = this.resolveVaultPath(entry.path);
      if (await this.app.vault.adapter.exists(vaultPath)) {
        tasks.push((async () => {
          const content = await this.app.vault.adapter.read(vaultPath);
          await cache.updateCache(vaultPath, content, entry.path, false);
        })());
      }
    }
    for (const folderEntry of this.manifestCache.folders) {
      const folderPath = folderEntry.path;
      const folder = this.app.vault.getAbstractFileByPath(folderPath);
      if (folder instanceof import_obsidian9.TFolder) {
        import_obsidian9.Vault.recurseChildren(folder, (file) => {
          if (file instanceof import_obsidian9.TFile && file.extension === "md") {
            const filePath = file.path;
            tasks.push((async () => {
              const content = await this.app.vault.adapter.read(filePath);
              await cache.updateCache(filePath, content, filePath, false);
            })());
          }
        });
      }
    }
    const batchSize = 10;
    for (let i = 0; i < tasks.length; i += batchSize) {
      await Promise.all(tasks.slice(i, i + batchSize));
    }
    await this.saveSettings();
  }
  async showIndexingModal() {
    const modal = new class extends import_obsidian9.Modal {
      constructor(app) {
        super(app);
      }
      onOpen() {
        this.contentEl.addEventListener("click", (e) => e.stopPropagation());
        this.titleEl.setText("\u{1F504} Indexing Toolkit Files...");
        this.contentEl.createEl("p", {
          text: "Indexing and caching your VVunderlore Vault for faster updates and safer syncing."
        });
      }
    }(this.app);
    modal.open();
    await this.rebuildFileCache();
    modal.close();
    new import_obsidian9.Notice("\u2705 VVunderlore caching complete.");
  }
  async updateVersionFile() {
    if (!this.settings.latestToolkitVersion) {
      console.warn("No latest version found; skipping version file update.");
      return;
    }
    const versionPath = ".version.json";
    const content = JSON.stringify({ version: this.settings.latestToolkitVersion }, null, 2);
    const exists = await this.app.vault.adapter.exists(versionPath);
    if (exists) {
      await this.app.vault.adapter.write(versionPath, content);
    } else {
      await this.app.vault.create(versionPath, content);
    }
  }
  /** main.ts **/
  /** 
   * Install the selected compendium and zero or more reference editions.
   */
  async installFullToolkit(opts = { compendium: "", references: [] }) {
    const { compendium, references } = opts;
    if (!compendium) {
      throw new Error("No compendium edition selected");
    }
    const placeholder = new InstallingModal2(this.app);
    placeholder.open();
    let installSucceeded = false;
    try {
      const treeApi = "https://api.github.com/repos/slamwise0001/VVunderlore-Toolkit-Full/git/trees/main?recursive=1";
      const resp = await fetch(treeApi);
      if (!resp.ok) {
        throw new Error(`Failed to list repo tree: ${resp.statusText}`);
      }
      const json = await resp.json();
      const items = Array.isArray(json.tree) ? json.tree : [];
      const staticEntries = items.filter(
        (item) => !this.excludedPaths.some(
          (ex) => item.path === ex || item.path.startsWith(`${ex}/`)
        )
      ).sort((a, b) => a.type === b.type ? 0 : a.type === "tree" ? -1 : 1);
      for (const entry of staticEntries) {
        if (entry.type === "tree") {
          if (!await this.app.vault.adapter.exists(entry.path)) {
            await this.app.vault.createFolder(entry.path);
          }
        } else {
          const rawUrl = `https://raw.githubusercontent.com/slamwise0001/VVunderlore-Toolkit-Full/main/${encodeURIComponent(entry.path)}`;
          const fileResp = await fetch(rawUrl);
          if (!fileResp.ok) continue;
          const text = await fileResp.text();
          if (await this.app.vault.adapter.exists(entry.path)) {
            const old = await this.app.vault.adapter.read(entry.path);
            if (old !== text) {
              await this.app.vault.adapter.write(entry.path, text);
            }
          } else {
            await this.app.vault.create(entry.path, text);
          }
        }
      }
      this.settings.rulesetCompendium = compendium;
      const pickedRefs = references.length > 0 ? references : this.settings.rulesetReference;
      this.settings.rulesetReference = pickedRefs;
      await this.saveSettings();
      const jobs = [
        importRulesetData({ app: this.app, editionKey: compendium, targetPath: "Compendium" }),
        ...pickedRefs.map((refKey) => {
          const displayName = getRulesetDisplayName(refKey);
          return importRulesetData({
            app: this.app,
            editionKey: refKey,
            targetPath: `Resources/Rulesets/${displayName}`
          });
        })
      ];
      await Promise.all(jobs);
      const parseJobs = [
        importRulesetData({
          app: this.app,
          editionKey: compendium,
          targetPath: `Compendium`
        }),
        ...references.map((refKey) => {
          const displayName = getRulesetDisplayName(refKey);
          return importRulesetData({
            app: this.app,
            editionKey: refKey,
            targetPath: `Resources/Rulesets/${displayName}`
          });
        })
      ];
      await Promise.all(parseJobs);
      const marker = ".vvunderlore_installed";
      if (!await this.app.vault.adapter.exists(marker)) {
        await this.app.vault.create(marker, "");
      }
      this.settings.highlightEnabled = true;
      await this.saveSettings();
      this.enableHighlight();
      installSucceeded = true;
    } catch (err) {
      console.error("\u274C installFullToolkit()", err);
    } finally {
      placeholder.close();
      if (this.settingsTab) this.settingsTab.display();
      new import_obsidian9.Notice(
        installSucceeded ? "\u2705 VVunderlore Toolkit successfully installed!" : "\u274C Failed to install toolkit. See console for details."
      );
    }
  }
  // * Re-parse all gameset data (ruleset compendium + reference sets)
  async refreshGameSetData() {
    const { rulesetCompendium, rulesetReference } = this.settings;
    if (!rulesetCompendium && rulesetReference.length === 0) {
      new import_obsidian9.Notice("\u26A0\uFE0F No gameset keys set; nothing to refresh.");
      return;
    }
    const jobs = [];
    if (rulesetCompendium) {
      jobs.push(importRulesetData({
        app: this.app,
        editionKey: rulesetCompendium,
        targetPath: "Compendium"
      }));
    }
    for (const ref of rulesetReference) {
      const displayName = getRulesetDisplayName(ref);
      jobs.push(importRulesetData({
        app: this.app,
        editionKey: ref,
        targetPath: `Resources/Rulesets/${displayName}`
      }));
    }
    await Promise.all(jobs);
    new import_obsidian9.Notice("\u2705 Game Set Data refreshed.");
  }
};
// Annotate the CommonJS export names for ESM import in node:
0 && (module.exports = {
  InstallingModal
});
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsic3JjL21haW4udHMiLCAic3JjL3NldHRpbmdzLnRzIiwgInNyYy9maXJzdGluc3RhbGxjb25maXJtLnRzIiwgInNyYy9lZGl0aW9ucy50cyIsICJzcmMvcGFyc2Vycy81ZS0yMDE0L2luc3RhbGxlci50cyIsICJzcmMvcGFyc2Vycy81ZS0yMDE0L2hlbHBlcnMvc291cmNlTWFwLnRzIiwgInNyYy9wYXJzZXJzLzVlLTIwMTQvaGVscGVycy90YWdSZXBsYWNlci50cyIsICJzcmMvcGFyc2Vycy81ZS0yMDE0L2hlbHBlcnMvbWFya2Rvd25UYWJsZS50cyIsICJzcmMvcGFyc2Vycy81ZS0yMDE0L2hlbHBlcnMvZm9ybWF0RW50cnkudHMiLCAic3JjL3BhcnNlcnMvNWUtMjAxNC9iZXN0aWFyeS50cyIsICJzcmMvcGFyc2Vycy81ZS0yMDE0L2l0ZW1zLnRzIiwgInNyYy9wYXJzZXJzLzVlLTIwMTQvaGVscGVycy9mcm9udG1hdHRlci50cyIsICJzcmMvcGFyc2Vycy81ZS0yMDE0L3NwZWxscy50cyIsICJzcmMvcGFyc2Vycy81ZS0yMDE0L3NwZWNpZXMudHMiLCAic3JjL3BhcnNlcnMvNWUtMjAxNC9jbGFzc2VzLnRzIiwgInNyYy9wYXJzZXJzLzVlLTIwMTQvcnVsZXMudHMiLCAic3JjL3BhcnNlcnMvNWUtMjAxNC9mZWF0cy50cyIsICJzcmMvcGFyc2Vycy81ZS0yMDE0L2JhY2tncm91bmRzLnRzIiwgInNyYy9wYXJzZXJzLzVlLTIwMjUvaW5zdGFsbGVyLnRzIiwgInNyYy9wYXJzZXJzLzVlLTIwMjUvaGVscGVycy9zb3VyY2VNYXAudHMiLCAic3JjL3BhcnNlcnMvNWUtMjAyNS9oZWxwZXJzL3RhZ1JlcGxhY2VyLnRzIiwgInNyYy9wYXJzZXJzLzVlLTIwMjUvaGVscGVycy9tYXJrZG93blRhYmxlLnRzIiwgInNyYy9wYXJzZXJzLzVlLTIwMjUvaGVscGVycy9mb3JtYXRFbnRyeS50cyIsICJzcmMvcGFyc2Vycy81ZS0yMDI1L2Jlc3RpYXJ5LnRzIiwgInNyYy9wYXJzZXJzLzVlLTIwMjUvaXRlbXMudHMiLCAic3JjL3BhcnNlcnMvNWUtMjAyNS9oZWxwZXJzL2Zyb250bWF0dGVyLnRzIiwgInNyYy9wYXJzZXJzLzVlLTIwMjUvc3BlbGxzLnRzIiwgInNyYy9wYXJzZXJzLzVlLTIwMjUvc3BlY2llcy50cyIsICJzcmMvcGFyc2Vycy81ZS0yMDI1L2NsYXNzZXMudHMiLCAic3JjL3BhcnNlcnMvNWUtMjAyNS9ydWxlcy50cyIsICJzcmMvcGFyc2Vycy81ZS0yMDI1L2ZlYXRzLnRzIiwgInNyYy9wYXJzZXJzLzVlLTIwMjUvYmFja2dyb3VuZHMudHMiLCAic3JjL3J1bGVzZXRJbnN0YWxsZXIudHMiLCAic3JjL2N1c3RvbUluc3RhbGxNb2RhbC50cyIsICJzcmMvZmlsZUNhY2hlTWFuYWdlci50cyIsICJzcmMvYmFja3VwL0JhY2t1cE1hbmFnZXIudHMiXSwKICAic291cmNlc0NvbnRlbnQiOiBbImltcG9ydCB7XG4gIEFwcCxcbiAgUGx1Z2luLFxuICBOb3RpY2UsXG4gIE1vZGFsLFxuICBTZXR0aW5nLFxuICBURm9sZGVyLFxuICBURmlsZSxcbiAgVmF1bHRcbn0gZnJvbSAnb2JzaWRpYW4nOyBcbiBcbmltcG9ydCB7IFRvb2xraXRTZXR0aW5nc1RhYiB9IGZyb20gJy4vc2V0dGluZ3MnO1xuaW1wb3J0IHsgVG9vbGtpdEZpbGVDYWNoZU1hbmFnZXIgfSBmcm9tICcuL2ZpbGVDYWNoZU1hbmFnZXInO1xuaW1wb3J0IHR5cGUgeyBUb29sa2l0RmlsZUNhY2hlRW50cnkgfSBmcm9tICcuL2ZpbGVDYWNoZU1hbmFnZXInO1xuaW1wb3J0IHsgQmFja3VwTWFuYWdlciB9IGZyb20gJy4vYmFja3VwL0JhY2t1cE1hbmFnZXInO1xuaW1wb3J0IHsgc2hvd0N1c3RvbUluc3RhbGxNb2RhbCB9IGZyb20gJy4vY3VzdG9tSW5zdGFsbE1vZGFsJztcbmltcG9ydCB7IEFWQUlMQUJMRV9FRElUSU9OUyB9IGZyb20gJy4vZWRpdGlvbnMnO1xuaW1wb3J0IHsgaW1wb3J0UnVsZXNldERhdGEgfSBmcm9tICcuL3J1bGVzZXRJbnN0YWxsZXInO1xuaW1wb3J0IHsgQ29uZmlybUZyZXNoSW5zdGFsbE1vZGFsIH0gZnJvbSAnLi9maXJzdGluc3RhbGxjb25maXJtJztcblxuZnVuY3Rpb24gZ2V0UnVsZXNldERpc3BsYXlOYW1lKGtleTogc3RyaW5nKTogc3RyaW5nIHtcbiBjb25zdCBlZCA9IEFWQUlMQUJMRV9FRElUSU9OUy5maW5kKGUgPT4gZS5pZCA9PT0ga2V5KTtcbiByZXR1cm4gZWQ/LmxhYmVsID8/IGtleTtcbn1cblxuY29uc3QgbG9hZGluZ0ljb24gPSBcbidkYXRhOmltYWdlL3BuZztiYXNlNjQsJyArXG4naVZCT1J3MEtHZ29BQUFBTlNVaEVVZ0FBQU5FQUFBRFJDQVlBQUFCU09sZnZBQUFBQ1hCSVdYTUFBQmNSQUFBWEVRSEtKdk0vQUFBTDVrbEVRVlI0bk8zZFQ2d2RaUm5IOFY5aHlndUZZbHRLU2dYeEZBaG9RcVVVUWlCR3VCZ3hFVEc2cVVGY3RCcE4zTmJFdURDUjI4VDRKeTVBalFrTEUwdDBvU1pHZE9YQzJJTktNQnJOM1lBTEd6a1FJRXFVWHJGQ1g1d1dGMmRNak03em5ONzNtWmw3enUzM2s1ek5QSmwzM252UC9mVk1udlAyblUzQy82bFNPaVRwWU1mREhxNXpYdWw0VE15QmFyMG5NS2RHa3BZNkhuTmJ4K05oVHB5MzNoTUFGaDBoQW9JSUVSQkVpSUFnUWdRRTBaMWJ1Nk9TSGpWcUJ5VWRNbW9QVlNtdDlqR2hOblhPZHc5MXJYTWRJVnE3Wit1Y3gyMkZLcVVsNTd4OXZjd0c2NDdiT1NDSUVBRkJoQWdJSWtSQUVDRUNndWpPRGVld3BKSlYzTGRJMm03VURraTZxcTFRcFhTczRGcTB4Z3NRb3VHc1dLMXhUNVZTSldtWFVmNkhwTk5HYldtdDEwSVpidWVBSUVJRUJCRWlJSWdRQVVHRUNBaWlPOWVoT3VkbFNjc2REL3M1bFhYYXJKWG1rdlFIcTFDbDlFYkJ0Y2JuY211Y1R5SWdpQkFCUVlRSUNDSkVRQkFoQW9JSUVSQzBhYjBuc0dpcWxKWWxQZGp4c1BkSWV0eW8xWFhPclczblpxWDJrbkhlVzV6cmZkT3B2ZE9wUFd3YzN5UHA0MFp0dzdlLytTUUNnZ2dSRUVTSWdDQkNCQVFSSWlDSUVBRkJHN3JGM1d6clc3Umh4eHk1dTJSdkJrK1YwblZXcmM3NXVIUGVBYXNrYVl0UnUwSFNaNHphaG1oLzgwa0VCQkVpSUlnUUFVR0VDQWdpUkVEUVF1eXhVS1cwVFdVUHlScEpHbmM2bVg0Nm1qZEoybWJVOWxVcFdlZXQxRG1YUEgzdnRZSnpwT21PcTIwdWtuU1pVWHRWOW5zd2NSNk10bHJuWExMdDh1QVdvc1VkYUZWMzNrS3RVanBQOXUvTiszMmVrV1J0QW5KTTBsMEYwK204L2UycFVob1pwZDJTN2pOcXo5UTVmOHNZYjBuMis3b3c3Vzl1NTRBZ1FnUUVFU0lnaUJBQlFZUUlDSnFiRnZlTU52WklaYTFxczBYYWRKcEdCV051a3QrRnMycG5uSFBlNU5SV0pGbHQ3SkwydHFxVTN1YVVUem0xUzR6am01MjVuSFRHVzFWWiszdFM1enh4eGgzVTNMUzRoMjUzOXJUaFNCLzZXTVg5YmFmOG5GUDduWEg4aktUWGpkcUpPdWZmbnRYRS9zdU12NGNqemI3bmM0SGJPU0NJRUFGQmhBZ0lJa1JBRUNFQ2dnWnZjVHR0eTVIc2RxZlhxaTVkNFMzbmVwNlJ5bHJqSHErTm5hcVVyalpxSnlYVmJZVTY1MWVjNjNudis4aXBXVnNkbjlaMHRYWWJieDRlci8zdC9SME4zdjRldk1YdFBNNndxSTBkV09GZDFDYnRxVFZ1dHJHcmxENHF5UXFSR2I0NjV5ZXRpMVVwUGViTTVZTk9iV1FjUDFYbi9CZm52RTdOZUE4R2IzOXpPd2NFRVNJZ2lCQUJRWVFJQ0NKRVFGQXZMVzZuL1NoMTM4WWVPV042SmdYbi9PYzg2M29qMlIyczB0WFl1eVZkWTlUT3lGZ2xYU1Y3ZHhOSk81M2FFMDd0ZHVQNFM1SUc2ODdObTc2K0p6SmJ6blhPSlczMWZjNllnMjVvVWVkOFZOTFJ0dHFNMXV2aHd0WFk3NWY5U01rK1dMdjJTTkxmak9OakxmNmU1OFc0blFPQ0NCRVFSSWlBSUVJRUJCRWlJS2lYQmFqT0lsT3pPMWVsdEZYVHA2cTF1VVhTSTBadGJyYWJiVnI3MWx6TTM4bFpzTjZueUppV3J6aTF6eGFNTjJrNm1tdlN0T2d2TjhyN205ZGFqZnZZZG5sdWR2dVJ0RlhTclVidCtpRW5FdkM0cEY4WXRaK3JiTC90ZDh2K0x3aHYxRG4zRVNUTGN0dkJXWnZNeVBoS1lJWWs2U3FqOXZzNjU1OFljMW1XdjhwK1hEQVhGN2R6UUJBaEFvSUlFUkJFaUlBZ1FnUUVGWGZubWk2STVZaHpudFd1dlV6MjA5Wk9TdnFTVVh2R21jZDZzTHBsUjFXKzJ0d2FjOGpPbkdjaS96MWZ0czV6MnQ5WjB2Tkc3WklxSmF1VHU5dWFSMStLdnljcStTNm9PYytxTFduYUJtN3pLMG4zR3JYVGRjN1dUak5ZWjMzc3NkNEU2QmFqZkovc2Y0eDcyY1NFMnprZ2lCQUJRWVFJQ0NKRVFCQWhBb0xXWXdIcWtuSGMyMC9iZXhLYjl4aEhiRXd2U3pwdTFDYVNYakJxKzUxMis5SFNQYnpuS1VRajU1d3pkYzY1KzZsZ1FiMnM2U2I2Ylo2Vi9mM1Nma2tmTUdwakZlNEF4ZTBjRUVTSWdDQkNCQVFSSWlDSUVBRkJibmN1c0ZMN1J1YzhhNStCVldmTWlUTWV6ajJubk5yVGtuNW0xTzZVZEdYWGs1blY0alkzZkppeFV2dCtaMHdyUk9PaEh4T0l4VlRuZkVwR2tLcVVucGI5L05pckpMMnI2L2x3T3djRUVTSWdpQkFCUVlRSUNDSkVRRkJmQzFDdFBiVng3bG1SdlQvNXFFckoybjlocGM3NWNGdWhTdW1RcElQR2VSYzJyelpYV0pPTTZDdEVXM3NhRnd1bXpubFZ4aTVIelNZbVN3WERqZ3JQNndXM2MwQVFJUUtDQ0JFUVJJaUFJRUlFQlBYVm5idXpwM0VCeWQvWC9LYm0xV2FmcEp1TjJrTlZTcXRHN1hDZDg0bzFtYjVDdExPbmNRRTF1L0pNMm1yTkh2R1hHcWVPbkdHOTNhYTJlZlBoZGc0SUlrUkFFQ0VDZ2dnUkVFU0lnS0MrdW5NbmV4b1htT1dNN0MyRy8rU2NkN05tZE9Fc2ZZV283bWxjNEd4WWowTDlwNlNYakpyMXdJU1p1SjBEZ2dnUkVFU0lnQ0JDQkFRUklpQ29yKzZjdFkwcjBMZjlrajVwMURaTHVzQ29iUys5WUY4aHN2cjBRTisyUzlvejVBVzVuUU9DQ0JFUVJJaUFJRUlFQkJFaUlLaXY3dHdQblJxYm1LQlBYNWYwSGFOMnVlejlQNzRvYVcvSkJma2tBb0lJRVJCRWlJQWdRZ1FFRVNJZ2lCQUJRWDIxdUgvazFMNWdITCt0MlFLMnpiak8yWHBrSWVaWTh6UTg2NUdTNHpyblRSMWZjcXVrSzQzYXh5UWQ2dmg2ZkJJQlVZUUlDQ0pFUUJBaEFvSUlFUkJFaUlBZ3Q4WHR0UitkZHZTczgzNWdsSFpMdXRlb1hWQ2x0TXVvdlY3bmZNSzZIamFlS3FWbFNROTJQT3pkZGM3amtoUDVKQUtDQ0JFUVJJaUFJRUlFQkJFaUlJZ1FBVUY5cmVJMjFUbC9vblVpS1YwdDZRSGp0R3NrL2Rtb2pTV3h3bnNkOWJGU3UwcEprcXp6bnBMMGZhTzJVOUpsUnUySzV0VXBQb21BSUVJRUJCRWlJSWdRQVVHRUNBaUtkT2ZHNXFEVGJrMHJaNUZmbHZTY1VmdVhjNzJKYzczVk91Y1ZheTVZRytmM1BKTDkvcFQrL2krUXRNT29iWk4wa1ZIYkl1a1NaOHpPZGIxSmhLVHlGZDZGMTFxUzMxNmwvZDJSSVRlU2FWYnQzMk9VNzVCMHUxSGIzYnpXaWxYY3dIb2hSRUFRSVFLQ0NCRVFSSWlBb0w0V29QN1N2R0QzN2VoVmxiVy9QWk02NTBuQmVRdHZ4dTlyYkJ3MzM3Y3FwVzJTOWhWTVpidWt0eHUxM1pJdU5tcWJuVEVuemF2TjZsbk5xa1ZmTFc3ckI1U2trOGJ4UHRxa1M3TGIzNTRqZGM3TFhjNWxVWFQ5OVVUZ1BmQ2NsbFJibDVSMHZsSHI1WDNsZGc0SUlrUkFFQ0VDZ2dnUkVFU0lnS0MrV3R5bm5kcllPTzYxbzErVjlMeFJlNzNPK2E5R3pXdC91eGFoTlY2bHRFL1RGYzFkR25jODNpblpxL1BQMTNUVmRadEswNmZlV2F3UGdCY2t2V2pVckwraGtGNWEzQ1ZtdEVML0tPa2hvL1ppbmZPUE81N0xzc3IyZWg2ME5WNmxkRXpTVXBkajlyREtmbytrMXMxcE5BM0pEVVp0aDZSYkN5NzVOVWtQRzdYVk91Zmk3NE1zM000QlFZUUlDQ0pFUUJBaEFvSUlFUkEwK0RiQ2psY2svZHFwWFcvVWRsUXAvYjNnZWw0N2VxSmhXK09sSnVxK0pXMHEvTmwyeWQ2NjkyTFptNUY0N2UySjdOWFl4elZ0cTdleEZxMkd6Rk9MKzBKTmYrRnRicGYwdlk0djJYazd1cWZISUhxS045Y280YTN3ZG1SSjF2ZDRTZE85czlkcXJsYlpjenNIQkJFaUlJZ1FBVUdFQ0FnaVJFRFFQTFc0YTBsV3Evb3BTVWVNMmxzbEhUSnFMMHY2alZXclVyTGE1bnViVjV1eDB4R3pqdmRsVW5KUzAwVnNOYVByOVYzanVMZmxieVhwVXFObTdZVWdUWCsyUjQzYTJEbHZjSFBUNGk0MVkvWDNjVW5mTUdvbm1sZWJCeVI5eEtqTlZYdTFST2xtSkZWSzd6Vks3NUQwMWVpOC9zZkM3S1BPN1J3UVJJaUFJRUlFQkJFaUlJZ1FBVUh6MU9JdU5aSGQvdDRxNlgxRzdUWFpxMzF2TEpsSWxkSU8yYXVTNzVHOXdQWm95UVluVlVxSE5IM1VZNXRIMWpwZU0rYXlVN2E2ZXRZY1pwbklibU5QQ3NjYzNNS0hxUG5qVzI2ck5lM3ZUdzg0blIyU3JqVnFuOUswRmR4bXJMSS9tb095TnlwNXJHQTh5VitGL2xQanVQVVB4eXlUUmYrNlFPSjJEZ2dqUkVBUUlRS0NDQkVRUklpQW9JWHZ6czB3a2QzK2x1d0Z1SGMxcjlhYTB3YjI5aUN3VmpKTDBwWXFKYXYrSHRtdDhUYzdZM3A3ZEh2N1ZkenYxSzR6amwva25EUFJCbWhqZXhaK0ZYZXBLcVZOc24vK0J5Vjl2bURZNDgycnpXMnlXOEVmbHZTa1VmdXk3UCtXY2Ezc1o1ZCt5RGd1K1dIdmRGOXpMZEJxN0ZMY3pnRkJoQWdJSWtSQUVDRUNnZ2dSRUxUUlc5eXpXRjJxWTA3TnMxZjJJbE92RFh4QTBoM09tRmFMZTdNenB0ZXFMdVY5WFdDWmREMkplWFBPdHJqN3NBNTdjUStxNjBkUmJoVGN6Z0ZCaEFnSUlrUkFFQ0VDZ2dnUkVIU3V0N2k3Tmw3dkNXQjQvd1lSQmJuMTk4L3JwQUFBQUFCSlJVNUVya0pnZ2c9PSdcbiBcbmNsYXNzIEluc3RhbGxpbmdNb2RhbCBleHRlbmRzIE1vZGFsIHtcbiAgY29uc3RydWN0b3IoYXBwOiBBcHApIHsgc3VwZXIoYXBwKTsgfVxuICBvbk9wZW4oKSB7XG4gICAgdGhpcy5jb250ZW50RWwuZW1wdHkoKTtcbiAgICBjb25zdCBpbWcgPSB0aGlzLmNvbnRlbnRFbC5jcmVhdGVFbCgnaW1nJywge1xuICAgICAgYXR0cjogeyBzcmM6IGxvYWRpbmdJY29uLCBhbHQ6ICdJbnN0YWxsaW5nXHUyMDI2JyB9LFxuICAgIH0pO1xuICAgIE9iamVjdC5hc3NpZ24oaW1nLnN0eWxlLCB7XG4gICAgICBkaXNwbGF5OiAnYmxvY2snLFxuICAgICAgbWFyZ2luOiAnMWVtIGF1dG8gMC41ZW0nLFxuICAgICAgd2lkdGg6ICcxMDBweCcsXG4gICAgICBoZWlnaHQ6ICcxMDBweCcsXG4gICAgfSk7XG4gICAgaW1nLmFuaW1hdGUoXG4gICAgICBbXG4gICAgICAgIHsgdHJhbnNmb3JtOiAncm90YXRlKDBkZWcpJyB9LFxuICAgICAgICB7IHRyYW5zZm9ybTogJ3JvdGF0ZSgtMzYwZGVnKScgfVxuICAgICAgXSxcbiAgICAgIHtcbiAgICAgICAgZHVyYXRpb246IDE1MDAsICAgICAgLy8gb25lIGFuZCBhIGhhbGYgc2Vjb25kcyBwZXIgcmV2b2x1dGlvblxuICAgICAgICBpdGVyYXRpb25zOiBJbmZpbml0eSxcbiAgICAgICAgZWFzaW5nOiAnbGluZWFyJ1xuICAgICAgfVxuICAgICk7XG4gICAgY29uc3QgdHh0ID0gdGhpcy5jb250ZW50RWwuY3JlYXRlRGl2KHsgdGV4dDogJ0luc3RhbGxpbmdcdTIwMjYnLCBjbHM6ICdtb2QtcXVpZXQnIH0pO1xuICAgIHR4dC5zdHlsZS5jc3NUZXh0ID1cbiAgICAgICdmb250LXN0eWxlOiBpdGFsaWM7IGNvbG9yOiB2YXIoLS10ZXh0LW11dGVkKTsgdGV4dC1hbGlnbjogY2VudGVyOyBwYWRkaW5nOiAxZW07JztcbiAgfVxuICBvbkNsb3NlKCkge1xuICAgIHRoaXMuY29udGVudEVsLmVtcHR5KCk7XG4gIH0gXG59XG5cblxuaW50ZXJmYWNlIFByZXZpZXdJdGVtIHtcbiAgZmlsZVBhdGg6IHN0cmluZztcbiAgYWN0aW9uOiBzdHJpbmc7XG4gIHNlbGVjdGVkOiBib29sZWFuOyBcbiAgaXNGb2xkZXI/OiBib29sZWFuO1xufVxuXG5pbnRlcmZhY2UgVG9vbGtpdFNldHRpbmdzIHtcbiAgaW5zdGFsbGVkVmVyc2lvbjogc3RyaW5nO1xuICBsYXRlc3RUb29sa2l0VmVyc2lvbj86IHN0cmluZztcbiAgY3VzdG9taXplVXBkYXRlczogYm9vbGVhbjtcbiAgdXBkYXRlVGFyZ2V0czoge1xuICAgIHRvb2xzOiBib29sZWFuO1xuICAgIHRvb2xzUGF0aD86IHN0cmluZztcbiAgICB0ZW1wbGF0ZXM6IGJvb2xlYW47XG4gICAgdGVtcGxhdGVzUGF0aD86IHN0cmluZztcbiAgICBvbW5pbm9taWNvbjogYm9vbGVhbjtcbiAgICBvbW5pbm9taWNvblBhdGg/OiBzdHJpbmc7XG4gICAgc3BlbGxib29rOiBib29sZWFuO1xuICAgIHNwZWxsYm9va1BhdGg6IHN0cmluZztcbiAgfTtcbiAgbGF0ZXN0RGVmYXVsdHM/OiB7XG4gICAgdG9vbHM/OiBzdHJpbmc7XG4gICAgdGVtcGxhdGVzPzogc3RyaW5nO1xuICAgIG9tbmlub21pY29uPzogc3RyaW5nO1xuICAgIHNwZWxsYm9vaz86IHN0cmluZztcbiAgfTtcbiAgbGFzdENoZWNrZWQ/OiBzdHJpbmc7XG4gIGxhc3RGb3JjZVVwZGF0ZT86IHN0cmluZztcbiAgZmlsZUNhY2hlPzogUmVjb3JkPHN0cmluZywgVG9vbGtpdEZpbGVDYWNoZUVudHJ5PjtcbiAgcGF0aE92ZXJyaWRlcz86IFJlY29yZDxzdHJpbmcsIHN0cmluZz47XG4gIGJhY2t1cEZpbGVzPzogUmVjb3JkPHN0cmluZywgc3RyaW5nPjtcbiAgYmFja3VwUGF0aD86IHN0cmluZztcbiAgYXV0b0JhY2t1cD86IGJvb2xlYW47XG4gIGxhc3RCYWNrdXBUaW1lPzogc3RyaW5nO1xuICBiYWNrdXBFcnJvcj86IHN0cmluZztcbiAgY3VzdG9tUGF0aHM6IEN1c3RvbVBhdGhFbnRyeVtdO1xuICBhdXRvQmFja3VwQmVmb3JlVXBkYXRlOiBib29sZWFuO1xuICBoaWdobGlnaHRFbmFibGVkOiBib29sZWFuO1xuICBoaWdobGlnaHRDb2xvckxpZ2h0OiBzdHJpbmc7XG4gIGhpZ2hsaWdodENvbG9yRGFyazogc3RyaW5nO1xuICBydWxlc2V0Q29tcGVuZGl1bTogc3RyaW5nO1xuICBydWxlc2V0UmVmZXJlbmNlOiBzdHJpbmdbXTtcbiAgcmVwYXJzZUdhbWVzZXRzOiBib29sZWFuO1xufVxuXG5jb25zdCBERUZBVUxUX1NFVFRJTkdTOiBUb29sa2l0U2V0dGluZ3MgPSB7XG4gIGluc3RhbGxlZFZlcnNpb246ICcxLjAuMCcsXG4gIGN1c3RvbWl6ZVVwZGF0ZXM6IGZhbHNlLFxuICB1cGRhdGVUYXJnZXRzOiB7XG4gICAgdG9vbHM6IHRydWUsXG4gICAgdG9vbHNQYXRoOiAnVG9vbHMnLFxuICAgIHRlbXBsYXRlczogdHJ1ZSxcbiAgICB0ZW1wbGF0ZXNQYXRoOiAnRXh0cmFzL1RlbXBsYXRlcycsXG4gICAgb21uaW5vbWljb246IHRydWUsXG4gICAgb21uaW5vbWljb25QYXRoOiAnQWR2ZW50dXJlcy9PbW5pbm9taWNvbi5tZCcsXG4gICAgc3BlbGxib29rOiB0cnVlLFxuICAgIHNwZWxsYm9va1BhdGg6ICdDb21wZW5kaXVtL1NwZWxscy9fU3BlbGxib29rLm1kJyxcbiAgfSxcbiAgbGF0ZXN0RGVmYXVsdHM6IHVuZGVmaW5lZCxcbiAgcGF0aE92ZXJyaWRlczoge30sXG4gIGJhY2t1cEZpbGVzOiB7fSxcbiAgYmFja3VwUGF0aDogJycsXG4gIGF1dG9CYWNrdXA6IGZhbHNlLFxuICBsYXN0QmFja3VwVGltZTogJycsXG4gIGJhY2t1cEVycm9yOiAnJyxcbiAgY3VzdG9tUGF0aHM6IFtdLFxuICBhdXRvQmFja3VwQmVmb3JlVXBkYXRlOiB0cnVlLFxuICBoaWdobGlnaHRFbmFibGVkOiBmYWxzZSxcbiAgaGlnaGxpZ2h0Q29sb3JMaWdodDogJ3JnYigxMDcsIDE0NiwgMTIwKScsXG4gIGhpZ2hsaWdodENvbG9yRGFyazogJ3JnYiggNTAsICA3MCwgIDUwKScsXG4gIHJ1bGVzZXRDb21wZW5kaXVtOiBcIlwiLFxuICBydWxlc2V0UmVmZXJlbmNlOiBbXSxcbiAgcmVwYXJzZUdhbWVzZXRzOiB0cnVlLFxufTtcblxuaW50ZXJmYWNlIEN1c3RvbVBhdGhFbnRyeSB7XG4gIHZhdWx0UGF0aDogc3RyaW5nO1xuICBtYW5pZmVzdEtleTogc3RyaW5nO1xuICBkb1VwZGF0ZTogYm9vbGVhbjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBNYW5pZmVzdEZpbGVFbnRyeSB7XG4gIHBhdGg6IHN0cmluZztcbiAga2V5OiBzdHJpbmc7XG4gIGN1c3RvbU92ZXJyaWRlPzogYm9vbGVhbjtcbiAgZGlzcGxheU5hbWU/OiBzdHJpbmc7XG4gIG9wdGlvbmFsPzogYm9vbGVhbjsgLy8gXHUyMTkwIG1hcmsgb3B0aW9uYWwgZmlsZXMvZm9sZGVycyBpZiB5b3Ugd2lzaFxufVxuXG5leHBvcnQgaW50ZXJmYWNlIEluc3RhbGxPcHRpb25zIHtcblx0Y29tcGVuZGl1bTogc3RyaW5nO1xuXHRyZWZlcmVuY2VzOiBzdHJpbmdbXTtcbiAgfVxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBWVnVuZGVybG9yZVRvb2xraXRQbHVnaW4gZXh0ZW5kcyBQbHVnaW4ge1xuICByZXF1aXJlc0dyYXBoOiBNYXA8c3RyaW5nLCBzdHJpbmdbXT47XG4gIHB1YmxpYyBzZXR0aW5nc1RhYjogVG9vbGtpdFNldHRpbmdzVGFiO1xuICBzZXR0aW5nczogVG9vbGtpdFNldHRpbmdzO1xuICBmaWxlQ2FjaGVNYW5hZ2VyOiBUb29sa2l0RmlsZUNhY2hlTWFuYWdlcjtcbiAgbWFuaWZlc3RDYWNoZToge1xuICAgIGZpbGVzOiBNYW5pZmVzdEZpbGVFbnRyeVtdO1xuICAgIGZvbGRlcnM6IE1hbmlmZXN0RmlsZUVudHJ5W107XG4gIH0gPSB7IGZpbGVzOiBbXSwgZm9sZGVyczogW10gfTtcbiAgY2hhbmdlbG9nOiBzdHJpbmcgPSAnJztcbiAgcHJpdmF0ZSBhdXRvQ2hlY2tJbnRlcnZhbDogbnVtYmVyIHwgbnVsbCA9IG51bGw7XG4gIHByaXZhdGUgb2xkUGF0aHNCeUdpdGh1YjogUmVjb3JkPHN0cmluZywgc3RyaW5nPiA9IHt9O1xuICBwcml2YXRlIHN0eWxlRWw6IEhUTUxTdHlsZUVsZW1lbnQgfCBudWxsID0gbnVsbDtcblxuICBiYWNrdXBNYW5hZ2VyOiBCYWNrdXBNYW5hZ2VyO1xuICBleGNsdWRlZFBhdGhzID0gW1xuICAgICcuRFNfU3RvcmUnLFxuICAgICcuZ2l0aWdub3JlJyxcbiAgICAnLmdpdGF0dHJpYnV0ZXMnLFxuICAgICcuZ2l0aHViJyxcbiAgICAnUkVBRE1FLm1kJyxcbiAgICAnQ29tcGVuZGl1bSdcbiAgXTtcblxuICBwcml2YXRlIGlzRmlyc3RSdW46IGJvb2xlYW4gPSBmYWxzZTtcblxuICBwdWJsaWMgcGVuZGluZ1J1bGVzZXRLZXk6IHN0cmluZyA9ICcnO1xuICBwdWJsaWMgcGVuZGluZ1JlZmVyZW5jZUtleXM6IHN0cmluZ1tdID0gW107XG4gIFxuICAvLyBcdTI1MDBcdTI1MDBcdTI1MDAgSEVMUEVSUyBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcblxuICAvKiogR2l2ZW4gYSBHaXRIdWIgcGF0aCwgcmV0dXJuIHRoZSBvdmVycmlkZGVuIHZhdWx0IHBhdGggb3IgdGhlIG9yaWdpbmFsLiAqL1xuICByZXNvbHZlVmF1bHRQYXRoKGdpdGh1YlBhdGg6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgY29uc3QgY3VzdG9tID0gdGhpcy5zZXR0aW5ncy5jdXN0b21QYXRocy5maW5kKFxuICAgICAgKGMpID0+XG4gICAgICAgIGMubWFuaWZlc3RLZXkgPT09IGdpdGh1YlBhdGggfHxcbiAgICAgICAgYy5tYW5pZmVzdEtleSA9PT0gdGhpcy5rZXlGb3IoZ2l0aHViUGF0aClcbiAgICApO1xuICAgIHJldHVybiBjdXN0b20/LnZhdWx0UGF0aCA/PyBnaXRodWJQYXRoO1xuICB9XG5cbiAgXG5cbiAgLyoqIENvbnZlcnQgXHUyMDFDc29tZS9mb2xkZXIvZmlsZS5tZFx1MjAxRCBcdTIxOTIgXHUyMDFDc29tZS1mb2xkZXItZmlsZVx1MjAxRCAobG93ZXJjYXNlZCwgbm8gZXh0ZW5zaW9uKS4gKi9cbiAga2V5Rm9yKHBhdGg6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgcmV0dXJuIHBhdGhcbiAgICAgIC5yZXBsYWNlKC9bL1xcXFxdL2csICctJylcbiAgICAgIC5yZXBsYWNlKC9cXC5bXi5dKyQvLCAnJylcbiAgICAgIC50b0xvd2VyQ2FzZSgpO1xuICB9XG5cbiAgaXNFeGNsdWRlZChwYXRoOiBzdHJpbmcpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5leGNsdWRlZFBhdGhzLnNvbWUoXG4gICAgICAoZXgpID0+XG4gICAgICAgIHBhdGggPT09IGV4IHx8XG4gICAgICAgIHBhdGguc3RhcnRzV2l0aChgJHtleH0vYCkgfHxcbiAgICAgICAgcGF0aC5pbmNsdWRlcyhgLyR7ZXh9L2ApIHx8XG4gICAgICAgIHBhdGguZW5kc1dpdGgoYC8ke2V4fWApIHx8XG4gICAgICAgIHBhdGguaW5jbHVkZXMoYC8ke2V4fWApXG4gICAgKTtcbiAgfVxuICBcbiAgLy8gXHUyNTAwXHUyNTAwXHUyNTAwIENVU1RPTSBJTlNUQUxMIExPR0lDIFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFxuXG4gIHB1YmxpYyBhc3luYyBwZXJmb3JtQ3VzdG9tSW5zdGFsbChcbiAgICB0b0luc3RhbGw6IHsgcGF0aDogc3RyaW5nOyBpc0ZvbGRlcjogYm9vbGVhbiB9W11cbiAgKTogUHJvbWlzZTx2b2lkPiB7XG5cdFx0XG5cdC8vIG9wdGlvbmFsIGJhY2t1cCAvL1xuXHRjb25zdCBhbGxGaWxlcyA9IHRoaXMuYXBwLnZhdWx0LmdldEFsbExvYWRlZEZpbGVzKClcblx0LmZpbHRlcigoZik6IGYgaXMgVEZpbGUgPT4gZiBpbnN0YW5jZW9mIFRGaWxlKVxuXHQubWFwKChmKSA9PiBmLnBhdGgpO1xuXHRjb25zdCBub25NYXJrZXJGaWxlcyA9IGFsbEZpbGVzLmZpbHRlcigocCkgPT4gcCAhPT0gJy52dnVuZGVybG9yZV9pbnN0YWxsZWQnKTtcblxuXHRpZiAobm9uTWFya2VyRmlsZXMubGVuZ3RoID4gMCAmJiB0aGlzLnNldHRpbmdzLmF1dG9CYWNrdXBCZWZvcmVVcGRhdGUpIHtcblx0Y29uc3QgZm9sZGVyID0gYXdhaXQgdGhpcy5iYWNrdXBNYW5hZ2VyLmJhY2t1cFZhdWx0TWlycm9yKCdwcmUtY3VzdG9tLWluc3RhbGwnKTtcblx0bmV3IE5vdGljZShgQmFja3VwIGJlZm9yZSBjdXN0b21cdTIwMTBpbnN0YWxsIGNyZWF0ZWQgYXQ6ICR7Zm9sZGVyfWApO1xuXHR9XG4gICAgLy8gMikgTG9vcCBvdmVyIGVhY2ggc2VsZWN0ZWQgcGF0aFxuICAgIGZvciAoY29uc3QgZW50cnkgb2YgdG9JbnN0YWxsKSB7XG4gICAgICBpZiAoZW50cnkuaXNGb2xkZXIpIHtcbiAgICAgICAgaWYgKCEoYXdhaXQgdGhpcy5hcHAudmF1bHQuYWRhcHRlci5leGlzdHMoZW50cnkucGF0aCkpKSB7XG4gICAgICAgICAgYXdhaXQgdGhpcy5hcHAudmF1bHQuY3JlYXRlRm9sZGVyKGVudHJ5LnBhdGgpO1xuICAgICAgICAgIGNvbnNvbGUubG9nKGBDcmVhdGVkIGZvbGRlcjogJHtlbnRyeS5wYXRofWApO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBGaWxlIFx1MjE5MiBmaW5kIE1hbmlmZXN0RmlsZUVudHJ5XG4gICAgICAgIGNvbnN0IG1hbmlmZXN0RW50cnkgPSB0aGlzLm1hbmlmZXN0Q2FjaGUuZmlsZXMuZmluZChcbiAgICAgICAgICAoZikgPT4gZi5wYXRoID09PSBlbnRyeS5wYXRoXG4gICAgICAgICk7XG4gICAgICAgIGlmICghbWFuaWZlc3RFbnRyeSkge1xuICAgICAgICAgIGNvbnNvbGUud2FybihgQ291bGQgbm90IGZpbmQgbWFuaWZlc3QgZW50cnkgZm9yIGZpbGU6ICR7ZW50cnkucGF0aH1gKTtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICAvLyBSZXVzZSB5b3VyIGV4aXN0aW5nIFx1MjAxQ3VwZGF0ZUVudHJ5RnJvbU1hbmlmZXN0XHUyMDFEIChmb3JjZSA9IHRydWUpXG4gICAgICAgIGF3YWl0IHRoaXMudXBkYXRlRW50cnlGcm9tTWFuaWZlc3QobWFuaWZlc3RFbnRyeSwgdHJ1ZSk7XG4gICAgICB9XG4gICAgfVxuXHRcdC8vIDMpIFVwZGF0ZSAudmVyc2lvbi5qc29uIGFuZCBzZXR0aW5nc1xuXHRcdGF3YWl0IHRoaXMudXBkYXRlVmVyc2lvbkZpbGUoKTtcblx0XHR0aGlzLnNldHRpbmdzLmluc3RhbGxlZFZlcnNpb24gPVxuXHRcdHRoaXMuc2V0dGluZ3MubGF0ZXN0VG9vbGtpdFZlcnNpb24gPz8gdGhpcy5zZXR0aW5ncy5pbnN0YWxsZWRWZXJzaW9uO1xuXHRcdHRoaXMuc2V0dGluZ3MubGFzdEZvcmNlVXBkYXRlID0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpO1xuXHRcdGF3YWl0IHRoaXMuc2F2ZVNldHRpbmdzKCk7XG5cblx0XHQvLyA0KSBDcmVhdGUgdGhlIGhpZGRlbiBtYXJrZXIgZmlsZVxuXHRcdGNvbnN0IG1hcmtlclBhdGggPSAnLnZ2dW5kZXJsb3JlX2luc3RhbGxlZCc7XG5cdFx0aWYgKCEoYXdhaXQgdGhpcy5hcHAudmF1bHQuYWRhcHRlci5leGlzdHMobWFya2VyUGF0aCkpKSB7XG5cdFx0YXdhaXQgdGhpcy5hcHAudmF1bHQuY3JlYXRlKG1hcmtlclBhdGgsICcnKTtcblx0XHR9XG5cblx0XHQvLyA1KSBSZVx1MjAxMGVuYWJsZSBoaWdobGlnaHRpbmcgKGFsd2F5cyB0dXJuIGl0IGJhY2sgb24pXG5cdFx0dGhpcy5zZXR0aW5ncy5oaWdobGlnaHRFbmFibGVkID0gdHJ1ZTtcblx0XHRhd2FpdCB0aGlzLnNhdmVTZXR0aW5ncygpO1xuXHRcdHRoaXMuZW5hYmxlSGlnaGxpZ2h0KCk7XG5cdFx0YXdhaXQgdGhpcy51cGRhdGVWZXJzaW9uRmlsZSgpO1xuXHRcdGlmICh0aGlzLnNldHRpbmdzVGFiKSB7XG5cdFx0ICB0aGlzLnNldHRpbmdzVGFiLmRpc3BsYXkoKTtcblx0XHR9XG5cdFx0bmV3IE5vdGljZSgnXHUyNzA1IEN1c3RvbSBpbnN0YWxsIGNvbXBsZXRlIFx1MjAyNicpO1xuXHR9XG5cbiAgLy8gXHUyNTAwXHUyNTAwXHUyNTAwIEhJR0hMSUdIVElORyAoTGlnaHQgKyBEYXJrIE1vZGUpIFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFxuXG4gIHByaXZhdGUgZ2V0IGhpZ2hsaWdodENTUygpOiBzdHJpbmcge1xuICAgIGNvbnN0IGxpZ2h0ID0gdGhpcy5zZXR0aW5ncy5oaWdobGlnaHRDb2xvckxpZ2h0LnRyaW0oKSB8fCAncmdiYSgxMDcsMTQ2LDEyMCwxKSc7XG4gICAgY29uc3QgZGFyayA9IHRoaXMuc2V0dGluZ3MuaGlnaGxpZ2h0Q29sb3JEYXJrLnRyaW0oKSB8fCAncmdiYSggNTAsIDcwLCA1MCwxKSc7XG5cbiAgICBjb25zdCBmaWxlU2VsZWN0b3JzID0gdGhpcy5tYW5pZmVzdENhY2hlLmZpbGVzLm1hcCgoZikgPT4ge1xuICAgICAgY29uc3QgZXNjYXBlZCA9IGYucGF0aC5yZXBsYWNlKC9cIi9nLCAnXFxcXFwiJyk7XG4gICAgICByZXR1cm4gYC5uYXYtZmlsZS10aXRsZVtkYXRhLXBhdGg9XCIke2VzY2FwZWR9XCJdYDtcbiAgICB9KTtcblxuICAgIGNvbnN0IGZvbGRlclNlbGVjdG9ycyA9IHRoaXMubWFuaWZlc3RDYWNoZS5mb2xkZXJzLm1hcCgoZikgPT4ge1xuICAgICAgY29uc3QgZXNjYXBlZCA9IGYucGF0aC5yZXBsYWNlKC9cIi9nLCAnXFxcXFwiJyk7XG4gICAgICByZXR1cm4gYC5uYXYtZm9sZGVyLXRpdGxlW2RhdGEtcGF0aD1cIiR7ZXNjYXBlZH1cIl1gO1xuICAgIH0pO1xuXG4gICAgY29uc3QgbGluZXM6IHN0cmluZ1tdID0gW1xuICAgICAgYDpyb290IHtgLFxuICAgICAgYCAgLS12dnVuZGVybG9yZS10b29sa2l0LWhpZ2hsaWdodDogJHtsaWdodH07YCxcbiAgICAgIGB9YCxcbiAgICAgIGBgLFxuICAgICAgYGJvZHkudGhlbWUtZGFyayB7YCxcbiAgICAgIGAgIC0tdnZ1bmRlcmxvcmUtdG9vbGtpdC1oaWdobGlnaHQ6ICR7ZGFya307YCxcbiAgICAgIGB9YCxcbiAgICAgIGBgLFxuICAgIF07XG5cbiAgICBpZiAoZmlsZVNlbGVjdG9ycy5sZW5ndGgpIHtcbiAgICAgIGxpbmVzLnB1c2goYCR7ZmlsZVNlbGVjdG9ycy5qb2luKCcsICcpfSB7YCk7XG4gICAgICBsaW5lcy5wdXNoKGAgIGJhY2tncm91bmQtY29sb3I6IHZhcigtLXZ2dW5kZXJsb3JlLXRvb2xraXQtaGlnaGxpZ2h0KTtgKTtcbiAgICAgIGxpbmVzLnB1c2goYCAgYm9yZGVyLXJhZGl1czogM3B4O2ApO1xuICAgICAgbGluZXMucHVzaChgfWApO1xuICAgICAgbGluZXMucHVzaChgYCk7XG4gICAgfVxuXG4gICAgaWYgKGZvbGRlclNlbGVjdG9ycy5sZW5ndGgpIHtcbiAgICAgIGxpbmVzLnB1c2goYCR7Zm9sZGVyU2VsZWN0b3JzLmpvaW4oJywgJyl9IHtgKTtcbiAgICAgIGxpbmVzLnB1c2goYCAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tdnZ1bmRlcmxvcmUtdG9vbGtpdC1oaWdobGlnaHQpO2ApO1xuICAgICAgbGluZXMucHVzaChgICBib3JkZXItcmFkaXVzOiAzcHg7YCk7XG4gICAgICBsaW5lcy5wdXNoKGB9YCk7XG4gICAgICBsaW5lcy5wdXNoKGBgKTtcbiAgICB9XG5cbiAgICByZXR1cm4gbGluZXMuam9pbignXFxuJyk7XG4gIH1cblxuICBwdWJsaWMgZW5hYmxlSGlnaGxpZ2h0KCk6IHZvaWQge1xuICAgIGlmICh0aGlzLnN0eWxlRWwpIHJldHVybjtcbiAgICB0aGlzLnN0eWxlRWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzdHlsZScpO1xuICAgIHRoaXMuc3R5bGVFbC5pZCA9ICd2dnVuZGVybG9yZS1oaWdobGlnaHQtaW5qZWN0JztcbiAgICB0aGlzLnN0eWxlRWwudGV4dENvbnRlbnQgPSB0aGlzLmhpZ2hsaWdodENTUztcbiAgICBkb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKHRoaXMuc3R5bGVFbCk7XG4gIH1cblxuICBwdWJsaWMgZGlzYWJsZUhpZ2hsaWdodCgpOiB2b2lkIHtcbiAgICBpZiAoIXRoaXMuc3R5bGVFbCkgcmV0dXJuO1xuICAgIHRoaXMuc3R5bGVFbC5yZW1vdmUoKTtcbiAgICB0aGlzLnN0eWxlRWwgPSBudWxsO1xuICB9XG5cbiAgLy8gXHUyNTAwXHUyNTAwXHUyNTAwIFJFTU9URSBCQVNFTElORSBDQUNISU5HIFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFxuXG4gIHB1YmxpYyBhc3luYyBmZXRjaFJlbW90ZUJhc2VsaW5lKCk6IFByb21pc2U8dm9pZD4ge1xuICAgIGNvbnNvbGUubG9nKCdcdUQ4M0RcdUREMDEgZmV0Y2hSZW1vdGVCYXNlbGluZSgpIGNhbGxlZCcpO1xuXG4gICAgaWYgKCF0aGlzLm1hbmlmZXN0Q2FjaGUgfHwgIUFycmF5LmlzQXJyYXkodGhpcy5tYW5pZmVzdENhY2hlLmZpbGVzKSkge1xuICAgICAgY29uc29sZS53YXJuKCdcdTI2QTBcdUZFMEYgbWFuaWZlc3RDYWNoZSBpcyBtaXNzaW5nIG9yIGludmFsaWQnKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBmb3IgKGNvbnN0IGVudHJ5IG9mIHRoaXMubWFuaWZlc3RDYWNoZS5maWxlcykge1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgcmF3VXJsID0gYGh0dHBzOi8vcmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbS9zbGFtd2lzZTAwMDEvVlZ1bmRlcmxvcmUtVG9vbGtpdC1GdWxsL21haW4vJHtlbnRyeS5wYXRofWA7XG4gICAgICAgIGNvbnN0IHJlbW90ZVRleHQgPSBhd2FpdCAoYXdhaXQgZmV0Y2gocmF3VXJsKSkudGV4dCgpO1xuICAgICAgICBjb25zdCByZXNvbHZlZCA9IHRoaXMucmVzb2x2ZVZhdWx0UGF0aChlbnRyeS5wYXRoKTtcblxuICAgICAgICAvLyBJZiByZW1hcHBlZCwgcmVtb3ZlIHRoZSBvbGQgY2FjaGUgZW50cnlcbiAgICAgICAgaWYgKHJlc29sdmVkICE9PSBlbnRyeS5wYXRoKSB7XG4gICAgICAgICAgYXdhaXQgdGhpcy5maWxlQ2FjaGVNYW5hZ2VyLnJlbW92ZUZyb21DYWNoZShlbnRyeS5wYXRoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGF3YWl0IHRoaXMuZmlsZUNhY2hlTWFuYWdlci51cGRhdGVDYWNoZShcbiAgICAgICAgICByZXNvbHZlZCxcbiAgICAgICAgICByZW1vdGVUZXh0LFxuICAgICAgICAgIGVudHJ5LnBhdGgsXG4gICAgICAgICAgZmFsc2VcbiAgICAgICAgKTtcbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihgRmFpbGVkIHRvIGZldGNoIHJhdyBiYXNlbGluZSBmb3IgJHtlbnRyeS5wYXRofWAsIGUpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGNvbnNvbGUubG9nKCdcdUQ4M0RcdURDRTYgRmluYWwgY2FjaGU6JywgdGhpcy5maWxlQ2FjaGVNYW5hZ2VyLmdldENhY2hlKCkpO1xuICB9XG5cbiAgLy8gXHUyNTAwXHUyNTAwXHUyNTAwIE1BUktFUiBGSUxFIENIRUNLUyAoZmlyc3RcdTIwMTBydW4gZGV0ZWN0aW9uKSBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcblxucHJpdmF0ZSBhc3luYyBjaGVja01hcmtlckZpbGUoKSB7XG4gIGNvbnN0IG1hcmtlclBhdGggPSAnLnZ2dW5kZXJsb3JlX2luc3RhbGxlZCc7XG4gIGNvbnN0IG1hcmtlckV4aXN0cyA9IGF3YWl0IHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXIuZXhpc3RzKG1hcmtlclBhdGgpO1xuICAgIHRoaXMuaXNGaXJzdFJ1biA9ICFtYXJrZXJFeGlzdHM7XG4gICAgZGVsZXRlICh0aGlzLnNldHRpbmdzIGFzIGFueSkubmVlZHNJbnN0YWxsO1xuICAgIGF3YWl0IHRoaXMuc2F2ZVNldHRpbmdzKCk7XG4gICAgdGhpcy5zZXR0aW5nc1RhYi5kaXNwbGF5KCk7XG59XG5cblxuICAvLyBcdTI1MDBcdTI1MDBcdTI1MDAgTUFOSUZFU1QgU1lOQyBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcblxuICBhc3luYyBzeW5jTWFuaWZlc3QoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IGZldGNoKFxuICAgICAgICAnaHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tL3NsYW13aXNlMDAwMS9WVnVuZGVybG9yZS1Ub29sa2l0LUZ1bGwvbWFpbi9tYW5pZmVzdC5qc29uJ1xuICAgICAgKTtcbiAgICAgIGlmICghcmVzLm9rKSB0aHJvdyBuZXcgRXJyb3IoYEZhaWxlZCB0byBmZXRjaCBtYW5pZmVzdDogJHtyZXMuc3RhdHVzVGV4dH1gKTtcbiAgICAgIGNvbnN0IG1hbmlmZXN0ID0gYXdhaXQgcmVzLmpzb24oKTtcbiAgICAgIHRoaXMuc2V0dGluZ3MubGF0ZXN0RGVmYXVsdHMgPSBtYW5pZmVzdC5kZWZhdWx0UGF0aHMgfHwge307XG4gICAgICB0aGlzLm1hbmlmZXN0Q2FjaGUgPSBtYW5pZmVzdDtcblxuICAgICAgY29uc3QgbWFuaWZlc3RDb250ZW50ID0gSlNPTi5zdHJpbmdpZnkobWFuaWZlc3QsIG51bGwsIDIpO1xuICAgICAgYXdhaXQgdGhpcy5hcHAudmF1bHQuYWRhcHRlci53cml0ZSgnbWFuaWZlc3QuanNvbicsIG1hbmlmZXN0Q29udGVudCk7XG4gICAgICBhd2FpdCB0aGlzLnNhdmVTZXR0aW5ncygpO1xuXG4gICAgICBjb25zb2xlLmxvZygnTWFuaWZlc3Qgc3luY2VkIGFuZCBsb2NhbCBtYW5pZmVzdCB1cGRhdGVkLicpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBzeW5jaW5nIG1hbmlmZXN0OicsIGVycm9yKTtcbiAgICAgIG5ldyBOb3RpY2UoJ0ZhaWxlZCB0byBzeW5jIG1hbmlmZXN0LicpO1xuICAgIH1cbiAgfSBcblxuICAvLyBcdTI1MDBcdTI1MDBcdTI1MDAgUExVR0lOIExJRkVDWUNMRSBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcblxuICBhc3luYyBvbmxvYWQoKSB7XG4gICAgYXdhaXQgdGhpcy5sb2FkU2V0dGluZ3MoKTtcblxuICAgIFxuICAgIHRoaXMuYmFja3VwTWFuYWdlciA9IG5ldyBCYWNrdXBNYW5hZ2VyKHRoaXMuYXBwLnZhdWx0KTtcblxuICAgIHRoaXMuZmlsZUNhY2hlTWFuYWdlciA9IG5ldyBUb29sa2l0RmlsZUNhY2hlTWFuYWdlcihcbiAgICAgIHRoaXMuYXBwLnZhdWx0LFxuICAgICAgdGhpcy5zZXR0aW5ncy5maWxlQ2FjaGUgPz8ge30sXG4gICAgICBhc3luYyAoKSA9PiBhd2FpdCB0aGlzLnNhdmVTZXR0aW5ncygpXG4gICAgKTtcblxuXG4gICAgICBjb25zdCBvcmlnRXJyb3IgPSBjb25zb2xlLmVycm9yLmJpbmQoY29uc29sZSk7XG4gIGNvbnNvbGUuZXJyb3IgPSAobXNnPzogYW55LCAuLi5yZXN0OiBhbnlbXSkgPT4ge1xuICAgIGlmIChcbiAgICAgIHR5cGVvZiBtc2cgPT09IFwic3RyaW5nXCIgJiZcbiAgICAgIG1zZy5pbmNsdWRlcyhcIkNhbm5vdCBpbmRleCBmaWxlXCIpICYmXG4gICAgICBtc2cuaW5jbHVkZXMoXCJEYXRhdmlld1wiKVxuICAgICkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBvcmlnRXJyb3IobXNnLCAuLi5yZXN0KTtcbiAgfTtcblxuICAgIHRoaXMuc2V0dGluZ3NUYWIgPSBuZXcgVG9vbGtpdFNldHRpbmdzVGFiKHRoaXMuYXBwLCB0aGlzKTtcbiAgICB0aGlzLmFkZFNldHRpbmdUYWIodGhpcy5zZXR0aW5nc1RhYik7XG5cbiAgICAvLyBJbW1lZGlhdGVseSBsb2FkIGFueSBjYWNoZWQgbWFuaWZlc3QuanNvbi4gSWYgbm90IHByZXNlbnQsIHdlJ2xsIGZldGNoIGluIGEgbW9tZW50LlxuICAgIHRyeSB7XG4gICAgICBjb25zdCBjb250ZW50ID0gYXdhaXQgdGhpcy5hcHAudmF1bHQuYWRhcHRlci5yZWFkKCdtYW5pZmVzdC5qc29uJyk7XG4gICAgICB0aGlzLm1hbmlmZXN0Q2FjaGUgPSBKU09OLnBhcnNlKGNvbnRlbnQpO1xuICAgICAgY29uc29sZS5sb2coJ1x1MjcwNSBMb2FkZWQgbWFuaWZlc3QgZnJvbSB2YXVsdDonLCB0aGlzLm1hbmlmZXN0Q2FjaGUpO1xuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgY29uc29sZS53YXJuKCdNYW5pZmVzdCBub3QgZm91bmQgaW4gdmF1bHQ7IHdpbGwgZmV0Y2ggZnJvbSBHaXRIdWIgc2hvcnRseS4nKTtcbiAgICB9XG4gICAgXG4gICAgLy8gSWYgaGlnaGxpZ2h0aW5nIHdhcyBPTiBiZWZvcmUsIHJlc3RvcmUgaXQgbm93OlxuXHRpZiAodGhpcy5zZXR0aW5ncy5oaWdobGlnaHRFbmFibGVkICkge1xuXHRcdHRoaXMuZW5hYmxlSGlnaGxpZ2h0KCk7XG5cdCAgfVxuXG4gICAgLy8gRGVmZXIgaGVhdmllciB0YXNrcyBzbGlnaHRseSBzbyBVSSBpc25cdTIwMTl0IGJsb2NrZWQ6XG4gICAgc2V0VGltZW91dChhc3luYyAoKSA9PiB7XG4gICAgICBhd2FpdCB0aGlzLnN5bmNNYW5pZmVzdCgpO1xuICAgICAgYXdhaXQgdGhpcy5zaG93SW5kZXhpbmdNb2RhbCgpO1xuICAgICAgYXdhaXQgdGhpcy5jaGVja0ZvclVwZGF0ZXMoKTtcblxuICAgICAgLy8gQnVpbGQgcmV2ZXJzZSBjYWNoZSBmb3IgXHUyMDFDbW92ZWRcdTIwMUQgZGV0ZWN0aW9uXG4gICAgICB0aGlzLm9sZFBhdGhzQnlHaXRodWIgPSBPYmplY3QuZW50cmllcyhcbiAgICAgICAgdGhpcy5maWxlQ2FjaGVNYW5hZ2VyLmdldENhY2hlKCkgYXMgUmVjb3JkPHN0cmluZywgVG9vbGtpdEZpbGVDYWNoZUVudHJ5PlxuICAgICAgKS5yZWR1Y2UoKG1hcCwgW3ZhdWx0UGF0aCwgZW50cnldKSA9PiB7XG4gICAgICAgIG1hcFtlbnRyeS5naXRodWJQYXRoXSA9IHZhdWx0UGF0aDtcbiAgICAgICAgcmV0dXJuIG1hcDtcbiAgICAgIH0sIHt9IGFzIFJlY29yZDxzdHJpbmcsIHN0cmluZz4pO1xuXG4gICAgICBjb25zb2xlLmxvZygnXHVEODNEXHVEQ0U2IENhY2hlZCBGaWxlczonLCB0aGlzLmZpbGVDYWNoZU1hbmFnZXIuZ2V0Q2FjaGUoKSk7XG4gICAgfSwgMjUwKTtcblxuICAgIHRoaXMuc2NoZWR1bGVBdXRvVXBkYXRlQ2hlY2soKTtcblxuICB0aGlzLnJlZ2lzdGVyRXZlbnQoXG4gICAgdGhpcy5hcHAudmF1bHQub24oXCJkZWxldGVcIiwgKCkgPT5cbiAgICAodGhpcy5hcHAgYXMgYW55KS5jb21tYW5kcy5leGVjdXRlQ29tbWFuZEJ5SWQoXCJkYXRhdmlldzpjbGVhci1jYWNoZVwiKSAgICApXG4gICk7XG4gIHRoaXMucmVnaXN0ZXJFdmVudChcbiAgICB0aGlzLmFwcC52YXVsdC5vbihcInJlbmFtZVwiLCAoKSA9PlxuICAgICAgKHRoaXMuYXBwIGFzIGFueSkuY29tbWFuZHMuZXhlY3V0ZUNvbW1hbmRCeUlkKFwiZGF0YXZpZXc6Y2xlYXItY2FjaGVcIilcbiAgICApXG4gICk7XG5cbiAgICAvLyBEZWZlbnNpdmU6IGVuc3VyZSBzZXR0aW5ncy5jdXN0b21QYXRocyBleGlzdHNcbiAgICBpZiAoIXRoaXMuc2V0dGluZ3MuY3VzdG9tUGF0aHMpIHtcbiAgICAgIHRoaXMuc2V0dGluZ3MuY3VzdG9tUGF0aHMgPSBbXTtcbiAgICB9XG5cbiAgICAvLyBCdWlsZCB0aGUgcmVxdWlyZXNHcmFwaCBmcm9tIG1hbmlmZXN0Lmpzb25cbiAgICB0cnkge1xuICAgICAgY29uc3QgcmF3ID0gYXdhaXQgdGhpcy5hcHAudmF1bHQuYWRhcHRlci5yZWFkKCdtYW5pZmVzdC5qc29uJyk7XG4gICAgICBjb25zdCBtYW5pZmVzdCA9IEpTT04ucGFyc2UocmF3KSBhcyB7XG4gICAgICAgIGZpbGVzOiBBcnJheTx7IGtleTogc3RyaW5nOyByZXF1aXJlcz86IHN0cmluZ1tdIH0+O1xuICAgICAgICBmb2xkZXJzOiBBcnJheTx7IGtleTogc3RyaW5nOyByZXF1aXJlcz86IHN0cmluZ1tdIH0+O1xuICAgICAgfTtcbiAgICAgIGNvbnN0IGVudHJpZXMgPSBbLi4uKG1hbmlmZXN0LmZvbGRlcnMgfHwgW10pLCAuLi4obWFuaWZlc3QuZmlsZXMgfHwgW10pXTtcbiAgICAgIHRoaXMucmVxdWlyZXNHcmFwaCA9IG5ldyBNYXA8c3RyaW5nLCBzdHJpbmdbXT4oKTtcbiAgICAgIGZvciAoY29uc3QgZSBvZiBlbnRyaWVzKSB7XG4gICAgICAgIHRoaXMucmVxdWlyZXNHcmFwaC5zZXQoZS5rZXksIGUucmVxdWlyZXMgPz8gW10pO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIGNvbnNvbGUud2FybignQ291bGQgbm90IGJ1aWxkIHJlcXVpcmVzR3JhcGggKG1hbmlmZXN0Lmpzb24gbWlzc2luZyBvciBpbnZhbGlkKS4nKTtcbiAgICAgIHRoaXMucmVxdWlyZXNHcmFwaCA9IG5ldyBNYXAoKTtcbiAgICB9XG4gICAgICBpZiAodGhpcy5pc0ZpcnN0UnVuKSB7XG4gICAgICAgICh0aGlzLmFwcC53b3Jrc3BhY2UgYXMgYW55KS5kZXRhY2hMZWF2ZXNPZlR5cGUoJ21hcmtkb3duJyk7XG4gICAgICAgIGNvbnN0IHdlbGNvbWUgPSB0aGlzLmFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoJ1dlbGNvbWUubWQnKTtcbiAgICAgICAgaWYgKHdlbGNvbWUgaW5zdGFuY2VvZiBURmlsZSkge1xuICAgICAgICAgIHRoaXMuYXBwLndvcmtzcGFjZS5nZXRMZWFmKHRydWUpLm9wZW5GaWxlKHdlbGNvbWUpO1xuICAgICAgICB9XG4gICAgICB9XG59XG5cbiAgb251bmxvYWQoKSB7XG4gICAgdGhpcy5kaXNhYmxlSGlnaGxpZ2h0KCk7XG4gICAgaWYgKHRoaXMuYXV0b0NoZWNrSW50ZXJ2YWwpIHtcbiAgICAgIGNsZWFySW50ZXJ2YWwodGhpcy5hdXRvQ2hlY2tJbnRlcnZhbCk7XG4gICAgfVxuICB9IFxuXG4gIHNjaGVkdWxlQXV0b1VwZGF0ZUNoZWNrKCkge1xuICAgIHRoaXMuYXV0b0NoZWNrSW50ZXJ2YWwgPSB3aW5kb3cuc2V0SW50ZXJ2YWwoKCkgPT4ge1xuICAgICAgdGhpcy5jaGVja0ZvclVwZGF0ZXMoKTtcbiAgICB9LCA2MCAqIDYwICogMTAwMCk7XG4gIH1cblxuICAvLyBcdTI1MDBcdTI1MDBcdTI1MDAgQkFDS1VQICYgVU5ETyBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcblxuICBhc3luYyBiYWNrdXBGaWxlKGZpbGVQYXRoOiBzdHJpbmcsIGNvbnRlbnQ6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xuICAgIHRoaXMuc2V0dGluZ3MuYmFja3VwRmlsZXMgPSB0aGlzLnNldHRpbmdzLmJhY2t1cEZpbGVzIHx8IHt9O1xuICAgIHRoaXMuc2V0dGluZ3MuYmFja3VwRmlsZXNbZmlsZVBhdGhdID0gY29udGVudDtcbiAgICBhd2FpdCB0aGlzLnNhdmVTZXR0aW5ncygpO1xuICAgIGNvbnNvbGUubG9nKGBCYWNrdXAgc3RvcmVkIGZvciAke2ZpbGVQYXRofWApO1xuICB9XG5cbiAgYXN5bmMgdW5kb0ZvcmNlVXBkYXRlKCk6IFByb21pc2U8dm9pZD4ge1xuICAgIGlmICghdGhpcy5zZXR0aW5ncy5iYWNrdXBGaWxlcyB8fCBPYmplY3Qua2V5cyh0aGlzLnNldHRpbmdzLmJhY2t1cEZpbGVzKS5sZW5ndGggPT09IDApIHtcbiAgICAgIG5ldyBOb3RpY2UoJ05vIGJhY2t1cHMgYXZhaWxhYmxlIHRvIHJlc3RvcmUuJyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGZvciAoY29uc3QgW2ZpbGVQYXRoLCBiYWNrdXBDb250ZW50XSBvZiBPYmplY3QuZW50cmllcyh0aGlzLnNldHRpbmdzLmJhY2t1cEZpbGVzKSkge1xuICAgICAgaWYgKGF3YWl0IHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXIuZXhpc3RzKGZpbGVQYXRoKSkge1xuICAgICAgICBhd2FpdCB0aGlzLmFwcC52YXVsdC5hZGFwdGVyLndyaXRlKGZpbGVQYXRoLCBiYWNrdXBDb250ZW50KTtcbiAgICAgICAgY29uc29sZS5sb2coYFJlc3RvcmVkICR7ZmlsZVBhdGh9YCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBhd2FpdCB0aGlzLmFwcC52YXVsdC5jcmVhdGUoZmlsZVBhdGgsIGJhY2t1cENvbnRlbnQpO1xuICAgICAgICBjb25zb2xlLmxvZyhgUmVjcmVhdGVkIGFuZCByZXN0b3JlZCAke2ZpbGVQYXRofWApO1xuICAgICAgfVxuICAgIH1cbiAgICBuZXcgTm90aWNlKCdcdTI3MDUgRm9yY2UgdXBkYXRlIHVuZG9uZS4nKTtcbiAgICB0aGlzLnNldHRpbmdzLmJhY2t1cEZpbGVzID0ge307XG4gICAgYXdhaXQgdGhpcy5zYXZlU2V0dGluZ3MoKTtcbiAgfVxuXG4gIC8vIFx1MjUwMFx1MjUwMFx1MjUwMCBGT0xERVIgU1lOQyBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcblxuICBhc3luYyBzeW5jTWlzc2luZ0ZvbGRlcnMoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgaWYgKHRoaXMubWFuaWZlc3RDYWNoZSAmJiB0aGlzLm1hbmlmZXN0Q2FjaGUuZm9sZGVycykge1xuICAgICAgZm9yIChjb25zdCBmb2xkZXJFbnRyeSBvZiB0aGlzLm1hbmlmZXN0Q2FjaGUuZm9sZGVycykge1xuICAgICAgICBjb25zdCBmb2xkZXJQYXRoID0gZm9sZGVyRW50cnkucGF0aDtcbiAgICAgICAgaWYgKCEoYXdhaXQgdGhpcy5hcHAudmF1bHQuYWRhcHRlci5leGlzdHMoZm9sZGVyUGF0aCkpKSB7XG4gICAgICAgICAgYXdhaXQgdGhpcy5hcHAudmF1bHQuY3JlYXRlRm9sZGVyKGZvbGRlclBhdGgpO1xuICAgICAgICAgIGNvbnNvbGUubG9nKGBcdUQ4M0RcdURDQzEgQ3JlYXRlZCBtaXNzaW5nIGZvbGRlcjogJHtmb2xkZXJQYXRofWApO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLy8gXHUyNTAwXHUyNTAwXHUyNTAwIEZPUkNFLVVQREFURSBQUkVWSUVXIFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFxuXG4gIGFzeW5jIGJ1aWxkRm9yY2VVcGRhdGVQcmV2aWV3KCk6IFByb21pc2U8UHJldmlld0l0ZW1bXT4ge1xuICAgIGNvbnN0IHByZXZpZXdMaXN0OiBQcmV2aWV3SXRlbVtdID0gW107XG5cbiAgICAvLyAwKSBDb2xsZWN0IGFsbCBibGFja2xpc3RlZCBmb2xkZXJzIChtYW5pZmVzdEtleSB2YWx1ZXMgd2hlcmUgZG9VcGRhdGUgPT09IGZhbHNlKVxuICAgIGNvbnN0IGRlbnlMaXN0ZWRGb2xkZXJzID0gdGhpcy5zZXR0aW5ncy5jdXN0b21QYXRoc1xuICAgICAgLmZpbHRlcigoYykgPT4gYy5kb1VwZGF0ZSA9PT0gZmFsc2UpXG4gICAgICAubWFwKChjKSA9PiBjLm1hbmlmZXN0S2V5KTtcblxuICAgIC8vIDEpIERlbnktbGlzdGVkIGZpbGVzIGZpcnN0XHUyMDE0YnV0IG9ubHkgaWYgdGhleSB3b3VsZCBhY3R1YWxseSBiZSBcIm5ld1wiIG9yIFwib3V0IG9mIGRhdGVcIlxuICAgIGZvciAoY29uc3QgZW50cnkgb2YgdGhpcy5tYW5pZmVzdENhY2hlLmZpbGVzKSB7XG4gICAgICAvLyBcdTI1MDBcdTI1MDAgU0tJUCBhbnkgb3B0aW9uYWw6dHJ1ZSBmaWxlXG4gICAgICBpZiAoZW50cnkub3B0aW9uYWwpIHtcbiAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBjdXN0b20gPSB0aGlzLnNldHRpbmdzLmN1c3RvbVBhdGhzLmZpbmQoKGMpID0+IGMubWFuaWZlc3RLZXkgPT09IGVudHJ5LmtleSk7XG4gICAgICBjb25zdCBpc0luRGVueUZvbGRlciA9IGRlbnlMaXN0ZWRGb2xkZXJzLnNvbWUoKGZvbGRlcikgPT5cbiAgICAgIGVudHJ5LnBhdGguc3RhcnRzV2l0aChmb2xkZXIgKyAnLycpXG4gICAgICApO1xuICAgICAgaWYgKGN1c3RvbT8uZG9VcGRhdGUgPT09IGZhbHNlIHx8IGlzSW5EZW55Rm9sZGVyKSB7XG4gICAgICAvLyBSZXNvbHZlIHZhdWx0IHBhdGggKGFjY291bnRpbmcgZm9yIGFueSByZW1hcHBpbmcpXG4gICAgICBjb25zdCB2cCA9IGN1c3RvbT8udmF1bHRQYXRoID8/IHRoaXMucmVzb2x2ZVZhdWx0UGF0aChlbnRyeS5wYXRoKTtcblxuICAgICAgLy8gQ2hlY2s6IGRvZXMgdGhlIGZpbGUgZXhpc3QgbG9jYWxseT8gQW5kIGlzIGl0IHVwLXRvLWRhdGU/XG4gICAgICBjb25zdCBleGlzdHMgPSBhd2FpdCB0aGlzLmFwcC52YXVsdC5hZGFwdGVyLmV4aXN0cyh2cCk7XG4gICAgICBjb25zdCB1cFRvRGF0ZSA9IGV4aXN0cyAmJiAoYXdhaXQgdGhpcy5maWxlQ2FjaGVNYW5hZ2VyLmlzVXBUb0RhdGUodnApKTtcblxuICAgICAgLy8gT25seSBzaG93IGFzIGRlbnktbGlzdGVkIGlmIGl0IHdvdWxkIGhhdmUgYmVlbiBcdTIwMUNuZXdcdTIwMUQgKG1pc3NpbmcpIG9yIFx1MjAxQ291dC1vZi1kYXRlXHUyMDFEXG4gICAgICBpZiAoIWV4aXN0cyB8fCAhdXBUb0RhdGUpIHtcbiAgICAgICAgcHJldmlld0xpc3QucHVzaCh7XG4gICAgICAgIGZpbGVQYXRoOiB2cCxcbiAgICAgICAgYWN0aW9uOiAnZGVueS1saXN0ZWQgXHUyMDEzIHdpbGwgbm90IHVwZGF0ZScsXG4gICAgICAgIHNlbGVjdGVkOiBmYWxzZSxcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICB9XG4gICAgfVxuXG5cdC8vIDIpIEZVTEwtU1lOQyBtb2RlIChza2lwIGFueSBmaWxlL2ZvbGRlciB0aGF0IGlzIGJsYWNrbGlzdGVkKVxuXHRpZiAoIXRoaXMuc2V0dGluZ3MuY3VzdG9taXplVXBkYXRlcykge1xuXHQgIGZvciAoY29uc3QgZiBvZiB0aGlzLm1hbmlmZXN0Q2FjaGUuZmlsZXMpIHtcblx0XHQvLyBcdTI1MDBcdTI1MDAgU0tJUCBhbnkgb3B0aW9uYWw6dHJ1ZSBmaWxlXG5cdFx0aWYgKGYub3B0aW9uYWwpIHtcblx0XHQgIGNvbnRpbnVlO1xuXHRcdH1cblxuXHRcdGNvbnN0IGN1c3RvbSA9IHRoaXMuc2V0dGluZ3MuY3VzdG9tUGF0aHMuZmluZCgoYykgPT4gYy5tYW5pZmVzdEtleSA9PT0gZi5rZXkpO1xuXHRcdGNvbnN0IGlzSW5EZW55Rm9sZGVyID0gZGVueUxpc3RlZEZvbGRlcnMuc29tZSgoZm9sZGVyKSA9PlxuXHRcdCAgZi5wYXRoLnN0YXJ0c1dpdGgoZm9sZGVyICsgJy8nKVxuXHRcdCk7XG5cdFx0aWYgKGN1c3RvbT8uZG9VcGRhdGUgPT09IGZhbHNlIHx8IGlzSW5EZW55Rm9sZGVyKSB7XG5cdFx0ICBjb250aW51ZTtcblx0XHR9XG5cblx0XHRjb25zdCB2cCA9IHRoaXMucmVzb2x2ZVZhdWx0UGF0aChmLnBhdGgpO1xuXHRcdGxldCB0YWcgPSAnJztcblx0XHRpZiAodnAgIT09IGYucGF0aCkgdGFnID0gJyAocmVtYXBwZWQpJztcblxuXHRcdGNvbnN0IGV4aXN0cyA9IGF3YWl0IHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXIuZXhpc3RzKHZwKTtcblx0XHRpZiAoIWV4aXN0cykge1xuXHRcdCAgcHJldmlld0xpc3QucHVzaCh7XG5cdFx0XHRmaWxlUGF0aDogdnAsXG5cdFx0XHRhY3Rpb246IGBuZXcgZmlsZSR7dGFnfWAsXG5cdFx0XHRzZWxlY3RlZDogdHJ1ZSxcblx0XHQgIH0pO1xuXHRcdH0gZWxzZSBpZiAoIShhd2FpdCB0aGlzLmZpbGVDYWNoZU1hbmFnZXIuaXNVcFRvRGF0ZSh2cCkpKSB7XG5cdFx0ICBwcmV2aWV3TGlzdC5wdXNoKHtcblx0XHRcdGZpbGVQYXRoOiB2cCxcblx0XHRcdGFjdGlvbjogYHdpbGwgYmUgb3ZlcndyaXR0ZW4ke3RhZ31gLFxuXHRcdFx0c2VsZWN0ZWQ6IHRydWUsXG5cdFx0ICB9KTtcblx0XHR9XG5cdCAgfVxuXG5cdCAgZm9yIChjb25zdCBmbGQgb2YgdGhpcy5tYW5pZmVzdENhY2hlLmZvbGRlcnMpIHtcblx0XHQvLyBcdTI1MDBcdTI1MDAgU0tJUCBhbnkgb3B0aW9uYWw6dHJ1ZSBmb2xkZXJcblx0XHRpZiAoZmxkLm9wdGlvbmFsKSB7XG5cdFx0ICBjb250aW51ZTtcblx0XHR9XG5cblx0XHRjb25zdCBpc0RlbnlGb2xkZXIgPSBkZW55TGlzdGVkRm9sZGVycy5pbmNsdWRlcyhmbGQucGF0aCk7XG5cdFx0aWYgKCEoYXdhaXQgdGhpcy5hcHAudmF1bHQuYWRhcHRlci5leGlzdHMoZmxkLnBhdGgpKSAmJiAhaXNEZW55Rm9sZGVyKSB7XG5cdFx0ICBwcmV2aWV3TGlzdC5wdXNoKHtcblx0XHRcdGZpbGVQYXRoOiBmbGQucGF0aCxcblx0XHRcdGFjdGlvbjogJ21pc3NpbmcgZm9sZGVyICh3aWxsIGJlIGNyZWF0ZWQpJyxcblx0XHRcdHNlbGVjdGVkOiB0cnVlLFxuXHRcdFx0aXNGb2xkZXI6IHRydWUsXG5cdFx0ICB9KTtcblx0XHR9XG5cdCAgfVxuXG5cdCAgcmV0dXJuIHByZXZpZXdMaXN0O1xuXHR9XG5cblx0Ly8gMykgQ1VTVE9NLVNZTkMgbW9kZSAoc2tpcCBhbnkgZmlsZS9mb2xkZXIgdGhhdCBpcyBibGFja2xpc3RlZClcblx0Zm9yIChjb25zdCBlbnRyeSBvZiB0aGlzLm1hbmlmZXN0Q2FjaGUuZmlsZXMpIHtcblx0ICAvLyBcdTI1MDBcdTI1MDAgU0tJUCBhbnkgb3B0aW9uYWw6dHJ1ZSBmaWxlXG5cdCAgaWYgKGVudHJ5Lm9wdGlvbmFsKSB7XG5cdFx0Y29udGludWU7XG5cdCAgfVxuXG5cdCAgY29uc3QgY3VzdG9tID0gdGhpcy5zZXR0aW5ncy5jdXN0b21QYXRocy5maW5kKChjKSA9PiBjLm1hbmlmZXN0S2V5ID09PSBlbnRyeS5rZXkpO1xuXHQgIGNvbnN0IGlzSW5EZW55Rm9sZGVyID0gZGVueUxpc3RlZEZvbGRlcnMuc29tZSgoZm9sZGVyKSA9PlxuXHRcdGVudHJ5LnBhdGguc3RhcnRzV2l0aChmb2xkZXIgKyAnLycpXG5cdCAgKTtcblx0ICBpZiAoY3VzdG9tPy5kb1VwZGF0ZSA9PT0gZmFsc2UgfHwgaXNJbkRlbnlGb2xkZXIpIHtcblx0XHRjb250aW51ZTtcblx0ICB9XG5cblx0ICBjb25zdCB2YXVsdFBhdGggPSBjdXN0b20/LnZhdWx0UGF0aCA/PyB0aGlzLnJlc29sdmVWYXVsdFBhdGgoZW50cnkucGF0aCk7XG5cdCAgY29uc3QgZXhpc3RzID0gYXdhaXQgdGhpcy5hcHAudmF1bHQuYWRhcHRlci5leGlzdHModmF1bHRQYXRoKTtcblx0ICBjb25zdCB1cFRvRGF0ZSA9IGV4aXN0cyAmJiAoYXdhaXQgdGhpcy5maWxlQ2FjaGVNYW5hZ2VyLmlzVXBUb0RhdGUodmF1bHRQYXRoKSk7XG5cblx0ICBsZXQgdGFnID0gJyc7XG5cdCAgaWYgKHZhdWx0UGF0aCAhPT0gZW50cnkucGF0aCkgdGFnID0gJyAocmVtYXBwZWQpJztcblxuXHQgIGlmICghZXhpc3RzKSB7XG5cdFx0cHJldmlld0xpc3QucHVzaCh7XG5cdFx0ICBmaWxlUGF0aDogdmF1bHRQYXRoLFxuXHRcdCAgYWN0aW9uOiBgbmV3IGZpbGUke3RhZ31gLFxuXHRcdCAgc2VsZWN0ZWQ6IHRydWUsXG5cdFx0fSk7XG5cdCAgfSBlbHNlIGlmICghdXBUb0RhdGUpIHtcblx0XHRwcmV2aWV3TGlzdC5wdXNoKHtcblx0XHQgIGZpbGVQYXRoOiB2YXVsdFBhdGgsXG5cdFx0ICBhY3Rpb246IGB3aWxsIGJlIG92ZXJ3cml0dGVuJHt0YWd9YCxcblx0XHQgIHNlbGVjdGVkOiB0cnVlLFxuXHRcdH0pO1xuXHQgIH1cblx0fVxuXG5cdGZvciAoY29uc3QgZW50cnkgb2YgdGhpcy5tYW5pZmVzdENhY2hlLmZvbGRlcnMpIHtcblx0ICAvLyBcdTI1MDBcdTI1MDAgU0tJUCBhbnkgb3B0aW9uYWw6dHJ1ZSBmb2xkZXJcblx0ICBpZiAoZW50cnkub3B0aW9uYWwpIHtcblx0XHRjb250aW51ZTtcblx0ICB9XG5cblx0ICBjb25zdCBpc0RlbnlGb2xkZXIgPSBkZW55TGlzdGVkRm9sZGVycy5pbmNsdWRlcyhlbnRyeS5wYXRoKTtcblx0ICBpZiAoIShhd2FpdCB0aGlzLmFwcC52YXVsdC5hZGFwdGVyLmV4aXN0cyhlbnRyeS5wYXRoKSkgJiYgIWlzRGVueUZvbGRlcikge1xuXHRcdHByZXZpZXdMaXN0LnB1c2goe1xuXHRcdCAgZmlsZVBhdGg6IGVudHJ5LnBhdGgsXG5cdFx0ICBhY3Rpb246ICdtaXNzaW5nIGZvbGRlciAod2lsbCBiZSBjcmVhdGVkKScsXG5cdFx0ICBzZWxlY3RlZDogdHJ1ZSxcblx0XHQgIGlzRm9sZGVyOiB0cnVlLFxuXHRcdH0pO1xuXHQgIH1cblx0fVxuXG5cdC8vIDNjKSBcdTIwMUNNb3ZlZFx1MjAxRCBkZXRlY3Rpb24gKHNraXAgYmxhY2tsaXN0ZWQpXG5cdGZvciAoY29uc3QgZiBvZiB0aGlzLm1hbmlmZXN0Q2FjaGUuZmlsZXMpIHtcblx0ICAvLyBcdTI1MDBcdTI1MDAgU0tJUCBhbnkgb3B0aW9uYWw6dHJ1ZSBmaWxlXG5cdCAgaWYgKGYub3B0aW9uYWwpIHtcblx0XHRjb250aW51ZTtcblx0ICB9XG5cblx0ICBjb25zdCBtYW5pZmVzdEtleSA9IGYua2V5O1xuXHQgIGNvbnN0IG1hbmlmZXN0UGF0aCA9IGYucGF0aDtcblx0ICBjb25zdCBjdXN0b20gPSB0aGlzLnNldHRpbmdzLmN1c3RvbVBhdGhzLmZpbmQoKGMpID0+IGMubWFuaWZlc3RLZXkgPT09IG1hbmlmZXN0S2V5KTtcblx0ICBjb25zdCBwcmV2UGF0aCA9IHRoaXMub2xkUGF0aHNCeUdpdGh1YlttYW5pZmVzdFBhdGhdO1xuXG5cdCAgY29uc3QgaXNJbkRlbnlGb2xkZXIgPSBkZW55TGlzdGVkRm9sZGVycy5zb21lKChmb2xkZXIpID0+XG5cdFx0bWFuaWZlc3RQYXRoLnN0YXJ0c1dpdGgoZm9sZGVyICsgJy8nKVxuXHQgICk7XG5cdCAgaWYgKGN1c3RvbT8uZG9VcGRhdGUgPT09IGZhbHNlIHx8IGlzSW5EZW55Rm9sZGVyKSB7XG5cdFx0Y29udGludWU7XG5cdCAgfVxuXHQgIGlmIChjdXN0b20gJiYgY3VzdG9tLnZhdWx0UGF0aCAmJiBjdXN0b20udmF1bHRQYXRoICE9PSBtYW5pZmVzdFBhdGgpIHtcblx0XHRjb250aW51ZTtcblx0ICB9XG5cdCAgaWYgKFxuXHRcdHByZXZQYXRoICYmXG5cdFx0cHJldlBhdGggIT09IG1hbmlmZXN0UGF0aCAmJlxuXHRcdCghY3VzdG9tIHx8IGN1c3RvbS52YXVsdFBhdGggPT09IG1hbmlmZXN0UGF0aClcblx0ICApIHtcblx0XHRwcmV2aWV3TGlzdC5wdXNoKHtcblx0XHQgIGZpbGVQYXRoOiBwcmV2UGF0aCxcblx0XHQgIGFjdGlvbjogYG1vdmVkIFx1MjE5MiAke21hbmlmZXN0UGF0aH1gLFxuXHRcdCAgc2VsZWN0ZWQ6IHRydWUsXG5cdFx0fSk7XG5cdCAgfVxuXHR9XG5cblx0cmV0dXJuIHByZXZpZXdMaXN0O1xuICB9XG5cbiAgXG4gIFxuICBcbiAgYXN5bmMgZm9yY2VVcGRhdGVQcmV2aWV3QW5kQ29uZmlybSgpIHtcblx0Ly8gMSkgQnVpbGQgdGhlIGZsYXQgbGlzdCBvZiBQcmV2aWV3SXRlbSBvYmplY3RzXG5cdGNvbnN0IHByZXZpZXdMaXN0ID0gYXdhaXQgdGhpcy5idWlsZEZvcmNlVXBkYXRlUHJldmlldygpO1xuICBcblx0Ly8gMikgU3BsaXQgdGhlIGl0ZW1zIGludG8gXHUyMDFDZGVueS1saXN0ZWRcdTIwMUQgdnMuIFx1MjAxQ25vcm1hbFx1MjAxRCBpdGVtc1xuXHQvLyAgICAoYnVpbGRGb3JjZVVwZGF0ZVByZXZpZXcgdXNlcyBhY3Rpb24gPSAnZGVueS1saXN0ZWQgXHUyMDEzIHdpbGwgbm90IHVwZGF0ZScpXG5cdGNvbnN0IGRlbnlJdGVtczogUHJldmlld0l0ZW1bXSA9IFtdO1xuXHRjb25zdCBub3JtYWxJdGVtczogUHJldmlld0l0ZW1bXSA9IFtdO1xuXHRmb3IgKGNvbnN0IGl0ZW0gb2YgcHJldmlld0xpc3QpIHtcblx0ICBpZiAoaXRlbS5hY3Rpb24uc3RhcnRzV2l0aCgnZGVueS1saXN0ZWQnKSkge1xuXHRcdGRlbnlJdGVtcy5wdXNoKGl0ZW0pO1xuXHQgIH0gZWxzZSB7XG5cdFx0bm9ybWFsSXRlbXMucHVzaChpdGVtKTtcblx0ICB9XG5cdH1cbiAgXG5cdC8vIDMpIENyZWF0ZSBhbmQgb3BlbiB0aGUgbW9kYWwgd2l0aCBib3RoIGxpc3RzXG5cdGNvbnN0IG1vZGFsID0gbmV3IChjbGFzcyBleHRlbmRzIE1vZGFsIHtcblx0ICBwbHVnaW46IFZWdW5kZXJsb3JlVG9vbGtpdFBsdWdpbjtcblx0ICBub3JtYWw6IFByZXZpZXdJdGVtW107XG5cdCAgZGVuaWVkOiBQcmV2aWV3SXRlbVtdO1xuICBcblx0ICBjb25zdHJ1Y3RvcihhcHA6IEFwcCwgbm9ybWFsOiBQcmV2aWV3SXRlbVtdLCBkZW5pZWQ6IFByZXZpZXdJdGVtW10pIHtcblx0XHRzdXBlcihhcHApO1xuXHRcdHRoaXMubm9ybWFsID0gbm9ybWFsO1xuXHRcdHRoaXMuZGVuaWVkID0gZGVuaWVkO1xuXHQgIH1cbiAgXG5cdCAgb25PcGVuKCkge1xuXHRcdC8vIFByZXZlbnQgY2xpY2tzIGZyb20gY2xvc2luZyBhbnl0aGluZyBiZWhpbmRcblx0XHR0aGlzLmNvbnRlbnRFbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiBlLnN0b3BQcm9wYWdhdGlvbigpKTtcblx0XHR0aGlzLmNvbnRlbnRFbC5lbXB0eSgpO1xuXHRcdHRoaXMudGl0bGVFbC5zZXRUZXh0KCdGb3JjZSBVcGRhdGUgUHJldmlldycpO1xuICBcblx0XHQvLyBJbnRybyBwYXJhZ3JhcGhcblx0XHR0aGlzLmNvbnRlbnRFbC5jcmVhdGVFbCgncCcsIHtcblx0XHQgIHRleHQ6XG5cdFx0XHQnVGhlIGZvbGxvd2luZyBpdGVtcyB3aWxsIGJlIHVwZGF0ZWQuIFVuY2hlY2sgYW55IGl0ZW1zIHlvdSBkbyBOT1Qgd2FudCB0byBjaGFuZ2UsIHRoZW4gY2xpY2sgXCJDb25maXJtIGFuZCBVcGRhdGVcIi4nLFxuXHRcdH0pO1xuICBcblx0XHQvLyA0KSBSZW5kZXIgXHUyMDFDbm9ybWFsXHUyMDFEIChub24tZGVueSkgaXRlbXMgd2l0aCBjaGVja2JveGVzXG5cdFx0aWYgKHRoaXMubm9ybWFsLmxlbmd0aCkge1xuXHRcdCAgY29uc3Qgbm9ybWFsQ29udGFpbmVyID0gdGhpcy5jb250ZW50RWwuY3JlYXRlRWwoJ2RpdicpO1xuXHRcdCAgT2JqZWN0LmFzc2lnbihub3JtYWxDb250YWluZXIuc3R5bGUsIHtcblx0XHRcdG1heEhlaWdodDogJzMwMHB4Jyxcblx0XHRcdG92ZXJmbG93WTogJ2F1dG8nLFxuXHRcdFx0bWFyZ2luVG9wOiAnMWVtJyxcblx0XHQgIH0pO1xuICBcblx0XHQgIHRoaXMubm9ybWFsLmZvckVhY2goKGl0ZW0pID0+IHtcblx0XHRcdGNvbnN0IHJvdyA9IG5vcm1hbENvbnRhaW5lci5jcmVhdGVEaXYoKTtcblx0XHRcdE9iamVjdC5hc3NpZ24ocm93LnN0eWxlLCB7XG5cdFx0XHQgIGRpc3BsYXk6ICdmbGV4Jyxcblx0XHRcdCAgYWxpZ25JdGVtczogJ2ZsZXgtc3RhcnQnLFxuXHRcdFx0ICBqdXN0aWZ5Q29udGVudDogJ3NwYWNlLWJldHdlZW4nLFxuXHRcdFx0ICBwYWRkaW5nOiAnNnB4IDAnLFxuXHRcdFx0ICBmb250RmFtaWx5OiAnbW9ub3NwYWNlJyxcblx0XHRcdH0pO1xuICBcblx0XHRcdC8vIExlZnQ6IGZpbGUgcGF0aCArIGFjdGlvbiBub3RlXG5cdFx0XHRjb25zdCBsYWJlbCA9IHJvdy5jcmVhdGVEaXYoKTtcblx0XHRcdGxhYmVsLnN0eWxlLmZsZXhHcm93ID0gJzEnO1xuXHRcdFx0bGFiZWwuc3R5bGUuZGlzcGxheSA9ICdmbGV4Jztcblx0XHRcdGxhYmVsLnN0eWxlLmZsZXhEaXJlY3Rpb24gPSAnY29sdW1uJztcbiAgXG5cdFx0XHRjb25zdCBsYWJlbFdyYXBwZXIgPSBsYWJlbC5jcmVhdGVEaXYoKTtcblx0XHRcdGxhYmVsV3JhcHBlci50ZXh0Q29udGVudCA9IGl0ZW0uZmlsZVBhdGg7XG4gIFxuXHRcdFx0Y29uc3Qgbm90ZSA9IGxhYmVsLmNyZWF0ZURpdih7IHRleHQ6IGl0ZW0uYWN0aW9uIH0pO1xuXHRcdFx0bm90ZS5zdHlsZS5mb250U2l6ZSA9ICcxM3B4Jztcblx0XHRcdG5vdGUuc3R5bGUuY29sb3IgPSAndmFyKC0tdGV4dC1tdXRlZCknO1xuXHRcdFx0bm90ZS5zdHlsZS5mb250U3R5bGUgPSAnaXRhbGljJztcbiAgXG5cdFx0XHQvLyBSaWdodDogY2hlY2tib3hcblx0XHRcdGNvbnN0IGNoZWNrYm94ID0gcm93LmNyZWF0ZUVsKCdpbnB1dCcsIHsgdHlwZTogJ2NoZWNrYm94JyB9KTtcblx0XHRcdGNoZWNrYm94LmNoZWNrZWQgPSBpdGVtLnNlbGVjdGVkO1xuXHRcdFx0Y2hlY2tib3gub25jaGFuZ2UgPSAoKSA9PiB7XG5cdFx0XHQgIGl0ZW0uc2VsZWN0ZWQgPSBjaGVja2JveC5jaGVja2VkO1xuXHRcdFx0fTtcblx0XHQgIH0pO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRjb25zdCBub0NhbmRpZGF0ZXMgPSB0aGlzLmNvbnRlbnRFbC5jcmVhdGVFbCgnZGl2Jyk7XG5cdFx0XHRPYmplY3QuYXNzaWduKG5vQ2FuZGlkYXRlcy5zdHlsZSwge1xuXHRcdFx0ICBkaXNwbGF5OiAnaW5saW5lLWJsb2NrJyxcblx0XHRcdCAgZm9udEZhbWlseTogJ21vbm9zcGFjZScsXG5cdFx0XHQgIGZvbnRTdHlsZTogJ2l0YWxpYycsXG5cdFx0XHQgIG1hcmdpblRvcDogJzAuNWVtJyxcblx0XHRcdH0pO1xuXHRcdFx0bm9DYW5kaWRhdGVzLnRleHRDb250ZW50ID0gJ05vIGZvcmNlLXVwZGF0ZSBjYW5kaWRhdGVzLic7XG5cdFx0fVxuICBcblx0XHQvLyA1KSBSZW5kZXIgXHUyMDFDZGVueS1saXN0ZWRcdTIwMUQgaXRlbXMgaW5zaWRlIGEgY29sbGFwc2VkIDxkZXRhaWxzPlxuXHRcdGlmICh0aGlzLmRlbmllZC5sZW5ndGgpIHtcblx0XHQgIGNvbnN0IGRlbnlEZXRhaWxzID0gdGhpcy5jb250ZW50RWwuY3JlYXRlRWwoJ2RldGFpbHMnLCB7IGNsczogJ3ZrLXNlY3Rpb24nIH0pO1xuXHRcdCAgZGVueURldGFpbHMub3BlbiA9IGZhbHNlO1xuICBcblx0XHQgIGNvbnN0IHN1bW1hcnkgPSBkZW55RGV0YWlscy5jcmVhdGVFbCgnc3VtbWFyeScsIHsgY2xzOiAndmstc2VjdGlvbi1oZWFkZXInIH0pO1xuXHRcdCAgT2JqZWN0LmFzc2lnbihzdW1tYXJ5LnN0eWxlLCB7XG5cdFx0XHRjdXJzb3I6ICdwb2ludGVyJyxcblx0XHRcdGRpc3BsYXk6ICdmbGV4Jyxcblx0XHRcdGNvbG9yOiAndmFyKC0tdGV4dC1mYWludCknLFxuXHRcdFx0YWxpZ25JdGVtczogJ2NlbnRlcicsXG5cdFx0XHRnYXA6ICcwLjVlbScsXG5cdFx0XHRtYXJnaW5Ub3A6ICcxZW0nLFxuXHRcdCAgfSk7XG5cdFx0ICBzdW1tYXJ5LmNyZWF0ZUVsKCdzcGFuJywgeyB0ZXh0OiBgRGVueS1MaXN0IEZpbGVzICgke3RoaXMuZGVuaWVkLmxlbmd0aH0pYCB9KTtcbiAgXG5cdFx0ICAvLyBSb3RhdGluZyBcdTIwMUNWVlx1MjAxRCBpY29uIG9uIGV4cGFuZC9jb2xsYXBzZVxuXHRcdCAgY29uc3QgdG9nZ2xlSWNvbiA9IHN1bW1hcnkuY3JlYXRlRWwoJ3NwYW4nLCB7IHRleHQ6ICdWVicsIGNsczogJ3ZrLXRvZ2dsZS1pY29uJyB9KTtcblx0XHQgIE9iamVjdC5hc3NpZ24odG9nZ2xlSWNvbi5zdHlsZSwge1xuXHRcdFx0Zm9udFdlaWdodDogJ2JvbGQnLFxuXHRcdFx0ZGlzcGxheTogJ2lubGluZS1ibG9jaycsXG5cdFx0XHR0cmFuc2l0aW9uOiAndHJhbnNmb3JtIDAuMnMgZWFzZScsXG5cdFx0XHR0cmFuc2Zvcm1PcmlnaW46ICc1MCUgNTAlJyxcblx0XHRcdHVzZXJTZWxlY3Q6ICdub25lJyxcblx0XHRcdHRyYW5zZm9ybTogJ3JvdGF0ZSgxODBkZWcpJyxcblx0XHQgIH0pO1xuXHRcdCAgZGVueURldGFpbHMub250b2dnbGUgPSAoKSA9PiB7XG5cdFx0XHR0b2dnbGVJY29uLnN0eWxlLnRyYW5zZm9ybSA9IGRlbnlEZXRhaWxzLm9wZW4gPyAncm90YXRlKDBkZWcpJyA6ICdyb3RhdGUoMTgwZGVnKSc7XG5cdFx0ICB9O1xuICBcblx0XHQgIC8vIEJvZHkgb2YgPGRldGFpbHM+IFx1MjAxNCBlYWNoIGRlbnktbGlzdGVkIGl0ZW0gaXMgZmFpbnQgYW5kIGRpc2FibGVkXG5cdFx0ICBjb25zdCBkZW55Qm9keSA9IGRlbnlEZXRhaWxzLmNyZWF0ZURpdih7IGNsczogJ3ZrLXNlY3Rpb24tYm9keScgfSk7XG5cdFx0ICBkZW55Qm9keS5zdHlsZS5wYWRkaW5nTGVmdCA9ICcxZW0nO1xuICBcblx0XHQgIHRoaXMuZGVuaWVkLmZvckVhY2goKGl0ZW0pID0+IHtcblx0XHRcdGNvbnN0IHJvdyA9IGRlbnlCb2R5LmNyZWF0ZURpdigpO1xuXHRcdFx0T2JqZWN0LmFzc2lnbihyb3cuc3R5bGUsIHtcblx0XHRcdCAgZGlzcGxheTogJ2ZsZXgnLFxuXHRcdFx0ICBhbGlnbkl0ZW1zOiAnZmxleC1zdGFydCcsXG5cdFx0XHQgIGp1c3RpZnlDb250ZW50OiAnc3BhY2UtYmV0d2VlbicsXG5cdFx0XHQgIHBhZGRpbmc6ICc2cHggMCcsXG5cdFx0XHQgIGZvbnRGYW1pbHk6ICdtb25vc3BhY2UnLFxuXHRcdFx0ICBjb2xvcjogJ3ZhcigtLXRleHQtZmFpbnQpJyxcblx0XHRcdCAgZm9udFN0eWxlOiAnaXRhbGljJyxcblx0XHRcdH0pO1xuICBcblx0XHRcdGNvbnN0IGxhYmVsV3JhcHBlciA9IHJvdy5jcmVhdGVEaXYoKTtcblx0XHRcdGxhYmVsV3JhcHBlci50ZXh0Q29udGVudCA9IGl0ZW0uZmlsZVBhdGg7XG5cdFx0XHRsYWJlbFdyYXBwZXIuc3R5bGUudGV4dERlY29yYXRpb24gPSAnbGluZS10aHJvdWdoJztcbiAgXG5cdFx0XHRjb25zdCBub3RlID0gcm93LmNyZWF0ZURpdih7IHRleHQ6IGl0ZW0uYWN0aW9uIH0pO1xuXHRcdFx0bm90ZS5zdHlsZS5mb250U2l6ZSA9ICcxM3B4Jztcblx0XHRcdG5vdGUuc3R5bGUuY29sb3IgPSAndmFyKC0tdGV4dC1mYWludCknO1xuXHRcdFx0bm90ZS5zdHlsZS5mb250U3R5bGUgPSAnaXRhbGljJztcbiAgXG5cdFx0XHQvLyBEZW55LWxpc3RlZCBjaGVja2JveCBpcyBkaXNhYmxlZFxuXHRcdFx0Y29uc3QgY2hlY2tib3ggPSByb3cuY3JlYXRlRWwoJ2lucHV0JywgeyB0eXBlOiAnY2hlY2tib3gnIH0pO1xuXHRcdFx0Y2hlY2tib3guY2hlY2tlZCA9IGl0ZW0uc2VsZWN0ZWQ7XG5cdFx0XHRjaGVja2JveC5kaXNhYmxlZCA9IHRydWU7XG5cdFx0XHRjaGVja2JveC50aXRsZSA9ICdUaGlzIGl0ZW0gaXMgZGVueS1saXN0ZWQnO1xuXHRcdCAgfSk7XG5cdFx0fVxuXG4gICAgaWYgKHRoaXMucGx1Z2luLnNldHRpbmdzLnJlcGFyc2VHYW1lc2V0cykge1xuICAgICAgICB0aGlzLmNvbnRlbnRFbFxuICAgICAgICAgIC5jcmVhdGVEaXYoeyBjbHM6ICdtb2QtYXV4LXRleHQnIH0pXG4gICAgICAgICAgLnNldFRleHQoJ1x1RDgzRFx1REQwNCBSZWZyZXNoaW5nIEdhbWVzZXQgRGF0YScpO1xuICAgICAgfVxuXG5cdFx0Ly8gNikgQnV0dG9ucyBhdCB0aGUgYm90dG9tXG5cdFx0Y29uc3QgYnV0dG9uUm93ID0gdGhpcy5jb250ZW50RWwuY3JlYXRlRWwoJ2RpdicpO1xuXHRcdE9iamVjdC5hc3NpZ24oYnV0dG9uUm93LnN0eWxlLCB7XG5cdFx0ICBkaXNwbGF5OiAnZmxleCcsXG5cdFx0ICBqdXN0aWZ5Q29udGVudDogJ2ZsZXgtZW5kJyxcblx0XHQgIGdhcDogJzAuNWVtJyxcblx0XHQgIG1hcmdpblRvcDogJzEuNWVtJyxcblx0XHR9KTtcbiAgXG5cdFx0Y29uc3QgY2FuY2VsQnRuID0gYnV0dG9uUm93LmNyZWF0ZUVsKCdidXR0b24nLCB7IHRleHQ6ICdDYW5jZWwnIH0pO1xuXHRcdGNhbmNlbEJ0bi5vbmNsaWNrID0gKCkgPT4gdGhpcy5jbG9zZSgpO1xuICBcblx0XHRjb25zdCBjb25maXJtQnRuID0gYnV0dG9uUm93LmNyZWF0ZUVsKCdidXR0b24nLCB7XG5cdFx0ICB0ZXh0OiAnQ29uZmlybSBhbmQgVXBkYXRlJyxcblx0XHQgIGNsczogJ21vZC1jdGEnLFxuXHRcdH0pO1xuXHRcdGNvbmZpcm1CdG4ub25jbGljayA9IGFzeW5jICgpID0+IHtcblx0XHQgIHRoaXMuY2xvc2UoKTtcblx0XHQgIC8vIFBhc3MgZXZlcnl0aGluZyBpbnRvIHBlcmZvcm1Gb3JjZVVwZGF0ZVdpdGhTZWxlY3Rpb247IGRlbnktbGlzdGVkIGl0ZW1zIHdpbGwgYmUgc2tpcHBlZFxuXHRcdCAgYXdhaXQgdGhpcy5wbHVnaW4ucGVyZm9ybUZvcmNlVXBkYXRlV2l0aFNlbGVjdGlvbihbLi4udGhpcy5ub3JtYWwsIC4uLnRoaXMuZGVuaWVkXSk7XG5cdFx0fTtcblx0ICB9XG4gIFxuXHQgIG9uQ2xvc2UoKSB7XG5cdFx0dGhpcy5jb250ZW50RWwuZW1wdHkoKTtcblx0ICB9XG5cdH0pKHRoaXMuYXBwLCBub3JtYWxJdGVtcywgZGVueUl0ZW1zKTtcbiAgXG5cdC8vIEF0dGFjaCBwbHVnaW4gcG9pbnRlciBhbmQgb3BlblxuXHQobW9kYWwgYXMgYW55KS5wbHVnaW4gPSB0aGlzO1xuXHRtb2RhbC5vcGVuKCk7XG4gIH1cbiAgXG5cbiAgYXN5bmMgdXBkYXRlRW50cnlGcm9tTWFuaWZlc3QoZW50cnk6IE1hbmlmZXN0RmlsZUVudHJ5LCBmb3JjZTogYm9vbGVhbiA9IGZhbHNlKSB7XG4gICAgY29uc3QgY3VzdG9tID0gdGhpcy5zZXR0aW5ncy5jdXN0b21QYXRocy5maW5kKChjKSA9PiBjLm1hbmlmZXN0S2V5ID09PSBlbnRyeS5rZXkpO1xuICAgIGlmIChjdXN0b20/LmRvVXBkYXRlID09PSBmYWxzZSkge1xuICAgICAgY29uc29sZS5sb2coYFx1MjNFRFx1RkUwRiBTa2lwcGluZyAke2VudHJ5LmtleX0gKCR7ZW50cnkuZGlzcGxheU5hbWV9KSBcdTIwMTQgYmxhY2tsaXN0ZWRgKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBmaW5hbFZhdWx0UGF0aCA9IGN1c3RvbT8udmF1bHRQYXRoID8/IHRoaXMucmVzb2x2ZVZhdWx0UGF0aChlbnRyeS5wYXRoKTtcbiAgICBpZiAoIWZvcmNlICYmIChhd2FpdCB0aGlzLmZpbGVDYWNoZU1hbmFnZXIuaXNVcFRvRGF0ZShmaW5hbFZhdWx0UGF0aCkpKSB7XG4gICAgICBjb25zb2xlLmxvZyhgXHUyNzE0XHVGRTBGIEFscmVhZHkgdXAgdG8gZGF0ZTogJHtlbnRyeS5kaXNwbGF5TmFtZX1gKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCB1cmwgPSBgaHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tL3NsYW13aXNlMDAwMS92dnVuZGVybG9yZS10b29sa2l0LWZ1bGwvbWFpbi8ke2VudHJ5LnBhdGh9YDtcbiAgICB0cnkge1xuICAgICAgY29uc3QgcmVzID0gYXdhaXQgZmV0Y2godXJsKTtcbiAgICAgIGNvbnN0IHRleHQgPSBhd2FpdCByZXMudGV4dCgpO1xuICAgICAgYXdhaXQgdGhpcy5hcHAudmF1bHQuYWRhcHRlci53cml0ZShmaW5hbFZhdWx0UGF0aCwgdGV4dCk7XG4gICAgICBhd2FpdCB0aGlzLmZpbGVDYWNoZU1hbmFnZXIudXBkYXRlQ2FjaGUoZmluYWxWYXVsdFBhdGgsIHRleHQsIGVudHJ5LnBhdGgpO1xuICAgICAgY29uc29sZS5sb2coYFx1MjcwNSBVcGRhdGVkICR7ZW50cnkuZGlzcGxheU5hbWV9IFx1MjE5MiAke2ZpbmFsVmF1bHRQYXRofWApO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoYFx1Mjc0QyBFcnJvciB1cGRhdGluZyAke2VudHJ5LmRpc3BsYXlOYW1lfTpgLCBlKTtcbiAgICB9XG4gIH1cblxuICBhc3luYyBwZXJmb3JtRm9yY2VVcGRhdGVXaXRoU2VsZWN0aW9uKHByZXZpZXdMaXN0OiBQcmV2aWV3SXRlbVtdKSB7XG4gICAgaWYgKHRoaXMuc2V0dGluZ3MuYXV0b0JhY2t1cEJlZm9yZVVwZGF0ZSkge1xuICAgICAgLy8gXHUyMDI2ICh5b3VyIGV4aXN0aW5nIGJhY2t1cCBjb2RlKSBcdTIwMjZcbiAgICB9XG5cbiAgICB0aGlzLnNldHRpbmdzLmJhY2t1cEZpbGVzID0ge307XG4gICAgYXdhaXQgdGhpcy5zYXZlU2V0dGluZ3MoKTtcblxuICAgIHRyeSB7XG4gICAgICAvLyBcdTI0NjAgRmlsdGVyIG91dCBmb2xkZXJzLCB1bmNoZWNrZWQsIGFuZCBkZW55LWxpc3RlZDpcbiAgICAgIGNvbnN0IHRvVXBkYXRlID0gcHJldmlld0xpc3QuZmlsdGVyKFxuICAgICAgICAoaXRlbSkgPT5cbiAgICAgICAgICBpdGVtLnNlbGVjdGVkICYmXG4gICAgICAgICAgIWl0ZW0uaXNGb2xkZXIgJiZcbiAgICAgICAgICAhdGhpcy5zZXR0aW5ncy5jdXN0b21QYXRocy5zb21lKFxuICAgICAgICAgICAgKGMpID0+IGMudmF1bHRQYXRoID09PSBpdGVtLmZpbGVQYXRoICYmIGMuZG9VcGRhdGUgPT09IGZhbHNlXG4gICAgICAgICAgKVxuICAgICAgKTtcblxuICAgICAgLy8gXHUyNDYxIFVwZGF0ZSBlYWNoIHNlbGVjdGVkIGZpbGVcbiAgICAgIGZvciAoY29uc3QgaXRlbSBvZiB0b1VwZGF0ZSkge1xuICAgICAgICBjb25zdCBlbnRyeSA9IHRoaXMubWFuaWZlc3RDYWNoZS5maWxlcy5maW5kKFxuICAgICAgICAgIChmKSA9PiB0aGlzLnJlc29sdmVWYXVsdFBhdGgoZi5wYXRoKSA9PT0gaXRlbS5maWxlUGF0aFxuICAgICAgICApO1xuICAgICAgICBpZiAoIWVudHJ5KSB7XG4gICAgICAgICAgY29uc29sZS53YXJuKGBcdTI2QTBcdUZFMEYgQ291bGQgbm90IG1hdGNoIHByZXZpZXcgaXRlbSB0byBtYW5pZmVzdDogJHtpdGVtLmZpbGVQYXRofWApO1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIGF3YWl0IHRoaXMudXBkYXRlRW50cnlGcm9tTWFuaWZlc3QoZW50cnksIHRydWUpO1xuICAgICAgfVxuXG4gICAgICAvLyBcdTI0NjIgRW5zdXJlIGFsbCBtYW5pZmVzdCBmb2xkZXJzIGV4aXN0XG4gICAgICBmb3IgKGNvbnN0IGVudHJ5IG9mIHRoaXMubWFuaWZlc3RDYWNoZS5mb2xkZXJzKSB7XG4gICAgICAgIGlmICghKGF3YWl0IHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXIuZXhpc3RzKGVudHJ5LnBhdGgpKSkge1xuICAgICAgICAgIGF3YWl0IHRoaXMuYXBwLnZhdWx0LmNyZWF0ZUZvbGRlcihlbnRyeS5wYXRoKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyA0KSBCdW1wIHZlcnNpb25cbiAgICAgIGF3YWl0IHRoaXMudXBkYXRlVmVyc2lvbkZpbGUoKTtcbiAgICAgIHRoaXMuc2V0dGluZ3MuaW5zdGFsbGVkVmVyc2lvbiA9IHRoaXMuc2V0dGluZ3MubGF0ZXN0VG9vbGtpdFZlcnNpb24gPz8gJ3Vua25vd24nO1xuICAgICAgdGhpcy5zZXR0aW5ncy5sYXN0Rm9yY2VVcGRhdGUgPSBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCk7XG4gICAgICBhd2FpdCB0aGlzLnNhdmVTZXR0aW5ncygpO1xuXG4gICAgICBuZXcgTm90aWNlKCdcdTI3MDUgVG9vbGtpdCBmb3JjZVx1MjAxMHVwZGF0ZWQgd2l0aCB5b3VyIHNlbGVjdGlvbnMuJyk7XG5cbiAgICAgICAgICBpZiAodGhpcy5zZXR0aW5ncy5yZXBhcnNlR2FtZXNldHMpIHtcbiAgICAgIG5ldyBOb3RpY2UoJ1x1RDgzRFx1REQwNCBSZWZyZXNoaW5nIEdhbWUgU2V0IERhdGFcdTIwMjYnKTtcbiAgICAgIGF3YWl0IHRoaXMucmVmcmVzaEdhbWVTZXREYXRhKCk7XG4gICAgfVxuXG4gICAgICBpZiAodGhpcy5zZXR0aW5nc1RhYikge1xuICAgICAgICBhd2FpdCB0aGlzLnNldHRpbmdzVGFiLnVwZGF0ZVZlcnNpb25EaXNwbGF5KCk7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdcdTI3NEMgRm9yY2UgdXBkYXRlIGZhaWxlZC4gVmVyc2lvbiBub3QgY2hhbmdlZC4nLCBlcnIpO1xuICAgICAgbmV3IE5vdGljZSgnXHUyNzRDIE9uZSBvciBtb3JlIGZpbGVzIGZhaWxlZC4gVmVyc2lvbiBOT1QgdXBkYXRlZC4nKTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5zZXR0aW5ncy5oaWdobGlnaHRFbmFibGVkKSB7XG4gICAgICB0aGlzLmVuYWJsZUhpZ2hsaWdodCgpO1xuICAgIH1cbiAgfVxuXG4gIC8vIFx1MjUwMFx1MjUwMFx1MjUwMCBTSU5HTEUtRklMRSBVUERBVEUgKHdpdGggR2l0SHViIEFQSSArIHJhdyBmYWxsYmFjaykgXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXG5cbiAgYXN5bmMgdXBkYXRlU2luZ2xlRmlsZUZyb21HaXRIdWIoXG4gICAgeyBnaXRodWJQYXRoLCB2YXVsdFBhdGggfTogeyBnaXRodWJQYXRoOiBzdHJpbmc7IHZhdWx0UGF0aDogc3RyaW5nIH0sXG4gICAgZm9yY2U6IGJvb2xlYW4gPSBmYWxzZVxuICApIHtcbiAgICBpZiAodGhpcy5zZXR0aW5ncy5jdXN0b21pemVVcGRhdGVzKSB7XG4gICAgICB2YXVsdFBhdGggPSB0aGlzLnJlc29sdmVWYXVsdFBhdGgoZ2l0aHViUGF0aCk7XG4gICAgICBjb25zdCBjdXN0b20gPSB0aGlzLnNldHRpbmdzLmN1c3RvbVBhdGhzLmZpbmQoKGMpID0+IGMubWFuaWZlc3RLZXkgPT09IGdpdGh1YlBhdGgpO1xuICAgICAgaWYgKGN1c3RvbT8uZG9VcGRhdGUgPT09IGZhbHNlKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgdmF1bHRQYXRoID0gZ2l0aHViUGF0aDtcbiAgICB9XG5cbiAgICBpZiAoIXZhdWx0UGF0aCkge1xuICAgICAgY29uc29sZS5lcnJvcihgXHUyNzRDIE5vIHZhbGlkIHZhdWx0IHBhdGggcmVzb2x2ZWQgZm9yICR7Z2l0aHViUGF0aH1gKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyAxKSBIYW5kbGUgbG9jYWwgcmVuYW1lcyBmaXJzdFxuICAgIGNvbnN0IG9sZFZhdWx0ID0gdGhpcy5vbGRQYXRoc0J5R2l0aHViW2dpdGh1YlBhdGhdO1xuICAgIGlmIChvbGRWYXVsdCAmJiBvbGRWYXVsdCAhPT0gdmF1bHRQYXRoKSB7XG4gICAgICBpZiAoYXdhaXQgdGhpcy5hcHAudmF1bHQuYWRhcHRlci5leGlzdHModmF1bHRQYXRoKSkge1xuICAgICAgICBjb25zdCBzdHJheSA9IGF3YWl0IHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXIucmVhZCh2YXVsdFBhdGgpO1xuICAgICAgICBhd2FpdCB0aGlzLmJhY2t1cEZpbGUodmF1bHRQYXRoLCBzdHJheSk7XG4gICAgICAgIGF3YWl0IHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXIucmVtb3ZlKHZhdWx0UGF0aCk7XG4gICAgICB9XG4gICAgICBjb25zdCBvbGRGaWxlID0gdGhpcy5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKG9sZFZhdWx0KTtcbiAgICAgIGlmIChvbGRGaWxlIGluc3RhbmNlb2YgVEZpbGUpIHtcbiAgICAgICAgYXdhaXQgdGhpcy5hcHAudmF1bHQucmVuYW1lKG9sZEZpbGUsIHZhdWx0UGF0aCk7XG4gICAgICAgIGNvbnN0IG5ld0NvbnRlbnQgPSBhd2FpdCB0aGlzLmFwcC52YXVsdC5hZGFwdGVyLnJlYWQodmF1bHRQYXRoKTtcbiAgICAgICAgYXdhaXQgdGhpcy5maWxlQ2FjaGVNYW5hZ2VyLnVwZGF0ZUNhY2hlKHZhdWx0UGF0aCwgbmV3Q29udGVudCwgZ2l0aHViUGF0aCk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyAyKSBFeGlzdGVuY2UsIGJhY2t1cCAmIHNraXAgbG9naWNcbiAgICBjb25zdCBmaWxlRXhpc3RzID0gYXdhaXQgdGhpcy5hcHAudmF1bHQuYWRhcHRlci5leGlzdHModmF1bHRQYXRoKTtcbiAgICBpZiAoZm9yY2UgJiYgZmlsZUV4aXN0cykge1xuICAgICAgY29uc3QgY3VycmVudCA9IGF3YWl0IHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXIucmVhZCh2YXVsdFBhdGgpO1xuICAgICAgYXdhaXQgdGhpcy5iYWNrdXBGaWxlKHZhdWx0UGF0aCwgY3VycmVudCk7XG4gICAgfVxuICAgIGlmICghZm9yY2UgJiYgZmlsZUV4aXN0cyAmJiAoYXdhaXQgdGhpcy5maWxlQ2FjaGVNYW5hZ2VyLmlzVXBUb0RhdGUodmF1bHRQYXRoKSkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyAzKSBGZXRjaCB2aWEgR2l0SHViIEFQSSwgZmFsbGJhY2sgdG8gcmF3XG4gICAgY29uc3QgYXBpVXJsID0gZW5jb2RlVVJJKFxuICAgICAgYGh0dHBzOi8vYXBpLmdpdGh1Yi5jb20vcmVwb3Mvc2xhbXdpc2UwMDAxL1ZWdW5kZXJsb3JlLVRvb2xraXQtRnVsbC9jb250ZW50cy8ke2dpdGh1YlBhdGh9P3JlZj1tYWluYFxuICAgICk7XG4gICAgdHJ5IHtcbiAgICAgIGxldCByZXMgPSBhd2FpdCBmZXRjaChhcGlVcmwpO1xuICAgICAgaWYgKHJlcy5zdGF0dXMgPT09IDQwNCkge1xuICAgICAgICBjb25zdCByYXdVcmwgPSBlbmNvZGVVUkkoXG4gICAgICAgICAgYGh0dHBzOi8vcmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbS9zbGFtd2lzZTAwMDEvVlZ1bmRlcmxvcmUtVG9vbGtpdC1GdWxsL21haW4vJHtnaXRodWJQYXRofWBcbiAgICAgICAgKTtcbiAgICAgICAgcmVzID0gYXdhaXQgZmV0Y2gocmF3VXJsKTtcbiAgICAgICAgaWYgKCFyZXMub2spIHRocm93IG5ldyBFcnJvcihgUmF3IGZldGNoIGZhaWxlZDogJHtyZXMuc3RhdHVzVGV4dH1gKTtcbiAgICAgICAgY29uc3QgY29udGVudCA9IGF3YWl0IHJlcy50ZXh0KCk7XG4gICAgICAgIGlmIChmaWxlRXhpc3RzKSB7XG4gICAgICAgICAgYXdhaXQgdGhpcy5hcHAudmF1bHQuYWRhcHRlci53cml0ZSh2YXVsdFBhdGgsIGNvbnRlbnQpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGF3YWl0IHRoaXMuYXBwLnZhdWx0LmNyZWF0ZSh2YXVsdFBhdGgsIGNvbnRlbnQpO1xuICAgICAgICB9XG4gICAgICAgIGF3YWl0IHRoaXMuZmlsZUNhY2hlTWFuYWdlci51cGRhdGVDYWNoZSh2YXVsdFBhdGgsIGNvbnRlbnQsIGdpdGh1YlBhdGgpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGlmICghcmVzLm9rKSB0aHJvdyBuZXcgRXJyb3IoYEdpdEh1YiBBUEkgZXJyb3I6ICR7cmVzLnN0YXR1c1RleHR9YCk7XG4gICAgICBjb25zdCB7IGRvd25sb2FkX3VybCB9ID0gKGF3YWl0IHJlcy5qc29uKCkpIGFzIHsgZG93bmxvYWRfdXJsOiBzdHJpbmcgfTtcbiAgICAgIGNvbnN0IGNvbnRlbnQgPSBhd2FpdCAoYXdhaXQgZmV0Y2goZG93bmxvYWRfdXJsKSkudGV4dCgpO1xuICAgICAgaWYgKGZpbGVFeGlzdHMpIHtcbiAgICAgICAgYXdhaXQgdGhpcy5hcHAudmF1bHQuYWRhcHRlci53cml0ZSh2YXVsdFBhdGgsIGNvbnRlbnQpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgYXdhaXQgdGhpcy5hcHAudmF1bHQuY3JlYXRlKHZhdWx0UGF0aCwgY29udGVudCk7XG4gICAgICB9XG4gICAgICBhd2FpdCB0aGlzLmZpbGVDYWNoZU1hbmFnZXIudXBkYXRlQ2FjaGUodmF1bHRQYXRoLCBjb250ZW50LCBnaXRodWJQYXRoKTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICBjb25zb2xlLmVycm9yKGBcdTI3NEMgRmFpbGVkIHRvIHVwZGF0ZSAke3ZhdWx0UGF0aH1gLCBlKTtcbiAgICB9XG4gIH1cblxuICAvLyBcdTI1MDBcdTI1MDBcdTI1MDAgUFJFVklFVyArIFJFTU9URS1CQVNFTElORSArIERJRkYgXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXG5cbiAgYXN5bmMgcHJldmlld1VwZGF0ZXNNb2RhbCgpIHtcblx0Ly8gXHUyMDFDTG9hZGluZ1x1MjAyNlx1MjAxRCBwbGFjZWhvbGRlciB3aGlsZSBzeW5jaW5nXG5cdGNvbnN0IGxvYWRpbmcgPSBuZXcgKGNsYXNzIGV4dGVuZHMgTW9kYWwge1xuXHQgIGNvbnN0cnVjdG9yKGFwcDogQXBwKSB7XG5cdFx0c3VwZXIoYXBwKTtcblx0ICB9XG5cdCAgb25PcGVuKCkge1xuXHRcdHRoaXMuY29udGVudEVsLmVtcHR5KCk7XG5cdFx0dGhpcy5jb250ZW50RWxcblx0XHQgIC5jcmVhdGVEaXYoe1xuXHRcdFx0dGV4dDogJ1x1RDgzRFx1REQwNCBDaGVja2luZyBmb3IgdXBkYXRlc1x1MjAyNicsXG5cdFx0XHRjbHM6ICdtb2Qtd2FybmluZycsXG5cdFx0ICB9KVxuXHRcdCAgLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IGUuc3RvcFByb3BhZ2F0aW9uKCkpO1xuXHQgIH1cblx0fSkodGhpcy5hcHApO1xuICBcblx0bG9hZGluZy5vcGVuKCk7XG5cdGF3YWl0IHRoaXMuc3luY01hbmlmZXN0KCk7XG5cdGF3YWl0IHRoaXMuZmV0Y2hSZW1vdGVCYXNlbGluZSgpO1xuXHQvLyBidWlsZFVwZGF0ZVByZXZpZXcoKSBub3cgcmV0dXJucyBvbmx5IFx1MjAxQ3JlYWxcdTIwMUQgZGlmZnMgKG5vIHN0YWxlIGRlbnlcdTIwMTBsaXN0KVxuXHRjb25zdCBkaWZmcyA9IGF3YWl0IHRoaXMuYnVpbGRVcGRhdGVQcmV2aWV3KCk7XG5cdGxvYWRpbmcuY2xvc2UoKTtcbiAgXG5cdC8vIFNwbGl0IG91dCBkZW55XHUyMDEwbGlzdGVkIGxpbmVzIHZzLiBldmVyeXRoaW5nIGVsc2Vcblx0Y29uc3QgZGVueUxpc3RlZExpbmVzOiBzdHJpbmdbXSA9IFtdO1xuXHRjb25zdCBub3JtYWxMaW5lczogc3RyaW5nW10gPSBbXTtcbiAgXG5cdGZvciAoY29uc3QgZCBvZiBkaWZmcykge1xuXHQgIGlmIChkLnN0YXJ0c1dpdGgoJ1x1Mjc0QyBkZW55XHUyMDEwbGlzdGVkJykpIHtcblx0XHRkZW55TGlzdGVkTGluZXMucHVzaChkKTtcblx0ICB9IGVsc2Uge1xuXHRcdG5vcm1hbExpbmVzLnB1c2goZCk7XG5cdCAgfVxuXHR9XG4gIFxuXHQvLyBOb3cgY3JlYXRlIHRoZSBtb2RhbFxuXHRjb25zdCBtb2RhbCA9IG5ldyAoY2xhc3MgZXh0ZW5kcyBNb2RhbCB7XG5cdCAgcGx1Z2luOiBWVnVuZGVybG9yZVRvb2xraXRQbHVnaW47XG5cdCAgbm9ybWFsOiBzdHJpbmdbXTtcblx0ICBkZW5pZWQ6IHN0cmluZ1tdO1xuICBcblx0ICBjb25zdHJ1Y3RvcihhcHA6IEFwcCwgbm9ybWFsOiBzdHJpbmdbXSwgZGVuaWVkOiBzdHJpbmdbXSkge1xuXHRcdHN1cGVyKGFwcCk7XG5cdFx0dGhpcy5ub3JtYWwgPSBub3JtYWw7XG5cdFx0dGhpcy5kZW5pZWQgPSBkZW5pZWQ7XG5cdCAgfVxuICBcblx0ICBvbk9wZW4oKSB7XG5cdFx0dGhpcy5jb250ZW50RWwuZW1wdHkoKTtcblx0XHR0aGlzLnRpdGxlRWwuc2V0VGV4dCgnVXBkYXRlIFByZXZpZXcnKTtcbiAgXG5cdFx0Ly8gSW50cm8gcGFyYWdyYXBoXG5cdFx0dGhpcy5jb250ZW50RWwuY3JlYXRlRWwoJ3AnLCB7XG5cdFx0ICB0ZXh0OiAnT25seSBmaWxlcyB3aG9zZSBjb250ZW50cyBkaWZmZXIgZnJvbSBHaXRIdWIgd2lsbCBiZSB1cGRhdGVkOicsXG5cdFx0fSk7XG4gIFxuXHRcdC8vIDEpIElmIHRoZXJlIGFyZSBhbnkgXHUyMDFDbm9ybWFsXHUyMDFEIGRpZmZzLCByZW5kZXIgdGhlbSBpbiBhIGJ1bGxldCBsaXN0XG5cdFx0aWYgKHRoaXMubm9ybWFsLmxlbmd0aCkge1xuXHRcdCAgY29uc3QgdWwgPSB0aGlzLmNvbnRlbnRFbC5jcmVhdGVFbCgndWwnKTtcblx0XHQgIHRoaXMubm9ybWFsLmZvckVhY2goKGxpbmUpID0+IHtcblx0XHRcdGNvbnN0IGxpID0gdWwuY3JlYXRlRWwoJ2xpJywgeyB0ZXh0OiBsaW5lIH0pO1xuXHRcdFx0Ly8gTm8gc3BlY2lhbCBzdHlsaW5nIGZvciB0aGVzZTsgdGhleSBzaG93IHVwIG5vcm1hbGx5LlxuXHRcdCAgfSk7XG5cdFx0fSBlbHNlIHtcblx0XHQgIC8vIElmIG5vIG5vcm1hbCBkaWZmcywgc2F5IFx1MjAxQ1VwIHRvIGRhdGVcdTIwMURcblx0XHQgIHRoaXMuY29udGVudEVsLmNyZWF0ZUVsKCdkaXYnLCB7XG5cdFx0XHR0ZXh0OiAnXHUyNzA1IEV2ZXJ5dGhpbmcgaXMgYWxyZWFkeSB1cCB0byBkYXRlIScsXG5cdFx0XHRjbHM6ICdtb2QtaW5mbycsXG5cdFx0ICB9KTtcblx0XHR9XG4gIFxuXHRcdC8vIDIpIElmIHRoZXJlIGFyZSBhbnkgZGVueVx1MjAxMGxpc3RlZCBsaW5lcywgdHVjayB0aGVtIGludG8gYSA8ZGV0YWlscz4gYmxvY2tcblx0XHRpZiAodGhpcy5kZW5pZWQubGVuZ3RoKSB7XG5cdFx0ICBjb25zdCBkZW55RGV0YWlscyA9IHRoaXMuY29udGVudEVsLmNyZWF0ZUVsKCdkZXRhaWxzJywgeyBjbHM6ICd2ay1zZWN0aW9uJyB9KTtcblx0XHQgIC8vIEFsd2F5cyBzdGFydCBjb2xsYXBzZWQgYnkgZGVmYXVsdFxuXHRcdCAgZGVueURldGFpbHMub3BlbiA9IGZhbHNlO1xuICBcblx0XHQgIC8vIFN1bW1hcnkgbGluZTogc2hvd3MgXHUyMDFDRGVueVx1MjAxMExpc3QgRmlsZXMgKG4pXHUyMDFEXG5cdFx0ICBjb25zdCBzdW1tYXJ5ID0gZGVueURldGFpbHMuY3JlYXRlRWwoJ3N1bW1hcnknLCB7IGNsczogJ3ZrLXNlY3Rpb24taGVhZGVyJyB9KTtcblx0XHQgIE9iamVjdC5hc3NpZ24oc3VtbWFyeS5zdHlsZSwge1xuXHRcdFx0Y3Vyc29yOiAncG9pbnRlcicsXG5cdFx0XHRkaXNwbGF5OiAnZmxleCcsXG5cdFx0XHRjb2xvcjogJ3ZhcigtLXRleHQtZmFpbnQpJyxcblx0XHRcdGFsaWduSXRlbXM6ICdjZW50ZXInLFxuXHRcdFx0Z2FwOiAnMC41ZW0nLFxuXHRcdCAgfSk7XG5cdFx0ICBzdW1tYXJ5LmNyZWF0ZUVsKCdzcGFuJywgeyB0ZXh0OiBgRGVueVx1MjAxMExpc3QgRmlsZXMgKCR7dGhpcy5kZW5pZWQubGVuZ3RofSlgIH0pO1xuICBcblx0XHQgIC8vIFJpZ2h0XHUyMDEwc2lkZSBpY29uIHJvdGF0aW5nIG9uIGV4cGFuZC9jb2xsYXBzZVxuXHRcdCAgY29uc3QgdG9nZ2xlSWNvbiA9IHN1bW1hcnkuY3JlYXRlRWwoJ3NwYW4nLCB7IHRleHQ6ICdWVicsIGNsczogJ3ZrLXRvZ2dsZS1pY29uJyB9KTtcblx0XHQgIE9iamVjdC5hc3NpZ24odG9nZ2xlSWNvbi5zdHlsZSwge1xuXHRcdFx0Zm9udFdlaWdodDogJ2JvbGQnLFxuXHRcdFx0ZGlzcGxheTogJ2lubGluZS1ibG9jaycsXG5cdFx0XHR0cmFuc2l0aW9uOiAndHJhbnNmb3JtIDAuMnMgZWFzZScsXG5cdFx0XHR0cmFuc2Zvcm1PcmlnaW46ICc1MCUgNTAlJyxcblx0XHRcdHVzZXJTZWxlY3Q6ICdub25lJyxcblx0XHRcdHRyYW5zZm9ybTogJ3JvdGF0ZSgxODBkZWcpJyxcblx0XHQgIH0pO1xuXHRcdCAgZGVueURldGFpbHMub250b2dnbGUgPSAoKSA9PiB7XG5cdFx0XHR0b2dnbGVJY29uLnN0eWxlLnRyYW5zZm9ybSA9IGRlbnlEZXRhaWxzLm9wZW4gPyAncm90YXRlKDBkZWcpJyA6ICdyb3RhdGUoMTgwZGVnKSc7XG5cdFx0ICB9O1xuICBcblx0XHQgIC8vIEJvZHkgb2YgdGhlIGRldGFpbHM6IGEgc2ltcGxlIDx1bD4gY29udGFpbmluZyBvbmx5IGRlbnlcdTIwMTBsaXN0ZWQgbGluZXNcblx0XHQgIGNvbnN0IGRlbnlCb2R5ID0gZGVueURldGFpbHMuY3JlYXRlRGl2KHsgY2xzOiAndmstc2VjdGlvbi1ib2R5JyB9KTtcblx0XHQgIGRlbnlCb2R5LnN0eWxlLnBhZGRpbmdMZWZ0ID0gJzFlbSc7XG5cdFx0ICBjb25zdCBkZW55VWwgPSBkZW55Qm9keS5jcmVhdGVFbCgndWwnKTtcblx0XHQgIHRoaXMuZGVuaWVkLmZvckVhY2goKGxpbmUpID0+IHtcblx0XHRcdGNvbnN0IGxpID0gZGVueVVsLmNyZWF0ZUVsKCdsaScsIHsgdGV4dDogbGluZSB9KTtcblx0XHRcdGxpLnN0eWxlLmNvbG9yID0gJ3ZhcigtLXRleHQtZmFpbnQpJztcblx0XHRcdGxpLnN0eWxlLmZvbnRTdHlsZSA9ICdpdGFsaWMnO1xuXHRcdCAgfSk7XG5cdFx0fVxuICBcblx0XHRjb25zdCBidXR0b25Sb3cgPSB0aGlzLmNvbnRlbnRFbC5jcmVhdGVFbCgnZGl2Jyk7XG5cdFx0T2JqZWN0LmFzc2lnbihidXR0b25Sb3cuc3R5bGUsIHtcblx0XHQgIGRpc3BsYXk6ICdmbGV4Jyxcblx0XHQgIGp1c3RpZnlDb250ZW50OiAnZmxleC1lbmQnLFxuXHRcdCAgbWFyZ2luVG9wOiAnMS4yNWVtJywgICAgICAgLy8gdHdlYWsgc3BhY2luZyBhcyB5b3UgbGlrZVxuXHRcdH0pO1xuXHRcdFxuXHRcdC8vIFx1MjAxQ0NvbmZpcm0gJiBVcGRhdGVcdTIwMUQgYnV0dG9uXG5cdFx0Y29uc3QgY29uZmlybUJ0biA9IGJ1dHRvblJvdy5jcmVhdGVFbCgnYnV0dG9uJywge1xuXHRcdCAgdGV4dDogJ0NvbmZpcm0gJiBVcGRhdGUnLFxuXHRcdCAgY2xzOiAnbW9kLWN0YScsXG5cdFx0fSk7XG5cdFx0Y29uZmlybUJ0bi5vbmNsaWNrID0gYXN5bmMgKCkgPT4ge1xuXHRcdCAgYXdhaXQgKHRoaXMgYXMgYW55KS5wbHVnaW4udXBkYXRlU2VsZWN0ZWRUb29sa2l0Q29udGVudCgpO1xuXHRcdCAgdGhpcy5jbG9zZSgpO1xuXHRcdH07XG5cdFx0XG5cdFx0Ly8gXHUyMDFDQ2FuY2VsXHUyMDFEIGJ1dHRvblxuXHRcdGNvbnN0IGNhbmNlbEJ0biA9IGJ1dHRvblJvdy5jcmVhdGVFbCgnYnV0dG9uJywgeyB0ZXh0OiAnQ2FuY2VsJyB9KTtcblx0XHRjYW5jZWxCdG4ub25jbGljayA9ICgpID0+IHRoaXMuY2xvc2UoKTtcblx0ICB9XG4gIFxuXHQgIG9uQ2xvc2UoKSB7XG5cdFx0dGhpcy5jb250ZW50RWwuZW1wdHkoKTtcblx0ICB9XG5cdH0pKHRoaXMuYXBwLCBub3JtYWxMaW5lcywgZGVueUxpc3RlZExpbmVzKTtcbiAgXG5cdC8vIEF0dGFjaCBwbHVnaW4gcG9pbnRlciBhbmQgb3BlblxuXHQobW9kYWwgYXMgYW55KS5wbHVnaW4gPSB0aGlzO1xuXHRtb2RhbC5vcGVuKCk7XG4gIH1cbiAgXG5cbiAgYXN5bmMgYnVpbGRVcGRhdGVQcmV2aWV3KCk6IFByb21pc2U8c3RyaW5nW10+IHtcblx0Y29uc3QgY2hhbmdlczogc3RyaW5nW10gPSBbXTtcbiAgXG5cdC8vIDApIENvbGxlY3QgYWxsIGJsYWNrbGlzdGVkIGZvbGRlcnMgKG1hbmlmZXN0S2V5IHZhbHVlcyB3aGVyZSBkb1VwZGF0ZSA9PT0gZmFsc2UpXG5cdGNvbnN0IGRlbnlMaXN0ZWRGb2xkZXJzID0gdGhpcy5zZXR0aW5ncy5jdXN0b21QYXRoc1xuXHQgIC5maWx0ZXIoKGMpID0+IGMuZG9VcGRhdGUgPT09IGZhbHNlKVxuXHQgIC5tYXAoKGMpID0+IGMubWFuaWZlc3RLZXkpO1xuICBcblx0Ly8gMSkgRGVueVx1MjAxMGxpc3RlZCBlbnRyaWVzXHUyMDE0YnV0IG9ubHkgaWYgdGhleVx1MjAxOWQgYWN0dWFsbHkgYmUgXHUyMDFDbmV3XHUyMDFEIChtaXNzaW5nKSBvciBcdTIwMUNvdXRcdTIwMTBvZlx1MjAxMGRhdGVcdTIwMURcblx0Zm9yIChjb25zdCBmIG9mIHRoaXMubWFuaWZlc3RDYWNoZS5maWxlcykge1xuXHQgIC8vIFx1MjUwMFx1MjUwMCBTS0lQIGFueSBvcHRpb25hbDp0cnVlIGZpbGVcblx0ICBpZiAoZi5vcHRpb25hbCkge1xuXHRcdGNvbnRpbnVlO1xuXHQgIH1cbiAgXG5cdCAgY29uc3QgY3VzdG9tID0gdGhpcy5zZXR0aW5ncy5jdXN0b21QYXRocy5maW5kKChjKSA9PiBjLm1hbmlmZXN0S2V5ID09PSBmLnBhdGgpO1xuXHQgIGNvbnN0IGlzSW5EZW55Rm9sZGVyID0gZGVueUxpc3RlZEZvbGRlcnMuc29tZSgoZm9sZGVyKSA9PlxuXHRcdGYucGF0aC5zdGFydHNXaXRoKGZvbGRlciArICcvJylcblx0ICApO1xuXHQgIGlmIChjdXN0b20/LmRvVXBkYXRlID09PSBmYWxzZSB8fCBpc0luRGVueUZvbGRlcikge1xuXHRcdC8vIFJlc29sdmUgdGhlIHZhdWx0IHBhdGggKGhhbmRsZXMgcmVtYXBwaW5nIGlmIHByZXNlbnQpXG5cdFx0Y29uc3QgdnAgPSBjdXN0b20/LnZhdWx0UGF0aCA/PyB0aGlzLnJlc29sdmVWYXVsdFBhdGgoZi5wYXRoKTtcbiAgXG5cdFx0Ly8gQ2hlY2sgaWYgZmlsZSBleGlzdHMgbG9jYWxseSBhbmQgaWYgaXRcdTIwMTlzIHVwXHUyMDEwdG9cdTIwMTBkYXRlXG5cdFx0Y29uc3QgZXhpc3RzID0gYXdhaXQgdGhpcy5hcHAudmF1bHQuYWRhcHRlci5leGlzdHModnApO1xuXHRcdGNvbnN0IHVwVG9EYXRlID0gZXhpc3RzICYmIChhd2FpdCB0aGlzLmZpbGVDYWNoZU1hbmFnZXIuaXNVcFRvRGF0ZSh2cCkpO1xuICBcblx0XHQvLyBPbmx5IHNob3cgYSBkZW55XHUyMDEwbGlzdGVkIGVudHJ5IGlmIGl0IHdvdWxkIG90aGVyd2lzZSBiZSBjcmVhdGVkIG9yIG92ZXJ3cml0dGVuXG5cdFx0aWYgKCFleGlzdHMgfHwgIXVwVG9EYXRlKSB7XG5cdFx0ICBjaGFuZ2VzLnB1c2goYFx1Mjc0QyBkZW55XHUyMDEwbGlzdGVkIFx1MjAxMyB3aWxsIG5vdCB1cGRhdGU6ICR7dnB9YCk7XG5cdFx0fVxuXHQgIH1cblx0fVxuICBcblx0Ly8gMikgRlVMTFx1MjAxMFNZTkMgbW9kZSAoc2tpcCBhbnkgZmlsZS9mb2xkZXIgdGhhdFx1MjAxOXMgYmxhY2tsaXN0ZWQpXG5cdGlmICghdGhpcy5zZXR0aW5ncy5jdXN0b21pemVVcGRhdGVzKSB7XG5cdCAgZm9yIChjb25zdCBmIG9mIHRoaXMubWFuaWZlc3RDYWNoZS5maWxlcykge1xuXHRcdC8vIFx1MjUwMFx1MjUwMCBTS0lQIGFueSBvcHRpb25hbDp0cnVlIGZpbGVcblx0XHRpZiAoZi5vcHRpb25hbCkge1xuXHRcdCAgY29udGludWU7XG5cdFx0fVxuICBcblx0XHRjb25zdCBjdXN0b20gPSB0aGlzLnNldHRpbmdzLmN1c3RvbVBhdGhzLmZpbmQoKGMpID0+IGMubWFuaWZlc3RLZXkgPT09IGYucGF0aCk7XG5cdFx0Y29uc3QgaXNJbkRlbnlGb2xkZXIgPSBkZW55TGlzdGVkRm9sZGVycy5zb21lKChmb2xkZXIpID0+XG5cdFx0ICBmLnBhdGguc3RhcnRzV2l0aChmb2xkZXIgKyAnLycpXG5cdFx0KTtcblx0XHRpZiAoY3VzdG9tPy5kb1VwZGF0ZSA9PT0gZmFsc2UgfHwgaXNJbkRlbnlGb2xkZXIpIHtcblx0XHQgIGNvbnRpbnVlO1xuXHRcdH1cbiAgXG5cdFx0Y29uc3QgdnAgPSB0aGlzLnJlc29sdmVWYXVsdFBhdGgoZi5wYXRoKTtcblx0XHRsZXQgdGFnID0gJyc7XG5cdFx0aWYgKHZwICE9PSBmLnBhdGgpIHRhZyA9ICcgKHJlbWFwcGVkKSc7XG4gIFxuXHRcdGNvbnN0IGV4aXN0cyA9IGF3YWl0IHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXIuZXhpc3RzKHZwKTtcblx0XHRjb25zdCB1cFRvRGF0ZSA9IGV4aXN0cyAmJiAoYXdhaXQgdGhpcy5maWxlQ2FjaGVNYW5hZ2VyLmlzVXBUb0RhdGUodnApKTtcbiAgXG5cdFx0aWYgKCFleGlzdHMpIHtcblx0XHQgIGNoYW5nZXMucHVzaChgXHVEODNEXHVEQ0M0IE5ldyBmaWxlOiAke3ZwfSR7dGFnfWApO1xuXHRcdH0gZWxzZSBpZiAoIXVwVG9EYXRlKSB7XG5cdFx0ICBjaGFuZ2VzLnB1c2goYFx1RDgzRFx1REQwMSBXaWxsIHVwZGF0ZTogJHt2cH0ke3RhZ31gKTtcblx0XHR9XG5cdCAgfVxuICBcblx0ICBmb3IgKGNvbnN0IGZsZCBvZiB0aGlzLm1hbmlmZXN0Q2FjaGUuZm9sZGVycykge1xuXHRcdC8vIFx1MjUwMFx1MjUwMCBTS0lQIGFueSBvcHRpb25hbDp0cnVlIGZvbGRlclxuXHRcdGlmIChmbGQub3B0aW9uYWwpIHtcblx0XHQgIGNvbnRpbnVlO1xuXHRcdH1cbiAgXG5cdFx0Y29uc3QgaXNEZW55Rm9sZGVyID0gZGVueUxpc3RlZEZvbGRlcnMuaW5jbHVkZXMoZmxkLnBhdGgpO1xuXHRcdGNvbnN0IGV4aXN0cyA9IGF3YWl0IHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXIuZXhpc3RzKGZsZC5wYXRoKTtcblx0XHRpZiAoIWV4aXN0cyAmJiAhaXNEZW55Rm9sZGVyKSB7XG5cdFx0ICBjaGFuZ2VzLnB1c2goYFx1RDgzRFx1RENDMSBOZXcgZm9sZGVyOiAke2ZsZC5wYXRofWApO1xuXHRcdH1cblx0ICB9XG4gIFxuXHQgIHJldHVybiBjaGFuZ2VzLmxlbmd0aCA/IGNoYW5nZXMgOiBbJ1x1MjcwNSBFdmVyeXRoaW5nIGlzIGFscmVhZHkgdXAgdG8gZGF0ZSEnXTtcblx0fVxuICBcblx0Ly8gMykgQ1VTVE9NXHUyMDEwU1lOQyBtb2RlIChza2lwIGFueSBmaWxlL2ZvbGRlciB0aGF0XHUyMDE5cyBibGFja2xpc3RlZClcblx0Zm9yIChjb25zdCBmIG9mIHRoaXMubWFuaWZlc3RDYWNoZS5maWxlcykge1xuXHQgIC8vIFx1MjUwMFx1MjUwMCBTS0lQIGFueSBvcHRpb25hbDp0cnVlIGZpbGVcblx0ICBpZiAoZi5vcHRpb25hbCkge1xuXHRcdGNvbnRpbnVlO1xuXHQgIH1cbiAgXG5cdCAgY29uc3QgY3VzdG9tID0gdGhpcy5zZXR0aW5ncy5jdXN0b21QYXRocy5maW5kKChjKSA9PiBjLm1hbmlmZXN0S2V5ID09PSBmLnBhdGgpO1xuXHQgIGNvbnN0IGlzSW5EZW55Rm9sZGVyID0gZGVueUxpc3RlZEZvbGRlcnMuc29tZSgoZm9sZGVyKSA9PlxuXHRcdGYucGF0aC5zdGFydHNXaXRoKGZvbGRlciArICcvJylcblx0ICApO1xuXHQgIGlmIChjdXN0b20/LmRvVXBkYXRlID09PSBmYWxzZSB8fCBpc0luRGVueUZvbGRlcikge1xuXHRcdGNvbnRpbnVlO1xuXHQgIH1cbiAgXG5cdCAgY29uc3QgdnAgPSBjdXN0b20/LnZhdWx0UGF0aCA/PyB0aGlzLnJlc29sdmVWYXVsdFBhdGgoZi5wYXRoKTtcblx0ICBsZXQgdGFnID0gJyc7XG5cdCAgaWYgKHZwICE9PSBmLnBhdGgpIHRhZyA9ICcgKHJlbWFwcGVkKSc7XG4gIFxuXHQgIGNvbnN0IGV4aXN0cyA9IGF3YWl0IHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXIuZXhpc3RzKHZwKTtcblx0ICBjb25zdCB1cFRvRGF0ZSA9IGV4aXN0cyAmJiAoYXdhaXQgdGhpcy5maWxlQ2FjaGVNYW5hZ2VyLmlzVXBUb0RhdGUodnApKTtcbiAgXG5cdCAgaWYgKCFleGlzdHMpIHtcblx0XHRjaGFuZ2VzLnB1c2goYFx1RDgzRFx1RENDNCBOZXcgZmlsZTogJHt2cH0ke3RhZ31gKTtcblx0ICB9IGVsc2UgaWYgKCF1cFRvRGF0ZSkge1xuXHRcdGNoYW5nZXMucHVzaChgXHVEODNEXHVERDAxIFdpbGwgdXBkYXRlOiAke3ZwfSR7dGFnfWApO1xuXHQgIH1cblx0fVxuICBcblx0Zm9yIChjb25zdCBmbGQgb2YgdGhpcy5tYW5pZmVzdENhY2hlLmZvbGRlcnMpIHtcblx0ICAvLyBcdTI1MDBcdTI1MDAgU0tJUCBhbnkgb3B0aW9uYWw6dHJ1ZSBmb2xkZXJcblx0ICBpZiAoZmxkLm9wdGlvbmFsKSB7XG5cdFx0Y29udGludWU7XG5cdCAgfVxuICBcblx0ICBjb25zdCBpc0RlbnlGb2xkZXIgPSBkZW55TGlzdGVkRm9sZGVycy5pbmNsdWRlcyhmbGQucGF0aCk7XG5cdCAgY29uc3QgZXhpc3RzID0gYXdhaXQgdGhpcy5hcHAudmF1bHQuYWRhcHRlci5leGlzdHMoZmxkLnBhdGgpO1xuXHQgIGlmICghZXhpc3RzICYmICFpc0RlbnlGb2xkZXIpIHtcblx0XHRjaGFuZ2VzLnB1c2goYFx1RDgzRFx1RENDMSBOZXcgZm9sZGVyOiAke2ZsZC5wYXRofWApO1xuXHQgIH1cblx0fVxuICBcblx0Ly8gM2MpIFx1MjAxQ01vdmVkXHUyMDFEIGRldGVjdGlvbiAoc2tpcCBibGFja2xpc3RlZClcblx0Zm9yIChjb25zdCBmIG9mIHRoaXMubWFuaWZlc3RDYWNoZS5maWxlcykge1xuXHQgIC8vIFx1MjUwMFx1MjUwMCBTS0lQIGFueSBvcHRpb25hbDp0cnVlIGZpbGVcblx0ICBpZiAoZi5vcHRpb25hbCkge1xuXHRcdGNvbnRpbnVlO1xuXHQgIH1cbiAgXG5cdCAgY29uc3QgbWFuaWZlc3RLZXkgPSBmLmtleTtcblx0ICBjb25zdCBtYW5pZmVzdFBhdGggPSBmLnBhdGg7XG5cdCAgY29uc3QgY3VzdG9tID0gdGhpcy5zZXR0aW5ncy5jdXN0b21QYXRocy5maW5kKChjKSA9PiBjLm1hbmlmZXN0S2V5ID09PSBtYW5pZmVzdEtleSk7XG5cdCAgY29uc3QgcHJldlBhdGggPSB0aGlzLm9sZFBhdGhzQnlHaXRodWJbbWFuaWZlc3RQYXRoXTtcbiAgXG5cdCAgY29uc3QgaXNJbkRlbnlGb2xkZXIgPSBkZW55TGlzdGVkRm9sZGVycy5zb21lKChmb2xkZXIpID0+XG5cdFx0bWFuaWZlc3RQYXRoLnN0YXJ0c1dpdGgoZm9sZGVyICsgJy8nKVxuXHQgICk7XG5cdCAgaWYgKGN1c3RvbT8uZG9VcGRhdGUgPT09IGZhbHNlIHx8IGlzSW5EZW55Rm9sZGVyKSB7XG5cdFx0Y29udGludWU7XG5cdCAgfVxuXHQgIGlmIChjdXN0b20gJiYgY3VzdG9tLnZhdWx0UGF0aCAmJiBjdXN0b20udmF1bHRQYXRoICE9PSBtYW5pZmVzdFBhdGgpIHtcblx0XHRjb250aW51ZTtcblx0ICB9XG5cdCAgaWYgKFxuXHRcdHByZXZQYXRoICYmXG5cdFx0cHJldlBhdGggIT09IG1hbmlmZXN0UGF0aCAmJlxuXHRcdCghY3VzdG9tIHx8IGN1c3RvbS52YXVsdFBhdGggPT09IG1hbmlmZXN0UGF0aClcblx0ICApIHtcblx0XHRjaGFuZ2VzLnB1c2goYFx1MjdBMVx1RkUwRiBNb3ZlZDogJHtwcmV2UGF0aH0gXHUyMTkyICR7bWFuaWZlc3RQYXRofWApO1xuXHQgIH1cblx0fVxuICBcblx0cmV0dXJuIGNoYW5nZXMubGVuZ3RoID8gY2hhbmdlcyA6IFsnXHUyNzA1IEV2ZXJ5dGhpbmcgaXMgYWxyZWFkeSB1cCB0byBkYXRlISddO1xuICB9XG4gIFxuICBcbiAgXG4gIC8vIFx1MjUwMFx1MjUwMFx1MjUwMCBWRVJTSU9OLUNIRUNLIC8gVVBEQVRFIEZMT1cgXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXG5cbiAgYXN5bmMgY2hlY2tGb3JVcGRhdGVzKCk6IFByb21pc2U8dm9pZD4ge1xuICAgIGNvbnN0IGlzTmV3ZXJWZXJzaW9uID0gKHJlbW90ZTogc3RyaW5nLCBsb2NhbDogc3RyaW5nKTogYm9vbGVhbiA9PiB7XG4gICAgICBjb25zdCBwYSA9IHJlbW90ZVxuICAgICAgICAucmVwbGFjZSgvXnYvLCAnJylcbiAgICAgICAgLnNwbGl0KCcuJylcbiAgICAgICAgLm1hcCgobikgPT4gcGFyc2VJbnQobiwgMTApIHx8IDApO1xuICAgICAgY29uc3QgcGIgPSBsb2NhbFxuICAgICAgICAucmVwbGFjZSgvXnYvLCAnJylcbiAgICAgICAgLnNwbGl0KCcuJylcbiAgICAgICAgLm1hcCgobikgPT4gcGFyc2VJbnQobiwgMTApIHx8IDApO1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBNYXRoLm1heChwYS5sZW5ndGgsIHBiLmxlbmd0aCk7IGkrKykge1xuICAgICAgICBpZiAoKHBhW2ldIHx8IDApID4gKHBiW2ldIHx8IDApKSByZXR1cm4gdHJ1ZTtcbiAgICAgICAgaWYgKChwYVtpXSB8fCAwKSA8IChwYltpXSB8fCAwKSkgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH07XG5cbiAgICBjb25zdCB0b29sa2l0UGF0aCA9ICcudmVyc2lvbi5qc29uJztcbiAgICBjb25zdCB0b29sa2l0VXJsID1cbiAgICAgICdodHRwczovL3Jhdy5naXRodWJ1c2VyY29udGVudC5jb20vc2xhbXdpc2UwMDAxL3Z2dW5kZXJsb3JlLXRvb2xraXQtZnVsbC9tYWluLy52ZXJzaW9uLmpzb24nO1xuICAgIGNvbnN0IHBsdWdpblVybCA9XG4gICAgICAnaHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tL3NsYW13aXNlMDAwMS92dnVuZGVybG9yZS10b29sa2l0LXBsdWdpbi9tYWluL3ZlcnNpb24uanNvbic7XG4gICAgY29uc3QgY2hhbmdlbG9nVXJsID1cbiAgICAgICdodHRwczovL3Jhdy5naXRodWJ1c2VyY29udGVudC5jb20vc2xhbXdpc2UwMDAxL1ZWdW5kZXJsb3JlLVRvb2xraXQtRnVsbC9tYWluL1JFQURNRS5tZCc7XG5cbiAgICAvLyAxKSBSZWFkIGxvY2FsIHRvb2xraXQgdmVyc2lvblxuICAgIGxldCBsb2NhbFRLID0gJzAuMC4wJztcbiAgICB0cnkge1xuICAgICAgY29uc3QgY29udGVudCA9IGF3YWl0IHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXIucmVhZCh0b29sa2l0UGF0aCk7XG4gICAgICBjb25zdCBqc29uID0gSlNPTi5wYXJzZShjb250ZW50KTtcbiAgICAgIGxvY2FsVEsgPSBqc29uLnZlcnNpb24gfHwgbG9jYWxUSztcbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ1x1Mjc0QyBGYWlsZWQgdG8gcmVhZCBsb2NhbCB0b29sa2l0IHZlcnNpb246JywgZXJyKTtcbiAgICB9XG5cbiAgICAvLyAyKSBGZXRjaCByZW1vdGUgdG9vbGtpdCB2ZXJzaW9uICYgZGVmYXVsdHNcbiAgICBsZXQgcmVtb3RlVEsgPSAnMC4wLjAnO1xuICAgIHRyeSB7XG4gICAgICBjb25zdCByZXMgPSBhd2FpdCBmZXRjaCh0b29sa2l0VXJsKTtcbiAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXMuanNvbigpO1xuICAgICAgcmVtb3RlVEsgPSBkYXRhLnZlcnNpb24gfHwgcmVtb3RlVEs7XG5cbiAgICAgIHRoaXMuc2V0dGluZ3MubGF0ZXN0VG9vbGtpdFZlcnNpb24gPSByZW1vdGVUSztcbiAgICAgIGlmIChkYXRhLmRlZmF1bHRQYXRocykge1xuICAgICAgICB0aGlzLnNldHRpbmdzLmxhdGVzdERlZmF1bHRzID0gZGF0YS5kZWZhdWx0UGF0aHM7XG4gICAgICB9XG4gICAgICB0aGlzLnNldHRpbmdzLmxhc3RDaGVja2VkID0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpO1xuICAgICAgYXdhaXQgdGhpcy5zYXZlU2V0dGluZ3MoKTtcbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ1x1Mjc0QyBGYWlsZWQgdG8gZmV0Y2ggcmVtb3RlIHRvb2xraXQgdmVyc2lvbjonLCBlcnIpO1xuICAgIH1cblxuICAgIGNvbnNvbGUubG9nKHsgbG9jYWxUSywgcmVtb3RlVEsgfSk7XG4gICAgaWYgKGlzTmV3ZXJWZXJzaW9uKHJlbW90ZVRLLCBsb2NhbFRLKSkge1xuICAgICAgbmV3IE5vdGljZShgXHUyNkEwXHVGRTBGIFRvb2xraXQgdXBkYXRlIGF2YWlsYWJsZSEgSW5zdGFsbGVkOiB2JHtsb2NhbFRLfSwgTGF0ZXN0OiB2JHtyZW1vdGVUS31gKTtcbiAgICAgIGF3YWl0IHRoaXMuZmV0Y2hSZW1vdGVCYXNlbGluZSgpO1xuICAgIH0gZWxzZSB7XG4gICAgICBuZXcgTm90aWNlKGBcdTI3MDUgVG9vbGtpdCBpcyB1cCB0byBkYXRlICh2JHtsb2NhbFRLfSlgKTtcbiAgICB9XG5cbiAgICAvLyA0KSBSZWFkIGxvY2FsIHBsdWdpbiB2ZXJzaW9uXG4gICAgY29uc3QgbG9jYWxQTCA9IHRoaXMubWFuaWZlc3QudmVyc2lvbjtcblxuICAgIC8vIDUpIEZldGNoIHJlbW90ZSBwbHVnaW4gdmVyc2lvbiAmIGNvbXBhcmVcbiAgICBsZXQgcmVtb3RlUEwgPSBsb2NhbFBMO1xuICAgIHRyeSB7XG4gICAgICBjb25zdCByZXMgPSBhd2FpdCBmZXRjaChwbHVnaW5VcmwpO1xuICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlcy5qc29uKCk7XG4gICAgICByZW1vdGVQTCA9IGRhdGEudmVyc2lvbiB8fCByZW1vdGVQTDtcbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ1x1Mjc0QyBGYWlsZWQgdG8gZmV0Y2ggcmVtb3RlIHBsdWdpbiB2ZXJzaW9uOicsIGVycik7XG4gICAgfVxuXG4gICAgY29uc29sZS5sb2coeyBsb2NhbFBMLCByZW1vdGVQTCB9KTtcbiAgICBpZiAoaXNOZXdlclZlcnNpb24ocmVtb3RlUEwsIGxvY2FsUEwpKSB7XG4gICAgICBuZXcgTm90aWNlKGBcdTI2OTlcdUZFMEYgUGx1Z2luIHVwZGF0ZSBhdmFpbGFibGUhIEluc3RhbGxlZDogdiR7bG9jYWxQTH0sIExhdGVzdDogdiR7cmVtb3RlUEx9YCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIG5ldyBOb3RpY2UoYFx1MjcwNSBQbHVnaW4gaXMgdXAgdG8gZGF0ZSAodiR7bG9jYWxQTH0pYCk7XG4gICAgfVxuXG4gICAgLy8gNikgRmV0Y2ggY2hhbmdlbG9nIGZvciBVSSBkaXNwbGF5XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGNoYW5nZWxvZ1JlcyA9IGF3YWl0IGZldGNoKGNoYW5nZWxvZ1VybCk7XG4gICAgICB0aGlzLmNoYW5nZWxvZyA9IGF3YWl0IGNoYW5nZWxvZ1Jlcy50ZXh0KCk7XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdcdTI3NEMgRmFpbGVkIHRvIGZldGNoIGNoYW5nZWxvZzonLCBlcnIpO1xuICAgIH1cbiAgfVxuXG5hc3luYyBsb2FkU2V0dGluZ3MoKSB7XG4gIC8vIDEpIGdyYWIgd2hhdGV2ZXJcdTIwMTlzIG9uIGRpc2sgKG1pZ2h0IGJlIG51bGwpXG4gIGNvbnN0IHJhdyA9IChhd2FpdCB0aGlzLmxvYWREYXRhKCkpIGFzIFBhcnRpYWw8VG9vbGtpdFNldHRpbmdzPiB8IG51bGw7XG4gIGNvbnN0IGNsZWFuZWQgPSByYXcgPz8ge307XG5cbiAgLy8gMikgZHJvcCB0aGUgb2xkIG5lZWRzSW5zdGFsbCBmbGFnXG4gIGlmICgoY2xlYW5lZCBhcyBhbnkpLm5lZWRzSW5zdGFsbCAhPSBudWxsKSB7XG4gICAgZGVsZXRlIChjbGVhbmVkIGFzIGFueSkubmVlZHNJbnN0YWxsO1xuICB9XG5cbiAgLy8gMykgbWVyZ2UgZGVmYXVsdHMgKyBjbGVhbmVkIGRhdGFcbiAgdGhpcy5zZXR0aW5ncyA9IE9iamVjdC5hc3NpZ24oe30sIERFRkFVTFRfU0VUVElOR1MsIGNsZWFuZWQpO1xuXG4gIC8vIDQpIGZpZ3VyZSBvdXQgd2hldGhlciB3ZVx1MjAxOXJlIGZpcnN0LXJ1blxuICB0aGlzLmlzRmlyc3RSdW4gPSAhKGF3YWl0IHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXIuZXhpc3RzKCcudnZ1bmRlcmxvcmVfaW5zdGFsbGVkJykpO1xuXG4gIC8vIDUpIHNldCB1cCBjYWNoZU1hbmFnZXIgc28gc2F2ZVNldHRpbmdzKCkgY2FuIHNhZmVseSB1c2UgLmdldENhY2hlKClcbiAgdGhpcy5maWxlQ2FjaGVNYW5hZ2VyID0gbmV3IFRvb2xraXRGaWxlQ2FjaGVNYW5hZ2VyKFxuICAgIHRoaXMuYXBwLnZhdWx0LFxuICAgIGNsZWFuZWQuZmlsZUNhY2hlID8/IHt9LFxuICAgIGFzeW5jICgpID0+IGF3YWl0IHRoaXMuc2F2ZVNldHRpbmdzKClcbiAgKTtcblxuICAvLyA2KSBub3cgcGVyc2lzdCB0aGUgXHUyMDFDY2xlYW5lZFx1MjAxRCBzZXR0aW5ncyBiYWNrIHRvIGRpc2sgZXhhY3RseSBvbmNlXG4gIGF3YWl0IHRoaXMuc2F2ZVNldHRpbmdzKCk7XG5cbiAgLy8gNykgYmFjay1maWxsIGFueSBicmFuZC1uZXcgZmllbGRzXG4gIGlmICh0eXBlb2YgdGhpcy5zZXR0aW5ncy5ydWxlc2V0Q29tcGVuZGl1bSAhPT0gJ3N0cmluZycpIHtcbiAgICB0aGlzLnNldHRpbmdzLnJ1bGVzZXRDb21wZW5kaXVtID0gJyc7XG4gIH1cbiAgaWYgKCFBcnJheS5pc0FycmF5KHRoaXMuc2V0dGluZ3MucnVsZXNldFJlZmVyZW5jZSkpIHtcbiAgICB0aGlzLnNldHRpbmdzLnJ1bGVzZXRSZWZlcmVuY2UgPSBbXTtcbiAgfVxufVxuXG5cblxuICBhc3luYyBzYXZlU2V0dGluZ3MoKSB7XG4gICAgYXdhaXQgdGhpcy5zYXZlRGF0YSh7XG4gICAgICAuLi50aGlzLnNldHRpbmdzLFxuICAgICAgZmlsZUNhY2hlOiB0aGlzLmZpbGVDYWNoZU1hbmFnZXIuZ2V0Q2FjaGUoKSxcbiAgICB9KTtcbiAgfVxuXG4gIGFzeW5jIGdldExvY2FsVG9vbGtpdFZlcnNpb24oKTogUHJvbWlzZTxzdHJpbmcgfCBudWxsPiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGNvbnRlbnQgPSBhd2FpdCB0aGlzLmFwcC52YXVsdC5hZGFwdGVyLnJlYWQoJy52ZXJzaW9uLmpzb24nKTtcbiAgICAgIGNvbnN0IGpzb24gPSBKU09OLnBhcnNlKGNvbnRlbnQpO1xuICAgICAgcmV0dXJuIGpzb24udmVyc2lvbiB8fCBudWxsO1xuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgY29uc29sZS5lcnJvcignXHUyNzRDIEZhaWxlZCB0byByZWFkIC52ZXJzaW9uLmpzb246JywgZXJyKTtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIHVwZGF0ZUZ1bGxUb29sa2l0UmVwbygpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBjb25zdCBleGNsdWRlZCA9IFtcbiAgICAgICcub2JzaWRpYW4nLFxuICAgICAgJy5naXRpZ25vcmUnLFxuICAgICAgJy5naXRhdHRyaWJ1dGVzJyxcbiAgICAgICcuRFNfU3RvcmUnLFxuICAgICAgJ3BsdWdpbnMnLFxuICAgICAgJ0NvbXBlbmRpdW0nLFxuICAgICAgJ1JFQURNRS5tZCcsXG4gICAgICAnLnZlcnNpb24uanNvbicsXG4gICAgICAnLmdpdGh1YidcbiAgICBdO1xuXG4gICAgY29uc3QgZmV0Y2hSZXBvUm9vdCA9IGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGFwaVVybCA9XG4gICAgICAgICdodHRwczovL2FwaS5naXRodWIuY29tL3JlcG9zL3NsYW13aXNlMDAwMS9WVnVuZGVybG9yZS1Ub29sa2l0LUZ1bGwvY29udGVudHMvJztcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goYXBpVXJsKTtcbiAgICAgIGlmICghcmVzcG9uc2Uub2spIHRocm93IG5ldyBFcnJvcihgRmFpbGVkIHRvIGZldGNoIHJlcG8gcm9vdGApO1xuICAgICAgcmV0dXJuIGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgICB9O1xuXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGNvbnRlbnRzID0gYXdhaXQgZmV0Y2hSZXBvUm9vdCgpO1xuICAgICAgLy8gZmlsdGVyIG91dCBleGNsdWRlZCB0b3AtbGV2ZWwgaXRlbXNcbiAgICAgIGNvbnN0IGZpbHRlcmVkID0gY29udGVudHMuZmlsdGVyKFxuICAgICAgICAoaXRlbTogYW55KSA9PlxuICAgICAgICAgICFleGNsdWRlZC5zb21lKFxuICAgICAgICAgICAgKGV4KSA9PlxuICAgICAgICAgICAgICBpdGVtLnBhdGggPT09IGV4IHx8XG4gICAgICAgICAgICAgIGl0ZW0ucGF0aC5zdGFydHNXaXRoKGAke2V4fS9gKVxuICAgICAgICAgIClcbiAgICAgICk7XG5cbiAgICAgIC8vIFNvcnQgc28gXHUyMDFDdHJlZVx1MjAxRCAoZm9sZGVycykgY29tZSBiZWZvcmUgXHUyMDFDYmxvYlx1MjAxRCAoZmlsZXMpXG4gICAgICBmaWx0ZXJlZC5zb3J0KChhOiBhbnksIGI6IGFueSkgPT4gKGEudHlwZSA9PT0gYi50eXBlID8gMCA6IGEudHlwZSA9PT0gJ3RyZWUnID8gLTEgOiAxKSk7XG5cbiAgICAgIGZvciAoY29uc3QgaXRlbSBvZiBmaWx0ZXJlZCkge1xuICAgICAgICBpZiAoaXRlbS50eXBlID09PSAnZGlyJykge1xuICAgICAgICAgIGF3YWl0IHRoaXMudXBkYXRlRm9sZGVyRnJvbUdpdEh1YihpdGVtLnBhdGgsIGl0ZW0ucGF0aCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGl0ZW0udHlwZSA9PT0gJ2ZpbGUnKSB7XG4gICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChpdGVtLmRvd25sb2FkX3VybCk7XG4gICAgICAgICAgY29uc3QgY29udGVudCA9IGF3YWl0IHJlc3BvbnNlLnRleHQoKTtcbiAgICAgICAgICBjb25zdCBmaWxlUGF0aCA9IGl0ZW0ucGF0aDtcbiAgICAgICAgICBjb25zdCBleGlzdHMgPSBhd2FpdCB0aGlzLmFwcC52YXVsdC5hZGFwdGVyLmV4aXN0cyhmaWxlUGF0aCk7XG4gICAgICAgICAgaWYgKCFleGlzdHMpIHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuYXBwLnZhdWx0LmNyZWF0ZShmaWxlUGF0aCwgY29udGVudCk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IGN1cnJlbnQgPSBhd2FpdCB0aGlzLmFwcC52YXVsdC5hZGFwdGVyLnJlYWQoZmlsZVBhdGgpO1xuICAgICAgICAgICAgaWYgKGN1cnJlbnQgIT09IGNvbnRlbnQpIHtcbiAgICAgICAgICAgICAgYXdhaXQgdGhpcy5hcHAudmF1bHQuYWRhcHRlci53cml0ZShmaWxlUGF0aCwgY29udGVudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGF3YWl0IHRoaXMuZmlsZUNhY2hlTWFuYWdlci51cGRhdGVDYWNoZShmaWxlUGF0aCwgY29udGVudCwgaXRlbS5wYXRoLCBmYWxzZSk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgYXdhaXQgdGhpcy5zYXZlU2V0dGluZ3MoKTtcblxuICAgICAgY29uc3QgbWFya2VyUGF0aCA9ICcudnZ1bmRlcmxvcmVfaW5zdGFsbGVkJztcbiAgICAgIGlmICghKGF3YWl0IHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXIuZXhpc3RzKG1hcmtlclBhdGgpKSkge1xuICAgICAgICBhd2FpdCB0aGlzLmFwcC52YXVsdC5jcmVhdGUobWFya2VyUGF0aCwgJycpO1xuICAgICAgfVxuXG4gICAgICBpZiAodGhpcy5zZXR0aW5ncy5oaWdobGlnaHRFbmFibGVkKSB7XG4gICAgICAgIHRoaXMuZW5hYmxlSGlnaGxpZ2h0KCk7XG4gICAgICB9XG5cbiAgICAgIG5ldyBOb3RpY2UoJ1x1MjcwNSBWVnVuZGVybG9yZSBUb29sa2l0IHN1Y2Nlc3NmdWxseSBpbnN0YWxsZWQhJyk7XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdcdTI3NEMgdXBkYXRlRnVsbFRvb2xraXRSZXBvKCkgZXJyb3I6JywgZXJyKTtcbiAgICAgIG5ldyBOb3RpY2UoJ1x1Mjc0QyBGYWlsZWQgdG8gaW5zdGFsbCB0b29sa2l0LiBTZWUgY29uc29sZSBmb3IgZGV0YWlscy4nKTtcbiAgICB9XG4gIH1cblxuICBhc3luYyB1cGRhdGVTZWxlY3RlZFRvb2xraXRDb250ZW50KCkge1xuICAgIGlmICh0aGlzLnNldHRpbmdzLmF1dG9CYWNrdXBCZWZvcmVVcGRhdGUpIHtcbiAgICAgIGNvbnN0IGZvbGRlciA9IGF3YWl0IHRoaXMuYmFja3VwTWFuYWdlci5iYWNrdXBWYXVsdE1pcnJvcigncHJlLXVwZGF0ZScpO1xuICAgICAgbmV3IE5vdGljZShgVmF1bHQgbWlycm9yIGJhY2t1cCBjcmVhdGVkIGF0OiAke2ZvbGRlcn1gKTtcbiAgICB9XG5cbiAgICBpZiAoIXRoaXMuc2V0dGluZ3MubGF0ZXN0RGVmYXVsdHMpIHtcbiAgICAgIG5ldyBOb3RpY2UoJ1x1Mjc0QyBHaXRIdWIgZGVmYXVsdHMgbm90IGxvYWRlZCB5ZXQuJyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgYWxsTWFuaWZlc3RGaWxlcyA9IHRoaXMubWFuaWZlc3RDYWNoZS5maWxlcy5tYXAoKGYpID0+IGYucGF0aCk7XG4gICAgY29uc3QgZmlsZU92ZXJyaWRlcyA9IE9iamVjdC5mcm9tRW50cmllcyhcbiAgICAgIHRoaXMuc2V0dGluZ3MuY3VzdG9tUGF0aHMubWFwKChjKSA9PiBbYy5tYW5pZmVzdEtleSwgY10pXG4gICAgKTtcblxuICAgIHRyeSB7XG4gICAgICBmb3IgKGNvbnN0IGdoUGF0aCBvZiBhbGxNYW5pZmVzdEZpbGVzKSB7XG4gICAgICAgIGNvbnN0IG92ZXJyaWRlID0gZmlsZU92ZXJyaWRlc1tnaFBhdGhdO1xuICAgICAgICBpZiAob3ZlcnJpZGU/LmRvVXBkYXRlID09PSBmYWxzZSkge1xuICAgICAgICAgIGNvbnNvbGUubG9nKGBcdTIzRURcdUZFMEYgU2tpcHBpbmcgZGVueS1saXN0ZWQ6ICR7Z2hQYXRofWApO1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgdmF1bHRQYXRoID0gdGhpcy5zZXR0aW5ncy5jdXN0b21pemVVcGRhdGVzXG4gICAgICAgICAgPyB0aGlzLnJlc29sdmVWYXVsdFBhdGgoZ2hQYXRoKVxuICAgICAgICAgIDogZ2hQYXRoO1xuXG4gICAgICAgIGNvbnN0IGVudHJ5ID0gdGhpcy5tYW5pZmVzdENhY2hlLmZpbGVzLmZpbmQoKGYpID0+IGYucGF0aCA9PT0gZ2hQYXRoKTtcbiAgICAgICAgaWYgKCFlbnRyeSkgY29udGludWU7XG4gICAgICAgIGF3YWl0IHRoaXMudXBkYXRlRW50cnlGcm9tTWFuaWZlc3QoZW50cnksIGZhbHNlKTtcbiAgICAgIH1cblxuICAgICAgZm9yIChjb25zdCBmb2xkZXIgb2YgdGhpcy5tYW5pZmVzdENhY2hlLmZvbGRlcnMpIHtcbiAgICAgICAgaWYgKCEoYXdhaXQgdGhpcy5hcHAudmF1bHQuYWRhcHRlci5leGlzdHMoZm9sZGVyLnBhdGgpKSkge1xuICAgICAgICAgIGF3YWl0IHRoaXMuYXBwLnZhdWx0LmNyZWF0ZUZvbGRlcihmb2xkZXIucGF0aCk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgYXdhaXQgdGhpcy51cGRhdGVWZXJzaW9uRmlsZSgpO1xuICAgICAgdGhpcy5zZXR0aW5ncy5pbnN0YWxsZWRWZXJzaW9uID0gdGhpcy5zZXR0aW5ncy5sYXRlc3RUb29sa2l0VmVyc2lvbiE7XG4gICAgICBhd2FpdCB0aGlzLnNhdmVTZXR0aW5ncygpO1xuICAgICAgbmV3IE5vdGljZSgnXHUyNzA1IFRvb2xraXQgY29udGVudCB1cGRhdGVkLicpO1xuXG4gICAgICBpZiAodGhpcy5zZXR0aW5nc1RhYikge1xuICAgICAgICBhd2FpdCB0aGlzLnNldHRpbmdzVGFiLnVwZGF0ZVZlcnNpb25EaXNwbGF5KCk7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdcdTI3NEMgVXBkYXRlIGZhaWxlZC4gVmVyc2lvbiBub3QgdXBkYXRlZC4nLCBlcnIpO1xuICAgICAgbmV3IE5vdGljZSgnXHUyNzRDIFVwZGF0ZSBmYWlsZWQuIFNlZSBjb25zb2xlIGZvciBkZXRhaWxzLiBWZXJzaW9uIGZpbGUgTk9UIGNoYW5nZWQuJyk7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuc2V0dGluZ3MuaGlnaGxpZ2h0RW5hYmxlZCkge1xuICAgICAgdGhpcy5lbmFibGVIaWdobGlnaHQoKTtcbiAgICB9XG4gIH1cblxuICBhc3luYyB1cGRhdGVGb2xkZXJGcm9tR2l0SHViKGdpdGh1YkZvbGRlclBhdGg6IHN0cmluZywgdmF1bHRGb2xkZXJQYXRoOiBzdHJpbmcpIHtcbiAgICBjb25zdCBleGNsdWRlZCA9IFtcbiAgICAgICcub2JzaWRpYW4nLFxuICAgICAgJy5naXRpZ25vcmUnLFxuICAgICAgJy5naXRhdHRyaWJ1dGVzJyxcbiAgICAgICcuRFNfU3RvcmUnLFxuICAgICAgJ3BsdWdpbnMnLFxuICAgICAgJ0NvbXBlbmRpdW0nLFxuICAgICAgJ1JFQURNRS5tZCcsXG4gICAgICAnLnZlcnNpb24uanNvbicsXG4gICAgICAnLmdpdGh1YidcbiAgICBdO1xuICAgIGlmIChleGNsdWRlZC5zb21lKChleCkgPT4gZ2l0aHViRm9sZGVyUGF0aCA9PT0gZXggfHwgZ2l0aHViRm9sZGVyUGF0aC5zdGFydHNXaXRoKGAke2V4fS9gKSkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3QgYXBpVXJsID0gYGh0dHBzOi8vYXBpLmdpdGh1Yi5jb20vcmVwb3Mvc2xhbXdpc2UwMDAxL1ZWdW5kZXJsb3JlLVRvb2xraXQtRnVsbC9jb250ZW50cy8ke2dpdGh1YkZvbGRlclBhdGh9YDtcbiAgICB0cnkge1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChhcGlVcmwpO1xuICAgICAgaWYgKCFyZXNwb25zZS5vaykgdGhyb3cgbmV3IEVycm9yKGBGYWlsZWQgdG8gZmV0Y2ggZm9sZGVyOiAke2dpdGh1YkZvbGRlclBhdGh9YCk7XG4gICAgICBjb25zdCBmaWxlcyA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgICAgIGlmICghKGF3YWl0IHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXIuZXhpc3RzKHZhdWx0Rm9sZGVyUGF0aCkpKSB7XG4gICAgICAgIGF3YWl0IHRoaXMuYXBwLnZhdWx0LmNyZWF0ZUZvbGRlcih2YXVsdEZvbGRlclBhdGgpO1xuICAgICAgfVxuICAgICAgZm9yIChjb25zdCBmaWxlIG9mIGZpbGVzKSB7XG4gICAgICAgIGlmIChleGNsdWRlZC5zb21lKChleCkgPT4gZmlsZS5wYXRoID09PSBleCB8fCBmaWxlLnBhdGguc3RhcnRzV2l0aChgJHtleH0vYCkpKSB7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgZmlsZVBhdGggPSBgJHt2YXVsdEZvbGRlclBhdGh9LyR7ZmlsZS5uYW1lfWA7XG4gICAgICAgIGlmIChmaWxlLnR5cGUgPT09ICdmaWxlJykge1xuICAgICAgICAgIGNvbnN0IGZpbGVSZXNwb25zZSA9IGF3YWl0IGZldGNoKGZpbGUuZG93bmxvYWRfdXJsKTtcbiAgICAgICAgICBjb25zdCBjb250ZW50ID0gYXdhaXQgZmlsZVJlc3BvbnNlLnRleHQoKTtcbiAgICAgICAgICBjb25zdCBleGlzdHMgPSBhd2FpdCB0aGlzLmFwcC52YXVsdC5hZGFwdGVyLmV4aXN0cyhmaWxlUGF0aCk7XG4gICAgICAgICAgaWYgKGV4aXN0cykge1xuICAgICAgICAgICAgY29uc3QgY3VycmVudCA9IGF3YWl0IHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXIucmVhZChmaWxlUGF0aCk7XG4gICAgICAgICAgICBpZiAoY3VycmVudCAhPT0gY29udGVudCkge1xuICAgICAgICAgICAgICBhd2FpdCB0aGlzLmJhY2t1cEZpbGUoZmlsZVBhdGgsIGN1cnJlbnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoIWV4aXN0cykge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5hcHAudmF1bHQuY3JlYXRlKGZpbGVQYXRoLCBjb250ZW50KTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaWYgKChhd2FpdCB0aGlzLmFwcC52YXVsdC5hZGFwdGVyLnJlYWQoZmlsZVBhdGgpKSAhPT0gY29udGVudCkge1xuICAgICAgICAgICAgICBhd2FpdCB0aGlzLmFwcC52YXVsdC5hZGFwdGVyLndyaXRlKGZpbGVQYXRoLCBjb250ZW50KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgYXdhaXQgdGhpcy5maWxlQ2FjaGVNYW5hZ2VyLnVwZGF0ZUNhY2hlKGZpbGVQYXRoLCBjb250ZW50LCBmaWxlLnBhdGgsIGZhbHNlKTtcbiAgICAgICAgfSBlbHNlIGlmIChmaWxlLnR5cGUgPT09ICdkaXInKSB7XG4gICAgICAgICAgYXdhaXQgdGhpcy51cGRhdGVGb2xkZXJGcm9tR2l0SHViKGZpbGUucGF0aCwgYCR7dmF1bHRGb2xkZXJQYXRofS8ke2ZpbGUubmFtZX1gKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgYXdhaXQgdGhpcy5zYXZlU2V0dGluZ3MoKTtcbiAgICAgIG5ldyBOb3RpY2UoYFx1MjcwNSBGb2xkZXIgc3luY2VkOiAke3ZhdWx0Rm9sZGVyUGF0aH1gKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcihgXHUyNzRDIEZhaWxlZCB0byBzeW5jIGZvbGRlcjogJHt2YXVsdEZvbGRlclBhdGh9YCwgZXJyb3IpO1xuICAgICAgbmV3IE5vdGljZShgXHUyNzRDIEZhaWxlZCB0byB1cGRhdGUgZm9sZGVyOiAke3ZhdWx0Rm9sZGVyUGF0aH1gKTtcbiAgICB9XG4gIH1cblxuICBhc3luYyByZWJ1aWxkRmlsZUNhY2hlKCkge1xuICAgIGNvbnN0IGNhY2hlID0gdGhpcy5maWxlQ2FjaGVNYW5hZ2VyO1xuICAgIGNvbnN0IHRhc2tzOiBQcm9taXNlPHZvaWQ+W10gPSBbXTtcblxuICAgIC8vIDEpIEluZGV4IGV4YWN0bHkgdGhlIGZpbGVzIGxpc3RlZCBpbiB0aGUgbWFuaWZlc3RcbiAgICBmb3IgKGNvbnN0IGVudHJ5IG9mIHRoaXMubWFuaWZlc3RDYWNoZS5maWxlcykge1xuICAgICAgY29uc3QgdmF1bHRQYXRoID0gdGhpcy5yZXNvbHZlVmF1bHRQYXRoKGVudHJ5LnBhdGgpO1xuICAgICAgaWYgKGF3YWl0IHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXIuZXhpc3RzKHZhdWx0UGF0aCkpIHtcbiAgICAgICAgdGFza3MucHVzaCgoYXN5bmMgKCkgPT4ge1xuICAgICAgICAgIGNvbnN0IGNvbnRlbnQgPSBhd2FpdCB0aGlzLmFwcC52YXVsdC5hZGFwdGVyLnJlYWQodmF1bHRQYXRoKTtcbiAgICAgICAgICBhd2FpdCBjYWNoZS51cGRhdGVDYWNoZSh2YXVsdFBhdGgsIGNvbnRlbnQsIGVudHJ5LnBhdGgsIGZhbHNlKTtcbiAgICAgICAgfSkoKSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gMikgSW5kZXggYW55IG1hcmtkb3duIGNoaWxkcmVuIHVuZGVyIG1hbmlmZXN0IGZvbGRlcnNcbiAgICBmb3IgKGNvbnN0IGZvbGRlckVudHJ5IG9mIHRoaXMubWFuaWZlc3RDYWNoZS5mb2xkZXJzKSB7XG4gICAgICBjb25zdCBmb2xkZXJQYXRoID0gZm9sZGVyRW50cnkucGF0aDtcbiAgICAgIGNvbnN0IGZvbGRlciA9IHRoaXMuYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChmb2xkZXJQYXRoKTtcbiAgICAgIGlmIChmb2xkZXIgaW5zdGFuY2VvZiBURm9sZGVyKSB7XG4gICAgICAgIFZhdWx0LnJlY3Vyc2VDaGlsZHJlbihmb2xkZXIsIChmaWxlKSA9PiB7XG4gICAgICAgICAgaWYgKGZpbGUgaW5zdGFuY2VvZiBURmlsZSAmJiBmaWxlLmV4dGVuc2lvbiA9PT0gJ21kJykge1xuICAgICAgICAgICAgY29uc3QgZmlsZVBhdGggPSBmaWxlLnBhdGg7XG4gICAgICAgICAgICB0YXNrcy5wdXNoKChhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgIGNvbnN0IGNvbnRlbnQgPSBhd2FpdCB0aGlzLmFwcC52YXVsdC5hZGFwdGVyLnJlYWQoZmlsZVBhdGgpO1xuICAgICAgICAgICAgICBhd2FpdCBjYWNoZS51cGRhdGVDYWNoZShmaWxlUGF0aCwgY29udGVudCwgZmlsZVBhdGgsIGZhbHNlKTtcbiAgICAgICAgICAgIH0pKCkpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgY29uc3QgYmF0Y2hTaXplID0gMTA7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0YXNrcy5sZW5ndGg7IGkgKz0gYmF0Y2hTaXplKSB7XG4gICAgICBhd2FpdCBQcm9taXNlLmFsbCh0YXNrcy5zbGljZShpLCBpICsgYmF0Y2hTaXplKSk7XG4gICAgfVxuXG4gICAgYXdhaXQgdGhpcy5zYXZlU2V0dGluZ3MoKTtcbiAgfVxuXG4gIGFzeW5jIHNob3dJbmRleGluZ01vZGFsKCkge1xuICAgIGNvbnN0IG1vZGFsID0gbmV3IChjbGFzcyBleHRlbmRzIE1vZGFsIHtcbiAgICAgIGNvbnN0cnVjdG9yKGFwcDogQXBwKSB7XG4gICAgICAgIHN1cGVyKGFwcCk7XG4gICAgICB9XG4gICAgICBvbk9wZW4oKSB7XG4gICAgICAgIHRoaXMuY29udGVudEVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IGUuc3RvcFByb3BhZ2F0aW9uKCkpO1xuICAgICAgICB0aGlzLnRpdGxlRWwuc2V0VGV4dCgnXHVEODNEXHVERDA0IEluZGV4aW5nIFRvb2xraXQgRmlsZXMuLi4nKTtcbiAgICAgICAgdGhpcy5jb250ZW50RWwuY3JlYXRlRWwoJ3AnLCB7XG4gICAgICAgICAgdGV4dDogJ0luZGV4aW5nIGFuZCBjYWNoaW5nIHlvdXIgVlZ1bmRlcmxvcmUgVmF1bHQgZm9yIGZhc3RlciB1cGRhdGVzIGFuZCBzYWZlciBzeW5jaW5nLidcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSkodGhpcy5hcHApO1xuXG4gICAgbW9kYWwub3BlbigpO1xuICAgIGF3YWl0IHRoaXMucmVidWlsZEZpbGVDYWNoZSgpO1xuICAgIG1vZGFsLmNsb3NlKCk7XG4gICAgbmV3IE5vdGljZSgnXHUyNzA1IFZWdW5kZXJsb3JlIGNhY2hpbmcgY29tcGxldGUuJyk7XG4gIH1cblxuICBhc3luYyB1cGRhdGVWZXJzaW9uRmlsZSgpIHtcbiAgICBpZiAoIXRoaXMuc2V0dGluZ3MubGF0ZXN0VG9vbGtpdFZlcnNpb24pIHtcbiAgICAgIGNvbnNvbGUud2FybignTm8gbGF0ZXN0IHZlcnNpb24gZm91bmQ7IHNraXBwaW5nIHZlcnNpb24gZmlsZSB1cGRhdGUuJyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IHZlcnNpb25QYXRoID0gJy52ZXJzaW9uLmpzb24nO1xuICAgIGNvbnN0IGNvbnRlbnQgPSBKU09OLnN0cmluZ2lmeSh7IHZlcnNpb246IHRoaXMuc2V0dGluZ3MubGF0ZXN0VG9vbGtpdFZlcnNpb24gfSwgbnVsbCwgMik7XG4gICAgY29uc3QgZXhpc3RzID0gYXdhaXQgdGhpcy5hcHAudmF1bHQuYWRhcHRlci5leGlzdHModmVyc2lvblBhdGgpO1xuICAgIGlmIChleGlzdHMpIHtcbiAgICAgIGF3YWl0IHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXIud3JpdGUodmVyc2lvblBhdGgsIGNvbnRlbnQpO1xuICAgIH0gZWxzZSB7XG4gICAgICBhd2FpdCB0aGlzLmFwcC52YXVsdC5jcmVhdGUodmVyc2lvblBhdGgsIGNvbnRlbnQpO1xuICAgIH1cbiAgfVxuXG4gICAgLyoqIG1haW4udHMgKiovXG5cbiAgLyoqIFxuICAgKiBJbnN0YWxsIHRoZSBzZWxlY3RlZCBjb21wZW5kaXVtIGFuZCB6ZXJvIG9yIG1vcmUgcmVmZXJlbmNlIGVkaXRpb25zLlxuICAgKi9cbiAgcHVibGljIGFzeW5jIGluc3RhbGxGdWxsVG9vbGtpdChcbiAgICBvcHRzOiB7IGNvbXBlbmRpdW06IHN0cmluZzsgcmVmZXJlbmNlczogc3RyaW5nW10gfSA9IHsgY29tcGVuZGl1bTogXCJcIiwgcmVmZXJlbmNlczogW10gfVxuICApOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBjb25zdCB7IGNvbXBlbmRpdW0sIHJlZmVyZW5jZXMgfSA9IG9wdHM7XG4gICAgaWYgKCFjb21wZW5kaXVtKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJObyBjb21wZW5kaXVtIGVkaXRpb24gc2VsZWN0ZWRcIik7XG4gICAgfVxuXG4gIC8vIDEpIFNob3cgdGhlIFx1MjAxQ0luc3RhbGxpbmdcdTIwMjZcdTIwMUQgc3Bpbm5lclxuICBjb25zdCBwbGFjZWhvbGRlciA9IG5ldyBJbnN0YWxsaW5nTW9kYWwodGhpcy5hcHApO1xuICBwbGFjZWhvbGRlci5vcGVuKCk7XG5cbiAgbGV0IGluc3RhbGxTdWNjZWVkZWQgPSBmYWxzZTtcbiAgdHJ5IHtcbiAgICAvLyAyKSBTdGF0aWMgY29weSBvZiBldmVyeXRoaW5nIGluIHRoZSByZXBvIEVYQ0VQVCBhbnkgQ29tcGVuZGl1bS8qXG4gICAgY29uc3QgdHJlZUFwaSA9XG4gICAgICBcImh0dHBzOi8vYXBpLmdpdGh1Yi5jb20vcmVwb3Mvc2xhbXdpc2UwMDAxL1ZWdW5kZXJsb3JlLVRvb2xraXQtRnVsbC9naXQvdHJlZXMvbWFpbj9yZWN1cnNpdmU9MVwiO1xuICAgIGNvbnN0IHJlc3AgPSBhd2FpdCBmZXRjaCh0cmVlQXBpKTtcbiAgICBpZiAoIXJlc3Aub2spIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgRmFpbGVkIHRvIGxpc3QgcmVwbyB0cmVlOiAke3Jlc3Auc3RhdHVzVGV4dH1gKTtcbiAgICB9XG4gICAgY29uc3QganNvbjogYW55ID0gYXdhaXQgcmVzcC5qc29uKCk7XG4gICAgY29uc3QgaXRlbXMgPSBBcnJheS5pc0FycmF5KGpzb24udHJlZSkgPyBqc29uLnRyZWUgOiBbXTtcblxuICAgIC8vIFVzZSB5b3VyIGV4Y2x1ZGVkUGF0aHMgKHdoaWNoIGFscmVhZHkgY29udGFpbnMgXCJDb21wZW5kaXVtXCIpXG4gICAgY29uc3Qgc3RhdGljRW50cmllcyA9IChpdGVtcyBhcyBBcnJheTx7IHBhdGg6IHN0cmluZzsgdHlwZTogc3RyaW5nIH0+KVxuICAgICAgLmZpbHRlcigoaXRlbSkgPT5cbiAgICAgICAgIXRoaXMuZXhjbHVkZWRQYXRocy5zb21lKGV4ID0+XG4gICAgICAgICAgaXRlbS5wYXRoID09PSBleCB8fCBpdGVtLnBhdGguc3RhcnRzV2l0aChgJHtleH0vYClcbiAgICAgICAgKVxuICAgICAgKVxuICAgICAgLnNvcnQoKGEsIGIpID0+IChhLnR5cGUgPT09IGIudHlwZSA/IDAgOiBhLnR5cGUgPT09IFwidHJlZVwiID8gLTEgOiAxKSk7XG5cbiAgICBmb3IgKGNvbnN0IGVudHJ5IG9mIHN0YXRpY0VudHJpZXMpIHtcbiAgICAgIGlmIChlbnRyeS50eXBlID09PSBcInRyZWVcIikge1xuICAgICAgICBpZiAoIShhd2FpdCB0aGlzLmFwcC52YXVsdC5hZGFwdGVyLmV4aXN0cyhlbnRyeS5wYXRoKSkpIHtcbiAgICAgICAgICBhd2FpdCB0aGlzLmFwcC52YXVsdC5jcmVhdGVGb2xkZXIoZW50cnkucGF0aCk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnN0IHJhd1VybCA9IFxuICAgICAgICAgIGBodHRwczovL3Jhdy5naXRodWJ1c2VyY29udGVudC5jb20vc2xhbXdpc2UwMDAxL1ZWdW5kZXJsb3JlLVRvb2xraXQtRnVsbC9tYWluLyR7ZW5jb2RlVVJJQ29tcG9uZW50KGVudHJ5LnBhdGgpfWA7XG4gICAgICAgIGNvbnN0IGZpbGVSZXNwID0gYXdhaXQgZmV0Y2gocmF3VXJsKTtcbiAgICAgICAgaWYgKCFmaWxlUmVzcC5vaykgY29udGludWU7XG4gICAgICAgIGNvbnN0IHRleHQgPSBhd2FpdCBmaWxlUmVzcC50ZXh0KCk7XG4gICAgICAgIGlmIChhd2FpdCB0aGlzLmFwcC52YXVsdC5hZGFwdGVyLmV4aXN0cyhlbnRyeS5wYXRoKSkge1xuICAgICAgICAgIGNvbnN0IG9sZCA9IGF3YWl0IHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXIucmVhZChlbnRyeS5wYXRoKTtcbiAgICAgICAgICBpZiAob2xkICE9PSB0ZXh0KSB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLmFwcC52YXVsdC5hZGFwdGVyLndyaXRlKGVudHJ5LnBhdGgsIHRleHQpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBhd2FpdCB0aGlzLmFwcC52YXVsdC5jcmVhdGUoZW50cnkucGF0aCwgdGV4dCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICAgIHRoaXMuc2V0dGluZ3MucnVsZXNldENvbXBlbmRpdW0gPSBjb21wZW5kaXVtO1xuICAgICAgY29uc3QgcGlja2VkUmVmcyA9IHJlZmVyZW5jZXMubGVuZ3RoID4gMFxuICAgICAgICAgID8gcmVmZXJlbmNlc1xuICAgICAgICAgIDogdGhpcy5zZXR0aW5ncy5ydWxlc2V0UmVmZXJlbmNlO1xuICAgICAgICB0aGlzLnNldHRpbmdzLnJ1bGVzZXRSZWZlcmVuY2UgPSBwaWNrZWRSZWZzO1xuXG4gICAgICAgIGF3YWl0IHRoaXMuc2F2ZVNldHRpbmdzKCk7XG5cbiAgICAgICAgLy8gbm93IHJ1biB0aGUgaW1wb3J0IGpvYnMgYWdhaW5zdCB0aGUgY29tcGVuZGl1bSArIHRoZSBhY3R1YWwgcmVmc1xuICAgICAgICBjb25zdCBqb2JzID0gW1xuICAgICAgICAgIGltcG9ydFJ1bGVzZXREYXRhKHsgYXBwOiB0aGlzLmFwcCwgZWRpdGlvbktleTogY29tcGVuZGl1bSwgdGFyZ2V0UGF0aDogXCJDb21wZW5kaXVtXCIgfSksXG4gICAgICAgICAgIC4uLnBpY2tlZFJlZnMubWFwKHJlZktleSA9PiB7XG4gICAgY29uc3QgZGlzcGxheU5hbWUgPSBnZXRSdWxlc2V0RGlzcGxheU5hbWUocmVmS2V5KTtcbiAgICByZXR1cm4gaW1wb3J0UnVsZXNldERhdGEoe1xuICAgICAgYXBwOiAgICAgICAgdGhpcy5hcHAsXG4gICAgICBlZGl0aW9uS2V5OiByZWZLZXksXG4gICAgICB0YXJnZXRQYXRoOiBgUmVzb3VyY2VzL1J1bGVzZXRzLyR7ZGlzcGxheU5hbWV9YCx9KVxuICAgICAgICB9KVxuICAgICAgICBdO1xuICAgICAgICBhd2FpdCBQcm9taXNlLmFsbChqb2JzKTtcblxuICAgIC8vIDMpIEtpY2sgb2ZmIHlvdXIgSlNPTlx1MjE5Mk1EIHBhcnNlcnMgaW4gcGFyYWxsZWxcbiAgICBjb25zdCBwYXJzZUpvYnMgPSBbXG4gICAgICBpbXBvcnRSdWxlc2V0RGF0YSh7XG4gICAgICAgIGFwcDogdGhpcy5hcHAsXG4gICAgICAgIGVkaXRpb25LZXk6IGNvbXBlbmRpdW0sXG4gICAgICAgIHRhcmdldFBhdGg6IGBDb21wZW5kaXVtYCxcbiAgICAgIH0pLFxuICAuLi5yZWZlcmVuY2VzLm1hcChyZWZLZXkgPT4ge1xuICAgIGNvbnN0IGRpc3BsYXlOYW1lID0gZ2V0UnVsZXNldERpc3BsYXlOYW1lKHJlZktleSk7XG4gICAgcmV0dXJuIGltcG9ydFJ1bGVzZXREYXRhKHtcbiAgICAgIGFwcDogICAgICAgIHRoaXMuYXBwLFxuICAgICAgZWRpdGlvbktleTogcmVmS2V5LFxuICAgICAgdGFyZ2V0UGF0aDogYFJlc291cmNlcy9SdWxlc2V0cy8ke2Rpc3BsYXlOYW1lfWAsXG4gICAgICAgIH0pXG4gICAgICB9KSxcbiAgICBdO1xuICAgIC8vIHRoaXMgd29uXHUyMDE5dCByZXNvbHZlIHVudGlsIF9hbGxfIHBhcnNlcnMgaGF2ZSBmaW5pc2hlZCB3cml0aW5nIHRoZWlyIE1EIGZpbGVzXG4gICAgYXdhaXQgUHJvbWlzZS5hbGwocGFyc2VKb2JzKTtcblxuICAgIC8vIDQpIFBvc3QtaW5zdGFsbCBob3VzZWtlZXBpbmdcbiAgICBjb25zdCBtYXJrZXIgPSBcIi52dnVuZGVybG9yZV9pbnN0YWxsZWRcIjtcbiAgICBpZiAoIShhd2FpdCB0aGlzLmFwcC52YXVsdC5hZGFwdGVyLmV4aXN0cyhtYXJrZXIpKSkge1xuICAgICAgYXdhaXQgdGhpcy5hcHAudmF1bHQuY3JlYXRlKG1hcmtlciwgXCJcIik7XG4gICAgfVxuICAgIHRoaXMuc2V0dGluZ3MuaGlnaGxpZ2h0RW5hYmxlZCA9IHRydWU7XG4gICAgYXdhaXQgdGhpcy5zYXZlU2V0dGluZ3MoKTtcbiAgICB0aGlzLmVuYWJsZUhpZ2hsaWdodCgpO1xuXG4gICAgaW5zdGFsbFN1Y2NlZWRlZCA9IHRydWU7XG4gIH0gY2F0Y2ggKGVycikge1xuICAgIGNvbnNvbGUuZXJyb3IoXCJcdTI3NEMgaW5zdGFsbEZ1bGxUb29sa2l0KClcIiwgZXJyKTtcbiAgfSBmaW5hbGx5IHtcbiAgICAvLyBvbmx5IG5vdyBjbG9zZSB0aGUgc3Bpbm5lciAmIHJlZHJhdyB0aGUgVUlcbiAgICBwbGFjZWhvbGRlci5jbG9zZSgpO1xuICAgIGlmICh0aGlzLnNldHRpbmdzVGFiKSB0aGlzLnNldHRpbmdzVGFiLmRpc3BsYXkoKTtcbiAgICBuZXcgTm90aWNlKFxuICAgICAgaW5zdGFsbFN1Y2NlZWRlZFxuICAgICAgICA/IFwiXHUyNzA1IFZWdW5kZXJsb3JlIFRvb2xraXQgc3VjY2Vzc2Z1bGx5IGluc3RhbGxlZCFcIlxuICAgICAgICA6IFwiXHUyNzRDIEZhaWxlZCB0byBpbnN0YWxsIHRvb2xraXQuIFNlZSBjb25zb2xlIGZvciBkZXRhaWxzLlwiXG4gICAgKTtcbiAgfVxufVxuXG4vLyAqIFJlLXBhcnNlIGFsbCBnYW1lc2V0IGRhdGEgKHJ1bGVzZXQgY29tcGVuZGl1bSArIHJlZmVyZW5jZSBzZXRzKVxuYXN5bmMgcmVmcmVzaEdhbWVTZXREYXRhKCk6IFByb21pc2U8dm9pZD4ge1xuICBjb25zdCB7IHJ1bGVzZXRDb21wZW5kaXVtLCBydWxlc2V0UmVmZXJlbmNlIH0gPSB0aGlzLnNldHRpbmdzO1xuXG4gIGlmICghcnVsZXNldENvbXBlbmRpdW0gJiYgcnVsZXNldFJlZmVyZW5jZS5sZW5ndGggPT09IDApIHtcbiAgICBuZXcgTm90aWNlKFwiXHUyNkEwXHVGRTBGIE5vIGdhbWVzZXQga2V5cyBzZXQ7IG5vdGhpbmcgdG8gcmVmcmVzaC5cIik7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgY29uc3Qgam9iczogUHJvbWlzZTx1bmtub3duPltdID0gW107XG4gIGlmIChydWxlc2V0Q29tcGVuZGl1bSkge1xuICAgIGpvYnMucHVzaChpbXBvcnRSdWxlc2V0RGF0YSh7XG4gICAgICBhcHA6IHRoaXMuYXBwLFxuICAgICAgZWRpdGlvbktleTogcnVsZXNldENvbXBlbmRpdW0sXG4gICAgICB0YXJnZXRQYXRoOiBcIkNvbXBlbmRpdW1cIixcbiAgICB9KSk7XG4gIH1cbmZvciAoY29uc3QgcmVmIG9mIHJ1bGVzZXRSZWZlcmVuY2UpIHtcbiAgY29uc3QgZGlzcGxheU5hbWUgPSBnZXRSdWxlc2V0RGlzcGxheU5hbWUocmVmKTtcbiAgam9icy5wdXNoKGltcG9ydFJ1bGVzZXREYXRhKHtcbiAgICBhcHA6ICAgICAgICB0aGlzLmFwcCxcbiAgICBlZGl0aW9uS2V5OiByZWYsXG4gICAgdGFyZ2V0UGF0aDogYFJlc291cmNlcy9SdWxlc2V0cy8ke2Rpc3BsYXlOYW1lfWAsXG4gIH0pKTtcbn1cblxuICBhd2FpdCBQcm9taXNlLmFsbChqb2JzKTtcbiAgbmV3IE5vdGljZShcIlx1MjcwNSBHYW1lIFNldCBEYXRhIHJlZnJlc2hlZC5cIik7XG59XG5cblxuXG59XG5leHBvcnQgeyBJbnN0YWxsaW5nTW9kYWwgfTsiLCAiaW1wb3J0IHtcblx0UGx1Z2luU2V0dGluZ1RhYixcblx0U2V0dGluZyxcblx0QXBwLFxuXHRURmlsZSxcblx0VEZvbGRlcixcblx0QWJzdHJhY3RJbnB1dFN1Z2dlc3QsXG5cdHNldEljb24sXG5cdE1vZGFsLFxuXHRNYXJrZG93blJlbmRlcmVyLFxuXHRDb21wb25lbnQsXG5cdE5vdGljZSxcblx0VGV4dENvbXBvbmVudCxcblx0VG9nZ2xlQ29tcG9uZW50LFxuXHRCdXR0b25Db21wb25lbnQsXG5cdERyb3Bkb3duQ29tcG9uZW50LFxuXHRTZWFyY2hDb21wb25lbnRcbn0gZnJvbSAnb2JzaWRpYW4nO1xuaW1wb3J0IHR5cGUgVlZ1bmRlcmxvcmVUb29sa2l0UGx1Z2luIGZyb20gJy4vbWFpbic7XG5pbXBvcnQgeyBDb25maXJtRnJlc2hJbnN0YWxsTW9kYWwgfSBmcm9tICcuL2ZpcnN0aW5zdGFsbGNvbmZpcm0nO1xuaW1wb3J0IHsgc2hvd0N1c3RvbUluc3RhbGxNb2RhbCB9IGZyb20gXCIuL2N1c3RvbUluc3RhbGxNb2RhbFwiO1xuaW1wb3J0ICogYXMgcGF0aCBmcm9tICdwYXRoJztcbmltcG9ydCB7IEFWQUlMQUJMRV9FRElUSU9OUywgRWRpdGlvbiB9IGZyb20gJy4vZWRpdGlvbnMnXG5cblxuLy8gRGVmaW5lIHlvdXIgQ3VzdG9tUGF0aEVudHJ5IGludGVyZmFjZS5cbmludGVyZmFjZSBDdXN0b21QYXRoRW50cnkge1xuXHR2YXVsdFBhdGg6IHN0cmluZztcblx0bWFuaWZlc3RLZXk6IHN0cmluZztcblx0ZG9VcGRhdGU6IGJvb2xlYW47XG59XG5cbi8vIEZpbGVQYXRoU3VnZ2VzdGVyIGZvciBsaXZlIHNlYXJjaCBvbiB2YXVsdCBmaWxlcy5cbmNsYXNzIEZpbGVQYXRoU3VnZ2VzdGVyIGV4dGVuZHMgQWJzdHJhY3RJbnB1dFN1Z2dlc3Q8c3RyaW5nPiB7XG5cdHByaXZhdGUgaW5wdXRFbDogSFRNTElucHV0RWxlbWVudDtcblx0cHJpdmF0ZSBwYXRoczogeyBwYXRoOiBzdHJpbmc7IGlzRm9sZGVyOiBib29sZWFuIH1bXSA9IFtdO1xuXHRwcml2YXRlIGN1cnJlbnRTdWdnZXN0aW9uczogc3RyaW5nW10gPSBbXTtcblx0cHJpdmF0ZSByZW5kZXJlZFN1Z2dlc3Rpb25zOiBNYXA8SFRNTEVsZW1lbnQsIHN0cmluZz4gPSBuZXcgTWFwKCk7XG5cblx0Y29uc3RydWN0b3IoYXBwOiBBcHAsIGlucHV0RWw6IEhUTUxJbnB1dEVsZW1lbnQpIHtcblx0XHRzdXBlcihhcHAsIGlucHV0RWwpO1xuXHRcdHRoaXMuaW5wdXRFbCA9IGlucHV0RWw7XG5cblx0XHQvLyBHZXQgZm9sZGVycyBhbmQgbWFya2Rvd24gZmlsZXMgZnJvbSB0aGUgdmF1bHQuXG5cdFx0Y29uc3QgZm9sZGVycyA9IE9iamVjdC52YWx1ZXMoYXBwLnZhdWx0LmdldEFsbExvYWRlZEZpbGVzKCkpXG5cdFx0XHQuZmlsdGVyKChmKTogZiBpcyBURm9sZGVyID0+IGYgaW5zdGFuY2VvZiBURm9sZGVyKVxuXHRcdFx0Lm1hcChmID0+ICh7IHBhdGg6IGYucGF0aCwgaXNGb2xkZXI6IHRydWUgfSkpO1xuXHRcdGNvbnN0IGZpbGVzID0gYXBwLnZhdWx0LmdldE1hcmtkb3duRmlsZXMoKVxuXHRcdFx0Lm1hcChmID0+ICh7IHBhdGg6IGYucGF0aCwgaXNGb2xkZXI6IGZhbHNlIH0pKTtcblx0XHR0aGlzLnBhdGhzID0gWy4uLmZvbGRlcnMsIC4uLmZpbGVzXTtcblxuXHRcdHRoaXMuaW5wdXRFbC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgKGU6IEtleWJvYXJkRXZlbnQpID0+IHtcblx0XHRcdGlmIChlLmtleSA9PT0gJ0VudGVyJykge1xuXHRcdFx0XHRzZXRUaW1lb3V0KCgpID0+IHtcblx0XHRcdFx0XHRjb25zdCBjb250YWluZXIgPSAodGhpcyBhcyBhbnkpLmNvbnRhaW5lckVsIGFzIEhUTUxFbGVtZW50O1xuXHRcdFx0XHRcdGlmICghY29udGFpbmVyKSByZXR1cm47XG5cdFx0XHRcdFx0Y29uc3Qgc2VsZWN0ZWRFbCA9IGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcuc3VnZ2VzdGlvbi1pdGVtLmlzLXNlbGVjdGVkJykgYXMgSFRNTEVsZW1lbnQ7XG5cdFx0XHRcdFx0aWYgKHNlbGVjdGVkRWwpIHtcblx0XHRcdFx0XHRcdGNvbnN0IHNlbGVjdGVkUGF0aCA9IHRoaXMucmVuZGVyZWRTdWdnZXN0aW9ucy5nZXQoc2VsZWN0ZWRFbCk7XG5cdFx0XHRcdFx0XHRpZiAoc2VsZWN0ZWRQYXRoKSB7XG5cdFx0XHRcdFx0XHRcdHRoaXMuc2VsZWN0U3VnZ2VzdGlvbihzZWxlY3RlZFBhdGgpO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSwgMCk7XG5cdFx0XHR9XG5cdFx0fSk7XG5cdH1cblxuXHRnZXRTdWdnZXN0aW9ucyhpbnB1dFN0cjogc3RyaW5nKTogc3RyaW5nW10ge1xuXHRcdGNvbnN0IHF1ZXJ5ID0gaW5wdXRTdHIudG9Mb3dlckNhc2UoKTtcblx0XHR0aGlzLmN1cnJlbnRTdWdnZXN0aW9ucyA9IHRoaXMucGF0aHNcblx0XHRcdC5maWx0ZXIoKHsgcGF0aCB9KSA9PiBwYXRoLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMocXVlcnkpKVxuXHRcdFx0Lm1hcChwID0+IHAucGF0aCk7XG5cdFx0cmV0dXJuIHRoaXMuY3VycmVudFN1Z2dlc3Rpb25zO1xuXHR9XG5cblx0cmVuZGVyU3VnZ2VzdGlvbihwYXRoOiBzdHJpbmcsIGVsOiBIVE1MRWxlbWVudCk6IHZvaWQge1xuXHRcdGNvbnN0IGlzRm9sZGVyID0gdGhpcy5wYXRocy5maW5kKHAgPT4gcC5wYXRoID09PSBwYXRoKT8uaXNGb2xkZXI7XG5cdFx0ZWwuYWRkQ2xhc3MoXCJtb2QtY29tcGxleFwiKTtcblx0XHRjb25zdCBpY29uRWwgPSBlbC5jcmVhdGVEaXYoeyBjbHM6ICdzdWdnZXN0aW9uLWljb24nIH0pO1xuXHRcdHNldEljb24oaWNvbkVsLCBpc0ZvbGRlciA/ICdmb2xkZXInIDogJ2RvY3VtZW50Jyk7XG5cblx0XHRjb25zdCBuYW1lID0gcGF0aC5zcGxpdCgnLycpLnBvcCgpITtcblx0XHRjb25zdCBkaXNwbGF5TmFtZSA9IGlzRm9sZGVyID8gbmFtZSA6IG5hbWUucmVwbGFjZSgvXFwubWQkLywgJycpO1xuXHRcdGVsLmNyZWF0ZURpdih7IHRleHQ6IGRpc3BsYXlOYW1lLCBjbHM6ICdzdWdnZXN0aW9uLXRpdGxlJyB9KTtcblx0XHRjb25zdCBwYXJlbnRQYXRoID0gcGF0aC5zcGxpdCgnLycpLnNsaWNlKDAsIC0xKS5qb2luKCcvJyk7XG5cdFx0ZWwuY3JlYXRlRGl2KHsgdGV4dDogcGFyZW50UGF0aCwgY2xzOiAnc2VhcmNoLXN1Z2dlc3QtaW5mby10ZXh0JyB9KTtcblx0XHRlbC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGU6IE1vdXNlRXZlbnQpID0+IHtcblx0XHRcdGUuc3RvcFByb3BhZ2F0aW9uKCk7XG5cdFx0XHR0aGlzLnNlbGVjdFN1Z2dlc3Rpb24ocGF0aCk7XG5cdFx0fSk7XG5cdFx0dGhpcy5yZW5kZXJlZFN1Z2dlc3Rpb25zLnNldChlbCwgcGF0aCk7XG5cdH1cblxuXHRzZWxlY3RTdWdnZXN0aW9uKHBhdGg6IHN0cmluZyk6IHZvaWQge1xuXHRcdHRoaXMuaW5wdXRFbC52YWx1ZSA9IHBhdGg7XG5cdFx0dGhpcy5pbnB1dEVsLmRpc3BhdGNoRXZlbnQobmV3IEV2ZW50KFwiaW5wdXRcIikpO1xuXHRcdHRoaXMuY2xvc2UoKTtcblx0fVxufVxuXG4vLyBNb2RhbCBmb3IgZGlzcGxheWluZyB0aGUgY2hhbmdlbG9nLlxuY2xhc3MgTWFya2Rvd25QcmV2aWV3TW9kYWwgZXh0ZW5kcyBNb2RhbCB7XG5cdGNvbnN0cnVjdG9yKGFwcDogQXBwLCBwcml2YXRlIGNvbnRlbnQ6IHN0cmluZykge1xuXHRcdHN1cGVyKGFwcCk7XG5cdH1cblxuXHRvbk9wZW4oKTogdm9pZCB7XG5cdFx0dGhpcy5jb250ZW50RWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4gZS5zdG9wUHJvcGFnYXRpb24oKSk7XG5cdFx0dGhpcy5jb250ZW50RWwuZW1wdHkoKTtcblx0XHR0aGlzLmNvbnRlbnRFbC5jcmVhdGVFbCgnaDInLCB7IHRleHQ6ICdUb29sa2l0IENoYW5nZWxvZycgfSk7XG5cdFx0Y29uc3QgbWQgPSB0aGlzLmNvbnRlbnRFbC5jcmVhdGVEaXYoKTtcblx0XHRjb25zdCBkdW1teUNvbXBvbmVudCA9IG5ldyBjbGFzcyBleHRlbmRzIENvbXBvbmVudCB7fSgpO1xuXHRcdE1hcmtkb3duUmVuZGVyZXIucmVuZGVyTWFya2Rvd24odGhpcy5jb250ZW50LCBtZCwgJy8nLCBkdW1teUNvbXBvbmVudCk7XG5cdH1cblxuXHRvbkNsb3NlKCk6IHZvaWQge1xuXHRcdHRoaXMuY29udGVudEVsLmVtcHR5KCk7XG5cdH1cbn1cblxuLy8gVGhlIGZ1bGwgc2V0dGluZ3MgdGFiLlxuZXhwb3J0IGNsYXNzIFRvb2xraXRTZXR0aW5nc1RhYiBleHRlbmRzIFBsdWdpblNldHRpbmdUYWIge1xuXHRwbHVnaW46IFZWdW5kZXJsb3JlVG9vbGtpdFBsdWdpbjtcblxuXHRjb25zdHJ1Y3RvcihhcHA6IEFwcCwgcGx1Z2luOiBWVnVuZGVybG9yZVRvb2xraXRQbHVnaW4pIHtcblx0XHRzdXBlcihhcHAsIHBsdWdpbik7XG5cdFx0dGhpcy5wbHVnaW4gPSBwbHVnaW47ICBcblx0fSAgIFxuXHRwcml2YXRlIHJlbmRlckhlYWRlcihyb290OiBIVE1MRWxlbWVudCk6IHZvaWQge1xuXHRcdGNvbnN0IGhlYWRlciA9IHJvb3QuY3JlYXRlRGl2KCk7XG5cdFx0aGVhZGVyLnN0eWxlLmRpc3BsYXkgPSAnZmxleCc7XG5cdFx0aGVhZGVyLnN0eWxlLmp1c3RpZnlDb250ZW50ID0gJ3NwYWNlLWJldHdlZW4nO1xuXHRcdGhlYWRlci5zdHlsZS5hbGlnbkl0ZW1zID0gJ2NlbnRlcic7XG5cdFx0aGVhZGVyLnN0eWxlLmJvcmRlckJvdHRvbSA9ICcxcHggc29saWQgdmFyKC0tZGl2aWRlci1jb2xvciknO1xuXHRcdGhlYWRlci5zdHlsZS5tYXJnaW5Cb3R0b20gPSAnMmVtJztcblx0XHRoZWFkZXIuc3R5bGUucGFkZGluZ0JvdHRvbSA9ICcwLjVlbSc7XG5cdCAgXG5cdFx0aGVhZGVyLmNyZWF0ZUVsKCdoMycsIHsgdGV4dDogJ1ZWdW5kZXJsb3JlIFRvb2xraXQgU2V0dGluZ3MnIH0pO1xuXHQgIFxuXHRcdGNvbnN0IGhlYWRlckJ0bnMgPSBoZWFkZXIuY3JlYXRlRGl2KCk7XG5cdFx0aGVhZGVyQnRucy5zdHlsZS5kaXNwbGF5ID0gJ2ZsZXgnO1xuXHRcdGhlYWRlckJ0bnMuc3R5bGUuZ2FwID0gJzAuNWVtJztcblx0ICBcblx0XHRjb25zdCBkb2NzQnRuID0gaGVhZGVyQnRucy5jcmVhdGVFbCgnYnV0dG9uJywgeyB0ZXh0OiAnRG9jcycgfSk7XG5cdFx0ZG9jc0J0bi5vbmNsaWNrID0gKCkgPT4gd2luZG93Lm9wZW4oJ2h0dHA6Ly92dnVuZGVybG9yZS5jb20nLCAnX2JsYW5rJyk7XG5cdCAgXG5cdFx0Y29uc3QgZ2l0aHViQnRuID0gaGVhZGVyQnRucy5jcmVhdGVFbCgnYnV0dG9uJywgeyB0ZXh0OiAnR2l0SHViJyB9KTtcblx0XHRnaXRodWJCdG4ub25jbGljayA9ICgpID0+XG5cdFx0ICB3aW5kb3cub3BlbignaHR0cHM6Ly9naXRodWIuY29tL3NsYW13aXNlMDAwMS9WVnVuZGVybG9yZS1Ub29sa2l0LUZ1bGwnLCAnX2JsYW5rJyk7XG5cdCAgXG5cdFx0Y29uc3Qga29maUJ0biA9IGhlYWRlckJ0bnMuY3JlYXRlRWwoJ2J1dHRvbicsIHtcblx0XHQgIHRleHQ6ICdcdTI2MTUgS28tZmknLFxuXHRcdCAgY2xzOiAnbW9kLWN0YScsXG5cdFx0fSk7XG5cdFx0a29maUJ0bi5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAnI2ZmNTkwMCc7XG5cdFx0a29maUJ0bi5zdHlsZS5jb2xvciA9ICd3aGl0ZSc7XG5cdFx0a29maUJ0bi5vbmNsaWNrID0gKCkgPT4gd2luZG93Lm9wZW4oJ2h0dHBzOi8va28tZmkuY29tL3Z2dW5kZXJsb3JlJywgJ19ibGFuaycpO1xuXHQgIH1cblx0ICBcblx0XHRwcml2YXRlIHJlbmRlckZpcnN0UnVuQ2FyZChyb290OiBIVE1MRWxlbWVudCl7XG5cblx0XHRcdC8vIDEpIE91dGVyIHdyYXBwZXJcblx0XHRcdGNvbnN0IGNhcmQgPSByb290LmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3Z2dW5kZXJsb3JlLWZpcnN0LXJ1bicgfSk7XG5cdFx0XHRPYmplY3QuYXNzaWduKGNhcmQuc3R5bGUsIHtcblx0XHRcdGRpc3BsYXk6ICdmbGV4Jyxcblx0XHRcdGZsZXhEaXJlY3Rpb246ICdjb2x1bW4nLFxuXHRcdFx0YWxpZ25JdGVtczogJ2NlbnRlcicsXG5cdFx0XHR0ZXh0QWxpZ246ICdjZW50ZXInLFxuXHRcdFx0bWFyZ2luVG9wOiAnMmVtJyxcblx0XHRcdHBhZGRpbmc6ICcxZW0nLFxuXHRcdFx0Ym9yZGVyOiAnMnB4IHNvbGlkIHZhcigtLWRpdmlkZXItY29sb3IpJyxcblx0XHRcdGJvcmRlclJhZGl1czogJzE4cHgnLCAgICAgICAgLyogKG9wdGlvbmFsKSByb3VuZCB0aGUgY29ybmVycyBzbGlnaHRseSAqL1xuXHRcdFx0YmFja2dyb3VuZENvbG9yOiAndmFyKC0tYmFja2dyb3VuZC1wcmltYXJ5KScsIC8qIChvcHRpb25hbCkgd2hpdGUvZ3JheSBiYWNrZ3JvdW5kICovXG5cdFx0XHR9KTtcblx0XHRcblx0XHRcdC8vIDIpIEhlYWRlclxuXHRcdFx0Y29uc3QgdGl0bGUgPSBjYXJkLmNyZWF0ZUVsKCdoMicsIHtcblx0XHRcdHRleHQ6ICdcdUQ4M0NcdURGRjAgV2VsY29tZSB0byBWVnVuZGVybG9yZScsXG5cdFx0XHRjbHM6ICd2di1jYXJkLXRpdGxlJyxcblx0XHRcdH0pO1xuXHRcdFx0Ly8gR2l2ZSB0aGUgdGl0bGUgYSBsaXR0bGUgYm90dG9tIG1hcmdpblxuXHRcdFx0dGl0bGUuc3R5bGUubWFyZ2luQm90dG9tID0gJzAuNWVtJztcblx0XHRcblx0XHRcdC8vIDMpIEluc3RydWN0aW9uYWwgY29weVxuXHRcdFx0Y29uc3QgZGVzYyA9IGNhcmQuY3JlYXRlRWwoJ3AnLCB7XG5cdFx0XHR0ZXh0OlxuXHRcdFx0XHQnR2V0IHN0YXJ0ZWQgYnkgaW5zdGFsbGluZyB0aGUgZGVmYXVsdCB0b29sa2l0XHUyMDE0XFxub3IgY2hvb3NlIGluZGl2aWR1YWwgcGllY2VzIHRvIHN1aXQgeW91ciB2YXVsdC4nLFxuXHRcdFx0Y2xzOiAndnYtY2FyZC1kZXNjJyxcblx0XHRcdH0pO1xuXHRcdFx0Ly8gU2xpZ2h0IGJvdHRvbSBtYXJnaW4gc28gaXQgZG9lc24ndCBidXR0IHJpZ2h0IHVwIGFnYWluc3QgdGhlIGJ1dHRvbnNcblx0XHRcdGRlc2Muc3R5bGUubWFyZ2luQm90dG9tID0gJzEuMjVlbSc7XG5cbi8vIFx1MjUwMFx1MjUwMFx1MjUwMCBSVUxFU0VUIC8gUkVGRVJFTkNFIEdSSUQgXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXG5jb25zdCBwbHVnaW4gPSB0aGlzLnBsdWdpbjtcblxuLy8gMSkgR3JpZCBjb250YWluZXJcbmNvbnN0IGdyaWQgPSBjYXJkLmNyZWF0ZURpdigpO1xuT2JqZWN0LmFzc2lnbihncmlkLnN0eWxlLCB7XG4gIGRpc3BsYXk6ICdncmlkJyxcbiAgZ3JpZFRlbXBsYXRlQ29sdW1uczogJ21heC1jb250ZW50IG1heC1jb250ZW50JyxcbiAgY29sdW1uR2FwOiAnMXJlbScsXG4gIHJvd0dhcDogJzAuMjVyZW0nLFxuICBqdXN0aWZ5Q29udGVudDogJ2NlbnRlcicsXG4gIGp1c3RpZnlJdGVtczogJ2NlbnRlcicsXG4gIG1hcmdpbkJvdHRvbTogJzFyZW0nLFxufSk7XG5cbi8vIDIpIEhlYWRlciByb3dcbmNvbnN0IGxhYmVsUnMgPSBncmlkLmNyZWF0ZUVsKCdkaXYnLCB7IHRleHQ6ICdSdWxlc2V0JyB9KTtcbmxhYmVsUnMuc3R5bGUuZm9udFdlaWdodCA9ICdib2xkJztcbmNvbnN0IGxhYmVsUmVmID0gZ3JpZC5jcmVhdGVFbCgnZGl2JywgeyB0ZXh0OiAnUmVmZXJlbmNlIChvcHRpb25hbCknIH0pO1xubGFiZWxSZWYuc3R5bGUuZm9udFdlaWdodCA9ICdib2xkJztcblxuLy8gMykgSW5wdXQgY2VsbHNcbmNvbnN0IHJzQ2VsbCA9IGdyaWQuY3JlYXRlRGl2KHsgYXR0cjogeyBzdHlsZTogJ3RleHQtYWxpZ246Y2VudGVyJyB9IH0pO1xuY29uc3QgcmVmQ2VsbCA9IGdyaWQuY3JlYXRlRGl2KHsgYXR0cjogeyBzdHlsZTogJ3RleHQtYWxpZ246Y2VudGVyJyB9IH0pO1xuXG4vLyA0KSBNdXRlZCwgaXRhbGljIHN1bW1hcnkgYmFyIChzcGFucyBib3RoIGNvbHVtbnMpXG5jb25zdCBzdW1tYXJ5QmFyID0gZ3JpZC5jcmVhdGVEaXYoKTtcbk9iamVjdC5hc3NpZ24oc3VtbWFyeUJhci5zdHlsZSwge1xuICBncmlkQ29sdW1uOiAnMSAvIHNwYW4gMicsXG4gIGRpc3BsYXk6ICdmbGV4JyxcbiAgYWxpZ25JdGVtczogJ2NlbnRlcicsXG4gIGZsZXhXcmFwOiAnd3JhcCcsXG4gIGdhcDogJzAuNXJlbScsXG4gIGZvbnRTaXplOiAnMC44NWVtJyxcbiAgY29sb3I6ICd2YXIoLS10ZXh0LW11dGVkKScsXG4gIGZvbnRTdHlsZTogJ2l0YWxpYycsXG4gIG1hcmdpblRvcDogJzAuMjVyZW0nLFxuICBtYXJnaW5Cb3R0b206ICcxcmVtJyxcbn0pO1xuY29uc3QgcnVsZXNldFNwYW4gPSBzdW1tYXJ5QmFyLmNyZWF0ZVNwYW4oe1xuICB0ZXh0OiBgUnVsZXNldDogJHtcbiAgICBwbHVnaW4uc2V0dGluZ3MucnVsZXNldENvbXBlbmRpdW1cbiAgICAgID8gYEQmRCA1RSAoJHtwbHVnaW4uc2V0dGluZ3MucnVsZXNldENvbXBlbmRpdW19KWBcbiAgICAgIDogJydcbiAgfWAsXG59KTtcbnJ1bGVzZXRTcGFuLnN0eWxlLmZvbnRXZWlnaHQgPSAnYm9sZCc7XG5zdW1tYXJ5QmFyLmNyZWF0ZVNwYW4oeyB0ZXh0OiAnUmVmZXJlbmNlczonIH0pO1xuY29uc3QgY2hpcHNXcmFwcGVyID0gc3VtbWFyeUJhci5jcmVhdGVEaXYoKTtcbk9iamVjdC5hc3NpZ24oY2hpcHNXcmFwcGVyLnN0eWxlLCB7IGRpc3BsYXk6ICdmbGV4JywgZ2FwOiAnNHB4JyB9KTtcblxuLy8gSGVscGVyIHRvIHJlbmRlciBhIGNoaXBcbmZ1bmN0aW9uIGFkZENoaXAoaWQ6IHN0cmluZykge1xuXHRjb25zdCBlZCA9IEFWQUlMQUJMRV9FRElUSU9OUy5maW5kKGUgPT4gZS5pZCA9PT0gaWQpITtcblx0Y29uc3QgY2hpcCA9IGNoaXBzV3JhcHBlci5jcmVhdGVEaXYoe1xuXHQgIGF0dHI6IHtcblx0XHRzdHlsZTpcblx0XHQgICdiYWNrZ3JvdW5kOiB2YXIoLS1pbnRlcmFjdGl2ZS1hY2NlbnQpOyBjb2xvcjogd2hpdGU7IHBhZGRpbmc6MnB4IDZweDsgJyArXG5cdFx0ICAnYm9yZGVyLXJhZGl1czo0cHg7IGRpc3BsYXk6aW5saW5lLWZsZXg7IGFsaWduLWl0ZW1zOmNlbnRlcjsgZ2FwOjRweDsnXG5cdCAgfVxuXHR9KTtcblx0Y2hpcC5jcmVhdGVTcGFuKHsgdGV4dDogZWQubGFiZWwgfSk7XG5cdGNvbnN0IHJlbSA9IGNoaXAuY3JlYXRlU3Bhbih7XG5cdCAgdGV4dDogJ1x1MDBENycsXG5cdCAgYXR0cjogeyBzdHlsZTogJ2N1cnNvcjpwb2ludGVyOyBtYXJnaW4tbGVmdDo0cHg7JyB9XG5cdH0pO1xuXHRyZW0ub25jbGljayA9IGFzeW5jICgpID0+IHtcblx0ICBwbHVnaW4uc2V0dGluZ3MucnVsZXNldFJlZmVyZW5jZSA9IHBsdWdpbi5zZXR0aW5ncy5ydWxlc2V0UmVmZXJlbmNlLmZpbHRlcih4ID0+IHggIT09IGlkKTtcblx0ICBhd2FpdCBwbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG5cdCAgY2hpcC5yZW1vdmUoKTtcblx0ICB1cGRhdGVJbnN0YWxsQnV0dG9ucygpO1xuXHR9O1xuICB9XG4gIDtcblxuLy8gSW5pdGlhbCBjaGlwcyBkcmF3XG5wbHVnaW4uc2V0dGluZ3MucnVsZXNldFJlZmVyZW5jZS5mb3JFYWNoKGUgPT4gYWRkQ2hpcChlKSk7XG5cbi8vIDUpIFJ1bGVzZXQgZHJvcGRvd25cbmNvbnN0IHJzRHJvcGRvd24gPSBuZXcgRHJvcGRvd25Db21wb25lbnQocnNDZWxsKTtcbnJzRHJvcGRvd24uYWRkT3B0aW9uKCcnLCAnU2VsZWN0IGVkaXRpb25cdTIwMjYnKTtcbkFWQUlMQUJMRV9FRElUSU9OUy5mb3JFYWNoKChlZDogRWRpdGlvbikgPT4ge1xuICByc0Ryb3Bkb3duLmFkZE9wdGlvbihlZC5pZCwgZWQubGFiZWwpO1xufSk7XG5yc0Ryb3Bkb3duXG4gIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5ydWxlc2V0Q29tcGVuZGl1bSlcbiAgLm9uQ2hhbmdlKGFzeW5jICh2YWwpID0+IHtcbiAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5ydWxlc2V0Q29tcGVuZGl1bSA9IHZhbDtcbiAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcblxuICAgIC8vIExpdmVcdTIwMTB1cGRhdGUgeW91ciBzdW1tYXJ5IGJhcjpcbiAgICBjb25zdCBjaG9zZW4gPSBBVkFJTEFCTEVfRURJVElPTlMuZmluZChlID0+IGUuaWQgPT09IHZhbCk7XG4gICAgcnVsZXNldFNwYW4udGV4dENvbnRlbnQgPSBjaG9zZW4gPyBjaG9zZW4ubGFiZWwgOiAnJztcblxuICAgIC8vIENsZWFyIGFueSBleGlzdGluZyByZWZlcmVuY2UgY2hpcHM6XG4gICAgY2hpcHNXcmFwcGVyLmVtcHR5KCk7XG5cbiAgICB1cGRhdGVJbnN0YWxsQnV0dG9ucygpO1xuICB9KTtcblxuICBjb25zdCBzZWFyY2hXcmFwcGVyRWwgPSByZWZDZWxsLmNyZWF0ZURpdih7IGF0dHI6IHsgc3R5bGU6ICd0ZXh0LWFsaWduOmNlbnRlcjsnIH0gfSk7XG4gIGNvbnN0IHNlYXJjaENvbXAgPSBuZXcgU2VhcmNoQ29tcG9uZW50KHNlYXJjaFdyYXBwZXJFbCk7XG4gIHNlYXJjaENvbXAuc2V0UGxhY2Vob2xkZXIoJ0FkZCByZWZlcmVuY2UgcnVsZXNcdTIwMjYnKTtcbiAgY29uc3Qgc3VnZ2VzdGlvbklucHV0RWwgPSBzZWFyY2hDb21wLmlucHV0RWw7XG4gIFxuICBuZXcgY2xhc3MgZXh0ZW5kcyBBYnN0cmFjdElucHV0U3VnZ2VzdDxzdHJpbmc+IHtcblx0Y29uc3RydWN0b3IoYXBwOiBBcHAsIGlucHV0RWw6IEhUTUxJbnB1dEVsZW1lbnQpIHtcblx0ICBzdXBlcihhcHAsIGlucHV0RWwpO1xuXHR9XG4gIFxuXHQvLyAxKSBQcm9wb3NlIGVkaXRpb24gSURzIChtaW51cyB0aGUgb25lIHRoZXkgcGlja2VkIGFzIHRoZSBtYWluIHJ1bGVzZXQpXG5cdGdldFN1Z2dlc3Rpb25zKGlucHV0OiBzdHJpbmcpOiBzdHJpbmdbXSB7XG5cdCAgcmV0dXJuIEFWQUlMQUJMRV9FRElUSU9OU1xuXHRcdC5maWx0ZXIoZWQgPT4gZWQuaWQgIT09IHBsdWdpbi5zZXR0aW5ncy5ydWxlc2V0Q29tcGVuZGl1bSkgICAgICAgICAgICAvLyBmaWx0ZXIgb3V0IHRoZSBjaG9zZW4gcnVsZXNldFxuXHRcdC5maWx0ZXIoZWQgPT4gZWQubGFiZWwudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhpbnB1dC50b0xvd2VyQ2FzZSgpKSkgICAgIC8vIG1hdGNoIG9uIGxhYmVsIHRleHRcblx0XHQubWFwKGVkID0+IGVkLmlkKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyByZXR1cm4gdGhlIElEIGZvciBlYWNoXG5cdH1cbiAgXG5cdC8vIDIpIFJlbmRlciB0aGUgaHVtYW4tcmVhZGFibGUgbGFiZWxcblx0cmVuZGVyU3VnZ2VzdGlvbihpdGVtOiBzdHJpbmcsIGVsOiBIVE1MRWxlbWVudCk6IHZvaWQge1xuXHQgIGNvbnN0IGVkID0gQVZBSUxBQkxFX0VESVRJT05TLmZpbmQoZSA9PiBlLmlkID09PSBpdGVtKSE7XG5cdCAgZWwuY3JlYXRlRGl2KHsgdGV4dDogZWQubGFiZWwgfSk7XG5cdH1cbiAgXG5cdC8vIDMpIFdoZW4gdGhleSBwaWNrIG9uZSwgc3RvcmUgaXRzIElEIGFuZCBhZGQgYSBjaGlwXG5cdHNlbGVjdFN1Z2dlc3Rpb24oaXRlbTogc3RyaW5nKTogdm9pZCB7XG5cdCAgaWYgKCFwbHVnaW4uc2V0dGluZ3MucnVsZXNldFJlZmVyZW5jZS5pbmNsdWRlcyhpdGVtKSkge1xuXHRcdHBsdWdpbi5zZXR0aW5ncy5ydWxlc2V0UmVmZXJlbmNlLnB1c2goaXRlbSk7XG5cdFx0cGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuXHRcdGFkZENoaXAoaXRlbSk7XG5cdCAgfVxuXHQgIHRoaXMuY2xvc2UoKTtcblx0ICBzdWdnZXN0aW9uSW5wdXRFbC52YWx1ZSA9ICcnO1xuXHQgIHVwZGF0ZUluc3RhbGxCdXR0b25zKCk7XG5cdH1cbiAgfSh0aGlzLmFwcCwgc3VnZ2VzdGlvbklucHV0RWwpO1xuICBcblxuXG5cblxuXHRcdFx0Ly8gXHUyNTAwXHUyNTAwXHUyNTAwIEJ1dHRvbiByb3cgXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXG5cdFx0XHRjb25zdCBidG5Sb3cxID0gY2FyZC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICd2di1idXR0b24tcm93JyB9KTtcblx0XHRcdE9iamVjdC5hc3NpZ24oYnRuUm93MS5zdHlsZSwge1xuXHRcdFx0ZGlzcGxheTogJ2ZsZXgnLFxuXHRcdFx0Z2FwOiAnMC43NWVtJyxcblx0XHRcdGp1c3RpZnlDb250ZW50OiAnY2VudGVyJyxcblx0XHRcdG1hcmdpbkJvdHRvbTogJzEuNWVtJyxcblx0XHRcdH0pO1xuXG5cdFx0XHRjb25zdCBpbnN0YWxsQnRuMSA9IGJ0blJvdzEuY3JlYXRlRWwoJ2J1dHRvbicsIHtcblx0XHRcdHRleHQ6ICdJbnN0YWxsIFRvb2xraXQnLFxuXHRcdFx0Y2xzOiAnbW9kLWN0YScsXG5cdFx0XHR9KTtcblx0XHRcdGluc3RhbGxCdG4xLm9uQ2xpY2tFdmVudCgoKSA9PlxuXHRcdFx0bmV3IENvbmZpcm1GcmVzaEluc3RhbGxNb2RhbCh0aGlzLmFwcCwgdGhpcy5wbHVnaW4pLm9wZW4oKVxuXHRcdFx0KTtcblxuXHRcdFx0Y29uc3QgY3VzdG9tQnRuMSA9IGJ0blJvdzEuY3JlYXRlRWwoJ2J1dHRvbicsIHtcblx0XHRcdHRleHQ6ICdDdXN0b20gSW5zdGFsbCcsXG5cdFx0XHRjbHM6ICdtb2QtY3RhJyxcblx0XHRcdH0pO1xuXHRcdFx0T2JqZWN0LmFzc2lnbihjdXN0b21CdG4xLnN0eWxlLCB7XG5cdFx0XHRiYWNrZ3JvdW5kOiAnbm9uZScsXG5cdFx0XHRib3JkZXI6ICcxcHggc29saWQgdmFyKC0taW50ZXJhY3RpdmUtYWNjZW50KScsXG5cdFx0XHRjb2xvcjogJ3ZhcigtLXRleHQtbm9ybWFsKScsXG5cdFx0XHR9KTtcblx0XHRcdGN1c3RvbUJ0bjEub25DbGlja0V2ZW50KCgpID0+IHNob3dDdXN0b21JbnN0YWxsTW9kYWwodGhpcy5hcHAsIHRoaXMucGx1Z2luKSk7XG5cblx0XHRcdC8vIFx1MjUwMFx1MjUwMFx1MjUwMCBIZWxwZXIgdG8gZW5hYmxlL2Rpc2FibGUgdGhlIGJ1dHRvbnMgXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXG5cdFx0XHRjb25zdCB1cGRhdGVJbnN0YWxsQnV0dG9ucyA9ICgpID0+IHtcblx0XHRcdGNvbnN0IGhhc1J1bGVzZXQgPSBCb29sZWFuKHRoaXMucGx1Z2luLnNldHRpbmdzLnJ1bGVzZXRDb21wZW5kaXVtKTtcblx0XHRcdGluc3RhbGxCdG4xLnRvZ2dsZUF0dHJpYnV0ZSgnZGlzYWJsZWQnLCAhaGFzUnVsZXNldCk7XG5cdFx0XHRjdXN0b21CdG4xLnRvZ2dsZUF0dHJpYnV0ZSgnZGlzYWJsZWQnLCAhaGFzUnVsZXNldCk7XG5cdFx0XHR9O1xuXG5cdFx0XHQvLyA3KSBJbml0aWFsIGNhbGwsIGluIGNhc2Ugd2VcdTIwMTlyZSByZS1yZW5kZXJpbmdcblx0XHRcdHVwZGF0ZUluc3RhbGxCdXR0b25zKCk7XG5cblx0XHRcblx0XHRcdC8vIDUpIFx1MjAxQ1NraXBcdTIwMUQgbGlua1xuXHRcdFx0Y29uc3Qgc2tpcFBhcmEgPSBjYXJkLmNyZWF0ZUVsKCdwJywgeyBjbHM6ICd2di1za2lwLWxpbmsnIH0pO1xuXHRcdFx0Ly8gQ2VudGVyIGl0IGFuZCBnaXZlIGl0IGEgdGlueSB0b3AgbWFyZ2luXG5cdFx0XHRPYmplY3QuYXNzaWduKHNraXBQYXJhLnN0eWxlLCB7XG5cdFx0XHR0ZXh0QWxpZ246ICdjZW50ZXInLFxuXHRcdFx0bWFyZ2luVG9wOiAnMC4yNWVtJyxcblx0XHRcdH0pO1xuXHRcdFx0c2tpcFBhcmFcblx0XHRcdC5jcmVhdGVFbCgnYScsIHtcblx0XHRcdHRleHQ6ICdBbHJlYWR5IGhhdmUgdGhlIFRvb2xraXQ/IFNob3cgbWUgdGhlIHNldHRpbmdzIFx1MjE5MicsXG5cdFx0XHR9KVxuXHRcdFx0Lm9uQ2xpY2tFdmVudChhc3luYyAoKSA9PiB7XG5cdFx0XHQvLyAxKSBDcmVhdGUgdGhlIGhpZGRlbiBtYXJrZXIgZmlsZSBzbyBcImZpcnN0XHUyMDEwcnVuXCIgbmV2ZXIgc2hvd3MgYWdhaW46XG5cdFx0XHRjb25zdCBtYXJrZXJQYXRoID0gJy52dnVuZGVybG9yZV9pbnN0YWxsZWQnO1xuXHRcdFx0dHJ5IHtcblx0XHRcdFx0Ly8gT25seSB3cml0ZSBpdCBpZiBpdCBkb2VzIG5vdCBleGlzdCB5ZXRcblx0XHRcdFx0aWYgKCEoYXdhaXQgdGhpcy5hcHAudmF1bHQuYWRhcHRlci5leGlzdHMobWFya2VyUGF0aCkpKSB7XG5cdFx0XHRcdGF3YWl0IHRoaXMuYXBwLnZhdWx0LmNyZWF0ZShtYXJrZXJQYXRoLCAnJyk7XG5cdFx0XHRcdH1cblx0XHRcdH0gY2F0Y2ggKGUpIHtcblx0XHRcdFx0Y29uc29sZS5lcnJvcignXHUyNzRDIEZhaWxlZCB0byBjcmVhdGUgbWFya2VyIGZpbGU6JywgZSk7XG5cdFx0XHR9XG5cblx0XHRcblx0XHRcdC8vIDMpIFJlXHUyMDEwcmVuZGVyIHRoZSBub3JtYWwgc2V0dGluZ3MgVUlcblx0XHRcdHRoaXMuZGlzcGxheSgpO1xuXHRcdFx0fSk7XG5cdFx0fVxuXHQgIFxuXHQgIFxuXHRwcml2YXRlIHZlcnNpb25WYWx1ZUVsOiBIVE1MRWxlbWVudCB8IG51bGwgPSBudWxsO1xuXHRwcml2YXRlIGZvcmNlV2FybmluZ0VsOiBIVE1MRWxlbWVudCB8IG51bGwgPSBudWxsO1xuXG5cdGFzeW5jIGRpc3BsYXkoKTogUHJvbWlzZTx2b2lkPiB7XG4gICBcdFx0Y29uc29sZS5sb2coXCJcdUQ4M0RcdUREMjcgZGlzcGxheSgpIGNhbGxlZFwiKTtcblx0XHRjb25zdCB7IGNvbnRhaW5lckVsIH0gPSB0aGlzO1xuXHRcdGNvbnN0IHNhdmVkU2Nyb2xsVG9wID0gY29udGFpbmVyRWwuc2Nyb2xsVG9wO1xuXHRcdGNvbnRhaW5lckVsLmVtcHR5KCk7XG5cblx0XHRjb25zdCBtYXJrZXJQYXRoID0gJy52dnVuZGVybG9yZV9pbnN0YWxsZWQnO1xuXHRcdGNvbnN0IGlzSW5zdGFsbGVkID0gYXdhaXQgdGhpcy5hcHAudmF1bHQuYWRhcHRlci5leGlzdHMobWFya2VyUGF0aCk7XG5cdFx0aWYgKCFpc0luc3RhbGxlZCkge1xuXHRcdFx0Y29uc29sZS5sb2coXCJcdUQ4M0VcdURERUEgZmlyc3QtcnVuOiBtYXJrZXIgbWlzc2luZyBcdTIxOTIgc2hvdyBpbnN0YWxsZXIgY2FyZFwiKTtcblx0XHRcdHRoaXMucmVuZGVyRmlyc3RSdW5DYXJkKGNvbnRhaW5lckVsKTtcblx0XHRcdFx0Y29udGFpbmVyRWwuc2Nyb2xsVG9wID0gc2F2ZWRTY3JvbGxUb3A7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0dGhpcy5yZW5kZXJIZWFkZXIoY29udGFpbmVyRWwpOyAvLyBcdUQ4M0RcdURDNDhcdTAwQTBBbHdheXMgcmVuZGVyIGhlYWRlciBmaXJzdFxuXG5cdDsoYXN5bmMgKCkgPT4ge1x0XG5cdFx0XG5cdFx0LyoqIFx1MjUwMFx1MjUwMFx1MjUwMCBWRVJTSU9OIFNFQ1RJT04gXHUyNTAwXHUyNTAwXHUyNTAwICovXG5cdFx0Y29uc3QgdmVyc2lvblJvdyA9IGNvbnRhaW5lckVsLmNyZWF0ZURpdigpO1xuXHRcdHZlcnNpb25Sb3cuc3R5bGUubWFyZ2luQm90dG9tID0gJzFlbSc7XG5cdFx0dmVyc2lvblJvdy5zdHlsZS5kaXNwbGF5ID0gJ2ZsZXgnO1xuXHRcdHZlcnNpb25Sb3cuc3R5bGUuanVzdGlmeUNvbnRlbnQgPSAnc3BhY2UtYmV0d2Vlbic7XG5cdFx0dmVyc2lvblJvdy5zdHlsZS5hbGlnbkl0ZW1zID0gJ2ZsZXgtc3RhcnQnO1xuXHRcdHZlcnNpb25Sb3cuc3R5bGUuZ2FwID0gJzJlbSc7XG5cdFx0dmVyc2lvblJvdy5zdHlsZS5mbGV4V3JhcCA9ICd3cmFwJztcblx0XHR2ZXJzaW9uUm93LnN0eWxlLmJvcmRlckJvdHRvbSA9ICcxcHggc29saWQgdmFyKC0tZGl2aWRlci1jb2xvciknO1xuXG5cdFx0Y29uc3QgdmVyc2lvbkluZm8gPSB2ZXJzaW9uUm93LmNyZWF0ZURpdigpO1xuXHRcdHZlcnNpb25JbmZvLnN0eWxlLmRpc3BsYXkgPSAnZmxleCc7XG5cdFx0dmVyc2lvbkluZm8uc3R5bGUuZmxleERpcmVjdGlvbiA9ICdjb2x1bW4nO1xuXHRcdHZlcnNpb25JbmZvLnN0eWxlLmdhcCA9ICcwLjI1ZW0nO1xuXG5cdFx0bGV0IGluc3RhbGxlZCA9ICdOb3QgaW5zdGFsbGVkJztcblx0XHR0cnkge1xuXHRcdFx0Y29uc3QgdmVyQ29udGVudCA9IGF3YWl0IHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXIucmVhZCgnLnZlcnNpb24uanNvbicpO1xuXHRcdFx0Y29uc3QganNvbiA9IEpTT04ucGFyc2UodmVyQ29udGVudCk7XG5cdFx0XHRpbnN0YWxsZWQgPSBqc29uLnZlcnNpb24gPz8gJ05vdCBpbnN0YWxsZWQnO1xuXHRcdH0gY2F0Y2ggKGVycikge1xuXHRcdFx0Y29uc29sZS53YXJuKCdDb3VsZCBub3QgcmVhZCAudmVyc2lvbi5qc29uIGZyb20gdmF1bHQ6JywgZXJyKTtcblx0XHR9XG5cdFx0Y29uc3QgbGF0ZXN0ID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MubGF0ZXN0VG9vbGtpdFZlcnNpb24gPz8gJ0NvdWxkIG5vdCBmZXRjaCc7XG5cdFx0Y29uc3QgaXNNYXRjaCA9IGluc3RhbGxlZCA9PT0gbGF0ZXN0O1xuXG5cdFx0Y29uc3QgdmF1bHRSb3cgPSB2ZXJzaW9uSW5mby5jcmVhdGVEaXYoKTtcblx0XHR2YXVsdFJvdy5hcHBlbmRUZXh0KCdWYXVsdCBUb29sa2l0IFZlcnNpb246ICcpO1xuXHRcdFxuXHRcdHRoaXMudmVyc2lvblZhbHVlRWwgPSB2YXVsdFJvdy5jcmVhdGVTcGFuKCk7ICAvLyBcdUQ4M0RcdUREMjUgc2F2ZSByZWZcblx0XHR0aGlzLnZlcnNpb25WYWx1ZUVsLnRleHRDb250ZW50ID0gaW5zdGFsbGVkO1xuXHRcdHRoaXMudmVyc2lvblZhbHVlRWwuc3R5bGUuZm9udFdlaWdodCA9ICdib2xkJztcblx0XHR0aGlzLnZlcnNpb25WYWx1ZUVsLnN0eWxlLmNvbG9yID0gaXNNYXRjaCA/ICd2YXIoLS10ZXh0LXN1Y2Nlc3MpJyA6ICd2YXIoLS10ZXh0LWVycm9yKSc7XG5cdFx0XG5cdFx0Y29uc3QgbGF0ZXN0Um93ID0gdmVyc2lvbkluZm8uY3JlYXRlRWwoJ2RpdicsIHsgdGV4dDogJ0xhdGVzdCBPZmZpY2lhbCBWZXJzaW9uOiAnIH0pO1xuXHRcdGxhdGVzdFJvdy5jcmVhdGVTcGFuKHtcblx0XHRcdHRleHQ6IGxhdGVzdCxcblx0XHRcdGF0dHI6IHsgc3R5bGU6ICdmb250LXdlaWdodDogYm9sZDsgY29sb3I6IHZhcigtLXRleHQtc3VjY2Vzcyk7JyB9XG5cdFx0fSk7XG5cblx0XHRjb25zdCB2ZXJzaW9uQ29udHJvbHMgPSB2ZXJzaW9uUm93LmNyZWF0ZURpdigpO1xuXHRcdHZlcnNpb25Db250cm9scy5zdHlsZS5kaXNwbGF5ID0gJ2ZsZXgnO1xuXHRcdHZlcnNpb25Db250cm9scy5zdHlsZS5mbGV4RGlyZWN0aW9uID0gJ2NvbHVtbic7XG5cdFx0dmVyc2lvbkNvbnRyb2xzLnN0eWxlLmFsaWduSXRlbXMgPSAnZmxleC1lbmQnO1xuXHRcdHZlcnNpb25Db250cm9scy5zdHlsZS5nYXAgPSAnMC41ZW0nO1xuXG5cdFx0Y29uc3QgYnV0dG9uUm93ID0gdmVyc2lvbkNvbnRyb2xzLmNyZWF0ZURpdigpO1xuXHRcdGJ1dHRvblJvdy5zdHlsZS5kaXNwbGF5ID0gJ2ZsZXgnO1xuXHRcdGJ1dHRvblJvdy5zdHlsZS5nYXAgPSAnMC41ZW0nO1xuXG5cdFx0Y29uc3QgY2hlY2tCdG4gPSBidXR0b25Sb3cuY3JlYXRlRWwoJ2J1dHRvbicsIHtcblx0XHRcdHRleHQ6IGluc3RhbGxlZCAhPT0gbGF0ZXN0ID8gJ1ByZXZpZXcgVXBkYXRlJyA6ICdDaGVjayBmb3IgVXBkYXRlcycsXG5cdFx0XHRjbHM6ICdtb2QtY3RhJ1xuXHRcdH0pO1xuXHRcdGNoZWNrQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgYXN5bmMgKCkgPT4ge1xuXHRcdFx0aWYgKGluc3RhbGxlZCAhPT0gbGF0ZXN0KSB7XG5cdFx0XHRcdHRoaXMucGx1Z2luLnByZXZpZXdVcGRhdGVzTW9kYWwoKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLmNoZWNrRm9yVXBkYXRlcygpO1xuXHRcdFx0fVxuXHRcdH0pO1xuXHRcdGNvbnN0IGNoYW5nZWxvZ0J0biA9IGJ1dHRvblJvdy5jcmVhdGVFbCgnYnV0dG9uJywgeyB0ZXh0OiAnXHVEODNEXHVEQ0Q2IFZpZXcgQ2hhbmdlbG9nJyB9KTtcblx0XHRjaGFuZ2Vsb2dCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG5cdFx0XHRuZXcgTWFya2Rvd25QcmV2aWV3TW9kYWwodGhpcy5hcHAsIHRoaXMucGx1Z2luLmNoYW5nZWxvZykub3BlbigpO1xuXHRcdH0pO1xuXHRcdGlmICh0aGlzLnBsdWdpbi5zZXR0aW5ncy5sYXN0Q2hlY2tlZCkge1xuXHRcdFx0Y29uc3QgbGFzdENoZWNrZWQgPSB2ZXJzaW9uQ29udHJvbHMuY3JlYXRlRGl2KCk7XG5cdFx0XHRsYXN0Q2hlY2tlZC5zdHlsZS5mb250U2l6ZSA9ICcxMXB4Jztcblx0XHRcdGxhc3RDaGVja2VkLnN0eWxlLmNvbG9yID0gJ3ZhcigtLXRleHQtbXV0ZWQpJztcblx0XHRcdGxhc3RDaGVja2VkLnRleHRDb250ZW50ID0gYExhc3QgY2hlY2tlZDogJHtuZXcgRGF0ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5sYXN0Q2hlY2tlZCkudG9Mb2NhbGVTdHJpbmcoKX1gO1xuXHRcdH1cblxuXHRcdFxuXG5cdFx0LyoqIFx1MjUwMFx1MjUwMFx1MjUwMCBGSVggWU9VUiBWQVVMVCBTRUNUSU9OIChjb2xsYXBzaWJsZSwgZml4ZWRcdTIwMTBpY29uKSBcdTI1MDBcdTI1MDBcdTI1MDAgKi9cblx0XHRjb25zdCBmaXhEZXRhaWxzID0gY29udGFpbmVyRWwuY3JlYXRlRWwoJ2RldGFpbHMnLCB7IGNsczogJ3ZrLXNlY3Rpb24nIH0pO1xuXG5cdFx0Ly8gXHUyNTAwXHUyNTAwXHUyNTAwIFJlcGxhY2UgeW91ciBvbGQgZml4SGVhZGVyIHdpdGggdGhpcyA8c3VtbWFyeT4gXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXG5cdFx0Y29uc3QgZml4SGVhZGVyID0gZml4RGV0YWlscy5jcmVhdGVFbCgnc3VtbWFyeScsIHsgY2xzOiAndmstc2VjdGlvbi1oZWFkZXInIH0pO1xuXHRcdE9iamVjdC5hc3NpZ24oZml4SGVhZGVyLnN0eWxlLCB7XG5cdFx0ZGlzcGxheTogJ2ZsZXgnLFxuXHRcdGZsZXhEaXJlY3Rpb246ICdjb2x1bW4nLFxuXHRcdGFsaWduSXRlbXM6ICdzdHJldGNoJyxcblx0XHRwYWRkaW5nOiAnMC41ZW0gMCcsXG5cdFx0Ym9yZGVyQm90dG9tOiAnMXB4IHNvbGlkIHZhcigtLWRpdmlkZXItY29sb3IpJyxcblx0XHRjdXJzb3I6ICdwb2ludGVyJyxcblx0XHR9KTtcblxuXHRcdC8vIFx1MjUwMFx1MjUwMCBDcmVhdGUgYSBzaW5nbGUgZmxleFx1MjAxMHJvdyBpbnNpZGUgdGhlIHN1bW1hcnkgZm9yIHRpdGxlK2ljb24gXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXG5cdFx0Y29uc3QgZml4SGVhZGVyUm93ID0gZml4SGVhZGVyLmNyZWF0ZURpdih7XG5cdFx0YXR0cjoge1xuXHRcdFx0c3R5bGU6IGBcblx0XHRcdGRpc3BsYXk6IGZsZXg7XG5cdFx0XHRqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47XG5cdFx0XHRhbGlnbi1pdGVtczogZmxleC1lbmQ7XG5cdFx0XHRgLFxuXHRcdH0sXG5cdFx0fSk7XG5cblx0XHQvLyBcdTI1MDBcdTI1MDAgTGVmdCBzaWRlOiB0aXRsZSArIGRlc2NyaXB0aW9uIGJsb2NrIFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFxuXHRcdGNvbnN0IGZpeFRpdGxlQmxvY2sgPSBmaXhIZWFkZXJSb3cuY3JlYXRlRGl2KHtcblx0XHRhdHRyOiB7IHN0eWxlOiAnZGlzcGxheTogZmxleDsgZmxleC1kaXJlY3Rpb246IGNvbHVtbjsnIH1cblx0XHR9KTtcblx0XHRmaXhUaXRsZUJsb2NrLmNyZWF0ZUVsKCdoNScsIHsgdGV4dDogJ0ZpeCBZb3VyIFZhdWx0JyB9KTtcblx0XHRmaXhUaXRsZUJsb2NrLmNyZWF0ZUVsKCdkaXYnLCB7XG5cdFx0dGV4dDogJ0ZpeCBhbmQgYnJva2VuLCBkZWxldGVkLCBvciBtaXNwbGFjZWQgZmlsZXMgaW4geW91ciB0b29sa2l0LicsXG5cdFx0Y2xzOiAnc2V0dGluZy1pdGVtLWRlc2NyaXB0aW9uJyxcblx0XHRhdHRyOiB7IHN0eWxlOiAnbWFyZ2luLXRvcDogMC4yNWVtOycgfSxcblx0XHR9KTtcblxuXHRcdC8vIFx1MjUwMFx1MjUwMCBSaWdodCBzaWRlOiBzdGF0aWMgdG9nZ2xlIGljb24gKHJvdGF0ZXMgaW4gcGxhY2Ugb25seSkgXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXG5cdFx0Y29uc3QgZml4VG9nZ2xlSWNvbiA9IGZpeEhlYWRlclJvdy5jcmVhdGVFbCgnc3BhbicsIHsgdGV4dDogJ1ZWJywgY2xzOiAndmstdG9nZ2xlLWljb24nIH0pO1xuXHRcdE9iamVjdC5hc3NpZ24oZml4VG9nZ2xlSWNvbi5zdHlsZSwge1xuXHRcdGZvbnRXZWlnaHQ6ICdib2xkJyxcblx0XHRkaXNwbGF5OiAnaW5saW5lLWJsb2NrJyxcblx0XHR0cmFuc2l0aW9uOiAndHJhbnNmb3JtIDAuMnMgZWFzZScsXG5cdFx0dHJhbnNmb3JtT3JpZ2luOiAnNTAlIDUwJScsIC8vIFJvdGF0ZSBhcm91bmQgaXRzIG93biBjZW50ZXJcblx0XHR1c2VyU2VsZWN0OiAnbm9uZScsXG5cdFx0dHJhbnNmb3JtOiBmaXhEZXRhaWxzLm9wZW4gPyAncm90YXRlKDBkZWcpJyA6ICdyb3RhdGUoMTgwZGVnKScsXG5cdFx0fSk7XG5cdFx0Zml4RGV0YWlscy5vbnRvZ2dsZSA9ICgpID0+IHtcblx0XHRmaXhUb2dnbGVJY29uLnN0eWxlLnRyYW5zZm9ybSA9IGZpeERldGFpbHMub3BlbiA/ICdyb3RhdGUoMGRlZyknIDogJ3JvdGF0ZSgxODBkZWcpJztcblx0XHR9O1xuXG5cdFx0Ly8gXHUyNTAwXHUyNTAwXHUyNTAwIEJvZHkgKHNhbWUgYXMgYmVmb3JlLCBqdXN0IGluZGVudGVkIHVuZGVyIDxkZXRhaWxzPikgXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXG5cdFx0Y29uc3QgZml4Qm9keSA9IGZpeERldGFpbHMuY3JlYXRlRGl2KHsgY2xzOiAndmstc2VjdGlvbi1ib2R5JyB9KTtcblx0XHRmaXhCb2R5LnN0eWxlLnBhZGRpbmdMZWZ0ID0gJzFlbSc7XG5cblx0XHQvLyBcdTI1MDBcdTI1MDAgQnV0dG9uICsgd2FybmluZyByb3cgXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXG5cdFx0Y29uc3QgZml4QnV0dG9uUm93ID0gZml4Qm9keS5jcmVhdGVEaXYoKTtcblx0XHRmaXhCdXR0b25Sb3cuc3R5bGUuZGlzcGxheSA9ICdmbGV4Jztcblx0XHRmaXhCdXR0b25Sb3cuc3R5bGUuanVzdGlmeUNvbnRlbnQgPSAnc3BhY2UtYmV0d2Vlbic7XG5cdFx0Zml4QnV0dG9uUm93LnN0eWxlLmFsaWduSXRlbXMgPSAnY2VudGVyJztcblx0XHRmaXhCdXR0b25Sb3cuc3R5bGUubWFyZ2luVG9wID0gJzAuNWVtJztcblxuXHRcdGNvbnN0IHdhcm5pbmdDb250YWluZXIgPSBmaXhCdXR0b25Sb3cuY3JlYXRlRGl2KCk7XG5cdFx0dGhpcy5mb3JjZVdhcm5pbmdFbCA9IHdhcm5pbmdDb250YWluZXI7XG5cblx0XHRsZXQgaW5zdGFsbGVkVmVyc2lvblN0ciA9ICcnO1xuXHRcdHRyeSB7XG5cdFx0Y29uc3QgdmVyc2lvbkZpbGUgPSBhd2FpdCB0aGlzLnBsdWdpbi5hcHAudmF1bHQuYWRhcHRlci5yZWFkKCcudmVyc2lvbi5qc29uJyk7XG5cdFx0Y29uc3QgcGFyc2VkID0gSlNPTi5wYXJzZSh2ZXJzaW9uRmlsZSk7XG5cdFx0aW5zdGFsbGVkVmVyc2lvblN0ciA9IChwYXJzZWQudmVyc2lvbiA/PyAnJykudHJpbSgpO1xuXHRcdH0gY2F0Y2gge1xuXHRcdGluc3RhbGxlZFZlcnNpb25TdHIgPSAnJztcblx0XHR9XG5cblx0XHRjb25zdCBsYXRlc3RWZXJzaW9uU3RyID0gKHRoaXMucGx1Z2luLnNldHRpbmdzLmxhdGVzdFRvb2xraXRWZXJzaW9uID8/ICcnKS50cmltKCk7XG5cblx0XHRjb25zb2xlLmxvZyhcIlx1RDgzRVx1RERFQSBDb21wYXJpbmcgdmVyc2lvbnM6XCIsIGluc3RhbGxlZFZlcnNpb25TdHIsIGxhdGVzdFZlcnNpb25TdHIpO1xuXG5cdFx0aWYgKGluc3RhbGxlZFZlcnNpb25TdHIgJiYgbGF0ZXN0VmVyc2lvblN0ciAmJiBpbnN0YWxsZWRWZXJzaW9uU3RyICE9PSBsYXRlc3RWZXJzaW9uU3RyKSB7XG5cdFx0Y29uc3Qgd2FybiA9IHdhcm5pbmdDb250YWluZXIuY3JlYXRlRWwoJ2RpdicsIHtcblx0XHRcdHRleHQ6IGBcdTI2QTBcdUZFMEYgTmV3IHZlcnNpb24gYXZhaWxhYmxlICgke2luc3RhbGxlZFZlcnNpb25TdHJ9IFx1MjE5MiAke2xhdGVzdFZlcnNpb25TdHJ9KSBcdTIwMTQgdXNlIHJlZ3VsYXIgdXBkYXRlIGluc3RlYWRgLFxuXHRcdH0pO1xuXHRcdHdhcm4uc3R5bGUuZm9udFNpemUgPSAnMC44NWVtJztcblx0XHR3YXJuLnN0eWxlLmNvbG9yID0gJ3ZhcigtLXRleHQtbXV0ZWQpJztcblx0XHR3YXJuLnN0eWxlLmZvbnRTdHlsZSA9ICdpdGFsaWMnO1xuXHRcdHdhcm4uc2V0QXR0cihcblx0XHRcdCd0aXRsZScsXG5cdFx0XHQnRm9yY2UgdXBkYXRpbmcgd2hpbGUgYSBuZXcgdmVyc2lvbiBpcyBhdmFpbGFibGUgbWF5IHNraXAgaW1wb3J0YW50IGNoYW5nZXMuJ1xuXHRcdCk7XG5cdFx0fVxuXG5cdFx0Ly8gXHUyN0ExXHVGRTBGIFJpZ2h0IHNpZGU6IGFjdGlvbiBidXR0b25zXG5cdFx0Y29uc3QgYnV0dG9uR3JvdXAgPSBmaXhCdXR0b25Sb3cuY3JlYXRlRGl2KCk7XG5cdFx0YnV0dG9uR3JvdXAuc3R5bGUuZGlzcGxheSA9ICdmbGV4Jztcblx0XHRidXR0b25Hcm91cC5zdHlsZS5nYXAgPSAnMC41ZW0nO1xuXG5cdFx0YnV0dG9uR3JvdXBcblx0XHQuY3JlYXRlRWwoXCJidXR0b25cIiwgeyB0ZXh0OiBcIkZvcmNlIFVwZGF0ZSBWYXVsdFwiLCBjbHM6IFwibW9kLWN0YVwiIH0pXG5cdFx0Lm9uY2xpY2sgPSBhc3luYyAoKSA9PiB7XG5cdFx0XHQvLyBmaXJzdCBkbyB5b3VyIG5vcm1hbCBcdTIwMUNmb3JjZSB1cGRhdGVcdTIwMUQgZmxvdzpcblx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLmZvcmNlVXBkYXRlUHJldmlld0FuZENvbmZpcm0oKTtcblx0XHRcdC8vIHRoZW4sIGlmIHRoZSB1c2VyIGFza2VkIGZvciBhIHJlLXBhcnNlLCBkbyB0aGF0OlxuXHRcdFx0aWYgKHRoaXMucGx1Z2luLnNldHRpbmdzLnJlcGFyc2VHYW1lc2V0cykge1xuXHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4ucmVmcmVzaEdhbWVTZXREYXRhKCk7XG5cdFx0XHR9XG5cdFx0fTtcblxuXG5cdFx0YnV0dG9uR3JvdXAuY3JlYXRlRWwoJ2J1dHRvbicsIHtcblx0XHR0ZXh0OiAnVW5kbyBVcGRhdGUnXG5cdFx0fSkub25jbGljayA9IGFzeW5jICgpID0+IHtcblx0XHRhd2FpdCB0aGlzLnBsdWdpbi51bmRvRm9yY2VVcGRhdGUoKTtcblx0XHR9O1xuXG5cblx0XHQvLyBcdTI1MDBcdTI1MDAgVGltZXN0YW1wIHJvdyBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcblx0XHRjb25zdCBmaXhUaW1lc3RhbXBSb3cgPSBmaXhCb2R5LmNyZWF0ZURpdigpO1xuXHRcdE9iamVjdC5hc3NpZ24oZml4VGltZXN0YW1wUm93LnN0eWxlLCB7XG5cdFx0dGV4dEFsaWduOiAncmlnaHQnLFxuXHRcdGZvbnRTaXplOiAnMTFweCcsXG5cdFx0Y29sb3I6ICd2YXIoLS10ZXh0LW11dGVkKScsXG5cdFx0bWFyZ2luVG9wOiAnMC4yNWVtJ1xuXHRcdH0pO1xuXHRcdGZpeFRpbWVzdGFtcFJvdy50ZXh0Q29udGVudCA9IGBMYXN0IGZvcmNlZDogJHtcblx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5sYXN0Rm9yY2VVcGRhdGVcblx0XHRcdD8gbmV3IERhdGUodGhpcy5wbHVnaW4uc2V0dGluZ3MubGFzdEZvcmNlVXBkYXRlKS50b0xvY2FsZVN0cmluZygpXG5cdFx0XHQ6ICdOb3QgZm9yY2VkIHlldCdcblx0XHR9YDtcblxuXHRcdC8vIFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMCBkaXZpZGVyIFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFxuZml4Qm9keS5jcmVhdGVFbCgnZGl2Jywge1xuICBhdHRyOiB7XG4gICAgc3R5bGU6ICdib3JkZXItdG9wOiAxcHggc29saWQgdmFyKC0tZGl2aWRlci1jb2xvcik7IG1hcmdpbjogMC43NWVtIDA7J1xuICB9XG59KTtcblxuXHRcdC8vIFx1MjUwMFx1MjUwMFx1MjUwMCBOZXcgXHUyMDFDcmUtcGFyc2UgZ2FtZXNldHNcdTIwMUQgdG9nZ2xlIFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFxuXHRcdGNvbnN0IHJlcGFyc2VSb3cgPSBmaXhCb2R5LmNyZWF0ZURpdigpO1xuXHRcdHJlcGFyc2VSb3cuc3R5bGUubWFyZ2luVG9wID0gXCIwLjVlbVwiO1xuXHRcdG5ldyBTZXR0aW5nKHJlcGFyc2VSb3cpXG5cdFx0LnNldE5hbWUoXCJSZS1wYXJzZSBHYW1lIFNldHMgT24gRm9yY2UgVXBkYXRlXCIpXG5cdFx0LnNldERlc2MoXG5cdFx0XHRcIkFsc28gcmUtcGFyc2UgeW91ciBydWxlc2V0IGNvbXBlbmRpdW0gYW5kIHJlZmVyZW5jZSBzZXRzLiBUaGlzIHdvbid0IGRlbGV0ZSBhbnkgZmlsZXMgaW4gdGhlIENvbXBlbmRpdW0gb3IgUmVmZXJlbmNlIGZvbGRlcnMuXCJcblx0XHQpXG5cblx0XHRcdFx0LmFkZFRvZ2dsZSgodG9nKSA9PlxuXHRcdFx0dG9nXG5cdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MucmVwYXJzZUdhbWVzZXRzKVxuXHRcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuXHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5yZXBhcnNlR2FtZXNldHMgPSB2YWx1ZTtcblx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG5cdFx0XHR9KVxuXHRcdCk7XG5cblx0XHQvLyBcdTI1MDBcdTI1MDBcdTI1MDAgQkFDS1VQIFNFQ1RJT04gXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXG5cdFx0Y29uc3QgYmFja3VwRGV0YWlscyA9IGNvbnRhaW5lckVsLmNyZWF0ZUVsKCdkZXRhaWxzJywgeyBjbHM6ICd2ay1zZWN0aW9uJyB9KTtcblxuXHRcdC8vIFN1bW1hcnkgYmxvY2s6IHN0YWNrZWQgY29sdW1uIGxheW91dFxuXHRcdGNvbnN0IGJhY2t1cFN1bW1hcnkgPSBiYWNrdXBEZXRhaWxzLmNyZWF0ZUVsKCdzdW1tYXJ5JywgeyBjbHM6ICd2ay1zZWN0aW9uLWhlYWRlcicgfSk7XG5cblx0XHRPYmplY3QuYXNzaWduKGJhY2t1cFN1bW1hcnkuc3R5bGUsIHtcblx0XHRkaXNwbGF5OiAnZmxleCcsXG5cdFx0ZmxleERpcmVjdGlvbjogJ2NvbHVtbicsXG5cdFx0YWxpZ25JdGVtczogJ3N0cmV0Y2gnLFxuXHRcdHBhZGRpbmc6ICcwLjVlbSAwJyxcblx0XHRib3JkZXJCb3R0b206ICcxcHggc29saWQgdmFyKC0tZGl2aWRlci1jb2xvciknLFxuXHRcdGN1cnNvcjogJ3BvaW50ZXInLFxuXHRcdH0pO1xuXG5cdFx0Ly8gQ3JlYXRlIHRpdGxlICsgaWNvbiByb3dcblx0XHRjb25zdCBiYWNrdXBUaXRsZVJvdyA9IGJhY2t1cFN1bW1hcnkuY3JlYXRlRGl2KHtcblx0XHRhdHRyOiB7XG5cdFx0XHRzdHlsZTogYFxuXHRcdFx0ZGlzcGxheTogZmxleDtcblx0XHRcdGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2Vlbjtcblx0XHRcdGFsaWduLWl0ZW1zOiBmbGV4LWVuZDtcblx0XHRcdGAsXG5cdFx0fSxcblx0XHR9KTtcblxuXHRcdC8vIExlZnQ6IGhlYWRlciBibG9jayAodGl0bGUgKyBkZXNjcmlwdGlvbiB0b2dldGhlcikgXG5cdFx0Y29uc3QgdGl0bGVCbG9jayA9IGJhY2t1cFRpdGxlUm93LmNyZWF0ZURpdih7XG5cdFx0YXR0cjogeyBzdHlsZTogJ2Rpc3BsYXk6IGZsZXg7IGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47JyB9XG5cdFx0fSk7XG5cblx0XHR0aXRsZUJsb2NrLmNyZWF0ZUVsKCdoNScsIHsgdGV4dDogJ1ZhdWx0IEJhY2t1cHMnIH0pO1xuXG5cdFx0dGl0bGVCbG9jay5jcmVhdGVFbCgnZGl2Jywge1xuXHRcdHRleHQ6ICdUaGUgVG9vbGtpdCB3aWxsIGJhY2sgdXAgeW91ciB2YXVsdCBhdXRvbWF0aWNhbGx5IGJlZm9yZSB1cGRhdGVzLiBZb3UgY2FuIGFsc28gYmFjayB1cCBtYW51YWxseSBhbnl0aW1lLicsXG5cdFx0Y2xzOiAnc2V0dGluZy1pdGVtLWRlc2NyaXB0aW9uJyxcblx0XHRhdHRyOiB7IHN0eWxlOiAnbWFyZ2luLXRvcDogMC4yNWVtOycgfSxcblx0XHR9KTtcblxuXHRcdC8vIFJpZ2h0OiBjb2xsYXBzZSBpY29uXG5cdFx0Y29uc3QgYmFja3VwVnZJY29uID0gYmFja3VwVGl0bGVSb3cuY3JlYXRlRWwoJ3NwYW4nLCB7IHRleHQ6ICdWVicsIGNsczogJ3ZrLXRvZ2dsZS1pY29uJyB9KTtcblxuXHRcdE9iamVjdC5hc3NpZ24oYmFja3VwVnZJY29uLnN0eWxlLCB7XG5cdFx0Zm9udFdlaWdodDogJ2JvbGQnLFxuXHRcdGRpc3BsYXk6ICdpbmxpbmUtYmxvY2snLFxuXHRcdHRyYW5zaXRpb246ICd0cmFuc2Zvcm0gMC4ycyBlYXNlJyxcblx0XHR0cmFuc2Zvcm1PcmlnaW46ICc1MCUgNTAlJyxcblx0XHR1c2VyU2VsZWN0OiAnbm9uZScsXG5cdFx0dHJhbnNmb3JtOiBiYWNrdXBEZXRhaWxzLm9wZW4gPyAncm90YXRlKDBkZWcpJyA6ICdyb3RhdGUoMTgwZGVnKScsXG5cdFx0fSk7XG5cblx0XHQvLyBDb2xsYXBzZSByb3RhdGlvbiBiZWhhdmlvclxuXHRcdGJhY2t1cERldGFpbHMub250b2dnbGUgPSAoKSA9PiB7XG5cdFx0YmFja3VwVnZJY29uLnN0eWxlLnRyYW5zZm9ybSA9IGJhY2t1cERldGFpbHMub3BlbiA/ICdyb3RhdGUoMGRlZyknIDogJ3JvdGF0ZSgxODBkZWcpJztcblx0XHR9O1xuXG5cdFx0Ly8gMikgQm9keVxuXHRcdGNvbnN0IGJhY2t1cEJvZHkgPSBiYWNrdXBEZXRhaWxzLmNyZWF0ZURpdih7IGNsczogJ3ZrLXNlY3Rpb24tYm9keScgfSk7XG5cdFx0YmFja3VwQm9keS5zdHlsZS5wYWRkaW5nTGVmdCA9ICcxZW0nO1xuXG5cdFx0bmV3IFNldHRpbmcoYmFja3VwQm9keSlcblx0XHQuc2V0TmFtZSgnQXV0by1CYWNrdXAgQmVmb3JlIFVwZGF0ZScpXG5cdFx0LnNldERlc2MoJ0NyZWF0ZSBhIGZ1bGwgLnppcCBvZiB0aGUgdmF1bHQgYmVmb3JlIGFwcGx5aW5nIHZlcnNpb24gdXBkYXRlcy4gRm9yY2UgdXBkYXRlcyB3aWxsIG9ubHkgYmFjayB1cCB0aGUgZmlsZXMgdGhhdCB3aWxsIGJlIG1vZGlmaWVkIG9yIHJlbW92ZWQuJylcblx0XHQuYWRkVG9nZ2xlKHQgPT5cblx0XHRcdHRcblx0XHRcdC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5hdXRvQmFja3VwQmVmb3JlVXBkYXRlKVxuXHRcdFx0Lm9uQ2hhbmdlKGFzeW5jIHYgPT4ge1xuXHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5hdXRvQmFja3VwQmVmb3JlVXBkYXRlID0gdjtcblx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG5cdFx0XHR9KVxuXHRcdCk7XG5cblx0XHRuZXcgU2V0dGluZyhiYWNrdXBCb2R5KVxuXHRcdC5zZXROYW1lKCdNYW51YWwgQmFja3VwJylcblx0XHQuc2V0RGVzYygnSW1tZWRpYXRlbHkgY3JlYXRlIGEgemlwIGJhY2t1cCBvZiB5b3VyIHZhdWx0Jylcblx0XHQuYWRkQnV0dG9uKGIgPT5cblx0XHRcdGJcblx0XHRcdC5zZXRCdXR0b25UZXh0KCdCYWNrdXAgVmF1bHQgTm93Jylcblx0XHRcdC5zZXRDdGEoKVxuXHRcdFx0Lm9uQ2xpY2soYXN5bmMgKCkgPT4ge1xuXHRcdFx0XHRjb25zdCBwYXRoID0gYXdhaXQgdGhpcy5wbHVnaW4uYmFja3VwTWFuYWdlci5iYWNrdXBWYXVsdFRvWmlwKCdtYW51YWwnKTtcblx0XHRcdFx0bmV3IE5vdGljZShgQmFja3VwIGNyZWF0ZWQ6ICR7cGF0aH1gKTtcblx0XHRcdH0pXG5cdFx0KTtcblxuXHRcdG5ldyBTZXR0aW5nKGJhY2t1cEJvZHkpXG5cdFx0LnNldE5hbWUoJ09wZW4gQmFja3VwcyBGb2xkZXInKVxuXHRcdC5zZXREZXNjKCdPcGVuIHRoZSBiYWNrdXBzIGZvbGRlciBvbiBkaXNrLiBNYWNPUzogQ2FudCBzZWUgaXQ/IEhpdCBTaGlmdCtDbWQrKHBlcmlvZCkuJylcblx0XHQuYWRkQnV0dG9uKGIgPT5cblx0XHQgIGJcblx0XHRcdC5zZXRCdXR0b25UZXh0KCdPcGVuIEZvbGRlcicpXG5cdFx0XHQub25DbGljayhhc3luYyAoKSA9PiB7XG5cdFx0XHQgIHRyeSB7XG5cblx0XHRcdFx0Y29uc3QgdmF1bHRCYXNlUGF0aDogc3RyaW5nID0gKHRoaXMucGx1Z2luLmFwcC52YXVsdC5hZGFwdGVyIGFzIGFueSkuZ2V0QmFzZVBhdGgoKTtcblxuXHRcdFx0XHRjb25zdCBiYWNrdXBGb2xkZXJQYXRoID0gcGF0aC5qb2luKFxuXHRcdFx0XHQgIHZhdWx0QmFzZVBhdGgsXG5cdFx0XHRcdCAgJy52YXVsdC1iYWNrdXBzJ1xuXHRcdFx0XHQpO1xuXG5cdFx0XHRcdGNvbnN0IHsgc2hlbGwgfSA9ICh3aW5kb3cgYXMgYW55KS5yZXF1aXJlKCdlbGVjdHJvbicpO1xuXHRcdFx0XHRjb25zdCByZXN1bHQgPSBhd2FpdCBzaGVsbC5vcGVuUGF0aChiYWNrdXBGb2xkZXJQYXRoKTtcblx0XHRcdFx0aWYgKHR5cGVvZiByZXN1bHQgPT09ICdzdHJpbmcnICYmIHJlc3VsdC5sZW5ndGggPiAwKSB7XG5cdFx0XHRcdCAgY29uc29sZS5lcnJvcignXHUyNzRDIHNoZWxsLm9wZW5QYXRoIGVycm9yOicsIHJlc3VsdCk7XG5cdFx0XHRcdCAgbmV3IE5vdGljZSgnQ291bGQgbm90IG9wZW4gYmFja3VwcyBmb2xkZXIuIFNlZSBjb25zb2xlLicpO1xuXHRcdFx0XHR9XG5cdFx0XHQgIH0gY2F0Y2ggKGVycikge1xuXHRcdFx0XHRjb25zb2xlLmVycm9yKCdcdTI3NEMgQ291bGQgbm90IG9wZW4gYmFja3VwcyBmb2xkZXI6JywgZXJyKTtcblx0XHRcdFx0bmV3IE5vdGljZSgnQ291bGQgbm90IG9wZW4gYmFja3VwcyBmb2xkZXIuIFNlZSBjb25zb2xlLicpO1xuXHRcdFx0ICB9XG5cdFx0XHR9KVxuXHRcdCk7XG5cdFx0YmFja3VwQm9keS5jcmVhdGVFbCgnZGl2Jywge1xuXHRcdFx0YXR0cjoge1xuXHRcdFx0ICBzdHlsZTogJ2JvcmRlci10b3A6IDFweCBzb2xpZCB2YXIoLS1kaXZpZGVyLWNvbG9yKTsgbWFyZ2luLXRvcDogMS41ZW07J1xuXHRcdFx0fVxuXHRcdCAgfSk7XG5cblxuXHRcdCAgXG5cdFx0Ly8gXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwIENVU1RPTSBVUERBVEVTIFNFQ1RJT04gXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXG5cdFx0Y29uc3QgY3VzdG9taXphdGlvbkRldGFpbHMgPSBjb250YWluZXJFbC5jcmVhdGVFbCgnZGV0YWlscycsIHsgY2xzOiAndmstc2VjdGlvbicgfSk7XG5cblx0XHRjb25zdCBjdXN0b21pemF0aW9uU3VtbWFyeSA9IGN1c3RvbWl6YXRpb25EZXRhaWxzLmNyZWF0ZUVsKCdzdW1tYXJ5JywgeyBjbHM6ICd2ay1zZWN0aW9uLWhlYWRlcicgfSk7XG5cblx0XHRPYmplY3QuYXNzaWduKGN1c3RvbWl6YXRpb25TdW1tYXJ5LnN0eWxlLCB7XG5cdFx0ZGlzcGxheTogJ2ZsZXgnLFxuXHRcdGZsZXhEaXJlY3Rpb246ICdjb2x1bW4nLFxuXHRcdGFsaWduSXRlbXM6ICdmbGV4LXN0YXJ0Jyxcblx0XHRwYWRkaW5nOiAnMC41ZW0gMCcsXG5cdFx0Y3Vyc29yOiAncG9pbnRlcicsXG5cdFx0fSk7XG5cblx0XHRjb25zdCB0aXRsZVJvdyA9IGN1c3RvbWl6YXRpb25TdW1tYXJ5LmNyZWF0ZURpdih7XG5cdFx0YXR0cjoge1xuXHRcdFx0c3R5bGU6IGBcblx0XHRcdGRpc3BsYXk6IGZsZXg7XG5cdFx0XHR3aWR0aDogMTAwJTtcblx0XHRcdGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2Vlbjtcblx0XHRcdGFsaWduLWl0ZW1zOiBmbGV4LWVuZDtcblx0XHRcdGAsXG5cdFx0fSxcblx0XHR9KTtcblxuXHRcdGNvbnN0IGN1c3RvbWl6YXRpb25UaXRsZUJsb2NrID0gdGl0bGVSb3cuY3JlYXRlRGl2KHtcblx0XHRhdHRyOiB7IHN0eWxlOiAnZGlzcGxheTogZmxleDsgZmxleC1kaXJlY3Rpb246IGNvbHVtbjsnIH1cblx0XHR9KTtcblxuXHRcdGNvbnN0IGg1ID0gY3VzdG9taXphdGlvblRpdGxlQmxvY2suY3JlYXRlRWwoJ2g1Jyk7XG5cdFx0aDUuYXBwZW5kVGV4dCgnQ3VzdG9tIEZpbGUgTWFuYWdlbWVudCAnKTtcblxuXHRcdGN1c3RvbWl6YXRpb25UaXRsZUJsb2NrLmNyZWF0ZUVsKCdkaXYnLCB7XG5cdFx0dGV4dDogJ1NraXAgdXBkYXRlcyBvbiBjZXJ0YWluIGZpbGVzIG9yIHJlbWFwIHJlbG9jYXRlZCBUb29sa2l0IGZpbGVzIHNvIHRoZXkgY2FuIHVwZGF0ZS4nLFxuXHRcdGNsczogJ3NldHRpbmctaXRlbS1kZXNjcmlwdGlvbicsXG5cdFx0YXR0cjogeyBzdHlsZTogJ21hcmdpbi10b3A6IDAuMjVlbTsnIH0sXG5cdFx0fSk7XG5cblx0XHRjb25zdCBjdXN0b21Wdkljb24gPSB0aXRsZVJvdy5jcmVhdGVFbCgnc3BhbicsIHsgdGV4dDogJ1ZWJywgY2xzOiAndmstdG9nZ2xlLWljb24nIH0pO1xuXG5cdFx0T2JqZWN0LmFzc2lnbihjdXN0b21Wdkljb24uc3R5bGUsIHtcblx0XHRmb250V2VpZ2h0OiAnYm9sZCcsXG5cdFx0dHJhbnNpdGlvbjogJ3RyYW5zZm9ybSAwLjJzIGVhc2UnLFxuXHRcdHRyYW5zZm9ybU9yaWdpbjogJzUwJSA1MCUnLFxuXHRcdHVzZXJTZWxlY3Q6ICdub25lJyxcblx0XHR0cmFuc2Zvcm06IGN1c3RvbWl6YXRpb25EZXRhaWxzLm9wZW4gPyAncm90YXRlKDBkZWcpJyA6ICdyb3RhdGUoMTgwZGVnKScsXG5cdFx0fSk7XG5cblx0XHRjdXN0b21pemF0aW9uRGV0YWlscy5vbnRvZ2dsZSA9ICgpID0+IHtcblx0XHRjdXN0b21Wdkljb24uc3R5bGUudHJhbnNmb3JtID0gY3VzdG9taXphdGlvbkRldGFpbHMub3BlbiA/ICdyb3RhdGUoMGRlZyknIDogJ3JvdGF0ZSgxODBkZWcpJztcblx0XHR9O1xuXG5cdFx0Y29uc3QgY3VzdG9taXphdGlvbkJvZHlXcmFwcGVyID0gY3VzdG9taXphdGlvbkRldGFpbHMuY3JlYXRlRGl2KHtcblx0XHRcdGF0dHI6IHsgc3R5bGU6ICdwYWRkaW5nLWxlZnQ6IDFlbTsgcGFkZGluZy1yaWdodDogMWVtOycgfVxuXHRcdCAgfSk7XG5cdFx0ICBjb25zdCBjdXN0b21pemF0aW9uQm9keSA9IGN1c3RvbWl6YXRpb25Cb2R5V3JhcHBlci5jcmVhdGVEaXYoeyBjbHM6ICd2ay1zZWN0aW9uLWJvZHknIH0pO1xuXG5cblxuXHRcdC8vIFx1MjUwMFx1MjUwMFx1MjUwMCBTS0lQLUxJU1QgUEFORUwgXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXG5cblx0XHRjb25zdCBza2lwU2VjdGlvbiA9IGN1c3RvbWl6YXRpb25Cb2R5LmNyZWF0ZURpdigpO1xuXG5cdFx0Ly8gMS4gQ3JlYXRlIHNldHRpbmcgYmxvY2sgKG1hdGNoZXMgT2JzaWRpYW4gbmF0aXZlIFVJIGxheW91dClcblx0XHRjb25zdCBzZXR0aW5nSXRlbSA9IHNraXBTZWN0aW9uLmNyZWF0ZURpdih7IGNsczogJ3NldHRpbmctaXRlbScgfSk7XG5cblx0XHQvLyAyLiBMZWZ0IGNvbHVtbjogdGl0bGUgKyBkZXNjcmlwdGlvblxuXHRcdGNvbnN0IGluZm8gPSBzZXR0aW5nSXRlbS5jcmVhdGVEaXYoeyBjbHM6ICdzZXR0aW5nLWl0ZW0taW5mbycgfSk7XG5cdFx0aW5mby5jcmVhdGVEaXYoeyB0ZXh0OiAnU2tpcCBUb29sa2l0IEl0ZW1zJywgY2xzOiAnc2V0dGluZy1pdGVtLW5hbWUnIH0pO1xuXHRcdGluZm8uY3JlYXRlRGl2KHtcblx0XHR0ZXh0OiAnRmlsZXMgbGlzdGVkIGhlcmUgd2lsbCBiZSBpZ25vcmVkIGR1cmluZyB0b29sa2l0IHVwZGF0ZXMuJyxcblx0XHRjbHM6ICdzZXR0aW5nLWl0ZW0tZGVzY3JpcHRpb24nLFxuXHRcdH0pO1xuXG5cdFx0Ly8gMy4gUmlnaHQgY29sdW1uOiBkcm9wZG93biArIGJ1dHRvblxuXHRcdGNvbnN0IGNvbnRyb2wgPSBzZXR0aW5nSXRlbS5jcmVhdGVEaXYoeyBjbHM6ICdzZXR0aW5nLWl0ZW0tY29udHJvbCcgfSk7XG5cblx0XHRjb25zdCBkcm9wZG93biA9IG5ldyBEcm9wZG93bkNvbXBvbmVudChjb250cm9sKTtcblx0XHRkcm9wZG93bi5zZWxlY3RFbC5zdHlsZS5taW5XaWR0aCA9ICcyMjBweCc7XG5cdFx0ZHJvcGRvd24uYWRkT3B0aW9uKCcnLCAnU2VsZWN0IGFuIGl0ZW1cdTIwMjYnKTtcblx0XHR0aGlzLnBsdWdpbi5tYW5pZmVzdENhY2hlLmZpbGVzXG5cdFx0LmZpbHRlcihmID0+ICFmLm9wdGlvbmFsKVxuXHRcdC5mb3JFYWNoKGYgPT4gZHJvcGRvd24uYWRkT3B0aW9uKGYucGF0aCwgZi5kaXNwbGF5TmFtZSA/PyBmLnBhdGguc3BsaXQoJy8nKS5wb3AoKSEpKTtcblx0XHR0aGlzLnBsdWdpbi5tYW5pZmVzdENhY2hlLmZvbGRlcnNcblx0XHQuZmlsdGVyKGYgPT4gIWYub3B0aW9uYWwpXG5cdFx0LmZvckVhY2goZiA9PiBkcm9wZG93bi5hZGRPcHRpb24oZi5wYXRoLCAoZi5kaXNwbGF5TmFtZSA/PyBmLnBhdGguc3BsaXQoJy8nKS5wb3AoKSEpICsgJy8gKGZvbGRlciknKSk7XG5cblx0XHRuZXcgQnV0dG9uQ29tcG9uZW50KGNvbnRyb2wpXG5cdFx0LnNldEJ1dHRvblRleHQoJ0FkZCcpXG5cdFx0LnNldEN0YSgpXG5cdFx0Lm9uQ2xpY2soYXN5bmMgKCkgPT4ge1xuXHRcdFx0Y29uc3Qga2V5ID0gZHJvcGRvd24uZ2V0VmFsdWUoKTtcblx0XHRcdGlmICgha2V5KSByZXR1cm4gbmV3IE5vdGljZSgnUGljayBzb21ldGhpbmcgdG8gc2tpcC4nKTtcblx0XHRcdGlmICghdGhpcy5wbHVnaW4uc2V0dGluZ3MuY3VzdG9tUGF0aHMuc29tZShjID0+IGMubWFuaWZlc3RLZXkgPT09IGtleSkpIHtcblx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmN1c3RvbVBhdGhzLnB1c2goeyB2YXVsdFBhdGg6IGtleSwgbWFuaWZlc3RLZXk6IGtleSwgZG9VcGRhdGU6IGZhbHNlIH0pO1xuXHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG5cdFx0XHRyZW5kZXJTa2lwVGFibGUoKTtcblx0XHRcdH1cblx0XHR9KTtcblxuXHRcdC8vIDQuIFRhYmxlIHdyYXBwZXIgZm9yIHNraXBwZWQgaXRlbXNcblx0XHRjb25zdCBza2lwVGFibGVXcmFwcGVyID0gc2tpcFNlY3Rpb24uY3JlYXRlRGl2KHsgY2xzOiAndmstdGFibGUtd3JhcHBlcicsIGF0dHI6IHsgc3R5bGU6ICdtYXJnaW4tdG9wOjAuNzVlbScgfSB9KTtcblxuXHRcdGNvbnN0IHJlbmRlclNraXBUYWJsZSA9ICgpID0+IHtcblx0XHRza2lwVGFibGVXcmFwcGVyLmVtcHR5KCk7XG5cblx0XHRjb25zdCBpdGVtcyA9IHRoaXMucGx1Z2luLnNldHRpbmdzLmN1c3RvbVBhdGhzLmZpbHRlcihjID0+ICFjLmRvVXBkYXRlKTtcblxuXHRcdGlmIChpdGVtcy5sZW5ndGggPT09IDApIHtcblx0XHRcdC8vIE5vIHRhYmxlIGlmIG5vdGhpbmcgdG8gc2hvdyBcdTIwMTQganVzdCBhbiBlbXB0eSBzdGF0ZSBtZXNzYWdlXG5cdFx0XHRjb25zdCBlbXB0eU1zZyA9IHNraXBUYWJsZVdyYXBwZXIuY3JlYXRlRWwoJ2RpdicsIHsgdGV4dDogJ05vIGl0ZW1zIHNraXBwZWQuJyB9KTtcblx0XHRcdGVtcHR5TXNnLnN0eWxlLnRleHRBbGlnbiA9ICdjZW50ZXInO1xuXHRcdFx0ZW1wdHlNc2cuc3R5bGUub3BhY2l0eSA9ICcwLjYnO1xuXHRcdFx0ZW1wdHlNc2cuc3R5bGUucGFkZGluZyA9ICcwLjVlbSc7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0Ly8gUmVuZGVyIHRhYmxlIG9ubHkgaWYgaXRlbXMgZXhpc3Rcblx0XHRjb25zdCB0YWJsZSA9IHNraXBUYWJsZVdyYXBwZXIuY3JlYXRlRWwoJ3RhYmxlJywgeyBjbHM6ICdzZXR0aW5nLXRhYmxlJyB9KTtcblxuXHRcdGNvbnN0IGhlYWRlciA9IHRhYmxlLmNyZWF0ZVRIZWFkKCkuaW5zZXJ0Um93KCk7XG5cdFx0aGVhZGVyLmluc2VydENlbGwoKS50ZXh0Q29udGVudCA9ICdTa2lwcGVkIEZpbGVzL0ZvbGRlcnMnO1xuXG5cdFx0Y29uc3QgYm9keSA9IHRhYmxlLmNyZWF0ZVRCb2R5KCk7XG5cblx0XHRpdGVtcy5mb3JFYWNoKChlbnRyeSkgPT4ge1xuXHRcdFx0Y29uc3Qgcm93ID0gYm9keS5pbnNlcnRSb3coKTtcblx0XHRcdGNvbnN0IGNvbnRlbnRDZWxsID0gcm93Lmluc2VydENlbGwoKTtcblx0XHRcdGNvbnRlbnRDZWxsLmNvbFNwYW4gPSAxO1xuXHRcdFx0Y29udGVudENlbGwuc3R5bGUuZGlzcGxheSA9ICdmbGV4Jztcblx0XHRcdGNvbnRlbnRDZWxsLnN0eWxlLmp1c3RpZnlDb250ZW50ID0gJ3NwYWNlLWJldHdlZW4nO1xuXHRcdFx0Y29udGVudENlbGwuc3R5bGUucGFkZGluZ0xlZnQgPSAnNGVtJztcblx0XHRcdGNvbnRlbnRDZWxsLnN0eWxlLmFsaWduSXRlbXMgPSAnY2VudGVyJztcblx0XHRcdGNvbnRlbnRDZWxsLnN0eWxlLmdhcCA9ICcxZW0nO1xuXHRcdFx0Y29udGVudENlbGwuc3R5bGUuZm9udFdlaWdodCA9ICdib2xkJztcblxuXHRcdFx0Y29udGVudENlbGwuY3JlYXRlU3Bhbih7IHRleHQ6IGVudHJ5Lm1hbmlmZXN0S2V5IH0pO1xuXG5cdFx0XHRjb25zdCByZW1vdmVMaW5rID0gY29udGVudENlbGwuY3JlYXRlRWwoJ2EnLCB7IHRleHQ6ICdSZW1vdmUgZW50cnknLCBocmVmOiAnIycgfSk7XG5cdFx0XHRyZW1vdmVMaW5rLnN0eWxlLmZvbnRTaXplID0gJzAuOGVtJztcblx0XHRcdHJlbW92ZUxpbmsuc3R5bGUuY29sb3IgPSAndmFyKC0tdGV4dC1mYWludCknO1xuXHRcdFx0cmVtb3ZlTGluay5zdHlsZS50ZXh0RGVjb3JhdGlvbiA9ICd1bmRlcmxpbmUnO1xuXHRcdFx0cmVtb3ZlTGluay5vbmNsaWNrID0gYXN5bmMgKGUpID0+IHtcblx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcblx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmN1c3RvbVBhdGhzLnJlbW92ZShlbnRyeSk7XG5cdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcblx0XHRcdHJlbmRlclNraXBUYWJsZSgpO1xuXHRcdFx0fTtcblx0XHR9KTtcblx0XHR9O1xuXG5cdFx0cmVuZGVyU2tpcFRhYmxlKCk7XG5cblx0XHQvLyBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDAgU3BhY2VyICYgRGl2aWRlciBCZWZvcmUgUmVtYXAgUGFuZWwgXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXG5cdFx0Y3VzdG9taXphdGlvbkJvZHkuY3JlYXRlRWwoJ2RpdicsIHtcblx0XHRcdGF0dHI6IHsgc3R5bGU6ICdoZWlnaHQ6IDFlbTsgYm9yZGVyLXRvcDogMXB4IHNvbGlkIHZhcigtLWRpdmlkZXItY29sb3IpOyBtYXJnaW46IDFlbSAwOycgfVxuXHRcdH0pO1xuXG5cdFx0Ly8gXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwIFJFTUFQIFBBTkVMIFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFxuXHRcdGNvbnN0IHJlbWFwU2VjdGlvbiA9IGN1c3RvbWl6YXRpb25Cb2R5LmNyZWF0ZURpdigpO1xuXG5cblx0XHQvLyBTZXR0aW5nLXN0eWxlIHdyYXBwZXJcblx0XHRjb25zdCByZW1hcFNldHRpbmcgPSByZW1hcFNlY3Rpb24uY3JlYXRlRGl2KHsgY2xzOiAnc2V0dGluZy1pdGVtJyB9KTtcblxuXHRcdC8vIExlZnQ6IGhlYWRlciArIGRlc2NyaXB0aW9uICh1bmNoYW5nZWQgc3R5bGUpXG5cdFx0Y29uc3QgcmVtYXBJbmZvID0gcmVtYXBTZXR0aW5nLmNyZWF0ZURpdih7IGNsczogJ3NldHRpbmctaXRlbS1pbmZvJyB9KTtcblx0XHRyZW1hcEluZm8uY3JlYXRlRGl2KHsgdGV4dDogJ1JlbWFwIEZpbGUgUGF0aHMnLCBjbHM6ICdzZXR0aW5nLWl0ZW0tbmFtZScgfSk7XG5cdFx0cmVtYXBJbmZvLmNyZWF0ZURpdih7XG5cdFx0XHR0ZXh0OiAnUmVtYXAgdG9vbGtpdCBmaWxlcyB2YXVsdCBwYXRocyBpZiB5b3UgY2hvc2UgdG8gbW92ZSBhbnl0aGluZy4gTW92aW5nIGZpbGVzIHdpdGhvdXQgcmVtYXBwaW5nIHdpbGwgcmVzdWx0IGluIGR1cGxpY2F0ZSBhbmQvb3Igb3V0LW9mLWRhdGUgZmlsZXMgYWZ0ZXIgdXBkYXRlLicsXG5cdFx0XHRjbHM6ICdzZXR0aW5nLWl0ZW0tZGVzY3JpcHRpb24nXG5cdFx0fSk7XG5cblx0XHQvLyBOZXcgZnVsbC13aWR0aCBibG9jayBiZWxvdyBmb3IgY29udHJvbHNcblx0XHRjb25zdCByZW1hcENvbnRyb2xCbG9jayA9IHJlbWFwU2VjdGlvbi5jcmVhdGVEaXYoeyBjbHM6ICd2ay1pbmxpbmUtYWRkLWNvbnRyb2xzJyB9KTtcblx0XHRyZW1hcENvbnRyb2xCbG9jay5zdHlsZS5mbGV4V3JhcCA9ICd3cmFwJztcblx0XHRyZW1hcENvbnRyb2xCbG9jay5zdHlsZS5tYXJnaW5Ub3AgPSAnMC41ZW0nO1xuXG5cdFx0bGV0IHJlbWFwRHJvcDogRHJvcGRvd25Db21wb25lbnQ7XG5cdFx0bGV0IHJlbWFwSW5wdXQ6IEhUTUxJbnB1dEVsZW1lbnQ7XG5cblx0XHRyZW1hcERyb3AgPSBuZXcgRHJvcGRvd25Db21wb25lbnQocmVtYXBDb250cm9sQmxvY2spO1xuXHRcdHJlbWFwRHJvcC5zZWxlY3RFbC5zdHlsZS5taW5XaWR0aCA9ICcyMjBweCc7XG5cdFx0cmVtYXBEcm9wLmFkZE9wdGlvbignJywgJ1NlbGVjdCBhbiBpdGVtXHUyMDI2Jyk7XG5cdFx0dGhpcy5wbHVnaW4ubWFuaWZlc3RDYWNoZS5maWxlcy5mb3JFYWNoKGYgPT5cblx0XHRcdHJlbWFwRHJvcC5hZGRPcHRpb24oZi5wYXRoLCBmLmRpc3BsYXlOYW1lID8/IGYucGF0aC5zcGxpdCgnLycpLnBvcCgpISlcblx0XHQpO1xuXHRcdHRoaXMucGx1Z2luLm1hbmlmZXN0Q2FjaGUuZm9sZGVycy5mb3JFYWNoKGYgPT5cblx0XHRcdHJlbWFwRHJvcC5hZGRPcHRpb24oZi5wYXRoLCAoZi5kaXNwbGF5TmFtZSA/PyBmLnBhdGguc3BsaXQoJy8nKS5wb3AoKSEpICsgJy8gKGZvbGRlciknKVxuXHRcdCk7XG5cblx0XHRjb25zdCBzZWFyY2hXcmFwcGVyID0gcmVtYXBDb250cm9sQmxvY2suY3JlYXRlRGl2KCk7XG5cdFx0Y29uc3Qgc2VhcmNoQ29tcG9uZW50ID0gbmV3IFNlYXJjaENvbXBvbmVudChzZWFyY2hXcmFwcGVyKTtcblx0XHRzZWFyY2hDb21wb25lbnQuc2V0UGxhY2Vob2xkZXIoJ1NlYXJjaCB2YXVsdCBwYXRoXHUyMDI2Jyk7XG5cdFx0bmV3IEZpbGVQYXRoU3VnZ2VzdGVyKHRoaXMuYXBwLCBzZWFyY2hDb21wb25lbnQuaW5wdXRFbCk7XG5cdFx0cmVtYXBJbnB1dCA9IHNlYXJjaENvbXBvbmVudC5pbnB1dEVsO1xuXG5cdFx0bmV3IEJ1dHRvbkNvbXBvbmVudChyZW1hcENvbnRyb2xCbG9jaylcblx0XHRcdC5zZXRCdXR0b25UZXh0KCdBZGQgUmVtYXAnKVxuXHRcdFx0LnNldEN0YSgpXG5cdFx0XHQub25DbGljayhhc3luYyAoKSA9PiB7XG5cdFx0XHRcdGNvbnN0IGtleSA9IHJlbWFwRHJvcC5nZXRWYWx1ZSgpO1xuXHRcdFx0XHRjb25zdCB2cCA9IHJlbWFwSW5wdXQudmFsdWUudHJpbSgpO1xuXHRcdFx0XHRpZiAoIWtleSB8fCAhdnApIHJldHVybiBuZXcgTm90aWNlKCdTZWxlY3QgYW4gaXRlbSBhbmQgZW50ZXIgYSB2YXVsdCBwYXRoLicpO1xuXHRcdFx0XHRpZiAoIXRoaXMuYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aCh2cCkpIHJldHVybiBuZXcgTm90aWNlKCdWYXVsdCBwYXRoIG5vdCBmb3VuZC4nKTtcblx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MuY3VzdG9tUGF0aHMgPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5jdXN0b21QYXRocy5maWx0ZXIoYyA9PiBjLm1hbmlmZXN0S2V5ICE9PSBrZXkpO1xuXHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5jdXN0b21QYXRocy5wdXNoKHsgbWFuaWZlc3RLZXk6IGtleSwgdmF1bHRQYXRoOiB2cCwgZG9VcGRhdGU6IHRydWUgfSk7XG5cdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuXHRcdFx0XHRyZW1hcElucHV0LnZhbHVlID0gJyc7XG5cdFx0XHRcdHJlbWFwRHJvcC5zZXRWYWx1ZSgnJyk7XG5cdFx0XHRcdHJlbmRlclJlbWFwUGFuZWwoKTtcblx0XHRcdH0pO1xuXG5cblx0XHQvLyA0LiBUYWJsZSB3cmFwcGVyXG5cdFx0Y29uc3QgcmVtYXBUYWJsZVdyYXBwZXIgPSByZW1hcFNlY3Rpb24uY3JlYXRlRGl2KHsgY2xzOiAndmstdGFibGUtd3JhcHBlcicsIGF0dHI6IHsgc3R5bGU6ICdtYXJnaW4tdG9wOiAwLjc1ZW0nIH0gfSk7XG5cblx0XHRjb25zdCByZW5kZXJSZW1hcFBhbmVsID0gKCkgPT4ge1xuXHRcdHJlbWFwVGFibGVXcmFwcGVyLmVtcHR5KCk7XG5cblx0XHRjb25zdCB0b1JlbWFwID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MuY3VzdG9tUGF0aHMuZmlsdGVyKGMgPT4gYy5kb1VwZGF0ZSk7XG5cblx0XHRpZiAodG9SZW1hcC5sZW5ndGggPT09IDApIHtcblx0XHRcdGNvbnN0IGVtcHR5TXNnID0gcmVtYXBUYWJsZVdyYXBwZXIuY3JlYXRlRWwoJ2RpdicsIHsgdGV4dDogJ05vIGN1c3RvbSBwYXRocyBkZWZpbmVkLicgfSk7XG5cdFx0XHRlbXB0eU1zZy5zdHlsZS50ZXh0QWxpZ24gPSAnY2VudGVyJztcblx0XHRcdGVtcHR5TXNnLnN0eWxlLm9wYWNpdHkgPSAnMC42Jztcblx0XHRcdGVtcHR5TXNnLnN0eWxlLnBhZGRpbmcgPSAnMC41ZW0nO1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdGNvbnN0IHRhYmxlID0gcmVtYXBUYWJsZVdyYXBwZXIuY3JlYXRlRWwoJ3RhYmxlJywgeyBjbHM6ICdzZXR0aW5nLXRhYmxlJyB9KTtcblx0XHRjb25zdCBoZWFkID0gdGFibGUuY3JlYXRlVEhlYWQoKS5pbnNlcnRSb3coKTtcblx0XHRbJ1Rvb2xpdCBJdGVtJywgJ05ldyBWYXVsdCBQYXRoJywgJyddLmZvckVhY2godHh0ID0+IGhlYWQuaW5zZXJ0Q2VsbCgpLnRleHRDb250ZW50ID0gdHh0KTtcblxuXHRcdGNvbnN0IGJvZHkgPSB0YWJsZS5jcmVhdGVUQm9keSgpO1xuXHRcdHRvUmVtYXAuZm9yRWFjaChlbnRyeSA9PiB7XG5cdFx0XHRjb25zdCByb3cgPSBib2R5Lmluc2VydFJvdygpO1xuXG5cdFx0XHQvLyBNYW5pZmVzdCBLZXlcblx0XHRcdHJvdy5pbnNlcnRDZWxsKCkudGV4dENvbnRlbnQgPSBlbnRyeS5tYW5pZmVzdEtleTtcblxuXHRcdFx0Ly8gVmF1bHQgUGF0aFxuXHRcdFx0cm93Lmluc2VydENlbGwoKS50ZXh0Q29udGVudCA9IGVudHJ5LnZhdWx0UGF0aDtcblxuXHRcdFx0Ly8gUmVtb3ZlIGxpbmtcblx0XHRcdGNvbnN0IHJlbW92ZUNlbGwgPSByb3cuaW5zZXJ0Q2VsbCgpO1xuXHRcdFx0Y29uc3QgcmVtb3ZlTGluayA9IHJlbW92ZUNlbGwuY3JlYXRlRWwoJ2EnLCB7IHRleHQ6ICdSZW1vdmUgZW50cnknLCBocmVmOiAnIycgfSk7XG5cdFx0XHRyZW1vdmVMaW5rLnN0eWxlLmZvbnRTaXplID0gJzAuOGVtJztcblx0XHRcdHJlbW92ZUxpbmsuc3R5bGUuY29sb3IgPSAndmFyKC0tdGV4dC1mYWludCknO1xuXHRcdFx0cmVtb3ZlTGluay5zdHlsZS50ZXh0RGVjb3JhdGlvbiA9ICd1bmRlcmxpbmUnO1xuXHRcdFx0cmVtb3ZlTGluay5vbmNsaWNrID0gYXN5bmMgKGUpID0+IHtcblx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcblx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmN1c3RvbVBhdGhzLnJlbW92ZShlbnRyeSk7XG5cdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcblx0XHRcdHJlbmRlclJlbWFwUGFuZWwoKTtcblx0XHRcdH07XG5cdFx0fSk7XG5cdFx0fTtcblxuXHRcdHJlbmRlclJlbWFwUGFuZWwoKTtcblxuXHRcdC8vIEFkZCBkaXZpZGVyIGluc2lkZSB0aGUgYm9keSwgYXQgdGhlIHRvcFxuXHRcdGN1c3RvbWl6YXRpb25Cb2R5LmNyZWF0ZUVsKCdkaXYnLCB7XG5cdFx0XHRhdHRyOiB7XG5cdFx0XHRzdHlsZTogJ2JvcmRlci10b3A6IDFweCBzb2xpZCB2YXIoLS1kaXZpZGVyLWNvbG9yKTsgbWFyZ2luOiAwLjVlbSAwOydcblx0XHRcdH1cblx0XHR9KTtcblxuXHRcdC8vIFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMCBISUdITElHSFQgU0VDVElPTiBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcblx0XHRjb25zdCBoaWdobGlnaHREZXRhaWxzID0gY29udGFpbmVyRWwuY3JlYXRlRWwoJ2RldGFpbHMnLCB7IGNsczogJ3ZrLXNlY3Rpb24nIH0pO1xuXG5cdFx0Ly8gMSkgQnVpbGQgdGhlIDxzdW1tYXJ5PiBmb3IgaGlnaGxpZ2h0LCBtYXRjaGluZyBiYWNrdXAgc3R5bGU6XG5cdFx0Y29uc3QgaGlnaGxpZ2h0U3VtbWFyeSA9IGhpZ2hsaWdodERldGFpbHMuY3JlYXRlRWwoJ3N1bW1hcnknLCB7IGNsczogJ3ZrLXNlY3Rpb24taGVhZGVyJyB9KTtcblx0XHRPYmplY3QuYXNzaWduKGhpZ2hsaWdodFN1bW1hcnkuc3R5bGUsIHtcblx0XHRkaXNwbGF5OiAnZmxleCcsXG5cdFx0ZmxleERpcmVjdGlvbjogJ2NvbHVtbicsXG5cdFx0YWxpZ25JdGVtczogJ3N0cmV0Y2gnLFxuXHRcdHBhZGRpbmc6ICcwLjVlbSAwJyxcblx0XHRib3JkZXJCb3R0b206ICcxcHggc29saWQgdmFyKC0tZGl2aWRlci1jb2xvciknLFxuXHRcdGN1cnNvcjogJ3BvaW50ZXInLFxuXHRcdH0pO1xuXG5cdFx0Ly8gMWEpIENyZWF0ZSB0aGUgdGl0bGUgKyBpY29uIHJvdyAoZmxleCByb3cganVzdGlmeSBzcGFjZS1iZXR3ZWVuKTpcblx0XHRjb25zdCBoaWdobGlnaHRUaXRsZVJvdyA9IGhpZ2hsaWdodFN1bW1hcnkuY3JlYXRlRGl2KHtcblx0XHRhdHRyOiB7XG5cdFx0XHRzdHlsZTogYFxuXHRcdFx0ZGlzcGxheTogZmxleDtcblx0XHRcdGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2Vlbjtcblx0XHRcdGFsaWduLWl0ZW1zOiBmbGV4LWVuZDtcblx0XHRcdGAsXG5cdFx0fSxcblx0XHR9KTtcblxuXHRcdC8vIDFiKSBMZWZ0IHNpZGU6IHRpdGxlICsgZGVzY3JpcHRpb25cblx0XHRjb25zdCBobFRpdGxlQmxvY2sgPSBoaWdobGlnaHRUaXRsZVJvdy5jcmVhdGVEaXYoe1xuXHRcdGF0dHI6IHsgc3R5bGU6ICdkaXNwbGF5OiBmbGV4OyBmbGV4LWRpcmVjdGlvbjogY29sdW1uOycgfVxuXHRcdH0pO1xuXHRcdGhsVGl0bGVCbG9jay5jcmVhdGVFbCgnaDUnLCB7IHRleHQ6ICdGaWxlIEhpZ2hsaWdodHMnIH0pO1xuXHRcdGhsVGl0bGVCbG9jay5jcmVhdGVFbCgnZGl2Jywge1xuXHRcdHRleHQ6ICdUb2dnbGUgb24vb2ZmIHRoZSBoaWdobGlnaHRpbmcgb2YgVG9vbGtpdC1zcGVjaWZpYyBmaWxlcy4gQWxzbyBtYWtlIHRoZSBoaWdobGlnaHRzIGNvb2wgY29sb3JzLicsXG5cdFx0Y2xzOiAnc2V0dGluZy1pdGVtLWRlc2NyaXB0aW9uJyxcblx0XHRhdHRyOiB7IHN0eWxlOiAnbWFyZ2luLXRvcDogMC4yNWVtOycgfSxcblx0XHR9KTtcblxuXHRcdC8vIDFjKSBSaWdodCBzaWRlOiBjb2xsYXBzaW5nIGFycm93L2ljb25cblx0XHRjb25zdCBobFRvZ2dsZUljb24gPSBoaWdobGlnaHRUaXRsZVJvdy5jcmVhdGVFbCgnc3BhbicsIHsgdGV4dDogJ1ZWJywgY2xzOiAndmstdG9nZ2xlLWljb24nIH0pO1xuXHRcdE9iamVjdC5hc3NpZ24oaGxUb2dnbGVJY29uLnN0eWxlLCB7XG5cdFx0Zm9udFdlaWdodDogJ2JvbGQnLFxuXHRcdGRpc3BsYXk6ICdpbmxpbmUtYmxvY2snLFxuXHRcdHRyYW5zaXRpb246ICd0cmFuc2Zvcm0gMC4ycyBlYXNlJyxcblx0XHR0cmFuc2Zvcm1PcmlnaW46ICc1MCUgNTAlJyxcblx0XHR1c2VyU2VsZWN0OiAnbm9uZScsXG5cdFx0dHJhbnNmb3JtOiBoaWdobGlnaHREZXRhaWxzLm9wZW4gPyAncm90YXRlKDBkZWcpJyA6ICdyb3RhdGUoMTgwZGVnKScsXG5cdFx0fSk7XG5cblx0XHQvLyAxZCkgTWFrZSB0aGUgaWNvbiByb3RhdGUgd2hlbiB0aGUgPGRldGFpbHM+IG9wZW5zL2Nsb3Nlczpcblx0XHRoaWdobGlnaHREZXRhaWxzLm9udG9nZ2xlID0gKCkgPT4ge1xuXHRcdGhsVG9nZ2xlSWNvbi5zdHlsZS50cmFuc2Zvcm0gPSBoaWdobGlnaHREZXRhaWxzLm9wZW4gPyAncm90YXRlKDBkZWcpJyA6ICdyb3RhdGUoMTgwZGVnKSc7XG5cdFx0fTtcblxuXHRcdC8vIDIpIENyZWF0ZSB0aGUgYm9keSBjb250YWluZXIgKGluZGVudGVkLCBzYW1lIGFzIGJhY2t1cClcblx0XHRjb25zdCBoaWdobGlnaHRCb2R5ID0gaGlnaGxpZ2h0RGV0YWlscy5jcmVhdGVEaXYoeyBjbHM6ICd2ay1zZWN0aW9uLWJvZHknIH0pO1xuXHRcdGhpZ2hsaWdodEJvZHkuc3R5bGUucGFkZGluZ0xlZnQgPSAnMWVtJztcblxuXHRcdC8vIDMpIFx1MjAxQ0VuYWJsZSBIaWdobGlnaHRcdTIwMUQgdG9nZ2xlIGFzIGEgU2V0dGluZyBpbnNpZGUgaGlnaGxpZ2h0Qm9keTpcblx0XHRuZXcgU2V0dGluZyhoaWdobGlnaHRCb2R5KVxuXHRcdC5zZXROYW1lKCdFbmFibGUgRmlsZS9Gb2xkZXIgSGlnaGxpZ2h0aW5nJylcblx0XHQuc2V0RGVzYygnQW55IGZpbGUvZm9sZGVyIGluc3RhbGxlZCBieSBWVnVuZGVybG9yZSB3aWxsIGhhdmUgdGhpcyBiYWNrZ3JvdW5kLicpXG5cdFx0LmFkZFRvZ2dsZSh0b2dnbGUgPT4ge1xuXHRcdFx0dG9nZ2xlXG5cdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuaGlnaGxpZ2h0RW5hYmxlZClcblx0XHRcdC5vbkNoYW5nZShhc3luYyAoZW5hYmxlZCkgPT4ge1xuXHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5oaWdobGlnaHRFbmFibGVkID0gZW5hYmxlZDtcblx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG5cblx0XHRcdFx0aWYgKGVuYWJsZWQpIHtcblx0XHRcdFx0dGhpcy5wbHVnaW4uZW5hYmxlSGlnaGxpZ2h0KCk7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHRoaXMucGx1Z2luLmRpc2FibGVIaWdobGlnaHQoKTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdC8vIFJlXHUyMDEwcmVuZGVyIHRoZSBjb2xvciBwaWNrZXJzIHdoZW5ldmVyIHRoZSB0b2dnbGUgY2hhbmdlczpcblx0XHRcdFx0cmVuZGVySGlnaGxpZ2h0Q29sb3JQaWNrZXJzKCk7XG5cdFx0XHR9KTtcblx0XHR9KTtcblxuXHRcdC8vIDQpIFdyYXBwZXIgZm9yIExpZ2h0L0RhcmsgY29sb3IgcGlja2Vyczpcblx0XHRjb25zdCBjb2xvclBpY2tlcldyYXBwZXIgPSBoaWdobGlnaHRCb2R5LmNyZWF0ZURpdigpO1xuXG5cdFx0Ly8gNSkgQSBmdW5jdGlvbiB0byByZW5kZXIgb3IgY2xlYXIgdGhlIHR3byBDb2xvclBpY2tlciBzZXR0aW5nczpcblx0XHRjb25zdCByZW5kZXJIaWdobGlnaHRDb2xvclBpY2tlcnMgPSAoKSA9PiB7XG5cdFx0Y29sb3JQaWNrZXJXcmFwcGVyLmVtcHR5KCk7XG5cblx0XHRpZiAoIXRoaXMucGx1Z2luLnNldHRpbmdzLmhpZ2hsaWdodEVuYWJsZWQpIHtcblx0XHRcdHJldHVybjsgLy8gZG8gbm90IHNob3cgcGlja2VycyBpZiBoaWdobGlnaHRpbmcgaXMgZGlzYWJsZWRcblx0XHR9XG5cblx0XHQvLyA1YSkgTGlnaHQgbW9kZSBjb2xvciBwaWNrZXJcblx0XHRuZXcgU2V0dGluZyhjb2xvclBpY2tlcldyYXBwZXIpXG5cdFx0XHQuc2V0TmFtZSgnTGlnaHQgTW9kZSBIaWdobGlnaHQgQ29sb3InKVxuXHRcdFx0LnNldERlc2MoJ0Nob29zZSB0aGUgYmFja2dyb3VuZCBjb2xvciBmb3IgZmlsZXMvZm9sZGVycyBpbiBMaWdodCBtb2RlLicpXG5cdFx0XHQuYWRkQ29sb3JQaWNrZXIocGlja2VyID0+IHtcblx0XHRcdHBpY2tlclxuXHRcdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuaGlnaGxpZ2h0Q29sb3JMaWdodClcblx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jIChuZXdDb2xvcikgPT4ge1xuXHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5oaWdobGlnaHRDb2xvckxpZ2h0ID0gbmV3Q29sb3I7XG5cdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuXG5cdFx0XHRcdC8vIFJlXHUyMDEwaW5qZWN0IENTUyBzbyB0aGUgbmV3IGNvbG9yIHRha2VzIGVmZmVjdCBpbW1lZGlhdGVseTpcblx0XHRcdFx0dGhpcy5wbHVnaW4uZGlzYWJsZUhpZ2hsaWdodCgpO1xuXHRcdFx0XHR0aGlzLnBsdWdpbi5lbmFibGVIaWdobGlnaHQoKTtcblx0XHRcdFx0fSk7XG5cdFx0XHR9KTtcblxuXHRcdC8vIDViKSBEYXJrIG1vZGUgY29sb3IgcGlja2VyXG5cdFx0bmV3IFNldHRpbmcoY29sb3JQaWNrZXJXcmFwcGVyKVxuXHRcdFx0LnNldE5hbWUoJ0RhcmsgTW9kZSBIaWdobGlnaHQgQ29sb3InKVxuXHRcdFx0LnNldERlc2MoJ0Nob29zZSB0aGUgYmFja2dyb3VuZCBjb2xvciBmb3IgZmlsZXMvZm9sZGVycyBpbiBEYXJrIG1vZGUuJylcblx0XHRcdC5hZGRDb2xvclBpY2tlcihwaWNrZXIgPT4ge1xuXHRcdFx0cGlja2VyXG5cdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5oaWdobGlnaHRDb2xvckRhcmspXG5cdFx0XHRcdC5vbkNoYW5nZShhc3luYyAobmV3Q29sb3IpID0+IHtcblx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MuaGlnaGxpZ2h0Q29sb3JEYXJrID0gbmV3Q29sb3I7XG5cdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuXG5cdFx0XHRcdC8vIFJlXHUyMDEwaW5qZWN0IENTUyBzbyB0aGUgbmV3IGNvbG9yIHRha2VzIGVmZmVjdCBpbW1lZGlhdGVseTpcblx0XHRcdFx0dGhpcy5wbHVnaW4uZGlzYWJsZUhpZ2hsaWdodCgpO1xuXHRcdFx0XHR0aGlzLnBsdWdpbi5lbmFibGVIaWdobGlnaHQoKTtcblx0XHRcdFx0fSk7XG5cdFx0XHR9KTtcblx0XHR9O1xuXG5cdFx0Ly8gNikgQ2FsbCBvbmNlIG9uIGluaXRpYWwgcmVuZGVyIHNvIHRoYXQgaWYgaGlnaGxpZ2h0RW5hYmxlZCA9PT0gdHJ1ZSwgdGhlIHBpY2tlcnMgc2hvdyB1cC5cblx0XHRyZW5kZXJIaWdobGlnaHRDb2xvclBpY2tlcnMoKTtcblxuXG5cdFx0Ly8gXHUyNTAwXHUyNTAwXHUyNTAwIElOSVRJQUwgRFJBVyBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcblx0XHRyZW5kZXJTa2lwVGFibGUoKTtcblx0XHRyZW5kZXJSZW1hcFBhbmVsKCk7XG5cblxuXHRcdC8vUkVNT1ZFIERFTU8gRklMRVNcblx0XHQvLyBcdTI1MDBcdTI1MDBcdTI1MDAgUkVNT1ZFIERFTU8gRklMRVMgKHVwZGF0ZWQpIFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFxuXG4vLyAxKSBDcmVhdGUgYSBTZXR0aW5nIHJvdywgYnV0IGltbWVkaWF0ZWx5IHN0cmlwIG9mZiBpdHMgZGVmYXVsdCB0b3BcdTIwMTBib3JkZXI6XG5jb25zdCByZW1vdmVEZW1vU2V0dGluZyA9IG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKTtcbihyZW1vdmVEZW1vU2V0dGluZy5zZXR0aW5nRWwgYXMgSFRNTEVsZW1lbnQpLnN0eWxlLmJvcmRlclRvcCA9ICdub25lJztcblxucmVtb3ZlRGVtb1NldHRpbmdcbiAgLnNldE5hbWUoJ1JlbW92ZSBEZW1vIEZpbGVzJylcbiAgLnNldERlc2MoJ0RlbGV0ZSBldmVyeSBcdTIwMUNvcHRpb25hbFx1MjAxRCBkZW1vIGZpbGUgYW5kIGZvbGRlciBmcm9tIHlvdXIgdmF1bHQuJylcbiAgLmFkZEJ1dHRvbigoYnV0dG9uKSA9PlxuICAgIGJ1dHRvblxuICAgICAgLnNldEJ1dHRvblRleHQoJ1JlbW92ZSBEZW1vIEZpbGVzJylcblxuICAgICAgLm9uQ2xpY2soYXN5bmMgKCkgPT4ge1xuICAgICAgICBjb25zdCBvcHRpb25hbEZpbGVFbnRyaWVzID0gdGhpcy5wbHVnaW4ubWFuaWZlc3RDYWNoZS5maWxlcy5maWx0ZXIoKGYpID0+IGYub3B0aW9uYWwpO1xuICAgICAgICBjb25zdCBvcHRpb25hbEZvbGRlckVudHJpZXMgPSB0aGlzLnBsdWdpbi5tYW5pZmVzdENhY2hlLmZvbGRlcnMuZmlsdGVyKChmKSA9PiBmLm9wdGlvbmFsKTtcblxuICAgICAgICBjb25zdCB0b3RhbENvdW50RmlsZXMgPSBvcHRpb25hbEZpbGVFbnRyaWVzLmxlbmd0aDtcbiAgICAgICAgY29uc3QgdG90YWxDb3VudEZvbGRlcnMgPSBvcHRpb25hbEZvbGRlckVudHJpZXMubGVuZ3RoO1xuICAgICAgICBjb25zdCB0b3RhbENvdW50ID0gdG90YWxDb3VudEZpbGVzICsgdG90YWxDb3VudEZvbGRlcnM7XG5cbiAgICAgICAgaWYgKHRvdGFsQ291bnQgPT09IDApIHtcbiAgICAgICAgICBuZXcgTm90aWNlKCdObyBcdTIwMUNvcHRpb25hbFx1MjAxRCBkZW1vIGZpbGVzIG9yIGZvbGRlcnMgdG8gcmVtb3ZlLicpO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIC0tLSAyKSBBc2sgZm9yIGNvbmZpcm1hdGlvbiBpbiBhIHNtYWxsIE1vZGFsIC0tLVxuICAgICAgICBjb25zdCB1c2VyQ29uZmlybWVkID0gYXdhaXQgbmV3IFByb21pc2U8Ym9vbGVhbj4oKHJlc29sdmUpID0+IHtcbiAgICAgICAgICBjb25zdCBjb25maXJtTW9kYWwgPSBuZXcgY2xhc3MgZXh0ZW5kcyBNb2RhbCB7XG4gICAgICAgICAgICBjb25zdHJ1Y3RvcihhcHA6IEFwcCkge1xuICAgICAgICAgICAgICBzdXBlcihhcHApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgb25PcGVuKCkge1xuICAgICAgICAgICAgICB0aGlzLmNvbnRlbnRFbC5lbXB0eSgpO1xuICAgICAgICAgICAgICB0aGlzLmNvbnRlbnRFbC5jcmVhdGVFbCgnaDInLCB7IHRleHQ6ICdDb25maXJtIFJlbW92YWwnIH0pO1xuICAgICAgICAgICAgICB0aGlzLmNvbnRlbnRFbC5jcmVhdGVFbCgncCcsIHtcbiAgICAgICAgICAgICAgICB0ZXh0OiBgVGhpcyB3aWxsIHBlcm1hbmVudGx5IGRlbGV0ZSAke3RvdGFsQ291bnRGaWxlc30gZmlsZShzKSBhbmQgJHt0b3RhbENvdW50Rm9sZGVyc30gZm9sZGVyKHMpLiBDb250aW51ZT9gLFxuICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICBjb25zdCBidG5Sb3cgPSB0aGlzLmNvbnRlbnRFbC5jcmVhdGVFbCgnZGl2Jyk7XG4gICAgICAgICAgICAgIE9iamVjdC5hc3NpZ24oYnRuUm93LnN0eWxlLCB7XG4gICAgICAgICAgICAgICAgZGlzcGxheTogJ2ZsZXgnLFxuICAgICAgICAgICAgICAgIGp1c3RpZnlDb250ZW50OiAnZmxleC1lbmQnLFxuICAgICAgICAgICAgICAgIGdhcDogJzAuNWVtJyxcbiAgICAgICAgICAgICAgICBtYXJnaW5Ub3A6ICcxLjVlbScsXG4gICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgIGJ0blJvdy5jcmVhdGVFbCgnYnV0dG9uJywgeyB0ZXh0OiAnQ2FuY2VsJyB9KS5vbmNsaWNrID0gKCkgPT4ge1xuICAgICAgICAgICAgICAgIHJlc29sdmUoZmFsc2UpO1xuICAgICAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICBidG5Sb3cuY3JlYXRlRWwoJ2J1dHRvbicsIHsgdGV4dDogJ1llcywgUmVtb3ZlJywgY2xzOiAnbW9kLWRhbmdlcicgfSkub25jbGljayA9ICgpID0+IHtcbiAgICAgICAgICAgICAgICByZXNvbHZlKHRydWUpO1xuICAgICAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG9uQ2xvc2UoKSB7XG4gICAgICAgICAgICAgIHRoaXMuY29udGVudEVsLmVtcHR5KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSh0aGlzLmFwcCk7XG5cbiAgICAgICAgICBjb25maXJtTW9kYWwub3BlbigpO1xuICAgICAgICB9KTtcblxuICAgICAgICBpZiAoIXVzZXJDb25maXJtZWQpIHtcbiAgICAgICAgICByZXR1cm47IC8vIHVzZXIgY2xpY2tlZCBcdTIwMUNDYW5jZWxcdTIwMURcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIC0tLSAzKSBEZWxldGUgb3B0aW9uYWwgZmlsZXMgb25lIGJ5IG9uZSAtLS1cbiAgICAgICAgbGV0IGZpbGVzRGVsZXRlZCA9IDA7XG4gICAgICAgIGZvciAoY29uc3QgZmlsZUVudHJ5IG9mIG9wdGlvbmFsRmlsZUVudHJpZXMpIHtcbiAgICAgICAgICAvLyAzYSkgUmVzcGVjdCBhbnkgcmVtYXBwaW5nIGluIGN1c3RvbVBhdGhzXG4gICAgICAgICAgY29uc3QgbWFwcGVkID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MuY3VzdG9tUGF0aHMuZmluZCgoYykgPT4gYy5tYW5pZmVzdEtleSA9PT0gZmlsZUVudHJ5LmtleSk7XG4gICAgICAgICAgY29uc3QgdmF1bHRQYXRoID0gbWFwcGVkPy52YXVsdFBhdGggPz8gZmlsZUVudHJ5LnBhdGg7XG5cbiAgICAgICAgICAvLyAzYikgSWYgaXQgYWN0dWFsbHkgZXhpc3RzLCByZW1vdmUgaXRcbiAgICAgICAgICBpZiAoYXdhaXQgdGhpcy5hcHAudmF1bHQuYWRhcHRlci5leGlzdHModmF1bHRQYXRoKSkge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgYXdhaXQgdGhpcy5hcHAudmF1bHQuYWRhcHRlci5yZW1vdmUodmF1bHRQYXRoKTtcbiAgICAgICAgICAgICAgZmlsZXNEZWxldGVkKys7XG4gICAgICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihgRmFpbGVkIHRvIGRlbGV0ZSBvcHRpb25hbCBmaWxlICR7dmF1bHRQYXRofWAsIGVycik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gLS0tIDQpIERlbGV0ZSBvcHRpb25hbCBmb2xkZXJzIHJlY3Vyc2l2ZWx5IC0tLVxuICAgICAgICBsZXQgZm9sZGVyc0RlbGV0ZWQgPSAwO1xuICAgICAgICBmb3IgKGNvbnN0IGZvbGRlckVudHJ5IG9mIG9wdGlvbmFsRm9sZGVyRW50cmllcykge1xuICAgICAgICAgIGNvbnN0IG1hcHBlZCA9IHRoaXMucGx1Z2luLnNldHRpbmdzLmN1c3RvbVBhdGhzLmZpbmQoKGMpID0+IGMubWFuaWZlc3RLZXkgPT09IGZvbGRlckVudHJ5LmtleSk7XG4gICAgICAgICAgY29uc3QgdmF1bHRGb2xkZXJQYXRoID0gbWFwcGVkPy52YXVsdFBhdGggPz8gZm9sZGVyRW50cnkucGF0aDtcblxuICAgICAgICAgIGlmIChhd2FpdCB0aGlzLmFwcC52YXVsdC5hZGFwdGVyLmV4aXN0cyh2YXVsdEZvbGRlclBhdGgpKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAvLyBUaGUgc2Vjb25kIGFyZ3VtZW50IGB0cnVlYCBlbnN1cmVzIHJlY3Vyc2l2ZSBkZWxldGVcbiAgICAgICAgICAgICAgYXdhaXQgdGhpcy5hcHAudmF1bHQuYWRhcHRlci5ybWRpcih2YXVsdEZvbGRlclBhdGgsIHRydWUpO1xuICAgICAgICAgICAgICBmb2xkZXJzRGVsZXRlZCsrO1xuICAgICAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYEZhaWxlZCB0byBkZWxldGUgb3B0aW9uYWwgZm9sZGVyICR7dmF1bHRGb2xkZXJQYXRofWAsIGVycik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gLS0tIDUpIENsZWFuIHVwIGFueSBcdTIwMUNjdXN0b21QYXRoc1x1MjAxRCBlbnRyaWVzIGZvciBvcHRpb25hbCBpdGVtcyAtLS1cbiAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuY3VzdG9tUGF0aHMgPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5jdXN0b21QYXRocy5maWx0ZXIoKGMpID0+IHtcbiAgICAgICAgICAvLyBJZiB0aGlzIG1hcHBpbmdcdTIwMTlzIG1hbmlmZXN0S2V5IHdhcyBvcHRpb25hbCwgZHJvcCBpdFxuICAgICAgICAgIGNvbnN0IGlzT3B0RmlsZSA9IG9wdGlvbmFsRmlsZUVudHJpZXMuc29tZSgoZikgPT4gZi5rZXkgPT09IGMubWFuaWZlc3RLZXkpO1xuICAgICAgICAgIGNvbnN0IGlzT3B0Rm9sZGVyID0gb3B0aW9uYWxGb2xkZXJFbnRyaWVzLnNvbWUoKGYpID0+IGYua2V5ID09PSBjLm1hbmlmZXN0S2V5KTtcbiAgICAgICAgICByZXR1cm4gIWlzT3B0RmlsZSAmJiAhaXNPcHRGb2xkZXI7XG4gICAgICAgIH0pO1xuICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcblxuICAgICAgICAvLyAtLS0gNikgU2hvdyBhIG5vdGljZSBhbmQgcmUtcmVuZGVyIHRoZSBzZXR0aW5ncyBwYWdlIC0tLVxuICAgICAgICBuZXcgTm90aWNlKGBEZWxldGVkICR7ZmlsZXNEZWxldGVkfSBmaWxlKHMpIGFuZCAke2ZvbGRlcnNEZWxldGVkfSBmb2xkZXIocykuYCk7XG4gICAgICAgIHRoaXMuZGlzcGxheSgpO1xuICAgICAgfSlcbiAgKTtcblxuXG5cblxuXHRcdC8qKiBcdTI1MDBcdTI1MDBcdTI1MDAgRk9PVEVSIFNFQ1RJT04gXHUyNTAwXHUyNTAwXHUyNTAwICovXG5cdFx0Y29uc3QgZm9vdGVyID0gY29udGFpbmVyRWwuY3JlYXRlRGl2KHsgY2xzOiAnc2V0dGluZy1pdGVtJyB9KTtcblx0XHRPYmplY3QuYXNzaWduKGZvb3Rlci5zdHlsZSwge1xuXHRcdGZvbnRTaXplOiAnMC44NWVtJyxcblx0XHRjb2xvcjogJ3ZhcigtLXRleHQtbXV0ZWQpJyxcblx0XHRtYXJnaW5Ub3A6ICcyZW0nLFxuXHRcdH0pO1xuXHRcdGZvb3Rlci5jcmVhdGVFbCgnc3BhbicsIHtcblx0XHRcdHRleHQ6IGBWVnVuZGVybG9yZSBUb29sa2l0IFBsdWdpbiB2JHt0aGlzLnBsdWdpbi5tYW5pZmVzdC52ZXJzaW9ufSBcdTIwMjIgYFxuXHRcdH0pO1xuXHRcdGZvb3Rlci5jcmVhdGVFbCgnYScsIHtcblx0XHRcdHRleHQ6ICdWaWV3IG9uIEdpdEh1YicsXG5cdFx0XHRocmVmOiAnaHR0cHM6Ly9naXRodWIuY29tL3NsYW13aXNlMDAwMS92dnVuZGVybG9yZS10b29sa2l0LXBsdWdpbicsXG5cdFx0XHRhdHRyOiB7IHRhcmdldDogJ19ibGFuaycgfVxuXHRcdH0pO1xuXG5cdFx0Y29udGFpbmVyRWwuc2Nyb2xsVG9wID0gc2F2ZWRTY3JvbGxUb3A7XG5cdH0pKCk7XG5cdH1cblxuXHRhc3luYyB1cGRhdGVWZXJzaW9uRGlzcGxheSgpOiBQcm9taXNlPHZvaWQ+IHtcblx0XHRpZiAoIXRoaXMudmVyc2lvblZhbHVlRWwgfHwgIXRoaXMuZm9yY2VXYXJuaW5nRWwpIHJldHVybjtcblx0ICBcblx0XHQvLyByZWFkIC52ZXJzaW9uLmpzb25cblx0XHRsZXQgaW5zdGFsbGVkID0gJyc7XG5cdFx0dHJ5IHtcblx0XHQgIGNvbnN0IHZlciA9IGF3YWl0IHRoaXMucGx1Z2luLmFwcC52YXVsdC5hZGFwdGVyLnJlYWQoJy52ZXJzaW9uLmpzb24nKTtcblx0XHQgIGluc3RhbGxlZCA9IEpTT04ucGFyc2UodmVyKS52ZXJzaW9uID8/ICcnO1xuXHRcdH0gY2F0Y2gge31cblx0XHRjb25zdCBsYXRlc3QgPSAodGhpcy5wbHVnaW4uc2V0dGluZ3MubGF0ZXN0VG9vbGtpdFZlcnNpb24gPz8gJycpLnRyaW0oKTtcblx0XHRjb25zdCBpc01hdGNoID0gaW5zdGFsbGVkID09PSBsYXRlc3Q7XG5cdCAgXG5cdFx0Ly8gdXBkYXRlIGp1c3QgdGhlIHZlcnNpb24gc3BhblxuXHRcdHRoaXMudmVyc2lvblZhbHVlRWwudGV4dENvbnRlbnQgPSBpbnN0YWxsZWQgfHwgJ05vdCBpbnN0YWxsZWQnO1xuXHRcdHRoaXMudmVyc2lvblZhbHVlRWwuc3R5bGUuY29sb3IgPSBpc01hdGNoXG5cdFx0ICA/ICd2YXIoLS10ZXh0LXN1Y2Nlc3MpJ1xuXHRcdCAgOiAndmFyKC0tdGV4dC1lcnJvciknO1xuXHQgIFxuXHRcdC8vIGNsZWFyIGFuZCByZS1yZW5kZXIganVzdCB0aGUgd2FybmluZyBjb250YWluZXJcblx0XHR0aGlzLmZvcmNlV2FybmluZ0VsLmVtcHR5KCk7XG5cdFx0aWYgKGluc3RhbGxlZCAmJiBsYXRlc3QgJiYgaW5zdGFsbGVkICE9PSBsYXRlc3QpIHtcblx0XHQgIGNvbnN0IHdhcm4gPSB0aGlzLmZvcmNlV2FybmluZ0VsLmNyZWF0ZURpdih7XG5cdFx0XHR0ZXh0OiBgXHUyNkEwXHVGRTBGIE5ldyB2ZXJzaW9uIGF2YWlsYWJsZSAoJHtpbnN0YWxsZWR9IFx1MjE5MiAke2xhdGVzdH0pIFx1MjAxNCB1c2UgcmVndWxhciB1cGRhdGUgaW5zdGVhZGAsXG5cdFx0ICB9KTtcblx0XHQgIHdhcm4uc3R5bGUuY3NzVGV4dCA9IGBcblx0XHRcdGZvbnQtc2l6ZTogMC44NWVtO1xuXHRcdFx0Y29sb3I6IHZhcigtLXRleHQtbXV0ZWQpO1xuXHRcdFx0Zm9udC1zdHlsZTogaXRhbGljO1xuXHRcdCAgYDtcblx0XHQgIHdhcm4uc2V0QXR0cigndGl0bGUnLCAnRm9yY2UgdXBkYXRpbmcgd2hpbGUgYSBuZXcgdmVyc2lvbiBpcyBhdmFpbGFibGUgbWF5IHNraXAgaW1wb3J0YW50IGNoYW5nZXMuJyk7XG5cdFx0fVxuXHQgIH1cblx0ICBcbn0gIFxuIiwgIi8vIHNyYy9maXJzdGluc3RhbGxjb25maXJtLnRzXG5pbXBvcnQgeyBBcHAsIE1vZGFsLCBCdXR0b25Db21wb25lbnQsIE5vdGljZSwgbm9ybWFsaXplUGF0aCB9IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCB0eXBlIFZWdW5kZXJsb3JlVG9vbGtpdFBsdWdpbiBmcm9tICcuL21haW4nO1xuaW1wb3J0IHsgSW5zdGFsbE9wdGlvbnMgfSBmcm9tICcuL21haW4nO1xuaW1wb3J0IHsgaW1wb3J0UnVsZXNldERhdGEgfSBmcm9tIFwiLi9ydWxlc2V0SW5zdGFsbGVyXCI7XG5cbmFzeW5jIGZ1bmN0aW9uIGFjdGl2YXRlQ29waWVkUGx1Z2lucyhhcHA6IEFwcCkge1xuICBjb25zdCBmaWxlUGF0aCA9IG5vcm1hbGl6ZVBhdGgoXCIub2JzaWRpYW4vY29tbXVuaXR5LXBsdWdpbnMuanNvblwiKTtcblxuICB0cnkge1xuICAgIGNvbnN0IHJhdyA9IGF3YWl0IGFwcC52YXVsdC5hZGFwdGVyLnJlYWQoZmlsZVBhdGgpO1xuICAgIGNvbnN0IHBsdWdpbnNUb0VuYWJsZTogc3RyaW5nW10gPSBKU09OLnBhcnNlKHJhdyk7XG5cbiAgICBpZiAoIUFycmF5LmlzQXJyYXkocGx1Z2luc1RvRW5hYmxlKSkgcmV0dXJuO1xuXG4gICAgY29uc3QgbG9hZGVkID0gKGFwcCBhcyBhbnkpLnBsdWdpbnM7XG5cbiAgICBmb3IgKGNvbnN0IHBsdWdpbklkIG9mIHBsdWdpbnNUb0VuYWJsZSkge1xuICAgICAgaWYgKCFsb2FkZWQuZW5hYmxlZFBsdWdpbnMuaGFzKHBsdWdpbklkKSkge1xuICAgICAgICBhd2FpdCBsb2FkZWQuZW5hYmxlUGx1Z2luQW5kU2F2ZShwbHVnaW5JZCk7XG4gICAgICAgIGNvbnNvbGUubG9nKGBBY3RpdmF0ZWQgcGx1Z2luOiAke3BsdWdpbklkfWApO1xuICAgICAgfVxuICAgIH1cblxuICAgIG5ldyBOb3RpY2UoXCJUb29sa2l0IHBsdWdpbnMgZW5hYmxlZC4gU29tZSBtYXkgbmVlZCBhIHJlbG9hZC5cIik7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICBjb25zb2xlLndhcm4oXCJGYWlsZWQgdG8gZW5hYmxlIHRvb2xraXQgcGx1Z2luczpcIiwgZSk7XG4gIH1cbn1cblxuXG5leHBvcnQgY2xhc3MgQ29uZmlybUZyZXNoSW5zdGFsbE1vZGFsIGV4dGVuZHMgTW9kYWwge1xuICBwcml2YXRlIHBsdWdpbjogVlZ1bmRlcmxvcmVUb29sa2l0UGx1Z2luO1xuXG4gIGNvbnN0cnVjdG9yKGFwcDogQXBwLCBwbHVnaW46IFZWdW5kZXJsb3JlVG9vbGtpdFBsdWdpbikge1xuICAgIHN1cGVyKGFwcCk7XG4gICAgdGhpcy5wbHVnaW4gPSBwbHVnaW47XG4gIH1cbiAgXG5cbiAgb25PcGVuKCkge1xuICAgIHRoaXMuY29udGVudEVsLmVtcHR5KCk7XG5cbiAgICB0aGlzLnRpdGxlRWwuc2V0VGV4dChcIlx1MjZBMFx1RkUwRiBXYXJuaW5nOiBGcmVzaCBWYXVsdCBSZWNvbW1lbmRlZFwiKTtcblxuICAgIC8vIERpc2NsYWltZXIgdGV4dFxuICAgIHRoaXMuY29udGVudEVsXG4gICAgICAuY3JlYXRlRWwoJ2RpdicsIHtcbiAgICAgICAgdGV4dDpcbiAgICAgICAgICBcIlRoZSBmdWxsIFZWdW5kZXJsb3JlIGluc3RhbGwgaXMgaW50ZW5kZWQgZm9yIGEgZnJlc2gsIGVtcHR5IE9ic2lkaWFuIHZhdWx0LiBcIiArXG4gICAgICAgICAgXCJJZiB5b3UgaW5zdGFsbCBpbiBhIHZhdWx0IHRoYXQgYWxyZWFkeSBoYXMgZmlsZXMsIGFueSBmaWxlIHdob3NlIHBhdGggbWF0Y2hlcyBhIFwiICtcbiAgICAgICAgICBcIlZWdW5kZXJsb3JlIFRvb2xraXQgZmlsZSB3aWxsIGJlIG92ZXJ3cml0dGVuLlxcblxcblwiICtcbiAgICAgICAgICBcIkFsc28gdGhpbmdzIGNvdWxkIGp1c3QgZ2V0IG1lc3N5LlxcblxcblwiICtcbiAgICAgICAgICBcIk1ha2UgYSBwZXJjZXB0aW9uIGNoZWNrIGFuZCBwcm9jZWVkIHdpdGggY2F1dGlvbiFcIixcbiAgICAgIH0pXG4gICAgICAuc3R5bGUuY3NzVGV4dCA9IGBcbiAgICAgICAgd2hpdGUtc3BhY2U6IHByZS13cmFwO1xuICAgICAgICBtYXJnaW4tYm90dG9tOiAxZW07XG4gICAgICAgIGxpbmUtaGVpZ2h0OiAxLjRlbTtcbiAgICAgIGA7XG5cbiAgICAvLyBCdXR0b24gcm93IGNvbnRhaW5lclxuICAgIGNvbnN0IGJ1dHRvblJvdyA9IHRoaXMuY29udGVudEVsLmNyZWF0ZUVsKCdkaXYnKTtcbiAgICBidXR0b25Sb3cuc3R5bGUuY3NzVGV4dCA9IGBcbiAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICBqdXN0aWZ5LWNvbnRlbnQ6IGZsZXgtZW5kO1xuICAgICAgZ2FwOiAwLjVlbTtcbiAgICBgO1xuXG4gICAgLy8gXCJPaCBnb2QsIGNhbmNlbCFcIiBidXR0b25cbiAgICBuZXcgQnV0dG9uQ29tcG9uZW50KGJ1dHRvblJvdylcbiAgICAgIC5zZXRCdXR0b25UZXh0KFwiT2ggZ29kLCBjYW5jZWwhXCIpXG4gICAgICAub25DbGljaygoKSA9PiB7XG4gICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgIH0pO1xuXG4gICAgLy8gXCJJbnN0YWxsISFcIiBidXR0b25cbiAgICBuZXcgQnV0dG9uQ29tcG9uZW50KGJ1dHRvblJvdylcbiAgICAgIC5zZXRCdXR0b25UZXh0KFwiSW5zdGFsbCEhXCIpXG4gICAgICAuc2V0Q3RhKCkgLy8gbWFrZXMgaXQgbG9vayBsaWtlIGEgcHJpbWFyeSBhY3Rpb25cbiAgICAgIC5vbkNsaWNrKGFzeW5jICgpID0+IHtcbiAgXG4gICAgICAgIGNvbnN0IG9wdHM6IEluc3RhbGxPcHRpb25zID0ge1xuICAgICAgICAgIGNvbXBlbmRpdW06IHRoaXMucGx1Z2luLnNldHRpbmdzLnJ1bGVzZXRDb21wZW5kaXVtLFxuICAgICAgICAgIHJlZmVyZW5jZXM6IFsuLi50aGlzLnBsdWdpbi5zZXR0aW5ncy5ydWxlc2V0UmVmZXJlbmNlXSxcbiAgICAgICAgfTtcblxuICAgICAgICAvLyBsZXQgdGhlIHVzZXIga25vdyB3ZSdyZSB3b3JraW5nXG4gICAgICAgIG5ldyBOb3RpY2UoXCJcdTIzRjMgSW5zdGFsbGluZyB0b29sa2l0XHUyMDI2XCIpO1xuICBcbiAgICAgICAgLy8gZ3JhYiB0aGUgc2VsZWN0aW9ucyBmcm9tIHNldHRpbmdzXG4gICAgICAgIGNvbnN0IGNvbXBlbmRpdW0gPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5ydWxlc2V0Q29tcGVuZGl1bTtcbiAgICAgICAgY29uc3QgcmVmZXJlbmNlcyA9IFsuLi50aGlzLnBsdWdpbi5zZXR0aW5ncy5ydWxlc2V0UmVmZXJlbmNlXTtcbiAgXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgLy8gcnVuIHlvdXIgbmV3IGluc3RhbGxlclxuICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLmluc3RhbGxGdWxsVG9vbGtpdCh7IGNvbXBlbmRpdW0sIHJlZmVyZW5jZXMgfSk7XG5cblxuICAgICAgICAgIGlmIChjb21wZW5kaXVtKSB7XG4gICAgICAgICAgICBhd2FpdCBpbXBvcnRSdWxlc2V0RGF0YSh7XG4gICAgICAgICAgICAgIGFwcDogdGhpcy5hcHAsXG4gICAgICAgICAgICAgIGVkaXRpb25LZXk6IGNvbXBlbmRpdW0sXG4gICAgICAgICAgICAgIHRhcmdldFBhdGg6IFwiQ29tcGVuZGl1bVwiXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJcdTI3NEMgaW5zdGFsbFRvb2xraXQoKSBmYWlsZWQ6XCIsIGVycik7XG4gICAgICAgICAgbmV3IE5vdGljZShcIlx1Mjc0QyBUb29sa2l0IGluc3RhbGxhdGlvbiBmYWlsZWQuIFNlZSBjb25zb2xlLlwiKTtcbiAgICAgICAgfVxuICAgICAgICAvLyAyLiBTYXZlIHNldHRpbmdzIHRvIGRpc2tcbiAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG5cbiAgICAgICAgLy8gMy4gUmVkcmF3IHNldHRpbmdzIHBhbmVsXG4gICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzVGFiLmRpc3BsYXkoKTtcblxuICAgICAgICAvLyA0LiBTaG93IHN1Y2Nlc3Mgc2NyZWVuIGluc2lkZSBtb2RhbFxuICAgICAgICB0aGlzLmNvbnRlbnRFbC5lbXB0eSgpO1xuICAgICAgICB0aGlzLnRpdGxlRWwuc2V0VGV4dChcIlx1MjcwNSBUb29sa2l0IEluc3RhbGxlZFwiKTtcblxuICAgICAgICB0aGlzLmNvbnRlbnRFbC5jcmVhdGVFbChcImRpdlwiLCB7XG4gICAgICAgICAgdGV4dDogXCJSZWxvYWRpbmcgdmF1bHQgdG8gZmluaXNoIHNldHVwLiBEb25cdTIwMTl0IHRvdWNoIGFueXRoaW5nLlwiLFxuICAgICAgICB9KS5zdHlsZS5jc3NUZXh0ID0gYFxuICAgICAgICAgIGZvbnQtc2l6ZTogMWVtO1xuICAgICAgICAgIG1hcmdpbi10b3A6IDFlbTtcbiAgICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gICAgICAgIGA7XG5cbiAgICAgICAgLy8gNS4gRGVsYXksIHRoZW4gY2xvc2UgJiByZWxvYWRcbiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgbG9jYXRpb24ucmVsb2FkKCk7XG4gICAgICAgIH0sIDMwMDApO1xuICAgICAgfSl9XG5cbiAgb25DbG9zZSgpIHtcbiAgICB0aGlzLmNvbnRlbnRFbC5lbXB0eSgpO1xuICB9XG59XG4iLCAiLy8gRlVUVVJFIFNZU1RFTVM6IFxuLy8gQ2FsbCBvZiBDdGh1bHUgXG4vLyBNb3RoZXJzaGlwXG4vLyBQRjJFXG4vLyBNXHUwMEY2cmsgQm9yZ1xuLy8gQmxhZGVzIGluIHRoZSBEYXJrXG4vLyBEZWx0YSBHcmVlblxuLy8gU3RhcmZpbmRlclxuLy8gVGhlIE9uZSBSaW5nXG4vLyBGYXRlIFxuLy8gQ3liZXJwdW5rXG4vLyBMYW5jZXJcbi8vIFBvd2VyZWQgYnkgdGhlIEFwb2NhbHlwc2Vcbi8vIFN0YXIgV2FycyBSUEdcblxuZXhwb3J0IGludGVyZmFjZSBFZGl0aW9uIHtcbiAgICBpZDogc3RyaW5nOyAgICAgICAgICAgICAgLy8gZS5nLiBcIjVlLTIwMTRcIlxuICAgIGxhYmVsOiBzdHJpbmc7ICAgICAgICAgICAvLyBlLmcuIFwiRCZEIDVFICgyMDE0KVwiXG4gICAgcmVwbz86IHN0cmluZzsgICAgICAgICAgICAvLyBlLmcuIFwiNWV0b29scy1taXJyb3ItMy81ZXRvb2xzLTIwMTQtc3JjXCJcbiAgICBwYXJzZXI/OiBzdHJpbmc7ICAgICAgIC8vIHlvdXIgcGFyc2VyXHUyMDEwc2VsZWN0b3JcbiAgICBzb3VyY2VVcmw/OiBzdHJpbmc7XG4gICAgY2F0ZWdvcmllcz86IHN0cmluZ1tdO1xuICB9XG4gIFxuICBleHBvcnQgY29uc3QgQVZBSUxBQkxFX0VESVRJT05TOiBFZGl0aW9uW10gPSBbXG4gICAge1xuICAgICAgaWQ6ICdub25lJyxcbiAgICAgIGxhYmVsOiAnTm9uZScsXG4gICAgICByZXBvOiAnJyxcbiAgICAgIHBhcnNlcjogJycsXG4gICAgICBzb3VyY2VVcmw6ICcnLFxuICAgIH0sXG4gICAge1xuICAgICAgaWQ6ICc1ZS0yMDE0JyxcbiAgICAgIGxhYmVsOiAnRCZEIDVlICgyMDE0KScsXG4gICAgICByZXBvOiAnNWV0b29scy1taXJyb3ItMy81ZXRvb2xzLTIwMTQtc3JjJyxcbiAgICAgIHBhcnNlcjogJzVlLTIwMTQnLFxuICAgICAgc291cmNlVXJsOiAnaHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tLzVldG9vbHMtbWlycm9yLTMvNWV0b29scy0yMDE0LXNyYy9tYWluL2RhdGEnLFxuICAgICAgY2F0ZWdvcmllczogWycnXSxcbiAgICB9LFxuICAgIHtcbiAgICAgIGlkOiAnNWUtMjAyNScsXG4gICAgICBsYWJlbDogJ0QmRCA1ZSAoMjAyNSknLFxuICAgICAgcmVwbzogJzVldG9vbHMtbWlycm9yLTMvNWV0b29scy1zcmMnLFxuICAgICAgcGFyc2VyOiAnNWUtMjAyNScsXG4gICAgICBzb3VyY2VVcmw6ICdodHRwczovL3Jhdy5naXRodWJ1c2VyY29udGVudC5jb20vNWV0b29scy1taXJyb3ItMy81ZXRvb2xzLXNyYy9tYWluL2RhdGEnLFxuICAgIH0sXG4gXG4gICAgXG5cbiAgXTtcblxuICAgIC8vIHtcbiAgICAvLyAgIGlkOiAnJyxcbiAgICAvLyAgIGxhYmVsOiAnJyxcbiAgICAvLyAgIHJlcG86ICcnLFxuICAgIC8vICAgcGFyc2VyOiAnJyxcbiAgICAvLyAgIHNvdXJjZVVybDogJycsXG4gICAgLy8gICBjYXRlZ29yaWVzOiBbJyddLFxuICAgIC8vIH0sICAiLCAiaW1wb3J0IHsgQXBwLCBub3JtYWxpemVQYXRoIH0gZnJvbSBcIm9ic2lkaWFuXCI7XG5pbXBvcnQgdHlwZSB7IEVkaXRpb24gfSBmcm9tIFwiLi4vLi4vZWRpdGlvbnNcIjtcbmltcG9ydCB7IHBhcnNlU3BlbGxzRmlsZSB9IGZyb20gXCIuL3NwZWxsc1wiO1xuaW1wb3J0IHsgcGFyc2VCZXN0aWFyeUZpbGUgfSBmcm9tIFwiLi9iZXN0aWFyeVwiO1xuaW1wb3J0IHsgcGFyc2VJdGVtc0ZpbGUgfSBmcm9tIFwiLi9pdGVtc1wiO1xuaW1wb3J0IHsgcGFyc2VTcGVjaWVzRmlsZSB9IGZyb20gXCIuL3NwZWNpZXNcIjtcbmltcG9ydCB7IHBhcnNlQ2xhc3NGaWxlIH0gZnJvbSBcIi4vY2xhc3Nlc1wiO1xuaW1wb3J0IHsgcGFyc2VBY3Rpb25zRmlsZSwgcGFyc2VDb25kaXRpb25zRGlzZWFzZXNGaWxlLCBwYXJzZVNlbnNlc0ZpbGUsIHBhcnNlU2tpbGxzRmlsZSB9IGZyb20gXCIuL3J1bGVzXCI7XG5pbXBvcnQgeyBwYXJzZUZlYXRzRmlsZSB9IGZyb20gXCIuL2ZlYXRzXCI7XG5pbXBvcnQgeyBwYXJzZUJhY2tncm91bmRzRmlsZSB9IGZyb20gXCIuL2JhY2tncm91bmRzXCI7XG5pbXBvcnQgeyBURmlsZSB9IGZyb20gXCJvYnNpZGlhblwiO1xuXG5cbi8vIFx1MjAxNCBHaXRIdWIgbGlzdGluZ3MgXHUyMDE0XG5hc3luYyBmdW5jdGlvbiBsaXN0U3BlbGxGaWxlc0Zyb21HaXRIdWIocmVwbzogc3RyaW5nKTogUHJvbWlzZTxzdHJpbmdbXT4ge1xuICBjb25zdCB1cmwgPSBgaHR0cHM6Ly9hcGkuZ2l0aHViLmNvbS9yZXBvcy8ke3JlcG99L2NvbnRlbnRzL2RhdGEvc3BlbGxzYDtcbiAgY29uc3QgcmVzID0gYXdhaXQgZmV0Y2godXJsKTtcbiAgY29uc3QgZGF0YSA9IChhd2FpdCByZXMuanNvbigpKSBhcyBBcnJheTx7IG5hbWU6IHN0cmluZzsgdHlwZTogc3RyaW5nIH0+O1xuICByZXR1cm4gZGF0YVxuICAgIC5maWx0ZXIoaXRlbSA9PiBpdGVtLnR5cGUgPT09IFwiZmlsZVwiICYmIGl0ZW0ubmFtZS5zdGFydHNXaXRoKFwic3BlbGxzLVwiKSAmJiBpdGVtLm5hbWUuZW5kc1dpdGgoXCIuanNvblwiKSlcbiAgICAubWFwKGl0ZW0gPT4gaXRlbS5uYW1lKTtcbn1cblxuYXN5bmMgZnVuY3Rpb24gbGlzdEJlc3RpYXJ5RmlsZXNGcm9tR2l0SHViKHJlcG86IHN0cmluZyk6IFByb21pc2U8c3RyaW5nW10+IHtcbiAgY29uc3QgdXJsID0gYGh0dHBzOi8vYXBpLmdpdGh1Yi5jb20vcmVwb3MvJHtyZXBvfS9jb250ZW50cy9kYXRhL2Jlc3RpYXJ5YDtcbiAgY29uc3QgcmVzID0gYXdhaXQgZmV0Y2godXJsKTtcbiAgY29uc3QgbGlzdCA9IChhd2FpdCByZXMuanNvbigpKSBhcyBBcnJheTx7IG5hbWU6IHN0cmluZzsgdHlwZTogc3RyaW5nIH0+O1xuICBjb25zdCBDT1JFX1NPVVJDRVMgPSBbXG4gICAgXCJiZXN0aWFyeS1waGIuanNvblwiLCBcImJlc3RpYXJ5LW1tLmpzb25cIiwgXCJiZXN0aWFyeS1kbWcuanNvblwiLFxuICAgIFwiYmVzdGlhcnkteGdlLmpzb25cIiwgXCJiZXN0aWFyeS12Z20uanNvblwiLCBcImJlc3RpYXJ5LXRjZS5qc29uXCIsXG4gICAgXCJiZXN0aWFyeS1lZ3cuanNvblwiLCBcImJlc3RpYXJ5LWVybHcuanNvblwiLCBcImJlc3RpYXJ5LW10Zi5qc29uXCIsXG4gICAgXCJiZXN0aWFyeS12cmdyLmpzb25cIiwgXCJiZXN0aWFyeS1jb3MuanNvblwiLCBcImJlc3RpYXJ5LW9vdGEuanNvblwiLFxuICAgIFwiYmVzdGlhcnktcG90YS5qc29uXCIsIFwiYmVzdGlhcnktaG90ZHEuanNvblwiLCBcImJlc3RpYXJ5LXJvdC5qc29uXCIsXG4gICAgXCJiZXN0aWFyeS1za3QuanNvblwiLCBcImJlc3RpYXJ5LXRmdHlwLmpzb25cIiwgXCJiZXN0aWFyeS10b2EuanNvblwiXG4gIF07XG4gIHJldHVybiBsaXN0XG4gICAgLmZpbHRlcihpdGVtID0+IGl0ZW0udHlwZSA9PT0gXCJmaWxlXCIgJiYgQ09SRV9TT1VSQ0VTLmluY2x1ZGVzKGl0ZW0ubmFtZSkpXG4gICAgLm1hcChpdGVtID0+IGl0ZW0ubmFtZSk7XG59XG5cbmNvbnN0IElURU1fSlNPTl9GSUxFUyA9IFtcbiAgXCJpdGVtcy1iYXNlLmpzb25cIixcbiAgXCJpdGVtcy5qc29uXCIsXG4gIFwib2JqZWN0cy5qc29uXCIsXG4gIFwidmVoaWNsZXMuanNvblwiLFxuICBcImRlY2tzLmpzb25cIixcbl07XG5cbmFzeW5jIGZ1bmN0aW9uIGxpc3RJdGVtRmlsZXNGcm9tR2l0SHViKHJlcG86IHN0cmluZyk6IFByb21pc2U8c3RyaW5nW10+IHtcbiAgY29uc3QgdXJsID0gYGh0dHBzOi8vYXBpLmdpdGh1Yi5jb20vcmVwb3MvJHtyZXBvfS9jb250ZW50cy9kYXRhYDtcbiAgY29uc3QgcmVzID0gYXdhaXQgZmV0Y2godXJsKTtcbiAgY29uc3QgZGF0YSA9IChhd2FpdCByZXMuanNvbigpKSBhcyBBcnJheTx7IG5hbWU6IHN0cmluZzsgdHlwZTogc3RyaW5nIH0+O1xuICByZXR1cm4gZGF0YVxuICAgIC5maWx0ZXIoaXRlbSA9PiBpdGVtLnR5cGUgPT09IFwiZmlsZVwiICYmIElURU1fSlNPTl9GSUxFUy5pbmNsdWRlcyhpdGVtLm5hbWUpKVxuICAgIC5tYXAoaXRlbSA9PiBpdGVtLm5hbWUpO1xufVxuXG5hc3luYyBmdW5jdGlvbiBsaXN0Q2xhc3NGaWxlc0Zyb21HaXRIdWIocmVwbzogc3RyaW5nKTogUHJvbWlzZTxzdHJpbmdbXT4ge1xuICBjb25zdCB1cmwgPSBgaHR0cHM6Ly9hcGkuZ2l0aHViLmNvbS9yZXBvcy8ke3JlcG99L2NvbnRlbnRzL2RhdGEvY2xhc3NgO1xuICBjb25zdCByZXMgPSBhd2FpdCBmZXRjaCh1cmwpO1xuICBjb25zdCBsaXN0aW5nID0gKGF3YWl0IHJlcy5qc29uKCkpIGFzIEFycmF5PHsgbmFtZTogc3RyaW5nOyB0eXBlOiBzdHJpbmcgfT47XG4gIHJldHVybiBsaXN0aW5nXG4gICAgLmZpbHRlcihpdGVtID0+XG4gICAgICBpdGVtLnR5cGUgPT09IFwiZmlsZVwiICYmXG4gICAgICBpdGVtLm5hbWUuc3RhcnRzV2l0aChcImNsYXNzLVwiKSAmJlxuICAgICAgaXRlbS5uYW1lLmVuZHNXaXRoKFwiLmpzb25cIilcbiAgICApXG4gICAgLm1hcChpdGVtID0+IGl0ZW0ubmFtZSk7XG59XG5cbi8vIFx1MjAxNCBlbnN1cmUgdGhlIHZhdWx0IGZvbGRlciBleGlzdHMgXHUyMDE0XG5hc3luYyBmdW5jdGlvbiBlbnN1cmVGb2xkZXIoYXBwOiBBcHAsIGZvbGRlclBhdGg6IHN0cmluZykge1xuICBjb25zdCBwYXJ0cyA9IGZvbGRlclBhdGguc3BsaXQoXCIvXCIpO1xuICBsZXQgY3VyciA9IFwiXCI7XG4gIGZvciAoY29uc3QgcCBvZiBwYXJ0cykge1xuICAgIGN1cnIgPSBjdXJyID8gYCR7Y3Vycn0vJHtwfWAgOiBwO1xuICAgIHRyeSB7IGF3YWl0IGFwcC52YXVsdC5jcmVhdGVGb2xkZXIoY3Vycik7IH1cbiAgICBjYXRjaCB7fSAvLyBhbHJlYWR5IGV4aXN0c1xuICB9XG59XG5cbi8vIFx1MjAxNCB0aGUgb25lIGVudHJ5LXBvaW50IHRoYXQgeW91ciB0b3AtbGV2ZWwgY2FsbHMgXHUyMDE0XG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gaW1wb3J0RWRpdGlvbkRhdGEocGFyYW1zOiB7XG4gIGFwcDogQXBwO1xuICBlZGl0aW9uOiBFZGl0aW9uO1xuICB0YXJnZXRQYXRoOiBzdHJpbmc7XG59KSB7XG4gIGNvbnN0IHsgYXBwLCBlZGl0aW9uLCB0YXJnZXRQYXRoIH0gPSBwYXJhbXM7XG4gIGNvbnN0IHJlcG8gPSBlZGl0aW9uLnJlcG8gPz8gXCJcIjtcblxuICAvLyBcdUQ4M0RcdUREMzkgU1BFTExTXG4gIHtcbiAgICBjb25zdCBzcGVsbEZpbGVzID0gYXdhaXQgbGlzdFNwZWxsRmlsZXNGcm9tR2l0SHViKHJlcG8pO1xuICAgIGZvciAoY29uc3QgZmlsZU5hbWUgb2Ygc3BlbGxGaWxlcykge1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgcmVzICA9IGF3YWl0IGZldGNoKGAke2VkaXRpb24uc291cmNlVXJsfS9zcGVsbHMvJHtmaWxlTmFtZX1gKTtcbiAgICAgICAgY29uc3QganNvbiA9IGF3YWl0IHJlcy5qc29uKCk7XG4gICAgICAgIGNvbnN0IGZpbGVzID0gcGFyc2VTcGVsbHNGaWxlKGpzb24sIGVkaXRpb24uaWQpO1xuICAgICAgICBmb3IgKGNvbnN0IG1kIG9mIGZpbGVzKSB7XG4gICAgICAgICAgY29uc3QgZnVsbFBhdGggPSBub3JtYWxpemVQYXRoKGAke3RhcmdldFBhdGh9L1NwZWxscy8ke21kLnBhdGh9YCk7XG4gICAgICAgICAgY29uc3QgZm9sZGVyICAgPSBmdWxsUGF0aC5zcGxpdChcIi9cIikuc2xpY2UoMCwgLTEpLmpvaW4oXCIvXCIpO1xuICAgICAgICAgIGF3YWl0IGVuc3VyZUZvbGRlcihhcHAsIGZvbGRlcik7XG4gICAgICAgICAgYXdhaXQgYXBwLnZhdWx0LmFkYXB0ZXIud3JpdGUoZnVsbFBhdGgsIG1kLmNvbnRlbnQpO1xuICAgICAgICB9XG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGNvbnNvbGUud2FybihgRmFpbGVkIHRvIGltcG9ydCBzcGVsbCAke2ZpbGVOYW1lfTpgLCBlKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvLyBcdUQ4M0RcdUREMzkgQkVTVElBUllcbiAge1xuICAgIGNvbnN0IGJlc3RpYXJ5RmlsZXMgPSBhd2FpdCBsaXN0QmVzdGlhcnlGaWxlc0Zyb21HaXRIdWIocmVwbyk7XG4gICAgZm9yIChjb25zdCBmaWxlTmFtZSBvZiBiZXN0aWFyeUZpbGVzKSB7XG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCByZXMgICAgPSBhd2FpdCBmZXRjaChgJHtlZGl0aW9uLnNvdXJjZVVybH0vYmVzdGlhcnkvJHtmaWxlTmFtZX1gKTtcbiAgICAgICAgY29uc3QganNvbiAgID0gYXdhaXQgcmVzLmpzb24oKTtcbiAgICAgICAgY29uc3QgcGFyc2VkID0gcGFyc2VCZXN0aWFyeUZpbGUoanNvbiwgZWRpdGlvbi5pZCk7XG4gICAgICAgIGZvciAoY29uc3QgbWQgb2YgcGFyc2VkKSB7XG4gICAgICAgICAgY29uc3QgZnVsbFBhdGggPSBub3JtYWxpemVQYXRoKGAke3RhcmdldFBhdGh9L0Jlc3RpYXJ5LyR7bWQucGF0aH1gKTtcbiAgICAgICAgICBjb25zdCBmb2xkZXIgICA9IGZ1bGxQYXRoLnNwbGl0KFwiL1wiKS5zbGljZSgwLCAtMSkuam9pbihcIi9cIik7XG4gICAgICAgICAgYXdhaXQgZW5zdXJlRm9sZGVyKGFwcCwgZm9sZGVyKTtcbiAgICAgICAgICBhd2FpdCBhcHAudmF1bHQuYWRhcHRlci53cml0ZShmdWxsUGF0aCwgbWQuY29udGVudCk7XG4gICAgICAgIH1cbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgY29uc29sZS53YXJuKGBGYWlsZWQgdG8gaW1wb3J0IGJlc3RpYXJ5ICR7ZmlsZU5hbWV9OmAsIGUpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8vIFx1RDgzRFx1REQzOSBJVEVNU1xuICB7XG4gICAgY29uc3QgaXRlbUZpbGVzID0gYXdhaXQgbGlzdEl0ZW1GaWxlc0Zyb21HaXRIdWIocmVwbyk7XG4gICAgZm9yIChjb25zdCBmbiBvZiBpdGVtRmlsZXMpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHJlcyAgPSBhd2FpdCBmZXRjaChgJHtlZGl0aW9uLnNvdXJjZVVybH0vJHtmbn1gKTtcbiAgICAgICAgY29uc3QganNvbiA9IGF3YWl0IHJlcy5qc29uKCk7XG4gICAgICAgIGNvbnN0IG1kRmlsZXMgPSBwYXJzZUl0ZW1zRmlsZShqc29uLCBlZGl0aW9uLmlkKTtcbiAgICAgICAgZm9yIChjb25zdCBtZCBvZiBtZEZpbGVzKSB7XG4gICAgICAgICAgY29uc3QgZnVsbFBhdGggPSBub3JtYWxpemVQYXRoKGAke3RhcmdldFBhdGh9LyR7bWQucGF0aH1gKTtcbiAgICAgICAgICBjb25zdCBmb2xkZXIgICA9IGZ1bGxQYXRoLnNwbGl0KFwiL1wiKS5zbGljZSgwLCAtMSkuam9pbihcIi9cIik7XG4gICAgICAgICAgYXdhaXQgZW5zdXJlRm9sZGVyKGFwcCwgZm9sZGVyKTtcbiAgICAgICAgICBhd2FpdCBhcHAudmF1bHQuYWRhcHRlci53cml0ZShmdWxsUGF0aCwgbWQuY29udGVudCk7XG4gICAgICAgIH1cbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgY29uc29sZS53YXJuKGBGYWlsZWQgdG8gaW1wb3J0IGl0ZW1zIGZyb20gJHtmbn06YCwgZSk7XG4gICAgICB9XG4gICAgfVxuICB9XG4vLyBcdUQ4M0RcdUREMzkgU1BFQ0lFU1xue1xuICBjb25zdCByZXMgID0gYXdhaXQgZmV0Y2goYCR7ZWRpdGlvbi5zb3VyY2VVcmx9L3JhY2VzLmpzb25gKTtcbiAgY29uc3QganNvbiA9IGF3YWl0IHJlcy5qc29uKCk7XG4gIGNvbnN0IG1kRmlsZXMgPSBwYXJzZVNwZWNpZXNGaWxlKGpzb24sIGVkaXRpb24uaWQpO1xuICBmb3IgKGNvbnN0IG1kIG9mIG1kRmlsZXMpIHtcbiAgICBjb25zdCBmdWxsUGF0aCA9IG5vcm1hbGl6ZVBhdGgoYCR7dGFyZ2V0UGF0aH0vUGxheWVyIEJ1aWxkLyR7bWQucGF0aH1gKTtcbiAgICBhd2FpdCBlbnN1cmVGb2xkZXIoYXBwLCBmdWxsUGF0aC5zcGxpdChcIi9cIikuc2xpY2UoMCwgLTEpLmpvaW4oXCIvXCIpKTtcbiAgICBhd2FpdCBhcHAudmF1bHQuYWRhcHRlci53cml0ZShmdWxsUGF0aCwgbWQuY29udGVudCk7XG4gIH1cbn1cbi8vIFx1RDgzRFx1REQzOSBGRVRDSCBPUFRJT05BTCBGRUFUVVJFUyBKU09OXG5sZXQgb3B0aW9uYWxGZWF0dXJlczogYW55W10gPSBbXTtcbnRyeSB7XG4gIGNvbnN0IHJlcyAgPSBhd2FpdCBmZXRjaChgJHtlZGl0aW9uLnNvdXJjZVVybH0vb3B0aW9uYWxmZWF0dXJlcy5qc29uYCk7XG4gIGNvbnN0IHJhdyAgPSBhd2FpdCByZXMuanNvbigpO1xuICBvcHRpb25hbEZlYXR1cmVzID0gQXJyYXkuaXNBcnJheShyYXcub3B0aW9uYWxmZWF0dXJlKVxuICAgID8gcmF3Lm9wdGlvbmFsZmVhdHVyZVxuICAgIDogW107XG59IGNhdGNoIChlKSB7XG4gIGNvbnNvbGUud2FybihcIkZhaWxlZCB0byBpbXBvcnQgb3B0aW9uYWxmZWF0dXJlcy5qc29uOlwiLCBlKTtcbn1cblxuLy8gXHVEODNEXHVERDM5IENMQVNTRVNcbntcbiAgY29uc3QgY2xhc3NGaWxlcyA9IGF3YWl0IGxpc3RDbGFzc0ZpbGVzRnJvbUdpdEh1YihyZXBvKTtcbiAgZm9yIChjb25zdCBmaWxlTmFtZSBvZiBjbGFzc0ZpbGVzKSB7XG4gICAgdHJ5IHtcbiAgICAgIC8vIGZldGNoIHRoZSByYXcgY2xhc3MgSlNPTlxuICAgICAgY29uc3QgcmVzICAgID0gYXdhaXQgZmV0Y2goYCR7ZWRpdGlvbi5zb3VyY2VVcmx9L2NsYXNzLyR7ZmlsZU5hbWV9YCk7XG4gICAgICBjb25zdCBqc29uICAgPSBhd2FpdCByZXMuanNvbigpO1xuXG4gICAgICAvLyBwYXJzZSBpbnRvIG9uZSBvciBtb3JlIG1hcmtkb3duIGZpbGVzXG4gICAgICBjb25zdCBtZEZpbGVzID0gcGFyc2VDbGFzc0ZpbGUoXG4gICAgICAgIGpzb24sXG4gICAgICAgIGVkaXRpb24uaWQsXG4gICAgICAgIGZpbGVOYW1lLFxuICAgICAgICBvcHRpb25hbEZlYXR1cmVzXG4gICAgICApO1xuICAgICAgZm9yIChjb25zdCBtZCBvZiBtZEZpbGVzKSB7XG4gICAgICAgIGNvbnN0IGZ1bGxQYXRoID0gbm9ybWFsaXplUGF0aChgJHt0YXJnZXRQYXRofS9QbGF5ZXIgQnVpbGQvJHttZC5wYXRofWApO1xuICAgICAgICAvLyAxKSBlbnN1cmUgdGhlIGZvbGRlciBleGlzdHNcbiAgICAgICAgYXdhaXQgZW5zdXJlRm9sZGVyKGFwcCwgZnVsbFBhdGguc3BsaXQoXCIvXCIpLnNsaWNlKDAsIC0xKS5qb2luKFwiL1wiKSk7XG5cbiAgICAgICAgLy8gMikgd3JpdGUgdmlhIE9ic2lkaWFuXHUyMDE5cyBBUEkgc28gbm90ZXMgcmVmcmVzaFxuICAgICAgICBjb25zdCBleGlzdGluZyA9IGFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoZnVsbFBhdGgpO1xuICAgICAgICBpZiAoZXhpc3RpbmcgaW5zdGFuY2VvZiBURmlsZSkge1xuICAgICAgICAgIC8vIE92ZXJ3cml0ZSBhbiBleGlzdGluZyBub3RlIGFuZCBmaXJlIHRoZSBjaGFuZ2UgZXZlbnRcbiAgICAgICAgICBhd2FpdCBhcHAudmF1bHQubW9kaWZ5KGV4aXN0aW5nLCBtZC5jb250ZW50KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBDcmVhdGUgYSBicmFuZC1uZXcgbm90ZSAoYWxzbyBmaXJlcyB0aGUgY2hhbmdlIGV2ZW50KVxuICAgICAgICAgIGF3YWl0IGFwcC52YXVsdC5jcmVhdGUoZnVsbFBhdGgsIG1kLmNvbnRlbnQpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgY29uc29sZS53YXJuKGBGYWlsZWQgdG8gaW1wb3J0IGNsYXNzICR7ZmlsZU5hbWV9OmAsIGUpO1xuICAgIH1cbiAgfVxufVxuXG5cbiAvLyBcdUQ4M0RcdUREMzkgUlVMRVM6IEFDVElPTlNcbiAge1xuICAgIHRyeSB7XG5cbiAgICAgIGNvbnN0IHJlcyAgPSBhd2FpdCBmZXRjaChgJHtlZGl0aW9uLnNvdXJjZVVybH0vYWN0aW9ucy5qc29uYCk7XG4gICAgICBjb25zdCBqc29uID0gYXdhaXQgcmVzLmpzb24oKTtcbiAgICBcbiAgICAgIGNvbnN0IG1kRmlsZXMgPSBwYXJzZUFjdGlvbnNGaWxlKGpzb24sIGVkaXRpb24uaWQpO1xuICAgIFxuICAgICAgZm9yIChjb25zdCBtZCBvZiBtZEZpbGVzKSB7XG4gICAgICAgIGNvbnN0IGZ1bGxQYXRoID0gbm9ybWFsaXplUGF0aChcbiAgICAgICAgICBgJHt0YXJnZXRQYXRofS8ke21kLnBhdGh9YFxuICAgICAgICApO1xuICAgICAgICBjb25zdCBmb2xkZXIgPSBmdWxsUGF0aC5zcGxpdChcIi9cIikuc2xpY2UoMCwgLTEpLmpvaW4oXCIvXCIpO1xuXG4gICAgICAgIGF3YWl0IGVuc3VyZUZvbGRlcihhcHAsIGZvbGRlcik7XG4gICAgICAgIGF3YWl0IGFwcC52YXVsdC5hZGFwdGVyLndyaXRlKGZ1bGxQYXRoLCBtZC5jb250ZW50KTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICBjb25zb2xlLndhcm4oXCJGYWlsZWQgdG8gaW1wb3J0IGFjdGlvbnMuanNvbjpcIiwgZSk7XG4gICAgfVxuICB9XG5cblxuICAgIC8vIFx1RDgzRFx1REQzOSBSVUxFUzogQ09ORElUSU9OUyAmIERJU0VBU0VTXG4gIHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgcmVzICA9IGF3YWl0IGZldGNoKGAke2VkaXRpb24uc291cmNlVXJsfS9jb25kaXRpb25zZGlzZWFzZXMuanNvbmApO1xuICAgICAgY29uc3QganNvbiA9IGF3YWl0IHJlcy5qc29uKCk7XG4gICAgICBjb25zdCBtZEZpbGVzID0gcGFyc2VDb25kaXRpb25zRGlzZWFzZXNGaWxlKGpzb24sIGVkaXRpb24uaWQpO1xuICAgICAgZm9yIChjb25zdCBtZCBvZiBtZEZpbGVzKSB7XG4gICAgICAgIGNvbnN0IGZ1bGxQYXRoID0gbm9ybWFsaXplUGF0aChcbiAgICAgICAgICBgJHt0YXJnZXRQYXRofS8ke21kLnBhdGh9YFxuICAgICAgICApO1xuICAgICAgICBjb25zdCBmb2xkZXIgPSBmdWxsUGF0aC5zcGxpdChcIi9cIikuc2xpY2UoMCwgLTEpLmpvaW4oXCIvXCIpO1xuICAgICAgICBhd2FpdCBlbnN1cmVGb2xkZXIoYXBwLCBmb2xkZXIpO1xuICAgICAgICBhd2FpdCBhcHAudmF1bHQuYWRhcHRlci53cml0ZShmdWxsUGF0aCwgbWQuY29udGVudCk7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgY29uc29sZS53YXJuKFwiRmFpbGVkIHRvIGltcG9ydCBjb25kaXRpb25zZGlzZWFzZXMuanNvbjpcIiwgZSk7XG4gICAgfVxuICB9XG5cbiAgIC8vIFx1RDgzRFx1REQzOSBSVUxFUzogU0VOU0VTXG4gIHtcbiAgICB0cnkge1xuXG4gICAgICBjb25zdCByZXMgID0gYXdhaXQgZmV0Y2goYCR7ZWRpdGlvbi5zb3VyY2VVcmx9L3NlbnNlcy5qc29uYCk7XG4gICAgICBjb25zdCBqc29uID0gYXdhaXQgcmVzLmpzb24oKTtcbiAgICBcbiAgICAgIGNvbnN0IG1kRmlsZXMgPSBwYXJzZVNlbnNlc0ZpbGUoanNvbiwgZWRpdGlvbi5pZCk7XG4gICAgXG4gICAgICBmb3IgKGNvbnN0IG1kIG9mIG1kRmlsZXMpIHtcbiAgICAgICAgY29uc3QgZnVsbFBhdGggPSBub3JtYWxpemVQYXRoKFxuICAgICAgICAgIGAke3RhcmdldFBhdGh9LyR7bWQucGF0aH1gXG4gICAgICAgICk7XG4gICAgICAgIGNvbnN0IGZvbGRlciA9IGZ1bGxQYXRoLnNwbGl0KFwiL1wiKS5zbGljZSgwLCAtMSkuam9pbihcIi9cIik7XG5cbiAgICAgICAgYXdhaXQgZW5zdXJlRm9sZGVyKGFwcCwgZm9sZGVyKTtcbiAgICAgICAgYXdhaXQgYXBwLnZhdWx0LmFkYXB0ZXIud3JpdGUoZnVsbFBhdGgsIG1kLmNvbnRlbnQpO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIGNvbnNvbGUud2FybihcIkZhaWxlZCB0byBpbXBvcnQgc2Vuc2VzLmpzb246XCIsIGUpO1xuICAgIH1cbiAgfVxuXG4gICAgIC8vIFx1RDgzRFx1REQzOSBSVUxFUzogU0tJTExTXG4gIHtcbiAgICB0cnkge1xuXG4gICAgICBjb25zdCByZXMgID0gYXdhaXQgZmV0Y2goYCR7ZWRpdGlvbi5zb3VyY2VVcmx9L3NraWxscy5qc29uYCk7XG4gICAgICBjb25zdCBqc29uID0gYXdhaXQgcmVzLmpzb24oKTtcbiAgICBcbiAgICAgIGNvbnN0IG1kRmlsZXMgPSBwYXJzZVNraWxsc0ZpbGUoanNvbiwgZWRpdGlvbi5pZCk7XG4gICAgXG4gICAgICBmb3IgKGNvbnN0IG1kIG9mIG1kRmlsZXMpIHtcbiAgICAgICAgY29uc3QgZnVsbFBhdGggPSBub3JtYWxpemVQYXRoKFxuICAgICAgICAgIGAke3RhcmdldFBhdGh9LyR7bWQucGF0aH1gXG4gICAgICAgICk7XG4gICAgICAgIGNvbnN0IGZvbGRlciA9IGZ1bGxQYXRoLnNwbGl0KFwiL1wiKS5zbGljZSgwLCAtMSkuam9pbihcIi9cIik7XG5cbiAgICAgICAgYXdhaXQgZW5zdXJlRm9sZGVyKGFwcCwgZm9sZGVyKTtcbiAgICAgICAgYXdhaXQgYXBwLnZhdWx0LmFkYXB0ZXIud3JpdGUoZnVsbFBhdGgsIG1kLmNvbnRlbnQpO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIGNvbnNvbGUud2FybihcIkZhaWxlZCB0byBpbXBvcnQgc2tpbGxzLmpzb246XCIsIGUpO1xuICAgIH1cbiAgfVxuXG4gICAvLyBcdUQ4M0RcdUREMzkgRkVBVFNcbiAge1xuICAgIHRyeSB7XG5cbiAgICAgIGNvbnN0IHJlcyAgPSBhd2FpdCBmZXRjaChgJHtlZGl0aW9uLnNvdXJjZVVybH0vZmVhdHMuanNvbmApO1xuICAgICAgY29uc3QganNvbiA9IGF3YWl0IHJlcy5qc29uKCk7XG4gICAgXG4gICAgICBjb25zdCBtZEZpbGVzID0gcGFyc2VGZWF0c0ZpbGUoanNvbiwgZWRpdGlvbi5pZCk7XG4gICAgXG4gICAgICBmb3IgKGNvbnN0IG1kIG9mIG1kRmlsZXMpIHtcbiAgICAgICAgY29uc3QgZnVsbFBhdGggPSBub3JtYWxpemVQYXRoKFxuICAgICAgICAgIGAke3RhcmdldFBhdGh9LyR7bWQucGF0aH1gXG4gICAgICAgICk7XG4gICAgICAgIGNvbnN0IGZvbGRlciA9IGZ1bGxQYXRoLnNwbGl0KFwiL1wiKS5zbGljZSgwLCAtMSkuam9pbihcIi9cIik7XG5cbiAgICAgICAgYXdhaXQgZW5zdXJlRm9sZGVyKGFwcCwgZm9sZGVyKTtcbiAgICAgICAgYXdhaXQgYXBwLnZhdWx0LmFkYXB0ZXIud3JpdGUoZnVsbFBhdGgsIG1kLmNvbnRlbnQpO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIGNvbnNvbGUud2FybihcIkZhaWxlZCB0byBpbXBvcnQgZmVhdHMuanNvbjpcIiwgZSk7XG4gICAgfVxuICB9XG5cbi8vIFx1RDgzRFx1REQzOSBCQUNLR1JPVU5EU1xue1xuICB0cnkge1xuICAgIGNvbnN0IHJlcyAgPSBhd2FpdCBmZXRjaChgJHtlZGl0aW9uLnNvdXJjZVVybH0vYmFja2dyb3VuZHMuanNvbmApO1xuICAgIGNvbnN0IGpzb24gPSBhd2FpdCByZXMuanNvbigpO1xuXG4gICAgY29uc3QgbWRGaWxlcyA9IHBhcnNlQmFja2dyb3VuZHNGaWxlKGpzb24sIGVkaXRpb24uaWQpO1xuXG4gICAgZm9yIChjb25zdCBtZCBvZiBtZEZpbGVzKSB7XG4gICAgICAvLyBtZC5wYXRoIGlzIFwiUGxheWVyIEJ1aWxkL0JhY2tncm91bmRzLzxOYW1lPi5tZFwiXG4gICAgICBjb25zdCBmdWxsUGF0aCA9IG5vcm1hbGl6ZVBhdGgoYCR7dGFyZ2V0UGF0aH0vJHttZC5wYXRofWApO1xuICAgICAgY29uc3QgZm9sZGVyICAgPSBmdWxsUGF0aC5zcGxpdChcIi9cIikuc2xpY2UoMCwgLTEpLmpvaW4oXCIvXCIpO1xuXG4gICAgICBhd2FpdCBlbnN1cmVGb2xkZXIoYXBwLCBmb2xkZXIpO1xuICAgICAgYXdhaXQgYXBwLnZhdWx0LmFkYXB0ZXIud3JpdGUoZnVsbFBhdGgsIG1kLmNvbnRlbnQpO1xuICAgIH1cbiAgfSBjYXRjaCAoZSkge1xuICAgIGNvbnNvbGUud2FybihcIkZhaWxlZCB0byBpbXBvcnQgYmFja2dyb3VuZHMuanNvbjpcIiwgZSk7XG4gIH1cbn1cblxufSIsICIvLyBoZWxwZXJzL3NvdXJjZU1hcC50c1xuXG4vLyBNYXAgb2YgNWUgc291cmNlIGFiYnJldmlhdGlvbnMgdG8gdGhlaXIgZnVsbCB0aXRsZXNcbmNvbnN0IFNPVVJDRV9OQU1FX01BUDogUmVjb3JkPHN0cmluZywgc3RyaW5nPiA9IHtcbiAgLy8gQ29yZSBydWxlYm9va3NcbiAgUEhCOiBcIlBsYXllcidzIEhhbmRib29rXCIsXG4gIE1NOiAgXCJNb25zdGVyIE1hbnVhbFwiLFxuICBETUc6IFwiRHVuZ2VvbiBNYXN0ZXIncyBHdWlkZVwiLFxuXG4gIC8vIE9mZmljaWFsIGV4cGFuc2lvbnMgJiBhZHZlbnR1cmUgbW9kdWxlc1xuICBDb1M6ICBcIkN1cnNlIG9mIFN0cmFoZFwiLFxuICBPb3RBOiBcIk91dCBvZiB0aGUgQWJ5c3NcIixcbiAgUG90QTogXCJQcmluY2VzIG9mIHRoZSBBcG9jYWx5cHNlXCIsXG4gIEhvdERROiBcIkhvYXJkIG9mIHRoZSBEcmFnb24gUXVlZW5cIixcbiAgUm9UOiAgXCJSaXNlIG9mIFRpYW1hdFwiLFxuICBTS1Q6ICBcIlN0b3JtIEtpbmcncyBUaHVuZGVyXCIsXG4gIFRmdFlQOlwiVGFsZXMgZnJvbSB0aGUgWWF3bmluZyBQb3J0YWxcIixcbiAgVG9BOiAgXCJUb21iIG9mIEFubmloaWxhdGlvblwiLFxuXG4gIC8vIFN1cHBsZW1lbnRhbCBndWlkZXNcbiAgWEdFOiBcIlhhbmF0aGFyJ3MgR3VpZGUgdG8gRXZlcnl0aGluZ1wiLFxuICBWR006IFwiVm9sbydzIEd1aWRlIHRvIE1vbnN0ZXJzXCIsXG4gIFRDRTogXCJUYXNoYSdzIENhdWxkcm9uIG9mIEV2ZXJ5dGhpbmdcIixcbiAgRUdXOiBcIkViZXJyb246IFJpc2luZyBmcm9tIHRoZSBMYXN0IFdhclwiLFxuICBFUkxXOlwiRXhwbG9yZXIncyBHdWlkZSB0byBXaWxkZW1vdW50XCIsXG4gIE1URjogXCJNb25zdGVycyBvZiB0aGUgTXVsdGl2ZXJzZVwiLFxuICBWUkdSOlwiVmFuIFJpY2h0ZW4ncyBHdWlkZSB0byBSYXZlbmxvZnRcIixcblxuICAvLyBBZGRpdGlvbmFsIHNvdXJjZWJvb2tzXG4gIEFBRzogICAgICBcIkFzdHJhbCBBZHZlbnR1cmVyXHUyMDE5cyBHdWlkZVwiLFxuICBBSTogICAgICAgXCJBY3F1aXNpdGlvbnMgSW5jb3Jwb3JhdGVkXCIsXG4gIEFpdEZSQVZGVDpcIkFkdmVudHVyZXMgaW4gdGhlIEZvcmdvdHRlbiBSZWFsbXM6IEEgVmlzdWFsIEZpZWxkIFRlc3RcIixcbiAgQk1UOiAgICAgIFwiQmlnIE1vbnN0ZXIgVG9tZVwiLFxuICBEb0RrOiAgICAgXCJEcmFnb24gb2YgRGFya2tlZXBcIixcbiAgRlREOiAgICAgIFwiRml6YmFuXHUyMDE5cyBUcmVhc3VyeSBvZiBEcmFnb25zXCIsXG4gIEdHUjogICAgICBcIkd1aWxkbWFzdGVyXHUyMDE5cyBHdWlkZSB0byBSYXZuaWNhXCIsXG4gIEdITG9FOiAgICBcIkdob3N0cyBvZiB0aGUgSG9yaXpvbjogTGlnaHQgT3ZlciBFbGVuc2FyaWFcIixcbiAgSURSb3RGOiAgIFwiSWNld2luZCBEYWxlOiBSaW1lIG9mIHRoZSBGcm9zdG1haWRlblwiLFxuICBMTEs6ICAgICAgXCJMb3N0IExhYm9yYXRvcnkgb2YgS3dhbGlzaFwiLFxuICBTYXRPOiAgICAgXCJTYXBwaGlyZSBvZiBUcnV0aFwiLFxuICBTQ0M6ICAgICAgXCJTdHJpeGhhdmVuOiBDdXJyaWN1bHVtIG9mIENoYW9zXCIsXG4gIFREQ1NSOiAgICBcIlRoZSBEdW5nZW9uIENvYWNoXHUyMDE5cyBSdWxlYm9va1wiLFxuICBKdHRSQzogICAgXCJKb3VybmV5cyB0aHJvdWdoIHRoZSBSYWRpYW50IENpdGFkZWxcIixcbiAgXCJBaXRGUi1BVlRcIjpcIkFkdmVudHVyZXMgaW4gdGhlIEZvcmdvdHRlbiBSZWFsbXM6IEEgVmVyZGFudCBUb21iXCIsXG4gIFwiQWl0RlItRkNEXCI6XCJBZHZlbnR1cmVzIGluIHRoZSBGb3Jnb3R0ZW4gUmVhbG1zOiBGcm9tIEN5YW4gRGVwdGhzXCIsXG4gIFJNUjogICAgICBcIkR1bmdlb25zIGFuZCBEcmFnb25zOiBSaWNrIGFuZCBNb3J0eVwiLFxuICBTQ0FHOiAgICAgXCJTd29yZCBDb2FzdCBBZHZlbnR1cmVyJ3MgR3VpZGVcIixcbiAgRUVQQzogICAgIFwiRWxlbWVudGFsIEV2aWwgUGxheWVyJ3MgQ29tcGFuaW9uXCIsXG4gIE1PVDogICAgICBcIk15dGhpYyBPZHlzc2V5cyBvZiBUaGVyb3NcIixcbiAgV0J0VzogICAgIFwiVGhlIFdpbGQgQmV5b25kIHRoZSBXaXRjaGxpZ2h0XCIsXG4gIEJHRElBOiAgICBcIkJhbGR1cidzIEdhdGU6IERlc2NlbnQgSW50byBBdmVybnVzXCIsXG4gIFRvRlc6ICAgICBcIlR1cm4gb2YgRm9ydHVuZSdzIFdoZWVsXCIsXG4gIENvQTogICAgICBcIkNoYWlucyBvZiBBc21vZGV1c1wiLFxuICBDUkNvdE46ICAgXCJDcml0aWNhbCBSb2xlOiBDYWxsIG9mIHRoZSBOZXRoZXJkZWVwXCIsXG4gIFRvRDogICAgICBcIlR5cmFubnkgb2YgRHJhZ29uc1wiLFxuICBNUE1NOiAgICAgXCJNb3JkZW5rYWluZW4gUHJlc2VudHM6IE1vbnN0ZXJzIG9mIHRoZSBNdWx0aXZlcnNlXCIsXG4gIExvWDogICAgICBcIkxpZ2h0IG9mIFhhcnl4aXNcIixcbiAgUWZ0SVM6ICAgIFwiUXVlc3RzIGZyb20gdGhlIEluZmluaXRlIFN0YWlyY2FzZVwiLFxuICBXREg6ICAgICAgXCJXYXRlcmRlZXA6IERyYWdvbiBIZWlzdFwiLFxuICBXRE1NOiAgICAgXCJXYXRlcmRlZXA6IER1bmdlb24gb2YgdGhlIE1hZCBNYWdlXCIsXG4gIFBhQlRTTzogICBcIlBoYW5kZWx2ZXIgYW5kIEJlbG93OiBUaGUgU2hhdHRlcmVkIE9iZWxpc2tcIixcbiAgQ006ICAgICAgIFwiQ2FuZGxla2VlcCBNeXN0ZXJpZXNcIixcbiAgR29TOiAgICAgIFwiR2hvc3RzIG9mIFNhbHRtYXJzaFwiLFxuICBEU290RFE6ICAgXCJEcmFnb25sYW5jZTogU2hhZG93IG9mIHRoZSBEcmFnb24gUXVlZW5cIixcbiAgS2Z0R1Y6ICAgIFwiS2V5cyBmcm9tIHRoZSBHb2xkZW4gVmF1bHRcIixcbiAgU0RXOiAgICAgIFwiRXNzZW50aWFscyBLaXQ6IFNsZWVwaW5nIERyYWdvbidzIFdha2VcIixcbiAgRG9TSTogICAgIFwiRHJhZ29ucyBvZiBTdG9ybXdyZWNrIElzbGVcIixcbiAgR290U0Y6ICAgIFwiR2lhbnRzIG9mIHRoZSBTdGFyIEZvcmdlXCIsXG4gIERJUDogICAgICBcIkVzc2VudGlhbHMgS2l0OiBEcmFnb24gb2YgSWNlc3BpcmUgUGVha1wiLFxuICBTTFc6ICAgICAgXCJFc3NlbnRpYWxzIEtpdDogU3Rvcm0gTG9yZCdzIFdyYXRoXCIsXG4gIElNUjogICAgICBcIkluZmVybmFsIE1hY2hpbmUgUmVidWlsZFwiLFxuICBWRW9SOiAgICAgXCJWZWNuYTogRXZlIG9mIFJ1aW5cIixcbiAgUFNJOiAgICAgIFwiUGxhbmUgU2hpZnQ6IElubmlzdHJhZFwiLFxuICBBQVRNOiAgICAgXCJBZHZlbnR1cmUgQXRsYXM6IFRoZSBNb3J0dWFyeVwiLFxuICBQU1o6ICAgICAgXCJQbGFuZSBTaGlmdDogWmVuZGlrYXJcIixcbiAgREM6ICAgICAgIFwiRXNzZW50aWFscyBLaXQ6IERpdmluZSBDb250ZW50aW9uXCIsXG4gIExNb1A6ICAgICBcIkxvc3QgTWluZSBvZiBQaGFuZGVsdmVyXCIsXG4gIFJNQlJFOiAgICBcIlRoZSBMb3N0IER1bmdlb24gb2YgUmlja2VkbmVzczogQmlnIFJpY2sgRW5lcmd5XCIsXG4gIEhmdFQ6ICAgICBcIkh1bnQgZm9yIHRoZSBUaGVzc2FsaHlkcmFcIixcbiAgUFNYOiAgICAgIFwiUGxhbmUgU2hpZnQ6IEl4YWxhblwiLFxuICBIRlN0Q006ICAgXCJIZXJvZXMnIEZlYXN0OiBTYXZpbmcgdGhlIENoaWxkcmVucyBNZW51XCIsXG4gIFNqQTogICAgICBcIlNwZWxsamFtbWVyIEFjYWRlbXlcIixcbiAgTEs6ICAgICAgIFwiTGlnaHRuaW5nIEtlZXBcIixcbiAgUnRHOiAgICAgIFwiUmV0dXJuIHRvIHRoZSBHbG9yeVwiLFxuICBUVFA6ICAgICAgXCJUaGUgVG9ydGxlIFBhY2thZ2VcIixcbiAgTFI6ICAgICAgIFwiTG9jYXRoYWggUmlzaW5nXCIsXG4gIFBTQTogICAgICBcIlBsYW5lIFNoaWZ0OiBBbW9ua2hldFwiLFxuICBPR0E6ICAgICAgXCJPbmUgR3J1bmcgQWJvdmVcIixcbiAgXCJOUkgtVExUXCI6ICBcIk5lcmRzIFJlc3RvcmluZyBIYXJtb255OiBUaGUgTG9zdCBUb21iXCIsXG4gIFwiTlJILUFUXCI6ICAgXCJOZXJkcyBSZXN0b3JpbmcgSGFybW9ueTogQWR2ZW50dXJlIFRvZ2V0aGVyXCIsXG4gIEJHRzogICAgICBcIkJpZ2J5IFByZXNlbnRzOiBHbG9yeSBvZiB0aGUgR2lhbnRzXCIsXG4gIFJvVE9TOiAgICBcIlRoZSBSaXNlIG9mIFRpYW1hdCBPbmxpbmUgU3VwcGxlbWVudFwiLFxuICBYTXRTOiAgICAgXCJYIE1hcmtzIHRoZSBTcG90XCIsXG4gIFwiSEFULUxNSVwiOiAgXCJIb25vciBBbW9uZyBUaGVpdmVzOiBMZWdlbmRhcnkgTWFnaWMgSXRlbXNcIixcbiAgRGl0TENvVDogIFwiRGVzY2VudCBpbnRvIHRoZSBMb3N0IENhdmVybnMgb2YgVHNvamNhbnRoXCIsXG4gIFwiQWl0RlItRE5cIjogXCJBZHZlbnR1cmVzIGluIHRoZSBGb3Jnb3R0ZW4gUmVhbG1zOiBEZWVwZXN0IE5pZ2h0XCIsXG4gIFwiQWl0RlItVEhQXCI6XCJBZHZlbnR1cmVzIGluIHRoZSBGb3Jnb3R0ZW4gUmVhbG1zOiBUaGUgSGlkZGVuIFBhZ2VzXCIsXG4gIEJBTTogICAgICBcIkJvbydzIEFzdHJhbCBNZW5hZ2VyaWVcIixcbiAgQVpmeVQ6ICAgIFwiQSBaaWIgZm9yIFlvdXIgVGhvdWd0c1wiLFxuICBNQ1YyREM6ICAgXCJNb25zdHJvdXMgQ29tcGVuZGl1bSBWb2x1bWUgMjogRHJhZ29ubGFuY2UgQ3JlYXR1cmVzXCIsXG4gIFBTSzogICAgICBcIlBsYW5lIFNoaWZ0OiBLYWxhZGVzaFwiLFxuICBQU0Q6ICAgICAgXCJQbGFuZSBTaGlmdDogRG9taW5hcmlhXCIsXG4gIEFXTTogICAgICBcIkFkdmVudHVyZSB3aXRoIE11a1wiLFxuICBVQVRoZU15c3RpY0NsYXNzOiBcIlVuZWFydGhlZCBBcmNhbmE6IFRoZSBNeXN0aWMgQ2xhc3NcIixcbiAgQUxDdXJzZU9mU3RyYWhkOiBcIkFkdmVudHVyZXJzIExlYWd1ZTogQ3Vyc2Ugb2YgU3RyYWhkXCIsXG4gIEFMRWxlbWVudGFsRXZpbDogXCJBZHZlbnR1cmVycyBMZWFndWU6IEVsZW1lbnRhbCBFdmlsXCIsXG4gIEFMUmFnZU9mRGVtb25zOiAgXCJBZHZlbnR1cmVycyBMZWFndWU6IFJhZ2Ugb2YgRGVtb25zXCJcbn07XG5cbi8qKlxuICogUmV0dXJucyB0aGUgZnVsbCBzb3VyY2UgbmFtZSBmb3IgYSBnaXZlbiBhYmJyZXZpYXRpb24uXG4gKiBPcHRpb25hbGx5IGFwcGVuZHMgeWVhciBmb3IgUEhCIHZhcmlhbnRzLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0RnVsbFNvdXJjZU5hbWUoYWJicmV2OiBzdHJpbmcsIGVkaXRpb25JZD86IHN0cmluZyk6IHN0cmluZyB7XG4gIGxldCBuYW1lID0gU09VUkNFX05BTUVfTUFQW2FiYnJldl0gPz8gYWJicmV2O1xuXG4gIC8vIEFwcGVuZCB5ZWFyIGZvciBQSEIgaWYgdGhlIGVkaXRpb24gY29udGV4dCBpcyBrbm93blxuICBpZiAoYWJicmV2ID09PSBcIlBIQlwiKSB7XG4gICAgaWYgKGVkaXRpb25JZD8uaW5jbHVkZXMoXCIyMDE0XCIpKSBuYW1lICs9IFwiICgyMDE0KVwiO1xuICAgIGVsc2UgaWYgKGVkaXRpb25JZD8uaW5jbHVkZXMoXCIyMDI1XCIpKSBuYW1lICs9IFwiICgyMDI1KVwiO1xuICB9XG5cbiAgcmV0dXJuIG5hbWU7XG59XG4iLCAiLy8gcGFyc2Vycy81ZS1qc29uL2hlbHBlcnMvdGFnUmVwbGFjZXIudHNcblxuZXhwb3J0IGZ1bmN0aW9uIHJlcGxhY2U1ZVRhZ3MoaW5wdXQ6IHVua25vd24pOiBzdHJpbmcge1xuICAvLyAxKSBUdXJuIGFycmF5cyBpbnRvIHNwYWNlLWpvaW5lZCBzdHJpbmdzXG4gIC8vIDIpIExlYXZlIHN0cmluZ3MgYWxvbmVcbiAgLy8gMykgQ29lcmNlIGV2ZXJ5dGhpbmcgZWxzZSB0byBzdHJpbmcgKG9yIGVtcHR5KVxuICBsZXQgdGV4dDogc3RyaW5nO1xuICBpZiAoQXJyYXkuaXNBcnJheShpbnB1dCkpIHtcbiAgICB0ZXh0ID0gaW5wdXQuam9pbihcIiBcIik7XG4gIH0gZWxzZSBpZiAodHlwZW9mIGlucHV0ID09PSBcInN0cmluZ1wiKSB7XG4gICAgdGV4dCA9IGlucHV0O1xuICB9IGVsc2Uge1xuICAgIHRleHQgPSBTdHJpbmcoaW5wdXQgPz8gXCJcIik7XG4gIH1cblxuICAvLyBub3cgcnVuIGFsbCB5b3VyIEAtdGFnIHJlcGxhY2VtZW50cyBvbiB0aGF0IHRleHRcbiAgcmV0dXJuIHRleHRcbiAgICAucmVwbGFjZSgvXFx7QChzcGVsbHxpdGVtfGNyZWF0dXJlfHJhY2UpIChbXnx9XSspKD86XFx8W159XSspP1xcfS9nLCAoXywgX18sIG5hbWUpID0+XG4gICAgICBgW1ske2NhcGl0YWxpemVFYWNoKG5hbWUpfV1dYFxuICAgIClcbiAgICAucmVwbGFjZSgvXFx7QChjb25kaXRpb258c3RhdHVzfGFjdGlvbnxza2lsbCkgKFtefH1dKykoPzpcXHxbXn1dKyk/XFx9L2csIChfLCB0YWcsIG5hbWUpID0+XG4gICAgICBgW1ske2NhcGl0YWxpemUodGFnKX1zIyR7bmFtZX18JHtjYXBpdGFsaXplRWFjaChuYW1lKX1dXWBcbiAgICApXG4gICAgLnJlcGxhY2UoL1xce0BjbGFzc0ZlYXR1cmUgKFtefH1dKylcXHwoW158fV0rKSg/OlxcfFtefV0rKT9cXH0vZywgKF8sIGZlYXR1cmUsIGNscykgPT5cbiAgICAgIGBbWyR7Y2xzfSMke2ZlYXR1cmV9XV1gXG4gICAgKVxuICAgIC5yZXBsYWNlKC9cXHtAKGJvb2t8ZmlsdGVyKSAoW158fV0rKSg/OlxcfFtefV0rKT9cXH0vZywgKF8sIF9fLCB0eHQpID0+IHR4dClcbiAgICAucmVwbGFjZSgvXFx7QG5vdGUgKFtefV0rKVxcfS9nLCAoXywgbm90ZSkgPT4gYCoke25vdGV9KmApXG4gICAgLnJlcGxhY2UoL1xce0AoZGFtYWdlfGRpY2V8ZGN8aGl0fHNlbnNlKSAoW159XSspXFx9L2csIChfLCBfXywgdmFsdWUpID0+IHZhbHVlKVxuICAgIC5yZXBsYWNlKC9cXHtAY2hhbmNlIChbXnx9XSspKD86XFx8W159XSspP1xcfS9nLCAoXywgdmFsdWUpID0+IGAke3ZhbHVlfSVgKVxuICAgIC5yZXBsYWNlKC9cXHtAcXVpY2tyZWYgKFtefH1dKykoPzpcXHxbXnxdKlxcfFtefV0qKT9cXH0vZywgKF8sIHRlcm0pID0+IHtcbiAgICAgIGNvbnN0IGtub3duID0gW1xuICAgICAgICBcImRpZmZpY3VsdCB0ZXJyYWluXCIsIFwidG90YWwgY292ZXJcIiwgXCJoYWxmIGNvdmVyXCIsIFwidGhyZWUtcXVhcnRlcnMgY292ZXJcIixcbiAgICAgICAgXCJoZWF2aWx5IG9ic2N1cmVkXCIsIFwibGlnaHRseSBvYnNjdXJlZFwiXG4gICAgICBdO1xuICAgICAgcmV0dXJuIGtub3duLmluY2x1ZGVzKHRlcm0udG9Mb3dlckNhc2UoKSlcbiAgICAgICAgPyBgW1tSdWxlcyMke2NhcGl0YWxpemVFYWNoKHRlcm0pfV1dYFxuICAgICAgICA6IHRlcm07XG4gICAgfSlcbiAgICAucmVwbGFjZSgvXFx7XFxANWV0b29sc1xccysoW158fV0rKVxcfFtefV0rXFx9L2csICckMScpXG4gICAgLnJlcGxhY2UoL1xce0ByZWNoYXJnZVxccyooW159XSspXFx9L2csIChfLCBudW0pID0+IGAocmVjaGFyZ2U6ICR7bnVtLnRyaW0oKX0pYClcbiAgICAucmVwbGFjZSgvXFx7QChzY2FsZWRpY2V8c2NhbGVkYW1hZ2UpW159XSpcXHwoW158fV0rKVxcfS9nLCAoXywgX18sIHZhbHVlKSA9PiB2YWx1ZSlcbiAgICAucmVwbGFjZSgvXFx7QGQyMFtefV0qXFx9L2csIFwiXCIpXG4gICAgLnJlcGxhY2UoL1xce0BbXn1dK1xcfS9nLCBcIlwiKTtcbn1cblxuZnVuY3Rpb24gY2FwaXRhbGl6ZShzdHI6IHN0cmluZyk6IHN0cmluZyB7XG4gIHJldHVybiBzdHIuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBzdHIuc2xpY2UoMSkudG9Mb3dlckNhc2UoKTtcbn1cblxuZnVuY3Rpb24gY2FwaXRhbGl6ZUVhY2goc3RyOiBzdHJpbmcpOiBzdHJpbmcge1xuICByZXR1cm4gc3RyLnNwbGl0KFwiIFwiKS5tYXAoY2FwaXRhbGl6ZSkuam9pbihcIiBcIik7XG59XG4iLCAiaW1wb3J0IHsgcmVwbGFjZTVlVGFncyB9IGZyb20gXCIuL3RhZ1JlcGxhY2VyXCI7XG5cbmV4cG9ydCBmdW5jdGlvbiByZW5kZXJNYXJrZG93blRhYmxlKGVudHJ5OiBhbnkpOiBzdHJpbmcge1xuICBpZiAoZW50cnkudHlwZSAhPT0gXCJ0YWJsZVwiIHx8ICFBcnJheS5pc0FycmF5KGVudHJ5LnJvd3MpKSByZXR1cm4gXCJcIjtcblxuICBjb25zdCBjYXB0aW9uID0gZW50cnkuY2FwdGlvbiA/IGAjIyMjIyAke2VudHJ5LmNhcHRpb259XFxuYCA6IFwiXCI7XG5cbiAgY29uc3QgaGVhZGVycyA9IChlbnRyeS5jb2xMYWJlbHMgPz8gW10pXG4gICAgLm1hcCgoaDogc3RyaW5nKSA9PiByZXBsYWNlNWVUYWdzKGgudHJpbSgpKSk7IC8vIFx1MjcwNSB0YWcgcmVwbGFjZSBvbiBoZWFkZXJzXG5cbiAgY29uc3QgaGVhZGVyUm93ID0gYHwgJHtoZWFkZXJzLmpvaW4oXCIgfCBcIil9IHxgO1xuICBjb25zdCBkaXZpZGVyUm93ID0gYHwgJHtoZWFkZXJzLm1hcCgoKSA9PiBcIjotLVwiKS5qb2luKFwiIHwgXCIpfSB8YDtcblxuICBjb25zdCBib2R5Um93cyA9IGVudHJ5LnJvd3MubWFwKChyb3c6IGFueVtdKSA9PiB7XG4gICAgY29uc3QgY2VsbHMgPSByb3cubWFwKChjZWxsKSA9PiB7XG4gICAgICBpZiAodHlwZW9mIGNlbGwgPT09IFwic3RyaW5nXCIpIHJldHVybiByZXBsYWNlNWVUYWdzKGNlbGwpOyAvLyBcdTI3MDUgdGFnIHJlcGxhY2Ugc3RyaW5nc1xuXG4gICAgICBpZiAodHlwZW9mIGNlbGwgPT09IFwib2JqZWN0XCIpIHtcbiAgICAgICAgaWYgKGNlbGwucm9sbD8uZXhhY3QgIT09IHVuZGVmaW5lZCkgcmV0dXJuIGAke2NlbGwucm9sbC5leGFjdH1gO1xuICAgICAgICBpZiAoY2VsbC5yb2xsPy5taW4gIT09IHVuZGVmaW5lZCAmJiBjZWxsLnJvbGw/Lm1heCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgcmV0dXJuIGAke2NlbGwucm9sbC5taW59XHUyMDEzJHtjZWxsLnJvbGwubWF4fWA7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlcGxhY2U1ZVRhZ3MoSlNPTi5zdHJpbmdpZnkoY2VsbCkpOyAvLyBmYWxsYmFjayBmb3IgdW5rbm93biBzaGFwZXNcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHJlcGxhY2U1ZVRhZ3MoU3RyaW5nKGNlbGwpKTtcbiAgICB9KTtcblxuICAgIHJldHVybiBgfCAke2NlbGxzLmpvaW4oXCIgfCBcIil9IHxgO1xuICB9KTtcblxuICByZXR1cm4gYCR7Y2FwdGlvbn0ke2hlYWRlclJvd31cXG4ke2RpdmlkZXJSb3d9XFxuJHtib2R5Um93cy5qb2luKFwiXFxuXCIpfWA7XG59XG4iLCAiLy8gZm9ybWF0RW50cnkudHNcbmltcG9ydCB7IHJlcGxhY2U1ZVRhZ3MgfSBmcm9tIFwiLi90YWdSZXBsYWNlclwiO1xuaW1wb3J0IHsgcmVuZGVyTWFya2Rvd25UYWJsZSB9IGZyb20gXCIuL21hcmtkb3duVGFibGVcIjtcblxuZXhwb3J0IGZ1bmN0aW9uIGZvcm1hdEVudHJ5KGVudHJ5OiBhbnkpOiBzdHJpbmcge1xuICBpZiAodHlwZW9mIGVudHJ5ID09PSBcInN0cmluZ1wiKSB7XG4gICAgY29uc3QgY2xlYW5lZCA9IGVudHJ5LnRyaW0oKTtcbiAgICBpZiAoIWNsZWFuZWQgfHwgY2xlYW5lZCA9PT0gXCJ9XCIpIHJldHVybiBcIlwiO1xuICAgIHJldHVybiByZXBsYWNlNWVUYWdzKGNsZWFuZWQpO1xuICB9XG5cbiAgaWYgKGVudHJ5LnR5cGUgPT09IFwiZW50cmllc1wiICYmIEFycmF5LmlzQXJyYXkoZW50cnkuZW50cmllcykpIHtcbiAgICBjb25zdCBib2R5ID0gZW50cnkuZW50cmllc1xuICAgICAgLm1hcChmb3JtYXRFbnRyeSlcbiAgICAgIC5maWx0ZXIoKHN0cjogc3RyaW5nKSA9PiBzdHIudHJpbSgpLmxlbmd0aCA+IDApXG4gICAgICAuam9pbihcIlxcblxcblwiKTtcblxuICAgIHJldHVybiBlbnRyeS5uYW1lXG4gICAgICA/IGAjIyMjIyAke2VudHJ5Lm5hbWV9XFxuJHtib2R5fWBcbiAgICAgIDogYm9keTtcbiAgfVxuXG4gIGlmIChlbnRyeS50eXBlID09PSBcImxpc3RcIiAmJiBBcnJheS5pc0FycmF5KGVudHJ5Lml0ZW1zKSkge1xuICAgIHJldHVybiBlbnRyeS5pdGVtc1xuICAgICAgLm1hcCgoaTogYW55KSA9PiBgLSAke3JlcGxhY2U1ZVRhZ3ModHlwZW9mIGkgPT09IFwic3RyaW5nXCIgPyBpIDogSlNPTi5zdHJpbmdpZnkoaSkpfWApXG4gICAgICAuam9pbihcIlxcblwiKTtcbiAgfVxuXG4gIGlmIChlbnRyeS50eXBlID09PSBcInRhYmxlXCIgJiYgQXJyYXkuaXNBcnJheShlbnRyeS5yb3dzKSkge1xuICAgIHJldHVybiByZW5kZXJNYXJrZG93blRhYmxlKGVudHJ5KTtcbiAgfVxuXG4gIGlmIChlbnRyeS50eXBlID09PSBcInF1b3RlXCIgJiYgQXJyYXkuaXNBcnJheShlbnRyeS5lbnRyaWVzKSkge1xuICAgIGNvbnN0IHF1b3RlID0gZW50cnkuZW50cmllcy5tYXAoZm9ybWF0RW50cnkpLmpvaW4oXCIgXCIpLnRyaW0oKTtcbiAgICBjb25zdCBhdXRob3IgPSBlbnRyeS5ieSA/IGAgXHUyMDE0ICR7ZW50cnkuYnl9YCA6IFwiXCI7XG4gICAgcmV0dXJuIGAqXCIke3F1b3RlfSR7YXV0aG9yfVwiKmA7XG4gIH1cblxuICBpZiAoZW50cnkudHlwZSA9PT0gXCJpbnNldFwiICYmIEFycmF5LmlzQXJyYXkoZW50cnkuZW50cmllcykpIHtcbiAgICBjb25zdCBpbnNldCA9IGVudHJ5LmVudHJpZXMubWFwKGZvcm1hdEVudHJ5KS5qb2luKFwiXFxuXCIpLnRyaW0oKTtcbiAgICByZXR1cm4gYD4gJHtpbnNldC5yZXBsYWNlKC9cXG4vZywgXCJcXG4+IFwiKX1gO1xuICB9XG5cbiAgaWYgKGVudHJ5LnR5cGUgPT09IFwicmVmQ2xhc3NGZWF0dXJlXCIgJiYgdHlwZW9mIGVudHJ5LmNsYXNzRmVhdHVyZSA9PT0gXCJzdHJpbmdcIikge1xuICAgIGNvbnN0IFtuYW1lXSA9IGVudHJ5LmNsYXNzRmVhdHVyZS5zcGxpdChcInxcIik7XG4gICAgY29uc3QgYW5jaG9yID0gbmFtZVxuICAgICAgLnJlcGxhY2UoL1teXFx3XFxzLV0vZywgXCJcIilcbiAgICAgIC5yZXBsYWNlKC9cXHMrL2csIFwiLVwiKVxuICAgICAgLnRvTG93ZXJDYXNlKCk7XG4gICAgcmV0dXJuIGBbWyMke2FuY2hvcn1dXWA7XG4gIH1cblxuICAvLyBJZiBpdCdzIGFuIHVua25vd24gb2JqZWN0LCBza2lwIGl0IHNhZmVseVxuICByZXR1cm4gXCJcIjtcbn1cbiIsICIvLyBwYXJzZXJzLzVlLWpzb24vYmVzdGlhcnkudHNcblxuaW1wb3J0IHR5cGUgeyBQYXJzZWRNYXJrZG93bkZpbGUgfSBmcm9tIFwic3JjL3R5cGVzXCI7XG5pbXBvcnQgeyBnZXRGdWxsU291cmNlTmFtZSB9IGZyb20gXCIuL2hlbHBlcnMvc291cmNlTWFwXCI7XG5pbXBvcnQgeyByZXBsYWNlNWVUYWdzIH0gZnJvbSBcIi4vaGVscGVycy90YWdSZXBsYWNlclwiO1xuaW1wb3J0IHsgcmVuZGVyTWFya2Rvd25UYWJsZSB9IGZyb20gXCIuL2hlbHBlcnMvbWFya2Rvd25UYWJsZVwiO1xuaW1wb3J0IHsgYnVpbGRGTSwgc2VyaWFsaXplRnJvbnRtYXR0ZXIsIEJFU1RJQVJZX01FVEFfREVGUywgdW5pZmllZFNraWxscywgRk1fRklFTERTIH0gZnJvbSBcIi4vaGVscGVycy9mcm9udG1hdHRlclwiO1xuXG5jb25zdCBza2lwcGVkTW9uc3RlcnM6IHN0cmluZ1tdID0gW107XG5cbi8vIFNpemUgYWJicmV2aWF0aW9ucyBtYXBwaW5nXG5leHBvcnQgXG5jb25zdCBTSVpFX01BUDogUmVjb3JkPHN0cmluZywgc3RyaW5nPiA9IHtcbiAgVDogXCJUaW55XCIsXG4gIFM6IFwiU21hbGxcIixcbiAgTTogXCJNZWRpdW1cIixcbiAgTDogXCJMYXJnZVwiLFxuICBIOiBcIkh1Z2VcIixcbiAgRzogXCJHYXJnYW50dWFuXCJcbn07XG5cbi8vIEFsaWdubWVudCBhYmJyZXZpYXRpb25zIG1hcHBpbmdcbmNvbnN0IEFMSUdOTUVOVF9NQVA6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4gPSB7XG4gIEw6IFwiTGF3ZnVsXCIsXG4gIE46IFwiTmV1dHJhbFwiLFxuICBDOiBcIkNoYW90aWNcIixcbiAgRzogXCJHb29kXCIsXG4gIEU6IFwiRXZpbFwiLFxuICBVOiBcIlVuYWxpZ25lZFwiXG59O1xuXG4vLyBIZWxwZXIgdG8gY2FwaXRhbGl6ZSBmaXJzdCBsZXR0ZXIgb2YgYSBzdHJpbmdcbmZ1bmN0aW9uIGNhcGl0YWxpemVGaXJzdChzdHI6IHVua25vd24pOiBzdHJpbmcge1xuICBjb25zdCBzID0gU3RyaW5nKHN0ciB8fCBcIlwiKTtcbiAgcmV0dXJuIHMuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBzLnNsaWNlKDEpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZm9ybWF0U2l6ZUFiYnJldihhYmJyZXY6IHN0cmluZyk6IHN0cmluZyB7XG4gIHJldHVybiBTSVpFX01BUFthYmJyZXZdIHx8IGFiYnJldjtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGZvcm1hdEFsaWdubWVudEFiYnJldihhYmJyZXY6IHN0cmluZyk6IHN0cmluZyB7XG4gIHJldHVybiBhYmJyZXZcbiAgICAudHJpbSgpXG4gICAgLnNwbGl0KC9cXHMrLylcbiAgICAubWFwKGxldHRlciA9PiBBTElHTk1FTlRfTUFQW2xldHRlcl0gfHwgbGV0dGVyKVxuICAgIC5qb2luKFwiIFwiKTtcbn1cblxuY29uc3QgUkFXX05QQ1M6IHN0cmluZ1tdID0gW1xuICBcIkFianVyZXJcIiwgXCJBY29seXRlXCIsIFwiQXBwcmVudGljZSBXaXphcmRcIiwgXCJBcmNoZHJ1aWRcIiwgXCJBcmNoZXJcIiwgXCJBcmNobWFnZVwiLCBcIkFzc2Fzc2luXCIsXG4gIFwiQmFuZGl0XCIsIFwiQmFuZGl0IENhcHRhaW5cIiwgXCJCYXJkXCIsIFwiQmVyc2Vya2VyXCIsIFwiQmxhY2tndWFyZFwiLCBcIkNoYW1waW9uXCIsIFwiQ29tbW9uZXJcIixcbiAgXCJDb25qdXJlclwiLCBcIkN1bHQgRmFuYXRpY1wiLCBcIkN1bHRpc3RcIiwgXCJEaXZpbmVyXCIsIFwiRHJ1aWQgKE5QQylcIiwgXCJEcnVpZCBOUENcIiwgXCJFbmNoYW50ZXJcIixcbiAgXCJFdm9rZXJcIiwgXCJHbGFkaWF0b3JcIiwgXCJHdWFyZFwiLCBcIklsbHVzaW9uaXN0XCIsIFwiS25pZ2h0XCIsIFwiS3Jha2VuIFByaWVzdFwiLCBcIk1hZ2VcIixcbiAgXCJNYXJ0aWFsIEFydHMgQWRlcHRcIiwgXCJNYXN0ZXIgVGhpZWZcIiwgXCJOZWNyb21hbmNlclwiLCBcIk5vYmxlXCIsIFwiUHJpZXN0XCIsIFwiU2NvdXRcIiwgXCJTcHlcIixcbiAgXCJTd2FzaGJ1Y2tsZXJcIiwgXCJUaHVnXCIsIFwiVHJhbnNtdXRlclwiLCBcIlRyaWJhbCBXYXJyaW9yXCIsIFwiVmV0ZXJhblwiLCBcIldhciBQcmllc3RcIixcbiAgXCJXYXJsb2NrIG9mIHRoZSBBcmNoZmV5XCIsIFwiV2FybG9jayBvZiB0aGUgRmllbmRcIiwgXCJXYXJsb2NrIG9mIHRoZSBHcmVhdCBPbGQgT25lXCIsIFwiV2FybG9yZFwiXG5dO1xuY29uc3QgTk9STUFMSVpFRF9OUENfTkFNRVMgPSBuZXcgU2V0KFJBV19OUENTLm1hcChuID0+IG5vcm1hbGl6ZU5hbWUobikpKTtcblxuZnVuY3Rpb24gbm9ybWFsaXplTmFtZShuYW1lOiBzdHJpbmcpOiBzdHJpbmcge1xuICByZXR1cm4gbmFtZS5yZXBsYWNlKC9cXHMrL2csIFwiIFwiKS50cmltKCkudG9Mb3dlckNhc2UoKTtcbn1cblxuZnVuY3Rpb24gY2F0ZWdvcml6ZUNyZWF0dXJlKG1vbnN0ZXI6IGFueSk6IHN0cmluZyB7XG4gIGNvbnN0IHR5cGVWYWx1ZSA9IG1vbnN0ZXIudHlwZTtcbiAgY29uc3QgbmFtZSA9IG1vbnN0ZXIubmFtZTtcbiAgY29uc3QgdCA9IHR5cGVvZiB0eXBlVmFsdWUgPT09IFwic3RyaW5nXCJcbiAgICA/IHR5cGVWYWx1ZS50b0xvd2VyQ2FzZSgpXG4gICAgOiB0eXBlVmFsdWU/LnR5cGU/LnRvTG93ZXJDYXNlKCkgfHwgU3RyaW5nKHR5cGVWYWx1ZSkudG9Mb3dlckNhc2UoKTtcblxuICBjb25zdCBub3JtYWxpemVkTmFtZSA9IG5vcm1hbGl6ZU5hbWUobmFtZSk7XG5cbiAgaWYgKG1vbnN0ZXIuaXNOcGMgfHwgbW9uc3Rlci5pc05hbWVkQ3JlYXR1cmUpIHJldHVybiBcIlN0b3J5IE5QQ3NcIjtcbiAgaWYgKHQgPT09IFwiYmVhc3RcIikgcmV0dXJuIFwiQmVhc3RzXCI7XG4gIGlmICh0ID09PSBcImh1bWFub2lkXCIgJiYgTk9STUFMSVpFRF9OUENfTkFNRVMuaGFzKG5vcm1hbGl6ZWROYW1lKSkgcmV0dXJuIFwiTm9uLUJlYXN0c1wiO1xuICBpZiAodCA9PT0gXCJodW1hbm9pZFwiKSByZXR1cm4gXCJNb25zdGVyc1wiO1xuICByZXR1cm4gXCJNb25zdGVyc1wiO1xufVxuXG5mdW5jdGlvbiByZW5kZXJBYmlsaXRpZXNUYWJsZShzdHI6IG51bWJlciwgZGV4OiBudW1iZXIsIGNvbjogbnVtYmVyLCBpbnQ6IG51bWJlciwgd2lzOiBudW1iZXIsIGNoYTogbnVtYmVyKTogc3RyaW5nIHtcbiAgcmV0dXJuIFtcbiAgICBgfCBTVFIgfCBERVggfCBDT04gfCBJTlQgfCBXSVMgfCBDSEEgfGAsXG4gICAgYHwgLS0tIHwgLS0tIHwgLS0tIHwgLS0tIHwgLS0tIHwgLS0tIHxgLFxuICAgIGB8ICR7c3RyfSB8ICR7ZGV4fSB8ICR7Y29ufSB8ICR7aW50fSB8ICR7d2lzfSB8ICR7Y2hhfSB8YFxuICBdLmpvaW4oXCJcXG5cIik7XG59XG5cbmZ1bmN0aW9uIHJlbmRlckVudHJ5KGVudHJ5OiBhbnkpOiBzdHJpbmcge1xuICBjb25zdCBuYW1lID0gZW50cnkubmFtZTtcbiAgbGV0IGRlc2NyaXB0aW9uczogc3RyaW5nW10gPSBbXTtcbiAgaWYgKEFycmF5LmlzQXJyYXkoZW50cnkuZW50cmllcykpIHtcbiAgICBkZXNjcmlwdGlvbnMgPSBlbnRyeS5lbnRyaWVzO1xuICB9IGVsc2UgaWYgKHR5cGVvZiBlbnRyeS5lbnRyaWVzID09PSBcInN0cmluZ1wiKSB7XG4gICAgZGVzY3JpcHRpb25zID0gW2VudHJ5LmVudHJpZXNdO1xuICB9IGVsc2UgaWYgKEFycmF5LmlzQXJyYXkoZW50cnkuZGVzYykpIHtcbiAgICBkZXNjcmlwdGlvbnMgPSBlbnRyeS5kZXNjO1xuICB9IGVsc2UgaWYgKHR5cGVvZiBlbnRyeS5kZXNjID09PSBcInN0cmluZ1wiKSB7XG4gICAgZGVzY3JpcHRpb25zID0gW2VudHJ5LmRlc2NdO1xuICB9XG4gIGNvbnN0IHJhdyA9IGRlc2NyaXB0aW9ucy5qb2luKFwiIFwiKTtcbiAgY29uc3QgZGVzYyA9IHJlcGxhY2U1ZVRhZ3MocmF3KTtcbiAgcmV0dXJuIGAqKioke25hbWV9LioqKiAke2Rlc2N9YDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlQmVzdGlhcnlGaWxlKGpzb246IGFueSwgZWRpdGlvbklkOiBzdHJpbmcpOiBQYXJzZWRNYXJrZG93bkZpbGVbXSB7XG4gICAgaWYgKCFqc29uLm1vbnN0ZXIpIHJldHVybiBbXTtcbiAgICAoanNvbiBhcyBhbnkpLl9lZGl0aW9uSWQgPSBlZGl0aW9uSWQ7XG4gIFxuICAgIC8vIDEpIEZpbHRlciBvdXQgXHUyMDFDcmVmZXJlbmNlXHUyMDFEIGVudHJpZXMgd2l0aCBubyBBQyBvciBIUFxuICAgIGNvbnN0IHZhbGlkTW9uc3RlcnMgPSBqc29uLm1vbnN0ZXIuZmlsdGVyKChtOiBhbnkpID0+IHtcbiAgICBjb25zdCBhY1ZhbCA9IEFycmF5LmlzQXJyYXkobS5hYylcbiAgICAgID8gbS5hY1swXT8uYWMgPz8gbS5hY1swXVxuICAgICAgOiB0eXBlb2YgbS5hYyA9PT0gXCJvYmplY3RcIlxuICAgICAgICA/IG0uYWM/LmFjID8/IG51bGxcbiAgICAgICAgOiBtLmFjO1xuXG4gICAgY29uc3QgaHBWYWwgPSB0eXBlb2YgbS5ocCA9PT0gXCJvYmplY3RcIlxuICAgICAgPyBtLmhwPy5hdmVyYWdlID8/IG0uaHA/LmhwID8/IG51bGxcbiAgICAgIDogbS5ocDtcbiAgICAgIHJldHVybiBhY1ZhbCAhPSBudWxsICYmIGhwVmFsICE9IG51bGwgJiYgIWlzTmFOKE51bWJlcihhY1ZhbCkpICYmICFpc05hTihOdW1iZXIoaHBWYWwpKTtcbiAgICB9KTtcblxuICAgIGNvbnN0IGFsbE5hbWVzID0gbmV3IFNldChqc29uLm1vbnN0ZXIubWFwKChtOiBhbnkpID0+IG0ubmFtZSkpO1xuY29uc3QgdmFsaWROYW1lcyA9IG5ldyBTZXQodmFsaWRNb25zdGVycy5tYXAoKG06IGFueSkgPT4gbS5uYW1lKSk7XG5jb25zdCBtaXNzaW5nID0gWy4uLmFsbE5hbWVzXS5maWx0ZXIobmFtZSA9PiAhdmFsaWROYW1lcy5oYXMobmFtZSkpO1xuXG4gIFxuICAgIHJldHVybiB2YWxpZE1vbnN0ZXJzLm1hcCgobW9uc3RlcjogYW55KSA9PiB7XG4gICAgICBjb25zdCBuYW1lICAgICA9IG1vbnN0ZXIubmFtZSBhcyBzdHJpbmc7XG4gICAgICBjb25zdCBzYWZlTmFtZSA9IG5hbWUucmVwbGFjZSgvXFwvL2csIFwiLVwiKTtcbiAgXG4gICAgICAvLyBcdTIwMTQgUmF3IGZpZWxkcyAmIGZvcm1hdHRpbmcgXHUyMDE0XG4gICAgICBjb25zdCByYXdTaXplICAgICAgPSBtb25zdGVyLnNpemUgfHwgXCJNXCI7XG4gICAgICBjb25zdCByYXdBbGlnbm1lbnQgPSBBcnJheS5pc0FycmF5KG1vbnN0ZXIuYWxpZ25tZW50KVxuICAgICAgICA/IG1vbnN0ZXIuYWxpZ25tZW50LmpvaW4oXCIgXCIpXG4gICAgICAgIDogbW9uc3Rlci5hbGlnbm1lbnQgfHwgXCJOXCI7XG4gICAgbGV0IHJhd1R5cGUgPSBcIlVua25vd25cIjtcblxuICAgIGlmICh0eXBlb2YgbW9uc3Rlci50eXBlID09PSBcInN0cmluZ1wiKSB7XG4gICAgICByYXdUeXBlID0gY2FwaXRhbGl6ZUZpcnN0KG1vbnN0ZXIudHlwZSk7XG4gICAgfSBlbHNlIGlmIChtb25zdGVyLnR5cGU/LnR5cGUpIHtcbiAgICAgIGNvbnN0IGJhc2UgPSBjYXBpdGFsaXplRmlyc3QobW9uc3Rlci50eXBlLnR5cGUpO1xuICAgICAgY29uc3QgdGFncyA9IG1vbnN0ZXIudHlwZS50YWdzPy5sZW5ndGggPyBgICgke21vbnN0ZXIudHlwZS50YWdzLm1hcChjYXBpdGFsaXplRmlyc3QpLmpvaW4oXCIsIFwiKX0pYCA6IFwiXCI7XG4gICAgICByYXdUeXBlID0gYCR7YmFzZX0ke3RhZ3N9YDtcbiAgICB9XG5cbiAgICBtb25zdGVyLl9wYXJzZWRUeXBlID0gcmF3VHlwZTtcbiAgICAgIFxuICAgIC8vIFx1MjAxNCBBQywgSFAsIENSIFx1MjAxNFxuICAgIGNvbnN0IGFjID0gQXJyYXkuaXNBcnJheShtb25zdGVyLmFjKSA/IG1vbnN0ZXIuYWNbMF0uYWMgOiBtb25zdGVyLmFjO1xuICAgIGNvbnN0IGhwID0gbW9uc3Rlci5ocD8uYXZlcmFnZSA/PyBtb25zdGVyLmhwO1xuICAgIGNvbnN0IGNyID0gbW9uc3Rlci5jcjtcblxuICAgIC8vIFNraXAgbW9uc3RlcnMgd2l0aCBubyBBQyBhbmQgSFBcbiAgICBpZiAoIWFjICYmICFocCkge1xuICAgICAgc2tpcHBlZE1vbnN0ZXJzLnB1c2gobW9uc3Rlci5uYW1lKTtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICAgIFxuICAgICAgLy8gXHUyMDE0IEFiaWxpdGllcyBcdTIwMTRcbiAgICAgIGNvbnN0IGFiaWxpdGllcyA9IEFycmF5LmlzQXJyYXkobW9uc3Rlci5hYmlsaXR5KVxuICAgICAgICA/IG1vbnN0ZXIuYWJpbGl0eVxuICAgICAgICA6IFttb25zdGVyLnN0ciwgbW9uc3Rlci5kZXgsIG1vbnN0ZXIuY29uLCBtb25zdGVyLmludCwgbW9uc3Rlci53aXMsIG1vbnN0ZXIuY2hhXTtcbiAgICAgIGNvbnN0IFtzdHIgPSAxMCwgZGV4ID0gMTAsIGNvbiA9IDEwLCBpbnQgPSAxMCwgd2lzID0gMTAsIGNoYSA9IDEwXSA9IGFiaWxpdGllcztcbiAgXG4gICAgICAvLyBcdTIwMTQgU3BlZWQgKGhhbmRsZXMgaG92ZXIgJiBvYmplY3Qgc3BlZWRzKSBcdTIwMTRcbiAgICAgIGNvbnN0IHNwZWVkTGlzdDogc3RyaW5nW10gPSBbXTtcbiAgICAgIGlmICh0eXBlb2YgbW9uc3Rlci5zcGVlZCA9PT0gXCJvYmplY3RcIikge1xuICAgICAgICBmb3IgKGNvbnN0IFttb2RlLCB2YWxdIG9mIE9iamVjdC5lbnRyaWVzKG1vbnN0ZXIuc3BlZWQpKSB7XG4gICAgICAgICAgaWYgKG1vZGUgPT09IFwiY2FuSG92ZXJcIikgY29udGludWU7XG4gICAgICAgICAgaWYgKHZhbCAmJiB0eXBlb2YgdmFsID09PSBcIm9iamVjdFwiICYmIFwibnVtYmVyXCIgaW4gdmFsKSB7XG4gICAgICAgICAgICBjb25zdCBudW0gID0gKHZhbCBhcyBhbnkpLm51bWJlcjtcbiAgICAgICAgICAgIGNvbnN0IGNvbmQgPSAodmFsIGFzIGFueSkuY29uZGl0aW9uID8gYCAkeyh2YWwgYXMgYW55KS5jb25kaXRpb259YCA6IFwiXCI7XG4gICAgICAgICAgICBzcGVlZExpc3QucHVzaChgJHttb2RlfSAke251bX0gZnQuJHtjb25kfWApO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBzcGVlZExpc3QucHVzaChgJHttb2RlfSAke3ZhbH0gZnQuYCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzcGVlZExpc3QucHVzaChgJHttb25zdGVyLnNwZWVkfSBmdC5gKTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IHNwZWVkID0gc3BlZWRMaXN0LmpvaW4oXCIsIFwiKTtcbiAgXG4gICAgICAvLyBcdTIwMTQgU291cmNlIHNhbml0aXphdGlvbiBcdTIwMTRcbiAgICAgIGxldCBzb3VyY2UgPSBnZXRGdWxsU291cmNlTmFtZShtb25zdGVyLnNvdXJjZSwgZWRpdGlvbklkKTtcbiAgICAgIHNvdXJjZSAgICAgPSBzb3VyY2UucmVwbGFjZSgvOi9nLCBcIiAtXCIpO1xuICBcbiAgICAgIC8vIFx1MjAxNCBDYXRlZ29yeSBmb3IgZm9sZGVyIFx1MjAxNFxuICAgICAgY29uc3QgY2F0ZWdvcnkgPSBjYXRlZ29yaXplQ3JlYXR1cmUobW9uc3Rlcik7XG4gIFxuICAgICAgY29uc3QgZm0gICA9IGJ1aWxkRk0obW9uc3RlciwgQkVTVElBUllfTUVUQV9ERUZTKTtcbiAgICAgIGNvbnN0IHlhbWwgPSBzZXJpYWxpemVGcm9udG1hdHRlcihmbSwgQkVTVElBUllfTUVUQV9ERUZTKTtcbiAgICAgIFxuICAgICAgY29uc3Qgc2F2aW5nVGhyb3dzID0gKGZtW0ZNX0ZJRUxEUy5TQVZJTkdfVEhST1dTXSBhcyBzdHJpbmdbXSkgfHwgW107XG4gICAgICBjb25zdCBza2lsbHMgICAgICAgPSAoZm1bRk1fRklFTERTLlNLSUxMU10gICAgICAgIGFzIHN0cmluZ1tdKSB8fCBbXTtcbiAgICAgIGNvbnN0IHNlbnNlcyAgICAgICA9IChmbVtGTV9GSUVMRFMuU0VOU0VTXSAgICAgICAgYXMgc3RyaW5nW10pIHx8IFtdO1xuICAgICAgY29uc3QgbGFuZ3VhZ2VzICAgID0gKGZtW0ZNX0ZJRUxEUy5MQU5HVUFHRVNdICAgICBhcyBzdHJpbmdbXSkgfHwgW107XG5cblxuICAgICAgLy8gXHUyMDE0IEJvZHkgXHUyMDE0XG4gICAgICBsZXQgYm9keSA9XG4gICAgICBgIyAke25hbWV9XFxuXFxuYCArXG4gICAgICBgJHtmb3JtYXRTaXplQWJicmV2KHJhd1NpemUpfSAke3Jhd1R5cGV9LCAke2Zvcm1hdEFsaWdubWVudEFiYnJldihyYXdBbGlnbm1lbnQpfVxcblxcbmAgK1xuICAgICAgYCoqQXJtb3IgQ2xhc3MqKjogJHthY31cXG5gICtcbiAgICAgIGAqKkhpdCBQb2ludHMqKjogJHtocH1cXG5gICtcbiAgICAgIGAqKlNwZWVkKio6ICR7c3BlZWR9XFxuYCArXG4gICAgICAoc2F2aW5nVGhyb3dzLmxlbmd0aFxuICAgICAgICA/IGAqKlNhdmluZyBUaHJvd3MqKjogJHtzYXZpbmdUaHJvd3Muam9pbihcIiwgXCIpfVxcbmBcbiAgICAgICAgOiBcIlwiKSArXG4gICAgICAoc2tpbGxzLmxlbmd0aFxuICAgICAgICA/IGAqKlNraWxscyoqOiAke3NraWxscy5qb2luKFwiLCBcIil9XFxuYFxuICAgICAgICA6IFwiXCIpICtcbiAgICAgIChzZW5zZXMubGVuZ3RoXG4gICAgICAgID8gYCoqU2Vuc2VzKio6ICR7c2Vuc2VzLmpvaW4oXCIsIFwiKX1cXG5gXG4gICAgICAgIDogXCJcIikgK1xuICAgICAgKGxhbmd1YWdlcy5sZW5ndGhcbiAgICAgICAgPyBgKipMYW5ndWFnZXMqKjogJHtsYW5ndWFnZXMuam9pbihcIiwgXCIpfVxcbmBcbiAgICAgICAgOiBcIlwiKSArXG4gICAgICBgKipDaGFsbGVuZ2UqKjogJHtjcn1cXG5cXG5gICtcbiAgICAgIHJlbmRlckFiaWxpdGllc1RhYmxlKHN0ciwgZGV4LCBjb24sIGludCwgd2lzLCBjaGEpO1xuXG4gIFxuICAgICAgaWYgKG1vbnN0ZXIudHJhaXQpICAgICBib2R5ICs9IGBcXG5cXG4jIyMgVHJhaXRzXFxuJHttb25zdGVyLnRyYWl0Lm1hcChyZW5kZXJFbnRyeSkuam9pbihcIlxcblxcblwiKX1gO1xuICAgICAgaWYgKG1vbnN0ZXIuYWN0aW9uKSAgICBib2R5ICs9IGBcXG5cXG4jIyMgQWN0aW9uc1xcbiR7bW9uc3Rlci5hY3Rpb24ubWFwKHJlbmRlckVudHJ5KS5qb2luKFwiXFxuXFxuXCIpfWA7XG4gICAgICBpZiAobW9uc3Rlci5yZWFjdGlvbikgIGJvZHkgKz0gYFxcblxcbiMjIyBSZWFjdGlvbnNcXG4ke21vbnN0ZXIucmVhY3Rpb24ubWFwKHJlbmRlckVudHJ5KS5qb2luKFwiXFxuXFxuXCIpfWA7XG4gICAgICBpZiAobW9uc3Rlci5sZWdlbmRhcnkpIGJvZHkgKz0gYFxcblxcbiMjIyBMZWdlbmRhcnkgQWN0aW9uc1xcbiR7bW9uc3Rlci5sZWdlbmRhcnkubWFwKHJlbmRlckVudHJ5KS5qb2luKFwiXFxuXFxuXCIpfWA7XG4gIFxuICAgICAgY29uc3QgY29udGVudCA9IGAtLS1cXG4ke3lhbWx9XFxuLS0tXFxuXFxuJHtib2R5fWA7XG4gIFxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgcGF0aDogICAgYCR7Y2F0ZWdvcnl9LyR7c2FmZU5hbWV9Lm1kYCxcbiAgICAgICAgY29udGVudCxcbiAgICAgIH07XG4gICAgfSk7XG4gIH1cbiIsICJpbXBvcnQgdHlwZSB7IFBhcnNlZE1hcmtkb3duRmlsZSB9IGZyb20gXCIuLi8uLi90eXBlc1wiO1xuaW1wb3J0IHsgcmVwbGFjZTVlVGFncyB9ICAgICBmcm9tIFwiLi9oZWxwZXJzL3RhZ1JlcGxhY2VyXCI7XG5pbXBvcnQgeyBnZXRGdWxsU291cmNlTmFtZSB9IGZyb20gXCIuL2hlbHBlcnMvc291cmNlTWFwXCI7XG5pbXBvcnQgeyBidWlsZEZNLCBzZXJpYWxpemVGcm9udG1hdHRlciwgSVRFTV9NRVRBX0RFRlMgfSBmcm9tIFwiLi9oZWxwZXJzL2Zyb250bWF0dGVyXCI7XG5cblxuLyoqIEhlbHBlciB0byBjYXBpdGFsaXplIGZpcnN0IGxldHRlciBcdTIwMTMgbmV2ZXIgY3Jhc2hlcyBvbiBub24tc3RyaW5ncyAqL1xuZnVuY3Rpb24gY2FwaXRhbGl6ZUZpcnN0KGlucHV0OiBhbnkpOiBzdHJpbmcge1xuICAvLyBpZiBpdFx1MjAxOXMgbm90IGEgbm9uLWVtcHR5IHN0cmluZywgYmFpbCBvdXRcbiAgaWYgKHR5cGVvZiBpbnB1dCAhPT0gXCJzdHJpbmdcIiB8fCBpbnB1dC5sZW5ndGggPT09IDApIHJldHVybiBcIlwiO1xuICBjb25zdCBzID0gaW5wdXQudHJpbSgpO1xuICByZXR1cm4gcy5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIHMuc2xpY2UoMSkudG9Mb3dlckNhc2UoKTtcbn1cblxuXG5leHBvcnQgY29uc3QgREFNQUdFX1RZUEVfTUFQOiBSZWNvcmQ8c3RyaW5nLHN0cmluZz4gPSB7XG4gIFA6IFwiUGllcmNpbmdcIixcbiAgQjogXCJCbHVkZ2VvbmluZ1wiLFxuICBTOiBcIlNsYXNoaW5nXCIsXG4gIE46IFwiTmVjcm90aWNcIixcbiAgUjogXCJSYWRpYW50XCIsXG4gIEY6IFwiRmlyZVwiLFxuICBDOiBcIkNvbGRcIixcbiAgTDogXCJMaWdodG5pbmdcIixcbiAgVDogXCJUaHVuZGVyXCIsXG4gIEE6IFwiQWNpZFwiLFxuICBIOiBcIkhlYWxpbmdcIixcbiAgVTogXCJGb3JjZVwiLFxuICBWOiBcIlBzeWNoaWNcIixcbn07XG5cbmV4cG9ydCBjb25zdCBQUk9QRVJUWV9NQVA6IFJlY29yZDxzdHJpbmcsc3RyaW5nPiA9IHtcbiAgQTogXCJBbW11bml0aW9uXCIsXG4gIEY6IFwiRmluZXNzZVwiLFxuICBIOiBcIkhlYXZ5XCIsXG4gIEw6IFwiTGlnaHRcIixcbiAgUjogXCJSZWxvYWRcIixcbiAgUzogXCJTcGVjaWFsXCIsXG4gIFwiMkhcIjogXCJUd28tSGFuZGVkXCIsXG4gIFQ6IFwiVGhyb3duXCIsXG4gIFY6IFwiVmVyc2F0aWxlXCJcbn07XG5cbmV4cG9ydCBjb25zdCBJVEVNX1RZUEVfTUFQOiBSZWNvcmQ8c3RyaW5nLHN0cmluZz4gPSB7XG4gICRDOiAgXCJDdXJyZW5jeVwiLFxuICAkRzogIFwiR2VtXCIsXG4gIEE6ICAgXCJBbW11bml0aW9uXCIsXG4gIFwiQUlSfERNR1wiOiBcIlZlaGljbGUgKGFpcilcIixcbiAgXCJBRnxETUdcIjogXCJGdXR1cmUgQW1tb1wiLFxuICBBVDogIFwiQXJ0aXNhbiBUb29sc1wiLFxuICBFWFA6IFwiRXhwbG9zaXZlXCIsXG4gIEZEOiAgXCJGb29kIGFuZCBEcmlua1wiLFxuICBHOiAgIFwiR2VhclwiLFxuICBHUzogIFwiR2FtZVwiLFxuICBIQTogIFwiSGVhdnkgQXJtb3JcIixcbiAgXCJJREd8VERDU1JcIjogXCJJbGxpY2l0IERydWdcIixcbiAgSU5TOiBcIkluc3RydW1lbnRcIixcbiAgTEE6ICBcIkxpZ2h0IEFybW9yXCIsXG4gIE06ICAgXCJXZWFwb25cIixcbiAgTUE6ICBcIk1lZGl1bSBBcm1vclwiLFxuICBNTlQ6IFwiTW91bnRzIGFuZCBWZWhpY2xlc1wiLFxuICBPREg6IFwiTWlzY2VsbGFuZW91c1wiLFxuICBQOiAgIFwiQ29uc3VtYWJsZVwiLFxuICBSOiAgIFwiUmFuZ2VkIFdlYXBvblwiLFxuICBSRDogIFwiUm9kXCIsXG4gIFJHOiAgXCJSaW5nXCIsXG4gIFM6ICAgXCJTaGllbGRcIixcbiAgU0M6ICBcIlNjcm9sbFwiLFxuICBTQ0Y6IFwiU3BlbGwgQ2FzdGluZyBGb2N1c1wiLFxuICBTSFA6IFwiU2hpcFwiLFxuICBUOiAgIFwiVG9vbFwiLFxuICBUQUg6IFwiTW91bnRzIGFuZCBWZWhpY2xlc1wiLFxuICBURzogIFwiVHJhZGUgR29vZHNcIixcbiAgVkVIOiBcIk1vdW50cyBhbmQgVmVoaWNsZXNcIixcbiAgV0Q6ICBcIldhbmRcIixcbn07XG5cbi8qKiBjb2RlIFx1MjE5MiBmdWxsIGZvbGRlciBwYXRoIHVuZGVyIEl0ZW1zLyAqL1xuY29uc3QgY29kZUZvbGRlck1hcDogUmVjb3JkPHN0cmluZyxzdHJpbmc+ID0ge1xuICAvLyBXZWFwb25zICYgQXJtb3JcbiAgXCJBXCI6ICAgXCJXZWFwb25zIGFuZCBBcm1vci9BbW11bml0aW9uXCIsXG4gIFwiTVwiOiAgIFwiV2VhcG9ucyBhbmQgQXJtb3IvV2VhcG9uc1wiLFxuICBcIlJcIjogICBcIldlYXBvbnMgYW5kIEFybW9yL1JhbmdlZCBXZWFwb25zXCIsXG4gIFwiU1wiOiAgIFwiV2VhcG9ucyBhbmQgQXJtb3IvU2hpZWxkc1wiLFxuICBcIkxBXCI6ICBcIldlYXBvbnMgYW5kIEFybW9yL0FybW9yL0xpZ2h0IEFybW9yXCIsXG4gIFwiTUFcIjogIFwiV2VhcG9ucyBhbmQgQXJtb3IvQXJtb3IvTWVkaXVtIEFybW9yXCIsXG4gIFwiSEFcIjogIFwiV2VhcG9ucyBhbmQgQXJtb3IvQXJtb3IvSGVhdnkgQXJtb3JcIixcbiAgXCJFWFBcIjogXCJXZWFwb25zIGFuZCBBcm1vci9XZWFwb25zL0V4cGxvc2l2ZXNcIixcbiAgLy8gRnV0dXJlIEFtbW8gKEFGfERNRyBcdTIxOTIgcmF3Q29kZSBcIkFGXCIpXG4gIFwiQUZcIjogIFwiV2VhcG9ucyBhbmQgQXJtb3IvQW1tdW5pdGlvbi9GdXR1cmUgQW1tb1wiLFxuXG4gIC8vIE1hZ2ljYWwgSXRlbXNcbiAgXCJSRFwiOiAgXCJNYWdpY2FsIEl0ZW1zL1JvZHNcIixcbiAgXCJSR1wiOiAgXCJNYWdpY2FsIEl0ZW1zL1JpbmdzXCIsXG4gIFwiU0NcIjogIFwiTWFnaWNhbCBJdGVtcy9TY3JvbGxzXCIsXG4gIFwiU0NGXCI6IFwiTWFnaWNhbCBJdGVtcy9TcGVsbCBDYXN0aW5nIEZvY3VzXCIsXG4gIFwiV0RcIjogIFwiTWFnaWNhbCBJdGVtcy9XYW5kc1wiLFxuXG4gIC8vIFZhbHVhYmxlc1xuICBcIiRHXCI6IFwiVmFsdWFibGVzL0dlbXNcIixcbiAgLy8gQ3VycmVuY3kgKHJhd0NvZGUgYmVjb21lcyBcIkNcIiBhZnRlciBzdHJpcHBpbmcgJClcbiAgXCJDXCI6ICBcIlZhbHVhYmxlcy9DdXJyZW5jeVwiLFxuICBcIlRHXCI6IFwiVmFsdWFibGVzL1RyYWRlIEdvb2RzXCIsXG5cbiAgLy8gQXJ0aXNhbiBHb29kc1xuICBcIkFUXCI6ICBcIkFydGlzYW4gR29vZHMvVG9vbHNcIixcbiAgXCJUXCI6ICAgXCJBcnRpc2FuIEdvb2RzL1Rvb2xzXCIsXG4gIFwiSU5TXCI6IFwiQXJ0aXNhbiBHb29kcy9JbnN0cnVtZW50c1wiLFxuICBcIkdTXCI6ICBcIkFydGlzYW4gR29vZHMvR2FtZXNcIixcblxuICAvLyBHZWFyICYgTW91bnRzXG4gIFwiR1wiOiAgIFwiR2VhclwiLFxuICAvLyBNb3VudHMgJiBWZWhpY2xlc1xuICBcIk1OVFwiOiBcIkdlYXIvTW91bnRzIGFuZCBWZWhpY2xlc1wiLFxuICBcIlRBSFwiOiBcIkdlYXIvTW91bnRzIGFuZCBWZWhpY2xlc1wiLFxuICBcIlZFSFwiOiBcIkdlYXIvTW91bnRzIGFuZCBWZWhpY2xlc1wiLFxuICAvLyBBaXIgdmVoaWNsZXMgKEFJUnxETUcgXHUyMTkyIHJhd0NvZGUgXCJBSVJcIilcbiAgXCJBSVJcIjogXCJHZWFyL01vdW50cyBhbmQgVmVoaWNsZXMvQWlyXCIsXG5cbiAgLy8gQ29uc3VtYWJsZXNcbiAgXCJQXCI6ICAgXCJDb25zdW1hYmxlc1wiLFxuICAvLyBGb29kICYgRHJpbmtcbiAgXCJGRFwiOiAgXCJDb25zdW1hYmxlcy9Gb29kIGFuZCBEcmlua1wiLFxuXG4gIC8vIElsbGljaXQgRHJ1Z3MgKElER3xURENTUiBcdTIxOTIgcmF3Q29kZSBcIklER1wiKVxuICBcIklER1wiOiBcIkdlYXIvSWxsaWNpdCBEcnVnc1wiLFxuXG4gIC8vIE1pc2NlbGxhbmVvdXMgKE9ESClcbiAgXCJPREhcIjogXCJHZWFyL01pc2NlbGxhbmVvdXNcIixcbn07XG5cbmV4cG9ydCBmdW5jdGlvbiBwYXJzZUl0ZW1zRmlsZShqc29uOiBhbnksIGVkaXRpb25JZDogc3RyaW5nKTogUGFyc2VkTWFya2Rvd25GaWxlW10ge1xuICBjb25zdCByYXdJdGVtczogYW55W10gPSBbXTtcbiAgaWYgKEFycmF5LmlzQXJyYXkoanNvbi5iYXNlaXRlbSkpIHJhd0l0ZW1zLnB1c2goLi4uanNvbi5iYXNlaXRlbSk7XG4gIGlmIChBcnJheS5pc0FycmF5KGpzb24uaXRlbSkpICAgICByYXdJdGVtcy5wdXNoKC4uLmpzb24uaXRlbSk7XG4gIGlmIChBcnJheS5pc0FycmF5KGpzb24ub2JqZWN0KSkgICByYXdJdGVtcy5wdXNoKC4uLmpzb24ub2JqZWN0KTtcbiAgaWYgKEFycmF5LmlzQXJyYXkoanNvbi52ZWhpY2xlKSkgIHJhd0l0ZW1zLnB1c2goLi4uanNvbi52ZWhpY2xlKTtcbiAgaWYgKCFyYXdJdGVtcy5sZW5ndGgpIHJldHVybiBbXTtcblxuICBjb25zdCBiYXNlTmFtZXMgPSBuZXcgU2V0PHN0cmluZz4oXG4gICAgQXJyYXkuaXNBcnJheShqc29uLmJhc2VpdGVtKSA/IGpzb24uYmFzZWl0ZW0ubWFwKChiOiBhbnkpID0+IGIubmFtZSkgOiBbXVxuICApO1xuICBjb25zdCBvdXQ6IFBhcnNlZE1hcmtkb3duRmlsZVtdID0gW107XG5cbiAgZm9yIChjb25zdCBpdCBvZiByYXdJdGVtcykge1xuICAgIGNvbnN0IG5hbWUgICAgID0gaXQubmFtZSBhcyBzdHJpbmc7XG4gICAgY29uc3Qgc2FmZU5hbWUgPSBuYW1lLnJlcGxhY2UoL1tcXC9cXFxcOl0vZywgXCItXCIpO1xuXG4gICAgLy8gRGV0ZXJtaW5lIGZvbGRlclxuICAgIGNvbnN0IHJhd0NvZGUgPSAoaXQudHlwZSBhcyBzdHJpbmcgfHwgXCJcIikuc3BsaXQoXCJ8XCIpWzBdXG4gICAgICAgIC5zcGxpdChcInxcIilbMF0gICAgICAvLyBkcm9wIGFueXRoaW5nIGFmdGVyIFx1MjAxQ3xcdTIwMURcbiAgICAgICAgLnJlcGxhY2UoL15cXCQvLCBcIlwiKTsgLy8gc3RyaXAgbGVhZGluZyBcdTIwMUMkXHUyMDFEXG4gICAgbGV0IGZvbGRlciAgICA9IGNvZGVGb2xkZXJNYXBbcmF3Q29kZV0gPz8gXCJNaXNjZWxsYW5lb3VzXCI7XG5cbiAgICAvLyBWYXJpYW50c1xuICAgIGlmIChpdC5ib251c1dlYXBvbikge1xuICAgICAgZm9sZGVyID0gYCR7Zm9sZGVyfS9WYXJpYW50c2A7XG4gICAgfVxuICAgIC8vIE1hZ2ljYWxcbiAgICBlbHNlIHtcbiAgICAgIGNvbnN0IGlzTWFnaWMgPSAhIWl0LndvbmRyb3VzIHx8ICEhaXQucmVxQXR0dW5lIHx8ICEhaXQucmVxX2F0dHVuZVxuICAgICAgICB8fCBTdHJpbmcoaXQucmFyaXR5KS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKFwibWFnaWNcIik7XG4gICAgICBpZiAoaXNNYWdpYykge1xuICAgICAgICBjb25zdCBbICwgLi4ucmVzdCBdID0gZm9sZGVyLnNwbGl0KFwiL1wiKTtcbiAgICAgICAgZm9sZGVyID0gW1wiTWFnaWNhbCBJdGVtc1wiLCAuLi5yZXN0XS5qb2luKFwiL1wiKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBXZWFwb24gY2F0ZWdvcnkgc3ViZm9sZGVyXG4gICAgaWYgKChmb2xkZXIuc3RhcnRzV2l0aChcIldlYXBvbnMgYW5kIEFybW9yL1dlYXBvbnNcIikgfHxcbiAgICAgICAgIGZvbGRlci5zdGFydHNXaXRoKFwiV2VhcG9ucyBhbmQgQXJtb3IvUmFuZ2VkIFdlYXBvbnNcIikpICYmIGl0LndlYXBvbkNhdGVnb3J5KSB7XG4gICAgICBmb2xkZXIgPSBgJHtmb2xkZXJ9LyR7Y2FwaXRhbGl6ZUZpcnN0KGl0LndlYXBvbkNhdGVnb3J5KX1gO1xuICAgIH1cblxuICAgIC8vIG1ha2UgZWRpdGlvbklkIGF2YWlsYWJsZSBmb3IgdGhlIFNPVVJDRSBmaWVsZFxuKGpzb24gYXMgYW55KS5fZWRpdGlvbklkID0gZWRpdGlvbklkO1xuXG4vLyBidWlsZCBhIEZyb250bWF0dGVyIG9iamVjdCBmcm9tIHRoZSBKU09OXG5jb25zdCBmbSAgID0gYnVpbGRGTShpdCwgSVRFTV9NRVRBX0RFRlMpO1xuXG5pZiAocmF3Q29kZSA9PT0gXCJNXCIgJiYgaXQud2VhcG9uQ2F0ZWdvcnkpIHtcbiAgLy8gXHUyMDFDTVx1MjAxRCBcdTIxOTIgdXNlIHdlYXBvbkNhdGVnb3J5IChcdTIwMUNTaW1wbGVcdTIwMUQvXHUyMDFDTWFydGlhbFx1MjAxRClcbiAgZm0udHlwZSA9IGAke2NhcGl0YWxpemVGaXJzdChpdC53ZWFwb25DYXRlZ29yeSl9IFdlYXBvbmA7XG59IGVsc2UgaWYgKElURU1fVFlQRV9NQVBbcmF3Q29kZV0pIHtcbiAgLy8gYW55IG90aGVyIGNvZGUgXHUyMTkyIG1hcHBlZCBsYWJlbFxuICBmbS50eXBlID0gSVRFTV9UWVBFX01BUFtyYXdDb2RlXTtcbn1cbmlmIChBcnJheS5pc0FycmF5KGZtLmRhbWFnZVR5cGVzKSkge1xuICBmbS5kYW1hZ2VUeXBlcyA9IGZtLmRhbWFnZVR5cGVzLm1hcCgoY29kZTogc3RyaW5nKSA9PlxuICAgIERBTUFHRV9UWVBFX01BUFtjb2RlXSB8fCBjb2RlXG4gICk7XG59XG4vLyBzZXJpYWxpemUgaXQgdG8gWUFNTFxubGV0IHlhbWwgPSBzZXJpYWxpemVGcm9udG1hdHRlcihmbSwgSVRFTV9NRVRBX0RFRlMpO1xuXG4vLyBpZiB5b3Ugc3RpbGwgd2FudCBwYWNrQ29udGVudHMsIGFwcGVuZCBpdCBoZXJlOlxuaWYgKEFycmF5LmlzQXJyYXkoaXQucGFja0NvbnRlbnRzKSkge1xuICB5YW1sICs9IFwiXFxucGFja0NvbnRlbnRzOlwiO1xuICBmb3IgKGNvbnN0IHBjIG9mIGl0LnBhY2tDb250ZW50cykge1xuICAgIHlhbWwgKz0gYFxcbiAgLSBpdGVtOiBcIiR7cGMuaXRlbX1cIlxcbiAgICBxdWFudGl0eTogJHtwYy5xdWFudGl0eX1gO1xuICB9XG59XG4gXG4vLyB3cmFwIGl0IGluIHRoZSBZQU1MIGZlbmNlXG5jb25zdCBmcm9udG1hdHRlciA9IGAtLS1cXG4ke3lhbWx9XFxuLS0tYDtcblxuXG4gICAgLy8gQm9keSBsaW5lc1xuICAgIGNvbnN0IGxpbmVzOiBzdHJpbmdbXSA9IFtdO1xuICAgIGxpbmVzLnB1c2goYCMgJHtuYW1lfWApO1xuICAgIGxpbmVzLnB1c2goXCJcIik7XG5cbiAgICAvLyBTdWJ0aXRsZVxuICAgIGNvbnN0IHN1YnRpdGxlID0gaXQud2VhcG9uXG4gICAgICA/IGAke2NhcGl0YWxpemVGaXJzdChpdC53ZWFwb25DYXRlZ29yeSl9IFdlYXBvbmBcbiAgICAgIDogaXQuYXJtb3JcbiAgICAgICAgPyBmb2xkZXIuc3BsaXQoXCIvXCIpLnBvcCgpIHx8IFwiQXJtb3JcIlxuICAgICAgICA6IFwiXCI7XG4gICAgaWYgKHN1YnRpdGxlKSBsaW5lcy5wdXNoKGAjIyMgKiR7c3VidGl0bGV9KmApO1xuXG4gICAgLy8gU3RhdHMgbGluZXNcbiAgICBpZiAoaXQud2VhcG9uKSB7XG4gICAgICBsaW5lcy5wdXNoKGAqKkNhdGVnb3J5Kio6ICR7Y2FwaXRhbGl6ZUZpcnN0KGl0LndlYXBvbkNhdGVnb3J5KX1gKTtcbiAgICAgIGxpbmVzLnB1c2goYCoqRGFtYWdlKio6ICR7aXQuZG1nMSA/PyBcIlwifSR7aXQuZG1nMiA/IGAgLyAke2l0LmRtZzJ9YCA6IFwiXCJ9YCk7XG4gICAgICBjb25zdCB0eXBlc0JvZHkgPSAoQXJyYXkuaXNBcnJheShpdC5kbWdUeXBlKSA/IGl0LmRtZ1R5cGUgOiBbaXQuZG1nVHlwZV0pXG4gICAgICAgIC5maWx0ZXIoKHQ6IGFueSkgPT4gQm9vbGVhbih0KSlcbiAgICAgICAgLm1hcCgodDogc3RyaW5nKSA9PiBEQU1BR0VfVFlQRV9NQVBbdF0gfHwgdCk7XG4gICAgICBsaW5lcy5wdXNoKGAqKkRhbWFnZSBUeXBlKio6ICR7dHlwZXNCb2R5LmpvaW4oXCIsIFwiKX1gKTtcbiAgICAgIGxpbmVzLnB1c2goYCoqUmFuZ2UqKjogJHtpdC5yYW5nZSA/PyBcIlx1MjAxNFwifWApO1xuICAgICAgbGluZXMucHVzaChgKipSZWxvYWQqKjogJHtpdC5yZWxvYWQgPz8gXCJcdTIwMTRcIn1gKTtcbiAgICAgIGlmIChpdC5hbW1vVHlwZSkgbGluZXMucHVzaChgKipBbW1vIFR5cGUqKjogJHtpdC5hbW1vVHlwZX1gKTtcbiAgICAgIGlmIChBcnJheS5pc0FycmF5KGl0LnByb3BlcnR5KSAmJiBpdC5wcm9wZXJ0eS5sZW5ndGgpIHtcbiAgICAgICAgY29uc3QgcHJvcHNCb2R5ID0gaXQucHJvcGVydHkubWFwKChwOiBzdHJpbmcpID0+IFBST1BFUlRZX01BUFtwXSB8fCBwKTtcbiAgICAgICAgbGluZXMucHVzaChgKipQcm9wZXJ0aWVzKio6ICR7cHJvcHNCb2R5LmpvaW4oXCIsIFwiKX1gKTtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKGl0LmFybW9yKSB7XG4gICAgICBsaW5lcy5wdXNoKGAqKkFybW9yIENsYXNzKio6ICR7aXQuYWN9YCk7XG4gICAgICBpZiAoaXQuc3RlYWx0aCkgbGluZXMucHVzaChgKipTdGVhbHRoIERpc2FkdmFudGFnZSoqOiB0cnVlYCk7XG4gICAgICBsaW5lcy5wdXNoKFwiXCIpO1xuICAgIH1cblxuICAgIC8vIERlc2NyaXB0aW9uIHdpdGggbmVzdGVkIGVudHJpZXNcbiAgICBjb25zdCBkZXNjID0gaXQuZW50cmllcyA/PyBpdC5kZXNjO1xuICAgIGlmIChkZXNjKSB7XG4gICAgICBmb3IgKGNvbnN0IHAgb2YgQXJyYXkuaXNBcnJheShkZXNjKSA/IGRlc2MgOiBbZGVzY10pIHtcbiAgICAgICAgaWYgKHR5cGVvZiBwID09PSAnc3RyaW5nJykge1xuICAgICAgICAgIGZvciAoY29uc3QgbGluZSBvZiByZXBsYWNlNWVUYWdzKHApLnNwbGl0KFwiXFxuXCIpKSB7XG4gICAgICAgICAgICBsaW5lcy5wdXNoKGxpbmUpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBsaW5lcy5wdXNoKFwiXCIpO1xuICAgICAgICB9IGVsc2UgaWYgKHAgJiYgdHlwZW9mIHAgPT09ICdvYmplY3QnKSB7XG4gICAgICAgICAgaWYgKGxpbmVzW2xpbmVzLmxlbmd0aCAtIDFdID09PSBcIlwiKSB7XG4gICAgICAgICAgICBsaW5lcy5wb3AoKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgbGluZXMucHVzaChgIyMjIyAke3AubmFtZX1gKTtcbiAgICAgICAgICBjb25zdCBzdWIgPSBBcnJheS5pc0FycmF5KHAuZW50cmllcykgPyBwLmVudHJpZXMgOiBbXTtcbiAgICAgICAgICBmb3IgKGNvbnN0IHNwIG9mIHN1Yikge1xuICAgICAgICAgICAgZm9yIChjb25zdCBsaW5lIG9mIHJlcGxhY2U1ZVRhZ3Moc3ApLnNwbGl0KFwiXFxuXCIpKSB7XG4gICAgICAgICAgICAgIGxpbmVzLnB1c2gobGluZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGxpbmVzLnB1c2goXCJcIik7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCBib2R5ID0gbGluZXMuam9pbihcIlxcblwiKTtcblxuICAgIG91dC5wdXNoKHsgcGF0aDogYEl0ZW1zLyR7Zm9sZGVyfS8ke3NhZmVOYW1lfS5tZGAsIGNvbnRlbnQ6IGAke2Zyb250bWF0dGVyfVxcblxcbiR7Ym9keX1gIH0pO1xuICB9XG5cbiAgcmV0dXJuIG91dC5zb3J0KChhLGIpID0+IGEucGF0aC5sb2NhbGVDb21wYXJlKGIucGF0aCkpO1xufSIsICJpbXBvcnQgeyBnZXRGdWxsU291cmNlTmFtZSB9IGZyb20gXCIuL3NvdXJjZU1hcFwiO1xuaW1wb3J0IHsgZm9ybWF0U2l6ZUFiYnJldiwgZm9ybWF0QWxpZ25tZW50QWJicmV2IH0gZnJvbSBcIi4uL2Jlc3RpYXJ5XCI7XG5pbXBvcnQgeyBmb3JtYXRSYW5nZSwgZm9ybWF0VGltZSwgZm9ybWF0RHVyYXRpb24sIFNDSE9PTF9NQVAgfSBmcm9tIFwiLi4vc3BlbGxzXCI7XG5pbXBvcnQgeyBQUk9QRVJUWV9NQVAsIERBTUFHRV9UWVBFX01BUCwgSVRFTV9UWVBFX01BUCB9IGZyb20gXCIuLi9pdGVtc1wiO1xuaW1wb3J0IHsgcmVwbGFjZTVlVGFncyB9IGZyb20gXCIuL3RhZ1JlcGxhY2VyXCI7XG5cbmZ1bmN0aW9uIGJsYW5rVW5kZWZpbmVkKHZhbDogYW55KTogYW55IHtcbiAgcmV0dXJuIHZhbCA9PT0gdW5kZWZpbmVkID8gXCJcIiA6IHZhbDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNhcChzdHI6IGFueSk6IHN0cmluZyB7XG4gIGlmICh0eXBlb2Ygc3RyICE9PSBcInN0cmluZ1wiKSByZXR1cm4gXCJcIjtcbiAgcmV0dXJuIHN0ci5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIHN0ci5zbGljZSgxKTtcbn1cblxuZXhwb3J0IGNvbnN0IEFCSUxJVFlfRlVMTDogUmVjb3JkPHN0cmluZyxzdHJpbmc+ID0ge1xuICBzdHI6IFwiU3RyZW5ndGhcIixcbiAgZGV4OiBcIkRleHRlcml0eVwiLFxuICBjb246IFwiQ29uc3RpdHV0aW9uXCIsXG4gIGludDogXCJJbnRlbGxpZ2VuY2VcIixcbiAgd2lzOiBcIldpc2RvbVwiLFxuICBjaGE6IFwiQ2hhcmlzbWFcIixcbn07XG5cbmV4cG9ydCBjb25zdCBTSVpFX01BUDogUmVjb3JkPHN0cmluZywgc3RyaW5nPiA9IHtcbiAgVDogXCJUaW55XCIsXG4gIFM6IFwiU21hbGxcIixcbiAgTTogXCJNZWRpdW1cIixcbiAgTDogXCJMYXJnZVwiLFxuICBIOiBcIkh1Z2VcIixcbiAgRzogXCJHYXJnYW50dWFuXCJcbn07XG5cbi8vIFx1MjUwMFx1MjUwMFx1MjUwMCBVbml2ZXJzYWwgZnJvbnRtYXR0ZXIga2V5cyBcdTI1MDBcdTI1MDBcdTI1MDAgIFxuZXhwb3J0IGNvbnN0IEZNX0ZJRUxEUyA9IHtcbiAgQUJJTElUWV9CT05VU0VTOiAgICBcImFiaWxpdHlfYm9udXNlc1wiLFxuICBBQzogICAgICAgICAgICAgICAgIFwiQUNcIixcbiAgQUxJR05NRU5UOiAgICAgICAgICBcIkFsaWdubWVudFwiLFxuICBBTU1PX1RZUEU6ICAgICAgICAgIFwiQW1tbyBUeXBlXCIsXG4gIEFSTU9SX1BST0ZJQ0lFTkNJRVM6XCJhcm1vci1wcm9mXCIsXG4gIEFUVEFDS19UWVBFOiAgICAgICAgXCJhdHRhY2tfdHlwZVwiLFxuICBBVFRVTkVNRU5UOiAgICAgICAgIFwiQXR0dW5lbWVudFwiLFxuICBBVFRVTkVfUkVROiAgICAgICAgIFwiQXR0dW5lX1JlcVwiLFxuICBDQVNUSU5HX1RJTUU6ICAgICAgIFwiY2FzdGluZ190aW1lXCIsXG4gIENIQVJJU01BOiAgICAgICAgICAgXCJjaGFyaXNtYVwiLFxuICBDSEFfTU9EOiAgICAgICAgICAgIFwiY2hhX21vZFwiLFxuICBDT05DRU5UUkFUSU9OOiAgICAgIFwiY29uY2VudHJhdGlvblwiLFxuICBDT05ESVRJT05fSU1NOiAgICAgIFwiY29uZF9pbW11bml0eVwiLFxuICBDT05TVElUVVRJT046ICAgICAgIFwiY29uc3RpdHV0aW9uXCIsXG4gIENPTl9NT0Q6ICAgICAgICAgICAgXCJjb25fbW9kXCIsXG4gIENPU1Q6ICAgICAgICAgICAgICAgXCJjb3N0XCIsXG4gIENPTVBPTkVOVFM6ICAgICAgICAgXCJDb21wb25lbnRzXCIsXG4gIENIQUxMRU5HRV9SQVRJTkc6ICAgXCJDUlwiLFxuICBEQU1BR0VfVFlQRTogICAgICAgIFwiZGFtYWdlX3R5cGVcIixcbiAgREFNQUdFX1RZUEVTOiAgICAgICBcImRhbWFnZVR5cGVzXCIsXG4gIERBTUFHRTogICAgICAgICAgICAgXCJkYW1hZ2VcIixcbiAgREFNQUdFX1JFUzogICAgICAgICBcImRtZ19yZXNpc3RhbmNlXCIsXG4gIERBTUFHRV9JTU06ICAgICAgICAgXCJkbWdfaW1tdW5pdHlcIixcbiAgREVYVEVSSVRZOiAgICAgICAgICBcImRleHRlcml0eVwiLFxuICBERVhfTU9EOiAgICAgICAgICAgIFwiZGV4X21vZFwiLFxuICBEVVJBVElPTjogICAgICAgICAgIFwiZHVyYXRpb25cIixcbiAgUlVMRVNFVDogICAgICAgICAgICBcInJ1bGVzZXRcIixcbiAgSFA6ICAgICAgICAgICAgICAgICBcIkhQXCIsXG4gIElOVEVMTElHRU5DRTogICAgICAgXCJpbnRlbGxpZ2VuY2VcIixcbiAgSU5UX01PRDogICAgICAgICAgICBcImludF9tb2RcIixcbiAgTEFOR1VBR0VTOiAgICAgICAgICBcImxhbmd1YWdlc1wiLFxuICBMRVZFTDogICAgICAgICAgICAgIFwibGV2ZWxcIixcbiAgTUFHSUNBTDogICAgICAgICAgICBcIm1hZ2ljYWxcIixcbiAgTUFURVJJQUw6ICAgICAgICAgICBcIm1hdGVyaWFsXCIsXG4gIE5BTUU6ICAgICAgICAgICAgICAgXCJuYW1lXCIsXG4gIFBST1BFUlRJRVM6ICAgICAgICAgXCJwcm9wZXJ0aWVzXCIsXG4gIFJBTkdFOiAgICAgICAgICAgICAgXCJyYW5nZVwiLFxuICBSQVJJVFk6ICAgICAgICAgICAgIFwicmFyaXR5XCIsXG4gIFJFTE9BRDogICAgICAgICAgICAgXCJyZWxvYWRcIixcbiAgUklUVUFMOiAgICAgICAgICAgICBcInJpdHVhbFwiLFxuICBTQVZFOiAgICAgICAgICAgICAgIFwic2F2ZVwiLFxuICBTQVZJTkdfVEhST1dTOiAgICAgIFwic2F2aW5nX3Rocm93c1wiLFxuICBTQ0hPT0w6ICAgICAgICAgICAgIFwic2Nob29sXCIsXG4gIFNFTlNFUzogICAgICAgICAgICAgXCJzZW5zZXNcIixcbiAgU0laRTogICAgICAgICAgICAgICBcInNpemVcIixcbiAgU0tJTExTOiAgICAgICAgICAgICBcInNraWxsc1wiLFxuICBTS0lMTF9DSE9JQ0VfTElTVDogIFwic2tpbGxfY2hvaWNlX2xpc3RcIixcbiAgU09NQVRJQzogICAgICAgICAgICBcInNvbWF0aWNcIixcbiAgU09VUkNFOiAgICAgICAgICAgICBcInNvdXJjZVwiLFxuICBTUEVDSUVTOiAgICAgICAgICAgIFwic3BlY2llc1wiLFxuICBTUEVFRDogICAgICAgICAgICAgIFwic3BlZWRcIixcbiAgU1BFTExfQ0FTVF9NT0Q6ICAgICBcIlNwZWxsIENhc3QgTW9kXCIsXG4gIFNQRUxMX1JBTkdFOiAgICAgICAgXCJSYW5nZVwiLFxuICBTVEVBTFRIX0RJU0FEVkFOVEFHRTogXCJzdGVhbHRoRGlzYWR2YW50YWdlXCIsXG4gIFNUUkVOR1RIOiAgICAgICAgICAgXCJzdHJlbmd0aFwiLFxuICBTVFJfTU9EOiAgICAgICAgICAgIFwic3RyX21vZFwiLFxuICBTVUJSQUNFUzogICAgICAgICAgIFwic3VicmFjZXNcIixcbiAgVE9PTF9QUk9GSUNJRU5DSUVTOiBcInRvb2wtcHJvZlwiLFxuICBUT09MX0NIT0lDRV9MSVNUOiAgXCJ0b29sX2Nob2ljZV9saXN0XCIsXG4gIFRSQUlUUzogICAgICAgICAgICAgXCJ0cmFpdHNcIixcbiAgVFlQRTogICAgICAgICAgICAgICBcInR5cGVcIixcbiAgVkFSSUFOVDogICAgICAgICAgICBcIlZhcmlhbnRcIixcbiAgVkVSQkFMOiAgICAgICAgICAgICBcInZlcmJhbFwiLFxuICBXRUFQT05fUFJPRklDSUVOQ0lFUzogXCJ3ZWFwb24tcHJvZlwiLFxuICBXRUlHSFQ6ICAgICAgICAgICAgIFwid2VpZ2h0XCIsXG4gIFdJU0RPTTogICAgICAgICAgICAgXCJ3aXNkb21cIixcbiAgV0lTX01PRDogICAgICAgICAgICBcIndpc19tb2RcIixcbn0gYXMgY29uc3Q7XG5cbmV4cG9ydCB0eXBlIEZNS2V5ID0ga2V5b2YgdHlwZW9mIEZNX0ZJRUxEUztcbmV4cG9ydCB0eXBlIEZyb250bWF0dGVyID0gUGFydGlhbDxSZWNvcmQ8dHlwZW9mIEZNX0ZJRUxEU1tGTUtleV0sIHVua25vd24+PjtcblxuLy8gXHUyNTAwXHUyNTAwXHUyNTAwIERlZmluaXRpb24gb2YgYSBzaW5nbGUgZmllbGQgbWFwcGluZyBcdTI1MDBcdTI1MDBcdTI1MDBcbmV4cG9ydCBpbnRlcmZhY2UgRmllbGREZWYge1xuICAvKiogV2hpY2ggY2FsbFx1MjAxMHNpZ24gKGtleSBpbiBGTV9GSUVMRFMpICovXG4gIGNhbGxTaWduOiBGTUtleTtcbiAgLyoqIFdoaWNoIEpTT04gcHJvcGVydHkgdG8gcmVhZCAqL1xuICBqc29uS2V5OiAgc3RyaW5nIHwgc3RyaW5nW107XG4gIC8qKiBPcHRpb25hbCB0cmFuc2Zvcm1lcjogcmF3IEpTT04gXHUyMTkyIGZpbmFsIHZhbHVlICovXG4gIGNvbnY/OiAgICAocmF3OiBhbnksIGFsbEpzb24/OiBhbnkpID0+IHVua25vd247XG59XG5cbmNvbnN0IHVuaWZpZWRBcm1vclByb2ZzID0gKHZhbDogYW55KTogc3RyaW5nW10gPT5cbiAgQXJyYXkuaXNBcnJheSh2YWw/LmFybW9yKSA/IHZhbC5hcm1vci5tYXAoY2FwKSA6XG4gIEFycmF5LmlzQXJyYXkodmFsKSA/IHZhbC5tYXAoY2FwKSA6IFtdO1xuXG4vLyBmcm9udG1hdHRlci50c1xuXG5leHBvcnQgZnVuY3Rpb24gdW5pZmllZFdlYXBvblByb2ZzKHZhbDogYW55KTogc3RyaW5nW10ge1xuICAvLyBwdWxsIHRoZSBcdTIwMUN3ZWFwb25zXHUyMDFEIGFycmF5IG9mZiBlaXRoZXIgYSByYXcgYXJyYXkgb3IgYSBzdGFydGluZ1Byb2ZpY2llbmNpZXMgb2JqZWN0XG4gIGNvbnN0IHJhd0FycjogYW55W10gPSBBcnJheS5pc0FycmF5KHZhbD8ud2VhcG9ucylcbiAgICA/IHZhbC53ZWFwb25zXG4gICAgOiBBcnJheS5pc0FycmF5KHZhbClcbiAgICA/IHZhbFxuICAgIDogW107XG5cbiAgY29uc3Qgb3V0ID0gbmV3IFNldDxzdHJpbmc+KCk7XG5cbiAgZnVuY3Rpb24gaGFuZGxlT25lKGVudHJ5OiBhbnkpIHtcbiAgICBpZiAoQXJyYXkuaXNBcnJheShlbnRyeSkpIHtcbiAgICAgIC8vIGZsYXR0ZW4gbmVzdGVkIGFycmF5c1xuICAgICAgZW50cnkuZm9yRWFjaChoYW5kbGVPbmUpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmICh0eXBlb2YgZW50cnkgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgIGNvbnN0IGxpdCA9IGVudHJ5LnRyaW0oKS50b0xvd2VyQ2FzZSgpO1xuICAgICAgaWYgKGxpdCA9PT0gXCJzaW1wbGVcIikge1xuICAgICAgICBvdXQuYWRkKFwiU2ltcGxlIFdlYXBvbnNcIik7XG4gICAgICB9IGVsc2UgaWYgKGxpdCA9PT0gXCJtYXJ0aWFsXCIpIHtcbiAgICAgICAgb3V0LmFkZChcIk1hcnRpYWwgV2VhcG9uc1wiKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIGRldGVjdCB0YWdnZWQgaXRlbXMgdnMgc2ltcGxlIHdvcmRzXG4gICAgICAgIGNvbnN0IHRleHQgPSBlbnRyeS5zdGFydHNXaXRoKFwie0BcIilcbiAgICAgICAgICA/IHJlcGxhY2U1ZVRhZ3MoZW50cnkpXG4gICAgICAgICAgOiBjYXAoZW50cnkpO1xuICAgICAgICBvdXQuYWRkKHRleHQpO1xuICAgICAgfVxuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmIChlbnRyeSAmJiB0eXBlb2YgZW50cnkgPT09IFwib2JqZWN0XCIgJiYgZW50cnkucHJvZmljaWVuY3kpIHtcbiAgICAgIC8vIHsgcHJvZmljaWVuY3k6IFwiZmlyZWFybXNcIiwgb3B0aW9uYWw6IHRydWUgfVxuICAgICAgY29uc3QgbmFtZSA9IGNhcChlbnRyeS5wcm9maWNpZW5jeSk7XG4gICAgICBvdXQuYWRkKGVudHJ5Lm9wdGlvbmFsID8gYCR7bmFtZX0gKG9wdGlvbmFsKWAgOiBuYW1lKTtcbiAgICB9XG4gIH1cblxuICByYXdBcnIuZm9yRWFjaChoYW5kbGVPbmUpO1xuICByZXR1cm4gWy4uLm91dF07XG59XG5cblxuY29uc3QgdW5pZmllZFNhdmVzID0gKHZhbDogYW55KTogc3RyaW5nW10gPT4ge1xuICBpZiAoQXJyYXkuaXNBcnJheSh2YWwpKSB7XG4gICAgICByZXR1cm4gdmFsLm1hcCgoazogc3RyaW5nKSA9PlxuICAgICAgICAoeyBzdHI6IFwiU3RyZW5ndGhcIiwgZGV4OiBcIkRleHRlcml0eVwiLCBjb246IFwiQ29uc3RpdHV0aW9uXCIsXG4gICAgICAgICAgaW50OiBcIkludGVsbGlnZW5jZVwiLCB3aXM6IFwiV2lzZG9tXCIsIGNoYTogXCJDaGFyaXNtYVwiIH1ba10gPz8gay50b1VwcGVyQ2FzZSgpKVxuICAgICAgKTtcbiAgfVxuICBpZiAodHlwZW9mIHZhbCA9PT0gXCJvYmplY3RcIiAmJiB2YWwgIT09IG51bGwpIHtcbiAgICByZXR1cm4gT2JqZWN0LmtleXModmFsKS5tYXAoayA9PiBrLnRvVXBwZXJDYXNlKCkpO1xuICB9XG4gIHJldHVybiBbXTtcbn07XG5cbmV4cG9ydCBjb25zdCB1bmlmaWVkU2tpbGxzID0gKHZhbDogYW55KTogc3RyaW5nW10gPT4ge1xuICAvLyAxKSBcdTIwMUNCZXN0aWFyeVx1MjAxRCBzdHlsZTogZmxhdCBvYmplY3QgbWFwcGluZyBza2lsbFx1MjE5Mm1vZGlmaWVyXG4gIGlmIChcbiAgICB2YWwgJiZcbiAgICAhQXJyYXkuaXNBcnJheSh2YWwpICYmXG4gICAgdHlwZW9mIHZhbCA9PT0gXCJvYmplY3RcIiAmJlxuICAgIC8vIGVuc3VyZSBldmVyeSB2YWx1ZSBpcyBhIHN0cmluZyBvciBudW1iZXJcbiAgICBPYmplY3QudmFsdWVzKHZhbCkuZXZlcnkodiA9PiB0eXBlb2YgdiA9PT0gXCJzdHJpbmdcIiB8fCB0eXBlb2YgdiA9PT0gXCJudW1iZXJcIilcbiAgKSB7XG4gICAgcmV0dXJuIE9iamVjdC5lbnRyaWVzKHZhbCkubWFwKFxuICAgICAgKFtza2lsbCwgbW9kXSkgPT4gYCR7Y2FwKHNraWxsKX0gJHttb2R9YC50cmltKClcbiAgICApO1xuICB9XG5cbiAgLy8gMikgbmVzdGVkIHVuZGVyIC5za2lsbHMgLyAuc2tpbGxQcm9maWNpZW5jaWVzIC8gLnNraWxsUHJvZlxuICBpZiAodmFsICYmICFBcnJheS5pc0FycmF5KHZhbCkgJiYgdHlwZW9mIHZhbCA9PT0gXCJvYmplY3RcIikge1xuICAgIGNvbnN0IG5lc3RlZCA9ICh2YWwgYXMgYW55KS5za2lsbHNcbiAgICAgID8/ICh2YWwgYXMgYW55KS5za2lsbFByb2ZcbiAgICAgID8/ICh2YWwgYXMgYW55KS5za2lsbFByb2ZpY2llbmNpZXM7XG4gICAgcmV0dXJuIHVuaWZpZWRTa2lsbHMobmVzdGVkKTtcbiAgfVxuXG4gIC8vIDMpIGFycmF5LXN0eWxlXG4gIGlmICghQXJyYXkuaXNBcnJheSh2YWwpKSByZXR1cm4gW107XG5cbiAgY29uc3Qgb3V0ID0gbmV3IFNldDxzdHJpbmc+KCk7XG4gIGZvciAoY29uc3QgZSBvZiB2YWwpIHtcbiAgICAvLyAzYSkgeyBhbnk6IE4gfVxuICAgIGlmIChlICYmIHR5cGVvZiBlID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiAoZSBhcyBhbnkpLmFueSA9PT0gXCJudW1iZXJcIikge1xuICAgICAgb3V0LmFkZChgQ2hvb3NlICR7KGUgYXMgYW55KS5hbnl9YCk7XG4gICAgICBjb250aW51ZTtcbiAgICB9XG4gICAgLy8gM2IpIHsgY2hvb3NlOiB7IGNvdW50LCBcdTIwMjYgfSB9XG4gICAgaWYgKGUgJiYgdHlwZW9mIGUgPT09IFwib2JqZWN0XCIgJiYgKGUgYXMgYW55KS5jaG9vc2UpIHtcbiAgICAgIGNvbnN0IGNudCA9IChlIGFzIGFueSkuY2hvb3NlLmNvdW50ID8/IDE7XG4gICAgICBvdXQuYWRkKGBDaG9vc2UgJHtjbnR9YCk7XG4gICAgfVxuICAgIC8vIDNjKSBmaXhlZCBmbGFncyBmb286IHRydWVcbiAgICBpZiAoZSAmJiB0eXBlb2YgZSA9PT0gXCJvYmplY3RcIikge1xuICAgICAgZm9yIChjb25zdCBbaywgdl0gb2YgT2JqZWN0LmVudHJpZXMoZSkpIHtcbiAgICAgICAgaWYgKHYgPT09IHRydWUpIG91dC5hZGQoY2FwKGspKTtcbiAgICAgIH1cbiAgICB9XG4gICAgLy8gM2QpIGxpdGVyYWwgc3RyaW5nc1xuICAgIGlmICh0eXBlb2YgZSA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgb3V0LmFkZChjYXAoZSkpO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBbLi4ub3V0XTtcbn07XG5cblxuIFxuZXhwb3J0IGNvbnN0IHVuaWZpZWRUb29sUHJvZnMgPSAodmFsOiBhbnkpOiBzdHJpbmdbXSA9PiB7XG4gIC8vIHB1bGwgbmVzdGVkIGFycmF5IGlmIHNvbWVvbmUgcGFzc2VkIHlvdSB0aGUgd2hvbGUgc3RhcnRpbmdQcm9maWNpZW5jaWVzIG9ialxuICBsZXQgZW50cmllczogYW55W10gPSBBcnJheS5pc0FycmF5KHZhbCkgPyB2YWxcbiAgICA6IEFycmF5LmlzQXJyYXkodmFsPy50b29sUHJvZmljaWVuY2llcykgPyB2YWwudG9vbFByb2ZpY2llbmNpZXNcbiAgICA6IEFycmF5LmlzQXJyYXkodmFsPy50b29scykgICAgICAgICAgICAgPyB2YWwudG9vbHNcbiAgICA6IFtdO1xuXG4gIGNvbnN0IG91dCA9IG5ldyBTZXQ8c3RyaW5nPigpO1xuICBsZXQgc2F3Q2hvb3NlID0gZmFsc2U7XG5cbiAgZm9yIChjb25zdCBlIG9mIGVudHJpZXMpIHtcbiAgICBpZiAodHlwZW9mIGUgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgIG91dC5hZGQoY2FwKGUpKTtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cblxuICAgIGlmIChlPy5jaG9vc2UpIHtcbiAgICAgIGNvbnN0IGNudCA9IGUuY2hvb3NlLmNvdW50ID8/IDE7XG4gICAgICBzYXdDaG9vc2UgPSB0cnVlO1xuICAgICAgb3V0LmFkZChgQ2hvb3NlICR7Y250fWApO1xuICAgIH1cblxuICAgIC8vIHB1bGwgb3V0IGFueSBmaXhlZCBcdTIwMUNmb286IHRydWVcdTIwMUQgb3IgbnVtZXJpYyBcdTIwMUNhbnlGb286IE5cdTIwMURcbiAgICBmb3IgKGNvbnN0IFtrLHZdIG9mIE9iamVjdC5lbnRyaWVzKGUpKSB7XG4gICAgICBpZiAodiA9PT0gdHJ1ZSkge1xuICAgICAgICBvdXQuYWRkKGNhcChrKSk7XG4gICAgICB9IGVsc2UgaWYgKHR5cGVvZiB2ID09PSBcIm51bWJlclwiICYmIGsuc3RhcnRzV2l0aChcImFueVwiKSkge1xuICAgICAgICAvLyBlLmcuIGFueUFydGlzYW5zVG9vbDoxXG4gICAgICAgIGNvbnN0IHJhdyA9IGsucmVwbGFjZSgvXmFueS8sIFwiXCIpO1xuICAgICAgICBjb25zdCBzcGFjZWQgPSByYXdcbiAgICAgICAgICAucmVwbGFjZSgvKFthLXpdKShbQS1aXSkvZywgXCIkMSAkMlwiKVxuICAgICAgICAgIC5zcGxpdChcIiBcIilcbiAgICAgICAgICAubWFwKGNhcClcbiAgICAgICAgICAuam9pbihcIiBcIik7XG4gICAgICAgIG91dC5hZGQoYENob29zZSAke3Z9ICR7c3BhY2VkfWApO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiBbLi4ub3V0XTtcbn07XG5cbmV4cG9ydCBjb25zdCBBTExfRklFTERfREVGUzogRmllbGREZWZbXSA9IFtcbiAgLy8gXHUyNTAwXHUyNTAwXHUyNTAwIENvcmUgXHUyNTAwXHUyNTAwXHUyNTAwXG4gIHsgY2FsbFNpZ246IFwiTkFNRVwiLCAganNvbktleTogXCJuYW1lXCIgfSxcbiAgeyBjYWxsU2lnbjogXCJTT1VSQ0VcIiwganNvbktleTogW1wic291cmNlXCJdLCBjb252OiAocmF3LCBhbGwpID0+IHtcbiAgICAgIGNvbnN0IG91dCA9IG5ldyBTZXQ8c3RyaW5nPigpO1xuICAgICAgY29uc3QgYXJyID0gQXJyYXkuaXNBcnJheShyYXcpID8gcmF3IDogW3Jhd107XG4gICAgICBhcnIuZm9yRWFjaChzcmMgPT4gb3V0LmFkZChnZXRGdWxsU291cmNlTmFtZShzcmMsIChhbGwgYXMgYW55KS5fZWRpdGlvbklkKSkpO1xuICAgICAgZm9yIChjb25zdCBvcyBvZiBhbGwub3RoZXJTb3VyY2VzID8/IFtdKSBvdXQuYWRkKGdldEZ1bGxTb3VyY2VOYW1lKG9zLnNvdXJjZSwgKGFsbCBhcyBhbnkpLl9lZGl0aW9uSWQpKTtcbiAgICAgIGZvciAoY29uc3QgcmVwIG9mIGFsbC5yZXByaW50ZWRBcyA/PyBbXSkge1xuICAgICAgICBjb25zdCBbLCBzcmNdID0gKHJlcCBhcyBzdHJpbmcpLnNwbGl0KFwifFwiKTtcbiAgICAgICAgb3V0LmFkZChnZXRGdWxsU291cmNlTmFtZShzcmMsIChhbGwgYXMgYW55KS5fZWRpdGlvbklkKSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gWy4uLm91dF07XG4gIH19LFxuXG4gIC8vIFx1MjUwMFx1MjUwMFx1MjUwMCBQcm9maWNpZW5jaWVzIFx1MjUwMFx1MjUwMFx1MjUwMFxuICB7IGNhbGxTaWduOiBcIkFSTU9SX1BST0ZJQ0lFTkNJRVNcIiwgIGpzb25LZXk6IFtcImFybW9yUHJvZmljaWVuY2llc1wiLCBcImFybW9yUHJvZnNcIiwgXCJzdGFydGluZ1Byb2ZpY2llbmNpZXNcIl0sIGNvbnY6IHVuaWZpZWRBcm1vclByb2ZzIH0sXG4gIHsgXG4gICAgY2FsbFNpZ246IFwiV0VBUE9OX1BST0ZJQ0lFTkNJRVNcIixcbiAgICBqc29uS2V5OiBbXCJ3ZWFwb25Qcm9maWNpZW5jaWVzXCIsXCJ3ZWFwb25Qcm9mc1wiLFwic3RhcnRpbmdQcm9maWNpZW5jaWVzXCJdLFxuICAgIGNvbnY6IHVuaWZpZWRXZWFwb25Qcm9mc1xuICB9LFxuICB7IGNhbGxTaWduOiBcIlRPT0xfUFJPRklDSUVOQ0lFU1wiLCAgIGpzb25LZXk6IFtcInRvb2xQcm9maWNpZW5jaWVzXCIsIFwidG9vbFByb2ZzXCIsIFwic3RhcnRpbmdQcm9maWNpZW5jaWVzXCJdLCBjb252OiB1bmlmaWVkVG9vbFByb2ZzIH0sXG4gIHtcbiAgICBjYWxsU2lnbjogXCJUT09MX0NIT0lDRV9MSVNUXCIsXG4gICAganNvbktleTogW1widG9vbFByb2ZpY2llbmNpZXNcIiwgXCJ0b29sUHJvZnNcIiwgXCJzdGFydGluZ1Byb2ZpY2llbmNpZXNcIl0sXG4gICAgY29udjogKHJhdzogYW55KSA9PiB7XG4gICAgICBjb25zdCBhcnIgPSBBcnJheS5pc0FycmF5KHJhdylcbiAgICAgICAgPyByYXdcbiAgICAgICAgOiBBcnJheS5pc0FycmF5KHJhdz8udG9vbFByb2ZpY2llbmNpZXMpXG4gICAgICAgID8gcmF3LnRvb2xQcm9maWNpZW5jaWVzXG4gICAgICAgIDogQXJyYXkuaXNBcnJheShyYXc/LnRvb2xzKVxuICAgICAgICA/IHJhdy50b29sc1xuICAgICAgICA6IFtdO1xuICAgICAgY29uc3QgY2hvaWNlID0gYXJyLmZpbmQoKGU6IGFueSkgPT4gZT8uY2hvb3NlKTtcbiAgICAgIHJldHVybiBjaG9pY2U/LmNob29zZT8uZnJvbT8ubWFwKChzOiBzdHJpbmcpID0+IGNhcChzKSkgPz8gW107XG4gICAgfVxuICB9LFxuICB7IGNhbGxTaWduOiBcIlNBVklOR19USFJPV1NcIiwgICAgICAgIGpzb25LZXk6IFtcInNhdmVcIiwgXCJwcm9maWNpZW5jeVwiXSwgY29udjogdW5pZmllZFNhdmVzIH0sXG4gIHtcbiAgICBjYWxsU2lnbjogXCJTS0lMTFNcIixcbiAgICBqc29uS2V5OiBbXCJza2lsbFwiLCBcInNraWxsUHJvZlwiLCBcInNraWxsUHJvZmljaWVuY2llc1wiLCBcInN0YXJ0aW5nUHJvZmljaWVuY2llc1wiXSxcbiAgICBjb252OiB1bmlmaWVkU2tpbGxzXG4gIH0sXG5cbiAge1xuICAgIGNhbGxTaWduOiBcIlNLSUxMX0NIT0lDRV9MSVNUXCIsXG4gICAganNvbktleTogW1wic2tpbGxcIiwgXCJza2lsbFByb2ZcIiwgXCJza2lsbFByb2ZpY2llbmNpZXNcIiwgXCJzdGFydGluZ1Byb2ZpY2llbmNpZXNcIl0sXG4gICAgY29udjogKHJhdzogYW55KSA9PiB7XG4gICAgICAvLyBub3JtYWxpemUgaW50byBhbiBhcnJheSBvZiBlbnRyaWVzXG4gICAgICBjb25zdCBhcnI6IGFueVtdID0gQXJyYXkuaXNBcnJheShyYXcpXG4gICAgICAgID8gcmF3XG4gICAgICAgIDogQXJyYXkuaXNBcnJheShyYXc/LnNraWxsUHJvZmljaWVuY2llcylcbiAgICAgICAgPyByYXcuc2tpbGxQcm9maWNpZW5jaWVzXG4gICAgICAgIDogQXJyYXkuaXNBcnJheShyYXc/LnNraWxscylcbiAgICAgICAgPyByYXcuc2tpbGxzXG4gICAgICAgIDogQXJyYXkuaXNBcnJheShyYXc/LnNraWxsUHJvZilcbiAgICAgICAgPyByYXcuc2tpbGxQcm9mXG4gICAgICAgIDogW107XG5cbiAgICAgIC8vIGZpbmQgdGhlIG9uZSBlbnRyeSB0aGF0IHJlcHJlc2VudHMgdGhlIFx1MjAxQ2Nob29zZVx1MjAxRCBidWNrZXRcbiAgICAgIGNvbnN0IGNob2ljZU9iaiA9IGFyci5maW5kKGUgPT4gZT8uY2hvb3NlIHx8IHR5cGVvZiBlLmFueSA9PT0gXCJudW1iZXJcIik7XG4gICAgICBpZiAoIWNob2ljZU9iaikgcmV0dXJuIFtdO1xuXG4gICAgICAvLyBleHBsaWNpdCBcdTIwMUNjaG9vc2UgZnJvbSBbIC4uLiBdXHUyMDFEXG4gICAgICBpZiAoY2hvaWNlT2JqLmNob29zZSAmJiBBcnJheS5pc0FycmF5KGNob2ljZU9iai5jaG9vc2UuZnJvbSkpIHtcbiAgICAgICAgcmV0dXJuIGNob2ljZU9iai5jaG9vc2UuZnJvbS5tYXAoY2FwKTtcbiAgICAgIH1cblxuICAgICAgLy8gdGhlIFx1MjAxQ2FueTogM1x1MjAxRCBzaG9ydGhhbmQgXHUyMTkyIG9mZmVyIGV2ZXJ5IHNraWxsXG4gICAgICBpZiAodHlwZW9mIGNob2ljZU9iai5hbnkgPT09IFwibnVtYmVyXCIpIHtcbiAgICAgICAgLy8gU0tJTExfT1BUSU9OUyBpcyB5b3VyIGNvbnN0IFtcIkFjcm9iYXRpY3NcIiwgXCJBbmltYWwgSGFuZGxpbmdcIiwgXHUyMDI2XVxuICAgICAgICByZXR1cm4gU0tJTExfT1BUSU9OUztcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIFtdO1xuICAgIH1cbiAgfSxcbiAgeyBjYWxsU2lnbjogXCJTUEVMTF9DQVNUX01PRFwiLGpzb25LZXk6IFwic3BlbGxjYXN0aW5nQWJpbGl0eVwiLCAgXG4gICAgY29udjogKHJhdykgPT4ge1xuICAgIC8vIHJhdyBtaWdodCBiZSBcImNoYVwiIG9yIFwiQ0hBXCJcbiAgICBjb25zdCBrZXkgPSBTdHJpbmcocmF3KS50b0xvd2VyQ2FzZSgpO1xuICAgIHJldHVybiBBQklMSVRZX0ZVTExba2V5XSB8fCBrZXkudG9VcHBlckNhc2UoKTtcbiAgfX0sXG5cbiAge1xuICAgIGNhbGxTaWduOiBcIlJVTEVTRVRcIixcbiAgICBqc29uS2V5OiBcIm5hbWVcIixcbiAgICAvLyBpZ25vcmUgdGhlIHJhdyB2YWx1ZSwgYWx3YXlzIHByaW50IEhFTExPXG4gICAgY29udjogKF9yYXcsIF9hbGwpID0+IFwiRCZEIDVlICgyMDI1KVwiLFxuICB9LCBcblxuICAvLyBcdTI1MDBcdTI1MDBcdTI1MDAgU3BlbGxzIFx1MjUwMFx1MjUwMFx1MjUwMFxuICB7IGNhbGxTaWduOiBcIkxFVkVMXCIsICAgICAgICAganNvbktleTogXCJsZXZlbFwiIH0sXG4gIHsgY2FsbFNpZ246IFwiU0NIT09MXCIsICAgICAgICBqc29uS2V5OiBcInNjaG9vbFwiLCAgIGNvbnY6IHMgPT4gU0NIT09MX01BUFtzXSA/PyBzIH0sXG4gIHsgY2FsbFNpZ246IFwiQ0FTVElOR19USU1FXCIsICBqc29uS2V5OiBcInRpbWVcIiwgICAgIGNvbnY6IGZvcm1hdFRpbWUgfSxcbiAgeyBjYWxsU2lnbjogXCJTUEVMTF9SQU5HRVwiLCAgIGpzb25LZXk6IFwicmFuZ2VcIiwgICAgY29udjogZm9ybWF0UmFuZ2UgfSxcbiAgeyBjYWxsU2lnbjogXCJEVVJBVElPTlwiLCAgICAgIGpzb25LZXk6IFwiZHVyYXRpb25cIiwgY29udjogZm9ybWF0RHVyYXRpb24gfSxcbiAgeyBjYWxsU2lnbjogXCJWRVJCQUxcIiwgICAgICAgIGpzb25LZXk6IFwiY29tcG9uZW50c1wiLCBjb252OiAoYzphbnkpID0+ICEhYy52IH0sXG4gIHsgY2FsbFNpZ246IFwiU09NQVRJQ1wiLCAgICAgICBqc29uS2V5OiBcImNvbXBvbmVudHNcIiwgY29udjogKGM6YW55KSA9PiAhIWMucyB9LFxuICB7IGNhbGxTaWduOiBcIk1BVEVSSUFMXCIsICAgICAganNvbktleTogXCJjb21wb25lbnRzXCIsIGNvbnY6IChjOmFueSkgPT4gISFjLm0gfSxcbiAgeyBjYWxsU2lnbjogXCJDT01QT05FTlRTXCIsXG4gICAganNvbktleTogIFwiY29tcG9uZW50c1wiLFxuICAgIGNvbnY6IChjOiBhbnkpOiBzdHJpbmdbXSA9PiB7XG4gICAgICBpZiAoIWMubSkgcmV0dXJuIFtdO1xuXG4gICAgICBjb25zdCByYXcgPSBBcnJheS5pc0FycmF5KGMubSkgPyBjLm0gOiBbYy5tXTtcblxuICAgICAgcmV0dXJuIHJhd1xuICAgICAgICAubWFwKChpdGVtOiBhbnkpOiBzdHJpbmcgfCBudWxsID0+IHtcbiAgICAgICAgICBpZiAodHlwZW9mIGl0ZW0gPT09IFwic3RyaW5nXCIpIHJldHVybiBpdGVtO1xuICAgICAgICAgIGlmIChpdGVtICYmIHR5cGVvZiBpdGVtID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiBpdGVtLnRleHQgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgIHJldHVybiBpdGVtLnRleHQ7XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9KVxuICAgICAgICAuZmlsdGVyKChjb21wOiBzdHJpbmcgfCBudWxsKTogY29tcCBpcyBzdHJpbmcgPT4gY29tcCAhPT0gbnVsbCk7XG4gICAgfVxuICB9LCBcbiAgeyBjYWxsU2lnbjogXCJBVFRBQ0tfVFlQRVwiLCAgIGpzb25LZXk6IFwiYXR0YWNrVHlwZVwiIH0sXG4gIHsgY2FsbFNpZ246IFwiREFNQUdFX1RZUEVcIiwgICBqc29uS2V5OiBcImRhbWFnZUluZmxpY3RcIiwgY29udjogZCA9PiBBcnJheS5pc0FycmF5KGQpID8gZFswXSA6IGQgfSxcbiAgeyBjYWxsU2lnbjogXCJSSVRVQUxcIiwgICAgICAgIGpzb25LZXk6IFwicml0dWFsXCIgfSxcbiAgeyBjYWxsU2lnbjogXCJDT05DRU5UUkFUSU9OXCIsIGpzb25LZXk6IFwiZHVyYXRpb25cIiwgY29udjogZHMgPT4gQXJyYXkuaXNBcnJheShkcykgJiYgZHMuc29tZSgoeDphbnkpPT4geC5jb25jZW50cmF0aW9uKSB9LFxuICB7IGNhbGxTaWduOiBcIlNBVkVcIiwgICAgICAgICAganNvbktleTogXCJzYXZlQXR0clwiIH0sXG5cbiAgLy8gXHUyNTAwXHUyNTAwXHUyNTAwIFNwZWNpZXMgLyBDcmVhdHVyZXMgXHUyNTAwXHUyNTAwXHUyNTAwXG4gIHsgY2FsbFNpZ246IFwiU1BFQ0lFU1wiLCBqc29uS2V5OiBcIm5hbWVcIiB9LFxuICB7IGNhbGxTaWduOiBcIlNJWkVcIiwganNvbktleTogXCJzaXplXCIsIGNvbnY6IChyYXc6IGFueSkgPT4ge1xuICAgICAgLy8gaGFuZGxlIFtcIlNcIixcIk1cIl0gb3IganVzdCBcIkxcIlxuICAgICAgaWYgKEFycmF5LmlzQXJyYXkocmF3KSkge1xuICAgICAgICByZXR1cm4gcmF3Lm1hcChyID0+IFNJWkVfTUFQW3JdIHx8IHIpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIFNJWkVfTUFQW3Jhd10gfHwgcmF3O1xuICAgICAgfVxuICAgIH1cbiAgfSxcbiAgICB7XG4gIGNhbGxTaWduOiBcIlNQRUVEXCIsXG4gIGpzb25LZXk6ICAgXCJzcGVlZFwiLFxuICBjb252OiAoc3A6IG51bWJlciB8IFJlY29yZDxzdHJpbmcsIGFueT4pID0+IHtcbiAgICAvLyBoYW5kbGUgYm90aCBudW1lcmljIHNwZWVkcyBhbmQgb2JqZWN0IHNwZWVkc1xuICAgIGlmICh0eXBlb2Ygc3AgPT09IFwibnVtYmVyXCIpIHtcbiAgICAgIHJldHVybiBbYFdhbGsgJHtzcH0gZnQuYF07XG4gICAgfVxuICAgIGlmICghc3AgfHwgdHlwZW9mIHNwICE9PSBcIm9iamVjdFwiKSByZXR1cm4gW107XG4gICAgcmV0dXJuIE9iamVjdC5lbnRyaWVzKHNwKVxuICAgICAgLmZpbHRlcigoW21vZGVdKSA9PiBtb2RlICE9PSBcImNhbkhvdmVyXCIpXG4gICAgICAubWFwKChbbW9kZSwgdl0pID0+IHtcbiAgICAgICAgY29uc3QgbiA9IHR5cGVvZiB2ID09PSBcIm9iamVjdFwiICYmIHYgIT09IG51bGwgJiYgXCJudW1iZXJcIiBpbiB2ID8gKHYgYXMgYW55KS5udW1iZXIgOiB2O1xuICAgICAgICBjb25zdCBsYWJlbCA9IG1vZGUgPT09IFwid2Fsa1wiID8gXCJXYWxrXCIgOiBjYXAobW9kZSk7XG4gICAgICAgIHJldHVybiBgJHtsYWJlbH0gJHtufSBmdC5gO1xuICAgICAgfSk7XG4gIH0sXG59LFxueyBjYWxsU2lnbjogXCJMQU5HVUFHRVNcIiwganNvbktleTogW1wibGFuZ3VhZ2VzXCIsIFwibGFuZ3VhZ2VQcm9maWNpZW5jaWVzXCJdLCBjb252OiBhcnIgPT4ge1xuICAgICAgaWYgKCFBcnJheS5pc0FycmF5KGFycikpIHJldHVybiBbXTtcbiAgICAgIGNvbnN0IG91dDogc3RyaW5nW10gPSBbXTtcbiAgICAgIGZvciAoY29uc3QgbHAgb2YgYXJyKSB7XG4gICAgICAgIGlmICh0eXBlb2YgbHAgPT09IFwic3RyaW5nXCIpIG91dC5wdXNoKGNhcChscCkpO1xuICAgICAgICBlbHNlIGlmICh0eXBlb2YgbHAgPT09IFwib2JqZWN0XCIpIHtcbiAgICAgICAgICBmb3IgKGNvbnN0IFtsYW5nLCB2YWxdIG9mIE9iamVjdC5lbnRyaWVzKGxwKSkge1xuICAgICAgICAgICAgaWYgKHZhbCkgb3V0LnB1c2goY2FwKGxhbmcpKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiBbLi4ubmV3IFNldChvdXQpXTtcbiAgfX0sXG4gIHsgY2FsbFNpZ246IFwiU0VOU0VTXCIsIGpzb25LZXk6IFwic2Vuc2VzXCIsIGNvbnY6IHNlbiA9PiB7XG4gICAgICBpZiAoQXJyYXkuaXNBcnJheShzZW4pKSByZXR1cm4gc2VuLm1hcCgoczpzdHJpbmcpPT5zLnJlcGxhY2UoL15cXGQrXFxzKi8sXCJcIikucmVwbGFjZSgvXi4vLGM9PmMudG9VcHBlckNhc2UoKSkpO1xuICAgICAgaWYgKHNlbiAmJiB0eXBlb2Ygc2VuPT09XCJvYmplY3RcIikgcmV0dXJuIE9iamVjdC5lbnRyaWVzKHNlbikubWFwKChbayx2XSk9PmAke2suY2hhckF0KDApLnRvVXBwZXJDYXNlKCkray5zbGljZSgxKX0gJHt2fWApO1xuICAgICAgcmV0dXJuIFtdO1xuICB9fSwgXG57XG4gIGNhbGxTaWduOiBcIlRSQUlUU1wiLFxuICBqc29uS2V5OiBbXCJjbGFzc0ZlYXR1cmVzXCIsIFwiZW50cmllc1wiXSxcbiAgY29udjogKHJhdzogYW55LCBhbGxKc29uOiBhbnkpOiBzdHJpbmdbXSA9PiB7XG4gICAgLy8gcHVsbCB0aGUgY2xhc3MgcmVjb3JkIHNvIHdlIGtub3cgaXRzIGRpc3BsYXkgbmFtZVxuICAgIGNvbnN0IGNsc1JlYyA9IEFycmF5LmlzQXJyYXkoYWxsSnNvbi5jbGFzcykgPyBhbGxKc29uLmNsYXNzWzBdIDogYWxsSnNvbjtcbiAgICBjb25zdCBjbGFzc05hbWUgPSB0eXBlb2YgY2xzUmVjLm5hbWUgPT09IFwic3RyaW5nXCIgPyBjbHNSZWMubmFtZSA6IFwiXCI7XG5cbiAgICAvLyBuYW1lcyB3ZSBuZXZlciB3YW50IHRvIGVtaXRcbiAgICBjb25zdCBvbWl0ID0gbmV3IFNldChbXG4gICAgICBcIkFiaWxpdHkgU2NvcmUgSW1wcm92ZW1lbnRcIixcbiAgICAgIFwiQXJjaGV0eXBlIEZlYXR1cmVcIixcbiAgICAgIFwiU3ViY2xhc3MgRmVhdHVyZVwiLFxuICAgICAgLy8gYWRkIG1vcmUgaWYgeW91IGxpa2VcdTIwMjZcbiAgICBdKTtcbiAgICBjb25zdCBzZWVuID0gbmV3IFNldDxzdHJpbmc+KCk7XG5cbiAgICAvLyAxKSBpZiB0aGVyZSdzIGEgY2xhc3NGZWF0dXJlcyBhcnJheSwgdXNlIGl0XG4gICAgaWYgKEFycmF5LmlzQXJyYXkoYWxsSnNvbi5jbGFzc0ZlYXR1cmVzKSkge1xuICAgICAgcmV0dXJuIGFsbEpzb24uY2xhc3NGZWF0dXJlcy5mbGF0TWFwKChmZWF0OiBhbnkpID0+IHtcbiAgICAgICAgLy8gc2tpcCBzdWJjbGFzc1x1MjAxMGluamVjdGVkIGZlYXR1cmVzIGVudGlyZWx5XG4gICAgICAgIGlmIChmZWF0ICYmIHR5cGVvZiBmZWF0ID09PSBcIm9iamVjdFwiICYmIGZlYXQuZ2FpblN1YmNsYXNzRmVhdHVyZSkgcmV0dXJuIFtdO1xuXG4gICAgICAgIC8vIG5vcm1hbGl6ZSB0byBhIHN0cmluZ1xuICAgICAgICBjb25zdCByYXdOYW1lID1cbiAgICAgICAgICB0eXBlb2YgZmVhdCA9PT0gXCJzdHJpbmdcIlxuICAgICAgICAgICAgPyBmZWF0XG4gICAgICAgICAgICA6IHR5cGVvZiBmZWF0LmNsYXNzRmVhdHVyZSA9PT0gXCJzdHJpbmdcIlxuICAgICAgICAgICAgPyBmZWF0LmNsYXNzRmVhdHVyZVxuICAgICAgICAgICAgOiBcIlwiO1xuXG4gICAgICAgIC8vIGRyb3AgZXZlcnl0aGluZyBhZnRlciB0aGUgZmlyc3QgXHUyMDFDfFx1MjAxRFxuICAgICAgICBjb25zdCBuYW1lID0gcmF3TmFtZS5zcGxpdChcInxcIilbMF0udHJpbSgpO1xuICAgICAgICBpZiAoIW5hbWUgfHwgb21pdC5oYXMobmFtZSkgfHwgc2Vlbi5oYXMobmFtZSkpIHJldHVybiBbXTtcbiAgICAgICAgc2Vlbi5hZGQobmFtZSk7XG5cbiAgICAgICAgLy8gYnVpbGQgYSBuaWNlIGFuY2hvciAobXVzdCBtYXRjaCB5b3VyIGhlYWRlcnMpXG4gICAgICAgIGNvbnN0IGFuY2hvciA9IG5hbWVcbiAgICAgICAgICAucmVwbGFjZSgvW15cXHdcXHNdL2csIFwiXCIpICAgIC8vIHN0cmlwIHB1bmN0dWF0aW9uXG4gICAgICAgICAgLnJlcGxhY2UoL1xccysvZywgXCIgXCIpICAgICAgIC8vIGNvbGxhcHNlIHNwYWNlc1xuICAgICAgICAgIC50cmltKClcbiAgICAgICAgICAucmVwbGFjZSgvXFxiXFx3L2csIChjOiBhbnkpID0+IGMudG9VcHBlckNhc2UoKSk7IC8vIFRpdGxlIENhc2VcblxuICAgICAgICAvLyBwcm9kdWNlIGEgZmlsZS1hbmNob3IgbGlua1xuICAgICAgICByZXR1cm4gYFtbJHtjbGFzc05hbWV9IyR7YW5jaG9yfXwke25hbWV9XV1gO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gMikgb3RoZXJ3aXNlIGZhbGwgYmFjayB0byB5b3VyIG9sZCBlbnRyaWVzLWJhc2VkIGxvZ2ljXG4gICAgY29uc3QgZW50cyA9IEFycmF5LmlzQXJyYXkocmF3KSA/IHJhdyA6IFtdO1xuICAgIGNvbnN0IGZlYXR1cmVOYW1lcyA9IGVudHNcbiAgICAgIC5maWx0ZXIoKGU6IGFueSkgPT4gZT8uZGF0YT8uaXNGZWF0dXJlICYmIHR5cGVvZiBlLm5hbWUgPT09IFwic3RyaW5nXCIpXG4gICAgICAubWFwKChlOiBhbnkpID0+IGUubmFtZS5yZXBsYWNlKC9eRmVhdHVyZTpcXHMqLywgXCJcIikudHJpbSgpKTtcbiAgICBpZiAoZmVhdHVyZU5hbWVzLmxlbmd0aCkgcmV0dXJuIGZlYXR1cmVOYW1lcztcblxuICAgIHJldHVybiBlbnRzXG4gICAgICAuZmlsdGVyKChlOiBhbnkpID0+IGUgJiYgdHlwZW9mIGUubmFtZSA9PT0gXCJzdHJpbmdcIilcbiAgICAgIC5tYXAoKGU6IGFueSkgPT4gZS5uYW1lLnJlcGxhY2UoL15GZWF0dXJlOlxccyovLCBcIlwiKS50cmltKCkpO1xuICB9LFxufSxcblxuXG4gIHsgY2FsbFNpZ246IFwiQUNcIiwganNvbktleTogXCJhY1wiLCBjb252OiBhID0+IEFycmF5LmlzQXJyYXkoYSk/YVswXS5hYzphIH0sXG4gIHsgY2FsbFNpZ246IFwiSFBcIiwganNvbktleTogXCJocFwiLCBjb252OiBocCA9PiBocD8uYXZlcmFnZSA/PyBocCB9LFxuICB7IGNhbGxTaWduOiBcIkNIQUxMRU5HRV9SQVRJTkdcIiwganNvbktleTogXCJjclwiIH0sXG4gIHsgY2FsbFNpZ246IFwiU1RSRU5HVEhcIiwgICAgIGpzb25LZXk6IFwiYWJpbGl0eVwiLCBjb252OiBhcnI9PkFycmF5LmlzQXJyYXkoYXJyKT9hcnJbMF06YXJyPy5zdHIgPz8gMCB9LFxuICB7IGNhbGxTaWduOiBcIkRFWFRFUklUWVwiLCAgICBqc29uS2V5OiBcImFiaWxpdHlcIiwgY29udjogYXJyPT5BcnJheS5pc0FycmF5KGFycik/YXJyWzFdOmFycj8uZGV4ID8/IDAgfSxcbiAgeyBjYWxsU2lnbjogXCJDT05TVElUVVRJT05cIiwganNvbktleTogXCJhYmlsaXR5XCIsIGNvbnY6IGFycj0+QXJyYXkuaXNBcnJheShhcnIpP2FyclsyXTphcnI/LmNvbiA/PyAwIH0sXG4gIHsgY2FsbFNpZ246IFwiSU5URUxMSUdFTkNFXCIsIGpzb25LZXk6IFwiYWJpbGl0eVwiLCBjb252OiBhcnI9PkFycmF5LmlzQXJyYXkoYXJyKT9hcnJbM106YXJyPy5pbnQgPz8gMCB9LFxuICB7IGNhbGxTaWduOiBcIldJU0RPTVwiLCAgICAgICBqc29uS2V5OiBcImFiaWxpdHlcIiwgY29udjogYXJyPT5BcnJheS5pc0FycmF5KGFycik/YXJyWzRdOmFycj8ud2lzID8/IDAgfSxcbiAgeyBjYWxsU2lnbjogXCJDSEFSSVNNQVwiLCAgICAganNvbktleTogXCJhYmlsaXR5XCIsIGNvbnY6IGFycj0+QXJyYXkuaXNBcnJheShhcnIpP2Fycls1XTphcnI/LmNoYSA/PyAwIH0sXG4gIHtcbiAgICBjYWxsU2lnbjogXCJBTElHTk1FTlRcIixcbiAgICBqc29uS2V5OiBcImFsaWdubWVudFwiLFxuICAgIGNvbnY6IChhOiBhbnkpID0+IHtcbiAgICAgIGNvbnN0IHJhdyA9IEFycmF5LmlzQXJyYXkoYSkgPyBhLmpvaW4oXCIgXCIpIDogdHlwZW9mIGEgPT09IFwic3RyaW5nXCIgPyBhIDogU3RyaW5nKGEpO1xuICAgICAgY29uc3QgY2xlYW5lZCA9IHJhd1xuICAgICAgICAucmVwbGFjZSgvXFxiQVxcYi9nLCBcIkFueVwiKVxuICAgICAgICAucmVwbGFjZSgvXFxiVVxcYi9nLCBcIlVuYWxpZ25lZFwiKVxuICAgICAgICAucmVwbGFjZSgvXFxiTlxcYi9nLCBcIk5ldXRyYWxcIilcbiAgICAgICAgLnJlcGxhY2UoL1xcYkxcXGIvZywgXCJMYXdmdWxcIilcbiAgICAgICAgLnJlcGxhY2UoL1xcYkNcXGIvZywgXCJDaGFvdGljXCIpXG4gICAgICAgIC5yZXBsYWNlKC9cXGJHXFxiL2csIFwiR29vZFwiKVxuICAgICAgICAucmVwbGFjZSgvXFxiRVxcYi9nLCBcIkV2aWxcIik7XG5cbiAgICAgIHJldHVybiBmb3JtYXRBbGlnbm1lbnRBYmJyZXYoY2xlYW5lZCk7IC8vIHJldXNlIHlvdXIgbm9ybWFsaXplciBpZiBpdCBleGlzdHNcbiAgICB9XG4gIH0sXG4gICAge1xuICAgICAgY2FsbFNpZ246IFwiVFlQRVwiLFxuICAgICAganNvbktleTogXCJ0eXBlXCIsXG4gICAgICBjb252OiAodDogYW55KTogc3RyaW5nIHwgdW5kZWZpbmVkID0+IHtcbiAgICAgICAgLy8gMSkgSWYgaXRcdTIwMTlzIGEgc2ltcGxlIHN0cmluZyBjb2RlLCBtYXAgaXRcbiAgICAgICAgaWYgKHR5cGVvZiB0ID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgLy8gZGlyZWN0IGxvb2t1cFx1MjAxNGlmIG5vIG1hcHBpbmcsIGp1c3QgdGl0bGVcdTIwMTBjYXNlIHRoZSBjb2RlXG4gICAgICAgICAgcmV0dXJuIElURU1fVFlQRV9NQVBbdF0gPz8gY2FwKHQpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gMikgSWYgaXRcdTIwMTlzIGFuIG9iamVjdCB3aXRoIGEgLnR5cGUgdGFnXG4gICAgICAgIGlmICh0ICYmIHR5cGVvZiB0ID09PSBcIm9iamVjdFwiKSB7XG4gICAgICAgICAgY29uc3QgY29kZSA9IFN0cmluZyh0LnR5cGUgfHwgXCJcIikudG9VcHBlckNhc2UoKTtcbiAgICAgICAgICAvLyB0cnkgdGhlIG1hcCBmaXJzdFxuICAgICAgICAgIGlmIChJVEVNX1RZUEVfTUFQW2NvZGVdKSB7XG4gICAgICAgICAgICByZXR1cm4gSVRFTV9UWVBFX01BUFtjb2RlXTtcbiAgICAgICAgICB9XG4gICAgICAgICAgLy8gb3RoZXJ3aXNlIGZhbGwgYmFjayB0byBcdTIwMUNCYXNlICh0YWdzXHUyMDI2KVx1MjAxRCBzdHlsZVxuICAgICAgICAgIGNvbnN0IGJhc2UgPSB0LnR5cGUgPyBjYXAodC50eXBlKSA6IFwiVW5rbm93blwiO1xuICAgICAgICAgIGNvbnN0IHRhZ3MgPSBBcnJheS5pc0FycmF5KHQudGFncykgPyB0LnRhZ3MubWFwKGNhcCkgOiBbXTtcbiAgICAgICAgICByZXR1cm4gdGFncy5sZW5ndGggPyBgJHtiYXNlfSAoJHt0YWdzLmpvaW4oXCIsIFwiKX0pYCA6IGJhc2U7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgfVxuICAgIH0sXG5cblxuICAvLyBcdTI1MDBcdTI1MDBcdTI1MDAgSXRlbXMgXHUyNTAwXHUyNTAwXHUyNTAwXG4gIHsgY2FsbFNpZ246IFwiVFlQRVwiLCAgIGpzb25LZXk6IFwiX3BhcnNlZFR5cGVcIiB9LFxuICB7IGNhbGxTaWduOiBcIlJBUklUWVwiLCBqc29uS2V5OiBcInJhcml0eVwiLCBjb252OiByID0+IHtcbiAgICAgIGNvbnN0IHMgPSBTdHJpbmcocnx8XCJcIikudG9Mb3dlckNhc2UoKTtcbiAgICAgIHJldHVybiBzICYmIHMhPT1cIm5vbmVcIiA/IHNbMF0udG9VcHBlckNhc2UoKStzLnNsaWNlKDEpIDogdW5kZWZpbmVkO1xuICB9fSxcbiAge1xuICAgIGNhbGxTaWduOiBcIkNPU1RcIixcbiAgICBqc29uS2V5OiBcInZhbHVlXCIsXG4gICAgY29udjogKHJhdzogYW55KSA9PiB7XG4gICAgICBjb25zdCBzID0gU3RyaW5nKHJhdykudHJpbSgpLnRvTG93ZXJDYXNlKCk7XG4gICAgICBsZXQgbnVtOiBudW1iZXI7XG5cbiAgICAgIC8vIGV4cGxpY2l0IGNvcHBlcj9cbiAgICAgIGlmIChzLmVuZHNXaXRoKFwiY3BcIikpIHtcbiAgICAgICAgbnVtID0gcGFyc2VGbG9hdChzKTtcbiAgICAgICAgLy8gY29udmVydCB0byBncCBvbmx5IGlmIDEwMCsgY3BcbiAgICAgICAgcmV0dXJuIG51bSA+PSAxMDBcbiAgICAgICAgICA/IGAke01hdGgucm91bmQoKG51bS8xMDApICogMTAwKS8xMDB9Z3BgXG4gICAgICAgICAgOiBgJHtudW19Y3BgO1xuICAgICAgfVxuXG4gICAgICAvLyBleHBsaWNpdCBzaWx2ZXI/XG4gICAgICBpZiAocy5lbmRzV2l0aChcInNwXCIpKSB7XG4gICAgICAgIG51bSA9IHBhcnNlRmxvYXQocyk7XG4gICAgICAgIC8vIGNvbnZlcnQgdG8gZ3Agb25seSBpZiAxMCsgc3BcbiAgICAgICAgcmV0dXJuIG51bSA+PSAxMFxuICAgICAgICAgID8gYCR7TWF0aC5yb3VuZCgobnVtLzEwKSAqIDEwMCkvMTAwfWdwYFxuICAgICAgICAgIDogYCR7bnVtfXNwYDtcbiAgICAgIH1cblxuICAgICAgLy8gZXhwbGljaXQgZ29sZD9cbiAgICAgIGlmIChzLmVuZHNXaXRoKFwiZ3BcIikpIHtcbiAgICAgICAgbnVtID0gcGFyc2VGbG9hdChzKTtcbiAgICAgICAgcmV0dXJuIGAke01hdGgucm91bmQobnVtICogMTAwKS8xMDB9Z3BgO1xuICAgICAgfVxuXG4gICAgICAvLyBiYXJlIG51bWJlciBcdTIxOTIgYXNzdW1lIGNvcHBlclxuICAgICAgbnVtID0gcGFyc2VGbG9hdChzKSB8fCAwO1xuICAgICAgcmV0dXJuIG51bSA+PSAxMDBcbiAgICAgICAgPyBgJHtNYXRoLnJvdW5kKChudW0vMTAwKSAqIDEwMCkvMTAwfWdwYFxuICAgICAgICA6IGAke251bX1jcGA7XG4gICAgfVxuICB9LFxuICB7IGNhbGxTaWduOiBcIldFSUdIVFwiLCBqc29uS2V5OiBcIndlaWdodFwiIH0sXG4gIHsgY2FsbFNpZ246IFwiTUFHSUNBTFwiLCBqc29uS2V5OiBcIndvbmRyb3VzXCIsIGNvbnY6IChfdyxhbGwpID0+ICEhYWxsLndvbmRyb3VzIHx8ICEhYWxsLnJlcUF0dHVuZSB9LFxuICB7IGNhbGxTaWduOiBcIlZBUklBTlRcIiwganNvbktleTogXCJib251c1dlYXBvblwiLCBjb252OiBiID0+IHR5cGVvZiBiPT09XCJzdHJpbmdcIiAmJiBiLnN0YXJ0c1dpdGgoXCIrXCIpIH0sXG4gIHsgY2FsbFNpZ246IFwiUFJPUEVSVElFU1wiLCBqc29uS2V5OiBcInByb3BlcnR5XCIsIGNvbnY6IGFyciA9PiBBcnJheS5pc0FycmF5KGFycikgPyBhcnIubWFwKHAgPT4gUFJPUEVSVFlfTUFQW3BdIHx8IHApIDogW10gfSxcbiAgeyBjYWxsU2lnbjogXCJEQU1BR0VcIiwganNvbktleTogXCJkbWcxXCIsIGNvbnY6IChkLGFsbCkgPT4gZCA/IGFsbC5kbWcyID8gYCR7ZH0gLyAke2FsbC5kbWcyfWAgOiBgJHtkfWAgOiB1bmRlZmluZWQgfSxcbiAgeyBjYWxsU2lnbjogXCJEQU1BR0VfVFlQRVNcIiwganNvbktleTogXCJkbWdUeXBlXCIsIGNvbnY6IGR0ID0+IGR0ID09IG51bGwgPyBbXSA6IEFycmF5LmlzQXJyYXkoZHQpID8gZHQgOiBbZHRdIH0sXG4gIHsgY2FsbFNpZ246IFwiUkFOR0VcIiwganNvbktleTogXCJyYW5nZVwiIH0sXG4gIHsgY2FsbFNpZ246IFwiUkVMT0FEXCIsIGpzb25LZXk6IFwicmVsb2FkXCIgfSxcbiAgeyBjYWxsU2lnbjogXCJBTU1PX1RZUEVcIiwganNvbktleTogXCJhbW1vVHlwZVwiIH0sXG4gIHsgY2FsbFNpZ246IFwiU1RFQUxUSF9ESVNBRFZBTlRBR0VcIiwganNvbktleTogXCJzdGVhbHRoXCIgfSxcbiAge1xuICAgIGNhbGxTaWduOiBcIkFUVFVORU1FTlRcIixcbiAgICBqc29uS2V5OiBbXCJ3b25kcm91c1wiLCBcInJlcUF0dHVuZVwiLCBcInJlcV9hdHR1bmVcIiwgXCJyZXFBdHR1bmVUYWdzXCJdLFxuICAgIGNvbnY6IChfcmF3LCBhbGxKc29uKSA9PiB7XG4gICAgICBjb25zdCBqID0gYWxsSnNvbiBhcyBhbnk7XG4gICAgICBjb25zdCBoYXNUZXh0ID0gdHlwZW9mIGoucmVxQXR0dW5lID09PSBcInN0cmluZ1wiICYmIGoucmVxQXR0dW5lLnRyaW0oKSAhPT0gXCJcIjtcbiAgICAgIGNvbnN0IGhhc1RhZ3MgPSBBcnJheS5pc0FycmF5KGoucmVxQXR0dW5lVGFncykgJiYgai5yZXFBdHR1bmVUYWdzLmxlbmd0aCA+IDA7XG4gICAgICByZXR1cm4gaGFzVGV4dCB8fCBoYXNUYWdzO1xuICAgIH1cbiAgfSxcbiAge1xuICBjYWxsU2lnbjogXCJBVFRVTkVfUkVRXCIsXG4gIGpzb25LZXk6IFwicmVxQXR0dW5lVGFnc1wiLFxuICBjb252OiAodGFnczogYW55W10gPSBbXSwgX2FsbCkgPT4ge1xuICAgIGNvbnN0IG1hcExldHRlcjogUmVjb3JkPHN0cmluZyxzdHJpbmc+ID0ge1xuICAgICAgQTogXCJBbnlcIiwgVTogXCJVbmFsaWduZWRcIiwgTjogXCJOZXV0cmFsXCIsXG4gICAgICBMOiBcIkxhd2Z1bFwiLCBDOiBcIkNoYW90aWNcIiwgRzogXCJHb29kXCIsIEU6IFwiRXZpbFwiXG4gICAgfTtcbiAgICBjb25zdCByZXFzOiBzdHJpbmdbXSA9IFtdO1xuXG4gICAgZm9yIChjb25zdCB0YWcgb2YgdGFncykge1xuICAgICAgaWYgKHRhZy5jbGFzcyAmJiBBcnJheS5pc0FycmF5KHRhZy5hbGlnbm1lbnQpKSB7XG4gICAgICAgIGNvbnN0IGNscyA9IGNhcCh0YWcuY2xhc3MpO1xuICAgICAgICBmb3IgKGNvbnN0IGNvZGUgb2YgdGFnLmFsaWdubWVudCkge1xuICAgICAgICAgIHJlcXMucHVzaChgJHttYXBMZXR0ZXJbY29kZV0gfHwgY29kZX0gJHtjbHN9YCk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAodGFnLmNsYXNzKSB7XG4gICAgICAgIHJlcXMucHVzaChjYXAodGFnLmNsYXNzKSk7XG4gICAgICB9IGVsc2UgaWYgKEFycmF5LmlzQXJyYXkodGFnLmFsaWdubWVudCkpIHtcbiAgICAgICAgZm9yIChjb25zdCBjb2RlIG9mIHRhZy5hbGlnbm1lbnQpIHtcbiAgICAgICAgICByZXFzLnB1c2gobWFwTGV0dGVyW2NvZGVdIHx8IGNvZGUpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKHRhZy5iYWNrZ3JvdW5kKSB7XG4gICAgICAgIGNvbnN0IFtiZ10gPSBTdHJpbmcodGFnLmJhY2tncm91bmQpLnNwbGl0KFwifFwiKTtcbiAgICAgICAgcmVxcy5wdXNoKGJnLnNwbGl0KFwiIFwiKS5tYXAoY2FwKS5qb2luKFwiIFwiKSk7XG4gICAgICB9IGVsc2UgaWYgKHRhZy5zcGVsbGNhc3RpbmcpIHtcbiAgICAgICAgcmVxcy5wdXNoKFwiU3BlbGxjYXN0ZXJcIik7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIEFycmF5LmZyb20obmV3IFNldChyZXFzKSk7XG4gIH1cbn0sXG4gIC8vIFx1MjUwMFx1MjUwMFx1MjUwMCBPdGhlciBcdTI1MDBcdTI1MDBcdTI1MDBcbiAgeyBjYWxsU2lnbjogXCJEQU1BR0VfUkVTXCIsIGpzb25LZXk6IFwicmVzaXN0XCIsIGNvbnY6IHYgPT4gQXJyYXkuaXNBcnJheSh2KSA/IHYubWFwKGNhcCkgOiBbXSB9LFxuICB7IGNhbGxTaWduOiBcIlJVTEVTRVRcIiwganNvbktleTogXCJfZWRpdGlvbklkXCIgfSxcbiAgXG4gICAgLy8gXHUyNTAwXHUyNTAwXHUyNTAwIEFiaWxpdHlcdTIwMTBzY29yZSBtb2RpZmllcnMgKG9ubHkgZW1pdCB3aGVuIG5vbnplcm8pIFx1MjUwMFx1MjUwMFx1MjUwMFxuICB7XG4gICAgY2FsbFNpZ246IFwiU1RSX01PRFwiLFxuICAgIGpzb25LZXk6ICBcImFiaWxpdHlcIixcbiAgICBjb252OiAoYXJyOiBhbnkpOiBudW1iZXIgfCB1bmRlZmluZWQgPT4ge1xuICAgICAgY29uc3QgdiA9IEFycmF5LmlzQXJyYXkoYXJyKSA/IChhcnJbMF0uc3RyID8/IDApIDogKGFyci5zdHIgPz8gMCk7XG4gICAgICByZXR1cm4gdiAhPT0gMCA/IHYgOiB1bmRlZmluZWQ7XG4gICAgfSxcbiAgfSxcbiAge1xuICAgIGNhbGxTaWduOiBcIkRFWF9NT0RcIixcbiAgICBqc29uS2V5OiAgXCJhYmlsaXR5XCIsXG4gICAgY29udjogKGFycjogYW55KTogbnVtYmVyIHwgdW5kZWZpbmVkID0+IHtcbiAgICAgIGNvbnN0IHYgPSBBcnJheS5pc0FycmF5KGFycikgPyAoYXJyWzBdLmRleCA/PyAwKSA6IChhcnIuZGV4ID8/IDApO1xuICAgICAgcmV0dXJuIHYgIT09IDAgPyB2IDogdW5kZWZpbmVkO1xuICAgIH0sXG4gIH0sXG4gIHtcbiAgICBjYWxsU2lnbjogXCJDT05fTU9EXCIsXG4gICAganNvbktleTogIFwiYWJpbGl0eVwiLFxuICAgIGNvbnY6IChhcnI6IGFueSk6IG51bWJlciB8IHVuZGVmaW5lZCA9PiB7XG4gICAgICBjb25zdCB2ID0gQXJyYXkuaXNBcnJheShhcnIpID8gKGFyclswXS5jb24gPz8gMCkgOiAoYXJyLmNvbiA/PyAwKTtcbiAgICAgIHJldHVybiB2ICE9PSAwID8gdiA6IHVuZGVmaW5lZDtcbiAgICB9LFxuICB9LFxuICB7XG4gICAgY2FsbFNpZ246IFwiSU5UX01PRFwiLFxuICAgIGpzb25LZXk6ICBcImFiaWxpdHlcIixcbiAgICBjb252OiAoYXJyOiBhbnkpOiBudW1iZXIgfCB1bmRlZmluZWQgPT4ge1xuICAgICAgY29uc3QgdiA9IEFycmF5LmlzQXJyYXkoYXJyKSA/IChhcnJbMF0uaW50ID8/IDApIDogKGFyci5pbnQgPz8gMCk7XG4gICAgICByZXR1cm4gdiAhPT0gMCA/IHYgOiB1bmRlZmluZWQ7XG4gICAgfSxcbiAgfSxcbiAge1xuICAgIGNhbGxTaWduOiBcIldJU19NT0RcIixcbiAgICBqc29uS2V5OiAgXCJhYmlsaXR5XCIsXG4gICAgY29udjogKGFycjogYW55KTogbnVtYmVyIHwgdW5kZWZpbmVkID0+IHtcbiAgICAgIGNvbnN0IHYgPSBBcnJheS5pc0FycmF5KGFycikgPyAoYXJyWzBdLndpcyA/PyAwKSA6IChhcnIud2lzID8/IDApO1xuICAgICAgcmV0dXJuIHYgIT09IDAgPyB2IDogdW5kZWZpbmVkO1xuICAgIH0sXG4gIH0sXG4gIHtcbiAgICBjYWxsU2lnbjogXCJDSEFfTU9EXCIsXG4gICAganNvbktleTogIFwiYWJpbGl0eVwiLFxuICAgIGNvbnY6IChhcnI6IGFueSk6IG51bWJlciB8IHVuZGVmaW5lZCA9PiB7XG4gICAgICBjb25zdCB2ID0gQXJyYXkuaXNBcnJheShhcnIpID8gKGFyclswXS5jaGEgPz8gMCkgOiAoYXJyLmNoYSA/PyAwKTtcbiAgICAgIHJldHVybiB2ICE9PSAwID8gdiA6IHVuZGVmaW5lZDtcbiAgICB9LFxuICB9LFxuXG5cbl07XG5cblxuLy8gXHUyNTAwXHUyNTAwXHUyNTAwIEdlbmVyaWMgYnVpbGRlciBcdTI1MDBcdTI1MDBcdTI1MDBcbmV4cG9ydCBmdW5jdGlvbiBidWlsZEZNKGpzb246IGFueSwgZGVmczogRmllbGREZWZbXSk6IEZyb250bWF0dGVyIHtcbiAgY29uc3QgZm06IEZyb250bWF0dGVyID0ge307XG4gIGZvciAoY29uc3QgeyBjYWxsU2lnbiwganNvbktleSwgY29udiB9IG9mIGRlZnMpIHtcbiAgICBjb25zdCBrZXlzID0gQXJyYXkuaXNBcnJheShqc29uS2V5KSA/IGpzb25LZXkgOiBbanNvbktleV07XG4gICAgbGV0IHJhdzogYW55ID0gdW5kZWZpbmVkO1xuXG4gICAgZm9yIChjb25zdCBrZXkgb2Yga2V5cykge1xuICAgICAgaWYgKGpzb25ba2V5XSAhPSBudWxsKSB7XG4gICAgICAgIHJhdyA9IGpzb25ba2V5XTtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHJhdyA9PSBudWxsKSBjb250aW51ZTtcbiAgICBjb25zdCB2YWwgPSBjb252ID8gY29udihyYXcsIGpzb24pIDogcmF3O1xuICAgIGZtW0ZNX0ZJRUxEU1tjYWxsU2lnbl1dID0gdmFsO1xuICB9XG4gIHJldHVybiBmbTtcbn1cblxuLy8gZnJvbnRtYXR0ZXIudHNcblxuZXhwb3J0IGZ1bmN0aW9uIHNlcmlhbGl6ZUZyb250bWF0dGVyKFxuICBmbTogRnJvbnRtYXR0ZXIsXG4gIGRlZnM/OiBGaWVsZERlZltdXG4pOiBzdHJpbmcge1xuICBjb25zdCBmaWx0ZXJlZDogUmVjb3JkPHN0cmluZywgYW55PiA9IHt9O1xuXG4gIC8vIGRldGVjdCBpZiB3ZSBoYXZlIGFueSBhY3R1YWwgY2hvaWNlLWxpc3RzXG4gIGNvbnN0IGhhc1NraWxsQ2hvaWNlID0gQXJyYXkuaXNBcnJheShmbVtGTV9GSUVMRFMuU0tJTExfQ0hPSUNFX0xJU1RdKSBcbiAgICAmJiAoZm1bRk1fRklFTERTLlNLSUxMX0NIT0lDRV9MSVNUXSBhcyBhbnlbXSkubGVuZ3RoID4gMDtcbiAgY29uc3QgaGFzVG9vbENob2ljZSA9IEFycmF5LmlzQXJyYXkoZm1bRk1fRklFTERTLlRPT0xfQ0hPSUNFX0xJU1RdKSBcbiAgICAmJiAoZm1bRk1fRklFTERTLlRPT0xfQ0hPSUNFX0xJU1RdIGFzIGFueVtdKS5sZW5ndGggPiAwO1xuXG5cbiAgZm9yIChjb25zdCBbaywgdl0gb2YgT2JqZWN0LmVudHJpZXMoZm0pKSB7XG4gICAgLy8gMSkgbmV2ZXIgZW1pdCB1bmRlZmluZWRcbiAgICBpZiAodiA9PT0gdW5kZWZpbmVkKSBjb250aW51ZTtcbiAgICAvLyAyKSBkcm9wIGVtcHR5IENPTVBPTkVOVFMsIFRPT0xfQ0hPSUNFX0xJU1QsIFNLSUxMX0NIT0lDRV9MSVNUXG4gICAgaWYgKGsgPT09IEZNX0ZJRUxEUy5DT01QT05FTlRTICYmIEFycmF5LmlzQXJyYXkodikgJiYgdi5sZW5ndGggPT09IDApIGNvbnRpbnVlO1xuICAgIGlmIChcbiAgICAgIChrID09PSBGTV9GSUVMRFMuVE9PTF9DSE9JQ0VfTElTVCB8fCBrID09PSBGTV9GSUVMRFMuU0tJTExfQ0hPSUNFX0xJU1QpICYmXG4gICAgICBBcnJheS5pc0FycmF5KHYpICYmIHYubGVuZ3RoID09PSAwXG4gICAgKSBjb250aW51ZTtcblxuICAgIGZpbHRlcmVkW2tdID0gdjtcbiAgfVxuXG4gIC8vIGJ1aWxkIHRoZSBsaXN0IG9mIGtleXMgaW4gdGhlIGV4YWN0IG9yZGVyIGZyb20gZGVmc1xuICBsZXQga2V5c1RvRW1pdDogc3RyaW5nW107XG4gIGlmIChkZWZzKSB7XG4gICAgLy8gbWFwIGVhY2ggRmllbGREZWYgdG8gaXRzIGZyb250bWF0dGVyIGtleVxuICAgIGNvbnN0IHdhbnRlZCA9IGRlZnMubWFwKGQgPT4gRk1fRklFTERTW2QuY2FsbFNpZ25dKTtcbiAgICAvLyBvbmx5IGtlZXAgdGhlIG9uZXMgd2UgYWN0dWFsbHkgaGF2ZSwgaW4gb3JkZXJcbiAgICBrZXlzVG9FbWl0ID0gd2FudGVkLmZpbHRlcihrID0+IGsgaW4gZmlsdGVyZWQpO1xuICAgIC8vIHRoZW4gYXBwZW5kIGFueSBleHRyYSBrZXlzIHRoYXQgd2VyZW4ndCBpbiBkZWZzXG4gICAga2V5c1RvRW1pdC5wdXNoKFxuICAgICAgLi4uT2JqZWN0LmtleXMoZmlsdGVyZWQpLmZpbHRlcihrID0+ICFrZXlzVG9FbWl0LmluY2x1ZGVzKGspKVxuICAgICk7XG4gIH0gZWxzZSB7XG4gICAga2V5c1RvRW1pdCA9IE9iamVjdC5rZXlzKGZpbHRlcmVkKTtcbiAgfVxuXG4gIC8vIG5vdyBlbWl0IFlBTUwgaW4gdGhhdCBvcmRlclxuICByZXR1cm4ga2V5c1RvRW1pdFxuICAgIC5tYXAoayA9PiB7XG4gICAgICBjb25zdCB2ID0gZmlsdGVyZWRba107XG4gICAgICBpZiAoQXJyYXkuaXNBcnJheSh2KSkge1xuICAgICAgICAvLyBKU09OLnN0cmluZ2lmeSB0byBoYW5kbGUgc3BhY2VzLCBjb21tYXMsIGV0Yy5cbiAgICAgICAgY29uc3QgaW5saW5lID0gdi5tYXAoaXRlbSA9PiBKU09OLnN0cmluZ2lmeShpdGVtKSkuam9pbihcIiwgXCIpO1xuICAgICAgICByZXR1cm4gYCR7a306IFske2lubGluZX1dYDtcbiAgICAgIH1cbiAgICAgIGlmICh0eXBlb2YgdiA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICByZXR1cm4gYCR7a306IFwiJHt2fVwiYDtcbiAgICAgIH1cbiAgICAgIHJldHVybiBgJHtrfTogJHt2fWA7XG4gICAgfSlcbiAgICAuam9pbihcIlxcblwiKTtcbn1cblxuXG4vLyBcdTI1MDBcdTI1MDBcdTI1MDAgU2tpbGwgaGVscGVycyBcdTI1MDBcdTI1MDBcdTI1MDBcbmV4cG9ydCBjb25zdCBTS0lMTF9PUFRJT05TID0gW1xuICBcIkFjcm9iYXRpY3NcIixcIkFuaW1hbCBIYW5kbGluZ1wiLFwiQXJjYW5hXCIsXCJBdGhsZXRpY3NcIixcIkRlY2VwdGlvblwiLFwiSGlzdG9yeVwiLFxuICBcIkluc2lnaHRcIixcIkludGltaWRhdGlvblwiLFwiSW52ZXN0aWdhdGlvblwiLFwiTWVkaWNpbmVcIixcIk5hdHVyZVwiLFwiUGVyY2VwdGlvblwiLFxuICBcIlBlcmZvcm1hbmNlXCIsXCJQZXJzdWFzaW9uXCIsXCJSZWxpZ2lvblwiLFwiU2xlaWdodCBvZiBIYW5kXCIsXCJTdGVhbHRoXCIsXCJTdXJ2aXZhbFwiLFxuXSBhcyBjb25zdDtcbmV4cG9ydCB0eXBlIFNraWxsT3B0aW9uID0gdHlwZW9mIFNLSUxMX09QVElPTlNbbnVtYmVyXTtcbmV4cG9ydCBmdW5jdGlvbiBub3JtYWxpemVTa2lsbChyYXc6IHN0cmluZyk6IFNraWxsT3B0aW9uIHwgbnVsbCB7XG4gIGNvbnN0IGxvd2VyID0gcmF3LnRyaW0oKS50b0xvd2VyQ2FzZSgpO1xuICByZXR1cm4gU0tJTExfT1BUSU9OUy5maW5kKHNraWxsID0+IHNraWxsLnRvTG93ZXJDYXNlKCkgPT09IGxvd2VyKSA/PyBudWxsO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGZpbHRlclZhbGlkU2tpbGxzKHJhd0FycjogYW55W10pOiBTa2lsbE9wdGlvbltdIHtcbiAgaWYgKCFBcnJheS5pc0FycmF5KHJhd0FycikpIHJldHVybiBbXTtcbiAgY29uc3Qgc2VlbiA9IG5ldyBTZXQ8U2tpbGxPcHRpb24+KCk7XG4gIGZvciAoY29uc3QgZW50IG9mIHJhd0Fycikge1xuICAgIGxldCBjYW5kaWRhdGU6IHN0cmluZyB8IHVuZGVmaW5lZDtcbiAgICBpZiAodHlwZW9mIGVudCA9PT0gXCJzdHJpbmdcIikgY2FuZGlkYXRlID0gZW50O1xuICAgIGVsc2UgaWYgKGVudC5uYW1lICYmIHR5cGVvZiBlbnQubmFtZSA9PT0gXCJzdHJpbmdcIikgY2FuZGlkYXRlID0gZW50Lm5hbWU7XG4gICAgaWYgKGNhbmRpZGF0ZSkge1xuICAgICAgY29uc3Qgbm9ybSA9IG5vcm1hbGl6ZVNraWxsKGNhbmRpZGF0ZSk7XG4gICAgICBpZiAobm9ybSkgc2Vlbi5hZGQobm9ybSk7XG4gICAgfVxuICB9XG4gIHJldHVybiBbLi4uc2Vlbl07XG59XG5cbi8vIFx1MjUwMFx1MjUwMFx1MjUwMCBXaGljaCBGTV9LRVlTIGVhY2ggcGFyc2VyIHNob3VsZCBpbmNsdWRlIFx1MjUwMFx1MjUwMFx1MjUwMFxuZXhwb3J0IGNvbnN0IFNQRUxMX0tFWVM6IEZNS2V5W10gPSBbXG4gIFwiTkFNRVwiLFxuICBcIkxFVkVMXCIsXG4gIFwiU0NIT09MXCIsXG4gIFwiQ0FTVElOR19USU1FXCIsXG4gIFwiU1BFTExfUkFOR0VcIixcbiAgXCJEVVJBVElPTlwiLFxuICBcIlZFUkJBTFwiLFxuICBcIlNPTUFUSUNcIixcbiAgXCJNQVRFUklBTFwiLFxuICBcIkNPTVBPTkVOVFNcIixcbiAgXCJDT05DRU5UUkFUSU9OXCIsXG4gIFwiU09VUkNFXCIsXG4gIFwiUlVMRVNFVFwiXG5dO1xuXG5leHBvcnQgY29uc3QgU1BFQ0lFU19LRVlTOiBGTUtleVtdID0gW1xuICBcIlNQRUNJRVNcIixcbiAgXCJTSVpFXCIsXG4gIFwiU1BFRURcIixcbiAgXCJMQU5HVUFHRVNcIixcbiAgXCJUUkFJVFNcIixcbiAgXCJTS0lMTFNcIixcbiAgXCJTVFJfTU9EXCIsXG4gIFwiREVYX01PRFwiLFxuICBcIkNPTl9NT0RcIixcbiAgXCJJTlRfTU9EXCIsXG4gIFwiV0lTX01PRFwiLFxuICBcIkNIQV9NT0RcIixcbiAgXCJTS0lMTF9DSE9JQ0VfTElTVFwiLFxuICBcIlRPT0xfUFJPRklDSUVOQ0lFU1wiLFxuICBcIlRPT0xfQ0hPSUNFX0xJU1RcIixcbiAgXCJXRUFQT05fUFJPRklDSUVOQ0lFU1wiLFxuICBcIlNFTlNFU1wiLFxuICBcIkRBTUFHRV9SRVNcIixcbiAgXCJTT1VSQ0VcIixcbiAgXCJSVUxFU0VUXCJcbl07XG5cbmV4cG9ydCBjb25zdCBJVEVNX0tFWVM6IEZNS2V5W10gPSBbXG4gIFwiTkFNRVwiLFxuICBcIlRZUEVcIixcbiAgXCJSQVJJVFlcIixcbiAgXCJDT1NUXCIsXG4gIFwiV0VJR0hUXCIsXG4gIFwiUFJPUEVSVElFU1wiLFxuICBcIkRBTUFHRVwiLFxuICBcIkRBTUFHRV9UWVBFU1wiLFxuICBcIlJBTkdFXCIsXG4gIFwiUkVMT0FEXCIsXG4gIFwiQU1NT19UWVBFXCIsXG4gIFwiQUNcIixcbiAgXCJTVEVBTFRIX0RJU0FEVkFOVEFHRVwiLFxuICBcIk1BR0lDQUxcIixcbiAgXCJBVFRVTkVNRU5UXCIsXG4gIFwiQVRUVU5FX1JFUVwiLFxuICBcIlNPVVJDRVwiLFxuICBcIlJVTEVTRVRcIlxuXTtcblxuZXhwb3J0IGNvbnN0IEJFU1RJQVJZX0tFWVM6IEZNS2V5W10gPSBbXG4gIFwiTkFNRVwiLFxuICBcIlNJWkVcIixcbiAgXCJUWVBFXCIsXG4gIFwiQUxJR05NRU5UXCIsXG4gIFwiQUNcIixcbiAgXCJIUFwiLFxuICBcIlNQRUVEXCIsXG4gIFwiU1RSRU5HVEhcIixcbiAgXCJERVhURVJJVFlcIixcbiAgXCJDT05TVElUVVRJT05cIixcbiAgXCJJTlRFTExJR0VOQ0VcIixcbiAgXCJXSVNET01cIixcbiAgXCJDSEFSSVNNQVwiLFxuICBcIlNBVklOR19USFJPV1NcIixcbiAgXCJTS0lMTFNcIixcbiAgXCJTRU5TRVNcIixcbiAgXCJMQU5HVUFHRVNcIixcbiAgXCJDSEFMTEVOR0VfUkFUSU5HXCIsXG4gIFwiU09VUkNFXCIsXG4gIFwiUlVMRVNFVFwiXG5dO1xuXG5leHBvcnQgY29uc3QgQ0xBU1NfS0VZUzogRk1LZXlbXSA9IFtcbiAgXCJOQU1FXCIsXG4gIFwiU1BFTExfQ0FTVF9NT0RcIixcbiAgXCJBUk1PUl9QUk9GSUNJRU5DSUVTXCIsXG4gIFwiV0VBUE9OX1BST0ZJQ0lFTkNJRVNcIixcbiAgXCJUT09MX1BST0ZJQ0lFTkNJRVNcIixcbiAgXCJUT09MX0NIT0lDRV9MSVNUXCIsXG4gIFwiU0FWSU5HX1RIUk9XU1wiLFxuICBcIlNLSUxMU1wiLFxuICBcIlNLSUxMX0NIT0lDRV9MSVNUXCIsXG4gIFwiVFJBSVRTXCIsXG4gIFwiU09VUkNFXCIsXG4gIFwiUlVMRVNFVFwiXG5dO1xuXG5leHBvcnQgY29uc3QgQkFDS0dST1VORF9LRVlTOiBGTUtleVtdID0gW1xuICBcIk5BTUVcIixcbiAgXCJTS0lMTFNcIixcbiAgXCJTS0lMTF9DSE9JQ0VfTElTVFwiLCAgXG4gIFwiVE9PTF9QUk9GSUNJRU5DSUVTXCIsXG4gIFwiVE9PTF9DSE9JQ0VfTElTVFwiLFxuICBcIlRSQUlUU1wiLFxuICBcIlNPVVJDRVwiLFxuICBcIlJVTEVTRVRcIlxuXTtcblxuZXhwb3J0IGNvbnN0IEZFQVRTX0tFWVM6IEZNS2V5W10gPSBbXG4gIFwiU09VUkNFXCIsXG4gIFwiUlVMRVNFVFwiXG5dO1xuXG4vLyBcdTI1MDBcdTI1MDBcdTI1MDAgRmllbGQgc3Vic2V0cyBmb3IgZWFjaCBwYXJzZXIgXHUyNTAwXHUyNTAwXHUyNTAwXG5leHBvcnQgY29uc3QgU1BFTExfTUVUQV9ERUZTOiBGaWVsZERlZltdID0gU1BFTExfS0VZUy5tYXAoa2V5ID0+IHtcbiAgY29uc3QgZGVmID0gQUxMX0ZJRUxEX0RFRlMuZmluZChkID0+IGQuY2FsbFNpZ24gPT09IGtleSk7XG4gIGlmICghZGVmKSB0aHJvdyBuZXcgRXJyb3IoYE1pc3NpbmcgRmllbGREZWYgZm9yIFNQRUxMX0tFWSAke2tleX1gKTtcbiAgcmV0dXJuIGRlZjtcbn0pO1xuZXhwb3J0IGNvbnN0IFNQRUNJRVNfTUVUQV9ERUZTOiBGaWVsZERlZltdID0gU1BFQ0lFU19LRVlTLm1hcChrZXkgPT4ge1xuICBjb25zdCBkZWYgPSBBTExfRklFTERfREVGUy5maW5kKGQgPT4gZC5jYWxsU2lnbiA9PT0ga2V5KTtcbiAgaWYgKCFkZWYpIHRocm93IG5ldyBFcnJvcihgTWlzc2luZyBGaWVsZERlZiBmb3IgU1BFQ0lFU19LRVkgJHtrZXl9YCk7XG4gIHJldHVybiBkZWY7XG59KTtcbmV4cG9ydCBjb25zdCBJVEVNX01FVEFfREVGUzogRmllbGREZWZbXSA9IElURU1fS0VZUy5tYXAoa2V5ID0+IHtcbiAgY29uc3QgZGVmID0gQUxMX0ZJRUxEX0RFRlMuZmluZChkID0+IGQuY2FsbFNpZ24gPT09IGtleSk7XG4gIGlmICghZGVmKSB0aHJvdyBuZXcgRXJyb3IoYE1pc3NpbmcgRmllbGREZWYgZm9yIElURU1fS0VZICR7a2V5fWApO1xuICByZXR1cm4gZGVmO1xufSk7XG5leHBvcnQgY29uc3QgQkVTVElBUllfTUVUQV9ERUZTOiBGaWVsZERlZltdID0gQkVTVElBUllfS0VZUy5tYXAoa2V5ID0+IHtcbiAgY29uc3QgZGVmID0gQUxMX0ZJRUxEX0RFRlMuZmluZChkID0+IGQuY2FsbFNpZ24gPT09IGtleSk7XG4gIGlmICghZGVmKSB0aHJvdyBuZXcgRXJyb3IoYE1pc3NpbmcgRmllbGREZWYgZm9yIEJFU1RJQVJZX0tFWSAke2tleX1gKTtcbiAgcmV0dXJuIGRlZjtcbn0pO1xuZXhwb3J0IGNvbnN0IENMQVNTX01FVEFfREVGUzogRmllbGREZWZbXSA9IENMQVNTX0tFWVMubWFwKGtleSA9PiB7XG4gIGNvbnN0IGRlZiA9IEFMTF9GSUVMRF9ERUZTLmZpbmQoZCA9PiBkLmNhbGxTaWduID09PSBrZXkpO1xuICBpZiAoIWRlZikgdGhyb3cgbmV3IEVycm9yKGBNaXNzaW5nIEZpZWxkRGVmIGZvciBDTEFTU19LRVkgJHtrZXl9YCk7XG4gIHJldHVybiBkZWY7XG59KTtcbmV4cG9ydCBjb25zdCBCQUNLR1JPVU5EX01FVEFfREVGUzogRmllbGREZWZbXSA9IEJBQ0tHUk9VTkRfS0VZUy5tYXAoa2V5ID0+IHtcbiAgY29uc3QgZGVmID0gQUxMX0ZJRUxEX0RFRlMuZmluZChkID0+IGQuY2FsbFNpZ24gPT09IGtleSk7XG4gIGlmICghZGVmKSB0aHJvdyBuZXcgRXJyb3IoYE1pc3NpbmcgRmllbGREZWYgZm9yIEJBQ0tHUk9VTkRfS0VZICR7a2V5fWApO1xuICByZXR1cm4gZGVmO1xufSk7XG5leHBvcnQgY29uc3QgRkVBVFNfTUVUQV9ERUZTOiBGaWVsZERlZltdID0gRkVBVFNfS0VZUy5tYXAoa2V5ID0+IHtcbiAgY29uc3QgZGVmID0gQUxMX0ZJRUxEX0RFRlMuZmluZChkID0+IGQuY2FsbFNpZ24gPT09IGtleSk7XG4gIGlmICghZGVmKSB0aHJvdyBuZXcgRXJyb3IoYE1pc3NpbmcgRmllbGREZWYgZm9yIEJBQ0tHUk9VTkRfS0VZICR7a2V5fWApO1xuICByZXR1cm4gZGVmO1xufSk7IiwgImltcG9ydCB0eXBlIHsgUGFyc2VkTWFya2Rvd25GaWxlIH0gZnJvbSBcInNyYy90eXBlc1wiO1xuaW1wb3J0IHsgcmVwbGFjZTVlVGFncyB9IGZyb20gXCIuL2hlbHBlcnMvdGFnUmVwbGFjZXJcIjtcbmltcG9ydCB7IGdldEZ1bGxTb3VyY2VOYW1lIH0gZnJvbSBcIi4vaGVscGVycy9zb3VyY2VNYXBcIjtcbmltcG9ydCB7IHJlbmRlck1hcmtkb3duVGFibGUgfSBmcm9tIFwiLi9oZWxwZXJzL21hcmtkb3duVGFibGVcIjtcbmltcG9ydCB7IGZvcm1hdEVudHJ5IH0gZnJvbSBcIi4vaGVscGVycy9mb3JtYXRFbnRyeVwiO1xuaW1wb3J0IHsgYnVpbGRGTSwgc2VyaWFsaXplRnJvbnRtYXR0ZXIsIFNQRUxMX01FVEFfREVGUyB9IGZyb20gXCIuL2hlbHBlcnMvZnJvbnRtYXR0ZXJcIjtcblxuXG5leHBvcnQgY29uc3QgU0NIT09MX01BUDogUmVjb3JkPHN0cmluZywgc3RyaW5nPiA9IHtcbiAgQTogXCJBYmp1cmF0aW9uXCIsXG4gIEM6IFwiQ29uanVyYXRpb25cIixcbiAgRDogXCJEaXZpbmF0aW9uXCIsXG4gIEU6IFwiRW5jaGFudG1lbnRcIixcbiAgVjogXCJFdm9jYXRpb25cIixcbiAgSTogXCJJbGx1c2lvblwiLFxuICBOOiBcIk5lY3JvbWFuY3lcIixcbiAgVDogXCJUcmFuc211dGF0aW9uXCIsXG59O1xuXG5mdW5jdGlvbiBvcmRpbmFsKG46IG51bWJlcik6IHN0cmluZyB7XG4gIGNvbnN0IHN1ZmZpeCA9IChuID09PSAxKSA/IFwic3RcIiA6IChuID09PSAyKSA/IFwibmRcIiA6IChuID09PSAzKSA/IFwicmRcIiA6IFwidGhcIjtcbiAgcmV0dXJuIGAke259JHtzdWZmaXh9YDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGZvcm1hdFJhbmdlKHJhbmdlOiBhbnkpOiBzdHJpbmcge1xuICBpZiAoIXJhbmdlKSByZXR1cm4gXCJcIjtcblxuICBpZiAodHlwZW9mIHJhbmdlID09PSBcInN0cmluZ1wiKSByZXR1cm4gcmFuZ2U7XG5cbiAgaWYgKHJhbmdlLnR5cGUgPT09IFwic3BlY2lhbFwiKSByZXR1cm4gXCJTcGVjaWFsXCI7XG4gIGlmIChyYW5nZS50eXBlID09PSBcInBvaW50XCIgJiYgcmFuZ2UuZGlzdGFuY2UpIHtcbiAgICBjb25zdCBkaXN0ID0gcmFuZ2UuZGlzdGFuY2U7XG4gICAgaWYgKGRpc3QudHlwZSA9PT0gXCJ0b3VjaFwiKSByZXR1cm4gXCJUb3VjaFwiO1xuICAgIGlmIChkaXN0LnR5cGUgPT09IFwic2VsZlwiKSByZXR1cm4gXCJTZWxmXCI7XG4gICAgaWYgKGRpc3QudHlwZSA9PT0gXCJzaWdodFwiKSByZXR1cm4gXCJTaWdodFwiO1xuICAgIGlmIChkaXN0LmFtb3VudCkgcmV0dXJuIGAke2Rpc3QuYW1vdW50fSAke2Rpc3QudHlwZX1gO1xuICB9XG5cbiAgcmV0dXJuIFwiVmFyaWVzXCI7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBmb3JtYXRUaW1lKHRpbWU6IGFueVtdKTogc3RyaW5nIHtcbiAgaWYgKCFBcnJheS5pc0FycmF5KHRpbWUpKSByZXR1cm4gXCJcIjtcblxuICByZXR1cm4gdGltZS5tYXAodCA9PiBgJHt0Lm51bWJlcn0gJHt0LnVuaXR9YCkuam9pbihcIiwgXCIpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZm9ybWF0RHVyYXRpb24oZHVyYXRpb246IGFueVtdKTogc3RyaW5nIHtcbiAgaWYgKCFBcnJheS5pc0FycmF5KGR1cmF0aW9uKSkgcmV0dXJuIFwiXCI7XG5cbiAgcmV0dXJuIGR1cmF0aW9uLm1hcChkID0+IHtcbiAgICBpZiAoZC50eXBlID09PSBcImluc3RhbnRcIikgcmV0dXJuIFwiSW5zdGFudGFuZW91c1wiO1xuICAgIGlmIChkLnR5cGUgPT09IFwidGltZWRcIiAmJiBkLmR1cmF0aW9uKSB7XG4gICAgICByZXR1cm4gYCR7ZC5kdXJhdGlvbi5hbW91bnR9ICR7ZC5kdXJhdGlvbi50eXBlfSR7ZC5jb25jZW50cmF0aW9uID8gXCIgKGNvbmNlbnRyYXRpb24pXCIgOiBcIlwifWA7XG4gICAgfVxuICAgIGlmIChkLnR5cGUgPT09IFwicGVybWFuZW50XCIpIHJldHVybiBcIlBlcm1hbmVudFwiO1xuICAgIHJldHVybiBcIlNwZWNpYWxcIjtcbiAgfSkuam9pbihcIiwgXCIpO1xufVxuLy8gaW4gcGFyc2Vycy81ZS1qc29uL3BhcnNlU3BlbGxzRmlsZS50cyAob3Igd2hlcmV2ZXIgZm9ybWF0Q29tcG9uZW50cyBsaXZlcylcblxuZnVuY3Rpb24gZm9ybWF0Q29tcG9uZW50cyhjb21wb25lbnRzOiBhbnkpOiBzdHJpbmcge1xuICBpZiAoIWNvbXBvbmVudHMpIHJldHVybiBcIlwiO1xuXG4gIGNvbnN0IHBhcnRzOiBzdHJpbmdbXSA9IFtdO1xuXG4gIGlmIChjb21wb25lbnRzLnYpIHBhcnRzLnB1c2goXCJWXCIpO1xuICBpZiAoY29tcG9uZW50cy5zKSBwYXJ0cy5wdXNoKFwiU1wiKTtcblxuICBpZiAoY29tcG9uZW50cy5tKSB7XG4gICAgLy8gcHVsbCBvdXQgdGhlIGFjdHVhbCBtYXRlcmlhbCB0ZXh0KHMpXG4gICAgbGV0IG1hdERldGFpbHM6IHN0cmluZ1tdID0gW107XG5cbiAgICBpZiAoQXJyYXkuaXNBcnJheShjb21wb25lbnRzLm0pKSB7XG4gICAgICBtYXREZXRhaWxzID0gY29tcG9uZW50cy5tXG4gICAgICAgIC5tYXAoKGl0ZW06YW55KSA9PlxuICAgICAgICAgIHR5cGVvZiBpdGVtID09PSBcInN0cmluZ1wiXG4gICAgICAgICAgICA/IGl0ZW1cbiAgICAgICAgICAgIDogaXRlbSAmJiB0eXBlb2YgaXRlbS50ZXh0ID09PSBcInN0cmluZ1wiXG4gICAgICAgICAgICA/IGl0ZW0udGV4dFxuICAgICAgICAgICAgOiBudWxsXG4gICAgICAgIClcbiAgICAgICAgLmZpbHRlcigodDphbnkpOiB0IGlzIHN0cmluZyA9PiAhIXQpO1xuICAgIH0gZWxzZSBpZiAodHlwZW9mIGNvbXBvbmVudHMubSA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgbWF0RGV0YWlscyA9IFtjb21wb25lbnRzLm1dO1xuICAgIH0gZWxzZSBpZiAoY29tcG9uZW50cy5tLnRleHQpIHtcbiAgICAgIG1hdERldGFpbHMgPSBbY29tcG9uZW50cy5tLnRleHRdO1xuICAgIH1cblxuICAgIC8vIGJ1aWxkIHRoZSBcdTIwMUNNXHUyMDFEIGVudHJ5LCBhcHBlbmRpbmcgZGV0YWlscyBpZiBhbnlcbiAgICBjb25zdCBtYXRQYXJ0ID1cbiAgICAgIG1hdERldGFpbHMubGVuZ3RoID4gMFxuICAgICAgICA/IGBNICgke21hdERldGFpbHMuam9pbihcIiwgXCIpfSlgXG4gICAgICAgIDogXCJNXCI7XG5cbiAgICBwYXJ0cy5wdXNoKG1hdFBhcnQpO1xuICB9XG5cbiAgcmV0dXJuIHBhcnRzLmpvaW4oXCIsIFwiKTtcbn1cblxuXG5leHBvcnQgZnVuY3Rpb24gcGFyc2VTcGVsbHNGaWxlKGpzb246IGFueSwgZWRpdGlvbklkOiBzdHJpbmcpOiBQYXJzZWRNYXJrZG93bkZpbGVbXSB7XG4gIGlmICghanNvbi5zcGVsbCkgcmV0dXJuIFtdO1xuXG4gIC8vIG1ha2UgZWRpdGlvbklkIGF2YWlsYWJsZSBmb3Igb3VyIFNPVVJDRSBjb252ZXJ0ZXJcbiAgKGpzb24gYXMgYW55KS5fZWRpdGlvbklkID0gZWRpdGlvbklkO1xuXG4gIHJldHVybiBqc29uLnNwZWxsLm1hcCgoc3BlbGw6IGFueSkgPT4ge1xuICAgIC8vIFx1MjAxNCBnYXRoZXIgZGF0YSBmb3IgaGVhZGVyL2JvZHkvZm9vdGVyIGFzIGJlZm9yZSBcdTIwMTRcbiAgICBjb25zdCBzb3VyY2VzID0gc3BlbGwuc291cmNlXG4gICAgICA/IEFycmF5LmlzQXJyYXkoc3BlbGwuc291cmNlKSA/IHNwZWxsLnNvdXJjZSA6IFtzcGVsbC5zb3VyY2VdXG4gICAgICA6IFtcInVua25vd25cIl07XG4gICAgY29uc3QgbmFtZSA9IHNwZWxsLm5hbWU7XG4gICAgY29uc3Qgc2Nob29sID0gU0NIT09MX01BUFtzcGVsbC5zY2hvb2xdID8/IHNwZWxsLnNjaG9vbDtcbiAgICBjb25zdCBsZXZlbCA9IHNwZWxsLmxldmVsO1xuICAgIGNvbnN0IHJhbmdlID0gZm9ybWF0UmFuZ2Uoc3BlbGwucmFuZ2UpO1xuICAgIGNvbnN0IGNhc3RpbmdUaW1lID0gZm9ybWF0VGltZShzcGVsbC50aW1lKTtcbiAgICBjb25zdCBkdXJhdGlvbiA9IGZvcm1hdER1cmF0aW9uKHNwZWxsLmR1cmF0aW9uKTtcbiAgICBjb25zdCBmb3JtYXR0ZWRTb3VyY2VzID0gc291cmNlcy5tYXAoKHM6IHN0cmluZykgPT4gZ2V0RnVsbFNvdXJjZU5hbWUocywgZWRpdGlvbklkKSk7XG5cbiAgICBjb25zdCBhdHRhY2tUeXBlID0gc3BlbGwuYXR0YWNrVHlwZSB8fCBcIlwiO1xuICAgIGNvbnN0IGRhbWFnZVR5cGUgPSBzcGVsbC5kYW1hZ2VJbmZsaWN0Py5bMF0gfHwgXCJUZWxlcG9ydGF0aW9uXCI7XG4gICAgY29uc3Qgcml0dWFsID0gc3BlbGwucml0dWFsID09PSB0cnVlO1xuICAgIGNvbnN0IGNvbmNlbnRyYXRpb24gPSBzcGVsbC5kdXJhdGlvbj8uc29tZSgoZDogYW55KSA9PiBkLmNvbmNlbnRyYXRpb24pID8/IGZhbHNlO1xuXG5jb25zdCBGTSAgID0gYnVpbGRGTShzcGVsbCwgU1BFTExfTUVUQV9ERUZTKTtcbmNvbnN0IHlhbWwgPSBzZXJpYWxpemVGcm9udG1hdHRlcihGTSwgU1BFTExfTUVUQV9ERUZTKTtcblxuICAgIC8vIFx1MjAxNCB0aXRsZS9zdWJ0aXRsZSBhbmQgYm9keSBsYXlvdXQgXHUyMDE0XG4gICAgY29uc3Qgc2FmZU5hbWUgPSBuYW1lLnJlcGxhY2UoL1xcLy9nLCBcIi1cIik7XG4gICAgY29uc3QgdGl0bGUgPSBgIyAke25hbWV9YDtcbiAgICBjb25zdCBsZXZlbExhYmVsID1cbiAgICAgIGxldmVsID09PSAwXG4gICAgICAgID8gYCR7c2Nob29sfSBDYW50cmlwYFxuICAgICAgICA6IGAke29yZGluYWwobGV2ZWwpfS1sZXZlbCAke3NjaG9vbH0gU3BlbGxgO1xuICAgIGNvbnN0IHN1YnRpdGxlID0gYCMjIyAqJHtsZXZlbExhYmVsfSoke2NvbmNlbnRyYXRpb24gPyBcIiAqKENvbmNlbnRyYXRpb24pKlwiIDogXCJcIn1gO1xuXG4gICAgY29uc3QgaGVhZGVyTGluZXMgPSBbXG4gICAgICB0aXRsZSxcbiAgICAgIHN1YnRpdGxlLFxuICAgICAgYCoqQ2FzdGluZyBUaW1lOioqICR7Y2FzdGluZ1RpbWV9YCxcbiAgICAgIGAqKlJhbmdlOioqICR7cmFuZ2V9YCxcbiAgICAgIGAqKkNvbXBvbmVudHM6KiogJHtmb3JtYXRDb21wb25lbnRzKHNwZWxsLmNvbXBvbmVudHMpfWAsXG4gICAgICBgKipEdXJhdGlvbjoqKiAke2R1cmF0aW9ufWAsXG4gICAgXTtcblxuICAgIGNvbnN0IGJvZHlMaW5lcyA9IFtcbiAgICAgIC4uLigoc3BlbGwuZW50cmllcyA/PyBbXSkubWFwKChlOiBhbnkpID0+IGZvcm1hdEVudHJ5KGUpKSksXG4gICAgICAuLi4oKHNwZWxsLmVudHJpZXNIaWdoZXJMZXZlbCA/PyBbXSkubWFwKChlOiBhbnkpID0+IGZvcm1hdEVudHJ5KGUpKSksXG4gICAgXTtcblxuICAgIGNvbnN0IGZvb3RlckxpbmVzID0gW1xuICAgICAgYC0tLWAsXG4gICAgICBgKipTb3VyY2U6KiogJHtmb3JtYXR0ZWRTb3VyY2VzLmpvaW4oXCIsIFwiKX1gLFxuICAgIF07XG5cbiAgICAvLyBcdTIwMTQgYXNzZW1ibGUgdGhlIG5vdGUgd2l0aCBZQU1MIGZyb250bWF0dGVyIFx1MjAxNFxuICAgIHJldHVybiB7XG4gICAgICBwYXRoOiBgJHtzYWZlTmFtZX0ubWRgLFxuICAgICAgY29udGVudDogW1xuICAgICAgICBgLS0tXFxuJHt5YW1sfVxcbi0tLWAsXG4gICAgICAgIGhlYWRlckxpbmVzLmpvaW4oXCJcXG5cIiksXG4gICAgICAgIGBgLFxuICAgICAgICBib2R5TGluZXMuam9pbihcIlxcblxcblwiKSxcbiAgICAgICAgYGAsXG4gICAgICAgIGZvb3RlckxpbmVzLmpvaW4oXCJcXG5cIiksXG4gICAgICBdLmpvaW4oXCJcXG5cIiksXG4gICAgfTtcbiAgfSk7XG59XG5cbiIsICJpbXBvcnQgdHlwZSB7IFBhcnNlZE1hcmtkb3duRmlsZSB9IGZyb20gXCIuLi8uLi90eXBlc1wiO1xuaW1wb3J0IHsgcmVwbGFjZTVlVGFncyB9IGZyb20gXCIuL2hlbHBlcnMvdGFnUmVwbGFjZXJcIjtcbmltcG9ydCB7XG4gIGJ1aWxkRk0sXG4gIHNlcmlhbGl6ZUZyb250bWF0dGVyLFxuICBGTV9GSUVMRFMsXG4gIFNQRUNJRVNfTUVUQV9ERUZTLFxuICBTSVpFX01BUCxcbn0gZnJvbSBcIi4vaGVscGVycy9mcm9udG1hdHRlclwiO1xuaW1wb3J0IHsgcmVuZGVyTWFya2Rvd25UYWJsZSB9IGZyb20gXCIuL2hlbHBlcnMvbWFya2Rvd25UYWJsZVwiO1xuaW1wb3J0IHsgZm9ybWF0RW50cnkgfSBmcm9tIFwiLi9oZWxwZXJzL2Zvcm1hdEVudHJ5XCI7XG5cbmZ1bmN0aW9uIHNsdWcobmFtZTogc3RyaW5nKTogc3RyaW5nIHtcbiAgcmV0dXJuIG5hbWVcbiAgICAucmVwbGFjZSgvOy9nLCBcIjpcIikgICAgICAgLy8gc2VtaWNvbG9uIFx1MjE5MiBkYXNoXG4gICAgLnJlcGxhY2UoL1tcXC86XCJdL2csIFwiOlwiKSAgLy8gc2xhc2gsIGNvbG9uLCBxdW90ZSBcdTIxOTIgZGFzaFxuICAgIC50cmltKCk7XG59XG5cbmNvbnN0IEJMT0NLRURfVFJBSVRTID0gW1wiQWdlXCIsIFwiU2l6ZVwiLCBcIkxhbmd1YWdlc1wiLCBcIkNyZWF0dXJlIFR5cGVcIiwgXCJTcGVlZFwiXTtcblxuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlU3BlY2llc0ZpbGUoXG4gIGpzb246IHsgcmFjZTogYW55W107IHN1YnJhY2U/OiBhbnlbXTsgX2VkaXRpb25JZD86IHN0cmluZyB9LFxuICBlZGl0aW9uSWQ6IHN0cmluZ1xuKTogUGFyc2VkTWFya2Rvd25GaWxlW10ge1xuICBpZiAoIUFycmF5LmlzQXJyYXkoanNvbi5yYWNlKSkgcmV0dXJuIFtdO1xuICBqc29uLl9lZGl0aW9uSWQgPSBlZGl0aW9uSWQ7XG5cbiAgLy8gMSkgRmlsdGVyIG91dCByZXByaW50c1xuICBjb25zdCByYXdWYXJpYW50cyA9IGpzb24ucmFjZS5maWx0ZXIoKHI6IGFueSkgPT5cbiAgICAhKFwicmVwcmludGVkQXNcIiBpbiByKSAmJlxuICAgICEvXFwoKD86S2FsYWRlc2h8WmVuZGlrYXJ8QW1vbmtoZXR8SW5uaXN0cmFkfEl4YWxhbilcXCkkLy50ZXN0KHIubmFtZSlcbiAgKTtcblxuICAvLyAyKSBHcm91cCBieSByYWNlIG5hbWVcbiAgY29uc3QgYnlOYW1lID0gbmV3IE1hcDxzdHJpbmcsIGFueVtdPigpO1xuICBmb3IgKGNvbnN0IHIgb2YgcmF3VmFyaWFudHMpIHtcbiAgICBjb25zdCBsaXN0ID0gYnlOYW1lLmdldChyLm5hbWUpID8/IFtdO1xuICAgIGxpc3QucHVzaChyKTtcbiAgICBieU5hbWUuc2V0KHIubmFtZSwgbGlzdCk7XG4gIH1cblxuICAvLyAzKSBBbGwgc3VicmFjZXMgYXJyYXlcbiAgY29uc3Qgc3VicmFjZXNMaXN0ID0gQXJyYXkuaXNBcnJheShqc29uLnN1YnJhY2UpID8ganNvbi5zdWJyYWNlIDogW107XG5cbiAgY29uc3Qgb3V0OiBQYXJzZWRNYXJrZG93bkZpbGVbXSA9IFtdO1xuXG4gIC8vIDQpIE1haW4gbG9vcCBvdmVyIGVhY2ggc3BlY2llc1xuICBmb3IgKGNvbnN0IFtyYWNlTmFtZSwgcmFjZVZhcmlhbnRzXSBvZiBieU5hbWUuZW50cmllcygpKSB7XG4gICAgY29uc3Qgc2FmZU5hbWUgPSBzbHVnKHJhY2VOYW1lKTtcblxuICAgIC8vIHBpY2sgdGhlIFx1MjAxQ2Z1bGxlc3RcdTIwMUQgdmFyaWFudCBhcyBwcmltYXJ5XG4gICAgY29uc3QgcHJpbWFyeSA9IHJhY2VWYXJpYW50cy5yZWR1Y2UoXG4gICAgICAoYmVzdCwgY3VyKSA9PlxuICAgICAgICBPYmplY3Qua2V5cyhjdXIpLmxlbmd0aCA+IE9iamVjdC5rZXlzKGJlc3QpLmxlbmd0aCA/IGN1ciA6IGJlc3QsXG4gICAgICByYWNlVmFyaWFudHNbMF1cbiAgICApO1xuXG4gICAgLy8gb25lXHUyMDEwb2ZmOiBncmFmdCBIdW1hbiBhYmlsaXR5IGlmIG1pc3NpbmdcbiAgICBpZiAoIXByaW1hcnkuYWJpbGl0eSkge1xuICAgICAgY29uc3QgaHVtYW5FbnRyeSA9IHN1YnJhY2VzTGlzdC5maW5kKChzcjogYW55KSA9PlxuICAgICAgICBzci5yYWNlTmFtZSA9PT0gcmFjZU5hbWUgJiZcbiAgICAgICAgc3IucmFjZVNvdXJjZSA9PT0gcHJpbWFyeS5zb3VyY2UgJiZcbiAgICAgICAgIShcIm5hbWVcIiBpbiBzcikgJiZcbiAgICAgICAgQXJyYXkuaXNBcnJheShzci5hYmlsaXR5KVxuICAgICAgKTtcbiAgICAgIGlmIChodW1hbkVudHJ5KSBwcmltYXJ5LmFiaWxpdHkgPSBodW1hbkVudHJ5LmFiaWxpdHk7XG4gICAgfVxuXG4gICAgLy8gYnVpbGQgZnJvbnRtYXR0ZXJcbiAgICBjb25zdCBmbSA9IGJ1aWxkRk0ocHJpbWFyeSwgU1BFQ0lFU19NRVRBX0RFRlMpO1xuICAgIGNvbnN0IHNlbnNlczogc3RyaW5nW10gPSBbXTtcbiAgICBpZiAocHJpbWFyeS5kYXJrdmlzaW9uKSAgc2Vuc2VzLnB1c2goYERhcmt2aXNpb24gJHtwcmltYXJ5LmRhcmt2aXNpb259IGZ0LmApO1xuICAgIGlmIChwcmltYXJ5LmJsaW5kc2lnaHQpICBzZW5zZXMucHVzaChgQmxpbmRzaWdodCAke3ByaW1hcnkuYmxpbmRzaWdodH0gZnQuYCk7XG4gICAgaWYgKHByaW1hcnkudHJlbW9yc2Vuc2UpIHNlbnNlcy5wdXNoKGBUcmVtb3JzZW5zZSAke3ByaW1hcnkudHJlbW9yc2Vuc2V9IGZ0LmApO1xuICAgIGlmIChwcmltYXJ5LnRydWVzaWdodCkgICBzZW5zZXMucHVzaChgVHJ1ZXNpZ2h0ICR7cHJpbWFyeS50cnVlc2lnaHR9IGZ0LmApO1xuICAgIGlmIChzZW5zZXMubGVuZ3RoKSBmbS5zZW5zZXMgPSBzZW5zZXM7XG4gICAgaWYgKEFycmF5LmlzQXJyYXkoZm0udHJhaXRzKSkge1xuICAgICAgZm0udHJhaXRzID0gZm0udHJhaXRzLmZpbHRlcih0ID0+ICFCTE9DS0VEX1RSQUlUUy5pbmNsdWRlcyh0KSk7XG4gICAgfVxuICAgIGNvbnN0IHlhbWwgPSBzZXJpYWxpemVGcm9udG1hdHRlcihmbSwgU1BFQ0lFU19NRVRBX0RFRlMpO1xuXG4gICAgLy8gYnVpbGQgc3BlY2llcyBib2R5XG4gICAgY29uc3QgbGluZXM6IHN0cmluZ1tdID0gW107XG4gICAgbGluZXMucHVzaChgIyAke3JhY2VOYW1lfWAsIGAjIyBTdGF0c2ApO1xuXG4gICAgLy8gU2l6ZVxuICAgIGNvbnN0IHNpemUgPSBBcnJheS5pc0FycmF5KHByaW1hcnkuc2l6ZSlcbiAgICAgID8gcHJpbWFyeS5zaXplLm1hcCgoczogc3RyaW5nKSA9PiBTSVpFX01BUFtzXSB8fCBzKS5qb2luKFwiL1wiKVxuICAgICAgOiBTSVpFX01BUFtwcmltYXJ5LnNpemVdID8/IHByaW1hcnkuc2l6ZTtcbiAgICBsaW5lcy5wdXNoKGAqKlNpemU6KiogJHtzaXplfWApO1xuXG4gICAgLy8gU3BlZWRcbiAgICBjb25zdCBzcGVlZCA9IHR5cGVvZiBwcmltYXJ5LnNwZWVkID09PSBcIm51bWJlclwiXG4gICAgICA/IHByaW1hcnkuc3BlZWRcbiAgICAgIDogcHJpbWFyeS5zcGVlZD8ud2FsayA/PyBwcmltYXJ5LnNwZWVkPy5iYXNlID8/IDA7XG4gICAgbGluZXMucHVzaChgKipTcGVlZDoqKiAke3NwZWVkfSBmdC4gd2Fsa2luZ2ApO1xuXG4gICAgLy8gQWJpbGl0aWVzXG4gICAgY29uc3Qga2lkcyA9IHN1YnJhY2VzTGlzdC5maWx0ZXIoc3IgPT5cbiAgICAgIHNyLm5hbWUgJiYgc3IucmFjZU5hbWUgPT09IHJhY2VOYW1lICYmIHNyLnJhY2VTb3VyY2UgPT09IHByaW1hcnkuc291cmNlXG4gICAgKTtcbiAgICBjb25zdCByYXdBYmlsaXR5ID0gQXJyYXkuaXNBcnJheShwcmltYXJ5LmFiaWxpdHkpXG4gICAgICA/IHByaW1hcnkuYWJpbGl0eVxuICAgICAgOiBBcnJheS5pc0FycmF5KGtpZHNbMF0/LmFiaWxpdHkpID8ga2lkc1swXS5hYmlsaXR5IDogW107XG4gICAgaWYgKEFycmF5LmlzQXJyYXkocmF3QWJpbGl0eSkgJiYgcmF3QWJpbGl0eS5sZW5ndGgpIHtcbiAgICAgIGNvbnN0IGJvbnVzZXMgPSB7IHN0cjowLGRleDowLGNvbjowLGludDowLHdpczowLGNoYTowIH07XG4gICAgICBsZXQgY2hvb3NlT3B0OiBhbnkgPSBudWxsO1xuICAgICAgZm9yIChjb25zdCBvYmogb2YgcmF3QWJpbGl0eSkge1xuICAgICAgICBpZiAoXCJjaG9vc2VcIiBpbiBvYmopIGNob29zZU9wdCA9IG9iai5jaG9vc2U7XG4gICAgICAgIGVsc2UgZm9yIChjb25zdCBbayx2XSBvZiBPYmplY3QuZW50cmllcyhvYmopKSAoYm9udXNlcyBhcyBhbnkpW2tdICs9IHYgYXMgbnVtYmVyO1xuICAgICAgfVxuICAgICAgY29uc3QgcGFpcnMgPSBPYmplY3QuZW50cmllcyhib251c2VzKSBhcyBbc3RyaW5nLG51bWJlcl1bXTtcbiAgICAgIGNvbnN0IHBhcnRzID0gcGFpcnMuZmlsdGVyKChbLHZdKT0+diE9PTApLm1hcCgoW2ssdl0pPT5gJHtrLnRvVXBwZXJDYXNlKCl9ICR7dj49MD9cIitcIjpcIlwifSR7dn1gKTtcbiAgICAgIGlmIChjaG9vc2VPcHQ/LmNvdW50ICYmIEFycmF5LmlzQXJyYXkoY2hvb3NlT3B0LmZyb20pKSB7XG4gICAgICAgIHBhcnRzLnB1c2goYENIT09TRSAke2Nob29zZU9wdC5jb3VudH0gZnJvbSAke2Nob29zZU9wdC5mcm9tLm1hcCgoczpzdHJpbmcpPT5zLnRvVXBwZXJDYXNlKCkpLmpvaW4oXCIsIFwiKX1gKTtcbiAgICAgIH1cbiAgICAgIGlmIChwYXJ0cy5sZW5ndGgpIGxpbmVzLnB1c2goYCoqQWJpbGl0eSBTY29yZXM6KiogJHtwYXJ0cy5qb2luKFwiLCBcIil9YCk7XG4gICAgfVxuXG4gICAgLy8gTGFuZ3VhZ2VzXG4gICAgY29uc3QgbGFuZ3MgPSBmbS5sYW5ndWFnZXMgYXMgc3RyaW5nW118dW5kZWZpbmVkO1xuICAgIGlmIChsYW5ncz8ubGVuZ3RoKSBsaW5lcy5wdXNoKGAqKkxhbmd1YWdlczoqKiAke2xhbmdzLmpvaW4oXCIsIFwiKX1gKTtcblxuICAgIC8vIFNraWxsc1xuICAgIGlmIChBcnJheS5pc0FycmF5KHByaW1hcnkuc2tpbGxQcm9maWNpZW5jaWVzKSkge1xuICAgICAgY29uc3Qgc2tpbGxMYWJlbHM6IHN0cmluZ1tdID0gW107XG4gICAgICBmb3IgKGNvbnN0IGUgb2YgcHJpbWFyeS5za2lsbFByb2ZpY2llbmNpZXMgYXMgYW55W10pIHtcbiAgICAgICAgaWYgKGUuY2hvb3NlPy5mcm9tKSB7XG4gICAgICAgICAgc2tpbGxMYWJlbHMucHVzaChgQ2hvb3NlIGZyb206ICR7ZS5jaG9vc2UuZnJvbS5tYXAoKHM6c3RyaW5nKT0+cy5jaGFyQXQoMCkudG9VcHBlckNhc2UoKStzLnNsaWNlKDEpKS5qb2luKFwiLCBcIil9YCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY29uc3QgdmFsID0gZS5wcm9maWNpZW5jeSA/PyBlLm5hbWUgPz8gZTtcbiAgICAgICAgICBpZiAodHlwZW9mIHZhbCA9PT0gXCJzdHJpbmdcIikgc2tpbGxMYWJlbHMucHVzaCh2YWwuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkrdmFsLnNsaWNlKDEpKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKHNraWxsTGFiZWxzLmxlbmd0aCkgbGluZXMucHVzaChgKipTa2lsbCBQcm9maWNpZW5jaWVzOioqICR7c2tpbGxMYWJlbHMuam9pbihcIjsgXCIpfWApO1xuICAgIH1cblxuICAgIC8vIFRvb2wgLyBXZWFwb24gLyBBcm1vclxuICAgIGNvbnN0IHRwID0gZm1bRk1fRklFTERTLlRPT0xfUFJPRklDSUVOQ0lFU10gYXMgc3RyaW5nW118dW5kZWZpbmVkO1xuICAgIGNvbnN0IHdwID0gZm1bRk1fRklFTERTLldFQVBPTl9QUk9GSUNJRU5DSUVTXSBhcyBzdHJpbmdbXXx1bmRlZmluZWQ7XG4gICAgY29uc3QgYXAgPSBmbVtGTV9GSUVMRFMuQVJNT1JfUFJPRklDSUVOQ0lFU10gYXMgc3RyaW5nW118dW5kZWZpbmVkO1xuICAgIGlmICh0cD8ubGVuZ3RoKSBsaW5lcy5wdXNoKGAqKlRvb2wgUHJvZmljaWVuY2llczoqKiAke3RwLmpvaW4oXCIsIFwiKX1gKTtcbiAgICBpZiAod3A/Lmxlbmd0aCkgbGluZXMucHVzaChgKipXZWFwb24gUHJvZmljaWVuY2llczoqKiAke3dwLmpvaW4oXCIsIFwiKX1gKTtcbiAgICBpZiAoYXA/Lmxlbmd0aCkgbGluZXMucHVzaChgKipBcm1vciBQcm9maWNpZW5jaWVzOioqICR7YXAuam9pbihcIiwgXCIpfWApO1xuXG4gICAgLy8gVHJhaXRzXG4gICAgbGluZXMucHVzaChgIyMgVHJhaXRzYCk7XG4gICAgY29uc3Qgc2VlbiA9IG5ldyBTZXQ8c3RyaW5nPigpO1xuICAgIGZvciAoY29uc3QgdHJhaXQgb2YgZm0udHJhaXRzIGFzIHN0cmluZ1tdfHxbXSkge1xuICAgICAgbGluZXMucHVzaChgIyMjIyMgJHt0cmFpdH1gKTtcbiAgICAgIGNvbnN0IGVudCA9IHByaW1hcnkuZW50cmllcz8uZmluZCgoZTphbnkpPT5lLm5hbWU9PT10cmFpdCk7XG4gICAgICBpZiAoZW50Py5lbnRyaWVzKSB7XG4gICAgICAgIGVudC5lbnRyaWVzLmZvckVhY2goKHN1YjphbnksaWR4Om51bWJlcik9PntcbiAgICAgICAgICBsZXQgYmxrOnN0cmluZ3x1bmRlZmluZWQ7XG4gICAgICAgICAgaWYgKHN1Yi50eXBlPT09XCJ0YWJsZVwiKSAgICAgICBibGsgPSByZW5kZXJNYXJrZG93blRhYmxlKHN1Yik7XG4gICAgICAgICAgZWxzZSBpZiAoc3ViLnR5cGU9PT1cImxpc3RcIikgICBibGsgPSBzdWIuaXRlbXMubWFwKChpdDphbnkpPT50eXBlb2YgaXQ9PT1cInN0cmluZ1wiP2AtICR7cmVwbGFjZTVlVGFncyhpdCl9YDpgLSAke2l0Lm5hbWV9YCApLmpvaW4oXCJcXG5cIik7XG4gICAgICAgICAgZWxzZSBpZiAodHlwZW9mIHN1Yj09PVwic3RyaW5nXCIpIGJsayA9IHJlcGxhY2U1ZVRhZ3Moc3ViKTtcbiAgICAgICAgICBpZiAoYmxrICYmICFzZWVuLmhhcyhibGspKSB7XG4gICAgICAgICAgICBsaW5lcy5wdXNoKGJsayk7XG4gICAgICAgICAgICBzZWVuLmFkZChibGspO1xuICAgICAgICAgICAgaWYgKGVudC5lbnRyaWVzLmxlbmd0aD4xICYmIGlkeDxlbnQuZW50cmllcy5sZW5ndGgtMSkgbGluZXMucHVzaChcIlwiKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIFx1MjUwMFx1MjUwMFx1MjUwMCBOb3cgYnJhbmNoIG9uIHN1YnJhY2VzIFx1MjUwMFx1MjUwMFx1MjUwMFxuICAgIGNvbnN0IHN1YnMgPSBraWRzOyAgLy8gYWxyZWFkeSBmaWx0ZXJlZFxuICAgIGlmIChzdWJzLmxlbmd0aCkge1xuICAgICAgLy8gMSkgbWFpbiBmaWxlIGluIGZvbGRlclxuICAgICAgb3V0LnB1c2goe1xuICAgICAgICBwYXRoOiBgU3BlY2llcy8ke3NhZmVOYW1lfS8ke3NhZmVOYW1lfS5tZGAsXG4gICAgICAgIGNvbnRlbnQ6IGAtLS1cXG4ke3lhbWx9XFxuLS0tXFxuXFxuJHtsaW5lcy5qb2luKFwiXFxuXCIpfWAsXG4gICAgICB9KTtcblxuICAgICAgLy8gMikgZWFjaCBzdWJzcGVjaWVzXG4gICAgICBjb25zdCBzdWJGb2xkZXIgPSBgU3BlY2llcy8ke3NhZmVOYW1lfS9TdWJzcGVjaWVzYDtcbiAgICAgIGZvciAoY29uc3Qgc3Igb2Ygc3Vicykge1xuICAgICAgICAvLyB0dXJuIHNlbWljb2xvbnMgXHUyMTkyIGNvbG9uc1xuICAgICAgICBjb25zdCBkaXNwbGF5ID0gc3IubmFtZS5yZXBsYWNlKC87L2csIFwiOlwiKTtcbiAgICAgICAgY29uc3Qgc3ViTGluZXM6IHN0cmluZ1tdID0gW2AjICR7ZGlzcGxheX1gXTtcblxuICAgICAgICAvLyBjb3B5IFN0YXRzIGJsb2NrIGlmIHlvdSBsaWtlOlxuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShzci5hYmlsaXR5KSkge1xuICAgICAgICAgIGNvbnN0IGJvbnVzZXMgPSB7IHN0cjowLGRleDowLGNvbjowLGludDowLHdpczowLGNoYTowIH07XG4gICAgICAgICAgbGV0IGNob29zZU9wdDphbnkgPSBudWxsO1xuICAgICAgICAgIGZvciAoY29uc3Qgb2JqIG9mIHNyLmFiaWxpdHkpIHtcbiAgICAgICAgICAgIGlmIChcImNob29zZVwiIGluIG9iaikgY2hvb3NlT3B0ID0gb2JqLmNob29zZTtcbiAgICAgICAgICAgIGVsc2UgZm9yIChjb25zdCBbayx2XSBvZiBPYmplY3QuZW50cmllcyhvYmopKSAoYm9udXNlcyBhcyBhbnkpW2tdKz12IGFzIG51bWJlcjtcbiAgICAgICAgICB9XG4gICAgICAgICAgY29uc3QgcGFpcnMgPSBPYmplY3QuZW50cmllcyhib251c2VzKSBhcyBbc3RyaW5nLG51bWJlcl1bXTtcbiAgICAgICAgICBjb25zdCBwYXJ0cyA9IHBhaXJzLmZpbHRlcigoWyx2XSk9PnYhPT0wKS5tYXAoKFtrLHZdKT0+YCR7ay50b1VwcGVyQ2FzZSgpfSAke3Y+PTA/XCIrXCI6XCJcIn0ke3Z9YCk7XG4gICAgICAgICAgaWYgKGNob29zZU9wdD8uY291bnQpIHBhcnRzLnB1c2goYENIT09TRSAke2Nob29zZU9wdC5jb3VudH0gZnJvbSAkeyhjaG9vc2VPcHQuZnJvbSBhcyBzdHJpbmdbXSkubWFwKHM9PnMudG9VcHBlckNhc2UoKSkuam9pbihcIiwgXCIpfWApO1xuICAgICAgICAgIGlmIChwYXJ0cy5sZW5ndGgpIHN1YkxpbmVzLnB1c2goYCoqQWJpbGl0eSBTY29yZXM6KiogJHtwYXJ0cy5qb2luKFwiLCBcIil9YCk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyB0aGVuIHRyYWl0cy9lbnRyaWVzXG4gICAgICAgIGZvciAoY29uc3QgZW50cnkgb2Ygc3IuZW50cmllcyB8fCBbXSkge1xuICAgICAgICAgIHN1YkxpbmVzLnB1c2goZm9ybWF0RW50cnkoZW50cnkpKTtcbiAgICAgICAgICBzdWJMaW5lcy5wdXNoKFwiXCIpOyAvLyBvcHRpb25hbCBibGFuayBsaW5lIGJldHdlZW4gZmVhdHVyZXNcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHN1YllhbWwgPSBzZXJpYWxpemVGcm9udG1hdHRlcihidWlsZEZNKHNyLCBTUEVDSUVTX01FVEFfREVGUyksIFNQRUNJRVNfTUVUQV9ERUZTKTtcbiAgICAgICAgb3V0LnB1c2goe1xuICAgICAgICAgIHBhdGg6IGAke3N1YkZvbGRlcn0vJHtzbHVnKHNyLm5hbWUpfS5tZGAsXG4gICAgICAgICAgY29udGVudDogYC0tLVxcbiR7c3ViWWFtbH1cXG4tLS1cXG5cXG4ke3N1YkxpbmVzLmpvaW4oXCJcXG5cIil9YCxcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIG5vIHN1YnJhY2VzIFx1MjFEMiBhIHNpbmdsZSBmbGF0IGZpbGVcbiAgICAgIG91dC5wdXNoKHtcbiAgICAgICAgcGF0aDogYFNwZWNpZXMvJHtzYWZlTmFtZX0ubWRgLFxuICAgICAgICBjb250ZW50OiBgLS0tXFxuJHt5YW1sfVxcbi0tLVxcblxcbiR7bGluZXMuam9pbihcIlxcblwiKX1gLFxuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgLy8gNSkgU29ydCAmIHJldHVyblxuICByZXR1cm4gb3V0LnNvcnQoKGEsIGIpID0+IGEucGF0aC5sb2NhbGVDb21wYXJlKGIucGF0aCkpO1xufVxuIiwgImltcG9ydCB0eXBlIHsgUGFyc2VkTWFya2Rvd25GaWxlIH0gZnJvbSBcIi4uLy4uL3R5cGVzXCI7XG5pbXBvcnQgeyBcbiAgYnVpbGRGTSwgXG4gIHNlcmlhbGl6ZUZyb250bWF0dGVyLCBcbiAgQ0xBU1NfTUVUQV9ERUZTLCBcbiAgdW5pZmllZFRvb2xQcm9mcywgXG4gIHVuaWZpZWRXZWFwb25Qcm9mcywgXG4gIFNraWxsT3B0aW9uLFxuICB1bmlmaWVkU2tpbGxzLFxuICBTS0lMTF9PUFRJT05TLCBcbiAgRk1fRklFTERTXG59IGZyb20gXCIuL2hlbHBlcnMvZnJvbnRtYXR0ZXJcIjtcbmltcG9ydCB7IHJlbmRlck1hcmtkb3duVGFibGUgfSBmcm9tIFwiLi9oZWxwZXJzL21hcmtkb3duVGFibGVcIjtcbmltcG9ydCB7IHJlcGxhY2U1ZVRhZ3MgfSBmcm9tIFwiLi9oZWxwZXJzL3RhZ1JlcGxhY2VyXCI7XG5pbXBvcnQgeyBmb3JtYXRFbnRyeSB9IGZyb20gXCIuL2hlbHBlcnMvZm9ybWF0RW50cnlcIjtcblxuZnVuY3Rpb24gZm9ybWF0RmVhdHVyZUxpbmsobmFtZTogc3RyaW5nKTogc3RyaW5nIHtcbiAgICBjb25zdCBpZ25vcmUgPSBbXCJBYmlsaXR5IFNjb3JlIEltcHJvdmVtZW50XCIsIFwiQXJjaGV0eXBlIEZlYXR1cmVcIiwgXCJTdWJjbGFzcyBGZWF0dXJlXCJdO1xuICAgIGlmIChpZ25vcmUuc29tZShzdWIgPT4gbmFtZS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKHN1Yi50b0xvd2VyQ2FzZSgpKSkpIHtcbiAgICAgIHJldHVybiBuYW1lO1xuICAgIH1cbiAgXG4gICAgY29uc3QgYW5jaG9yID0gbmFtZVxuICAgICAgLnJlcGxhY2UoL1teXFx3XFxzXS9nLCBcIlwiKSAgICAgICAgICAgLy8gcmVtb3ZlIHB1bmN0dWF0aW9uIChrZWVwIHNwYWNlcylcbiAgICAgIC5yZXBsYWNlKC8tL2csIFwiIFwiKSAgICAgICAgICAgICAgICAvLyByZW1vdmUgZGFzaGVzXG4gICAgICAucmVwbGFjZSgvXFxzKy9nLCBcIiBcIikgICAgICAgICAgICAgIC8vIG5vcm1hbGl6ZSB3aGl0ZXNwYWNlXG4gICAgICAudHJpbSgpXG4gICAgICAucmVwbGFjZSgvXFxiXFx3L2csIGwgPT4gbC50b1VwcGVyQ2FzZSgpKTsgLy8gY2FwaXRhbGl6ZSB3b3Jkc1xuICBcbiAgICByZXR1cm4gYFtbIyR7YW5jaG9yfV1dYDtcbiAgfVxuICBcbmV4cG9ydCBjb25zdCBPUFRfRkVBVFVSRV9UWVBFX1RPX0ZVTEw6IFJlY29yZDxzdHJpbmcsc3RyaW5nPiA9IHtcbiAgQUk6ICAgXCJBcnRpZmljZXIgSW5mdXNpb25cIixcbiAgRUQ6ICAgXCJFbGVtZW50YWwgRGlzY2lwbGluZVwiLFxuICBFSTogICBcIkVsZHJpdGNoIEludm9jYXRpb25cIixcbiAgTU06ICAgXCJNZXRhbWFnaWNcIixcbiAgTVY6ICAgXCJNYW5ldXZlclwiLFxuICBcIk1WOkJcIjogICAgXCJNYW5ldXZlciwgQmF0dGxlIE1hc3RlclwiLFxuICBcIk1WOkMyLVVBXCI6XCJNYW5ldXZlciwgQ2F2YWxpZXIgVjIgKFVBKVwiLFxuICBcIkFTOlYxLVVBXCI6XCJBcmNhbmUgU2hvdCwgVjEgKFVBKVwiLFxuICBcIkFTOlYyLVVBXCI6XCJBcmNhbmUgU2hvdCwgVjIgKFVBKVwiLFxuICBBUzogICBcIkFyY2FuZSBTaG90XCIsXG4gIE9USDogIFwiT3RoZXJcIixcbiAgXCJGUzpGXCI6XCJGaWdodGluZyBTdHlsZTsgRmlnaHRlclwiLFxuICBcIkZTOkJcIjpcIkZpZ2h0aW5nIFN0eWxlOyBCYXJkXCIsXG4gIFwiRlM6UFwiOlwiRmlnaHRpbmcgU3R5bGU7IFBhbGFkaW5cIixcbiAgXCJGUzpSXCI6XCJGaWdodGluZyBTdHlsZTsgUmFuZ2VyXCIsXG4gIFBCOiAgIFwiUGFjdCBCb29uXCIsXG4gIE9SOiAgIFwiT25vbWFuY3kgUmVzb25hbnRcIixcbiAgUk46ICAgXCJSdW5lIEtuaWdodCBSdW5lXCIsXG4gIEFGOiAgIFwiQWxjaGVtaWNhbCBGb3JtdWxhXCIsXG4gIFRUOiAgIFwiVHJhdmVsZXIncyBUcmlja1wiLFxufTtcbiAgXG4gIGZ1bmN0aW9uIHJlbmRlckVudHJpZXMoZW50cmllczogYW55W10pOiBzdHJpbmcge1xuICAgIHJldHVybiBlbnRyaWVzLm1hcCgoZW50cnkpID0+IHtcbiAgICAgIGlmICh0eXBlb2YgZW50cnkgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgcmV0dXJuIHJlcGxhY2U1ZVRhZ3MoZW50cnkpO1xuICAgICAgfVxuICBcbiAgICAgIGlmICh0eXBlb2YgZW50cnkgPT09IFwib2JqZWN0XCIpIHtcbiAgICAgICAgaWYgKGVudHJ5LnR5cGUgPT09IFwicmVmQ2xhc3NGZWF0dXJlXCIpIHtcbiAgICAgICAgICBjb25zdCBbbmFtZV0gPSBlbnRyeS5jbGFzc0ZlYXR1cmUuc3BsaXQoXCJ8XCIpO1xuICAgICAgICAgIHJldHVybiBgKlNlZSBmZWF0dXJlOiAqKiR7bmFtZX0qKipgO1xuICAgICAgICB9XG4gIFxuICAgICAgICBpZiAoZW50cnkudHlwZSA9PT0gXCJlbnRyaWVzXCIgJiYgZW50cnkubmFtZSkge1xuICAgICAgICAgIGNvbnN0IGlubmVyID0gcmVuZGVyRW50cmllcyhlbnRyeS5lbnRyaWVzIHx8IFtdKTtcbiAgICAgICAgICByZXR1cm4gYCoqJHtlbnRyeS5uYW1lfSoqXFxuXFxuJHtpbm5lcn1gO1xuICAgICAgICB9XG4gIFxuICAgICAgICBpZiAoZW50cnkudHlwZSA9PT0gXCJpbnNldFwiICYmIGVudHJ5Lm5hbWUpIHtcbiAgICAgICAgICBjb25zdCBpbm5lciA9IHJlbmRlckVudHJpZXMoZW50cnkuZW50cmllcyB8fCBbXSk7XG4gICAgICAgICAgcmV0dXJuIGA+ICoqJHtlbnRyeS5uYW1lfSoqXFxuPlxcbj4gJHtpbm5lci5zcGxpdChcIlxcblwiKS5qb2luKFwiXFxuPiBcIil9YDtcbiAgICAgICAgfVxuICBcbiAgICAgICAgLy8gZmFsbGJhY2tcbiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoZW50cnkuZW50cmllcykpIHtcbiAgICAgICAgICByZXR1cm4gcmVuZGVyRW50cmllcyhlbnRyeS5lbnRyaWVzKTtcbiAgICAgICAgfVxuICAgICAgfVxuICBcbiAgICAgIHJldHVybiBcIlwiO1xuICAgIH0pLmZpbHRlcihCb29sZWFuKS5qb2luKFwiXFxuXCIpO1xuICB9XG4gIFxuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlQ2xhc3NGaWxlKFxuICBqc29uOiBhbnksXG4gIGVkaXRpb25JZDogc3RyaW5nLFxuICBmaWxlTmFtZTogc3RyaW5nLFxuICBvcHRpb25hbEZlYXR1cmVzOiBhbnlbXVxuKTogUGFyc2VkTWFya2Rvd25GaWxlW10ge1xuICAvLyBtYWtlIGVkaXRpb25JZCBhdmFpbGFibGUgZm9yIGZyb250bWF0dGVyXG4gIChqc29uIGFzIGFueSkuX2VkaXRpb25JZCA9IGVkaXRpb25JZDtcblxuICAvLyB1bndyYXAgdGhlIHJlYWwgY2xhc3MgcmVjb3JkXG4gIGNvbnN0IGNscyA9IEFycmF5LmlzQXJyYXkoanNvbi5jbGFzcykgPyBqc29uLmNsYXNzWzBdIDoganNvbjtcbiAgLy8gZGVyaXZlIHRoZSBNYXJrZG93biBmaWxlbmFtZVxuICBjb25zdCBjbGFzc05hbWUgPVxuICAgIHR5cGVvZiBjbHMubmFtZSA9PT0gXCJzdHJpbmdcIlxuICAgICAgPyBjbHMubmFtZVxuICAgICAgOiBmaWxlTmFtZVxuICAgICAgPyBmaWxlTmFtZS5yZXBsYWNlKC9eY2xhc3MtLywgXCJcIikucmVwbGFjZSgvXFwuanNvbiQvLCBcIlwiKVxuICAgICAgOiBcIlVua25vd25cIjtcblxuICBjb25zdCBzdWJjbGFzc0ZpbGVzOiBQYXJzZWRNYXJrZG93bkZpbGVbXSA9IFtdO1xuXG4gIGNvbnN0IFBST0ZfQk9OVVNfQllfTEVWRUwgPSBbXG4gICAgXCIrMlwiLCBcIisyXCIsIFwiKzJcIiwgXCIrMlwiLFxuICAgIFwiKzNcIiwgXCIrM1wiLCBcIiszXCIsIFwiKzNcIixcbiAgICBcIis0XCIsIFwiKzRcIiwgXCIrNFwiLCBcIis0XCIsXG4gICAgXCIrNVwiLCBcIis1XCIsIFwiKzVcIiwgXCIrNVwiLFxuICAgIFwiKzZcIiwgXCIrNlwiLCBcIis2XCIsIFwiKzZcIlxuICBdO1xuICBcbiAgLy8gbm9ybWFsaXplIGhpdFx1MjAxMGRpY2VcbiAgY29uc3QgaGROdW0gICA9IGNscy5oZD8ubnVtYmVyID8/IDE7XG4gIGNvbnN0IGhkRmFjZXMgPSBjbHMuaGQ/LmZhY2VzICA/PyA2O1xuICBjb25zdCBoZFN0ciAgID0gYCR7aGROdW19ZCR7aGRGYWNlc31gO1xuICBjb25zdCBoZE1heCAgID0gaGROdW0gKiBoZEZhY2VzO1xuICBjb25zdCBoZEF2ZyAgID0gTWF0aC5jZWlsKChoZEZhY2VzICsgMSkgLyAyKTtcblxuY29uc3QgYmFzZUZNID0gYnVpbGRGTShjbHMsIENMQVNTX01FVEFfREVGUyk7XG5jb25zdCBmbSAgICAgPSB7IC4uLmJhc2VGTSwgaGQ6IGhkU3RyIH07XG5jb25zdCB5YW1sICAgPSBzZXJpYWxpemVGcm9udG1hdHRlcihmbSwgQ0xBU1NfTUVUQV9ERUZTKTtcblxuLy8gMSkgRGVjbGFyZSB5b3VyIGxpbmVzIGJ1ZmZlciBpbW1lZGlhdGVseVxuY29uc3QgbGluZXM6IHN0cmluZ1tdID0gW107XG5cbi8vIDQpIE5vdyBjYXJyeSBvbiB3aXRoIHRoZSByZXN0IG9mIHlvdXIgYm9keVxubGluZXMucHVzaChgIyAke2NsYXNzTmFtZX1gKTtcbmlmIChjbHMuc291cmNlKSBsaW5lcy5wdXNoKGAqKlNvdXJjZToqKiAke2Nscy5zb3VyY2V9YCk7XG5saW5lcy5wdXNoKGBgKTtcbmxpbmVzLnB1c2goYC0tLWApO1xuXG4gIC8vIFx1MjUwMFx1MjUwMFx1MjUwMCBIaXQgUG9pbnRzIFx1MjUwMFx1MjUwMFx1MjUwMFxuICBsaW5lcy5wdXNoKGAjIyBIaXQgUG9pbnRzYCk7XG4gIGxpbmVzLnB1c2goYCoqSGl0IERpY2U6KiogJHtoZFN0cn0gcGVyICR7Y2xhc3NOYW1lfSBsZXZlbGApO1xuICBsaW5lcy5wdXNoKGAqKkhpdCBQb2ludHMgYXQgMXN0IExldmVsOioqICR7aGRNYXh9ICsgeW91ciBDb25zdGl0dXRpb24gbW9kaWZpZXJgKTtcbiAgbGluZXMucHVzaChcbiAgICBgKipIaXQgUG9pbnRzIGF0IEhpZ2hlciBMZXZlbHM6KiogJHtoZFN0cn0gKG9yICR7aGRBdmd9KSArIHlvdXIgQ29uc3RpdHV0aW9uIG1vZGlmaWVyIHBlciBsZXZlbCBhZnRlciAxc3RgXG4gICk7XG5cbi8vIFx1MjUwMFx1MjUwMFx1MjUwMCBQcm9maWNpZW5jaWVzIFx1MjUwMFx1MjUwMFx1MjUwMFxubGluZXMucHVzaChgYCk7XG5saW5lcy5wdXNoKGAtLS1gKTtcbmxpbmVzLnB1c2goYCMjIFByb2ZpY2llbmNpZXNgKTtcblxuY29uc3Qgc3AgPSBjbHMuc3RhcnRpbmdQcm9maWNpZW5jaWVzID8/IHt9O1xuXG4vLyBBcm1vclxuaWYgKEFycmF5LmlzQXJyYXkoc3AuYXJtb3IpICYmIHNwLmFybW9yLmxlbmd0aCkge1xuICBsaW5lcy5wdXNoKGAtICoqQXJtb3I6KiogJHtzcC5hcm1vci5qb2luKFwiLCBcIil9YCk7XG59XG5cbi8vIFdlYXBvbnNcbmNvbnN0IHdlYXBvbkxpc3QgPSB1bmlmaWVkV2VhcG9uUHJvZnMoc3ApO1xuaWYgKHdlYXBvbkxpc3QubGVuZ3RoKSB7XG4gIGxpbmVzLnB1c2goYC0gKipXZWFwb25zOioqICR7d2VhcG9uTGlzdC5qb2luKFwiLCBcIil9YCk7XG59XG5cbi8vIFRvb2xzXG5jb25zdCB0b29sTGlzdCA9IHVuaWZpZWRUb29sUHJvZnMoc3ApO1xuaWYgKHRvb2xMaXN0Lmxlbmd0aCkge1xuICBsaW5lcy5wdXNoKGAtICoqVG9vbHM6KiogJHt0b29sTGlzdC5qb2luKFwiLCBcIil9YCk7XG59XG5cbi8vIFNhdmluZyBUaHJvd3NcbmNvbnN0IHNhdmVzID0gQXJyYXkuaXNBcnJheShjbHMucHJvZmljaWVuY3kpXG4gID8gY2xzLnByb2ZpY2llbmN5Lm1hcCgoazogc3RyaW5nKSA9PlxuICAgICAgKHsgc3RyOlwiU3RyZW5ndGhcIiwgZGV4OlwiRGV4dGVyaXR5XCIsIGNvbjpcIkNvbnN0aXR1dGlvblwiLFxuICAgICAgICAgaW50OlwiSW50ZWxsaWdlbmNlXCIsIHdpczpcIldpc2RvbVwiLCBjaGE6XCJDaGFyaXNtYVwiIH1ba10gfHwgay50b1VwcGVyQ2FzZSgpKVxuICAgIClcbiAgOiBbXTtcbmlmIChzYXZlcy5sZW5ndGgpIHtcbiAgbGluZXMucHVzaChgLSAqKlNhdmluZyBUaHJvd3M6KiogJHtzYXZlcy5qb2luKFwiLCBcIil9YCk7XG59XG5cblxuLy8gXHUyNTAwXHUyNTAwXHUyNTAwIFNraWxscyBcdTI1MDBcdTI1MDBcdTI1MDBcbntcbiAgLy8gMSkgZ3JhYiB3aGF0ZXZlciBhcnJheSBob2xkcyB0aGUgcmF3IG9iamVjdHMvc3RyaW5nc1xuICBjb25zdCByYXdTa2lsbHM6IGFueVtdID1cbiAgICBBcnJheS5pc0FycmF5KHNwLnNraWxsUHJvZmljaWVuY2llcykgPyBzcC5za2lsbFByb2ZpY2llbmNpZXNcbiAgICA6IEFycmF5LmlzQXJyYXkoc3Auc2tpbGxzKSAgICAgICAgICAgICA/IHNwLnNraWxsc1xuICAgIDogQXJyYXkuaXNBcnJheShzcC5za2lsbFByb2YpICAgICAgICAgID8gc3Auc2tpbGxQcm9mXG4gICAgOiBbXTtcblxuICAvLyAyKSBsb29rIGZvciB0aGUgXHUyMDFDY2hvb3NlIE4gZnJvbSBbXHUyMDI2XVx1MjAxRCBlbnRyeVxuICBjb25zdCBjaG9pY2VFbnRyeSA9IHJhd1NraWxscy5maW5kKFxuICAgIGUgPT4gZSAmJlxuICAgICAgICAgKHR5cGVvZiBlLmNob29zZSA9PT0gXCJvYmplY3RcIiB8fCB0eXBlb2YgZS5hbnkgPT09IFwibnVtYmVyXCIpXG4gICk7XG5cbiAgaWYgKGNob2ljZUVudHJ5KSB7XG4gICAgLy8gaG93IG1hbnkgdG8gY2hvb3NlXG4gICAgY29uc3QgY291bnQgPSBjaG9pY2VFbnRyeS5jaG9vc2U/LmNvdW50ID8/IGNob2ljZUVudHJ5LmFueSA/PyAxO1xuXG4gICAgLy8gcHVsbCB0aGUgYWN0dWFsIGxpc3Qgb2Ygb3B0aW9ucywgb3IgZmFsbCBiYWNrIHRvIHRoZSBnbG9iYWwgU0tJTExfT1BUSU9OU1xuICAgIGNvbnN0IG9wdGlvbnM6IHN0cmluZ1tdID0gQXJyYXkuaXNBcnJheShjaG9pY2VFbnRyeS5jaG9vc2U/LmZyb20pXG4gICAgICA/IGNob2ljZUVudHJ5LmNob29zZS5mcm9tLm1hcCgoczogc3RyaW5nKSA9PlxuICAgICAgICAgIC8vIHRpdGxlLWNhc2UgZWFjaCB3b3JkIChvciBqdXN0IHVzZSBzKVxuICAgICAgICAgIHMuc3BsaXQoXCIgXCIpLm1hcCh3ID0+IHdbMF0udG9VcHBlckNhc2UoKSArIHcuc2xpY2UoMSkpLmpvaW4oXCIgXCIpXG4gICAgICAgIClcbiAgICAgIDogU0tJTExfT1BUSU9OUztcblxuICAgIGxpbmVzLnB1c2goYC0gKipTa2lsbHMgKENob29zZSAke2NvdW50fSk6KiogJHtvcHRpb25zLmpvaW4oXCIsIFwiKX1gKTtcblxuICB9IGVsc2Uge1xuICAgIC8vIG5vIGNob29zZS1mcm9tIG9iamVjdCBcdTIxOTIgZmxhdCBsaXN0IGZyb20geW91ciB1bmlmaWVkIGhlbHBlclxuICAgIGNvbnN0IGZsYXQgPSB1bmlmaWVkU2tpbGxzKHNwKTtcbiAgICBpZiAoZmxhdC5sZW5ndGgpIHtcbiAgICAgIGxpbmVzLnB1c2goYC0gKipTa2lsbHM6KiogJHtmbGF0LmpvaW4oXCIsIFwiKX1gKTtcbiAgICB9XG4gIH1cbn1cblxuXG5cbiAgLy8gXHUyNTAwXHUyNTAwXHUyNTAwIEVxdWlwbWVudCBcdTI1MDBcdTI1MDBcdTI1MDBcbiAgaWYgKEFycmF5LmlzQXJyYXkoY2xzLnN0YXJ0aW5nRXF1aXBtZW50KSkge1xuICAgIGxpbmVzLnB1c2goYFxcbiMjIyBFcXVpcG1lbnRgKTtcbiAgICBjbHMuc3RhcnRpbmdFcXVpcG1lbnRcbiAgICAgIC5maWx0ZXIoKGU6IGFueSkgPT4gdHlwZW9mIGUgPT09IFwic3RyaW5nXCIpXG4gICAgICAuZm9yRWFjaCgoaXRlbTogc3RyaW5nKSA9PiBsaW5lcy5wdXNoKGAtICR7aXRlbX1gKSk7XG4gIH1cblxuLy8gXHUyNTAwXHUyNTAwXHUyNTAwIENsYXNzIFByb2dyZXNzaW9uIFx1MjUwMFx1MjUwMFx1MjUwMFxuY29uc3QgcHJvZ0dyb3VwcyA9IGNscy5jbGFzc1RhYmxlR3JvdXBzID8/IFtdO1xuY29uc3QgbWF4TGV2ZWwgPSAyMDtcblxuaWYgKCFwcm9nR3JvdXBzLmxlbmd0aCkge1xuICBsaW5lcy5wdXNoKGAqKE5vIGNsYXNzIHRhYmxlIHByb3ZpZGVkIGZvciB0aGlzIGNsYXNzLikqYCk7XG59IGVsc2Uge1xuICAvLyAxKSBCdWlsZCBsZXZlbCBcdTIxOTIgZmVhdHVyZSBtYXBcbiAgY29uc3QgZmVhdHVyZXNCeUxldmVsOiBSZWNvcmQ8bnVtYmVyLCBzdHJpbmdbXT4gPSB7fTtcbiAgZm9yIChjb25zdCBmZWF0IG9mIGNscy5jbGFzc0ZlYXR1cmVzID8/IFtdKSB7XG4gICAgY29uc3QgcmF3ID0gdHlwZW9mIGZlYXQgPT09IFwib2JqZWN0XCIgJiYgZmVhdC5jbGFzc0ZlYXR1cmUgPyBmZWF0LmNsYXNzRmVhdHVyZSA6IFN0cmluZyhmZWF0KTtcbiAgICBjb25zdCBbbmFtZSwsICxsdmxTdHJdID0gcmF3LnNwbGl0KFwifFwiKTtcbiAgICBjb25zdCBsdmwgPSBOdW1iZXIobHZsU3RyID8/IDApO1xuICAgIGlmICghZmVhdHVyZXNCeUxldmVsW2x2bF0pIGZlYXR1cmVzQnlMZXZlbFtsdmxdID0gW107XG4gICAgZmVhdHVyZXNCeUxldmVsW2x2bF0ucHVzaChuYW1lKTtcbiAgfVxuXG4gIC8vIDIpIEdhdGhlciBldmVyeSBjb2x1bW4gbGFiZWwgJiByb3cgdmFsdWVcbiAgY29uc3QgYWxsTGFiZWxzU2V0ID0gbmV3IFNldDxzdHJpbmc+KCk7XG4gIGNvbnN0IHJvd01hcHM6IFJlY29yZDxudW1iZXIsIFJlY29yZDxzdHJpbmcsIHN0cmluZz4+ID0ge307XG5cbiAgZm9yIChjb25zdCBncm91cCBvZiBwcm9nR3JvdXBzKSB7XG4gICAgY29uc3QgbGFiZWxzID0gQXJyYXkuaXNBcnJheShncm91cC5jb2xMYWJlbHMpXG4gICAgICA/IGdyb3VwLmNvbExhYmVscy5tYXAoKGw6IHN0cmluZykgPT4gcmVwbGFjZTVlVGFncyhsKSlcbiAgICAgIDogW107XG4gICAgY29uc3Qgcm93cyA9IEFycmF5LmlzQXJyYXkoZ3JvdXAucm93cylcbiAgICAgID8gZ3JvdXAucm93c1xuICAgICAgOiBBcnJheS5pc0FycmF5KGdyb3VwLnJvd3NTcGVsbFByb2dyZXNzaW9uKVxuICAgICAgICA/IGdyb3VwLnJvd3NTcGVsbFByb2dyZXNzaW9uXG4gICAgICAgIDogW107XG5cbiAgICBpZiAoIWxhYmVscy5sZW5ndGggfHwgIXJvd3MubGVuZ3RoKSBjb250aW51ZTtcblxuICAgIGZvciAobGV0IGx2bCA9IDA7IGx2bCA8IHJvd3MubGVuZ3RoOyBsdmwrKykge1xuICAgICAgY29uc3QgbGV2ZWxOdW0gPSBsdmwgKyAxO1xuICAgICAgaWYgKCFyb3dNYXBzW2xldmVsTnVtXSkgcm93TWFwc1tsZXZlbE51bV0gPSB7fTtcbiAgICAgIGNvbnN0IHJvd01hcCA9IHJvd01hcHNbbGV2ZWxOdW1dO1xuICAgICAgY29uc3QgY2VsbHMgPSByb3dzW2x2bF07XG5cbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGFiZWxzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGNvbnN0IGxhYmVsID0gbGFiZWxzW2ldO1xuICAgICAgICBsZXQgdmFsID0gXCJcIjtcbiAgICAgICAgY29uc3QgY2VsbCA9IGNlbGxzW2ldO1xuXG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KGNlbGwpKSB7XG4gICAgICAgICAgdmFsID0gY2VsbC5qb2luKFwiLCBcIik7XG4gICAgICAgIH0gZWxzZSBpZiAoY2VsbCAmJiB0eXBlb2YgY2VsbCA9PT0gXCJvYmplY3RcIiAmJiBcInZhbHVlXCIgaW4gY2VsbCkge1xuICAgICAgICAgIHZhbCA9IFN0cmluZyhjZWxsLnZhbHVlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB2YWwgPSBTdHJpbmcoY2VsbCA/PyBcIlwiKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGFsbExhYmVsc1NldC5hZGQobGFiZWwpO1xuICAgICAgICByb3dNYXBbbGFiZWxdID0gdmFsO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8vIDMpICoqRmlsdGVyIG91dCoqIGFueSBzcGVsbFx1MjAxMHRhYmxlIGNvbHVtbnNcbiAgY29uc3QgYWxsTGFiZWxzID0gQXJyYXkuZnJvbShhbGxMYWJlbHNTZXQpLmZpbHRlcihsYmwgPT5cbiAgICAhL0NhbnRyaXBzIEtub3dufFNwZWxscyBLbm93bnxcXGQrKHN0fG5kfHJkfHRoKS8udGVzdChsYmwpXG4gICk7XG5cbiAgLy8gNCkgQnVpbGQgZmluYWwgaGVhZGVyICYgcm93c1xuICBjb25zdCBtZXJnZWRMYWJlbHMgPSBbXCJMZXZlbFwiLCBcIlByb2ZpY2llbmN5IEJvbnVzXCIsIFwiQ2xhc3MgRmVhdHVyZXNcIiwgLi4uYWxsTGFiZWxzXTtcbiAgY29uc3QgbWVyZ2VkUm93czogc3RyaW5nW11bXSA9IFtdO1xuXG4gIGZvciAobGV0IGx2bCA9IDE7IGx2bCA8PSBtYXhMZXZlbDsgbHZsKyspIHtcbiAgICBjb25zdCBmZWF0dXJlTGlzdCA9IChmZWF0dXJlc0J5TGV2ZWxbbHZsXSA/PyBbXSkubWFwKGZvcm1hdEZlYXR1cmVMaW5rKTtcbiAgICBjb25zdCByb3dNYXAgPSByb3dNYXBzW2x2bF0gPz8ge307XG5cbiAgICBtZXJnZWRSb3dzLnB1c2goW1xuICAgICAgbHZsLnRvU3RyaW5nKCksXG4gICAgICBQUk9GX0JPTlVTX0JZX0xFVkVMW2x2bCAtIDFdIHx8IFwiXCIsXG4gICAgICBmZWF0dXJlTGlzdC5qb2luKFwiLCBcIikucmVwbGFjZSgvXFx8L2csIFwiJiMxMjQ7XCIpLFxuICAgICAgLi4uYWxsTGFiZWxzLm1hcChsYWJlbCA9PiByb3dNYXBbbGFiZWxdID8/IFwiXCIpXG4gICAgXSk7XG4gIH1cblxuICAvLyA1KSBSZW5kZXIgdGhlIGZlYXR1cmVzXHUyMDEwb25seSB0YWJsZVxubGluZXMucHVzaChgXFxuPiBbIWV4YW1wbGVdLSBDbGFzcyBQcm9ncmVzc2lvbiBUYWJsZWApO1xubGluZXMucHVzaChcbiAgcmVuZGVyTWFya2Rvd25UYWJsZSh7XG4gICAgdHlwZTogICAgICBcInRhYmxlXCIsXG4gICAgY2FwdGlvbjogICBcIlwiLFxuICAgIGNvbExhYmVsczogbWVyZ2VkTGFiZWxzLFxuICAgIHJvd3M6ICAgICAgbWVyZ2VkUm93cyxcbiAgfSkpO1xufVxuXG4vLyBcdTI1MDBcdTI1MDBcdTI1MDAgU3BlbGwgUHJvZ3Jlc3Npb24gXHUyNTAwXHUyNTAwXHUyNTAwXG4vLyAxKSBmaW5kIHRoZSB0d28gZ3JvdXBzXG5jb25zdCBjc0dyb3VwID0gcHJvZ0dyb3Vwcy5maW5kKChnOiBhbnkpID0+XG4gIEFycmF5LmlzQXJyYXkoZy5jb2xMYWJlbHMpICYmXG4gIGcuY29sTGFiZWxzLnNvbWUoKGxibDogYW55KSA9PiAvQ2FudHJpcHMgS25vd258U3BlbGxzIEtub3duLy50ZXN0KFN0cmluZyhsYmwpKSlcbik7XG5jb25zdCBzbG90R3JvdXAgPSBwcm9nR3JvdXBzLmZpbmQoKGc6IGFueSkgPT5cbiAgQXJyYXkuaXNBcnJheShnLmNvbExhYmVscykgJiZcbiAgZy50aXRsZSA9PT0gXCJTcGVsbCBTbG90cyBwZXIgU3BlbGwgTGV2ZWxcIlxuKTtcblxuaWYgKGNzR3JvdXAgJiYgc2xvdEdyb3VwKSB7XG4gIC8vIDIpIHJhdyBsYWJlbHNcbiAgY29uc3QgY3NMYWJlbHMgICA9IChjc0dyb3VwLmNvbExhYmVscyBhcyBzdHJpbmdbXSkubWFwKGwgPT4gcmVwbGFjZTVlVGFncyhsKSk7XG4gIGNvbnN0IHNsb3RMYWJlbHMgPSAoc2xvdEdyb3VwLmNvbExhYmVscyBhcyBzdHJpbmdbXSkubWFwKGwgPT4gcmVwbGFjZTVlVGFncyhsKSk7XG5cbiAgLy8gMykgcmF3IHJvd3NcbiAgY29uc3QgY3NSb3dzICAgPSAoY3NHcm91cC5yb3dzICAgICAgYXMgYW55W11bXSkgICAgICAgICAgICAgIHx8IFtdO1xuICBjb25zdCBzbG90Um93cyA9IChzbG90R3JvdXAucm93c1NwZWxsUHJvZ3Jlc3Npb24gYXMgYW55W11bXSkgfHwgW107XG5cbiAgLy8gNCkgYnVpbGQgaGVhZGVyOiBMZXZlbCArIGNhbnRyaXBzL3NwZWxscyArIGVhY2ggc2xvdCBsZXZlbFxuICBjb25zdCBjb2xMYWJlbHMgPSBbXCJMZXZlbFwiLCAuLi5jc0xhYmVscywgLi4uc2xvdExhYmVsc107XG5cbiAgLy8gNSkgYnVpbGQgZWFjaCByb3cgYnkgemlwcGluZyBjc1Jvd3NbaV0gKyBzbG90Um93c1tpXVxuICBjb25zdCBzcGVsbFJvd3M6IHN0cmluZ1tdW10gPSBbXTtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBNYXRoLm1heChjc1Jvd3MubGVuZ3RoLCBzbG90Um93cy5sZW5ndGgpOyBpKyspIHtcbiAgICBjb25zdCBsdmwgPSBTdHJpbmcoaSArIDEpO1xuICAgIGNvbnN0IGNzQ2VsbHMgICA9IGNzUm93c1tpXSAgID8gY3NSb3dzW2ldLm1hcChTdHJpbmcpICAgOiBjc0xhYmVscy5tYXAoXyA9PiBcIlwiKTtcbiAgICBjb25zdCBzbG90Q2VsbHMgPSBzbG90Um93c1tpXSA/IHNsb3RSb3dzW2ldLm1hcChTdHJpbmcpIDogc2xvdExhYmVscy5tYXAoXyA9PiBcIlwiKTtcbiAgICBzcGVsbFJvd3MucHVzaChbbHZsLCAuLi5jc0NlbGxzLCAuLi5zbG90Q2VsbHNdKTtcbiAgfVxuXG4gIC8vIDYpIHJlbmRlciFcbiAgbGluZXMucHVzaChgXFxuPiBbIXRpcF0tIFNwZWxsIFByb2dyZXNzaW9uIFRhYmxlYCk7XG4gIGxpbmVzLnB1c2goXG4gICAgcmVuZGVyTWFya2Rvd25UYWJsZSh7XG4gICAgICB0eXBlOiAgICAgIFwidGFibGVcIixcbiAgICAgIGNhcHRpb246ICAgXCJcIixcbiAgICAgIGNvbExhYmVsczogY29sTGFiZWxzLFxuICAgICAgcm93czogICAgICBzcGVsbFJvd3MsXG4gIH0pKTtcbn1cblxuXG4vLyBcdTI1MDBcdTI1MDBcdTI1MDAgU3ViY2xhc3NlcyBcdTI1MDBcdTI1MDBcdTI1MDBcbmNvbnN0IHN1YnMgPSBBcnJheS5pc0FycmF5KGpzb24uc3ViY2xhc3MpID8ganNvbi5zdWJjbGFzcyA6IFtdO1xuY29uc3Qgc3ViY2xhc3NGZWF0dXJlcyA9IEFycmF5LmlzQXJyYXkoanNvbi5zdWJjbGFzc0ZlYXR1cmUpXG4gID8ganNvbi5zdWJjbGFzc0ZlYXR1cmVcbiAgOiBqc29uLmxvb2t1cD8uc3ViY2xhc3NGZWF0dXJlID8/IFtdO1xuXG5mb3IgKGNvbnN0IHNjIG9mIHN1YnMpIHtcbiAgY29uc3Qgc3ViY2xhc3NOYW1lID0gc2MubmFtZTtcbiAgY29uc3Qgc3ViTGluZXM6IHN0cmluZ1tdID0gW107XG5cbiAgLy8gXHUyNTAwXHUyNTAwXHUyNTAwIEhlYWRlciBtZXRhZGF0YSBcdTI1MDBcdTI1MDBcdTI1MDBcbiAgc3ViTGluZXMucHVzaChgIyAke3N1YmNsYXNzTmFtZX1gKTtcbiAgc3ViTGluZXMucHVzaChgKipQYXJlbnQgQ2xhc3M6KiogW1ske2NsYXNzTmFtZX1dXWApO1xuICBpZiAoc2Muc291cmNlKSBzdWJMaW5lcy5wdXNoKGAqKlNvdXJjZToqKiAke3NjLnNvdXJjZX1gKTtcbiAgc3ViTGluZXMucHVzaChgYCk7IC8vIGJsYW5rIGxpbmVcblxuICAvLyBcdTI1MDBcdTI1MDBcdTI1MDAgSW50cm8gZW50cnkgKGxldmVsIDMgZmVhdHVyZSBkZXNjcmlwdGlvbikgXHUyNTAwXHUyNTAwXHUyNTAwXG4gIGNvbnN0IGludHJvID0gc3ViY2xhc3NGZWF0dXJlcy5maW5kKChmOiBhbnkpID0+XG4gICAgZi5uYW1lID09PSBzYy5uYW1lICYmXG4gICAgZi5sZXZlbCA9PT0gMyAmJlxuICAgIGYuc3ViY2xhc3NTaG9ydE5hbWUgPT09IHNjLnNob3J0TmFtZSAmJlxuICAgIGYuc3ViY2xhc3NTb3VyY2UgPT09IHNjLnNvdXJjZVxuICApO1xuICBpZiAoaW50cm8/LmVudHJpZXM/Lmxlbmd0aCkge1xuICAgIGNvbnN0IGludHJvVGV4dCA9IEFycmF5LmlzQXJyYXkoaW50cm8uZW50cmllcylcbiAgICAgID8gaW50cm8uZW50cmllcy5tYXAoKGU6IGFueSkgPT5cbiAgICAgICAgICB0eXBlb2YgZSA9PT0gXCJzdHJpbmdcIiA/IHJlcGxhY2U1ZVRhZ3MoZSkgOiBmb3JtYXRFbnRyeShlKVxuICAgICAgICApLmpvaW4oXCJcXG5cXG5cIilcbiAgICAgIDogZm9ybWF0RW50cnkoaW50cm8uZW50cmllcyk7XG4gICAgc3ViTGluZXMucHVzaChpbnRyb1RleHQsIGBgKTtcbiAgfVxuXG4gIC8vIFx1MjUwMFx1MjUwMFx1MjUwMCBPcHRpb25hbFx1MjAxMGZlYXR1cmUgYmxvY2sgXHUyNTAwXHUyNTAwXHUyNTAwXG4gIGNvbnN0IGNvZGUgPSAoT2JqZWN0LmVudHJpZXMoT1BUX0ZFQVRVUkVfVFlQRV9UT19GVUxMKSBhcyBbc3RyaW5nLHN0cmluZ11bXSlcbiAgICAuZmluZCgoWywgZnVsbF0pID0+XG4gICAgICBmdWxsLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoc3ViY2xhc3NOYW1lLnRvTG93ZXJDYXNlKCkpXG4gICAgKT8uWzBdO1xuICBpZiAoY29kZSkge1xuICAgIGNvbnN0IG1hdGNoZXMgPSBvcHRpb25hbEZlYXR1cmVzLmZpbHRlcihvZiA9PlxuICAgICAgQXJyYXkuaXNBcnJheShvZi5mZWF0dXJlVHlwZSkgJiYgb2YuZmVhdHVyZVR5cGUuaW5jbHVkZXMoY29kZSlcbiAgICApO1xuICAgIGlmIChtYXRjaGVzLmxlbmd0aCkge1xuICAgICAgc3ViTGluZXMucHVzaChgIyMgJHtzdWJjbGFzc05hbWV9IE9wdGlvbmFsIEZlYXR1cmVzYCk7XG4gICAgICBmb3IgKGNvbnN0IGZlYXQgb2YgbWF0Y2hlcykge1xuICAgICAgICBmb3IgKGNvbnN0IGVudHJ5IG9mIGZlYXQuZW50cmllcykge1xuICAgICAgICAgIGNvbnN0IHR4dCA9IHR5cGVvZiBlbnRyeSA9PT0gXCJzdHJpbmdcIlxuICAgICAgICAgICAgPyByZXBsYWNlNWVUYWdzKGVudHJ5KVxuICAgICAgICAgICAgOiBmb3JtYXRFbnRyeShlbnRyeSk7XG4gICAgICAgICAgc3ViTGluZXMucHVzaChgKioke2ZlYXQubmFtZX06KiogJHt0eHR9YCk7XG4gICAgICAgIH1cbiAgICAgICAgc3ViTGluZXMucHVzaChgYCk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLy8gXHUyNTAwXHUyNTAwXHUyNTAwIFN1YmNsYXNzIHByb2dyZXNzaW9uIHRhYmxlIFx1MjUwMFx1MjUwMFx1MjUwMFxuICBjb25zdCBwcm9nID0gc2Muc3ViY2xhc3NUYWJsZUdyb3VwcyA/PyBbXTtcbiAgaWYgKHByb2cubGVuZ3RoKSB7XG4gICAgY29uc3QgbGFiZWxzID0gbmV3IFNldDxzdHJpbmc+KCk7XG4gICAgY29uc3Qgcm93c01hcDogUmVjb3JkPG51bWJlciwgUmVjb3JkPHN0cmluZyxzdHJpbmc+PiA9IHt9O1xuICAgIGZvciAoY29uc3QgZyBvZiBwcm9nKSB7XG4gICAgICBjb25zdCBjb2xzID0gKGcuY29sTGFiZWxzID8/IFtdKS5tYXAocmVwbGFjZTVlVGFncyk7XG4gICAgICBjb25zdCByb3dzID0gQXJyYXkuaXNBcnJheShnLnJvd3MpXG4gICAgICAgID8gZy5yb3dzXG4gICAgICAgIDogQXJyYXkuaXNBcnJheShnLnJvd3NTcGVsbFByb2dyZXNzaW9uKVxuICAgICAgICAgID8gZy5yb3dzU3BlbGxQcm9ncmVzc2lvblxuICAgICAgICAgIDogW107XG4gICAgICByb3dzLmZvckVhY2goKHI6IGFueSwgaTogYW55KSA9PiB7XG4gICAgICAgIGNvbnN0IGx2bCA9IGkgKyAxO1xuICAgICAgICByb3dzTWFwW2x2bF0gPz89IHt9O1xuICAgICAgICByLmZvckVhY2goKGM6IGFueSwgajogbnVtYmVyKSA9PiB7XG4gICAgICAgICAgY29uc3QgbGFiID0gY29sc1tqXTtcbiAgICAgICAgICBpZiAoIWxhYikgcmV0dXJuO1xuICAgICAgICAgIGxhYmVscy5hZGQobGFiKTtcbiAgICAgICAgICByb3dzTWFwW2x2bF1bbGFiXSA9IHR5cGVvZiBjID09PSBcIm9iamVjdFwiICYmIGMgIT09IG51bGwgJiYgXCJ2YWx1ZVwiIGluIGNcbiAgICAgICAgICAgID8gU3RyaW5nKGMudmFsdWUpXG4gICAgICAgICAgICA6IFN0cmluZyhjID8/IFwiXCIpO1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH1cbiAgICBjb25zdCBoZHJzID0gQXJyYXkuZnJvbShsYWJlbHMpO1xuICAgIHN1YkxpbmVzLnB1c2goYCMjIFN1YmNsYXNzIFByb2dyZXNzaW9uYCk7XG4gICAgc3ViTGluZXMucHVzaChyZW5kZXJNYXJrZG93blRhYmxlKHtcbiAgICAgIHR5cGU6ICAgICAgXCJ0YWJsZVwiLFxuICAgICAgY2FwdGlvbjogICBcIlwiLFxuICAgICAgY29sTGFiZWxzOiBbXCJMZXZlbFwiLCAuLi5oZHJzXSxcbiAgICAgIHJvd3M6ICAgICAgQXJyYXkuZnJvbSh7IGxlbmd0aDogMjAgfSwgKF8sIGkpID0+IHtcbiAgICAgICAgY29uc3QgbHZsID0gaSArIDE7XG4gICAgICAgIHJldHVybiBbU3RyaW5nKGx2bCksIC4uLmhkcnMubWFwKGggPT4gcm93c01hcFtsdmxdPy5baF0gPz8gXCJcIildO1xuICAgICAgfSlcbiAgICB9KSk7XG4gIH1cblxuLy8gXHUyNTAwXHUyNTAwXHUyNTAwIERldGFpbGVkIGxldmVsXHUyMDEwYnlcdTIwMTBsZXZlbCBmZWF0dXJlcyBcdTI1MDBcdTI1MDBcdTI1MDBcbmNvbnN0IGZlYXRzQnlMdmw6IFJlY29yZDxudW1iZXIsIGFueVtdPiA9IHt9O1xuZm9yIChjb25zdCBmIG9mIHN1YmNsYXNzRmVhdHVyZXMpIHtcbiAgaWYgKFxuICAgIGYuc3ViY2xhc3NTaG9ydE5hbWUgPT09IHNjLnNob3J0TmFtZSAmJlxuICAgIGYuc3ViY2xhc3NTb3VyY2UgPT09IHNjLnNvdXJjZSAmJlxuICAgIGYuY2xhc3NOYW1lID09PSBjbGFzc05hbWVcbiAgKSB7XG4gICAgY29uc3QgbHZsID0gZi5sZXZlbCA/PyAwO1xuICAgIDsoZmVhdHNCeUx2bFtsdmxdID8/PSBbXSkucHVzaChmKTtcbiAgfVxufVxuXG5mb3IgKGNvbnN0IGx2bCBvZiBPYmplY3Qua2V5cyhmZWF0c0J5THZsKS5tYXAoTnVtYmVyKS5zb3J0KChhLGIpPT5hLWIpKSB7XG4gIHN1YkxpbmVzLnB1c2goYC0tLWAsIGAjIyBMZXZlbCAke2x2bH1gKTtcblxuICBmb3IgKGNvbnN0IGYgb2YgZmVhdHNCeUx2bFtsdmxdKSB7XG4gIHN1YkxpbmVzLnB1c2goYCMjIyAke2YubmFtZX1gKTtcblxuICAvLyBXYWxrIGVhY2ggZW50cnkgZm9yIHRoaXMgZmVhdHVyZVxuICBmb3IgKGNvbnN0IGVudCBvZiBBcnJheS5pc0FycmF5KGYuZW50cmllcykgPyBmLmVudHJpZXMgOiBbZi5lbnRyaWVzXSkge1xuICAgIC8vIDEpIFBsYWluIHBhcmFncmFwaCBlbnRyaWVzXG4gICAgaWYgKHR5cGVvZiBlbnQgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgIHN1YkxpbmVzLnB1c2gocmVwbGFjZTVlVGFncyhlbnQpKTtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cblxuICAgIC8vIDIpIElmIGl0J3MgdGhlIFwiTWFuZXV2ZXJzXCIgZW50cmllc1x1MjAxMGJsb2NrLCBpbmplY3QgeW91ciBsaXN0IGhlcmVcbiAgICBpZiAoZW50LnR5cGUgPT09IFwiZW50cmllc1wiICYmIC9eTWFuZXV2ZXJzJC9pLnRlc3QoZW50Lm5hbWUpKSB7XG4gICAgICAvLyBmaXJzdCBwcmludCB0aGUgc3ViXHUyMDEwaGVhZGluZyBhbmQgYW55IHRleHQgaXQgaGFkXG4gICAgICBzdWJMaW5lcy5wdXNoKGAjIyMjIyAke2VudC5uYW1lfWApO1xuICAgICAgZm9yIChjb25zdCB0eHQgb2YgQXJyYXkuaXNBcnJheShlbnQuZW50cmllcykgPyBlbnQuZW50cmllcyA6IFtlbnQuZW50cmllc10pIHtcbiAgICAgICAgc3ViTGluZXMucHVzaCh0eXBlb2YgdHh0ID09PSBcInN0cmluZ1wiXG4gICAgICAgICAgPyByZXBsYWNlNWVUYWdzKHR4dClcbiAgICAgICAgICA6IGZvcm1hdEVudHJ5KHR4dCkpO1xuICAgICAgfVxuXG4gICAgICAvLyBub3cgaW5qZWN0IHRoZSBmdWxsIG1hbmV1dmVyIGRlZmluaXRpb25zIGZvciB0aGlzIHN1YmNsYXNzXG4gICAgICBjb25zdCBjb2RlID0gKE9iamVjdC5lbnRyaWVzKE9QVF9GRUFUVVJFX1RZUEVfVE9fRlVMTCkgYXMgW3N0cmluZyxzdHJpbmddW10pXG4gICAgICAgIC5maW5kKChbLCBmdWxsXSkgPT5cbiAgICAgICAgICBmdWxsLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoc3ViY2xhc3NOYW1lLnRvTG93ZXJDYXNlKCkpXG4gICAgICAgICk/LlswXTtcbiAgICAgIGlmIChjb2RlKSB7XG4gICAgICAgIGNvbnN0IG1hdGNoZXMgPSBvcHRpb25hbEZlYXR1cmVzLmZpbHRlcihvZiA9PlxuICAgICAgICAgIEFycmF5LmlzQXJyYXkob2YuZmVhdHVyZVR5cGUpICYmIG9mLmZlYXR1cmVUeXBlLmluY2x1ZGVzKGNvZGUpXG4gICAgICAgICk7XG4gICAgICAgIGZvciAoY29uc3QgZmVhdERlZiBvZiBtYXRjaGVzKSB7XG4gICAgICAgICAgZm9yIChjb25zdCBzdWIgb2YgZmVhdERlZi5lbnRyaWVzKSB7XG4gICAgICAgICAgICBjb25zdCBsaW5lID0gdHlwZW9mIHN1YiA9PT0gXCJzdHJpbmdcIlxuICAgICAgICAgICAgICA/IHJlcGxhY2U1ZVRhZ3Moc3ViKVxuICAgICAgICAgICAgICA6IGZvcm1hdEVudHJ5KHN1Yik7XG4gICAgICAgICAgICBzdWJMaW5lcy5wdXNoKGAqKiR7ZmVhdERlZi5uYW1lfToqKiAke2xpbmV9YCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHN1YkxpbmVzLnB1c2goXCJcIik7IC8vIHNwYWNlclxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBjb250aW51ZTtcbiAgICB9XG5cbiAgICAvLyAzKSBBbnkgb3RoZXIgbmVzdGVkIFwiZW50cmllc1wiIGJsb2Nrc1xuICAgIGlmIChlbnQudHlwZSA9PT0gXCJlbnRyaWVzXCIgJiYgZW50Lm5hbWUpIHtcbiAgICAgIHN1YkxpbmVzLnB1c2goYCMjIyMjICR7ZW50Lm5hbWV9YCk7XG4gICAgICBmb3IgKGNvbnN0IGUyIG9mIEFycmF5LmlzQXJyYXkoZW50LmVudHJpZXMpID8gZW50LmVudHJpZXMgOiBbZW50LmVudHJpZXNdKSB7XG4gICAgICAgIHN1YkxpbmVzLnB1c2goZm9ybWF0RW50cnkoZTIpKTtcbiAgICAgIH1cbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cblxuICAgIC8vIDQpIEluc2V0c1xuICAgIGlmIChlbnQudHlwZSA9PT0gXCJpbnNldFwiICYmIGVudC5uYW1lKSB7XG4gICAgICBjb25zdCBpbm5lciA9IEFycmF5LmlzQXJyYXkoZW50LmVudHJpZXMpID8gZW50LmVudHJpZXMgOiBbZW50LmVudHJpZXNdO1xuICAgICAgc3ViTGluZXMucHVzaChgPiAqKiR7ZW50Lm5hbWV9KipgKTtcbiAgICAgIGlubmVyLmZvckVhY2goKGUyOiBhbnkpID0+IHN1YkxpbmVzLnB1c2goYD4gJHtmb3JtYXRFbnRyeShlMil9YCkpO1xuICAgICAgY29udGludWU7XG4gICAgfVxuXG4gICAgLy8gNSkgRmFsbGJhY2tcbiAgICBjb25zdCBmYiA9IGZvcm1hdEVudHJ5KGVudCk7XG4gICAgaWYgKGZiKSBzdWJMaW5lcy5wdXNoKGZiKTtcbiAgfVxuICB9XG59XG5cblxuICAvLyBcdTI1MDBcdTI1MDBcdTI1MDAgQ2xlYW4gdXAgJiBwdXNoIFx1MjUwMFx1MjUwMFx1MjUwMFxuICBjb25zdCBzdWJjbGFzc0NvbnRlbnQgPSBzdWJMaW5lc1xuICAgIC5qb2luKFwiXFxuXFxuXCIpXG4gICAgLnJlcGxhY2UoL1xcbnszLH0vZywgXCJcXG5cXG5cIik7XG4gIHN1YmNsYXNzRmlsZXMucHVzaCh7XG4gICAgcGF0aDogYENsYXNzZXMvJHtjbGFzc05hbWV9L1N1YmNsYXNzZXMvJHtzdWJjbGFzc05hbWV9Lm1kYCxcbiAgICBjb250ZW50OiBzdWJjbGFzc0NvbnRlbnRcbiAgfSk7XG59XG5cblxuXG4vLyBcdTI1MDBcdTI1MDBcdTI1MDAgU3ViY2xhc3NlcyBTdW1tYXJ5IFx1MjUwMFx1MjUwMFx1MjUwMFxuaWYgKHN1YnMubGVuZ3RoKSB7XG4gIGNvbnN0IGxpbmtzID0gc3Vicy5tYXAoKHNjOiBhbnkpID0+XG4gICAgYFtbU3ViY2xhc3Nlcy8ke3NjLm5hbWUucmVwbGFjZSgvW1xcXFwvXS9nLCBcIi1cIil9fCR7c2MubmFtZX1dXWBcbiAgKTtcbiAgbGluZXMucHVzaChgXFxuKipTdWJjbGFzc2VzOioqICR7bGlua3Muam9pbihcIiwgXCIpfWApO1xufVxuXG5cbiAgLy8gR2V0IGZ1bGwgY2xhc3MgZmVhdHVyZSBkZWZpbml0aW9uc1xuY29uc3QgYWxsRmVhdHVyZXMgPSBBcnJheS5pc0FycmF5KGpzb24uY2xhc3NGZWF0dXJlKSA/IGpzb24uY2xhc3NGZWF0dXJlIDoganNvbi5sb29rdXA/LmNsYXNzRmVhdHVyZSA/PyBbXTtcbmNvbnN0IGZlYXR1cmVzQnlMZXZlbDogUmVjb3JkPG51bWJlciwgYW55W10+ID0ge307XG5cbmZvciAoY29uc3QgZW50cnkgb2YgYWxsRmVhdHVyZXMpIHtcbiAgaWYgKGVudHJ5LmNsYXNzTmFtZSAhPT0gY2xhc3NOYW1lKSBjb250aW51ZTtcbiAgY29uc3QgbHZsID0gZW50cnkubGV2ZWwgPz8gMDtcbiAgaWYgKCFmZWF0dXJlc0J5TGV2ZWxbbHZsXSkgZmVhdHVyZXNCeUxldmVsW2x2bF0gPSBbXTtcbiAgZmVhdHVyZXNCeUxldmVsW2x2bF0ucHVzaChlbnRyeSk7XG59XG5cblxuLy8gXHUyNTAwXHUyNTAwXHUyNTAwIExldmVsIEZlYXR1cmVzIFx1MjUwMFx1MjUwMFx1MjUwMFxubGluZXMucHVzaChgYCk7XG5saW5lcy5wdXNoKGAtLS1gKTtcbmxpbmVzLnB1c2goYCMjIExldmVsIEZlYXR1cmVzYCk7XG5cbmNvbnN0IGxldmVscyA9IE9iamVjdFxuICAua2V5cyhmZWF0dXJlc0J5TGV2ZWwpXG4gIC5tYXAobiA9PiArbilcbiAgLnNvcnQoKGEsIGIpID0+IGEgLSBiKTtcblxuZm9yIChjb25zdCBsdmwgb2YgbGV2ZWxzKSB7XG4gIGxpbmVzLnB1c2goYCMjIyBMZXZlbCAke2x2bH1gKTtcblxuICBmb3IgKGNvbnN0IGZlYXQgb2YgZmVhdHVyZXNCeUxldmVsW2x2bF0pIHtcbiAgICAvLyBGZWF0dXJlIGhlYWRlclxuICAgIGxpbmVzLnB1c2goYCMjIyMgJHtmZWF0Lm5hbWV9YCk7XG5cbiAgICAvLyBFbnN1cmUgZW50cmllcyBpcyBhbHdheXMgYW4gYXJyYXlcbiAgICBjb25zdCBlbnRyaWVzID0gQXJyYXkuaXNBcnJheShmZWF0LmVudHJpZXMpXG4gICAgICA/IGZlYXQuZW50cmllc1xuICAgICAgOiBbZmVhdC5lbnRyaWVzXTtcblxuICAgIGZvciAoY29uc3QgZW50IG9mIGVudHJpZXMpIHtcbiAgICAgIC8vIDEpIFBsYWluLXRleHQgcGFyYWdyYXBoXG4gICAgICAgIGlmICh0eXBlb2YgZW50ID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgY29uc3QgdHh0ID0gZm9ybWF0RW50cnkoZW50KS50cmltKCk7XG4gICAgICAgICAgLy8gc2tpcCBhbnkgcHVyZS1icmFjZSBsaW5lc1xuICAgICAgICAgIGlmICh0eHQgPT09IFwie1wiIHx8IHR4dCA9PT0gXCJ9XCIpIGNvbnRpbnVlO1xuICAgICAgICAgIGxpbmVzLnB1c2godHh0KTtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChlbnQudHlwZSA9PT0gXCJsaXN0XCIgJiYgQXJyYXkuaXNBcnJheShlbnQuaXRlbXMpKSB7XG4gICAgZm9yIChjb25zdCBpdGVtIG9mIGVudC5pdGVtcykge1xuICAgICAgbGluZXMucHVzaChgLSAke3JlcGxhY2U1ZVRhZ3MoaXRlbSl9YCk7XG4gICAgfVxuICAgIGNvbnRpbnVlO1xuICB9XG4gICAgICAvLyBcdTI1MDBcdTI1MDBcdTI1MDAgaW5zaWRlIHlvdXIgZm9yIChjb25zdCBlbnQgb2YgZW50cmllcykgbG9vcCBcdTI1MDBcdTI1MDBcdTI1MDBcbiAgICAgIGlmIChlbnQudHlwZSA9PT0gXCJvcHRpb25zXCIpIHtcbiAgaWYgKGVudC5jb3VudCkge1xuICAgIGxpbmVzLnB1c2goXCJcIik7XG4gICAgbGluZXMucHVzaChgKipDaG9vc2UgJHtlbnQuY291bnR9IG9mIHRoZSBmb2xsb3dpbmcgb3B0aW9uczoqKmApO1xuICAgIGxpbmVzLnB1c2goXCJcIik7XG4gIH1cblxuICBmb3IgKGNvbnN0IG9wdFJlZiBvZiBBcnJheS5pc0FycmF5KGVudC5lbnRyaWVzKSA/IGVudC5lbnRyaWVzIDogW2VudC5lbnRyaWVzXSkge1xuICAgIGlmIChvcHRSZWYudHlwZSA9PT0gXCJyZWZPcHRpb25hbGZlYXR1cmVcIikge1xuICAgICAgY29uc3QgW29wdE5hbWUsIG9wdFNyY10gPSBvcHRSZWYub3B0aW9uYWxmZWF0dXJlLnNwbGl0KFwifFwiKTtcbiAgICAgIGNvbnN0IGZlYXREZWYgPSBvcHRpb25hbEZlYXR1cmVzLmZpbmQoXG4gICAgICAgIGYgPT4gZi5uYW1lID09PSBvcHROYW1lICYmICghb3B0U3JjIHx8IGYuc291cmNlID09PSBvcHRTcmMpXG4gICAgICApO1xuXG4gICAgICBpZiAoZmVhdERlZikge1xuICAgICAgICAvLyBsb29wIHRocm91Z2ggZWFjaCBsaW5lIGluIHRoZSBmZWF0dXJlXHUyMDE5cyBlbnRyaWVzW11cbiAgICAgICAgZmVhdERlZi5lbnRyaWVzLmZvckVhY2goKHN1YkVudHJ5OiBhbnksIGlkeDogYW55KSA9PiB7XG4gICAgICAgICAgLy8gcmVuZGVyIHRleHRcbiAgICAgICAgICBjb25zdCB0ZXh0ID0gdHlwZW9mIHN1YkVudHJ5ID09PSBcInN0cmluZ1wiXG4gICAgICAgICAgICA/IHJlcGxhY2U1ZVRhZ3Moc3ViRW50cnkpXG4gICAgICAgICAgICA6IGZvcm1hdEVudHJ5KHN1YkVudHJ5KTtcblxuICAgICAgICAgIGlmIChpZHggPT09IDApIHtcbiAgICAgICAgICAgIC8vIGZpcnN0IGxpbmU6IGJvbGRlZCBuYW1lICsgZGVzY3JpcHRpb25cbiAgICAgICAgICAgIGxpbmVzLnB1c2goYC0gKioke2ZlYXREZWYubmFtZX06KiogJHt0ZXh0fWApO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBzdWJzZXF1ZW50IGxpbmVzOiBuZXN0ZWQgYnVsbGV0XG4gICAgICAgICAgICBsaW5lcy5wdXNoKGAgIC0gJHt0ZXh0fWApO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIGxpbmVzLnB1c2goXCJcIik7IC8vIGJsYW5rIGxpbmUgYWZ0ZXIgZWFjaCBmZWF0dXJlIGJsb2NrXG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBmYWxsYmFjayBpZiBub3QgZm91bmRcbiAgICAgICAgbGluZXMucHVzaChgKioke29wdE5hbWV9OioqYCk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIG5vblx1MjAxMHJlZk9wdGlvbmFsZmVhdHVyZSBmYWxsYmFja1xuICAgICAgY29uc3QgdHh0ID0gZm9ybWF0RW50cnkob3B0UmVmKTtcbiAgICAgIGlmICh0eHQpIGxpbmVzLnB1c2goYC0gJHt0eHR9YCk7XG4gICAgfVxuICB9XG5cbiAgY29udGludWU7XG59XG5cblxuICAgICAgLy8gMykgU3RhbmRhbG9uZSByZWZPcHRpb25hbGZlYXR1cmVcbiAgICAgIGlmIChlbnQudHlwZSA9PT0gXCJyZWZPcHRpb25hbGZlYXR1cmVcIikge1xuICAgICAgICBjb25zdCBbbmFtZV0gPSBlbnQub3B0aW9uYWxmZWF0dXJlLnNwbGl0KFwifFwiKTtcbiAgICAgICAgbGluZXMucHVzaChgLSBbWyR7bmFtZX18JHtuYW1lfV1dYCk7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICAvLyA0KSBOZXN0ZWQgXHUyMDFDZW50cmllc1x1MjAxRCBibG9jayB3aXRoIGl0cyBvd24gaGVhZGluZ1xuICAgICAgaWYgKGVudC50eXBlID09PSBcImVudHJpZXNcIiAmJiBlbnQubmFtZSkge1xuICAgICAgICBsaW5lcy5wdXNoKGAjIyMjIyAke2VudC5uYW1lfWApO1xuICAgICAgICBjb25zdCBpbm5lciA9IEFycmF5LmlzQXJyYXkoZW50LmVudHJpZXMpID8gZW50LmVudHJpZXMgOiBbZW50LmVudHJpZXNdO1xuICAgICAgICBmb3IgKGNvbnN0IGUyIG9mIGlubmVyKSB7XG4gICAgICAgICAgbGluZXMucHVzaChmb3JtYXRFbnRyeShlMikpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICAvLyA1KSBGYWxsYmFjayBmb3IgYW55IG90aGVyIG9iamVjdCBzaGFwZVxuICAgICAgY29uc3QgZmFsbGJhY2sgPSBmb3JtYXRFbnRyeShlbnQpO1xuICAgICAgaWYgKGZhbGxiYWNrKSBsaW5lcy5wdXNoKGZhbGxiYWNrKTtcbiAgICB9XG5cbiAgICAvLyBCbGFuayBsaW5lIGFmdGVyIGVhY2ggZmVhdHVyZVxuICAgIGxpbmVzLnB1c2goYGApO1xuICB9IFxuXG4gIC8vIERpdmlkZXIgYmV0d2VlbiBsZXZlbHNcbiAgbGluZXMucHVzaChgLS0tYCk7XG59XG5cblxuXG4gIC8vIHN0aXRjaCwgcmVwbGFjZSB0YWdzLCByZXR1cm5cbiAgbGV0IGNvbnRlbnQgPSBgLS0tXFxuJHt5YW1sfVxcbi0tLVxcblxcbiR7bGluZXMuam9pbihcIlxcblwiKX1gO1xuICAvLyBjb21tZW50IHRoaXMgb3V0IHdoaWxlIGRlYnVnZ2luZzpcbiAgY29udGVudCA9IHJlcGxhY2U1ZVRhZ3MoY29udGVudCk7XG5cbiAgY29udGVudCA9IGNvbnRlbnRcbiAgLnJlcGxhY2UoL1xcbnszLH0vZywgJ1xcblxcbicpICAgLy8gbm8gbW9yZSB0aGFuIDIgbmV3bGluZXMgaW4gYSByb3dcbiAgLnJlcGxhY2UoL1xcbiArXFxuL2csICdcXG5cXG4nKTsgIC8vIHRyaW0gYmxhbmsgbGluZXMgd2l0aCB0cmFpbGluZyBzcGFjZXNcblxuICByZXR1cm4gW1xuICAgIHtcbiAgICAgIHBhdGg6IGBDbGFzc2VzLyR7Y2xhc3NOYW1lfS8ke2NsYXNzTmFtZX0ubWRgLFxuICAgICAgY29udGVudCxcbiAgICB9LFxuICAgIC4uLnN1YmNsYXNzRmlsZXMsXG4gIF07XG4gIFxufVxuIiwgIi8vIHNyYy9wYXJzZXJzL3J1bGVzLnRzXG5pbXBvcnQgdHlwZSB7IFBhcnNlZE1hcmtkb3duRmlsZSB9IGZyb20gXCIuLi8uLi90eXBlc1wiO1xuaW1wb3J0IHsgcmVwbGFjZTVlVGFncyB9IGZyb20gXCIuL2hlbHBlcnMvdGFnUmVwbGFjZXJcIjtcblxuLyoqXG4gKiBQYXJzZSBhY3Rpb25zLmpzb24gaW50byBhIHNpbmdsZSBNYXJrZG93biBub3RlIHdpdGggIyMgaGVhZGVycyBmb3IgZWFjaCBhY3Rpb24sXG4gKiBoYW5kbGluZyBuZXN0ZWQgZW50cmllcywgaW5zZXRzLCBsaXN0cywgdGFibGVzLCBhbmQgYWRkaW5nIHNlcGFyYXRvcnMuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBwYXJzZUFjdGlvbnNGaWxlKGpzb246IGFueSwgZWRpdGlvbklkOiBzdHJpbmcpOiBQYXJzZWRNYXJrZG93bkZpbGVbXSB7XG4gIGlmICghQXJyYXkuaXNBcnJheShqc29uLmFjdGlvbikpIHJldHVybiBbXTtcblxuICBjb25zdCBsaW5lczogc3RyaW5nW10gPSBbXTtcbiAgZm9yIChjb25zdCBhY3Rpb24gb2YganNvbi5hY3Rpb24pIHtcbiAgICBsaW5lcy5wdXNoKGAjIyAke2FjdGlvbi5uYW1lfWApO1xuICAgIGNvbnN0IGVudHJpZXMgPSBBcnJheS5pc0FycmF5KGFjdGlvbi5lbnRyaWVzKSA/IGFjdGlvbi5lbnRyaWVzIDogW2FjdGlvbi5lbnRyaWVzXTtcbiAgICBmb3IgKGNvbnN0IGVudHJ5IG9mIGVudHJpZXMpIHtcbiAgICAgIGlmICghZW50cnkpIGNvbnRpbnVlO1xuICAgICAgaWYgKHR5cGVvZiBlbnRyeSA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICBjb25zdCBwYXJhcyA9IGVudHJ5LnNwbGl0KC9cXG57Mix9Lyk7XG4gICAgICAgIGZvciAoY29uc3QgcGFyYSBvZiBwYXJhcykge1xuICAgICAgICAgIGNvbnN0IHQgPSBwYXJhLnRyaW0oKTtcbiAgICAgICAgICBpZiAodCkge1xuICAgICAgICAgICAgbGluZXMucHVzaChyZXBsYWNlNWVUYWdzKHQpKTtcbiAgICAgICAgICAgIGxpbmVzLnB1c2goXCJcIik7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKGVudHJ5LnR5cGUgPT09IFwibGlzdFwiICYmIEFycmF5LmlzQXJyYXkoZW50cnkuaXRlbXMpKSB7XG4gICAgICAgIGZvciAoY29uc3QgaXRlbSBvZiBlbnRyeS5pdGVtcykge1xuICAgICAgICAgIGxpbmVzLnB1c2goYC0gJHtyZXBsYWNlNWVUYWdzKGl0ZW0pfWApO1xuICAgICAgICB9XG4gICAgICAgIGxpbmVzLnB1c2goXCJcIik7XG4gICAgICB9IGVsc2UgaWYgKChlbnRyeS50eXBlID09PSBcImVudHJpZXNcIiB8fCBlbnRyeS50eXBlID09PSBcImluc2V0XCIpICYmIEFycmF5LmlzQXJyYXkoZW50cnkuZW50cmllcykpIHtcbiAgICAgICAgbGluZXMucHVzaChgIyMjICR7ZW50cnkubmFtZX1gKTtcbiAgICAgICAgZm9yIChjb25zdCBzdWIgb2YgZW50cnkuZW50cmllcykge1xuICAgICAgICAgIGlmICh0eXBlb2Ygc3ViID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICBjb25zdCBwcyA9IHN1Yi5zcGxpdCgvXFxuezIsfS8pO1xuICAgICAgICAgICAgZm9yIChjb25zdCBwIG9mIHBzKSB7XG4gICAgICAgICAgICAgIGNvbnN0IHR0ID0gcC50cmltKCk7XG4gICAgICAgICAgICAgIGlmICh0dCkge1xuICAgICAgICAgICAgICAgIGxpbmVzLnB1c2gocmVwbGFjZTVlVGFncyh0dCkpO1xuICAgICAgICAgICAgICAgIGxpbmVzLnB1c2goXCJcIik7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGVsc2UgaWYgKHN1Yi50eXBlID09PSBcImxpc3RcIiAmJiBBcnJheS5pc0FycmF5KHN1Yi5pdGVtcykpIHtcbiAgICAgICAgICAgIGZvciAoY29uc3QgbGkgb2Ygc3ViLml0ZW1zKSB7XG4gICAgICAgICAgICAgIGxpbmVzLnB1c2goYC0gJHtyZXBsYWNlNWVUYWdzKGxpKX1gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxpbmVzLnB1c2goXCJcIik7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IHR4dCA9IEFycmF5LmlzQXJyYXkoc3ViKVxuICAgICAgICAgICAgICA/IHN1Yi5qb2luKFwiIFwiKVxuICAgICAgICAgICAgICA6IHR5cGVvZiBzdWIgPT09IFwib2JqZWN0XCJcbiAgICAgICAgICAgICAgICA/IEpTT04uc3RyaW5naWZ5KHN1YilcbiAgICAgICAgICAgICAgICA6IFN0cmluZyhzdWIpO1xuICAgICAgICAgICAgbGluZXMucHVzaChyZXBsYWNlNWVUYWdzKHR4dCkpO1xuICAgICAgICAgICAgbGluZXMucHVzaChcIlwiKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAoZW50cnkudHlwZSA9PT0gXCJ0YWJsZVwiICYmIEFycmF5LmlzQXJyYXkoZW50cnkucm93cykpIHtcbiAgICAgICAgY29uc3QgaGVhZGVycyA9IGVudHJ5LmNvbExhYmVscyB8fCBbXTtcbiAgICAgICAgbGluZXMucHVzaChgfCAke2hlYWRlcnMuam9pbihcIiB8IFwiKX0gfGApO1xuICAgICAgICBsaW5lcy5wdXNoKGB8ICR7aGVhZGVycy5tYXAoKCkgPT4gXCItLS1cIikuam9pbihcIiB8IFwiKX0gfGApO1xuICAgICAgICBmb3IgKGNvbnN0IHJvdyBvZiBlbnRyeS5yb3dzKSB7XG4gICAgICAgICAgbGluZXMucHVzaChgfCAke3Jvdy5qb2luKFwiIHwgXCIpfSB8YCk7XG4gICAgICAgIH1cbiAgICAgICAgbGluZXMucHVzaChcIlwiKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnN0IHR4dCA9IEFycmF5LmlzQXJyYXkoZW50cnkpXG4gICAgICAgICAgPyBlbnRyeS5qb2luKFwiIFwiKVxuICAgICAgICAgIDogdHlwZW9mIGVudHJ5ID09PSBcIm9iamVjdFwiXG4gICAgICAgICAgICA/IEpTT04uc3RyaW5naWZ5KGVudHJ5KVxuICAgICAgICAgICAgOiBTdHJpbmcoZW50cnkpO1xuICAgICAgICBsaW5lcy5wdXNoKHJlcGxhY2U1ZVRhZ3ModHh0KSk7XG4gICAgICAgIGxpbmVzLnB1c2goXCJcIik7XG4gICAgICB9XG4gICAgfVxuICAgIC8vIFNlcGFyYXRvciBiZXR3ZWVuIGFjdGlvbnNcbiAgICBsaW5lcy5wdXNoKFwiLS0tXCIpO1xuICB9XG4gIGNvbnN0IGNsZWFuZWQgPSBsaW5lcy5yZWR1Y2U8c3RyaW5nW10+KChhY2MsIGN1cnIpID0+IHtcbiAgICBpZiAoY3VyciA9PT0gXCJcIiAmJiBhY2MubGVuZ3RoICYmIGFjY1thY2MubGVuZ3RoIC0gMV0gPT09IFwiXCIpIHJldHVybiBhY2M7XG4gICAgcmV0dXJuIGFjYy5jb25jYXQoY3Vycik7XG4gIH0sIFtdKTtcbiAgcmV0dXJuIFtcbiAgICB7XG4gICAgICBwYXRoOiBcIlJ1bGVzIGFuZCBSZWZlcmVuY2UvQWN0aW9ucy5tZFwiLFxuICAgICAgY29udGVudDogY2xlYW5lZC5qb2luKFwiXFxuXCIpLnRyaW0oKSArIFwiXFxuXCIsXG4gICAgfSxcbiAgXTtcbn1cblxuLyoqXG4gKiBQYXJzZSBjb21iaW5lZCBjb25kaXRpb25zZGlzZWFzZXMuanNvbiBpbnRvIHR3byBNYXJrZG93biBub3RlczogQ29uZGl0aW9ucy5tZCBhbmQgRGlzZWFzZXMubWRcbiAqIGFkZGluZyBzZXBhcmF0b3JzIGJldHdlZW4gZW50cmllcy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlQ29uZGl0aW9uc0Rpc2Vhc2VzRmlsZShqc29uOiBhbnksIGVkaXRpb25JZDogc3RyaW5nKTogUGFyc2VkTWFya2Rvd25GaWxlW10ge1xuICBjb25zdCBvdXRwdXRzOiBQYXJzZWRNYXJrZG93bkZpbGVbXSA9IFtdO1xuICBjb25zdCBwcm9jZXNzSXRlbXMgPSAoaXRlbXM6IGFueVtdLCBvdXRQYXRoOiBzdHJpbmcpID0+IHtcbiAgICBjb25zdCBsaW5lczogc3RyaW5nW10gPSBbXTtcbiAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgaXRlbXMpIHtcbiAgICAgIGxpbmVzLnB1c2goYCMjICR7aXRlbS5uYW1lfWApO1xuICAgICAgY29uc3QgZW50cmllcyA9IEFycmF5LmlzQXJyYXkoaXRlbS5lbnRyaWVzKSA/IGl0ZW0uZW50cmllcyA6IFtpdGVtLmVudHJpZXNdO1xuICAgICAgZm9yIChjb25zdCBlbnRyeSBvZiBlbnRyaWVzKSB7XG4gICAgICAgIGlmICghZW50cnkpIGNvbnRpbnVlO1xuICAgICAgICBpZiAodHlwZW9mIGVudHJ5ID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgY29uc3QgcGFyYXMgPSBlbnRyeS5zcGxpdCgvXFxuezIsfS8pO1xuICAgICAgICAgIGZvciAoY29uc3QgcGFyYSBvZiBwYXJhcykge1xuICAgICAgICAgICAgY29uc3QgdCA9IHBhcmEudHJpbSgpO1xuICAgICAgICAgICAgaWYgKHQpIHtcbiAgICAgICAgICAgICAgbGluZXMucHVzaChyZXBsYWNlNWVUYWdzKHQpKTtcbiAgICAgICAgICAgICAgbGluZXMucHVzaChcIlwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAoZW50cnkudHlwZSA9PT0gXCJsaXN0XCIgJiYgQXJyYXkuaXNBcnJheShlbnRyeS5pdGVtcykpIHtcbiAgICAgICAgICBmb3IgKGNvbnN0IHR4dCBvZiBlbnRyeS5pdGVtcykge1xuICAgICAgICAgICAgbGluZXMucHVzaChgLSAke3JlcGxhY2U1ZVRhZ3ModHh0KX1gKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgbGluZXMucHVzaChcIlwiKTtcbiAgICAgICAgfSBlbHNlIGlmIChlbnRyeS50eXBlID09PSBcInRhYmxlXCIgJiYgQXJyYXkuaXNBcnJheShlbnRyeS5yb3dzKSkge1xuICAgICAgICAgIGNvbnN0IGhlYWRlcnMgPSBlbnRyeS5jb2xMYWJlbHMgfHwgW107XG4gICAgICAgICAgbGluZXMucHVzaChgfCAke2hlYWRlcnMuam9pbihcIiB8IFwiKX0gfGApO1xuICAgICAgICAgIGxpbmVzLnB1c2goYHwgJHtoZWFkZXJzLm1hcCgoKSA9PiBcIi0tLVwiKS5qb2luKFwiIHwgXCIpfSB8YCk7XG4gICAgICAgICAgZm9yIChjb25zdCByb3cgb2YgZW50cnkucm93cykge1xuICAgICAgICAgICAgbGluZXMucHVzaChgfCAke3Jvdy5qb2luKFwiIHwgXCIpfSB8YCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGxpbmVzLnB1c2goXCJcIik7XG4gICAgICAgIH0gZWxzZSBpZiAoZW50cnkudHlwZSA9PT0gXCJlbnRyaWVzXCIgJiYgQXJyYXkuaXNBcnJheShlbnRyeS5lbnRyaWVzKSkge1xuICAgICAgICAgIGxpbmVzLnB1c2goYCMjIyAke2VudHJ5Lm5hbWV9YCk7XG4gICAgICAgICAgZm9yIChjb25zdCBzdWIgb2YgZW50cnkuZW50cmllcykge1xuICAgICAgICAgICAgY29uc3QgdHh0ID0gdHlwZW9mIHN1YiA9PT0gXCJzdHJpbmdcIiA/IHN1YiA6IFN0cmluZyhzdWIpO1xuICAgICAgICAgICAgbGluZXMucHVzaChyZXBsYWNlNWVUYWdzKHR4dCkpO1xuICAgICAgICAgICAgbGluZXMucHVzaChcIlwiKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY29uc3QgdHh0ID0gQXJyYXkuaXNBcnJheShlbnRyeSkgPyBlbnRyeS5qb2luKFwiIFwiKSA6IFN0cmluZyhlbnRyeSk7XG4gICAgICAgICAgbGluZXMucHVzaChyZXBsYWNlNWVUYWdzKHR4dCkpO1xuICAgICAgICAgIGxpbmVzLnB1c2goXCJcIik7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIC8vIFNlcGFyYXRvciBiZXR3ZWVuIGl0ZW1zXG4gICAgICBsaW5lcy5wdXNoKFwiLS0tXCIpO1xuICAgIH1cbiAgICBjb25zdCBjbGVhbmVkID0gbGluZXMucmVkdWNlPHN0cmluZ1tdPigoYWNjLCBjdXJyKSA9PiB7XG4gICAgICBpZiAoY3VyciA9PT0gXCJcIiAmJiBhY2MubGVuZ3RoICYmIGFjY1thY2MubGVuZ3RoIC0gMV0gPT09IFwiXCIpIHJldHVybiBhY2M7XG4gICAgICByZXR1cm4gYWNjLmNvbmNhdChjdXJyKTtcbiAgICB9LCBbXSk7XG4gICAgb3V0cHV0cy5wdXNoKHsgcGF0aDogb3V0UGF0aCwgY29udGVudDogY2xlYW5lZC5qb2luKFwiXFxuXCIpLnRyaW0oKSArIFwiXFxuXCIgfSk7XG4gIH07XG4gIHByb2Nlc3NJdGVtcyhqc29uLmNvbmRpdGlvbiB8fCBbXSwgXCJSdWxlcyBhbmQgUmVmZXJlbmNlL0NvbmRpdGlvbnMubWRcIik7XG4gIHByb2Nlc3NJdGVtcyhqc29uLmRpc2Vhc2UgfHwgW10sIFwiUnVsZXMgYW5kIFJlZmVyZW5jZS9EaXNlYXNlcy5tZFwiKTtcbiAgcmV0dXJuIG91dHB1dHM7XG59XG5cbi8qKlxuICogUGFyc2Ugc2Vuc2VzLmpzb24gaW50byBhIHNpbmdsZSBNYXJrZG93biBub3RlIHdpdGggIyMgaGVhZGVycyBmb3IgZWFjaCBzZW5zZSxcbiAqIGhhbmRsaW5nIGxpc3RzLCB0YWJsZXMsIG5lc3RlZCBlbnRyaWVzL2luc2V0cywgYW5kIHNlcGFyYXRvcnMuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBwYXJzZVNlbnNlc0ZpbGUoanNvbjogYW55LCBlZGl0aW9uSWQ6IHN0cmluZyk6IFBhcnNlZE1hcmtkb3duRmlsZVtdIHtcbiAgY29uc3QgaXRlbXMgPSBBcnJheS5pc0FycmF5KGpzb24uc2Vuc2UpID8ganNvbi5zZW5zZSA6IEFycmF5LmlzQXJyYXkoanNvbi5zZW5zZXMpID8ganNvbi5zZW5zZXMgOiBbXTtcbiAgaWYgKCFpdGVtcy5sZW5ndGgpIHJldHVybiBbXTtcblxuICBjb25zdCBsaW5lczogc3RyaW5nW10gPSBbXTtcbiAgZm9yIChjb25zdCBzZW5zZSBvZiBpdGVtcykge1xuICAgIGxpbmVzLnB1c2goYCMjICR7c2Vuc2UubmFtZX1gKTtcbiAgICBjb25zdCBlbnRyaWVzID0gQXJyYXkuaXNBcnJheShzZW5zZS5lbnRyaWVzKSA/IHNlbnNlLmVudHJpZXMgOiBbc2Vuc2UuZW50cmllc107XG4gICAgZm9yIChjb25zdCBlbnRyeSBvZiBlbnRyaWVzKSB7XG4gICAgICBpZiAoIWVudHJ5KSBjb250aW51ZTtcbiAgICAgIGlmICh0eXBlb2YgZW50cnkgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgY29uc3QgcGFyYXMgPSBlbnRyeS5zcGxpdCgvXFxuezIsfS8pO1xuICAgICAgICBmb3IgKGNvbnN0IHBhcmEgb2YgcGFyYXMpIHtcbiAgICAgICAgICBjb25zdCB0ID0gcGFyYS50cmltKCk7XG4gICAgICAgICAgaWYgKHQpIHtcbiAgICAgICAgICAgIGxpbmVzLnB1c2gocmVwbGFjZTVlVGFncyh0KSk7XG4gICAgICAgICAgICBsaW5lcy5wdXNoKFwiXCIpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChlbnRyeS50eXBlID09PSBcImxpc3RcIiAmJiBBcnJheS5pc0FycmF5KGVudHJ5Lml0ZW1zKSkge1xuICAgICAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgZW50cnkuaXRlbXMpIHtcbiAgICAgICAgICBsaW5lcy5wdXNoKGAtICR7cmVwbGFjZTVlVGFncyhpdGVtKX1gKTtcbiAgICAgICAgfVxuICAgICAgICBsaW5lcy5wdXNoKFwiXCIpO1xuICAgICAgfSBlbHNlIGlmICgoZW50cnkudHlwZSA9PT0gXCJlbnRyaWVzXCIgfHwgZW50cnkudHlwZSA9PT0gXCJpbnNldFwiKSAmJiBBcnJheS5pc0FycmF5KGVudHJ5LmVudHJpZXMpKSB7XG4gICAgICAgIGxpbmVzLnB1c2goYCMjIyAke2VudHJ5Lm5hbWV9YCk7XG4gICAgICAgIGZvciAoY29uc3Qgc3ViIG9mIGVudHJ5LmVudHJpZXMpIHtcbiAgICAgICAgICBjb25zdCB0eHQgPSB0eXBlb2Ygc3ViID09PSBcInN0cmluZ1wiID8gc3ViIDogU3RyaW5nKHN1Yik7XG4gICAgICAgICAgbGluZXMucHVzaChyZXBsYWNlNWVUYWdzKHR4dCkpO1xuICAgICAgICAgIGxpbmVzLnB1c2goXCJcIik7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAoZW50cnkudHlwZSA9PT0gXCJ0YWJsZVwiICYmIEFycmF5LmlzQXJyYXkoZW50cnkucm93cykpIHtcbiAgICAgICAgY29uc3QgaGVhZGVycyA9IGVudHJ5LmNvbExhYmVscyB8fCBbXTtcbiAgICAgICAgbGluZXMucHVzaChgfCAke2hlYWRlcnMuam9pbihcIiB8IFwiKX0gfGApO1xuICAgICAgICBsaW5lcy5wdXNoKGB8ICR7aGVhZGVycy5tYXAoKCkgPT4gXCItLS1cIikuam9pbihcIiB8IFwiKX0gfGApO1xuICAgICAgICBmb3IgKGNvbnN0IHJvdyBvZiBlbnRyeS5yb3dzKSB7XG4gICAgICAgICAgbGluZXMucHVzaChgfCAke3Jvdy5qb2luKFwiIHwgXCIpfSB8YCk7XG4gICAgICAgIH1cbiAgICAgICAgbGluZXMucHVzaChcIlwiKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnN0IHR4dCA9IEFycmF5LmlzQXJyYXkoZW50cnkpID8gZW50cnkuam9pbihcIiBcIikgOiBTdHJpbmcoZW50cnkpO1xuICAgICAgICBsaW5lcy5wdXNoKHJlcGxhY2U1ZVRhZ3ModHh0KSk7XG4gICAgICAgIGxpbmVzLnB1c2goXCJcIik7XG4gICAgICB9XG4gICAgfVxuICAgIC8vIFNlcGFyYXRvciBiZXR3ZWVuIHNlbnNlc1xuICAgIGxpbmVzLnB1c2goXCItLS1cIik7XG4gIH1cbiAgY29uc3QgY2xlYW5lZCA9IGxpbmVzLnJlZHVjZTxzdHJpbmdbXT4oKGFjYywgY3VycikgPT4ge1xuICAgIGlmIChjdXJyID09PSBcIlwiICYmIGFjYy5sZW5ndGggJiYgYWNjW2FjYy5sZW5ndGggLSAxXSA9PT0gXCJcIikgcmV0dXJuIGFjYztcbiAgICByZXR1cm4gYWNjLmNvbmNhdChjdXJyKTtcbiAgfSwgW10pO1xuXG4gIHJldHVybiBbXG4gICAge1xuICAgICAgcGF0aDogXCJSdWxlcyBhbmQgUmVmZXJlbmNlL1NlbnNlcy5tZFwiLFxuICAgICAgY29udGVudDogY2xlYW5lZC5qb2luKFwiXFxuXCIpLnRyaW0oKSArIFwiXFxuXCIsXG4gICAgfSxcbiAgXTtcbn1cblxuLyoqXG4gKiBQYXJzZSBza2lsbHMuanNvbiBpbnRvIGEgc2luZ2xlIE1hcmtkb3duIG5vdGUgd2l0aCAjIyBoZWFkZXJzIGZvciBlYWNoIHNraWxsLFxuICogcHJlcGVuZGluZyBhbiBhYmlsaXR5IGxpbmUsIGhhbmRsaW5nIHBhcmFncmFwaHMsIGFuZCBzZXBhcmF0b3JzLlxuICovXG5leHBvcnQgZnVuY3Rpb24gcGFyc2VTa2lsbHNGaWxlKGpzb246IGFueSwgZWRpdGlvbklkOiBzdHJpbmcpOiBQYXJzZWRNYXJrZG93bkZpbGVbXSB7XG4gIGNvbnN0IGl0ZW1zID0gQXJyYXkuaXNBcnJheShqc29uLnNraWxsKVxuICAgID8ganNvbi5za2lsbFxuICAgIDogQXJyYXkuaXNBcnJheShqc29uLnNraWxscylcbiAgICA/IGpzb24uc2tpbGxzXG4gICAgOiBbXTtcbiAgaWYgKCFpdGVtcy5sZW5ndGgpIHJldHVybiBbXTtcblxuICBjb25zdCBsaW5lczogc3RyaW5nW10gPSBbXTtcbiAgZm9yIChjb25zdCBza2lsbCBvZiBpdGVtcykge1xuICAgIGxpbmVzLnB1c2goYCMjICR7c2tpbGwubmFtZX1gKTtcbiAgICBpZiAoc2tpbGwuYWJpbGl0eSkge1xuICAgICAgbGluZXMucHVzaChgKkFiaWxpdHk6ICR7c2tpbGwuYWJpbGl0eX0qYCk7XG4gICAgICBsaW5lcy5wdXNoKFwiXCIpO1xuICAgIH1cbiAgICBjb25zdCBlbnRyaWVzID0gQXJyYXkuaXNBcnJheShza2lsbC5lbnRyaWVzKSA/IHNraWxsLmVudHJpZXMgOiBbc2tpbGwuZW50cmllc107XG4gICAgZm9yIChjb25zdCBlbnRyeSBvZiBlbnRyaWVzKSB7XG4gICAgICBpZiAoIWVudHJ5KSBjb250aW51ZTtcbiAgICAgIGlmICh0eXBlb2YgZW50cnkgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgY29uc3QgcGFyYXMgPSBlbnRyeS5zcGxpdCgvXFxuezIsfS8pO1xuICAgICAgICBmb3IgKGNvbnN0IHBhcmEgb2YgcGFyYXMpIHtcbiAgICAgICAgICBjb25zdCB0ID0gcGFyYS50cmltKCk7XG4gICAgICAgICAgaWYgKHQpIHtcbiAgICAgICAgICAgIGxpbmVzLnB1c2gocmVwbGFjZTVlVGFncyh0KSk7XG4gICAgICAgICAgICBsaW5lcy5wdXNoKFwiXCIpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChlbnRyeS50eXBlID09PSBcImxpc3RcIiAmJiBBcnJheS5pc0FycmF5KGVudHJ5Lml0ZW1zKSkge1xuICAgICAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgZW50cnkuaXRlbXMpIHtcbiAgICAgICAgICBsaW5lcy5wdXNoKGAtICR7cmVwbGFjZTVlVGFncyhpdGVtKX1gKTtcbiAgICAgICAgfVxuICAgICAgICBsaW5lcy5wdXNoKFwiXCIpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc3QgdHh0ID0gQXJyYXkuaXNBcnJheShlbnRyeSkgPyBlbnRyeS5qb2luKFwiIFwiKSA6IFN0cmluZyhlbnRyeSk7XG4gICAgICAgIGxpbmVzLnB1c2gocmVwbGFjZTVlVGFncyh0eHQpKTtcbiAgICAgICAgbGluZXMucHVzaChcIlwiKTtcbiAgICAgIH1cbiAgICB9XG4gICAgLy8gU2VwYXJhdG9yIGJldHdlZW4gc2tpbGxzXG4gICAgbGluZXMucHVzaChcIi0tLVwiKTtcbiAgfVxuICBjb25zdCBjbGVhbmVkID0gbGluZXMucmVkdWNlPHN0cmluZ1tdPigoYWNjLCBjdXJyKSA9PiB7XG4gICAgaWYgKGN1cnIgPT09IFwiXCIgJiYgYWNjLmxlbmd0aCAmJiBhY2NbYWNjLmxlbmd0aCAtIDFdID09PSBcIlwiKSByZXR1cm4gYWNjO1xuICAgIHJldHVybiBhY2MuY29uY2F0KGN1cnIpO1xuICB9LCBbXSk7XG5cbiAgcmV0dXJuIFtcbiAgICB7XG4gICAgICBwYXRoOiBcIlJ1bGVzIGFuZCBSZWZlcmVuY2UvU2tpbGxzLm1kXCIsXG4gICAgICBjb250ZW50OiBjbGVhbmVkLmpvaW4oXCJcXG5cIikudHJpbSgpICsgXCJcXG5cIixcbiAgICB9LFxuICBdO1xufVxuIiwgImltcG9ydCB0eXBlIHsgUGFyc2VkTWFya2Rvd25GaWxlIH0gZnJvbSBcIi4uLy4uL3R5cGVzXCI7XG5pbXBvcnQgeyByZXBsYWNlNWVUYWdzIH0gZnJvbSBcIi4vaGVscGVycy90YWdSZXBsYWNlclwiO1xuaW1wb3J0IHsgYnVpbGRGTSwgc2VyaWFsaXplRnJvbnRtYXR0ZXIsIEZFQVRTX01FVEFfREVGUyB9IGZyb20gXCIuL2hlbHBlcnMvZnJvbnRtYXR0ZXJcIjtcblxuLyoqXG4gKiBQYXJzZSBmZWF0cy5qc29uIGludG8gb25lIE1hcmtkb3duIGZpbGUgcGVyIGZlYXQgdW5kZXIgUGxheWVyIEJ1aWxkL0ZlYXRzLFxuICogaW5jbHVkaW5nIGZyb250bWF0dGVyLCBjbGVhbmVkIHByZXJlcXVpc2l0ZXMsIGFuZCBmb3JtYXR0ZWQgZW50cmllcy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlRmVhdHNGaWxlKGpzb246IGFueSwgZWRpdGlvbklkOiBzdHJpbmcpOiBQYXJzZWRNYXJrZG93bkZpbGVbXSB7XG4gIGNvbnN0IGZlYXRzOiBhbnlbXSA9IEFycmF5LmlzQXJyYXkoanNvbi5mZWF0KVxuICAgID8ganNvbi5mZWF0XG4gICAgOiBBcnJheS5pc0FycmF5KGpzb24uZmVhdHMpXG4gICAgPyBqc29uLmZlYXRzXG4gICAgOiBbXTtcblxuICByZXR1cm4gZmVhdHMubWFwKChmZWF0OiBhbnkpID0+IHtcbiAgICBjb25zdCBsaW5lczogc3RyaW5nW10gPSBbXTtcblxuICAgIC8vIFx1MjUwMFx1MjUwMFx1MjUwMCBGcm9udG1hdHRlciBcdTI1MDBcdTI1MDBcdTI1MDBcbiAgICBjb25zdCBmbSA9IGJ1aWxkRk0oeyAuLi5mZWF0LCBfZWRpdGlvbklkOiBlZGl0aW9uSWQgfSwgRkVBVFNfTUVUQV9ERUZTKTtcbiAgICBsaW5lcy5wdXNoKFwiLS0tXCIpO1xuICAgIGxpbmVzLnB1c2goc2VyaWFsaXplRnJvbnRtYXR0ZXIoZm0sIEZFQVRTX01FVEFfREVGUykpO1xuICAgIGxpbmVzLnB1c2goXCItLS1cIiwgXCJcIik7XG5cbiAgICAvLyBcdTI1MDBcdTI1MDBcdTI1MDAgVGl0bGUgXHUyNTAwXHUyNTAwXHUyNTAwXG4gICAgbGluZXMucHVzaChgIyAke2ZlYXQubmFtZX1gLCBcIlwiKTtcblxuICAgIC8vIFx1MjUwMFx1MjUwMFx1MjUwMCBQcmVyZXF1aXNpdGVzIFx1MjUwMFx1MjUwMFx1MjUwMFxuICAgIGNvbnN0IHByZXJlcXM6IHN0cmluZ1tdID0gW107XG4gICAgaWYgKEFycmF5LmlzQXJyYXkoZmVhdC5wcmVyZXF1aXNpdGUpKSB7XG4gICAgICBmZWF0LnByZXJlcXVpc2l0ZS5mb3JFYWNoKChwcjogYW55KSA9PiB7XG4gICAgICAgIGlmIChwci5sZXZlbCkgcHJlcmVxcy5wdXNoKGBMZXZlbCAke3ByLmxldmVsfWApO1xuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShwci5mZWF0KSkge1xuICAgICAgICAgIHByLmZlYXQuZm9yRWFjaCgoZjogc3RyaW5nKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBuYW1lID0gZi5zcGxpdChcInxcIilbMF0ucmVwbGFjZSgvXFxiXFx3L2csIGMgPT4gYy50b1VwcGVyQ2FzZSgpKTtcbiAgICAgICAgICAgIHByZXJlcXMucHVzaChgUHJlcmVxdWlzaXRlOiBbWyR7bmFtZX1dXWApO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gICAgaWYgKGZlYXQuc3BlbGxjYXN0aW5nUHJlcGFyZWQpIHByZXJlcXMucHVzaChgUHJlcmVxdWlzaXRlOiBTcGVsbGNhc3RlcmApO1xuICAgIGlmIChBcnJheS5pc0FycmF5KGZlYXQudG9vbFByb2ZpY2llbmNpZXMpKSB7XG4gICAgICBmZWF0LnRvb2xQcm9maWNpZW5jaWVzLmZvckVhY2goKHRwOiBhbnkpID0+IHtcbiAgICAgICAgT2JqZWN0LmVudHJpZXModHApLmZvckVhY2goKFtrZXldKSA9PiB7XG4gICAgICAgICAgaWYgKGtleSA9PT0gJ2FueUFydGlzYW5zVG9vbCcpIHtcbiAgICAgICAgICAgIHByZXJlcXMucHVzaChgUHJlcmVxdWlzaXRlOiBQcm9maWNpZW50IHdpdGggYW4gYXJ0aXNhbidzIHRvb2xgKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcHJlcmVxcy5wdXNoKGBQcmVyZXF1aXNpdGU6IFByb2ZpY2llbnQgd2l0aCAke2tleS5yZXBsYWNlKC8oW0EtWl0pL2csJyAkMScpLnRyaW0oKX1gKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfVxuICAgIGlmIChBcnJheS5pc0FycmF5KGZlYXQuYXJtb3JQcm9maWNpZW5jaWVzKSkge1xuICAgICAgZmVhdC5hcm1vclByb2ZpY2llbmNpZXMuZm9yRWFjaCgoYXJtOiBhbnkpID0+IHtcbiAgICAgICAgY29uc3QgYXJtU3RyID0gdHlwZW9mIGFybSA9PT0gJ3N0cmluZycgPyBhcm0gOiBKU09OLnN0cmluZ2lmeShhcm0pO1xuICAgICAgICBwcmVyZXFzLnB1c2goYFByZXJlcXVpc2l0ZTogUHJvZmljaWVudCB3aXRoICR7YXJtU3RyLnJlcGxhY2UoLyhbQS1aXSkvZywnICQxJykudHJpbSgpfWApO1xuICAgICAgfSk7XG4gICAgfVxuICAgIGlmIChmZWF0LnJhY2UpIHByZXJlcXMucHVzaChgUHJlcmVxdWlzaXRlOiAke2ZlYXQucmFjZX1gKTtcblxuICAgIGlmIChwcmVyZXFzLmxlbmd0aCkge1xuICAgICAgbGluZXMucHVzaChcIioqUHJlcmVxdWlzaXRlcyoqXCIpO1xuICAgICAgcHJlcmVxcy5mb3JFYWNoKHAgPT4gbGluZXMucHVzaChgLSAke3B9YCkpO1xuICAgICAgbGluZXMucHVzaChcIlwiKTtcbiAgICB9XG5cbiAgICAvLyBcdTI1MDBcdTI1MDBcdTI1MDAgRW50cmllcyByZW5kZXJpbmcgXHUyNTAwXHUyNTAwXHUyNTAwXG4gICAgY29uc3QgZW50cmllcyA9IEFycmF5LmlzQXJyYXkoZmVhdC5lbnRyaWVzKSA/IGZlYXQuZW50cmllcyA6IFtmZWF0LmVudHJpZXNdO1xuICAgIGVudHJpZXMuZm9yRWFjaCgoZW50cnk6IGFueSkgPT4ge1xuICAgICAgaWYgKCFlbnRyeSkgcmV0dXJuO1xuXG4gICAgICAvLyBQbGFpbiB0ZXh0XG4gICAgICBpZiAodHlwZW9mIGVudHJ5ID09PSAnc3RyaW5nJykge1xuICAgICAgICBlbnRyeS5zcGxpdCgvXFxuezIsfS8pLmZvckVhY2gocCA9PiB7XG4gICAgICAgICAgY29uc3QgdCA9IHAudHJpbSgpO1xuICAgICAgICAgIGlmICh0KSB7XG4gICAgICAgICAgICBsaW5lcy5wdXNoKHJlcGxhY2U1ZVRhZ3ModCkpO1xuICAgICAgICAgICAgbGluZXMucHVzaChcIlwiKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAvLyBMaXN0XG4gICAgICB9IGVsc2UgaWYgKGVudHJ5LnR5cGUgPT09ICdsaXN0JyAmJiBBcnJheS5pc0FycmF5KGVudHJ5Lml0ZW1zKSkge1xuICAgICAgICBlbnRyeS5pdGVtcy5mb3JFYWNoKChpdDogYW55KSA9PiB7XG4gICAgICAgICAgaWYgKHR5cGVvZiBpdCA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgIGxpbmVzLnB1c2goYC0gJHtyZXBsYWNlNWVUYWdzKGl0KX1gKTtcbiAgICAgICAgICB9IGVsc2UgaWYgKGl0LnR5cGUgPT09ICdpdGVtJyAmJiBpdC5uYW1lKSB7XG4gICAgICAgICAgICBsaW5lcy5wdXNoKGAtICoqJHtpdC5uYW1lfSoqYCk7XG4gICAgICAgICAgICBjb25zdCBzdWJzID0gQXJyYXkuaXNBcnJheShpdC5lbnRyaWVzKSA/IGl0LmVudHJpZXMgOiBbaXQuZW50cmllc107XG4gICAgICAgICAgICBzdWJzLmZvckVhY2goKHM6IGFueSkgPT5cbiAgICAgICAgICAgICAgbGluZXMucHVzaChgICAtICR7cmVwbGFjZTVlVGFncyh0eXBlb2YgcyA9PT0gJ3N0cmluZycgPyBzIDogSlNPTi5zdHJpbmdpZnkocykpfWApXG4gICAgICAgICAgICApO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIGxpbmVzLnB1c2goXCJcIik7XG5cbiAgICAgIC8vIEluc2V0IGFzIGluZGVudGVkIGJ1bGxldFxuICAgICAgfSBlbHNlIGlmIChlbnRyeS50eXBlID09PSAnaW5zZXQnKSB7XG4gICAgICAgIGxpbmVzLnB1c2goYC0gKiR7ZW50cnkubmFtZX0qYCk7XG4gICAgICAgIGNvbnN0IHN1YnMgPSBBcnJheS5pc0FycmF5KGVudHJ5LmVudHJpZXMpID8gZW50cnkuZW50cmllcyA6IFtlbnRyeS5lbnRyaWVzXTtcbiAgICAgICAgc3Vicy5mb3JFYWNoKChzOiBhbnkpID0+IGxpbmVzLnB1c2goYCAgLSAke3JlcGxhY2U1ZVRhZ3Mocyl9YCkpO1xuICAgICAgICBsaW5lcy5wdXNoKFwiXCIpO1xuXG4gICAgICAvLyBTZWN0aW9uIG9yIGVudHJpZXNcbiAgICAgIH0gZWxzZSBpZiAoKGVudHJ5LnR5cGUgPT09ICdzZWN0aW9uJyB8fCBlbnRyeS50eXBlID09PSAnZW50cmllcycpICYmIEFycmF5LmlzQXJyYXkoZW50cnkuZW50cmllcykpIHtcbiAgICAgICAgaWYgKGVudHJ5Lm5hbWUpIHtcbiAgICAgICAgICBsaW5lcy5wdXNoKGAjIyAke2VudHJ5Lm5hbWV9YCk7XG4gICAgICAgICAgbGluZXMucHVzaChcIlwiKTtcbiAgICAgICAgfVxuICAgICAgICBlbnRyeS5lbnRyaWVzLmZvckVhY2goKHM6IGFueSkgPT4ge1xuICAgICAgICAgIGxpbmVzLnB1c2gocmVwbGFjZTVlVGFncyh0eXBlb2YgcyA9PT0gJ3N0cmluZycgPyBzIDogSlNPTi5zdHJpbmdpZnkocykpKTtcbiAgICAgICAgICBsaW5lcy5wdXNoKFwiXCIpO1xuICAgICAgICB9KTtcblxuICAgICAgLy8gVGFibGVcbiAgICAgIH0gZWxzZSBpZiAoZW50cnkudHlwZSA9PT0gJ3RhYmxlJyAmJiBBcnJheS5pc0FycmF5KGVudHJ5LnJvd3MpKSB7XG4gICAgICAgIGNvbnN0IGhkciA9IGVudHJ5LmNvbExhYmVscyB8fCBbXTtcbiAgICAgICAgbGluZXMucHVzaChgfCAke2hkci5qb2luKCcgfCAnKX0gfGApO1xuICAgICAgICBsaW5lcy5wdXNoKGB8ICR7aGRyLm1hcCgoKSA9PiAnLS0tJykuam9pbignIHwgJyl9IHxgKTtcbiAgICAgICAgZW50cnkucm93cy5mb3JFYWNoKChyb3c6IGFueVtdKSA9PlxuICAgICAgICAgIGxpbmVzLnB1c2goYHwgJHtyb3cuam9pbignIHwgJyl9IHxgKVxuICAgICAgICApO1xuICAgICAgICBsaW5lcy5wdXNoKFwiXCIpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIHBhdGg6IGBQbGF5ZXIgQnVpbGQvRmVhdHMvJHtmZWF0Lm5hbWV9Lm1kYCxcbiAgICAgIGNvbnRlbnQ6IGxpbmVzLmpvaW4oXCJcXG5cIikudHJpbSgpICsgXCJcXG5cIixcbiAgICB9O1xuICB9KTtcbn1cbiIsICIvLyBzcmMvcGFyc2Vycy9iYWNrZ3JvdW5kcy50c1xuaW1wb3J0IHR5cGUgeyBQYXJzZWRNYXJrZG93bkZpbGUgfSBmcm9tIFwiLi4vLi4vdHlwZXNcIjtcbmltcG9ydCB7IHJlcGxhY2U1ZVRhZ3MgfSBmcm9tIFwiLi9oZWxwZXJzL3RhZ1JlcGxhY2VyXCI7XG5pbXBvcnQgeyByZW5kZXJNYXJrZG93blRhYmxlIH0gZnJvbSBcIi4vaGVscGVycy9tYXJrZG93blRhYmxlXCI7XG5pbXBvcnQgeyBidWlsZEZNLCBzZXJpYWxpemVGcm9udG1hdHRlciwgRk1fRklFTERTLCBmaWx0ZXJWYWxpZFNraWxscywgQkFDS0dST1VORF9NRVRBX0RFRlMgfSBmcm9tIFwiLi9oZWxwZXJzL2Zyb250bWF0dGVyXCI7XG5cbi8qKlxuICogUGFyc2UgYmFja2dyb3VuZHMuanNvbiBpbnRvIG9uZSBNYXJrZG93biBmaWxlIHBlciBiYWNrZ3JvdW5kIHVuZGVyIFBsYXllciBCdWlsZC9CYWNrZ3JvdW5kcyxcbiAqIGV4Y2x1ZGluZyBhbnkgXHUyMDFDVmFyaWFudFx1MjAyNlx1MjAxRCBvciBcdTIwMUNCYWxkdXJcdTIwMTlzIEdhdGVcdTIwMjZcdTIwMUQgZW50cmllcy5cbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gcGFyc2VCYWNrZ3JvdW5kc0ZpbGUoanNvbjogYW55LCBlZGl0aW9uSWQ6IHN0cmluZyk6IFBhcnNlZE1hcmtkb3duRmlsZVtdIHtcbiAgLy8gcHVsbCBpbiB0aGUgYXJyYXlcbiAgY29uc3QgcmF3OiBhbnlbXSA9IEFycmF5LmlzQXJyYXkoanNvbi5iYWNrZ3JvdW5kKVxuICAgID8ganNvbi5iYWNrZ3JvdW5kXG4gICAgOiBBcnJheS5pc0FycmF5KGpzb24uYmFja2dyb3VuZHMpXG4gICAgPyBqc29uLmJhY2tncm91bmRzXG4gICAgOiBbXTtcblxuICAvLyBmaWx0ZXIgb3V0IHVud2FudGVkIGVudHJpZXNcbiAgY29uc3QgYmFja2dyb3VuZHMgPSByYXcuZmlsdGVyKGJnID0+IHtcbiAgICBjb25zdCBubTogc3RyaW5nID0gYmcubmFtZSB8fCBcIlwiO1xuICAgIHJldHVybiAhbm0uc3RhcnRzV2l0aChcIlZhcmlhbnRcIikgJiYgIW5tLmluY2x1ZGVzKFwiQmFsZHVyJ3MgR2F0ZVwiKTtcbiAgfSk7XG5cbiAgY29uc3Qgb3V0cHV0czogUGFyc2VkTWFya2Rvd25GaWxlW10gPSBbXTtcblxuICBiYWNrZ3JvdW5kcy5mb3JFYWNoKGJnID0+IHtcbiAgICBjb25zdCBsaW5lczogc3RyaW5nW10gPSBbXTtcblxuLy8gXHUyNTAwXHUyNTAwXHUyNTAwIGJ1aWxkIGZyb250bWF0dGVyIFx1MjUwMFx1MjUwMFx1MjUwMFxuY29uc3QgZm0gPSBidWlsZEZNKGJnLCBCQUNLR1JPVU5EX01FVEFfREVGUyk7XG5cbi8vIFx1MjUwMFx1MjUwMFx1MjUwMCBjb2xsZWN0IG9ubHkgdGhlIGVudHJpZXMgZmxhZ2dlZCBpc0ZlYXR1cmUgXHUyNTAwXHUyNTAwXHUyNTAwXG5jb25zdCBleHRyYVRyYWl0czogc3RyaW5nW10gPSBBcnJheS5pc0FycmF5KGJnLmVudHJpZXMpXG4gID8gKGJnLmVudHJpZXMgYXMgYW55W10pXG4gICAgICAuZmlsdGVyKChlOiBhbnkpID0+IGUuZGF0YT8uaXNGZWF0dXJlICYmIHR5cGVvZiBlLm5hbWUgPT09IFwic3RyaW5nXCIpXG4gICAgICAubWFwKChlOiBhbnkpID0+IHtcbiAgICAgICAgY29uc3QgbmFtZSA9IGUubmFtZS5yZXBsYWNlKC9eRmVhdHVyZTpcXHMqLywgXCJcIik7XG4gICAgICAgIHJldHVybiBgW1ske2JnLm5hbWV9IyR7bmFtZX1dXWA7XG4gICAgICB9KVxuICA6IFtdO1xuXG4vLyBcdTI1MDBcdTI1MDBcdTI1MDAgc2VyaWFsaXplIGZyb250bWF0dGVyIFx1MjUwMFx1MjUwMFx1MjUwMFxuY29uc3QgeWFtbCA9IHNlcmlhbGl6ZUZyb250bWF0dGVyKGZtLCBCQUNLR1JPVU5EX01FVEFfREVGUyk7XG5saW5lcy5wdXNoKFwiLS0tXCIsIHlhbWwsIFwiLS0tXCIsIFwiXCIpO1xuXG4gXG4gICAgLy8gdGl0bGVcbiAgICBsaW5lcy5wdXNoKGAjICR7YmcubmFtZX1gLCBcIlwiKTtcblxuICAgIC8vIFx1MjUwMFx1MjUwMFx1MjUwMCBza2lsbCBwcm9maWNpZW5jaWVzIFx1MjUwMFx1MjUwMFx1MjUwMFxuICAgIGlmIChBcnJheS5pc0FycmF5KGJnLnNraWxsUHJvZmljaWVuY2llcykgJiYgYmcuc2tpbGxQcm9maWNpZW5jaWVzLmxlbmd0aCkge1xuICAgICAgY29uc3Qgc2tpbGxzOiBzdHJpbmdbXSA9IFtdO1xuICAgICAgYmcuc2tpbGxQcm9maWNpZW5jaWVzLmZvckVhY2goKGVudDogYW55KSA9PiB7XG4gICAgICAgIGlmICh0eXBlb2YgZW50ID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgc2tpbGxzLnB1c2goY2FwKGVudCkpO1xuICAgICAgICB9IGVsc2UgaWYgKGVudC5jaG9vc2UgJiYgQXJyYXkuaXNBcnJheShlbnQuY2hvb3NlLmZyb20pKSB7XG4gICAgICAgICAgc2tpbGxzLnB1c2goYENob29zZSAke2VudC5jaG9vc2UuYW1vdW50fSBmcm9tICR7ZW50LmNob29zZS5mcm9tLmpvaW4oXCIsIFwiKX1gKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBPYmplY3QuZW50cmllcyhlbnQpXG4gICAgICAgICAgICAuZmlsdGVyKChbLCB2XSkgPT4gdiA9PT0gdHJ1ZSlcbiAgICAgICAgICAgIC5mb3JFYWNoKChba10pID0+IHNraWxscy5wdXNoKGNhcChrKSkpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIGxpbmVzLnB1c2goYCoqU2tpbGwgUHJvZmljaWVuY2llczoqKiAke3NraWxscy5qb2luKFwiLCBcIil9YCwgXCJcIik7XG4gICAgfVxuXG4gICAgLy8gXHUyNTAwXHUyNTAwXHUyNTAwIGxhbmd1YWdlIHByb2ZpY2llbmNpZXMgXHUyNTAwXHUyNTAwXHUyNTAwXG4gICAgaWYgKEFycmF5LmlzQXJyYXkoYmcubGFuZ3VhZ2VQcm9maWNpZW5jaWVzKSAmJiBiZy5sYW5ndWFnZVByb2ZpY2llbmNpZXMubGVuZ3RoKSB7XG4gICAgICBjb25zdCBsYW5nczogc3RyaW5nW10gPSBbXTtcbiAgICAgIGJnLmxhbmd1YWdlUHJvZmljaWVuY2llcy5mb3JFYWNoKChlbnQ6IGFueSkgPT4ge1xuICAgICAgICBpZiAoZW50LmFueVN0YW5kYXJkKSB7XG4gICAgICAgICAgbGFuZ3MucHVzaChgJHtlbnQuYW55U3RhbmRhcmR9IG9mIHlvdXIgY2hvaWNlYCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgT2JqZWN0LmVudHJpZXMoZW50KVxuICAgICAgICAgICAgLmZpbHRlcigoWywgdl0pID0+IHYgPT09IHRydWUpXG4gICAgICAgICAgICAuZm9yRWFjaCgoW2tdKSA9PiBsYW5ncy5wdXNoKGNhcChrKSkpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIGxpbmVzLnB1c2goYCoqTGFuZ3VhZ2VzOioqICR7bGFuZ3Muam9pbihcIiwgXCIpfWAsIFwiXCIpO1xuICAgIH1cblxuICAgIC8vIFx1MjUwMFx1MjUwMFx1MjUwMCB0b29sIHByb2ZpY2llbmNpZXMgXHUyNTAwXHUyNTAwXHUyNTAwXG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KGJnLnRvb2xQcm9maWNpZW5jaWVzKSAmJiBiZy50b29sUHJvZmljaWVuY2llcy5sZW5ndGgpIHtcbiAgICAgICAgY29uc3QgdG9vbHM6IHN0cmluZ1tdID0gW107XG5cbiAgICAgICAgYmcudG9vbFByb2ZpY2llbmNpZXMuZm9yRWFjaCgoZW50OiBhbnkpID0+IHtcbiAgICAgICAgICAgIC8vIFx1MjAxQ0Nob29zZSBYIGZyb20gXHUyMDI2XHUyMDFEXG4gICAgICAgICAgICBpZiAoZW50LmNob29zZSAmJiBBcnJheS5pc0FycmF5KGVudC5jaG9vc2UuZnJvbSkpIHtcbiAgICAgICAgICAgIGNvbnN0IGxpc3QgPSBlbnQuY2hvb3NlLmZyb20ubWFwKGh1bWFuaXplKS5qb2luKFwiLCBcIik7XG4gICAgICAgICAgICB0b29scy5wdXNoKGBDaG9vc2UgJHtlbnQuY2hvb3NlLmNvdW50fSBmcm9tICR7bGlzdH1gKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gcGxhaW4gc3RyaW5nIChyYXJlIGhlcmUsIGJ1dCBqdXN0IGluIGNhc2UpXG4gICAgICAgICAgICBpZiAodHlwZW9mIGVudCA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgdG9vbHMucHVzaChodW1hbml6ZShlbnQpKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gb2JqZWN0IHdpdGggYm9vbGVhbiBmbGFnczogZ2F0aGVyICphbGwqIHRydWUga2V5c1xuICAgICAgICAgICAgT2JqZWN0LmVudHJpZXMoZW50KVxuICAgICAgICAgICAgLmZpbHRlcigoW18sIHZdKSA9PiB2ID09PSB0cnVlKVxuICAgICAgICAgICAgLmZvckVhY2goKFtrXSkgPT4gdG9vbHMucHVzaChodW1hbml6ZShrKSkpO1xuICAgICAgICB9KTtcblxuICAgICAgICBsaW5lcy5wdXNoKGAqKlRvb2wgUHJvZmljaWVuY2llczoqKiAke3Rvb2xzLmpvaW4oXCIsIFwiKX1gLCBcIlwiKTtcbiAgICAgICAgfVxuXG5cblxuICAgIC8vIFx1MjUwMFx1MjUwMFx1MjUwMCBzdGFydGluZyBlcXVpcG1lbnQgXHUyNTAwXHUyNTAwXHUyNTAwXG4gICAgaWYgKEFycmF5LmlzQXJyYXkoYmcuc3RhcnRpbmdFcXVpcG1lbnQpICYmIGJnLnN0YXJ0aW5nRXF1aXBtZW50Lmxlbmd0aCkge1xuICAgICAgbGluZXMucHVzaChgKipFcXVpcG1lbnQ6KipgKTtcbiAgICAgIGJnLnN0YXJ0aW5nRXF1aXBtZW50LmZvckVhY2goKGdycDogYW55KSA9PiB7XG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KGdycC5fKSkge1xuICAgICAgICAgIGdycC5fLmZvckVhY2goKGl0OiBhbnkpID0+IGxpbmVzLnB1c2goYC0gJHtmbXRJdGVtKGl0KX1gKSk7XG4gICAgICAgIH1cbiAgICAgICAgW1wiYVwiLCBcImJcIl0uZm9yRWFjaChrZXkgPT4ge1xuICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KGdycFtrZXldKSkge1xuICAgICAgICAgICAgZ3JwW2tleV0uZm9yRWFjaCgoaXQ6IGFueSkgPT4gbGluZXMucHVzaChgLSAke2ZtdEl0ZW0oaXQpfWApKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgICBsaW5lcy5wdXNoKFwiXCIpO1xuICAgIH1cblxuICAgIC8vIFx1MjUwMFx1MjUwMFx1MjUwMCBhbGwgZmVhdHVyZSAmIGVudHJpZXMgYmxvY2tzIFx1MjUwMFx1MjUwMFx1MjUwMFxuICAgIGlmIChBcnJheS5pc0FycmF5KGJnLmVudHJpZXMpKSB7XG4gICAgICBiZy5lbnRyaWVzLmZvckVhY2goKGVudHJ5OiBhbnkpID0+IHtcbiAgICAgICAgLy8gc2tpcCB0aGUgc3VtbWFyeSBsaXN0IGJsb2NrXG4gICAgICAgIGlmIChlbnRyeS50eXBlID09PSBcImxpc3RcIiAmJiBlbnRyeS5zdHlsZSA9PT0gXCJsaXN0LWhhbmctbm90aXRsZVwiKSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIC8vIHNlY3Rpb24gaGVhZGVyXG4gICAgICAgIGlmIChlbnRyeS5uYW1lKSB7XG5jb25zdCBoZWFkZXIgPSBlbnRyeS5kYXRhPy5pc0ZlYXR1cmVcbiAgPyBlbnRyeS5uYW1lLnJlcGxhY2UoL15GZWF0dXJlOlxccyovLCBcIlwiKVxuICA6IGVudHJ5Lm5hbWU7XG5saW5lcy5wdXNoKGAjIyAke2hlYWRlcn1gLCBcIlwiKTsgICAgICAgIH1cbiAgICAgICAgLy8gZW50cnkgY29udGVudFxuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShlbnRyeS5lbnRyaWVzKSkge1xuICAgICAgICAgIGVudHJ5LmVudHJpZXMuZm9yRWFjaCgoZTogYW55KSA9PiB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIGUgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgICAgbGluZXMucHVzaChyZXBsYWNlNWVUYWdzKGUpLCBcIlwiKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZS50eXBlID09PSBcImxpc3RcIiAmJiBBcnJheS5pc0FycmF5KGUuaXRlbXMpKSB7XG4gICAgICAgICAgICAgIGUuaXRlbXMuZm9yRWFjaCgoaXQ6IGFueSkgPT5cbiAgICAgICAgICAgICAgICBsaW5lcy5wdXNoKGAtICR7cmVwbGFjZTVlVGFncyhpdC5lbnRyeSA/PyBpdCl9YClcbiAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgbGluZXMucHVzaChcIlwiKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZS50eXBlID09PSBcInRhYmxlXCIpIHtcbiAgICAgICAgICAgICAgY29uc3QgdGJsID0gcmVuZGVyTWFya2Rvd25UYWJsZShlKTtcbiAgICAgICAgICAgICAgaWYgKHRibCkgbGluZXMucHVzaCh0YmwsIFwiXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2UgaWYgKGVudHJ5LnR5cGUgPT09IFwibGlzdFwiICYmIEFycmF5LmlzQXJyYXkoZW50cnkuaXRlbXMpKSB7XG4gICAgICAgICAgZW50cnkuaXRlbXMuZm9yRWFjaCgoaXQ6IGFueSkgPT5cbiAgICAgICAgICAgIGxpbmVzLnB1c2goYC0gJHtyZXBsYWNlNWVUYWdzKGl0LmVudHJ5ID8/IGl0KX1gKVxuICAgICAgICAgICk7XG4gICAgICAgICAgbGluZXMucHVzaChcIlwiKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgb3V0cHV0cy5wdXNoKHtcbiAgICAgIHBhdGg6IGBQbGF5ZXIgQnVpbGQvQmFja2dyb3VuZHMvJHtiZy5uYW1lfS5tZGAsXG4gICAgICBjb250ZW50OiBsaW5lcy5qb2luKFwiXFxuXCIpLnRyaW1FbmQoKSArIFwiXFxuXCIsXG4gICAgfSk7XG4gIH0pO1xuXG4gIHJldHVybiBvdXRwdXRzO1xufVxuXG4vLyBcdTIwMTRcdTIwMTRcdTIwMTQgaGVscGVycyBcdTIwMTRcdTIwMTRcdTIwMTRcbmZ1bmN0aW9uIGNhcChzdHI6IHN0cmluZykge1xuICByZXR1cm4gc3RyLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgc3RyLnNsaWNlKDEpO1xufVxuXG5cbmZ1bmN0aW9uIGZtdEl0ZW0oaXRlbTogYW55KTogc3RyaW5nIHtcbiAgLy8gMSkgcmF3IHN0cmluZyBvciB0YWdnZWQgaXRlbVxuICBpZiAodHlwZW9mIGl0ZW0gPT09IFwic3RyaW5nXCIpIHtcbiAgICBpZiAoaXRlbS5pbmNsdWRlcyhcInxcIikpIHtcbiAgICAgIHJldHVybiByZXBsYWNlNWVUYWdzKGB7QGl0ZW0gJHtpdGVtfX1gKTtcbiAgICB9XG4gICAgcmV0dXJuIHJlcGxhY2U1ZVRhZ3MoaXRlbSk7XG4gIH1cblxuICAvLyAyKSBwdXJlIGdvbGQtcGllY2UgZW50cnk6IHsgdmFsdWU6IDEwIH0gb3IgeyBjb250YWluc1ZhbHVlOiAxNTAwIH1cbiAgY29uc3QgcHJpY2VSYXcgPSAoaXRlbS5jb250YWluc1ZhbHVlID8/IGl0ZW0udmFsdWUpIGFzIG51bWJlciB8IHVuZGVmaW5lZDtcbiAgaWYgKFxuICAgIHR5cGVvZiBwcmljZVJhdyA9PT0gXCJudW1iZXJcIiAmJlxuICAgIC8vIG1ha2Ugc3VyZSBpdFx1MjAxOXMgbm90IGFsc28gYW4gXHUyMDFDaXRlbVx1MjAxRCBvciBcdTIwMUNlcXVpcG1lbnRUeXBlXHUyMDFEXG4gICAgIWl0ZW0uaXRlbSAmJlxuICAgICFpdGVtLmVxdWlwbWVudFR5cGUgJiZcbiAgICAhaXRlbS5zcGVjaWFsXG4gICkge1xuICAgIGNvbnN0IGdwID0gcHJpY2VSYXcgPj0gMTAwID8gcHJpY2VSYXcgLyAxMDAgOiBwcmljZVJhdztcbiAgICByZXR1cm4gYCR7Z3B9IGdwYDtcbiAgfVxuXG4gIC8vIDMpIGV4cGxpY2l0IGl0ZW0gb2JqZWN0IHdpdGggb3B0aW9uYWwgcHJpY2VcbiAgaWYgKGl0ZW0uaXRlbSkge1xuICAgIGNvbnN0IGxpbmsgPSByZXBsYWNlNWVUYWdzKGB7QGl0ZW0gJHtpdGVtLml0ZW19fWApO1xuICAgIGlmICh0eXBlb2YgcHJpY2VSYXcgPT09IFwibnVtYmVyXCIpIHtcbiAgICAgIGNvbnN0IGdwID0gcHJpY2VSYXcgPj0gMTAwID8gcHJpY2VSYXcgLyAxMDAgOiBwcmljZVJhdztcbiAgICAgIHJldHVybiBgJHtsaW5rfSAoJHtncH0gZ3ApYDtcbiAgICB9XG4gICAgcmV0dXJuIGxpbms7XG4gIH1cblxuICAvLyA0KSBzcGVjaWFsLWNhc2UgdGV4dFxuICBpZiAodHlwZW9mIGl0ZW0uc3BlY2lhbCA9PT0gXCJzdHJpbmdcIikge1xuICAgIHJldHVybiBpdGVtLnNwZWNpYWw7XG4gIH1cblxuICAvLyA1KSBrbm93biBlcXVpcG1lbnRUeXBlIGtleXNcbiAgaWYgKGl0ZW0uZXF1aXBtZW50VHlwZSkge1xuICAgIHN3aXRjaCAoaXRlbS5lcXVpcG1lbnRUeXBlKSB7XG4gICAgICBjYXNlIFwidG9vbEFydGlzYW5cIjpcbiAgICAgICAgcmV0dXJuIFwiT25lIHR5cGUgb2YgYXJ0aXNhblx1MjAxOXMgdG9vbHMgKG9mIHlvdXIgY2hvaWNlKVwiO1xuICAgICAgY2FzZSBcImluc3RydW1lbnRNdXNpY2FsXCI6XG4gICAgICAgIHJldHVybiBcIk9uZSB0eXBlIG9mIG11c2ljYWwgaW5zdHJ1bWVudCAob2YgeW91ciBjaG9pY2UpXCI7XG4gICAgICBjYXNlIFwic2V0R2FtaW5nXCI6XG4gICAgICAgIHJldHVybiBcIk9uZSBzZXQgb2YgZ2FtaW5nIGRpY2UgKG9mIHlvdXIgY2hvaWNlKVwiO1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuIGh1bWFuaXplKGl0ZW0uZXF1aXBtZW50VHlwZSk7XG4gICAgfVxuICB9XG5cbiAgLy8gNikgZmFsbGJhY2s6IGR1bXAgYW55IGxlZnRvdmVyIHRhZyBzeW50YXhcbiAgcmV0dXJuIHJlcGxhY2U1ZVRhZ3MoSlNPTi5zdHJpbmdpZnkoaXRlbSkpO1xufVxuXG5cblxuZnVuY3Rpb24gaHVtYW5pemUoc3RyOiBzdHJpbmcpOiBzdHJpbmcge1xuICBjb25zdCBzcGFjZWQgPSBzdHIucmVwbGFjZSgvKFthLXpdKShbQS1aXSkvZywgXCIkMSAkMlwiKTtcbiAgcmV0dXJuIHNwYWNlZC5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIHNwYWNlZC5zbGljZSgxKTtcbn1cbiIsICIvLzVlIDIwMjUgaW5zdGFsbGVyXG5cbmltcG9ydCB7IEFwcCwgbm9ybWFsaXplUGF0aCB9IGZyb20gXCJvYnNpZGlhblwiO1xuaW1wb3J0IHR5cGUgeyBFZGl0aW9uIH0gZnJvbSBcIi4uLy4uL2VkaXRpb25zXCI7XG5pbXBvcnQgeyBwYXJzZVNwZWxsc0ZpbGUgfSBmcm9tIFwiLi9zcGVsbHNcIjtcbmltcG9ydCB7IHBhcnNlQmVzdGlhcnlGaWxlIH0gZnJvbSBcIi4vYmVzdGlhcnlcIjtcbmltcG9ydCB7IHBhcnNlSXRlbXNGaWxlIH0gZnJvbSBcIi4vaXRlbXNcIjtcbmltcG9ydCB7IHBhcnNlU3BlY2llc0ZpbGUgfSBmcm9tIFwiLi9zcGVjaWVzXCI7XG5pbXBvcnQgeyBwYXJzZUNsYXNzRmlsZSB9IGZyb20gXCIuL2NsYXNzZXNcIjtcbmltcG9ydCB7IHBhcnNlQWN0aW9uc0ZpbGUsIHBhcnNlQ29uZGl0aW9uc0Rpc2Vhc2VzRmlsZSwgcGFyc2VTZW5zZXNGaWxlLCBwYXJzZVNraWxsc0ZpbGUgfSBmcm9tIFwiLi9ydWxlc1wiO1xuaW1wb3J0IHsgcGFyc2VGZWF0c0ZpbGUgfSBmcm9tIFwiLi9mZWF0c1wiO1xuaW1wb3J0IHsgcGFyc2VCYWNrZ3JvdW5kc0ZpbGUgfSBmcm9tIFwiLi9iYWNrZ3JvdW5kc1wiO1xuaW1wb3J0IHsgVEZpbGUgfSBmcm9tIFwib2JzaWRpYW5cIjtcblxuXG4vLyBcdTIwMTQgR2l0SHViIGxpc3RpbmdzIFx1MjAxNFxuYXN5bmMgZnVuY3Rpb24gbGlzdFNwZWxsRmlsZXNGcm9tR2l0SHViKHJlcG86IHN0cmluZyk6IFByb21pc2U8c3RyaW5nW10+IHtcbiAgY29uc3QgdXJsID0gYGh0dHBzOi8vYXBpLmdpdGh1Yi5jb20vcmVwb3MvJHtyZXBvfS9jb250ZW50cy9kYXRhL3NwZWxsc2A7XG4gIGNvbnN0IHJlcyA9IGF3YWl0IGZldGNoKHVybCk7XG4gIGNvbnN0IGRhdGEgPSAoYXdhaXQgcmVzLmpzb24oKSkgYXMgQXJyYXk8eyBuYW1lOiBzdHJpbmc7IHR5cGU6IHN0cmluZyB9PjtcbiAgcmV0dXJuIGRhdGFcbiAgICAuZmlsdGVyKGl0ZW0gPT4gaXRlbS50eXBlID09PSBcImZpbGVcIiAmJiBpdGVtLm5hbWUuc3RhcnRzV2l0aChcInNwZWxscy1cIikgJiYgaXRlbS5uYW1lLmVuZHNXaXRoKFwiLmpzb25cIikpXG4gICAgLm1hcChpdGVtID0+IGl0ZW0ubmFtZSk7XG59XG5cbmFzeW5jIGZ1bmN0aW9uIGxpc3RCZXN0aWFyeUZpbGVzRnJvbUdpdEh1YihyZXBvOiBzdHJpbmcpOiBQcm9taXNlPHN0cmluZ1tdPiB7XG4gIGNvbnN0IHVybCA9IGBodHRwczovL2FwaS5naXRodWIuY29tL3JlcG9zLyR7cmVwb30vY29udGVudHMvZGF0YS9iZXN0aWFyeWA7XG4gIGNvbnN0IHJlcyA9IGF3YWl0IGZldGNoKHVybCk7XG4gIGNvbnN0IGxpc3QgPSAoYXdhaXQgcmVzLmpzb24oKSkgYXMgQXJyYXk8eyBuYW1lOiBzdHJpbmc7IHR5cGU6IHN0cmluZyB9PjtcbiAgY29uc3QgQ09SRV9TT1VSQ0VTID0gW1xuICAgIFwiYmVzdGlhcnktcGhiLmpzb25cIiwgXCJiZXN0aWFyeS1tbS5qc29uXCIsIFwiYmVzdGlhcnktZG1nLmpzb25cIixcbiAgICBcImJlc3RpYXJ5LXhnZS5qc29uXCIsIFwiYmVzdGlhcnktdmdtLmpzb25cIiwgXCJiZXN0aWFyeS10Y2UuanNvblwiLFxuICAgIFwiYmVzdGlhcnktZWd3Lmpzb25cIiwgXCJiZXN0aWFyeS1lcmx3Lmpzb25cIiwgXCJiZXN0aWFyeS1tdGYuanNvblwiLFxuICAgIFwiYmVzdGlhcnktdnJnci5qc29uXCIsIFwiYmVzdGlhcnktY29zLmpzb25cIiwgXCJiZXN0aWFyeS1vb3RhLmpzb25cIixcbiAgICBcImJlc3RpYXJ5LXBvdGEuanNvblwiLCBcImJlc3RpYXJ5LWhvdGRxLmpzb25cIiwgXCJiZXN0aWFyeS1yb3QuanNvblwiLFxuICAgIFwiYmVzdGlhcnktc2t0Lmpzb25cIiwgXCJiZXN0aWFyeS10ZnR5cC5qc29uXCIsIFwiYmVzdGlhcnktdG9hLmpzb25cIlxuICBdO1xuICByZXR1cm4gbGlzdFxuICAgIC5maWx0ZXIoaXRlbSA9PiBpdGVtLnR5cGUgPT09IFwiZmlsZVwiICYmIENPUkVfU09VUkNFUy5pbmNsdWRlcyhpdGVtLm5hbWUpKVxuICAgIC5tYXAoaXRlbSA9PiBpdGVtLm5hbWUpO1xufVxuXG5jb25zdCBJVEVNX0pTT05fRklMRVMgPSBbXG4gIFwiaXRlbXMtYmFzZS5qc29uXCIsXG4gIFwiaXRlbXMuanNvblwiLFxuICBcIm9iamVjdHMuanNvblwiLFxuICBcInZlaGljbGVzLmpzb25cIixcbiAgXCJkZWNrcy5qc29uXCIsXG5dO1xuXG5hc3luYyBmdW5jdGlvbiBsaXN0SXRlbUZpbGVzRnJvbUdpdEh1YihyZXBvOiBzdHJpbmcpOiBQcm9taXNlPHN0cmluZ1tdPiB7XG4gIGNvbnN0IHVybCA9IGBodHRwczovL2FwaS5naXRodWIuY29tL3JlcG9zLyR7cmVwb30vY29udGVudHMvZGF0YWA7XG4gIGNvbnN0IHJlcyA9IGF3YWl0IGZldGNoKHVybCk7XG4gIGNvbnN0IGRhdGEgPSAoYXdhaXQgcmVzLmpzb24oKSkgYXMgQXJyYXk8eyBuYW1lOiBzdHJpbmc7IHR5cGU6IHN0cmluZyB9PjtcbiAgcmV0dXJuIGRhdGFcbiAgICAuZmlsdGVyKGl0ZW0gPT4gaXRlbS50eXBlID09PSBcImZpbGVcIiAmJiBJVEVNX0pTT05fRklMRVMuaW5jbHVkZXMoaXRlbS5uYW1lKSlcbiAgICAubWFwKGl0ZW0gPT4gaXRlbS5uYW1lKTtcbn1cblxuYXN5bmMgZnVuY3Rpb24gbGlzdENsYXNzRmlsZXNGcm9tR2l0SHViKHJlcG86IHN0cmluZyk6IFByb21pc2U8c3RyaW5nW10+IHtcbiAgY29uc3QgdXJsID0gYGh0dHBzOi8vYXBpLmdpdGh1Yi5jb20vcmVwb3MvJHtyZXBvfS9jb250ZW50cy9kYXRhL2NsYXNzYDtcbiAgY29uc3QgcmVzID0gYXdhaXQgZmV0Y2godXJsKTtcbiAgY29uc3QgbGlzdGluZyA9IChhd2FpdCByZXMuanNvbigpKSBhcyBBcnJheTx7IG5hbWU6IHN0cmluZzsgdHlwZTogc3RyaW5nIH0+O1xuICByZXR1cm4gbGlzdGluZ1xuICAgIC5maWx0ZXIoaXRlbSA9PlxuICAgICAgaXRlbS50eXBlID09PSBcImZpbGVcIiAmJlxuICAgICAgaXRlbS5uYW1lLnN0YXJ0c1dpdGgoXCJjbGFzcy1cIikgJiZcbiAgICAgIGl0ZW0ubmFtZS5lbmRzV2l0aChcIi5qc29uXCIpXG4gICAgKVxuICAgIC5tYXAoaXRlbSA9PiBpdGVtLm5hbWUpO1xufVxuXG4vLyBcdTIwMTQgZW5zdXJlIHRoZSB2YXVsdCBmb2xkZXIgZXhpc3RzIFx1MjAxNFxuYXN5bmMgZnVuY3Rpb24gZW5zdXJlRm9sZGVyKGFwcDogQXBwLCBmb2xkZXJQYXRoOiBzdHJpbmcpIHtcbiAgY29uc3QgcGFydHMgPSBmb2xkZXJQYXRoLnNwbGl0KFwiL1wiKTtcbiAgbGV0IGN1cnIgPSBcIlwiO1xuICBmb3IgKGNvbnN0IHAgb2YgcGFydHMpIHtcbiAgICBjdXJyID0gY3VyciA/IGAke2N1cnJ9LyR7cH1gIDogcDtcbiAgICB0cnkgeyBhd2FpdCBhcHAudmF1bHQuY3JlYXRlRm9sZGVyKGN1cnIpOyB9XG4gICAgY2F0Y2gge30gLy8gYWxyZWFkeSBleGlzdHNcbiAgfVxufVxuXG4vLyBcdTIwMTQgdGhlIG9uZSBlbnRyeS1wb2ludCB0aGF0IHlvdXIgdG9wLWxldmVsIGNhbGxzIFx1MjAxNFxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGltcG9ydEVkaXRpb25EYXRhKHBhcmFtczoge1xuICBhcHA6IEFwcDtcbiAgZWRpdGlvbjogRWRpdGlvbjtcbiAgdGFyZ2V0UGF0aDogc3RyaW5nO1xufSkge1xuICBjb25zdCB7IGFwcCwgZWRpdGlvbiwgdGFyZ2V0UGF0aCB9ID0gcGFyYW1zO1xuICBjb25zdCByZXBvID0gZWRpdGlvbi5yZXBvID8/IFwiXCI7XG5cbiAgLy8gXHVEODNEXHVERDM5IFNQRUxMU1xuICB7XG4gICAgY29uc3Qgc3BlbGxGaWxlcyA9IGF3YWl0IGxpc3RTcGVsbEZpbGVzRnJvbUdpdEh1YihyZXBvKTtcbiAgICBmb3IgKGNvbnN0IGZpbGVOYW1lIG9mIHNwZWxsRmlsZXMpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHJlcyAgPSBhd2FpdCBmZXRjaChgJHtlZGl0aW9uLnNvdXJjZVVybH0vc3BlbGxzLyR7ZmlsZU5hbWV9YCk7XG4gICAgICAgIGNvbnN0IGpzb24gPSBhd2FpdCByZXMuanNvbigpO1xuICAgICAgICBjb25zdCBmaWxlcyA9IHBhcnNlU3BlbGxzRmlsZShqc29uLCBlZGl0aW9uLmlkKTtcbiAgICAgICAgZm9yIChjb25zdCBtZCBvZiBmaWxlcykge1xuICAgICAgICAgIGNvbnN0IGZ1bGxQYXRoID0gbm9ybWFsaXplUGF0aChgJHt0YXJnZXRQYXRofS9TcGVsbHMvJHttZC5wYXRofWApO1xuICAgICAgICAgIGNvbnN0IGZvbGRlciAgID0gZnVsbFBhdGguc3BsaXQoXCIvXCIpLnNsaWNlKDAsIC0xKS5qb2luKFwiL1wiKTtcbiAgICAgICAgICBhd2FpdCBlbnN1cmVGb2xkZXIoYXBwLCBmb2xkZXIpO1xuICAgICAgICAgIGF3YWl0IGFwcC52YXVsdC5hZGFwdGVyLndyaXRlKGZ1bGxQYXRoLCBtZC5jb250ZW50KTtcbiAgICAgICAgfVxuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBjb25zb2xlLndhcm4oYEZhaWxlZCB0byBpbXBvcnQgc3BlbGwgJHtmaWxlTmFtZX06YCwgZSk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLy8gXHVEODNEXHVERDM5IEJFU1RJQVJZXG4gIHtcbiAgICBjb25zdCBiZXN0aWFyeUZpbGVzID0gYXdhaXQgbGlzdEJlc3RpYXJ5RmlsZXNGcm9tR2l0SHViKHJlcG8pO1xuICAgIGZvciAoY29uc3QgZmlsZU5hbWUgb2YgYmVzdGlhcnlGaWxlcykge1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgcmVzICAgID0gYXdhaXQgZmV0Y2goYCR7ZWRpdGlvbi5zb3VyY2VVcmx9L2Jlc3RpYXJ5LyR7ZmlsZU5hbWV9YCk7XG4gICAgICAgIGNvbnN0IGpzb24gICA9IGF3YWl0IHJlcy5qc29uKCk7XG4gICAgICAgIGNvbnN0IHBhcnNlZCA9IHBhcnNlQmVzdGlhcnlGaWxlKGpzb24sIGVkaXRpb24uaWQpO1xuICAgICAgICBmb3IgKGNvbnN0IG1kIG9mIHBhcnNlZCkge1xuICAgICAgICAgIGNvbnN0IGZ1bGxQYXRoID0gbm9ybWFsaXplUGF0aChgJHt0YXJnZXRQYXRofS9CZXN0aWFyeS8ke21kLnBhdGh9YCk7XG4gICAgICAgICAgY29uc3QgZm9sZGVyICAgPSBmdWxsUGF0aC5zcGxpdChcIi9cIikuc2xpY2UoMCwgLTEpLmpvaW4oXCIvXCIpO1xuICAgICAgICAgIGF3YWl0IGVuc3VyZUZvbGRlcihhcHAsIGZvbGRlcik7XG4gICAgICAgICAgYXdhaXQgYXBwLnZhdWx0LmFkYXB0ZXIud3JpdGUoZnVsbFBhdGgsIG1kLmNvbnRlbnQpO1xuICAgICAgICB9XG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGNvbnNvbGUud2FybihgRmFpbGVkIHRvIGltcG9ydCBiZXN0aWFyeSAke2ZpbGVOYW1lfTpgLCBlKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvLyBcdUQ4M0RcdUREMzkgSVRFTVNcbiAge1xuICAgIGNvbnN0IGl0ZW1GaWxlcyA9IGF3YWl0IGxpc3RJdGVtRmlsZXNGcm9tR2l0SHViKHJlcG8pO1xuICAgIGZvciAoY29uc3QgZm4gb2YgaXRlbUZpbGVzKSB7XG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCByZXMgID0gYXdhaXQgZmV0Y2goYCR7ZWRpdGlvbi5zb3VyY2VVcmx9LyR7Zm59YCk7XG4gICAgICAgIGNvbnN0IGpzb24gPSBhd2FpdCByZXMuanNvbigpO1xuICAgICAgICBjb25zdCBtZEZpbGVzID0gcGFyc2VJdGVtc0ZpbGUoanNvbiwgZWRpdGlvbi5pZCk7XG4gICAgICAgIGZvciAoY29uc3QgbWQgb2YgbWRGaWxlcykge1xuICAgICAgICAgIGNvbnN0IGZ1bGxQYXRoID0gbm9ybWFsaXplUGF0aChgJHt0YXJnZXRQYXRofS8ke21kLnBhdGh9YCk7XG4gICAgICAgICAgY29uc3QgZm9sZGVyICAgPSBmdWxsUGF0aC5zcGxpdChcIi9cIikuc2xpY2UoMCwgLTEpLmpvaW4oXCIvXCIpO1xuICAgICAgICAgIGF3YWl0IGVuc3VyZUZvbGRlcihhcHAsIGZvbGRlcik7XG4gICAgICAgICAgYXdhaXQgYXBwLnZhdWx0LmFkYXB0ZXIud3JpdGUoZnVsbFBhdGgsIG1kLmNvbnRlbnQpO1xuICAgICAgICB9XG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGNvbnNvbGUud2FybihgRmFpbGVkIHRvIGltcG9ydCBpdGVtcyBmcm9tICR7Zm59OmAsIGUpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuLy8gXHVEODNEXHVERDM5IFNQRUNJRVNcbntcbiAgY29uc3QgcmVzICA9IGF3YWl0IGZldGNoKGAke2VkaXRpb24uc291cmNlVXJsfS9yYWNlcy5qc29uYCk7XG4gIGNvbnN0IGpzb24gPSBhd2FpdCByZXMuanNvbigpO1xuICBjb25zdCBtZEZpbGVzID0gcGFyc2VTcGVjaWVzRmlsZShqc29uLCBlZGl0aW9uLmlkKTtcbiAgZm9yIChjb25zdCBtZCBvZiBtZEZpbGVzKSB7XG4gICAgY29uc3QgZnVsbFBhdGggPSBub3JtYWxpemVQYXRoKGAke3RhcmdldFBhdGh9L1BsYXllciBCdWlsZC8ke21kLnBhdGh9YCk7XG4gICAgYXdhaXQgZW5zdXJlRm9sZGVyKGFwcCwgZnVsbFBhdGguc3BsaXQoXCIvXCIpLnNsaWNlKDAsIC0xKS5qb2luKFwiL1wiKSk7XG4gICAgYXdhaXQgYXBwLnZhdWx0LmFkYXB0ZXIud3JpdGUoZnVsbFBhdGgsIG1kLmNvbnRlbnQpO1xuICB9XG4vLyBcdUQ4M0RcdUREMzkgRkVUQ0ggT1BUSU9OQUwgRkVBVFVSRVMgSlNPTlxubGV0IG9wdGlvbmFsRmVhdHVyZXM6IGFueVtdID0gW107XG50cnkge1xuICBjb25zdCB1cmwgID0gYCR7ZWRpdGlvbi5zb3VyY2VVcmx9L29wdGlvbmFsZmVhdHVyZXMuanNvbmA7XG4gIGNvbnN0IHJlcyAgPSBhd2FpdCBmZXRjaCh1cmwpO1xuICBjb25zdCB0ZXh0ID0gYXdhaXQgcmVzLnRleHQoKTtcblxuICAvLyBzdHJpcCBhbnkgSlNPTi1oaWphY2sgcHJlZml4IChlLmcuICldfScsKSBhbmQgYW55IEJPTS93aGl0ZXNwYWNlXG4gIGNvbnN0IHN0YXJ0ID0gdGV4dC5pbmRleE9mKFwie1wiKTtcbiAgaWYgKHN0YXJ0ID09PSAtMSkgdGhyb3cgbmV3IEVycm9yKFwiTm8gSlNPTiBvYmplY3QgZm91bmRcIik7XG4gIGNvbnN0IGNsZWFuSnNvbiA9IHRleHQuc2xpY2Uoc3RhcnQpO1xuXG4gIGNvbnN0IHJhdyA9IEpTT04ucGFyc2UoY2xlYW5Kc29uKTtcbiAgb3B0aW9uYWxGZWF0dXJlcyA9IEFycmF5LmlzQXJyYXkocmF3Lm9wdGlvbmFsZmVhdHVyZSlcbiAgICA/IHJhdy5vcHRpb25hbGZlYXR1cmVcbiAgICA6IFtdO1xufSBjYXRjaCAoZSkge1xuICBjb25zb2xlLndhcm4oXCJGYWlsZWQgdG8gaW1wb3J0IG9wdGlvbmFsZmVhdHVyZXMuanNvbjpcIiwgZSk7XG59XG4vLyBcdUQ4M0RcdUREMzkgQ0xBU1NFU1xue1xuICBjb25zdCBjbGFzc0ZpbGVzID0gYXdhaXQgbGlzdENsYXNzRmlsZXNGcm9tR2l0SHViKHJlcG8pO1xuICBmb3IgKGNvbnN0IGZpbGVOYW1lIG9mIGNsYXNzRmlsZXMpIHtcbiAgICB0cnkge1xuICAgICAgLy8gZmV0Y2ggdGhlIHJhdyBjbGFzcyBKU09OXG4gICAgICBjb25zdCByZXMgICAgPSBhd2FpdCBmZXRjaChgJHtlZGl0aW9uLnNvdXJjZVVybH0vY2xhc3MvJHtmaWxlTmFtZX1gKTtcbiAgICAgIGNvbnN0IGpzb24gICA9IGF3YWl0IHJlcy5qc29uKCk7XG5cbiAgICAgIC8vIHBhcnNlIGludG8gb25lIG9yIG1vcmUgbWFya2Rvd24gZmlsZXNcbiAgICAgIGNvbnN0IG1kRmlsZXMgPSBwYXJzZUNsYXNzRmlsZShcbiAgICAgICAganNvbixcbiAgICAgICAgZWRpdGlvbi5pZCxcbiAgICAgICAgZmlsZU5hbWUsXG4gICAgICAgIG9wdGlvbmFsRmVhdHVyZXNcbiAgICAgICk7XG4gICAgICBmb3IgKGNvbnN0IG1kIG9mIG1kRmlsZXMpIHtcbiAgICAgICAgY29uc3QgZnVsbFBhdGggPSBub3JtYWxpemVQYXRoKGAke3RhcmdldFBhdGh9L1BsYXllciBCdWlsZC8ke21kLnBhdGh9YCk7XG4gICAgICAgIC8vIDEpIGVuc3VyZSB0aGUgZm9sZGVyIGV4aXN0c1xuICAgICAgICBhd2FpdCBlbnN1cmVGb2xkZXIoYXBwLCBmdWxsUGF0aC5zcGxpdChcIi9cIikuc2xpY2UoMCwgLTEpLmpvaW4oXCIvXCIpKTtcblxuICAgICAgICAvLyAyKSB3cml0ZSB2aWEgT2JzaWRpYW5cdTIwMTlzIEFQSSBzbyBub3RlcyByZWZyZXNoXG4gICAgICAgIGNvbnN0IGV4aXN0aW5nID0gYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChmdWxsUGF0aCk7XG4gICAgICAgIGlmIChleGlzdGluZyBpbnN0YW5jZW9mIFRGaWxlKSB7XG4gICAgICAgICAgLy8gT3ZlcndyaXRlIGFuIGV4aXN0aW5nIG5vdGUgYW5kIGZpcmUgdGhlIGNoYW5nZSBldmVudFxuICAgICAgICAgIGF3YWl0IGFwcC52YXVsdC5tb2RpZnkoZXhpc3RpbmcsIG1kLmNvbnRlbnQpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIENyZWF0ZSBhIGJyYW5kLW5ldyBub3RlIChhbHNvIGZpcmVzIHRoZSBjaGFuZ2UgZXZlbnQpXG4gICAgICAgICAgYXdhaXQgYXBwLnZhdWx0LmNyZWF0ZShmdWxsUGF0aCwgbWQuY29udGVudCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICBjb25zb2xlLndhcm4oYEZhaWxlZCB0byBpbXBvcnQgY2xhc3MgJHtmaWxlTmFtZX06YCwgZSk7XG4gICAgfVxuICB9XG59XG5cblxuIC8vIFx1RDgzRFx1REQzOSBSVUxFUzogQUNUSU9OU1xuICB7XG4gICAgdHJ5IHtcblxuICAgICAgY29uc3QgcmVzICA9IGF3YWl0IGZldGNoKGAke2VkaXRpb24uc291cmNlVXJsfS9hY3Rpb25zLmpzb25gKTtcbiAgICAgIGNvbnN0IGpzb24gPSBhd2FpdCByZXMuanNvbigpO1xuICAgIFxuICAgICAgY29uc3QgbWRGaWxlcyA9IHBhcnNlQWN0aW9uc0ZpbGUoanNvbiwgZWRpdGlvbi5pZCk7XG4gICAgXG4gICAgICBmb3IgKGNvbnN0IG1kIG9mIG1kRmlsZXMpIHtcbiAgICAgICAgY29uc3QgZnVsbFBhdGggPSBub3JtYWxpemVQYXRoKFxuICAgICAgICAgIGAke3RhcmdldFBhdGh9LyR7bWQucGF0aH1gXG4gICAgICAgICk7XG4gICAgICAgIGNvbnN0IGZvbGRlciA9IGZ1bGxQYXRoLnNwbGl0KFwiL1wiKS5zbGljZSgwLCAtMSkuam9pbihcIi9cIik7XG5cbiAgICAgICAgYXdhaXQgZW5zdXJlRm9sZGVyKGFwcCwgZm9sZGVyKTtcbiAgICAgICAgYXdhaXQgYXBwLnZhdWx0LmFkYXB0ZXIud3JpdGUoZnVsbFBhdGgsIG1kLmNvbnRlbnQpO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIGNvbnNvbGUud2FybihcIkZhaWxlZCB0byBpbXBvcnQgYWN0aW9ucy5qc29uOlwiLCBlKTtcbiAgICB9XG4gIH1cblxuXG4gICAgLy8gXHVEODNEXHVERDM5IFJVTEVTOiBDT05ESVRJT05TICYgRElTRUFTRVNcbiAge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCByZXMgID0gYXdhaXQgZmV0Y2goYCR7ZWRpdGlvbi5zb3VyY2VVcmx9L2NvbmRpdGlvbnNkaXNlYXNlcy5qc29uYCk7XG4gICAgICBjb25zdCBqc29uID0gYXdhaXQgcmVzLmpzb24oKTtcbiAgICAgIGNvbnN0IG1kRmlsZXMgPSBwYXJzZUNvbmRpdGlvbnNEaXNlYXNlc0ZpbGUoanNvbiwgZWRpdGlvbi5pZCk7XG4gICAgICBmb3IgKGNvbnN0IG1kIG9mIG1kRmlsZXMpIHtcbiAgICAgICAgY29uc3QgZnVsbFBhdGggPSBub3JtYWxpemVQYXRoKFxuICAgICAgICAgIGAke3RhcmdldFBhdGh9LyR7bWQucGF0aH1gXG4gICAgICAgICk7XG4gICAgICAgIGNvbnN0IGZvbGRlciA9IGZ1bGxQYXRoLnNwbGl0KFwiL1wiKS5zbGljZSgwLCAtMSkuam9pbihcIi9cIik7XG4gICAgICAgIGF3YWl0IGVuc3VyZUZvbGRlcihhcHAsIGZvbGRlcik7XG4gICAgICAgIGF3YWl0IGFwcC52YXVsdC5hZGFwdGVyLndyaXRlKGZ1bGxQYXRoLCBtZC5jb250ZW50KTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICBjb25zb2xlLndhcm4oXCJGYWlsZWQgdG8gaW1wb3J0IGNvbmRpdGlvbnNkaXNlYXNlcy5qc29uOlwiLCBlKTtcbiAgICB9XG4gIH1cblxuICAgLy8gXHVEODNEXHVERDM5IFJVTEVTOiBTRU5TRVNcbiAge1xuICAgIHRyeSB7XG5cbiAgICAgIGNvbnN0IHJlcyAgPSBhd2FpdCBmZXRjaChgJHtlZGl0aW9uLnNvdXJjZVVybH0vc2Vuc2VzLmpzb25gKTtcbiAgICAgIGNvbnN0IGpzb24gPSBhd2FpdCByZXMuanNvbigpO1xuICAgIFxuICAgICAgY29uc3QgbWRGaWxlcyA9IHBhcnNlU2Vuc2VzRmlsZShqc29uLCBlZGl0aW9uLmlkKTtcbiAgICBcbiAgICAgIGZvciAoY29uc3QgbWQgb2YgbWRGaWxlcykge1xuICAgICAgICBjb25zdCBmdWxsUGF0aCA9IG5vcm1hbGl6ZVBhdGgoXG4gICAgICAgICAgYCR7dGFyZ2V0UGF0aH0vJHttZC5wYXRofWBcbiAgICAgICAgKTtcbiAgICAgICAgY29uc3QgZm9sZGVyID0gZnVsbFBhdGguc3BsaXQoXCIvXCIpLnNsaWNlKDAsIC0xKS5qb2luKFwiL1wiKTtcblxuICAgICAgICBhd2FpdCBlbnN1cmVGb2xkZXIoYXBwLCBmb2xkZXIpO1xuICAgICAgICBhd2FpdCBhcHAudmF1bHQuYWRhcHRlci53cml0ZShmdWxsUGF0aCwgbWQuY29udGVudCk7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgY29uc29sZS53YXJuKFwiRmFpbGVkIHRvIGltcG9ydCBzZW5zZXMuanNvbjpcIiwgZSk7XG4gICAgfVxuICB9XG5cbiAgICAgLy8gXHVEODNEXHVERDM5IFJVTEVTOiBTS0lMTFNcbiAge1xuICAgIHRyeSB7XG5cbiAgICAgIGNvbnN0IHJlcyAgPSBhd2FpdCBmZXRjaChgJHtlZGl0aW9uLnNvdXJjZVVybH0vc2tpbGxzLmpzb25gKTtcbiAgICAgIGNvbnN0IGpzb24gPSBhd2FpdCByZXMuanNvbigpO1xuICAgIFxuICAgICAgY29uc3QgbWRGaWxlcyA9IHBhcnNlU2tpbGxzRmlsZShqc29uLCBlZGl0aW9uLmlkKTtcbiAgICBcbiAgICAgIGZvciAoY29uc3QgbWQgb2YgbWRGaWxlcykge1xuICAgICAgICBjb25zdCBmdWxsUGF0aCA9IG5vcm1hbGl6ZVBhdGgoXG4gICAgICAgICAgYCR7dGFyZ2V0UGF0aH0vJHttZC5wYXRofWBcbiAgICAgICAgKTtcbiAgICAgICAgY29uc3QgZm9sZGVyID0gZnVsbFBhdGguc3BsaXQoXCIvXCIpLnNsaWNlKDAsIC0xKS5qb2luKFwiL1wiKTtcblxuICAgICAgICBhd2FpdCBlbnN1cmVGb2xkZXIoYXBwLCBmb2xkZXIpO1xuICAgICAgICBhd2FpdCBhcHAudmF1bHQuYWRhcHRlci53cml0ZShmdWxsUGF0aCwgbWQuY29udGVudCk7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgY29uc29sZS53YXJuKFwiRmFpbGVkIHRvIGltcG9ydCBza2lsbHMuanNvbjpcIiwgZSk7XG4gICAgfVxuICB9XG5cbiAgIC8vIFx1RDgzRFx1REQzOSBGRUFUU1xuICB7XG4gICAgdHJ5IHtcblxuICAgICAgY29uc3QgcmVzICA9IGF3YWl0IGZldGNoKGAke2VkaXRpb24uc291cmNlVXJsfS9mZWF0cy5qc29uYCk7XG4gICAgICBjb25zdCBqc29uID0gYXdhaXQgcmVzLmpzb24oKTtcbiAgICBcbiAgICAgIGNvbnN0IG1kRmlsZXMgPSBwYXJzZUZlYXRzRmlsZShqc29uLCBlZGl0aW9uLmlkKTtcbiAgICBcbiAgICAgIGZvciAoY29uc3QgbWQgb2YgbWRGaWxlcykge1xuICAgICAgICBjb25zdCBmdWxsUGF0aCA9IG5vcm1hbGl6ZVBhdGgoXG4gICAgICAgICAgYCR7dGFyZ2V0UGF0aH0vJHttZC5wYXRofWBcbiAgICAgICAgKTtcbiAgICAgICAgY29uc3QgZm9sZGVyID0gZnVsbFBhdGguc3BsaXQoXCIvXCIpLnNsaWNlKDAsIC0xKS5qb2luKFwiL1wiKTtcblxuICAgICAgICBhd2FpdCBlbnN1cmVGb2xkZXIoYXBwLCBmb2xkZXIpO1xuICAgICAgICBhd2FpdCBhcHAudmF1bHQuYWRhcHRlci53cml0ZShmdWxsUGF0aCwgbWQuY29udGVudCk7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgY29uc29sZS53YXJuKFwiRmFpbGVkIHRvIGltcG9ydCBmZWF0cy5qc29uOlwiLCBlKTtcbiAgICB9XG4gIH1cblxuLy8gXHVEODNEXHVERDM5IEJBQ0tHUk9VTkRTXG57XG4gIHRyeSB7XG4gICAgY29uc3QgcmVzICA9IGF3YWl0IGZldGNoKGAke2VkaXRpb24uc291cmNlVXJsfS9iYWNrZ3JvdW5kcy5qc29uYCk7XG4gICAgY29uc3QganNvbiA9IGF3YWl0IHJlcy5qc29uKCk7XG5cbiAgICBjb25zdCBtZEZpbGVzID0gcGFyc2VCYWNrZ3JvdW5kc0ZpbGUoanNvbiwgZWRpdGlvbi5pZCk7XG5cbiAgICBmb3IgKGNvbnN0IG1kIG9mIG1kRmlsZXMpIHtcbiAgICAgIC8vIG1kLnBhdGggaXMgXCJQbGF5ZXIgQnVpbGQvQmFja2dyb3VuZHMvPE5hbWU+Lm1kXCJcbiAgICAgIGNvbnN0IGZ1bGxQYXRoID0gbm9ybWFsaXplUGF0aChgJHt0YXJnZXRQYXRofS8ke21kLnBhdGh9YCk7XG4gICAgICBjb25zdCBmb2xkZXIgICA9IGZ1bGxQYXRoLnNwbGl0KFwiL1wiKS5zbGljZSgwLCAtMSkuam9pbihcIi9cIik7XG5cbiAgICAgIGF3YWl0IGVuc3VyZUZvbGRlcihhcHAsIGZvbGRlcik7XG4gICAgICBhd2FpdCBhcHAudmF1bHQuYWRhcHRlci53cml0ZShmdWxsUGF0aCwgbWQuY29udGVudCk7XG4gICAgfVxuICB9IGNhdGNoIChlKSB7XG4gICAgY29uc29sZS53YXJuKFwiRmFpbGVkIHRvIGltcG9ydCBiYWNrZ3JvdW5kcy5qc29uOlwiLCBlKTtcbiAgfVxufVxufVxufSIsICIvLyBoZWxwZXJzL3NvdXJjZU1hcC50c1xuXG4vLyBNYXAgb2YgNWUgc291cmNlIGFiYnJldmlhdGlvbnMgdG8gdGhlaXIgZnVsbCB0aXRsZXNcbmNvbnN0IFNPVVJDRV9OQU1FX01BUDogUmVjb3JkPHN0cmluZywgc3RyaW5nPiA9IHtcbiAgLy8gQ29yZSBydWxlYm9va3NcbiAgUEhCOiBcIlBsYXllcidzIEhhbmRib29rXCIsXG4gIE1NOiAgXCJNb25zdGVyIE1hbnVhbFwiLFxuICBETUc6IFwiRHVuZ2VvbiBNYXN0ZXIncyBHdWlkZVwiLFxuXG4gIC8vIE9mZmljaWFsIGV4cGFuc2lvbnMgJiBhZHZlbnR1cmUgbW9kdWxlc1xuICBDb1M6ICBcIkN1cnNlIG9mIFN0cmFoZFwiLFxuICBPb3RBOiBcIk91dCBvZiB0aGUgQWJ5c3NcIixcbiAgUG90QTogXCJQcmluY2VzIG9mIHRoZSBBcG9jYWx5cHNlXCIsXG4gIEhvdERROiBcIkhvYXJkIG9mIHRoZSBEcmFnb24gUXVlZW5cIixcbiAgUm9UOiAgXCJSaXNlIG9mIFRpYW1hdFwiLFxuICBTS1Q6ICBcIlN0b3JtIEtpbmcncyBUaHVuZGVyXCIsXG4gIFRmdFlQOlwiVGFsZXMgZnJvbSB0aGUgWWF3bmluZyBQb3J0YWxcIixcbiAgVG9BOiAgXCJUb21iIG9mIEFubmloaWxhdGlvblwiLFxuXG4gIC8vIFN1cHBsZW1lbnRhbCBndWlkZXNcbiAgWEdFOiBcIlhhbmF0aGFyJ3MgR3VpZGUgdG8gRXZlcnl0aGluZ1wiLFxuICBWR006IFwiVm9sbydzIEd1aWRlIHRvIE1vbnN0ZXJzXCIsXG4gIFRDRTogXCJUYXNoYSdzIENhdWxkcm9uIG9mIEV2ZXJ5dGhpbmdcIixcbiAgRUdXOiBcIkViZXJyb246IFJpc2luZyBmcm9tIHRoZSBMYXN0IFdhclwiLFxuICBFUkxXOlwiRXhwbG9yZXIncyBHdWlkZSB0byBXaWxkZW1vdW50XCIsXG4gIE1URjogXCJNb25zdGVycyBvZiB0aGUgTXVsdGl2ZXJzZVwiLFxuICBWUkdSOlwiVmFuIFJpY2h0ZW4ncyBHdWlkZSB0byBSYXZlbmxvZnRcIixcblxuICAvLyBBZGRpdGlvbmFsIHNvdXJjZWJvb2tzXG4gIEFBRzogICAgICBcIkFzdHJhbCBBZHZlbnR1cmVyXHUyMDE5cyBHdWlkZVwiLFxuICBBSTogICAgICAgXCJBY3F1aXNpdGlvbnMgSW5jb3Jwb3JhdGVkXCIsXG4gIEFpdEZSQVZGVDpcIkFkdmVudHVyZXMgaW4gdGhlIEZvcmdvdHRlbiBSZWFsbXM6IEEgVmlzdWFsIEZpZWxkIFRlc3RcIixcbiAgQk1UOiAgICAgIFwiQmlnIE1vbnN0ZXIgVG9tZVwiLFxuICBEb0RrOiAgICAgXCJEcmFnb24gb2YgRGFya2tlZXBcIixcbiAgRlREOiAgICAgIFwiRml6YmFuXHUyMDE5cyBUcmVhc3VyeSBvZiBEcmFnb25zXCIsXG4gIEdHUjogICAgICBcIkd1aWxkbWFzdGVyXHUyMDE5cyBHdWlkZSB0byBSYXZuaWNhXCIsXG4gIEdITG9FOiAgICBcIkdob3N0cyBvZiB0aGUgSG9yaXpvbjogTGlnaHQgT3ZlciBFbGVuc2FyaWFcIixcbiAgSURSb3RGOiAgIFwiSWNld2luZCBEYWxlOiBSaW1lIG9mIHRoZSBGcm9zdG1haWRlblwiLFxuICBMTEs6ICAgICAgXCJMb3N0IExhYm9yYXRvcnkgb2YgS3dhbGlzaFwiLFxuICBTYXRPOiAgICAgXCJTYXBwaGlyZSBvZiBUcnV0aFwiLFxuICBTQ0M6ICAgICAgXCJTdHJpeGhhdmVuOiBDdXJyaWN1bHVtIG9mIENoYW9zXCIsXG4gIFREQ1NSOiAgICBcIlRoZSBEdW5nZW9uIENvYWNoXHUyMDE5cyBSdWxlYm9va1wiLFxuICBKdHRSQzogICAgXCJKb3VybmV5cyB0aHJvdWdoIHRoZSBSYWRpYW50IENpdGFkZWxcIixcbiAgXCJBaXRGUi1BVlRcIjpcIkFkdmVudHVyZXMgaW4gdGhlIEZvcmdvdHRlbiBSZWFsbXM6IEEgVmVyZGFudCBUb21iXCIsXG4gIFwiQWl0RlItRkNEXCI6XCJBZHZlbnR1cmVzIGluIHRoZSBGb3Jnb3R0ZW4gUmVhbG1zOiBGcm9tIEN5YW4gRGVwdGhzXCIsXG4gIFJNUjogICAgICBcIkR1bmdlb25zIGFuZCBEcmFnb25zOiBSaWNrIGFuZCBNb3J0eVwiLFxuICBTQ0FHOiAgICAgXCJTd29yZCBDb2FzdCBBZHZlbnR1cmVyJ3MgR3VpZGVcIixcbiAgRUVQQzogICAgIFwiRWxlbWVudGFsIEV2aWwgUGxheWVyJ3MgQ29tcGFuaW9uXCIsXG4gIE1PVDogICAgICBcIk15dGhpYyBPZHlzc2V5cyBvZiBUaGVyb3NcIixcbiAgV0J0VzogICAgIFwiVGhlIFdpbGQgQmV5b25kIHRoZSBXaXRjaGxpZ2h0XCIsXG4gIEJHRElBOiAgICBcIkJhbGR1cidzIEdhdGU6IERlc2NlbnQgSW50byBBdmVybnVzXCIsXG4gIFRvRlc6ICAgICBcIlR1cm4gb2YgRm9ydHVuZSdzIFdoZWVsXCIsXG4gIENvQTogICAgICBcIkNoYWlucyBvZiBBc21vZGV1c1wiLFxuICBDUkNvdE46ICAgXCJDcml0aWNhbCBSb2xlOiBDYWxsIG9mIHRoZSBOZXRoZXJkZWVwXCIsXG4gIFRvRDogICAgICBcIlR5cmFubnkgb2YgRHJhZ29uc1wiLFxuICBNUE1NOiAgICAgXCJNb3JkZW5rYWluZW4gUHJlc2VudHM6IE1vbnN0ZXJzIG9mIHRoZSBNdWx0aXZlcnNlXCIsXG4gIExvWDogICAgICBcIkxpZ2h0IG9mIFhhcnl4aXNcIixcbiAgUWZ0SVM6ICAgIFwiUXVlc3RzIGZyb20gdGhlIEluZmluaXRlIFN0YWlyY2FzZVwiLFxuICBXREg6ICAgICAgXCJXYXRlcmRlZXA6IERyYWdvbiBIZWlzdFwiLFxuICBXRE1NOiAgICAgXCJXYXRlcmRlZXA6IER1bmdlb24gb2YgdGhlIE1hZCBNYWdlXCIsXG4gIFBhQlRTTzogICBcIlBoYW5kZWx2ZXIgYW5kIEJlbG93OiBUaGUgU2hhdHRlcmVkIE9iZWxpc2tcIixcbiAgQ006ICAgICAgIFwiQ2FuZGxla2VlcCBNeXN0ZXJpZXNcIixcbiAgR29TOiAgICAgIFwiR2hvc3RzIG9mIFNhbHRtYXJzaFwiLFxuICBEU290RFE6ICAgXCJEcmFnb25sYW5jZTogU2hhZG93IG9mIHRoZSBEcmFnb24gUXVlZW5cIixcbiAgS2Z0R1Y6ICAgIFwiS2V5cyBmcm9tIHRoZSBHb2xkZW4gVmF1bHRcIixcbiAgU0RXOiAgICAgIFwiRXNzZW50aWFscyBLaXQ6IFNsZWVwaW5nIERyYWdvbidzIFdha2VcIixcbiAgRG9TSTogICAgIFwiRHJhZ29ucyBvZiBTdG9ybXdyZWNrIElzbGVcIixcbiAgR290U0Y6ICAgIFwiR2lhbnRzIG9mIHRoZSBTdGFyIEZvcmdlXCIsXG4gIERJUDogICAgICBcIkVzc2VudGlhbHMgS2l0OiBEcmFnb24gb2YgSWNlc3BpcmUgUGVha1wiLFxuICBTTFc6ICAgICAgXCJFc3NlbnRpYWxzIEtpdDogU3Rvcm0gTG9yZCdzIFdyYXRoXCIsXG4gIElNUjogICAgICBcIkluZmVybmFsIE1hY2hpbmUgUmVidWlsZFwiLFxuICBWRW9SOiAgICAgXCJWZWNuYTogRXZlIG9mIFJ1aW5cIixcbiAgUFNJOiAgICAgIFwiUGxhbmUgU2hpZnQ6IElubmlzdHJhZFwiLFxuICBBQVRNOiAgICAgXCJBZHZlbnR1cmUgQXRsYXM6IFRoZSBNb3J0dWFyeVwiLFxuICBQU1o6ICAgICAgXCJQbGFuZSBTaGlmdDogWmVuZGlrYXJcIixcbiAgREM6ICAgICAgIFwiRXNzZW50aWFscyBLaXQ6IERpdmluZSBDb250ZW50aW9uXCIsXG4gIExNb1A6ICAgICBcIkxvc3QgTWluZSBvZiBQaGFuZGVsdmVyXCIsXG4gIFJNQlJFOiAgICBcIlRoZSBMb3N0IER1bmdlb24gb2YgUmlja2VkbmVzczogQmlnIFJpY2sgRW5lcmd5XCIsXG4gIEhmdFQ6ICAgICBcIkh1bnQgZm9yIHRoZSBUaGVzc2FsaHlkcmFcIixcbiAgUFNYOiAgICAgIFwiUGxhbmUgU2hpZnQ6IEl4YWxhblwiLFxuICBIRlN0Q006ICAgXCJIZXJvZXMnIEZlYXN0OiBTYXZpbmcgdGhlIENoaWxkcmVucyBNZW51XCIsXG4gIFNqQTogICAgICBcIlNwZWxsamFtbWVyIEFjYWRlbXlcIixcbiAgTEs6ICAgICAgIFwiTGlnaHRuaW5nIEtlZXBcIixcbiAgUnRHOiAgICAgIFwiUmV0dXJuIHRvIHRoZSBHbG9yeVwiLFxuICBUVFA6ICAgICAgXCJUaGUgVG9ydGxlIFBhY2thZ2VcIixcbiAgTFI6ICAgICAgIFwiTG9jYXRoYWggUmlzaW5nXCIsXG4gIFBTQTogICAgICBcIlBsYW5lIFNoaWZ0OiBBbW9ua2hldFwiLFxuICBPR0E6ICAgICAgXCJPbmUgR3J1bmcgQWJvdmVcIixcbiAgXCJOUkgtVExUXCI6ICBcIk5lcmRzIFJlc3RvcmluZyBIYXJtb255OiBUaGUgTG9zdCBUb21iXCIsXG4gIFwiTlJILUFUXCI6ICAgXCJOZXJkcyBSZXN0b3JpbmcgSGFybW9ueTogQWR2ZW50dXJlIFRvZ2V0aGVyXCIsXG4gIEJHRzogICAgICBcIkJpZ2J5IFByZXNlbnRzOiBHbG9yeSBvZiB0aGUgR2lhbnRzXCIsXG4gIFJvVE9TOiAgICBcIlRoZSBSaXNlIG9mIFRpYW1hdCBPbmxpbmUgU3VwcGxlbWVudFwiLFxuICBYTXRTOiAgICAgXCJYIE1hcmtzIHRoZSBTcG90XCIsXG4gIFwiSEFULUxNSVwiOiAgXCJIb25vciBBbW9uZyBUaGVpdmVzOiBMZWdlbmRhcnkgTWFnaWMgSXRlbXNcIixcbiAgRGl0TENvVDogIFwiRGVzY2VudCBpbnRvIHRoZSBMb3N0IENhdmVybnMgb2YgVHNvamNhbnRoXCIsXG4gIFwiQWl0RlItRE5cIjogXCJBZHZlbnR1cmVzIGluIHRoZSBGb3Jnb3R0ZW4gUmVhbG1zOiBEZWVwZXN0IE5pZ2h0XCIsXG4gIFwiQWl0RlItVEhQXCI6XCJBZHZlbnR1cmVzIGluIHRoZSBGb3Jnb3R0ZW4gUmVhbG1zOiBUaGUgSGlkZGVuIFBhZ2VzXCIsXG4gIEJBTTogICAgICBcIkJvbydzIEFzdHJhbCBNZW5hZ2VyaWVcIixcbiAgQVpmeVQ6ICAgIFwiQSBaaWIgZm9yIFlvdXIgVGhvdWd0c1wiLFxuICBNQ1YyREM6ICAgXCJNb25zdHJvdXMgQ29tcGVuZGl1bSBWb2x1bWUgMjogRHJhZ29ubGFuY2UgQ3JlYXR1cmVzXCIsXG4gIFBTSzogICAgICBcIlBsYW5lIFNoaWZ0OiBLYWxhZGVzaFwiLFxuICBQU0Q6ICAgICAgXCJQbGFuZSBTaGlmdDogRG9taW5hcmlhXCIsXG4gIEFXTTogICAgICBcIkFkdmVudHVyZSB3aXRoIE11a1wiLFxuICBVQVRoZU15c3RpY0NsYXNzOiBcIlVuZWFydGhlZCBBcmNhbmE6IFRoZSBNeXN0aWMgQ2xhc3NcIixcbiAgQUxDdXJzZU9mU3RyYWhkOiBcIkFkdmVudHVyZXJzIExlYWd1ZTogQ3Vyc2Ugb2YgU3RyYWhkXCIsXG4gIEFMRWxlbWVudGFsRXZpbDogXCJBZHZlbnR1cmVycyBMZWFndWU6IEVsZW1lbnRhbCBFdmlsXCIsXG4gIEFMUmFnZU9mRGVtb25zOiAgXCJBZHZlbnR1cmVycyBMZWFndWU6IFJhZ2Ugb2YgRGVtb25zXCJcbn07XG5cbi8qKlxuICogUmV0dXJucyB0aGUgZnVsbCBzb3VyY2UgbmFtZSBmb3IgYSBnaXZlbiBhYmJyZXZpYXRpb24uXG4gKiBPcHRpb25hbGx5IGFwcGVuZHMgeWVhciBmb3IgUEhCIHZhcmlhbnRzLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0RnVsbFNvdXJjZU5hbWUoYWJicmV2OiBzdHJpbmcsIGVkaXRpb25JZD86IHN0cmluZyk6IHN0cmluZyB7XG4gIGxldCBuYW1lID0gU09VUkNFX05BTUVfTUFQW2FiYnJldl0gPz8gYWJicmV2O1xuXG4gIC8vIEFwcGVuZCB5ZWFyIGZvciBQSEIgaWYgdGhlIGVkaXRpb24gY29udGV4dCBpcyBrbm93blxuICBpZiAoYWJicmV2ID09PSBcIlBIQlwiKSB7XG4gICAgaWYgKGVkaXRpb25JZD8uaW5jbHVkZXMoXCIyMDE0XCIpKSBuYW1lICs9IFwiICgyMDE0KVwiO1xuICAgIGVsc2UgaWYgKGVkaXRpb25JZD8uaW5jbHVkZXMoXCIyMDI1XCIpKSBuYW1lICs9IFwiICgyMDI1KVwiO1xuICB9XG5cbiAgcmV0dXJuIG5hbWU7XG59XG4iLCAiLy8gcGFyc2Vycy81ZS1qc29uL2hlbHBlcnMvdGFnUmVwbGFjZXIudHNcblxuZXhwb3J0IGZ1bmN0aW9uIHJlcGxhY2U1ZVRhZ3MoaW5wdXQ6IHVua25vd24pOiBzdHJpbmcge1xuICAvLyAxKSBUdXJuIGFycmF5cyBpbnRvIHNwYWNlLWpvaW5lZCBzdHJpbmdzXG4gIC8vIDIpIExlYXZlIHN0cmluZ3MgYWxvbmVcbiAgLy8gMykgQ29lcmNlIGV2ZXJ5dGhpbmcgZWxzZSB0byBzdHJpbmcgKG9yIGVtcHR5KVxuICBsZXQgdGV4dDogc3RyaW5nO1xuICBpZiAoQXJyYXkuaXNBcnJheShpbnB1dCkpIHtcbiAgICB0ZXh0ID0gaW5wdXQuam9pbihcIiBcIik7XG4gIH0gZWxzZSBpZiAodHlwZW9mIGlucHV0ID09PSBcInN0cmluZ1wiKSB7XG4gICAgdGV4dCA9IGlucHV0O1xuICB9IGVsc2Uge1xuICAgIHRleHQgPSBTdHJpbmcoaW5wdXQgPz8gXCJcIik7XG4gIH1cblxuICAvLyBub3cgcnVuIGFsbCB5b3VyIEAtdGFnIHJlcGxhY2VtZW50cyBvbiB0aGF0IHRleHRcbiAgcmV0dXJuIHRleHRcbiAgICAucmVwbGFjZSgvXFx7QChzcGVsbHxpdGVtfGNyZWF0dXJlfHJhY2UpIChbXnx9XSspKD86XFx8W159XSspP1xcfS9nLCAoXywgX18sIG5hbWUpID0+XG4gICAgICBgW1ske2NhcGl0YWxpemVFYWNoKG5hbWUpfV1dYFxuICAgIClcbiAgICAucmVwbGFjZSgvXFx7QChjb25kaXRpb258c3RhdHVzfGFjdGlvbnxza2lsbCkgKFtefH1dKykoPzpcXHxbXn1dKyk/XFx9L2csIChfLCB0YWcsIG5hbWUpID0+XG4gICAgICBgW1ske2NhcGl0YWxpemUodGFnKX1zIyR7bmFtZX18JHtjYXBpdGFsaXplRWFjaChuYW1lKX1dXWBcbiAgICApXG4gICAgLnJlcGxhY2UoL1xce0BjbGFzc0ZlYXR1cmUgKFtefH1dKylcXHwoW158fV0rKSg/OlxcfFtefV0rKT9cXH0vZywgKF8sIGZlYXR1cmUsIGNscykgPT5cbiAgICAgIGBbWyR7Y2xzfSMke2ZlYXR1cmV9XV1gXG4gICAgKVxuICAgIC5yZXBsYWNlKC9cXHtAKGJvb2t8ZmlsdGVyKSAoW158fV0rKSg/OlxcfFtefV0rKT9cXH0vZywgKF8sIF9fLCB0eHQpID0+IHR4dClcbiAgICAucmVwbGFjZSgvXFx7QG5vdGUgKFtefV0rKVxcfS9nLCAoXywgbm90ZSkgPT4gYCoke25vdGV9KmApXG4gICAgLnJlcGxhY2UoL1xce0AoZGFtYWdlfGRpY2V8ZGN8aGl0fHNlbnNlKSAoW159XSspXFx9L2csIChfLCBfXywgdmFsdWUpID0+IHZhbHVlKVxuICAgIC5yZXBsYWNlKC9cXHtAY2hhbmNlIChbXnx9XSspKD86XFx8W159XSspP1xcfS9nLCAoXywgdmFsdWUpID0+IGAke3ZhbHVlfSVgKVxuICAgIC5yZXBsYWNlKC9cXHtAcXVpY2tyZWYgKFtefH1dKykoPzpcXHxbXnxdKlxcfFtefV0qKT9cXH0vZywgKF8sIHRlcm0pID0+IHtcbiAgICAgIGNvbnN0IGtub3duID0gW1xuICAgICAgICBcImRpZmZpY3VsdCB0ZXJyYWluXCIsIFwidG90YWwgY292ZXJcIiwgXCJoYWxmIGNvdmVyXCIsIFwidGhyZWUtcXVhcnRlcnMgY292ZXJcIixcbiAgICAgICAgXCJoZWF2aWx5IG9ic2N1cmVkXCIsIFwibGlnaHRseSBvYnNjdXJlZFwiXG4gICAgICBdO1xuICAgICAgcmV0dXJuIGtub3duLmluY2x1ZGVzKHRlcm0udG9Mb3dlckNhc2UoKSlcbiAgICAgICAgPyBgW1tSdWxlcyMke2NhcGl0YWxpemVFYWNoKHRlcm0pfV1dYFxuICAgICAgICA6IHRlcm07XG4gICAgfSlcbiAgICAucmVwbGFjZSgvXFx7XFxANWV0b29sc1xccysoW158fV0rKVxcfFtefV0rXFx9L2csICckMScpXG4gICAgLnJlcGxhY2UoL1xce0ByZWNoYXJnZVxccyooW159XSspXFx9L2csIChfLCBudW0pID0+IGAocmVjaGFyZ2U6ICR7bnVtLnRyaW0oKX0pYClcbiAgICAucmVwbGFjZSgvXFx7QChzY2FsZWRpY2V8c2NhbGVkYW1hZ2UpW159XSpcXHwoW158fV0rKVxcfS9nLCAoXywgX18sIHZhbHVlKSA9PiB2YWx1ZSlcbiAgICAucmVwbGFjZSgvXFx7QGQyMFtefV0qXFx9L2csIFwiXCIpXG4gICAgLnJlcGxhY2UoL1xce0BbXn1dK1xcfS9nLCBcIlwiKTtcbn1cblxuZnVuY3Rpb24gY2FwaXRhbGl6ZShzdHI6IHN0cmluZyk6IHN0cmluZyB7XG4gIHJldHVybiBzdHIuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBzdHIuc2xpY2UoMSkudG9Mb3dlckNhc2UoKTtcbn1cblxuZnVuY3Rpb24gY2FwaXRhbGl6ZUVhY2goc3RyOiBzdHJpbmcpOiBzdHJpbmcge1xuICByZXR1cm4gc3RyLnNwbGl0KFwiIFwiKS5tYXAoY2FwaXRhbGl6ZSkuam9pbihcIiBcIik7XG59XG4iLCAiaW1wb3J0IHsgcmVwbGFjZTVlVGFncyB9IGZyb20gXCIuL3RhZ1JlcGxhY2VyXCI7XG5cbmV4cG9ydCBmdW5jdGlvbiByZW5kZXJNYXJrZG93blRhYmxlKGVudHJ5OiBhbnkpOiBzdHJpbmcge1xuICBpZiAoZW50cnkudHlwZSAhPT0gXCJ0YWJsZVwiIHx8ICFBcnJheS5pc0FycmF5KGVudHJ5LnJvd3MpKSByZXR1cm4gXCJcIjtcblxuICBjb25zdCBjYXB0aW9uID0gZW50cnkuY2FwdGlvbiA/IGAjIyMjIyAke2VudHJ5LmNhcHRpb259XFxuYCA6IFwiXCI7XG5cbiAgY29uc3QgaGVhZGVycyA9IChlbnRyeS5jb2xMYWJlbHMgPz8gW10pXG4gICAgLm1hcCgoaDogc3RyaW5nKSA9PiByZXBsYWNlNWVUYWdzKGgudHJpbSgpKSk7IC8vIFx1MjcwNSB0YWcgcmVwbGFjZSBvbiBoZWFkZXJzXG5cbiAgY29uc3QgaGVhZGVyUm93ID0gYHwgJHtoZWFkZXJzLmpvaW4oXCIgfCBcIil9IHxgO1xuICBjb25zdCBkaXZpZGVyUm93ID0gYHwgJHtoZWFkZXJzLm1hcCgoKSA9PiBcIjotLVwiKS5qb2luKFwiIHwgXCIpfSB8YDtcblxuICBjb25zdCBib2R5Um93cyA9IGVudHJ5LnJvd3MubWFwKChyb3c6IGFueVtdKSA9PiB7XG4gICAgY29uc3QgY2VsbHMgPSByb3cubWFwKChjZWxsKSA9PiB7XG4gICAgICBpZiAodHlwZW9mIGNlbGwgPT09IFwic3RyaW5nXCIpIHJldHVybiByZXBsYWNlNWVUYWdzKGNlbGwpOyAvLyBcdTI3MDUgdGFnIHJlcGxhY2Ugc3RyaW5nc1xuXG4gICAgICBpZiAodHlwZW9mIGNlbGwgPT09IFwib2JqZWN0XCIpIHtcbiAgICAgICAgaWYgKGNlbGwucm9sbD8uZXhhY3QgIT09IHVuZGVmaW5lZCkgcmV0dXJuIGAke2NlbGwucm9sbC5leGFjdH1gO1xuICAgICAgICBpZiAoY2VsbC5yb2xsPy5taW4gIT09IHVuZGVmaW5lZCAmJiBjZWxsLnJvbGw/Lm1heCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgcmV0dXJuIGAke2NlbGwucm9sbC5taW59XHUyMDEzJHtjZWxsLnJvbGwubWF4fWA7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlcGxhY2U1ZVRhZ3MoSlNPTi5zdHJpbmdpZnkoY2VsbCkpOyAvLyBmYWxsYmFjayBmb3IgdW5rbm93biBzaGFwZXNcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHJlcGxhY2U1ZVRhZ3MoU3RyaW5nKGNlbGwpKTtcbiAgICB9KTtcblxuICAgIHJldHVybiBgfCAke2NlbGxzLmpvaW4oXCIgfCBcIil9IHxgO1xuICB9KTtcblxuICByZXR1cm4gYCR7Y2FwdGlvbn0ke2hlYWRlclJvd31cXG4ke2RpdmlkZXJSb3d9XFxuJHtib2R5Um93cy5qb2luKFwiXFxuXCIpfWA7XG59XG4iLCAiLy8gNWUgMjAyNSBmb3JtYXRFbnRyeS50c1xuaW1wb3J0IHsgcmVwbGFjZTVlVGFncyB9IGZyb20gXCIuL3RhZ1JlcGxhY2VyXCI7XG5pbXBvcnQgeyByZW5kZXJNYXJrZG93blRhYmxlIH0gZnJvbSBcIi4vbWFya2Rvd25UYWJsZVwiO1xuXG5mdW5jdGlvbiBpc1R5cGVkRW50cnkoeDogYW55KTogeCBpcyB7IHR5cGU6IHN0cmluZzsgW2s6IHN0cmluZ106IGFueSB9IHtcbiAgcmV0dXJuIChcbiAgICB4ICE9IG51bGwgJiZcbiAgICB0eXBlb2YgeCA9PT0gXCJvYmplY3RcIiAmJlxuICAgICFBcnJheS5pc0FycmF5KHgpICYmXG4gICAgdHlwZW9mICh4IGFzIGFueSkudHlwZSA9PT0gXCJzdHJpbmdcIlxuICApO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZm9ybWF0RW50cnkoZW50cnk6IGFueSk6IHN0cmluZyB7XG4gIGlmICh0eXBlb2YgZW50cnkgPT09IFwic3RyaW5nXCIpIHtcbiAgICBjb25zdCBjbGVhbmVkID0gZW50cnkudHJpbSgpO1xuICAgIGlmICghY2xlYW5lZCB8fCBjbGVhbmVkID09PSBcIn1cIikgcmV0dXJuIFwiXCI7XG4gICAgcmV0dXJuIHJlcGxhY2U1ZVRhZ3MoY2xlYW5lZCk7XG4gIH1cblxuICBpZiAoaXNUeXBlZEVudHJ5KGVudHJ5KSAmJiBlbnRyeS50eXBlID09PSBcImVudHJpZXNcIiAmJiBBcnJheS5pc0FycmF5KGVudHJ5LmVudHJpZXMpKSB7XG4gICAgY29uc3QgYm9keSA9IGVudHJ5LmVudHJpZXNcbiAgICAgIC5tYXAoZm9ybWF0RW50cnkpXG4gICAgICAuZmlsdGVyKChzdHI6IHN0cmluZykgPT4gc3RyLnRyaW0oKS5sZW5ndGggPiAwKVxuICAgICAgLmpvaW4oXCJcXG5cXG5cIik7XG5cbiAgICByZXR1cm4gZW50cnkubmFtZVxuICAgICAgPyBgIyMjIyMgJHtlbnRyeS5uYW1lfVxcbiR7Ym9keX1gXG4gICAgICA6IGJvZHk7XG4gIH1cblxuICBpZiAoaXNUeXBlZEVudHJ5KGVudHJ5KSAmJiBlbnRyeS50eXBlID09PSBcImxpc3RcIiAmJiBBcnJheS5pc0FycmF5KGVudHJ5Lml0ZW1zKSkge1xuICAgIHJldHVybiBlbnRyeS5pdGVtc1xuICAgICAgLm1hcCgoaTogYW55KSA9PiBgLSAke3JlcGxhY2U1ZVRhZ3ModHlwZW9mIGkgPT09IFwic3RyaW5nXCIgPyBpIDogSlNPTi5zdHJpbmdpZnkoaSkpfWApXG4gICAgICAuam9pbihcIlxcblwiKTtcbiAgfVxuXG4gIGlmIChpc1R5cGVkRW50cnkoZW50cnkpICYmIGVudHJ5LnR5cGUgPT09IFwidGFibGVcIiAmJiBBcnJheS5pc0FycmF5KGVudHJ5LnJvd3MpKSB7XG4gICAgcmV0dXJuIHJlbmRlck1hcmtkb3duVGFibGUoZW50cnkpO1xuICB9XG5cbiAgaWYgKGlzVHlwZWRFbnRyeShlbnRyeSkgJiYgZW50cnkudHlwZSA9PT0gXCJxdW90ZVwiICYmIEFycmF5LmlzQXJyYXkoZW50cnkuZW50cmllcykpIHtcbiAgICBjb25zdCBxdW90ZSA9IGVudHJ5LmVudHJpZXMubWFwKGZvcm1hdEVudHJ5KS5qb2luKFwiIFwiKS50cmltKCk7XG4gICAgY29uc3QgYXV0aG9yID0gZW50cnkuYnkgPyBgIFx1MjAxNCAke2VudHJ5LmJ5fWAgOiBcIlwiO1xuICAgIHJldHVybiBgKlwiJHtxdW90ZX0ke2F1dGhvcn1cIipgO1xuICB9XG5cbiAgaWYgKGlzVHlwZWRFbnRyeShlbnRyeSkgJiYgZW50cnkudHlwZSA9PT0gXCJpbnNldFwiICYmIEFycmF5LmlzQXJyYXkoZW50cnkuZW50cmllcykpIHtcbiAgICBjb25zdCBpbnNldCA9IGVudHJ5LmVudHJpZXMubWFwKGZvcm1hdEVudHJ5KS5qb2luKFwiXFxuXCIpLnRyaW0oKTtcbiAgICByZXR1cm4gYD4gJHtpbnNldC5yZXBsYWNlKC9cXG4vZywgXCJcXG4+IFwiKX1gO1xuICB9XG5cbiAgaWYgKGlzVHlwZWRFbnRyeShlbnRyeSkgJiYgZW50cnkudHlwZSA9PT0gXCJyZWZDbGFzc0ZlYXR1cmVcIiAmJiB0eXBlb2YgZW50cnkuY2xhc3NGZWF0dXJlID09PSBcInN0cmluZ1wiKSB7XG4gICAgY29uc3QgW25hbWVdID0gZW50cnkuY2xhc3NGZWF0dXJlLnNwbGl0KFwifFwiKTtcbiAgICBjb25zdCBhbmNob3IgPSBuYW1lXG4gICAgICAucmVwbGFjZSgvW15cXHdcXHMtXS9nLCBcIlwiKVxuICAgICAgLnJlcGxhY2UoL1xccysvZywgXCItXCIpXG4gICAgICAudG9Mb3dlckNhc2UoKTtcbiAgICByZXR1cm4gYFtbIyR7YW5jaG9yfV1dYDtcbiAgfVxuXG4gIC8vIElmIGl0J3MgYW4gdW5rbm93biBvYmplY3QsIHNraXAgaXQgc2FmZWx5XG4gIHJldHVybiBcIlwiO1xufVxuIiwgIi8vIHBhcnNlcnMvNWUtanNvbi9iZXN0aWFyeS50c1xuXG5pbXBvcnQgdHlwZSB7IFBhcnNlZE1hcmtkb3duRmlsZSB9IGZyb20gXCJzcmMvdHlwZXNcIjtcbmltcG9ydCB7IGdldEZ1bGxTb3VyY2VOYW1lIH0gZnJvbSBcIi4vaGVscGVycy9zb3VyY2VNYXBcIjtcbmltcG9ydCB7IHJlcGxhY2U1ZVRhZ3MgfSBmcm9tIFwiLi9oZWxwZXJzL3RhZ1JlcGxhY2VyXCI7XG5pbXBvcnQgeyByZW5kZXJNYXJrZG93blRhYmxlIH0gZnJvbSBcIi4vaGVscGVycy9tYXJrZG93blRhYmxlXCI7XG5pbXBvcnQgeyBidWlsZEZNLCBzZXJpYWxpemVGcm9udG1hdHRlciwgQkVTVElBUllfTUVUQV9ERUZTLCB1bmlmaWVkU2tpbGxzLCBGTV9GSUVMRFMgfSBmcm9tIFwiLi9oZWxwZXJzL2Zyb250bWF0dGVyXCI7XG5cbmNvbnN0IHNraXBwZWRNb25zdGVyczogc3RyaW5nW10gPSBbXTtcblxuLy8gU2l6ZSBhYmJyZXZpYXRpb25zIG1hcHBpbmdcbmV4cG9ydCBcbmNvbnN0IFNJWkVfTUFQOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+ID0ge1xuICBUOiBcIlRpbnlcIixcbiAgUzogXCJTbWFsbFwiLFxuICBNOiBcIk1lZGl1bVwiLFxuICBMOiBcIkxhcmdlXCIsXG4gIEg6IFwiSHVnZVwiLFxuICBHOiBcIkdhcmdhbnR1YW5cIlxufTtcblxuLy8gQWxpZ25tZW50IGFiYnJldmlhdGlvbnMgbWFwcGluZ1xuY29uc3QgQUxJR05NRU5UX01BUDogUmVjb3JkPHN0cmluZywgc3RyaW5nPiA9IHtcbiAgTDogXCJMYXdmdWxcIixcbiAgTjogXCJOZXV0cmFsXCIsXG4gIEM6IFwiQ2hhb3RpY1wiLFxuICBHOiBcIkdvb2RcIixcbiAgRTogXCJFdmlsXCIsXG4gIFU6IFwiVW5hbGlnbmVkXCJcbn07XG5cbi8vIEhlbHBlciB0byBjYXBpdGFsaXplIGZpcnN0IGxldHRlciBvZiBhIHN0cmluZ1xuZnVuY3Rpb24gY2FwaXRhbGl6ZUZpcnN0KHN0cjogdW5rbm93bik6IHN0cmluZyB7XG4gIGNvbnN0IHMgPSBTdHJpbmcoc3RyIHx8IFwiXCIpO1xuICByZXR1cm4gcy5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIHMuc2xpY2UoMSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBmb3JtYXRTaXplQWJicmV2KGFiYnJldjogc3RyaW5nKTogc3RyaW5nIHtcbiAgcmV0dXJuIFNJWkVfTUFQW2FiYnJldl0gfHwgYWJicmV2O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZm9ybWF0QWxpZ25tZW50QWJicmV2KGFiYnJldjogc3RyaW5nKTogc3RyaW5nIHtcbiAgcmV0dXJuIGFiYnJldlxuICAgIC50cmltKClcbiAgICAuc3BsaXQoL1xccysvKVxuICAgIC5tYXAobGV0dGVyID0+IEFMSUdOTUVOVF9NQVBbbGV0dGVyXSB8fCBsZXR0ZXIpXG4gICAgLmpvaW4oXCIgXCIpO1xufVxuXG5jb25zdCBSQVdfTlBDUzogc3RyaW5nW10gPSBbXG4gIFwiQWJqdXJlclwiLCBcIkFjb2x5dGVcIiwgXCJBcHByZW50aWNlIFdpemFyZFwiLCBcIkFyY2hkcnVpZFwiLCBcIkFyY2hlclwiLCBcIkFyY2htYWdlXCIsIFwiQXNzYXNzaW5cIixcbiAgXCJCYW5kaXRcIiwgXCJCYW5kaXQgQ2FwdGFpblwiLCBcIkJhcmRcIiwgXCJCZXJzZXJrZXJcIiwgXCJCbGFja2d1YXJkXCIsIFwiQ2hhbXBpb25cIiwgXCJDb21tb25lclwiLFxuICBcIkNvbmp1cmVyXCIsIFwiQ3VsdCBGYW5hdGljXCIsIFwiQ3VsdGlzdFwiLCBcIkRpdmluZXJcIiwgXCJEcnVpZCAoTlBDKVwiLCBcIkRydWlkIE5QQ1wiLCBcIkVuY2hhbnRlclwiLFxuICBcIkV2b2tlclwiLCBcIkdsYWRpYXRvclwiLCBcIkd1YXJkXCIsIFwiSWxsdXNpb25pc3RcIiwgXCJLbmlnaHRcIiwgXCJLcmFrZW4gUHJpZXN0XCIsIFwiTWFnZVwiLFxuICBcIk1hcnRpYWwgQXJ0cyBBZGVwdFwiLCBcIk1hc3RlciBUaGllZlwiLCBcIk5lY3JvbWFuY2VyXCIsIFwiTm9ibGVcIiwgXCJQcmllc3RcIiwgXCJTY291dFwiLCBcIlNweVwiLFxuICBcIlN3YXNoYnVja2xlclwiLCBcIlRodWdcIiwgXCJUcmFuc211dGVyXCIsIFwiVHJpYmFsIFdhcnJpb3JcIiwgXCJWZXRlcmFuXCIsIFwiV2FyIFByaWVzdFwiLFxuICBcIldhcmxvY2sgb2YgdGhlIEFyY2hmZXlcIiwgXCJXYXJsb2NrIG9mIHRoZSBGaWVuZFwiLCBcIldhcmxvY2sgb2YgdGhlIEdyZWF0IE9sZCBPbmVcIiwgXCJXYXJsb3JkXCJcbl07XG5jb25zdCBOT1JNQUxJWkVEX05QQ19OQU1FUyA9IG5ldyBTZXQoUkFXX05QQ1MubWFwKG4gPT4gbm9ybWFsaXplTmFtZShuKSkpO1xuXG5mdW5jdGlvbiBub3JtYWxpemVOYW1lKG5hbWU6IHN0cmluZyk6IHN0cmluZyB7XG4gIHJldHVybiBuYW1lLnJlcGxhY2UoL1xccysvZywgXCIgXCIpLnRyaW0oKS50b0xvd2VyQ2FzZSgpO1xufVxuXG5mdW5jdGlvbiBjYXRlZ29yaXplQ3JlYXR1cmUobW9uc3RlcjogYW55KTogc3RyaW5nIHtcbiAgY29uc3QgdHlwZVZhbHVlID0gbW9uc3Rlci50eXBlO1xuICBjb25zdCBuYW1lID0gbW9uc3Rlci5uYW1lO1xuICBjb25zdCB0ID0gdHlwZW9mIHR5cGVWYWx1ZSA9PT0gXCJzdHJpbmdcIlxuICAgID8gdHlwZVZhbHVlLnRvTG93ZXJDYXNlKClcbiAgICA6IHR5cGVWYWx1ZT8udHlwZT8udG9Mb3dlckNhc2UoKSB8fCBTdHJpbmcodHlwZVZhbHVlKS50b0xvd2VyQ2FzZSgpO1xuXG4gIGNvbnN0IG5vcm1hbGl6ZWROYW1lID0gbm9ybWFsaXplTmFtZShuYW1lKTtcblxuICBpZiAobW9uc3Rlci5pc05wYyB8fCBtb25zdGVyLmlzTmFtZWRDcmVhdHVyZSkgcmV0dXJuIFwiU3RvcnkgTlBDc1wiO1xuICBpZiAodCA9PT0gXCJiZWFzdFwiKSByZXR1cm4gXCJCZWFzdHNcIjtcbiAgaWYgKHQgPT09IFwiaHVtYW5vaWRcIiAmJiBOT1JNQUxJWkVEX05QQ19OQU1FUy5oYXMobm9ybWFsaXplZE5hbWUpKSByZXR1cm4gXCJOb24tQmVhc3RzXCI7XG4gIGlmICh0ID09PSBcImh1bWFub2lkXCIpIHJldHVybiBcIk1vbnN0ZXJzXCI7XG4gIHJldHVybiBcIk1vbnN0ZXJzXCI7XG59XG5cbmZ1bmN0aW9uIHJlbmRlckFiaWxpdGllc1RhYmxlKHN0cjogbnVtYmVyLCBkZXg6IG51bWJlciwgY29uOiBudW1iZXIsIGludDogbnVtYmVyLCB3aXM6IG51bWJlciwgY2hhOiBudW1iZXIpOiBzdHJpbmcge1xuICByZXR1cm4gW1xuICAgIGB8IFNUUiB8IERFWCB8IENPTiB8IElOVCB8IFdJUyB8IENIQSB8YCxcbiAgICBgfCAtLS0gfCAtLS0gfCAtLS0gfCAtLS0gfCAtLS0gfCAtLS0gfGAsXG4gICAgYHwgJHtzdHJ9IHwgJHtkZXh9IHwgJHtjb259IHwgJHtpbnR9IHwgJHt3aXN9IHwgJHtjaGF9IHxgXG4gIF0uam9pbihcIlxcblwiKTtcbn1cblxuZnVuY3Rpb24gcmVuZGVyRW50cnkoZW50cnk6IGFueSk6IHN0cmluZyB7XG4gIGNvbnN0IG5hbWUgPSBlbnRyeS5uYW1lO1xuICBsZXQgZGVzY3JpcHRpb25zOiBzdHJpbmdbXSA9IFtdO1xuICBpZiAoQXJyYXkuaXNBcnJheShlbnRyeS5lbnRyaWVzKSkge1xuICAgIGRlc2NyaXB0aW9ucyA9IGVudHJ5LmVudHJpZXM7XG4gIH0gZWxzZSBpZiAodHlwZW9mIGVudHJ5LmVudHJpZXMgPT09IFwic3RyaW5nXCIpIHtcbiAgICBkZXNjcmlwdGlvbnMgPSBbZW50cnkuZW50cmllc107XG4gIH0gZWxzZSBpZiAoQXJyYXkuaXNBcnJheShlbnRyeS5kZXNjKSkge1xuICAgIGRlc2NyaXB0aW9ucyA9IGVudHJ5LmRlc2M7XG4gIH0gZWxzZSBpZiAodHlwZW9mIGVudHJ5LmRlc2MgPT09IFwic3RyaW5nXCIpIHtcbiAgICBkZXNjcmlwdGlvbnMgPSBbZW50cnkuZGVzY107XG4gIH1cbiAgY29uc3QgcmF3ID0gZGVzY3JpcHRpb25zLmpvaW4oXCIgXCIpO1xuICBjb25zdCBkZXNjID0gcmVwbGFjZTVlVGFncyhyYXcpO1xuICByZXR1cm4gYCoqKiR7bmFtZX0uKioqICR7ZGVzY31gO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gcGFyc2VCZXN0aWFyeUZpbGUoanNvbjogYW55LCBlZGl0aW9uSWQ6IHN0cmluZyk6IFBhcnNlZE1hcmtkb3duRmlsZVtdIHtcbiAgICBpZiAoIWpzb24ubW9uc3RlcikgcmV0dXJuIFtdO1xuICAgIChqc29uIGFzIGFueSkuX2VkaXRpb25JZCA9IGVkaXRpb25JZDtcbiAgXG4gICAgLy8gMSkgRmlsdGVyIG91dCBcdTIwMUNyZWZlcmVuY2VcdTIwMUQgZW50cmllcyB3aXRoIG5vIEFDIG9yIEhQXG4gICAgY29uc3QgdmFsaWRNb25zdGVycyA9IGpzb24ubW9uc3Rlci5maWx0ZXIoKG06IGFueSkgPT4ge1xuICAgIGNvbnN0IGFjVmFsID0gQXJyYXkuaXNBcnJheShtLmFjKVxuICAgICAgPyBtLmFjWzBdPy5hYyA/PyBtLmFjWzBdXG4gICAgICA6IHR5cGVvZiBtLmFjID09PSBcIm9iamVjdFwiXG4gICAgICAgID8gbS5hYz8uYWMgPz8gbnVsbFxuICAgICAgICA6IG0uYWM7XG5cbiAgICBjb25zdCBocFZhbCA9IHR5cGVvZiBtLmhwID09PSBcIm9iamVjdFwiXG4gICAgICA/IG0uaHA/LmF2ZXJhZ2UgPz8gbS5ocD8uaHAgPz8gbnVsbFxuICAgICAgOiBtLmhwO1xuICAgICAgcmV0dXJuIGFjVmFsICE9IG51bGwgJiYgaHBWYWwgIT0gbnVsbCAmJiAhaXNOYU4oTnVtYmVyKGFjVmFsKSkgJiYgIWlzTmFOKE51bWJlcihocFZhbCkpO1xuICAgIH0pO1xuXG4gICAgY29uc3QgYWxsTmFtZXMgPSBuZXcgU2V0KGpzb24ubW9uc3Rlci5tYXAoKG06IGFueSkgPT4gbS5uYW1lKSk7XG5jb25zdCB2YWxpZE5hbWVzID0gbmV3IFNldCh2YWxpZE1vbnN0ZXJzLm1hcCgobTogYW55KSA9PiBtLm5hbWUpKTtcbmNvbnN0IG1pc3NpbmcgPSBbLi4uYWxsTmFtZXNdLmZpbHRlcihuYW1lID0+ICF2YWxpZE5hbWVzLmhhcyhuYW1lKSk7XG5cbiAgXG4gICAgcmV0dXJuIHZhbGlkTW9uc3RlcnMubWFwKChtb25zdGVyOiBhbnkpID0+IHtcbiAgICAgIGNvbnN0IG5hbWUgICAgID0gbW9uc3Rlci5uYW1lIGFzIHN0cmluZztcbiAgICAgIGNvbnN0IHNhZmVOYW1lID0gbmFtZS5yZXBsYWNlKC9cXC8vZywgXCItXCIpO1xuICBcbiAgICAgIC8vIFx1MjAxNCBSYXcgZmllbGRzICYgZm9ybWF0dGluZyBcdTIwMTRcbiAgICAgIGNvbnN0IHJhd1NpemUgICAgICA9IG1vbnN0ZXIuc2l6ZSB8fCBcIk1cIjtcbiAgICAgIGNvbnN0IHJhd0FsaWdubWVudCA9IEFycmF5LmlzQXJyYXkobW9uc3Rlci5hbGlnbm1lbnQpXG4gICAgICAgID8gbW9uc3Rlci5hbGlnbm1lbnQuam9pbihcIiBcIilcbiAgICAgICAgOiBtb25zdGVyLmFsaWdubWVudCB8fCBcIk5cIjtcbiAgICBsZXQgcmF3VHlwZSA9IFwiVW5rbm93blwiO1xuXG4gICAgaWYgKHR5cGVvZiBtb25zdGVyLnR5cGUgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgIHJhd1R5cGUgPSBjYXBpdGFsaXplRmlyc3QobW9uc3Rlci50eXBlKTtcbiAgICB9IGVsc2UgaWYgKG1vbnN0ZXIudHlwZT8udHlwZSkge1xuICAgICAgY29uc3QgYmFzZSA9IGNhcGl0YWxpemVGaXJzdChtb25zdGVyLnR5cGUudHlwZSk7XG4gICAgICBjb25zdCB0YWdzID0gbW9uc3Rlci50eXBlLnRhZ3M/Lmxlbmd0aCA/IGAgKCR7bW9uc3Rlci50eXBlLnRhZ3MubWFwKGNhcGl0YWxpemVGaXJzdCkuam9pbihcIiwgXCIpfSlgIDogXCJcIjtcbiAgICAgIHJhd1R5cGUgPSBgJHtiYXNlfSR7dGFnc31gO1xuICAgIH1cblxuICAgIG1vbnN0ZXIuX3BhcnNlZFR5cGUgPSByYXdUeXBlO1xuICAgICAgXG4gICAgLy8gXHUyMDE0IEFDLCBIUCwgQ1IgXHUyMDE0XG4gICAgY29uc3QgYWMgPSBBcnJheS5pc0FycmF5KG1vbnN0ZXIuYWMpID8gbW9uc3Rlci5hY1swXS5hYyA6IG1vbnN0ZXIuYWM7XG4gICAgY29uc3QgaHAgPSBtb25zdGVyLmhwPy5hdmVyYWdlID8/IG1vbnN0ZXIuaHA7XG4gICAgY29uc3QgY3IgPSBtb25zdGVyLmNyO1xuXG4gICAgLy8gU2tpcCBtb25zdGVycyB3aXRoIG5vIEFDIGFuZCBIUFxuICAgIGlmICghYWMgJiYgIWhwKSB7XG4gICAgICBza2lwcGVkTW9uc3RlcnMucHVzaChtb25zdGVyLm5hbWUpO1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgICAgXG4gICAgICAvLyBcdTIwMTQgQWJpbGl0aWVzIFx1MjAxNFxuICAgICAgY29uc3QgYWJpbGl0aWVzID0gQXJyYXkuaXNBcnJheShtb25zdGVyLmFiaWxpdHkpXG4gICAgICAgID8gbW9uc3Rlci5hYmlsaXR5XG4gICAgICAgIDogW21vbnN0ZXIuc3RyLCBtb25zdGVyLmRleCwgbW9uc3Rlci5jb24sIG1vbnN0ZXIuaW50LCBtb25zdGVyLndpcywgbW9uc3Rlci5jaGFdO1xuICAgICAgY29uc3QgW3N0ciA9IDEwLCBkZXggPSAxMCwgY29uID0gMTAsIGludCA9IDEwLCB3aXMgPSAxMCwgY2hhID0gMTBdID0gYWJpbGl0aWVzO1xuICBcbiAgICAgIC8vIFx1MjAxNCBTcGVlZCAoaGFuZGxlcyBob3ZlciAmIG9iamVjdCBzcGVlZHMpIFx1MjAxNFxuICAgICAgY29uc3Qgc3BlZWRMaXN0OiBzdHJpbmdbXSA9IFtdO1xuICAgICAgaWYgKHR5cGVvZiBtb25zdGVyLnNwZWVkID09PSBcIm9iamVjdFwiKSB7XG4gICAgICAgIGZvciAoY29uc3QgW21vZGUsIHZhbF0gb2YgT2JqZWN0LmVudHJpZXMobW9uc3Rlci5zcGVlZCkpIHtcbiAgICAgICAgICBpZiAobW9kZSA9PT0gXCJjYW5Ib3ZlclwiKSBjb250aW51ZTtcbiAgICAgICAgICBpZiAodmFsICYmIHR5cGVvZiB2YWwgPT09IFwib2JqZWN0XCIgJiYgXCJudW1iZXJcIiBpbiB2YWwpIHtcbiAgICAgICAgICAgIGNvbnN0IG51bSAgPSAodmFsIGFzIGFueSkubnVtYmVyO1xuICAgICAgICAgICAgY29uc3QgY29uZCA9ICh2YWwgYXMgYW55KS5jb25kaXRpb24gPyBgICR7KHZhbCBhcyBhbnkpLmNvbmRpdGlvbn1gIDogXCJcIjtcbiAgICAgICAgICAgIHNwZWVkTGlzdC5wdXNoKGAke21vZGV9ICR7bnVtfSBmdC4ke2NvbmR9YCk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHNwZWVkTGlzdC5wdXNoKGAke21vZGV9ICR7dmFsfSBmdC5gKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHNwZWVkTGlzdC5wdXNoKGAke21vbnN0ZXIuc3BlZWR9IGZ0LmApO1xuICAgICAgfVxuICAgICAgY29uc3Qgc3BlZWQgPSBzcGVlZExpc3Quam9pbihcIiwgXCIpO1xuICBcbiAgICAgIC8vIFx1MjAxNCBTb3VyY2Ugc2FuaXRpemF0aW9uIFx1MjAxNFxuICAgICAgbGV0IHNvdXJjZSA9IGdldEZ1bGxTb3VyY2VOYW1lKG1vbnN0ZXIuc291cmNlLCBlZGl0aW9uSWQpO1xuICAgICAgc291cmNlICAgICA9IHNvdXJjZS5yZXBsYWNlKC86L2csIFwiIC1cIik7XG4gIFxuICAgICAgLy8gXHUyMDE0IENhdGVnb3J5IGZvciBmb2xkZXIgXHUyMDE0XG4gICAgICBjb25zdCBjYXRlZ29yeSA9IGNhdGVnb3JpemVDcmVhdHVyZShtb25zdGVyKTtcbiAgXG4gICAgICBjb25zdCBmbSAgID0gYnVpbGRGTShtb25zdGVyLCBCRVNUSUFSWV9NRVRBX0RFRlMpO1xuICAgICAgY29uc3QgeWFtbCA9IHNlcmlhbGl6ZUZyb250bWF0dGVyKGZtLCBCRVNUSUFSWV9NRVRBX0RFRlMpO1xuICAgICAgXG4gICAgICBjb25zdCBzYXZpbmdUaHJvd3MgPSAoZm1bRk1fRklFTERTLlNBVklOR19USFJPV1NdIGFzIHN0cmluZ1tdKSB8fCBbXTtcbiAgICAgIGNvbnN0IHNraWxscyAgICAgICA9IChmbVtGTV9GSUVMRFMuU0tJTExTXSAgICAgICAgYXMgc3RyaW5nW10pIHx8IFtdO1xuICAgICAgY29uc3Qgc2Vuc2VzICAgICAgID0gKGZtW0ZNX0ZJRUxEUy5TRU5TRVNdICAgICAgICBhcyBzdHJpbmdbXSkgfHwgW107XG4gICAgICBjb25zdCBsYW5ndWFnZXMgICAgPSAoZm1bRk1fRklFTERTLkxBTkdVQUdFU10gICAgIGFzIHN0cmluZ1tdKSB8fCBbXTtcblxuXG4gICAgICAvLyBcdTIwMTQgQm9keSBcdTIwMTRcbiAgICAgIGxldCBib2R5ID1cbiAgICAgIGAjICR7bmFtZX1cXG5cXG5gICtcbiAgICAgIGAke2Zvcm1hdFNpemVBYmJyZXYocmF3U2l6ZSl9ICR7cmF3VHlwZX0sICR7Zm9ybWF0QWxpZ25tZW50QWJicmV2KHJhd0FsaWdubWVudCl9XFxuXFxuYCArXG4gICAgICBgKipBcm1vciBDbGFzcyoqOiAke2FjfVxcbmAgK1xuICAgICAgYCoqSGl0IFBvaW50cyoqOiAke2hwfVxcbmAgK1xuICAgICAgYCoqU3BlZWQqKjogJHtzcGVlZH1cXG5gICtcbiAgICAgIChzYXZpbmdUaHJvd3MubGVuZ3RoXG4gICAgICAgID8gYCoqU2F2aW5nIFRocm93cyoqOiAke3NhdmluZ1Rocm93cy5qb2luKFwiLCBcIil9XFxuYFxuICAgICAgICA6IFwiXCIpICtcbiAgICAgIChza2lsbHMubGVuZ3RoXG4gICAgICAgID8gYCoqU2tpbGxzKio6ICR7c2tpbGxzLmpvaW4oXCIsIFwiKX1cXG5gXG4gICAgICAgIDogXCJcIikgK1xuICAgICAgKHNlbnNlcy5sZW5ndGhcbiAgICAgICAgPyBgKipTZW5zZXMqKjogJHtzZW5zZXMuam9pbihcIiwgXCIpfVxcbmBcbiAgICAgICAgOiBcIlwiKSArXG4gICAgICAobGFuZ3VhZ2VzLmxlbmd0aFxuICAgICAgICA/IGAqKkxhbmd1YWdlcyoqOiAke2xhbmd1YWdlcy5qb2luKFwiLCBcIil9XFxuYFxuICAgICAgICA6IFwiXCIpICtcbiAgICAgIGAqKkNoYWxsZW5nZSoqOiAke2NyfVxcblxcbmAgK1xuICAgICAgcmVuZGVyQWJpbGl0aWVzVGFibGUoc3RyLCBkZXgsIGNvbiwgaW50LCB3aXMsIGNoYSk7XG5cbiAgXG4gICAgICBpZiAobW9uc3Rlci50cmFpdCkgICAgIGJvZHkgKz0gYFxcblxcbiMjIyBUcmFpdHNcXG4ke21vbnN0ZXIudHJhaXQubWFwKHJlbmRlckVudHJ5KS5qb2luKFwiXFxuXFxuXCIpfWA7XG4gICAgICBpZiAobW9uc3Rlci5hY3Rpb24pICAgIGJvZHkgKz0gYFxcblxcbiMjIyBBY3Rpb25zXFxuJHttb25zdGVyLmFjdGlvbi5tYXAocmVuZGVyRW50cnkpLmpvaW4oXCJcXG5cXG5cIil9YDtcbiAgICAgIGlmIChtb25zdGVyLnJlYWN0aW9uKSAgYm9keSArPSBgXFxuXFxuIyMjIFJlYWN0aW9uc1xcbiR7bW9uc3Rlci5yZWFjdGlvbi5tYXAocmVuZGVyRW50cnkpLmpvaW4oXCJcXG5cXG5cIil9YDtcbiAgICAgIGlmIChtb25zdGVyLmxlZ2VuZGFyeSkgYm9keSArPSBgXFxuXFxuIyMjIExlZ2VuZGFyeSBBY3Rpb25zXFxuJHttb25zdGVyLmxlZ2VuZGFyeS5tYXAocmVuZGVyRW50cnkpLmpvaW4oXCJcXG5cXG5cIil9YDtcbiAgXG4gICAgICBjb25zdCBjb250ZW50ID0gYC0tLVxcbiR7eWFtbH1cXG4tLS1cXG5cXG4ke2JvZHl9YDtcbiAgXG4gICAgICByZXR1cm4ge1xuICAgICAgICBwYXRoOiAgICBgJHtjYXRlZ29yeX0vJHtzYWZlTmFtZX0ubWRgLFxuICAgICAgICBjb250ZW50LFxuICAgICAgfTtcbiAgICB9KTtcbiAgfVxuIiwgIi8vIDVlIDIwMjUgaXRlbXMgcGFyc2VyXG5cbmltcG9ydCB0eXBlIHsgUGFyc2VkTWFya2Rvd25GaWxlIH0gZnJvbSBcIi4uLy4uL3R5cGVzXCI7XG5pbXBvcnQgeyByZXBsYWNlNWVUYWdzIH0gICAgIGZyb20gXCIuL2hlbHBlcnMvdGFnUmVwbGFjZXJcIjtcbmltcG9ydCB7IGdldEZ1bGxTb3VyY2VOYW1lIH0gZnJvbSBcIi4vaGVscGVycy9zb3VyY2VNYXBcIjtcbmltcG9ydCB7IGJ1aWxkRk0sIHNlcmlhbGl6ZUZyb250bWF0dGVyLCBJVEVNX01FVEFfREVGUyB9IGZyb20gXCIuL2hlbHBlcnMvZnJvbnRtYXR0ZXJcIjtcblxuXG4vKiogSGVscGVyIHRvIGNhcGl0YWxpemUgZmlyc3QgbGV0dGVyIFx1MjAxMyBuZXZlciBjcmFzaGVzIG9uIG5vbi1zdHJpbmdzICovXG5mdW5jdGlvbiBjYXBpdGFsaXplRmlyc3QoaW5wdXQ6IGFueSk6IHN0cmluZyB7XG4gIC8vIGlmIGl0XHUyMDE5cyBub3QgYSBub24tZW1wdHkgc3RyaW5nLCBiYWlsIG91dFxuICBpZiAodHlwZW9mIGlucHV0ICE9PSBcInN0cmluZ1wiIHx8IGlucHV0Lmxlbmd0aCA9PT0gMCkgcmV0dXJuIFwiXCI7XG4gIGNvbnN0IHMgPSBpbnB1dC50cmltKCk7XG4gIHJldHVybiBzLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgcy5zbGljZSgxKS50b0xvd2VyQ2FzZSgpO1xufVxuXG5cbmV4cG9ydCBjb25zdCBEQU1BR0VfVFlQRV9NQVA6IFJlY29yZDxzdHJpbmcsc3RyaW5nPiA9IHtcbiAgUDogXCJQaWVyY2luZ1wiLFxuICBCOiBcIkJsdWRnZW9uaW5nXCIsXG4gIFM6IFwiU2xhc2hpbmdcIixcbiAgTjogXCJOZWNyb3RpY1wiLFxuICBSOiBcIlJhZGlhbnRcIixcbiAgRjogXCJGaXJlXCIsXG4gIEM6IFwiQ29sZFwiLFxuICBMOiBcIkxpZ2h0bmluZ1wiLFxuICBUOiBcIlRodW5kZXJcIixcbiAgQTogXCJBY2lkXCIsXG4gIEg6IFwiSGVhbGluZ1wiLFxuICBVOiBcIkZvcmNlXCIsXG4gIFY6IFwiUHN5Y2hpY1wiLFxufTtcblxuZXhwb3J0IGNvbnN0IFBST1BFUlRZX01BUDogUmVjb3JkPHN0cmluZyxzdHJpbmc+ID0ge1xuICBBOiBcIkFtbXVuaXRpb25cIixcbiAgRjogXCJGaW5lc3NlXCIsXG4gIEg6IFwiSGVhdnlcIixcbiAgTDogXCJMaWdodFwiLFxuICBSOiBcIlJlbG9hZFwiLFxuICBTOiBcIlNwZWNpYWxcIixcbiAgXCIySFwiOiBcIlR3by1IYW5kZWRcIixcbiAgVDogXCJUaHJvd25cIixcbiAgVjogXCJWZXJzYXRpbGVcIlxufTtcblxuZXhwb3J0IGNvbnN0IElURU1fVFlQRV9NQVA6IFJlY29yZDxzdHJpbmcsc3RyaW5nPiA9IHtcbiAgJEM6ICBcIkN1cnJlbmN5XCIsXG4gICRHOiAgXCJHZW1cIixcbiAgQTogICBcIkFtbXVuaXRpb25cIixcbiAgXCJBSVJ8RE1HXCI6IFwiVmVoaWNsZSAoYWlyKVwiLFxuICBcIkFGfERNR1wiOiBcIkZ1dHVyZSBBbW1vXCIsXG4gIEFUOiAgXCJBcnRpc2FuIFRvb2xzXCIsXG4gIEVYUDogXCJFeHBsb3NpdmVcIixcbiAgRkQ6ICBcIkZvb2QgYW5kIERyaW5rXCIsXG4gIEc6ICAgXCJHZWFyXCIsXG4gIEdTOiAgXCJHYW1lXCIsXG4gIEhBOiAgXCJIZWF2eSBBcm1vclwiLFxuICBcIklER3xURENTUlwiOiBcIklsbGljaXQgRHJ1Z1wiLFxuICBJTlM6IFwiSW5zdHJ1bWVudFwiLFxuICBMQTogIFwiTGlnaHQgQXJtb3JcIixcbiAgTTogICBcIldlYXBvblwiLFxuICBNQTogIFwiTWVkaXVtIEFybW9yXCIsXG4gIE1OVDogXCJNb3VudHMgYW5kIFZlaGljbGVzXCIsXG4gIE9ESDogXCJNaXNjZWxsYW5lb3VzXCIsXG4gIFA6ICAgXCJDb25zdW1hYmxlXCIsXG4gIFI6ICAgXCJSYW5nZWQgV2VhcG9uXCIsXG4gIFJEOiAgXCJSb2RcIixcbiAgUkc6ICBcIlJpbmdcIixcbiAgUzogICBcIlNoaWVsZFwiLFxuICBTQzogIFwiU2Nyb2xsXCIsXG4gIFNDRjogXCJTcGVsbCBDYXN0aW5nIEZvY3VzXCIsXG4gIFNIUDogXCJTaGlwXCIsXG4gIFQ6ICAgXCJUb29sXCIsXG4gIFRBSDogXCJNb3VudHMgYW5kIFZlaGljbGVzXCIsXG4gIFRHOiAgXCJUcmFkZSBHb29kc1wiLFxuICBWRUg6IFwiTW91bnRzIGFuZCBWZWhpY2xlc1wiLFxuICBXRDogIFwiV2FuZFwiLFxufTtcblxuLyoqIGNvZGUgXHUyMTkyIGZ1bGwgZm9sZGVyIHBhdGggdW5kZXIgSXRlbXMvICovXG5jb25zdCBjb2RlRm9sZGVyTWFwOiBSZWNvcmQ8c3RyaW5nLHN0cmluZz4gPSB7XG4gIC8vIFdlYXBvbnMgJiBBcm1vclxuICBcIkFcIjogICBcIldlYXBvbnMgYW5kIEFybW9yL0FtbXVuaXRpb25cIixcbiAgXCJNXCI6ICAgXCJXZWFwb25zIGFuZCBBcm1vci9XZWFwb25zXCIsXG4gIFwiUlwiOiAgIFwiV2VhcG9ucyBhbmQgQXJtb3IvUmFuZ2VkIFdlYXBvbnNcIixcbiAgXCJTXCI6ICAgXCJXZWFwb25zIGFuZCBBcm1vci9TaGllbGRzXCIsXG4gIFwiTEFcIjogIFwiV2VhcG9ucyBhbmQgQXJtb3IvQXJtb3IvTGlnaHQgQXJtb3JcIixcbiAgXCJNQVwiOiAgXCJXZWFwb25zIGFuZCBBcm1vci9Bcm1vci9NZWRpdW0gQXJtb3JcIixcbiAgXCJIQVwiOiAgXCJXZWFwb25zIGFuZCBBcm1vci9Bcm1vci9IZWF2eSBBcm1vclwiLFxuICBcIkVYUFwiOiBcIldlYXBvbnMgYW5kIEFybW9yL1dlYXBvbnMvRXhwbG9zaXZlc1wiLFxuICAvLyBGdXR1cmUgQW1tbyAoQUZ8RE1HIFx1MjE5MiByYXdDb2RlIFwiQUZcIilcbiAgXCJBRlwiOiAgXCJXZWFwb25zIGFuZCBBcm1vci9BbW11bml0aW9uL0Z1dHVyZSBBbW1vXCIsXG5cbiAgLy8gTWFnaWNhbCBJdGVtc1xuICBcIlJEXCI6ICBcIk1hZ2ljYWwgSXRlbXMvUm9kc1wiLFxuICBcIlJHXCI6ICBcIk1hZ2ljYWwgSXRlbXMvUmluZ3NcIixcbiAgXCJTQ1wiOiAgXCJNYWdpY2FsIEl0ZW1zL1Njcm9sbHNcIixcbiAgXCJTQ0ZcIjogXCJNYWdpY2FsIEl0ZW1zL1NwZWxsIENhc3RpbmcgRm9jdXNcIixcbiAgXCJXRFwiOiAgXCJNYWdpY2FsIEl0ZW1zL1dhbmRzXCIsXG5cbiAgLy8gVmFsdWFibGVzXG4gIFwiJEdcIjogXCJWYWx1YWJsZXMvR2Vtc1wiLFxuICAvLyBDdXJyZW5jeSAocmF3Q29kZSBiZWNvbWVzIFwiQ1wiIGFmdGVyIHN0cmlwcGluZyAkKVxuICBcIkNcIjogIFwiVmFsdWFibGVzL0N1cnJlbmN5XCIsXG4gIFwiVEdcIjogXCJWYWx1YWJsZXMvVHJhZGUgR29vZHNcIixcblxuICAvLyBBcnRpc2FuIEdvb2RzXG4gIFwiQVRcIjogIFwiQXJ0aXNhbiBHb29kcy9Ub29sc1wiLFxuICBcIlRcIjogICBcIkFydGlzYW4gR29vZHMvVG9vbHNcIixcbiAgXCJJTlNcIjogXCJBcnRpc2FuIEdvb2RzL0luc3RydW1lbnRzXCIsXG4gIFwiR1NcIjogIFwiQXJ0aXNhbiBHb29kcy9HYW1lc1wiLFxuXG4gIC8vIEdlYXIgJiBNb3VudHNcbiAgXCJHXCI6ICAgXCJHZWFyXCIsXG4gIC8vIE1vdW50cyAmIFZlaGljbGVzXG4gIFwiTU5UXCI6IFwiR2Vhci9Nb3VudHMgYW5kIFZlaGljbGVzXCIsXG4gIFwiVEFIXCI6IFwiR2Vhci9Nb3VudHMgYW5kIFZlaGljbGVzXCIsXG4gIFwiVkVIXCI6IFwiR2Vhci9Nb3VudHMgYW5kIFZlaGljbGVzXCIsXG4gIC8vIEFpciB2ZWhpY2xlcyAoQUlSfERNRyBcdTIxOTIgcmF3Q29kZSBcIkFJUlwiKVxuICBcIkFJUlwiOiBcIkdlYXIvTW91bnRzIGFuZCBWZWhpY2xlcy9BaXJcIixcblxuICAvLyBDb25zdW1hYmxlc1xuICBcIlBcIjogICBcIkNvbnN1bWFibGVzXCIsXG4gIC8vIEZvb2QgJiBEcmlua1xuICBcIkZEXCI6ICBcIkNvbnN1bWFibGVzL0Zvb2QgYW5kIERyaW5rXCIsXG5cbiAgLy8gSWxsaWNpdCBEcnVncyAoSURHfFREQ1NSIFx1MjE5MiByYXdDb2RlIFwiSURHXCIpXG4gIFwiSURHXCI6IFwiR2Vhci9JbGxpY2l0IERydWdzXCIsXG5cbiAgLy8gTWlzY2VsbGFuZW91cyAoT0RIKVxuICBcIk9ESFwiOiBcIkdlYXIvTWlzY2VsbGFuZW91c1wiLFxufTtcblxuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlSXRlbXNGaWxlKGpzb246IGFueSwgZWRpdGlvbklkOiBzdHJpbmcpOiBQYXJzZWRNYXJrZG93bkZpbGVbXSB7XG4gIGNvbnN0IHJhd0l0ZW1zOiBhbnlbXSA9IFtdO1xuICBpZiAoQXJyYXkuaXNBcnJheShqc29uLmJhc2VpdGVtKSkgcmF3SXRlbXMucHVzaCguLi5qc29uLmJhc2VpdGVtKTtcbiAgaWYgKEFycmF5LmlzQXJyYXkoanNvbi5pdGVtKSkgICAgIHJhd0l0ZW1zLnB1c2goLi4uanNvbi5pdGVtKTtcbiAgaWYgKEFycmF5LmlzQXJyYXkoanNvbi5vYmplY3QpKSAgIHJhd0l0ZW1zLnB1c2goLi4uanNvbi5vYmplY3QpO1xuICBpZiAoQXJyYXkuaXNBcnJheShqc29uLnZlaGljbGUpKSAgcmF3SXRlbXMucHVzaCguLi5qc29uLnZlaGljbGUpO1xuICBpZiAoIXJhd0l0ZW1zLmxlbmd0aCkgcmV0dXJuIFtdO1xuXG4gIGNvbnN0IGJhc2VOYW1lcyA9IG5ldyBTZXQ8c3RyaW5nPihcbiAgICBBcnJheS5pc0FycmF5KGpzb24uYmFzZWl0ZW0pID8ganNvbi5iYXNlaXRlbS5tYXAoKGI6IGFueSkgPT4gYi5uYW1lKSA6IFtdXG4gICk7XG4gIGNvbnN0IG91dDogUGFyc2VkTWFya2Rvd25GaWxlW10gPSBbXTtcblxuICBmb3IgKGNvbnN0IGl0IG9mIHJhd0l0ZW1zKSB7XG4gICAgY29uc3QgbmFtZSAgICAgPSBpdC5uYW1lIGFzIHN0cmluZztcbiAgICBjb25zdCBzYWZlTmFtZSA9IG5hbWUucmVwbGFjZSgvW1xcL1xcXFw6XS9nLCBcIi1cIik7XG5cbiAgICAvLyBEZXRlcm1pbmUgZm9sZGVyXG4gICAgY29uc3QgcmF3Q29kZSA9IChpdC50eXBlIGFzIHN0cmluZyB8fCBcIlwiKS5zcGxpdChcInxcIilbMF1cbiAgICAgICAgLnNwbGl0KFwifFwiKVswXSAgICAgIC8vIGRyb3AgYW55dGhpbmcgYWZ0ZXIgXHUyMDFDfFx1MjAxRFxuICAgICAgICAucmVwbGFjZSgvXlxcJC8sIFwiXCIpOyAvLyBzdHJpcCBsZWFkaW5nIFx1MjAxQyRcdTIwMURcbiAgICBsZXQgZm9sZGVyICAgID0gY29kZUZvbGRlck1hcFtyYXdDb2RlXSA/PyBcIk1pc2NlbGxhbmVvdXNcIjtcblxuICAgIC8vIFZhcmlhbnRzXG4gICAgaWYgKGl0LmJvbnVzV2VhcG9uKSB7XG4gICAgICBmb2xkZXIgPSBgJHtmb2xkZXJ9L1ZhcmlhbnRzYDtcbiAgICB9XG4gICAgLy8gTWFnaWNhbFxuICAgIGVsc2Uge1xuICAgICAgY29uc3QgaXNNYWdpYyA9ICEhaXQud29uZHJvdXMgfHwgISFpdC5yZXFBdHR1bmUgfHwgISFpdC5yZXFfYXR0dW5lXG4gICAgICAgIHx8IFN0cmluZyhpdC5yYXJpdHkpLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoXCJtYWdpY1wiKTtcbiAgICAgIGlmIChpc01hZ2ljKSB7XG4gICAgICAgIGNvbnN0IFsgLCAuLi5yZXN0IF0gPSBmb2xkZXIuc3BsaXQoXCIvXCIpO1xuICAgICAgICBmb2xkZXIgPSBbXCJNYWdpY2FsIEl0ZW1zXCIsIC4uLnJlc3RdLmpvaW4oXCIvXCIpO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIFdlYXBvbiBjYXRlZ29yeSBzdWJmb2xkZXJcbiAgICBpZiAoKGZvbGRlci5zdGFydHNXaXRoKFwiV2VhcG9ucyBhbmQgQXJtb3IvV2VhcG9uc1wiKSB8fFxuICAgICAgICAgZm9sZGVyLnN0YXJ0c1dpdGgoXCJXZWFwb25zIGFuZCBBcm1vci9SYW5nZWQgV2VhcG9uc1wiKSkgJiYgaXQud2VhcG9uQ2F0ZWdvcnkpIHtcbiAgICAgIGZvbGRlciA9IGAke2ZvbGRlcn0vJHtjYXBpdGFsaXplRmlyc3QoaXQud2VhcG9uQ2F0ZWdvcnkpfWA7XG4gICAgfVxuXG4gICAgLy8gbWFrZSBlZGl0aW9uSWQgYXZhaWxhYmxlIGZvciB0aGUgU09VUkNFIGZpZWxkXG4oanNvbiBhcyBhbnkpLl9lZGl0aW9uSWQgPSBlZGl0aW9uSWQ7XG5cbi8vIGJ1aWxkIGEgRnJvbnRtYXR0ZXIgb2JqZWN0IGZyb20gdGhlIEpTT05cbmNvbnN0IGZtICAgPSBidWlsZEZNKGl0LCBJVEVNX01FVEFfREVGUyk7XG5cbmlmIChyYXdDb2RlID09PSBcIk1cIiAmJiBpdC53ZWFwb25DYXRlZ29yeSkge1xuICAvLyBcdTIwMUNNXHUyMDFEIFx1MjE5MiB1c2Ugd2VhcG9uQ2F0ZWdvcnkgKFx1MjAxQ1NpbXBsZVx1MjAxRC9cdTIwMUNNYXJ0aWFsXHUyMDFEKVxuICBmbS50eXBlID0gYCR7Y2FwaXRhbGl6ZUZpcnN0KGl0LndlYXBvbkNhdGVnb3J5KX0gV2VhcG9uYDtcbn0gZWxzZSBpZiAoSVRFTV9UWVBFX01BUFtyYXdDb2RlXSkge1xuICAvLyBhbnkgb3RoZXIgY29kZSBcdTIxOTIgbWFwcGVkIGxhYmVsXG4gIGZtLnR5cGUgPSBJVEVNX1RZUEVfTUFQW3Jhd0NvZGVdO1xufVxuaWYgKEFycmF5LmlzQXJyYXkoZm0uZGFtYWdlVHlwZXMpKSB7XG4gIGZtLmRhbWFnZVR5cGVzID0gZm0uZGFtYWdlVHlwZXMubWFwKChjb2RlOiBzdHJpbmcpID0+XG4gICAgREFNQUdFX1RZUEVfTUFQW2NvZGVdIHx8IGNvZGVcbiAgKTtcbn1cbi8vIHNlcmlhbGl6ZSBpdCB0byBZQU1MXG5sZXQgeWFtbCA9IHNlcmlhbGl6ZUZyb250bWF0dGVyKGZtLCBJVEVNX01FVEFfREVGUyk7XG5cbi8vIGlmIHlvdSBzdGlsbCB3YW50IHBhY2tDb250ZW50cywgYXBwZW5kIGl0IGhlcmU6XG5pZiAoQXJyYXkuaXNBcnJheShpdC5wYWNrQ29udGVudHMpKSB7XG4gIHlhbWwgKz0gXCJcXG5wYWNrQ29udGVudHM6XCI7XG4gIGZvciAoY29uc3QgcGMgb2YgaXQucGFja0NvbnRlbnRzKSB7XG4gICAgeWFtbCArPSBgXFxuICAtIGl0ZW06IFwiJHtwYy5pdGVtfVwiXFxuICAgIHF1YW50aXR5OiAke3BjLnF1YW50aXR5fWA7XG4gIH1cbn1cbiBcbi8vIHdyYXAgaXQgaW4gdGhlIFlBTUwgZmVuY2VcbmNvbnN0IGZyb250bWF0dGVyID0gYC0tLVxcbiR7eWFtbH1cXG4tLS1gO1xuXG5cbiAgICAvLyBCb2R5IGxpbmVzXG4gICAgY29uc3QgbGluZXM6IHN0cmluZ1tdID0gW107XG4gICAgbGluZXMucHVzaChgIyAke25hbWV9YCk7XG4gICAgbGluZXMucHVzaChcIlwiKTtcblxuICAgIC8vIFN1YnRpdGxlXG4gICAgY29uc3Qgc3VidGl0bGUgPSBpdC53ZWFwb25cbiAgICAgID8gYCR7Y2FwaXRhbGl6ZUZpcnN0KGl0LndlYXBvbkNhdGVnb3J5KX0gV2VhcG9uYFxuICAgICAgOiBpdC5hcm1vclxuICAgICAgICA/IGZvbGRlci5zcGxpdChcIi9cIikucG9wKCkgfHwgXCJBcm1vclwiXG4gICAgICAgIDogXCJcIjtcbiAgICBpZiAoc3VidGl0bGUpIGxpbmVzLnB1c2goYCMjIyAqJHtzdWJ0aXRsZX0qYCk7XG5cbiAgICAvLyBTdGF0cyBsaW5lc1xuICAgIGlmIChpdC53ZWFwb24pIHtcbiAgICAgIGxpbmVzLnB1c2goYCoqQ2F0ZWdvcnkqKjogJHtjYXBpdGFsaXplRmlyc3QoaXQud2VhcG9uQ2F0ZWdvcnkpfWApO1xuICAgICAgbGluZXMucHVzaChgKipEYW1hZ2UqKjogJHtpdC5kbWcxID8/IFwiXCJ9JHtpdC5kbWcyID8gYCAvICR7aXQuZG1nMn1gIDogXCJcIn1gKTtcbiAgICAgIGNvbnN0IHR5cGVzQm9keSA9IChBcnJheS5pc0FycmF5KGl0LmRtZ1R5cGUpID8gaXQuZG1nVHlwZSA6IFtpdC5kbWdUeXBlXSlcbiAgICAgICAgLmZpbHRlcigodDogYW55KSA9PiBCb29sZWFuKHQpKVxuICAgICAgICAubWFwKCh0OiBzdHJpbmcpID0+IERBTUFHRV9UWVBFX01BUFt0XSB8fCB0KTtcbiAgICAgIGxpbmVzLnB1c2goYCoqRGFtYWdlIFR5cGUqKjogJHt0eXBlc0JvZHkuam9pbihcIiwgXCIpfWApO1xuICAgICAgbGluZXMucHVzaChgKipSYW5nZSoqOiAke2l0LnJhbmdlID8/IFwiXHUyMDE0XCJ9YCk7XG4gICAgICBsaW5lcy5wdXNoKGAqKlJlbG9hZCoqOiAke2l0LnJlbG9hZCA/PyBcIlx1MjAxNFwifWApO1xuICAgICAgaWYgKGl0LmFtbW9UeXBlKSBsaW5lcy5wdXNoKGAqKkFtbW8gVHlwZSoqOiAke2l0LmFtbW9UeXBlfWApO1xuICAgICAgaWYgKEFycmF5LmlzQXJyYXkoaXQucHJvcGVydHkpICYmIGl0LnByb3BlcnR5Lmxlbmd0aCkge1xuICAgICAgICBjb25zdCBwcm9wc0JvZHkgPSBpdC5wcm9wZXJ0eS5tYXAoKHA6IHN0cmluZykgPT4gUFJPUEVSVFlfTUFQW3BdIHx8IHApO1xuICAgICAgICBsaW5lcy5wdXNoKGAqKlByb3BlcnRpZXMqKjogJHtwcm9wc0JvZHkuam9pbihcIiwgXCIpfWApO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAoaXQuYXJtb3IpIHtcbiAgICAgIGxpbmVzLnB1c2goYCoqQXJtb3IgQ2xhc3MqKjogJHtpdC5hY31gKTtcbiAgICAgIGlmIChpdC5zdGVhbHRoKSBsaW5lcy5wdXNoKGAqKlN0ZWFsdGggRGlzYWR2YW50YWdlKio6IHRydWVgKTtcbiAgICAgIGxpbmVzLnB1c2goXCJcIik7XG4gICAgfVxuXG4gICAgLy8gRGVzY3JpcHRpb24gd2l0aCBuZXN0ZWQgZW50cmllc1xuICAgIGNvbnN0IGRlc2MgPSBpdC5lbnRyaWVzID8/IGl0LmRlc2M7XG4gICAgaWYgKGRlc2MpIHtcbiAgICAgIGZvciAoY29uc3QgcCBvZiBBcnJheS5pc0FycmF5KGRlc2MpID8gZGVzYyA6IFtkZXNjXSkge1xuICAgICAgICBpZiAodHlwZW9mIHAgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgZm9yIChjb25zdCBsaW5lIG9mIHJlcGxhY2U1ZVRhZ3MocCkuc3BsaXQoXCJcXG5cIikpIHtcbiAgICAgICAgICAgIGxpbmVzLnB1c2gobGluZSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGxpbmVzLnB1c2goXCJcIik7XG4gICAgICAgIH0gZWxzZSBpZiAocCAmJiB0eXBlb2YgcCA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgICBpZiAobGluZXNbbGluZXMubGVuZ3RoIC0gMV0gPT09IFwiXCIpIHtcbiAgICAgICAgICAgIGxpbmVzLnBvcCgpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBsaW5lcy5wdXNoKGAjIyMjICR7cC5uYW1lfWApO1xuICAgICAgICAgIGNvbnN0IHN1YiA9IEFycmF5LmlzQXJyYXkocC5lbnRyaWVzKSA/IHAuZW50cmllcyA6IFtdO1xuICAgICAgICAgIGZvciAoY29uc3Qgc3Agb2Ygc3ViKSB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGxpbmUgb2YgcmVwbGFjZTVlVGFncyhzcCkuc3BsaXQoXCJcXG5cIikpIHtcbiAgICAgICAgICAgICAgbGluZXMucHVzaChsaW5lKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgbGluZXMucHVzaChcIlwiKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGNvbnN0IGJvZHkgPSBsaW5lcy5qb2luKFwiXFxuXCIpO1xuXG4gICAgb3V0LnB1c2goeyBwYXRoOiBgSXRlbXMvJHtmb2xkZXJ9LyR7c2FmZU5hbWV9Lm1kYCwgY29udGVudDogYCR7ZnJvbnRtYXR0ZXJ9XFxuXFxuJHtib2R5fWAgfSk7XG4gIH1cblxuICByZXR1cm4gb3V0LnNvcnQoKGEsYikgPT4gYS5wYXRoLmxvY2FsZUNvbXBhcmUoYi5wYXRoKSk7XG59IiwgIi8vIGZyb250bWF0dGVyIDVlIDIwMjVcblxuaW1wb3J0IHsgZ2V0RnVsbFNvdXJjZU5hbWUgfSBmcm9tIFwiLi9zb3VyY2VNYXBcIjtcbmltcG9ydCB7IGZvcm1hdFNpemVBYmJyZXYsIGZvcm1hdEFsaWdubWVudEFiYnJldiB9IGZyb20gXCIuLi9iZXN0aWFyeVwiO1xuaW1wb3J0IHsgZm9ybWF0UmFuZ2UsIGZvcm1hdFRpbWUsIGZvcm1hdER1cmF0aW9uLCBTQ0hPT0xfTUFQIH0gZnJvbSBcIi4uL3NwZWxsc1wiO1xuaW1wb3J0IHsgUFJPUEVSVFlfTUFQLCBEQU1BR0VfVFlQRV9NQVAsIElURU1fVFlQRV9NQVAgfSBmcm9tIFwiLi4vaXRlbXNcIjtcbmltcG9ydCB7IHJlcGxhY2U1ZVRhZ3MgfSBmcm9tIFwiLi90YWdSZXBsYWNlclwiO1xuXG5mdW5jdGlvbiBibGFua1VuZGVmaW5lZCh2YWw6IGFueSk6IGFueSB7XG4gIHJldHVybiB2YWwgPT09IHVuZGVmaW5lZCA/IFwiXCIgOiB2YWw7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjYXAoc3RyOiBhbnkpOiBzdHJpbmcge1xuICBpZiAodHlwZW9mIHN0ciAhPT0gXCJzdHJpbmdcIikgcmV0dXJuIFwiXCI7XG4gIHJldHVybiBzdHIuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBzdHIuc2xpY2UoMSk7XG59XG5cbmV4cG9ydCBjb25zdCBBQklMSVRZX0ZVTEw6IFJlY29yZDxzdHJpbmcsc3RyaW5nPiA9IHtcbiAgc3RyOiBcIlN0cmVuZ3RoXCIsXG4gIGRleDogXCJEZXh0ZXJpdHlcIixcbiAgY29uOiBcIkNvbnN0aXR1dGlvblwiLFxuICBpbnQ6IFwiSW50ZWxsaWdlbmNlXCIsXG4gIHdpczogXCJXaXNkb21cIixcbiAgY2hhOiBcIkNoYXJpc21hXCIsXG59O1xuXG5leHBvcnQgY29uc3QgU0laRV9NQVA6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4gPSB7XG4gIFQ6IFwiVGlueVwiLFxuICBTOiBcIlNtYWxsXCIsXG4gIE06IFwiTWVkaXVtXCIsXG4gIEw6IFwiTGFyZ2VcIixcbiAgSDogXCJIdWdlXCIsXG4gIEc6IFwiR2FyZ2FudHVhblwiXG59O1xuXG4vLyBcdTI1MDBcdTI1MDBcdTI1MDAgVW5pdmVyc2FsIGZyb250bWF0dGVyIGtleXMgXHUyNTAwXHUyNTAwXHUyNTAwICBcbmV4cG9ydCBjb25zdCBGTV9GSUVMRFMgPSB7XG4gIEFCSUxJVFlfQk9OVVNFUzogICAgXCJhYmlsaXR5X2JvbnVzZXNcIixcbiAgQUM6ICAgICAgICAgICAgICAgICBcIkFDXCIsXG4gIEFMSUdOTUVOVDogICAgICAgICAgXCJBbGlnbm1lbnRcIixcbiAgQU1NT19UWVBFOiAgICAgICAgICBcIkFtbW8gVHlwZVwiLFxuICBBUk1PUl9QUk9GSUNJRU5DSUVTOlwiYXJtb3ItcHJvZlwiLFxuICBBVFRBQ0tfVFlQRTogICAgICAgIFwiYXR0YWNrX3R5cGVcIixcbiAgQVRUVU5FTUVOVDogICAgICAgICBcIkF0dHVuZW1lbnRcIixcbiAgQVRUVU5FX1JFUTogICAgICAgICBcIkF0dHVuZV9SZXFcIixcbiAgQ0FTVElOR19USU1FOiAgICAgICBcImNhc3RpbmdfdGltZVwiLFxuICBDSEFSSVNNQTogICAgICAgICAgIFwiY2hhcmlzbWFcIixcbiAgQ0hBX01PRDogICAgICAgICAgICBcImNoYV9tb2RcIixcbiAgQ09OQ0VOVFJBVElPTjogICAgICBcImNvbmNlbnRyYXRpb25cIixcbiAgQ09ORElUSU9OX0lNTTogICAgICBcImNvbmRfaW1tdW5pdHlcIixcbiAgQ09OU1RJVFVUSU9OOiAgICAgICBcImNvbnN0aXR1dGlvblwiLFxuICBDT05fTU9EOiAgICAgICAgICAgIFwiY29uX21vZFwiLFxuICBDT1NUOiAgICAgICAgICAgICAgIFwiY29zdFwiLFxuICBDT01QT05FTlRTOiAgICAgICAgIFwiQ29tcG9uZW50c1wiLFxuICBDSEFMTEVOR0VfUkFUSU5HOiAgIFwiQ1JcIixcbiAgREFNQUdFX1RZUEU6ICAgICAgICBcImRhbWFnZV90eXBlXCIsXG4gIERBTUFHRV9UWVBFUzogICAgICAgXCJkYW1hZ2VUeXBlc1wiLFxuICBEQU1BR0U6ICAgICAgICAgICAgIFwiZGFtYWdlXCIsXG4gIERBTUFHRV9SRVM6ICAgICAgICAgXCJkbWdfcmVzaXN0YW5jZVwiLFxuICBEQU1BR0VfSU1NOiAgICAgICAgIFwiZG1nX2ltbXVuaXR5XCIsXG4gIERFWFRFUklUWTogICAgICAgICAgXCJkZXh0ZXJpdHlcIixcbiAgREVYX01PRDogICAgICAgICAgICBcImRleF9tb2RcIixcbiAgRFVSQVRJT046ICAgICAgICAgICBcImR1cmF0aW9uXCIsXG4gIFJVTEVTRVQ6ICAgICAgICAgICAgXCJydWxlc2V0XCIsXG4gIEhQOiAgICAgICAgICAgICAgICAgXCJIUFwiLFxuICBJTlRFTExJR0VOQ0U6ICAgICAgIFwiaW50ZWxsaWdlbmNlXCIsXG4gIElOVF9NT0Q6ICAgICAgICAgICAgXCJpbnRfbW9kXCIsXG4gIExBTkdVQUdFUzogICAgICAgICAgXCJsYW5ndWFnZXNcIixcbiAgTEVWRUw6ICAgICAgICAgICAgICBcImxldmVsXCIsXG4gIE1BR0lDQUw6ICAgICAgICAgICAgXCJtYWdpY2FsXCIsXG4gIE1BVEVSSUFMOiAgICAgICAgICAgXCJtYXRlcmlhbFwiLFxuICBOQU1FOiAgICAgICAgICAgICAgIFwibmFtZVwiLFxuICBQUk9QRVJUSUVTOiAgICAgICAgIFwicHJvcGVydGllc1wiLFxuICBSQU5HRTogICAgICAgICAgICAgIFwicmFuZ2VcIixcbiAgUkFSSVRZOiAgICAgICAgICAgICBcInJhcml0eVwiLFxuICBSRUxPQUQ6ICAgICAgICAgICAgIFwicmVsb2FkXCIsXG4gIFJJVFVBTDogICAgICAgICAgICAgXCJyaXR1YWxcIixcbiAgU0FWRTogICAgICAgICAgICAgICBcInNhdmVcIixcbiAgU0FWSU5HX1RIUk9XUzogICAgICBcInNhdmluZ190aHJvd3NcIixcbiAgU0NIT09MOiAgICAgICAgICAgICBcInNjaG9vbFwiLFxuICBTRU5TRVM6ICAgICAgICAgICAgIFwic2Vuc2VzXCIsXG4gIFNJWkU6ICAgICAgICAgICAgICAgXCJzaXplXCIsXG4gIFNLSUxMUzogICAgICAgICAgICAgXCJza2lsbHNcIixcbiAgU0tJTExfQ0hPSUNFX0xJU1Q6ICBcInNraWxsX2Nob2ljZV9saXN0XCIsXG4gIFNPTUFUSUM6ICAgICAgICAgICAgXCJzb21hdGljXCIsXG4gIFNPVVJDRTogICAgICAgICAgICAgXCJzb3VyY2VcIixcbiAgU1BFQ0lFUzogICAgICAgICAgICBcInNwZWNpZXNcIixcbiAgU1BFRUQ6ICAgICAgICAgICAgICBcInNwZWVkXCIsXG4gIFNQRUxMX0NBU1RfTU9EOiAgICAgXCJTcGVsbCBDYXN0IE1vZFwiLFxuICBTUEVMTF9SQU5HRTogICAgICAgIFwiUmFuZ2VcIixcbiAgU1RFQUxUSF9ESVNBRFZBTlRBR0U6IFwic3RlYWx0aERpc2FkdmFudGFnZVwiLFxuICBTVFJFTkdUSDogICAgICAgICAgIFwic3RyZW5ndGhcIixcbiAgU1RSX01PRDogICAgICAgICAgICBcInN0cl9tb2RcIixcbiAgU1VCUkFDRVM6ICAgICAgICAgICBcInN1YnJhY2VzXCIsXG4gIFRPT0xfUFJPRklDSUVOQ0lFUzogXCJ0b29sLXByb2ZcIixcbiAgVE9PTF9DSE9JQ0VfTElTVDogIFwidG9vbF9jaG9pY2VfbGlzdFwiLFxuICBUUkFJVFM6ICAgICAgICAgICAgIFwidHJhaXRzXCIsXG4gIFRZUEU6ICAgICAgICAgICAgICAgXCJ0eXBlXCIsXG4gIFZBUklBTlQ6ICAgICAgICAgICAgXCJWYXJpYW50XCIsXG4gIFZFUkJBTDogICAgICAgICAgICAgXCJ2ZXJiYWxcIixcbiAgV0VBUE9OX1BST0ZJQ0lFTkNJRVM6IFwid2VhcG9uLXByb2ZcIixcbiAgV0VJR0hUOiAgICAgICAgICAgICBcIndlaWdodFwiLFxuICBXSVNET006ICAgICAgICAgICAgIFwid2lzZG9tXCIsXG4gIFdJU19NT0Q6ICAgICAgICAgICAgXCJ3aXNfbW9kXCIsXG59IGFzIGNvbnN0O1xuXG5leHBvcnQgdHlwZSBGTUtleSA9IGtleW9mIHR5cGVvZiBGTV9GSUVMRFM7XG5leHBvcnQgdHlwZSBGcm9udG1hdHRlciA9IFBhcnRpYWw8UmVjb3JkPHR5cGVvZiBGTV9GSUVMRFNbRk1LZXldLCB1bmtub3duPj47XG5cbi8vIFx1MjUwMFx1MjUwMFx1MjUwMCBEZWZpbml0aW9uIG9mIGEgc2luZ2xlIGZpZWxkIG1hcHBpbmcgXHUyNTAwXHUyNTAwXHUyNTAwXG5leHBvcnQgaW50ZXJmYWNlIEZpZWxkRGVmIHtcbiAgLyoqIFdoaWNoIGNhbGxcdTIwMTBzaWduIChrZXkgaW4gRk1fRklFTERTKSAqL1xuICBjYWxsU2lnbjogRk1LZXk7XG4gIC8qKiBXaGljaCBKU09OIHByb3BlcnR5IHRvIHJlYWQgKi9cbiAganNvbktleTogIHN0cmluZyB8IHN0cmluZ1tdO1xuICAvKiogT3B0aW9uYWwgdHJhbnNmb3JtZXI6IHJhdyBKU09OIFx1MjE5MiBmaW5hbCB2YWx1ZSAqL1xuICBjb252PzogICAgKHJhdzogYW55LCBhbGxKc29uPzogYW55KSA9PiB1bmtub3duO1xufVxuXG5jb25zdCB1bmlmaWVkQXJtb3JQcm9mcyA9ICh2YWw6IGFueSk6IHN0cmluZ1tdID0+XG4gIEFycmF5LmlzQXJyYXkodmFsPy5hcm1vcikgPyB2YWwuYXJtb3IubWFwKGNhcCkgOlxuICBBcnJheS5pc0FycmF5KHZhbCkgPyB2YWwubWFwKGNhcCkgOiBbXTtcblxuLy8gZnJvbnRtYXR0ZXIudHNcblxuZXhwb3J0IGZ1bmN0aW9uIHVuaWZpZWRXZWFwb25Qcm9mcyh2YWw6IGFueSk6IHN0cmluZ1tdIHtcbiAgLy8gcHVsbCB0aGUgXHUyMDFDd2VhcG9uc1x1MjAxRCBhcnJheSBvZmYgZWl0aGVyIGEgcmF3IGFycmF5IG9yIGEgc3RhcnRpbmdQcm9maWNpZW5jaWVzIG9iamVjdFxuICBjb25zdCByYXdBcnI6IGFueVtdID0gQXJyYXkuaXNBcnJheSh2YWw/LndlYXBvbnMpXG4gICAgPyB2YWwud2VhcG9uc1xuICAgIDogQXJyYXkuaXNBcnJheSh2YWwpXG4gICAgPyB2YWxcbiAgICA6IFtdO1xuXG4gIGNvbnN0IG91dCA9IG5ldyBTZXQ8c3RyaW5nPigpO1xuXG4gIGZ1bmN0aW9uIGhhbmRsZU9uZShlbnRyeTogYW55KSB7XG4gICAgaWYgKEFycmF5LmlzQXJyYXkoZW50cnkpKSB7XG4gICAgICAvLyBmbGF0dGVuIG5lc3RlZCBhcnJheXNcbiAgICAgIGVudHJ5LmZvckVhY2goaGFuZGxlT25lKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAodHlwZW9mIGVudHJ5ID09PSBcInN0cmluZ1wiKSB7XG4gICAgICBjb25zdCBsaXQgPSBlbnRyeS50cmltKCkudG9Mb3dlckNhc2UoKTtcbiAgICAgIGlmIChsaXQgPT09IFwic2ltcGxlXCIpIHtcbiAgICAgICAgb3V0LmFkZChcIlNpbXBsZSBXZWFwb25zXCIpO1xuICAgICAgfSBlbHNlIGlmIChsaXQgPT09IFwibWFydGlhbFwiKSB7XG4gICAgICAgIG91dC5hZGQoXCJNYXJ0aWFsIFdlYXBvbnNcIik7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBkZXRlY3QgdGFnZ2VkIGl0ZW1zIHZzIHNpbXBsZSB3b3Jkc1xuICAgICAgICBjb25zdCB0ZXh0ID0gZW50cnkuc3RhcnRzV2l0aChcIntAXCIpXG4gICAgICAgICAgPyByZXBsYWNlNWVUYWdzKGVudHJ5KVxuICAgICAgICAgIDogY2FwKGVudHJ5KTtcbiAgICAgICAgb3V0LmFkZCh0ZXh0KTtcbiAgICAgIH1cbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAoZW50cnkgJiYgdHlwZW9mIGVudHJ5ID09PSBcIm9iamVjdFwiICYmIGVudHJ5LnByb2ZpY2llbmN5KSB7XG4gICAgICAvLyB7IHByb2ZpY2llbmN5OiBcImZpcmVhcm1zXCIsIG9wdGlvbmFsOiB0cnVlIH1cbiAgICAgIGNvbnN0IG5hbWUgPSBjYXAoZW50cnkucHJvZmljaWVuY3kpO1xuICAgICAgb3V0LmFkZChlbnRyeS5vcHRpb25hbCA/IGAke25hbWV9IChvcHRpb25hbClgIDogbmFtZSk7XG4gICAgfVxuICB9XG5cbiAgcmF3QXJyLmZvckVhY2goaGFuZGxlT25lKTtcbiAgcmV0dXJuIFsuLi5vdXRdO1xufVxuXG5cbmNvbnN0IHVuaWZpZWRTYXZlcyA9ICh2YWw6IGFueSk6IHN0cmluZ1tdID0+IHtcbiAgaWYgKEFycmF5LmlzQXJyYXkodmFsKSkge1xuICAgICAgcmV0dXJuIHZhbC5tYXAoKGs6IHN0cmluZykgPT5cbiAgICAgICAgKHsgc3RyOiBcIlN0cmVuZ3RoXCIsIGRleDogXCJEZXh0ZXJpdHlcIiwgY29uOiBcIkNvbnN0aXR1dGlvblwiLFxuICAgICAgICAgIGludDogXCJJbnRlbGxpZ2VuY2VcIiwgd2lzOiBcIldpc2RvbVwiLCBjaGE6IFwiQ2hhcmlzbWFcIiB9W2tdID8/IGsudG9VcHBlckNhc2UoKSlcbiAgICAgICk7XG4gIH1cbiAgaWYgKHR5cGVvZiB2YWwgPT09IFwib2JqZWN0XCIgJiYgdmFsICE9PSBudWxsKSB7XG4gICAgcmV0dXJuIE9iamVjdC5rZXlzKHZhbCkubWFwKGsgPT4gay50b1VwcGVyQ2FzZSgpKTtcbiAgfVxuICByZXR1cm4gW107XG59O1xuXG5leHBvcnQgY29uc3QgdW5pZmllZFNraWxscyA9ICh2YWw6IGFueSk6IHN0cmluZ1tdID0+IHtcbiAgLy8gMSkgXHUyMDFDQmVzdGlhcnlcdTIwMUQgc3R5bGU6IGZsYXQgb2JqZWN0IG1hcHBpbmcgc2tpbGxcdTIxOTJtb2RpZmllclxuICBpZiAoXG4gICAgdmFsICYmXG4gICAgIUFycmF5LmlzQXJyYXkodmFsKSAmJlxuICAgIHR5cGVvZiB2YWwgPT09IFwib2JqZWN0XCIgJiZcbiAgICAvLyBlbnN1cmUgZXZlcnkgdmFsdWUgaXMgYSBzdHJpbmcgb3IgbnVtYmVyXG4gICAgT2JqZWN0LnZhbHVlcyh2YWwpLmV2ZXJ5KHYgPT4gdHlwZW9mIHYgPT09IFwic3RyaW5nXCIgfHwgdHlwZW9mIHYgPT09IFwibnVtYmVyXCIpXG4gICkge1xuICAgIHJldHVybiBPYmplY3QuZW50cmllcyh2YWwpLm1hcChcbiAgICAgIChbc2tpbGwsIG1vZF0pID0+IGAke2NhcChza2lsbCl9ICR7bW9kfWAudHJpbSgpXG4gICAgKTtcbiAgfVxuXG4gIC8vIDIpIG5lc3RlZCB1bmRlciAuc2tpbGxzIC8gLnNraWxsUHJvZmljaWVuY2llcyAvIC5za2lsbFByb2ZcbiAgaWYgKHZhbCAmJiAhQXJyYXkuaXNBcnJheSh2YWwpICYmIHR5cGVvZiB2YWwgPT09IFwib2JqZWN0XCIpIHtcbiAgICBjb25zdCBuZXN0ZWQgPSAodmFsIGFzIGFueSkuc2tpbGxzXG4gICAgICA/PyAodmFsIGFzIGFueSkuc2tpbGxQcm9mXG4gICAgICA/PyAodmFsIGFzIGFueSkuc2tpbGxQcm9maWNpZW5jaWVzO1xuICAgIHJldHVybiB1bmlmaWVkU2tpbGxzKG5lc3RlZCk7XG4gIH1cblxuICAvLyAzKSBhcnJheS1zdHlsZVxuICBpZiAoIUFycmF5LmlzQXJyYXkodmFsKSkgcmV0dXJuIFtdO1xuXG4gIGNvbnN0IG91dCA9IG5ldyBTZXQ8c3RyaW5nPigpO1xuICBmb3IgKGNvbnN0IGUgb2YgdmFsKSB7XG4gICAgLy8gM2EpIHsgYW55OiBOIH1cbiAgICBpZiAoZSAmJiB0eXBlb2YgZSA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgKGUgYXMgYW55KS5hbnkgPT09IFwibnVtYmVyXCIpIHtcbiAgICAgIG91dC5hZGQoYENob29zZSAkeyhlIGFzIGFueSkuYW55fWApO1xuICAgICAgY29udGludWU7XG4gICAgfVxuICAgIC8vIDNiKSB7IGNob29zZTogeyBjb3VudCwgXHUyMDI2IH0gfVxuICAgIGlmIChlICYmIHR5cGVvZiBlID09PSBcIm9iamVjdFwiICYmIChlIGFzIGFueSkuY2hvb3NlKSB7XG4gICAgICBjb25zdCBjbnQgPSAoZSBhcyBhbnkpLmNob29zZS5jb3VudCA/PyAxO1xuICAgICAgb3V0LmFkZChgQ2hvb3NlICR7Y250fWApO1xuICAgIH1cbiAgICAvLyAzYykgZml4ZWQgZmxhZ3MgZm9vOiB0cnVlXG4gICAgaWYgKGUgJiYgdHlwZW9mIGUgPT09IFwib2JqZWN0XCIpIHtcbiAgICAgIGZvciAoY29uc3QgW2ssIHZdIG9mIE9iamVjdC5lbnRyaWVzKGUpKSB7XG4gICAgICAgIGlmICh2ID09PSB0cnVlKSBvdXQuYWRkKGNhcChrKSk7XG4gICAgICB9XG4gICAgfVxuICAgIC8vIDNkKSBsaXRlcmFsIHN0cmluZ3NcbiAgICBpZiAodHlwZW9mIGUgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgIG91dC5hZGQoY2FwKGUpKTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gWy4uLm91dF07XG59O1xuXG5cbiBcbmV4cG9ydCBjb25zdCB1bmlmaWVkVG9vbFByb2ZzID0gKHZhbDogYW55KTogc3RyaW5nW10gPT4ge1xuICAvLyBwdWxsIG5lc3RlZCBhcnJheSBpZiBzb21lb25lIHBhc3NlZCB5b3UgdGhlIHdob2xlIHN0YXJ0aW5nUHJvZmljaWVuY2llcyBvYmpcbiAgbGV0IGVudHJpZXM6IGFueVtdID0gQXJyYXkuaXNBcnJheSh2YWwpID8gdmFsXG4gICAgOiBBcnJheS5pc0FycmF5KHZhbD8udG9vbFByb2ZpY2llbmNpZXMpID8gdmFsLnRvb2xQcm9maWNpZW5jaWVzXG4gICAgOiBBcnJheS5pc0FycmF5KHZhbD8udG9vbHMpICAgICAgICAgICAgID8gdmFsLnRvb2xzXG4gICAgOiBbXTtcblxuICBjb25zdCBvdXQgPSBuZXcgU2V0PHN0cmluZz4oKTtcbiAgbGV0IHNhd0Nob29zZSA9IGZhbHNlO1xuXG4gIGZvciAoY29uc3QgZSBvZiBlbnRyaWVzKSB7XG4gICAgaWYgKHR5cGVvZiBlID09PSBcInN0cmluZ1wiKSB7XG4gICAgICBvdXQuYWRkKGNhcChlKSk7XG4gICAgICBjb250aW51ZTtcbiAgICB9XG5cbiAgICBpZiAoZT8uY2hvb3NlKSB7XG4gICAgICBjb25zdCBjbnQgPSBlLmNob29zZS5jb3VudCA/PyAxO1xuICAgICAgc2F3Q2hvb3NlID0gdHJ1ZTtcbiAgICAgIG91dC5hZGQoYENob29zZSAke2NudH1gKTtcbiAgICB9XG5cbiAgICAvLyBwdWxsIG91dCBhbnkgZml4ZWQgXHUyMDFDZm9vOiB0cnVlXHUyMDFEIG9yIG51bWVyaWMgXHUyMDFDYW55Rm9vOiBOXHUyMDFEXG4gICAgZm9yIChjb25zdCBbayx2XSBvZiBPYmplY3QuZW50cmllcyhlKSkge1xuICAgICAgaWYgKHYgPT09IHRydWUpIHtcbiAgICAgICAgb3V0LmFkZChjYXAoaykpO1xuICAgICAgfSBlbHNlIGlmICh0eXBlb2YgdiA9PT0gXCJudW1iZXJcIiAmJiBrLnN0YXJ0c1dpdGgoXCJhbnlcIikpIHtcbiAgICAgICAgLy8gZS5nLiBhbnlBcnRpc2Fuc1Rvb2w6MVxuICAgICAgICBjb25zdCByYXcgPSBrLnJlcGxhY2UoL15hbnkvLCBcIlwiKTtcbiAgICAgICAgY29uc3Qgc3BhY2VkID0gcmF3XG4gICAgICAgICAgLnJlcGxhY2UoLyhbYS16XSkoW0EtWl0pL2csIFwiJDEgJDJcIilcbiAgICAgICAgICAuc3BsaXQoXCIgXCIpXG4gICAgICAgICAgLm1hcChjYXApXG4gICAgICAgICAgLmpvaW4oXCIgXCIpO1xuICAgICAgICBvdXQuYWRkKGBDaG9vc2UgJHt2fSAke3NwYWNlZH1gKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICByZXR1cm4gWy4uLm91dF07XG59O1xuXG5leHBvcnQgY29uc3QgQUxMX0ZJRUxEX0RFRlM6IEZpZWxkRGVmW10gPSBbXG4gIC8vIFx1MjUwMFx1MjUwMFx1MjUwMCBDb3JlIFx1MjUwMFx1MjUwMFx1MjUwMFxuICB7IGNhbGxTaWduOiBcIk5BTUVcIiwgIGpzb25LZXk6IFwibmFtZVwiIH0sXG57XG4gIGNhbGxTaWduOiBcIlNPVVJDRVwiLFxuICBqc29uS2V5OiBbXCJzb3VyY2VcIl0sXG4gIGNvbnY6IChyYXc6IGFueSwgYWxsSnNvbjogYW55KTogc3RyaW5nW10gPT4ge1xuICAgIGNvbnN0IG91dCA9IG5ldyBTZXQ8c3RyaW5nPigpO1xuICAgIGNvbnN0IGVkaXRpb25JZCA9IChhbGxKc29uIGFzIGFueSkuX2VkaXRpb25JZDtcblxuICAgIC8vIDEpIHByaW1hcnkgc291cmNlKHMpXG4gICAgY29uc3QgYXJyID0gQXJyYXkuaXNBcnJheShyYXcpID8gcmF3IDogW3Jhd107XG4gICAgYXJyLmZvckVhY2goc3JjID0+IHtcbiAgICAgIG91dC5hZGQoZ2V0RnVsbFNvdXJjZU5hbWUoc3JjLCBlZGl0aW9uSWQpKTtcbiAgICB9KTtcblxuICAgIC8vIDIpIGFueSBvdGhlclNvdXJjZXMgZW50cmllc1xuICAgIGZvciAoY29uc3Qgb3Mgb2YgYWxsSnNvbi5vdGhlclNvdXJjZXMgPz8gW10pIHtcbiAgICAgIGlmIChvcyAmJiB0eXBlb2Ygb3Muc291cmNlID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgIG91dC5hZGQoZ2V0RnVsbFNvdXJjZU5hbWUob3Muc291cmNlLCBlZGl0aW9uSWQpKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyAzKSByZXByaW50ZWRBcyBlbnRyaWVzIChndWFyZCBiZWZvcmUgc3BsaXR0aW5nKVxuICAgIGZvciAoY29uc3QgcmVwIG9mIGFsbEpzb24ucmVwcmludGVkQXMgPz8gW10pIHtcbiAgICAgIC8vIGVuc3VyZSB3ZSBoYXZlIGEgc3RyaW5nIHRvIHNwbGl0XG4gICAgICBjb25zdCByZXBTdHIgPSB0eXBlb2YgcmVwID09PSBcInN0cmluZ1wiID8gcmVwIDogU3RyaW5nKHJlcCk7XG4gICAgICBjb25zdCBwYXJ0cyA9IHJlcFN0ci5zcGxpdChcInxcIik7XG4gICAgICAvLyBpZiB0aGVyZSdzIG5vIHBpcGUsIHBhcnRzWzFdIHdpbGwgYmUgdW5kZWZpbmVkLCBzbyBmYWxsYmFjayB0byBwYXJ0c1swXVxuICAgICAgY29uc3Qgc3JjID0gcGFydHNbMV0gPz8gcGFydHNbMF07XG4gICAgICBvdXQuYWRkKGdldEZ1bGxTb3VyY2VOYW1lKHNyYywgZWRpdGlvbklkKSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIFsuLi5vdXRdO1xuICB9XG59LFxuXG5cbiAgLy8gXHUyNTAwXHUyNTAwXHUyNTAwIFByb2ZpY2llbmNpZXMgXHUyNTAwXHUyNTAwXHUyNTAwXG4gIHsgY2FsbFNpZ246IFwiQVJNT1JfUFJPRklDSUVOQ0lFU1wiLCAganNvbktleTogW1wiYXJtb3JQcm9maWNpZW5jaWVzXCIsIFwiYXJtb3JQcm9mc1wiLCBcInN0YXJ0aW5nUHJvZmljaWVuY2llc1wiXSwgY29udjogdW5pZmllZEFybW9yUHJvZnMgfSxcbiAgeyBcbiAgICBjYWxsU2lnbjogXCJXRUFQT05fUFJPRklDSUVOQ0lFU1wiLFxuICAgIGpzb25LZXk6IFtcIndlYXBvblByb2ZpY2llbmNpZXNcIixcIndlYXBvblByb2ZzXCIsXCJzdGFydGluZ1Byb2ZpY2llbmNpZXNcIl0sXG4gICAgY29udjogdW5pZmllZFdlYXBvblByb2ZzXG4gIH0sXG4gIHsgY2FsbFNpZ246IFwiVE9PTF9QUk9GSUNJRU5DSUVTXCIsICAganNvbktleTogW1widG9vbFByb2ZpY2llbmNpZXNcIiwgXCJ0b29sUHJvZnNcIiwgXCJzdGFydGluZ1Byb2ZpY2llbmNpZXNcIl0sIGNvbnY6IHVuaWZpZWRUb29sUHJvZnMgfSxcbiAge1xuICAgIGNhbGxTaWduOiBcIlRPT0xfQ0hPSUNFX0xJU1RcIixcbiAgICBqc29uS2V5OiBbXCJ0b29sUHJvZmljaWVuY2llc1wiLCBcInRvb2xQcm9mc1wiLCBcInN0YXJ0aW5nUHJvZmljaWVuY2llc1wiXSxcbiAgICBjb252OiAocmF3OiBhbnkpID0+IHtcbiAgICAgIGNvbnN0IGFyciA9IEFycmF5LmlzQXJyYXkocmF3KVxuICAgICAgICA/IHJhd1xuICAgICAgICA6IEFycmF5LmlzQXJyYXkocmF3Py50b29sUHJvZmljaWVuY2llcylcbiAgICAgICAgPyByYXcudG9vbFByb2ZpY2llbmNpZXNcbiAgICAgICAgOiBBcnJheS5pc0FycmF5KHJhdz8udG9vbHMpXG4gICAgICAgID8gcmF3LnRvb2xzXG4gICAgICAgIDogW107XG4gICAgICBjb25zdCBjaG9pY2UgPSBhcnIuZmluZCgoZTogYW55KSA9PiBlPy5jaG9vc2UpO1xuICAgICAgcmV0dXJuIGNob2ljZT8uY2hvb3NlPy5mcm9tPy5tYXAoKHM6IHN0cmluZykgPT4gY2FwKHMpKSA/PyBbXTtcbiAgICB9XG4gIH0sXG4gIHsgY2FsbFNpZ246IFwiU0FWSU5HX1RIUk9XU1wiLCAgICAgICAganNvbktleTogW1wic2F2ZVwiLCBcInByb2ZpY2llbmN5XCJdLCBjb252OiB1bmlmaWVkU2F2ZXMgfSxcbiAge1xuICAgIGNhbGxTaWduOiBcIlNLSUxMU1wiLFxuICAgIGpzb25LZXk6IFtcInNraWxsXCIsIFwic2tpbGxQcm9mXCIsIFwic2tpbGxQcm9maWNpZW5jaWVzXCIsIFwic3RhcnRpbmdQcm9maWNpZW5jaWVzXCJdLFxuICAgIGNvbnY6IHVuaWZpZWRTa2lsbHNcbiAgfSxcblxuICB7XG4gICAgY2FsbFNpZ246IFwiU0tJTExfQ0hPSUNFX0xJU1RcIixcbiAgICBqc29uS2V5OiBbXCJza2lsbFwiLCBcInNraWxsUHJvZlwiLCBcInNraWxsUHJvZmljaWVuY2llc1wiLCBcInN0YXJ0aW5nUHJvZmljaWVuY2llc1wiXSxcbiAgICBjb252OiAocmF3OiBhbnkpID0+IHtcbiAgICAgIC8vIG5vcm1hbGl6ZSBpbnRvIGFuIGFycmF5IG9mIGVudHJpZXNcbiAgICAgIGNvbnN0IGFycjogYW55W10gPSBBcnJheS5pc0FycmF5KHJhdylcbiAgICAgICAgPyByYXdcbiAgICAgICAgOiBBcnJheS5pc0FycmF5KHJhdz8uc2tpbGxQcm9maWNpZW5jaWVzKVxuICAgICAgICA/IHJhdy5za2lsbFByb2ZpY2llbmNpZXNcbiAgICAgICAgOiBBcnJheS5pc0FycmF5KHJhdz8uc2tpbGxzKVxuICAgICAgICA/IHJhdy5za2lsbHNcbiAgICAgICAgOiBBcnJheS5pc0FycmF5KHJhdz8uc2tpbGxQcm9mKVxuICAgICAgICA/IHJhdy5za2lsbFByb2ZcbiAgICAgICAgOiBbXTtcblxuICAgICAgLy8gZmluZCB0aGUgb25lIGVudHJ5IHRoYXQgcmVwcmVzZW50cyB0aGUgXHUyMDFDY2hvb3NlXHUyMDFEIGJ1Y2tldFxuICAgICAgY29uc3QgY2hvaWNlT2JqID0gYXJyLmZpbmQoZSA9PiBlPy5jaG9vc2UgfHwgdHlwZW9mIGUuYW55ID09PSBcIm51bWJlclwiKTtcbiAgICAgIGlmICghY2hvaWNlT2JqKSByZXR1cm4gW107XG5cbiAgICAgIC8vIGV4cGxpY2l0IFx1MjAxQ2Nob29zZSBmcm9tIFsgLi4uIF1cdTIwMURcbiAgICAgIGlmIChjaG9pY2VPYmouY2hvb3NlICYmIEFycmF5LmlzQXJyYXkoY2hvaWNlT2JqLmNob29zZS5mcm9tKSkge1xuICAgICAgICByZXR1cm4gY2hvaWNlT2JqLmNob29zZS5mcm9tLm1hcChjYXApO1xuICAgICAgfVxuXG4gICAgICAvLyB0aGUgXHUyMDFDYW55OiAzXHUyMDFEIHNob3J0aGFuZCBcdTIxOTIgb2ZmZXIgZXZlcnkgc2tpbGxcbiAgICAgIGlmICh0eXBlb2YgY2hvaWNlT2JqLmFueSA9PT0gXCJudW1iZXJcIikge1xuICAgICAgICAvLyBTS0lMTF9PUFRJT05TIGlzIHlvdXIgY29uc3QgW1wiQWNyb2JhdGljc1wiLCBcIkFuaW1hbCBIYW5kbGluZ1wiLCBcdTIwMjZdXG4gICAgICAgIHJldHVybiBTS0lMTF9PUFRJT05TO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gW107XG4gICAgfVxuICB9LFxuICB7IGNhbGxTaWduOiBcIlNQRUxMX0NBU1RfTU9EXCIsanNvbktleTogXCJzcGVsbGNhc3RpbmdBYmlsaXR5XCIsICBcbiAgICBjb252OiAocmF3KSA9PiB7XG4gICAgLy8gcmF3IG1pZ2h0IGJlIFwiY2hhXCIgb3IgXCJDSEFcIlxuICAgIGNvbnN0IGtleSA9IFN0cmluZyhyYXcpLnRvTG93ZXJDYXNlKCk7XG4gICAgcmV0dXJuIEFCSUxJVFlfRlVMTFtrZXldIHx8IGtleS50b1VwcGVyQ2FzZSgpO1xuICB9fSxcblxuXG4gIC8vIFx1MjUwMFx1MjUwMFx1MjUwMCBTcGVsbHMgXHUyNTAwXHUyNTAwXHUyNTAwXG4gIHsgY2FsbFNpZ246IFwiTEVWRUxcIiwgICAgICAgICBqc29uS2V5OiBcImxldmVsXCIgfSxcbiAgeyBjYWxsU2lnbjogXCJTQ0hPT0xcIiwgICAgICAgIGpzb25LZXk6IFwic2Nob29sXCIsICAgY29udjogcyA9PiBTQ0hPT0xfTUFQW3NdID8/IHMgfSxcbiAgeyBjYWxsU2lnbjogXCJDQVNUSU5HX1RJTUVcIiwgIGpzb25LZXk6IFwidGltZVwiLCAgICAgY29udjogZm9ybWF0VGltZSB9LFxuICB7IGNhbGxTaWduOiBcIlNQRUxMX1JBTkdFXCIsICAganNvbktleTogXCJyYW5nZVwiLCAgICBjb252OiBmb3JtYXRSYW5nZSB9LFxuICB7IGNhbGxTaWduOiBcIkRVUkFUSU9OXCIsICAgICAganNvbktleTogXCJkdXJhdGlvblwiLCBjb252OiBmb3JtYXREdXJhdGlvbiB9LFxuICB7IGNhbGxTaWduOiBcIlZFUkJBTFwiLCAgICAgICAganNvbktleTogXCJjb21wb25lbnRzXCIsIGNvbnY6IChjOmFueSkgPT4gISFjLnYgfSxcbiAgeyBjYWxsU2lnbjogXCJTT01BVElDXCIsICAgICAgIGpzb25LZXk6IFwiY29tcG9uZW50c1wiLCBjb252OiAoYzphbnkpID0+ICEhYy5zIH0sXG4gIHsgY2FsbFNpZ246IFwiTUFURVJJQUxcIiwgICAgICBqc29uS2V5OiBcImNvbXBvbmVudHNcIiwgY29udjogKGM6YW55KSA9PiAhIWMubSB9LFxuICB7IGNhbGxTaWduOiBcIkNPTVBPTkVOVFNcIixcbiAgICBqc29uS2V5OiAgXCJjb21wb25lbnRzXCIsXG4gICAgY29udjogKGM6IGFueSk6IHN0cmluZ1tdID0+IHtcbiAgICAgIGlmICghYy5tKSByZXR1cm4gW107XG5cbiAgICAgIGNvbnN0IHJhdyA9IEFycmF5LmlzQXJyYXkoYy5tKSA/IGMubSA6IFtjLm1dO1xuXG4gICAgICByZXR1cm4gcmF3XG4gICAgICAgIC5tYXAoKGl0ZW06IGFueSk6IHN0cmluZyB8IG51bGwgPT4ge1xuICAgICAgICAgIGlmICh0eXBlb2YgaXRlbSA9PT0gXCJzdHJpbmdcIikgcmV0dXJuIGl0ZW07XG4gICAgICAgICAgaWYgKGl0ZW0gJiYgdHlwZW9mIGl0ZW0gPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIGl0ZW0udGV4dCA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgcmV0dXJuIGl0ZW0udGV4dDtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH0pXG4gICAgICAgIC5maWx0ZXIoKGNvbXA6IHN0cmluZyB8IG51bGwpOiBjb21wIGlzIHN0cmluZyA9PiBjb21wICE9PSBudWxsKTtcbiAgICB9XG4gIH0sIFxuICB7IGNhbGxTaWduOiBcIkFUVEFDS19UWVBFXCIsICAganNvbktleTogXCJhdHRhY2tUeXBlXCIgfSxcbiAgeyBjYWxsU2lnbjogXCJEQU1BR0VfVFlQRVwiLCAgIGpzb25LZXk6IFwiZGFtYWdlSW5mbGljdFwiLCBjb252OiBkID0+IEFycmF5LmlzQXJyYXkoZCkgPyBkWzBdIDogZCB9LFxuICB7IGNhbGxTaWduOiBcIlJJVFVBTFwiLCAgICAgICAganNvbktleTogXCJyaXR1YWxcIiB9LFxuICB7IGNhbGxTaWduOiBcIkNPTkNFTlRSQVRJT05cIiwganNvbktleTogXCJkdXJhdGlvblwiLCBjb252OiBkcyA9PiBBcnJheS5pc0FycmF5KGRzKSAmJiBkcy5zb21lKCh4OmFueSk9PiB4LmNvbmNlbnRyYXRpb24pIH0sXG4gIHsgY2FsbFNpZ246IFwiU0FWRVwiLCAgICAgICAgICBqc29uS2V5OiBcInNhdmVBdHRyXCIgfSxcblxuICAvLyBcdTI1MDBcdTI1MDBcdTI1MDAgU3BlY2llcyAvIENyZWF0dXJlcyBcdTI1MDBcdTI1MDBcdTI1MDBcbiAgeyBjYWxsU2lnbjogXCJTUEVDSUVTXCIsIGpzb25LZXk6IFwibmFtZVwiIH0sXG4gIHsgY2FsbFNpZ246IFwiU0laRVwiLCBqc29uS2V5OiBcInNpemVcIiwgY29udjogKHJhdzogYW55KSA9PiB7XG4gICAgICAvLyBoYW5kbGUgW1wiU1wiLFwiTVwiXSBvciBqdXN0IFwiTFwiXG4gICAgICBpZiAoQXJyYXkuaXNBcnJheShyYXcpKSB7XG4gICAgICAgIHJldHVybiByYXcubWFwKHIgPT4gU0laRV9NQVBbcl0gfHwgcik7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gU0laRV9NQVBbcmF3XSB8fCByYXc7XG4gICAgICB9XG4gICAgfVxuICB9LFxuICAgIHtcbiAgY2FsbFNpZ246IFwiU1BFRURcIixcbiAganNvbktleTogICBcInNwZWVkXCIsXG4gIGNvbnY6IChzcDogbnVtYmVyIHwgUmVjb3JkPHN0cmluZywgYW55PikgPT4ge1xuICAgIC8vIGhhbmRsZSBib3RoIG51bWVyaWMgc3BlZWRzIGFuZCBvYmplY3Qgc3BlZWRzXG4gICAgaWYgKHR5cGVvZiBzcCA9PT0gXCJudW1iZXJcIikge1xuICAgICAgcmV0dXJuIFtgV2FsayAke3NwfSBmdC5gXTtcbiAgICB9XG4gICAgaWYgKCFzcCB8fCB0eXBlb2Ygc3AgIT09IFwib2JqZWN0XCIpIHJldHVybiBbXTtcbiAgICByZXR1cm4gT2JqZWN0LmVudHJpZXMoc3ApXG4gICAgICAuZmlsdGVyKChbbW9kZV0pID0+IG1vZGUgIT09IFwiY2FuSG92ZXJcIilcbiAgICAgIC5tYXAoKFttb2RlLCB2XSkgPT4ge1xuICAgICAgICBjb25zdCBuID0gdHlwZW9mIHYgPT09IFwib2JqZWN0XCIgJiYgdiAhPT0gbnVsbCAmJiBcIm51bWJlclwiIGluIHYgPyAodiBhcyBhbnkpLm51bWJlciA6IHY7XG4gICAgICAgIGNvbnN0IGxhYmVsID0gbW9kZSA9PT0gXCJ3YWxrXCIgPyBcIldhbGtcIiA6IGNhcChtb2RlKTtcbiAgICAgICAgcmV0dXJuIGAke2xhYmVsfSAke259IGZ0LmA7XG4gICAgICB9KTtcbiAgfSxcbn0sXG57IGNhbGxTaWduOiBcIkxBTkdVQUdFU1wiLCBqc29uS2V5OiBbXCJsYW5ndWFnZXNcIiwgXCJsYW5ndWFnZVByb2ZpY2llbmNpZXNcIl0sIGNvbnY6IGFyciA9PiB7XG4gICAgICBpZiAoIUFycmF5LmlzQXJyYXkoYXJyKSkgcmV0dXJuIFtdO1xuICAgICAgY29uc3Qgb3V0OiBzdHJpbmdbXSA9IFtdO1xuICAgICAgZm9yIChjb25zdCBscCBvZiBhcnIpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBscCA9PT0gXCJzdHJpbmdcIikgb3V0LnB1c2goY2FwKGxwKSk7XG4gICAgICAgIGVsc2UgaWYgKHR5cGVvZiBscCA9PT0gXCJvYmplY3RcIikge1xuICAgICAgICAgIGZvciAoY29uc3QgW2xhbmcsIHZhbF0gb2YgT2JqZWN0LmVudHJpZXMobHApKSB7XG4gICAgICAgICAgICBpZiAodmFsKSBvdXQucHVzaChjYXAobGFuZykpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIFsuLi5uZXcgU2V0KG91dCldO1xuICB9fSxcbiAgeyBjYWxsU2lnbjogXCJTRU5TRVNcIiwganNvbktleTogXCJzZW5zZXNcIiwgY29udjogc2VuID0+IHtcbiAgICAgIGlmIChBcnJheS5pc0FycmF5KHNlbikpIHJldHVybiBzZW4ubWFwKChzOnN0cmluZyk9PnMucmVwbGFjZSgvXlxcZCtcXHMqLyxcIlwiKS5yZXBsYWNlKC9eLi8sYz0+Yy50b1VwcGVyQ2FzZSgpKSk7XG4gICAgICBpZiAoc2VuICYmIHR5cGVvZiBzZW49PT1cIm9iamVjdFwiKSByZXR1cm4gT2JqZWN0LmVudHJpZXMoc2VuKS5tYXAoKFtrLHZdKT0+YCR7ay5jaGFyQXQoMCkudG9VcHBlckNhc2UoKStrLnNsaWNlKDEpfSAke3Z9YCk7XG4gICAgICByZXR1cm4gW107XG4gIH19LCBcbntcbiAgY2FsbFNpZ246IFwiVFJBSVRTXCIsXG4gIGpzb25LZXk6IFtcImNsYXNzRmVhdHVyZXNcIiwgXCJlbnRyaWVzXCJdLFxuICBjb252OiAocmF3OiBhbnksIGFsbEpzb246IGFueSk6IHN0cmluZ1tdID0+IHtcbiAgICAvLyBwdWxsIHRoZSBjbGFzcyByZWNvcmQgc28gd2Uga25vdyBpdHMgZGlzcGxheSBuYW1lXG4gICAgY29uc3QgY2xzUmVjID0gQXJyYXkuaXNBcnJheShhbGxKc29uLmNsYXNzKSA/IGFsbEpzb24uY2xhc3NbMF0gOiBhbGxKc29uO1xuICAgIGNvbnN0IGNsYXNzTmFtZSA9IHR5cGVvZiBjbHNSZWMubmFtZSA9PT0gXCJzdHJpbmdcIiA/IGNsc1JlYy5uYW1lIDogXCJcIjtcblxuICAgIC8vIG5hbWVzIHdlIG5ldmVyIHdhbnQgdG8gZW1pdFxuICAgIGNvbnN0IG9taXQgPSBuZXcgU2V0KFtcbiAgICAgIFwiQWJpbGl0eSBTY29yZSBJbXByb3ZlbWVudFwiLFxuICAgICAgXCJBcmNoZXR5cGUgRmVhdHVyZVwiLFxuICAgICAgXCJTdWJjbGFzcyBGZWF0dXJlXCIsXG4gICAgICAvLyBhZGQgbW9yZSBpZiB5b3UgbGlrZVx1MjAyNlxuICAgIF0pO1xuICAgIGNvbnN0IHNlZW4gPSBuZXcgU2V0PHN0cmluZz4oKTtcblxuICAgIC8vIDEpIGlmIHRoZXJlJ3MgYSBjbGFzc0ZlYXR1cmVzIGFycmF5LCB1c2UgaXRcbiAgICBpZiAoQXJyYXkuaXNBcnJheShhbGxKc29uLmNsYXNzRmVhdHVyZXMpKSB7XG4gICAgICByZXR1cm4gYWxsSnNvbi5jbGFzc0ZlYXR1cmVzLmZsYXRNYXAoKGZlYXQ6IGFueSkgPT4ge1xuICAgICAgICAvLyBza2lwIHN1YmNsYXNzXHUyMDEwaW5qZWN0ZWQgZmVhdHVyZXMgZW50aXJlbHlcbiAgICAgICAgaWYgKGZlYXQgJiYgdHlwZW9mIGZlYXQgPT09IFwib2JqZWN0XCIgJiYgZmVhdC5nYWluU3ViY2xhc3NGZWF0dXJlKSByZXR1cm4gW107XG5cbiAgICAgICAgLy8gbm9ybWFsaXplIHRvIGEgc3RyaW5nXG4gICAgICAgIGNvbnN0IHJhd05hbWUgPVxuICAgICAgICAgIHR5cGVvZiBmZWF0ID09PSBcInN0cmluZ1wiXG4gICAgICAgICAgICA/IGZlYXRcbiAgICAgICAgICAgIDogdHlwZW9mIGZlYXQuY2xhc3NGZWF0dXJlID09PSBcInN0cmluZ1wiXG4gICAgICAgICAgICA/IGZlYXQuY2xhc3NGZWF0dXJlXG4gICAgICAgICAgICA6IFwiXCI7XG5cbiAgICAgICAgLy8gZHJvcCBldmVyeXRoaW5nIGFmdGVyIHRoZSBmaXJzdCBcdTIwMUN8XHUyMDFEXG4gICAgICAgIGNvbnN0IG5hbWUgPSByYXdOYW1lLnNwbGl0KFwifFwiKVswXS50cmltKCk7XG4gICAgICAgIGlmICghbmFtZSB8fCBvbWl0LmhhcyhuYW1lKSB8fCBzZWVuLmhhcyhuYW1lKSkgcmV0dXJuIFtdO1xuICAgICAgICBzZWVuLmFkZChuYW1lKTtcblxuICAgICAgICAvLyBidWlsZCBhIG5pY2UgYW5jaG9yIChtdXN0IG1hdGNoIHlvdXIgaGVhZGVycylcbiAgICAgICAgY29uc3QgYW5jaG9yID0gbmFtZVxuICAgICAgICAgIC5yZXBsYWNlKC9bXlxcd1xcc10vZywgXCJcIikgICAgLy8gc3RyaXAgcHVuY3R1YXRpb25cbiAgICAgICAgICAucmVwbGFjZSgvXFxzKy9nLCBcIiBcIikgICAgICAgLy8gY29sbGFwc2Ugc3BhY2VzXG4gICAgICAgICAgLnRyaW0oKVxuICAgICAgICAgIC5yZXBsYWNlKC9cXGJcXHcvZywgKGM6IGFueSkgPT4gYy50b1VwcGVyQ2FzZSgpKTsgLy8gVGl0bGUgQ2FzZVxuXG4gICAgICAgIC8vIHByb2R1Y2UgYSBmaWxlLWFuY2hvciBsaW5rXG4gICAgICAgIHJldHVybiBgW1ske2NsYXNzTmFtZX0jJHthbmNob3J9fCR7bmFtZX1dXWA7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICAvLyAyKSBvdGhlcndpc2UgZmFsbCBiYWNrIHRvIHlvdXIgb2xkIGVudHJpZXMtYmFzZWQgbG9naWNcbiAgICBjb25zdCBlbnRzID0gQXJyYXkuaXNBcnJheShyYXcpID8gcmF3IDogW107XG4gICAgY29uc3QgZmVhdHVyZU5hbWVzID0gZW50c1xuICAgICAgLmZpbHRlcigoZTogYW55KSA9PiBlPy5kYXRhPy5pc0ZlYXR1cmUgJiYgdHlwZW9mIGUubmFtZSA9PT0gXCJzdHJpbmdcIilcbiAgICAgIC5tYXAoKGU6IGFueSkgPT4gZS5uYW1lLnJlcGxhY2UoL15GZWF0dXJlOlxccyovLCBcIlwiKS50cmltKCkpO1xuICAgIGlmIChmZWF0dXJlTmFtZXMubGVuZ3RoKSByZXR1cm4gZmVhdHVyZU5hbWVzO1xuXG4gICAgcmV0dXJuIGVudHNcbiAgICAgIC5maWx0ZXIoKGU6IGFueSkgPT4gZSAmJiB0eXBlb2YgZS5uYW1lID09PSBcInN0cmluZ1wiKVxuICAgICAgLm1hcCgoZTogYW55KSA9PiBlLm5hbWUucmVwbGFjZSgvXkZlYXR1cmU6XFxzKi8sIFwiXCIpLnRyaW0oKSk7XG4gIH0sXG59LFxuXG5cbiAgeyBjYWxsU2lnbjogXCJBQ1wiLCBqc29uS2V5OiBcImFjXCIsIGNvbnY6IGEgPT4gQXJyYXkuaXNBcnJheShhKT9hWzBdLmFjOmEgfSxcbiAgeyBjYWxsU2lnbjogXCJIUFwiLCBqc29uS2V5OiBcImhwXCIsIGNvbnY6IGhwID0+IGhwPy5hdmVyYWdlID8/IGhwIH0sXG4gIHsgY2FsbFNpZ246IFwiQ0hBTExFTkdFX1JBVElOR1wiLCBqc29uS2V5OiBcImNyXCIgfSxcbiAgeyBjYWxsU2lnbjogXCJTVFJFTkdUSFwiLCAgICAganNvbktleTogXCJhYmlsaXR5XCIsIGNvbnY6IGFycj0+QXJyYXkuaXNBcnJheShhcnIpP2FyclswXTphcnI/LnN0ciA/PyAwIH0sXG4gIHsgY2FsbFNpZ246IFwiREVYVEVSSVRZXCIsICAgIGpzb25LZXk6IFwiYWJpbGl0eVwiLCBjb252OiBhcnI9PkFycmF5LmlzQXJyYXkoYXJyKT9hcnJbMV06YXJyPy5kZXggPz8gMCB9LFxuICB7IGNhbGxTaWduOiBcIkNPTlNUSVRVVElPTlwiLCBqc29uS2V5OiBcImFiaWxpdHlcIiwgY29udjogYXJyPT5BcnJheS5pc0FycmF5KGFycik/YXJyWzJdOmFycj8uY29uID8/IDAgfSxcbiAgeyBjYWxsU2lnbjogXCJJTlRFTExJR0VOQ0VcIiwganNvbktleTogXCJhYmlsaXR5XCIsIGNvbnY6IGFycj0+QXJyYXkuaXNBcnJheShhcnIpP2FyclszXTphcnI/LmludCA/PyAwIH0sXG4gIHsgY2FsbFNpZ246IFwiV0lTRE9NXCIsICAgICAgIGpzb25LZXk6IFwiYWJpbGl0eVwiLCBjb252OiBhcnI9PkFycmF5LmlzQXJyYXkoYXJyKT9hcnJbNF06YXJyPy53aXMgPz8gMCB9LFxuICB7IGNhbGxTaWduOiBcIkNIQVJJU01BXCIsICAgICBqc29uS2V5OiBcImFiaWxpdHlcIiwgY29udjogYXJyPT5BcnJheS5pc0FycmF5KGFycik/YXJyWzVdOmFycj8uY2hhID8/IDAgfSxcbiAge1xuICAgIGNhbGxTaWduOiBcIkFMSUdOTUVOVFwiLFxuICAgIGpzb25LZXk6IFwiYWxpZ25tZW50XCIsXG4gICAgY29udjogKGE6IGFueSkgPT4ge1xuICAgICAgY29uc3QgcmF3ID0gQXJyYXkuaXNBcnJheShhKSA/IGEuam9pbihcIiBcIikgOiB0eXBlb2YgYSA9PT0gXCJzdHJpbmdcIiA/IGEgOiBTdHJpbmcoYSk7XG4gICAgICBjb25zdCBjbGVhbmVkID0gcmF3XG4gICAgICAgIC5yZXBsYWNlKC9cXGJBXFxiL2csIFwiQW55XCIpXG4gICAgICAgIC5yZXBsYWNlKC9cXGJVXFxiL2csIFwiVW5hbGlnbmVkXCIpXG4gICAgICAgIC5yZXBsYWNlKC9cXGJOXFxiL2csIFwiTmV1dHJhbFwiKVxuICAgICAgICAucmVwbGFjZSgvXFxiTFxcYi9nLCBcIkxhd2Z1bFwiKVxuICAgICAgICAucmVwbGFjZSgvXFxiQ1xcYi9nLCBcIkNoYW90aWNcIilcbiAgICAgICAgLnJlcGxhY2UoL1xcYkdcXGIvZywgXCJHb29kXCIpXG4gICAgICAgIC5yZXBsYWNlKC9cXGJFXFxiL2csIFwiRXZpbFwiKTtcblxuICAgICAgcmV0dXJuIGZvcm1hdEFsaWdubWVudEFiYnJldihjbGVhbmVkKTsgLy8gcmV1c2UgeW91ciBub3JtYWxpemVyIGlmIGl0IGV4aXN0c1xuICAgIH1cbiAgfSxcbiAgICB7XG4gICAgICBjYWxsU2lnbjogXCJUWVBFXCIsXG4gICAgICBqc29uS2V5OiBcInR5cGVcIixcbiAgICAgIGNvbnY6ICh0OiBhbnkpOiBzdHJpbmcgfCB1bmRlZmluZWQgPT4ge1xuICAgICAgICAvLyAxKSBJZiBpdFx1MjAxOXMgYSBzaW1wbGUgc3RyaW5nIGNvZGUsIG1hcCBpdFxuICAgICAgICBpZiAodHlwZW9mIHQgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAvLyBkaXJlY3QgbG9va3VwXHUyMDE0aWYgbm8gbWFwcGluZywganVzdCB0aXRsZVx1MjAxMGNhc2UgdGhlIGNvZGVcbiAgICAgICAgICByZXR1cm4gSVRFTV9UWVBFX01BUFt0XSA/PyBjYXAodCk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyAyKSBJZiBpdFx1MjAxOXMgYW4gb2JqZWN0IHdpdGggYSAudHlwZSB0YWdcbiAgICAgICAgaWYgKHQgJiYgdHlwZW9mIHQgPT09IFwib2JqZWN0XCIpIHtcbiAgICAgICAgICBjb25zdCBjb2RlID0gU3RyaW5nKHQudHlwZSB8fCBcIlwiKS50b1VwcGVyQ2FzZSgpO1xuICAgICAgICAgIC8vIHRyeSB0aGUgbWFwIGZpcnN0XG4gICAgICAgICAgaWYgKElURU1fVFlQRV9NQVBbY29kZV0pIHtcbiAgICAgICAgICAgIHJldHVybiBJVEVNX1RZUEVfTUFQW2NvZGVdO1xuICAgICAgICAgIH1cbiAgICAgICAgICAvLyBvdGhlcndpc2UgZmFsbCBiYWNrIHRvIFx1MjAxQ0Jhc2UgKHRhZ3NcdTIwMjYpXHUyMDFEIHN0eWxlXG4gICAgICAgICAgY29uc3QgYmFzZSA9IHQudHlwZSA/IGNhcCh0LnR5cGUpIDogXCJVbmtub3duXCI7XG4gICAgICAgICAgY29uc3QgdGFncyA9IEFycmF5LmlzQXJyYXkodC50YWdzKSA/IHQudGFncy5tYXAoY2FwKSA6IFtdO1xuICAgICAgICAgIHJldHVybiB0YWdzLmxlbmd0aCA/IGAke2Jhc2V9ICgke3RhZ3Muam9pbihcIiwgXCIpfSlgIDogYmFzZTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICB9XG4gICAgfSxcblxuXG4gIC8vIFx1MjUwMFx1MjUwMFx1MjUwMCBJdGVtcyBcdTI1MDBcdTI1MDBcdTI1MDBcbiAgeyBjYWxsU2lnbjogXCJUWVBFXCIsICAganNvbktleTogXCJfcGFyc2VkVHlwZVwiIH0sXG4gIHsgY2FsbFNpZ246IFwiUkFSSVRZXCIsIGpzb25LZXk6IFwicmFyaXR5XCIsIGNvbnY6IHIgPT4ge1xuICAgICAgY29uc3QgcyA9IFN0cmluZyhyfHxcIlwiKS50b0xvd2VyQ2FzZSgpO1xuICAgICAgcmV0dXJuIHMgJiYgcyE9PVwibm9uZVwiID8gc1swXS50b1VwcGVyQ2FzZSgpK3Muc2xpY2UoMSkgOiB1bmRlZmluZWQ7XG4gIH19LFxuICB7XG4gICAgY2FsbFNpZ246IFwiQ09TVFwiLFxuICAgIGpzb25LZXk6IFwidmFsdWVcIixcbiAgICBjb252OiAocmF3OiBhbnkpID0+IHtcbiAgICAgIGNvbnN0IHMgPSBTdHJpbmcocmF3KS50cmltKCkudG9Mb3dlckNhc2UoKTtcbiAgICAgIGxldCBudW06IG51bWJlcjtcblxuICAgICAgLy8gZXhwbGljaXQgY29wcGVyP1xuICAgICAgaWYgKHMuZW5kc1dpdGgoXCJjcFwiKSkge1xuICAgICAgICBudW0gPSBwYXJzZUZsb2F0KHMpO1xuICAgICAgICAvLyBjb252ZXJ0IHRvIGdwIG9ubHkgaWYgMTAwKyBjcFxuICAgICAgICByZXR1cm4gbnVtID49IDEwMFxuICAgICAgICAgID8gYCR7TWF0aC5yb3VuZCgobnVtLzEwMCkgKiAxMDApLzEwMH1ncGBcbiAgICAgICAgICA6IGAke251bX1jcGA7XG4gICAgICB9XG5cbiAgICAgIC8vIGV4cGxpY2l0IHNpbHZlcj9cbiAgICAgIGlmIChzLmVuZHNXaXRoKFwic3BcIikpIHtcbiAgICAgICAgbnVtID0gcGFyc2VGbG9hdChzKTtcbiAgICAgICAgLy8gY29udmVydCB0byBncCBvbmx5IGlmIDEwKyBzcFxuICAgICAgICByZXR1cm4gbnVtID49IDEwXG4gICAgICAgICAgPyBgJHtNYXRoLnJvdW5kKChudW0vMTApICogMTAwKS8xMDB9Z3BgXG4gICAgICAgICAgOiBgJHtudW19c3BgO1xuICAgICAgfVxuXG4gICAgICAvLyBleHBsaWNpdCBnb2xkP1xuICAgICAgaWYgKHMuZW5kc1dpdGgoXCJncFwiKSkge1xuICAgICAgICBudW0gPSBwYXJzZUZsb2F0KHMpO1xuICAgICAgICByZXR1cm4gYCR7TWF0aC5yb3VuZChudW0gKiAxMDApLzEwMH1ncGA7XG4gICAgICB9XG5cbiAgICAgIC8vIGJhcmUgbnVtYmVyIFx1MjE5MiBhc3N1bWUgY29wcGVyXG4gICAgICBudW0gPSBwYXJzZUZsb2F0KHMpIHx8IDA7XG4gICAgICByZXR1cm4gbnVtID49IDEwMFxuICAgICAgICA/IGAke01hdGgucm91bmQoKG51bS8xMDApICogMTAwKS8xMDB9Z3BgXG4gICAgICAgIDogYCR7bnVtfWNwYDtcbiAgICB9XG4gIH0sXG4gIHsgY2FsbFNpZ246IFwiV0VJR0hUXCIsIGpzb25LZXk6IFwid2VpZ2h0XCIgfSxcbiAgeyBjYWxsU2lnbjogXCJNQUdJQ0FMXCIsIGpzb25LZXk6IFwid29uZHJvdXNcIiwgY29udjogKF93LGFsbCkgPT4gISFhbGwud29uZHJvdXMgfHwgISFhbGwucmVxQXR0dW5lIH0sXG4gIHsgY2FsbFNpZ246IFwiVkFSSUFOVFwiLCBqc29uS2V5OiBcImJvbnVzV2VhcG9uXCIsIGNvbnY6IGIgPT4gdHlwZW9mIGI9PT1cInN0cmluZ1wiICYmIGIuc3RhcnRzV2l0aChcIitcIikgfSxcbiAgeyBjYWxsU2lnbjogXCJQUk9QRVJUSUVTXCIsIGpzb25LZXk6IFwicHJvcGVydHlcIiwgY29udjogYXJyID0+IEFycmF5LmlzQXJyYXkoYXJyKSA/IGFyci5tYXAocCA9PiBQUk9QRVJUWV9NQVBbcF0gfHwgcCkgOiBbXSB9LFxuICB7IGNhbGxTaWduOiBcIkRBTUFHRVwiLCBqc29uS2V5OiBcImRtZzFcIiwgY29udjogKGQsYWxsKSA9PiBkID8gYWxsLmRtZzIgPyBgJHtkfSAvICR7YWxsLmRtZzJ9YCA6IGAke2R9YCA6IHVuZGVmaW5lZCB9LFxuICB7IGNhbGxTaWduOiBcIkRBTUFHRV9UWVBFU1wiLCBqc29uS2V5OiBcImRtZ1R5cGVcIiwgY29udjogZHQgPT4gZHQgPT0gbnVsbCA/IFtdIDogQXJyYXkuaXNBcnJheShkdCkgPyBkdCA6IFtkdF0gfSxcbiAgeyBjYWxsU2lnbjogXCJSQU5HRVwiLCBqc29uS2V5OiBcInJhbmdlXCIgfSxcbiAgeyBjYWxsU2lnbjogXCJSRUxPQURcIiwganNvbktleTogXCJyZWxvYWRcIiB9LFxuICB7IGNhbGxTaWduOiBcIkFNTU9fVFlQRVwiLCBqc29uS2V5OiBcImFtbW9UeXBlXCIgfSxcbiAgeyBjYWxsU2lnbjogXCJTVEVBTFRIX0RJU0FEVkFOVEFHRVwiLCBqc29uS2V5OiBcInN0ZWFsdGhcIiB9LFxuICB7XG4gICAgY2FsbFNpZ246IFwiQVRUVU5FTUVOVFwiLFxuICAgIGpzb25LZXk6IFtcIndvbmRyb3VzXCIsIFwicmVxQXR0dW5lXCIsIFwicmVxX2F0dHVuZVwiLCBcInJlcUF0dHVuZVRhZ3NcIl0sXG4gICAgY29udjogKF9yYXcsIGFsbEpzb24pID0+IHtcbiAgICAgIGNvbnN0IGogPSBhbGxKc29uIGFzIGFueTtcbiAgICAgIGNvbnN0IGhhc1RleHQgPSB0eXBlb2Ygai5yZXFBdHR1bmUgPT09IFwic3RyaW5nXCIgJiYgai5yZXFBdHR1bmUudHJpbSgpICE9PSBcIlwiO1xuICAgICAgY29uc3QgaGFzVGFncyA9IEFycmF5LmlzQXJyYXkoai5yZXFBdHR1bmVUYWdzKSAmJiBqLnJlcUF0dHVuZVRhZ3MubGVuZ3RoID4gMDtcbiAgICAgIHJldHVybiBoYXNUZXh0IHx8IGhhc1RhZ3M7XG4gICAgfVxuICB9LFxuICB7XG4gIGNhbGxTaWduOiBcIkFUVFVORV9SRVFcIixcbiAganNvbktleTogXCJyZXFBdHR1bmVUYWdzXCIsXG4gIGNvbnY6ICh0YWdzOiBhbnlbXSA9IFtdLCBfYWxsKSA9PiB7XG4gICAgY29uc3QgbWFwTGV0dGVyOiBSZWNvcmQ8c3RyaW5nLHN0cmluZz4gPSB7XG4gICAgICBBOiBcIkFueVwiLCBVOiBcIlVuYWxpZ25lZFwiLCBOOiBcIk5ldXRyYWxcIixcbiAgICAgIEw6IFwiTGF3ZnVsXCIsIEM6IFwiQ2hhb3RpY1wiLCBHOiBcIkdvb2RcIiwgRTogXCJFdmlsXCJcbiAgICB9O1xuICAgIGNvbnN0IHJlcXM6IHN0cmluZ1tdID0gW107XG5cbiAgICBmb3IgKGNvbnN0IHRhZyBvZiB0YWdzKSB7XG4gICAgICBpZiAodGFnLmNsYXNzICYmIEFycmF5LmlzQXJyYXkodGFnLmFsaWdubWVudCkpIHtcbiAgICAgICAgY29uc3QgY2xzID0gY2FwKHRhZy5jbGFzcyk7XG4gICAgICAgIGZvciAoY29uc3QgY29kZSBvZiB0YWcuYWxpZ25tZW50KSB7XG4gICAgICAgICAgcmVxcy5wdXNoKGAke21hcExldHRlcltjb2RlXSB8fCBjb2RlfSAke2Nsc31gKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmICh0YWcuY2xhc3MpIHtcbiAgICAgICAgcmVxcy5wdXNoKGNhcCh0YWcuY2xhc3MpKTtcbiAgICAgIH0gZWxzZSBpZiAoQXJyYXkuaXNBcnJheSh0YWcuYWxpZ25tZW50KSkge1xuICAgICAgICBmb3IgKGNvbnN0IGNvZGUgb2YgdGFnLmFsaWdubWVudCkge1xuICAgICAgICAgIHJlcXMucHVzaChtYXBMZXR0ZXJbY29kZV0gfHwgY29kZSk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAodGFnLmJhY2tncm91bmQpIHtcbiAgICAgICAgY29uc3QgW2JnXSA9IFN0cmluZyh0YWcuYmFja2dyb3VuZCkuc3BsaXQoXCJ8XCIpO1xuICAgICAgICByZXFzLnB1c2goYmcuc3BsaXQoXCIgXCIpLm1hcChjYXApLmpvaW4oXCIgXCIpKTtcbiAgICAgIH0gZWxzZSBpZiAodGFnLnNwZWxsY2FzdGluZykge1xuICAgICAgICByZXFzLnB1c2goXCJTcGVsbGNhc3RlclwiKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gQXJyYXkuZnJvbShuZXcgU2V0KHJlcXMpKTtcbiAgfVxufSxcbiAgLy8gXHUyNTAwXHUyNTAwXHUyNTAwIE90aGVyIFx1MjUwMFx1MjUwMFx1MjUwMFxuICB7IGNhbGxTaWduOiBcIkRBTUFHRV9SRVNcIiwganNvbktleTogXCJyZXNpc3RcIiwgY29udjogdiA9PiBBcnJheS5pc0FycmF5KHYpID8gdi5tYXAoY2FwKSA6IFtdIH0sXG57XG4gIGNhbGxTaWduOiBcIlJVTEVTRVRcIixcbiAganNvbktleTogXCJuYW1lXCIsXG4gIC8vIGlnbm9yZSB0aGUgcmF3IHZhbHVlLCBhbHdheXMgcHJpbnQgSEVMTE9cbiAgY29udjogKF9yYXcsIF9hbGwpID0+IFwiRCZEIDVlICgyMDI1KVwiLFxufSwgXG4gICAgLy8gXHUyNTAwXHUyNTAwXHUyNTAwIEFiaWxpdHlcdTIwMTBzY29yZSBtb2RpZmllcnMgKG9ubHkgZW1pdCB3aGVuIG5vbnplcm8pIFx1MjUwMFx1MjUwMFx1MjUwMFxuICB7XG4gICAgY2FsbFNpZ246IFwiU1RSX01PRFwiLFxuICAgIGpzb25LZXk6ICBcImFiaWxpdHlcIixcbiAgICBjb252OiAoYXJyOiBhbnkpOiBudW1iZXIgfCB1bmRlZmluZWQgPT4ge1xuICAgICAgY29uc3QgdiA9IEFycmF5LmlzQXJyYXkoYXJyKSA/IChhcnJbMF0uc3RyID8/IDApIDogKGFyci5zdHIgPz8gMCk7XG4gICAgICByZXR1cm4gdiAhPT0gMCA/IHYgOiB1bmRlZmluZWQ7XG4gICAgfSxcbiAgfSxcbiAge1xuICAgIGNhbGxTaWduOiBcIkRFWF9NT0RcIixcbiAgICBqc29uS2V5OiAgXCJhYmlsaXR5XCIsXG4gICAgY29udjogKGFycjogYW55KTogbnVtYmVyIHwgdW5kZWZpbmVkID0+IHtcbiAgICAgIGNvbnN0IHYgPSBBcnJheS5pc0FycmF5KGFycikgPyAoYXJyWzBdLmRleCA/PyAwKSA6IChhcnIuZGV4ID8/IDApO1xuICAgICAgcmV0dXJuIHYgIT09IDAgPyB2IDogdW5kZWZpbmVkO1xuICAgIH0sXG4gIH0sXG4gIHtcbiAgICBjYWxsU2lnbjogXCJDT05fTU9EXCIsXG4gICAganNvbktleTogIFwiYWJpbGl0eVwiLFxuICAgIGNvbnY6IChhcnI6IGFueSk6IG51bWJlciB8IHVuZGVmaW5lZCA9PiB7XG4gICAgICBjb25zdCB2ID0gQXJyYXkuaXNBcnJheShhcnIpID8gKGFyclswXS5jb24gPz8gMCkgOiAoYXJyLmNvbiA/PyAwKTtcbiAgICAgIHJldHVybiB2ICE9PSAwID8gdiA6IHVuZGVmaW5lZDtcbiAgICB9LFxuICB9LFxuICB7XG4gICAgY2FsbFNpZ246IFwiSU5UX01PRFwiLFxuICAgIGpzb25LZXk6ICBcImFiaWxpdHlcIixcbiAgICBjb252OiAoYXJyOiBhbnkpOiBudW1iZXIgfCB1bmRlZmluZWQgPT4ge1xuICAgICAgY29uc3QgdiA9IEFycmF5LmlzQXJyYXkoYXJyKSA/IChhcnJbMF0uaW50ID8/IDApIDogKGFyci5pbnQgPz8gMCk7XG4gICAgICByZXR1cm4gdiAhPT0gMCA/IHYgOiB1bmRlZmluZWQ7XG4gICAgfSxcbiAgfSxcbiAge1xuICAgIGNhbGxTaWduOiBcIldJU19NT0RcIixcbiAgICBqc29uS2V5OiAgXCJhYmlsaXR5XCIsXG4gICAgY29udjogKGFycjogYW55KTogbnVtYmVyIHwgdW5kZWZpbmVkID0+IHtcbiAgICAgIGNvbnN0IHYgPSBBcnJheS5pc0FycmF5KGFycikgPyAoYXJyWzBdLndpcyA/PyAwKSA6IChhcnIud2lzID8/IDApO1xuICAgICAgcmV0dXJuIHYgIT09IDAgPyB2IDogdW5kZWZpbmVkO1xuICAgIH0sXG4gIH0sXG4gIHtcbiAgICBjYWxsU2lnbjogXCJDSEFfTU9EXCIsXG4gICAganNvbktleTogIFwiYWJpbGl0eVwiLFxuICAgIGNvbnY6IChhcnI6IGFueSk6IG51bWJlciB8IHVuZGVmaW5lZCA9PiB7XG4gICAgICBjb25zdCB2ID0gQXJyYXkuaXNBcnJheShhcnIpID8gKGFyclswXS5jaGEgPz8gMCkgOiAoYXJyLmNoYSA/PyAwKTtcbiAgICAgIHJldHVybiB2ICE9PSAwID8gdiA6IHVuZGVmaW5lZDtcbiAgICB9LFxuICB9LFxuXG5cbl07XG5cblxuLy8gXHUyNTAwXHUyNTAwXHUyNTAwIEdlbmVyaWMgYnVpbGRlciBcdTI1MDBcdTI1MDBcdTI1MDBcbmV4cG9ydCBmdW5jdGlvbiBidWlsZEZNKGpzb246IGFueSwgZGVmczogRmllbGREZWZbXSk6IEZyb250bWF0dGVyIHtcbiAgY29uc3QgZm06IEZyb250bWF0dGVyID0ge307XG4gIGZvciAoY29uc3QgeyBjYWxsU2lnbiwganNvbktleSwgY29udiB9IG9mIGRlZnMpIHtcbiAgICBjb25zdCBrZXlzID0gQXJyYXkuaXNBcnJheShqc29uS2V5KSA/IGpzb25LZXkgOiBbanNvbktleV07XG4gICAgbGV0IHJhdzogYW55ID0gdW5kZWZpbmVkO1xuXG4gICAgZm9yIChjb25zdCBrZXkgb2Yga2V5cykge1xuICAgICAgaWYgKGpzb25ba2V5XSAhPSBudWxsKSB7XG4gICAgICAgIHJhdyA9IGpzb25ba2V5XTtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHJhdyA9PSBudWxsKSBjb250aW51ZTtcbiAgICBjb25zdCB2YWwgPSBjb252ID8gY29udihyYXcsIGpzb24pIDogcmF3O1xuICAgIGZtW0ZNX0ZJRUxEU1tjYWxsU2lnbl1dID0gdmFsO1xuICB9XG4gIHJldHVybiBmbTtcbn1cblxuLy8gZnJvbnRtYXR0ZXIudHNcblxuZXhwb3J0IGZ1bmN0aW9uIHNlcmlhbGl6ZUZyb250bWF0dGVyKFxuICBmbTogRnJvbnRtYXR0ZXIsXG4gIGRlZnM/OiBGaWVsZERlZltdXG4pOiBzdHJpbmcge1xuICBjb25zdCBmaWx0ZXJlZDogUmVjb3JkPHN0cmluZywgYW55PiA9IHt9O1xuXG4gIC8vIGRldGVjdCBpZiB3ZSBoYXZlIGFueSBhY3R1YWwgY2hvaWNlLWxpc3RzXG4gIGNvbnN0IGhhc1NraWxsQ2hvaWNlID0gQXJyYXkuaXNBcnJheShmbVtGTV9GSUVMRFMuU0tJTExfQ0hPSUNFX0xJU1RdKSBcbiAgICAmJiAoZm1bRk1fRklFTERTLlNLSUxMX0NIT0lDRV9MSVNUXSBhcyBhbnlbXSkubGVuZ3RoID4gMDtcbiAgY29uc3QgaGFzVG9vbENob2ljZSA9IEFycmF5LmlzQXJyYXkoZm1bRk1fRklFTERTLlRPT0xfQ0hPSUNFX0xJU1RdKSBcbiAgICAmJiAoZm1bRk1fRklFTERTLlRPT0xfQ0hPSUNFX0xJU1RdIGFzIGFueVtdKS5sZW5ndGggPiAwO1xuXG5cbiAgZm9yIChjb25zdCBbaywgdl0gb2YgT2JqZWN0LmVudHJpZXMoZm0pKSB7XG4gICAgLy8gMSkgbmV2ZXIgZW1pdCB1bmRlZmluZWRcbiAgICBpZiAodiA9PT0gdW5kZWZpbmVkKSBjb250aW51ZTtcbiAgICAvLyAyKSBkcm9wIGVtcHR5IENPTVBPTkVOVFMsIFRPT0xfQ0hPSUNFX0xJU1QsIFNLSUxMX0NIT0lDRV9MSVNUXG4gICAgaWYgKGsgPT09IEZNX0ZJRUxEUy5DT01QT05FTlRTICYmIEFycmF5LmlzQXJyYXkodikgJiYgdi5sZW5ndGggPT09IDApIGNvbnRpbnVlO1xuICAgIGlmIChcbiAgICAgIChrID09PSBGTV9GSUVMRFMuVE9PTF9DSE9JQ0VfTElTVCB8fCBrID09PSBGTV9GSUVMRFMuU0tJTExfQ0hPSUNFX0xJU1QpICYmXG4gICAgICBBcnJheS5pc0FycmF5KHYpICYmIHYubGVuZ3RoID09PSAwXG4gICAgKSBjb250aW51ZTtcblxuICAgIGZpbHRlcmVkW2tdID0gdjtcbiAgfVxuXG4gIC8vIGJ1aWxkIHRoZSBsaXN0IG9mIGtleXMgaW4gdGhlIGV4YWN0IG9yZGVyIGZyb20gZGVmc1xuICBsZXQga2V5c1RvRW1pdDogc3RyaW5nW107XG4gIGlmIChkZWZzKSB7XG4gICAgLy8gbWFwIGVhY2ggRmllbGREZWYgdG8gaXRzIGZyb250bWF0dGVyIGtleVxuICAgIGNvbnN0IHdhbnRlZCA9IGRlZnMubWFwKGQgPT4gRk1fRklFTERTW2QuY2FsbFNpZ25dKTtcbiAgICAvLyBvbmx5IGtlZXAgdGhlIG9uZXMgd2UgYWN0dWFsbHkgaGF2ZSwgaW4gb3JkZXJcbiAgICBrZXlzVG9FbWl0ID0gd2FudGVkLmZpbHRlcihrID0+IGsgaW4gZmlsdGVyZWQpO1xuICAgIC8vIHRoZW4gYXBwZW5kIGFueSBleHRyYSBrZXlzIHRoYXQgd2VyZW4ndCBpbiBkZWZzXG4gICAga2V5c1RvRW1pdC5wdXNoKFxuICAgICAgLi4uT2JqZWN0LmtleXMoZmlsdGVyZWQpLmZpbHRlcihrID0+ICFrZXlzVG9FbWl0LmluY2x1ZGVzKGspKVxuICAgICk7XG4gIH0gZWxzZSB7XG4gICAga2V5c1RvRW1pdCA9IE9iamVjdC5rZXlzKGZpbHRlcmVkKTtcbiAgfVxuXG4gIC8vIG5vdyBlbWl0IFlBTUwgaW4gdGhhdCBvcmRlclxuICByZXR1cm4ga2V5c1RvRW1pdFxuICAgIC5tYXAoayA9PiB7XG4gICAgICBjb25zdCB2ID0gZmlsdGVyZWRba107XG4gICAgICBpZiAoQXJyYXkuaXNBcnJheSh2KSkge1xuICAgICAgICAvLyBKU09OLnN0cmluZ2lmeSB0byBoYW5kbGUgc3BhY2VzLCBjb21tYXMsIGV0Yy5cbiAgICAgICAgY29uc3QgaW5saW5lID0gdi5tYXAoaXRlbSA9PiBKU09OLnN0cmluZ2lmeShpdGVtKSkuam9pbihcIiwgXCIpO1xuICAgICAgICByZXR1cm4gYCR7a306IFske2lubGluZX1dYDtcbiAgICAgIH1cbiAgICAgIGlmICh0eXBlb2YgdiA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICByZXR1cm4gYCR7a306IFwiJHt2fVwiYDtcbiAgICAgIH1cbiAgICAgIHJldHVybiBgJHtrfTogJHt2fWA7XG4gICAgfSlcbiAgICAuam9pbihcIlxcblwiKTtcbn1cblxuXG4vLyBcdTI1MDBcdTI1MDBcdTI1MDAgU2tpbGwgaGVscGVycyBcdTI1MDBcdTI1MDBcdTI1MDBcbmV4cG9ydCBjb25zdCBTS0lMTF9PUFRJT05TID0gW1xuICBcIkFjcm9iYXRpY3NcIixcIkFuaW1hbCBIYW5kbGluZ1wiLFwiQXJjYW5hXCIsXCJBdGhsZXRpY3NcIixcIkRlY2VwdGlvblwiLFwiSGlzdG9yeVwiLFxuICBcIkluc2lnaHRcIixcIkludGltaWRhdGlvblwiLFwiSW52ZXN0aWdhdGlvblwiLFwiTWVkaWNpbmVcIixcIk5hdHVyZVwiLFwiUGVyY2VwdGlvblwiLFxuICBcIlBlcmZvcm1hbmNlXCIsXCJQZXJzdWFzaW9uXCIsXCJSZWxpZ2lvblwiLFwiU2xlaWdodCBvZiBIYW5kXCIsXCJTdGVhbHRoXCIsXCJTdXJ2aXZhbFwiLFxuXSBhcyBjb25zdDtcbmV4cG9ydCB0eXBlIFNraWxsT3B0aW9uID0gdHlwZW9mIFNLSUxMX09QVElPTlNbbnVtYmVyXTtcbmV4cG9ydCBmdW5jdGlvbiBub3JtYWxpemVTa2lsbChyYXc6IHN0cmluZyk6IFNraWxsT3B0aW9uIHwgbnVsbCB7XG4gIGNvbnN0IGxvd2VyID0gcmF3LnRyaW0oKS50b0xvd2VyQ2FzZSgpO1xuICByZXR1cm4gU0tJTExfT1BUSU9OUy5maW5kKHNraWxsID0+IHNraWxsLnRvTG93ZXJDYXNlKCkgPT09IGxvd2VyKSA/PyBudWxsO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGZpbHRlclZhbGlkU2tpbGxzKHJhd0FycjogYW55W10pOiBTa2lsbE9wdGlvbltdIHtcbiAgaWYgKCFBcnJheS5pc0FycmF5KHJhd0FycikpIHJldHVybiBbXTtcbiAgY29uc3Qgc2VlbiA9IG5ldyBTZXQ8U2tpbGxPcHRpb24+KCk7XG4gIGZvciAoY29uc3QgZW50IG9mIHJhd0Fycikge1xuICAgIGxldCBjYW5kaWRhdGU6IHN0cmluZyB8IHVuZGVmaW5lZDtcbiAgICBpZiAodHlwZW9mIGVudCA9PT0gXCJzdHJpbmdcIikgY2FuZGlkYXRlID0gZW50O1xuICAgIGVsc2UgaWYgKGVudC5uYW1lICYmIHR5cGVvZiBlbnQubmFtZSA9PT0gXCJzdHJpbmdcIikgY2FuZGlkYXRlID0gZW50Lm5hbWU7XG4gICAgaWYgKGNhbmRpZGF0ZSkge1xuICAgICAgY29uc3Qgbm9ybSA9IG5vcm1hbGl6ZVNraWxsKGNhbmRpZGF0ZSk7XG4gICAgICBpZiAobm9ybSkgc2Vlbi5hZGQobm9ybSk7XG4gICAgfVxuICB9XG4gIHJldHVybiBbLi4uc2Vlbl07XG59XG5cbi8vIFx1MjUwMFx1MjUwMFx1MjUwMCBXaGljaCBGTV9LRVlTIGVhY2ggcGFyc2VyIHNob3VsZCBpbmNsdWRlIFx1MjUwMFx1MjUwMFx1MjUwMFxuZXhwb3J0IGNvbnN0IFNQRUxMX0tFWVM6IEZNS2V5W10gPSBbXG4gIFwiTkFNRVwiLFxuICBcIkxFVkVMXCIsXG4gIFwiU0NIT09MXCIsXG4gIFwiQ0FTVElOR19USU1FXCIsXG4gIFwiU1BFTExfUkFOR0VcIixcbiAgXCJEVVJBVElPTlwiLFxuICBcIlZFUkJBTFwiLFxuICBcIlNPTUFUSUNcIixcbiAgXCJNQVRFUklBTFwiLFxuICBcIkNPTVBPTkVOVFNcIixcbiAgXCJDT05DRU5UUkFUSU9OXCIsXG4gIFwiU09VUkNFXCIsXG4gIFwiUlVMRVNFVFwiXG5dO1xuXG5leHBvcnQgY29uc3QgU1BFQ0lFU19LRVlTOiBGTUtleVtdID0gW1xuICBcIlNQRUNJRVNcIixcbiAgXCJTSVpFXCIsXG4gIFwiU1BFRURcIixcbiAgXCJMQU5HVUFHRVNcIixcbiAgXCJUUkFJVFNcIixcbiAgXCJTS0lMTFNcIixcbiAgXCJTVFJfTU9EXCIsXG4gIFwiREVYX01PRFwiLFxuICBcIkNPTl9NT0RcIixcbiAgXCJJTlRfTU9EXCIsXG4gIFwiV0lTX01PRFwiLFxuICBcIkNIQV9NT0RcIixcbiAgXCJTS0lMTF9DSE9JQ0VfTElTVFwiLFxuICBcIlRPT0xfUFJPRklDSUVOQ0lFU1wiLFxuICBcIlRPT0xfQ0hPSUNFX0xJU1RcIixcbiAgXCJXRUFQT05fUFJPRklDSUVOQ0lFU1wiLFxuICBcIlNFTlNFU1wiLFxuICBcIkRBTUFHRV9SRVNcIixcbiAgXCJTT1VSQ0VcIixcbiAgXCJSVUxFU0VUXCJcbl07XG5cbmV4cG9ydCBjb25zdCBJVEVNX0tFWVM6IEZNS2V5W10gPSBbXG4gIFwiTkFNRVwiLFxuICBcIlRZUEVcIixcbiAgXCJSQVJJVFlcIixcbiAgXCJDT1NUXCIsXG4gIFwiV0VJR0hUXCIsXG4gIFwiUFJPUEVSVElFU1wiLFxuICBcIkRBTUFHRVwiLFxuICBcIkRBTUFHRV9UWVBFU1wiLFxuICBcIlJBTkdFXCIsXG4gIFwiUkVMT0FEXCIsXG4gIFwiQU1NT19UWVBFXCIsXG4gIFwiQUNcIixcbiAgXCJTVEVBTFRIX0RJU0FEVkFOVEFHRVwiLFxuICBcIk1BR0lDQUxcIixcbiAgXCJBVFRVTkVNRU5UXCIsXG4gIFwiQVRUVU5FX1JFUVwiLFxuICBcIlNPVVJDRVwiLFxuICBcIlJVTEVTRVRcIlxuXTtcblxuZXhwb3J0IGNvbnN0IEJFU1RJQVJZX0tFWVM6IEZNS2V5W10gPSBbXG4gIFwiTkFNRVwiLFxuICBcIlNJWkVcIixcbiAgXCJUWVBFXCIsXG4gIFwiQUxJR05NRU5UXCIsXG4gIFwiQUNcIixcbiAgXCJIUFwiLFxuICBcIlNQRUVEXCIsXG4gIFwiU1RSRU5HVEhcIixcbiAgXCJERVhURVJJVFlcIixcbiAgXCJDT05TVElUVVRJT05cIixcbiAgXCJJTlRFTExJR0VOQ0VcIixcbiAgXCJXSVNET01cIixcbiAgXCJDSEFSSVNNQVwiLFxuICBcIlNBVklOR19USFJPV1NcIixcbiAgXCJTS0lMTFNcIixcbiAgXCJTRU5TRVNcIixcbiAgXCJMQU5HVUFHRVNcIixcbiAgXCJDSEFMTEVOR0VfUkFUSU5HXCIsXG4gIFwiU09VUkNFXCIsXG4gIFwiUlVMRVNFVFwiXG5dO1xuXG5leHBvcnQgY29uc3QgQ0xBU1NfS0VZUzogRk1LZXlbXSA9IFtcbiAgXCJOQU1FXCIsXG4gIFwiU1BFTExfQ0FTVF9NT0RcIixcbiAgXCJBUk1PUl9QUk9GSUNJRU5DSUVTXCIsXG4gIFwiV0VBUE9OX1BST0ZJQ0lFTkNJRVNcIixcbiAgXCJUT09MX1BST0ZJQ0lFTkNJRVNcIixcbiAgXCJUT09MX0NIT0lDRV9MSVNUXCIsXG4gIFwiU0FWSU5HX1RIUk9XU1wiLFxuICBcIlNLSUxMU1wiLFxuICBcIlNLSUxMX0NIT0lDRV9MSVNUXCIsXG4gIFwiVFJBSVRTXCIsXG4gIFwiU09VUkNFXCIsXG4gIFwiUlVMRVNFVFwiXG5dO1xuXG5leHBvcnQgY29uc3QgQkFDS0dST1VORF9LRVlTOiBGTUtleVtdID0gW1xuICBcIk5BTUVcIixcbiAgXCJTS0lMTFNcIixcbiAgXCJTS0lMTF9DSE9JQ0VfTElTVFwiLCAgXG4gIFwiVE9PTF9QUk9GSUNJRU5DSUVTXCIsXG4gIFwiVE9PTF9DSE9JQ0VfTElTVFwiLFxuICBcIlRSQUlUU1wiLFxuICBcIlNPVVJDRVwiLFxuICBcIlJVTEVTRVRcIlxuXTtcblxuZXhwb3J0IGNvbnN0IEZFQVRTX0tFWVM6IEZNS2V5W10gPSBbXG4gIFwiU09VUkNFXCIsXG4gIFwiUlVMRVNFVFwiXG5dO1xuXG4vLyBcdTI1MDBcdTI1MDBcdTI1MDAgRmllbGQgc3Vic2V0cyBmb3IgZWFjaCBwYXJzZXIgXHUyNTAwXHUyNTAwXHUyNTAwXG5leHBvcnQgY29uc3QgU1BFTExfTUVUQV9ERUZTOiBGaWVsZERlZltdID0gU1BFTExfS0VZUy5tYXAoa2V5ID0+IHtcbiAgY29uc3QgZGVmID0gQUxMX0ZJRUxEX0RFRlMuZmluZChkID0+IGQuY2FsbFNpZ24gPT09IGtleSk7XG4gIGlmICghZGVmKSB0aHJvdyBuZXcgRXJyb3IoYE1pc3NpbmcgRmllbGREZWYgZm9yIFNQRUxMX0tFWSAke2tleX1gKTtcbiAgcmV0dXJuIGRlZjtcbn0pO1xuZXhwb3J0IGNvbnN0IFNQRUNJRVNfTUVUQV9ERUZTOiBGaWVsZERlZltdID0gU1BFQ0lFU19LRVlTLm1hcChrZXkgPT4ge1xuICBjb25zdCBkZWYgPSBBTExfRklFTERfREVGUy5maW5kKGQgPT4gZC5jYWxsU2lnbiA9PT0ga2V5KTtcbiAgaWYgKCFkZWYpIHRocm93IG5ldyBFcnJvcihgTWlzc2luZyBGaWVsZERlZiBmb3IgU1BFQ0lFU19LRVkgJHtrZXl9YCk7XG4gIHJldHVybiBkZWY7XG59KTtcbmV4cG9ydCBjb25zdCBJVEVNX01FVEFfREVGUzogRmllbGREZWZbXSA9IElURU1fS0VZUy5tYXAoa2V5ID0+IHtcbiAgY29uc3QgZGVmID0gQUxMX0ZJRUxEX0RFRlMuZmluZChkID0+IGQuY2FsbFNpZ24gPT09IGtleSk7XG4gIGlmICghZGVmKSB0aHJvdyBuZXcgRXJyb3IoYE1pc3NpbmcgRmllbGREZWYgZm9yIElURU1fS0VZICR7a2V5fWApO1xuICByZXR1cm4gZGVmO1xufSk7XG5leHBvcnQgY29uc3QgQkVTVElBUllfTUVUQV9ERUZTOiBGaWVsZERlZltdID0gQkVTVElBUllfS0VZUy5tYXAoa2V5ID0+IHtcbiAgY29uc3QgZGVmID0gQUxMX0ZJRUxEX0RFRlMuZmluZChkID0+IGQuY2FsbFNpZ24gPT09IGtleSk7XG4gIGlmICghZGVmKSB0aHJvdyBuZXcgRXJyb3IoYE1pc3NpbmcgRmllbGREZWYgZm9yIEJFU1RJQVJZX0tFWSAke2tleX1gKTtcbiAgcmV0dXJuIGRlZjtcbn0pO1xuZXhwb3J0IGNvbnN0IENMQVNTX01FVEFfREVGUzogRmllbGREZWZbXSA9IENMQVNTX0tFWVMubWFwKGtleSA9PiB7XG4gIGNvbnN0IGRlZiA9IEFMTF9GSUVMRF9ERUZTLmZpbmQoZCA9PiBkLmNhbGxTaWduID09PSBrZXkpO1xuICBpZiAoIWRlZikgdGhyb3cgbmV3IEVycm9yKGBNaXNzaW5nIEZpZWxkRGVmIGZvciBDTEFTU19LRVkgJHtrZXl9YCk7XG4gIHJldHVybiBkZWY7XG59KTtcbmV4cG9ydCBjb25zdCBCQUNLR1JPVU5EX01FVEFfREVGUzogRmllbGREZWZbXSA9IEJBQ0tHUk9VTkRfS0VZUy5tYXAoa2V5ID0+IHtcbiAgY29uc3QgZGVmID0gQUxMX0ZJRUxEX0RFRlMuZmluZChkID0+IGQuY2FsbFNpZ24gPT09IGtleSk7XG4gIGlmICghZGVmKSB0aHJvdyBuZXcgRXJyb3IoYE1pc3NpbmcgRmllbGREZWYgZm9yIEJBQ0tHUk9VTkRfS0VZICR7a2V5fWApO1xuICByZXR1cm4gZGVmO1xufSk7XG5leHBvcnQgY29uc3QgRkVBVFNfTUVUQV9ERUZTOiBGaWVsZERlZltdID0gRkVBVFNfS0VZUy5tYXAoa2V5ID0+IHtcbiAgY29uc3QgZGVmID0gQUxMX0ZJRUxEX0RFRlMuZmluZChkID0+IGQuY2FsbFNpZ24gPT09IGtleSk7XG4gIGlmICghZGVmKSB0aHJvdyBuZXcgRXJyb3IoYE1pc3NpbmcgRmllbGREZWYgZm9yIEJBQ0tHUk9VTkRfS0VZICR7a2V5fWApO1xuICByZXR1cm4gZGVmO1xufSk7IiwgImltcG9ydCB0eXBlIHsgUGFyc2VkTWFya2Rvd25GaWxlIH0gZnJvbSBcInNyYy90eXBlc1wiO1xuaW1wb3J0IHsgcmVwbGFjZTVlVGFncyB9IGZyb20gXCIuL2hlbHBlcnMvdGFnUmVwbGFjZXJcIjtcbmltcG9ydCB7IGdldEZ1bGxTb3VyY2VOYW1lIH0gZnJvbSBcIi4vaGVscGVycy9zb3VyY2VNYXBcIjtcbmltcG9ydCB7IHJlbmRlck1hcmtkb3duVGFibGUgfSBmcm9tIFwiLi9oZWxwZXJzL21hcmtkb3duVGFibGVcIjtcbmltcG9ydCB7IGZvcm1hdEVudHJ5IH0gZnJvbSBcIi4vaGVscGVycy9mb3JtYXRFbnRyeVwiO1xuaW1wb3J0IHsgYnVpbGRGTSwgc2VyaWFsaXplRnJvbnRtYXR0ZXIsIFNQRUxMX01FVEFfREVGUyB9IGZyb20gXCIuL2hlbHBlcnMvZnJvbnRtYXR0ZXJcIjtcblxuXG5leHBvcnQgY29uc3QgU0NIT09MX01BUDogUmVjb3JkPHN0cmluZywgc3RyaW5nPiA9IHtcbiAgQTogXCJBYmp1cmF0aW9uXCIsXG4gIEM6IFwiQ29uanVyYXRpb25cIixcbiAgRDogXCJEaXZpbmF0aW9uXCIsXG4gIEU6IFwiRW5jaGFudG1lbnRcIixcbiAgVjogXCJFdm9jYXRpb25cIixcbiAgSTogXCJJbGx1c2lvblwiLFxuICBOOiBcIk5lY3JvbWFuY3lcIixcbiAgVDogXCJUcmFuc211dGF0aW9uXCIsXG59O1xuXG5mdW5jdGlvbiBvcmRpbmFsKG46IG51bWJlcik6IHN0cmluZyB7XG4gIGNvbnN0IHN1ZmZpeCA9IChuID09PSAxKSA/IFwic3RcIiA6IChuID09PSAyKSA/IFwibmRcIiA6IChuID09PSAzKSA/IFwicmRcIiA6IFwidGhcIjtcbiAgcmV0dXJuIGAke259JHtzdWZmaXh9YDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGZvcm1hdFJhbmdlKHJhbmdlOiBhbnkpOiBzdHJpbmcge1xuICBpZiAoIXJhbmdlKSByZXR1cm4gXCJcIjtcblxuICBpZiAodHlwZW9mIHJhbmdlID09PSBcInN0cmluZ1wiKSByZXR1cm4gcmFuZ2U7XG5cbiAgaWYgKHJhbmdlLnR5cGUgPT09IFwic3BlY2lhbFwiKSByZXR1cm4gXCJTcGVjaWFsXCI7XG4gIGlmIChyYW5nZS50eXBlID09PSBcInBvaW50XCIgJiYgcmFuZ2UuZGlzdGFuY2UpIHtcbiAgICBjb25zdCBkaXN0ID0gcmFuZ2UuZGlzdGFuY2U7XG4gICAgaWYgKGRpc3QudHlwZSA9PT0gXCJ0b3VjaFwiKSByZXR1cm4gXCJUb3VjaFwiO1xuICAgIGlmIChkaXN0LnR5cGUgPT09IFwic2VsZlwiKSByZXR1cm4gXCJTZWxmXCI7XG4gICAgaWYgKGRpc3QudHlwZSA9PT0gXCJzaWdodFwiKSByZXR1cm4gXCJTaWdodFwiO1xuICAgIGlmIChkaXN0LmFtb3VudCkgcmV0dXJuIGAke2Rpc3QuYW1vdW50fSAke2Rpc3QudHlwZX1gO1xuICB9XG5cbiAgcmV0dXJuIFwiVmFyaWVzXCI7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBmb3JtYXRUaW1lKHRpbWU6IGFueVtdKTogc3RyaW5nIHtcbiAgaWYgKCFBcnJheS5pc0FycmF5KHRpbWUpKSByZXR1cm4gXCJcIjtcblxuICByZXR1cm4gdGltZS5tYXAodCA9PiBgJHt0Lm51bWJlcn0gJHt0LnVuaXR9YCkuam9pbihcIiwgXCIpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZm9ybWF0RHVyYXRpb24oZHVyYXRpb246IGFueVtdKTogc3RyaW5nIHtcbiAgaWYgKCFBcnJheS5pc0FycmF5KGR1cmF0aW9uKSkgcmV0dXJuIFwiXCI7XG5cbiAgcmV0dXJuIGR1cmF0aW9uLm1hcChkID0+IHtcbiAgICBpZiAoZC50eXBlID09PSBcImluc3RhbnRcIikgcmV0dXJuIFwiSW5zdGFudGFuZW91c1wiO1xuICAgIGlmIChkLnR5cGUgPT09IFwidGltZWRcIiAmJiBkLmR1cmF0aW9uKSB7XG4gICAgICByZXR1cm4gYCR7ZC5kdXJhdGlvbi5hbW91bnR9ICR7ZC5kdXJhdGlvbi50eXBlfSR7ZC5jb25jZW50cmF0aW9uID8gXCIgKGNvbmNlbnRyYXRpb24pXCIgOiBcIlwifWA7XG4gICAgfVxuICAgIGlmIChkLnR5cGUgPT09IFwicGVybWFuZW50XCIpIHJldHVybiBcIlBlcm1hbmVudFwiO1xuICAgIHJldHVybiBcIlNwZWNpYWxcIjtcbiAgfSkuam9pbihcIiwgXCIpO1xufVxuLy8gaW4gcGFyc2Vycy81ZS1qc29uL3BhcnNlU3BlbGxzRmlsZS50cyAob3Igd2hlcmV2ZXIgZm9ybWF0Q29tcG9uZW50cyBsaXZlcylcblxuZnVuY3Rpb24gZm9ybWF0Q29tcG9uZW50cyhjb21wb25lbnRzOiBhbnkpOiBzdHJpbmcge1xuICBpZiAoIWNvbXBvbmVudHMpIHJldHVybiBcIlwiO1xuXG4gIGNvbnN0IHBhcnRzOiBzdHJpbmdbXSA9IFtdO1xuXG4gIGlmIChjb21wb25lbnRzLnYpIHBhcnRzLnB1c2goXCJWXCIpO1xuICBpZiAoY29tcG9uZW50cy5zKSBwYXJ0cy5wdXNoKFwiU1wiKTtcblxuICBpZiAoY29tcG9uZW50cy5tKSB7XG4gICAgLy8gcHVsbCBvdXQgdGhlIGFjdHVhbCBtYXRlcmlhbCB0ZXh0KHMpXG4gICAgbGV0IG1hdERldGFpbHM6IHN0cmluZ1tdID0gW107XG5cbiAgICBpZiAoQXJyYXkuaXNBcnJheShjb21wb25lbnRzLm0pKSB7XG4gICAgICBtYXREZXRhaWxzID0gY29tcG9uZW50cy5tXG4gICAgICAgIC5tYXAoKGl0ZW06YW55KSA9PlxuICAgICAgICAgIHR5cGVvZiBpdGVtID09PSBcInN0cmluZ1wiXG4gICAgICAgICAgICA/IGl0ZW1cbiAgICAgICAgICAgIDogaXRlbSAmJiB0eXBlb2YgaXRlbS50ZXh0ID09PSBcInN0cmluZ1wiXG4gICAgICAgICAgICA/IGl0ZW0udGV4dFxuICAgICAgICAgICAgOiBudWxsXG4gICAgICAgIClcbiAgICAgICAgLmZpbHRlcigodDphbnkpOiB0IGlzIHN0cmluZyA9PiAhIXQpO1xuICAgIH0gZWxzZSBpZiAodHlwZW9mIGNvbXBvbmVudHMubSA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgbWF0RGV0YWlscyA9IFtjb21wb25lbnRzLm1dO1xuICAgIH0gZWxzZSBpZiAoY29tcG9uZW50cy5tLnRleHQpIHtcbiAgICAgIG1hdERldGFpbHMgPSBbY29tcG9uZW50cy5tLnRleHRdO1xuICAgIH1cblxuICAgIC8vIGJ1aWxkIHRoZSBcdTIwMUNNXHUyMDFEIGVudHJ5LCBhcHBlbmRpbmcgZGV0YWlscyBpZiBhbnlcbiAgICBjb25zdCBtYXRQYXJ0ID1cbiAgICAgIG1hdERldGFpbHMubGVuZ3RoID4gMFxuICAgICAgICA/IGBNICgke21hdERldGFpbHMuam9pbihcIiwgXCIpfSlgXG4gICAgICAgIDogXCJNXCI7XG5cbiAgICBwYXJ0cy5wdXNoKG1hdFBhcnQpO1xuICB9XG5cbiAgcmV0dXJuIHBhcnRzLmpvaW4oXCIsIFwiKTtcbn1cblxuXG5leHBvcnQgZnVuY3Rpb24gcGFyc2VTcGVsbHNGaWxlKGpzb246IGFueSwgZWRpdGlvbklkOiBzdHJpbmcpOiBQYXJzZWRNYXJrZG93bkZpbGVbXSB7XG4gIGlmICghanNvbi5zcGVsbCkgcmV0dXJuIFtdO1xuXG4gIC8vIG1ha2UgZWRpdGlvbklkIGF2YWlsYWJsZSBmb3Igb3VyIFNPVVJDRSBjb252ZXJ0ZXJcbiAgKGpzb24gYXMgYW55KS5fZWRpdGlvbklkID0gZWRpdGlvbklkO1xuXG4gIHJldHVybiBqc29uLnNwZWxsLm1hcCgoc3BlbGw6IGFueSkgPT4ge1xuICAgIC8vIFx1MjAxNCBnYXRoZXIgZGF0YSBmb3IgaGVhZGVyL2JvZHkvZm9vdGVyIGFzIGJlZm9yZSBcdTIwMTRcbiAgICBjb25zdCBzb3VyY2VzID0gc3BlbGwuc291cmNlXG4gICAgICA/IEFycmF5LmlzQXJyYXkoc3BlbGwuc291cmNlKSA/IHNwZWxsLnNvdXJjZSA6IFtzcGVsbC5zb3VyY2VdXG4gICAgICA6IFtcInVua25vd25cIl07XG4gICAgY29uc3QgbmFtZSA9IHNwZWxsLm5hbWU7XG4gICAgY29uc3Qgc2Nob29sID0gU0NIT09MX01BUFtzcGVsbC5zY2hvb2xdID8/IHNwZWxsLnNjaG9vbDtcbiAgICBjb25zdCBsZXZlbCA9IHNwZWxsLmxldmVsO1xuICAgIGNvbnN0IHJhbmdlID0gZm9ybWF0UmFuZ2Uoc3BlbGwucmFuZ2UpO1xuICAgIGNvbnN0IGNhc3RpbmdUaW1lID0gZm9ybWF0VGltZShzcGVsbC50aW1lKTtcbiAgICBjb25zdCBkdXJhdGlvbiA9IGZvcm1hdER1cmF0aW9uKHNwZWxsLmR1cmF0aW9uKTtcbiAgICBjb25zdCBmb3JtYXR0ZWRTb3VyY2VzID0gc291cmNlcy5tYXAoKHM6IHN0cmluZykgPT4gZ2V0RnVsbFNvdXJjZU5hbWUocywgZWRpdGlvbklkKSk7XG5cbiAgICBjb25zdCBhdHRhY2tUeXBlID0gc3BlbGwuYXR0YWNrVHlwZSB8fCBcIlwiO1xuICAgIGNvbnN0IGRhbWFnZVR5cGUgPSBzcGVsbC5kYW1hZ2VJbmZsaWN0Py5bMF0gfHwgXCJUZWxlcG9ydGF0aW9uXCI7XG4gICAgY29uc3Qgcml0dWFsID0gc3BlbGwucml0dWFsID09PSB0cnVlO1xuICAgIGNvbnN0IGNvbmNlbnRyYXRpb24gPSBzcGVsbC5kdXJhdGlvbj8uc29tZSgoZDogYW55KSA9PiBkLmNvbmNlbnRyYXRpb24pID8/IGZhbHNlO1xuXG5jb25zdCBGTSAgID0gYnVpbGRGTShzcGVsbCwgU1BFTExfTUVUQV9ERUZTKTtcbmNvbnN0IHlhbWwgPSBzZXJpYWxpemVGcm9udG1hdHRlcihGTSwgU1BFTExfTUVUQV9ERUZTKTtcblxuICAgIC8vIFx1MjAxNCB0aXRsZS9zdWJ0aXRsZSBhbmQgYm9keSBsYXlvdXQgXHUyMDE0XG4gICAgY29uc3Qgc2FmZU5hbWUgPSBuYW1lLnJlcGxhY2UoL1xcLy9nLCBcIi1cIik7XG4gICAgY29uc3QgdGl0bGUgPSBgIyAke25hbWV9YDtcbiAgICBjb25zdCBsZXZlbExhYmVsID1cbiAgICAgIGxldmVsID09PSAwXG4gICAgICAgID8gYCR7c2Nob29sfSBDYW50cmlwYFxuICAgICAgICA6IGAke29yZGluYWwobGV2ZWwpfS1sZXZlbCAke3NjaG9vbH0gU3BlbGxgO1xuICAgIGNvbnN0IHN1YnRpdGxlID0gYCMjIyAqJHtsZXZlbExhYmVsfSoke2NvbmNlbnRyYXRpb24gPyBcIiAqKENvbmNlbnRyYXRpb24pKlwiIDogXCJcIn1gO1xuXG4gICAgY29uc3QgaGVhZGVyTGluZXMgPSBbXG4gICAgICB0aXRsZSxcbiAgICAgIHN1YnRpdGxlLFxuICAgICAgYCoqQ2FzdGluZyBUaW1lOioqICR7Y2FzdGluZ1RpbWV9YCxcbiAgICAgIGAqKlJhbmdlOioqICR7cmFuZ2V9YCxcbiAgICAgIGAqKkNvbXBvbmVudHM6KiogJHtmb3JtYXRDb21wb25lbnRzKHNwZWxsLmNvbXBvbmVudHMpfWAsXG4gICAgICBgKipEdXJhdGlvbjoqKiAke2R1cmF0aW9ufWAsXG4gICAgXTtcblxuICAgIGNvbnN0IGJvZHlMaW5lcyA9IFtcbiAgICAgIC4uLigoc3BlbGwuZW50cmllcyA/PyBbXSkubWFwKChlOiBhbnkpID0+IGZvcm1hdEVudHJ5KGUpKSksXG4gICAgICAuLi4oKHNwZWxsLmVudHJpZXNIaWdoZXJMZXZlbCA/PyBbXSkubWFwKChlOiBhbnkpID0+IGZvcm1hdEVudHJ5KGUpKSksXG4gICAgXTtcblxuICAgIGNvbnN0IGZvb3RlckxpbmVzID0gW1xuICAgICAgYC0tLWAsXG4gICAgICBgKipTb3VyY2U6KiogJHtmb3JtYXR0ZWRTb3VyY2VzLmpvaW4oXCIsIFwiKX1gLFxuICAgIF07XG5cbiAgICAvLyBcdTIwMTQgYXNzZW1ibGUgdGhlIG5vdGUgd2l0aCBZQU1MIGZyb250bWF0dGVyIFx1MjAxNFxuICAgIHJldHVybiB7XG4gICAgICBwYXRoOiBgJHtzYWZlTmFtZX0ubWRgLFxuICAgICAgY29udGVudDogW1xuICAgICAgICBgLS0tXFxuJHt5YW1sfVxcbi0tLWAsXG4gICAgICAgIGhlYWRlckxpbmVzLmpvaW4oXCJcXG5cIiksXG4gICAgICAgIGBgLFxuICAgICAgICBib2R5TGluZXMuam9pbihcIlxcblxcblwiKSxcbiAgICAgICAgYGAsXG4gICAgICAgIGZvb3RlckxpbmVzLmpvaW4oXCJcXG5cIiksXG4gICAgICBdLmpvaW4oXCJcXG5cIiksXG4gICAgfTtcbiAgfSk7XG59XG5cbiIsICJpbXBvcnQgdHlwZSB7IFBhcnNlZE1hcmtkb3duRmlsZSB9IGZyb20gXCIuLi8uLi90eXBlc1wiO1xuaW1wb3J0IHsgcmVwbGFjZTVlVGFncyB9IGZyb20gXCIuL2hlbHBlcnMvdGFnUmVwbGFjZXJcIjtcbmltcG9ydCB7XG4gIGJ1aWxkRk0sXG4gIHNlcmlhbGl6ZUZyb250bWF0dGVyLFxuICBGTV9GSUVMRFMsXG4gIFNQRUNJRVNfTUVUQV9ERUZTLFxuICBTSVpFX01BUCxcbn0gZnJvbSBcIi4vaGVscGVycy9mcm9udG1hdHRlclwiO1xuaW1wb3J0IHsgcmVuZGVyTWFya2Rvd25UYWJsZSB9IGZyb20gXCIuL2hlbHBlcnMvbWFya2Rvd25UYWJsZVwiO1xuaW1wb3J0IHsgZm9ybWF0RW50cnkgfSBmcm9tIFwiLi9oZWxwZXJzL2Zvcm1hdEVudHJ5XCI7XG5cbmZ1bmN0aW9uIHNsdWcobmFtZTogc3RyaW5nKTogc3RyaW5nIHtcbiAgcmV0dXJuIG5hbWVcbiAgICAucmVwbGFjZSgvOy9nLCBcIjpcIikgICAgICAgLy8gc2VtaWNvbG9uIFx1MjE5MiBkYXNoXG4gICAgLnJlcGxhY2UoL1tcXC86XCJdL2csIFwiOlwiKSAgLy8gc2xhc2gsIGNvbG9uLCBxdW90ZSBcdTIxOTIgZGFzaFxuICAgIC50cmltKCk7XG59XG5cbmNvbnN0IEJMT0NLRURfVFJBSVRTID0gW1wiQWdlXCIsIFwiU2l6ZVwiLCBcIkxhbmd1YWdlc1wiLCBcIkNyZWF0dXJlIFR5cGVcIiwgXCJTcGVlZFwiXTtcblxuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlU3BlY2llc0ZpbGUoXG4gIGpzb246IHsgcmFjZTogYW55W107IHN1YnJhY2U/OiBhbnlbXTsgX2VkaXRpb25JZD86IHN0cmluZyB9LFxuICBlZGl0aW9uSWQ6IHN0cmluZ1xuKTogUGFyc2VkTWFya2Rvd25GaWxlW10ge1xuICBpZiAoIUFycmF5LmlzQXJyYXkoanNvbi5yYWNlKSkgcmV0dXJuIFtdO1xuICBqc29uLl9lZGl0aW9uSWQgPSBlZGl0aW9uSWQ7XG5cbiAgLy8gMSkgRmlsdGVyIG91dCByZXByaW50c1xuY29uc3QgcmF3VmFyaWFudHMgPSBqc29uLnJhY2UuZmlsdGVyKChyOiBhbnkpID0+XG4gIChyLmJhc2ljUnVsZXMgPT09IHRydWUgfHwgci5iYXNpY1J1bGVzMjAyNCA9PT0gdHJ1ZSlcbiAgJiYgIS9cXCgoPzpLYWxhZGVzaHxaZW5kaWthcnxBbW9ua2hldHxJbm5pc3RyYWR8SXhhbGFuKVxcKSQvLnRlc3Qoci5uYW1lKVxuKTtcblxuICAvLyAyKSBHcm91cCBieSByYWNlIG5hbWVcbiAgY29uc3QgYnlOYW1lID0gbmV3IE1hcDxzdHJpbmcsIGFueVtdPigpO1xuICBmb3IgKGNvbnN0IHIgb2YgcmF3VmFyaWFudHMpIHtcbiAgICBjb25zdCBsaXN0ID0gYnlOYW1lLmdldChyLm5hbWUpID8/IFtdO1xuICAgIGxpc3QucHVzaChyKTtcbiAgICBieU5hbWUuc2V0KHIubmFtZSwgbGlzdCk7XG4gIH1cblxuICAvLyAzKSBBbGwgc3VicmFjZXMgYXJyYXlcbiAgY29uc3Qgc3VicmFjZXNMaXN0ID0gQXJyYXkuaXNBcnJheShqc29uLnN1YnJhY2UpID8ganNvbi5zdWJyYWNlIDogW107XG5cbiAgY29uc3Qgb3V0OiBQYXJzZWRNYXJrZG93bkZpbGVbXSA9IFtdO1xuXG4gIC8vIDQpIE1haW4gbG9vcCBvdmVyIGVhY2ggc3BlY2llc1xuICBmb3IgKGNvbnN0IFtyYWNlTmFtZSwgcmFjZVZhcmlhbnRzXSBvZiBieU5hbWUuZW50cmllcygpKSB7XG4gICAgY29uc3Qgc2FmZU5hbWUgPSBzbHVnKHJhY2VOYW1lKTtcblxuICAgIC8vIHBpY2sgdGhlIFx1MjAxQ2Z1bGxlc3RcdTIwMUQgdmFyaWFudCBhcyBwcmltYXJ5XG4gICAgY29uc3QgcHJpbWFyeSA9IHJhY2VWYXJpYW50cy5yZWR1Y2UoXG4gICAgICAoYmVzdCwgY3VyKSA9PlxuICAgICAgICBPYmplY3Qua2V5cyhjdXIpLmxlbmd0aCA+IE9iamVjdC5rZXlzKGJlc3QpLmxlbmd0aCA/IGN1ciA6IGJlc3QsXG4gICAgICByYWNlVmFyaWFudHNbMF1cbiAgICApO1xuXG4gICAgLy8gb25lXHUyMDEwb2ZmOiBncmFmdCBIdW1hbiBhYmlsaXR5IGlmIG1pc3NpbmdcbiAgICBpZiAoIXByaW1hcnkuYWJpbGl0eSkge1xuICAgICAgY29uc3QgaHVtYW5FbnRyeSA9IHN1YnJhY2VzTGlzdC5maW5kKChzcjogYW55KSA9PlxuICAgICAgICBzci5yYWNlTmFtZSA9PT0gcmFjZU5hbWUgJiZcbiAgICAgICAgc3IucmFjZVNvdXJjZSA9PT0gcHJpbWFyeS5zb3VyY2UgJiZcbiAgICAgICAgIShcIm5hbWVcIiBpbiBzcikgJiZcbiAgICAgICAgQXJyYXkuaXNBcnJheShzci5hYmlsaXR5KVxuICAgICAgKTtcbiAgICAgIGlmIChodW1hbkVudHJ5KSBwcmltYXJ5LmFiaWxpdHkgPSBodW1hbkVudHJ5LmFiaWxpdHk7XG4gICAgfVxuXG4gICAgLy8gYnVpbGQgZnJvbnRtYXR0ZXJcbiAgICBjb25zdCBmbSA9IGJ1aWxkRk0ocHJpbWFyeSwgU1BFQ0lFU19NRVRBX0RFRlMpO1xuICAgIGNvbnN0IHNlbnNlczogc3RyaW5nW10gPSBbXTtcbiAgICBpZiAocHJpbWFyeS5kYXJrdmlzaW9uKSAgc2Vuc2VzLnB1c2goYERhcmt2aXNpb24gJHtwcmltYXJ5LmRhcmt2aXNpb259IGZ0LmApO1xuICAgIGlmIChwcmltYXJ5LmJsaW5kc2lnaHQpICBzZW5zZXMucHVzaChgQmxpbmRzaWdodCAke3ByaW1hcnkuYmxpbmRzaWdodH0gZnQuYCk7XG4gICAgaWYgKHByaW1hcnkudHJlbW9yc2Vuc2UpIHNlbnNlcy5wdXNoKGBUcmVtb3JzZW5zZSAke3ByaW1hcnkudHJlbW9yc2Vuc2V9IGZ0LmApO1xuICAgIGlmIChwcmltYXJ5LnRydWVzaWdodCkgICBzZW5zZXMucHVzaChgVHJ1ZXNpZ2h0ICR7cHJpbWFyeS50cnVlc2lnaHR9IGZ0LmApO1xuICAgIGlmIChzZW5zZXMubGVuZ3RoKSBmbS5zZW5zZXMgPSBzZW5zZXM7XG4gICAgaWYgKEFycmF5LmlzQXJyYXkoZm0udHJhaXRzKSkge1xuICAgICAgZm0udHJhaXRzID0gZm0udHJhaXRzLmZpbHRlcih0ID0+ICFCTE9DS0VEX1RSQUlUUy5pbmNsdWRlcyh0KSk7XG4gICAgfVxuICAgIGNvbnN0IHlhbWwgPSBzZXJpYWxpemVGcm9udG1hdHRlcihmbSwgU1BFQ0lFU19NRVRBX0RFRlMpO1xuXG4gICAgLy8gYnVpbGQgc3BlY2llcyBib2R5XG4gICAgY29uc3QgbGluZXM6IHN0cmluZ1tdID0gW107XG4gICAgbGluZXMucHVzaChgIyAke3JhY2VOYW1lfWAsIGAjIyBTdGF0c2ApO1xuXG4gICAgLy8gU2l6ZVxuICAgIGNvbnN0IHNpemUgPSBBcnJheS5pc0FycmF5KHByaW1hcnkuc2l6ZSlcbiAgICAgID8gcHJpbWFyeS5zaXplLm1hcCgoczogc3RyaW5nKSA9PiBTSVpFX01BUFtzXSB8fCBzKS5qb2luKFwiL1wiKVxuICAgICAgOiBTSVpFX01BUFtwcmltYXJ5LnNpemVdID8/IHByaW1hcnkuc2l6ZTtcbiAgICBsaW5lcy5wdXNoKGAqKlNpemU6KiogJHtzaXplfWApO1xuXG4gICAgLy8gU3BlZWRcbiAgICBjb25zdCBzcGVlZCA9IHR5cGVvZiBwcmltYXJ5LnNwZWVkID09PSBcIm51bWJlclwiXG4gICAgICA/IHByaW1hcnkuc3BlZWRcbiAgICAgIDogcHJpbWFyeS5zcGVlZD8ud2FsayA/PyBwcmltYXJ5LnNwZWVkPy5iYXNlID8/IDA7XG4gICAgbGluZXMucHVzaChgKipTcGVlZDoqKiAke3NwZWVkfSBmdC4gd2Fsa2luZ2ApO1xuXG4gICAgLy8gQWJpbGl0aWVzXG4gICAgY29uc3Qga2lkcyA9IHN1YnJhY2VzTGlzdC5maWx0ZXIoc3IgPT5cbiAgICAgIHNyLm5hbWUgJiYgc3IucmFjZU5hbWUgPT09IHJhY2VOYW1lICYmIHNyLnJhY2VTb3VyY2UgPT09IHByaW1hcnkuc291cmNlXG4gICAgKTtcbiAgICBjb25zdCByYXdBYmlsaXR5ID0gQXJyYXkuaXNBcnJheShwcmltYXJ5LmFiaWxpdHkpXG4gICAgICA/IHByaW1hcnkuYWJpbGl0eVxuICAgICAgOiBBcnJheS5pc0FycmF5KGtpZHNbMF0/LmFiaWxpdHkpID8ga2lkc1swXS5hYmlsaXR5IDogW107XG4gICAgaWYgKEFycmF5LmlzQXJyYXkocmF3QWJpbGl0eSkgJiYgcmF3QWJpbGl0eS5sZW5ndGgpIHtcbiAgICAgIGNvbnN0IGJvbnVzZXMgPSB7IHN0cjowLGRleDowLGNvbjowLGludDowLHdpczowLGNoYTowIH07XG4gICAgICBsZXQgY2hvb3NlT3B0OiBhbnkgPSBudWxsO1xuICAgICAgZm9yIChjb25zdCBvYmogb2YgcmF3QWJpbGl0eSkge1xuICAgICAgICBpZiAoXCJjaG9vc2VcIiBpbiBvYmopIGNob29zZU9wdCA9IG9iai5jaG9vc2U7XG4gICAgICAgIGVsc2UgZm9yIChjb25zdCBbayx2XSBvZiBPYmplY3QuZW50cmllcyhvYmopKSAoYm9udXNlcyBhcyBhbnkpW2tdICs9IHYgYXMgbnVtYmVyO1xuICAgICAgfVxuICAgICAgY29uc3QgcGFpcnMgPSBPYmplY3QuZW50cmllcyhib251c2VzKSBhcyBbc3RyaW5nLG51bWJlcl1bXTtcbiAgICAgIGNvbnN0IHBhcnRzID0gcGFpcnMuZmlsdGVyKChbLHZdKT0+diE9PTApLm1hcCgoW2ssdl0pPT5gJHtrLnRvVXBwZXJDYXNlKCl9ICR7dj49MD9cIitcIjpcIlwifSR7dn1gKTtcbiAgICAgIGlmIChjaG9vc2VPcHQ/LmNvdW50ICYmIEFycmF5LmlzQXJyYXkoY2hvb3NlT3B0LmZyb20pKSB7XG4gICAgICAgIHBhcnRzLnB1c2goYENIT09TRSAke2Nob29zZU9wdC5jb3VudH0gZnJvbSAke2Nob29zZU9wdC5mcm9tLm1hcCgoczpzdHJpbmcpPT5zLnRvVXBwZXJDYXNlKCkpLmpvaW4oXCIsIFwiKX1gKTtcbiAgICAgIH1cbiAgICAgIGlmIChwYXJ0cy5sZW5ndGgpIGxpbmVzLnB1c2goYCoqQWJpbGl0eSBTY29yZXM6KiogJHtwYXJ0cy5qb2luKFwiLCBcIil9YCk7XG4gICAgfVxuXG4gICAgLy8gTGFuZ3VhZ2VzXG4gICAgY29uc3QgbGFuZ3MgPSBmbS5sYW5ndWFnZXMgYXMgc3RyaW5nW118dW5kZWZpbmVkO1xuICAgIGlmIChsYW5ncz8ubGVuZ3RoKSBsaW5lcy5wdXNoKGAqKkxhbmd1YWdlczoqKiAke2xhbmdzLmpvaW4oXCIsIFwiKX1gKTtcblxuICAgIC8vIFNraWxsc1xuICAgIGlmIChBcnJheS5pc0FycmF5KHByaW1hcnkuc2tpbGxQcm9maWNpZW5jaWVzKSkge1xuICAgICAgY29uc3Qgc2tpbGxMYWJlbHM6IHN0cmluZ1tdID0gW107XG4gICAgICBmb3IgKGNvbnN0IGUgb2YgcHJpbWFyeS5za2lsbFByb2ZpY2llbmNpZXMgYXMgYW55W10pIHtcbiAgICAgICAgaWYgKGUuY2hvb3NlPy5mcm9tKSB7XG4gICAgICAgICAgc2tpbGxMYWJlbHMucHVzaChgQ2hvb3NlIGZyb206ICR7ZS5jaG9vc2UuZnJvbS5tYXAoKHM6c3RyaW5nKT0+cy5jaGFyQXQoMCkudG9VcHBlckNhc2UoKStzLnNsaWNlKDEpKS5qb2luKFwiLCBcIil9YCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY29uc3QgdmFsID0gZS5wcm9maWNpZW5jeSA/PyBlLm5hbWUgPz8gZTtcbiAgICAgICAgICBpZiAodHlwZW9mIHZhbCA9PT0gXCJzdHJpbmdcIikgc2tpbGxMYWJlbHMucHVzaCh2YWwuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkrdmFsLnNsaWNlKDEpKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKHNraWxsTGFiZWxzLmxlbmd0aCkgbGluZXMucHVzaChgKipTa2lsbCBQcm9maWNpZW5jaWVzOioqICR7c2tpbGxMYWJlbHMuam9pbihcIjsgXCIpfWApO1xuICAgIH1cblxuICAgIC8vIFRvb2wgLyBXZWFwb24gLyBBcm1vclxuICAgIGNvbnN0IHRwID0gZm1bRk1fRklFTERTLlRPT0xfUFJPRklDSUVOQ0lFU10gYXMgc3RyaW5nW118dW5kZWZpbmVkO1xuICAgIGNvbnN0IHdwID0gZm1bRk1fRklFTERTLldFQVBPTl9QUk9GSUNJRU5DSUVTXSBhcyBzdHJpbmdbXXx1bmRlZmluZWQ7XG4gICAgY29uc3QgYXAgPSBmbVtGTV9GSUVMRFMuQVJNT1JfUFJPRklDSUVOQ0lFU10gYXMgc3RyaW5nW118dW5kZWZpbmVkO1xuICAgIGlmICh0cD8ubGVuZ3RoKSBsaW5lcy5wdXNoKGAqKlRvb2wgUHJvZmljaWVuY2llczoqKiAke3RwLmpvaW4oXCIsIFwiKX1gKTtcbiAgICBpZiAod3A/Lmxlbmd0aCkgbGluZXMucHVzaChgKipXZWFwb24gUHJvZmljaWVuY2llczoqKiAke3dwLmpvaW4oXCIsIFwiKX1gKTtcbiAgICBpZiAoYXA/Lmxlbmd0aCkgbGluZXMucHVzaChgKipBcm1vciBQcm9maWNpZW5jaWVzOioqICR7YXAuam9pbihcIiwgXCIpfWApO1xuXG4gICAgLy8gVHJhaXRzXG4gICAgbGluZXMucHVzaChgIyMgVHJhaXRzYCk7XG4gICAgY29uc3Qgc2VlbiA9IG5ldyBTZXQ8c3RyaW5nPigpO1xuICAgIGZvciAoY29uc3QgdHJhaXQgb2YgZm0udHJhaXRzIGFzIHN0cmluZ1tdfHxbXSkge1xuICAgICAgbGluZXMucHVzaChgIyMjIyMgJHt0cmFpdH1gKTtcbiAgICAgIGNvbnN0IGVudCA9IHByaW1hcnkuZW50cmllcz8uZmluZCgoZTphbnkpPT5lLm5hbWU9PT10cmFpdCk7XG4gICAgICBpZiAoZW50Py5lbnRyaWVzKSB7XG4gICAgICAgIGVudC5lbnRyaWVzLmZvckVhY2goKHN1YjphbnksaWR4Om51bWJlcik9PntcbiAgICAgICAgICBsZXQgYmxrOnN0cmluZ3x1bmRlZmluZWQ7XG4gICAgICAgICAgaWYgKHN1Yi50eXBlPT09XCJ0YWJsZVwiKSAgICAgICBibGsgPSByZW5kZXJNYXJrZG93blRhYmxlKHN1Yik7XG4gICAgICAgICAgZWxzZSBpZiAoc3ViLnR5cGU9PT1cImxpc3RcIikgICBibGsgPSBzdWIuaXRlbXMubWFwKChpdDphbnkpPT50eXBlb2YgaXQ9PT1cInN0cmluZ1wiP2AtICR7cmVwbGFjZTVlVGFncyhpdCl9YDpgLSAke2l0Lm5hbWV9YCApLmpvaW4oXCJcXG5cIik7XG4gICAgICAgICAgZWxzZSBpZiAodHlwZW9mIHN1Yj09PVwic3RyaW5nXCIpIGJsayA9IHJlcGxhY2U1ZVRhZ3Moc3ViKTtcbiAgICAgICAgICBpZiAoYmxrICYmICFzZWVuLmhhcyhibGspKSB7XG4gICAgICAgICAgICBsaW5lcy5wdXNoKGJsayk7XG4gICAgICAgICAgICBzZWVuLmFkZChibGspO1xuICAgICAgICAgICAgaWYgKGVudC5lbnRyaWVzLmxlbmd0aD4xICYmIGlkeDxlbnQuZW50cmllcy5sZW5ndGgtMSkgbGluZXMucHVzaChcIlwiKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIFx1MjUwMFx1MjUwMFx1MjUwMCBOb3cgYnJhbmNoIG9uIHN1YnJhY2VzIFx1MjUwMFx1MjUwMFx1MjUwMFxuICAgIGNvbnN0IHN1YnMgPSBraWRzOyAgLy8gYWxyZWFkeSBmaWx0ZXJlZFxuICAgIGlmIChzdWJzLmxlbmd0aCkge1xuICAgICAgLy8gMSkgbWFpbiBmaWxlIGluIGZvbGRlclxuICAgICAgb3V0LnB1c2goe1xuICAgICAgICBwYXRoOiBgU3BlY2llcy8ke3NhZmVOYW1lfS8ke3NhZmVOYW1lfS5tZGAsXG4gICAgICAgIGNvbnRlbnQ6IGAtLS1cXG4ke3lhbWx9XFxuLS0tXFxuXFxuJHtsaW5lcy5qb2luKFwiXFxuXCIpfWAsXG4gICAgICB9KTtcblxuICAgICAgLy8gMikgZWFjaCBzdWJzcGVjaWVzXG4gICAgICBjb25zdCBzdWJGb2xkZXIgPSBgU3BlY2llcy8ke3NhZmVOYW1lfS9TdWJzcGVjaWVzYDtcbiAgICAgIGZvciAoY29uc3Qgc3Igb2Ygc3Vicykge1xuICAgICAgICAvLyB0dXJuIHNlbWljb2xvbnMgXHUyMTkyIGNvbG9uc1xuICAgICAgICBjb25zdCBkaXNwbGF5ID0gc3IubmFtZS5yZXBsYWNlKC87L2csIFwiOlwiKTtcbiAgICAgICAgY29uc3Qgc3ViTGluZXM6IHN0cmluZ1tdID0gW2AjICR7ZGlzcGxheX1gXTtcblxuICAgICAgICAvLyBjb3B5IFN0YXRzIGJsb2NrIGlmIHlvdSBsaWtlOlxuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShzci5hYmlsaXR5KSkge1xuICAgICAgICAgIGNvbnN0IGJvbnVzZXMgPSB7IHN0cjowLGRleDowLGNvbjowLGludDowLHdpczowLGNoYTowIH07XG4gICAgICAgICAgbGV0IGNob29zZU9wdDphbnkgPSBudWxsO1xuICAgICAgICAgIGZvciAoY29uc3Qgb2JqIG9mIHNyLmFiaWxpdHkpIHtcbiAgICAgICAgICAgIGlmIChcImNob29zZVwiIGluIG9iaikgY2hvb3NlT3B0ID0gb2JqLmNob29zZTtcbiAgICAgICAgICAgIGVsc2UgZm9yIChjb25zdCBbayx2XSBvZiBPYmplY3QuZW50cmllcyhvYmopKSAoYm9udXNlcyBhcyBhbnkpW2tdKz12IGFzIG51bWJlcjtcbiAgICAgICAgICB9XG4gICAgICAgICAgY29uc3QgcGFpcnMgPSBPYmplY3QuZW50cmllcyhib251c2VzKSBhcyBbc3RyaW5nLG51bWJlcl1bXTtcbiAgICAgICAgICBjb25zdCBwYXJ0cyA9IHBhaXJzLmZpbHRlcigoWyx2XSk9PnYhPT0wKS5tYXAoKFtrLHZdKT0+YCR7ay50b1VwcGVyQ2FzZSgpfSAke3Y+PTA/XCIrXCI6XCJcIn0ke3Z9YCk7XG4gICAgICAgICAgaWYgKGNob29zZU9wdD8uY291bnQpIHBhcnRzLnB1c2goYENIT09TRSAke2Nob29zZU9wdC5jb3VudH0gZnJvbSAkeyhjaG9vc2VPcHQuZnJvbSBhcyBzdHJpbmdbXSkubWFwKHM9PnMudG9VcHBlckNhc2UoKSkuam9pbihcIiwgXCIpfWApO1xuICAgICAgICAgIGlmIChwYXJ0cy5sZW5ndGgpIHN1YkxpbmVzLnB1c2goYCoqQWJpbGl0eSBTY29yZXM6KiogJHtwYXJ0cy5qb2luKFwiLCBcIil9YCk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyB0aGVuIHRyYWl0cy9lbnRyaWVzXG4gICAgICAgIGZvciAoY29uc3QgZW50cnkgb2Ygc3IuZW50cmllcyB8fCBbXSkge1xuICAgICAgICAgIHN1YkxpbmVzLnB1c2goZm9ybWF0RW50cnkoZW50cnkpKTtcbiAgICAgICAgICBzdWJMaW5lcy5wdXNoKFwiXCIpOyAvLyBvcHRpb25hbCBibGFuayBsaW5lIGJldHdlZW4gZmVhdHVyZXNcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHN1YllhbWwgPSBzZXJpYWxpemVGcm9udG1hdHRlcihidWlsZEZNKHNyLCBTUEVDSUVTX01FVEFfREVGUyksIFNQRUNJRVNfTUVUQV9ERUZTKTtcbiAgICAgICAgb3V0LnB1c2goe1xuICAgICAgICAgIHBhdGg6IGAke3N1YkZvbGRlcn0vJHtzbHVnKHNyLm5hbWUpfS5tZGAsXG4gICAgICAgICAgY29udGVudDogYC0tLVxcbiR7c3ViWWFtbH1cXG4tLS1cXG5cXG4ke3N1YkxpbmVzLmpvaW4oXCJcXG5cIil9YCxcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIG5vIHN1YnJhY2VzIFx1MjFEMiBhIHNpbmdsZSBmbGF0IGZpbGVcbiAgICAgIG91dC5wdXNoKHtcbiAgICAgICAgcGF0aDogYFNwZWNpZXMvJHtzYWZlTmFtZX0ubWRgLFxuICAgICAgICBjb250ZW50OiBgLS0tXFxuJHt5YW1sfVxcbi0tLVxcblxcbiR7bGluZXMuam9pbihcIlxcblwiKX1gLFxuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgLy8gNSkgU29ydCAmIHJldHVyblxuICByZXR1cm4gb3V0LnNvcnQoKGEsIGIpID0+IGEucGF0aC5sb2NhbGVDb21wYXJlKGIucGF0aCkpO1xufVxuIiwgIi8vNWUgMjAyNSBjbGFzc2VzXG5cbmltcG9ydCB0eXBlIHsgUGFyc2VkTWFya2Rvd25GaWxlIH0gZnJvbSBcIi4uLy4uL3R5cGVzXCI7XG5pbXBvcnQgeyBcbiAgYnVpbGRGTSwgXG4gIHNlcmlhbGl6ZUZyb250bWF0dGVyLCBcbiAgQ0xBU1NfTUVUQV9ERUZTLCBcbiAgdW5pZmllZFRvb2xQcm9mcywgXG4gIHVuaWZpZWRXZWFwb25Qcm9mcywgXG4gIFNraWxsT3B0aW9uLFxuICB1bmlmaWVkU2tpbGxzLFxuICBTS0lMTF9PUFRJT05TLCBcbiAgRk1fRklFTERTXG59IGZyb20gXCIuL2hlbHBlcnMvZnJvbnRtYXR0ZXJcIjtcbmltcG9ydCB7IHJlbmRlck1hcmtkb3duVGFibGUgfSBmcm9tIFwiLi9oZWxwZXJzL21hcmtkb3duVGFibGVcIjtcbmltcG9ydCB7IHJlcGxhY2U1ZVRhZ3MgfSBmcm9tIFwiLi9oZWxwZXJzL3RhZ1JlcGxhY2VyXCI7XG5pbXBvcnQgeyBmb3JtYXRFbnRyeSB9IGZyb20gXCIuL2hlbHBlcnMvZm9ybWF0RW50cnlcIjtcblxuZnVuY3Rpb24gaXNUeXBlZEVudHJ5KHg6IGFueSk6IHggaXMgeyB0eXBlOiBzdHJpbmc7IFtrOiBzdHJpbmddOiBhbnkgfSB7XG4gIHJldHVybiAoXG4gICAgeCAhPSBudWxsICYmXG4gICAgdHlwZW9mIHggPT09IFwib2JqZWN0XCIgJiZcbiAgICAhQXJyYXkuaXNBcnJheSh4KSAmJlxuICAgIHR5cGVvZiAoeCBhcyBhbnkpLnR5cGUgPT09IFwic3RyaW5nXCJcbiAgKTtcbn1cblxuZnVuY3Rpb24gZm9ybWF0RmVhdHVyZUxpbmsobmFtZTogc3RyaW5nKTogc3RyaW5nIHtcbiAgICBjb25zdCBpZ25vcmUgPSBbXCJBYmlsaXR5IFNjb3JlIEltcHJvdmVtZW50XCIsIFwiQXJjaGV0eXBlIEZlYXR1cmVcIiwgXCJTdWJjbGFzcyBGZWF0dXJlXCJdO1xuICAgIGlmIChpZ25vcmUuc29tZShzdWIgPT4gbmFtZS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKHN1Yi50b0xvd2VyQ2FzZSgpKSkpIHtcbiAgICAgIHJldHVybiBuYW1lO1xuICAgIH1cbiAgXG4gICAgY29uc3QgYW5jaG9yID0gbmFtZVxuICAgICAgLnJlcGxhY2UoL1teXFx3XFxzXS9nLCBcIlwiKSAgICAgICAgICAgLy8gcmVtb3ZlIHB1bmN0dWF0aW9uIChrZWVwIHNwYWNlcylcbiAgICAgIC5yZXBsYWNlKC8tL2csIFwiIFwiKSAgICAgICAgICAgICAgICAvLyByZW1vdmUgZGFzaGVzXG4gICAgICAucmVwbGFjZSgvXFxzKy9nLCBcIiBcIikgICAgICAgICAgICAgIC8vIG5vcm1hbGl6ZSB3aGl0ZXNwYWNlXG4gICAgICAudHJpbSgpXG4gICAgICAucmVwbGFjZSgvXFxiXFx3L2csIGwgPT4gbC50b1VwcGVyQ2FzZSgpKTsgLy8gY2FwaXRhbGl6ZSB3b3Jkc1xuICBcbiAgICByZXR1cm4gYFtbIyR7YW5jaG9yfV1dYDtcbiAgfVxuICBcbmV4cG9ydCBjb25zdCBPUFRfRkVBVFVSRV9UWVBFX1RPX0ZVTEw6IFJlY29yZDxzdHJpbmcsc3RyaW5nPiA9IHtcbiAgQUk6ICAgXCJBcnRpZmljZXIgSW5mdXNpb25cIixcbiAgRUQ6ICAgXCJFbGVtZW50YWwgRGlzY2lwbGluZVwiLFxuICBFSTogICBcIkVsZHJpdGNoIEludm9jYXRpb25cIixcbiAgTU06ICAgXCJNZXRhbWFnaWNcIixcbiAgTVY6ICAgXCJNYW5ldXZlclwiLFxuICBcIk1WOkJcIjogICAgXCJNYW5ldXZlciwgQmF0dGxlIE1hc3RlclwiLFxuICBcIk1WOkMyLVVBXCI6XCJNYW5ldXZlciwgQ2F2YWxpZXIgVjIgKFVBKVwiLFxuICBcIkFTOlYxLVVBXCI6XCJBcmNhbmUgU2hvdCwgVjEgKFVBKVwiLFxuICBcIkFTOlYyLVVBXCI6XCJBcmNhbmUgU2hvdCwgVjIgKFVBKVwiLFxuICBBUzogICBcIkFyY2FuZSBTaG90XCIsXG4gIE9USDogIFwiT3RoZXJcIixcbiAgXCJGUzpGXCI6XCJGaWdodGluZyBTdHlsZTsgRmlnaHRlclwiLFxuICBcIkZTOkJcIjpcIkZpZ2h0aW5nIFN0eWxlOyBCYXJkXCIsXG4gIFwiRlM6UFwiOlwiRmlnaHRpbmcgU3R5bGU7IFBhbGFkaW5cIixcbiAgXCJGUzpSXCI6XCJGaWdodGluZyBTdHlsZTsgUmFuZ2VyXCIsXG4gIFBCOiAgIFwiUGFjdCBCb29uXCIsXG4gIE9SOiAgIFwiT25vbWFuY3kgUmVzb25hbnRcIixcbiAgUk46ICAgXCJSdW5lIEtuaWdodCBSdW5lXCIsXG4gIEFGOiAgIFwiQWxjaGVtaWNhbCBGb3JtdWxhXCIsXG4gIFRUOiAgIFwiVHJhdmVsZXIncyBUcmlja1wiLFxufTtcbiAgXG4gIGZ1bmN0aW9uIHJlbmRlckVudHJpZXMoZW50cmllczogYW55W10pOiBzdHJpbmcge1xuICAgIHJldHVybiBlbnRyaWVzLm1hcCgoZW50cnkpID0+IHtcbiAgICAgIGlmICh0eXBlb2YgZW50cnkgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgcmV0dXJuIHJlcGxhY2U1ZVRhZ3MoZW50cnkpO1xuICAgICAgfVxuICBcbiAgICAgIGlmICh0eXBlb2YgZW50cnkgPT09IFwib2JqZWN0XCIpIHtcbiAgICAgICAgaWYgKGlzVHlwZWRFbnRyeShlbnRyeSkgJiYgZW50cnkudHlwZSA9PT0gXCJyZWZDbGFzc0ZlYXR1cmVcIikge1xuICAgICAgICAgIGNvbnN0IFtuYW1lXSA9IGVudHJ5LmNsYXNzRmVhdHVyZS5zcGxpdChcInxcIik7XG4gICAgICAgICAgcmV0dXJuIGAqU2VlIGZlYXR1cmU6ICoqJHtuYW1lfSoqKmA7XG4gICAgICAgIH1cbiAgXG4gICAgICAgIGlmIChpc1R5cGVkRW50cnkoZW50cnkpICYmIGVudHJ5LnR5cGUgPT09IFwiZW50cmllc1wiKSB7XG4gICAgICAgICAgY29uc3QgaW5uZXIgPSByZW5kZXJFbnRyaWVzKGVudHJ5LmVudHJpZXMgfHwgW10pO1xuICAgICAgICAgIHJldHVybiBgKioke2VudHJ5Lm5hbWV9KipcXG5cXG4ke2lubmVyfWA7XG4gICAgICAgIH1cbiAgXG4gICAgICAgIGlmIChpc1R5cGVkRW50cnkoZW50cnkpICYmIGVudHJ5LnR5cGUgPT09IFwiZW50cmllc1wiKSB7XG4gICAgICAgICAgY29uc3QgaW5uZXIgPSByZW5kZXJFbnRyaWVzKGVudHJ5LmVudHJpZXMgfHwgW10pO1xuICAgICAgICAgIHJldHVybiBgPiAqKiR7ZW50cnkubmFtZX0qKlxcbj5cXG4+ICR7aW5uZXIuc3BsaXQoXCJcXG5cIikuam9pbihcIlxcbj4gXCIpfWA7XG4gICAgICAgIH1cbiAgXG4gICAgICAgIC8vIGZhbGxiYWNrXG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KGVudHJ5LmVudHJpZXMpKSB7XG4gICAgICAgICAgcmV0dXJuIHJlbmRlckVudHJpZXMoZW50cnkuZW50cmllcyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgXG4gICAgICByZXR1cm4gXCJcIjtcbiAgICB9KS5maWx0ZXIoQm9vbGVhbikuam9pbihcIlxcblwiKTtcbiAgfVxuICBcbmV4cG9ydCBmdW5jdGlvbiBwYXJzZUNsYXNzRmlsZShcbiAganNvbjogYW55LFxuICBlZGl0aW9uSWQ6IHN0cmluZyxcbiAgZmlsZU5hbWU6IHN0cmluZyxcbiAgb3B0aW9uYWxGZWF0dXJlczogYW55W11cbik6IFBhcnNlZE1hcmtkb3duRmlsZVtdIHtcbiAgLy8gbWFrZSBlZGl0aW9uSWQgYXZhaWxhYmxlIGZvciBmcm9udG1hdHRlclxuICAoanNvbiBhcyBhbnkpLl9lZGl0aW9uSWQgPSBlZGl0aW9uSWQ7XG5cbiAgLy8gdW53cmFwIHRoZSByZWFsIGNsYXNzIHJlY29yZFxuICBjb25zdCBjbHMgPSBBcnJheS5pc0FycmF5KGpzb24uY2xhc3MpID8ganNvbi5jbGFzc1swXSA6IGpzb247XG4gIC8vIGRlcml2ZSB0aGUgTWFya2Rvd24gZmlsZW5hbWVcbiAgY29uc3QgY2xhc3NOYW1lID1cbiAgICB0eXBlb2YgY2xzLm5hbWUgPT09IFwic3RyaW5nXCJcbiAgICAgID8gY2xzLm5hbWVcbiAgICAgIDogZmlsZU5hbWVcbiAgICAgID8gZmlsZU5hbWUucmVwbGFjZSgvXmNsYXNzLS8sIFwiXCIpLnJlcGxhY2UoL1xcLmpzb24kLywgXCJcIilcbiAgICAgIDogXCJVbmtub3duXCI7XG5cbiAgY29uc3Qgc3ViY2xhc3NGaWxlczogUGFyc2VkTWFya2Rvd25GaWxlW10gPSBbXTtcblxuICBjb25zdCBQUk9GX0JPTlVTX0JZX0xFVkVMID0gW1xuICAgIFwiKzJcIiwgXCIrMlwiLCBcIisyXCIsIFwiKzJcIixcbiAgICBcIiszXCIsIFwiKzNcIiwgXCIrM1wiLCBcIiszXCIsXG4gICAgXCIrNFwiLCBcIis0XCIsIFwiKzRcIiwgXCIrNFwiLFxuICAgIFwiKzVcIiwgXCIrNVwiLCBcIis1XCIsIFwiKzVcIixcbiAgICBcIis2XCIsIFwiKzZcIiwgXCIrNlwiLCBcIis2XCJcbiAgXTtcbiAgXG4gIC8vIG5vcm1hbGl6ZSBoaXRcdTIwMTBkaWNlXG4gIGNvbnN0IGhkTnVtICAgPSBjbHMuaGQ/Lm51bWJlciA/PyAxO1xuICBjb25zdCBoZEZhY2VzID0gY2xzLmhkPy5mYWNlcyAgPz8gNjtcbiAgY29uc3QgaGRTdHIgICA9IGAke2hkTnVtfWQke2hkRmFjZXN9YDtcbiAgY29uc3QgaGRNYXggICA9IGhkTnVtICogaGRGYWNlcztcbiAgY29uc3QgaGRBdmcgICA9IE1hdGguY2VpbCgoaGRGYWNlcyArIDEpIC8gMik7XG5cbmNvbnN0IGJhc2VGTSA9IGJ1aWxkRk0oY2xzLCBDTEFTU19NRVRBX0RFRlMpO1xuY29uc3QgZm0gICAgID0geyAuLi5iYXNlRk0sIGhkOiBoZFN0ciB9O1xuY29uc3QgeWFtbCAgID0gc2VyaWFsaXplRnJvbnRtYXR0ZXIoZm0sIENMQVNTX01FVEFfREVGUyk7XG5cbi8vIDEpIERlY2xhcmUgeW91ciBsaW5lcyBidWZmZXIgaW1tZWRpYXRlbHlcbmNvbnN0IGxpbmVzOiBzdHJpbmdbXSA9IFtdO1xuXG4vLyA0KSBOb3cgY2Fycnkgb24gd2l0aCB0aGUgcmVzdCBvZiB5b3VyIGJvZHlcbmxpbmVzLnB1c2goYCMgJHtjbGFzc05hbWV9YCk7XG5pZiAoY2xzLnNvdXJjZSkgbGluZXMucHVzaChgKipTb3VyY2U6KiogJHtjbHMuc291cmNlfWApO1xubGluZXMucHVzaChgYCk7XG5saW5lcy5wdXNoKGAtLS1gKTtcblxuICAvLyBcdTI1MDBcdTI1MDBcdTI1MDAgSGl0IFBvaW50cyBcdTI1MDBcdTI1MDBcdTI1MDBcbiAgbGluZXMucHVzaChgIyMgSGl0IFBvaW50c2ApO1xuICBsaW5lcy5wdXNoKGAqKkhpdCBEaWNlOioqICR7aGRTdHJ9IHBlciAke2NsYXNzTmFtZX0gbGV2ZWxgKTtcbiAgbGluZXMucHVzaChgKipIaXQgUG9pbnRzIGF0IDFzdCBMZXZlbDoqKiAke2hkTWF4fSArIHlvdXIgQ29uc3RpdHV0aW9uIG1vZGlmaWVyYCk7XG4gIGxpbmVzLnB1c2goXG4gICAgYCoqSGl0IFBvaW50cyBhdCBIaWdoZXIgTGV2ZWxzOioqICR7aGRTdHJ9IChvciAke2hkQXZnfSkgKyB5b3VyIENvbnN0aXR1dGlvbiBtb2RpZmllciBwZXIgbGV2ZWwgYWZ0ZXIgMXN0YFxuICApO1xuXG4vLyBcdTI1MDBcdTI1MDBcdTI1MDAgUHJvZmljaWVuY2llcyBcdTI1MDBcdTI1MDBcdTI1MDBcbmxpbmVzLnB1c2goYGApO1xubGluZXMucHVzaChgLS0tYCk7XG5saW5lcy5wdXNoKGAjIyBQcm9maWNpZW5jaWVzYCk7XG5cbmNvbnN0IHNwID0gY2xzLnN0YXJ0aW5nUHJvZmljaWVuY2llcyA/PyB7fTtcblxuLy8gQXJtb3JcbmlmIChBcnJheS5pc0FycmF5KHNwLmFybW9yKSAmJiBzcC5hcm1vci5sZW5ndGgpIHtcbiAgbGluZXMucHVzaChgLSAqKkFybW9yOioqICR7c3AuYXJtb3Iuam9pbihcIiwgXCIpfWApO1xufVxuXG4vLyBXZWFwb25zXG5jb25zdCB3ZWFwb25MaXN0ID0gdW5pZmllZFdlYXBvblByb2ZzKHNwKTtcbmlmICh3ZWFwb25MaXN0Lmxlbmd0aCkge1xuICBsaW5lcy5wdXNoKGAtICoqV2VhcG9uczoqKiAke3dlYXBvbkxpc3Quam9pbihcIiwgXCIpfWApO1xufVxuXG4vLyBUb29sc1xuY29uc3QgdG9vbExpc3QgPSB1bmlmaWVkVG9vbFByb2ZzKHNwKTtcbmlmICh0b29sTGlzdC5sZW5ndGgpIHtcbiAgbGluZXMucHVzaChgLSAqKlRvb2xzOioqICR7dG9vbExpc3Quam9pbihcIiwgXCIpfWApO1xufVxuXG4vLyBTYXZpbmcgVGhyb3dzXG5jb25zdCBzYXZlcyA9IEFycmF5LmlzQXJyYXkoY2xzLnByb2ZpY2llbmN5KVxuICA/IGNscy5wcm9maWNpZW5jeS5tYXAoKGs6IHN0cmluZykgPT5cbiAgICAgICh7IHN0cjpcIlN0cmVuZ3RoXCIsIGRleDpcIkRleHRlcml0eVwiLCBjb246XCJDb25zdGl0dXRpb25cIixcbiAgICAgICAgIGludDpcIkludGVsbGlnZW5jZVwiLCB3aXM6XCJXaXNkb21cIiwgY2hhOlwiQ2hhcmlzbWFcIiB9W2tdIHx8IGsudG9VcHBlckNhc2UoKSlcbiAgICApXG4gIDogW107XG5pZiAoc2F2ZXMubGVuZ3RoKSB7XG4gIGxpbmVzLnB1c2goYC0gKipTYXZpbmcgVGhyb3dzOioqICR7c2F2ZXMuam9pbihcIiwgXCIpfWApO1xufVxuXG5cbi8vIFx1MjUwMFx1MjUwMFx1MjUwMCBTa2lsbHMgXHUyNTAwXHUyNTAwXHUyNTAwXG57XG4gIC8vIDEpIGdyYWIgd2hhdGV2ZXIgYXJyYXkgaG9sZHMgdGhlIHJhdyBvYmplY3RzL3N0cmluZ3NcbiAgY29uc3QgcmF3U2tpbGxzOiBhbnlbXSA9XG4gICAgQXJyYXkuaXNBcnJheShzcC5za2lsbFByb2ZpY2llbmNpZXMpID8gc3Auc2tpbGxQcm9maWNpZW5jaWVzXG4gICAgOiBBcnJheS5pc0FycmF5KHNwLnNraWxscykgICAgICAgICAgICAgPyBzcC5za2lsbHNcbiAgICA6IEFycmF5LmlzQXJyYXkoc3Auc2tpbGxQcm9mKSAgICAgICAgICA/IHNwLnNraWxsUHJvZlxuICAgIDogW107XG5cbiAgLy8gMikgbG9vayBmb3IgdGhlIFx1MjAxQ2Nob29zZSBOIGZyb20gW1x1MjAyNl1cdTIwMUQgZW50cnlcbiAgY29uc3QgY2hvaWNlRW50cnkgPSByYXdTa2lsbHMuZmluZChcbiAgICBlID0+IGUgJiZcbiAgICAgICAgICh0eXBlb2YgZS5jaG9vc2UgPT09IFwib2JqZWN0XCIgfHwgdHlwZW9mIGUuYW55ID09PSBcIm51bWJlclwiKVxuICApO1xuXG4gIGlmIChjaG9pY2VFbnRyeSkge1xuICAgIC8vIGhvdyBtYW55IHRvIGNob29zZVxuICAgIGNvbnN0IGNvdW50ID0gY2hvaWNlRW50cnkuY2hvb3NlPy5jb3VudCA/PyBjaG9pY2VFbnRyeS5hbnkgPz8gMTtcblxuICAgIC8vIHB1bGwgdGhlIGFjdHVhbCBsaXN0IG9mIG9wdGlvbnMsIG9yIGZhbGwgYmFjayB0byB0aGUgZ2xvYmFsIFNLSUxMX09QVElPTlNcbiAgICBjb25zdCBvcHRpb25zOiBzdHJpbmdbXSA9IEFycmF5LmlzQXJyYXkoY2hvaWNlRW50cnkuY2hvb3NlPy5mcm9tKVxuICAgICAgPyBjaG9pY2VFbnRyeS5jaG9vc2UuZnJvbS5tYXAoKHM6IHN0cmluZykgPT5cbiAgICAgICAgICAvLyB0aXRsZS1jYXNlIGVhY2ggd29yZCAob3IganVzdCB1c2UgcylcbiAgICAgICAgICBzLnNwbGl0KFwiIFwiKS5tYXAodyA9PiB3WzBdLnRvVXBwZXJDYXNlKCkgKyB3LnNsaWNlKDEpKS5qb2luKFwiIFwiKVxuICAgICAgICApXG4gICAgICA6IFNLSUxMX09QVElPTlM7XG5cbiAgICBsaW5lcy5wdXNoKGAtICoqU2tpbGxzIChDaG9vc2UgJHtjb3VudH0pOioqICR7b3B0aW9ucy5qb2luKFwiLCBcIil9YCk7XG5cbiAgfSBlbHNlIHtcbiAgICAvLyBubyBjaG9vc2UtZnJvbSBvYmplY3QgXHUyMTkyIGZsYXQgbGlzdCBmcm9tIHlvdXIgdW5pZmllZCBoZWxwZXJcbiAgICBjb25zdCBmbGF0ID0gdW5pZmllZFNraWxscyhzcCk7XG4gICAgaWYgKGZsYXQubGVuZ3RoKSB7XG4gICAgICBsaW5lcy5wdXNoKGAtICoqU2tpbGxzOioqICR7ZmxhdC5qb2luKFwiLCBcIil9YCk7XG4gICAgfVxuICB9XG59XG5cblxuXG4gIC8vIFx1MjUwMFx1MjUwMFx1MjUwMCBFcXVpcG1lbnQgXHUyNTAwXHUyNTAwXHUyNTAwXG4gIGlmIChBcnJheS5pc0FycmF5KGNscy5zdGFydGluZ0VxdWlwbWVudCkpIHtcbiAgICBsaW5lcy5wdXNoKGBcXG4jIyMgRXF1aXBtZW50YCk7XG4gICAgY2xzLnN0YXJ0aW5nRXF1aXBtZW50XG4gICAgICAuZmlsdGVyKChlOiBhbnkpID0+IHR5cGVvZiBlID09PSBcInN0cmluZ1wiKVxuICAgICAgLmZvckVhY2goKGl0ZW06IHN0cmluZykgPT4gbGluZXMucHVzaChgLSAke2l0ZW19YCkpO1xuICB9XG5cbi8vIFx1MjUwMFx1MjUwMFx1MjUwMCBDbGFzcyBQcm9ncmVzc2lvbiBcdTI1MDBcdTI1MDBcdTI1MDBcbmNvbnN0IHByb2dHcm91cHMgPSBjbHMuY2xhc3NUYWJsZUdyb3VwcyA/PyBbXTtcbmNvbnN0IG1heExldmVsID0gMjA7XG5cbmlmICghcHJvZ0dyb3Vwcy5sZW5ndGgpIHtcbiAgbGluZXMucHVzaChgKihObyBjbGFzcyB0YWJsZSBwcm92aWRlZCBmb3IgdGhpcyBjbGFzcy4pKmApO1xufSBlbHNlIHtcbiAgLy8gMSkgQnVpbGQgbGV2ZWwgXHUyMTkyIGZlYXR1cmUgbWFwXG4gIGNvbnN0IGZlYXR1cmVzQnlMZXZlbDogUmVjb3JkPG51bWJlciwgc3RyaW5nW10+ID0ge307XG4gIGZvciAoY29uc3QgZmVhdCBvZiBjbHMuY2xhc3NGZWF0dXJlcyA/PyBbXSkge1xuICAgIGNvbnN0IHJhdyA9IHR5cGVvZiBmZWF0ID09PSBcIm9iamVjdFwiICYmIGZlYXQuY2xhc3NGZWF0dXJlID8gZmVhdC5jbGFzc0ZlYXR1cmUgOiBTdHJpbmcoZmVhdCk7XG4gICAgY29uc3QgW25hbWUsLCAsbHZsU3RyXSA9IHJhdy5zcGxpdChcInxcIik7XG4gICAgY29uc3QgbHZsID0gTnVtYmVyKGx2bFN0ciA/PyAwKTtcbiAgICBpZiAoIWZlYXR1cmVzQnlMZXZlbFtsdmxdKSBmZWF0dXJlc0J5TGV2ZWxbbHZsXSA9IFtdO1xuICAgIGZlYXR1cmVzQnlMZXZlbFtsdmxdLnB1c2gobmFtZSk7XG4gIH1cblxuICAvLyAyKSBHYXRoZXIgZXZlcnkgY29sdW1uIGxhYmVsICYgcm93IHZhbHVlXG4gIGNvbnN0IGFsbExhYmVsc1NldCA9IG5ldyBTZXQ8c3RyaW5nPigpO1xuICBjb25zdCByb3dNYXBzOiBSZWNvcmQ8bnVtYmVyLCBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+PiA9IHt9O1xuXG4gIGZvciAoY29uc3QgZ3JvdXAgb2YgcHJvZ0dyb3Vwcykge1xuICAgIGNvbnN0IGxhYmVscyA9IEFycmF5LmlzQXJyYXkoZ3JvdXAuY29sTGFiZWxzKVxuICAgICAgPyBncm91cC5jb2xMYWJlbHMubWFwKChsOiBzdHJpbmcpID0+IHJlcGxhY2U1ZVRhZ3MobCkpXG4gICAgICA6IFtdO1xuICAgIGNvbnN0IHJvd3MgPSBBcnJheS5pc0FycmF5KGdyb3VwLnJvd3MpXG4gICAgICA/IGdyb3VwLnJvd3NcbiAgICAgIDogQXJyYXkuaXNBcnJheShncm91cC5yb3dzU3BlbGxQcm9ncmVzc2lvbilcbiAgICAgICAgPyBncm91cC5yb3dzU3BlbGxQcm9ncmVzc2lvblxuICAgICAgICA6IFtdO1xuXG4gICAgaWYgKCFsYWJlbHMubGVuZ3RoIHx8ICFyb3dzLmxlbmd0aCkgY29udGludWU7XG5cbiAgICBmb3IgKGxldCBsdmwgPSAwOyBsdmwgPCByb3dzLmxlbmd0aDsgbHZsKyspIHtcbiAgICAgIGNvbnN0IGxldmVsTnVtID0gbHZsICsgMTtcbiAgICAgIGlmICghcm93TWFwc1tsZXZlbE51bV0pIHJvd01hcHNbbGV2ZWxOdW1dID0ge307XG4gICAgICBjb25zdCByb3dNYXAgPSByb3dNYXBzW2xldmVsTnVtXTtcbiAgICAgIGNvbnN0IGNlbGxzID0gcm93c1tsdmxdO1xuXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxhYmVscy5sZW5ndGg7IGkrKykge1xuICAgICAgICBjb25zdCBsYWJlbCA9IGxhYmVsc1tpXTtcbiAgICAgICAgbGV0IHZhbCA9IFwiXCI7XG4gICAgICAgIGNvbnN0IGNlbGwgPSBjZWxsc1tpXTtcblxuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShjZWxsKSkge1xuICAgICAgICAgIHZhbCA9IGNlbGwuam9pbihcIiwgXCIpO1xuICAgICAgICB9IGVsc2UgaWYgKGNlbGwgJiYgdHlwZW9mIGNlbGwgPT09IFwib2JqZWN0XCIgJiYgXCJ2YWx1ZVwiIGluIGNlbGwpIHtcbiAgICAgICAgICB2YWwgPSBTdHJpbmcoY2VsbC52YWx1ZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdmFsID0gU3RyaW5nKGNlbGwgPz8gXCJcIik7XG4gICAgICAgIH1cblxuICAgICAgICBhbGxMYWJlbHNTZXQuYWRkKGxhYmVsKTtcbiAgICAgICAgcm93TWFwW2xhYmVsXSA9IHZhbDtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvLyAzKSAqKkZpbHRlciBvdXQqKiBhbnkgc3BlbGxcdTIwMTB0YWJsZSBjb2x1bW5zXG4gIGNvbnN0IGFsbExhYmVscyA9IEFycmF5LmZyb20oYWxsTGFiZWxzU2V0KS5maWx0ZXIobGJsID0+XG4gICAgIS9DYW50cmlwcyBLbm93bnxTcGVsbHMgS25vd258XFxkKyhzdHxuZHxyZHx0aCkvLnRlc3QobGJsKVxuICApO1xuXG4gIC8vIDQpIEJ1aWxkIGZpbmFsIGhlYWRlciAmIHJvd3NcbiAgY29uc3QgbWVyZ2VkTGFiZWxzID0gW1wiTGV2ZWxcIiwgXCJQcm9maWNpZW5jeSBCb251c1wiLCBcIkNsYXNzIEZlYXR1cmVzXCIsIC4uLmFsbExhYmVsc107XG4gIGNvbnN0IG1lcmdlZFJvd3M6IHN0cmluZ1tdW10gPSBbXTtcblxuICBmb3IgKGxldCBsdmwgPSAxOyBsdmwgPD0gbWF4TGV2ZWw7IGx2bCsrKSB7XG4gICAgY29uc3QgZmVhdHVyZUxpc3QgPSAoZmVhdHVyZXNCeUxldmVsW2x2bF0gPz8gW10pLm1hcChmb3JtYXRGZWF0dXJlTGluayk7XG4gICAgY29uc3Qgcm93TWFwID0gcm93TWFwc1tsdmxdID8/IHt9O1xuXG4gICAgbWVyZ2VkUm93cy5wdXNoKFtcbiAgICAgIGx2bC50b1N0cmluZygpLFxuICAgICAgUFJPRl9CT05VU19CWV9MRVZFTFtsdmwgLSAxXSB8fCBcIlwiLFxuICAgICAgZmVhdHVyZUxpc3Quam9pbihcIiwgXCIpLnJlcGxhY2UoL1xcfC9nLCBcIiYjMTI0O1wiKSxcbiAgICAgIC4uLmFsbExhYmVscy5tYXAobGFiZWwgPT4gcm93TWFwW2xhYmVsXSA/PyBcIlwiKVxuICAgIF0pO1xuICB9XG5cbiAgLy8gNSkgUmVuZGVyIHRoZSBmZWF0dXJlc1x1MjAxMG9ubHkgdGFibGVcbmxpbmVzLnB1c2goYFxcbj4gWyFleGFtcGxlXS0gQ2xhc3MgUHJvZ3Jlc3Npb24gVGFibGVgKTtcbmxpbmVzLnB1c2goXG4gIHJlbmRlck1hcmtkb3duVGFibGUoe1xuICAgIHR5cGU6ICAgICAgXCJ0YWJsZVwiLFxuICAgIGNhcHRpb246ICAgXCJcIixcbiAgICBjb2xMYWJlbHM6IG1lcmdlZExhYmVscyxcbiAgICByb3dzOiAgICAgIG1lcmdlZFJvd3MsXG4gIH0pKTtcbn1cblxuLy8gXHUyNTAwXHUyNTAwXHUyNTAwIFNwZWxsIFByb2dyZXNzaW9uIFx1MjUwMFx1MjUwMFx1MjUwMFxuLy8gMSkgZmluZCB0aGUgdHdvIGdyb3Vwc1xuY29uc3QgY3NHcm91cCA9IHByb2dHcm91cHMuZmluZCgoZzogYW55KSA9PlxuICBBcnJheS5pc0FycmF5KGcuY29sTGFiZWxzKSAmJlxuICBnLmNvbExhYmVscy5zb21lKChsYmw6IGFueSkgPT4gL0NhbnRyaXBzIEtub3dufFNwZWxscyBLbm93bi8udGVzdChTdHJpbmcobGJsKSkpXG4pO1xuY29uc3Qgc2xvdEdyb3VwID0gcHJvZ0dyb3Vwcy5maW5kKChnOiBhbnkpID0+XG4gIEFycmF5LmlzQXJyYXkoZy5jb2xMYWJlbHMpICYmXG4gIGcudGl0bGUgPT09IFwiU3BlbGwgU2xvdHMgcGVyIFNwZWxsIExldmVsXCJcbik7XG5cbmlmIChjc0dyb3VwICYmIHNsb3RHcm91cCkge1xuICAvLyAyKSByYXcgbGFiZWxzXG4gIGNvbnN0IGNzTGFiZWxzICAgPSAoY3NHcm91cC5jb2xMYWJlbHMgYXMgc3RyaW5nW10pLm1hcChsID0+IHJlcGxhY2U1ZVRhZ3MobCkpO1xuICBjb25zdCBzbG90TGFiZWxzID0gKHNsb3RHcm91cC5jb2xMYWJlbHMgYXMgc3RyaW5nW10pLm1hcChsID0+IHJlcGxhY2U1ZVRhZ3MobCkpO1xuXG4gIC8vIDMpIHJhdyByb3dzXG4gIGNvbnN0IGNzUm93cyAgID0gKGNzR3JvdXAucm93cyAgICAgIGFzIGFueVtdW10pICAgICAgICAgICAgICB8fCBbXTtcbiAgY29uc3Qgc2xvdFJvd3MgPSAoc2xvdEdyb3VwLnJvd3NTcGVsbFByb2dyZXNzaW9uIGFzIGFueVtdW10pIHx8IFtdO1xuXG4gIC8vIDQpIGJ1aWxkIGhlYWRlcjogTGV2ZWwgKyBjYW50cmlwcy9zcGVsbHMgKyBlYWNoIHNsb3QgbGV2ZWxcbiAgY29uc3QgY29sTGFiZWxzID0gW1wiTGV2ZWxcIiwgLi4uY3NMYWJlbHMsIC4uLnNsb3RMYWJlbHNdO1xuXG4gIC8vIDUpIGJ1aWxkIGVhY2ggcm93IGJ5IHppcHBpbmcgY3NSb3dzW2ldICsgc2xvdFJvd3NbaV1cbiAgY29uc3Qgc3BlbGxSb3dzOiBzdHJpbmdbXVtdID0gW107XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgTWF0aC5tYXgoY3NSb3dzLmxlbmd0aCwgc2xvdFJvd3MubGVuZ3RoKTsgaSsrKSB7XG4gICAgY29uc3QgbHZsID0gU3RyaW5nKGkgKyAxKTtcbiAgICBjb25zdCBjc0NlbGxzICAgPSBjc1Jvd3NbaV0gICA/IGNzUm93c1tpXS5tYXAoU3RyaW5nKSAgIDogY3NMYWJlbHMubWFwKF8gPT4gXCJcIik7XG4gICAgY29uc3Qgc2xvdENlbGxzID0gc2xvdFJvd3NbaV0gPyBzbG90Um93c1tpXS5tYXAoU3RyaW5nKSA6IHNsb3RMYWJlbHMubWFwKF8gPT4gXCJcIik7XG4gICAgc3BlbGxSb3dzLnB1c2goW2x2bCwgLi4uY3NDZWxscywgLi4uc2xvdENlbGxzXSk7XG4gIH1cblxuICAvLyA2KSByZW5kZXIhXG4gIGxpbmVzLnB1c2goYFxcbj4gWyF0aXBdLSBTcGVsbCBQcm9ncmVzc2lvbiBUYWJsZWApO1xuICBsaW5lcy5wdXNoKFxuICAgIHJlbmRlck1hcmtkb3duVGFibGUoe1xuICAgICAgdHlwZTogICAgICBcInRhYmxlXCIsXG4gICAgICBjYXB0aW9uOiAgIFwiXCIsXG4gICAgICBjb2xMYWJlbHM6IGNvbExhYmVscyxcbiAgICAgIHJvd3M6ICAgICAgc3BlbGxSb3dzLFxuICB9KSk7XG59XG5cblxuLy8gXHUyNTAwXHUyNTAwXHUyNTAwIFN1YmNsYXNzZXMgXHUyNTAwXHUyNTAwXHUyNTAwXG5jb25zdCBzdWJzID0gQXJyYXkuaXNBcnJheShqc29uLnN1YmNsYXNzKSA/IGpzb24uc3ViY2xhc3MgOiBbXTtcbmNvbnN0IHN1YmNsYXNzRmVhdHVyZXMgPSBBcnJheS5pc0FycmF5KGpzb24uc3ViY2xhc3NGZWF0dXJlKVxuICA/IGpzb24uc3ViY2xhc3NGZWF0dXJlXG4gIDoganNvbi5sb29rdXA/LnN1YmNsYXNzRmVhdHVyZSA/PyBbXTtcblxuZm9yIChjb25zdCBzYyBvZiBzdWJzKSB7XG4gIGNvbnN0IHN1YmNsYXNzTmFtZSA9IHNjLm5hbWU7XG4gIGNvbnN0IHN1YkxpbmVzOiBzdHJpbmdbXSA9IFtdO1xuXG4gIC8vIFx1MjUwMFx1MjUwMFx1MjUwMCBIZWFkZXIgbWV0YWRhdGEgXHUyNTAwXHUyNTAwXHUyNTAwXG4gIHN1YkxpbmVzLnB1c2goYCMgJHtzdWJjbGFzc05hbWV9YCk7XG4gIHN1YkxpbmVzLnB1c2goYCoqUGFyZW50IENsYXNzOioqIFtbJHtjbGFzc05hbWV9XV1gKTtcbiAgaWYgKHNjLnNvdXJjZSkgc3ViTGluZXMucHVzaChgKipTb3VyY2U6KiogJHtzYy5zb3VyY2V9YCk7XG4gIHN1YkxpbmVzLnB1c2goYGApOyAvLyBibGFuayBsaW5lXG5cbiAgLy8gXHUyNTAwXHUyNTAwXHUyNTAwIEludHJvIGVudHJ5IChsZXZlbCAzIGZlYXR1cmUgZGVzY3JpcHRpb24pIFx1MjUwMFx1MjUwMFx1MjUwMFxuICBjb25zdCBpbnRybyA9IHN1YmNsYXNzRmVhdHVyZXMuZmluZCgoZjogYW55KSA9PlxuICAgIGYubmFtZSA9PT0gc2MubmFtZSAmJlxuICAgIGYubGV2ZWwgPT09IDMgJiZcbiAgICBmLnN1YmNsYXNzU2hvcnROYW1lID09PSBzYy5zaG9ydE5hbWUgJiZcbiAgICBmLnN1YmNsYXNzU291cmNlID09PSBzYy5zb3VyY2VcbiAgKTtcbiAgaWYgKGludHJvPy5lbnRyaWVzPy5sZW5ndGgpIHtcbiAgICBjb25zdCBpbnRyb1RleHQgPSBBcnJheS5pc0FycmF5KGludHJvLmVudHJpZXMpXG4gICAgICA/IGludHJvLmVudHJpZXMubWFwKChlOiBhbnkpID0+XG4gICAgICAgICAgdHlwZW9mIGUgPT09IFwic3RyaW5nXCIgPyByZXBsYWNlNWVUYWdzKGUpIDogZm9ybWF0RW50cnkoZSlcbiAgICAgICAgKS5qb2luKFwiXFxuXFxuXCIpXG4gICAgICA6IGZvcm1hdEVudHJ5KGludHJvLmVudHJpZXMpO1xuICAgIHN1YkxpbmVzLnB1c2goaW50cm9UZXh0LCBgYCk7XG4gIH1cblxuICAvLyBcdTI1MDBcdTI1MDBcdTI1MDAgT3B0aW9uYWxcdTIwMTBmZWF0dXJlIGJsb2NrIFx1MjUwMFx1MjUwMFx1MjUwMFxuICBjb25zdCBjb2RlID0gKE9iamVjdC5lbnRyaWVzKE9QVF9GRUFUVVJFX1RZUEVfVE9fRlVMTCkgYXMgW3N0cmluZyxzdHJpbmddW10pXG4gICAgLmZpbmQoKFssIGZ1bGxdKSA9PlxuICAgICAgZnVsbC50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKHN1YmNsYXNzTmFtZS50b0xvd2VyQ2FzZSgpKVxuICAgICk/LlswXTtcbiAgaWYgKGNvZGUpIHtcbiAgICBjb25zdCBtYXRjaGVzID0gb3B0aW9uYWxGZWF0dXJlcy5maWx0ZXIob2YgPT5cbiAgICAgIEFycmF5LmlzQXJyYXkob2YuZmVhdHVyZVR5cGUpICYmIG9mLmZlYXR1cmVUeXBlLmluY2x1ZGVzKGNvZGUpXG4gICAgKTtcbiAgICBpZiAobWF0Y2hlcy5sZW5ndGgpIHtcbiAgICAgIHN1YkxpbmVzLnB1c2goYCMjICR7c3ViY2xhc3NOYW1lfSBPcHRpb25hbCBGZWF0dXJlc2ApO1xuICAgICAgZm9yIChjb25zdCBmZWF0IG9mIG1hdGNoZXMpIHtcbiAgICAgICAgZm9yIChjb25zdCBlbnRyeSBvZiBmZWF0LmVudHJpZXMpIHtcbiAgICAgICAgICBjb25zdCB0eHQgPSB0eXBlb2YgZW50cnkgPT09IFwic3RyaW5nXCJcbiAgICAgICAgICAgID8gcmVwbGFjZTVlVGFncyhlbnRyeSlcbiAgICAgICAgICAgIDogZm9ybWF0RW50cnkoZW50cnkpO1xuICAgICAgICAgIHN1YkxpbmVzLnB1c2goYCoqJHtmZWF0Lm5hbWV9OioqICR7dHh0fWApO1xuICAgICAgICB9XG4gICAgICAgIHN1YkxpbmVzLnB1c2goYGApO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8vIFx1MjUwMFx1MjUwMFx1MjUwMCBTdWJjbGFzcyBwcm9ncmVzc2lvbiB0YWJsZSBcdTI1MDBcdTI1MDBcdTI1MDBcbiAgY29uc3QgcHJvZyA9IHNjLnN1YmNsYXNzVGFibGVHcm91cHMgPz8gW107XG4gIGlmIChwcm9nLmxlbmd0aCkge1xuICAgIGNvbnN0IGxhYmVscyA9IG5ldyBTZXQ8c3RyaW5nPigpO1xuICAgIGNvbnN0IHJvd3NNYXA6IFJlY29yZDxudW1iZXIsIFJlY29yZDxzdHJpbmcsc3RyaW5nPj4gPSB7fTtcbiAgICBmb3IgKGNvbnN0IGcgb2YgcHJvZykge1xuICAgICAgY29uc3QgY29scyA9IChnLmNvbExhYmVscyA/PyBbXSkubWFwKHJlcGxhY2U1ZVRhZ3MpO1xuICAgICAgY29uc3Qgcm93cyA9IEFycmF5LmlzQXJyYXkoZy5yb3dzKVxuICAgICAgICA/IGcucm93c1xuICAgICAgICA6IEFycmF5LmlzQXJyYXkoZy5yb3dzU3BlbGxQcm9ncmVzc2lvbilcbiAgICAgICAgICA/IGcucm93c1NwZWxsUHJvZ3Jlc3Npb25cbiAgICAgICAgICA6IFtdO1xuICAgICAgcm93cy5mb3JFYWNoKChyOiBhbnksIGk6IGFueSkgPT4ge1xuICAgICAgICBjb25zdCBsdmwgPSBpICsgMTtcbiAgICAgICAgcm93c01hcFtsdmxdID8/PSB7fTtcbiAgICAgICAgci5mb3JFYWNoKChjOiBhbnksIGo6IG51bWJlcikgPT4ge1xuICAgICAgICAgIGNvbnN0IGxhYiA9IGNvbHNbal07XG4gICAgICAgICAgaWYgKCFsYWIpIHJldHVybjtcbiAgICAgICAgICBsYWJlbHMuYWRkKGxhYik7XG4gICAgICAgICAgcm93c01hcFtsdmxdW2xhYl0gPSB0eXBlb2YgYyA9PT0gXCJvYmplY3RcIiAmJiBjICE9PSBudWxsICYmIFwidmFsdWVcIiBpbiBjXG4gICAgICAgICAgICA/IFN0cmluZyhjLnZhbHVlKVxuICAgICAgICAgICAgOiBTdHJpbmcoYyA/PyBcIlwiKTtcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9XG4gICAgY29uc3QgaGRycyA9IEFycmF5LmZyb20obGFiZWxzKTtcbiAgICBzdWJMaW5lcy5wdXNoKGAjIyBTdWJjbGFzcyBQcm9ncmVzc2lvbmApO1xuICAgIHN1YkxpbmVzLnB1c2gocmVuZGVyTWFya2Rvd25UYWJsZSh7XG4gICAgICB0eXBlOiAgICAgIFwidGFibGVcIixcbiAgICAgIGNhcHRpb246ICAgXCJcIixcbiAgICAgIGNvbExhYmVsczogW1wiTGV2ZWxcIiwgLi4uaGRyc10sXG4gICAgICByb3dzOiAgICAgIEFycmF5LmZyb20oeyBsZW5ndGg6IDIwIH0sIChfLCBpKSA9PiB7XG4gICAgICAgIGNvbnN0IGx2bCA9IGkgKyAxO1xuICAgICAgICByZXR1cm4gW1N0cmluZyhsdmwpLCAuLi5oZHJzLm1hcChoID0+IHJvd3NNYXBbbHZsXT8uW2hdID8/IFwiXCIpXTtcbiAgICAgIH0pXG4gICAgfSkpO1xuICB9XG5cbi8vIFx1MjUwMFx1MjUwMFx1MjUwMCBEZXRhaWxlZCBsZXZlbFx1MjAxMGJ5XHUyMDEwbGV2ZWwgZmVhdHVyZXMgXHUyNTAwXHUyNTAwXHUyNTAwXG5jb25zdCBmZWF0c0J5THZsOiBSZWNvcmQ8bnVtYmVyLCBhbnlbXT4gPSB7fTtcbmZvciAoY29uc3QgZiBvZiBzdWJjbGFzc0ZlYXR1cmVzKSB7XG4gIGlmIChcbiAgICBmLnN1YmNsYXNzU2hvcnROYW1lID09PSBzYy5zaG9ydE5hbWUgJiZcbiAgICBmLnN1YmNsYXNzU291cmNlID09PSBzYy5zb3VyY2UgJiZcbiAgICBmLmNsYXNzTmFtZSA9PT0gY2xhc3NOYW1lXG4gICkge1xuICAgIGNvbnN0IGx2bCA9IGYubGV2ZWwgPz8gMDtcbiAgICA7KGZlYXRzQnlMdmxbbHZsXSA/Pz0gW10pLnB1c2goZik7XG4gIH1cbn1cblxuZm9yIChjb25zdCBsdmwgb2YgT2JqZWN0LmtleXMoZmVhdHNCeUx2bCkubWFwKE51bWJlcikuc29ydCgoYSxiKT0+YS1iKSkge1xuICBzdWJMaW5lcy5wdXNoKGAtLS1gLCBgIyMgTGV2ZWwgJHtsdmx9YCk7XG5cbiAgZm9yIChjb25zdCBmIG9mIGZlYXRzQnlMdmxbbHZsXSkge1xuICBzdWJMaW5lcy5wdXNoKGAjIyMgJHtmLm5hbWV9YCk7XG5cbiAgLy8gV2FsayBlYWNoIGVudHJ5IGZvciB0aGlzIGZlYXR1cmVcbiAgZm9yIChjb25zdCBlbnQgb2YgQXJyYXkuaXNBcnJheShmLmVudHJpZXMpID8gZi5lbnRyaWVzIDogW2YuZW50cmllc10pIHtcbiAgICAvLyAxKSBQbGFpbiBwYXJhZ3JhcGggZW50cmllc1xuICAgIGlmICh0eXBlb2YgZW50ID09PSBcInN0cmluZ1wiKSB7XG4gICAgICBzdWJMaW5lcy5wdXNoKHJlcGxhY2U1ZVRhZ3MoZW50KSk7XG4gICAgICBjb250aW51ZTtcbiAgICB9XG5cbiAgICAvLyAyKSBJZiBpdCdzIHRoZSBcIk1hbmV1dmVyc1wiIGVudHJpZXNcdTIwMTBibG9jaywgaW5qZWN0IHlvdXIgbGlzdCBoZXJlXG4gICAgaWYgKGlzVHlwZWRFbnRyeShlbnQpICYmIGVudC50eXBlID09PSBcImVudHJpZXNcIiAmJiAvXk1hbmV1dmVycyQvaS50ZXN0KGVudC5uYW1lKSkge1xuICAgICAgLy8gZmlyc3QgcHJpbnQgdGhlIHN1Ylx1MjAxMGhlYWRpbmcgYW5kIGFueSB0ZXh0IGl0IGhhZFxuICAgICAgc3ViTGluZXMucHVzaChgIyMjIyMgJHtlbnQubmFtZX1gKTtcbiAgICAgIGZvciAoY29uc3QgdHh0IG9mIEFycmF5LmlzQXJyYXkoZW50LmVudHJpZXMpID8gZW50LmVudHJpZXMgOiBbZW50LmVudHJpZXNdKSB7XG4gICAgICAgIHN1YkxpbmVzLnB1c2godHlwZW9mIHR4dCA9PT0gXCJzdHJpbmdcIlxuICAgICAgICAgID8gcmVwbGFjZTVlVGFncyh0eHQpXG4gICAgICAgICAgOiBmb3JtYXRFbnRyeSh0eHQpKTtcbiAgICAgIH1cblxuICAgICAgLy8gbm93IGluamVjdCB0aGUgZnVsbCBtYW5ldXZlciBkZWZpbml0aW9ucyBmb3IgdGhpcyBzdWJjbGFzc1xuICAgICAgY29uc3QgY29kZSA9IChPYmplY3QuZW50cmllcyhPUFRfRkVBVFVSRV9UWVBFX1RPX0ZVTEwpIGFzIFtzdHJpbmcsc3RyaW5nXVtdKVxuICAgICAgICAuZmluZCgoWywgZnVsbF0pID0+XG4gICAgICAgICAgZnVsbC50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKHN1YmNsYXNzTmFtZS50b0xvd2VyQ2FzZSgpKVxuICAgICAgICApPy5bMF07XG4gICAgICBpZiAoY29kZSkge1xuICAgICAgICBjb25zdCBtYXRjaGVzID0gb3B0aW9uYWxGZWF0dXJlcy5maWx0ZXIob2YgPT5cbiAgICAgICAgICBBcnJheS5pc0FycmF5KG9mLmZlYXR1cmVUeXBlKSAmJiBvZi5mZWF0dXJlVHlwZS5pbmNsdWRlcyhjb2RlKVxuICAgICAgICApO1xuICAgICAgICBmb3IgKGNvbnN0IGZlYXREZWYgb2YgbWF0Y2hlcykge1xuICAgICAgICAgIGZvciAoY29uc3Qgc3ViIG9mIGZlYXREZWYuZW50cmllcykge1xuICAgICAgICAgICAgY29uc3QgbGluZSA9IHR5cGVvZiBzdWIgPT09IFwic3RyaW5nXCJcbiAgICAgICAgICAgICAgPyByZXBsYWNlNWVUYWdzKHN1YilcbiAgICAgICAgICAgICAgOiBmb3JtYXRFbnRyeShzdWIpO1xuICAgICAgICAgICAgc3ViTGluZXMucHVzaChgKioke2ZlYXREZWYubmFtZX06KiogJHtsaW5lfWApO1xuICAgICAgICAgIH1cbiAgICAgICAgICBzdWJMaW5lcy5wdXNoKFwiXCIpOyAvLyBzcGFjZXJcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgY29udGludWU7XG4gICAgfVxuXG4gICAgLy8gMykgQW55IG90aGVyIG5lc3RlZCBcImVudHJpZXNcIiBibG9ja3NcbiAgICBpZiAoaXNUeXBlZEVudHJ5KGVudCkgJiYgZW50LnR5cGUgPT09IFwiZW50cmllc1wiICYmIGVudC5uYW1lKSB7XG4gICAgICBzdWJMaW5lcy5wdXNoKGAjIyMjIyAke2VudC5uYW1lfWApO1xuICAgICAgZm9yIChjb25zdCBlMiBvZiBBcnJheS5pc0FycmF5KGVudC5lbnRyaWVzKSA/IGVudC5lbnRyaWVzIDogW2VudC5lbnRyaWVzXSkge1xuICAgICAgICBzdWJMaW5lcy5wdXNoKGZvcm1hdEVudHJ5KGUyKSk7XG4gICAgICB9XG4gICAgICBjb250aW51ZTtcbiAgICB9XG5cbiAgICAvLyA0KSBJbnNldHNcbiAgICBpZiAoaXNUeXBlZEVudHJ5KGVudCkgJiYgZW50LnR5cGUgPT09IFwiaW5zZXRcIiAmJiBlbnQubmFtZSkge1xuICAgICAgY29uc3QgaW5uZXIgPSBBcnJheS5pc0FycmF5KGVudC5lbnRyaWVzKSA/IGVudC5lbnRyaWVzIDogW2VudC5lbnRyaWVzXTtcbiAgICAgIHN1YkxpbmVzLnB1c2goYD4gKioke2VudC5uYW1lfSoqYCk7XG4gICAgICBpbm5lci5mb3JFYWNoKChlMjogYW55KSA9PiBzdWJMaW5lcy5wdXNoKGA+ICR7Zm9ybWF0RW50cnkoZTIpfWApKTtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cblxuICAgIC8vIDUpIEZhbGxiYWNrXG4gICAgY29uc3QgZmIgPSBmb3JtYXRFbnRyeShlbnQpO1xuICAgIGlmIChmYikgc3ViTGluZXMucHVzaChmYik7XG4gIH1cbiAgfVxufVxuXG5cbiAgLy8gXHUyNTAwXHUyNTAwXHUyNTAwIENsZWFuIHVwICYgcHVzaCBcdTI1MDBcdTI1MDBcdTI1MDBcbiAgY29uc3Qgc3ViY2xhc3NDb250ZW50ID0gc3ViTGluZXNcbiAgICAuam9pbihcIlxcblxcblwiKVxuICAgIC5yZXBsYWNlKC9cXG57Myx9L2csIFwiXFxuXFxuXCIpO1xuICBzdWJjbGFzc0ZpbGVzLnB1c2goe1xuICAgIHBhdGg6IGBDbGFzc2VzLyR7Y2xhc3NOYW1lfS9TdWJjbGFzc2VzLyR7c3ViY2xhc3NOYW1lfS5tZGAsXG4gICAgY29udGVudDogc3ViY2xhc3NDb250ZW50XG4gIH0pO1xufVxuXG5cblxuLy8gXHUyNTAwXHUyNTAwXHUyNTAwIFN1YmNsYXNzZXMgU3VtbWFyeSBcdTI1MDBcdTI1MDBcdTI1MDBcbmlmIChzdWJzLmxlbmd0aCkge1xuICBjb25zdCBsaW5rcyA9IHN1YnMubWFwKChzYzogYW55KSA9PlxuICAgIGBbW1N1YmNsYXNzZXMvJHtzYy5uYW1lLnJlcGxhY2UoL1tcXFxcL10vZywgXCItXCIpfXwke3NjLm5hbWV9XV1gXG4gICk7XG4gIGxpbmVzLnB1c2goYFxcbioqU3ViY2xhc3NlczoqKiAke2xpbmtzLmpvaW4oXCIsIFwiKX1gKTtcbn1cblxuXG4gIC8vIEdldCBmdWxsIGNsYXNzIGZlYXR1cmUgZGVmaW5pdGlvbnNcbmNvbnN0IGFsbEZlYXR1cmVzID0gQXJyYXkuaXNBcnJheShqc29uLmNsYXNzRmVhdHVyZSkgPyBqc29uLmNsYXNzRmVhdHVyZSA6IGpzb24ubG9va3VwPy5jbGFzc0ZlYXR1cmUgPz8gW107XG5jb25zdCBmZWF0dXJlc0J5TGV2ZWw6IFJlY29yZDxudW1iZXIsIGFueVtdPiA9IHt9O1xuXG5mb3IgKGNvbnN0IGVudHJ5IG9mIGFsbEZlYXR1cmVzKSB7XG4gIGlmIChlbnRyeS5jbGFzc05hbWUgIT09IGNsYXNzTmFtZSkgY29udGludWU7XG4gIGNvbnN0IGx2bCA9IGVudHJ5LmxldmVsID8/IDA7XG4gIGlmICghZmVhdHVyZXNCeUxldmVsW2x2bF0pIGZlYXR1cmVzQnlMZXZlbFtsdmxdID0gW107XG4gIGZlYXR1cmVzQnlMZXZlbFtsdmxdLnB1c2goZW50cnkpO1xufVxuXG5cbi8vIFx1MjUwMFx1MjUwMFx1MjUwMCBMZXZlbCBGZWF0dXJlcyBcdTI1MDBcdTI1MDBcdTI1MDBcbmxpbmVzLnB1c2goYGApO1xubGluZXMucHVzaChgLS0tYCk7XG5saW5lcy5wdXNoKGAjIyBMZXZlbCBGZWF0dXJlc2ApO1xuXG5jb25zdCBsZXZlbHMgPSBPYmplY3RcbiAgLmtleXMoZmVhdHVyZXNCeUxldmVsKVxuICAubWFwKG4gPT4gK24pXG4gIC5zb3J0KChhLCBiKSA9PiBhIC0gYik7XG5cbmZvciAoY29uc3QgbHZsIG9mIGxldmVscykge1xuICBsaW5lcy5wdXNoKGAjIyMgTGV2ZWwgJHtsdmx9YCk7XG5cbiAgZm9yIChjb25zdCBmZWF0IG9mIGZlYXR1cmVzQnlMZXZlbFtsdmxdKSB7XG4gICAgLy8gRmVhdHVyZSBoZWFkZXJcbiAgICBsaW5lcy5wdXNoKGAjIyMjICR7ZmVhdC5uYW1lfWApO1xuXG4gICAgLy8gRW5zdXJlIGVudHJpZXMgaXMgYWx3YXlzIGFuIGFycmF5XG4gICAgY29uc3QgZW50cmllcyA9IEFycmF5LmlzQXJyYXkoZmVhdC5lbnRyaWVzKVxuICAgICAgPyBmZWF0LmVudHJpZXNcbiAgICAgIDogW2ZlYXQuZW50cmllc107XG5cbiAgICBmb3IgKGNvbnN0IGVudCBvZiBlbnRyaWVzKSB7XG4gICAgICAvLyAxKSBQbGFpbi10ZXh0IHBhcmFncmFwaFxuICAgICAgICBpZiAodHlwZW9mIGVudCA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgIGNvbnN0IHR4dCA9IGZvcm1hdEVudHJ5KGVudCkudHJpbSgpO1xuICAgICAgICAgIC8vIHNraXAgYW55IHB1cmUtYnJhY2UgbGluZXNcbiAgICAgICAgICBpZiAodHh0ID09PSBcIntcIiB8fCB0eHQgPT09IFwifVwiKSBjb250aW51ZTtcbiAgICAgICAgICBsaW5lcy5wdXNoKHR4dCk7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoaXNUeXBlZEVudHJ5KGVudCkgJiYgZW50LnR5cGUgPT09IFwibGlzdFwiICYmIEFycmF5LmlzQXJyYXkoZW50Lml0ZW1zKSkge1xuICAgIGZvciAoY29uc3QgaXRlbSBvZiBlbnQuaXRlbXMpIHtcbiAgICAgIGxpbmVzLnB1c2goYC0gJHtyZXBsYWNlNWVUYWdzKGl0ZW0pfWApO1xuICAgIH1cbiAgICBjb250aW51ZTtcbiAgfVxuICAgICAgLy8gXHUyNTAwXHUyNTAwXHUyNTAwIGluc2lkZSB5b3VyIGZvciAoY29uc3QgZW50IG9mIGVudHJpZXMpIGxvb3AgXHUyNTAwXHUyNTAwXHUyNTAwXG4gICAgICBpZiAoaXNUeXBlZEVudHJ5KGVudCkgJiYgZW50LnR5cGUgPT09IFwib3B0aW9uc1wiKSB7XG4gIGlmIChlbnQuY291bnQpIHtcbiAgICBsaW5lcy5wdXNoKFwiXCIpO1xuICAgIGxpbmVzLnB1c2goYCoqQ2hvb3NlICR7ZW50LmNvdW50fSBvZiB0aGUgZm9sbG93aW5nIG9wdGlvbnM6KipgKTtcbiAgICBsaW5lcy5wdXNoKFwiXCIpO1xuICB9XG5cbiAgZm9yIChjb25zdCBvcHRSZWYgb2YgQXJyYXkuaXNBcnJheShlbnQuZW50cmllcykgPyBlbnQuZW50cmllcyA6IFtlbnQuZW50cmllc10pIHtcbiAgICBpZiAob3B0UmVmLnR5cGUgPT09IFwicmVmT3B0aW9uYWxmZWF0dXJlXCIpIHtcbiAgICAgIGNvbnN0IFtvcHROYW1lLCBvcHRTcmNdID0gb3B0UmVmLm9wdGlvbmFsZmVhdHVyZS5zcGxpdChcInxcIik7XG4gICAgICBjb25zdCBmZWF0RGVmID0gb3B0aW9uYWxGZWF0dXJlcy5maW5kKFxuICAgICAgICBmID0+IGYubmFtZSA9PT0gb3B0TmFtZSAmJiAoIW9wdFNyYyB8fCBmLnNvdXJjZSA9PT0gb3B0U3JjKVxuICAgICAgKTtcblxuICAgICAgaWYgKGZlYXREZWYpIHtcbiAgICAgICAgLy8gbG9vcCB0aHJvdWdoIGVhY2ggbGluZSBpbiB0aGUgZmVhdHVyZVx1MjAxOXMgZW50cmllc1tdXG4gICAgICAgIGZlYXREZWYuZW50cmllcy5mb3JFYWNoKChzdWJFbnRyeTogYW55LCBpZHg6IGFueSkgPT4ge1xuICAgICAgICAgIC8vIHJlbmRlciB0ZXh0XG4gICAgICAgICAgY29uc3QgdGV4dCA9IHR5cGVvZiBzdWJFbnRyeSA9PT0gXCJzdHJpbmdcIlxuICAgICAgICAgICAgPyByZXBsYWNlNWVUYWdzKHN1YkVudHJ5KVxuICAgICAgICAgICAgOiBmb3JtYXRFbnRyeShzdWJFbnRyeSk7XG5cbiAgICAgICAgICBpZiAoaWR4ID09PSAwKSB7XG4gICAgICAgICAgICAvLyBmaXJzdCBsaW5lOiBib2xkZWQgbmFtZSArIGRlc2NyaXB0aW9uXG4gICAgICAgICAgICBsaW5lcy5wdXNoKGAtICoqJHtmZWF0RGVmLm5hbWV9OioqICR7dGV4dH1gKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gc3Vic2VxdWVudCBsaW5lczogbmVzdGVkIGJ1bGxldFxuICAgICAgICAgICAgbGluZXMucHVzaChgICAtICR7dGV4dH1gKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICBsaW5lcy5wdXNoKFwiXCIpOyAvLyBibGFuayBsaW5lIGFmdGVyIGVhY2ggZmVhdHVyZSBibG9ja1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gZmFsbGJhY2sgaWYgbm90IGZvdW5kXG4gICAgICAgIGxpbmVzLnB1c2goYCoqJHtvcHROYW1lfToqKmApO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICAvLyBub25cdTIwMTByZWZPcHRpb25hbGZlYXR1cmUgZmFsbGJhY2tcbiAgICAgIGNvbnN0IHR4dCA9IGZvcm1hdEVudHJ5KG9wdFJlZik7XG4gICAgICBpZiAodHh0KSBsaW5lcy5wdXNoKGAtICR7dHh0fWApO1xuICAgIH1cbiAgfVxuXG4gIGNvbnRpbnVlO1xufVxuXG5cbiAgICAgIC8vIDMpIFN0YW5kYWxvbmUgcmVmT3B0aW9uYWxmZWF0dXJlXG4gICAgICBpZiAoaXNUeXBlZEVudHJ5KGVudCkgJiYgZW50LnR5cGUgPT09IFwicmVmT3B0aW9uYWxmZWF0dXJlXCIpIHtcbiAgICAgICAgY29uc3QgW25hbWVdID0gZW50Lm9wdGlvbmFsZmVhdHVyZS5zcGxpdChcInxcIik7XG4gICAgICAgIGxpbmVzLnB1c2goYC0gW1ske25hbWV9fCR7bmFtZX1dXWApO1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgLy8gNCkgTmVzdGVkIFx1MjAxQ2VudHJpZXNcdTIwMUQgYmxvY2sgd2l0aCBpdHMgb3duIGhlYWRpbmdcbiAgICAgIGlmIChpc1R5cGVkRW50cnkoZW50KSAmJiBlbnQudHlwZSA9PT0gXCJlbnRyaWVzXCIgJiYgZW50Lm5hbWUpIHtcbiAgICAgICAgbGluZXMucHVzaChgIyMjIyMgJHtlbnQubmFtZX1gKTtcbiAgICAgICAgY29uc3QgaW5uZXIgPSBBcnJheS5pc0FycmF5KGVudC5lbnRyaWVzKSA/IGVudC5lbnRyaWVzIDogW2VudC5lbnRyaWVzXTtcbiAgICAgICAgZm9yIChjb25zdCBlMiBvZiBpbm5lcikge1xuICAgICAgICAgIGxpbmVzLnB1c2goZm9ybWF0RW50cnkoZTIpKTtcbiAgICAgICAgfVxuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgLy8gNSkgRmFsbGJhY2sgZm9yIGFueSBvdGhlciBvYmplY3Qgc2hhcGVcbiAgICAgIGNvbnN0IGZhbGxiYWNrID0gZm9ybWF0RW50cnkoZW50KTtcbiAgICAgIGlmIChmYWxsYmFjaykgbGluZXMucHVzaChmYWxsYmFjayk7XG4gICAgfVxuXG4gICAgLy8gQmxhbmsgbGluZSBhZnRlciBlYWNoIGZlYXR1cmVcbiAgICBsaW5lcy5wdXNoKGBgKTtcbiAgfSBcblxuICAvLyBEaXZpZGVyIGJldHdlZW4gbGV2ZWxzXG4gIGxpbmVzLnB1c2goYC0tLWApO1xufVxuXG5cblxuICAvLyBzdGl0Y2gsIHJlcGxhY2UgdGFncywgcmV0dXJuXG4gIGxldCBjb250ZW50ID0gYC0tLVxcbiR7eWFtbH1cXG4tLS1cXG5cXG4ke2xpbmVzLmpvaW4oXCJcXG5cIil9YDtcbiAgLy8gY29tbWVudCB0aGlzIG91dCB3aGlsZSBkZWJ1Z2dpbmc6XG4gIGNvbnRlbnQgPSByZXBsYWNlNWVUYWdzKGNvbnRlbnQpO1xuXG4gIGNvbnRlbnQgPSBjb250ZW50XG4gIC5yZXBsYWNlKC9cXG57Myx9L2csICdcXG5cXG4nKSAgIC8vIG5vIG1vcmUgdGhhbiAyIG5ld2xpbmVzIGluIGEgcm93XG4gIC5yZXBsYWNlKC9cXG4gK1xcbi9nLCAnXFxuXFxuJyk7ICAvLyB0cmltIGJsYW5rIGxpbmVzIHdpdGggdHJhaWxpbmcgc3BhY2VzXG5cbiAgcmV0dXJuIFtcbiAgICB7XG4gICAgICBwYXRoOiBgQ2xhc3Nlcy8ke2NsYXNzTmFtZX0vJHtjbGFzc05hbWV9Lm1kYCxcbiAgICAgIGNvbnRlbnQsXG4gICAgfSxcbiAgICAuLi5zdWJjbGFzc0ZpbGVzLFxuICBdO1xuICBcbn1cbiIsICIvLzVlIDIwMjUgcnVsZXNcblxuaW1wb3J0IHR5cGUgeyBQYXJzZWRNYXJrZG93bkZpbGUgfSBmcm9tIFwiLi4vLi4vdHlwZXNcIjtcbmltcG9ydCB7IHJlcGxhY2U1ZVRhZ3MgfSBmcm9tIFwiLi9oZWxwZXJzL3RhZ1JlcGxhY2VyXCI7XG5cbi8qKlxuICogUGFyc2UgYWN0aW9ucy5qc29uIGludG8gYSBzaW5nbGUgTWFya2Rvd24gbm90ZSB3aXRoICMjIGhlYWRlcnMgZm9yIGVhY2ggYWN0aW9uLFxuICogaGFuZGxpbmcgbmVzdGVkIGVudHJpZXMsIGluc2V0cywgbGlzdHMsIHRhYmxlcywgYW5kIGFkZGluZyBzZXBhcmF0b3JzLlxuICovXG5leHBvcnQgZnVuY3Rpb24gcGFyc2VBY3Rpb25zRmlsZShqc29uOiBhbnksIGVkaXRpb25JZDogc3RyaW5nKTogUGFyc2VkTWFya2Rvd25GaWxlW10ge1xuICBpZiAoIUFycmF5LmlzQXJyYXkoanNvbi5hY3Rpb24pKSByZXR1cm4gW107XG5cbiAgY29uc3QgbGluZXM6IHN0cmluZ1tdID0gW107XG5cbiAgLyoqIFJlY3Vyc2l2ZWx5IGVtaXQgYW55IGJsb2NrOiB0ZXh0LCBsaXN0LCB0YWJsZSwgZW50cmllcy9pbnNldCwgb3IgZmFsbGJhY2sgKi9cbiAgZnVuY3Rpb24gZW1pdEJsb2NrKGJsb2NrOiBhbnkpIHtcbiAgICBpZiAoIWJsb2NrKSByZXR1cm47XG5cbiAgICAvLyAxKSBQbGFpbiB0ZXh0IHBhcmFncmFwaHNcbiAgICBpZiAodHlwZW9mIGJsb2NrID09PSBcInN0cmluZ1wiKSB7XG4gICAgICBmb3IgKGNvbnN0IHBhcmEgb2YgYmxvY2suc3BsaXQoL1xcbnsyLH0vKSkge1xuICAgICAgICBjb25zdCB0ID0gcGFyYS50cmltKCk7XG4gICAgICAgIGlmICh0KSB7XG4gICAgICAgICAgbGluZXMucHVzaChyZXBsYWNlNWVUYWdzKHQpKTtcbiAgICAgICAgICBsaW5lcy5wdXNoKFwiXCIpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gMikgQnVsbGV0IGxpc3RcbiAgICBpZiAoYmxvY2sudHlwZSA9PT0gXCJsaXN0XCIgJiYgQXJyYXkuaXNBcnJheShibG9jay5pdGVtcykpIHtcbiAgICAgIGZvciAoY29uc3QgaXRlbSBvZiBibG9jay5pdGVtcykge1xuICAgICAgICBsaW5lcy5wdXNoKGAtICR7cmVwbGFjZTVlVGFncyhpdGVtKX1gKTtcbiAgICAgIH1cbiAgICAgIGxpbmVzLnB1c2goXCJcIik7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gMykgVGFibGVcbiAgICBpZiAoYmxvY2sudHlwZSA9PT0gXCJ0YWJsZVwiICYmIEFycmF5LmlzQXJyYXkoYmxvY2sucm93cykpIHtcbiAgICAgIGNvbnN0IGhlYWRlcnMgPSBibG9jay5jb2xMYWJlbHMgfHwgW107XG4gICAgICBsaW5lcy5wdXNoKGB8ICR7aGVhZGVycy5qb2luKFwiIHwgXCIpfSB8YCk7XG4gICAgICBsaW5lcy5wdXNoKGB8ICR7aGVhZGVycy5tYXAoKCkgPT4gXCItLS1cIikuam9pbihcIiB8IFwiKX0gfGApO1xuICAgICAgZm9yIChjb25zdCByb3cgb2YgYmxvY2sucm93cykge1xuICAgICAgICBsaW5lcy5wdXNoKGB8ICR7cm93LmpvaW4oXCIgfCBcIil9IHxgKTtcbiAgICAgIH1cbiAgICAgIGxpbmVzLnB1c2goXCJcIik7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gNCkgTmVzdGVkIGVudHJpZXMvaW5zZXRcbiAgICBpZiAoKGJsb2NrLnR5cGUgPT09IFwiZW50cmllc1wiIHx8IGJsb2NrLnR5cGUgPT09IFwiaW5zZXRcIikgJiYgQXJyYXkuaXNBcnJheShibG9jay5lbnRyaWVzKSkge1xuICAgICAgaWYgKGJsb2NrLm5hbWUpIHtcbiAgICAgICAgaWYgKGxpbmVzW2xpbmVzLmxlbmd0aCAtIDFdID09PSBcIlwiKSBsaW5lcy5wb3AoKTtcbiAgICAgICAgbGluZXMucHVzaChgIyMjICR7YmxvY2submFtZX1gKTtcbiAgICAgIH1cbiAgICAgIGZvciAoY29uc3QgY2hpbGQgb2YgYmxvY2suZW50cmllcykge1xuICAgICAgICBlbWl0QmxvY2soY2hpbGQpO1xuICAgICAgfVxuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIDUpIEZhbGxiYWNrIGZvciBhbnkgb3RoZXIgb2JqZWN0IG9yIGFycmF5XG4gICAgY29uc3QgdHh0ID0gQXJyYXkuaXNBcnJheShibG9jaylcbiAgICAgID8gYmxvY2suam9pbihcIiBcIilcbiAgICAgIDogdHlwZW9mIGJsb2NrID09PSBcIm9iamVjdFwiXG4gICAgICA/IEpTT04uc3RyaW5naWZ5KGJsb2NrKVxuICAgICAgOiBTdHJpbmcoYmxvY2spO1xuICAgIGxpbmVzLnB1c2gocmVwbGFjZTVlVGFncyh0eHQpKTtcbiAgICBsaW5lcy5wdXNoKFwiXCIpO1xuICB9XG5cbiAgLy8gTG9vcCB0aHJvdWdoIGVhY2ggYWN0aW9uXG4gIGZvciAoY29uc3QgYWN0aW9uIG9mIGpzb24uYWN0aW9uKSB7XG4gICAgbGluZXMucHVzaChgIyMgJHthY3Rpb24ubmFtZX1gKTtcbiAgICBmb3IgKGNvbnN0IGVudHJ5IG9mIEFycmF5LmlzQXJyYXkoYWN0aW9uLmVudHJpZXMpID8gYWN0aW9uLmVudHJpZXMgOiBbYWN0aW9uLmVudHJpZXNdKSB7XG4gICAgICBlbWl0QmxvY2soZW50cnkpO1xuICAgIH1cblxuICAgIC8vIFx1MjAxQ1NlZSBBbHNvXHUyMDFEIHNlY3Rpb25cbiAgICBpZiAoQXJyYXkuaXNBcnJheShhY3Rpb24uc2VlQWxzb0FjdGlvbikpIHtcbiAgICAgIGxpbmVzLnB1c2goXCIqKlNlZSBBbHNvOioqXCIpO1xuICAgICAgbGluZXMucHVzaChcIlwiKTtcbiAgICAgIGZvciAoY29uc3QgcmVmIG9mIGFjdGlvbi5zZWVBbHNvQWN0aW9uKSB7XG4gICAgICAgIGNvbnN0IFtuYW1lXSA9IFN0cmluZyhyZWYpLnNwbGl0KFwifFwiKTtcbiAgICAgICAgbGluZXMucHVzaChgLSBbWyR7bmFtZX1dXWApO1xuICAgICAgfVxuICAgICAgbGluZXMucHVzaChcIlwiKTtcbiAgICB9XG5cbiAgICAvLyBTZXBhcmF0b3JcbiAgICBsaW5lcy5wdXNoKFwiLS0tXCIpO1xuICB9XG5cbiAgLy8gUmVtb3ZlIGFueSBkb3VibGUtYmxhbmsgbGluZXNcbiAgY29uc3QgY2xlYW5lZCA9IGxpbmVzLnJlZHVjZTxzdHJpbmdbXT4oKGFjYywgY3VycikgPT4ge1xuICAgIGlmIChjdXJyID09PSBcIlwiICYmIGFjYy5sZW5ndGggJiYgYWNjW2FjYy5sZW5ndGggLSAxXSA9PT0gXCJcIikgcmV0dXJuIGFjYztcbiAgICByZXR1cm4gYWNjLmNvbmNhdChjdXJyKTtcbiAgfSwgW10pO1xuXG4gIHJldHVybiBbXG4gICAge1xuICAgICAgcGF0aDogXCJSdWxlcyBhbmQgUmVmZXJlbmNlL0FjdGlvbnMubWRcIixcbiAgICAgIGNvbnRlbnQ6IGNsZWFuZWQuam9pbihcIlxcblwiKS50cmltKCkgKyBcIlxcblwiLFxuICAgIH0sXG4gIF07XG59XG5cbi8qKlxuICogUGFyc2UgY29tYmluZWQgY29uZGl0aW9uc2Rpc2Vhc2VzLmpzb24gaW50byB0d28gTWFya2Rvd24gbm90ZXM6IENvbmRpdGlvbnMubWQgYW5kIERpc2Vhc2VzLm1kXG4gKiBhZGRpbmcgc2VwYXJhdG9ycyBiZXR3ZWVuIGVudHJpZXMuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBwYXJzZUNvbmRpdGlvbnNEaXNlYXNlc0ZpbGUoanNvbjogYW55LCBlZGl0aW9uSWQ6IHN0cmluZyk6IFBhcnNlZE1hcmtkb3duRmlsZVtdIHtcbiAgY29uc3Qgb3V0cHV0czogUGFyc2VkTWFya2Rvd25GaWxlW10gPSBbXTtcblxuICBjb25zdCBwcm9jZXNzSXRlbXMgPSAoaXRlbXM6IGFueVtdLCBvdXRQYXRoOiBzdHJpbmcpID0+IHtcbiAgICBjb25zdCBsaW5lczogc3RyaW5nW10gPSBbXTtcblxuICAgIGZvciAoY29uc3QgaXRlbSBvZiBpdGVtcykge1xuICAgICAgLy8gVG9wXHUyMDEwbGV2ZWwgaGVhZGVyIGZvciBlYWNoIGNvbmRpdGlvbi9kaXNlYXNlXG4gICAgICBsaW5lcy5wdXNoKGAjIyAke2l0ZW0ubmFtZX1gKTtcblxuICAgICAgY29uc3QgZW50cmllcyA9IEFycmF5LmlzQXJyYXkoaXRlbS5lbnRyaWVzKSA/IGl0ZW0uZW50cmllcyA6IFtpdGVtLmVudHJpZXNdO1xuICAgICAgZm9yIChjb25zdCBlbnRyeSBvZiBlbnRyaWVzKSB7XG4gICAgICAgIGlmICghZW50cnkpIGNvbnRpbnVlO1xuXG4gICAgICAgIC8vIDEpIFBsYWluIHRleHQgcGFyYWdyYXBoc1xuICAgICAgICBpZiAodHlwZW9mIGVudHJ5ID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgZm9yIChjb25zdCBwYXJhIG9mIGVudHJ5LnNwbGl0KC9cXG57Mix9LykpIHtcbiAgICAgICAgICAgIGNvbnN0IHQgPSBwYXJhLnRyaW0oKTtcbiAgICAgICAgICAgIGlmICh0KSB7XG4gICAgICAgICAgICAgIGxpbmVzLnB1c2gocmVwbGFjZTVlVGFncyh0KSk7XG4gICAgICAgICAgICAgIGxpbmVzLnB1c2goXCJcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vIDIpIEJ1bGxldCBsaXN0c1xuICAgICAgICBlbHNlIGlmIChlbnRyeS50eXBlID09PSBcImxpc3RcIiAmJiBBcnJheS5pc0FycmF5KGVudHJ5Lml0ZW1zKSkge1xuICAgICAgICAgIGZvciAoY29uc3QgdHh0IG9mIGVudHJ5Lml0ZW1zKSB7XG4gICAgICAgICAgICBsaW5lcy5wdXNoKGAtICR7cmVwbGFjZTVlVGFncyh0eHQpfWApO1xuICAgICAgICAgIH1cbiAgICAgICAgICBsaW5lcy5wdXNoKFwiXCIpO1xuICAgICAgICB9XG4gICAgICAgIC8vIDMpIFRhYmxlc1xuICAgICAgICBlbHNlIGlmIChlbnRyeS50eXBlID09PSBcInRhYmxlXCIgJiYgQXJyYXkuaXNBcnJheShlbnRyeS5yb3dzKSkge1xuICAgICAgICAgIGNvbnN0IGhlYWRlcnMgPSBlbnRyeS5jb2xMYWJlbHMgfHwgW107XG4gICAgICAgICAgbGluZXMucHVzaChgfCAke2hlYWRlcnMuam9pbihcIiB8IFwiKX0gfGApO1xuICAgICAgICAgIGxpbmVzLnB1c2goYHwgJHtoZWFkZXJzLm1hcCgoKSA9PiBcIi0tLVwiKS5qb2luKFwiIHwgXCIpfSB8YCk7XG4gICAgICAgICAgZm9yIChjb25zdCByb3cgb2YgZW50cnkucm93cykge1xuICAgICAgICAgICAgbGluZXMucHVzaChgfCAke3Jvdy5qb2luKFwiIHwgXCIpfSB8YCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGxpbmVzLnB1c2goXCJcIik7XG4gICAgICAgIH1cbiAgICAgICAgLy8gNCkgTmVzdGVkIFwiZW50cmllc1wiIGJsb2Nrc1xuICAgICAgICBlbHNlIGlmIChlbnRyeS50eXBlID09PSBcImVudHJpZXNcIiAmJiBBcnJheS5pc0FycmF5KGVudHJ5LmVudHJpZXMpKSB7XG4gICAgICAgICAgLy8gSWYgdGhpcyBibG9jayBoYXMgaXRzIG93biBuYW1lLCBlbWl0IGl0XG4gICAgICAgICAgaWYgKGVudHJ5Lm5hbWUpIHtcbiAgICAgICAgICAgIGxpbmVzLnB1c2goYCMjIyAke2VudHJ5Lm5hbWV9YCk7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IHN1YiBvZiBlbnRyeS5lbnRyaWVzKSB7XG4gICAgICAgICAgICAgIC8vIE5hbWVkIHN1Ylx1MjAxMGJsb2NrIChlLmcuIFwiQ2FuJ3QgU2VlXCIpXG4gICAgICAgICAgICAgIGlmIChzdWIudHlwZSA9PT0gXCJlbnRyaWVzXCIgJiYgc3ViLm5hbWUgJiYgQXJyYXkuaXNBcnJheShzdWIuZW50cmllcykpIHtcbiAgICAgICAgICAgICAgICBpZiAobGluZXNbbGluZXMubGVuZ3RoIC0gMV0gPT09IFwiXCIpIGxpbmVzLnBvcCgpO1xuICAgICAgICAgICAgICAgIGxpbmVzLnB1c2goYCMjIyMgJHtzdWIubmFtZX1gKTtcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IHR4dEVudHJ5IG9mIHN1Yi5lbnRyaWVzKSB7XG4gICAgICAgICAgICAgICAgICBjb25zdCB0ZXh0ID0gdHlwZW9mIHR4dEVudHJ5ID09PSBcInN0cmluZ1wiXG4gICAgICAgICAgICAgICAgICAgID8gcmVwbGFjZTVlVGFncyh0eHRFbnRyeSlcbiAgICAgICAgICAgICAgICAgICAgOiByZXBsYWNlNWVUYWdzKFN0cmluZyh0eHRFbnRyeSkpO1xuICAgICAgICAgICAgICAgICAgbGluZXMucHVzaCh0ZXh0KTtcbiAgICAgICAgICAgICAgICAgIGxpbmVzLnB1c2goXCJcIik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIC8vIFBsYWluXHUyMDEwdGV4dCBzdWJcdTIwMTBlbnRyeVxuICAgICAgICAgICAgICBlbHNlIGlmICh0eXBlb2Ygc3ViID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICAgICAgbGluZXMucHVzaChyZXBsYWNlNWVUYWdzKHN1YikpO1xuICAgICAgICAgICAgICAgIGxpbmVzLnB1c2goXCJcIik7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gVW5uYW1lZCB3cmFwcGVyOiBqdXN0IGZsYXR0ZW4gaXRzIGNoaWxkcmVuXG4gICAgICAgICAgICBmb3IgKGNvbnN0IHN1YiBvZiBlbnRyeS5lbnRyaWVzKSB7XG4gICAgICAgICAgICAgIGlmIChzdWIudHlwZSA9PT0gXCJlbnRyaWVzXCIgJiYgc3ViLm5hbWUgJiYgQXJyYXkuaXNBcnJheShzdWIuZW50cmllcykpIHtcbiAgICAgICAgICAgICAgICBpZiAobGluZXNbbGluZXMubGVuZ3RoIC0gMV0gPT09IFwiXCIpIGxpbmVzLnBvcCgpO1xuICAgICAgICAgICAgICAgIGxpbmVzLnB1c2goYCMjIyAke3N1Yi5uYW1lfWApO1xuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgdHh0RW50cnkgb2Ygc3ViLmVudHJpZXMpIHtcbiAgICAgICAgICAgICAgICAgIGNvbnN0IHRleHQgPSB0eXBlb2YgdHh0RW50cnkgPT09IFwic3RyaW5nXCJcbiAgICAgICAgICAgICAgICAgICAgPyByZXBsYWNlNWVUYWdzKHR4dEVudHJ5KVxuICAgICAgICAgICAgICAgICAgICA6IHJlcGxhY2U1ZVRhZ3MoU3RyaW5nKHR4dEVudHJ5KSk7XG4gICAgICAgICAgICAgICAgICBsaW5lcy5wdXNoKHRleHQpO1xuICAgICAgICAgICAgICAgICAgbGluZXMucHVzaChcIlwiKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIHN1YiA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgICAgIGxpbmVzLnB1c2gocmVwbGFjZTVlVGFncyhzdWIpKTtcbiAgICAgICAgICAgICAgICBsaW5lcy5wdXNoKFwiXCIpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vIDUpIEFueXRoaW5nIGVsc2UgKGZhbGxiYWNrKVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICBjb25zdCB0eHQgPSBBcnJheS5pc0FycmF5KGVudHJ5KVxuICAgICAgICAgICAgPyBlbnRyeS5qb2luKFwiIFwiKVxuICAgICAgICAgICAgOiB0eXBlb2YgZW50cnkgPT09IFwib2JqZWN0XCJcbiAgICAgICAgICAgICAgPyBKU09OLnN0cmluZ2lmeShlbnRyeSlcbiAgICAgICAgICAgICAgOiBTdHJpbmcoZW50cnkpO1xuICAgICAgICAgIGxpbmVzLnB1c2gocmVwbGFjZTVlVGFncyh0eHQpKTtcbiAgICAgICAgICBsaW5lcy5wdXNoKFwiXCIpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIFNlcGFyYXRvciBiZXR3ZWVuIGVudHJpZXNcbiAgICAgIGxpbmVzLnB1c2goXCItLS1cIik7XG4gICAgfVxuXG4gICAgLy8gQ2xlYW4gdXAgYW55IGRvdWJsZVx1MjAxMGJsYW5rIGxpbmVzXG4gICAgY29uc3QgY2xlYW5lZCA9IGxpbmVzLnJlZHVjZTxzdHJpbmdbXT4oKGFjYywgY3VycikgPT4ge1xuICAgICAgaWYgKGN1cnIgPT09IFwiXCIgJiYgYWNjLmxlbmd0aCAmJiBhY2NbYWNjLmxlbmd0aCAtIDFdID09PSBcIlwiKSByZXR1cm4gYWNjO1xuICAgICAgcmV0dXJuIGFjYy5jb25jYXQoY3Vycik7XG4gICAgfSwgW10pO1xuXG4gICAgb3V0cHV0cy5wdXNoKHtcbiAgICAgIHBhdGg6IG91dFBhdGgsXG4gICAgICBjb250ZW50OiBjbGVhbmVkLmpvaW4oXCJcXG5cIikudHJpbSgpICsgXCJcXG5cIixcbiAgICB9KTtcbiAgfTtcblxuICBwcm9jZXNzSXRlbXMoanNvbi5jb25kaXRpb24gfHwgW10sICAgXCJSdWxlcyBhbmQgUmVmZXJlbmNlL0NvbmRpdGlvbnMubWRcIik7XG4gIHByb2Nlc3NJdGVtcyhqc29uLmRpc2Vhc2UgICB8fCBbXSwgICBcIlJ1bGVzIGFuZCBSZWZlcmVuY2UvRGlzZWFzZXMubWRcIik7XG4gIHJldHVybiBvdXRwdXRzO1xufVxuXG4vKipcbiAqIFBhcnNlIHNlbnNlcy5qc29uIGludG8gYSBzaW5nbGUgTWFya2Rvd24gbm90ZSB3aXRoICMjIGhlYWRlcnMgZm9yIGVhY2ggc2Vuc2UsXG4gKiBoYW5kbGluZyBsaXN0cywgdGFibGVzLCBuZXN0ZWQgZW50cmllcy9pbnNldHMsIGFuZCBzZXBhcmF0b3JzLlxuICovXG5leHBvcnQgZnVuY3Rpb24gcGFyc2VTZW5zZXNGaWxlKGpzb246IGFueSwgZWRpdGlvbklkOiBzdHJpbmcpOiBQYXJzZWRNYXJrZG93bkZpbGVbXSB7XG4gIGNvbnN0IGl0ZW1zID0gQXJyYXkuaXNBcnJheShqc29uLnNlbnNlKVxuICAgID8ganNvbi5zZW5zZVxuICAgIDogQXJyYXkuaXNBcnJheShqc29uLnNlbnNlcylcbiAgICA/IGpzb24uc2Vuc2VzXG4gICAgOiBbXTtcbiAgaWYgKCFpdGVtcy5sZW5ndGgpIHJldHVybiBbXTtcblxuICBjb25zdCBsaW5lczogc3RyaW5nW10gPSBbXTtcblxuICBmdW5jdGlvbiBlbWl0QmxvY2soYmxvY2s6IGFueSkge1xuICAgIGlmICghYmxvY2spIHJldHVybjtcblxuICAgIC8vIDEpIFBsYWluXHUyMDEwdGV4dCBwYXJhZ3JhcGgocylcbiAgICBpZiAodHlwZW9mIGJsb2NrID09PSBcInN0cmluZ1wiKSB7XG4gICAgICBmb3IgKGNvbnN0IHBhcmEgb2YgYmxvY2suc3BsaXQoL1xcbnsyLH0vKSkge1xuICAgICAgICBjb25zdCB0ID0gcGFyYS50cmltKCk7XG4gICAgICAgIGlmICh0KSB7XG4gICAgICAgICAgbGluZXMucHVzaChyZXBsYWNlNWVUYWdzKHQpKTtcbiAgICAgICAgICBsaW5lcy5wdXNoKFwiXCIpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gMikgQnVsbGV0IGxpc3QgKGhhbmRsZXMgYm90aCBzdHJpbmcgaXRlbXMgYW5kIG9iamVjdCBpdGVtcylcbiAgICBpZiAoYmxvY2sudHlwZSA9PT0gXCJsaXN0XCIgJiYgQXJyYXkuaXNBcnJheShibG9jay5pdGVtcykpIHtcbiAgICAgIGZvciAoY29uc3QgaXRlbSBvZiBibG9jay5pdGVtcykge1xuICAgICAgICBpZiAodHlwZW9mIGl0ZW0gPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICBsaW5lcy5wdXNoKGAtICR7cmVwbGFjZTVlVGFncyhpdGVtKX1gKTtcbiAgICAgICAgICBsaW5lcy5wdXNoKFwiXCIpO1xuICAgICAgICB9IGVsc2UgaWYgKGl0ZW0gJiYgdHlwZW9mIGl0ZW0gPT09IFwib2JqZWN0XCIpIHtcbiAgICAgICAgICAvLyBvYmplY3QgaXRlbXMgd2l0aCBuYW1lK2VudHJpZXNcbiAgICAgICAgICBpZiAoaXRlbS5uYW1lICYmIEFycmF5LmlzQXJyYXkoaXRlbS5lbnRyaWVzKSkge1xuICAgICAgICAgICAgbGluZXMucHVzaChgLSAqKiR7aXRlbS5uYW1lfSoqYCk7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGVudCBvZiBpdGVtLmVudHJpZXMpIHtcbiAgICAgICAgICAgICAgbGluZXMucHVzaChgICAtICR7cmVwbGFjZTVlVGFncyhlbnQpfWApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbGluZXMucHVzaChcIlwiKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gZmFsbGJhY2s6IHN0cmluZ2lmeVxuICAgICAgICAgICAgbGluZXMucHVzaChgLSAke3JlcGxhY2U1ZVRhZ3MoSlNPTi5zdHJpbmdpZnkoaXRlbSkpfWApO1xuICAgICAgICAgICAgbGluZXMucHVzaChcIlwiKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyAzKSBUYWJsZVxuICAgIGlmIChibG9jay50eXBlID09PSBcInRhYmxlXCIgJiYgQXJyYXkuaXNBcnJheShibG9jay5yb3dzKSkge1xuICAgICAgY29uc3QgaGVhZGVycyA9IGJsb2NrLmNvbExhYmVscyB8fCBbXTtcbiAgICAgIGxpbmVzLnB1c2goYHwgJHtoZWFkZXJzLmpvaW4oXCIgfCBcIil9IHxgKTtcbiAgICAgIGxpbmVzLnB1c2goYHwgJHtoZWFkZXJzLm1hcCgoKSA9PiBcIi0tLVwiKS5qb2luKFwiIHwgXCIpfSB8YCk7XG4gICAgICBmb3IgKGNvbnN0IHJvdyBvZiBibG9jay5yb3dzKSB7XG4gICAgICAgIGxpbmVzLnB1c2goYHwgJHtyb3cuam9pbihcIiB8IFwiKX0gfGApO1xuICAgICAgfVxuICAgICAgbGluZXMucHVzaChcIlwiKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyA0KSBOZXN0ZWQgZW50cmllcyAvIGluc2V0c1xuICAgIGlmICgoYmxvY2sudHlwZSA9PT0gXCJlbnRyaWVzXCIgfHwgYmxvY2sudHlwZSA9PT0gXCJpbnNldFwiKSAmJiBBcnJheS5pc0FycmF5KGJsb2NrLmVudHJpZXMpKSB7XG4gICAgICAvLyBuYW1lZCBibG9jayBcdTIxOTIgXCIjIyMgTmFtZVwiXG4gICAgICBpZiAoYmxvY2submFtZSkge1xuICAgICAgICBpZiAobGluZXNbbGluZXMubGVuZ3RoIC0gMV0gPT09IFwiXCIpIGxpbmVzLnBvcCgpO1xuICAgICAgICBsaW5lcy5wdXNoKGAjIyMgJHtibG9jay5uYW1lfWApO1xuICAgICAgfVxuICAgICAgLy8gcmVjdXJzZSBpbnRvIGNoaWxkcmVuXG4gICAgICBmb3IgKGNvbnN0IGNoaWxkIG9mIGJsb2NrLmVudHJpZXMpIHtcbiAgICAgICAgZW1pdEJsb2NrKGNoaWxkKTtcbiAgICAgIH1cbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyA1KSBGYWxsYmFjayBmb3IgYXJyYXlzIG9yIG90aGVyIG9iamVjdHNcbiAgICBjb25zdCB0eHQgPVxuICAgICAgQXJyYXkuaXNBcnJheShibG9jaylcbiAgICAgICAgPyBibG9jay5qb2luKFwiIFwiKVxuICAgICAgICA6IHR5cGVvZiBibG9jayA9PT0gXCJvYmplY3RcIlxuICAgICAgICA/IEpTT04uc3RyaW5naWZ5KGJsb2NrKVxuICAgICAgICA6IFN0cmluZyhibG9jayk7XG4gICAgbGluZXMucHVzaChyZXBsYWNlNWVUYWdzKHR4dCkpO1xuICAgIGxpbmVzLnB1c2goXCJcIik7XG4gIH1cblxuICAvLyBCdWlsZCBvdXQgZWFjaCBzZW5zZVxuICBmb3IgKGNvbnN0IHNlbnNlIG9mIGl0ZW1zKSB7XG4gICAgbGluZXMucHVzaChgIyMgJHtzZW5zZS5uYW1lfWApO1xuICAgIGZvciAoY29uc3QgZW50cnkgb2YgQXJyYXkuaXNBcnJheShzZW5zZS5lbnRyaWVzKSA/IHNlbnNlLmVudHJpZXMgOiBbc2Vuc2UuZW50cmllc10pIHtcbiAgICAgIGVtaXRCbG9jayhlbnRyeSk7XG4gICAgfVxuICAgIGxpbmVzLnB1c2goXCItLS1cIik7XG4gIH1cblxuICAvLyBSZW1vdmUgYW55IGRvdWJsZVx1MjAxMGJsYW5rIGxpbmVzXG4gIGNvbnN0IGNsZWFuZWQgPSBsaW5lcy5yZWR1Y2U8c3RyaW5nW10+KChhY2MsIGN1cnIpID0+IHtcbiAgICBpZiAoY3VyciA9PT0gXCJcIiAmJiBhY2MubGVuZ3RoICYmIGFjY1thY2MubGVuZ3RoIC0gMV0gPT09IFwiXCIpIHJldHVybiBhY2M7XG4gICAgcmV0dXJuIGFjYy5jb25jYXQoY3Vycik7XG4gIH0sIFtdKTtcblxuICByZXR1cm4gW1xuICAgIHtcbiAgICAgIHBhdGg6IFwiUnVsZXMgYW5kIFJlZmVyZW5jZS9TZW5zZXMubWRcIixcbiAgICAgIGNvbnRlbnQ6IGNsZWFuZWQuam9pbihcIlxcblwiKS50cmltKCkgKyBcIlxcblwiLFxuICAgIH0sXG4gIF07XG59XG5cbi8qKlxuICogUGFyc2Ugc2tpbGxzLmpzb24gaW50byBhIHNpbmdsZSBNYXJrZG93biBub3RlIHdpdGggIyMgaGVhZGVycyBmb3IgZWFjaCBza2lsbCxcbiAqIHByZXBlbmRpbmcgYW4gYWJpbGl0eSBsaW5lLCBoYW5kbGluZyBwYXJhZ3JhcGhzLCBhbmQgc2VwYXJhdG9ycy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlU2tpbGxzRmlsZShqc29uOiBhbnksIGVkaXRpb25JZDogc3RyaW5nKTogUGFyc2VkTWFya2Rvd25GaWxlW10ge1xuICBjb25zdCBpdGVtcyA9IEFycmF5LmlzQXJyYXkoanNvbi5za2lsbClcbiAgICA/IGpzb24uc2tpbGxcbiAgICA6IEFycmF5LmlzQXJyYXkoanNvbi5za2lsbHMpXG4gICAgPyBqc29uLnNraWxsc1xuICAgIDogW107XG4gIGlmICghaXRlbXMubGVuZ3RoKSByZXR1cm4gW107XG5cbiAgY29uc3QgbGluZXM6IHN0cmluZ1tdID0gW107XG4gIGZvciAoY29uc3Qgc2tpbGwgb2YgaXRlbXMpIHtcbiAgICBsaW5lcy5wdXNoKGAjIyAke3NraWxsLm5hbWV9YCk7XG4gICAgaWYgKHNraWxsLmFiaWxpdHkpIHtcbiAgICAgIGxpbmVzLnB1c2goYCpBYmlsaXR5OiAke3NraWxsLmFiaWxpdHl9KmApO1xuICAgICAgbGluZXMucHVzaChcIlwiKTtcbiAgICB9XG4gICAgY29uc3QgZW50cmllcyA9IEFycmF5LmlzQXJyYXkoc2tpbGwuZW50cmllcykgPyBza2lsbC5lbnRyaWVzIDogW3NraWxsLmVudHJpZXNdO1xuICAgIGZvciAoY29uc3QgZW50cnkgb2YgZW50cmllcykge1xuICAgICAgaWYgKCFlbnRyeSkgY29udGludWU7XG4gICAgICBpZiAodHlwZW9mIGVudHJ5ID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgIGNvbnN0IHBhcmFzID0gZW50cnkuc3BsaXQoL1xcbnsyLH0vKTtcbiAgICAgICAgZm9yIChjb25zdCBwYXJhIG9mIHBhcmFzKSB7XG4gICAgICAgICAgY29uc3QgdCA9IHBhcmEudHJpbSgpO1xuICAgICAgICAgIGlmICh0KSB7XG4gICAgICAgICAgICBsaW5lcy5wdXNoKHJlcGxhY2U1ZVRhZ3ModCkpO1xuICAgICAgICAgICAgbGluZXMucHVzaChcIlwiKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAoZW50cnkudHlwZSA9PT0gXCJsaXN0XCIgJiYgQXJyYXkuaXNBcnJheShlbnRyeS5pdGVtcykpIHtcbiAgICAgICAgZm9yIChjb25zdCBpdGVtIG9mIGVudHJ5Lml0ZW1zKSB7XG4gICAgICAgICAgbGluZXMucHVzaChgLSAke3JlcGxhY2U1ZVRhZ3MoaXRlbSl9YCk7XG4gICAgICAgIH1cbiAgICAgICAgbGluZXMucHVzaChcIlwiKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnN0IHR4dCA9IEFycmF5LmlzQXJyYXkoZW50cnkpID8gZW50cnkuam9pbihcIiBcIikgOiBTdHJpbmcoZW50cnkpO1xuICAgICAgICBsaW5lcy5wdXNoKHJlcGxhY2U1ZVRhZ3ModHh0KSk7XG4gICAgICAgIGxpbmVzLnB1c2goXCJcIik7XG4gICAgICB9XG4gICAgfVxuICAgIC8vIFNlcGFyYXRvciBiZXR3ZWVuIHNraWxsc1xuICAgIGxpbmVzLnB1c2goXCItLS1cIik7XG4gIH1cbiAgY29uc3QgY2xlYW5lZCA9IGxpbmVzLnJlZHVjZTxzdHJpbmdbXT4oKGFjYywgY3VycikgPT4ge1xuICAgIGlmIChjdXJyID09PSBcIlwiICYmIGFjYy5sZW5ndGggJiYgYWNjW2FjYy5sZW5ndGggLSAxXSA9PT0gXCJcIikgcmV0dXJuIGFjYztcbiAgICByZXR1cm4gYWNjLmNvbmNhdChjdXJyKTtcbiAgfSwgW10pO1xuXG4gIHJldHVybiBbXG4gICAge1xuICAgICAgcGF0aDogXCJSdWxlcyBhbmQgUmVmZXJlbmNlL1NraWxscy5tZFwiLFxuICAgICAgY29udGVudDogY2xlYW5lZC5qb2luKFwiXFxuXCIpLnRyaW0oKSArIFwiXFxuXCIsXG4gICAgfSxcbiAgXTtcbn1cbiIsICJpbXBvcnQgdHlwZSB7IFBhcnNlZE1hcmtkb3duRmlsZSB9IGZyb20gXCIuLi8uLi90eXBlc1wiO1xuaW1wb3J0IHsgcmVwbGFjZTVlVGFncyB9IGZyb20gXCIuL2hlbHBlcnMvdGFnUmVwbGFjZXJcIjtcbmltcG9ydCB7IGJ1aWxkRk0sIHNlcmlhbGl6ZUZyb250bWF0dGVyLCBGRUFUU19NRVRBX0RFRlMgfSBmcm9tIFwiLi9oZWxwZXJzL2Zyb250bWF0dGVyXCI7XG5cbi8qKlxuICogUGFyc2UgZmVhdHMuanNvbiBpbnRvIG9uZSBNYXJrZG93biBmaWxlIHBlciBmZWF0IHVuZGVyIFBsYXllciBCdWlsZC9GZWF0cyxcbiAqIGluY2x1ZGluZyBmcm9udG1hdHRlciwgY2xlYW5lZCBwcmVyZXF1aXNpdGVzLCBhbmQgZm9ybWF0dGVkIGVudHJpZXMuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBwYXJzZUZlYXRzRmlsZShqc29uOiBhbnksIGVkaXRpb25JZDogc3RyaW5nKTogUGFyc2VkTWFya2Rvd25GaWxlW10ge1xuICBjb25zdCBmZWF0czogYW55W10gPSBBcnJheS5pc0FycmF5KGpzb24uZmVhdClcbiAgICA/IGpzb24uZmVhdFxuICAgIDogQXJyYXkuaXNBcnJheShqc29uLmZlYXRzKVxuICAgID8ganNvbi5mZWF0c1xuICAgIDogW107XG5cbiAgcmV0dXJuIGZlYXRzLm1hcCgoZmVhdDogYW55KSA9PiB7XG4gICAgY29uc3QgbGluZXM6IHN0cmluZ1tdID0gW107XG5cbiAgICAvLyBcdTI1MDBcdTI1MDBcdTI1MDAgRnJvbnRtYXR0ZXIgXHUyNTAwXHUyNTAwXHUyNTAwXG4gICAgY29uc3QgZm0gPSBidWlsZEZNKHsgLi4uZmVhdCwgX2VkaXRpb25JZDogZWRpdGlvbklkIH0sIEZFQVRTX01FVEFfREVGUyk7XG4gICAgbGluZXMucHVzaChcIi0tLVwiKTtcbiAgICBsaW5lcy5wdXNoKHNlcmlhbGl6ZUZyb250bWF0dGVyKGZtLCBGRUFUU19NRVRBX0RFRlMpKTtcbiAgICBsaW5lcy5wdXNoKFwiLS0tXCIsIFwiXCIpO1xuXG4gICAgLy8gXHUyNTAwXHUyNTAwXHUyNTAwIFRpdGxlIFx1MjUwMFx1MjUwMFx1MjUwMFxuICAgIGxpbmVzLnB1c2goYCMgJHtmZWF0Lm5hbWV9YCwgXCJcIik7XG5cbiAgICAvLyBcdTI1MDBcdTI1MDBcdTI1MDAgUHJlcmVxdWlzaXRlcyBcdTI1MDBcdTI1MDBcdTI1MDBcbiAgICBjb25zdCBwcmVyZXFzOiBzdHJpbmdbXSA9IFtdO1xuICAgIGlmIChBcnJheS5pc0FycmF5KGZlYXQucHJlcmVxdWlzaXRlKSkge1xuICAgICAgZmVhdC5wcmVyZXF1aXNpdGUuZm9yRWFjaCgocHI6IGFueSkgPT4ge1xuICAgICAgICBpZiAocHIubGV2ZWwpIHByZXJlcXMucHVzaChgTGV2ZWwgJHtwci5sZXZlbH1gKTtcbiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkocHIuZmVhdCkpIHtcbiAgICAgICAgICBwci5mZWF0LmZvckVhY2goKGY6IHN0cmluZykgPT4ge1xuICAgICAgICAgICAgY29uc3QgbmFtZSA9IGYuc3BsaXQoXCJ8XCIpWzBdLnJlcGxhY2UoL1xcYlxcdy9nLCBjID0+IGMudG9VcHBlckNhc2UoKSk7XG4gICAgICAgICAgICBwcmVyZXFzLnB1c2goYFByZXJlcXVpc2l0ZTogW1ske25hbWV9XV1gKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICAgIGlmIChmZWF0LnNwZWxsY2FzdGluZ1ByZXBhcmVkKSBwcmVyZXFzLnB1c2goYFByZXJlcXVpc2l0ZTogU3BlbGxjYXN0ZXJgKTtcbiAgICBpZiAoQXJyYXkuaXNBcnJheShmZWF0LnRvb2xQcm9maWNpZW5jaWVzKSkge1xuICAgICAgZmVhdC50b29sUHJvZmljaWVuY2llcy5mb3JFYWNoKCh0cDogYW55KSA9PiB7XG4gICAgICAgIE9iamVjdC5lbnRyaWVzKHRwKS5mb3JFYWNoKChba2V5XSkgPT4ge1xuICAgICAgICAgIGlmIChrZXkgPT09ICdhbnlBcnRpc2Fuc1Rvb2wnKSB7XG4gICAgICAgICAgICBwcmVyZXFzLnB1c2goYFByZXJlcXVpc2l0ZTogUHJvZmljaWVudCB3aXRoIGFuIGFydGlzYW4ncyB0b29sYCk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHByZXJlcXMucHVzaChgUHJlcmVxdWlzaXRlOiBQcm9maWNpZW50IHdpdGggJHtrZXkucmVwbGFjZSgvKFtBLVpdKS9nLCcgJDEnKS50cmltKCl9YCk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH1cbiAgICBpZiAoQXJyYXkuaXNBcnJheShmZWF0LmFybW9yUHJvZmljaWVuY2llcykpIHtcbiAgICAgIGZlYXQuYXJtb3JQcm9maWNpZW5jaWVzLmZvckVhY2goKGFybTogYW55KSA9PiB7XG4gICAgICAgIGNvbnN0IGFybVN0ciA9IHR5cGVvZiBhcm0gPT09ICdzdHJpbmcnID8gYXJtIDogSlNPTi5zdHJpbmdpZnkoYXJtKTtcbiAgICAgICAgcHJlcmVxcy5wdXNoKGBQcmVyZXF1aXNpdGU6IFByb2ZpY2llbnQgd2l0aCAke2FybVN0ci5yZXBsYWNlKC8oW0EtWl0pL2csJyAkMScpLnRyaW0oKX1gKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgICBpZiAoZmVhdC5yYWNlKSBwcmVyZXFzLnB1c2goYFByZXJlcXVpc2l0ZTogJHtmZWF0LnJhY2V9YCk7XG5cbiAgICBpZiAocHJlcmVxcy5sZW5ndGgpIHtcbiAgICAgIGxpbmVzLnB1c2goXCIqKlByZXJlcXVpc2l0ZXMqKlwiKTtcbiAgICAgIHByZXJlcXMuZm9yRWFjaChwID0+IGxpbmVzLnB1c2goYC0gJHtwfWApKTtcbiAgICAgIGxpbmVzLnB1c2goXCJcIik7XG4gICAgfVxuXG4gICAgLy8gXHUyNTAwXHUyNTAwXHUyNTAwIEVudHJpZXMgcmVuZGVyaW5nIFx1MjUwMFx1MjUwMFx1MjUwMFxuICAgIGNvbnN0IGVudHJpZXMgPSBBcnJheS5pc0FycmF5KGZlYXQuZW50cmllcykgPyBmZWF0LmVudHJpZXMgOiBbZmVhdC5lbnRyaWVzXTtcbiAgICBlbnRyaWVzLmZvckVhY2goKGVudHJ5OiBhbnkpID0+IHtcbiAgICAgIGlmICghZW50cnkpIHJldHVybjtcblxuICAgICAgLy8gUGxhaW4gdGV4dFxuICAgICAgaWYgKHR5cGVvZiBlbnRyeSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgZW50cnkuc3BsaXQoL1xcbnsyLH0vKS5mb3JFYWNoKHAgPT4ge1xuICAgICAgICAgIGNvbnN0IHQgPSBwLnRyaW0oKTtcbiAgICAgICAgICBpZiAodCkge1xuICAgICAgICAgICAgbGluZXMucHVzaChyZXBsYWNlNWVUYWdzKHQpKTtcbiAgICAgICAgICAgIGxpbmVzLnB1c2goXCJcIik7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgLy8gTGlzdFxuICAgICAgfSBlbHNlIGlmIChlbnRyeS50eXBlID09PSAnbGlzdCcgJiYgQXJyYXkuaXNBcnJheShlbnRyeS5pdGVtcykpIHtcbiAgICAgICAgZW50cnkuaXRlbXMuZm9yRWFjaCgoaXQ6IGFueSkgPT4ge1xuICAgICAgICAgIGlmICh0eXBlb2YgaXQgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICBsaW5lcy5wdXNoKGAtICR7cmVwbGFjZTVlVGFncyhpdCl9YCk7XG4gICAgICAgICAgfSBlbHNlIGlmIChpdC50eXBlID09PSAnaXRlbScgJiYgaXQubmFtZSkge1xuICAgICAgICAgICAgbGluZXMucHVzaChgLSAqKiR7aXQubmFtZX0qKmApO1xuICAgICAgICAgICAgY29uc3Qgc3VicyA9IEFycmF5LmlzQXJyYXkoaXQuZW50cmllcykgPyBpdC5lbnRyaWVzIDogW2l0LmVudHJpZXNdO1xuICAgICAgICAgICAgc3Vicy5mb3JFYWNoKChzOiBhbnkpID0+XG4gICAgICAgICAgICAgIGxpbmVzLnB1c2goYCAgLSAke3JlcGxhY2U1ZVRhZ3ModHlwZW9mIHMgPT09ICdzdHJpbmcnID8gcyA6IEpTT04uc3RyaW5naWZ5KHMpKX1gKVxuICAgICAgICAgICAgKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICBsaW5lcy5wdXNoKFwiXCIpO1xuXG4gICAgICAvLyBJbnNldCBhcyBpbmRlbnRlZCBidWxsZXRcbiAgICAgIH0gZWxzZSBpZiAoZW50cnkudHlwZSA9PT0gJ2luc2V0Jykge1xuICAgICAgICBsaW5lcy5wdXNoKGAtICoke2VudHJ5Lm5hbWV9KmApO1xuICAgICAgICBjb25zdCBzdWJzID0gQXJyYXkuaXNBcnJheShlbnRyeS5lbnRyaWVzKSA/IGVudHJ5LmVudHJpZXMgOiBbZW50cnkuZW50cmllc107XG4gICAgICAgIHN1YnMuZm9yRWFjaCgoczogYW55KSA9PiBsaW5lcy5wdXNoKGAgIC0gJHtyZXBsYWNlNWVUYWdzKHMpfWApKTtcbiAgICAgICAgbGluZXMucHVzaChcIlwiKTtcblxuICAgICAgLy8gU2VjdGlvbiBvciBlbnRyaWVzXG4gICAgICB9IGVsc2UgaWYgKChlbnRyeS50eXBlID09PSAnc2VjdGlvbicgfHwgZW50cnkudHlwZSA9PT0gJ2VudHJpZXMnKSAmJiBBcnJheS5pc0FycmF5KGVudHJ5LmVudHJpZXMpKSB7XG4gICAgICAgIGlmIChlbnRyeS5uYW1lKSB7XG4gICAgICAgICAgbGluZXMucHVzaChgIyMgJHtlbnRyeS5uYW1lfWApO1xuICAgICAgICAgIGxpbmVzLnB1c2goXCJcIik7XG4gICAgICAgIH1cbiAgICAgICAgZW50cnkuZW50cmllcy5mb3JFYWNoKChzOiBhbnkpID0+IHtcbiAgICAgICAgICBsaW5lcy5wdXNoKHJlcGxhY2U1ZVRhZ3ModHlwZW9mIHMgPT09ICdzdHJpbmcnID8gcyA6IEpTT04uc3RyaW5naWZ5KHMpKSk7XG4gICAgICAgICAgbGluZXMucHVzaChcIlwiKTtcbiAgICAgICAgfSk7XG5cbiAgICAgIC8vIFRhYmxlXG4gICAgICB9IGVsc2UgaWYgKGVudHJ5LnR5cGUgPT09ICd0YWJsZScgJiYgQXJyYXkuaXNBcnJheShlbnRyeS5yb3dzKSkge1xuICAgICAgICBjb25zdCBoZHIgPSBlbnRyeS5jb2xMYWJlbHMgfHwgW107XG4gICAgICAgIGxpbmVzLnB1c2goYHwgJHtoZHIuam9pbignIHwgJyl9IHxgKTtcbiAgICAgICAgbGluZXMucHVzaChgfCAke2hkci5tYXAoKCkgPT4gJy0tLScpLmpvaW4oJyB8ICcpfSB8YCk7XG4gICAgICAgIGVudHJ5LnJvd3MuZm9yRWFjaCgocm93OiBhbnlbXSkgPT5cbiAgICAgICAgICBsaW5lcy5wdXNoKGB8ICR7cm93LmpvaW4oJyB8ICcpfSB8YClcbiAgICAgICAgKTtcbiAgICAgICAgbGluZXMucHVzaChcIlwiKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIHJldHVybiB7XG4gICAgICBwYXRoOiBgUGxheWVyIEJ1aWxkL0ZlYXRzLyR7ZmVhdC5uYW1lfS5tZGAsXG4gICAgICBjb250ZW50OiBsaW5lcy5qb2luKFwiXFxuXCIpLnRyaW0oKSArIFwiXFxuXCIsXG4gICAgfTtcbiAgfSk7XG59XG4iLCAiLy8gc3JjL3BhcnNlcnMvYmFja2dyb3VuZHMudHNcbmltcG9ydCB0eXBlIHsgUGFyc2VkTWFya2Rvd25GaWxlIH0gZnJvbSBcIi4uLy4uL3R5cGVzXCI7XG5pbXBvcnQgeyByZXBsYWNlNWVUYWdzIH0gZnJvbSBcIi4vaGVscGVycy90YWdSZXBsYWNlclwiO1xuaW1wb3J0IHsgcmVuZGVyTWFya2Rvd25UYWJsZSB9IGZyb20gXCIuL2hlbHBlcnMvbWFya2Rvd25UYWJsZVwiO1xuaW1wb3J0IHsgYnVpbGRGTSwgc2VyaWFsaXplRnJvbnRtYXR0ZXIsIEZNX0ZJRUxEUywgZmlsdGVyVmFsaWRTa2lsbHMsIEJBQ0tHUk9VTkRfTUVUQV9ERUZTIH0gZnJvbSBcIi4vaGVscGVycy9mcm9udG1hdHRlclwiO1xuXG4vKipcbiAqIFBhcnNlIGJhY2tncm91bmRzLmpzb24gaW50byBvbmUgTWFya2Rvd24gZmlsZSBwZXIgYmFja2dyb3VuZCB1bmRlciBQbGF5ZXIgQnVpbGQvQmFja2dyb3VuZHMsXG4gKiBleGNsdWRpbmcgYW55IFx1MjAxQ1ZhcmlhbnRcdTIwMjZcdTIwMUQgb3IgXHUyMDFDQmFsZHVyXHUyMDE5cyBHYXRlXHUyMDI2XHUyMDFEIGVudHJpZXMuXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlQmFja2dyb3VuZHNGaWxlKGpzb246IGFueSwgZWRpdGlvbklkOiBzdHJpbmcpOiBQYXJzZWRNYXJrZG93bkZpbGVbXSB7XG4gIC8vIHB1bGwgaW4gdGhlIGFycmF5XG4gIGNvbnN0IHJhdzogYW55W10gPSBBcnJheS5pc0FycmF5KGpzb24uYmFja2dyb3VuZClcbiAgICA/IGpzb24uYmFja2dyb3VuZFxuICAgIDogQXJyYXkuaXNBcnJheShqc29uLmJhY2tncm91bmRzKVxuICAgID8ganNvbi5iYWNrZ3JvdW5kc1xuICAgIDogW107XG5cbiAgLy8gZmlsdGVyIG91dCB1bndhbnRlZCBlbnRyaWVzXG4gIGNvbnN0IGJhY2tncm91bmRzID0gcmF3LmZpbHRlcihiZyA9PiB7XG4gICAgY29uc3Qgbm06IHN0cmluZyA9IGJnLm5hbWUgfHwgXCJcIjtcbiAgICByZXR1cm4gIW5tLnN0YXJ0c1dpdGgoXCJWYXJpYW50XCIpICYmICFubS5pbmNsdWRlcyhcIkJhbGR1cidzIEdhdGVcIik7XG4gIH0pO1xuXG4gIGNvbnN0IG91dHB1dHM6IFBhcnNlZE1hcmtkb3duRmlsZVtdID0gW107XG5cbiAgYmFja2dyb3VuZHMuZm9yRWFjaChiZyA9PiB7XG4gICAgY29uc3QgbGluZXM6IHN0cmluZ1tdID0gW107XG5cbi8vIFx1MjUwMFx1MjUwMFx1MjUwMCBidWlsZCBmcm9udG1hdHRlciBcdTI1MDBcdTI1MDBcdTI1MDBcbmNvbnN0IGZtID0gYnVpbGRGTShiZywgQkFDS0dST1VORF9NRVRBX0RFRlMpO1xuXG4vLyBcdTI1MDBcdTI1MDBcdTI1MDAgY29sbGVjdCBvbmx5IHRoZSBlbnRyaWVzIGZsYWdnZWQgaXNGZWF0dXJlIFx1MjUwMFx1MjUwMFx1MjUwMFxuY29uc3QgZXh0cmFUcmFpdHM6IHN0cmluZ1tdID0gQXJyYXkuaXNBcnJheShiZy5lbnRyaWVzKVxuICA/IChiZy5lbnRyaWVzIGFzIGFueVtdKVxuICAgICAgLmZpbHRlcigoZTogYW55KSA9PiBlLmRhdGE/LmlzRmVhdHVyZSAmJiB0eXBlb2YgZS5uYW1lID09PSBcInN0cmluZ1wiKVxuICAgICAgLm1hcCgoZTogYW55KSA9PiB7XG4gICAgICAgIGNvbnN0IG5hbWUgPSBlLm5hbWUucmVwbGFjZSgvXkZlYXR1cmU6XFxzKi8sIFwiXCIpO1xuICAgICAgICByZXR1cm4gYFtbJHtiZy5uYW1lfSMke25hbWV9XV1gO1xuICAgICAgfSlcbiAgOiBbXTtcblxuLy8gXHUyNTAwXHUyNTAwXHUyNTAwIHNlcmlhbGl6ZSBmcm9udG1hdHRlciBcdTI1MDBcdTI1MDBcdTI1MDBcbmNvbnN0IHlhbWwgPSBzZXJpYWxpemVGcm9udG1hdHRlcihmbSwgQkFDS0dST1VORF9NRVRBX0RFRlMpO1xubGluZXMucHVzaChcIi0tLVwiLCB5YW1sLCBcIi0tLVwiLCBcIlwiKTtcblxuIFxuICAgIC8vIHRpdGxlXG4gICAgbGluZXMucHVzaChgIyAke2JnLm5hbWV9YCwgXCJcIik7XG5cbiAgICAvLyBcdTI1MDBcdTI1MDBcdTI1MDAgc2tpbGwgcHJvZmljaWVuY2llcyBcdTI1MDBcdTI1MDBcdTI1MDBcbiAgICBpZiAoQXJyYXkuaXNBcnJheShiZy5za2lsbFByb2ZpY2llbmNpZXMpICYmIGJnLnNraWxsUHJvZmljaWVuY2llcy5sZW5ndGgpIHtcbiAgICAgIGNvbnN0IHNraWxsczogc3RyaW5nW10gPSBbXTtcbiAgICAgIGJnLnNraWxsUHJvZmljaWVuY2llcy5mb3JFYWNoKChlbnQ6IGFueSkgPT4ge1xuICAgICAgICBpZiAodHlwZW9mIGVudCA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgIHNraWxscy5wdXNoKGNhcChlbnQpKTtcbiAgICAgICAgfSBlbHNlIGlmIChlbnQuY2hvb3NlICYmIEFycmF5LmlzQXJyYXkoZW50LmNob29zZS5mcm9tKSkge1xuICAgICAgICAgIHNraWxscy5wdXNoKGBDaG9vc2UgJHtlbnQuY2hvb3NlLmFtb3VudH0gZnJvbSAke2VudC5jaG9vc2UuZnJvbS5qb2luKFwiLCBcIil9YCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgT2JqZWN0LmVudHJpZXMoZW50KVxuICAgICAgICAgICAgLmZpbHRlcigoWywgdl0pID0+IHYgPT09IHRydWUpXG4gICAgICAgICAgICAuZm9yRWFjaCgoW2tdKSA9PiBza2lsbHMucHVzaChjYXAoaykpKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICBsaW5lcy5wdXNoKGAqKlNraWxsIFByb2ZpY2llbmNpZXM6KiogJHtza2lsbHMuam9pbihcIiwgXCIpfWAsIFwiXCIpO1xuICAgIH1cblxuICAgIC8vIFx1MjUwMFx1MjUwMFx1MjUwMCBsYW5ndWFnZSBwcm9maWNpZW5jaWVzIFx1MjUwMFx1MjUwMFx1MjUwMFxuICAgIGlmIChBcnJheS5pc0FycmF5KGJnLmxhbmd1YWdlUHJvZmljaWVuY2llcykgJiYgYmcubGFuZ3VhZ2VQcm9maWNpZW5jaWVzLmxlbmd0aCkge1xuICAgICAgY29uc3QgbGFuZ3M6IHN0cmluZ1tdID0gW107XG4gICAgICBiZy5sYW5ndWFnZVByb2ZpY2llbmNpZXMuZm9yRWFjaCgoZW50OiBhbnkpID0+IHtcbiAgICAgICAgaWYgKGVudC5hbnlTdGFuZGFyZCkge1xuICAgICAgICAgIGxhbmdzLnB1c2goYCR7ZW50LmFueVN0YW5kYXJkfSBvZiB5b3VyIGNob2ljZWApO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIE9iamVjdC5lbnRyaWVzKGVudClcbiAgICAgICAgICAgIC5maWx0ZXIoKFssIHZdKSA9PiB2ID09PSB0cnVlKVxuICAgICAgICAgICAgLmZvckVhY2goKFtrXSkgPT4gbGFuZ3MucHVzaChjYXAoaykpKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICBsaW5lcy5wdXNoKGAqKkxhbmd1YWdlczoqKiAke2xhbmdzLmpvaW4oXCIsIFwiKX1gLCBcIlwiKTtcbiAgICB9XG5cbiAgICAvLyBcdTI1MDBcdTI1MDBcdTI1MDAgdG9vbCBwcm9maWNpZW5jaWVzIFx1MjUwMFx1MjUwMFx1MjUwMFxuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShiZy50b29sUHJvZmljaWVuY2llcykgJiYgYmcudG9vbFByb2ZpY2llbmNpZXMubGVuZ3RoKSB7XG4gICAgICAgIGNvbnN0IHRvb2xzOiBzdHJpbmdbXSA9IFtdO1xuXG4gICAgICAgIGJnLnRvb2xQcm9maWNpZW5jaWVzLmZvckVhY2goKGVudDogYW55KSA9PiB7XG4gICAgICAgICAgICAvLyBcdTIwMUNDaG9vc2UgWCBmcm9tIFx1MjAyNlx1MjAxRFxuICAgICAgICAgICAgaWYgKGVudC5jaG9vc2UgJiYgQXJyYXkuaXNBcnJheShlbnQuY2hvb3NlLmZyb20pKSB7XG4gICAgICAgICAgICBjb25zdCBsaXN0ID0gZW50LmNob29zZS5mcm9tLm1hcChodW1hbml6ZSkuam9pbihcIiwgXCIpO1xuICAgICAgICAgICAgdG9vbHMucHVzaChgQ2hvb3NlICR7ZW50LmNob29zZS5jb3VudH0gZnJvbSAke2xpc3R9YCk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIHBsYWluIHN0cmluZyAocmFyZSBoZXJlLCBidXQganVzdCBpbiBjYXNlKVxuICAgICAgICAgICAgaWYgKHR5cGVvZiBlbnQgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgIHRvb2xzLnB1c2goaHVtYW5pemUoZW50KSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIG9iamVjdCB3aXRoIGJvb2xlYW4gZmxhZ3M6IGdhdGhlciAqYWxsKiB0cnVlIGtleXNcbiAgICAgICAgICAgIE9iamVjdC5lbnRyaWVzKGVudClcbiAgICAgICAgICAgIC5maWx0ZXIoKFtfLCB2XSkgPT4gdiA9PT0gdHJ1ZSlcbiAgICAgICAgICAgIC5mb3JFYWNoKChba10pID0+IHRvb2xzLnB1c2goaHVtYW5pemUoaykpKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgbGluZXMucHVzaChgKipUb29sIFByb2ZpY2llbmNpZXM6KiogJHt0b29scy5qb2luKFwiLCBcIil9YCwgXCJcIik7XG4gICAgICAgIH1cblxuXG5cbiAgICAvLyBcdTI1MDBcdTI1MDBcdTI1MDAgc3RhcnRpbmcgZXF1aXBtZW50IFx1MjUwMFx1MjUwMFx1MjUwMFxuICAgIGlmIChBcnJheS5pc0FycmF5KGJnLnN0YXJ0aW5nRXF1aXBtZW50KSAmJiBiZy5zdGFydGluZ0VxdWlwbWVudC5sZW5ndGgpIHtcbiAgICAgIGxpbmVzLnB1c2goYCoqRXF1aXBtZW50OioqYCk7XG4gICAgICBiZy5zdGFydGluZ0VxdWlwbWVudC5mb3JFYWNoKChncnA6IGFueSkgPT4ge1xuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShncnAuXykpIHtcbiAgICAgICAgICBncnAuXy5mb3JFYWNoKChpdDogYW55KSA9PiBsaW5lcy5wdXNoKGAtICR7Zm10SXRlbShpdCl9YCkpO1xuICAgICAgICB9XG4gICAgICAgIFtcImFcIiwgXCJiXCJdLmZvckVhY2goa2V5ID0+IHtcbiAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShncnBba2V5XSkpIHtcbiAgICAgICAgICAgIGdycFtrZXldLmZvckVhY2goKGl0OiBhbnkpID0+IGxpbmVzLnB1c2goYC0gJHtmbXRJdGVtKGl0KX1gKSk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgICAgbGluZXMucHVzaChcIlwiKTtcbiAgICB9XG5cbiAgICAvLyBcdTI1MDBcdTI1MDBcdTI1MDAgYWxsIGZlYXR1cmUgJiBlbnRyaWVzIGJsb2NrcyBcdTI1MDBcdTI1MDBcdTI1MDBcbiAgICBpZiAoQXJyYXkuaXNBcnJheShiZy5lbnRyaWVzKSkge1xuICAgICAgYmcuZW50cmllcy5mb3JFYWNoKChlbnRyeTogYW55KSA9PiB7XG4gICAgICAgIC8vIHNraXAgdGhlIHN1bW1hcnkgbGlzdCBibG9ja1xuICAgICAgICBpZiAoZW50cnkudHlwZSA9PT0gXCJsaXN0XCIgJiYgZW50cnkuc3R5bGUgPT09IFwibGlzdC1oYW5nLW5vdGl0bGVcIikge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICAvLyBzZWN0aW9uIGhlYWRlclxuICAgICAgICBpZiAoZW50cnkubmFtZSkge1xuY29uc3QgaGVhZGVyID0gZW50cnkuZGF0YT8uaXNGZWF0dXJlXG4gID8gZW50cnkubmFtZS5yZXBsYWNlKC9eRmVhdHVyZTpcXHMqLywgXCJcIilcbiAgOiBlbnRyeS5uYW1lO1xubGluZXMucHVzaChgIyMgJHtoZWFkZXJ9YCwgXCJcIik7ICAgICAgICB9XG4gICAgICAgIC8vIGVudHJ5IGNvbnRlbnRcbiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoZW50cnkuZW50cmllcykpIHtcbiAgICAgICAgICBlbnRyeS5lbnRyaWVzLmZvckVhY2goKGU6IGFueSkgPT4ge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBlID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICAgIGxpbmVzLnB1c2gocmVwbGFjZTVlVGFncyhlKSwgXCJcIik7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGUudHlwZSA9PT0gXCJsaXN0XCIgJiYgQXJyYXkuaXNBcnJheShlLml0ZW1zKSkge1xuICAgICAgICAgICAgICBlLml0ZW1zLmZvckVhY2goKGl0OiBhbnkpID0+XG4gICAgICAgICAgICAgICAgbGluZXMucHVzaChgLSAke3JlcGxhY2U1ZVRhZ3MoaXQuZW50cnkgPz8gaXQpfWApXG4gICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgIGxpbmVzLnB1c2goXCJcIik7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGUudHlwZSA9PT0gXCJ0YWJsZVwiKSB7XG4gICAgICAgICAgICAgIGNvbnN0IHRibCA9IHJlbmRlck1hcmtkb3duVGFibGUoZSk7XG4gICAgICAgICAgICAgIGlmICh0YmwpIGxpbmVzLnB1c2godGJsLCBcIlwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIGlmIChlbnRyeS50eXBlID09PSBcImxpc3RcIiAmJiBBcnJheS5pc0FycmF5KGVudHJ5Lml0ZW1zKSkge1xuICAgICAgICAgIGVudHJ5Lml0ZW1zLmZvckVhY2goKGl0OiBhbnkpID0+XG4gICAgICAgICAgICBsaW5lcy5wdXNoKGAtICR7cmVwbGFjZTVlVGFncyhpdC5lbnRyeSA/PyBpdCl9YClcbiAgICAgICAgICApO1xuICAgICAgICAgIGxpbmVzLnB1c2goXCJcIik7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cblxuICAgIG91dHB1dHMucHVzaCh7XG4gICAgICBwYXRoOiBgUGxheWVyIEJ1aWxkL0JhY2tncm91bmRzLyR7YmcubmFtZX0ubWRgLFxuICAgICAgY29udGVudDogbGluZXMuam9pbihcIlxcblwiKS50cmltRW5kKCkgKyBcIlxcblwiLFxuICAgIH0pO1xuICB9KTtcblxuICByZXR1cm4gb3V0cHV0cztcbn1cblxuLy8gXHUyMDE0XHUyMDE0XHUyMDE0IGhlbHBlcnMgXHUyMDE0XHUyMDE0XHUyMDE0XG5mdW5jdGlvbiBjYXAoc3RyOiBzdHJpbmcpIHtcbiAgcmV0dXJuIHN0ci5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIHN0ci5zbGljZSgxKTtcbn1cblxuXG5mdW5jdGlvbiBmbXRJdGVtKGl0ZW06IGFueSk6IHN0cmluZyB7XG4gIC8vIDEpIHJhdyBzdHJpbmcgb3IgdGFnZ2VkIGl0ZW1cbiAgaWYgKHR5cGVvZiBpdGVtID09PSBcInN0cmluZ1wiKSB7XG4gICAgaWYgKGl0ZW0uaW5jbHVkZXMoXCJ8XCIpKSB7XG4gICAgICByZXR1cm4gcmVwbGFjZTVlVGFncyhge0BpdGVtICR7aXRlbX19YCk7XG4gICAgfVxuICAgIHJldHVybiByZXBsYWNlNWVUYWdzKGl0ZW0pO1xuICB9XG5cbiAgLy8gMikgcHVyZSBnb2xkLXBpZWNlIGVudHJ5OiB7IHZhbHVlOiAxMCB9IG9yIHsgY29udGFpbnNWYWx1ZTogMTUwMCB9XG4gIGNvbnN0IHByaWNlUmF3ID0gKGl0ZW0uY29udGFpbnNWYWx1ZSA/PyBpdGVtLnZhbHVlKSBhcyBudW1iZXIgfCB1bmRlZmluZWQ7XG4gIGlmIChcbiAgICB0eXBlb2YgcHJpY2VSYXcgPT09IFwibnVtYmVyXCIgJiZcbiAgICAvLyBtYWtlIHN1cmUgaXRcdTIwMTlzIG5vdCBhbHNvIGFuIFx1MjAxQ2l0ZW1cdTIwMUQgb3IgXHUyMDFDZXF1aXBtZW50VHlwZVx1MjAxRFxuICAgICFpdGVtLml0ZW0gJiZcbiAgICAhaXRlbS5lcXVpcG1lbnRUeXBlICYmXG4gICAgIWl0ZW0uc3BlY2lhbFxuICApIHtcbiAgICBjb25zdCBncCA9IHByaWNlUmF3ID49IDEwMCA/IHByaWNlUmF3IC8gMTAwIDogcHJpY2VSYXc7XG4gICAgcmV0dXJuIGAke2dwfSBncGA7XG4gIH1cblxuICAvLyAzKSBleHBsaWNpdCBpdGVtIG9iamVjdCB3aXRoIG9wdGlvbmFsIHByaWNlXG4gIGlmIChpdGVtLml0ZW0pIHtcbiAgICBjb25zdCBsaW5rID0gcmVwbGFjZTVlVGFncyhge0BpdGVtICR7aXRlbS5pdGVtfX1gKTtcbiAgICBpZiAodHlwZW9mIHByaWNlUmF3ID09PSBcIm51bWJlclwiKSB7XG4gICAgICBjb25zdCBncCA9IHByaWNlUmF3ID49IDEwMCA/IHByaWNlUmF3IC8gMTAwIDogcHJpY2VSYXc7XG4gICAgICByZXR1cm4gYCR7bGlua30gKCR7Z3B9IGdwKWA7XG4gICAgfVxuICAgIHJldHVybiBsaW5rO1xuICB9XG5cbiAgLy8gNCkgc3BlY2lhbC1jYXNlIHRleHRcbiAgaWYgKHR5cGVvZiBpdGVtLnNwZWNpYWwgPT09IFwic3RyaW5nXCIpIHtcbiAgICByZXR1cm4gaXRlbS5zcGVjaWFsO1xuICB9XG5cbiAgLy8gNSkga25vd24gZXF1aXBtZW50VHlwZSBrZXlzXG4gIGlmIChpdGVtLmVxdWlwbWVudFR5cGUpIHtcbiAgICBzd2l0Y2ggKGl0ZW0uZXF1aXBtZW50VHlwZSkge1xuICAgICAgY2FzZSBcInRvb2xBcnRpc2FuXCI6XG4gICAgICAgIHJldHVybiBcIk9uZSB0eXBlIG9mIGFydGlzYW5cdTIwMTlzIHRvb2xzIChvZiB5b3VyIGNob2ljZSlcIjtcbiAgICAgIGNhc2UgXCJpbnN0cnVtZW50TXVzaWNhbFwiOlxuICAgICAgICByZXR1cm4gXCJPbmUgdHlwZSBvZiBtdXNpY2FsIGluc3RydW1lbnQgKG9mIHlvdXIgY2hvaWNlKVwiO1xuICAgICAgY2FzZSBcInNldEdhbWluZ1wiOlxuICAgICAgICByZXR1cm4gXCJPbmUgc2V0IG9mIGdhbWluZyBkaWNlIChvZiB5b3VyIGNob2ljZSlcIjtcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiBodW1hbml6ZShpdGVtLmVxdWlwbWVudFR5cGUpO1xuICAgIH1cbiAgfVxuXG4gIC8vIDYpIGZhbGxiYWNrOiBkdW1wIGFueSBsZWZ0b3ZlciB0YWcgc3ludGF4XG4gIHJldHVybiByZXBsYWNlNWVUYWdzKEpTT04uc3RyaW5naWZ5KGl0ZW0pKTtcbn1cblxuXG5cbmZ1bmN0aW9uIGh1bWFuaXplKHN0cjogc3RyaW5nKTogc3RyaW5nIHtcbiAgY29uc3Qgc3BhY2VkID0gc3RyLnJlcGxhY2UoLyhbYS16XSkoW0EtWl0pL2csIFwiJDEgJDJcIik7XG4gIHJldHVybiBzcGFjZWQuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBzcGFjZWQuc2xpY2UoMSk7XG59XG4iLCAiLy8gc3JjL3J1bGVzZXRJbnN0YWxsZXIudHNcbmltcG9ydCB7IEFwcCB9IGZyb20gXCJvYnNpZGlhblwiO1xuaW1wb3J0IHsgQVZBSUxBQkxFX0VESVRJT05TIH0gZnJvbSBcIi4vZWRpdGlvbnNcIjtcblxuLy8gU1RBVElDIGltcG9ydCBvZiBldmVyeSBpbnN0YWxsZXIgeW91IHNoaXA6XG5pbXBvcnQgKiBhcyBmaXZlZTIwMTRJbnN0YWxsZXIgZnJvbSBcIi4vcGFyc2Vycy81ZS0yMDE0L2luc3RhbGxlclwiO1xuaW1wb3J0ICogYXMgZml2ZWUyMDI1SW5zdGFsbGVyIGZyb20gXCIuL3BhcnNlcnMvNWUtMjAyNS9pbnN0YWxsZXJcIjtcbi8vIGltcG9ydCAqIGFzIGFub3RoZXJJbnN0YWxsZXIgZnJvbSBcIi4vcGFyc2Vycy9vdGhlci9pbnN0YWxsZXJcIjtcblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGltcG9ydFJ1bGVzZXREYXRhKHBhcmFtczoge1xuICBhcHA6IEFwcDtcbiAgZWRpdGlvbktleTogc3RyaW5nO1xuICB0YXJnZXRQYXRoOiBzdHJpbmc7XG59KSB7XG4gIGNvbnN0IHsgYXBwLCBlZGl0aW9uS2V5LCB0YXJnZXRQYXRoIH0gPSBwYXJhbXM7XG4gIGNvbnN0IGVkaXRpb24gPSBBVkFJTEFCTEVfRURJVElPTlMuZmluZCgoZSkgPT4gZS5pZCA9PT0gZWRpdGlvbktleSk7XG4gIGlmICghZWRpdGlvbikge1xuICAgIGNvbnNvbGUud2FybihcIkVkaXRpb24gbm90IGZvdW5kIGZvcjpcIiwgZWRpdGlvbktleSk7XG4gICAgcmV0dXJuO1xuICB9XG4gIGlmICghZWRpdGlvbi5wYXJzZXIpIHtcbiAgICBjb25zb2xlLndhcm4oXCJObyBwYXJzZXIgZGVmaW5lZCBmb3I6XCIsIGVkaXRpb25LZXkpO1xuICAgIHJldHVybjtcbiAgfVxuXG4gIC8vIGFsbCBpbnN0YWxsZXJzIGV4cG9zZSBpbXBvcnRFZGl0aW9uRGF0YSgpXG4gIGxldCBpbnN0YWxsZXJNb2R1bGU6IHsgaW1wb3J0RWRpdGlvbkRhdGE6IChhcmdzOiB7IGFwcDogQXBwOyBlZGl0aW9uOiB0eXBlb2YgZWRpdGlvbjsgdGFyZ2V0UGF0aDogc3RyaW5nIH0pID0+IFByb21pc2U8dm9pZD4gfTtcblxuICBzd2l0Y2ggKGVkaXRpb24ucGFyc2VyKSB7XG4gICAgY2FzZSBcIjVlLTIwMTRcIjpcbiAgICAgIGluc3RhbGxlck1vZHVsZSA9IGZpdmVlMjAxNEluc3RhbGxlcjtcbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgXCI1ZS0yMDI1XCI6XG4gICAgICBpbnN0YWxsZXJNb2R1bGUgPSBmaXZlZTIwMjVJbnN0YWxsZXI7XG4gICAgICBicmVhaztcbiAgICAvLyBjYXNlIFwib3RoZXItcGFyc2VyXCI6XG4gICAgLy8gICBpbnN0YWxsZXJNb2R1bGUgPSBhbm90aGVySW5zdGFsbGVyO1xuICAgIC8vICAgYnJlYWs7XG4gICAgZGVmYXVsdDpcbiAgICAgIHRocm93IG5ldyBFcnJvcihgVW5rbm93biBwYXJzZXI6ICR7ZWRpdGlvbi5wYXJzZXJ9YCk7XG4gIH1cblxuICBhd2FpdCBpbnN0YWxsZXJNb2R1bGUuaW1wb3J0RWRpdGlvbkRhdGEoeyBhcHAsIGVkaXRpb24sIHRhcmdldFBhdGggfSk7XG59XG4iLCAiLy8gY3VzdG9tSW5zdGFsbE1vZGFsLnRzXG5pbXBvcnQgeyBBcHAsIE1vZGFsLCBzZXRJY29uLCBOb3RpY2UgfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgdHlwZSBWVnVuZGVybG9yZVRvb2xraXRQbHVnaW4gZnJvbSAnLi9tYWluJztcblxuZXhwb3J0IGNsYXNzIEluc3RhbGxpbmdNb2RhbCBleHRlbmRzIE1vZGFsIHtcbiAgY29uc3RydWN0b3IoYXBwOiBBcHApIHtcbiAgICBzdXBlcihhcHApO1xuICB9XG4gIG9uT3BlbigpIHtcbiAgICB0aGlzLmNvbnRlbnRFbC5lbXB0eSgpO1xuICAgIHRoaXMuY29udGVudEVsXG4gICAgICAuY3JlYXRlRGl2KHsgdGV4dDogJ0luc3RhbGxpbmdcdTIwMjYnLCBjbHM6ICdtb2QtcXVpZXQnIH0pXG4gICAgICAuc3R5bGUuY3NzVGV4dCA9XG4gICAgICAnZm9udC1zdHlsZTogaXRhbGljOyBjb2xvcjogdmFyKC0tdGV4dC1tdXRlZCk7IHRleHQtYWxpZ246IGNlbnRlcjsgcGFkZGluZzogMWVtOyc7XG4gIH1cbiAgb25DbG9zZSgpIHtcbiAgICB0aGlzLmNvbnRlbnRFbC5lbXB0eSgpO1xuICB9XG59XG5cbmludGVyZmFjZSBUcmVlTm9kZSB7XG4gIG5hbWU6IHN0cmluZztcbiAgZnVsbFBhdGg6IHN0cmluZztcbiAgaXNGb2xkZXI6IGJvb2xlYW47XG4gIGNoaWxkcmVuOiBSZWNvcmQ8c3RyaW5nLCBUcmVlTm9kZT47XG59XG5cbi8qKlxuICogU2hvd3MgYSBcdTIwMUNDdXN0b20gSW5zdGFsbFx1MjAxRCBtb2RhbC4gT25jZSB0aGUgdXNlciBjbGlja3MgXHUyMDFDSW5zdGFsbCBTZWxlY3RlZCxcdTIwMURcbiAqIHRoaXMgaGFuZHMgYmFjayBhbiBhcnJheSBvZiBgeyBwYXRoLCBpc0ZvbGRlciB9YCB0byBgcGx1Z2luLnBlcmZvcm1DdXN0b21JbnN0YWxsKC4uLilgLlxuICovXG5leHBvcnQgZnVuY3Rpb24gc2hvd0N1c3RvbUluc3RhbGxNb2RhbChcbiAgYXBwOiBBcHAsXG4gIHBsdWdpbjogVlZ1bmRlcmxvcmVUb29sa2l0UGx1Z2luXG4pIHtcbiAgLy8gKDEpIEJ1aWxkIGEgcXVpY2sgbWFwOiBmdWxsUGF0aCBcdTIxOTIgbWFuaWZlc3RLZXkgKGZvciBkZXBlbmRlbmN5IGxvb2t1cHMpXG4gIGNvbnN0IGZ1bGxQYXRoVG9LZXk6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4gPSB7fTtcbiAgZm9yIChjb25zdCBmIG9mIHBsdWdpbi5tYW5pZmVzdENhY2hlLmZvbGRlcnMpIHtcbiAgICBmdWxsUGF0aFRvS2V5W2YucGF0aF0gPSBmLmtleTtcbiAgfVxuICBmb3IgKGNvbnN0IGYgb2YgcGx1Z2luLm1hbmlmZXN0Q2FjaGUuZmlsZXMpIHtcbiAgICBmdWxsUGF0aFRvS2V5W2YucGF0aF0gPSBmLmtleTtcbiAgfVxuXG4gIC8vICgyKSBCdWlsZCBhIG5lc3RlZCBUcmVlTm9kZSBzdHJ1Y3R1cmUgZnJvbSBtYW5pZmVzdENhY2hlXG4gIGNvbnN0IHJvb3Q6IFRyZWVOb2RlID0geyBuYW1lOiAnJywgZnVsbFBhdGg6ICcnLCBpc0ZvbGRlcjogdHJ1ZSwgY2hpbGRyZW46IHt9IH07XG5cbiAgZnVuY3Rpb24gZW5zdXJlRm9sZGVyTm9kZShzZWdtZW50czogc3RyaW5nW10pOiBUcmVlTm9kZSB7XG4gICAgbGV0IGN1cnNvciA9IHJvb3Q7XG4gICAgbGV0IGJ1aWx0U29GYXIgPSAnJztcbiAgICBmb3IgKGNvbnN0IHNlZyBvZiBzZWdtZW50cykge1xuICAgICAgYnVpbHRTb0ZhciA9IGJ1aWx0U29GYXIgPyBgJHtidWlsdFNvRmFyfS8ke3NlZ31gIDogc2VnO1xuICAgICAgaWYgKCFjdXJzb3IuY2hpbGRyZW5bc2VnXSkge1xuICAgICAgICBjdXJzb3IuY2hpbGRyZW5bc2VnXSA9IHtcbiAgICAgICAgICBuYW1lOiBzZWcsXG4gICAgICAgICAgZnVsbFBhdGg6IGJ1aWx0U29GYXIsXG4gICAgICAgICAgaXNGb2xkZXI6IHRydWUsXG4gICAgICAgICAgY2hpbGRyZW46IHt9LFxuICAgICAgICB9O1xuICAgICAgfVxuICAgICAgY3Vyc29yID0gY3Vyc29yLmNoaWxkcmVuW3NlZ107XG4gICAgfVxuICAgIHJldHVybiBjdXJzb3I7XG4gIH1cblxuICAvLyBJbnNlcnQgYWxsIGZvbGRlciBlbnRyaWVzIGZpcnN0XG4gIGZvciAoY29uc3QgZm9sZGVyRW50cnkgb2YgcGx1Z2luLm1hbmlmZXN0Q2FjaGUuZm9sZGVycykge1xuICAgIGNvbnN0IHNlZ21lbnRzID0gZm9sZGVyRW50cnkucGF0aC5zcGxpdCgnLycpO1xuICAgIGVuc3VyZUZvbGRlck5vZGUoc2VnbWVudHMpO1xuICB9XG5cbiAgLy8gSW5zZXJ0IGFsbCBmaWxlIGVudHJpZXMgdW5kZXIgdGhlaXIgcGFyZW50IGZvbGRlciBub2Rlc1xuICBmb3IgKGNvbnN0IGZpbGVFbnRyeSBvZiBwbHVnaW4ubWFuaWZlc3RDYWNoZS5maWxlcykge1xuICAgIGNvbnN0IHNlZ21lbnRzID0gZmlsZUVudHJ5LnBhdGguc3BsaXQoJy8nKTtcbiAgICBjb25zdCBmaWxlTmFtZSA9IHNlZ21lbnRzLnBvcCgpITtcbiAgICBjb25zdCBwYXJlbnROb2RlID0gc2VnbWVudHMubGVuZ3RoID8gZW5zdXJlRm9sZGVyTm9kZShzZWdtZW50cykgOiByb290O1xuICAgIHBhcmVudE5vZGUuY2hpbGRyZW5bZmlsZU5hbWVdID0ge1xuICAgICAgbmFtZTogZmlsZU5hbWUsXG4gICAgICBmdWxsUGF0aDogZmlsZUVudHJ5LnBhdGgsXG4gICAgICBpc0ZvbGRlcjogZmFsc2UsXG4gICAgICBjaGlsZHJlbjoge30sXG4gICAgfTtcbiAgfVxuXG4gIC8vICgzKSBEZWZpbmUgb3VyIE1vZGFsIHN1YmNsYXNzXG4gIGNsYXNzIEN1c3RvbUluc3RhbGxNb2RhbCBleHRlbmRzIE1vZGFsIHtcbiAgICBwcml2YXRlIGNoZWNrYm94TWFwOiBSZWNvcmQ8c3RyaW5nLCBIVE1MSW5wdXRFbGVtZW50PiA9IHt9O1xuICAgIHByaXZhdGUgY29uc29sZUVsOiBIVE1MRWxlbWVudDsgICAgICAgICAgICAgICAgLy8gPGRpdj4gdGhhdCBob2xkcyBcdTIwMUNkZXBlbmRlbmN5IGNvbnNvbGVcdTIwMURcbiAgICBwcml2YXRlIGN1cnJlbnRCYXRjaExpbmVzOiBIVE1MRWxlbWVudFtdID0gW107ICAvLyBsaW5lcyBmcm9tIHRoZSBtb3N0IHJlY2VudCBkZXBlbmRlbmN5IHBhc3NcblxuICAgIC8vIFRvcFx1MjAxMGxldmVsIGZpbHRlciBjaGVja2JveGVzOlxuICAgIHByaXZhdGUgcGx1Z2luQ2hlY2tib3g6IEhUTUxJbnB1dEVsZW1lbnQ7XG4gICAgcHJpdmF0ZSBkZW1vQ2hlY2tib3g6IEhUTUxJbnB1dEVsZW1lbnQ7XG4gICAgcHJpdmF0ZSBzZXR0aW5nc0NoZWNrYm94OiBIVE1MSW5wdXRFbGVtZW50O1xuXG4gICAgY29uc3RydWN0b3IoYXBwOiBBcHApIHtcbiAgICAgIHN1cGVyKGFwcCk7XG4gICAgfVxuXG4gICAgb25PcGVuKCkge1xuICAgICAgdGhpcy5jb250ZW50RWwuZW1wdHkoKTtcbiAgICAgIHRoaXMudGl0bGVFbC5zZXRUZXh0KCdDdXN0b20gSW5zdGFsbCcpO1xuICAgIFxuICAgICAgY29uc3QgZGVzY3JpcHRpb25FbCA9IHRoaXMuY29udGVudEVsLmNyZWF0ZURpdigpO1xuICAgICAgZGVzY3JpcHRpb25FbC50ZXh0Q29udGVudCA9ICdBbGwgY2hlY2tlZCBpdGVtcyB3aWxsIGJlIGluc3RhbGxlZC4gRGVwZW5kZW5jaWVzIHdpbGwgYmUgbWFuYWdlZCBhdXRvbWF0aWNhbGx5Lic7XG4gICAgICBkZXNjcmlwdGlvbkVsLnN0eWxlLmNzc1RleHQgPSBgXG4gICAgICAgIGZvbnQtc2l6ZTogMC45ZW07XG4gICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW11dGVkKTtcbiAgICAgICAgbWFyZ2luLXRvcDogMC4yNWVtO1xuICAgICAgICBtYXJnaW4tYm90dG9tOiAwLjc1ZW07XG4gICAgICBgO1xuXG4gICAgICAvL1xuICAgICAgLy8gXHUyNTAwXHUyNTAwXHUyNTAwIChBKSBTSU5HTEUgU0NST0xMQUJMRSBCT1ggRk9SIFx1MjAxQ09QVElPTlMgKyBUUkVFXHUyMDFEIFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFxuICAgICAgLy9cbiAgICAgIGNvbnN0IG9wdGlvbnNCb3ggPSB0aGlzLmNvbnRlbnRFbC5jcmVhdGVEaXYoKTtcbiAgICAgIE9iamVjdC5hc3NpZ24ob3B0aW9uc0JveC5zdHlsZSwge1xuICAgICAgICBtYXhIZWlnaHQ6ICc0ODBweCcsICAgICAgICAgICAgICAgLy8gRW5vdWdoIHNwYWNlIGZvciBjaGVja2JveGVzICsgdHJlZVxuICAgICAgICBvdmVyZmxvd1k6ICdhdXRvJywgICAgICAgICAgICAgICAgLy8gRXZlcnl0aGluZyBpbnNpZGUgb3B0aW9uc0JveCB3aWxsIHNjcm9sbFxuICAgICAgICBtYXJnaW46ICcwLjVlbSAwJyxcbiAgICAgICAgYm9yZGVyOiAnMXB4IHNvbGlkIHZhcigtLWRpdmlkZXItY29sb3IpJyxcbiAgICAgICAgYm9yZGVyUmFkaXVzOiAnNHB4JyxcbiAgICAgICAgcGFkZGluZzogJzAuNWVtJyxcbiAgICAgIH0pO1xuICAgIFxuICAgICAgLy9cbiAgICAgIC8vIFx1MjUwMFx1MjUwMFx1MjUwMCAoQTEpIFx1MjAxQ0luY2x1ZGUgXHUyMDI2XHUyMDFEIENIRUNLQk9YRVMgQVQgVEhFIFRPUCBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcbiAgICAgIC8vXG4gICAgICAvLyBXZSBjcmVhdGUgb25lIHNtYWxsIFx1MjAxQ2NoZWNrYm94IHBhbmVsXHUyMDFEIHRoYXQgc2l0cyBhdCB0aGUgdG9wIG9mIG9wdGlvbnNCb3guXG4gICAgICBjb25zdCBjaGVja2JveFNlY3Rpb24gPSBvcHRpb25zQm94LmNyZWF0ZURpdigpO1xuICAgICAgT2JqZWN0LmFzc2lnbihjaGVja2JveFNlY3Rpb24uc3R5bGUsIHtcbiAgICAgICAgZGlzcGxheTogJ2ZsZXgnLFxuICAgICAgICBmbGV4RGlyZWN0aW9uOiAnY29sdW1uJyxcbiAgICAgICAgZ2FwOiAnMC41ZW0nLFxuICAgICAgICBtYXJnaW5Cb3R0b206ICcwLjc1ZW0nLFxuICAgICAgfSk7XG4gICAgXG4gICAgICAvLyAxKSBcdTIwMUNJbmNsdWRlIFBsdWdpbnNcdTIwMURcbiAgICAgIGNvbnN0IHBsdWdpblJvdyA9IGNoZWNrYm94U2VjdGlvbi5jcmVhdGVEaXYoKTtcbiAgICAgIHBsdWdpblJvdy5zdHlsZS5kaXNwbGF5ID0gJ2ZsZXgnO1xuICAgICAgcGx1Z2luUm93LnN0eWxlLmFsaWduSXRlbXMgPSAnY2VudGVyJztcbiAgICAgIHRoaXMucGx1Z2luQ2hlY2tib3ggPSBwbHVnaW5Sb3cuY3JlYXRlRWwoJ2lucHV0JywgeyB0eXBlOiAnY2hlY2tib3gnIH0pIGFzIEhUTUxJbnB1dEVsZW1lbnQ7XG4gICAgICB0aGlzLnBsdWdpbkNoZWNrYm94LmNoZWNrZWQgPSB0cnVlO1xuICAgICAgdGhpcy5wbHVnaW5DaGVja2JveC5pZCA9ICd2dnVuZGVybG9yZS1jaGVja2JveC1wbHVnaW5zJztcbiAgICAgIHRoaXMucGx1Z2luQ2hlY2tib3guc3R5bGUubWFyZ2luUmlnaHQgPSAnMC41ZW0nO1xuICAgICAgcGx1Z2luUm93LmNyZWF0ZUVsKCdsYWJlbCcsIHtcbiAgICAgICAgdGV4dDogJ0NvbW11bml0eSBQbHVnaW5zJyxcbiAgICAgICAgYXR0cjogeyBmb3I6IHRoaXMucGx1Z2luQ2hlY2tib3guaWQgfSxcbiAgICAgIH0pO1xuICAgIFxuICAgICAgLy8gMikgXHUyMDFDSW5jbHVkZSBEZW1vIEZpbGVzXHUyMDFEXG4gICAgICBjb25zdCBkZW1vUm93ID0gY2hlY2tib3hTZWN0aW9uLmNyZWF0ZURpdigpO1xuICAgICAgZGVtb1Jvdy5zdHlsZS5kaXNwbGF5ID0gJ2ZsZXgnO1xuICAgICAgZGVtb1Jvdy5zdHlsZS5hbGlnbkl0ZW1zID0gJ2NlbnRlcic7XG4gICAgICB0aGlzLmRlbW9DaGVja2JveCA9IGRlbW9Sb3cuY3JlYXRlRWwoJ2lucHV0JywgeyB0eXBlOiAnY2hlY2tib3gnIH0pIGFzIEhUTUxJbnB1dEVsZW1lbnQ7XG4gICAgICB0aGlzLmRlbW9DaGVja2JveC5jaGVja2VkID0gdHJ1ZTtcbiAgICAgIHRoaXMuZGVtb0NoZWNrYm94LmlkID0gJ3Z2dW5kZXJsb3JlLWNoZWNrYm94LWRlbW8nO1xuICAgICAgdGhpcy5kZW1vQ2hlY2tib3guc3R5bGUubWFyZ2luUmlnaHQgPSAnMC41ZW0nO1xuICAgICAgZGVtb1Jvdy5jcmVhdGVFbCgnbGFiZWwnLCB7XG4gICAgICAgIHRleHQ6ICdWVnVuZGVybG9yZSBEZW1vIEZpbGVzJyxcbiAgICAgICAgYXR0cjogeyBmb3I6IHRoaXMuZGVtb0NoZWNrYm94LmlkIH0sXG4gICAgICB9KTtcbiAgICBcbiAgICAgIC8vIDMpIFx1MjAxQ0luY2x1ZGUgVmF1bHQgU2V0dGluZ3MgKGhvdGtleXMsIGV0Yy4pXHUyMDFEXG4gICAgICBjb25zdCBzZXR0aW5nc1JvdyA9IGNoZWNrYm94U2VjdGlvbi5jcmVhdGVEaXYoKTtcbiAgICAgIHNldHRpbmdzUm93LnN0eWxlLmRpc3BsYXkgPSAnZmxleCc7XG4gICAgICBzZXR0aW5nc1Jvdy5zdHlsZS5hbGlnbkl0ZW1zID0gJ2NlbnRlcic7XG4gICAgICB0aGlzLnNldHRpbmdzQ2hlY2tib3ggPSBzZXR0aW5nc1Jvdy5jcmVhdGVFbCgnaW5wdXQnLCB7IHR5cGU6ICdjaGVja2JveCcgfSkgYXMgSFRNTElucHV0RWxlbWVudDtcbiAgICAgIHRoaXMuc2V0dGluZ3NDaGVja2JveC5jaGVja2VkID0gdHJ1ZTtcbiAgICAgIHRoaXMuc2V0dGluZ3NDaGVja2JveC5pZCA9ICd2dnVuZGVybG9yZS1jaGVja2JveC1zZXR0aW5ncyc7XG4gICAgICB0aGlzLnNldHRpbmdzQ2hlY2tib3guc3R5bGUubWFyZ2luUmlnaHQgPSAnMC41ZW0nO1xuICAgICAgc2V0dGluZ3NSb3cuY3JlYXRlRWwoJ2xhYmVsJywge1xuICAgICAgICB0ZXh0OiAnVmF1bHQgU2V0dGluZ3MgKGFwcGVyYW5jZSwgaG90a2V5cywgZ3JhcGggc2V0dXAsIGV0Yy4pJyxcbiAgICAgICAgYXR0cjogeyBmb3I6IHRoaXMuc2V0dGluZ3NDaGVja2JveC5pZCB9LFxuICAgICAgfSk7XG4gICAgXG4gICAgICAvL1xuICAgICAgLy8gXHUyNTAwXHUyNTAwXHUyNTAwIChBMikgVEhJTiBESVZJREVSIExJTkUgQkVUV0VFTiBDSEVDS0JPWEVTIEFORCBUUkVFIFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFxuICAgICAgLy9cbiAgICAgIGNvbnN0IGRpdmlkZXIgPSBvcHRpb25zQm94LmNyZWF0ZURpdigpO1xuICAgICAgT2JqZWN0LmFzc2lnbihkaXZpZGVyLnN0eWxlLCB7XG4gICAgICAgIGJvcmRlclRvcDogJzFweCBzb2xpZCB2YXIoLS1kaXZpZGVyLWNvbG9yKScsXG4gICAgICAgIG1hcmdpbjogJzAuNWVtIDAnLFxuICAgICAgfSk7XG4gICAgXG4gICAgICAvL1xuICAgICAgLy8gXHUyNTAwXHUyNTAwXHUyNTAwIChBMykgTUFOSUZFU1QgVFJFRSBSRU5ERVJFRCBCRUxPVyBUSEUgRElWSURFUiBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcbiAgICAgIC8vXG4gICAgICBjb25zdCBjb250YWluZXIgPSBvcHRpb25zQm94LmNyZWF0ZURpdigpO1xuICAgICAgT2JqZWN0LmFzc2lnbihjb250YWluZXIuc3R5bGUsIHtcbiAgICAgICAgLy8gV2Ugbm8gbG9uZ2VyIGdpdmUgdGhpcyBpbm5lciBkaXYgaXRzIG93biBzY3JvbGxiYXIuXG4gICAgICAgIC8vIEluc3RlYWQsIGNvbnRhaW5lciB3aWxsIGV4cGFuZCBpbnNpZGUgb3B0aW9uc0JveCwgYW5kXG4gICAgICAgIC8vIG9wdGlvbnNCb3ggd2lsbCBzY3JvbGwgZXZlcnl0aGluZyAoY2hlY2tib3hlcyArIHRyZWUpIHRvZ2V0aGVyLlxuICAgICAgICBtYXJnaW46ICcwJyxcbiAgICAgICAgcGFkZGluZzogJzAnLFxuICAgICAgICBib3JkZXI6ICdub25lJyxcbiAgICAgIH0pO1xuICAgIFxuICAgICAgY29uc3QgSU5ERU5UX1BYID0gMTY7XG4gICAgICBjb25zdCBsb29rdXBFbnRyeSA9IChmdWxsUGF0aDogc3RyaW5nKSA9PiB7XG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgcGx1Z2luLm1hbmlmZXN0Q2FjaGUuZm9sZGVycy5maW5kKChmKSA9PiBmLnBhdGggPT09IGZ1bGxQYXRoKSB8fFxuICAgICAgICAgIHBsdWdpbi5tYW5pZmVzdENhY2hlLmZpbGVzLmZpbmQoKGYpID0+IGYucGF0aCA9PT0gZnVsbFBhdGgpXG4gICAgICAgICk7XG4gICAgICB9O1xuICAgIFxuICAgICAgLy8gUmVyZW5kZXIgbG9naWMgZm9yIHRoZSB0cmVlOyBoaWRlcyBvcHRpb25hbCBpdGVtcyBpZiB0aGUgZGVtb0NoZWNrYm94IGlzIHVuY2hlY2tlZFxuICAgICAgY29uc3QgcmVuZGVyVHJlZSA9ICgpID0+IHtcbiAgICAgICAgY29udGFpbmVyLmVtcHR5KCk7XG4gICAgICAgIHRoaXMuY2hlY2tib3hNYXAgPSB7fTtcbiAgICAgICAgdGhpcy5jdXJyZW50QmF0Y2hMaW5lcyA9IFtdO1xuICAgIFxuICAgICAgICBjb25zdCBkZW1vQWxsb3dlZCA9IHRoaXMuZGVtb0NoZWNrYm94LmNoZWNrZWQ7XG4gICAgXG4gICAgICAgIGNvbnN0IHJlbmRlck5vZGUgPSAobm9kZTogVHJlZU5vZGUsIHBhcmVudEVsOiBIVE1MRWxlbWVudCwgaW5kZW50ID0gMCkgPT4ge1xuICAgICAgICAgIC8vIElmIHRoaXMgbm9kZSBjb3JyZXNwb25kcyB0byBhIG1hbmlmZXN0IGVudHJ5OlxuICAgICAgICAgIGlmIChub2RlLmZ1bGxQYXRoKSB7XG4gICAgICAgICAgICBjb25zdCBlbnRyeSA9IGxvb2t1cEVudHJ5KG5vZGUuZnVsbFBhdGgpO1xuICAgICAgICAgICAgaWYgKGVudHJ5ICYmIGVudHJ5Lm9wdGlvbmFsICYmICFkZW1vQWxsb3dlZCkge1xuICAgICAgICAgICAgICAvLyBTa2lwIG9wdGlvbmFsIGRlbW8gaXRlbXMgd2hlbiBcdTIwMUNJbmNsdWRlIERlbW8gRmlsZXNcdTIwMUQgaXMgZmFsc2VcbiAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICBpZiAobm9kZS5pc0ZvbGRlcikge1xuICAgICAgICAgICAgLy8gXHUyNTAwXHUyNTAwXHUyNTAwIEZPTERFUiBDQVNFIFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFxuICAgICAgICAgICAgY29uc3QgZGV0YWlscyA9IHBhcmVudEVsLmNyZWF0ZUVsKCdkZXRhaWxzJyk7XG4gICAgICAgICAgICBkZXRhaWxzLm9wZW4gPSB0cnVlO1xuICAgICAgICAgICAgZGV0YWlscy5zdHlsZS5tYXJnaW4gPSAnNHB4IDAnO1xuICAgIFxuICAgICAgICAgICAgY29uc3Qgc3VtbWFyeSA9IGRldGFpbHMuY3JlYXRlRWwoJ3N1bW1hcnknKTtcbiAgICAgICAgICAgIE9iamVjdC5hc3NpZ24oc3VtbWFyeS5zdHlsZSwge1xuICAgICAgICAgICAgICBkaXNwbGF5OiAnZmxleCcsXG4gICAgICAgICAgICAgIGFsaWduSXRlbXM6ICdjZW50ZXInLFxuICAgICAgICAgICAgICBtYXJnaW5MZWZ0OiBgJHtpbmRlbnQgKiBJTkRFTlRfUFh9cHhgLFxuICAgICAgICAgICAgICBjdXJzb3I6ICdwb2ludGVyJyxcbiAgICAgICAgICAgICAgcGFkZGluZzogJzJweCA2cHgnLFxuICAgICAgICAgICAgICBib3JkZXJSYWRpdXM6ICc0cHgnLFxuICAgICAgICAgICAgICB1c2VyU2VsZWN0OiAnbm9uZScsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHN1bW1hcnkuYWRkRXZlbnRMaXN0ZW5lcignbW91c2VlbnRlcicsICgpID0+IHtcbiAgICAgICAgICAgICAgc3VtbWFyeS5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAndmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ob3ZlciknO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBzdW1tYXJ5LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbGVhdmUnLCAoKSA9PiB7XG4gICAgICAgICAgICAgIHN1bW1hcnkuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gJ3RyYW5zcGFyZW50JztcbiAgICAgICAgICAgIH0pO1xuICAgIFxuICAgICAgICAgICAgLy8gKDEpIEZvbGRlciBjaGVja2JveFxuICAgICAgICAgICAgY29uc3QgY2IgPSBzdW1tYXJ5LmNyZWF0ZUVsKCdpbnB1dCcsIHsgdHlwZTogJ2NoZWNrYm94JyB9KSBhcyBIVE1MSW5wdXRFbGVtZW50O1xuICAgICAgICAgICAgY2Iuc3R5bGUubWFyZ2luUmlnaHQgPSAnMC41ZW0nO1xuICAgICAgICAgICAgY2IuY2hlY2tlZCA9IHRydWU7XG4gICAgICAgICAgICBjYi5zdHlsZS5jdXJzb3IgPSAncG9pbnRlcic7XG4gICAgICAgICAgICB0aGlzLmNoZWNrYm94TWFwW25vZGUuZnVsbFBhdGhdID0gY2I7XG4gICAgXG4gICAgICAgICAgICAvLyAoMikgRm9sZGVyIGljb25cbiAgICAgICAgICAgIGNvbnN0IGljb25FbCA9IHN1bW1hcnkuY3JlYXRlRGl2KHsgY2xzOiAnc3VnZ2VzdGlvbi1pY29uJyB9KTtcbiAgICAgICAgICAgIHNldEljb24oaWNvbkVsLCAnZm9sZGVyJyk7XG4gICAgICAgICAgICBpY29uRWwuc3R5bGUubWFyZ2luUmlnaHQgPSAnMC4zZW0nO1xuICAgICAgICAgICAgaWNvbkVsLnN0eWxlLnRyYW5zZm9ybSA9ICdzY2FsZSgwLjkpJztcbiAgICAgICAgICAgIGljb25FbC5zdHlsZS5vcGFjaXR5ID0gJzAuNzUnO1xuICAgIFxuICAgICAgICAgICAgLy8gKDMpIEZvbGRlciBsYWJlbFxuICAgICAgICAgICAgY29uc3QgbGFiZWwgPSBzdW1tYXJ5LmNyZWF0ZUVsKCdzcGFuJywgeyB0ZXh0OiBub2RlLm5hbWUgfSk7XG4gICAgICAgICAgICBsYWJlbC5zdHlsZS5mb250V2VpZ2h0ID0gJzYwMCc7XG4gICAgICAgICAgICBsYWJlbC5zdHlsZS5mb250U2l6ZSA9ICcwLjk1ZW0nO1xuICAgIFxuICAgICAgICAgICAgLy8gKDQpIFdoZW4gZm9sZGVyXHUyMDEwY2hlY2tib3ggdG9nZ2xlczpcbiAgICAgICAgICAgIGNiLm9uY2hhbmdlID0gKCkgPT4ge1xuICAgICAgICAgICAgICB0aGlzLnRvZ2dsZURlc2NlbmRhbnRzKG5vZGUsIGNiLmNoZWNrZWQpO1xuICAgICAgICAgICAgICB0aGlzLmVuZm9yY2VEZXBlbmRlbmNpZXMobm9kZS5mdWxsUGF0aCwgY2IuY2hlY2tlZCk7XG4gICAgICAgICAgICAgIHRoaXMuZmFkZUFsbEV4Y2VwdEN1cnJlbnRCYXRjaCgpO1xuICAgICAgICAgICAgfTtcbiAgICBcbiAgICAgICAgICAgIC8vICg1KSBSZWN1cnNlIGludG8gY2hpbGRyZW5cbiAgICAgICAgICAgIGNvbnN0IGNoaWxkcmVuQ29udGFpbmVyID0gZGV0YWlscy5jcmVhdGVEaXYoKTtcbiAgICAgICAgICAgIGNoaWxkcmVuQ29udGFpbmVyLnN0eWxlLm1hcmdpblRvcCA9ICc0cHgnO1xuICAgICAgICAgICAgZm9yIChjb25zdCBjaGlsZE5hbWUgb2YgT2JqZWN0LmtleXMobm9kZS5jaGlsZHJlbikuc29ydCgpKSB7XG4gICAgICAgICAgICAgIHJlbmRlck5vZGUobm9kZS5jaGlsZHJlbltjaGlsZE5hbWVdLCBjaGlsZHJlbkNvbnRhaW5lciwgaW5kZW50ICsgMSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIFx1MjUwMFx1MjUwMFx1MjUwMCBGSUxFIENBU0UgXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXG4gICAgICAgICAgICBjb25zdCByb3cgPSBwYXJlbnRFbC5jcmVhdGVEaXYoKTtcbiAgICAgICAgICAgIE9iamVjdC5hc3NpZ24ocm93LnN0eWxlLCB7XG4gICAgICAgICAgICAgIGRpc3BsYXk6ICdmbGV4JyxcbiAgICAgICAgICAgICAgYWxpZ25JdGVtczogJ2NlbnRlcicsXG4gICAgICAgICAgICAgIG1hcmdpbkxlZnQ6IGAke2luZGVudCAqIElOREVOVF9QWH1weGAsXG4gICAgICAgICAgICAgIHBhZGRpbmc6ICcycHggNnB4JyxcbiAgICAgICAgICAgICAgYm9yZGVyUmFkaXVzOiAnNHB4JyxcbiAgICAgICAgICAgICAgbWFyZ2luVG9wOiAnMnB4JyxcbiAgICAgICAgICAgICAgbWFyZ2luQm90dG9tOiAnMnB4JyxcbiAgICAgICAgICAgICAgdXNlclNlbGVjdDogJ25vbmUnLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByb3cuYWRkRXZlbnRMaXN0ZW5lcignbW91c2VlbnRlcicsICgpID0+IHtcbiAgICAgICAgICAgICAgcm93LnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICd2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWhvdmVyKSc7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJvdy5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWxlYXZlJywgKCkgPT4ge1xuICAgICAgICAgICAgICByb3cuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gJ3RyYW5zcGFyZW50JztcbiAgICAgICAgICAgIH0pO1xuICAgIFxuICAgICAgICAgICAgLy8gKDEpIEZpbGUgY2hlY2tib3hcbiAgICAgICAgICAgIGNvbnN0IGNiID0gcm93LmNyZWF0ZUVsKCdpbnB1dCcsIHsgdHlwZTogJ2NoZWNrYm94JyB9KSBhcyBIVE1MSW5wdXRFbGVtZW50O1xuICAgICAgICAgICAgY2Iuc3R5bGUubWFyZ2luUmlnaHQgPSAnMC41ZW0nO1xuICAgICAgICAgICAgY2IuY2hlY2tlZCA9IHRydWU7XG4gICAgICAgICAgICBjYi5zdHlsZS5jdXJzb3IgPSAncG9pbnRlcic7XG4gICAgICAgICAgICB0aGlzLmNoZWNrYm94TWFwW25vZGUuZnVsbFBhdGhdID0gY2I7XG4gICAgXG4gICAgICAgICAgICAvLyAoMikgRmlsZSBpY29uXG4gICAgICAgICAgICBjb25zdCBpY29uRWwgPSByb3cuY3JlYXRlRGl2KHsgY2xzOiAnc3VnZ2VzdGlvbi1pY29uJyB9KTtcbiAgICAgICAgICAgIHNldEljb24oaWNvbkVsLCAnZG9jdW1lbnQnKTtcbiAgICAgICAgICAgIGljb25FbC5zdHlsZS5tYXJnaW5SaWdodCA9ICcwLjNlbSc7XG4gICAgICAgICAgICBpY29uRWwuc3R5bGUudHJhbnNmb3JtID0gJ3NjYWxlKDAuOCknO1xuICAgICAgICAgICAgaWNvbkVsLnN0eWxlLm9wYWNpdHkgPSAnMC41JztcbiAgICBcbiAgICAgICAgICAgIC8vICgzKSBGaWxlIGxhYmVsXG4gICAgICAgICAgICBjb25zdCBsYWJlbCA9IHJvdy5jcmVhdGVFbCgnbGFiZWwnLCB7IHRleHQ6IG5vZGUubmFtZSB9KTtcbiAgICAgICAgICAgIGxhYmVsLnN0eWxlLmZvbnRTaXplID0gJzAuOWVtJztcbiAgICBcbiAgICAgICAgICAgIC8vICg0KSBXaGVuIGZpbGVcdTIwMTBjaGVja2JveCB0b2dnbGVzOlxuICAgICAgICAgICAgY2Iub25jaGFuZ2UgPSAoKSA9PiB7XG4gICAgICAgICAgICAgIHRoaXMuZW5mb3JjZURlcGVuZGVuY2llcyhub2RlLmZ1bGxQYXRoLCBjYi5jaGVja2VkKTtcbiAgICAgICAgICAgICAgdGhpcy5mYWRlQWxsRXhjZXB0Q3VycmVudEJhdGNoKCk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICBcbiAgICAgICAgLy8gS2ljayBvZmYgcmVjdXJzaW9uIGF0IHJvb3RcbiAgICAgICAgZm9yIChjb25zdCB0b3BOYW1lIG9mIE9iamVjdC5rZXlzKHJvb3QuY2hpbGRyZW4pLnNvcnQoKSkge1xuICAgICAgICAgIHJlbmRlck5vZGUocm9vdC5jaGlsZHJlblt0b3BOYW1lXSwgY29udGFpbmVyLCAwKTtcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICBcbiAgICAgIC8vIEZpcnN0IGRyYXcgb2YgdGhlIHRyZWUgKGJlbG93IHRoZSBkaXZpZGVyKVxuICAgICAgcmVuZGVyVHJlZSgpO1xuICAgIFxuICAgICAgLy9cbiAgICAgIC8vIFx1MjUwMFx1MjUwMFx1MjUwMCAoQikgREVQRU5ERU5DWSBDT05TT0xFIEJFTE9XIFRIRSBTQ1JPTExBQkxFIE9QVElPTlMgQk9YIFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFxuICAgICAgLy9cbiAgICAgIHRoaXMuY29uc29sZUVsID0gdGhpcy5jb250ZW50RWwuY3JlYXRlRGl2KHsgY2xzOiAnY3VzdG9tLWNvbnNvbGUnIH0pO1xuICAgICAgT2JqZWN0LmFzc2lnbih0aGlzLmNvbnNvbGVFbC5zdHlsZSwge1xuICAgICAgICBoZWlnaHQ6ICcxNDBweCcsXG4gICAgICAgIG1hcmdpbjogJzAuNWVtIDAnLFxuICAgICAgICBwYWRkaW5nOiAnOHB4JyxcbiAgICAgICAgYmFja2dyb3VuZENvbG9yOiAndmFyKC0tYmFja2dyb3VuZC1zZWNvbmRhcnkpJyxcbiAgICAgICAgYm9yZGVyOiAnMXB4IHNvbGlkIHZhcigtLWRpdmlkZXItY29sb3IpJyxcbiAgICAgICAgYm9yZGVyUmFkaXVzOiAnNHB4JyxcbiAgICAgICAgZm9udEZhbWlseTogJ21vbm9zcGFjZScsXG4gICAgICAgIGZvbnRTaXplOiAnMC44MmVtJyxcbiAgICAgICAgbGluZUhlaWdodDogJzEuNGVtJyxcbiAgICAgICAgY29sb3I6ICd2YXIoLS10ZXh0LW5vcm1hbCknLFxuICAgICAgICBvdmVyZmxvd1k6ICdhdXRvJyxcbiAgICAgICAgd2hpdGVTcGFjZTogJ3ByZS13cmFwJyxcbiAgICAgIH0pO1xuICAgICAgY29uc3QgcGxhY2Vob2xkZXIgPSB0aGlzLmNvbnNvbGVFbC5jcmVhdGVEaXYoe1xuICAgICAgICB0ZXh0OiAnPiBEZXBlbmRlbmN5IGVycm9ycyBhbmQgd2FybmluZ3Mgd2lsbCBhcHBlYXIgaGVyZVx1MjAyNicsXG4gICAgICB9KTtcbiAgICAgIE9iamVjdC5hc3NpZ24ocGxhY2Vob2xkZXIuc3R5bGUsIHtcbiAgICAgICAgb3BhY2l0eTogJzAuNCcsXG4gICAgICAgIGZvbnRTdHlsZTogJ2l0YWxpYycsXG4gICAgICAgIG1hcmdpbkJvdHRvbTogJzRweCcsXG4gICAgICB9KTtcbiAgICBcbiAgICAgIC8vXG4gICAgICAvLyBcdTI1MDBcdTI1MDBcdTI1MDAgKEMpIEVWRU5UIEhBTkRMRVJTIEZPUiBUSEUgVEhSRUUgQ0hFQ0tCT1hFUyBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcbiAgICAgIC8vXG4gICAgICAvLyAxKSBcdTIwMUNJbmNsdWRlIFBsdWdpbnNcdTIwMUQgdG9nZ2xlZFxuICAgICAgdGhpcy5wbHVnaW5DaGVja2JveC5vbmNoYW5nZSA9ICgpID0+IHtcbiAgICAgICAgY29uc3QgV0FSTklOR19DTEFTUyA9ICd2dnVuZGVybG9yZS13YXJuaW5nJztcbiAgICAgICAgaWYgKCF0aGlzLnBsdWdpbkNoZWNrYm94LmNoZWNrZWQpIHtcbiAgICAgICAgICAvLyBJZiBjb25zb2xlIG9ubHkgaGFzIHRoZSBwbGFjZWhvbGRlciwgY2xlYXIgaXRcbiAgICAgICAgICBpZiAoXG4gICAgICAgICAgICB0aGlzLmNvbnNvbGVFbC5jaGlsZHJlbi5sZW5ndGggPT09IDEgJiZcbiAgICAgICAgICAgICh0aGlzLmNvbnNvbGVFbC5jaGlsZHJlblswXSBhcyBIVE1MRWxlbWVudCkudGV4dENvbnRlbnQ/LnN0YXJ0c1dpdGgoXG4gICAgICAgICAgICAgICc+IERlcGVuZGVuY3kgY29uc29sZSdcbiAgICAgICAgICAgIClcbiAgICAgICAgICApIHtcbiAgICAgICAgICAgIHRoaXMuY29uc29sZUVsLmVtcHR5KCk7XG4gICAgICAgICAgfVxuICAgIFxuICAgICAgICAgIC8vIEFkZCBhIHJlZCB3YXJuaW5nIGxpbmVcbiAgICAgICAgICBjb25zdCB3YXJuaW5nTGluZSA9IHRoaXMuY29uc29sZUVsLmNyZWF0ZURpdih7XG4gICAgICAgICAgICB0ZXh0OlxuICAgICAgICAgICAgICAnV0FSTklORzogVGhlIFZWdW5kZXJsb3JlIFRvb2xraXQgd2lsbCBub3QgZnVuY3Rpb24gd2l0aG91dCBhbGwgaW5jbHVkZWQgcGx1Z2lucyEgWW91IHByb2JhYmx5IHdhbnQgdG8gcmUtY2hlY2sgdGhhdCBvbmUuJyxcbiAgICAgICAgICB9KTtcbiAgICAgICAgICB3YXJuaW5nTGluZS5hZGRDbGFzcyhXQVJOSU5HX0NMQVNTKTtcbiAgICAgICAgICB3YXJuaW5nTGluZS5zdHlsZS5jb2xvciA9ICcjRkYwMDAwJztcbiAgICBcbiAgICAgICAgICAvLyBTY3JvbGwgY29uc29sZSB0byBib3R0b21cbiAgICAgICAgICB0aGlzLmNvbnNvbGVFbC5zY3JvbGxUb3AgPSB0aGlzLmNvbnNvbGVFbC5zY3JvbGxIZWlnaHQ7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gUmVtb3ZlIG9ubHkgb3VyIHdhcm5pbmcgbGluZXMgKGxlYXZlIGFueSBvdGhlciBtZXNzYWdlcyBhbG9uZSlcbiAgICAgICAgICBjb25zdCBleGlzdGluZ1dhcm5pbmdzID0gdGhpcy5jb25zb2xlRWwucXVlcnlTZWxlY3RvckFsbChgLiR7V0FSTklOR19DTEFTU31gKTtcbiAgICAgICAgICBleGlzdGluZ1dhcm5pbmdzLmZvckVhY2goKGVsKSA9PiBlbC5yZW1vdmUoKSk7XG4gICAgXG4gICAgICAgICAgLy8gSWYgY29uc29sZSBpcyBub3cgZW1wdHksIHJlXHUyMDEwaW5zZXJ0IHRoZSBwbGFjZWhvbGRlclxuICAgICAgICAgIGlmICh0aGlzLmNvbnNvbGVFbC5jaGlsZHJlbi5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIGNvbnN0IHBoID0gdGhpcy5jb25zb2xlRWwuY3JlYXRlRGl2KHtcbiAgICAgICAgICAgICAgdGV4dDogJz4gRGVwZW5kZW5jeSBjb25zb2xlIG91dHB1dCB3aWxsIGFwcGVhciBoZXJlXHUyMDI2JyxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgT2JqZWN0LmFzc2lnbihwaC5zdHlsZSwge1xuICAgICAgICAgICAgICBvcGFjaXR5OiAnMC40JyxcbiAgICAgICAgICAgICAgZm9udFN0eWxlOiAnaXRhbGljJyxcbiAgICAgICAgICAgICAgbWFyZ2luQm90dG9tOiAnNHB4JyxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAvLyBTY3JvbGwgdG8gYm90dG9tIGFnYWluXG4gICAgICAgICAgdGhpcy5jb25zb2xlRWwuc2Nyb2xsVG9wID0gdGhpcy5jb25zb2xlRWwuc2Nyb2xsSGVpZ2h0O1xuICAgICAgICB9XG4gICAgICB9O1xuICAgIFxuICAgICAgLy8gMikgXHUyMDFDSW5jbHVkZSBEZW1vIEZpbGVzXHUyMDFEIHRvZ2dsZWRcbiAgICAgIHRoaXMuZGVtb0NoZWNrYm94Lm9uY2hhbmdlID0gKCkgPT4ge1xuICAgICAgICByZW5kZXJUcmVlKCk7XG4gICAgICB9O1xuICAgIFxuICAgICAgLy8gMykgXHUyMDFDSW5jbHVkZSBWYXVsdCBTZXR0aW5nc1x1MjAxRCB0b2dnbGVkXG4gICAgICAvLyAobm8gbmVlZCB0byByZS1yZW5kZXIgdGhlIHRyZWUsIHNpbmNlIHZhdWx0IHNldHRpbmdzIGFyZW5cdTIwMTl0IGluIHRoZSBtYW5pZmVzdCB0cmVlKVxuICAgIFxuICAgICAgLy9cbiAgICAgIGNvbnN0IGJ1dHRvblJvdyA9IHRoaXMuY29udGVudEVsLmNyZWF0ZURpdigpO1xuICAgICAgT2JqZWN0LmFzc2lnbihidXR0b25Sb3cuc3R5bGUsIHtcbiAgICAgICAgZGlzcGxheTogJ2ZsZXgnLFxuICAgICAgICBqdXN0aWZ5Q29udGVudDogJ3NwYWNlLWJldHdlZW4nLCAgIC8vIHB1c2ggbGVmdCB2cyByaWdodFxuICAgICAgICBhbGlnbkl0ZW1zOiAnY2VudGVyJyxcbiAgICAgICAgcGFkZGluZ1RvcDogJzhweCcsXG4gICAgICAgIGJvcmRlclRvcDogJzFweCBzb2xpZCB2YXIoLS1kaXZpZGVyLWNvbG9yKScsXG4gICAgICAgIG1hcmdpblRvcDogJzhweCcsXG4gICAgICB9KTtcbiAgICAgIFxuICAgICAgLy8gMSkgXHUyMDFDUmVzZXQgU2VsZWN0aW9uXHUyMDFEIG9uIHRoZSBMRUZUXG4gICAgICBjb25zdCByZXNldEJ0biA9IGJ1dHRvblJvdy5jcmVhdGVFbCgnYnV0dG9uJywgeyB0ZXh0OiAnUmVzZXQgU2VsZWN0aW9uJyB9KTtcbiAgICAgIHJlc2V0QnRuLnN0eWxlLmNzc1RleHQgPSBgXG4gICAgICAgIGZvbnQtc2l6ZTogMC45ZW07XG4gICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW5vcm1hbCk7XG4gICAgICBgO1xuICAgICAgcmVzZXRCdG4ub25jbGljayA9ICgpID0+IHtcbiAgICAgICAgLy8gMSkgR2F0aGVyIGFueSBleGlzdGluZyBXQVJOSU5HIGxpbmVzXG4gICAgICAgIGNvbnN0IHdhcm5pbmdzID0gQXJyYXkuZnJvbShcbiAgICAgICAgICB0aGlzLmNvbnNvbGVFbC5xdWVyeVNlbGVjdG9yQWxsKCcudnZ1bmRlcmxvcmUtd2FybmluZycpXG4gICAgICAgICkgYXMgSFRNTEVsZW1lbnRbXTtcbiAgICAgIFxuICAgICAgICAvLyAyKSBXaXBlIG91dCB0aGUgY29uc29sZSBlbnRpcmVseSAodGhpcyByZW1vdmVzIGFsbCBkZXBlbmRlbmN5IGxpbmVzKVxuICAgICAgICB0aGlzLmNvbnNvbGVFbC5lbXB0eSgpO1xuICAgICAgXG4gICAgICAgIC8vIDMpIFJlXHUyMDEwYXBwZW5kIGVhY2ggcGx1Z2luXHUyMDEwd2FybmluZyBiYWNrIGludG8gdGhlIGNvbnNvbGVcbiAgICAgICAgd2FybmluZ3MuZm9yRWFjaCgod2FybmluZ0VsKSA9PiB7XG4gICAgICAgICAgdGhpcy5jb25zb2xlRWwuYXBwZW5kQ2hpbGQod2FybmluZ0VsKTtcbiAgICAgICAgfSk7XG4gICAgICBcbiAgICAgICAgLy8gNCkgUmVcdTIwMTBjaGVjayBldmVyeSBzaW5nbGUgbWFuaWZlc3RcdTIwMTB0cmVlIGNoZWNrYm94XG4gICAgICAgIE9iamVjdC52YWx1ZXModGhpcy5jaGVja2JveE1hcCkuZm9yRWFjaCgoY2IpID0+IHtcbiAgICAgICAgICBjYi5jaGVja2VkID0gdHJ1ZTtcbiAgICAgICAgfSk7XG4gICAgICB9O1xuICAgICAgXG4gICAgICBcbiAgICAgIC8vIDIpIENyZWF0ZSBhIHJpZ2h0XHUyMDEwYWxpZ25lZCBzdWJcdTIwMTBjb250YWluZXIgZm9yIFx1MjAxQ0luc3RhbGwgU2VsZWN0ZWRcdTIwMUQgKyBcdTIwMUNDYW5jZWxcdTIwMURcbiAgICAgIGNvbnN0IHJpZ2h0R3JvdXAgPSBidXR0b25Sb3cuY3JlYXRlRGl2KCk7XG4gICAgICBPYmplY3QuYXNzaWduKHJpZ2h0R3JvdXAuc3R5bGUsIHtcbiAgICAgICAgZGlzcGxheTogJ2ZsZXgnLFxuICAgICAgICBnYXA6ICcwLjVlbScsXG4gICAgICB9KTtcbiAgICAgIFxuICAgICAgLy8gMmEpIFx1MjAxQ0luc3RhbGwgU2VsZWN0ZWRcdTIwMUQgKHByaW1hcnkgQ1RBKVxuICAgICAgY29uc3QgaW5zdGFsbEJ0biA9IHJpZ2h0R3JvdXAuY3JlYXRlRWwoJ2J1dHRvbicsIHtcbiAgICAgICAgdGV4dDogJ0luc3RhbGwgU2VsZWN0ZWQnLFxuICAgICAgICBjbHM6ICdtb2QtY3RhJyxcbiAgICAgIH0pO1xuICAgICAgaW5zdGFsbEJ0bi5vbmNsaWNrID0gYXN5bmMgKCkgPT4ge1xuICAgICAgICBpbnN0YWxsQnRuLnNldEF0dHJpYnV0ZSgnZGlzYWJsZWQnLCAnJyk7XG4gICAgICBcbiAgICAgICAgLy8gKGkpIENsb3NlIHRoaXMgY3VzdG9tXHUyMDEwaW5zdGFsbCBtb2RhbFxuICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICBcbiAgICAgICAgLy8gKGlpKSBTaG93IFx1MjAxQ0luc3RhbGxpbmdcdTIwMjZcdTIwMUQgcGxhY2Vob2xkZXJcbiAgICAgICAgY29uc3QgaW5zdGFsbGluZyA9IG5ldyBJbnN0YWxsaW5nTW9kYWwoYXBwKTtcbiAgICAgICAgaW5zdGFsbGluZy5vcGVuKCk7XG4gICAgICBcbiAgICAgICAgLy8gKGlpaSkgR2F0aGVyIGFsbCBjaGVja2VkIG1hbmlmZXN0IGVudHJpZXNcbiAgICAgICAgY29uc3QgdG9JbnN0YWxsOiB7IHBhdGg6IHN0cmluZzsgaXNGb2xkZXI6IGJvb2xlYW4gfVtdID0gW107XG4gICAgICAgIGZvciAoY29uc3QgW2ZwLCBjaGVja2JveF0gb2YgT2JqZWN0LmVudHJpZXModGhpcy5jaGVja2JveE1hcCkpIHtcbiAgICAgICAgICBpZiAoY2hlY2tib3guY2hlY2tlZCkge1xuICAgICAgICAgICAgY29uc3QgaXNGb2xkZXIgPSBwbHVnaW4ubWFuaWZlc3RDYWNoZS5mb2xkZXJzLnNvbWUoKGYpID0+IGYucGF0aCA9PT0gZnApO1xuICAgICAgICAgICAgdG9JbnN0YWxsLnB1c2goeyBwYXRoOiBmcCwgaXNGb2xkZXIgfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICBcbiAgICAgICAgLy8gKGl2KSBJZiBcdTIwMUNJbmNsdWRlIFBsdWdpbnNcdTIwMUQgaXMgY2hlY2tlZCBcdTIxOTIgcHVsbCBkb3duIGAub2JzaWRpYW4vcGx1Z2luc2AgKyBgY29tbXVuaXR5LXBsdWdpbnMuanNvbmBcbiAgICAgICAgLy8gKGl2KSBJZiBcdTIwMUNJbmNsdWRlIFBsdWdpbnNcdTIwMUQgaXMgY2hlY2tlZCBcdTIxOTIgZmV0Y2ggdGhlIEdpdEh1Yi1zaWRlIC5vYnNpZGlhbi9wbHVnaW5zIGFuZCBvbmx5IGVucXVldWVcbi8vICAgICB0aG9zZSBmb2xkZXJzL2ZpbGVzIHRoYXQgYXJlblx1MjAxOXQgYWxyZWFkeSBpbiB0aGUgdmF1bHQuXG5pZiAodGhpcy5wbHVnaW5DaGVja2JveC5jaGVja2VkKSB7XG4gIHRyeSB7XG4gICAgY29uc3QgYXBpVXJsID1cbiAgICAgICdodHRwczovL2FwaS5naXRodWIuY29tL3JlcG9zL3NsYW13aXNlMDAwMS9WVnVuZGVybG9yZS1Ub29sa2l0LUZ1bGwvY29udGVudHMvLm9ic2lkaWFuL3BsdWdpbnM/cmVmPW1haW4nO1xuICAgIGNvbnN0IHJlc3AgPSBhd2FpdCBmZXRjaChhcGlVcmwpO1xuICAgIGlmIChyZXNwLm9rKSB7XG4gICAgICBjb25zdCBwbHVnaW5GaWxlczogQXJyYXk8eyBuYW1lOiBzdHJpbmc7IHR5cGU6ICdmaWxlJyB8ICdkaXInIH0+ID0gYXdhaXQgcmVzcC5qc29uKCk7XG4gICAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgcGx1Z2luRmlsZXMpIHtcbiAgICAgICAgY29uc3QgbG9jYWxQYXRoID0gYC5vYnNpZGlhbi9wbHVnaW5zLyR7aXRlbS5uYW1lfWA7XG4gICAgICAgIC8vIElmIHRoYXQgcGx1Z2luIGZvbGRlciAob3IgZmlsZSkgZG9lcyBfbm90XyBhbHJlYWR5IGV4aXN0IGluIHRoZSB2YXVsdCwgZW5xdWV1ZSBpdDpcbiAgICAgICAgY29uc3QgZXhpc3RzTG9jYWxseSA9IGF3YWl0IHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXIuZXhpc3RzKGxvY2FsUGF0aCk7XG4gICAgICAgIGlmICghZXhpc3RzTG9jYWxseSkge1xuICAgICAgICAgIGlmIChpdGVtLnR5cGUgPT09ICdkaXInKSB7XG4gICAgICAgICAgICB0b0luc3RhbGwucHVzaCh7IHBhdGg6IGxvY2FsUGF0aCwgaXNGb2xkZXI6IHRydWUgfSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRvSW5zdGFsbC5wdXNoKHsgcGF0aDogbG9jYWxQYXRoLCBpc0ZvbGRlcjogZmFsc2UgfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9IGNhdGNoIChlKSB7XG4gICAgY29uc29sZS5lcnJvcignRmFpbGVkIHRvIGVudW1lcmF0ZSAub2JzaWRpYW4vcGx1Z2lucyBmcm9tIEdpdEh1YjonLCBlKTtcbiAgfVxuXG4gIC8vIEV2ZW4gaWYgY29tbXVuaXR5LXBsdWdpbnMuanNvbiBhbHJlYWR5IGV4aXN0cywgeW91IG1pZ2h0IHdhbnQgdG8gb3ZlcndyaXRlIGl0LFxuICAvLyBvciB5b3UgY2FuIGFsc28gY2hlY2sgYWRhcHRlci5leGlzdHMoLi4uKSBiZWZvcmUgcHVzaGluZyBpdC4gRXhhbXBsZSBhbHdheXMgb3ZlcndyaXRlczpcbiAgdG9JbnN0YWxsLnB1c2goeyBwYXRoOiAnLm9ic2lkaWFuL2NvbW11bml0eS1wbHVnaW5zLmpzb24nLCBpc0ZvbGRlcjogZmFsc2UgfSk7XG59XG5cbiAgICAgIFxuICAgICAgICAvLyAodikgSWYgXHUyMDFDSW5jbHVkZSBWYXVsdCBTZXR0aW5nc1x1MjAxRCBpcyBjaGVja2VkIFx1MjE5MiBhZGQgdGhlIGZvdXIgSlNPTiBmaWxlcyB1bmRlciBgLm9ic2lkaWFuL2BcbiAgICAgICAgaWYgKHRoaXMuc2V0dGluZ3NDaGVja2JveC5jaGVja2VkKSB7XG4gICAgICAgICAgY29uc3QgdmF1bHRTZXR0aW5nc1BhdGhzID0gW1xuICAgICAgICAgICAgJy5vYnNpZGlhbi9hcHAuanNvbicsXG4gICAgICAgICAgICAnLm9ic2lkaWFuL2FwcGVhcmFuY2UuanNvbicsXG4gICAgICAgICAgICAnLm9ic2lkaWFuL2dyYXBoLmpzb24nLFxuICAgICAgICAgICAgJy5vYnNpZGlhbi9ob3RrZXlzLmpzb24nLFxuICAgICAgICAgIF07XG4gICAgICAgICAgZm9yIChjb25zdCB2cyBvZiB2YXVsdFNldHRpbmdzUGF0aHMpIHtcbiAgICAgICAgICAgIHRvSW5zdGFsbC5wdXNoKHsgcGF0aDogdnMsIGlzRm9sZGVyOiBmYWxzZSB9KTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIFxuICAgICAgICAvLyAodmkpIFBlcmZvcm0gdGhlIGFjdHVhbCBpbnN0YWxsXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgYXdhaXQgcGx1Z2luLnBlcmZvcm1DdXN0b21JbnN0YWxsKHRvSW5zdGFsbCk7XG4gICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1x1Mjc0QyBwZXJmb3JtQ3VzdG9tSW5zdGFsbCgpIHRocmV3OicsIGVycik7XG4gICAgICAgICAgbmV3IE5vdGljZSgnXHUyNzRDIEN1c3RvbSBpbnN0YWxsIGZhaWxlZFx1MjAxNHNlZSBjb25zb2xlJyk7XG4gICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgaW5zdGFsbGluZy5jbG9zZSgpO1xuICAgICAgICB9XG4gICAgICB9O1xuICAgICAgXG4gICAgICAvLyAyYikgXHUyMDFDQ2FuY2VsXHUyMDFEIG9uIHRoZSByaWdodFxuICAgICAgY29uc3QgY2FuY2VsQnRuID0gcmlnaHRHcm91cC5jcmVhdGVFbCgnYnV0dG9uJywgeyB0ZXh0OiAnQ2FuY2VsJyB9KTtcbiAgICAgIGNhbmNlbEJ0bi5vbmNsaWNrID0gKCkgPT4gdGhpcy5jbG9zZSgpO1xuICAgIH1cbiAgICBcblxuICAgIG9uQ2xvc2UoKSB7XG4gICAgICB0aGlzLmNvbnRlbnRFbC5lbXB0eSgpO1xuICAgIH1cblxuICAgIC8qKiBSZWN1cnNpdmVseSB0b2dnbGUgZGVzY2VuZGFudHNcdTIwMTkgY2hlY2tlZFx1MjAxMHN0YXRlIHdpdGhvdXQgbG9nZ2luZyBlYWNoIG9uZS4gKi9cbiAgICBwcml2YXRlIHRvZ2dsZURlc2NlbmRhbnRzKG5vZGU6IFRyZWVOb2RlLCBjaGVja2VkOiBib29sZWFuKSB7XG4gICAgICBmb3IgKGNvbnN0IGNoaWxkIG9mIE9iamVjdC52YWx1ZXMobm9kZS5jaGlsZHJlbikpIHtcbiAgICAgICAgY29uc3QgY2IgPSB0aGlzLmNoZWNrYm94TWFwW2NoaWxkLmZ1bGxQYXRoXTtcbiAgICAgICAgaWYgKGNiKSBjYi5jaGVja2VkID0gY2hlY2tlZDtcbiAgICAgICAgaWYgKGNoaWxkLmlzRm9sZGVyKSB7XG4gICAgICAgICAgdGhpcy50b2dnbGVEZXNjZW5kYW50cyhjaGlsZCwgY2hlY2tlZCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBFbmZvcmNlIGRlcGVuZGVuY3kgbG9naWMgKGF1dG9cdTIwMTBjaGVjayBwcmVyZXF1aXNpdGVzLCBhdXRvXHUyMDEwdW5jaGVjayBkZXBlbmRlbnRzKS5cbiAgICAgKiBFYWNoIHRpbWUgd2UgZmxpcCBhIGJveCBcdTIwMUNiZWNhdXNlIG9mIGEgZGVwZW5kZW5jeSxcdTIwMUQgd2UgbG9nIG9uZSBsaW5lIHRvIHRoZSBjb25zb2xlLlxuICAgICAqL1xuICAgIHByaXZhdGUgZW5mb3JjZURlcGVuZGVuY2llcyhjaGFuZ2VkUGF0aDogc3RyaW5nLCBpc0NoZWNrZWQ6IGJvb2xlYW4pIHtcbiAgICAgIGNvbnN0IGNoYW5nZWRLZXkgPSBmdWxsUGF0aFRvS2V5W2NoYW5nZWRQYXRoXTtcbiAgICAgIGlmICghY2hhbmdlZEtleSkgcmV0dXJuO1xuXG4gICAgICAvLyBCdWlsZCBhIHF1aWNrIG1hcDogZnVsbFBhdGggXHUyMTkyIGRpc3BsYXlOYW1lXG4gICAgICBjb25zdCBmdWxsUGF0aFRvRGlzcGxheTogUmVjb3JkPHN0cmluZywgc3RyaW5nPiA9IHt9O1xuICAgICAgZm9yIChjb25zdCBmIG9mIHBsdWdpbi5tYW5pZmVzdENhY2hlLmZvbGRlcnMpIHtcbiAgICAgICAgZnVsbFBhdGhUb0Rpc3BsYXlbZi5wYXRoXSA9IGYuZGlzcGxheU5hbWUgPz8gZi5wYXRoLnNwbGl0KCcvJykucG9wKCkhO1xuICAgICAgfVxuICAgICAgZm9yIChjb25zdCBmIG9mIHBsdWdpbi5tYW5pZmVzdENhY2hlLmZpbGVzKSB7XG4gICAgICAgIGZ1bGxQYXRoVG9EaXNwbGF5W2YucGF0aF0gPSBmLmRpc3BsYXlOYW1lID8/IGYucGF0aC5zcGxpdCgnLycpLnBvcCgpITtcbiAgICAgIH1cbiAgICAgIGNvbnN0IGNoYW5nZWROYW1lID0gZnVsbFBhdGhUb0Rpc3BsYXlbY2hhbmdlZFBhdGhdID8/IGNoYW5nZWRQYXRoLnNwbGl0KCcvJykucG9wKCkhO1xuXG4gICAgICAvLyBTdGFydCBhIG5ldyBcdTIwMUNiYXRjaFx1MjAxRDpcbiAgICAgIHRoaXMuY3VycmVudEJhdGNoTGluZXMgPSBbXTtcblxuICAgICAgaWYgKGlzQ2hlY2tlZCkge1xuICAgICAgICAvLyBcdTI1QjYgQXV0b1x1MjAxMGNoZWNrIHByZXJlcXVpc2l0ZXNcbiAgICAgICAgY29uc3Qgc3RhY2sgPSBbY2hhbmdlZEtleV07XG4gICAgICAgIHdoaWxlIChzdGFjay5sZW5ndGgpIHtcbiAgICAgICAgICBjb25zdCBjdXIgPSBzdGFjay5wb3AoKSE7XG4gICAgICAgICAgY29uc3QgZGVwcyA9IHBsdWdpbi5yZXF1aXJlc0dyYXBoLmdldChjdXIpID8/IFtdO1xuICAgICAgICAgIGZvciAoY29uc3QgZGVwS2V5IG9mIGRlcHMpIHtcbiAgICAgICAgICAgIGNvbnN0IGRlcEVudHJ5ID1cbiAgICAgICAgICAgICAgcGx1Z2luLm1hbmlmZXN0Q2FjaGUuZmlsZXMuZmluZCgoeCkgPT4geC5rZXkgPT09IGRlcEtleSkgfHxcbiAgICAgICAgICAgICAgcGx1Z2luLm1hbmlmZXN0Q2FjaGUuZm9sZGVycy5maW5kKCh4KSA9PiB4LmtleSA9PT0gZGVwS2V5KTtcbiAgICAgICAgICAgIGlmIChkZXBFbnRyeSkge1xuICAgICAgICAgICAgICBjb25zdCBkZXBQYXRoID0gZGVwRW50cnkucGF0aDtcbiAgICAgICAgICAgICAgY29uc3QgY2IgPSB0aGlzLmNoZWNrYm94TWFwW2RlcFBhdGhdO1xuICAgICAgICAgICAgICBpZiAoY2IgJiYgIWNiLmNoZWNrZWQpIHtcbiAgICAgICAgICAgICAgICBjYi5jaGVja2VkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBjb25zdCBkZXBOYW1lID0gZnVsbFBhdGhUb0Rpc3BsYXlbZGVwUGF0aF0gPz8gZGVwUGF0aC5zcGxpdCgnLycpLnBvcCgpITtcbiAgICAgICAgICAgICAgICBjb25zdCBsaW5lRWwgPSB0aGlzLmFwcGVuZExvZ0xpbmUoXG4gICAgICAgICAgICAgICAgICBkZXBQYXRoLFxuICAgICAgICAgICAgICAgICAgYD4gJHtkZXBOYW1lfSBhdXRvbWF0aWNhbGx5IGNoZWNrZWQgKHJlcXVpcmVkIGJ5ICR7Y2hhbmdlZE5hbWV9KWBcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudEJhdGNoTGluZXMucHVzaChsaW5lRWwpO1xuICAgICAgICAgICAgICAgIHN0YWNrLnB1c2goZGVwS2V5KTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gXHUyNUI2IEF1dG9cdTIwMTB1bmNoZWNrIGRlcGVuZGVudHNcbiAgICAgICAgY29uc3QgZGVwZW5kZW50c09mID0gKHRhcmdldEtleTogc3RyaW5nKSA9PlxuICAgICAgICAgIEFycmF5LmZyb20ocGx1Z2luLnJlcXVpcmVzR3JhcGguZW50cmllcygpKVxuICAgICAgICAgICAgLmZpbHRlcigoWywgZGVwc10pID0+IGRlcHMuaW5jbHVkZXModGFyZ2V0S2V5KSlcbiAgICAgICAgICAgIC5tYXAoKFtrXSkgPT4gayk7XG5cbiAgICAgICAgY29uc3Qgc3RhY2sgPSBbY2hhbmdlZEtleV07XG4gICAgICAgIHdoaWxlIChzdGFjay5sZW5ndGgpIHtcbiAgICAgICAgICBjb25zdCBjdXIgPSBzdGFjay5wb3AoKSE7XG4gICAgICAgICAgZm9yIChjb25zdCBjaGlsZEtleSBvZiBkZXBlbmRlbnRzT2YoY3VyKSkge1xuICAgICAgICAgICAgY29uc3QgY2hpbGRFbnRyeSA9XG4gICAgICAgICAgICAgIHBsdWdpbi5tYW5pZmVzdENhY2hlLmZpbGVzLmZpbmQoKHgpID0+IHgua2V5ID09PSBjaGlsZEtleSkgfHxcbiAgICAgICAgICAgICAgcGx1Z2luLm1hbmlmZXN0Q2FjaGUuZm9sZGVycy5maW5kKCh4KSA9PiB4LmtleSA9PT0gY2hpbGRLZXkpO1xuICAgICAgICAgICAgaWYgKGNoaWxkRW50cnkpIHtcbiAgICAgICAgICAgICAgY29uc3QgY2hpbGRQYXRoID0gY2hpbGRFbnRyeS5wYXRoO1xuICAgICAgICAgICAgICBjb25zdCBjYiA9IHRoaXMuY2hlY2tib3hNYXBbY2hpbGRQYXRoXTtcbiAgICAgICAgICAgICAgaWYgKGNiICYmIGNiLmNoZWNrZWQpIHtcbiAgICAgICAgICAgICAgICBjYi5jaGVja2VkID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgY29uc3QgY2hpbGROYW1lID0gZnVsbFBhdGhUb0Rpc3BsYXlbY2hpbGRQYXRoXSA/PyBjaGlsZFBhdGguc3BsaXQoJy8nKS5wb3AoKSE7XG4gICAgICAgICAgICAgICAgY29uc3QgbGluZUVsID0gdGhpcy5hcHBlbmRMb2dMaW5lKFxuICAgICAgICAgICAgICAgICAgY2hpbGRQYXRoLFxuICAgICAgICAgICAgICAgICAgYD4gJHtjaGlsZE5hbWV9IGF1dG9tYXRpY2FsbHkgdW5jaGVja2VkIChkZXBlbmRzIG9uICR7Y2hhbmdlZE5hbWV9KWBcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudEJhdGNoTGluZXMucHVzaChsaW5lRWwpO1xuICAgICAgICAgICAgICAgIHN0YWNrLnB1c2goY2hpbGRLZXkpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHRoaXMuZmFkZUFsbEV4Y2VwdEN1cnJlbnRCYXRjaCgpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEFwcGVuZCBvbmUgXHUyMDFDbW9ub1x1MjAxRCBsaW5lIHBsdXMgYSB0aW55IHVuZG8gYnV0dG9uLiBSZXR1cm5zIHRoZSBuZXcgPGRpdj4uXG4gICAgICovXG4gICAgcHJpdmF0ZSBhcHBlbmRMb2dMaW5lKGZ1bGxQYXRoOiBzdHJpbmcsIHRleHQ6IHN0cmluZyk6IEhUTUxFbGVtZW50IHtcblxuICAgICAgLy8gKDIpIEJ1aWxkIGEgbmV3IDxkaXY+IGZvciB0aGlzIGxpbmVcbiAgICAgIGNvbnN0IGxpbmUgPSB0aGlzLmNvbnNvbGVFbC5jcmVhdGVEaXYoKTtcbiAgICAgIE9iamVjdC5hc3NpZ24obGluZS5zdHlsZSwge1xuICAgICAgICBkaXNwbGF5OiAnZmxleCcsXG4gICAgICAgIGp1c3RpZnlDb250ZW50OiAnc3BhY2UtYmV0d2VlbicsXG4gICAgICAgIGFsaWduSXRlbXM6ICdjZW50ZXInLFxuICAgICAgICBtYXJnaW46ICcycHggMCcsXG4gICAgICAgIG9wYWNpdHk6ICcxLjAnLFxuICAgICAgICB0cmFuc2l0aW9uOiAnb3BhY2l0eSAwLjJzIGVhc2UnLFxuICAgICAgfSk7XG5cbiAgICAgIC8vICgzKSBMZWZ0OiB0aGUgbWVzc2FnZSB0ZXh0XG4gICAgICBsaW5lLmNyZWF0ZVNwYW4oeyB0ZXh0IH0pO1xuXG4gICAgICAvLyAoNCkgUmlnaHQ6IFx1MjAxQ3VuZG9cdTIwMUQgYnV0dG9uXG4gICAgICBjb25zdCB1bmRvQnRuID0gbGluZS5jcmVhdGVFbCgnYnV0dG9uJywgeyB0ZXh0OiAndW5kbycsIGNsczogJ21vZC1zbWFsbCcgfSk7XG4gICAgICBPYmplY3QuYXNzaWduKHVuZG9CdG4uc3R5bGUsIHtcbiAgICAgICAgbWFyZ2luTGVmdDogJzAuNWVtJyxcbiAgICAgICAgZm9udFNpemU6ICcwLjc1ZW0nLFxuICAgICAgICBwYWRkaW5nOiAnMnB4IDRweCcsXG4gICAgICAgIGN1cnNvcjogJ3BvaW50ZXInLFxuICAgICAgfSk7XG4gICAgICB1bmRvQnRuLm9uY2xpY2sgPSAoKSA9PiB7XG4gICAgICAgIGNvbnN0IGNiID0gdGhpcy5jaGVja2JveE1hcFtmdWxsUGF0aF07XG4gICAgICAgIGlmIChjYikge1xuICAgICAgICAgIGNiLmNoZWNrZWQgPSAhY2IuY2hlY2tlZDtcbiAgICAgICAgICB0aGlzLmVuZm9yY2VEZXBlbmRlbmNpZXMoZnVsbFBhdGgsIGNiLmNoZWNrZWQpO1xuICAgICAgICAgIHRoaXMuZmFkZUFsbEV4Y2VwdEN1cnJlbnRCYXRjaCgpO1xuICAgICAgICB9XG4gICAgICB9O1xuXG4gICAgICAvLyAoNSkgU2Nyb2xsIHRoZSBjb25zb2xlIHRvIGJvdHRvbVxuICAgICAgdGhpcy5jb25zb2xlRWwuc2Nyb2xsVG9wID0gdGhpcy5jb25zb2xlRWwuc2Nyb2xsSGVpZ2h0O1xuICAgICAgcmV0dXJuIGxpbmU7XG4gICAgfVxuXG4gICAgLyoqIEZhZGUgb3V0IGV2ZXJ5IGNvbnNvbGUgbGluZSB0aGF0IGlzICpub3QqIHBhcnQgb2YgY3VycmVudEJhdGNoTGluZXMuICovXG4gICAgcHJpdmF0ZSBmYWRlQWxsRXhjZXB0Q3VycmVudEJhdGNoKCkge1xuICAgICAgY29uc3QgdG90YWwgPSB0aGlzLmNvbnNvbGVFbC5jaGlsZHJlbi5sZW5ndGg7XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRvdGFsOyBpKyspIHtcbiAgICAgICAgY29uc3QgY2hpbGQgPSB0aGlzLmNvbnNvbGVFbC5jaGlsZHJlbltpXSBhcyBIVE1MRWxlbWVudDtcbiAgICAgICAgaWYgKHRoaXMuY3VycmVudEJhdGNoTGluZXMuaW5jbHVkZXMoY2hpbGQpKSB7XG4gICAgICAgICAgY2hpbGQuc3R5bGUub3BhY2l0eSA9ICcxLjAnO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNoaWxkLnN0eWxlLm9wYWNpdHkgPSAnMC42JztcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8vICg0KSBGaW5hbGx5LCBvcGVuIHRoZSBtb2RhbFxuICBuZXcgQ3VzdG9tSW5zdGFsbE1vZGFsKGFwcCkub3BlbigpO1xufVxuIiwgImltcG9ydCB7IFZhdWx0IH0gZnJvbSAnb2JzaWRpYW4nO1xuaW1wb3J0IHsgY3JlYXRlSGFzaCB9IGZyb20gJ2NyeXB0byc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgVG9vbGtpdEZpbGVDYWNoZUVudHJ5IHtcblx0aGFzaDogc3RyaW5nO1xuXHRnaXRodWJQYXRoOiBzdHJpbmc7XG59XG5cbmV4cG9ydCB0eXBlIFRvb2xraXRGaWxlQ2FjaGUgPSBSZWNvcmQ8c3RyaW5nLCBUb29sa2l0RmlsZUNhY2hlRW50cnk+OyAvLyB2YXVsdFBhdGggPT4ge2hhc2gsIGdpdGh1YlBhdGh9XG5cbmV4cG9ydCBjbGFzcyBUb29sa2l0RmlsZUNhY2hlTWFuYWdlciB7XG5cdHByaXZhdGUgdmF1bHQ6IFZhdWx0O1xuXHRwcml2YXRlIGNhY2hlOiBUb29sa2l0RmlsZUNhY2hlO1xuXHRwcml2YXRlIHNhdmU6ICgpID0+IFByb21pc2U8dm9pZD47XG5cblx0Y29uc3RydWN0b3IodmF1bHQ6IFZhdWx0LCBpbml0aWFsQ2FjaGU6IFRvb2xraXRGaWxlQ2FjaGUgfCB1bmRlZmluZWQsIHNhdmVDYWxsYmFjazogKCkgPT4gUHJvbWlzZTx2b2lkPikge1xuXHRcdHRoaXMudmF1bHQgPSB2YXVsdDtcblx0XHR0aGlzLmNhY2hlID0gaW5pdGlhbENhY2hlIHx8IHt9O1xuXHRcdHRoaXMuc2F2ZSA9IHNhdmVDYWxsYmFjaztcblx0fVxuXG5cdHByaXZhdGUgaGFzaENvbnRlbnQoY29udGVudDogc3RyaW5nKTogc3RyaW5nIHtcblx0XHRyZXR1cm4gY3JlYXRlSGFzaCgnc2hhMjU2JykudXBkYXRlKGNvbnRlbnQpLmRpZ2VzdCgnaGV4Jyk7XG5cdH1cblxuXHRhc3luYyBpc1VwVG9EYXRlKHZhdWx0UGF0aDogc3RyaW5nKTogUHJvbWlzZTxib29sZWFuPiB7XG5cdFx0Ly9jb25zb2xlLmxvZyhgXHVEODNEXHVERDBEIENoZWNraW5nIGlmIFwiJHt2YXVsdFBhdGh9XCIgaXMgdXAgdG8gZGF0ZS5gKTtcblx0XG5cdFx0Y29uc3QgZW50cnkgPSB0aGlzLmNhY2hlW3ZhdWx0UGF0aF07XG5cdFx0aWYgKCFlbnRyeSkge1xuXHRcdFx0Ly9jb25zb2xlLmxvZyhgXHUyNzRDIE5vIGNhY2hlZCBoYXNoIGZvdW5kIGZvcjogJHt2YXVsdFBhdGh9YCk7XG5cdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0fVxuXHRcblx0XHRjb25zdCBleGlzdHMgPSBhd2FpdCB0aGlzLnZhdWx0LmFkYXB0ZXIuZXhpc3RzKHZhdWx0UGF0aCk7XG5cdFx0aWYgKCFleGlzdHMpIHtcblx0XHRcdC8vY29uc29sZS5sb2coYFx1Mjc0QyBGaWxlIGRvZXMgbm90IGV4aXN0IGluIHZhdWx0OiAke3ZhdWx0UGF0aH1gKTtcblx0XHRcdHJldHVybiBmYWxzZTtcblx0XHR9XG5cdFxuXHRcdGNvbnN0IGNvbnRlbnQgPSBhd2FpdCB0aGlzLnZhdWx0LmFkYXB0ZXIucmVhZCh2YXVsdFBhdGgpO1xuXHRcdGNvbnN0IGxvY2FsSGFzaCA9IHRoaXMuaGFzaENvbnRlbnQoY29udGVudCk7XG5cdFx0Y29uc3QgaXNTYW1lID0gbG9jYWxIYXNoID09PSBlbnRyeS5oYXNoO1xuXHRcblx0XHQvL2NvbnNvbGUubG9nKGBcdUQ4M0RcdUREMjIgTG9jYWwgaGFzaDogICR7bG9jYWxIYXNofWApO1xuXHRcdC8vY29uc29sZS5sb2coYFx1RDgzRFx1RENFNiBDYWNoZWQgaGFzaDogJHtlbnRyeS5oYXNofWApO1xuXHRcdC8vY29uc29sZS5sb2coaXNTYW1lID8gYFx1MjcwNSBGaWxlIGlzIHVwIHRvIGRhdGUuYCA6IGBcdUQ4M0RcdUREMDEgRmlsZSBuZWVkcyB1cGRhdGUuYCk7XG5cdFxuXHRcdHJldHVybiBpc1NhbWU7XG5cdH1cblx0XG5cblx0YXN5bmMgdXBkYXRlQ2FjaGUodmF1bHRQYXRoOiBzdHJpbmcsIGNvbnRlbnQ6IHN0cmluZywgZ2l0aHViUGF0aDogc3RyaW5nLCBzYXZlTm93OiBib29sZWFuID0gdHJ1ZSkge1xuXHRcdHRoaXMuY2FjaGVbdmF1bHRQYXRoXSA9IHtcblx0XHRcdGhhc2g6IHRoaXMuaGFzaENvbnRlbnQoY29udGVudCksXG5cdFx0XHRnaXRodWJQYXRoXG5cdFx0fTtcblx0XHRpZiAoc2F2ZU5vdykgYXdhaXQgdGhpcy5zYXZlKCk7XG5cdH1cblxuXHRnZXRDYWNoZSgpOiBUb29sa2l0RmlsZUNhY2hlIHtcblx0XHRyZXR1cm4gdGhpcy5jYWNoZTtcblx0fVxuXG5cdGdldFRyYWNrZWRGaWxlcygpOiBzdHJpbmdbXSB7XG5cdFx0cmV0dXJuIE9iamVjdC5rZXlzKHRoaXMuY2FjaGUpO1xuXHR9XG5cblx0Z2V0R2l0SHViUGF0aCh2YXVsdFBhdGg6IHN0cmluZyk6IHN0cmluZyB8IHVuZGVmaW5lZCB7XG5cdFx0cmV0dXJuIHRoaXMuY2FjaGVbdmF1bHRQYXRoXT8uZ2l0aHViUGF0aDtcblx0fVxuXG5cdHJlc2V0Q2FjaGUoKSB7XG5cdFx0dGhpcy5jYWNoZSA9IHt9O1xuXHR9XG5cblx0YXN5bmMgcmVtb3ZlRnJvbUNhY2hlKHZhdWx0UGF0aDogc3RyaW5nKSB7XG5cdFx0ZGVsZXRlIHRoaXMuY2FjaGVbdmF1bHRQYXRoXTtcblx0XHRhd2FpdCB0aGlzLnNhdmUoKTtcblx0fVxufVxuIiwgImltcG9ydCB7IG5vcm1hbGl6ZVBhdGgsIFZhdWx0IH0gZnJvbSAnb2JzaWRpYW4nO1xuaW1wb3J0IHsgZGlybmFtZSwgYmFzZW5hbWUsIGpvaW4gfSBmcm9tICdwYXRoJztcbmltcG9ydCB7IHByb21pc2VzIGFzIGZzIH0gZnJvbSAnZnMnO1xuXG5leHBvcnQgY2xhc3MgQmFja3VwTWFuYWdlciB7XG4gIGNvbnN0cnVjdG9yKHByaXZhdGUgdmF1bHQ6IFZhdWx0KSB7fVxuXG4gIC8qKlxuICAgKiBNaXJyb3IgZXZlcnkgdmF1bHQgZmlsZSAoZXhjbHVkaW5nIC5vYnNpZGlhbiAmIGJhY2t1cHMpIGludG8gYSB0aW1lc3RhbXBlZCBmb2xkZXIsXG4gICAqIHRoZW4gcHJ1bmUgdG8ga2VlcCBvbmx5IHRoZSBsYXRlc3QgTiBmdWxsIHNuYXBzaG90cy5cbiAgICogQHBhcmFtIGxhYmVsIE9wdGlvbmFsIHN1ZmZpeCBmb3IgdGhlIGJhY2t1cCBmb2xkZXIgbmFtZVxuICAgKiBAcGFyYW0gbWF4RnVsbEJhY2t1cHMgTnVtYmVyIG9mIGZ1bGwgc25hcHNob3RzIHRvIHJldGFpbiAoZGVmYXVsdDogNSlcbiAgICovXG4gIGFzeW5jIGJhY2t1cFZhdWx0TWlycm9yKGxhYmVsPzogc3RyaW5nLCBtYXhGdWxsQmFja3VwczogbnVtYmVyID0gNSk6IFByb21pc2U8c3RyaW5nPiB7XG4gICAgY29uc3QgdHMgPSBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCkucmVwbGFjZSgvWzouXS9nLCAnLScpO1xuICAgIGNvbnN0IHRhZyA9IGxhYmVsID8gYC0ke2xhYmVsfWAgOiAnJztcbiAgICBjb25zdCBiYXNlID0gbm9ybWFsaXplUGF0aChgLnZhdWx0LWJhY2t1cHMvZnVsbC8ke3RzfSR7dGFnfWApO1xuICAgIGNvbnNvbGUubG9nKGBbQmFja3VwTWFuYWdlcl0gU3RhcnRpbmcgbWlycm9yIGJhY2t1cDogJHtiYXNlfWApO1xuXG4gICAgYXdhaXQgdGhpcy5lbnN1cmVGb2xkZXJFeGlzdHMoYmFzZSk7XG5cbiAgICBmb3IgKGNvbnN0IGZpbGUgb2YgdGhpcy52YXVsdC5nZXRGaWxlcygpKSB7XG4gICAgICBpZiAoZmlsZS5wYXRoLnN0YXJ0c1dpdGgoJy52YXVsdC1iYWNrdXBzLycpIHx8IGZpbGUucGF0aC5zdGFydHNXaXRoKCcub2JzaWRpYW4vJykpIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgICBjb25zdCBjb250ZW50ID0gYXdhaXQgdGhpcy52YXVsdC5yZWFkKGZpbGUpO1xuICAgICAgY29uc3QgdGFyZ2V0ID0gbm9ybWFsaXplUGF0aChgJHtiYXNlfS8ke2ZpbGUucGF0aH1gKTtcbiAgICAgIGF3YWl0IHRoaXMuZW5zdXJlRm9sZGVyRXhpc3RzKGRpcm5hbWUodGFyZ2V0KSk7XG4gICAgICBhd2FpdCB0aGlzLnZhdWx0LmNyZWF0ZSh0YXJnZXQsIGNvbnRlbnQpO1xuICAgIH1cblxuICAgIGNvbnNvbGUubG9nKCdbQmFja3VwTWFuYWdlcl0gTWlycm9yIGJhY2t1cCBjb21wbGV0ZS4gUHJ1bmluZyBvbGQgYmFja3Vwcy4uLicpO1xuICAgIGF3YWl0IHRoaXMucHJ1bmVGdWxsQmFja3VwcyhiYXNlLCBtYXhGdWxsQmFja3Vwcyk7XG4gICAvLyBjb25zb2xlLmxvZygnW0JhY2t1cE1hbmFnZXJdIFBydW5pbmcgY29tcGxldGUuJyk7XG4gICAgcmV0dXJuIGJhc2U7XG4gIH1cblxuICAvKipcbiAgICogTGVnYWN5IGFsaWFzIGZvciBtaXJyb3ItYmFzZWQgYmFja3Vwc1xuICAgKi9cbiAgYXN5bmMgYmFja3VwVmF1bHRUb1ppcChsYWJlbD86IHN0cmluZyk6IFByb21pc2U8c3RyaW5nPiB7XG4gICAgcmV0dXJuIHRoaXMuYmFja3VwVmF1bHRNaXJyb3IobGFiZWwpO1xuICB9XG5cbiAgLyoqXG4gICAqIERlbGV0ZXMgb2xkZXN0IGZ1bGwgYmFja3VwIGZvbGRlcnMsIGtlZXBpbmcgb25seSB0aGUgbW9zdCByZWNlbnQgYGtlZXBgIHNuYXBzaG90cy5cbiAgICovXG4gIHByaXZhdGUgYXN5bmMgcHJ1bmVGdWxsQmFja3VwcyhjdXJyZW50UGF0aDogc3RyaW5nLCBrZWVwOiBudW1iZXIpIHtcbiAgICBjb25zdCByb290ID0gbm9ybWFsaXplUGF0aCgnLnZhdWx0LWJhY2t1cHMvZnVsbCcpO1xuICAgLy8gY29uc29sZS5sb2coYFtCYWNrdXBNYW5hZ2VyXSBwcnVuZUZ1bGxCYWNrdXBzOiByb290PSR7cm9vdH0sIGtlZXA9JHtrZWVwfWApO1xuXG4gICAgLy8gZW5zdXJlIHRoZSByb290IGV4aXN0c1xuICAgIGF3YWl0IHRoaXMuZW5zdXJlRm9sZGVyRXhpc3RzKHJvb3QpO1xuICAgIGlmICghKGF3YWl0IHRoaXMudmF1bHQuYWRhcHRlci5leGlzdHMocm9vdCkpKSB7XG4gICAgIC8vIGNvbnNvbGUubG9nKCdbQmFja3VwTWFuYWdlcl0gcHJ1bmVGdWxsQmFja3Vwczogcm9vdCBmb2xkZXIgbm90IGZvdW5kJyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gZ2V0IGZvbGRlciBuYW1lc1xuICAgIGNvbnN0IGxpc3RpbmcgPSBhd2FpdCB0aGlzLnZhdWx0LmFkYXB0ZXIubGlzdChyb290KTtcbiAgICBjb25zdCByYXdGb2xkZXJzOiBzdHJpbmdbXSA9IEFycmF5LmlzQXJyYXkobGlzdGluZylcbiAgICAgID8gbGlzdGluZyBhcyBzdHJpbmdbXVxuICAgICAgOiAnZm9sZGVycycgaW4gbGlzdGluZ1xuICAgICAgPyAobGlzdGluZyBhcyBhbnkpLmZvbGRlcnNcbiAgICAgIDogW107XG4gICAgY29uc3QgZm9sZGVycyA9IHJhd0ZvbGRlcnMubWFwKGYgPT4gYmFzZW5hbWUoZikpO1xuICAgIC8vY29uc29sZS5sb2coJ1tCYWNrdXBNYW5hZ2VyXSBwcnVuZUZ1bGxCYWNrdXBzOiBmb2xkZXJzIChiYXNlbmFtZXMpOicsIGZvbGRlcnMpO1xuXG4gICAgLy8gc29ydCBkZXNjZW5kaW5nIHNvIG5ld2VzdCBmaXJzdFxuICAgIGNvbnN0IHNvcnRlZCA9IFsuLi5mb2xkZXJzXS5zb3J0KChhLCBiKSA9PiBiLmxvY2FsZUNvbXBhcmUoYSkpO1xuICAgIC8vY29uc29sZS5sb2coJ1tCYWNrdXBNYW5hZ2VyXSBwcnVuZUZ1bGxCYWNrdXBzOiBzb3J0ZWQ6Jywgc29ydGVkKTtcblxuICAgIC8vIGNvbXB1dGUgZmlsZXN5c3RlbSByb290IHRvIHJlbW92ZSBmcm9tXG4gICAgY29uc3QgYWRhcHRlckFueSA9IHRoaXMudmF1bHQuYWRhcHRlciBhcyBhbnk7XG4gICAgY29uc3QgZnNSb290ID0gYWRhcHRlckFueS5iYXNlUGF0aCA/IGpvaW4oYWRhcHRlckFueS5iYXNlUGF0aCwgcm9vdCkgOiBudWxsO1xuICAgIGlmICghZnNSb290KSB7XG4gICAgICAvL2NvbnNvbGUud2FybignW0JhY2t1cE1hbmFnZXJdIHBydW5lRnVsbEJhY2t1cHM6IGNhbm5vdCBkZXRlcm1pbmUgRlMgcm9vdCwgc2tpcHBpbmcgcHJ1bmUnKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyByZW1vdmUgb2xkIHNuYXBzaG90cyBiZXlvbmQgYGtlZXBgXG4gICAgZm9yIChsZXQgaSA9IGtlZXA7IGkgPCBzb3J0ZWQubGVuZ3RoOyBpKyspIHtcbiAgICAgIGNvbnN0IG5hbWUgPSBzb3J0ZWRbaV07XG4gICAgICBjb25zdCB2YXVsdFBhdGggPSBub3JtYWxpemVQYXRoKGAke3Jvb3R9LyR7bmFtZX1gKTtcbiAgICAgIGlmICh2YXVsdFBhdGggPT09IGN1cnJlbnRQYXRoKSB7XG4gICAgICAgLy8gY29uc29sZS5sb2coYFtCYWNrdXBNYW5hZ2VyXSBwcnVuZUZ1bGxCYWNrdXBzOiBza2lwcGluZyBjdXJyZW50ICR7bmFtZX1gKTtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgICAvL2NvbnNvbGUubG9nKGBbQmFja3VwTWFuYWdlcl0gcHJ1bmVGdWxsQmFja3VwczogcmVtb3ZpbmcgRlMgZm9sZGVyOiAke25hbWV9YCk7XG4gICAgICBjb25zdCByZW1vdmVQYXRoID0gam9pbihmc1Jvb3QsIG5hbWUpO1xuICAgICAgdHJ5IHtcbiAgICAgICAgYXdhaXQgZnMucm0ocmVtb3ZlUGF0aCwgeyByZWN1cnNpdmU6IHRydWUsIGZvcmNlOiB0cnVlIH0pO1xuICAgICAgICAvL2NvbnNvbGUubG9nKGBbQmFja3VwTWFuYWdlcl0gcHJ1bmVGdWxsQmFja3VwczogcmVtb3ZlZCAke3JlbW92ZVBhdGh9YCk7XG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgLy8gY29uc29sZS5lcnJvcihgW0JhY2t1cE1hbmFnZXJdIHBydW5lRnVsbEJhY2t1cHM6IGZhaWxlZCB0byByZW1vdmUgJHtyZW1vdmVQYXRofWAsIGUpO1xuICAgICAgfVxuICAgICAgLy8gYWxzbyBjbGVhbiB1cCB2YXVsdCBpbmRleFxuICAgICAgY29uc3QgYWYgPSB0aGlzLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aCh2YXVsdFBhdGgpO1xuICAgICAgaWYgKGFmKSB7XG4gICAgICAgIGF3YWl0IHRoaXMudmF1bHQuZGVsZXRlKGFmKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogUmVjdXJzaXZlbHkgZW5zdXJlcyB0aGF0IGEgZGlyZWN0b3J5IGV4aXN0cyBpbiB0aGUgdmF1bHQuXG4gICAqL1xuICBwcml2YXRlIGFzeW5jIGVuc3VyZUZvbGRlckV4aXN0cyhmb2xkZXJQYXRoOiBzdHJpbmcpIHtcbiAgICBpZiAoIWZvbGRlclBhdGggfHwgKGF3YWl0IHRoaXMudmF1bHQuYWRhcHRlci5leGlzdHMoZm9sZGVyUGF0aCkpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IHBhcmVudCA9IGRpcm5hbWUoZm9sZGVyUGF0aCk7XG4gICAgYXdhaXQgdGhpcy5lbnN1cmVGb2xkZXJFeGlzdHMocGFyZW50KTtcbiAgICBhd2FpdCB0aGlzLnZhdWx0LmNyZWF0ZUZvbGRlcihmb2xkZXJQYXRoKTtcbiAgfVxufVxuIl0sCiAgIm1hcHBpbmdzIjogIjs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBQUE7QUFBQSx5QkFBQUE7QUFBQSxFQUFBO0FBQUE7QUFBQTtBQUFBLElBQUFDLG1CQVNPOzs7QUNUUCxJQUFBQyxtQkFpQk87OztBQ2hCUCxJQUFBQyxtQkFBbUU7OztBQ3VCMUQsSUFBTSxxQkFBZ0M7QUFBQSxFQUMzQztBQUFBLElBQ0UsSUFBSTtBQUFBLElBQ0osT0FBTztBQUFBLElBQ1AsTUFBTTtBQUFBLElBQ04sUUFBUTtBQUFBLElBQ1IsV0FBVztBQUFBLEVBQ2I7QUFBQSxFQUNBO0FBQUEsSUFDRSxJQUFJO0FBQUEsSUFDSixPQUFPO0FBQUEsSUFDUCxNQUFNO0FBQUEsSUFDTixRQUFRO0FBQUEsSUFDUixXQUFXO0FBQUEsSUFDWCxZQUFZLENBQUMsRUFBRTtBQUFBLEVBQ2pCO0FBQUEsRUFDQTtBQUFBLElBQ0UsSUFBSTtBQUFBLElBQ0osT0FBTztBQUFBLElBQ1AsTUFBTTtBQUFBLElBQ04sUUFBUTtBQUFBLElBQ1IsV0FBVztBQUFBLEVBQ2I7QUFJRjs7O0FDbERGO0FBQUE7QUFBQTtBQUFBO0FBQUEsc0JBQW1DOzs7QUNHbkMsSUFBTSxrQkFBMEM7QUFBQTtBQUFBLEVBRTlDLEtBQUs7QUFBQSxFQUNMLElBQUs7QUFBQSxFQUNMLEtBQUs7QUFBQTtBQUFBLEVBR0wsS0FBTTtBQUFBLEVBQ04sTUFBTTtBQUFBLEVBQ04sTUFBTTtBQUFBLEVBQ04sT0FBTztBQUFBLEVBQ1AsS0FBTTtBQUFBLEVBQ04sS0FBTTtBQUFBLEVBQ04sT0FBTTtBQUFBLEVBQ04sS0FBTTtBQUFBO0FBQUEsRUFHTixLQUFLO0FBQUEsRUFDTCxLQUFLO0FBQUEsRUFDTCxLQUFLO0FBQUEsRUFDTCxLQUFLO0FBQUEsRUFDTCxNQUFLO0FBQUEsRUFDTCxLQUFLO0FBQUEsRUFDTCxNQUFLO0FBQUE7QUFBQSxFQUdMLEtBQVU7QUFBQSxFQUNWLElBQVU7QUFBQSxFQUNWLFdBQVU7QUFBQSxFQUNWLEtBQVU7QUFBQSxFQUNWLE1BQVU7QUFBQSxFQUNWLEtBQVU7QUFBQSxFQUNWLEtBQVU7QUFBQSxFQUNWLE9BQVU7QUFBQSxFQUNWLFFBQVU7QUFBQSxFQUNWLEtBQVU7QUFBQSxFQUNWLE1BQVU7QUFBQSxFQUNWLEtBQVU7QUFBQSxFQUNWLE9BQVU7QUFBQSxFQUNWLE9BQVU7QUFBQSxFQUNWLGFBQVk7QUFBQSxFQUNaLGFBQVk7QUFBQSxFQUNaLEtBQVU7QUFBQSxFQUNWLE1BQVU7QUFBQSxFQUNWLE1BQVU7QUFBQSxFQUNWLEtBQVU7QUFBQSxFQUNWLE1BQVU7QUFBQSxFQUNWLE9BQVU7QUFBQSxFQUNWLE1BQVU7QUFBQSxFQUNWLEtBQVU7QUFBQSxFQUNWLFFBQVU7QUFBQSxFQUNWLEtBQVU7QUFBQSxFQUNWLE1BQVU7QUFBQSxFQUNWLEtBQVU7QUFBQSxFQUNWLE9BQVU7QUFBQSxFQUNWLEtBQVU7QUFBQSxFQUNWLE1BQVU7QUFBQSxFQUNWLFFBQVU7QUFBQSxFQUNWLElBQVU7QUFBQSxFQUNWLEtBQVU7QUFBQSxFQUNWLFFBQVU7QUFBQSxFQUNWLE9BQVU7QUFBQSxFQUNWLEtBQVU7QUFBQSxFQUNWLE1BQVU7QUFBQSxFQUNWLE9BQVU7QUFBQSxFQUNWLEtBQVU7QUFBQSxFQUNWLEtBQVU7QUFBQSxFQUNWLEtBQVU7QUFBQSxFQUNWLE1BQVU7QUFBQSxFQUNWLEtBQVU7QUFBQSxFQUNWLE1BQVU7QUFBQSxFQUNWLEtBQVU7QUFBQSxFQUNWLElBQVU7QUFBQSxFQUNWLE1BQVU7QUFBQSxFQUNWLE9BQVU7QUFBQSxFQUNWLE1BQVU7QUFBQSxFQUNWLEtBQVU7QUFBQSxFQUNWLFFBQVU7QUFBQSxFQUNWLEtBQVU7QUFB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O0FBQUEsRUFDVixRQUFVO0FBQUEsRUFDVixLQUFVO0FBQUEsRUFDVixNQUFVO0FBQUEsRUFDVixLQUFVO0FBQUEsRUFDVixPQUFVO0FBQUEsRUFDVixLQUFVO0FBQUEsRUFDVixNQUFVO0FBQUEsRUFDVixRQUFVO0FBQUEsRUFDVixJQUFVO0FBQUEsRUFDVixLQUFVO0FBQUEsRUFDVixRQUFVO0FBQUEsRUFDVixPQUFVO0FBQUEsRUFDVixLQUFVO0FBQUEsRUFDVixNQUFVO0FBQUEsRUFDVixPQUFVO0FBQUEsRUFDVixLQUFVO0FBQUEsRUFDVixLQUFVO0FBQUEsRUFDVixLQUFVO0FBQUEsRUFDVixNQUFVO0FBQUEsRUFDVixLQUFVO0FBQUEsRUFDVixNQUFVO0FBQUEsRUFDVixLQUFVO0FBQUEsRUFDVixJQUFVO0FBQUEsRUFDVixNQUFVO0FBQUEsRUFDVixPQUFVO0FBQUEsRUFDVixNQUFVO0FBQUEsRUFDVixLQUFVO0FBQUEsRUFDVixRQUFVO0FBQUEsRUFDVixLQUFVO0FBQUEsRUFDVixJQUFVO0FBQUEsRUFDVixLQUFVO0FBQUEsRUFDVixLQUFVO0FBQUEsRUFDVixJQUFVO0FBQUEsRUFDVixLQUFVO0FBQUEsRUFDVixLQUFVO0FBQUEsRUFDVixXQUFZO0FBQUEsRUFDWixVQUFZO0FBQUEsRUFDWixLQUFVO0FBQUEsRUFDVixPQUFVO0FBQUEsRUFDVixNQUFVO0FBQUEsRUFDVixXQUFZO0FBQUEsRUFDWixTQUFVO0FBQUEsRUFDVixZQUFZO0FBQUEsRUFDWixhQUFZO0FBQUEsRUFDWixLQUFVO0FBQUEsRUFDVixPQUFVO0FBQUEsRUFDVixRQUFVO0FBQUEsRUFDVixLQUFVO0FBQUEsRUFDVixLQUFVO0FBQUEsRUFDVixLQUFVO0FBQUEsRUFDVixrQkFBa0I7QUFBQSxFQUNsQixpQkFBaUI7QUFBQSxFQUNqQixpQkFBaUI7QUFBQSxFQUNqQixnQkFBaUI7QUFDbkI7QUFNTyxTQUFTQyxtQkFBa0IsUUFBZ0IsV0FBNEI7QUFDNUUsTUFBSSxPQUFPRCxpQkFBZ0IsTUFBTSxLQUFLO0FBR3RDLE1B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V0FBVyxFQUFHLFFBQU87QUFDNUQsUUFBTSxJQUFJLE1BQU0sS0FBSztBQUNyQixTQUFPLEVBQUUsT0FBTyxDQUFDLEVBQUUsWUFBWSxJQUFJLEVBQUUsTUFBTSxDQUFDLEVBQUUsWUFBWTtBQUM1RDtBQUdPLElBQU1DLG1CQUF5QztBQUFBLEVBQ3BELEdBQUc7QUFBQSxFQUNILEdBQUc7QUFBQSxFQUNILEdBQUc7QUFBQSxFQUNILEdBQUc7QUFBQSxFQUNILEdBQUc7QUFBQSxFQUNILEdBQUc7QUFBQSxFQUNILEdBQUc7QUFBQSxFQUNILEdBQUc7QUFBQSxFQUNILEdBQUc7QUFBQSxFQUNILEdBQUc7QUFBQSxFQUNILEdBQUc7QUFBQSxFQUNILEdBQUc7QUFBQSxFQUNILEdBQUc7QUFDTDtBQUVPLElBQU1DLGdCQUFzQztBQUFBLEVBQ2pELEdBQUc7QUFBQSxFQUNILEdBQUc7QUFBQSxFQUNILEdBQUc7QUFBQSxFQUNILEdBQUc7QUFBQSxFQUNILEdBQUc7QUFBQSxFQUNILEdBQUc7QUFBQSxFQUNILE1BQU07QUFBQSxFQUNOLEdBQUc7QUFBQSxFQUNILEdBQUc7QUFDTDtBQUVPLElBQU1DLGlCQUF1QztBQUFBLEVBQ2xELElBQUs7QUFBQSxFQUNMLElBQUs7QUFBQSxFQUNMLEdBQUs7QUFBQSxFQUNMLFdBQVc7QUFBQSxFQUNYLFVBQVU7QUFBQSxFQUNWLElBQUs7QUFBQSxFQUNMLEtBQUs7QUFBQSxFQUNMLElBQUs7QUFBQSxFQUNMLEdBQUs7QUFBQSxFQUNMLElBQUs7QUFBQSxFQUNMLElBQUs7QUFBQSxFQUNMLGFBQWE7QUFBQSxFQUNiLEtBQUs7QUFBQSxFQUNMLElBQUs7QUFBQSxFQUNMLEdBQUs7QUFBQSxFQUNMLElBQUs7QUFBQSxFQUNMLEtBQUs7QUFBQSxFQUNMLEtBQUs7QUFBQSxFQUNMLEdBQUs7QUFBQSxFQUNMLEdBQUs7QUFBQSxFQUNMLElBQUs7QUFBQSxFQUNMLElBQUs7QUFBQSxFQUNMLEdBQUs7QUFBQSxFQUNMLElBQUs7QUFBQSxFQUNMLEtBQUs7QUFBQSxFQUNMLEtBQUs7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SUFDSjtBQUNGLGVBQVcsT0FBTyxrQkFBa0I7QUFDbEMsWUFBTSxjQUFjLHNCQUFzQixHQUFHO0FBQzdDLFdBQUssS0FBSyxrQkFBa0I7QUFBQSxRQUMxQixLQUFZLEtBQUs7QUFBQSxRQUNqQixZQUFZO0FBQUEsUUFDWixZQUFZLHNCQUFzQixXQUFXO0FBQUEsTUFDL0MsQ0FBQyxDQUFDO0FBQUEsSUFDSjtBQUVFLFVBQU0sUUFBUSxJQUFJLElBQUk7QUFDdEIsUUFBSSx3QkFBTyxpQ0FBNEI7QUFBQSxFQUN6QztBQUlBOyIsCiAgIm5hbWVzIjogWyJJbnN0YWxsaW5nTW9kYWwiLCAiaW1wb3J0X29ic2lkaWFuIiwgImltcG9ydF9vYnNpZGlhbiIsICJpbXBvcnRfb2JzaWRpYW4iLCAiY2FwaXRhbGl6ZUZpcnN0IiwgIlNJWkVfTUFQIiwgInVuaWZpZWRTa2lsbHMiLCAiU0laRV9NQVAiLCAidW5pZmllZFNraWxscyIsICJmZWF0dXJlc0J5TGV2ZWwiLCAiY29kZSIsICJjYXAiLCAiaW1wb3J0X29ic2lkaWFuIiwgImluc3RhbGxlcl9leHBvcnRzIiwgImltcG9ydEVkaXRpb25EYXRhIiwgImltcG9ydF9vYnNpZGlhbiIsICJTT1VSQ0VfTkFNRV9NQVAiLCAiZ2V0RnVsbFNvdXJjZU5hbWUiLCAicmVwbGFjZTVlVGFncyIsICJjYXBpdGFsaXplRWFjaCIsICJjYXBpdGFsaXplIiwgInJlbmRlck1hcmtkb3duVGFibGUiLCAicmVwbGFjZTVlVGFncyIsICJmb3JtYXRFbnRyeSIsICJyZXBsYWNlNWVUYWdzIiwgInJlbmRlck1hcmtkb3duVGFibGUiLCAic2tpcHBlZE1vbnN0ZXJzIiwgIlNJWkVfTUFQIiwgIkFMSUdOTUVOVF9NQVAiLCAiY2FwaXRhbGl6ZUZpcnN0IiwgImZvcm1hdFNpemVBYmJyZXYiLCAiZm9ybWF0QWxpZ25tZW50QWJicmV2IiwgIlJBV19OUENTIiwgIk5PUk1BTElaRURfTlBDX05BTUVTIiwgIm5vcm1hbGl6ZU5hbWUiLCAiY2F0ZWdvcml6ZUNyZWF0dXJlIiwgInJlbmRlckFiaWxpdGllc1RhYmxlIiwgInJlbmRlckVudHJ5IiwgInJlcGxhY2U1ZVRhZ3MiLCAicGFyc2VCZXN0aWFyeUZpbGUiLCAiZ2V0RnVsbFNvdXJjZU5hbWUiLCAiYnVpbGRGTSIsICJCRVNUSUFSWV9NRVRBX0RFRlMiLCAic2VyaWFsaXplRnJvbnRtYXR0ZXIiLCAiRk1fRklFTERTIiwgImNhcGl0YWxpemVGaXJzdCIsICJEQU1BR0VfVFlQRV9NQVAiLCAiUFJPUEVSVFlfTUFQIiwgIklURU1fVFlQRV9NQVAiLCAiY29kZUZvbGRlck1hcCIsICJwYXJzZUl0ZW1zRmlsZSIsICJidWlsZEZNIiwgIklURU1fTUVUQV9ERUZTIiwgInNlcmlhbGl6ZUZyb250bWF0dGVyIiwgInJlcGxhY2U1ZVRhZ3MiLCAiY2FwIiwgIkFCSUxJVFlfRlVMTCIsICJTSVpFX01BUCIsICJGTV9GSUVMRFMiLCAidW5pZmllZEFybW9yUHJvZnMiLCAidW5pZmllZFdlYXBvblByb2ZzIiwgInJlcGxhY2U1ZVRhZ3MiLCAidW5pZmllZFNhdmVzIiwgInVuaWZpZWRTa2lsbHMiLCAidW5pZmllZFRvb2xQcm9mcyIsICJBTExfRklFTERfREVGUyIsICJnZXRGdWxsU291cmNlTmFtZSIsICJTS0lMTF9PUFRJT05TIiwgIlNDSE9PTF9NQVAiLCAiZm9ybWF0VGltZSIsICJmb3JtYXRSYW5nZSIsICJmb3JtYXREdXJhdGlvbiIsICJmb3JtYXRBbGlnbm1lbnRBYmJyZXYiLCAiSVRFTV9UWVBFX01BUCIsICJQUk9QRVJUWV9NQVAiLCAiYnVpbGRGTSIsICJzZXJpYWxpemVGcm9udG1hdHRlciIsICJTUEVMTF9LRVlTIiwgIlNQRUNJRVNfS0VZUyIsICJJVEVNX0tFWVMiLCAiQkVTVElBUllfS0VZUyIsICJDTEFTU19LRVlTIiwgIkJBQ0tHUk9VTkRfS0VZUyIsICJGRUFUU19LRVlTIiwgIlNQRUxMX01FVEFfREVGUyIsICJBTExfRklFTERfREVGUyIsICJTUEVDSUVTX01FVEFfREVGUyIsICJJVEVNX01FVEFfREVGUyIsICJCRVNUSUFSWV9NRVRBX0RFRlMiLCAiQ0xBU1NfTUVUQV9ERUZTIiwgIkJBQ0tHUk9VTkRfTUVUQV9ERUZTIiwgIkZFQVRTX01FVEFfREVGUyIsICJTQ0hPT0xfTUFQIiwgIm9yZGluYWwiLCAiZm9ybWF0UmFuZ2UiLCAiZm9ybWF0VGltZSIsICJmb3JtYXREdXJhdGlvbiIsICJmb3JtYXRDb21wb25lbnRzIiwgInBhcnNlU3BlbGxzRmlsZSIsICJnZXRGdWxsU291cmNlTmFtZSIsICJidWlsZEZNIiwgIlNQRUxMX01FVEFfREVGUyIsICJzZXJpYWxpemVGcm9udG1hdHRlciIsICJmb3JtYXRFbnRyeSIsICJzbHVnIiwgIkJMT0NLRURfVFJBSVRTIiwgInBhcnNlU3BlY2llc0ZpbGUiLCAiYnVpbGRGTSIsICJTUEVDSUVTX01FVEFfREVGUyIsICJzZXJpYWxpemVGcm9udG1hdHRlciIsICJTSVpFX01BUCIsICJGTV9GSUVMRFMiLCAicmVuZGVyTWFya2Rvd25UYWJsZSIsICJyZXBsYWNlNWVUYWdzIiwgImZvcm1hdEVudHJ5IiwgImlzVHlwZWRFbnRyeSIsICJmb3JtYXRGZWF0dXJlTGluayIsICJPUFRfRkVBVFVSRV9UWVBFX1RPX0ZVTEwiLCAicGFyc2VDbGFzc0ZpbGUiLCAiYnVpbGRGTSIsICJDTEFTU19NRVRBX0RFRlMiLCAic2VyaWFsaXplRnJvbnRtYXR0ZXIiLCAidW5pZmllZFdlYXBvblByb2ZzIiwgInVuaWZpZWRUb29sUHJvZnMiLCAiU0tJTExfT1BUSU9OUyIsICJ1bmlmaWVkU2tpbGxzIiwgImZlYXR1cmVzQnlMZXZlbCIsICJyZXBsYWNlNWVUYWdzIiwgImZvcm1hdEZlYXR1cmVMaW5rIiwgInJlbmRlck1hcmtkb3duVGFibGUiLCAiZm9ybWF0RW50cnkiLCAiT1BUX0ZFQVRVUkVfVFlQRV9UT19GVUxMIiwgImlzVHlwZWRFbnRyeSIsICJjb2RlIiwgInBhcnNlQWN0aW9uc0ZpbGUiLCAicmVwbGFjZTVlVGFncyIsICJwYXJzZUNvbmRpdGlvbnNEaXNlYXNlc0ZpbGUiLCAicGFyc2VTZW5zZXNGaWxlIiwgInBhcnNlU2tpbGxzRmlsZSIsICJwYXJzZUZlYXRzRmlsZSIsICJidWlsZEZNIiwgIkZFQVRTX01FVEFfREVGUyIsICJzZXJpYWxpemVGcm9udG1hdHRlciIsICJyZXBsYWNlNWVUYWdzIiwgInBhcnNlQmFja2dyb3VuZHNGaWxlIiwgImJ1aWxkRk0iLCAiQkFDS0dST1VORF9NRVRBX0RFRlMiLCAic2VyaWFsaXplRnJvbnRtYXR0ZXIiLCAiY2FwIiwgImh1bWFuaXplIiwgImZtdEl0ZW0iLCAicmVwbGFjZTVlVGFncyIsICJyZW5kZXJNYXJrZG93blRhYmxlIiwgImltcG9ydF9vYnNpZGlhbiIsICJsaXN0U3BlbGxGaWxlc0Zyb21HaXRIdWIiLCAibGlzdEJlc3RpYXJ5RmlsZXNGcm9tR2l0SHViIiwgIklURU1fSlNPTl9GSUxFUyIsICJsaXN0SXRlbUZpbGVzRnJvbUdpdEh1YiIsICJsaXN0Q2xhc3NGaWxlc0Zyb21HaXRIdWIiLCAiZW5zdXJlRm9sZGVyIiwgImltcG9ydEVkaXRpb25EYXRhIiwgInBhcnNlU3BlbGxzRmlsZSIsICJwYXJzZUJlc3RpYXJ5RmlsZSIsICJwYXJzZUl0ZW1zRmlsZSIsICJwYXJzZVNwZWNpZXNGaWxlIiwgInJlcyIsICJqc29uIiwgIm1kRmlsZXMiLCAicGFyc2VDbGFzc0ZpbGUiLCAicGFyc2VBY3Rpb25zRmlsZSIsICJwYXJzZUNvbmRpdGlvbnNEaXNlYXNlc0ZpbGUiLCAicGFyc2VTZW5zZXNGaWxlIiwgInBhcnNlU2tpbGxzRmlsZSIsICJwYXJzZUZlYXRzRmlsZSIsICJwYXJzZUJhY2tncm91bmRzRmlsZSIsICJpbnN0YWxsZXJfZXhwb3J0cyIsICJpbXBvcnRfb2JzaWRpYW4iLCAiYXBwIiwgInBhdGgiLCAiaW1wb3J0X29ic2lkaWFuIiwgImZzIiwgIkluc3RhbGxpbmdNb2RhbCIsICJwYXRoIiwgImNvbnRlbnQiXQp9Cg==

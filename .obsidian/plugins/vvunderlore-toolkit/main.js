/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __create = Object.create;
var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __getProtoOf = Object.getPrototypeOf;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toESM = (mod, isNodeMode, target) => (target = mod != null ? __create(__getProtoOf(mod)) : {}, __copyProps(
  // If the importer is in node compatibility mode or this is not an ESM
  // file that has been converted to a CommonJS file using a Babel-
  // compatible transform (i.e. "__esModule" has not been set), then set
  // "default" to the CommonJS "module.exports" for node compatibility.
  isNodeMode || !mod || !mod.__esModule ? __defProp(target, "default", { value: mod, enumerable: true }) : target,
  mod
));
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// src/main.ts
var main_exports = {};
__export(main_exports, {
  InstallingModal: () => InstallingModal,
  default: () => VVunderloreToolkitPlugin
});
module.exports = __toCommonJS(main_exports);
var import_obsidian11 = require("obsidian");

// src/settings.ts
var import_obsidian6 = require("obsidian");

// src/firstinstallconfirm.ts
var import_obsidian5 = require("obsidian");

// src/editions.ts
var AVAILABLE_EDITIONS = [
  {
    id: "none",
    label: "None",
    repo: "",
    parser: "",
    sourceUrl: ""
  },
  {
    id: "5e-2014",
    label: "D&D 5e (2014)",
    repo: "5etools-mirror-3/5etools-2014-src",
    parser: "5e-2014",
    sourceUrl: "https://raw.githubusercontent.com/5etools-mirror-3/5etools-2014-src/main/data",
    categories: [""]
  },
  {
    id: "5e-2025",
    label: "D&D 5e (2024)",
    repo: "5etools-mirror-3/5etools-src",
    parser: "5e-2025",
    sourceUrl: "https://raw.githubusercontent.com/5etools-mirror-3/5etools-src/main/data"
  }
];

// src/parsers/5e-2014/installer.ts
var installer_exports = {};
__export(installer_exports, {
  importEditionData: () => importEditionData
});
var import_obsidian = require("obsidian");

// src/parsers/5e-2014/helpers/sourceMap.ts
var SOURCE_NAME_MAP = {
  // Core rulebooks
  PHB: "Player's Handbook",
  MM: "Monster Manual",
  DMG: "Dungeon Master's Guide",
  // Official expansions & adventure modules
  CoS: "Curse of Strahd",
  OotA: "Out of the Abyss",
  PotA: "Princes of the Apocalypse",
  HotDQ: "Hoard of the Dragon Queen",
  RoT: "Rise of Tiamat",
  SKT: "Storm King's Thunder",
  TftYP: "Tales from the Yawning Portal",
  ToA: "Tomb of Annihilation",
  // Supplemental guides
  XGE: "Xanathar's Guide to Everything",
  VGM: "Volo's Guide to Monsters",
  TCE: "Tasha's Cauldron of Everything",
  EGW: "Eberron: Rising from the Last War",
  ERLW: "Explorer's Guide to Wildemount",
  MTF: "Monsters of the Multiverse",
  VRGR: "Van Richten's Guide to Ravenloft",
  // Additional sourcebooks
  AAG: "Astral Adventurer\u2019s Guide",
  AI: "Acquisitions Incorporated",
  AitFRAVFT: "Adventures in the Forgotten Realms: A Visual Field Test",
  BMT: "Big Monster Tome",
  DoDk: "Dragon of Darkkeep",
  FTD: "Fizban\u2019s Treasury of Dragons",
  GGR: "Guildmaster\u2019s Guide to Ravnica",
  GHLoE: "Ghosts of the Horizon: Light Over Elensaria",
  IDRotF: "Icewind Dale: Rime of the Frostmaiden",
  LLK: "Lost Laboratory of Kwalish",
  SatO: "Sapphire of Truth",
  SCC: "Strixhaven: Curriculum of Chaos",
  TDCSR: "The Dungeon Coach\u2019s Rulebook",
  JttRC: "Journeys through the Radiant Citadel",
  "AitFR-AVT": "Adventures in the Forgotten Realms: A Verdant Tomb",
  "AitFR-FCD": "Adventures in the Forgotten Realms: From Cyan Depths",
  RMR: "Dungeons and Dragons: Rick and Morty",
  SCAG: "Sword Coast Adventurer's Guide",
  EEPC: "Elemental Evil Player's Companion",
  MOT: "Mythic Odysseys of Theros",
  WBtW: "The Wild Beyond the Witchlight",
  BGDIA: "Baldur's Gate: Descent Into Avernus",
  ToFW: "Turn of Fortune's Wheel",
  CoA: "Chains of Asmodeus",
  CRCotN: "Critical Role: Call of the Netherdeep",
  ToD: "Tyranny of Dragons",
  MPMM: "Mordenkainen Presents: Monsters of the Multiverse",
  LoX: "Light of Xaryxis",
  QftIS: "Quests from the Infinite Staircase",
  WDH: "Waterdeep: Dragon Heist",
  WDMM: "Waterdeep: Dungeon of the Mad Mage",
  PaBTSO: "Phandelver and Below: The Shattered Obelisk",
  CM: "Candlekeep Mysteries",
  GoS: "Ghosts of Saltmarsh",
  DSotDQ: "Dragonlance: Shadow of the Dragon Queen",
  KftGV: "Keys from the Golden Vault",
  SDW: "Essentials Kit: Sleeping Dragon's Wake",
  DoSI: "Dragons of Stormwreck Isle",
  GotSF: "Giants of the Star Forge",
  DIP: "Essentials Kit: Dragon of Icespire Peak",
  SLW: "Essentials Kit: Storm Lord's Wrath",
  IMR: "Infernal Machine Rebuild",
  VEoR: "Vecna: Eve of Ruin",
  PSI: "Plane Shift: Innistrad",
  AATM: "Adventure Atlas: The Mortuary",
  PSZ: "Plane Shift: Zendikar",
  DC: "Essentials Kit: Divine Contention",
  LMoP: "Lost Mine of Phandelver",
  RMBRE: "The Lost Dungeon of Rickedness: Big Rick Energy",
  HftT: "Hunt for the Thessalhydra",
  PSX: "Plane Shift: Ixalan",
  HFStCM: "Heroes' Feast: Saving the Childrens Menu",
  SjA: "Spelljammer Academy",
  LK: "Lightning Keep",
  RtG: "Return to the Glory",
  TTP: "The Tortle Package",
  LR: "Locathah Rising",
  PSA: "Plane Shift: Amonkhet",
  OGA: "One Grung Above",
  "NRH-TLT": "Nerds Restoring Harmony: The Lost Tomb",
  "NRH-AT": "Nerds Restoring Harmony: Adventure Together",
  BGG: "Bigby Presents: Glory of the Giants",
  RoTOS: "The Rise of Tiamat Online Supplement",
  XMtS: "X Marks the Spot",
  "HAT-LMI": "Honor Among Theives: Legendary Magic Items",
  DitLCoT: "Descent into the Lost Caverns of Tsojcanth",
  "AitFR-DN": "Adventures in the Forgotten Realms: Deepest Night",
  "AitFR-THP": "Adventures in the Forgotten Realms: The Hidden Pages",
  BAM: "Boo's Astral Menagerie",
  AZfyT: "A Zib for Your Thougts",
  MCV2DC: "Monstrous Compendium Volume 2: Dragonlance Creatures",
  PSK: "Plane Shift: Kaladesh",
  PSD: "Plane Shift: Dominaria",
  AWM: "Adventure with Muk",
  UATheMysticClass: "Unearthed Arcana: The Mystic Class",
  ALCurseOfStrahd: "Adventurers League: Curse of Strahd",
  ALElementalEvil: "Adventurers League: Elemental Evil",
  ALRageOfDemons: "Adventurers League: Rage of Demons"
};
function getFullSourceName(abbrev, editionId) {
  let name = SOURCE_NAME_MAP[abbrev] ?? abbrev;
  if (abbrev === "PHB") {
    if (editionId?.includes("2014")) name += " (2014)";
    else if (editionId?.includes("2025")) name += " (2025)";
  }
  return name;
}

// src/parsers/5e-2014/helpers/tagReplacer.ts
function replace5eTags(input) {
  let text;
  if (Array.isArray(input)) {
    text = input.join(" ");
  } else if (typeof input === "string") {
    text = input;
  } else {
    text = String(input ?? "");
  }
  return text.replace(
    /\{#itemEntry\s+([^}|]+)(?:\|[^}]*)?\}/gi,
    (_m, rawName) => {
      return `[[${capitalizeEach(String(rawName).trim())}]]`;
    }
  ).replace(
    /\{@(spell|item|creature|race) ([^|}]+)(?:\|[^}]+)?\}/g,
    (_, __, name) => `[[${capitalizeEach(name)}]]`
  ).replace(
    /\{@(condition|status|action|skill) ([^|}]+)(?:\|[^}]+)?\}/g,
    (_, tag, name) => `[[${capitalize(tag)}s#${name}|${capitalizeEach(name)}]]`
  ).replace(
    /\{@classFeature ([^|}]+)\|([^|}]+)(?:\|[^}]+)?\}/g,
    (_, feature, cls) => `[[${cls}#${feature}]]`
  ).replace(/\{@(book|filter) ([^|}]+)(?:\|[^}]+)?\}/g, (_, __, txt) => txt).replace(/\{@note ([^}]+)\}/g, (_, note) => `*${note}*`).replace(/\{@(damage|dice|dc|hit|sense) ([^}]+)\}/g, (_, __, value) => value).replace(/\{@chance ([^|}]+)(?:\|[^}]+)?\}/g, (_, value) => `${value}%`).replace(/\{@quickref ([^|}]+)(?:\|[^|]*\|[^}]*)?\}/g, (_, term) => {
    const known = [
      "difficult terrain",
      "total cover",
      "half cover",
      "three-quarters cover",
      "heavily obscured",
      "lightly obscured"
    ];
    return known.includes(term.toLowerCase()) ? `[[Rules#${capitalizeEach(term)}]]` : term;
  }).replace(/\{\@5etools\s+([^|}]+)\|[^}]+\}/g, "$1").replace(/\{@recharge\s*([^}]+)\}/g, (_, num) => `(recharge: ${num.trim()})`).replace(/\{@(scaledice|scaledamage)[^}]*\|([^|}]+)\}/g, (_, __, value) => value).replace(/\{@d20[^}]*\}/g, "").replace(/\{@[^}]+\}/g, "");
}
function capitalize(str) {
  return str.charAt(0).toUpperCase() + str.slice(1).toLowerCase();
}
function capitalizeEach(str) {
  return str.split(" ").map(capitalize).join(" ");
}

// src/parsers/5e-2014/helpers/markdownTable.ts
function renderMarkdownTable(entry) {
  if (entry.type !== "table" || !Array.isArray(entry.rows)) return "";
  const caption = entry.caption ? `##### ${entry.caption}
` : "";
  const headers = (entry.colLabels ?? []).map((h) => replace5eTags(h.trim()));
  const headerRow = `| ${headers.join(" | ")} |`;
  const dividerRow = `| ${headers.map(() => ":--").join(" | ")} |`;
  const bodyRows = entry.rows.map((row) => {
    const cells = row.map((cell) => {
      if (typeof cell === "string") return replace5eTags(cell);
      if (typeof cell === "object") {
        if (cell.roll?.exact !== void 0) return `${cell.roll.exact}`;
        if (cell.roll?.min !== void 0 && cell.roll?.max !== void 0) {
          return `${cell.roll.min}\u2013${cell.roll.max}`;
        }
        return replace5eTags(JSON.stringify(cell));
      }
      return replace5eTags(String(cell));
    });
    return `| ${cells.join(" | ")} |`;
  });
  return `${caption}${headerRow}
${dividerRow}
${bodyRows.join("\n")}`;
}

// src/parsers/5e-2014/helpers/formatEntry.ts
var ensurePeriod = (s) => /[.!?]\s*$/.test(s) ? s : `${s}.`;
function renderList(list) {
  const items = Array.isArray(list?.items) ? list.items : [];
  if (!items.length) return "";
  const lines = [];
  for (const it of items) {
    if (typeof it === "string") {
      lines.push(`- ${replace5eTags(it)}`);
      continue;
    }
    if (it && typeof it === "object") {
      const head = typeof it.name === "string" && it.name.trim() ? `***${ensurePeriod(replace5eTags(it.name))}***` : "";
      let body = "";
      if (typeof it.entry === "string") {
        body = replace5eTags(it.entry);
      } else if (Array.isArray(it.entries)) {
        body = it.entries.map(
          (e) => typeof e === "string" ? replace5eTags(e) : formatEntry(e)
        ).join(" ");
      }
      const line = [head, body].filter(Boolean).join(" ").trim();
      lines.push(`- ${line}`.trim());
      continue;
    }
    lines.push(`- ${String(it ?? "")}`);
  }
  return lines.join("\n");
}
function renderTable(t) {
  const headers = Array.isArray(t?.colLabels) ? t.colLabels.map((h) => replace5eTags(h)) : [];
  const rows = Array.isArray(t?.rows) ? t.rows.map(
    (r) => Array.isArray(r) ? r.map((cell) => replace5eTags(cell)) : []
  ) : [];
  return renderMarkdownTable([headers, ...rows]);
}
function formatEntry(entry) {
  if (typeof entry === "string") return replace5eTags(entry);
  if (!entry || typeof entry !== "object") return String(entry ?? "");
  if (entry.type === "list") {
    return renderList(entry);
  }
  if (entry.type === "entries") {
    const head = typeof entry.name === "string" && entry.name.trim() ? `***${ensurePeriod(replace5eTags(entry.name))}*** ` : "";
    const body = Array.isArray(entry.entries) ? entry.entries.map((e) => formatEntry(e)).join("\n\n") : "";
    return (head + body).trim();
  }
  if (entry.type === "table") {
    return renderTable(entry);
  }
  if (Array.isArray(entry.entries)) {
    return entry.entries.map((e) => formatEntry(e)).join("\n\n");
  }
  if (typeof entry.entry === "string") {
    return replace5eTags(entry.entry);
  }
  return replace5eTags(String(entry));
}

// src/parsers/5e-2014/bestiary.ts
var skippedMonsters = [];
var SIZE_MAP = {
  T: "Tiny",
  S: "Small",
  M: "Medium",
  L: "Large",
  H: "Huge",
  G: "Gargantuan"
};
var ALIGNMENT_MAP = {
  L: "Lawful",
  N: "Neutral",
  C: "Chaotic",
  G: "Good",
  E: "Evil",
  U: "Unaligned"
};
function capitalizeFirst(str) {
  const s = String(str || "");
  return s.charAt(0).toUpperCase() + s.slice(1);
}
function formatSizeAbbrev(abbrev) {
  return SIZE_MAP[abbrev] || abbrev;
}
function formatAlignmentAbbrev(abbrev) {
  return abbrev.trim().split(/\s+/).map((letter) => ALIGNMENT_MAP[letter] || letter).join(" ");
}
var RAW_NPCS = [
  "Abjurer",
  "Acolyte",
  "Apprentice Wizard",
  "Archdruid",
  "Archer",
  "Archmage",
  "Assassin",
  "Bandit",
  "Bandit Captain",
  "Bard",
  "Berserker",
  "Blackguard",
  "Champion",
  "Commoner",
  "Conjurer",
  "Cult Fanatic",
  "Cultist",
  "Diviner",
  "Druid (NPC)",
  "Druid NPC",
  "Enchanter",
  "Evoker",
  "Gladiator",
  "Guard",
  "Illusionist",
  "Knight",
  "Kraken Priest",
  "Mage",
  "Martial Arts Adept",
  "Master Thief",
  "Necromancer",
  "Noble",
  "Priest",
  "Scout",
  "Spy",
  "Swashbuckler",
  "Thug",
  "Transmuter",
  "Tribal Warrior",
  "Veteran",
  "War Priest",
  "Warlock of the Archfey",
  "Warlock of the Fiend",
  "Warlock of the Great Old One",
  "Warlord"
];
var NORMALIZED_NPC_NAMES = new Set(RAW_NPCS.map((n) => normalizeName(n)));
function normalizeName(name) {
  return name.replace(/\s+/g, " ").trim().toLowerCase();
}
function categorizeCreature(monster) {
  const typeValue = monster.type;
  const name = monster.name;
  const t = typeof typeValue === "string" ? typeValue.toLowerCase() : typeValue?.type?.toLowerCase() || String(typeValue).toLowerCase();
  const normalizedName = normalizeName(name);
  if (monster.isNpc || monster.isNamedCreature) return "Story NPCs";
  if (t === "beast") return "Beasts";
  if (t === "humanoid" && NORMALIZED_NPC_NAMES.has(normalizedName)) return "Non-Beasts";
  if (t === "humanoid") return "Monsters";
  return "Monsters";
}
function renderAbilitiesTable(str, dex, con, int, wis, cha) {
  return [
    `| STR | DEX | CON | INT | WIS | CHA |`,
    `| --- | --- | --- | --- | --- | --- |`,
    `| ${str} | ${dex} | ${con} | ${int} | ${wis} | ${cha} |`
  ].join("\n");
}
function renderEntry(entry, inBreathBlock = false) {
  const ensurePeriod2 = (s) => /[.!?]\s*$/.test(s) ? s : `${s}.`;
  const renderStr = (s) => replace5eTags(s);
  if (typeof entry === "string") return renderStr(entry);
  if (!entry || typeof entry !== "object") return String(entry ?? "");
  const rawName = typeof entry.name === "string" ? entry.name : "";
  const nameTxt = rawName ? renderStr(rawName) : "";
  const isBreath = /\bbreath weapon/i.test(nameTxt);
  const lead = nameTxt ? `***${ensurePeriod2(nameTxt)}***` : "";
  const blocks = [];
  if (Array.isArray(entry.entries)) blocks.push(...entry.entries);
  else if (typeof entry.entries === "string") blocks.push(entry.entries);
  else if (Array.isArray(entry.desc)) blocks.push(...entry.desc);
  else if (typeof entry.desc === "string") blocks.push(entry.desc);
  else if (Array.isArray(entry.entry)) blocks.push(...entry.entry);
  else if (typeof entry.entry === "string") blocks.push(entry.entry);
  const out = [];
  for (const blk of blocks) {
    if (typeof blk === "string") {
      out.push(renderStr(blk));
      continue;
    }
    const isHangNoTitleList = blk && blk.type === "list" && blk.style === "list-hang-notitle" && Array.isArray(blk.items) && blk.items.every((it) => it?.type === "item");
    if ((isBreath || inBreathBlock || isHangNoTitleList) && blk && blk.type === "list" && Array.isArray(blk.items)) {
      const bullets = [];
      for (const it of blk.items) {
        const itName = it?.name ? renderStr(String(it.name).trim()) : "";
        let itBody = "";
        if (typeof it?.entry === "string") itBody = renderStr(it.entry);
        else if (Array.isArray(it?.entries)) itBody = it.entries.map((e) => renderEntry(e, true)).join(" ");
        else if (typeof it?.entries === "string") itBody = renderStr(it.entries);
        const head = itName ? `***${ensurePeriod2(itName)}***` : "";
        const line = [head, itBody].filter(Boolean).join(" ").trim();
        if (line) bullets.push(`- ${line}`);
      }
      if (bullets.length) out.push("\n" + bullets.join("\n"));
      continue;
    }
    out.push(String(blk));
  }
  return [lead, out.join(" ")].filter(Boolean).join(" ").replace(/[ \t]+/g, " ").trim();
}
function parseBestiaryFile(json, editionId) {
  if (!json.monster) return [];
  json._editionId = editionId;
  const validMonsters = json.monster.filter((m) => {
    const acVal = Array.isArray(m.ac) ? m.ac[0]?.ac ?? m.ac[0] : typeof m.ac === "object" ? m.ac?.ac ?? null : m.ac;
    const hpVal = typeof m.hp === "object" ? m.hp?.average ?? m.hp?.hp ?? null : m.hp;
    return acVal != null && hpVal != null && !isNaN(Number(acVal)) && !isNaN(Number(hpVal));
  });
  const allNames = new Set(json.monster.map((m) => m.name));
  const validNames = new Set(validMonsters.map((m) => m.name));
  const missing = [...allNames].filter((name) => !validNames.has(name));
  return validMonsters.map((monster) => {
    const name = monster.name;
    const safeName = name.replace(/\//g, "-");
    const rawSize = monster.size || "M";
    const rawAlignment = Array.isArray(monster.alignment) ? monster.alignment.join(" ") : monster.alignment || "N";
    let rawType = "Unknown";
    if (typeof monster.type === "string") {
      rawType = capitalizeFirst(monster.type);
    } else if (monster.type?.type) {
      const base = capitalizeFirst(monster.type.type);
      const tags = monster.type.tags?.length ? ` (${monster.type.tags.map(capitalizeFirst).join(", ")})` : "";
      rawType = `${base}${tags}`;
    }
    monster._parsedType = rawType;
    const ac = Array.isArray(monster.ac) ? monster.ac[0].ac : monster.ac;
    const hp = monster.hp?.average ?? monster.hp;
    if (!ac && !hp) {
      skippedMonsters.push(monster.name);
      return null;
    }
    const abilities = Array.isArray(monster.ability) ? monster.ability : [monster.str, monster.dex, monster.con, monster.int, monster.wis, monster.cha];
    const [str = 10, dex = 10, con = 10, int = 10, wis = 10, cha = 10] = abilities;
    const speedList = [];
    if (typeof monster.speed === "object") {
      for (const [mode, val] of Object.entries(monster.speed)) {
        if (mode === "canHover") continue;
        if (val && typeof val === "object" && "number" in val) {
          const num = val.number;
          const cond = val.condition ? ` ${val.condition}` : "";
          speedList.push(`${mode} ${num} ft.${cond}`);
        } else {
          speedList.push(`${mode} ${val} ft.`);
        }
      }
    } else {
      speedList.push(`${monster.speed} ft.`);
    }
    const speed = speedList.join(", ");
    let source = getFullSourceName(monster.source, editionId);
    source = source.replace(/:/g, " -");
    const category = categorizeCreature(monster);
    const fm = buildFM(monster, BESTIARY_META_DEFS);
    const yaml = serializeFrontmatter(fm, BESTIARY_META_DEFS);
    const fmAny = fm;
    const challengeText = String(fmAny["CR"] ?? fmAny["challenge"] ?? "");
    const savingThrows = fm[FM_FIELDS.SAVING_THROWS] || [];
    const skills = fm[FM_FIELDS.SKILLS] || [];
    const senses = fm[FM_FIELDS.SENSES] || [];
    const languages = fm[FM_FIELDS.LANGUAGES] || [];
    let body = `# ${name}

${formatSizeAbbrev(rawSize)} ${rawType}, ${formatAlignmentAbbrev(rawAlignment)}

**Armor Class**: ${ac}
**Hit Points**: ${hp}
**Speed**: ${speed}
` + (savingThrows.length ? `**Saving Throws**: ${savingThrows.join(", ")}
` : "") + (skills.length ? `**Skills**: ${skills.join(", ")}
` : "") + (senses.length ? `**Senses**: ${senses.join(", ")}
` : "") + (languages.length ? `**Languages**: ${languages.join(", ")}
` : "") + `**Challenge**: ${challengeText}

` + renderAbilitiesTable(str, dex, con, int, wis, cha);
    if (monster.spellcasting) {
      body += `

### Spellcasting
${monster.spellcasting.map((sc) => {
        const name2 = sc.name || "Spellcasting";
        const parts = [];
        if (sc.headerEntries) {
          const headers = Array.isArray(sc.headerEntries) ? sc.headerEntries : [sc.headerEntries];
          parts.push(headers.map((e) => replace5eTags(e)).join(" "));
        }
        if (sc.will) {
          parts.push(`- **At will:** ${sc.will.map((s) => replace5eTags(String(s))).join(", ")}`);
        }
        if (sc.daily) {
          for (const [k, arr] of Object.entries(sc.daily)) {
            const spells = arr.map((s) => replace5eTags(String(s))).join(", ");
            const n = parseInt(k, 10) || 0;
            const each = /e$/i.test(k);
            const label = n > 0 ? each ? `${n}/day each` : `${n}/day` : "Daily";
            parts.push(`- **${label}:** ${spells}`);
          }
        }
        return `***${name2}.***
${parts.join("\n")}`;
      }).join("\n\n")}`;
    }
    if (monster.trait) body += `

### Traits
${monster.trait.map(renderEntry).join("\n\n")}`;
    if (monster.action) body += `

### Actions
${monster.action.map(renderEntry).join("\n\n")}`;
    if (monster.reaction) body += `

### Reactions
${monster.reaction.map(renderEntry).join("\n\n")}`;
    if (monster.legendary) body += `

### Legendary Actions
${monster.legendary.map(renderEntry).join("\n\n")}`;
    const content = `---
${yaml}
---

${body}`;
    return {
      path: `${category}/${safeName}.md`,
      content
    };
  });
}

// src/parsers/5e-2014/items.ts
function capitalizeFirst2(input) {
  if (typeof input !== "string" || input.length === 0) return "";
  const s = input.trim();
  return s.charAt(0).toUpperCase() + s.slice(1).toLowerCase();
}
function render5eTable(t) {
  const headers = Array.isArray(t.colLabels) ? t.colLabels.map((h) => replace5eTags(h)) : [];
  const rows = Array.isArray(t.rows) ? t.rows.map(
    (r) => Array.isArray(r) ? r.map((cell) => replace5eTags(cell)) : []
  ) : [];
  return renderMarkdownTable({ headers, rows });
}
var DAMAGE_TYPE_MAP = {
  P: "Piercing",
  B: "Bludgeoning",
  S: "Slashing",
  N: "Necrotic",
  R: "Radiant",
  F: "Fire",
  C: "Cold",
  L: "Lightning",
  T: "Thunder",
  A: "Acid",
  H: "Healing",
  U: "Force",
  V: "Psychic"
};
var PROPERTY_MAP = {
  A: "Ammunition",
  F: "Finesse",
  H: "Heavy",
  L: "Light",
  R: "Reload",
  S: "Special",
  "2H": "Two-Handed",
  T: "Thrown",
  V: "Versatile"
};
var ITEM_TYPE_MAP = {
  $C: "Currency",
  $G: "Gem",
  A: "Ammunition",
  "AIR|DMG": "Vehicle (air)",
  "AF|DMG": "Future Ammo",
  AT: "Artisan Tools",
  EXP: "Explosive",
  FD: "Food and Drink",
  G: "Gear",
  GS: "Game",
  HA: "Heavy Armor",
  "IDG|TDCSR": "Illicit Drug",
  INS: "Instrument",
  LA: "Light Armor",
  M: "Weapon",
  MA: "Medium Armor",
  MNT: "Mounts and Vehicles",
  ODH: "Miscellaneous",
  P: "Consumable",
  R: "Ranged Weapon",
  RD: "Rod",
  RG: "Ring",
  S: "Shield",
  SC: "Scroll",
  SCF: "Spell Casting Focus",
  SHP: "Ship",
  T: "Tool",
  TAH: "Mounts and Vehicles",
  TG: "Trade Goods",
  VEH: "Mounts and Vehicles",
  WD: "Wand"
};
var codeFolderMap = {
  // Weapons & Armor
  "A": "Weapons and Armor/Ammunition",
  "M": "Weapons and Armor/Weapons",
  "R": "Weapons and Armor/Ranged Weapons",
  "S": "Weapons and Armor/Shields",
  "LA": "Weapons and Armor/Armor/Light Armor",
  "MA": "Weapons and Armor/Armor/Medium Armor",
  "HA": "Weapons and Armor/Armor/Heavy Armor",
  "EXP": "Weapons and Armor/Weapons/Explosives",
  // Future Ammo (AF|DMG → rawCode "AF")
  "AF": "Weapons and Armor/Ammunition/Future Ammo",
  // Magical Items
  "RD": "Magical Items/Rods",
  "RG": "Magical Items/Rings",
  "SC": "Magical Items/Scrolls",
  "SCF": "Magical Items/Spell Casting Focus",
  "WD": "Magical Items/Wands",
  // Valuables
  "$G": "Valuables/Gems",
  // Currency (rawCode becomes "C" after stripping $)
  "C": "Valuables/Currency",
  "TG": "Valuables/Trade Goods",
  // Artisan Goods
  "AT": "Artisan Goods/Tools",
  "T": "Artisan Goods/Tools",
  "INS": "Artisan Goods/Instruments",
  "GS": "Artisan Goods/Games",
  // Gear & Mounts
  "G": "Gear",
  // Mounts & Vehicles
  "MNT": "Gear/Mounts and Vehicles",
  "TAH": "Gear/Mounts and Vehicles",
  "VEH": "Gear/Mounts and Vehicles",
  // Air vehicles (AIR|DMG → rawCode "AIR")
  "AIR": "Gear/Mounts and Vehicles/Air",
  // Consumables
  "P": "Consumables",
  // Food & Drink
  "FD": "Consumables/Food and Drink",
  // Illicit Drugs (IDG|TDCSR → rawCode "IDG")
  "IDG": "Gear/Illicit Drugs",
  // Miscellaneous (ODH)
  "ODH": "Gear/Miscellaneous"
};
function parseItemsFile(json, editionId) {
  const rawItems = [];
  if (Array.isArray(json.baseitem)) rawItems.push(...json.baseitem);
  if (Array.isArray(json.item)) rawItems.push(...json.item);
  if (Array.isArray(json.object)) rawItems.push(...json.object);
  if (Array.isArray(json.vehicle)) rawItems.push(...json.vehicle);
  if (!rawItems.length) return [];
  const baseNames = new Set(
    Array.isArray(json.baseitem) ? json.baseitem.map((b) => b.name) : []
  );
  const out = [];
  for (const it of rawItems) {
    const name = it.name;
    const safeName = name.replace(/[\/\\:]/g, "-");
    const rawCode = (it.type || "").split("|")[0].split("|")[0].replace(/^\$/, "");
    let folder = codeFolderMap[rawCode] ?? "Miscellaneous";
    if (it.bonusWeapon) {
      folder = `${folder}/Variants`;
    } else {
      const isMagic = !!it.wondrous || !!it.reqAttune || !!it.req_attune || String(it.rarity).toLowerCase().includes("magic");
      if (isMagic) {
        const [, ...rest] = folder.split("/");
        folder = ["Magical Items", ...rest].join("/");
      }
    }
    if ((folder.startsWith("Weapons and Armor/Weapons") || folder.startsWith("Weapons and Armor/Ranged Weapons")) && it.weaponCategory) {
      folder = `${folder}/${capitalizeFirst2(it.weaponCategory)}`;
    }
    json._editionId = editionId;
    const fm = buildFM(it, ITEM_META_DEFS);
    if (fm[FM_FIELDS.MAGICAL]) {
      fm[FM_FIELDS.VERMUN] = false;
    }
    if (rawCode === "M" && it.weaponCategory) {
      fm.type = `${capitalizeFirst2(it.weaponCategory)} Weapon`;
    } else if (ITEM_TYPE_MAP[rawCode]) {
      fm.type = ITEM_TYPE_MAP[rawCode];
    }
    if (Array.isArray(fm.damageTypes)) {
      fm.damageTypes = fm.damageTypes.map(
        (code) => DAMAGE_TYPE_MAP[code] || code
      );
    }
    let yaml = serializeFrontmatter(fm, ITEM_META_DEFS);
    if (Array.isArray(it.packContents)) {
      yaml += "\npackContents:";
      for (const pc of it.packContents) {
        yaml += `
  - item: "${pc.item}"
    quantity: ${pc.quantity}`;
      }
    }
    const frontmatter = `---
${yaml}
---`;
    const lines = [];
    lines.push(`# ${name}`);
    lines.push("");
    const subtitle = it.weapon ? `${capitalizeFirst2(it.weaponCategory)} Weapon` : it.armor ? folder.split("/").pop() || "Armor" : "";
    if (subtitle) lines.push(`### *${subtitle}*`);
    if (it.weapon) {
      lines.push(`**Category**: ${capitalizeFirst2(it.weaponCategory)}`);
      lines.push(`**Damage**: ${it.dmg1 ?? ""}${it.dmg2 ? ` / ${it.dmg2}` : ""}`);
      const typesBody = (Array.isArray(it.dmgType) ? it.dmgType : [it.dmgType]).filter((t) => Boolean(t)).map((t) => DAMAGE_TYPE_MAP[t] || t);
      lines.push(`**Damage Type**: ${typesBody.join(", ")}`);
      lines.push(`**Range**: ${it.range ?? "\u2014"}`);
      lines.push(`**Reload**: ${it.reload ?? "\u2014"}`);
      if (it.ammoType) lines.push(`**Ammo Type**: ${it.ammoType}`);
      if (Array.isArray(it.property) && it.property.length) {
        const propsBody = it.property.map((p) => PROPERTY_MAP[p] || p);
        lines.push(`**Properties**: ${propsBody.join(", ")}`);
      }
    }
    if (it.armor) {
      lines.push(`**Armor Class**: ${it.ac}`);
      if (it.stealth) lines.push(`**Stealth Disadvantage**: true`);
      lines.push("");
    }
    const desc = it.entries ?? it.desc;
    if (desc) {
      for (const p of Array.isArray(desc) ? desc : [desc]) {
        if (typeof p === "string") {
          for (const line of replace5eTags(p).split("\n")) lines.push(line);
          lines.push("");
          continue;
        }
        if (p && typeof p === "object" && p.type === "table") {
          if (lines[lines.length - 1] !== "") lines.push("");
          lines.push(render5eTable(p));
          lines.push("");
          continue;
        }
        if (p && typeof p === "object" && p.type === "list" && Array.isArray(p.items)) {
          if (lines[lines.length - 1] !== "") lines.push("");
          for (const item of p.items) {
            if (typeof item === "string") {
              lines.push(`- ${replace5eTags(item)}`);
              continue;
            }
            const head = item?.name ? `**${replace5eTags(String(item.name)).replace(/[.!?]$/, (m) => m).replace(/([^.!?])$/, "$1.")}**` : "";
            let body2 = "";
            if (typeof item?.entry === "string") body2 = replace5eTags(item.entry);
            else if (Array.isArray(item?.entries)) {
              body2 = item.entries.map((e) => typeof e === "string" ? replace5eTags(e) : "").join(" ");
            }
            const line = [head, body2].filter(Boolean).join(" ").trim();
            if (line) lines.push(`- ${line}`);
          }
          lines.push("");
          continue;
        }
        if (p && typeof p === "object") {
          if (lines[lines.length - 1] === "") lines.pop();
          if (typeof p.name === "string" && p.name.trim()) {
            lines.push(`#### ${p.name}`);
          }
          const sub = Array.isArray(p.entries) ? p.entries : [];
          for (const sp of sub) {
            if (sp && typeof sp === "object" && sp.type === "table") {
              if (lines[lines.length - 1] !== "") lines.push("");
              lines.push(render5eTable(sp));
              lines.push("");
              continue;
            }
            if (sp && typeof sp === "object" && sp.type === "list" && Array.isArray(sp.items)) {
              if (lines[lines.length - 1] !== "") lines.push("");
              for (const item of sp.items) {
                if (typeof item === "string") {
                  lines.push(`- ${replace5eTags(item)}`);
                  continue;
                }
                const head = item?.name ? `**${replace5eTags(String(item.name)).replace(/[.!?]$/, (m) => m).replace(/([^.!?])$/, "$1.")}**` : "";
                let body2 = "";
                if (typeof item?.entry === "string") body2 = replace5eTags(item.entry);
                else if (Array.isArray(item?.entries)) {
                  body2 = item.entries.map((e) => typeof e === "string" ? replace5eTags(e) : "").join(" ");
                }
                const line = [head, body2].filter(Boolean).join(" ").trim();
                if (line) lines.push(`- ${line}`);
              }
              lines.push("");
              continue;
            }
            if (sp && typeof sp === "object" && sp.type === "entries" && sp.name) {
              const head = `- ***${replace5eTags(sp.name)}.***`;
              const body2 = (Array.isArray(sp.entries) ? sp.entries : []).map((e) => typeof e === "string" ? replace5eTags(e) : "").join(" ");
              if (body2.trim()) lines.push(`${head} ${body2}`.trim());
              else lines.push(head);
              continue;
            }
            if (typeof sp === "string") {
              for (const line of replace5eTags(sp).split("\n")) lines.push(line);
              continue;
            }
            if (sp && typeof sp === "object" && Array.isArray(sp.entries)) {
              for (const inner of sp.entries) {
                if (typeof inner === "string") {
                  for (const line of replace5eTags(inner).split("\n")) lines.push(line);
                }
              }
            }
          }
          lines.push("");
        }
      }
    }
    const body = lines.join("\n");
    out.push({ path: `Items/${folder}/${safeName}.md`, content: `${frontmatter}

${body}` });
  }
  return out.sort((a, b) => a.path.localeCompare(b.path));
}

// src/parsers/5e-2014/helpers/frontmatter.ts
function cap(str) {
  if (typeof str !== "string") return "";
  return str.charAt(0).toUpperCase() + str.slice(1);
}
var ABILITY_FULL = {
  str: "Strength",
  dex: "Dexterity",
  con: "Constitution",
  int: "Intelligence",
  wis: "Wisdom",
  cha: "Charisma"
};
var SIZE_MAP2 = {
  T: "Tiny",
  S: "Small",
  M: "Medium",
  L: "Large",
  H: "Huge",
  G: "Gargantuan"
};
var FM_FIELDS = {
  ABILITY_BONUSES: "ability_bonuses",
  AC: "AC",
  ALIGNMENT: "Alignment",
  AMMO_TYPE: "Ammo Type",
  ARMOR_PROFICIENCIES: "armor-prof",
  ATTACK_TYPE: "attack_type",
  ATTUNEMENT: "Attunement",
  ATTUNE_REQ: "Attune_Req",
  CASTING_TIME: "casting_time",
  CHARISMA: "charisma",
  CHA_MOD: "cha_mod",
  CONCENTRATION: "concentration",
  CONDITION_IMM: "cond_immunity",
  CONSTITUTION: "constitution",
  CON_MOD: "con_mod",
  COST: "cost",
  COMPONENTS: "Components",
  CHALLENGE_RATING: "CR",
  DAMAGE_TYPE: "damage_type",
  DAMAGE_TYPES: "damageTypes",
  DAMAGE: "damage",
  DAMAGE_RES: "dmg_resistance",
  DAMAGE_IMM: "dmg_immunity",
  DEXTERITY: "dexterity",
  DEX_MOD: "dex_mod",
  DURATION: "duration",
  RULESET: "ruleset",
  HP: "HP",
  INTELLIGENCE: "intelligence",
  INT_MOD: "int_mod",
  LANGUAGES: "languages",
  LEVEL: "level",
  MAGICAL: "magical",
  MATERIAL: "material",
  NAME: "name",
  PROPERTIES: "properties",
  RANGE: "range",
  RARITY: "rarity",
  RELOAD: "reload",
  RITUAL: "ritual",
  SAVE: "save",
  SAVING_THROWS: "saving_throws",
  SCHOOL: "school",
  SENSES: "senses",
  SIZE: "size",
  SKILLS: "skills",
  SKILL_CHOICE_LIST: "skill_choice_list",
  SOMATIC: "somatic",
  SOURCE: "source",
  SPECIES: "species",
  SPEED: "speed",
  SPELL_CAST_MOD: "Spell Cast Mod",
  SPELL_RANGE: "Range",
  STEALTH_DISADVANTAGE: "stealthDisadvantage",
  STRENGTH: "strength",
  STR_MOD: "str_mod",
  SUBRACES: "subraces",
  TOOL_PROFICIENCIES: "tool-prof",
  TOOL_CHOICE_LIST: "tool_choice_list",
  TRAITS: "traits",
  TYPE: "type",
  VARIANT: "Variant",
  VERBAL: "verbal",
  VERMUN: "vermun",
  WEAPON_PROFICIENCIES: "weapon-prof",
  WEIGHT: "weight",
  WISDOM: "wisdom",
  WIS_MOD: "wis_mod"
};
var unifiedArmorProfs = (val) => Array.isArray(val?.armor) ? val.armor.map(cap) : Array.isArray(val) ? val.map(cap) : [];
function unifiedWeaponProfs(val) {
  const rawArr = Array.isArray(val?.weapons) ? val.weapons : Array.isArray(val) ? val : [];
  const out = /* @__PURE__ */ new Set();
  function handleOne(entry) {
    if (Array.isArray(entry)) {
      entry.forEach(handleOne);
      return;
    }
    if (typeof entry === "string") {
      const lit = entry.trim().toLowerCase();
      if (lit === "simple") {
        out.add("Simple Weapons");
      } else if (lit === "martial") {
        out.add("Martial Weapons");
      } else {
        const text = entry.startsWith("{@") ? replace5eTags(entry) : cap(entry);
        out.add(text);
      }
      return;
    }
    if (entry && typeof entry === "object" && entry.proficiency) {
      const name = cap(entry.proficiency);
      out.add(entry.optional ? `${name} (optional)` : name);
    }
  }
  rawArr.forEach(handleOne);
  return [...out];
}
var SAVE_NAME_MAP = {
  str: "Strength",
  strength: "Strength",
  dex: "Dexterity",
  dexterity: "Dexterity",
  con: "Constitution",
  constitution: "Constitution",
  int: "Intelligence",
  intelligence: "Intelligence",
  wis: "Wisdom",
  wisdom: "Wisdom",
  cha: "Charisma",
  charisma: "Charisma"
};
function unifiedSaves(val) {
  if (!val) return [];
  if (Array.isArray(val)) {
    return val.map((k) => {
      const key2 = String(k).toLowerCase();
      return SAVE_NAME_MAP[key2] || key2.charAt(0).toUpperCase() + key2.slice(1);
    });
  }
  if (typeof val === "object") {
    return Object.keys(val).map((k) => {
      const key2 = k.toLowerCase();
      return SAVE_NAME_MAP[key2] || key2.charAt(0).toUpperCase() + key2.slice(1);
    });
  }
  const key = String(val).toLowerCase();
  return [SAVE_NAME_MAP[key] || key.charAt(0).toUpperCase() + key.slice(1)];
}
var unifiedSkills2 = (val) => {
  if (val && !Array.isArray(val) && typeof val === "object" && // ensure every value is a string or number
  Object.values(val).every((v) => typeof v === "string" || typeof v === "number")) {
    return Object.entries(val).map(
      ([skill, mod]) => `${cap(skill)} ${mod}`.trim()
    );
  }
  if (val && !Array.isArray(val) && typeof val === "object") {
    const nested = val.skills ?? val.skillProf ?? val.skillProficiencies;
    return unifiedSkills2(nested);
  }
  if (!Array.isArray(val)) return [];
  const out = /* @__PURE__ */ new Set();
  for (const e of val) {
    if (e && typeof e === "object" && typeof e.any === "number") {
      out.add(`Choose ${e.any}`);
      continue;
    }
    if (e && typeof e === "object" && e.choose) {
      const cnt = e.choose.count ?? 1;
      out.add(`Choose ${cnt}`);
    }
    if (e && typeof e === "object") {
      for (const [k, v] of Object.entries(e)) {
        if (v === true) out.add(cap(k));
      }
    }
    if (typeof e === "string") {
      out.add(cap(e));
    }
  }
  return [...out];
};
var unifiedToolProfs = (val) => {
  let entries = Array.isArray(val) ? val : Array.isArray(val?.toolProficiencies) ? val.toolProficiencies : Array.isArray(val?.tools) ? val.tools : [];
  const out = /* @__PURE__ */ new Set();
  let sawChoose = false;
  for (const e of entries) {
    if (typeof e === "string") {
      out.add(cap(e));
      continue;
    }
    if (e?.choose) {
      const cnt = e.choose.count ?? 1;
      sawChoose = true;
      out.add(`Choose ${cnt}`);
    }
    for (const [k, v] of Object.entries(e)) {
      if (v === true) {
        out.add(cap(k));
      } else if (typeof v === "number" && k.startsWith("any")) {
        const raw = k.replace(/^any/, "");
        const spaced = raw.replace(/([a-z])([A-Z])/g, "$1 $2").split(" ").map(cap).join(" ");
        out.add(`Choose ${v} ${spaced}`);
      }
    }
  }
  return [...out];
};
var ALL_FIELD_DEFS = [
  // ─── Core ───
  { callSign: "NAME", jsonKey: "name" },
  { callSign: "SOURCE", jsonKey: ["source"], conv: (raw, all) => {
    const out = /* @__PURE__ */ new Set();
    const arr = Array.isArray(raw) ? raw : [raw];
    arr.forEach((src) => out.add(getFullSourceName(src, all._editionId)));
    for (const os of all.otherSources ?? []) out.add(getFullSourceName(os.source, all._editionId));
    for (const rep of all.reprintedAs ?? []) {
      const [, src] = rep.split("|");
      out.add(getFullSourceName(src, all._editionId));
    }
    return [...out];
  } },
  // ─── Proficiencies ───
  { callSign: "ARMOR_PROFICIENCIES", jsonKey: ["armorProficiencies", "armorProfs", "startingProficiencies"], conv: unifiedArmorProfs },
  {
    callSign: "WEAPON_PROFICIENCIES",
    jsonKey: ["weaponProficiencies", "weaponProfs", "startingProficiencies"],
    conv: unifiedWeaponProfs
  },
  { callSign: "TOOL_PROFICIENCIES", jsonKey: ["toolProficiencies", "toolProfs", "startingProficiencies"], conv: unifiedToolProfs },
  {
    callSign: "TOOL_CHOICE_LIST",
    jsonKey: ["toolProficiencies", "toolProfs", "startingProficiencies"],
    conv: (raw) => {
      const arr = Array.isArray(raw) ? raw : Array.isArray(raw?.toolProficiencies) ? raw.toolProficiencies : Array.isArray(raw?.tools) ? raw.tools : [];
      const choice = arr.find((e) => e?.choose);
      return choice?.choose?.from?.map((s) => cap(s)) ?? [];
    }
  },
  { callSign: "SAVING_THROWS", jsonKey: ["save", "proficiency", "savingThrow"], conv: unifiedSaves },
  {
    callSign: "SKILLS",
    jsonKey: ["skill", "skillProf", "skillProficiencies", "startingProficiencies"],
    conv: unifiedSkills2
  },
  {
    callSign: "SKILL_CHOICE_LIST",
    jsonKey: ["skill", "skillProf", "skillProficiencies", "startingProficiencies"],
    conv: (raw) => {
      const arr = Array.isArray(raw) ? raw : Array.isArray(raw?.skillProficiencies) ? raw.skillProficiencies : Array.isArray(raw?.skills) ? raw.skills : Array.isArray(raw?.skillProf) ? raw.skillProf : [];
      const choiceObj = arr.find((e) => e?.choose || typeof e.any === "number");
      if (!choiceObj) return [];
      if (choiceObj.choose && Array.isArray(choiceObj.choose.from)) {
        return choiceObj.choose.from.map(cap);
      }
      if (typeof choiceObj.any === "number") {
        return SKILL_OPTIONS;
      }
      return [];
    }
  },
  {
    callSign: "SPELL_CAST_MOD",
    jsonKey: "spellcastingAbility",
    conv: (raw) => {
      const key = String(raw).toLowerCase();
      return ABILITY_FULL[key] || key.toUpperCase();
    }
  },
  {
    callSign: "RULESET",
    jsonKey: "name",
    // ignore the raw value, always print HELLO
    conv: (_raw, _all) => "D&D 5e (2014)"
  },
  // ─── Spells ───
  { callSign: "LEVEL", jsonKey: "level" },
  { callSign: "SCHOOL", jsonKey: "school", conv: (s) => SCHOOL_MAP[s] ?? s },
  { callSign: "CASTING_TIME", jsonKey: "time", conv: formatTime },
  { callSign: "SPELL_RANGE", jsonKey: "range", conv: formatRange },
  { callSign: "DURATION", jsonKey: "duration", conv: formatDuration },
  { callSign: "VERBAL", jsonKey: "components", conv: (c) => !!c.v },
  { callSign: "SOMATIC", jsonKey: "components", conv: (c) => !!c.s },
  { callSign: "MATERIAL", jsonKey: "components", conv: (c) => !!c.m },
  {
    callSign: "COMPONENTS",
    jsonKey: "components",
    conv: (c) => {
      if (!c.m) return [];
      const raw = Array.isArray(c.m) ? c.m : [c.m];
      return raw.map((item) => {
        if (typeof item === "string") return item;
        if (item && typeof item === "object" && typeof item.text === "string") {
          return item.text;
        }
        return null;
      }).filter((comp) => comp !== null);
    }
  },
  { callSign: "ATTACK_TYPE", jsonKey: "attackType" },
  { callSign: "DAMAGE_TYPE", jsonKey: "damageInflict", conv: (d) => Array.isArray(d) ? d[0] : d },
  { callSign: "RITUAL", jsonKey: "ritual" },
  { callSign: "CONCENTRATION", jsonKey: "duration", conv: (ds) => Array.isArray(ds) && ds.some((x) => x.concentration) },
  { callSign: "SAVE", jsonKey: "saveAttr" },
  // ─── Species / Creatures ───
  { callSign: "SPECIES", jsonKey: "name" },
  {
    callSign: "SIZE",
    jsonKey: "size",
    conv: (raw) => {
      if (Array.isArray(raw)) {
        return raw.map((r) => SIZE_MAP2[r] || r);
      } else {
        return SIZE_MAP2[raw] || raw;
      }
    }
  },
  {
    callSign: "SPEED",
    jsonKey: "speed",
    conv: (sp) => {
      if (typeof sp === "number") {
        return [`Walk ${sp} ft.`];
      }
      if (!sp || typeof sp !== "object") return [];
      return Object.entries(sp).filter(([mode]) => mode !== "canHover").map(([mode, v]) => {
        const n = typeof v === "object" && v !== null && "number" in v ? v.number : v;
        const label = mode === "walk" ? "Walk" : cap(mode);
        return `${label} ${n} ft.`;
      });
    }
  },
  { callSign: "LANGUAGES", jsonKey: ["languages", "languageProficiencies"], conv: (arr) => {
    if (!Array.isArray(arr)) return [];
    const out = [];
    for (const lp of arr) {
      if (typeof lp === "string") out.push(cap(lp));
      else if (typeof lp === "object") {
        for (const [lang, val] of Object.entries(lp)) {
          if (val) out.push(cap(lang));
        }
      }
    }
    return [...new Set(out)];
  } },
  { callSign: "SENSES", jsonKey: "senses", conv: (sen) => {
    if (Array.isArray(sen)) return sen.map((s) => s.replace(/^\d+\s*/, "").replace(/^./, (c) => c.toUpperCase()));
    if (sen && typeof sen === "object") return Object.entries(sen).map(([k, v]) => `${k.charAt(0).toUpperCase() + k.slice(1)} ${v}`);
    return [];
  } },
  {
    callSign: "TRAITS",
    jsonKey: ["classFeatures", "entries"],
    conv: (raw, allJson) => {
      const rec = Array.isArray(allJson.class) ? allJson.class[0] : Array.isArray(allJson.race) ? allJson.race[0] : allJson;
      const fileName = typeof rec?.name === "string" ? rec.name : typeof allJson?.name === "string" ? allJson.name : "";
      const omit = /* @__PURE__ */ new Set([
        // class-specific
        "Ability Score Improvement",
        "Archetype Feature",
        "Subclass Feature",
        // species-specific common headings
        "Age",
        "Size",
        "Speed",
        "Languages"
        // backgrounds often have generic sections too; add more if needed
      ]);
      const seen = /* @__PURE__ */ new Set();
      if (Array.isArray(allJson.classFeatures)) {
        const classRec = Array.isArray(allJson.class) ? allJson.class[0] : allJson;
        const className = typeof classRec?.name === "string" ? classRec.name : fileName;
        return allJson.classFeatures.flatMap((feat) => {
          if (feat && typeof feat === "object" && feat.gainSubclassFeature) return [];
          const rawName = typeof feat === "string" ? feat : typeof feat.classFeature === "string" ? feat.classFeature : "";
          const name = rawName.split("|")[0].trim();
          if (!name || omit.has(name) || seen.has(name)) return [];
          seen.add(name);
          const anchor = name.replace(/[^\w\s]/g, "").replace(/\s+/g, " ").trim().replace(/\b\w/g, (c) => c.toUpperCase());
          return className ? [`[[${className}#${anchor}|${name}]]`] : [name];
        });
      }
      const ents = Array.isArray(raw) ? raw : [];
      const names = [];
      const pushName = (n) => {
        const name = (n ?? "").replace(/^Feature:\s*/, "").trim();
        if (!name || omit.has(name) || seen.has(name)) return;
        seen.add(name);
        names.push(name);
      };
      for (const e of ents) {
        if (!e) continue;
        if (typeof e === "object" && typeof e.name === "string") {
          pushName(e.name);
        }
        if (typeof e === "object" && Array.isArray(e.entries)) {
          for (const sub of e.entries) {
            if (sub && typeof sub === "object" && typeof sub.name === "string") {
              pushName(sub.name);
            }
          }
        }
      }
      if (names.length) {
        return names.map((name) => {
          const anchor = name.replace(/[^\w\s]/g, "").replace(/\s+/g, " ").trim().replace(/\b\w/g, (c) => c.toUpperCase());
          return fileName ? `[[${fileName}#${anchor}|${name}]]` : name;
        });
      }
      return ents.filter((e) => e && typeof e.name === "string").map((e) => e.name.replace(/^Feature:\s*/, "").trim());
    }
  },
  { callSign: "AC", jsonKey: "ac", conv: (a) => Array.isArray(a) ? a[0].ac : a },
  { callSign: "HP", jsonKey: "hp", conv: (hp) => hp?.average ?? hp },
  { callSign: "CHALLENGE_RATING", jsonKey: "cr", conv: (raw) => typeof raw === "object" && raw !== null && "cr" in raw ? raw.cr : raw },
  { callSign: "STRENGTH", jsonKey: "ability", conv: (arr) => Array.isArray(arr) ? arr[0] : arr?.str ?? 0 },
  { callSign: "DEXTERITY", jsonKey: "ability", conv: (arr) => Array.isArray(arr) ? arr[1] : arr?.dex ?? 0 },
  { callSign: "CONSTITUTION", jsonKey: "ability", conv: (arr) => Array.isArray(arr) ? arr[2] : arr?.con ?? 0 },
  { callSign: "INTELLIGENCE", jsonKey: "ability", conv: (arr) => Array.isArray(arr) ? arr[3] : arr?.int ?? 0 },
  { callSign: "WISDOM", jsonKey: "ability", conv: (arr) => Array.isArray(arr) ? arr[4] : arr?.wis ?? 0 },
  { callSign: "CHARISMA", jsonKey: "ability", conv: (arr) => Array.isArray(arr) ? arr[5] : arr?.cha ?? 0 },
  {
    callSign: "ALIGNMENT",
    jsonKey: "alignment",
    conv: (a) => {
      const raw = Array.isArray(a) ? a.join(" ") : typeof a === "string" ? a : String(a);
      const cleaned = raw.replace(/\bA\b/g, "Any").replace(/\bU\b/g, "Unaligned").replace(/\bN\b/g, "Neutral").replace(/\bL\b/g, "Lawful").replace(/\bC\b/g, "Chaotic").replace(/\bG\b/g, "Good").replace(/\bE\b/g, "Evil");
      return formatAlignmentAbbrev(cleaned);
    }
  },
  {
    callSign: "TYPE",
    jsonKey: "type",
    conv: (t) => {
      if (typeof t === "string") {
        return ITEM_TYPE_MAP[t] ?? cap(t);
      }
      if (t && typeof t === "object") {
        const code = String(t.type || "").toUpperCase();
        if (ITEM_TYPE_MAP[code]) {
          return ITEM_TYPE_MAP[code];
        }
        const base = t.type ? cap(t.type) : "Unknown";
        const tags = Array.isArray(t.tags) ? t.tags.map(cap) : [];
        return tags.length ? `${base} (${tags.join(", ")})` : base;
      }
      return void 0;
    }
  },
  // ─── Items ───
  { callSign: "TYPE", jsonKey: "_parsedType" },
  { callSign: "RARITY", jsonKey: "rarity", conv: (r) => {
    const s = String(r || "").toLowerCase();
    return s && s !== "none" ? s[0].toUpperCase() + s.slice(1) : void 0;
  } },
  {
    callSign: "COST",
    jsonKey: "value",
    conv: (raw) => {
      const s = String(raw).trim().toLowerCase();
      let num;
      if (s.endsWith("cp")) {
        num = parseFloat(s);
        return num >= 100 ? `${Math.round(num / 100 * 100) / 100}gp` : `${num}cp`;
      }
      if (s.endsWith("sp")) {
        num = parseFloat(s);
        return num >= 10 ? `${Math.round(num / 10 * 100) / 100}gp` : `${num}sp`;
      }
      if (s.endsWith("gp")) {
        num = parseFloat(s);
        return `${Math.round(num * 100) / 100}gp`;
      }
      num = parseFloat(s) || 0;
      return num >= 100 ? `${Math.round(num / 100 * 100) / 100}gp` : `${num}cp`;
    }
  },
  { callSign: "WEIGHT", jsonKey: "weight" },
  { callSign: "MAGICAL", jsonKey: "wondrous", conv: (_w, all) => !!all.wondrous || !!all.reqAttune },
  { callSign: "VARIANT", jsonKey: "bonusWeapon", conv: (b) => typeof b === "string" && b.startsWith("+") },
  { callSign: "PROPERTIES", jsonKey: "property", conv: (arr) => Array.isArray(arr) ? arr.map((p) => PROPERTY_MAP[p] || p) : [] },
  { callSign: "DAMAGE", jsonKey: "dmg1", conv: (d, all) => d ? all.dmg2 ? `${d} / ${all.dmg2}` : `${d}` : void 0 },
  { callSign: "DAMAGE_TYPES", jsonKey: "dmgType", conv: (dt) => dt == null ? [] : Array.isArray(dt) ? dt : [dt] },
  { callSign: "RANGE", jsonKey: "range" },
  { callSign: "RELOAD", jsonKey: "reload" },
  { callSign: "AMMO_TYPE", jsonKey: "ammoType", conv: (v) => typeof v === "string" ? v.split("|")[0].charAt(0).toUpperCase() + v.split("|")[0].slice(1).toLowerCase() : "" },
  { callSign: "STEALTH_DISADVANTAGE", jsonKey: "stealth" },
  {
    callSign: "ATTUNEMENT",
    jsonKey: ["wondrous", "reqAttune", "req_attune", "reqAttuneTags"],
    conv: (_raw, allJson) => {
      const j = allJson;
      const hasText = typeof j.reqAttune === "string" && j.reqAttune.trim() !== "";
      const hasTags = Array.isArray(j.reqAttuneTags) && j.reqAttuneTags.length > 0;
      return hasText || hasTags;
    }
  },
  {
    callSign: "ATTUNE_REQ",
    jsonKey: "reqAttuneTags",
    conv: (tags = [], _all) => {
      const mapLetter = {
        A: "Any",
        U: "Unaligned",
        N: "Neutral",
        L: "Lawful",
        C: "Chaotic",
        G: "Good",
        E: "Evil"
      };
      const reqs = [];
      for (const tag of tags) {
        if (tag.class && Array.isArray(tag.alignment)) {
          const cls = cap(tag.class);
          for (const code of tag.alignment) {
            reqs.push(`${mapLetter[code] || code} ${cls}`);
          }
        } else if (tag.class) {
          reqs.push(cap(tag.class));
        } else if (Array.isArray(tag.alignment)) {
          for (const code of tag.alignment) {
            reqs.push(mapLetter[code] || code);
          }
        } else if (tag.background) {
          const [bg] = String(tag.background).split("|");
          reqs.push(bg.split(" ").map(cap).join(" "));
        } else if (tag.spellcasting) {
          reqs.push("Spellcaster");
        }
      }
      return Array.from(new Set(reqs));
    }
  },
  {
    callSign: "VERMUN",
    jsonKey: "wondrous",
    // or whatever property you use to detect “magical”
    conv: (_raw, all) => !!all.wondrous || !!all.reqAttune
  },
  // ─── Other ───
  { callSign: "DAMAGE_RES", jsonKey: "resist", conv: (v) => Array.isArray(v) ? v.map(cap) : [] },
  { callSign: "RULESET", jsonKey: "_editionId" },
  // ─── Ability‐score modifiers (only emit when nonzero) ───
  {
    callSign: "STR_MOD",
    jsonKey: "ability",
    conv: (arr) => {
      const v = Array.isArray(arr) ? arr[0].str ?? 0 : arr.str ?? 0;
      return v !== 0 ? v : void 0;
    }
  },
  {
    callSign: "DEX_MOD",
    jsonKey: "ability",
    conv: (arr) => {
      const v = Array.isArray(arr) ? arr[0].dex ?? 0 : arr.dex ?? 0;
      return v !== 0 ? v : void 0;
    }
  },
  {
    callSign: "CON_MOD",
    jsonKey: "ability",
    conv: (arr) => {
      const v = Array.isArray(arr) ? arr[0].con ?? 0 : arr.con ?? 0;
      return v !== 0 ? v : void 0;
    }
  },
  {
    callSign: "INT_MOD",
    jsonKey: "ability",
    conv: (arr) => {
      const v = Array.isArray(arr) ? arr[0].int ?? 0 : arr.int ?? 0;
      return v !== 0 ? v : void 0;
    }
  },
  {
    callSign: "WIS_MOD",
    jsonKey: "ability",
    conv: (arr) => {
      const v = Array.isArray(arr) ? arr[0].wis ?? 0 : arr.wis ?? 0;
      return v !== 0 ? v : void 0;
    }
  },
  {
    callSign: "CHA_MOD",
    jsonKey: "ability",
    conv: (arr) => {
      const v = Array.isArray(arr) ? arr[0].cha ?? 0 : arr.cha ?? 0;
      return v !== 0 ? v : void 0;
    }
  }
];
function buildFM(json, defs) {
  const fm = {};
  for (const { callSign, jsonKey, conv } of defs) {
    const keys = Array.isArray(jsonKey) ? jsonKey : [jsonKey];
    let raw = void 0;
    for (const key of keys) {
      if (json[key] != null) {
        raw = json[key];
        break;
      }
    }
    if (raw == null) continue;
    const val = conv ? conv(raw, json) : raw;
    fm[FM_FIELDS[callSign]] = val;
  }
  return fm;
}
function serializeFrontmatter(fm, defs) {
  const filtered = {};
  const hasSkillChoice = Array.isArray(fm[FM_FIELDS.SKILL_CHOICE_LIST]) && fm[FM_FIELDS.SKILL_CHOICE_LIST].length > 0;
  const hasToolChoice = Array.isArray(fm[FM_FIELDS.TOOL_CHOICE_LIST]) && fm[FM_FIELDS.TOOL_CHOICE_LIST].length > 0;
  for (const [k, v] of Object.entries(fm)) {
    if (v === void 0) continue;
    if (k === FM_FIELDS.COMPONENTS && Array.isArray(v) && v.length === 0) continue;
    if ((k === FM_FIELDS.TOOL_CHOICE_LIST || k === FM_FIELDS.SKILL_CHOICE_LIST) && Array.isArray(v) && v.length === 0) continue;
    filtered[k] = v;
  }
  let keysToEmit;
  if (defs) {
    const wanted = defs.map((d) => FM_FIELDS[d.callSign]);
    keysToEmit = wanted.filter((k) => k in filtered);
    keysToEmit.push(
      ...Object.keys(filtered).filter((k) => !keysToEmit.includes(k))
    );
  } else {
    keysToEmit = Object.keys(filtered);
  }
  return keysToEmit.map((k) => {
    const v = filtered[k];
    if (Array.isArray(v)) {
      const inline = v.map((item) => JSON.stringify(item)).join(", ");
      return `${k}: [${inline}]`;
    }
    if (typeof v === "string") {
      return `${k}: "${v}"`;
    }
    return `${k}: ${v}`;
  }).join("\n");
}
var SKILL_OPTIONS = [
  "Acrobatics",
  "Animal Handling",
  "Arcana",
  "Athletics",
  "Deception",
  "History",
  "Insight",
  "Intimidation",
  "Investigation",
  "Medicine",
  "Nature",
  "Perception",
  "Performance",
  "Persuasion",
  "Religion",
  "Sleight of Hand",
  "Stealth",
  "Survival"
];
var SPELL_KEYS = [
  "NAME",
  "LEVEL",
  "SCHOOL",
  "CASTING_TIME",
  "SPELL_RANGE",
  "SAVING_THROWS",
  "DAMAGE_TYPE",
  "DURATION",
  "VERBAL",
  "SOMATIC",
  "MATERIAL",
  "COMPONENTS",
  "CONCENTRATION",
  "SOURCE",
  "RULESET"
];
var SPECIES_KEYS = [
  "SPECIES",
  "SIZE",
  "SPEED",
  "LANGUAGES",
  "TRAITS",
  "SKILLS",
  "STR_MOD",
  "DEX_MOD",
  "CON_MOD",
  "INT_MOD",
  "WIS_MOD",
  "CHA_MOD",
  "SKILL_CHOICE_LIST",
  "TOOL_PROFICIENCIES",
  "TOOL_CHOICE_LIST",
  "WEAPON_PROFICIENCIES",
  "SENSES",
  "DAMAGE_RES",
  "SOURCE",
  "RULESET"
];
var ITEM_KEYS = [
  "NAME",
  "TYPE",
  "RARITY",
  "COST",
  "WEIGHT",
  "PROPERTIES",
  "DAMAGE",
  "DAMAGE_TYPES",
  "RANGE",
  "RELOAD",
  "AMMO_TYPE",
  "AC",
  "STEALTH_DISADVANTAGE",
  "MAGICAL",
  "ATTUNEMENT",
  "ATTUNE_REQ",
  "VERMUN",
  "SOURCE",
  "RULESET"
];
var BESTIARY_KEYS = [
  "NAME",
  "SIZE",
  "TYPE",
  "ALIGNMENT",
  "AC",
  "HP",
  "SPEED",
  "STRENGTH",
  "DEXTERITY",
  "CONSTITUTION",
  "INTELLIGENCE",
  "WISDOM",
  "CHARISMA",
  "SAVING_THROWS",
  "SKILLS",
  "SENSES",
  "LANGUAGES",
  "CHALLENGE_RATING",
  "SOURCE",
  "RULESET"
];
var CLASS_KEYS = [
  "NAME",
  "SPELL_CAST_MOD",
  "ARMOR_PROFICIENCIES",
  "WEAPON_PROFICIENCIES",
  "TOOL_PROFICIENCIES",
  "TOOL_CHOICE_LIST",
  "SAVING_THROWS",
  "SKILLS",
  "SKILL_CHOICE_LIST",
  "TRAITS",
  "SOURCE",
  "RULESET"
];
var BACKGROUND_KEYS = [
  "NAME",
  "SKILLS",
  "SKILL_CHOICE_LIST",
  "TOOL_PROFICIENCIES",
  "TOOL_CHOICE_LIST",
  "TRAITS",
  "SOURCE",
  "RULESET"
];
var FEATS_KEYS = [
  "SOURCE",
  "RULESET"
];
var SPELL_META_DEFS = SPELL_KEYS.map((key) => {
  const def = ALL_FIELD_DEFS.find((d) => d.callSign === key);
  if (!def) throw new Error(`Missing FieldDef for SPELL_KEY ${key}`);
  return def;
});
var SPECIES_META_DEFS = SPECIES_KEYS.map((key) => {
  const def = ALL_FIELD_DEFS.find((d) => d.callSign === key);
  if (!def) throw new Error(`Missing FieldDef for SPECIES_KEY ${key}`);
  return def;
});
var ITEM_META_DEFS = ITEM_KEYS.map((key) => {
  const def = ALL_FIELD_DEFS.find((d) => d.callSign === key);
  if (!def) throw new Error(`Missing FieldDef for ITEM_KEY ${key}`);
  return def;
});
var BESTIARY_META_DEFS = BESTIARY_KEYS.map((key) => {
  const def = ALL_FIELD_DEFS.find((d) => d.callSign === key);
  if (!def) throw new Error(`Missing FieldDef for BESTIARY_KEY ${key}`);
  return def;
});
var CLASS_META_DEFS = CLASS_KEYS.map((key) => {
  const def = ALL_FIELD_DEFS.find((d) => d.callSign === key);
  if (!def) throw new Error(`Missing FieldDef for CLASS_KEY ${key}`);
  return def;
});
var BACKGROUND_META_DEFS = BACKGROUND_KEYS.map((key) => {
  const def = ALL_FIELD_DEFS.find((d) => d.callSign === key);
  if (!def) throw new Error(`Missing FieldDef for BACKGROUND_KEY ${key}`);
  return def;
});
var FEATS_META_DEFS = FEATS_KEYS.map((key) => {
  const def = ALL_FIELD_DEFS.find((d) => d.callSign === key);
  if (!def) throw new Error(`Missing FieldDef for BACKGROUND_KEY ${key}`);
  return def;
});

// src/parsers/5e-2014/spells.ts
var SCHOOL_MAP = {
  A: "Abjuration",
  C: "Conjuration",
  D: "Divination",
  E: "Enchantment",
  V: "Evocation",
  I: "Illusion",
  N: "Necromancy",
  T: "Transmutation"
};
function ordinal(n) {
  const suffix = n === 1 ? "st" : n === 2 ? "nd" : n === 3 ? "rd" : "th";
  return `${n}${suffix}`;
}
function formatRange(range) {
  if (!range) return "";
  if (typeof range === "string") return range;
  if (range.type === "special") return "Special";
  if (range.type === "point" && range.distance) {
    const dist = range.distance;
    if (dist.type === "touch") return "Touch";
    if (dist.type === "self") return "Self";
    if (dist.type === "sight") return "Sight";
    if (dist.amount) return `${dist.amount} ${dist.type}`;
  }
  return "Varies";
}
function formatTime(time) {
  if (!Array.isArray(time)) return "";
  return time.map((t) => `${t.number} ${t.unit}`).join(", ");
}
function formatDuration(duration) {
  if (!Array.isArray(duration)) return "";
  return duration.map((d) => {
    if (d.type === "instant") return "Instantaneous";
    if (d.type === "timed" && d.duration) {
      return `${d.duration.amount} ${d.duration.type}${d.concentration ? " (concentration)" : ""}`;
    }
    if (d.type === "permanent") return "Permanent";
    return "Special";
  }).join(", ");
}
function formatComponents(components) {
  if (!components) return "";
  const parts = [];
  if (components.v) parts.push("V");
  if (components.s) parts.push("S");
  if (components.m) {
    let matDetails = [];
    if (Array.isArray(components.m)) {
      matDetails = components.m.map(
        (item) => typeof item === "string" ? item : item && typeof item.text === "string" ? item.text : null
      ).filter((t) => !!t);
    } else if (typeof components.m === "string") {
      matDetails = [components.m];
    } else if (components.m.text) {
      matDetails = [components.m.text];
    }
    const matPart = matDetails.length > 0 ? `M (${matDetails.join(", ")})` : "M";
    parts.push(matPart);
  }
  return parts.join(", ");
}
function parseSpellsFile(json, editionId) {
  if (!json.spell) return [];
  json._editionId = editionId;
  return json.spell.map((spell) => {
    const sources = spell.source ? Array.isArray(spell.source) ? spell.source : [spell.source] : ["unknown"];
    const name = spell.name;
    const school = SCHOOL_MAP[spell.school] ?? spell.school;
    const level = spell.level;
    const range = formatRange(spell.range);
    const castingTime = formatTime(spell.time);
    const duration = formatDuration(spell.duration);
    const formattedSources = sources.map((s) => getFullSourceName(s, editionId));
    const attackType = spell.attackType || "";
    const damageType = spell.damageInflict?.[0] || "Teleportation";
    const ritual = spell.ritual === true;
    const concentration = spell.duration?.some((d) => d.concentration) ?? false;
    const FM = buildFM(spell, SPELL_META_DEFS);
    const yaml = serializeFrontmatter(FM, SPELL_META_DEFS);
    const savingThrows = FM[FM_FIELDS.SAVING_THROWS] || [];
    const saveAttr = FM[FM_FIELDS.SAVE];
    const safeName = name.replace(/\//g, "-");
    const title = `# ${name}`;
    const levelLabel = level === 0 ? `${school} Cantrip` : `${ordinal(level)}-level ${school} Spell`;
    const subtitle = `### *${levelLabel}*${concentration ? " *(Concentration)*" : ""}`;
    const headerLines = [
      title,
      subtitle,
      `**Casting Time:** ${castingTime}`,
      `**Range:** ${range}`,
      `**Components:** ${formatComponents(spell.components)}`,
      ...savingThrows.length ? [`**Saving Throw:** ${savingThrows.join(", ")}`] : [],
      `**Duration:** ${duration}`
    ];
    const bodyLines = [
      ...(spell.entries ?? []).map((e) => formatEntry(e)),
      ...(spell.entriesHigherLevel ?? []).map((e) => formatEntry(e))
    ];
    const footerLines = [
      `---`,
      `**Source:** ${formattedSources.join(", ")}`
    ];
    return {
      path: `${safeName}.md`,
      content: [
        `---
${yaml}
---`,
        headerLines.join("\n"),
        ``,
        bodyLines.join("\n\n"),
        ``,
        footerLines.join("\n")
      ].join("\n")
    };
  });
}

// src/parsers/5e-2014/species.ts
function slug(name) {
  return name.replace(/;/g, ":").replace(/[\/:"]/g, ":").trim();
}
var BLOCKED_TRAITS = ["Age", "Size", "Languages", "Creature Type", "Speed"];
function linkDisplay(str) {
  if (typeof str !== "string") return String(str ?? "");
  const m = str.match(/^\[\[(.+?)\]\]$/);
  if (!m) return str;
  const inner = m[1];
  const pipe = inner.split("|");
  if (pipe.length > 1) return pipe[1].trim();
  const hash = inner.split("#");
  if (hash.length > 1) return hash[1].trim();
  return inner.trim();
}
function normName(n) {
  return String(n ?? "").replace(/^Feature:\s*/i, "").replace(/\s+/g, " ").trim().toLowerCase();
}
function findEntryByName(entries, display) {
  if (!Array.isArray(entries)) return null;
  const target = normName(display);
  const direct = entries.find((e) => typeof e?.name === "string" && normName(e.name) === target);
  if (direct) return direct;
  for (const e of entries) {
    if (Array.isArray(e?.entries)) {
      const sub = e.entries.find((s) => typeof s?.name === "string" && normName(s.name) === target);
      if (sub) return sub;
    }
  }
  return null;
}
function parseSpeciesFile(json, editionId) {
  if (!Array.isArray(json.race)) return [];
  json._editionId = editionId;
  const rawVariants = json.race.filter(
    (r) => !("reprintedAs" in r) && !/\((?:Kaladesh|Zendikar|Amonkhet|Innistrad|Ixalan)\)$/.test(r.name)
  );
  const byName = /* @__PURE__ */ new Map();
  for (const r of rawVariants) {
    const list = byName.get(r.name) ?? [];
    list.push(r);
    byName.set(r.name, list);
  }
  const subracesList = Array.isArray(json.subrace) ? json.subrace : [];
  const out = [];
  for (const [raceName, raceVariants] of byName.entries()) {
    const safeName = slug(raceName);
    const primary = raceVariants.reduce(
      (best, cur) => Object.keys(cur).length > Object.keys(best).length ? cur : best,
      raceVariants[0]
    );
    if (!primary.ability) {
      const humanEntry = subracesList.find(
        (sr) => sr.raceName === raceName && sr.raceSource === primary.source && !("name" in sr) && Array.isArray(sr.ability)
      );
      if (humanEntry) primary.ability = humanEntry.ability;
    }
    const fm = buildFM(primary, SPECIES_META_DEFS);
    const senses = [];
    if (primary.darkvision) senses.push(`Darkvision ${primary.darkvision} ft.`);
    if (primary.blindsight) senses.push(`Blindsight ${primary.blindsight} ft.`);
    if (primary.tremorsense) senses.push(`Tremorsense ${primary.tremorsense} ft.`);
    if (primary.truesight) senses.push(`Truesight ${primary.truesight} ft.`);
    if (senses.length) fm.senses = senses;
    if (Array.isArray(fm.traits)) {
      fm.traits = fm.traits.filter((t) => !BLOCKED_TRAITS.includes(t));
    }
    const yaml = serializeFrontmatter(fm, SPECIES_META_DEFS);
    const lines = [];
    lines.push(`# ${raceName}`, `## Stats`);
    const size = Array.isArray(primary.size) ? primary.size.map((s) => SIZE_MAP2[s] || s).join("/") : SIZE_MAP2[primary.size] ?? primary.size;
    lines.push(`**Size:** ${size}`);
    const speed = typeof primary.speed === "number" ? primary.speed : primary.speed?.walk ?? primary.speed?.base ?? 0;
    lines.push(`**Speed:** ${speed} ft. walking`);
    const kids = subracesList.filter(
      (sr) => sr.name && sr.raceName === raceName && sr.raceSource === primary.source
    );
    const rawAbility = Array.isArray(primary.ability) ? primary.ability : Array.isArray(kids[0]?.ability) ? kids[0].ability : [];
    if (Array.isArray(rawAbility) && rawAbility.length) {
      const bonuses = { str: 0, dex: 0, con: 0, int: 0, wis: 0, cha: 0 };
      let chooseOpt = null;
      for (const obj of rawAbility) {
        if ("choose" in obj) chooseOpt = obj.choose;
        else for (const [k, v] of Object.entries(obj)) bonuses[k] += v;
      }
      const pairs = Object.entries(bonuses);
      const parts = pairs.filter(([, v]) => v !== 0).map(([k, v]) => `${k.toUpperCase()} ${v >= 0 ? "+" : ""}${v}`);
      if (chooseOpt?.count && Array.isArray(chooseOpt.from)) {
        parts.push(`CHOOSE ${chooseOpt.count} from ${chooseOpt.from.map((s) => s.toUpperCase()).join(", ")}`);
      }
      if (parts.length) lines.push(`**Ability Scores:** ${parts.join(", ")}`);
    }
    const langs = fm.languages;
    if (langs?.length) lines.push(`**Languages:** ${langs.join(", ")}`);
    if (Array.isArray(primary.skillProficiencies)) {
      const skillLabels = [];
      for (const e of primary.skillProficiencies) {
        if (e.choose?.from) {
          skillLabels.push(`Choose from: ${e.choose.from.map((s) => s.charAt(0).toUpperCase() + s.slice(1)).join(", ")}`);
        } else {
          const val = e.proficiency ?? e.name ?? e;
          if (typeof val === "string") skillLabels.push(val.charAt(0).toUpperCase() + val.slice(1));
        }
      }
      if (skillLabels.length) lines.push(`**Skill Proficiencies:** ${skillLabels.join("; ")}`);
    }
    const tp = fm[FM_FIELDS.TOOL_PROFICIENCIES];
    const wp = fm[FM_FIELDS.WEAPON_PROFICIENCIES];
    const ap = fm[FM_FIELDS.ARMOR_PROFICIENCIES];
    if (tp?.length) lines.push(`**Tool Proficiencies:** ${tp.join(", ")}`);
    if (wp?.length) lines.push(`**Weapon Proficiencies:** ${wp.join(", ")}`);
    if (ap?.length) lines.push(`**Armor Proficiencies:** ${ap.join(", ")}`);
    lines.push(`## Traits`);
    const seen = /* @__PURE__ */ new Set();
    for (const trait of fm.traits || []) {
      const title = linkDisplay(trait);
      lines.push(`##### ${title}`);
      const ent = findEntryByName(primary.entries, title);
      if (ent?.entries) {
        ent.entries.forEach((sub, idx) => {
          let blk;
          if (sub.type === "table") {
            blk = renderMarkdownTable(sub);
          } else if (sub.type === "list") {
            blk = sub.items.map((it) => typeof it === "string" ? `- ${replace5eTags(it)}` : `- ${it.name}`).join("\n");
          } else if (typeof sub === "string") {
            blk = replace5eTags(sub);
          }
          if (blk && !seen.has(blk)) {
            lines.push(blk);
            seen.add(blk);
            if (ent.entries.length > 1 && idx < ent.entries.length - 1) lines.push("");
          }
        });
      }
    }
    const subs = kids;
    if (subs.length) {
      out.push({
        path: `Species/${safeName}/${safeName}.md`,
        content: `---
${yaml}
---

${lines.join("\n")}`
      });
      const subFolder = `Species/${safeName}/Races`;
      for (const sr of subs) {
        const display = sr.name.replace(/;/g, ":");
        const subLines = [`# ${display}`];
        if (Array.isArray(sr.ability)) {
          const bonuses = { str: 0, dex: 0, con: 0, int: 0, wis: 0, cha: 0 };
          let chooseOpt = null;
          for (const obj of sr.ability) {
            if ("choose" in obj) chooseOpt = obj.choose;
            else for (const [k, v] of Object.entries(obj)) bonuses[k] += v;
          }
          const pairs = Object.entries(bonuses);
          const parts = pairs.filter(([, v]) => v !== 0).map(([k, v]) => `${k.toUpperCase()} ${v >= 0 ? "+" : ""}${v}`);
          if (chooseOpt?.count) parts.push(`CHOOSE ${chooseOpt.count} from ${chooseOpt.from.map((s) => s.toUpperCase()).join(", ")}`);
          if (parts.length) subLines.push(`**Ability Scores:** ${parts.join(", ")}`);
        }
        for (const entry of sr.entries || []) {
          subLines.push(formatEntry(entry));
          subLines.push("");
        }
        const subYaml = serializeFrontmatter(buildFM(sr, SPECIES_META_DEFS), SPECIES_META_DEFS);
        out.push({
          path: `${subFolder}/${slug(sr.name)}.md`,
          content: `---
${subYaml}
---

${subLines.join("\n")}`
        });
      }
    } else {
      out.push({
        path: `Species/${safeName}.md`,
        content: `---
${yaml}
---

${lines.join("\n")}`
      });
    }
  }
  return out.sort((a, b) => a.path.localeCompare(b.path));
}

// src/parsers/5e-2014/classes.ts
function formatFeatureLink(name) {
  const ignore = ["Ability Score Improvement", "Archetype Feature", "Subclass Feature"];
  if (ignore.some((sub) => name.toLowerCase().includes(sub.toLowerCase()))) {
    return name;
  }
  const anchor = name.replace(/[^\w\s]/g, "").replace(/-/g, " ").replace(/\s+/g, " ").trim().replace(/\b\w/g, (l) => l.toUpperCase());
  return `[[#${anchor}]]`;
}
function toHeaderAnchor(name) {
  return name.replace(/[^\w\s]/g, "").replace(/-/g, " ").replace(/\s+/g, " ").trim().replace(/\b\w/g, (l) => l.toUpperCase());
}
var OPT_FEATURE_TYPE_TO_FULL = {
  AI: "Artificer Infusion",
  ED: "Elemental Discipline",
  EI: "Eldritch Invocation",
  MM: "Metamagic",
  MV: "Maneuver",
  "MV:B": "Maneuver, Battle Master",
  "MV:C2-UA": "Maneuver, Cavalier V2 (UA)",
  "AS:V1-UA": "Arcane Shot, V1 (UA)",
  "AS:V2-UA": "Arcane Shot, V2 (UA)",
  AS: "Arcane Shot",
  OTH: "Other",
  "FS:F": "Fighting Style; Fighter",
  "FS:B": "Fighting Style; Bard",
  "FS:P": "Fighting Style; Paladin",
  "FS:R": "Fighting Style; Ranger",
  PB: "Pact Boon",
  OR: "Onomancy Resonant",
  RN: "Rune Knight Rune",
  AF: "Alchemical Formula",
  TT: "Traveler's Trick"
};
function parseClassFile(json, editionId, fileName, optionalFeatures) {
  json._editionId = editionId;
  const cls = Array.isArray(json.class) ? json.class[0] : json;
  const className = typeof cls.name === "string" ? cls.name : fileName ? fileName.replace(/^class-/, "").replace(/\.json$/, "") : "Unknown";
  const subclassFiles = [];
  const PROF_BONUS_BY_LEVEL = [
    "+2",
    "+2",
    "+2",
    "+2",
    "+3",
    "+3",
    "+3",
    "+3",
    "+4",
    "+4",
    "+4",
    "+4",
    "+5",
    "+5",
    "+5",
    "+5",
    "+6",
    "+6",
    "+6",
    "+6"
  ];
  const hdNum = cls.hd?.number ?? 1;
  const hdFaces = cls.hd?.faces ?? 6;
  const hdStr = `${hdNum}d${hdFaces}`;
  const hdMax = hdNum * hdFaces;
  const hdAvg = Math.ceil((hdFaces + 1) / 2);
  const baseFM = buildFM(cls, CLASS_META_DEFS);
  const fm = { ...baseFM, hd: hdStr };
  const yaml = serializeFrontmatter(fm, CLASS_META_DEFS);
  const lines = [];
  lines.push(`# ${className}`);
  if (cls.source) lines.push(`**Source:** ${cls.source}`);
  lines.push(``);
  lines.push(`---`);
  lines.push(`## Hit Points`);
  lines.push(`**Hit Dice:** ${hdStr} per ${className} level`);
  lines.push(`**Hit Points at 1st Level:** ${hdMax} + your Constitution modifier`);
  lines.push(
    `**Hit Points at Higher Levels:** ${hdStr} (or ${hdAvg}) + your Constitution modifier per level after 1st`
  );
  lines.push(``);
  lines.push(`---`);
  lines.push(`## Proficiencies`);
  const sp = cls.startingProficiencies ?? {};
  if (Array.isArray(sp.armor) && sp.armor.length) {
    lines.push(`- **Armor:** ${sp.armor.join(", ")}`);
  }
  const weaponList = unifiedWeaponProfs(sp);
  if (weaponList.length) {
    lines.push(`- **Weapons:** ${weaponList.join(", ")}`);
  }
  const toolList = unifiedToolProfs(sp);
  if (toolList.length) {
    lines.push(`- **Tools:** ${toolList.join(", ")}`);
  }
  const saves = Array.isArray(cls.proficiency) ? cls.proficiency.map(
    (k) => ({
      str: "Strength",
      dex: "Dexterity",
      con: "Constitution",
      int: "Intelligence",
      wis: "Wisdom",
      cha: "Charisma"
    })[k] || k.toUpperCase()
  ) : [];
  if (saves.length) {
    lines.push(`- **Saving Throws:** ${saves.join(", ")}`);
  }
  {
    const rawSkills = Array.isArray(sp.skillProficiencies) ? sp.skillProficiencies : Array.isArray(sp.skills) ? sp.skills : Array.isArray(sp.skillProf) ? sp.skillProf : [];
    const choiceEntry = rawSkills.find(
      (e) => e && (typeof e.choose === "object" || typeof e.any === "number")
    );
    if (choiceEntry) {
      const count = choiceEntry.choose?.count ?? choiceEntry.any ?? 1;
      const options = Array.isArray(choiceEntry.choose?.from) ? choiceEntry.choose.from.map(
        (s) => (
          // title-case each word (or just use s)
          s.split(" ").map((w) => w[0].toUpperCase() + w.slice(1)).join(" ")
        )
      ) : SKILL_OPTIONS;
      lines.push(`- **Skills (Choose ${count}):** ${options.join(", ")}`);
    } else {
      const flat = unifiedSkills2(sp);
      if (flat.length) {
        lines.push(`- **Skills:** ${flat.join(", ")}`);
      }
    }
  }
  if (Array.isArray(cls.startingEquipment)) {
    lines.push(`
### Equipment`);
    cls.startingEquipment.filter((e) => typeof e === "string").forEach((item) => lines.push(`- ${item}`));
  }
  const progGroups = cls.classTableGroups ?? [];
  const maxLevel = 20;
  if (!progGroups.length) {
    lines.push(`*(No class table provided for this class.)*`);
  } else {
    const featuresByLevel2 = {};
    for (const feat of cls.classFeatures ?? []) {
      const raw = typeof feat === "object" && feat.classFeature ? feat.classFeature : String(feat);
      const [name, , , lvlStr] = raw.split("|");
      const lvl = Number(lvlStr ?? 0);
      if (!featuresByLevel2[lvl]) featuresByLevel2[lvl] = [];
      featuresByLevel2[lvl].push(name);
    }
    const allLabelsSet = /* @__PURE__ */ new Set();
    const rowMaps = {};
    for (const group of progGroups) {
      const labels = Array.isArray(group.colLabels) ? group.colLabels.map((l) => replace5eTags(l)) : [];
      const rows = Array.isArray(group.rows) ? group.rows : Array.isArray(group.rowsSpellProgression) ? group.rowsSpellProgression : [];
      if (!labels.length || !rows.length) continue;
      for (let lvl = 0; lvl < rows.length; lvl++) {
        const levelNum = lvl + 1;
        if (!rowMaps[levelNum]) rowMaps[levelNum] = {};
        const rowMap = rowMaps[levelNum];
        const cells = rows[lvl];
        for (let i = 0; i < labels.length; i++) {
          const label = labels[i];
          let val = "";
          const cell = cells[i];
          if (Array.isArray(cell)) {
            val = cell.join(", ");
          } else if (cell && typeof cell === "object" && "value" in cell) {
            val = String(cell.value);
          } else {
            val = String(cell ?? "");
          }
          allLabelsSet.add(label);
          rowMap[label] = val;
        }
      }
    }
    const allLabels = Array.from(allLabelsSet).filter(
      (lbl) => !/Cantrips Known|Spells Known|\d+(st|nd|rd|th)/.test(lbl)
    );
    const mergedLabels = ["Level", "Proficiency Bonus", "Class Features", ...allLabels];
    const mergedRows = [];
    for (let lvl = 1; lvl <= maxLevel; lvl++) {
      const featureList = (featuresByLevel2[lvl] ?? []).map(formatFeatureLink);
      const rowMap = rowMaps[lvl] ?? {};
      mergedRows.push([
        lvl.toString(),
        PROF_BONUS_BY_LEVEL[lvl - 1] || "",
        featureList.join(", ").replace(/\|/g, "&#124;"),
        ...allLabels.map((label) => rowMap[label] ?? "")
      ]);
    }
    lines.push(`
> [!example]- Class Progression Table`);
    lines.push(
      renderMarkdownTable({
        type: "table",
        caption: "",
        colLabels: mergedLabels,
        rows: mergedRows
      })
    );
  }
  const csGroup = progGroups.find(
    (g) => Array.isArray(g.colLabels) && g.colLabels.some((lbl) => /Cantrips Known|Spells Known/.test(String(lbl)))
  );
  const slotGroup = progGroups.find(
    (g) => Array.isArray(g.colLabels) && g.title === "Spell Slots per Spell Level"
  );
  if (csGroup && slotGroup) {
    const csLabels = csGroup.colLabels.map((l) => replace5eTags(l));
    const slotLabels = slotGroup.colLabels.map((l) => replace5eTags(l));
    const csRows = csGroup.rows || [];
    const slotRows = slotGroup.rowsSpellProgression || [];
    const colLabels = ["Level", ...csLabels, ...slotLabels];
    const spellRows = [];
    for (let i = 0; i < Math.max(csRows.length, slotRows.length); i++) {
      const lvl = String(i + 1);
      const csCells = csRows[i] ? csRows[i].map(String) : csLabels.map((_) => "");
      const slotCells = slotRows[i] ? slotRows[i].map(String) : slotLabels.map((_) => "");
      spellRows.push([lvl, ...csCells, ...slotCells]);
    }
    lines.push(`
> [!tip]- Spell Progression Table`);
    lines.push(
      renderMarkdownTable({
        type: "table",
        caption: "",
        colLabels,
        rows: spellRows
      })
    );
  }
  const subs = Array.isArray(json.subclass) ? json.subclass : [];
  const subclassFeatures = Array.isArray(json.subclassFeature) ? json.subclassFeature : json.lookup?.subclassFeature ?? [];
  for (const sc of subs) {
    const subclassName = sc.name;
    const subLines = [];
    subLines.push(`# ${subclassName}`);
    subLines.push(`**Parent Class:** [[${className}]]`);
    if (sc.source) subLines.push(`**Source:** ${sc.source}`);
    subLines.push(``);
    const intro = subclassFeatures.find(
      (f) => f.name === sc.name && f.level === 3 && f.subclassShortName === sc.shortName && f.subclassSource === sc.source
    );
    if (intro?.entries?.length) {
      const introText = Array.isArray(intro.entries) ? intro.entries.map(
        (e) => typeof e === "string" ? replace5eTags(e) : formatEntry(e)
      ).join("\n\n") : formatEntry(intro.entries);
      subLines.push(introText, ``);
    }
    const code = Object.entries(OPT_FEATURE_TYPE_TO_FULL).find(
      ([, full]) => full.toLowerCase().includes(subclassName.toLowerCase())
    )?.[0];
    if (code) {
      const matches = optionalFeatures.filter(
        (of) => Array.isArray(of.featureType) && of.featureType.includes(code)
      );
      if (matches.length) {
        subLines.push(`## ${subclassName} Optional Features`);
        for (const feat of matches) {
          for (const entry of feat.entries) {
            const txt = typeof entry === "string" ? replace5eTags(entry) : formatEntry(entry);
            subLines.push(`**${feat.name}:** ${txt}`);
          }
          subLines.push(``);
        }
      }
    }
    const prog = sc.subclassTableGroups ?? [];
    if (prog.length) {
      const labels = /* @__PURE__ */ new Set();
      const rowsMap = {};
      for (const g of prog) {
        const cols = (g.colLabels ?? []).map(replace5eTags);
        const rows = Array.isArray(g.rows) ? g.rows : Array.isArray(g.rowsSpellProgression) ? g.rowsSpellProgression : [];
        rows.forEach((r, i) => {
          const lvl = i + 1;
          rowsMap[lvl] ?? (rowsMap[lvl] = {});
          r.forEach((c, j) => {
            const lab = cols[j];
            if (!lab) return;
            labels.add(lab);
            rowsMap[lvl][lab] = typeof c === "object" && c !== null && "value" in c ? String(c.value) : String(c ?? "");
          });
        });
      }
      const hdrs = Array.from(labels);
      subLines.push(`## Subclass Progression`);
      subLines.push(renderMarkdownTable({
        type: "table",
        caption: "",
        colLabels: ["Level", ...hdrs],
        rows: Array.from({ length: 20 }, (_, i) => {
          const lvl = i + 1;
          return [String(lvl), ...hdrs.map((h) => rowsMap[lvl]?.[h] ?? "")];
        })
      }));
    }
    const featsByLvl = {};
    for (const f of subclassFeatures) {
      if (f.subclassShortName === sc.shortName && f.subclassSource === sc.source && f.className === className) {
        const lvl = f.level ?? 0;
        ;
        (featsByLvl[lvl] ?? (featsByLvl[lvl] = [])).push(f);
      }
    }
    const IGNORE_TRAITS = ["Ability Score Improvement", "Archetype Feature", "Subclass Feature"];
    const traitNames = Array.from(
      new Set(
        Object.values(featsByLvl).flat().map((f) => String(f?.name || "").trim()).filter((n) => n && !IGNORE_TRAITS.some((s) => n.toLowerCase().includes(s.toLowerCase())))
      )
    );
    const traitLinks = traitNames.map((n) => `[[${subclassName}#${toHeaderAnchor(n)}|${n}]]`);
    const subYaml = serializeFrontmatter({ traits: traitLinks }, CLASS_META_DEFS);
    for (const lvl of Object.keys(featsByLvl).map(Number).sort((a, b) => a - b)) {
      subLines.push(`---`, `## Level ${lvl}`);
      for (const f of featsByLvl[lvl]) {
        subLines.push(`### ${f.name}`);
        for (const ent of Array.isArray(f.entries) ? f.entries : [f.entries]) {
          if (typeof ent === "string") {
            subLines.push(replace5eTags(ent));
            continue;
          }
          if (ent.type === "entries" && /^Maneuvers$/i.test(ent.name)) {
            subLines.push(`##### ${ent.name}`);
            for (const txt of Array.isArray(ent.entries) ? ent.entries : [ent.entries]) {
              subLines.push(typeof txt === "string" ? replace5eTags(txt) : formatEntry(txt));
            }
            const code2 = Object.entries(OPT_FEATURE_TYPE_TO_FULL).find(
              ([, full]) => full.toLowerCase().includes(subclassName.toLowerCase())
            )?.[0];
            if (code2) {
              const matches = optionalFeatures.filter(
                (of) => Array.isArray(of.featureType) && of.featureType.includes(code2)
              );
              for (const featDef of matches) {
                for (const sub of featDef.entries) {
                  const line = typeof sub === "string" ? replace5eTags(sub) : formatEntry(sub);
                  subLines.push(`**${featDef.name}:** ${line}`);
                }
                subLines.push("");
              }
            }
            continue;
          }
          if (ent.type === "entries" && ent.name) {
            subLines.push(`##### ${ent.name}`);
            for (const e2 of Array.isArray(ent.entries) ? ent.entries : [ent.entries]) {
              subLines.push(formatEntry(e2));
            }
            continue;
          }
          if (ent.type === "inset" && ent.name) {
            const inner = Array.isArray(ent.entries) ? ent.entries : [ent.entries];
            subLines.push(`> **${ent.name}**`);
            inner.forEach((e2) => subLines.push(`> ${formatEntry(e2)}`));
            continue;
          }
          const fb = formatEntry(ent);
          if (fb) subLines.push(fb);
        }
      }
    }
    const subclassContentBody = subLines.join("\n\n").replace(/\n{3,}/g, "\n\n");
    const subclassContent = `---
${subYaml}
---

${subclassContentBody}`;
    subclassFiles.push({
      path: `Classes/${className}/Subclasses/${subclassName}.md`,
      content: subclassContent
    });
  }
  if (subs.length) {
    const links = subs.map(
      (sc) => `[[Subclasses/${sc.name.replace(/[\\/]/g, "-")}|${sc.name}]]`
    );
    lines.push(`
**Subclasses:** ${links.join(", ")}`);
  }
  const allFeatures = Array.isArray(json.classFeature) ? json.classFeature : json.lookup?.classFeature ?? [];
  const featuresByLevel = {};
  for (const entry of allFeatures) {
    if (entry.className !== className) continue;
    const lvl = entry.level ?? 0;
    if (!featuresByLevel[lvl]) featuresByLevel[lvl] = [];
    featuresByLevel[lvl].push(entry);
  }
  lines.push(``);
  lines.push(`---`);
  lines.push(`## Level Features`);
  const levels = Object.keys(featuresByLevel).map((n) => +n).sort((a, b) => a - b);
  for (const lvl of levels) {
    lines.push(`### Level ${lvl}`);
    for (const feat of featuresByLevel[lvl]) {
      lines.push(`#### ${feat.name}`);
      const entries = Array.isArray(feat.entries) ? feat.entries : [feat.entries];
      for (const ent of entries) {
        if (typeof ent === "string") {
          const txt = formatEntry(ent).trim();
          if (txt === "{" || txt === "}") continue;
          lines.push(txt);
          continue;
        }
        if (ent.type === "list" && Array.isArray(ent.items)) {
          for (const item of ent.items) {
            lines.push(`- ${replace5eTags(item)}`);
          }
          continue;
        }
        if (ent.type === "options") {
          if (ent.count) {
            lines.push("");
            lines.push(`**Choose ${ent.count} of the following options:**`);
            lines.push("");
          }
          for (const optRef of Array.isArray(ent.entries) ? ent.entries : [ent.entries]) {
            if (optRef.type === "refOptionalfeature") {
              const [optName, optSrc] = optRef.optionalfeature.split("|");
              const featDef = optionalFeatures.find(
                (f) => f.name === optName && (!optSrc || f.source === optSrc)
              );
              if (featDef) {
                featDef.entries.forEach((subEntry, idx) => {
                  const text = typeof subEntry === "string" ? replace5eTags(subEntry) : formatEntry(subEntry);
                  if (idx === 0) {
                    lines.push(`- **${featDef.name}:** ${text}`);
                  } else {
                    lines.push(`  - ${text}`);
                  }
                });
                lines.push("");
              } else {
                lines.push(`**${optName}:**`);
              }
            } else {
              const txt = formatEntry(optRef);
              if (txt) lines.push(`- ${txt}`);
            }
          }
          continue;
        }
        if (ent.type === "refOptionalfeature") {
          const [name] = ent.optionalfeature.split("|");
          lines.push(`- [[${name}|${name}]]`);
          continue;
        }
        if (ent.type === "entries" && ent.name) {
          lines.push(`##### ${ent.name}`);
          const inner = Array.isArray(ent.entries) ? ent.entries : [ent.entries];
          for (const e2 of inner) {
            lines.push(formatEntry(e2));
          }
          continue;
        }
        const fallback = formatEntry(ent);
        if (fallback) lines.push(fallback);
      }
      lines.push(``);
    }
    lines.push(`---`);
  }
  let content = `---
${yaml}
---

${lines.join("\n")}`;
  content = replace5eTags(content);
  content = content.replace(/\n{3,}/g, "\n\n").replace(/\n +\n/g, "\n\n");
  return [
    {
      path: `Classes/${className}/${className}.md`,
      content
    },
    ...subclassFiles
  ];
}

// src/parsers/5e-2014/rules.ts
function parseActionsFile(json, editionId) {
  if (!Array.isArray(json.action)) return [];
  const lines = [];
  for (const action of json.action) {
    lines.push(`## ${action.name}`);
    const entries = Array.isArray(action.entries) ? action.entries : [action.entries];
    for (const entry of entries) {
      if (!entry) continue;
      if (typeof entry === "string") {
        const paras = entry.split(/\n{2,}/);
        for (const para of paras) {
          const t = para.trim();
          if (t) {
            lines.push(replace5eTags(t));
            lines.push("");
          }
        }
      } else if (entry.type === "list" && Array.isArray(entry.items)) {
        for (const item of entry.items) {
          lines.push(`- ${replace5eTags(item)}`);
        }
        lines.push("");
      } else if ((entry.type === "entries" || entry.type === "inset") && Array.isArray(entry.entries)) {
        lines.push(`### ${entry.name}`);
        for (const sub of entry.entries) {
          if (typeof sub === "string") {
            const ps = sub.split(/\n{2,}/);
            for (const p of ps) {
              const tt = p.trim();
              if (tt) {
                lines.push(replace5eTags(tt));
                lines.push("");
              }
            }
          } else if (sub.type === "list" && Array.isArray(sub.items)) {
            for (const li of sub.items) {
              lines.push(`- ${replace5eTags(li)}`);
            }
            lines.push("");
          } else {
            const txt = Array.isArray(sub) ? sub.join(" ") : typeof sub === "object" ? JSON.stringify(sub) : String(sub);
            lines.push(replace5eTags(txt));
            lines.push("");
          }
        }
      } else if (entry.type === "table" && Array.isArray(entry.rows)) {
        const headers = entry.colLabels || [];
        lines.push(`| ${headers.join(" | ")} |`);
        lines.push(`| ${headers.map(() => "---").join(" | ")} |`);
        for (const row of entry.rows) {
          lines.push(`| ${row.join(" | ")} |`);
        }
        lines.push("");
      } else {
        const txt = Array.isArray(entry) ? entry.join(" ") : typeof entry === "object" ? JSON.stringify(entry) : String(entry);
        lines.push(replace5eTags(txt));
        lines.push("");
      }
    }
    lines.push("---");
  }
  const cleaned = lines.reduce((acc, curr) => {
    if (curr === "" && acc.length && acc[acc.length - 1] === "") return acc;
    return acc.concat(curr);
  }, []);
  return [
    {
      path: "Rules and Reference/Actions.md",
      content: cleaned.join("\n").trim() + "\n"
    }
  ];
}
function parseConditionsDiseasesFile(json, editionId) {
  const outputs = [];
  const processItems = (items, outPath) => {
    const lines = [];
    for (const item of items) {
      lines.push(`## ${item.name}`);
      const entries = Array.isArray(item.entries) ? item.entries : [item.entries];
      for (const entry of entries) {
        if (!entry) continue;
        if (typeof entry === "string") {
          const paras = entry.split(/\n{2,}/);
          for (const para of paras) {
            const t = para.trim();
            if (t) {
              lines.push(replace5eTags(t));
              lines.push("");
            }
          }
        } else if (entry.type === "list" && Array.isArray(entry.items)) {
          for (const txt of entry.items) {
            lines.push(`- ${replace5eTags(txt)}`);
          }
          lines.push("");
        } else if (entry.type === "table" && Array.isArray(entry.rows)) {
          const headers = entry.colLabels || [];
          lines.push(`| ${headers.join(" | ")} |`);
          lines.push(`| ${headers.map(() => "---").join(" | ")} |`);
          for (const row of entry.rows) {
            lines.push(`| ${row.join(" | ")} |`);
          }
          lines.push("");
        } else if (entry.type === "entries" && Array.isArray(entry.entries)) {
          lines.push(`### ${entry.name}`);
          for (const sub of entry.entries) {
            const txt = typeof sub === "string" ? sub : String(sub);
            lines.push(replace5eTags(txt));
            lines.push("");
          }
        } else {
          const txt = Array.isArray(entry) ? entry.join(" ") : String(entry);
          lines.push(replace5eTags(txt));
          lines.push("");
        }
      }
      lines.push("---");
    }
    const cleaned = lines.reduce((acc, curr) => {
      if (curr === "" && acc.length && acc[acc.length - 1] === "") return acc;
      return acc.concat(curr);
    }, []);
    outputs.push({ path: outPath, content: cleaned.join("\n").trim() + "\n" });
  };
  processItems(json.condition || [], "Rules and Reference/Conditions.md");
  processItems(json.disease || [], "Rules and Reference/Diseases.md");
  return outputs;
}
function parseSensesFile(json, editionId) {
  const items = Array.isArray(json.sense) ? json.sense : Array.isArray(json.senses) ? json.senses : [];
  if (!items.length) return [];
  const lines = [];
  for (const sense of items) {
    lines.push(`## ${sense.name}`);
    const entries = Array.isArray(sense.entries) ? sense.entries : [sense.entries];
    for (const entry of entries) {
      if (!entry) continue;
      if (typeof entry === "string") {
        const paras = entry.split(/\n{2,}/);
        for (const para of paras) {
          const t = para.trim();
          if (t) {
            lines.push(replace5eTags(t));
            lines.push("");
          }
        }
      } else if (entry.type === "list" && Array.isArray(entry.items)) {
        for (const item of entry.items) {
          lines.push(`- ${replace5eTags(item)}`);
        }
        lines.push("");
      } else if ((entry.type === "entries" || entry.type === "inset") && Array.isArray(entry.entries)) {
        lines.push(`### ${entry.name}`);
        for (const sub of entry.entries) {
          const txt = typeof sub === "string" ? sub : String(sub);
          lines.push(replace5eTags(txt));
          lines.push("");
        }
      } else if (entry.type === "table" && Array.isArray(entry.rows)) {
        const headers = entry.colLabels || [];
        lines.push(`| ${headers.join(" | ")} |`);
        lines.push(`| ${headers.map(() => "---").join(" | ")} |`);
        for (const row of entry.rows) {
          lines.push(`| ${row.join(" | ")} |`);
        }
        lines.push("");
      } else {
        const txt = Array.isArray(entry) ? entry.join(" ") : String(entry);
        lines.push(replace5eTags(txt));
        lines.push("");
      }
    }
    lines.push("---");
  }
  const cleaned = lines.reduce((acc, curr) => {
    if (curr === "" && acc.length && acc[acc.length - 1] === "") return acc;
    return acc.concat(curr);
  }, []);
  return [
    {
      path: "Rules and Reference/Senses.md",
      content: cleaned.join("\n").trim() + "\n"
    }
  ];
}
function parseSkillsFile(json, editionId) {
  const items = Array.isArray(json.skill) ? json.skill : Array.isArray(json.skills) ? json.skills : [];
  if (!items.length) return [];
  const lines = [];
  for (const skill of items) {
    lines.push(`## ${skill.name}`);
    if (skill.ability) {
      lines.push(`*Ability: ${skill.ability}*`);
      lines.push("");
    }
    const entries = Array.isArray(skill.entries) ? skill.entries : [skill.entries];
    for (const entry of entries) {
      if (!entry) continue;
      if (typeof entry === "string") {
        const paras = entry.split(/\n{2,}/);
        for (const para of paras) {
          const t = para.trim();
          if (t) {
            lines.push(replace5eTags(t));
            lines.push("");
          }
        }
      } else if (entry.type === "list" && Array.isArray(entry.items)) {
        for (const item of entry.items) {
          lines.push(`- ${replace5eTags(item)}`);
        }
        lines.push("");
      } else {
        const txt = Array.isArray(entry) ? entry.join(" ") : String(entry);
        lines.push(replace5eTags(txt));
        lines.push("");
      }
    }
    lines.push("---");
  }
  const cleaned = lines.reduce((acc, curr) => {
    if (curr === "" && acc.length && acc[acc.length - 1] === "") return acc;
    return acc.concat(curr);
  }, []);
  return [
    {
      path: "Rules and Reference/Skills.md",
      content: cleaned.join("\n").trim() + "\n"
    }
  ];
}

// src/parsers/5e-2014/feats.ts
function parseFeatsFile(json, editionId) {
  const feats = Array.isArray(json.feat) ? json.feat : Array.isArray(json.feats) ? json.feats : [];
  return feats.map((feat) => {
    const lines = [];
    const fm = buildFM({ ...feat, _editionId: editionId }, FEATS_META_DEFS);
    lines.push("---");
    lines.push(serializeFrontmatter(fm, FEATS_META_DEFS));
    lines.push("---", "");
    lines.push(`# ${feat.name}`, "");
    const prereqs = [];
    if (Array.isArray(feat.prerequisite)) {
      feat.prerequisite.forEach((pr) => {
        if (pr.level) prereqs.push(`Level ${pr.level}`);
        if (Array.isArray(pr.feat)) {
          pr.feat.forEach((f) => {
            const name = f.split("|")[0].replace(/\b\w/g, (c) => c.toUpperCase());
            prereqs.push(`Prerequisite: [[${name}]]`);
          });
        }
      });
    }
    if (feat.spellcastingPrepared) prereqs.push(`Prerequisite: Spellcaster`);
    if (Array.isArray(feat.toolProficiencies)) {
      feat.toolProficiencies.forEach((tp) => {
        Object.entries(tp).forEach(([key]) => {
          if (key === "anyArtisansTool") {
            prereqs.push(`Prerequisite: Proficient with an artisan's tool`);
          } else {
            prereqs.push(`Prerequisite: Proficient with ${key.replace(/([A-Z])/g, " $1").trim()}`);
          }
        });
      });
    }
    if (Array.isArray(feat.armorProficiencies)) {
      feat.armorProficiencies.forEach((arm) => {
        const armStr = typeof arm === "string" ? arm : JSON.stringify(arm);
        prereqs.push(`Prerequisite: Proficient with ${armStr.replace(/([A-Z])/g, " $1").trim()}`);
      });
    }
    if (feat.race) prereqs.push(`Prerequisite: ${feat.race}`);
    if (prereqs.length) {
      lines.push("**Prerequisites**");
      prereqs.forEach((p) => lines.push(`- ${p}`));
      lines.push("");
    }
    const entries = Array.isArray(feat.entries) ? feat.entries : [feat.entries];
    entries.forEach((entry) => {
      if (!entry) return;
      if (typeof entry === "string") {
        entry.split(/\n{2,}/).forEach((p) => {
          const t = p.trim();
          if (t) {
            lines.push(replace5eTags(t));
            lines.push("");
          }
        });
      } else if (entry.type === "list" && Array.isArray(entry.items)) {
        entry.items.forEach((it) => {
          if (typeof it === "string") {
            lines.push(`- ${replace5eTags(it)}`);
          } else if (it.type === "item" && it.name) {
            lines.push(`- **${it.name}**`);
            const subs = Array.isArray(it.entries) ? it.entries : [it.entries];
            subs.forEach(
              (s) => lines.push(`  - ${replace5eTags(typeof s === "string" ? s : JSON.stringify(s))}`)
            );
          }
        });
        lines.push("");
      } else if (entry.type === "inset") {
        lines.push(`- *${entry.name}*`);
        const subs = Array.isArray(entry.entries) ? entry.entries : [entry.entries];
        subs.forEach((s) => lines.push(`  - ${replace5eTags(s)}`));
        lines.push("");
      } else if ((entry.type === "section" || entry.type === "entries") && Array.isArray(entry.entries)) {
        if (entry.name) {
          lines.push(`## ${entry.name}`);
          lines.push("");
        }
        entry.entries.forEach((s) => {
          lines.push(replace5eTags(typeof s === "string" ? s : JSON.stringify(s)));
          lines.push("");
        });
      } else if (entry.type === "table" && Array.isArray(entry.rows)) {
        const hdr = entry.colLabels || [];
        lines.push(`| ${hdr.join(" | ")} |`);
        lines.push(`| ${hdr.map(() => "---").join(" | ")} |`);
        entry.rows.forEach(
          (row) => lines.push(`| ${row.join(" | ")} |`)
        );
        lines.push("");
      }
    });
    return {
      path: `Player Build/Feats/${feat.name}.md`,
      content: lines.join("\n").trim() + "\n"
    };
  });
}

// src/parsers/5e-2014/backgrounds.ts
function parseBackgroundsFile(json, editionId) {
  const raw = Array.isArray(json.background) ? json.background : Array.isArray(json.backgrounds) ? json.backgrounds : [];
  const backgrounds = raw.filter((bg) => {
    const nm = bg.name || "";
    return !nm.startsWith("Variant") && !nm.includes("Baldur's Gate");
  });
  const outputs = [];
  backgrounds.forEach((bg) => {
    const lines = [];
    const fm = buildFM(bg, BACKGROUND_META_DEFS);
    const extraTraits = Array.isArray(bg.entries) ? bg.entries.filter((e) => e.data?.isFeature && typeof e.name === "string").map((e) => {
      const name = e.name.replace(/^Feature:\s*/, "");
      return `[[${bg.name}#${name}]]`;
    }) : [];
    const yaml = serializeFrontmatter(fm, BACKGROUND_META_DEFS);
    lines.push("---", yaml, "---", "");
    lines.push(`# ${bg.name}`, "");
    if (Array.isArray(bg.skillProficiencies) && bg.skillProficiencies.length) {
      const skills = [];
      bg.skillProficiencies.forEach((ent) => {
        if (typeof ent === "string") {
          skills.push(cap2(ent));
        } else if (ent.choose && Array.isArray(ent.choose.from)) {
          skills.push(`Choose ${ent.choose.amount} from ${ent.choose.from.join(", ")}`);
        } else {
          Object.entries(ent).filter(([, v]) => v === true).forEach(([k]) => skills.push(cap2(k)));
        }
      });
      lines.push(`**Skill Proficiencies:** ${skills.join(", ")}`, "");
    }
    if (Array.isArray(bg.languageProficiencies) && bg.languageProficiencies.length) {
      const langs = [];
      bg.languageProficiencies.forEach((ent) => {
        if (ent.anyStandard) {
          langs.push(`${ent.anyStandard} of your choice`);
        } else {
          Object.entries(ent).filter(([, v]) => v === true).forEach(([k]) => langs.push(cap2(k)));
        }
      });
      lines.push(`**Languages:** ${langs.join(", ")}`, "");
    }
    if (Array.isArray(bg.toolProficiencies) && bg.toolProficiencies.length) {
      const tools = [];
      bg.toolProficiencies.forEach((ent) => {
        if (ent.choose && Array.isArray(ent.choose.from)) {
          const list = ent.choose.from.map(humanize).join(", ");
          tools.push(`Choose ${ent.choose.count} from ${list}`);
          return;
        }
        if (typeof ent === "string") {
          tools.push(humanize(ent));
          return;
        }
        Object.entries(ent).filter(([_, v]) => v === true).forEach(([k]) => tools.push(humanize(k)));
      });
      lines.push(`**Tool Proficiencies:** ${tools.join(", ")}`, "");
    }
    if (Array.isArray(bg.startingEquipment) && bg.startingEquipment.length) {
      lines.push(`**Equipment:**`);
      bg.startingEquipment.forEach((grp) => {
        if (Array.isArray(grp._)) {
          grp._.forEach((it) => lines.push(`- ${fmtItem(it)}`));
        }
        ["a", "b"].forEach((key) => {
          if (Array.isArray(grp[key])) {
            grp[key].forEach((it) => lines.push(`- ${fmtItem(it)}`));
          }
        });
      });
      lines.push("");
    }
    if (Array.isArray(bg.entries)) {
      bg.entries.forEach((entry) => {
        if (entry.type === "list" && entry.style === "list-hang-notitle") {
          return;
        }
        if (entry.name) {
          const header = entry.data?.isFeature ? entry.name.replace(/^Feature:\s*/, "") : entry.name;
          lines.push(`## ${header}`, "");
        }
        if (Array.isArray(entry.entries)) {
          entry.entries.forEach((e) => {
            if (typeof e === "string") {
              lines.push(replace5eTags(e), "");
            } else if (e.type === "list" && Array.isArray(e.items)) {
              e.items.forEach(
                (it) => lines.push(`- ${replace5eTags(it.entry ?? it)}`)
              );
              lines.push("");
            } else if (e.type === "table") {
              const tbl = renderMarkdownTable(e);
              if (tbl) lines.push(tbl, "");
            }
          });
        } else if (entry.type === "list" && Array.isArray(entry.items)) {
          entry.items.forEach(
            (it) => lines.push(`- ${replace5eTags(it.entry ?? it)}`)
          );
          lines.push("");
        }
      });
    }
    outputs.push({
      path: `Player Build/Backgrounds/${bg.name}.md`,
      content: lines.join("\n").trimEnd() + "\n"
    });
  });
  return outputs;
}
function cap2(str) {
  return str.charAt(0).toUpperCase() + str.slice(1);
}
function fmtItem(item) {
  if (typeof item === "string") {
    if (item.includes("|")) {
      return replace5eTags(`{@item ${item}}`);
    }
    return replace5eTags(item);
  }
  const priceRaw = item.containsValue ?? item.value;
  if (typeof priceRaw === "number" && // make sure it’s not also an “item” or “equipmentType”
  !item.item && !item.equipmentType && !item.special) {
    const gp = priceRaw >= 100 ? priceRaw / 100 : priceRaw;
    return `${gp} gp`;
  }
  if (item.item) {
    const link = replace5eTags(`{@item ${item.item}}`);
    if (typeof priceRaw === "number") {
      const gp = priceRaw >= 100 ? priceRaw / 100 : priceRaw;
      return `${link} (${gp} gp)`;
    }
    return link;
  }
  if (typeof item.special === "string") {
    return item.special;
  }
  if (item.equipmentType) {
    switch (item.equipmentType) {
      case "toolArtisan":
        return "One type of artisan\u2019s tools (of your choice)";
      case "instrumentMusical":
        return "One type of musical instrument (of your choice)";
      case "setGaming":
        return "One set of gaming dice (of your choice)";
      default:
        return humanize(item.equipmentType);
    }
  }
  return replace5eTags(JSON.stringify(item));
}
function humanize(str) {
  const spaced = str.replace(/([a-z])([A-Z])/g, "$1 $2");
  return spaced.charAt(0).toUpperCase() + spaced.slice(1);
}

// src/parsers/5e-2014/installer.ts
var import_obsidian2 = require("obsidian");
async function listSpellFilesFromGitHub(repo) {
  const url = `https://api.github.com/repos/${repo}/contents/data/spells`;
  const res = await fetch(url);
  const data = await res.json();
  return data.filter((item) => item.type === "file" && item.name.startsWith("spells-") && item.name.endsWith(".json")).map((item) => item.name);
}
async function listBestiaryFilesFromGitHub(repo) {
  const url = `https://api.github.com/repos/${repo}/contents/data/bestiary`;
  const res = await fetch(url);
  const list = await res.json();
  const CORE_SOURCES = [
    "bestiary-phb.json",
    "bestiary-mm.json",
    "bestiary-dmg.json",
    "bestiary-xge.json",
    "bestiary-vgm.json",
    "bestiary-tce.json",
    "bestiary-egw.json",
    "bestiary-erlw.json",
    "bestiary-mtf.json",
    "bestiary-vrgr.json",
    "bestiary-cos.json",
    "bestiary-oota.json",
    "bestiary-pota.json",
    "bestiary-hotdq.json",
    "bestiary-rot.json",
    "bestiary-skt.json",
    "bestiary-tftyp.json",
    "bestiary-toa.json"
  ];
  return list.filter((item) => item.type === "file" && CORE_SOURCES.includes(item.name)).map((item) => item.name);
}
var ITEM_JSON_FILES = [
  "items-base.json",
  "items.json",
  "objects.json",
  "vehicles.json",
  "decks.json"
];
async function listItemFilesFromGitHub(repo) {
  const url = `https://api.github.com/repos/${repo}/contents/data`;
  const res = await fetch(url);
  const data = await res.json();
  return data.filter((item) => item.type === "file" && ITEM_JSON_FILES.includes(item.name)).map((item) => item.name);
}
async function listClassFilesFromGitHub(repo) {
  const url = `https://api.github.com/repos/${repo}/contents/data/class`;
  const res = await fetch(url);
  const listing = await res.json();
  return listing.filter(
    (item) => item.type === "file" && item.name.startsWith("class-") && item.name.endsWith(".json")
  ).map((item) => item.name);
}
async function ensureFolder(app, folderPath) {
  const parts = folderPath.split("/");
  let curr = "";
  for (const p of parts) {
    curr = curr ? `${curr}/${p}` : p;
    try {
      await app.vault.createFolder(curr);
    } catch {
    }
  }
}
async function importEditionData(params) {
  const { app, edition, targetPath } = params;
  const repo = edition.repo ?? "";
  {
    const spellFiles = await listSpellFilesFromGitHub(repo);
    for (const fileName of spellFiles) {
      try {
        const res = await fetch(`${edition.sourceUrl}/spells/${fileName}`);
        const json = await res.json();
        const files = parseSpellsFile(json, edition.id);
        for (const md of files) {
          const fullPath = (0, import_obsidian.normalizePath)(`${targetPath}/Spells/${md.path}`);
          const folder = fullPath.split("/").slice(0, -1).join("/");
          await ensureFolder(app, folder);
          await app.vault.adapter.write(fullPath, md.content);
        }
      } catch (e) {
        console.warn(`Failed to import spell ${fileName}:`, e);
      }
    }
  }
  {
    const bestiaryFiles = await listBestiaryFilesFromGitHub(repo);
    for (const fileName of bestiaryFiles) {
      try {
        const res = await fetch(`${edition.sourceUrl}/bestiary/${fileName}`);
        const json = await res.json();
        const parsed = parseBestiaryFile(json, edition.id);
        for (const md of parsed) {
          const fullPath = (0, import_obsidian.normalizePath)(`${targetPath}/Bestiary/${md.path}`);
          const folder = fullPath.split("/").slice(0, -1).join("/");
          await ensureFolder(app, folder);
          await app.vault.adapter.write(fullPath, md.content);
        }
      } catch (e) {
        console.warn(`Failed to import bestiary ${fileName}:`, e);
      }
    }
  }
  {
    const itemFiles = await listItemFilesFromGitHub(repo);
    for (const fn of itemFiles) {
      try {
        const res = await fetch(`${edition.sourceUrl}/${fn}`);
        const json = await res.json();
        const mdFiles = parseItemsFile(json, edition.id);
        for (const md of mdFiles) {
          const fullPath = (0, import_obsidian.normalizePath)(`${targetPath}/${md.path}`);
          const folder = fullPath.split("/").slice(0, -1).join("/");
          await ensureFolder(app, folder);
          await app.vault.adapter.write(fullPath, md.content);
        }
      } catch (e) {
        console.warn(`Failed to import items from ${fn}:`, e);
      }
    }
  }
  {
    const res = await fetch(`${edition.sourceUrl}/races.json`);
    const json = await res.json();
    const mdFiles = parseSpeciesFile(json, edition.id);
    for (const md of mdFiles) {
      const fullPath = (0, import_obsidian.normalizePath)(`${targetPath}/Player Build/${md.path}`);
      await ensureFolder(app, fullPath.split("/").slice(0, -1).join("/"));
      await app.vault.adapter.write(fullPath, md.content);
    }
  }
  let optionalFeatures = [];
  try {
    const res = await fetch(`${edition.sourceUrl}/optionalfeatures.json`);
    const raw = await res.json();
    optionalFeatures = Array.isArray(raw.optionalfeature) ? raw.optionalfeature : [];
  } catch (e) {
    console.warn("Failed to import optionalfeatures.json:", e);
  }
  {
    const classFiles = await listClassFilesFromGitHub(repo);
    for (const fileName of classFiles) {
      try {
        const res = await fetch(`${edition.sourceUrl}/class/${fileName}`);
        const json = await res.json();
        const mdFiles = parseClassFile(
          json,
          edition.id,
          fileName,
          optionalFeatures
        );
        for (const md of mdFiles) {
          const fullPath = (0, import_obsidian.normalizePath)(`${targetPath}/Player Build/${md.path}`);
          await ensureFolder(app, fullPath.split("/").slice(0, -1).join("/"));
          const existing = app.vault.getAbstractFileByPath(fullPath);
          if (existing instanceof import_obsidian2.TFile) {
            await app.vault.modify(existing, md.content);
          } else {
            await app.vault.create(fullPath, md.content);
          }
        }
      } catch (e) {
        console.warn(`Failed to import class ${fileName}:`, e);
      }
    }
  }
  {
    try {
      const res = await fetch(`${edition.sourceUrl}/actions.json`);
      const json = await res.json();
      const mdFiles = parseActionsFile(json, edition.id);
      for (const md of mdFiles) {
        const fullPath = (0, import_obsidian.normalizePath)(
          `${targetPath}/${md.path}`
        );
        const folder = fullPath.split("/").slice(0, -1).join("/");
        await ensureFolder(app, folder);
        await app.vault.adapter.write(fullPath, md.content);
      }
    } catch (e) {
      console.warn("Failed to import actions.json:", e);
    }
  }
  {
    try {
      const res = await fetch(`${edition.sourceUrl}/conditionsdiseases.json`);
      const json = await res.json();
      const mdFiles = parseConditionsDiseasesFile(json, edition.id);
      for (const md of mdFiles) {
        const fullPath = (0, import_obsidian.normalizePath)(
          `${targetPath}/${md.path}`
        );
        const folder = fullPath.split("/").slice(0, -1).join("/");
        await ensureFolder(app, folder);
        await app.vault.adapter.write(fullPath, md.content);
      }
    } catch (e) {
      console.warn("Failed to import conditionsdiseases.json:", e);
    }
  }
  {
    try {
      const res = await fetch(`${edition.sourceUrl}/senses.json`);
      const json = await res.json();
      const mdFiles = parseSensesFile(json, edition.id);
      for (const md of mdFiles) {
        const fullPath = (0, import_obsidian.normalizePath)(
          `${targetPath}/${md.path}`
        );
        const folder = fullPath.split("/").slice(0, -1).join("/");
        await ensureFolder(app, folder);
        await app.vault.adapter.write(fullPath, md.content);
      }
    } catch (e) {
      console.warn("Failed to import senses.json:", e);
    }
  }
  {
    try {
      const res = await fetch(`${edition.sourceUrl}/skills.json`);
      const json = await res.json();
      const mdFiles = parseSkillsFile(json, edition.id);
      for (const md of mdFiles) {
        const fullPath = (0, import_obsidian.normalizePath)(
          `${targetPath}/${md.path}`
        );
        const folder = fullPath.split("/").slice(0, -1).join("/");
        await ensureFolder(app, folder);
        await app.vault.adapter.write(fullPath, md.content);
      }
    } catch (e) {
      console.warn("Failed to import skills.json:", e);
    }
  }
  {
    try {
      const res = await fetch(`${edition.sourceUrl}/feats.json`);
      const json = await res.json();
      const mdFiles = parseFeatsFile(json, edition.id);
      for (const md of mdFiles) {
        const fullPath = (0, import_obsidian.normalizePath)(
          `${targetPath}/${md.path}`
        );
        const folder = fullPath.split("/").slice(0, -1).join("/");
        await ensureFolder(app, folder);
        await app.vault.adapter.write(fullPath, md.content);
      }
    } catch (e) {
      console.warn("Failed to import feats.json:", e);
    }
  }
  {
    try {
      const res = await fetch(`${edition.sourceUrl}/backgrounds.json`);
      const json = await res.json();
      const mdFiles = parseBackgroundsFile(json, edition.id);
      for (const md of mdFiles) {
        const fullPath = (0, import_obsidian.normalizePath)(`${targetPath}/${md.path}`);
        const folder = fullPath.split("/").slice(0, -1).join("/");
        await ensureFolder(app, folder);
        await app.vault.adapter.write(fullPath, md.content);
      }
    } catch (e) {
      console.warn("Failed to import backgrounds.json:", e);
    }
  }
}

// src/parsers/5e-2025/installer.ts
var installer_exports2 = {};
__export(installer_exports2, {
  importEditionData: () => importEditionData2
});
var import_obsidian3 = require("obsidian");

// src/parsers/5e-2025/helpers/sourceMap.ts
var SOURCE_NAME_MAP2 = {
  // Core rulebooks
  PHB: "Player's Handbook",
  MM: "Monster Manual",
  DMG: "Dungeon Master's Guide",
  // Official expansions & adventure modules
  CoS: "Curse of Strahd",
  OotA: "Out of the Abyss",
  PotA: "Princes of the Apocalypse",
  HotDQ: "Hoard of the Dragon Queen",
  RoT: "Rise of Tiamat",
  SKT: "Storm King's Thunder",
  TftYP: "Tales from the Yawning Portal",
  ToA: "Tomb of Annihilation",
  // Supplemental guides
  XGE: "Xanathar's Guide to Everything",
  VGM: "Volo's Guide to Monsters",
  TCE: "Tasha's Cauldron of Everything",
  EGW: "Eberron: Rising from the Last War",
  ERLW: "Explorer's Guide to Wildemount",
  MTF: "Monsters of the Multiverse",
  VRGR: "Van Richten's Guide to Ravenloft",
  // Additional sourcebooks
  AAG: "Astral Adventurer\u2019s Guide",
  AI: "Acquisitions Incorporated",
  AitFRAVFT: "Adventures in the Forgotten Realms: A Visual Field Test",
  BMT: "Big Monster Tome",
  DoDk: "Dragon of Darkkeep",
  FTD: "Fizban\u2019s Treasury of Dragons",
  GGR: "Guildmaster\u2019s Guide to Ravnica",
  GHLoE: "Ghosts of the Horizon: Light Over Elensaria",
  IDRotF: "Icewind Dale: Rime of the Frostmaiden",
  LLK: "Lost Laboratory of Kwalish",
  SatO: "Sapphire of Truth",
  SCC: "Strixhaven: Curriculum of Chaos",
  TDCSR: "The Dungeon Coach\u2019s Rulebook",
  JttRC: "Journeys through the Radiant Citadel",
  "AitFR-AVT": "Adventures in the Forgotten Realms: A Verdant Tomb",
  "AitFR-FCD": "Adventures in the Forgotten Realms: From Cyan Depths",
  RMR: "Dungeons and Dragons: Rick and Morty",
  SCAG: "Sword Coast Adventurer's Guide",
  EEPC: "Elemental Evil Player's Companion",
  MOT: "Mythic Odysseys of Theros",
  WBtW: "The Wild Beyond the Witchlight",
  BGDIA: "Baldur's Gate: Descent Into Avernus",
  ToFW: "Turn of Fortune's Wheel",
  CoA: "Chains of Asmodeus",
  CRCotN: "Critical Role: Call of the Netherdeep",
  ToD: "Tyranny of Dragons",
  MPMM: "Mordenkainen Presents: Monsters of the Multiverse",
  LoX: "Light of Xaryxis",
  QftIS: "Quests from the Infinite Staircase",
  WDH: "Waterdeep: Dragon Heist",
  WDMM: "Waterdeep: Dungeon of the Mad Mage",
  PaBTSO: "Phandelver and Below: The Shattered Obelisk",
  CM: "Candlekeep Mysteries",
  GoS: "Ghosts of Saltmarsh",
  DSotDQ: "Dragonlance: Shadow of the Dragon Queen",
  KftGV: "Keys from the Golden Vault",
  SDW: "Essentials Kit: Sleeping Dragon's Wake",
  DoSI: "Dragons of Stormwreck Isle",
  GotSF: "Giants of the Star Forge",
  DIP: "Essentials Kit: Dragon of Icespire Peak",
  SLW: "Essentials Kit: Storm Lord's Wrath",
  IMR: "Infernal Machine Rebuild",
  VEoR: "Vecna: Eve of Ruin",
  PSI: "Plane Shift: Innistrad",
  AATM: "Adventure Atlas: The Mortuary",
  PSZ: "Plane Shift: Zendikar",
  DC: "Essentials Kit: Divine Contention",
  LMoP: "Lost Mine of Phandelver",
  RMBRE: "The Lost Dungeon of Rickedness: Big Rick Energy",
  HftT: "Hunt for the Thessalhydra",
  PSX: "Plane Shift: Ixalan",
  HFStCM: "Heroes' Feast: Saving the Childrens Menu",
  SjA: "Spelljammer Academy",
  LK: "Lightning Keep",
  RtG: "Return to the Glory",
  TTP: "The Tortle Package",
  LR: "Locathah Rising",
  PSA: "Plane Shift: Amonkhet",
  OGA: "One Grung Above",
  "NRH-TLT": "Nerds Restoring Harmony: The Lost Tomb",
  "NRH-AT": "Nerds Restoring Harmony: Adventure Together",
  BGG: "Bigby Presents: Glory of the Giants",
  RoTOS: "The Rise of Tiamat Online Supplement",
  XMtS: "X Marks the Spot",
  "HAT-LMI": "Honor Among Theives: Legendary Magic Items",
  DitLCoT: "Descent into the Lost Caverns of Tsojcanth",
  "AitFR-DN": "Adventures in the Forgotten Realms: Deepest Night",
  "AitFR-THP": "Adventures in the Forgotten Realms: The Hidden Pages",
  BAM: "Boo's Astral Menagerie",
  AZfyT: "A Zib for Your Thougts",
  MCV2DC: "Monstrous Compendium Volume 2: Dragonlance Creatures",
  PSK: "Plane Shift: Kaladesh",
  PSD: "Plane Shift: Dominaria",
  AWM: "Adventure with Muk",
  UATheMysticClass: "Unearthed Arcana: The Mystic Class",
  ALCurseOfStrahd: "Adventurers League: Curse of Strahd",
  ALElementalEvil: "Adventurers League: Elemental Evil",
  ALRageOfDemons: "Adventurers League: Rage of Demons"
};
function getFullSourceName2(abbrev, editionId) {
  let name = SOURCE_NAME_MAP2[abbrev] ?? abbrev;
  if (abbrev === "PHB") {
    if (editionId?.includes("2014")) name += " (2014)";
    else if (editionId?.includes("2025")) name += " (2025)";
  }
  return name;
}

// src/parsers/5e-2025/helpers/tagReplacer.ts
function replace5eTags2(input) {
  let text;
  if (Array.isArray(input)) {
    text = input.join(" ");
  } else if (typeof input === "string") {
    text = input;
  } else {
    text = String(input ?? "");
  }
  return text.replace(
    /\{#itemEntry\s+([^}|]+)(?:\|[^}]*)?\}/gi,
    (_m, rawName) => {
      return `[[${capitalizeEach2(String(rawName).trim())}]]`;
    }
  ).replace(
    /\{@(spell|item|creature|race) ([^|}]+)(?:\|[^}]+)?\}/g,
    (_, __, name) => `[[${capitalizeEach2(name)}]]`
  ).replace(
    /\{@(condition|status|action|skill) ([^|}]+)(?:\|[^}]+)?\}/g,
    (_, tag, name) => `[[${capitalize2(tag)}s#${name}|${capitalizeEach2(name)}]]`
  ).replace(
    /\{@classFeature ([^|}]+)\|([^|}]+)(?:\|[^}]+)?\}/g,
    (_, feature, cls) => `[[${cls}#${feature}]]`
  ).replace(/\{@(book|filter) ([^|}]+)(?:\|[^}]+)?\}/g, (_, __, txt) => txt).replace(/\{@note ([^}]+)\}/g, (_, note) => `*${note}*`).replace(/\{@(damage|dice|dc|hit|sense) ([^}]+)\}/g, (_, __, value) => value).replace(/\{@chance ([^|}]+)(?:\|[^}]+)?\}/g, (_, value) => `${value}%`).replace(/\{@quickref ([^|}]+)(?:\|[^|]*\|[^}]*)?\}/g, (_, term) => {
    const known = [
      "difficult terrain",
      "total cover",
      "half cover",
      "three-quarters cover",
      "heavily obscured",
      "lightly obscured"
    ];
    return known.includes(term.toLowerCase()) ? `[[Rules#${capitalizeEach2(term)}]]` : term;
  }).replace(/\{\@5etools\s+([^|}]+)\|[^}]+\}/g, "$1").replace(/\{@recharge\s*([^}]+)\}/g, (_, num) => `(recharge: ${num.trim()})`).replace(/\{@(scaledice|scaledamage)[^}]*\|([^|}]+)\}/g, (_, __, value) => value).replace(/\{@d20[^}]*\}/g, "").replace(/\{@[^}]+\}/g, "");
}
function capitalize2(str) {
  return str.charAt(0).toUpperCase() + str.slice(1).toLowerCase();
}
function capitalizeEach2(str) {
  return str.split(" ").map(capitalize2).join(" ");
}

// src/parsers/5e-2025/helpers/markdownTable.ts
function renderMarkdownTable2(entry) {
  if (entry.type !== "table" || !Array.isArray(entry.rows)) return "";
  const caption = entry.caption ? `##### ${entry.caption}
` : "";
  const headers = (entry.colLabels ?? []).map((h) => replace5eTags2(h.trim()));
  const headerRow = `| ${headers.join(" | ")} |`;
  const dividerRow = `| ${headers.map(() => ":--").join(" | ")} |`;
  const bodyRows = entry.rows.map((row) => {
    const cells = row.map((cell) => {
      if (typeof cell === "string") return replace5eTags2(cell);
      if (typeof cell === "object") {
        if (cell.roll?.exact !== void 0) return `${cell.roll.exact}`;
        if (cell.roll?.min !== void 0 && cell.roll?.max !== void 0) {
          return `${cell.roll.min}\u2013${cell.roll.max}`;
        }
        return replace5eTags2(JSON.stringify(cell));
      }
      return replace5eTags2(String(cell));
    });
    return `| ${cells.join(" | ")} |`;
  });
  return `${caption}${headerRow}
${dividerRow}
${bodyRows.join("\n")}`;
}

// src/parsers/5e-2025/helpers/formatEntry.ts
function isTypedEntry(x) {
  return x != null && typeof x === "object" && !Array.isArray(x) && typeof x.type === "string";
}
function formatEntry2(entry) {
  if (typeof entry === "string") {
    const cleaned = entry.trim();
    if (!cleaned || cleaned === "}") return "";
    return replace5eTags2(cleaned);
  }
  if (isTypedEntry(entry) && entry.type === "entries" && Array.isArray(entry.entries)) {
    const body = entry.entries.map(formatEntry2).filter((str) => str.trim().length > 0).join("\n\n");
    return entry.name ? `##### ${entry.name}
${body}` : body;
  }
  if (isTypedEntry(entry) && entry.type === "list" && Array.isArray(entry.items)) {
    return entry.items.map((i) => `- ${replace5eTags2(typeof i === "string" ? i : JSON.stringify(i))}`).join("\n");
  }
  if (isTypedEntry(entry) && entry.type === "table" && Array.isArray(entry.rows)) {
    return renderMarkdownTable2(entry);
  }
  if (isTypedEntry(entry) && entry.type === "quote" && Array.isArray(entry.entries)) {
    const quote = entry.entries.map(formatEntry2).join(" ").trim();
    const author = entry.by ? ` \u2014 ${entry.by}` : "";
    return `*"${quote}${author}"*`;
  }
  if (isTypedEntry(entry) && entry.type === "inset" && Array.isArray(entry.entries)) {
    const inset = entry.entries.map(formatEntry2).join("\n").trim();
    return `> ${inset.replace(/\n/g, "\n> ")}`;
  }
  if (isTypedEntry(entry) && entry.type === "refClassFeature" && typeof entry.classFeature === "string") {
    const [name] = entry.classFeature.split("|");
    const anchor = name.replace(/[^\w\s-]/g, "").replace(/\s+/g, "-").toLowerCase();
    return `[[#${anchor}]]`;
  }
  return "";
}

// src/parsers/5e-2025/bestiary.ts
var skippedMonsters2 = [];
var SIZE_MAP3 = {
  T: "Tiny",
  S: "Small",
  M: "Medium",
  L: "Large",
  H: "Huge",
  G: "Gargantuan"
};
var ALIGNMENT_MAP2 = {
  L: "Lawful",
  N: "Neutral",
  C: "Chaotic",
  G: "Good",
  E: "Evil",
  U: "Unaligned"
};
function capitalizeFirst3(str) {
  const s = String(str || "");
  return s.charAt(0).toUpperCase() + s.slice(1);
}
function formatSizeAbbrev3(abbrev) {
  return SIZE_MAP3[abbrev] || abbrev;
}
function formatAlignmentAbbrev2(abbrev) {
  return abbrev.trim().split(/\s+/).map((letter) => ALIGNMENT_MAP2[letter] || letter).join(" ");
}
var RAW_NPCS2 = [
  "Abjurer",
  "Acolyte",
  "Apprentice Wizard",
  "Archdruid",
  "Archer",
  "Archmage",
  "Assassin",
  "Bandit",
  "Bandit Captain",
  "Bard",
  "Berserker",
  "Blackguard",
  "Champion",
  "Commoner",
  "Conjurer",
  "Cult Fanatic",
  "Cultist",
  "Diviner",
  "Druid (NPC)",
  "Druid NPC",
  "Enchanter",
  "Evoker",
  "Gladiator",
  "Guard",
  "Illusionist",
  "Knight",
  "Kraken Priest",
  "Mage",
  "Martial Arts Adept",
  "Master Thief",
  "Necromancer",
  "Noble",
  "Priest",
  "Scout",
  "Spy",
  "Swashbuckler",
  "Thug",
  "Transmuter",
  "Tribal Warrior",
  "Veteran",
  "War Priest",
  "Warlock of the Archfey",
  "Warlock of the Fiend",
  "Warlock of the Great Old One",
  "Warlord"
];
var NORMALIZED_NPC_NAMES2 = new Set(RAW_NPCS2.map((n) => normalizeName2(n)));
function normalizeName2(name) {
  return name.replace(/\s+/g, " ").trim().toLowerCase();
}
function categorizeCreature2(monster) {
  const typeValue = monster.type;
  const name = monster.name;
  const t = typeof typeValue === "string" ? typeValue.toLowerCase() : typeValue?.type?.toLowerCase() || String(typeValue).toLowerCase();
  const normalizedName = normalizeName2(name);
  if (monster.isNpc || monster.isNamedCreature) return "Story NPCs";
  if (t === "beast") return "Beasts";
  if (t === "humanoid" && NORMALIZED_NPC_NAMES2.has(normalizedName)) return "Non-Beasts";
  if (t === "humanoid") return "Monsters";
  return "Monsters";
}
function renderAbilitiesTable2(str, dex, con, int, wis, cha) {
  return [
    `| STR | DEX | CON | INT | WIS | CHA |`,
    `| --- | --- | --- | --- | --- | --- |`,
    `| ${str} | ${dex} | ${con} | ${int} | ${wis} | ${cha} |`
  ].join("\n");
}
function renderEntry2(entry, inBreathBlock = false) {
  const ensurePeriod2 = (s) => /[.!?]\s*$/.test(s) ? s : `${s}.`;
  const renderStr = (s) => replace5eTags2(s);
  if (typeof entry === "string") return renderStr(entry);
  if (!entry || typeof entry !== "object") return String(entry ?? "");
  const rawName = typeof entry.name === "string" ? entry.name : "";
  const nameTxt = rawName ? renderStr(rawName) : "";
  const isBreath = /\bbreath weapon/i.test(nameTxt);
  const lead = nameTxt ? `***${ensurePeriod2(nameTxt)}***` : "";
  const blocks = [];
  if (Array.isArray(entry.entries)) blocks.push(...entry.entries);
  else if (typeof entry.entries === "string") blocks.push(entry.entries);
  else if (Array.isArray(entry.desc)) blocks.push(...entry.desc);
  else if (typeof entry.desc === "string") blocks.push(entry.desc);
  else if (Array.isArray(entry.entry)) blocks.push(...entry.entry);
  else if (typeof entry.entry === "string") blocks.push(entry.entry);
  const out = [];
  for (const blk of blocks) {
    if (typeof blk === "string") {
      out.push(renderStr(blk));
      continue;
    }
    const isHangNoTitleList = blk && blk.type === "list" && blk.style === "list-hang-notitle" && Array.isArray(blk.items) && blk.items.every((it) => it?.type === "item");
    if ((isBreath || inBreathBlock || isHangNoTitleList) && blk && blk.type === "list" && Array.isArray(blk.items)) {
      const bullets = [];
      for (const it of blk.items) {
        const itName = it?.name ? renderStr(String(it.name).trim()) : "";
        let itBody = "";
        if (typeof it?.entry === "string") itBody = renderStr(it.entry);
        else if (Array.isArray(it?.entries)) itBody = it.entries.map((e) => renderEntry2(e, true)).join(" ");
        else if (typeof it?.entries === "string") itBody = renderStr(it.entries);
        const head = itName ? `***${ensurePeriod2(itName)}***` : "";
        const line = [head, itBody].filter(Boolean).join(" ").trim();
        if (line) bullets.push(`- ${line}`);
      }
      if (bullets.length) out.push("\n" + bullets.join("\n"));
      continue;
    }
    out.push(String(blk));
  }
  return [lead, out.join(" ")].filter(Boolean).join(" ").replace(/[ \t]+/g, " ").trim();
}
function parseBestiaryFile2(json, editionId) {
  if (!json.monster) return [];
  json._editionId = editionId;
  const validMonsters = json.monster.filter((m) => {
    const acVal = Array.isArray(m.ac) ? m.ac[0]?.ac ?? m.ac[0] : typeof m.ac === "object" ? m.ac?.ac ?? null : m.ac;
    const hpVal = typeof m.hp === "object" ? m.hp?.average ?? m.hp?.hp ?? null : m.hp;
    return acVal != null && hpVal != null && !isNaN(Number(acVal)) && !isNaN(Number(hpVal));
  });
  const allNames = new Set(json.monster.map((m) => m.name));
  const validNames = new Set(validMonsters.map((m) => m.name));
  const missing = [...allNames].filter((name) => !validNames.has(name));
  return validMonsters.map((monster) => {
    const name = monster.name;
    const safeName = name.replace(/\//g, "-");
    const rawSize = monster.size || "M";
    const rawAlignment = Array.isArray(monster.alignment) ? monster.alignment.join(" ") : monster.alignment || "N";
    let rawType = "Unknown";
    if (typeof monster.type === "string") {
      rawType = capitalizeFirst3(monster.type);
    } else if (monster.type?.type) {
      const base = capitalizeFirst3(monster.type.type);
      const tags = monster.type.tags?.length ? ` (${monster.type.tags.map(capitalizeFirst3).join(", ")})` : "";
      rawType = `${base}${tags}`;
    }
    monster._parsedType = rawType;
    const ac = Array.isArray(monster.ac) ? monster.ac[0].ac : monster.ac;
    const hp = monster.hp?.average ?? monster.hp;
    if (!ac && !hp) {
      skippedMonsters2.push(monster.name);
      return null;
    }
    const abilities = Array.isArray(monster.ability) ? monster.ability : [monster.str, monster.dex, monster.con, monster.int, monster.wis, monster.cha];
    const [str = 10, dex = 10, con = 10, int = 10, wis = 10, cha = 10] = abilities;
    const speedList = [];
    if (typeof monster.speed === "object") {
      for (const [mode, val] of Object.entries(monster.speed)) {
        if (mode === "canHover") continue;
        if (val && typeof val === "object" && "number" in val) {
          const num = val.number;
          const cond = val.condition ? ` ${val.condition}` : "";
          speedList.push(`${mode} ${num} ft.${cond}`);
        } else {
          speedList.push(`${mode} ${val} ft.`);
        }
      }
    } else {
      speedList.push(`${monster.speed} ft.`);
    }
    const speed = speedList.join(", ");
    let source = getFullSourceName2(monster.source, editionId);
    source = source.replace(/:/g, " -");
    const category = categorizeCreature2(monster);
    const fm = buildFM2(monster, BESTIARY_META_DEFS2);
    const yaml = serializeFrontmatter2(fm, BESTIARY_META_DEFS2);
    const fmAny = fm;
    const challengeText = String(fmAny["CR"] ?? fmAny["challenge"] ?? "");
    const savingThrows = fm[FM_FIELDS4.SAVING_THROWS] || [];
    const skills = fm[FM_FIELDS4.SKILLS] || [];
    const senses = fm[FM_FIELDS4.SENSES] || [];
    const languages = fm[FM_FIELDS4.LANGUAGES] || [];
    let body = `# ${name}

${formatSizeAbbrev3(rawSize)} ${rawType}, ${formatAlignmentAbbrev2(rawAlignment)}

**Armor Class**: ${ac}
**Hit Points**: ${hp}
**Speed**: ${speed}
` + (savingThrows.length ? `**Saving Throws**: ${savingThrows.join(", ")}
` : "") + (skills.length ? `**Skills**: ${skills.join(", ")}
` : "") + (senses.length ? `**Senses**: ${senses.join(", ")}
` : "") + (languages.length ? `**Languages**: ${languages.join(", ")}
` : "") + `**Challenge**: ${challengeText}

` + renderAbilitiesTable2(str, dex, con, int, wis, cha);
    if (monster.spellcasting) {
      body += `

### Spellcasting
${monster.spellcasting.map((sc) => {
        const name2 = sc.name || "Spellcasting";
        const parts = [];
        if (sc.headerEntries) {
          const headers = Array.isArray(sc.headerEntries) ? sc.headerEntries : [sc.headerEntries];
          parts.push(headers.map((e) => replace5eTags2(e)).join(" "));
        }
        if (sc.will) {
          parts.push(`- **At will:** ${sc.will.map((s) => replace5eTags2(String(s))).join(", ")}`);
        }
        if (sc.daily) {
          for (const [k, arr] of Object.entries(sc.daily)) {
            const spells = arr.map((s) => replace5eTags2(String(s))).join(", ");
            const n = parseInt(k, 10) || 0;
            const each = /e$/i.test(k);
            const label = n > 0 ? each ? `${n}/day each` : `${n}/day` : "Daily";
            parts.push(`- **${label}:** ${spells}`);
          }
        }
        return `***${name2}.***
${parts.join("\n")}`;
      }).join("\n\n")}`;
    }
    if (monster.trait) body += `

### Traits
${monster.trait.map(renderEntry2).join("\n\n")}`;
    if (monster.action) body += `

### Actions
${monster.action.map(renderEntry2).join("\n\n")}`;
    if (monster.reaction) body += `

### Reactions
${monster.reaction.map(renderEntry2).join("\n\n")}`;
    if (monster.legendary) body += `

### Legendary Actions
${monster.legendary.map(renderEntry2).join("\n\n")}`;
    const content = `---
${yaml}
---

${body}`;
    return {
      path: `${category}/${safeName}.md`,
      content
    };
  });
}

// src/parsers/5e-2025/items.ts
function capitalizeFirst4(input) {
  if (typeof input !== "string" || input.length === 0) return "";
  const s = input.trim();
  return s.charAt(0).toUpperCase() + s.slice(1).toLowerCase();
}
var DAMAGE_TYPE_MAP3 = {
  P: "Piercing",
  B: "Bludgeoning",
  S: "Slashing",
  N: "Necrotic",
  R: "Radiant",
  F: "Fire",
  C: "Cold",
  L: "Lightning",
  T: "Thunder",
  A: "Acid",
  H: "Healing",
  U: "Force",
  V: "Psychic"
};
var PROPERTY_MAP2 = {
  A: "Ammunition",
  F: "Finesse",
  H: "Heavy",
  L: "Light",
  R: "Reload",
  S: "Special",
  "2H": "Two-Handed",
  T: "Thrown",
  V: "Versatile"
};
var ITEM_TYPE_MAP2 = {
  $C: "Currency",
  $G: "Gem",
  A: "Ammunition",
  "AIR|DMG": "Vehicle (air)",
  "AF|DMG": "Future Ammo",
  AT: "Artisan Tools",
  EXP: "Explosive",
  FD: "Food and Drink",
  G: "Gear",
  GS: "Game",
  HA: "Heavy Armor",
  "IDG|TDCSR": "Illicit Drug",
  INS: "Instrument",
  LA: "Light Armor",
  M: "Weapon",
  MA: "Medium Armor",
  MNT: "Mounts and Vehicles",
  ODH: "Miscellaneous",
  P: "Consumable",
  R: "Ranged Weapon",
  RD: "Rod",
  RG: "Ring",
  S: "Shield",
  SC: "Scroll",
  SCF: "Spell Casting Focus",
  SHP: "Ship",
  T: "Tool",
  TAH: "Mounts and Vehicles",
  TG: "Trade Goods",
  VEH: "Mounts and Vehicles",
  WD: "Wand"
};
var codeFolderMap2 = {
  // Weapons & Armor
  "A": "Weapons and Armor/Ammunition",
  "M": "Weapons and Armor/Weapons",
  "R": "Weapons and Armor/Ranged Weapons",
  "S": "Weapons and Armor/Shields",
  "LA": "Weapons and Armor/Armor/Light Armor",
  "MA": "Weapons and Armor/Armor/Medium Armor",
  "HA": "Weapons and Armor/Armor/Heavy Armor",
  "EXP": "Weapons and Armor/Weapons/Explosives",
  // Future Ammo (AF|DMG → rawCode "AF")
  "AF": "Weapons and Armor/Ammunition/Future Ammo",
  // Magical Items
  "RD": "Magical Items/Rods",
  "RG": "Magical Items/Rings",
  "SC": "Magical Items/Scrolls",
  "SCF": "Magical Items/Spell Casting Focus",
  "WD": "Magical Items/Wands",
  // Valuables
  "$G": "Valuables/Gems",
  // Currency (rawCode becomes "C" after stripping $)
  "C": "Valuables/Currency",
  "TG": "Valuables/Trade Goods",
  // Artisan Goods
  "AT": "Artisan Goods/Tools",
  "T": "Artisan Goods/Tools",
  "INS": "Artisan Goods/Instruments",
  "GS": "Artisan Goods/Games",
  // Gear & Mounts
  "G": "Gear",
  // Mounts & Vehicles
  "MNT": "Gear/Mounts and Vehicles",
  "TAH": "Gear/Mounts and Vehicles",
  "VEH": "Gear/Mounts and Vehicles",
  // Air vehicles (AIR|DMG → rawCode "AIR")
  "AIR": "Gear/Mounts and Vehicles/Air",
  // Consumables
  "P": "Consumables",
  // Food & Drink
  "FD": "Consumables/Food and Drink",
  // Illicit Drugs (IDG|TDCSR → rawCode "IDG")
  "IDG": "Gear/Illicit Drugs",
  // Miscellaneous (ODH)
  "ODH": "Gear/Miscellaneous"
};
function parseItemsFile2(json, editionId) {
  const rawItems = [];
  if (Array.isArray(json.baseitem)) rawItems.push(...json.baseitem);
  if (Array.isArray(json.item)) rawItems.push(...json.item);
  if (Array.isArray(json.object)) rawItems.push(...json.object);
  if (Array.isArray(json.vehicle)) rawItems.push(...json.vehicle);
  if (!rawItems.length) return [];
  const baseNames = new Set(
    Array.isArray(json.baseitem) ? json.baseitem.map((b) => b.name) : []
  );
  const out = [];
  for (const it of rawItems) {
    const name = it.name;
    const safeName = name.replace(/[\/\\:]/g, "-");
    const rawCode = (it.type || "").split("|")[0].split("|")[0].replace(/^\$/, "");
    let folder = codeFolderMap2[rawCode] ?? "Miscellaneous";
    if (it.bonusWeapon) {
      folder = `${folder}/Variants`;
    } else {
      const isMagic = !!it.wondrous || !!it.reqAttune || !!it.req_attune || String(it.rarity).toLowerCase().includes("magic");
      if (isMagic) {
        const [, ...rest] = folder.split("/");
        folder = ["Magical Items", ...rest].join("/");
      }
    }
    if ((folder.startsWith("Weapons and Armor/Weapons") || folder.startsWith("Weapons and Armor/Ranged Weapons")) && it.weaponCategory) {
      folder = `${folder}/${capitalizeFirst4(it.weaponCategory)}`;
    }
    json._editionId = editionId;
    const fm = buildFM2(it, ITEM_META_DEFS2);
    if (fm[FM_FIELDS4.MAGICAL]) {
      fm[FM_FIELDS4.VERMUN] = false;
    }
    if (rawCode === "M" && it.weaponCategory) {
      fm.type = `${capitalizeFirst4(it.weaponCategory)} Weapon`;
    } else if (ITEM_TYPE_MAP2[rawCode]) {
      fm.type = ITEM_TYPE_MAP2[rawCode];
    }
    if (Array.isArray(fm.damageTypes)) {
      fm.damageTypes = fm.damageTypes.map(
        (code) => DAMAGE_TYPE_MAP3[code] || code
      );
    }
    let yaml = serializeFrontmatter2(fm, ITEM_META_DEFS2);
    if (Array.isArray(it.packContents)) {
      yaml += "\npackContents:";
      for (const pc of it.packContents) {
        yaml += `
  - item: "${pc.item}"
    quantity: ${pc.quantity}`;
      }
    }
    const frontmatter = `---
${yaml}
---`;
    const lines = [];
    lines.push(`# ${name}`);
    lines.push("");
    const subtitle = it.weapon ? `${capitalizeFirst4(it.weaponCategory)} Weapon` : it.armor ? folder.split("/").pop() || "Armor" : "";
    if (subtitle) lines.push(`### *${subtitle}*`);
    if (it.weapon) {
      lines.push(`**Category**: ${capitalizeFirst4(it.weaponCategory)}`);
      lines.push(`**Damage**: ${it.dmg1 ?? ""}${it.dmg2 ? ` / ${it.dmg2}` : ""}`);
      const typesBody = (Array.isArray(it.dmgType) ? it.dmgType : [it.dmgType]).filter((t) => Boolean(t)).map((t) => DAMAGE_TYPE_MAP3[t] || t);
      lines.push(`**Damage Type**: ${typesBody.join(", ")}`);
      lines.push(`**Range**: ${it.range ?? "\u2014"}`);
      lines.push(`**Reload**: ${it.reload ?? "\u2014"}`);
      if (it.ammoType) lines.push(`**Ammo Type**: ${it.ammoType}`);
      if (Array.isArray(it.property) && it.property.length) {
        const propsBody = it.property.map((p) => PROPERTY_MAP2[p] || p);
        lines.push(`**Properties**: ${propsBody.join(", ")}`);
      }
    }
    if (it.armor) {
      lines.push(`**Armor Class**: ${it.ac}`);
      if (it.stealth) lines.push(`**Stealth Disadvantage**: true`);
      lines.push("");
    }
    const desc = it.entries ?? it.desc;
    if (desc) {
      for (const p of Array.isArray(desc) ? desc : [desc]) {
        if (typeof p === "string") {
          for (const line of replace5eTags2(p).split("\n")) lines.push(line);
          lines.push("");
        } else if (p && typeof p === "object" && p.type === "list" && Array.isArray(p.items)) {
          if (lines[lines.length - 1] !== "") lines.push("");
          for (const item of p.items) {
            if (typeof item === "string") {
              lines.push(`- ${replace5eTags2(item)}`);
              continue;
            }
            const head = item?.name ? `**${replace5eTags2(String(item.name)).replace(/[.!?]$/, (m) => m).replace(/([^.!?])$/, "$1.")}**` : "";
            let body2 = "";
            if (typeof item?.entry === "string") body2 = replace5eTags2(item.entry);
            else if (Array.isArray(item?.entries)) body2 = item.entries.map((e) => typeof e === "string" ? replace5eTags2(e) : "").join(" ");
            const line = [head, body2].filter(Boolean).join(" ").trim();
            if (line) lines.push(`- ${line}`);
          }
          lines.push("");
        } else if (p && typeof p === "object") {
          if (lines[lines.length - 1] === "") lines.pop();
          if (typeof p.name === "string" && p.name.trim()) {
            lines.push(`#### ${p.name}`);
          }
          const sub = Array.isArray(p.entries) ? p.entries : [];
          for (const sp of sub) {
            if (sp && typeof sp === "object" && sp.type === "list" && Array.isArray(sp.items)) {
              if (lines[lines.length - 1] !== "") lines.push("");
              for (const item of sp.items) {
                if (typeof item === "string") {
                  lines.push(`- ${replace5eTags2(item)}`);
                  continue;
                }
                const head = item?.name ? `**${replace5eTags2(String(item.name)).replace(/[.!?]$/, (m) => m).replace(/([^.!?])$/, "$1.")}**` : "";
                let body2 = "";
                if (typeof item?.entry === "string") body2 = replace5eTags2(item.entry);
                else if (Array.isArray(item?.entries)) body2 = item.entries.map((e) => typeof e === "string" ? replace5eTags2(e) : "").join(" ");
                const line = [head, body2].filter(Boolean).join(" ").trim();
                if (line) lines.push(`- ${line}`);
              }
              lines.push("");
              continue;
            }
            if (typeof sp === "string") {
              for (const line of replace5eTags2(sp).split("\n")) lines.push(line);
              continue;
            }
            if (sp && typeof sp === "object" && sp.type === "entries" && sp.name) {
              const head = `- ***${replace5eTags2(sp.name)}.***`;
              const body2 = (Array.isArray(sp.entries) ? sp.entries : []).map((e) => typeof e === "string" ? replace5eTags2(e) : "").join(" ");
              if (body2.trim()) {
                lines.push(`${head} ${body2}`.trim());
              } else {
                lines.push(head);
              }
              continue;
            }
            if (sp && typeof sp === "object" && Array.isArray(sp.entries)) {
              for (const inner of sp.entries) {
                if (typeof inner === "string") {
                  for (const line of replace5eTags2(inner).split("\n")) lines.push(line);
                }
              }
            }
          }
          lines.push("");
        }
      }
    }
    const body = lines.join("\n");
    out.push({ path: `Items/${folder}/${safeName}.md`, content: `${frontmatter}

${body}` });
  }
  return out.sort((a, b) => a.path.localeCompare(b.path));
}

// src/parsers/5e-2025/helpers/frontmatter.ts
function cap3(str) {
  if (typeof str !== "string") return "";
  return str.charAt(0).toUpperCase() + str.slice(1);
}
var ABILITY_FULL2 = {
  str: "Strength",
  dex: "Dexterity",
  con: "Constitution",
  int: "Intelligence",
  wis: "Wisdom",
  cha: "Charisma"
};
var SIZE_MAP4 = {
  T: "Tiny",
  S: "Small",
  M: "Medium",
  L: "Large",
  H: "Huge",
  G: "Gargantuan"
};
var FM_FIELDS4 = {
  ABILITY_BONUSES: "ability_bonuses",
  AC: "AC",
  ALIGNMENT: "Alignment",
  AMMO_TYPE: "Ammo Type",
  ARMOR_PROFICIENCIES: "armor-prof",
  ATTACK_TYPE: "attack_type",
  ATTUNEMENT: "Attunement",
  ATTUNE_REQ: "Attune_Req",
  CASTING_TIME: "casting_time",
  CHARISMA: "charisma",
  CHA_MOD: "cha_mod",
  CONCENTRATION: "concentration",
  CONDITION_IMM: "cond_immunity",
  CONSTITUTION: "constitution",
  CON_MOD: "con_mod",
  COST: "cost",
  COMPONENTS: "Components",
  CHALLENGE_RATING: "CR",
  DAMAGE_TYPE: "damage_type",
  DAMAGE_TYPES: "damageTypes",
  DAMAGE: "damage",
  DAMAGE_RES: "dmg_resistance",
  DAMAGE_IMM: "dmg_immunity",
  DEXTERITY: "dexterity",
  DEX_MOD: "dex_mod",
  DURATION: "duration",
  RULESET: "ruleset",
  HP: "HP",
  INTELLIGENCE: "intelligence",
  INT_MOD: "int_mod",
  LANGUAGES: "languages",
  LEVEL: "level",
  MAGICAL: "magical",
  MATERIAL: "material",
  NAME: "name",
  PROPERTIES: "properties",
  RANGE: "range",
  RARITY: "rarity",
  RELOAD: "reload",
  RITUAL: "ritual",
  SAVE: "save",
  SAVING_THROWS: "saving_throws",
  SCHOOL: "school",
  SENSES: "senses",
  SIZE: "size",
  SKILLS: "skills",
  SKILL_CHOICE_LIST: "skill_choice_list",
  SOMATIC: "somatic",
  SOURCE: "source",
  SPECIES: "species",
  SPEED: "speed",
  SPELL_CAST_MOD: "Spell Cast Mod",
  SPELL_RANGE: "Range",
  STEALTH_DISADVANTAGE: "stealthDisadvantage",
  STRENGTH: "strength",
  STR_MOD: "str_mod",
  SUBRACES: "subraces",
  TOOL_PROFICIENCIES: "tool-prof",
  TOOL_CHOICE_LIST: "tool_choice_list",
  TRAITS: "traits",
  TYPE: "type",
  VARIANT: "Variant",
  VERBAL: "verbal",
  VERMUN: "vermun",
  WEAPON_PROFICIENCIES: "weapon-prof",
  WEIGHT: "weight",
  WISDOM: "wisdom",
  WIS_MOD: "wis_mod"
};
var unifiedArmorProfs2 = (val) => Array.isArray(val?.armor) ? val.armor.map(cap3) : Array.isArray(val) ? val.map(cap3) : [];
function unifiedWeaponProfs2(val) {
  const rawArr = Array.isArray(val?.weapons) ? val.weapons : Array.isArray(val) ? val : [];
  const out = /* @__PURE__ */ new Set();
  function handleOne(entry) {
    if (Array.isArray(entry)) {
      entry.forEach(handleOne);
      return;
    }
    if (typeof entry === "string") {
      const lit = entry.trim().toLowerCase();
      if (lit === "simple") {
        out.add("Simple Weapons");
      } else if (lit === "martial") {
        out.add("Martial Weapons");
      } else {
        const text = entry.startsWith("{@") ? replace5eTags2(entry) : cap3(entry);
        out.add(text);
      }
      return;
    }
    if (entry && typeof entry === "object" && entry.proficiency) {
      const name = cap3(entry.proficiency);
      out.add(entry.optional ? `${name} (optional)` : name);
    }
  }
  rawArr.forEach(handleOne);
  return [...out];
}
var SAVE_NAME_MAP2 = {
  str: "Strength",
  strength: "Strength",
  dex: "Dexterity",
  dexterity: "Dexterity",
  con: "Constitution",
  constitution: "Constitution",
  int: "Intelligence",
  intelligence: "Intelligence",
  wis: "Wisdom",
  wisdom: "Wisdom",
  cha: "Charisma",
  charisma: "Charisma"
};
function unifiedSaves2(val) {
  if (!val) return [];
  if (Array.isArray(val)) {
    return val.map((k) => {
      const key2 = String(k).toLowerCase();
      return SAVE_NAME_MAP2[key2] || key2.charAt(0).toUpperCase() + key2.slice(1);
    });
  }
  if (typeof val === "object") {
    return Object.keys(val).map((k) => {
      const key2 = k.toLowerCase();
      return SAVE_NAME_MAP2[key2] || key2.charAt(0).toUpperCase() + key2.slice(1);
    });
  }
  const key = String(val).toLowerCase();
  return [SAVE_NAME_MAP2[key] || key.charAt(0).toUpperCase() + key.slice(1)];
}
var unifiedSkills4 = (val) => {
  if (val && !Array.isArray(val) && typeof val === "object" && // ensure every value is a string or number
  Object.values(val).every((v) => typeof v === "string" || typeof v === "number")) {
    return Object.entries(val).map(
      ([skill, mod]) => `${cap3(skill)} ${mod}`.trim()
    );
  }
  if (val && !Array.isArray(val) && typeof val === "object") {
    const nested = val.skills ?? val.skillProf ?? val.skillProficiencies;
    return unifiedSkills4(nested);
  }
  if (!Array.isArray(val)) return [];
  const out = /* @__PURE__ */ new Set();
  for (const e of val) {
    if (e && typeof e === "object" && typeof e.any === "number") {
      out.add(`Choose ${e.any}`);
      continue;
    }
    if (e && typeof e === "object" && e.choose) {
      const cnt = e.choose.count ?? 1;
      out.add(`Choose ${cnt}`);
    }
    if (e && typeof e === "object") {
      for (const [k, v] of Object.entries(e)) {
        if (v === true) out.add(cap3(k));
      }
    }
    if (typeof e === "string") {
      out.add(cap3(e));
    }
  }
  return [...out];
};
var unifiedToolProfs2 = (val) => {
  let entries = Array.isArray(val) ? val : Array.isArray(val?.toolProficiencies) ? val.toolProficiencies : Array.isArray(val?.tools) ? val.tools : [];
  const out = /* @__PURE__ */ new Set();
  let sawChoose = false;
  for (const e of entries) {
    if (typeof e === "string") {
      out.add(cap3(e));
      continue;
    }
    if (e?.choose) {
      const cnt = e.choose.count ?? 1;
      sawChoose = true;
      out.add(`Choose ${cnt}`);
    }
    for (const [k, v] of Object.entries(e)) {
      if (v === true) {
        out.add(cap3(k));
      } else if (typeof v === "number" && k.startsWith("any")) {
        const raw = k.replace(/^any/, "");
        const spaced = raw.replace(/([a-z])([A-Z])/g, "$1 $2").split(" ").map(cap3).join(" ");
        out.add(`Choose ${v} ${spaced}`);
      }
    }
  }
  return [...out];
};
var ALL_FIELD_DEFS2 = [
  // ─── Core ───
  { callSign: "NAME", jsonKey: "name" },
  {
    callSign: "SOURCE",
    jsonKey: ["source"],
    conv: (raw, allJson) => {
      const out = /* @__PURE__ */ new Set();
      const editionId = allJson._editionId;
      const arr = Array.isArray(raw) ? raw : [raw];
      arr.forEach((src) => {
        out.add(getFullSourceName2(src, editionId));
      });
      for (const os of allJson.otherSources ?? []) {
        if (os && typeof os.source === "string") {
          out.add(getFullSourceName2(os.source, editionId));
        }
      }
      for (const rep of allJson.reprintedAs ?? []) {
        const repStr = typeof rep === "string" ? rep : String(rep);
        const parts = repStr.split("|");
        const src = parts[1] ?? parts[0];
        out.add(getFullSourceName2(src, editionId));
      }
      return [...out];
    }
  },
  // ─── Proficiencies ───
  { callSign: "ARMOR_PROFICIENCIES", jsonKey: ["armorProficiencies", "armorProfs", "startingProficiencies"], conv: unifiedArmorProfs2 },
  {
    callSign: "WEAPON_PROFICIENCIES",
    jsonKey: ["weaponProficiencies", "weaponProfs", "startingProficiencies"],
    conv: unifiedWeaponProfs2
  },
  { callSign: "TOOL_PROFICIENCIES", jsonKey: ["toolProficiencies", "toolProfs", "startingProficiencies"], conv: unifiedToolProfs2 },
  {
    callSign: "TOOL_CHOICE_LIST",
    jsonKey: ["toolProficiencies", "toolProfs", "startingProficiencies"],
    conv: (raw) => {
      const arr = Array.isArray(raw) ? raw : Array.isArray(raw?.toolProficiencies) ? raw.toolProficiencies : Array.isArray(raw?.tools) ? raw.tools : [];
      const choice = arr.find((e) => e?.choose);
      return choice?.choose?.from?.map((s) => cap3(s)) ?? [];
    }
  },
  { callSign: "SAVING_THROWS", jsonKey: ["save", "proficiency", "savingThrow"], conv: unifiedSaves2 },
  {
    callSign: "SKILLS",
    jsonKey: ["skill", "skillProf", "skillProficiencies", "startingProficiencies"],
    conv: unifiedSkills4
  },
  {
    callSign: "SKILL_CHOICE_LIST",
    jsonKey: ["skill", "skillProf", "skillProficiencies", "startingProficiencies"],
    conv: (raw) => {
      const arr = Array.isArray(raw) ? raw : Array.isArray(raw?.skillProficiencies) ? raw.skillProficiencies : Array.isArray(raw?.skills) ? raw.skills : Array.isArray(raw?.skillProf) ? raw.skillProf : [];
      const choiceObj = arr.find((e) => e?.choose || typeof e.any === "number");
      if (!choiceObj) return [];
      if (choiceObj.choose && Array.isArray(choiceObj.choose.from)) {
        return choiceObj.choose.from.map(cap3);
      }
      if (typeof choiceObj.any === "number") {
        return SKILL_OPTIONS2;
      }
      return [];
    }
  },
  {
    callSign: "SPELL_CAST_MOD",
    jsonKey: "spellcastingAbility",
    conv: (raw) => {
      const key = String(raw).toLowerCase();
      return ABILITY_FULL2[key] || key.toUpperCase();
    }
  },
  // ─── Spells ───
  { callSign: "LEVEL", jsonKey: "level" },
  { callSign: "SCHOOL", jsonKey: "school", conv: (s) => SCHOOL_MAP2[s] ?? s },
  { callSign: "CASTING_TIME", jsonKey: "time", conv: formatTime2 },
  { callSign: "SPELL_RANGE", jsonKey: "range", conv: formatRange2 },
  { callSign: "DURATION", jsonKey: "duration", conv: formatDuration2 },
  { callSign: "VERBAL", jsonKey: "components", conv: (c) => !!c.v },
  { callSign: "SOMATIC", jsonKey: "components", conv: (c) => !!c.s },
  { callSign: "MATERIAL", jsonKey: "components", conv: (c) => !!c.m },
  {
    callSign: "COMPONENTS",
    jsonKey: "components",
    conv: (c) => {
      if (!c.m) return [];
      const raw = Array.isArray(c.m) ? c.m : [c.m];
      return raw.map((item) => {
        if (typeof item === "string") return item;
        if (item && typeof item === "object" && typeof item.text === "string") {
          return item.text;
        }
        return null;
      }).filter((comp) => comp !== null);
    }
  },
  { callSign: "ATTACK_TYPE", jsonKey: "attackType" },
  { callSign: "DAMAGE_TYPE", jsonKey: "damageInflict", conv: (d) => Array.isArray(d) ? d[0] : d },
  { callSign: "RITUAL", jsonKey: "ritual" },
  { callSign: "CONCENTRATION", jsonKey: "duration", conv: (ds) => Array.isArray(ds) && ds.some((x) => x.concentration) },
  { callSign: "SAVE", jsonKey: "saveAttr" },
  // ─── Species / Creatures ───
  { callSign: "SPECIES", jsonKey: "name" },
  {
    callSign: "SIZE",
    jsonKey: "size",
    conv: (raw) => {
      if (Array.isArray(raw)) {
        return raw.map((r) => SIZE_MAP4[r] || r);
      } else {
        return SIZE_MAP4[raw] || raw;
      }
    }
  },
  {
    callSign: "SPEED",
    jsonKey: "speed",
    conv: (sp) => {
      if (typeof sp === "number") {
        return [`Walk ${sp} ft.`];
      }
      if (!sp || typeof sp !== "object") return [];
      return Object.entries(sp).filter(([mode]) => mode !== "canHover").map(([mode, v]) => {
        const n = typeof v === "object" && v !== null && "number" in v ? v.number : v;
        const label = mode === "walk" ? "Walk" : cap3(mode);
        return `${label} ${n} ft.`;
      });
    }
  },
  { callSign: "LANGUAGES", jsonKey: ["languages", "languageProficiencies"], conv: (arr) => {
    if (!Array.isArray(arr)) return [];
    const out = [];
    for (const lp of arr) {
      if (typeof lp === "string") out.push(cap3(lp));
      else if (typeof lp === "object") {
        for (const [lang, val] of Object.entries(lp)) {
          if (val) out.push(cap3(lang));
        }
      }
    }
    return [...new Set(out)];
  } },
  { callSign: "SENSES", jsonKey: "senses", conv: (sen) => {
    if (Array.isArray(sen)) return sen.map((s) => s.replace(/^\d+\s*/, "").replace(/^./, (c) => c.toUpperCase()));
    if (sen && typeof sen === "object") return Object.entries(sen).map(([k, v]) => `${k.charAt(0).toUpperCase() + k.slice(1)} ${v}`);
    return [];
  } },
  {
    callSign: "TRAITS",
    jsonKey: ["classFeatures", "entries"],
    conv: (raw, allJson) => {
      const rec = Array.isArray(allJson.class) ? allJson.class[0] : Array.isArray(allJson.race) ? allJson.race[0] : allJson;
      const fileName = typeof rec?.name === "string" ? rec.name : typeof allJson?.name === "string" ? allJson.name : "";
      const omit = /* @__PURE__ */ new Set([
        // class-specific
        "Ability Score Improvement",
        "Archetype Feature",
        "Subclass Feature",
        // species-specific common headings
        "Age",
        "Size",
        "Speed",
        "Languages"
        // backgrounds often have generic sections too; add more if needed
      ]);
      const seen = /* @__PURE__ */ new Set();
      if (Array.isArray(allJson.classFeatures)) {
        const classRec = Array.isArray(allJson.class) ? allJson.class[0] : allJson;
        const className = typeof classRec?.name === "string" ? classRec.name : fileName;
        return allJson.classFeatures.flatMap((feat) => {
          if (feat && typeof feat === "object" && feat.gainSubclassFeature) return [];
          const rawName = typeof feat === "string" ? feat : typeof feat.classFeature === "string" ? feat.classFeature : "";
          const name = rawName.split("|")[0].trim();
          if (!name || omit.has(name) || seen.has(name)) return [];
          seen.add(name);
          const anchor = name.replace(/[^\w\s]/g, "").replace(/\s+/g, " ").trim().replace(/\b\w/g, (c) => c.toUpperCase());
          return className ? [`[[${className}#${anchor}|${name}]]`] : [name];
        });
      }
      const ents = Array.isArray(raw) ? raw : [];
      const names = [];
      const pushName = (n) => {
        const name = (n ?? "").replace(/^Feature:\s*/, "").trim();
        if (!name || omit.has(name) || seen.has(name)) return;
        seen.add(name);
        names.push(name);
      };
      for (const e of ents) {
        if (!e) continue;
        if (typeof e === "object" && typeof e.name === "string") {
          pushName(e.name);
        }
        if (typeof e === "object" && Array.isArray(e.entries)) {
          for (const sub of e.entries) {
            if (sub && typeof sub === "object" && typeof sub.name === "string") {
              pushName(sub.name);
            }
          }
        }
      }
      if (names.length) {
        return names.map((name) => {
          const anchor = name.replace(/[^\w\s]/g, "").replace(/\s+/g, " ").trim().replace(/\b\w/g, (c) => c.toUpperCase());
          return fileName ? `[[${fileName}#${anchor}|${name}]]` : name;
        });
      }
      return ents.filter((e) => e && typeof e.name === "string").map((e) => e.name.replace(/^Feature:\s*/, "").trim());
    }
  },
  { callSign: "AC", jsonKey: "ac", conv: (a) => Array.isArray(a) ? a[0].ac : a },
  { callSign: "HP", jsonKey: "hp", conv: (hp) => hp?.average ?? hp },
  { callSign: "CHALLENGE_RATING", jsonKey: "cr" },
  { callSign: "STRENGTH", jsonKey: "ability", conv: (arr) => Array.isArray(arr) ? arr[0] : arr?.str ?? 0 },
  { callSign: "DEXTERITY", jsonKey: "ability", conv: (arr) => Array.isArray(arr) ? arr[1] : arr?.dex ?? 0 },
  { callSign: "CONSTITUTION", jsonKey: "ability", conv: (arr) => Array.isArray(arr) ? arr[2] : arr?.con ?? 0 },
  { callSign: "INTELLIGENCE", jsonKey: "ability", conv: (arr) => Array.isArray(arr) ? arr[3] : arr?.int ?? 0 },
  { callSign: "WISDOM", jsonKey: "ability", conv: (arr) => Array.isArray(arr) ? arr[4] : arr?.wis ?? 0 },
  { callSign: "CHARISMA", jsonKey: "ability", conv: (arr) => Array.isArray(arr) ? arr[5] : arr?.cha ?? 0 },
  {
    callSign: "ALIGNMENT",
    jsonKey: "alignment",
    conv: (a) => {
      const raw = Array.isArray(a) ? a.join(" ") : typeof a === "string" ? a : String(a);
      const cleaned = raw.replace(/\bA\b/g, "Any").replace(/\bU\b/g, "Unaligned").replace(/\bN\b/g, "Neutral").replace(/\bL\b/g, "Lawful").replace(/\bC\b/g, "Chaotic").replace(/\bG\b/g, "Good").replace(/\bE\b/g, "Evil");
      return formatAlignmentAbbrev2(cleaned);
    }
  },
  {
    callSign: "TYPE",
    jsonKey: "type",
    conv: (t) => {
      if (typeof t === "string") {
        return ITEM_TYPE_MAP2[t] ?? cap3(t);
      }
      if (t && typeof t === "object") {
        const code = String(t.type || "").toUpperCase();
        if (ITEM_TYPE_MAP2[code]) {
          return ITEM_TYPE_MAP2[code];
        }
        const base = t.type ? cap3(t.type) : "Unknown";
        const tags = Array.isArray(t.tags) ? t.tags.map(cap3) : [];
        return tags.length ? `${base} (${tags.join(", ")})` : base;
      }
      return void 0;
    }
  },
  // ─── Items ───
  { callSign: "TYPE", jsonKey: "_parsedType" },
  { callSign: "RARITY", jsonKey: "rarity", conv: (r) => {
    const s = String(r || "").toLowerCase();
    return s && s !== "none" ? s[0].toUpperCase() + s.slice(1) : void 0;
  } },
  {
    callSign: "COST",
    jsonKey: "value",
    conv: (raw) => {
      const s = String(raw).trim().toLowerCase();
      let num;
      if (s.endsWith("cp")) {
        num = parseFloat(s);
        return num >= 100 ? `${Math.round(num / 100 * 100) / 100}gp` : `${num}cp`;
      }
      if (s.endsWith("sp")) {
        num = parseFloat(s);
        return num >= 10 ? `${Math.round(num / 10 * 100) / 100}gp` : `${num}sp`;
      }
      if (s.endsWith("gp")) {
        num = parseFloat(s);
        return `${Math.round(num * 100) / 100}gp`;
      }
      num = parseFloat(s) || 0;
      return num >= 100 ? `${Math.round(num / 100 * 100) / 100}gp` : `${num}cp`;
    }
  },
  { callSign: "WEIGHT", jsonKey: "weight" },
  { callSign: "MAGICAL", jsonKey: "wondrous", conv: (_w, all) => !!all.wondrous || !!all.reqAttune },
  { callSign: "VARIANT", jsonKey: "bonusWeapon", conv: (b) => typeof b === "string" && b.startsWith("+") },
  { callSign: "PROPERTIES", jsonKey: "property", conv: (arr) => Array.isArray(arr) ? arr.map((p) => PROPERTY_MAP2[p] || p) : [] },
  { callSign: "DAMAGE", jsonKey: "dmg1", conv: (d, all) => d ? all.dmg2 ? `${d} / ${all.dmg2}` : `${d}` : void 0 },
  { callSign: "DAMAGE_TYPES", jsonKey: "dmgType", conv: (dt) => dt == null ? [] : Array.isArray(dt) ? dt : [dt] },
  { callSign: "RANGE", jsonKey: "range" },
  { callSign: "RELOAD", jsonKey: "reload" },
  { callSign: "AMMO_TYPE", jsonKey: "ammoType", conv: (v) => typeof v === "string" ? v.split("|")[0].charAt(0).toUpperCase() + v.split("|")[0].slice(1).toLowerCase() : "" },
  { callSign: "STEALTH_DISADVANTAGE", jsonKey: "stealth" },
  {
    callSign: "ATTUNEMENT",
    jsonKey: ["wondrous", "reqAttune", "req_attune", "reqAttuneTags"],
    conv: (_raw, allJson) => {
      const j = allJson;
      const hasText = typeof j.reqAttune === "string" && j.reqAttune.trim() !== "";
      const hasTags = Array.isArray(j.reqAttuneTags) && j.reqAttuneTags.length > 0;
      return hasText || hasTags;
    }
  },
  {
    callSign: "ATTUNE_REQ",
    jsonKey: "reqAttuneTags",
    conv: (tags = [], _all) => {
      const mapLetter = {
        A: "Any",
        U: "Unaligned",
        N: "Neutral",
        L: "Lawful",
        C: "Chaotic",
        G: "Good",
        E: "Evil"
      };
      const reqs = [];
      for (const tag of tags) {
        if (tag.class && Array.isArray(tag.alignment)) {
          const cls = cap3(tag.class);
          for (const code of tag.alignment) {
            reqs.push(`${mapLetter[code] || code} ${cls}`);
          }
        } else if (tag.class) {
          reqs.push(cap3(tag.class));
        } else if (Array.isArray(tag.alignment)) {
          for (const code of tag.alignment) {
            reqs.push(mapLetter[code] || code);
          }
        } else if (tag.background) {
          const [bg] = String(tag.background).split("|");
          reqs.push(bg.split(" ").map(cap3).join(" "));
        } else if (tag.spellcasting) {
          reqs.push("Spellcaster");
        }
      }
      return Array.from(new Set(reqs));
    }
  },
  {
    callSign: "VERMUN",
    jsonKey: "wondrous",
    // or whatever property you use to detect “magical”
    conv: (_raw, all) => !!all.wondrous || !!all.reqAttune
  },
  // ─── Other ───
  { callSign: "DAMAGE_RES", jsonKey: "resist", conv: (v) => Array.isArray(v) ? v.map(cap3) : [] },
  {
    callSign: "RULESET",
    jsonKey: "name",
    // ignore the raw value, always print HELLO
    conv: (_raw, _all) => "D&D 5e (2025)"
  },
  // ─── Ability‐score modifiers (only emit when nonzero) ───
  {
    callSign: "STR_MOD",
    jsonKey: "ability",
    conv: (arr) => {
      const v = Array.isArray(arr) ? arr[0].str ?? 0 : arr.str ?? 0;
      return v !== 0 ? v : void 0;
    }
  },
  {
    callSign: "DEX_MOD",
    jsonKey: "ability",
    conv: (arr) => {
      const v = Array.isArray(arr) ? arr[0].dex ?? 0 : arr.dex ?? 0;
      return v !== 0 ? v : void 0;
    }
  },
  {
    callSign: "CON_MOD",
    jsonKey: "ability",
    conv: (arr) => {
      const v = Array.isArray(arr) ? arr[0].con ?? 0 : arr.con ?? 0;
      return v !== 0 ? v : void 0;
    }
  },
  {
    callSign: "INT_MOD",
    jsonKey: "ability",
    conv: (arr) => {
      const v = Array.isArray(arr) ? arr[0].int ?? 0 : arr.int ?? 0;
      return v !== 0 ? v : void 0;
    }
  },
  {
    callSign: "WIS_MOD",
    jsonKey: "ability",
    conv: (arr) => {
      const v = Array.isArray(arr) ? arr[0].wis ?? 0 : arr.wis ?? 0;
      return v !== 0 ? v : void 0;
    }
  },
  {
    callSign: "CHA_MOD",
    jsonKey: "ability",
    conv: (arr) => {
      const v = Array.isArray(arr) ? arr[0].cha ?? 0 : arr.cha ?? 0;
      return v !== 0 ? v : void 0;
    }
  }
];
function buildFM2(json, defs) {
  const fm = {};
  for (const { callSign, jsonKey, conv } of defs) {
    const keys = Array.isArray(jsonKey) ? jsonKey : [jsonKey];
    let raw = void 0;
    for (const key of keys) {
      if (json[key] != null) {
        raw = json[key];
        break;
      }
    }
    if (raw == null) continue;
    const val = conv ? conv(raw, json) : raw;
    fm[FM_FIELDS4[callSign]] = val;
  }
  return fm;
}
function serializeFrontmatter2(fm, defs) {
  const filtered = {};
  const hasSkillChoice = Array.isArray(fm[FM_FIELDS4.SKILL_CHOICE_LIST]) && fm[FM_FIELDS4.SKILL_CHOICE_LIST].length > 0;
  const hasToolChoice = Array.isArray(fm[FM_FIELDS4.TOOL_CHOICE_LIST]) && fm[FM_FIELDS4.TOOL_CHOICE_LIST].length > 0;
  for (const [k, v] of Object.entries(fm)) {
    if (v === void 0) continue;
    if (k === FM_FIELDS4.COMPONENTS && Array.isArray(v) && v.length === 0) continue;
    if ((k === FM_FIELDS4.TOOL_CHOICE_LIST || k === FM_FIELDS4.SKILL_CHOICE_LIST) && Array.isArray(v) && v.length === 0) continue;
    filtered[k] = v;
  }
  let keysToEmit;
  if (defs) {
    const wanted = defs.map((d) => FM_FIELDS4[d.callSign]);
    keysToEmit = wanted.filter((k) => k in filtered);
    keysToEmit.push(
      ...Object.keys(filtered).filter((k) => !keysToEmit.includes(k))
    );
  } else {
    keysToEmit = Object.keys(filtered);
  }
  return keysToEmit.map((k) => {
    const v = filtered[k];
    if (Array.isArray(v)) {
      const inline = v.map((item) => JSON.stringify(item)).join(", ");
      return `${k}: [${inline}]`;
    }
    if (typeof v === "string") {
      return `${k}: "${v}"`;
    }
    return `${k}: ${v}`;
  }).join("\n");
}
var SKILL_OPTIONS2 = [
  "Acrobatics",
  "Animal Handling",
  "Arcana",
  "Athletics",
  "Deception",
  "History",
  "Insight",
  "Intimidation",
  "Investigation",
  "Medicine",
  "Nature",
  "Perception",
  "Performance",
  "Persuasion",
  "Religion",
  "Sleight of Hand",
  "Stealth",
  "Survival"
];
var SPELL_KEYS2 = [
  "NAME",
  "LEVEL",
  "SCHOOL",
  "CASTING_TIME",
  "SPELL_RANGE",
  "SAVING_THROWS",
  "DURATION",
  "VERBAL",
  "SOMATIC",
  "MATERIAL",
  "COMPONENTS",
  "CONCENTRATION",
  "SOURCE",
  "RULESET"
];
var SPECIES_KEYS2 = [
  "SPECIES",
  "SIZE",
  "SPEED",
  "LANGUAGES",
  "TRAITS",
  "SKILLS",
  "STR_MOD",
  "DEX_MOD",
  "CON_MOD",
  "INT_MOD",
  "WIS_MOD",
  "CHA_MOD",
  "SKILL_CHOICE_LIST",
  "TOOL_PROFICIENCIES",
  "TOOL_CHOICE_LIST",
  "WEAPON_PROFICIENCIES",
  "SENSES",
  "DAMAGE_RES",
  "SOURCE",
  "RULESET"
];
var ITEM_KEYS2 = [
  "NAME",
  "TYPE",
  "RARITY",
  "COST",
  "WEIGHT",
  "PROPERTIES",
  "DAMAGE",
  "DAMAGE_TYPES",
  "RANGE",
  "RELOAD",
  "AMMO_TYPE",
  "AC",
  "STEALTH_DISADVANTAGE",
  "MAGICAL",
  "ATTUNEMENT",
  "ATTUNE_REQ",
  "VERMUN",
  "SOURCE",
  "RULESET"
];
var BESTIARY_KEYS2 = [
  "NAME",
  "SIZE",
  "TYPE",
  "ALIGNMENT",
  "AC",
  "HP",
  "SPEED",
  "STRENGTH",
  "DEXTERITY",
  "CONSTITUTION",
  "INTELLIGENCE",
  "WISDOM",
  "CHARISMA",
  "SAVING_THROWS",
  "SKILLS",
  "SENSES",
  "LANGUAGES",
  "CHALLENGE_RATING",
  "SOURCE",
  "RULESET"
];
var CLASS_KEYS2 = [
  "NAME",
  "SPELL_CAST_MOD",
  "ARMOR_PROFICIENCIES",
  "WEAPON_PROFICIENCIES",
  "TOOL_PROFICIENCIES",
  "TOOL_CHOICE_LIST",
  "SAVING_THROWS",
  "SKILLS",
  "SKILL_CHOICE_LIST",
  "TRAITS",
  "SOURCE",
  "RULESET"
];
var BACKGROUND_KEYS2 = [
  "NAME",
  "SKILLS",
  "SKILL_CHOICE_LIST",
  "TOOL_PROFICIENCIES",
  "TOOL_CHOICE_LIST",
  "TRAITS",
  "SOURCE",
  "RULESET"
];
var FEATS_KEYS2 = [
  "SOURCE",
  "RULESET"
];
var SPELL_META_DEFS2 = SPELL_KEYS2.map((key) => {
  const def = ALL_FIELD_DEFS2.find((d) => d.callSign === key);
  if (!def) throw new Error(`Missing FieldDef for SPELL_KEY ${key}`);
  return def;
});
var SPECIES_META_DEFS2 = SPECIES_KEYS2.map((key) => {
  const def = ALL_FIELD_DEFS2.find((d) => d.callSign === key);
  if (!def) throw new Error(`Missing FieldDef for SPECIES_KEY ${key}`);
  return def;
});
var ITEM_META_DEFS2 = ITEM_KEYS2.map((key) => {
  const def = ALL_FIELD_DEFS2.find((d) => d.callSign === key);
  if (!def) throw new Error(`Missing FieldDef for ITEM_KEY ${key}`);
  return def;
});
var BESTIARY_META_DEFS2 = BESTIARY_KEYS2.map((key) => {
  const def = ALL_FIELD_DEFS2.find((d) => d.callSign === key);
  if (!def) throw new Error(`Missing FieldDef for BESTIARY_KEY ${key}`);
  return def;
});
var CLASS_META_DEFS2 = CLASS_KEYS2.map((key) => {
  const def = ALL_FIELD_DEFS2.find((d) => d.callSign === key);
  if (!def) throw new Error(`Missing FieldDef for CLASS_KEY ${key}`);
  return def;
});
var BACKGROUND_META_DEFS2 = BACKGROUND_KEYS2.map((key) => {
  const def = ALL_FIELD_DEFS2.find((d) => d.callSign === key);
  if (!def) throw new Error(`Missing FieldDef for BACKGROUND_KEY ${key}`);
  return def;
});
var FEATS_META_DEFS2 = FEATS_KEYS2.map((key) => {
  const def = ALL_FIELD_DEFS2.find((d) => d.callSign === key);
  if (!def) throw new Error(`Missing FieldDef for BACKGROUND_KEY ${key}`);
  return def;
});

// src/parsers/5e-2025/spells.ts
var SCHOOL_MAP2 = {
  A: "Abjuration",
  C: "Conjuration",
  D: "Divination",
  E: "Enchantment",
  V: "Evocation",
  I: "Illusion",
  N: "Necromancy",
  T: "Transmutation"
};
function ordinal2(n) {
  const suffix = n === 1 ? "st" : n === 2 ? "nd" : n === 3 ? "rd" : "th";
  return `${n}${suffix}`;
}
function formatRange2(range) {
  if (!range) return "";
  if (typeof range === "string") return range;
  if (range.type === "special") return "Special";
  if (range.type === "point" && range.distance) {
    const dist = range.distance;
    if (dist.type === "touch") return "Touch";
    if (dist.type === "self") return "Self";
    if (dist.type === "sight") return "Sight";
    if (dist.amount) return `${dist.amount} ${dist.type}`;
  }
  return "Varies";
}
function formatTime2(time) {
  if (!Array.isArray(time)) return "";
  return time.map((t) => `${t.number} ${t.unit}`).join(", ");
}
function formatDuration2(duration) {
  if (!Array.isArray(duration)) return "";
  return duration.map((d) => {
    if (d.type === "instant") return "Instantaneous";
    if (d.type === "timed" && d.duration) {
      return `${d.duration.amount} ${d.duration.type}${d.concentration ? " (concentration)" : ""}`;
    }
    if (d.type === "permanent") return "Permanent";
    return "Special";
  }).join(", ");
}
function formatComponents2(components) {
  if (!components) return "";
  const parts = [];
  if (components.v) parts.push("V");
  if (components.s) parts.push("S");
  if (components.m) {
    let matDetails = [];
    if (Array.isArray(components.m)) {
      matDetails = components.m.map(
        (item) => typeof item === "string" ? item : item && typeof item.text === "string" ? item.text : null
      ).filter((t) => !!t);
    } else if (typeof components.m === "string") {
      matDetails = [components.m];
    } else if (components.m.text) {
      matDetails = [components.m.text];
    }
    const matPart = matDetails.length > 0 ? `M (${matDetails.join(", ")})` : "M";
    parts.push(matPart);
  }
  return parts.join(", ");
}
function parseSpellsFile2(json, editionId) {
  if (!json.spell) return [];
  json._editionId = editionId;
  return json.spell.map((spell) => {
    const sources = spell.source ? Array.isArray(spell.source) ? spell.source : [spell.source] : ["unknown"];
    const name = spell.name;
    const school = SCHOOL_MAP2[spell.school] ?? spell.school;
    const level = spell.level;
    const range = formatRange2(spell.range);
    const castingTime = formatTime2(spell.time);
    const duration = formatDuration2(spell.duration);
    const formattedSources = sources.map((s) => getFullSourceName2(s, editionId));
    const attackType = spell.attackType || "";
    const damageType = spell.damageInflict?.[0] || "Teleportation";
    const ritual = spell.ritual === true;
    const concentration = spell.duration?.some((d) => d.concentration) ?? false;
    const FM = buildFM2(spell, SPELL_META_DEFS2);
    const yaml = serializeFrontmatter2(FM, SPELL_META_DEFS2);
    const savingThrows = FM[FM_FIELDS4.SAVING_THROWS] || [];
    const saveAttr = FM[FM_FIELDS4.SAVE];
    const safeName = name.replace(/\//g, "-");
    const title = `# ${name}`;
    const levelLabel = level === 0 ? `${school} Cantrip` : `${ordinal2(level)}-level ${school} Spell`;
    const subtitle = `### *${levelLabel}*${concentration ? " *(Concentration)*" : ""}`;
    const headerLines = [
      title,
      subtitle,
      `**Casting Time:** ${castingTime}`,
      `**Range:** ${range}`,
      `**Components:** ${formatComponents2(spell.components)}`,
      ...savingThrows.length ? [`**Saving Throw:** ${savingThrows.join(", ")}`] : [],
      `**Duration:** ${duration}`
    ];
    const bodyLines = [
      ...(spell.entries ?? []).map((e) => formatEntry2(e)),
      ...(spell.entriesHigherLevel ?? []).map((e) => formatEntry2(e))
    ];
    const footerLines = [
      `---`,
      `**Source:** ${formattedSources.join(", ")}`
    ];
    return {
      path: `${safeName}.md`,
      content: [
        `---
${yaml}
---`,
        headerLines.join("\n"),
        ``,
        bodyLines.join("\n\n"),
        ``,
        footerLines.join("\n")
      ].join("\n")
    };
  });
}

// src/parsers/5e-2025/species.ts
function slug2(name) {
  return name.replace(/;/g, ":").replace(/[\/:"]/g, ":").trim();
}
var BLOCKED_TRAITS2 = ["Age", "Size", "Languages", "Creature Type", "Speed"];
function linkDisplay2(str) {
  if (typeof str !== "string") return String(str ?? "");
  const m = str.match(/^\[\[(.+?)\]\]$/);
  if (!m) return str;
  const inner = m[1];
  const pipe = inner.split("|");
  if (pipe.length > 1) return pipe[1].trim();
  const hash = inner.split("#");
  if (hash.length > 1) return hash[1].trim();
  return inner.trim();
}
function normName2(n) {
  return String(n ?? "").replace(/^Feature:\s*/i, "").replace(/\s+/g, " ").trim().toLowerCase();
}
function findEntryByName2(entries, display) {
  if (!Array.isArray(entries)) return null;
  const target = normName2(display);
  const direct = entries.find((e) => typeof e?.name === "string" && normName2(e.name) === target);
  if (direct) return direct;
  for (const e of entries) {
    if (Array.isArray(e?.entries)) {
      const sub = e.entries.find((s) => typeof s?.name === "string" && normName2(s.name) === target);
      if (sub) return sub;
    }
  }
  return null;
}
function parseSpeciesFile2(json, editionId) {
  if (!Array.isArray(json.race)) return [];
  json._editionId = editionId;
  const rawVariants = json.race.filter(
    (r) => !/\((?:Kaladesh|Zendikar|Amonkhet|Innistrad|Ixalan)\)$/.test(r.name)
  );
  const byName = /* @__PURE__ */ new Map();
  for (const r of rawVariants) {
    const list = byName.get(r.name) ?? [];
    list.push(r);
    byName.set(r.name, list);
  }
  const subracesList = Array.isArray(json.subrace) ? json.subrace : [];
  const out = [];
  for (const [raceName, raceVariants] of byName.entries()) {
    const safeName = slug2(raceName);
    const primary = raceVariants.reduce(
      (best, cur) => Object.keys(cur).length > Object.keys(best).length ? cur : best,
      raceVariants[0]
    );
    if (!primary.ability) {
      const humanEntry = subracesList.find(
        (sr) => sr.raceName === raceName && sr.raceSource === primary.source && !("name" in sr) && Array.isArray(sr.ability)
      );
      if (humanEntry) primary.ability = humanEntry.ability;
    }
    const fm = buildFM2(primary, SPECIES_META_DEFS2);
    const senses = [];
    if (primary.darkvision) senses.push(`Darkvision ${primary.darkvision} ft.`);
    if (primary.blindsight) senses.push(`Blindsight ${primary.blindsight} ft.`);
    if (primary.tremorsense) senses.push(`Tremorsense ${primary.tremorsense} ft.`);
    if (primary.truesight) senses.push(`Truesight ${primary.truesight} ft.`);
    if (senses.length) fm.senses = senses;
    if (Array.isArray(fm.traits)) {
      fm.traits = fm.traits.filter((t) => !BLOCKED_TRAITS2.includes(t));
    }
    const yaml = serializeFrontmatter2(fm, SPECIES_META_DEFS2);
    const lines = [];
    lines.push(`# ${raceName}`, `## Stats`);
    const size = Array.isArray(primary.size) ? primary.size.map((s) => SIZE_MAP4[s] || s).join("/") : SIZE_MAP4[primary.size] ?? primary.size;
    lines.push(`**Size:** ${size}`);
    const speed = typeof primary.speed === "number" ? primary.speed : primary.speed?.walk ?? primary.speed?.base ?? 0;
    lines.push(`**Speed:** ${speed} ft. walking`);
    const kids = subracesList.filter(
      (sr) => sr.name && sr.raceName === raceName && sr.raceSource === primary.source
    );
    const rawAbility = Array.isArray(primary.ability) ? primary.ability : Array.isArray(kids[0]?.ability) ? kids[0].ability : [];
    if (Array.isArray(rawAbility) && rawAbility.length) {
      const bonuses = { str: 0, dex: 0, con: 0, int: 0, wis: 0, cha: 0 };
      let chooseOpt = null;
      for (const obj of rawAbility) {
        if ("choose" in obj) chooseOpt = obj.choose;
        else for (const [k, v] of Object.entries(obj)) bonuses[k] += v;
      }
      const pairs = Object.entries(bonuses);
      const parts = pairs.filter(([, v]) => v !== 0).map(([k, v]) => `${k.toUpperCase()} ${v >= 0 ? "+" : ""}${v}`);
      if (chooseOpt?.count && Array.isArray(chooseOpt.from)) {
        parts.push(`CHOOSE ${chooseOpt.count} from ${chooseOpt.from.map((s) => s.toUpperCase()).join(", ")}`);
      }
      if (parts.length) lines.push(`**Ability Scores:** ${parts.join(", ")}`);
    }
    const langs = fm.languages;
    if (langs?.length) lines.push(`**Languages:** ${langs.join(", ")}`);
    if (Array.isArray(primary.skillProficiencies)) {
      const skillLabels = [];
      for (const e of primary.skillProficiencies) {
        if (e.choose?.from) {
          skillLabels.push(`Choose from: ${e.choose.from.map((s) => s.charAt(0).toUpperCase() + s.slice(1)).join(", ")}`);
        } else {
          const val = e.proficiency ?? e.name ?? e;
          if (typeof val === "string") skillLabels.push(val.charAt(0).toUpperCase() + val.slice(1));
        }
      }
      if (skillLabels.length) lines.push(`**Skill Proficiencies:** ${skillLabels.join("; ")}`);
    }
    const tp = fm[FM_FIELDS4.TOOL_PROFICIENCIES];
    const wp = fm[FM_FIELDS4.WEAPON_PROFICIENCIES];
    const ap = fm[FM_FIELDS4.ARMOR_PROFICIENCIES];
    if (tp?.length) lines.push(`**Tool Proficiencies:** ${tp.join(", ")}`);
    if (wp?.length) lines.push(`**Weapon Proficiencies:** ${wp.join(", ")}`);
    if (ap?.length) lines.push(`**Armor Proficiencies:** ${ap.join(", ")}`);
    lines.push(`## Traits`);
    const seen = /* @__PURE__ */ new Set();
    for (const trait of fm.traits || []) {
      const title = linkDisplay2(trait);
      lines.push(`##### ${title}`);
      const ent = findEntryByName2(primary.entries, title);
      if (ent?.entries) {
        ent.entries.forEach((sub, idx) => {
          let blk;
          if (sub.type === "table") {
            blk = renderMarkdownTable2(sub);
          } else if (sub.type === "list") {
            blk = sub.items.map((it) => typeof it === "string" ? `- ${replace5eTags2(it)}` : `- ${it.name}`).join("\n");
          } else if (typeof sub === "string") {
            blk = replace5eTags2(sub);
          }
          if (blk && !seen.has(blk)) {
            lines.push(blk);
            seen.add(blk);
            if (ent.entries.length > 1 && idx < ent.entries.length - 1) lines.push("");
          }
        });
      }
    }
    const subs = kids;
    if (subs.length) {
      out.push({
        path: `Species/${safeName}/${safeName}.md`,
        content: `---
${yaml}
---

${lines.join("\n")}`
      });
      const subFolder = `Species/${safeName}/Races`;
      for (const sr of subs) {
        const display = sr.name.replace(/;/g, ":");
        const subLines = [`# ${display}`];
        if (Array.isArray(sr.ability)) {
          const bonuses = { str: 0, dex: 0, con: 0, int: 0, wis: 0, cha: 0 };
          let chooseOpt = null;
          for (const obj of sr.ability) {
            if ("choose" in obj) chooseOpt = obj.choose;
            else for (const [k, v] of Object.entries(obj)) bonuses[k] += v;
          }
          const pairs = Object.entries(bonuses);
          const parts = pairs.filter(([, v]) => v !== 0).map(([k, v]) => `${k.toUpperCase()} ${v >= 0 ? "+" : ""}${v}`);
          if (chooseOpt?.count) parts.push(`CHOOSE ${chooseOpt.count} from ${chooseOpt.from.map((s) => s.toUpperCase()).join(", ")}`);
          if (parts.length) subLines.push(`**Ability Scores:** ${parts.join(", ")}`);
        }
        for (const entry of sr.entries || []) {
          subLines.push(formatEntry2(entry));
          subLines.push("");
        }
        const subYaml = serializeFrontmatter2(buildFM2(sr, SPECIES_META_DEFS2), SPECIES_META_DEFS2);
        out.push({
          path: `${subFolder}/${slug2(sr.name)}.md`,
          content: `---
${subYaml}
---

${subLines.join("\n")}`
        });
      }
    } else {
      out.push({
        path: `Species/${safeName}.md`,
        content: `---
${yaml}
---

${lines.join("\n")}`
      });
    }
  }
  return out.sort((a, b) => a.path.localeCompare(b.path));
}

// src/parsers/5e-2025/classes.ts
function isTypedEntry2(x) {
  return x != null && typeof x === "object" && !Array.isArray(x) && typeof x.type === "string";
}
function formatFeatureLink2(name) {
  const ignore = ["Ability Score Improvement", "Archetype Feature", "Subclass Feature"];
  if (ignore.some((sub) => name.toLowerCase().includes(sub.toLowerCase()))) {
    return name;
  }
  const anchor = name.replace(/[^\w\s]/g, "").replace(/-/g, " ").replace(/\s+/g, " ").trim().replace(/\b\w/g, (l) => l.toUpperCase());
  return `[[#${anchor}]]`;
}
function toHeaderAnchor2(name) {
  return name.replace(/[^\w\s]/g, "").replace(/-/g, " ").replace(/\s+/g, " ").trim().replace(/\b\w/g, (l) => l.toUpperCase());
}
var OPT_FEATURE_TYPE_TO_FULL2 = {
  AI: "Artificer Infusion",
  ED: "Elemental Discipline",
  EI: "Eldritch Invocation",
  MM: "Metamagic",
  MV: "Maneuver",
  "MV:B": "Maneuver, Battle Master",
  "MV:C2-UA": "Maneuver, Cavalier V2 (UA)",
  "AS:V1-UA": "Arcane Shot, V1 (UA)",
  "AS:V2-UA": "Arcane Shot, V2 (UA)",
  AS: "Arcane Shot",
  OTH: "Other",
  "FS:F": "Fighting Style; Fighter",
  "FS:B": "Fighting Style; Bard",
  "FS:P": "Fighting Style; Paladin",
  "FS:R": "Fighting Style; Ranger",
  PB: "Pact Boon",
  OR: "Onomancy Resonant",
  RN: "Rune Knight Rune",
  AF: "Alchemical Formula",
  TT: "Traveler's Trick"
};
function parseClassFile2(json, editionId, fileName, optionalFeatures) {
  json._editionId = editionId;
  const cls = Array.isArray(json.class) ? json.class[0] : json;
  const className = typeof cls.name === "string" ? cls.name : fileName ? fileName.replace(/^class-/, "").replace(/\.json$/, "") : "Unknown";
  const subclassFiles = [];
  const PROF_BONUS_BY_LEVEL = [
    "+2",
    "+2",
    "+2",
    "+2",
    "+3",
    "+3",
    "+3",
    "+3",
    "+4",
    "+4",
    "+4",
    "+4",
    "+5",
    "+5",
    "+5",
    "+5",
    "+6",
    "+6",
    "+6",
    "+6"
  ];
  const hdNum = cls.hd?.number ?? 1;
  const hdFaces = cls.hd?.faces ?? 6;
  const hdStr = `${hdNum}d${hdFaces}`;
  const hdMax = hdNum * hdFaces;
  const hdAvg = Math.ceil((hdFaces + 1) / 2);
  const baseFM = buildFM2(cls, CLASS_META_DEFS2);
  const fm = { ...baseFM, hd: hdStr };
  const yaml = serializeFrontmatter2(fm, CLASS_META_DEFS2);
  const lines = [];
  lines.push(`# ${className}`);
  if (cls.source) lines.push(`**Source:** ${cls.source}`);
  lines.push(``);
  lines.push(`---`);
  lines.push(`## Hit Points`);
  lines.push(`**Hit Dice:** ${hdStr} per ${className} level`);
  lines.push(`**Hit Points at 1st Level:** ${hdMax} + your Constitution modifier`);
  lines.push(
    `**Hit Points at Higher Levels:** ${hdStr} (or ${hdAvg}) + your Constitution modifier per level after 1st`
  );
  lines.push(``);
  lines.push(`---`);
  lines.push(`## Proficiencies`);
  const sp = cls.startingProficiencies ?? {};
  if (Array.isArray(sp.armor) && sp.armor.length) {
    lines.push(`- **Armor:** ${sp.armor.join(", ")}`);
  }
  const weaponList = unifiedWeaponProfs2(sp);
  if (weaponList.length) {
    lines.push(`- **Weapons:** ${weaponList.join(", ")}`);
  }
  const toolList = unifiedToolProfs2(sp);
  if (toolList.length) {
    lines.push(`- **Tools:** ${toolList.join(", ")}`);
  }
  const saves = Array.isArray(cls.proficiency) ? cls.proficiency.map(
    (k) => ({
      str: "Strength",
      dex: "Dexterity",
      con: "Constitution",
      int: "Intelligence",
      wis: "Wisdom",
      cha: "Charisma"
    })[k] || k.toUpperCase()
  ) : [];
  if (saves.length) {
    lines.push(`- **Saving Throws:** ${saves.join(", ")}`);
  }
  {
    const rawSkills = Array.isArray(sp.skillProficiencies) ? sp.skillProficiencies : Array.isArray(sp.skills) ? sp.skills : Array.isArray(sp.skillProf) ? sp.skillProf : [];
    const choiceEntry = rawSkills.find(
      (e) => e && (typeof e.choose === "object" || typeof e.any === "number")
    );
    if (choiceEntry) {
      const count = choiceEntry.choose?.count ?? choiceEntry.any ?? 1;
      const options = Array.isArray(choiceEntry.choose?.from) ? choiceEntry.choose.from.map(
        (s) => (
          // title-case each word (or just use s)
          s.split(" ").map((w) => w[0].toUpperCase() + w.slice(1)).join(" ")
        )
      ) : SKILL_OPTIONS2;
      lines.push(`- **Skills (Choose ${count}):** ${options.join(", ")}`);
    } else {
      const flat = unifiedSkills4(sp);
      if (flat.length) {
        lines.push(`- **Skills:** ${flat.join(", ")}`);
      }
    }
  }
  if (Array.isArray(cls.startingEquipment)) {
    lines.push(`
### Equipment`);
    cls.startingEquipment.filter((e) => typeof e === "string").forEach((item) => lines.push(`- ${item}`));
  }
  const progGroups = cls.classTableGroups ?? [];
  const maxLevel = 20;
  if (!progGroups.length) {
    lines.push(`*(No class table provided for this class.)*`);
  } else {
    const featuresByLevel2 = {};
    for (const feat of cls.classFeatures ?? []) {
      const raw = typeof feat === "object" && feat.classFeature ? feat.classFeature : String(feat);
      const [name, , , lvlStr] = raw.split("|");
      const lvl = Number(lvlStr ?? 0);
      if (!featuresByLevel2[lvl]) featuresByLevel2[lvl] = [];
      featuresByLevel2[lvl].push(name);
    }
    const allLabelsSet = /* @__PURE__ */ new Set();
    const rowMaps = {};
    for (const group of progGroups) {
      const labels = Array.isArray(group.colLabels) ? group.colLabels.map((l) => replace5eTags2(l)) : [];
      const rows = Array.isArray(group.rows) ? group.rows : Array.isArray(group.rowsSpellProgression) ? group.rowsSpellProgression : [];
      if (!labels.length || !rows.length) continue;
      for (let lvl = 0; lvl < rows.length; lvl++) {
        const levelNum = lvl + 1;
        if (!rowMaps[levelNum]) rowMaps[levelNum] = {};
        const rowMap = rowMaps[levelNum];
        const cells = rows[lvl];
        for (let i = 0; i < labels.length; i++) {
          const label = labels[i];
          let val = "";
          const cell = cells[i];
          if (Array.isArray(cell)) {
            val = cell.join(", ");
          } else if (cell && typeof cell === "object" && "value" in cell) {
            val = String(cell.value);
          } else {
            val = String(cell ?? "");
          }
          allLabelsSet.add(label);
          rowMap[label] = val;
        }
      }
    }
    const allLabels = Array.from(allLabelsSet).filter(
      (lbl) => !/Cantrips Known|Spells Known|\d+(st|nd|rd|th)/.test(lbl)
    );
    const mergedLabels = ["Level", "Proficiency Bonus", "Class Features", ...allLabels];
    const mergedRows = [];
    for (let lvl = 1; lvl <= maxLevel; lvl++) {
      const featureList = (featuresByLevel2[lvl] ?? []).map(formatFeatureLink2);
      const rowMap = rowMaps[lvl] ?? {};
      mergedRows.push([
        lvl.toString(),
        PROF_BONUS_BY_LEVEL[lvl - 1] || "",
        featureList.join(", ").replace(/\|/g, "&#124;"),
        ...allLabels.map((label) => rowMap[label] ?? "")
      ]);
    }
    lines.push(`
> [!example]- Class Progression Table`);
    lines.push(
      renderMarkdownTable2({
        type: "table",
        caption: "",
        colLabels: mergedLabels,
        rows: mergedRows
      })
    );
  }
  const csGroup = progGroups.find(
    (g) => Array.isArray(g.colLabels) && g.colLabels.some((lbl) => /Cantrips Known|Spells Known/.test(String(lbl)))
  );
  const slotGroup = progGroups.find(
    (g) => Array.isArray(g.colLabels) && g.title === "Spell Slots per Spell Level"
  );
  if (csGroup && slotGroup) {
    const csLabels = csGroup.colLabels.map((l) => replace5eTags2(l));
    const slotLabels = slotGroup.colLabels.map((l) => replace5eTags2(l));
    const csRows = csGroup.rows || [];
    const slotRows = slotGroup.rowsSpellProgression || [];
    const colLabels = ["Level", ...csLabels, ...slotLabels];
    const spellRows = [];
    for (let i = 0; i < Math.max(csRows.length, slotRows.length); i++) {
      const lvl = String(i + 1);
      const csCells = csRows[i] ? csRows[i].map(String) : csLabels.map((_) => "");
      const slotCells = slotRows[i] ? slotRows[i].map(String) : slotLabels.map((_) => "");
      spellRows.push([lvl, ...csCells, ...slotCells]);
    }
    lines.push(`
> [!tip]- Spell Progression Table`);
    lines.push(
      renderMarkdownTable2({
        type: "table",
        caption: "",
        colLabels,
        rows: spellRows
      })
    );
  }
  const subs = Array.isArray(json.subclass) ? json.subclass : [];
  const subclassFeatures = Array.isArray(json.subclassFeature) ? json.subclassFeature : json.lookup?.subclassFeature ?? [];
  for (const sc of subs) {
    const subclassName = sc.name;
    const subLines = [];
    subLines.push(`# ${subclassName}`);
    subLines.push(`**Parent Class:** [[${className}]]`);
    if (sc.source) subLines.push(`**Source:** ${sc.source}`);
    subLines.push(``);
    const intro = subclassFeatures.find(
      (f) => f.name === sc.name && f.level === 3 && f.subclassShortName === sc.shortName && f.subclassSource === sc.source
    );
    if (intro?.entries?.length) {
      const introText = Array.isArray(intro.entries) ? intro.entries.map(
        (e) => typeof e === "string" ? replace5eTags2(e) : formatEntry2(e)
      ).join("\n\n") : formatEntry2(intro.entries);
      subLines.push(introText, ``);
    }
    const code = Object.entries(OPT_FEATURE_TYPE_TO_FULL2).find(
      ([, full]) => full.toLowerCase().includes(subclassName.toLowerCase())
    )?.[0];
    if (code) {
      const matches = optionalFeatures.filter(
        (of) => Array.isArray(of.featureType) && of.featureType.includes(code)
      );
      if (matches.length) {
        subLines.push(`## ${subclassName} Optional Features`);
        for (const feat of matches) {
          for (const entry of feat.entries) {
            const txt = typeof entry === "string" ? replace5eTags2(entry) : formatEntry2(entry);
            subLines.push(`**${feat.name}:** ${txt}`);
          }
          subLines.push(``);
        }
      }
    }
    const prog = sc.subclassTableGroups ?? [];
    if (prog.length) {
      const labels = /* @__PURE__ */ new Set();
      const rowsMap = {};
      for (const g of prog) {
        const cols = (g.colLabels ?? []).map(replace5eTags2);
        const rows = Array.isArray(g.rows) ? g.rows : Array.isArray(g.rowsSpellProgression) ? g.rowsSpellProgression : [];
        rows.forEach((r, i) => {
          const lvl = i + 1;
          rowsMap[lvl] ?? (rowsMap[lvl] = {});
          r.forEach((c, j) => {
            const lab = cols[j];
            if (!lab) return;
            labels.add(lab);
            rowsMap[lvl][lab] = typeof c === "object" && c !== null && "value" in c ? String(c.value) : String(c ?? "");
          });
        });
      }
      const hdrs = Array.from(labels);
      subLines.push(`## Subclass Progression`);
      subLines.push(renderMarkdownTable2({
        type: "table",
        caption: "",
        colLabels: ["Level", ...hdrs],
        rows: Array.from({ length: 20 }, (_, i) => {
          const lvl = i + 1;
          return [String(lvl), ...hdrs.map((h) => rowsMap[lvl]?.[h] ?? "")];
        })
      }));
    }
    const featsByLvl = {};
    for (const f of subclassFeatures) {
      if (f.subclassShortName === sc.shortName && f.subclassSource === sc.source && f.className === className) {
        const lvl = f.level ?? 0;
        ;
        (featsByLvl[lvl] ?? (featsByLvl[lvl] = [])).push(f);
      }
    }
    const IGNORE_TRAITS = ["Ability Score Improvement", "Archetype Feature", "Subclass Feature"];
    const traitNames = Array.from(
      new Set(
        Object.values(featsByLvl).flat().map((f) => String(f?.name || "").trim()).filter((n) => n && !IGNORE_TRAITS.some((s) => n.toLowerCase().includes(s.toLowerCase())))
      )
    );
    const traitLinks = traitNames.map((n) => `[[${subclassName}#${toHeaderAnchor2(n)}|${n}]]`);
    const subYaml = serializeFrontmatter2({ traits: traitLinks }, CLASS_META_DEFS2);
    for (const lvl of Object.keys(featsByLvl).map(Number).sort((a, b) => a - b)) {
      subLines.push(`---`, `## Level ${lvl}`);
      for (const f of featsByLvl[lvl]) {
        subLines.push(`### ${f.name}`);
        for (const ent of Array.isArray(f.entries) ? f.entries : [f.entries]) {
          if (typeof ent === "string") {
            subLines.push(replace5eTags2(ent));
            continue;
          }
          if (isTypedEntry2(ent) && ent.type === "entries" && /^Maneuvers$/i.test(ent.name)) {
            subLines.push(`##### ${ent.name}`);
            for (const txt of Array.isArray(ent.entries) ? ent.entries : [ent.entries]) {
              subLines.push(typeof txt === "string" ? replace5eTags2(txt) : formatEntry2(txt));
            }
            const code2 = Object.entries(OPT_FEATURE_TYPE_TO_FULL2).find(
              ([, full]) => full.toLowerCase().includes(subclassName.toLowerCase())
            )?.[0];
            if (code2) {
              const matches = optionalFeatures.filter(
                (of) => Array.isArray(of.featureType) && of.featureType.includes(code2)
              );
              for (const featDef of matches) {
                for (const sub of featDef.entries) {
                  const line = typeof sub === "string" ? replace5eTags2(sub) : formatEntry2(sub);
                  subLines.push(`**${featDef.name}:** ${line}`);
                }
                subLines.push("");
              }
            }
            continue;
          }
          if (isTypedEntry2(ent) && ent.type === "entries" && ent.name) {
            subLines.push(`##### ${ent.name}`);
            for (const e2 of Array.isArray(ent.entries) ? ent.entries : [ent.entries]) {
              subLines.push(formatEntry2(e2));
            }
            continue;
          }
          if (isTypedEntry2(ent) && ent.type === "inset" && ent.name) {
            const inner = Array.isArray(ent.entries) ? ent.entries : [ent.entries];
            subLines.push(`> **${ent.name}**`);
            inner.forEach((e2) => subLines.push(`> ${formatEntry2(e2)}`));
            continue;
          }
          const fb = formatEntry2(ent);
          if (fb) subLines.push(fb);
        }
      }
    }
    const subclassContentBody = subLines.join("\n\n").replace(/\n{3,}/g, "\n\n");
    const subclassContent = `---
${subYaml}
---

${subclassContentBody}`;
    subclassFiles.push({
      path: `Classes/${className}/Subclasses/${subclassName}.md`,
      content: subclassContent
    });
  }
  if (subs.length) {
    const links = subs.map(
      (sc) => `[[Subclasses/${sc.name.replace(/[\\/]/g, "-")}|${sc.name}]]`
    );
    lines.push(`
**Subclasses:** ${links.join(", ")}`);
  }
  const allFeatures = Array.isArray(json.classFeature) ? json.classFeature : json.lookup?.classFeature ?? [];
  const featuresByLevel = {};
  for (const entry of allFeatures) {
    if (entry.className !== className) continue;
    const lvl = entry.level ?? 0;
    if (!featuresByLevel[lvl]) featuresByLevel[lvl] = [];
    featuresByLevel[lvl].push(entry);
  }
  lines.push(``);
  lines.push(`---`);
  lines.push(`## Level Features`);
  const levels = Object.keys(featuresByLevel).map((n) => +n).sort((a, b) => a - b);
  for (const lvl of levels) {
    lines.push(`### Level ${lvl}`);
    for (const feat of featuresByLevel[lvl]) {
      lines.push(`#### ${feat.name}`);
      const entries = Array.isArray(feat.entries) ? feat.entries : [feat.entries];
      for (const ent of entries) {
        if (typeof ent === "string") {
          const txt = formatEntry2(ent).trim();
          if (txt === "{" || txt === "}") continue;
          lines.push(txt);
          continue;
        }
        if (isTypedEntry2(ent) && ent.type === "list" && Array.isArray(ent.items)) {
          for (const item of ent.items) {
            lines.push(`- ${replace5eTags2(item)}`);
          }
          continue;
        }
        if (isTypedEntry2(ent) && ent.type === "options") {
          if (ent.count) {
            lines.push("");
            lines.push(`**Choose ${ent.count} of the following options:**`);
            lines.push("");
          }
          for (const optRef of Array.isArray(ent.entries) ? ent.entries : [ent.entries]) {
            if (optRef.type === "refOptionalfeature") {
              const [optName, optSrc] = optRef.optionalfeature.split("|");
              const featDef = optionalFeatures.find(
                (f) => f.name === optName && (!optSrc || f.source === optSrc)
              );
              if (featDef) {
                featDef.entries.forEach((subEntry, idx) => {
                  const text = typeof subEntry === "string" ? replace5eTags2(subEntry) : formatEntry2(subEntry);
                  if (idx === 0) {
                    lines.push(`- **${featDef.name}:** ${text}`);
                  } else {
                    lines.push(`  - ${text}`);
                  }
                });
                lines.push("");
              } else {
                lines.push(`**${optName}:**`);
              }
            } else {
              const txt = formatEntry2(optRef);
              if (txt) lines.push(`- ${txt}`);
            }
          }
          continue;
        }
        if (isTypedEntry2(ent) && ent.type === "refOptionalfeature") {
          const [name] = ent.optionalfeature.split("|");
          lines.push(`- [[${name}|${name}]]`);
          continue;
        }
        if (isTypedEntry2(ent) && ent.type === "entries" && ent.name) {
          lines.push(`##### ${ent.name}`);
          const inner = Array.isArray(ent.entries) ? ent.entries : [ent.entries];
          for (const e2 of inner) {
            lines.push(formatEntry2(e2));
          }
          continue;
        }
        const fallback = formatEntry2(ent);
        if (fallback) lines.push(fallback);
      }
      lines.push(``);
    }
    lines.push(`---`);
  }
  let content = `---
${yaml}
---

${lines.join("\n")}`;
  content = replace5eTags2(content);
  content = content.replace(/\n{3,}/g, "\n\n").replace(/\n +\n/g, "\n\n");
  return [
    {
      path: `Classes/${className}/${className}.md`,
      content
    },
    ...subclassFiles
  ];
}

// src/parsers/5e-2025/rules.ts
function parseActionsFile2(json, editionId) {
  if (!Array.isArray(json.action)) return [];
  const lines = [];
  function emitBlock(block) {
    if (!block) return;
    if (typeof block === "string") {
      for (const para of block.split(/\n{2,}/)) {
        const t = para.trim();
        if (t) {
          lines.push(replace5eTags2(t));
          lines.push("");
        }
      }
      return;
    }
    if (block.type === "list" && Array.isArray(block.items)) {
      for (const item of block.items) {
        lines.push(`- ${replace5eTags2(item)}`);
      }
      lines.push("");
      return;
    }
    if (block.type === "table" && Array.isArray(block.rows)) {
      const headers = block.colLabels || [];
      lines.push(`| ${headers.join(" | ")} |`);
      lines.push(`| ${headers.map(() => "---").join(" | ")} |`);
      for (const row of block.rows) {
        lines.push(`| ${row.join(" | ")} |`);
      }
      lines.push("");
      return;
    }
    if ((block.type === "entries" || block.type === "inset") && Array.isArray(block.entries)) {
      if (block.name) {
        if (lines[lines.length - 1] === "") lines.pop();
        lines.push(`### ${block.name}`);
      }
      for (const child of block.entries) {
        emitBlock(child);
      }
      return;
    }
    const txt = Array.isArray(block) ? block.join(" ") : typeof block === "object" ? JSON.stringify(block) : String(block);
    lines.push(replace5eTags2(txt));
    lines.push("");
  }
  for (const action of json.action) {
    lines.push(`## ${action.name}`);
    for (const entry of Array.isArray(action.entries) ? action.entries : [action.entries]) {
      emitBlock(entry);
    }
    if (Array.isArray(action.seeAlsoAction)) {
      lines.push("**See Also:**");
      lines.push("");
      for (const ref of action.seeAlsoAction) {
        const [name] = String(ref).split("|");
        lines.push(`- [[${name}]]`);
      }
      lines.push("");
    }
    lines.push("---");
  }
  const cleaned = lines.reduce((acc, curr) => {
    if (curr === "" && acc.length && acc[acc.length - 1] === "") return acc;
    return acc.concat(curr);
  }, []);
  return [
    {
      path: "Rules and Reference/Actions.md",
      content: cleaned.join("\n").trim() + "\n"
    }
  ];
}
function parseConditionsDiseasesFile2(json, editionId) {
  const outputs = [];
  const processItems = (items, outPath) => {
    const lines = [];
    for (const item of items) {
      lines.push(`## ${item.name}`);
      const entries = Array.isArray(item.entries) ? item.entries : [item.entries];
      for (const entry of entries) {
        if (!entry) continue;
        if (typeof entry === "string") {
          for (const para of entry.split(/\n{2,}/)) {
            const t = para.trim();
            if (t) {
              lines.push(replace5eTags2(t));
              lines.push("");
            }
          }
        } else if (entry.type === "list" && Array.isArray(entry.items)) {
          for (const txt of entry.items) {
            lines.push(`- ${replace5eTags2(txt)}`);
          }
          lines.push("");
        } else if (entry.type === "table" && Array.isArray(entry.rows)) {
          const headers = entry.colLabels || [];
          lines.push(`| ${headers.join(" | ")} |`);
          lines.push(`| ${headers.map(() => "---").join(" | ")} |`);
          for (const row of entry.rows) {
            lines.push(`| ${row.join(" | ")} |`);
          }
          lines.push("");
        } else if (entry.type === "entries" && Array.isArray(entry.entries)) {
          if (entry.name) {
            lines.push(`### ${entry.name}`);
            for (const sub of entry.entries) {
              if (sub.type === "entries" && sub.name && Array.isArray(sub.entries)) {
                if (lines[lines.length - 1] === "") lines.pop();
                lines.push(`#### ${sub.name}`);
                for (const txtEntry of sub.entries) {
                  const text = typeof txtEntry === "string" ? replace5eTags2(txtEntry) : replace5eTags2(String(txtEntry));
                  lines.push(text);
                  lines.push("");
                }
              } else if (typeof sub === "string") {
                lines.push(replace5eTags2(sub));
                lines.push("");
              }
            }
          } else {
            for (const sub of entry.entries) {
              if (sub.type === "entries" && sub.name && Array.isArray(sub.entries)) {
                if (lines[lines.length - 1] === "") lines.pop();
                lines.push(`### ${sub.name}`);
                for (const txtEntry of sub.entries) {
                  const text = typeof txtEntry === "string" ? replace5eTags2(txtEntry) : replace5eTags2(String(txtEntry));
                  lines.push(text);
                  lines.push("");
                }
              } else if (typeof sub === "string") {
                lines.push(replace5eTags2(sub));
                lines.push("");
              }
            }
          }
        } else {
          const txt = Array.isArray(entry) ? entry.join(" ") : typeof entry === "object" ? JSON.stringify(entry) : String(entry);
          lines.push(replace5eTags2(txt));
          lines.push("");
        }
      }
      lines.push("---");
    }
    const cleaned = lines.reduce((acc, curr) => {
      if (curr === "" && acc.length && acc[acc.length - 1] === "") return acc;
      return acc.concat(curr);
    }, []);
    outputs.push({
      path: outPath,
      content: cleaned.join("\n").trim() + "\n"
    });
  };
  processItems(json.condition || [], "Rules and Reference/Conditions.md");
  processItems(json.disease || [], "Rules and Reference/Diseases.md");
  return outputs;
}
function parseSensesFile2(json, editionId) {
  const items = Array.isArray(json.sense) ? json.sense : Array.isArray(json.senses) ? json.senses : [];
  if (!items.length) return [];
  const lines = [];
  function emitBlock(block) {
    if (!block) return;
    if (typeof block === "string") {
      for (const para of block.split(/\n{2,}/)) {
        const t = para.trim();
        if (t) {
          lines.push(replace5eTags2(t));
          lines.push("");
        }
      }
      return;
    }
    if (block.type === "list" && Array.isArray(block.items)) {
      for (const item of block.items) {
        if (typeof item === "string") {
          lines.push(`- ${replace5eTags2(item)}`);
          lines.push("");
        } else if (item && typeof item === "object") {
          if (item.name && Array.isArray(item.entries)) {
            lines.push(`- **${item.name}**`);
            for (const ent of item.entries) {
              lines.push(`  - ${replace5eTags2(ent)}`);
            }
            lines.push("");
          } else {
            lines.push(`- ${replace5eTags2(JSON.stringify(item))}`);
            lines.push("");
          }
        }
      }
      return;
    }
    if (block.type === "table" && Array.isArray(block.rows)) {
      const headers = block.colLabels || [];
      lines.push(`| ${headers.join(" | ")} |`);
      lines.push(`| ${headers.map(() => "---").join(" | ")} |`);
      for (const row of block.rows) {
        lines.push(`| ${row.join(" | ")} |`);
      }
      lines.push("");
      return;
    }
    if ((block.type === "entries" || block.type === "inset") && Array.isArray(block.entries)) {
      if (block.name) {
        if (lines[lines.length - 1] === "") lines.pop();
        lines.push(`### ${block.name}`);
      }
      for (const child of block.entries) {
        emitBlock(child);
      }
      return;
    }
    const txt = Array.isArray(block) ? block.join(" ") : typeof block === "object" ? JSON.stringify(block) : String(block);
    lines.push(replace5eTags2(txt));
    lines.push("");
  }
  for (const sense of items) {
    lines.push(`## ${sense.name}`);
    for (const entry of Array.isArray(sense.entries) ? sense.entries : [sense.entries]) {
      emitBlock(entry);
    }
    lines.push("---");
  }
  const cleaned = lines.reduce((acc, curr) => {
    if (curr === "" && acc.length && acc[acc.length - 1] === "") return acc;
    return acc.concat(curr);
  }, []);
  return [
    {
      path: "Rules and Reference/Senses.md",
      content: cleaned.join("\n").trim() + "\n"
    }
  ];
}
function parseSkillsFile2(json, editionId) {
  const items = Array.isArray(json.skill) ? json.skill : Array.isArray(json.skills) ? json.skills : [];
  if (!items.length) return [];
  const lines = [];
  for (const skill of items) {
    lines.push(`## ${skill.name}`);
    if (skill.ability) {
      lines.push(`*Ability: ${skill.ability}*`);
      lines.push("");
    }
    const entries = Array.isArray(skill.entries) ? skill.entries : [skill.entries];
    for (const entry of entries) {
      if (!entry) continue;
      if (typeof entry === "string") {
        const paras = entry.split(/\n{2,}/);
        for (const para of paras) {
          const t = para.trim();
          if (t) {
            lines.push(replace5eTags2(t));
            lines.push("");
          }
        }
      } else if (entry.type === "list" && Array.isArray(entry.items)) {
        for (const item of entry.items) {
          lines.push(`- ${replace5eTags2(item)}`);
        }
        lines.push("");
      } else {
        const txt = Array.isArray(entry) ? entry.join(" ") : String(entry);
        lines.push(replace5eTags2(txt));
        lines.push("");
      }
    }
    lines.push("---");
  }
  const cleaned = lines.reduce((acc, curr) => {
    if (curr === "" && acc.length && acc[acc.length - 1] === "") return acc;
    return acc.concat(curr);
  }, []);
  return [
    {
      path: "Rules and Reference/Skills.md",
      content: cleaned.join("\n").trim() + "\n"
    }
  ];
}

// src/parsers/5e-2025/feats.ts
function parseFeatsFile2(json, editionId) {
  const feats = Array.isArray(json.feat) ? json.feat : Array.isArray(json.feats) ? json.feats : [];
  return feats.map((feat) => {
    const lines = [];
    const fm = buildFM2({ ...feat, _editionId: editionId }, FEATS_META_DEFS2);
    lines.push("---");
    lines.push(serializeFrontmatter2(fm, FEATS_META_DEFS2));
    lines.push("---", "");
    lines.push(`# ${feat.name}`, "");
    const prereqs = [];
    if (Array.isArray(feat.prerequisite)) {
      feat.prerequisite.forEach((pr) => {
        if (pr.level) prereqs.push(`Level ${pr.level}`);
        if (Array.isArray(pr.feat)) {
          pr.feat.forEach((f) => {
            const name = f.split("|")[0].replace(/\b\w/g, (c) => c.toUpperCase());
            prereqs.push(`Prerequisite: [[${name}]]`);
          });
        }
      });
    }
    if (feat.spellcastingPrepared) prereqs.push(`Prerequisite: Spellcaster`);
    if (Array.isArray(feat.toolProficiencies)) {
      feat.toolProficiencies.forEach((tp) => {
        Object.entries(tp).forEach(([key]) => {
          if (key === "anyArtisansTool") {
            prereqs.push(`Prerequisite: Proficient with an artisan's tool`);
          } else {
            prereqs.push(`Prerequisite: Proficient with ${key.replace(/([A-Z])/g, " $1").trim()}`);
          }
        });
      });
    }
    if (Array.isArray(feat.armorProficiencies)) {
      feat.armorProficiencies.forEach((arm) => {
        const armStr = typeof arm === "string" ? arm : JSON.stringify(arm);
        prereqs.push(`Prerequisite: Proficient with ${armStr.replace(/([A-Z])/g, " $1").trim()}`);
      });
    }
    if (feat.race) prereqs.push(`Prerequisite: ${feat.race}`);
    if (prereqs.length) {
      lines.push("**Prerequisites**");
      prereqs.forEach((p) => lines.push(`- ${p}`));
      lines.push("");
    }
    const entries = Array.isArray(feat.entries) ? feat.entries : [feat.entries];
    entries.forEach((entry) => {
      if (!entry) return;
      if (typeof entry === "string") {
        entry.split(/\n{2,}/).forEach((p) => {
          const t = p.trim();
          if (t) {
            lines.push(replace5eTags2(t));
            lines.push("");
          }
        });
      } else if (entry.type === "list" && Array.isArray(entry.items)) {
        entry.items.forEach((it) => {
          if (typeof it === "string") {
            lines.push(`- ${replace5eTags2(it)}`);
          } else if (it.type === "item" && it.name) {
            lines.push(`- **${it.name}**`);
            const subs = Array.isArray(it.entries) ? it.entries : [it.entries];
            subs.forEach(
              (s) => lines.push(`  - ${replace5eTags2(typeof s === "string" ? s : JSON.stringify(s))}`)
            );
          }
        });
        lines.push("");
      } else if (entry.type === "inset") {
        lines.push(`- *${entry.name}*`);
        const subs = Array.isArray(entry.entries) ? entry.entries : [entry.entries];
        subs.forEach((s) => lines.push(`  - ${replace5eTags2(s)}`));
        lines.push("");
      } else if ((entry.type === "section" || entry.type === "entries") && Array.isArray(entry.entries)) {
        if (entry.name) {
          lines.push(`## ${entry.name}`);
          lines.push("");
        }
        entry.entries.forEach((s) => {
          lines.push(replace5eTags2(typeof s === "string" ? s : JSON.stringify(s)));
          lines.push("");
        });
      } else if (entry.type === "table" && Array.isArray(entry.rows)) {
        const hdr = entry.colLabels || [];
        lines.push(`| ${hdr.join(" | ")} |`);
        lines.push(`| ${hdr.map(() => "---").join(" | ")} |`);
        entry.rows.forEach(
          (row) => lines.push(`| ${row.join(" | ")} |`)
        );
        lines.push("");
      }
    });
    return {
      path: `Player Build/Feats/${feat.name}.md`,
      content: lines.join("\n").trim() + "\n"
    };
  });
}

// src/parsers/5e-2025/backgrounds.ts
function parseBackgroundsFile2(json, editionId) {
  const raw = Array.isArray(json.background) ? json.background : Array.isArray(json.backgrounds) ? json.backgrounds : [];
  const backgrounds = raw.filter((bg) => {
    const nm = bg.name || "";
    return !nm.startsWith("Variant") && !nm.includes("Baldur's Gate");
  });
  const outputs = [];
  backgrounds.forEach((bg) => {
    const lines = [];
    const fm = buildFM2(bg, BACKGROUND_META_DEFS2);
    const extraTraits = Array.isArray(bg.entries) ? bg.entries.filter((e) => e.data?.isFeature && typeof e.name === "string").map((e) => {
      const name = e.name.replace(/^Feature:\s*/, "");
      return `[[${bg.name}#${name}]]`;
    }) : [];
    const yaml = serializeFrontmatter2(fm, BACKGROUND_META_DEFS2);
    lines.push("---", yaml, "---", "");
    lines.push(`# ${bg.name}`, "");
    if (Array.isArray(bg.skillProficiencies) && bg.skillProficiencies.length) {
      const skills = [];
      bg.skillProficiencies.forEach((ent) => {
        if (typeof ent === "string") {
          skills.push(cap4(ent));
        } else if (ent.choose && Array.isArray(ent.choose.from)) {
          skills.push(`Choose ${ent.choose.amount} from ${ent.choose.from.join(", ")}`);
        } else {
          Object.entries(ent).filter(([, v]) => v === true).forEach(([k]) => skills.push(cap4(k)));
        }
      });
      lines.push(`**Skill Proficiencies:** ${skills.join(", ")}`, "");
    }
    if (Array.isArray(bg.languageProficiencies) && bg.languageProficiencies.length) {
      const langs = [];
      bg.languageProficiencies.forEach((ent) => {
        if (ent.anyStandard) {
          langs.push(`${ent.anyStandard} of your choice`);
        } else {
          Object.entries(ent).filter(([, v]) => v === true).forEach(([k]) => langs.push(cap4(k)));
        }
      });
      lines.push(`**Languages:** ${langs.join(", ")}`, "");
    }
    if (Array.isArray(bg.toolProficiencies) && bg.toolProficiencies.length) {
      const tools = [];
      bg.toolProficiencies.forEach((ent) => {
        if (ent.choose && Array.isArray(ent.choose.from)) {
          const list = ent.choose.from.map(humanize2).join(", ");
          tools.push(`Choose ${ent.choose.count} from ${list}`);
          return;
        }
        if (typeof ent === "string") {
          tools.push(humanize2(ent));
          return;
        }
        Object.entries(ent).filter(([_, v]) => v === true).forEach(([k]) => tools.push(humanize2(k)));
      });
      lines.push(`**Tool Proficiencies:** ${tools.join(", ")}`, "");
    }
    if (Array.isArray(bg.startingEquipment) && bg.startingEquipment.length) {
      lines.push(`**Equipment:**`);
      bg.startingEquipment.forEach((grp) => {
        if (Array.isArray(grp._)) {
          grp._.forEach((it) => lines.push(`- ${fmtItem2(it)}`));
        }
        ["a", "b"].forEach((key) => {
          if (Array.isArray(grp[key])) {
            grp[key].forEach((it) => lines.push(`- ${fmtItem2(it)}`));
          }
        });
      });
      lines.push("");
    }
    if (Array.isArray(bg.entries)) {
      bg.entries.forEach((entry) => {
        if (entry.type === "list" && entry.style === "list-hang-notitle") {
          return;
        }
        if (entry.name) {
          const header = entry.data?.isFeature ? entry.name.replace(/^Feature:\s*/, "") : entry.name;
          lines.push(`## ${header}`, "");
        }
        if (Array.isArray(entry.entries)) {
          entry.entries.forEach((e) => {
            if (typeof e === "string") {
              lines.push(replace5eTags2(e), "");
            } else if (e.type === "list" && Array.isArray(e.items)) {
              e.items.forEach(
                (it) => lines.push(`- ${replace5eTags2(it.entry ?? it)}`)
              );
              lines.push("");
            } else if (e.type === "table") {
              const tbl = renderMarkdownTable2(e);
              if (tbl) lines.push(tbl, "");
            }
          });
        } else if (entry.type === "list" && Array.isArray(entry.items)) {
          entry.items.forEach(
            (it) => lines.push(`- ${replace5eTags2(it.entry ?? it)}`)
          );
          lines.push("");
        }
      });
    }
    outputs.push({
      path: `Player Build/Backgrounds/${bg.name}.md`,
      content: lines.join("\n").trimEnd() + "\n"
    });
  });
  return outputs;
}
function cap4(str) {
  return str.charAt(0).toUpperCase() + str.slice(1);
}
function fmtItem2(item) {
  if (typeof item === "string") {
    if (item.includes("|")) {
      return replace5eTags2(`{@item ${item}}`);
    }
    return replace5eTags2(item);
  }
  const priceRaw = item.containsValue ?? item.value;
  if (typeof priceRaw === "number" && // make sure it’s not also an “item” or “equipmentType”
  !item.item && !item.equipmentType && !item.special) {
    const gp = priceRaw >= 100 ? priceRaw / 100 : priceRaw;
    return `${gp} gp`;
  }
  if (item.item) {
    const link = replace5eTags2(`{@item ${item.item}}`);
    if (typeof priceRaw === "number") {
      const gp = priceRaw >= 100 ? priceRaw / 100 : priceRaw;
      return `${link} (${gp} gp)`;
    }
    return link;
  }
  if (typeof item.special === "string") {
    return item.special;
  }
  if (item.equipmentType) {
    switch (item.equipmentType) {
      case "toolArtisan":
        return "One type of artisan\u2019s tools (of your choice)";
      case "instrumentMusical":
        return "One type of musical instrument (of your choice)";
      case "setGaming":
        return "One set of gaming dice (of your choice)";
      default:
        return humanize2(item.equipmentType);
    }
  }
  return replace5eTags2(JSON.stringify(item));
}
function humanize2(str) {
  const spaced = str.replace(/([a-z])([A-Z])/g, "$1 $2");
  return spaced.charAt(0).toUpperCase() + spaced.slice(1);
}

// src/parsers/5e-2025/installer.ts
var import_obsidian4 = require("obsidian");
async function listSpellFilesFromGitHub2(repo) {
  const url = `https://api.github.com/repos/${repo}/contents/data/spells`;
  const res = await fetch(url);
  const data = await res.json();
  return data.filter((item) => item.type === "file" && item.name.startsWith("spells-") && item.name.endsWith(".json")).map((item) => item.name);
}
async function listBestiaryFilesFromGitHub2(repo) {
  const url = `https://api.github.com/repos/${repo}/contents/data/bestiary`;
  const res = await fetch(url);
  const list = await res.json();
  const CORE_SOURCES = [
    "bestiary-phb.json",
    "bestiary-mm.json",
    "bestiary-dmg.json",
    "bestiary-xge.json",
    "bestiary-vgm.json",
    "bestiary-tce.json",
    "bestiary-egw.json",
    "bestiary-erlw.json",
    "bestiary-mtf.json",
    "bestiary-vrgr.json",
    "bestiary-cos.json",
    "bestiary-oota.json",
    "bestiary-pota.json",
    "bestiary-hotdq.json",
    "bestiary-rot.json",
    "bestiary-skt.json",
    "bestiary-tftyp.json",
    "bestiary-toa.json"
  ];
  return list.filter((item) => item.type === "file" && CORE_SOURCES.includes(item.name)).map((item) => item.name);
}
var ITEM_JSON_FILES2 = [
  "items-base.json",
  "items.json",
  "objects.json",
  "vehicles.json",
  "decks.json"
];
async function listItemFilesFromGitHub2(repo) {
  const url = `https://api.github.com/repos/${repo}/contents/data`;
  const res = await fetch(url);
  const data = await res.json();
  return data.filter((item) => item.type === "file" && ITEM_JSON_FILES2.includes(item.name)).map((item) => item.name);
}
async function listClassFilesFromGitHub2(repo) {
  const url = `https://api.github.com/repos/${repo}/contents/data/class`;
  const res = await fetch(url);
  const listing = await res.json();
  return listing.filter(
    (item) => item.type === "file" && item.name.startsWith("class-") && item.name.endsWith(".json")
  ).map((item) => item.name);
}
async function ensureFolder2(app, folderPath) {
  const parts = folderPath.split("/");
  let curr = "";
  for (const p of parts) {
    curr = curr ? `${curr}/${p}` : p;
    try {
      await app.vault.createFolder(curr);
    } catch {
    }
  }
}
async function importEditionData2(params) {
  const { app, edition, targetPath } = params;
  const repo = edition.repo ?? "";
  {
    const spellFiles = await listSpellFilesFromGitHub2(repo);
    for (const fileName of spellFiles) {
      try {
        const res = await fetch(`${edition.sourceUrl}/spells/${fileName}`);
        const json = await res.json();
        const files = parseSpellsFile2(json, edition.id);
        for (const md of files) {
          const fullPath = (0, import_obsidian3.normalizePath)(`${targetPath}/Spells/${md.path}`);
          const folder = fullPath.split("/").slice(0, -1).join("/");
          await ensureFolder2(app, folder);
          await app.vault.adapter.write(fullPath, md.content);
        }
      } catch (e) {
        console.warn(`Failed to import spell ${fileName}:`, e);
      }
    }
  }
  {
    const bestiaryFiles = await listBestiaryFilesFromGitHub2(repo);
    for (const fileName of bestiaryFiles) {
      try {
        const res = await fetch(`${edition.sourceUrl}/bestiary/${fileName}`);
        const json = await res.json();
        const parsed = parseBestiaryFile2(json, edition.id);
        for (const md of parsed) {
          const fullPath = (0, import_obsidian3.normalizePath)(`${targetPath}/Bestiary/${md.path}`);
          const folder = fullPath.split("/").slice(0, -1).join("/");
          await ensureFolder2(app, folder);
          await app.vault.adapter.write(fullPath, md.content);
        }
      } catch (e) {
        console.warn(`Failed to import bestiary ${fileName}:`, e);
      }
    }
  }
  {
    const itemFiles = await listItemFilesFromGitHub2(repo);
    for (const fn of itemFiles) {
      try {
        const res = await fetch(`${edition.sourceUrl}/${fn}`);
        const json = await res.json();
        const mdFiles = parseItemsFile2(json, edition.id);
        for (const md of mdFiles) {
          const fullPath = (0, import_obsidian3.normalizePath)(`${targetPath}/${md.path}`);
          const folder = fullPath.split("/").slice(0, -1).join("/");
          await ensureFolder2(app, folder);
          await app.vault.adapter.write(fullPath, md.content);
        }
      } catch (e) {
        console.warn(`Failed to import items from ${fn}:`, e);
      }
    }
  }
  {
    const res = await fetch(`${edition.sourceUrl}/races.json`);
    const json = await res.json();
    const mdFiles = parseSpeciesFile2(json, edition.id);
    for (const md of mdFiles) {
      const fullPath = (0, import_obsidian3.normalizePath)(`${targetPath}/Player Build/${md.path}`);
      await ensureFolder2(app, fullPath.split("/").slice(0, -1).join("/"));
      await app.vault.adapter.write(fullPath, md.content);
    }
    let optionalFeatures = [];
    try {
      const url = `${edition.sourceUrl}/optionalfeatures.json`;
      const res2 = await fetch(url);
      const text = await res2.text();
      const start = text.indexOf("{");
      if (start === -1) throw new Error("No JSON object found");
      const cleanJson = text.slice(start);
      const raw = JSON.parse(cleanJson);
      optionalFeatures = Array.isArray(raw.optionalfeature) ? raw.optionalfeature : [];
    } catch (e) {
      console.warn("Failed to import optionalfeatures.json:", e);
    }
    {
      const classFiles = await listClassFilesFromGitHub2(repo);
      for (const fileName of classFiles) {
        try {
          const res2 = await fetch(`${edition.sourceUrl}/class/${fileName}`);
          const json2 = await res2.json();
          const mdFiles2 = parseClassFile2(
            json2,
            edition.id,
            fileName,
            optionalFeatures
          );
          for (const md of mdFiles2) {
            const fullPath = (0, import_obsidian3.normalizePath)(`${targetPath}/Player Build/${md.path}`);
            await ensureFolder2(app, fullPath.split("/").slice(0, -1).join("/"));
            const existing = app.vault.getAbstractFileByPath(fullPath);
            if (existing instanceof import_obsidian4.TFile) {
              await app.vault.modify(existing, md.content);
            } else {
              await app.vault.create(fullPath, md.content);
            }
          }
        } catch (e) {
          console.warn(`Failed to import class ${fileName}:`, e);
        }
      }
    }
    {
      try {
        const res2 = await fetch(`${edition.sourceUrl}/actions.json`);
        const json2 = await res2.json();
        const mdFiles2 = parseActionsFile2(json2, edition.id);
        for (const md of mdFiles2) {
          const fullPath = (0, import_obsidian3.normalizePath)(
            `${targetPath}/${md.path}`
          );
          const folder = fullPath.split("/").slice(0, -1).join("/");
          await ensureFolder2(app, folder);
          await app.vault.adapter.write(fullPath, md.content);
        }
      } catch (e) {
        console.warn("Failed to import actions.json:", e);
      }
    }
    {
      try {
        const res2 = await fetch(`${edition.sourceUrl}/conditionsdiseases.json`);
        const json2 = await res2.json();
        const mdFiles2 = parseConditionsDiseasesFile2(json2, edition.id);
        for (const md of mdFiles2) {
          const fullPath = (0, import_obsidian3.normalizePath)(
            `${targetPath}/${md.path}`
          );
          const folder = fullPath.split("/").slice(0, -1).join("/");
          await ensureFolder2(app, folder);
          await app.vault.adapter.write(fullPath, md.content);
        }
      } catch (e) {
        console.warn("Failed to import conditionsdiseases.json:", e);
      }
    }
    {
      try {
        const res2 = await fetch(`${edition.sourceUrl}/senses.json`);
        const json2 = await res2.json();
        const mdFiles2 = parseSensesFile2(json2, edition.id);
        for (const md of mdFiles2) {
          const fullPath = (0, import_obsidian3.normalizePath)(
            `${targetPath}/${md.path}`
          );
          const folder = fullPath.split("/").slice(0, -1).join("/");
          await ensureFolder2(app, folder);
          await app.vault.adapter.write(fullPath, md.content);
        }
      } catch (e) {
        console.warn("Failed to import senses.json:", e);
      }
    }
    {
      try {
        const res2 = await fetch(`${edition.sourceUrl}/skills.json`);
        const json2 = await res2.json();
        const mdFiles2 = parseSkillsFile2(json2, edition.id);
        for (const md of mdFiles2) {
          const fullPath = (0, import_obsidian3.normalizePath)(
            `${targetPath}/${md.path}`
          );
          const folder = fullPath.split("/").slice(0, -1).join("/");
          await ensureFolder2(app, folder);
          await app.vault.adapter.write(fullPath, md.content);
        }
      } catch (e) {
        console.warn("Failed to import skills.json:", e);
      }
    }
    {
      try {
        const res2 = await fetch(`${edition.sourceUrl}/feats.json`);
        const json2 = await res2.json();
        const mdFiles2 = parseFeatsFile2(json2, edition.id);
        for (const md of mdFiles2) {
          const fullPath = (0, import_obsidian3.normalizePath)(
            `${targetPath}/${md.path}`
          );
          const folder = fullPath.split("/").slice(0, -1).join("/");
          await ensureFolder2(app, folder);
          await app.vault.adapter.write(fullPath, md.content);
        }
      } catch (e) {
        console.warn("Failed to import feats.json:", e);
      }
    }
    {
      try {
        const res2 = await fetch(`${edition.sourceUrl}/backgrounds.json`);
        const json2 = await res2.json();
        const mdFiles2 = parseBackgroundsFile2(json2, edition.id);
        for (const md of mdFiles2) {
          const fullPath = (0, import_obsidian3.normalizePath)(`${targetPath}/${md.path}`);
          const folder = fullPath.split("/").slice(0, -1).join("/");
          await ensureFolder2(app, folder);
          await app.vault.adapter.write(fullPath, md.content);
        }
      } catch (e) {
        console.warn("Failed to import backgrounds.json:", e);
      }
    }
  }
}

// src/rulesetInstaller.ts
async function importRulesetData(params) {
  const { app, editionKey, targetPath } = params;
  const edition = AVAILABLE_EDITIONS.find((e) => e.id === editionKey);
  if (!edition) {
    console.warn("Edition not found for:", editionKey);
    return;
  }
  if (!edition.parser) {
    console.warn("No parser defined for:", editionKey);
    return;
  }
  let installerModule;
  switch (edition.parser) {
    case "5e-2014":
      installerModule = installer_exports;
      break;
    case "5e-2025":
      installerModule = installer_exports2;
      break;
    // case "other-parser":
    //   installerModule = anotherInstaller;
    //   break;
    default:
      throw new Error(`Unknown parser: ${edition.parser}`);
  }
  await installerModule.importEditionData({ app, edition, targetPath });
}

// src/firstinstallconfirm.ts
var ConfirmFreshInstallModal = class extends import_obsidian5.Modal {
  constructor(app, plugin) {
    super(app);
    this.plugin = plugin;
  }
  onOpen() {
    this.contentEl.empty();
    this.titleEl.setText("\u26A0\uFE0F Warning: Fresh Vault Recommended");
    const warningEl = this.contentEl.createEl("div", {
      text: "The full VVunderlore install is intended for a fresh, empty Obsidian vault. If you install in a vault that already has files, any file whose path matches a VVunderlore Toolkit file will be overwritten.\n\nAlso things could just get messy.\n\nMake a perception check and proceed with caution!"
    });
    warningEl.addClass("installconf-disclaimer");
    const buttonRow = this.contentEl.createEl("div");
    buttonRow.addClass("installconf-buttonrow");
    new import_obsidian5.ButtonComponent(buttonRow).setButtonText("Oh god, cancel!").onClick(() => {
      this.close();
    });
    new import_obsidian5.ButtonComponent(buttonRow).setButtonText("Install!!").setCta().onClick(async () => {
      this.app.workspace.getLeavesOfType("markdown").forEach((leaf) => leaf.detach());
      this.app.workspace.getLeavesOfType("graph").forEach((leaf) => leaf.detach());
      this.close();
      const installing = new InstallingModal(this.app);
      installing.open();
      const compendium = this.plugin.settings.rulesetCompendium;
      const references = [...this.plugin.settings.rulesetReference];
      try {
        await this.plugin.installFullToolkit({ compendium, references });
        if (compendium) {
          await importRulesetData({
            app: this.app,
            editionKey: compendium,
            targetPath: "Compendium"
          });
        }
      } catch (err) {
        console.error("\u274C installFullToolkit() failed:", err);
      }
      this.plugin.settings.isFirstRun = "no";
      await this.plugin.saveSettings();
      installing.close();
      const successModal = new import_obsidian5.Modal(this.app);
      successModal.onOpen = () => {
        successModal.contentEl.empty();
        successModal.titleEl.setText("\u2705 Toolkit Installed");
        const msg = successModal.contentEl.createEl("div", {
          text: "Reloading vault in 3 seconds\u2026"
        });
        msg.addClass("installsuccess");
      };
      successModal.open();
      setTimeout(() => {
        successModal.close();
        location.reload();
      }, 3e3);
    });
  }
  onClose() {
    this.contentEl.empty();
  }
};

// src/settings.ts
var path = __toESM(require("path"));

// src/adv-categories.ts
var ADVENTURE_CATEGORY_DEFS = [
  { id: "npcs", label: "NPCs", test: /Non-Player Characters\// },
  { id: "pcs", label: "Player Characters", test: /Player Characters\// },
  { id: "factions", label: "Factions", test: /Factions\// },
  { id: "monsters", label: "Monsters", test: /Compendium\/Bestiary\// },
  { id: "items", label: "Items", test: /Compendium\/Items\// },
  { id: "spells", label: "Spells", test: /Compendium\/Spells\// },
  { id: "history", label: "History", test: /World\/History\// },
  { id: "events", label: "Events", test: /World\/Events\// },
  { id: "deities", label: "Deities", test: /Deities\// },
  { id: "places", label: "Places", test: /World\/Places\// },
  { id: "other", label: "Other" }
];
var getAdventureCategoryIds = () => ADVENTURE_CATEGORY_DEFS.map((d) => d.id);

// src/settings.ts
var FilePathSuggester = class extends import_obsidian6.AbstractInputSuggest {
  constructor(app, inputEl) {
    super(app, inputEl);
    this.paths = [];
    this.currentSuggestions = [];
    this.renderedSuggestions = /* @__PURE__ */ new Map();
    this.inputEl = inputEl;
    const folders = Object.values(app.vault.getAllLoadedFiles()).filter((f) => f instanceof import_obsidian6.TFolder).map((f) => ({ path: f.path, isFolder: true }));
    const files = app.vault.getMarkdownFiles().map((f) => ({ path: f.path, isFolder: false }));
    this.paths = [...folders, ...files];
    this.inputEl.addEventListener("keydown", (e) => {
      if (e.key === "Enter") {
        setTimeout(() => {
          const container = this.containerEl;
          if (!container) return;
          const selectedEl = container.querySelector(".suggestion-item.is-selected");
          if (selectedEl) {
            const selectedPath = this.renderedSuggestions.get(selectedEl);
            if (selectedPath) {
              this.selectSuggestion(selectedPath);
            }
          }
        }, 0);
      }
    });
  }
  getSuggestions(inputStr) {
    const query = inputStr.toLowerCase();
    this.currentSuggestions = this.paths.filter(({ path: path2 }) => path2.toLowerCase().includes(query)).map((p) => p.path);
    return this.currentSuggestions;
  }
  renderSuggestion(path2, el) {
    const isFolder = this.paths.find((p) => p.path === path2)?.isFolder;
    el.addClass("mod-complex");
    const iconEl = el.createDiv({ cls: "suggestion-icon" });
    (0, import_obsidian6.setIcon)(iconEl, isFolder ? "folder" : "document");
    const name = path2.split("/").pop();
    const displayName = isFolder ? name : name.replace(/\.md$/, "");
    el.createDiv({ text: displayName, cls: "suggestion-title" });
    const parentPath = path2.split("/").slice(0, -1).join("/");
    el.createDiv({ text: parentPath, cls: "search-suggest-info-text" });
    el.addEventListener("click", (e) => {
      e.stopPropagation();
      this.selectSuggestion(path2);
    });
    this.renderedSuggestions.set(el, path2);
  }
  selectSuggestion(path2) {
    this.inputEl.value = path2;
    this.inputEl.dispatchEvent(new Event("input"));
    this.close();
  }
};
var MarkdownPreviewModal = class extends import_obsidian6.Modal {
  constructor(app, content) {
    super(app);
    this.content = content;
  }
  onOpen() {
    this.contentEl.addEventListener("click", (e) => e.stopPropagation());
    this.contentEl.empty();
    this.contentEl.createEl("h2", { text: "Toolkit Changelog" });
    const md = this.contentEl.createDiv();
    const dummyComponent = new class extends import_obsidian6.Component {
    }();
    import_obsidian6.MarkdownRenderer.renderMarkdown(this.content, md, "/", dummyComponent);
  }
  onClose() {
    this.contentEl.empty();
  }
};
function wireRotate(detailsEl, iconEl) {
  const apply = () => iconEl.classList.toggle("vv-rotated", detailsEl.open);
  apply();
  detailsEl.addEventListener("toggle", apply);
}
function keepOpen(details, key, opts) {
  const { defaultOpen = false } = opts || {};
  const ls = window.localStorage;
  const stored = ls.getItem(key);
  details.open = stored === "1" || stored === null && defaultOpen;
  if (!details._vvKeepOpenBound) {
    details.addEventListener("toggle", () => {
      try {
        ls.setItem(key, details.open ? "1" : "0");
      } catch {
      }
    });
    details._vvKeepOpenBound = true;
  }
}
var ToolkitSettingsTab = class extends import_obsidian6.PluginSettingTab {
  constructor(app, plugin) {
    super(app, plugin);
    this.latestValueEl = null;
    this.checkBtnEl = null;
    this.lastCheckedEl = null;
    this.versionValueEl = null;
    this.forceWarningEl = null;
    this.rulesetValueEl = null;
    this.plugin = plugin;
  }
  renderHeader(root) {
    const header = root.createDiv();
    header.addClass("settings-header");
    header.createEl("h3", { text: "VVunderlore Toolkit Settings" });
    const headerBtns = header.createDiv();
    headerBtns.addClass("settings-header-btn");
    const docsBtn = headerBtns.createEl("button", { text: "Docs" });
    docsBtn.onclick = () => window.open("http://vvunderlore.com", "_blank");
    const githubBtn = headerBtns.createEl("button", { text: "GitHub" });
    githubBtn.onclick = () => window.open("https://github.com/slamwise0001/VVunderlore-Toolkit-Full", "_blank");
    const kofiBtn = headerBtns.createEl("button", {
      text: "\u2615 Ko-fi",
      cls: "mod-cta"
    });
    kofiBtn.addClass("settings-kofi");
    kofiBtn.onclick = () => window.open("https://ko-fi.com/vvunderlore", "_blank");
  }
  renderFirstRunCard(root) {
    const card = root.createEl("div", { cls: "vvunderlore-first-run" });
    Object.assign(card.style, {
      display: "flex",
      flexDirection: "column",
      alignItems: "center",
      textAlign: "center",
      marginTop: "2em",
      padding: "1em",
      border: "2px solid var(--divider-color)",
      borderRadius: "18px",
      /* (optional) round the corners slightly */
      backgroundColor: "var(--background-primary)"
      /* (optional) white/gray background */
    });
    const title = card.createEl("h2", {
      text: "\u{1F3F0} Welcome to VVunderlore",
      cls: "vv-card-title"
    });
    title.addClass("vv-mb-sm");
    const desc = card.createEl("p", {
      text: "Get started by installing the default toolkit\u2014\nor choose individual pieces to suit your vault.",
      cls: "vv-card-desc"
    });
    desc.addClass("vv-mb-lg");
    const plugin = this.plugin;
    const grid = card.createDiv();
    Object.assign(grid.style, {
      display: "grid",
      gridTemplateColumns: "max-content max-content",
      columnGap: "1rem",
      rowGap: "0.25rem",
      justifyContent: "center",
      justifyItems: "center",
      marginBottom: "1rem"
    });
    const labelRs = grid.createEl("div", { text: "Ruleset" });
    labelRs.addClass("install-rulesheader");
    const labelRef = grid.createEl("div", { text: "Reference (optional)" });
    labelRef.addClass("install-rulesheader");
    const rsCell = grid.createDiv({ attr: { style: "text-align:center" } });
    const refCell = grid.createDiv({ attr: { style: "text-align:center" } });
    const summaryBar = grid.createDiv();
    Object.assign(summaryBar.style, {
      gridColumn: "1 / span 2",
      display: "flex",
      alignItems: "center",
      flexWrap: "wrap",
      gap: "0.5rem",
      fontSize: "0.85em",
      color: "var(--text-muted)",
      fontStyle: "italic",
      marginTop: "0.25rem",
      marginBottom: "1rem"
    });
    const rulesetSpan = summaryBar.createSpan({
      text: `Ruleset: ${plugin.settings.rulesetCompendium ? `D&D 5E (${plugin.settings.rulesetCompendium})` : ""}`
    });
    rulesetSpan.addClass("install-rulesheader");
    summaryBar.createSpan({ text: "References:" });
    const chipsWrapper = summaryBar.createDiv();
    Object.assign(chipsWrapper.style, { display: "flex", gap: "4px" });
    function addChip(id) {
      const ed = AVAILABLE_EDITIONS.find((e) => e.id === id);
      const chip = chipsWrapper.createDiv({
        attr: {
          style: "background: var(--interactive-accent); color: white; padding:2px 6px; border-radius:4px; display:inline-flex; align-items:center; gap:4px;"
        }
      });
      chip.createSpan({ text: ed.label });
      const rem = chip.createSpan({
        text: "\xD7",
        attr: { style: "cursor:pointer; margin-left:4px;" }
      });
      rem.onclick = async () => {
        plugin.settings.rulesetReference = plugin.settings.rulesetReference.filter((x) => x !== id);
        await plugin.saveSettings();
        chip.remove();
        updateInstallButtons();
      };
    }
    ;
    plugin.settings.rulesetReference.forEach((e) => addChip(e));
    const rsDropdown = new import_obsidian6.DropdownComponent(rsCell);
    rsDropdown.addOption("", "Select edition\u2026");
    AVAILABLE_EDITIONS.forEach((ed) => {
      rsDropdown.addOption(ed.id, ed.label);
    });
    rsDropdown.setValue(this.plugin.settings.rulesetCompendium).onChange(async (val) => {
      this.plugin.settings.rulesetCompendium = val;
      await this.plugin.saveSettings();
      const chosen = AVAILABLE_EDITIONS.find((e) => e.id === val);
      rulesetSpan.textContent = chosen ? chosen.label : "";
      chipsWrapper.empty();
      updateInstallButtons();
    });
    const searchWrapperEl = refCell.createDiv({ attr: { style: "text-align:center;" } });
    const searchComp = new import_obsidian6.SearchComponent(searchWrapperEl);
    searchComp.setPlaceholder("Add reference rules\u2026");
    const suggestionInputEl = searchComp.inputEl;
    new class extends import_obsidian6.AbstractInputSuggest {
      constructor(app, inputEl) {
        super(app, inputEl);
      }
      // 1) Propose edition IDs (minus the one they picked as the main ruleset)
      getSuggestions(input) {
        return AVAILABLE_EDITIONS.filter((ed) => ed.id !== plugin.settings.rulesetCompendium).filter((ed) => ed.label.toLowerCase().includes(input.toLowerCase())).map((ed) => ed.id);
      }
      // 2) Render the human-readable label
      renderSuggestion(item, el) {
        const ed = AVAILABLE_EDITIONS.find((e) => e.id === item);
        el.createDiv({ text: ed.label });
      }
      // 3) When they pick one, store its ID and add a chip
      selectSuggestion(item) {
        if (!plugin.settings.rulesetReference.includes(item)) {
          plugin.settings.rulesetReference.push(item);
          plugin.saveSettings();
          addChip(item);
        }
        this.close();
        suggestionInputEl.value = "";
        updateInstallButtons();
      }
    }(this.app, suggestionInputEl);
    const btnRow1 = card.createEl("div", { cls: "vv-button-row" });
    Object.assign(btnRow1.style, {
      display: "flex",
      gap: "0.75em",
      justifyContent: "center",
      marginBottom: "1.5em"
    });
    const installBtn1 = btnRow1.createEl("button", {
      text: "Install Toolkit",
      cls: "mod-cta"
    });
    installBtn1.onClickEvent(
      () => new ConfirmFreshInstallModal(this.app, this.plugin).open()
    );
    const updateInstallButtons = () => {
      const hasRuleset = Boolean(this.plugin.settings.rulesetCompendium);
      installBtn1.toggleAttribute("disabled", !hasRuleset);
    };
    updateInstallButtons();
    const skipPara = card.createEl("p", { cls: "vv-skip-link" });
    Object.assign(skipPara.style, {
      textAlign: "center",
      marginTop: "0.25em"
    });
    skipPara.createEl("a", {
      text: "Already have the Toolkit? Show me the settings \u2192"
    }).onClickEvent(async () => {
      const markerPath = ".vvunderlore_installed";
      try {
        if (!await this.app.vault.adapter.exists(markerPath)) {
          await this.app.vault.create(markerPath, "");
        }
      } catch (e) {
        console.error("\u274C Failed to create marker file:", e);
      }
      this.display();
    });
  }
  formatRulesetLabel(id) {
    if (!id) return "Unknown";
    const ed = AVAILABLE_EDITIONS.find((e) => e.id === id);
    return ed ? ed.label : String(id);
  }
  async resolveRulesetId() {
    const s = this.plugin?.settings;
    const fromSettings = s?.rulesetCompendium || // <— your installer dropdown saves here
    s?.rulesetId || s?.ruleset || null;
    if (fromSettings) return String(fromSettings);
    try {
      const txt = await this.app.vault.adapter.read("Compendium/.ruleset.json");
      const j = JSON.parse(txt);
      return j.rulesetId || j.ruleset || null;
    } catch (_) {
    }
    try {
      const txt = await this.app.vault.adapter.read(".version.json");
      const j = JSON.parse(txt);
      return j.rulesetId || j.ruleset || null;
    } catch (_) {
    }
    return null;
  }
  async updateRulesetDisplay() {
    if (!this.rulesetValueEl) return;
    const id = await this.resolveRulesetId();
    const label = this.formatRulesetLabel(id);
    this.rulesetValueEl.textContent = label;
    this.rulesetValueEl.classList.remove("vv-success", "vv-warn", "vv-error");
    this.rulesetValueEl.addClass(id ? "vv-success" : "vv-warn");
  }
  async display() {
    const { containerEl } = this;
    const savedScrollTop = containerEl.scrollTop;
    containerEl.empty();
    const markerPath = ".vvunderlore_installed";
    const isInstalled = await this.app.vault.adapter.exists(markerPath);
    if (!isInstalled) {
      this.renderFirstRunCard(containerEl);
      containerEl.scrollTop = savedScrollTop;
      return;
    }
    this.renderHeader(containerEl);
    ;
    (async () => {
      const versionRow = containerEl.createDiv();
      versionRow.addClass("settings-versionrow");
      const versionInfo = versionRow.createDiv();
      versionInfo.addClass("settings-versioninfo");
      let installed = "Not installed";
      try {
        const verContent = await this.app.vault.adapter.read(".version.json");
        const json = JSON.parse(verContent);
        installed = json.version ?? "Not installed";
      } catch (err) {
        console.warn("Could not read .version.json from vault:", err);
      }
      const latest = this.plugin.settings.latestToolkitVersion ?? "Could not fetch";
      const isMatch = installed === latest;
      const vaultRow = versionInfo.createDiv();
      vaultRow.appendText("Vault Toolkit Version: ");
      this.versionValueEl = vaultRow.createSpan();
      this.versionValueEl.textContent = installed;
      this.versionValueEl.addClass("vv-bold", isMatch ? "vv-success" : "vv-error");
      const latestRow = versionInfo.createEl("div", { text: "Latest Official Version: " });
      this.latestValueEl = latestRow.createSpan({
        text: latest,
        attr: { style: "font-weight: bold;" }
      });
      const versionControls = versionRow.createDiv();
      versionControls.addClass("settings-versioncontrols");
      const buttonRow = versionControls.createDiv();
      buttonRow.addClass("settings-buttonrow");
      const checkBtn = buttonRow.createEl("button", {
        text: installed !== latest ? "Update Available!" : "Check for Updates",
        cls: "mod-cta"
      });
      this.checkBtnEl = checkBtn;
      checkBtn.dataset.state = installed !== latest ? "update" : "check";
      checkBtn.addEventListener("click", async () => {
        if (checkBtn.disabled) return;
        if (checkBtn.dataset.state === "update") {
          this.plugin.previewUpdatesModal();
          return;
        }
        const prevLabel = checkBtn.textContent || "Check for Updates";
        checkBtn.classList.add("mod-loading");
        checkBtn.setAttribute("aria-busy", "true");
        checkBtn.disabled = true;
        try {
          const minDelay = new Promise((res) => setTimeout(res, 3e3));
          await Promise.all([this.plugin.checkForUpdates(), minDelay]);
          await this.updateVersionDisplay();
          checkBtn.classList.remove("mod-loading");
          checkBtn.removeAttribute("aria-busy");
          if (checkBtn.dataset.state === "update") {
            checkBtn.disabled = false;
            checkBtn.textContent = "Update Available!";
            checkBtn.onclick = () => {
              this.plugin.previewUpdatesModal();
            };
            return;
          }
          checkBtn.textContent = "Up to date!";
          checkBtn.disabled = true;
        } catch (err) {
          console.error("Update check failed:", err);
          checkBtn.classList.remove("mod-loading");
          checkBtn.removeAttribute("aria-busy");
          checkBtn.textContent = prevLabel;
          checkBtn.disabled = false;
        }
      });
      const changelogBtn = buttonRow.createEl("button", { text: "\u{1F4D6} View Changelog" });
      changelogBtn.addEventListener("click", () => {
        new MarkdownPreviewModal(this.app, this.plugin.changelog).open();
      });
      if (this.plugin.settings.lastChecked) {
        this.lastCheckedEl = versionControls.createDiv();
        this.lastCheckedEl.addClass("settings-lastchecked");
        this.lastCheckedEl.textContent = `Last checked: ${new Date(this.plugin.settings.lastChecked).toLocaleString()}`;
      } else {
        this.lastCheckedEl = null;
      }
      const rulesetRow = versionInfo.createDiv();
      rulesetRow.addClass("settings-rulesetrow");
      rulesetRow.setAttr("style", "margin-top: 6px;margin-bottom: 12px;");
      rulesetRow.appendText("Vault Ruleset: ");
      this.rulesetValueEl = rulesetRow.createSpan({});
      this.rulesetValueEl.textContent = "Detecting\u2026";
      await this.updateRulesetDisplay();
      const fixDetails = containerEl.createEl("details", { cls: "vk-section" });
      keepOpen(fixDetails, "vv:fix");
      const fixHeader = fixDetails.createEl("summary", { cls: "vk-section-header" });
      Object.assign(fixHeader.style, {
        display: "flex",
        flexDirection: "column",
        alignItems: "stretch",
        padding: "0.5em 0",
        borderBottom: "1px solid var(--divider-color)",
        cursor: "pointer"
      });
      const fixHeaderRow = fixHeader.createDiv({
        attr: {
          style: `
			display: flex;
			justify-content: space-between;
			align-items: flex-end;
			`
        }
      });
      const fixTitleBlock = fixHeaderRow.createDiv({
        attr: { style: "display: flex; flex-direction: column;" }
      });
      fixTitleBlock.createEl("h5", { text: "Fix Your Vault" });
      fixTitleBlock.createEl("div", {
        text: "Fix and broken, deleted, or misplaced files in your toolkit.",
        cls: "setting-item-description",
        attr: { style: "margin-top: 0.25em;" }
      });
      const fixToggleIcon = fixHeaderRow.createEl("span", { text: "VV", cls: "vk-toggle-icon" });
      Object.assign(fixToggleIcon.style, {
        fontWeight: "bold",
        display: "inline-block",
        transition: "transform 0.2s ease",
        transformOrigin: "50% 50%",
        userSelect: "none"
      });
      wireRotate(fixDetails, fixToggleIcon);
      const fixBody = fixDetails.createDiv({ cls: "vk-section-body" });
      fixBody.addClass("vv-pl-md");
      const fixButtonRow = fixBody.createDiv();
      fixButtonRow.addClass("vv-checkbox-row", "vv-justify-between");
      const warningContainer = fixButtonRow.createDiv();
      this.forceWarningEl = warningContainer;
      let installedVersionStr = "";
      try {
        const versionFile = await this.plugin.app.vault.adapter.read(".version.json");
        const parsed = JSON.parse(versionFile);
        installedVersionStr = (parsed.version ?? "").trim();
      } catch {
        installedVersionStr = "";
      }
      const latestVersionStr = (this.plugin.settings.latestToolkitVersion ?? "").trim();
      if (installedVersionStr && latestVersionStr && installedVersionStr !== latestVersionStr) {
        const warn = warningContainer.createEl("div", {
          text: `\u26A0\uFE0F New version available (${installedVersionStr} \u2192 ${latestVersionStr}) \u2014 use regular update instead`
        });
        warn.addClass("vv-small", "vv-muted", "vv-italic");
        warn.setAttr(
          "title",
          "Force updating while a new version is available may skip important changes."
        );
      }
      const buttonGroup = fixButtonRow.createDiv();
      buttonGroup.addClass("settings-buttonrow");
      buttonGroup.createEl("button", { text: "Force Update Vault", cls: "mod-cta" }).onclick = async () => {
        await this.plugin.forceUpdatePreviewAndConfirm();
        if (this.plugin.settings.reparseGamesets) {
          await this.plugin.refreshGameSetData();
        }
      };
      buttonGroup.createEl("button", {
        text: "Undo Update"
      }).onclick = async () => {
        await this.plugin.undoForceUpdate();
      };
      const fixTimestampRow = fixBody.createDiv();
      Object.assign(fixTimestampRow.style, {
        textAlign: "right",
        fontSize: "11px",
        color: "var(--text-muted)",
        marginTop: "0.25em"
      });
      fixTimestampRow.textContent = `Last forced: ${this.plugin.settings.lastForceUpdate ? new Date(this.plugin.settings.lastForceUpdate).toLocaleString() : "Not forced yet"}`;
      fixBody.createEl("div", {
        attr: {
          style: "border-top: 1px solid var(--divider-color); margin: 0.75em 0;"
        }
      });
      const reparseRow = fixBody.createDiv();
      reparseRow.addClass("vv-mt-sm");
      new import_obsidian6.Setting(reparseRow).setName("Re-parse Game Sets On Force Update").setDesc(
        "Also re-parse your ruleset compendium and reference sets. This won't delete any files in the Compendium or Reference folders."
      ).addToggle(
        (tog) => tog.setValue(this.plugin.settings.reparseGamesets).onChange(async (value) => {
          this.plugin.settings.reparseGamesets = value;
          await this.plugin.saveSettings();
        })
      );
      const backupDetails = containerEl.createEl("details", { cls: "vk-section" });
      keepOpen(backupDetails, "vv:backup");
      const backupSummary = backupDetails.createEl("summary", { cls: "vk-section-header" });
      Object.assign(backupSummary.style, {
        display: "flex",
        flexDirection: "column",
        alignItems: "stretch",
        padding: "0.5em 0",
        borderBottom: "1px solid var(--divider-color)",
        cursor: "pointer"
      });
      const backupTitleRow = backupSummary.createDiv({
        attr: {
          style: `
			display: flex;
			justify-content: space-between;
			align-items: flex-end;
			`
        }
      });
      const titleBlock = backupTitleRow.createDiv({
        attr: { style: "display: flex; flex-direction: column;" }
      });
      titleBlock.createEl("h5", { text: "Vault Backups" });
      titleBlock.createEl("div", {
        text: "The Toolkit will back up your vault automatically before updates. You can also back up manually anytime.",
        cls: "setting-item-description",
        attr: { style: "margin-top: 0.25em;" }
      });
      const backupVvIcon = backupTitleRow.createEl("span", { text: "VV", cls: "vk-toggle-icon" });
      Object.assign(backupVvIcon.style, {
        fontWeight: "bold",
        display: "inline-block",
        transition: "transform 0.2s ease",
        transformOrigin: "50% 50%",
        userSelect: "none"
      });
      wireRotate(backupDetails, backupVvIcon);
      const backupBody = backupDetails.createDiv({ cls: "vk-section-body" });
      backupBody.addClass("vv-pl-md");
      new import_obsidian6.Setting(backupBody).setName("Auto-Backup Before Update").setDesc("Create a full .zip of the vault before applying version updates. Force updates will only back up the files that will be modified or removed.").addToggle(
        (t) => t.setValue(this.plugin.settings.autoBackupBeforeUpdate).onChange(async (v) => {
          this.plugin.settings.autoBackupBeforeUpdate = v;
          await this.plugin.saveSettings();
        })
      );
      new import_obsidian6.Setting(backupBody).setName("Manual Backup").setDesc("Immediately create a zip backup of your vault").addButton(
        (b) => b.setButtonText("Backup Vault Now").setCta().onClick(async () => {
          const path2 = await this.plugin.backupManager.backupVaultToZip("manual");
          new import_obsidian6.Notice(`Backup created: ${path2}`);
        })
      );
      new import_obsidian6.Setting(backupBody).setName("Open Backups Folder").setDesc("Open the backups folder on disk. MacOS: Cant see it? Hit Shift+Cmd+(period).").addButton(
        (b) => b.setButtonText("Open Folder").onClick(async () => {
          try {
            const vaultBasePath = this.plugin.app.vault.adapter.getBasePath();
            const backupFolderPath = path.join(
              vaultBasePath,
              ".vault-backups"
            );
            const { shell } = window.require("electron");
            const result = await shell.openPath(backupFolderPath);
            if (typeof result === "string" && result.length > 0) {
              console.error("\u274C shell.openPath error:", result);
              new import_obsidian6.Notice("Could not open backups folder. See console.");
            }
          } catch (err) {
            console.error("\u274C Could not open backups folder:", err);
            new import_obsidian6.Notice("Could not open backups folder. See console.");
          }
        })
      );
      backupBody.createEl("div", {
        attr: {
          style: "border-top: 1px solid var(--divider-color); margin-top: 1.5em;"
        }
      });
      const customizationDetails = containerEl.createEl("details", { cls: "vk-section" });
      keepOpen(customizationDetails, "vv:custom");
      const customizationSummary = customizationDetails.createEl("summary", { cls: "vk-section-header" });
      Object.assign(customizationSummary.style, {
        display: "flex",
        flexDirection: "column",
        alignItems: "flex-start",
        padding: "0.5em 0",
        cursor: "pointer"
      });
      const titleRow = customizationSummary.createDiv({
        attr: {
          style: `
			display: flex;
			width: 100%;
			justify-content: space-between;
			align-items: flex-end;
			`
        }
      });
      const customizationTitleBlock = titleRow.createDiv({
        attr: { style: "display: flex; flex-direction: column;" }
      });
      const h5 = customizationTitleBlock.createEl("h5");
      h5.appendText("Custom File Management ");
      customizationTitleBlock.createEl("div", {
        text: "Skip updates on certain files or remap relocated Toolkit files so they can update.",
        cls: "setting-item-description",
        attr: { style: "margin-top: 0.25em;" }
      });
      const customVvIcon = titleRow.createEl("span", { text: "VV", cls: "vk-toggle-icon" });
      Object.assign(customVvIcon.style, {
        fontWeight: "bold",
        display: "inline-block",
        transition: "transform 0.2s ease",
        transformOrigin: "50% 50%",
        userSelect: "none"
      });
      wireRotate(customizationDetails, customVvIcon);
      const customizationBodyWrapper = customizationDetails.createDiv({
        attr: { style: "padding-left: 1em; padding-right: 1em;" }
      });
      const customizationBody = customizationBodyWrapper.createDiv({ cls: "vk-section-body" });
      const skipSection = customizationBody.createDiv();
      const settingItem = skipSection.createDiv({ cls: "setting-item" });
      const info = settingItem.createDiv({ cls: "setting-item-info" });
      info.createDiv({ text: "Skip Toolkit Items", cls: "setting-item-name" });
      info.createDiv({
        text: "Files listed here will be ignored during toolkit updates.",
        cls: "setting-item-description"
      });
      const control = settingItem.createDiv({ cls: "setting-item-control" });
      const dropdown = new import_obsidian6.DropdownComponent(control);
      dropdown.selectEl.addClass("dropdownwidth");
      dropdown.addOption("", "Select an item\u2026");
      this.plugin.manifestCache.files.filter((f) => !f.optional).forEach((f) => dropdown.addOption(f.path, f.displayName ?? f.path.split("/").pop()));
      this.plugin.manifestCache.folders.filter((f) => !f.optional).forEach((f) => dropdown.addOption(f.path, (f.displayName ?? f.path.split("/").pop()) + "/ (folder)"));
      new import_obsidian6.ButtonComponent(control).setButtonText("Add").setCta().onClick(async () => {
        const key = dropdown.getValue();
        if (!key) return new import_obsidian6.Notice("Pick something to skip.");
        if (!this.plugin.settings.customPaths.some((c) => c.manifestKey === key)) {
          this.plugin.settings.customPaths.push({ vaultPath: key, manifestKey: key, doUpdate: false });
          await this.plugin.saveSettings();
          renderSkipTable();
        }
      });
      const skipTableWrapper = skipSection.createDiv({ cls: "vk-table-wrapper", attr: { style: "margin-top:0.75em" } });
      const renderSkipTable = () => {
        skipTableWrapper.empty();
        const items = this.plugin.settings.customPaths.filter((c) => !c.doUpdate);
        if (items.length === 0) {
          const emptyMsg = skipTableWrapper.createEl("div", { text: "No items skipped." });
          emptyMsg.addClass("settings-emptymsg");
          return;
        }
        const table = skipTableWrapper.createEl("table", { cls: "setting-table" });
        const header = table.createTHead().insertRow();
        header.insertCell().textContent = "Skipped Files/Folders";
        const body2 = table.createTBody();
        items.forEach((entry) => {
          const row = body2.insertRow();
          const contentCell = row.insertCell();
          contentCell.addClass("settings-filetable");
          contentCell.createSpan({ text: entry.manifestKey });
          const removeLink = contentCell.createEl("a", { text: "Remove entry", href: "#" });
          removeLink.addClass("settings-removelink");
          removeLink.onclick = async (e) => {
            e.preventDefault();
            this.plugin.settings.customPaths.remove(entry);
            await this.plugin.saveSettings();
            renderSkipTable();
          };
        });
      };
      renderSkipTable();
      customizationBody.createEl("div", {
        attr: { style: "height: 1em; border-top: 1px solid var(--divider-color); margin: 1em 0;" }
      });
      const remapSection = customizationBody.createDiv();
      const remapSetting = remapSection.createDiv({ cls: "setting-item" });
      const remapInfo = remapSetting.createDiv({ cls: "setting-item-info" });
      remapInfo.createDiv({ text: "Remap File Paths", cls: "setting-item-name" });
      remapInfo.createDiv({
        text: "Remap toolkit files vault paths if you chose to move anything. Moving files without remapping will result in duplicate and/or out-of-date files after update.",
        cls: "setting-item-description"
      });
      const remapControlBlock = remapSection.createDiv({ cls: "vk-inline-add-controls" });
      remapControlBlock.addClass("settings-remapcontrol");
      let remapDrop;
      let remapInput;
      remapDrop = new import_obsidian6.DropdownComponent(remapControlBlock);
      remapDrop.selectEl.addClass("dropdownwidth");
      remapDrop.addOption("", "Select an item\u2026");
      this.plugin.manifestCache.files.forEach(
        (f) => remapDrop.addOption(f.path, f.displayName ?? f.path.split("/").pop())
      );
      this.plugin.manifestCache.folders.forEach(
        (f) => remapDrop.addOption(f.path, (f.displayName ?? f.path.split("/").pop()) + "/ (folder)")
      );
      const searchWrapper = remapControlBlock.createDiv();
      const searchComponent = new import_obsidian6.SearchComponent(searchWrapper);
      searchComponent.setPlaceholder("Search vault path\u2026");
      new FilePathSuggester(this.app, searchComponent.inputEl);
      remapInput = searchComponent.inputEl;
      new import_obsidian6.ButtonComponent(remapControlBlock).setButtonText("Add Remap").setCta().onClick(async () => {
        const key = remapDrop.getValue();
        const vp = remapInput.value.trim();
        if (!key || !vp) return new import_obsidian6.Notice("Select an item and enter a vault path.");
        if (!this.app.vault.getAbstractFileByPath(vp)) return new import_obsidian6.Notice("Vault path not found.");
        this.plugin.settings.customPaths = this.plugin.settings.customPaths.filter((c) => c.manifestKey !== key);
        this.plugin.settings.customPaths.push({ manifestKey: key, vaultPath: vp, doUpdate: true });
        await this.plugin.saveSettings();
        remapInput.value = "";
        remapDrop.setValue("");
        renderRemapPanel();
      });
      const remapTableWrapper = remapSection.createDiv({ cls: "vk-table-wrapper", attr: { style: "margin-top: 0.75em" } });
      const renderRemapPanel = () => {
        remapTableWrapper.empty();
        const toRemap = this.plugin.settings.customPaths.filter((c) => c.doUpdate);
        if (toRemap.length === 0) {
          const emptyMsg = remapTableWrapper.createEl("div", { text: "No custom paths defined." });
          emptyMsg.addClass("settings-emptymsg");
          return;
        }
        const table = remapTableWrapper.createEl("table", { cls: "setting-table" });
        const head = table.createTHead().insertRow();
        ["Toolit Item", "New Vault Path", ""].forEach((txt) => head.insertCell().textContent = txt);
        const body2 = table.createTBody();
        toRemap.forEach((entry) => {
          const row = body2.insertRow();
          row.insertCell().textContent = entry.manifestKey;
          row.insertCell().textContent = entry.vaultPath;
          const removeCell = row.insertCell();
          const removeLink = removeCell.createEl("a", { text: "Remove entry", href: "#" });
          removeLink.addClass("settings-removelink");
          removeLink.onclick = async (e) => {
            e.preventDefault();
            this.plugin.settings.customPaths.remove(entry);
            await this.plugin.saveSettings();
            renderRemapPanel();
          };
        });
      };
      renderRemapPanel();
      customizationBody.createEl("div", {
        attr: {
          style: "border-top: 1px solid var(--divider-color); margin: 0.5em 0;"
        }
      });
      const behaviorDetails = containerEl.createEl("details", { cls: "vk-section" });
      keepOpen(behaviorDetails, "vv:behavior");
      const behaviorSummary = behaviorDetails.createEl("summary", { cls: "vk-section-header" });
      Object.assign(behaviorSummary.style, {
        display: "flex",
        flexDirection: "column",
        alignItems: "stretch",
        padding: "0.5em 0",
        borderBottom: "1px solid var(--divider-color)",
        cursor: "pointer"
      });
      const behaviorRow = behaviorSummary.createDiv({
        attr: { style: "display:flex; justify-content:space-between; align-items:flex-end;" }
      });
      const behaviorTitle = behaviorRow.createDiv({ attr: { style: "display:flex; flex-direction:column;" } });
      behaviorTitle.createEl("h5", { text: "Toolkit Behavior" });
      behaviorTitle.createEl("div", {
        text: "Fine-tune how the toolkit behaves during common workflows.",
        cls: "setting-item-description",
        attr: { style: "margin-top:0.25em;" }
      });
      const behaviorIcon = behaviorRow.createEl("span", { text: "VV", cls: "vk-toggle-icon" });
      Object.assign(behaviorIcon.style, {
        fontWeight: "bold",
        display: "inline-block",
        transition: "transform 0.2s ease",
        transformOrigin: "50% 50%",
        userSelect: "none"
      });
      wireRotate(behaviorDetails, behaviorIcon);
      const behaviorBody = behaviorDetails.createDiv({ cls: "vk-section-body" });
      behaviorBody.addClass("vv-pl-md");
      new import_obsidian6.Setting(behaviorBody).setName("Enable Page Previews in Sidebars").setDesc("If enabled, links in VVunderlore sidebars (VVorldbuilding, Gameplay) will show hover previews.").addToggle((toggle) => {
        toggle.setValue(this.plugin.settings.enableSidebarPreviews ?? false);
        toggle.onChange(async (val) => {
          this.plugin.settings.enableSidebarPreviews = val;
          await this.plugin.saveSettings();
          this.app.workspace.trigger("vv:sidebar-previews-changed", { enabled: val });
        });
      });
      new import_obsidian6.Setting(behaviorBody).setName("Sort Adventure Assets in Sidebar").setDesc("Choose how links are sorted (switch adventures in the sidebar to see the effect)").addDropdown((d) => {
        d.addOption("name", "Alphabetical");
        d.addOption("recent", "Most Recent");
        d.addOption("refs", "Most Linked");
        d.setValue(this.plugin.settings.adventureSort);
        d.onChange(async (v) => {
          this.plugin.settings.adventureSort = v;
          await this.plugin.saveSettings();
          this.app.workspace.trigger?.("vv:sidebar-refresh");
        });
      });
      const visibleCats = new import_obsidian6.Setting(behaviorBody).setName("Visible Adventure Categories").setDesc("Choose which categories appear in the Adventure sidebar (switch adventures in the sidebar to see the effect)");
      const panel = document.createElement("div");
      panel.className = "vk-section vk-inline-collapse";
      visibleCats.settingEl.insertAdjacentElement("afterend", panel);
      const body = panel.createDiv({ cls: "vk-section-body vv-pl-md" });
      const trigger = visibleCats.controlEl.createEl("button", {
        cls: "vv-cats-trigger"
      });
      trigger.setAttr("type", "button");
      trigger.createSpan({ text: "Categories  ", cls: "vv-cats-trigger-label" });
      let open = false;
      const setOpen = (v) => {
        open = v;
        panel.style.display = v ? "" : "none";
      };
      trigger.addEventListener("click", (e) => {
        e.preventDefault();
        setOpen(!open);
      });
      const ALL = getAdventureCategoryIds();
      const DEFAULT_SUBSET = ["npcs", "factions", "monsters", "history", "places"];
      const getSelection = () => new Set(
        Array.isArray(this.plugin.settings.enabledAdventureCategories) ? this.plugin.settings.enabledAdventureCategories : ALL
      );
      const save = async (sel) => {
        this.plugin.settings.enabledAdventureCategories = Array.from(sel);
        await this.plugin.saveSettings();
        this.app.workspace.trigger?.("vv:sidebar-refresh");
      };
      const render = () => {
        body.empty();
        const tools = body.createDiv({ attr: { style: "display:flex; gap:.5rem; margin-bottom:.5rem;" } });
        const mk = (label, act) => {
          const b = tools.createEl("button", { text: label, cls: "vv-cats-btn" });
          b.addEventListener("click", async (e) => {
            e.preventDefault();
            const sel2 = getSelection();
            if (label === "All") {
              ALL.forEach((id) => sel2.add(id));
            }
            if (label === "Defaults") {
              sel2.clear();
              DEFAULT_SUBSET.forEach((id) => sel2.add(id));
            }
            await save(sel2);
            render();
          });
        };
        mk("All", () => {
        });
        mk("Defaults", () => {
        });
        const grid = body.createDiv({ attr: { style: "display:grid; grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); gap:.25rem .75rem;" } });
        const sel = getSelection();
        ADVENTURE_CATEGORY_DEFS.forEach((cat) => {
          const row = grid.createEl("label", { attr: { style: "display:flex; align-items:center;" } });
          const cb = row.createEl("input", { type: "checkbox" });
          cb.checked = sel.has(cat.id);
          row.appendText(" " + cat.label);
          cb.addEventListener("change", async () => {
            const next = getSelection();
            if (cb.checked) next.add(cat.id);
            else next.delete(cat.id);
            await save(next);
          });
        });
      };
      render();
      setOpen(false);
      new import_obsidian6.Setting(behaviorBody).setName("Opening New Template Notes").setDesc("Choose how new notes from templates are opened when created from command or the sidebar").addDropdown((drop) => {
        drop.addOption("default", "Open the new note");
        drop.addOption("current", "Open but in the background");
        drop.addOption("background", "Create but don't open");
        drop.setValue(this.plugin.settings.templateOpenMode || "default");
        drop.onChange(async (val) => {
          this.plugin.settings.templateOpenMode = val;
          await this.plugin.saveSettings();
        });
      });
      new import_obsidian6.Setting(behaviorBody).setName("Session Template Naming").setDesc("When both a date and a name are entered in the New Session form, choose which one to use in the session note title. For example, 'Session 14 - Burning Down the Village' vs 'Session 14 - 4.5.63'").addDropdown((dd) => {
        dd.addOption("name", "Session Name");
        dd.addOption("date", "Date");
        dd.setValue(this.plugin.settings.sessionTitlePreference ?? "name");
        dd.onChange(async (val) => {
          this.plugin.settings.sessionTitlePreference = val;
          await this.plugin.saveSettings();
        });
      });
      new import_obsidian6.Setting(behaviorBody).setName("Hide toolbars in Embedded Bases").setDesc("Hides the toolbar in embeded bases (e.g, Player Character notes). This does not affect full Base views").addToggle((t) => {
        t.setValue(this.plugin.settings.hideBaseToolbar ?? false).onChange(async (v) => {
          this.plugin.settings.hideBaseToolbar = v;
          await this.plugin.saveSettings();
          this.plugin.applyBaseToolbarEmbedCSS();
        });
      });
      const highlightDetails = containerEl.createEl("details", { cls: "vk-section" });
      keepOpen(highlightDetails, "vv:highlight");
      const highlightSummary = highlightDetails.createEl("summary", { cls: "vk-section-header" });
      Object.assign(highlightSummary.style, {
        display: "flex",
        flexDirection: "column",
        alignItems: "stretch",
        padding: "0.5em 0",
        borderBottom: "1px solid var(--divider-color)",
        cursor: "pointer"
      });
      const highlightTitleRow = highlightSummary.createDiv({
        attr: {
          style: `
			display: flex;
			justify-content: space-between;
			align-items: flex-end;
			`
        }
      });
      const hlTitleBlock = highlightTitleRow.createDiv({
        attr: { style: "display: flex; flex-direction: column;" }
      });
      hlTitleBlock.createEl("h5", { text: "File Highlights" });
      hlTitleBlock.createEl("div", {
        text: "Toggle on/off the highlighting of Toolkit-specific files. Also make the highlights cool colors.",
        cls: "setting-item-description",
        attr: { style: "margin-top: 0.25em;" }
      });
      const hlToggleIcon = highlightTitleRow.createEl("span", { text: "VV", cls: "vk-toggle-icon" });
      Object.assign(hlToggleIcon.style, {
        fontWeight: "bold",
        display: "inline-block",
        transition: "transform 0.2s ease",
        transformOrigin: "50% 50%",
        userSelect: "none"
      });
      wireRotate(highlightDetails, hlToggleIcon);
      const highlightBody = highlightDetails.createDiv({ cls: "vk-section-body" });
      highlightBody.addClass("vv-pl-md");
      new import_obsidian6.Setting(highlightBody).setName("Enable File Highlighting").setDesc("Any file installed by VVunderlore will have this background.").addToggle((toggle) => {
        toggle.setValue(this.plugin.settings.highlightEnabled).onChange(async (enabled) => {
          this.plugin.settings.highlightEnabled = enabled;
          await this.plugin.saveSettings();
          if (enabled) {
            this.plugin.enableHighlight();
          } else {
            this.plugin.disableHighlight();
          }
          renderHighlightColorPickers();
        });
      });
      const colorPickerWrapper = highlightBody.createDiv();
      const renderHighlightColorPickers = () => {
        colorPickerWrapper.empty();
        if (!this.plugin.settings.highlightEnabled) {
          return;
        }
        new import_obsidian6.Setting(colorPickerWrapper).setName("Light Mode Highlight Color").setDesc("Choose the background color for files/folders in Light mode.").addColorPicker((picker) => {
          picker.setValue(this.plugin.settings.highlightColorLight).onChange(async (newColor) => {
            this.plugin.settings.highlightColorLight = newColor;
            await this.plugin.saveSettings();
            this.plugin.disableHighlight();
            this.plugin.enableHighlight();
          });
        });
        new import_obsidian6.Setting(colorPickerWrapper).setName("Dark Mode Highlight Color").setDesc("Choose the background color for files/folders in Dark mode.").addColorPicker((picker) => {
          picker.setValue(this.plugin.settings.highlightColorDark).onChange(async (newColor) => {
            this.plugin.settings.highlightColorDark = newColor;
            await this.plugin.saveSettings();
            this.plugin.disableHighlight();
            this.plugin.enableHighlight();
          });
        });
      };
      renderHighlightColorPickers();
      renderSkipTable();
      renderRemapPanel();
      const removeDemoSetting = new import_obsidian6.Setting(containerEl);
      removeDemoSetting.settingEl.addClass("vv-no-border-top");
      removeDemoSetting.setName("Remove Demo Files").setDesc("Delete every \u201Coptional\u201D demo file and folder from your vault.").addButton(
        (button) => button.setButtonText("Remove Demo Files").onClick(async () => {
          const optionalFileEntries = this.plugin.manifestCache.files.filter((f) => f.optional);
          const optionalFolderEntries = this.plugin.manifestCache.folders.filter((f) => f.optional);
          const totalCountFiles = optionalFileEntries.length;
          const totalCountFolders = optionalFolderEntries.length;
          const totalCount = totalCountFiles + totalCountFolders;
          if (totalCount === 0) {
            new import_obsidian6.Notice("No \u201Coptional\u201D demo files or folders to remove.");
            return;
          }
          const userConfirmed = await new Promise((resolve) => {
            const confirmModal = new class extends import_obsidian6.Modal {
              constructor(app) {
                super(app);
              }
              onOpen() {
                this.contentEl.empty();
                this.contentEl.createEl("h2", { text: "Confirm Removal" });
                this.contentEl.createEl("p", {
                  text: `This will permanently delete ${totalCountFiles} file(s) and ${totalCountFolders} folder(s). Continue?`
                });
                const btnRow = this.contentEl.createEl("div");
                Object.assign(btnRow.style, {
                  display: "flex",
                  justifyContent: "flex-end",
                  gap: "0.5em",
                  marginTop: "1.5em"
                });
                btnRow.createEl("button", { text: "Cancel" }).onclick = () => {
                  resolve(false);
                  this.close();
                };
                btnRow.createEl("button", { text: "Yes, Remove", cls: "mod-danger" }).onclick = () => {
                  resolve(true);
                  this.close();
                };
              }
              onClose() {
                this.contentEl.empty();
              }
            }(this.app);
            confirmModal.open();
          });
          if (!userConfirmed) {
            return;
          }
          let filesDeleted = 0;
          for (const fileEntry of optionalFileEntries) {
            const mapped = this.plugin.settings.customPaths.find((c) => c.manifestKey === fileEntry.key);
            const vaultPath = mapped?.vaultPath ?? fileEntry.path;
            if (await this.app.vault.adapter.exists(vaultPath)) {
              try {
                await this.app.vault.adapter.remove(vaultPath);
                filesDeleted++;
              } catch (err) {
                console.error(`Failed to delete optional file ${vaultPath}`, err);
              }
            }
          }
          let foldersDeleted = 0;
          for (const folderEntry of optionalFolderEntries) {
            const mapped = this.plugin.settings.customPaths.find((c) => c.manifestKey === folderEntry.key);
            const vaultFolderPath = mapped?.vaultPath ?? folderEntry.path;
            if (await this.app.vault.adapter.exists(vaultFolderPath)) {
              try {
                await this.app.vault.adapter.rmdir(vaultFolderPath, true);
                foldersDeleted++;
              } catch (err) {
                console.error(`Failed to delete optional folder ${vaultFolderPath}`, err);
              }
            }
          }
          this.plugin.settings.customPaths = this.plugin.settings.customPaths.filter((c) => {
            const isOptFile = optionalFileEntries.some((f) => f.key === c.manifestKey);
            const isOptFolder = optionalFolderEntries.some((f) => f.key === c.manifestKey);
            return !isOptFile && !isOptFolder;
          });
          await this.plugin.saveSettings();
          new import_obsidian6.Notice(`Deleted ${filesDeleted} file(s) and ${foldersDeleted} folder(s).`);
          this.display();
        })
      );
      const footer = containerEl.createDiv({ cls: "setting-item" });
      Object.assign(footer.style, {
        fontSize: "0.85em",
        color: "var(--text-muted)",
        marginTop: "1em"
      });
      footer.createEl("span", {
        text: `VVunderlore Toolkit Plugin v${this.plugin.manifest.version}   \u2022 `
      });
      footer.createEl("a", {
        text: "View on GitHub",
        href: "https://github.com/slamwise0001/vvunderlore-toolkit-plugin",
        attr: { target: "_blank" }
      });
      containerEl.scrollTop = savedScrollTop;
    })();
  }
  async updateVersionDisplay() {
    if (!this.versionValueEl || !this.forceWarningEl) return;
    let installed = "";
    try {
      const ver = await this.plugin.app.vault.adapter.read(".version.json");
      installed = JSON.parse(ver).version ?? "";
    } catch {
    }
    const latest = (this.plugin.settings.latestToolkitVersion ?? "").trim();
    const isMatch = installed === latest;
    this.versionValueEl.textContent = installed || "Not installed";
    this.versionValueEl.classList.remove("vv-success", "vv-error");
    this.versionValueEl.addClass(isMatch ? "vv-success" : "vv-error");
    if (this.latestValueEl) {
      this.latestValueEl.textContent = latest || "Could not fetch";
    }
    if (this.checkBtnEl) {
      this.checkBtnEl.textContent = installed && latest && installed !== latest ? "Preview Update" : "Check for Updates";
    }
    if (this.lastCheckedEl && this.plugin.settings.lastChecked) {
      this.lastCheckedEl.textContent = `Last checked: ${new Date(this.plugin.settings.lastChecked).toLocaleString()}`;
    }
    this.forceWarningEl.empty();
    if (installed && latest && installed !== latest) {
      const warn = this.forceWarningEl.createDiv({
        text: `\u26A0\uFE0F New version available (${installed} \u2192 ${latest}) \u2014 use regular update instead`
      });
      warn.addClass("vv-small", "vv-muted", "vv-italic");
      warn.setAttr("title", "Force updating while a new version is available may skip important changes.");
    }
    if (this.checkBtnEl) {
      const hasUpdate = Boolean(installed && latest && installed !== latest);
      this.checkBtnEl.dataset.state = hasUpdate ? "update" : "check";
      this.checkBtnEl.textContent = hasUpdate ? "Update Available!" : "Check for Updates";
      this.checkBtnEl.disabled = false;
    }
  }
};

// src/fileCacheManager.ts
var import_crypto = require("crypto");
var ToolkitFileCacheManager = class {
  constructor(vault, initialCache, saveCallback) {
    this.vault = vault;
    this.cache = initialCache || {};
    this.save = saveCallback;
  }
  hashContent(content) {
    return (0, import_crypto.createHash)("sha256").update(content).digest("hex");
  }
  async isUpToDate(vaultPath) {
    const entry = this.cache[vaultPath];
    if (!entry) {
      return false;
    }
    const exists = await this.vault.adapter.exists(vaultPath);
    if (!exists) {
      return false;
    }
    const content = await this.vault.adapter.read(vaultPath);
    const localHash = this.hashContent(content);
    const isSame = localHash === entry.hash;
    return isSame;
  }
  async updateCache(vaultPath, content, githubPath, saveNow = true) {
    this.cache[vaultPath] = {
      hash: this.hashContent(content),
      githubPath
    };
    if (saveNow) await this.save();
  }
  getCache() {
    return this.cache;
  }
  getTrackedFiles() {
    return Object.keys(this.cache);
  }
  getGitHubPath(vaultPath) {
    return this.cache[vaultPath]?.githubPath;
  }
  resetCache() {
    this.cache = {};
  }
  async removeFromCache(vaultPath) {
    delete this.cache[vaultPath];
    await this.save();
  }
};

// src/backup/BackupManager.ts
var import_obsidian7 = require("obsidian");
var import_path = require("path");
var BackupManager = class {
  constructor(app) {
    this.app = app;
  }
  async backupVaultMirror(label, maxFullBackups = 5) {
    const ts = (/* @__PURE__ */ new Date()).toISOString().replace(/[:.]/g, "-");
    const tag = label ? `-${label}` : "";
    const base = (0, import_obsidian7.normalizePath)(`.vault-backups/full/${ts}${tag}`);
    await this.ensureFolderExists(base);
    for (const file of this.app.vault.getFiles()) {
      const p = file.path;
      if (p.startsWith(".vault-backups/") || p.startsWith(`${this.app.vault.configDir}/`) || p.startsWith(".trash/") || p.startsWith(".git/")) {
        continue;
      }
      const target = (0, import_obsidian7.normalizePath)(`${base}/${p}`);
      await this.ensureFolderExists((0, import_path.dirname)(target));
      try {
        const data = await this.app.vault.adapter.readBinary(p);
        await this.app.vault.adapter.writeBinary(target, data);
      } catch (e) {
        console.error("[BackupManager] copy failed:", p, e);
      }
    }
    await this.pruneFullBackups(base, maxFullBackups);
    new import_obsidian7.Notice("\u2705 Backup complete!");
    return base;
  }
  /**
   * Legacy alias for mirror-based backups
   */
  async backupVaultToZip(label) {
    return this.backupVaultMirror(label);
  }
  /**
   * Deletes oldest full backup folders, keeping only the most recent `keep` snapshots.
   */
  async pruneFullBackups(currentPath, keep) {
    const root = (0, import_obsidian7.normalizePath)(".vault-backups/full");
    await this.ensureFolderExists(root);
    const listing = await this.app.vault.adapter.list(root);
    const folderPaths = listing?.folders ?? [];
    const names = folderPaths.map((f) => (0, import_path.basename)(f));
    const sorted = [...names].sort((a, b) => b.localeCompare(a));
    const toRemove = sorted.slice(keep);
    for (const name of toRemove) {
      const vaultPath = (0, import_obsidian7.normalizePath)(`${root}/${name}`);
      try {
        await this.app.vault.adapter.rmdir(vaultPath, true);
      } catch (e) {
        console.error("[BackupManager] prune failed:", vaultPath, e);
      }
    }
  }
  /**
   * Recursively ensures that a directory exists in the vault.
   */
  async ensureFolderExists(folderPath) {
    if (!folderPath || await this.app.vault.adapter.exists(folderPath)) {
      return;
    }
    const parent = (0, import_path.dirname)(folderPath);
    await this.ensureFolderExists(parent);
    await this.app.vault.createFolder(folderPath);
  }
};

// src/sidebar/sb-worldbuilding.ts
var import_obsidian8 = require("obsidian");
function getToolkit(app) {
  const pm = app.plugins;
  return pm.getPlugin?.("vvunderlore-toolkit-plugin") || pm.getPlugin?.("vvunderlore-toolkit") || Object.values(pm.plugins || {}).find(
    (p) => p?.manifest?.id?.startsWith?.("vvunderlore-toolkit")
  );
}
var SIDEBAR_VIEW_TYPE = "vvunderlore-templates-sidebar";
function getFullCommandId(app, shortId) {
  if (shortId.includes(":")) return shortId;
  const registry = app.commands?.commands || {};
  const match = Object.keys(registry).find((k) => k.endsWith(`:${shortId}`));
  if (match) return match;
  const plugin = getToolkit(app);
  return plugin?.manifest?.id ? `${plugin.manifest.id}:${shortId}` : shortId;
}
function captureSelectionOrWord(app, sidebar) {
  return sidebar.lastSelection;
}
var TEMPLATE_BUTTONS = [
  { label: "New Adventure", path: "Extras/Templates/newadventure_template.md" },
  { label: "New PC", commandId: "vv-new-pc" },
  { label: "New NPC", commandId: "vv-new-npc" },
  { label: "New Item", commandId: "vv-new-item" },
  { label: "New Place", commandId: "vv-new-place" },
  { label: "New Creature", commandId: "vv-new-creature" }
];
var SCHOOL_ABBR = {
  Abjuration: "Abj.",
  Conjuration: "Conj.",
  Divination: "Div.",
  Enchantment: "Ench.",
  Evocation: "Envo.",
  Illusion: "Illu.",
  Necromancy: "Nec.",
  Transmutation: "Trans."
};
var DAMAGE_ABBR = {
  acid: "Acid",
  cold: "Cold",
  fire: "Fire",
  force: "Force",
  lightning: "Ltng.",
  necrotic: "Necro",
  poison: "Pois.",
  psychic: "Psyc.",
  radiant: "Radi.",
  thunder: "Thun.",
  bludgeoning: "Bludg.",
  piercing: "Pierce",
  slashing: "Slash"
};
var SidebarTemplatesView = class extends import_obsidian8.ItemView {
  constructor(leaf) {
    super(leaf);
    this.lastSelection = null;
    this.spellSortKey = "name";
    this.spellSortDir = 1;
    // ── Selected Spells (memory only; no persistence) ───────────────────
    this.picks = [];
    this.addBtnByPath = /* @__PURE__ */ new Map();
  }
  getViewType() {
    return SIDEBAR_VIEW_TYPE;
  }
  getDisplayText() {
    return "VVorldbuiling";
  }
  getIcon() {
    return "mapmaking";
  }
  buildDataviewForPicks() {
    const paths = this.picks.map((p) => `"${p.replace(/"/g, '\\"')}"`).join(", ");
    return [
      "```dataview",
      "TABLE",
      '  level AS "Lvl",',
      '  school AS "School",',
      '  damage_type AS "Damage",',
      '  range AS "Range",',
      '  casting_time AS "Casting Time"',
      "WHERE contains([" + paths + "], file.path)",
      "SORT level ASC, name ASC",
      "```"
    ].join("\n");
  }
  _rewirePreviews() {
    const enablePreview = !!getToolkit(this.app)?.settings?.enableSidebarPreviews;
    const wrap = this.contentEl;
    const pagePreview = this.app.internalPlugins?.getPluginById?.("page-preview")?.instance;
    if (wrap._vvHoverWired && !enablePreview) {
      const prev = wrap._vvHoverHandler;
      if (prev) wrap.removeEventListener("mousemove", prev);
      delete wrap._vvHoverWired;
      delete wrap._vvHoverHandler;
    }
    if (enablePreview && pagePreview?.onLinkHover && !wrap._vvHoverWired) {
      const handler = (ev) => {
        const t = ev.target;
        const a = t?.closest("a.internal-link");
        if (!a) return;
        const linkText = a.getAttribute("data-href") || a.getAttribute("href");
        if (!linkText) return;
        pagePreview.onLinkHover(ev, a, linkText, "");
      };
      wrap.addEventListener("mousemove", handler);
      wrap._vvHoverWired = true;
      wrap._vvHoverHandler = handler;
    }
  }
  buildIncomingRefCounts() {
    const incoming = /* @__PURE__ */ new Map();
    const resolved = this.app.metadataCache.resolvedLinks;
    for (const from in resolved) {
      const toMap = resolved[from];
      for (const to in toMap) {
        incoming.set(to, (incoming.get(to) || 0) + (toMap[to] || 1));
      }
    }
    return incoming;
  }
  renderPicks() {
    const picksDiv = this.containerEl.find("#spellbook-picks");
    if (!picksDiv) return;
    picksDiv.empty();
    const wrapper = picksDiv.createDiv();
    wrapper.setAttr("style", [
      "border:1.5px solid black",
      "border-radius:6px",
      "padding:8px",
      "margin-top:8px",
      "background:var(--background-secondary)"
    ].join(";"));
    const details = wrapper.createEl("details", { attr: { open: "true" } });
    const summary = details.createEl("summary", { text: "Selected Spells" });
    summary.setAttr("style", [
      "font-size:1.1em",
      "font-weight:600",
      "margin:0 0 4px",
      "cursor:pointer",
      "padding:4px 8px",
      "background:var(--background-secondary)",
      "border-radius:4px"
    ].join(";"));
    const body = details.createDiv();
    const grid = body.createDiv();
    grid.setAttr("style", [
      "display:grid",
      "grid-template-columns:1fr",
      "row-gap:2px",
      "margin:8px 0",
      "padding:0 16px"
      //sidepadding
    ].join(";"));
    if (!this.picks.length) {
      const empty = grid.createEl("div", { text: "No spells selected yet." });
      empty.setAttr("style", "opacity:0.7;");
    } else {
      for (const path2 of this.picks) {
        const file = this.app.vault.getAbstractFileByPath(path2);
        const row = grid.createDiv();
        row.setAttr("style", [
          "display:flex",
          "align-items:center",
          "justify-content:space-between",
          "gap:8px",
          "padding:2px 0"
        ].join(";"));
        const nameLink = row.createEl("a", {
          text: (() => {
            if (file instanceof import_obsidian8.TFile) {
              const fm = this.app.metadataCache.getFileCache(file)?.frontmatter;
              return fm?.name || file.basename;
            }
            const base = path2.split("/").pop() || path2;
            return base.replace(/\.md$/, "");
          })(),
          href: "#"
        });
        const enablePreview = !!getToolkit(this.app)?.settings?.enableSidebarPreviews;
        if (enablePreview) {
          if (file instanceof import_obsidian8.TFile) {
            nameLink.classList.add("internal-link");
            nameLink.setAttr("data-href", file.path);
            nameLink.setAttr("href", file.path);
          }
        }
        nameLink.setAttr("style", "font-weight:600; text-decoration:none; color:var(--text-accent);");
        nameLink.addEventListener("click", (e) => {
          e.preventDefault();
          this.app.workspace.openLinkText(path2, "", false);
        });
        const rmBtn = row.createEl("span", { text: "\xD7" });
        rmBtn.setAttr("style", "cursor:pointer; font-size:1.2em; line-height:1;");
        rmBtn.addEventListener("click", async (e) => {
          e.preventDefault();
          this.picks = this.picks.filter((p) => p !== path2);
          const btn = this.addBtnByPath.get(path2);
          if (btn) {
            btn.disabled = false;
            btn.textContent = "\uFF0B";
          }
          this.renderPicks();
        });
      }
    }
    const actions = body.createDiv();
    actions.setAttr(
      "style",
      "display:flex;gap:8px;justify-content:flex-end;margin-top:4px;"
    );
    const clearBtn = actions.createEl("button", { text: "Clear" });
    clearBtn.setAttr("style", "opacity:0.9;");
    clearBtn.addEventListener("click", (e) => {
      e.preventDefault();
      this.picks = [];
      this.addBtnByPath.forEach((btn) => {
        if (!btn.isConnected) return;
        btn.disabled = false;
        btn.textContent = "\uFF0B";
      });
      this.renderPicks();
    });
    const copyBtn = actions.createEl("button", { text: "Copy Grimoire" });
    copyBtn.classList.add("mod-cta");
    copyBtn.toggleAttribute("disabled", this.picks.length === 0);
    copyBtn.addEventListener("click", async (e) => {
      e.preventDefault();
      if (!this.picks.length) return;
      const md = this.buildDataviewForPicks();
      try {
        await navigator.clipboard.writeText(md);
        new import_obsidian8.Notice("\u{1F4DC} Grimoire table copied to clipboard.");
      } catch {
        const ta = body.createEl("textarea", { text: md });
        ta.setAttr("style", "width:100%;height:220px;margin-top:8px;");
        ta.select();
        new import_obsidian8.Notice("Clipboard blocked. Dataview shown below\u2014copy manually.");
      }
    });
  }
  async onOpen() {
    this.contentEl.empty();
    this.registerEvent(
      this.app.workspace.on("editor-selection-change", (editor, view) => {
        const text = editor.getSelection();
        this.lastSelection = {
          text,
          filePath: view.file.path,
          from: editor.getCursor("from"),
          to: editor.getCursor("to"),
          preText: editor.getValue()
        };
      })
    );
    this.picks = [];
    this.addBtnByPath.clear();
    this.contentEl.createEl("h4", { text: "TEMPLATES" });
    const btnContainer = this.contentEl.createDiv();
    btnContainer.addClass("sb-btn");
    for (const def of TEMPLATE_BUTTONS) {
      const btnEl = btnContainer.createEl("button", { text: def.label });
      btnEl.style.flex = "1";
      btnEl.style.minWidth = "120px";
      let originLeaf;
      btnEl.addEventListener("pointerdown", () => {
        const plugin = getToolkit(this.app);
        const ctx = captureSelectionOrWord(this.app, this);
        if (ctx) plugin?.setPendingSelectionContext?.(ctx);
        originLeaf = this.app.workspace.activeLeaf ?? void 0;
        console.log("\u{1F7E3} [pointerdown] Captured originLeaf:", originLeaf?.view instanceof import_obsidian8.MarkdownView ? originLeaf.view.file?.path : "(none)");
      });
      btnEl.addEventListener("click", () => {
        if ("commandId" in def) {
          const fullId = getFullCommandId(this.app, def.commandId);
          const cmd = this.app.commands.findCommand(fullId);
          if (!cmd) {
            new import_obsidian8.Notice(`Command not found: ${fullId}`);
            return;
          }
          this.app.commands.executeCommandById(fullId);
        } else {
          console.log("\u{1F7E3} [click] Running template with originLeaf:", originLeaf?.view instanceof import_obsidian8.MarkdownView ? originLeaf.view.file?.path : "(none)");
          this.runTemplate(def.path, originLeaf);
        }
      });
    }
    this.contentEl.createEl("hr", { attr: { style: "margin: 12px 0;" } });
    const advDetails = this.contentEl.createEl("details", { attr: { open: "true" } });
    const advSummary = advDetails.createEl("summary", { text: "ADVENTURES" });
    advSummary.setAttr("style", "font-size: 1.3em; font-weight: 600; margin: 0.5em 0;");
    const advContainer = advDetails.createDiv({ attr: { style: "margin:8px 0;" } });
    new import_obsidian8.Setting(advContainer).setName("Filter by Adventure:").addDropdown((drop) => {
      const names = Array.from(new Set(
        this.app.vault.getFiles().filter((f) => f.path.startsWith("Adventures/")).map((f) => f.path.split("/")[1])
      ));
      drop.addOption("", "\u2014 pick one \u2014");
      names.forEach((n) => drop.addOption(n, n));
      drop.onChange(async (adv) => {
        advContainer.findAll(".vvunderlore-adventure-assets").forEach((el) => el.remove());
        const wrapper = advContainer.createDiv({ cls: "vvunderlore-adventure-assets" });
        if (!adv) return;
        const quick = wrapper.createDiv();
        quick.setAttr("style", "display:flex;justify-content:center;gap:20px;flex-wrap:wrap;margin:6px 0 10px;");
        const hubExactPath = `Adventures/${adv}/${adv} - Adventure Hub.md`;
        let hubFile = null;
        const exact = this.app.vault.getAbstractFileByPath(hubExactPath);
        if (exact instanceof import_obsidian8.TFile) {
          hubFile = exact;
        } else {
          hubFile = this.app.vault.getFiles().find(
            (f) => f.path.startsWith(`Adventures/${adv}/`) && f.parent?.path === `Adventures/${adv}` && f.basename.toLowerCase().includes("adventure hub")
          ) ?? null;
        }
        if (hubFile) {
          const hubLink = quick.createEl("a", { text: "Adventure Hub", href: "#" });
          hubLink.addClass("sb-adv-nav");
          hubLink.addEventListener("click", (e) => {
            e.preventDefault();
            this.app.workspace.openLinkText(hubFile.path, "", false);
          });
          const enablePreview = !!getToolkit(this.app)?.settings?.enableSidebarPreviews;
          if (enablePreview) {
            const p = hubFile.path;
            hubLink.classList.add("internal-link");
            hubLink.setAttr("data-href", p);
            hubLink.setAttr("href", p);
          }
        }
        const sessionDir = `Adventures/${adv}/Session Notes/`;
        const sessionFiles = this.app.vault.getFiles().filter((f) => f.path.startsWith(sessionDir));
        if (sessionFiles.length) {
          sessionFiles.sort((a, b) => b.stat.mtime - a.stat.mtime);
          const latest = sessionFiles[0];
          const sessionLink = quick.createEl("a", { text: "Most Recent Session", href: "#" });
          sessionLink.addClass("sb-adv-nav");
          sessionLink.addEventListener("click", (e) => {
            e.preventDefault();
            this.app.workspace.openLinkText(latest.path, "", false);
          });
          const enablePreview = !!getToolkit(this.app)?.settings?.enableSidebarPreviews;
          if (enablePreview) {
            const p = latest.path;
            sessionLink.classList.add("internal-link");
            sessionLink.setAttr("data-href", p);
            sessionLink.setAttr("href", p);
          }
        }
        const list = wrapper.createDiv();
        await this.showAdventureAssets(adv, list);
      });
    });
    this.contentEl.createEl("hr");
    await this.showSpellbookSection();
    this._rewirePreviews();
    this.registerEvent(
      this.app.workspace.on("vv:sidebar-previews-changed", (_data) => {
        this._rewirePreviews();
      })
    );
  }
  async onClose() {
    this.picks = [];
    this.addBtnByPath.clear();
    this.contentEl.empty();
    if (this._ddCloser) {
      document.removeEventListener("pointerdown", this._ddCloser, true);
      this._ddCloser = void 0;
    }
  }
  async runTemplate(path2, originLeaf) {
    originLeaf?.view instanceof import_obsidian8.MarkdownView ? originLeaf.view.file?.path : "(none)";
    const plugin = getToolkit(this.app);
    if (!plugin) {
      new import_obsidian8.Notice("\u26A0\uFE0F VVunderlore Toolkit plugin not found.");
      return;
    }
    await plugin.runSBTemplate(path2, originLeaf);
  }
  //-------+++++++++++ ADVENTURE FILTER
  async showAdventureAssets(adventureName, renderInto) {
    const prefix = `Adventures/${adventureName}/`;
    const files = this.app.vault.getFiles().filter((f) => f.path.startsWith(prefix));
    const linkedPaths = /* @__PURE__ */ new Set();
    for (const file of files) {
      const cache = this.app.metadataCache.getFileCache(file);
      (cache?.links || []).forEach((link) => {
        const dest = this.app.metadataCache.getFirstLinkpathDest(link.link, file.path);
        if (dest) linkedPaths.add(dest.path);
      });
    }
    renderInto.empty();
    if (linkedPaths.size === 0) {
      renderInto.createEl("div", { text: "No linked pages found." });
      return;
    }
    const catById = new Map(ADVENTURE_CATEGORY_DEFS.map((d) => [d.id, d]));
    const groups = {};
    for (const fullPath of linkedPaths) {
      let id = "other";
      for (const def of ADVENTURE_CATEGORY_DEFS) {
        if (def.test && def.test.test(fullPath)) {
          id = def.id;
          break;
        }
      }
      (groups[id] || (groups[id] = [])).push(fullPath);
    }
    const plugin = getToolkit(this.app);
    const enabledIds = new Set(
      Array.isArray(plugin?.settings?.enabledAdventureCategories) ? plugin.settings.enabledAdventureCategories : getAdventureCategoryIds()
    );
    const sortMode = getToolkit(this.app)?.settings?.adventureSort ?? "name";
    const incoming = this.buildIncomingRefCounts();
    for (const sectionId of Object.keys(groups).sort((a, b) => {
      const la = catById.get(a)?.label ?? a;
      const lb = catById.get(b)?.label ?? b;
      return la.localeCompare(lb, void 0, { sensitivity: "base" });
    })) {
      if (!enabledIds.has(sectionId)) continue;
      const label = catById.get(sectionId)?.label ?? sectionId;
      const details = renderInto.createEl("details", { attr: { open: "true" } });
      const summary = details.createEl("summary", { text: label });
      summary.addClass("sb-summary");
      const grid = details.createDiv();
      grid.addClass("sb-adv-grid");
      const paths = groups[sectionId].slice();
      paths.sort((a, b) => {
        if (sortMode === "recent") {
          const af = this.app.vault.getAbstractFileByPath(a);
          const bf = this.app.vault.getAbstractFileByPath(b);
          const am = (af instanceof import_obsidian8.TFile ? af.stat.mtime : 0) || 0;
          const bm = (bf instanceof import_obsidian8.TFile ? bf.stat.mtime : 0) || 0;
          if (bm !== am) return bm - am;
        } else if (sortMode === "refs") {
          const ar = incoming.get(a) || 0;
          const br = incoming.get(b) || 0;
          if (br !== ar) return br - ar;
          const af = this.app.vault.getAbstractFileByPath(a);
          const bf = this.app.vault.getAbstractFileByPath(b);
          const am = (af instanceof import_obsidian8.TFile ? af.stat.mtime : 0) || 0;
          const bm = (bf instanceof import_obsidian8.TFile ? bf.stat.mtime : 0) || 0;
          if (bm !== am) return bm - am;
        }
        const aName = a.split("/").pop().replace(/\.md$/, "").toLowerCase();
        const bName = b.split("/").pop().replace(/\.md$/, "").toLowerCase();
        return aName.localeCompare(bName);
      });
      paths.forEach((path2) => {
        const name = path2.split("/").pop().replace(/\.md$/, "");
        const linkEl = grid.createEl("a", { text: name, href: "#" });
        linkEl.addClass("sb-adv-links");
        linkEl.addEventListener("click", () => {
          this.app.workspace.openLinkText(path2, "", false);
        });
        const enablePreview = !!getToolkit(this.app)?.settings?.enableSidebarPreviews;
        if (enablePreview) {
          linkEl.classList.add("internal-link");
          linkEl.setAttr("data-href", path2);
          linkEl.setAttr("href", path2);
        }
      });
    }
  }
  //---------_++++++++++ SPELLBOOK
  async showSpellbookSection() {
    const sbDetails = this.contentEl.createEl("details");
    sbDetails.createEl("summary", { text: "SPELLBOOK" }).setAttr("style", "font-size:1.3em;font-weight:600;margin:0.5em 0;");
    const container = sbDetails.createDiv({
      attr: { style: "display:flex;flex-direction:column;gap:8px;margin:8px 0;" }
    });
    const spellFiles = this.app.vault.getMarkdownFiles().filter((f) => f.path.startsWith("Compendium/Spells"));
    const levels = /* @__PURE__ */ new Set();
    const schools = /* @__PURE__ */ new Set();
    const damages = /* @__PURE__ */ new Set();
    for (const f of spellFiles) {
      const fm = this.app.metadataCache.getFileCache(f)?.frontmatter;
      if (!fm) continue;
      if (typeof fm.level === "number") levels.add(fm.level);
      if (typeof fm.school === "string") schools.add(fm.school);
      if (typeof fm.damage_type === "string") damages.add(fm.damage_type);
    }
    const filters = container.createDiv({
      attr: { style: "display:flex; gap:16px; margin-bottom:12px;" }
    });
    const makeCheckboxDropdown = (title, items) => {
      const wrapper = filters.createEl("details");
      wrapper.classList.add("sb-dd");
      const summary = wrapper.createEl("summary");
      summary.classList.add("sb-dd__button");
      summary.setText(`${title} (0)`);
      summary.setAttr("tabindex", "0");
      summary.setAttr("role", "button");
      summary.setAttr("aria-expanded", "false");
      const toggleOpen = () => {
        wrapper.open = !wrapper.open;
        summary.setAttr("aria-expanded", String(wrapper.open));
      };
      summary.addEventListener("click", (e) => {
        e.preventDefault();
        e.stopPropagation();
        toggleOpen();
      });
      summary.addEventListener("keydown", (e) => {
        if (e.key === "Enter" || e.key === " ") {
          e.preventDefault();
          toggleOpen();
        }
      });
      const panel = wrapper.createEl("div");
      panel.classList.add("sb-dd__panel");
      panel.addEventListener("click", (evt) => evt.stopPropagation());
      const inputs = [];
      for (const { value, label } of items) {
        const row = panel.createEl("label");
        row.classList.add("sb-dd__item");
        const cb = row.createEl("input", { attr: { type: "checkbox", value } });
        inputs.push(cb);
        row.createEl("span", { text: label });
        cb.addEventListener("change", () => {
          const count = inputs.filter((i) => i.checked).length;
          summary.setText(`${title} (${count})`);
        });
      }
      return {
        wrapper,
        getSelected: () => inputs.filter((i) => i.checked).map((i) => i.value)
      };
    };
    const concRow = container.createDiv({
      attr: {
        style: "display:flex; justify-content:center; margin:-6px 0 6px 0;"
      }
    });
    const concLabel = concRow.createEl("label", {
      attr: { style: "display:inline-flex; align-items:center; gap:8px; cursor:pointer;" }
    });
    concLabel.createSpan({ text: "Include Concentration Spells?" });
    const concChk = concLabel.createEl("input", { attr: { type: "checkbox" } });
    concChk.checked = true;
    const levelItems = Array.from(levels).sort((a, b) => a - b).map((lvl) => ({ value: `${lvl}`, label: lvl === 0 ? "Cantrip" : `Level ${lvl}` }));
    const schoolItems = Array.from(schools).sort().map((sch) => ({ value: sch, label: sch }));
    const damageItems = Array.from(damages).sort().map((dmg) => ({ value: dmg, label: dmg }));
    const { wrapper: lvlDD, getSelected: getLevels } = makeCheckboxDropdown("Levels", levelItems);
    const { wrapper: schoolDD, getSelected: getSchools } = makeCheckboxDropdown("Schools", schoolItems);
    const { wrapper: dmgDD, getSelected: getDamages } = makeCheckboxDropdown("Damage", damageItems);
    if (!this._ddCloser) {
      this._ddCloser = (evt) => {
        for (const dd of [lvlDD, schoolDD, dmgDD]) {
          if (dd.open && !dd.contains(evt.target)) {
            dd.open = false;
            dd.querySelector("summary")?.setAttr("aria-expanded", "false");
          }
        }
      };
      document.addEventListener("pointerdown", this._ddCloser, true);
    }
    const btnWrap = container.createDiv({
      attr: { style: "display:flex; justify-content:center; margin-bottom:8px;" }
    });
    const goBtn = btnWrap.createEl("button", { text: "Go", cls: "mod-cta" });
    goBtn.setAttr("style", "flex:1;");
    goBtn.addEventListener("click", () => {
      this.renderTable(getLevels(), getSchools(), getDamages(), concChk.checked);
      ;
    });
    const clearBtn = btnWrap.createEl("button", { text: "Clear Filters and Reset" });
    clearBtn.setAttr("style", "flex:1; margin-left:8px;");
    clearBtn.addEventListener("click", () => {
      [
        [lvlDD, "Levels"],
        [schoolDD, "Schools"],
        [dmgDD, "Damage"]
      ].forEach(([dd, title]) => {
        dd.querySelectorAll("input[type=checkbox]").forEach((cb) => cb.checked = false);
        dd.querySelector("summary")?.setText(`${title} (0)`);
        dd.open = false;
      });
      concChk.checked = true;
      const tableDiv = container.find("#spellbook-table");
      if (tableDiv) tableDiv.empty();
    });
    container.createEl("div", { attr: { id: "spellbook-picks" } });
    container.createEl("div", { attr: { id: "spellbook-table" } });
    this.renderPicks();
  }
  renderTable(selectedLevels, selectedSchools, selectedDamages, includeConcentration) {
    const tableDiv = this.containerEl.find("#spellbook-table");
    if (!tableDiv) return;
    tableDiv.replaceChildren();
    this.addBtnByPath.clear();
    const allSpells = this.app.vault.getMarkdownFiles().filter((f) => f.path.startsWith("Compendium/Spells"));
    const filtered = allSpells.filter((f) => {
      const fm = this.app.metadataCache.getFileCache(f)?.frontmatter;
      if (!fm) return false;
      const lvl = String(fm.level);
      const sch = String(fm.school);
      const dmgRaw = typeof fm.damage_type === "string" ? fm.damage_type : "";
      const isConc = fm.concentration === true || String(fm.concentration ?? "").toLowerCase() === "true";
      if (!includeConcentration && isConc) return false;
      return (!selectedLevels.length || selectedLevels.includes(lvl)) && (!selectedSchools.length || selectedSchools.includes(sch)) && (!selectedDamages.length || selectedDamages.includes(dmgRaw));
    });
    filtered.sort((a, b) => {
      const fa = this.app.metadataCache.getFileCache(a).frontmatter;
      const fb = this.app.metadataCache.getFileCache(b).frontmatter;
      let va, vb;
      switch (this.spellSortKey) {
        case "level":
          va = fa.level ?? 0;
          break;
        case "school":
          va = String(fa.school ?? "").toLowerCase();
          break;
        case "damage":
          va = String(fa.damage_type ?? "").toLowerCase();
          break;
        default:
          va = String(fa.name ?? a.basename).toLowerCase();
      }
      switch (this.spellSortKey) {
        case "level":
          vb = fb.level ?? 0;
          break;
        case "school":
          vb = String(fb.school ?? "").toLowerCase();
          break;
        case "damage":
          vb = String(fb.damage_type ?? "").toLowerCase();
          break;
        default:
          vb = String(fb.name ?? b.basename).toLowerCase();
      }
      if (va < vb) return -1 * this.spellSortDir;
      if (va > vb) return 1 * this.spellSortDir;
      return 0;
    });
    const table = tableDiv.createEl("table");
    table.setAttr("style", "width:100%;border-collapse:collapse;");
    const headerRow = table.createEl("tr");
    headerRow.setAttr("style", "display:flex;");
    const actTh = headerRow.createEl("th");
    actTh.setAttr("style", [
      "flex:0 0 28px",
      "padding:4px",
      "text-align:left"
    ].join(";"));
    const columns = [
      { label: "Name", key: "name", flex: 2 },
      { label: "Lvl", key: "level", flex: 1 },
      { label: "School", key: "school", flex: 1 },
      { label: "Dmg Type", key: "damage", flex: 1 },
      { label: "Conc.", flex: 1 }
    ];
    for (const { label, key, flex } of columns) {
      const th = headerRow.createEl("th");
      th.setText(label);
      th.setAttr(
        "style",
        [
          `flex:${flex}`,
          "padding:4px",
          label === "Name" ? "text-align:left" : "text-align:center",
          key ? "cursor:pointer" : ""
        ].join(";")
      );
      if (key) {
        th.addEventListener("click", () => {
          if (this.spellSortKey === key) {
            this.spellSortDir = this.spellSortDir === 1 ? -1 : 1;
          } else {
            this.spellSortKey = key;
            this.spellSortDir = 1;
          }
          this.renderTable(selectedLevels, selectedSchools, selectedDamages, includeConcentration);
        });
      }
    }
    let found = 0;
    for (const f of filtered) {
      const fm = this.app.metadataCache.getFileCache(f).frontmatter;
      const lvl = String(fm.level);
      const sch = String(fm.school);
      const dmgRaw = typeof fm.damage_type === "string" ? fm.damage_type : "";
      const row = table.createEl("tr");
      row.setAttr("style", "display:flex;");
      const actTd = row.createEl("td");
      actTd.setAttr(
        "style",
        "flex:0 0 28px; padding:0; display:flex; align-items:center; justify-content:center;"
      );
      const addBtn = actTd.createEl("button", { text: "\uFF0B" });
      addBtn.addClass("sb-spelladd-btn");
      this.addBtnByPath.set(f.path, addBtn);
      if (this.picks.includes(f.path)) {
        addBtn.textContent = "\u2713";
        addBtn.disabled = true;
      }
      addBtn.addEventListener("click", (e) => {
        e.preventDefault();
        if (this.picks.includes(f.path)) {
          new import_obsidian8.Notice("Already in Selected Spells.");
          return;
        }
        this.picks.push(f.path);
        addBtn.textContent = "\u2713";
        addBtn.disabled = true;
        this.renderPicks();
      });
      const nameTd = row.createEl("td");
      nameTd.setAttr("style", "flex:2;padding:4px;");
      const link = nameTd.createEl("a", { attr: { href: "#" } });
      link.setText(fm.name || f.basename);
      const enablePreview = !!getToolkit(this.app)?.settings?.enableSidebarPreviews;
      if (enablePreview) {
        link.classList.add("internal-link");
        link.setAttr("data-href", f.path);
        link.setAttr("href", f.path);
      }
      link.addEventListener("click", (e) => {
        e.preventDefault();
        this.app.workspace.openLinkText(f.path, "", false);
      });
      const lvlTd = row.createEl("td");
      lvlTd.setAttr("style", "flex:1; display:flex; align-items:center; justify-content:center; padding:4px;");
      lvlTd.createSpan({ text: lvl === "0" ? "Cantrip" : lvl });
      const schTd = row.createEl("td");
      schTd.setAttr("style", "flex:1; display:flex; align-items:center; justify-content:center; padding:4px;");
      schTd.createSpan({ text: SCHOOL_ABBR[sch] ?? sch.slice(0, 3) });
      const dmgTd = row.createEl("td");
      dmgTd.setAttr("style", "flex:1; display:flex; align-items:center; justify-content:center; padding:4px;");
      dmgTd.createSpan({ text: dmgRaw ? DAMAGE_ABBR[dmgRaw] ?? dmgRaw.slice(0, 3) : "\u2014" });
      const concTd = row.createEl("td");
      concTd.setAttr(
        "style",
        "flex:1; display:flex; align-items:center; justify-content:center; padding:4px;"
      );
      const isConc = fm.concentration === true || String(fm.concentration ?? "").toLowerCase() === "true";
      concTd.createSpan({ text: isConc ? "\u2713" : "\u2014" });
      found++;
    }
    if (!found) {
      tableDiv.createEl("p").setText("No spells match your filter criteria.");
    }
  }
};

// src/sidebar/sb-gameplay.ts
var import_obsidian9 = require("obsidian");
var GAMEPLAY_VIEW_TYPE = "vvunderlore-gameplay";
function getToolkit2(app) {
  return app.plugins.getPlugin("vvunderlore-toolkit") || app.plugins.plugins?.["vvunderlore-toolkit"];
}
var ALIGN_ABBR = {
  "lawful good": "LG",
  "neutral good": "NG",
  "chaotic good": "CG",
  "lawful neutral": "LN",
  "true neutral": "N",
  "neutral": "N",
  "chaotic neutral": "CN",
  "lawful evil": "LE",
  "neutral evil": "NE",
  "chaotic evil": "CE"
};
var ABILITY_ABBR = {
  strength: "STR",
  dexterity: "DEX",
  constitution: "CON",
  intelligence: "INT",
  wisdom: "WIS",
  charisma: "CHA"
};
var possessive = (n) => {
  const t = (n ?? "").trim();
  if (!t) return "";
  return /s$/i.test(t) ? `${t}'` : `${t}'s`;
};
function sanitizeSpeed(raw) {
  if (!raw) return "\u2014";
  const lower = raw.toLowerCase();
  const walkMatch = lower.match(/walk\s+(\d+)/);
  const walk = walkMatch ? walkMatch[1] : "";
  const flyMatch = lower.match(/fly\s+(\d+)/);
  const fly = flyMatch ? flyMatch[1] : "";
  if (walk && fly) return `${walk} / ${fly}`;
  if (walk) return walk;
  if (fly) return fly;
  return "\u2014";
}
var EditListModal = class extends import_obsidian9.Modal {
  constructor(app, opts) {
    super(app);
    this.hoverIndex = -1;
    this.filtered = [];
    this.values = [...opts.initial || []];
    this._candidates = Array.from(
      new Set((opts.candidates || []).map((s) => this.ensureWikilink(s)))
    ).sort();
    this.opts = opts;
  }
  ensureWikilink(s) {
    let t = (s ?? "").toString().trim();
    if (!t) return "";
    try {
      const j = JSON.parse(t);
      if (typeof j === "string") t = j;
    } catch {
    }
    t = t.replace(/^\[+\s*|\s*\]+$/g, "");
    t = t.split("|")[0].split("#")[0].trim();
    if (!t.startsWith("[[")) t = `[[${t}]]`;
    return t;
  }
  get candidates() {
    return this._candidates;
  }
  // ── helpers: link parsing / labels ───────────────────────────────────
  labelFor(s) {
    const m = String(s).match(/\[\[([^|\]]+)(?:\|([^\]]+))?\]\]/);
    const label = (m ? m[2] || m[1] : s).split("/").pop().replace(/\.md$/, "");
    return label.trim();
  }
  parseLinkish(s) {
    const m = String(s).match(/\[\[([^|\]]+)(?:\|([^\]]+))?\]\]/);
    return m ? { path: m[1], label: this.labelFor(s) } : { label: this.labelFor(s) };
  }
  keyFor(s) {
    return this.labelFor(s).toLowerCase();
  }
  matchCandidateByLabel(label) {
    const low = label.trim().toLowerCase();
    const hit = this.candidates.find((c) => this.labelFor(c).toLowerCase() === low);
    return hit ?? null;
  }
  // ── modal lifecycle ──────────────────────────────────────────────────
  onOpen() {
    const { contentEl } = this;
    this.modalEl.addClass("vv-fixed-modal");
    this.modalEl.style.width = "520px";
    this.modalEl.style.maxWidth = "96vw";
    this.modalEl.style.maxHeight = "92vh";
    contentEl.createEl("h2", { text: this.opts.title });
    const row = contentEl.createDiv({ cls: "vv-field-row" });
    this.inputWrap = row.createDiv({ cls: "vv-searchwrap" });
    this.inputEl = this.inputWrap.createEl("input", {
      type: "text",
      placeholder: this.opts.placeholder || "Search\u2026",
      cls: "prompt-input"
    });
    this.addBtn = row.createEl("button", { text: "Add", cls: "mod-cta vv-addbtn" });
    this.suggestWrap = this.inputWrap.createDiv({ cls: "vv-suggest", attr: { "aria-hidden": "true" } });
    this.listWrap = contentEl.createDiv({ cls: "vv-list-wrap" });
    this.paintList();
    const actions = contentEl.createDiv({ cls: "vv-actions" });
    const save = actions.createEl("button", { text: "Save", cls: "mod-cta" });
    const cancel = actions.createEl("button", { text: "Cancel", cls: "vv-cancel" });
    const commitCurrent = () => {
      const raw = this.inputEl.value.trim();
      if (!raw) return;
      this.addValue(raw);
    };
    this.inputEl.addEventListener("input", () => this.showSuggestions(this.inputEl.value));
    this.inputEl.addEventListener("keydown", (e) => {
      if (e.key === "Enter") {
        e.preventDefault();
        if (this.hoverIndex >= 0 && this.filtered[this.hoverIndex]) {
          this.addValue(this.labelFor(this.filtered[this.hoverIndex]));
        } else {
          commitCurrent();
        }
      }
      if (e.key === "ArrowDown") {
        e.preventDefault();
        this.moveHover(1);
      }
      if (e.key === "ArrowUp") {
        e.preventDefault();
        this.moveHover(-1);
      }
      if (e.key === "Escape") {
        this.hideSuggestions();
      }
    });
    this.addBtn.addEventListener("click", commitCurrent);
    save.addEventListener("click", async () => {
      await this.opts.onSave?.([...this.values]);
      this.close();
    });
    cancel.addEventListener("click", () => this.close());
    setTimeout(() => this.inputEl.focus(), 0);
  }
  onClose() {
    this.modalEl.classList.remove("vv-fixed-modal");
    this.modalEl.style.removeProperty("width");
    this.modalEl.style.removeProperty("max-width");
    this.modalEl.style.removeProperty("max-height");
    this.contentEl.empty();
  }
  // ── list ops ─────────────────────────────────────────────────────────
  addValue(raw) {
    const match = this.matchCandidateByLabel(this.labelFor(raw));
    const v = match ?? raw;
    if (this.values.some((x) => this.keyFor(x) === this.keyFor(v))) return;
    this.values.push(v);
    this.values.sort((a, b) => this.labelFor(a).localeCompare(this.labelFor(b)));
    this.paintList();
    this.inputEl.value = "";
    this.hideSuggestions();
    this.inputEl.focus();
  }
  removeValue(v) {
    this.values = this.values.filter((x) => x !== v);
    this.paintList();
  }
  paintList() {
    this.listWrap.empty();
    if (!this.values.length) {
      this.listWrap.createDiv({ cls: "vv-list-empty", text: "Nothing added yet." });
      return;
    }
    const ul = this.listWrap.createEl("ul", { cls: "vv-list" });
    for (const v of this.values) {
      const li = ul.createEl("li", { cls: "vv-li" });
      const rm = li.createEl("button", {
        cls: "vv-li-x",
        text: "\xD7",
        attr: { "aria-label": `Remove ${v}` }
      });
      rm.addEventListener("click", () => this.removeValue(v));
      li.createSpan({ cls: "vv-li-text", text: String(v).replace(/^\[\[|\]\]$/g, "") });
    }
  }
  // ── suggestions ──────────────────────────────────────────────────────
  showSuggestions(q) {
    const needle = q.trim().toLowerCase();
    if (!needle) return this.hideSuggestions();
    this.filtered = this.candidates.filter((c) => c.toLowerCase().includes(needle) && !this.values.includes(c)).slice(0, 50);
    this.suggestWrap.empty();
    if (!this.filtered.length) return this.hideSuggestions();
    const modalRect = this.modalEl.getBoundingClientRect();
    const wrapRect = this.inputWrap.getBoundingClientRect();
    const PAD = 12;
    const spaceBelow = Math.floor(modalRect.bottom - wrapRect.bottom - PAD);
    const spaceAbove = Math.floor(wrapRect.top - modalRect.top - PAD);
    const dropUp = spaceBelow < 220 && spaceAbove > spaceBelow;
    const available = dropUp ? spaceAbove : spaceBelow;
    const maxH = Math.max(140, Math.min(360, available));
    this.suggestWrap.classList.toggle("drop-up", dropUp);
    this.suggestWrap.style.maxHeight = `${maxH}px`;
    this.suggestWrap.setAttr("aria-hidden", "false");
    this.suggestWrap.addClass("is-open");
    this.filtered.forEach((opt, i) => {
      const li = this.suggestWrap.createDiv({
        cls: "vv-suggest-item",
        text: opt.replace(/^\[\[|\]\]$/g, "")
      });
      li.addEventListener("mouseenter", () => this.setHover(i));
      li.addEventListener("mouseleave", () => this.setHover(-1));
      li.addEventListener("mousedown", (e) => {
        e.preventDefault();
        this.addValue(opt);
      });
    });
  }
  hideSuggestions() {
    this.suggestWrap.empty();
    this.suggestWrap.setAttr("aria-hidden", "true");
    this.suggestWrap.toggleClass("is-open", false);
    this.suggestWrap.classList.remove("drop-up");
    this.suggestWrap.style.maxHeight = "";
    this.filtered = [];
    this.hoverIndex = -1;
  }
  setHover(i) {
    this.hoverIndex = i;
    const kids = Array.from(this.suggestWrap.children);
    kids.forEach((el, idx) => el.toggleClass("is-hover", idx === i));
  }
  moveHover(delta) {
    if (!this.filtered.length) return;
    this.hoverIndex = (this.hoverIndex + delta + this.filtered.length) % this.filtered.length;
    this.setHover(this.hoverIndex);
  }
};
var GameplaySidebarView = class extends import_obsidian9.ItemView {
  constructor(leaf) {
    super(leaf);
    this.partyTableWrap = null;
    this.detailsWrap = null;
    this.detailsOpenPath = null;
    this.tableRefreshTimer = null;
    this.queueTable = () => {
      if (this.tableRefreshTimer) window.clearTimeout(this.tableRefreshTimer);
      this.tableRefreshTimer = window.setTimeout(async () => {
        this.tableRefreshTimer = null;
        await this.renderTable();
      }, 120);
    };
    this.detailRefreshTimer = null;
    this.queueDetail = () => {
      if (this.detailRefreshTimer) window.clearTimeout(this.detailRefreshTimer);
      this.detailRefreshTimer = window.setTimeout(async () => {
        this.detailRefreshTimer = null;
        const p = this.detailsOpenPath;
        if (!p) return;
        const f = this.app.vault.getAbstractFileByPath(p);
        if (f instanceof import_obsidian9.TFile) await this.showDetails(f);
      }, 120);
    };
    this.isSelectedPath = (path2) => {
      const plugin = getToolkit2(this.app);
      const s = plugin?.settings?.gameplay || {};
      const list = s.selectedPlayers || [];
      return list.includes(path2);
    };
  }
  getViewType() {
    return GAMEPLAY_VIEW_TYPE;
  }
  getDisplayText() {
    return "Gameplay";
  }
  getIcon() {
    return "gameplay";
  }
  async saveFrontmatterNumber(file, key, value) {
    const raw = await this.app.vault.read(file);
    const fmMatch = raw.match(/^---\r?\n([\s\S]*?)\r?\n---\r?\n?/);
    if (!fmMatch) {
      const yaml = `---
${key}: ${value}
---
`;
      await this.app.vault.modify(file, yaml + raw);
      return;
    }
    const full = fmMatch[0];
    const body = fmMatch[1];
    const hasKey = new RegExp(`^${key}\\s*:`, "mi").test(body);
    let newBody;
    if (hasKey) {
      newBody = body.replace(new RegExp(`^${key}\\s*:\\s*.*$`, "mi"), `${key}: ${value}`);
    } else {
      newBody = body.replace(/\s*$/, `
${key}: ${value}
`);
    }
    const updated = raw.replace(full, `---
${newBody.replace(/\r?\n$/, "")}
---
`);
    await this.app.vault.modify(file, updated);
  }
  collectCandidates(folder, asWikilinks = true) {
    const root = folder.replace(/\/+$/, "") + "/";
    return this.app.vault.getMarkdownFiles().filter((f) => f.path.startsWith(root)).map((f) => asWikilinks ? `[[${f.basename}]]` : f.basename);
  }
  // Merge candidates from multiple folders, de-dupe, sort
  collectFromFolders(folders, asWikilinks = true) {
    return Array.from(
      new Set(folders.flatMap((f) => this.collectCandidates(f, asWikilinks)))
    ).sort((a, b) => a.localeCompare(b));
  }
  refreshDetailPlaceholder() {
    const wrap = this.detailsWrap;
    const hasCard = !!wrap.querySelector(".vv-gp-card");
    const empty = wrap.querySelector(".vv-gp-detail-empty");
    if (hasCard && empty) empty.remove();
    if (!hasCard && !empty) {
      wrap.createDiv({ cls: "vv-gp-detail-empty", text: "Click a name to see details\u2026" });
    }
  }
  getActiveFolderPrefix() {
    const plugin = getToolkit2(this.app);
    const s = plugin?.settings?.gameplay || {};
    return (s.activeFolder || "World/People/Player Characters/Active").replace(/\/+$/, "") + "/";
  }
  ensureGameplay() {
    const plugin = getToolkit2(this.app);
    if (!plugin.settings.gameplay) {
      plugin.settings.gameplay = { selectedPlayers: [], activeFolder: "World/People/Player Characters/Active" };
    }
    return plugin.settings.gameplay;
  }
  async showDetails(file) {
    this.detailsOpenPath = file.path;
    const wrap = this.detailsWrap;
    {
      const cards = Array.from(wrap.querySelectorAll(".vv-gp-card"));
      const pinnedForPath = cards.find((el) => el.dataset.pinned === "true" && el.dataset.path === file.path);
      if (pinnedForPath) {
        this.refreshDetailPlaceholder();
        pinnedForPath.scrollIntoView({ block: "nearest", behavior: "smooth" });
        return;
      }
    }
    {
      const existingUnpinned = wrap.querySelector('.vv-gp-card[data-pinned="false"]');
      if (existingUnpinned) existingUnpinned.remove();
    }
    const card = document.createElement("div");
    card.addClass("vv-gp-card");
    card.dataset.pinned = "false";
    card.dataset.path = file.path;
    const placeCard = (c) => {
      const kids = Array.from(wrap.children);
      const cards = kids.filter((el) => el.classList.contains("vv-gp-card"));
      const pinned = cards.filter((el) => el.dataset.pinned === "true");
      if (pinned.length) {
        const after = pinned[pinned.length - 1];
        wrap.insertBefore(c, after.nextSibling);
      } else {
        wrap.insertBefore(c, wrap.firstChild);
      }
    };
    const reposition = (c) => {
      if (c.parentElement === wrap) wrap.removeChild(c);
      placeCard(c);
    };
    placeCard(card);
    this.refreshDetailPlaceholder();
    const controls = card.createDiv({ cls: "vv-gp-detail-controls" });
    const pinBtn = controls.createEl("button", { text: "pin", cls: "vv-gp-btn" });
    pinBtn.title = "Pin card";
    pinBtn.addEventListener("click", () => {
      const pinned = card.dataset.pinned === "true";
      card.dataset.pinned = (!pinned).toString();
      pinBtn.textContent = !pinned ? "unpin" : "pin";
      pinBtn.title = !pinned ? "Unpin card" : "Pin card";
      reposition(card);
    });
    const closeBtn = controls.createEl("button", { text: "\u2715", cls: "vv-gp-btn" });
    closeBtn.title = "Close card";
    closeBtn.addEventListener("click", () => {
      card.remove();
      this.refreshDetailPlaceholder();
    });
    const box = card;
    const fm = this.app.metadataCache.getFileCache(file)?.frontmatter || {};
    const name = fm["Name"] ?? file.basename;
    const header = box.createDiv({ cls: "vv-gp-detail-header" });
    const titleEl = header.createEl("h2", { text: name });
    titleEl.classList.add("vv-gp-detail-title");
    const linkTo = (target, label) => {
      const dest = this.app.metadataCache.getFirstLinkpathDest(target, file.path);
      const text = (label ?? target.split("/").pop().replace(/\.md$/, "")).trim();
      const plugin2 = getToolkit2(this.app);
      const enablePreview = !!plugin2?.settings?.enableSidebarPreviews;
      return dest ? `<a class="vv-link${enablePreview ? " internal-link" : ""}" href="${dest.path}"${enablePreview ? ` data-href="${dest.path}"` : ""}>${text}</a>` : text;
    };
    const parseMaybeLink = (val) => {
      if (!val) return "N/A";
      if (typeof val === "object" && val.path) {
        const p = String(val.path);
        return linkTo(p);
      }
      const s = String(val);
      const m = s.match(/\[\[([^|\]]+)(?:\|([^\]]+))?\]\]/);
      if (m) return linkTo(m[1], m[2]);
      return s;
    };
    const arrToList = (v) => {
      if (Array.isArray(v)) return v.map((x) => String(x));
      if (typeof v === "string") return v.split(",").map((x) => x.trim()).filter(Boolean);
      return [];
    };
    const species = parseMaybeLink(fm["species"]);
    const race = parseMaybeLink(fm["race"]);
    const klass = parseMaybeLink(fm["class"]);
    const subclass = parseMaybeLink(fm["subclass"]);
    const skillProfs = arrToList(fm["skills"]);
    const stProfs = arrToList(fm["saving_throws"]).map((s) => {
      const key = s.toLowerCase().trim();
      return ABILITY_ABBR[key] ?? s;
    });
    const joinComma = (items) => {
      const xs = items.filter(Boolean);
      return xs.length ? xs.join(", ") : "\u2014";
    };
    const profsHtml = joinComma(skillProfs);
    const stHtml = joinComma(stProfs);
    const kv = box.createDiv({ cls: "vv-gp-kvlist" });
    const makeKVRow = (label, html) => {
      const row = kv.createDiv({ cls: "vv-gp-kvrow" });
      row.createEl("div", { cls: "vv-gp-kvlabel", text: label });
      const val = row.createDiv({ cls: "vv-gp-kvvalue" });
      val.innerHTML = html;
    };
    makeKVRow("Species", species);
    makeKVRow("Race", race);
    makeKVRow("Class", klass);
    makeKVRow("Subclass", subclass);
    makeKVRow("Proficiencies", profsHtml);
    makeKVRow("Saving Throws", stHtml);
    const languagesArr = arrToList(fm["languages"]);
    const languagesHtml = languagesArr.length ? joinComma(languagesArr) : "\u2014";
    makeKVRow("Languages", languagesHtml);
    {
      const sec = box.createDiv({ cls: "vv-gp-detail-section" });
      const h = sec.createEl("h4", { text: "Key Items" });
      const edit = h.createSpan({ cls: "vv-gp-edit-link", text: "edit" });
      const list = sec.createEl("div", { cls: "vv-gp-detail-inline" });
      const read = () => this.readFmStringList(fm, ["key_items", "Key Items"]);
      const paint = (arr) => {
        list.empty();
        const items = (arr.length ? arr : ["\u2014"]).map((s) => String(s).trim()).map((s) => {
          const m = s.match(/\[\[([^|\]]+)(?:\|([^\]]+))?\]\]/);
          return m ? linkTo(m[1].trim(), m[2]?.trim()) : s;
        });
        list.innerHTML = items.join(", ");
      };
      paint(read());
      edit.addEventListener("click", () => {
        const candidates = this.collectFromFolders(
          ["Compendium/Items", "Compendium/Magic Items"],
          true
        );
        new EditListModal(this.app, {
          title: `${possessive(name)} Key Items`,
          initial: read(),
          candidates,
          placeholder: "Search items\u2026",
          onSave: async (newList) => {
            await this.writeFmStringList(file, "key_items", newList);
            const newFm = this.app.metadataCache.getFileCache(file)?.frontmatter || {};
            paint(this.readFmStringList(newFm, ["key_items", "Key Items"]));
          }
        }).open();
      });
    }
    {
      const sec = box.createDiv({ cls: "vv-gp-detail-section" });
      const h = sec.createEl("h4", { text: "Spells" });
      const edit = h.createSpan({ cls: "vv-gp-edit-link", text: "edit" });
      const get = () => this.readFmStringList(fm, ["Spells", "spells"]);
      const tableWrap = sec.createDiv();
      const paintTable = (names) => {
        tableWrap.empty();
        const st = tableWrap.createEl("table", { cls: "vv-gp-spell-table" });
        const thead = st.createEl("thead").createEl("tr");
        ["Spell", "Lvl", "Cast", "Range", "Save"].forEach((h2) => thead.createEl("th", { text: h2 }));
        const tbody = st.createEl("tbody");
        const rows = [];
        const normalize = (raw) => {
          const m = raw.match(/\[\[([^|\]]+)(?:\|([^\]]+))?\]\]/);
          if (m) return { linkText: m[1], label: m[2] };
          return { linkText: raw };
        };
        for (const s of names) {
          const n = normalize(String(s));
          let dest = this.app.metadataCache.getFirstLinkpathDest(n.linkText, file.path);
          if (!dest && !n.linkText.includes("/")) {
            dest = this.app.metadataCache.getFirstLinkpathDest(`Compendium/Spells/${n.linkText}`, file.path);
          }
          const displayName = (n.label ?? n.linkText).split("/").pop().replace(/\.md$/, "").trim();
          const plugin2 = getToolkit2(this.app);
          const enablePreview = !!plugin2?.settings?.enableSidebarPreviews;
          const nameHtml = dest ? `<a class="vv-link${enablePreview ? " internal-link" : ""}" href="${dest.path}"${enablePreview ? ` data-href="${dest.path}"` : ""}>${displayName}</a>` : displayName;
          const fmSpell = dest ? this.app.metadataCache.getFileCache(dest)?.frontmatter || {} : {};
          const lvlRaw = fmSpell["level"];
          const lvlNum = Number(lvlRaw);
          const level = Number.isFinite(lvlNum) ? lvlNum : lvlRaw ?? "\u2014";
          rows.push({
            nameHtml,
            level,
            cast: String(fmSpell["casting_time"] ?? "\u2014"),
            range: String(fmSpell["Range"] ?? "\u2014"),
            save: (fmSpell["saving_throws"] ?? "").toString().trim() || "\u2014"
          });
        }
        rows.sort((a, b) => {
          const an = typeof a.level === "number" ? a.level : 99;
          const bn = typeof b.level === "number" ? b.level : 99;
          return an - bn;
        });
        for (const r of rows) {
          const tr = tbody.createEl("tr");
          const nameTd = tr.createEl("td");
          nameTd.innerHTML = r.nameHtml;
          tr.createEl("td", { text: String(r.level) });
          tr.createEl("td", { text: r.cast });
          tr.createEl("td", { text: r.range });
          tr.createEl("td", { text: r.save });
        }
      };
      const openSpellEditor = (initial) => {
        const candidates = this.collectFromFolders(["Compendium/Spells", "Spells"], true);
        new EditListModal(this.app, {
          title: `${possessive(name)} Spells`,
          initial,
          candidates,
          placeholder: "Search spells\u2026",
          onSave: async (newList) => {
            await this.writeFmStringList(file, "Spells", newList);
            const refreshed = this.app.metadataCache.getFileCache(file)?.frontmatter || {};
            paintTable(this.readFmStringList(refreshed, ["Spells", "spells"]));
          }
        }).open();
      };
      paintTable(get());
      edit.addEventListener("click", () => openSpellEditor(get()));
    }
    card.addEventListener("click", (e) => {
      const t = e.target;
      const a = t?.closest("a.vv-link");
      if (!a) return;
      e.preventDefault();
      const target = a.getAttribute("href");
      if (!target) return;
      this.app.workspace.openLinkText(target, file.path, true);
    });
    const plugin = getToolkit2(this.app);
    const pagePreview = this.app.internalPlugins?.getPluginById?.("page-preview")?.instance;
    if (pagePreview?.onLinkHover) {
      card.addEventListener("mousemove", (ev) => {
        const t = ev.target;
        const a = t?.closest("a.vv-link");
        if (!a) return;
        const linkText = a.getAttribute("data-href") || a.getAttribute("href");
        if (!linkText) return;
        if (plugin.settings.enableSidebarPreviews) {
          pagePreview.onLinkHover(ev, a, linkText, file.path);
        }
      });
    }
  }
  startLiveUpdates() {
    this.registerEvent(
      this.app.metadataCache.on("changed", (file) => {
        if (file instanceof import_obsidian9.TFile && this.isSelectedPath(file.path)) {
          this.queueTable();
        }
        if (this.detailsOpenPath) this.queueDetail();
      })
    );
    this.registerEvent(
      this.app.vault.on("modify", async (file) => {
        if (!(file instanceof import_obsidian9.TFile)) return;
        if (file.extension !== "md") return;
        if (file.path.startsWith(this.getActiveFolderPrefix())) {
          await this.renderAddRow();
        }
      })
    );
    this.registerEvent(
      this.app.metadataCache.on("resolved", () => {
        this.queueTable();
      })
    );
    this.registerEvent(
      this.app.vault.on("modify", (file) => {
        if (file instanceof import_obsidian9.TFile && this.isSelectedPath(file.path)) {
          this.queueTable();
        }
      })
    );
    this.registerEvent(
      this.app.vault.on("create", async (file) => {
        if (!(file instanceof import_obsidian9.TFile)) return;
        if (file.extension !== "md") return;
        if (file.path.startsWith(this.getActiveFolderPrefix())) {
          await this.renderAddRow();
        }
      })
    );
    this.registerEvent(
      this.app.vault.on("rename", async (file) => {
        if (!(file instanceof import_obsidian9.TFile)) return;
        await this.renderAddRow();
      })
    );
    this.registerEvent(
      this.app.vault.on("delete", async (file) => {
        if (!(file instanceof import_obsidian9.TFile)) return;
        await this.renderAddRow();
      })
    );
    this.registerEvent(
      this.app.vault.on("rename", async (file, oldPath) => {
        if (!(file instanceof import_obsidian9.TFile)) return;
        const plugin = getToolkit2(this.app);
        const s = plugin?.settings?.gameplay || {};
        const list = s.selectedPlayers || [];
        const idx = list.indexOf(oldPath);
        if (idx !== -1) {
          list[idx] = file.path;
          this.ensureGameplay().selectedPlayers = list;
          await plugin.saveSettings();
          this.queueTable();
        }
      })
    );
    this.registerEvent(
      this.app.vault.on("delete", async (file) => {
        if (!(file instanceof import_obsidian9.TFile)) return;
        const plugin = getToolkit2(this.app);
        const s = plugin?.settings?.gameplay || {};
        const list = s.selectedPlayers || [];
        if (list.includes(file.path)) {
          this.ensureGameplay().selectedPlayers = list.filter((p) => p !== file.path);
          await plugin.saveSettings();
          this.queueTable();
        }
      })
    );
  }
  // Read a string-array frontmatter field regardless of key casing/shape
  readFmStringList(fm, keys) {
    for (const k of keys) {
      const v = fm?.[k];
      if (!v) continue;
      if (Array.isArray(v)) return v.map((x) => String(x).trim()).filter(Boolean);
      if (typeof v === "string") {
        try {
          const j = JSON.parse(v);
          if (Array.isArray(j)) return j.map(String);
        } catch {
        }
        return v.split(",").map((s) => s.trim()).filter(Boolean);
      }
    }
    return [];
  }
  // Write array back to a SINGLE canonical key (creates if missing)
  async writeFmStringList(file, key, list) {
    await this.app.fileManager.processFrontMatter(file, (fm) => {
      fm[key] = list;
    });
  }
  async onOpen() {
    const cont = this.containerEl.children[1];
    cont.empty();
    const party = cont.createEl("details", { attr: { open: "true" } });
    party.addClass("vv-gp-root");
    const summary = party.createEl("summary", { text: "Party Overview" });
    summary.addClass("vv-gp-summary");
    const desc = party.createDiv({ cls: "vv-gp-desc" });
    desc.setText("Add players to the list below to see their general stats. Click a name for expanded details.");
    const body = party.createDiv({ cls: "vv-gp-root-body" });
    this.folderRow = body.createDiv({ cls: "vv-gameplay-folderrow" });
    this.addRow = body.createDiv({ cls: "vv-gameplay-addrow" });
    this.partyTableWrap = body.createDiv({ cls: "vv-gameplay-tablewrap" });
    this.detailsWrap = body.createDiv({ cls: "vv-gp-detailwrap" });
    this.detailsWrap.createDiv({ cls: "vv-gp-detail-empty", text: "Click a name to see details\u2026" });
    const plugin = getToolkit2(this.app);
    if (!plugin.settings.gameplay) {
      plugin.settings.gameplay = {
        selectedPlayers: [],
        activeFolder: "World/People/Player Characters/Active"
      };
      await plugin.saveSettings();
    }
    await this.renderAddRow();
    await this.renderTable();
    this.startLiveUpdates();
    this.registerEvent(
      this.app.workspace.on("vv:sidebar-previews-changed", async (data) => {
        await this.renderTable();
        if (this.detailsOpenPath) {
          const f = this.app.vault.getAbstractFileByPath(this.detailsOpenPath);
          if (f instanceof import_obsidian9.TFile) await this.showDetails(f);
        }
      })
    );
  }
  async onClose() {
    this.shopkeeperPanel?.dispose();
  }
  async renderAddRow() {
    const plugin = getToolkit2(this.app);
    const s = plugin?.settings?.gameplay || {};
    this.addRow.empty();
    const wrap = this.addRow.createDiv({ cls: "vv-gp-addwrap" });
    const count = (s.selectedPlayers || []).length;
    const trigger = wrap.createEl("button", { cls: "vv-gp-checkdd-trigger", text: `Add Players` });
    const clearBtn = wrap.createEl("button", { cls: "vv-gp-clearall", text: "Clear All" });
    clearBtn.addEventListener("click", async () => {
      this.ensureGameplay().selectedPlayers = [];
      await plugin.saveSettings();
      await this.renderTable();
      await this.renderAddRow();
    });
    const panel = this.addRow.createDiv({ cls: "vv-gp-checkdd-panel" });
    const folder = this.getActiveFolderPrefix();
    const files = this.app.vault.getMarkdownFiles().filter((f) => f.path.startsWith(folder)).sort((a, b) => a.basename.localeCompare(b.basename));
    const selected = new Set(s.selectedPlayers || []);
    const updateCountLabel = () => {
      const n = selected.size;
      trigger.textContent = `Players (${n})`;
    };
    for (const f of files) {
      const row = panel.createDiv({ cls: "vv-gp-checkdd-row" });
      const id = `gp-${f.path.replace(/[^\w-]+/g, "_")}`;
      const cb = row.createEl("input", { type: "checkbox", attr: { id } });
      cb.checked = selected.has(f.path);
      const lab = row.createEl("label", { attr: { for: id } });
      lab.textContent = f.basename;
      cb.addEventListener("change", async () => {
        if (cb.checked) selected.add(f.path);
        else selected.delete(f.path);
        this.ensureGameplay().selectedPlayers = Array.from(selected);
        await plugin.saveSettings();
        updateCountLabel();
        await this.renderTable();
      });
    }
    const open = () => {
      if (panel.classList.contains("open")) return;
      panel.classList.add("open");
      const rect = trigger.getBoundingClientRect();
      const containerRect = this.containerEl.getBoundingClientRect();
      panel.style.left = `${rect.left - containerRect.left}px`;
      panel.style.top = `${rect.bottom - containerRect.top + 4}px`;
      const onDocClick = (ev) => {
        if (panel.contains(ev.target) || trigger.contains(ev.target)) return;
        close();
      };
      const onEsc = (ev) => {
        if (ev.key === "Escape") close();
      };
      const close = () => {
        panel.classList.remove("open");
        document.removeEventListener("mousedown", onDocClick, true);
        document.removeEventListener("keydown", onEsc, true);
      };
      panel._close = close;
      document.addEventListener("mousedown", onDocClick, true);
      document.addEventListener("keydown", onEsc, true);
    };
    trigger.addEventListener("click", () => {
      if (panel.classList.contains("open")) panel._close?.();
      else open();
    });
  }
  // ── Party table ─────────────────────────────────────────────────────
  async renderTable() {
    const plugin = getToolkit2(this.app);
    const s = plugin?.settings?.gameplay || {};
    this.partyTableWrap.empty();
    const paths = s.selectedPlayers || [];
    if (!paths.length) {
      this.partyTableWrap.createEl("div", { text: "No players selected.", cls: "vv-gp-empty" });
      return;
    }
    const rows = [];
    for (const p of paths) {
      const file = this.app.vault.getAbstractFileByPath(p);
      if (!(file instanceof import_obsidian9.TFile)) continue;
      const fm = this.app.metadataCache.getFileCache(file)?.frontmatter || {};
      const name = fm["Name"] ?? file.basename;
      const wis = Number(fm["wisdom"] ?? 10);
      const wisMod = Math.floor((wis - 10) / 2);
      const prof = Number(
        fm["Proficiency bonus"] ?? fm["Proficiency Bonus"] ?? 0
      );
      const rawSkills = fm["skills"] ?? fm["Skill Proficiencies"];
      const skillsArr = Array.isArray(rawSkills) ? rawSkills.map(String) : typeof rawSkills === "string" ? rawSkills.split(",").map((s2) => s2.trim()) : [];
      const hasPerception = skillsArr.some((s2) => s2.toLowerCase() === "perception");
      const pp = 10 + wisMod + (hasPerception ? prof : 0);
      const ac = (fm["ac"] ?? "N/A") + "";
      const hpM = (fm["hp"] ?? "N/A") + "";
      const hpC = (fm["current_hp"] ?? fm["hp"] ?? "N/A") + "";
      const spdRaw = (fm["Speed"] ?? fm["speed"] ?? "") + "";
      const spd = sanitizeSpeed(spdRaw);
      let alnRaw = (fm["Alignment"] ?? fm["Alignnment"] ?? "") + "";
      let aln = "\u2014";
      if (alnRaw) {
        const key = alnRaw.toLowerCase().trim();
        aln = ALIGN_ABBR[key] ?? alnRaw;
      }
      rows.push({
        file,
        name,
        ac: ac || "N/A",
        hpCur: hpC || "N/A",
        hpMax: hpM || "N/A",
        speed: spd || "N/A",
        align: aln,
        pp
      });
    }
    rows.sort((a, b) => a.name.localeCompare(b.name));
    const table = this.partyTableWrap.createEl("table", { cls: "vv-gp-table" });
    const cg = table.createEl("colgroup");
    [
      ["name", ""],
      // auto → absorbs leftover space
      ["pp", "pp"],
      ["ac", "ac"],
      ["hp", "hp"],
      ["spd", "spd"],
      ["aln", "aln"],
      ["rm", "rm"]
      // the tiny × column
    ].forEach(([cls]) => cg.createEl("col", { cls: `vv-col-${cls}` }));
    const thead = table.createEl("thead");
    const trH = thead.createEl("tr");
    ["Name", "PP", "AC", "HP", "Spd", "Align"].forEach((h) => {
      trH.createEl("th", { text: h });
    });
    const tbody = table.createEl("tbody");
    for (const r of rows) {
      const tr = tbody.createEl("tr");
      const nameTd = tr.createEl("td");
      const a = nameTd.createEl("a", { text: r.name, href: r.file.path });
      a.addEventListener("click", async (e) => {
        e.preventDefault();
        if (e.metaKey || e.ctrlKey) {
          this.app.workspace.openLinkText(r.file.path, "", false);
          return;
        }
        await this.showDetails(r.file);
      });
      a.addEventListener("contextmenu", (e) => {
        e.preventDefault();
        this.app.workspace.openLinkText(r.file.path, "", true);
      });
      const enablePreview2 = !!getToolkit2(this.app)?.settings?.enableSidebarPreviews;
      a.classList.add("vv-link");
      if (enablePreview2) {
        a.classList.add("internal-link");
        a.setAttr("data-href", r.file.path);
      }
      tr.createEl("td", { text: String(r.pp), attr: { style: "text-align:center; white-space:nowrap;" } });
      tr.createEl("td", { text: r.ac, attr: { style: "text-align:center; white-space:nowrap;" } });
      {
        const td = tr.createEl("td");
        const wrap = td.createDiv({ cls: "vv-gp-hpwrap", attr: { title: "Click to edit current HP" } });
        const cur = wrap.createEl("input", { type: "text", cls: "vv-gp-hpcur" });
        cur.value = String(r.hpCur ?? "");
        cur.inputMode = "numeric";
        cur.pattern = "\\d*";
        wrap.createSpan({ text: "/", cls: "vv-gp-hpsep" });
        wrap.createSpan({ text: String(r.hpMax ?? "N/A"), cls: "vv-gp-hpmax" });
        const commit = async () => {
          const cleaned = cur.value.trim();
          if (!/^\d+$/.test(cleaned)) {
            new import_obsidian9.Notice("HP must be a number");
            cur.value = String(r.hpCur ?? "");
            return;
          }
          if (cleaned === String(r.hpCur ?? "")) return;
          try {
            await this.saveFrontmatterNumber(r.file, "current_hp", Number(cleaned));
            r.hpCur = cleaned;
          } catch (e) {
            console.error(e);
            new import_obsidian9.Notice("Failed to update HP");
            cur.value = String(r.hpCur ?? "");
          }
        };
        cur.addEventListener("keydown", (ev) => {
          if (ev.key === "Enter") {
            ev.preventDefault();
            ev.target.blur();
          }
          if (ev.key === "Escape") {
            ev.preventDefault();
            cur.value = String(r.hpCur ?? "");
            cur.blur();
          }
        });
        cur.addEventListener("blur", commit);
      }
      tr.createEl("td", { text: r.speed, attr: { style: "text-align:center; white-space:nowrap;" } });
      tr.createEl("td", { text: r.align, attr: { style: "text-align:center; white-space:nowrap;" } });
      const rmTd = tr.createEl("td", { cls: "vv-gp-rmcell" });
      const rmBtn = rmTd.createEl("button", { text: "x", cls: "vv-gp-rm-btn" });
      rmBtn.setAttr("title", "Remove from roster");
      rmBtn.addEventListener("click", async (e) => {
        e.preventDefault();
        const plugin2 = getToolkit2(this.app);
        const s2 = plugin2?.settings?.gameplay || {};
        const list = s2.selectedPlayers || [];
        const idx = list.indexOf(r.file.path);
        if (idx !== -1) {
          list.splice(idx, 1);
          plugin2.settings.gameplay.selectedPlayers = list;
          await plugin2.saveSettings();
          const openPanel = this.containerEl.querySelector(".vv-gp-checkdd-panel.open");
          openPanel?._close?.();
          await this.renderTable();
          await this.renderAddRow();
        }
      });
    }
    const pagePreview = this.app.internalPlugins?.getPluginById?.("page-preview")?.instance;
    const enablePreview = !!getToolkit2(this.app)?.settings?.enableSidebarPreviews;
    if (this.partyTableWrap && this.partyTableWrap._vvHoverWired && !enablePreview) {
      const prev = this.partyTableWrap._vvHoverHandler;
      if (prev) this.partyTableWrap.removeEventListener("mousemove", prev);
      delete this.partyTableWrap._vvHoverWired;
      delete this.partyTableWrap._vvHoverHandler;
    }
    if (pagePreview?.onLinkHover && enablePreview && this.partyTableWrap && !this.partyTableWrap._vvHoverWired) {
      this.partyTableWrap._vvHoverWired = true;
      const handler = (ev) => {
        const t = ev.target;
        const a = t?.closest("a.internal-link");
        if (!a) return;
        const linkText = a.getAttribute("data-href") || a.getAttribute("href");
        if (!linkText) return;
        pagePreview.onLinkHover(ev, a, linkText, a.getAttribute("href") || "");
      };
      this.partyTableWrap.addEventListener("mousemove", handler);
      this.partyTableWrap._vvHoverWired = true;
      this.partyTableWrap._vvHoverHandler = handler;
    }
  }
};

// src/modalFormsUpdater.ts
var import_obsidian10 = require("obsidian");
var DEFAULTS = {
  upstreamUrl: "https://raw.githubusercontent.com/slamwise0001/VVunderlore-Toolkit-Full/main/.obsidian/plugins/modalforms/data.json",
  ownedFormNames: [
    "next-session-date",
    "new-creature",
    "new-item-form",
    "new-npc-form",
    "new-place-form",
    "new-player-character"
  ],
  makeBackup: true,
  notify: true
};
async function updateModalFormsFromRepo(app, opts = {}) {
  const cfg = { ...DEFAULTS, ...opts };
  const mfPath = await findModalFormsDataPath(app);
  if (!mfPath) {
    if (cfg.notify) new import_obsidian10.Notice("\u26A0\uFE0F Could not find Modal Forms plugin data.json.");
    return null;
  }
  const localRaw = await safeRead(app, mfPath);
  if (!localRaw) {
    if (cfg.notify) new import_obsidian10.Notice(`\u26A0\uFE0F Failed to read: ${mfPath}`);
    return null;
  }
  let localData;
  try {
    localData = JSON.parse(localRaw);
    if (!Array.isArray(localData.formDefinitions)) throw new Error("Bad structure");
  } catch {
    if (cfg.notify) new import_obsidian10.Notice("\u26A0\uFE0F Modal Forms data.json is not valid JSON.");
    return null;
  }
  const upstreamData = await fetchUpstreamMF(cfg.upstreamUrl);
  if (!upstreamData) {
    if (cfg.notify) new import_obsidian10.Notice("\u26A0\uFE0F Could not fetch upstream Modal Forms data.json.");
    return null;
  }
  const ownedSet = new Set((cfg.ownedFormNames || []).map((n) => n.trim()).filter(Boolean));
  const result = mergeByOwnedNames(localData, upstreamData, ownedSet);
  const changed = result.replacedForms.length > 0 || result.addedForms.length > 0;
  if (!changed) {
    if (cfg.notify) new import_obsidian10.Notice("Modal Forms: no changes needed.");
    return {
      modalFormsPath: mfPath,
      ...result,
      totalAfter: (localData.formDefinitions || []).length
    };
  }
  if (cfg.makeBackup) {
    try {
      const backupPath = mfPath.replace(/\.json$/i, "") + "." + timeStamp() + ".bak.json";
      await app.vault.adapter.write(backupPath, JSON.stringify(localData, null, 2));
    } catch {
    }
  }
  const newData = {
    ...localData,
    formDefinitions: result.merged
  };
  await app.vault.adapter.write(mfPath, JSON.stringify(newData, null, 2));
  if (cfg.notify) {
    const noteBits = [];
    if (result.replacedForms.length) noteBits.push(`replaced: ${result.replacedForms.length}`);
    if (result.addedForms.length) noteBits.push(`added: ${result.addedForms.length}`);
  }
  return {
    modalFormsPath: mfPath,
    replacedForms: result.replacedForms,
    addedForms: result.addedForms,
    keptUserForms: result.keptUserForms,
    totalAfter: result.merged.length
  };
}
async function safeRead(app, path2) {
  try {
    return await app.vault.adapter.read(path2);
  } catch {
    return null;
  }
}
async function findModalFormsDataPath(app) {
  const plugsDir = (0, import_obsidian10.normalizePath)(`${app.vault.configDir}/plugins`);
  try {
    const listing = await app.vault.adapter.list(plugsDir);
    const folderCandidates = [
      // heuristic ids people use
      "obsidian-modal-forms",
      "modalforms",
      "obsidian-modalforms",
      "modal-forms"
    ];
    if (listing && Array.isArray(listing.folders)) {
      for (const f of listing.folders) {
        const manifestPath = (0, import_obsidian10.normalizePath)(`${f}/manifest.json`);
        try {
          const raw = await app.vault.adapter.read(manifestPath);
          const man = JSON.parse(raw);
          const id = String(man?.id ?? "").toLowerCase();
          const name = String(man?.name ?? "").toLowerCase();
          if (id.includes("modal") && id.includes("form") || name.includes("modal") && name.includes("form")) {
            const dataPath = (0, import_obsidian10.normalizePath)(`${f}/data.json`);
            const exists = await app.vault.adapter.exists(dataPath);
            if (exists) return dataPath;
          }
        } catch {
        }
      }
      for (const id of folderCandidates) {
        const dataPath = (0, import_obsidian10.normalizePath)(`${plugsDir}/${id}/data.json`);
        if (await app.vault.adapter.exists(dataPath)) return dataPath;
      }
    } else {
      for (const id of folderCandidates) {
        const dataPath = (0, import_obsidian10.normalizePath)(`${plugsDir}/${id}/data.json`);
        if (await app.vault.adapter.exists(dataPath)) return dataPath;
      }
    }
  } catch {
  }
  return null;
}
async function fetchUpstreamMF(url) {
  try {
    const res = await fetch(url);
    if (!res.ok) return null;
    const upstream = await res.json();
    if (!upstream || !Array.isArray(upstream.formDefinitions)) return null;
    return upstream;
  } catch {
    return null;
  }
}
function mergeByOwnedNames(local, upstream, ownedSet) {
  const localForms = Array.isArray(local.formDefinitions) ? local.formDefinitions : [];
  const upstreamForms = Array.isArray(upstream.formDefinitions) ? upstream.formDefinitions : [];
  const upstreamByName = /* @__PURE__ */ new Map();
  for (const f of upstreamForms) upstreamByName.set(f.name, f);
  const kept = [];
  const replaced = [];
  let keptUsers = 0;
  for (const lf of localForms) {
    if (!ownedSet.has(lf.name)) {
      kept.push(lf);
      keptUsers++;
    }
  }
  const added = [];
  for (const name of ownedSet) {
    const uf = upstreamByName.get(name);
    if (!uf) continue;
    const hadLocal = localForms.some((lf) => lf.name === name);
    if (hadLocal) replaced.push(name);
    else added.push(name);
    kept.push(uf);
  }
  return {
    merged: kept,
    replacedForms: replaced,
    addedForms: added,
    keptUserForms: keptUsers
  };
}
function timeStamp() {
  const d = /* @__PURE__ */ new Date();
  const pad = (n) => String(n).padStart(2, "0");
  return `${d.getFullYear()}-${pad(d.getMonth() + 1)}-${pad(d.getDate())}_${pad(
    d.getHours()
  )}-${pad(d.getMinutes())}-${pad(d.getSeconds())}`;
}

// src/main.ts
function getRulesetDisplayName(key) {
  const ed = AVAILABLE_EDITIONS.find((e) => e.id === key);
  return ed?.label ?? key;
}
var mapmaking_icon = `
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" aria-hidden="true">
    <g stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round">
      <path d="M20.97 10.15v7.08c0 .38-.21.72-.55.89l-4.55 2.28c-.56.28-1.23.28-1.79 0l-4.21-2.11c-.56-.28-1.23-.28-1.79 0L4.42 20.12a1 1 0 0 1-1.45-.9V6.47c0-.38.21-.72.55-.89l4.55-2.28c.56-.28 1.23-.28 1.79 0l2.52 1.28"/>
      <path d="M14.97 13.51v7.1"/>
      <path d="M8.97 3.09v15"/>
      <path d="M21.48 5.03a1.79 1.79 0 1 0-2.53-2.53l-4.22 4.22c-.2.2-.35.45-.43.72l-.7 2.42a.4.4 0 0 0 .53.49l2.42-.7c.27-.08.52-.23.72-.43l4.22-4.22Z"/>
    </g>
  </svg>
`;
var gameplay_icon = `
<svg id="Layer_1" xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 24 24">
  <!-- Generator: Adobe Illustrator 29.2.1, SVG Export Plug-In . SVG Version: 2.1.0 Build 116)  -->
  <defs>
    <style>
      .st0 {
        fill: currentColor;
      }

      .st0, .st1 {
        stroke: currentColor;
        stroke-miterlimit: 10;
      }

      .st0, .st1, .st2 {
        stroke-width: 2px;
      }

      .st1, .st2 {
        fill: none;
      }

      .st2 {
        stroke: currentColor;
        stroke-linecap: round;
        stroke-linejoin: round;
      }

      .st3 {
        display: none;
      }
    </style>
  </defs>
  <g id="Layer_4" class="st3">
    <path class="st0" d="M11.98-25.16c-1.29,0-2.79.18-3.25.23-.07,0-.12-.03-.12-.08l.19-2.56c0-.08.05-.16.11-.21.22-.17.91-.51,3.06-.51"/>
    <path class="st1" d="M8.24-26.61s-2.39.43-2.78.76c-.22.19-1.52,9.89-1.9,12.91-.07.56.18,1.12.64,1.44.57.39,1.31.84,1.67.84"/>
    <path class="st1" d="M11.98-8.36c-2.92,0-5.04-.09-5.7-.13-.13,0-.21-.11-.21-.24.03-.42.11-1.5.16-2.1.02-.26.19-.49.44-.57l2.65-1.28h2.66"/>
    <path class="st0" d="M11.98-8.36c-2.92,0-5.04-.09-5.7-.13-.13,0-.21-.11-.21-.24.03-.42.11-1.5.16-2.1.02-.26.19-.49.44-.57l2.65-1.28h2.66"/>
    <path class="st0" d="M11.98-8.36c2.92,0,5.04-.09,5.7-.13.13,0,.21-.11.21-.24-.03-.42-.11-1.5-.16-2.1-.02-.26-.19-.49-.44-.57l-2.65-1.28h-2.66"/>
    <path class="st0" d="M11.98-25.16c1.29,0,2.79.18,3.25.23.07,0,.12-.03.12-.08l-.19-2.56c0-.08-.05-.16-.11-.21-.22-.17-.91-.51-3.06-.51"/>
    <path class="st1" d="M9-24.92l-1.47,6.19c-.12.52-.19,1.06-.17,1.59,0,.41.05.88.15,1.29.25.94,1.39,2.3,1.39,3.17h6.17c0-.86,1.13-2.23,1.38-3.17.11-.4.14-.88.15-1.29.01-.54-.05-1.07-.17-1.59l-1.47-6.19-.23-.11c-1.83-.22-3.67-.22-5.5,0,0,0-.23.11-.23.11Z"/>
    <path class="st1" d="M15.77-26.61s2.39.43,2.78.76c.22.19,1.52,9.89,1.9,12.91.07.56-.18,1.12-.64,1.44-.57.39-1.31.84-1.67.84"/>
  </g>
  <g id="Layer_5" class="st3">
    <path class="st2" d="M20.97-16.16v7.08c0,.38-.21.72-.55.89l-4.55,2.28c-.56.28-1.23.28-1.79,0l-4.21-2.11c-.56-.28-1.23-.28-1.79,0l-3.66,1.83c-.49.25-1.09.05-1.34-.45-.07-.14-.11-.29-.11-.45v-12.76c0-.38.21-.72.55-.89l4.55-2.28c.56-.28,1.23-.28,1.79,0l2.52,1.28"/>
    <path class="st2" d="M14.97-12.8v7.1"/>
    <path class="st2" d="M8.97-23.23v15"/>
    <path class="st2" d="M21.48-21.29c.7-.7.7-1.83,0-2.53s-1.83-.7-2.53,0l-4.22,4.22c-.2.2-.35.45-.43.72l-.7,2.42c-.07.22.06.46.29.52.08.02.16.02.24,0l2.42-.7c.27-.08.52-.23.72-.43l4.22-4.22h0Z"/>
  </g>
  <g id="Layer_6">
    <path class="st2" d="M5.87,10.85h12.15v9.15c0,.55-.45,1-1,1H6.87c-.55,0-1-.45-1-1v-9.15h0Z"/>
    <polyline class="st2" points="5.87 10.85 1.97 9.1 1.97 19.15 6.56 20.95"/>
    <polyline class="st2" points="18.02 10.85 22 9.1 22 19.15 17.33 20.95"/>
  </g>
  <g id="Layer_7">
    <path class="st2" d="M8.5,5.77s-2.08-.95-1.89-3.34c0,0,1.56,1.84,2.79,1.86"/>
    <path class="st2" d="M15.51,5.77s2.08-.95,1.89-3.34c0,0-1.56,1.84-2.79,1.86"/>
  </g>
  <g id="Layer_3" class="st3">
    <path class="st2" d="M40.66,11.97h-5"/>
    <path class="st2" d="M40.66,7.97h-5"/>
    <path class="st2" d="M44.66,16.97V4.97c0-1.1-.9-2-2-2h-13"/>
    <path class="st2" d="M33.66,20.97h12c1.1,0,2-.9,2-2v-1c0-.55-.45-1-1-1h-10c-.55,0-1,.45-1,1v1c0,1.1-.9,2-2,2s-2-.9-2-2V4.97c0-1.1-.9-2-2-2s-2,.9-2,2v2c0,.55.45,1,1,1h3"/>
  </g>
  <path class="st2" d="M14.17,10.67c.97-.69,1.65-2.05,1.65-3.34,0-2.11-1.71-3.82-3.82-3.82s-3.82,1.71-3.82,3.82c0,1.29.69,2.64,1.66,3.34"/>
</svg>
`;
var loadingIcon = "data:image/png;base64,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";
var InstallingModal = class extends import_obsidian11.Modal {
  constructor(app) {
    super(app);
  }
  onOpen() {
    this.contentEl.empty();
    const img = this.contentEl.createEl("img", {
      attr: { src: loadingIcon, alt: "Installing\u2026" }
    });
    Object.assign(img.style, {
      display: "block",
      margin: "1em auto 0.5em",
      width: "100px",
      height: "100px"
    });
    img.animate(
      [
        { transform: "rotate(0deg)" },
        { transform: "rotate(-360deg)" }
      ],
      {
        duration: 1500,
        // one and a half seconds per revolution
        iterations: Infinity,
        easing: "linear"
      }
    );
    const txt = this.contentEl.createDiv({ text: "Installing\u2026", cls: "mod-quiet" });
    txt.addClass("installmodal-txt");
  }
  onClose() {
    this.contentEl.empty();
  }
};
var DEFAULT_SETTINGS = {
  installedVersion: "1.0.0",
  customizeUpdates: false,
  updateTargets: {
    tools: true,
    toolsPath: "Tools",
    templates: true,
    templatesPath: "Extras/Templates",
    omninomicon: true,
    omninomiconPath: "Adventures/Omninomicon.md",
    spellbook: true,
    spellbookPath: "Compendium/Spells/_Spellbook.md"
  },
  latestDefaults: void 0,
  pathOverrides: {},
  backupFiles: {},
  backupPath: "",
  autoBackup: false,
  lastBackupTime: "",
  backupError: "",
  customPaths: [],
  autoBackupBeforeUpdate: true,
  highlightEnabled: false,
  highlightColorLight: "#DFE7E2",
  highlightColorDark: "#1F2943",
  rulesetCompendium: "",
  rulesetReference: [],
  reparseGamesets: true,
  isFirstRun: "yes",
  sessionTitlePreference: "name",
  enableSidebarPreviews: true,
  templateOpenMode: "default",
  adventureSort: "name",
  enabledAdventureCategories: ["npcs", "factions", "monsters", "history", "places"],
  hideBaseToolbar: false
};
var VVunderloreToolkitPlugin = class extends import_obsidian11.Plugin {
  constructor() {
    super(...arguments);
    this.manifestCache = { files: [], folders: [] };
    this.changelog = "";
    this.autoCheckInterval = null;
    this.oldPathsByGithub = {};
    this.styleEl = null;
    this.excludedPaths = [
      ".DS_Store",
      ".gitignore",
      ".gitattributes",
      ".github",
      "README.md",
      "Compendium",
      `${this.app.vault.configDir}/plugins/vvunderlore-toolkit-plugin/manifest.json`,
      `${this.app.vault.configDir}/plugins/vvunderlore-toolkit-plugin/main.js`,
      `${this.app.vault.configDir}/plugins/vvunderlore-toolkit-plugin/styles.css`
    ];
    this.isFirstRun = false;
    this.pendingRulesetKey = "";
    this.pendingReferenceKeys = [];
    this.pendingSelection = null;
    this.pendingSeed = null;
  }
  // ─── HELPERS ────────────────────────────────────────────────────────
  resolveVaultPath(githubPath) {
    const custom = this.settings.customPaths.find(
      (c) => c.manifestKey === githubPath || c.manifestKey === this.keyFor(githubPath)
    );
    return custom?.vaultPath ?? githubPath;
  }
  async writePartialMirror(paths, label = "pre-force-update") {
    const base = this.settings.backupPath && this.settings.backupPath.trim() ? this.settings.backupPath.trim() : ".vault-backups";
    const d = /* @__PURE__ */ new Date();
    const pad = (n) => String(n).padStart(2, "0");
    const stamp = `${d.getFullYear()}-${pad(d.getMonth() + 1)}-${pad(d.getDate())}-${pad(d.getHours())}${pad(d.getMinutes())}${pad(d.getSeconds())}`;
    const safeLabel = label.replace(/[^\w.-]+/g, "-").slice(0, 60) || "partial";
    const root = `${base}/partial/${stamp}-${safeLabel}`;
    const ensure = async (dir) => {
      if (!dir || dir === "/" || dir === ".") return;
      const parts = dir.split("/").filter(Boolean);
      let cur = "";
      for (const p of parts) {
        cur = cur ? `${cur}/${p}` : p;
        if (!await this.app.vault.adapter.exists(cur)) {
          await this.app.vault.createFolder(cur);
        }
      }
    };
    await ensure(root);
    for (const vp of paths) {
      try {
        if (!await this.app.vault.adapter.exists(vp)) continue;
        const content = await this.app.vault.adapter.read(vp);
        const target = `${root}/${vp}`;
        await ensure(target.split("/").slice(0, -1).join("/"));
        await this.app.vault.adapter.write(target, content);
      } catch (e) {
        console.warn("Partial backup copy failed:", vp, e);
        this.settings.backupError = `Failed copying ${vp}: ${String(e)}`;
        await this.saveSettings();
      }
    }
    this.settings.lastBackupTime = (/* @__PURE__ */ new Date()).toISOString();
    await this.saveSettings();
    return root;
  }
  buildIncomingRefCounts() {
    const incoming = /* @__PURE__ */ new Map();
    const resolved = this.app.metadataCache.resolvedLinks;
    for (const from in resolved) {
      const toMap = resolved[from];
      for (const to in toMap) {
        incoming.set(to, (incoming.get(to) || 0) + (toMap[to] || 1));
      }
    }
    return incoming;
  }
  sortFilesByMode(files) {
    const mode = this.settings.adventureSort;
    if (mode === "name") {
      files.sort(
        (a, b) => a.basename.localeCompare(b.basename, void 0, { numeric: true, sensitivity: "base" })
      );
      return;
    }
    if (mode === "recent") {
      files.sort((a, b) => (b.stat.mtime || 0) - (a.stat.mtime || 0));
      return;
    }
    const incoming = this.buildIncomingRefCounts();
    files.sort((a, b) => {
      const rb = incoming.get(b.path) || 0;
      const ra = incoming.get(a.path) || 0;
      if (rb !== ra) return rb - ra;
      const mt = (b.stat.mtime || 0) - (a.stat.mtime || 0);
      if (mt !== 0) return mt;
      return a.basename.localeCompare(b.basename);
    });
  }
  setPendingSelectionContext(ctx) {
    this.pendingSelection = ctx;
  }
  takePendingSelectionContext() {
    const c = this.pendingSelection;
    this.pendingSelection = null;
    return c;
  }
  applyBaseToolbarEmbedCSS() {
    if (this.settings.hideBaseToolbar) {
      document.body.classList.add("vv-hide-bases-toolbar");
    } else {
      document.body.classList.remove("vv-hide-bases-toolbar");
    }
  }
  // keep your old API working, but add a preWrap flag
  setPendingSeed(s, preWrap = false) {
    const v = this.app.workspace.getActiveViewOfType(import_obsidian11.MarkdownView);
    const ed = v?.editor;
    const filePath = v?.file?.path || "";
    const sel = (s ?? ed?.getSelection?.() ?? "").toString();
    if (sel && filePath) {
      const ctx = {
        text: sel,
        filePath,
        from: ed?.getCursor?.("from"),
        to: ed?.getCursor?.("to"),
        preText: ed?.getValue?.(),
        preWrapped: false
      };
      if (preWrap && ed) {
        const alreadyLinked = /^\s*\[\[[\s\S]*\]\]\s*$/.test(sel);
        if (!alreadyLinked) {
          const m = sel.match(/^(\s*)([\s\S]*?)(\s*)$/);
          const leading = m?.[1] ?? "";
          const core = (m?.[2] ?? "").trim();
          const trailing = m?.[3] ?? "";
          if (core) {
            ed.replaceSelection(`${leading}[[${core}]]${trailing}`);
            ctx.preWrapped = true;
          }
        }
      }
      this.setPendingSelectionContext(ctx);
    } else {
      this.setPendingSelectionContext(null);
    }
  }
  /** Convert “some/folder/file.md” → “some-folder-file” (lowercased, no extension). */
  keyFor(path2) {
    return path2.replace(/[/\\]/g, "-").replace(/\.[^.]+$/, "").toLowerCase();
  }
  isExcluded(path2) {
    return this.excludedPaths.some(
      (ex) => path2 === ex || path2.startsWith(`${ex}/`) || path2.includes(`/${ex}/`) || path2.endsWith(`/${ex}`) || path2.includes(`/${ex}`)
    );
  }
  // ─── CUSTOM INSTALL LOGIC ───────────────────────────────────────────
  async performCustomInstall(toInstall) {
    this.app.workspace.getLeavesOfType("markdown").forEach((l) => l.detach());
    this.app.workspace.getLeavesOfType("graph").forEach((l) => l.detach());
    const installing = new InstallingModal(this.app);
    installing.open();
    try {
      const allFiles = this.app.vault.getAllLoadedFiles().filter((f) => f instanceof import_obsidian11.TFile).map((f) => f.path).filter((p) => p !== ".vvunderlore_installed");
      if (allFiles.length && this.settings.autoBackupBeforeUpdate) {
        const folder = await this.backupManager.backupVaultMirror("pre-custom-install");
        new import_obsidian11.Notice(`Backup before custom\u2010install at: ${folder}`);
      }
      for (const entry of toInstall) {
        if (entry.isFolder) {
          if (!await this.app.vault.adapter.exists(entry.path)) {
            await this.app.vault.createFolder(entry.path);
          }
        } else {
          const manifestEntry = this.manifestCache.files.find((f) => f.path === entry.path);
          if (!manifestEntry) continue;
          await this.updateEntryFromManifest(manifestEntry, true);
        }
      }
      await this.updateVersionFile();
      this.settings.installedVersion = this.settings.latestToolkitVersion;
      this.settings.lastForceUpdate = (/* @__PURE__ */ new Date()).toISOString();
      await this.saveSettings();
      const comp = this.settings.rulesetCompendium;
      const refs = this.settings.rulesetReference ?? [];
      if (comp) {
        const jobs = [
          importRulesetData({ app: this.app, editionKey: comp, targetPath: "Compendium" }),
          ...refs.map((refKey) => {
            const label = getRulesetDisplayName(refKey);
            return importRulesetData({
              app: this.app,
              editionKey: refKey,
              targetPath: `Resources/Rulesets/${label}`
            });
          })
        ];
        await Promise.all(jobs);
      }
      const marker = ".vvunderlore_installed";
      if (!await this.app.vault.adapter.exists(marker)) {
        await this.app.vault.create(marker, "");
      }
      this.settings.highlightEnabled = true;
      await this.saveSettings();
      this.enableHighlight();
      if (this.settingsTab) this.settingsTab.display();
      installing.close();
      const success = new import_obsidian11.Modal(this.app);
      success.onOpen = () => {
        success.contentEl.empty();
        success.titleEl.setText("\u2705 Custom Install Complete");
        const msg = success.contentEl.createEl("div", { cls: "installsuccess" });
        let seconds = 3;
        const render = () => {
          msg.setText(`Reloading vault in ${seconds}\u2026`);
        };
        render();
        const timer = window.setInterval(() => {
          seconds -= 1;
          if (seconds <= 0) {
            window.clearInterval(timer);
            success.close();
            try {
              this.app.commands.executeCommandById("app:reload");
            } catch {
              window.location.reload();
            }
            return;
          }
          render();
        }, 1e3);
      };
      success.open();
    } catch (err) {
      console.error("\u274C performCustomInstall failed:", err);
      installing.close();
      new import_obsidian11.Notice("\u274C Custom install failed; check console for details.");
    }
  }
  // ─── HIGHLIGHTING (Light + Dark Mode) ──────────────────────────────
  get highlightCSS() {
    const light = this.settings.highlightColorLight.trim() || "rgba(107,146,120,1)";
    const dark = this.settings.highlightColorDark.trim() || "rgba( 50, 70, 50,1)";
    const fileSelectors = this.manifestCache.files.map((f) => {
      const escaped = f.path.replace(/"/g, '\\"');
      return `.nav-file-title[data-path="${escaped}"]`;
    });
    const lines = [
      `:root {`,
      `  --vvunderlore-toolkit-highlight: ${light};`,
      `}`,
      ``,
      `body.theme-dark {`,
      `  --vvunderlore-toolkit-highlight: ${dark};`,
      `}`,
      ``
    ];
    if (fileSelectors.length) {
      lines.push(`${fileSelectors.join(", ")} {`);
      lines.push(`  background-color: var(--vvunderlore-toolkit-highlight);`);
      lines.push(`  border-radius: 3px;`);
      lines.push(`}`);
      lines.push(``);
    }
    return lines.join("\n");
  }
  enableHighlight() {
    if (this.styleEl) return;
    this.styleEl = document.createElement("style");
    this.styleEl.id = "vvunderlore-highlight-inject";
    this.styleEl.textContent = this.highlightCSS;
    document.head.appendChild(this.styleEl);
  }
  disableHighlight() {
    if (!this.styleEl) return;
    this.styleEl.remove();
    this.styleEl = null;
  }
  // ─── REMOTE BASELINE CACHING ─────────────────────────────────────────
  async fetchRemoteBaseline() {
    if (!this.manifestCache || !Array.isArray(this.manifestCache.files)) {
      console.warn("\u26A0\uFE0F manifestCache is missing or invalid");
      return;
    }
    for (const entry of this.manifestCache.files) {
      try {
        const rawUrl = `https://raw.githubusercontent.com/slamwise0001/VVunderlore-Toolkit-Full/main/${entry.path}`;
        const remoteText = await (await fetch(rawUrl)).text();
        const resolved = this.resolveVaultPath(entry.path);
        if (resolved !== entry.path) {
          await this.fileCacheManager.removeFromCache(entry.path);
        }
        await this.fileCacheManager.updateCache(
          resolved,
          remoteText,
          entry.path,
          false
        );
      } catch (e) {
        console.error(`Failed to fetch raw baseline for ${entry.path}`, e);
      }
    }
  }
  sanitizeTitle(s) {
    return (s ?? "").replace(/[\/:*?"<>|]/g, "").trim().slice(0, 100) || "Untitled";
  }
  async replaceSelectionWithLink(view, original, createdTitle) {
    const ed = view.editor;
    const current = ed.getValue();
    const link = `[[${createdTitle}]]`;
    if (original && current.includes(original)) {
      const updated = current.replace(original, link);
      await this.app.vault.modify(view.file, updated);
    } else {
      ed.replaceSelection(link);
    }
  }
  async runVvTemplateCommand(templatePath) {
    await this.runSBTemplate(templatePath);
  }
  // ─── MARKER FILE CHECKS (first‐run detection) ───────────────────────
  async checkMarkerFile() {
    const markerPath = ".vvunderlore_installed";
    const markerExists = await this.app.vault.adapter.exists(markerPath);
    this.isFirstRun = !markerExists;
    delete this.settings.needsInstall;
    await this.saveSettings();
    this.settingsTab.display();
  }
  // ─── MANIFEST SYNC ────────────────────────────────────────────────────
  async syncManifest() {
    try {
      const res = await (0, import_obsidian11.requestUrl)({
        url: "https://raw.githubusercontent.com/slamwise0001/VVunderlore-Toolkit-Full/main/manifest.json"
      });
      const manifest = res.json;
      this.settings.latestDefaults = manifest.defaultPaths || {};
      this.manifestCache = manifest;
      const manifestContent = JSON.stringify(manifest, null, 2);
      await this.app.vault.adapter.write("manifest.json", manifestContent);
      await this.saveSettings();
    } catch (error) {
      console.error("Error syncing manifest:", error);
      new import_obsidian11.Notice("Failed to sync manifest.");
    }
  }
  // ─── PLUGIN LIFECYCLE ─────────────────────────────────────────────────
  async onload() {
    await this.loadSettings();
    if (!Array.isArray(this.settings.enabledAdventureCategories)) {
      this.settings.enabledAdventureCategories = ["npcs", "factions", "monsters", "history", "places"];
      await this.saveSettings();
    }
    this.applyBaseToolbarEmbedCSS();
    (0, import_obsidian11.addIcon)("mapmaking", mapmaking_icon);
    (0, import_obsidian11.addIcon)("gameplay", gameplay_icon);
    this.backupManager = new BackupManager(this.app);
    this.fileCacheManager = new ToolkitFileCacheManager(
      this.app.vault,
      this.settings.fileCache ?? {},
      async () => await this.saveSettings()
    );
    this.settingsTab = new ToolkitSettingsTab(this.app, this);
    this.addSettingTab(this.settingsTab);
    this.registerView(SIDEBAR_VIEW_TYPE, (leaf) => new SidebarTemplatesView(leaf));
    this.registerView(GAMEPLAY_VIEW_TYPE, (leaf) => new GameplaySidebarView(leaf));
    this.app.workspace.onLayoutReady(async () => {
      const getOrCreateRightLeaf = () => this.app.workspace.getRightLeaf(false) ?? this.app.workspace.getRightLeaf(true);
      let gameplayLeaf = this.app.workspace.getLeavesOfType(GAMEPLAY_VIEW_TYPE)[0] ?? null;
      if (!gameplayLeaf) {
        gameplayLeaf = getOrCreateRightLeaf();
        await gameplayLeaf.setViewState({ type: GAMEPLAY_VIEW_TYPE, active: false });
      }
      let worldLeaf = this.app.workspace.getLeavesOfType(SIDEBAR_VIEW_TYPE)[0] ?? null;
      if (!worldLeaf) {
        worldLeaf = getOrCreateRightLeaf();
      }
      await worldLeaf.setViewState({ type: SIDEBAR_VIEW_TYPE, active: true });
      this.app.workspace.revealLeaf(worldLeaf);
    });
    this.addCommand({
      id: "open-worldbuilding-sidebar",
      name: "Open VVorldbuilding pane",
      icon: "mapmaking",
      callback: async () => {
        let leaf = this.app.workspace.getLeavesOfType(SIDEBAR_VIEW_TYPE)[0];
        if (!leaf) {
          leaf = this.app.workspace.getRightLeaf(false) ?? this.app.workspace.getRightLeaf(true);
        }
        if (!leaf) {
          new import_obsidian11.Notice("\u274C Could not open Templates sidebar");
          return;
        }
        await leaf.setViewState({ type: SIDEBAR_VIEW_TYPE, active: true });
        this.app.workspace.revealLeaf(leaf);
      }
    });
    this.addCommand({
      id: "open-gameplay-sidebar",
      name: "Open Gameplay pane",
      icon: "gameplay",
      callback: async () => {
        let leaf = this.app.workspace.getLeavesOfType(GAMEPLAY_VIEW_TYPE)[0];
        if (!leaf) {
          leaf = this.app.workspace.getRightLeaf(false) ?? this.app.workspace.getRightLeaf(true);
        }
        if (!leaf) {
          new import_obsidian11.Notice("\u274C Could not open Gameplay sidebar");
          return;
        }
        await leaf.setViewState({ type: GAMEPLAY_VIEW_TYPE, active: true });
        this.app.workspace.revealLeaf(leaf);
      }
    });
    this.addCommand({
      id: "vv-new-pc",
      name: "VVunderlore: New Player Character",
      callback: async () => {
        await this.runSBTemplate("Extras/Templates/playercharacter_template.md");
      }
    });
    this.addCommand({
      id: "vv-new-npc",
      name: "VVunderlore: New NPC",
      callback: async () => {
        await this.runSBTemplate("Extras/Templates/npc_template.md");
      }
    });
    this.addCommand({
      id: "vv-new-item",
      name: "VVunderlore: New Item",
      callback: async () => {
        await this.runSBTemplate("Extras/Templates/newitem_template.md");
      }
    });
    this.addCommand({
      id: "vv-new-creature",
      name: "VVunderlore: New Creature",
      callback: async () => {
        await this.runSBTemplate("Extras/Templates/newcreature_template.md");
      }
    });
    this.addCommand({
      id: "vv-new-place",
      name: "VVunderlore: New Place",
      callback: async () => {
        await this.runSBTemplate("Extras/Templates/newplace_template.md");
      }
    });
    this.addCommand({
      id: "vv-check-updates",
      name: "VVunderlore: Run \u2014 Check for Toolkit Updates",
      callback: async () => {
        await this.checkForUpdates();
      }
    });
    this.addCommand({
      id: "vv-force-update",
      name: "VVunderlore: Run \u2014 Force Update",
      callback: async () => {
        await this.forceUpdatePreviewAndConfirm();
      }
    });
    this.addCommand({
      id: "vv-toggle-embed-toolbar",
      name: "Toggle: Show/Hide toolbars in Embedded Bases",
      callback: async () => {
        const next = !this.settings.hideBaseToolbar;
        this.settings.hideBaseToolbar = next;
        await this.saveSettings();
        this.applyBaseToolbarEmbedCSS();
        this.settingsTab?.display();
      }
    });
    this.addRibbonIcon("scroll-text", "VVunderlore Sidebars", async () => {
      await this.openSidebar(SIDEBAR_VIEW_TYPE, "right");
      await this.openSidebar(GAMEPLAY_VIEW_TYPE, "right");
    });
    if (this.settings.isFirstRun !== "yes") {
      try {
        const content = await this.app.vault.adapter.read("manifest.json");
        this.manifestCache = JSON.parse(content);
      } catch {
      }
    }
    if (this.settings.highlightEnabled) this.enableHighlight();
    setTimeout(async () => {
      await this.syncManifest();
      await this.showIndexingModal();
      await this.checkForUpdates();
      try {
        const raw = await this.app.vault.adapter.read("manifest.json");
        const manifest = JSON.parse(raw);
        const entries = [...manifest.folders || [], ...manifest.files || []];
        this.requiresGraph = new Map(entries.map((e) => [e.key, e.requires || []]));
      } catch {
        this.requiresGraph = /* @__PURE__ */ new Map();
      }
    }, 250);
    this.scheduleAutoUpdateCheck();
    this.registerEvent(
      this.app.vault.on("delete", () => this.registerEvent(
        this.app.vault.on(
          "delete",
          () => this.app.commands.executeCommandById("dataview:clear-cache")
        )
      ))
    );
    this.registerEvent(
      this.app.vault.on(
        "rename",
        () => this.app.commands.executeCommandById("dataview:clear-cache")
      )
    );
    this.registerEvent(
      this.app.workspace.on("editor-menu", (menu, editor, view) => {
        const sel = editor.getSelection().trim();
        if (!sel.length) return;
        menu.addItem((i) => i.setTitle("VVunderlore: New NPC from selection").setIcon("user-plus").onClick(async () => {
          this.setPendingSeed(sel);
          await this.runSBTemplate("Extras/Templates/npc_template.md");
        }));
        menu.addItem((i) => i.setTitle("VVunderlore: New Item from selection").setIcon("plus-circle").onClick(async () => {
          this.setPendingSeed(sel);
          await this.runSBTemplate("Extras/Templates/item_template.md");
        }));
        menu.addItem((i) => i.setTitle("VVunderlore: New Place from selection").setIcon("plus-circle").onClick(async () => {
          this.setPendingSeed(sel);
          await this.runSBTemplate("Extras/Templates/place_template.md");
        }));
      })
    );
    if (this.settings.isFirstRun === "no") {
      this.app.workspace.onLayoutReady(() => {
        const welcome = this.app.vault.getAbstractFileByPath("Welcome.md");
        if (welcome instanceof import_obsidian11.TFile) {
          this.app.workspace.detachLeavesOfType("settings");
          this.app.workspace.getLeaf(true).openFile(welcome);
        }
        this.settings.isFirstRun = "shown";
        this.saveSettings();
      });
    }
  }
  onunload() {
    this.disableHighlight();
    this.app.workspace.detachLeavesOfType(SIDEBAR_VIEW_TYPE);
    if (this.autoCheckInterval) clearInterval(this.autoCheckInterval);
  }
  scheduleAutoUpdateCheck() {
    this.autoCheckInterval = window.setInterval(() => {
      this.checkForUpdates();
    }, 60 * 60 * 1e3);
  }
  async activateTemplatesSidebar() {
    this.app.workspace.detachLeavesOfType(SIDEBAR_VIEW_TYPE);
    await this.app.workspace.getLeftLeaf(false).setViewState({ type: SIDEBAR_VIEW_TYPE, active: true });
  }
  async getUniqueNewNotePath(basePath) {
    const adapter = this.app.vault.adapter;
    if (!await adapter.exists(basePath)) return basePath;
    const dot = basePath.lastIndexOf(".");
    const stem = dot >= 0 ? basePath.slice(0, dot) : basePath;
    const ext = dot >= 0 ? basePath.slice(dot) : "";
    let i = 2;
    while (true) {
      const candidate = `${stem} (${i})${ext}`;
      if (!await adapter.exists(candidate)) return candidate;
      i++;
    }
  }
  async runSBTemplate(templatePath) {
    const tpl = this.app.vault.getAbstractFileByPath(templatePath);
    if (!(tpl instanceof import_obsidian11.TFile)) {
      new import_obsidian11.Notice(`\u26A0\uFE0F Template not found: ${templatePath}`);
      return;
    }
    const tpObs = this.app.plugins.getPlugin("templater-obsidian");
    const tpAlt = this.app.plugins.getPlugin("templater");
    const templater = tpObs || tpAlt;
    if (!templater) {
      new import_obsidian11.Notice("\u26A0\uFE0F Could not find Templater \u2013 is it enabled?");
      return;
    }
    const tpObj = templater.templater?.current_functions_object;
    if (!tpObj) {
      new import_obsidian11.Notice("\u26A0\uFE0F Templater API not ready\u2014add a startup template and restart.");
      return;
    }
    const srcView = this.app.workspace.getActiveViewOfType(import_obsidian11.MarkdownView);
    srcView?.editor?.focus();
    const pending = this.takePendingSelectionContext?.() ?? null;
    const legacySeed = typeof this.takePendingSeed === "function" ? this.takePendingSeed() : null;
    const ed = srcView?.editor ?? null;
    const baseText = pending?.preText ?? (ed ? ed.getValue() : srcView?.file ? await this.app.vault.read(srcView.file) : "");
    const from = pending?.from ?? ed?.getCursor?.("from");
    const to = pending?.to ?? ed?.getCursor?.("to");
    function posToOffset(text, pos) {
      let off = 0, i = 0, line = 0;
      while (line < pos.line && i < text.length) {
        const nl = text.indexOf("\n", i);
        if (nl === -1) return text.length;
        off = nl + 1;
        i = off;
        line++;
      }
      return off + pos.ch;
    }
    let rawSel = "";
    if (baseText && from && to) {
      try {
        const startOff = posToOffset(baseText, from);
        const endOff = posToOffset(baseText, to);
        if (endOff >= startOff) rawSel = baseText.slice(startOff, endOff);
      } catch {
      }
    }
    if (!rawSel) {
      rawSel = (pending?.text && pending.text.length ? pending.text : "") || (legacySeed || "") || (srcView?.editor?.getSelection?.() ?? "") || (window.getSelection()?.toString() ?? "");
    }
    if (!rawSel) {
      let wrapperFile2;
      try {
        wrapperFile2 = await tpObj.file.create_new(tpl, void 0, false);
      } catch (e) {
        console.error("Error invoking Templater:", e);
        new import_obsidian11.Notice("\u274C Failed to run template; check console.");
        return;
      }
      try {
        await this.app.vault.delete(wrapperFile2);
      } catch {
      }
      return;
    }
    const originView = this.app.workspace.getActiveViewOfType(import_obsidian11.MarkdownView);
    const srcPath = pending?.filePath || originView?.file?.path || null;
    if (!srcPath) {
      let wrapperFile2 = null;
      try {
        wrapperFile2 = await tpObj.file.create_new(tpl, void 0, false);
      } catch (e) {
        console.error("Templater.create_new (no srcPath) failed", e);
        new import_obsidian11.Notice("\u274C Could not run template.");
      }
      try {
        if (wrapperFile2) await this.app.vault.delete(wrapperFile2);
      } catch {
      }
      return;
    }
    const startMs = Date.now();
    const createdFilePromise = new Promise((resolve) => {
      const ref = this.app.vault.on("create", (af) => {
        if (af instanceof import_obsidian11.TFile && af.extension === "md" && af.stat.ctime >= startMs) {
          this.app.vault.offref(ref);
          resolve(af);
        }
      });
      setTimeout(() => {
        this.app.vault.offref(ref);
        resolve(null);
      }, 6e3);
    });
    let wrapperFile = null;
    try {
      wrapperFile = await tpObj.file.create_new(tpl, void 0, false);
    } catch (e) {
      console.error("Templater.create_new (wrapper) failed", e);
      new import_obsidian11.Notice("\u274C Could not run template.");
      return;
    }
    try {
      if (wrapperFile) await this.app.vault.delete(wrapperFile);
    } catch {
    }
    const created = await createdFilePromise;
    if (!created) return;
    const newNoteFile = this.app.workspace.activeLeaf?.view instanceof import_obsidian11.MarkdownView ? this.app.workspace.activeLeaf.view.file : created;
    const behavior = this.settings?.templateOpenMode ?? "default";
    if (behavior === "background") {
      const newLeaf = this.app.workspace.activeLeaf;
      setTimeout(() => {
        if (newLeaf?.view instanceof import_obsidian11.MarkdownView) {
          newLeaf.detach();
        }
      }, 100);
    } else if (behavior === "current") {
      const leaves = this.app.workspace.getLeavesOfType("markdown");
      const createdLeaf = leaves.find((l) => l.view?.file === created) ?? leaves.find((l) => l.view?.file?.path === created.path) ?? null;
      if (createdLeaf) {
        createdLeaf.detach();
      }
      const originLeaf = leaves.find((l) => l.view?.file?.path === srcPath) ?? originView?.leaf ?? this.app.workspace.getActiveViewOfType(import_obsidian11.MarkdownView)?.leaf;
      if (originLeaf) {
        this.app.workspace.setActiveLeaf(originLeaf, { focus: true });
      }
    }
    await new Promise((r) => setTimeout(r, 150));
    try {
      if (!newNoteFile || !await this.app.vault.adapter.exists(newNoteFile.path)) return;
      const txt = await this.app.vault.adapter.read(newNoteFile.path);
      if (!txt || !txt.trim()) return;
    } catch {
      return;
    }
    const alreadyLinked = /^\s*\[\[[\s\S]*\]\]\s*$/.test(rawSel);
    let wrapped = rawSel;
    if (!alreadyLinked) {
      const m = rawSel.match(/^(\s*)([\s\S]*?)(\s*)$/);
      const leading = m?.[1] ?? "";
      const core = (m?.[2] ?? "").trim();
      const trailing = m?.[3] ?? "";
      wrapped = core.length ? `${leading}[[${core}]]${trailing}` : rawSel;
    }
    const tf = this.app.vault.getAbstractFileByPath(srcPath);
    if (!tf) return;
    const cur = await this.app.vault.read(tf);
    let updated = null;
    if (baseText && from && to) {
      try {
        const startOff = posToOffset(baseText, from);
        const endOff = posToOffset(baseText, to);
        if (endOff >= startOff) {
          const slice = cur.slice(startOff, endOff);
          if (slice === rawSel) {
            updated = cur.slice(0, startOff) + wrapped + cur.slice(endOff);
          }
        }
      } catch {
      }
    }
    if (updated == null) {
      const idx = cur.indexOf(rawSel);
      if (idx >= 0) updated = cur.slice(0, idx) + wrapped + cur.slice(idx + rawSel.length);
    }
    if (updated != null && updated !== cur) {
      await this.app.vault.modify(tf, updated);
    }
  }
  takePendingSeed() {
    const s = this.pendingSeed;
    this.pendingSeed = null;
    return s;
  }
  async openSidebar(viewType, side) {
    const ws = this.app.workspace;
    const existing = ws.getLeavesOfType(viewType)[0];
    if (existing) {
      await existing.setViewState({ type: viewType, active: true });
      ws.revealLeaf(existing);
      return;
    }
    const leaf = side === "left" ? ws.getLeftLeaf(false) ?? ws.getLeftLeaf(true) : ws.getRightLeaf(false) ?? ws.getRightLeaf(true);
    if (!leaf) {
      new import_obsidian11.Notice(`\u274C Could not open ${viewType} sidebar`);
      return;
    }
    await leaf.setViewState({ type: viewType, active: true });
    ws.revealLeaf(leaf);
  }
  // ─── BACKUP & UNDO ────────────────────────────────────────────────────
  async backupFile(filePath, content) {
    this.settings.backupFiles = this.settings.backupFiles || {};
    this.settings.backupFiles[filePath] = content;
    await this.saveSettings();
  }
  async undoForceUpdate() {
    if (!this.settings.backupFiles || Object.keys(this.settings.backupFiles).length === 0) {
      new import_obsidian11.Notice("No backups available to restore.");
      return;
    }
    for (const [filePath, backupContent] of Object.entries(this.settings.backupFiles)) {
      if (await this.app.vault.adapter.exists(filePath)) {
        await this.app.vault.adapter.write(filePath, backupContent);
      } else {
        await this.app.vault.create(filePath, backupContent);
      }
    }
    new import_obsidian11.Notice("\u2705 Force update undone.");
    this.settings.backupFiles = {};
    await this.saveSettings();
  }
  // ─── FOLDER SYNC ───────────────────────────────────────────────────────
  async syncMissingFolders() {
    if (this.manifestCache && this.manifestCache.folders) {
      for (const folderEntry of this.manifestCache.folders) {
        const folderPath = folderEntry.path;
        if (!await this.app.vault.adapter.exists(folderPath)) {
          await this.app.vault.createFolder(folderPath);
        }
      }
    }
  }
  // ─── FORCE-UPDATE PREVIEW ──────────────────────────────────────────────
  async buildForceUpdatePreview() {
    const previewList = [];
    const denyListedFolders = this.settings.customPaths.filter((c) => c.doUpdate === false).map((c) => c.manifestKey);
    for (const entry of this.manifestCache.files) {
      if (entry.optional) {
        continue;
      }
      const custom = this.settings.customPaths.find((c) => c.manifestKey === entry.key);
      const isInDenyFolder = denyListedFolders.some(
        (folder) => entry.path.startsWith(folder + "/")
      );
      if (custom?.doUpdate === false || isInDenyFolder) {
        const vp = custom?.vaultPath ?? this.resolveVaultPath(entry.path);
        const exists = await this.app.vault.adapter.exists(vp);
        const upToDate = exists && await this.fileCacheManager.isUpToDate(vp);
        if (!exists || !upToDate) {
          previewList.push({
            filePath: vp,
            action: "deny-listed \u2013 will not update",
            selected: false
          });
        }
      }
    }
    if (!this.settings.customizeUpdates) {
      for (const f of this.manifestCache.files) {
        if (f.optional) {
          continue;
        }
        const custom = this.settings.customPaths.find((c) => c.manifestKey === f.key);
        const isInDenyFolder = denyListedFolders.some(
          (folder) => f.path.startsWith(folder + "/")
        );
        if (custom?.doUpdate === false || isInDenyFolder) {
          continue;
        }
        const vp = this.resolveVaultPath(f.path);
        let tag = "";
        if (vp !== f.path) tag = " (remapped)";
        const exists = await this.app.vault.adapter.exists(vp);
        if (!exists) {
          previewList.push({
            filePath: vp,
            action: `new file${tag}`,
            selected: true
          });
        } else if (!await this.fileCacheManager.isUpToDate(vp)) {
          previewList.push({
            filePath: vp,
            action: `will be overwritten${tag}`,
            selected: true
          });
        }
      }
      for (const fld of this.manifestCache.folders) {
        if (fld.optional) {
          continue;
        }
        const isDenyFolder = denyListedFolders.includes(fld.path);
        if (!await this.app.vault.adapter.exists(fld.path) && !isDenyFolder) {
          previewList.push({
            filePath: fld.path,
            action: "missing folder (will be created)",
            selected: true,
            isFolder: true
          });
        }
      }
      return previewList;
    }
    for (const entry of this.manifestCache.files) {
      if (entry.optional) {
        continue;
      }
      const custom = this.settings.customPaths.find((c) => c.manifestKey === entry.key);
      const isInDenyFolder = denyListedFolders.some(
        (folder) => entry.path.startsWith(folder + "/")
      );
      if (custom?.doUpdate === false || isInDenyFolder) {
        continue;
      }
      const vaultPath = custom?.vaultPath ?? this.resolveVaultPath(entry.path);
      const exists = await this.app.vault.adapter.exists(vaultPath);
      const upToDate = exists && await this.fileCacheManager.isUpToDate(vaultPath);
      let tag = "";
      if (vaultPath !== entry.path) tag = " (remapped)";
      if (!exists) {
        previewList.push({
          filePath: vaultPath,
          action: `new file${tag}`,
          selected: true
        });
      } else if (!upToDate) {
        previewList.push({
          filePath: vaultPath,
          action: `will be overwritten${tag}`,
          selected: true
        });
      }
    }
    for (const entry of this.manifestCache.folders) {
      if (entry.optional) {
        continue;
      }
      const isDenyFolder = denyListedFolders.includes(entry.path);
      if (!await this.app.vault.adapter.exists(entry.path) && !isDenyFolder) {
        previewList.push({
          filePath: entry.path,
          action: "missing folder (will be created)",
          selected: true,
          isFolder: true
        });
      }
    }
    for (const f of this.manifestCache.files) {
      if (f.optional) {
        continue;
      }
      const manifestKey = f.key;
      const manifestPath = f.path;
      const custom = this.settings.customPaths.find((c) => c.manifestKey === manifestKey);
      const prevPath = this.oldPathsByGithub[manifestPath];
      const isInDenyFolder = denyListedFolders.some(
        (folder) => manifestPath.startsWith(folder + "/")
      );
      if (custom?.doUpdate === false || isInDenyFolder) {
        continue;
      }
      if (custom && custom.vaultPath && custom.vaultPath !== manifestPath) {
        continue;
      }
      if (prevPath && prevPath !== manifestPath && (!custom || custom.vaultPath === manifestPath)) {
        previewList.push({
          filePath: prevPath,
          action: `moved \u2192 ${manifestPath}`,
          selected: true
        });
      }
    }
    return previewList;
  }
  async forceUpdatePreviewAndConfirm() {
    const previewList = await this.buildForceUpdatePreview();
    const denyItems = [];
    const normalItems = [];
    for (const item of previewList) {
      if (item.action.startsWith("deny-listed")) {
        denyItems.push(item);
      } else {
        normalItems.push(item);
      }
    }
    const modal = new class extends import_obsidian11.Modal {
      constructor(app, normal, denied) {
        super(app);
        this.normal = normal;
        this.denied = denied;
      }
      onOpen() {
        this.contentEl.addEventListener("click", (e) => e.stopPropagation());
        this.contentEl.empty();
        this.titleEl.setText("Force Update Preview");
        this.contentEl.createEl("p", {
          text: 'The following items will be updated. Uncheck any items you do NOT want to change, then click "Confirm and Update".'
        });
        if (this.normal.length) {
          const normalContainer = this.contentEl.createEl("div");
          Object.assign(normalContainer.style, {
            maxHeight: "300px",
            overflowY: "auto",
            marginTop: "1em"
          });
          this.normal.forEach((item) => {
            const row = normalContainer.createDiv();
            Object.assign(row.style, {
              display: "flex",
              alignItems: "flex-start",
              justifyContent: "space-between",
              padding: "6px 0",
              fontFamily: "monospace"
            });
            const label = row.createDiv();
            label.addClass("forceupdate-flexcolumn");
            const labelWrapper = label.createDiv();
            labelWrapper.textContent = item.filePath;
            const note = label.createDiv({ text: item.action });
            note.addClass("forceupdate-note");
            const checkbox = row.createEl("input", { type: "checkbox" });
            checkbox.checked = item.selected;
            checkbox.onchange = () => {
              item.selected = checkbox.checked;
            };
          });
        } else {
          const noCandidates = this.contentEl.createEl("div");
          Object.assign(noCandidates.style, {
            display: "inline-block",
            fontFamily: "monospace",
            fontStyle: "italic",
            marginTop: "0.5em"
          });
          noCandidates.textContent = "No force-update candidates.";
        }
        if (this.denied.length) {
          const denyDetails = this.contentEl.createEl("details", { cls: "vk-section" });
          denyDetails.open = false;
          const summary = denyDetails.createEl("summary", { cls: "vk-section-header" });
          Object.assign(summary.style, {
            cursor: "pointer",
            display: "flex",
            color: "var(--text-faint)",
            alignItems: "center",
            gap: "0.5em",
            marginTop: "1em"
          });
          summary.createEl("span", { text: `Deny-List Files (${this.denied.length})` });
          const toggleIcon = summary.createEl("span", { text: "VV", cls: "vk-toggle-icon" });
          Object.assign(toggleIcon.style, {
            fontWeight: "bold",
            display: "inline-block",
            transition: "transform 0.2s ease",
            transformOrigin: "50% 50%",
            userSelect: "none",
            transform: "rotate(180deg)"
          });
          denyDetails.ontoggle = () => {
            toggleIcon.toggleClass("vv-rotated", !denyDetails.open);
          };
          const denyBody = denyDetails.createDiv({ cls: "vk-section-body" });
          denyBody.addClass("denylist");
          this.denied.forEach((item) => {
            const row = denyBody.createDiv();
            Object.assign(row.style, {
              display: "flex",
              alignItems: "flex-start",
              justifyContent: "space-between",
              padding: "6px 0",
              fontFamily: "monospace",
              color: "var(--text-faint)",
              fontStyle: "italic"
            });
            const labelWrapper = row.createDiv();
            labelWrapper.textContent = item.filePath;
            labelWrapper.addClass("forceupdate-labelwrapper");
            const note = row.createDiv({ text: item.action });
            note.addClass("forceupdate-note-b");
            const checkbox = row.createEl("input", { type: "checkbox" });
            checkbox.checked = item.selected;
            checkbox.disabled = true;
            checkbox.title = "This item is deny-listed";
          });
        }
        if (this.plugin.settings.reparseGamesets) {
          this.contentEl.createDiv({ cls: "mod-aux-text" }).setText("\u{1F504} Refreshing Gameset Data");
        }
        const buttonRow = this.contentEl.createEl("div");
        Object.assign(buttonRow.style, {
          display: "flex",
          justifyContent: "flex-end",
          gap: "0.5em",
          marginTop: "1.5em"
        });
        const cancelBtn = buttonRow.createEl("button", { text: "Cancel" });
        cancelBtn.onclick = () => this.close();
        const confirmBtn = buttonRow.createEl("button", {
          text: "Confirm & Update",
          cls: "mod-cta"
        });
        confirmBtn.onclick = async () => {
          if (confirmBtn.disabled) return;
          const cancelBtnEl = buttonRow.querySelector("button:not(.mod-cta)");
          const prevDisabledCancel = cancelBtnEl?.disabled ?? false;
          confirmBtn.classList.add("mod-loading");
          confirmBtn.setAttribute("aria-busy", "true");
          confirmBtn.disabled = true;
          if (cancelBtnEl) cancelBtnEl.disabled = true;
          try {
            await this.plugin.performForceUpdateWithSelection(this.normal);
            this.close();
            const success = new import_obsidian11.Modal(this.app);
            success.onOpen = () => {
              success.contentEl.empty();
              success.titleEl.setText("\u2705 Toolkit Updated");
              const msg = success.contentEl.createEl("div", { cls: "installsuccess" });
              let seconds = 3;
              const render = () => {
                msg.setText(`Reloading vault in ${seconds}\u2026`);
              };
              render();
              const timer = window.setInterval(() => {
                seconds -= 1;
                if (seconds <= 0) {
                  window.clearInterval(timer);
                  success.close();
                  try {
                    this.app.commands.executeCommandById("app:reload");
                  } catch {
                    window.location.reload();
                  }
                  return;
                }
                render();
              }, 1e3);
            };
            success.open();
          } catch (err) {
            console.error("Install failed:", err);
            confirmBtn.classList.remove("mod-loading");
            confirmBtn.removeAttribute("aria-busy");
            confirmBtn.disabled = false;
            if (cancelBtnEl) cancelBtnEl.disabled = prevDisabledCancel;
          }
        };
      }
      onClose() {
        this.contentEl.empty();
      }
    }(this.app, normalItems, denyItems);
    modal.plugin = this;
    modal.open();
  }
  async updateEntryFromManifest(entry, force = false) {
    const custom = this.settings.customPaths.find((c) => c.manifestKey === entry.key);
    if (custom?.doUpdate === false) return;
    const finalVaultPath = custom?.vaultPath ?? this.resolveVaultPath(entry.path);
    if (!force && await this.fileCacheManager.isUpToDate(finalVaultPath)) return;
    const exists = await this.app.vault.adapter.exists(finalVaultPath);
    if (force && exists) {
      try {
        const current = await this.app.vault.adapter.read(finalVaultPath);
        await this.backupFile(finalVaultPath, current);
      } catch (e) {
        console.warn("Backup before force write failed:", finalVaultPath, e);
      }
    }
    const url = `https://raw.githubusercontent.com/slamwise0001/VVunderlore-Toolkit-Full/main/${entry.path}`;
    try {
      const res = await fetch(url);
      const text = await res.text();
      if (exists) {
        await this.app.vault.adapter.write(finalVaultPath, text);
      } else {
        await this.app.vault.create(finalVaultPath, text);
      }
      await this.fileCacheManager.updateCache(finalVaultPath, text, entry.path);
    } catch (e) {
      console.error(`\u274C Error updating ${entry.displayName}:`, e);
    }
  }
  async performForceUpdateWithSelection(previewList) {
    this.settings.backupFiles = {};
    await this.saveSettings();
    const toUpdate = previewList.filter(
      (item) => item.selected && !item.isFolder && !this.settings.customPaths.some(
        (c) => c.vaultPath === item.filePath && c.doUpdate === false
      )
    );
    if (toUpdate.length === 0) {
      return;
    }
    if (this.settings.autoBackupBeforeUpdate) {
      new import_obsidian11.Notice("Starting safety backup of selected files\u2026");
      let backupSucceeded = false;
      try {
        const pathsToBackup = toUpdate.map((i) => i.filePath);
        if (pathsToBackup.length) {
          await this.writePartialMirror(pathsToBackup, "pre-force-update");
          backupSucceeded = true;
        }
      } catch (e) {
        console.warn("[VV] Partial mirror backup failed; falling back to in-memory backup.", e);
      }
      if (!backupSucceeded) {
        try {
          const now = (/* @__PURE__ */ new Date()).toISOString();
          let backedUp = 0;
          for (const item of toUpdate) {
            try {
              if (await this.app.vault.adapter.exists(item.filePath)) {
                const current = await this.app.vault.adapter.read(item.filePath);
                await this.backupFile(item.filePath, current);
                backedUp++;
              }
            } catch (e) {
              console.warn("[VV] In-memory pre-backup failed for", item.filePath, e);
            }
          }
          if (backedUp > 0) {
            this.settings.lastBackupTime = now;
            await this.saveSettings();
            backupSucceeded = true;
          }
        } catch (e) {
          console.warn("[VV] In-memory backup phase encountered an error.", e);
        }
      }
      if (backupSucceeded) {
        new import_obsidian11.Notice("Backup complete. Continuing with update\u2026");
      } else {
        console.error("[VV] No backup could be created; proceeding anyway per user action.");
      }
    }
    let updatedCount = 0;
    try {
      for (const item of toUpdate) {
        const entry = this.manifestCache.files.find(
          (f) => this.resolveVaultPath(f.path) === item.filePath
        );
        if (!entry) {
          console.warn("[VV] Could not match preview item to manifest:", item.filePath);
          continue;
        }
        await this.updateEntryFromManifest(entry, true);
        updatedCount++;
      }
      for (const entry of this.manifestCache.folders) {
        if (!await this.app.vault.adapter.exists(entry.path)) {
          await this.app.vault.createFolder(entry.path);
        }
      }
      try {
        await updateModalFormsFromRepo(this.app);
      } catch (e) {
        console.warn("[VV] Modal Forms updater (force selection) failed:", e);
      }
      await this.updateVersionFile();
      this.settings.installedVersion = this.settings.latestToolkitVersion ?? "unknown";
      this.settings.lastForceUpdate = (/* @__PURE__ */ new Date()).toISOString();
      await this.saveSettings();
      if (this.settings.reparseGamesets) {
        try {
          await this.refreshGameSetData();
        } catch (e) {
          console.warn("[VV] Game set refresh failed:", e);
        }
      }
      if (this.settingsTab) {
        await this.settingsTab.updateVersionDisplay();
      }
    } catch (err) {
      console.error("[VV] Force update failed. Version not changed.", err);
    }
    if (this.settings.highlightEnabled) {
      this.enableHighlight();
    }
  }
  // ─── SINGLE-FILE UPDATE (with GitHub API + raw fallback) ──────────────
  async updateSingleFileFromGitHub({ githubPath, vaultPath }, force = false) {
    if (this.settings.customizeUpdates) {
      vaultPath = this.resolveVaultPath(githubPath);
      const custom = this.settings.customPaths.find((c) => c.manifestKey === githubPath);
      if (custom?.doUpdate === false) {
        return;
      }
    } else {
      vaultPath = githubPath;
    }
    if (!vaultPath) {
      console.error(`\u274C No valid vault path resolved for ${githubPath}`);
      return;
    }
    const oldVault = this.oldPathsByGithub[githubPath];
    if (oldVault && oldVault !== vaultPath) {
      if (await this.app.vault.adapter.exists(vaultPath)) {
        const stray = await this.app.vault.adapter.read(vaultPath);
        await this.backupFile(vaultPath, stray);
        await this.app.vault.adapter.remove(vaultPath);
      }
      const oldFile = this.app.vault.getAbstractFileByPath(oldVault);
      if (oldFile instanceof import_obsidian11.TFile) {
        await this.app.vault.rename(oldFile, vaultPath);
        const newContent = await this.app.vault.adapter.read(vaultPath);
        await this.fileCacheManager.updateCache(vaultPath, newContent, githubPath);
        return;
      }
    }
    const fileExists = await this.app.vault.adapter.exists(vaultPath);
    if (force && fileExists) {
      const current = await this.app.vault.adapter.read(vaultPath);
      await this.backupFile(vaultPath, current);
    }
    if (!force && fileExists && await this.fileCacheManager.isUpToDate(vaultPath)) {
      return;
    }
    const apiUrl = encodeURI(
      `https://api.github.com/repos/slamwise0001/VVunderlore-Toolkit-Full/contents/${githubPath}?ref=main`
    );
    try {
      let res = await fetch(apiUrl);
      if (res.status === 404) {
        const rawUrl = encodeURI(
          `https://raw.githubusercontent.com/slamwise0001/VVunderlore-Toolkit-Full/main/${githubPath}`
        );
        res = await fetch(rawUrl);
        if (!res.ok) throw new Error(`Raw fetch failed: ${res.statusText}`);
        const content2 = await res.text();
        if (fileExists) {
          await this.app.vault.adapter.write(vaultPath, content2);
        } else {
          await this.app.vault.create(vaultPath, content2);
        }
        await this.fileCacheManager.updateCache(vaultPath, content2, githubPath);
        return;
      }
      if (!res.ok) throw new Error(`GitHub API error: ${res.statusText}`);
      const { download_url } = await res.json();
      const content = await (await fetch(download_url)).text();
      if (fileExists) {
        await this.app.vault.adapter.write(vaultPath, content);
      } else {
        await this.app.vault.create(vaultPath, content);
      }
      await this.fileCacheManager.updateCache(vaultPath, content, githubPath);
    } catch (e) {
      console.error(`\u274C Failed to update ${vaultPath}`, e);
    }
  }
  // ─── PREVIEW + REMOTE-BASELINE + DIFF ─────────────────────────────────
  async previewUpdatesModal() {
    await this.syncManifest();
    await this.fetchRemoteBaseline();
    const diffs = await this.buildUpdatePreview();
    const denyListedLines = [];
    const normalLines = [];
    for (const d of diffs) {
      if (d.startsWith("\u274C deny\u2010listed")) {
        denyListedLines.push(d);
      } else {
        normalLines.push(d);
      }
    }
    const diffCount = normalLines.length;
    const modal = new class extends import_obsidian11.Modal {
      constructor(app, normal, denied, diffCount2) {
        super(app);
        this.normal = normal;
        this.denied = denied;
        this.diffCount = diffCount2;
      }
      onOpen() {
        this.contentEl.empty();
        this.titleEl.setText("Update Preview");
        this.contentEl.createEl("p", {
          text: "Only files whose contents differ from GitHub will be updated:"
        });
        if (this.normal.length) {
          const ul = this.contentEl.createEl("ul");
          this.normal.forEach((line) => {
            const li = ul.createEl("li", { text: line });
          });
        } else {
          this.contentEl.createEl("div", {
            text: "\u2705 Everything is already up to date!",
            cls: "mod-info"
          });
        }
        if (this.denied.length) {
          const denyDetails = this.contentEl.createEl("details", { cls: "vk-section" });
          denyDetails.open = false;
          const summary = denyDetails.createEl("summary", { cls: "vk-section-header" });
          Object.assign(summary.style, {
            cursor: "pointer",
            display: "flex",
            color: "var(--text-faint)",
            alignItems: "center",
            gap: "0.5em"
          });
          summary.createEl("span", { text: `Deny\u2010List Files (${this.denied.length})` });
          const toggleIcon = summary.createEl("span", { text: "VV", cls: "vk-toggle-icon" });
          Object.assign(toggleIcon.style, {
            fontWeight: "bold",
            display: "inline-block",
            transition: "transform 0.2s ease",
            transformOrigin: "50% 50%",
            userSelect: "none",
            transform: "rotate(180deg)"
          });
          denyDetails.ontoggle = () => {
            toggleIcon.toggleClass("vv-rotated", !denyDetails.open);
          };
          const denyBody = denyDetails.createDiv({ cls: "vk-section-body" });
          denyBody.addClass("denylist");
          const denyUl = denyBody.createEl("ul");
          this.denied.forEach((line) => {
            const li = denyUl.createEl("li", { text: line });
            li.addClass("forceupdate-note-c");
          });
        }
        const buttonRow = this.contentEl.createEl("div");
        Object.assign(buttonRow.style, {
          display: "flex",
          justifyContent: "flex-end",
          marginTop: "1.25em"
          // tweak spacing as you like
        });
        const confirmBtn = buttonRow.createEl("button", {
          text: "Confirm & Update",
          cls: "mod-cta"
        });
        confirmBtn.onclick = async () => {
          if (confirmBtn.disabled) return;
          const cancelBtnEl = buttonRow.querySelector("button:not(.mod-cta)");
          const prevDisabledCancel = cancelBtnEl?.disabled ?? false;
          confirmBtn.classList.add("mod-loading");
          confirmBtn.setAttribute("aria-busy", "true");
          confirmBtn.disabled = true;
          if (cancelBtnEl) cancelBtnEl.disabled = true;
          try {
            await this.plugin.updateSelectedToolkitContent();
            this.close();
            if (this.diffCount > 0) {
              const success = new import_obsidian11.Modal(this.app);
              success.onOpen = () => {
                success.contentEl.empty();
                success.titleEl.setText("\u2705 Toolkit Updated");
                const msg = success.contentEl.createEl("div", { cls: "installsuccess" });
                let seconds = 3;
                const render = () => {
                  msg.setText(`Reloading vault in ${seconds}\u2026`);
                };
                render();
                const timer = window.setInterval(() => {
                  seconds -= 1;
                  if (seconds <= 0) {
                    window.clearInterval(timer);
                    success.close();
                    try {
                      this.app.commands.executeCommandById("app:reload");
                    } catch {
                      window.location.reload();
                    }
                    return;
                  }
                  render();
                }, 1e3);
                success.onClose = () => window.clearInterval(timer);
              };
              success.open();
            } else {
              new import_obsidian11.Notice("Already up to date \u2014 no changes applied.");
            }
          } catch (err) {
            console.error("Install failed:", err);
            confirmBtn.classList.remove("mod-loading");
            confirmBtn.removeAttribute("aria-busy");
            confirmBtn.disabled = false;
            if (cancelBtnEl) cancelBtnEl.disabled = prevDisabledCancel;
          }
        };
        const cancelBtn = buttonRow.createEl("button", { text: "Cancel" });
        cancelBtn.onclick = () => this.close();
      }
      onClose() {
        this.contentEl.empty();
      }
    }(this.app, normalLines, denyListedLines, diffCount);
    modal.plugin = this;
    modal.open();
  }
  async buildUpdatePreview() {
    const changes = [];
    const denyListedFolders = this.settings.customPaths.filter((c) => c.doUpdate === false).map((c) => c.manifestKey);
    for (const f of this.manifestCache.files) {
      if (f.optional) {
        continue;
      }
      const custom = this.settings.customPaths.find((c) => c.manifestKey === f.key);
      const isInDenyFolder = denyListedFolders.some(
        (folder) => f.path.startsWith(folder + "/")
      );
      if (custom?.doUpdate === false || isInDenyFolder) {
        const vp = custom?.vaultPath ?? this.resolveVaultPath(f.path);
        const exists = await this.app.vault.adapter.exists(vp);
        const upToDate = exists && await this.fileCacheManager.isUpToDate(vp);
        if (!exists || !upToDate) {
          changes.push(`\u274C deny\u2010listed \u2013 will not update: ${vp}`);
        }
      }
    }
    if (!this.settings.customizeUpdates) {
      for (const f of this.manifestCache.files) {
        if (f.optional) {
          continue;
        }
        const custom = this.settings.customPaths.find((c) => c.manifestKey === f.key);
        const isInDenyFolder = denyListedFolders.some(
          (folder) => f.path.startsWith(folder + "/")
        );
        if (custom?.doUpdate === false || isInDenyFolder) {
          continue;
        }
        const vp = this.resolveVaultPath(f.path);
        let tag = "";
        if (vp !== f.path) tag = " (remapped)";
        const exists = await this.app.vault.adapter.exists(vp);
        const upToDate = exists && await this.fileCacheManager.isUpToDate(vp);
        if (!exists) {
          changes.push(`\u{1F4C4} New file: ${vp}${tag}`);
        } else if (!upToDate) {
          changes.push(`\u{1F501} Will update: ${vp}${tag}`);
        }
      }
      for (const fld of this.manifestCache.folders) {
        if (fld.optional) {
          continue;
        }
        const isDenyFolder = denyListedFolders.includes(fld.path);
        const exists = await this.app.vault.adapter.exists(fld.path);
        if (!exists && !isDenyFolder) {
          changes.push(`\u{1F4C1} New folder: ${fld.path}`);
        }
      }
      return changes.length ? changes : ["\u2705 Everything is already up to date!"];
    }
    for (const f of this.manifestCache.files) {
      if (f.optional) {
        continue;
      }
      const custom = this.settings.customPaths.find((c) => c.manifestKey === f.path);
      const isInDenyFolder = denyListedFolders.some(
        (folder) => f.path.startsWith(folder + "/")
      );
      if (custom?.doUpdate === false || isInDenyFolder) {
        continue;
      }
      const vp = custom?.vaultPath ?? this.resolveVaultPath(f.path);
      let tag = "";
      if (vp !== f.path) tag = " (remapped)";
      const exists = await this.app.vault.adapter.exists(vp);
      const upToDate = exists && await this.fileCacheManager.isUpToDate(vp);
      if (!exists) {
        changes.push(`\u{1F4C4} New file: ${vp}${tag}`);
      } else if (!upToDate) {
        changes.push(`\u{1F501} Will update: ${vp}${tag}`);
      }
    }
    for (const fld of this.manifestCache.folders) {
      if (fld.optional) {
        continue;
      }
      const isDenyFolder = denyListedFolders.includes(fld.path);
      const exists = await this.app.vault.adapter.exists(fld.path);
      if (!exists && !isDenyFolder) {
        changes.push(`\u{1F4C1} New folder: ${fld.path}`);
      }
    }
    for (const f of this.manifestCache.files) {
      if (f.optional) {
        continue;
      }
      const manifestKey = f.key;
      const manifestPath = f.path;
      const custom = this.settings.customPaths.find((c) => c.manifestKey === manifestKey);
      const prevPath = this.oldPathsByGithub[manifestPath];
      const isInDenyFolder = denyListedFolders.some(
        (folder) => manifestPath.startsWith(folder + "/")
      );
      if (custom?.doUpdate === false || isInDenyFolder) {
        continue;
      }
      if (custom && custom.vaultPath && custom.vaultPath !== manifestPath) {
        continue;
      }
      if (prevPath && prevPath !== manifestPath && (!custom || custom.vaultPath === manifestPath)) {
        changes.push(`\u27A1\uFE0F Moved: ${prevPath} \u2192 ${manifestPath}`);
      }
    }
    return changes.length ? changes : ["\u2705 Everything is already up to date!"];
  }
  // ─── VERSION-CHECK / UPDATE FLOW ─────────────────────────────────────
  async checkForUpdates() {
    const isNewerVersion = (remote, local) => {
      const pa = remote.replace(/^v/, "").split(".").map((n) => parseInt(n, 10) || 0);
      const pb = local.replace(/^v/, "").split(".").map((n) => parseInt(n, 10) || 0);
      for (let i = 0; i < Math.max(pa.length, pb.length); i++) {
        if ((pa[i] || 0) > (pb[i] || 0)) return true;
        if ((pa[i] || 0) < (pb[i] || 0)) return false;
      }
      return false;
    };
    const toolkitPath = ".version.json";
    const toolkitUrl = "https://raw.githubusercontent.com/slamwise0001/vvunderlore-toolkit-full/main/.version.json";
    const pluginUrl = "https://raw.githubusercontent.com/slamwise0001/vvunderlore-toolkit-plugin/main/version.json";
    const changelogUrl = "https://raw.githubusercontent.com/slamwise0001/VVunderlore-Toolkit-Full/main/README.md";
    let localTK = "0.0.0";
    if (this.settings.isFirstRun !== "yes") {
      try {
        const content = await this.app.vault.adapter.read(toolkitPath);
        const json = JSON.parse(content);
        localTK = json.version || localTK;
      } catch (err) {
        console.error("\u274C Failed to read local toolkit version:", err);
      }
    }
    let remoteTK = "0.0.0";
    try {
      const res = await fetch(toolkitUrl);
      const data = await res.json();
      remoteTK = data.version || remoteTK;
      this.settings.latestToolkitVersion = remoteTK;
      if (data.defaultPaths) {
        this.settings.latestDefaults = data.defaultPaths;
      }
      this.settings.lastChecked = (/* @__PURE__ */ new Date()).toISOString();
      await this.saveSettings();
    } catch (err) {
      console.error("\u274C Failed to fetch remote toolkit version:", err);
    }
    if (isNewerVersion(remoteTK, localTK)) {
      new import_obsidian11.Notice(`\u26A0\uFE0F Toolkit update available! Latest: v${remoteTK}`);
      await this.fetchRemoteBaseline();
    }
    const localPL = this.manifest.version;
    let remotePL = localPL;
    try {
      const res = await fetch(pluginUrl);
      const data = await res.json();
      remotePL = data.version || remotePL;
    } catch (err) {
    }
    if (isNewerVersion(remotePL, localPL)) {
      new import_obsidian11.Notice(`\u2699\uFE0F Plugin update available! Latest: v${remotePL}`);
    }
    try {
      const changelogRes = await fetch(changelogUrl);
      this.changelog = await changelogRes.text();
    } catch (err) {
      console.error("\u274C Failed to fetch changelog:", err);
    }
  }
  async loadSettings() {
    const raw = await this.loadData();
    const cleaned = raw ?? {};
    if (cleaned.needsInstall != null) {
      delete cleaned.needsInstall;
    }
    this.settings = Object.assign({}, DEFAULT_SETTINGS, cleaned);
    if (typeof cleaned.preferNameWhenBoth === "boolean") {
      this.settings.sessionTitlePreference = cleaned.preferNameWhenBoth ? "name" : "date";
      delete this.settings.preferNameWhenBoth;
    }
    ;
    this.isFirstRun = !await this.app.vault.adapter.exists(".vvunderlore_installed");
    this.fileCacheManager = new ToolkitFileCacheManager(
      this.app.vault,
      cleaned.fileCache ?? {},
      async () => await this.saveSettings()
    );
    await this.saveSettings();
    if (typeof this.settings.rulesetCompendium !== "string") {
      this.settings.rulesetCompendium = "";
    }
    if (!Array.isArray(this.settings.rulesetReference)) {
      this.settings.rulesetReference = [];
    }
  }
  async saveSettings() {
    await this.saveData({
      ...this.settings,
      fileCache: this.fileCacheManager.getCache()
    });
  }
  async getLocalToolkitVersion() {
    try {
      const content = await this.app.vault.adapter.read(".version.json");
      const json = JSON.parse(content);
      return json.version || null;
    } catch (err) {
      console.error("\u274C Failed to read .version.json:", err);
      return null;
    }
  }
  async updateFullToolkitRepo() {
    const excluded = [
      this.app.vault.configDir,
      ".gitignore",
      ".gitattributes",
      ".DS_Store",
      "plugins",
      "Compendium",
      "README.md",
      ".version.json",
      ".github"
    ];
    const fetchRepoRoot = async () => {
      const apiUrl = "https://api.github.com/repos/slamwise0001/VVunderlore-Toolkit-Full/contents/";
      const response = await fetch(apiUrl);
      if (!response.ok) throw new Error(`Failed to fetch repo root`);
      return await response.json();
    };
    try {
      const contents = await fetchRepoRoot();
      const filtered = contents.filter(
        (item) => !excluded.some(
          (ex) => item.path === ex || item.path.startsWith(`${ex}/`)
        )
      );
      filtered.sort((a, b) => a.type === b.type ? 0 : a.type === "tree" ? -1 : 1);
      for (const item of filtered) {
        if (item.type === "dir") {
          await this.updateFolderFromGitHub(item.path, item.path);
        }
        if (item.type === "file") {
          const response = await fetch(item.download_url);
          const content = await response.text();
          const filePath = item.path;
          const exists = await this.app.vault.adapter.exists(filePath);
          if (!exists) {
            await this.app.vault.create(filePath, content);
          } else {
            const current = await this.app.vault.adapter.read(filePath);
            if (current !== content) {
              await this.app.vault.adapter.write(filePath, content);
            }
          }
          await this.fileCacheManager.updateCache(filePath, content, item.path, false);
        }
      }
      await this.saveSettings();
      const markerPath = ".vvunderlore_installed";
      if (!await this.app.vault.adapter.exists(markerPath)) {
        await this.app.vault.create(markerPath, "");
      }
      if (this.settings.highlightEnabled) {
        this.enableHighlight();
      }
      try {
        await updateModalFormsFromRepo(this.app);
      } catch (e) {
        console.warn("Modal Forms updater (full repo) failed:", e);
      }
      new import_obsidian11.Notice("\u2705 VVunderlore Toolkit successfully installed!");
    } catch (err) {
      console.error("\u274C updateFullToolkitRepo() error:", err);
      new import_obsidian11.Notice("\u274C Failed to update toolkit. See console for details.");
    }
  }
  async updateSelectedToolkitContent() {
    if (this.settings.autoBackupBeforeUpdate) {
      const folder = await this.backupManager.backupVaultMirror("pre-update");
      new import_obsidian11.Notice(`Vault mirror backup created at: ${folder}`);
    }
    if (!this.settings.latestDefaults) {
      new import_obsidian11.Notice("\u274C GitHub defaults not loaded yet.");
      return;
    }
    const allManifestFiles = this.manifestCache.files.map((f) => f.path);
    const fileOverrides = Object.fromEntries(
      this.settings.customPaths.map((c) => [c.manifestKey, c])
    );
    try {
      for (const ghPath of allManifestFiles) {
        const override = fileOverrides[ghPath];
        if (override?.doUpdate === false) {
          continue;
        }
        const vaultPath = this.settings.customizeUpdates ? this.resolveVaultPath(ghPath) : ghPath;
        const entry = this.manifestCache.files.find((f) => f.path === ghPath);
        if (!entry) continue;
        await this.updateEntryFromManifest(entry, false);
      }
      for (const folder of this.manifestCache.folders) {
        if (!await this.app.vault.adapter.exists(folder.path)) {
          await this.app.vault.createFolder(folder.path);
        }
      }
      try {
        await updateModalFormsFromRepo(this.app);
      } catch (e) {
        console.warn("Modal Forms updater (selected content) failed:", e);
      }
      await this.updateVersionFile();
      this.settings.installedVersion = this.settings.latestToolkitVersion;
      await this.saveSettings();
      new import_obsidian11.Notice("\u2705 Toolkit content updated.");
      if (this.settingsTab) {
        await this.settingsTab.updateVersionDisplay();
      }
    } catch (err) {
      console.error("\u274C Custom update failed. Version not updated.", err);
      new import_obsidian11.Notice("\u274C Update failed. See console for details.");
    }
    if (this.settings.highlightEnabled) {
      this.enableHighlight();
    }
  }
  async updateFolderFromGitHub(githubFolderPath, vaultFolderPath) {
    const excluded = [
      this.app.vault.configDir,
      ".gitignore",
      ".gitattributes",
      ".DS_Store",
      "plugins",
      "Compendium",
      "README.md",
      ".version.json",
      ".github"
    ];
    if (excluded.some((ex) => githubFolderPath === ex || githubFolderPath.startsWith(`${ex}/`))) {
      return;
    }
    const apiUrl = `https://api.github.com/repos/slamwise0001/VVunderlore-Toolkit-Full/contents/${githubFolderPath}`;
    try {
      const response = await fetch(apiUrl);
      if (!response.ok) throw new Error(`Failed to fetch folder: ${githubFolderPath}`);
      const files = await response.json();
      if (!await this.app.vault.adapter.exists(vaultFolderPath)) {
        await this.app.vault.createFolder(vaultFolderPath);
      }
      for (const file of files) {
        if (excluded.some((ex) => file.path === ex || file.path.startsWith(`${ex}/`))) {
          continue;
        }
        const filePath = `${vaultFolderPath}/${file.name}`;
        if (file.type === "file") {
          const fileResponse = await fetch(file.download_url);
          const content = await fileResponse.text();
          const exists = await this.app.vault.adapter.exists(filePath);
          if (exists) {
            const current = await this.app.vault.adapter.read(filePath);
            if (current !== content) {
              await this.backupFile(filePath, current);
            }
          }
          if (!exists) {
            await this.app.vault.create(filePath, content);
          } else {
            if (await this.app.vault.adapter.read(filePath) !== content) {
              await this.app.vault.adapter.write(filePath, content);
            }
          }
          await this.fileCacheManager.updateCache(filePath, content, file.path, false);
        } else if (file.type === "dir") {
          await this.updateFolderFromGitHub(file.path, `${vaultFolderPath}/${file.name}`);
        }
      }
      await this.saveSettings();
      new import_obsidian11.Notice(`\u2705 Folder synced: ${vaultFolderPath}`);
    } catch (error) {
      console.error(`\u274C Failed to sync folder with m-repo: ${vaultFolderPath}`, error);
      new import_obsidian11.Notice(`\u274C Failed to update folder: ${vaultFolderPath}`);
    }
  }
  async rebuildFileCache() {
    const cache = this.fileCacheManager;
    const tasks = [];
    for (const entry of this.manifestCache.files) {
      const vaultPath = this.resolveVaultPath(entry.path);
      if (await this.app.vault.adapter.exists(vaultPath)) {
        tasks.push((async () => {
          const content = await this.app.vault.adapter.read(vaultPath);
          await cache.updateCache(vaultPath, content, entry.path, false);
        })());
      }
    }
    for (const folderEntry of this.manifestCache.folders) {
      const folderPath = folderEntry.path;
      const folder = this.app.vault.getAbstractFileByPath(folderPath);
      if (folder instanceof import_obsidian11.TFolder) {
        import_obsidian11.Vault.recurseChildren(folder, (file) => {
          if (file instanceof import_obsidian11.TFile && file.extension === "md") {
            const filePath = file.path;
            tasks.push((async () => {
              const content = await this.app.vault.adapter.read(filePath);
              await cache.updateCache(filePath, content, filePath, false);
            })());
          }
        });
      }
    }
    const batchSize = 10;
    for (let i = 0; i < tasks.length; i += batchSize) {
      await Promise.all(tasks.slice(i, i + batchSize));
    }
    await this.saveSettings();
  }
  async showIndexingModal() {
    const modal = new class extends import_obsidian11.Modal {
      constructor(app) {
        super(app);
      }
      onOpen() {
        this.contentEl.addEventListener("click", (e) => e.stopPropagation());
        this.titleEl.setText("\u{1F504} Indexing Toolkit Files...");
        this.contentEl.createEl("p", {
          text: "Indexing and caching your VVunderlore Vault for faster updates and safer syncing."
        });
      }
    }(this.app);
    modal.open();
    await this.rebuildFileCache();
    modal.close();
    new import_obsidian11.Notice("\u2705 VVunderlore caching complete.");
  }
  async updateVersionFile() {
    if (!this.settings.latestToolkitVersion) {
      return;
    }
    const versionPath = ".version.json";
    const content = JSON.stringify({ version: this.settings.latestToolkitVersion }, null, 2);
    const exists = await this.app.vault.adapter.exists(versionPath);
    if (exists) {
      await this.app.vault.adapter.write(versionPath, content);
    } else {
      await this.app.vault.create(versionPath, content);
    }
  }
  /** main.ts **/
  /** 
   * Install the selected compendium and zero or more reference editions.
   */
  async installFullToolkit(opts = { compendium: "", references: [] }) {
    const { compendium, references } = opts;
    if (!compendium) {
      throw new Error("No compendium edition selected");
    }
    let installSucceeded = false;
    try {
      const treeApi = "https://api.github.com/repos/slamwise0001/VVunderlore-Toolkit-Full/git/trees/main?recursive=1";
      const resp = await fetch(treeApi);
      if (!resp.ok) {
        throw new Error(`Failed to list repo tree: ${resp.statusText}`);
      }
      const json = await resp.json();
      const items = Array.isArray(json.tree) ? json.tree : [];
      const staticEntries = items.filter(
        (item) => !this.excludedPaths.some(
          (ex) => item.path === ex || item.path.startsWith(`${ex}/`)
        )
      ).sort((a, b) => a.type === b.type ? 0 : a.type === "tree" ? -1 : 1);
      for (const entry of staticEntries) {
        if (entry.type === "tree") {
          if (!await this.app.vault.adapter.exists(entry.path)) {
            await this.app.vault.createFolder(entry.path);
          }
        } else {
          const rawUrl = `https://raw.githubusercontent.com/slamwise0001/VVunderlore-Toolkit-Full/main/${encodeURIComponent(entry.path)}`;
          const fileResp = await fetch(rawUrl);
          if (!fileResp.ok) continue;
          const text = await fileResp.text();
          if (await this.app.vault.adapter.exists(entry.path)) {
            const old = await this.app.vault.adapter.read(entry.path);
            if (old !== text) {
              await this.app.vault.adapter.write(entry.path, text);
            }
          } else {
            await this.app.vault.create(entry.path, text);
          }
        }
      }
      this.settings.rulesetCompendium = compendium;
      const pickedRefs = references.length > 0 ? references : this.settings.rulesetReference;
      this.settings.rulesetReference = pickedRefs;
      await this.saveSettings();
      const jobs = [
        importRulesetData({ app: this.app, editionKey: compendium, targetPath: "Compendium" }),
        ...pickedRefs.map((refKey) => {
          const displayName = getRulesetDisplayName(refKey);
          return importRulesetData({
            app: this.app,
            editionKey: refKey,
            targetPath: `Resources/Rulesets/${displayName}`
          });
        })
      ];
      await Promise.all(jobs);
      const parseJobs = [
        importRulesetData({
          app: this.app,
          editionKey: compendium,
          targetPath: `Compendium`
        }),
        ...references.map((refKey) => {
          const displayName = getRulesetDisplayName(refKey);
          return importRulesetData({
            app: this.app,
            editionKey: refKey,
            targetPath: `Resources/Rulesets/${displayName}`
          });
        })
      ];
      await Promise.all(parseJobs);
      try {
        await updateModalFormsFromRepo(this.app);
      } catch (e) {
        console.warn("Modal Forms updater (first-time install) failed:", e);
      }
      const marker = ".vvunderlore_installed";
      if (!await this.app.vault.adapter.exists(marker)) {
        await this.app.vault.create(marker, "");
      }
      this.settings.highlightEnabled = true;
      await this.saveSettings();
      this.enableHighlight();
      installSucceeded = true;
    } catch (err) {
      console.error("\u274C installFullToolkit()", err);
    } finally {
      if (this.settingsTab) this.settingsTab.display();
      new import_obsidian11.Notice(
        installSucceeded ? "\u2705 VVunderlore Toolkit successfully installed!" : "\u274C Failed to install toolkit. See console for details."
      );
    }
  }
  // * Re-parse all gameset data (ruleset compendium + reference sets)
  async refreshGameSetData() {
    const { rulesetCompendium, rulesetReference } = this.settings;
    if (!rulesetCompendium && rulesetReference.length === 0) {
      new import_obsidian11.Notice("\u26A0\uFE0F No gameset keys set; nothing to refresh.");
      return;
    }
    const jobs = [];
    if (rulesetCompendium) {
      jobs.push(importRulesetData({
        app: this.app,
        editionKey: rulesetCompendium,
        targetPath: "Compendium"
      }));
    }
    for (const ref of rulesetReference) {
      const displayName = getRulesetDisplayName(ref);
      jobs.push(importRulesetData({
        app: this.app,
        editionKey: ref,
        targetPath: `Resources/Rulesets/${displayName}`
      }));
    }
    await Promise.all(jobs);
    new import_obsidian11.Notice("\u2705 Game Set Data refreshed.");
  }
};
// Annotate the CommonJS export names for ESM import in node:
0 && (module.exports = {
  InstallingModal
});
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsic3JjL21haW4udHMiLCAic3JjL3NldHRpbmdzLnRzIiwgInNyYy9maXJzdGluc3RhbGxjb25maXJtLnRzIiwgInNyYy9lZGl0aW9ucy50cyIsICJzcmMvcGFyc2Vycy81ZS0yMDE0L2luc3RhbGxlci50cyIsICJzcmMvcGFyc2Vycy81ZS0yMDE0L2hlbHBlcnMvc291cmNlTWFwLnRzIiwgInNyYy9wYXJzZXJzLzVlLTIwMTQvaGVscGVycy90YWdSZXBsYWNlci50cyIsICJzcmMvcGFyc2Vycy81ZS0yMDE0L2hlbHBlcnMvbWFya2Rvd25UYWJsZS50cyIsICJzcmMvcGFyc2Vycy81ZS0yMDE0L2hlbHBlcnMvZm9ybWF0RW50cnkudHMiLCAic3JjL3BhcnNlcnMvNWUtMjAxNC9iZXN0aWFyeS50cyIsICJzcmMvcGFyc2Vycy81ZS0yMDE0L2l0ZW1zLnRzIiwgInNyYy9wYXJzZXJzLzVlLTIwMTQvaGVscGVycy9mcm9udG1hdHRlci50cyIsICJzcmMvcGFyc2Vycy81ZS0yMDE0L3NwZWxscy50cyIsICJzcmMvcGFyc2Vycy81ZS0yMDE0L3NwZWNpZXMudHMiLCAic3JjL3BhcnNlcnMvNWUtMjAxNC9jbGFzc2VzLnRzIiwgInNyYy9wYXJzZXJzLzVlLTIwMTQvcnVsZXMudHMiLCAic3JjL3BhcnNlcnMvNWUtMjAxNC9mZWF0cy50cyIsICJzcmMvcGFyc2Vycy81ZS0yMDE0L2JhY2tncm91bmRzLnRzIiwgInNyYy9wYXJzZXJzLzVlLTIwMjUvaW5zdGFsbGVyLnRzIiwgInNyYy9wYXJzZXJzLzVlLTIwMjUvaGVscGVycy9zb3VyY2VNYXAudHMiLCAic3JjL3BhcnNlcnMvNWUtMjAyNS9oZWxwZXJzL3RhZ1JlcGxhY2VyLnRzIiwgInNyYy9wYXJzZXJzLzVlLTIwMjUvaGVscGVycy9tYXJrZG93blRhYmxlLnRzIiwgInNyYy9wYXJzZXJzLzVlLTIwMjUvaGVscGVycy9mb3JtYXRFbnRyeS50cyIsICJzcmMvcGFyc2Vycy81ZS0yMDI1L2Jlc3RpYXJ5LnRzIiwgInNyYy9wYXJzZXJzLzVlLTIwMjUvaXRlbXMudHMiLCAic3JjL3BhcnNlcnMvNWUtMjAyNS9oZWxwZXJzL2Zyb250bWF0dGVyLnRzIiwgInNyYy9wYXJzZXJzLzVlLTIwMjUvc3BlbGxzLnRzIiwgInNyYy9wYXJzZXJzLzVlLTIwMjUvc3BlY2llcy50cyIsICJzcmMvcGFyc2Vycy81ZS0yMDI1L2NsYXNzZXMudHMiLCAic3JjL3BhcnNlcnMvNWUtMjAyNS9ydWxlcy50cyIsICJzcmMvcGFyc2Vycy81ZS0yMDI1L2ZlYXRzLnRzIiwgInNyYy9wYXJzZXJzLzVlLTIwMjUvYmFja2dyb3VuZHMudHMiLCAic3JjL3J1bGVzZXRJbnN0YWxsZXIudHMiLCAic3JjL2Fkdi1jYXRlZ29yaWVzLnRzIiwgInNyYy9maWxlQ2FjaGVNYW5hZ2VyLnRzIiwgInNyYy9iYWNrdXAvQmFja3VwTWFuYWdlci50cyIsICJzcmMvc2lkZWJhci9zYi13b3JsZGJ1aWxkaW5nLnRzIiwgInNyYy9zaWRlYmFyL3NiLWdhbWVwbGF5LnRzIiwgInNyYy9tb2RhbEZvcm1zVXBkYXRlci50cyJdLAogICJzb3VyY2VzQ29udGVudCI6IFsiaW1wb3J0IHsgQXBwLCBQbHVnaW4sIE5vdGljZSwgTW9kYWwsIFNldHRpbmcsIFRGb2xkZXIsIFRGaWxlLCBWYXVsdCwgcmVxdWVzdFVybCwgV29ya3NwYWNlTGVhZiwgYWRkSWNvbiwgTWFya2Rvd25WaWV3IH0gZnJvbSAnb2JzaWRpYW4nO1xuaW1wb3J0IHsgVG9vbGtpdFNldHRpbmdzVGFiIH0gZnJvbSAnLi9zZXR0aW5ncyc7XG5pbXBvcnQgeyBUb29sa2l0RmlsZUNhY2hlTWFuYWdlciB9IGZyb20gJy4vZmlsZUNhY2hlTWFuYWdlcic7XG5pbXBvcnQgdHlwZSB7IFRvb2xraXRGaWxlQ2FjaGVFbnRyeSB9IGZyb20gJy4vZmlsZUNhY2hlTWFuYWdlcic7XG5pbXBvcnQgeyBCYWNrdXBNYW5hZ2VyIH0gZnJvbSAnLi9iYWNrdXAvQmFja3VwTWFuYWdlcic7XG5pbXBvcnQgeyBzaG93Q3VzdG9tSW5zdGFsbE1vZGFsIH0gZnJvbSAnLi9jdXN0b21JbnN0YWxsTW9kYWwnO1xuaW1wb3J0IHsgQVZBSUxBQkxFX0VESVRJT05TIH0gZnJvbSAnLi9lZGl0aW9ucyc7XG5pbXBvcnQgeyBpbXBvcnRSdWxlc2V0RGF0YSB9IGZyb20gJy4vcnVsZXNldEluc3RhbGxlcic7XG5pbXBvcnQgeyBDb25maXJtRnJlc2hJbnN0YWxsTW9kYWwgfSBmcm9tICcuL2ZpcnN0aW5zdGFsbGNvbmZpcm0nO1xuaW1wb3J0IFwiLi4vc3R5bGVzLmNzc1wiO1xuaW1wb3J0IHsgU2lkZWJhclRlbXBsYXRlc1ZpZXcsIFNJREVCQVJfVklFV19UWVBFIH0gZnJvbSAnLi9zaWRlYmFyL3NiLXdvcmxkYnVpbGRpbmcnO1xuaW1wb3J0IHsgR2FtZXBsYXlTaWRlYmFyVmlldywgR0FNRVBMQVlfVklFV19UWVBFIH0gZnJvbSAnLi9zaWRlYmFyL3NiLWdhbWVwbGF5JztcbmltcG9ydCB7IHVwZGF0ZU1vZGFsRm9ybXNGcm9tUmVwbyB9IGZyb20gJy4vbW9kYWxGb3Jtc1VwZGF0ZXInO1xuaW1wb3J0IHsgQWR2ZW50dXJlU29ydE9wdGlvbiB9IGZyb20gJy4vdHlwZXMnO1xuaW1wb3J0IHsgZ2V0QWR2ZW50dXJlQ2F0ZWdvcnlJZHMgfSBmcm9tICcuL2Fkdi1jYXRlZ29yaWVzJztcblxuXG5mdW5jdGlvbiBnZXRSdWxlc2V0RGlzcGxheU5hbWUoa2V5OiBzdHJpbmcpOiBzdHJpbmcge1xuICBjb25zdCBlZCA9IEFWQUlMQUJMRV9FRElUSU9OUy5maW5kKGUgPT4gZS5pZCA9PT0ga2V5KTtcbiAgcmV0dXJuIGVkPy5sYWJlbCA/PyBrZXk7XG59XG5cbmNvbnN0IG1hcG1ha2luZ19pY29uID0gYFxuICA8c3ZnIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiB2aWV3Qm94PVwiMCAwIDI0IDI0XCIgYXJpYS1oaWRkZW49XCJ0cnVlXCI+XG4gICAgPGcgc3Ryb2tlPVwiY3VycmVudENvbG9yXCIgc3Ryb2tlLXdpZHRoPVwiMlwiIGZpbGw9XCJub25lXCIgc3Ryb2tlLWxpbmVjYXA9XCJyb3VuZFwiIHN0cm9rZS1saW5lam9pbj1cInJvdW5kXCI+XG4gICAgICA8cGF0aCBkPVwiTTIwLjk3IDEwLjE1djcuMDhjMCAuMzgtLjIxLjcyLS41NS44OWwtNC41NSAyLjI4Yy0uNTYuMjgtMS4yMy4yOC0xLjc5IDBsLTQuMjEtMi4xMWMtLjU2LS4yOC0xLjIzLS4yOC0xLjc5IDBMNC40MiAyMC4xMmExIDEgMCAwIDEtMS40NS0uOVY2LjQ3YzAtLjM4LjIxLS43Mi41NS0uODlsNC41NS0yLjI4Yy41Ni0uMjggMS4yMy0uMjggMS43OSAwbDIuNTIgMS4yOFwiLz5cbiAgICAgIDxwYXRoIGQ9XCJNMTQuOTcgMTMuNTF2Ny4xXCIvPlxuICAgICAgPHBhdGggZD1cIk04Ljk3IDMuMDl2MTVcIi8+XG4gICAgICA8cGF0aCBkPVwiTTIxLjQ4IDUuMDNhMS43OSAxLjc5IDAgMSAwLTIuNTMtMi41M2wtNC4yMiA0LjIyYy0uMi4yLS4zNS40NS0uNDMuNzJsLS43IDIuNDJhLjQuNCAwIDAgMCAuNTMuNDlsMi40Mi0uN2MuMjctLjA4LjUyLS4yMy43Mi0uNDNsNC4yMi00LjIyWlwiLz5cbiAgICA8L2c+XG4gIDwvc3ZnPlxuYDtcblxuY29uc3QgZ2FtZXBsYXlfaWNvbiA9IGBcbjxzdmcgaWQ9XCJMYXllcl8xXCIgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiIHZlcnNpb249XCIxLjFcIiB2aWV3Qm94PVwiMCAwIDI0IDI0XCI+XG4gIDwhLS0gR2VuZXJhdG9yOiBBZG9iZSBJbGx1c3RyYXRvciAyOS4yLjEsIFNWRyBFeHBvcnQgUGx1Zy1JbiAuIFNWRyBWZXJzaW9uOiAyLjEuMCBCdWlsZCAxMTYpICAtLT5cbiAgPGRlZnM+XG4gICAgPHN0eWxlPlxuICAgICAgLnN0MCB7XG4gICAgICAgIGZpbGw6IGN1cnJlbnRDb2xvcjtcbiAgICAgIH1cblxuICAgICAgLnN0MCwgLnN0MSB7XG4gICAgICAgIHN0cm9rZTogY3VycmVudENvbG9yO1xuICAgICAgICBzdHJva2UtbWl0ZXJsaW1pdDogMTA7XG4gICAgICB9XG5cbiAgICAgIC5zdDAsIC5zdDEsIC5zdDIge1xuICAgICAgICBzdHJva2Utd2lkdGg6IDJweDtcbiAgICAgIH1cblxuICAgICAgLnN0MSwgLnN0MiB7XG4gICAgICAgIGZpbGw6IG5vbmU7XG4gICAgICB9XG5cbiAgICAgIC5zdDIge1xuICAgICAgICBzdHJva2U6IGN1cnJlbnRDb2xvcjtcbiAgICAgICAgc3Ryb2tlLWxpbmVjYXA6IHJvdW5kO1xuICAgICAgICBzdHJva2UtbGluZWpvaW46IHJvdW5kO1xuICAgICAgfVxuXG4gICAgICAuc3QzIHtcbiAgICAgICAgZGlzcGxheTogbm9uZTtcbiAgICAgIH1cbiAgICA8L3N0eWxlPlxuICA8L2RlZnM+XG4gIDxnIGlkPVwiTGF5ZXJfNFwiIGNsYXNzPVwic3QzXCI+XG4gICAgPHBhdGggY2xhc3M9XCJzdDBcIiBkPVwiTTExLjk4LTI1LjE2Yy0xLjI5LDAtMi43OS4xOC0zLjI1LjIzLS4wNywwLS4xMi0uMDMtLjEyLS4wOGwuMTktMi41NmMwLS4wOC4wNS0uMTYuMTEtLjIxLjIyLS4xNy45MS0uNTEsMy4wNi0uNTFcIi8+XG4gICAgPHBhdGggY2xhc3M9XCJzdDFcIiBkPVwiTTguMjQtMjYuNjFzLTIuMzkuNDMtMi43OC43NmMtLjIyLjE5LTEuNTIsOS44OS0xLjksMTIuOTEtLjA3LjU2LjE4LDEuMTIuNjQsMS40NC41Ny4zOSwxLjMxLjg0LDEuNjcuODRcIi8+XG4gICAgPHBhdGggY2xhc3M9XCJzdDFcIiBkPVwiTTExLjk4LTguMzZjLTIuOTIsMC01LjA0LS4wOS01LjctLjEzLS4xMywwLS4yMS0uMTEtLjIxLS4yNC4wMy0uNDIuMTEtMS41LjE2LTIuMS4wMi0uMjYuMTktLjQ5LjQ0LS41N2wyLjY1LTEuMjhoMi42NlwiLz5cbiAgICA8cGF0aCBjbGFzcz1cInN0MFwiIGQ9XCJNMTEuOTgtOC4zNmMtMi45MiwwLTUuMDQtLjA5LTUuNy0uMTMtLjEzLDAtLjIxLS4xMS0uMjEtLjI0LjAzLS40Mi4xMS0xLjUuMTYtMi4xLjAyLS4yNi4xOS0uNDkuNDQtLjU3bDIuNjUtMS4yOGgyLjY2XCIvPlxuICAgIDxwYXRoIGNsYXNzPVwic3QwXCIgZD1cIk0xMS45OC04LjM2YzIuOTIsMCw1LjA0LS4wOSw1LjctLjEzLjEzLDAsLjIxLS4xMS4yMS0uMjQtLjAzLS40Mi0uMTEtMS41LS4xNi0yLjEtLjAyLS4yNi0uMTktLjQ5LS40NC0uNTdsLTIuNjUtMS4yOGgtMi42NlwiLz5cbiAgICA8cGF0aCBjbGFzcz1cInN0MFwiIGQ9XCJNMTEuOTgtMjUuMTZjMS4yOSwwLDIuNzkuMTgsMy4yNS4yMy4wNywwLC4xMi0uMDMuMTItLjA4bC0uMTktMi41NmMwLS4wOC0uMDUtLjE2LS4xMS0uMjEtLjIyLS4xNy0uOTEtLjUxLTMuMDYtLjUxXCIvPlxuICAgIDxwYXRoIGNsYXNzPVwic3QxXCIgZD1cIk05LTI0LjkybC0xLjQ3LDYuMTljLS4xMi41Mi0uMTksMS4wNi0uMTcsMS41OSwwLC40MS4wNS44OC4xNSwxLjI5LjI1Ljk0LDEuMzksMi4zLDEuMzksMy4xN2g2LjE3YzAtLjg2LDEuMTMtMi4yMywxLjM4LTMuMTcuMTEtLjQuMTQtLjg4LjE1LTEuMjkuMDEtLjU0LS4wNS0xLjA3LS4xNy0xLjU5bC0xLjQ3LTYuMTktLjIzLS4xMWMtMS44My0uMjItMy42Ny0uMjItNS41LDAsMCwwLS4yMy4xMS0uMjMuMTFaXCIvPlxuICAgIDxwYXRoIGNsYXNzPVwic3QxXCIgZD1cIk0xNS43Ny0yNi42MXMyLjM5LjQzLDIuNzguNzZjLjIyLjE5LDEuNTIsOS44OSwxLjksMTIuOTEuMDcuNTYtLjE4LDEuMTItLjY0LDEuNDQtLjU3LjM5LTEuMzEuODQtMS42Ny44NFwiLz5cbiAgPC9nPlxuICA8ZyBpZD1cIkxheWVyXzVcIiBjbGFzcz1cInN0M1wiPlxuICAgIDxwYXRoIGNsYXNzPVwic3QyXCIgZD1cIk0yMC45Ny0xNi4xNnY3LjA4YzAsLjM4LS4yMS43Mi0uNTUuODlsLTQuNTUsMi4yOGMtLjU2LjI4LTEuMjMuMjgtMS43OSwwbC00LjIxLTIuMTFjLS41Ni0uMjgtMS4yMy0uMjgtMS43OSwwbC0zLjY2LDEuODNjLS40OS4yNS0xLjA5LjA1LTEuMzQtLjQ1LS4wNy0uMTQtLjExLS4yOS0uMTEtLjQ1di0xMi43NmMwLS4zOC4yMS0uNzIuNTUtLjg5bDQuNTUtMi4yOGMuNTYtLjI4LDEuMjMtLjI4LDEuNzksMGwyLjUyLDEuMjhcIi8+XG4gICAgPHBhdGggY2xhc3M9XCJzdDJcIiBkPVwiTTE0Ljk3LTEyLjh2Ny4xXCIvPlxuICAgIDxwYXRoIGNsYXNzPVwic3QyXCIgZD1cIk04Ljk3LTIzLjIzdjE1XCIvPlxuICAgIDxwYXRoIGNsYXNzPVwic3QyXCIgZD1cIk0yMS40OC0yMS4yOWMuNy0uNy43LTEuODMsMC0yLjUzcy0xLjgzLS43LTIuNTMsMGwtNC4yMiw0LjIyYy0uMi4yLS4zNS40NS0uNDMuNzJsLS43LDIuNDJjLS4wNy4yMi4wNi40Ni4yOS41Mi4wOC4wMi4xNi4wMi4yNCwwbDIuNDItLjdjLjI3LS4wOC41Mi0uMjMuNzItLjQzbDQuMjItNC4yMmgwWlwiLz5cbiAgPC9nPlxuICA8ZyBpZD1cIkxheWVyXzZcIj5cbiAgICA8cGF0aCBjbGFzcz1cInN0MlwiIGQ9XCJNNS44NywxMC44NWgxMi4xNXY5LjE1YzAsLjU1LS40NSwxLTEsMUg2Ljg3Yy0uNTUsMC0xLS40NS0xLTF2LTkuMTVoMFpcIi8+XG4gICAgPHBvbHlsaW5lIGNsYXNzPVwic3QyXCIgcG9pbnRzPVwiNS44NyAxMC44NSAxLjk3IDkuMSAxLjk3IDE5LjE1IDYuNTYgMjAuOTVcIi8+XG4gICAgPHBvbHlsaW5lIGNsYXNzPVwic3QyXCIgcG9pbnRzPVwiMTguMDIgMTAuODUgMjIgOS4xIDIyIDE5LjE1IDE3LjMzIDIwLjk1XCIvPlxuICA8L2c+XG4gIDxnIGlkPVwiTGF5ZXJfN1wiPlxuICAgIDxwYXRoIGNsYXNzPVwic3QyXCIgZD1cIk04LjUsNS43N3MtMi4wOC0uOTUtMS44OS0zLjM0YzAsMCwxLjU2LDEuODQsMi43OSwxLjg2XCIvPlxuICAgIDxwYXRoIGNsYXNzPVwic3QyXCIgZD1cIk0xNS41MSw1Ljc3czIuMDgtLjk1LDEuODktMy4zNGMwLDAtMS41NiwxLjg0LTIuNzksMS44NlwiLz5cbiAgPC9nPlxuICA8ZyBpZD1cIkxheWVyXzNcIiBjbGFzcz1cInN0M1wiPlxuICAgIDxwYXRoIGNsYXNzPVwic3QyXCIgZD1cIk00MC42NiwxMS45N2gtNVwiLz5cbiAgICA8cGF0aCBjbGFzcz1cInN0MlwiIGQ9XCJNNDAuNjYsNy45N2gtNVwiLz5cbiAgICA8cGF0aCBjbGFzcz1cInN0MlwiIGQ9XCJNNDQuNjYsMTYuOTdWNC45N2MwLTEuMS0uOS0yLTItMmgtMTNcIi8+XG4gICAgPHBhdGggY2xhc3M9XCJzdDJcIiBkPVwiTTMzLjY2LDIwLjk3aDEyYzEuMSwwLDItLjksMi0ydi0xYzAtLjU1LS40NS0xLTEtMWgtMTBjLS41NSwwLTEsLjQ1LTEsMXYxYzAsMS4xLS45LDItMiwycy0yLS45LTItMlY0Ljk3YzAtMS4xLS45LTItMi0ycy0yLC45LTIsMnYyYzAsLjU1LjQ1LDEsMSwxaDNcIi8+XG4gIDwvZz5cbiAgPHBhdGggY2xhc3M9XCJzdDJcIiBkPVwiTTE0LjE3LDEwLjY3Yy45Ny0uNjksMS42NS0yLjA1LDEuNjUtMy4zNCwwLTIuMTEtMS43MS0zLjgyLTMuODItMy44MnMtMy44MiwxLjcxLTMuODIsMy44MmMwLDEuMjkuNjksMi42NCwxLjY2LDMuMzRcIi8+XG48L3N2Zz5cbmBcblxuY29uc3QgbG9hZGluZ0ljb24gPVxuICAnZGF0YTppbWFnZS9wbmc7YmFzZTY0LCcgK1xuICAnaVZCT1J3MEtHZ29BQUFBTlNVaEVVZ0FBQU5FQUFBRFJDQVlBQUFCU09sZnZBQUFBQ1hCSVdYTUFBQmNSQUFBWEVRSEtKdk0vQUFBTDVrbEVRVlI0bk8zZFQ2d2RaUm5IOFY5aHlndUZZbHRLU2dYeEZBaG9RcVVVUWlCR3VCZ3hFVEc2cVVGY3RCcE4zTmJFdURDUjI4VDRKeTVBalFrTEUwdDBvU1pHZE9YQzJJTktNQnJOM1lBTEd6a1FJRXFVWHJGQ1g1d1dGMmRNak03em5ONzNtWmw3enUzM2s1ek5QSmwzM252UC9mVk1udlAyblUzQy82bFNPaVRwWU1mREhxNXpYdWw0VE15QmFyMG5NS2RHa3BZNkhuTmJ4K05oVHB5MzNoTUFGaDBoQW9JSUVSQkVpSUFnUWdRRTBaMWJ1Nk9TSGpWcUJ5VWRNbW9QVlNtdDlqR2hOblhPZHc5MXJYTWRJVnE3Wit1Y3gyMkZLcVVsNTd4OXZjd0c2NDdiT1NDSUVBRkJoQWdJSWtSQUVDRUNndWpPRGVld3BKSlYzTGRJMm03VURraTZxcTFRcFhTczRGcTB4Z3NRb3VHc1dLMXhUNVZTSldtWFVmNkhwTk5HYldtdDEwSVpidWVBSUVJRUJCRWlJSWdRQVVHRUNBaWlPOWVoT3VkbFNjc2REL3M1bFhYYXJKWG1rdlFIcTFDbDlFYkJ0Y2JuY211Y1R5SWdpQkFCUVlRSUNDSkVRQkFoQW9JSUVSQzBhYjBuc0dpcWxKWWxQZGp4c1BkSWV0eW8xWFhPclczblpxWDJrbkhlVzV6cmZkT3B2ZE9wUFd3YzN5UHA0MFp0dzdlLytTUUNnZ2dSRUVTSWdDQkNCQVFSSWlDSUVBRkJHN3JGM1d6clc3Umh4eHk1dTJSdkJrK1YwblZXcmM3NXVIUGVBYXNrYVl0UnUwSFNaNHphaG1oLzgwa0VCQkVpSUlnUUFVR0VDQWdpUkVEUVF1eXhVS1cwVFdVUHlScEpHbmM2bVg0Nm1qZEoybWJVOWxVcFdlZXQxRG1YUEgzdnRZSnpwT21PcTIwdWtuU1pVWHRWOW5zd2NSNk10bHJuWExMdDh1QVdvc1VkYUZWMzNrS3RVanBQOXUvTiszMmVrV1J0QW5KTTBsMEYwK204L2UycFVob1pwZDJTN2pOcXo5UTVmOHNZYjBuMis3b3c3Vzl1NTRBZ1FnUUVFU0lnaUJBQlFZUUlDSnFiRnZlTU52WklaYTFxczBYYWRKcEdCV051a3QrRnMycG5uSFBlNU5SV0pGbHQ3SkwydHFxVTN1YVVUem0xUzR6am01MjVuSFRHVzFWWiszdFM1enh4eGgzVTNMUzRoMjUzOXJUaFNCLzZXTVg5YmFmOG5GUDduWEg4aktUWGpkcUpPdWZmbnRYRS9zdU12NGNqemI3bmM0SGJPU0NJRUFGQmhBZ0lJa1JBRUNFQ2dnWnZjVHR0eTVIc2RxZlhxaTVkNFMzbmVwNlJ5bHJqSHErTm5hcVVyalpxSnlYVmJZVTY1MWVjNjNudis4aXBXVnNkbjlaMHRYWWJieDRlci8zdC9SME4zdjRldk1YdFBNNndxSTBkV09GZDFDYnRxVFZ1dHJHcmxENHF5UXFSR2I0NjV5ZXRpMVVwUGViTTVZTk9iV1FjUDFYbi9CZm52RTdOZUE4R2IzOXpPd2NFRVNJZ2lCQUJRWVFJQ0NKRVFGQXZMVzZuL1NoMTM4WWVPV042SmdYbi9PYzg2M29qMlIyczB0WFl1eVZkWTlUT3lGZ2xYU1Y3ZHhOSk81M2FFMDd0ZHVQNFM1SUc2ODdObTc2K0p6SmJ6blhPSlczMWZjNllnMjVvVWVkOFZOTFJ0dHFNMXV2aHd0WFk3NWY5U01rK1dMdjJTTkxmak9OakxmNmU1OFc0blFPQ0NCRVFSSWlBSUVJRUJCRWlJS2lYQmFqT0lsT3pPMWVsdEZYVHA2cTF1VVhTSTBadGJyYWJiVnI3MWx6TTM4bFpzTjZueUppV3J6aTF6eGFNTjJrNm1tdlN0T2d2TjhyN205ZGFqZnZZZG5sdWR2dVJ0RlhTclVidCtpRW5FdkM0cEY4WXRaK3JiTC90ZDh2K0x3aHYxRG4zRVNUTGN0dkJXWnZNeVBoS1lJWWs2U3FqOXZzNjU1OFljMW1XdjhwK1hEQVhGN2R6UUJBaEFvSUlFUkJFaUlBZ1FnUUVGWGZubWk2STVZaHpudFd1dlV6MjA5Wk9TdnFTVVh2R21jZDZzTHBsUjFXKzJ0d2FjOGpPbkdjaS96MWZ0czV6MnQ5WjB2Tkc3WklxSmF1VHU5dWFSMStLdnljcStTNm9PYytxTFduYUJtN3pLMG4zR3JYVGRjN1dUak5ZWjMzc3NkNEU2QmFqZkovc2Y0eDcyY1NFMnprZ2lCQUJRWVFJQ0NKRVFCQWhBb0xXWXdIcWtuSGMyMC9iZXhLYjl4aEhiRXd2U3pwdTFDYVNYakJxKzUxMis5SFNQYnpuS1VRajU1d3pkYzY1KzZsZ1FiMnM2U2I2Ylo2Vi9mM1Nma2tmTUdwakZlNEF4ZTBjRUVTSWdDQkNCQVFSSWlDSUVBRkJibmN1c0ZMN1J1YzhhNStCVldmTWlUTWV6ajJubk5yVGtuNW0xTzZVZEdYWGs1blY0alkzZkppeFV2dCtaMHdyUk9PaEh4T0l4VlRuZkVwR2tLcVVucGI5L05pckpMMnI2L2x3T3djRUVTSWdpQkFCUVlRSUNDSkVRRkJmQzFDdFBiVng3bG1SdlQvNXFFckoybjlocGM3NWNGdWhTdW1RcElQR2VSYzJyelpYV0pPTTZDdEVXM3NhRnd1bXpubFZ4aTVIelNZbVN3WERqZ3JQNndXM2MwQVFJUUtDQ0JFUVJJaUFJRUlFQlBYVm5idXpwM0VCeWQvWC9LYm0xV2FmcEp1TjJrTlZTcXRHN1hDZDg0bzFtYjVDdExPbmNRRTF1L0pNMm1yTkh2R1hHcWVPbkdHOTNhYTJlZlBoZGc0SUlrUkFFQ0VDZ2dnUkVFU0lnS0MrdW5NbmV4b1htT1dNN0MyRy8rU2NkN05tZE9Fc2ZZV283bWxjNEd4WWowTDlwNlNYakpyMXdJU1p1SjBEZ2dnUkVFU0lnQ0JDQkFRUklpQ29yKzZjdFkwcjBMZjlrajVwMURaTHVzQ29iUys5WUY4aHN2cjBRTisyUzlvejVBVzVuUU9DQ0JFUVJJaUFJRUlFQkJFaUlLaXY3dHdQblJxYm1LQlBYNWYwSGFOMnVlejlQNzRvYVcvSkJma2tBb0lJRVJCRWlJQWdRZ1FFRVNJZ2lCQUJRWDIxdUgvazFMNWdITCt0MlFLMnpiak8yWHBrSWVaWTh6UTg2NUdTNHpyblRSMWZjcXVrSzQzYXh5UWQ2dmg2ZkJJQlVZUUlDQ0pFUUJBaEFvSUlFUkJFaUlBZ3Q4WHR0UitkZHZTczgzNWdsSFpMdXRlb1hWQ2x0TXVvdlY3bmZNSzZIamFlS3FWbFNROTJQT3pkZGM3amtoUDVKQUtDQ0JFUVJJaUFJRUlFQkJFaUlJZ1FBVUY5cmVJMjFUbC9vblVpS1YwdDZRSGp0R3NrL2Rtb2pTV3h3bnNkOWJGU3UwcEprcXp6bnBMMGZhTzJVOUpsUnUySzV0VXBQb21BSUVJRUJCRWlJSWdRQVVHRUNBaUtkT2ZHNXFEVGJrMHJaNUZmbHZTY1VmdVhjNzJKYzczVk91Y1ZheTVZRytmM1BKTDkvcFQrL2krUXRNT29iWk4wa1ZIYkl1a1NaOHpPZGIxSmhLVHlGZDZGMTFxUzMxNmwvZDJSSVRlU2FWYnQzMk9VNzVCMHUxSGIzYnpXaWxYY3dIb2hSRUFRSVFLQ0NCRVFSSWlBb0w0V29QN1N2R0QzN2VoVmxiVy9QWk02NTBuQmVRdHZ4dTlyYkJ3MzM3Y3FwVzJTOWhWTVpidWt0eHUxM1pJdU5tcWJuVEVuemF2TjZsbk5xa1ZmTFc3ckI1U2trOGJ4UHRxa1M3TGIzNTRqZGM3TFhjNWxVWFQ5OVVUZ1BmQ2NsbFJibDVSMHZsSHI1WDNsZGc0SUlrUkFFQ0VDZ2dnUkVFU0lnS0MrV3R5bm5kcllPTzYxbzErVjlMeFJlNzNPK2E5R3pXdC91eGFoTlY2bHRFL1RGYzFkR25jODNpblpxL1BQMTNUVmRadEswNmZlV2F3UGdCY2t2V2pVckwraGtGNWEzQ1ZtdEVML0tPa2hvL1ppbmZPUE81N0xzc3IyZWg2ME5WNmxkRXpTVXBkajlyREtmbytrMXMxcE5BM0pEVVp0aDZSYkN5NzVOVWtQRzdYVk91Zmk3NE1zM000QlFZUUlDQ0pFUUJBaEFvSUlFUkEwK0RiQ2psY2svZHFwWFcvVWRsUXAvYjNnZWw0N2VxSmhXK09sSnVxK0pXMHEvTmwyeWQ2NjkyTFptNUY0N2UySjdOWFl4elZ0cTdleEZxMkd6Rk9MKzBKTmYrRnRicGYwdlk0djJYazd1cWZISUhxS045Y280YTN3ZG1SSjF2ZDRTZE85czlkcXJsYlpjenNIQkJFaUlJZ1FBVUdFQ0FnaVJFRFFQTFc0YTBsV3Evb3BTVWVNMmxzbEhUSnFMMHY2alZXclVyTGE1bnViVjV1eDB4R3pqdmRsVW5KUzAwVnNOYVByOVYzanVMZmxieVhwVXFObTdZVWdUWCsyUjQzYTJEbHZjSFBUNGk0MVkvWDNjVW5mTUdvbm1sZWJCeVI5eEtqTlZYdTFST2xtSkZWSzd6Vks3NUQwMWVpOC9zZkM3S1BPN1J3UVJJaUFJRUlFQkJFaUlJZ1FBVUh6MU9JdU5aSGQvdDRxNlgxRzdUWFpxMzF2TEpsSWxkSU8yYXVTNzVHOXdQWm95UVluVlVxSE5IM1VZNXRIMWpwZU0rYXlVN2E2ZXRZY1pwbklibU5QQ3NjYzNNS0hxUG5qVzI2ck5lM3ZUdzg0blIyU3JqVnFuOUswRmR4bXJMSS9tb095TnlwNXJHQTh5VitGL2xQanVQVVB4eXlUUmYrNlFPSjJEZ2dqUkVBUUlRS0NDQkVRUklpQW9JWHZ6czB3a2QzK2x1d0Z1SGMxcjlhYTB3YjI5aUN3VmpKTDBwWXFKYXYrSHRtdDhUYzdZM3A3ZEh2N1ZkenYxSzR6amwva25EUFJCbWhqZXhaK0ZYZXBLcVZOc24vK0J5Vjl2bURZNDgycnpXMnlXOEVmbHZTa1VmdXk3UCtXY2Ezc1o1ZCt5RGd1K1dIdmRGOXpMZEJxN0ZMY3pnRkJoQWdJSWtSQUVDRUNnZ2dSRUxUUlc5eXpXRjJxWTA3TnMxZjJJbE92RFh4QTBoM09tRmFMZTdNenB0ZXFMdVY5WFdDWmREMkplWFBPdHJqN3NBNTdjUStxNjBkUmJoVGN6Z0ZCaEFnSUlrUkFFQ0VDZ2dnUkVIU3V0N2k3Tmw3dkNXQjQvd1lSQmJuMTk4L3JwQUFBQUFCSlJVNUVya0pnZ2c9PSdcblxuY2xhc3MgSW5zdGFsbGluZ01vZGFsIGV4dGVuZHMgTW9kYWwge1xuICBjb25zdHJ1Y3RvcihhcHA6IEFwcCkgeyBzdXBlcihhcHApOyB9XG4gIG9uT3BlbigpIHtcbiAgICB0aGlzLmNvbnRlbnRFbC5lbXB0eSgpO1xuICAgIGNvbnN0IGltZyA9IHRoaXMuY29udGVudEVsLmNyZWF0ZUVsKCdpbWcnLCB7XG4gICAgICBhdHRyOiB7IHNyYzogbG9hZGluZ0ljb24sIGFsdDogJ0luc3RhbGxpbmdcdTIwMjYnIH0sXG4gICAgfSk7XG4gICAgT2JqZWN0LmFzc2lnbihpbWcuc3R5bGUsIHtcbiAgICAgIGRpc3BsYXk6ICdibG9jaycsXG4gICAgICBtYXJnaW46ICcxZW0gYXV0byAwLjVlbScsXG4gICAgICB3aWR0aDogJzEwMHB4JyxcbiAgICAgIGhlaWdodDogJzEwMHB4JyxcbiAgICB9KTtcbiAgICBpbWcuYW5pbWF0ZShcbiAgICAgIFtcbiAgICAgICAgeyB0cmFuc2Zvcm06ICdyb3RhdGUoMGRlZyknIH0sXG4gICAgICAgIHsgdHJhbnNmb3JtOiAncm90YXRlKC0zNjBkZWcpJyB9XG4gICAgICBdLFxuICAgICAge1xuICAgICAgICBkdXJhdGlvbjogMTUwMCwgICAgICAvLyBvbmUgYW5kIGEgaGFsZiBzZWNvbmRzIHBlciByZXZvbHV0aW9uXG4gICAgICAgIGl0ZXJhdGlvbnM6IEluZmluaXR5LFxuICAgICAgICBlYXNpbmc6ICdsaW5lYXInXG4gICAgICB9XG4gICAgKTtcbiAgICBjb25zdCB0eHQgPSB0aGlzLmNvbnRlbnRFbC5jcmVhdGVEaXYoeyB0ZXh0OiAnSW5zdGFsbGluZ1x1MjAyNicsIGNsczogJ21vZC1xdWlldCcgfSk7XG4gICAgdHh0LmFkZENsYXNzKFwiaW5zdGFsbG1vZGFsLXR4dFwiKTtcbiAgfVxuICBvbkNsb3NlKCkge1xuICAgIHRoaXMuY29udGVudEVsLmVtcHR5KCk7XG4gIH1cbn1cblxuXG5pbnRlcmZhY2UgUHJldmlld0l0ZW0ge1xuICBmaWxlUGF0aDogc3RyaW5nO1xuICBhY3Rpb246IHN0cmluZztcbiAgc2VsZWN0ZWQ6IGJvb2xlYW47XG4gIGlzRm9sZGVyPzogYm9vbGVhbjtcbn1cblxuaW50ZXJmYWNlIFRvb2xraXRTZXR0aW5ncyB7XG4gIGluc3RhbGxlZFZlcnNpb246IHN0cmluZztcbiAgbGF0ZXN0VG9vbGtpdFZlcnNpb24/OiBzdHJpbmc7XG4gIGN1c3RvbWl6ZVVwZGF0ZXM6IGJvb2xlYW47XG4gIHVwZGF0ZVRhcmdldHM6IHtcbiAgICB0b29sczogYm9vbGVhbjtcbiAgICB0b29sc1BhdGg/OiBzdHJpbmc7XG4gICAgdGVtcGxhdGVzOiBib29sZWFuO1xuICAgIHRlbXBsYXRlc1BhdGg/OiBzdHJpbmc7XG4gICAgb21uaW5vbWljb246IGJvb2xlYW47XG4gICAgb21uaW5vbWljb25QYXRoPzogc3RyaW5nO1xuICAgIHNwZWxsYm9vazogYm9vbGVhbjtcbiAgICBzcGVsbGJvb2tQYXRoOiBzdHJpbmc7XG4gIH07XG4gIGxhdGVzdERlZmF1bHRzPzoge1xuICAgIHRvb2xzPzogc3RyaW5nO1xuICAgIHRlbXBsYXRlcz86IHN0cmluZztcbiAgICBvbW5pbm9taWNvbj86IHN0cmluZztcbiAgICBzcGVsbGJvb2s/OiBzdHJpbmc7XG4gIH07XG4gIGxhc3RDaGVja2VkPzogc3RyaW5nO1xuICBsYXN0Rm9yY2VVcGRhdGU/OiBzdHJpbmc7XG4gIGZpbGVDYWNoZT86IFJlY29yZDxzdHJpbmcsIFRvb2xraXRGaWxlQ2FjaGVFbnRyeT47XG4gIHBhdGhPdmVycmlkZXM/OiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+O1xuICBiYWNrdXBGaWxlcz86IFJlY29yZDxzdHJpbmcsIHN0cmluZz47XG4gIGJhY2t1cFBhdGg/OiBzdHJpbmc7XG4gIGF1dG9CYWNrdXA/OiBib29sZWFuO1xuICBsYXN0QmFja3VwVGltZT86IHN0cmluZztcbiAgYmFja3VwRXJyb3I/OiBzdHJpbmc7XG4gIGN1c3RvbVBhdGhzOiBDdXN0b21QYXRoRW50cnlbXTtcbiAgYXV0b0JhY2t1cEJlZm9yZVVwZGF0ZTogYm9vbGVhbjtcbiAgaGlnaGxpZ2h0RW5hYmxlZDogYm9vbGVhbjtcbiAgaGlnaGxpZ2h0Q29sb3JMaWdodDogc3RyaW5nO1xuICBoaWdobGlnaHRDb2xvckRhcms6IHN0cmluZztcbiAgcnVsZXNldENvbXBlbmRpdW06IHN0cmluZztcbiAgcnVsZXNldFJlZmVyZW5jZTogc3RyaW5nW107XG4gIHJlcGFyc2VHYW1lc2V0czogYm9vbGVhbjtcbiAgaXNGaXJzdFJ1bjogXCJ5ZXNcIiB8IFwibm9cIiB8IFwic2hvd25cIjtcbiAgc2Vzc2lvblRpdGxlUHJlZmVyZW5jZTogXCJuYW1lXCIgfCBcImRhdGVcIjtcbiAgZW5hYmxlU2lkZWJhclByZXZpZXdzOiBib29sZWFuO1xuICB0ZW1wbGF0ZU9wZW5Nb2RlOiBcImRlZmF1bHRcIiB8IFwiY3VycmVudFwiIHwgXCJiYWNrZ3JvdW5kXCI7XG4gIGFkdmVudHVyZVNvcnQ6ICduYW1lJyB8ICdyZWNlbnQnIHwgJ3JlZnMnO1xuICBlbmFibGVkQWR2ZW50dXJlQ2F0ZWdvcmllczogc3RyaW5nW107XG4gIGhpZGVCYXNlVG9vbGJhcjogYm9vbGVhbjtcbn1cblxuY29uc3QgREVGQVVMVF9TRVRUSU5HUzogVG9vbGtpdFNldHRpbmdzID0ge1xuICBpbnN0YWxsZWRWZXJzaW9uOiAnMS4wLjAnLFxuICBjdXN0b21pemVVcGRhdGVzOiBmYWxzZSxcbiAgdXBkYXRlVGFyZ2V0czoge1xuICAgIHRvb2xzOiB0cnVlLFxuICAgIHRvb2xzUGF0aDogJ1Rvb2xzJyxcbiAgICB0ZW1wbGF0ZXM6IHRydWUsXG4gICAgdGVtcGxhdGVzUGF0aDogJ0V4dHJhcy9UZW1wbGF0ZXMnLFxuICAgIG9tbmlub21pY29uOiB0cnVlLFxuICAgIG9tbmlub21pY29uUGF0aDogJ0FkdmVudHVyZXMvT21uaW5vbWljb24ubWQnLFxuICAgIHNwZWxsYm9vazogdHJ1ZSxcbiAgICBzcGVsbGJvb2tQYXRoOiAnQ29tcGVuZGl1bS9TcGVsbHMvX1NwZWxsYm9vay5tZCcsXG4gIH0sXG4gIGxhdGVzdERlZmF1bHRzOiB1bmRlZmluZWQsXG4gIHBhdGhPdmVycmlkZXM6IHt9LFxuICBiYWNrdXBGaWxlczoge30sXG4gIGJhY2t1cFBhdGg6ICcnLFxuICBhdXRvQmFja3VwOiBmYWxzZSxcbiAgbGFzdEJhY2t1cFRpbWU6ICcnLFxuICBiYWNrdXBFcnJvcjogJycsXG4gIGN1c3RvbVBhdGhzOiBbXSxcbiAgYXV0b0JhY2t1cEJlZm9yZVVwZGF0ZTogdHJ1ZSxcbiAgaGlnaGxpZ2h0RW5hYmxlZDogZmFsc2UsXG4gIGhpZ2hsaWdodENvbG9yTGlnaHQ6ICcjREZFN0UyJyxcbiAgaGlnaGxpZ2h0Q29sb3JEYXJrOiAnIzFGMjk0MycsXG4gIHJ1bGVzZXRDb21wZW5kaXVtOiBcIlwiLFxuICBydWxlc2V0UmVmZXJlbmNlOiBbXSxcbiAgcmVwYXJzZUdhbWVzZXRzOiB0cnVlLFxuICBpc0ZpcnN0UnVuOiBcInllc1wiLFxuICBzZXNzaW9uVGl0bGVQcmVmZXJlbmNlOiBcIm5hbWVcIixcbiAgZW5hYmxlU2lkZWJhclByZXZpZXdzOiB0cnVlLFxuICB0ZW1wbGF0ZU9wZW5Nb2RlOiBcImRlZmF1bHRcIixcbiAgYWR2ZW50dXJlU29ydDogJ25hbWUnLFxuICBlbmFibGVkQWR2ZW50dXJlQ2F0ZWdvcmllczogWyducGNzJywgJ2ZhY3Rpb25zJywgJ21vbnN0ZXJzJywgJ2hpc3RvcnknLCAncGxhY2VzJ10sXG4gIGhpZGVCYXNlVG9vbGJhcjogZmFsc2UsXG59O1xuXG5pbnRlcmZhY2UgQ3VzdG9tUGF0aEVudHJ5IHtcbiAgdmF1bHRQYXRoOiBzdHJpbmc7XG4gIG1hbmlmZXN0S2V5OiBzdHJpbmc7XG4gIGRvVXBkYXRlOiBib29sZWFuO1xufVxuXG5pbnRlcmZhY2UgUGVuZGluZ1NlbGVjdGlvbiB7XG4gIHRleHQ6IHN0cmluZztcbiAgZmlsZVBhdGg6IHN0cmluZztcbiAgZnJvbT86IHsgbGluZTogbnVtYmVyOyBjaDogbnVtYmVyIH07XG4gIHRvPzogeyBsaW5lOiBudW1iZXI7IGNoOiBudW1iZXIgfTtcbiAgcHJlVGV4dD86IHN0cmluZztcbiAgcHJlV3JhcHBlZD86IGJvb2xlYW47ICAgLy8gTkVXOiB3ZSB3cmFwcGVkIHRoZSBzZWxlY3Rpb24gaW4gdGhlIGVkaXRvciBhbHJlYWR5XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgTWFuaWZlc3RGaWxlRW50cnkge1xuICBwYXRoOiBzdHJpbmc7XG4gIGtleTogc3RyaW5nO1xuICBjdXN0b21PdmVycmlkZT86IGJvb2xlYW47XG4gIGRpc3BsYXlOYW1lPzogc3RyaW5nO1xuICBvcHRpb25hbD86IGJvb2xlYW47XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgSW5zdGFsbE9wdGlvbnMge1xuICBjb21wZW5kaXVtOiBzdHJpbmc7XG4gIHJlZmVyZW5jZXM6IHN0cmluZ1tdO1xufVxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBWVnVuZGVybG9yZVRvb2xraXRQbHVnaW4gZXh0ZW5kcyBQbHVnaW4ge1xuICByZXF1aXJlc0dyYXBoOiBNYXA8c3RyaW5nLCBzdHJpbmdbXT47XG4gIHB1YmxpYyBzZXR0aW5nc1RhYjogVG9vbGtpdFNldHRpbmdzVGFiO1xuICBzZXR0aW5nczogVG9vbGtpdFNldHRpbmdzO1xuICBmaWxlQ2FjaGVNYW5hZ2VyOiBUb29sa2l0RmlsZUNhY2hlTWFuYWdlcjtcbiAgbWFuaWZlc3RDYWNoZToge1xuICAgIGZpbGVzOiBNYW5pZmVzdEZpbGVFbnRyeVtdO1xuICAgIGZvbGRlcnM6IE1hbmlmZXN0RmlsZUVudHJ5W107XG4gIH0gPSB7IGZpbGVzOiBbXSwgZm9sZGVyczogW10gfTtcbiAgY2hhbmdlbG9nOiBzdHJpbmcgPSAnJztcbiAgcHJpdmF0ZSBhdXRvQ2hlY2tJbnRlcnZhbDogbnVtYmVyIHwgbnVsbCA9IG51bGw7XG4gIHByaXZhdGUgb2xkUGF0aHNCeUdpdGh1YjogUmVjb3JkPHN0cmluZywgc3RyaW5nPiA9IHt9O1xuICBwcml2YXRlIHN0eWxlRWw6IEhUTUxTdHlsZUVsZW1lbnQgfCBudWxsID0gbnVsbDtcblxuICBiYWNrdXBNYW5hZ2VyOiBCYWNrdXBNYW5hZ2VyO1xuICBleGNsdWRlZFBhdGhzID0gW1xuICAgICcuRFNfU3RvcmUnLFxuICAgICcuZ2l0aWdub3JlJyxcbiAgICAnLmdpdGF0dHJpYnV0ZXMnLFxuICAgICcuZ2l0aHViJyxcbiAgICAnUkVBRE1FLm1kJyxcbiAgICAnQ29tcGVuZGl1bScsXG4gICAgYCR7dGhpcy5hcHAudmF1bHQuY29uZmlnRGlyfS9wbHVnaW5zL3Z2dW5kZXJsb3JlLXRvb2xraXQtcGx1Z2luL21hbmlmZXN0Lmpzb25gLFxuICAgIGAke3RoaXMuYXBwLnZhdWx0LmNvbmZpZ0Rpcn0vcGx1Z2lucy92dnVuZGVybG9yZS10b29sa2l0LXBsdWdpbi9tYWluLmpzYCxcbiAgICBgJHt0aGlzLmFwcC52YXVsdC5jb25maWdEaXJ9L3BsdWdpbnMvdnZ1bmRlcmxvcmUtdG9vbGtpdC1wbHVnaW4vc3R5bGVzLmNzc2BcbiAgXTtcblxuICBwcml2YXRlIGlzRmlyc3RSdW46IGJvb2xlYW4gPSBmYWxzZTtcblxuICBwdWJsaWMgcGVuZGluZ1J1bGVzZXRLZXk6IHN0cmluZyA9ICcnO1xuICBwdWJsaWMgcGVuZGluZ1JlZmVyZW5jZUtleXM6IHN0cmluZ1tdID0gW107XG5cbiAgLy8gXHUyNTAwXHUyNTAwXHUyNTAwIEhFTFBFUlMgXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXG5cbiAgcmVzb2x2ZVZhdWx0UGF0aChnaXRodWJQYXRoOiBzdHJpbmcpOiBzdHJpbmcge1xuICAgIGNvbnN0IGN1c3RvbSA9IHRoaXMuc2V0dGluZ3MuY3VzdG9tUGF0aHMuZmluZChcbiAgICAgIChjKSA9PlxuICAgICAgICBjLm1hbmlmZXN0S2V5ID09PSBnaXRodWJQYXRoIHx8XG4gICAgICAgIGMubWFuaWZlc3RLZXkgPT09IHRoaXMua2V5Rm9yKGdpdGh1YlBhdGgpXG4gICAgKTtcbiAgICByZXR1cm4gY3VzdG9tPy52YXVsdFBhdGggPz8gZ2l0aHViUGF0aDtcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgd3JpdGVQYXJ0aWFsTWlycm9yKHBhdGhzOiBzdHJpbmdbXSwgbGFiZWwgPSAncHJlLWZvcmNlLXVwZGF0ZScpOiBQcm9taXNlPHN0cmluZz4ge1xuICAgIGNvbnN0IGJhc2UgPSAodGhpcy5zZXR0aW5ncy5iYWNrdXBQYXRoICYmIHRoaXMuc2V0dGluZ3MuYmFja3VwUGF0aC50cmltKCkpXG4gICAgICA/IHRoaXMuc2V0dGluZ3MuYmFja3VwUGF0aC50cmltKClcbiAgICAgIDogJy52YXVsdC1iYWNrdXBzJztcblxuICAgIGNvbnN0IGQgPSBuZXcgRGF0ZSgpO1xuICAgIGNvbnN0IHBhZCA9IChuOiBudW1iZXIpID0+IFN0cmluZyhuKS5wYWRTdGFydCgyLCAnMCcpO1xuICAgIGNvbnN0IHN0YW1wID0gYCR7ZC5nZXRGdWxsWWVhcigpfS0ke3BhZChkLmdldE1vbnRoKCkgKyAxKX0tJHtwYWQoZC5nZXREYXRlKCkpfS0ke3BhZChkLmdldEhvdXJzKCkpfSR7cGFkKGQuZ2V0TWludXRlcygpKX0ke3BhZChkLmdldFNlY29uZHMoKSl9YDtcbiAgICBjb25zdCBzYWZlTGFiZWwgPSBsYWJlbC5yZXBsYWNlKC9bXlxcdy4tXSsvZywgJy0nKS5zbGljZSgwLCA2MCkgfHwgJ3BhcnRpYWwnO1xuICAgIGNvbnN0IHJvb3QgPSBgJHtiYXNlfS9wYXJ0aWFsLyR7c3RhbXB9LSR7c2FmZUxhYmVsfWA7XG5cbiAgICBjb25zdCBlbnN1cmUgPSBhc3luYyAoZGlyOiBzdHJpbmcpID0+IHtcbiAgICAgIGlmICghZGlyIHx8IGRpciA9PT0gJy8nIHx8IGRpciA9PT0gJy4nKSByZXR1cm47XG4gICAgICBjb25zdCBwYXJ0cyA9IGRpci5zcGxpdCgnLycpLmZpbHRlcihCb29sZWFuKTtcbiAgICAgIGxldCBjdXIgPSAnJztcbiAgICAgIGZvciAoY29uc3QgcCBvZiBwYXJ0cykge1xuICAgICAgICBjdXIgPSBjdXIgPyBgJHtjdXJ9LyR7cH1gIDogcDtcbiAgICAgICAgaWYgKCEoYXdhaXQgdGhpcy5hcHAudmF1bHQuYWRhcHRlci5leGlzdHMoY3VyKSkpIHtcbiAgICAgICAgICBhd2FpdCB0aGlzLmFwcC52YXVsdC5jcmVhdGVGb2xkZXIoY3VyKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH07XG5cbiAgICBhd2FpdCBlbnN1cmUocm9vdCk7XG5cbiAgICBmb3IgKGNvbnN0IHZwIG9mIHBhdGhzKSB7XG4gICAgICB0cnkge1xuICAgICAgICBpZiAoIShhd2FpdCB0aGlzLmFwcC52YXVsdC5hZGFwdGVyLmV4aXN0cyh2cCkpKSBjb250aW51ZTtcbiAgICAgICAgY29uc3QgY29udGVudCA9IGF3YWl0IHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXIucmVhZCh2cCk7XG4gICAgICAgIGNvbnN0IHRhcmdldCA9IGAke3Jvb3R9LyR7dnB9YDtcbiAgICAgICAgYXdhaXQgZW5zdXJlKHRhcmdldC5zcGxpdCgnLycpLnNsaWNlKDAsIC0xKS5qb2luKCcvJykpO1xuICAgICAgICBhd2FpdCB0aGlzLmFwcC52YXVsdC5hZGFwdGVyLndyaXRlKHRhcmdldCwgY29udGVudCk7XG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGNvbnNvbGUud2FybignUGFydGlhbCBiYWNrdXAgY29weSBmYWlsZWQ6JywgdnAsIGUpO1xuICAgICAgICB0aGlzLnNldHRpbmdzLmJhY2t1cEVycm9yID0gYEZhaWxlZCBjb3B5aW5nICR7dnB9OiAke1N0cmluZyhlKX1gO1xuICAgICAgICBhd2FpdCB0aGlzLnNhdmVTZXR0aW5ncygpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHRoaXMuc2V0dGluZ3MubGFzdEJhY2t1cFRpbWUgPSBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCk7XG4gICAgYXdhaXQgdGhpcy5zYXZlU2V0dGluZ3MoKTtcbiAgICByZXR1cm4gcm9vdDtcbiAgfVxuXG5cbiAgcHJpdmF0ZSBidWlsZEluY29taW5nUmVmQ291bnRzKCk6IE1hcDxzdHJpbmcsIG51bWJlcj4ge1xuICAgIGNvbnN0IGluY29taW5nID0gbmV3IE1hcDxzdHJpbmcsIG51bWJlcj4oKTtcbiAgICBjb25zdCByZXNvbHZlZCA9IHRoaXMuYXBwLm1ldGFkYXRhQ2FjaGUucmVzb2x2ZWRMaW5rcyBhcyBSZWNvcmQ8c3RyaW5nLCBSZWNvcmQ8c3RyaW5nLCBudW1iZXI+PjtcblxuICAgIGZvciAoY29uc3QgZnJvbSBpbiByZXNvbHZlZCkge1xuICAgICAgY29uc3QgdG9NYXAgPSByZXNvbHZlZFtmcm9tXTtcbiAgICAgIGZvciAoY29uc3QgdG8gaW4gdG9NYXApIHtcbiAgICAgICAgaW5jb21pbmcuc2V0KHRvLCAoaW5jb21pbmcuZ2V0KHRvKSB8fCAwKSArICh0b01hcFt0b10gfHwgMSkpO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gaW5jb21pbmc7XG4gIH1cblxuICBwcml2YXRlIHNvcnRGaWxlc0J5TW9kZShmaWxlczogVEZpbGVbXSk6IHZvaWQge1xuICAgIGNvbnN0IG1vZGUgPSB0aGlzLnNldHRpbmdzLmFkdmVudHVyZVNvcnQ7XG5cbiAgICBpZiAobW9kZSA9PT0gJ25hbWUnKSB7XG4gICAgICBmaWxlcy5zb3J0KChhLCBiKSA9PlxuICAgICAgICBhLmJhc2VuYW1lLmxvY2FsZUNvbXBhcmUoYi5iYXNlbmFtZSwgdW5kZWZpbmVkLCB7IG51bWVyaWM6IHRydWUsIHNlbnNpdGl2aXR5OiAnYmFzZScgfSlcbiAgICAgICk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKG1vZGUgPT09ICdyZWNlbnQnKSB7XG4gICAgICBmaWxlcy5zb3J0KChhLCBiKSA9PiAoYi5zdGF0Lm10aW1lIHx8IDApIC0gKGEuc3RhdC5tdGltZSB8fCAwKSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gbW9kZSA9PT0gJ3JlZnMnXG4gICAgY29uc3QgaW5jb21pbmcgPSB0aGlzLmJ1aWxkSW5jb21pbmdSZWZDb3VudHMoKTtcbiAgICBmaWxlcy5zb3J0KChhLCBiKSA9PiB7XG4gICAgICBjb25zdCByYiA9IGluY29taW5nLmdldChiLnBhdGgpIHx8IDA7XG4gICAgICBjb25zdCByYSA9IGluY29taW5nLmdldChhLnBhdGgpIHx8IDA7XG4gICAgICBpZiAocmIgIT09IHJhKSByZXR1cm4gcmIgLSByYTtcbiAgICAgIGNvbnN0IG10ID0gKGIuc3RhdC5tdGltZSB8fCAwKSAtIChhLnN0YXQubXRpbWUgfHwgMCk7XG4gICAgICBpZiAobXQgIT09IDApIHJldHVybiBtdDtcbiAgICAgIHJldHVybiBhLmJhc2VuYW1lLmxvY2FsZUNvbXBhcmUoYi5iYXNlbmFtZSk7XG4gICAgfSk7XG4gIH1cblxuICBwcml2YXRlIHBlbmRpbmdTZWxlY3Rpb246IFBlbmRpbmdTZWxlY3Rpb24gfCBudWxsID0gbnVsbDtcblxuICBwdWJsaWMgc2V0UGVuZGluZ1NlbGVjdGlvbkNvbnRleHQoY3R4OiBQZW5kaW5nU2VsZWN0aW9uIHwgbnVsbCkge1xuICAgIHRoaXMucGVuZGluZ1NlbGVjdGlvbiA9IGN0eDtcbiAgfVxuICBwcml2YXRlIHRha2VQZW5kaW5nU2VsZWN0aW9uQ29udGV4dCgpOiBQZW5kaW5nU2VsZWN0aW9uIHwgbnVsbCB7XG4gICAgY29uc3QgYyA9IHRoaXMucGVuZGluZ1NlbGVjdGlvbjtcbiAgICB0aGlzLnBlbmRpbmdTZWxlY3Rpb24gPSBudWxsO1xuICAgIHJldHVybiBjO1xuICB9XG5cbiAgcHVibGljIGFwcGx5QmFzZVRvb2xiYXJFbWJlZENTUygpIHtcbiAgICBpZiAodGhpcy5zZXR0aW5ncy5oaWRlQmFzZVRvb2xiYXIpIHtcbiAgICAgIGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LmFkZCgndnYtaGlkZS1iYXNlcy10b29sYmFyJyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LnJlbW92ZSgndnYtaGlkZS1iYXNlcy10b29sYmFyJyk7XG4gICAgfVxuICB9XG5cbiAgLy8ga2VlcCB5b3VyIG9sZCBBUEkgd29ya2luZywgYnV0IGFkZCBhIHByZVdyYXAgZmxhZ1xuICBwdWJsaWMgc2V0UGVuZGluZ1NlZWQoczogc3RyaW5nIHwgbnVsbCwgcHJlV3JhcDogYm9vbGVhbiA9IGZhbHNlKSB7XG4gICAgY29uc3QgdiA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVWaWV3T2ZUeXBlKE1hcmtkb3duVmlldyk7XG4gICAgY29uc3QgZWQ6IGFueSA9IHY/LmVkaXRvcjtcbiAgICBjb25zdCBmaWxlUGF0aCA9IHY/LmZpbGU/LnBhdGggfHwgJyc7XG4gICAgY29uc3Qgc2VsID0gKHMgPz8gZWQ/LmdldFNlbGVjdGlvbj8uKCkgPz8gJycpLnRvU3RyaW5nKCk7XG5cbiAgICBpZiAoc2VsICYmIGZpbGVQYXRoKSB7XG4gICAgICBjb25zdCBjdHg6IFBlbmRpbmdTZWxlY3Rpb24gPSB7XG4gICAgICAgIHRleHQ6IHNlbCxcbiAgICAgICAgZmlsZVBhdGgsXG4gICAgICAgIGZyb206IGVkPy5nZXRDdXJzb3I/LignZnJvbScpLFxuICAgICAgICB0bzogZWQ/LmdldEN1cnNvcj8uKCd0bycpLFxuICAgICAgICBwcmVUZXh0OiBlZD8uZ2V0VmFsdWU/LigpLFxuICAgICAgICBwcmVXcmFwcGVkOiBmYWxzZSxcbiAgICAgIH07XG5cbiAgICAgIGlmIChwcmVXcmFwICYmIGVkKSB7XG4gICAgICAgIC8vIHdyYXAgbm93IChwcmVzZXJ2ZSBvdXRlciB3aGl0ZXNwYWNlKSwgYnV0IG9ubHkgaWYgbm90IGFscmVhZHkgYSB3aWtpbGlua1xuICAgICAgICBjb25zdCBhbHJlYWR5TGlua2VkID0gL15cXHMqXFxbXFxbW1xcc1xcU10qXFxdXFxdXFxzKiQvLnRlc3Qoc2VsKTtcbiAgICAgICAgaWYgKCFhbHJlYWR5TGlua2VkKSB7XG4gICAgICAgICAgY29uc3QgbSA9IHNlbC5tYXRjaCgvXihcXHMqKShbXFxzXFxTXSo/KShcXHMqKSQvKTtcbiAgICAgICAgICBjb25zdCBsZWFkaW5nID0gbT8uWzFdID8/ICcnO1xuICAgICAgICAgIGNvbnN0IGNvcmUgPSAobT8uWzJdID8/ICcnKS50cmltKCk7XG4gICAgICAgICAgY29uc3QgdHJhaWxpbmcgPSBtPy5bM10gPz8gJyc7XG4gICAgICAgICAgaWYgKGNvcmUpIHtcbiAgICAgICAgICAgIGVkLnJlcGxhY2VTZWxlY3Rpb24oYCR7bGVhZGluZ31bWyR7Y29yZX1dXSR7dHJhaWxpbmd9YCk7XG4gICAgICAgICAgICBjdHgucHJlV3JhcHBlZCA9IHRydWU7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHRoaXMuc2V0UGVuZGluZ1NlbGVjdGlvbkNvbnRleHQoY3R4KTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5zZXRQZW5kaW5nU2VsZWN0aW9uQ29udGV4dChudWxsKTtcbiAgICB9XG4gIH1cblxuXG4gIC8qKiBDb252ZXJ0IFx1MjAxQ3NvbWUvZm9sZGVyL2ZpbGUubWRcdTIwMUQgXHUyMTkyIFx1MjAxQ3NvbWUtZm9sZGVyLWZpbGVcdTIwMUQgKGxvd2VyY2FzZWQsIG5vIGV4dGVuc2lvbikuICovXG4gIGtleUZvcihwYXRoOiBzdHJpbmcpOiBzdHJpbmcge1xuICAgIHJldHVybiBwYXRoXG4gICAgICAucmVwbGFjZSgvWy9cXFxcXS9nLCAnLScpXG4gICAgICAucmVwbGFjZSgvXFwuW14uXSskLywgJycpXG4gICAgICAudG9Mb3dlckNhc2UoKTtcbiAgfVxuXG4gIGlzRXhjbHVkZWQocGF0aDogc3RyaW5nKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMuZXhjbHVkZWRQYXRocy5zb21lKFxuICAgICAgKGV4KSA9PlxuICAgICAgICBwYXRoID09PSBleCB8fFxuICAgICAgICBwYXRoLnN0YXJ0c1dpdGgoYCR7ZXh9L2ApIHx8XG4gICAgICAgIHBhdGguaW5jbHVkZXMoYC8ke2V4fS9gKSB8fFxuICAgICAgICBwYXRoLmVuZHNXaXRoKGAvJHtleH1gKSB8fFxuICAgICAgICBwYXRoLmluY2x1ZGVzKGAvJHtleH1gKVxuICAgICk7XG4gIH1cblxuICAvLyBcdTI1MDBcdTI1MDBcdTI1MDAgQ1VTVE9NIElOU1RBTEwgTE9HSUMgXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXG5cbiAgcHVibGljIGFzeW5jIHBlcmZvcm1DdXN0b21JbnN0YWxsKFxuICAgIHRvSW5zdGFsbDogeyBwYXRoOiBzdHJpbmc7IGlzRm9sZGVyOiBib29sZWFuIH1bXVxuICApOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAvLyAwKSBDbG9zZSBhbnkgb3BlbiBtYXJrZG93biAmIGdyYXBoIHBhbmVzXG4gICAgdGhpcy5hcHAud29ya3NwYWNlLmdldExlYXZlc09mVHlwZSgnbWFya2Rvd24nKS5mb3JFYWNoKGwgPT4gbC5kZXRhY2goKSk7XG4gICAgdGhpcy5hcHAud29ya3NwYWNlLmdldExlYXZlc09mVHlwZSgnZ3JhcGgnKS5mb3JFYWNoKGwgPT4gbC5kZXRhY2goKSk7XG5cbiAgICAvLyAxKSBTaG93IHRoZSBcdTIwMUNJbnN0YWxsaW5nXHUyMDI2XHUyMDFEIHNwaW5uZXJcbiAgICBjb25zdCBpbnN0YWxsaW5nID0gbmV3IEluc3RhbGxpbmdNb2RhbCh0aGlzLmFwcCk7XG4gICAgaW5zdGFsbGluZy5vcGVuKCk7XG5cbiAgICB0cnkge1xuICAgICAgLy8gMikgT3B0aW9uYWwgYmFja3VwXG4gICAgICBjb25zdCBhbGxGaWxlcyA9IHRoaXMuYXBwLnZhdWx0LmdldEFsbExvYWRlZEZpbGVzKClcbiAgICAgICAgLmZpbHRlcigoZik6IGYgaXMgVEZpbGUgPT4gZiBpbnN0YW5jZW9mIFRGaWxlKVxuICAgICAgICAubWFwKGYgPT4gZi5wYXRoKVxuICAgICAgICAuZmlsdGVyKHAgPT4gcCAhPT0gJy52dnVuZGVybG9yZV9pbnN0YWxsZWQnKTtcbiAgICAgIGlmIChhbGxGaWxlcy5sZW5ndGggJiYgdGhpcy5zZXR0aW5ncy5hdXRvQmFja3VwQmVmb3JlVXBkYXRlKSB7XG4gICAgICAgIGNvbnN0IGZvbGRlciA9IGF3YWl0IHRoaXMuYmFja3VwTWFuYWdlci5iYWNrdXBWYXVsdE1pcnJvcigncHJlLWN1c3RvbS1pbnN0YWxsJyk7XG4gICAgICAgIG5ldyBOb3RpY2UoYEJhY2t1cCBiZWZvcmUgY3VzdG9tXHUyMDEwaW5zdGFsbCBhdDogJHtmb2xkZXJ9YCk7XG4gICAgICB9XG5cbiAgICAgIC8vIDMpIExvb3Agb3ZlciBleGFjdGx5IHRoZSBzZWxlY3RlZCBmaWxlcy9mb2xkZXJzXG4gICAgICBmb3IgKGNvbnN0IGVudHJ5IG9mIHRvSW5zdGFsbCkge1xuICAgICAgICBpZiAoZW50cnkuaXNGb2xkZXIpIHtcbiAgICAgICAgICBpZiAoIShhd2FpdCB0aGlzLmFwcC52YXVsdC5hZGFwdGVyLmV4aXN0cyhlbnRyeS5wYXRoKSkpIHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuYXBwLnZhdWx0LmNyZWF0ZUZvbGRlcihlbnRyeS5wYXRoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY29uc3QgbWFuaWZlc3RFbnRyeSA9IHRoaXMubWFuaWZlc3RDYWNoZS5maWxlcy5maW5kKGYgPT4gZi5wYXRoID09PSBlbnRyeS5wYXRoKTtcbiAgICAgICAgICBpZiAoIW1hbmlmZXN0RW50cnkpIGNvbnRpbnVlO1xuICAgICAgICAgIGF3YWl0IHRoaXMudXBkYXRlRW50cnlGcm9tTWFuaWZlc3QobWFuaWZlc3RFbnRyeSwgdHJ1ZSk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuXG5cbiAgICAgIC8vIDQpIEJ1bXAgdmVyc2lvbi5qc29uICsgc2V0dGluZ3NcbiAgICAgIGF3YWl0IHRoaXMudXBkYXRlVmVyc2lvbkZpbGUoKTtcbiAgICAgIHRoaXMuc2V0dGluZ3MuaW5zdGFsbGVkVmVyc2lvbiA9IHRoaXMuc2V0dGluZ3MubGF0ZXN0VG9vbGtpdFZlcnNpb24hO1xuICAgICAgdGhpcy5zZXR0aW5ncy5sYXN0Rm9yY2VVcGRhdGUgPSBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCk7XG4gICAgICBhd2FpdCB0aGlzLnNhdmVTZXR0aW5ncygpO1xuXG4gICAgICAvLyA1KSBJbXBvcnQgc2VsZWN0ZWQgY29tcGVuZGl1bSArIHJlZmVyZW5jZXNcbiAgICAgIGNvbnN0IGNvbXAgPSB0aGlzLnNldHRpbmdzLnJ1bGVzZXRDb21wZW5kaXVtO1xuICAgICAgY29uc3QgcmVmcyA9IHRoaXMuc2V0dGluZ3MucnVsZXNldFJlZmVyZW5jZSA/PyBbXTtcbiAgICAgIGlmIChjb21wKSB7XG4gICAgICAgIGNvbnN0IGpvYnM6IFByb21pc2U8dW5rbm93bj5bXSA9IFtcbiAgICAgICAgICBpbXBvcnRSdWxlc2V0RGF0YSh7IGFwcDogdGhpcy5hcHAsIGVkaXRpb25LZXk6IGNvbXAsIHRhcmdldFBhdGg6IFwiQ29tcGVuZGl1bVwiIH0pLFxuICAgICAgICAgIC4uLnJlZnMubWFwKHJlZktleSA9PiB7XG4gICAgICAgICAgICBjb25zdCBsYWJlbCA9IGdldFJ1bGVzZXREaXNwbGF5TmFtZShyZWZLZXkpO1xuICAgICAgICAgICAgcmV0dXJuIGltcG9ydFJ1bGVzZXREYXRhKHtcbiAgICAgICAgICAgICAgYXBwOiB0aGlzLmFwcCxcbiAgICAgICAgICAgICAgZWRpdGlvbktleTogcmVmS2V5LFxuICAgICAgICAgICAgICB0YXJnZXRQYXRoOiBgUmVzb3VyY2VzL1J1bGVzZXRzLyR7bGFiZWx9YCxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0pXG4gICAgICAgIF07XG4gICAgICAgIGF3YWl0IFByb21pc2UuYWxsKGpvYnMpO1xuICAgICAgfVxuXG4gICAgICAvLyA2KSBNYXJrZXIgKyByZVx1MjAxMGVuYWJsZSBoaWdobGlnaHRpbmcgKyByZXBhaW50IFVJXG4gICAgICBjb25zdCBtYXJrZXIgPSAnLnZ2dW5kZXJsb3JlX2luc3RhbGxlZCc7XG4gICAgICBpZiAoIShhd2FpdCB0aGlzLmFwcC52YXVsdC5hZGFwdGVyLmV4aXN0cyhtYXJrZXIpKSkge1xuICAgICAgICBhd2FpdCB0aGlzLmFwcC52YXVsdC5jcmVhdGUobWFya2VyLCAnJyk7XG4gICAgICB9XG4gICAgICB0aGlzLnNldHRpbmdzLmhpZ2hsaWdodEVuYWJsZWQgPSB0cnVlO1xuICAgICAgYXdhaXQgdGhpcy5zYXZlU2V0dGluZ3MoKTtcbiAgICAgIHRoaXMuZW5hYmxlSGlnaGxpZ2h0KCk7XG4gICAgICBpZiAodGhpcy5zZXR0aW5nc1RhYikgdGhpcy5zZXR0aW5nc1RhYi5kaXNwbGF5KCk7XG5cbiAgICAgIC8vIDcpIFN1Y2Nlc3MgbW9kYWwgJiByZWxvYWQgdmF1bHRcbiAgICAgIGluc3RhbGxpbmcuY2xvc2UoKTtcblxuICAgICAgY29uc3Qgc3VjY2VzcyA9IG5ldyBNb2RhbCh0aGlzLmFwcCk7XG4gICAgICBzdWNjZXNzLm9uT3BlbiA9ICgpID0+IHtcbiAgICAgICAgc3VjY2Vzcy5jb250ZW50RWwuZW1wdHkoKTtcbiAgICAgICAgc3VjY2Vzcy50aXRsZUVsLnNldFRleHQoJ1x1MjcwNSBDdXN0b20gSW5zdGFsbCBDb21wbGV0ZScpO1xuXG4gICAgICAgIGNvbnN0IG1zZyA9IHN1Y2Nlc3MuY29udGVudEVsLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ2luc3RhbGxzdWNjZXNzJyB9KTtcbiAgICAgICAgbGV0IHNlY29uZHMgPSAzO1xuXG4gICAgICAgIGNvbnN0IHJlbmRlciA9ICgpID0+IHtcbiAgICAgICAgICBtc2cuc2V0VGV4dChgUmVsb2FkaW5nIHZhdWx0IGluICR7c2Vjb25kc31cdTIwMjZgKTtcbiAgICAgICAgfTtcbiAgICAgICAgcmVuZGVyKCk7XG5cbiAgICAgICAgY29uc3QgdGltZXIgPSB3aW5kb3cuc2V0SW50ZXJ2YWwoKCkgPT4ge1xuICAgICAgICAgIHNlY29uZHMgLT0gMTtcbiAgICAgICAgICBpZiAoc2Vjb25kcyA8PSAwKSB7XG4gICAgICAgICAgICB3aW5kb3cuY2xlYXJJbnRlcnZhbCh0aW1lcik7XG4gICAgICAgICAgICBzdWNjZXNzLmNsb3NlKCk7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAodGhpcy5hcHAgYXMgYW55KS5jb21tYW5kcy5leGVjdXRlQ29tbWFuZEJ5SWQoJ2FwcDpyZWxvYWQnKTtcbiAgICAgICAgICAgIH0gY2F0Y2gge1xuICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24ucmVsb2FkKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfVxuICAgICAgICAgIHJlbmRlcigpO1xuICAgICAgICB9LCAxMDAwKTtcbiAgICAgIH07XG4gICAgICBzdWNjZXNzLm9wZW4oKTtcblxuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgY29uc29sZS5lcnJvcignXHUyNzRDIHBlcmZvcm1DdXN0b21JbnN0YWxsIGZhaWxlZDonLCBlcnIpO1xuICAgICAgaW5zdGFsbGluZy5jbG9zZSgpO1xuICAgICAgbmV3IE5vdGljZSgnXHUyNzRDIEN1c3RvbSBpbnN0YWxsIGZhaWxlZDsgY2hlY2sgY29uc29sZSBmb3IgZGV0YWlscy4nKTtcbiAgICB9XG4gIH1cblxuXG4gIC8vIFx1MjUwMFx1MjUwMFx1MjUwMCBISUdITElHSFRJTkcgKExpZ2h0ICsgRGFyayBNb2RlKSBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcblxuICBwcml2YXRlIGdldCBoaWdobGlnaHRDU1MoKTogc3RyaW5nIHtcbiAgICBjb25zdCBsaWdodCA9IHRoaXMuc2V0dGluZ3MuaGlnaGxpZ2h0Q29sb3JMaWdodC50cmltKCkgfHwgJ3JnYmEoMTA3LDE0NiwxMjAsMSknO1xuICAgIGNvbnN0IGRhcmsgPSB0aGlzLnNldHRpbmdzLmhpZ2hsaWdodENvbG9yRGFyay50cmltKCkgfHwgJ3JnYmEoIDUwLCA3MCwgNTAsMSknO1xuXG4gICAgY29uc3QgZmlsZVNlbGVjdG9ycyA9IHRoaXMubWFuaWZlc3RDYWNoZS5maWxlcy5tYXAoKGYpID0+IHtcbiAgICAgIGNvbnN0IGVzY2FwZWQgPSBmLnBhdGgucmVwbGFjZSgvXCIvZywgJ1xcXFxcIicpO1xuICAgICAgcmV0dXJuIGAubmF2LWZpbGUtdGl0bGVbZGF0YS1wYXRoPVwiJHtlc2NhcGVkfVwiXWA7XG4gICAgfSk7XG5cbiAgICAvLyBjb25zdCBmb2xkZXJTZWxlY3RvcnMgPSB0aGlzLm1hbmlmZXN0Q2FjaGUuZm9sZGVycy5tYXAoKGYpID0+IHtcbiAgICAvLyAgIGNvbnN0IGVzY2FwZWQgPSBmLnBhdGgucmVwbGFjZSgvXCIvZywgJ1xcXFxcIicpO1xuICAgIC8vICAgcmV0dXJuIGAubmF2LWZvbGRlci10aXRsZVtkYXRhLXBhdGg9XCIke2VzY2FwZWR9XCJdYDtcbiAgICAvLyB9KTtcblxuICAgIGNvbnN0IGxpbmVzOiBzdHJpbmdbXSA9IFtcbiAgICAgIGA6cm9vdCB7YCxcbiAgICAgIGAgIC0tdnZ1bmRlcmxvcmUtdG9vbGtpdC1oaWdobGlnaHQ6ICR7bGlnaHR9O2AsXG4gICAgICBgfWAsXG4gICAgICBgYCxcbiAgICAgIGBib2R5LnRoZW1lLWRhcmsge2AsXG4gICAgICBgICAtLXZ2dW5kZXJsb3JlLXRvb2xraXQtaGlnaGxpZ2h0OiAke2Rhcmt9O2AsXG4gICAgICBgfWAsXG4gICAgICBgYCxcbiAgICBdO1xuXG4gICAgaWYgKGZpbGVTZWxlY3RvcnMubGVuZ3RoKSB7XG4gICAgICBsaW5lcy5wdXNoKGAke2ZpbGVTZWxlY3RvcnMuam9pbignLCAnKX0ge2ApO1xuICAgICAgbGluZXMucHVzaChgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS12dnVuZGVybG9yZS10b29sa2l0LWhpZ2hsaWdodCk7YCk7XG4gICAgICBsaW5lcy5wdXNoKGAgIGJvcmRlci1yYWRpdXM6IDNweDtgKTtcbiAgICAgIGxpbmVzLnB1c2goYH1gKTtcbiAgICAgIGxpbmVzLnB1c2goYGApO1xuICAgIH1cblxuICAgIC8vIGlmIChmb2xkZXJTZWxlY3RvcnMubGVuZ3RoKSB7XG4gICAgLy8gICBsaW5lcy5wdXNoKGAke2ZvbGRlclNlbGVjdG9ycy5qb2luKCcsICcpfSB7YCk7XG4gICAgLy8gICBsaW5lcy5wdXNoKGAgIGJhY2tncm91bmQtY29sb3I6IHZhcigtLXZ2dW5kZXJsb3JlLXRvb2xraXQtaGlnaGxpZ2h0KTtgKTtcbiAgICAvLyAgIGxpbmVzLnB1c2goYCAgYm9yZGVyLXJhZGl1czogM3B4O2ApO1xuICAgIC8vICAgbGluZXMucHVzaChgfWApO1xuICAgIC8vICAgbGluZXMucHVzaChgYCk7XG4gICAgLy8gfVxuXG4gICAgcmV0dXJuIGxpbmVzLmpvaW4oJ1xcbicpO1xuICB9XG5cbiAgcHVibGljIGVuYWJsZUhpZ2hsaWdodCgpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5zdHlsZUVsKSByZXR1cm47XG4gICAgdGhpcy5zdHlsZUVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3R5bGUnKTtcbiAgICB0aGlzLnN0eWxlRWwuaWQgPSAndnZ1bmRlcmxvcmUtaGlnaGxpZ2h0LWluamVjdCc7XG4gICAgdGhpcy5zdHlsZUVsLnRleHRDb250ZW50ID0gdGhpcy5oaWdobGlnaHRDU1M7XG4gICAgZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZCh0aGlzLnN0eWxlRWwpO1xuICB9XG5cbiAgcHVibGljIGRpc2FibGVIaWdobGlnaHQoKTogdm9pZCB7XG4gICAgaWYgKCF0aGlzLnN0eWxlRWwpIHJldHVybjtcbiAgICB0aGlzLnN0eWxlRWwucmVtb3ZlKCk7XG4gICAgdGhpcy5zdHlsZUVsID0gbnVsbDtcbiAgfVxuXG4gIC8vIFx1MjUwMFx1MjUwMFx1MjUwMCBSRU1PVEUgQkFTRUxJTkUgQ0FDSElORyBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcblxuICBwdWJsaWMgYXN5bmMgZmV0Y2hSZW1vdGVCYXNlbGluZSgpOiBQcm9taXNlPHZvaWQ+IHtcblxuICAgIGlmICghdGhpcy5tYW5pZmVzdENhY2hlIHx8ICFBcnJheS5pc0FycmF5KHRoaXMubWFuaWZlc3RDYWNoZS5maWxlcykpIHtcbiAgICAgIGNvbnNvbGUud2FybignXHUyNkEwXHVGRTBGIG1hbmlmZXN0Q2FjaGUgaXMgbWlzc2luZyBvciBpbnZhbGlkJyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgZm9yIChjb25zdCBlbnRyeSBvZiB0aGlzLm1hbmlmZXN0Q2FjaGUuZmlsZXMpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHJhd1VybCA9IGBodHRwczovL3Jhdy5naXRodWJ1c2VyY29udGVudC5jb20vc2xhbXdpc2UwMDAxL1ZWdW5kZXJsb3JlLVRvb2xraXQtRnVsbC9tYWluLyR7ZW50cnkucGF0aH1gO1xuICAgICAgICBjb25zdCByZW1vdGVUZXh0ID0gYXdhaXQgKGF3YWl0IGZldGNoKHJhd1VybCkpLnRleHQoKTtcbiAgICAgICAgY29uc3QgcmVzb2x2ZWQgPSB0aGlzLnJlc29sdmVWYXVsdFBhdGgoZW50cnkucGF0aCk7XG5cbiAgICAgICAgLy8gSWYgcmVtYXBwZWQsIHJlbW92ZSB0aGUgb2xkIGNhY2hlIGVudHJ5XG4gICAgICAgIGlmIChyZXNvbHZlZCAhPT0gZW50cnkucGF0aCkge1xuICAgICAgICAgIGF3YWl0IHRoaXMuZmlsZUNhY2hlTWFuYWdlci5yZW1vdmVGcm9tQ2FjaGUoZW50cnkucGF0aCk7XG4gICAgICAgIH1cblxuICAgICAgICBhd2FpdCB0aGlzLmZpbGVDYWNoZU1hbmFnZXIudXBkYXRlQ2FjaGUoXG4gICAgICAgICAgcmVzb2x2ZWQsXG4gICAgICAgICAgcmVtb3RlVGV4dCxcbiAgICAgICAgICBlbnRyeS5wYXRoLFxuICAgICAgICAgIGZhbHNlXG4gICAgICAgICk7XG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoYEZhaWxlZCB0byBmZXRjaCByYXcgYmFzZWxpbmUgZm9yICR7ZW50cnkucGF0aH1gLCBlKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgfVxuXG4gIHByaXZhdGUgc2FuaXRpemVUaXRsZShzOiBzdHJpbmcpOiBzdHJpbmcge1xuICAgIHJldHVybiAocyA/PyAnJykucmVwbGFjZSgvW1xcLzoqP1wiPD58XS9nLCAnJykudHJpbSgpLnNsaWNlKDAsIDEwMCkgfHwgJ1VudGl0bGVkJztcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgcmVwbGFjZVNlbGVjdGlvbldpdGhMaW5rKHZpZXc6IE1hcmtkb3duVmlldywgb3JpZ2luYWw6IHN0cmluZywgY3JlYXRlZFRpdGxlOiBzdHJpbmcpIHtcbiAgICBjb25zdCBlZCA9IHZpZXcuZWRpdG9yO1xuICAgIGNvbnN0IGN1cnJlbnQgPSBlZC5nZXRWYWx1ZSgpO1xuICAgIGNvbnN0IGxpbmsgPSBgW1ske2NyZWF0ZWRUaXRsZX1dXWA7XG5cbiAgICBpZiAob3JpZ2luYWwgJiYgY3VycmVudC5pbmNsdWRlcyhvcmlnaW5hbCkpIHtcbiAgICAgIGNvbnN0IHVwZGF0ZWQgPSBjdXJyZW50LnJlcGxhY2Uob3JpZ2luYWwsIGxpbmspO1xuICAgICAgYXdhaXQgdGhpcy5hcHAudmF1bHQubW9kaWZ5KHZpZXcuZmlsZSEsIHVwZGF0ZWQpO1xuICAgIH0gZWxzZSB7XG4gICAgICBlZC5yZXBsYWNlU2VsZWN0aW9uKGxpbmspO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgcnVuVnZUZW1wbGF0ZUNvbW1hbmQodGVtcGxhdGVQYXRoOiBzdHJpbmcpIHtcbiAgICBhd2FpdCB0aGlzLnJ1blNCVGVtcGxhdGUodGVtcGxhdGVQYXRoKTtcbiAgfVxuXG5cblxuXG4gIC8vIFx1MjUwMFx1MjUwMFx1MjUwMCBNQVJLRVIgRklMRSBDSEVDS1MgKGZpcnN0XHUyMDEwcnVuIGRldGVjdGlvbikgXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXG5cbiAgcHJpdmF0ZSBhc3luYyBjaGVja01hcmtlckZpbGUoKSB7XG4gICAgY29uc3QgbWFya2VyUGF0aCA9ICcudnZ1bmRlcmxvcmVfaW5zdGFsbGVkJztcbiAgICBjb25zdCBtYXJrZXJFeGlzdHMgPSBhd2FpdCB0aGlzLmFwcC52YXVsdC5hZGFwdGVyLmV4aXN0cyhtYXJrZXJQYXRoKTtcbiAgICB0aGlzLmlzRmlyc3RSdW4gPSAhbWFya2VyRXhpc3RzO1xuICAgIGRlbGV0ZSAodGhpcy5zZXR0aW5ncyBhcyBhbnkpLm5lZWRzSW5zdGFsbDtcbiAgICBhd2FpdCB0aGlzLnNhdmVTZXR0aW5ncygpO1xuICAgIHRoaXMuc2V0dGluZ3NUYWIuZGlzcGxheSgpO1xuICB9XG5cblxuICAvLyBcdTI1MDBcdTI1MDBcdTI1MDAgTUFOSUZFU1QgU1lOQyBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcblxuICBhc3luYyBzeW5jTWFuaWZlc3QoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IHJlcXVlc3RVcmwoe1xuICAgICAgICB1cmw6ICdodHRwczovL3Jhdy5naXRodWJ1c2VyY29udGVudC5jb20vc2xhbXdpc2UwMDAxL1ZWdW5kZXJsb3JlLVRvb2xraXQtRnVsbC9tYWluL21hbmlmZXN0Lmpzb24nXG4gICAgICB9KTtcblxuICAgICAgY29uc3QgbWFuaWZlc3QgPSByZXMuanNvbjtcbiAgICAgIHRoaXMuc2V0dGluZ3MubGF0ZXN0RGVmYXVsdHMgPSBtYW5pZmVzdC5kZWZhdWx0UGF0aHMgfHwge307XG4gICAgICB0aGlzLm1hbmlmZXN0Q2FjaGUgPSBtYW5pZmVzdDtcblxuICAgICAgY29uc3QgbWFuaWZlc3RDb250ZW50ID0gSlNPTi5zdHJpbmdpZnkobWFuaWZlc3QsIG51bGwsIDIpO1xuICAgICAgYXdhaXQgdGhpcy5hcHAudmF1bHQuYWRhcHRlci53cml0ZSgnbWFuaWZlc3QuanNvbicsIG1hbmlmZXN0Q29udGVudCk7XG4gICAgICBhd2FpdCB0aGlzLnNhdmVTZXR0aW5ncygpO1xuXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHN5bmNpbmcgbWFuaWZlc3Q6JywgZXJyb3IpO1xuICAgICAgbmV3IE5vdGljZSgnRmFpbGVkIHRvIHN5bmMgbWFuaWZlc3QuJyk7XG4gICAgfVxuICB9XG5cbiAgLy8gXHUyNTAwXHUyNTAwXHUyNTAwIFBMVUdJTiBMSUZFQ1lDTEUgXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXG5cbiAgYXN5bmMgb25sb2FkKCkge1xuICAgIGF3YWl0IHRoaXMubG9hZFNldHRpbmdzKCk7XG5cbiAgICBpZiAoIUFycmF5LmlzQXJyYXkodGhpcy5zZXR0aW5ncy5lbmFibGVkQWR2ZW50dXJlQ2F0ZWdvcmllcykpIHtcbiAgICAgIHRoaXMuc2V0dGluZ3MuZW5hYmxlZEFkdmVudHVyZUNhdGVnb3JpZXMgPSBbJ25wY3MnLCAnZmFjdGlvbnMnLCAnbW9uc3RlcnMnLCAnaGlzdG9yeScsICdwbGFjZXMnXTtcbiAgICAgIGF3YWl0IHRoaXMuc2F2ZVNldHRpbmdzKCk7XG4gICAgfVxuXG4gICAgdGhpcy5hcHBseUJhc2VUb29sYmFyRW1iZWRDU1MoKTtcblxuICAgIGFkZEljb24oJ21hcG1ha2luZycsIG1hcG1ha2luZ19pY29uKVxuICAgIGFkZEljb24oJ2dhbWVwbGF5JywgZ2FtZXBsYXlfaWNvbilcbiAgICAvLyBcdTI1MDBcdTI1MDBcdTI1MDAgQ09SRSBNQU5BR0VSUyBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcbiAgICB0aGlzLmJhY2t1cE1hbmFnZXIgPSBuZXcgQmFja3VwTWFuYWdlcih0aGlzLmFwcCk7XG4gICAgdGhpcy5maWxlQ2FjaGVNYW5hZ2VyID0gbmV3IFRvb2xraXRGaWxlQ2FjaGVNYW5hZ2VyKFxuICAgICAgdGhpcy5hcHAudmF1bHQsXG4gICAgICB0aGlzLnNldHRpbmdzLmZpbGVDYWNoZSA/PyB7fSxcbiAgICAgIGFzeW5jICgpID0+IGF3YWl0IHRoaXMuc2F2ZVNldHRpbmdzKClcbiAgICApO1xuXG4gICAgLy8gXHUyNTAwXHUyNTAwXHUyNTAwIFNFVFRJTkdTIFVJIFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFxuICAgIHRoaXMuc2V0dGluZ3NUYWIgPSBuZXcgVG9vbGtpdFNldHRpbmdzVGFiKHRoaXMuYXBwLCB0aGlzKTtcbiAgICB0aGlzLmFkZFNldHRpbmdUYWIodGhpcy5zZXR0aW5nc1RhYik7XG5cbiAgICAvLyBzaWRlYmFyc1xuICAgIHRoaXMucmVnaXN0ZXJWaWV3KFNJREVCQVJfVklFV19UWVBFLCAobGVhZikgPT4gbmV3IFNpZGViYXJUZW1wbGF0ZXNWaWV3KGxlYWYpKTtcbiAgICB0aGlzLnJlZ2lzdGVyVmlldyhHQU1FUExBWV9WSUVXX1RZUEUsIChsZWFmKSA9PiBuZXcgR2FtZXBsYXlTaWRlYmFyVmlldyhsZWFmKSk7XG5cbiAgICAvLyBBdXRvLW9wZW4gYm90aCBzaWRlYmFycyBvbiB0aGUgUklHSFQgYW5kIGZvY3VzIFZWb3JsZGJ1aWxkaW5nXG4gICAgdGhpcy5hcHAud29ya3NwYWNlLm9uTGF5b3V0UmVhZHkoYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gQWx3YXlzIHJldHVybiBhIG5vbi1udWxsIHJpZ2h0IGxlYWZcbiAgICAgIGNvbnN0IGdldE9yQ3JlYXRlUmlnaHRMZWFmID0gKCk6IFdvcmtzcGFjZUxlYWYgPT5cbiAgICAgICAgdGhpcy5hcHAud29ya3NwYWNlLmdldFJpZ2h0TGVhZihmYWxzZSkgPz8gdGhpcy5hcHAud29ya3NwYWNlLmdldFJpZ2h0TGVhZih0cnVlKSE7XG5cbiAgICAgIC8vIEVuc3VyZSBHYW1lcGxheSAocmlnaHQsIG5vIGZvY3VzKVxuICAgICAgbGV0IGdhbWVwbGF5TGVhZjogV29ya3NwYWNlTGVhZiB8IG51bGwgPVxuICAgICAgICB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0TGVhdmVzT2ZUeXBlKEdBTUVQTEFZX1ZJRVdfVFlQRSlbMF0gPz8gbnVsbDtcbiAgICAgIGlmICghZ2FtZXBsYXlMZWFmKSB7XG4gICAgICAgIGdhbWVwbGF5TGVhZiA9IGdldE9yQ3JlYXRlUmlnaHRMZWFmKCk7XG4gICAgICAgIGF3YWl0IGdhbWVwbGF5TGVhZi5zZXRWaWV3U3RhdGUoeyB0eXBlOiBHQU1FUExBWV9WSUVXX1RZUEUsIGFjdGl2ZTogZmFsc2UgfSk7XG4gICAgICB9XG5cbiAgICAgIC8vIEVuc3VyZSBWVm9ybGRidWlsZGluZyAocmlnaHQsIGZvY3VzIHRoaXMgb25lKVxuICAgICAgbGV0IHdvcmxkTGVhZjogV29ya3NwYWNlTGVhZiB8IG51bGwgPVxuICAgICAgICB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0TGVhdmVzT2ZUeXBlKFNJREVCQVJfVklFV19UWVBFKVswXSA/PyBudWxsO1xuICAgICAgaWYgKCF3b3JsZExlYWYpIHtcbiAgICAgICAgd29ybGRMZWFmID0gZ2V0T3JDcmVhdGVSaWdodExlYWYoKTtcbiAgICAgIH1cbiAgICAgIGF3YWl0IHdvcmxkTGVhZi5zZXRWaWV3U3RhdGUoeyB0eXBlOiBTSURFQkFSX1ZJRVdfVFlQRSwgYWN0aXZlOiB0cnVlIH0pO1xuICAgICAgdGhpcy5hcHAud29ya3NwYWNlLnJldmVhbExlYWYod29ybGRMZWFmKTtcbiAgICB9KTtcblxuXG4gICAgLy8gKioqKioqKysrKysrIFNVUEVSIENPT0wgSE9US0VZIENPTU1BTkRTIFNFQ1RJT04tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG4gICAgdGhpcy5hZGRDb21tYW5kKHtcbiAgICAgIGlkOiBcIm9wZW4td29ybGRidWlsZGluZy1zaWRlYmFyXCIsXG4gICAgICBuYW1lOiBcIk9wZW4gVlZvcmxkYnVpbGRpbmcgcGFuZVwiLFxuICAgICAgaWNvbjogXCJtYXBtYWtpbmdcIixcbiAgICAgIGNhbGxiYWNrOiBhc3luYyAoKSA9PiB7XG4gICAgICAgIGxldCBsZWFmOiBXb3Jrc3BhY2VMZWFmIHwgdW5kZWZpbmVkIHwgbnVsbCA9XG4gICAgICAgICAgdGhpcy5hcHAud29ya3NwYWNlLmdldExlYXZlc09mVHlwZShTSURFQkFSX1ZJRVdfVFlQRSlbMF07XG4gICAgICAgIGlmICghbGVhZikge1xuICAgICAgICAgIGxlYWYgPVxuICAgICAgICAgICAgdGhpcy5hcHAud29ya3NwYWNlLmdldFJpZ2h0TGVhZihmYWxzZSkgPz9cbiAgICAgICAgICAgIHRoaXMuYXBwLndvcmtzcGFjZS5nZXRSaWdodExlYWYodHJ1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFsZWFmKSB7XG4gICAgICAgICAgbmV3IE5vdGljZShcIlx1Mjc0QyBDb3VsZCBub3Qgb3BlbiBUZW1wbGF0ZXMgc2lkZWJhclwiKTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgYXdhaXQgbGVhZi5zZXRWaWV3U3RhdGUoeyB0eXBlOiBTSURFQkFSX1ZJRVdfVFlQRSwgYWN0aXZlOiB0cnVlIH0pO1xuICAgICAgICB0aGlzLmFwcC53b3Jrc3BhY2UucmV2ZWFsTGVhZihsZWFmKTtcbiAgICAgIH0sXG4gICAgfSk7XG5cbiAgICB0aGlzLmFkZENvbW1hbmQoe1xuICAgICAgaWQ6IFwib3Blbi1nYW1lcGxheS1zaWRlYmFyXCIsXG4gICAgICBuYW1lOiBcIk9wZW4gR2FtZXBsYXkgcGFuZVwiLFxuICAgICAgaWNvbjogXCJnYW1lcGxheVwiLFxuICAgICAgY2FsbGJhY2s6IGFzeW5jICgpID0+IHtcbiAgICAgICAgbGV0IGxlYWY6IFdvcmtzcGFjZUxlYWYgfCB1bmRlZmluZWQgfCBudWxsID1cbiAgICAgICAgICB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0TGVhdmVzT2ZUeXBlKEdBTUVQTEFZX1ZJRVdfVFlQRSlbMF07XG4gICAgICAgIGlmICghbGVhZikge1xuICAgICAgICAgIGxlYWYgPVxuICAgICAgICAgICAgdGhpcy5hcHAud29ya3NwYWNlLmdldFJpZ2h0TGVhZihmYWxzZSkgPz9cbiAgICAgICAgICAgIHRoaXMuYXBwLndvcmtzcGFjZS5nZXRSaWdodExlYWYodHJ1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFsZWFmKSB7XG4gICAgICAgICAgbmV3IE5vdGljZShcIlx1Mjc0QyBDb3VsZCBub3Qgb3BlbiBHYW1lcGxheSBzaWRlYmFyXCIpO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBhd2FpdCBsZWFmLnNldFZpZXdTdGF0ZSh7IHR5cGU6IEdBTUVQTEFZX1ZJRVdfVFlQRSwgYWN0aXZlOiB0cnVlIH0pO1xuICAgICAgICB0aGlzLmFwcC53b3Jrc3BhY2UucmV2ZWFsTGVhZihsZWFmKTtcbiAgICAgIH0sXG4gICAgfSk7XG5cbiAgICB0aGlzLmFkZENvbW1hbmQoe1xuICAgICAgaWQ6ICd2di1uZXctcGMnLFxuICAgICAgbmFtZTogJ1ZWdW5kZXJsb3JlOiBOZXcgUGxheWVyIENoYXJhY3RlcicsXG4gICAgICBjYWxsYmFjazogYXN5bmMgKCkgPT4ge1xuICAgICAgICBhd2FpdCB0aGlzLnJ1blNCVGVtcGxhdGUoJ0V4dHJhcy9UZW1wbGF0ZXMvcGxheWVyY2hhcmFjdGVyX3RlbXBsYXRlLm1kJyk7XG4gICAgICB9LFxuICAgIH0pO1xuICAgIHRoaXMuYWRkQ29tbWFuZCh7XG4gICAgICBpZDogJ3Z2LW5ldy1ucGMnLFxuICAgICAgbmFtZTogJ1ZWdW5kZXJsb3JlOiBOZXcgTlBDJyxcbiAgICAgIGNhbGxiYWNrOiBhc3luYyAoKSA9PiB7XG4gICAgICAgIGF3YWl0IHRoaXMucnVuU0JUZW1wbGF0ZSgnRXh0cmFzL1RlbXBsYXRlcy9ucGNfdGVtcGxhdGUubWQnKTtcbiAgICAgIH0sXG4gICAgfSk7XG4gICAgdGhpcy5hZGRDb21tYW5kKHtcbiAgICAgIGlkOiAndnYtbmV3LWl0ZW0nLFxuICAgICAgbmFtZTogJ1ZWdW5kZXJsb3JlOiBOZXcgSXRlbScsXG4gICAgICBjYWxsYmFjazogYXN5bmMgKCkgPT4ge1xuICAgICAgICBhd2FpdCB0aGlzLnJ1blNCVGVtcGxhdGUoJ0V4dHJhcy9UZW1wbGF0ZXMvbmV3aXRlbV90ZW1wbGF0ZS5tZCcpO1xuICAgICAgfSxcbiAgICB9KTtcbiAgICB0aGlzLmFkZENvbW1hbmQoe1xuICAgICAgaWQ6ICd2di1uZXctY3JlYXR1cmUnLFxuICAgICAgbmFtZTogJ1ZWdW5kZXJsb3JlOiBOZXcgQ3JlYXR1cmUnLFxuICAgICAgY2FsbGJhY2s6IGFzeW5jICgpID0+IHtcbiAgICAgICAgYXdhaXQgdGhpcy5ydW5TQlRlbXBsYXRlKCdFeHRyYXMvVGVtcGxhdGVzL25ld2NyZWF0dXJlX3RlbXBsYXRlLm1kJyk7XG4gICAgICB9LFxuICAgIH0pO1xuICAgIHRoaXMuYWRkQ29tbWFuZCh7XG4gICAgICBpZDogJ3Z2LW5ldy1wbGFjZScsXG4gICAgICBuYW1lOiAnVlZ1bmRlcmxvcmU6IE5ldyBQbGFjZScsXG4gICAgICBjYWxsYmFjazogYXN5bmMgKCkgPT4ge1xuICAgICAgICBhd2FpdCB0aGlzLnJ1blNCVGVtcGxhdGUoJ0V4dHJhcy9UZW1wbGF0ZXMvbmV3cGxhY2VfdGVtcGxhdGUubWQnKTtcbiAgICAgIH0sXG4gICAgfSk7XG5cblxuICAgIHRoaXMuYWRkQ29tbWFuZCh7XG4gICAgICBpZDogJ3Z2LWNoZWNrLXVwZGF0ZXMnLFxuICAgICAgbmFtZTogJ1ZWdW5kZXJsb3JlOiBSdW4gXHUyMDE0IENoZWNrIGZvciBUb29sa2l0IFVwZGF0ZXMnLFxuICAgICAgY2FsbGJhY2s6IGFzeW5jICgpID0+IHsgYXdhaXQgdGhpcy5jaGVja0ZvclVwZGF0ZXMoKTsgfSxcbiAgICB9KTtcblxuICAgIHRoaXMuYWRkQ29tbWFuZCh7XG4gICAgICBpZDogJ3Z2LWZvcmNlLXVwZGF0ZScsXG4gICAgICBuYW1lOiAnVlZ1bmRlcmxvcmU6IFJ1biBcdTIwMTQgRm9yY2UgVXBkYXRlJyxcbiAgICAgIGNhbGxiYWNrOiBhc3luYyAoKSA9PiB7IGF3YWl0IHRoaXMuZm9yY2VVcGRhdGVQcmV2aWV3QW5kQ29uZmlybSgpOyB9LFxuICAgIH0pO1xuXG4gICAgdGhpcy5hZGRDb21tYW5kKHtcbiAgICAgIGlkOiAndnYtdG9nZ2xlLWVtYmVkLXRvb2xiYXInLFxuICAgICAgbmFtZTogJ1RvZ2dsZTogU2hvdy9IaWRlIHRvb2xiYXJzIGluIEVtYmVkZGVkIEJhc2VzJyxcbiAgICAgIGNhbGxiYWNrOiBhc3luYyAoKSA9PiB7XG4gICAgICAgIGNvbnN0IG5leHQgPSAhdGhpcy5zZXR0aW5ncy5oaWRlQmFzZVRvb2xiYXI7XG4gICAgICAgIHRoaXMuc2V0dGluZ3MuaGlkZUJhc2VUb29sYmFyID0gbmV4dDtcbiAgICAgICAgYXdhaXQgdGhpcy5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgdGhpcy5hcHBseUJhc2VUb29sYmFyRW1iZWRDU1MoKTtcbiAgICAgICAgdGhpcy5zZXR0aW5nc1RhYj8uZGlzcGxheSgpO1xuICAgICAgfSxcbiAgICB9KTtcblxuICAgIC8vIHRoaXMuYWRkQ29tbWFuZCh7XG4gICAgLy8gICBpZDogJ3Z2LW1pZ3JhdGUtc2NhbicsXG4gICAgLy8gICBuYW1lOiAnVlZ1bmRlcmxvcmU6IFJ1biBcdTIwMTQgTWlncmF0aW9uIEF1ZGl0b3IgKFNjYW4pJyxcbiAgICAvLyAgIGNhbGxiYWNrOiBhc3luYyAoKSA9PiB7IGF3YWl0IHRoaXMub3Blbk1pZ3JhdGlvbkF1ZGl0b3JTY2FuKCk7IH0sXG4gICAgLy8gfSk7XG5cblxuICAgIC8vICsrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKytcblxuICAgIHRoaXMuYWRkUmliYm9uSWNvbignc2Nyb2xsLXRleHQnLCAnVlZ1bmRlcmxvcmUgU2lkZWJhcnMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBhd2FpdCB0aGlzLm9wZW5TaWRlYmFyKFNJREVCQVJfVklFV19UWVBFLCAncmlnaHQnKTtcbiAgICAgIGF3YWl0IHRoaXMub3BlblNpZGViYXIoR0FNRVBMQVlfVklFV19UWVBFLCAncmlnaHQnKTtcbiAgICB9KTtcblxuXG4gICAgLy8gXHUyNTAwXHUyNTAwXHUyNTAwIFJFU1RPUkUgU1RBVEUgXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXG4gICAgaWYgKHRoaXMuc2V0dGluZ3MuaXNGaXJzdFJ1biAhPT0gJ3llcycpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IGNvbnRlbnQgPSBhd2FpdCB0aGlzLmFwcC52YXVsdC5hZGFwdGVyLnJlYWQoJ21hbmlmZXN0Lmpzb24nKTtcbiAgICAgICAgdGhpcy5tYW5pZmVzdENhY2hlID0gSlNPTi5wYXJzZShjb250ZW50KTtcbiAgICAgIH0gY2F0Y2ggeyB9XG4gICAgfVxuICAgIC8vICBcdTIwMjIgSGlnaGxpZ2h0IG5hdiBpdGVtcyBpZiBlbmFibGVkXG4gICAgaWYgKHRoaXMuc2V0dGluZ3MuaGlnaGxpZ2h0RW5hYmxlZCkgdGhpcy5lbmFibGVIaWdobGlnaHQoKTtcblxuXG5cbiAgICAvLyBcdTI1MDBcdTI1MDBcdTI1MDAgREVGRVIgSEVBVlkgVEFTS1MgXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXG4gICAgc2V0VGltZW91dChhc3luYyAoKSA9PiB7XG4gICAgICBhd2FpdCB0aGlzLnN5bmNNYW5pZmVzdCgpO1xuICAgICAgYXdhaXQgdGhpcy5zaG93SW5kZXhpbmdNb2RhbCgpO1xuICAgICAgYXdhaXQgdGhpcy5jaGVja0ZvclVwZGF0ZXMoKTtcblxuICAgICAgLy8gYnVpbGQgeW91ciByZXF1aXJlc0dyYXBoIGZyb20gbWFuaWZlc3QuanNvblxuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgcmF3ID0gYXdhaXQgdGhpcy5hcHAudmF1bHQuYWRhcHRlci5yZWFkKCdtYW5pZmVzdC5qc29uJyk7XG4gICAgICAgIGNvbnN0IG1hbmlmZXN0ID0gSlNPTi5wYXJzZShyYXcpO1xuICAgICAgICBjb25zdCBlbnRyaWVzID0gWy4uLihtYW5pZmVzdC5mb2xkZXJzIHx8IFtdKSwgLi4uKG1hbmlmZXN0LmZpbGVzIHx8IFtdKV07XG4gICAgICAgIHRoaXMucmVxdWlyZXNHcmFwaCA9IG5ldyBNYXAoZW50cmllcy5tYXAoZSA9PiBbZS5rZXksIGUucmVxdWlyZXMgfHwgW11dKSk7XG4gICAgICB9IGNhdGNoIHtcbiAgICAgICAgdGhpcy5yZXF1aXJlc0dyYXBoID0gbmV3IE1hcCgpO1xuICAgICAgfVxuICAgIH0sIDI1MCk7XG5cbiAgICB0aGlzLnNjaGVkdWxlQXV0b1VwZGF0ZUNoZWNrKCk7XG4gICAgdGhpcy5yZWdpc3RlckV2ZW50KFxuICAgICAgdGhpcy5hcHAudmF1bHQub24oJ2RlbGV0ZScsICgpID0+XG4gICAgICAgIHRoaXMucmVnaXN0ZXJFdmVudChcbiAgICAgICAgICB0aGlzLmFwcC52YXVsdC5vbignZGVsZXRlJywgKCkgPT5cbiAgICAgICAgICAgICh0aGlzLmFwcCBhcyBhbnkpLmNvbW1hbmRzLmV4ZWN1dGVDb21tYW5kQnlJZCgnZGF0YXZpZXc6Y2xlYXItY2FjaGUnKVxuICAgICAgICAgIClcbiAgICAgICAgKSkpO1xuICAgIHRoaXMucmVnaXN0ZXJFdmVudChcbiAgICAgIHRoaXMuYXBwLnZhdWx0Lm9uKCdyZW5hbWUnLCAoKSA9PlxuICAgICAgICAodGhpcy5hcHAgYXMgYW55KS5jb21tYW5kcy5leGVjdXRlQ29tbWFuZEJ5SWQoJ2RhdGF2aWV3OmNsZWFyLWNhY2hlJylcbiAgICAgIClcbiAgICApO1xuICAgIHRoaXMucmVnaXN0ZXJFdmVudChcbiAgICAgIHRoaXMuYXBwLndvcmtzcGFjZS5vbignZWRpdG9yLW1lbnUnLCAobWVudSwgZWRpdG9yLCB2aWV3KSA9PiB7XG4gICAgICAgIGNvbnN0IHNlbCA9IGVkaXRvci5nZXRTZWxlY3Rpb24oKS50cmltKCk7XG4gICAgICAgIGlmICghc2VsLmxlbmd0aCkgcmV0dXJuO1xuXG4gICAgICAgIG1lbnUuYWRkSXRlbShpID0+IGlcbiAgICAgICAgICAuc2V0VGl0bGUoJ1ZWdW5kZXJsb3JlOiBOZXcgTlBDIGZyb20gc2VsZWN0aW9uJylcbiAgICAgICAgICAuc2V0SWNvbigndXNlci1wbHVzJylcbiAgICAgICAgICAub25DbGljayhhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLnNldFBlbmRpbmdTZWVkKHNlbCk7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnJ1blNCVGVtcGxhdGUoJ0V4dHJhcy9UZW1wbGF0ZXMvbnBjX3RlbXBsYXRlLm1kJyk7XG4gICAgICAgICAgfSkpO1xuXG4gICAgICAgIG1lbnUuYWRkSXRlbShpID0+IGlcbiAgICAgICAgICAuc2V0VGl0bGUoJ1ZWdW5kZXJsb3JlOiBOZXcgSXRlbSBmcm9tIHNlbGVjdGlvbicpXG4gICAgICAgICAgLnNldEljb24oJ3BsdXMtY2lyY2xlJylcbiAgICAgICAgICAub25DbGljayhhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLnNldFBlbmRpbmdTZWVkKHNlbCk7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnJ1blNCVGVtcGxhdGUoJ0V4dHJhcy9UZW1wbGF0ZXMvaXRlbV90ZW1wbGF0ZS5tZCcpO1xuICAgICAgICAgIH0pKTtcblxuICAgICAgICBtZW51LmFkZEl0ZW0oaSA9PiBpXG4gICAgICAgICAgLnNldFRpdGxlKCdWVnVuZGVybG9yZTogTmV3IFBsYWNlIGZyb20gc2VsZWN0aW9uJylcbiAgICAgICAgICAuc2V0SWNvbigncGx1cy1jaXJjbGUnKVxuICAgICAgICAgIC5vbkNsaWNrKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuc2V0UGVuZGluZ1NlZWQoc2VsKTtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMucnVuU0JUZW1wbGF0ZSgnRXh0cmFzL1RlbXBsYXRlcy9wbGFjZV90ZW1wbGF0ZS5tZCcpO1xuICAgICAgICAgIH0pKTtcbiAgICAgIH0pXG4gICAgKTtcblxuXG4gICAgLy8gXHUyNTAwXHUyNTAwXHUyNTAwIEZJUlNULVJVTiBcdTIwMUNXZWxjb21lLm1kXHUyMDFEIFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFxuICAgIGlmICh0aGlzLnNldHRpbmdzLmlzRmlyc3RSdW4gPT09ICdubycpIHtcbiAgICAgIHRoaXMuYXBwLndvcmtzcGFjZS5vbkxheW91dFJlYWR5KCgpID0+IHtcbiAgICAgICAgY29uc3Qgd2VsY29tZSA9IHRoaXMuYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aCgnV2VsY29tZS5tZCcpO1xuICAgICAgICBpZiAod2VsY29tZSBpbnN0YW5jZW9mIFRGaWxlKSB7XG4gICAgICAgICAgdGhpcy5hcHAud29ya3NwYWNlLmRldGFjaExlYXZlc09mVHlwZSgnc2V0dGluZ3MnKTtcbiAgICAgICAgICB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0TGVhZih0cnVlKS5vcGVuRmlsZSh3ZWxjb21lKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBtYXJrIHNob3duXG4gICAgICAgIHRoaXMuc2V0dGluZ3MuaXNGaXJzdFJ1biA9ICdzaG93bic7XG4gICAgICAgIHRoaXMuc2F2ZVNldHRpbmdzKCk7XG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuXG4gIG9udW5sb2FkKCkge1xuICAgIHRoaXMuZGlzYWJsZUhpZ2hsaWdodCgpO1xuICAgIHRoaXMuYXBwLndvcmtzcGFjZS5kZXRhY2hMZWF2ZXNPZlR5cGUoU0lERUJBUl9WSUVXX1RZUEUpO1xuICAgIGlmICh0aGlzLmF1dG9DaGVja0ludGVydmFsKSBjbGVhckludGVydmFsKHRoaXMuYXV0b0NoZWNrSW50ZXJ2YWwpO1xuICB9XG5cbiAgc2NoZWR1bGVBdXRvVXBkYXRlQ2hlY2soKSB7XG4gICAgdGhpcy5hdXRvQ2hlY2tJbnRlcnZhbCA9IHdpbmRvdy5zZXRJbnRlcnZhbCgoKSA9PiB7XG4gICAgICB0aGlzLmNoZWNrRm9yVXBkYXRlcygpO1xuICAgIH0sIDYwICogNjAgKiAxMDAwKTtcbiAgfVxuXG4gIHB1YmxpYyBhc3luYyBhY3RpdmF0ZVRlbXBsYXRlc1NpZGViYXIoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgLy8gQ2xvc2UgYW55IG9wZW4gc2lkZWJhciBvZiBvdXIgdmlldyB0eXBlXG4gICAgdGhpcy5hcHAud29ya3NwYWNlLmRldGFjaExlYXZlc09mVHlwZShTSURFQkFSX1ZJRVdfVFlQRSk7XG5cbiAgICAvLyBPcGVuIGEgbmV3IG9uZSBvbiB0aGUgbGVmdFxuICAgIGF3YWl0IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRMZWZ0TGVhZihmYWxzZSkhXG4gICAgICAuc2V0Vmlld1N0YXRlKHsgdHlwZTogU0lERUJBUl9WSUVXX1RZUEUsIGFjdGl2ZTogdHJ1ZSB9KTtcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgZ2V0VW5pcXVlTmV3Tm90ZVBhdGgoYmFzZVBhdGg6IHN0cmluZyk6IFByb21pc2U8c3RyaW5nPiB7XG4gICAgY29uc3QgYWRhcHRlciA9IHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXI7XG4gICAgaWYgKCEoYXdhaXQgYWRhcHRlci5leGlzdHMoYmFzZVBhdGgpKSkgcmV0dXJuIGJhc2VQYXRoO1xuICAgIGNvbnN0IGRvdCA9IGJhc2VQYXRoLmxhc3RJbmRleE9mKCcuJyk7XG4gICAgY29uc3Qgc3RlbSA9IGRvdCA+PSAwID8gYmFzZVBhdGguc2xpY2UoMCwgZG90KSA6IGJhc2VQYXRoO1xuICAgIGNvbnN0IGV4dCA9IGRvdCA+PSAwID8gYmFzZVBhdGguc2xpY2UoZG90KSA6ICcnO1xuICAgIGxldCBpID0gMjtcbiAgICB3aGlsZSAodHJ1ZSkge1xuICAgICAgY29uc3QgY2FuZGlkYXRlID0gYCR7c3RlbX0gKCR7aX0pJHtleHR9YDtcbiAgICAgIGlmICghKGF3YWl0IGFkYXB0ZXIuZXhpc3RzKGNhbmRpZGF0ZSkpKSByZXR1cm4gY2FuZGlkYXRlO1xuICAgICAgaSsrO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBhc3luYyBydW5TQlRlbXBsYXRlKHRlbXBsYXRlUGF0aDogc3RyaW5nKSB7XG4gICAgY29uc3QgdHBsID0gdGhpcy5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKHRlbXBsYXRlUGF0aCk7XG4gICAgaWYgKCEodHBsIGluc3RhbmNlb2YgVEZpbGUpKSB7IG5ldyBOb3RpY2UoYFx1MjZBMFx1RkUwRiBUZW1wbGF0ZSBub3QgZm91bmQ6ICR7dGVtcGxhdGVQYXRofWApOyByZXR1cm47IH1cblxuICAgIGNvbnN0IHRwT2JzID0gKHRoaXMuYXBwIGFzIGFueSkucGx1Z2lucy5nZXRQbHVnaW4oJ3RlbXBsYXRlci1vYnNpZGlhbicpIGFzIGFueTtcbiAgICBjb25zdCB0cEFsdCA9ICh0aGlzLmFwcCBhcyBhbnkpLnBsdWdpbnMuZ2V0UGx1Z2luKCd0ZW1wbGF0ZXInKSBhcyBhbnk7XG4gICAgY29uc3QgdGVtcGxhdGVyID0gdHBPYnMgfHwgdHBBbHQ7XG4gICAgaWYgKCF0ZW1wbGF0ZXIpIHsgbmV3IE5vdGljZSgnXHUyNkEwXHVGRTBGIENvdWxkIG5vdCBmaW5kIFRlbXBsYXRlciBcdTIwMTMgaXMgaXQgZW5hYmxlZD8nKTsgcmV0dXJuOyB9XG5cbiAgICBjb25zdCB0cE9iaiA9IHRlbXBsYXRlci50ZW1wbGF0ZXI/LmN1cnJlbnRfZnVuY3Rpb25zX29iamVjdDtcbiAgICBpZiAoIXRwT2JqKSB7IG5ldyBOb3RpY2UoJ1x1MjZBMFx1RkUwRiBUZW1wbGF0ZXIgQVBJIG5vdCByZWFkeVx1MjAxNGFkZCBhIHN0YXJ0dXAgdGVtcGxhdGUgYW5kIHJlc3RhcnQuJyk7IHJldHVybjsgfVxuXG4gICAgY29uc3Qgc3JjVmlldyA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVWaWV3T2ZUeXBlKE1hcmtkb3duVmlldyk7XG4gICAgc3JjVmlldz8uZWRpdG9yPy5mb2N1cygpO1xuICAgIGNvbnN0IHBlbmRpbmcgPSB0aGlzLnRha2VQZW5kaW5nU2VsZWN0aW9uQ29udGV4dD8uKCkgPz8gbnVsbDtcbiAgICBjb25zdCBsZWdhY3lTZWVkID0gdHlwZW9mICh0aGlzIGFzIGFueSkudGFrZVBlbmRpbmdTZWVkID09PSAnZnVuY3Rpb24nXG4gICAgICA/ICh0aGlzIGFzIGFueSkudGFrZVBlbmRpbmdTZWVkKClcbiAgICAgIDogbnVsbDtcblxuICAgIC8vIEJ1aWxkIGEgc3RhYmxlIHNuYXBzaG90IG9mIHRoZSBzb3VyY2UgZG9jIGFuZCBwb3NpdGlvbnMgKHN1cnZpdmVzIGZvY3VzIGxvc3MpXG4gICAgY29uc3QgZWQ6IGFueSA9IHNyY1ZpZXc/LmVkaXRvciA/PyBudWxsO1xuICAgIGNvbnN0IGJhc2VUZXh0OiBzdHJpbmcgPVxuICAgICAgcGVuZGluZz8ucHJlVGV4dCA/P1xuICAgICAgKGVkID8gZWQuZ2V0VmFsdWUoKSA6IChzcmNWaWV3Py5maWxlID8gYXdhaXQgdGhpcy5hcHAudmF1bHQucmVhZChzcmNWaWV3LmZpbGUpIDogJycpKTtcblxuICAgIGNvbnN0IGZyb20gPSBwZW5kaW5nPy5mcm9tID8/IGVkPy5nZXRDdXJzb3I/LignZnJvbScpO1xuICAgIGNvbnN0IHRvID0gcGVuZGluZz8udG8gPz8gZWQ/LmdldEN1cnNvcj8uKCd0bycpO1xuXG4gICAgZnVuY3Rpb24gcG9zVG9PZmZzZXQodGV4dDogc3RyaW5nLCBwb3M6IHsgbGluZTogbnVtYmVyOyBjaDogbnVtYmVyIH0pIHtcbiAgICAgIGxldCBvZmYgPSAwLCBpID0gMCwgbGluZSA9IDA7XG4gICAgICB3aGlsZSAobGluZSA8IHBvcy5saW5lICYmIGkgPCB0ZXh0Lmxlbmd0aCkge1xuICAgICAgICBjb25zdCBubCA9IHRleHQuaW5kZXhPZignXFxuJywgaSk7XG4gICAgICAgIGlmIChubCA9PT0gLTEpIHJldHVybiB0ZXh0Lmxlbmd0aDtcbiAgICAgICAgb2ZmID0gbmwgKyAxOyBpID0gb2ZmOyBsaW5lKys7XG4gICAgICB9XG4gICAgICByZXR1cm4gb2ZmICsgcG9zLmNoO1xuICAgIH1cblxuICAgIC8vIFByZWZlciBleGFjdCBzbGljZSBieSBvZmZzZXRzOyBmYWxsIGJhY2sgdG8gc3RyaW5nLWJhc2VkIHNvdXJjZXNcbiAgICBsZXQgcmF3U2VsID0gJyc7XG4gICAgaWYgKGJhc2VUZXh0ICYmIGZyb20gJiYgdG8pIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHN0YXJ0T2ZmID0gcG9zVG9PZmZzZXQoYmFzZVRleHQsIGZyb20pO1xuICAgICAgICBjb25zdCBlbmRPZmYgPSBwb3NUb09mZnNldChiYXNlVGV4dCwgdG8pO1xuICAgICAgICBpZiAoZW5kT2ZmID49IHN0YXJ0T2ZmKSByYXdTZWwgPSBiYXNlVGV4dC5zbGljZShzdGFydE9mZiwgZW5kT2ZmKTtcbiAgICAgIH0gY2F0Y2ggeyAvKiBpZ25vcmUgKi8gfVxuICAgIH1cbiAgICBpZiAoIXJhd1NlbCkge1xuICAgICAgcmF3U2VsID1cbiAgICAgICAgKHBlbmRpbmc/LnRleHQgJiYgcGVuZGluZy50ZXh0Lmxlbmd0aCA/IHBlbmRpbmcudGV4dCA6ICcnKSB8fFxuICAgICAgICAobGVnYWN5U2VlZCB8fCAnJykgfHxcbiAgICAgICAgKHNyY1ZpZXc/LmVkaXRvcj8uZ2V0U2VsZWN0aW9uPy4oKSA/PyAnJykgfHxcbiAgICAgICAgKHdpbmRvdy5nZXRTZWxlY3Rpb24oKT8udG9TdHJpbmcoKSA/PyAnJyk7XG4gICAgfVxuXG4gICAgLy8gSWYgbm90aGluZyB3YXMgc2VsZWN0ZWQsIGp1c3QgcnVuIHRoZSB0ZW1wbGF0ZSAoeW91ciBleGlzdGluZyBiZWhhdmlvcilcbiAgICBpZiAoIXJhd1NlbCkge1xuICAgICAgbGV0IHdyYXBwZXJGaWxlOiBURmlsZTtcbiAgICAgIHRyeSB7XG4gICAgICAgIHdyYXBwZXJGaWxlID0gYXdhaXQgdHBPYmouZmlsZS5jcmVhdGVfbmV3KHRwbCwgdW5kZWZpbmVkLCBmYWxzZSk7XG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGludm9raW5nIFRlbXBsYXRlcjonLCBlKTtcbiAgICAgICAgbmV3IE5vdGljZSgnXHUyNzRDIEZhaWxlZCB0byBydW4gdGVtcGxhdGU7IGNoZWNrIGNvbnNvbGUuJyk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIHRyeSB7IGF3YWl0IHRoaXMuYXBwLnZhdWx0LmRlbGV0ZSh3cmFwcGVyRmlsZSk7IH0gY2F0Y2ggeyB9XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gV2UgaGF2ZSBhIHNlbGVjdGlvbiBcdTIxOTIgcnVuIHRlbXBsYXRlIGFuZCB0aGVuIHJlcGxhY2UgdGhlIHNlbGVjdGlvbiB3aXRoIGEgbGlua1xuICAgIGNvbnN0IG9yaWdpblZpZXcgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlVmlld09mVHlwZShNYXJrZG93blZpZXcpO1xuICAgIGNvbnN0IHNyY1BhdGg6IHN0cmluZyB8IG51bGwgPSBwZW5kaW5nPy5maWxlUGF0aCB8fCBvcmlnaW5WaWV3Py5maWxlPy5wYXRoIHx8IG51bGw7XG4gICAgaWYgKCFzcmNQYXRoKSB7XG4gICAgICAvLyBObyBzb3VyY2UgdG8gbW9kaWZ5OyBydW4gYW5kIGV4aXRcbiAgICAgIGxldCB3cmFwcGVyRmlsZTogVEZpbGUgfCBudWxsID0gbnVsbDtcbiAgICAgIHRyeSB7XG4gICAgICAgIHdyYXBwZXJGaWxlID0gYXdhaXQgdHBPYmouZmlsZS5jcmVhdGVfbmV3KHRwbCwgdW5kZWZpbmVkLCBmYWxzZSk7XG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ1RlbXBsYXRlci5jcmVhdGVfbmV3IChubyBzcmNQYXRoKSBmYWlsZWQnLCBlKTtcbiAgICAgICAgbmV3IE5vdGljZSgnXHUyNzRDIENvdWxkIG5vdCBydW4gdGVtcGxhdGUuJyk7XG4gICAgICB9XG4gICAgICAvLyBvbmx5IHRyeSB0byBkZWxldGUgaWYgd2UgYWN0dWFsbHkgY3JlYXRlZCBpdFxuICAgICAgdHJ5IHsgaWYgKHdyYXBwZXJGaWxlKSBhd2FpdCB0aGlzLmFwcC52YXVsdC5kZWxldGUod3JhcHBlckZpbGUpOyB9IGNhdGNoIHsgfVxuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIFdhaXQgZm9yIHRoZSBuZXcgbm90ZSB0byBiZSBjcmVhdGVkXG4gICAgY29uc3Qgc3RhcnRNcyA9IERhdGUubm93KCk7XG4gICAgY29uc3QgY3JlYXRlZEZpbGVQcm9taXNlID0gbmV3IFByb21pc2U8VEZpbGUgfCBudWxsPigocmVzb2x2ZSkgPT4ge1xuICAgICAgY29uc3QgcmVmID0gdGhpcy5hcHAudmF1bHQub24oJ2NyZWF0ZScsIChhZikgPT4ge1xuICAgICAgICBpZiAoYWYgaW5zdGFuY2VvZiBURmlsZSAmJiBhZi5leHRlbnNpb24gPT09ICdtZCcgJiYgYWYuc3RhdC5jdGltZSA+PSBzdGFydE1zKSB7XG4gICAgICAgICAgdGhpcy5hcHAudmF1bHQub2ZmcmVmKHJlZik7XG4gICAgICAgICAgcmVzb2x2ZShhZik7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgc2V0VGltZW91dCgoKSA9PiB7IHRoaXMuYXBwLnZhdWx0Lm9mZnJlZihyZWYpOyByZXNvbHZlKG51bGwpOyB9LCA2MDAwKTtcbiAgICB9KTtcblxuICAgIC8vIC0tLSBsYXRlciwgYWZ0ZXIgeW91IHNldCB1cCBjcmVhdGVkRmlsZVByb21pc2VcbiAgICBsZXQgd3JhcHBlckZpbGU6IFRGaWxlIHwgbnVsbCA9IG51bGw7XG4gICAgdHJ5IHtcbiAgICAgIHdyYXBwZXJGaWxlID0gYXdhaXQgdHBPYmouZmlsZS5jcmVhdGVfbmV3KHRwbCwgdW5kZWZpbmVkLCBmYWxzZSk7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgY29uc29sZS5lcnJvcignVGVtcGxhdGVyLmNyZWF0ZV9uZXcgKHdyYXBwZXIpIGZhaWxlZCcsIGUpO1xuICAgICAgbmV3IE5vdGljZSgnXHUyNzRDIENvdWxkIG5vdCBydW4gdGVtcGxhdGUuJyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRyeSB7IGlmICh3cmFwcGVyRmlsZSkgYXdhaXQgdGhpcy5hcHAudmF1bHQuZGVsZXRlKHdyYXBwZXJGaWxlKTsgfSBjYXRjaCB7IH1cblxuICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tIG5ldyB0ZW1wbGF0ZSBub3RlIGJlaGF2aW9yIC0tLS0tLS0tLS0tLS0tLS0tXG4gICAgY29uc3QgY3JlYXRlZCA9IGF3YWl0IGNyZWF0ZWRGaWxlUHJvbWlzZTtcbiAgICBpZiAoIWNyZWF0ZWQpIHJldHVybjtcblxuICAgIGNvbnN0IG5ld05vdGVGaWxlOiBURmlsZSB8IG51bGwgPVxuICAgICAgKHRoaXMuYXBwLndvcmtzcGFjZS5hY3RpdmVMZWFmPy52aWV3IGluc3RhbmNlb2YgTWFya2Rvd25WaWV3KVxuICAgICAgICA/ICh0aGlzLmFwcC53b3Jrc3BhY2UuYWN0aXZlTGVhZi52aWV3LmZpbGUgYXMgVEZpbGUpXG4gICAgICAgIDogY3JlYXRlZDtcblxuICAgIGNvbnN0IGJlaGF2aW9yID0gdGhpcy5zZXR0aW5ncz8udGVtcGxhdGVPcGVuTW9kZSA/PyBcImRlZmF1bHRcIjtcblxuICAgIGlmIChiZWhhdmlvciA9PT0gXCJiYWNrZ3JvdW5kXCIpIHtcblxuICAgICAgY29uc3QgbmV3TGVhZiA9IHRoaXMuYXBwLndvcmtzcGFjZS5hY3RpdmVMZWFmO1xuXG4gICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgaWYgKG5ld0xlYWY/LnZpZXcgaW5zdGFuY2VvZiBNYXJrZG93blZpZXcpIHtcbiAgICAgICAgICBuZXdMZWFmLmRldGFjaCgpO1xuICAgICAgICB9XG4gICAgICB9LCAxMDApO1xuICAgIH0gZWxzZSBpZiAoYmVoYXZpb3IgPT09IFwiY3VycmVudFwiKSB7XG4gICAgICBjb25zdCBsZWF2ZXMgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0TGVhdmVzT2ZUeXBlKCdtYXJrZG93bicpO1xuICAgICAgY29uc3QgY3JlYXRlZExlYWYgPVxuICAgICAgICBsZWF2ZXMuZmluZChsID0+IChsLnZpZXcgYXMgYW55KT8uZmlsZSA9PT0gY3JlYXRlZClcbiAgICAgICAgPz8gbGVhdmVzLmZpbmQobCA9PiAobC52aWV3IGFzIGFueSk/LmZpbGU/LnBhdGggPT09IGNyZWF0ZWQucGF0aClcbiAgICAgICAgPz8gbnVsbDtcblxuICAgICAgaWYgKGNyZWF0ZWRMZWFmKSB7XG4gICAgICAgIGNyZWF0ZWRMZWFmLmRldGFjaCgpO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBvcmlnaW5MZWFmID1cbiAgICAgICAgbGVhdmVzLmZpbmQobCA9PiAobC52aWV3IGFzIGFueSk/LmZpbGU/LnBhdGggPT09IHNyY1BhdGgpXG4gICAgICAgID8/IG9yaWdpblZpZXc/LmxlYWZcbiAgICAgICAgPz8gdGhpcy5hcHAud29ya3NwYWNlLmdldEFjdGl2ZVZpZXdPZlR5cGUoTWFya2Rvd25WaWV3KT8ubGVhZjtcblxuICAgICAgaWYgKG9yaWdpbkxlYWYpIHtcbiAgICAgICAgdGhpcy5hcHAud29ya3NwYWNlLnNldEFjdGl2ZUxlYWYob3JpZ2luTGVhZiwgeyBmb2N1czogdHJ1ZSB9KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBhd2FpdCBuZXcgUHJvbWlzZShyID0+IHNldFRpbWVvdXQociwgMTUwKSk7IC8vIGxldCB0ZW1wbGF0ZSBmaW5pc2ggd3JpdGluZ1xuICAgIHRyeSB7XG4gICAgICBpZiAoIW5ld05vdGVGaWxlIHx8ICEoYXdhaXQgdGhpcy5hcHAudmF1bHQuYWRhcHRlci5leGlzdHMobmV3Tm90ZUZpbGUucGF0aCkpKSByZXR1cm47XG4gICAgICBjb25zdCB0eHQgPSBhd2FpdCB0aGlzLmFwcC52YXVsdC5hZGFwdGVyLnJlYWQobmV3Tm90ZUZpbGUucGF0aCk7XG4gICAgICBpZiAoIXR4dCB8fCAhdHh0LnRyaW0oKSkgcmV0dXJuO1xuICAgIH0gY2F0Y2ggeyByZXR1cm47IH1cblxuICAgIGNvbnN0IGFscmVhZHlMaW5rZWQgPSAvXlxccypcXFtcXFtbXFxzXFxTXSpcXF1cXF1cXHMqJC8udGVzdChyYXdTZWwpO1xuICAgIGxldCB3cmFwcGVkID0gcmF3U2VsO1xuICAgIGlmICghYWxyZWFkeUxpbmtlZCkge1xuICAgICAgY29uc3QgbSA9IHJhd1NlbC5tYXRjaCgvXihcXHMqKShbXFxzXFxTXSo/KShcXHMqKSQvKSBhcyBSZWdFeHBNYXRjaEFycmF5O1xuICAgICAgY29uc3QgbGVhZGluZyA9IG0/LlsxXSA/PyAnJztcbiAgICAgIGNvbnN0IGNvcmUgPSAobT8uWzJdID8/ICcnKS50cmltKCk7XG4gICAgICBjb25zdCB0cmFpbGluZyA9IG0/LlszXSA/PyAnJztcbiAgICAgIHdyYXBwZWQgPSBjb3JlLmxlbmd0aCA/IGAke2xlYWRpbmd9W1ske2NvcmV9XV0ke3RyYWlsaW5nfWAgOiByYXdTZWw7XG4gICAgfVxuXG4gICAgY29uc3QgdGYgPSB0aGlzLmFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoc3JjUGF0aCkgYXMgVEZpbGUgfCBudWxsO1xuICAgIGlmICghdGYpIHJldHVybjtcbiAgICBjb25zdCBjdXIgPSBhd2FpdCB0aGlzLmFwcC52YXVsdC5yZWFkKHRmKTtcblxuICAgIC8vIFRyeSBvZmZzZXQtYmFzZWQgcmVwbGFjZW1lbnQgZmlyc3QgKG9ubHkgaWYgdGhlIHNsaWNlIHN0aWxsIG1hdGNoZXMpXG4gICAgbGV0IHVwZGF0ZWQ6IHN0cmluZyB8IG51bGwgPSBudWxsO1xuICAgIGlmIChiYXNlVGV4dCAmJiBmcm9tICYmIHRvKSB7XG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCBzdGFydE9mZiA9IHBvc1RvT2Zmc2V0KGJhc2VUZXh0LCBmcm9tKTtcbiAgICAgICAgY29uc3QgZW5kT2ZmID0gcG9zVG9PZmZzZXQoYmFzZVRleHQsIHRvKTtcbiAgICAgICAgaWYgKGVuZE9mZiA+PSBzdGFydE9mZikge1xuICAgICAgICAgIGNvbnN0IHNsaWNlID0gY3VyLnNsaWNlKHN0YXJ0T2ZmLCBlbmRPZmYpO1xuICAgICAgICAgIGlmIChzbGljZSA9PT0gcmF3U2VsKSB7XG4gICAgICAgICAgICB1cGRhdGVkID0gY3VyLnNsaWNlKDAsIHN0YXJ0T2ZmKSArIHdyYXBwZWQgKyBjdXIuc2xpY2UoZW5kT2ZmKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0gY2F0Y2ggeyAvKiBpZ25vcmUgKi8gfVxuICAgIH1cblxuICAgIC8vIEZhbGxiYWNrOiBmaXJzdCBleGFjdCBvY2N1cnJlbmNlXG4gICAgaWYgKHVwZGF0ZWQgPT0gbnVsbCkge1xuICAgICAgY29uc3QgaWR4ID0gY3VyLmluZGV4T2YocmF3U2VsKTtcbiAgICAgIGlmIChpZHggPj0gMCkgdXBkYXRlZCA9IGN1ci5zbGljZSgwLCBpZHgpICsgd3JhcHBlZCArIGN1ci5zbGljZShpZHggKyByYXdTZWwubGVuZ3RoKTtcbiAgICB9XG5cbiAgICBpZiAodXBkYXRlZCAhPSBudWxsICYmIHVwZGF0ZWQgIT09IGN1cikge1xuICAgICAgYXdhaXQgdGhpcy5hcHAudmF1bHQubW9kaWZ5KHRmLCB1cGRhdGVkKTtcbiAgICB9XG4gIH1cblxuXG5cbiAgcHJpdmF0ZSBwZW5kaW5nU2VlZDogc3RyaW5nIHwgbnVsbCA9IG51bGw7XG4gIHByaXZhdGUgdGFrZVBlbmRpbmdTZWVkKCk6IHN0cmluZyB8IG51bGwge1xuICAgIGNvbnN0IHMgPSB0aGlzLnBlbmRpbmdTZWVkO1xuICAgIHRoaXMucGVuZGluZ1NlZWQgPSBudWxsO1xuICAgIHJldHVybiBzO1xuICB9XG5cblxuICBwcml2YXRlIGFzeW5jIG9wZW5TaWRlYmFyKHZpZXdUeXBlOiBzdHJpbmcsIHNpZGU6ICdsZWZ0JyB8ICdyaWdodCcpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBjb25zdCB3cyA9IHRoaXMuYXBwLndvcmtzcGFjZTtcbiAgICBjb25zdCBleGlzdGluZyA9IHdzLmdldExlYXZlc09mVHlwZSh2aWV3VHlwZSlbMF07XG4gICAgaWYgKGV4aXN0aW5nKSB7XG4gICAgICBhd2FpdCBleGlzdGluZy5zZXRWaWV3U3RhdGUoeyB0eXBlOiB2aWV3VHlwZSwgYWN0aXZlOiB0cnVlIH0pO1xuICAgICAgd3MucmV2ZWFsTGVhZihleGlzdGluZyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IGxlYWYgPSBzaWRlID09PSAnbGVmdCcgPyB3cy5nZXRMZWZ0TGVhZihmYWxzZSkgPz8gd3MuZ2V0TGVmdExlYWYodHJ1ZSlcbiAgICAgIDogd3MuZ2V0UmlnaHRMZWFmKGZhbHNlKSA/PyB3cy5nZXRSaWdodExlYWYodHJ1ZSk7XG4gICAgaWYgKCFsZWFmKSB7XG4gICAgICBuZXcgTm90aWNlKGBcdTI3NEMgQ291bGQgbm90IG9wZW4gJHt2aWV3VHlwZX0gc2lkZWJhcmApO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBhd2FpdCBsZWFmLnNldFZpZXdTdGF0ZSh7IHR5cGU6IHZpZXdUeXBlLCBhY3RpdmU6IHRydWUgfSk7XG4gICAgd3MucmV2ZWFsTGVhZihsZWFmKTtcbiAgfVxuXG5cblxuICAvLyBcdTI1MDBcdTI1MDBcdTI1MDAgQkFDS1VQICYgVU5ETyBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcblxuICBhc3luYyBiYWNrdXBGaWxlKGZpbGVQYXRoOiBzdHJpbmcsIGNvbnRlbnQ6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xuICAgIHRoaXMuc2V0dGluZ3MuYmFja3VwRmlsZXMgPSB0aGlzLnNldHRpbmdzLmJhY2t1cEZpbGVzIHx8IHt9O1xuICAgIHRoaXMuc2V0dGluZ3MuYmFja3VwRmlsZXNbZmlsZVBhdGhdID0gY29udGVudDtcbiAgICBhd2FpdCB0aGlzLnNhdmVTZXR0aW5ncygpO1xuICB9XG5cbiAgYXN5bmMgdW5kb0ZvcmNlVXBkYXRlKCk6IFByb21pc2U8dm9pZD4ge1xuICAgIGlmICghdGhpcy5zZXR0aW5ncy5iYWNrdXBGaWxlcyB8fCBPYmplY3Qua2V5cyh0aGlzLnNldHRpbmdzLmJhY2t1cEZpbGVzKS5sZW5ndGggPT09IDApIHtcbiAgICAgIG5ldyBOb3RpY2UoJ05vIGJhY2t1cHMgYXZhaWxhYmxlIHRvIHJlc3RvcmUuJyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGZvciAoY29uc3QgW2ZpbGVQYXRoLCBiYWNrdXBDb250ZW50XSBvZiBPYmplY3QuZW50cmllcyh0aGlzLnNldHRpbmdzLmJhY2t1cEZpbGVzKSkge1xuICAgICAgaWYgKGF3YWl0IHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXIuZXhpc3RzKGZpbGVQYXRoKSkge1xuICAgICAgICBhd2FpdCB0aGlzLmFwcC52YXVsdC5hZGFwdGVyLndyaXRlKGZpbGVQYXRoLCBiYWNrdXBDb250ZW50KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGF3YWl0IHRoaXMuYXBwLnZhdWx0LmNyZWF0ZShmaWxlUGF0aCwgYmFja3VwQ29udGVudCk7XG4gICAgICB9XG4gICAgfVxuICAgIG5ldyBOb3RpY2UoJ1x1MjcwNSBGb3JjZSB1cGRhdGUgdW5kb25lLicpO1xuICAgIHRoaXMuc2V0dGluZ3MuYmFja3VwRmlsZXMgPSB7fTtcbiAgICBhd2FpdCB0aGlzLnNhdmVTZXR0aW5ncygpO1xuICB9XG5cbiAgLy8gXHUyNTAwXHUyNTAwXHUyNTAwIEZPTERFUiBTWU5DIFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFxuXG4gIGFzeW5jIHN5bmNNaXNzaW5nRm9sZGVycygpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBpZiAodGhpcy5tYW5pZmVzdENhY2hlICYmIHRoaXMubWFuaWZlc3RDYWNoZS5mb2xkZXJzKSB7XG4gICAgICBmb3IgKGNvbnN0IGZvbGRlckVudHJ5IG9mIHRoaXMubWFuaWZlc3RDYWNoZS5mb2xkZXJzKSB7XG4gICAgICAgIGNvbnN0IGZvbGRlclBhdGggPSBmb2xkZXJFbnRyeS5wYXRoO1xuICAgICAgICBpZiAoIShhd2FpdCB0aGlzLmFwcC52YXVsdC5hZGFwdGVyLmV4aXN0cyhmb2xkZXJQYXRoKSkpIHtcbiAgICAgICAgICBhd2FpdCB0aGlzLmFwcC52YXVsdC5jcmVhdGVGb2xkZXIoZm9sZGVyUGF0aCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvLyBcdTI1MDBcdTI1MDBcdTI1MDAgRk9SQ0UtVVBEQVRFIFBSRVZJRVcgXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXG5cbiAgYXN5bmMgYnVpbGRGb3JjZVVwZGF0ZVByZXZpZXcoKTogUHJvbWlzZTxQcmV2aWV3SXRlbVtdPiB7XG4gICAgY29uc3QgcHJldmlld0xpc3Q6IFByZXZpZXdJdGVtW10gPSBbXTtcblxuICAgIC8vIDApIENvbGxlY3QgYWxsIGJsYWNrbGlzdGVkIGZvbGRlcnMgKG1hbmlmZXN0S2V5IHZhbHVlcyB3aGVyZSBkb1VwZGF0ZSA9PT0gZmFsc2UpXG4gICAgY29uc3QgZGVueUxpc3RlZEZvbGRlcnMgPSB0aGlzLnNldHRpbmdzLmN1c3RvbVBhdGhzXG4gICAgICAuZmlsdGVyKChjKSA9PiBjLmRvVXBkYXRlID09PSBmYWxzZSlcbiAgICAgIC5tYXAoKGMpID0+IGMubWFuaWZlc3RLZXkpO1xuXG4gICAgLy8gMSkgRGVueS1saXN0ZWQgZmlsZXMgZmlyc3RcdTIwMTRidXQgb25seSBpZiB0aGV5IHdvdWxkIGFjdHVhbGx5IGJlIFwibmV3XCIgb3IgXCJvdXQgb2YgZGF0ZVwiXG4gICAgZm9yIChjb25zdCBlbnRyeSBvZiB0aGlzLm1hbmlmZXN0Q2FjaGUuZmlsZXMpIHtcbiAgICAgIC8vIFx1MjUwMFx1MjUwMCBTS0lQIGFueSBvcHRpb25hbDp0cnVlIGZpbGVcbiAgICAgIGlmIChlbnRyeS5vcHRpb25hbCkge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgY29uc3QgY3VzdG9tID0gdGhpcy5zZXR0aW5ncy5jdXN0b21QYXRocy5maW5kKChjKSA9PiBjLm1hbmlmZXN0S2V5ID09PSBlbnRyeS5rZXkpO1xuICAgICAgY29uc3QgaXNJbkRlbnlGb2xkZXIgPSBkZW55TGlzdGVkRm9sZGVycy5zb21lKChmb2xkZXIpID0+XG4gICAgICAgIGVudHJ5LnBhdGguc3RhcnRzV2l0aChmb2xkZXIgKyAnLycpXG4gICAgICApO1xuICAgICAgaWYgKGN1c3RvbT8uZG9VcGRhdGUgPT09IGZhbHNlIHx8IGlzSW5EZW55Rm9sZGVyKSB7XG4gICAgICAgIC8vIFJlc29sdmUgdmF1bHQgcGF0aCAoYWNjb3VudGluZyBmb3IgYW55IHJlbWFwcGluZylcbiAgICAgICAgY29uc3QgdnAgPSBjdXN0b20/LnZhdWx0UGF0aCA/PyB0aGlzLnJlc29sdmVWYXVsdFBhdGgoZW50cnkucGF0aCk7XG5cbiAgICAgICAgLy8gQ2hlY2s6IGRvZXMgdGhlIGZpbGUgZXhpc3QgbG9jYWxseT8gQW5kIGlzIGl0IHVwLXRvLWRhdGU/XG4gICAgICAgIGNvbnN0IGV4aXN0cyA9IGF3YWl0IHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXIuZXhpc3RzKHZwKTtcbiAgICAgICAgY29uc3QgdXBUb0RhdGUgPSBleGlzdHMgJiYgKGF3YWl0IHRoaXMuZmlsZUNhY2hlTWFuYWdlci5pc1VwVG9EYXRlKHZwKSk7XG5cbiAgICAgICAgLy8gT25seSBzaG93IGFzIGRlbnktbGlzdGVkIGlmIGl0IHdvdWxkIGhhdmUgYmVlbiBcdTIwMUNuZXdcdTIwMUQgKG1pc3NpbmcpIG9yIFx1MjAxQ291dC1vZi1kYXRlXHUyMDFEXG4gICAgICAgIGlmICghZXhpc3RzIHx8ICF1cFRvRGF0ZSkge1xuICAgICAgICAgIHByZXZpZXdMaXN0LnB1c2goe1xuICAgICAgICAgICAgZmlsZVBhdGg6IHZwLFxuICAgICAgICAgICAgYWN0aW9uOiAnZGVueS1saXN0ZWQgXHUyMDEzIHdpbGwgbm90IHVwZGF0ZScsXG4gICAgICAgICAgICBzZWxlY3RlZDogZmFsc2UsXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyAyKSBGVUxMLVNZTkMgbW9kZSAoc2tpcCBhbnkgZmlsZS9mb2xkZXIgdGhhdCBpcyBibGFja2xpc3RlZClcbiAgICBpZiAoIXRoaXMuc2V0dGluZ3MuY3VzdG9taXplVXBkYXRlcykge1xuICAgICAgZm9yIChjb25zdCBmIG9mIHRoaXMubWFuaWZlc3RDYWNoZS5maWxlcykge1xuICAgICAgICAvLyBcdTI1MDBcdTI1MDAgU0tJUCBhbnkgb3B0aW9uYWw6dHJ1ZSBmaWxlXG4gICAgICAgIGlmIChmLm9wdGlvbmFsKSB7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBjdXN0b20gPSB0aGlzLnNldHRpbmdzLmN1c3RvbVBhdGhzLmZpbmQoKGMpID0+IGMubWFuaWZlc3RLZXkgPT09IGYua2V5KTtcbiAgICAgICAgY29uc3QgaXNJbkRlbnlGb2xkZXIgPSBkZW55TGlzdGVkRm9sZGVycy5zb21lKChmb2xkZXIpID0+XG4gICAgICAgICAgZi5wYXRoLnN0YXJ0c1dpdGgoZm9sZGVyICsgJy8nKVxuICAgICAgICApO1xuICAgICAgICBpZiAoY3VzdG9tPy5kb1VwZGF0ZSA9PT0gZmFsc2UgfHwgaXNJbkRlbnlGb2xkZXIpIHtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHZwID0gdGhpcy5yZXNvbHZlVmF1bHRQYXRoKGYucGF0aCk7XG4gICAgICAgIGxldCB0YWcgPSAnJztcbiAgICAgICAgaWYgKHZwICE9PSBmLnBhdGgpIHRhZyA9ICcgKHJlbWFwcGVkKSc7XG5cbiAgICAgICAgY29uc3QgZXhpc3RzID0gYXdhaXQgdGhpcy5hcHAudmF1bHQuYWRhcHRlci5leGlzdHModnApO1xuICAgICAgICBpZiAoIWV4aXN0cykge1xuICAgICAgICAgIHByZXZpZXdMaXN0LnB1c2goe1xuICAgICAgICAgICAgZmlsZVBhdGg6IHZwLFxuICAgICAgICAgICAgYWN0aW9uOiBgbmV3IGZpbGUke3RhZ31gLFxuICAgICAgICAgICAgc2VsZWN0ZWQ6IHRydWUsXG4gICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSBpZiAoIShhd2FpdCB0aGlzLmZpbGVDYWNoZU1hbmFnZXIuaXNVcFRvRGF0ZSh2cCkpKSB7XG4gICAgICAgICAgcHJldmlld0xpc3QucHVzaCh7XG4gICAgICAgICAgICBmaWxlUGF0aDogdnAsXG4gICAgICAgICAgICBhY3Rpb246IGB3aWxsIGJlIG92ZXJ3cml0dGVuJHt0YWd9YCxcbiAgICAgICAgICAgIHNlbGVjdGVkOiB0cnVlLFxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGZvciAoY29uc3QgZmxkIG9mIHRoaXMubWFuaWZlc3RDYWNoZS5mb2xkZXJzKSB7XG4gICAgICAgIC8vIFx1MjUwMFx1MjUwMCBTS0lQIGFueSBvcHRpb25hbDp0cnVlIGZvbGRlclxuICAgICAgICBpZiAoZmxkLm9wdGlvbmFsKSB7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBpc0RlbnlGb2xkZXIgPSBkZW55TGlzdGVkRm9sZGVycy5pbmNsdWRlcyhmbGQucGF0aCk7XG4gICAgICAgIGlmICghKGF3YWl0IHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXIuZXhpc3RzKGZsZC5wYXRoKSkgJiYgIWlzRGVueUZvbGRlcikge1xuICAgICAgICAgIHByZXZpZXdMaXN0LnB1c2goe1xuICAgICAgICAgICAgZmlsZVBhdGg6IGZsZC5wYXRoLFxuICAgICAgICAgICAgYWN0aW9uOiAnbWlzc2luZyBmb2xkZXIgKHdpbGwgYmUgY3JlYXRlZCknLFxuICAgICAgICAgICAgc2VsZWN0ZWQ6IHRydWUsXG4gICAgICAgICAgICBpc0ZvbGRlcjogdHJ1ZSxcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gcHJldmlld0xpc3Q7XG4gICAgfVxuXG4gICAgLy8gMykgQ1VTVE9NLVNZTkMgbW9kZSAoc2tpcCBhbnkgZmlsZS9mb2xkZXIgdGhhdCBpcyBibGFja2xpc3RlZClcbiAgICBmb3IgKGNvbnN0IGVudHJ5IG9mIHRoaXMubWFuaWZlc3RDYWNoZS5maWxlcykge1xuICAgICAgLy8gXHUyNTAwXHUyNTAwIFNLSVAgYW55IG9wdGlvbmFsOnRydWUgZmlsZVxuICAgICAgaWYgKGVudHJ5Lm9wdGlvbmFsKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBjdXN0b20gPSB0aGlzLnNldHRpbmdzLmN1c3RvbVBhdGhzLmZpbmQoKGMpID0+IGMubWFuaWZlc3RLZXkgPT09IGVudHJ5LmtleSk7XG4gICAgICBjb25zdCBpc0luRGVueUZvbGRlciA9IGRlbnlMaXN0ZWRGb2xkZXJzLnNvbWUoKGZvbGRlcikgPT5cbiAgICAgICAgZW50cnkucGF0aC5zdGFydHNXaXRoKGZvbGRlciArICcvJylcbiAgICAgICk7XG4gICAgICBpZiAoY3VzdG9tPy5kb1VwZGF0ZSA9PT0gZmFsc2UgfHwgaXNJbkRlbnlGb2xkZXIpIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHZhdWx0UGF0aCA9IGN1c3RvbT8udmF1bHRQYXRoID8/IHRoaXMucmVzb2x2ZVZhdWx0UGF0aChlbnRyeS5wYXRoKTtcbiAgICAgIGNvbnN0IGV4aXN0cyA9IGF3YWl0IHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXIuZXhpc3RzKHZhdWx0UGF0aCk7XG4gICAgICBjb25zdCB1cFRvRGF0ZSA9IGV4aXN0cyAmJiAoYXdhaXQgdGhpcy5maWxlQ2FjaGVNYW5hZ2VyLmlzVXBUb0RhdGUodmF1bHRQYXRoKSk7XG5cbiAgICAgIGxldCB0YWcgPSAnJztcbiAgICAgIGlmICh2YXVsdFBhdGggIT09IGVudHJ5LnBhdGgpIHRhZyA9ICcgKHJlbWFwcGVkKSc7XG5cbiAgICAgIGlmICghZXhpc3RzKSB7XG4gICAgICAgIHByZXZpZXdMaXN0LnB1c2goe1xuICAgICAgICAgIGZpbGVQYXRoOiB2YXVsdFBhdGgsXG4gICAgICAgICAgYWN0aW9uOiBgbmV3IGZpbGUke3RhZ31gLFxuICAgICAgICAgIHNlbGVjdGVkOiB0cnVlLFxuICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSBpZiAoIXVwVG9EYXRlKSB7XG4gICAgICAgIHByZXZpZXdMaXN0LnB1c2goe1xuICAgICAgICAgIGZpbGVQYXRoOiB2YXVsdFBhdGgsXG4gICAgICAgICAgYWN0aW9uOiBgd2lsbCBiZSBvdmVyd3JpdHRlbiR7dGFnfWAsXG4gICAgICAgICAgc2VsZWN0ZWQ6IHRydWUsXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cblxuICAgIGZvciAoY29uc3QgZW50cnkgb2YgdGhpcy5tYW5pZmVzdENhY2hlLmZvbGRlcnMpIHtcbiAgICAgIC8vIFx1MjUwMFx1MjUwMCBTS0lQIGFueSBvcHRpb25hbDp0cnVlIGZvbGRlclxuICAgICAgaWYgKGVudHJ5Lm9wdGlvbmFsKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBpc0RlbnlGb2xkZXIgPSBkZW55TGlzdGVkRm9sZGVycy5pbmNsdWRlcyhlbnRyeS5wYXRoKTtcbiAgICAgIGlmICghKGF3YWl0IHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXIuZXhpc3RzKGVudHJ5LnBhdGgpKSAmJiAhaXNEZW55Rm9sZGVyKSB7XG4gICAgICAgIHByZXZpZXdMaXN0LnB1c2goe1xuICAgICAgICAgIGZpbGVQYXRoOiBlbnRyeS5wYXRoLFxuICAgICAgICAgIGFjdGlvbjogJ21pc3NpbmcgZm9sZGVyICh3aWxsIGJlIGNyZWF0ZWQpJyxcbiAgICAgICAgICBzZWxlY3RlZDogdHJ1ZSxcbiAgICAgICAgICBpc0ZvbGRlcjogdHJ1ZSxcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gM2MpIFx1MjAxQ01vdmVkXHUyMDFEIGRldGVjdGlvbiAoc2tpcCBibGFja2xpc3RlZClcbiAgICBmb3IgKGNvbnN0IGYgb2YgdGhpcy5tYW5pZmVzdENhY2hlLmZpbGVzKSB7XG4gICAgICAvLyBcdTI1MDBcdTI1MDAgU0tJUCBhbnkgb3B0aW9uYWw6dHJ1ZSBmaWxlXG4gICAgICBpZiAoZi5vcHRpb25hbCkge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgY29uc3QgbWFuaWZlc3RLZXkgPSBmLmtleTtcbiAgICAgIGNvbnN0IG1hbmlmZXN0UGF0aCA9IGYucGF0aDtcbiAgICAgIGNvbnN0IGN1c3RvbSA9IHRoaXMuc2V0dGluZ3MuY3VzdG9tUGF0aHMuZmluZCgoYykgPT4gYy5tYW5pZmVzdEtleSA9PT0gbWFuaWZlc3RLZXkpO1xuICAgICAgY29uc3QgcHJldlBhdGggPSB0aGlzLm9sZFBhdGhzQnlHaXRodWJbbWFuaWZlc3RQYXRoXTtcblxuICAgICAgY29uc3QgaXNJbkRlbnlGb2xkZXIgPSBkZW55TGlzdGVkRm9sZGVycy5zb21lKChmb2xkZXIpID0+XG4gICAgICAgIG1hbmlmZXN0UGF0aC5zdGFydHNXaXRoKGZvbGRlciArICcvJylcbiAgICAgICk7XG4gICAgICBpZiAoY3VzdG9tPy5kb1VwZGF0ZSA9PT0gZmFsc2UgfHwgaXNJbkRlbnlGb2xkZXIpIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgICBpZiAoY3VzdG9tICYmIGN1c3RvbS52YXVsdFBhdGggJiYgY3VzdG9tLnZhdWx0UGF0aCAhPT0gbWFuaWZlc3RQYXRoKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuICAgICAgaWYgKFxuICAgICAgICBwcmV2UGF0aCAmJlxuICAgICAgICBwcmV2UGF0aCAhPT0gbWFuaWZlc3RQYXRoICYmXG4gICAgICAgICghY3VzdG9tIHx8IGN1c3RvbS52YXVsdFBhdGggPT09IG1hbmlmZXN0UGF0aClcbiAgICAgICkge1xuICAgICAgICBwcmV2aWV3TGlzdC5wdXNoKHtcbiAgICAgICAgICBmaWxlUGF0aDogcHJldlBhdGgsXG4gICAgICAgICAgYWN0aW9uOiBgbW92ZWQgXHUyMTkyICR7bWFuaWZlc3RQYXRofWAsXG4gICAgICAgICAgc2VsZWN0ZWQ6IHRydWUsXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBwcmV2aWV3TGlzdDtcbiAgfVxuXG5cblxuXG4gIGFzeW5jIGZvcmNlVXBkYXRlUHJldmlld0FuZENvbmZpcm0oKSB7XG4gICAgLy8gMSkgQnVpbGQgdGhlIGZsYXQgbGlzdCBvZiBQcmV2aWV3SXRlbSBvYmplY3RzXG4gICAgY29uc3QgcHJldmlld0xpc3QgPSBhd2FpdCB0aGlzLmJ1aWxkRm9yY2VVcGRhdGVQcmV2aWV3KCk7XG5cbiAgICAvLyAyKSBTcGxpdCB0aGUgaXRlbXMgaW50byBcdTIwMUNkZW55LWxpc3RlZFx1MjAxRCB2cy4gXHUyMDFDbm9ybWFsXHUyMDFEIGl0ZW1zXG4gICAgLy8gICAgKGJ1aWxkRm9yY2VVcGRhdGVQcmV2aWV3IHVzZXMgYWN0aW9uID0gJ2RlbnktbGlzdGVkIFx1MjAxMyB3aWxsIG5vdCB1cGRhdGUnKVxuICAgIGNvbnN0IGRlbnlJdGVtczogUHJldmlld0l0ZW1bXSA9IFtdO1xuICAgIGNvbnN0IG5vcm1hbEl0ZW1zOiBQcmV2aWV3SXRlbVtdID0gW107XG4gICAgZm9yIChjb25zdCBpdGVtIG9mIHByZXZpZXdMaXN0KSB7XG4gICAgICBpZiAoaXRlbS5hY3Rpb24uc3RhcnRzV2l0aCgnZGVueS1saXN0ZWQnKSkge1xuICAgICAgICBkZW55SXRlbXMucHVzaChpdGVtKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG5vcm1hbEl0ZW1zLnB1c2goaXRlbSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gMykgQ3JlYXRlIGFuZCBvcGVuIHRoZSBtb2RhbCB3aXRoIGJvdGggbGlzdHNcbiAgICBjb25zdCBtb2RhbCA9IG5ldyAoY2xhc3MgZXh0ZW5kcyBNb2RhbCB7XG4gICAgICBwbHVnaW46IFZWdW5kZXJsb3JlVG9vbGtpdFBsdWdpbjtcbiAgICAgIG5vcm1hbDogUHJldmlld0l0ZW1bXTtcbiAgICAgIGRlbmllZDogUHJldmlld0l0ZW1bXTtcblxuICAgICAgY29uc3RydWN0b3IoYXBwOiBBcHAsIG5vcm1hbDogUHJldmlld0l0ZW1bXSwgZGVuaWVkOiBQcmV2aWV3SXRlbVtdKSB7XG4gICAgICAgIHN1cGVyKGFwcCk7XG4gICAgICAgIHRoaXMubm9ybWFsID0gbm9ybWFsO1xuICAgICAgICB0aGlzLmRlbmllZCA9IGRlbmllZDtcbiAgICAgIH1cblxuICAgICAgb25PcGVuKCkge1xuICAgICAgICAvLyBQcmV2ZW50IGNsaWNrcyBmcm9tIGNsb3NpbmcgYW55dGhpbmcgYmVoaW5kXG4gICAgICAgIHRoaXMuY29udGVudEVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IGUuc3RvcFByb3BhZ2F0aW9uKCkpO1xuICAgICAgICB0aGlzLmNvbnRlbnRFbC5lbXB0eSgpO1xuICAgICAgICB0aGlzLnRpdGxlRWwuc2V0VGV4dCgnRm9yY2UgVXBkYXRlIFByZXZpZXcnKTtcblxuICAgICAgICAvLyBJbnRybyBwYXJhZ3JhcGhcbiAgICAgICAgdGhpcy5jb250ZW50RWwuY3JlYXRlRWwoJ3AnLCB7XG4gICAgICAgICAgdGV4dDpcbiAgICAgICAgICAgICdUaGUgZm9sbG93aW5nIGl0ZW1zIHdpbGwgYmUgdXBkYXRlZC4gVW5jaGVjayBhbnkgaXRlbXMgeW91IGRvIE5PVCB3YW50IHRvIGNoYW5nZSwgdGhlbiBjbGljayBcIkNvbmZpcm0gYW5kIFVwZGF0ZVwiLicsXG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIDQpIFJlbmRlciBcdTIwMUNub3JtYWxcdTIwMUQgKG5vbi1kZW55KSBpdGVtcyB3aXRoIGNoZWNrYm94ZXNcbiAgICAgICAgaWYgKHRoaXMubm9ybWFsLmxlbmd0aCkge1xuICAgICAgICAgIGNvbnN0IG5vcm1hbENvbnRhaW5lciA9IHRoaXMuY29udGVudEVsLmNyZWF0ZUVsKCdkaXYnKTtcbiAgICAgICAgICBPYmplY3QuYXNzaWduKG5vcm1hbENvbnRhaW5lci5zdHlsZSwge1xuICAgICAgICAgICAgbWF4SGVpZ2h0OiAnMzAwcHgnLFxuICAgICAgICAgICAgb3ZlcmZsb3dZOiAnYXV0bycsXG4gICAgICAgICAgICBtYXJnaW5Ub3A6ICcxZW0nLFxuICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgdGhpcy5ub3JtYWwuZm9yRWFjaCgoaXRlbSkgPT4ge1xuICAgICAgICAgICAgY29uc3Qgcm93ID0gbm9ybWFsQ29udGFpbmVyLmNyZWF0ZURpdigpO1xuICAgICAgICAgICAgT2JqZWN0LmFzc2lnbihyb3cuc3R5bGUsIHtcbiAgICAgICAgICAgICAgZGlzcGxheTogJ2ZsZXgnLFxuICAgICAgICAgICAgICBhbGlnbkl0ZW1zOiAnZmxleC1zdGFydCcsXG4gICAgICAgICAgICAgIGp1c3RpZnlDb250ZW50OiAnc3BhY2UtYmV0d2VlbicsXG4gICAgICAgICAgICAgIHBhZGRpbmc6ICc2cHggMCcsXG4gICAgICAgICAgICAgIGZvbnRGYW1pbHk6ICdtb25vc3BhY2UnLFxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIC8vIExlZnQ6IGZpbGUgcGF0aCArIGFjdGlvbiBub3RlXG4gICAgICAgICAgICBjb25zdCBsYWJlbCA9IHJvdy5jcmVhdGVEaXYoKTtcbiAgICAgICAgICAgIGxhYmVsLmFkZENsYXNzKFwiZm9yY2V1cGRhdGUtZmxleGNvbHVtblwiKTtcblxuICAgICAgICAgICAgY29uc3QgbGFiZWxXcmFwcGVyID0gbGFiZWwuY3JlYXRlRGl2KCk7XG4gICAgICAgICAgICBsYWJlbFdyYXBwZXIudGV4dENvbnRlbnQgPSBpdGVtLmZpbGVQYXRoO1xuXG4gICAgICAgICAgICBjb25zdCBub3RlID0gbGFiZWwuY3JlYXRlRGl2KHsgdGV4dDogaXRlbS5hY3Rpb24gfSk7XG4gICAgICAgICAgICBub3RlLmFkZENsYXNzKFwiZm9yY2V1cGRhdGUtbm90ZVwiKTtcblxuICAgICAgICAgICAgLy8gUmlnaHQ6IGNoZWNrYm94XG4gICAgICAgICAgICBjb25zdCBjaGVja2JveCA9IHJvdy5jcmVhdGVFbCgnaW5wdXQnLCB7IHR5cGU6ICdjaGVja2JveCcgfSk7XG4gICAgICAgICAgICBjaGVja2JveC5jaGVja2VkID0gaXRlbS5zZWxlY3RlZDtcbiAgICAgICAgICAgIGNoZWNrYm94Lm9uY2hhbmdlID0gKCkgPT4ge1xuICAgICAgICAgICAgICBpdGVtLnNlbGVjdGVkID0gY2hlY2tib3guY2hlY2tlZDtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY29uc3Qgbm9DYW5kaWRhdGVzID0gdGhpcy5jb250ZW50RWwuY3JlYXRlRWwoJ2RpdicpO1xuICAgICAgICAgIE9iamVjdC5hc3NpZ24obm9DYW5kaWRhdGVzLnN0eWxlLCB7XG4gICAgICAgICAgICBkaXNwbGF5OiAnaW5saW5lLWJsb2NrJyxcbiAgICAgICAgICAgIGZvbnRGYW1pbHk6ICdtb25vc3BhY2UnLFxuICAgICAgICAgICAgZm9udFN0eWxlOiAnaXRhbGljJyxcbiAgICAgICAgICAgIG1hcmdpblRvcDogJzAuNWVtJyxcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBub0NhbmRpZGF0ZXMudGV4dENvbnRlbnQgPSAnTm8gZm9yY2UtdXBkYXRlIGNhbmRpZGF0ZXMuJztcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIDUpIFJlbmRlciBcdTIwMUNkZW55LWxpc3RlZFx1MjAxRCBpdGVtcyBpbnNpZGUgYSBjb2xsYXBzZWQgPGRldGFpbHM+XG4gICAgICAgIGlmICh0aGlzLmRlbmllZC5sZW5ndGgpIHtcbiAgICAgICAgICBjb25zdCBkZW55RGV0YWlscyA9IHRoaXMuY29udGVudEVsLmNyZWF0ZUVsKCdkZXRhaWxzJywgeyBjbHM6ICd2ay1zZWN0aW9uJyB9KTtcbiAgICAgICAgICBkZW55RGV0YWlscy5vcGVuID0gZmFsc2U7XG5cbiAgICAgICAgICBjb25zdCBzdW1tYXJ5ID0gZGVueURldGFpbHMuY3JlYXRlRWwoJ3N1bW1hcnknLCB7IGNsczogJ3ZrLXNlY3Rpb24taGVhZGVyJyB9KTtcbiAgICAgICAgICBPYmplY3QuYXNzaWduKHN1bW1hcnkuc3R5bGUsIHtcbiAgICAgICAgICAgIGN1cnNvcjogJ3BvaW50ZXInLFxuICAgICAgICAgICAgZGlzcGxheTogJ2ZsZXgnLFxuICAgICAgICAgICAgY29sb3I6ICd2YXIoLS10ZXh0LWZhaW50KScsXG4gICAgICAgICAgICBhbGlnbkl0ZW1zOiAnY2VudGVyJyxcbiAgICAgICAgICAgIGdhcDogJzAuNWVtJyxcbiAgICAgICAgICAgIG1hcmdpblRvcDogJzFlbScsXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgc3VtbWFyeS5jcmVhdGVFbCgnc3BhbicsIHsgdGV4dDogYERlbnktTGlzdCBGaWxlcyAoJHt0aGlzLmRlbmllZC5sZW5ndGh9KWAgfSk7XG5cbiAgICAgICAgICAvLyBSb3RhdGluZyBcdTIwMUNWVlx1MjAxRCBpY29uIG9uIGV4cGFuZC9jb2xsYXBzZVxuICAgICAgICAgIGNvbnN0IHRvZ2dsZUljb24gPSBzdW1tYXJ5LmNyZWF0ZUVsKCdzcGFuJywgeyB0ZXh0OiAnVlYnLCBjbHM6ICd2ay10b2dnbGUtaWNvbicgfSk7XG4gICAgICAgICAgT2JqZWN0LmFzc2lnbih0b2dnbGVJY29uLnN0eWxlLCB7XG4gICAgICAgICAgICBmb250V2VpZ2h0OiAnYm9sZCcsXG4gICAgICAgICAgICBkaXNwbGF5OiAnaW5saW5lLWJsb2NrJyxcbiAgICAgICAgICAgIHRyYW5zaXRpb246ICd0cmFuc2Zvcm0gMC4ycyBlYXNlJyxcbiAgICAgICAgICAgIHRyYW5zZm9ybU9yaWdpbjogJzUwJSA1MCUnLFxuICAgICAgICAgICAgdXNlclNlbGVjdDogJ25vbmUnLFxuICAgICAgICAgICAgdHJhbnNmb3JtOiAncm90YXRlKDE4MGRlZyknLFxuICAgICAgICAgIH0pO1xuICAgICAgICAgIGRlbnlEZXRhaWxzLm9udG9nZ2xlID0gKCkgPT4ge1xuICAgICAgICAgICAgdG9nZ2xlSWNvbi50b2dnbGVDbGFzcyhcInZ2LXJvdGF0ZWRcIiwgIWRlbnlEZXRhaWxzLm9wZW4pO1xuICAgICAgICAgIH07XG5cbiAgICAgICAgICAvLyBCb2R5IG9mIDxkZXRhaWxzPiBcdTIwMTQgZWFjaCBkZW55LWxpc3RlZCBpdGVtIGlzIGZhaW50IGFuZCBkaXNhYmxlZFxuICAgICAgICAgIGNvbnN0IGRlbnlCb2R5ID0gZGVueURldGFpbHMuY3JlYXRlRGl2KHsgY2xzOiAndmstc2VjdGlvbi1ib2R5JyB9KTtcbiAgICAgICAgICBkZW55Qm9keS5hZGRDbGFzcyhcImRlbnlsaXN0XCIpO1xuXG4gICAgICAgICAgdGhpcy5kZW5pZWQuZm9yRWFjaCgoaXRlbSkgPT4ge1xuICAgICAgICAgICAgY29uc3Qgcm93ID0gZGVueUJvZHkuY3JlYXRlRGl2KCk7XG4gICAgICAgICAgICBPYmplY3QuYXNzaWduKHJvdy5zdHlsZSwge1xuICAgICAgICAgICAgICBkaXNwbGF5OiAnZmxleCcsXG4gICAgICAgICAgICAgIGFsaWduSXRlbXM6ICdmbGV4LXN0YXJ0JyxcbiAgICAgICAgICAgICAganVzdGlmeUNvbnRlbnQ6ICdzcGFjZS1iZXR3ZWVuJyxcbiAgICAgICAgICAgICAgcGFkZGluZzogJzZweCAwJyxcbiAgICAgICAgICAgICAgZm9udEZhbWlseTogJ21vbm9zcGFjZScsXG4gICAgICAgICAgICAgIGNvbG9yOiAndmFyKC0tdGV4dC1mYWludCknLFxuICAgICAgICAgICAgICBmb250U3R5bGU6ICdpdGFsaWMnLFxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGNvbnN0IGxhYmVsV3JhcHBlciA9IHJvdy5jcmVhdGVEaXYoKTtcbiAgICAgICAgICAgIGxhYmVsV3JhcHBlci50ZXh0Q29udGVudCA9IGl0ZW0uZmlsZVBhdGg7XG4gICAgICAgICAgICBsYWJlbFdyYXBwZXIuYWRkQ2xhc3MoXCJmb3JjZXVwZGF0ZS1sYWJlbHdyYXBwZXJcIik7XG5cbiAgICAgICAgICAgIGNvbnN0IG5vdGUgPSByb3cuY3JlYXRlRGl2KHsgdGV4dDogaXRlbS5hY3Rpb24gfSk7XG4gICAgICAgICAgICBub3RlLmFkZENsYXNzKFwiZm9yY2V1cGRhdGUtbm90ZS1iXCIpO1xuXG4gICAgICAgICAgICAvLyBEZW55LWxpc3RlZCBjaGVja2JveCBpcyBkaXNhYmxlZFxuICAgICAgICAgICAgY29uc3QgY2hlY2tib3ggPSByb3cuY3JlYXRlRWwoJ2lucHV0JywgeyB0eXBlOiAnY2hlY2tib3gnIH0pO1xuICAgICAgICAgICAgY2hlY2tib3guY2hlY2tlZCA9IGl0ZW0uc2VsZWN0ZWQ7XG4gICAgICAgICAgICBjaGVja2JveC5kaXNhYmxlZCA9IHRydWU7XG4gICAgICAgICAgICBjaGVja2JveC50aXRsZSA9ICdUaGlzIGl0ZW0gaXMgZGVueS1saXN0ZWQnO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMucGx1Z2luLnNldHRpbmdzLnJlcGFyc2VHYW1lc2V0cykge1xuICAgICAgICAgIHRoaXMuY29udGVudEVsXG4gICAgICAgICAgICAuY3JlYXRlRGl2KHsgY2xzOiAnbW9kLWF1eC10ZXh0JyB9KVxuICAgICAgICAgICAgLnNldFRleHQoJ1x1RDgzRFx1REQwNCBSZWZyZXNoaW5nIEdhbWVzZXQgRGF0YScpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gNikgQnV0dG9ucyBhdCB0aGUgYm90dG9tXG4gICAgICAgIGNvbnN0IGJ1dHRvblJvdyA9IHRoaXMuY29udGVudEVsLmNyZWF0ZUVsKCdkaXYnKTtcbiAgICAgICAgT2JqZWN0LmFzc2lnbihidXR0b25Sb3cuc3R5bGUsIHtcbiAgICAgICAgICBkaXNwbGF5OiAnZmxleCcsXG4gICAgICAgICAganVzdGlmeUNvbnRlbnQ6ICdmbGV4LWVuZCcsXG4gICAgICAgICAgZ2FwOiAnMC41ZW0nLFxuICAgICAgICAgIG1hcmdpblRvcDogJzEuNWVtJyxcbiAgICAgICAgfSk7XG5cbiAgICAgICAgY29uc3QgY2FuY2VsQnRuID0gYnV0dG9uUm93LmNyZWF0ZUVsKCdidXR0b24nLCB7IHRleHQ6ICdDYW5jZWwnIH0pO1xuICAgICAgICBjYW5jZWxCdG4ub25jbGljayA9ICgpID0+IHRoaXMuY2xvc2UoKTtcblxuICAgICAgICBjb25zdCBjb25maXJtQnRuID0gYnV0dG9uUm93LmNyZWF0ZUVsKCdidXR0b24nLCB7XG4gICAgICAgICAgdGV4dDogJ0NvbmZpcm0gJiBVcGRhdGUnLFxuICAgICAgICAgIGNsczogJ21vZC1jdGEnLFxuICAgICAgICB9KTtcbiAgICAgICAgY29uZmlybUJ0bi5vbmNsaWNrID0gYXN5bmMgKCkgPT4ge1xuICAgICAgICAgIGlmIChjb25maXJtQnRuLmRpc2FibGVkKSByZXR1cm47XG5cbiAgICAgICAgICBjb25zdCBjYW5jZWxCdG5FbCA9IGJ1dHRvblJvdy5xdWVyeVNlbGVjdG9yKCdidXR0b246bm90KC5tb2QtY3RhKScpIGFzIEhUTUxCdXR0b25FbGVtZW50IHwgbnVsbDtcblxuICAgICAgICAgIGNvbnN0IHByZXZEaXNhYmxlZENhbmNlbCA9IGNhbmNlbEJ0bkVsPy5kaXNhYmxlZCA/PyBmYWxzZTtcblxuICAgICAgICAgIGNvbmZpcm1CdG4uY2xhc3NMaXN0LmFkZCgnbW9kLWxvYWRpbmcnKTtcbiAgICAgICAgICBjb25maXJtQnRuLnNldEF0dHJpYnV0ZSgnYXJpYS1idXN5JywgJ3RydWUnKTtcbiAgICAgICAgICBjb25maXJtQnRuLmRpc2FibGVkID0gdHJ1ZTtcbiAgICAgICAgICBpZiAoY2FuY2VsQnRuRWwpIGNhbmNlbEJ0bkVsLmRpc2FibGVkID0gdHJ1ZTtcblxuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICBhd2FpdCAodGhpcyBhcyBhbnkpLnBsdWdpbi5wZXJmb3JtRm9yY2VVcGRhdGVXaXRoU2VsZWN0aW9uKHRoaXMubm9ybWFsKTtcblxuICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xuXG4gICAgICAgICAgICBjb25zdCBzdWNjZXNzID0gbmV3IE1vZGFsKHRoaXMuYXBwKTtcbiAgICAgICAgICAgIHN1Y2Nlc3Mub25PcGVuID0gKCkgPT4ge1xuICAgICAgICAgICAgICBzdWNjZXNzLmNvbnRlbnRFbC5lbXB0eSgpO1xuICAgICAgICAgICAgICBzdWNjZXNzLnRpdGxlRWwuc2V0VGV4dCgnXHUyNzA1IFRvb2xraXQgVXBkYXRlZCcpO1xuXG4gICAgICAgICAgICAgIGNvbnN0IG1zZyA9IHN1Y2Nlc3MuY29udGVudEVsLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ2luc3RhbGxzdWNjZXNzJyB9KTtcbiAgICAgICAgICAgICAgbGV0IHNlY29uZHMgPSAzO1xuXG4gICAgICAgICAgICAgIGNvbnN0IHJlbmRlciA9ICgpID0+IHtcbiAgICAgICAgICAgICAgICBtc2cuc2V0VGV4dChgUmVsb2FkaW5nIHZhdWx0IGluICR7c2Vjb25kc31cdTIwMjZgKTtcbiAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgcmVuZGVyKCk7XG5cbiAgICAgICAgICAgICAgY29uc3QgdGltZXIgPSB3aW5kb3cuc2V0SW50ZXJ2YWwoKCkgPT4ge1xuICAgICAgICAgICAgICAgIHNlY29uZHMgLT0gMTtcbiAgICAgICAgICAgICAgICBpZiAoc2Vjb25kcyA8PSAwKSB7XG4gICAgICAgICAgICAgICAgICB3aW5kb3cuY2xlYXJJbnRlcnZhbCh0aW1lcik7XG4gICAgICAgICAgICAgICAgICBzdWNjZXNzLmNsb3NlKCk7XG4gICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAodGhpcy5hcHAgYXMgYW55KS5jb21tYW5kcy5leGVjdXRlQ29tbWFuZEJ5SWQoJ2FwcDpyZWxvYWQnKTtcbiAgICAgICAgICAgICAgICAgIH0gY2F0Y2gge1xuICAgICAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24ucmVsb2FkKCk7XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJlbmRlcigpO1xuICAgICAgICAgICAgICB9LCAxMDAwKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBzdWNjZXNzLm9wZW4oKTtcbiAgICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0luc3RhbGwgZmFpbGVkOicsIGVycik7XG4gICAgICAgICAgICBjb25maXJtQnRuLmNsYXNzTGlzdC5yZW1vdmUoJ21vZC1sb2FkaW5nJyk7XG4gICAgICAgICAgICBjb25maXJtQnRuLnJlbW92ZUF0dHJpYnV0ZSgnYXJpYS1idXN5Jyk7XG4gICAgICAgICAgICBjb25maXJtQnRuLmRpc2FibGVkID0gZmFsc2U7XG4gICAgICAgICAgICBpZiAoY2FuY2VsQnRuRWwpIGNhbmNlbEJ0bkVsLmRpc2FibGVkID0gcHJldkRpc2FibGVkQ2FuY2VsO1xuICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgIH1cblxuICAgICAgb25DbG9zZSgpIHtcbiAgICAgICAgdGhpcy5jb250ZW50RWwuZW1wdHkoKTtcbiAgICAgIH1cbiAgICB9KSh0aGlzLmFwcCwgbm9ybWFsSXRlbXMsIGRlbnlJdGVtcyk7XG5cbiAgICAvLyBBdHRhY2ggcGx1Z2luIHBvaW50ZXIgYW5kIG9wZW5cbiAgICAobW9kYWwgYXMgYW55KS5wbHVnaW4gPSB0aGlzO1xuICAgIG1vZGFsLm9wZW4oKTtcbiAgfVxuXG5cbiAgYXN5bmMgdXBkYXRlRW50cnlGcm9tTWFuaWZlc3QoZW50cnk6IE1hbmlmZXN0RmlsZUVudHJ5LCBmb3JjZTogYm9vbGVhbiA9IGZhbHNlKSB7XG4gICAgY29uc3QgY3VzdG9tID0gdGhpcy5zZXR0aW5ncy5jdXN0b21QYXRocy5maW5kKChjKSA9PiBjLm1hbmlmZXN0S2V5ID09PSBlbnRyeS5rZXkpO1xuICAgIGlmIChjdXN0b20/LmRvVXBkYXRlID09PSBmYWxzZSkgcmV0dXJuO1xuXG4gICAgY29uc3QgZmluYWxWYXVsdFBhdGggPSBjdXN0b20/LnZhdWx0UGF0aCA/PyB0aGlzLnJlc29sdmVWYXVsdFBhdGgoZW50cnkucGF0aCk7XG5cbiAgICBpZiAoIWZvcmNlICYmIChhd2FpdCB0aGlzLmZpbGVDYWNoZU1hbmFnZXIuaXNVcFRvRGF0ZShmaW5hbFZhdWx0UGF0aCkpKSByZXR1cm47XG5cbiAgICBjb25zdCBleGlzdHMgPSBhd2FpdCB0aGlzLmFwcC52YXVsdC5hZGFwdGVyLmV4aXN0cyhmaW5hbFZhdWx0UGF0aCk7XG4gICAgaWYgKGZvcmNlICYmIGV4aXN0cykge1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgY3VycmVudCA9IGF3YWl0IHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXIucmVhZChmaW5hbFZhdWx0UGF0aCk7XG4gICAgICAgIGF3YWl0IHRoaXMuYmFja3VwRmlsZShmaW5hbFZhdWx0UGF0aCwgY3VycmVudCk7XG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGNvbnNvbGUud2FybignQmFja3VwIGJlZm9yZSBmb3JjZSB3cml0ZSBmYWlsZWQ6JywgZmluYWxWYXVsdFBhdGgsIGUpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGNvbnN0IHVybCA9IGBodHRwczovL3Jhdy5naXRodWJ1c2VyY29udGVudC5jb20vc2xhbXdpc2UwMDAxL1ZWdW5kZXJsb3JlLVRvb2xraXQtRnVsbC9tYWluLyR7ZW50cnkucGF0aH1gO1xuICAgIHRyeSB7XG4gICAgICBjb25zdCByZXMgPSBhd2FpdCBmZXRjaCh1cmwpO1xuICAgICAgY29uc3QgdGV4dCA9IGF3YWl0IHJlcy50ZXh0KCk7XG4gICAgICBpZiAoZXhpc3RzKSB7XG4gICAgICAgIGF3YWl0IHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXIud3JpdGUoZmluYWxWYXVsdFBhdGgsIHRleHQpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgYXdhaXQgdGhpcy5hcHAudmF1bHQuY3JlYXRlKGZpbmFsVmF1bHRQYXRoLCB0ZXh0KTtcbiAgICAgIH1cbiAgICAgIGF3YWl0IHRoaXMuZmlsZUNhY2hlTWFuYWdlci51cGRhdGVDYWNoZShmaW5hbFZhdWx0UGF0aCwgdGV4dCwgZW50cnkucGF0aCk7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgY29uc29sZS5lcnJvcihgXHUyNzRDIEVycm9yIHVwZGF0aW5nICR7ZW50cnkuZGlzcGxheU5hbWV9OmAsIGUpO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIHBlcmZvcm1Gb3JjZVVwZGF0ZVdpdGhTZWxlY3Rpb24ocHJldmlld0xpc3Q6IFByZXZpZXdJdGVtW10pIHtcbiAgICAvLyBXaXBlIGluLW1lbW9yeSBiYWNrdXBzIGJlZm9yZSB3ZSBiZWdpblxuICAgIHRoaXMuc2V0dGluZ3MuYmFja3VwRmlsZXMgPSB7fTtcbiAgICBhd2FpdCB0aGlzLnNhdmVTZXR0aW5ncygpO1xuXG4gICAgLy8gQnVpbGQgdGhlIHVwZGF0ZSBzZXQgdXAgZnJvbnQgKHNvIHdlIGNhbiBza2lwIGJhY2t1cCBpZiBub3RoaW5nIHRvIGRvKVxuICAgIGNvbnN0IHRvVXBkYXRlID0gcHJldmlld0xpc3QuZmlsdGVyKFxuICAgICAgKGl0ZW0pID0+XG4gICAgICAgIGl0ZW0uc2VsZWN0ZWQgJiZcbiAgICAgICAgIWl0ZW0uaXNGb2xkZXIgJiZcbiAgICAgICAgIXRoaXMuc2V0dGluZ3MuY3VzdG9tUGF0aHMuc29tZShcbiAgICAgICAgICAoYykgPT4gYy52YXVsdFBhdGggPT09IGl0ZW0uZmlsZVBhdGggJiYgYy5kb1VwZGF0ZSA9PT0gZmFsc2VcbiAgICAgICAgKVxuICAgICk7XG5cbiAgICBpZiAodG9VcGRhdGUubGVuZ3RoID09PSAwKSB7XG4gICAgICAvLyBOb3RoaW5nIHRvIGRvIFx1MjAxNCBleGl0IHF1aWV0bHlcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5zZXR0aW5ncy5hdXRvQmFja3VwQmVmb3JlVXBkYXRlKSB7XG4gICAgICBuZXcgTm90aWNlKCdTdGFydGluZyBzYWZldHkgYmFja3VwIG9mIHNlbGVjdGVkIGZpbGVzXHUyMDI2Jyk7IC8vIDEvMlxuXG4gICAgICBsZXQgYmFja3VwU3VjY2VlZGVkID0gZmFsc2U7XG5cbiAgICAgIC8vIFRyeSBkaXNrIG1pcnJvciBmaXJzdCAocXVpZXQgb24gZmFpbHVyZSlcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHBhdGhzVG9CYWNrdXAgPSB0b1VwZGF0ZS5tYXAoaSA9PiBpLmZpbGVQYXRoKTtcbiAgICAgICAgaWYgKHBhdGhzVG9CYWNrdXAubGVuZ3RoKSB7XG4gICAgICAgICAgYXdhaXQgdGhpcy53cml0ZVBhcnRpYWxNaXJyb3IocGF0aHNUb0JhY2t1cCwgJ3ByZS1mb3JjZS11cGRhdGUnKTtcbiAgICAgICAgICBiYWNrdXBTdWNjZWVkZWQgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGNvbnNvbGUud2FybignW1ZWXSBQYXJ0aWFsIG1pcnJvciBiYWNrdXAgZmFpbGVkOyBmYWxsaW5nIGJhY2sgdG8gaW4tbWVtb3J5IGJhY2t1cC4nLCBlKTtcbiAgICAgIH1cblxuICAgICAgLy8gRmFsbGJhY2s6IGluLW1lbW9yeSBiYWNrdXAgKHF1aWV0LCBjb25zb2xlIG9uIHBlci1maWxlIGlzc3VlcylcbiAgICAgIGlmICghYmFja3VwU3VjY2VlZGVkKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgY29uc3Qgbm93ID0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpO1xuICAgICAgICAgIGxldCBiYWNrZWRVcCA9IDA7XG4gICAgICAgICAgZm9yIChjb25zdCBpdGVtIG9mIHRvVXBkYXRlKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICBpZiAoYXdhaXQgdGhpcy5hcHAudmF1bHQuYWRhcHRlci5leGlzdHMoaXRlbS5maWxlUGF0aCkpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBjdXJyZW50ID0gYXdhaXQgdGhpcy5hcHAudmF1bHQuYWRhcHRlci5yZWFkKGl0ZW0uZmlsZVBhdGgpO1xuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuYmFja3VwRmlsZShpdGVtLmZpbGVQYXRoLCBjdXJyZW50KTtcbiAgICAgICAgICAgICAgICBiYWNrZWRVcCsrO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgIGNvbnNvbGUud2FybignW1ZWXSBJbi1tZW1vcnkgcHJlLWJhY2t1cCBmYWlsZWQgZm9yJywgaXRlbS5maWxlUGF0aCwgZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChiYWNrZWRVcCA+IDApIHtcbiAgICAgICAgICAgIHRoaXMuc2V0dGluZ3MubGFzdEJhY2t1cFRpbWUgPSBub3c7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgYmFja3VwU3VjY2VlZGVkID0gdHJ1ZTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICBjb25zb2xlLndhcm4oJ1tWVl0gSW4tbWVtb3J5IGJhY2t1cCBwaGFzZSBlbmNvdW50ZXJlZCBhbiBlcnJvci4nLCBlKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAoYmFja3VwU3VjY2VlZGVkKSB7XG4gICAgICAgIG5ldyBOb3RpY2UoJ0JhY2t1cCBjb21wbGV0ZS4gQ29udGludWluZyB3aXRoIHVwZGF0ZVx1MjAyNicpOyAvLyAyLzJcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIFN0aWxsIGtlZXAgdGhpcyBxdWlldDsgb25seSBsb2cuIChObyBleHRyYSB0b2FzdC4pXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ1tWVl0gTm8gYmFja3VwIGNvdWxkIGJlIGNyZWF0ZWQ7IHByb2NlZWRpbmcgYW55d2F5IHBlciB1c2VyIGFjdGlvbi4nKTtcbiAgICAgIH1cbiAgICB9XG4gICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuICAgIGxldCB1cGRhdGVkQ291bnQgPSAwO1xuXG4gICAgdHJ5IHtcbiAgICAgIC8vIFVwZGF0ZSBlYWNoIHNlbGVjdGVkIGZpbGVcbiAgICAgIGZvciAoY29uc3QgaXRlbSBvZiB0b1VwZGF0ZSkge1xuICAgICAgICBjb25zdCBlbnRyeSA9IHRoaXMubWFuaWZlc3RDYWNoZS5maWxlcy5maW5kKFxuICAgICAgICAgIChmKSA9PiB0aGlzLnJlc29sdmVWYXVsdFBhdGgoZi5wYXRoKSA9PT0gaXRlbS5maWxlUGF0aFxuICAgICAgICApO1xuICAgICAgICBpZiAoIWVudHJ5KSB7XG4gICAgICAgICAgY29uc29sZS53YXJuKCdbVlZdIENvdWxkIG5vdCBtYXRjaCBwcmV2aWV3IGl0ZW0gdG8gbWFuaWZlc3Q6JywgaXRlbS5maWxlUGF0aCk7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgYXdhaXQgdGhpcy51cGRhdGVFbnRyeUZyb21NYW5pZmVzdChlbnRyeSwgdHJ1ZSk7XG4gICAgICAgIHVwZGF0ZWRDb3VudCsrO1xuICAgICAgfVxuXG4gICAgICAvLyBFbnN1cmUgbWFuaWZlc3QgZm9sZGVycyBleGlzdCAocXVpZXQpXG4gICAgICBmb3IgKGNvbnN0IGVudHJ5IG9mIHRoaXMubWFuaWZlc3RDYWNoZS5mb2xkZXJzKSB7XG4gICAgICAgIGlmICghKGF3YWl0IHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXIuZXhpc3RzKGVudHJ5LnBhdGgpKSkge1xuICAgICAgICAgIGF3YWl0IHRoaXMuYXBwLnZhdWx0LmNyZWF0ZUZvbGRlcihlbnRyeS5wYXRoKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBNb2RhbCBmb3JtcyB1cGRhdGVyIChxdWlldClcbiAgICAgIHRyeSB7XG4gICAgICAgIGF3YWl0IHVwZGF0ZU1vZGFsRm9ybXNGcm9tUmVwbyh0aGlzLmFwcCk7XG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGNvbnNvbGUud2FybignW1ZWXSBNb2RhbCBGb3JtcyB1cGRhdGVyIChmb3JjZSBzZWxlY3Rpb24pIGZhaWxlZDonLCBlKTtcbiAgICAgIH1cblxuICAgICAgLy8gVmVyc2lvbiBidW1wIChxdWlldClcbiAgICAgIGF3YWl0IHRoaXMudXBkYXRlVmVyc2lvbkZpbGUoKTtcbiAgICAgIHRoaXMuc2V0dGluZ3MuaW5zdGFsbGVkVmVyc2lvbiA9IHRoaXMuc2V0dGluZ3MubGF0ZXN0VG9vbGtpdFZlcnNpb24gPz8gJ3Vua25vd24nO1xuICAgICAgdGhpcy5zZXR0aW5ncy5sYXN0Rm9yY2VVcGRhdGUgPSBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCk7XG4gICAgICBhd2FpdCB0aGlzLnNhdmVTZXR0aW5ncygpO1xuXG4gICAgICAvLyBPcHRpb25hbCBnYW1lc2V0IHJlZnJlc2ggKHF1aWV0KVxuICAgICAgaWYgKHRoaXMuc2V0dGluZ3MucmVwYXJzZUdhbWVzZXRzKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgYXdhaXQgdGhpcy5yZWZyZXNoR2FtZVNldERhdGEoKTtcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgIGNvbnNvbGUud2FybignW1ZWXSBHYW1lIHNldCByZWZyZXNoIGZhaWxlZDonLCBlKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAodGhpcy5zZXR0aW5nc1RhYikge1xuICAgICAgICBhd2FpdCB0aGlzLnNldHRpbmdzVGFiLnVwZGF0ZVZlcnNpb25EaXNwbGF5KCk7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAvLyBLZWVwIGZhaWx1cmVzIHF1aWV0IChsb2cgb25seSkuIE5vIGV4dHJhIHRvYXN0cy5cbiAgICAgIGNvbnNvbGUuZXJyb3IoJ1tWVl0gRm9yY2UgdXBkYXRlIGZhaWxlZC4gVmVyc2lvbiBub3QgY2hhbmdlZC4nLCBlcnIpO1xuICAgIH1cblxuICAgIGlmICh0aGlzLnNldHRpbmdzLmhpZ2hsaWdodEVuYWJsZWQpIHtcbiAgICAgIHRoaXMuZW5hYmxlSGlnaGxpZ2h0KCk7XG4gICAgfVxuXG4gIH1cblxuXG4gIC8vIFx1MjUwMFx1MjUwMFx1MjUwMCBTSU5HTEUtRklMRSBVUERBVEUgKHdpdGggR2l0SHViIEFQSSArIHJhdyBmYWxsYmFjaykgXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXG5cbiAgYXN5bmMgdXBkYXRlU2luZ2xlRmlsZUZyb21HaXRIdWIoXG4gICAgeyBnaXRodWJQYXRoLCB2YXVsdFBhdGggfTogeyBnaXRodWJQYXRoOiBzdHJpbmc7IHZhdWx0UGF0aDogc3RyaW5nIH0sXG4gICAgZm9yY2U6IGJvb2xlYW4gPSBmYWxzZVxuICApIHtcbiAgICBpZiAodGhpcy5zZXR0aW5ncy5jdXN0b21pemVVcGRhdGVzKSB7XG4gICAgICB2YXVsdFBhdGggPSB0aGlzLnJlc29sdmVWYXVsdFBhdGgoZ2l0aHViUGF0aCk7XG4gICAgICBjb25zdCBjdXN0b20gPSB0aGlzLnNldHRpbmdzLmN1c3RvbVBhdGhzLmZpbmQoKGMpID0+IGMubWFuaWZlc3RLZXkgPT09IGdpdGh1YlBhdGgpO1xuICAgICAgaWYgKGN1c3RvbT8uZG9VcGRhdGUgPT09IGZhbHNlKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgdmF1bHRQYXRoID0gZ2l0aHViUGF0aDtcbiAgICB9XG5cbiAgICBpZiAoIXZhdWx0UGF0aCkge1xuICAgICAgY29uc29sZS5lcnJvcihgXHUyNzRDIE5vIHZhbGlkIHZhdWx0IHBhdGggcmVzb2x2ZWQgZm9yICR7Z2l0aHViUGF0aH1gKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyAxKSBIYW5kbGUgbG9jYWwgcmVuYW1lcyBmaXJzdFxuICAgIGNvbnN0IG9sZFZhdWx0ID0gdGhpcy5vbGRQYXRoc0J5R2l0aHViW2dpdGh1YlBhdGhdO1xuICAgIGlmIChvbGRWYXVsdCAmJiBvbGRWYXVsdCAhPT0gdmF1bHRQYXRoKSB7XG4gICAgICBpZiAoYXdhaXQgdGhpcy5hcHAudmF1bHQuYWRhcHRlci5leGlzdHModmF1bHRQYXRoKSkge1xuICAgICAgICBjb25zdCBzdHJheSA9IGF3YWl0IHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXIucmVhZCh2YXVsdFBhdGgpO1xuICAgICAgICBhd2FpdCB0aGlzLmJhY2t1cEZpbGUodmF1bHRQYXRoLCBzdHJheSk7XG4gICAgICAgIGF3YWl0IHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXIucmVtb3ZlKHZhdWx0UGF0aCk7XG4gICAgICB9XG4gICAgICBjb25zdCBvbGRGaWxlID0gdGhpcy5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKG9sZFZhdWx0KTtcbiAgICAgIGlmIChvbGRGaWxlIGluc3RhbmNlb2YgVEZpbGUpIHtcbiAgICAgICAgYXdhaXQgdGhpcy5hcHAudmF1bHQucmVuYW1lKG9sZEZpbGUsIHZhdWx0UGF0aCk7XG4gICAgICAgIGNvbnN0IG5ld0NvbnRlbnQgPSBhd2FpdCB0aGlzLmFwcC52YXVsdC5hZGFwdGVyLnJlYWQodmF1bHRQYXRoKTtcbiAgICAgICAgYXdhaXQgdGhpcy5maWxlQ2FjaGVNYW5hZ2VyLnVwZGF0ZUNhY2hlKHZhdWx0UGF0aCwgbmV3Q29udGVudCwgZ2l0aHViUGF0aCk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyAyKSBFeGlzdGVuY2UsIGJhY2t1cCAmIHNraXAgbG9naWNcbiAgICBjb25zdCBmaWxlRXhpc3RzID0gYXdhaXQgdGhpcy5hcHAudmF1bHQuYWRhcHRlci5leGlzdHModmF1bHRQYXRoKTtcbiAgICBpZiAoZm9yY2UgJiYgZmlsZUV4aXN0cykge1xuICAgICAgY29uc3QgY3VycmVudCA9IGF3YWl0IHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXIucmVhZCh2YXVsdFBhdGgpO1xuICAgICAgYXdhaXQgdGhpcy5iYWNrdXBGaWxlKHZhdWx0UGF0aCwgY3VycmVudCk7XG4gICAgfVxuICAgIGlmICghZm9yY2UgJiYgZmlsZUV4aXN0cyAmJiAoYXdhaXQgdGhpcy5maWxlQ2FjaGVNYW5hZ2VyLmlzVXBUb0RhdGUodmF1bHRQYXRoKSkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyAzKSBGZXRjaCB2aWEgR2l0SHViIEFQSSwgZmFsbGJhY2sgdG8gcmF3XG4gICAgY29uc3QgYXBpVXJsID0gZW5jb2RlVVJJKFxuICAgICAgYGh0dHBzOi8vYXBpLmdpdGh1Yi5jb20vcmVwb3Mvc2xhbXdpc2UwMDAxL1ZWdW5kZXJsb3JlLVRvb2xraXQtRnVsbC9jb250ZW50cy8ke2dpdGh1YlBhdGh9P3JlZj1tYWluYFxuICAgICk7XG4gICAgdHJ5IHtcbiAgICAgIGxldCByZXMgPSBhd2FpdCBmZXRjaChhcGlVcmwpO1xuICAgICAgaWYgKHJlcy5zdGF0dXMgPT09IDQwNCkge1xuICAgICAgICBjb25zdCByYXdVcmwgPSBlbmNvZGVVUkkoXG4gICAgICAgICAgYGh0dHBzOi8vcmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbS9zbGFtd2lzZTAwMDEvVlZ1bmRlcmxvcmUtVG9vbGtpdC1GdWxsL21haW4vJHtnaXRodWJQYXRofWBcbiAgICAgICAgKTtcbiAgICAgICAgcmVzID0gYXdhaXQgZmV0Y2gocmF3VXJsKTtcbiAgICAgICAgaWYgKCFyZXMub2spIHRocm93IG5ldyBFcnJvcihgUmF3IGZldGNoIGZhaWxlZDogJHtyZXMuc3RhdHVzVGV4dH1gKTtcbiAgICAgICAgY29uc3QgY29udGVudCA9IGF3YWl0IHJlcy50ZXh0KCk7XG4gICAgICAgIGlmIChmaWxlRXhpc3RzKSB7XG4gICAgICAgICAgYXdhaXQgdGhpcy5hcHAudmF1bHQuYWRhcHRlci53cml0ZSh2YXVsdFBhdGgsIGNvbnRlbnQpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGF3YWl0IHRoaXMuYXBwLnZhdWx0LmNyZWF0ZSh2YXVsdFBhdGgsIGNvbnRlbnQpO1xuICAgICAgICB9XG4gICAgICAgIGF3YWl0IHRoaXMuZmlsZUNhY2hlTWFuYWdlci51cGRhdGVDYWNoZSh2YXVsdFBhdGgsIGNvbnRlbnQsIGdpdGh1YlBhdGgpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGlmICghcmVzLm9rKSB0aHJvdyBuZXcgRXJyb3IoYEdpdEh1YiBBUEkgZXJyb3I6ICR7cmVzLnN0YXR1c1RleHR9YCk7XG4gICAgICBjb25zdCB7IGRvd25sb2FkX3VybCB9ID0gKGF3YWl0IHJlcy5qc29uKCkpIGFzIHsgZG93bmxvYWRfdXJsOiBzdHJpbmcgfTtcbiAgICAgIGNvbnN0IGNvbnRlbnQgPSBhd2FpdCAoYXdhaXQgZmV0Y2goZG93bmxvYWRfdXJsKSkudGV4dCgpO1xuICAgICAgaWYgKGZpbGVFeGlzdHMpIHtcbiAgICAgICAgYXdhaXQgdGhpcy5hcHAudmF1bHQuYWRhcHRlci53cml0ZSh2YXVsdFBhdGgsIGNvbnRlbnQpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgYXdhaXQgdGhpcy5hcHAudmF1bHQuY3JlYXRlKHZhdWx0UGF0aCwgY29udGVudCk7XG4gICAgICB9XG4gICAgICBhd2FpdCB0aGlzLmZpbGVDYWNoZU1hbmFnZXIudXBkYXRlQ2FjaGUodmF1bHRQYXRoLCBjb250ZW50LCBnaXRodWJQYXRoKTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICBjb25zb2xlLmVycm9yKGBcdTI3NEMgRmFpbGVkIHRvIHVwZGF0ZSAke3ZhdWx0UGF0aH1gLCBlKTtcbiAgICB9XG4gIH1cblxuICAvLyBcdTI1MDBcdTI1MDBcdTI1MDAgUFJFVklFVyArIFJFTU9URS1CQVNFTElORSArIERJRkYgXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXG5cbiAgYXN5bmMgcHJldmlld1VwZGF0ZXNNb2RhbCgpIHtcblxuICAgIGF3YWl0IHRoaXMuc3luY01hbmlmZXN0KCk7XG4gICAgYXdhaXQgdGhpcy5mZXRjaFJlbW90ZUJhc2VsaW5lKCk7XG4gICAgY29uc3QgZGlmZnMgPSBhd2FpdCB0aGlzLmJ1aWxkVXBkYXRlUHJldmlldygpO1xuXG4gICAgLy8gU3BsaXQgb3V0IGRlbnlcdTIwMTBsaXN0ZWQgbGluZXMgdnMuIGV2ZXJ5dGhpbmcgZWxzZVxuICAgIGNvbnN0IGRlbnlMaXN0ZWRMaW5lczogc3RyaW5nW10gPSBbXTtcbiAgICBjb25zdCBub3JtYWxMaW5lczogc3RyaW5nW10gPSBbXTtcblxuICAgIGZvciAoY29uc3QgZCBvZiBkaWZmcykge1xuICAgICAgaWYgKGQuc3RhcnRzV2l0aCgnXHUyNzRDIGRlbnlcdTIwMTBsaXN0ZWQnKSkge1xuICAgICAgICBkZW55TGlzdGVkTGluZXMucHVzaChkKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG5vcm1hbExpbmVzLnB1c2goZCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgY29uc3QgZGlmZkNvdW50ID0gbm9ybWFsTGluZXMubGVuZ3RoO1xuXG4gICAgY29uc3QgbW9kYWwgPSBuZXcgKGNsYXNzIGV4dGVuZHMgTW9kYWwge1xuICAgICAgcGx1Z2luOiBWVnVuZGVybG9yZVRvb2xraXRQbHVnaW47XG4gICAgICBub3JtYWw6IHN0cmluZ1tdO1xuICAgICAgZGVuaWVkOiBzdHJpbmdbXTtcbiAgICAgIGRpZmZDb3VudDogbnVtYmVyO1xuXG4gICAgICBjb25zdHJ1Y3RvcihhcHA6IEFwcCwgbm9ybWFsOiBzdHJpbmdbXSwgZGVuaWVkOiBzdHJpbmdbXSwgZGlmZkNvdW50OiBudW1iZXIpIHtcbiAgICAgICAgc3VwZXIoYXBwKTtcbiAgICAgICAgdGhpcy5ub3JtYWwgPSBub3JtYWw7XG4gICAgICAgIHRoaXMuZGVuaWVkID0gZGVuaWVkO1xuICAgICAgICB0aGlzLmRpZmZDb3VudCA9IGRpZmZDb3VudDtcbiAgICAgIH1cblxuICAgICAgb25PcGVuKCkge1xuICAgICAgICB0aGlzLmNvbnRlbnRFbC5lbXB0eSgpO1xuICAgICAgICB0aGlzLnRpdGxlRWwuc2V0VGV4dCgnVXBkYXRlIFByZXZpZXcnKTtcblxuICAgICAgICAvLyBJbnRybyBwYXJhZ3JhcGhcbiAgICAgICAgdGhpcy5jb250ZW50RWwuY3JlYXRlRWwoJ3AnLCB7XG4gICAgICAgICAgdGV4dDogJ09ubHkgZmlsZXMgd2hvc2UgY29udGVudHMgZGlmZmVyIGZyb20gR2l0SHViIHdpbGwgYmUgdXBkYXRlZDonLFxuICAgICAgICB9KTtcblxuICAgICAgICAvLyAxKSBJZiB0aGVyZSBhcmUgYW55IFx1MjAxQ25vcm1hbFx1MjAxRCBkaWZmcywgcmVuZGVyIHRoZW0gaW4gYSBidWxsZXQgbGlzdFxuICAgICAgICBpZiAodGhpcy5ub3JtYWwubGVuZ3RoKSB7XG4gICAgICAgICAgY29uc3QgdWwgPSB0aGlzLmNvbnRlbnRFbC5jcmVhdGVFbCgndWwnKTtcbiAgICAgICAgICB0aGlzLm5vcm1hbC5mb3JFYWNoKChsaW5lKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBsaSA9IHVsLmNyZWF0ZUVsKCdsaScsIHsgdGV4dDogbGluZSB9KTtcbiAgICAgICAgICAgIC8vIE5vIHNwZWNpYWwgc3R5bGluZyBmb3IgdGhlc2U7IHRoZXkgc2hvdyB1cCBub3JtYWxseS5cbiAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBJZiBubyBub3JtYWwgZGlmZnMsIHNheSBcdTIwMUNVcCB0byBkYXRlXHUyMDFEXG4gICAgICAgICAgdGhpcy5jb250ZW50RWwuY3JlYXRlRWwoJ2RpdicsIHtcbiAgICAgICAgICAgIHRleHQ6ICdcdTI3MDUgRXZlcnl0aGluZyBpcyBhbHJlYWR5IHVwIHRvIGRhdGUhJyxcbiAgICAgICAgICAgIGNsczogJ21vZC1pbmZvJyxcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIDIpIElmIHRoZXJlIGFyZSBhbnkgZGVueVx1MjAxMGxpc3RlZCBsaW5lcywgdHVjayB0aGVtIGludG8gYSA8ZGV0YWlscz4gYmxvY2tcbiAgICAgICAgaWYgKHRoaXMuZGVuaWVkLmxlbmd0aCkge1xuICAgICAgICAgIGNvbnN0IGRlbnlEZXRhaWxzID0gdGhpcy5jb250ZW50RWwuY3JlYXRlRWwoJ2RldGFpbHMnLCB7IGNsczogJ3ZrLXNlY3Rpb24nIH0pO1xuICAgICAgICAgIC8vIEFsd2F5cyBzdGFydCBjb2xsYXBzZWQgYnkgZGVmYXVsdFxuICAgICAgICAgIGRlbnlEZXRhaWxzLm9wZW4gPSBmYWxzZTtcblxuICAgICAgICAgIC8vIFN1bW1hcnkgbGluZTogc2hvd3MgXHUyMDFDRGVueVx1MjAxMExpc3QgRmlsZXMgKG4pXHUyMDFEXG4gICAgICAgICAgY29uc3Qgc3VtbWFyeSA9IGRlbnlEZXRhaWxzLmNyZWF0ZUVsKCdzdW1tYXJ5JywgeyBjbHM6ICd2ay1zZWN0aW9uLWhlYWRlcicgfSk7XG4gICAgICAgICAgT2JqZWN0LmFzc2lnbihzdW1tYXJ5LnN0eWxlLCB7XG4gICAgICAgICAgICBjdXJzb3I6ICdwb2ludGVyJyxcbiAgICAgICAgICAgIGRpc3BsYXk6ICdmbGV4JyxcbiAgICAgICAgICAgIGNvbG9yOiAndmFyKC0tdGV4dC1mYWludCknLFxuICAgICAgICAgICAgYWxpZ25JdGVtczogJ2NlbnRlcicsXG4gICAgICAgICAgICBnYXA6ICcwLjVlbScsXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgc3VtbWFyeS5jcmVhdGVFbCgnc3BhbicsIHsgdGV4dDogYERlbnlcdTIwMTBMaXN0IEZpbGVzICgke3RoaXMuZGVuaWVkLmxlbmd0aH0pYCB9KTtcblxuICAgICAgICAgIC8vIFJpZ2h0XHUyMDEwc2lkZSBpY29uIHJvdGF0aW5nIG9uIGV4cGFuZC9jb2xsYXBzZVxuICAgICAgICAgIGNvbnN0IHRvZ2dsZUljb24gPSBzdW1tYXJ5LmNyZWF0ZUVsKCdzcGFuJywgeyB0ZXh0OiAnVlYnLCBjbHM6ICd2ay10b2dnbGUtaWNvbicgfSk7XG4gICAgICAgICAgT2JqZWN0LmFzc2lnbih0b2dnbGVJY29uLnN0eWxlLCB7XG4gICAgICAgICAgICBmb250V2VpZ2h0OiAnYm9sZCcsXG4gICAgICAgICAgICBkaXNwbGF5OiAnaW5saW5lLWJsb2NrJyxcbiAgICAgICAgICAgIHRyYW5zaXRpb246ICd0cmFuc2Zvcm0gMC4ycyBlYXNlJyxcbiAgICAgICAgICAgIHRyYW5zZm9ybU9yaWdpbjogJzUwJSA1MCUnLFxuICAgICAgICAgICAgdXNlclNlbGVjdDogJ25vbmUnLFxuICAgICAgICAgICAgdHJhbnNmb3JtOiAncm90YXRlKDE4MGRlZyknLFxuICAgICAgICAgIH0pO1xuICAgICAgICAgIGRlbnlEZXRhaWxzLm9udG9nZ2xlID0gKCkgPT4ge1xuICAgICAgICAgICAgdG9nZ2xlSWNvbi50b2dnbGVDbGFzcyhcInZ2LXJvdGF0ZWRcIiwgIWRlbnlEZXRhaWxzLm9wZW4pO1xuICAgICAgICAgIH07XG5cbiAgICAgICAgICAvLyBCb2R5IG9mIHRoZSBkZXRhaWxzOiBhIHNpbXBsZSA8dWw+IGNvbnRhaW5pbmcgb25seSBkZW55XHUyMDEwbGlzdGVkIGxpbmVzXG4gICAgICAgICAgY29uc3QgZGVueUJvZHkgPSBkZW55RGV0YWlscy5jcmVhdGVEaXYoeyBjbHM6ICd2ay1zZWN0aW9uLWJvZHknIH0pO1xuICAgICAgICAgIGRlbnlCb2R5LmFkZENsYXNzKFwiZGVueWxpc3RcIik7XG4gICAgICAgICAgY29uc3QgZGVueVVsID0gZGVueUJvZHkuY3JlYXRlRWwoJ3VsJyk7XG4gICAgICAgICAgdGhpcy5kZW5pZWQuZm9yRWFjaCgobGluZSkgPT4ge1xuICAgICAgICAgICAgY29uc3QgbGkgPSBkZW55VWwuY3JlYXRlRWwoJ2xpJywgeyB0ZXh0OiBsaW5lIH0pO1xuICAgICAgICAgICAgbGkuYWRkQ2xhc3MoXCJmb3JjZXVwZGF0ZS1ub3RlLWNcIik7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBidXR0b25Sb3cgPSB0aGlzLmNvbnRlbnRFbC5jcmVhdGVFbCgnZGl2Jyk7XG4gICAgICAgIE9iamVjdC5hc3NpZ24oYnV0dG9uUm93LnN0eWxlLCB7XG4gICAgICAgICAgZGlzcGxheTogJ2ZsZXgnLFxuICAgICAgICAgIGp1c3RpZnlDb250ZW50OiAnZmxleC1lbmQnLFxuICAgICAgICAgIG1hcmdpblRvcDogJzEuMjVlbScsICAgICAgIC8vIHR3ZWFrIHNwYWNpbmcgYXMgeW91IGxpa2VcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gXHUyMDFDQ29uZmlybSAmIFVwZGF0ZVx1MjAxRCBidXR0b25cbiAgICAgICAgY29uc3QgY29uZmlybUJ0biA9IGJ1dHRvblJvdy5jcmVhdGVFbCgnYnV0dG9uJywge1xuICAgICAgICAgIHRleHQ6ICdDb25maXJtICYgVXBkYXRlJyxcbiAgICAgICAgICBjbHM6ICdtb2QtY3RhJyxcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbmZpcm1CdG4ub25jbGljayA9IGFzeW5jICgpID0+IHtcbiAgICAgICAgICBpZiAoY29uZmlybUJ0bi5kaXNhYmxlZCkgcmV0dXJuO1xuXG4gICAgICAgICAgLy8gYWxzbyBmcmVlemUgQ2FuY2VsIHdoaWxlIGluc3RhbGxpbmdcbiAgICAgICAgICBjb25zdCBjYW5jZWxCdG5FbCA9IGJ1dHRvblJvdy5xdWVyeVNlbGVjdG9yKCdidXR0b246bm90KC5tb2QtY3RhKScpIGFzIEhUTUxCdXR0b25FbGVtZW50IHwgbnVsbDtcbiAgICAgICAgICBjb25zdCBwcmV2RGlzYWJsZWRDYW5jZWwgPSBjYW5jZWxCdG5FbD8uZGlzYWJsZWQgPz8gZmFsc2U7XG5cbiAgICAgICAgICBjb25maXJtQnRuLmNsYXNzTGlzdC5hZGQoJ21vZC1sb2FkaW5nJyk7XG4gICAgICAgICAgY29uZmlybUJ0bi5zZXRBdHRyaWJ1dGUoJ2FyaWEtYnVzeScsICd0cnVlJyk7XG4gICAgICAgICAgY29uZmlybUJ0bi5kaXNhYmxlZCA9IHRydWU7XG4gICAgICAgICAgaWYgKGNhbmNlbEJ0bkVsKSBjYW5jZWxCdG5FbC5kaXNhYmxlZCA9IHRydWU7XG5cbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgYXdhaXQgKHRoaXMgYXMgYW55KS5wbHVnaW4udXBkYXRlU2VsZWN0ZWRUb29sa2l0Q29udGVudCgpO1xuXG4gICAgICAgICAgICB0aGlzLmNsb3NlKCk7XG5cbiAgICAgICAgICAgIC8vIElmIHRoZXJlIHdlcmUgcmVhbCBkaWZmcywgZG8gYSBsaXZlIGNvdW50ZG93biArIHJlbG9hZC5cbiAgICAgICAgICAgIGlmICh0aGlzLmRpZmZDb3VudCA+IDApIHtcbiAgICAgICAgICAgICAgY29uc3Qgc3VjY2VzcyA9IG5ldyBNb2RhbCh0aGlzLmFwcCk7XG4gICAgICAgICAgICAgIHN1Y2Nlc3Mub25PcGVuID0gKCkgPT4ge1xuICAgICAgICAgICAgICAgIHN1Y2Nlc3MuY29udGVudEVsLmVtcHR5KCk7XG4gICAgICAgICAgICAgICAgc3VjY2Vzcy50aXRsZUVsLnNldFRleHQoJ1x1MjcwNSBUb29sa2l0IFVwZGF0ZWQnKTtcblxuICAgICAgICAgICAgICAgIGNvbnN0IG1zZyA9IHN1Y2Nlc3MuY29udGVudEVsLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ2luc3RhbGxzdWNjZXNzJyB9KTtcbiAgICAgICAgICAgICAgICBsZXQgc2Vjb25kcyA9IDM7XG5cbiAgICAgICAgICAgICAgICBjb25zdCByZW5kZXIgPSAoKSA9PiB7IG1zZy5zZXRUZXh0KGBSZWxvYWRpbmcgdmF1bHQgaW4gJHtzZWNvbmRzfVx1MjAyNmApOyB9O1xuICAgICAgICAgICAgICAgIHJlbmRlcigpO1xuXG4gICAgICAgICAgICAgICAgY29uc3QgdGltZXIgPSB3aW5kb3cuc2V0SW50ZXJ2YWwoKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgc2Vjb25kcyAtPSAxO1xuICAgICAgICAgICAgICAgICAgaWYgKHNlY29uZHMgPD0gMCkge1xuICAgICAgICAgICAgICAgICAgICB3aW5kb3cuY2xlYXJJbnRlcnZhbCh0aW1lcik7XG4gICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3MuY2xvc2UoKTtcbiAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAodGhpcy5hcHAgYXMgYW55KS5jb21tYW5kcy5leGVjdXRlQ29tbWFuZEJ5SWQoJ2FwcDpyZWxvYWQnKTtcbiAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCB7XG4gICAgICAgICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLnJlbG9hZCgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgIHJlbmRlcigpO1xuICAgICAgICAgICAgICAgIH0sIDEwMDApO1xuXG4gICAgICAgICAgICAgICAgLy8gY2xlYW4gdXAgaWYgdXNlciBjbG9zZXMgZWFybHlcbiAgICAgICAgICAgICAgICBzdWNjZXNzLm9uQ2xvc2UgPSAoKSA9PiB3aW5kb3cuY2xlYXJJbnRlcnZhbCh0aW1lcik7XG4gICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgIHN1Y2Nlc3Mub3BlbigpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgLy8gTm8gY2hhbmdlcyBhcHBsaWVkIFx1MjAxNCBkb25cdTIwMTl0IHJlbG9hZFxuICAgICAgICAgICAgICBuZXcgTm90aWNlKCdBbHJlYWR5IHVwIHRvIGRhdGUgXHUyMDE0IG5vIGNoYW5nZXMgYXBwbGllZC4nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0luc3RhbGwgZmFpbGVkOicsIGVycik7XG4gICAgICAgICAgICBjb25maXJtQnRuLmNsYXNzTGlzdC5yZW1vdmUoJ21vZC1sb2FkaW5nJyk7XG4gICAgICAgICAgICBjb25maXJtQnRuLnJlbW92ZUF0dHJpYnV0ZSgnYXJpYS1idXN5Jyk7XG4gICAgICAgICAgICBjb25maXJtQnRuLmRpc2FibGVkID0gZmFsc2U7XG4gICAgICAgICAgICBpZiAoY2FuY2VsQnRuRWwpIGNhbmNlbEJ0bkVsLmRpc2FibGVkID0gcHJldkRpc2FibGVkQ2FuY2VsO1xuICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICAvLyBcdTIwMUNDYW5jZWxcdTIwMUQgYnV0dG9uXG4gICAgICAgIGNvbnN0IGNhbmNlbEJ0biA9IGJ1dHRvblJvdy5jcmVhdGVFbCgnYnV0dG9uJywgeyB0ZXh0OiAnQ2FuY2VsJyB9KTtcbiAgICAgICAgY2FuY2VsQnRuLm9uY2xpY2sgPSAoKSA9PiB0aGlzLmNsb3NlKCk7XG4gICAgICB9XG5cbiAgICAgIG9uQ2xvc2UoKSB7XG4gICAgICAgIHRoaXMuY29udGVudEVsLmVtcHR5KCk7XG4gICAgICB9XG4gICAgfSkodGhpcy5hcHAsIG5vcm1hbExpbmVzLCBkZW55TGlzdGVkTGluZXMsIGRpZmZDb3VudCk7XG5cbiAgICAvLyBBdHRhY2ggcGx1Z2luIHBvaW50ZXIgYW5kIG9wZW5cbiAgICAobW9kYWwgYXMgYW55KS5wbHVnaW4gPSB0aGlzO1xuICAgIG1vZGFsLm9wZW4oKTtcbiAgfVxuXG5cbiAgYXN5bmMgYnVpbGRVcGRhdGVQcmV2aWV3KCk6IFByb21pc2U8c3RyaW5nW10+IHtcbiAgICBjb25zdCBjaGFuZ2VzOiBzdHJpbmdbXSA9IFtdO1xuXG4gICAgLy8gMCkgQ29sbGVjdCBhbGwgYmxhY2tsaXN0ZWQgZm9sZGVycyAobWFuaWZlc3RLZXkgdmFsdWVzIHdoZXJlIGRvVXBkYXRlID09PSBmYWxzZSlcbiAgICBjb25zdCBkZW55TGlzdGVkRm9sZGVycyA9IHRoaXMuc2V0dGluZ3MuY3VzdG9tUGF0aHNcbiAgICAgIC5maWx0ZXIoKGMpID0+IGMuZG9VcGRhdGUgPT09IGZhbHNlKVxuICAgICAgLm1hcCgoYykgPT4gYy5tYW5pZmVzdEtleSk7XG5cbiAgICAvLyAxKSBEZW55XHUyMDEwbGlzdGVkIGVudHJpZXNcdTIwMTRidXQgb25seSBpZiB0aGV5XHUyMDE5ZCBhY3R1YWxseSBiZSBcdTIwMUNuZXdcdTIwMUQgKG1pc3NpbmcpIG9yIFx1MjAxQ291dFx1MjAxMG9mXHUyMDEwZGF0ZVx1MjAxRFxuICAgIGZvciAoY29uc3QgZiBvZiB0aGlzLm1hbmlmZXN0Q2FjaGUuZmlsZXMpIHtcbiAgICAgIC8vIFx1MjUwMFx1MjUwMCBTS0lQIGFueSBvcHRpb25hbDp0cnVlIGZpbGVcbiAgICAgIGlmIChmLm9wdGlvbmFsKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBjdXN0b20gPSB0aGlzLnNldHRpbmdzLmN1c3RvbVBhdGhzLmZpbmQoKGMpID0+IGMubWFuaWZlc3RLZXkgPT09IGYua2V5KTtcbiAgICAgIGNvbnN0IGlzSW5EZW55Rm9sZGVyID0gZGVueUxpc3RlZEZvbGRlcnMuc29tZSgoZm9sZGVyKSA9PlxuICAgICAgICBmLnBhdGguc3RhcnRzV2l0aChmb2xkZXIgKyAnLycpXG4gICAgICApO1xuICAgICAgaWYgKGN1c3RvbT8uZG9VcGRhdGUgPT09IGZhbHNlIHx8IGlzSW5EZW55Rm9sZGVyKSB7XG4gICAgICAgIC8vIFJlc29sdmUgdGhlIHZhdWx0IHBhdGggKGhhbmRsZXMgcmVtYXBwaW5nIGlmIHByZXNlbnQpXG4gICAgICAgIGNvbnN0IHZwID0gY3VzdG9tPy52YXVsdFBhdGggPz8gdGhpcy5yZXNvbHZlVmF1bHRQYXRoKGYucGF0aCk7XG5cbiAgICAgICAgLy8gQ2hlY2sgaWYgZmlsZSBleGlzdHMgbG9jYWxseSBhbmQgaWYgaXRcdTIwMTlzIHVwXHUyMDEwdG9cdTIwMTBkYXRlXG4gICAgICAgIGNvbnN0IGV4aXN0cyA9IGF3YWl0IHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXIuZXhpc3RzKHZwKTtcbiAgICAgICAgY29uc3QgdXBUb0RhdGUgPSBleGlzdHMgJiYgKGF3YWl0IHRoaXMuZmlsZUNhY2hlTWFuYWdlci5pc1VwVG9EYXRlKHZwKSk7XG5cbiAgICAgICAgLy8gT25seSBzaG93IGEgZGVueVx1MjAxMGxpc3RlZCBlbnRyeSBpZiBpdCB3b3VsZCBvdGhlcndpc2UgYmUgY3JlYXRlZCBvciBvdmVyd3JpdHRlblxuICAgICAgICBpZiAoIWV4aXN0cyB8fCAhdXBUb0RhdGUpIHtcbiAgICAgICAgICBjaGFuZ2VzLnB1c2goYFx1Mjc0QyBkZW55XHUyMDEwbGlzdGVkIFx1MjAxMyB3aWxsIG5vdCB1cGRhdGU6ICR7dnB9YCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyAyKSBGVUxMXHUyMDEwU1lOQyBtb2RlIChza2lwIGFueSBmaWxlL2ZvbGRlciB0aGF0XHUyMDE5cyBibGFja2xpc3RlZClcbiAgICBpZiAoIXRoaXMuc2V0dGluZ3MuY3VzdG9taXplVXBkYXRlcykge1xuICAgICAgZm9yIChjb25zdCBmIG9mIHRoaXMubWFuaWZlc3RDYWNoZS5maWxlcykge1xuICAgICAgICAvLyBcdTI1MDBcdTI1MDAgU0tJUCBhbnkgb3B0aW9uYWw6dHJ1ZSBmaWxlXG4gICAgICAgIGlmIChmLm9wdGlvbmFsKSB7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBjdXN0b20gPSB0aGlzLnNldHRpbmdzLmN1c3RvbVBhdGhzLmZpbmQoKGMpID0+IGMubWFuaWZlc3RLZXkgPT09IGYua2V5KTtcbiAgICAgICAgY29uc3QgaXNJbkRlbnlGb2xkZXIgPSBkZW55TGlzdGVkRm9sZGVycy5zb21lKChmb2xkZXIpID0+XG4gICAgICAgICAgZi5wYXRoLnN0YXJ0c1dpdGgoZm9sZGVyICsgJy8nKVxuICAgICAgICApO1xuICAgICAgICBpZiAoY3VzdG9tPy5kb1VwZGF0ZSA9PT0gZmFsc2UgfHwgaXNJbkRlbnlGb2xkZXIpIHtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHZwID0gdGhpcy5yZXNvbHZlVmF1bHRQYXRoKGYucGF0aCk7XG4gICAgICAgIGxldCB0YWcgPSAnJztcbiAgICAgICAgaWYgKHZwICE9PSBmLnBhdGgpIHRhZyA9ICcgKHJlbWFwcGVkKSc7XG5cbiAgICAgICAgY29uc3QgZXhpc3RzID0gYXdhaXQgdGhpcy5hcHAudmF1bHQuYWRhcHRlci5leGlzdHModnApO1xuICAgICAgICBjb25zdCB1cFRvRGF0ZSA9IGV4aXN0cyAmJiAoYXdhaXQgdGhpcy5maWxlQ2FjaGVNYW5hZ2VyLmlzVXBUb0RhdGUodnApKTtcblxuICAgICAgICBpZiAoIWV4aXN0cykge1xuICAgICAgICAgIGNoYW5nZXMucHVzaChgXHVEODNEXHVEQ0M0IE5ldyBmaWxlOiAke3ZwfSR7dGFnfWApO1xuICAgICAgICB9IGVsc2UgaWYgKCF1cFRvRGF0ZSkge1xuICAgICAgICAgIGNoYW5nZXMucHVzaChgXHVEODNEXHVERDAxIFdpbGwgdXBkYXRlOiAke3ZwfSR7dGFnfWApO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGZvciAoY29uc3QgZmxkIG9mIHRoaXMubWFuaWZlc3RDYWNoZS5mb2xkZXJzKSB7XG4gICAgICAgIC8vIFx1MjUwMFx1MjUwMCBTS0lQIGFueSBvcHRpb25hbDp0cnVlIGZvbGRlclxuICAgICAgICBpZiAoZmxkLm9wdGlvbmFsKSB7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBpc0RlbnlGb2xkZXIgPSBkZW55TGlzdGVkRm9sZGVycy5pbmNsdWRlcyhmbGQucGF0aCk7XG4gICAgICAgIGNvbnN0IGV4aXN0cyA9IGF3YWl0IHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXIuZXhpc3RzKGZsZC5wYXRoKTtcbiAgICAgICAgaWYgKCFleGlzdHMgJiYgIWlzRGVueUZvbGRlcikge1xuICAgICAgICAgIGNoYW5nZXMucHVzaChgXHVEODNEXHVEQ0MxIE5ldyBmb2xkZXI6ICR7ZmxkLnBhdGh9YCk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGNoYW5nZXMubGVuZ3RoID8gY2hhbmdlcyA6IFsnXHUyNzA1IEV2ZXJ5dGhpbmcgaXMgYWxyZWFkeSB1cCB0byBkYXRlISddO1xuICAgIH1cblxuICAgIC8vIDMpIENVU1RPTVx1MjAxMFNZTkMgbW9kZSAoc2tpcCBhbnkgZmlsZS9mb2xkZXIgdGhhdFx1MjAxOXMgYmxhY2tsaXN0ZWQpXG4gICAgZm9yIChjb25zdCBmIG9mIHRoaXMubWFuaWZlc3RDYWNoZS5maWxlcykge1xuICAgICAgLy8gXHUyNTAwXHUyNTAwIFNLSVAgYW55IG9wdGlvbmFsOnRydWUgZmlsZVxuICAgICAgaWYgKGYub3B0aW9uYWwpIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGN1c3RvbSA9IHRoaXMuc2V0dGluZ3MuY3VzdG9tUGF0aHMuZmluZCgoYykgPT4gYy5tYW5pZmVzdEtleSA9PT0gZi5wYXRoKTtcbiAgICAgIGNvbnN0IGlzSW5EZW55Rm9sZGVyID0gZGVueUxpc3RlZEZvbGRlcnMuc29tZSgoZm9sZGVyKSA9PlxuICAgICAgICBmLnBhdGguc3RhcnRzV2l0aChmb2xkZXIgKyAnLycpXG4gICAgICApO1xuICAgICAgaWYgKGN1c3RvbT8uZG9VcGRhdGUgPT09IGZhbHNlIHx8IGlzSW5EZW55Rm9sZGVyKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICBjb25zdCB2cCA9IGN1c3RvbT8udmF1bHRQYXRoID8/IHRoaXMucmVzb2x2ZVZhdWx0UGF0aChmLnBhdGgpO1xuICAgICAgbGV0IHRhZyA9ICcnO1xuICAgICAgaWYgKHZwICE9PSBmLnBhdGgpIHRhZyA9ICcgKHJlbWFwcGVkKSc7XG5cbiAgICAgIGNvbnN0IGV4aXN0cyA9IGF3YWl0IHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXIuZXhpc3RzKHZwKTtcbiAgICAgIGNvbnN0IHVwVG9EYXRlID0gZXhpc3RzICYmIChhd2FpdCB0aGlzLmZpbGVDYWNoZU1hbmFnZXIuaXNVcFRvRGF0ZSh2cCkpO1xuXG4gICAgICBpZiAoIWV4aXN0cykge1xuICAgICAgICBjaGFuZ2VzLnB1c2goYFx1RDgzRFx1RENDNCBOZXcgZmlsZTogJHt2cH0ke3RhZ31gKTtcbiAgICAgIH0gZWxzZSBpZiAoIXVwVG9EYXRlKSB7XG4gICAgICAgIGNoYW5nZXMucHVzaChgXHVEODNEXHVERDAxIFdpbGwgdXBkYXRlOiAke3ZwfSR7dGFnfWApO1xuICAgICAgfVxuICAgIH1cblxuICAgIGZvciAoY29uc3QgZmxkIG9mIHRoaXMubWFuaWZlc3RDYWNoZS5mb2xkZXJzKSB7XG4gICAgICAvLyBcdTI1MDBcdTI1MDAgU0tJUCBhbnkgb3B0aW9uYWw6dHJ1ZSBmb2xkZXJcbiAgICAgIGlmIChmbGQub3B0aW9uYWwpIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGlzRGVueUZvbGRlciA9IGRlbnlMaXN0ZWRGb2xkZXJzLmluY2x1ZGVzKGZsZC5wYXRoKTtcbiAgICAgIGNvbnN0IGV4aXN0cyA9IGF3YWl0IHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXIuZXhpc3RzKGZsZC5wYXRoKTtcbiAgICAgIGlmICghZXhpc3RzICYmICFpc0RlbnlGb2xkZXIpIHtcbiAgICAgICAgY2hhbmdlcy5wdXNoKGBcdUQ4M0RcdURDQzEgTmV3IGZvbGRlcjogJHtmbGQucGF0aH1gKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyAzYykgXHUyMDFDTW92ZWRcdTIwMUQgZGV0ZWN0aW9uIChza2lwIGJsYWNrbGlzdGVkKVxuICAgIGZvciAoY29uc3QgZiBvZiB0aGlzLm1hbmlmZXN0Q2FjaGUuZmlsZXMpIHtcbiAgICAgIC8vIFx1MjUwMFx1MjUwMCBTS0lQIGFueSBvcHRpb25hbDp0cnVlIGZpbGVcbiAgICAgIGlmIChmLm9wdGlvbmFsKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBtYW5pZmVzdEtleSA9IGYua2V5O1xuICAgICAgY29uc3QgbWFuaWZlc3RQYXRoID0gZi5wYXRoO1xuICAgICAgY29uc3QgY3VzdG9tID0gdGhpcy5zZXR0aW5ncy5jdXN0b21QYXRocy5maW5kKChjKSA9PiBjLm1hbmlmZXN0S2V5ID09PSBtYW5pZmVzdEtleSk7XG4gICAgICBjb25zdCBwcmV2UGF0aCA9IHRoaXMub2xkUGF0aHNCeUdpdGh1YlttYW5pZmVzdFBhdGhdO1xuXG4gICAgICBjb25zdCBpc0luRGVueUZvbGRlciA9IGRlbnlMaXN0ZWRGb2xkZXJzLnNvbWUoKGZvbGRlcikgPT5cbiAgICAgICAgbWFuaWZlc3RQYXRoLnN0YXJ0c1dpdGgoZm9sZGVyICsgJy8nKVxuICAgICAgKTtcbiAgICAgIGlmIChjdXN0b20/LmRvVXBkYXRlID09PSBmYWxzZSB8fCBpc0luRGVueUZvbGRlcikge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICAgIGlmIChjdXN0b20gJiYgY3VzdG9tLnZhdWx0UGF0aCAmJiBjdXN0b20udmF1bHRQYXRoICE9PSBtYW5pZmVzdFBhdGgpIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgICBpZiAoXG4gICAgICAgIHByZXZQYXRoICYmXG4gICAgICAgIHByZXZQYXRoICE9PSBtYW5pZmVzdFBhdGggJiZcbiAgICAgICAgKCFjdXN0b20gfHwgY3VzdG9tLnZhdWx0UGF0aCA9PT0gbWFuaWZlc3RQYXRoKVxuICAgICAgKSB7XG4gICAgICAgIGNoYW5nZXMucHVzaChgXHUyN0ExXHVGRTBGIE1vdmVkOiAke3ByZXZQYXRofSBcdTIxOTIgJHttYW5pZmVzdFBhdGh9YCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGNoYW5nZXMubGVuZ3RoID8gY2hhbmdlcyA6IFsnXHUyNzA1IEV2ZXJ5dGhpbmcgaXMgYWxyZWFkeSB1cCB0byBkYXRlISddO1xuICB9XG5cblxuXG4gIC8vIFx1MjUwMFx1MjUwMFx1MjUwMCBWRVJTSU9OLUNIRUNLIC8gVVBEQVRFIEZMT1cgXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXG5cbiAgYXN5bmMgY2hlY2tGb3JVcGRhdGVzKCk6IFByb21pc2U8dm9pZD4ge1xuICAgIGNvbnN0IGlzTmV3ZXJWZXJzaW9uID0gKHJlbW90ZTogc3RyaW5nLCBsb2NhbDogc3RyaW5nKTogYm9vbGVhbiA9PiB7XG4gICAgICBjb25zdCBwYSA9IHJlbW90ZVxuICAgICAgICAucmVwbGFjZSgvXnYvLCAnJylcbiAgICAgICAgLnNwbGl0KCcuJylcbiAgICAgICAgLm1hcCgobikgPT4gcGFyc2VJbnQobiwgMTApIHx8IDApO1xuICAgICAgY29uc3QgcGIgPSBsb2NhbFxuICAgICAgICAucmVwbGFjZSgvXnYvLCAnJylcbiAgICAgICAgLnNwbGl0KCcuJylcbiAgICAgICAgLm1hcCgobikgPT4gcGFyc2VJbnQobiwgMTApIHx8IDApO1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBNYXRoLm1heChwYS5sZW5ndGgsIHBiLmxlbmd0aCk7IGkrKykge1xuICAgICAgICBpZiAoKHBhW2ldIHx8IDApID4gKHBiW2ldIHx8IDApKSByZXR1cm4gdHJ1ZTtcbiAgICAgICAgaWYgKChwYVtpXSB8fCAwKSA8IChwYltpXSB8fCAwKSkgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH07XG5cbiAgICBjb25zdCB0b29sa2l0UGF0aCA9ICcudmVyc2lvbi5qc29uJztcbiAgICBjb25zdCB0b29sa2l0VXJsID1cbiAgICAgICdodHRwczovL3Jhdy5naXRodWJ1c2VyY29udGVudC5jb20vc2xhbXdpc2UwMDAxL3Z2dW5kZXJsb3JlLXRvb2xraXQtZnVsbC9tYWluLy52ZXJzaW9uLmpzb24nO1xuICAgIGNvbnN0IHBsdWdpblVybCA9XG4gICAgICAnaHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tL3NsYW13aXNlMDAwMS92dnVuZGVybG9yZS10b29sa2l0LXBsdWdpbi9tYWluL3ZlcnNpb24uanNvbic7XG4gICAgY29uc3QgY2hhbmdlbG9nVXJsID1cbiAgICAgICdodHRwczovL3Jhdy5naXRodWJ1c2VyY29udGVudC5jb20vc2xhbXdpc2UwMDAxL1ZWdW5kZXJsb3JlLVRvb2xraXQtRnVsbC9tYWluL1JFQURNRS5tZCc7XG5cbiAgICAvLyAxKSBSZWFkIGxvY2FsIHRvb2xraXQgdmVyc2lvblxuICAgIGxldCBsb2NhbFRLID0gJzAuMC4wJztcbiAgICBpZiAodGhpcy5zZXR0aW5ncy5pc0ZpcnN0UnVuICE9PSBcInllc1wiKSB7XG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCBjb250ZW50ID0gYXdhaXQgdGhpcy5hcHAudmF1bHQuYWRhcHRlci5yZWFkKHRvb2xraXRQYXRoKTtcbiAgICAgICAgY29uc3QganNvbiA9IEpTT04ucGFyc2UoY29udGVudCk7XG4gICAgICAgIGxvY2FsVEsgPSBqc29uLnZlcnNpb24gfHwgbG9jYWxUSztcbiAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdcdTI3NEMgRmFpbGVkIHRvIHJlYWQgbG9jYWwgdG9vbGtpdCB2ZXJzaW9uOicsIGVycik7XG4gICAgICB9XG4gICAgfVxuICAgIC8vIDIpIEZldGNoIHJlbW90ZSB0b29sa2l0IHZlcnNpb24gJiBkZWZhdWx0c1xuICAgIGxldCByZW1vdGVUSyA9ICcwLjAuMCc7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IGZldGNoKHRvb2xraXRVcmwpO1xuICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlcy5qc29uKCk7XG4gICAgICByZW1vdGVUSyA9IGRhdGEudmVyc2lvbiB8fCByZW1vdGVUSztcblxuICAgICAgdGhpcy5zZXR0aW5ncy5sYXRlc3RUb29sa2l0VmVyc2lvbiA9IHJlbW90ZVRLO1xuICAgICAgaWYgKGRhdGEuZGVmYXVsdFBhdGhzKSB7XG4gICAgICAgIHRoaXMuc2V0dGluZ3MubGF0ZXN0RGVmYXVsdHMgPSBkYXRhLmRlZmF1bHRQYXRocztcbiAgICAgIH1cbiAgICAgIHRoaXMuc2V0dGluZ3MubGFzdENoZWNrZWQgPSBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCk7XG4gICAgICBhd2FpdCB0aGlzLnNhdmVTZXR0aW5ncygpO1xuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgY29uc29sZS5lcnJvcignXHUyNzRDIEZhaWxlZCB0byBmZXRjaCByZW1vdGUgdG9vbGtpdCB2ZXJzaW9uOicsIGVycik7XG4gICAgfVxuXG4gICAgaWYgKGlzTmV3ZXJWZXJzaW9uKHJlbW90ZVRLLCBsb2NhbFRLKSkge1xuICAgICAgbmV3IE5vdGljZShgXHUyNkEwXHVGRTBGIFRvb2xraXQgdXBkYXRlIGF2YWlsYWJsZSEgTGF0ZXN0OiB2JHtyZW1vdGVUS31gKTtcbiAgICAgIGF3YWl0IHRoaXMuZmV0Y2hSZW1vdGVCYXNlbGluZSgpO1xuICAgIH1cblxuICAgIC8vIDQpIFJlYWQgbG9jYWwgcGx1Z2luIHZlcnNpb25cbiAgICBjb25zdCBsb2NhbFBMID0gdGhpcy5tYW5pZmVzdC52ZXJzaW9uO1xuXG4gICAgLy8gNSkgRmV0Y2ggcmVtb3RlIHBsdWdpbiB2ZXJzaW9uICYgY29tcGFyZVxuICAgIGxldCByZW1vdGVQTCA9IGxvY2FsUEw7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IGZldGNoKHBsdWdpblVybCk7XG4gICAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzLmpzb24oKTtcbiAgICAgIHJlbW90ZVBMID0gZGF0YS52ZXJzaW9uIHx8IHJlbW90ZVBMO1xuICAgIH0gY2F0Y2ggKGVycikge1xuICAgIH1cblxuICAgIGlmIChpc05ld2VyVmVyc2lvbihyZW1vdGVQTCwgbG9jYWxQTCkpIHtcbiAgICAgIG5ldyBOb3RpY2UoYFx1MjY5OVx1RkUwRiBQbHVnaW4gdXBkYXRlIGF2YWlsYWJsZSEgTGF0ZXN0OiB2JHtyZW1vdGVQTH1gKTtcbiAgICB9XG5cbiAgICAvLyA2KSBGZXRjaCBjaGFuZ2Vsb2cgZm9yIFVJIGRpc3BsYXlcbiAgICB0cnkge1xuICAgICAgY29uc3QgY2hhbmdlbG9nUmVzID0gYXdhaXQgZmV0Y2goY2hhbmdlbG9nVXJsKTtcbiAgICAgIHRoaXMuY2hhbmdlbG9nID0gYXdhaXQgY2hhbmdlbG9nUmVzLnRleHQoKTtcbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ1x1Mjc0QyBGYWlsZWQgdG8gZmV0Y2ggY2hhbmdlbG9nOicsIGVycik7XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgbG9hZFNldHRpbmdzKCkge1xuICAgIC8vIDEpIGdyYWIgd2hhdGV2ZXJcdTIwMTlzIG9uIGRpc2sgKG1pZ2h0IGJlIG51bGwpXG4gICAgY29uc3QgcmF3ID0gKGF3YWl0IHRoaXMubG9hZERhdGEoKSkgYXMgUGFydGlhbDxUb29sa2l0U2V0dGluZ3M+IHwgbnVsbDtcbiAgICBjb25zdCBjbGVhbmVkID0gcmF3ID8/IHt9O1xuXG4gICAgLy8gMikgZHJvcCB0aGUgb2xkIG5lZWRzSW5zdGFsbCBmbGFnXG4gICAgaWYgKChjbGVhbmVkIGFzIGFueSkubmVlZHNJbnN0YWxsICE9IG51bGwpIHtcbiAgICAgIGRlbGV0ZSAoY2xlYW5lZCBhcyBhbnkpLm5lZWRzSW5zdGFsbDtcbiAgICB9XG5cbiAgICAvLyAzKSBtZXJnZSBkZWZhdWx0cyArIGNsZWFuZWQgZGF0YVxuICAgIHRoaXMuc2V0dGluZ3MgPSBPYmplY3QuYXNzaWduKHt9LCBERUZBVUxUX1NFVFRJTkdTLCBjbGVhbmVkKTtcbiAgICBpZiAodHlwZW9mIChjbGVhbmVkIGFzIGFueSkucHJlZmVyTmFtZVdoZW5Cb3RoID09PSBcImJvb2xlYW5cIikge1xuICAgICAgdGhpcy5zZXR0aW5ncy5zZXNzaW9uVGl0bGVQcmVmZXJlbmNlID1cbiAgICAgICAgKGNsZWFuZWQgYXMgYW55KS5wcmVmZXJOYW1lV2hlbkJvdGggPyBcIm5hbWVcIiA6IFwiZGF0ZVwiO1xuICAgICAgZGVsZXRlICh0aGlzLnNldHRpbmdzIGFzIGFueSkucHJlZmVyTmFtZVdoZW5Cb3RoO1xuICAgIH07XG5cbiAgICAvLyA0KSBmaWd1cmUgb3V0IHdoZXRoZXIgd2VcdTIwMTlyZSBmaXJzdC1ydW5cbiAgICB0aGlzLmlzRmlyc3RSdW4gPSAhKGF3YWl0IHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXIuZXhpc3RzKCcudnZ1bmRlcmxvcmVfaW5zdGFsbGVkJykpO1xuXG4gICAgLy8gNSkgc2V0IHVwIGNhY2hlTWFuYWdlciBzbyBzYXZlU2V0dGluZ3MoKSBjYW4gc2FmZWx5IHVzZSAuZ2V0Q2FjaGUoKVxuICAgIHRoaXMuZmlsZUNhY2hlTWFuYWdlciA9IG5ldyBUb29sa2l0RmlsZUNhY2hlTWFuYWdlcihcbiAgICAgIHRoaXMuYXBwLnZhdWx0LFxuICAgICAgY2xlYW5lZC5maWxlQ2FjaGUgPz8ge30sXG4gICAgICBhc3luYyAoKSA9PiBhd2FpdCB0aGlzLnNhdmVTZXR0aW5ncygpXG4gICAgKTtcblxuICAgIC8vIDYpIG5vdyBwZXJzaXN0IHRoZSBcdTIwMUNjbGVhbmVkXHUyMDFEIHNldHRpbmdzIGJhY2sgdG8gZGlzayBleGFjdGx5IG9uY2VcbiAgICBhd2FpdCB0aGlzLnNhdmVTZXR0aW5ncygpO1xuXG4gICAgLy8gNykgYmFjay1maWxsIGFueSBicmFuZC1uZXcgZmllbGRzXG4gICAgaWYgKHR5cGVvZiB0aGlzLnNldHRpbmdzLnJ1bGVzZXRDb21wZW5kaXVtICE9PSAnc3RyaW5nJykge1xuICAgICAgdGhpcy5zZXR0aW5ncy5ydWxlc2V0Q29tcGVuZGl1bSA9ICcnO1xuICAgIH1cbiAgICBpZiAoIUFycmF5LmlzQXJyYXkodGhpcy5zZXR0aW5ncy5ydWxlc2V0UmVmZXJlbmNlKSkge1xuICAgICAgdGhpcy5zZXR0aW5ncy5ydWxlc2V0UmVmZXJlbmNlID0gW107XG4gICAgfVxuICB9XG5cblxuXG4gIGFzeW5jIHNhdmVTZXR0aW5ncygpIHtcbiAgICBhd2FpdCB0aGlzLnNhdmVEYXRhKHtcbiAgICAgIC4uLnRoaXMuc2V0dGluZ3MsXG4gICAgICBmaWxlQ2FjaGU6IHRoaXMuZmlsZUNhY2hlTWFuYWdlci5nZXRDYWNoZSgpLFxuICAgIH0pO1xuICB9XG5cbiAgYXN5bmMgZ2V0TG9jYWxUb29sa2l0VmVyc2lvbigpOiBQcm9taXNlPHN0cmluZyB8IG51bGw+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgY29udGVudCA9IGF3YWl0IHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXIucmVhZCgnLnZlcnNpb24uanNvbicpO1xuICAgICAgY29uc3QganNvbiA9IEpTT04ucGFyc2UoY29udGVudCk7XG4gICAgICByZXR1cm4ganNvbi52ZXJzaW9uIHx8IG51bGw7XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdcdTI3NEMgRmFpbGVkIHRvIHJlYWQgLnZlcnNpb24uanNvbjonLCBlcnIpO1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgdXBkYXRlRnVsbFRvb2xraXRSZXBvKCk6IFByb21pc2U8dm9pZD4ge1xuICAgIGNvbnN0IGV4Y2x1ZGVkID0gW1xuICAgICAgdGhpcy5hcHAudmF1bHQuY29uZmlnRGlyLFxuICAgICAgJy5naXRpZ25vcmUnLFxuICAgICAgJy5naXRhdHRyaWJ1dGVzJyxcbiAgICAgICcuRFNfU3RvcmUnLFxuICAgICAgJ3BsdWdpbnMnLFxuICAgICAgJ0NvbXBlbmRpdW0nLFxuICAgICAgJ1JFQURNRS5tZCcsXG4gICAgICAnLnZlcnNpb24uanNvbicsXG4gICAgICAnLmdpdGh1YidcbiAgICBdO1xuXG4gICAgY29uc3QgZmV0Y2hSZXBvUm9vdCA9IGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGFwaVVybCA9XG4gICAgICAgICdodHRwczovL2FwaS5naXRodWIuY29tL3JlcG9zL3NsYW13aXNlMDAwMS9WVnVuZGVybG9yZS1Ub29sa2l0LUZ1bGwvY29udGVudHMvJztcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goYXBpVXJsKTtcbiAgICAgIGlmICghcmVzcG9uc2Uub2spIHRocm93IG5ldyBFcnJvcihgRmFpbGVkIHRvIGZldGNoIHJlcG8gcm9vdGApO1xuICAgICAgcmV0dXJuIGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgICB9O1xuXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGNvbnRlbnRzID0gYXdhaXQgZmV0Y2hSZXBvUm9vdCgpO1xuICAgICAgLy8gZmlsdGVyIG91dCBleGNsdWRlZCB0b3AtbGV2ZWwgaXRlbXNcbiAgICAgIGNvbnN0IGZpbHRlcmVkID0gY29udGVudHMuZmlsdGVyKFxuICAgICAgICAoaXRlbTogYW55KSA9PlxuICAgICAgICAgICFleGNsdWRlZC5zb21lKFxuICAgICAgICAgICAgKGV4KSA9PlxuICAgICAgICAgICAgICBpdGVtLnBhdGggPT09IGV4IHx8XG4gICAgICAgICAgICAgIGl0ZW0ucGF0aC5zdGFydHNXaXRoKGAke2V4fS9gKVxuICAgICAgICAgIClcbiAgICAgICk7XG5cbiAgICAgIC8vIFNvcnQgc28gXHUyMDFDdHJlZVx1MjAxRCAoZm9sZGVycykgY29tZSBiZWZvcmUgXHUyMDFDYmxvYlx1MjAxRCAoZmlsZXMpXG4gICAgICBmaWx0ZXJlZC5zb3J0KChhOiBhbnksIGI6IGFueSkgPT4gKGEudHlwZSA9PT0gYi50eXBlID8gMCA6IGEudHlwZSA9PT0gJ3RyZWUnID8gLTEgOiAxKSk7XG5cbiAgICAgIGZvciAoY29uc3QgaXRlbSBvZiBmaWx0ZXJlZCkge1xuICAgICAgICBpZiAoaXRlbS50eXBlID09PSAnZGlyJykge1xuICAgICAgICAgIGF3YWl0IHRoaXMudXBkYXRlRm9sZGVyRnJvbUdpdEh1YihpdGVtLnBhdGgsIGl0ZW0ucGF0aCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGl0ZW0udHlwZSA9PT0gJ2ZpbGUnKSB7XG4gICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChpdGVtLmRvd25sb2FkX3VybCk7XG4gICAgICAgICAgY29uc3QgY29udGVudCA9IGF3YWl0IHJlc3BvbnNlLnRleHQoKTtcbiAgICAgICAgICBjb25zdCBmaWxlUGF0aCA9IGl0ZW0ucGF0aDtcbiAgICAgICAgICBjb25zdCBleGlzdHMgPSBhd2FpdCB0aGlzLmFwcC52YXVsdC5hZGFwdGVyLmV4aXN0cyhmaWxlUGF0aCk7XG4gICAgICAgICAgaWYgKCFleGlzdHMpIHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuYXBwLnZhdWx0LmNyZWF0ZShmaWxlUGF0aCwgY29udGVudCk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IGN1cnJlbnQgPSBhd2FpdCB0aGlzLmFwcC52YXVsdC5hZGFwdGVyLnJlYWQoZmlsZVBhdGgpO1xuICAgICAgICAgICAgaWYgKGN1cnJlbnQgIT09IGNvbnRlbnQpIHtcbiAgICAgICAgICAgICAgYXdhaXQgdGhpcy5hcHAudmF1bHQuYWRhcHRlci53cml0ZShmaWxlUGF0aCwgY29udGVudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGF3YWl0IHRoaXMuZmlsZUNhY2hlTWFuYWdlci51cGRhdGVDYWNoZShmaWxlUGF0aCwgY29udGVudCwgaXRlbS5wYXRoLCBmYWxzZSk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgYXdhaXQgdGhpcy5zYXZlU2V0dGluZ3MoKTtcblxuICAgICAgY29uc3QgbWFya2VyUGF0aCA9ICcudnZ1bmRlcmxvcmVfaW5zdGFsbGVkJztcbiAgICAgIGlmICghKGF3YWl0IHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXIuZXhpc3RzKG1hcmtlclBhdGgpKSkge1xuICAgICAgICBhd2FpdCB0aGlzLmFwcC52YXVsdC5jcmVhdGUobWFya2VyUGF0aCwgJycpO1xuICAgICAgfVxuXG4gICAgICBpZiAodGhpcy5zZXR0aW5ncy5oaWdobGlnaHRFbmFibGVkKSB7XG4gICAgICAgIHRoaXMuZW5hYmxlSGlnaGxpZ2h0KCk7XG4gICAgICB9XG5cbiAgICAgIHRyeSB7XG4gICAgICAgIGF3YWl0IHVwZGF0ZU1vZGFsRm9ybXNGcm9tUmVwbyh0aGlzLmFwcCk7XG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGNvbnNvbGUud2FybignTW9kYWwgRm9ybXMgdXBkYXRlciAoZnVsbCByZXBvKSBmYWlsZWQ6JywgZSk7XG4gICAgICB9XG5cbiAgICAgIG5ldyBOb3RpY2UoJ1x1MjcwNSBWVnVuZGVybG9yZSBUb29sa2l0IHN1Y2Nlc3NmdWxseSBpbnN0YWxsZWQhJyk7XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdcdTI3NEMgdXBkYXRlRnVsbFRvb2xraXRSZXBvKCkgZXJyb3I6JywgZXJyKTtcbiAgICAgIG5ldyBOb3RpY2UoJ1x1Mjc0QyBGYWlsZWQgdG8gdXBkYXRlIHRvb2xraXQuIFNlZSBjb25zb2xlIGZvciBkZXRhaWxzLicpO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIHVwZGF0ZVNlbGVjdGVkVG9vbGtpdENvbnRlbnQoKSB7XG4gICAgaWYgKHRoaXMuc2V0dGluZ3MuYXV0b0JhY2t1cEJlZm9yZVVwZGF0ZSkge1xuICAgICAgY29uc3QgZm9sZGVyID0gYXdhaXQgdGhpcy5iYWNrdXBNYW5hZ2VyLmJhY2t1cFZhdWx0TWlycm9yKCdwcmUtdXBkYXRlJyk7XG4gICAgICBuZXcgTm90aWNlKGBWYXVsdCBtaXJyb3IgYmFja3VwIGNyZWF0ZWQgYXQ6ICR7Zm9sZGVyfWApO1xuICAgIH1cblxuICAgIGlmICghdGhpcy5zZXR0aW5ncy5sYXRlc3REZWZhdWx0cykge1xuICAgICAgbmV3IE5vdGljZSgnXHUyNzRDIEdpdEh1YiBkZWZhdWx0cyBub3QgbG9hZGVkIHlldC4nKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBhbGxNYW5pZmVzdEZpbGVzID0gdGhpcy5tYW5pZmVzdENhY2hlLmZpbGVzLm1hcCgoZikgPT4gZi5wYXRoKTtcbiAgICBjb25zdCBmaWxlT3ZlcnJpZGVzID0gT2JqZWN0LmZyb21FbnRyaWVzKFxuICAgICAgdGhpcy5zZXR0aW5ncy5jdXN0b21QYXRocy5tYXAoKGMpID0+IFtjLm1hbmlmZXN0S2V5LCBjXSlcbiAgICApO1xuXG4gICAgdHJ5IHtcbiAgICAgIGZvciAoY29uc3QgZ2hQYXRoIG9mIGFsbE1hbmlmZXN0RmlsZXMpIHtcbiAgICAgICAgY29uc3Qgb3ZlcnJpZGUgPSBmaWxlT3ZlcnJpZGVzW2doUGF0aF07XG4gICAgICAgIGlmIChvdmVycmlkZT8uZG9VcGRhdGUgPT09IGZhbHNlKSB7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCB2YXVsdFBhdGggPSB0aGlzLnNldHRpbmdzLmN1c3RvbWl6ZVVwZGF0ZXNcbiAgICAgICAgICA/IHRoaXMucmVzb2x2ZVZhdWx0UGF0aChnaFBhdGgpXG4gICAgICAgICAgOiBnaFBhdGg7XG5cbiAgICAgICAgY29uc3QgZW50cnkgPSB0aGlzLm1hbmlmZXN0Q2FjaGUuZmlsZXMuZmluZCgoZikgPT4gZi5wYXRoID09PSBnaFBhdGgpO1xuICAgICAgICBpZiAoIWVudHJ5KSBjb250aW51ZTtcbiAgICAgICAgYXdhaXQgdGhpcy51cGRhdGVFbnRyeUZyb21NYW5pZmVzdChlbnRyeSwgZmFsc2UpO1xuICAgICAgfVxuXG4gICAgICBmb3IgKGNvbnN0IGZvbGRlciBvZiB0aGlzLm1hbmlmZXN0Q2FjaGUuZm9sZGVycykge1xuICAgICAgICBpZiAoIShhd2FpdCB0aGlzLmFwcC52YXVsdC5hZGFwdGVyLmV4aXN0cyhmb2xkZXIucGF0aCkpKSB7XG4gICAgICAgICAgYXdhaXQgdGhpcy5hcHAudmF1bHQuY3JlYXRlRm9sZGVyKGZvbGRlci5wYXRoKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICB0cnkge1xuICAgICAgICBhd2FpdCB1cGRhdGVNb2RhbEZvcm1zRnJvbVJlcG8odGhpcy5hcHApO1xuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBjb25zb2xlLndhcm4oJ01vZGFsIEZvcm1zIHVwZGF0ZXIgKHNlbGVjdGVkIGNvbnRlbnQpIGZhaWxlZDonLCBlKTtcbiAgICAgIH1cblxuICAgICAgYXdhaXQgdGhpcy51cGRhdGVWZXJzaW9uRmlsZSgpO1xuICAgICAgdGhpcy5zZXR0aW5ncy5pbnN0YWxsZWRWZXJzaW9uID0gdGhpcy5zZXR0aW5ncy5sYXRlc3RUb29sa2l0VmVyc2lvbiE7XG4gICAgICBhd2FpdCB0aGlzLnNhdmVTZXR0aW5ncygpO1xuICAgICAgbmV3IE5vdGljZSgnXHUyNzA1IFRvb2xraXQgY29udGVudCB1cGRhdGVkLicpO1xuXG4gICAgICBpZiAodGhpcy5zZXR0aW5nc1RhYikge1xuICAgICAgICBhd2FpdCB0aGlzLnNldHRpbmdzVGFiLnVwZGF0ZVZlcnNpb25EaXNwbGF5KCk7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdcdTI3NEMgQ3VzdG9tIHVwZGF0ZSBmYWlsZWQuIFZlcnNpb24gbm90IHVwZGF0ZWQuJywgZXJyKTtcbiAgICAgIG5ldyBOb3RpY2UoJ1x1Mjc0QyBVcGRhdGUgZmFpbGVkLiBTZWUgY29uc29sZSBmb3IgZGV0YWlscy4nKTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5zZXR0aW5ncy5oaWdobGlnaHRFbmFibGVkKSB7XG4gICAgICB0aGlzLmVuYWJsZUhpZ2hsaWdodCgpO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIHVwZGF0ZUZvbGRlckZyb21HaXRIdWIoZ2l0aHViRm9sZGVyUGF0aDogc3RyaW5nLCB2YXVsdEZvbGRlclBhdGg6IHN0cmluZykge1xuICAgIGNvbnN0IGV4Y2x1ZGVkID0gW1xuICAgICAgdGhpcy5hcHAudmF1bHQuY29uZmlnRGlyLFxuICAgICAgJy5naXRpZ25vcmUnLFxuICAgICAgJy5naXRhdHRyaWJ1dGVzJyxcbiAgICAgICcuRFNfU3RvcmUnLFxuICAgICAgJ3BsdWdpbnMnLFxuICAgICAgJ0NvbXBlbmRpdW0nLFxuICAgICAgJ1JFQURNRS5tZCcsXG4gICAgICAnLnZlcnNpb24uanNvbicsXG4gICAgICAnLmdpdGh1YidcbiAgICBdO1xuICAgIGlmIChleGNsdWRlZC5zb21lKChleCkgPT4gZ2l0aHViRm9sZGVyUGF0aCA9PT0gZXggfHwgZ2l0aHViRm9sZGVyUGF0aC5zdGFydHNXaXRoKGAke2V4fS9gKSkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3QgYXBpVXJsID0gYGh0dHBzOi8vYXBpLmdpdGh1Yi5jb20vcmVwb3Mvc2xhbXdpc2UwMDAxL1ZWdW5kZXJsb3JlLVRvb2xraXQtRnVsbC9jb250ZW50cy8ke2dpdGh1YkZvbGRlclBhdGh9YDtcbiAgICB0cnkge1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChhcGlVcmwpO1xuICAgICAgaWYgKCFyZXNwb25zZS5vaykgdGhyb3cgbmV3IEVycm9yKGBGYWlsZWQgdG8gZmV0Y2ggZm9sZGVyOiAke2dpdGh1YkZvbGRlclBhdGh9YCk7XG4gICAgICBjb25zdCBmaWxlcyA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgICAgIGlmICghKGF3YWl0IHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXIuZXhpc3RzKHZhdWx0Rm9sZGVyUGF0aCkpKSB7XG4gICAgICAgIGF3YWl0IHRoaXMuYXBwLnZhdWx0LmNyZWF0ZUZvbGRlcih2YXVsdEZvbGRlclBhdGgpO1xuICAgICAgfVxuICAgICAgZm9yIChjb25zdCBmaWxlIG9mIGZpbGVzKSB7XG4gICAgICAgIGlmIChleGNsdWRlZC5zb21lKChleCkgPT4gZmlsZS5wYXRoID09PSBleCB8fCBmaWxlLnBhdGguc3RhcnRzV2l0aChgJHtleH0vYCkpKSB7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgZmlsZVBhdGggPSBgJHt2YXVsdEZvbGRlclBhdGh9LyR7ZmlsZS5uYW1lfWA7XG4gICAgICAgIGlmIChmaWxlLnR5cGUgPT09ICdmaWxlJykge1xuICAgICAgICAgIGNvbnN0IGZpbGVSZXNwb25zZSA9IGF3YWl0IGZldGNoKGZpbGUuZG93bmxvYWRfdXJsKTtcbiAgICAgICAgICBjb25zdCBjb250ZW50ID0gYXdhaXQgZmlsZVJlc3BvbnNlLnRleHQoKTtcbiAgICAgICAgICBjb25zdCBleGlzdHMgPSBhd2FpdCB0aGlzLmFwcC52YXVsdC5hZGFwdGVyLmV4aXN0cyhmaWxlUGF0aCk7XG4gICAgICAgICAgaWYgKGV4aXN0cykge1xuICAgICAgICAgICAgY29uc3QgY3VycmVudCA9IGF3YWl0IHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXIucmVhZChmaWxlUGF0aCk7XG4gICAgICAgICAgICBpZiAoY3VycmVudCAhPT0gY29udGVudCkge1xuICAgICAgICAgICAgICBhd2FpdCB0aGlzLmJhY2t1cEZpbGUoZmlsZVBhdGgsIGN1cnJlbnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoIWV4aXN0cykge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5hcHAudmF1bHQuY3JlYXRlKGZpbGVQYXRoLCBjb250ZW50KTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaWYgKChhd2FpdCB0aGlzLmFwcC52YXVsdC5hZGFwdGVyLnJlYWQoZmlsZVBhdGgpKSAhPT0gY29udGVudCkge1xuICAgICAgICAgICAgICBhd2FpdCB0aGlzLmFwcC52YXVsdC5hZGFwdGVyLndyaXRlKGZpbGVQYXRoLCBjb250ZW50KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgYXdhaXQgdGhpcy5maWxlQ2FjaGVNYW5hZ2VyLnVwZGF0ZUNhY2hlKGZpbGVQYXRoLCBjb250ZW50LCBmaWxlLnBhdGgsIGZhbHNlKTtcbiAgICAgICAgfSBlbHNlIGlmIChmaWxlLnR5cGUgPT09ICdkaXInKSB7XG4gICAgICAgICAgYXdhaXQgdGhpcy51cGRhdGVGb2xkZXJGcm9tR2l0SHViKGZpbGUucGF0aCwgYCR7dmF1bHRGb2xkZXJQYXRofS8ke2ZpbGUubmFtZX1gKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgYXdhaXQgdGhpcy5zYXZlU2V0dGluZ3MoKTtcbiAgICAgIG5ldyBOb3RpY2UoYFx1MjcwNSBGb2xkZXIgc3luY2VkOiAke3ZhdWx0Rm9sZGVyUGF0aH1gKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcihgXHUyNzRDIEZhaWxlZCB0byBzeW5jIGZvbGRlciB3aXRoIG0tcmVwbzogJHt2YXVsdEZvbGRlclBhdGh9YCwgZXJyb3IpO1xuICAgICAgbmV3IE5vdGljZShgXHUyNzRDIEZhaWxlZCB0byB1cGRhdGUgZm9sZGVyOiAke3ZhdWx0Rm9sZGVyUGF0aH1gKTtcbiAgICB9XG4gIH1cblxuICBhc3luYyByZWJ1aWxkRmlsZUNhY2hlKCkge1xuICAgIGNvbnN0IGNhY2hlID0gdGhpcy5maWxlQ2FjaGVNYW5hZ2VyO1xuICAgIGNvbnN0IHRhc2tzOiBQcm9taXNlPHZvaWQ+W10gPSBbXTtcblxuICAgIC8vIDEpIEluZGV4IGV4YWN0bHkgdGhlIGZpbGVzIGxpc3RlZCBpbiB0aGUgbWFuaWZlc3RcbiAgICBmb3IgKGNvbnN0IGVudHJ5IG9mIHRoaXMubWFuaWZlc3RDYWNoZS5maWxlcykge1xuICAgICAgY29uc3QgdmF1bHRQYXRoID0gdGhpcy5yZXNvbHZlVmF1bHRQYXRoKGVudHJ5LnBhdGgpO1xuICAgICAgaWYgKGF3YWl0IHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXIuZXhpc3RzKHZhdWx0UGF0aCkpIHtcbiAgICAgICAgdGFza3MucHVzaCgoYXN5bmMgKCkgPT4ge1xuICAgICAgICAgIGNvbnN0IGNvbnRlbnQgPSBhd2FpdCB0aGlzLmFwcC52YXVsdC5hZGFwdGVyLnJlYWQodmF1bHRQYXRoKTtcbiAgICAgICAgICBhd2FpdCBjYWNoZS51cGRhdGVDYWNoZSh2YXVsdFBhdGgsIGNvbnRlbnQsIGVudHJ5LnBhdGgsIGZhbHNlKTtcbiAgICAgICAgfSkoKSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gMikgSW5kZXggYW55IG1hcmtkb3duIGNoaWxkcmVuIHVuZGVyIG1hbmlmZXN0IGZvbGRlcnNcbiAgICBmb3IgKGNvbnN0IGZvbGRlckVudHJ5IG9mIHRoaXMubWFuaWZlc3RDYWNoZS5mb2xkZXJzKSB7XG4gICAgICBjb25zdCBmb2xkZXJQYXRoID0gZm9sZGVyRW50cnkucGF0aDtcbiAgICAgIGNvbnN0IGZvbGRlciA9IHRoaXMuYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChmb2xkZXJQYXRoKTtcbiAgICAgIGlmIChmb2xkZXIgaW5zdGFuY2VvZiBURm9sZGVyKSB7XG4gICAgICAgIFZhdWx0LnJlY3Vyc2VDaGlsZHJlbihmb2xkZXIsIChmaWxlKSA9PiB7XG4gICAgICAgICAgaWYgKGZpbGUgaW5zdGFuY2VvZiBURmlsZSAmJiBmaWxlLmV4dGVuc2lvbiA9PT0gJ21kJykge1xuICAgICAgICAgICAgY29uc3QgZmlsZVBhdGggPSBmaWxlLnBhdGg7XG4gICAgICAgICAgICB0YXNrcy5wdXNoKChhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgIGNvbnN0IGNvbnRlbnQgPSBhd2FpdCB0aGlzLmFwcC52YXVsdC5hZGFwdGVyLnJlYWQoZmlsZVBhdGgpO1xuICAgICAgICAgICAgICBhd2FpdCBjYWNoZS51cGRhdGVDYWNoZShmaWxlUGF0aCwgY29udGVudCwgZmlsZVBhdGgsIGZhbHNlKTtcbiAgICAgICAgICAgIH0pKCkpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgY29uc3QgYmF0Y2hTaXplID0gMTA7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0YXNrcy5sZW5ndGg7IGkgKz0gYmF0Y2hTaXplKSB7XG4gICAgICBhd2FpdCBQcm9taXNlLmFsbCh0YXNrcy5zbGljZShpLCBpICsgYmF0Y2hTaXplKSk7XG4gICAgfVxuXG4gICAgYXdhaXQgdGhpcy5zYXZlU2V0dGluZ3MoKTtcbiAgfVxuXG4gIGFzeW5jIHNob3dJbmRleGluZ01vZGFsKCkge1xuICAgIGNvbnN0IG1vZGFsID0gbmV3IChjbGFzcyBleHRlbmRzIE1vZGFsIHtcbiAgICAgIGNvbnN0cnVjdG9yKGFwcDogQXBwKSB7XG4gICAgICAgIHN1cGVyKGFwcCk7XG4gICAgICB9XG4gICAgICBvbk9wZW4oKSB7XG4gICAgICAgIHRoaXMuY29udGVudEVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IGUuc3RvcFByb3BhZ2F0aW9uKCkpO1xuICAgICAgICB0aGlzLnRpdGxlRWwuc2V0VGV4dCgnXHVEODNEXHVERDA0IEluZGV4aW5nIFRvb2xraXQgRmlsZXMuLi4nKTtcbiAgICAgICAgdGhpcy5jb250ZW50RWwuY3JlYXRlRWwoJ3AnLCB7XG4gICAgICAgICAgdGV4dDogJ0luZGV4aW5nIGFuZCBjYWNoaW5nIHlvdXIgVlZ1bmRlcmxvcmUgVmF1bHQgZm9yIGZhc3RlciB1cGRhdGVzIGFuZCBzYWZlciBzeW5jaW5nLidcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSkodGhpcy5hcHApO1xuXG4gICAgbW9kYWwub3BlbigpO1xuICAgIGF3YWl0IHRoaXMucmVidWlsZEZpbGVDYWNoZSgpO1xuICAgIG1vZGFsLmNsb3NlKCk7XG4gICAgbmV3IE5vdGljZSgnXHUyNzA1IFZWdW5kZXJsb3JlIGNhY2hpbmcgY29tcGxldGUuJyk7XG4gIH1cblxuICBhc3luYyB1cGRhdGVWZXJzaW9uRmlsZSgpIHtcbiAgICBpZiAoIXRoaXMuc2V0dGluZ3MubGF0ZXN0VG9vbGtpdFZlcnNpb24pIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3QgdmVyc2lvblBhdGggPSAnLnZlcnNpb24uanNvbic7XG4gICAgY29uc3QgY29udGVudCA9IEpTT04uc3RyaW5naWZ5KHsgdmVyc2lvbjogdGhpcy5zZXR0aW5ncy5sYXRlc3RUb29sa2l0VmVyc2lvbiB9LCBudWxsLCAyKTtcbiAgICBjb25zdCBleGlzdHMgPSBhd2FpdCB0aGlzLmFwcC52YXVsdC5hZGFwdGVyLmV4aXN0cyh2ZXJzaW9uUGF0aCk7XG4gICAgaWYgKGV4aXN0cykge1xuICAgICAgYXdhaXQgdGhpcy5hcHAudmF1bHQuYWRhcHRlci53cml0ZSh2ZXJzaW9uUGF0aCwgY29udGVudCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGF3YWl0IHRoaXMuYXBwLnZhdWx0LmNyZWF0ZSh2ZXJzaW9uUGF0aCwgY29udGVudCk7XG4gICAgfVxuICB9XG5cbiAgLyoqIG1haW4udHMgKiovXG5cbiAgLyoqIFxuICAgKiBJbnN0YWxsIHRoZSBzZWxlY3RlZCBjb21wZW5kaXVtIGFuZCB6ZXJvIG9yIG1vcmUgcmVmZXJlbmNlIGVkaXRpb25zLlxuICAgKi9cbiAgcHVibGljIGFzeW5jIGluc3RhbGxGdWxsVG9vbGtpdChcbiAgICBvcHRzOiB7IGNvbXBlbmRpdW06IHN0cmluZzsgcmVmZXJlbmNlczogc3RyaW5nW10gfSA9IHsgY29tcGVuZGl1bTogXCJcIiwgcmVmZXJlbmNlczogW10gfVxuICApOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBjb25zdCB7IGNvbXBlbmRpdW0sIHJlZmVyZW5jZXMgfSA9IG9wdHM7XG4gICAgaWYgKCFjb21wZW5kaXVtKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJObyBjb21wZW5kaXVtIGVkaXRpb24gc2VsZWN0ZWRcIik7XG4gICAgfVxuXG5cbiAgICBsZXQgaW5zdGFsbFN1Y2NlZWRlZCA9IGZhbHNlO1xuICAgIHRyeSB7XG4gICAgICAvLyAyKSBTdGF0aWMgY29weSBvZiBldmVyeXRoaW5nIGluIHRoZSByZXBvIEVYQ0VQVCBhbnkgQ29tcGVuZGl1bS8qXG4gICAgICBjb25zdCB0cmVlQXBpID1cbiAgICAgICAgXCJodHRwczovL2FwaS5naXRodWIuY29tL3JlcG9zL3NsYW13aXNlMDAwMS9WVnVuZGVybG9yZS1Ub29sa2l0LUZ1bGwvZ2l0L3RyZWVzL21haW4/cmVjdXJzaXZlPTFcIjtcbiAgICAgIGNvbnN0IHJlc3AgPSBhd2FpdCBmZXRjaCh0cmVlQXBpKTtcbiAgICAgIGlmICghcmVzcC5vaykge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEZhaWxlZCB0byBsaXN0IHJlcG8gdHJlZTogJHtyZXNwLnN0YXR1c1RleHR9YCk7XG4gICAgICB9XG4gICAgICBjb25zdCBqc29uOiBhbnkgPSBhd2FpdCByZXNwLmpzb24oKTtcbiAgICAgIGNvbnN0IGl0ZW1zID0gQXJyYXkuaXNBcnJheShqc29uLnRyZWUpID8ganNvbi50cmVlIDogW107XG5cbiAgICAgIC8vIFVzZSB5b3VyIGV4Y2x1ZGVkUGF0aHMgKHdoaWNoIGFscmVhZHkgY29udGFpbnMgXCJDb21wZW5kaXVtXCIpXG4gICAgICBjb25zdCBzdGF0aWNFbnRyaWVzID0gKGl0ZW1zIGFzIEFycmF5PHsgcGF0aDogc3RyaW5nOyB0eXBlOiBzdHJpbmcgfT4pXG4gICAgICAgIC5maWx0ZXIoKGl0ZW0pID0+XG4gICAgICAgICAgIXRoaXMuZXhjbHVkZWRQYXRocy5zb21lKGV4ID0+XG4gICAgICAgICAgICBpdGVtLnBhdGggPT09IGV4IHx8IGl0ZW0ucGF0aC5zdGFydHNXaXRoKGAke2V4fS9gKVxuICAgICAgICAgIClcbiAgICAgICAgKVxuICAgICAgICAuc29ydCgoYSwgYikgPT4gKGEudHlwZSA9PT0gYi50eXBlID8gMCA6IGEudHlwZSA9PT0gXCJ0cmVlXCIgPyAtMSA6IDEpKTtcblxuICAgICAgZm9yIChjb25zdCBlbnRyeSBvZiBzdGF0aWNFbnRyaWVzKSB7XG4gICAgICAgIGlmIChlbnRyeS50eXBlID09PSBcInRyZWVcIikge1xuICAgICAgICAgIGlmICghKGF3YWl0IHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXIuZXhpc3RzKGVudHJ5LnBhdGgpKSkge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5hcHAudmF1bHQuY3JlYXRlRm9sZGVyKGVudHJ5LnBhdGgpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjb25zdCByYXdVcmwgPVxuICAgICAgICAgICAgYGh0dHBzOi8vcmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbS9zbGFtd2lzZTAwMDEvVlZ1bmRlcmxvcmUtVG9vbGtpdC1GdWxsL21haW4vJHtlbmNvZGVVUklDb21wb25lbnQoZW50cnkucGF0aCl9YDtcbiAgICAgICAgICBjb25zdCBmaWxlUmVzcCA9IGF3YWl0IGZldGNoKHJhd1VybCk7XG4gICAgICAgICAgaWYgKCFmaWxlUmVzcC5vaykgY29udGludWU7XG4gICAgICAgICAgY29uc3QgdGV4dCA9IGF3YWl0IGZpbGVSZXNwLnRleHQoKTtcbiAgICAgICAgICBpZiAoYXdhaXQgdGhpcy5hcHAudmF1bHQuYWRhcHRlci5leGlzdHMoZW50cnkucGF0aCkpIHtcbiAgICAgICAgICAgIGNvbnN0IG9sZCA9IGF3YWl0IHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXIucmVhZChlbnRyeS5wYXRoKTtcbiAgICAgICAgICAgIGlmIChvbGQgIT09IHRleHQpIHtcbiAgICAgICAgICAgICAgYXdhaXQgdGhpcy5hcHAudmF1bHQuYWRhcHRlci53cml0ZShlbnRyeS5wYXRoLCB0ZXh0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5hcHAudmF1bHQuY3JlYXRlKGVudHJ5LnBhdGgsIHRleHQpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICB0aGlzLnNldHRpbmdzLnJ1bGVzZXRDb21wZW5kaXVtID0gY29tcGVuZGl1bTtcbiAgICAgIGNvbnN0IHBpY2tlZFJlZnMgPSByZWZlcmVuY2VzLmxlbmd0aCA+IDBcbiAgICAgICAgPyByZWZlcmVuY2VzXG4gICAgICAgIDogdGhpcy5zZXR0aW5ncy5ydWxlc2V0UmVmZXJlbmNlO1xuICAgICAgdGhpcy5zZXR0aW5ncy5ydWxlc2V0UmVmZXJlbmNlID0gcGlja2VkUmVmcztcblxuICAgICAgYXdhaXQgdGhpcy5zYXZlU2V0dGluZ3MoKTtcblxuICAgICAgLy8gbm93IHJ1biB0aGUgaW1wb3J0IGpvYnMgYWdhaW5zdCB0aGUgY29tcGVuZGl1bSArIHRoZSBhY3R1YWwgcmVmc1xuICAgICAgY29uc3Qgam9icyA9IFtcbiAgICAgICAgaW1wb3J0UnVsZXNldERhdGEoeyBhcHA6IHRoaXMuYXBwLCBlZGl0aW9uS2V5OiBjb21wZW5kaXVtLCB0YXJnZXRQYXRoOiBcIkNvbXBlbmRpdW1cIiB9KSxcbiAgICAgICAgLi4ucGlja2VkUmVmcy5tYXAocmVmS2V5ID0+IHtcbiAgICAgICAgICBjb25zdCBkaXNwbGF5TmFtZSA9IGdldFJ1bGVzZXREaXNwbGF5TmFtZShyZWZLZXkpO1xuICAgICAgICAgIHJldHVybiBpbXBvcnRSdWxlc2V0RGF0YSh7XG4gICAgICAgICAgICBhcHA6IHRoaXMuYXBwLFxuICAgICAgICAgICAgZWRpdGlvbktleTogcmVmS2V5LFxuICAgICAgICAgICAgdGFyZ2V0UGF0aDogYFJlc291cmNlcy9SdWxlc2V0cy8ke2Rpc3BsYXlOYW1lfWAsXG4gICAgICAgICAgfSlcbiAgICAgICAgfSlcbiAgICAgIF07XG4gICAgICBhd2FpdCBQcm9taXNlLmFsbChqb2JzKTtcblxuICAgICAgLy8gMykgS2ljayBvZmYgeW91ciBKU09OXHUyMTkyTUQgcGFyc2VycyBpbiBwYXJhbGxlbFxuICAgICAgY29uc3QgcGFyc2VKb2JzID0gW1xuICAgICAgICBpbXBvcnRSdWxlc2V0RGF0YSh7XG4gICAgICAgICAgYXBwOiB0aGlzLmFwcCxcbiAgICAgICAgICBlZGl0aW9uS2V5OiBjb21wZW5kaXVtLFxuICAgICAgICAgIHRhcmdldFBhdGg6IGBDb21wZW5kaXVtYCxcbiAgICAgICAgfSksXG4gICAgICAgIC4uLnJlZmVyZW5jZXMubWFwKHJlZktleSA9PiB7XG4gICAgICAgICAgY29uc3QgZGlzcGxheU5hbWUgPSBnZXRSdWxlc2V0RGlzcGxheU5hbWUocmVmS2V5KTtcbiAgICAgICAgICByZXR1cm4gaW1wb3J0UnVsZXNldERhdGEoe1xuICAgICAgICAgICAgYXBwOiB0aGlzLmFwcCxcbiAgICAgICAgICAgIGVkaXRpb25LZXk6IHJlZktleSxcbiAgICAgICAgICAgIHRhcmdldFBhdGg6IGBSZXNvdXJjZXMvUnVsZXNldHMvJHtkaXNwbGF5TmFtZX1gLFxuICAgICAgICAgIH0pXG4gICAgICAgIH0pLFxuICAgICAgXTtcbiAgICAgIC8vIHRoaXMgd29uXHUyMDE5dCByZXNvbHZlIHVudGlsIF9hbGxfIHBhcnNlcnMgaGF2ZSBmaW5pc2hlZCB3cml0aW5nIHRoZWlyIE1EIGZpbGVzXG4gICAgICBhd2FpdCBQcm9taXNlLmFsbChwYXJzZUpvYnMpO1xuXG4gICAgICB0cnkge1xuICAgICAgICBhd2FpdCB1cGRhdGVNb2RhbEZvcm1zRnJvbVJlcG8odGhpcy5hcHApO1xuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBjb25zb2xlLndhcm4oJ01vZGFsIEZvcm1zIHVwZGF0ZXIgKGZpcnN0LXRpbWUgaW5zdGFsbCkgZmFpbGVkOicsIGUpO1xuICAgICAgfVxuXG4gICAgICAvLyA0KSBQb3N0LWluc3RhbGwgaG91c2VrZWVwaW5nXG4gICAgICBjb25zdCBtYXJrZXIgPSBcIi52dnVuZGVybG9yZV9pbnN0YWxsZWRcIjtcbiAgICAgIGlmICghKGF3YWl0IHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXIuZXhpc3RzKG1hcmtlcikpKSB7XG4gICAgICAgIGF3YWl0IHRoaXMuYXBwLnZhdWx0LmNyZWF0ZShtYXJrZXIsIFwiXCIpO1xuICAgICAgfVxuICAgICAgdGhpcy5zZXR0aW5ncy5oaWdobGlnaHRFbmFibGVkID0gdHJ1ZTtcbiAgICAgIGF3YWl0IHRoaXMuc2F2ZVNldHRpbmdzKCk7XG4gICAgICB0aGlzLmVuYWJsZUhpZ2hsaWdodCgpO1xuXG4gICAgICBpbnN0YWxsU3VjY2VlZGVkID0gdHJ1ZTtcbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJcdTI3NEMgaW5zdGFsbEZ1bGxUb29sa2l0KClcIiwgZXJyKTtcbiAgICB9IGZpbmFsbHkge1xuICAgICAgLy8gb25seSBub3cgY2xvc2UgdGhlIHNwaW5uZXIgJiByZWRyYXcgdGhlIFVJXG4gICAgICBpZiAodGhpcy5zZXR0aW5nc1RhYikgdGhpcy5zZXR0aW5nc1RhYi5kaXNwbGF5KCk7XG4gICAgICBuZXcgTm90aWNlKFxuICAgICAgICBpbnN0YWxsU3VjY2VlZGVkXG4gICAgICAgICAgPyBcIlx1MjcwNSBWVnVuZGVybG9yZSBUb29sa2l0IHN1Y2Nlc3NmdWxseSBpbnN0YWxsZWQhXCJcbiAgICAgICAgICA6IFwiXHUyNzRDIEZhaWxlZCB0byBpbnN0YWxsIHRvb2xraXQuIFNlZSBjb25zb2xlIGZvciBkZXRhaWxzLlwiXG4gICAgICApO1xuICAgIH1cbiAgfVxuXG4gIC8vICogUmUtcGFyc2UgYWxsIGdhbWVzZXQgZGF0YSAocnVsZXNldCBjb21wZW5kaXVtICsgcmVmZXJlbmNlIHNldHMpXG4gIGFzeW5jIHJlZnJlc2hHYW1lU2V0RGF0YSgpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBjb25zdCB7IHJ1bGVzZXRDb21wZW5kaXVtLCBydWxlc2V0UmVmZXJlbmNlIH0gPSB0aGlzLnNldHRpbmdzO1xuXG4gICAgaWYgKCFydWxlc2V0Q29tcGVuZGl1bSAmJiBydWxlc2V0UmVmZXJlbmNlLmxlbmd0aCA9PT0gMCkge1xuICAgICAgbmV3IE5vdGljZShcIlx1MjZBMFx1RkUwRiBObyBnYW1lc2V0IGtleXMgc2V0OyBub3RoaW5nIHRvIHJlZnJlc2guXCIpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IGpvYnM6IFByb21pc2U8dW5rbm93bj5bXSA9IFtdO1xuICAgIGlmIChydWxlc2V0Q29tcGVuZGl1bSkge1xuICAgICAgam9icy5wdXNoKGltcG9ydFJ1bGVzZXREYXRhKHtcbiAgICAgICAgYXBwOiB0aGlzLmFwcCxcbiAgICAgICAgZWRpdGlvbktleTogcnVsZXNldENvbXBlbmRpdW0sXG4gICAgICAgIHRhcmdldFBhdGg6IFwiQ29tcGVuZGl1bVwiLFxuICAgICAgfSkpO1xuICAgIH1cbiAgICBmb3IgKGNvbnN0IHJlZiBvZiBydWxlc2V0UmVmZXJlbmNlKSB7XG4gICAgICBjb25zdCBkaXNwbGF5TmFtZSA9IGdldFJ1bGVzZXREaXNwbGF5TmFtZShyZWYpO1xuICAgICAgam9icy5wdXNoKGltcG9ydFJ1bGVzZXREYXRhKHtcbiAgICAgICAgYXBwOiB0aGlzLmFwcCxcbiAgICAgICAgZWRpdGlvbktleTogcmVmLFxuICAgICAgICB0YXJnZXRQYXRoOiBgUmVzb3VyY2VzL1J1bGVzZXRzLyR7ZGlzcGxheU5hbWV9YCxcbiAgICAgIH0pKTtcbiAgICB9XG5cbiAgICBhd2FpdCBQcm9taXNlLmFsbChqb2JzKTtcbiAgICBuZXcgTm90aWNlKFwiXHUyNzA1IEdhbWUgU2V0IERhdGEgcmVmcmVzaGVkLlwiKTtcbiAgfVxuXG5cblxufVxuZXhwb3J0IHsgSW5zdGFsbGluZ01vZGFsIH07IiwgImltcG9ydCB7XG5cdFBsdWdpblNldHRpbmdUYWIsXG5cdFNldHRpbmcsXG5cdEFwcCxcblx0VEZpbGUsXG5cdFRGb2xkZXIsXG5cdEFic3RyYWN0SW5wdXRTdWdnZXN0LFxuXHRzZXRJY29uLFxuXHRNb2RhbCxcblx0TWFya2Rvd25SZW5kZXJlcixcblx0Q29tcG9uZW50LFxuXHROb3RpY2UsXG5cdFRleHRDb21wb25lbnQsXG5cdFRvZ2dsZUNvbXBvbmVudCxcblx0QnV0dG9uQ29tcG9uZW50LFxuXHREcm9wZG93bkNvbXBvbmVudCxcblx0U2VhcmNoQ29tcG9uZW50LFxuXHRNZW51XG59IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCB0eXBlIFZWdW5kZXJsb3JlVG9vbGtpdFBsdWdpbiBmcm9tICcuL21haW4nO1xuaW1wb3J0IHsgQ29uZmlybUZyZXNoSW5zdGFsbE1vZGFsIH0gZnJvbSAnLi9maXJzdGluc3RhbGxjb25maXJtJztcbmltcG9ydCB7IHNob3dDdXN0b21JbnN0YWxsTW9kYWwgfSBmcm9tIFwiLi9jdXN0b21JbnN0YWxsTW9kYWxcIjtcbmltcG9ydCAqIGFzIHBhdGggZnJvbSAncGF0aCc7XG5pbXBvcnQgeyBBVkFJTEFCTEVfRURJVElPTlMsIEVkaXRpb24gfSBmcm9tICcuL2VkaXRpb25zJ1xuaW1wb3J0IHsgQWR2ZW50dXJlU29ydE9wdGlvbiB9IGZyb20gJy4vdHlwZXMnO1xuaW1wb3J0IHsgQURWRU5UVVJFX0NBVEVHT1JZX0RFRlMsIGdldEFkdmVudHVyZUNhdGVnb3J5SWRzIH0gZnJvbSAnLi9hZHYtY2F0ZWdvcmllcyc7XG5cblxuaW50ZXJmYWNlIEN1c3RvbVBhdGhFbnRyeSB7XG5cdHZhdWx0UGF0aDogc3RyaW5nO1xuXHRtYW5pZmVzdEtleTogc3RyaW5nO1xuXHRkb1VwZGF0ZTogYm9vbGVhbjtcbn1cblxuY2xhc3MgRmlsZVBhdGhTdWdnZXN0ZXIgZXh0ZW5kcyBBYnN0cmFjdElucHV0U3VnZ2VzdDxzdHJpbmc+IHtcblx0cHJpdmF0ZSBpbnB1dEVsOiBIVE1MSW5wdXRFbGVtZW50O1xuXHRwcml2YXRlIHBhdGhzOiB7IHBhdGg6IHN0cmluZzsgaXNGb2xkZXI6IGJvb2xlYW4gfVtdID0gW107XG5cdHByaXZhdGUgY3VycmVudFN1Z2dlc3Rpb25zOiBzdHJpbmdbXSA9IFtdO1xuXHRwcml2YXRlIHJlbmRlcmVkU3VnZ2VzdGlvbnM6IE1hcDxIVE1MRWxlbWVudCwgc3RyaW5nPiA9IG5ldyBNYXAoKTtcblxuXHRjb25zdHJ1Y3RvcihhcHA6IEFwcCwgaW5wdXRFbDogSFRNTElucHV0RWxlbWVudCkge1xuXHRcdHN1cGVyKGFwcCwgaW5wdXRFbCk7XG5cdFx0dGhpcy5pbnB1dEVsID0gaW5wdXRFbDtcblxuXHRcdGNvbnN0IGZvbGRlcnMgPSBPYmplY3QudmFsdWVzKGFwcC52YXVsdC5nZXRBbGxMb2FkZWRGaWxlcygpKVxuXHRcdFx0LmZpbHRlcigoZik6IGYgaXMgVEZvbGRlciA9PiBmIGluc3RhbmNlb2YgVEZvbGRlcilcblx0XHRcdC5tYXAoZiA9PiAoeyBwYXRoOiBmLnBhdGgsIGlzRm9sZGVyOiB0cnVlIH0pKTtcblx0XHRjb25zdCBmaWxlcyA9IGFwcC52YXVsdC5nZXRNYXJrZG93bkZpbGVzKClcblx0XHRcdC5tYXAoZiA9PiAoeyBwYXRoOiBmLnBhdGgsIGlzRm9sZGVyOiBmYWxzZSB9KSk7XG5cdFx0dGhpcy5wYXRocyA9IFsuLi5mb2xkZXJzLCAuLi5maWxlc107XG5cblx0XHR0aGlzLmlucHV0RWwuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIChlOiBLZXlib2FyZEV2ZW50KSA9PiB7XG5cdFx0XHRpZiAoZS5rZXkgPT09ICdFbnRlcicpIHtcblx0XHRcdFx0c2V0VGltZW91dCgoKSA9PiB7XG5cdFx0XHRcdFx0Y29uc3QgY29udGFpbmVyID0gKHRoaXMgYXMgYW55KS5jb250YWluZXJFbCBhcyBIVE1MRWxlbWVudDtcblx0XHRcdFx0XHRpZiAoIWNvbnRhaW5lcikgcmV0dXJuO1xuXHRcdFx0XHRcdGNvbnN0IHNlbGVjdGVkRWwgPSBjb250YWluZXIucXVlcnlTZWxlY3RvcignLnN1Z2dlc3Rpb24taXRlbS5pcy1zZWxlY3RlZCcpIGFzIEhUTUxFbGVtZW50O1xuXHRcdFx0XHRcdGlmIChzZWxlY3RlZEVsKSB7XG5cdFx0XHRcdFx0XHRjb25zdCBzZWxlY3RlZFBhdGggPSB0aGlzLnJlbmRlcmVkU3VnZ2VzdGlvbnMuZ2V0KHNlbGVjdGVkRWwpO1xuXHRcdFx0XHRcdFx0aWYgKHNlbGVjdGVkUGF0aCkge1xuXHRcdFx0XHRcdFx0XHR0aGlzLnNlbGVjdFN1Z2dlc3Rpb24oc2VsZWN0ZWRQYXRoKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0sIDApO1xuXHRcdFx0fVxuXHRcdH0pO1xuXHR9XG5cblx0Z2V0U3VnZ2VzdGlvbnMoaW5wdXRTdHI6IHN0cmluZyk6IHN0cmluZ1tdIHtcblx0XHRjb25zdCBxdWVyeSA9IGlucHV0U3RyLnRvTG93ZXJDYXNlKCk7XG5cdFx0dGhpcy5jdXJyZW50U3VnZ2VzdGlvbnMgPSB0aGlzLnBhdGhzXG5cdFx0XHQuZmlsdGVyKCh7IHBhdGggfSkgPT4gcGF0aC50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKHF1ZXJ5KSlcblx0XHRcdC5tYXAocCA9PiBwLnBhdGgpO1xuXHRcdHJldHVybiB0aGlzLmN1cnJlbnRTdWdnZXN0aW9ucztcblx0fVxuXG5cdHJlbmRlclN1Z2dlc3Rpb24ocGF0aDogc3RyaW5nLCBlbDogSFRNTEVsZW1lbnQpOiB2b2lkIHtcblx0XHRjb25zdCBpc0ZvbGRlciA9IHRoaXMucGF0aHMuZmluZChwID0+IHAucGF0aCA9PT0gcGF0aCk/LmlzRm9sZGVyO1xuXHRcdGVsLmFkZENsYXNzKFwibW9kLWNvbXBsZXhcIik7XG5cdFx0Y29uc3QgaWNvbkVsID0gZWwuY3JlYXRlRGl2KHsgY2xzOiAnc3VnZ2VzdGlvbi1pY29uJyB9KTtcblx0XHRzZXRJY29uKGljb25FbCwgaXNGb2xkZXIgPyAnZm9sZGVyJyA6ICdkb2N1bWVudCcpO1xuXG5cdFx0Y29uc3QgbmFtZSA9IHBhdGguc3BsaXQoJy8nKS5wb3AoKSE7XG5cdFx0Y29uc3QgZGlzcGxheU5hbWUgPSBpc0ZvbGRlciA/IG5hbWUgOiBuYW1lLnJlcGxhY2UoL1xcLm1kJC8sICcnKTtcblx0XHRlbC5jcmVhdGVEaXYoeyB0ZXh0OiBkaXNwbGF5TmFtZSwgY2xzOiAnc3VnZ2VzdGlvbi10aXRsZScgfSk7XG5cdFx0Y29uc3QgcGFyZW50UGF0aCA9IHBhdGguc3BsaXQoJy8nKS5zbGljZSgwLCAtMSkuam9pbignLycpO1xuXHRcdGVsLmNyZWF0ZURpdih7IHRleHQ6IHBhcmVudFBhdGgsIGNsczogJ3NlYXJjaC1zdWdnZXN0LWluZm8tdGV4dCcgfSk7XG5cdFx0ZWwuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChlOiBNb3VzZUV2ZW50KSA9PiB7XG5cdFx0XHRlLnN0b3BQcm9wYWdhdGlvbigpO1xuXHRcdFx0dGhpcy5zZWxlY3RTdWdnZXN0aW9uKHBhdGgpO1xuXHRcdH0pO1xuXHRcdHRoaXMucmVuZGVyZWRTdWdnZXN0aW9ucy5zZXQoZWwsIHBhdGgpO1xuXHR9XG5cblx0c2VsZWN0U3VnZ2VzdGlvbihwYXRoOiBzdHJpbmcpOiB2b2lkIHtcblx0XHR0aGlzLmlucHV0RWwudmFsdWUgPSBwYXRoO1xuXHRcdHRoaXMuaW5wdXRFbC5kaXNwYXRjaEV2ZW50KG5ldyBFdmVudChcImlucHV0XCIpKTtcblx0XHR0aGlzLmNsb3NlKCk7XG5cdH1cbn1cblxuY2xhc3MgTWFya2Rvd25QcmV2aWV3TW9kYWwgZXh0ZW5kcyBNb2RhbCB7XG5cdGNvbnN0cnVjdG9yKGFwcDogQXBwLCBwcml2YXRlIGNvbnRlbnQ6IHN0cmluZykge1xuXHRcdHN1cGVyKGFwcCk7XG5cdH1cblxuXHRvbk9wZW4oKTogdm9pZCB7XG5cdFx0dGhpcy5jb250ZW50RWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4gZS5zdG9wUHJvcGFnYXRpb24oKSk7XG5cdFx0dGhpcy5jb250ZW50RWwuZW1wdHkoKTtcblx0XHR0aGlzLmNvbnRlbnRFbC5jcmVhdGVFbCgnaDInLCB7IHRleHQ6ICdUb29sa2l0IENoYW5nZWxvZycgfSk7XG5cdFx0Y29uc3QgbWQgPSB0aGlzLmNvbnRlbnRFbC5jcmVhdGVEaXYoKTtcblx0XHRjb25zdCBkdW1teUNvbXBvbmVudCA9IG5ldyBjbGFzcyBleHRlbmRzIENvbXBvbmVudCB7IH0oKTtcblx0XHRNYXJrZG93blJlbmRlcmVyLnJlbmRlck1hcmtkb3duKHRoaXMuY29udGVudCwgbWQsICcvJywgZHVtbXlDb21wb25lbnQpO1xuXHR9XG5cblx0b25DbG9zZSgpOiB2b2lkIHtcblx0XHR0aGlzLmNvbnRlbnRFbC5lbXB0eSgpO1xuXHR9XG59XG5cbmZ1bmN0aW9uIHdpcmVSb3RhdGUoZGV0YWlsc0VsOiBIVE1MRGV0YWlsc0VsZW1lbnQsIGljb25FbDogSFRNTEVsZW1lbnQpIHtcblx0Y29uc3QgYXBwbHkgPSAoKSA9PiBpY29uRWwuY2xhc3NMaXN0LnRvZ2dsZSgndnYtcm90YXRlZCcsIGRldGFpbHNFbC5vcGVuKTtcblx0YXBwbHkoKTtcblx0ZGV0YWlsc0VsLmFkZEV2ZW50TGlzdGVuZXIoJ3RvZ2dsZScsIGFwcGx5KTtcbn1cblxuZnVuY3Rpb24ga2VlcE9wZW4oZGV0YWlsczogSFRNTERldGFpbHNFbGVtZW50LCBrZXk6IHN0cmluZywgb3B0cz86IHsgZGVmYXVsdE9wZW4/OiBib29sZWFuIH0pIHtcblx0Y29uc3QgeyBkZWZhdWx0T3BlbiA9IGZhbHNlIH0gPSBvcHRzIHx8IHt9O1xuXHRjb25zdCBscyA9IHdpbmRvdy5sb2NhbFN0b3JhZ2U7XG5cblx0Y29uc3Qgc3RvcmVkID0gbHMuZ2V0SXRlbShrZXkpOyAgICAgICAgICAvLyAnMScgfCAnMCcgfCBudWxsXG5cdGRldGFpbHMub3BlbiA9IHN0b3JlZCA9PT0gJzEnIHx8IChzdG9yZWQgPT09IG51bGwgJiYgZGVmYXVsdE9wZW4pO1xuXG5cdGlmICghKGRldGFpbHMgYXMgYW55KS5fdnZLZWVwT3BlbkJvdW5kKSB7XG5cdFx0ZGV0YWlscy5hZGRFdmVudExpc3RlbmVyKCd0b2dnbGUnLCAoKSA9PiB7XG5cdFx0XHR0cnkgeyBscy5zZXRJdGVtKGtleSwgZGV0YWlscy5vcGVuID8gJzEnIDogJzAnKTsgfSBjYXRjaCB7IH1cblx0XHR9KTtcblx0XHQoZGV0YWlscyBhcyBhbnkpLl92dktlZXBPcGVuQm91bmQgPSB0cnVlO1xuXHR9XG59XG5cblxuLy8gVGhlIGZ1bGwgc2V0dGluZ3MgdGFiLlxuZXhwb3J0IGNsYXNzIFRvb2xraXRTZXR0aW5nc1RhYiBleHRlbmRzIFBsdWdpblNldHRpbmdUYWIge1xuXHRwbHVnaW46IFZWdW5kZXJsb3JlVG9vbGtpdFBsdWdpbjtcblxuXHRjb25zdHJ1Y3RvcihhcHA6IEFwcCwgcGx1Z2luOiBWVnVuZGVybG9yZVRvb2xraXRQbHVnaW4pIHtcblx0XHRzdXBlcihhcHAsIHBsdWdpbik7XG5cdFx0dGhpcy5wbHVnaW4gPSBwbHVnaW47XG5cdH1cblxuXHRwcml2YXRlIGxhdGVzdFZhbHVlRWw6IEhUTUxFbGVtZW50IHwgbnVsbCA9IG51bGw7XG5cdHByaXZhdGUgY2hlY2tCdG5FbDogSFRNTEJ1dHRvbkVsZW1lbnQgfCBudWxsID0gbnVsbDtcblx0cHJpdmF0ZSBsYXN0Q2hlY2tlZEVsOiBIVE1MRWxlbWVudCB8IG51bGwgPSBudWxsO1xuXG5cdHByaXZhdGUgcmVuZGVySGVhZGVyKHJvb3Q6IEhUTUxFbGVtZW50KTogdm9pZCB7XG5cdFx0Y29uc3QgaGVhZGVyID0gcm9vdC5jcmVhdGVEaXYoKTtcblx0XHRoZWFkZXIuYWRkQ2xhc3MoXCJzZXR0aW5ncy1oZWFkZXJcIik7XG5cblx0XHRoZWFkZXIuY3JlYXRlRWwoJ2gzJywgeyB0ZXh0OiAnVlZ1bmRlcmxvcmUgVG9vbGtpdCBTZXR0aW5ncycgfSk7XG5cblx0XHRjb25zdCBoZWFkZXJCdG5zID0gaGVhZGVyLmNyZWF0ZURpdigpO1xuXHRcdGhlYWRlckJ0bnMuYWRkQ2xhc3MoXCJzZXR0aW5ncy1oZWFkZXItYnRuXCIpO1xuXG5cdFx0Y29uc3QgZG9jc0J0biA9IGhlYWRlckJ0bnMuY3JlYXRlRWwoJ2J1dHRvbicsIHsgdGV4dDogJ0RvY3MnIH0pO1xuXHRcdGRvY3NCdG4ub25jbGljayA9ICgpID0+IHdpbmRvdy5vcGVuKCdodHRwOi8vdnZ1bmRlcmxvcmUuY29tJywgJ19ibGFuaycpO1xuXG5cdFx0Y29uc3QgZ2l0aHViQnRuID0gaGVhZGVyQnRucy5jcmVhdGVFbCgnYnV0dG9uJywgeyB0ZXh0OiAnR2l0SHViJyB9KTtcblx0XHRnaXRodWJCdG4ub25jbGljayA9ICgpID0+XG5cdFx0XHR3aW5kb3cub3BlbignaHR0cHM6Ly9naXRodWIuY29tL3NsYW13aXNlMDAwMS9WVnVuZGVybG9yZS1Ub29sa2l0LUZ1bGwnLCAnX2JsYW5rJyk7XG5cblx0XHRjb25zdCBrb2ZpQnRuID0gaGVhZGVyQnRucy5jcmVhdGVFbCgnYnV0dG9uJywge1xuXHRcdFx0dGV4dDogJ1x1MjYxNSBLby1maScsXG5cdFx0XHRjbHM6ICdtb2QtY3RhJyxcblx0XHR9KTtcblx0XHRrb2ZpQnRuLmFkZENsYXNzKFwic2V0dGluZ3Mta29maVwiKTtcblx0XHRrb2ZpQnRuLm9uY2xpY2sgPSAoKSA9PiB3aW5kb3cub3BlbignaHR0cHM6Ly9rby1maS5jb20vdnZ1bmRlcmxvcmUnLCAnX2JsYW5rJyk7XG5cdH1cblxuXHRwcml2YXRlIHJlbmRlckZpcnN0UnVuQ2FyZChyb290OiBIVE1MRWxlbWVudCkge1xuXG5cdFx0Ly8gMSkgT3V0ZXIgd3JhcHBlclxuXHRcdGNvbnN0IGNhcmQgPSByb290LmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3Z2dW5kZXJsb3JlLWZpcnN0LXJ1bicgfSk7XG5cdFx0T2JqZWN0LmFzc2lnbihjYXJkLnN0eWxlLCB7XG5cdFx0XHRkaXNwbGF5OiAnZmxleCcsXG5cdFx0XHRmbGV4RGlyZWN0aW9uOiAnY29sdW1uJyxcblx0XHRcdGFsaWduSXRlbXM6ICdjZW50ZXInLFxuXHRcdFx0dGV4dEFsaWduOiAnY2VudGVyJyxcblx0XHRcdG1hcmdpblRvcDogJzJlbScsXG5cdFx0XHRwYWRkaW5nOiAnMWVtJyxcblx0XHRcdGJvcmRlcjogJzJweCBzb2xpZCB2YXIoLS1kaXZpZGVyLWNvbG9yKScsXG5cdFx0XHRib3JkZXJSYWRpdXM6ICcxOHB4JywgICAgICAgIC8qIChvcHRpb25hbCkgcm91bmQgdGhlIGNvcm5lcnMgc2xpZ2h0bHkgKi9cblx0XHRcdGJhY2tncm91bmRDb2xvcjogJ3ZhcigtLWJhY2tncm91bmQtcHJpbWFyeSknLCAvKiAob3B0aW9uYWwpIHdoaXRlL2dyYXkgYmFja2dyb3VuZCAqL1xuXHRcdH0pO1xuXG5cdFx0Ly8gMikgSGVhZGVyXG5cdFx0Y29uc3QgdGl0bGUgPSBjYXJkLmNyZWF0ZUVsKCdoMicsIHtcblx0XHRcdHRleHQ6ICdcdUQ4M0NcdURGRjAgV2VsY29tZSB0byBWVnVuZGVybG9yZScsXG5cdFx0XHRjbHM6ICd2di1jYXJkLXRpdGxlJyxcblx0XHR9KTtcblx0XHQvLyBHaXZlIHRoZSB0aXRsZSBhIGxpdHRsZSBib3R0b20gbWFyZ2luXG5cdFx0dGl0bGUuYWRkQ2xhc3MoXCJ2di1tYi1zbVwiKTtcblxuXHRcdC8vIDMpIEluc3RydWN0aW9uYWwgY29weVxuXHRcdGNvbnN0IGRlc2MgPSBjYXJkLmNyZWF0ZUVsKCdwJywge1xuXHRcdFx0dGV4dDpcblx0XHRcdFx0J0dldCBzdGFydGVkIGJ5IGluc3RhbGxpbmcgdGhlIGRlZmF1bHQgdG9vbGtpdFx1MjAxNFxcbm9yIGNob29zZSBpbmRpdmlkdWFsIHBpZWNlcyB0byBzdWl0IHlvdXIgdmF1bHQuJyxcblx0XHRcdGNsczogJ3Z2LWNhcmQtZGVzYycsXG5cdFx0fSk7XG5cdFx0Ly8gU2xpZ2h0IGJvdHRvbSBtYXJnaW4gc28gaXQgZG9lc24ndCBidXR0IHJpZ2h0IHVwIGFnYWluc3QgdGhlIGJ1dHRvbnNcblx0XHRkZXNjLmFkZENsYXNzKFwidnYtbWItbGdcIik7XG5cblx0XHQvLyBcdTI1MDBcdTI1MDBcdTI1MDAgUlVMRVNFVCAvIFJFRkVSRU5DRSBHUklEIFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFxuXHRcdGNvbnN0IHBsdWdpbiA9IHRoaXMucGx1Z2luO1xuXG5cdFx0Ly8gMSkgR3JpZCBjb250YWluZXJcblx0XHRjb25zdCBncmlkID0gY2FyZC5jcmVhdGVEaXYoKTtcblx0XHRPYmplY3QuYXNzaWduKGdyaWQuc3R5bGUsIHtcblx0XHRcdGRpc3BsYXk6ICdncmlkJyxcblx0XHRcdGdyaWRUZW1wbGF0ZUNvbHVtbnM6ICdtYXgtY29udGVudCBtYXgtY29udGVudCcsXG5cdFx0XHRjb2x1bW5HYXA6ICcxcmVtJyxcblx0XHRcdHJvd0dhcDogJzAuMjVyZW0nLFxuXHRcdFx0anVzdGlmeUNvbnRlbnQ6ICdjZW50ZXInLFxuXHRcdFx0anVzdGlmeUl0ZW1zOiAnY2VudGVyJyxcblx0XHRcdG1hcmdpbkJvdHRvbTogJzFyZW0nLFxuXHRcdH0pO1xuXG5cdFx0Ly8gMikgSGVhZGVyIHJvd1xuXHRcdGNvbnN0IGxhYmVsUnMgPSBncmlkLmNyZWF0ZUVsKCdkaXYnLCB7IHRleHQ6ICdSdWxlc2V0JyB9KTtcblx0XHRsYWJlbFJzLmFkZENsYXNzKFwiaW5zdGFsbC1ydWxlc2hlYWRlclwiKTtcblx0XHRjb25zdCBsYWJlbFJlZiA9IGdyaWQuY3JlYXRlRWwoJ2RpdicsIHsgdGV4dDogJ1JlZmVyZW5jZSAob3B0aW9uYWwpJyB9KTtcblx0XHRsYWJlbFJlZi5hZGRDbGFzcyhcImluc3RhbGwtcnVsZXNoZWFkZXJcIik7XG5cblx0XHQvLyAzKSBJbnB1dCBjZWxsc1xuXHRcdGNvbnN0IHJzQ2VsbCA9IGdyaWQuY3JlYXRlRGl2KHsgYXR0cjogeyBzdHlsZTogJ3RleHQtYWxpZ246Y2VudGVyJyB9IH0pO1xuXHRcdGNvbnN0IHJlZkNlbGwgPSBncmlkLmNyZWF0ZURpdih7IGF0dHI6IHsgc3R5bGU6ICd0ZXh0LWFsaWduOmNlbnRlcicgfSB9KTtcblxuXHRcdC8vIDQpIE11dGVkLCBpdGFsaWMgc3VtbWFyeSBiYXIgKHNwYW5zIGJvdGggY29sdW1ucylcblx0XHRjb25zdCBzdW1tYXJ5QmFyID0gZ3JpZC5jcmVhdGVEaXYoKTtcblx0XHRPYmplY3QuYXNzaWduKHN1bW1hcnlCYXIuc3R5bGUsIHtcblx0XHRcdGdyaWRDb2x1bW46ICcxIC8gc3BhbiAyJyxcblx0XHRcdGRpc3BsYXk6ICdmbGV4Jyxcblx0XHRcdGFsaWduSXRlbXM6ICdjZW50ZXInLFxuXHRcdFx0ZmxleFdyYXA6ICd3cmFwJyxcblx0XHRcdGdhcDogJzAuNXJlbScsXG5cdFx0XHRmb250U2l6ZTogJzAuODVlbScsXG5cdFx0XHRjb2xvcjogJ3ZhcigtLXRleHQtbXV0ZWQpJyxcblx0XHRcdGZvbnRTdHlsZTogJ2l0YWxpYycsXG5cdFx0XHRtYXJnaW5Ub3A6ICcwLjI1cmVtJyxcblx0XHRcdG1hcmdpbkJvdHRvbTogJzFyZW0nLFxuXHRcdH0pO1xuXHRcdGNvbnN0IHJ1bGVzZXRTcGFuID0gc3VtbWFyeUJhci5jcmVhdGVTcGFuKHtcblx0XHRcdHRleHQ6IGBSdWxlc2V0OiAke3BsdWdpbi5zZXR0aW5ncy5ydWxlc2V0Q29tcGVuZGl1bVxuXHRcdFx0XHQ/IGBEJkQgNUUgKCR7cGx1Z2luLnNldHRpbmdzLnJ1bGVzZXRDb21wZW5kaXVtfSlgXG5cdFx0XHRcdDogJydcblx0XHRcdFx0fWAsXG5cdFx0fSk7XG5cdFx0cnVsZXNldFNwYW4uYWRkQ2xhc3MoXCJpbnN0YWxsLXJ1bGVzaGVhZGVyXCIpO1xuXHRcdHN1bW1hcnlCYXIuY3JlYXRlU3Bhbih7IHRleHQ6ICdSZWZlcmVuY2VzOicgfSk7XG5cdFx0Y29uc3QgY2hpcHNXcmFwcGVyID0gc3VtbWFyeUJhci5jcmVhdGVEaXYoKTtcblx0XHRPYmplY3QuYXNzaWduKGNoaXBzV3JhcHBlci5zdHlsZSwgeyBkaXNwbGF5OiAnZmxleCcsIGdhcDogJzRweCcgfSk7XG5cblx0XHQvLyBIZWxwZXIgdG8gcmVuZGVyIGEgY2hpcFxuXHRcdGZ1bmN0aW9uIGFkZENoaXAoaWQ6IHN0cmluZykge1xuXHRcdFx0Y29uc3QgZWQgPSBBVkFJTEFCTEVfRURJVElPTlMuZmluZChlID0+IGUuaWQgPT09IGlkKSE7XG5cdFx0XHRjb25zdCBjaGlwID0gY2hpcHNXcmFwcGVyLmNyZWF0ZURpdih7XG5cdFx0XHRcdGF0dHI6IHtcblx0XHRcdFx0XHRzdHlsZTpcblx0XHRcdFx0XHRcdCdiYWNrZ3JvdW5kOiB2YXIoLS1pbnRlcmFjdGl2ZS1hY2NlbnQpOyBjb2xvcjogd2hpdGU7IHBhZGRpbmc6MnB4IDZweDsgJyArXG5cdFx0XHRcdFx0XHQnYm9yZGVyLXJhZGl1czo0cHg7IGRpc3BsYXk6aW5saW5lLWZsZXg7IGFsaWduLWl0ZW1zOmNlbnRlcjsgZ2FwOjRweDsnXG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXHRcdFx0Y2hpcC5jcmVhdGVTcGFuKHsgdGV4dDogZWQubGFiZWwgfSk7XG5cdFx0XHRjb25zdCByZW0gPSBjaGlwLmNyZWF0ZVNwYW4oe1xuXHRcdFx0XHR0ZXh0OiAnXHUwMEQ3Jyxcblx0XHRcdFx0YXR0cjogeyBzdHlsZTogJ2N1cnNvcjpwb2ludGVyOyBtYXJnaW4tbGVmdDo0cHg7JyB9XG5cdFx0XHR9KTtcblx0XHRcdHJlbS5vbmNsaWNrID0gYXN5bmMgKCkgPT4ge1xuXHRcdFx0XHRwbHVnaW4uc2V0dGluZ3MucnVsZXNldFJlZmVyZW5jZSA9IHBsdWdpbi5zZXR0aW5ncy5ydWxlc2V0UmVmZXJlbmNlLmZpbHRlcih4ID0+IHggIT09IGlkKTtcblx0XHRcdFx0YXdhaXQgcGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuXHRcdFx0XHRjaGlwLnJlbW92ZSgpO1xuXHRcdFx0XHR1cGRhdGVJbnN0YWxsQnV0dG9ucygpO1xuXHRcdFx0fTtcblx0XHR9XG5cdFx0O1xuXG5cdFx0Ly8gSW5pdGlhbCBjaGlwcyBkcmF3XG5cdFx0cGx1Z2luLnNldHRpbmdzLnJ1bGVzZXRSZWZlcmVuY2UuZm9yRWFjaChlID0+IGFkZENoaXAoZSkpO1xuXG5cdFx0Ly8gNSkgUnVsZXNldCBkcm9wZG93blxuXHRcdGNvbnN0IHJzRHJvcGRvd24gPSBuZXcgRHJvcGRvd25Db21wb25lbnQocnNDZWxsKTtcblx0XHRyc0Ryb3Bkb3duLmFkZE9wdGlvbignJywgJ1NlbGVjdCBlZGl0aW9uXHUyMDI2Jyk7XG5cdFx0QVZBSUxBQkxFX0VESVRJT05TLmZvckVhY2goKGVkOiBFZGl0aW9uKSA9PiB7XG5cdFx0XHRyc0Ryb3Bkb3duLmFkZE9wdGlvbihlZC5pZCwgZWQubGFiZWwpO1xuXHRcdH0pO1xuXHRcdHJzRHJvcGRvd25cblx0XHRcdC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5ydWxlc2V0Q29tcGVuZGl1bSlcblx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsKSA9PiB7XG5cdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLnJ1bGVzZXRDb21wZW5kaXVtID0gdmFsO1xuXHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcblxuXHRcdFx0XHQvLyBMaXZlXHUyMDEwdXBkYXRlIHlvdXIgc3VtbWFyeSBiYXI6XG5cdFx0XHRcdGNvbnN0IGNob3NlbiA9IEFWQUlMQUJMRV9FRElUSU9OUy5maW5kKGUgPT4gZS5pZCA9PT0gdmFsKTtcblx0XHRcdFx0cnVsZXNldFNwYW4udGV4dENvbnRlbnQgPSBjaG9zZW4gPyBjaG9zZW4ubGFiZWwgOiAnJztcblxuXHRcdFx0XHQvLyBDbGVhciBhbnkgZXhpc3RpbmcgcmVmZXJlbmNlIGNoaXBzOlxuXHRcdFx0XHRjaGlwc1dyYXBwZXIuZW1wdHkoKTtcblxuXHRcdFx0XHR1cGRhdGVJbnN0YWxsQnV0dG9ucygpO1xuXHRcdFx0fSk7XG5cblx0XHRjb25zdCBzZWFyY2hXcmFwcGVyRWwgPSByZWZDZWxsLmNyZWF0ZURpdih7IGF0dHI6IHsgc3R5bGU6ICd0ZXh0LWFsaWduOmNlbnRlcjsnIH0gfSk7XG5cdFx0Y29uc3Qgc2VhcmNoQ29tcCA9IG5ldyBTZWFyY2hDb21wb25lbnQoc2VhcmNoV3JhcHBlckVsKTtcblx0XHRzZWFyY2hDb21wLnNldFBsYWNlaG9sZGVyKCdBZGQgcmVmZXJlbmNlIHJ1bGVzXHUyMDI2Jyk7XG5cdFx0Y29uc3Qgc3VnZ2VzdGlvbklucHV0RWwgPSBzZWFyY2hDb21wLmlucHV0RWw7XG5cblx0XHRuZXcgY2xhc3MgZXh0ZW5kcyBBYnN0cmFjdElucHV0U3VnZ2VzdDxzdHJpbmc+IHtcblx0XHRcdGNvbnN0cnVjdG9yKGFwcDogQXBwLCBpbnB1dEVsOiBIVE1MSW5wdXRFbGVtZW50KSB7XG5cdFx0XHRcdHN1cGVyKGFwcCwgaW5wdXRFbCk7XG5cdFx0XHR9XG5cblx0XHRcdC8vIDEpIFByb3Bvc2UgZWRpdGlvbiBJRHMgKG1pbnVzIHRoZSBvbmUgdGhleSBwaWNrZWQgYXMgdGhlIG1haW4gcnVsZXNldClcblx0XHRcdGdldFN1Z2dlc3Rpb25zKGlucHV0OiBzdHJpbmcpOiBzdHJpbmdbXSB7XG5cdFx0XHRcdHJldHVybiBBVkFJTEFCTEVfRURJVElPTlNcblx0XHRcdFx0XHQuZmlsdGVyKGVkID0+IGVkLmlkICE9PSBwbHVnaW4uc2V0dGluZ3MucnVsZXNldENvbXBlbmRpdW0pICAgICAgICAgICAgLy8gZmlsdGVyIG91dCB0aGUgY2hvc2VuIHJ1bGVzZXRcblx0XHRcdFx0XHQuZmlsdGVyKGVkID0+IGVkLmxhYmVsLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoaW5wdXQudG9Mb3dlckNhc2UoKSkpICAgICAvLyBtYXRjaCBvbiBsYWJlbCB0ZXh0XG5cdFx0XHRcdFx0Lm1hcChlZCA9PiBlZC5pZCk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gcmV0dXJuIHRoZSBJRCBmb3IgZWFjaFxuXHRcdFx0fVxuXG5cdFx0XHQvLyAyKSBSZW5kZXIgdGhlIGh1bWFuLXJlYWRhYmxlIGxhYmVsXG5cdFx0XHRyZW5kZXJTdWdnZXN0aW9uKGl0ZW06IHN0cmluZywgZWw6IEhUTUxFbGVtZW50KTogdm9pZCB7XG5cdFx0XHRcdGNvbnN0IGVkID0gQVZBSUxBQkxFX0VESVRJT05TLmZpbmQoZSA9PiBlLmlkID09PSBpdGVtKSE7XG5cdFx0XHRcdGVsLmNyZWF0ZURpdih7IHRleHQ6IGVkLmxhYmVsIH0pO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyAzKSBXaGVuIHRoZXkgcGljayBvbmUsIHN0b3JlIGl0cyBJRCBhbmQgYWRkIGEgY2hpcFxuXHRcdFx0c2VsZWN0U3VnZ2VzdGlvbihpdGVtOiBzdHJpbmcpOiB2b2lkIHtcblx0XHRcdFx0aWYgKCFwbHVnaW4uc2V0dGluZ3MucnVsZXNldFJlZmVyZW5jZS5pbmNsdWRlcyhpdGVtKSkge1xuXHRcdFx0XHRcdHBsdWdpbi5zZXR0aW5ncy5ydWxlc2V0UmVmZXJlbmNlLnB1c2goaXRlbSk7XG5cdFx0XHRcdFx0cGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuXHRcdFx0XHRcdGFkZENoaXAoaXRlbSk7XG5cdFx0XHRcdH1cblx0XHRcdFx0dGhpcy5jbG9zZSgpO1xuXHRcdFx0XHRzdWdnZXN0aW9uSW5wdXRFbC52YWx1ZSA9ICcnO1xuXHRcdFx0XHR1cGRhdGVJbnN0YWxsQnV0dG9ucygpO1xuXHRcdFx0fVxuXHRcdH0odGhpcy5hcHAsIHN1Z2dlc3Rpb25JbnB1dEVsKTtcblxuXG5cblxuXG5cdFx0Ly8gXHUyNTAwXHUyNTAwXHUyNTAwIEJ1dHRvbiByb3cgXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXG5cdFx0Y29uc3QgYnRuUm93MSA9IGNhcmQuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAndnYtYnV0dG9uLXJvdycgfSk7XG5cdFx0T2JqZWN0LmFzc2lnbihidG5Sb3cxLnN0eWxlLCB7XG5cdFx0XHRkaXNwbGF5OiAnZmxleCcsXG5cdFx0XHRnYXA6ICcwLjc1ZW0nLFxuXHRcdFx0anVzdGlmeUNvbnRlbnQ6ICdjZW50ZXInLFxuXHRcdFx0bWFyZ2luQm90dG9tOiAnMS41ZW0nLFxuXHRcdH0pO1xuXG5cdFx0Y29uc3QgaW5zdGFsbEJ0bjEgPSBidG5Sb3cxLmNyZWF0ZUVsKCdidXR0b24nLCB7XG5cdFx0XHR0ZXh0OiAnSW5zdGFsbCBUb29sa2l0Jyxcblx0XHRcdGNsczogJ21vZC1jdGEnLFxuXHRcdH0pO1xuXHRcdGluc3RhbGxCdG4xLm9uQ2xpY2tFdmVudCgoKSA9PlxuXHRcdFx0bmV3IENvbmZpcm1GcmVzaEluc3RhbGxNb2RhbCh0aGlzLmFwcCwgdGhpcy5wbHVnaW4pLm9wZW4oKVxuXHRcdCk7XG5cblx0XHQvLyBjb25zdCBjdXN0b21CdG4xID0gYnRuUm93MS5jcmVhdGVFbCgnYnV0dG9uJywge1xuXHRcdC8vIHRleHQ6ICdDdXN0b20gSW5zdGFsbCcsXG5cdFx0Ly8gY2xzOiAnbW9kLWN0YScsXG5cdFx0Ly8gfSk7XG5cdFx0Ly8gT2JqZWN0LmFzc2lnbihjdXN0b21CdG4xLnN0eWxlLCB7XG5cdFx0Ly8gYmFja2dyb3VuZDogJ25vbmUnLFxuXHRcdC8vIGJvcmRlcjogJzFweCBzb2xpZCB2YXIoLS1pbnRlcmFjdGl2ZS1hY2NlbnQpJyxcblx0XHQvLyBjb2xvcjogJ3ZhcigtLXRleHQtbm9ybWFsKScsXG5cdFx0Ly8gfSk7XG5cdFx0Ly8gY3VzdG9tQnRuMS5vbkNsaWNrRXZlbnQoKCkgPT4gc2hvd0N1c3RvbUluc3RhbGxNb2RhbCh0aGlzLmFwcCwgdGhpcy5wbHVnaW4pKTtcblxuXHRcdC8vIFx1MjUwMFx1MjUwMFx1MjUwMCBIZWxwZXIgdG8gZW5hYmxlL2Rpc2FibGUgdGhlIGJ1dHRvbnMgXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXG5cdFx0Y29uc3QgdXBkYXRlSW5zdGFsbEJ1dHRvbnMgPSAoKSA9PiB7XG5cdFx0XHRjb25zdCBoYXNSdWxlc2V0ID0gQm9vbGVhbih0aGlzLnBsdWdpbi5zZXR0aW5ncy5ydWxlc2V0Q29tcGVuZGl1bSk7XG5cdFx0XHRpbnN0YWxsQnRuMS50b2dnbGVBdHRyaWJ1dGUoJ2Rpc2FibGVkJywgIWhhc1J1bGVzZXQpO1xuXHRcdFx0Ly8gY3VzdG9tQnRuMS50b2dnbGVBdHRyaWJ1dGUoJ2Rpc2FibGVkJywgIWhhc1J1bGVzZXQpO1xuXHRcdH07XG5cblx0XHQvLyA3KSBJbml0aWFsIGNhbGwsIGluIGNhc2Ugd2VcdTIwMTlyZSByZS1yZW5kZXJpbmdcblx0XHR1cGRhdGVJbnN0YWxsQnV0dG9ucygpO1xuXG5cblx0XHQvLyA1KSBcdTIwMUNTa2lwXHUyMDFEIGxpbmtcblx0XHRjb25zdCBza2lwUGFyYSA9IGNhcmQuY3JlYXRlRWwoJ3AnLCB7IGNsczogJ3Z2LXNraXAtbGluaycgfSk7XG5cdFx0Ly8gQ2VudGVyIGl0IGFuZCBnaXZlIGl0IGEgdGlueSB0b3AgbWFyZ2luXG5cdFx0T2JqZWN0LmFzc2lnbihza2lwUGFyYS5zdHlsZSwge1xuXHRcdFx0dGV4dEFsaWduOiAnY2VudGVyJyxcblx0XHRcdG1hcmdpblRvcDogJzAuMjVlbScsXG5cdFx0fSk7XG5cdFx0c2tpcFBhcmFcblx0XHRcdC5jcmVhdGVFbCgnYScsIHtcblx0XHRcdFx0dGV4dDogJ0FscmVhZHkgaGF2ZSB0aGUgVG9vbGtpdD8gU2hvdyBtZSB0aGUgc2V0dGluZ3MgXHUyMTkyJyxcblx0XHRcdH0pXG5cdFx0XHQub25DbGlja0V2ZW50KGFzeW5jICgpID0+IHtcblx0XHRcdFx0Ly8gMSkgQ3JlYXRlIHRoZSBoaWRkZW4gbWFya2VyIGZpbGUgc28gXCJmaXJzdFx1MjAxMHJ1blwiIG5ldmVyIHNob3dzIGFnYWluOlxuXHRcdFx0XHRjb25zdCBtYXJrZXJQYXRoID0gJy52dnVuZGVybG9yZV9pbnN0YWxsZWQnO1xuXHRcdFx0XHR0cnkge1xuXHRcdFx0XHRcdC8vIE9ubHkgd3JpdGUgaXQgaWYgaXQgZG9lcyBub3QgZXhpc3QgeWV0XG5cdFx0XHRcdFx0aWYgKCEoYXdhaXQgdGhpcy5hcHAudmF1bHQuYWRhcHRlci5leGlzdHMobWFya2VyUGF0aCkpKSB7XG5cdFx0XHRcdFx0XHRhd2FpdCB0aGlzLmFwcC52YXVsdC5jcmVhdGUobWFya2VyUGF0aCwgJycpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSBjYXRjaCAoZSkge1xuXHRcdFx0XHRcdGNvbnNvbGUuZXJyb3IoJ1x1Mjc0QyBGYWlsZWQgdG8gY3JlYXRlIG1hcmtlciBmaWxlOicsIGUpO1xuXHRcdFx0XHR9XG5cblxuXHRcdFx0XHQvLyAzKSBSZVx1MjAxMHJlbmRlciB0aGUgbm9ybWFsIHNldHRpbmdzIFVJXG5cdFx0XHRcdHRoaXMuZGlzcGxheSgpO1xuXHRcdFx0fSk7XG5cdH1cblxuXHRwcml2YXRlIGZvcm1hdFJ1bGVzZXRMYWJlbChpZD86IHN0cmluZyB8IG51bGwpOiBzdHJpbmcge1xuXHRcdGlmICghaWQpIHJldHVybiBcIlVua25vd25cIjtcblx0XHRjb25zdCBlZCA9IEFWQUlMQUJMRV9FRElUSU9OUy5maW5kKGUgPT4gZS5pZCA9PT0gaWQpO1xuXHRcdHJldHVybiBlZCA/IGVkLmxhYmVsIDogU3RyaW5nKGlkKTtcblx0fVxuXG5cdHByaXZhdGUgYXN5bmMgcmVzb2x2ZVJ1bGVzZXRJZCgpOiBQcm9taXNlPHN0cmluZyB8IG51bGw+IHtcblx0XHQvLyAxKSBzZXR0aW5ncyAocHJlZmVycmVkKVxuXHRcdGNvbnN0IHMgPSB0aGlzLnBsdWdpbj8uc2V0dGluZ3MgYXMgYW55O1xuXHRcdGNvbnN0IGZyb21TZXR0aW5ncyA9XG5cdFx0XHRzPy5ydWxlc2V0Q29tcGVuZGl1bSB8fCAgLy8gPFx1MjAxNCB5b3VyIGluc3RhbGxlciBkcm9wZG93biBzYXZlcyBoZXJlXG5cdFx0XHRzPy5ydWxlc2V0SWQgfHxcblx0XHRcdHM/LnJ1bGVzZXQgfHxcblx0XHRcdG51bGw7XG5cdFx0aWYgKGZyb21TZXR0aW5ncykgcmV0dXJuIFN0cmluZyhmcm9tU2V0dGluZ3MpO1xuXG5cdFx0Ly8gMikgb3B0aW9uYWwgc2VudGluZWxzXG5cdFx0dHJ5IHtcblx0XHRcdGNvbnN0IHR4dCA9IGF3YWl0IHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXIucmVhZChcIkNvbXBlbmRpdW0vLnJ1bGVzZXQuanNvblwiKTtcblx0XHRcdGNvbnN0IGogPSBKU09OLnBhcnNlKHR4dCk7XG5cdFx0XHRyZXR1cm4gai5ydWxlc2V0SWQgfHwgai5ydWxlc2V0IHx8IG51bGw7XG5cdFx0fSBjYXRjaCAoXykgeyB9XG5cblx0XHR0cnkge1xuXHRcdFx0Y29uc3QgdHh0ID0gYXdhaXQgdGhpcy5hcHAudmF1bHQuYWRhcHRlci5yZWFkKFwiLnZlcnNpb24uanNvblwiKTtcblx0XHRcdGNvbnN0IGogPSBKU09OLnBhcnNlKHR4dCk7XG5cdFx0XHRyZXR1cm4gai5ydWxlc2V0SWQgfHwgai5ydWxlc2V0IHx8IG51bGw7XG5cdFx0fSBjYXRjaCAoXykgeyB9XG5cblx0XHRyZXR1cm4gbnVsbDtcblx0fVxuXG5cdHByaXZhdGUgYXN5bmMgdXBkYXRlUnVsZXNldERpc3BsYXkoKTogUHJvbWlzZTx2b2lkPiB7XG5cdFx0aWYgKCF0aGlzLnJ1bGVzZXRWYWx1ZUVsKSByZXR1cm47XG5cdFx0Y29uc3QgaWQgPSBhd2FpdCB0aGlzLnJlc29sdmVSdWxlc2V0SWQoKTtcblx0XHRjb25zdCBsYWJlbCA9IHRoaXMuZm9ybWF0UnVsZXNldExhYmVsKGlkKTtcblxuXHRcdHRoaXMucnVsZXNldFZhbHVlRWwudGV4dENvbnRlbnQgPSBsYWJlbDtcblx0XHR0aGlzLnJ1bGVzZXRWYWx1ZUVsLmNsYXNzTGlzdC5yZW1vdmUoXCJ2di1zdWNjZXNzXCIsIFwidnYtd2FyblwiLCBcInZ2LWVycm9yXCIpO1xuXHRcdHRoaXMucnVsZXNldFZhbHVlRWwuYWRkQ2xhc3MoaWQgPyBcInZ2LXN1Y2Nlc3NcIiA6IFwidnYtd2FyblwiKTtcblx0fVxuXG5cblx0cHJpdmF0ZSB2ZXJzaW9uVmFsdWVFbDogSFRNTEVsZW1lbnQgfCBudWxsID0gbnVsbDtcblx0cHJpdmF0ZSBmb3JjZVdhcm5pbmdFbDogSFRNTEVsZW1lbnQgfCBudWxsID0gbnVsbDtcblx0cHJpdmF0ZSBydWxlc2V0VmFsdWVFbDogSFRNTFNwYW5FbGVtZW50IHwgbnVsbCA9IG51bGw7XG5cblx0YXN5bmMgZGlzcGxheSgpOiBQcm9taXNlPHZvaWQ+IHtcblx0XHRjb25zdCB7IGNvbnRhaW5lckVsIH0gPSB0aGlzO1xuXHRcdGNvbnN0IHNhdmVkU2Nyb2xsVG9wID0gY29udGFpbmVyRWwuc2Nyb2xsVG9wO1xuXHRcdGNvbnRhaW5lckVsLmVtcHR5KCk7XG5cblx0XHRjb25zdCBtYXJrZXJQYXRoID0gJy52dnVuZGVybG9yZV9pbnN0YWxsZWQnO1xuXHRcdGNvbnN0IGlzSW5zdGFsbGVkID0gYXdhaXQgdGhpcy5hcHAudmF1bHQuYWRhcHRlci5leGlzdHMobWFya2VyUGF0aCk7XG5cdFx0aWYgKCFpc0luc3RhbGxlZCkge1xuXHRcdFx0dGhpcy5yZW5kZXJGaXJzdFJ1bkNhcmQoY29udGFpbmVyRWwpO1xuXHRcdFx0Y29udGFpbmVyRWwuc2Nyb2xsVG9wID0gc2F2ZWRTY3JvbGxUb3A7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0dGhpcy5yZW5kZXJIZWFkZXIoY29udGFpbmVyRWwpOyAvLyBcdUQ4M0RcdURDNDhcdTAwQTBBbHdheXMgcmVuZGVyIGhlYWRlciBmaXJzdFxuXG5cdFx0OyAoYXN5bmMgKCkgPT4ge1xuXG5cdFx0XHQvKiogXHUyNTAwXHUyNTAwXHUyNTAwIFZFUlNJT04gU0VDVElPTiBcdTI1MDBcdTI1MDBcdTI1MDAgKi9cblx0XHRcdGNvbnN0IHZlcnNpb25Sb3cgPSBjb250YWluZXJFbC5jcmVhdGVEaXYoKTtcblx0XHRcdHZlcnNpb25Sb3cuYWRkQ2xhc3MoXCJzZXR0aW5ncy12ZXJzaW9ucm93XCIpO1xuXG5cdFx0XHRjb25zdCB2ZXJzaW9uSW5mbyA9IHZlcnNpb25Sb3cuY3JlYXRlRGl2KCk7XG5cdFx0XHR2ZXJzaW9uSW5mby5hZGRDbGFzcyhcInNldHRpbmdzLXZlcnNpb25pbmZvXCIpO1xuXG5cdFx0XHRsZXQgaW5zdGFsbGVkID0gJ05vdCBpbnN0YWxsZWQnO1xuXHRcdFx0dHJ5IHtcblx0XHRcdFx0Y29uc3QgdmVyQ29udGVudCA9IGF3YWl0IHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXIucmVhZCgnLnZlcnNpb24uanNvbicpO1xuXHRcdFx0XHRjb25zdCBqc29uID0gSlNPTi5wYXJzZSh2ZXJDb250ZW50KTtcblx0XHRcdFx0aW5zdGFsbGVkID0ganNvbi52ZXJzaW9uID8/ICdOb3QgaW5zdGFsbGVkJztcblx0XHRcdH0gY2F0Y2ggKGVycikge1xuXHRcdFx0XHRjb25zb2xlLndhcm4oJ0NvdWxkIG5vdCByZWFkIC52ZXJzaW9uLmpzb24gZnJvbSB2YXVsdDonLCBlcnIpO1xuXHRcdFx0fVxuXHRcdFx0Y29uc3QgbGF0ZXN0ID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MubGF0ZXN0VG9vbGtpdFZlcnNpb24gPz8gJ0NvdWxkIG5vdCBmZXRjaCc7XG5cdFx0XHRjb25zdCBpc01hdGNoID0gaW5zdGFsbGVkID09PSBsYXRlc3Q7XG5cblx0XHRcdGNvbnN0IHZhdWx0Um93ID0gdmVyc2lvbkluZm8uY3JlYXRlRGl2KCk7XG5cdFx0XHR2YXVsdFJvdy5hcHBlbmRUZXh0KCdWYXVsdCBUb29sa2l0IFZlcnNpb246ICcpO1xuXG5cdFx0XHR0aGlzLnZlcnNpb25WYWx1ZUVsID0gdmF1bHRSb3cuY3JlYXRlU3BhbigpO1xuXHRcdFx0dGhpcy52ZXJzaW9uVmFsdWVFbC50ZXh0Q29udGVudCA9IGluc3RhbGxlZDtcblx0XHRcdHRoaXMudmVyc2lvblZhbHVlRWwuYWRkQ2xhc3MoXCJ2di1ib2xkXCIsIGlzTWF0Y2ggPyBcInZ2LXN1Y2Nlc3NcIiA6IFwidnYtZXJyb3JcIik7XG5cblx0XHRcdGNvbnN0IGxhdGVzdFJvdyA9IHZlcnNpb25JbmZvLmNyZWF0ZUVsKCdkaXYnLCB7IHRleHQ6ICdMYXRlc3QgT2ZmaWNpYWwgVmVyc2lvbjogJyB9KTtcblx0XHRcdHRoaXMubGF0ZXN0VmFsdWVFbCA9IGxhdGVzdFJvdy5jcmVhdGVTcGFuKHtcblx0XHRcdFx0dGV4dDogbGF0ZXN0LFxuXHRcdFx0XHRhdHRyOiB7IHN0eWxlOiAnZm9udC13ZWlnaHQ6IGJvbGQ7JyB9XG5cdFx0XHR9KTtcblxuXHRcdFx0Y29uc3QgdmVyc2lvbkNvbnRyb2xzID0gdmVyc2lvblJvdy5jcmVhdGVEaXYoKTtcblx0XHRcdHZlcnNpb25Db250cm9scy5hZGRDbGFzcyhcInNldHRpbmdzLXZlcnNpb25jb250cm9sc1wiKTtcblxuXHRcdFx0Y29uc3QgYnV0dG9uUm93ID0gdmVyc2lvbkNvbnRyb2xzLmNyZWF0ZURpdigpO1xuXHRcdFx0YnV0dG9uUm93LmFkZENsYXNzKFwic2V0dGluZ3MtYnV0dG9ucm93XCIpO1xuXG5cdFx0XHRjb25zdCBjaGVja0J0biA9IGJ1dHRvblJvdy5jcmVhdGVFbCgnYnV0dG9uJywge1xuXHRcdFx0XHR0ZXh0OiBpbnN0YWxsZWQgIT09IGxhdGVzdCA/ICdVcGRhdGUgQXZhaWxhYmxlIScgOiAnQ2hlY2sgZm9yIFVwZGF0ZXMnLFxuXHRcdFx0XHRjbHM6ICdtb2QtY3RhJ1xuXHRcdFx0fSk7XG5cdFx0XHR0aGlzLmNoZWNrQnRuRWwgPSBjaGVja0J0bjtcblx0XHRcdGNoZWNrQnRuLmRhdGFzZXQuc3RhdGUgPSBpbnN0YWxsZWQgIT09IGxhdGVzdCA/ICd1cGRhdGUnIDogJ2NoZWNrJztcblxuXHRcdFx0Y2hlY2tCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBhc3luYyAoKSA9PiB7XG5cdFx0XHRcdGlmIChjaGVja0J0bi5kaXNhYmxlZCkgcmV0dXJuO1xuXG5cdFx0XHRcdC8vIDEpIEZhc3QgcGF0aDogd2UgYWxyZWFkeSBrbm93IGFuIHVwZGF0ZSBleGlzdHMgKHNldCB2aWEgZGF0YXNldC9zdGF0ZSlcblx0XHRcdFx0aWYgKGNoZWNrQnRuLmRhdGFzZXQuc3RhdGUgPT09ICd1cGRhdGUnKSB7XG5cdFx0XHRcdFx0dGhpcy5wbHVnaW4ucHJldmlld1VwZGF0ZXNNb2RhbCgpO1xuXHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdC8vIDIpIE90aGVyd2lzZSwgZG8gYSAzcyBzcGlubmVyIHdoaWxlIGNoZWNraW5nIG5ldHdvcmtcblx0XHRcdFx0Y29uc3QgcHJldkxhYmVsID0gY2hlY2tCdG4udGV4dENvbnRlbnQgfHwgJ0NoZWNrIGZvciBVcGRhdGVzJztcblx0XHRcdFx0Y2hlY2tCdG4uY2xhc3NMaXN0LmFkZCgnbW9kLWxvYWRpbmcnKTtcblx0XHRcdFx0Y2hlY2tCdG4uc2V0QXR0cmlidXRlKCdhcmlhLWJ1c3knLCAndHJ1ZScpO1xuXHRcdFx0XHRjaGVja0J0bi5kaXNhYmxlZCA9IHRydWU7XG5cblx0XHRcdFx0dHJ5IHtcblx0XHRcdFx0XHRjb25zdCBtaW5EZWxheSA9IG5ldyBQcm9taXNlPHZvaWQ+KHJlcyA9PiBzZXRUaW1lb3V0KHJlcywgMzAwMCkpO1xuXHRcdFx0XHRcdGF3YWl0IFByb21pc2UuYWxsKFt0aGlzLnBsdWdpbi5jaGVja0ZvclVwZGF0ZXMoKSwgbWluRGVsYXldKTtcblxuXHRcdFx0XHRcdGF3YWl0IHRoaXMudXBkYXRlVmVyc2lvbkRpc3BsYXkoKTsgLy8ga2VlcHMgdGV4dCArIGRhdGFzZXQuc3RhdGUgaW4gc3luY1xuXG5cdFx0XHRcdFx0Ly8gU3RvcCBzcGlubmVyXG5cdFx0XHRcdFx0Y2hlY2tCdG4uY2xhc3NMaXN0LnJlbW92ZSgnbW9kLWxvYWRpbmcnKTtcblx0XHRcdFx0XHRjaGVja0J0bi5yZW1vdmVBdHRyaWJ1dGUoJ2FyaWEtYnVzeScpO1xuXG5cdFx0XHRcdFx0Ly8gMykgRGVjaWRlIG5leHQgc3RhdGUgZnJvbSB0aGUgZnJlc2hseS11cGRhdGVkIGRhdGFzZXQvc3RhdGVcblx0XHRcdFx0XHRpZiAoY2hlY2tCdG4uZGF0YXNldC5zdGF0ZSA9PT0gJ3VwZGF0ZScpIHtcblx0XHRcdFx0XHRcdC8vIE5vdyB0aGF0IHdlIGtub3csIGVuYWJsZSBhbmQgbGV0IHRoZSBuZXh0IGNsaWNrIG9wZW4gcHJldmlldyBpbW1lZGlhdGVseVxuXHRcdFx0XHRcdFx0Y2hlY2tCdG4uZGlzYWJsZWQgPSBmYWxzZTtcblx0XHRcdFx0XHRcdGNoZWNrQnRuLnRleHRDb250ZW50ID0gJ1VwZGF0ZSBBdmFpbGFibGUhJztcblx0XHRcdFx0XHRcdGNoZWNrQnRuLm9uY2xpY2sgPSAoKSA9PiB7IHRoaXMucGx1Z2luLnByZXZpZXdVcGRhdGVzTW9kYWwoKTsgfTtcblx0XHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHQvLyBVcCB0byBkYXRlIFx1MjE5MiBmcmVlemUgZGlzYWJsZWQgdW50aWwgc2V0dGluZ3MgaXMgY2xvc2VkXG5cdFx0XHRcdFx0Y2hlY2tCdG4udGV4dENvbnRlbnQgPSAnVXAgdG8gZGF0ZSEnO1xuXHRcdFx0XHRcdGNoZWNrQnRuLmRpc2FibGVkID0gdHJ1ZTtcblx0XHRcdFx0fSBjYXRjaCAoZXJyKSB7XG5cdFx0XHRcdFx0Y29uc29sZS5lcnJvcignVXBkYXRlIGNoZWNrIGZhaWxlZDonLCBlcnIpO1xuXHRcdFx0XHRcdGNoZWNrQnRuLmNsYXNzTGlzdC5yZW1vdmUoJ21vZC1sb2FkaW5nJyk7XG5cdFx0XHRcdFx0Y2hlY2tCdG4ucmVtb3ZlQXR0cmlidXRlKCdhcmlhLWJ1c3knKTtcblx0XHRcdFx0XHRjaGVja0J0bi50ZXh0Q29udGVudCA9IHByZXZMYWJlbDtcblx0XHRcdFx0XHRjaGVja0J0bi5kaXNhYmxlZCA9IGZhbHNlO1xuXHRcdFx0XHR9XG5cdFx0XHR9KTtcblxuXHRcdFx0Y29uc3QgY2hhbmdlbG9nQnRuID0gYnV0dG9uUm93LmNyZWF0ZUVsKCdidXR0b24nLCB7IHRleHQ6ICdcdUQ4M0RcdURDRDYgVmlldyBDaGFuZ2Vsb2cnIH0pO1xuXHRcdFx0Y2hhbmdlbG9nQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuXHRcdFx0XHRuZXcgTWFya2Rvd25QcmV2aWV3TW9kYWwodGhpcy5hcHAsIHRoaXMucGx1Z2luLmNoYW5nZWxvZykub3BlbigpO1xuXHRcdFx0fSk7XG5cdFx0XHRpZiAodGhpcy5wbHVnaW4uc2V0dGluZ3MubGFzdENoZWNrZWQpIHtcblx0XHRcdFx0dGhpcy5sYXN0Q2hlY2tlZEVsID0gdmVyc2lvbkNvbnRyb2xzLmNyZWF0ZURpdigpO1xuXHRcdFx0XHR0aGlzLmxhc3RDaGVja2VkRWwuYWRkQ2xhc3MoXCJzZXR0aW5ncy1sYXN0Y2hlY2tlZFwiKTtcblx0XHRcdFx0dGhpcy5sYXN0Q2hlY2tlZEVsLnRleHRDb250ZW50ID1cblx0XHRcdFx0XHRgTGFzdCBjaGVja2VkOiAke25ldyBEYXRlKHRoaXMucGx1Z2luLnNldHRpbmdzLmxhc3RDaGVja2VkKS50b0xvY2FsZVN0cmluZygpfWA7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHR0aGlzLmxhc3RDaGVja2VkRWwgPSBudWxsO1xuXHRcdFx0fVxuXHRcdFx0Ly9ydWxlc2V0IGlkZW50XG5cdFx0XHRjb25zdCBydWxlc2V0Um93ID0gdmVyc2lvbkluZm8uY3JlYXRlRGl2KCk7XG5cdFx0XHRydWxlc2V0Um93LmFkZENsYXNzKFwic2V0dGluZ3MtcnVsZXNldHJvd1wiKTtcblx0XHRcdHJ1bGVzZXRSb3cuc2V0QXR0cihcInN0eWxlXCIsIFwibWFyZ2luLXRvcDogNnB4O21hcmdpbi1ib3R0b206IDEycHg7XCIpO1xuXG5cdFx0XHRydWxlc2V0Um93LmFwcGVuZFRleHQoXCJWYXVsdCBSdWxlc2V0OiBcIik7XG5cdFx0XHR0aGlzLnJ1bGVzZXRWYWx1ZUVsID0gcnVsZXNldFJvdy5jcmVhdGVTcGFuKHt9KTtcblx0XHRcdHRoaXMucnVsZXNldFZhbHVlRWwudGV4dENvbnRlbnQgPSBcIkRldGVjdGluZ1x1MjAyNlwiO1xuXG5cdFx0XHRhd2FpdCB0aGlzLnVwZGF0ZVJ1bGVzZXREaXNwbGF5KCk7XG5cblxuXG5cdFx0XHQvKiogXHUyNTAwXHUyNTAwXHUyNTAwIEZJWCBZT1VSIFZBVUxUIFNFQ1RJT04gKGNvbGxhcHNpYmxlLCBmaXhlZFx1MjAxMGljb24pIFx1MjUwMFx1MjUwMFx1MjUwMCAqL1xuXHRcdFx0Y29uc3QgZml4RGV0YWlscyA9IGNvbnRhaW5lckVsLmNyZWF0ZUVsKCdkZXRhaWxzJywgeyBjbHM6ICd2ay1zZWN0aW9uJyB9KTtcblx0XHRcdGtlZXBPcGVuKGZpeERldGFpbHMgYXMgSFRNTERldGFpbHNFbGVtZW50LCAndnY6Zml4Jyk7XG5cblx0XHRcdC8vIFx1MjUwMFx1MjUwMFx1MjUwMCBSZXBsYWNlIHlvdXIgb2xkIGZpeEhlYWRlciB3aXRoIHRoaXMgPHN1bW1hcnk+IFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFxuXHRcdFx0Y29uc3QgZml4SGVhZGVyID0gZml4RGV0YWlscy5jcmVhdGVFbCgnc3VtbWFyeScsIHsgY2xzOiAndmstc2VjdGlvbi1oZWFkZXInIH0pO1xuXHRcdFx0T2JqZWN0LmFzc2lnbihmaXhIZWFkZXIuc3R5bGUsIHtcblx0XHRcdFx0ZGlzcGxheTogJ2ZsZXgnLFxuXHRcdFx0XHRmbGV4RGlyZWN0aW9uOiAnY29sdW1uJyxcblx0XHRcdFx0YWxpZ25JdGVtczogJ3N0cmV0Y2gnLFxuXHRcdFx0XHRwYWRkaW5nOiAnMC41ZW0gMCcsXG5cdFx0XHRcdGJvcmRlckJvdHRvbTogJzFweCBzb2xpZCB2YXIoLS1kaXZpZGVyLWNvbG9yKScsXG5cdFx0XHRcdGN1cnNvcjogJ3BvaW50ZXInLFxuXHRcdFx0fSk7XG5cblx0XHRcdC8vIFx1MjUwMFx1MjUwMCBDcmVhdGUgYSBzaW5nbGUgZmxleFx1MjAxMHJvdyBpbnNpZGUgdGhlIHN1bW1hcnkgZm9yIHRpdGxlK2ljb24gXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXG5cdFx0XHRjb25zdCBmaXhIZWFkZXJSb3cgPSBmaXhIZWFkZXIuY3JlYXRlRGl2KHtcblx0XHRcdFx0YXR0cjoge1xuXHRcdFx0XHRcdHN0eWxlOiBgXG5cdFx0XHRkaXNwbGF5OiBmbGV4O1xuXHRcdFx0anVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuO1xuXHRcdFx0YWxpZ24taXRlbXM6IGZsZXgtZW5kO1xuXHRcdFx0YCxcblx0XHRcdFx0fSxcblx0XHRcdH0pO1xuXG5cdFx0XHQvLyBcdTI1MDBcdTI1MDAgTGVmdCBzaWRlOiB0aXRsZSArIGRlc2NyaXB0aW9uIGJsb2NrIFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFxuXHRcdFx0Y29uc3QgZml4VGl0bGVCbG9jayA9IGZpeEhlYWRlclJvdy5jcmVhdGVEaXYoe1xuXHRcdFx0XHRhdHRyOiB7IHN0eWxlOiAnZGlzcGxheTogZmxleDsgZmxleC1kaXJlY3Rpb246IGNvbHVtbjsnIH1cblx0XHRcdH0pO1xuXHRcdFx0Zml4VGl0bGVCbG9jay5jcmVhdGVFbCgnaDUnLCB7IHRleHQ6ICdGaXggWW91ciBWYXVsdCcgfSk7XG5cdFx0XHRmaXhUaXRsZUJsb2NrLmNyZWF0ZUVsKCdkaXYnLCB7XG5cdFx0XHRcdHRleHQ6ICdGaXggYW5kIGJyb2tlbiwgZGVsZXRlZCwgb3IgbWlzcGxhY2VkIGZpbGVzIGluIHlvdXIgdG9vbGtpdC4nLFxuXHRcdFx0XHRjbHM6ICdzZXR0aW5nLWl0ZW0tZGVzY3JpcHRpb24nLFxuXHRcdFx0XHRhdHRyOiB7IHN0eWxlOiAnbWFyZ2luLXRvcDogMC4yNWVtOycgfSxcblx0XHRcdH0pO1xuXG5cdFx0XHQvLyBcdTI1MDBcdTI1MDAgUmlnaHQgc2lkZTogc3RhdGljIHRvZ2dsZSBpY29uIChyb3RhdGVzIGluIHBsYWNlIG9ubHkpIFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFxuXHRcdFx0Y29uc3QgZml4VG9nZ2xlSWNvbiA9IGZpeEhlYWRlclJvdy5jcmVhdGVFbCgnc3BhbicsIHsgdGV4dDogJ1ZWJywgY2xzOiAndmstdG9nZ2xlLWljb24nIH0pO1xuXHRcdFx0Ly8ga2VlcCBzdHlsZXMgaWYgeW91IHdhbnQsIGJ1dCByb3RhdGlvbiBpcyBoYW5kbGVkIGJ5IHRoZSBjbGFzcyBub3c6XG5cdFx0XHRPYmplY3QuYXNzaWduKGZpeFRvZ2dsZUljb24uc3R5bGUsIHtcblx0XHRcdFx0Zm9udFdlaWdodDogJ2JvbGQnLFxuXHRcdFx0XHRkaXNwbGF5OiAnaW5saW5lLWJsb2NrJyxcblx0XHRcdFx0dHJhbnNpdGlvbjogJ3RyYW5zZm9ybSAwLjJzIGVhc2UnLFxuXHRcdFx0XHR0cmFuc2Zvcm1PcmlnaW46ICc1MCUgNTAlJyxcblx0XHRcdFx0dXNlclNlbGVjdDogJ25vbmUnLFxuXHRcdFx0fSk7XG5cdFx0XHQvLyByb3RhdGUgYmFzZWQgb24gPGRldGFpbHMgb3Blbj5cblx0XHRcdHdpcmVSb3RhdGUoZml4RGV0YWlscyBhcyBIVE1MRGV0YWlsc0VsZW1lbnQsIGZpeFRvZ2dsZUljb24pO1xuXG5cdFx0XHQvLyBcdTI1MDBcdTI1MDBcdTI1MDAgQm9keSAoc2FtZSBhcyBiZWZvcmUsIGp1c3QgaW5kZW50ZWQgdW5kZXIgPGRldGFpbHM+KSBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcblx0XHRcdGNvbnN0IGZpeEJvZHkgPSBmaXhEZXRhaWxzLmNyZWF0ZURpdih7IGNsczogJ3ZrLXNlY3Rpb24tYm9keScgfSk7XG5cdFx0XHRmaXhCb2R5LmFkZENsYXNzKFwidnYtcGwtbWRcIik7XG5cblx0XHRcdC8vIFx1MjUwMFx1MjUwMCBCdXR0b24gKyB3YXJuaW5nIHJvdyBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcblx0XHRcdGNvbnN0IGZpeEJ1dHRvblJvdyA9IGZpeEJvZHkuY3JlYXRlRGl2KCk7XG5cdFx0XHRmaXhCdXR0b25Sb3cuYWRkQ2xhc3MoXCJ2di1jaGVja2JveC1yb3dcIiwgXCJ2di1qdXN0aWZ5LWJldHdlZW5cIik7XG5cblx0XHRcdGNvbnN0IHdhcm5pbmdDb250YWluZXIgPSBmaXhCdXR0b25Sb3cuY3JlYXRlRGl2KCk7XG5cdFx0XHR0aGlzLmZvcmNlV2FybmluZ0VsID0gd2FybmluZ0NvbnRhaW5lcjtcblxuXHRcdFx0bGV0IGluc3RhbGxlZFZlcnNpb25TdHIgPSAnJztcblx0XHRcdHRyeSB7XG5cdFx0XHRcdGNvbnN0IHZlcnNpb25GaWxlID0gYXdhaXQgdGhpcy5wbHVnaW4uYXBwLnZhdWx0LmFkYXB0ZXIucmVhZCgnLnZlcnNpb24uanNvbicpO1xuXHRcdFx0XHRjb25zdCBwYXJzZWQgPSBKU09OLnBhcnNlKHZlcnNpb25GaWxlKTtcblx0XHRcdFx0aW5zdGFsbGVkVmVyc2lvblN0ciA9IChwYXJzZWQudmVyc2lvbiA/PyAnJykudHJpbSgpO1xuXHRcdFx0fSBjYXRjaCB7XG5cdFx0XHRcdGluc3RhbGxlZFZlcnNpb25TdHIgPSAnJztcblx0XHRcdH1cblxuXHRcdFx0Y29uc3QgbGF0ZXN0VmVyc2lvblN0ciA9ICh0aGlzLnBsdWdpbi5zZXR0aW5ncy5sYXRlc3RUb29sa2l0VmVyc2lvbiA/PyAnJykudHJpbSgpO1xuXG5cdFx0XHRpZiAoaW5zdGFsbGVkVmVyc2lvblN0ciAmJiBsYXRlc3RWZXJzaW9uU3RyICYmIGluc3RhbGxlZFZlcnNpb25TdHIgIT09IGxhdGVzdFZlcnNpb25TdHIpIHtcblx0XHRcdFx0Y29uc3Qgd2FybiA9IHdhcm5pbmdDb250YWluZXIuY3JlYXRlRWwoJ2RpdicsIHtcblx0XHRcdFx0XHR0ZXh0OiBgXHUyNkEwXHVGRTBGIE5ldyB2ZXJzaW9uIGF2YWlsYWJsZSAoJHtpbnN0YWxsZWRWZXJzaW9uU3RyfSBcdTIxOTIgJHtsYXRlc3RWZXJzaW9uU3RyfSkgXHUyMDE0IHVzZSByZWd1bGFyIHVwZGF0ZSBpbnN0ZWFkYCxcblx0XHRcdFx0fSk7XG5cdFx0XHRcdHdhcm4uYWRkQ2xhc3MoXCJ2di1zbWFsbFwiLCBcInZ2LW11dGVkXCIsIFwidnYtaXRhbGljXCIpO1xuXHRcdFx0XHR3YXJuLnNldEF0dHIoXG5cdFx0XHRcdFx0J3RpdGxlJyxcblx0XHRcdFx0XHQnRm9yY2UgdXBkYXRpbmcgd2hpbGUgYSBuZXcgdmVyc2lvbiBpcyBhdmFpbGFibGUgbWF5IHNraXAgaW1wb3J0YW50IGNoYW5nZXMuJ1xuXHRcdFx0XHQpO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBcdTI3QTFcdUZFMEYgUmlnaHQgc2lkZTogYWN0aW9uIGJ1dHRvbnNcblx0XHRcdGNvbnN0IGJ1dHRvbkdyb3VwID0gZml4QnV0dG9uUm93LmNyZWF0ZURpdigpO1xuXHRcdFx0YnV0dG9uR3JvdXAuYWRkQ2xhc3MoXCJzZXR0aW5ncy1idXR0b25yb3dcIik7XG5cblx0XHRcdGJ1dHRvbkdyb3VwXG5cdFx0XHRcdC5jcmVhdGVFbChcImJ1dHRvblwiLCB7IHRleHQ6IFwiRm9yY2UgVXBkYXRlIFZhdWx0XCIsIGNsczogXCJtb2QtY3RhXCIgfSlcblx0XHRcdFx0Lm9uY2xpY2sgPSBhc3luYyAoKSA9PiB7XG5cdFx0XHRcdFx0Ly8gZmlyc3QgZG8geW91ciBub3JtYWwgXHUyMDFDZm9yY2UgdXBkYXRlXHUyMDFEIGZsb3c6XG5cdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uZm9yY2VVcGRhdGVQcmV2aWV3QW5kQ29uZmlybSgpO1xuXHRcdFx0XHRcdC8vIHRoZW4sIGlmIHRoZSB1c2VyIGFza2VkIGZvciBhIHJlLXBhcnNlLCBkbyB0aGF0OlxuXHRcdFx0XHRcdGlmICh0aGlzLnBsdWdpbi5zZXR0aW5ncy5yZXBhcnNlR2FtZXNldHMpIHtcblx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnJlZnJlc2hHYW1lU2V0RGF0YSgpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fTtcblxuXG5cdFx0XHRidXR0b25Hcm91cC5jcmVhdGVFbCgnYnV0dG9uJywge1xuXHRcdFx0XHR0ZXh0OiAnVW5kbyBVcGRhdGUnXG5cdFx0XHR9KS5vbmNsaWNrID0gYXN5bmMgKCkgPT4ge1xuXHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi51bmRvRm9yY2VVcGRhdGUoKTtcblx0XHRcdH07XG5cblxuXHRcdFx0Ly8gXHUyNTAwXHUyNTAwIFRpbWVzdGFtcCByb3cgXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXG5cdFx0XHRjb25zdCBmaXhUaW1lc3RhbXBSb3cgPSBmaXhCb2R5LmNyZWF0ZURpdigpO1xuXHRcdFx0T2JqZWN0LmFzc2lnbihmaXhUaW1lc3RhbXBSb3cuc3R5bGUsIHtcblx0XHRcdFx0dGV4dEFsaWduOiAncmlnaHQnLFxuXHRcdFx0XHRmb250U2l6ZTogJzExcHgnLFxuXHRcdFx0XHRjb2xvcjogJ3ZhcigtLXRleHQtbXV0ZWQpJyxcblx0XHRcdFx0bWFyZ2luVG9wOiAnMC4yNWVtJ1xuXHRcdFx0fSk7XG5cdFx0XHRmaXhUaW1lc3RhbXBSb3cudGV4dENvbnRlbnQgPSBgTGFzdCBmb3JjZWQ6ICR7dGhpcy5wbHVnaW4uc2V0dGluZ3MubGFzdEZvcmNlVXBkYXRlXG5cdFx0XHRcdD8gbmV3IERhdGUodGhpcy5wbHVnaW4uc2V0dGluZ3MubGFzdEZvcmNlVXBkYXRlKS50b0xvY2FsZVN0cmluZygpXG5cdFx0XHRcdDogJ05vdCBmb3JjZWQgeWV0J1xuXHRcdFx0XHR9YDtcblxuXHRcdFx0Ly8gXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwIGRpdmlkZXIgXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXG5cdFx0XHRmaXhCb2R5LmNyZWF0ZUVsKCdkaXYnLCB7XG5cdFx0XHRcdGF0dHI6IHtcblx0XHRcdFx0XHRzdHlsZTogJ2JvcmRlci10b3A6IDFweCBzb2xpZCB2YXIoLS1kaXZpZGVyLWNvbG9yKTsgbWFyZ2luOiAwLjc1ZW0gMDsnXG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXG5cdFx0XHQvLyBcdTI1MDBcdTI1MDBcdTI1MDAgTmV3IFx1MjAxQ3JlLXBhcnNlIGdhbWVzZXRzXHUyMDFEIHRvZ2dsZSBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcblx0XHRcdGNvbnN0IHJlcGFyc2VSb3cgPSBmaXhCb2R5LmNyZWF0ZURpdigpO1xuXHRcdFx0cmVwYXJzZVJvdy5hZGRDbGFzcyhcInZ2LW10LXNtXCIpO1xuXHRcdFx0bmV3IFNldHRpbmcocmVwYXJzZVJvdylcblx0XHRcdFx0LnNldE5hbWUoXCJSZS1wYXJzZSBHYW1lIFNldHMgT24gRm9yY2UgVXBkYXRlXCIpXG5cdFx0XHRcdC5zZXREZXNjKFxuXHRcdFx0XHRcdFwiQWxzbyByZS1wYXJzZSB5b3VyIHJ1bGVzZXQgY29tcGVuZGl1bSBhbmQgcmVmZXJlbmNlIHNldHMuIFRoaXMgd29uJ3QgZGVsZXRlIGFueSBmaWxlcyBpbiB0aGUgQ29tcGVuZGl1bSBvciBSZWZlcmVuY2UgZm9sZGVycy5cIlxuXHRcdFx0XHQpXG5cblx0XHRcdFx0LmFkZFRvZ2dsZSgodG9nKSA9PlxuXHRcdFx0XHRcdHRvZ1xuXHRcdFx0XHRcdFx0LnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLnJlcGFyc2VHYW1lc2V0cylcblx0XHRcdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcblx0XHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MucmVwYXJzZUdhbWVzZXRzID0gdmFsdWU7XG5cdFx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuXHRcdFx0XHRcdFx0fSlcblx0XHRcdFx0KTtcblxuXHRcdFx0Ly8gXHUyNTAwXHUyNTAwXHUyNTAwIEJBQ0tVUCBTRUNUSU9OIFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFxuXHRcdFx0Y29uc3QgYmFja3VwRGV0YWlscyA9IGNvbnRhaW5lckVsLmNyZWF0ZUVsKCdkZXRhaWxzJywgeyBjbHM6ICd2ay1zZWN0aW9uJyB9KTtcblx0XHRcdGtlZXBPcGVuKGJhY2t1cERldGFpbHMgYXMgSFRNTERldGFpbHNFbGVtZW50LCAndnY6YmFja3VwJyk7XG5cblxuXHRcdFx0Y29uc3QgYmFja3VwU3VtbWFyeSA9IGJhY2t1cERldGFpbHMuY3JlYXRlRWwoJ3N1bW1hcnknLCB7IGNsczogJ3ZrLXNlY3Rpb24taGVhZGVyJyB9KTtcblxuXHRcdFx0T2JqZWN0LmFzc2lnbihiYWNrdXBTdW1tYXJ5LnN0eWxlLCB7XG5cdFx0XHRcdGRpc3BsYXk6ICdmbGV4Jyxcblx0XHRcdFx0ZmxleERpcmVjdGlvbjogJ2NvbHVtbicsXG5cdFx0XHRcdGFsaWduSXRlbXM6ICdzdHJldGNoJyxcblx0XHRcdFx0cGFkZGluZzogJzAuNWVtIDAnLFxuXHRcdFx0XHRib3JkZXJCb3R0b206ICcxcHggc29saWQgdmFyKC0tZGl2aWRlci1jb2xvciknLFxuXHRcdFx0XHRjdXJzb3I6ICdwb2ludGVyJyxcblx0XHRcdH0pO1xuXG5cdFx0XHRjb25zdCBiYWNrdXBUaXRsZVJvdyA9IGJhY2t1cFN1bW1hcnkuY3JlYXRlRGl2KHtcblx0XHRcdFx0YXR0cjoge1xuXHRcdFx0XHRcdHN0eWxlOiBgXG5cdFx0XHRkaXNwbGF5OiBmbGV4O1xuXHRcdFx0anVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuO1xuXHRcdFx0YWxpZ24taXRlbXM6IGZsZXgtZW5kO1xuXHRcdFx0YCxcblx0XHRcdFx0fSxcblx0XHRcdH0pO1xuXG5cdFx0XHRjb25zdCB0aXRsZUJsb2NrID0gYmFja3VwVGl0bGVSb3cuY3JlYXRlRGl2KHtcblx0XHRcdFx0YXR0cjogeyBzdHlsZTogJ2Rpc3BsYXk6IGZsZXg7IGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47JyB9XG5cdFx0XHR9KTtcblxuXHRcdFx0dGl0bGVCbG9jay5jcmVhdGVFbCgnaDUnLCB7IHRleHQ6ICdWYXVsdCBCYWNrdXBzJyB9KTtcblxuXHRcdFx0dGl0bGVCbG9jay5jcmVhdGVFbCgnZGl2Jywge1xuXHRcdFx0XHR0ZXh0OiAnVGhlIFRvb2xraXQgd2lsbCBiYWNrIHVwIHlvdXIgdmF1bHQgYXV0b21hdGljYWxseSBiZWZvcmUgdXBkYXRlcy4gWW91IGNhbiBhbHNvIGJhY2sgdXAgbWFudWFsbHkgYW55dGltZS4nLFxuXHRcdFx0XHRjbHM6ICdzZXR0aW5nLWl0ZW0tZGVzY3JpcHRpb24nLFxuXHRcdFx0XHRhdHRyOiB7IHN0eWxlOiAnbWFyZ2luLXRvcDogMC4yNWVtOycgfSxcblx0XHRcdH0pO1xuXG5cdFx0XHRjb25zdCBiYWNrdXBWdkljb24gPSBiYWNrdXBUaXRsZVJvdy5jcmVhdGVFbCgnc3BhbicsIHsgdGV4dDogJ1ZWJywgY2xzOiAndmstdG9nZ2xlLWljb24nIH0pO1xuXHRcdFx0T2JqZWN0LmFzc2lnbihiYWNrdXBWdkljb24uc3R5bGUsIHtcblx0XHRcdFx0Zm9udFdlaWdodDogJ2JvbGQnLFxuXHRcdFx0XHRkaXNwbGF5OiAnaW5saW5lLWJsb2NrJyxcblx0XHRcdFx0dHJhbnNpdGlvbjogJ3RyYW5zZm9ybSAwLjJzIGVhc2UnLFxuXHRcdFx0XHR0cmFuc2Zvcm1PcmlnaW46ICc1MCUgNTAlJyxcblx0XHRcdFx0dXNlclNlbGVjdDogJ25vbmUnLFxuXHRcdFx0fSk7XG5cdFx0XHR3aXJlUm90YXRlKGJhY2t1cERldGFpbHMgYXMgSFRNTERldGFpbHNFbGVtZW50LCBiYWNrdXBWdkljb24pO1xuXG5cdFx0XHRjb25zdCBiYWNrdXBCb2R5ID0gYmFja3VwRGV0YWlscy5jcmVhdGVEaXYoeyBjbHM6ICd2ay1zZWN0aW9uLWJvZHknIH0pO1xuXHRcdFx0YmFja3VwQm9keS5hZGRDbGFzcyhcInZ2LXBsLW1kXCIpO1xuXG5cdFx0XHRuZXcgU2V0dGluZyhiYWNrdXBCb2R5KVxuXHRcdFx0XHQuc2V0TmFtZSgnQXV0by1CYWNrdXAgQmVmb3JlIFVwZGF0ZScpXG5cdFx0XHRcdC5zZXREZXNjKCdDcmVhdGUgYSBmdWxsIC56aXAgb2YgdGhlIHZhdWx0IGJlZm9yZSBhcHBseWluZyB2ZXJzaW9uIHVwZGF0ZXMuIEZvcmNlIHVwZGF0ZXMgd2lsbCBvbmx5IGJhY2sgdXAgdGhlIGZpbGVzIHRoYXQgd2lsbCBiZSBtb2RpZmllZCBvciByZW1vdmVkLicpXG5cdFx0XHRcdC5hZGRUb2dnbGUodCA9PlxuXHRcdFx0XHRcdHRcblx0XHRcdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5hdXRvQmFja3VwQmVmb3JlVXBkYXRlKVxuXHRcdFx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jIHYgPT4ge1xuXHRcdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5hdXRvQmFja3VwQmVmb3JlVXBkYXRlID0gdjtcblx0XHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG5cdFx0XHRcdFx0XHR9KVxuXHRcdFx0XHQpO1xuXG5cdFx0XHRuZXcgU2V0dGluZyhiYWNrdXBCb2R5KVxuXHRcdFx0XHQuc2V0TmFtZSgnTWFudWFsIEJhY2t1cCcpXG5cdFx0XHRcdC5zZXREZXNjKCdJbW1lZGlhdGVseSBjcmVhdGUgYSB6aXAgYmFja3VwIG9mIHlvdXIgdmF1bHQnKVxuXHRcdFx0XHQuYWRkQnV0dG9uKGIgPT5cblx0XHRcdFx0XHRiXG5cdFx0XHRcdFx0XHQuc2V0QnV0dG9uVGV4dCgnQmFja3VwIFZhdWx0IE5vdycpXG5cdFx0XHRcdFx0XHQuc2V0Q3RhKClcblx0XHRcdFx0XHRcdC5vbkNsaWNrKGFzeW5jICgpID0+IHtcblx0XHRcdFx0XHRcdFx0Y29uc3QgcGF0aCA9IGF3YWl0IHRoaXMucGx1Z2luLmJhY2t1cE1hbmFnZXIuYmFja3VwVmF1bHRUb1ppcCgnbWFudWFsJyk7XG5cdFx0XHRcdFx0XHRcdG5ldyBOb3RpY2UoYEJhY2t1cCBjcmVhdGVkOiAke3BhdGh9YCk7XG5cdFx0XHRcdFx0XHR9KVxuXHRcdFx0XHQpO1xuXG5cdFx0XHRuZXcgU2V0dGluZyhiYWNrdXBCb2R5KVxuXHRcdFx0XHQuc2V0TmFtZSgnT3BlbiBCYWNrdXBzIEZvbGRlcicpXG5cdFx0XHRcdC5zZXREZXNjKCdPcGVuIHRoZSBiYWNrdXBzIGZvbGRlciBvbiBkaXNrLiBNYWNPUzogQ2FudCBzZWUgaXQ/IEhpdCBTaGlmdCtDbWQrKHBlcmlvZCkuJylcblx0XHRcdFx0LmFkZEJ1dHRvbihiID0+XG5cdFx0XHRcdFx0YlxuXHRcdFx0XHRcdFx0LnNldEJ1dHRvblRleHQoJ09wZW4gRm9sZGVyJylcblx0XHRcdFx0XHRcdC5vbkNsaWNrKGFzeW5jICgpID0+IHtcblx0XHRcdFx0XHRcdFx0dHJ5IHtcblxuXHRcdFx0XHRcdFx0XHRcdGNvbnN0IHZhdWx0QmFzZVBhdGg6IHN0cmluZyA9ICh0aGlzLnBsdWdpbi5hcHAudmF1bHQuYWRhcHRlciBhcyBhbnkpLmdldEJhc2VQYXRoKCk7XG5cblx0XHRcdFx0XHRcdFx0XHRjb25zdCBiYWNrdXBGb2xkZXJQYXRoID0gcGF0aC5qb2luKFxuXHRcdFx0XHRcdFx0XHRcdFx0dmF1bHRCYXNlUGF0aCxcblx0XHRcdFx0XHRcdFx0XHRcdCcudmF1bHQtYmFja3Vwcydcblx0XHRcdFx0XHRcdFx0XHQpO1xuXG5cdFx0XHRcdFx0XHRcdFx0Y29uc3QgeyBzaGVsbCB9ID0gKHdpbmRvdyBhcyBhbnkpLnJlcXVpcmUoJ2VsZWN0cm9uJyk7XG5cdFx0XHRcdFx0XHRcdFx0Y29uc3QgcmVzdWx0ID0gYXdhaXQgc2hlbGwub3BlblBhdGgoYmFja3VwRm9sZGVyUGF0aCk7XG5cdFx0XHRcdFx0XHRcdFx0aWYgKHR5cGVvZiByZXN1bHQgPT09ICdzdHJpbmcnICYmIHJlc3VsdC5sZW5ndGggPiAwKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRjb25zb2xlLmVycm9yKCdcdTI3NEMgc2hlbGwub3BlblBhdGggZXJyb3I6JywgcmVzdWx0KTtcblx0XHRcdFx0XHRcdFx0XHRcdG5ldyBOb3RpY2UoJ0NvdWxkIG5vdCBvcGVuIGJhY2t1cHMgZm9sZGVyLiBTZWUgY29uc29sZS4nKTtcblx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdH0gY2F0Y2ggKGVycikge1xuXHRcdFx0XHRcdFx0XHRcdGNvbnNvbGUuZXJyb3IoJ1x1Mjc0QyBDb3VsZCBub3Qgb3BlbiBiYWNrdXBzIGZvbGRlcjonLCBlcnIpO1xuXHRcdFx0XHRcdFx0XHRcdG5ldyBOb3RpY2UoJ0NvdWxkIG5vdCBvcGVuIGJhY2t1cHMgZm9sZGVyLiBTZWUgY29uc29sZS4nKTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fSlcblx0XHRcdFx0KTtcblx0XHRcdGJhY2t1cEJvZHkuY3JlYXRlRWwoJ2RpdicsIHtcblx0XHRcdFx0YXR0cjoge1xuXHRcdFx0XHRcdHN0eWxlOiAnYm9yZGVyLXRvcDogMXB4IHNvbGlkIHZhcigtLWRpdmlkZXItY29sb3IpOyBtYXJnaW4tdG9wOiAxLjVlbTsnXG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXG5cblxuXHRcdFx0Ly8gXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwIENVU1RPTSBVUERBVEVTIFNFQ1RJT04gXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXG5cdFx0XHRjb25zdCBjdXN0b21pemF0aW9uRGV0YWlscyA9IGNvbnRhaW5lckVsLmNyZWF0ZUVsKCdkZXRhaWxzJywgeyBjbHM6ICd2ay1zZWN0aW9uJyB9KTtcblx0XHRcdGtlZXBPcGVuKGN1c3RvbWl6YXRpb25EZXRhaWxzIGFzIEhUTUxEZXRhaWxzRWxlbWVudCwgJ3Z2OmN1c3RvbScpO1xuXG5cblx0XHRcdGNvbnN0IGN1c3RvbWl6YXRpb25TdW1tYXJ5ID0gY3VzdG9taXphdGlvbkRldGFpbHMuY3JlYXRlRWwoJ3N1bW1hcnknLCB7IGNsczogJ3ZrLXNlY3Rpb24taGVhZGVyJyB9KTtcblxuXHRcdFx0T2JqZWN0LmFzc2lnbihjdXN0b21pemF0aW9uU3VtbWFyeS5zdHlsZSwge1xuXHRcdFx0XHRkaXNwbGF5OiAnZmxleCcsXG5cdFx0XHRcdGZsZXhEaXJlY3Rpb246ICdjb2x1bW4nLFxuXHRcdFx0XHRhbGlnbkl0ZW1zOiAnZmxleC1zdGFydCcsXG5cdFx0XHRcdHBhZGRpbmc6ICcwLjVlbSAwJyxcblx0XHRcdFx0Y3Vyc29yOiAncG9pbnRlcicsXG5cdFx0XHR9KTtcblxuXHRcdFx0Y29uc3QgdGl0bGVSb3cgPSBjdXN0b21pemF0aW9uU3VtbWFyeS5jcmVhdGVEaXYoe1xuXHRcdFx0XHRhdHRyOiB7XG5cdFx0XHRcdFx0c3R5bGU6IGBcblx0XHRcdGRpc3BsYXk6IGZsZXg7XG5cdFx0XHR3aWR0aDogMTAwJTtcblx0XHRcdGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2Vlbjtcblx0XHRcdGFsaWduLWl0ZW1zOiBmbGV4LWVuZDtcblx0XHRcdGAsXG5cdFx0XHRcdH0sXG5cdFx0XHR9KTtcblxuXHRcdFx0Y29uc3QgY3VzdG9taXphdGlvblRpdGxlQmxvY2sgPSB0aXRsZVJvdy5jcmVhdGVEaXYoe1xuXHRcdFx0XHRhdHRyOiB7IHN0eWxlOiAnZGlzcGxheTogZmxleDsgZmxleC1kaXJlY3Rpb246IGNvbHVtbjsnIH1cblx0XHRcdH0pO1xuXG5cdFx0XHRjb25zdCBoNSA9IGN1c3RvbWl6YXRpb25UaXRsZUJsb2NrLmNyZWF0ZUVsKCdoNScpO1xuXHRcdFx0aDUuYXBwZW5kVGV4dCgnQ3VzdG9tIEZpbGUgTWFuYWdlbWVudCAnKTtcblxuXHRcdFx0Y3VzdG9taXphdGlvblRpdGxlQmxvY2suY3JlYXRlRWwoJ2RpdicsIHtcblx0XHRcdFx0dGV4dDogJ1NraXAgdXBkYXRlcyBvbiBjZXJ0YWluIGZpbGVzIG9yIHJlbWFwIHJlbG9jYXRlZCBUb29sa2l0IGZpbGVzIHNvIHRoZXkgY2FuIHVwZGF0ZS4nLFxuXHRcdFx0XHRjbHM6ICdzZXR0aW5nLWl0ZW0tZGVzY3JpcHRpb24nLFxuXHRcdFx0XHRhdHRyOiB7IHN0eWxlOiAnbWFyZ2luLXRvcDogMC4yNWVtOycgfSxcblx0XHRcdH0pO1xuXG5cdFx0XHRjb25zdCBjdXN0b21Wdkljb24gPSB0aXRsZVJvdy5jcmVhdGVFbCgnc3BhbicsIHsgdGV4dDogJ1ZWJywgY2xzOiAndmstdG9nZ2xlLWljb24nIH0pO1xuXHRcdFx0T2JqZWN0LmFzc2lnbihjdXN0b21Wdkljb24uc3R5bGUsIHtcblx0XHRcdFx0Zm9udFdlaWdodDogJ2JvbGQnLFxuXHRcdFx0XHRkaXNwbGF5OiAnaW5saW5lLWJsb2NrJyxcblx0XHRcdFx0dHJhbnNpdGlvbjogJ3RyYW5zZm9ybSAwLjJzIGVhc2UnLFxuXHRcdFx0XHR0cmFuc2Zvcm1PcmlnaW46ICc1MCUgNTAlJyxcblx0XHRcdFx0dXNlclNlbGVjdDogJ25vbmUnLFxuXHRcdFx0fSk7XG5cdFx0XHR3aXJlUm90YXRlKGN1c3RvbWl6YXRpb25EZXRhaWxzIGFzIEhUTUxEZXRhaWxzRWxlbWVudCwgY3VzdG9tVnZJY29uKTtcblxuXG5cdFx0XHRjb25zdCBjdXN0b21pemF0aW9uQm9keVdyYXBwZXIgPSBjdXN0b21pemF0aW9uRGV0YWlscy5jcmVhdGVEaXYoe1xuXHRcdFx0XHRhdHRyOiB7IHN0eWxlOiAncGFkZGluZy1sZWZ0OiAxZW07IHBhZGRpbmctcmlnaHQ6IDFlbTsnIH1cblx0XHRcdH0pO1xuXHRcdFx0Y29uc3QgY3VzdG9taXphdGlvbkJvZHkgPSBjdXN0b21pemF0aW9uQm9keVdyYXBwZXIuY3JlYXRlRGl2KHsgY2xzOiAndmstc2VjdGlvbi1ib2R5JyB9KTtcblxuXG5cblx0XHRcdC8vIFx1MjUwMFx1MjUwMFx1MjUwMCBTS0lQLUxJU1QgUEFORUwgXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXG5cblx0XHRcdGNvbnN0IHNraXBTZWN0aW9uID0gY3VzdG9taXphdGlvbkJvZHkuY3JlYXRlRGl2KCk7XG5cblx0XHRcdC8vIDEuIENyZWF0ZSBzZXR0aW5nIGJsb2NrIChtYXRjaGVzIE9ic2lkaWFuIG5hdGl2ZSBVSSBsYXlvdXQpXG5cdFx0XHRjb25zdCBzZXR0aW5nSXRlbSA9IHNraXBTZWN0aW9uLmNyZWF0ZURpdih7IGNsczogJ3NldHRpbmctaXRlbScgfSk7XG5cblx0XHRcdC8vIDIuIExlZnQgY29sdW1uOiB0aXRsZSArIGRlc2NyaXB0aW9uXG5cdFx0XHRjb25zdCBpbmZvID0gc2V0dGluZ0l0ZW0uY3JlYXRlRGl2KHsgY2xzOiAnc2V0dGluZy1pdGVtLWluZm8nIH0pO1xuXHRcdFx0aW5mby5jcmVhdGVEaXYoeyB0ZXh0OiAnU2tpcCBUb29sa2l0IEl0ZW1zJywgY2xzOiAnc2V0dGluZy1pdGVtLW5hbWUnIH0pO1xuXHRcdFx0aW5mby5jcmVhdGVEaXYoe1xuXHRcdFx0XHR0ZXh0OiAnRmlsZXMgbGlzdGVkIGhlcmUgd2lsbCBiZSBpZ25vcmVkIGR1cmluZyB0b29sa2l0IHVwZGF0ZXMuJyxcblx0XHRcdFx0Y2xzOiAnc2V0dGluZy1pdGVtLWRlc2NyaXB0aW9uJyxcblx0XHRcdH0pO1xuXG5cdFx0XHQvLyAzLiBSaWdodCBjb2x1bW46IGRyb3Bkb3duICsgYnV0dG9uXG5cdFx0XHRjb25zdCBjb250cm9sID0gc2V0dGluZ0l0ZW0uY3JlYXRlRGl2KHsgY2xzOiAnc2V0dGluZy1pdGVtLWNvbnRyb2wnIH0pO1xuXG5cdFx0XHRjb25zdCBkcm9wZG93biA9IG5ldyBEcm9wZG93bkNvbXBvbmVudChjb250cm9sKTtcblx0XHRcdGRyb3Bkb3duLnNlbGVjdEVsLmFkZENsYXNzKFwiZHJvcGRvd253aWR0aFwiKTtcblx0XHRcdGRyb3Bkb3duLmFkZE9wdGlvbignJywgJ1NlbGVjdCBhbiBpdGVtXHUyMDI2Jyk7XG5cdFx0XHR0aGlzLnBsdWdpbi5tYW5pZmVzdENhY2hlLmZpbGVzXG5cdFx0XHRcdC5maWx0ZXIoZiA9PiAhZi5vcHRpb25hbClcblx0XHRcdFx0LmZvckVhY2goZiA9PiBkcm9wZG93bi5hZGRPcHRpb24oZi5wYXRoLCBmLmRpc3BsYXlOYW1lID8/IGYucGF0aC5zcGxpdCgnLycpLnBvcCgpISkpO1xuXHRcdFx0dGhpcy5wbHVnaW4ubWFuaWZlc3RDYWNoZS5mb2xkZXJzXG5cdFx0XHRcdC5maWx0ZXIoZiA9PiAhZi5vcHRpb25hbClcblx0XHRcdFx0LmZvckVhY2goZiA9PiBkcm9wZG93bi5hZGRPcHRpb24oZi5wYXRoLCAoZi5kaXNwbGF5TmFtZSA/PyBmLnBhdGguc3BsaXQoJy8nKS5wb3AoKSEpICsgJy8gKGZvbGRlciknKSk7XG5cblx0XHRcdG5ldyBCdXR0b25Db21wb25lbnQoY29udHJvbClcblx0XHRcdFx0LnNldEJ1dHRvblRleHQoJ0FkZCcpXG5cdFx0XHRcdC5zZXRDdGEoKVxuXHRcdFx0XHQub25DbGljayhhc3luYyAoKSA9PiB7XG5cdFx0XHRcdFx0Y29uc3Qga2V5ID0gZHJvcGRvd24uZ2V0VmFsdWUoKTtcblx0XHRcdFx0XHRpZiAoIWtleSkgcmV0dXJuIG5ldyBOb3RpY2UoJ1BpY2sgc29tZXRoaW5nIHRvIHNraXAuJyk7XG5cdFx0XHRcdFx0aWYgKCF0aGlzLnBsdWdpbi5zZXR0aW5ncy5jdXN0b21QYXRocy5zb21lKGMgPT4gYy5tYW5pZmVzdEtleSA9PT0ga2V5KSkge1xuXHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MuY3VzdG9tUGF0aHMucHVzaCh7IHZhdWx0UGF0aDoga2V5LCBtYW5pZmVzdEtleToga2V5LCBkb1VwZGF0ZTogZmFsc2UgfSk7XG5cdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcblx0XHRcdFx0XHRcdHJlbmRlclNraXBUYWJsZSgpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSk7XG5cblx0XHRcdC8vIDQuIFRhYmxlIHdyYXBwZXIgZm9yIHNraXBwZWQgaXRlbXNcblx0XHRcdGNvbnN0IHNraXBUYWJsZVdyYXBwZXIgPSBza2lwU2VjdGlvbi5jcmVhdGVEaXYoeyBjbHM6ICd2ay10YWJsZS13cmFwcGVyJywgYXR0cjogeyBzdHlsZTogJ21hcmdpbi10b3A6MC43NWVtJyB9IH0pO1xuXG5cdFx0XHRjb25zdCByZW5kZXJTa2lwVGFibGUgPSAoKSA9PiB7XG5cdFx0XHRcdHNraXBUYWJsZVdyYXBwZXIuZW1wdHkoKTtcblxuXHRcdFx0XHRjb25zdCBpdGVtcyA9IHRoaXMucGx1Z2luLnNldHRpbmdzLmN1c3RvbVBhdGhzLmZpbHRlcihjID0+ICFjLmRvVXBkYXRlKTtcblxuXHRcdFx0XHRpZiAoaXRlbXMubGVuZ3RoID09PSAwKSB7XG5cdFx0XHRcdFx0Ly8gTm8gdGFibGUgaWYgbm90aGluZyB0byBzaG93IFx1MjAxNCBqdXN0IGFuIGVtcHR5IHN0YXRlIG1lc3NhZ2Vcblx0XHRcdFx0XHRjb25zdCBlbXB0eU1zZyA9IHNraXBUYWJsZVdyYXBwZXIuY3JlYXRlRWwoJ2RpdicsIHsgdGV4dDogJ05vIGl0ZW1zIHNraXBwZWQuJyB9KTtcblx0XHRcdFx0XHRlbXB0eU1zZy5hZGRDbGFzcyhcInNldHRpbmdzLWVtcHR5bXNnXCIpO1xuXHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdC8vIFJlbmRlciB0YWJsZSBvbmx5IGlmIGl0ZW1zIGV4aXN0XG5cdFx0XHRcdGNvbnN0IHRhYmxlID0gc2tpcFRhYmxlV3JhcHBlci5jcmVhdGVFbCgndGFibGUnLCB7IGNsczogJ3NldHRpbmctdGFibGUnIH0pO1xuXG5cdFx0XHRcdGNvbnN0IGhlYWRlciA9IHRhYmxlLmNyZWF0ZVRIZWFkKCkuaW5zZXJ0Um93KCk7XG5cdFx0XHRcdGhlYWRlci5pbnNlcnRDZWxsKCkudGV4dENvbnRlbnQgPSAnU2tpcHBlZCBGaWxlcy9Gb2xkZXJzJztcblxuXHRcdFx0XHRjb25zdCBib2R5ID0gdGFibGUuY3JlYXRlVEJvZHkoKTtcblxuXHRcdFx0XHRpdGVtcy5mb3JFYWNoKChlbnRyeSkgPT4ge1xuXHRcdFx0XHRcdGNvbnN0IHJvdyA9IGJvZHkuaW5zZXJ0Um93KCk7XG5cdFx0XHRcdFx0Y29uc3QgY29udGVudENlbGwgPSByb3cuaW5zZXJ0Q2VsbCgpO1xuXHRcdFx0XHRcdGNvbnRlbnRDZWxsLmFkZENsYXNzKFwic2V0dGluZ3MtZmlsZXRhYmxlXCIpO1xuXG5cdFx0XHRcdFx0Y29udGVudENlbGwuY3JlYXRlU3Bhbih7IHRleHQ6IGVudHJ5Lm1hbmlmZXN0S2V5IH0pO1xuXG5cdFx0XHRcdFx0Y29uc3QgcmVtb3ZlTGluayA9IGNvbnRlbnRDZWxsLmNyZWF0ZUVsKCdhJywgeyB0ZXh0OiAnUmVtb3ZlIGVudHJ5JywgaHJlZjogJyMnIH0pO1xuXHRcdFx0XHRcdHJlbW92ZUxpbmsuYWRkQ2xhc3MoXCJzZXR0aW5ncy1yZW1vdmVsaW5rXCIpO1xuXHRcdFx0XHRcdHJlbW92ZUxpbmsub25jbGljayA9IGFzeW5jIChlKSA9PiB7XG5cdFx0XHRcdFx0XHRlLnByZXZlbnREZWZhdWx0KCk7XG5cdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5jdXN0b21QYXRocy5yZW1vdmUoZW50cnkpO1xuXHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG5cdFx0XHRcdFx0XHRyZW5kZXJTa2lwVGFibGUoKTtcblx0XHRcdFx0XHR9O1xuXHRcdFx0XHR9KTtcblx0XHRcdH07XG5cblx0XHRcdHJlbmRlclNraXBUYWJsZSgpO1xuXG5cdFx0XHQvLyBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDAgU3BhY2VyICYgRGl2aWRlciBCZWZvcmUgUmVtYXAgUGFuZWwgXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXG5cdFx0XHRjdXN0b21pemF0aW9uQm9keS5jcmVhdGVFbCgnZGl2Jywge1xuXHRcdFx0XHRhdHRyOiB7IHN0eWxlOiAnaGVpZ2h0OiAxZW07IGJvcmRlci10b3A6IDFweCBzb2xpZCB2YXIoLS1kaXZpZGVyLWNvbG9yKTsgbWFyZ2luOiAxZW0gMDsnIH1cblx0XHRcdH0pO1xuXG5cdFx0XHQvLyBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDAgUkVNQVAgUEFORUwgXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXG5cdFx0XHRjb25zdCByZW1hcFNlY3Rpb24gPSBjdXN0b21pemF0aW9uQm9keS5jcmVhdGVEaXYoKTtcblxuXG5cdFx0XHQvLyBTZXR0aW5nLXN0eWxlIHdyYXBwZXJcblx0XHRcdGNvbnN0IHJlbWFwU2V0dGluZyA9IHJlbWFwU2VjdGlvbi5jcmVhdGVEaXYoeyBjbHM6ICdzZXR0aW5nLWl0ZW0nIH0pO1xuXG5cdFx0XHQvLyBMZWZ0OiBoZWFkZXIgKyBkZXNjcmlwdGlvbiAodW5jaGFuZ2VkIHN0eWxlKVxuXHRcdFx0Y29uc3QgcmVtYXBJbmZvID0gcmVtYXBTZXR0aW5nLmNyZWF0ZURpdih7IGNsczogJ3NldHRpbmctaXRlbS1pbmZvJyB9KTtcblx0XHRcdHJlbWFwSW5mby5jcmVhdGVEaXYoeyB0ZXh0OiAnUmVtYXAgRmlsZSBQYXRocycsIGNsczogJ3NldHRpbmctaXRlbS1uYW1lJyB9KTtcblx0XHRcdHJlbWFwSW5mby5jcmVhdGVEaXYoe1xuXHRcdFx0XHR0ZXh0OiAnUmVtYXAgdG9vbGtpdCBmaWxlcyB2YXVsdCBwYXRocyBpZiB5b3UgY2hvc2UgdG8gbW92ZSBhbnl0aGluZy4gTW92aW5nIGZpbGVzIHdpdGhvdXQgcmVtYXBwaW5nIHdpbGwgcmVzdWx0IGluIGR1cGxpY2F0ZSBhbmQvb3Igb3V0LW9mLWRhdGUgZmlsZXMgYWZ0ZXIgdXBkYXRlLicsXG5cdFx0XHRcdGNsczogJ3NldHRpbmctaXRlbS1kZXNjcmlwdGlvbidcblx0XHRcdH0pO1xuXG5cdFx0XHQvLyBOZXcgZnVsbC13aWR0aCBibG9jayBiZWxvdyBmb3IgY29udHJvbHNcblx0XHRcdGNvbnN0IHJlbWFwQ29udHJvbEJsb2NrID0gcmVtYXBTZWN0aW9uLmNyZWF0ZURpdih7IGNsczogJ3ZrLWlubGluZS1hZGQtY29udHJvbHMnIH0pO1xuXHRcdFx0cmVtYXBDb250cm9sQmxvY2suYWRkQ2xhc3MoXCJzZXR0aW5ncy1yZW1hcGNvbnRyb2xcIik7XG5cblx0XHRcdGxldCByZW1hcERyb3A6IERyb3Bkb3duQ29tcG9uZW50O1xuXHRcdFx0bGV0IHJlbWFwSW5wdXQ6IEhUTUxJbnB1dEVsZW1lbnQ7XG5cblx0XHRcdHJlbWFwRHJvcCA9IG5ldyBEcm9wZG93bkNvbXBvbmVudChyZW1hcENvbnRyb2xCbG9jayk7XG5cdFx0XHRyZW1hcERyb3Auc2VsZWN0RWwuYWRkQ2xhc3MoXCJkcm9wZG93bndpZHRoXCIpO1xuXHRcdFx0cmVtYXBEcm9wLmFkZE9wdGlvbignJywgJ1NlbGVjdCBhbiBpdGVtXHUyMDI2Jyk7XG5cdFx0XHR0aGlzLnBsdWdpbi5tYW5pZmVzdENhY2hlLmZpbGVzLmZvckVhY2goZiA9PlxuXHRcdFx0XHRyZW1hcERyb3AuYWRkT3B0aW9uKGYucGF0aCwgZi5kaXNwbGF5TmFtZSA/PyBmLnBhdGguc3BsaXQoJy8nKS5wb3AoKSEpXG5cdFx0XHQpO1xuXHRcdFx0dGhpcy5wbHVnaW4ubWFuaWZlc3RDYWNoZS5mb2xkZXJzLmZvckVhY2goZiA9PlxuXHRcdFx0XHRyZW1hcERyb3AuYWRkT3B0aW9uKGYucGF0aCwgKGYuZGlzcGxheU5hbWUgPz8gZi5wYXRoLnNwbGl0KCcvJykucG9wKCkhKSArICcvIChmb2xkZXIpJylcblx0XHRcdCk7XG5cblx0XHRcdGNvbnN0IHNlYXJjaFdyYXBwZXIgPSByZW1hcENvbnRyb2xCbG9jay5jcmVhdGVEaXYoKTtcblx0XHRcdGNvbnN0IHNlYXJjaENvbXBvbmVudCA9IG5ldyBTZWFyY2hDb21wb25lbnQoc2VhcmNoV3JhcHBlcik7XG5cdFx0XHRzZWFyY2hDb21wb25lbnQuc2V0UGxhY2Vob2xkZXIoJ1NlYXJjaCB2YXVsdCBwYXRoXHUyMDI2Jyk7XG5cdFx0XHRuZXcgRmlsZVBhdGhTdWdnZXN0ZXIodGhpcy5hcHAsIHNlYXJjaENvbXBvbmVudC5pbnB1dEVsKTtcblx0XHRcdHJlbWFwSW5wdXQgPSBzZWFyY2hDb21wb25lbnQuaW5wdXRFbDtcblxuXHRcdFx0bmV3IEJ1dHRvbkNvbXBvbmVudChyZW1hcENvbnRyb2xCbG9jaylcblx0XHRcdFx0LnNldEJ1dHRvblRleHQoJ0FkZCBSZW1hcCcpXG5cdFx0XHRcdC5zZXRDdGEoKVxuXHRcdFx0XHQub25DbGljayhhc3luYyAoKSA9PiB7XG5cdFx0XHRcdFx0Y29uc3Qga2V5ID0gcmVtYXBEcm9wLmdldFZhbHVlKCk7XG5cdFx0XHRcdFx0Y29uc3QgdnAgPSByZW1hcElucHV0LnZhbHVlLnRyaW0oKTtcblx0XHRcdFx0XHRpZiAoIWtleSB8fCAhdnApIHJldHVybiBuZXcgTm90aWNlKCdTZWxlY3QgYW4gaXRlbSBhbmQgZW50ZXIgYSB2YXVsdCBwYXRoLicpO1xuXHRcdFx0XHRcdGlmICghdGhpcy5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKHZwKSkgcmV0dXJuIG5ldyBOb3RpY2UoJ1ZhdWx0IHBhdGggbm90IGZvdW5kLicpO1xuXHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmN1c3RvbVBhdGhzID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MuY3VzdG9tUGF0aHMuZmlsdGVyKGMgPT4gYy5tYW5pZmVzdEtleSAhPT0ga2V5KTtcblx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5jdXN0b21QYXRocy5wdXNoKHsgbWFuaWZlc3RLZXk6IGtleSwgdmF1bHRQYXRoOiB2cCwgZG9VcGRhdGU6IHRydWUgfSk7XG5cdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG5cdFx0XHRcdFx0cmVtYXBJbnB1dC52YWx1ZSA9ICcnO1xuXHRcdFx0XHRcdHJlbWFwRHJvcC5zZXRWYWx1ZSgnJyk7XG5cdFx0XHRcdFx0cmVuZGVyUmVtYXBQYW5lbCgpO1xuXHRcdFx0XHR9KTtcblxuXG5cdFx0XHQvLyA0LiBUYWJsZSB3cmFwcGVyXG5cdFx0XHRjb25zdCByZW1hcFRhYmxlV3JhcHBlciA9IHJlbWFwU2VjdGlvbi5jcmVhdGVEaXYoeyBjbHM6ICd2ay10YWJsZS13cmFwcGVyJywgYXR0cjogeyBzdHlsZTogJ21hcmdpbi10b3A6IDAuNzVlbScgfSB9KTtcblxuXHRcdFx0Y29uc3QgcmVuZGVyUmVtYXBQYW5lbCA9ICgpID0+IHtcblx0XHRcdFx0cmVtYXBUYWJsZVdyYXBwZXIuZW1wdHkoKTtcblxuXHRcdFx0XHRjb25zdCB0b1JlbWFwID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MuY3VzdG9tUGF0aHMuZmlsdGVyKGMgPT4gYy5kb1VwZGF0ZSk7XG5cblx0XHRcdFx0aWYgKHRvUmVtYXAubGVuZ3RoID09PSAwKSB7XG5cdFx0XHRcdFx0Y29uc3QgZW1wdHlNc2cgPSByZW1hcFRhYmxlV3JhcHBlci5jcmVhdGVFbCgnZGl2JywgeyB0ZXh0OiAnTm8gY3VzdG9tIHBhdGhzIGRlZmluZWQuJyB9KTtcblx0XHRcdFx0XHRlbXB0eU1zZy5hZGRDbGFzcyhcInNldHRpbmdzLWVtcHR5bXNnXCIpO1xuXHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdGNvbnN0IHRhYmxlID0gcmVtYXBUYWJsZVdyYXBwZXIuY3JlYXRlRWwoJ3RhYmxlJywgeyBjbHM6ICdzZXR0aW5nLXRhYmxlJyB9KTtcblx0XHRcdFx0Y29uc3QgaGVhZCA9IHRhYmxlLmNyZWF0ZVRIZWFkKCkuaW5zZXJ0Um93KCk7XG5cdFx0XHRcdFsnVG9vbGl0IEl0ZW0nLCAnTmV3IFZhdWx0IFBhdGgnLCAnJ10uZm9yRWFjaCh0eHQgPT4gaGVhZC5pbnNlcnRDZWxsKCkudGV4dENvbnRlbnQgPSB0eHQpO1xuXG5cdFx0XHRcdGNvbnN0IGJvZHkgPSB0YWJsZS5jcmVhdGVUQm9keSgpO1xuXHRcdFx0XHR0b1JlbWFwLmZvckVhY2goZW50cnkgPT4ge1xuXHRcdFx0XHRcdGNvbnN0IHJvdyA9IGJvZHkuaW5zZXJ0Um93KCk7XG5cblx0XHRcdFx0XHQvLyBNYW5pZmVzdCBLZXlcblx0XHRcdFx0XHRyb3cuaW5zZXJ0Q2VsbCgpLnRleHRDb250ZW50ID0gZW50cnkubWFuaWZlc3RLZXk7XG5cblx0XHRcdFx0XHQvLyBWYXVsdCBQYXRoXG5cdFx0XHRcdFx0cm93Lmluc2VydENlbGwoKS50ZXh0Q29udGVudCA9IGVudHJ5LnZhdWx0UGF0aDtcblxuXHRcdFx0XHRcdC8vIFJlbW92ZSBsaW5rXG5cdFx0XHRcdFx0Y29uc3QgcmVtb3ZlQ2VsbCA9IHJvdy5pbnNlcnRDZWxsKCk7XG5cdFx0XHRcdFx0Y29uc3QgcmVtb3ZlTGluayA9IHJlbW92ZUNlbGwuY3JlYXRlRWwoJ2EnLCB7IHRleHQ6ICdSZW1vdmUgZW50cnknLCBocmVmOiAnIycgfSk7XG5cdFx0XHRcdFx0cmVtb3ZlTGluay5hZGRDbGFzcyhcInNldHRpbmdzLXJlbW92ZWxpbmtcIik7XG5cdFx0XHRcdFx0cmVtb3ZlTGluay5vbmNsaWNrID0gYXN5bmMgKGUpID0+IHtcblx0XHRcdFx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcblx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmN1c3RvbVBhdGhzLnJlbW92ZShlbnRyeSk7XG5cdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcblx0XHRcdFx0XHRcdHJlbmRlclJlbWFwUGFuZWwoKTtcblx0XHRcdFx0XHR9O1xuXHRcdFx0XHR9KTtcblx0XHRcdH07XG5cblx0XHRcdHJlbmRlclJlbWFwUGFuZWwoKTtcblxuXHRcdFx0Ly8gQWRkIGRpdmlkZXIgaW5zaWRlIHRoZSBib2R5LCBhdCB0aGUgdG9wXG5cdFx0XHRjdXN0b21pemF0aW9uQm9keS5jcmVhdGVFbCgnZGl2Jywge1xuXHRcdFx0XHRhdHRyOiB7XG5cdFx0XHRcdFx0c3R5bGU6ICdib3JkZXItdG9wOiAxcHggc29saWQgdmFyKC0tZGl2aWRlci1jb2xvcik7IG1hcmdpbjogMC41ZW0gMDsnXG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXG5cdFx0XHQvLyBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDAgVE9PTEtJVCBCRUhBVklPUiBTRUNUSU9OIFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFxuXHRcdFx0Y29uc3QgYmVoYXZpb3JEZXRhaWxzID0gY29udGFpbmVyRWwuY3JlYXRlRWwoJ2RldGFpbHMnLCB7IGNsczogJ3ZrLXNlY3Rpb24nIH0pO1xuXHRcdFx0a2VlcE9wZW4oYmVoYXZpb3JEZXRhaWxzIGFzIEhUTUxEZXRhaWxzRWxlbWVudCwgJ3Z2OmJlaGF2aW9yJyk7XG5cblxuXHRcdFx0Y29uc3QgYmVoYXZpb3JTdW1tYXJ5ID0gYmVoYXZpb3JEZXRhaWxzLmNyZWF0ZUVsKCdzdW1tYXJ5JywgeyBjbHM6ICd2ay1zZWN0aW9uLWhlYWRlcicgfSk7XG5cdFx0XHRPYmplY3QuYXNzaWduKGJlaGF2aW9yU3VtbWFyeS5zdHlsZSwge1xuXHRcdFx0XHRkaXNwbGF5OiAnZmxleCcsXG5cdFx0XHRcdGZsZXhEaXJlY3Rpb246ICdjb2x1bW4nLFxuXHRcdFx0XHRhbGlnbkl0ZW1zOiAnc3RyZXRjaCcsXG5cdFx0XHRcdHBhZGRpbmc6ICcwLjVlbSAwJyxcblx0XHRcdFx0Ym9yZGVyQm90dG9tOiAnMXB4IHNvbGlkIHZhcigtLWRpdmlkZXItY29sb3IpJyxcblx0XHRcdFx0Y3Vyc29yOiAncG9pbnRlcicsXG5cdFx0XHR9KTtcblxuXHRcdFx0Y29uc3QgYmVoYXZpb3JSb3cgPSBiZWhhdmlvclN1bW1hcnkuY3JlYXRlRGl2KHtcblx0XHRcdFx0YXR0cjogeyBzdHlsZTogJ2Rpc3BsYXk6ZmxleDsganVzdGlmeS1jb250ZW50OnNwYWNlLWJldHdlZW47IGFsaWduLWl0ZW1zOmZsZXgtZW5kOycgfVxuXHRcdFx0fSk7XG5cblx0XHRcdGNvbnN0IGJlaGF2aW9yVGl0bGUgPSBiZWhhdmlvclJvdy5jcmVhdGVEaXYoeyBhdHRyOiB7IHN0eWxlOiAnZGlzcGxheTpmbGV4OyBmbGV4LWRpcmVjdGlvbjpjb2x1bW47JyB9IH0pO1xuXHRcdFx0YmVoYXZpb3JUaXRsZS5jcmVhdGVFbCgnaDUnLCB7IHRleHQ6ICdUb29sa2l0IEJlaGF2aW9yJyB9KTtcblx0XHRcdGJlaGF2aW9yVGl0bGUuY3JlYXRlRWwoJ2RpdicsIHtcblx0XHRcdFx0dGV4dDogJ0ZpbmUtdHVuZSBob3cgdGhlIHRvb2xraXQgYmVoYXZlcyBkdXJpbmcgY29tbW9uIHdvcmtmbG93cy4nLFxuXHRcdFx0XHRjbHM6ICdzZXR0aW5nLWl0ZW0tZGVzY3JpcHRpb24nLFxuXHRcdFx0XHRhdHRyOiB7IHN0eWxlOiAnbWFyZ2luLXRvcDowLjI1ZW07JyB9LFxuXHRcdFx0fSk7XG5cblx0XHRcdGNvbnN0IGJlaGF2aW9ySWNvbiA9IGJlaGF2aW9yUm93LmNyZWF0ZUVsKCdzcGFuJywgeyB0ZXh0OiAnVlYnLCBjbHM6ICd2ay10b2dnbGUtaWNvbicgfSk7XG5cdFx0XHRPYmplY3QuYXNzaWduKGJlaGF2aW9ySWNvbi5zdHlsZSwge1xuXHRcdFx0XHRmb250V2VpZ2h0OiAnYm9sZCcsXG5cdFx0XHRcdGRpc3BsYXk6ICdpbmxpbmUtYmxvY2snLFxuXHRcdFx0XHR0cmFuc2l0aW9uOiAndHJhbnNmb3JtIDAuMnMgZWFzZScsXG5cdFx0XHRcdHRyYW5zZm9ybU9yaWdpbjogJzUwJSA1MCUnLFxuXHRcdFx0XHR1c2VyU2VsZWN0OiAnbm9uZScsXG5cdFx0XHR9KTtcblx0XHRcdHdpcmVSb3RhdGUoYmVoYXZpb3JEZXRhaWxzIGFzIEhUTUxEZXRhaWxzRWxlbWVudCwgYmVoYXZpb3JJY29uKTtcblxuXG5cdFx0XHRjb25zdCBiZWhhdmlvckJvZHkgPSBiZWhhdmlvckRldGFpbHMuY3JlYXRlRGl2KHsgY2xzOiAndmstc2VjdGlvbi1ib2R5JyB9KTtcblx0XHRcdGJlaGF2aW9yQm9keS5hZGRDbGFzcyhcInZ2LXBsLW1kXCIpO1xuXG5cdFx0XHRuZXcgU2V0dGluZyhiZWhhdmlvckJvZHkpXG5cdFx0XHRcdC5zZXROYW1lKFwiRW5hYmxlIFBhZ2UgUHJldmlld3MgaW4gU2lkZWJhcnNcIilcblx0XHRcdFx0LnNldERlc2MoXCJJZiBlbmFibGVkLCBsaW5rcyBpbiBWVnVuZGVybG9yZSBzaWRlYmFycyAoVlZvcmxkYnVpbGRpbmcsIEdhbWVwbGF5KSB3aWxsIHNob3cgaG92ZXIgcHJldmlld3MuXCIpXG5cdFx0XHRcdC5hZGRUb2dnbGUoKHRvZ2dsZSkgPT4ge1xuXHRcdFx0XHRcdHRvZ2dsZS5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5lbmFibGVTaWRlYmFyUHJldmlld3MgPz8gZmFsc2UpO1xuXHRcdFx0XHRcdHRvZ2dsZS5vbkNoYW5nZShhc3luYyAodmFsOiBib29sZWFuKSA9PiB7XG5cdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5lbmFibGVTaWRlYmFyUHJldmlld3MgPSB2YWw7XG5cdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcblx0XHRcdFx0XHRcdCh0aGlzLmFwcC53b3Jrc3BhY2UgYXMgYW55KS50cmlnZ2VyKCd2djpzaWRlYmFyLXByZXZpZXdzLWNoYW5nZWQnLCB7IGVuYWJsZWQ6IHZhbCB9KTtcblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0fSk7XG5cdFx0XHRuZXcgU2V0dGluZyhiZWhhdmlvckJvZHkpXG5cdFx0XHRcdC5zZXROYW1lKCdTb3J0IEFkdmVudHVyZSBBc3NldHMgaW4gU2lkZWJhcicpXG5cdFx0XHRcdC5zZXREZXNjKCdDaG9vc2UgaG93IGxpbmtzIGFyZSBzb3J0ZWQgKHN3aXRjaCBhZHZlbnR1cmVzIGluIHRoZSBzaWRlYmFyIHRvIHNlZSB0aGUgZWZmZWN0KScpXG5cdFx0XHRcdC5hZGREcm9wZG93bihkID0+IHtcblx0XHRcdFx0XHRkLmFkZE9wdGlvbignbmFtZScsICdBbHBoYWJldGljYWwnKTtcblx0XHRcdFx0XHRkLmFkZE9wdGlvbigncmVjZW50JywgJ01vc3QgUmVjZW50Jyk7XG5cdFx0XHRcdFx0ZC5hZGRPcHRpb24oJ3JlZnMnLCAnTW9zdCBMaW5rZWQnKTtcblx0XHRcdFx0XHRkLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmFkdmVudHVyZVNvcnQpO1xuXHRcdFx0XHRcdGQub25DaGFuZ2UoYXN5bmMgKHYpID0+IHtcblx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmFkdmVudHVyZVNvcnQgPSB2IGFzIGFueTtcblx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuXHRcdFx0XHRcdFx0KHRoaXMuYXBwLndvcmtzcGFjZSBhcyBhbnkpLnRyaWdnZXI/LigndnY6c2lkZWJhci1yZWZyZXNoJyk7XG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdH0pO1xuXG5cdFx0XHRjb25zdCB2aXNpYmxlQ2F0cyA9IG5ldyBTZXR0aW5nKGJlaGF2aW9yQm9keSlcblx0XHRcdFx0LnNldE5hbWUoJ1Zpc2libGUgQWR2ZW50dXJlIENhdGVnb3JpZXMnKVxuXHRcdFx0XHQuc2V0RGVzYygnQ2hvb3NlIHdoaWNoIGNhdGVnb3JpZXMgYXBwZWFyIGluIHRoZSBBZHZlbnR1cmUgc2lkZWJhciAoc3dpdGNoIGFkdmVudHVyZXMgaW4gdGhlIHNpZGViYXIgdG8gc2VlIHRoZSBlZmZlY3QpJyk7XG5cblx0XHRcdGNvbnN0IHBhbmVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG5cdFx0XHRwYW5lbC5jbGFzc05hbWUgPSAndmstc2VjdGlvbiB2ay1pbmxpbmUtY29sbGFwc2UnO1xuXHRcdFx0dmlzaWJsZUNhdHMuc2V0dGluZ0VsLmluc2VydEFkamFjZW50RWxlbWVudCgnYWZ0ZXJlbmQnLCBwYW5lbCk7XG5cblx0XHRcdGNvbnN0IGJvZHkgPSBwYW5lbC5jcmVhdGVEaXYoeyBjbHM6ICd2ay1zZWN0aW9uLWJvZHkgdnYtcGwtbWQnIH0pO1xuXG5cdFx0XHQvLyAyKSBSaWdodC1zaWRlIHRyaWdnZXIgcGlsbCAocmV1c2UgZnJvbSBwcmV2aW91cyBjb2RlKVxuXHRcdFx0Y29uc3QgdHJpZ2dlciA9IHZpc2libGVDYXRzLmNvbnRyb2xFbC5jcmVhdGVFbCgnYnV0dG9uJywge1xuXHRcdFx0XHRjbHM6ICd2di1jYXRzLXRyaWdnZXInLFxuXHRcdFx0fSk7XG5cdFx0XHR0cmlnZ2VyLnNldEF0dHIoJ3R5cGUnLCAnYnV0dG9uJyk7XG5cdFx0XHR0cmlnZ2VyLmNyZWF0ZVNwYW4oeyB0ZXh0OiAnQ2F0ZWdvcmllcyAgJywgY2xzOiAndnYtY2F0cy10cmlnZ2VyLWxhYmVsJyB9KTtcblx0XHRcdC8vIDMpIFNob3cvaGlkZSB3aXRob3V0IDxkZXRhaWxzPlxuXHRcdFx0bGV0IG9wZW4gPSBmYWxzZTtcblx0XHRcdGNvbnN0IHNldE9wZW4gPSAodjogYm9vbGVhbikgPT4ge1xuXHRcdFx0XHRvcGVuID0gdjtcblx0XHRcdFx0cGFuZWwuc3R5bGUuZGlzcGxheSA9IHYgPyAnJyA6ICdub25lJztcblx0XHRcdH07XG5cblx0XHRcdHRyaWdnZXIuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuXHRcdFx0XHRlLnByZXZlbnREZWZhdWx0KCk7XG5cdFx0XHRcdHNldE9wZW4oIW9wZW4pO1xuXHRcdFx0fSk7XG5cblx0XHRcdC8vIDQpIFJlbmRlciBjb250ZW50cyAoc2FtZSBhcyBiZWZvcmUpXG5cdFx0XHRjb25zdCBBTEwgPSBnZXRBZHZlbnR1cmVDYXRlZ29yeUlkcygpO1xuXHRcdFx0Y29uc3QgREVGQVVMVF9TVUJTRVQgPSBbJ25wY3MnLCAnZmFjdGlvbnMnLCAnbW9uc3RlcnMnLCAnaGlzdG9yeScsICdwbGFjZXMnXTtcblxuXHRcdFx0Y29uc3QgZ2V0U2VsZWN0aW9uID0gKCkgPT5cblx0XHRcdFx0bmV3IFNldDxzdHJpbmc+KFxuXHRcdFx0XHRcdEFycmF5LmlzQXJyYXkodGhpcy5wbHVnaW4uc2V0dGluZ3MuZW5hYmxlZEFkdmVudHVyZUNhdGVnb3JpZXMpXG5cdFx0XHRcdFx0XHQ/IHRoaXMucGx1Z2luLnNldHRpbmdzLmVuYWJsZWRBZHZlbnR1cmVDYXRlZ29yaWVzXG5cdFx0XHRcdFx0XHQ6IEFMTFxuXHRcdFx0XHQpO1xuXG5cdFx0XHRjb25zdCBzYXZlID0gYXN5bmMgKHNlbDogU2V0PHN0cmluZz4pID0+IHtcblx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MuZW5hYmxlZEFkdmVudHVyZUNhdGVnb3JpZXMgPSBBcnJheS5mcm9tKHNlbCk7XG5cdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuXHRcdFx0XHQodGhpcy5hcHAud29ya3NwYWNlIGFzIGFueSkudHJpZ2dlcj8uKCd2djpzaWRlYmFyLXJlZnJlc2gnKTtcblx0XHRcdH07XG5cblx0XHRcdGNvbnN0IHJlbmRlciA9ICgpID0+IHtcblx0XHRcdFx0Ym9keS5lbXB0eSgpO1xuXG5cdFx0XHRcdC8vIHRvb2xzXG5cdFx0XHRcdGNvbnN0IHRvb2xzID0gYm9keS5jcmVhdGVEaXYoeyBhdHRyOiB7IHN0eWxlOiAnZGlzcGxheTpmbGV4OyBnYXA6LjVyZW07IG1hcmdpbi1ib3R0b206LjVyZW07JyB9IH0pO1xuXHRcdFx0XHRjb25zdCBtayA9IChsYWJlbDogc3RyaW5nLCBhY3Q6ICgpID0+IHZvaWQpID0+IHtcblx0XHRcdFx0XHRjb25zdCBiID0gdG9vbHMuY3JlYXRlRWwoJ2J1dHRvbicsIHsgdGV4dDogbGFiZWwsIGNsczogJ3Z2LWNhdHMtYnRuJyB9KTtcblx0XHRcdFx0XHRiLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgYXN5bmMgKGUpID0+IHtcblx0XHRcdFx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcblx0XHRcdFx0XHRcdGNvbnN0IHNlbCA9IGdldFNlbGVjdGlvbigpO1xuXHRcdFx0XHRcdFx0aWYgKGxhYmVsID09PSAnQWxsJykgeyBBTEwuZm9yRWFjaChpZCA9PiBzZWwuYWRkKGlkKSk7IH1cblx0XHRcdFx0XHRcdGlmIChsYWJlbCA9PT0gJ0RlZmF1bHRzJykgeyBzZWwuY2xlYXIoKTsgREVGQVVMVF9TVUJTRVQuZm9yRWFjaChpZCA9PiBzZWwuYWRkKGlkKSk7IH1cblx0XHRcdFx0XHRcdGF3YWl0IHNhdmUoc2VsKTtcblx0XHRcdFx0XHRcdHJlbmRlcigpO1xuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHR9O1xuXHRcdFx0XHRtaygnQWxsJywgKCkgPT4geyB9KTtcblx0XHRcdFx0bWsoJ0RlZmF1bHRzJywgKCkgPT4geyB9KTtcblxuXHRcdFx0XHQvLyBncmlkXG5cdFx0XHRcdGNvbnN0IGdyaWQgPSBib2R5LmNyZWF0ZURpdih7IGF0dHI6IHsgc3R5bGU6ICdkaXNwbGF5OmdyaWQ7IGdyaWQtdGVtcGxhdGUtY29sdW1uczogcmVwZWF0KGF1dG8tZml0LCBtaW5tYXgoMTgwcHgsIDFmcikpOyBnYXA6LjI1cmVtIC43NXJlbTsnIH0gfSk7XG5cdFx0XHRcdGNvbnN0IHNlbCA9IGdldFNlbGVjdGlvbigpO1xuXHRcdFx0XHRBRFZFTlRVUkVfQ0FURUdPUllfREVGUy5mb3JFYWNoKGNhdCA9PiB7XG5cdFx0XHRcdFx0Y29uc3Qgcm93ID0gZ3JpZC5jcmVhdGVFbCgnbGFiZWwnLCB7IGF0dHI6IHsgc3R5bGU6ICdkaXNwbGF5OmZsZXg7IGFsaWduLWl0ZW1zOmNlbnRlcjsnIH0gfSk7XG5cdFx0XHRcdFx0Y29uc3QgY2IgPSByb3cuY3JlYXRlRWwoJ2lucHV0JywgeyB0eXBlOiAnY2hlY2tib3gnIH0pIGFzIEhUTUxJbnB1dEVsZW1lbnQ7XG5cdFx0XHRcdFx0Y2IuY2hlY2tlZCA9IHNlbC5oYXMoY2F0LmlkKTtcblx0XHRcdFx0XHRyb3cuYXBwZW5kVGV4dCgnICcgKyBjYXQubGFiZWwpO1xuXHRcdFx0XHRcdGNiLmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIGFzeW5jICgpID0+IHtcblx0XHRcdFx0XHRcdGNvbnN0IG5leHQgPSBnZXRTZWxlY3Rpb24oKTtcblx0XHRcdFx0XHRcdGlmIChjYi5jaGVja2VkKSBuZXh0LmFkZChjYXQuaWQpOyBlbHNlIG5leHQuZGVsZXRlKGNhdC5pZCk7XG5cdFx0XHRcdFx0XHRhd2FpdCBzYXZlKG5leHQpO1xuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHR9KTtcblx0XHRcdH07XG5cblx0XHRcdC8vIGluaXRcblx0XHRcdHJlbmRlcigpO1xuXHRcdFx0c2V0T3BlbihmYWxzZSk7XG5cblx0XHRcdG5ldyBTZXR0aW5nKGJlaGF2aW9yQm9keSlcblx0XHRcdFx0LnNldE5hbWUoXCJPcGVuaW5nIE5ldyBUZW1wbGF0ZSBOb3Rlc1wiKVxuXHRcdFx0XHQuc2V0RGVzYyhcIkNob29zZSBob3cgbmV3IG5vdGVzIGZyb20gdGVtcGxhdGVzIGFyZSBvcGVuZWQgd2hlbiBjcmVhdGVkIGZyb20gY29tbWFuZCBvciB0aGUgc2lkZWJhclwiKVxuXHRcdFx0XHQuYWRkRHJvcGRvd24oZHJvcCA9PiB7XG5cdFx0XHRcdFx0ZHJvcC5hZGRPcHRpb24oXCJkZWZhdWx0XCIsIFwiT3BlbiB0aGUgbmV3IG5vdGVcIik7XG5cdFx0XHRcdFx0ZHJvcC5hZGRPcHRpb24oXCJjdXJyZW50XCIsIFwiT3BlbiBidXQgaW4gdGhlIGJhY2tncm91bmRcIik7XG5cdFx0XHRcdFx0ZHJvcC5hZGRPcHRpb24oXCJiYWNrZ3JvdW5kXCIsIFwiQ3JlYXRlIGJ1dCBkb24ndCBvcGVuXCIpO1xuXHRcdFx0XHRcdGRyb3Auc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MudGVtcGxhdGVPcGVuTW9kZSB8fCBcImRlZmF1bHRcIik7XG5cdFx0XHRcdFx0ZHJvcC5vbkNoYW5nZShhc3luYyAodmFsKSA9PiB7XG5cdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy50ZW1wbGF0ZU9wZW5Nb2RlID1cblx0XHRcdFx0XHRcdFx0dmFsIGFzIFwiZGVmYXVsdFwiIHwgXCJjdXJyZW50XCIgfCBcImJhY2tncm91bmRcIjtcblx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHR9KTtcblx0XHRcdG5ldyBTZXR0aW5nKGJlaGF2aW9yQm9keSlcblx0XHRcdFx0LnNldE5hbWUoXCJTZXNzaW9uIFRlbXBsYXRlIE5hbWluZ1wiKVxuXHRcdFx0XHQuc2V0RGVzYyhcIldoZW4gYm90aCBhIGRhdGUgYW5kIGEgbmFtZSBhcmUgZW50ZXJlZCBpbiB0aGUgTmV3IFNlc3Npb24gZm9ybSwgY2hvb3NlIHdoaWNoIG9uZSB0byB1c2UgaW4gdGhlIHNlc3Npb24gbm90ZSB0aXRsZS4gRm9yIGV4YW1wbGUsICdTZXNzaW9uIDE0IC0gQnVybmluZyBEb3duIHRoZSBWaWxsYWdlJyB2cyAnU2Vzc2lvbiAxNCAtIDQuNS42MydcIilcblx0XHRcdFx0LmFkZERyb3Bkb3duKChkZCkgPT4ge1xuXHRcdFx0XHRcdGRkLmFkZE9wdGlvbihcIm5hbWVcIiwgXCJTZXNzaW9uIE5hbWVcIik7XG5cdFx0XHRcdFx0ZGQuYWRkT3B0aW9uKFwiZGF0ZVwiLCBcIkRhdGVcIik7XG5cdFx0XHRcdFx0ZGQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3Muc2Vzc2lvblRpdGxlUHJlZmVyZW5jZSA/PyBcIm5hbWVcIik7XG5cdFx0XHRcdFx0ZGQub25DaGFuZ2UoYXN5bmMgKHZhbDogXCJuYW1lXCIgfCBcImRhdGVcIikgPT4ge1xuXHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3Muc2Vzc2lvblRpdGxlUHJlZmVyZW5jZSA9IHZhbDtcblx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHR9KTtcblxuXHRcdFx0bmV3IFNldHRpbmcoYmVoYXZpb3JCb2R5KVxuXHRcdFx0XHQuc2V0TmFtZSgnSGlkZSB0b29sYmFycyBpbiBFbWJlZGRlZCBCYXNlcycpXG5cdFx0XHRcdC5zZXREZXNjKCdIaWRlcyB0aGUgdG9vbGJhciBpbiBlbWJlZGVkIGJhc2VzIChlLmcsIFBsYXllciBDaGFyYWN0ZXIgbm90ZXMpLiBUaGlzIGRvZXMgbm90IGFmZmVjdCBmdWxsIEJhc2Ugdmlld3MnKVxuXHRcdFx0XHQuYWRkVG9nZ2xlKHQgPT4ge1xuXHRcdFx0XHRcdHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuaGlkZUJhc2VUb29sYmFyID8/IGZhbHNlKVxuXHRcdFx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2KSA9PiB7XG5cdFx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmhpZGVCYXNlVG9vbGJhciA9IHY7XG5cdFx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuXHRcdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5hcHBseUJhc2VUb29sYmFyRW1iZWRDU1MoKTtcblx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHR9KTsgXG5cblxuXG5cdFx0XHQvLyBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDAgSElHSExJR0hUIFNFQ1RJT04gXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXG5cdFx0XHRjb25zdCBoaWdobGlnaHREZXRhaWxzID0gY29udGFpbmVyRWwuY3JlYXRlRWwoJ2RldGFpbHMnLCB7IGNsczogJ3ZrLXNlY3Rpb24nIH0pO1xuXHRcdFx0a2VlcE9wZW4oaGlnaGxpZ2h0RGV0YWlscyBhcyBIVE1MRGV0YWlsc0VsZW1lbnQsICd2djpoaWdobGlnaHQnKTtcblxuXG5cdFx0XHQvLyAxKSBCdWlsZCB0aGUgPHN1bW1hcnk+IGZvciBoaWdobGlnaHQsIG1hdGNoaW5nIGJhY2t1cCBzdHlsZTpcblx0XHRcdGNvbnN0IGhpZ2hsaWdodFN1bW1hcnkgPSBoaWdobGlnaHREZXRhaWxzLmNyZWF0ZUVsKCdzdW1tYXJ5JywgeyBjbHM6ICd2ay1zZWN0aW9uLWhlYWRlcicgfSk7XG5cdFx0XHRPYmplY3QuYXNzaWduKGhpZ2hsaWdodFN1bW1hcnkuc3R5bGUsIHtcblx0XHRcdFx0ZGlzcGxheTogJ2ZsZXgnLFxuXHRcdFx0XHRmbGV4RGlyZWN0aW9uOiAnY29sdW1uJyxcblx0XHRcdFx0YWxpZ25JdGVtczogJ3N0cmV0Y2gnLFxuXHRcdFx0XHRwYWRkaW5nOiAnMC41ZW0gMCcsXG5cdFx0XHRcdGJvcmRlckJvdHRvbTogJzFweCBzb2xpZCB2YXIoLS1kaXZpZGVyLWNvbG9yKScsXG5cdFx0XHRcdGN1cnNvcjogJ3BvaW50ZXInLFxuXHRcdFx0fSk7XG5cblx0XHRcdC8vIDFhKSBDcmVhdGUgdGhlIHRpdGxlICsgaWNvbiByb3cgKGZsZXggcm93IGp1c3RpZnkgc3BhY2UtYmV0d2Vlbik6XG5cdFx0XHRjb25zdCBoaWdobGlnaHRUaXRsZVJvdyA9IGhpZ2hsaWdodFN1bW1hcnkuY3JlYXRlRGl2KHtcblx0XHRcdFx0YXR0cjoge1xuXHRcdFx0XHRcdHN0eWxlOiBgXG5cdFx0XHRkaXNwbGF5OiBmbGV4O1xuXHRcdFx0anVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuO1xuXHRcdFx0YWxpZ24taXRlbXM6IGZsZXgtZW5kO1xuXHRcdFx0YCxcblx0XHRcdFx0fSxcblx0XHRcdH0pO1xuXG5cdFx0XHQvLyAxYikgTGVmdCBzaWRlOiB0aXRsZSArIGRlc2NyaXB0aW9uXG5cdFx0XHRjb25zdCBobFRpdGxlQmxvY2sgPSBoaWdobGlnaHRUaXRsZVJvdy5jcmVhdGVEaXYoe1xuXHRcdFx0XHRhdHRyOiB7IHN0eWxlOiAnZGlzcGxheTogZmxleDsgZmxleC1kaXJlY3Rpb246IGNvbHVtbjsnIH1cblx0XHRcdH0pO1xuXHRcdFx0aGxUaXRsZUJsb2NrLmNyZWF0ZUVsKCdoNScsIHsgdGV4dDogJ0ZpbGUgSGlnaGxpZ2h0cycgfSk7XG5cdFx0XHRobFRpdGxlQmxvY2suY3JlYXRlRWwoJ2RpdicsIHtcblx0XHRcdFx0dGV4dDogJ1RvZ2dsZSBvbi9vZmYgdGhlIGhpZ2hsaWdodGluZyBvZiBUb29sa2l0LXNwZWNpZmljIGZpbGVzLiBBbHNvIG1ha2UgdGhlIGhpZ2hsaWdodHMgY29vbCBjb2xvcnMuJyxcblx0XHRcdFx0Y2xzOiAnc2V0dGluZy1pdGVtLWRlc2NyaXB0aW9uJyxcblx0XHRcdFx0YXR0cjogeyBzdHlsZTogJ21hcmdpbi10b3A6IDAuMjVlbTsnIH0sXG5cdFx0XHR9KTtcblxuXHRcdFx0Y29uc3QgaGxUb2dnbGVJY29uID0gaGlnaGxpZ2h0VGl0bGVSb3cuY3JlYXRlRWwoJ3NwYW4nLCB7IHRleHQ6ICdWVicsIGNsczogJ3ZrLXRvZ2dsZS1pY29uJyB9KTtcblx0XHRcdE9iamVjdC5hc3NpZ24oaGxUb2dnbGVJY29uLnN0eWxlLCB7XG5cdFx0XHRcdGZvbnRXZWlnaHQ6ICdib2xkJyxcblx0XHRcdFx0ZGlzcGxheTogJ2lubGluZS1ibG9jaycsXG5cdFx0XHRcdHRyYW5zaXRpb246ICd0cmFuc2Zvcm0gMC4ycyBlYXNlJyxcblx0XHRcdFx0dHJhbnNmb3JtT3JpZ2luOiAnNTAlIDUwJScsXG5cdFx0XHRcdHVzZXJTZWxlY3Q6ICdub25lJyxcblx0XHRcdH0pO1xuXHRcdFx0d2lyZVJvdGF0ZShoaWdobGlnaHREZXRhaWxzIGFzIEhUTUxEZXRhaWxzRWxlbWVudCwgaGxUb2dnbGVJY29uKTtcblxuXG5cdFx0XHQvLyAyKSBDcmVhdGUgdGhlIGJvZHkgY29udGFpbmVyIChpbmRlbnRlZCwgc2FtZSBhcyBiYWNrdXApXG5cdFx0XHRjb25zdCBoaWdobGlnaHRCb2R5ID0gaGlnaGxpZ2h0RGV0YWlscy5jcmVhdGVEaXYoeyBjbHM6ICd2ay1zZWN0aW9uLWJvZHknIH0pO1xuXHRcdFx0aGlnaGxpZ2h0Qm9keS5hZGRDbGFzcyhcInZ2LXBsLW1kXCIpO1xuXG5cdFx0XHQvLyAzKSBcdTIwMUNFbmFibGUgSGlnaGxpZ2h0XHUyMDFEIHRvZ2dsZSBhcyBhIFNldHRpbmcgaW5zaWRlIGhpZ2hsaWdodEJvZHk6XG5cdFx0XHRuZXcgU2V0dGluZyhoaWdobGlnaHRCb2R5KVxuXHRcdFx0XHQuc2V0TmFtZSgnRW5hYmxlIEZpbGUgSGlnaGxpZ2h0aW5nJylcblx0XHRcdFx0LnNldERlc2MoJ0FueSBmaWxlIGluc3RhbGxlZCBieSBWVnVuZGVybG9yZSB3aWxsIGhhdmUgdGhpcyBiYWNrZ3JvdW5kLicpXG5cdFx0XHRcdC5hZGRUb2dnbGUodG9nZ2xlID0+IHtcblx0XHRcdFx0XHR0b2dnbGVcblx0XHRcdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5oaWdobGlnaHRFbmFibGVkKVxuXHRcdFx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jIChlbmFibGVkKSA9PiB7XG5cdFx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmhpZ2hsaWdodEVuYWJsZWQgPSBlbmFibGVkO1xuXHRcdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcblxuXHRcdFx0XHRcdFx0XHRpZiAoZW5hYmxlZCkge1xuXHRcdFx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLmVuYWJsZUhpZ2hsaWdodCgpO1xuXHRcdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLmRpc2FibGVIaWdobGlnaHQoKTtcblx0XHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHRcdC8vIFJlXHUyMDEwcmVuZGVyIHRoZSBjb2xvciBwaWNrZXJzIHdoZW5ldmVyIHRoZSB0b2dnbGUgY2hhbmdlczpcblx0XHRcdFx0XHRcdFx0cmVuZGVySGlnaGxpZ2h0Q29sb3JQaWNrZXJzKCk7XG5cdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0fSk7XG5cblx0XHRcdC8vIDQpIFdyYXBwZXIgZm9yIExpZ2h0L0RhcmsgY29sb3IgcGlja2Vyczpcblx0XHRcdGNvbnN0IGNvbG9yUGlja2VyV3JhcHBlciA9IGhpZ2hsaWdodEJvZHkuY3JlYXRlRGl2KCk7XG5cblx0XHRcdC8vIDUpIEEgZnVuY3Rpb24gdG8gcmVuZGVyIG9yIGNsZWFyIHRoZSB0d28gQ29sb3JQaWNrZXIgc2V0dGluZ3M6XG5cdFx0XHRjb25zdCByZW5kZXJIaWdobGlnaHRDb2xvclBpY2tlcnMgPSAoKSA9PiB7XG5cdFx0XHRcdGNvbG9yUGlja2VyV3JhcHBlci5lbXB0eSgpO1xuXG5cdFx0XHRcdGlmICghdGhpcy5wbHVnaW4uc2V0dGluZ3MuaGlnaGxpZ2h0RW5hYmxlZCkge1xuXHRcdFx0XHRcdHJldHVybjsgLy8gZG8gbm90IHNob3cgcGlja2VycyBpZiBoaWdobGlnaHRpbmcgaXMgZGlzYWJsZWRcblx0XHRcdFx0fVxuXG5cdFx0XHRcdC8vIDVhKSBMaWdodCBtb2RlIGNvbG9yIHBpY2tlclxuXHRcdFx0XHRuZXcgU2V0dGluZyhjb2xvclBpY2tlcldyYXBwZXIpXG5cdFx0XHRcdFx0LnNldE5hbWUoJ0xpZ2h0IE1vZGUgSGlnaGxpZ2h0IENvbG9yJylcblx0XHRcdFx0XHQuc2V0RGVzYygnQ2hvb3NlIHRoZSBiYWNrZ3JvdW5kIGNvbG9yIGZvciBmaWxlcy9mb2xkZXJzIGluIExpZ2h0IG1vZGUuJylcblx0XHRcdFx0XHQuYWRkQ29sb3JQaWNrZXIocGlja2VyID0+IHtcblx0XHRcdFx0XHRcdHBpY2tlclxuXHRcdFx0XHRcdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuaGlnaGxpZ2h0Q29sb3JMaWdodClcblx0XHRcdFx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jIChuZXdDb2xvcikgPT4ge1xuXHRcdFx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmhpZ2hsaWdodENvbG9yTGlnaHQgPSBuZXdDb2xvcjtcblx0XHRcdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcblxuXHRcdFx0XHRcdFx0XHRcdC8vIFJlXHUyMDEwaW5qZWN0IENTUyBzbyB0aGUgbmV3IGNvbG9yIHRha2VzIGVmZmVjdCBpbW1lZGlhdGVseTpcblx0XHRcdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5kaXNhYmxlSGlnaGxpZ2h0KCk7XG5cdFx0XHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uZW5hYmxlSGlnaGxpZ2h0KCk7XG5cdFx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdH0pO1xuXG5cdFx0XHRcdC8vIDViKSBEYXJrIG1vZGUgY29sb3IgcGlja2VyXG5cdFx0XHRcdG5ldyBTZXR0aW5nKGNvbG9yUGlja2VyV3JhcHBlcilcblx0XHRcdFx0XHQuc2V0TmFtZSgnRGFyayBNb2RlIEhpZ2hsaWdodCBDb2xvcicpXG5cdFx0XHRcdFx0LnNldERlc2MoJ0Nob29zZSB0aGUgYmFja2dyb3VuZCBjb2xvciBmb3IgZmlsZXMvZm9sZGVycyBpbiBEYXJrIG1vZGUuJylcblx0XHRcdFx0XHQuYWRkQ29sb3JQaWNrZXIocGlja2VyID0+IHtcblx0XHRcdFx0XHRcdHBpY2tlclxuXHRcdFx0XHRcdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuaGlnaGxpZ2h0Q29sb3JEYXJrKVxuXHRcdFx0XHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKG5ld0NvbG9yKSA9PiB7XG5cdFx0XHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MuaGlnaGxpZ2h0Q29sb3JEYXJrID0gbmV3Q29sb3I7XG5cdFx0XHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG5cblx0XHRcdFx0XHRcdFx0XHQvLyBSZVx1MjAxMGluamVjdCBDU1Mgc28gdGhlIG5ldyBjb2xvciB0YWtlcyBlZmZlY3QgaW1tZWRpYXRlbHk6XG5cdFx0XHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uZGlzYWJsZUhpZ2hsaWdodCgpO1xuXHRcdFx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLmVuYWJsZUhpZ2hsaWdodCgpO1xuXHRcdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHR9KTtcblx0XHRcdH07XG5cblx0XHRcdC8vIDYpIENhbGwgb25jZSBvbiBpbml0aWFsIHJlbmRlciBzbyB0aGF0IGlmIGhpZ2hsaWdodEVuYWJsZWQgPT09IHRydWUsIHRoZSBwaWNrZXJzIHNob3cgdXAuXG5cdFx0XHRyZW5kZXJIaWdobGlnaHRDb2xvclBpY2tlcnMoKTtcblxuXG5cdFx0XHQvLyBcdTI1MDBcdTI1MDBcdTI1MDAgSU5JVElBTCBEUkFXIFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFxuXHRcdFx0cmVuZGVyU2tpcFRhYmxlKCk7XG5cdFx0XHRyZW5kZXJSZW1hcFBhbmVsKCk7XG5cblxuXHRcdFx0Ly9SRU1PVkUgREVNTyBGSUxFU1xuXHRcdFx0Ly8gXHUyNTAwXHUyNTAwXHUyNTAwIFJFTU9WRSBERU1PIEZJTEVTICh1cGRhdGVkKSBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcblxuXHRcdFx0Ly8gMSkgQ3JlYXRlIGEgU2V0dGluZyByb3csIGJ1dCBpbW1lZGlhdGVseSBzdHJpcCBvZmYgaXRzIGRlZmF1bHQgdG9wXHUyMDEwYm9yZGVyOlxuXHRcdFx0Y29uc3QgcmVtb3ZlRGVtb1NldHRpbmcgPSBuZXcgU2V0dGluZyhjb250YWluZXJFbCk7XG5cdFx0XHQocmVtb3ZlRGVtb1NldHRpbmcuc2V0dGluZ0VsIGFzIEhUTUxFbGVtZW50KS5hZGRDbGFzcyhcInZ2LW5vLWJvcmRlci10b3BcIik7XG5cblx0XHRcdHJlbW92ZURlbW9TZXR0aW5nXG5cdFx0XHRcdC5zZXROYW1lKCdSZW1vdmUgRGVtbyBGaWxlcycpXG5cdFx0XHRcdC5zZXREZXNjKCdEZWxldGUgZXZlcnkgXHUyMDFDb3B0aW9uYWxcdTIwMUQgZGVtbyBmaWxlIGFuZCBmb2xkZXIgZnJvbSB5b3VyIHZhdWx0LicpXG5cdFx0XHRcdC5hZGRCdXR0b24oKGJ1dHRvbikgPT5cblx0XHRcdFx0XHRidXR0b25cblx0XHRcdFx0XHRcdC5zZXRCdXR0b25UZXh0KCdSZW1vdmUgRGVtbyBGaWxlcycpXG5cblx0XHRcdFx0XHRcdC5vbkNsaWNrKGFzeW5jICgpID0+IHtcblx0XHRcdFx0XHRcdFx0Y29uc3Qgb3B0aW9uYWxGaWxlRW50cmllcyA9IHRoaXMucGx1Z2luLm1hbmlmZXN0Q2FjaGUuZmlsZXMuZmlsdGVyKChmKSA9PiBmLm9wdGlvbmFsKTtcblx0XHRcdFx0XHRcdFx0Y29uc3Qgb3B0aW9uYWxGb2xkZXJFbnRyaWVzID0gdGhpcy5wbHVnaW4ubWFuaWZlc3RDYWNoZS5mb2xkZXJzLmZpbHRlcigoZikgPT4gZi5vcHRpb25hbCk7XG5cblx0XHRcdFx0XHRcdFx0Y29uc3QgdG90YWxDb3VudEZpbGVzID0gb3B0aW9uYWxGaWxlRW50cmllcy5sZW5ndGg7XG5cdFx0XHRcdFx0XHRcdGNvbnN0IHRvdGFsQ291bnRGb2xkZXJzID0gb3B0aW9uYWxGb2xkZXJFbnRyaWVzLmxlbmd0aDtcblx0XHRcdFx0XHRcdFx0Y29uc3QgdG90YWxDb3VudCA9IHRvdGFsQ291bnRGaWxlcyArIHRvdGFsQ291bnRGb2xkZXJzO1xuXG5cdFx0XHRcdFx0XHRcdGlmICh0b3RhbENvdW50ID09PSAwKSB7XG5cdFx0XHRcdFx0XHRcdFx0bmV3IE5vdGljZSgnTm8gXHUyMDFDb3B0aW9uYWxcdTIwMUQgZGVtbyBmaWxlcyBvciBmb2xkZXJzIHRvIHJlbW92ZS4nKTtcblx0XHRcdFx0XHRcdFx0XHRyZXR1cm47XG5cdFx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0XHQvLyAtLS0gMikgQXNrIGZvciBjb25maXJtYXRpb24gaW4gYSBzbWFsbCBNb2RhbCAtLS1cblx0XHRcdFx0XHRcdFx0Y29uc3QgdXNlckNvbmZpcm1lZCA9IGF3YWl0IG5ldyBQcm9taXNlPGJvb2xlYW4+KChyZXNvbHZlKSA9PiB7XG5cdFx0XHRcdFx0XHRcdFx0Y29uc3QgY29uZmlybU1vZGFsID0gbmV3IGNsYXNzIGV4dGVuZHMgTW9kYWwge1xuXHRcdFx0XHRcdFx0XHRcdFx0Y29uc3RydWN0b3IoYXBwOiBBcHApIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0c3VwZXIoYXBwKTtcblx0XHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHRcdG9uT3BlbigpIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0dGhpcy5jb250ZW50RWwuZW1wdHkoKTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0dGhpcy5jb250ZW50RWwuY3JlYXRlRWwoJ2gyJywgeyB0ZXh0OiAnQ29uZmlybSBSZW1vdmFsJyB9KTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0dGhpcy5jb250ZW50RWwuY3JlYXRlRWwoJ3AnLCB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0dGV4dDogYFRoaXMgd2lsbCBwZXJtYW5lbnRseSBkZWxldGUgJHt0b3RhbENvdW50RmlsZXN9IGZpbGUocykgYW5kICR7dG90YWxDb3VudEZvbGRlcnN9IGZvbGRlcihzKS4gQ29udGludWU/YCxcblx0XHRcdFx0XHRcdFx0XHRcdFx0fSk7XG5cblx0XHRcdFx0XHRcdFx0XHRcdFx0Y29uc3QgYnRuUm93ID0gdGhpcy5jb250ZW50RWwuY3JlYXRlRWwoJ2RpdicpO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRPYmplY3QuYXNzaWduKGJ0blJvdy5zdHlsZSwge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdGRpc3BsYXk6ICdmbGV4Jyxcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRqdXN0aWZ5Q29udGVudDogJ2ZsZXgtZW5kJyxcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRnYXA6ICcwLjVlbScsXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0bWFyZ2luVG9wOiAnMS41ZW0nLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHR9KTtcblxuXHRcdFx0XHRcdFx0XHRcdFx0XHRidG5Sb3cuY3JlYXRlRWwoJ2J1dHRvbicsIHsgdGV4dDogJ0NhbmNlbCcgfSkub25jbGljayA9ICgpID0+IHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRyZXNvbHZlKGZhbHNlKTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHR0aGlzLmNsb3NlKCk7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdH07XG5cblx0XHRcdFx0XHRcdFx0XHRcdFx0YnRuUm93LmNyZWF0ZUVsKCdidXR0b24nLCB7IHRleHQ6ICdZZXMsIFJlbW92ZScsIGNsczogJ21vZC1kYW5nZXInIH0pLm9uY2xpY2sgPSAoKSA9PiB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0cmVzb2x2ZSh0cnVlKTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHR0aGlzLmNsb3NlKCk7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdH07XG5cdFx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0XHRvbkNsb3NlKCkge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHR0aGlzLmNvbnRlbnRFbC5lbXB0eSgpO1xuXHRcdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdH0odGhpcy5hcHApO1xuXG5cdFx0XHRcdFx0XHRcdFx0Y29uZmlybU1vZGFsLm9wZW4oKTtcblx0XHRcdFx0XHRcdFx0fSk7XG5cblx0XHRcdFx0XHRcdFx0aWYgKCF1c2VyQ29uZmlybWVkKSB7XG5cdFx0XHRcdFx0XHRcdFx0cmV0dXJuOyAvLyB1c2VyIGNsaWNrZWQgXHUyMDFDQ2FuY2VsXHUyMDFEXG5cdFx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0XHQvLyAtLS0gMykgRGVsZXRlIG9wdGlvbmFsIGZpbGVzIG9uZSBieSBvbmUgLS0tXG5cdFx0XHRcdFx0XHRcdGxldCBmaWxlc0RlbGV0ZWQgPSAwO1xuXHRcdFx0XHRcdFx0XHRmb3IgKGNvbnN0IGZpbGVFbnRyeSBvZiBvcHRpb25hbEZpbGVFbnRyaWVzKSB7XG5cdFx0XHRcdFx0XHRcdFx0Ly8gM2EpIFJlc3BlY3QgYW55IHJlbWFwcGluZyBpbiBjdXN0b21QYXRoc1xuXHRcdFx0XHRcdFx0XHRcdGNvbnN0IG1hcHBlZCA9IHRoaXMucGx1Z2luLnNldHRpbmdzLmN1c3RvbVBhdGhzLmZpbmQoKGMpID0+IGMubWFuaWZlc3RLZXkgPT09IGZpbGVFbnRyeS5rZXkpO1xuXHRcdFx0XHRcdFx0XHRcdGNvbnN0IHZhdWx0UGF0aCA9IG1hcHBlZD8udmF1bHRQYXRoID8/IGZpbGVFbnRyeS5wYXRoO1xuXG5cdFx0XHRcdFx0XHRcdFx0Ly8gM2IpIElmIGl0IGFjdHVhbGx5IGV4aXN0cywgcmVtb3ZlIGl0XG5cdFx0XHRcdFx0XHRcdFx0aWYgKGF3YWl0IHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXIuZXhpc3RzKHZhdWx0UGF0aCkpIHtcblx0XHRcdFx0XHRcdFx0XHRcdHRyeSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdGF3YWl0IHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXIucmVtb3ZlKHZhdWx0UGF0aCk7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdGZpbGVzRGVsZXRlZCsrO1xuXHRcdFx0XHRcdFx0XHRcdFx0fSBjYXRjaCAoZXJyKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdGNvbnNvbGUuZXJyb3IoYEZhaWxlZCB0byBkZWxldGUgb3B0aW9uYWwgZmlsZSAke3ZhdWx0UGF0aH1gLCBlcnIpO1xuXHRcdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHRcdC8vIC0tLSA0KSBEZWxldGUgb3B0aW9uYWwgZm9sZGVycyByZWN1cnNpdmVseSAtLS1cblx0XHRcdFx0XHRcdFx0bGV0IGZvbGRlcnNEZWxldGVkID0gMDtcblx0XHRcdFx0XHRcdFx0Zm9yIChjb25zdCBmb2xkZXJFbnRyeSBvZiBvcHRpb25hbEZvbGRlckVudHJpZXMpIHtcblx0XHRcdFx0XHRcdFx0XHRjb25zdCBtYXBwZWQgPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5jdXN0b21QYXRocy5maW5kKChjKSA9PiBjLm1hbmlmZXN0S2V5ID09PSBmb2xkZXJFbnRyeS5rZXkpO1xuXHRcdFx0XHRcdFx0XHRcdGNvbnN0IHZhdWx0Rm9sZGVyUGF0aCA9IG1hcHBlZD8udmF1bHRQYXRoID8/IGZvbGRlckVudHJ5LnBhdGg7XG5cblx0XHRcdFx0XHRcdFx0XHRpZiAoYXdhaXQgdGhpcy5hcHAudmF1bHQuYWRhcHRlci5leGlzdHModmF1bHRGb2xkZXJQYXRoKSkge1xuXHRcdFx0XHRcdFx0XHRcdFx0dHJ5IHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0Ly8gVGhlIHNlY29uZCBhcmd1bWVudCBgdHJ1ZWAgZW5zdXJlcyByZWN1cnNpdmUgZGVsZXRlXG5cdFx0XHRcdFx0XHRcdFx0XHRcdGF3YWl0IHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXIucm1kaXIodmF1bHRGb2xkZXJQYXRoLCB0cnVlKTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0Zm9sZGVyc0RlbGV0ZWQrKztcblx0XHRcdFx0XHRcdFx0XHRcdH0gY2F0Y2ggKGVycikge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRjb25zb2xlLmVycm9yKGBGYWlsZWQgdG8gZGVsZXRlIG9wdGlvbmFsIGZvbGRlciAke3ZhdWx0Rm9sZGVyUGF0aH1gLCBlcnIpO1xuXHRcdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHRcdC8vIC0tLSA1KSBDbGVhbiB1cCBhbnkgXHUyMDFDY3VzdG9tUGF0aHNcdTIwMUQgZW50cmllcyBmb3Igb3B0aW9uYWwgaXRlbXMgLS0tXG5cdFx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmN1c3RvbVBhdGhzID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MuY3VzdG9tUGF0aHMuZmlsdGVyKChjKSA9PiB7XG5cdFx0XHRcdFx0XHRcdFx0Ly8gSWYgdGhpcyBtYXBwaW5nXHUyMDE5cyBtYW5pZmVzdEtleSB3YXMgb3B0aW9uYWwsIGRyb3AgaXRcblx0XHRcdFx0XHRcdFx0XHRjb25zdCBpc09wdEZpbGUgPSBvcHRpb25hbEZpbGVFbnRyaWVzLnNvbWUoKGYpID0+IGYua2V5ID09PSBjLm1hbmlmZXN0S2V5KTtcblx0XHRcdFx0XHRcdFx0XHRjb25zdCBpc09wdEZvbGRlciA9IG9wdGlvbmFsRm9sZGVyRW50cmllcy5zb21lKChmKSA9PiBmLmtleSA9PT0gYy5tYW5pZmVzdEtleSk7XG5cdFx0XHRcdFx0XHRcdFx0cmV0dXJuICFpc09wdEZpbGUgJiYgIWlzT3B0Rm9sZGVyO1xuXHRcdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG5cblx0XHRcdFx0XHRcdFx0Ly8gLS0tIDYpIFNob3cgYSBub3RpY2UgYW5kIHJlLXJlbmRlciB0aGUgc2V0dGluZ3MgcGFnZSAtLS1cblx0XHRcdFx0XHRcdFx0bmV3IE5vdGljZShgRGVsZXRlZCAke2ZpbGVzRGVsZXRlZH0gZmlsZShzKSBhbmQgJHtmb2xkZXJzRGVsZXRlZH0gZm9sZGVyKHMpLmApO1xuXHRcdFx0XHRcdFx0XHR0aGlzLmRpc3BsYXkoKTtcblx0XHRcdFx0XHRcdH0pXG5cdFx0XHRcdCk7XG5cblxuXG5cblx0XHRcdC8qKiBcdTI1MDBcdTI1MDBcdTI1MDAgRk9PVEVSIFNFQ1RJT04gXHUyNTAwXHUyNTAwXHUyNTAwICovXG5cdFx0XHRjb25zdCBmb290ZXIgPSBjb250YWluZXJFbC5jcmVhdGVEaXYoeyBjbHM6ICdzZXR0aW5nLWl0ZW0nIH0pO1xuXHRcdFx0T2JqZWN0LmFzc2lnbihmb290ZXIuc3R5bGUsIHtcblx0XHRcdFx0Zm9udFNpemU6ICcwLjg1ZW0nLFxuXHRcdFx0XHRjb2xvcjogJ3ZhcigtLXRleHQtbXV0ZWQpJyxcblx0XHRcdFx0bWFyZ2luVG9wOiAnMWVtJyxcblx0XHRcdH0pO1xuXHRcdFx0Zm9vdGVyLmNyZWF0ZUVsKCdzcGFuJywge1xuXHRcdFx0XHR0ZXh0OiBgVlZ1bmRlcmxvcmUgVG9vbGtpdCBQbHVnaW4gdiR7dGhpcy5wbHVnaW4ubWFuaWZlc3QudmVyc2lvbn0gICBcdTIwMjIgYFxuXHRcdFx0fSk7XG5cdFx0XHRmb290ZXIuY3JlYXRlRWwoJ2EnLCB7XG5cdFx0XHRcdHRleHQ6ICdWaWV3IG9uIEdpdEh1YicsXG5cdFx0XHRcdGhyZWY6ICdodHRwczovL2dpdGh1Yi5jb20vc2xhbXdpc2UwMDAxL3Z2dW5kZXJsb3JlLXRvb2xraXQtcGx1Z2luJyxcblx0XHRcdFx0YXR0cjogeyB0YXJnZXQ6ICdfYmxhbmsnIH1cblx0XHRcdH0pO1xuXHRcdFx0Y29udGFpbmVyRWwuc2Nyb2xsVG9wID0gc2F2ZWRTY3JvbGxUb3A7XG5cdFx0fSkoKTtcblx0fVxuXG5cdGFzeW5jIHVwZGF0ZVZlcnNpb25EaXNwbGF5KCk6IFByb21pc2U8dm9pZD4ge1xuXHRcdGlmICghdGhpcy52ZXJzaW9uVmFsdWVFbCB8fCAhdGhpcy5mb3JjZVdhcm5pbmdFbCkgcmV0dXJuO1xuXG5cdFx0bGV0IGluc3RhbGxlZCA9ICcnO1xuXHRcdHRyeSB7XG5cdFx0XHRjb25zdCB2ZXIgPSBhd2FpdCB0aGlzLnBsdWdpbi5hcHAudmF1bHQuYWRhcHRlci5yZWFkKCcudmVyc2lvbi5qc29uJyk7XG5cdFx0XHRpbnN0YWxsZWQgPSBKU09OLnBhcnNlKHZlcikudmVyc2lvbiA/PyAnJztcblx0XHR9IGNhdGNoIHsgfVxuXG5cdFx0Y29uc3QgbGF0ZXN0ID0gKHRoaXMucGx1Z2luLnNldHRpbmdzLmxhdGVzdFRvb2xraXRWZXJzaW9uID8/ICcnKS50cmltKCk7XG5cdFx0Y29uc3QgaXNNYXRjaCA9IGluc3RhbGxlZCA9PT0gbGF0ZXN0O1xuXG5cdFx0dGhpcy52ZXJzaW9uVmFsdWVFbC50ZXh0Q29udGVudCA9IGluc3RhbGxlZCB8fCAnTm90IGluc3RhbGxlZCc7XG5cdFx0dGhpcy52ZXJzaW9uVmFsdWVFbC5jbGFzc0xpc3QucmVtb3ZlKCd2di1zdWNjZXNzJywgJ3Z2LWVycm9yJyk7XG5cdFx0dGhpcy52ZXJzaW9uVmFsdWVFbC5hZGRDbGFzcyhpc01hdGNoID8gJ3Z2LXN1Y2Nlc3MnIDogJ3Z2LWVycm9yJyk7XG5cblx0XHRpZiAodGhpcy5sYXRlc3RWYWx1ZUVsKSB7XG5cdFx0XHR0aGlzLmxhdGVzdFZhbHVlRWwudGV4dENvbnRlbnQgPSBsYXRlc3QgfHwgJ0NvdWxkIG5vdCBmZXRjaCc7XG5cdFx0fVxuXG5cdFx0aWYgKHRoaXMuY2hlY2tCdG5FbCkge1xuXHRcdFx0dGhpcy5jaGVja0J0bkVsLnRleHRDb250ZW50ID1cblx0XHRcdFx0aW5zdGFsbGVkICYmIGxhdGVzdCAmJiBpbnN0YWxsZWQgIT09IGxhdGVzdFxuXHRcdFx0XHRcdD8gJ1ByZXZpZXcgVXBkYXRlJ1xuXHRcdFx0XHRcdDogJ0NoZWNrIGZvciBVcGRhdGVzJztcblx0XHR9XG5cblx0XHRpZiAodGhpcy5sYXN0Q2hlY2tlZEVsICYmIHRoaXMucGx1Z2luLnNldHRpbmdzLmxhc3RDaGVja2VkKSB7XG5cdFx0XHR0aGlzLmxhc3RDaGVja2VkRWwudGV4dENvbnRlbnQgPVxuXHRcdFx0XHRgTGFzdCBjaGVja2VkOiAke25ldyBEYXRlKHRoaXMucGx1Z2luLnNldHRpbmdzLmxhc3RDaGVja2VkKS50b0xvY2FsZVN0cmluZygpfWA7XG5cdFx0fVxuXG5cdFx0dGhpcy5mb3JjZVdhcm5pbmdFbC5lbXB0eSgpO1xuXHRcdGlmIChpbnN0YWxsZWQgJiYgbGF0ZXN0ICYmIGluc3RhbGxlZCAhPT0gbGF0ZXN0KSB7XG5cdFx0XHRjb25zdCB3YXJuID0gdGhpcy5mb3JjZVdhcm5pbmdFbC5jcmVhdGVEaXYoe1xuXHRcdFx0XHR0ZXh0OiBgXHUyNkEwXHVGRTBGIE5ldyB2ZXJzaW9uIGF2YWlsYWJsZSAoJHtpbnN0YWxsZWR9IFx1MjE5MiAke2xhdGVzdH0pIFx1MjAxNCB1c2UgcmVndWxhciB1cGRhdGUgaW5zdGVhZGAsXG5cdFx0XHR9KTtcblx0XHRcdHdhcm4uYWRkQ2xhc3MoJ3Z2LXNtYWxsJywgJ3Z2LW11dGVkJywgJ3Z2LWl0YWxpYycpO1xuXHRcdFx0d2Fybi5zZXRBdHRyKCd0aXRsZScsICdGb3JjZSB1cGRhdGluZyB3aGlsZSBhIG5ldyB2ZXJzaW9uIGlzIGF2YWlsYWJsZSBtYXkgc2tpcCBpbXBvcnRhbnQgY2hhbmdlcy4nKTtcblx0XHR9XG5cdFx0aWYgKHRoaXMuY2hlY2tCdG5FbCkge1xuXHRcdFx0Y29uc3QgaGFzVXBkYXRlID0gQm9vbGVhbihpbnN0YWxsZWQgJiYgbGF0ZXN0ICYmIGluc3RhbGxlZCAhPT0gbGF0ZXN0KTtcblx0XHRcdHRoaXMuY2hlY2tCdG5FbC5kYXRhc2V0LnN0YXRlID0gaGFzVXBkYXRlID8gJ3VwZGF0ZScgOiAnY2hlY2snO1xuXHRcdFx0dGhpcy5jaGVja0J0bkVsLnRleHRDb250ZW50ID0gaGFzVXBkYXRlID8gJ1VwZGF0ZSBBdmFpbGFibGUhJyA6ICdDaGVjayBmb3IgVXBkYXRlcyc7XG5cdFx0XHR0aGlzLmNoZWNrQnRuRWwuZGlzYWJsZWQgPSBmYWxzZTsgLy8gZW5zdXJlIGl0XHUyMDE5cyBjbGlja2FibGUgYWZ0ZXIgcmVmcmVzaGVzXG5cdFx0fVxuXHR9XG5cblxufSAgXG4iLCAiLy8gc3JjL2ZpcnN0aW5zdGFsbGNvbmZpcm0udHNcbmltcG9ydCB7IEFwcCwgTW9kYWwsIEJ1dHRvbkNvbXBvbmVudCwgTm90aWNlLCBub3JtYWxpemVQYXRoIH0gZnJvbSAnb2JzaWRpYW4nO1xuaW1wb3J0IHR5cGUgVlZ1bmRlcmxvcmVUb29sa2l0UGx1Z2luIGZyb20gJy4vbWFpbic7XG5pbXBvcnQgeyBJbnN0YWxsT3B0aW9ucywgSW5zdGFsbGluZ01vZGFsIH0gZnJvbSAnLi9tYWluJztcbmltcG9ydCB7IGltcG9ydFJ1bGVzZXREYXRhIH0gZnJvbSBcIi4vcnVsZXNldEluc3RhbGxlclwiO1xuXG5hc3luYyBmdW5jdGlvbiBhY3RpdmF0ZUNvcGllZFBsdWdpbnMoYXBwOiBBcHApIHtcbiAgY29uc3QgZmlsZVBhdGggPSBub3JtYWxpemVQYXRoKGAke2FwcC52YXVsdC5jb25maWdEaXJ9L2NvbW11bml0eS1wbHVnaW5zLmpzb25gKTtcblxuICB0cnkge1xuICAgIGNvbnN0IHJhdyA9IGF3YWl0IGFwcC52YXVsdC5hZGFwdGVyLnJlYWQoZmlsZVBhdGgpO1xuICAgIGNvbnN0IHBsdWdpbnNUb0VuYWJsZTogc3RyaW5nW10gPSBKU09OLnBhcnNlKHJhdyk7XG5cbiAgICBpZiAoIUFycmF5LmlzQXJyYXkocGx1Z2luc1RvRW5hYmxlKSkgcmV0dXJuO1xuXG4gICAgY29uc3QgbG9hZGVkID0gKGFwcCBhcyBhbnkpLnBsdWdpbnM7XG5cbiAgICBmb3IgKGNvbnN0IHBsdWdpbklkIG9mIHBsdWdpbnNUb0VuYWJsZSkge1xuICAgICAgaWYgKCFsb2FkZWQuZW5hYmxlZFBsdWdpbnMuaGFzKHBsdWdpbklkKSkge1xuICAgICAgICBhd2FpdCBsb2FkZWQuZW5hYmxlUGx1Z2luQW5kU2F2ZShwbHVnaW5JZCk7XG4gICAgICB9XG4gICAgfVxuXG4gIH0gY2F0Y2ggKGUpIHtcbiAgICBjb25zb2xlLndhcm4oXCJGYWlsZWQgdG8gZW5hYmxlIHRvb2xraXQgcGx1Z2luczpcIiwgZSk7XG4gIH1cbn1cblxuXG5leHBvcnQgY2xhc3MgQ29uZmlybUZyZXNoSW5zdGFsbE1vZGFsIGV4dGVuZHMgTW9kYWwge1xuICBwcml2YXRlIHBsdWdpbjogVlZ1bmRlcmxvcmVUb29sa2l0UGx1Z2luO1xuXG4gIGNvbnN0cnVjdG9yKGFwcDogQXBwLCBwbHVnaW46IFZWdW5kZXJsb3JlVG9vbGtpdFBsdWdpbikge1xuICAgIHN1cGVyKGFwcCk7XG4gICAgdGhpcy5wbHVnaW4gPSBwbHVnaW47XG4gIH1cbiAgXG5cbiAgb25PcGVuKCkge1xuICAgIHRoaXMuY29udGVudEVsLmVtcHR5KCk7XG5cbiAgICB0aGlzLnRpdGxlRWwuc2V0VGV4dChcIlx1MjZBMFx1RkUwRiBXYXJuaW5nOiBGcmVzaCBWYXVsdCBSZWNvbW1lbmRlZFwiKTtcblxuICAgIC8vIERpc2NsYWltZXIgdGV4dFxuICAgIGNvbnN0IHdhcm5pbmdFbCA9IHRoaXMuY29udGVudEVsXG4gICAgICAuY3JlYXRlRWwoJ2RpdicsIHtcbiAgICAgICAgdGV4dDpcbiAgICAgICAgICBcIlRoZSBmdWxsIFZWdW5kZXJsb3JlIGluc3RhbGwgaXMgaW50ZW5kZWQgZm9yIGEgZnJlc2gsIGVtcHR5IE9ic2lkaWFuIHZhdWx0LiBcIiArXG4gICAgICAgICAgXCJJZiB5b3UgaW5zdGFsbCBpbiBhIHZhdWx0IHRoYXQgYWxyZWFkeSBoYXMgZmlsZXMsIGFueSBmaWxlIHdob3NlIHBhdGggbWF0Y2hlcyBhIFwiICtcbiAgICAgICAgICBcIlZWdW5kZXJsb3JlIFRvb2xraXQgZmlsZSB3aWxsIGJlIG92ZXJ3cml0dGVuLlxcblxcblwiICtcbiAgICAgICAgICBcIkFsc28gdGhpbmdzIGNvdWxkIGp1c3QgZ2V0IG1lc3N5LlxcblxcblwiICtcbiAgICAgICAgICBcIk1ha2UgYSBwZXJjZXB0aW9uIGNoZWNrIGFuZCBwcm9jZWVkIHdpdGggY2F1dGlvbiFcIixcbiAgICAgIH0pXG4gICAgICB3YXJuaW5nRWwuYWRkQ2xhc3MoXCJpbnN0YWxsY29uZi1kaXNjbGFpbWVyXCIpO1xuXG4gICAgLy8gQnV0dG9uIHJvdyBjb250YWluZXJcbiAgICBjb25zdCBidXR0b25Sb3cgPSB0aGlzLmNvbnRlbnRFbC5jcmVhdGVFbCgnZGl2Jyk7XG4gICAgYnV0dG9uUm93LmFkZENsYXNzKFwiaW5zdGFsbGNvbmYtYnV0dG9ucm93XCIpO1xuXG4gICAgLy8gXCJPaCBnb2QsIGNhbmNlbCFcIiBidXR0b25cbiAgICBuZXcgQnV0dG9uQ29tcG9uZW50KGJ1dHRvblJvdylcbiAgICAgIC5zZXRCdXR0b25UZXh0KFwiT2ggZ29kLCBjYW5jZWwhXCIpXG4gICAgICAub25DbGljaygoKSA9PiB7XG4gICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgIH0pO1xuXG4gICAgLy8gXCJJbnN0YWxsISFcIiBidXR0b25cbiAgICBuZXcgQnV0dG9uQ29tcG9uZW50KGJ1dHRvblJvdylcbiAgICAgIC5zZXRCdXR0b25UZXh0KFwiSW5zdGFsbCEhXCIpXG4gICAgICAuc2V0Q3RhKClcbiAgICAgIC5vbkNsaWNrKGFzeW5jICgpID0+IHtcbiAgICAgICAgdGhpcy5hcHAud29ya3NwYWNlLmdldExlYXZlc09mVHlwZSgnbWFya2Rvd24nKS5mb3JFYWNoKGxlYWYgPT4gbGVhZi5kZXRhY2goKSk7XG4gICAgICAgIHRoaXMuYXBwLndvcmtzcGFjZS5nZXRMZWF2ZXNPZlR5cGUoJ2dyYXBoJykuZm9yRWFjaChsZWFmID0+IGxlYWYuZGV0YWNoKCkpO1xuICAgICAgXG4gICAgICAgIHRoaXMuY2xvc2UoKTtcblxuICAgICAgICBjb25zdCBpbnN0YWxsaW5nID0gbmV3IEluc3RhbGxpbmdNb2RhbCh0aGlzLmFwcCk7XG4gICAgICAgIGluc3RhbGxpbmcub3BlbigpO1xuXG4gICAgICAgIC8vIDIpIFJ1biB5b3VyIGluc3RhbGxlciArIGNvbXBlbmRpdW0gaW1wb3J0XG4gICAgICAgIGNvbnN0IGNvbXBlbmRpdW0gPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5ydWxlc2V0Q29tcGVuZGl1bTtcbiAgICAgICAgY29uc3QgcmVmZXJlbmNlcyA9IFsuLi50aGlzLnBsdWdpbi5zZXR0aW5ncy5ydWxlc2V0UmVmZXJlbmNlXTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5pbnN0YWxsRnVsbFRvb2xraXQoeyBjb21wZW5kaXVtLCByZWZlcmVuY2VzIH0pO1xuICAgICAgICAgIGlmIChjb21wZW5kaXVtKSB7XG4gICAgICAgICAgICBhd2FpdCBpbXBvcnRSdWxlc2V0RGF0YSh7XG4gICAgICAgICAgICAgIGFwcDogdGhpcy5hcHAsXG4gICAgICAgICAgICAgIGVkaXRpb25LZXk6IGNvbXBlbmRpdW0sXG4gICAgICAgICAgICAgIHRhcmdldFBhdGg6IFwiQ29tcGVuZGl1bVwiLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKFwiXHUyNzRDIGluc3RhbGxGdWxsVG9vbGtpdCgpIGZhaWxlZDpcIiwgZXJyKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmlzRmlyc3RSdW4gPSBcIm5vXCI7XG4gICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuXG4gICAgICAgIC8vIDQpIFN3YXAgdG8gc3VjY2VzcyBzY3JlZW5cbiAgICAgICAgaW5zdGFsbGluZy5jbG9zZSgpO1xuXG4gICAgICAgIGNvbnN0IHN1Y2Nlc3NNb2RhbCA9IG5ldyBNb2RhbCh0aGlzLmFwcCk7XG4gICAgICAgIHN1Y2Nlc3NNb2RhbC5vbk9wZW4gPSAoKSA9PiB7XG4gICAgICAgICAgc3VjY2Vzc01vZGFsLmNvbnRlbnRFbC5lbXB0eSgpO1xuICAgICAgICAgIHN1Y2Nlc3NNb2RhbC50aXRsZUVsLnNldFRleHQoXCJcdTI3MDUgVG9vbGtpdCBJbnN0YWxsZWRcIik7XG4gICAgICAgICAgY29uc3QgbXNnID0gc3VjY2Vzc01vZGFsLmNvbnRlbnRFbC5jcmVhdGVFbChcImRpdlwiLCB7XG4gICAgICAgICAgICB0ZXh0OiBcIlJlbG9hZGluZyB2YXVsdCBpbiAzIHNlY29uZHNcdTIwMjZcIixcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBtc2cuYWRkQ2xhc3MoXCJpbnN0YWxsc3VjY2Vzc1wiKTtcbiAgICAgICAgfTtcbiAgICAgICAgc3VjY2Vzc01vZGFsLm9wZW4oKTtcblxuICAgICAgICAvLyA1KSByZWxvYWRcbiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgc3VjY2Vzc01vZGFsLmNsb3NlKCk7XG4gICAgICAgICAgbG9jYXRpb24ucmVsb2FkKCk7XG4gICAgICAgIH0sIDMwMDApO1xuICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIG9uQ2xvc2UoKSB7XG4gICAgICAgIHRoaXMuY29udGVudEVsLmVtcHR5KCk7XG4gICAgICB9XG4gICAgfVxuXG5cbiAiLCAiLy8gRlVUVVJFIFNZU1RFTVM6IFxuLy8gQ2FsbCBvZiBDdGh1bHUgXG4vLyBNb3RoZXJzaGlwXG4vLyBQRjJFXG4vLyBNXHUwMEY2cmsgQm9yZ1xuLy8gQmxhZGVzIGluIHRoZSBEYXJrXG4vLyBEZWx0YSBHcmVlblxuLy8gU3RhcmZpbmRlclxuLy8gVGhlIE9uZSBSaW5nXG4vLyBGYXRlIFxuLy8gQ3liZXJwdW5rXG4vLyBMYW5jZXJcbi8vIFBvd2VyZWQgYnkgdGhlIEFwb2NhbHlwc2Vcbi8vIFN0YXIgV2FycyBSUEdcblxuZXhwb3J0IGludGVyZmFjZSBFZGl0aW9uIHtcbiAgICBpZDogc3RyaW5nOyAgICAgICAgICAgICAgXG4gICAgbGFiZWw6IHN0cmluZzsgICAgICAgICAgIFxuICAgIHJlcG8/OiBzdHJpbmc7ICAgICAgICAgICAgXG4gICAgcGFyc2VyPzogc3RyaW5nOyAgICAgICBcbiAgICBzb3VyY2VVcmw/OiBzdHJpbmc7XG4gICAgY2F0ZWdvcmllcz86IHN0cmluZ1tdO1xuICB9XG4gIFxuICBleHBvcnQgY29uc3QgQVZBSUxBQkxFX0VESVRJT05TOiBFZGl0aW9uW10gPSBbXG4gICAge1xuICAgICAgaWQ6ICdub25lJyxcbiAgICAgIGxhYmVsOiAnTm9uZScsXG4gICAgICByZXBvOiAnJyxcbiAgICAgIHBhcnNlcjogJycsXG4gICAgICBzb3VyY2VVcmw6ICcnLFxuICAgIH0sXG4gICAge1xuICAgICAgaWQ6ICc1ZS0yMDE0JyxcbiAgICAgIGxhYmVsOiAnRCZEIDVlICgyMDE0KScsXG4gICAgICByZXBvOiAnNWV0b29scy1taXJyb3ItMy81ZXRvb2xzLTIwMTQtc3JjJyxcbiAgICAgIHBhcnNlcjogJzVlLTIwMTQnLFxuICAgICAgc291cmNlVXJsOiAnaHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tLzVldG9vbHMtbWlycm9yLTMvNWV0b29scy0yMDE0LXNyYy9tYWluL2RhdGEnLFxuICAgICAgY2F0ZWdvcmllczogWycnXSxcbiAgICB9LFxuICAgIHtcbiAgICAgIGlkOiAnNWUtMjAyNScsXG4gICAgICBsYWJlbDogJ0QmRCA1ZSAoMjAyNCknLFxuICAgICAgcmVwbzogJzVldG9vbHMtbWlycm9yLTMvNWV0b29scy1zcmMnLFxuICAgICAgcGFyc2VyOiAnNWUtMjAyNScsXG4gICAgICBzb3VyY2VVcmw6ICdodHRwczovL3Jhdy5naXRodWJ1c2VyY29udGVudC5jb20vNWV0b29scy1taXJyb3ItMy81ZXRvb2xzLXNyYy9tYWluL2RhdGEnLFxuICAgIH0sXG4gXG4gICAgXG5cbiAgXTtcblxuICAgIC8vIHtcbiAgICAvLyAgIGlkOiAnJyxcbiAgICAvLyAgIGxhYmVsOiAnJyxcbiAgICAvLyAgIHJlcG86ICcnLFxuICAgIC8vICAgcGFyc2VyOiAnJyxcbiAgICAvLyAgIHNvdXJjZVVybDogJycsXG4gICAgLy8gICBjYXRlZ29yaWVzOiBbJyddLFxuICAgIC8vIH0sICAiLCAiLy9kbmQgNWUgMjAxNCBpbnN0YWxsZXJcblxuaW1wb3J0IHsgQXBwLCBub3JtYWxpemVQYXRoIH0gZnJvbSBcIm9ic2lkaWFuXCI7XG5pbXBvcnQgdHlwZSB7IEVkaXRpb24gfSBmcm9tIFwiLi4vLi4vZWRpdGlvbnNcIjtcbmltcG9ydCB7IHBhcnNlU3BlbGxzRmlsZSB9IGZyb20gXCIuL3NwZWxsc1wiO1xuaW1wb3J0IHsgcGFyc2VCZXN0aWFyeUZpbGUgfSBmcm9tIFwiLi9iZXN0aWFyeVwiO1xuaW1wb3J0IHsgcGFyc2VJdGVtc0ZpbGUgfSBmcm9tIFwiLi9pdGVtc1wiO1xuaW1wb3J0IHsgcGFyc2VTcGVjaWVzRmlsZSB9IGZyb20gXCIuL3NwZWNpZXNcIjtcbmltcG9ydCB7IHBhcnNlQ2xhc3NGaWxlIH0gZnJvbSBcIi4vY2xhc3Nlc1wiO1xuaW1wb3J0IHsgcGFyc2VBY3Rpb25zRmlsZSwgcGFyc2VDb25kaXRpb25zRGlzZWFzZXNGaWxlLCBwYXJzZVNlbnNlc0ZpbGUsIHBhcnNlU2tpbGxzRmlsZSB9IGZyb20gXCIuL3J1bGVzXCI7XG5pbXBvcnQgeyBwYXJzZUZlYXRzRmlsZSB9IGZyb20gXCIuL2ZlYXRzXCI7XG5pbXBvcnQgeyBwYXJzZUJhY2tncm91bmRzRmlsZSB9IGZyb20gXCIuL2JhY2tncm91bmRzXCI7XG5pbXBvcnQgeyBURmlsZSB9IGZyb20gXCJvYnNpZGlhblwiO1xuXG5cbi8vIFx1MjAxNCBHaXRIdWIgbGlzdGluZ3MgXHUyMDE0XG5hc3luYyBmdW5jdGlvbiBsaXN0U3BlbGxGaWxlc0Zyb21HaXRIdWIocmVwbzogc3RyaW5nKTogUHJvbWlzZTxzdHJpbmdbXT4ge1xuICBjb25zdCB1cmwgPSBgaHR0cHM6Ly9hcGkuZ2l0aHViLmNvbS9yZXBvcy8ke3JlcG99L2NvbnRlbnRzL2RhdGEvc3BlbGxzYDtcbiAgY29uc3QgcmVzID0gYXdhaXQgZmV0Y2godXJsKTtcbiAgY29uc3QgZGF0YSA9IChhd2FpdCByZXMuanNvbigpKSBhcyBBcnJheTx7IG5hbWU6IHN0cmluZzsgdHlwZTogc3RyaW5nIH0+O1xuICByZXR1cm4gZGF0YVxuICAgIC5maWx0ZXIoaXRlbSA9PiBpdGVtLnR5cGUgPT09IFwiZmlsZVwiICYmIGl0ZW0ubmFtZS5zdGFydHNXaXRoKFwic3BlbGxzLVwiKSAmJiBpdGVtLm5hbWUuZW5kc1dpdGgoXCIuanNvblwiKSlcbiAgICAubWFwKGl0ZW0gPT4gaXRlbS5uYW1lKTtcbn1cblxuYXN5bmMgZnVuY3Rpb24gbGlzdEJlc3RpYXJ5RmlsZXNGcm9tR2l0SHViKHJlcG86IHN0cmluZyk6IFByb21pc2U8c3RyaW5nW10+IHtcbiAgY29uc3QgdXJsID0gYGh0dHBzOi8vYXBpLmdpdGh1Yi5jb20vcmVwb3MvJHtyZXBvfS9jb250ZW50cy9kYXRhL2Jlc3RpYXJ5YDtcbiAgY29uc3QgcmVzID0gYXdhaXQgZmV0Y2godXJsKTtcbiAgY29uc3QgbGlzdCA9IChhd2FpdCByZXMuanNvbigpKSBhcyBBcnJheTx7IG5hbWU6IHN0cmluZzsgdHlwZTogc3RyaW5nIH0+O1xuICBjb25zdCBDT1JFX1NPVVJDRVMgPSBbXG4gICAgXCJiZXN0aWFyeS1waGIuanNvblwiLCBcImJlc3RpYXJ5LW1tLmpzb25cIiwgXCJiZXN0aWFyeS1kbWcuanNvblwiLFxuICAgIFwiYmVzdGlhcnkteGdlLmpzb25cIiwgXCJiZXN0aWFyeS12Z20uanNvblwiLCBcImJlc3RpYXJ5LXRjZS5qc29uXCIsXG4gICAgXCJiZXN0aWFyeS1lZ3cuanNvblwiLCBcImJlc3RpYXJ5LWVybHcuanNvblwiLCBcImJlc3RpYXJ5LW10Zi5qc29uXCIsXG4gICAgXCJiZXN0aWFyeS12cmdyLmpzb25cIiwgXCJiZXN0aWFyeS1jb3MuanNvblwiLCBcImJlc3RpYXJ5LW9vdGEuanNvblwiLFxuICAgIFwiYmVzdGlhcnktcG90YS5qc29uXCIsIFwiYmVzdGlhcnktaG90ZHEuanNvblwiLCBcImJlc3RpYXJ5LXJvdC5qc29uXCIsXG4gICAgXCJiZXN0aWFyeS1za3QuanNvblwiLCBcImJlc3RpYXJ5LXRmdHlwLmpzb25cIiwgXCJiZXN0aWFyeS10b2EuanNvblwiXG4gIF07XG4gIHJldHVybiBsaXN0XG4gICAgLmZpbHRlcihpdGVtID0+IGl0ZW0udHlwZSA9PT0gXCJmaWxlXCIgJiYgQ09SRV9TT1VSQ0VTLmluY2x1ZGVzKGl0ZW0ubmFtZSkpXG4gICAgLm1hcChpdGVtID0+IGl0ZW0ubmFtZSk7XG59XG5cbmNvbnN0IElURU1fSlNPTl9GSUxFUyA9IFtcbiAgXCJpdGVtcy1iYXNlLmpzb25cIixcbiAgXCJpdGVtcy5qc29uXCIsXG4gIFwib2JqZWN0cy5qc29uXCIsXG4gIFwidmVoaWNsZXMuanNvblwiLFxuICBcImRlY2tzLmpzb25cIixcbl07XG5cbmFzeW5jIGZ1bmN0aW9uIGxpc3RJdGVtRmlsZXNGcm9tR2l0SHViKHJlcG86IHN0cmluZyk6IFByb21pc2U8c3RyaW5nW10+IHtcbiAgY29uc3QgdXJsID0gYGh0dHBzOi8vYXBpLmdpdGh1Yi5jb20vcmVwb3MvJHtyZXBvfS9jb250ZW50cy9kYXRhYDtcbiAgY29uc3QgcmVzID0gYXdhaXQgZmV0Y2godXJsKTtcbiAgY29uc3QgZGF0YSA9IChhd2FpdCByZXMuanNvbigpKSBhcyBBcnJheTx7IG5hbWU6IHN0cmluZzsgdHlwZTogc3RyaW5nIH0+O1xuICByZXR1cm4gZGF0YVxuICAgIC5maWx0ZXIoaXRlbSA9PiBpdGVtLnR5cGUgPT09IFwiZmlsZVwiICYmIElURU1fSlNPTl9GSUxFUy5pbmNsdWRlcyhpdGVtLm5hbWUpKVxuICAgIC5tYXAoaXRlbSA9PiBpdGVtLm5hbWUpO1xufVxuXG5hc3luYyBmdW5jdGlvbiBsaXN0Q2xhc3NGaWxlc0Zyb21HaXRIdWIocmVwbzogc3RyaW5nKTogUHJvbWlzZTxzdHJpbmdbXT4ge1xuICBjb25zdCB1cmwgPSBgaHR0cHM6Ly9hcGkuZ2l0aHViLmNvbS9yZXBvcy8ke3JlcG99L2NvbnRlbnRzL2RhdGEvY2xhc3NgO1xuICBjb25zdCByZXMgPSBhd2FpdCBmZXRjaCh1cmwpO1xuICBjb25zdCBsaXN0aW5nID0gKGF3YWl0IHJlcy5qc29uKCkpIGFzIEFycmF5PHsgbmFtZTogc3RyaW5nOyB0eXBlOiBzdHJpbmcgfT47XG4gIHJldHVybiBsaXN0aW5nXG4gICAgLmZpbHRlcihpdGVtID0+XG4gICAgICBpdGVtLnR5cGUgPT09IFwiZmlsZVwiICYmXG4gICAgICBpdGVtLm5hbWUuc3RhcnRzV2l0aChcImNsYXNzLVwiKSAmJlxuICAgICAgaXRlbS5uYW1lLmVuZHNXaXRoKFwiLmpzb25cIilcbiAgICApXG4gICAgLm1hcChpdGVtID0+IGl0ZW0ubmFtZSk7XG59XG5cbi8vIFx1MjAxNCBlbnN1cmUgdGhlIHZhdWx0IGZvbGRlciBleGlzdHMgXHUyMDE0XG5hc3luYyBmdW5jdGlvbiBlbnN1cmVGb2xkZXIoYXBwOiBBcHAsIGZvbGRlclBhdGg6IHN0cmluZykge1xuICBjb25zdCBwYXJ0cyA9IGZvbGRlclBhdGguc3BsaXQoXCIvXCIpO1xuICBsZXQgY3VyciA9IFwiXCI7XG4gIGZvciAoY29uc3QgcCBvZiBwYXJ0cykge1xuICAgIGN1cnIgPSBjdXJyID8gYCR7Y3Vycn0vJHtwfWAgOiBwO1xuICAgIHRyeSB7IGF3YWl0IGFwcC52YXVsdC5jcmVhdGVGb2xkZXIoY3Vycik7IH1cbiAgICBjYXRjaCB7fSAvLyBhbHJlYWR5IGV4aXN0c1xuICB9XG59XG5cbi8vIFx1MjAxNCB0aGUgb25lIGVudHJ5LXBvaW50IHRoYXQgeW91ciB0b3AtbGV2ZWwgY2FsbHMgXHUyMDE0XG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gaW1wb3J0RWRpdGlvbkRhdGEocGFyYW1zOiB7XG4gIGFwcDogQXBwO1xuICBlZGl0aW9uOiBFZGl0aW9uO1xuICB0YXJnZXRQYXRoOiBzdHJpbmc7XG59KSB7XG4gIGNvbnN0IHsgYXBwLCBlZGl0aW9uLCB0YXJnZXRQYXRoIH0gPSBwYXJhbXM7XG4gIGNvbnN0IHJlcG8gPSBlZGl0aW9uLnJlcG8gPz8gXCJcIjtcblxuICAvLyBcdUQ4M0RcdUREMzkgU1BFTExTXG4gIHtcbiAgICBjb25zdCBzcGVsbEZpbGVzID0gYXdhaXQgbGlzdFNwZWxsRmlsZXNGcm9tR2l0SHViKHJlcG8pO1xuICAgIGZvciAoY29uc3QgZmlsZU5hbWUgb2Ygc3BlbGxGaWxlcykge1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgcmVzICA9IGF3YWl0IGZldGNoKGAke2VkaXRpb24uc291cmNlVXJsfS9zcGVsbHMvJHtmaWxlTmFtZX1gKTtcbiAgICAgICAgY29uc3QganNvbiA9IGF3YWl0IHJlcy5qc29uKCk7XG4gICAgICAgIGNvbnN0IGZpbGVzID0gcGFyc2VTcGVsbHNGaWxlKGpzb24sIGVkaXRpb24uaWQpO1xuICAgICAgICBmb3IgKGNvbnN0IG1kIG9mIGZpbGVzKSB7XG4gICAgICAgICAgY29uc3QgZnVsbFBhdGggPSBub3JtYWxpemVQYXRoKGAke3RhcmdldFBhdGh9L1NwZWxscy8ke21kLnBhdGh9YCk7XG4gICAgICAgICAgY29uc3QgZm9sZGVyICAgPSBmdWxsUGF0aC5zcGxpdChcIi9cIikuc2xpY2UoMCwgLTEpLmpvaW4oXCIvXCIpO1xuICAgICAgICAgIGF3YWl0IGVuc3VyZUZvbGRlcihhcHAsIGZvbGRlcik7XG4gICAgICAgICAgYXdhaXQgYXBwLnZhdWx0LmFkYXB0ZXIud3JpdGUoZnVsbFBhdGgsIG1kLmNvbnRlbnQpO1xuICAgICAgICB9XG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGNvbnNvbGUud2FybihgRmFpbGVkIHRvIGltcG9ydCBzcGVsbCAke2ZpbGVOYW1lfTpgLCBlKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvLyBcdUQ4M0RcdUREMzkgQkVTVElBUllcbiAge1xuICAgIGNvbnN0IGJlc3RpYXJ5RmlsZXMgPSBhd2FpdCBsaXN0QmVzdGlhcnlGaWxlc0Zyb21HaXRIdWIocmVwbyk7XG4gICAgZm9yIChjb25zdCBmaWxlTmFtZSBvZiBiZXN0aWFyeUZpbGVzKSB7XG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCByZXMgICAgPSBhd2FpdCBmZXRjaChgJHtlZGl0aW9uLnNvdXJjZVVybH0vYmVzdGlhcnkvJHtmaWxlTmFtZX1gKTtcbiAgICAgICAgY29uc3QganNvbiAgID0gYXdhaXQgcmVzLmpzb24oKTtcbiAgICAgICAgY29uc3QgcGFyc2VkID0gcGFyc2VCZXN0aWFyeUZpbGUoanNvbiwgZWRpdGlvbi5pZCk7XG4gICAgICAgIGZvciAoY29uc3QgbWQgb2YgcGFyc2VkKSB7XG4gICAgICAgICAgY29uc3QgZnVsbFBhdGggPSBub3JtYWxpemVQYXRoKGAke3RhcmdldFBhdGh9L0Jlc3RpYXJ5LyR7bWQucGF0aH1gKTtcbiAgICAgICAgICBjb25zdCBmb2xkZXIgICA9IGZ1bGxQYXRoLnNwbGl0KFwiL1wiKS5zbGljZSgwLCAtMSkuam9pbihcIi9cIik7XG4gICAgICAgICAgYXdhaXQgZW5zdXJlRm9sZGVyKGFwcCwgZm9sZGVyKTtcbiAgICAgICAgICBhd2FpdCBhcHAudmF1bHQuYWRhcHRlci53cml0ZShmdWxsUGF0aCwgbWQuY29udGVudCk7XG4gICAgICAgIH1cbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgY29uc29sZS53YXJuKGBGYWlsZWQgdG8gaW1wb3J0IGJlc3RpYXJ5ICR7ZmlsZU5hbWV9OmAsIGUpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8vIFx1RDgzRFx1REQzOSBJVEVNU1xuICB7XG4gICAgY29uc3QgaXRlbUZpbGVzID0gYXdhaXQgbGlzdEl0ZW1GaWxlc0Zyb21HaXRIdWIocmVwbyk7XG4gICAgZm9yIChjb25zdCBmbiBvZiBpdGVtRmlsZXMpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHJlcyAgPSBhd2FpdCBmZXRjaChgJHtlZGl0aW9uLnNvdXJjZVVybH0vJHtmbn1gKTtcbiAgICAgICAgY29uc3QganNvbiA9IGF3YWl0IHJlcy5qc29uKCk7XG4gICAgICAgIGNvbnN0IG1kRmlsZXMgPSBwYXJzZUl0ZW1zRmlsZShqc29uLCBlZGl0aW9uLmlkKTtcbiAgICAgICAgZm9yIChjb25zdCBtZCBvZiBtZEZpbGVzKSB7XG4gICAgICAgICAgY29uc3QgZnVsbFBhdGggPSBub3JtYWxpemVQYXRoKGAke3RhcmdldFBhdGh9LyR7bWQucGF0aH1gKTtcbiAgICAgICAgICBjb25zdCBmb2xkZXIgICA9IGZ1bGxQYXRoLnNwbGl0KFwiL1wiKS5zbGljZSgwLCAtMSkuam9pbihcIi9cIik7XG4gICAgICAgICAgYXdhaXQgZW5zdXJlRm9sZGVyKGFwcCwgZm9sZGVyKTtcbiAgICAgICAgICBhd2FpdCBhcHAudmF1bHQuYWRhcHRlci53cml0ZShmdWxsUGF0aCwgbWQuY29udGVudCk7XG4gICAgICAgIH1cbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgY29uc29sZS53YXJuKGBGYWlsZWQgdG8gaW1wb3J0IGl0ZW1zIGZyb20gJHtmbn06YCwgZSk7XG4gICAgICB9XG4gICAgfVxuICB9XG4vLyBcdUQ4M0RcdUREMzkgU1BFQ0lFU1xue1xuICBjb25zdCByZXMgID0gYXdhaXQgZmV0Y2goYCR7ZWRpdGlvbi5zb3VyY2VVcmx9L3JhY2VzLmpzb25gKTtcbiAgY29uc3QganNvbiA9IGF3YWl0IHJlcy5qc29uKCk7XG4gIGNvbnN0IG1kRmlsZXMgPSBwYXJzZVNwZWNpZXNGaWxlKGpzb24sIGVkaXRpb24uaWQpO1xuICBmb3IgKGNvbnN0IG1kIG9mIG1kRmlsZXMpIHtcbiAgICBjb25zdCBmdWxsUGF0aCA9IG5vcm1hbGl6ZVBhdGgoYCR7dGFyZ2V0UGF0aH0vUGxheWVyIEJ1aWxkLyR7bWQucGF0aH1gKTtcbiAgICBhd2FpdCBlbnN1cmVGb2xkZXIoYXBwLCBmdWxsUGF0aC5zcGxpdChcIi9cIikuc2xpY2UoMCwgLTEpLmpvaW4oXCIvXCIpKTtcbiAgICBhd2FpdCBhcHAudmF1bHQuYWRhcHRlci53cml0ZShmdWxsUGF0aCwgbWQuY29udGVudCk7XG4gIH1cbn1cbi8vIFx1RDgzRFx1REQzOSBGRVRDSCBPUFRJT05BTCBGRUFUVVJFUyBKU09OXG5sZXQgb3B0aW9uYWxGZWF0dXJlczogYW55W10gPSBbXTtcbnRyeSB7XG4gIGNvbnN0IHJlcyAgPSBhd2FpdCBmZXRjaChgJHtlZGl0aW9uLnNvdXJjZVVybH0vb3B0aW9uYWxmZWF0dXJlcy5qc29uYCk7XG4gIGNvbnN0IHJhdyAgPSBhd2FpdCByZXMuanNvbigpO1xuICBvcHRpb25hbEZlYXR1cmVzID0gQXJyYXkuaXNBcnJheShyYXcub3B0aW9uYWxmZWF0dXJlKVxuICAgID8gcmF3Lm9wdGlvbmFsZmVhdHVyZVxuICAgIDogW107XG59IGNhdGNoIChlKSB7XG4gIGNvbnNvbGUud2FybihcIkZhaWxlZCB0byBpbXBvcnQgb3B0aW9uYWxmZWF0dXJlcy5qc29uOlwiLCBlKTtcbn1cblxuLy8gXHVEODNEXHVERDM5IENMQVNTRVNcbntcbiAgY29uc3QgY2xhc3NGaWxlcyA9IGF3YWl0IGxpc3RDbGFzc0ZpbGVzRnJvbUdpdEh1YihyZXBvKTtcbiAgZm9yIChjb25zdCBmaWxlTmFtZSBvZiBjbGFzc0ZpbGVzKSB7XG4gICAgdHJ5IHtcbiAgICAgIC8vIGZldGNoIHRoZSByYXcgY2xhc3MgSlNPTlxuICAgICAgY29uc3QgcmVzICAgID0gYXdhaXQgZmV0Y2goYCR7ZWRpdGlvbi5zb3VyY2VVcmx9L2NsYXNzLyR7ZmlsZU5hbWV9YCk7XG4gICAgICBjb25zdCBqc29uICAgPSBhd2FpdCByZXMuanNvbigpO1xuXG4gICAgICAvLyBwYXJzZSBpbnRvIG9uZSBvciBtb3JlIG1hcmtkb3duIGZpbGVzXG4gICAgICBjb25zdCBtZEZpbGVzID0gcGFyc2VDbGFzc0ZpbGUoXG4gICAgICAgIGpzb24sXG4gICAgICAgIGVkaXRpb24uaWQsXG4gICAgICAgIGZpbGVOYW1lLFxuICAgICAgICBvcHRpb25hbEZlYXR1cmVzXG4gICAgICApO1xuICAgICAgZm9yIChjb25zdCBtZCBvZiBtZEZpbGVzKSB7XG4gICAgICAgIGNvbnN0IGZ1bGxQYXRoID0gbm9ybWFsaXplUGF0aChgJHt0YXJnZXRQYXRofS9QbGF5ZXIgQnVpbGQvJHttZC5wYXRofWApO1xuICAgICAgICAvLyAxKSBlbnN1cmUgdGhlIGZvbGRlciBleGlzdHNcbiAgICAgICAgYXdhaXQgZW5zdXJlRm9sZGVyKGFwcCwgZnVsbFBhdGguc3BsaXQoXCIvXCIpLnNsaWNlKDAsIC0xKS5qb2luKFwiL1wiKSk7XG5cbiAgICAgICAgLy8gMikgd3JpdGUgdmlhIE9ic2lkaWFuXHUyMDE5cyBBUEkgc28gbm90ZXMgcmVmcmVzaFxuICAgICAgICBjb25zdCBleGlzdGluZyA9IGFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoZnVsbFBhdGgpO1xuICAgICAgICBpZiAoZXhpc3RpbmcgaW5zdGFuY2VvZiBURmlsZSkge1xuICAgICAgICAgIC8vIE92ZXJ3cml0ZSBhbiBleGlzdGluZyBub3RlIGFuZCBmaXJlIHRoZSBjaGFuZ2UgZXZlbnRcbiAgICAgICAgICBhd2FpdCBhcHAudmF1bHQubW9kaWZ5KGV4aXN0aW5nLCBtZC5jb250ZW50KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBDcmVhdGUgYSBicmFuZC1uZXcgbm90ZSAoYWxzbyBmaXJlcyB0aGUgY2hhbmdlIGV2ZW50KVxuICAgICAgICAgIGF3YWl0IGFwcC52YXVsdC5jcmVhdGUoZnVsbFBhdGgsIG1kLmNvbnRlbnQpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgY29uc29sZS53YXJuKGBGYWlsZWQgdG8gaW1wb3J0IGNsYXNzICR7ZmlsZU5hbWV9OmAsIGUpO1xuICAgIH1cbiAgfVxufVxuXG5cbiAvLyBcdUQ4M0RcdUREMzkgUlVMRVM6IEFDVElPTlNcbiAge1xuICAgIHRyeSB7XG5cbiAgICAgIGNvbnN0IHJlcyAgPSBhd2FpdCBmZXRjaChgJHtlZGl0aW9uLnNvdXJjZVVybH0vYWN0aW9ucy5qc29uYCk7XG4gICAgICBjb25zdCBqc29uID0gYXdhaXQgcmVzLmpzb24oKTtcbiAgICBcbiAgICAgIGNvbnN0IG1kRmlsZXMgPSBwYXJzZUFjdGlvbnNGaWxlKGpzb24sIGVkaXRpb24uaWQpO1xuICAgIFxuICAgICAgZm9yIChjb25zdCBtZCBvZiBtZEZpbGVzKSB7XG4gICAgICAgIGNvbnN0IGZ1bGxQYXRoID0gbm9ybWFsaXplUGF0aChcbiAgICAgICAgICBgJHt0YXJnZXRQYXRofS8ke21kLnBhdGh9YFxuICAgICAgICApO1xuICAgICAgICBjb25zdCBmb2xkZXIgPSBmdWxsUGF0aC5zcGxpdChcIi9cIikuc2xpY2UoMCwgLTEpLmpvaW4oXCIvXCIpO1xuXG4gICAgICAgIGF3YWl0IGVuc3VyZUZvbGRlcihhcHAsIGZvbGRlcik7XG4gICAgICAgIGF3YWl0IGFwcC52YXVsdC5hZGFwdGVyLndyaXRlKGZ1bGxQYXRoLCBtZC5jb250ZW50KTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICBjb25zb2xlLndhcm4oXCJGYWlsZWQgdG8gaW1wb3J0IGFjdGlvbnMuanNvbjpcIiwgZSk7XG4gICAgfVxuICB9XG5cblxuICAgIC8vIFx1RDgzRFx1REQzOSBSVUxFUzogQ09ORElUSU9OUyAmIERJU0VBU0VTXG4gIHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgcmVzICA9IGF3YWl0IGZldGNoKGAke2VkaXRpb24uc291cmNlVXJsfS9jb25kaXRpb25zZGlzZWFzZXMuanNvbmApO1xuICAgICAgY29uc3QganNvbiA9IGF3YWl0IHJlcy5qc29uKCk7XG4gICAgICBjb25zdCBtZEZpbGVzID0gcGFyc2VDb25kaXRpb25zRGlzZWFzZXNGaWxlKGpzb24sIGVkaXRpb24uaWQpO1xuICAgICAgZm9yIChjb25zdCBtZCBvZiBtZEZpbGVzKSB7XG4gICAgICAgIGNvbnN0IGZ1bGxQYXRoID0gbm9ybWFsaXplUGF0aChcbiAgICAgICAgICBgJHt0YXJnZXRQYXRofS8ke21kLnBhdGh9YFxuICAgICAgICApO1xuICAgICAgICBjb25zdCBmb2xkZXIgPSBmdWxsUGF0aC5zcGxpdChcIi9cIikuc2xpY2UoMCwgLTEpLmpvaW4oXCIvXCIpO1xuICAgICAgICBhd2FpdCBlbnN1cmVGb2xkZXIoYXBwLCBmb2xkZXIpO1xuICAgICAgICBhd2FpdCBhcHAudmF1bHQuYWRhcHRlci53cml0ZShmdWxsUGF0aCwgbWQuY29udGVudCk7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgY29uc29sZS53YXJuKFwiRmFpbGVkIHRvIGltcG9ydCBjb25kaXRpb25zZGlzZWFzZXMuanNvbjpcIiwgZSk7XG4gICAgfVxuICB9XG5cbiAgIC8vIFx1RDgzRFx1REQzOSBSVUxFUzogU0VOU0VTXG4gIHtcbiAgICB0cnkge1xuXG4gICAgICBjb25zdCByZXMgID0gYXdhaXQgZmV0Y2goYCR7ZWRpdGlvbi5zb3VyY2VVcmx9L3NlbnNlcy5qc29uYCk7XG4gICAgICBjb25zdCBqc29uID0gYXdhaXQgcmVzLmpzb24oKTtcbiAgICBcbiAgICAgIGNvbnN0IG1kRmlsZXMgPSBwYXJzZVNlbnNlc0ZpbGUoanNvbiwgZWRpdGlvbi5pZCk7XG4gICAgXG4gICAgICBmb3IgKGNvbnN0IG1kIG9mIG1kRmlsZXMpIHtcbiAgICAgICAgY29uc3QgZnVsbFBhdGggPSBub3JtYWxpemVQYXRoKFxuICAgICAgICAgIGAke3RhcmdldFBhdGh9LyR7bWQucGF0aH1gXG4gICAgICAgICk7XG4gICAgICAgIGNvbnN0IGZvbGRlciA9IGZ1bGxQYXRoLnNwbGl0KFwiL1wiKS5zbGljZSgwLCAtMSkuam9pbihcIi9cIik7XG5cbiAgICAgICAgYXdhaXQgZW5zdXJlRm9sZGVyKGFwcCwgZm9sZGVyKTtcbiAgICAgICAgYXdhaXQgYXBwLnZhdWx0LmFkYXB0ZXIud3JpdGUoZnVsbFBhdGgsIG1kLmNvbnRlbnQpO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIGNvbnNvbGUud2FybihcIkZhaWxlZCB0byBpbXBvcnQgc2Vuc2VzLmpzb246XCIsIGUpO1xuICAgIH1cbiAgfVxuXG4gICAgIC8vIFx1RDgzRFx1REQzOSBSVUxFUzogU0tJTExTXG4gIHtcbiAgICB0cnkge1xuXG4gICAgICBjb25zdCByZXMgID0gYXdhaXQgZmV0Y2goYCR7ZWRpdGlvbi5zb3VyY2VVcmx9L3NraWxscy5qc29uYCk7XG4gICAgICBjb25zdCBqc29uID0gYXdhaXQgcmVzLmpzb24oKTtcbiAgICBcbiAgICAgIGNvbnN0IG1kRmlsZXMgPSBwYXJzZVNraWxsc0ZpbGUoanNvbiwgZWRpdGlvbi5pZCk7XG4gICAgXG4gICAgICBmb3IgKGNvbnN0IG1kIG9mIG1kRmlsZXMpIHtcbiAgICAgICAgY29uc3QgZnVsbFBhdGggPSBub3JtYWxpemVQYXRoKFxuICAgICAgICAgIGAke3RhcmdldFBhdGh9LyR7bWQucGF0aH1gXG4gICAgICAgICk7XG4gICAgICAgIGNvbnN0IGZvbGRlciA9IGZ1bGxQYXRoLnNwbGl0KFwiL1wiKS5zbGljZSgwLCAtMSkuam9pbihcIi9cIik7XG5cbiAgICAgICAgYXdhaXQgZW5zdXJlRm9sZGVyKGFwcCwgZm9sZGVyKTtcbiAgICAgICAgYXdhaXQgYXBwLnZhdWx0LmFkYXB0ZXIud3JpdGUoZnVsbFBhdGgsIG1kLmNvbnRlbnQpO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIGNvbnNvbGUud2FybihcIkZhaWxlZCB0byBpbXBvcnQgc2tpbGxzLmpzb246XCIsIGUpO1xuICAgIH1cbiAgfVxuXG4gICAvLyBcdUQ4M0RcdUREMzkgRkVBVFNcbiAge1xuICAgIHRyeSB7XG5cbiAgICAgIGNvbnN0IHJlcyAgPSBhd2FpdCBmZXRjaChgJHtlZGl0aW9uLnNvdXJjZVVybH0vZmVhdHMuanNvbmApO1xuICAgICAgY29uc3QganNvbiA9IGF3YWl0IHJlcy5qc29uKCk7XG4gICAgXG4gICAgICBjb25zdCBtZEZpbGVzID0gcGFyc2VGZWF0c0ZpbGUoanNvbiwgZWRpdGlvbi5pZCk7XG4gICAgXG4gICAgICBmb3IgKGNvbnN0IG1kIG9mIG1kRmlsZXMpIHtcbiAgICAgICAgY29uc3QgZnVsbFBhdGggPSBub3JtYWxpemVQYXRoKFxuICAgICAgICAgIGAke3RhcmdldFBhdGh9LyR7bWQucGF0aH1gXG4gICAgICAgICk7XG4gICAgICAgIGNvbnN0IGZvbGRlciA9IGZ1bGxQYXRoLnNwbGl0KFwiL1wiKS5zbGljZSgwLCAtMSkuam9pbihcIi9cIik7XG5cbiAgICAgICAgYXdhaXQgZW5zdXJlRm9sZGVyKGFwcCwgZm9sZGVyKTtcbiAgICAgICAgYXdhaXQgYXBwLnZhdWx0LmFkYXB0ZXIud3JpdGUoZnVsbFBhdGgsIG1kLmNvbnRlbnQpO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIGNvbnNvbGUud2FybihcIkZhaWxlZCB0byBpbXBvcnQgZmVhdHMuanNvbjpcIiwgZSk7XG4gICAgfVxuICB9XG5cbi8vIFx1RDgzRFx1REQzOSBCQUNLR1JPVU5EU1xue1xuICB0cnkge1xuICAgIGNvbnN0IHJlcyAgPSBhd2FpdCBmZXRjaChgJHtlZGl0aW9uLnNvdXJjZVVybH0vYmFja2dyb3VuZHMuanNvbmApO1xuICAgIGNvbnN0IGpzb24gPSBhd2FpdCByZXMuanNvbigpO1xuXG4gICAgY29uc3QgbWRGaWxlcyA9IHBhcnNlQmFja2dyb3VuZHNGaWxlKGpzb24sIGVkaXRpb24uaWQpO1xuXG4gICAgZm9yIChjb25zdCBtZCBvZiBtZEZpbGVzKSB7XG4gICAgICAvLyBtZC5wYXRoIGlzIFwiUGxheWVyIEJ1aWxkL0JhY2tncm91bmRzLzxOYW1lPi5tZFwiXG4gICAgICBjb25zdCBmdWxsUGF0aCA9IG5vcm1hbGl6ZVBhdGgoYCR7dGFyZ2V0UGF0aH0vJHttZC5wYXRofWApO1xuICAgICAgY29uc3QgZm9sZGVyICAgPSBmdWxsUGF0aC5zcGxpdChcIi9cIikuc2xpY2UoMCwgLTEpLmpvaW4oXCIvXCIpO1xuXG4gICAgICBhd2FpdCBlbnN1cmVGb2xkZXIoYXBwLCBmb2xkZXIpO1xuICAgICAgYXdhaXQgYXBwLnZhdWx0LmFkYXB0ZXIud3JpdGUoZnVsbFBhdGgsIG1kLmNvbnRlbnQpO1xuICAgIH1cbiAgfSBjYXRjaCAoZSkge1xuICAgIGNvbnNvbGUud2FybihcIkZhaWxlZCB0byBpbXBvcnQgYmFja2dyb3VuZHMuanNvbjpcIiwgZSk7XG4gIH1cbn1cblxufSIsICIvLyBoZWxwZXJzL3NvdXJjZU1hcC50c1xuXG4vLyBNYXAgb2YgNWUgc291cmNlIGFiYnJldmlhdGlvbnMgdG8gdGhlaXIgZnVsbCB0aXRsZXNcbmNvbnN0IFNPVVJDRV9OQU1FX01BUDogUmVjb3JkPHN0cmluZywgc3RyaW5nPiA9IHtcbiAgLy8gQ29yZSBydWxlYm9va3NcbiAgUEhCOiBcIlBsYXllcidzIEhhbmRib29rXCIsXG4gIE1NOiAgXCJNb25zdGVyIE1hbnVhbFwiLFxuICBETUc6IFwiRHVuZ2VvbiBNYXN0ZXIncyBHdWlkZVwiLFxuXG4gIC8vIE9mZmljaWFsIGV4cGFuc2lvbnMgJiBhZHZlbnR1cmUgbW9kdWxlc1xuICBDb1M6ICBcIkN1cnNlIG9mIFN0cmFoZFwiLFxuICBPb3RBOiBcIk91dCBvZiB0aGUgQWJ5c3NcIixcbiAgUG90QTogXCJQcmluY2VzIG9mIHRoZSBBcG9jYWx5cHNlXCIsXG4gIEhvdERROiBcIkhvYXJkIG9mIHRoZSBEcmFnb24gUXVlZW5cIixcbiAgUm9UOiAgXCJSaXNlIG9mIFRpYW1hdFwiLFxuICBTS1Q6ICBcIlN0b3JtIEtpbmcncyBUaHVuZGVyXCIsXG4gIFRmdFlQOlwiVGFsZXMgZnJvbSB0aGUgWWF3bmluZyBQb3J0YWxcIixcbiAgVG9BOiAgXCJUb21iIG9mIEFubmloaWxhdGlvblwiLFxuXG4gIC8vIFN1cHBsZW1lbnRhbCBndWlkZXNcbiAgWEdFOiBcIlhhbmF0aGFyJ3MgR3VpZGUgdG8gRXZlcnl0aGluZ1wiLFxuICBWR006IFwiVm9sbydzIEd1aWRlIHRvIE1vbnN0ZXJzXCIsXG4gIFRDRTogXCJUYXNoYSdzIENhdWxkcm9uIG9mIEV2ZXJ5dGhpbmdcIixcbiAgRUdXOiBcIkViZXJyb246IFJpc2luZyBmcm9tIHRoZSBMYXN0IFdhclwiLFxuICBFUkxXOlwiRXhwbG9yZXIncyBHdWlkZSB0byBXaWxkZW1vdW50XCIsXG4gIE1URjogXCJNb25zdGVycyBvZiB0aGUgTXVsdGl2ZXJzZVwiLFxuICBWUkdSOlwiVmFuIFJpY2h0ZW4ncyBHdWlkZSB0byBSYXZlbmxvZnRcIixcblxuICAvLyBBZGRpdGlvbmFsIHNvdXJjZWJvb2tzXG4gIEFBRzogICAgICBcIkFzdHJhbCBBZHZlbnR1cmVyXHUyMDE5cyBHdWlkZVwiLFxuICBBSTogICAgICAgXCJBY3F1aXNpdGlvbnMgSW5jb3Jwb3JhdGVkXCIsXG4gIEFpdEZSQVZGVDpcIkFkdmVudHVyZXMgaW4gdGhlIEZvcmdvdHRlbiBSZWFsbXM6IEEgVmlzdWFsIEZpZWxkIFRlc3RcIixcbiAgQk1UOiAgICAgIFwiQmlnIE1vbnN0ZXIgVG9tZVwiLFxuICBEb0RrOiAgICAgXCJEcmFnb24gb2YgRGFya2tlZXBcIixcbiAgRlREOiAgICAgIFwiRml6YmFuXHUyMDE5cyBUcmVhc3VyeSBvZiBEcmFnb25zXCIsXG4gIEdHUjogICAgICBcIkd1aWxkbWFzdGVyXHUyMDE5cyBHdWlkZSB0byBSYXZuaWNhXCIsXG4gIEdITG9FOiAgICBcIkdob3N0cyBvZiB0aGUgSG9yaXpvbjogTGlnaHQgT3ZlciBFbGVuc2FyaWFcIixcbiAgSURSb3RGOiAgIFwiSWNld2luZCBEYWxlOiBSaW1lIG9mIHRoZSBGcm9zdG1haWRlblwiLFxuICBMTEs6ICAgICAgXCJMb3N0IExhYm9yYXRvcnkgb2YgS3dhbGlzaFwiLFxuICBTYXRPOiAgICAgXCJTYXBwaGlyZSBvZiBUcnV0aFwiLFxuICBTQ0M6ICAgICAgXCJTdHJpeGhhdmVuOiBDdXJyaWN1bHVtIG9mIENoYW9zXCIsXG4gIFREQ1NSOiAgICBcIlRoZSBEdW5nZW9uIENvYWNoXHUyMDE5cyBSdWxlYm9va1wiLFxuICBKdHRSQzogICAgXCJKb3VybmV5cyB0aHJvdWdoIHRoZSBSYWRpYW50IENpdGFkZWxcIixcbiAgXCJBaXRGUi1BVlRcIjpcIkFkdmVudHVyZXMgaW4gdGhlIEZvcmdvdHRlbiBSZWFsbXM6IEEgVmVyZGFudCBUb21iXCIsXG4gIFwiQWl0RlItRkNEXCI6XCJBZHZlbnR1cmVzIGluIHRoZSBGb3Jnb3R0ZW4gUmVhbG1zOiBGcm9tIEN5YW4gRGVwdGhzXCIsXG4gIFJNUjogICAgICBcIkR1bmdlb25zIGFuZCBEcmFnb25zOiBSaWNrIGFuZCBNb3J0eVwiLFxuICBTQ0FHOiAgICAgXCJTd29yZCBDb2FzdCBBZHZlbnR1cmVyJ3MgR3VpZGVcIixcbiAgRUVQQzogICAgIFwiRWxlbWVudGFsIEV2aWwgUGxheWVyJ3MgQ29tcGFuaW9uXCIsXG4gIE1PVDogICAgICBcIk15dGhpYyBPZHlzc2V5cyBvZiBUaGVyb3NcIixcbiAgV0J0VzogICAgIFwiVGhlIFdpbGQgQmV5b25kIHRoZSBXaXRjaGxpZ2h0XCIsXG4gIEJHRElBOiAgICBcIkJhbGR1cidzIEdhdGU6IERlc2NlbnQgSW50byBBdmVybnVzXCIsXG4gIFRvRlc6ICAgICBcIlR1cm4gb2YgRm9ydHVuZSdzIFdoZWVsXCIsXG4gIENvQTogICAgICBcIkNoYWlucyBvZiBBc21vZGV1c1wiLFxuICBDUkNvdE46ICAgXCJDcml0aWNhbCBSb2xlOiBDYWxsIG9mIHRoZSBOZXRoZXJkZWVwXCIsXG4gIFRvRDogICAgICBcIlR5cmFubnkgb2YgRHJhZ29uc1wiLFxuICBNUE1NOiAgICAgXCJNb3JkZW5rYWluZW4gUHJlc2VudHM6IE1vbnN0ZXJzIG9mIHRoZSBNdWx0aXZlcnNlXCIsXG4gIExvWDogICAgICBcIkxpZ2h0IG9mIFhhcnl4aXNcIixcbiAgUWZ0SVM6ICAgIFwiUXVlc3RzIGZyb20gdGhlIEluZmluaXRlIFN0YWlyY2FzZVwiLFxuICBXREg6ICAgICAgXCJXYXRlcmRlZXA6IERyYWdvbiBIZWlzdFwiLFxuICBXRE1NOiAgICAgXCJXYXRlcmRlZXA6IER1bmdlb24gb2YgdGhlIE1hZCBNYWdlXCIsXG4gIFBhQlRTTzogICBcIlBoYW5kZWx2ZXIgYW5kIEJlbG93OiBUaGUgU2hhdHRlcmVkIE9iZWxpc2tcIixcbiAgQ006ICAgICAgIFwiQ2FuZGxla2VlcCBNeXN0ZXJpZXNcIixcbiAgR29TOiAgICAgIFwiR2hvc3RzIG9mIFNhbHRtYXJzaFwiLFxuICBEU290RFE6ICAgXCJEcmFnb25sYW5jZTogU2hhZG93IG9mIHRoZSBEcmFnb24gUXVlZW5cIixcbiAgS2Z0R1Y6ICAgIFwiS2V5cyBmcm9tIHRoZSBHb2xkZW4gVmF1bHRcIixcbiAgU0RXOiAgICAgIFwiRXNzZW50aWFscyBLaXQ6IFNsZWVwaW5nIERyYWdvbidzIFdha2VcIixcbiAgRG9TSTogICAgIFwiRHJhZ29ucyBvZiBTdG9ybXdyZWNrIElzbGVcIixcbiAgR290U0Y6ICAgIFwiR2lhbnRzIG9mIHRoZSBTdGFyIEZvcmdlXCIsXG4gIERJUDogICAgICBcIkVzc2VudGlhbHMgS2l0OiBEcmFnb24gb2YgSWNlc3BpcmUgUGVha1wiLFxuICBTTFc6ICAgICAgXCJFc3NlbnRpYWxzIEtpdDogU3Rvcm0gTG9yZCdzIFdyYXRoXCIsXG4gIElNUjogICAgICBcIkluZmVybmFsIE1hY2hpbmUgUmVidWlsZFwiLFxuICBWRW9SOiAgICAgXCJWZWNuYTogRXZlIG9mIFJ1aW5cIixcbiAgUFNJOiAgICAgIFwiUGxhbmUgU2hpZnQ6IElubmlzdHJhZFwiLFxuICBBQVRNOiAgICAgXCJBZHZlbnR1cmUgQXRsYXM6IFRoZSBNb3J0dWFyeVwiLFxuICBQU1o6ICAgICAgXCJQbGFuZSBTaGlmdDogWmVuZGlrYXJcIixcbiAgREM6ICAgICAgIFwiRXNzZW50aWFscyBLaXQ6IERpdmluZSBDb250ZW50aW9uXCIsXG4gIExNb1A6ICAgICBcIkxvc3QgTWluZSBvZiBQaGFuZGVsdmVyXCIsXG4gIFJNQlJFOiAgICBcIlRoZSBMb3N0IER1bmdlb24gb2YgUmlja2VkbmVzczogQmlnIFJpY2sgRW5lcmd5XCIsXG4gIEhmdFQ6ICAgICBcIkh1bnQgZm9yIHRoZSBUaGVzc2FsaHlkcmFcIixcbiAgUFNYOiAgICAgIFwiUGxhbmUgU2hpZnQ6IEl4YWxhblwiLFxuICBIRlN0Q006ICAgXCJIZXJvZXMnIEZlYXN0OiBTYXZpbmcgdGhlIENoaWxkcmVucyBNZW51XCIsXG4gIFNqQTogICAgICBcIlNwZWxsamFtbWVyIEFjYWRlbXlcIixcbiAgTEs6ICAgICAgIFwiTGlnaHRuaW5nIEtlZXBcIixcbiAgUnRHOiAgICAgIFwiUmV0dXJuIHRvIHRoZSBHbG9yeVwiLFxuICBUVFA6ICAgICAgXCJUaGUgVG9ydGxlIFBhY2thZ2VcIixcbiAgTFI6ICAgICAgIFwiTG9jYXRoYWggUmlzaW5nXCIsXG4gIFBTQTogICAgICBcIlBsYW5lIFNoaWZ0OiBBbW9ua2hldFwiLFxuICBPR0E6ICAgICAgXCJPbmUgR3J1bmcgQWJvdmVcIixcbiAgXCJOUkgtVExUXCI6ICBcIk5lcmRzIFJlc3RvcmluZyBIYXJtb255OiBUaGUgTG9zdCBUb21iXCIsXG4gIFwiTlJILUFUXCI6ICAgXCJOZXJkcyBSZXN0b3JpbmcgSGFybW9ueTogQWR2ZW50dXJlIFRvZ2V0aGVyXCIsXG4gIEJHRzogICAgICBcIkJpZ2J5IFByZXNlbnRzOiBHbG9yeSBvZiB0aGUgR2lhbnRzXCIsXG4gIFJvVE9TOiAgICBcIlRoZSBSaXNlIG9mIFRpYW1hdCBPbmxpbmUgU3VwcGxlbWVudFwiLFxuICBYTXRTOiAgICAgXCJYIE1hcmtzIHRoZSBTcG90XCIsXG4gIFwiSEFULUxNSVwiOiAgXCJIb25vciBBbW9uZyBUaGVpdmVzOiBMZWdlbmRhcnkgTWFnaWMgSXRlbXNcIixcbiAgRGl0TENvVDogIFwiRGVzY2VudCBpbnRvIHRoZSBMb3N0IENhdmVybnMgb2YgVHNvamNhbnRoXCIsXG4gIFwiQWl0RlItRE5cIjogXCJBZHZlbnR1cmVzIGluIHRoZSBGb3Jnb3R0ZW4gUmVhbG1zOiBEZWVwZXN0IE5pZ2h0XCIsXG4gIFwiQWl0RlItVEhQXCI6XCJBZHZlbnR1cmVzIGluIHRoZSBGb3Jnb3R0ZW4gUmVhbG1zOiBUaGUgSGlkZGVuIFBhZ2VzXCIsXG4gIEJBTTogICAgICBcIkJvbydzIEFzdHJhbCBNZW5hZ2VyaWVcIixcbiAgQVpmeVQ6ICAgIFwiQSBaaWIgZm9yIFlvdXIgVGhvdWd0c1wiLFxuICBNQ1YyREM6ICAgXCJNb25zdHJvdXMgQ29tcGVuZGl1bSBWb2x1bWUgMjogRHJhZ29ubGFuY2UgQ3JlYXR1cmVzXCIsXG4gIFBTSzogICAgICBcIlBsYW5lIFNoaWZ0OiBLYWxhZGVzaFwiLFxuICBQU0Q6ICAgICAgXCJQbGFuZSBTaGlmdDogRG9taW5hcmlhXCIsXG4gIEFXTTogICAgICBcIkFkdmVudHVyZSB3aXRoIE11a1wiLFxuICBVQVRoZU15c3RpY0NsYXNzOiBcIlVuZWFydGhlZCBBcmNhbmE6IFRoZSBNeXN0aWMgQ2xhc3NcIixcbiAgQUxDdXJzZU9mU3RyYWhkOiBcIkFkdmVudHVyZXJzIExlYWd1ZTogQ3Vyc2Ugb2YgU3RyYWhkXCIsXG4gIEFMRWxlbWVudGFsRXZpbDogXCJBZHZlbnR1cmVycyBMZWFndWU6IEVsZW1lbnRhbCBFdmlsXCIsXG4gIEFMUmFnZU9mRGVtb25zOiAgXCJBZHZlbnR1cmVycyBMZWFndWU6IFJhZ2Ugb2YgRGVtb25zXCJcbn07XG5cbi8qKlxuICogUmV0dXJucyB0aGUgZnVsbCBzb3VyY2UgbmFtZSBmb3IgYSBnaXZlbiBhYmJyZXZpYXRpb24uXG4gKiBPcHRpb25hbGx5IGFwcGVuZHMgeWVhciBmb3IgUEhCIHZhcmlhbnRzLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0RnVsbFNvdXJjZU5hbWUoYWJicmV2OiBzdHJpbmcsIGVkaXRpb25JZD86IHN0cmluZyk6IHN0cmluZyB7XG4gIGxldCBuYW1lID0gU09VUkNFX05BTUVfTUFQW2FiYnJldl0gPz8gYWJicmV2O1xuXG4gIC8vIEFwcGVuZCB5ZWFyIGZvciBQSEIgaWYgdGhlIGVkaXRpb24gY29udGV4dCBpcyBrbm93blxuICBpZiAoYWJicmV2ID09PSBcIlBIQlwiKSB7XG4gICAgaWYgKGVkaXRpb25JZD8uaW5jbHVkZXMoXCIyMDE0XCIpKSBuYW1lICs9IFwiICgyMDE0KVwiO1xuICAgIGVsc2UgaWYgKGVkaXRpb25JZD8uaW5jbHVkZXMoXCIyMDI1XCIpKSBuYW1lICs9IFwiICgyMDI1KVwiO1xuICB9XG5cbiAgcmV0dXJuIG5hbWU7XG59XG4iLCAiLy8gcGFyc2Vycy81ZS1qc29uL2hlbHBlcnMvdGFnUmVwbGFjZXIudHNcblxuZXhwb3J0IGZ1bmN0aW9uIHJlcGxhY2U1ZVRhZ3MoaW5wdXQ6IHVua25vd24pOiBzdHJpbmcge1xuICAvLyAxKSBUdXJuIGFycmF5cyBpbnRvIHNwYWNlLWpvaW5lZCBzdHJpbmdzXG4gIC8vIDIpIExlYXZlIHN0cmluZ3MgYWxvbmVcbiAgLy8gMykgQ29lcmNlIGV2ZXJ5dGhpbmcgZWxzZSB0byBzdHJpbmcgKG9yIGVtcHR5KVxuICBsZXQgdGV4dDogc3RyaW5nO1xuICBpZiAoQXJyYXkuaXNBcnJheShpbnB1dCkpIHtcbiAgICB0ZXh0ID0gaW5wdXQuam9pbihcIiBcIik7XG4gIH0gZWxzZSBpZiAodHlwZW9mIGlucHV0ID09PSBcInN0cmluZ1wiKSB7XG4gICAgdGV4dCA9IGlucHV0O1xuICB9IGVsc2Uge1xuICAgIHRleHQgPSBTdHJpbmcoaW5wdXQgPz8gXCJcIik7XG4gIH1cblxuICAvLyBub3cgcnVuIGFsbCB5b3VyIEAtdGFnIHJlcGxhY2VtZW50cyBvbiB0aGF0IHRleHRcbiAgcmV0dXJuIHRleHRcbiAgICAucmVwbGFjZSgvXFx7I2l0ZW1FbnRyeVxccysoW159fF0rKSg/OlxcfFtefV0qKT9cXH0vZ2ksIChfbSwgcmF3TmFtZSkgPT4ge1xuICAgICAgcmV0dXJuIGBbWyR7Y2FwaXRhbGl6ZUVhY2goU3RyaW5nKHJhd05hbWUpLnRyaW0oKSl9XV1gO1xuICAgIH1cbiAgICApXG4gICAgLnJlcGxhY2UoL1xce0Aoc3BlbGx8aXRlbXxjcmVhdHVyZXxyYWNlKSAoW158fV0rKSg/OlxcfFtefV0rKT9cXH0vZywgKF8sIF9fLCBuYW1lKSA9PlxuICAgICAgYFtbJHtjYXBpdGFsaXplRWFjaChuYW1lKX1dXWBcbiAgICApXG4gICAgLnJlcGxhY2UoL1xce0AoY29uZGl0aW9ufHN0YXR1c3xhY3Rpb258c2tpbGwpIChbXnx9XSspKD86XFx8W159XSspP1xcfS9nLCAoXywgdGFnLCBuYW1lKSA9PlxuICAgICAgYFtbJHtjYXBpdGFsaXplKHRhZyl9cyMke25hbWV9fCR7Y2FwaXRhbGl6ZUVhY2gobmFtZSl9XV1gXG4gICAgKVxuICAgIC5yZXBsYWNlKC9cXHtAY2xhc3NGZWF0dXJlIChbXnx9XSspXFx8KFtefH1dKykoPzpcXHxbXn1dKyk/XFx9L2csIChfLCBmZWF0dXJlLCBjbHMpID0+XG4gICAgICBgW1ske2Nsc30jJHtmZWF0dXJlfV1dYFxuICAgIClcbiAgICAucmVwbGFjZSgvXFx7QChib29rfGZpbHRlcikgKFtefH1dKykoPzpcXHxbXn1dKyk/XFx9L2csIChfLCBfXywgdHh0KSA9PiB0eHQpXG4gICAgLnJlcGxhY2UoL1xce0Bub3RlIChbXn1dKylcXH0vZywgKF8sIG5vdGUpID0+IGAqJHtub3RlfSpgKVxuICAgIC5yZXBsYWNlKC9cXHtAKGRhbWFnZXxkaWNlfGRjfGhpdHxzZW5zZSkgKFtefV0rKVxcfS9nLCAoXywgX18sIHZhbHVlKSA9PiB2YWx1ZSlcbiAgICAucmVwbGFjZSgvXFx7QGNoYW5jZSAoW158fV0rKSg/OlxcfFtefV0rKT9cXH0vZywgKF8sIHZhbHVlKSA9PiBgJHt2YWx1ZX0lYClcbiAgICAucmVwbGFjZSgvXFx7QHF1aWNrcmVmIChbXnx9XSspKD86XFx8W158XSpcXHxbXn1dKik/XFx9L2csIChfLCB0ZXJtKSA9PiB7XG4gICAgICBjb25zdCBrbm93biA9IFtcbiAgICAgICAgXCJkaWZmaWN1bHQgdGVycmFpblwiLCBcInRvdGFsIGNvdmVyXCIsIFwiaGFsZiBjb3ZlclwiLCBcInRocmVlLXF1YXJ0ZXJzIGNvdmVyXCIsXG4gICAgICAgIFwiaGVhdmlseSBvYnNjdXJlZFwiLCBcImxpZ2h0bHkgb2JzY3VyZWRcIlxuICAgICAgXTtcbiAgICAgIHJldHVybiBrbm93bi5pbmNsdWRlcyh0ZXJtLnRvTG93ZXJDYXNlKCkpXG4gICAgICAgID8gYFtbUnVsZXMjJHtjYXBpdGFsaXplRWFjaCh0ZXJtKX1dXWBcbiAgICAgICAgOiB0ZXJtO1xuICAgIH0pXG4gICAgLnJlcGxhY2UoL1xce1xcQDVldG9vbHNcXHMrKFtefH1dKylcXHxbXn1dK1xcfS9nLCAnJDEnKVxuICAgIC5yZXBsYWNlKC9cXHtAcmVjaGFyZ2VcXHMqKFtefV0rKVxcfS9nLCAoXywgbnVtKSA9PiBgKHJlY2hhcmdlOiAke251bS50cmltKCl9KWApXG4gICAgLnJlcGxhY2UoL1xce0Aoc2NhbGVkaWNlfHNjYWxlZGFtYWdlKVtefV0qXFx8KFtefH1dKylcXH0vZywgKF8sIF9fLCB2YWx1ZSkgPT4gdmFsdWUpXG4gICAgLnJlcGxhY2UoL1xce0BkMjBbXn1dKlxcfS9nLCBcIlwiKVxuICAgIC5yZXBsYWNlKC9cXHtAW159XStcXH0vZywgXCJcIik7XG59XG5cbmZ1bmN0aW9uIGNhcGl0YWxpemUoc3RyOiBzdHJpbmcpOiBzdHJpbmcge1xuICByZXR1cm4gc3RyLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgc3RyLnNsaWNlKDEpLnRvTG93ZXJDYXNlKCk7XG59XG5cbmZ1bmN0aW9uIGNhcGl0YWxpemVFYWNoKHN0cjogc3RyaW5nKTogc3RyaW5nIHtcbiAgcmV0dXJuIHN0ci5zcGxpdChcIiBcIikubWFwKGNhcGl0YWxpemUpLmpvaW4oXCIgXCIpO1xufVxuIiwgImltcG9ydCB7IHJlcGxhY2U1ZVRhZ3MgfSBmcm9tIFwiLi90YWdSZXBsYWNlclwiO1xuXG5leHBvcnQgZnVuY3Rpb24gcmVuZGVyTWFya2Rvd25UYWJsZShlbnRyeTogYW55KTogc3RyaW5nIHtcbiAgaWYgKGVudHJ5LnR5cGUgIT09IFwidGFibGVcIiB8fCAhQXJyYXkuaXNBcnJheShlbnRyeS5yb3dzKSkgcmV0dXJuIFwiXCI7XG5cbiAgY29uc3QgY2FwdGlvbiA9IGVudHJ5LmNhcHRpb24gPyBgIyMjIyMgJHtlbnRyeS5jYXB0aW9ufVxcbmAgOiBcIlwiO1xuXG4gIGNvbnN0IGhlYWRlcnMgPSAoZW50cnkuY29sTGFiZWxzID8/IFtdKVxuICAgIC5tYXAoKGg6IHN0cmluZykgPT4gcmVwbGFjZTVlVGFncyhoLnRyaW0oKSkpOyAvLyBcdTI3MDUgdGFnIHJlcGxhY2Ugb24gaGVhZGVyc1xuXG4gIGNvbnN0IGhlYWRlclJvdyA9IGB8ICR7aGVhZGVycy5qb2luKFwiIHwgXCIpfSB8YDtcbiAgY29uc3QgZGl2aWRlclJvdyA9IGB8ICR7aGVhZGVycy5tYXAoKCkgPT4gXCI6LS1cIikuam9pbihcIiB8IFwiKX0gfGA7XG5cbiAgY29uc3QgYm9keVJvd3MgPSBlbnRyeS5yb3dzLm1hcCgocm93OiBhbnlbXSkgPT4ge1xuICAgIGNvbnN0IGNlbGxzID0gcm93Lm1hcCgoY2VsbCkgPT4ge1xuICAgICAgaWYgKHR5cGVvZiBjZWxsID09PSBcInN0cmluZ1wiKSByZXR1cm4gcmVwbGFjZTVlVGFncyhjZWxsKTsgLy8gXHUyNzA1IHRhZyByZXBsYWNlIHN0cmluZ3NcblxuICAgICAgaWYgKHR5cGVvZiBjZWxsID09PSBcIm9iamVjdFwiKSB7XG4gICAgICAgIGlmIChjZWxsLnJvbGw/LmV4YWN0ICE9PSB1bmRlZmluZWQpIHJldHVybiBgJHtjZWxsLnJvbGwuZXhhY3R9YDtcbiAgICAgICAgaWYgKGNlbGwucm9sbD8ubWluICE9PSB1bmRlZmluZWQgJiYgY2VsbC5yb2xsPy5tYXggIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgIHJldHVybiBgJHtjZWxsLnJvbGwubWlufVx1MjAxMyR7Y2VsbC5yb2xsLm1heH1gO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXBsYWNlNWVUYWdzKEpTT04uc3RyaW5naWZ5KGNlbGwpKTsgLy8gZmFsbGJhY2sgZm9yIHVua25vd24gc2hhcGVzXG4gICAgICB9XG5cbiAgICAgIHJldHVybiByZXBsYWNlNWVUYWdzKFN0cmluZyhjZWxsKSk7XG4gICAgfSk7XG5cbiAgICByZXR1cm4gYHwgJHtjZWxscy5qb2luKFwiIHwgXCIpfSB8YDtcbiAgfSk7XG5cbiAgcmV0dXJuIGAke2NhcHRpb259JHtoZWFkZXJSb3d9XFxuJHtkaXZpZGVyUm93fVxcbiR7Ym9keVJvd3Muam9pbihcIlxcblwiKX1gO1xufVxuIiwgIi8vZm9ybWF0ZW50cnkgZG5kIDVlIDIwMTRcbmltcG9ydCB7IHJlcGxhY2U1ZVRhZ3MgfSBmcm9tIFwiLi90YWdSZXBsYWNlclwiO1xuaW1wb3J0IHsgcmVuZGVyTWFya2Rvd25UYWJsZSB9IGZyb20gXCIuL21hcmtkb3duVGFibGVcIjtcblxuY29uc3QgZW5zdXJlUGVyaW9kID0gKHM6IHN0cmluZykgPT4gKC9bLiE/XVxccyokLy50ZXN0KHMpID8gcyA6IGAke3N9LmApO1xuXG5mdW5jdGlvbiByZW5kZXJMaXN0KGxpc3Q6IGFueSk6IHN0cmluZyB7XG4gIGNvbnN0IGl0ZW1zID0gQXJyYXkuaXNBcnJheShsaXN0Py5pdGVtcykgPyBsaXN0Lml0ZW1zIDogW107XG4gIGlmICghaXRlbXMubGVuZ3RoKSByZXR1cm4gXCJcIjtcblxuICBjb25zdCBsaW5lczogc3RyaW5nW10gPSBbXTtcblxuICBmb3IgKGNvbnN0IGl0IG9mIGl0ZW1zKSB7XG4gICAgLy8gc2ltcGxlIHN0cmluZyBidWxsZXRcbiAgICBpZiAodHlwZW9mIGl0ID09PSBcInN0cmluZ1wiKSB7XG4gICAgICBsaW5lcy5wdXNoKGAtICR7cmVwbGFjZTVlVGFncyhpdCl9YCk7XG4gICAgICBjb250aW51ZTtcbiAgICB9XG5cbiAgICAvLyBvYmplY3QgYnVsbGV0OiBuYW1lICsgZW50cnkvZW50cmllc1xuICAgIGlmIChpdCAmJiB0eXBlb2YgaXQgPT09IFwib2JqZWN0XCIpIHtcbiAgICAgIGNvbnN0IGhlYWQgPVxuICAgICAgICB0eXBlb2YgaXQubmFtZSA9PT0gXCJzdHJpbmdcIiAmJiBpdC5uYW1lLnRyaW0oKVxuICAgICAgICAgID8gYCoqKiR7ZW5zdXJlUGVyaW9kKHJlcGxhY2U1ZVRhZ3MoaXQubmFtZSkpfSoqKmBcbiAgICAgICAgICA6IFwiXCI7XG5cbiAgICAgIGxldCBib2R5ID0gXCJcIjtcbiAgICAgIGlmICh0eXBlb2YgaXQuZW50cnkgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgYm9keSA9IHJlcGxhY2U1ZVRhZ3MoaXQuZW50cnkpO1xuICAgICAgfSBlbHNlIGlmIChBcnJheS5pc0FycmF5KGl0LmVudHJpZXMpKSB7XG4gICAgICAgIGJvZHkgPSBpdC5lbnRyaWVzXG4gICAgICAgICAgLm1hcCgoZTogYW55KSA9PlxuICAgICAgICAgICAgdHlwZW9mIGUgPT09IFwic3RyaW5nXCIgPyByZXBsYWNlNWVUYWdzKGUpIDogZm9ybWF0RW50cnkoZSlcbiAgICAgICAgICApXG4gICAgICAgICAgLmpvaW4oXCIgXCIpO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBsaW5lID0gW2hlYWQsIGJvZHldLmZpbHRlcihCb29sZWFuKS5qb2luKFwiIFwiKS50cmltKCk7XG4gICAgICBsaW5lcy5wdXNoKGAtICR7bGluZX1gLnRyaW0oKSk7XG4gICAgICBjb250aW51ZTtcbiAgICB9XG5cbiAgICAvLyBmaW5hbCBmYWxsYmFjayAoc2hvdWxkblx1MjAxOXQgdXN1YWxseSBoaXQpXG4gICAgbGluZXMucHVzaChgLSAke1N0cmluZyhpdCA/PyBcIlwiKX1gKTtcbiAgfVxuXG4gIHJldHVybiBsaW5lcy5qb2luKFwiXFxuXCIpO1xufVxuXG5mdW5jdGlvbiByZW5kZXJUYWJsZSh0OiBhbnkpOiBzdHJpbmcge1xuICBjb25zdCBoZWFkZXJzOiBzdHJpbmdbXSA9IEFycmF5LmlzQXJyYXkodD8uY29sTGFiZWxzKVxuICAgID8gdC5jb2xMYWJlbHMubWFwKChoOiBhbnkpID0+IHJlcGxhY2U1ZVRhZ3MoaCkpXG4gICAgOiBbXTtcblxuICBjb25zdCByb3dzOiBzdHJpbmdbXVtdID0gQXJyYXkuaXNBcnJheSh0Py5yb3dzKVxuICAgID8gdC5yb3dzLm1hcCgocjogYW55KSA9PlxuICAgICAgICBBcnJheS5pc0FycmF5KHIpID8gci5tYXAoKGNlbGw6IGFueSkgPT4gcmVwbGFjZTVlVGFncyhjZWxsKSkgOiBbXVxuICAgICAgKVxuICAgIDogW107XG5cbiAgcmV0dXJuIHJlbmRlck1hcmtkb3duVGFibGUoW2hlYWRlcnMsIC4uLnJvd3NdKTtcblxufVxuXG4vKiogR2VuZXJpYyA1ZS50b29scyBlbnRyeSBcdTIxOTIgbWFya2Rvd24gcGFyYWdyYXBoL2J1bGxldHMvZXRjLiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGZvcm1hdEVudHJ5KGVudHJ5OiBhbnkpOiBzdHJpbmcge1xuICAvLyBiYXJlIHN0cmluZ1xuICBpZiAodHlwZW9mIGVudHJ5ID09PSBcInN0cmluZ1wiKSByZXR1cm4gcmVwbGFjZTVlVGFncyhlbnRyeSk7XG5cbiAgLy8gbnVsbC91bmRlZmluZWQgb3Igbm9uLW9iamVjdHNcbiAgaWYgKCFlbnRyeSB8fCB0eXBlb2YgZW50cnkgIT09IFwib2JqZWN0XCIpIHJldHVybiBTdHJpbmcoZW50cnkgPz8gXCJcIik7XG5cbiAgLy8gZXhwbGljaXQgbGlzdCBcdTIxOTIgYnVsbGV0c1xuICBpZiAoZW50cnkudHlwZSA9PT0gXCJsaXN0XCIpIHtcbiAgICByZXR1cm4gcmVuZGVyTGlzdChlbnRyeSk7XG4gIH1cblxuICAvLyBuZXN0ZWQgXHUyMDFDZW50cmllc1x1MjAxRCBibG9jazsgdGl0bGUgaWYgcHJlc2VudFxuICBpZiAoZW50cnkudHlwZSA9PT0gXCJlbnRyaWVzXCIpIHtcbiAgICBjb25zdCBoZWFkID1cbiAgICAgIHR5cGVvZiBlbnRyeS5uYW1lID09PSBcInN0cmluZ1wiICYmIGVudHJ5Lm5hbWUudHJpbSgpXG4gICAgICAgID8gYCoqKiR7ZW5zdXJlUGVyaW9kKHJlcGxhY2U1ZVRhZ3MoZW50cnkubmFtZSkpfSoqKiBgXG4gICAgICAgIDogXCJcIjtcblxuICAgIGNvbnN0IGJvZHkgPSBBcnJheS5pc0FycmF5KGVudHJ5LmVudHJpZXMpXG4gICAgICA/IGVudHJ5LmVudHJpZXMubWFwKChlOiBhbnkpID0+IGZvcm1hdEVudHJ5KGUpKS5qb2luKFwiXFxuXFxuXCIpXG4gICAgICA6IFwiXCI7XG5cbiAgICByZXR1cm4gKGhlYWQgKyBib2R5KS50cmltKCk7XG4gIH1cblxuICAvLyB0YWJsZVxuICBpZiAoZW50cnkudHlwZSA9PT0gXCJ0YWJsZVwiKSB7XG4gICAgcmV0dXJuIHJlbmRlclRhYmxlKGVudHJ5KTtcbiAgfVxuXG4gIC8vIGZhbGxiYWNrOiB0cnkgY29tbW9uIGZpZWxkcyBvciBzdHJpbmdpZnlcbiAgaWYgKEFycmF5LmlzQXJyYXkoZW50cnkuZW50cmllcykpIHtcbiAgICByZXR1cm4gZW50cnkuZW50cmllcy5tYXAoKGU6IGFueSkgPT4gZm9ybWF0RW50cnkoZSkpLmpvaW4oXCJcXG5cXG5cIik7XG4gIH1cbiAgaWYgKHR5cGVvZiBlbnRyeS5lbnRyeSA9PT0gXCJzdHJpbmdcIikge1xuICAgIHJldHVybiByZXBsYWNlNWVUYWdzKGVudHJ5LmVudHJ5KTtcbiAgfVxuXG4gIHJldHVybiByZXBsYWNlNWVUYWdzKFN0cmluZyhlbnRyeSkpO1xufVxuIiwgIi8vIGRuZCA1ZSAyMDE0IGJlc3RpYXJ5IHBhcnNlclxuXG5pbXBvcnQgdHlwZSB7IFBhcnNlZE1hcmtkb3duRmlsZSB9IGZyb20gXCJzcmMvdHlwZXNcIjtcbmltcG9ydCB7IGdldEZ1bGxTb3VyY2VOYW1lIH0gZnJvbSBcIi4vaGVscGVycy9zb3VyY2VNYXBcIjtcbmltcG9ydCB7IHJlcGxhY2U1ZVRhZ3MgfSBmcm9tIFwiLi9oZWxwZXJzL3RhZ1JlcGxhY2VyXCI7XG5pbXBvcnQgeyByZW5kZXJNYXJrZG93blRhYmxlIH0gZnJvbSBcIi4vaGVscGVycy9tYXJrZG93blRhYmxlXCI7XG5pbXBvcnQgeyBidWlsZEZNLCBzZXJpYWxpemVGcm9udG1hdHRlciwgQkVTVElBUllfTUVUQV9ERUZTLCB1bmlmaWVkU2tpbGxzLCBGTV9GSUVMRFMgfSBmcm9tIFwiLi9oZWxwZXJzL2Zyb250bWF0dGVyXCI7XG5cbmNvbnN0IHNraXBwZWRNb25zdGVyczogc3RyaW5nW10gPSBbXTtcblxuLy8gU2l6ZSBhYmJyZXZpYXRpb25zIG1hcHBpbmdcbmV4cG9ydCBcbmNvbnN0IFNJWkVfTUFQOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+ID0ge1xuICBUOiBcIlRpbnlcIixcbiAgUzogXCJTbWFsbFwiLFxuICBNOiBcIk1lZGl1bVwiLFxuICBMOiBcIkxhcmdlXCIsXG4gIEg6IFwiSHVnZVwiLFxuICBHOiBcIkdhcmdhbnR1YW5cIlxufTtcblxuLy8gQWxpZ25tZW50IGFiYnJldmlhdGlvbnMgbWFwcGluZ1xuY29uc3QgQUxJR05NRU5UX01BUDogUmVjb3JkPHN0cmluZywgc3RyaW5nPiA9IHtcbiAgTDogXCJMYXdmdWxcIixcbiAgTjogXCJOZXV0cmFsXCIsXG4gIEM6IFwiQ2hhb3RpY1wiLFxuICBHOiBcIkdvb2RcIixcbiAgRTogXCJFdmlsXCIsXG4gIFU6IFwiVW5hbGlnbmVkXCJcbn07XG5cbi8vIEhlbHBlciB0byBjYXBpdGFsaXplIGZpcnN0IGxldHRlciBvZiBhIHN0cmluZ1xuZnVuY3Rpb24gY2FwaXRhbGl6ZUZpcnN0KHN0cjogdW5rbm93bik6IHN0cmluZyB7XG4gIGNvbnN0IHMgPSBTdHJpbmcoc3RyIHx8IFwiXCIpO1xuICByZXR1cm4gcy5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIHMuc2xpY2UoMSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBmb3JtYXRTaXplQWJicmV2KGFiYnJldjogc3RyaW5nKTogc3RyaW5nIHtcbiAgcmV0dXJuIFNJWkVfTUFQW2FiYnJldl0gfHwgYWJicmV2O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZm9ybWF0QWxpZ25tZW50QWJicmV2KGFiYnJldjogc3RyaW5nKTogc3RyaW5nIHtcbiAgcmV0dXJuIGFiYnJldlxuICAgIC50cmltKClcbiAgICAuc3BsaXQoL1xccysvKVxuICAgIC5tYXAobGV0dGVyID0+IEFMSUdOTUVOVF9NQVBbbGV0dGVyXSB8fCBsZXR0ZXIpXG4gICAgLmpvaW4oXCIgXCIpO1xufVxuXG5jb25zdCBSQVdfTlBDUzogc3RyaW5nW10gPSBbXG4gIFwiQWJqdXJlclwiLCBcIkFjb2x5dGVcIiwgXCJBcHByZW50aWNlIFdpemFyZFwiLCBcIkFyY2hkcnVpZFwiLCBcIkFyY2hlclwiLCBcIkFyY2htYWdlXCIsIFwiQXNzYXNzaW5cIixcbiAgXCJCYW5kaXRcIiwgXCJCYW5kaXQgQ2FwdGFpblwiLCBcIkJhcmRcIiwgXCJCZXJzZXJrZXJcIiwgXCJCbGFja2d1YXJkXCIsIFwiQ2hhbXBpb25cIiwgXCJDb21tb25lclwiLFxuICBcIkNvbmp1cmVyXCIsIFwiQ3VsdCBGYW5hdGljXCIsIFwiQ3VsdGlzdFwiLCBcIkRpdmluZXJcIiwgXCJEcnVpZCAoTlBDKVwiLCBcIkRydWlkIE5QQ1wiLCBcIkVuY2hhbnRlclwiLFxuICBcIkV2b2tlclwiLCBcIkdsYWRpYXRvclwiLCBcIkd1YXJkXCIsIFwiSWxsdXNpb25pc3RcIiwgXCJLbmlnaHRcIiwgXCJLcmFrZW4gUHJpZXN0XCIsIFwiTWFnZVwiLFxuICBcIk1hcnRpYWwgQXJ0cyBBZGVwdFwiLCBcIk1hc3RlciBUaGllZlwiLCBcIk5lY3JvbWFuY2VyXCIsIFwiTm9ibGVcIiwgXCJQcmllc3RcIiwgXCJTY291dFwiLCBcIlNweVwiLFxuICBcIlN3YXNoYnVja2xlclwiLCBcIlRodWdcIiwgXCJUcmFuc211dGVyXCIsIFwiVHJpYmFsIFdhcnJpb3JcIiwgXCJWZXRlcmFuXCIsIFwiV2FyIFByaWVzdFwiLFxuICBcIldhcmxvY2sgb2YgdGhlIEFyY2hmZXlcIiwgXCJXYXJsb2NrIG9mIHRoZSBGaWVuZFwiLCBcIldhcmxvY2sgb2YgdGhlIEdyZWF0IE9sZCBPbmVcIiwgXCJXYXJsb3JkXCJcbl07XG5jb25zdCBOT1JNQUxJWkVEX05QQ19OQU1FUyA9IG5ldyBTZXQoUkFXX05QQ1MubWFwKG4gPT4gbm9ybWFsaXplTmFtZShuKSkpO1xuXG5mdW5jdGlvbiBub3JtYWxpemVOYW1lKG5hbWU6IHN0cmluZyk6IHN0cmluZyB7XG4gIHJldHVybiBuYW1lLnJlcGxhY2UoL1xccysvZywgXCIgXCIpLnRyaW0oKS50b0xvd2VyQ2FzZSgpO1xufVxuXG5mdW5jdGlvbiBjYXRlZ29yaXplQ3JlYXR1cmUobW9uc3RlcjogYW55KTogc3RyaW5nIHtcbiAgY29uc3QgdHlwZVZhbHVlID0gbW9uc3Rlci50eXBlO1xuICBjb25zdCBuYW1lID0gbW9uc3Rlci5uYW1lO1xuICBjb25zdCB0ID0gdHlwZW9mIHR5cGVWYWx1ZSA9PT0gXCJzdHJpbmdcIlxuICAgID8gdHlwZVZhbHVlLnRvTG93ZXJDYXNlKClcbiAgICA6IHR5cGVWYWx1ZT8udHlwZT8udG9Mb3dlckNhc2UoKSB8fCBTdHJpbmcodHlwZVZhbHVlKS50b0xvd2VyQ2FzZSgpO1xuXG4gIGNvbnN0IG5vcm1hbGl6ZWROYW1lID0gbm9ybWFsaXplTmFtZShuYW1lKTtcblxuICBpZiAobW9uc3Rlci5pc05wYyB8fCBtb25zdGVyLmlzTmFtZWRDcmVhdHVyZSkgcmV0dXJuIFwiU3RvcnkgTlBDc1wiO1xuICBpZiAodCA9PT0gXCJiZWFzdFwiKSByZXR1cm4gXCJCZWFzdHNcIjtcbiAgaWYgKHQgPT09IFwiaHVtYW5vaWRcIiAmJiBOT1JNQUxJWkVEX05QQ19OQU1FUy5oYXMobm9ybWFsaXplZE5hbWUpKSByZXR1cm4gXCJOb24tQmVhc3RzXCI7XG4gIGlmICh0ID09PSBcImh1bWFub2lkXCIpIHJldHVybiBcIk1vbnN0ZXJzXCI7XG4gIHJldHVybiBcIk1vbnN0ZXJzXCI7XG59XG5cbmZ1bmN0aW9uIHJlbmRlckFiaWxpdGllc1RhYmxlKHN0cjogbnVtYmVyLCBkZXg6IG51bWJlciwgY29uOiBudW1iZXIsIGludDogbnVtYmVyLCB3aXM6IG51bWJlciwgY2hhOiBudW1iZXIpOiBzdHJpbmcge1xuICByZXR1cm4gW1xuICAgIGB8IFNUUiB8IERFWCB8IENPTiB8IElOVCB8IFdJUyB8IENIQSB8YCxcbiAgICBgfCAtLS0gfCAtLS0gfCAtLS0gfCAtLS0gfCAtLS0gfCAtLS0gfGAsXG4gICAgYHwgJHtzdHJ9IHwgJHtkZXh9IHwgJHtjb259IHwgJHtpbnR9IHwgJHt3aXN9IHwgJHtjaGF9IHxgXG4gIF0uam9pbihcIlxcblwiKTtcbn1cblxuICBmdW5jdGlvbiByZW5kZXJFbnRyeShlbnRyeTogYW55LCBpbkJyZWF0aEJsb2NrID0gZmFsc2UpOiBzdHJpbmcge1xuICAgIGNvbnN0IGVuc3VyZVBlcmlvZCA9IChzOiBzdHJpbmcpID0+ICgvWy4hP11cXHMqJC8udGVzdChzKSA/IHMgOiBgJHtzfS5gKTtcbiAgICBjb25zdCByZW5kZXJTdHIgPSAoczogc3RyaW5nKSA9PiByZXBsYWNlNWVUYWdzKHMpO1xuXG4gICAgaWYgKHR5cGVvZiBlbnRyeSA9PT0gXCJzdHJpbmdcIikgcmV0dXJuIHJlbmRlclN0cihlbnRyeSk7XG4gICAgaWYgKCFlbnRyeSB8fCB0eXBlb2YgZW50cnkgIT09IFwib2JqZWN0XCIpIHJldHVybiBTdHJpbmcoZW50cnkgPz8gXCJcIik7XG5cbiAgICBjb25zdCByYXdOYW1lID0gdHlwZW9mIGVudHJ5Lm5hbWUgPT09IFwic3RyaW5nXCIgPyBlbnRyeS5uYW1lIDogXCJcIjtcbiAgICBjb25zdCBuYW1lVHh0ID0gcmF3TmFtZSA/IHJlbmRlclN0cihyYXdOYW1lKSA6IFwiXCI7XG4gICAgY29uc3QgaXNCcmVhdGggPSAvXFxiYnJlYXRoIHdlYXBvbi9pLnRlc3QobmFtZVR4dCk7XG5cbiAgICBjb25zdCBsZWFkID0gbmFtZVR4dCA/IGAqKioke2Vuc3VyZVBlcmlvZChuYW1lVHh0KX0qKipgIDogXCJcIjtcblxuICAgIGNvbnN0IGJsb2NrczogYW55W10gPSBbXTtcbiAgICBpZiAoQXJyYXkuaXNBcnJheShlbnRyeS5lbnRyaWVzKSkgYmxvY2tzLnB1c2goLi4uZW50cnkuZW50cmllcyk7XG4gICAgZWxzZSBpZiAodHlwZW9mIGVudHJ5LmVudHJpZXMgPT09IFwic3RyaW5nXCIpIGJsb2Nrcy5wdXNoKGVudHJ5LmVudHJpZXMpO1xuICAgIGVsc2UgaWYgKEFycmF5LmlzQXJyYXkoZW50cnkuZGVzYykpIGJsb2Nrcy5wdXNoKC4uLmVudHJ5LmRlc2MpO1xuICAgIGVsc2UgaWYgKHR5cGVvZiBlbnRyeS5kZXNjID09PSBcInN0cmluZ1wiKSBibG9ja3MucHVzaChlbnRyeS5kZXNjKTtcbiAgICBlbHNlIGlmIChBcnJheS5pc0FycmF5KChlbnRyeSBhcyBhbnkpLmVudHJ5KSkgYmxvY2tzLnB1c2goLi4uKGVudHJ5IGFzIGFueSkuZW50cnkpO1xuICAgIGVsc2UgaWYgKHR5cGVvZiAoZW50cnkgYXMgYW55KS5lbnRyeSA9PT0gXCJzdHJpbmdcIikgYmxvY2tzLnB1c2goKGVudHJ5IGFzIGFueSkuZW50cnkpO1xuXG4gICAgY29uc3Qgb3V0OiBzdHJpbmdbXSA9IFtdO1xuICAgIGZvciAoY29uc3QgYmxrIG9mIGJsb2Nrcykge1xuICAgICAgaWYgKHR5cGVvZiBibGsgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgb3V0LnB1c2gocmVuZGVyU3RyKGJsaykpO1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgY29uc3QgaXNIYW5nTm9UaXRsZUxpc3QgPVxuICAgICAgICBibGsgJiZcbiAgICAgICAgYmxrLnR5cGUgPT09IFwibGlzdFwiICYmXG4gICAgICAgIGJsay5zdHlsZSA9PT0gXCJsaXN0LWhhbmctbm90aXRsZVwiICYmXG4gICAgICAgIEFycmF5LmlzQXJyYXkoYmxrLml0ZW1zKSAmJlxuICAgICAgICBibGsuaXRlbXMuZXZlcnkoKGl0OiBhbnkpID0+IGl0Py50eXBlID09PSBcIml0ZW1cIik7XG5cbiAgICAgIGlmICgoaXNCcmVhdGggfHwgaW5CcmVhdGhCbG9jayB8fCBpc0hhbmdOb1RpdGxlTGlzdCkgJiYgYmxrICYmIGJsay50eXBlID09PSBcImxpc3RcIiAmJiBBcnJheS5pc0FycmF5KGJsay5pdGVtcykpIHtcbiAgICAgICAgY29uc3QgYnVsbGV0czogc3RyaW5nW10gPSBbXTtcbiAgICAgICAgZm9yIChjb25zdCBpdCBvZiBibGsuaXRlbXMpIHtcbiAgICAgICAgICBjb25zdCBpdE5hbWUgPSBpdD8ubmFtZSA/IHJlbmRlclN0cihTdHJpbmcoaXQubmFtZSkudHJpbSgpKSA6IFwiXCI7XG4gICAgICAgICAgbGV0IGl0Qm9keSA9IFwiXCI7XG4gICAgICAgICAgaWYgKHR5cGVvZiBpdD8uZW50cnkgPT09IFwic3RyaW5nXCIpIGl0Qm9keSA9IHJlbmRlclN0cihpdC5lbnRyeSk7XG4gICAgICAgICAgZWxzZSBpZiAoQXJyYXkuaXNBcnJheShpdD8uZW50cmllcykpIGl0Qm9keSA9IGl0LmVudHJpZXMubWFwKChlOiBhbnkpID0+IHJlbmRlckVudHJ5KGUsIHRydWUpKS5qb2luKFwiIFwiKTtcbiAgICAgICAgICBlbHNlIGlmICh0eXBlb2YgaXQ/LmVudHJpZXMgPT09IFwic3RyaW5nXCIpIGl0Qm9keSA9IHJlbmRlclN0cihpdC5lbnRyaWVzKTtcblxuICAgICAgICAgIGNvbnN0IGhlYWQgPSBpdE5hbWUgPyBgKioqJHtlbnN1cmVQZXJpb2QoaXROYW1lKX0qKipgIDogXCJcIjtcbiAgICAgICAgICBjb25zdCBsaW5lID0gW2hlYWQsIGl0Qm9keV0uZmlsdGVyKEJvb2xlYW4pLmpvaW4oXCIgXCIpLnRyaW0oKTtcbiAgICAgICAgICBpZiAobGluZSkgYnVsbGV0cy5wdXNoKGAtICR7bGluZX1gKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoYnVsbGV0cy5sZW5ndGgpIG91dC5wdXNoKFwiXFxuXCIgKyBidWxsZXRzLmpvaW4oXCJcXG5cIikpO1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgb3V0LnB1c2goU3RyaW5nKGJsaykpO1xuICAgIH1cblxuICAgIHJldHVybiBbbGVhZCwgb3V0LmpvaW4oXCIgXCIpXS5maWx0ZXIoQm9vbGVhbikuam9pbihcIiBcIikucmVwbGFjZSgvWyBcXHRdKy9nLCBcIiBcIikudHJpbSgpO1xuICB9XG5cbiAgZnVuY3Rpb24gcmVuZGVyU3BlbGxjYXN0aW5nKHNwZWxsY2FzdGluZ0FycjogYW55W10pOiBzdHJpbmcge1xuICAgIGlmICghQXJyYXkuaXNBcnJheShzcGVsbGNhc3RpbmdBcnIpIHx8IHNwZWxsY2FzdGluZ0Fyci5sZW5ndGggPT09IDApIHJldHVybiBcIlwiO1xuXG4gICAgY29uc3QgbGluZXM6IHN0cmluZ1tdID0gW107XG5cbiAgICAvLyBFYWNoIGVudHJ5IGJlY29tZXMgaXRzIG93biBzdWJzZWN0aW9uIChlLmcuLCBcIklubmF0ZSBTcGVsbGNhc3RpbmdcIiwgXCJTcGVsbGNhc3RpbmdcIilcbiAgICBmb3IgKGNvbnN0IHNjIG9mIHNwZWxsY2FzdGluZ0Fycikge1xuICAgICAgaWYgKCFzYyB8fCB0eXBlb2Ygc2MgIT09IFwib2JqZWN0XCIpIGNvbnRpbnVlO1xuXG4gICAgICBjb25zdCB0aXRsZSA9IHR5cGVvZiBzYy5uYW1lID09PSBcInN0cmluZ1wiICYmIHNjLm5hbWUudHJpbSgpID8gc2MubmFtZS50cmltKCkgOiBcIlNwZWxsY2FzdGluZ1wiO1xuICAgICAgY29uc3QgaGVhZGVyID0gYCMjIyAke3JlcGxhY2U1ZVRhZ3ModGl0bGUpfWA7XG4gICAgICBjb25zdCBib2R5UGFydHM6IHN0cmluZ1tdID0gW107XG5cbiAgICAgIC8vIDEpIEhlYWRlciB0ZXh0IGJsb2NrKHMpXG4gICAgICBjb25zdCBoZWFkZXJFbnRyaWVzID0gQXJyYXkuaXNBcnJheShzYy5oZWFkZXJFbnRyaWVzKVxuICAgICAgICA/IHNjLmhlYWRlckVudHJpZXNcbiAgICAgICAgOiB0eXBlb2Ygc2MuaGVhZGVyRW50cmllcyA9PT0gXCJzdHJpbmdcIlxuICAgICAgICA/IFtzYy5oZWFkZXJFbnRyaWVzXVxuICAgICAgICA6IFtdO1xuICAgICAgaWYgKGhlYWRlckVudHJpZXMubGVuZ3RoKSB7XG4gICAgICAgIGJvZHlQYXJ0cy5wdXNoKGhlYWRlckVudHJpZXMubWFwKChlOiBhbnkpID0+IHJlcGxhY2U1ZVRhZ3MoZSkpLmpvaW4oXCIgXCIpKTtcbiAgICAgIH1cblxuICAgICAgLy8gMikgXHUyMDFDQXQgd2lsbFx1MjAxRFxuICAgICAgaWYgKEFycmF5LmlzQXJyYXkoc2Mud2lsbCkgJiYgc2Mud2lsbC5sZW5ndGgpIHtcbiAgICAgICAgY29uc3Qgc3BlbGxzID0gc2Mud2lsbC5tYXAoKHM6IGFueSkgPT4gcmVwbGFjZTVlVGFncyhTdHJpbmcocykpKS5qb2luKFwiLCBcIik7XG4gICAgICAgIGJvZHlQYXJ0cy5wdXNoKGAtICoqQXQgd2lsbDoqKiAke3NwZWxsc31gKTtcbiAgICAgIH1cblxuICAgICAgLy8gMykgXHUyMDFDRGFpbHlcdTIwMUQgYnVja2V0cyBcdTIwMTQga2V5cyBsaWtlIFwiMVwiLCBcIjJcIiwgXCIzXCIsIGFuZCBcIjFlXCIvXCIyZVwiIChcdTIwMUNlYWNoXHUyMDFEKVxuICAgICAgaWYgKHNjLmRhaWx5ICYmIHR5cGVvZiBzYy5kYWlseSA9PT0gXCJvYmplY3RcIikge1xuICAgICAgICBjb25zdCBrZXlzID0gT2JqZWN0LmtleXMoc2MuZGFpbHkpLnNvcnQoKGEsYikgPT4ge1xuICAgICAgICAgIC8vIG51bWVyaWMtZmlyc3Qgc29ydDogMSwgMWUsIDIsIDJlLCBcdTIwMjZcbiAgICAgICAgICBjb25zdCBwYXJzZSA9IChrOiBzdHJpbmcpID0+ICh7IG46IHBhcnNlSW50KGssIDEwKSB8fCAwLCBlOiAvZSQvaS50ZXN0KGspID8gMSA6IDAgfSk7XG4gICAgICAgICAgY29uc3QgQSA9IHBhcnNlKGEpLCBCID0gcGFyc2UoYik7XG4gICAgICAgICAgcmV0dXJuIEEubiAtIEIubiB8fCBBLmUgLSBCLmU7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGZvciAoY29uc3QgayBvZiBrZXlzKSB7XG4gICAgICAgICAgY29uc3QgYXJyID0gQXJyYXkuaXNBcnJheShzYy5kYWlseVtrXSkgPyBzYy5kYWlseVtrXSA6IFtdO1xuICAgICAgICAgIGlmICghYXJyLmxlbmd0aCkgY29udGludWU7XG4gICAgICAgICAgY29uc3QgbiA9IHBhcnNlSW50KGssIDEwKSB8fCAwO1xuICAgICAgICAgIGNvbnN0IGVhY2ggPSAvZSQvaS50ZXN0KGspO1xuICAgICAgICAgIGNvbnN0IGxhYmVsID0gbiA+IDBcbiAgICAgICAgICAgID8gZWFjaCA/IGAke259L2RheSBlYWNoYCA6IGAke259L2RheWBcbiAgICAgICAgICAgIDogXCJEYWlseVwiO1xuXG4gICAgICAgICAgY29uc3Qgc3BlbGxzID0gYXJyLm1hcCgoczogYW55KSA9PiByZXBsYWNlNWVUYWdzKFN0cmluZyhzKSkpLmpvaW4oXCIsIFwiKTtcbiAgICAgICAgICBib2R5UGFydHMucHVzaChgLSAqKiR7bGFiZWx9OioqICR7c3BlbGxzfWApO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIDQpIE9wdGlvbmFsOiBvdGhlciBidWNrZXRzIHVzZWQgb2NjYXNpb25hbGx5IGJ5IDVldG9vbHMgKFx1MjAxQ3Jlc3RcdTIwMUQsIFx1MjAxQ3JpdHVhbFx1MjAxRCwgZXRjLilcbiAgICAgIC8vICAgIFdlIGtlZXAgdGhpcyBjb25zZXJ2YXRpdmU7IGFkZCBtb3JlIGlmIHlvdSBzZWUgdGhlbSBpbiB5b3VyIGZlZWRzLlxuICAgICAgaWYgKHNjLnJpdHVhbCAmJiBBcnJheS5pc0FycmF5KHNjLnJpdHVhbCkgJiYgc2Mucml0dWFsLmxlbmd0aCkge1xuICAgICAgICBjb25zdCBzcGVsbHMgPSBzYy5yaXR1YWwubWFwKChzOiBhbnkpID0+IHJlcGxhY2U1ZVRhZ3MoU3RyaW5nKHMpKSkuam9pbihcIiwgXCIpO1xuICAgICAgICBib2R5UGFydHMucHVzaChgLSAqKlJpdHVhbHM6KiogJHtzcGVsbHN9YCk7XG4gICAgICB9XG5cbiAgICAgIC8vIFN0aXRjaCB0aGlzIGJsb2NrXG4gICAgICBpZiAoYm9keVBhcnRzLmxlbmd0aCkge1xuICAgICAgICBsaW5lcy5wdXNoKGAke2hlYWRlcn1cXG4ke2JvZHlQYXJ0cy5qb2luKFwiXFxuXCIpfWApO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBsaW5lcy5qb2luKFwiXFxuXFxuXCIpO1xuICB9XG5cbiAgZXhwb3J0IGZ1bmN0aW9uIHBhcnNlQmVzdGlhcnlGaWxlKGpzb246IGFueSwgZWRpdGlvbklkOiBzdHJpbmcpOiBQYXJzZWRNYXJrZG93bkZpbGVbXSB7XG4gICAgICBpZiAoIWpzb24ubW9uc3RlcikgcmV0dXJuIFtdO1xuICAgICAgKGpzb24gYXMgYW55KS5fZWRpdGlvbklkID0gZWRpdGlvbklkO1xuICAgIFxuICAgICAgLy8gMSkgRmlsdGVyIG91dCBcdTIwMUNyZWZlcmVuY2VcdTIwMUQgZW50cmllcyB3aXRoIG5vIEFDIG9yIEhQXG4gICAgICBjb25zdCB2YWxpZE1vbnN0ZXJzID0ganNvbi5tb25zdGVyLmZpbHRlcigobTogYW55KSA9PiB7XG4gICAgICBjb25zdCBhY1ZhbCA9IEFycmF5LmlzQXJyYXkobS5hYylcbiAgICAgICAgPyBtLmFjWzBdPy5hYyA/PyBtLmFjWzBdXG4gICAgICAgIDogdHlwZW9mIG0uYWMgPT09IFwib2JqZWN0XCJcbiAgICAgICAgICA/IG0uYWM/LmFjID8/IG51bGxcbiAgICAgICAgICA6IG0uYWM7XG5cbiAgICAgIGNvbnN0IGhwVmFsID0gdHlwZW9mIG0uaHAgPT09IFwib2JqZWN0XCJcbiAgICAgICAgPyBtLmhwPy5hdmVyYWdlID8/IG0uaHA/LmhwID8/IG51bGxcbiAgICAgICAgOiBtLmhwO1xuICAgICAgICByZXR1cm4gYWNWYWwgIT0gbnVsbCAmJiBocFZhbCAhPSBudWxsICYmICFpc05hTihOdW1iZXIoYWNWYWwpKSAmJiAhaXNOYU4oTnVtYmVyKGhwVmFsKSk7XG4gICAgICB9KTtcblxuICAgIGNvbnN0IGFsbE5hbWVzID0gbmV3IFNldChqc29uLm1vbnN0ZXIubWFwKChtOiBhbnkpID0+IG0ubmFtZSkpO1xuICAgIGNvbnN0IHZhbGlkTmFtZXMgPSBuZXcgU2V0KHZhbGlkTW9uc3RlcnMubWFwKChtOiBhbnkpID0+IG0ubmFtZSkpO1xuICAgIGNvbnN0IG1pc3NpbmcgPSBbLi4uYWxsTmFtZXNdLmZpbHRlcihuYW1lID0+ICF2YWxpZE5hbWVzLmhhcyhuYW1lKSk7XG5cbiAgXG4gICAgcmV0dXJuIHZhbGlkTW9uc3RlcnMubWFwKChtb25zdGVyOiBhbnkpID0+IHtcbiAgICAgIGNvbnN0IG5hbWUgICAgID0gbW9uc3Rlci5uYW1lIGFzIHN0cmluZztcbiAgICAgIGNvbnN0IHNhZmVOYW1lID0gbmFtZS5yZXBsYWNlKC9cXC8vZywgXCItXCIpO1xuICBcbiAgICAgIC8vIFx1MjAxNCBSYXcgZmllbGRzICYgZm9ybWF0dGluZyBcdTIwMTRcbiAgICAgIGNvbnN0IHJhd1NpemUgICAgICA9IG1vbnN0ZXIuc2l6ZSB8fCBcIk1cIjtcbiAgICAgIGNvbnN0IHJhd0FsaWdubWVudCA9IEFycmF5LmlzQXJyYXkobW9uc3Rlci5hbGlnbm1lbnQpXG4gICAgICAgID8gbW9uc3Rlci5hbGlnbm1lbnQuam9pbihcIiBcIilcbiAgICAgICAgOiBtb25zdGVyLmFsaWdubWVudCB8fCBcIk5cIjtcbiAgICBsZXQgcmF3VHlwZSA9IFwiVW5rbm93blwiO1xuXG4gICAgaWYgKHR5cGVvZiBtb25zdGVyLnR5cGUgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgIHJhd1R5cGUgPSBjYXBpdGFsaXplRmlyc3QobW9uc3Rlci50eXBlKTtcbiAgICB9IGVsc2UgaWYgKG1vbnN0ZXIudHlwZT8udHlwZSkge1xuICAgICAgY29uc3QgYmFzZSA9IGNhcGl0YWxpemVGaXJzdChtb25zdGVyLnR5cGUudHlwZSk7XG4gICAgICBjb25zdCB0YWdzID0gbW9uc3Rlci50eXBlLnRhZ3M/Lmxlbmd0aCA/IGAgKCR7bW9uc3Rlci50eXBlLnRhZ3MubWFwKGNhcGl0YWxpemVGaXJzdCkuam9pbihcIiwgXCIpfSlgIDogXCJcIjtcbiAgICAgIHJhd1R5cGUgPSBgJHtiYXNlfSR7dGFnc31gO1xuICAgIH1cblxuICAgIG1vbnN0ZXIuX3BhcnNlZFR5cGUgPSByYXdUeXBlO1xuXG4gICAgY29uc3QgYWMgPSBBcnJheS5pc0FycmF5KG1vbnN0ZXIuYWMpID8gbW9uc3Rlci5hY1swXS5hYyA6IG1vbnN0ZXIuYWM7XG4gICAgY29uc3QgaHAgPSBtb25zdGVyLmhwPy5hdmVyYWdlID8/IG1vbnN0ZXIuaHA7XG5cbiAgICAvLyBTa2lwIG1vbnN0ZXJzIHdpdGggbm8gQUMgYW5kIEhQXG4gICAgaWYgKCFhYyAmJiAhaHApIHtcbiAgICAgIHNraXBwZWRNb25zdGVycy5wdXNoKG1vbnN0ZXIubmFtZSk7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgICBcbiAgICAgIC8vIFx1MjAxNCBBYmlsaXRpZXMgXHUyMDE0XG4gICAgICBjb25zdCBhYmlsaXRpZXMgPSBBcnJheS5pc0FycmF5KG1vbnN0ZXIuYWJpbGl0eSlcbiAgICAgICAgPyBtb25zdGVyLmFiaWxpdHlcbiAgICAgICAgOiBbbW9uc3Rlci5zdHIsIG1vbnN0ZXIuZGV4LCBtb25zdGVyLmNvbiwgbW9uc3Rlci5pbnQsIG1vbnN0ZXIud2lzLCBtb25zdGVyLmNoYV07XG4gICAgICBjb25zdCBbc3RyID0gMTAsIGRleCA9IDEwLCBjb24gPSAxMCwgaW50ID0gMTAsIHdpcyA9IDEwLCBjaGEgPSAxMF0gPSBhYmlsaXRpZXM7XG4gIFxuICAgICAgLy8gXHUyMDE0IFNwZWVkIChoYW5kbGVzIGhvdmVyICYgb2JqZWN0IHNwZWVkcykgXHUyMDE0XG4gICAgICBjb25zdCBzcGVlZExpc3Q6IHN0cmluZ1tdID0gW107XG4gICAgICBpZiAodHlwZW9mIG1vbnN0ZXIuc3BlZWQgPT09IFwib2JqZWN0XCIpIHtcbiAgICAgICAgZm9yIChjb25zdCBbbW9kZSwgdmFsXSBvZiBPYmplY3QuZW50cmllcyhtb25zdGVyLnNwZWVkKSkge1xuICAgICAgICAgIGlmIChtb2RlID09PSBcImNhbkhvdmVyXCIpIGNvbnRpbnVlO1xuICAgICAgICAgIGlmICh2YWwgJiYgdHlwZW9mIHZhbCA9PT0gXCJvYmplY3RcIiAmJiBcIm51bWJlclwiIGluIHZhbCkge1xuICAgICAgICAgICAgY29uc3QgbnVtICA9ICh2YWwgYXMgYW55KS5udW1iZXI7XG4gICAgICAgICAgICBjb25zdCBjb25kID0gKHZhbCBhcyBhbnkpLmNvbmRpdGlvbiA/IGAgJHsodmFsIGFzIGFueSkuY29uZGl0aW9ufWAgOiBcIlwiO1xuICAgICAgICAgICAgc3BlZWRMaXN0LnB1c2goYCR7bW9kZX0gJHtudW19IGZ0LiR7Y29uZH1gKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgc3BlZWRMaXN0LnB1c2goYCR7bW9kZX0gJHt2YWx9IGZ0LmApO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc3BlZWRMaXN0LnB1c2goYCR7bW9uc3Rlci5zcGVlZH0gZnQuYCk7XG4gICAgICB9XG4gICAgICBjb25zdCBzcGVlZCA9IHNwZWVkTGlzdC5qb2luKFwiLCBcIik7XG4gIFxuICAgICAgLy8gXHUyMDE0IFNvdXJjZSBzYW5pdGl6YXRpb24gXHUyMDE0XG4gICAgICBsZXQgc291cmNlID0gZ2V0RnVsbFNvdXJjZU5hbWUobW9uc3Rlci5zb3VyY2UsIGVkaXRpb25JZCk7XG4gICAgICBzb3VyY2UgICAgID0gc291cmNlLnJlcGxhY2UoLzovZywgXCIgLVwiKTtcbiAgXG4gICAgICAvLyBcdTIwMTQgQ2F0ZWdvcnkgZm9yIGZvbGRlciBcdTIwMTRcbiAgICAgIGNvbnN0IGNhdGVnb3J5ID0gY2F0ZWdvcml6ZUNyZWF0dXJlKG1vbnN0ZXIpO1xuICBcbiAgICAgIGNvbnN0IGZtICAgPSBidWlsZEZNKG1vbnN0ZXIsIEJFU1RJQVJZX01FVEFfREVGUyk7XG4gICAgICBjb25zdCB5YW1sID0gc2VyaWFsaXplRnJvbnRtYXR0ZXIoZm0sIEJFU1RJQVJZX01FVEFfREVGUyk7XG4gICAgICBjb25zdCBmbUFueSA9IGZtIGFzIFJlY29yZDxzdHJpbmcsIHVua25vd24+O1xuICAgICAgY29uc3QgY2hhbGxlbmdlVGV4dCA9IFN0cmluZyhmbUFueVtcIkNSXCJdID8/IGZtQW55W1wiY2hhbGxlbmdlXCJdID8/IFwiXCIpO1xuICAgICAgY29uc3Qgc2F2aW5nVGhyb3dzID0gKGZtW0ZNX0ZJRUxEUy5TQVZJTkdfVEhST1dTXSBhcyBzdHJpbmdbXSkgfHwgW107XG4gICAgICBjb25zdCBza2lsbHMgICAgICAgPSAoZm1bRk1fRklFTERTLlNLSUxMU10gICAgICAgIGFzIHN0cmluZ1tdKSB8fCBbXTtcbiAgICAgIGNvbnN0IHNlbnNlcyAgICAgICA9IChmbVtGTV9GSUVMRFMuU0VOU0VTXSAgICAgICAgYXMgc3RyaW5nW10pIHx8IFtdO1xuICAgICAgY29uc3QgbGFuZ3VhZ2VzICAgID0gKGZtW0ZNX0ZJRUxEUy5MQU5HVUFHRVNdICAgICBhcyBzdHJpbmdbXSkgfHwgW107XG5cbiBcbiAgICAgIC8vIFx1MjAxNCBCb2R5IFx1MjAxNFxuICAgICAgbGV0IGJvZHkgPVxuICAgICAgYCMgJHtuYW1lfVxcblxcbmAgK1xuICAgICAgYCR7Zm9ybWF0U2l6ZUFiYnJldihyYXdTaXplKX0gJHtyYXdUeXBlfSwgJHtmb3JtYXRBbGlnbm1lbnRBYmJyZXYocmF3QWxpZ25tZW50KX1cXG5cXG5gICtcbiAgICAgIGAqKkFybW9yIENsYXNzKio6ICR7YWN9XFxuYCArXG4gICAgICBgKipIaXQgUG9pbnRzKio6ICR7aHB9XFxuYCArXG4gICAgICBgKipTcGVlZCoqOiAke3NwZWVkfVxcbmAgK1xuICAgICAgKHNhdmluZ1Rocm93cy5sZW5ndGhcbiAgICAgICAgPyBgKipTYXZpbmcgVGhyb3dzKio6ICR7c2F2aW5nVGhyb3dzLmpvaW4oXCIsIFwiKX1cXG5gXG4gICAgICAgIDogXCJcIikgK1xuICAgICAgKHNraWxscy5sZW5ndGhcbiAgICAgICAgPyBgKipTa2lsbHMqKjogJHtza2lsbHMuam9pbihcIiwgXCIpfVxcbmBcbiAgICAgICAgOiBcIlwiKSArXG4gICAgICAoc2Vuc2VzLmxlbmd0aFxuICAgICAgICA/IGAqKlNlbnNlcyoqOiAke3NlbnNlcy5qb2luKFwiLCBcIil9XFxuYFxuICAgICAgICA6IFwiXCIpICtcbiAgICAgIChsYW5ndWFnZXMubGVuZ3RoXG4gICAgICAgID8gYCoqTGFuZ3VhZ2VzKio6ICR7bGFuZ3VhZ2VzLmpvaW4oXCIsIFwiKX1cXG5gXG4gICAgICAgIDogXCJcIikgK1xuICAgICAgYCoqQ2hhbGxlbmdlKio6ICR7Y2hhbGxlbmdlVGV4dH1cXG5cXG5gICtcbiAgICAgIHJlbmRlckFiaWxpdGllc1RhYmxlKHN0ciwgZGV4LCBjb24sIGludCwgd2lzLCBjaGEpO1xuXG4gICAgICBpZiAobW9uc3Rlci5zcGVsbGNhc3RpbmcpIHtcbiAgICAgICAgYm9keSArPSBgXFxuXFxuIyMjIFNwZWxsY2FzdGluZ1xcbiR7bW9uc3Rlci5zcGVsbGNhc3RpbmdcbiAgICAgICAgICAubWFwKChzYzogYW55KSA9PiB7XG4gICAgICAgICAgICBjb25zdCBuYW1lID0gc2MubmFtZSB8fCBcIlNwZWxsY2FzdGluZ1wiO1xuICAgICAgICAgICAgY29uc3QgcGFydHM6IHN0cmluZ1tdID0gW107XG5cbiAgICAgICAgICAgIGlmIChzYy5oZWFkZXJFbnRyaWVzKSB7XG4gICAgICAgICAgICAgIGNvbnN0IGhlYWRlcnMgPSBBcnJheS5pc0FycmF5KHNjLmhlYWRlckVudHJpZXMpXG4gICAgICAgICAgICAgICAgPyBzYy5oZWFkZXJFbnRyaWVzXG4gICAgICAgICAgICAgICAgOiBbc2MuaGVhZGVyRW50cmllc107XG4gICAgICAgICAgICAgIHBhcnRzLnB1c2goaGVhZGVycy5tYXAoKGU6IGFueSkgPT4gcmVwbGFjZTVlVGFncyhlKSkuam9pbihcIiBcIikpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoc2Mud2lsbCkge1xuICAgICAgICAgICAgICBwYXJ0cy5wdXNoKGAtICoqQXQgd2lsbDoqKiAke3NjLndpbGwubWFwKChzOiBhbnkpID0+IHJlcGxhY2U1ZVRhZ3MoU3RyaW5nKHMpKSkuam9pbihcIiwgXCIpfWApO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoc2MuZGFpbHkpIHtcbiAgICAgICAgICAgICAgZm9yIChjb25zdCBbaywgYXJyXSBvZiBPYmplY3QuZW50cmllcyhzYy5kYWlseSkpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBzcGVsbHMgPSAoYXJyIGFzIGFueVtdKS5tYXAocyA9PiByZXBsYWNlNWVUYWdzKFN0cmluZyhzKSkpLmpvaW4oXCIsIFwiKTtcbiAgICAgICAgICAgICAgICBjb25zdCBuID0gcGFyc2VJbnQoaywgMTApIHx8IDA7XG4gICAgICAgICAgICAgICAgY29uc3QgZWFjaCA9IC9lJC9pLnRlc3Qoayk7XG4gICAgICAgICAgICAgICAgY29uc3QgbGFiZWwgPSBuID4gMCA/IChlYWNoID8gYCR7bn0vZGF5IGVhY2hgIDogYCR7bn0vZGF5YCkgOiBcIkRhaWx5XCI7XG4gICAgICAgICAgICAgICAgcGFydHMucHVzaChgLSAqKiR7bGFiZWx9OioqICR7c3BlbGxzfWApO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiBgKioqJHtuYW1lfS4qKipcXG4ke3BhcnRzLmpvaW4oXCJcXG5cIil9YDtcbiAgICAgICAgICB9KVxuICAgICAgICAuam9pbihcIlxcblxcblwiKX1gO1xuICAgICAgfVxuICAgICAgaWYgKG1vbnN0ZXIudHJhaXQpICAgICBib2R5ICs9IGBcXG5cXG4jIyMgVHJhaXRzXFxuJHttb25zdGVyLnRyYWl0Lm1hcChyZW5kZXJFbnRyeSkuam9pbihcIlxcblxcblwiKX1gO1xuICAgICAgaWYgKG1vbnN0ZXIuYWN0aW9uKSAgICBib2R5ICs9IGBcXG5cXG4jIyMgQWN0aW9uc1xcbiR7bW9uc3Rlci5hY3Rpb24ubWFwKHJlbmRlckVudHJ5KS5qb2luKFwiXFxuXFxuXCIpfWA7XG4gICAgICBpZiAobW9uc3Rlci5yZWFjdGlvbikgIGJvZHkgKz0gYFxcblxcbiMjIyBSZWFjdGlvbnNcXG4ke21vbnN0ZXIucmVhY3Rpb24ubWFwKHJlbmRlckVudHJ5KS5qb2luKFwiXFxuXFxuXCIpfWA7XG4gICAgICBpZiAobW9uc3Rlci5sZWdlbmRhcnkpIGJvZHkgKz0gYFxcblxcbiMjIyBMZWdlbmRhcnkgQWN0aW9uc1xcbiR7bW9uc3Rlci5sZWdlbmRhcnkubWFwKHJlbmRlckVudHJ5KS5qb2luKFwiXFxuXFxuXCIpfWA7XG4gIFxuICAgICAgY29uc3QgY29udGVudCA9IGAtLS1cXG4ke3lhbWx9XFxuLS0tXFxuXFxuJHtib2R5fWA7XG4gIFxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgcGF0aDogICAgYCR7Y2F0ZWdvcnl9LyR7c2FmZU5hbWV9Lm1kYCxcbiAgICAgICAgY29udGVudCxcbiAgICAgIH07XG4gICAgfSk7XG4gIH1cbiIsICJpbXBvcnQgdHlwZSB7IFBhcnNlZE1hcmtkb3duRmlsZSB9IGZyb20gXCIuLi8uLi90eXBlc1wiO1xuaW1wb3J0IHsgcmVwbGFjZTVlVGFncyB9ICAgICBmcm9tIFwiLi9oZWxwZXJzL3RhZ1JlcGxhY2VyXCI7XG5pbXBvcnQgeyBnZXRGdWxsU291cmNlTmFtZSB9IGZyb20gXCIuL2hlbHBlcnMvc291cmNlTWFwXCI7XG5pbXBvcnQgeyBidWlsZEZNLCBzZXJpYWxpemVGcm9udG1hdHRlciwgSVRFTV9NRVRBX0RFRlMsIEZNX0ZJRUxEUyB9IGZyb20gXCIuL2hlbHBlcnMvZnJvbnRtYXR0ZXJcIjtcbmltcG9ydCB7IHJlbmRlck1hcmtkb3duVGFibGUgfSBmcm9tIFwiLi9oZWxwZXJzL21hcmtkb3duVGFibGVcIjtcblxuXG4vKiogSGVscGVyIHRvIGNhcGl0YWxpemUgZmlyc3QgbGV0dGVyIFx1MjAxMyBuZXZlciBjcmFzaGVzIG9uIG5vbi1zdHJpbmdzICovXG5mdW5jdGlvbiBjYXBpdGFsaXplRmlyc3QoaW5wdXQ6IGFueSk6IHN0cmluZyB7XG4gIC8vIGlmIGl0XHUyMDE5cyBub3QgYSBub24tZW1wdHkgc3RyaW5nLCBiYWlsIG91dFxuICBpZiAodHlwZW9mIGlucHV0ICE9PSBcInN0cmluZ1wiIHx8IGlucHV0Lmxlbmd0aCA9PT0gMCkgcmV0dXJuIFwiXCI7XG4gIGNvbnN0IHMgPSBpbnB1dC50cmltKCk7XG4gIHJldHVybiBzLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgcy5zbGljZSgxKS50b0xvd2VyQ2FzZSgpO1xufVxuXG5mdW5jdGlvbiByZW5kZXI1ZVRhYmxlKHQ6IGFueSk6IHN0cmluZyB7XG4gIGNvbnN0IGhlYWRlcnM6IHN0cmluZ1tdID0gQXJyYXkuaXNBcnJheSh0LmNvbExhYmVscylcbiAgICA/IHQuY29sTGFiZWxzLm1hcCgoaDogYW55KSA9PiByZXBsYWNlNWVUYWdzKGgpKVxuICAgIDogW107XG5cbiAgY29uc3Qgcm93czogc3RyaW5nW11bXSA9IEFycmF5LmlzQXJyYXkodC5yb3dzKVxuICAgID8gdC5yb3dzLm1hcCgocjogYW55KSA9PlxuICAgICAgICBBcnJheS5pc0FycmF5KHIpID8gci5tYXAoKGNlbGw6IGFueSkgPT4gcmVwbGFjZTVlVGFncyhjZWxsKSkgOiBbXVxuICAgICAgKVxuICAgIDogW107XG5cbiAgLy8gXHUyMTkwIG1hcmtkb3duVGFibGUgZXhwZWN0cyBhIHNpbmdsZSBvYmplY3RcbiAgcmV0dXJuIHJlbmRlck1hcmtkb3duVGFibGUoeyBoZWFkZXJzLCByb3dzIH0pO1xufVxuXG5cblxuZXhwb3J0IGNvbnN0IERBTUFHRV9UWVBFX01BUDogUmVjb3JkPHN0cmluZyxzdHJpbmc+ID0ge1xuICBQOiBcIlBpZXJjaW5nXCIsXG4gIEI6IFwiQmx1ZGdlb25pbmdcIixcbiAgUzogXCJTbGFzaGluZ1wiLFxuICBOOiBcIk5lY3JvdGljXCIsXG4gIFI6IFwiUmFkaWFudFwiLFxuICBGOiBcIkZpcmVcIixcbiAgQzogXCJDb2xkXCIsXG4gIEw6IFwiTGlnaHRuaW5nXCIsXG4gIFQ6IFwiVGh1bmRlclwiLFxuICBBOiBcIkFjaWRcIixcbiAgSDogXCJIZWFsaW5nXCIsXG4gIFU6IFwiRm9yY2VcIixcbiAgVjogXCJQc3ljaGljXCIsXG59O1xuXG5leHBvcnQgY29uc3QgUFJPUEVSVFlfTUFQOiBSZWNvcmQ8c3RyaW5nLHN0cmluZz4gPSB7XG4gIEE6IFwiQW1tdW5pdGlvblwiLFxuICBGOiBcIkZpbmVzc2VcIixcbiAgSDogXCJIZWF2eVwiLFxuICBMOiBcIkxpZ2h0XCIsXG4gIFI6IFwiUmVsb2FkXCIsXG4gIFM6IFwiU3BlY2lhbFwiLFxuICBcIjJIXCI6IFwiVHdvLUhhbmRlZFwiLFxuICBUOiBcIlRocm93blwiLFxuICBWOiBcIlZlcnNhdGlsZVwiXG59O1xuXG5leHBvcnQgY29uc3QgSVRFTV9UWVBFX01BUDogUmVjb3JkPHN0cmluZyxzdHJpbmc+ID0ge1xuICAkQzogIFwiQ3VycmVuY3lcIixcbiAgJEc6ICBcIkdlbVwiLFxuICBBOiAgIFwiQW1tdW5pdGlvblwiLFxuICBcIkFJUnxETUdcIjogXCJWZWhpY2xlIChhaXIpXCIsXG4gIFwiQUZ8RE1HXCI6IFwiRnV0dXJlIEFtbW9cIixcbiAgQVQ6ICBcIkFydGlzYW4gVG9vbHNcIixcbiAgRVhQOiBcIkV4cGxvc2l2ZVwiLFxuICBGRDogIFwiRm9vZCBhbmQgRHJpbmtcIixcbiAgRzogICBcIkdlYXJcIixcbiAgR1M6ICBcIkdhbWVcIixcbiAgSEE6ICBcIkhlYXZ5IEFybW9yXCIsXG4gIFwiSURHfFREQ1NSXCI6IFwiSWxsaWNpdCBEcnVnXCIsXG4gIElOUzogXCJJbnN0cnVtZW50XCIsXG4gIExBOiAgXCJMaWdodCBBcm1vclwiLFxuICBNOiAgIFwiV2VhcG9uXCIsXG4gIE1BOiAgXCJNZWRpdW0gQXJtb3JcIixcbiAgTU5UOiBcIk1vdW50cyBhbmQgVmVoaWNsZXNcIixcbiAgT0RIOiBcIk1pc2NlbGxhbmVvdXNcIixcbiAgUDogICBcIkNvbnN1bWFibGVcIixcbiAgUjogICBcIlJhbmdlZCBXZWFwb25cIixcbiAgUkQ6ICBcIlJvZFwiLFxuICBSRzogIFwiUmluZ1wiLFxuICBTOiAgIFwiU2hpZWxkXCIsXG4gIFNDOiAgXCJTY3JvbGxcIixcbiAgU0NGOiBcIlNwZWxsIENhc3RpbmcgRm9jdXNcIixcbiAgU0hQOiBcIlNoaXBcIixcbiAgVDogICBcIlRvb2xcIixcbiAgVEFIOiBcIk1vdW50cyBhbmQgVmVoaWNsZXNcIixcbiAgVEc6ICBcIlRyYWRlIEdvb2RzXCIsXG4gIFZFSDogXCJNb3VudHMgYW5kIFZlaGljbGVzXCIsXG4gIFdEOiAgXCJXYW5kXCIsXG59O1xuXG4vKiogY29kZSBcdTIxOTIgZnVsbCBmb2xkZXIgcGF0aCB1bmRlciBJdGVtcy8gKi9cbmNvbnN0IGNvZGVGb2xkZXJNYXA6IFJlY29yZDxzdHJpbmcsc3RyaW5nPiA9IHtcbiAgLy8gV2VhcG9ucyAmIEFybW9yXG4gIFwiQVwiOiAgIFwiV2VhcG9ucyBhbmQgQXJtb3IvQW1tdW5pdGlvblwiLFxuICBcIk1cIjogICBcIldlYXBvbnMgYW5kIEFybW9yL1dlYXBvbnNcIixcbiAgXCJSXCI6ICAgXCJXZWFwb25zIGFuZCBBcm1vci9SYW5nZWQgV2VhcG9uc1wiLFxuICBcIlNcIjogICBcIldlYXBvbnMgYW5kIEFybW9yL1NoaWVsZHNcIixcbiAgXCJMQVwiOiAgXCJXZWFwb25zIGFuZCBBcm1vci9Bcm1vci9MaWdodCBBcm1vclwiLFxuICBcIk1BXCI6ICBcIldlYXBvbnMgYW5kIEFybW9yL0FybW9yL01lZGl1bSBBcm1vclwiLFxuICBcIkhBXCI6ICBcIldlYXBvbnMgYW5kIEFybW9yL0FybW9yL0hlYXZ5IEFybW9yXCIsXG4gIFwiRVhQXCI6IFwiV2VhcG9ucyBhbmQgQXJtb3IvV2VhcG9ucy9FeHBsb3NpdmVzXCIsXG4gIC8vIEZ1dHVyZSBBbW1vIChBRnxETUcgXHUyMTkyIHJhd0NvZGUgXCJBRlwiKVxuICBcIkFGXCI6ICBcIldlYXBvbnMgYW5kIEFybW9yL0FtbXVuaXRpb24vRnV0dXJlIEFtbW9cIixcblxuICAvLyBNYWdpY2FsIEl0ZW1zXG4gIFwiUkRcIjogIFwiTWFnaWNhbCBJdGVtcy9Sb2RzXCIsXG4gIFwiUkdcIjogIFwiTWFnaWNhbCBJdGVtcy9SaW5nc1wiLFxuICBcIlNDXCI6ICBcIk1hZ2ljYWwgSXRlbXMvU2Nyb2xsc1wiLFxuICBcIlNDRlwiOiBcIk1hZ2ljYWwgSXRlbXMvU3BlbGwgQ2FzdGluZyBGb2N1c1wiLFxuICBcIldEXCI6ICBcIk1hZ2ljYWwgSXRlbXMvV2FuZHNcIixcblxuICAvLyBWYWx1YWJsZXNcbiAgXCIkR1wiOiBcIlZhbHVhYmxlcy9HZW1zXCIsXG4gIC8vIEN1cnJlbmN5IChyYXdDb2RlIGJlY29tZXMgXCJDXCIgYWZ0ZXIgc3RyaXBwaW5nICQpXG4gIFwiQ1wiOiAgXCJWYWx1YWJsZXMvQ3VycmVuY3lcIixcbiAgXCJUR1wiOiBcIlZhbHVhYmxlcy9UcmFkZSBHb29kc1wiLFxuXG4gIC8vIEFydGlzYW4gR29vZHNcbiAgXCJBVFwiOiAgXCJBcnRpc2FuIEdvb2RzL1Rvb2xzXCIsXG4gIFwiVFwiOiAgIFwiQXJ0aXNhbiBHb29kcy9Ub29sc1wiLFxuICBcIklOU1wiOiBcIkFydGlzYW4gR29vZHMvSW5zdHJ1bWVudHNcIixcbiAgXCJHU1wiOiAgXCJBcnRpc2FuIEdvb2RzL0dhbWVzXCIsXG5cbiAgLy8gR2VhciAmIE1vdW50c1xuICBcIkdcIjogICBcIkdlYXJcIixcbiAgLy8gTW91bnRzICYgVmVoaWNsZXNcbiAgXCJNTlRcIjogXCJHZWFyL01vdW50cyBhbmQgVmVoaWNsZXNcIixcbiAgXCJUQUhcIjogXCJHZWFyL01vdW50cyBhbmQgVmVoaWNsZXNcIixcbiAgXCJWRUhcIjogXCJHZWFyL01vdW50cyBhbmQgVmVoaWNsZXNcIixcbiAgLy8gQWlyIHZlaGljbGVzIChBSVJ8RE1HIFx1MjE5MiByYXdDb2RlIFwiQUlSXCIpXG4gIFwiQUlSXCI6IFwiR2Vhci9Nb3VudHMgYW5kIFZlaGljbGVzL0FpclwiLFxuXG4gIC8vIENvbnN1bWFibGVzXG4gIFwiUFwiOiAgIFwiQ29uc3VtYWJsZXNcIixcbiAgLy8gRm9vZCAmIERyaW5rXG4gIFwiRkRcIjogIFwiQ29uc3VtYWJsZXMvRm9vZCBhbmQgRHJpbmtcIixcblxuICAvLyBJbGxpY2l0IERydWdzIChJREd8VERDU1IgXHUyMTkyIHJhd0NvZGUgXCJJREdcIilcbiAgXCJJREdcIjogXCJHZWFyL0lsbGljaXQgRHJ1Z3NcIixcblxuICAvLyBNaXNjZWxsYW5lb3VzIChPREgpXG4gIFwiT0RIXCI6IFwiR2Vhci9NaXNjZWxsYW5lb3VzXCIsXG59O1xuXG5leHBvcnQgZnVuY3Rpb24gcGFyc2VJdGVtc0ZpbGUoanNvbjogYW55LCBlZGl0aW9uSWQ6IHN0cmluZyk6IFBhcnNlZE1hcmtkb3duRmlsZVtdIHtcbiAgY29uc3QgcmF3SXRlbXM6IGFueVtdID0gW107XG4gIGlmIChBcnJheS5pc0FycmF5KGpzb24uYmFzZWl0ZW0pKSByYXdJdGVtcy5wdXNoKC4uLmpzb24uYmFzZWl0ZW0pO1xuICBpZiAoQXJyYXkuaXNBcnJheShqc29uLml0ZW0pKSAgICAgcmF3SXRlbXMucHVzaCguLi5qc29uLml0ZW0pO1xuICBpZiAoQXJyYXkuaXNBcnJheShqc29uLm9iamVjdCkpICAgcmF3SXRlbXMucHVzaCguLi5qc29uLm9iamVjdCk7XG4gIGlmIChBcnJheS5pc0FycmF5KGpzb24udmVoaWNsZSkpICByYXdJdGVtcy5wdXNoKC4uLmpzb24udmVoaWNsZSk7XG4gIGlmICghcmF3SXRlbXMubGVuZ3RoKSByZXR1cm4gW107XG5cbiAgY29uc3QgYmFzZU5hbWVzID0gbmV3IFNldDxzdHJpbmc+KFxuICAgIEFycmF5LmlzQXJyYXkoanNvbi5iYXNlaXRlbSkgPyBqc29uLmJhc2VpdGVtLm1hcCgoYjogYW55KSA9PiBiLm5hbWUpIDogW11cbiAgKTtcbiAgY29uc3Qgb3V0OiBQYXJzZWRNYXJrZG93bkZpbGVbXSA9IFtdO1xuXG4gIGZvciAoY29uc3QgaXQgb2YgcmF3SXRlbXMpIHtcbiAgICBjb25zdCBuYW1lICAgICA9IGl0Lm5hbWUgYXMgc3RyaW5nO1xuICAgIGNvbnN0IHNhZmVOYW1lID0gbmFtZS5yZXBsYWNlKC9bXFwvXFxcXDpdL2csIFwiLVwiKTtcblxuICAgIC8vIERldGVybWluZSBmb2xkZXJcbiAgICBjb25zdCByYXdDb2RlID0gKGl0LnR5cGUgYXMgc3RyaW5nIHx8IFwiXCIpLnNwbGl0KFwifFwiKVswXVxuICAgICAgICAuc3BsaXQoXCJ8XCIpWzBdICAgICAgLy8gZHJvcCBhbnl0aGluZyBhZnRlciBcdTIwMUN8XHUyMDFEXG4gICAgICAgIC5yZXBsYWNlKC9eXFwkLywgXCJcIik7IC8vIHN0cmlwIGxlYWRpbmcgXHUyMDFDJFx1MjAxRFxuICAgIGxldCBmb2xkZXIgICAgPSBjb2RlRm9sZGVyTWFwW3Jhd0NvZGVdID8/IFwiTWlzY2VsbGFuZW91c1wiO1xuXG4gICAgLy8gVmFyaWFudHNcbiAgICBpZiAoaXQuYm9udXNXZWFwb24pIHtcbiAgICAgIGZvbGRlciA9IGAke2ZvbGRlcn0vVmFyaWFudHNgO1xuICAgIH1cbiAgICAvLyBNYWdpY2FsXG4gICAgZWxzZSB7XG4gICAgICBjb25zdCBpc01hZ2ljID0gISFpdC53b25kcm91cyB8fCAhIWl0LnJlcUF0dHVuZSB8fCAhIWl0LnJlcV9hdHR1bmVcbiAgICAgICAgfHwgU3RyaW5nKGl0LnJhcml0eSkudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhcIm1hZ2ljXCIpO1xuICAgICAgaWYgKGlzTWFnaWMpIHtcbiAgICAgICAgY29uc3QgWyAsIC4uLnJlc3QgXSA9IGZvbGRlci5zcGxpdChcIi9cIik7XG4gICAgICAgIGZvbGRlciA9IFtcIk1hZ2ljYWwgSXRlbXNcIiwgLi4ucmVzdF0uam9pbihcIi9cIik7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gV2VhcG9uIGNhdGVnb3J5IHN1YmZvbGRlclxuICAgIGlmICgoZm9sZGVyLnN0YXJ0c1dpdGgoXCJXZWFwb25zIGFuZCBBcm1vci9XZWFwb25zXCIpIHx8XG4gICAgICAgICBmb2xkZXIuc3RhcnRzV2l0aChcIldlYXBvbnMgYW5kIEFybW9yL1JhbmdlZCBXZWFwb25zXCIpKSAmJiBpdC53ZWFwb25DYXRlZ29yeSkge1xuICAgICAgZm9sZGVyID0gYCR7Zm9sZGVyfS8ke2NhcGl0YWxpemVGaXJzdChpdC53ZWFwb25DYXRlZ29yeSl9YDtcbiAgICB9XG5cbiAgICAvLyBtYWtlIGVkaXRpb25JZCBhdmFpbGFibGUgZm9yIHRoZSBTT1VSQ0UgZmllbGRcbihqc29uIGFzIGFueSkuX2VkaXRpb25JZCA9IGVkaXRpb25JZDtcblxuLy8gYnVpbGQgYSBGcm9udG1hdHRlciBvYmplY3QgZnJvbSB0aGUgSlNPTlxuY29uc3QgZm0gICA9IGJ1aWxkRk0oaXQsIElURU1fTUVUQV9ERUZTKTtcblxuLy8gaWYgdGhlIGJ1aWx0IGZyb250bWF0dGVyIHNheXMgdGhpcyBpcyBhIG1hZ2ljYWwgaXRlbVx1MjAyNlxuaWYgKGZtW0ZNX0ZJRUxEUy5NQUdJQ0FMXSkge1xuICAvLyBcdTIwMjZ0aGVuIGFkZCBvdXIgVmVybXVuIGZsYWdcbiAgZm1bRk1fRklFTERTLlZFUk1VTl0gPSBmYWxzZTtcbn1cblxuaWYgKHJhd0NvZGUgPT09IFwiTVwiICYmIGl0LndlYXBvbkNhdGVnb3J5KSB7XG4gIC8vIFx1MjAxQ01cdTIwMUQgXHUyMTkyIHVzZSB3ZWFwb25DYXRlZ29yeSAoXHUyMDFDU2ltcGxlXHUyMDFEL1x1MjAxQ01hcnRpYWxcdTIwMUQpXG4gIGZtLnR5cGUgPSBgJHtjYXBpdGFsaXplRmlyc3QoaXQud2VhcG9uQ2F0ZWdvcnkpfSBXZWFwb25gO1xufSBlbHNlIGlmIChJVEVNX1RZUEVfTUFQW3Jhd0NvZGVdKSB7XG4gIC8vIGFueSBvdGhlciBjb2RlIFx1MjE5MiBtYXBwZWQgbGFiZWxcbiAgZm0udHlwZSA9IElURU1fVFlQRV9NQVBbcmF3Q29kZV07XG59XG5pZiAoQXJyYXkuaXNBcnJheShmbS5kYW1hZ2VUeXBlcykpIHtcbiAgZm0uZGFtYWdlVHlwZXMgPSBmbS5kYW1hZ2VUeXBlcy5tYXAoKGNvZGU6IHN0cmluZykgPT5cbiAgICBEQU1BR0VfVFlQRV9NQVBbY29kZV0gfHwgY29kZVxuICApO1xufVxuLy8gc2VyaWFsaXplIGl0IHRvIFlBTUxcbmxldCB5YW1sID0gc2VyaWFsaXplRnJvbnRtYXR0ZXIoZm0sIElURU1fTUVUQV9ERUZTKTtcblxuLy8gaWYgeW91IHN0aWxsIHdhbnQgcGFja0NvbnRlbnRzLCBhcHBlbmQgaXQgaGVyZTpcbmlmIChBcnJheS5pc0FycmF5KGl0LnBhY2tDb250ZW50cykpIHtcbiAgeWFtbCArPSBcIlxcbnBhY2tDb250ZW50czpcIjtcbiAgZm9yIChjb25zdCBwYyBvZiBpdC5wYWNrQ29udGVudHMpIHtcbiAgICB5YW1sICs9IGBcXG4gIC0gaXRlbTogXCIke3BjLml0ZW19XCJcXG4gICAgcXVhbnRpdHk6ICR7cGMucXVhbnRpdHl9YDtcbiAgfVxufVxuIFxuLy8gd3JhcCBpdCBpbiB0aGUgWUFNTCBmZW5jZVxuY29uc3QgZnJvbnRtYXR0ZXIgPSBgLS0tXFxuJHt5YW1sfVxcbi0tLWA7XG5cblxuICAgIC8vIEJvZHkgbGluZXNcbiAgICBjb25zdCBsaW5lczogc3RyaW5nW10gPSBbXTtcbiAgICBsaW5lcy5wdXNoKGAjICR7bmFtZX1gKTtcbiAgICBsaW5lcy5wdXNoKFwiXCIpO1xuXG4gICAgLy8gU3VidGl0bGVcbiAgICBjb25zdCBzdWJ0aXRsZSA9IGl0LndlYXBvblxuICAgICAgPyBgJHtjYXBpdGFsaXplRmlyc3QoaXQud2VhcG9uQ2F0ZWdvcnkpfSBXZWFwb25gXG4gICAgICA6IGl0LmFybW9yXG4gICAgICAgID8gZm9sZGVyLnNwbGl0KFwiL1wiKS5wb3AoKSB8fCBcIkFybW9yXCJcbiAgICAgICAgOiBcIlwiO1xuICAgIGlmIChzdWJ0aXRsZSkgbGluZXMucHVzaChgIyMjICoke3N1YnRpdGxlfSpgKTtcblxuICAgIC8vIFN0YXRzIGxpbmVzXG4gICAgaWYgKGl0LndlYXBvbikge1xuICAgICAgbGluZXMucHVzaChgKipDYXRlZ29yeSoqOiAke2NhcGl0YWxpemVGaXJzdChpdC53ZWFwb25DYXRlZ29yeSl9YCk7XG4gICAgICBsaW5lcy5wdXNoKGAqKkRhbWFnZSoqOiAke2l0LmRtZzEgPz8gXCJcIn0ke2l0LmRtZzIgPyBgIC8gJHtpdC5kbWcyfWAgOiBcIlwifWApO1xuICAgICAgY29uc3QgdHlwZXNCb2R5ID0gKEFycmF5LmlzQXJyYXkoaXQuZG1nVHlwZSkgPyBpdC5kbWdUeXBlIDogW2l0LmRtZ1R5cGVdKVxuICAgICAgICAuZmlsdGVyKCh0OiBhbnkpID0+IEJvb2xlYW4odCkpXG4gICAgICAgIC5tYXAoKHQ6IHN0cmluZykgPT4gREFNQUdFX1RZUEVfTUFQW3RdIHx8IHQpO1xuICAgICAgbGluZXMucHVzaChgKipEYW1hZ2UgVHlwZSoqOiAke3R5cGVzQm9keS5qb2luKFwiLCBcIil9YCk7XG4gICAgICBsaW5lcy5wdXNoKGAqKlJhbmdlKio6ICR7aXQucmFuZ2UgPz8gXCJcdTIwMTRcIn1gKTtcbiAgICAgIGxpbmVzLnB1c2goYCoqUmVsb2FkKio6ICR7aXQucmVsb2FkID8/IFwiXHUyMDE0XCJ9YCk7XG4gICAgICBpZiAoaXQuYW1tb1R5cGUpIGxpbmVzLnB1c2goYCoqQW1tbyBUeXBlKio6ICR7aXQuYW1tb1R5cGV9YCk7XG4gICAgICBpZiAoQXJyYXkuaXNBcnJheShpdC5wcm9wZXJ0eSkgJiYgaXQucHJvcGVydHkubGVuZ3RoKSB7XG4gICAgICAgIGNvbnN0IHByb3BzQm9keSA9IGl0LnByb3BlcnR5Lm1hcCgocDogc3RyaW5nKSA9PiBQUk9QRVJUWV9NQVBbcF0gfHwgcCk7XG4gICAgICAgIGxpbmVzLnB1c2goYCoqUHJvcGVydGllcyoqOiAke3Byb3BzQm9keS5qb2luKFwiLCBcIil9YCk7XG4gICAgICB9XG4gICAgfVxuICAgIGlmIChpdC5hcm1vcikge1xuICAgICAgbGluZXMucHVzaChgKipBcm1vciBDbGFzcyoqOiAke2l0LmFjfWApO1xuICAgICAgaWYgKGl0LnN0ZWFsdGgpIGxpbmVzLnB1c2goYCoqU3RlYWx0aCBEaXNhZHZhbnRhZ2UqKjogdHJ1ZWApO1xuICAgICAgbGluZXMucHVzaChcIlwiKTtcbiAgICB9XG5cbiAgICAvLyBEZXNjcmlwdGlvbiB3aXRoIG5lc3RlZCBlbnRyaWVzXG4vLyBEZXNjcmlwdGlvbiB3aXRoIG5lc3RlZCBlbnRyaWVzXG5jb25zdCBkZXNjID0gaXQuZW50cmllcyA/PyBpdC5kZXNjO1xuaWYgKGRlc2MpIHtcbiAgZm9yIChjb25zdCBwIG9mIChBcnJheS5pc0FycmF5KGRlc2MpID8gZGVzYyA6IFtkZXNjXSkpIHtcbiAgICAvLyBwbGFpbiBwYXJhZ3JhcGhcbiAgICBpZiAodHlwZW9mIHAgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgIGZvciAoY29uc3QgbGluZSBvZiByZXBsYWNlNWVUYWdzKHApLnNwbGl0KFwiXFxuXCIpKSBsaW5lcy5wdXNoKGxpbmUpO1xuICAgICAgbGluZXMucHVzaChcIlwiKTtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cblxuICAgIC8vIHRhYmxlIGJsb2NrXG4gICAgaWYgKHAgJiYgdHlwZW9mIHAgPT09IFwib2JqZWN0XCIgJiYgcC50eXBlID09PSBcInRhYmxlXCIpIHtcbiAgICAgIGlmIChsaW5lc1tsaW5lcy5sZW5ndGggLSAxXSAhPT0gXCJcIikgbGluZXMucHVzaChcIlwiKTtcbiAgICAgIGxpbmVzLnB1c2gocmVuZGVyNWVUYWJsZShwKSk7XG4gICAgICBsaW5lcy5wdXNoKFwiXCIpO1xuICAgICAgY29udGludWU7XG4gICAgfVxuXG4gICAgLy8gYnVsbGV0IGxpc3RcbiAgICBpZiAocCAmJiB0eXBlb2YgcCA9PT0gXCJvYmplY3RcIiAmJiBwLnR5cGUgPT09IFwibGlzdFwiICYmIEFycmF5LmlzQXJyYXkocC5pdGVtcykpIHtcbiAgICAgIGlmIChsaW5lc1tsaW5lcy5sZW5ndGggLSAxXSAhPT0gXCJcIikgbGluZXMucHVzaChcIlwiKTtcbiAgICAgIGZvciAoY29uc3QgaXRlbSBvZiBwLml0ZW1zKSB7XG4gICAgICAgIGlmICh0eXBlb2YgaXRlbSA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgIGxpbmVzLnB1c2goYC0gJHtyZXBsYWNlNWVUYWdzKGl0ZW0pfWApO1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGhlYWQgPSBpdGVtPy5uYW1lXG4gICAgICAgICAgPyBgKioke3JlcGxhY2U1ZVRhZ3MoU3RyaW5nKGl0ZW0ubmFtZSkpXG4gICAgICAgICAgICAgICAgLnJlcGxhY2UoL1suIT9dJC8sIG0gPT4gbSlcbiAgICAgICAgICAgICAgICAucmVwbGFjZSgvKFteLiE/XSkkLywgXCIkMS5cIil9KipgXG4gICAgICAgICAgOiBcIlwiO1xuICAgICAgICBsZXQgYm9keSA9IFwiXCI7XG4gICAgICAgIGlmICh0eXBlb2YgaXRlbT8uZW50cnkgPT09IFwic3RyaW5nXCIpIGJvZHkgPSByZXBsYWNlNWVUYWdzKGl0ZW0uZW50cnkpO1xuICAgICAgICBlbHNlIGlmIChBcnJheS5pc0FycmF5KGl0ZW0/LmVudHJpZXMpKSB7XG4gICAgICAgICAgYm9keSA9IGl0ZW0uZW50cmllc1xuICAgICAgICAgICAgLm1hcCgoZTogYW55KSA9PiAodHlwZW9mIGUgPT09IFwic3RyaW5nXCIgPyByZXBsYWNlNWVUYWdzKGUpIDogXCJcIikpXG4gICAgICAgICAgICAuam9pbihcIiBcIik7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgbGluZSA9IFtoZWFkLCBib2R5XS5maWx0ZXIoQm9vbGVhbikuam9pbihcIiBcIikudHJpbSgpO1xuICAgICAgICBpZiAobGluZSkgbGluZXMucHVzaChgLSAke2xpbmV9YCk7XG4gICAgICB9XG4gICAgICBsaW5lcy5wdXNoKFwiXCIpO1xuICAgICAgY29udGludWU7XG4gICAgfVxuXG4gICAgLy8gZ2VuZXJpYyBvYmplY3QgKGluc2V0cywgbmFtZWQgc2VjdGlvbnMsIGV0Yy4pXG4gICAgaWYgKHAgJiYgdHlwZW9mIHAgPT09IFwib2JqZWN0XCIpIHtcbiAgICAgIGlmIChsaW5lc1tsaW5lcy5sZW5ndGggLSAxXSA9PT0gXCJcIikgbGluZXMucG9wKCk7XG4gICAgICBpZiAodHlwZW9mIHAubmFtZSA9PT0gXCJzdHJpbmdcIiAmJiBwLm5hbWUudHJpbSgpKSB7XG4gICAgICAgIGxpbmVzLnB1c2goYCMjIyMgJHtwLm5hbWV9YCk7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHN1YiA9IEFycmF5LmlzQXJyYXkocC5lbnRyaWVzKSA/IHAuZW50cmllcyA6IFtdO1xuICAgICAgZm9yIChjb25zdCBzcCBvZiBzdWIpIHtcbiAgICAgICAgLy8gbmVzdGVkIHRhYmxlXG4gICAgICAgIGlmIChzcCAmJiB0eXBlb2Ygc3AgPT09IFwib2JqZWN0XCIgJiYgc3AudHlwZSA9PT0gXCJ0YWJsZVwiKSB7XG4gICAgICAgICAgaWYgKGxpbmVzW2xpbmVzLmxlbmd0aCAtIDFdICE9PSBcIlwiKSBsaW5lcy5wdXNoKFwiXCIpO1xuICAgICAgICAgIGxpbmVzLnB1c2gocmVuZGVyNWVUYWJsZShzcCkpO1xuICAgICAgICAgIGxpbmVzLnB1c2goXCJcIik7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBuZXN0ZWQgYnVsbGV0IGxpc3RcbiAgICAgICAgaWYgKHNwICYmIHR5cGVvZiBzcCA9PT0gXCJvYmplY3RcIiAmJiBzcC50eXBlID09PSBcImxpc3RcIiAmJiBBcnJheS5pc0FycmF5KHNwLml0ZW1zKSkge1xuICAgICAgICAgIGlmIChsaW5lc1tsaW5lcy5sZW5ndGggLSAxXSAhPT0gXCJcIikgbGluZXMucHVzaChcIlwiKTtcbiAgICAgICAgICBmb3IgKGNvbnN0IGl0ZW0gb2Ygc3AuaXRlbXMpIHtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgaXRlbSA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgICBsaW5lcy5wdXNoKGAtICR7cmVwbGFjZTVlVGFncyhpdGVtKX1gKTtcbiAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBoZWFkID0gaXRlbT8ubmFtZVxuICAgICAgICAgICAgICA/IGAqKiR7cmVwbGFjZTVlVGFncyhTdHJpbmcoaXRlbS5uYW1lKSlcbiAgICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoL1suIT9dJC8sIG0gPT4gbSlcbiAgICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoLyhbXi4hP10pJC8sIFwiJDEuXCIpfSoqYFxuICAgICAgICAgICAgICA6IFwiXCI7XG4gICAgICAgICAgICBsZXQgYm9keSA9IFwiXCI7XG4gICAgICAgICAgICBpZiAodHlwZW9mIGl0ZW0/LmVudHJ5ID09PSBcInN0cmluZ1wiKSBib2R5ID0gcmVwbGFjZTVlVGFncyhpdGVtLmVudHJ5KTtcbiAgICAgICAgICAgIGVsc2UgaWYgKEFycmF5LmlzQXJyYXkoaXRlbT8uZW50cmllcykpIHtcbiAgICAgICAgICAgICAgYm9keSA9IGl0ZW0uZW50cmllc1xuICAgICAgICAgICAgICAgIC5tYXAoKGU6IGFueSkgPT4gKHR5cGVvZiBlID09PSBcInN0cmluZ1wiID8gcmVwbGFjZTVlVGFncyhlKSA6IFwiXCIpKVxuICAgICAgICAgICAgICAgIC5qb2luKFwiIFwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGxpbmUgPSBbaGVhZCwgYm9keV0uZmlsdGVyKEJvb2xlYW4pLmpvaW4oXCIgXCIpLnRyaW0oKTtcbiAgICAgICAgICAgIGlmIChsaW5lKSBsaW5lcy5wdXNoKGAtICR7bGluZX1gKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgbGluZXMucHVzaChcIlwiKTtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFx1MjAxQ2VudHJpZXNcdTIwMUQgYmxvY2tzIHRoYXQgc2hvdWxkIGJlIHJlbmRlcmVkIGFzIGEgYm9sZGVkIGJ1bGxldCBsZWFkXG4gICAgICAgIGlmIChzcCAmJiB0eXBlb2Ygc3AgPT09IFwib2JqZWN0XCIgJiYgc3AudHlwZSA9PT0gXCJlbnRyaWVzXCIgJiYgc3AubmFtZSkge1xuICAgICAgICAgIGNvbnN0IGhlYWQgPSBgLSAqKioke3JlcGxhY2U1ZVRhZ3Moc3AubmFtZSl9LioqKmA7XG4gICAgICAgICAgY29uc3QgYm9keSA9IChBcnJheS5pc0FycmF5KHNwLmVudHJpZXMpID8gc3AuZW50cmllcyA6IFtdKVxuICAgICAgICAgICAgLm1hcCgoZTogYW55KSA9PiAodHlwZW9mIGUgPT09IFwic3RyaW5nXCIgPyByZXBsYWNlNWVUYWdzKGUpIDogXCJcIikpXG4gICAgICAgICAgICAuam9pbihcIiBcIik7XG4gICAgICAgICAgaWYgKGJvZHkudHJpbSgpKSBsaW5lcy5wdXNoKGAke2hlYWR9ICR7Ym9keX1gLnRyaW0oKSk7XG4gICAgICAgICAgZWxzZSBsaW5lcy5wdXNoKGhlYWQpO1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gbmVzdGVkIHBsYWluIHBhcmFncmFwaHNcbiAgICAgICAgaWYgKHR5cGVvZiBzcCA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgIGZvciAoY29uc3QgbGluZSBvZiByZXBsYWNlNWVUYWdzKHNwKS5zcGxpdChcIlxcblwiKSkgbGluZXMucHVzaChsaW5lKTtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIGdlbmVyaWMgbmVzdGVkIGVudHJpZXMgZmFsbGJhY2tcbiAgICAgICAgaWYgKHNwICYmIHR5cGVvZiBzcCA9PT0gXCJvYmplY3RcIiAmJiBBcnJheS5pc0FycmF5KHNwLmVudHJpZXMpKSB7XG4gICAgICAgICAgZm9yIChjb25zdCBpbm5lciBvZiBzcC5lbnRyaWVzKSB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIGlubmVyID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICAgIGZvciAoY29uc3QgbGluZSBvZiByZXBsYWNlNWVUYWdzKGlubmVyKS5zcGxpdChcIlxcblwiKSkgbGluZXMucHVzaChsaW5lKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgbGluZXMucHVzaChcIlwiKTtcbiAgICB9XG4gIH1cbn1cblxuXG4gICAgY29uc3QgYm9keSA9IGxpbmVzLmpvaW4oXCJcXG5cIik7XG5cbiAgICBvdXQucHVzaCh7IHBhdGg6IGBJdGVtcy8ke2ZvbGRlcn0vJHtzYWZlTmFtZX0ubWRgLCBjb250ZW50OiBgJHtmcm9udG1hdHRlcn1cXG5cXG4ke2JvZHl9YCB9KTtcbiAgfVxuXG4gIHJldHVybiBvdXQuc29ydCgoYSxiKSA9PiBhLnBhdGgubG9jYWxlQ29tcGFyZShiLnBhdGgpKTtcbn0iLCAiLy9kbmQgNWUgMjAxNCBlZGl0aW9uXG5cbmltcG9ydCB7IGdldEZ1bGxTb3VyY2VOYW1lIH0gZnJvbSBcIi4vc291cmNlTWFwXCI7XG5pbXBvcnQgeyBmb3JtYXRTaXplQWJicmV2LCBmb3JtYXRBbGlnbm1lbnRBYmJyZXYgfSBmcm9tIFwiLi4vYmVzdGlhcnlcIjtcbmltcG9ydCB7IGZvcm1hdFJhbmdlLCBmb3JtYXRUaW1lLCBmb3JtYXREdXJhdGlvbiwgU0NIT09MX01BUCB9IGZyb20gXCIuLi9zcGVsbHNcIjtcbmltcG9ydCB7IFBST1BFUlRZX01BUCwgREFNQUdFX1RZUEVfTUFQLCBJVEVNX1RZUEVfTUFQIH0gZnJvbSBcIi4uL2l0ZW1zXCI7XG5pbXBvcnQgeyByZXBsYWNlNWVUYWdzIH0gZnJvbSBcIi4vdGFnUmVwbGFjZXJcIjtcblxuZnVuY3Rpb24gYmxhbmtVbmRlZmluZWQodmFsOiBhbnkpOiBhbnkge1xuICByZXR1cm4gdmFsID09PSB1bmRlZmluZWQgPyBcIlwiIDogdmFsO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gY2FwKHN0cjogYW55KTogc3RyaW5nIHtcbiAgaWYgKHR5cGVvZiBzdHIgIT09IFwic3RyaW5nXCIpIHJldHVybiBcIlwiO1xuICByZXR1cm4gc3RyLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgc3RyLnNsaWNlKDEpO1xufVxuXG5leHBvcnQgY29uc3QgQUJJTElUWV9GVUxMOiBSZWNvcmQ8c3RyaW5nLHN0cmluZz4gPSB7XG4gIHN0cjogXCJTdHJlbmd0aFwiLFxuICBkZXg6IFwiRGV4dGVyaXR5XCIsXG4gIGNvbjogXCJDb25zdGl0dXRpb25cIixcbiAgaW50OiBcIkludGVsbGlnZW5jZVwiLFxuICB3aXM6IFwiV2lzZG9tXCIsXG4gIGNoYTogXCJDaGFyaXNtYVwiLFxufTtcblxuZXhwb3J0IGNvbnN0IFNJWkVfTUFQOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+ID0ge1xuICBUOiBcIlRpbnlcIixcbiAgUzogXCJTbWFsbFwiLFxuICBNOiBcIk1lZGl1bVwiLFxuICBMOiBcIkxhcmdlXCIsXG4gIEg6IFwiSHVnZVwiLFxuICBHOiBcIkdhcmdhbnR1YW5cIlxufTtcblxuLy8gXHUyNTAwXHUyNTAwXHUyNTAwIFVuaXZlcnNhbCBmcm9udG1hdHRlciBrZXlzIFx1MjUwMFx1MjUwMFx1MjUwMCAgXG5leHBvcnQgY29uc3QgRk1fRklFTERTID0ge1xuICBBQklMSVRZX0JPTlVTRVM6ICAgIFwiYWJpbGl0eV9ib251c2VzXCIsXG4gIEFDOiAgICAgICAgICAgICAgICAgXCJBQ1wiLFxuICBBTElHTk1FTlQ6ICAgICAgICAgIFwiQWxpZ25tZW50XCIsXG4gIEFNTU9fVFlQRTogICAgICAgICAgXCJBbW1vIFR5cGVcIixcbiAgQVJNT1JfUFJPRklDSUVOQ0lFUzpcImFybW9yLXByb2ZcIixcbiAgQVRUQUNLX1RZUEU6ICAgICAgICBcImF0dGFja190eXBlXCIsXG4gIEFUVFVORU1FTlQ6ICAgICAgICAgXCJBdHR1bmVtZW50XCIsXG4gIEFUVFVORV9SRVE6ICAgICAgICAgXCJBdHR1bmVfUmVxXCIsXG4gIENBU1RJTkdfVElNRTogICAgICAgXCJjYXN0aW5nX3RpbWVcIixcbiAgQ0hBUklTTUE6ICAgICAgICAgICBcImNoYXJpc21hXCIsXG4gIENIQV9NT0Q6ICAgICAgICAgICAgXCJjaGFfbW9kXCIsXG4gIENPTkNFTlRSQVRJT046ICAgICAgXCJjb25jZW50cmF0aW9uXCIsXG4gIENPTkRJVElPTl9JTU06ICAgICAgXCJjb25kX2ltbXVuaXR5XCIsXG4gIENPTlNUSVRVVElPTjogICAgICAgXCJjb25zdGl0dXRpb25cIixcbiAgQ09OX01PRDogICAgICAgICAgICBcImNvbl9tb2RcIixcbiAgQ09TVDogICAgICAgICAgICAgICBcImNvc3RcIixcbiAgQ09NUE9ORU5UUzogICAgICAgICBcIkNvbXBvbmVudHNcIixcbiAgQ0hBTExFTkdFX1JBVElORzogICBcIkNSXCIsXG4gIERBTUFHRV9UWVBFOiAgICAgICAgXCJkYW1hZ2VfdHlwZVwiLFxuICBEQU1BR0VfVFlQRVM6ICAgICAgIFwiZGFtYWdlVHlwZXNcIixcbiAgREFNQUdFOiAgICAgICAgICAgICBcImRhbWFnZVwiLFxuICBEQU1BR0VfUkVTOiAgICAgICAgIFwiZG1nX3Jlc2lzdGFuY2VcIixcbiAgREFNQUdFX0lNTTogICAgICAgICBcImRtZ19pbW11bml0eVwiLFxuICBERVhURVJJVFk6ICAgICAgICAgIFwiZGV4dGVyaXR5XCIsXG4gIERFWF9NT0Q6ICAgICAgICAgICAgXCJkZXhfbW9kXCIsXG4gIERVUkFUSU9OOiAgICAgICAgICAgXCJkdXJhdGlvblwiLFxuICBSVUxFU0VUOiAgICAgICAgICAgIFwicnVsZXNldFwiLFxuICBIUDogICAgICAgICAgICAgICAgIFwiSFBcIixcbiAgSU5URUxMSUdFTkNFOiAgICAgICBcImludGVsbGlnZW5jZVwiLFxuICBJTlRfTU9EOiAgICAgICAgICAgIFwiaW50X21vZFwiLFxuICBMQU5HVUFHRVM6ICAgICAgICAgIFwibGFuZ3VhZ2VzXCIsXG4gIExFVkVMOiAgICAgICAgICAgICAgXCJsZXZlbFwiLFxuICBNQUdJQ0FMOiAgICAgICAgICAgIFwibWFnaWNhbFwiLFxuICBNQVRFUklBTDogICAgICAgICAgIFwibWF0ZXJpYWxcIixcbiAgTkFNRTogICAgICAgICAgICAgICBcIm5hbWVcIixcbiAgUFJPUEVSVElFUzogICAgICAgICBcInByb3BlcnRpZXNcIixcbiAgUkFOR0U6ICAgICAgICAgICAgICBcInJhbmdlXCIsXG4gIFJBUklUWTogICAgICAgICAgICAgXCJyYXJpdHlcIixcbiAgUkVMT0FEOiAgICAgICAgICAgICBcInJlbG9hZFwiLFxuICBSSVRVQUw6ICAgICAgICAgICAgIFwicml0dWFsXCIsXG4gIFNBVkU6ICAgICAgICAgICAgICAgXCJzYXZlXCIsXG4gIFNBVklOR19USFJPV1M6ICAgICAgXCJzYXZpbmdfdGhyb3dzXCIsXG4gIFNDSE9PTDogICAgICAgICAgICAgXCJzY2hvb2xcIixcbiAgU0VOU0VTOiAgICAgICAgICAgICBcInNlbnNlc1wiLFxuICBTSVpFOiAgICAgICAgICAgICAgIFwic2l6ZVwiLFxuICBTS0lMTFM6ICAgICAgICAgICAgIFwic2tpbGxzXCIsXG4gIFNLSUxMX0NIT0lDRV9MSVNUOiAgXCJza2lsbF9jaG9pY2VfbGlzdFwiLFxuICBTT01BVElDOiAgICAgICAgICAgIFwic29tYXRpY1wiLFxuICBTT1VSQ0U6ICAgICAgICAgICAgIFwic291cmNlXCIsXG4gIFNQRUNJRVM6ICAgICAgICAgICAgXCJzcGVjaWVzXCIsXG4gIFNQRUVEOiAgICAgICAgICAgICAgXCJzcGVlZFwiLFxuICBTUEVMTF9DQVNUX01PRDogICAgIFwiU3BlbGwgQ2FzdCBNb2RcIixcbiAgU1BFTExfUkFOR0U6ICAgICAgICBcIlJhbmdlXCIsXG4gIFNURUFMVEhfRElTQURWQU5UQUdFOiBcInN0ZWFsdGhEaXNhZHZhbnRhZ2VcIixcbiAgU1RSRU5HVEg6ICAgICAgICAgICBcInN0cmVuZ3RoXCIsXG4gIFNUUl9NT0Q6ICAgICAgICAgICAgXCJzdHJfbW9kXCIsXG4gIFNVQlJBQ0VTOiAgICAgICAgICAgXCJzdWJyYWNlc1wiLFxuICBUT09MX1BST0ZJQ0lFTkNJRVM6IFwidG9vbC1wcm9mXCIsXG4gIFRPT0xfQ0hPSUNFX0xJU1Q6ICBcInRvb2xfY2hvaWNlX2xpc3RcIixcbiAgVFJBSVRTOiAgICAgICAgICAgICBcInRyYWl0c1wiLFxuICBUWVBFOiAgICAgICAgICAgICAgIFwidHlwZVwiLFxuICBWQVJJQU5UOiAgICAgICAgICAgIFwiVmFyaWFudFwiLFxuICBWRVJCQUw6ICAgICAgICAgICAgIFwidmVyYmFsXCIsXG4gIFZFUk1VTjogICAgICAgICAgICAgXCJ2ZXJtdW5cIixcbiAgV0VBUE9OX1BST0ZJQ0lFTkNJRVM6IFwid2VhcG9uLXByb2ZcIixcbiAgV0VJR0hUOiAgICAgICAgICAgICBcIndlaWdodFwiLFxuICBXSVNET006ICAgICAgICAgICAgIFwid2lzZG9tXCIsXG4gIFdJU19NT0Q6ICAgICAgICAgICAgXCJ3aXNfbW9kXCIsXG59IGFzIGNvbnN0O1xuXG5leHBvcnQgdHlwZSBGTUtleSA9IGtleW9mIHR5cGVvZiBGTV9GSUVMRFM7XG5leHBvcnQgdHlwZSBGcm9udG1hdHRlciA9IFBhcnRpYWw8UmVjb3JkPHR5cGVvZiBGTV9GSUVMRFNbRk1LZXldLCB1bmtub3duPj47XG5cbi8vIFx1MjUwMFx1MjUwMFx1MjUwMCBEZWZpbml0aW9uIG9mIGEgc2luZ2xlIGZpZWxkIG1hcHBpbmcgXHUyNTAwXHUyNTAwXHUyNTAwXG5leHBvcnQgaW50ZXJmYWNlIEZpZWxkRGVmIHtcbiAgLyoqIFdoaWNoIGNhbGxcdTIwMTBzaWduIChrZXkgaW4gRk1fRklFTERTKSAqL1xuICBjYWxsU2lnbjogRk1LZXk7XG4gIC8qKiBXaGljaCBKU09OIHByb3BlcnR5IHRvIHJlYWQgKi9cbiAganNvbktleTogIHN0cmluZyB8IHN0cmluZ1tdO1xuICAvKiogT3B0aW9uYWwgdHJhbnNmb3JtZXI6IHJhdyBKU09OIFx1MjE5MiBmaW5hbCB2YWx1ZSAqL1xuICBjb252PzogICAgKHJhdzogYW55LCBhbGxKc29uPzogYW55KSA9PiB1bmtub3duO1xufVxuXG5jb25zdCB1bmlmaWVkQXJtb3JQcm9mcyA9ICh2YWw6IGFueSk6IHN0cmluZ1tdID0+XG4gIEFycmF5LmlzQXJyYXkodmFsPy5hcm1vcikgPyB2YWwuYXJtb3IubWFwKGNhcCkgOlxuICBBcnJheS5pc0FycmF5KHZhbCkgPyB2YWwubWFwKGNhcCkgOiBbXTtcblxuLy8gZnJvbnRtYXR0ZXIudHNcblxuZXhwb3J0IGZ1bmN0aW9uIHVuaWZpZWRXZWFwb25Qcm9mcyh2YWw6IGFueSk6IHN0cmluZ1tdIHtcbiAgLy8gcHVsbCB0aGUgXHUyMDFDd2VhcG9uc1x1MjAxRCBhcnJheSBvZmYgZWl0aGVyIGEgcmF3IGFycmF5IG9yIGEgc3RhcnRpbmdQcm9maWNpZW5jaWVzIG9iamVjdFxuICBjb25zdCByYXdBcnI6IGFueVtdID0gQXJyYXkuaXNBcnJheSh2YWw/LndlYXBvbnMpXG4gICAgPyB2YWwud2VhcG9uc1xuICAgIDogQXJyYXkuaXNBcnJheSh2YWwpXG4gICAgPyB2YWxcbiAgICA6IFtdO1xuXG4gIGNvbnN0IG91dCA9IG5ldyBTZXQ8c3RyaW5nPigpO1xuXG4gIGZ1bmN0aW9uIGhhbmRsZU9uZShlbnRyeTogYW55KSB7XG4gICAgaWYgKEFycmF5LmlzQXJyYXkoZW50cnkpKSB7XG4gICAgICAvLyBmbGF0dGVuIG5lc3RlZCBhcnJheXNcbiAgICAgIGVudHJ5LmZvckVhY2goaGFuZGxlT25lKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAodHlwZW9mIGVudHJ5ID09PSBcInN0cmluZ1wiKSB7XG4gICAgICBjb25zdCBsaXQgPSBlbnRyeS50cmltKCkudG9Mb3dlckNhc2UoKTtcbiAgICAgIGlmIChsaXQgPT09IFwic2ltcGxlXCIpIHtcbiAgICAgICAgb3V0LmFkZChcIlNpbXBsZSBXZWFwb25zXCIpO1xuICAgICAgfSBlbHNlIGlmIChsaXQgPT09IFwibWFydGlhbFwiKSB7XG4gICAgICAgIG91dC5hZGQoXCJNYXJ0aWFsIFdlYXBvbnNcIik7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBkZXRlY3QgdGFnZ2VkIGl0ZW1zIHZzIHNpbXBsZSB3b3Jkc1xuICAgICAgICBjb25zdCB0ZXh0ID0gZW50cnkuc3RhcnRzV2l0aChcIntAXCIpXG4gICAgICAgICAgPyByZXBsYWNlNWVUYWdzKGVudHJ5KVxuICAgICAgICAgIDogY2FwKGVudHJ5KTtcbiAgICAgICAgb3V0LmFkZCh0ZXh0KTtcbiAgICAgIH1cbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAoZW50cnkgJiYgdHlwZW9mIGVudHJ5ID09PSBcIm9iamVjdFwiICYmIGVudHJ5LnByb2ZpY2llbmN5KSB7XG4gICAgICAvLyB7IHByb2ZpY2llbmN5OiBcImZpcmVhcm1zXCIsIG9wdGlvbmFsOiB0cnVlIH1cbiAgICAgIGNvbnN0IG5hbWUgPSBjYXAoZW50cnkucHJvZmljaWVuY3kpO1xuICAgICAgb3V0LmFkZChlbnRyeS5vcHRpb25hbCA/IGAke25hbWV9IChvcHRpb25hbClgIDogbmFtZSk7XG4gICAgfVxuICB9XG5cbiAgcmF3QXJyLmZvckVhY2goaGFuZGxlT25lKTtcbiAgcmV0dXJuIFsuLi5vdXRdO1xufVxuXG5cbmNvbnN0IFNBVkVfTkFNRV9NQVA6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4gPSB7XG4gIHN0cjogXCJTdHJlbmd0aFwiLFxuICBzdHJlbmd0aDogXCJTdHJlbmd0aFwiLFxuICBkZXg6IFwiRGV4dGVyaXR5XCIsXG4gIGRleHRlcml0eTogXCJEZXh0ZXJpdHlcIixcbiAgY29uOiBcIkNvbnN0aXR1dGlvblwiLFxuICBjb25zdGl0dXRpb246IFwiQ29uc3RpdHV0aW9uXCIsXG4gIGludDogXCJJbnRlbGxpZ2VuY2VcIixcbiAgaW50ZWxsaWdlbmNlOiBcIkludGVsbGlnZW5jZVwiLFxuICB3aXM6IFwiV2lzZG9tXCIsXG4gIHdpc2RvbTogXCJXaXNkb21cIixcbiAgY2hhOiBcIkNoYXJpc21hXCIsXG4gIGNoYXJpc21hOiBcIkNoYXJpc21hXCIsXG59O1xuXG5leHBvcnQgZnVuY3Rpb24gdW5pZmllZFNhdmVzKHZhbDogYW55KTogc3RyaW5nW10ge1xuICBpZiAoIXZhbCkgcmV0dXJuIFtdO1xuXG4gIC8vIEFycmF5IGZvcm1cbiAgaWYgKEFycmF5LmlzQXJyYXkodmFsKSkge1xuICAgIHJldHVybiB2YWwubWFwKChrKSA9PiB7XG4gICAgICBjb25zdCBrZXkgPSBTdHJpbmcoaykudG9Mb3dlckNhc2UoKTtcbiAgICAgIHJldHVybiBTQVZFX05BTUVfTUFQW2tleV0gfHwgKGtleS5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIGtleS5zbGljZSgxKSk7XG4gICAgfSk7XG4gIH1cblxuICAvLyBPYmplY3QgZm9ybSAoZS5nLiwgeyBjb246IHRydWUsIGRleDogdHJ1ZSB9KVxuICBpZiAodHlwZW9mIHZhbCA9PT0gXCJvYmplY3RcIikge1xuICAgIHJldHVybiBPYmplY3Qua2V5cyh2YWwpLm1hcCgoaykgPT4ge1xuICAgICAgY29uc3Qga2V5ID0gay50b0xvd2VyQ2FzZSgpO1xuICAgICAgcmV0dXJuIFNBVkVfTkFNRV9NQVBba2V5XSB8fCAoa2V5LmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsga2V5LnNsaWNlKDEpKTtcbiAgICB9KTtcbiAgfVxuXG4gIC8vIFN0cmluZyBmb3JtXG4gIGNvbnN0IGtleSA9IFN0cmluZyh2YWwpLnRvTG93ZXJDYXNlKCk7XG4gIHJldHVybiBbU0FWRV9OQU1FX01BUFtrZXldIHx8IChrZXkuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBrZXkuc2xpY2UoMSkpXTtcbn1cblxuZXhwb3J0IGNvbnN0IHVuaWZpZWRTa2lsbHMgPSAodmFsOiBhbnkpOiBzdHJpbmdbXSA9PiB7XG4gIC8vIDEpIFx1MjAxQ0Jlc3RpYXJ5XHUyMDFEIHN0eWxlOiBmbGF0IG9iamVjdCBtYXBwaW5nIHNraWxsXHUyMTkybW9kaWZpZXJcbiAgaWYgKFxuICAgIHZhbCAmJlxuICAgICFBcnJheS5pc0FycmF5KHZhbCkgJiZcbiAgICB0eXBlb2YgdmFsID09PSBcIm9iamVjdFwiICYmXG4gICAgLy8gZW5zdXJlIGV2ZXJ5IHZhbHVlIGlzIGEgc3RyaW5nIG9yIG51bWJlclxuICAgIE9iamVjdC52YWx1ZXModmFsKS5ldmVyeSh2ID0+IHR5cGVvZiB2ID09PSBcInN0cmluZ1wiIHx8IHR5cGVvZiB2ID09PSBcIm51bWJlclwiKVxuICApIHtcbiAgICByZXR1cm4gT2JqZWN0LmVudHJpZXModmFsKS5tYXAoXG4gICAgICAoW3NraWxsLCBtb2RdKSA9PiBgJHtjYXAoc2tpbGwpfSAke21vZH1gLnRyaW0oKVxuICAgICk7XG4gIH1cblxuICAvLyAyKSBuZXN0ZWQgdW5kZXIgLnNraWxscyAvIC5za2lsbFByb2ZpY2llbmNpZXMgLyAuc2tpbGxQcm9mXG4gIGlmICh2YWwgJiYgIUFycmF5LmlzQXJyYXkodmFsKSAmJiB0eXBlb2YgdmFsID09PSBcIm9iamVjdFwiKSB7XG4gICAgY29uc3QgbmVzdGVkID0gKHZhbCBhcyBhbnkpLnNraWxsc1xuICAgICAgPz8gKHZhbCBhcyBhbnkpLnNraWxsUHJvZlxuICAgICAgPz8gKHZhbCBhcyBhbnkpLnNraWxsUHJvZmljaWVuY2llcztcbiAgICByZXR1cm4gdW5pZmllZFNraWxscyhuZXN0ZWQpO1xuICB9XG5cbiAgLy8gMykgYXJyYXktc3R5bGVcbiAgaWYgKCFBcnJheS5pc0FycmF5KHZhbCkpIHJldHVybiBbXTtcblxuICBjb25zdCBvdXQgPSBuZXcgU2V0PHN0cmluZz4oKTtcbiAgZm9yIChjb25zdCBlIG9mIHZhbCkge1xuICAgIC8vIDNhKSB7IGFueTogTiB9XG4gICAgaWYgKGUgJiYgdHlwZW9mIGUgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIChlIGFzIGFueSkuYW55ID09PSBcIm51bWJlclwiKSB7XG4gICAgICBvdXQuYWRkKGBDaG9vc2UgJHsoZSBhcyBhbnkpLmFueX1gKTtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cbiAgICAvLyAzYikgeyBjaG9vc2U6IHsgY291bnQsIFx1MjAyNiB9IH1cbiAgICBpZiAoZSAmJiB0eXBlb2YgZSA9PT0gXCJvYmplY3RcIiAmJiAoZSBhcyBhbnkpLmNob29zZSkge1xuICAgICAgY29uc3QgY250ID0gKGUgYXMgYW55KS5jaG9vc2UuY291bnQgPz8gMTtcbiAgICAgIG91dC5hZGQoYENob29zZSAke2NudH1gKTtcbiAgICB9XG4gICAgLy8gM2MpIGZpeGVkIGZsYWdzIGZvbzogdHJ1ZVxuICAgIGlmIChlICYmIHR5cGVvZiBlID09PSBcIm9iamVjdFwiKSB7XG4gICAgICBmb3IgKGNvbnN0IFtrLCB2XSBvZiBPYmplY3QuZW50cmllcyhlKSkge1xuICAgICAgICBpZiAodiA9PT0gdHJ1ZSkgb3V0LmFkZChjYXAoaykpO1xuICAgICAgfVxuICAgIH1cbiAgICAvLyAzZCkgbGl0ZXJhbCBzdHJpbmdzXG4gICAgaWYgKHR5cGVvZiBlID09PSBcInN0cmluZ1wiKSB7XG4gICAgICBvdXQuYWRkKGNhcChlKSk7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIFsuLi5vdXRdO1xufTtcblxuXG4gXG5leHBvcnQgY29uc3QgdW5pZmllZFRvb2xQcm9mcyA9ICh2YWw6IGFueSk6IHN0cmluZ1tdID0+IHtcbiAgLy8gcHVsbCBuZXN0ZWQgYXJyYXkgaWYgc29tZW9uZSBwYXNzZWQgeW91IHRoZSB3aG9sZSBzdGFydGluZ1Byb2ZpY2llbmNpZXMgb2JqXG4gIGxldCBlbnRyaWVzOiBhbnlbXSA9IEFycmF5LmlzQXJyYXkodmFsKSA/IHZhbFxuICAgIDogQXJyYXkuaXNBcnJheSh2YWw/LnRvb2xQcm9maWNpZW5jaWVzKSA/IHZhbC50b29sUHJvZmljaWVuY2llc1xuICAgIDogQXJyYXkuaXNBcnJheSh2YWw/LnRvb2xzKSAgICAgICAgICAgICA/IHZhbC50b29sc1xuICAgIDogW107XG5cbiAgY29uc3Qgb3V0ID0gbmV3IFNldDxzdHJpbmc+KCk7XG4gIGxldCBzYXdDaG9vc2UgPSBmYWxzZTtcblxuICBmb3IgKGNvbnN0IGUgb2YgZW50cmllcykge1xuICAgIGlmICh0eXBlb2YgZSA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgb3V0LmFkZChjYXAoZSkpO1xuICAgICAgY29udGludWU7XG4gICAgfVxuXG4gICAgaWYgKGU/LmNob29zZSkge1xuICAgICAgY29uc3QgY250ID0gZS5jaG9vc2UuY291bnQgPz8gMTtcbiAgICAgIHNhd0Nob29zZSA9IHRydWU7XG4gICAgICBvdXQuYWRkKGBDaG9vc2UgJHtjbnR9YCk7XG4gICAgfVxuXG4gICAgLy8gcHVsbCBvdXQgYW55IGZpeGVkIFx1MjAxQ2ZvbzogdHJ1ZVx1MjAxRCBvciBudW1lcmljIFx1MjAxQ2FueUZvbzogTlx1MjAxRFxuICAgIGZvciAoY29uc3QgW2ssdl0gb2YgT2JqZWN0LmVudHJpZXMoZSkpIHtcbiAgICAgIGlmICh2ID09PSB0cnVlKSB7XG4gICAgICAgIG91dC5hZGQoY2FwKGspKTtcbiAgICAgIH0gZWxzZSBpZiAodHlwZW9mIHYgPT09IFwibnVtYmVyXCIgJiYgay5zdGFydHNXaXRoKFwiYW55XCIpKSB7XG4gICAgICAgIC8vIGUuZy4gYW55QXJ0aXNhbnNUb29sOjFcbiAgICAgICAgY29uc3QgcmF3ID0gay5yZXBsYWNlKC9eYW55LywgXCJcIik7XG4gICAgICAgIGNvbnN0IHNwYWNlZCA9IHJhd1xuICAgICAgICAgIC5yZXBsYWNlKC8oW2Etel0pKFtBLVpdKS9nLCBcIiQxICQyXCIpXG4gICAgICAgICAgLnNwbGl0KFwiIFwiKVxuICAgICAgICAgIC5tYXAoY2FwKVxuICAgICAgICAgIC5qb2luKFwiIFwiKTtcbiAgICAgICAgb3V0LmFkZChgQ2hvb3NlICR7dn0gJHtzcGFjZWR9YCk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIFsuLi5vdXRdO1xufTtcblxuZXhwb3J0IGNvbnN0IEFMTF9GSUVMRF9ERUZTOiBGaWVsZERlZltdID0gW1xuICAvLyBcdTI1MDBcdTI1MDBcdTI1MDAgQ29yZSBcdTI1MDBcdTI1MDBcdTI1MDBcbiAgeyBjYWxsU2lnbjogXCJOQU1FXCIsICBqc29uS2V5OiBcIm5hbWVcIiB9LFxuICB7IGNhbGxTaWduOiBcIlNPVVJDRVwiLCBqc29uS2V5OiBbXCJzb3VyY2VcIl0sIGNvbnY6IChyYXcsIGFsbCkgPT4ge1xuICAgICAgY29uc3Qgb3V0ID0gbmV3IFNldDxzdHJpbmc+KCk7XG4gICAgICBjb25zdCBhcnIgPSBBcnJheS5pc0FycmF5KHJhdykgPyByYXcgOiBbcmF3XTtcbiAgICAgIGFyci5mb3JFYWNoKHNyYyA9PiBvdXQuYWRkKGdldEZ1bGxTb3VyY2VOYW1lKHNyYywgKGFsbCBhcyBhbnkpLl9lZGl0aW9uSWQpKSk7XG4gICAgICBmb3IgKGNvbnN0IG9zIG9mIGFsbC5vdGhlclNvdXJjZXMgPz8gW10pIG91dC5hZGQoZ2V0RnVsbFNvdXJjZU5hbWUob3Muc291cmNlLCAoYWxsIGFzIGFueSkuX2VkaXRpb25JZCkpO1xuICAgICAgZm9yIChjb25zdCByZXAgb2YgYWxsLnJlcHJpbnRlZEFzID8/IFtdKSB7XG4gICAgICAgIGNvbnN0IFssIHNyY10gPSAocmVwIGFzIHN0cmluZykuc3BsaXQoXCJ8XCIpO1xuICAgICAgICBvdXQuYWRkKGdldEZ1bGxTb3VyY2VOYW1lKHNyYywgKGFsbCBhcyBhbnkpLl9lZGl0aW9uSWQpKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBbLi4ub3V0XTtcbiAgfX0sXG5cbiAgLy8gXHUyNTAwXHUyNTAwXHUyNTAwIFByb2ZpY2llbmNpZXMgXHUyNTAwXHUyNTAwXHUyNTAwXG4gIHsgY2FsbFNpZ246IFwiQVJNT1JfUFJPRklDSUVOQ0lFU1wiLCAganNvbktleTogW1wiYXJtb3JQcm9maWNpZW5jaWVzXCIsIFwiYXJtb3JQcm9mc1wiLCBcInN0YXJ0aW5nUHJvZmljaWVuY2llc1wiXSwgY29udjogdW5pZmllZEFybW9yUHJvZnMgfSxcbiAgeyBcbiAgICBjYWxsU2lnbjogXCJXRUFQT05fUFJPRklDSUVOQ0lFU1wiLFxuICAgIGpzb25LZXk6IFtcIndlYXBvblByb2ZpY2llbmNpZXNcIixcIndlYXBvblByb2ZzXCIsXCJzdGFydGluZ1Byb2ZpY2llbmNpZXNcIl0sXG4gICAgY29udjogdW5pZmllZFdlYXBvblByb2ZzXG4gIH0sXG4gIHsgY2FsbFNpZ246IFwiVE9PTF9QUk9GSUNJRU5DSUVTXCIsICAganNvbktleTogW1widG9vbFByb2ZpY2llbmNpZXNcIiwgXCJ0b29sUHJvZnNcIiwgXCJzdGFydGluZ1Byb2ZpY2llbmNpZXNcIl0sIGNvbnY6IHVuaWZpZWRUb29sUHJvZnMgfSxcbiAge1xuICAgIGNhbGxTaWduOiBcIlRPT0xfQ0hPSUNFX0xJU1RcIixcbiAgICBqc29uS2V5OiBbXCJ0b29sUHJvZmljaWVuY2llc1wiLCBcInRvb2xQcm9mc1wiLCBcInN0YXJ0aW5nUHJvZmljaWVuY2llc1wiXSxcbiAgICBjb252OiAocmF3OiBhbnkpID0+IHtcbiAgICAgIGNvbnN0IGFyciA9IEFycmF5LmlzQXJyYXkocmF3KVxuICAgICAgICA/IHJhd1xuICAgICAgICA6IEFycmF5LmlzQXJyYXkocmF3Py50b29sUHJvZmljaWVuY2llcylcbiAgICAgICAgPyByYXcudG9vbFByb2ZpY2llbmNpZXNcbiAgICAgICAgOiBBcnJheS5pc0FycmF5KHJhdz8udG9vbHMpXG4gICAgICAgID8gcmF3LnRvb2xzXG4gICAgICAgIDogW107XG4gICAgICBjb25zdCBjaG9pY2UgPSBhcnIuZmluZCgoZTogYW55KSA9PiBlPy5jaG9vc2UpO1xuICAgICAgcmV0dXJuIGNob2ljZT8uY2hvb3NlPy5mcm9tPy5tYXAoKHM6IHN0cmluZykgPT4gY2FwKHMpKSA/PyBbXTtcbiAgICB9XG4gIH0sXG4gIHsgY2FsbFNpZ246IFwiU0FWSU5HX1RIUk9XU1wiLCAgICAgICAganNvbktleTogW1wic2F2ZVwiLCBcInByb2ZpY2llbmN5XCIsIFwic2F2aW5nVGhyb3dcIl0sIGNvbnY6IHVuaWZpZWRTYXZlcyB9LFxuICB7XG4gICAgY2FsbFNpZ246IFwiU0tJTExTXCIsXG4gICAganNvbktleTogW1wic2tpbGxcIiwgXCJza2lsbFByb2ZcIiwgXCJza2lsbFByb2ZpY2llbmNpZXNcIiwgXCJzdGFydGluZ1Byb2ZpY2llbmNpZXNcIl0sXG4gICAgY29udjogdW5pZmllZFNraWxsc1xuICB9LFxuXG4gIHtcbiAgICBjYWxsU2lnbjogXCJTS0lMTF9DSE9JQ0VfTElTVFwiLFxuICAgIGpzb25LZXk6IFtcInNraWxsXCIsIFwic2tpbGxQcm9mXCIsIFwic2tpbGxQcm9maWNpZW5jaWVzXCIsIFwic3RhcnRpbmdQcm9maWNpZW5jaWVzXCJdLFxuICAgIGNvbnY6IChyYXc6IGFueSkgPT4ge1xuICAgICAgLy8gbm9ybWFsaXplIGludG8gYW4gYXJyYXkgb2YgZW50cmllc1xuICAgICAgY29uc3QgYXJyOiBhbnlbXSA9IEFycmF5LmlzQXJyYXkocmF3KVxuICAgICAgICA/IHJhd1xuICAgICAgICA6IEFycmF5LmlzQXJyYXkocmF3Py5za2lsbFByb2ZpY2llbmNpZXMpXG4gICAgICAgID8gcmF3LnNraWxsUHJvZmljaWVuY2llc1xuICAgICAgICA6IEFycmF5LmlzQXJyYXkocmF3Py5za2lsbHMpXG4gICAgICAgID8gcmF3LnNraWxsc1xuICAgICAgICA6IEFycmF5LmlzQXJyYXkocmF3Py5za2lsbFByb2YpXG4gICAgICAgID8gcmF3LnNraWxsUHJvZlxuICAgICAgICA6IFtdO1xuXG4gICAgICAvLyBmaW5kIHRoZSBvbmUgZW50cnkgdGhhdCByZXByZXNlbnRzIHRoZSBcdTIwMUNjaG9vc2VcdTIwMUQgYnVja2V0XG4gICAgICBjb25zdCBjaG9pY2VPYmogPSBhcnIuZmluZChlID0+IGU/LmNob29zZSB8fCB0eXBlb2YgZS5hbnkgPT09IFwibnVtYmVyXCIpO1xuICAgICAgaWYgKCFjaG9pY2VPYmopIHJldHVybiBbXTtcblxuICAgICAgLy8gZXhwbGljaXQgXHUyMDFDY2hvb3NlIGZyb20gWyAuLi4gXVx1MjAxRFxuICAgICAgaWYgKGNob2ljZU9iai5jaG9vc2UgJiYgQXJyYXkuaXNBcnJheShjaG9pY2VPYmouY2hvb3NlLmZyb20pKSB7XG4gICAgICAgIHJldHVybiBjaG9pY2VPYmouY2hvb3NlLmZyb20ubWFwKGNhcCk7XG4gICAgICB9XG5cbiAgICAgIC8vIHRoZSBcdTIwMUNhbnk6IDNcdTIwMUQgc2hvcnRoYW5kIFx1MjE5MiBvZmZlciBldmVyeSBza2lsbFxuICAgICAgaWYgKHR5cGVvZiBjaG9pY2VPYmouYW55ID09PSBcIm51bWJlclwiKSB7XG4gICAgICAgIC8vIFNLSUxMX09QVElPTlMgaXMgeW91ciBjb25zdCBbXCJBY3JvYmF0aWNzXCIsIFwiQW5pbWFsIEhhbmRsaW5nXCIsIFx1MjAyNl1cbiAgICAgICAgcmV0dXJuIFNLSUxMX09QVElPTlM7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBbXTtcbiAgICB9XG4gIH0sXG4gIHsgY2FsbFNpZ246IFwiU1BFTExfQ0FTVF9NT0RcIixqc29uS2V5OiBcInNwZWxsY2FzdGluZ0FiaWxpdHlcIiwgIFxuICAgIGNvbnY6IChyYXcpID0+IHtcbiAgICAvLyByYXcgbWlnaHQgYmUgXCJjaGFcIiBvciBcIkNIQVwiXG4gICAgY29uc3Qga2V5ID0gU3RyaW5nKHJhdykudG9Mb3dlckNhc2UoKTtcbiAgICByZXR1cm4gQUJJTElUWV9GVUxMW2tleV0gfHwga2V5LnRvVXBwZXJDYXNlKCk7XG4gIH19LFxuXG4gIHtcbiAgICBjYWxsU2lnbjogXCJSVUxFU0VUXCIsXG4gICAganNvbktleTogXCJuYW1lXCIsXG4gICAgLy8gaWdub3JlIHRoZSByYXcgdmFsdWUsIGFsd2F5cyBwcmludCBIRUxMT1xuICAgIGNvbnY6IChfcmF3LCBfYWxsKSA9PiBcIkQmRCA1ZSAoMjAxNClcIixcbiAgfSwgXG5cbiAgLy8gXHUyNTAwXHUyNTAwXHUyNTAwIFNwZWxscyBcdTI1MDBcdTI1MDBcdTI1MDBcbiAgeyBjYWxsU2lnbjogXCJMRVZFTFwiLCAgICAgICAgIGpzb25LZXk6IFwibGV2ZWxcIiB9LFxuICB7IGNhbGxTaWduOiBcIlNDSE9PTFwiLCAgICAgICAganNvbktleTogXCJzY2hvb2xcIiwgICBjb252OiBzID0+IFNDSE9PTF9NQVBbc10gPz8gcyB9LFxuICB7IGNhbGxTaWduOiBcIkNBU1RJTkdfVElNRVwiLCAganNvbktleTogXCJ0aW1lXCIsICAgICBjb252OiBmb3JtYXRUaW1lIH0sXG4gIHsgY2FsbFNpZ246IFwiU1BFTExfUkFOR0VcIiwgICBqc29uS2V5OiBcInJhbmdlXCIsICAgIGNvbnY6IGZvcm1hdFJhbmdlIH0sXG4gIHsgY2FsbFNpZ246IFwiRFVSQVRJT05cIiwgICAgICBqc29uS2V5OiBcImR1cmF0aW9uXCIsIGNvbnY6IGZvcm1hdER1cmF0aW9uIH0sXG4gIHsgY2FsbFNpZ246IFwiVkVSQkFMXCIsICAgICAgICBqc29uS2V5OiBcImNvbXBvbmVudHNcIiwgY29udjogKGM6YW55KSA9PiAhIWMudiB9LFxuICB7IGNhbGxTaWduOiBcIlNPTUFUSUNcIiwgICAgICAganNvbktleTogXCJjb21wb25lbnRzXCIsIGNvbnY6IChjOmFueSkgPT4gISFjLnMgfSxcbiAgeyBjYWxsU2lnbjogXCJNQVRFUklBTFwiLCAgICAgIGpzb25LZXk6IFwiY29tcG9uZW50c1wiLCBjb252OiAoYzphbnkpID0+ICEhYy5tIH0sXG4gIHsgY2FsbFNpZ246IFwiQ09NUE9ORU5UU1wiLFxuICAgIGpzb25LZXk6ICBcImNvbXBvbmVudHNcIixcbiAgICBjb252OiAoYzogYW55KTogc3RyaW5nW10gPT4ge1xuICAgICAgaWYgKCFjLm0pIHJldHVybiBbXTtcblxuICAgICAgY29uc3QgcmF3ID0gQXJyYXkuaXNBcnJheShjLm0pID8gYy5tIDogW2MubV07XG5cbiAgICAgIHJldHVybiByYXdcbiAgICAgICAgLm1hcCgoaXRlbTogYW55KTogc3RyaW5nIHwgbnVsbCA9PiB7XG4gICAgICAgICAgaWYgKHR5cGVvZiBpdGVtID09PSBcInN0cmluZ1wiKSByZXR1cm4gaXRlbTtcbiAgICAgICAgICBpZiAoaXRlbSAmJiB0eXBlb2YgaXRlbSA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgaXRlbS50ZXh0ID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICByZXR1cm4gaXRlbS50ZXh0O1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfSlcbiAgICAgICAgLmZpbHRlcigoY29tcDogc3RyaW5nIHwgbnVsbCk6IGNvbXAgaXMgc3RyaW5nID0+IGNvbXAgIT09IG51bGwpO1xuICAgIH1cbiAgfSwgXG4gIHsgY2FsbFNpZ246IFwiQVRUQUNLX1RZUEVcIiwgICBqc29uS2V5OiBcImF0dGFja1R5cGVcIiB9LFxuICB7IGNhbGxTaWduOiBcIkRBTUFHRV9UWVBFXCIsICAganNvbktleTogXCJkYW1hZ2VJbmZsaWN0XCIsIGNvbnY6IGQgPT4gQXJyYXkuaXNBcnJheShkKSA/IGRbMF0gOiBkIH0sXG4gIHsgY2FsbFNpZ246IFwiUklUVUFMXCIsICAgICAgICBqc29uS2V5OiBcInJpdHVhbFwiIH0sXG4gIHsgY2FsbFNpZ246IFwiQ09OQ0VOVFJBVElPTlwiLCBqc29uS2V5OiBcImR1cmF0aW9uXCIsIGNvbnY6IGRzID0+IEFycmF5LmlzQXJyYXkoZHMpICYmIGRzLnNvbWUoKHg6YW55KT0+IHguY29uY2VudHJhdGlvbikgfSxcbiAgeyBjYWxsU2lnbjogXCJTQVZFXCIsICAgICAgICAgIGpzb25LZXk6IFwic2F2ZUF0dHJcIiB9LFxuXG4gIC8vIFx1MjUwMFx1MjUwMFx1MjUwMCBTcGVjaWVzIC8gQ3JlYXR1cmVzIFx1MjUwMFx1MjUwMFx1MjUwMFxuICB7IGNhbGxTaWduOiBcIlNQRUNJRVNcIiwganNvbktleTogXCJuYW1lXCIgfSxcbiAgeyBjYWxsU2lnbjogXCJTSVpFXCIsIGpzb25LZXk6IFwic2l6ZVwiLCBjb252OiAocmF3OiBhbnkpID0+IHtcbiAgICAgIC8vIGhhbmRsZSBbXCJTXCIsXCJNXCJdIG9yIGp1c3QgXCJMXCJcbiAgICAgIGlmIChBcnJheS5pc0FycmF5KHJhdykpIHtcbiAgICAgICAgcmV0dXJuIHJhdy5tYXAociA9PiBTSVpFX01BUFtyXSB8fCByKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBTSVpFX01BUFtyYXddIHx8IHJhdztcbiAgICAgIH1cbiAgICB9XG4gIH0sXG4gICAge1xuICBjYWxsU2lnbjogXCJTUEVFRFwiLFxuICBqc29uS2V5OiAgIFwic3BlZWRcIixcbiAgY29udjogKHNwOiBudW1iZXIgfCBSZWNvcmQ8c3RyaW5nLCBhbnk+KSA9PiB7XG4gICAgLy8gaGFuZGxlIGJvdGggbnVtZXJpYyBzcGVlZHMgYW5kIG9iamVjdCBzcGVlZHNcbiAgICBpZiAodHlwZW9mIHNwID09PSBcIm51bWJlclwiKSB7XG4gICAgICByZXR1cm4gW2BXYWxrICR7c3B9IGZ0LmBdO1xuICAgIH1cbiAgICBpZiAoIXNwIHx8IHR5cGVvZiBzcCAhPT0gXCJvYmplY3RcIikgcmV0dXJuIFtdO1xuICAgIHJldHVybiBPYmplY3QuZW50cmllcyhzcClcbiAgICAgIC5maWx0ZXIoKFttb2RlXSkgPT4gbW9kZSAhPT0gXCJjYW5Ib3ZlclwiKVxuICAgICAgLm1hcCgoW21vZGUsIHZdKSA9PiB7XG4gICAgICAgIGNvbnN0IG4gPSB0eXBlb2YgdiA9PT0gXCJvYmplY3RcIiAmJiB2ICE9PSBudWxsICYmIFwibnVtYmVyXCIgaW4gdiA/ICh2IGFzIGFueSkubnVtYmVyIDogdjtcbiAgICAgICAgY29uc3QgbGFiZWwgPSBtb2RlID09PSBcIndhbGtcIiA/IFwiV2Fsa1wiIDogY2FwKG1vZGUpO1xuICAgICAgICByZXR1cm4gYCR7bGFiZWx9ICR7bn0gZnQuYDtcbiAgICAgIH0pO1xuICB9LFxufSxcbnsgY2FsbFNpZ246IFwiTEFOR1VBR0VTXCIsIGpzb25LZXk6IFtcImxhbmd1YWdlc1wiLCBcImxhbmd1YWdlUHJvZmljaWVuY2llc1wiXSwgY29udjogYXJyID0+IHtcbiAgICAgIGlmICghQXJyYXkuaXNBcnJheShhcnIpKSByZXR1cm4gW107XG4gICAgICBjb25zdCBvdXQ6IHN0cmluZ1tdID0gW107XG4gICAgICBmb3IgKGNvbnN0IGxwIG9mIGFycikge1xuICAgICAgICBpZiAodHlwZW9mIGxwID09PSBcInN0cmluZ1wiKSBvdXQucHVzaChjYXAobHApKTtcbiAgICAgICAgZWxzZSBpZiAodHlwZW9mIGxwID09PSBcIm9iamVjdFwiKSB7XG4gICAgICAgICAgZm9yIChjb25zdCBbbGFuZywgdmFsXSBvZiBPYmplY3QuZW50cmllcyhscCkpIHtcbiAgICAgICAgICAgIGlmICh2YWwpIG91dC5wdXNoKGNhcChsYW5nKSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gWy4uLm5ldyBTZXQob3V0KV07XG4gIH19LFxuICB7IGNhbGxTaWduOiBcIlNFTlNFU1wiLCBqc29uS2V5OiBcInNlbnNlc1wiLCBjb252OiBzZW4gPT4ge1xuICAgICAgaWYgKEFycmF5LmlzQXJyYXkoc2VuKSkgcmV0dXJuIHNlbi5tYXAoKHM6c3RyaW5nKT0+cy5yZXBsYWNlKC9eXFxkK1xccyovLFwiXCIpLnJlcGxhY2UoL14uLyxjPT5jLnRvVXBwZXJDYXNlKCkpKTtcbiAgICAgIGlmIChzZW4gJiYgdHlwZW9mIHNlbj09PVwib2JqZWN0XCIpIHJldHVybiBPYmplY3QuZW50cmllcyhzZW4pLm1hcCgoW2ssdl0pPT5gJHtrLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpK2suc2xpY2UoMSl9ICR7dn1gKTtcbiAgICAgIHJldHVybiBbXTtcbiAgfX0sIFxue1xuICBjYWxsU2lnbjogXCJUUkFJVFNcIixcbiAganNvbktleTogW1wiY2xhc3NGZWF0dXJlc1wiLCBcImVudHJpZXNcIl0sXG4gIGNvbnY6IChyYXc6IGFueSwgYWxsSnNvbjogYW55KTogc3RyaW5nW10gPT4ge1xuICAgIC8vIERpc3BsYXkvZmlsZSBuYW1lIHRvIHRhcmdldCBmb3IgdGhlIGZpbGUtYW5jaG9yXG4gICAgY29uc3QgcmVjID1cbiAgICAgIEFycmF5LmlzQXJyYXkoYWxsSnNvbi5jbGFzcykgPyBhbGxKc29uLmNsYXNzWzBdIDpcbiAgICAgIEFycmF5LmlzQXJyYXkoYWxsSnNvbi5yYWNlKSAgPyBhbGxKc29uLnJhY2VbMF0gIDpcbiAgICAgIGFsbEpzb247XG4gICAgY29uc3QgZmlsZU5hbWUgPSB0eXBlb2YgcmVjPy5uYW1lID09PSBcInN0cmluZ1wiXG4gICAgICA/IHJlYy5uYW1lXG4gICAgICA6ICh0eXBlb2YgYWxsSnNvbj8ubmFtZSA9PT0gXCJzdHJpbmdcIiA/IGFsbEpzb24ubmFtZSA6IFwiXCIpO1xuXG4gICAgLy8gTmFtZXMgdG8gb21pdCBhY3Jvc3MgdHlwZXNcbiAgICBjb25zdCBvbWl0ID0gbmV3IFNldChbXG4gICAgICAvLyBjbGFzcy1zcGVjaWZpY1xuICAgICAgXCJBYmlsaXR5IFNjb3JlIEltcHJvdmVtZW50XCIsXG4gICAgICBcIkFyY2hldHlwZSBGZWF0dXJlXCIsXG4gICAgICBcIlN1YmNsYXNzIEZlYXR1cmVcIixcbiAgICAgIC8vIHNwZWNpZXMtc3BlY2lmaWMgY29tbW9uIGhlYWRpbmdzXG4gICAgICBcIkFnZVwiLFxuICAgICAgXCJTaXplXCIsXG4gICAgICBcIlNwZWVkXCIsXG4gICAgICBcIkxhbmd1YWdlc1wiLFxuICAgICAgLy8gYmFja2dyb3VuZHMgb2Z0ZW4gaGF2ZSBnZW5lcmljIHNlY3Rpb25zIHRvbzsgYWRkIG1vcmUgaWYgbmVlZGVkXG4gICAgXSk7XG5cbiAgICBjb25zdCBzZWVuID0gbmV3IFNldDxzdHJpbmc+KCk7XG5cbiAgICAvLyBcdTI1MDBcdTI1MDAgMSkgQ2xhc3NlczogdXNlIGNsYXNzRmVhdHVyZXMgaWYgYXZhaWxhYmxlIChleGlzdGluZyBiZWhhdmlvcilcbiAgICBpZiAoQXJyYXkuaXNBcnJheShhbGxKc29uLmNsYXNzRmVhdHVyZXMpKSB7XG4gICAgICBjb25zdCBjbGFzc1JlYyA9IEFycmF5LmlzQXJyYXkoYWxsSnNvbi5jbGFzcykgPyBhbGxKc29uLmNsYXNzWzBdIDogYWxsSnNvbjtcbiAgICAgIGNvbnN0IGNsYXNzTmFtZSA9IHR5cGVvZiBjbGFzc1JlYz8ubmFtZSA9PT0gXCJzdHJpbmdcIiA/IGNsYXNzUmVjLm5hbWUgOiBmaWxlTmFtZTtcblxuICAgICAgcmV0dXJuIGFsbEpzb24uY2xhc3NGZWF0dXJlcy5mbGF0TWFwKChmZWF0OiBhbnkpID0+IHtcbiAgICAgICAgaWYgKGZlYXQgJiYgdHlwZW9mIGZlYXQgPT09IFwib2JqZWN0XCIgJiYgZmVhdC5nYWluU3ViY2xhc3NGZWF0dXJlKSByZXR1cm4gW107XG5cbiAgICAgICAgY29uc3QgcmF3TmFtZSA9XG4gICAgICAgICAgdHlwZW9mIGZlYXQgPT09IFwic3RyaW5nXCIgICAgICAgICAgICAgID8gZmVhdCA6XG4gICAgICAgICAgdHlwZW9mIGZlYXQuY2xhc3NGZWF0dXJlID09PSBcInN0cmluZ1wiID8gZmVhdC5jbGFzc0ZlYXR1cmUgOlxuICAgICAgICAgIFwiXCI7XG5cbiAgICAgICAgY29uc3QgbmFtZSA9IHJhd05hbWUuc3BsaXQoXCJ8XCIpWzBdLnRyaW0oKTtcbiAgICAgICAgaWYgKCFuYW1lIHx8IG9taXQuaGFzKG5hbWUpIHx8IHNlZW4uaGFzKG5hbWUpKSByZXR1cm4gW107XG4gICAgICAgIHNlZW4uYWRkKG5hbWUpO1xuXG4gICAgICAgIGNvbnN0IGFuY2hvciA9IG5hbWVcbiAgICAgICAgICAucmVwbGFjZSgvW15cXHdcXHNdL2csIFwiXCIpXG4gICAgICAgICAgLnJlcGxhY2UoL1xccysvZywgXCIgXCIpXG4gICAgICAgICAgLnRyaW0oKVxuICAgICAgICAgIC5yZXBsYWNlKC9cXGJcXHcvZywgKGM6IGFueSkgPT4gYy50b1VwcGVyQ2FzZSgpKTtcblxuICAgICAgICByZXR1cm4gY2xhc3NOYW1lID8gW2BbWyR7Y2xhc3NOYW1lfSMke2FuY2hvcn18JHtuYW1lfV1dYF0gOiBbbmFtZV07XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICAvLyBcdTI1MDBcdTI1MDAgMikgQmFja2dyb3VuZHMgLyBTcGVjaWVzIC8gU3ViLXNwZWNpZXM6IG1pbmUgbmFtZXMgZnJvbSBlbnRyaWVzW11cbiAgICBjb25zdCBlbnRzID0gQXJyYXkuaXNBcnJheShyYXcpID8gcmF3IDogW107XG4gICAgY29uc3QgbmFtZXM6IHN0cmluZ1tdID0gW107XG5cbiAgICBjb25zdCBwdXNoTmFtZSA9IChuOiBzdHJpbmcgfCB1bmRlZmluZWQpID0+IHtcbiAgICAgIGNvbnN0IG5hbWUgPSAobiA/PyBcIlwiKS5yZXBsYWNlKC9eRmVhdHVyZTpcXHMqLywgXCJcIikudHJpbSgpO1xuICAgICAgaWYgKCFuYW1lIHx8IG9taXQuaGFzKG5hbWUpIHx8IHNlZW4uaGFzKG5hbWUpKSByZXR1cm47XG4gICAgICBzZWVuLmFkZChuYW1lKTtcbiAgICAgIG5hbWVzLnB1c2gobmFtZSk7XG4gICAgfTtcblxuICAgIGZvciAoY29uc3QgZSBvZiBlbnRzKSB7XG4gICAgICBpZiAoIWUpIGNvbnRpbnVlO1xuICAgICAgaWYgKHR5cGVvZiBlID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiBlLm5hbWUgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgcHVzaE5hbWUoZS5uYW1lKTtcbiAgICAgIH1cbiAgICAgIC8vIG5lc3RlZCBlbnRyaWVzIGJsb2NrcyBjYW4gYWxzbyBjYXJyeSBuYW1lZCBzZWN0aW9uc1xuICAgICAgaWYgKHR5cGVvZiBlID09PSBcIm9iamVjdFwiICYmIEFycmF5LmlzQXJyYXkoZS5lbnRyaWVzKSkge1xuICAgICAgICBmb3IgKGNvbnN0IHN1YiBvZiBlLmVudHJpZXMpIHtcbiAgICAgICAgICBpZiAoc3ViICYmIHR5cGVvZiBzdWIgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIHN1Yi5uYW1lID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICBwdXNoTmFtZShzdWIubmFtZSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gSWYgd2UgZm91bmQgbmFtZXMsIGxpbmsgdGhlbSB0byB0aGUgY3VycmVudCBmaWxlXHUyMDE5cyBoZWFkZXJzXG4gICAgaWYgKG5hbWVzLmxlbmd0aCkge1xuICAgICAgcmV0dXJuIG5hbWVzLm1hcChuYW1lID0+IHtcbiAgICAgICAgY29uc3QgYW5jaG9yID0gbmFtZVxuICAgICAgICAgIC5yZXBsYWNlKC9bXlxcd1xcc10vZywgXCJcIilcbiAgICAgICAgICAucmVwbGFjZSgvXFxzKy9nLCBcIiBcIilcbiAgICAgICAgICAudHJpbSgpXG4gICAgICAgICAgLnJlcGxhY2UoL1xcYlxcdy9nLCAoYzogYW55KSA9PiBjLnRvVXBwZXJDYXNlKCkpO1xuICAgICAgICByZXR1cm4gZmlsZU5hbWUgPyBgW1ske2ZpbGVOYW1lfSMke2FuY2hvcn18JHtuYW1lfV1dYCA6IG5hbWU7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICAvLyBcdTI1MDBcdTI1MDAgMykgRmFsbGJhY2s6IHByZXNlcnZlIHByZXZpb3VzIG5vbi1saW5rIGJlaGF2aW9yIHdoZW4gbm90aGluZyBtYXRjaGVkXG4gICAgcmV0dXJuIGVudHNcbiAgICAgIC5maWx0ZXIoKGU6IGFueSkgPT4gZSAmJiB0eXBlb2YgZS5uYW1lID09PSBcInN0cmluZ1wiKVxuICAgICAgLm1hcCgoZTogYW55KSA9PiBlLm5hbWUucmVwbGFjZSgvXkZlYXR1cmU6XFxzKi8sIFwiXCIpLnRyaW0oKSk7XG4gIH0sXG59LFxuXG5cbiAgeyBjYWxsU2lnbjogXCJBQ1wiLCBqc29uS2V5OiBcImFjXCIsIGNvbnY6IGEgPT4gQXJyYXkuaXNBcnJheShhKT9hWzBdLmFjOmEgfSxcbiAgeyBjYWxsU2lnbjogXCJIUFwiLCBqc29uS2V5OiBcImhwXCIsIGNvbnY6IGhwID0+IGhwPy5hdmVyYWdlID8/IGhwIH0sXG4gIHsgY2FsbFNpZ246IFwiQ0hBTExFTkdFX1JBVElOR1wiLGpzb25LZXk6IFwiY3JcIiwgY29udjogKHJhdzogYW55KSA9PiAodHlwZW9mIHJhdyA9PT0gXCJvYmplY3RcIiAmJiByYXcgIT09IG51bGwgJiYgXCJjclwiIGluIHJhdyA/IHJhdy5jciA6IHJhdyl9LFxuICB7IGNhbGxTaWduOiBcIlNUUkVOR1RIXCIsICAgICBqc29uS2V5OiBcImFiaWxpdHlcIiwgY29udjogYXJyPT5BcnJheS5pc0FycmF5KGFycik/YXJyWzBdOmFycj8uc3RyID8/IDAgfSxcbiAgeyBjYWxsU2lnbjogXCJERVhURVJJVFlcIiwgICAganNvbktleTogXCJhYmlsaXR5XCIsIGNvbnY6IGFycj0+QXJyYXkuaXNBcnJheShhcnIpP2FyclsxXTphcnI/LmRleCA/PyAwIH0sXG4gIHsgY2FsbFNpZ246IFwiQ09OU1RJVFVUSU9OXCIsIGpzb25LZXk6IFwiYWJpbGl0eVwiLCBjb252OiBhcnI9PkFycmF5LmlzQXJyYXkoYXJyKT9hcnJbMl06YXJyPy5jb24gPz8gMCB9LFxuICB7IGNhbGxTaWduOiBcIklOVEVMTElHRU5DRVwiLCBqc29uS2V5OiBcImFiaWxpdHlcIiwgY29udjogYXJyPT5BcnJheS5pc0FycmF5KGFycik/YXJyWzNdOmFycj8uaW50ID8/IDAgfSxcbiAgeyBjYWxsU2lnbjogXCJXSVNET01cIiwgICAgICAganNvbktleTogXCJhYmlsaXR5XCIsIGNvbnY6IGFycj0+QXJyYXkuaXNBcnJheShhcnIpP2Fycls0XTphcnI/LndpcyA/PyAwIH0sXG4gIHsgY2FsbFNpZ246IFwiQ0hBUklTTUFcIiwgICAgIGpzb25LZXk6IFwiYWJpbGl0eVwiLCBjb252OiBhcnI9PkFycmF5LmlzQXJyYXkoYXJyKT9hcnJbNV06YXJyPy5jaGEgPz8gMCB9LFxuICB7XG4gICAgY2FsbFNpZ246IFwiQUxJR05NRU5UXCIsXG4gICAganNvbktleTogXCJhbGlnbm1lbnRcIixcbiAgICBjb252OiAoYTogYW55KSA9PiB7XG4gICAgICBjb25zdCByYXcgPSBBcnJheS5pc0FycmF5KGEpID8gYS5qb2luKFwiIFwiKSA6IHR5cGVvZiBhID09PSBcInN0cmluZ1wiID8gYSA6IFN0cmluZyhhKTtcbiAgICAgIGNvbnN0IGNsZWFuZWQgPSByYXdcbiAgICAgICAgLnJlcGxhY2UoL1xcYkFcXGIvZywgXCJBbnlcIilcbiAgICAgICAgLnJlcGxhY2UoL1xcYlVcXGIvZywgXCJVbmFsaWduZWRcIilcbiAgICAgICAgLnJlcGxhY2UoL1xcYk5cXGIvZywgXCJOZXV0cmFsXCIpXG4gICAgICAgIC5yZXBsYWNlKC9cXGJMXFxiL2csIFwiTGF3ZnVsXCIpXG4gICAgICAgIC5yZXBsYWNlKC9cXGJDXFxiL2csIFwiQ2hhb3RpY1wiKVxuICAgICAgICAucmVwbGFjZSgvXFxiR1xcYi9nLCBcIkdvb2RcIilcbiAgICAgICAgLnJlcGxhY2UoL1xcYkVcXGIvZywgXCJFdmlsXCIpO1xuXG4gICAgICByZXR1cm4gZm9ybWF0QWxpZ25tZW50QWJicmV2KGNsZWFuZWQpOyAvLyByZXVzZSB5b3VyIG5vcm1hbGl6ZXIgaWYgaXQgZXhpc3RzXG4gICAgfVxuICB9LFxuICAgIHtcbiAgICAgIGNhbGxTaWduOiBcIlRZUEVcIixcbiAgICAgIGpzb25LZXk6IFwidHlwZVwiLFxuICAgICAgY29udjogKHQ6IGFueSk6IHN0cmluZyB8IHVuZGVmaW5lZCA9PiB7XG4gICAgICAgIC8vIDEpIElmIGl0XHUyMDE5cyBhIHNpbXBsZSBzdHJpbmcgY29kZSwgbWFwIGl0XG4gICAgICAgIGlmICh0eXBlb2YgdCA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgIC8vIGRpcmVjdCBsb29rdXBcdTIwMTRpZiBubyBtYXBwaW5nLCBqdXN0IHRpdGxlXHUyMDEwY2FzZSB0aGUgY29kZVxuICAgICAgICAgIHJldHVybiBJVEVNX1RZUEVfTUFQW3RdID8/IGNhcCh0KTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIDIpIElmIGl0XHUyMDE5cyBhbiBvYmplY3Qgd2l0aCBhIC50eXBlIHRhZ1xuICAgICAgICBpZiAodCAmJiB0eXBlb2YgdCA9PT0gXCJvYmplY3RcIikge1xuICAgICAgICAgIGNvbnN0IGNvZGUgPSBTdHJpbmcodC50eXBlIHx8IFwiXCIpLnRvVXBwZXJDYXNlKCk7XG4gICAgICAgICAgLy8gdHJ5IHRoZSBtYXAgZmlyc3RcbiAgICAgICAgICBpZiAoSVRFTV9UWVBFX01BUFtjb2RlXSkge1xuICAgICAgICAgICAgcmV0dXJuIElURU1fVFlQRV9NQVBbY29kZV07XG4gICAgICAgICAgfVxuICAgICAgICAgIC8vIG90aGVyd2lzZSBmYWxsIGJhY2sgdG8gXHUyMDFDQmFzZSAodGFnc1x1MjAyNilcdTIwMUQgc3R5bGVcbiAgICAgICAgICBjb25zdCBiYXNlID0gdC50eXBlID8gY2FwKHQudHlwZSkgOiBcIlVua25vd25cIjtcbiAgICAgICAgICBjb25zdCB0YWdzID0gQXJyYXkuaXNBcnJheSh0LnRhZ3MpID8gdC50YWdzLm1hcChjYXApIDogW107XG4gICAgICAgICAgcmV0dXJuIHRhZ3MubGVuZ3RoID8gYCR7YmFzZX0gKCR7dGFncy5qb2luKFwiLCBcIil9KWAgOiBiYXNlO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgIH1cbiAgICB9LFxuXG5cbiAgLy8gXHUyNTAwXHUyNTAwXHUyNTAwIEl0ZW1zIFx1MjUwMFx1MjUwMFx1MjUwMFxuICB7IGNhbGxTaWduOiBcIlRZUEVcIiwgICBqc29uS2V5OiBcIl9wYXJzZWRUeXBlXCIgfSxcbiAgeyBjYWxsU2lnbjogXCJSQVJJVFlcIiwganNvbktleTogXCJyYXJpdHlcIiwgY29udjogciA9PiB7XG4gICAgICBjb25zdCBzID0gU3RyaW5nKHJ8fFwiXCIpLnRvTG93ZXJDYXNlKCk7XG4gICAgICByZXR1cm4gcyAmJiBzIT09XCJub25lXCIgPyBzWzBdLnRvVXBwZXJDYXNlKCkrcy5zbGljZSgxKSA6IHVuZGVmaW5lZDtcbiAgfX0sXG4gIHtcbiAgICBjYWxsU2lnbjogXCJDT1NUXCIsXG4gICAganNvbktleTogXCJ2YWx1ZVwiLFxuICAgIGNvbnY6IChyYXc6IGFueSkgPT4ge1xuICAgICAgY29uc3QgcyA9IFN0cmluZyhyYXcpLnRyaW0oKS50b0xvd2VyQ2FzZSgpO1xuICAgICAgbGV0IG51bTogbnVtYmVyO1xuXG4gICAgICAvLyBleHBsaWNpdCBjb3BwZXI/XG4gICAgICBpZiAocy5lbmRzV2l0aChcImNwXCIpKSB7XG4gICAgICAgIG51bSA9IHBhcnNlRmxvYXQocyk7XG4gICAgICAgIC8vIGNvbnZlcnQgdG8gZ3Agb25seSBpZiAxMDArIGNwXG4gICAgICAgIHJldHVybiBudW0gPj0gMTAwXG4gICAgICAgICAgPyBgJHtNYXRoLnJvdW5kKChudW0vMTAwKSAqIDEwMCkvMTAwfWdwYFxuICAgICAgICAgIDogYCR7bnVtfWNwYDtcbiAgICAgIH1cblxuICAgICAgLy8gZXhwbGljaXQgc2lsdmVyP1xuICAgICAgaWYgKHMuZW5kc1dpdGgoXCJzcFwiKSkge1xuICAgICAgICBudW0gPSBwYXJzZUZsb2F0KHMpO1xuICAgICAgICAvLyBjb252ZXJ0IHRvIGdwIG9ubHkgaWYgMTArIHNwXG4gICAgICAgIHJldHVybiBudW0gPj0gMTBcbiAgICAgICAgICA/IGAke01hdGgucm91bmQoKG51bS8xMCkgKiAxMDApLzEwMH1ncGBcbiAgICAgICAgICA6IGAke251bX1zcGA7XG4gICAgICB9XG5cbiAgICAgIC8vIGV4cGxpY2l0IGdvbGQ/XG4gICAgICBpZiAocy5lbmRzV2l0aChcImdwXCIpKSB7XG4gICAgICAgIG51bSA9IHBhcnNlRmxvYXQocyk7XG4gICAgICAgIHJldHVybiBgJHtNYXRoLnJvdW5kKG51bSAqIDEwMCkvMTAwfWdwYDtcbiAgICAgIH1cblxuICAgICAgLy8gYmFyZSBudW1iZXIgXHUyMTkyIGFzc3VtZSBjb3BwZXJcbiAgICAgIG51bSA9IHBhcnNlRmxvYXQocykgfHwgMDtcbiAgICAgIHJldHVybiBudW0gPj0gMTAwXG4gICAgICAgID8gYCR7TWF0aC5yb3VuZCgobnVtLzEwMCkgKiAxMDApLzEwMH1ncGBcbiAgICAgICAgOiBgJHtudW19Y3BgO1xuICAgIH1cbiAgfSxcbiAgeyBjYWxsU2lnbjogXCJXRUlHSFRcIiwganNvbktleTogXCJ3ZWlnaHRcIiB9LFxuICB7IGNhbGxTaWduOiBcIk1BR0lDQUxcIiwganNvbktleTogXCJ3b25kcm91c1wiLCBjb252OiAoX3csYWxsKSA9PiAhIWFsbC53b25kcm91cyB8fCAhIWFsbC5yZXFBdHR1bmUgfSxcbiAgeyBjYWxsU2lnbjogXCJWQVJJQU5UXCIsIGpzb25LZXk6IFwiYm9udXNXZWFwb25cIiwgY29udjogYiA9PiB0eXBlb2YgYj09PVwic3RyaW5nXCIgJiYgYi5zdGFydHNXaXRoKFwiK1wiKSB9LFxuICB7IGNhbGxTaWduOiBcIlBST1BFUlRJRVNcIiwganNvbktleTogXCJwcm9wZXJ0eVwiLCBjb252OiBhcnIgPT4gQXJyYXkuaXNBcnJheShhcnIpID8gYXJyLm1hcChwID0+IFBST1BFUlRZX01BUFtwXSB8fCBwKSA6IFtdIH0sXG4gIHsgY2FsbFNpZ246IFwiREFNQUdFXCIsIGpzb25LZXk6IFwiZG1nMVwiLCBjb252OiAoZCxhbGwpID0+IGQgPyBhbGwuZG1nMiA/IGAke2R9IC8gJHthbGwuZG1nMn1gIDogYCR7ZH1gIDogdW5kZWZpbmVkIH0sXG4gIHsgY2FsbFNpZ246IFwiREFNQUdFX1RZUEVTXCIsIGpzb25LZXk6IFwiZG1nVHlwZVwiLCBjb252OiBkdCA9PiBkdCA9PSBudWxsID8gW10gOiBBcnJheS5pc0FycmF5KGR0KSA/IGR0IDogW2R0XSB9LFxuICB7IGNhbGxTaWduOiBcIlJBTkdFXCIsIGpzb25LZXk6IFwicmFuZ2VcIiB9LFxuICB7IGNhbGxTaWduOiBcIlJFTE9BRFwiLCBqc29uS2V5OiBcInJlbG9hZFwiIH0sXG4gIHsgY2FsbFNpZ246IFwiQU1NT19UWVBFXCIsIGpzb25LZXk6IFwiYW1tb1R5cGVcIiwgY29udjogKHY6IGFueSkgPT4gdHlwZW9mIHYgPT09IFwic3RyaW5nXCIgPyB2LnNwbGl0KFwifFwiKVswXS5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIHYuc3BsaXQoXCJ8XCIpWzBdLnNsaWNlKDEpLnRvTG93ZXJDYXNlKCkgOiBcIlwiIH0sXG4gIHsgY2FsbFNpZ246IFwiU1RFQUxUSF9ESVNBRFZBTlRBR0VcIiwganNvbktleTogXCJzdGVhbHRoXCIgfSxcbiAge1xuICAgIGNhbGxTaWduOiBcIkFUVFVORU1FTlRcIixcbiAgICBqc29uS2V5OiBbXCJ3b25kcm91c1wiLCBcInJlcUF0dHVuZVwiLCBcInJlcV9hdHR1bmVcIiwgXCJyZXFBdHR1bmVUYWdzXCJdLFxuICAgIGNvbnY6IChfcmF3LCBhbGxKc29uKSA9PiB7XG4gICAgICBjb25zdCBqID0gYWxsSnNvbiBhcyBhbnk7XG4gICAgICBjb25zdCBoYXNUZXh0ID0gdHlwZW9mIGoucmVxQXR0dW5lID09PSBcInN0cmluZ1wiICYmIGoucmVxQXR0dW5lLnRyaW0oKSAhPT0gXCJcIjtcbiAgICAgIGNvbnN0IGhhc1RhZ3MgPSBBcnJheS5pc0FycmF5KGoucmVxQXR0dW5lVGFncykgJiYgai5yZXFBdHR1bmVUYWdzLmxlbmd0aCA+IDA7XG4gICAgICByZXR1cm4gaGFzVGV4dCB8fCBoYXNUYWdzO1xuICAgIH1cbiAgfSxcbiAge1xuICAgIGNhbGxTaWduOiBcIkFUVFVORV9SRVFcIixcbiAgICBqc29uS2V5OiBcInJlcUF0dHVuZVRhZ3NcIixcbiAgICBjb252OiAodGFnczogYW55W10gPSBbXSwgX2FsbCkgPT4ge1xuICAgICAgY29uc3QgbWFwTGV0dGVyOiBSZWNvcmQ8c3RyaW5nLHN0cmluZz4gPSB7XG4gICAgICAgIEE6IFwiQW55XCIsIFU6IFwiVW5hbGlnbmVkXCIsIE46IFwiTmV1dHJhbFwiLFxuICAgICAgICBMOiBcIkxhd2Z1bFwiLCBDOiBcIkNoYW90aWNcIiwgRzogXCJHb29kXCIsIEU6IFwiRXZpbFwiXG4gICAgICB9O1xuICAgICAgY29uc3QgcmVxczogc3RyaW5nW10gPSBbXTtcblxuICAgICAgZm9yIChjb25zdCB0YWcgb2YgdGFncykge1xuICAgICAgICBpZiAodGFnLmNsYXNzICYmIEFycmF5LmlzQXJyYXkodGFnLmFsaWdubWVudCkpIHtcbiAgICAgICAgICBjb25zdCBjbHMgPSBjYXAodGFnLmNsYXNzKTtcbiAgICAgICAgICBmb3IgKGNvbnN0IGNvZGUgb2YgdGFnLmFsaWdubWVudCkge1xuICAgICAgICAgICAgcmVxcy5wdXNoKGAke21hcExldHRlcltjb2RlXSB8fCBjb2RlfSAke2Nsc31gKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAodGFnLmNsYXNzKSB7XG4gICAgICAgICAgcmVxcy5wdXNoKGNhcCh0YWcuY2xhc3MpKTtcbiAgICAgICAgfSBlbHNlIGlmIChBcnJheS5pc0FycmF5KHRhZy5hbGlnbm1lbnQpKSB7XG4gICAgICAgICAgZm9yIChjb25zdCBjb2RlIG9mIHRhZy5hbGlnbm1lbnQpIHtcbiAgICAgICAgICAgIHJlcXMucHVzaChtYXBMZXR0ZXJbY29kZV0gfHwgY29kZSk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKHRhZy5iYWNrZ3JvdW5kKSB7XG4gICAgICAgICAgY29uc3QgW2JnXSA9IFN0cmluZyh0YWcuYmFja2dyb3VuZCkuc3BsaXQoXCJ8XCIpO1xuICAgICAgICAgIHJlcXMucHVzaChiZy5zcGxpdChcIiBcIikubWFwKGNhcCkuam9pbihcIiBcIikpO1xuICAgICAgICB9IGVsc2UgaWYgKHRhZy5zcGVsbGNhc3RpbmcpIHtcbiAgICAgICAgICByZXFzLnB1c2goXCJTcGVsbGNhc3RlclwiKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIEFycmF5LmZyb20obmV3IFNldChyZXFzKSk7XG4gICAgfVxuICB9LFxuICB7XG4gICAgY2FsbFNpZ246IFwiVkVSTVVOXCIsXG4gICAganNvbktleTogXCJ3b25kcm91c1wiLCAgICAgICAgICAgIC8vIG9yIHdoYXRldmVyIHByb3BlcnR5IHlvdSB1c2UgdG8gZGV0ZWN0IFx1MjAxQ21hZ2ljYWxcdTIwMURcbiAgICBjb252OiAoX3JhdywgYWxsKSA9PiAhIWFsbC53b25kcm91cyB8fCAhIWFsbC5yZXFBdHR1bmVcbiAgfSwgICAgICAgICAgXG4gIC8vIFx1MjUwMFx1MjUwMFx1MjUwMCBPdGhlciBcdTI1MDBcdTI1MDBcdTI1MDBcbiAgeyBjYWxsU2lnbjogXCJEQU1BR0VfUkVTXCIsIGpzb25LZXk6IFwicmVzaXN0XCIsIGNvbnY6IHYgPT4gQXJyYXkuaXNBcnJheSh2KSA/IHYubWFwKGNhcCkgOiBbXSB9LFxuICB7IGNhbGxTaWduOiBcIlJVTEVTRVRcIiwganNvbktleTogXCJfZWRpdGlvbklkXCIgfSxcbiAgXG4gICAgLy8gXHUyNTAwXHUyNTAwXHUyNTAwIEFiaWxpdHlcdTIwMTBzY29yZSBtb2RpZmllcnMgKG9ubHkgZW1pdCB3aGVuIG5vbnplcm8pIFx1MjUwMFx1MjUwMFx1MjUwMFxuICB7XG4gICAgY2FsbFNpZ246IFwiU1RSX01PRFwiLFxuICAgIGpzb25LZXk6ICBcImFiaWxpdHlcIixcbiAgICBjb252OiAoYXJyOiBhbnkpOiBudW1iZXIgfCB1bmRlZmluZWQgPT4ge1xuICAgICAgY29uc3QgdiA9IEFycmF5LmlzQXJyYXkoYXJyKSA/IChhcnJbMF0uc3RyID8/IDApIDogKGFyci5zdHIgPz8gMCk7XG4gICAgICByZXR1cm4gdiAhPT0gMCA/IHYgOiB1bmRlZmluZWQ7XG4gICAgfSxcbiAgfSxcbiAge1xuICAgIGNhbGxTaWduOiBcIkRFWF9NT0RcIixcbiAgICBqc29uS2V5OiAgXCJhYmlsaXR5XCIsXG4gICAgY29udjogKGFycjogYW55KTogbnVtYmVyIHwgdW5kZWZpbmVkID0+IHtcbiAgICAgIGNvbnN0IHYgPSBBcnJheS5pc0FycmF5KGFycikgPyAoYXJyWzBdLmRleCA/PyAwKSA6IChhcnIuZGV4ID8/IDApO1xuICAgICAgcmV0dXJuIHYgIT09IDAgPyB2IDogdW5kZWZpbmVkO1xuICAgIH0sXG4gIH0sXG4gIHtcbiAgICBjYWxsU2lnbjogXCJDT05fTU9EXCIsXG4gICAganNvbktleTogIFwiYWJpbGl0eVwiLFxuICAgIGNvbnY6IChhcnI6IGFueSk6IG51bWJlciB8IHVuZGVmaW5lZCA9PiB7XG4gICAgICBjb25zdCB2ID0gQXJyYXkuaXNBcnJheShhcnIpID8gKGFyclswXS5jb24gPz8gMCkgOiAoYXJyLmNvbiA/PyAwKTtcbiAgICAgIHJldHVybiB2ICE9PSAwID8gdiA6IHVuZGVmaW5lZDtcbiAgICB9LFxuICB9LFxuICB7XG4gICAgY2FsbFNpZ246IFwiSU5UX01PRFwiLFxuICAgIGpzb25LZXk6ICBcImFiaWxpdHlcIixcbiAgICBjb252OiAoYXJyOiBhbnkpOiBudW1iZXIgfCB1bmRlZmluZWQgPT4ge1xuICAgICAgY29uc3QgdiA9IEFycmF5LmlzQXJyYXkoYXJyKSA/IChhcnJbMF0uaW50ID8/IDApIDogKGFyci5pbnQgPz8gMCk7XG4gICAgICByZXR1cm4gdiAhPT0gMCA/IHYgOiB1bmRlZmluZWQ7XG4gICAgfSxcbiAgfSxcbiAge1xuICAgIGNhbGxTaWduOiBcIldJU19NT0RcIixcbiAgICBqc29uS2V5OiAgXCJhYmlsaXR5XCIsXG4gICAgY29udjogKGFycjogYW55KTogbnVtYmVyIHwgdW5kZWZpbmVkID0+IHtcbiAgICAgIGNvbnN0IHYgPSBBcnJheS5pc0FycmF5KGFycikgPyAoYXJyWzBdLndpcyA/PyAwKSA6IChhcnIud2lzID8/IDApO1xuICAgICAgcmV0dXJuIHYgIT09IDAgPyB2IDogdW5kZWZpbmVkO1xuICAgIH0sXG4gIH0sXG4gIHtcbiAgICBjYWxsU2lnbjogXCJDSEFfTU9EXCIsXG4gICAganNvbktleTogIFwiYWJpbGl0eVwiLFxuICAgIGNvbnY6IChhcnI6IGFueSk6IG51bWJlciB8IHVuZGVmaW5lZCA9PiB7XG4gICAgICBjb25zdCB2ID0gQXJyYXkuaXNBcnJheShhcnIpID8gKGFyclswXS5jaGEgPz8gMCkgOiAoYXJyLmNoYSA/PyAwKTtcbiAgICAgIHJldHVybiB2ICE9PSAwID8gdiA6IHVuZGVmaW5lZDtcbiAgICB9LFxuICB9LFxuXG5cbl07XG5cblxuLy8gXHUyNTAwXHUyNTAwXHUyNTAwIEdlbmVyaWMgYnVpbGRlciBcdTI1MDBcdTI1MDBcdTI1MDBcbmV4cG9ydCBmdW5jdGlvbiBidWlsZEZNKGpzb246IGFueSwgZGVmczogRmllbGREZWZbXSk6IEZyb250bWF0dGVyIHtcbiAgY29uc3QgZm06IEZyb250bWF0dGVyID0ge307XG4gIGZvciAoY29uc3QgeyBjYWxsU2lnbiwganNvbktleSwgY29udiB9IG9mIGRlZnMpIHtcbiAgICBjb25zdCBrZXlzID0gQXJyYXkuaXNBcnJheShqc29uS2V5KSA/IGpzb25LZXkgOiBbanNvbktleV07XG4gICAgbGV0IHJhdzogYW55ID0gdW5kZWZpbmVkO1xuXG4gICAgZm9yIChjb25zdCBrZXkgb2Yga2V5cykge1xuICAgICAgaWYgKGpzb25ba2V5XSAhPSBudWxsKSB7XG4gICAgICAgIHJhdyA9IGpzb25ba2V5XTtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHJhdyA9PSBudWxsKSBjb250aW51ZTtcbiAgICBjb25zdCB2YWwgPSBjb252ID8gY29udihyYXcsIGpzb24pIDogcmF3O1xuICAgIGZtW0ZNX0ZJRUxEU1tjYWxsU2lnbl1dID0gdmFsO1xuICB9XG4gIHJldHVybiBmbTtcbn1cblxuXG5cbi8vIGZyb250bWF0dGVyLnRzXG5cbmV4cG9ydCBmdW5jdGlvbiBzZXJpYWxpemVGcm9udG1hdHRlcihcbiAgZm06IEZyb250bWF0dGVyLFxuICBkZWZzPzogRmllbGREZWZbXVxuKTogc3RyaW5nIHtcbiAgY29uc3QgZmlsdGVyZWQ6IFJlY29yZDxzdHJpbmcsIGFueT4gPSB7fTtcblxuICAvLyBkZXRlY3QgaWYgd2UgaGF2ZSBhbnkgYWN0dWFsIGNob2ljZS1saXN0c1xuICBjb25zdCBoYXNTa2lsbENob2ljZSA9IEFycmF5LmlzQXJyYXkoZm1bRk1fRklFTERTLlNLSUxMX0NIT0lDRV9MSVNUXSkgXG4gICAgJiYgKGZtW0ZNX0ZJRUxEUy5TS0lMTF9DSE9JQ0VfTElTVF0gYXMgYW55W10pLmxlbmd0aCA+IDA7XG4gIGNvbnN0IGhhc1Rvb2xDaG9pY2UgPSBBcnJheS5pc0FycmF5KGZtW0ZNX0ZJRUxEUy5UT09MX0NIT0lDRV9MSVNUXSkgXG4gICAgJiYgKGZtW0ZNX0ZJRUxEUy5UT09MX0NIT0lDRV9MSVNUXSBhcyBhbnlbXSkubGVuZ3RoID4gMDtcblxuXG4gIGZvciAoY29uc3QgW2ssIHZdIG9mIE9iamVjdC5lbnRyaWVzKGZtKSkge1xuICAgIC8vIDEpIG5ldmVyIGVtaXQgdW5kZWZpbmVkXG4gICAgaWYgKHYgPT09IHVuZGVmaW5lZCkgY29udGludWU7XG4gICAgLy8gMikgZHJvcCBlbXB0eSBDT01QT05FTlRTLCBUT09MX0NIT0lDRV9MSVNULCBTS0lMTF9DSE9JQ0VfTElTVFxuICAgIGlmIChrID09PSBGTV9GSUVMRFMuQ09NUE9ORU5UUyAmJiBBcnJheS5pc0FycmF5KHYpICYmIHYubGVuZ3RoID09PSAwKSBjb250aW51ZTtcbiAgICBpZiAoXG4gICAgICAoayA9PT0gRk1fRklFTERTLlRPT0xfQ0hPSUNFX0xJU1QgfHwgayA9PT0gRk1fRklFTERTLlNLSUxMX0NIT0lDRV9MSVNUKSAmJlxuICAgICAgQXJyYXkuaXNBcnJheSh2KSAmJiB2Lmxlbmd0aCA9PT0gMFxuICAgICkgY29udGludWU7XG5cbiAgICBmaWx0ZXJlZFtrXSA9IHY7XG4gIH1cblxuICAvLyBidWlsZCB0aGUgbGlzdCBvZiBrZXlzIGluIHRoZSBleGFjdCBvcmRlciBmcm9tIGRlZnNcbiAgbGV0IGtleXNUb0VtaXQ6IHN0cmluZ1tdO1xuICBpZiAoZGVmcykge1xuICAgIC8vIG1hcCBlYWNoIEZpZWxkRGVmIHRvIGl0cyBmcm9udG1hdHRlciBrZXlcbiAgICBjb25zdCB3YW50ZWQgPSBkZWZzLm1hcChkID0+IEZNX0ZJRUxEU1tkLmNhbGxTaWduXSk7XG4gICAgLy8gb25seSBrZWVwIHRoZSBvbmVzIHdlIGFjdHVhbGx5IGhhdmUsIGluIG9yZGVyXG4gICAga2V5c1RvRW1pdCA9IHdhbnRlZC5maWx0ZXIoayA9PiBrIGluIGZpbHRlcmVkKTtcbiAgICAvLyB0aGVuIGFwcGVuZCBhbnkgZXh0cmEga2V5cyB0aGF0IHdlcmVuJ3QgaW4gZGVmc1xuICAgIGtleXNUb0VtaXQucHVzaChcbiAgICAgIC4uLk9iamVjdC5rZXlzKGZpbHRlcmVkKS5maWx0ZXIoayA9PiAha2V5c1RvRW1pdC5pbmNsdWRlcyhrKSlcbiAgICApO1xuICB9IGVsc2Uge1xuICAgIGtleXNUb0VtaXQgPSBPYmplY3Qua2V5cyhmaWx0ZXJlZCk7XG4gIH1cblxuICAvLyBub3cgZW1pdCBZQU1MIGluIHRoYXQgb3JkZXJcbiAgcmV0dXJuIGtleXNUb0VtaXRcbiAgICAubWFwKGsgPT4ge1xuICAgICAgY29uc3QgdiA9IGZpbHRlcmVkW2tdO1xuICAgICAgaWYgKEFycmF5LmlzQXJyYXkodikpIHtcbiAgICAgICAgLy8gSlNPTi5zdHJpbmdpZnkgdG8gaGFuZGxlIHNwYWNlcywgY29tbWFzLCBldGMuXG4gICAgICAgIGNvbnN0IGlubGluZSA9IHYubWFwKGl0ZW0gPT4gSlNPTi5zdHJpbmdpZnkoaXRlbSkpLmpvaW4oXCIsIFwiKTtcbiAgICAgICAgcmV0dXJuIGAke2t9OiBbJHtpbmxpbmV9XWA7XG4gICAgICB9XG4gICAgICBpZiAodHlwZW9mIHYgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgcmV0dXJuIGAke2t9OiBcIiR7dn1cImA7XG4gICAgICB9XG4gICAgICByZXR1cm4gYCR7a306ICR7dn1gO1xuICAgIH0pXG4gICAgLmpvaW4oXCJcXG5cIik7XG59XG5cblxuLy8gXHUyNTAwXHUyNTAwXHUyNTAwIFNraWxsIGhlbHBlcnMgXHUyNTAwXHUyNTAwXHUyNTAwXG5leHBvcnQgY29uc3QgU0tJTExfT1BUSU9OUyA9IFtcbiAgXCJBY3JvYmF0aWNzXCIsXCJBbmltYWwgSGFuZGxpbmdcIixcIkFyY2FuYVwiLFwiQXRobGV0aWNzXCIsXCJEZWNlcHRpb25cIixcIkhpc3RvcnlcIixcbiAgXCJJbnNpZ2h0XCIsXCJJbnRpbWlkYXRpb25cIixcIkludmVzdGlnYXRpb25cIixcIk1lZGljaW5lXCIsXCJOYXR1cmVcIixcIlBlcmNlcHRpb25cIixcbiAgXCJQZXJmb3JtYW5jZVwiLFwiUGVyc3Vhc2lvblwiLFwiUmVsaWdpb25cIixcIlNsZWlnaHQgb2YgSGFuZFwiLFwiU3RlYWx0aFwiLFwiU3Vydml2YWxcIixcbl0gYXMgY29uc3Q7XG5leHBvcnQgdHlwZSBTa2lsbE9wdGlvbiA9IHR5cGVvZiBTS0lMTF9PUFRJT05TW251bWJlcl07XG5leHBvcnQgZnVuY3Rpb24gbm9ybWFsaXplU2tpbGwocmF3OiBzdHJpbmcpOiBTa2lsbE9wdGlvbiB8IG51bGwge1xuICBjb25zdCBsb3dlciA9IHJhdy50cmltKCkudG9Mb3dlckNhc2UoKTtcbiAgcmV0dXJuIFNLSUxMX09QVElPTlMuZmluZChza2lsbCA9PiBza2lsbC50b0xvd2VyQ2FzZSgpID09PSBsb3dlcikgPz8gbnVsbDtcbn1cbmV4cG9ydCBmdW5jdGlvbiBmaWx0ZXJWYWxpZFNraWxscyhyYXdBcnI6IGFueVtdKTogU2tpbGxPcHRpb25bXSB7XG4gIGlmICghQXJyYXkuaXNBcnJheShyYXdBcnIpKSByZXR1cm4gW107XG4gIGNvbnN0IHNlZW4gPSBuZXcgU2V0PFNraWxsT3B0aW9uPigpO1xuICBmb3IgKGNvbnN0IGVudCBvZiByYXdBcnIpIHtcbiAgICBsZXQgY2FuZGlkYXRlOiBzdHJpbmcgfCB1bmRlZmluZWQ7XG4gICAgaWYgKHR5cGVvZiBlbnQgPT09IFwic3RyaW5nXCIpIGNhbmRpZGF0ZSA9IGVudDtcbiAgICBlbHNlIGlmIChlbnQubmFtZSAmJiB0eXBlb2YgZW50Lm5hbWUgPT09IFwic3RyaW5nXCIpIGNhbmRpZGF0ZSA9IGVudC5uYW1lO1xuICAgIGlmIChjYW5kaWRhdGUpIHtcbiAgICAgIGNvbnN0IG5vcm0gPSBub3JtYWxpemVTa2lsbChjYW5kaWRhdGUpO1xuICAgICAgaWYgKG5vcm0pIHNlZW4uYWRkKG5vcm0pO1xuICAgIH1cbiAgfVxuICByZXR1cm4gWy4uLnNlZW5dO1xufVxuXG4vLyBcdTI1MDBcdTI1MDBcdTI1MDAgV2hpY2ggRk1fS0VZUyBlYWNoIHBhcnNlciBzaG91bGQgaW5jbHVkZSBcdTI1MDBcdTI1MDBcdTI1MDBcbmV4cG9ydCBjb25zdCBTUEVMTF9LRVlTOiBGTUtleVtdID0gW1xuICBcIk5BTUVcIixcbiAgXCJMRVZFTFwiLFxuICBcIlNDSE9PTFwiLFxuICBcIkNBU1RJTkdfVElNRVwiLFxuICBcIlNQRUxMX1JBTkdFXCIsXG4gIFwiU0FWSU5HX1RIUk9XU1wiLFxuICBcIkRBTUFHRV9UWVBFXCIsXG4gIFwiRFVSQVRJT05cIixcbiAgXCJWRVJCQUxcIixcbiAgXCJTT01BVElDXCIsXG4gIFwiTUFURVJJQUxcIixcbiAgXCJDT01QT05FTlRTXCIsXG4gIFwiQ09OQ0VOVFJBVElPTlwiLFxuICBcIlNPVVJDRVwiLFxuICBcIlJVTEVTRVRcIlxuXTtcblxuZXhwb3J0IGNvbnN0IFNQRUNJRVNfS0VZUzogRk1LZXlbXSA9IFtcbiAgXCJTUEVDSUVTXCIsXG4gIFwiU0laRVwiLFxuICBcIlNQRUVEXCIsXG4gIFwiTEFOR1VBR0VTXCIsXG4gIFwiVFJBSVRTXCIsXG4gIFwiU0tJTExTXCIsXG4gIFwiU1RSX01PRFwiLFxuICBcIkRFWF9NT0RcIixcbiAgXCJDT05fTU9EXCIsXG4gIFwiSU5UX01PRFwiLFxuICBcIldJU19NT0RcIixcbiAgXCJDSEFfTU9EXCIsXG4gIFwiU0tJTExfQ0hPSUNFX0xJU1RcIixcbiAgXCJUT09MX1BST0ZJQ0lFTkNJRVNcIixcbiAgXCJUT09MX0NIT0lDRV9MSVNUXCIsXG4gIFwiV0VBUE9OX1BST0ZJQ0lFTkNJRVNcIixcbiAgXCJTRU5TRVNcIixcbiAgXCJEQU1BR0VfUkVTXCIsXG4gIFwiU09VUkNFXCIsXG4gIFwiUlVMRVNFVFwiXG5dO1xuXG5leHBvcnQgY29uc3QgSVRFTV9LRVlTOiBGTUtleVtdID0gW1xuICBcIk5BTUVcIixcbiAgXCJUWVBFXCIsXG4gIFwiUkFSSVRZXCIsXG4gIFwiQ09TVFwiLFxuICBcIldFSUdIVFwiLFxuICBcIlBST1BFUlRJRVNcIixcbiAgXCJEQU1BR0VcIixcbiAgXCJEQU1BR0VfVFlQRVNcIixcbiAgXCJSQU5HRVwiLFxuICBcIlJFTE9BRFwiLFxuICBcIkFNTU9fVFlQRVwiLFxuICBcIkFDXCIsXG4gIFwiU1RFQUxUSF9ESVNBRFZBTlRBR0VcIixcbiAgXCJNQUdJQ0FMXCIsXG4gIFwiQVRUVU5FTUVOVFwiLFxuICBcIkFUVFVORV9SRVFcIixcbiAgXCJWRVJNVU5cIixcbiAgXCJTT1VSQ0VcIixcbiAgXCJSVUxFU0VUXCJcbl07XG5cbmV4cG9ydCBjb25zdCBCRVNUSUFSWV9LRVlTOiBGTUtleVtdID0gW1xuICBcIk5BTUVcIixcbiAgXCJTSVpFXCIsXG4gIFwiVFlQRVwiLFxuICBcIkFMSUdOTUVOVFwiLFxuICBcIkFDXCIsXG4gIFwiSFBcIixcbiAgXCJTUEVFRFwiLFxuICBcIlNUUkVOR1RIXCIsXG4gIFwiREVYVEVSSVRZXCIsXG4gIFwiQ09OU1RJVFVUSU9OXCIsXG4gIFwiSU5URUxMSUdFTkNFXCIsXG4gIFwiV0lTRE9NXCIsXG4gIFwiQ0hBUklTTUFcIixcbiAgXCJTQVZJTkdfVEhST1dTXCIsXG4gIFwiU0tJTExTXCIsXG4gIFwiU0VOU0VTXCIsXG4gIFwiTEFOR1VBR0VTXCIsXG4gIFwiQ0hBTExFTkdFX1JBVElOR1wiLFxuICBcIlNPVVJDRVwiLFxuICBcIlJVTEVTRVRcIlxuXTtcblxuZXhwb3J0IGNvbnN0IENMQVNTX0tFWVM6IEZNS2V5W10gPSBbXG4gIFwiTkFNRVwiLFxuICBcIlNQRUxMX0NBU1RfTU9EXCIsXG4gIFwiQVJNT1JfUFJPRklDSUVOQ0lFU1wiLFxuICBcIldFQVBPTl9QUk9GSUNJRU5DSUVTXCIsXG4gIFwiVE9PTF9QUk9GSUNJRU5DSUVTXCIsXG4gIFwiVE9PTF9DSE9JQ0VfTElTVFwiLFxuICBcIlNBVklOR19USFJPV1NcIixcbiAgXCJTS0lMTFNcIixcbiAgXCJTS0lMTF9DSE9JQ0VfTElTVFwiLFxuICBcIlRSQUlUU1wiLFxuICBcIlNPVVJDRVwiLFxuICBcIlJVTEVTRVRcIlxuXTtcblxuZXhwb3J0IGNvbnN0IEJBQ0tHUk9VTkRfS0VZUzogRk1LZXlbXSA9IFtcbiAgXCJOQU1FXCIsXG4gIFwiU0tJTExTXCIsXG4gIFwiU0tJTExfQ0hPSUNFX0xJU1RcIiwgIFxuICBcIlRPT0xfUFJPRklDSUVOQ0lFU1wiLFxuICBcIlRPT0xfQ0hPSUNFX0xJU1RcIixcbiAgXCJUUkFJVFNcIixcbiAgXCJTT1VSQ0VcIixcbiAgXCJSVUxFU0VUXCJcbl07XG5cbmV4cG9ydCBjb25zdCBGRUFUU19LRVlTOiBGTUtleVtdID0gW1xuICBcIlNPVVJDRVwiLFxuICBcIlJVTEVTRVRcIlxuXTtcblxuLy8gXHUyNTAwXHUyNTAwXHUyNTAwIEZpZWxkIHN1YnNldHMgZm9yIGVhY2ggcGFyc2VyIFx1MjUwMFx1MjUwMFx1MjUwMFxuZXhwb3J0IGNvbnN0IFNQRUxMX01FVEFfREVGUzogRmllbGREZWZbXSA9IFNQRUxMX0tFWVMubWFwKGtleSA9PiB7XG4gIGNvbnN0IGRlZiA9IEFMTF9GSUVMRF9ERUZTLmZpbmQoZCA9PiBkLmNhbGxTaWduID09PSBrZXkpO1xuICBpZiAoIWRlZikgdGhyb3cgbmV3IEVycm9yKGBNaXNzaW5nIEZpZWxkRGVmIGZvciBTUEVMTF9LRVkgJHtrZXl9YCk7XG4gIHJldHVybiBkZWY7XG59KTtcbmV4cG9ydCBjb25zdCBTUEVDSUVTX01FVEFfREVGUzogRmllbGREZWZbXSA9IFNQRUNJRVNfS0VZUy5tYXAoa2V5ID0+IHtcbiAgY29uc3QgZGVmID0gQUxMX0ZJRUxEX0RFRlMuZmluZChkID0+IGQuY2FsbFNpZ24gPT09IGtleSk7XG4gIGlmICghZGVmKSB0aHJvdyBuZXcgRXJyb3IoYE1pc3NpbmcgRmllbGREZWYgZm9yIFNQRUNJRVNfS0VZICR7a2V5fWApO1xuICByZXR1cm4gZGVmO1xufSk7XG5leHBvcnQgY29uc3QgSVRFTV9NRVRBX0RFRlM6IEZpZWxkRGVmW10gPSBJVEVNX0tFWVMubWFwKGtleSA9PiB7XG4gIGNvbnN0IGRlZiA9IEFMTF9GSUVMRF9ERUZTLmZpbmQoZCA9PiBkLmNhbGxTaWduID09PSBrZXkpO1xuICBpZiAoIWRlZikgdGhyb3cgbmV3IEVycm9yKGBNaXNzaW5nIEZpZWxkRGVmIGZvciBJVEVNX0tFWSAke2tleX1gKTtcbiAgcmV0dXJuIGRlZjtcbn0pO1xuZXhwb3J0IGNvbnN0IEJFU1RJQVJZX01FVEFfREVGUzogRmllbGREZWZbXSA9IEJFU1RJQVJZX0tFWVMubWFwKGtleSA9PiB7XG4gIGNvbnN0IGRlZiA9IEFMTF9GSUVMRF9ERUZTLmZpbmQoZCA9PiBkLmNhbGxTaWduID09PSBrZXkpO1xuICBpZiAoIWRlZikgdGhyb3cgbmV3IEVycm9yKGBNaXNzaW5nIEZpZWxkRGVmIGZvciBCRVNUSUFSWV9LRVkgJHtrZXl9YCk7XG4gIHJldHVybiBkZWY7XG59KTtcbmV4cG9ydCBjb25zdCBDTEFTU19NRVRBX0RFRlM6IEZpZWxkRGVmW10gPSBDTEFTU19LRVlTLm1hcChrZXkgPT4ge1xuICBjb25zdCBkZWYgPSBBTExfRklFTERfREVGUy5maW5kKGQgPT4gZC5jYWxsU2lnbiA9PT0ga2V5KTtcbiAgaWYgKCFkZWYpIHRocm93IG5ldyBFcnJvcihgTWlzc2luZyBGaWVsZERlZiBmb3IgQ0xBU1NfS0VZICR7a2V5fWApO1xuICByZXR1cm4gZGVmO1xufSk7XG5leHBvcnQgY29uc3QgQkFDS0dST1VORF9NRVRBX0RFRlM6IEZpZWxkRGVmW10gPSBCQUNLR1JPVU5EX0tFWVMubWFwKGtleSA9PiB7XG4gIGNvbnN0IGRlZiA9IEFMTF9GSUVMRF9ERUZTLmZpbmQoZCA9PiBkLmNhbGxTaWduID09PSBrZXkpO1xuICBpZiAoIWRlZikgdGhyb3cgbmV3IEVycm9yKGBNaXNzaW5nIEZpZWxkRGVmIGZvciBCQUNLR1JPVU5EX0tFWSAke2tleX1gKTtcbiAgcmV0dXJuIGRlZjtcbn0pO1xuZXhwb3J0IGNvbnN0IEZFQVRTX01FVEFfREVGUzogRmllbGREZWZbXSA9IEZFQVRTX0tFWVMubWFwKGtleSA9PiB7XG4gIGNvbnN0IGRlZiA9IEFMTF9GSUVMRF9ERUZTLmZpbmQoZCA9PiBkLmNhbGxTaWduID09PSBrZXkpO1xuICBpZiAoIWRlZikgdGhyb3cgbmV3IEVycm9yKGBNaXNzaW5nIEZpZWxkRGVmIGZvciBCQUNLR1JPVU5EX0tFWSAke2tleX1gKTtcbiAgcmV0dXJuIGRlZjtcbn0pOyIsICIvL2RuZCA1ZSAyMDE0IGVkIHNwZWxsc1xuXG5pbXBvcnQgdHlwZSB7IFBhcnNlZE1hcmtkb3duRmlsZSB9IGZyb20gXCJzcmMvdHlwZXNcIjtcbmltcG9ydCB7IHJlcGxhY2U1ZVRhZ3MgfSBmcm9tIFwiLi9oZWxwZXJzL3RhZ1JlcGxhY2VyXCI7XG5pbXBvcnQgeyBnZXRGdWxsU291cmNlTmFtZSB9IGZyb20gXCIuL2hlbHBlcnMvc291cmNlTWFwXCI7XG5pbXBvcnQgeyByZW5kZXJNYXJrZG93blRhYmxlIH0gZnJvbSBcIi4vaGVscGVycy9tYXJrZG93blRhYmxlXCI7XG5pbXBvcnQgeyBmb3JtYXRFbnRyeSB9IGZyb20gXCIuL2hlbHBlcnMvZm9ybWF0RW50cnlcIjtcbmltcG9ydCB7IGJ1aWxkRk0sIHNlcmlhbGl6ZUZyb250bWF0dGVyLCBTUEVMTF9NRVRBX0RFRlMsIEZNX0ZJRUxEUyB9IGZyb20gXCIuL2hlbHBlcnMvZnJvbnRtYXR0ZXJcIjtcblxuXG5leHBvcnQgY29uc3QgU0NIT09MX01BUDogUmVjb3JkPHN0cmluZywgc3RyaW5nPiA9IHtcbiAgQTogXCJBYmp1cmF0aW9uXCIsXG4gIEM6IFwiQ29uanVyYXRpb25cIixcbiAgRDogXCJEaXZpbmF0aW9uXCIsXG4gIEU6IFwiRW5jaGFudG1lbnRcIixcbiAgVjogXCJFdm9jYXRpb25cIixcbiAgSTogXCJJbGx1c2lvblwiLFxuICBOOiBcIk5lY3JvbWFuY3lcIixcbiAgVDogXCJUcmFuc211dGF0aW9uXCIsXG59O1xuXG5mdW5jdGlvbiBvcmRpbmFsKG46IG51bWJlcik6IHN0cmluZyB7XG4gIGNvbnN0IHN1ZmZpeCA9IChuID09PSAxKSA/IFwic3RcIiA6IChuID09PSAyKSA/IFwibmRcIiA6IChuID09PSAzKSA/IFwicmRcIiA6IFwidGhcIjtcbiAgcmV0dXJuIGAke259JHtzdWZmaXh9YDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGZvcm1hdFJhbmdlKHJhbmdlOiBhbnkpOiBzdHJpbmcge1xuICBpZiAoIXJhbmdlKSByZXR1cm4gXCJcIjtcblxuICBpZiAodHlwZW9mIHJhbmdlID09PSBcInN0cmluZ1wiKSByZXR1cm4gcmFuZ2U7XG5cbiAgaWYgKHJhbmdlLnR5cGUgPT09IFwic3BlY2lhbFwiKSByZXR1cm4gXCJTcGVjaWFsXCI7XG4gIGlmIChyYW5nZS50eXBlID09PSBcInBvaW50XCIgJiYgcmFuZ2UuZGlzdGFuY2UpIHtcbiAgICBjb25zdCBkaXN0ID0gcmFuZ2UuZGlzdGFuY2U7XG4gICAgaWYgKGRpc3QudHlwZSA9PT0gXCJ0b3VjaFwiKSByZXR1cm4gXCJUb3VjaFwiO1xuICAgIGlmIChkaXN0LnR5cGUgPT09IFwic2VsZlwiKSByZXR1cm4gXCJTZWxmXCI7XG4gICAgaWYgKGRpc3QudHlwZSA9PT0gXCJzaWdodFwiKSByZXR1cm4gXCJTaWdodFwiO1xuICAgIGlmIChkaXN0LmFtb3VudCkgcmV0dXJuIGAke2Rpc3QuYW1vdW50fSAke2Rpc3QudHlwZX1gO1xuICB9XG5cbiAgcmV0dXJuIFwiVmFyaWVzXCI7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBmb3JtYXRUaW1lKHRpbWU6IGFueVtdKTogc3RyaW5nIHtcbiAgaWYgKCFBcnJheS5pc0FycmF5KHRpbWUpKSByZXR1cm4gXCJcIjtcblxuICByZXR1cm4gdGltZS5tYXAodCA9PiBgJHt0Lm51bWJlcn0gJHt0LnVuaXR9YCkuam9pbihcIiwgXCIpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZm9ybWF0RHVyYXRpb24oZHVyYXRpb246IGFueVtdKTogc3RyaW5nIHtcbiAgaWYgKCFBcnJheS5pc0FycmF5KGR1cmF0aW9uKSkgcmV0dXJuIFwiXCI7XG5cbiAgcmV0dXJuIGR1cmF0aW9uLm1hcChkID0+IHtcbiAgICBpZiAoZC50eXBlID09PSBcImluc3RhbnRcIikgcmV0dXJuIFwiSW5zdGFudGFuZW91c1wiO1xuICAgIGlmIChkLnR5cGUgPT09IFwidGltZWRcIiAmJiBkLmR1cmF0aW9uKSB7XG4gICAgICByZXR1cm4gYCR7ZC5kdXJhdGlvbi5hbW91bnR9ICR7ZC5kdXJhdGlvbi50eXBlfSR7ZC5jb25jZW50cmF0aW9uID8gXCIgKGNvbmNlbnRyYXRpb24pXCIgOiBcIlwifWA7XG4gICAgfVxuICAgIGlmIChkLnR5cGUgPT09IFwicGVybWFuZW50XCIpIHJldHVybiBcIlBlcm1hbmVudFwiO1xuICAgIHJldHVybiBcIlNwZWNpYWxcIjtcbiAgfSkuam9pbihcIiwgXCIpO1xufVxuLy8gaW4gcGFyc2Vycy81ZS1qc29uL3BhcnNlU3BlbGxzRmlsZS50cyAob3Igd2hlcmV2ZXIgZm9ybWF0Q29tcG9uZW50cyBsaXZlcylcblxuZnVuY3Rpb24gZm9ybWF0Q29tcG9uZW50cyhjb21wb25lbnRzOiBhbnkpOiBzdHJpbmcge1xuICBpZiAoIWNvbXBvbmVudHMpIHJldHVybiBcIlwiO1xuXG4gIGNvbnN0IHBhcnRzOiBzdHJpbmdbXSA9IFtdO1xuXG4gIGlmIChjb21wb25lbnRzLnYpIHBhcnRzLnB1c2goXCJWXCIpO1xuICBpZiAoY29tcG9uZW50cy5zKSBwYXJ0cy5wdXNoKFwiU1wiKTtcblxuICBpZiAoY29tcG9uZW50cy5tKSB7XG4gICAgLy8gcHVsbCBvdXQgdGhlIGFjdHVhbCBtYXRlcmlhbCB0ZXh0KHMpXG4gICAgbGV0IG1hdERldGFpbHM6IHN0cmluZ1tdID0gW107XG5cbiAgICBpZiAoQXJyYXkuaXNBcnJheShjb21wb25lbnRzLm0pKSB7XG4gICAgICBtYXREZXRhaWxzID0gY29tcG9uZW50cy5tXG4gICAgICAgIC5tYXAoKGl0ZW06YW55KSA9PlxuICAgICAgICAgIHR5cGVvZiBpdGVtID09PSBcInN0cmluZ1wiXG4gICAgICAgICAgICA/IGl0ZW1cbiAgICAgICAgICAgIDogaXRlbSAmJiB0eXBlb2YgaXRlbS50ZXh0ID09PSBcInN0cmluZ1wiXG4gICAgICAgICAgICA/IGl0ZW0udGV4dFxuICAgICAgICAgICAgOiBudWxsXG4gICAgICAgIClcbiAgICAgICAgLmZpbHRlcigodDphbnkpOiB0IGlzIHN0cmluZyA9PiAhIXQpO1xuICAgIH0gZWxzZSBpZiAodHlwZW9mIGNvbXBvbmVudHMubSA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgbWF0RGV0YWlscyA9IFtjb21wb25lbnRzLm1dO1xuICAgIH0gZWxzZSBpZiAoY29tcG9uZW50cy5tLnRleHQpIHtcbiAgICAgIG1hdERldGFpbHMgPSBbY29tcG9uZW50cy5tLnRleHRdO1xuICAgIH1cblxuICAgIC8vIGJ1aWxkIHRoZSBcdTIwMUNNXHUyMDFEIGVudHJ5LCBhcHBlbmRpbmcgZGV0YWlscyBpZiBhbnlcbiAgICBjb25zdCBtYXRQYXJ0ID1cbiAgICAgIG1hdERldGFpbHMubGVuZ3RoID4gMFxuICAgICAgICA/IGBNICgke21hdERldGFpbHMuam9pbihcIiwgXCIpfSlgXG4gICAgICAgIDogXCJNXCI7XG5cbiAgICBwYXJ0cy5wdXNoKG1hdFBhcnQpO1xuICB9XG5cbiAgcmV0dXJuIHBhcnRzLmpvaW4oXCIsIFwiKTtcbn1cblxuXG5leHBvcnQgZnVuY3Rpb24gcGFyc2VTcGVsbHNGaWxlKGpzb246IGFueSwgZWRpdGlvbklkOiBzdHJpbmcpOiBQYXJzZWRNYXJrZG93bkZpbGVbXSB7XG4gIGlmICghanNvbi5zcGVsbCkgcmV0dXJuIFtdO1xuXG4gIC8vIG1ha2UgZWRpdGlvbklkIGF2YWlsYWJsZSBmb3Igb3VyIFNPVVJDRSBjb252ZXJ0ZXJcbiAgKGpzb24gYXMgYW55KS5fZWRpdGlvbklkID0gZWRpdGlvbklkO1xuXG4gIHJldHVybiBqc29uLnNwZWxsLm1hcCgoc3BlbGw6IGFueSkgPT4ge1xuICAgIC8vIFx1MjAxNCBnYXRoZXIgZGF0YSBmb3IgaGVhZGVyL2JvZHkvZm9vdGVyIGFzIGJlZm9yZSBcdTIwMTRcbiAgICBjb25zdCBzb3VyY2VzID0gc3BlbGwuc291cmNlXG4gICAgICA/IEFycmF5LmlzQXJyYXkoc3BlbGwuc291cmNlKSA/IHNwZWxsLnNvdXJjZSA6IFtzcGVsbC5zb3VyY2VdXG4gICAgICA6IFtcInVua25vd25cIl07XG4gICAgY29uc3QgbmFtZSA9IHNwZWxsLm5hbWU7XG4gICAgY29uc3Qgc2Nob29sID0gU0NIT09MX01BUFtzcGVsbC5zY2hvb2xdID8/IHNwZWxsLnNjaG9vbDtcbiAgICBjb25zdCBsZXZlbCA9IHNwZWxsLmxldmVsO1xuICAgIGNvbnN0IHJhbmdlID0gZm9ybWF0UmFuZ2Uoc3BlbGwucmFuZ2UpO1xuICAgIGNvbnN0IGNhc3RpbmdUaW1lID0gZm9ybWF0VGltZShzcGVsbC50aW1lKTtcbiAgICBjb25zdCBkdXJhdGlvbiA9IGZvcm1hdER1cmF0aW9uKHNwZWxsLmR1cmF0aW9uKTtcbiAgICBjb25zdCBmb3JtYXR0ZWRTb3VyY2VzID0gc291cmNlcy5tYXAoKHM6IHN0cmluZykgPT4gZ2V0RnVsbFNvdXJjZU5hbWUocywgZWRpdGlvbklkKSk7XG5cbiAgICBjb25zdCBhdHRhY2tUeXBlID0gc3BlbGwuYXR0YWNrVHlwZSB8fCBcIlwiO1xuICAgIGNvbnN0IGRhbWFnZVR5cGUgPSBzcGVsbC5kYW1hZ2VJbmZsaWN0Py5bMF0gfHwgXCJUZWxlcG9ydGF0aW9uXCI7XG4gICAgY29uc3Qgcml0dWFsID0gc3BlbGwucml0dWFsID09PSB0cnVlO1xuICAgIGNvbnN0IGNvbmNlbnRyYXRpb24gPSBzcGVsbC5kdXJhdGlvbj8uc29tZSgoZDogYW55KSA9PiBkLmNvbmNlbnRyYXRpb24pID8/IGZhbHNlO1xuICAgIFxuICAgIGNvbnN0IEZNICAgPSBidWlsZEZNKHNwZWxsLCBTUEVMTF9NRVRBX0RFRlMpO1xuICAgIGNvbnN0IHlhbWwgPSBzZXJpYWxpemVGcm9udG1hdHRlcihGTSwgU1BFTExfTUVUQV9ERUZTKTtcbiAgICBjb25zdCBzYXZpbmdUaHJvd3MgPSAoRk1bRk1fRklFTERTLlNBVklOR19USFJPV1NdIGFzIHN0cmluZ1tdKSB8fCBbXTtcbiAgICBjb25zdCBzYXZlQXR0ciA9IEZNW0ZNX0ZJRUxEUy5TQVZFXSBhcyBzdHJpbmcgfCB1bmRlZmluZWQ7XG5cbiAgICAvLyBcdTIwMTQgdGl0bGUvc3VidGl0bGUgYW5kIGJvZHkgbGF5b3V0IFx1MjAxNFxuICAgIGNvbnN0IHNhZmVOYW1lID0gbmFtZS5yZXBsYWNlKC9cXC8vZywgXCItXCIpO1xuICAgIGNvbnN0IHRpdGxlID0gYCMgJHtuYW1lfWA7XG4gICAgY29uc3QgbGV2ZWxMYWJlbCA9XG4gICAgICBsZXZlbCA9PT0gMFxuICAgICAgICA/IGAke3NjaG9vbH0gQ2FudHJpcGBcbiAgICAgICAgOiBgJHtvcmRpbmFsKGxldmVsKX0tbGV2ZWwgJHtzY2hvb2x9IFNwZWxsYDtcbiAgICBjb25zdCBzdWJ0aXRsZSA9IGAjIyMgKiR7bGV2ZWxMYWJlbH0qJHtjb25jZW50cmF0aW9uID8gXCIgKihDb25jZW50cmF0aW9uKSpcIiA6IFwiXCJ9YDtcblxuICAgIGNvbnN0IGhlYWRlckxpbmVzID0gW1xuICAgICAgdGl0bGUsXG4gICAgICBzdWJ0aXRsZSxcbiAgICAgIGAqKkNhc3RpbmcgVGltZToqKiAke2Nhc3RpbmdUaW1lfWAsXG4gICAgICBgKipSYW5nZToqKiAke3JhbmdlfWAsXG4gICAgICBgKipDb21wb25lbnRzOioqICR7Zm9ybWF0Q29tcG9uZW50cyhzcGVsbC5jb21wb25lbnRzKX1gLFxuICAgICAgLi4uKHNhdmluZ1Rocm93cy5sZW5ndGggPyBbYCoqU2F2aW5nIFRocm93OioqICR7c2F2aW5nVGhyb3dzLmpvaW4oXCIsIFwiKX1gXSA6IFtdKSxcbiAgICAgIGAqKkR1cmF0aW9uOioqICR7ZHVyYXRpb259YCxcbiAgICBdO1xuXG4gICAgY29uc3QgYm9keUxpbmVzID0gW1xuICAgICAgLi4uKChzcGVsbC5lbnRyaWVzID8/IFtdKS5tYXAoKGU6IGFueSkgPT4gZm9ybWF0RW50cnkoZSkpKSxcbiAgICAgIC4uLigoc3BlbGwuZW50cmllc0hpZ2hlckxldmVsID8/IFtdKS5tYXAoKGU6IGFueSkgPT4gZm9ybWF0RW50cnkoZSkpKSxcbiAgICBdO1xuXG4gICAgY29uc3QgZm9vdGVyTGluZXMgPSBbXG4gICAgICBgLS0tYCxcbiAgICAgIGAqKlNvdXJjZToqKiAke2Zvcm1hdHRlZFNvdXJjZXMuam9pbihcIiwgXCIpfWAsXG4gICAgXTtcblxuICAgIC8vIFx1MjAxNCBhc3NlbWJsZSB0aGUgbm90ZSB3aXRoIFlBTUwgZnJvbnRtYXR0ZXIgXHUyMDE0XG4gICAgcmV0dXJuIHtcbiAgICAgIHBhdGg6IGAke3NhZmVOYW1lfS5tZGAsXG4gICAgICBjb250ZW50OiBbXG4gICAgICAgIGAtLS1cXG4ke3lhbWx9XFxuLS0tYCxcbiAgICAgICAgaGVhZGVyTGluZXMuam9pbihcIlxcblwiKSxcbiAgICAgICAgYGAsXG4gICAgICAgIGJvZHlMaW5lcy5qb2luKFwiXFxuXFxuXCIpLFxuICAgICAgICBgYCxcbiAgICAgICAgZm9vdGVyTGluZXMuam9pbihcIlxcblwiKSxcbiAgICAgIF0uam9pbihcIlxcblwiKSxcbiAgICB9O1xuICB9KTtcbn1cblxuIiwgIi8vIGRuZCA1ZSAyMDE0IHNwZWNpZXNcbmltcG9ydCB0eXBlIHsgUGFyc2VkTWFya2Rvd25GaWxlIH0gZnJvbSBcIi4uLy4uL3R5cGVzXCI7XG5pbXBvcnQgeyByZXBsYWNlNWVUYWdzIH0gZnJvbSBcIi4vaGVscGVycy90YWdSZXBsYWNlclwiO1xuaW1wb3J0IHtcbiAgYnVpbGRGTSxcbiAgc2VyaWFsaXplRnJvbnRtYXR0ZXIsXG4gIEZNX0ZJRUxEUyxcbiAgU1BFQ0lFU19NRVRBX0RFRlMsXG4gIFNJWkVfTUFQLFxufSBmcm9tIFwiLi9oZWxwZXJzL2Zyb250bWF0dGVyXCI7XG5pbXBvcnQgeyByZW5kZXJNYXJrZG93blRhYmxlIH0gZnJvbSBcIi4vaGVscGVycy9tYXJrZG93blRhYmxlXCI7XG5pbXBvcnQgeyBmb3JtYXRFbnRyeSB9IGZyb20gXCIuL2hlbHBlcnMvZm9ybWF0RW50cnlcIjtcblxuZnVuY3Rpb24gc2x1ZyhuYW1lOiBzdHJpbmcpOiBzdHJpbmcge1xuICByZXR1cm4gbmFtZVxuICAgIC5yZXBsYWNlKC87L2csIFwiOlwiKSAgICAgICAvLyBzZW1pY29sb24gXHUyMTkyIGRhc2hcbiAgICAucmVwbGFjZSgvW1xcLzpcIl0vZywgXCI6XCIpICAvLyBzbGFzaCwgY29sb24sIHF1b3RlIFx1MjE5MiBkYXNoXG4gICAgLnRyaW0oKTtcbn1cblxuY29uc3QgQkxPQ0tFRF9UUkFJVFMgPSBbXCJBZ2VcIiwgXCJTaXplXCIsIFwiTGFuZ3VhZ2VzXCIsIFwiQ3JlYXR1cmUgVHlwZVwiLCBcIlNwZWVkXCJdO1xuXG4vLyBFeHRyYWN0IHRoZSBkaXNwbGF5IHRleHQgZnJvbSBhIHdpa2lsaW5rIGxpa2UgW1tGaWxlI0hlYWRlcnxEaXNwbGF5XV1cbmZ1bmN0aW9uIGxpbmtEaXNwbGF5KHN0cjogc3RyaW5nKTogc3RyaW5nIHtcbiAgaWYgKHR5cGVvZiBzdHIgIT09IFwic3RyaW5nXCIpIHJldHVybiBTdHJpbmcoc3RyID8/IFwiXCIpO1xuICBjb25zdCBtID0gc3RyLm1hdGNoKC9eXFxbXFxbKC4rPylcXF1cXF0kLyk7XG4gIGlmICghbSkgcmV0dXJuIHN0cjtcbiAgY29uc3QgaW5uZXIgPSBtWzFdO1xuICBjb25zdCBwaXBlID0gaW5uZXIuc3BsaXQoXCJ8XCIpO1xuICBpZiAocGlwZS5sZW5ndGggPiAxKSByZXR1cm4gcGlwZVsxXS50cmltKCk7ICAgICAgICAgLy8gLi4ufERpc3BsYXlcbiAgY29uc3QgaGFzaCA9IGlubmVyLnNwbGl0KFwiI1wiKTtcbiAgaWYgKGhhc2gubGVuZ3RoID4gMSkgcmV0dXJuIGhhc2hbMV0udHJpbSgpOyAgICAgICAgIC8vIEZpbGUjSGVhZGVyXG4gIHJldHVybiBpbm5lci50cmltKCk7XG59XG5cbi8vIE5vcm1hbGl6ZSBoZWFkaW5nIG5hbWVzIGZvciBjb21wYXJpc29uIGFuZCBsb29rdXBcbmZ1bmN0aW9uIG5vcm1OYW1lKG46IHN0cmluZyk6IHN0cmluZyB7XG4gIHJldHVybiBTdHJpbmcobiA/PyBcIlwiKVxuICAgIC5yZXBsYWNlKC9eRmVhdHVyZTpcXHMqL2ksIFwiXCIpXG4gICAgLnJlcGxhY2UoL1xccysvZywgXCIgXCIpXG4gICAgLnRyaW0oKVxuICAgIC50b0xvd2VyQ2FzZSgpO1xufVxuXG4vLyBGaW5kIGEgbmFtZWQgZW50cnkgZWl0aGVyIGF0IHRvcCBsZXZlbCBvciBvbmUgbGV2ZWwgbmVzdGVkIHVuZGVyIGVudHJpZXNbXVxuZnVuY3Rpb24gZmluZEVudHJ5QnlOYW1lKGVudHJpZXM6IGFueVtdIHwgdW5kZWZpbmVkLCBkaXNwbGF5OiBzdHJpbmcpOiBhbnkgfCBudWxsIHtcbiAgaWYgKCFBcnJheS5pc0FycmF5KGVudHJpZXMpKSByZXR1cm4gbnVsbDtcbiAgY29uc3QgdGFyZ2V0ID0gbm9ybU5hbWUoZGlzcGxheSk7XG5cbiAgLy8gZGlyZWN0IGhpdFxuICBjb25zdCBkaXJlY3QgPSBlbnRyaWVzLmZpbmQoZSA9PiB0eXBlb2YgZT8ubmFtZSA9PT0gXCJzdHJpbmdcIiAmJiBub3JtTmFtZShlLm5hbWUpID09PSB0YXJnZXQpO1xuICBpZiAoZGlyZWN0KSByZXR1cm4gZGlyZWN0O1xuXG4gIC8vIG9uZSBsZXZlbCBuZXN0ZWRcbiAgZm9yIChjb25zdCBlIG9mIGVudHJpZXMpIHtcbiAgICBpZiAoQXJyYXkuaXNBcnJheShlPy5lbnRyaWVzKSkge1xuICAgICAgY29uc3Qgc3ViID0gZS5lbnRyaWVzLmZpbmQoKHM6IGFueSkgPT4gdHlwZW9mIHM/Lm5hbWUgPT09IFwic3RyaW5nXCIgJiYgbm9ybU5hbWUocy5uYW1lKSA9PT0gdGFyZ2V0KTtcbiAgICAgIGlmIChzdWIpIHJldHVybiBzdWI7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIG51bGw7XG59XG5cblxuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlU3BlY2llc0ZpbGUoXG4gIGpzb246IHsgcmFjZTogYW55W107IHN1YnJhY2U/OiBhbnlbXTsgX2VkaXRpb25JZD86IHN0cmluZyB9LFxuICBlZGl0aW9uSWQ6IHN0cmluZ1xuKTogUGFyc2VkTWFya2Rvd25GaWxlW10ge1xuICBpZiAoIUFycmF5LmlzQXJyYXkoanNvbi5yYWNlKSkgcmV0dXJuIFtdO1xuICBqc29uLl9lZGl0aW9uSWQgPSBlZGl0aW9uSWQ7XG5cbiAgLy8gMSkgRmlsdGVyIG91dCByZXByaW50c1xuICBjb25zdCByYXdWYXJpYW50cyA9IGpzb24ucmFjZS5maWx0ZXIoKHI6IGFueSkgPT5cbiAgICAhKFwicmVwcmludGVkQXNcIiBpbiByKSAmJlxuICAgICEvXFwoKD86S2FsYWRlc2h8WmVuZGlrYXJ8QW1vbmtoZXR8SW5uaXN0cmFkfEl4YWxhbilcXCkkLy50ZXN0KHIubmFtZSlcbiAgKTtcblxuICAvLyAyKSBHcm91cCBieSByYWNlIG5hbWVcbiAgY29uc3QgYnlOYW1lID0gbmV3IE1hcDxzdHJpbmcsIGFueVtdPigpO1xuICBmb3IgKGNvbnN0IHIgb2YgcmF3VmFyaWFudHMpIHtcbiAgICBjb25zdCBsaXN0ID0gYnlOYW1lLmdldChyLm5hbWUpID8/IFtdO1xuICAgIGxpc3QucHVzaChyKTtcbiAgICBieU5hbWUuc2V0KHIubmFtZSwgbGlzdCk7XG4gIH1cblxuICAvLyAzKSBBbGwgc3VicmFjZXMgYXJyYXlcbiAgY29uc3Qgc3VicmFjZXNMaXN0ID0gQXJyYXkuaXNBcnJheShqc29uLnN1YnJhY2UpID8ganNvbi5zdWJyYWNlIDogW107XG5cbiAgY29uc3Qgb3V0OiBQYXJzZWRNYXJrZG93bkZpbGVbXSA9IFtdO1xuXG4gIC8vIDQpIE1haW4gbG9vcCBvdmVyIGVhY2ggc3BlY2llc1xuICBmb3IgKGNvbnN0IFtyYWNlTmFtZSwgcmFjZVZhcmlhbnRzXSBvZiBieU5hbWUuZW50cmllcygpKSB7XG4gICAgY29uc3Qgc2FmZU5hbWUgPSBzbHVnKHJhY2VOYW1lKTtcblxuICAgIC8vIHBpY2sgdGhlIFx1MjAxQ2Z1bGxlc3RcdTIwMUQgdmFyaWFudCBhcyBwcmltYXJ5XG4gICAgY29uc3QgcHJpbWFyeSA9IHJhY2VWYXJpYW50cy5yZWR1Y2UoXG4gICAgICAoYmVzdCwgY3VyKSA9PlxuICAgICAgICBPYmplY3Qua2V5cyhjdXIpLmxlbmd0aCA+IE9iamVjdC5rZXlzKGJlc3QpLmxlbmd0aCA/IGN1ciA6IGJlc3QsXG4gICAgICByYWNlVmFyaWFudHNbMF1cbiAgICApO1xuXG4gICAgLy8gb25lXHUyMDEwb2ZmOiBncmFmdCBIdW1hbiBhYmlsaXR5IGlmIG1pc3NpbmdcbiAgICBpZiAoIXByaW1hcnkuYWJpbGl0eSkge1xuICAgICAgY29uc3QgaHVtYW5FbnRyeSA9IHN1YnJhY2VzTGlzdC5maW5kKChzcjogYW55KSA9PlxuICAgICAgICBzci5yYWNlTmFtZSA9PT0gcmFjZU5hbWUgJiZcbiAgICAgICAgc3IucmFjZVNvdXJjZSA9PT0gcHJpbWFyeS5zb3VyY2UgJiZcbiAgICAgICAgIShcIm5hbWVcIiBpbiBzcikgJiZcbiAgICAgICAgQXJyYXkuaXNBcnJheShzci5hYmlsaXR5KVxuICAgICAgKTtcbiAgICAgIGlmIChodW1hbkVudHJ5KSBwcmltYXJ5LmFiaWxpdHkgPSBodW1hbkVudHJ5LmFiaWxpdHk7XG4gICAgfVxuXG4gICAgLy8gYnVpbGQgZnJvbnRtYXR0ZXJcbiAgICBjb25zdCBmbSA9IGJ1aWxkRk0ocHJpbWFyeSwgU1BFQ0lFU19NRVRBX0RFRlMpO1xuICAgIGNvbnN0IHNlbnNlczogc3RyaW5nW10gPSBbXTtcbiAgICBpZiAocHJpbWFyeS5kYXJrdmlzaW9uKSAgc2Vuc2VzLnB1c2goYERhcmt2aXNpb24gJHtwcmltYXJ5LmRhcmt2aXNpb259IGZ0LmApO1xuICAgIGlmIChwcmltYXJ5LmJsaW5kc2lnaHQpICBzZW5zZXMucHVzaChgQmxpbmRzaWdodCAke3ByaW1hcnkuYmxpbmRzaWdodH0gZnQuYCk7XG4gICAgaWYgKHByaW1hcnkudHJlbW9yc2Vuc2UpIHNlbnNlcy5wdXNoKGBUcmVtb3JzZW5zZSAke3ByaW1hcnkudHJlbW9yc2Vuc2V9IGZ0LmApO1xuICAgIGlmIChwcmltYXJ5LnRydWVzaWdodCkgICBzZW5zZXMucHVzaChgVHJ1ZXNpZ2h0ICR7cHJpbWFyeS50cnVlc2lnaHR9IGZ0LmApO1xuICAgIGlmIChzZW5zZXMubGVuZ3RoKSBmbS5zZW5zZXMgPSBzZW5zZXM7XG4gICAgaWYgKEFycmF5LmlzQXJyYXkoZm0udHJhaXRzKSkge1xuICAgICAgZm0udHJhaXRzID0gZm0udHJhaXRzLmZpbHRlcih0ID0+ICFCTE9DS0VEX1RSQUlUUy5pbmNsdWRlcyh0KSk7XG4gICAgfVxuICAgIGNvbnN0IHlhbWwgPSBzZXJpYWxpemVGcm9udG1hdHRlcihmbSwgU1BFQ0lFU19NRVRBX0RFRlMpO1xuXG4gICAgLy8gYnVpbGQgc3BlY2llcyBib2R5XG4gICAgY29uc3QgbGluZXM6IHN0cmluZ1tdID0gW107XG4gICAgbGluZXMucHVzaChgIyAke3JhY2VOYW1lfWAsIGAjIyBTdGF0c2ApO1xuXG4gICAgLy8gU2l6ZVxuICAgIGNvbnN0IHNpemUgPSBBcnJheS5pc0FycmF5KHByaW1hcnkuc2l6ZSlcbiAgICAgID8gcHJpbWFyeS5zaXplLm1hcCgoczogc3RyaW5nKSA9PiBTSVpFX01BUFtzXSB8fCBzKS5qb2luKFwiL1wiKVxuICAgICAgOiBTSVpFX01BUFtwcmltYXJ5LnNpemVdID8/IHByaW1hcnkuc2l6ZTtcbiAgICBsaW5lcy5wdXNoKGAqKlNpemU6KiogJHtzaXplfWApO1xuXG4gICAgLy8gU3BlZWRcbiAgICBjb25zdCBzcGVlZCA9IHR5cGVvZiBwcmltYXJ5LnNwZWVkID09PSBcIm51bWJlclwiXG4gICAgICA/IHByaW1hcnkuc3BlZWRcbiAgICAgIDogcHJpbWFyeS5zcGVlZD8ud2FsayA/PyBwcmltYXJ5LnNwZWVkPy5iYXNlID8/IDA7XG4gICAgbGluZXMucHVzaChgKipTcGVlZDoqKiAke3NwZWVkfSBmdC4gd2Fsa2luZ2ApO1xuXG4gICAgLy8gQWJpbGl0aWVzXG4gICAgY29uc3Qga2lkcyA9IHN1YnJhY2VzTGlzdC5maWx0ZXIoc3IgPT5cbiAgICAgIHNyLm5hbWUgJiYgc3IucmFjZU5hbWUgPT09IHJhY2VOYW1lICYmIHNyLnJhY2VTb3VyY2UgPT09IHByaW1hcnkuc291cmNlXG4gICAgKTtcbiAgICBjb25zdCByYXdBYmlsaXR5ID0gQXJyYXkuaXNBcnJheShwcmltYXJ5LmFiaWxpdHkpXG4gICAgICA/IHByaW1hcnkuYWJpbGl0eVxuICAgICAgOiBBcnJheS5pc0FycmF5KGtpZHNbMF0/LmFiaWxpdHkpID8ga2lkc1swXS5hYmlsaXR5IDogW107XG4gICAgaWYgKEFycmF5LmlzQXJyYXkocmF3QWJpbGl0eSkgJiYgcmF3QWJpbGl0eS5sZW5ndGgpIHtcbiAgICAgIGNvbnN0IGJvbnVzZXMgPSB7IHN0cjowLGRleDowLGNvbjowLGludDowLHdpczowLGNoYTowIH07XG4gICAgICBsZXQgY2hvb3NlT3B0OiBhbnkgPSBudWxsO1xuICAgICAgZm9yIChjb25zdCBvYmogb2YgcmF3QWJpbGl0eSkge1xuICAgICAgICBpZiAoXCJjaG9vc2VcIiBpbiBvYmopIGNob29zZU9wdCA9IG9iai5jaG9vc2U7XG4gICAgICAgIGVsc2UgZm9yIChjb25zdCBbayx2XSBvZiBPYmplY3QuZW50cmllcyhvYmopKSAoYm9udXNlcyBhcyBhbnkpW2tdICs9IHYgYXMgbnVtYmVyO1xuICAgICAgfVxuICAgICAgY29uc3QgcGFpcnMgPSBPYmplY3QuZW50cmllcyhib251c2VzKSBhcyBbc3RyaW5nLG51bWJlcl1bXTtcbiAgICAgIGNvbnN0IHBhcnRzID0gcGFpcnMuZmlsdGVyKChbLHZdKT0+diE9PTApLm1hcCgoW2ssdl0pPT5gJHtrLnRvVXBwZXJDYXNlKCl9ICR7dj49MD9cIitcIjpcIlwifSR7dn1gKTtcbiAgICAgIGlmIChjaG9vc2VPcHQ/LmNvdW50ICYmIEFycmF5LmlzQXJyYXkoY2hvb3NlT3B0LmZyb20pKSB7XG4gICAgICAgIHBhcnRzLnB1c2goYENIT09TRSAke2Nob29zZU9wdC5jb3VudH0gZnJvbSAke2Nob29zZU9wdC5mcm9tLm1hcCgoczpzdHJpbmcpPT5zLnRvVXBwZXJDYXNlKCkpLmpvaW4oXCIsIFwiKX1gKTtcbiAgICAgIH1cbiAgICAgIGlmIChwYXJ0cy5sZW5ndGgpIGxpbmVzLnB1c2goYCoqQWJpbGl0eSBTY29yZXM6KiogJHtwYXJ0cy5qb2luKFwiLCBcIil9YCk7XG4gICAgfVxuXG4gICAgLy8gTGFuZ3VhZ2VzXG4gICAgY29uc3QgbGFuZ3MgPSBmbS5sYW5ndWFnZXMgYXMgc3RyaW5nW118dW5kZWZpbmVkO1xuICAgIGlmIChsYW5ncz8ubGVuZ3RoKSBsaW5lcy5wdXNoKGAqKkxhbmd1YWdlczoqKiAke2xhbmdzLmpvaW4oXCIsIFwiKX1gKTtcblxuICAgIC8vIFNraWxsc1xuICAgIGlmIChBcnJheS5pc0FycmF5KHByaW1hcnkuc2tpbGxQcm9maWNpZW5jaWVzKSkge1xuICAgICAgY29uc3Qgc2tpbGxMYWJlbHM6IHN0cmluZ1tdID0gW107XG4gICAgICBmb3IgKGNvbnN0IGUgb2YgcHJpbWFyeS5za2lsbFByb2ZpY2llbmNpZXMgYXMgYW55W10pIHtcbiAgICAgICAgaWYgKGUuY2hvb3NlPy5mcm9tKSB7XG4gICAgICAgICAgc2tpbGxMYWJlbHMucHVzaChgQ2hvb3NlIGZyb206ICR7ZS5jaG9vc2UuZnJvbS5tYXAoKHM6c3RyaW5nKT0+cy5jaGFyQXQoMCkudG9VcHBlckNhc2UoKStzLnNsaWNlKDEpKS5qb2luKFwiLCBcIil9YCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY29uc3QgdmFsID0gZS5wcm9maWNpZW5jeSA/PyBlLm5hbWUgPz8gZTtcbiAgICAgICAgICBpZiAodHlwZW9mIHZhbCA9PT0gXCJzdHJpbmdcIikgc2tpbGxMYWJlbHMucHVzaCh2YWwuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkrdmFsLnNsaWNlKDEpKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKHNraWxsTGFiZWxzLmxlbmd0aCkgbGluZXMucHVzaChgKipTa2lsbCBQcm9maWNpZW5jaWVzOioqICR7c2tpbGxMYWJlbHMuam9pbihcIjsgXCIpfWApO1xuICAgIH1cblxuICAgIC8vIFRvb2wgLyBXZWFwb24gLyBBcm1vclxuICAgIGNvbnN0IHRwID0gZm1bRk1fRklFTERTLlRPT0xfUFJPRklDSUVOQ0lFU10gYXMgc3RyaW5nW118dW5kZWZpbmVkO1xuICAgIGNvbnN0IHdwID0gZm1bRk1fRklFTERTLldFQVBPTl9QUk9GSUNJRU5DSUVTXSBhcyBzdHJpbmdbXXx1bmRlZmluZWQ7XG4gICAgY29uc3QgYXAgPSBmbVtGTV9GSUVMRFMuQVJNT1JfUFJPRklDSUVOQ0lFU10gYXMgc3RyaW5nW118dW5kZWZpbmVkO1xuICAgIGlmICh0cD8ubGVuZ3RoKSBsaW5lcy5wdXNoKGAqKlRvb2wgUHJvZmljaWVuY2llczoqKiAke3RwLmpvaW4oXCIsIFwiKX1gKTtcbiAgICBpZiAod3A/Lmxlbmd0aCkgbGluZXMucHVzaChgKipXZWFwb24gUHJvZmljaWVuY2llczoqKiAke3dwLmpvaW4oXCIsIFwiKX1gKTtcbiAgICBpZiAoYXA/Lmxlbmd0aCkgbGluZXMucHVzaChgKipBcm1vciBQcm9maWNpZW5jaWVzOioqICR7YXAuam9pbihcIiwgXCIpfWApO1xuXG4gICAgLy8gVHJhaXRzXG4gICAgbGluZXMucHVzaChgIyMgVHJhaXRzYCk7XG4gICAgICAgIGNvbnN0IHNlZW4gPSBuZXcgU2V0PHN0cmluZz4oKTtcbiAgICBmb3IgKGNvbnN0IHRyYWl0IG9mIChmbS50cmFpdHMgYXMgc3RyaW5nW10gfHwgW10pKSB7XG4gICAgICBjb25zdCB0aXRsZSA9IGxpbmtEaXNwbGF5KHRyYWl0KTsgICAgICAgICAvLyBwbGFpbiBoZWFkZXIgdGV4dCwgbm8gbGlua1xuICAgICAgbGluZXMucHVzaChgIyMjIyMgJHt0aXRsZX1gKTtcblxuICAgICAgY29uc3QgZW50ID0gZmluZEVudHJ5QnlOYW1lKHByaW1hcnkuZW50cmllcywgdGl0bGUpO1xuICAgICAgaWYgKGVudD8uZW50cmllcykge1xuICAgICAgICBlbnQuZW50cmllcy5mb3JFYWNoKChzdWI6IGFueSwgaWR4OiBudW1iZXIpID0+IHtcbiAgICAgICAgICBsZXQgYmxrOiBzdHJpbmcgfCB1bmRlZmluZWQ7XG4gICAgICAgICAgaWYgKHN1Yi50eXBlID09PSBcInRhYmxlXCIpIHtcbiAgICAgICAgICAgIGJsayA9IHJlbmRlck1hcmtkb3duVGFibGUoc3ViKTtcbiAgICAgICAgICB9IGVsc2UgaWYgKHN1Yi50eXBlID09PSBcImxpc3RcIikge1xuICAgICAgICAgICAgYmxrID0gc3ViLml0ZW1zXG4gICAgICAgICAgICAgIC5tYXAoKGl0OiBhbnkpID0+ICh0eXBlb2YgaXQgPT09IFwic3RyaW5nXCIgPyBgLSAke3JlcGxhY2U1ZVRhZ3MoaXQpfWAgOiBgLSAke2l0Lm5hbWV9YCkpXG4gICAgICAgICAgICAgIC5qb2luKFwiXFxuXCIpO1xuICAgICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIHN1YiA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgYmxrID0gcmVwbGFjZTVlVGFncyhzdWIpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoYmxrICYmICFzZWVuLmhhcyhibGspKSB7XG4gICAgICAgICAgICBsaW5lcy5wdXNoKGJsayk7XG4gICAgICAgICAgICBzZWVuLmFkZChibGspO1xuICAgICAgICAgICAgaWYgKGVudC5lbnRyaWVzLmxlbmd0aCA+IDEgJiYgaWR4IDwgZW50LmVudHJpZXMubGVuZ3RoIC0gMSkgbGluZXMucHVzaChcIlwiKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cblxuXG4gICAgLy8gXHUyNTAwXHUyNTAwXHUyNTAwIE5vdyBicmFuY2ggb24gc3VicmFjZXMgXHUyNTAwXHUyNTAwXHUyNTAwXG4gICAgY29uc3Qgc3VicyA9IGtpZHM7ICAvLyBhbHJlYWR5IGZpbHRlcmVkXG4gICAgaWYgKHN1YnMubGVuZ3RoKSB7XG4gICAgICAvLyAxKSBtYWluIGZpbGUgaW4gZm9sZGVyXG4gICAgICBvdXQucHVzaCh7XG4gICAgICAgIHBhdGg6IGBTcGVjaWVzLyR7c2FmZU5hbWV9LyR7c2FmZU5hbWV9Lm1kYCxcbiAgICAgICAgY29udGVudDogYC0tLVxcbiR7eWFtbH1cXG4tLS1cXG5cXG4ke2xpbmVzLmpvaW4oXCJcXG5cIil9YCxcbiAgICAgIH0pO1xuXG4gICAgICAvLyAyKSBlYWNoIHN1YnNwZWNpZXNcbiAgICAgIGNvbnN0IHN1YkZvbGRlciA9IGBTcGVjaWVzLyR7c2FmZU5hbWV9L1JhY2VzYDtcbiAgICAgIGZvciAoY29uc3Qgc3Igb2Ygc3VicykgeyBcbiAgICAgICAgLy8gdHVybiBzZW1pY29sb25zIFx1MjE5MiBjb2xvbnNcbiAgICAgICAgY29uc3QgZGlzcGxheSA9IHNyLm5hbWUucmVwbGFjZSgvOy9nLCBcIjpcIik7XG4gICAgICAgIGNvbnN0IHN1YkxpbmVzOiBzdHJpbmdbXSA9IFtgIyAke2Rpc3BsYXl9YF07XG5cbiAgICAgICAgLy8gY29weSBTdGF0cyBibG9jayBpZiB5b3UgbGlrZTpcbiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoc3IuYWJpbGl0eSkpIHtcbiAgICAgICAgICBjb25zdCBib251c2VzID0geyBzdHI6MCxkZXg6MCxjb246MCxpbnQ6MCx3aXM6MCxjaGE6MCB9O1xuICAgICAgICAgIGxldCBjaG9vc2VPcHQ6YW55ID0gbnVsbDtcbiAgICAgICAgICBmb3IgKGNvbnN0IG9iaiBvZiBzci5hYmlsaXR5KSB7XG4gICAgICAgICAgICBpZiAoXCJjaG9vc2VcIiBpbiBvYmopIGNob29zZU9wdCA9IG9iai5jaG9vc2U7XG4gICAgICAgICAgICBlbHNlIGZvciAoY29uc3QgW2ssdl0gb2YgT2JqZWN0LmVudHJpZXMob2JqKSkgKGJvbnVzZXMgYXMgYW55KVtrXSs9diBhcyBudW1iZXI7XG4gICAgICAgICAgfVxuICAgICAgICAgIGNvbnN0IHBhaXJzID0gT2JqZWN0LmVudHJpZXMoYm9udXNlcykgYXMgW3N0cmluZyxudW1iZXJdW107XG4gICAgICAgICAgY29uc3QgcGFydHMgPSBwYWlycy5maWx0ZXIoKFssdl0pPT52IT09MCkubWFwKChbayx2XSk9PmAke2sudG9VcHBlckNhc2UoKX0gJHt2Pj0wP1wiK1wiOlwiXCJ9JHt2fWApO1xuICAgICAgICAgIGlmIChjaG9vc2VPcHQ/LmNvdW50KSBwYXJ0cy5wdXNoKGBDSE9PU0UgJHtjaG9vc2VPcHQuY291bnR9IGZyb20gJHsoY2hvb3NlT3B0LmZyb20gYXMgc3RyaW5nW10pLm1hcChzPT5zLnRvVXBwZXJDYXNlKCkpLmpvaW4oXCIsIFwiKX1gKTtcbiAgICAgICAgICBpZiAocGFydHMubGVuZ3RoKSBzdWJMaW5lcy5wdXNoKGAqKkFiaWxpdHkgU2NvcmVzOioqICR7cGFydHMuam9pbihcIiwgXCIpfWApO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gdGhlbiB0cmFpdHMvZW50cmllc1xuICAgICAgICBmb3IgKGNvbnN0IGVudHJ5IG9mIHNyLmVudHJpZXMgfHwgW10pIHtcbiAgICAgICAgICBzdWJMaW5lcy5wdXNoKGZvcm1hdEVudHJ5KGVudHJ5KSk7XG4gICAgICAgICAgc3ViTGluZXMucHVzaChcIlwiKTsgLy8gb3B0aW9uYWwgYmxhbmsgbGluZSBiZXR3ZWVuIGZlYXR1cmVzXG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBzdWJZYW1sID0gc2VyaWFsaXplRnJvbnRtYXR0ZXIoYnVpbGRGTShzciwgU1BFQ0lFU19NRVRBX0RFRlMpLCBTUEVDSUVTX01FVEFfREVGUyk7XG4gICAgICAgIG91dC5wdXNoKHtcbiAgICAgICAgICBwYXRoOiBgJHtzdWJGb2xkZXJ9LyR7c2x1Zyhzci5uYW1lKX0ubWRgLFxuICAgICAgICAgIGNvbnRlbnQ6IGAtLS1cXG4ke3N1YllhbWx9XFxuLS0tXFxuXFxuJHtzdWJMaW5lcy5qb2luKFwiXFxuXCIpfWAsXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICAvLyBubyBzdWJyYWNlcyBcdTIxRDIgYSBzaW5nbGUgZmxhdCBmaWxlXG4gICAgICBvdXQucHVzaCh7XG4gICAgICAgIHBhdGg6IGBTcGVjaWVzLyR7c2FmZU5hbWV9Lm1kYCxcbiAgICAgICAgY29udGVudDogYC0tLVxcbiR7eWFtbH1cXG4tLS1cXG5cXG4ke2xpbmVzLmpvaW4oXCJcXG5cIil9YCxcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIC8vIDUpIFNvcnQgJiByZXR1cm5cbiAgcmV0dXJuIG91dC5zb3J0KChhLCBiKSA9PiBhLnBhdGgubG9jYWxlQ29tcGFyZShiLnBhdGgpKTtcbn1cbiIsICIvL2NsYXNzIHBhcnNlciBkbmQgNWUgMjAxNFxuXG5pbXBvcnQgdHlwZSB7IFBhcnNlZE1hcmtkb3duRmlsZSB9IGZyb20gXCIuLi8uLi90eXBlc1wiO1xuaW1wb3J0IHsgXG4gIGJ1aWxkRk0sIFxuICBzZXJpYWxpemVGcm9udG1hdHRlciwgXG4gIENMQVNTX01FVEFfREVGUywgXG4gIHVuaWZpZWRUb29sUHJvZnMsIFxuICB1bmlmaWVkV2VhcG9uUHJvZnMsIFxuICBTa2lsbE9wdGlvbixcbiAgdW5pZmllZFNraWxscyxcbiAgU0tJTExfT1BUSU9OUywgXG4gIEZNX0ZJRUxEU1xufSBmcm9tIFwiLi9oZWxwZXJzL2Zyb250bWF0dGVyXCI7XG5pbXBvcnQgeyByZW5kZXJNYXJrZG93blRhYmxlIH0gZnJvbSBcIi4vaGVscGVycy9tYXJrZG93blRhYmxlXCI7XG5pbXBvcnQgeyByZXBsYWNlNWVUYWdzIH0gZnJvbSBcIi4vaGVscGVycy90YWdSZXBsYWNlclwiO1xuaW1wb3J0IHsgZm9ybWF0RW50cnkgfSBmcm9tIFwiLi9oZWxwZXJzL2Zvcm1hdEVudHJ5XCI7XG5cbmZ1bmN0aW9uIGZvcm1hdEZlYXR1cmVMaW5rKG5hbWU6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgY29uc3QgaWdub3JlID0gW1wiQWJpbGl0eSBTY29yZSBJbXByb3ZlbWVudFwiLCBcIkFyY2hldHlwZSBGZWF0dXJlXCIsIFwiU3ViY2xhc3MgRmVhdHVyZVwiXTtcbiAgICBpZiAoaWdub3JlLnNvbWUoc3ViID0+IG5hbWUudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhzdWIudG9Mb3dlckNhc2UoKSkpKSB7XG4gICAgICByZXR1cm4gbmFtZTtcbiAgICB9XG4gIFxuICAgIGNvbnN0IGFuY2hvciA9IG5hbWVcbiAgICAgIC5yZXBsYWNlKC9bXlxcd1xcc10vZywgXCJcIikgICAgICAgICAgIC8vIHJlbW92ZSBwdW5jdHVhdGlvbiAoa2VlcCBzcGFjZXMpXG4gICAgICAucmVwbGFjZSgvLS9nLCBcIiBcIikgICAgICAgICAgICAgICAgLy8gcmVtb3ZlIGRhc2hlc1xuICAgICAgLnJlcGxhY2UoL1xccysvZywgXCIgXCIpICAgICAgICAgICAgICAvLyBub3JtYWxpemUgd2hpdGVzcGFjZVxuICAgICAgLnRyaW0oKVxuICAgICAgLnJlcGxhY2UoL1xcYlxcdy9nLCBsID0+IGwudG9VcHBlckNhc2UoKSk7IC8vIGNhcGl0YWxpemUgd29yZHNcbiAgXG4gICAgcmV0dXJuIGBbWyMke2FuY2hvcn1dXWA7XG4gIH1cbmZ1bmN0aW9uIHRvSGVhZGVyQW5jaG9yKG5hbWU6IHN0cmluZyk6IHN0cmluZyB7XG4gIHJldHVybiBuYW1lXG4gICAgLnJlcGxhY2UoL1teXFx3XFxzXS9nLCBcIlwiKVxuICAgIC5yZXBsYWNlKC8tL2csIFwiIFwiKVxuICAgIC5yZXBsYWNlKC9cXHMrL2csIFwiIFwiKVxuICAgIC50cmltKClcbiAgICAucmVwbGFjZSgvXFxiXFx3L2csIGwgPT4gbC50b1VwcGVyQ2FzZSgpKTtcbn0gIFxuZXhwb3J0IGNvbnN0IE9QVF9GRUFUVVJFX1RZUEVfVE9fRlVMTDogUmVjb3JkPHN0cmluZyxzdHJpbmc+ID0ge1xuICBBSTogICBcIkFydGlmaWNlciBJbmZ1c2lvblwiLFxuICBFRDogICBcIkVsZW1lbnRhbCBEaXNjaXBsaW5lXCIsXG4gIEVJOiAgIFwiRWxkcml0Y2ggSW52b2NhdGlvblwiLFxuICBNTTogICBcIk1ldGFtYWdpY1wiLFxuICBNVjogICBcIk1hbmV1dmVyXCIsXG4gIFwiTVY6QlwiOiAgICBcIk1hbmV1dmVyLCBCYXR0bGUgTWFzdGVyXCIsXG4gIFwiTVY6QzItVUFcIjpcIk1hbmV1dmVyLCBDYXZhbGllciBWMiAoVUEpXCIsXG4gIFwiQVM6VjEtVUFcIjpcIkFyY2FuZSBTaG90LCBWMSAoVUEpXCIsXG4gIFwiQVM6VjItVUFcIjpcIkFyY2FuZSBTaG90LCBWMiAoVUEpXCIsXG4gIEFTOiAgIFwiQXJjYW5lIFNob3RcIixcbiAgT1RIOiAgXCJPdGhlclwiLFxuICBcIkZTOkZcIjpcIkZpZ2h0aW5nIFN0eWxlOyBGaWdodGVyXCIsXG4gIFwiRlM6QlwiOlwiRmlnaHRpbmcgU3R5bGU7IEJhcmRcIixcbiAgXCJGUzpQXCI6XCJGaWdodGluZyBTdHlsZTsgUGFsYWRpblwiLFxuICBcIkZTOlJcIjpcIkZpZ2h0aW5nIFN0eWxlOyBSYW5nZXJcIixcbiAgUEI6ICAgXCJQYWN0IEJvb25cIixcbiAgT1I6ICAgXCJPbm9tYW5jeSBSZXNvbmFudFwiLFxuICBSTjogICBcIlJ1bmUgS25pZ2h0IFJ1bmVcIixcbiAgQUY6ICAgXCJBbGNoZW1pY2FsIEZvcm11bGFcIixcbiAgVFQ6ICAgXCJUcmF2ZWxlcidzIFRyaWNrXCIsXG59O1xuICBcbiAgZnVuY3Rpb24gcmVuZGVyRW50cmllcyhlbnRyaWVzOiBhbnlbXSk6IHN0cmluZyB7XG4gICAgcmV0dXJuIGVudHJpZXMubWFwKChlbnRyeSkgPT4ge1xuICAgICAgaWYgKHR5cGVvZiBlbnRyeSA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICByZXR1cm4gcmVwbGFjZTVlVGFncyhlbnRyeSk7XG4gICAgICB9XG4gIFxuICAgICAgaWYgKHR5cGVvZiBlbnRyeSA9PT0gXCJvYmplY3RcIikge1xuICAgICAgICBpZiAoZW50cnkudHlwZSA9PT0gXCJyZWZDbGFzc0ZlYXR1cmVcIikge1xuICAgICAgICAgIGNvbnN0IFtuYW1lXSA9IGVudHJ5LmNsYXNzRmVhdHVyZS5zcGxpdChcInxcIik7XG4gICAgICAgICAgcmV0dXJuIGAqU2VlIGZlYXR1cmU6ICoqJHtuYW1lfSoqKmA7XG4gICAgICAgIH1cbiAgXG4gICAgICAgIGlmIChlbnRyeS50eXBlID09PSBcImVudHJpZXNcIiAmJiBlbnRyeS5uYW1lKSB7XG4gICAgICAgICAgY29uc3QgaW5uZXIgPSByZW5kZXJFbnRyaWVzKGVudHJ5LmVudHJpZXMgfHwgW10pO1xuICAgICAgICAgIHJldHVybiBgKioke2VudHJ5Lm5hbWV9KipcXG5cXG4ke2lubmVyfWA7XG4gICAgICAgIH1cbiAgXG4gICAgICAgIGlmIChlbnRyeS50eXBlID09PSBcImluc2V0XCIgJiYgZW50cnkubmFtZSkge1xuICAgICAgICAgIGNvbnN0IGlubmVyID0gcmVuZGVyRW50cmllcyhlbnRyeS5lbnRyaWVzIHx8IFtdKTtcbiAgICAgICAgICByZXR1cm4gYD4gKioke2VudHJ5Lm5hbWV9KipcXG4+XFxuPiAke2lubmVyLnNwbGl0KFwiXFxuXCIpLmpvaW4oXCJcXG4+IFwiKX1gO1xuICAgICAgICB9XG4gIFxuICAgICAgICAvLyBmYWxsYmFja1xuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShlbnRyeS5lbnRyaWVzKSkge1xuICAgICAgICAgIHJldHVybiByZW5kZXJFbnRyaWVzKGVudHJ5LmVudHJpZXMpO1xuICAgICAgICB9XG4gICAgICB9XG4gIFxuICAgICAgcmV0dXJuIFwiXCI7XG4gICAgfSkuZmlsdGVyKEJvb2xlYW4pLmpvaW4oXCJcXG5cIik7XG4gIH1cbiAgXG5leHBvcnQgZnVuY3Rpb24gcGFyc2VDbGFzc0ZpbGUoXG4gIGpzb246IGFueSxcbiAgZWRpdGlvbklkOiBzdHJpbmcsXG4gIGZpbGVOYW1lOiBzdHJpbmcsXG4gIG9wdGlvbmFsRmVhdHVyZXM6IGFueVtdXG4pOiBQYXJzZWRNYXJrZG93bkZpbGVbXSB7XG4gIC8vIG1ha2UgZWRpdGlvbklkIGF2YWlsYWJsZSBmb3IgZnJvbnRtYXR0ZXJcbiAgKGpzb24gYXMgYW55KS5fZWRpdGlvbklkID0gZWRpdGlvbklkO1xuXG4gIC8vIHVud3JhcCB0aGUgcmVhbCBjbGFzcyByZWNvcmRcbiAgY29uc3QgY2xzID0gQXJyYXkuaXNBcnJheShqc29uLmNsYXNzKSA/IGpzb24uY2xhc3NbMF0gOiBqc29uO1xuICAvLyBkZXJpdmUgdGhlIE1hcmtkb3duIGZpbGVuYW1lXG4gIGNvbnN0IGNsYXNzTmFtZSA9XG4gICAgdHlwZW9mIGNscy5uYW1lID09PSBcInN0cmluZ1wiXG4gICAgICA/IGNscy5uYW1lXG4gICAgICA6IGZpbGVOYW1lXG4gICAgICA/IGZpbGVOYW1lLnJlcGxhY2UoL15jbGFzcy0vLCBcIlwiKS5yZXBsYWNlKC9cXC5qc29uJC8sIFwiXCIpXG4gICAgICA6IFwiVW5rbm93blwiO1xuXG4gIGNvbnN0IHN1YmNsYXNzRmlsZXM6IFBhcnNlZE1hcmtkb3duRmlsZVtdID0gW107XG5cbiAgY29uc3QgUFJPRl9CT05VU19CWV9MRVZFTCA9IFtcbiAgICBcIisyXCIsIFwiKzJcIiwgXCIrMlwiLCBcIisyXCIsXG4gICAgXCIrM1wiLCBcIiszXCIsIFwiKzNcIiwgXCIrM1wiLFxuICAgIFwiKzRcIiwgXCIrNFwiLCBcIis0XCIsIFwiKzRcIixcbiAgICBcIis1XCIsIFwiKzVcIiwgXCIrNVwiLCBcIis1XCIsXG4gICAgXCIrNlwiLCBcIis2XCIsIFwiKzZcIiwgXCIrNlwiXG4gIF07XG4gIFxuICAvLyBub3JtYWxpemUgaGl0XHUyMDEwZGljZVxuICBjb25zdCBoZE51bSAgID0gY2xzLmhkPy5udW1iZXIgPz8gMTtcbiAgY29uc3QgaGRGYWNlcyA9IGNscy5oZD8uZmFjZXMgID8/IDY7XG4gIGNvbnN0IGhkU3RyICAgPSBgJHtoZE51bX1kJHtoZEZhY2VzfWA7XG4gIGNvbnN0IGhkTWF4ICAgPSBoZE51bSAqIGhkRmFjZXM7XG4gIGNvbnN0IGhkQXZnICAgPSBNYXRoLmNlaWwoKGhkRmFjZXMgKyAxKSAvIDIpO1xuXG5jb25zdCBiYXNlRk0gPSBidWlsZEZNKGNscywgQ0xBU1NfTUVUQV9ERUZTKTtcbmNvbnN0IGZtICAgICA9IHsgLi4uYmFzZUZNLCBoZDogaGRTdHIgfTtcbmNvbnN0IHlhbWwgICA9IHNlcmlhbGl6ZUZyb250bWF0dGVyKGZtLCBDTEFTU19NRVRBX0RFRlMpO1xuXG4vLyAxKSBEZWNsYXJlIHlvdXIgbGluZXMgYnVmZmVyIGltbWVkaWF0ZWx5XG5jb25zdCBsaW5lczogc3RyaW5nW10gPSBbXTtcblxuLy8gNCkgTm93IGNhcnJ5IG9uIHdpdGggdGhlIHJlc3Qgb2YgeW91ciBib2R5XG5saW5lcy5wdXNoKGAjICR7Y2xhc3NOYW1lfWApO1xuaWYgKGNscy5zb3VyY2UpIGxpbmVzLnB1c2goYCoqU291cmNlOioqICR7Y2xzLnNvdXJjZX1gKTtcbmxpbmVzLnB1c2goYGApO1xubGluZXMucHVzaChgLS0tYCk7XG5cbiAgLy8gXHUyNTAwXHUyNTAwXHUyNTAwIEhpdCBQb2ludHMgXHUyNTAwXHUyNTAwXHUyNTAwXG4gIGxpbmVzLnB1c2goYCMjIEhpdCBQb2ludHNgKTtcbiAgbGluZXMucHVzaChgKipIaXQgRGljZToqKiAke2hkU3RyfSBwZXIgJHtjbGFzc05hbWV9IGxldmVsYCk7XG4gIGxpbmVzLnB1c2goYCoqSGl0IFBvaW50cyBhdCAxc3QgTGV2ZWw6KiogJHtoZE1heH0gKyB5b3VyIENvbnN0aXR1dGlvbiBtb2RpZmllcmApO1xuICBsaW5lcy5wdXNoKFxuICAgIGAqKkhpdCBQb2ludHMgYXQgSGlnaGVyIExldmVsczoqKiAke2hkU3RyfSAob3IgJHtoZEF2Z30pICsgeW91ciBDb25zdGl0dXRpb24gbW9kaWZpZXIgcGVyIGxldmVsIGFmdGVyIDFzdGBcbiAgKTtcblxuLy8gXHUyNTAwXHUyNTAwXHUyNTAwIFByb2ZpY2llbmNpZXMgXHUyNTAwXHUyNTAwXHUyNTAwXG5saW5lcy5wdXNoKGBgKTtcbmxpbmVzLnB1c2goYC0tLWApO1xubGluZXMucHVzaChgIyMgUHJvZmljaWVuY2llc2ApO1xuXG5jb25zdCBzcCA9IGNscy5zdGFydGluZ1Byb2ZpY2llbmNpZXMgPz8ge307XG5cbi8vIEFybW9yXG5pZiAoQXJyYXkuaXNBcnJheShzcC5hcm1vcikgJiYgc3AuYXJtb3IubGVuZ3RoKSB7XG4gIGxpbmVzLnB1c2goYC0gKipBcm1vcjoqKiAke3NwLmFybW9yLmpvaW4oXCIsIFwiKX1gKTtcbn1cblxuLy8gV2VhcG9uc1xuY29uc3Qgd2VhcG9uTGlzdCA9IHVuaWZpZWRXZWFwb25Qcm9mcyhzcCk7XG5pZiAod2VhcG9uTGlzdC5sZW5ndGgpIHtcbiAgbGluZXMucHVzaChgLSAqKldlYXBvbnM6KiogJHt3ZWFwb25MaXN0LmpvaW4oXCIsIFwiKX1gKTtcbn1cblxuLy8gVG9vbHNcbmNvbnN0IHRvb2xMaXN0ID0gdW5pZmllZFRvb2xQcm9mcyhzcCk7XG5pZiAodG9vbExpc3QubGVuZ3RoKSB7XG4gIGxpbmVzLnB1c2goYC0gKipUb29sczoqKiAke3Rvb2xMaXN0LmpvaW4oXCIsIFwiKX1gKTtcbn1cblxuLy8gU2F2aW5nIFRocm93c1xuY29uc3Qgc2F2ZXMgPSBBcnJheS5pc0FycmF5KGNscy5wcm9maWNpZW5jeSlcbiAgPyBjbHMucHJvZmljaWVuY3kubWFwKChrOiBzdHJpbmcpID0+XG4gICAgICAoeyBzdHI6XCJTdHJlbmd0aFwiLCBkZXg6XCJEZXh0ZXJpdHlcIiwgY29uOlwiQ29uc3RpdHV0aW9uXCIsXG4gICAgICAgICBpbnQ6XCJJbnRlbGxpZ2VuY2VcIiwgd2lzOlwiV2lzZG9tXCIsIGNoYTpcIkNoYXJpc21hXCIgfVtrXSB8fCBrLnRvVXBwZXJDYXNlKCkpXG4gICAgKVxuICA6IFtdO1xuaWYgKHNhdmVzLmxlbmd0aCkge1xuICBsaW5lcy5wdXNoKGAtICoqU2F2aW5nIFRocm93czoqKiAke3NhdmVzLmpvaW4oXCIsIFwiKX1gKTtcbn1cblxuXG4vLyBcdTI1MDBcdTI1MDBcdTI1MDAgU2tpbGxzIFx1MjUwMFx1MjUwMFx1MjUwMFxue1xuICAvLyAxKSBncmFiIHdoYXRldmVyIGFycmF5IGhvbGRzIHRoZSByYXcgb2JqZWN0cy9zdHJpbmdzXG4gIGNvbnN0IHJhd1NraWxsczogYW55W10gPVxuICAgIEFycmF5LmlzQXJyYXkoc3Auc2tpbGxQcm9maWNpZW5jaWVzKSA/IHNwLnNraWxsUHJvZmljaWVuY2llc1xuICAgIDogQXJyYXkuaXNBcnJheShzcC5za2lsbHMpICAgICAgICAgICAgID8gc3Auc2tpbGxzXG4gICAgOiBBcnJheS5pc0FycmF5KHNwLnNraWxsUHJvZikgICAgICAgICAgPyBzcC5za2lsbFByb2ZcbiAgICA6IFtdO1xuXG4gIC8vIDIpIGxvb2sgZm9yIHRoZSBcdTIwMUNjaG9vc2UgTiBmcm9tIFtcdTIwMjZdXHUyMDFEIGVudHJ5XG4gIGNvbnN0IGNob2ljZUVudHJ5ID0gcmF3U2tpbGxzLmZpbmQoXG4gICAgZSA9PiBlICYmXG4gICAgICAgICAodHlwZW9mIGUuY2hvb3NlID09PSBcIm9iamVjdFwiIHx8IHR5cGVvZiBlLmFueSA9PT0gXCJudW1iZXJcIilcbiAgKTtcblxuICBpZiAoY2hvaWNlRW50cnkpIHtcbiAgICAvLyBob3cgbWFueSB0byBjaG9vc2VcbiAgICBjb25zdCBjb3VudCA9IGNob2ljZUVudHJ5LmNob29zZT8uY291bnQgPz8gY2hvaWNlRW50cnkuYW55ID8/IDE7XG5cbiAgICAvLyBwdWxsIHRoZSBhY3R1YWwgbGlzdCBvZiBvcHRpb25zLCBvciBmYWxsIGJhY2sgdG8gdGhlIGdsb2JhbCBTS0lMTF9PUFRJT05TXG4gICAgY29uc3Qgb3B0aW9uczogc3RyaW5nW10gPSBBcnJheS5pc0FycmF5KGNob2ljZUVudHJ5LmNob29zZT8uZnJvbSlcbiAgICAgID8gY2hvaWNlRW50cnkuY2hvb3NlLmZyb20ubWFwKChzOiBzdHJpbmcpID0+XG4gICAgICAgICAgLy8gdGl0bGUtY2FzZSBlYWNoIHdvcmQgKG9yIGp1c3QgdXNlIHMpXG4gICAgICAgICAgcy5zcGxpdChcIiBcIikubWFwKHcgPT4gd1swXS50b1VwcGVyQ2FzZSgpICsgdy5zbGljZSgxKSkuam9pbihcIiBcIilcbiAgICAgICAgKVxuICAgICAgOiBTS0lMTF9PUFRJT05TO1xuXG4gICAgbGluZXMucHVzaChgLSAqKlNraWxscyAoQ2hvb3NlICR7Y291bnR9KToqKiAke29wdGlvbnMuam9pbihcIiwgXCIpfWApO1xuXG4gIH0gZWxzZSB7XG4gICAgLy8gbm8gY2hvb3NlLWZyb20gb2JqZWN0IFx1MjE5MiBmbGF0IGxpc3QgZnJvbSB5b3VyIHVuaWZpZWQgaGVscGVyXG4gICAgY29uc3QgZmxhdCA9IHVuaWZpZWRTa2lsbHMoc3ApO1xuICAgIGlmIChmbGF0Lmxlbmd0aCkge1xuICAgICAgbGluZXMucHVzaChgLSAqKlNraWxsczoqKiAke2ZsYXQuam9pbihcIiwgXCIpfWApO1xuICAgIH1cbiAgfVxufVxuXG5cblxuICAvLyBcdTI1MDBcdTI1MDBcdTI1MDAgRXF1aXBtZW50IFx1MjUwMFx1MjUwMFx1MjUwMFxuICBpZiAoQXJyYXkuaXNBcnJheShjbHMuc3RhcnRpbmdFcXVpcG1lbnQpKSB7XG4gICAgbGluZXMucHVzaChgXFxuIyMjIEVxdWlwbWVudGApO1xuICAgIGNscy5zdGFydGluZ0VxdWlwbWVudFxuICAgICAgLmZpbHRlcigoZTogYW55KSA9PiB0eXBlb2YgZSA9PT0gXCJzdHJpbmdcIilcbiAgICAgIC5mb3JFYWNoKChpdGVtOiBzdHJpbmcpID0+IGxpbmVzLnB1c2goYC0gJHtpdGVtfWApKTtcbiAgfVxuXG4vLyBcdTI1MDBcdTI1MDBcdTI1MDAgQ2xhc3MgUHJvZ3Jlc3Npb24gXHUyNTAwXHUyNTAwXHUyNTAwXG5jb25zdCBwcm9nR3JvdXBzID0gY2xzLmNsYXNzVGFibGVHcm91cHMgPz8gW107XG5jb25zdCBtYXhMZXZlbCA9IDIwO1xuXG5pZiAoIXByb2dHcm91cHMubGVuZ3RoKSB7XG4gIGxpbmVzLnB1c2goYCooTm8gY2xhc3MgdGFibGUgcHJvdmlkZWQgZm9yIHRoaXMgY2xhc3MuKSpgKTtcbn0gZWxzZSB7XG4gIC8vIDEpIEJ1aWxkIGxldmVsIFx1MjE5MiBmZWF0dXJlIG1hcFxuICBjb25zdCBmZWF0dXJlc0J5TGV2ZWw6IFJlY29yZDxudW1iZXIsIHN0cmluZ1tdPiA9IHt9O1xuICBmb3IgKGNvbnN0IGZlYXQgb2YgY2xzLmNsYXNzRmVhdHVyZXMgPz8gW10pIHtcbiAgICBjb25zdCByYXcgPSB0eXBlb2YgZmVhdCA9PT0gXCJvYmplY3RcIiAmJiBmZWF0LmNsYXNzRmVhdHVyZSA/IGZlYXQuY2xhc3NGZWF0dXJlIDogU3RyaW5nKGZlYXQpO1xuICAgIGNvbnN0IFtuYW1lLCwgLGx2bFN0cl0gPSByYXcuc3BsaXQoXCJ8XCIpO1xuICAgIGNvbnN0IGx2bCA9IE51bWJlcihsdmxTdHIgPz8gMCk7XG4gICAgaWYgKCFmZWF0dXJlc0J5TGV2ZWxbbHZsXSkgZmVhdHVyZXNCeUxldmVsW2x2bF0gPSBbXTtcbiAgICBmZWF0dXJlc0J5TGV2ZWxbbHZsXS5wdXNoKG5hbWUpO1xuICB9XG5cbiAgLy8gMikgR2F0aGVyIGV2ZXJ5IGNvbHVtbiBsYWJlbCAmIHJvdyB2YWx1ZVxuICBjb25zdCBhbGxMYWJlbHNTZXQgPSBuZXcgU2V0PHN0cmluZz4oKTtcbiAgY29uc3Qgcm93TWFwczogUmVjb3JkPG51bWJlciwgUmVjb3JkPHN0cmluZywgc3RyaW5nPj4gPSB7fTtcblxuICBmb3IgKGNvbnN0IGdyb3VwIG9mIHByb2dHcm91cHMpIHtcbiAgICBjb25zdCBsYWJlbHMgPSBBcnJheS5pc0FycmF5KGdyb3VwLmNvbExhYmVscylcbiAgICAgID8gZ3JvdXAuY29sTGFiZWxzLm1hcCgobDogc3RyaW5nKSA9PiByZXBsYWNlNWVUYWdzKGwpKVxuICAgICAgOiBbXTtcbiAgICBjb25zdCByb3dzID0gQXJyYXkuaXNBcnJheShncm91cC5yb3dzKVxuICAgICAgPyBncm91cC5yb3dzXG4gICAgICA6IEFycmF5LmlzQXJyYXkoZ3JvdXAucm93c1NwZWxsUHJvZ3Jlc3Npb24pXG4gICAgICAgID8gZ3JvdXAucm93c1NwZWxsUHJvZ3Jlc3Npb25cbiAgICAgICAgOiBbXTtcblxuICAgIGlmICghbGFiZWxzLmxlbmd0aCB8fCAhcm93cy5sZW5ndGgpIGNvbnRpbnVlO1xuXG4gICAgZm9yIChsZXQgbHZsID0gMDsgbHZsIDwgcm93cy5sZW5ndGg7IGx2bCsrKSB7XG4gICAgICBjb25zdCBsZXZlbE51bSA9IGx2bCArIDE7XG4gICAgICBpZiAoIXJvd01hcHNbbGV2ZWxOdW1dKSByb3dNYXBzW2xldmVsTnVtXSA9IHt9O1xuICAgICAgY29uc3Qgcm93TWFwID0gcm93TWFwc1tsZXZlbE51bV07XG4gICAgICBjb25zdCBjZWxscyA9IHJvd3NbbHZsXTtcblxuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsYWJlbHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgY29uc3QgbGFiZWwgPSBsYWJlbHNbaV07XG4gICAgICAgIGxldCB2YWwgPSBcIlwiO1xuICAgICAgICBjb25zdCBjZWxsID0gY2VsbHNbaV07XG5cbiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoY2VsbCkpIHtcbiAgICAgICAgICB2YWwgPSBjZWxsLmpvaW4oXCIsIFwiKTtcbiAgICAgICAgfSBlbHNlIGlmIChjZWxsICYmIHR5cGVvZiBjZWxsID09PSBcIm9iamVjdFwiICYmIFwidmFsdWVcIiBpbiBjZWxsKSB7XG4gICAgICAgICAgdmFsID0gU3RyaW5nKGNlbGwudmFsdWUpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHZhbCA9IFN0cmluZyhjZWxsID8/IFwiXCIpO1xuICAgICAgICB9XG5cbiAgICAgICAgYWxsTGFiZWxzU2V0LmFkZChsYWJlbCk7XG4gICAgICAgIHJvd01hcFtsYWJlbF0gPSB2YWw7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLy8gMykgKipGaWx0ZXIgb3V0KiogYW55IHNwZWxsXHUyMDEwdGFibGUgY29sdW1uc1xuICBjb25zdCBhbGxMYWJlbHMgPSBBcnJheS5mcm9tKGFsbExhYmVsc1NldCkuZmlsdGVyKGxibCA9PlxuICAgICEvQ2FudHJpcHMgS25vd258U3BlbGxzIEtub3dufFxcZCsoc3R8bmR8cmR8dGgpLy50ZXN0KGxibClcbiAgKTtcblxuICAvLyA0KSBCdWlsZCBmaW5hbCBoZWFkZXIgJiByb3dzXG4gIGNvbnN0IG1lcmdlZExhYmVscyA9IFtcIkxldmVsXCIsIFwiUHJvZmljaWVuY3kgQm9udXNcIiwgXCJDbGFzcyBGZWF0dXJlc1wiLCAuLi5hbGxMYWJlbHNdO1xuICBjb25zdCBtZXJnZWRSb3dzOiBzdHJpbmdbXVtdID0gW107XG5cbiAgZm9yIChsZXQgbHZsID0gMTsgbHZsIDw9IG1heExldmVsOyBsdmwrKykge1xuICAgIGNvbnN0IGZlYXR1cmVMaXN0ID0gKGZlYXR1cmVzQnlMZXZlbFtsdmxdID8/IFtdKS5tYXAoZm9ybWF0RmVhdHVyZUxpbmspO1xuICAgIGNvbnN0IHJvd01hcCA9IHJvd01hcHNbbHZsXSA/PyB7fTtcblxuICAgIG1lcmdlZFJvd3MucHVzaChbXG4gICAgICBsdmwudG9TdHJpbmcoKSxcbiAgICAgIFBST0ZfQk9OVVNfQllfTEVWRUxbbHZsIC0gMV0gfHwgXCJcIixcbiAgICAgIGZlYXR1cmVMaXN0LmpvaW4oXCIsIFwiKS5yZXBsYWNlKC9cXHwvZywgXCImIzEyNDtcIiksXG4gICAgICAuLi5hbGxMYWJlbHMubWFwKGxhYmVsID0+IHJvd01hcFtsYWJlbF0gPz8gXCJcIilcbiAgICBdKTtcbiAgfVxuXG4gIC8vIDUpIFJlbmRlciB0aGUgZmVhdHVyZXNcdTIwMTBvbmx5IHRhYmxlXG5saW5lcy5wdXNoKGBcXG4+IFshZXhhbXBsZV0tIENsYXNzIFByb2dyZXNzaW9uIFRhYmxlYCk7XG5saW5lcy5wdXNoKFxuICByZW5kZXJNYXJrZG93blRhYmxlKHtcbiAgICB0eXBlOiAgICAgIFwidGFibGVcIixcbiAgICBjYXB0aW9uOiAgIFwiXCIsXG4gICAgY29sTGFiZWxzOiBtZXJnZWRMYWJlbHMsXG4gICAgcm93czogICAgICBtZXJnZWRSb3dzLFxuICB9KSk7XG59XG5cbi8vIFx1MjUwMFx1MjUwMFx1MjUwMCBTcGVsbCBQcm9ncmVzc2lvbiBcdTI1MDBcdTI1MDBcdTI1MDBcbi8vIDEpIGZpbmQgdGhlIHR3byBncm91cHNcbmNvbnN0IGNzR3JvdXAgPSBwcm9nR3JvdXBzLmZpbmQoKGc6IGFueSkgPT5cbiAgQXJyYXkuaXNBcnJheShnLmNvbExhYmVscykgJiZcbiAgZy5jb2xMYWJlbHMuc29tZSgobGJsOiBhbnkpID0+IC9DYW50cmlwcyBLbm93bnxTcGVsbHMgS25vd24vLnRlc3QoU3RyaW5nKGxibCkpKVxuKTtcbmNvbnN0IHNsb3RHcm91cCA9IHByb2dHcm91cHMuZmluZCgoZzogYW55KSA9PlxuICBBcnJheS5pc0FycmF5KGcuY29sTGFiZWxzKSAmJlxuICBnLnRpdGxlID09PSBcIlNwZWxsIFNsb3RzIHBlciBTcGVsbCBMZXZlbFwiXG4pO1xuXG5pZiAoY3NHcm91cCAmJiBzbG90R3JvdXApIHtcbiAgLy8gMikgcmF3IGxhYmVsc1xuICBjb25zdCBjc0xhYmVscyAgID0gKGNzR3JvdXAuY29sTGFiZWxzIGFzIHN0cmluZ1tdKS5tYXAobCA9PiByZXBsYWNlNWVUYWdzKGwpKTtcbiAgY29uc3Qgc2xvdExhYmVscyA9IChzbG90R3JvdXAuY29sTGFiZWxzIGFzIHN0cmluZ1tdKS5tYXAobCA9PiByZXBsYWNlNWVUYWdzKGwpKTtcblxuICAvLyAzKSByYXcgcm93c1xuICBjb25zdCBjc1Jvd3MgICA9IChjc0dyb3VwLnJvd3MgICAgICBhcyBhbnlbXVtdKSAgICAgICAgICAgICAgfHwgW107XG4gIGNvbnN0IHNsb3RSb3dzID0gKHNsb3RHcm91cC5yb3dzU3BlbGxQcm9ncmVzc2lvbiBhcyBhbnlbXVtdKSB8fCBbXTtcblxuICAvLyA0KSBidWlsZCBoZWFkZXI6IExldmVsICsgY2FudHJpcHMvc3BlbGxzICsgZWFjaCBzbG90IGxldmVsXG4gIGNvbnN0IGNvbExhYmVscyA9IFtcIkxldmVsXCIsIC4uLmNzTGFiZWxzLCAuLi5zbG90TGFiZWxzXTtcblxuICAvLyA1KSBidWlsZCBlYWNoIHJvdyBieSB6aXBwaW5nIGNzUm93c1tpXSArIHNsb3RSb3dzW2ldXG4gIGNvbnN0IHNwZWxsUm93czogc3RyaW5nW11bXSA9IFtdO1xuICBmb3IgKGxldCBpID0gMDsgaSA8IE1hdGgubWF4KGNzUm93cy5sZW5ndGgsIHNsb3RSb3dzLmxlbmd0aCk7IGkrKykge1xuICAgIGNvbnN0IGx2bCA9IFN0cmluZyhpICsgMSk7XG4gICAgY29uc3QgY3NDZWxscyAgID0gY3NSb3dzW2ldICAgPyBjc1Jvd3NbaV0ubWFwKFN0cmluZykgICA6IGNzTGFiZWxzLm1hcChfID0+IFwiXCIpO1xuICAgIGNvbnN0IHNsb3RDZWxscyA9IHNsb3RSb3dzW2ldID8gc2xvdFJvd3NbaV0ubWFwKFN0cmluZykgOiBzbG90TGFiZWxzLm1hcChfID0+IFwiXCIpO1xuICAgIHNwZWxsUm93cy5wdXNoKFtsdmwsIC4uLmNzQ2VsbHMsIC4uLnNsb3RDZWxsc10pO1xuICB9XG5cbiAgLy8gNikgcmVuZGVyIVxuICBsaW5lcy5wdXNoKGBcXG4+IFshdGlwXS0gU3BlbGwgUHJvZ3Jlc3Npb24gVGFibGVgKTtcbiAgbGluZXMucHVzaChcbiAgICByZW5kZXJNYXJrZG93blRhYmxlKHtcbiAgICAgIHR5cGU6ICAgICAgXCJ0YWJsZVwiLFxuICAgICAgY2FwdGlvbjogICBcIlwiLFxuICAgICAgY29sTGFiZWxzOiBjb2xMYWJlbHMsXG4gICAgICByb3dzOiAgICAgIHNwZWxsUm93cyxcbiAgfSkpO1xufVxuXG5cbi8vIFx1MjUwMFx1MjUwMFx1MjUwMCBTdWJjbGFzc2VzIFx1MjUwMFx1MjUwMFx1MjUwMFxuY29uc3Qgc3VicyA9IEFycmF5LmlzQXJyYXkoanNvbi5zdWJjbGFzcykgPyBqc29uLnN1YmNsYXNzIDogW107XG5jb25zdCBzdWJjbGFzc0ZlYXR1cmVzID0gQXJyYXkuaXNBcnJheShqc29uLnN1YmNsYXNzRmVhdHVyZSlcbiAgPyBqc29uLnN1YmNsYXNzRmVhdHVyZVxuICA6IGpzb24ubG9va3VwPy5zdWJjbGFzc0ZlYXR1cmUgPz8gW107XG5cbmZvciAoY29uc3Qgc2Mgb2Ygc3Vicykge1xuICBjb25zdCBzdWJjbGFzc05hbWUgPSBzYy5uYW1lO1xuICBjb25zdCBzdWJMaW5lczogc3RyaW5nW10gPSBbXTtcblxuICAvLyBcdTI1MDBcdTI1MDBcdTI1MDAgSGVhZGVyIG1ldGFkYXRhIFx1MjUwMFx1MjUwMFx1MjUwMFxuICBzdWJMaW5lcy5wdXNoKGAjICR7c3ViY2xhc3NOYW1lfWApO1xuICBzdWJMaW5lcy5wdXNoKGAqKlBhcmVudCBDbGFzczoqKiBbWyR7Y2xhc3NOYW1lfV1dYCk7XG4gIGlmIChzYy5zb3VyY2UpIHN1YkxpbmVzLnB1c2goYCoqU291cmNlOioqICR7c2Muc291cmNlfWApO1xuICBzdWJMaW5lcy5wdXNoKGBgKTsgLy8gYmxhbmsgbGluZVxuXG4gIC8vIFx1MjUwMFx1MjUwMFx1MjUwMCBJbnRybyBlbnRyeSAobGV2ZWwgMyBmZWF0dXJlIGRlc2NyaXB0aW9uKSBcdTI1MDBcdTI1MDBcdTI1MDBcbiAgY29uc3QgaW50cm8gPSBzdWJjbGFzc0ZlYXR1cmVzLmZpbmQoKGY6IGFueSkgPT5cbiAgICBmLm5hbWUgPT09IHNjLm5hbWUgJiZcbiAgICBmLmxldmVsID09PSAzICYmXG4gICAgZi5zdWJjbGFzc1Nob3J0TmFtZSA9PT0gc2Muc2hvcnROYW1lICYmXG4gICAgZi5zdWJjbGFzc1NvdXJjZSA9PT0gc2Muc291cmNlXG4gICk7XG4gIGlmIChpbnRybz8uZW50cmllcz8ubGVuZ3RoKSB7XG4gICAgY29uc3QgaW50cm9UZXh0ID0gQXJyYXkuaXNBcnJheShpbnRyby5lbnRyaWVzKVxuICAgICAgPyBpbnRyby5lbnRyaWVzLm1hcCgoZTogYW55KSA9PlxuICAgICAgICAgIHR5cGVvZiBlID09PSBcInN0cmluZ1wiID8gcmVwbGFjZTVlVGFncyhlKSA6IGZvcm1hdEVudHJ5KGUpXG4gICAgICAgICkuam9pbihcIlxcblxcblwiKVxuICAgICAgOiBmb3JtYXRFbnRyeShpbnRyby5lbnRyaWVzKTtcbiAgICBzdWJMaW5lcy5wdXNoKGludHJvVGV4dCwgYGApO1xuICB9XG5cbiAgLy8gXHUyNTAwXHUyNTAwXHUyNTAwIE9wdGlvbmFsXHUyMDEwZmVhdHVyZSBibG9jayBcdTI1MDBcdTI1MDBcdTI1MDBcbiAgY29uc3QgY29kZSA9IChPYmplY3QuZW50cmllcyhPUFRfRkVBVFVSRV9UWVBFX1RPX0ZVTEwpIGFzIFtzdHJpbmcsc3RyaW5nXVtdKVxuICAgIC5maW5kKChbLCBmdWxsXSkgPT5cbiAgICAgIGZ1bGwudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhzdWJjbGFzc05hbWUudG9Mb3dlckNhc2UoKSlcbiAgICApPy5bMF07XG4gIGlmIChjb2RlKSB7XG4gICAgY29uc3QgbWF0Y2hlcyA9IG9wdGlvbmFsRmVhdHVyZXMuZmlsdGVyKG9mID0+XG4gICAgICBBcnJheS5pc0FycmF5KG9mLmZlYXR1cmVUeXBlKSAmJiBvZi5mZWF0dXJlVHlwZS5pbmNsdWRlcyhjb2RlKVxuICAgICk7XG4gICAgaWYgKG1hdGNoZXMubGVuZ3RoKSB7XG4gICAgICBzdWJMaW5lcy5wdXNoKGAjIyAke3N1YmNsYXNzTmFtZX0gT3B0aW9uYWwgRmVhdHVyZXNgKTtcbiAgICAgIGZvciAoY29uc3QgZmVhdCBvZiBtYXRjaGVzKSB7XG4gICAgICAgIGZvciAoY29uc3QgZW50cnkgb2YgZmVhdC5lbnRyaWVzKSB7XG4gICAgICAgICAgY29uc3QgdHh0ID0gdHlwZW9mIGVudHJ5ID09PSBcInN0cmluZ1wiXG4gICAgICAgICAgICA/IHJlcGxhY2U1ZVRhZ3MoZW50cnkpXG4gICAgICAgICAgICA6IGZvcm1hdEVudHJ5KGVudHJ5KTtcbiAgICAgICAgICBzdWJMaW5lcy5wdXNoKGAqKiR7ZmVhdC5uYW1lfToqKiAke3R4dH1gKTtcbiAgICAgICAgfVxuICAgICAgICBzdWJMaW5lcy5wdXNoKGBgKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvLyBcdTI1MDBcdTI1MDBcdTI1MDAgU3ViY2xhc3MgcHJvZ3Jlc3Npb24gdGFibGUgXHUyNTAwXHUyNTAwXHUyNTAwXG4gIGNvbnN0IHByb2cgPSBzYy5zdWJjbGFzc1RhYmxlR3JvdXBzID8/IFtdO1xuICBpZiAocHJvZy5sZW5ndGgpIHtcbiAgICBjb25zdCBsYWJlbHMgPSBuZXcgU2V0PHN0cmluZz4oKTtcbiAgICBjb25zdCByb3dzTWFwOiBSZWNvcmQ8bnVtYmVyLCBSZWNvcmQ8c3RyaW5nLHN0cmluZz4+ID0ge307XG4gICAgZm9yIChjb25zdCBnIG9mIHByb2cpIHtcbiAgICAgIGNvbnN0IGNvbHMgPSAoZy5jb2xMYWJlbHMgPz8gW10pLm1hcChyZXBsYWNlNWVUYWdzKTtcbiAgICAgIGNvbnN0IHJvd3MgPSBBcnJheS5pc0FycmF5KGcucm93cylcbiAgICAgICAgPyBnLnJvd3NcbiAgICAgICAgOiBBcnJheS5pc0FycmF5KGcucm93c1NwZWxsUHJvZ3Jlc3Npb24pXG4gICAgICAgICAgPyBnLnJvd3NTcGVsbFByb2dyZXNzaW9uXG4gICAgICAgICAgOiBbXTtcbiAgICAgIHJvd3MuZm9yRWFjaCgocjogYW55LCBpOiBhbnkpID0+IHtcbiAgICAgICAgY29uc3QgbHZsID0gaSArIDE7XG4gICAgICAgIHJvd3NNYXBbbHZsXSA/Pz0ge307XG4gICAgICAgIHIuZm9yRWFjaCgoYzogYW55LCBqOiBudW1iZXIpID0+IHtcbiAgICAgICAgICBjb25zdCBsYWIgPSBjb2xzW2pdO1xuICAgICAgICAgIGlmICghbGFiKSByZXR1cm47XG4gICAgICAgICAgbGFiZWxzLmFkZChsYWIpO1xuICAgICAgICAgIHJvd3NNYXBbbHZsXVtsYWJdID0gdHlwZW9mIGMgPT09IFwib2JqZWN0XCIgJiYgYyAhPT0gbnVsbCAmJiBcInZhbHVlXCIgaW4gY1xuICAgICAgICAgICAgPyBTdHJpbmcoYy52YWx1ZSlcbiAgICAgICAgICAgIDogU3RyaW5nKGMgPz8gXCJcIik7XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfVxuICAgIGNvbnN0IGhkcnMgPSBBcnJheS5mcm9tKGxhYmVscyk7XG4gICAgc3ViTGluZXMucHVzaChgIyMgU3ViY2xhc3MgUHJvZ3Jlc3Npb25gKTtcbiAgICBzdWJMaW5lcy5wdXNoKHJlbmRlck1hcmtkb3duVGFibGUoe1xuICAgICAgdHlwZTogICAgICBcInRhYmxlXCIsXG4gICAgICBjYXB0aW9uOiAgIFwiXCIsXG4gICAgICBjb2xMYWJlbHM6IFtcIkxldmVsXCIsIC4uLmhkcnNdLFxuICAgICAgcm93czogICAgICBBcnJheS5mcm9tKHsgbGVuZ3RoOiAyMCB9LCAoXywgaSkgPT4ge1xuICAgICAgICBjb25zdCBsdmwgPSBpICsgMTtcbiAgICAgICAgcmV0dXJuIFtTdHJpbmcobHZsKSwgLi4uaGRycy5tYXAoaCA9PiByb3dzTWFwW2x2bF0/LltoXSA/PyBcIlwiKV07XG4gICAgICB9KVxuICAgIH0pKTtcbiAgfVxuXG4vLyBcdTI1MDBcdTI1MDBcdTI1MDAgRGV0YWlsZWQgbGV2ZWxcdTIwMTBieVx1MjAxMGxldmVsIGZlYXR1cmVzIFx1MjUwMFx1MjUwMFx1MjUwMFxuY29uc3QgZmVhdHNCeUx2bDogUmVjb3JkPG51bWJlciwgYW55W10+ID0ge307XG5mb3IgKGNvbnN0IGYgb2Ygc3ViY2xhc3NGZWF0dXJlcykge1xuICBpZiAoXG4gICAgZi5zdWJjbGFzc1Nob3J0TmFtZSA9PT0gc2Muc2hvcnROYW1lICYmXG4gICAgZi5zdWJjbGFzc1NvdXJjZSA9PT0gc2Muc291cmNlICYmXG4gICAgZi5jbGFzc05hbWUgPT09IGNsYXNzTmFtZVxuICApIHtcbiAgICBjb25zdCBsdmwgPSBmLmxldmVsID8/IDA7XG4gICAgOyhmZWF0c0J5THZsW2x2bF0gPz89IFtdKS5wdXNoKGYpO1xuICB9XG59XG5cbi8vIEJ1aWxkIHN1YmNsYXNzIHRyYWl0cyAod2lraWxpbmtzIHRvIGhlYWRlcnMgaW4gdGhpcyBzdWJjbGFzcyBmaWxlKVxuY29uc3QgSUdOT1JFX1RSQUlUUyA9IFtcIkFiaWxpdHkgU2NvcmUgSW1wcm92ZW1lbnRcIiwgXCJBcmNoZXR5cGUgRmVhdHVyZVwiLCBcIlN1YmNsYXNzIEZlYXR1cmVcIl07XG5jb25zdCB0cmFpdE5hbWVzID0gQXJyYXkuZnJvbShcbiAgbmV3IFNldChcbiAgICBPYmplY3QudmFsdWVzKGZlYXRzQnlMdmwpXG4gICAgICAuZmxhdCgpXG4gICAgICAubWFwKChmOiBhbnkpID0+IFN0cmluZyhmPy5uYW1lIHx8IFwiXCIpLnRyaW0oKSlcbiAgICAgIC5maWx0ZXIobiA9PiBuICYmICFJR05PUkVfVFJBSVRTLnNvbWUocyA9PiBuLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMocy50b0xvd2VyQ2FzZSgpKSkpXG4gIClcbik7XG5cbmNvbnN0IHRyYWl0TGlua3MgPSB0cmFpdE5hbWVzLm1hcChuID0+IGBbWyR7c3ViY2xhc3NOYW1lfSMke3RvSGVhZGVyQW5jaG9yKG4pfXwke259XV1gKTtcblxuLy8gTWluaW1hbCBmcm9udG1hdHRlciBmb3Igc3ViY2xhc3NlczsgRk1fRklFTERTIGtlZXBzIG9yZGVyaW5nIGNvbnNpc3RlbnRcbmNvbnN0IHN1YllhbWwgPSBzZXJpYWxpemVGcm9udG1hdHRlcih7IHRyYWl0czogdHJhaXRMaW5rcyB9LCBDTEFTU19NRVRBX0RFRlMpO1xuXG5cbmZvciAoY29uc3QgbHZsIG9mIE9iamVjdC5rZXlzKGZlYXRzQnlMdmwpLm1hcChOdW1iZXIpLnNvcnQoKGEsYik9PmEtYikpIHtcbiAgc3ViTGluZXMucHVzaChgLS0tYCwgYCMjIExldmVsICR7bHZsfWApO1xuXG4gIGZvciAoY29uc3QgZiBvZiBmZWF0c0J5THZsW2x2bF0pIHtcbiAgc3ViTGluZXMucHVzaChgIyMjICR7Zi5uYW1lfWApO1xuXG4gIGZvciAoY29uc3QgZW50IG9mIEFycmF5LmlzQXJyYXkoZi5lbnRyaWVzKSA/IGYuZW50cmllcyA6IFtmLmVudHJpZXNdKSB7XG4gICAgLy8gMSkgUGxhaW4gcGFyYWdyYXBoIGVudHJpZXNcbiAgICBpZiAodHlwZW9mIGVudCA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgc3ViTGluZXMucHVzaChyZXBsYWNlNWVUYWdzKGVudCkpO1xuICAgICAgY29udGludWU7XG4gICAgfVxuXG4gICAgaWYgKGVudC50eXBlID09PSBcImVudHJpZXNcIiAmJiAvXk1hbmV1dmVycyQvaS50ZXN0KGVudC5uYW1lKSkge1xuICAgICAgc3ViTGluZXMucHVzaChgIyMjIyMgJHtlbnQubmFtZX1gKTtcbiAgICAgIGZvciAoY29uc3QgdHh0IG9mIEFycmF5LmlzQXJyYXkoZW50LmVudHJpZXMpID8gZW50LmVudHJpZXMgOiBbZW50LmVudHJpZXNdKSB7XG4gICAgICAgIHN1YkxpbmVzLnB1c2godHlwZW9mIHR4dCA9PT0gXCJzdHJpbmdcIlxuICAgICAgICAgID8gcmVwbGFjZTVlVGFncyh0eHQpXG4gICAgICAgICAgOiBmb3JtYXRFbnRyeSh0eHQpKTtcbiAgICAgIH1cblxuICAgICAgY29uc3QgY29kZSA9IChPYmplY3QuZW50cmllcyhPUFRfRkVBVFVSRV9UWVBFX1RPX0ZVTEwpIGFzIFtzdHJpbmcsc3RyaW5nXVtdKVxuICAgICAgICAuZmluZCgoWywgZnVsbF0pID0+XG4gICAgICAgICAgZnVsbC50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKHN1YmNsYXNzTmFtZS50b0xvd2VyQ2FzZSgpKVxuICAgICAgICApPy5bMF07XG4gICAgICBpZiAoY29kZSkge1xuICAgICAgICBjb25zdCBtYXRjaGVzID0gb3B0aW9uYWxGZWF0dXJlcy5maWx0ZXIob2YgPT5cbiAgICAgICAgICBBcnJheS5pc0FycmF5KG9mLmZlYXR1cmVUeXBlKSAmJiBvZi5mZWF0dXJlVHlwZS5pbmNsdWRlcyhjb2RlKVxuICAgICAgICApO1xuICAgICAgICBmb3IgKGNvbnN0IGZlYXREZWYgb2YgbWF0Y2hlcykge1xuICAgICAgICAgIGZvciAoY29uc3Qgc3ViIG9mIGZlYXREZWYuZW50cmllcykge1xuICAgICAgICAgICAgY29uc3QgbGluZSA9IHR5cGVvZiBzdWIgPT09IFwic3RyaW5nXCJcbiAgICAgICAgICAgICAgPyByZXBsYWNlNWVUYWdzKHN1YilcbiAgICAgICAgICAgICAgOiBmb3JtYXRFbnRyeShzdWIpO1xuICAgICAgICAgICAgc3ViTGluZXMucHVzaChgKioke2ZlYXREZWYubmFtZX06KiogJHtsaW5lfWApO1xuICAgICAgICAgIH1cbiAgICAgICAgICBzdWJMaW5lcy5wdXNoKFwiXCIpOyAvLyBzcGFjZXJcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgY29udGludWU7XG4gICAgfVxuXG4gICAgaWYgKGVudC50eXBlID09PSBcImVudHJpZXNcIiAmJiBlbnQubmFtZSkge1xuICAgICAgc3ViTGluZXMucHVzaChgIyMjIyMgJHtlbnQubmFtZX1gKTtcbiAgICAgIGZvciAoY29uc3QgZTIgb2YgQXJyYXkuaXNBcnJheShlbnQuZW50cmllcykgPyBlbnQuZW50cmllcyA6IFtlbnQuZW50cmllc10pIHtcbiAgICAgICAgc3ViTGluZXMucHVzaChmb3JtYXRFbnRyeShlMikpO1xuICAgICAgfVxuICAgICAgY29udGludWU7XG4gICAgfVxuXG4gICAgaWYgKGVudC50eXBlID09PSBcImluc2V0XCIgJiYgZW50Lm5hbWUpIHtcbiAgICAgIGNvbnN0IGlubmVyID0gQXJyYXkuaXNBcnJheShlbnQuZW50cmllcykgPyBlbnQuZW50cmllcyA6IFtlbnQuZW50cmllc107XG4gICAgICBzdWJMaW5lcy5wdXNoKGA+ICoqJHtlbnQubmFtZX0qKmApO1xuICAgICAgaW5uZXIuZm9yRWFjaCgoZTI6IGFueSkgPT4gc3ViTGluZXMucHVzaChgPiAke2Zvcm1hdEVudHJ5KGUyKX1gKSk7XG4gICAgICBjb250aW51ZTtcbiAgICB9XG5cbiAgICBjb25zdCBmYiA9IGZvcm1hdEVudHJ5KGVudCk7XG4gICAgaWYgKGZiKSBzdWJMaW5lcy5wdXNoKGZiKTtcbiAgfVxuICB9XG59XG5cblxuICAvLyBcdTI1MDBcdTI1MDBcdTI1MDAgQ2xlYW4gdXAgJiBwdXNoIFx1MjUwMFx1MjUwMFx1MjUwMFxuICBjb25zdCBzdWJjbGFzc0NvbnRlbnRCb2R5ID0gc3ViTGluZXNcbiAgICAuam9pbihcIlxcblxcblwiKVxuICAgIC5yZXBsYWNlKC9cXG57Myx9L2csIFwiXFxuXFxuXCIpO1xuXG4gIGNvbnN0IHN1YmNsYXNzQ29udGVudCA9IGAtLS1cXG4ke3N1YllhbWx9XFxuLS0tXFxuXFxuJHtzdWJjbGFzc0NvbnRlbnRCb2R5fWA7ICBcblxuICBzdWJjbGFzc0ZpbGVzLnB1c2goe1xuICAgIHBhdGg6IGBDbGFzc2VzLyR7Y2xhc3NOYW1lfS9TdWJjbGFzc2VzLyR7c3ViY2xhc3NOYW1lfS5tZGAsXG4gICAgY29udGVudDogc3ViY2xhc3NDb250ZW50XG4gIH0pO1xufVxuXG5cblxuLy8gXHUyNTAwXHUyNTAwXHUyNTAwIFN1YmNsYXNzZXMgU3VtbWFyeSBcdTI1MDBcdTI1MDBcdTI1MDBcbmlmIChzdWJzLmxlbmd0aCkge1xuICBjb25zdCBsaW5rcyA9IHN1YnMubWFwKChzYzogYW55KSA9PlxuICAgIGBbW1N1YmNsYXNzZXMvJHtzYy5uYW1lLnJlcGxhY2UoL1tcXFxcL10vZywgXCItXCIpfXwke3NjLm5hbWV9XV1gXG4gICk7XG4gIGxpbmVzLnB1c2goYFxcbioqU3ViY2xhc3NlczoqKiAke2xpbmtzLmpvaW4oXCIsIFwiKX1gKTtcbn1cblxuXG4gIC8vIEdldCBmdWxsIGNsYXNzIGZlYXR1cmUgZGVmaW5pdGlvbnNcbmNvbnN0IGFsbEZlYXR1cmVzID0gQXJyYXkuaXNBcnJheShqc29uLmNsYXNzRmVhdHVyZSkgPyBqc29uLmNsYXNzRmVhdHVyZSA6IGpzb24ubG9va3VwPy5jbGFzc0ZlYXR1cmUgPz8gW107XG5jb25zdCBmZWF0dXJlc0J5TGV2ZWw6IFJlY29yZDxudW1iZXIsIGFueVtdPiA9IHt9O1xuXG5mb3IgKGNvbnN0IGVudHJ5IG9mIGFsbEZlYXR1cmVzKSB7XG4gIGlmIChlbnRyeS5jbGFzc05hbWUgIT09IGNsYXNzTmFtZSkgY29udGludWU7XG4gIGNvbnN0IGx2bCA9IGVudHJ5LmxldmVsID8/IDA7XG4gIGlmICghZmVhdHVyZXNCeUxldmVsW2x2bF0pIGZlYXR1cmVzQnlMZXZlbFtsdmxdID0gW107XG4gIGZlYXR1cmVzQnlMZXZlbFtsdmxdLnB1c2goZW50cnkpO1xufVxuXG5cbi8vIFx1MjUwMFx1MjUwMFx1MjUwMCBMZXZlbCBGZWF0dXJlcyBcdTI1MDBcdTI1MDBcdTI1MDBcbmxpbmVzLnB1c2goYGApO1xubGluZXMucHVzaChgLS0tYCk7XG5saW5lcy5wdXNoKGAjIyBMZXZlbCBGZWF0dXJlc2ApO1xuXG5jb25zdCBsZXZlbHMgPSBPYmplY3RcbiAgLmtleXMoZmVhdHVyZXNCeUxldmVsKVxuICAubWFwKG4gPT4gK24pXG4gIC5zb3J0KChhLCBiKSA9PiBhIC0gYik7XG5cbmZvciAoY29uc3QgbHZsIG9mIGxldmVscykge1xuICBsaW5lcy5wdXNoKGAjIyMgTGV2ZWwgJHtsdmx9YCk7XG5cbiAgZm9yIChjb25zdCBmZWF0IG9mIGZlYXR1cmVzQnlMZXZlbFtsdmxdKSB7XG4gICAgLy8gRmVhdHVyZSBoZWFkZXJcbiAgICBsaW5lcy5wdXNoKGAjIyMjICR7ZmVhdC5uYW1lfWApO1xuXG4gICAgLy8gRW5zdXJlIGVudHJpZXMgaXMgYWx3YXlzIGFuIGFycmF5XG4gICAgY29uc3QgZW50cmllcyA9IEFycmF5LmlzQXJyYXkoZmVhdC5lbnRyaWVzKVxuICAgICAgPyBmZWF0LmVudHJpZXNcbiAgICAgIDogW2ZlYXQuZW50cmllc107XG5cbiAgICBmb3IgKGNvbnN0IGVudCBvZiBlbnRyaWVzKSB7XG4gICAgICAvLyAxKSBQbGFpbi10ZXh0IHBhcmFncmFwaFxuICAgICAgICBpZiAodHlwZW9mIGVudCA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgIGNvbnN0IHR4dCA9IGZvcm1hdEVudHJ5KGVudCkudHJpbSgpO1xuICAgICAgICAgIC8vIHNraXAgYW55IHB1cmUtYnJhY2UgbGluZXNcbiAgICAgICAgICBpZiAodHh0ID09PSBcIntcIiB8fCB0eHQgPT09IFwifVwiKSBjb250aW51ZTtcbiAgICAgICAgICBsaW5lcy5wdXNoKHR4dCk7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoZW50LnR5cGUgPT09IFwibGlzdFwiICYmIEFycmF5LmlzQXJyYXkoZW50Lml0ZW1zKSkge1xuICAgIGZvciAoY29uc3QgaXRlbSBvZiBlbnQuaXRlbXMpIHtcbiAgICAgIGxpbmVzLnB1c2goYC0gJHtyZXBsYWNlNWVUYWdzKGl0ZW0pfWApO1xuICAgIH1cbiAgICBjb250aW51ZTtcbiAgfVxuICAgICAgLy8gXHUyNTAwXHUyNTAwXHUyNTAwIGluc2lkZSB5b3VyIGZvciAoY29uc3QgZW50IG9mIGVudHJpZXMpIGxvb3AgXHUyNTAwXHUyNTAwXHUyNTAwXG4gICAgICBpZiAoZW50LnR5cGUgPT09IFwib3B0aW9uc1wiKSB7XG4gIGlmIChlbnQuY291bnQpIHtcbiAgICBsaW5lcy5wdXNoKFwiXCIpO1xuICAgIGxpbmVzLnB1c2goYCoqQ2hvb3NlICR7ZW50LmNvdW50fSBvZiB0aGUgZm9sbG93aW5nIG9wdGlvbnM6KipgKTtcbiAgICBsaW5lcy5wdXNoKFwiXCIpO1xuICB9XG5cbiAgZm9yIChjb25zdCBvcHRSZWYgb2YgQXJyYXkuaXNBcnJheShlbnQuZW50cmllcykgPyBlbnQuZW50cmllcyA6IFtlbnQuZW50cmllc10pIHtcbiAgICBpZiAob3B0UmVmLnR5cGUgPT09IFwicmVmT3B0aW9uYWxmZWF0dXJlXCIpIHtcbiAgICAgIGNvbnN0IFtvcHROYW1lLCBvcHRTcmNdID0gb3B0UmVmLm9wdGlvbmFsZmVhdHVyZS5zcGxpdChcInxcIik7XG4gICAgICBjb25zdCBmZWF0RGVmID0gb3B0aW9uYWxGZWF0dXJlcy5maW5kKFxuICAgICAgICBmID0+IGYubmFtZSA9PT0gb3B0TmFtZSAmJiAoIW9wdFNyYyB8fCBmLnNvdXJjZSA9PT0gb3B0U3JjKVxuICAgICAgKTtcblxuICAgICAgaWYgKGZlYXREZWYpIHtcbiAgICAgICAgLy8gbG9vcCB0aHJvdWdoIGVhY2ggbGluZSBpbiB0aGUgZmVhdHVyZVx1MjAxOXMgZW50cmllc1tdXG4gICAgICAgIGZlYXREZWYuZW50cmllcy5mb3JFYWNoKChzdWJFbnRyeTogYW55LCBpZHg6IGFueSkgPT4ge1xuICAgICAgICAgIC8vIHJlbmRlciB0ZXh0XG4gICAgICAgICAgY29uc3QgdGV4dCA9IHR5cGVvZiBzdWJFbnRyeSA9PT0gXCJzdHJpbmdcIlxuICAgICAgICAgICAgPyByZXBsYWNlNWVUYWdzKHN1YkVudHJ5KVxuICAgICAgICAgICAgOiBmb3JtYXRFbnRyeShzdWJFbnRyeSk7XG5cbiAgICAgICAgICBpZiAoaWR4ID09PSAwKSB7XG4gICAgICAgICAgICAvLyBmaXJzdCBsaW5lOiBib2xkZWQgbmFtZSArIGRlc2NyaXB0aW9uXG4gICAgICAgICAgICBsaW5lcy5wdXNoKGAtICoqJHtmZWF0RGVmLm5hbWV9OioqICR7dGV4dH1gKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gc3Vic2VxdWVudCBsaW5lczogbmVzdGVkIGJ1bGxldFxuICAgICAgICAgICAgbGluZXMucHVzaChgICAtICR7dGV4dH1gKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICBsaW5lcy5wdXNoKFwiXCIpOyAvLyBibGFuayBsaW5lIGFmdGVyIGVhY2ggZmVhdHVyZSBibG9ja1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gZmFsbGJhY2sgaWYgbm90IGZvdW5kXG4gICAgICAgIGxpbmVzLnB1c2goYCoqJHtvcHROYW1lfToqKmApO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICAvLyBub25cdTIwMTByZWZPcHRpb25hbGZlYXR1cmUgZmFsbGJhY2tcbiAgICAgIGNvbnN0IHR4dCA9IGZvcm1hdEVudHJ5KG9wdFJlZik7XG4gICAgICBpZiAodHh0KSBsaW5lcy5wdXNoKGAtICR7dHh0fWApO1xuICAgIH1cbiAgfVxuXG4gIGNvbnRpbnVlO1xufVxuXG5cbiAgICAgIC8vIDMpIFN0YW5kYWxvbmUgcmVmT3B0aW9uYWxmZWF0dXJlXG4gICAgICBpZiAoZW50LnR5cGUgPT09IFwicmVmT3B0aW9uYWxmZWF0dXJlXCIpIHtcbiAgICAgICAgY29uc3QgW25hbWVdID0gZW50Lm9wdGlvbmFsZmVhdHVyZS5zcGxpdChcInxcIik7XG4gICAgICAgIGxpbmVzLnB1c2goYC0gW1ske25hbWV9fCR7bmFtZX1dXWApO1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgLy8gNCkgTmVzdGVkIFx1MjAxQ2VudHJpZXNcdTIwMUQgYmxvY2sgd2l0aCBpdHMgb3duIGhlYWRpbmdcbiAgICAgIGlmIChlbnQudHlwZSA9PT0gXCJlbnRyaWVzXCIgJiYgZW50Lm5hbWUpIHtcbiAgICAgICAgbGluZXMucHVzaChgIyMjIyMgJHtlbnQubmFtZX1gKTtcbiAgICAgICAgY29uc3QgaW5uZXIgPSBBcnJheS5pc0FycmF5KGVudC5lbnRyaWVzKSA/IGVudC5lbnRyaWVzIDogW2VudC5lbnRyaWVzXTtcbiAgICAgICAgZm9yIChjb25zdCBlMiBvZiBpbm5lcikge1xuICAgICAgICAgIGxpbmVzLnB1c2goZm9ybWF0RW50cnkoZTIpKTtcbiAgICAgICAgfVxuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgLy8gNSkgRmFsbGJhY2sgZm9yIGFueSBvdGhlciBvYmplY3Qgc2hhcGVcbiAgICAgIGNvbnN0IGZhbGxiYWNrID0gZm9ybWF0RW50cnkoZW50KTtcbiAgICAgIGlmIChmYWxsYmFjaykgbGluZXMucHVzaChmYWxsYmFjayk7XG4gICAgfVxuXG4gICAgLy8gQmxhbmsgbGluZSBhZnRlciBlYWNoIGZlYXR1cmVcbiAgICBsaW5lcy5wdXNoKGBgKTtcbiAgfSBcblxuICAvLyBEaXZpZGVyIGJldHdlZW4gbGV2ZWxzXG4gIGxpbmVzLnB1c2goYC0tLWApO1xufVxuXG5cblxuICAvLyBzdGl0Y2gsIHJlcGxhY2UgdGFncywgcmV0dXJuXG4gIGxldCBjb250ZW50ID0gYC0tLVxcbiR7eWFtbH1cXG4tLS1cXG5cXG4ke2xpbmVzLmpvaW4oXCJcXG5cIil9YDtcbiAgLy8gY29tbWVudCB0aGlzIG91dCB3aGlsZSBkZWJ1Z2dpbmc6XG4gIGNvbnRlbnQgPSByZXBsYWNlNWVUYWdzKGNvbnRlbnQpO1xuXG4gIGNvbnRlbnQgPSBjb250ZW50XG4gIC5yZXBsYWNlKC9cXG57Myx9L2csICdcXG5cXG4nKSAgIC8vIG5vIG1vcmUgdGhhbiAyIG5ld2xpbmVzIGluIGEgcm93XG4gIC5yZXBsYWNlKC9cXG4gK1xcbi9nLCAnXFxuXFxuJyk7ICAvLyB0cmltIGJsYW5rIGxpbmVzIHdpdGggdHJhaWxpbmcgc3BhY2VzXG5cbiAgcmV0dXJuIFtcbiAgICB7XG4gICAgICBwYXRoOiBgQ2xhc3Nlcy8ke2NsYXNzTmFtZX0vJHtjbGFzc05hbWV9Lm1kYCxcbiAgICAgIGNvbnRlbnQsXG4gICAgfSxcbiAgICAuLi5zdWJjbGFzc0ZpbGVzLFxuICBdO1xuICBcbn1cbiIsICIvLyBzcmMvcGFyc2Vycy9ydWxlcy50c1xuaW1wb3J0IHR5cGUgeyBQYXJzZWRNYXJrZG93bkZpbGUgfSBmcm9tIFwiLi4vLi4vdHlwZXNcIjtcbmltcG9ydCB7IHJlcGxhY2U1ZVRhZ3MgfSBmcm9tIFwiLi9oZWxwZXJzL3RhZ1JlcGxhY2VyXCI7XG5cbi8qKlxuICogUGFyc2UgYWN0aW9ucy5qc29uIGludG8gYSBzaW5nbGUgTWFya2Rvd24gbm90ZSB3aXRoICMjIGhlYWRlcnMgZm9yIGVhY2ggYWN0aW9uLFxuICogaGFuZGxpbmcgbmVzdGVkIGVudHJpZXMsIGluc2V0cywgbGlzdHMsIHRhYmxlcywgYW5kIGFkZGluZyBzZXBhcmF0b3JzLlxuICovXG5leHBvcnQgZnVuY3Rpb24gcGFyc2VBY3Rpb25zRmlsZShqc29uOiBhbnksIGVkaXRpb25JZDogc3RyaW5nKTogUGFyc2VkTWFya2Rvd25GaWxlW10ge1xuICBpZiAoIUFycmF5LmlzQXJyYXkoanNvbi5hY3Rpb24pKSByZXR1cm4gW107XG5cbiAgY29uc3QgbGluZXM6IHN0cmluZ1tdID0gW107XG4gIGZvciAoY29uc3QgYWN0aW9uIG9mIGpzb24uYWN0aW9uKSB7XG4gICAgbGluZXMucHVzaChgIyMgJHthY3Rpb24ubmFtZX1gKTtcbiAgICBjb25zdCBlbnRyaWVzID0gQXJyYXkuaXNBcnJheShhY3Rpb24uZW50cmllcykgPyBhY3Rpb24uZW50cmllcyA6IFthY3Rpb24uZW50cmllc107XG4gICAgZm9yIChjb25zdCBlbnRyeSBvZiBlbnRyaWVzKSB7XG4gICAgICBpZiAoIWVudHJ5KSBjb250aW51ZTtcbiAgICAgIGlmICh0eXBlb2YgZW50cnkgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgY29uc3QgcGFyYXMgPSBlbnRyeS5zcGxpdCgvXFxuezIsfS8pO1xuICAgICAgICBmb3IgKGNvbnN0IHBhcmEgb2YgcGFyYXMpIHtcbiAgICAgICAgICBjb25zdCB0ID0gcGFyYS50cmltKCk7XG4gICAgICAgICAgaWYgKHQpIHtcbiAgICAgICAgICAgIGxpbmVzLnB1c2gocmVwbGFjZTVlVGFncyh0KSk7XG4gICAgICAgICAgICBsaW5lcy5wdXNoKFwiXCIpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChlbnRyeS50eXBlID09PSBcImxpc3RcIiAmJiBBcnJheS5pc0FycmF5KGVudHJ5Lml0ZW1zKSkge1xuICAgICAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgZW50cnkuaXRlbXMpIHtcbiAgICAgICAgICBsaW5lcy5wdXNoKGAtICR7cmVwbGFjZTVlVGFncyhpdGVtKX1gKTtcbiAgICAgICAgfVxuICAgICAgICBsaW5lcy5wdXNoKFwiXCIpO1xuICAgICAgfSBlbHNlIGlmICgoZW50cnkudHlwZSA9PT0gXCJlbnRyaWVzXCIgfHwgZW50cnkudHlwZSA9PT0gXCJpbnNldFwiKSAmJiBBcnJheS5pc0FycmF5KGVudHJ5LmVudHJpZXMpKSB7XG4gICAgICAgIGxpbmVzLnB1c2goYCMjIyAke2VudHJ5Lm5hbWV9YCk7XG4gICAgICAgIGZvciAoY29uc3Qgc3ViIG9mIGVudHJ5LmVudHJpZXMpIHtcbiAgICAgICAgICBpZiAodHlwZW9mIHN1YiA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgY29uc3QgcHMgPSBzdWIuc3BsaXQoL1xcbnsyLH0vKTtcbiAgICAgICAgICAgIGZvciAoY29uc3QgcCBvZiBwcykge1xuICAgICAgICAgICAgICBjb25zdCB0dCA9IHAudHJpbSgpO1xuICAgICAgICAgICAgICBpZiAodHQpIHtcbiAgICAgICAgICAgICAgICBsaW5lcy5wdXNoKHJlcGxhY2U1ZVRhZ3ModHQpKTtcbiAgICAgICAgICAgICAgICBsaW5lcy5wdXNoKFwiXCIpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBlbHNlIGlmIChzdWIudHlwZSA9PT0gXCJsaXN0XCIgJiYgQXJyYXkuaXNBcnJheShzdWIuaXRlbXMpKSB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGxpIG9mIHN1Yi5pdGVtcykge1xuICAgICAgICAgICAgICBsaW5lcy5wdXNoKGAtICR7cmVwbGFjZTVlVGFncyhsaSl9YCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsaW5lcy5wdXNoKFwiXCIpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb25zdCB0eHQgPSBBcnJheS5pc0FycmF5KHN1YilcbiAgICAgICAgICAgICAgPyBzdWIuam9pbihcIiBcIilcbiAgICAgICAgICAgICAgOiB0eXBlb2Ygc3ViID09PSBcIm9iamVjdFwiXG4gICAgICAgICAgICAgICAgPyBKU09OLnN0cmluZ2lmeShzdWIpXG4gICAgICAgICAgICAgICAgOiBTdHJpbmcoc3ViKTtcbiAgICAgICAgICAgIGxpbmVzLnB1c2gocmVwbGFjZTVlVGFncyh0eHQpKTtcbiAgICAgICAgICAgIGxpbmVzLnB1c2goXCJcIik7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKGVudHJ5LnR5cGUgPT09IFwidGFibGVcIiAmJiBBcnJheS5pc0FycmF5KGVudHJ5LnJvd3MpKSB7XG4gICAgICAgIGNvbnN0IGhlYWRlcnMgPSBlbnRyeS5jb2xMYWJlbHMgfHwgW107XG4gICAgICAgIGxpbmVzLnB1c2goYHwgJHtoZWFkZXJzLmpvaW4oXCIgfCBcIil9IHxgKTtcbiAgICAgICAgbGluZXMucHVzaChgfCAke2hlYWRlcnMubWFwKCgpID0+IFwiLS0tXCIpLmpvaW4oXCIgfCBcIil9IHxgKTtcbiAgICAgICAgZm9yIChjb25zdCByb3cgb2YgZW50cnkucm93cykge1xuICAgICAgICAgIGxpbmVzLnB1c2goYHwgJHtyb3cuam9pbihcIiB8IFwiKX0gfGApO1xuICAgICAgICB9XG4gICAgICAgIGxpbmVzLnB1c2goXCJcIik7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zdCB0eHQgPSBBcnJheS5pc0FycmF5KGVudHJ5KVxuICAgICAgICAgID8gZW50cnkuam9pbihcIiBcIilcbiAgICAgICAgICA6IHR5cGVvZiBlbnRyeSA9PT0gXCJvYmplY3RcIlxuICAgICAgICAgICAgPyBKU09OLnN0cmluZ2lmeShlbnRyeSlcbiAgICAgICAgICAgIDogU3RyaW5nKGVudHJ5KTtcbiAgICAgICAgbGluZXMucHVzaChyZXBsYWNlNWVUYWdzKHR4dCkpO1xuICAgICAgICBsaW5lcy5wdXNoKFwiXCIpO1xuICAgICAgfVxuICAgIH1cbiAgICAvLyBTZXBhcmF0b3IgYmV0d2VlbiBhY3Rpb25zXG4gICAgbGluZXMucHVzaChcIi0tLVwiKTtcbiAgfVxuICBjb25zdCBjbGVhbmVkID0gbGluZXMucmVkdWNlPHN0cmluZ1tdPigoYWNjLCBjdXJyKSA9PiB7XG4gICAgaWYgKGN1cnIgPT09IFwiXCIgJiYgYWNjLmxlbmd0aCAmJiBhY2NbYWNjLmxlbmd0aCAtIDFdID09PSBcIlwiKSByZXR1cm4gYWNjO1xuICAgIHJldHVybiBhY2MuY29uY2F0KGN1cnIpO1xuICB9LCBbXSk7XG4gIHJldHVybiBbXG4gICAge1xuICAgICAgcGF0aDogXCJSdWxlcyBhbmQgUmVmZXJlbmNlL0FjdGlvbnMubWRcIixcbiAgICAgIGNvbnRlbnQ6IGNsZWFuZWQuam9pbihcIlxcblwiKS50cmltKCkgKyBcIlxcblwiLFxuICAgIH0sXG4gIF07XG59XG5cblxuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlQ29uZGl0aW9uc0Rpc2Vhc2VzRmlsZShqc29uOiBhbnksIGVkaXRpb25JZDogc3RyaW5nKTogUGFyc2VkTWFya2Rvd25GaWxlW10ge1xuICBjb25zdCBvdXRwdXRzOiBQYXJzZWRNYXJrZG93bkZpbGVbXSA9IFtdO1xuICBjb25zdCBwcm9jZXNzSXRlbXMgPSAoaXRlbXM6IGFueVtdLCBvdXRQYXRoOiBzdHJpbmcpID0+IHtcbiAgICBjb25zdCBsaW5lczogc3RyaW5nW10gPSBbXTtcbiAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgaXRlbXMpIHtcbiAgICAgIGxpbmVzLnB1c2goYCMjICR7aXRlbS5uYW1lfWApO1xuICAgICAgY29uc3QgZW50cmllcyA9IEFycmF5LmlzQXJyYXkoaXRlbS5lbnRyaWVzKSA/IGl0ZW0uZW50cmllcyA6IFtpdGVtLmVudHJpZXNdO1xuICAgICAgZm9yIChjb25zdCBlbnRyeSBvZiBlbnRyaWVzKSB7XG4gICAgICAgIGlmICghZW50cnkpIGNvbnRpbnVlO1xuICAgICAgICBpZiAodHlwZW9mIGVudHJ5ID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgY29uc3QgcGFyYXMgPSBlbnRyeS5zcGxpdCgvXFxuezIsfS8pO1xuICAgICAgICAgIGZvciAoY29uc3QgcGFyYSBvZiBwYXJhcykge1xuICAgICAgICAgICAgY29uc3QgdCA9IHBhcmEudHJpbSgpO1xuICAgICAgICAgICAgaWYgKHQpIHtcbiAgICAgICAgICAgICAgbGluZXMucHVzaChyZXBsYWNlNWVUYWdzKHQpKTtcbiAgICAgICAgICAgICAgbGluZXMucHVzaChcIlwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAoZW50cnkudHlwZSA9PT0gXCJsaXN0XCIgJiYgQXJyYXkuaXNBcnJheShlbnRyeS5pdGVtcykpIHtcbiAgICAgICAgICBmb3IgKGNvbnN0IHR4dCBvZiBlbnRyeS5pdGVtcykge1xuICAgICAgICAgICAgbGluZXMucHVzaChgLSAke3JlcGxhY2U1ZVRhZ3ModHh0KX1gKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgbGluZXMucHVzaChcIlwiKTtcbiAgICAgICAgfSBlbHNlIGlmIChlbnRyeS50eXBlID09PSBcInRhYmxlXCIgJiYgQXJyYXkuaXNBcnJheShlbnRyeS5yb3dzKSkge1xuICAgICAgICAgIGNvbnN0IGhlYWRlcnMgPSBlbnRyeS5jb2xMYWJlbHMgfHwgW107XG4gICAgICAgICAgbGluZXMucHVzaChgfCAke2hlYWRlcnMuam9pbihcIiB8IFwiKX0gfGApO1xuICAgICAgICAgIGxpbmVzLnB1c2goYHwgJHtoZWFkZXJzLm1hcCgoKSA9PiBcIi0tLVwiKS5qb2luKFwiIHwgXCIpfSB8YCk7XG4gICAgICAgICAgZm9yIChjb25zdCByb3cgb2YgZW50cnkucm93cykge1xuICAgICAgICAgICAgbGluZXMucHVzaChgfCAke3Jvdy5qb2luKFwiIHwgXCIpfSB8YCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGxpbmVzLnB1c2goXCJcIik7XG4gICAgICAgIH0gZWxzZSBpZiAoZW50cnkudHlwZSA9PT0gXCJlbnRyaWVzXCIgJiYgQXJyYXkuaXNBcnJheShlbnRyeS5lbnRyaWVzKSkge1xuICAgICAgICAgIGxpbmVzLnB1c2goYCMjIyAke2VudHJ5Lm5hbWV9YCk7XG4gICAgICAgICAgZm9yIChjb25zdCBzdWIgb2YgZW50cnkuZW50cmllcykge1xuICAgICAgICAgICAgY29uc3QgdHh0ID0gdHlwZW9mIHN1YiA9PT0gXCJzdHJpbmdcIiA/IHN1YiA6IFN0cmluZyhzdWIpO1xuICAgICAgICAgICAgbGluZXMucHVzaChyZXBsYWNlNWVUYWdzKHR4dCkpO1xuICAgICAgICAgICAgbGluZXMucHVzaChcIlwiKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY29uc3QgdHh0ID0gQXJyYXkuaXNBcnJheShlbnRyeSkgPyBlbnRyeS5qb2luKFwiIFwiKSA6IFN0cmluZyhlbnRyeSk7XG4gICAgICAgICAgbGluZXMucHVzaChyZXBsYWNlNWVUYWdzKHR4dCkpO1xuICAgICAgICAgIGxpbmVzLnB1c2goXCJcIik7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIC8vIFNlcGFyYXRvciBiZXR3ZWVuIGl0ZW1zXG4gICAgICBsaW5lcy5wdXNoKFwiLS0tXCIpO1xuICAgIH1cbiAgICBjb25zdCBjbGVhbmVkID0gbGluZXMucmVkdWNlPHN0cmluZ1tdPigoYWNjLCBjdXJyKSA9PiB7XG4gICAgICBpZiAoY3VyciA9PT0gXCJcIiAmJiBhY2MubGVuZ3RoICYmIGFjY1thY2MubGVuZ3RoIC0gMV0gPT09IFwiXCIpIHJldHVybiBhY2M7XG4gICAgICByZXR1cm4gYWNjLmNvbmNhdChjdXJyKTtcbiAgICB9LCBbXSk7XG4gICAgb3V0cHV0cy5wdXNoKHsgcGF0aDogb3V0UGF0aCwgY29udGVudDogY2xlYW5lZC5qb2luKFwiXFxuXCIpLnRyaW0oKSArIFwiXFxuXCIgfSk7XG4gIH07XG4gIHByb2Nlc3NJdGVtcyhqc29uLmNvbmRpdGlvbiB8fCBbXSwgXCJSdWxlcyBhbmQgUmVmZXJlbmNlL0NvbmRpdGlvbnMubWRcIik7XG4gIHByb2Nlc3NJdGVtcyhqc29uLmRpc2Vhc2UgfHwgW10sIFwiUnVsZXMgYW5kIFJlZmVyZW5jZS9EaXNlYXNlcy5tZFwiKTtcbiAgcmV0dXJuIG91dHB1dHM7XG59XG5cbi8qKlxuICogUGFyc2Ugc2Vuc2VzLmpzb24gaW50byBhIHNpbmdsZSBNYXJrZG93biBub3RlIHdpdGggIyMgaGVhZGVycyBmb3IgZWFjaCBzZW5zZSxcbiAqIGhhbmRsaW5nIGxpc3RzLCB0YWJsZXMsIG5lc3RlZCBlbnRyaWVzL2luc2V0cywgYW5kIHNlcGFyYXRvcnMuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBwYXJzZVNlbnNlc0ZpbGUoanNvbjogYW55LCBlZGl0aW9uSWQ6IHN0cmluZyk6IFBhcnNlZE1hcmtkb3duRmlsZVtdIHtcbiAgY29uc3QgaXRlbXMgPSBBcnJheS5pc0FycmF5KGpzb24uc2Vuc2UpID8ganNvbi5zZW5zZSA6IEFycmF5LmlzQXJyYXkoanNvbi5zZW5zZXMpID8ganNvbi5zZW5zZXMgOiBbXTtcbiAgaWYgKCFpdGVtcy5sZW5ndGgpIHJldHVybiBbXTtcblxuICBjb25zdCBsaW5lczogc3RyaW5nW10gPSBbXTtcbiAgZm9yIChjb25zdCBzZW5zZSBvZiBpdGVtcykge1xuICAgIGxpbmVzLnB1c2goYCMjICR7c2Vuc2UubmFtZX1gKTtcbiAgICBjb25zdCBlbnRyaWVzID0gQXJyYXkuaXNBcnJheShzZW5zZS5lbnRyaWVzKSA/IHNlbnNlLmVudHJpZXMgOiBbc2Vuc2UuZW50cmllc107XG4gICAgZm9yIChjb25zdCBlbnRyeSBvZiBlbnRyaWVzKSB7XG4gICAgICBpZiAoIWVudHJ5KSBjb250aW51ZTtcbiAgICAgIGlmICh0eXBlb2YgZW50cnkgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgY29uc3QgcGFyYXMgPSBlbnRyeS5zcGxpdCgvXFxuezIsfS8pO1xuICAgICAgICBmb3IgKGNvbnN0IHBhcmEgb2YgcGFyYXMpIHtcbiAgICAgICAgICBjb25zdCB0ID0gcGFyYS50cmltKCk7XG4gICAgICAgICAgaWYgKHQpIHtcbiAgICAgICAgICAgIGxpbmVzLnB1c2gocmVwbGFjZTVlVGFncyh0KSk7XG4gICAgICAgICAgICBsaW5lcy5wdXNoKFwiXCIpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChlbnRyeS50eXBlID09PSBcImxpc3RcIiAmJiBBcnJheS5pc0FycmF5KGVudHJ5Lml0ZW1zKSkge1xuICAgICAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgZW50cnkuaXRlbXMpIHtcbiAgICAgICAgICBsaW5lcy5wdXNoKGAtICR7cmVwbGFjZTVlVGFncyhpdGVtKX1gKTtcbiAgICAgICAgfVxuICAgICAgICBsaW5lcy5wdXNoKFwiXCIpO1xuICAgICAgfSBlbHNlIGlmICgoZW50cnkudHlwZSA9PT0gXCJlbnRyaWVzXCIgfHwgZW50cnkudHlwZSA9PT0gXCJpbnNldFwiKSAmJiBBcnJheS5pc0FycmF5KGVudHJ5LmVudHJpZXMpKSB7XG4gICAgICAgIGxpbmVzLnB1c2goYCMjIyAke2VudHJ5Lm5hbWV9YCk7XG4gICAgICAgIGZvciAoY29uc3Qgc3ViIG9mIGVudHJ5LmVudHJpZXMpIHtcbiAgICAgICAgICBjb25zdCB0eHQgPSB0eXBlb2Ygc3ViID09PSBcInN0cmluZ1wiID8gc3ViIDogU3RyaW5nKHN1Yik7XG4gICAgICAgICAgbGluZXMucHVzaChyZXBsYWNlNWVUYWdzKHR4dCkpO1xuICAgICAgICAgIGxpbmVzLnB1c2goXCJcIik7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAoZW50cnkudHlwZSA9PT0gXCJ0YWJsZVwiICYmIEFycmF5LmlzQXJyYXkoZW50cnkucm93cykpIHtcbiAgICAgICAgY29uc3QgaGVhZGVycyA9IGVudHJ5LmNvbExhYmVscyB8fCBbXTtcbiAgICAgICAgbGluZXMucHVzaChgfCAke2hlYWRlcnMuam9pbihcIiB8IFwiKX0gfGApO1xuICAgICAgICBsaW5lcy5wdXNoKGB8ICR7aGVhZGVycy5tYXAoKCkgPT4gXCItLS1cIikuam9pbihcIiB8IFwiKX0gfGApO1xuICAgICAgICBmb3IgKGNvbnN0IHJvdyBvZiBlbnRyeS5yb3dzKSB7XG4gICAgICAgICAgbGluZXMucHVzaChgfCAke3Jvdy5qb2luKFwiIHwgXCIpfSB8YCk7XG4gICAgICAgIH1cbiAgICAgICAgbGluZXMucHVzaChcIlwiKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnN0IHR4dCA9IEFycmF5LmlzQXJyYXkoZW50cnkpID8gZW50cnkuam9pbihcIiBcIikgOiBTdHJpbmcoZW50cnkpO1xuICAgICAgICBsaW5lcy5wdXNoKHJlcGxhY2U1ZVRhZ3ModHh0KSk7XG4gICAgICAgIGxpbmVzLnB1c2goXCJcIik7XG4gICAgICB9XG4gICAgfVxuICAgIC8vIFNlcGFyYXRvciBiZXR3ZWVuIHNlbnNlc1xuICAgIGxpbmVzLnB1c2goXCItLS1cIik7XG4gIH1cbiAgY29uc3QgY2xlYW5lZCA9IGxpbmVzLnJlZHVjZTxzdHJpbmdbXT4oKGFjYywgY3VycikgPT4ge1xuICAgIGlmIChjdXJyID09PSBcIlwiICYmIGFjYy5sZW5ndGggJiYgYWNjW2FjYy5sZW5ndGggLSAxXSA9PT0gXCJcIikgcmV0dXJuIGFjYztcbiAgICByZXR1cm4gYWNjLmNvbmNhdChjdXJyKTtcbiAgfSwgW10pO1xuXG4gIHJldHVybiBbXG4gICAge1xuICAgICAgcGF0aDogXCJSdWxlcyBhbmQgUmVmZXJlbmNlL1NlbnNlcy5tZFwiLFxuICAgICAgY29udGVudDogY2xlYW5lZC5qb2luKFwiXFxuXCIpLnRyaW0oKSArIFwiXFxuXCIsXG4gICAgfSxcbiAgXTtcbn1cblxuLyoqXG4gKiBQYXJzZSBza2lsbHMuanNvbiBpbnRvIGEgc2luZ2xlIE1hcmtkb3duIG5vdGUgd2l0aCAjIyBoZWFkZXJzIGZvciBlYWNoIHNraWxsLFxuICogcHJlcGVuZGluZyBhbiBhYmlsaXR5IGxpbmUsIGhhbmRsaW5nIHBhcmFncmFwaHMsIGFuZCBzZXBhcmF0b3JzLlxuICovXG5leHBvcnQgZnVuY3Rpb24gcGFyc2VTa2lsbHNGaWxlKGpzb246IGFueSwgZWRpdGlvbklkOiBzdHJpbmcpOiBQYXJzZWRNYXJrZG93bkZpbGVbXSB7XG4gIGNvbnN0IGl0ZW1zID0gQXJyYXkuaXNBcnJheShqc29uLnNraWxsKVxuICAgID8ganNvbi5za2lsbFxuICAgIDogQXJyYXkuaXNBcnJheShqc29uLnNraWxscylcbiAgICA/IGpzb24uc2tpbGxzXG4gICAgOiBbXTtcbiAgaWYgKCFpdGVtcy5sZW5ndGgpIHJldHVybiBbXTtcblxuICBjb25zdCBsaW5lczogc3RyaW5nW10gPSBbXTtcbiAgZm9yIChjb25zdCBza2lsbCBvZiBpdGVtcykge1xuICAgIGxpbmVzLnB1c2goYCMjICR7c2tpbGwubmFtZX1gKTtcbiAgICBpZiAoc2tpbGwuYWJpbGl0eSkge1xuICAgICAgbGluZXMucHVzaChgKkFiaWxpdHk6ICR7c2tpbGwuYWJpbGl0eX0qYCk7XG4gICAgICBsaW5lcy5wdXNoKFwiXCIpO1xuICAgIH1cbiAgICBjb25zdCBlbnRyaWVzID0gQXJyYXkuaXNBcnJheShza2lsbC5lbnRyaWVzKSA/IHNraWxsLmVudHJpZXMgOiBbc2tpbGwuZW50cmllc107XG4gICAgZm9yIChjb25zdCBlbnRyeSBvZiBlbnRyaWVzKSB7XG4gICAgICBpZiAoIWVudHJ5KSBjb250aW51ZTtcbiAgICAgIGlmICh0eXBlb2YgZW50cnkgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgY29uc3QgcGFyYXMgPSBlbnRyeS5zcGxpdCgvXFxuezIsfS8pO1xuICAgICAgICBmb3IgKGNvbnN0IHBhcmEgb2YgcGFyYXMpIHtcbiAgICAgICAgICBjb25zdCB0ID0gcGFyYS50cmltKCk7XG4gICAgICAgICAgaWYgKHQpIHtcbiAgICAgICAgICAgIGxpbmVzLnB1c2gocmVwbGFjZTVlVGFncyh0KSk7XG4gICAgICAgICAgICBsaW5lcy5wdXNoKFwiXCIpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChlbnRyeS50eXBlID09PSBcImxpc3RcIiAmJiBBcnJheS5pc0FycmF5KGVudHJ5Lml0ZW1zKSkge1xuICAgICAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgZW50cnkuaXRlbXMpIHtcbiAgICAgICAgICBsaW5lcy5wdXNoKGAtICR7cmVwbGFjZTVlVGFncyhpdGVtKX1gKTtcbiAgICAgICAgfVxuICAgICAgICBsaW5lcy5wdXNoKFwiXCIpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc3QgdHh0ID0gQXJyYXkuaXNBcnJheShlbnRyeSkgPyBlbnRyeS5qb2luKFwiIFwiKSA6IFN0cmluZyhlbnRyeSk7XG4gICAgICAgIGxpbmVzLnB1c2gocmVwbGFjZTVlVGFncyh0eHQpKTtcbiAgICAgICAgbGluZXMucHVzaChcIlwiKTtcbiAgICAgIH1cbiAgICB9XG4gICAgLy8gU2VwYXJhdG9yIGJldHdlZW4gc2tpbGxzXG4gICAgbGluZXMucHVzaChcIi0tLVwiKTtcbiAgfVxuICBjb25zdCBjbGVhbmVkID0gbGluZXMucmVkdWNlPHN0cmluZ1tdPigoYWNjLCBjdXJyKSA9PiB7XG4gICAgaWYgKGN1cnIgPT09IFwiXCIgJiYgYWNjLmxlbmd0aCAmJiBhY2NbYWNjLmxlbmd0aCAtIDFdID09PSBcIlwiKSByZXR1cm4gYWNjO1xuICAgIHJldHVybiBhY2MuY29uY2F0KGN1cnIpO1xuICB9LCBbXSk7XG5cbiAgcmV0dXJuIFtcbiAgICB7XG4gICAgICBwYXRoOiBcIlJ1bGVzIGFuZCBSZWZlcmVuY2UvU2tpbGxzLm1kXCIsXG4gICAgICBjb250ZW50OiBjbGVhbmVkLmpvaW4oXCJcXG5cIikudHJpbSgpICsgXCJcXG5cIixcbiAgICB9LFxuICBdO1xufVxuIiwgImltcG9ydCB0eXBlIHsgUGFyc2VkTWFya2Rvd25GaWxlIH0gZnJvbSBcIi4uLy4uL3R5cGVzXCI7XG5pbXBvcnQgeyByZXBsYWNlNWVUYWdzIH0gZnJvbSBcIi4vaGVscGVycy90YWdSZXBsYWNlclwiO1xuaW1wb3J0IHsgYnVpbGRGTSwgc2VyaWFsaXplRnJvbnRtYXR0ZXIsIEZFQVRTX01FVEFfREVGUyB9IGZyb20gXCIuL2hlbHBlcnMvZnJvbnRtYXR0ZXJcIjtcblxuLyoqXG4gKiBQYXJzZSBmZWF0cy5qc29uIGludG8gb25lIE1hcmtkb3duIGZpbGUgcGVyIGZlYXQgdW5kZXIgUGxheWVyIEJ1aWxkL0ZlYXRzLFxuICogaW5jbHVkaW5nIGZyb250bWF0dGVyLCBjbGVhbmVkIHByZXJlcXVpc2l0ZXMsIGFuZCBmb3JtYXR0ZWQgZW50cmllcy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlRmVhdHNGaWxlKGpzb246IGFueSwgZWRpdGlvbklkOiBzdHJpbmcpOiBQYXJzZWRNYXJrZG93bkZpbGVbXSB7XG4gIGNvbnN0IGZlYXRzOiBhbnlbXSA9IEFycmF5LmlzQXJyYXkoanNvbi5mZWF0KVxuICAgID8ganNvbi5mZWF0XG4gICAgOiBBcnJheS5pc0FycmF5KGpzb24uZmVhdHMpXG4gICAgPyBqc29uLmZlYXRzXG4gICAgOiBbXTtcblxuICByZXR1cm4gZmVhdHMubWFwKChmZWF0OiBhbnkpID0+IHtcbiAgICBjb25zdCBsaW5lczogc3RyaW5nW10gPSBbXTtcblxuICAgIC8vIFx1MjUwMFx1MjUwMFx1MjUwMCBGcm9udG1hdHRlciBcdTI1MDBcdTI1MDBcdTI1MDBcbiAgICBjb25zdCBmbSA9IGJ1aWxkRk0oeyAuLi5mZWF0LCBfZWRpdGlvbklkOiBlZGl0aW9uSWQgfSwgRkVBVFNfTUVUQV9ERUZTKTtcbiAgICBsaW5lcy5wdXNoKFwiLS0tXCIpO1xuICAgIGxpbmVzLnB1c2goc2VyaWFsaXplRnJvbnRtYXR0ZXIoZm0sIEZFQVRTX01FVEFfREVGUykpO1xuICAgIGxpbmVzLnB1c2goXCItLS1cIiwgXCJcIik7XG5cbiAgICAvLyBcdTI1MDBcdTI1MDBcdTI1MDAgVGl0bGUgXHUyNTAwXHUyNTAwXHUyNTAwXG4gICAgbGluZXMucHVzaChgIyAke2ZlYXQubmFtZX1gLCBcIlwiKTtcblxuICAgIC8vIFx1MjUwMFx1MjUwMFx1MjUwMCBQcmVyZXF1aXNpdGVzIFx1MjUwMFx1MjUwMFx1MjUwMFxuICAgIGNvbnN0IHByZXJlcXM6IHN0cmluZ1tdID0gW107XG4gICAgaWYgKEFycmF5LmlzQXJyYXkoZmVhdC5wcmVyZXF1aXNpdGUpKSB7XG4gICAgICBmZWF0LnByZXJlcXVpc2l0ZS5mb3JFYWNoKChwcjogYW55KSA9PiB7XG4gICAgICAgIGlmIChwci5sZXZlbCkgcHJlcmVxcy5wdXNoKGBMZXZlbCAke3ByLmxldmVsfWApO1xuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShwci5mZWF0KSkge1xuICAgICAgICAgIHByLmZlYXQuZm9yRWFjaCgoZjogc3RyaW5nKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBuYW1lID0gZi5zcGxpdChcInxcIilbMF0ucmVwbGFjZSgvXFxiXFx3L2csIGMgPT4gYy50b1VwcGVyQ2FzZSgpKTtcbiAgICAgICAgICAgIHByZXJlcXMucHVzaChgUHJlcmVxdWlzaXRlOiBbWyR7bmFtZX1dXWApO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gICAgaWYgKGZlYXQuc3BlbGxjYXN0aW5nUHJlcGFyZWQpIHByZXJlcXMucHVzaChgUHJlcmVxdWlzaXRlOiBTcGVsbGNhc3RlcmApO1xuICAgIGlmIChBcnJheS5pc0FycmF5KGZlYXQudG9vbFByb2ZpY2llbmNpZXMpKSB7XG4gICAgICBmZWF0LnRvb2xQcm9maWNpZW5jaWVzLmZvckVhY2goKHRwOiBhbnkpID0+IHtcbiAgICAgICAgT2JqZWN0LmVudHJpZXModHApLmZvckVhY2goKFtrZXldKSA9PiB7XG4gICAgICAgICAgaWYgKGtleSA9PT0gJ2FueUFydGlzYW5zVG9vbCcpIHtcbiAgICAgICAgICAgIHByZXJlcXMucHVzaChgUHJlcmVxdWlzaXRlOiBQcm9maWNpZW50IHdpdGggYW4gYXJ0aXNhbidzIHRvb2xgKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcHJlcmVxcy5wdXNoKGBQcmVyZXF1aXNpdGU6IFByb2ZpY2llbnQgd2l0aCAke2tleS5yZXBsYWNlKC8oW0EtWl0pL2csJyAkMScpLnRyaW0oKX1gKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfVxuICAgIGlmIChBcnJheS5pc0FycmF5KGZlYXQuYXJtb3JQcm9maWNpZW5jaWVzKSkge1xuICAgICAgZmVhdC5hcm1vclByb2ZpY2llbmNpZXMuZm9yRWFjaCgoYXJtOiBhbnkpID0+IHtcbiAgICAgICAgY29uc3QgYXJtU3RyID0gdHlwZW9mIGFybSA9PT0gJ3N0cmluZycgPyBhcm0gOiBKU09OLnN0cmluZ2lmeShhcm0pO1xuICAgICAgICBwcmVyZXFzLnB1c2goYFByZXJlcXVpc2l0ZTogUHJvZmljaWVudCB3aXRoICR7YXJtU3RyLnJlcGxhY2UoLyhbQS1aXSkvZywnICQxJykudHJpbSgpfWApO1xuICAgICAgfSk7XG4gICAgfVxuICAgIGlmIChmZWF0LnJhY2UpIHByZXJlcXMucHVzaChgUHJlcmVxdWlzaXRlOiAke2ZlYXQucmFjZX1gKTtcblxuICAgIGlmIChwcmVyZXFzLmxlbmd0aCkge1xuICAgICAgbGluZXMucHVzaChcIioqUHJlcmVxdWlzaXRlcyoqXCIpO1xuICAgICAgcHJlcmVxcy5mb3JFYWNoKHAgPT4gbGluZXMucHVzaChgLSAke3B9YCkpO1xuICAgICAgbGluZXMucHVzaChcIlwiKTtcbiAgICB9XG5cbiAgICAvLyBcdTI1MDBcdTI1MDBcdTI1MDAgRW50cmllcyByZW5kZXJpbmcgXHUyNTAwXHUyNTAwXHUyNTAwXG4gICAgY29uc3QgZW50cmllcyA9IEFycmF5LmlzQXJyYXkoZmVhdC5lbnRyaWVzKSA/IGZlYXQuZW50cmllcyA6IFtmZWF0LmVudHJpZXNdO1xuICAgIGVudHJpZXMuZm9yRWFjaCgoZW50cnk6IGFueSkgPT4ge1xuICAgICAgaWYgKCFlbnRyeSkgcmV0dXJuO1xuXG4gICAgICAvLyBQbGFpbiB0ZXh0XG4gICAgICBpZiAodHlwZW9mIGVudHJ5ID09PSAnc3RyaW5nJykge1xuICAgICAgICBlbnRyeS5zcGxpdCgvXFxuezIsfS8pLmZvckVhY2gocCA9PiB7XG4gICAgICAgICAgY29uc3QgdCA9IHAudHJpbSgpO1xuICAgICAgICAgIGlmICh0KSB7XG4gICAgICAgICAgICBsaW5lcy5wdXNoKHJlcGxhY2U1ZVRhZ3ModCkpO1xuICAgICAgICAgICAgbGluZXMucHVzaChcIlwiKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAvLyBMaXN0XG4gICAgICB9IGVsc2UgaWYgKGVudHJ5LnR5cGUgPT09ICdsaXN0JyAmJiBBcnJheS5pc0FycmF5KGVudHJ5Lml0ZW1zKSkge1xuICAgICAgICBlbnRyeS5pdGVtcy5mb3JFYWNoKChpdDogYW55KSA9PiB7XG4gICAgICAgICAgaWYgKHR5cGVvZiBpdCA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgIGxpbmVzLnB1c2goYC0gJHtyZXBsYWNlNWVUYWdzKGl0KX1gKTtcbiAgICAgICAgICB9IGVsc2UgaWYgKGl0LnR5cGUgPT09ICdpdGVtJyAmJiBpdC5uYW1lKSB7XG4gICAgICAgICAgICBsaW5lcy5wdXNoKGAtICoqJHtpdC5uYW1lfSoqYCk7XG4gICAgICAgICAgICBjb25zdCBzdWJzID0gQXJyYXkuaXNBcnJheShpdC5lbnRyaWVzKSA/IGl0LmVudHJpZXMgOiBbaXQuZW50cmllc107XG4gICAgICAgICAgICBzdWJzLmZvckVhY2goKHM6IGFueSkgPT5cbiAgICAgICAgICAgICAgbGluZXMucHVzaChgICAtICR7cmVwbGFjZTVlVGFncyh0eXBlb2YgcyA9PT0gJ3N0cmluZycgPyBzIDogSlNPTi5zdHJpbmdpZnkocykpfWApXG4gICAgICAgICAgICApO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIGxpbmVzLnB1c2goXCJcIik7XG5cbiAgICAgIC8vIEluc2V0IGFzIGluZGVudGVkIGJ1bGxldFxuICAgICAgfSBlbHNlIGlmIChlbnRyeS50eXBlID09PSAnaW5zZXQnKSB7XG4gICAgICAgIGxpbmVzLnB1c2goYC0gKiR7ZW50cnkubmFtZX0qYCk7XG4gICAgICAgIGNvbnN0IHN1YnMgPSBBcnJheS5pc0FycmF5KGVudHJ5LmVudHJpZXMpID8gZW50cnkuZW50cmllcyA6IFtlbnRyeS5lbnRyaWVzXTtcbiAgICAgICAgc3Vicy5mb3JFYWNoKChzOiBhbnkpID0+IGxpbmVzLnB1c2goYCAgLSAke3JlcGxhY2U1ZVRhZ3Mocyl9YCkpO1xuICAgICAgICBsaW5lcy5wdXNoKFwiXCIpO1xuXG4gICAgICAvLyBTZWN0aW9uIG9yIGVudHJpZXNcbiAgICAgIH0gZWxzZSBpZiAoKGVudHJ5LnR5cGUgPT09ICdzZWN0aW9uJyB8fCBlbnRyeS50eXBlID09PSAnZW50cmllcycpICYmIEFycmF5LmlzQXJyYXkoZW50cnkuZW50cmllcykpIHtcbiAgICAgICAgaWYgKGVudHJ5Lm5hbWUpIHtcbiAgICAgICAgICBsaW5lcy5wdXNoKGAjIyAke2VudHJ5Lm5hbWV9YCk7XG4gICAgICAgICAgbGluZXMucHVzaChcIlwiKTtcbiAgICAgICAgfVxuICAgICAgICBlbnRyeS5lbnRyaWVzLmZvckVhY2goKHM6IGFueSkgPT4ge1xuICAgICAgICAgIGxpbmVzLnB1c2gocmVwbGFjZTVlVGFncyh0eXBlb2YgcyA9PT0gJ3N0cmluZycgPyBzIDogSlNPTi5zdHJpbmdpZnkocykpKTtcbiAgICAgICAgICBsaW5lcy5wdXNoKFwiXCIpO1xuICAgICAgICB9KTtcblxuICAgICAgLy8gVGFibGVcbiAgICAgIH0gZWxzZSBpZiAoZW50cnkudHlwZSA9PT0gJ3RhYmxlJyAmJiBBcnJheS5pc0FycmF5KGVudHJ5LnJvd3MpKSB7XG4gICAgICAgIGNvbnN0IGhkciA9IGVudHJ5LmNvbExhYmVscyB8fCBbXTtcbiAgICAgICAgbGluZXMucHVzaChgfCAke2hkci5qb2luKCcgfCAnKX0gfGApO1xuICAgICAgICBsaW5lcy5wdXNoKGB8ICR7aGRyLm1hcCgoKSA9PiAnLS0tJykuam9pbignIHwgJyl9IHxgKTtcbiAgICAgICAgZW50cnkucm93cy5mb3JFYWNoKChyb3c6IGFueVtdKSA9PlxuICAgICAgICAgIGxpbmVzLnB1c2goYHwgJHtyb3cuam9pbignIHwgJyl9IHxgKVxuICAgICAgICApO1xuICAgICAgICBsaW5lcy5wdXNoKFwiXCIpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIHBhdGg6IGBQbGF5ZXIgQnVpbGQvRmVhdHMvJHtmZWF0Lm5hbWV9Lm1kYCxcbiAgICAgIGNvbnRlbnQ6IGxpbmVzLmpvaW4oXCJcXG5cIikudHJpbSgpICsgXCJcXG5cIixcbiAgICB9O1xuICB9KTtcbn1cbiIsICIvLyBzcmMvcGFyc2Vycy9iYWNrZ3JvdW5kcy50c1xuaW1wb3J0IHR5cGUgeyBQYXJzZWRNYXJrZG93bkZpbGUgfSBmcm9tIFwiLi4vLi4vdHlwZXNcIjtcbmltcG9ydCB7IHJlcGxhY2U1ZVRhZ3MgfSBmcm9tIFwiLi9oZWxwZXJzL3RhZ1JlcGxhY2VyXCI7XG5pbXBvcnQgeyByZW5kZXJNYXJrZG93blRhYmxlIH0gZnJvbSBcIi4vaGVscGVycy9tYXJrZG93blRhYmxlXCI7XG5pbXBvcnQgeyBidWlsZEZNLCBzZXJpYWxpemVGcm9udG1hdHRlciwgRk1fRklFTERTLCBmaWx0ZXJWYWxpZFNraWxscywgQkFDS0dST1VORF9NRVRBX0RFRlMgfSBmcm9tIFwiLi9oZWxwZXJzL2Zyb250bWF0dGVyXCI7XG5cbi8qKlxuICogUGFyc2UgYmFja2dyb3VuZHMuanNvbiBpbnRvIG9uZSBNYXJrZG93biBmaWxlIHBlciBiYWNrZ3JvdW5kIHVuZGVyIFBsYXllciBCdWlsZC9CYWNrZ3JvdW5kcyxcbiAqIGV4Y2x1ZGluZyBhbnkgXHUyMDFDVmFyaWFudFx1MjAyNlx1MjAxRCBvciBcdTIwMUNCYWxkdXJcdTIwMTlzIEdhdGVcdTIwMjZcdTIwMUQgZW50cmllcy5cbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gcGFyc2VCYWNrZ3JvdW5kc0ZpbGUoanNvbjogYW55LCBlZGl0aW9uSWQ6IHN0cmluZyk6IFBhcnNlZE1hcmtkb3duRmlsZVtdIHtcbiAgLy8gcHVsbCBpbiB0aGUgYXJyYXlcbiAgY29uc3QgcmF3OiBhbnlbXSA9IEFycmF5LmlzQXJyYXkoanNvbi5iYWNrZ3JvdW5kKVxuICAgID8ganNvbi5iYWNrZ3JvdW5kXG4gICAgOiBBcnJheS5pc0FycmF5KGpzb24uYmFja2dyb3VuZHMpXG4gICAgPyBqc29uLmJhY2tncm91bmRzXG4gICAgOiBbXTtcblxuICAvLyBmaWx0ZXIgb3V0IHVud2FudGVkIGVudHJpZXNcbiAgY29uc3QgYmFja2dyb3VuZHMgPSByYXcuZmlsdGVyKGJnID0+IHtcbiAgICBjb25zdCBubTogc3RyaW5nID0gYmcubmFtZSB8fCBcIlwiO1xuICAgIHJldHVybiAhbm0uc3RhcnRzV2l0aChcIlZhcmlhbnRcIikgJiYgIW5tLmluY2x1ZGVzKFwiQmFsZHVyJ3MgR2F0ZVwiKTtcbiAgfSk7XG5cbiAgY29uc3Qgb3V0cHV0czogUGFyc2VkTWFya2Rvd25GaWxlW10gPSBbXTtcblxuICBiYWNrZ3JvdW5kcy5mb3JFYWNoKGJnID0+IHtcbiAgICBjb25zdCBsaW5lczogc3RyaW5nW10gPSBbXTtcblxuLy8gXHUyNTAwXHUyNTAwXHUyNTAwIGJ1aWxkIGZyb250bWF0dGVyIFx1MjUwMFx1MjUwMFx1MjUwMFxuY29uc3QgZm0gPSBidWlsZEZNKGJnLCBCQUNLR1JPVU5EX01FVEFfREVGUyk7XG5cbi8vIFx1MjUwMFx1MjUwMFx1MjUwMCBjb2xsZWN0IG9ubHkgdGhlIGVudHJpZXMgZmxhZ2dlZCBpc0ZlYXR1cmUgXHUyNTAwXHUyNTAwXHUyNTAwXG5jb25zdCBleHRyYVRyYWl0czogc3RyaW5nW10gPSBBcnJheS5pc0FycmF5KGJnLmVudHJpZXMpXG4gID8gKGJnLmVudHJpZXMgYXMgYW55W10pXG4gICAgICAuZmlsdGVyKChlOiBhbnkpID0+IGUuZGF0YT8uaXNGZWF0dXJlICYmIHR5cGVvZiBlLm5hbWUgPT09IFwic3RyaW5nXCIpXG4gICAgICAubWFwKChlOiBhbnkpID0+IHtcbiAgICAgICAgY29uc3QgbmFtZSA9IGUubmFtZS5yZXBsYWNlKC9eRmVhdHVyZTpcXHMqLywgXCJcIik7XG4gICAgICAgIHJldHVybiBgW1ske2JnLm5hbWV9IyR7bmFtZX1dXWA7XG4gICAgICB9KVxuICA6IFtdO1xuXG4vLyBcdTI1MDBcdTI1MDBcdTI1MDAgc2VyaWFsaXplIGZyb250bWF0dGVyIFx1MjUwMFx1MjUwMFx1MjUwMFxuY29uc3QgeWFtbCA9IHNlcmlhbGl6ZUZyb250bWF0dGVyKGZtLCBCQUNLR1JPVU5EX01FVEFfREVGUyk7XG5saW5lcy5wdXNoKFwiLS0tXCIsIHlhbWwsIFwiLS0tXCIsIFwiXCIpO1xuXG4gXG4gICAgLy8gdGl0bGVcbiAgICBsaW5lcy5wdXNoKGAjICR7YmcubmFtZX1gLCBcIlwiKTtcblxuICAgIC8vIFx1MjUwMFx1MjUwMFx1MjUwMCBza2lsbCBwcm9maWNpZW5jaWVzIFx1MjUwMFx1MjUwMFx1MjUwMFxuICAgIGlmIChBcnJheS5pc0FycmF5KGJnLnNraWxsUHJvZmljaWVuY2llcykgJiYgYmcuc2tpbGxQcm9maWNpZW5jaWVzLmxlbmd0aCkge1xuICAgICAgY29uc3Qgc2tpbGxzOiBzdHJpbmdbXSA9IFtdO1xuICAgICAgYmcuc2tpbGxQcm9maWNpZW5jaWVzLmZvckVhY2goKGVudDogYW55KSA9PiB7XG4gICAgICAgIGlmICh0eXBlb2YgZW50ID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgc2tpbGxzLnB1c2goY2FwKGVudCkpO1xuICAgICAgICB9IGVsc2UgaWYgKGVudC5jaG9vc2UgJiYgQXJyYXkuaXNBcnJheShlbnQuY2hvb3NlLmZyb20pKSB7XG4gICAgICAgICAgc2tpbGxzLnB1c2goYENob29zZSAke2VudC5jaG9vc2UuYW1vdW50fSBmcm9tICR7ZW50LmNob29zZS5mcm9tLmpvaW4oXCIsIFwiKX1gKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBPYmplY3QuZW50cmllcyhlbnQpXG4gICAgICAgICAgICAuZmlsdGVyKChbLCB2XSkgPT4gdiA9PT0gdHJ1ZSlcbiAgICAgICAgICAgIC5mb3JFYWNoKChba10pID0+IHNraWxscy5wdXNoKGNhcChrKSkpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIGxpbmVzLnB1c2goYCoqU2tpbGwgUHJvZmljaWVuY2llczoqKiAke3NraWxscy5qb2luKFwiLCBcIil9YCwgXCJcIik7XG4gICAgfVxuXG4gICAgLy8gXHUyNTAwXHUyNTAwXHUyNTAwIGxhbmd1YWdlIHByb2ZpY2llbmNpZXMgXHUyNTAwXHUyNTAwXHUyNTAwXG4gICAgaWYgKEFycmF5LmlzQXJyYXkoYmcubGFuZ3VhZ2VQcm9maWNpZW5jaWVzKSAmJiBiZy5sYW5ndWFnZVByb2ZpY2llbmNpZXMubGVuZ3RoKSB7XG4gICAgICBjb25zdCBsYW5nczogc3RyaW5nW10gPSBbXTtcbiAgICAgIGJnLmxhbmd1YWdlUHJvZmljaWVuY2llcy5mb3JFYWNoKChlbnQ6IGFueSkgPT4ge1xuICAgICAgICBpZiAoZW50LmFueVN0YW5kYXJkKSB7XG4gICAgICAgICAgbGFuZ3MucHVzaChgJHtlbnQuYW55U3RhbmRhcmR9IG9mIHlvdXIgY2hvaWNlYCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgT2JqZWN0LmVudHJpZXMoZW50KVxuICAgICAgICAgICAgLmZpbHRlcigoWywgdl0pID0+IHYgPT09IHRydWUpXG4gICAgICAgICAgICAuZm9yRWFjaCgoW2tdKSA9PiBsYW5ncy5wdXNoKGNhcChrKSkpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIGxpbmVzLnB1c2goYCoqTGFuZ3VhZ2VzOioqICR7bGFuZ3Muam9pbihcIiwgXCIpfWAsIFwiXCIpO1xuICAgIH1cblxuICAgIC8vIFx1MjUwMFx1MjUwMFx1MjUwMCB0b29sIHByb2ZpY2llbmNpZXMgXHUyNTAwXHUyNTAwXHUyNTAwXG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KGJnLnRvb2xQcm9maWNpZW5jaWVzKSAmJiBiZy50b29sUHJvZmljaWVuY2llcy5sZW5ndGgpIHtcbiAgICAgICAgY29uc3QgdG9vbHM6IHN0cmluZ1tdID0gW107XG5cbiAgICAgICAgYmcudG9vbFByb2ZpY2llbmNpZXMuZm9yRWFjaCgoZW50OiBhbnkpID0+IHtcbiAgICAgICAgICAgIC8vIFx1MjAxQ0Nob29zZSBYIGZyb20gXHUyMDI2XHUyMDFEXG4gICAgICAgICAgICBpZiAoZW50LmNob29zZSAmJiBBcnJheS5pc0FycmF5KGVudC5jaG9vc2UuZnJvbSkpIHtcbiAgICAgICAgICAgIGNvbnN0IGxpc3QgPSBlbnQuY2hvb3NlLmZyb20ubWFwKGh1bWFuaXplKS5qb2luKFwiLCBcIik7XG4gICAgICAgICAgICB0b29scy5wdXNoKGBDaG9vc2UgJHtlbnQuY2hvb3NlLmNvdW50fSBmcm9tICR7bGlzdH1gKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gcGxhaW4gc3RyaW5nIChyYXJlIGhlcmUsIGJ1dCBqdXN0IGluIGNhc2UpXG4gICAgICAgICAgICBpZiAodHlwZW9mIGVudCA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgdG9vbHMucHVzaChodW1hbml6ZShlbnQpKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gb2JqZWN0IHdpdGggYm9vbGVhbiBmbGFnczogZ2F0aGVyICphbGwqIHRydWUga2V5c1xuICAgICAgICAgICAgT2JqZWN0LmVudHJpZXMoZW50KVxuICAgICAgICAgICAgLmZpbHRlcigoW18sIHZdKSA9PiB2ID09PSB0cnVlKVxuICAgICAgICAgICAgLmZvckVhY2goKFtrXSkgPT4gdG9vbHMucHVzaChodW1hbml6ZShrKSkpO1xuICAgICAgICB9KTtcblxuICAgICAgICBsaW5lcy5wdXNoKGAqKlRvb2wgUHJvZmljaWVuY2llczoqKiAke3Rvb2xzLmpvaW4oXCIsIFwiKX1gLCBcIlwiKTtcbiAgICAgICAgfVxuXG5cblxuICAgIC8vIFx1MjUwMFx1MjUwMFx1MjUwMCBzdGFydGluZyBlcXVpcG1lbnQgXHUyNTAwXHUyNTAwXHUyNTAwXG4gICAgaWYgKEFycmF5LmlzQXJyYXkoYmcuc3RhcnRpbmdFcXVpcG1lbnQpICYmIGJnLnN0YXJ0aW5nRXF1aXBtZW50Lmxlbmd0aCkge1xuICAgICAgbGluZXMucHVzaChgKipFcXVpcG1lbnQ6KipgKTtcbiAgICAgIGJnLnN0YXJ0aW5nRXF1aXBtZW50LmZvckVhY2goKGdycDogYW55KSA9PiB7XG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KGdycC5fKSkge1xuICAgICAgICAgIGdycC5fLmZvckVhY2goKGl0OiBhbnkpID0+IGxpbmVzLnB1c2goYC0gJHtmbXRJdGVtKGl0KX1gKSk7XG4gICAgICAgIH1cbiAgICAgICAgW1wiYVwiLCBcImJcIl0uZm9yRWFjaChrZXkgPT4ge1xuICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KGdycFtrZXldKSkge1xuICAgICAgICAgICAgZ3JwW2tleV0uZm9yRWFjaCgoaXQ6IGFueSkgPT4gbGluZXMucHVzaChgLSAke2ZtdEl0ZW0oaXQpfWApKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgICBsaW5lcy5wdXNoKFwiXCIpO1xuICAgIH1cblxuICAgIC8vIFx1MjUwMFx1MjUwMFx1MjUwMCBhbGwgZmVhdHVyZSAmIGVudHJpZXMgYmxvY2tzIFx1MjUwMFx1MjUwMFx1MjUwMFxuICAgIGlmIChBcnJheS5pc0FycmF5KGJnLmVudHJpZXMpKSB7XG4gICAgICBiZy5lbnRyaWVzLmZvckVhY2goKGVudHJ5OiBhbnkpID0+IHtcbiAgICAgICAgLy8gc2tpcCB0aGUgc3VtbWFyeSBsaXN0IGJsb2NrXG4gICAgICAgIGlmIChlbnRyeS50eXBlID09PSBcImxpc3RcIiAmJiBlbnRyeS5zdHlsZSA9PT0gXCJsaXN0LWhhbmctbm90aXRsZVwiKSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIC8vIHNlY3Rpb24gaGVhZGVyXG4gICAgICAgIGlmIChlbnRyeS5uYW1lKSB7XG5jb25zdCBoZWFkZXIgPSBlbnRyeS5kYXRhPy5pc0ZlYXR1cmVcbiAgPyBlbnRyeS5uYW1lLnJlcGxhY2UoL15GZWF0dXJlOlxccyovLCBcIlwiKVxuICA6IGVudHJ5Lm5hbWU7XG5saW5lcy5wdXNoKGAjIyAke2hlYWRlcn1gLCBcIlwiKTsgICAgICAgIH1cbiAgICAgICAgLy8gZW50cnkgY29udGVudFxuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShlbnRyeS5lbnRyaWVzKSkge1xuICAgICAgICAgIGVudHJ5LmVudHJpZXMuZm9yRWFjaCgoZTogYW55KSA9PiB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIGUgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgICAgbGluZXMucHVzaChyZXBsYWNlNWVUYWdzKGUpLCBcIlwiKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZS50eXBlID09PSBcImxpc3RcIiAmJiBBcnJheS5pc0FycmF5KGUuaXRlbXMpKSB7XG4gICAgICAgICAgICAgIGUuaXRlbXMuZm9yRWFjaCgoaXQ6IGFueSkgPT5cbiAgICAgICAgICAgICAgICBsaW5lcy5wdXNoKGAtICR7cmVwbGFjZTVlVGFncyhpdC5lbnRyeSA/PyBpdCl9YClcbiAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgbGluZXMucHVzaChcIlwiKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZS50eXBlID09PSBcInRhYmxlXCIpIHtcbiAgICAgICAgICAgICAgY29uc3QgdGJsID0gcmVuZGVyTWFya2Rvd25UYWJsZShlKTtcbiAgICAgICAgICAgICAgaWYgKHRibCkgbGluZXMucHVzaCh0YmwsIFwiXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2UgaWYgKGVudHJ5LnR5cGUgPT09IFwibGlzdFwiICYmIEFycmF5LmlzQXJyYXkoZW50cnkuaXRlbXMpKSB7XG4gICAgICAgICAgZW50cnkuaXRlbXMuZm9yRWFjaCgoaXQ6IGFueSkgPT5cbiAgICAgICAgICAgIGxpbmVzLnB1c2goYC0gJHtyZXBsYWNlNWVUYWdzKGl0LmVudHJ5ID8/IGl0KX1gKVxuICAgICAgICAgICk7XG4gICAgICAgICAgbGluZXMucHVzaChcIlwiKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgb3V0cHV0cy5wdXNoKHtcbiAgICAgIHBhdGg6IGBQbGF5ZXIgQnVpbGQvQmFja2dyb3VuZHMvJHtiZy5uYW1lfS5tZGAsXG4gICAgICBjb250ZW50OiBsaW5lcy5qb2luKFwiXFxuXCIpLnRyaW1FbmQoKSArIFwiXFxuXCIsXG4gICAgfSk7XG4gIH0pO1xuXG4gIHJldHVybiBvdXRwdXRzO1xufVxuXG4vLyBcdTIwMTRcdTIwMTRcdTIwMTQgaGVscGVycyBcdTIwMTRcdTIwMTRcdTIwMTRcbmZ1bmN0aW9uIGNhcChzdHI6IHN0cmluZykge1xuICByZXR1cm4gc3RyLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgc3RyLnNsaWNlKDEpO1xufVxuXG5cbmZ1bmN0aW9uIGZtdEl0ZW0oaXRlbTogYW55KTogc3RyaW5nIHtcbiAgLy8gMSkgcmF3IHN0cmluZyBvciB0YWdnZWQgaXRlbVxuICBpZiAodHlwZW9mIGl0ZW0gPT09IFwic3RyaW5nXCIpIHtcbiAgICBpZiAoaXRlbS5pbmNsdWRlcyhcInxcIikpIHtcbiAgICAgIHJldHVybiByZXBsYWNlNWVUYWdzKGB7QGl0ZW0gJHtpdGVtfX1gKTtcbiAgICB9XG4gICAgcmV0dXJuIHJlcGxhY2U1ZVRhZ3MoaXRlbSk7XG4gIH1cblxuICAvLyAyKSBwdXJlIGdvbGQtcGllY2UgZW50cnk6IHsgdmFsdWU6IDEwIH0gb3IgeyBjb250YWluc1ZhbHVlOiAxNTAwIH1cbiAgY29uc3QgcHJpY2VSYXcgPSAoaXRlbS5jb250YWluc1ZhbHVlID8/IGl0ZW0udmFsdWUpIGFzIG51bWJlciB8IHVuZGVmaW5lZDtcbiAgaWYgKFxuICAgIHR5cGVvZiBwcmljZVJhdyA9PT0gXCJudW1iZXJcIiAmJlxuICAgIC8vIG1ha2Ugc3VyZSBpdFx1MjAxOXMgbm90IGFsc28gYW4gXHUyMDFDaXRlbVx1MjAxRCBvciBcdTIwMUNlcXVpcG1lbnRUeXBlXHUyMDFEXG4gICAgIWl0ZW0uaXRlbSAmJlxuICAgICFpdGVtLmVxdWlwbWVudFR5cGUgJiZcbiAgICAhaXRlbS5zcGVjaWFsXG4gICkge1xuICAgIGNvbnN0IGdwID0gcHJpY2VSYXcgPj0gMTAwID8gcHJpY2VSYXcgLyAxMDAgOiBwcmljZVJhdztcbiAgICByZXR1cm4gYCR7Z3B9IGdwYDtcbiAgfVxuXG4gIC8vIDMpIGV4cGxpY2l0IGl0ZW0gb2JqZWN0IHdpdGggb3B0aW9uYWwgcHJpY2VcbiAgaWYgKGl0ZW0uaXRlbSkge1xuICAgIGNvbnN0IGxpbmsgPSByZXBsYWNlNWVUYWdzKGB7QGl0ZW0gJHtpdGVtLml0ZW19fWApO1xuICAgIGlmICh0eXBlb2YgcHJpY2VSYXcgPT09IFwibnVtYmVyXCIpIHtcbiAgICAgIGNvbnN0IGdwID0gcHJpY2VSYXcgPj0gMTAwID8gcHJpY2VSYXcgLyAxMDAgOiBwcmljZVJhdztcbiAgICAgIHJldHVybiBgJHtsaW5rfSAoJHtncH0gZ3ApYDtcbiAgICB9XG4gICAgcmV0dXJuIGxpbms7XG4gIH1cblxuICAvLyA0KSBzcGVjaWFsLWNhc2UgdGV4dFxuICBpZiAodHlwZW9mIGl0ZW0uc3BlY2lhbCA9PT0gXCJzdHJpbmdcIikge1xuICAgIHJldHVybiBpdGVtLnNwZWNpYWw7XG4gIH1cblxuICAvLyA1KSBrbm93biBlcXVpcG1lbnRUeXBlIGtleXNcbiAgaWYgKGl0ZW0uZXF1aXBtZW50VHlwZSkge1xuICAgIHN3aXRjaCAoaXRlbS5lcXVpcG1lbnRUeXBlKSB7XG4gICAgICBjYXNlIFwidG9vbEFydGlzYW5cIjpcbiAgICAgICAgcmV0dXJuIFwiT25lIHR5cGUgb2YgYXJ0aXNhblx1MjAxOXMgdG9vbHMgKG9mIHlvdXIgY2hvaWNlKVwiO1xuICAgICAgY2FzZSBcImluc3RydW1lbnRNdXNpY2FsXCI6XG4gICAgICAgIHJldHVybiBcIk9uZSB0eXBlIG9mIG11c2ljYWwgaW5zdHJ1bWVudCAob2YgeW91ciBjaG9pY2UpXCI7XG4gICAgICBjYXNlIFwic2V0R2FtaW5nXCI6XG4gICAgICAgIHJldHVybiBcIk9uZSBzZXQgb2YgZ2FtaW5nIGRpY2UgKG9mIHlvdXIgY2hvaWNlKVwiO1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuIGh1bWFuaXplKGl0ZW0uZXF1aXBtZW50VHlwZSk7XG4gICAgfVxuICB9XG5cbiAgLy8gNikgZmFsbGJhY2s6IGR1bXAgYW55IGxlZnRvdmVyIHRhZyBzeW50YXhcbiAgcmV0dXJuIHJlcGxhY2U1ZVRhZ3MoSlNPTi5zdHJpbmdpZnkoaXRlbSkpO1xufVxuXG5cblxuZnVuY3Rpb24gaHVtYW5pemUoc3RyOiBzdHJpbmcpOiBzdHJpbmcge1xuICBjb25zdCBzcGFjZWQgPSBzdHIucmVwbGFjZSgvKFthLXpdKShbQS1aXSkvZywgXCIkMSAkMlwiKTtcbiAgcmV0dXJuIHNwYWNlZC5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIHNwYWNlZC5zbGljZSgxKTtcbn1cbiIsICIvLzVlIDIwMjUgaW5zdGFsbGVyXG5cbmltcG9ydCB7IEFwcCwgbm9ybWFsaXplUGF0aCB9IGZyb20gXCJvYnNpZGlhblwiO1xuaW1wb3J0IHR5cGUgeyBFZGl0aW9uIH0gZnJvbSBcIi4uLy4uL2VkaXRpb25zXCI7XG5pbXBvcnQgeyBwYXJzZVNwZWxsc0ZpbGUgfSBmcm9tIFwiLi9zcGVsbHNcIjtcbmltcG9ydCB7IHBhcnNlQmVzdGlhcnlGaWxlIH0gZnJvbSBcIi4vYmVzdGlhcnlcIjtcbmltcG9ydCB7IHBhcnNlSXRlbXNGaWxlIH0gZnJvbSBcIi4vaXRlbXNcIjtcbmltcG9ydCB7IHBhcnNlU3BlY2llc0ZpbGUgfSBmcm9tIFwiLi9zcGVjaWVzXCI7XG5pbXBvcnQgeyBwYXJzZUNsYXNzRmlsZSB9IGZyb20gXCIuL2NsYXNzZXNcIjtcbmltcG9ydCB7IHBhcnNlQWN0aW9uc0ZpbGUsIHBhcnNlQ29uZGl0aW9uc0Rpc2Vhc2VzRmlsZSwgcGFyc2VTZW5zZXNGaWxlLCBwYXJzZVNraWxsc0ZpbGUgfSBmcm9tIFwiLi9ydWxlc1wiO1xuaW1wb3J0IHsgcGFyc2VGZWF0c0ZpbGUgfSBmcm9tIFwiLi9mZWF0c1wiO1xuaW1wb3J0IHsgcGFyc2VCYWNrZ3JvdW5kc0ZpbGUgfSBmcm9tIFwiLi9iYWNrZ3JvdW5kc1wiO1xuaW1wb3J0IHsgVEZpbGUgfSBmcm9tIFwib2JzaWRpYW5cIjtcblxuXG4vLyBcdTIwMTQgR2l0SHViIGxpc3RpbmdzIFx1MjAxNFxuYXN5bmMgZnVuY3Rpb24gbGlzdFNwZWxsRmlsZXNGcm9tR2l0SHViKHJlcG86IHN0cmluZyk6IFByb21pc2U8c3RyaW5nW10+IHtcbiAgY29uc3QgdXJsID0gYGh0dHBzOi8vYXBpLmdpdGh1Yi5jb20vcmVwb3MvJHtyZXBvfS9jb250ZW50cy9kYXRhL3NwZWxsc2A7XG4gIGNvbnN0IHJlcyA9IGF3YWl0IGZldGNoKHVybCk7XG4gIGNvbnN0IGRhdGEgPSAoYXdhaXQgcmVzLmpzb24oKSkgYXMgQXJyYXk8eyBuYW1lOiBzdHJpbmc7IHR5cGU6IHN0cmluZyB9PjtcbiAgcmV0dXJuIGRhdGFcbiAgICAuZmlsdGVyKGl0ZW0gPT4gaXRlbS50eXBlID09PSBcImZpbGVcIiAmJiBpdGVtLm5hbWUuc3RhcnRzV2l0aChcInNwZWxscy1cIikgJiYgaXRlbS5uYW1lLmVuZHNXaXRoKFwiLmpzb25cIikpXG4gICAgLm1hcChpdGVtID0+IGl0ZW0ubmFtZSk7XG59XG5cbmFzeW5jIGZ1bmN0aW9uIGxpc3RCZXN0aWFyeUZpbGVzRnJvbUdpdEh1YihyZXBvOiBzdHJpbmcpOiBQcm9taXNlPHN0cmluZ1tdPiB7XG4gIGNvbnN0IHVybCA9IGBodHRwczovL2FwaS5naXRodWIuY29tL3JlcG9zLyR7cmVwb30vY29udGVudHMvZGF0YS9iZXN0aWFyeWA7XG4gIGNvbnN0IHJlcyA9IGF3YWl0IGZldGNoKHVybCk7XG4gIGNvbnN0IGxpc3QgPSAoYXdhaXQgcmVzLmpzb24oKSkgYXMgQXJyYXk8eyBuYW1lOiBzdHJpbmc7IHR5cGU6IHN0cmluZyB9PjtcbiAgY29uc3QgQ09SRV9TT1VSQ0VTID0gW1xuICAgIFwiYmVzdGlhcnktcGhiLmpzb25cIiwgXCJiZXN0aWFyeS1tbS5qc29uXCIsIFwiYmVzdGlhcnktZG1nLmpzb25cIixcbiAgICBcImJlc3RpYXJ5LXhnZS5qc29uXCIsIFwiYmVzdGlhcnktdmdtLmpzb25cIiwgXCJiZXN0aWFyeS10Y2UuanNvblwiLFxuICAgIFwiYmVzdGlhcnktZWd3Lmpzb25cIiwgXCJiZXN0aWFyeS1lcmx3Lmpzb25cIiwgXCJiZXN0aWFyeS1tdGYuanNvblwiLFxuICAgIFwiYmVzdGlhcnktdnJnci5qc29uXCIsIFwiYmVzdGlhcnktY29zLmpzb25cIiwgXCJiZXN0aWFyeS1vb3RhLmpzb25cIixcbiAgICBcImJlc3RpYXJ5LXBvdGEuanNvblwiLCBcImJlc3RpYXJ5LWhvdGRxLmpzb25cIiwgXCJiZXN0aWFyeS1yb3QuanNvblwiLFxuICAgIFwiYmVzdGlhcnktc2t0Lmpzb25cIiwgXCJiZXN0aWFyeS10ZnR5cC5qc29uXCIsIFwiYmVzdGlhcnktdG9hLmpzb25cIlxuICBdO1xuICByZXR1cm4gbGlzdFxuICAgIC5maWx0ZXIoaXRlbSA9PiBpdGVtLnR5cGUgPT09IFwiZmlsZVwiICYmIENPUkVfU09VUkNFUy5pbmNsdWRlcyhpdGVtLm5hbWUpKVxuICAgIC5tYXAoaXRlbSA9PiBpdGVtLm5hbWUpO1xufVxuXG5jb25zdCBJVEVNX0pTT05fRklMRVMgPSBbXG4gIFwiaXRlbXMtYmFzZS5qc29uXCIsXG4gIFwiaXRlbXMuanNvblwiLFxuICBcIm9iamVjdHMuanNvblwiLFxuICBcInZlaGljbGVzLmpzb25cIixcbiAgXCJkZWNrcy5qc29uXCIsXG5dO1xuXG5hc3luYyBmdW5jdGlvbiBsaXN0SXRlbUZpbGVzRnJvbUdpdEh1YihyZXBvOiBzdHJpbmcpOiBQcm9taXNlPHN0cmluZ1tdPiB7XG4gIGNvbnN0IHVybCA9IGBodHRwczovL2FwaS5naXRodWIuY29tL3JlcG9zLyR7cmVwb30vY29udGVudHMvZGF0YWA7XG4gIGNvbnN0IHJlcyA9IGF3YWl0IGZldGNoKHVybCk7XG4gIGNvbnN0IGRhdGEgPSAoYXdhaXQgcmVzLmpzb24oKSkgYXMgQXJyYXk8eyBuYW1lOiBzdHJpbmc7IHR5cGU6IHN0cmluZyB9PjtcbiAgcmV0dXJuIGRhdGFcbiAgICAuZmlsdGVyKGl0ZW0gPT4gaXRlbS50eXBlID09PSBcImZpbGVcIiAmJiBJVEVNX0pTT05fRklMRVMuaW5jbHVkZXMoaXRlbS5uYW1lKSlcbiAgICAubWFwKGl0ZW0gPT4gaXRlbS5uYW1lKTtcbn1cblxuYXN5bmMgZnVuY3Rpb24gbGlzdENsYXNzRmlsZXNGcm9tR2l0SHViKHJlcG86IHN0cmluZyk6IFByb21pc2U8c3RyaW5nW10+IHtcbiAgY29uc3QgdXJsID0gYGh0dHBzOi8vYXBpLmdpdGh1Yi5jb20vcmVwb3MvJHtyZXBvfS9jb250ZW50cy9kYXRhL2NsYXNzYDtcbiAgY29uc3QgcmVzID0gYXdhaXQgZmV0Y2godXJsKTtcbiAgY29uc3QgbGlzdGluZyA9IChhd2FpdCByZXMuanNvbigpKSBhcyBBcnJheTx7IG5hbWU6IHN0cmluZzsgdHlwZTogc3RyaW5nIH0+O1xuICByZXR1cm4gbGlzdGluZ1xuICAgIC5maWx0ZXIoaXRlbSA9PlxuICAgICAgaXRlbS50eXBlID09PSBcImZpbGVcIiAmJlxuICAgICAgaXRlbS5uYW1lLnN0YXJ0c1dpdGgoXCJjbGFzcy1cIikgJiZcbiAgICAgIGl0ZW0ubmFtZS5lbmRzV2l0aChcIi5qc29uXCIpXG4gICAgKVxuICAgIC5tYXAoaXRlbSA9PiBpdGVtLm5hbWUpO1xufVxuXG4vLyBcdTIwMTQgZW5zdXJlIHRoZSB2YXVsdCBmb2xkZXIgZXhpc3RzIFx1MjAxNFxuYXN5bmMgZnVuY3Rpb24gZW5zdXJlRm9sZGVyKGFwcDogQXBwLCBmb2xkZXJQYXRoOiBzdHJpbmcpIHtcbiAgY29uc3QgcGFydHMgPSBmb2xkZXJQYXRoLnNwbGl0KFwiL1wiKTtcbiAgbGV0IGN1cnIgPSBcIlwiO1xuICBmb3IgKGNvbnN0IHAgb2YgcGFydHMpIHtcbiAgICBjdXJyID0gY3VyciA/IGAke2N1cnJ9LyR7cH1gIDogcDtcbiAgICB0cnkgeyBhd2FpdCBhcHAudmF1bHQuY3JlYXRlRm9sZGVyKGN1cnIpOyB9XG4gICAgY2F0Y2gge30gLy8gYWxyZWFkeSBleGlzdHNcbiAgfVxufVxuXG4vLyBcdTIwMTQgdGhlIG9uZSBlbnRyeS1wb2ludCB0aGF0IHlvdXIgdG9wLWxldmVsIGNhbGxzIFx1MjAxNFxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGltcG9ydEVkaXRpb25EYXRhKHBhcmFtczoge1xuICBhcHA6IEFwcDtcbiAgZWRpdGlvbjogRWRpdGlvbjtcbiAgdGFyZ2V0UGF0aDogc3RyaW5nO1xufSkge1xuICBjb25zdCB7IGFwcCwgZWRpdGlvbiwgdGFyZ2V0UGF0aCB9ID0gcGFyYW1zO1xuICBjb25zdCByZXBvID0gZWRpdGlvbi5yZXBvID8/IFwiXCI7XG5cbiAgLy8gXHVEODNEXHVERDM5IFNQRUxMU1xuICB7XG4gICAgY29uc3Qgc3BlbGxGaWxlcyA9IGF3YWl0IGxpc3RTcGVsbEZpbGVzRnJvbUdpdEh1YihyZXBvKTtcbiAgICBmb3IgKGNvbnN0IGZpbGVOYW1lIG9mIHNwZWxsRmlsZXMpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHJlcyAgPSBhd2FpdCBmZXRjaChgJHtlZGl0aW9uLnNvdXJjZVVybH0vc3BlbGxzLyR7ZmlsZU5hbWV9YCk7XG4gICAgICAgIGNvbnN0IGpzb24gPSBhd2FpdCByZXMuanNvbigpO1xuICAgICAgICBjb25zdCBmaWxlcyA9IHBhcnNlU3BlbGxzRmlsZShqc29uLCBlZGl0aW9uLmlkKTtcbiAgICAgICAgZm9yIChjb25zdCBtZCBvZiBmaWxlcykge1xuICAgICAgICAgIGNvbnN0IGZ1bGxQYXRoID0gbm9ybWFsaXplUGF0aChgJHt0YXJnZXRQYXRofS9TcGVsbHMvJHttZC5wYXRofWApO1xuICAgICAgICAgIGNvbnN0IGZvbGRlciAgID0gZnVsbFBhdGguc3BsaXQoXCIvXCIpLnNsaWNlKDAsIC0xKS5qb2luKFwiL1wiKTtcbiAgICAgICAgICBhd2FpdCBlbnN1cmVGb2xkZXIoYXBwLCBmb2xkZXIpO1xuICAgICAgICAgIGF3YWl0IGFwcC52YXVsdC5hZGFwdGVyLndyaXRlKGZ1bGxQYXRoLCBtZC5jb250ZW50KTtcbiAgICAgICAgfVxuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBjb25zb2xlLndhcm4oYEZhaWxlZCB0byBpbXBvcnQgc3BlbGwgJHtmaWxlTmFtZX06YCwgZSk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLy8gXHVEODNEXHVERDM5IEJFU1RJQVJZXG4gIHtcbiAgICBjb25zdCBiZXN0aWFyeUZpbGVzID0gYXdhaXQgbGlzdEJlc3RpYXJ5RmlsZXNGcm9tR2l0SHViKHJlcG8pO1xuICAgIGZvciAoY29uc3QgZmlsZU5hbWUgb2YgYmVzdGlhcnlGaWxlcykge1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgcmVzICAgID0gYXdhaXQgZmV0Y2goYCR7ZWRpdGlvbi5zb3VyY2VVcmx9L2Jlc3RpYXJ5LyR7ZmlsZU5hbWV9YCk7XG4gICAgICAgIGNvbnN0IGpzb24gICA9IGF3YWl0IHJlcy5qc29uKCk7XG4gICAgICAgIGNvbnN0IHBhcnNlZCA9IHBhcnNlQmVzdGlhcnlGaWxlKGpzb24sIGVkaXRpb24uaWQpO1xuICAgICAgICBmb3IgKGNvbnN0IG1kIG9mIHBhcnNlZCkge1xuICAgICAgICAgIGNvbnN0IGZ1bGxQYXRoID0gbm9ybWFsaXplUGF0aChgJHt0YXJnZXRQYXRofS9CZXN0aWFyeS8ke21kLnBhdGh9YCk7XG4gICAgICAgICAgY29uc3QgZm9sZGVyICAgPSBmdWxsUGF0aC5zcGxpdChcIi9cIikuc2xpY2UoMCwgLTEpLmpvaW4oXCIvXCIpO1xuICAgICAgICAgIGF3YWl0IGVuc3VyZUZvbGRlcihhcHAsIGZvbGRlcik7XG4gICAgICAgICAgYXdhaXQgYXBwLnZhdWx0LmFkYXB0ZXIud3JpdGUoZnVsbFBhdGgsIG1kLmNvbnRlbnQpO1xuICAgICAgICB9XG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGNvbnNvbGUud2FybihgRmFpbGVkIHRvIGltcG9ydCBiZXN0aWFyeSAke2ZpbGVOYW1lfTpgLCBlKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvLyBcdUQ4M0RcdUREMzkgSVRFTVNcbiAge1xuICAgIGNvbnN0IGl0ZW1GaWxlcyA9IGF3YWl0IGxpc3RJdGVtRmlsZXNGcm9tR2l0SHViKHJlcG8pO1xuICAgIGZvciAoY29uc3QgZm4gb2YgaXRlbUZpbGVzKSB7XG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCByZXMgID0gYXdhaXQgZmV0Y2goYCR7ZWRpdGlvbi5zb3VyY2VVcmx9LyR7Zm59YCk7XG4gICAgICAgIGNvbnN0IGpzb24gPSBhd2FpdCByZXMuanNvbigpO1xuICAgICAgICBjb25zdCBtZEZpbGVzID0gcGFyc2VJdGVtc0ZpbGUoanNvbiwgZWRpdGlvbi5pZCk7XG4gICAgICAgIGZvciAoY29uc3QgbWQgb2YgbWRGaWxlcykge1xuICAgICAgICAgIGNvbnN0IGZ1bGxQYXRoID0gbm9ybWFsaXplUGF0aChgJHt0YXJnZXRQYXRofS8ke21kLnBhdGh9YCk7XG4gICAgICAgICAgY29uc3QgZm9sZGVyICAgPSBmdWxsUGF0aC5zcGxpdChcIi9cIikuc2xpY2UoMCwgLTEpLmpvaW4oXCIvXCIpO1xuICAgICAgICAgIGF3YWl0IGVuc3VyZUZvbGRlcihhcHAsIGZvbGRlcik7XG4gICAgICAgICAgYXdhaXQgYXBwLnZhdWx0LmFkYXB0ZXIud3JpdGUoZnVsbFBhdGgsIG1kLmNvbnRlbnQpO1xuICAgICAgICB9XG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGNvbnNvbGUud2FybihgRmFpbGVkIHRvIGltcG9ydCBpdGVtcyBmcm9tICR7Zm59OmAsIGUpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuLy8gXHVEODNEXHVERDM5IFNQRUNJRVNcbntcbiAgY29uc3QgcmVzICA9IGF3YWl0IGZldGNoKGAke2VkaXRpb24uc291cmNlVXJsfS9yYWNlcy5qc29uYCk7XG4gIGNvbnN0IGpzb24gPSBhd2FpdCByZXMuanNvbigpO1xuICBjb25zdCBtZEZpbGVzID0gcGFyc2VTcGVjaWVzRmlsZShqc29uLCBlZGl0aW9uLmlkKTtcbiAgZm9yIChjb25zdCBtZCBvZiBtZEZpbGVzKSB7XG4gICAgY29uc3QgZnVsbFBhdGggPSBub3JtYWxpemVQYXRoKGAke3RhcmdldFBhdGh9L1BsYXllciBCdWlsZC8ke21kLnBhdGh9YCk7XG4gICAgYXdhaXQgZW5zdXJlRm9sZGVyKGFwcCwgZnVsbFBhdGguc3BsaXQoXCIvXCIpLnNsaWNlKDAsIC0xKS5qb2luKFwiL1wiKSk7XG4gICAgYXdhaXQgYXBwLnZhdWx0LmFkYXB0ZXIud3JpdGUoZnVsbFBhdGgsIG1kLmNvbnRlbnQpO1xuICB9XG4vLyBcdUQ4M0RcdUREMzkgRkVUQ0ggT1BUSU9OQUwgRkVBVFVSRVMgSlNPTlxubGV0IG9wdGlvbmFsRmVhdHVyZXM6IGFueVtdID0gW107XG50cnkge1xuICBjb25zdCB1cmwgID0gYCR7ZWRpdGlvbi5zb3VyY2VVcmx9L29wdGlvbmFsZmVhdHVyZXMuanNvbmA7XG4gIGNvbnN0IHJlcyAgPSBhd2FpdCBmZXRjaCh1cmwpO1xuICBjb25zdCB0ZXh0ID0gYXdhaXQgcmVzLnRleHQoKTtcblxuICAvLyBzdHJpcCBhbnkgSlNPTi1oaWphY2sgcHJlZml4IChlLmcuICldfScsKSBhbmQgYW55IEJPTS93aGl0ZXNwYWNlXG4gIGNvbnN0IHN0YXJ0ID0gdGV4dC5pbmRleE9mKFwie1wiKTtcbiAgaWYgKHN0YXJ0ID09PSAtMSkgdGhyb3cgbmV3IEVycm9yKFwiTm8gSlNPTiBvYmplY3QgZm91bmRcIik7XG4gIGNvbnN0IGNsZWFuSnNvbiA9IHRleHQuc2xpY2Uoc3RhcnQpO1xuXG4gIGNvbnN0IHJhdyA9IEpTT04ucGFyc2UoY2xlYW5Kc29uKTtcbiAgb3B0aW9uYWxGZWF0dXJlcyA9IEFycmF5LmlzQXJyYXkocmF3Lm9wdGlvbmFsZmVhdHVyZSlcbiAgICA/IHJhdy5vcHRpb25hbGZlYXR1cmVcbiAgICA6IFtdO1xufSBjYXRjaCAoZSkge1xuICBjb25zb2xlLndhcm4oXCJGYWlsZWQgdG8gaW1wb3J0IG9wdGlvbmFsZmVhdHVyZXMuanNvbjpcIiwgZSk7XG59XG4vLyBcdUQ4M0RcdUREMzkgQ0xBU1NFU1xue1xuICBjb25zdCBjbGFzc0ZpbGVzID0gYXdhaXQgbGlzdENsYXNzRmlsZXNGcm9tR2l0SHViKHJlcG8pO1xuICBmb3IgKGNvbnN0IGZpbGVOYW1lIG9mIGNsYXNzRmlsZXMpIHtcbiAgICB0cnkge1xuICAgICAgLy8gZmV0Y2ggdGhlIHJhdyBjbGFzcyBKU09OXG4gICAgICBjb25zdCByZXMgICAgPSBhd2FpdCBmZXRjaChgJHtlZGl0aW9uLnNvdXJjZVVybH0vY2xhc3MvJHtmaWxlTmFtZX1gKTtcbiAgICAgIGNvbnN0IGpzb24gICA9IGF3YWl0IHJlcy5qc29uKCk7XG5cbiAgICAgIC8vIHBhcnNlIGludG8gb25lIG9yIG1vcmUgbWFya2Rvd24gZmlsZXNcbiAgICAgIGNvbnN0IG1kRmlsZXMgPSBwYXJzZUNsYXNzRmlsZShcbiAgICAgICAganNvbixcbiAgICAgICAgZWRpdGlvbi5pZCxcbiAgICAgICAgZmlsZU5hbWUsXG4gICAgICAgIG9wdGlvbmFsRmVhdHVyZXNcbiAgICAgICk7XG4gICAgICBmb3IgKGNvbnN0IG1kIG9mIG1kRmlsZXMpIHtcbiAgICAgICAgY29uc3QgZnVsbFBhdGggPSBub3JtYWxpemVQYXRoKGAke3RhcmdldFBhdGh9L1BsYXllciBCdWlsZC8ke21kLnBhdGh9YCk7XG4gICAgICAgIC8vIDEpIGVuc3VyZSB0aGUgZm9sZGVyIGV4aXN0c1xuICAgICAgICBhd2FpdCBlbnN1cmVGb2xkZXIoYXBwLCBmdWxsUGF0aC5zcGxpdChcIi9cIikuc2xpY2UoMCwgLTEpLmpvaW4oXCIvXCIpKTtcblxuICAgICAgICAvLyAyKSB3cml0ZSB2aWEgT2JzaWRpYW5cdTIwMTlzIEFQSSBzbyBub3RlcyByZWZyZXNoXG4gICAgICAgIGNvbnN0IGV4aXN0aW5nID0gYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChmdWxsUGF0aCk7XG4gICAgICAgIGlmIChleGlzdGluZyBpbnN0YW5jZW9mIFRGaWxlKSB7XG4gICAgICAgICAgLy8gT3ZlcndyaXRlIGFuIGV4aXN0aW5nIG5vdGUgYW5kIGZpcmUgdGhlIGNoYW5nZSBldmVudFxuICAgICAgICAgIGF3YWl0IGFwcC52YXVsdC5tb2RpZnkoZXhpc3RpbmcsIG1kLmNvbnRlbnQpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIENyZWF0ZSBhIGJyYW5kLW5ldyBub3RlIChhbHNvIGZpcmVzIHRoZSBjaGFuZ2UgZXZlbnQpXG4gICAgICAgICAgYXdhaXQgYXBwLnZhdWx0LmNyZWF0ZShmdWxsUGF0aCwgbWQuY29udGVudCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICBjb25zb2xlLndhcm4oYEZhaWxlZCB0byBpbXBvcnQgY2xhc3MgJHtmaWxlTmFtZX06YCwgZSk7XG4gICAgfVxuICB9XG59XG5cblxuIC8vIFx1RDgzRFx1REQzOSBSVUxFUzogQUNUSU9OU1xuICB7XG4gICAgdHJ5IHtcblxuICAgICAgY29uc3QgcmVzICA9IGF3YWl0IGZldGNoKGAke2VkaXRpb24uc291cmNlVXJsfS9hY3Rpb25zLmpzb25gKTtcbiAgICAgIGNvbnN0IGpzb24gPSBhd2FpdCByZXMuanNvbigpO1xuICAgIFxuICAgICAgY29uc3QgbWRGaWxlcyA9IHBhcnNlQWN0aW9uc0ZpbGUoanNvbiwgZWRpdGlvbi5pZCk7XG4gICAgXG4gICAgICBmb3IgKGNvbnN0IG1kIG9mIG1kRmlsZXMpIHtcbiAgICAgICAgY29uc3QgZnVsbFBhdGggPSBub3JtYWxpemVQYXRoKFxuICAgICAgICAgIGAke3RhcmdldFBhdGh9LyR7bWQucGF0aH1gXG4gICAgICAgICk7XG4gICAgICAgIGNvbnN0IGZvbGRlciA9IGZ1bGxQYXRoLnNwbGl0KFwiL1wiKS5zbGljZSgwLCAtMSkuam9pbihcIi9cIik7XG5cbiAgICAgICAgYXdhaXQgZW5zdXJlRm9sZGVyKGFwcCwgZm9sZGVyKTtcbiAgICAgICAgYXdhaXQgYXBwLnZhdWx0LmFkYXB0ZXIud3JpdGUoZnVsbFBhdGgsIG1kLmNvbnRlbnQpO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIGNvbnNvbGUud2FybihcIkZhaWxlZCB0byBpbXBvcnQgYWN0aW9ucy5qc29uOlwiLCBlKTtcbiAgICB9XG4gIH1cblxuXG4gICAgLy8gXHVEODNEXHVERDM5IFJVTEVTOiBDT05ESVRJT05TICYgRElTRUFTRVNcbiAge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCByZXMgID0gYXdhaXQgZmV0Y2goYCR7ZWRpdGlvbi5zb3VyY2VVcmx9L2NvbmRpdGlvbnNkaXNlYXNlcy5qc29uYCk7XG4gICAgICBjb25zdCBqc29uID0gYXdhaXQgcmVzLmpzb24oKTtcbiAgICAgIGNvbnN0IG1kRmlsZXMgPSBwYXJzZUNvbmRpdGlvbnNEaXNlYXNlc0ZpbGUoanNvbiwgZWRpdGlvbi5pZCk7XG4gICAgICBmb3IgKGNvbnN0IG1kIG9mIG1kRmlsZXMpIHtcbiAgICAgICAgY29uc3QgZnVsbFBhdGggPSBub3JtYWxpemVQYXRoKFxuICAgICAgICAgIGAke3RhcmdldFBhdGh9LyR7bWQucGF0aH1gXG4gICAgICAgICk7XG4gICAgICAgIGNvbnN0IGZvbGRlciA9IGZ1bGxQYXRoLnNwbGl0KFwiL1wiKS5zbGljZSgwLCAtMSkuam9pbihcIi9cIik7XG4gICAgICAgIGF3YWl0IGVuc3VyZUZvbGRlcihhcHAsIGZvbGRlcik7XG4gICAgICAgIGF3YWl0IGFwcC52YXVsdC5hZGFwdGVyLndyaXRlKGZ1bGxQYXRoLCBtZC5jb250ZW50KTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICBjb25zb2xlLndhcm4oXCJGYWlsZWQgdG8gaW1wb3J0IGNvbmRpdGlvbnNkaXNlYXNlcy5qc29uOlwiLCBlKTtcbiAgICB9XG4gIH1cblxuICAgLy8gXHVEODNEXHVERDM5IFJVTEVTOiBTRU5TRVNcbiAge1xuICAgIHRyeSB7XG5cbiAgICAgIGNvbnN0IHJlcyAgPSBhd2FpdCBmZXRjaChgJHtlZGl0aW9uLnNvdXJjZVVybH0vc2Vuc2VzLmpzb25gKTtcbiAgICAgIGNvbnN0IGpzb24gPSBhd2FpdCByZXMuanNvbigpO1xuICAgIFxuICAgICAgY29uc3QgbWRGaWxlcyA9IHBhcnNlU2Vuc2VzRmlsZShqc29uLCBlZGl0aW9uLmlkKTtcbiAgICBcbiAgICAgIGZvciAoY29uc3QgbWQgb2YgbWRGaWxlcykge1xuICAgICAgICBjb25zdCBmdWxsUGF0aCA9IG5vcm1hbGl6ZVBhdGgoXG4gICAgICAgICAgYCR7dGFyZ2V0UGF0aH0vJHttZC5wYXRofWBcbiAgICAgICAgKTtcbiAgICAgICAgY29uc3QgZm9sZGVyID0gZnVsbFBhdGguc3BsaXQoXCIvXCIpLnNsaWNlKDAsIC0xKS5qb2luKFwiL1wiKTtcblxuICAgICAgICBhd2FpdCBlbnN1cmVGb2xkZXIoYXBwLCBmb2xkZXIpO1xuICAgICAgICBhd2FpdCBhcHAudmF1bHQuYWRhcHRlci53cml0ZShmdWxsUGF0aCwgbWQuY29udGVudCk7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgY29uc29sZS53YXJuKFwiRmFpbGVkIHRvIGltcG9ydCBzZW5zZXMuanNvbjpcIiwgZSk7XG4gICAgfVxuICB9XG5cbiAgICAgLy8gXHVEODNEXHVERDM5IFJVTEVTOiBTS0lMTFNcbiAge1xuICAgIHRyeSB7XG5cbiAgICAgIGNvbnN0IHJlcyAgPSBhd2FpdCBmZXRjaChgJHtlZGl0aW9uLnNvdXJjZVVybH0vc2tpbGxzLmpzb25gKTtcbiAgICAgIGNvbnN0IGpzb24gPSBhd2FpdCByZXMuanNvbigpO1xuICAgIFxuICAgICAgY29uc3QgbWRGaWxlcyA9IHBhcnNlU2tpbGxzRmlsZShqc29uLCBlZGl0aW9uLmlkKTtcbiAgICBcbiAgICAgIGZvciAoY29uc3QgbWQgb2YgbWRGaWxlcykge1xuICAgICAgICBjb25zdCBmdWxsUGF0aCA9IG5vcm1hbGl6ZVBhdGgoXG4gICAgICAgICAgYCR7dGFyZ2V0UGF0aH0vJHttZC5wYXRofWBcbiAgICAgICAgKTtcbiAgICAgICAgY29uc3QgZm9sZGVyID0gZnVsbFBhdGguc3BsaXQoXCIvXCIpLnNsaWNlKDAsIC0xKS5qb2luKFwiL1wiKTtcblxuICAgICAgICBhd2FpdCBlbnN1cmVGb2xkZXIoYXBwLCBmb2xkZXIpO1xuICAgICAgICBhd2FpdCBhcHAudmF1bHQuYWRhcHRlci53cml0ZShmdWxsUGF0aCwgbWQuY29udGVudCk7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgY29uc29sZS53YXJuKFwiRmFpbGVkIHRvIGltcG9ydCBza2lsbHMuanNvbjpcIiwgZSk7XG4gICAgfVxuICB9XG5cbiAgIC8vIFx1RDgzRFx1REQzOSBGRUFUU1xuICB7XG4gICAgdHJ5IHtcblxuICAgICAgY29uc3QgcmVzICA9IGF3YWl0IGZldGNoKGAke2VkaXRpb24uc291cmNlVXJsfS9mZWF0cy5qc29uYCk7XG4gICAgICBjb25zdCBqc29uID0gYXdhaXQgcmVzLmpzb24oKTtcbiAgICBcbiAgICAgIGNvbnN0IG1kRmlsZXMgPSBwYXJzZUZlYXRzRmlsZShqc29uLCBlZGl0aW9uLmlkKTtcbiAgICBcbiAgICAgIGZvciAoY29uc3QgbWQgb2YgbWRGaWxlcykge1xuICAgICAgICBjb25zdCBmdWxsUGF0aCA9IG5vcm1hbGl6ZVBhdGgoXG4gICAgICAgICAgYCR7dGFyZ2V0UGF0aH0vJHttZC5wYXRofWBcbiAgICAgICAgKTtcbiAgICAgICAgY29uc3QgZm9sZGVyID0gZnVsbFBhdGguc3BsaXQoXCIvXCIpLnNsaWNlKDAsIC0xKS5qb2luKFwiL1wiKTtcblxuICAgICAgICBhd2FpdCBlbnN1cmVGb2xkZXIoYXBwLCBmb2xkZXIpO1xuICAgICAgICBhd2FpdCBhcHAudmF1bHQuYWRhcHRlci53cml0ZShmdWxsUGF0aCwgbWQuY29udGVudCk7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgY29uc29sZS53YXJuKFwiRmFpbGVkIHRvIGltcG9ydCBmZWF0cy5qc29uOlwiLCBlKTtcbiAgICB9XG4gIH1cblxuLy8gXHVEODNEXHVERDM5IEJBQ0tHUk9VTkRTXG57XG4gIHRyeSB7XG4gICAgY29uc3QgcmVzICA9IGF3YWl0IGZldGNoKGAke2VkaXRpb24uc291cmNlVXJsfS9iYWNrZ3JvdW5kcy5qc29uYCk7XG4gICAgY29uc3QganNvbiA9IGF3YWl0IHJlcy5qc29uKCk7XG5cbiAgICBjb25zdCBtZEZpbGVzID0gcGFyc2VCYWNrZ3JvdW5kc0ZpbGUoanNvbiwgZWRpdGlvbi5pZCk7XG5cbiAgICBmb3IgKGNvbnN0IG1kIG9mIG1kRmlsZXMpIHtcbiAgICAgIC8vIG1kLnBhdGggaXMgXCJQbGF5ZXIgQnVpbGQvQmFja2dyb3VuZHMvPE5hbWU+Lm1kXCJcbiAgICAgIGNvbnN0IGZ1bGxQYXRoID0gbm9ybWFsaXplUGF0aChgJHt0YXJnZXRQYXRofS8ke21kLnBhdGh9YCk7XG4gICAgICBjb25zdCBmb2xkZXIgICA9IGZ1bGxQYXRoLnNwbGl0KFwiL1wiKS5zbGljZSgwLCAtMSkuam9pbihcIi9cIik7XG5cbiAgICAgIGF3YWl0IGVuc3VyZUZvbGRlcihhcHAsIGZvbGRlcik7XG4gICAgICBhd2FpdCBhcHAudmF1bHQuYWRhcHRlci53cml0ZShmdWxsUGF0aCwgbWQuY29udGVudCk7XG4gICAgfVxuICB9IGNhdGNoIChlKSB7XG4gICAgY29uc29sZS53YXJuKFwiRmFpbGVkIHRvIGltcG9ydCBiYWNrZ3JvdW5kcy5qc29uOlwiLCBlKTtcbiAgfVxufVxufVxufSIsICIvLyBoZWxwZXJzL3NvdXJjZU1hcC50c1xuXG4vLyBNYXAgb2YgNWUgc291cmNlIGFiYnJldmlhdGlvbnMgdG8gdGhlaXIgZnVsbCB0aXRsZXNcbmNvbnN0IFNPVVJDRV9OQU1FX01BUDogUmVjb3JkPHN0cmluZywgc3RyaW5nPiA9IHtcbiAgLy8gQ29yZSBydWxlYm9va3NcbiAgUEhCOiBcIlBsYXllcidzIEhhbmRib29rXCIsXG4gIE1NOiAgXCJNb25zdGVyIE1hbnVhbFwiLFxuICBETUc6IFwiRHVuZ2VvbiBNYXN0ZXIncyBHdWlkZVwiLFxuXG4gIC8vIE9mZmljaWFsIGV4cGFuc2lvbnMgJiBhZHZlbnR1cmUgbW9kdWxlc1xuICBDb1M6ICBcIkN1cnNlIG9mIFN0cmFoZFwiLFxuICBPb3RBOiBcIk91dCBvZiB0aGUgQWJ5c3NcIixcbiAgUG90QTogXCJQcmluY2VzIG9mIHRoZSBBcG9jYWx5cHNlXCIsXG4gIEhvdERROiBcIkhvYXJkIG9mIHRoZSBEcmFnb24gUXVlZW5cIixcbiAgUm9UOiAgXCJSaXNlIG9mIFRpYW1hdFwiLFxuICBTS1Q6ICBcIlN0b3JtIEtpbmcncyBUaHVuZGVyXCIsXG4gIFRmdFlQOlwiVGFsZXMgZnJvbSB0aGUgWWF3bmluZyBQb3J0YWxcIixcbiAgVG9BOiAgXCJUb21iIG9mIEFubmloaWxhdGlvblwiLFxuXG4gIC8vIFN1cHBsZW1lbnRhbCBndWlkZXNcbiAgWEdFOiBcIlhhbmF0aGFyJ3MgR3VpZGUgdG8gRXZlcnl0aGluZ1wiLFxuICBWR006IFwiVm9sbydzIEd1aWRlIHRvIE1vbnN0ZXJzXCIsXG4gIFRDRTogXCJUYXNoYSdzIENhdWxkcm9uIG9mIEV2ZXJ5dGhpbmdcIixcbiAgRUdXOiBcIkViZXJyb246IFJpc2luZyBmcm9tIHRoZSBMYXN0IFdhclwiLFxuICBFUkxXOlwiRXhwbG9yZXIncyBHdWlkZSB0byBXaWxkZW1vdW50XCIsXG4gIE1URjogXCJNb25zdGVycyBvZiB0aGUgTXVsdGl2ZXJzZVwiLFxuICBWUkdSOlwiVmFuIFJpY2h0ZW4ncyBHdWlkZSB0byBSYXZlbmxvZnRcIixcblxuICAvLyBBZGRpdGlvbmFsIHNvdXJjZWJvb2tzXG4gIEFBRzogICAgICBcIkFzdHJhbCBBZHZlbnR1cmVyXHUyMDE5cyBHdWlkZVwiLFxuICBBSTogICAgICAgXCJBY3F1aXNpdGlvbnMgSW5jb3Jwb3JhdGVkXCIsXG4gIEFpdEZSQVZGVDpcIkFkdmVudHVyZXMgaW4gdGhlIEZvcmdvdHRlbiBSZWFsbXM6IEEgVmlzdWFsIEZpZWxkIFRlc3RcIixcbiAgQk1UOiAgICAgIFwiQmlnIE1vbnN0ZXIgVG9tZVwiLFxuICBEb0RrOiAgICAgXCJEcmFnb24gb2YgRGFya2tlZXBcIixcbiAgRlREOiAgICAgIFwiRml6YmFuXHUyMDE5cyBUcmVhc3VyeSBvZiBEcmFnb25zXCIsXG4gIEdHUjogICAgICBcIkd1aWxkbWFzdGVyXHUyMDE5cyBHdWlkZSB0byBSYXZuaWNhXCIsXG4gIEdITG9FOiAgICBcIkdob3N0cyBvZiB0aGUgSG9yaXpvbjogTGlnaHQgT3ZlciBFbGVuc2FyaWFcIixcbiAgSURSb3RGOiAgIFwiSWNld2luZCBEYWxlOiBSaW1lIG9mIHRoZSBGcm9zdG1haWRlblwiLFxuICBMTEs6ICAgICAgXCJMb3N0IExhYm9yYXRvcnkgb2YgS3dhbGlzaFwiLFxuICBTYXRPOiAgICAgXCJTYXBwaGlyZSBvZiBUcnV0aFwiLFxuICBTQ0M6ICAgICAgXCJTdHJpeGhhdmVuOiBDdXJyaWN1bHVtIG9mIENoYW9zXCIsXG4gIFREQ1NSOiAgICBcIlRoZSBEdW5nZW9uIENvYWNoXHUyMDE5cyBSdWxlYm9va1wiLFxuICBKdHRSQzogICAgXCJKb3VybmV5cyB0aHJvdWdoIHRoZSBSYWRpYW50IENpdGFkZWxcIixcbiAgXCJBaXRGUi1BVlRcIjpcIkFkdmVudHVyZXMgaW4gdGhlIEZvcmdvdHRlbiBSZWFsbXM6IEEgVmVyZGFudCBUb21iXCIsXG4gIFwiQWl0RlItRkNEXCI6XCJBZHZlbnR1cmVzIGluIHRoZSBGb3Jnb3R0ZW4gUmVhbG1zOiBGcm9tIEN5YW4gRGVwdGhzXCIsXG4gIFJNUjogICAgICBcIkR1bmdlb25zIGFuZCBEcmFnb25zOiBSaWNrIGFuZCBNb3J0eVwiLFxuICBTQ0FHOiAgICAgXCJTd29yZCBDb2FzdCBBZHZlbnR1cmVyJ3MgR3VpZGVcIixcbiAgRUVQQzogICAgIFwiRWxlbWVudGFsIEV2aWwgUGxheWVyJ3MgQ29tcGFuaW9uXCIsXG4gIE1PVDogICAgICBcIk15dGhpYyBPZHlzc2V5cyBvZiBUaGVyb3NcIixcbiAgV0J0VzogICAgIFwiVGhlIFdpbGQgQmV5b25kIHRoZSBXaXRjaGxpZ2h0XCIsXG4gIEJHRElBOiAgICBcIkJhbGR1cidzIEdhdGU6IERlc2NlbnQgSW50byBBdmVybnVzXCIsXG4gIFRvRlc6ICAgICBcIlR1cm4gb2YgRm9ydHVuZSdzIFdoZWVsXCIsXG4gIENvQTogICAgICBcIkNoYWlucyBvZiBBc21vZGV1c1wiLFxuICBDUkNvdE46ICAgXCJDcml0aWNhbCBSb2xlOiBDYWxsIG9mIHRoZSBOZXRoZXJkZWVwXCIsXG4gIFRvRDogICAgICBcIlR5cmFubnkgb2YgRHJhZ29uc1wiLFxuICBNUE1NOiAgICAgXCJNb3JkZW5rYWluZW4gUHJlc2VudHM6IE1vbnN0ZXJzIG9mIHRoZSBNdWx0aXZlcnNlXCIsXG4gIExvWDogICAgICBcIkxpZ2h0IG9mIFhhcnl4aXNcIixcbiAgUWZ0SVM6ICAgIFwiUXVlc3RzIGZyb20gdGhlIEluZmluaXRlIFN0YWlyY2FzZVwiLFxuICBXREg6ICAgICAgXCJXYXRlcmRlZXA6IERyYWdvbiBIZWlzdFwiLFxuICBXRE1NOiAgICAgXCJXYXRlcmRlZXA6IER1bmdlb24gb2YgdGhlIE1hZCBNYWdlXCIsXG4gIFBhQlRTTzogICBcIlBoYW5kZWx2ZXIgYW5kIEJlbG93OiBUaGUgU2hhdHRlcmVkIE9iZWxpc2tcIixcbiAgQ006ICAgICAgIFwiQ2FuZGxla2VlcCBNeXN0ZXJpZXNcIixcbiAgR29TOiAgICAgIFwiR2hvc3RzIG9mIFNhbHRtYXJzaFwiLFxuICBEU290RFE6ICAgXCJEcmFnb25sYW5jZTogU2hhZG93IG9mIHRoZSBEcmFnb24gUXVlZW5cIixcbiAgS2Z0R1Y6ICAgIFwiS2V5cyBmcm9tIHRoZSBHb2xkZW4gVmF1bHRcIixcbiAgU0RXOiAgICAgIFwiRXNzZW50aWFscyBLaXQ6IFNsZWVwaW5nIERyYWdvbidzIFdha2VcIixcbiAgRG9TSTogICAgIFwiRHJhZ29ucyBvZiBTdG9ybXdyZWNrIElzbGVcIixcbiAgR290U0Y6ICAgIFwiR2lhbnRzIG9mIHRoZSBTdGFyIEZvcmdlXCIsXG4gIERJUDogICAgICBcIkVzc2VudGlhbHMgS2l0OiBEcmFnb24gb2YgSWNlc3BpcmUgUGVha1wiLFxuICBTTFc6ICAgICAgXCJFc3NlbnRpYWxzIEtpdDogU3Rvcm0gTG9yZCdzIFdyYXRoXCIsXG4gIElNUjogICAgICBcIkluZmVybmFsIE1hY2hpbmUgUmVidWlsZFwiLFxuICBWRW9SOiAgICAgXCJWZWNuYTogRXZlIG9mIFJ1aW5cIixcbiAgUFNJOiAgICAgIFwiUGxhbmUgU2hpZnQ6IElubmlzdHJhZFwiLFxuICBBQVRNOiAgICAgXCJBZHZlbnR1cmUgQXRsYXM6IFRoZSBNb3J0dWFyeVwiLFxuICBQU1o6ICAgICAgXCJQbGFuZSBTaGlmdDogWmVuZGlrYXJcIixcbiAgREM6ICAgICAgIFwiRXNzZW50aWFscyBLaXQ6IERpdmluZSBDb250ZW50aW9uXCIsXG4gIExNb1A6ICAgICBcIkxvc3QgTWluZSBvZiBQaGFuZGVsdmVyXCIsXG4gIFJNQlJFOiAgICBcIlRoZSBMb3N0IER1bmdlb24gb2YgUmlja2VkbmVzczogQmlnIFJpY2sgRW5lcmd5XCIsXG4gIEhmdFQ6ICAgICBcIkh1bnQgZm9yIHRoZSBUaGVzc2FsaHlkcmFcIixcbiAgUFNYOiAgICAgIFwiUGxhbmUgU2hpZnQ6IEl4YWxhblwiLFxuICBIRlN0Q006ICAgXCJIZXJvZXMnIEZlYXN0OiBTYXZpbmcgdGhlIENoaWxkcmVucyBNZW51XCIsXG4gIFNqQTogICAgICBcIlNwZWxsamFtbWVyIEFjYWRlbXlcIixcbiAgTEs6ICAgICAgIFwiTGlnaHRuaW5nIEtlZXBcIixcbiAgUnRHOiAgICAgIFwiUmV0dXJuIHRvIHRoZSBHbG9yeVwiLFxuICBUVFA6ICAgICAgXCJUaGUgVG9ydGxlIFBhY2thZ2VcIixcbiAgTFI6ICAgICAgIFwiTG9jYXRoYWggUmlzaW5nXCIsXG4gIFBTQTogICAgICBcIlBsYW5lIFNoaWZ0OiBBbW9ua2hldFwiLFxuICBPR0E6ICAgICAgXCJPbmUgR3J1bmcgQWJvdmVcIixcbiAgXCJOUkgtVExUXCI6ICBcIk5lcmRzIFJlc3RvcmluZyBIYXJtb255OiBUaGUgTG9zdCBUb21iXCIsXG4gIFwiTlJILUFUXCI6ICAgXCJOZXJkcyBSZXN0b3JpbmcgSGFybW9ueTogQWR2ZW50dXJlIFRvZ2V0aGVyXCIsXG4gIEJHRzogICAgICBcIkJpZ2J5IFByZXNlbnRzOiBHbG9yeSBvZiB0aGUgR2lhbnRzXCIsXG4gIFJvVE9TOiAgICBcIlRoZSBSaXNlIG9mIFRpYW1hdCBPbmxpbmUgU3VwcGxlbWVudFwiLFxuICBYTXRTOiAgICAgXCJYIE1hcmtzIHRoZSBTcG90XCIsXG4gIFwiSEFULUxNSVwiOiAgXCJIb25vciBBbW9uZyBUaGVpdmVzOiBMZWdlbmRhcnkgTWFnaWMgSXRlbXNcIixcbiAgRGl0TENvVDogIFwiRGVzY2VudCBpbnRvIHRoZSBMb3N0IENhdmVybnMgb2YgVHNvamNhbnRoXCIsXG4gIFwiQWl0RlItRE5cIjogXCJBZHZlbnR1cmVzIGluIHRoZSBGb3Jnb3R0ZW4gUmVhbG1zOiBEZWVwZXN0IE5pZ2h0XCIsXG4gIFwiQWl0RlItVEhQXCI6XCJBZHZlbnR1cmVzIGluIHRoZSBGb3Jnb3R0ZW4gUmVhbG1zOiBUaGUgSGlkZGVuIFBhZ2VzXCIsXG4gIEJBTTogICAgICBcIkJvbydzIEFzdHJhbCBNZW5hZ2VyaWVcIixcbiAgQVpmeVQ6ICAgIFwiQSBaaWIgZm9yIFlvdXIgVGhvdWd0c1wiLFxuICBNQ1YyREM6ICAgXCJNb25zdHJvdXMgQ29tcGVuZGl1bSBWb2x1bWUgMjogRHJhZ29ubGFuY2UgQ3JlYXR1cmVzXCIsXG4gIFBTSzogICAgICBcIlBsYW5lIFNoaWZ0OiBLYWxhZGVzaFwiLFxuICBQU0Q6ICAgICAgXCJQbGFuZSBTaGlmdDogRG9taW5hcmlhXCIsXG4gIEFXTTogICAgICBcIkFkdmVudHVyZSB3aXRoIE11a1wiLFxuICBVQVRoZU15c3RpY0NsYXNzOiBcIlVuZWFydGhlZCBBcmNhbmE6IFRoZSBNeXN0aWMgQ2xhc3NcIixcbiAgQUxDdXJzZU9mU3RyYWhkOiBcIkFkdmVudHVyZXJzIExlYWd1ZTogQ3Vyc2Ugb2YgU3RyYWhkXCIsXG4gIEFMRWxlbWVudGFsRXZpbDogXCJBZHZlbnR1cmVycyBMZWFndWU6IEVsZW1lbnRhbCBFdmlsXCIsXG4gIEFMUmFnZU9mRGVtb25zOiAgXCJBZHZlbnR1cmVycyBMZWFndWU6IFJhZ2Ugb2YgRGVtb25zXCJcbn07XG5cbi8qKlxuICogUmV0dXJucyB0aGUgZnVsbCBzb3VyY2UgbmFtZSBmb3IgYSBnaXZlbiBhYmJyZXZpYXRpb24uXG4gKiBPcHRpb25hbGx5IGFwcGVuZHMgeWVhciBmb3IgUEhCIHZhcmlhbnRzLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0RnVsbFNvdXJjZU5hbWUoYWJicmV2OiBzdHJpbmcsIGVkaXRpb25JZD86IHN0cmluZyk6IHN0cmluZyB7XG4gIGxldCBuYW1lID0gU09VUkNFX05BTUVfTUFQW2FiYnJldl0gPz8gYWJicmV2O1xuXG4gIC8vIEFwcGVuZCB5ZWFyIGZvciBQSEIgaWYgdGhlIGVkaXRpb24gY29udGV4dCBpcyBrbm93blxuICBpZiAoYWJicmV2ID09PSBcIlBIQlwiKSB7XG4gICAgaWYgKGVkaXRpb25JZD8uaW5jbHVkZXMoXCIyMDE0XCIpKSBuYW1lICs9IFwiICgyMDE0KVwiO1xuICAgIGVsc2UgaWYgKGVkaXRpb25JZD8uaW5jbHVkZXMoXCIyMDI1XCIpKSBuYW1lICs9IFwiICgyMDI1KVwiO1xuICB9XG5cbiAgcmV0dXJuIG5hbWU7XG59XG4iLCAiLy8gcGFyc2Vycy81ZS1qc29uL2hlbHBlcnMvdGFnUmVwbGFjZXIudHNcblxuZXhwb3J0IGZ1bmN0aW9uIHJlcGxhY2U1ZVRhZ3MoaW5wdXQ6IHVua25vd24pOiBzdHJpbmcge1xuICAvLyAxKSBUdXJuIGFycmF5cyBpbnRvIHNwYWNlLWpvaW5lZCBzdHJpbmdzXG4gIC8vIDIpIExlYXZlIHN0cmluZ3MgYWxvbmVcbiAgLy8gMykgQ29lcmNlIGV2ZXJ5dGhpbmcgZWxzZSB0byBzdHJpbmcgKG9yIGVtcHR5KVxuICBsZXQgdGV4dDogc3RyaW5nO1xuICBpZiAoQXJyYXkuaXNBcnJheShpbnB1dCkpIHtcbiAgICB0ZXh0ID0gaW5wdXQuam9pbihcIiBcIik7XG4gIH0gZWxzZSBpZiAodHlwZW9mIGlucHV0ID09PSBcInN0cmluZ1wiKSB7XG4gICAgdGV4dCA9IGlucHV0O1xuICB9IGVsc2Uge1xuICAgIHRleHQgPSBTdHJpbmcoaW5wdXQgPz8gXCJcIik7XG4gIH1cblxuICAvLyBub3cgcnVuIGFsbCB5b3VyIEAtdGFnIHJlcGxhY2VtZW50cyBvbiB0aGF0IHRleHRcbiAgcmV0dXJuIHRleHRcbiAgICAucmVwbGFjZSgvXFx7I2l0ZW1FbnRyeVxccysoW159fF0rKSg/OlxcfFtefV0qKT9cXH0vZ2ksIChfbSwgcmF3TmFtZSkgPT4ge1xuICAgICAgcmV0dXJuIGBbWyR7Y2FwaXRhbGl6ZUVhY2goU3RyaW5nKHJhd05hbWUpLnRyaW0oKSl9XV1gO1xuICAgIH1cbiAgICApXG4gICAgLnJlcGxhY2UoL1xce0Aoc3BlbGx8aXRlbXxjcmVhdHVyZXxyYWNlKSAoW158fV0rKSg/OlxcfFtefV0rKT9cXH0vZywgKF8sIF9fLCBuYW1lKSA9PlxuICAgICAgYFtbJHtjYXBpdGFsaXplRWFjaChuYW1lKX1dXWBcbiAgICApXG4gICAgLnJlcGxhY2UoL1xce0AoY29uZGl0aW9ufHN0YXR1c3xhY3Rpb258c2tpbGwpIChbXnx9XSspKD86XFx8W159XSspP1xcfS9nLCAoXywgdGFnLCBuYW1lKSA9PlxuICAgICAgYFtbJHtjYXBpdGFsaXplKHRhZyl9cyMke25hbWV9fCR7Y2FwaXRhbGl6ZUVhY2gobmFtZSl9XV1gXG4gICAgKVxuICAgIC5yZXBsYWNlKC9cXHtAY2xhc3NGZWF0dXJlIChbXnx9XSspXFx8KFtefH1dKykoPzpcXHxbXn1dKyk/XFx9L2csIChfLCBmZWF0dXJlLCBjbHMpID0+XG4gICAgICBgW1ske2Nsc30jJHtmZWF0dXJlfV1dYFxuICAgIClcbiAgICAucmVwbGFjZSgvXFx7QChib29rfGZpbHRlcikgKFtefH1dKykoPzpcXHxbXn1dKyk/XFx9L2csIChfLCBfXywgdHh0KSA9PiB0eHQpXG4gICAgLnJlcGxhY2UoL1xce0Bub3RlIChbXn1dKylcXH0vZywgKF8sIG5vdGUpID0+IGAqJHtub3RlfSpgKVxuICAgIC5yZXBsYWNlKC9cXHtAKGRhbWFnZXxkaWNlfGRjfGhpdHxzZW5zZSkgKFtefV0rKVxcfS9nLCAoXywgX18sIHZhbHVlKSA9PiB2YWx1ZSlcbiAgICAucmVwbGFjZSgvXFx7QGNoYW5jZSAoW158fV0rKSg/OlxcfFtefV0rKT9cXH0vZywgKF8sIHZhbHVlKSA9PiBgJHt2YWx1ZX0lYClcbiAgICAucmVwbGFjZSgvXFx7QHF1aWNrcmVmIChbXnx9XSspKD86XFx8W158XSpcXHxbXn1dKik/XFx9L2csIChfLCB0ZXJtKSA9PiB7XG4gICAgICBjb25zdCBrbm93biA9IFtcbiAgICAgICAgXCJkaWZmaWN1bHQgdGVycmFpblwiLCBcInRvdGFsIGNvdmVyXCIsIFwiaGFsZiBjb3ZlclwiLCBcInRocmVlLXF1YXJ0ZXJzIGNvdmVyXCIsXG4gICAgICAgIFwiaGVhdmlseSBvYnNjdXJlZFwiLCBcImxpZ2h0bHkgb2JzY3VyZWRcIlxuICAgICAgXTtcbiAgICAgIHJldHVybiBrbm93bi5pbmNsdWRlcyh0ZXJtLnRvTG93ZXJDYXNlKCkpXG4gICAgICAgID8gYFtbUnVsZXMjJHtjYXBpdGFsaXplRWFjaCh0ZXJtKX1dXWBcbiAgICAgICAgOiB0ZXJtO1xuICAgIH0pXG4gICAgLnJlcGxhY2UoL1xce1xcQDVldG9vbHNcXHMrKFtefH1dKylcXHxbXn1dK1xcfS9nLCAnJDEnKVxuICAgIC5yZXBsYWNlKC9cXHtAcmVjaGFyZ2VcXHMqKFtefV0rKVxcfS9nLCAoXywgbnVtKSA9PiBgKHJlY2hhcmdlOiAke251bS50cmltKCl9KWApXG4gICAgLnJlcGxhY2UoL1xce0Aoc2NhbGVkaWNlfHNjYWxlZGFtYWdlKVtefV0qXFx8KFtefH1dKylcXH0vZywgKF8sIF9fLCB2YWx1ZSkgPT4gdmFsdWUpXG4gICAgLnJlcGxhY2UoL1xce0BkMjBbXn1dKlxcfS9nLCBcIlwiKVxuICAgIC5yZXBsYWNlKC9cXHtAW159XStcXH0vZywgXCJcIik7XG59XG5cbmZ1bmN0aW9uIGNhcGl0YWxpemUoc3RyOiBzdHJpbmcpOiBzdHJpbmcge1xuICByZXR1cm4gc3RyLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgc3RyLnNsaWNlKDEpLnRvTG93ZXJDYXNlKCk7XG59XG5cbmZ1bmN0aW9uIGNhcGl0YWxpemVFYWNoKHN0cjogc3RyaW5nKTogc3RyaW5nIHtcbiAgcmV0dXJuIHN0ci5zcGxpdChcIiBcIikubWFwKGNhcGl0YWxpemUpLmpvaW4oXCIgXCIpO1xufVxuIiwgImltcG9ydCB7IHJlcGxhY2U1ZVRhZ3MgfSBmcm9tIFwiLi90YWdSZXBsYWNlclwiO1xuXG5leHBvcnQgZnVuY3Rpb24gcmVuZGVyTWFya2Rvd25UYWJsZShlbnRyeTogYW55KTogc3RyaW5nIHtcbiAgaWYgKGVudHJ5LnR5cGUgIT09IFwidGFibGVcIiB8fCAhQXJyYXkuaXNBcnJheShlbnRyeS5yb3dzKSkgcmV0dXJuIFwiXCI7XG5cbiAgY29uc3QgY2FwdGlvbiA9IGVudHJ5LmNhcHRpb24gPyBgIyMjIyMgJHtlbnRyeS5jYXB0aW9ufVxcbmAgOiBcIlwiO1xuXG4gIGNvbnN0IGhlYWRlcnMgPSAoZW50cnkuY29sTGFiZWxzID8/IFtdKVxuICAgIC5tYXAoKGg6IHN0cmluZykgPT4gcmVwbGFjZTVlVGFncyhoLnRyaW0oKSkpOyAvLyBcdTI3MDUgdGFnIHJlcGxhY2Ugb24gaGVhZGVyc1xuXG4gIGNvbnN0IGhlYWRlclJvdyA9IGB8ICR7aGVhZGVycy5qb2luKFwiIHwgXCIpfSB8YDtcbiAgY29uc3QgZGl2aWRlclJvdyA9IGB8ICR7aGVhZGVycy5tYXAoKCkgPT4gXCI6LS1cIikuam9pbihcIiB8IFwiKX0gfGA7XG5cbiAgY29uc3QgYm9keVJvd3MgPSBlbnRyeS5yb3dzLm1hcCgocm93OiBhbnlbXSkgPT4ge1xuICAgIGNvbnN0IGNlbGxzID0gcm93Lm1hcCgoY2VsbCkgPT4ge1xuICAgICAgaWYgKHR5cGVvZiBjZWxsID09PSBcInN0cmluZ1wiKSByZXR1cm4gcmVwbGFjZTVlVGFncyhjZWxsKTsgLy8gXHUyNzA1IHRhZyByZXBsYWNlIHN0cmluZ3NcblxuICAgICAgaWYgKHR5cGVvZiBjZWxsID09PSBcIm9iamVjdFwiKSB7XG4gICAgICAgIGlmIChjZWxsLnJvbGw/LmV4YWN0ICE9PSB1bmRlZmluZWQpIHJldHVybiBgJHtjZWxsLnJvbGwuZXhhY3R9YDtcbiAgICAgICAgaWYgKGNlbGwucm9sbD8ubWluICE9PSB1bmRlZmluZWQgJiYgY2VsbC5yb2xsPy5tYXggIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgIHJldHVybiBgJHtjZWxsLnJvbGwubWlufVx1MjAxMyR7Y2VsbC5yb2xsLm1heH1gO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXBsYWNlNWVUYWdzKEpTT04uc3RyaW5naWZ5KGNlbGwpKTsgLy8gZmFsbGJhY2sgZm9yIHVua25vd24gc2hhcGVzXG4gICAgICB9XG5cbiAgICAgIHJldHVybiByZXBsYWNlNWVUYWdzKFN0cmluZyhjZWxsKSk7XG4gICAgfSk7XG5cbiAgICByZXR1cm4gYHwgJHtjZWxscy5qb2luKFwiIHwgXCIpfSB8YDtcbiAgfSk7XG5cbiAgcmV0dXJuIGAke2NhcHRpb259JHtoZWFkZXJSb3d9XFxuJHtkaXZpZGVyUm93fVxcbiR7Ym9keVJvd3Muam9pbihcIlxcblwiKX1gO1xufVxuIiwgIi8vIDVlIDIwMjUgZm9ybWF0RW50cnkudHNcbmltcG9ydCB7IHJlcGxhY2U1ZVRhZ3MgfSBmcm9tIFwiLi90YWdSZXBsYWNlclwiO1xuaW1wb3J0IHsgcmVuZGVyTWFya2Rvd25UYWJsZSB9IGZyb20gXCIuL21hcmtkb3duVGFibGVcIjtcblxuZnVuY3Rpb24gaXNUeXBlZEVudHJ5KHg6IGFueSk6IHggaXMgeyB0eXBlOiBzdHJpbmc7IFtrOiBzdHJpbmddOiBhbnkgfSB7XG4gIHJldHVybiAoXG4gICAgeCAhPSBudWxsICYmXG4gICAgdHlwZW9mIHggPT09IFwib2JqZWN0XCIgJiZcbiAgICAhQXJyYXkuaXNBcnJheSh4KSAmJlxuICAgIHR5cGVvZiAoeCBhcyBhbnkpLnR5cGUgPT09IFwic3RyaW5nXCJcbiAgKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGZvcm1hdEVudHJ5KGVudHJ5OiBhbnkpOiBzdHJpbmcge1xuICBpZiAodHlwZW9mIGVudHJ5ID09PSBcInN0cmluZ1wiKSB7XG4gICAgY29uc3QgY2xlYW5lZCA9IGVudHJ5LnRyaW0oKTtcbiAgICBpZiAoIWNsZWFuZWQgfHwgY2xlYW5lZCA9PT0gXCJ9XCIpIHJldHVybiBcIlwiO1xuICAgIHJldHVybiByZXBsYWNlNWVUYWdzKGNsZWFuZWQpO1xuICB9XG5cbiAgaWYgKGlzVHlwZWRFbnRyeShlbnRyeSkgJiYgZW50cnkudHlwZSA9PT0gXCJlbnRyaWVzXCIgJiYgQXJyYXkuaXNBcnJheShlbnRyeS5lbnRyaWVzKSkge1xuICAgIGNvbnN0IGJvZHkgPSBlbnRyeS5lbnRyaWVzXG4gICAgICAubWFwKGZvcm1hdEVudHJ5KVxuICAgICAgLmZpbHRlcigoc3RyOiBzdHJpbmcpID0+IHN0ci50cmltKCkubGVuZ3RoID4gMClcbiAgICAgIC5qb2luKFwiXFxuXFxuXCIpO1xuXG4gICAgcmV0dXJuIGVudHJ5Lm5hbWVcbiAgICAgID8gYCMjIyMjICR7ZW50cnkubmFtZX1cXG4ke2JvZHl9YFxuICAgICAgOiBib2R5O1xuICB9XG5cbiAgaWYgKGlzVHlwZWRFbnRyeShlbnRyeSkgJiYgZW50cnkudHlwZSA9PT0gXCJsaXN0XCIgJiYgQXJyYXkuaXNBcnJheShlbnRyeS5pdGVtcykpIHtcbiAgICByZXR1cm4gZW50cnkuaXRlbXNcbiAgICAgIC5tYXAoKGk6IGFueSkgPT4gYC0gJHtyZXBsYWNlNWVUYWdzKHR5cGVvZiBpID09PSBcInN0cmluZ1wiID8gaSA6IEpTT04uc3RyaW5naWZ5KGkpKX1gKVxuICAgICAgLmpvaW4oXCJcXG5cIik7XG4gIH1cblxuICBpZiAoaXNUeXBlZEVudHJ5KGVudHJ5KSAmJiBlbnRyeS50eXBlID09PSBcInRhYmxlXCIgJiYgQXJyYXkuaXNBcnJheShlbnRyeS5yb3dzKSkge1xuICAgIHJldHVybiByZW5kZXJNYXJrZG93blRhYmxlKGVudHJ5KTtcbiAgfVxuXG4gIGlmIChpc1R5cGVkRW50cnkoZW50cnkpICYmIGVudHJ5LnR5cGUgPT09IFwicXVvdGVcIiAmJiBBcnJheS5pc0FycmF5KGVudHJ5LmVudHJpZXMpKSB7XG4gICAgY29uc3QgcXVvdGUgPSBlbnRyeS5lbnRyaWVzLm1hcChmb3JtYXRFbnRyeSkuam9pbihcIiBcIikudHJpbSgpO1xuICAgIGNvbnN0IGF1dGhvciA9IGVudHJ5LmJ5ID8gYCBcdTIwMTQgJHtlbnRyeS5ieX1gIDogXCJcIjtcbiAgICByZXR1cm4gYCpcIiR7cXVvdGV9JHthdXRob3J9XCIqYDtcbiAgfVxuXG4gIGlmIChpc1R5cGVkRW50cnkoZW50cnkpICYmIGVudHJ5LnR5cGUgPT09IFwiaW5zZXRcIiAmJiBBcnJheS5pc0FycmF5KGVudHJ5LmVudHJpZXMpKSB7XG4gICAgY29uc3QgaW5zZXQgPSBlbnRyeS5lbnRyaWVzLm1hcChmb3JtYXRFbnRyeSkuam9pbihcIlxcblwiKS50cmltKCk7XG4gICAgcmV0dXJuIGA+ICR7aW5zZXQucmVwbGFjZSgvXFxuL2csIFwiXFxuPiBcIil9YDtcbiAgfVxuXG4gIGlmIChpc1R5cGVkRW50cnkoZW50cnkpICYmIGVudHJ5LnR5cGUgPT09IFwicmVmQ2xhc3NGZWF0dXJlXCIgJiYgdHlwZW9mIGVudHJ5LmNsYXNzRmVhdHVyZSA9PT0gXCJzdHJpbmdcIikge1xuICAgIGNvbnN0IFtuYW1lXSA9IGVudHJ5LmNsYXNzRmVhdHVyZS5zcGxpdChcInxcIik7XG4gICAgY29uc3QgYW5jaG9yID0gbmFtZVxuICAgICAgLnJlcGxhY2UoL1teXFx3XFxzLV0vZywgXCJcIilcbiAgICAgIC5yZXBsYWNlKC9cXHMrL2csIFwiLVwiKVxuICAgICAgLnRvTG93ZXJDYXNlKCk7XG4gICAgcmV0dXJuIGBbWyMke2FuY2hvcn1dXWA7XG4gIH1cblxuICAvLyBJZiBpdCdzIGFuIHVua25vd24gb2JqZWN0LCBza2lwIGl0IHNhZmVseVxuICByZXR1cm4gXCJcIjtcbn1cbiIsICIvLyBwYXJzZXJzLzVlLWpzb24vYmVzdGlhcnkudHNcblxuaW1wb3J0IHR5cGUgeyBQYXJzZWRNYXJrZG93bkZpbGUgfSBmcm9tIFwic3JjL3R5cGVzXCI7XG5pbXBvcnQgeyBnZXRGdWxsU291cmNlTmFtZSB9IGZyb20gXCIuL2hlbHBlcnMvc291cmNlTWFwXCI7XG5pbXBvcnQgeyByZXBsYWNlNWVUYWdzIH0gZnJvbSBcIi4vaGVscGVycy90YWdSZXBsYWNlclwiO1xuaW1wb3J0IHsgcmVuZGVyTWFya2Rvd25UYWJsZSB9IGZyb20gXCIuL2hlbHBlcnMvbWFya2Rvd25UYWJsZVwiO1xuaW1wb3J0IHsgYnVpbGRGTSwgc2VyaWFsaXplRnJvbnRtYXR0ZXIsIEJFU1RJQVJZX01FVEFfREVGUywgdW5pZmllZFNraWxscywgRk1fRklFTERTIH0gZnJvbSBcIi4vaGVscGVycy9mcm9udG1hdHRlclwiO1xuXG5jb25zdCBza2lwcGVkTW9uc3RlcnM6IHN0cmluZ1tdID0gW107XG5cbi8vIFNpemUgYWJicmV2aWF0aW9ucyBtYXBwaW5nXG5leHBvcnQgXG5jb25zdCBTSVpFX01BUDogUmVjb3JkPHN0cmluZywgc3RyaW5nPiA9IHtcbiAgVDogXCJUaW55XCIsXG4gIFM6IFwiU21hbGxcIixcbiAgTTogXCJNZWRpdW1cIixcbiAgTDogXCJMYXJnZVwiLFxuICBIOiBcIkh1Z2VcIixcbiAgRzogXCJHYXJnYW50dWFuXCJcbn07XG5cbi8vIEFsaWdubWVudCBhYmJyZXZpYXRpb25zIG1hcHBpbmdcbmNvbnN0IEFMSUdOTUVOVF9NQVA6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4gPSB7XG4gIEw6IFwiTGF3ZnVsXCIsXG4gIE46IFwiTmV1dHJhbFwiLFxuICBDOiBcIkNoYW90aWNcIixcbiAgRzogXCJHb29kXCIsXG4gIEU6IFwiRXZpbFwiLFxuICBVOiBcIlVuYWxpZ25lZFwiXG59O1xuXG4vLyBIZWxwZXIgdG8gY2FwaXRhbGl6ZSBmaXJzdCBsZXR0ZXIgb2YgYSBzdHJpbmdcbmZ1bmN0aW9uIGNhcGl0YWxpemVGaXJzdChzdHI6IHVua25vd24pOiBzdHJpbmcge1xuICBjb25zdCBzID0gU3RyaW5nKHN0ciB8fCBcIlwiKTtcbiAgcmV0dXJuIHMuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBzLnNsaWNlKDEpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZm9ybWF0U2l6ZUFiYnJldihhYmJyZXY6IHN0cmluZyk6IHN0cmluZyB7XG4gIHJldHVybiBTSVpFX01BUFthYmJyZXZdIHx8IGFiYnJldjtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGZvcm1hdEFsaWdubWVudEFiYnJldihhYmJyZXY6IHN0cmluZyk6IHN0cmluZyB7XG4gIHJldHVybiBhYmJyZXZcbiAgICAudHJpbSgpXG4gICAgLnNwbGl0KC9cXHMrLylcbiAgICAubWFwKGxldHRlciA9PiBBTElHTk1FTlRfTUFQW2xldHRlcl0gfHwgbGV0dGVyKVxuICAgIC5qb2luKFwiIFwiKTtcbn1cblxuY29uc3QgUkFXX05QQ1M6IHN0cmluZ1tdID0gW1xuICBcIkFianVyZXJcIiwgXCJBY29seXRlXCIsIFwiQXBwcmVudGljZSBXaXphcmRcIiwgXCJBcmNoZHJ1aWRcIiwgXCJBcmNoZXJcIiwgXCJBcmNobWFnZVwiLCBcIkFzc2Fzc2luXCIsXG4gIFwiQmFuZGl0XCIsIFwiQmFuZGl0IENhcHRhaW5cIiwgXCJCYXJkXCIsIFwiQmVyc2Vya2VyXCIsIFwiQmxhY2tndWFyZFwiLCBcIkNoYW1waW9uXCIsIFwiQ29tbW9uZXJcIixcbiAgXCJDb25qdXJlclwiLCBcIkN1bHQgRmFuYXRpY1wiLCBcIkN1bHRpc3RcIiwgXCJEaXZpbmVyXCIsIFwiRHJ1aWQgKE5QQylcIiwgXCJEcnVpZCBOUENcIiwgXCJFbmNoYW50ZXJcIixcbiAgXCJFdm9rZXJcIiwgXCJHbGFkaWF0b3JcIiwgXCJHdWFyZFwiLCBcIklsbHVzaW9uaXN0XCIsIFwiS25pZ2h0XCIsIFwiS3Jha2VuIFByaWVzdFwiLCBcIk1hZ2VcIixcbiAgXCJNYXJ0aWFsIEFydHMgQWRlcHRcIiwgXCJNYXN0ZXIgVGhpZWZcIiwgXCJOZWNyb21hbmNlclwiLCBcIk5vYmxlXCIsIFwiUHJpZXN0XCIsIFwiU2NvdXRcIiwgXCJTcHlcIixcbiAgXCJTd2FzaGJ1Y2tsZXJcIiwgXCJUaHVnXCIsIFwiVHJhbnNtdXRlclwiLCBcIlRyaWJhbCBXYXJyaW9yXCIsIFwiVmV0ZXJhblwiLCBcIldhciBQcmllc3RcIixcbiAgXCJXYXJsb2NrIG9mIHRoZSBBcmNoZmV5XCIsIFwiV2FybG9jayBvZiB0aGUgRmllbmRcIiwgXCJXYXJsb2NrIG9mIHRoZSBHcmVhdCBPbGQgT25lXCIsIFwiV2FybG9yZFwiXG5dO1xuY29uc3QgTk9STUFMSVpFRF9OUENfTkFNRVMgPSBuZXcgU2V0KFJBV19OUENTLm1hcChuID0+IG5vcm1hbGl6ZU5hbWUobikpKTtcblxuZnVuY3Rpb24gbm9ybWFsaXplTmFtZShuYW1lOiBzdHJpbmcpOiBzdHJpbmcge1xuICByZXR1cm4gbmFtZS5yZXBsYWNlKC9cXHMrL2csIFwiIFwiKS50cmltKCkudG9Mb3dlckNhc2UoKTtcbn1cblxuZnVuY3Rpb24gY2F0ZWdvcml6ZUNyZWF0dXJlKG1vbnN0ZXI6IGFueSk6IHN0cmluZyB7XG4gIGNvbnN0IHR5cGVWYWx1ZSA9IG1vbnN0ZXIudHlwZTtcbiAgY29uc3QgbmFtZSA9IG1vbnN0ZXIubmFtZTtcbiAgY29uc3QgdCA9IHR5cGVvZiB0eXBlVmFsdWUgPT09IFwic3RyaW5nXCJcbiAgICA/IHR5cGVWYWx1ZS50b0xvd2VyQ2FzZSgpXG4gICAgOiB0eXBlVmFsdWU/LnR5cGU/LnRvTG93ZXJDYXNlKCkgfHwgU3RyaW5nKHR5cGVWYWx1ZSkudG9Mb3dlckNhc2UoKTtcblxuICBjb25zdCBub3JtYWxpemVkTmFtZSA9IG5vcm1hbGl6ZU5hbWUobmFtZSk7XG5cbiAgaWYgKG1vbnN0ZXIuaXNOcGMgfHwgbW9uc3Rlci5pc05hbWVkQ3JlYXR1cmUpIHJldHVybiBcIlN0b3J5IE5QQ3NcIjtcbiAgaWYgKHQgPT09IFwiYmVhc3RcIikgcmV0dXJuIFwiQmVhc3RzXCI7XG4gIGlmICh0ID09PSBcImh1bWFub2lkXCIgJiYgTk9STUFMSVpFRF9OUENfTkFNRVMuaGFzKG5vcm1hbGl6ZWROYW1lKSkgcmV0dXJuIFwiTm9uLUJlYXN0c1wiO1xuICBpZiAodCA9PT0gXCJodW1hbm9pZFwiKSByZXR1cm4gXCJNb25zdGVyc1wiO1xuICByZXR1cm4gXCJNb25zdGVyc1wiO1xufVxuXG5mdW5jdGlvbiByZW5kZXJBYmlsaXRpZXNUYWJsZShzdHI6IG51bWJlciwgZGV4OiBudW1iZXIsIGNvbjogbnVtYmVyLCBpbnQ6IG51bWJlciwgd2lzOiBudW1iZXIsIGNoYTogbnVtYmVyKTogc3RyaW5nIHtcbiAgcmV0dXJuIFtcbiAgICBgfCBTVFIgfCBERVggfCBDT04gfCBJTlQgfCBXSVMgfCBDSEEgfGAsXG4gICAgYHwgLS0tIHwgLS0tIHwgLS0tIHwgLS0tIHwgLS0tIHwgLS0tIHxgLFxuICAgIGB8ICR7c3RyfSB8ICR7ZGV4fSB8ICR7Y29ufSB8ICR7aW50fSB8ICR7d2lzfSB8ICR7Y2hhfSB8YFxuICBdLmpvaW4oXCJcXG5cIik7XG59XG5cbiAgZnVuY3Rpb24gcmVuZGVyRW50cnkoZW50cnk6IGFueSwgaW5CcmVhdGhCbG9jayA9IGZhbHNlKTogc3RyaW5nIHtcbiAgICBjb25zdCBlbnN1cmVQZXJpb2QgPSAoczogc3RyaW5nKSA9PiAoL1suIT9dXFxzKiQvLnRlc3QocykgPyBzIDogYCR7c30uYCk7XG4gICAgY29uc3QgcmVuZGVyU3RyID0gKHM6IHN0cmluZykgPT4gcmVwbGFjZTVlVGFncyhzKTtcblxuICAgIGlmICh0eXBlb2YgZW50cnkgPT09IFwic3RyaW5nXCIpIHJldHVybiByZW5kZXJTdHIoZW50cnkpO1xuICAgIGlmICghZW50cnkgfHwgdHlwZW9mIGVudHJ5ICE9PSBcIm9iamVjdFwiKSByZXR1cm4gU3RyaW5nKGVudHJ5ID8/IFwiXCIpO1xuXG4gICAgY29uc3QgcmF3TmFtZSA9IHR5cGVvZiBlbnRyeS5uYW1lID09PSBcInN0cmluZ1wiID8gZW50cnkubmFtZSA6IFwiXCI7XG4gICAgY29uc3QgbmFtZVR4dCA9IHJhd05hbWUgPyByZW5kZXJTdHIocmF3TmFtZSkgOiBcIlwiO1xuICAgIGNvbnN0IGlzQnJlYXRoID0gL1xcYmJyZWF0aCB3ZWFwb24vaS50ZXN0KG5hbWVUeHQpO1xuXG4gICAgY29uc3QgbGVhZCA9IG5hbWVUeHQgPyBgKioqJHtlbnN1cmVQZXJpb2QobmFtZVR4dCl9KioqYCA6IFwiXCI7XG5cbiAgICBjb25zdCBibG9ja3M6IGFueVtdID0gW107XG4gICAgaWYgKEFycmF5LmlzQXJyYXkoZW50cnkuZW50cmllcykpIGJsb2Nrcy5wdXNoKC4uLmVudHJ5LmVudHJpZXMpO1xuICAgIGVsc2UgaWYgKHR5cGVvZiBlbnRyeS5lbnRyaWVzID09PSBcInN0cmluZ1wiKSBibG9ja3MucHVzaChlbnRyeS5lbnRyaWVzKTtcbiAgICBlbHNlIGlmIChBcnJheS5pc0FycmF5KGVudHJ5LmRlc2MpKSBibG9ja3MucHVzaCguLi5lbnRyeS5kZXNjKTtcbiAgICBlbHNlIGlmICh0eXBlb2YgZW50cnkuZGVzYyA9PT0gXCJzdHJpbmdcIikgYmxvY2tzLnB1c2goZW50cnkuZGVzYyk7XG4gICAgZWxzZSBpZiAoQXJyYXkuaXNBcnJheSgoZW50cnkgYXMgYW55KS5lbnRyeSkpIGJsb2Nrcy5wdXNoKC4uLihlbnRyeSBhcyBhbnkpLmVudHJ5KTtcbiAgICBlbHNlIGlmICh0eXBlb2YgKGVudHJ5IGFzIGFueSkuZW50cnkgPT09IFwic3RyaW5nXCIpIGJsb2Nrcy5wdXNoKChlbnRyeSBhcyBhbnkpLmVudHJ5KTtcblxuICAgIGNvbnN0IG91dDogc3RyaW5nW10gPSBbXTtcbiAgICBmb3IgKGNvbnN0IGJsayBvZiBibG9ja3MpIHtcbiAgICAgIGlmICh0eXBlb2YgYmxrID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgIG91dC5wdXNoKHJlbmRlclN0cihibGspKTtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGlzSGFuZ05vVGl0bGVMaXN0ID1cbiAgICAgICAgYmxrICYmXG4gICAgICAgIGJsay50eXBlID09PSBcImxpc3RcIiAmJlxuICAgICAgICBibGsuc3R5bGUgPT09IFwibGlzdC1oYW5nLW5vdGl0bGVcIiAmJlxuICAgICAgICBBcnJheS5pc0FycmF5KGJsay5pdGVtcykgJiZcbiAgICAgICAgYmxrLml0ZW1zLmV2ZXJ5KChpdDogYW55KSA9PiBpdD8udHlwZSA9PT0gXCJpdGVtXCIpO1xuXG4gICAgICBpZiAoKGlzQnJlYXRoIHx8IGluQnJlYXRoQmxvY2sgfHwgaXNIYW5nTm9UaXRsZUxpc3QpICYmIGJsayAmJiBibGsudHlwZSA9PT0gXCJsaXN0XCIgJiYgQXJyYXkuaXNBcnJheShibGsuaXRlbXMpKSB7XG4gICAgICAgIGNvbnN0IGJ1bGxldHM6IHN0cmluZ1tdID0gW107XG4gICAgICAgIGZvciAoY29uc3QgaXQgb2YgYmxrLml0ZW1zKSB7XG4gICAgICAgICAgY29uc3QgaXROYW1lID0gaXQ/Lm5hbWUgPyByZW5kZXJTdHIoU3RyaW5nKGl0Lm5hbWUpLnRyaW0oKSkgOiBcIlwiO1xuICAgICAgICAgIGxldCBpdEJvZHkgPSBcIlwiO1xuICAgICAgICAgIGlmICh0eXBlb2YgaXQ/LmVudHJ5ID09PSBcInN0cmluZ1wiKSBpdEJvZHkgPSByZW5kZXJTdHIoaXQuZW50cnkpO1xuICAgICAgICAgIGVsc2UgaWYgKEFycmF5LmlzQXJyYXkoaXQ/LmVudHJpZXMpKSBpdEJvZHkgPSBpdC5lbnRyaWVzLm1hcCgoZTogYW55KSA9PiByZW5kZXJFbnRyeShlLCB0cnVlKSkuam9pbihcIiBcIik7XG4gICAgICAgICAgZWxzZSBpZiAodHlwZW9mIGl0Py5lbnRyaWVzID09PSBcInN0cmluZ1wiKSBpdEJvZHkgPSByZW5kZXJTdHIoaXQuZW50cmllcyk7XG5cbiAgICAgICAgICBjb25zdCBoZWFkID0gaXROYW1lID8gYCoqKiR7ZW5zdXJlUGVyaW9kKGl0TmFtZSl9KioqYCA6IFwiXCI7XG4gICAgICAgICAgY29uc3QgbGluZSA9IFtoZWFkLCBpdEJvZHldLmZpbHRlcihCb29sZWFuKS5qb2luKFwiIFwiKS50cmltKCk7XG4gICAgICAgICAgaWYgKGxpbmUpIGJ1bGxldHMucHVzaChgLSAke2xpbmV9YCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGJ1bGxldHMubGVuZ3RoKSBvdXQucHVzaChcIlxcblwiICsgYnVsbGV0cy5qb2luKFwiXFxuXCIpKTtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIG91dC5wdXNoKFN0cmluZyhibGspKTtcbiAgICB9XG5cbiAgICByZXR1cm4gW2xlYWQsIG91dC5qb2luKFwiIFwiKV0uZmlsdGVyKEJvb2xlYW4pLmpvaW4oXCIgXCIpLnJlcGxhY2UoL1sgXFx0XSsvZywgXCIgXCIpLnRyaW0oKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHJlbmRlclNwZWxsY2FzdGluZyhzcGVsbGNhc3RpbmdBcnI6IGFueVtdKTogc3RyaW5nIHtcbiAgICBpZiAoIUFycmF5LmlzQXJyYXkoc3BlbGxjYXN0aW5nQXJyKSB8fCBzcGVsbGNhc3RpbmdBcnIubGVuZ3RoID09PSAwKSByZXR1cm4gXCJcIjtcblxuICAgIGNvbnN0IGxpbmVzOiBzdHJpbmdbXSA9IFtdO1xuXG4gICAgLy8gRWFjaCBlbnRyeSBiZWNvbWVzIGl0cyBvd24gc3Vic2VjdGlvbiAoZS5nLiwgXCJJbm5hdGUgU3BlbGxjYXN0aW5nXCIsIFwiU3BlbGxjYXN0aW5nXCIpXG4gICAgZm9yIChjb25zdCBzYyBvZiBzcGVsbGNhc3RpbmdBcnIpIHtcbiAgICAgIGlmICghc2MgfHwgdHlwZW9mIHNjICE9PSBcIm9iamVjdFwiKSBjb250aW51ZTtcblxuICAgICAgY29uc3QgdGl0bGUgPSB0eXBlb2Ygc2MubmFtZSA9PT0gXCJzdHJpbmdcIiAmJiBzYy5uYW1lLnRyaW0oKSA/IHNjLm5hbWUudHJpbSgpIDogXCJTcGVsbGNhc3RpbmdcIjtcbiAgICAgIGNvbnN0IGhlYWRlciA9IGAjIyMgJHtyZXBsYWNlNWVUYWdzKHRpdGxlKX1gO1xuICAgICAgY29uc3QgYm9keVBhcnRzOiBzdHJpbmdbXSA9IFtdO1xuXG4gICAgICAvLyAxKSBIZWFkZXIgdGV4dCBibG9jayhzKVxuICAgICAgY29uc3QgaGVhZGVyRW50cmllcyA9IEFycmF5LmlzQXJyYXkoc2MuaGVhZGVyRW50cmllcylcbiAgICAgICAgPyBzYy5oZWFkZXJFbnRyaWVzXG4gICAgICAgIDogdHlwZW9mIHNjLmhlYWRlckVudHJpZXMgPT09IFwic3RyaW5nXCJcbiAgICAgICAgPyBbc2MuaGVhZGVyRW50cmllc11cbiAgICAgICAgOiBbXTtcbiAgICAgIGlmIChoZWFkZXJFbnRyaWVzLmxlbmd0aCkge1xuICAgICAgICBib2R5UGFydHMucHVzaChoZWFkZXJFbnRyaWVzLm1hcCgoZTogYW55KSA9PiByZXBsYWNlNWVUYWdzKGUpKS5qb2luKFwiIFwiKSk7XG4gICAgICB9XG5cbiAgICAgIC8vIDIpIFx1MjAxQ0F0IHdpbGxcdTIwMURcbiAgICAgIGlmIChBcnJheS5pc0FycmF5KHNjLndpbGwpICYmIHNjLndpbGwubGVuZ3RoKSB7XG4gICAgICAgIGNvbnN0IHNwZWxscyA9IHNjLndpbGwubWFwKChzOiBhbnkpID0+IHJlcGxhY2U1ZVRhZ3MoU3RyaW5nKHMpKSkuam9pbihcIiwgXCIpO1xuICAgICAgICBib2R5UGFydHMucHVzaChgLSAqKkF0IHdpbGw6KiogJHtzcGVsbHN9YCk7XG4gICAgICB9XG5cbiAgICAgIC8vIDMpIFx1MjAxQ0RhaWx5XHUyMDFEIGJ1Y2tldHMgXHUyMDE0IGtleXMgbGlrZSBcIjFcIiwgXCIyXCIsIFwiM1wiLCBhbmQgXCIxZVwiL1wiMmVcIiAoXHUyMDFDZWFjaFx1MjAxRClcbiAgICAgIGlmIChzYy5kYWlseSAmJiB0eXBlb2Ygc2MuZGFpbHkgPT09IFwib2JqZWN0XCIpIHtcbiAgICAgICAgY29uc3Qga2V5cyA9IE9iamVjdC5rZXlzKHNjLmRhaWx5KS5zb3J0KChhLGIpID0+IHtcbiAgICAgICAgICAvLyBudW1lcmljLWZpcnN0IHNvcnQ6IDEsIDFlLCAyLCAyZSwgXHUyMDI2XG4gICAgICAgICAgY29uc3QgcGFyc2UgPSAoazogc3RyaW5nKSA9PiAoeyBuOiBwYXJzZUludChrLCAxMCkgfHwgMCwgZTogL2UkL2kudGVzdChrKSA/IDEgOiAwIH0pO1xuICAgICAgICAgIGNvbnN0IEEgPSBwYXJzZShhKSwgQiA9IHBhcnNlKGIpO1xuICAgICAgICAgIHJldHVybiBBLm4gLSBCLm4gfHwgQS5lIC0gQi5lO1xuICAgICAgICB9KTtcblxuICAgICAgICBmb3IgKGNvbnN0IGsgb2Yga2V5cykge1xuICAgICAgICAgIGNvbnN0IGFyciA9IEFycmF5LmlzQXJyYXkoc2MuZGFpbHlba10pID8gc2MuZGFpbHlba10gOiBbXTtcbiAgICAgICAgICBpZiAoIWFyci5sZW5ndGgpIGNvbnRpbnVlO1xuICAgICAgICAgIGNvbnN0IG4gPSBwYXJzZUludChrLCAxMCkgfHwgMDtcbiAgICAgICAgICBjb25zdCBlYWNoID0gL2UkL2kudGVzdChrKTtcbiAgICAgICAgICBjb25zdCBsYWJlbCA9IG4gPiAwXG4gICAgICAgICAgICA/IGVhY2ggPyBgJHtufS9kYXkgZWFjaGAgOiBgJHtufS9kYXlgXG4gICAgICAgICAgICA6IFwiRGFpbHlcIjtcblxuICAgICAgICAgIGNvbnN0IHNwZWxscyA9IGFyci5tYXAoKHM6IGFueSkgPT4gcmVwbGFjZTVlVGFncyhTdHJpbmcocykpKS5qb2luKFwiLCBcIik7XG4gICAgICAgICAgYm9keVBhcnRzLnB1c2goYC0gKioke2xhYmVsfToqKiAke3NwZWxsc31gKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyA0KSBPcHRpb25hbDogb3RoZXIgYnVja2V0cyB1c2VkIG9jY2FzaW9uYWxseSBieSA1ZXRvb2xzIChcdTIwMUNyZXN0XHUyMDFELCBcdTIwMUNyaXR1YWxcdTIwMUQsIGV0Yy4pXG4gICAgICAvLyAgICBXZSBrZWVwIHRoaXMgY29uc2VydmF0aXZlOyBhZGQgbW9yZSBpZiB5b3Ugc2VlIHRoZW0gaW4geW91ciBmZWVkcy5cbiAgICAgIGlmIChzYy5yaXR1YWwgJiYgQXJyYXkuaXNBcnJheShzYy5yaXR1YWwpICYmIHNjLnJpdHVhbC5sZW5ndGgpIHtcbiAgICAgICAgY29uc3Qgc3BlbGxzID0gc2Mucml0dWFsLm1hcCgoczogYW55KSA9PiByZXBsYWNlNWVUYWdzKFN0cmluZyhzKSkpLmpvaW4oXCIsIFwiKTtcbiAgICAgICAgYm9keVBhcnRzLnB1c2goYC0gKipSaXR1YWxzOioqICR7c3BlbGxzfWApO1xuICAgICAgfVxuXG4gICAgICAvLyBTdGl0Y2ggdGhpcyBibG9ja1xuICAgICAgaWYgKGJvZHlQYXJ0cy5sZW5ndGgpIHtcbiAgICAgICAgbGluZXMucHVzaChgJHtoZWFkZXJ9XFxuJHtib2R5UGFydHMuam9pbihcIlxcblwiKX1gKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gbGluZXMuam9pbihcIlxcblxcblwiKTtcbiAgfVxuXG4gIGV4cG9ydCBmdW5jdGlvbiBwYXJzZUJlc3RpYXJ5RmlsZShqc29uOiBhbnksIGVkaXRpb25JZDogc3RyaW5nKTogUGFyc2VkTWFya2Rvd25GaWxlW10ge1xuICAgICAgaWYgKCFqc29uLm1vbnN0ZXIpIHJldHVybiBbXTtcbiAgICAgIChqc29uIGFzIGFueSkuX2VkaXRpb25JZCA9IGVkaXRpb25JZDtcbiAgICBcbiAgICAgIC8vIDEpIEZpbHRlciBvdXQgXHUyMDFDcmVmZXJlbmNlXHUyMDFEIGVudHJpZXMgd2l0aCBubyBBQyBvciBIUFxuICAgICAgY29uc3QgdmFsaWRNb25zdGVycyA9IGpzb24ubW9uc3Rlci5maWx0ZXIoKG06IGFueSkgPT4ge1xuICAgICAgY29uc3QgYWNWYWwgPSBBcnJheS5pc0FycmF5KG0uYWMpXG4gICAgICAgID8gbS5hY1swXT8uYWMgPz8gbS5hY1swXVxuICAgICAgICA6IHR5cGVvZiBtLmFjID09PSBcIm9iamVjdFwiXG4gICAgICAgICAgPyBtLmFjPy5hYyA/PyBudWxsXG4gICAgICAgICAgOiBtLmFjO1xuXG4gICAgICBjb25zdCBocFZhbCA9IHR5cGVvZiBtLmhwID09PSBcIm9iamVjdFwiXG4gICAgICAgID8gbS5ocD8uYXZlcmFnZSA/PyBtLmhwPy5ocCA/PyBudWxsXG4gICAgICAgIDogbS5ocDtcbiAgICAgICAgcmV0dXJuIGFjVmFsICE9IG51bGwgJiYgaHBWYWwgIT0gbnVsbCAmJiAhaXNOYU4oTnVtYmVyKGFjVmFsKSkgJiYgIWlzTmFOKE51bWJlcihocFZhbCkpO1xuICAgICAgfSk7XG5cbiAgICBjb25zdCBhbGxOYW1lcyA9IG5ldyBTZXQoanNvbi5tb25zdGVyLm1hcCgobTogYW55KSA9PiBtLm5hbWUpKTtcbiAgICBjb25zdCB2YWxpZE5hbWVzID0gbmV3IFNldCh2YWxpZE1vbnN0ZXJzLm1hcCgobTogYW55KSA9PiBtLm5hbWUpKTtcbiAgICBjb25zdCBtaXNzaW5nID0gWy4uLmFsbE5hbWVzXS5maWx0ZXIobmFtZSA9PiAhdmFsaWROYW1lcy5oYXMobmFtZSkpO1xuXG4gIFxuICAgIHJldHVybiB2YWxpZE1vbnN0ZXJzLm1hcCgobW9uc3RlcjogYW55KSA9PiB7XG4gICAgICBjb25zdCBuYW1lICAgICA9IG1vbnN0ZXIubmFtZSBhcyBzdHJpbmc7XG4gICAgICBjb25zdCBzYWZlTmFtZSA9IG5hbWUucmVwbGFjZSgvXFwvL2csIFwiLVwiKTtcbiAgXG4gICAgICAvLyBcdTIwMTQgUmF3IGZpZWxkcyAmIGZvcm1hdHRpbmcgXHUyMDE0XG4gICAgICBjb25zdCByYXdTaXplICAgICAgPSBtb25zdGVyLnNpemUgfHwgXCJNXCI7XG4gICAgICBjb25zdCByYXdBbGlnbm1lbnQgPSBBcnJheS5pc0FycmF5KG1vbnN0ZXIuYWxpZ25tZW50KVxuICAgICAgICA/IG1vbnN0ZXIuYWxpZ25tZW50LmpvaW4oXCIgXCIpXG4gICAgICAgIDogbW9uc3Rlci5hbGlnbm1lbnQgfHwgXCJOXCI7XG4gICAgbGV0IHJhd1R5cGUgPSBcIlVua25vd25cIjtcblxuICAgIGlmICh0eXBlb2YgbW9uc3Rlci50eXBlID09PSBcInN0cmluZ1wiKSB7XG4gICAgICByYXdUeXBlID0gY2FwaXRhbGl6ZUZpcnN0KG1vbnN0ZXIudHlwZSk7XG4gICAgfSBlbHNlIGlmIChtb25zdGVyLnR5cGU/LnR5cGUpIHtcbiAgICAgIGNvbnN0IGJhc2UgPSBjYXBpdGFsaXplRmlyc3QobW9uc3Rlci50eXBlLnR5cGUpO1xuICAgICAgY29uc3QgdGFncyA9IG1vbnN0ZXIudHlwZS50YWdzPy5sZW5ndGggPyBgICgke21vbnN0ZXIudHlwZS50YWdzLm1hcChjYXBpdGFsaXplRmlyc3QpLmpvaW4oXCIsIFwiKX0pYCA6IFwiXCI7XG4gICAgICByYXdUeXBlID0gYCR7YmFzZX0ke3RhZ3N9YDtcbiAgICB9XG5cbiAgICBtb25zdGVyLl9wYXJzZWRUeXBlID0gcmF3VHlwZTtcblxuICAgIGNvbnN0IGFjID0gQXJyYXkuaXNBcnJheShtb25zdGVyLmFjKSA/IG1vbnN0ZXIuYWNbMF0uYWMgOiBtb25zdGVyLmFjO1xuICAgIGNvbnN0IGhwID0gbW9uc3Rlci5ocD8uYXZlcmFnZSA/PyBtb25zdGVyLmhwO1xuXG4gICAgLy8gU2tpcCBtb25zdGVycyB3aXRoIG5vIEFDIGFuZCBIUFxuICAgIGlmICghYWMgJiYgIWhwKSB7XG4gICAgICBza2lwcGVkTW9uc3RlcnMucHVzaChtb25zdGVyLm5hbWUpO1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgICAgXG4gICAgICAvLyBcdTIwMTQgQWJpbGl0aWVzIFx1MjAxNFxuICAgICAgY29uc3QgYWJpbGl0aWVzID0gQXJyYXkuaXNBcnJheShtb25zdGVyLmFiaWxpdHkpXG4gICAgICAgID8gbW9uc3Rlci5hYmlsaXR5XG4gICAgICAgIDogW21vbnN0ZXIuc3RyLCBtb25zdGVyLmRleCwgbW9uc3Rlci5jb24sIG1vbnN0ZXIuaW50LCBtb25zdGVyLndpcywgbW9uc3Rlci5jaGFdO1xuICAgICAgY29uc3QgW3N0ciA9IDEwLCBkZXggPSAxMCwgY29uID0gMTAsIGludCA9IDEwLCB3aXMgPSAxMCwgY2hhID0gMTBdID0gYWJpbGl0aWVzO1xuICBcbiAgICAgIC8vIFx1MjAxNCBTcGVlZCAoaGFuZGxlcyBob3ZlciAmIG9iamVjdCBzcGVlZHMpIFx1MjAxNFxuICAgICAgY29uc3Qgc3BlZWRMaXN0OiBzdHJpbmdbXSA9IFtdO1xuICAgICAgaWYgKHR5cGVvZiBtb25zdGVyLnNwZWVkID09PSBcIm9iamVjdFwiKSB7XG4gICAgICAgIGZvciAoY29uc3QgW21vZGUsIHZhbF0gb2YgT2JqZWN0LmVudHJpZXMobW9uc3Rlci5zcGVlZCkpIHtcbiAgICAgICAgICBpZiAobW9kZSA9PT0gXCJjYW5Ib3ZlclwiKSBjb250aW51ZTtcbiAgICAgICAgICBpZiAodmFsICYmIHR5cGVvZiB2YWwgPT09IFwib2JqZWN0XCIgJiYgXCJudW1iZXJcIiBpbiB2YWwpIHtcbiAgICAgICAgICAgIGNvbnN0IG51bSAgPSAodmFsIGFzIGFueSkubnVtYmVyO1xuICAgICAgICAgICAgY29uc3QgY29uZCA9ICh2YWwgYXMgYW55KS5jb25kaXRpb24gPyBgICR7KHZhbCBhcyBhbnkpLmNvbmRpdGlvbn1gIDogXCJcIjtcbiAgICAgICAgICAgIHNwZWVkTGlzdC5wdXNoKGAke21vZGV9ICR7bnVtfSBmdC4ke2NvbmR9YCk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHNwZWVkTGlzdC5wdXNoKGAke21vZGV9ICR7dmFsfSBmdC5gKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHNwZWVkTGlzdC5wdXNoKGAke21vbnN0ZXIuc3BlZWR9IGZ0LmApO1xuICAgICAgfVxuICAgICAgY29uc3Qgc3BlZWQgPSBzcGVlZExpc3Quam9pbihcIiwgXCIpO1xuICBcbiAgICAgIC8vIFx1MjAxNCBTb3VyY2Ugc2FuaXRpemF0aW9uIFx1MjAxNFxuICAgICAgbGV0IHNvdXJjZSA9IGdldEZ1bGxTb3VyY2VOYW1lKG1vbnN0ZXIuc291cmNlLCBlZGl0aW9uSWQpO1xuICAgICAgc291cmNlICAgICA9IHNvdXJjZS5yZXBsYWNlKC86L2csIFwiIC1cIik7XG4gIFxuICAgICAgLy8gXHUyMDE0IENhdGVnb3J5IGZvciBmb2xkZXIgXHUyMDE0XG4gICAgICBjb25zdCBjYXRlZ29yeSA9IGNhdGVnb3JpemVDcmVhdHVyZShtb25zdGVyKTtcbiAgXG4gICAgICBjb25zdCBmbSAgID0gYnVpbGRGTShtb25zdGVyLCBCRVNUSUFSWV9NRVRBX0RFRlMpO1xuICAgICAgY29uc3QgeWFtbCA9IHNlcmlhbGl6ZUZyb250bWF0dGVyKGZtLCBCRVNUSUFSWV9NRVRBX0RFRlMpO1xuICAgICAgY29uc3QgZm1BbnkgPSBmbSBhcyBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPjtcbiAgICAgIGNvbnN0IGNoYWxsZW5nZVRleHQgPSBTdHJpbmcoZm1BbnlbXCJDUlwiXSA/PyBmbUFueVtcImNoYWxsZW5nZVwiXSA/PyBcIlwiKTtcbiAgICAgIGNvbnN0IHNhdmluZ1Rocm93cyA9IChmbVtGTV9GSUVMRFMuU0FWSU5HX1RIUk9XU10gYXMgc3RyaW5nW10pIHx8IFtdO1xuICAgICAgY29uc3Qgc2tpbGxzICAgICAgID0gKGZtW0ZNX0ZJRUxEUy5TS0lMTFNdICAgICAgICBhcyBzdHJpbmdbXSkgfHwgW107XG4gICAgICBjb25zdCBzZW5zZXMgICAgICAgPSAoZm1bRk1fRklFTERTLlNFTlNFU10gICAgICAgIGFzIHN0cmluZ1tdKSB8fCBbXTtcbiAgICAgIGNvbnN0IGxhbmd1YWdlcyAgICA9IChmbVtGTV9GSUVMRFMuTEFOR1VBR0VTXSAgICAgYXMgc3RyaW5nW10pIHx8IFtdO1xuXG4gXG4gICAgICAvLyBcdTIwMTQgQm9keSBcdTIwMTRcbiAgICAgIGxldCBib2R5ID1cbiAgICAgIGAjICR7bmFtZX1cXG5cXG5gICtcbiAgICAgIGAke2Zvcm1hdFNpemVBYmJyZXYocmF3U2l6ZSl9ICR7cmF3VHlwZX0sICR7Zm9ybWF0QWxpZ25tZW50QWJicmV2KHJhd0FsaWdubWVudCl9XFxuXFxuYCArXG4gICAgICBgKipBcm1vciBDbGFzcyoqOiAke2FjfVxcbmAgK1xuICAgICAgYCoqSGl0IFBvaW50cyoqOiAke2hwfVxcbmAgK1xuICAgICAgYCoqU3BlZWQqKjogJHtzcGVlZH1cXG5gICtcbiAgICAgIChzYXZpbmdUaHJvd3MubGVuZ3RoXG4gICAgICAgID8gYCoqU2F2aW5nIFRocm93cyoqOiAke3NhdmluZ1Rocm93cy5qb2luKFwiLCBcIil9XFxuYFxuICAgICAgICA6IFwiXCIpICtcbiAgICAgIChza2lsbHMubGVuZ3RoXG4gICAgICAgID8gYCoqU2tpbGxzKio6ICR7c2tpbGxzLmpvaW4oXCIsIFwiKX1cXG5gXG4gICAgICAgIDogXCJcIikgK1xuICAgICAgKHNlbnNlcy5sZW5ndGhcbiAgICAgICAgPyBgKipTZW5zZXMqKjogJHtzZW5zZXMuam9pbihcIiwgXCIpfVxcbmBcbiAgICAgICAgOiBcIlwiKSArXG4gICAgICAobGFuZ3VhZ2VzLmxlbmd0aFxuICAgICAgICA/IGAqKkxhbmd1YWdlcyoqOiAke2xhbmd1YWdlcy5qb2luKFwiLCBcIil9XFxuYFxuICAgICAgICA6IFwiXCIpICtcbiAgICAgIGAqKkNoYWxsZW5nZSoqOiAke2NoYWxsZW5nZVRleHR9XFxuXFxuYCArXG4gICAgICByZW5kZXJBYmlsaXRpZXNUYWJsZShzdHIsIGRleCwgY29uLCBpbnQsIHdpcywgY2hhKTtcblxuICAgICAgaWYgKG1vbnN0ZXIuc3BlbGxjYXN0aW5nKSB7XG4gICAgICAgIGJvZHkgKz0gYFxcblxcbiMjIyBTcGVsbGNhc3RpbmdcXG4ke21vbnN0ZXIuc3BlbGxjYXN0aW5nXG4gICAgICAgICAgLm1hcCgoc2M6IGFueSkgPT4ge1xuICAgICAgICAgICAgY29uc3QgbmFtZSA9IHNjLm5hbWUgfHwgXCJTcGVsbGNhc3RpbmdcIjtcbiAgICAgICAgICAgIGNvbnN0IHBhcnRzOiBzdHJpbmdbXSA9IFtdO1xuXG4gICAgICAgICAgICBpZiAoc2MuaGVhZGVyRW50cmllcykge1xuICAgICAgICAgICAgICBjb25zdCBoZWFkZXJzID0gQXJyYXkuaXNBcnJheShzYy5oZWFkZXJFbnRyaWVzKVxuICAgICAgICAgICAgICAgID8gc2MuaGVhZGVyRW50cmllc1xuICAgICAgICAgICAgICAgIDogW3NjLmhlYWRlckVudHJpZXNdO1xuICAgICAgICAgICAgICBwYXJ0cy5wdXNoKGhlYWRlcnMubWFwKChlOiBhbnkpID0+IHJlcGxhY2U1ZVRhZ3MoZSkpLmpvaW4oXCIgXCIpKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKHNjLndpbGwpIHtcbiAgICAgICAgICAgICAgcGFydHMucHVzaChgLSAqKkF0IHdpbGw6KiogJHtzYy53aWxsLm1hcCgoczogYW55KSA9PiByZXBsYWNlNWVUYWdzKFN0cmluZyhzKSkpLmpvaW4oXCIsIFwiKX1gKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKHNjLmRhaWx5KSB7XG4gICAgICAgICAgICAgIGZvciAoY29uc3QgW2ssIGFycl0gb2YgT2JqZWN0LmVudHJpZXMoc2MuZGFpbHkpKSB7XG4gICAgICAgICAgICAgICAgY29uc3Qgc3BlbGxzID0gKGFyciBhcyBhbnlbXSkubWFwKHMgPT4gcmVwbGFjZTVlVGFncyhTdHJpbmcocykpKS5qb2luKFwiLCBcIik7XG4gICAgICAgICAgICAgICAgY29uc3QgbiA9IHBhcnNlSW50KGssIDEwKSB8fCAwO1xuICAgICAgICAgICAgICAgIGNvbnN0IGVhY2ggPSAvZSQvaS50ZXN0KGspO1xuICAgICAgICAgICAgICAgIGNvbnN0IGxhYmVsID0gbiA+IDAgPyAoZWFjaCA/IGAke259L2RheSBlYWNoYCA6IGAke259L2RheWApIDogXCJEYWlseVwiO1xuICAgICAgICAgICAgICAgIHBhcnRzLnB1c2goYC0gKioke2xhYmVsfToqKiAke3NwZWxsc31gKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gYCoqKiR7bmFtZX0uKioqXFxuJHtwYXJ0cy5qb2luKFwiXFxuXCIpfWA7XG4gICAgICAgICAgfSlcbiAgICAgICAgLmpvaW4oXCJcXG5cXG5cIil9YDtcbiAgICAgIH1cbiAgICAgIGlmIChtb25zdGVyLnRyYWl0KSAgICAgYm9keSArPSBgXFxuXFxuIyMjIFRyYWl0c1xcbiR7bW9uc3Rlci50cmFpdC5tYXAocmVuZGVyRW50cnkpLmpvaW4oXCJcXG5cXG5cIil9YDtcbiAgICAgIGlmIChtb25zdGVyLmFjdGlvbikgICAgYm9keSArPSBgXFxuXFxuIyMjIEFjdGlvbnNcXG4ke21vbnN0ZXIuYWN0aW9uLm1hcChyZW5kZXJFbnRyeSkuam9pbihcIlxcblxcblwiKX1gO1xuICAgICAgaWYgKG1vbnN0ZXIucmVhY3Rpb24pICBib2R5ICs9IGBcXG5cXG4jIyMgUmVhY3Rpb25zXFxuJHttb25zdGVyLnJlYWN0aW9uLm1hcChyZW5kZXJFbnRyeSkuam9pbihcIlxcblxcblwiKX1gO1xuICAgICAgaWYgKG1vbnN0ZXIubGVnZW5kYXJ5KSBib2R5ICs9IGBcXG5cXG4jIyMgTGVnZW5kYXJ5IEFjdGlvbnNcXG4ke21vbnN0ZXIubGVnZW5kYXJ5Lm1hcChyZW5kZXJFbnRyeSkuam9pbihcIlxcblxcblwiKX1gO1xuICBcbiAgICAgIGNvbnN0IGNvbnRlbnQgPSBgLS0tXFxuJHt5YW1sfVxcbi0tLVxcblxcbiR7Ym9keX1gO1xuICBcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHBhdGg6ICAgIGAke2NhdGVnb3J5fS8ke3NhZmVOYW1lfS5tZGAsXG4gICAgICAgIGNvbnRlbnQsXG4gICAgICB9O1xuICAgIH0pO1xuICB9XG4iLCAiLy8gNWUgMjAyNSBpdGVtcyBwYXJzZXJcblxuaW1wb3J0IHR5cGUgeyBQYXJzZWRNYXJrZG93bkZpbGUgfSBmcm9tIFwiLi4vLi4vdHlwZXNcIjtcbmltcG9ydCB7IHJlcGxhY2U1ZVRhZ3MgfSAgICAgZnJvbSBcIi4vaGVscGVycy90YWdSZXBsYWNlclwiO1xuaW1wb3J0IHsgZ2V0RnVsbFNvdXJjZU5hbWUgfSBmcm9tIFwiLi9oZWxwZXJzL3NvdXJjZU1hcFwiO1xuaW1wb3J0IHsgYnVpbGRGTSwgc2VyaWFsaXplRnJvbnRtYXR0ZXIsIElURU1fTUVUQV9ERUZTLCBGTV9GSUVMRFMgfSBmcm9tIFwiLi9oZWxwZXJzL2Zyb250bWF0dGVyXCI7XG5cblxuLyoqIEhlbHBlciB0byBjYXBpdGFsaXplIGZpcnN0IGxldHRlciBcdTIwMTMgbmV2ZXIgY3Jhc2hlcyBvbiBub24tc3RyaW5ncyAqL1xuZnVuY3Rpb24gY2FwaXRhbGl6ZUZpcnN0KGlucHV0OiBhbnkpOiBzdHJpbmcge1xuICAvLyBpZiBpdFx1MjAxOXMgbm90IGEgbm9uLWVtcHR5IHN0cmluZywgYmFpbCBvdXRcbiAgaWYgKHR5cGVvZiBpbnB1dCAhPT0gXCJzdHJpbmdcIiB8fCBpbnB1dC5sZW5ndGggPT09IDApIHJldHVybiBcIlwiO1xuICBjb25zdCBzID0gaW5wdXQudHJpbSgpO1xuICByZXR1cm4gcy5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIHMuc2xpY2UoMSkudG9Mb3dlckNhc2UoKTtcbn1cblxuXG5leHBvcnQgY29uc3QgREFNQUdFX1RZUEVfTUFQOiBSZWNvcmQ8c3RyaW5nLHN0cmluZz4gPSB7XG4gIFA6IFwiUGllcmNpbmdcIixcbiAgQjogXCJCbHVkZ2VvbmluZ1wiLFxuICBTOiBcIlNsYXNoaW5nXCIsXG4gIE46IFwiTmVjcm90aWNcIixcbiAgUjogXCJSYWRpYW50XCIsXG4gIEY6IFwiRmlyZVwiLFxuICBDOiBcIkNvbGRcIixcbiAgTDogXCJMaWdodG5pbmdcIixcbiAgVDogXCJUaHVuZGVyXCIsXG4gIEE6IFwiQWNpZFwiLFxuICBIOiBcIkhlYWxpbmdcIixcbiAgVTogXCJGb3JjZVwiLFxuICBWOiBcIlBzeWNoaWNcIixcbn07XG5cbmV4cG9ydCBjb25zdCBQUk9QRVJUWV9NQVA6IFJlY29yZDxzdHJpbmcsc3RyaW5nPiA9IHtcbiAgQTogXCJBbW11bml0aW9uXCIsXG4gIEY6IFwiRmluZXNzZVwiLFxuICBIOiBcIkhlYXZ5XCIsXG4gIEw6IFwiTGlnaHRcIixcbiAgUjogXCJSZWxvYWRcIixcbiAgUzogXCJTcGVjaWFsXCIsXG4gIFwiMkhcIjogXCJUd28tSGFuZGVkXCIsXG4gIFQ6IFwiVGhyb3duXCIsXG4gIFY6IFwiVmVyc2F0aWxlXCJcbn07XG5cbmV4cG9ydCBjb25zdCBJVEVNX1RZUEVfTUFQOiBSZWNvcmQ8c3RyaW5nLHN0cmluZz4gPSB7XG4gICRDOiAgXCJDdXJyZW5jeVwiLFxuICAkRzogIFwiR2VtXCIsXG4gIEE6ICAgXCJBbW11bml0aW9uXCIsXG4gIFwiQUlSfERNR1wiOiBcIlZlaGljbGUgKGFpcilcIixcbiAgXCJBRnxETUdcIjogXCJGdXR1cmUgQW1tb1wiLFxuICBBVDogIFwiQXJ0aXNhbiBUb29sc1wiLFxuICBFWFA6IFwiRXhwbG9zaXZlXCIsXG4gIEZEOiAgXCJGb29kIGFuZCBEcmlua1wiLFxuICBHOiAgIFwiR2VhclwiLFxuICBHUzogIFwiR2FtZVwiLFxuICBIQTogIFwiSGVhdnkgQXJtb3JcIixcbiAgXCJJREd8VERDU1JcIjogXCJJbGxpY2l0IERydWdcIixcbiAgSU5TOiBcIkluc3RydW1lbnRcIixcbiAgTEE6ICBcIkxpZ2h0IEFybW9yXCIsXG4gIE06ICAgXCJXZWFwb25cIixcbiAgTUE6ICBcIk1lZGl1bSBBcm1vclwiLFxuICBNTlQ6IFwiTW91bnRzIGFuZCBWZWhpY2xlc1wiLFxuICBPREg6IFwiTWlzY2VsbGFuZW91c1wiLFxuICBQOiAgIFwiQ29uc3VtYWJsZVwiLFxuICBSOiAgIFwiUmFuZ2VkIFdlYXBvblwiLFxuICBSRDogIFwiUm9kXCIsXG4gIFJHOiAgXCJSaW5nXCIsXG4gIFM6ICAgXCJTaGllbGRcIixcbiAgU0M6ICBcIlNjcm9sbFwiLFxuICBTQ0Y6IFwiU3BlbGwgQ2FzdGluZyBGb2N1c1wiLFxuICBTSFA6IFwiU2hpcFwiLFxuICBUOiAgIFwiVG9vbFwiLFxuICBUQUg6IFwiTW91bnRzIGFuZCBWZWhpY2xlc1wiLFxuICBURzogIFwiVHJhZGUgR29vZHNcIixcbiAgVkVIOiBcIk1vdW50cyBhbmQgVmVoaWNsZXNcIixcbiAgV0Q6ICBcIldhbmRcIixcbn07XG5cbi8qKiBjb2RlIFx1MjE5MiBmdWxsIGZvbGRlciBwYXRoIHVuZGVyIEl0ZW1zLyAqL1xuY29uc3QgY29kZUZvbGRlck1hcDogUmVjb3JkPHN0cmluZyxzdHJpbmc+ID0ge1xuICAvLyBXZWFwb25zICYgQXJtb3JcbiAgXCJBXCI6ICAgXCJXZWFwb25zIGFuZCBBcm1vci9BbW11bml0aW9uXCIsXG4gIFwiTVwiOiAgIFwiV2VhcG9ucyBhbmQgQXJtb3IvV2VhcG9uc1wiLFxuICBcIlJcIjogICBcIldlYXBvbnMgYW5kIEFybW9yL1JhbmdlZCBXZWFwb25zXCIsXG4gIFwiU1wiOiAgIFwiV2VhcG9ucyBhbmQgQXJtb3IvU2hpZWxkc1wiLFxuICBcIkxBXCI6ICBcIldlYXBvbnMgYW5kIEFybW9yL0FybW9yL0xpZ2h0IEFybW9yXCIsXG4gIFwiTUFcIjogIFwiV2VhcG9ucyBhbmQgQXJtb3IvQXJtb3IvTWVkaXVtIEFybW9yXCIsXG4gIFwiSEFcIjogIFwiV2VhcG9ucyBhbmQgQXJtb3IvQXJtb3IvSGVhdnkgQXJtb3JcIixcbiAgXCJFWFBcIjogXCJXZWFwb25zIGFuZCBBcm1vci9XZWFwb25zL0V4cGxvc2l2ZXNcIixcbiAgLy8gRnV0dXJlIEFtbW8gKEFGfERNRyBcdTIxOTIgcmF3Q29kZSBcIkFGXCIpXG4gIFwiQUZcIjogIFwiV2VhcG9ucyBhbmQgQXJtb3IvQW1tdW5pdGlvbi9GdXR1cmUgQW1tb1wiLFxuXG4gIC8vIE1hZ2ljYWwgSXRlbXNcbiAgXCJSRFwiOiAgXCJNYWdpY2FsIEl0ZW1zL1JvZHNcIixcbiAgXCJSR1wiOiAgXCJNYWdpY2FsIEl0ZW1zL1JpbmdzXCIsXG4gIFwiU0NcIjogIFwiTWFnaWNhbCBJdGVtcy9TY3JvbGxzXCIsXG4gIFwiU0NGXCI6IFwiTWFnaWNhbCBJdGVtcy9TcGVsbCBDYXN0aW5nIEZvY3VzXCIsXG4gIFwiV0RcIjogIFwiTWFnaWNhbCBJdGVtcy9XYW5kc1wiLFxuXG4gIC8vIFZhbHVhYmxlc1xuICBcIiRHXCI6IFwiVmFsdWFibGVzL0dlbXNcIixcbiAgLy8gQ3VycmVuY3kgKHJhd0NvZGUgYmVjb21lcyBcIkNcIiBhZnRlciBzdHJpcHBpbmcgJClcbiAgXCJDXCI6ICBcIlZhbHVhYmxlcy9DdXJyZW5jeVwiLFxuICBcIlRHXCI6IFwiVmFsdWFibGVzL1RyYWRlIEdvb2RzXCIsXG5cbiAgLy8gQXJ0aXNhbiBHb29kc1xuICBcIkFUXCI6ICBcIkFydGlzYW4gR29vZHMvVG9vbHNcIixcbiAgXCJUXCI6ICAgXCJBcnRpc2FuIEdvb2RzL1Rvb2xzXCIsXG4gIFwiSU5TXCI6IFwiQXJ0aXNhbiBHb29kcy9JbnN0cnVtZW50c1wiLFxuICBcIkdTXCI6ICBcIkFydGlzYW4gR29vZHMvR2FtZXNcIixcblxuICAvLyBHZWFyICYgTW91bnRzXG4gIFwiR1wiOiAgIFwiR2VhclwiLFxuICAvLyBNb3VudHMgJiBWZWhpY2xlc1xuICBcIk1OVFwiOiBcIkdlYXIvTW91bnRzIGFuZCBWZWhpY2xlc1wiLFxuICBcIlRBSFwiOiBcIkdlYXIvTW91bnRzIGFuZCBWZWhpY2xlc1wiLFxuICBcIlZFSFwiOiBcIkdlYXIvTW91bnRzIGFuZCBWZWhpY2xlc1wiLFxuICAvLyBBaXIgdmVoaWNsZXMgKEFJUnxETUcgXHUyMTkyIHJhd0NvZGUgXCJBSVJcIilcbiAgXCJBSVJcIjogXCJHZWFyL01vdW50cyBhbmQgVmVoaWNsZXMvQWlyXCIsXG5cbiAgLy8gQ29uc3VtYWJsZXNcbiAgXCJQXCI6ICAgXCJDb25zdW1hYmxlc1wiLFxuICAvLyBGb29kICYgRHJpbmtcbiAgXCJGRFwiOiAgXCJDb25zdW1hYmxlcy9Gb29kIGFuZCBEcmlua1wiLFxuXG4gIC8vIElsbGljaXQgRHJ1Z3MgKElER3xURENTUiBcdTIxOTIgcmF3Q29kZSBcIklER1wiKVxuICBcIklER1wiOiBcIkdlYXIvSWxsaWNpdCBEcnVnc1wiLFxuXG4gIC8vIE1pc2NlbGxhbmVvdXMgKE9ESClcbiAgXCJPREhcIjogXCJHZWFyL01pc2NlbGxhbmVvdXNcIixcbn07XG5cbmV4cG9ydCBmdW5jdGlvbiBwYXJzZUl0ZW1zRmlsZShqc29uOiBhbnksIGVkaXRpb25JZDogc3RyaW5nKTogUGFyc2VkTWFya2Rvd25GaWxlW10ge1xuICBjb25zdCByYXdJdGVtczogYW55W10gPSBbXTtcbiAgaWYgKEFycmF5LmlzQXJyYXkoanNvbi5iYXNlaXRlbSkpIHJhd0l0ZW1zLnB1c2goLi4uanNvbi5iYXNlaXRlbSk7XG4gIGlmIChBcnJheS5pc0FycmF5KGpzb24uaXRlbSkpICAgICByYXdJdGVtcy5wdXNoKC4uLmpzb24uaXRlbSk7XG4gIGlmIChBcnJheS5pc0FycmF5KGpzb24ub2JqZWN0KSkgICByYXdJdGVtcy5wdXNoKC4uLmpzb24ub2JqZWN0KTtcbiAgaWYgKEFycmF5LmlzQXJyYXkoanNvbi52ZWhpY2xlKSkgIHJhd0l0ZW1zLnB1c2goLi4uanNvbi52ZWhpY2xlKTtcbiAgaWYgKCFyYXdJdGVtcy5sZW5ndGgpIHJldHVybiBbXTtcblxuICBjb25zdCBiYXNlTmFtZXMgPSBuZXcgU2V0PHN0cmluZz4oXG4gICAgQXJyYXkuaXNBcnJheShqc29uLmJhc2VpdGVtKSA/IGpzb24uYmFzZWl0ZW0ubWFwKChiOiBhbnkpID0+IGIubmFtZSkgOiBbXVxuICApO1xuICBjb25zdCBvdXQ6IFBhcnNlZE1hcmtkb3duRmlsZVtdID0gW107XG5cbiAgZm9yIChjb25zdCBpdCBvZiByYXdJdGVtcykge1xuICAgIGNvbnN0IG5hbWUgICAgID0gaXQubmFtZSBhcyBzdHJpbmc7XG4gICAgY29uc3Qgc2FmZU5hbWUgPSBuYW1lLnJlcGxhY2UoL1tcXC9cXFxcOl0vZywgXCItXCIpO1xuXG4gICAgLy8gRGV0ZXJtaW5lIGZvbGRlclxuICAgIGNvbnN0IHJhd0NvZGUgPSAoaXQudHlwZSBhcyBzdHJpbmcgfHwgXCJcIikuc3BsaXQoXCJ8XCIpWzBdXG4gICAgICAgIC5zcGxpdChcInxcIilbMF0gICAgICAvLyBkcm9wIGFueXRoaW5nIGFmdGVyIFx1MjAxQ3xcdTIwMURcbiAgICAgICAgLnJlcGxhY2UoL15cXCQvLCBcIlwiKTsgLy8gc3RyaXAgbGVhZGluZyBcdTIwMUMkXHUyMDFEXG4gICAgbGV0IGZvbGRlciAgICA9IGNvZGVGb2xkZXJNYXBbcmF3Q29kZV0gPz8gXCJNaXNjZWxsYW5lb3VzXCI7XG5cbiAgICAvLyBWYXJpYW50c1xuICAgIGlmIChpdC5ib251c1dlYXBvbikge1xuICAgICAgZm9sZGVyID0gYCR7Zm9sZGVyfS9WYXJpYW50c2A7XG4gICAgfVxuICAgIC8vIE1hZ2ljYWxcbiAgICBlbHNlIHtcbiAgICAgIGNvbnN0IGlzTWFnaWMgPSAhIWl0LndvbmRyb3VzIHx8ICEhaXQucmVxQXR0dW5lIHx8ICEhaXQucmVxX2F0dHVuZVxuICAgICAgICB8fCBTdHJpbmcoaXQucmFyaXR5KS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKFwibWFnaWNcIik7XG4gICAgICBpZiAoaXNNYWdpYykge1xuICAgICAgICBjb25zdCBbICwgLi4ucmVzdCBdID0gZm9sZGVyLnNwbGl0KFwiL1wiKTtcbiAgICAgICAgZm9sZGVyID0gW1wiTWFnaWNhbCBJdGVtc1wiLCAuLi5yZXN0XS5qb2luKFwiL1wiKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBXZWFwb24gY2F0ZWdvcnkgc3ViZm9sZGVyXG4gICAgaWYgKChmb2xkZXIuc3RhcnRzV2l0aChcIldlYXBvbnMgYW5kIEFybW9yL1dlYXBvbnNcIikgfHxcbiAgICAgICAgIGZvbGRlci5zdGFydHNXaXRoKFwiV2VhcG9ucyBhbmQgQXJtb3IvUmFuZ2VkIFdlYXBvbnNcIikpICYmIGl0LndlYXBvbkNhdGVnb3J5KSB7XG4gICAgICBmb2xkZXIgPSBgJHtmb2xkZXJ9LyR7Y2FwaXRhbGl6ZUZpcnN0KGl0LndlYXBvbkNhdGVnb3J5KX1gO1xuICAgIH1cblxuICAgIC8vIG1ha2UgZWRpdGlvbklkIGF2YWlsYWJsZSBmb3IgdGhlIFNPVVJDRSBmaWVsZFxuKGpzb24gYXMgYW55KS5fZWRpdGlvbklkID0gZWRpdGlvbklkO1xuXG4vLyBidWlsZCBhIEZyb250bWF0dGVyIG9iamVjdCBmcm9tIHRoZSBKU09OXG5jb25zdCBmbSAgID0gYnVpbGRGTShpdCwgSVRFTV9NRVRBX0RFRlMpO1xuXG4vLyBpZiB0aGUgYnVpbHQgZnJvbnRtYXR0ZXIgc2F5cyB0aGlzIGlzIGEgbWFnaWNhbCBpdGVtXHUyMDI2XG5pZiAoZm1bRk1fRklFTERTLk1BR0lDQUxdKSB7XG4gIC8vIFx1MjAyNnRoZW4gYWRkIG91ciBWZXJtdW4gZmxhZ1xuICBmbVtGTV9GSUVMRFMuVkVSTVVOXSA9IGZhbHNlO1xufVxuXG5pZiAocmF3Q29kZSA9PT0gXCJNXCIgJiYgaXQud2VhcG9uQ2F0ZWdvcnkpIHtcbiAgLy8gXHUyMDFDTVx1MjAxRCBcdTIxOTIgdXNlIHdlYXBvbkNhdGVnb3J5IChcdTIwMUNTaW1wbGVcdTIwMUQvXHUyMDFDTWFydGlhbFx1MjAxRClcbiAgZm0udHlwZSA9IGAke2NhcGl0YWxpemVGaXJzdChpdC53ZWFwb25DYXRlZ29yeSl9IFdlYXBvbmA7XG59IGVsc2UgaWYgKElURU1fVFlQRV9NQVBbcmF3Q29kZV0pIHtcbiAgLy8gYW55IG90aGVyIGNvZGUgXHUyMTkyIG1hcHBlZCBsYWJlbFxuICBmbS50eXBlID0gSVRFTV9UWVBFX01BUFtyYXdDb2RlXTtcbn1cbmlmIChBcnJheS5pc0FycmF5KGZtLmRhbWFnZVR5cGVzKSkge1xuICBmbS5kYW1hZ2VUeXBlcyA9IGZtLmRhbWFnZVR5cGVzLm1hcCgoY29kZTogc3RyaW5nKSA9PlxuICAgIERBTUFHRV9UWVBFX01BUFtjb2RlXSB8fCBjb2RlXG4gICk7XG59XG4vLyBzZXJpYWxpemUgaXQgdG8gWUFNTFxubGV0IHlhbWwgPSBzZXJpYWxpemVGcm9udG1hdHRlcihmbSwgSVRFTV9NRVRBX0RFRlMpO1xuXG4vLyBpZiB5b3Ugc3RpbGwgd2FudCBwYWNrQ29udGVudHMsIGFwcGVuZCBpdCBoZXJlOlxuaWYgKEFycmF5LmlzQXJyYXkoaXQucGFja0NvbnRlbnRzKSkge1xuICB5YW1sICs9IFwiXFxucGFja0NvbnRlbnRzOlwiO1xuICBmb3IgKGNvbnN0IHBjIG9mIGl0LnBhY2tDb250ZW50cykge1xuICAgIHlhbWwgKz0gYFxcbiAgLSBpdGVtOiBcIiR7cGMuaXRlbX1cIlxcbiAgICBxdWFudGl0eTogJHtwYy5xdWFudGl0eX1gO1xuICB9XG59XG4gXG4vLyB3cmFwIGl0IGluIHRoZSBZQU1MIGZlbmNlXG5jb25zdCBmcm9udG1hdHRlciA9IGAtLS1cXG4ke3lhbWx9XFxuLS0tYDtcblxuXG4gICAgLy8gQm9keSBsaW5lc1xuICAgIGNvbnN0IGxpbmVzOiBzdHJpbmdbXSA9IFtdO1xuICAgIGxpbmVzLnB1c2goYCMgJHtuYW1lfWApO1xuICAgIGxpbmVzLnB1c2goXCJcIik7XG5cbiAgICAvLyBTdWJ0aXRsZVxuICAgIGNvbnN0IHN1YnRpdGxlID0gaXQud2VhcG9uXG4gICAgICA/IGAke2NhcGl0YWxpemVGaXJzdChpdC53ZWFwb25DYXRlZ29yeSl9IFdlYXBvbmBcbiAgICAgIDogaXQuYXJtb3JcbiAgICAgICAgPyBmb2xkZXIuc3BsaXQoXCIvXCIpLnBvcCgpIHx8IFwiQXJtb3JcIlxuICAgICAgICA6IFwiXCI7XG4gICAgaWYgKHN1YnRpdGxlKSBsaW5lcy5wdXNoKGAjIyMgKiR7c3VidGl0bGV9KmApO1xuXG4gICAgLy8gU3RhdHMgbGluZXNcbiAgICBpZiAoaXQud2VhcG9uKSB7XG4gICAgICBsaW5lcy5wdXNoKGAqKkNhdGVnb3J5Kio6ICR7Y2FwaXRhbGl6ZUZpcnN0KGl0LndlYXBvbkNhdGVnb3J5KX1gKTtcbiAgICAgIGxpbmVzLnB1c2goYCoqRGFtYWdlKio6ICR7aXQuZG1nMSA/PyBcIlwifSR7aXQuZG1nMiA/IGAgLyAke2l0LmRtZzJ9YCA6IFwiXCJ9YCk7XG4gICAgICBjb25zdCB0eXBlc0JvZHkgPSAoQXJyYXkuaXNBcnJheShpdC5kbWdUeXBlKSA/IGl0LmRtZ1R5cGUgOiBbaXQuZG1nVHlwZV0pXG4gICAgICAgIC5maWx0ZXIoKHQ6IGFueSkgPT4gQm9vbGVhbih0KSlcbiAgICAgICAgLm1hcCgodDogc3RyaW5nKSA9PiBEQU1BR0VfVFlQRV9NQVBbdF0gfHwgdCk7XG4gICAgICBsaW5lcy5wdXNoKGAqKkRhbWFnZSBUeXBlKio6ICR7dHlwZXNCb2R5LmpvaW4oXCIsIFwiKX1gKTtcbiAgICAgIGxpbmVzLnB1c2goYCoqUmFuZ2UqKjogJHtpdC5yYW5nZSA/PyBcIlx1MjAxNFwifWApO1xuICAgICAgbGluZXMucHVzaChgKipSZWxvYWQqKjogJHtpdC5yZWxvYWQgPz8gXCJcdTIwMTRcIn1gKTtcbiAgICAgIGlmIChpdC5hbW1vVHlwZSkgbGluZXMucHVzaChgKipBbW1vIFR5cGUqKjogJHtpdC5hbW1vVHlwZX1gKTtcbiAgICAgIGlmIChBcnJheS5pc0FycmF5KGl0LnByb3BlcnR5KSAmJiBpdC5wcm9wZXJ0eS5sZW5ndGgpIHtcbiAgICAgICAgY29uc3QgcHJvcHNCb2R5ID0gaXQucHJvcGVydHkubWFwKChwOiBzdHJpbmcpID0+IFBST1BFUlRZX01BUFtwXSB8fCBwKTtcbiAgICAgICAgbGluZXMucHVzaChgKipQcm9wZXJ0aWVzKio6ICR7cHJvcHNCb2R5LmpvaW4oXCIsIFwiKX1gKTtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKGl0LmFybW9yKSB7XG4gICAgICBsaW5lcy5wdXNoKGAqKkFybW9yIENsYXNzKio6ICR7aXQuYWN9YCk7XG4gICAgICBpZiAoaXQuc3RlYWx0aCkgbGluZXMucHVzaChgKipTdGVhbHRoIERpc2FkdmFudGFnZSoqOiB0cnVlYCk7XG4gICAgICBsaW5lcy5wdXNoKFwiXCIpO1xuICAgIH1cblxuICAgIC8vIERlc2NyaXB0aW9uIHdpdGggbmVzdGVkIGVudHJpZXNcbiAgICBjb25zdCBkZXNjID0gaXQuZW50cmllcyA/PyBpdC5kZXNjO1xuICAgIGlmIChkZXNjKSB7XG4gICAgICBmb3IgKGNvbnN0IHAgb2YgQXJyYXkuaXNBcnJheShkZXNjKSA/IGRlc2MgOiBbZGVzY10pIHtcbiAgICAgICAgaWYgKHR5cGVvZiBwID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgZm9yIChjb25zdCBsaW5lIG9mIHJlcGxhY2U1ZVRhZ3MocCkuc3BsaXQoXCJcXG5cIikpIGxpbmVzLnB1c2gobGluZSk7XG4gICAgICAgICAgbGluZXMucHVzaChcIlwiKTtcbiAgICAgICAgfSBlbHNlIGlmIChwICYmIHR5cGVvZiBwID09PSBcIm9iamVjdFwiICYmIHAudHlwZSA9PT0gXCJsaXN0XCIgJiYgQXJyYXkuaXNBcnJheShwLml0ZW1zKSkge1xuICAgICAgICAgIGlmIChsaW5lc1tsaW5lcy5sZW5ndGggLSAxXSAhPT0gXCJcIikgbGluZXMucHVzaChcIlwiKTtcbiAgICAgICAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgcC5pdGVtcykge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBpdGVtID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICAgIGxpbmVzLnB1c2goYC0gJHtyZXBsYWNlNWVUYWdzKGl0ZW0pfWApO1xuICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGhlYWQgPSBpdGVtPy5uYW1lID8gYCoqJHtyZXBsYWNlNWVUYWdzKFN0cmluZyhpdGVtLm5hbWUpKS5yZXBsYWNlKC9bLiE/XSQvLCBtID0+IG0pLnJlcGxhY2UoLyhbXi4hP10pJC8sIFwiJDEuXCIpfSoqYCA6IFwiXCI7XG4gICAgICAgICAgICBsZXQgYm9keSA9IFwiXCI7XG4gICAgICAgICAgICBpZiAodHlwZW9mIGl0ZW0/LmVudHJ5ID09PSBcInN0cmluZ1wiKSBib2R5ID0gcmVwbGFjZTVlVGFncyhpdGVtLmVudHJ5KTtcbiAgICAgICAgICAgIGVsc2UgaWYgKEFycmF5LmlzQXJyYXkoaXRlbT8uZW50cmllcykpIGJvZHkgPSBpdGVtLmVudHJpZXMubWFwKChlOiBhbnkpID0+IHR5cGVvZiBlID09PSBcInN0cmluZ1wiID8gcmVwbGFjZTVlVGFncyhlKSA6IFwiXCIpLmpvaW4oXCIgXCIpO1xuICAgICAgICAgICAgY29uc3QgbGluZSA9IFtoZWFkLCBib2R5XS5maWx0ZXIoQm9vbGVhbikuam9pbihcIiBcIikudHJpbSgpO1xuICAgICAgICAgICAgaWYgKGxpbmUpIGxpbmVzLnB1c2goYC0gJHtsaW5lfWApO1xuICAgICAgICAgIH1cbiAgICAgICAgICBsaW5lcy5wdXNoKFwiXCIpO1xuICAgICAgICB9IGVsc2UgaWYgKHAgJiYgdHlwZW9mIHAgPT09IFwib2JqZWN0XCIpIHtcbiAgICAgICAgICBpZiAobGluZXNbbGluZXMubGVuZ3RoIC0gMV0gPT09IFwiXCIpIGxpbmVzLnBvcCgpO1xuICAgICAgICAgIGlmICh0eXBlb2YgcC5uYW1lID09PSBcInN0cmluZ1wiICYmIHAubmFtZS50cmltKCkpIHtcbiAgICAgICAgICAgIGxpbmVzLnB1c2goYCMjIyMgJHtwLm5hbWV9YCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGNvbnN0IHN1YiA9IEFycmF5LmlzQXJyYXkocC5lbnRyaWVzKSA/IHAuZW50cmllcyA6IFtdO1xuICAgICAgICAgIGZvciAoY29uc3Qgc3Agb2Ygc3ViKSB7XG4gICAgICAgICAgICBpZiAoc3AgJiYgdHlwZW9mIHNwID09PSBcIm9iamVjdFwiICYmIHNwLnR5cGUgPT09IFwibGlzdFwiICYmIEFycmF5LmlzQXJyYXkoc3AuaXRlbXMpKSB7XG4gICAgICAgICAgICAgIGlmIChsaW5lc1tsaW5lcy5sZW5ndGggLSAxXSAhPT0gXCJcIikgbGluZXMucHVzaChcIlwiKTtcbiAgICAgICAgICAgICAgZm9yIChjb25zdCBpdGVtIG9mIHNwLml0ZW1zKSB7XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBpdGVtID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICAgICAgICBsaW5lcy5wdXNoKGAtICR7cmVwbGFjZTVlVGFncyhpdGVtKX1gKTtcbiAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb25zdCBoZWFkID0gaXRlbT8ubmFtZSA/IGAqKiR7cmVwbGFjZTVlVGFncyhTdHJpbmcoaXRlbS5uYW1lKSkucmVwbGFjZSgvWy4hP10kLywgbSA9PiBtKS5yZXBsYWNlKC8oW14uIT9dKSQvLCBcIiQxLlwiKX0qKmAgOiBcIlwiO1xuICAgICAgICAgICAgICAgIGxldCBib2R5ID0gXCJcIjtcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGl0ZW0/LmVudHJ5ID09PSBcInN0cmluZ1wiKSBib2R5ID0gcmVwbGFjZTVlVGFncyhpdGVtLmVudHJ5KTtcbiAgICAgICAgICAgICAgICBlbHNlIGlmIChBcnJheS5pc0FycmF5KGl0ZW0/LmVudHJpZXMpKSBib2R5ID0gaXRlbS5lbnRyaWVzLm1hcCgoZTogYW55KSA9PiB0eXBlb2YgZSA9PT0gXCJzdHJpbmdcIiA/IHJlcGxhY2U1ZVRhZ3MoZSkgOiBcIlwiKS5qb2luKFwiIFwiKTtcbiAgICAgICAgICAgICAgICBjb25zdCBsaW5lID0gW2hlYWQsIGJvZHldLmZpbHRlcihCb29sZWFuKS5qb2luKFwiIFwiKS50cmltKCk7XG4gICAgICAgICAgICAgICAgaWYgKGxpbmUpIGxpbmVzLnB1c2goYC0gJHtsaW5lfWApO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGxpbmVzLnB1c2goXCJcIik7XG4gICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAodHlwZW9mIHNwID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICAgIGZvciAoY29uc3QgbGluZSBvZiByZXBsYWNlNWVUYWdzKHNwKS5zcGxpdChcIlxcblwiKSkgbGluZXMucHVzaChsaW5lKTtcbiAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChzcCAmJiB0eXBlb2Ygc3AgPT09IFwib2JqZWN0XCIgJiYgc3AudHlwZSA9PT0gXCJlbnRyaWVzXCIgJiYgc3AubmFtZSkge1xuICAgICAgICAgICAgICBjb25zdCBoZWFkID0gYC0gKioqJHtyZXBsYWNlNWVUYWdzKHNwLm5hbWUpfS4qKipgO1xuICAgICAgICAgICAgICBjb25zdCBib2R5ID0gKEFycmF5LmlzQXJyYXkoc3AuZW50cmllcykgPyBzcC5lbnRyaWVzIDogW10pXG4gICAgICAgICAgICAgICAgLm1hcCgoZTogYW55KSA9PiB0eXBlb2YgZSA9PT0gXCJzdHJpbmdcIiA/IHJlcGxhY2U1ZVRhZ3MoZSkgOiBcIlwiKVxuICAgICAgICAgICAgICAgIC5qb2luKFwiIFwiKTtcbiAgICAgICAgICAgICAgaWYgKGJvZHkudHJpbSgpKSB7XG4gICAgICAgICAgICAgICAgbGluZXMucHVzaChgJHtoZWFkfSAke2JvZHl9YC50cmltKCkpO1xuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGxpbmVzLnB1c2goaGVhZCk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChzcCAmJiB0eXBlb2Ygc3AgPT09IFwib2JqZWN0XCIgJiYgQXJyYXkuaXNBcnJheShzcC5lbnRyaWVzKSkge1xuICAgICAgICAgICAgICBmb3IgKGNvbnN0IGlubmVyIG9mIHNwLmVudHJpZXMpIHtcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGlubmVyID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGxpbmUgb2YgcmVwbGFjZTVlVGFncyhpbm5lcikuc3BsaXQoXCJcXG5cIikpIGxpbmVzLnB1c2gobGluZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGxpbmVzLnB1c2goXCJcIik7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCBib2R5ID0gbGluZXMuam9pbihcIlxcblwiKTtcblxuICAgIG91dC5wdXNoKHsgcGF0aDogYEl0ZW1zLyR7Zm9sZGVyfS8ke3NhZmVOYW1lfS5tZGAsIGNvbnRlbnQ6IGAke2Zyb250bWF0dGVyfVxcblxcbiR7Ym9keX1gIH0pO1xuICB9XG5cbiAgcmV0dXJuIG91dC5zb3J0KChhLGIpID0+IGEucGF0aC5sb2NhbGVDb21wYXJlKGIucGF0aCkpO1xufSIsICIvLyBmcm9udG1hdHRlciA1ZSAyMDI0XG5cbmltcG9ydCB7IGdldEZ1bGxTb3VyY2VOYW1lIH0gZnJvbSBcIi4vc291cmNlTWFwXCI7XG5pbXBvcnQgeyBmb3JtYXRTaXplQWJicmV2LCBmb3JtYXRBbGlnbm1lbnRBYmJyZXYgfSBmcm9tIFwiLi4vYmVzdGlhcnlcIjtcbmltcG9ydCB7IGZvcm1hdFJhbmdlLCBmb3JtYXRUaW1lLCBmb3JtYXREdXJhdGlvbiwgU0NIT09MX01BUCB9IGZyb20gXCIuLi9zcGVsbHNcIjtcbmltcG9ydCB7IFBST1BFUlRZX01BUCwgREFNQUdFX1RZUEVfTUFQLCBJVEVNX1RZUEVfTUFQIH0gZnJvbSBcIi4uL2l0ZW1zXCI7XG5pbXBvcnQgeyByZXBsYWNlNWVUYWdzIH0gZnJvbSBcIi4vdGFnUmVwbGFjZXJcIjtcblxuZnVuY3Rpb24gYmxhbmtVbmRlZmluZWQodmFsOiBhbnkpOiBhbnkge1xuICByZXR1cm4gdmFsID09PSB1bmRlZmluZWQgPyBcIlwiIDogdmFsO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gY2FwKHN0cjogYW55KTogc3RyaW5nIHtcbiAgaWYgKHR5cGVvZiBzdHIgIT09IFwic3RyaW5nXCIpIHJldHVybiBcIlwiO1xuICByZXR1cm4gc3RyLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgc3RyLnNsaWNlKDEpO1xufVxuXG5leHBvcnQgY29uc3QgQUJJTElUWV9GVUxMOiBSZWNvcmQ8c3RyaW5nLHN0cmluZz4gPSB7XG4gIHN0cjogXCJTdHJlbmd0aFwiLFxuICBkZXg6IFwiRGV4dGVyaXR5XCIsXG4gIGNvbjogXCJDb25zdGl0dXRpb25cIixcbiAgaW50OiBcIkludGVsbGlnZW5jZVwiLFxuICB3aXM6IFwiV2lzZG9tXCIsXG4gIGNoYTogXCJDaGFyaXNtYVwiLFxufTtcblxuZXhwb3J0IGNvbnN0IFNJWkVfTUFQOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+ID0ge1xuICBUOiBcIlRpbnlcIixcbiAgUzogXCJTbWFsbFwiLFxuICBNOiBcIk1lZGl1bVwiLFxuICBMOiBcIkxhcmdlXCIsXG4gIEg6IFwiSHVnZVwiLFxuICBHOiBcIkdhcmdhbnR1YW5cIlxufTtcblxuLy8gXHUyNTAwXHUyNTAwXHUyNTAwIFVuaXZlcnNhbCBmcm9udG1hdHRlciBrZXlzIFx1MjUwMFx1MjUwMFx1MjUwMCAgXG5leHBvcnQgY29uc3QgRk1fRklFTERTID0ge1xuICBBQklMSVRZX0JPTlVTRVM6ICAgIFwiYWJpbGl0eV9ib251c2VzXCIsXG4gIEFDOiAgICAgICAgICAgICAgICAgXCJBQ1wiLFxuICBBTElHTk1FTlQ6ICAgICAgICAgIFwiQWxpZ25tZW50XCIsXG4gIEFNTU9fVFlQRTogICAgICAgICAgXCJBbW1vIFR5cGVcIixcbiAgQVJNT1JfUFJPRklDSUVOQ0lFUzpcImFybW9yLXByb2ZcIixcbiAgQVRUQUNLX1RZUEU6ICAgICAgICBcImF0dGFja190eXBlXCIsXG4gIEFUVFVORU1FTlQ6ICAgICAgICAgXCJBdHR1bmVtZW50XCIsXG4gIEFUVFVORV9SRVE6ICAgICAgICAgXCJBdHR1bmVfUmVxXCIsXG4gIENBU1RJTkdfVElNRTogICAgICAgXCJjYXN0aW5nX3RpbWVcIixcbiAgQ0hBUklTTUE6ICAgICAgICAgICBcImNoYXJpc21hXCIsXG4gIENIQV9NT0Q6ICAgICAgICAgICAgXCJjaGFfbW9kXCIsXG4gIENPTkNFTlRSQVRJT046ICAgICAgXCJjb25jZW50cmF0aW9uXCIsXG4gIENPTkRJVElPTl9JTU06ICAgICAgXCJjb25kX2ltbXVuaXR5XCIsXG4gIENPTlNUSVRVVElPTjogICAgICAgXCJjb25zdGl0dXRpb25cIixcbiAgQ09OX01PRDogICAgICAgICAgICBcImNvbl9tb2RcIixcbiAgQ09TVDogICAgICAgICAgICAgICBcImNvc3RcIixcbiAgQ09NUE9ORU5UUzogICAgICAgICBcIkNvbXBvbmVudHNcIixcbiAgQ0hBTExFTkdFX1JBVElORzogICBcIkNSXCIsXG4gIERBTUFHRV9UWVBFOiAgICAgICAgXCJkYW1hZ2VfdHlwZVwiLFxuICBEQU1BR0VfVFlQRVM6ICAgICAgIFwiZGFtYWdlVHlwZXNcIixcbiAgREFNQUdFOiAgICAgICAgICAgICBcImRhbWFnZVwiLFxuICBEQU1BR0VfUkVTOiAgICAgICAgIFwiZG1nX3Jlc2lzdGFuY2VcIixcbiAgREFNQUdFX0lNTTogICAgICAgICBcImRtZ19pbW11bml0eVwiLFxuICBERVhURVJJVFk6ICAgICAgICAgIFwiZGV4dGVyaXR5XCIsXG4gIERFWF9NT0Q6ICAgICAgICAgICAgXCJkZXhfbW9kXCIsXG4gIERVUkFUSU9OOiAgICAgICAgICAgXCJkdXJhdGlvblwiLFxuICBSVUxFU0VUOiAgICAgICAgICAgIFwicnVsZXNldFwiLFxuICBIUDogICAgICAgICAgICAgICAgIFwiSFBcIixcbiAgSU5URUxMSUdFTkNFOiAgICAgICBcImludGVsbGlnZW5jZVwiLFxuICBJTlRfTU9EOiAgICAgICAgICAgIFwiaW50X21vZFwiLFxuICBMQU5HVUFHRVM6ICAgICAgICAgIFwibGFuZ3VhZ2VzXCIsXG4gIExFVkVMOiAgICAgICAgICAgICAgXCJsZXZlbFwiLFxuICBNQUdJQ0FMOiAgICAgICAgICAgIFwibWFnaWNhbFwiLFxuICBNQVRFUklBTDogICAgICAgICAgIFwibWF0ZXJpYWxcIixcbiAgTkFNRTogICAgICAgICAgICAgICBcIm5hbWVcIixcbiAgUFJPUEVSVElFUzogICAgICAgICBcInByb3BlcnRpZXNcIixcbiAgUkFOR0U6ICAgICAgICAgICAgICBcInJhbmdlXCIsXG4gIFJBUklUWTogICAgICAgICAgICAgXCJyYXJpdHlcIixcbiAgUkVMT0FEOiAgICAgICAgICAgICBcInJlbG9hZFwiLFxuICBSSVRVQUw6ICAgICAgICAgICAgIFwicml0dWFsXCIsXG4gIFNBVkU6ICAgICAgICAgICAgICAgXCJzYXZlXCIsXG4gIFNBVklOR19USFJPV1M6ICAgICAgXCJzYXZpbmdfdGhyb3dzXCIsXG4gIFNDSE9PTDogICAgICAgICAgICAgXCJzY2hvb2xcIixcbiAgU0VOU0VTOiAgICAgICAgICAgICBcInNlbnNlc1wiLFxuICBTSVpFOiAgICAgICAgICAgICAgIFwic2l6ZVwiLFxuICBTS0lMTFM6ICAgICAgICAgICAgIFwic2tpbGxzXCIsXG4gIFNLSUxMX0NIT0lDRV9MSVNUOiAgXCJza2lsbF9jaG9pY2VfbGlzdFwiLFxuICBTT01BVElDOiAgICAgICAgICAgIFwic29tYXRpY1wiLFxuICBTT1VSQ0U6ICAgICAgICAgICAgIFwic291cmNlXCIsXG4gIFNQRUNJRVM6ICAgICAgICAgICAgXCJzcGVjaWVzXCIsXG4gIFNQRUVEOiAgICAgICAgICAgICAgXCJzcGVlZFwiLFxuICBTUEVMTF9DQVNUX01PRDogICAgIFwiU3BlbGwgQ2FzdCBNb2RcIixcbiAgU1BFTExfUkFOR0U6ICAgICAgICBcIlJhbmdlXCIsXG4gIFNURUFMVEhfRElTQURWQU5UQUdFOiBcInN0ZWFsdGhEaXNhZHZhbnRhZ2VcIixcbiAgU1RSRU5HVEg6ICAgICAgICAgICBcInN0cmVuZ3RoXCIsXG4gIFNUUl9NT0Q6ICAgICAgICAgICAgXCJzdHJfbW9kXCIsXG4gIFNVQlJBQ0VTOiAgICAgICAgICAgXCJzdWJyYWNlc1wiLFxuICBUT09MX1BST0ZJQ0lFTkNJRVM6IFwidG9vbC1wcm9mXCIsXG4gIFRPT0xfQ0hPSUNFX0xJU1Q6ICBcInRvb2xfY2hvaWNlX2xpc3RcIixcbiAgVFJBSVRTOiAgICAgICAgICAgICBcInRyYWl0c1wiLFxuICBUWVBFOiAgICAgICAgICAgICAgIFwidHlwZVwiLFxuICBWQVJJQU5UOiAgICAgICAgICAgIFwiVmFyaWFudFwiLFxuICBWRVJCQUw6ICAgICAgICAgICAgIFwidmVyYmFsXCIsXG4gIFZFUk1VTjogICAgICAgICAgICAgXCJ2ZXJtdW5cIixcbiAgV0VBUE9OX1BST0ZJQ0lFTkNJRVM6IFwid2VhcG9uLXByb2ZcIixcbiAgV0VJR0hUOiAgICAgICAgICAgICBcIndlaWdodFwiLFxuICBXSVNET006ICAgICAgICAgICAgIFwid2lzZG9tXCIsXG4gIFdJU19NT0Q6ICAgICAgICAgICAgXCJ3aXNfbW9kXCIsXG59IGFzIGNvbnN0O1xuXG5leHBvcnQgdHlwZSBGTUtleSA9IGtleW9mIHR5cGVvZiBGTV9GSUVMRFM7XG5leHBvcnQgdHlwZSBGcm9udG1hdHRlciA9IFBhcnRpYWw8UmVjb3JkPHR5cGVvZiBGTV9GSUVMRFNbRk1LZXldLCB1bmtub3duPj47XG5cbi8vIFx1MjUwMFx1MjUwMFx1MjUwMCBEZWZpbml0aW9uIG9mIGEgc2luZ2xlIGZpZWxkIG1hcHBpbmcgXHUyNTAwXHUyNTAwXHUyNTAwXG5leHBvcnQgaW50ZXJmYWNlIEZpZWxkRGVmIHtcbiAgLyoqIFdoaWNoIGNhbGxcdTIwMTBzaWduIChrZXkgaW4gRk1fRklFTERTKSAqL1xuICBjYWxsU2lnbjogRk1LZXk7XG4gIC8qKiBXaGljaCBKU09OIHByb3BlcnR5IHRvIHJlYWQgKi9cbiAganNvbktleTogIHN0cmluZyB8IHN0cmluZ1tdO1xuICAvKiogT3B0aW9uYWwgdHJhbnNmb3JtZXI6IHJhdyBKU09OIFx1MjE5MiBmaW5hbCB2YWx1ZSAqL1xuICBjb252PzogICAgKHJhdzogYW55LCBhbGxKc29uPzogYW55KSA9PiB1bmtub3duO1xufVxuXG5jb25zdCB1bmlmaWVkQXJtb3JQcm9mcyA9ICh2YWw6IGFueSk6IHN0cmluZ1tdID0+XG4gIEFycmF5LmlzQXJyYXkodmFsPy5hcm1vcikgPyB2YWwuYXJtb3IubWFwKGNhcCkgOlxuICBBcnJheS5pc0FycmF5KHZhbCkgPyB2YWwubWFwKGNhcCkgOiBbXTtcblxuLy8gZnJvbnRtYXR0ZXIudHNcblxuZXhwb3J0IGZ1bmN0aW9uIHVuaWZpZWRXZWFwb25Qcm9mcyh2YWw6IGFueSk6IHN0cmluZ1tdIHtcbiAgLy8gcHVsbCB0aGUgXHUyMDFDd2VhcG9uc1x1MjAxRCBhcnJheSBvZmYgZWl0aGVyIGEgcmF3IGFycmF5IG9yIGEgc3RhcnRpbmdQcm9maWNpZW5jaWVzIG9iamVjdFxuICBjb25zdCByYXdBcnI6IGFueVtdID0gQXJyYXkuaXNBcnJheSh2YWw/LndlYXBvbnMpXG4gICAgPyB2YWwud2VhcG9uc1xuICAgIDogQXJyYXkuaXNBcnJheSh2YWwpXG4gICAgPyB2YWxcbiAgICA6IFtdO1xuXG4gIGNvbnN0IG91dCA9IG5ldyBTZXQ8c3RyaW5nPigpO1xuXG4gIGZ1bmN0aW9uIGhhbmRsZU9uZShlbnRyeTogYW55KSB7XG4gICAgaWYgKEFycmF5LmlzQXJyYXkoZW50cnkpKSB7XG4gICAgICAvLyBmbGF0dGVuIG5lc3RlZCBhcnJheXNcbiAgICAgIGVudHJ5LmZvckVhY2goaGFuZGxlT25lKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAodHlwZW9mIGVudHJ5ID09PSBcInN0cmluZ1wiKSB7XG4gICAgICBjb25zdCBsaXQgPSBlbnRyeS50cmltKCkudG9Mb3dlckNhc2UoKTtcbiAgICAgIGlmIChsaXQgPT09IFwic2ltcGxlXCIpIHtcbiAgICAgICAgb3V0LmFkZChcIlNpbXBsZSBXZWFwb25zXCIpO1xuICAgICAgfSBlbHNlIGlmIChsaXQgPT09IFwibWFydGlhbFwiKSB7XG4gICAgICAgIG91dC5hZGQoXCJNYXJ0aWFsIFdlYXBvbnNcIik7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBkZXRlY3QgdGFnZ2VkIGl0ZW1zIHZzIHNpbXBsZSB3b3Jkc1xuICAgICAgICBjb25zdCB0ZXh0ID0gZW50cnkuc3RhcnRzV2l0aChcIntAXCIpXG4gICAgICAgICAgPyByZXBsYWNlNWVUYWdzKGVudHJ5KVxuICAgICAgICAgIDogY2FwKGVudHJ5KTtcbiAgICAgICAgb3V0LmFkZCh0ZXh0KTtcbiAgICAgIH1cbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAoZW50cnkgJiYgdHlwZW9mIGVudHJ5ID09PSBcIm9iamVjdFwiICYmIGVudHJ5LnByb2ZpY2llbmN5KSB7XG4gICAgICAvLyB7IHByb2ZpY2llbmN5OiBcImZpcmVhcm1zXCIsIG9wdGlvbmFsOiB0cnVlIH1cbiAgICAgIGNvbnN0IG5hbWUgPSBjYXAoZW50cnkucHJvZmljaWVuY3kpO1xuICAgICAgb3V0LmFkZChlbnRyeS5vcHRpb25hbCA/IGAke25hbWV9IChvcHRpb25hbClgIDogbmFtZSk7XG4gICAgfVxuICB9XG5cbiAgcmF3QXJyLmZvckVhY2goaGFuZGxlT25lKTtcbiAgcmV0dXJuIFsuLi5vdXRdO1xufVxuXG5cbmNvbnN0IFNBVkVfTkFNRV9NQVA6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4gPSB7XG4gIHN0cjogXCJTdHJlbmd0aFwiLFxuICBzdHJlbmd0aDogXCJTdHJlbmd0aFwiLFxuICBkZXg6IFwiRGV4dGVyaXR5XCIsXG4gIGRleHRlcml0eTogXCJEZXh0ZXJpdHlcIixcbiAgY29uOiBcIkNvbnN0aXR1dGlvblwiLFxuICBjb25zdGl0dXRpb246IFwiQ29uc3RpdHV0aW9uXCIsXG4gIGludDogXCJJbnRlbGxpZ2VuY2VcIixcbiAgaW50ZWxsaWdlbmNlOiBcIkludGVsbGlnZW5jZVwiLFxuICB3aXM6IFwiV2lzZG9tXCIsXG4gIHdpc2RvbTogXCJXaXNkb21cIixcbiAgY2hhOiBcIkNoYXJpc21hXCIsXG4gIGNoYXJpc21hOiBcIkNoYXJpc21hXCIsXG59O1xuXG5leHBvcnQgZnVuY3Rpb24gdW5pZmllZFNhdmVzKHZhbDogYW55KTogc3RyaW5nW10ge1xuICBpZiAoIXZhbCkgcmV0dXJuIFtdO1xuXG4gIC8vIEFycmF5IGZvcm1cbiAgaWYgKEFycmF5LmlzQXJyYXkodmFsKSkge1xuICAgIHJldHVybiB2YWwubWFwKChrKSA9PiB7XG4gICAgICBjb25zdCBrZXkgPSBTdHJpbmcoaykudG9Mb3dlckNhc2UoKTtcbiAgICAgIHJldHVybiBTQVZFX05BTUVfTUFQW2tleV0gfHwgKGtleS5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIGtleS5zbGljZSgxKSk7XG4gICAgfSk7XG4gIH1cblxuICAvLyBPYmplY3QgZm9ybSAoZS5nLiwgeyBjb246IHRydWUsIGRleDogdHJ1ZSB9KVxuICBpZiAodHlwZW9mIHZhbCA9PT0gXCJvYmplY3RcIikge1xuICAgIHJldHVybiBPYmplY3Qua2V5cyh2YWwpLm1hcCgoaykgPT4ge1xuICAgICAgY29uc3Qga2V5ID0gay50b0xvd2VyQ2FzZSgpO1xuICAgICAgcmV0dXJuIFNBVkVfTkFNRV9NQVBba2V5XSB8fCAoa2V5LmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsga2V5LnNsaWNlKDEpKTtcbiAgICB9KTtcbiAgfVxuXG4gIC8vIFN0cmluZyBmb3JtXG4gIGNvbnN0IGtleSA9IFN0cmluZyh2YWwpLnRvTG93ZXJDYXNlKCk7XG4gIHJldHVybiBbU0FWRV9OQU1FX01BUFtrZXldIHx8IChrZXkuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBrZXkuc2xpY2UoMSkpXTtcbn1cblxuZXhwb3J0IGNvbnN0IHVuaWZpZWRTa2lsbHMgPSAodmFsOiBhbnkpOiBzdHJpbmdbXSA9PiB7XG4gIC8vIDEpIFx1MjAxQ0Jlc3RpYXJ5XHUyMDFEIHN0eWxlOiBmbGF0IG9iamVjdCBtYXBwaW5nIHNraWxsXHUyMTkybW9kaWZpZXJcbiAgaWYgKFxuICAgIHZhbCAmJlxuICAgICFBcnJheS5pc0FycmF5KHZhbCkgJiZcbiAgICB0eXBlb2YgdmFsID09PSBcIm9iamVjdFwiICYmXG4gICAgLy8gZW5zdXJlIGV2ZXJ5IHZhbHVlIGlzIGEgc3RyaW5nIG9yIG51bWJlclxuICAgIE9iamVjdC52YWx1ZXModmFsKS5ldmVyeSh2ID0+IHR5cGVvZiB2ID09PSBcInN0cmluZ1wiIHx8IHR5cGVvZiB2ID09PSBcIm51bWJlclwiKVxuICApIHtcbiAgICByZXR1cm4gT2JqZWN0LmVudHJpZXModmFsKS5tYXAoXG4gICAgICAoW3NraWxsLCBtb2RdKSA9PiBgJHtjYXAoc2tpbGwpfSAke21vZH1gLnRyaW0oKVxuICAgICk7XG4gIH1cblxuICAvLyAyKSBuZXN0ZWQgdW5kZXIgLnNraWxscyAvIC5za2lsbFByb2ZpY2llbmNpZXMgLyAuc2tpbGxQcm9mXG4gIGlmICh2YWwgJiYgIUFycmF5LmlzQXJyYXkodmFsKSAmJiB0eXBlb2YgdmFsID09PSBcIm9iamVjdFwiKSB7XG4gICAgY29uc3QgbmVzdGVkID0gKHZhbCBhcyBhbnkpLnNraWxsc1xuICAgICAgPz8gKHZhbCBhcyBhbnkpLnNraWxsUHJvZlxuICAgICAgPz8gKHZhbCBhcyBhbnkpLnNraWxsUHJvZmljaWVuY2llcztcbiAgICByZXR1cm4gdW5pZmllZFNraWxscyhuZXN0ZWQpO1xuICB9XG5cbiAgLy8gMykgYXJyYXktc3R5bGVcbiAgaWYgKCFBcnJheS5pc0FycmF5KHZhbCkpIHJldHVybiBbXTtcblxuICBjb25zdCBvdXQgPSBuZXcgU2V0PHN0cmluZz4oKTtcbiAgZm9yIChjb25zdCBlIG9mIHZhbCkge1xuICAgIC8vIDNhKSB7IGFueTogTiB9XG4gICAgaWYgKGUgJiYgdHlwZW9mIGUgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIChlIGFzIGFueSkuYW55ID09PSBcIm51bWJlclwiKSB7XG4gICAgICBvdXQuYWRkKGBDaG9vc2UgJHsoZSBhcyBhbnkpLmFueX1gKTtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cbiAgICAvLyAzYikgeyBjaG9vc2U6IHsgY291bnQsIFx1MjAyNiB9IH1cbiAgICBpZiAoZSAmJiB0eXBlb2YgZSA9PT0gXCJvYmplY3RcIiAmJiAoZSBhcyBhbnkpLmNob29zZSkge1xuICAgICAgY29uc3QgY250ID0gKGUgYXMgYW55KS5jaG9vc2UuY291bnQgPz8gMTtcbiAgICAgIG91dC5hZGQoYENob29zZSAke2NudH1gKTtcbiAgICB9XG4gICAgLy8gM2MpIGZpeGVkIGZsYWdzIGZvbzogdHJ1ZVxuICAgIGlmIChlICYmIHR5cGVvZiBlID09PSBcIm9iamVjdFwiKSB7XG4gICAgICBmb3IgKGNvbnN0IFtrLCB2XSBvZiBPYmplY3QuZW50cmllcyhlKSkge1xuICAgICAgICBpZiAodiA9PT0gdHJ1ZSkgb3V0LmFkZChjYXAoaykpO1xuICAgICAgfVxuICAgIH1cbiAgICAvLyAzZCkgbGl0ZXJhbCBzdHJpbmdzXG4gICAgaWYgKHR5cGVvZiBlID09PSBcInN0cmluZ1wiKSB7XG4gICAgICBvdXQuYWRkKGNhcChlKSk7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIFsuLi5vdXRdO1xufTtcblxuXG4gXG5leHBvcnQgY29uc3QgdW5pZmllZFRvb2xQcm9mcyA9ICh2YWw6IGFueSk6IHN0cmluZ1tdID0+IHtcbiAgLy8gcHVsbCBuZXN0ZWQgYXJyYXkgaWYgc29tZW9uZSBwYXNzZWQgeW91IHRoZSB3aG9sZSBzdGFydGluZ1Byb2ZpY2llbmNpZXMgb2JqXG4gIGxldCBlbnRyaWVzOiBhbnlbXSA9IEFycmF5LmlzQXJyYXkodmFsKSA/IHZhbFxuICAgIDogQXJyYXkuaXNBcnJheSh2YWw/LnRvb2xQcm9maWNpZW5jaWVzKSA/IHZhbC50b29sUHJvZmljaWVuY2llc1xuICAgIDogQXJyYXkuaXNBcnJheSh2YWw/LnRvb2xzKSAgICAgICAgICAgICA/IHZhbC50b29sc1xuICAgIDogW107XG5cbiAgY29uc3Qgb3V0ID0gbmV3IFNldDxzdHJpbmc+KCk7XG4gIGxldCBzYXdDaG9vc2UgPSBmYWxzZTtcblxuICBmb3IgKGNvbnN0IGUgb2YgZW50cmllcykge1xuICAgIGlmICh0eXBlb2YgZSA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgb3V0LmFkZChjYXAoZSkpO1xuICAgICAgY29udGludWU7XG4gICAgfVxuXG4gICAgaWYgKGU/LmNob29zZSkge1xuICAgICAgY29uc3QgY250ID0gZS5jaG9vc2UuY291bnQgPz8gMTtcbiAgICAgIHNhd0Nob29zZSA9IHRydWU7XG4gICAgICBvdXQuYWRkKGBDaG9vc2UgJHtjbnR9YCk7XG4gICAgfVxuXG4gICAgLy8gcHVsbCBvdXQgYW55IGZpeGVkIFx1MjAxQ2ZvbzogdHJ1ZVx1MjAxRCBvciBudW1lcmljIFx1MjAxQ2FueUZvbzogTlx1MjAxRFxuICAgIGZvciAoY29uc3QgW2ssdl0gb2YgT2JqZWN0LmVudHJpZXMoZSkpIHtcbiAgICAgIGlmICh2ID09PSB0cnVlKSB7XG4gICAgICAgIG91dC5hZGQoY2FwKGspKTtcbiAgICAgIH0gZWxzZSBpZiAodHlwZW9mIHYgPT09IFwibnVtYmVyXCIgJiYgay5zdGFydHNXaXRoKFwiYW55XCIpKSB7XG4gICAgICAgIC8vIGUuZy4gYW55QXJ0aXNhbnNUb29sOjFcbiAgICAgICAgY29uc3QgcmF3ID0gay5yZXBsYWNlKC9eYW55LywgXCJcIik7XG4gICAgICAgIGNvbnN0IHNwYWNlZCA9IHJhd1xuICAgICAgICAgIC5yZXBsYWNlKC8oW2Etel0pKFtBLVpdKS9nLCBcIiQxICQyXCIpXG4gICAgICAgICAgLnNwbGl0KFwiIFwiKVxuICAgICAgICAgIC5tYXAoY2FwKVxuICAgICAgICAgIC5qb2luKFwiIFwiKTtcbiAgICAgICAgb3V0LmFkZChgQ2hvb3NlICR7dn0gJHtzcGFjZWR9YCk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIFsuLi5vdXRdO1xufTtcblxuZXhwb3J0IGNvbnN0IEFMTF9GSUVMRF9ERUZTOiBGaWVsZERlZltdID0gW1xuICAvLyBcdTI1MDBcdTI1MDBcdTI1MDAgQ29yZSBcdTI1MDBcdTI1MDBcdTI1MDBcbiAgeyBjYWxsU2lnbjogXCJOQU1FXCIsICBqc29uS2V5OiBcIm5hbWVcIiB9LFxue1xuICBjYWxsU2lnbjogXCJTT1VSQ0VcIixcbiAganNvbktleTogW1wic291cmNlXCJdLFxuICBjb252OiAocmF3OiBhbnksIGFsbEpzb246IGFueSk6IHN0cmluZ1tdID0+IHtcbiAgICBjb25zdCBvdXQgPSBuZXcgU2V0PHN0cmluZz4oKTtcbiAgICBjb25zdCBlZGl0aW9uSWQgPSAoYWxsSnNvbiBhcyBhbnkpLl9lZGl0aW9uSWQ7XG5cbiAgICAvLyAxKSBwcmltYXJ5IHNvdXJjZShzKVxuICAgIGNvbnN0IGFyciA9IEFycmF5LmlzQXJyYXkocmF3KSA/IHJhdyA6IFtyYXddO1xuICAgIGFyci5mb3JFYWNoKHNyYyA9PiB7XG4gICAgICBvdXQuYWRkKGdldEZ1bGxTb3VyY2VOYW1lKHNyYywgZWRpdGlvbklkKSk7XG4gICAgfSk7XG5cbiAgICAvLyAyKSBhbnkgb3RoZXJTb3VyY2VzIGVudHJpZXNcbiAgICBmb3IgKGNvbnN0IG9zIG9mIGFsbEpzb24ub3RoZXJTb3VyY2VzID8/IFtdKSB7XG4gICAgICBpZiAob3MgJiYgdHlwZW9mIG9zLnNvdXJjZSA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICBvdXQuYWRkKGdldEZ1bGxTb3VyY2VOYW1lKG9zLnNvdXJjZSwgZWRpdGlvbklkKSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gMykgcmVwcmludGVkQXMgZW50cmllcyAoZ3VhcmQgYmVmb3JlIHNwbGl0dGluZylcbiAgICBmb3IgKGNvbnN0IHJlcCBvZiBhbGxKc29uLnJlcHJpbnRlZEFzID8/IFtdKSB7XG4gICAgICAvLyBlbnN1cmUgd2UgaGF2ZSBhIHN0cmluZyB0byBzcGxpdFxuICAgICAgY29uc3QgcmVwU3RyID0gdHlwZW9mIHJlcCA9PT0gXCJzdHJpbmdcIiA/IHJlcCA6IFN0cmluZyhyZXApO1xuICAgICAgY29uc3QgcGFydHMgPSByZXBTdHIuc3BsaXQoXCJ8XCIpO1xuICAgICAgLy8gaWYgdGhlcmUncyBubyBwaXBlLCBwYXJ0c1sxXSB3aWxsIGJlIHVuZGVmaW5lZCwgc28gZmFsbGJhY2sgdG8gcGFydHNbMF1cbiAgICAgIGNvbnN0IHNyYyA9IHBhcnRzWzFdID8/IHBhcnRzWzBdO1xuICAgICAgb3V0LmFkZChnZXRGdWxsU291cmNlTmFtZShzcmMsIGVkaXRpb25JZCkpO1xuICAgIH1cblxuICAgIHJldHVybiBbLi4ub3V0XTtcbiAgfVxufSxcblxuXG4gIC8vIFx1MjUwMFx1MjUwMFx1MjUwMCBQcm9maWNpZW5jaWVzIFx1MjUwMFx1MjUwMFx1MjUwMFxuICB7IGNhbGxTaWduOiBcIkFSTU9SX1BST0ZJQ0lFTkNJRVNcIiwgIGpzb25LZXk6IFtcImFybW9yUHJvZmljaWVuY2llc1wiLCBcImFybW9yUHJvZnNcIiwgXCJzdGFydGluZ1Byb2ZpY2llbmNpZXNcIl0sIGNvbnY6IHVuaWZpZWRBcm1vclByb2ZzIH0sXG4gIHsgXG4gICAgY2FsbFNpZ246IFwiV0VBUE9OX1BST0ZJQ0lFTkNJRVNcIixcbiAgICBqc29uS2V5OiBbXCJ3ZWFwb25Qcm9maWNpZW5jaWVzXCIsXCJ3ZWFwb25Qcm9mc1wiLFwic3RhcnRpbmdQcm9maWNpZW5jaWVzXCJdLFxuICAgIGNvbnY6IHVuaWZpZWRXZWFwb25Qcm9mc1xuICB9LFxuICB7IGNhbGxTaWduOiBcIlRPT0xfUFJPRklDSUVOQ0lFU1wiLCAgIGpzb25LZXk6IFtcInRvb2xQcm9maWNpZW5jaWVzXCIsIFwidG9vbFByb2ZzXCIsIFwic3RhcnRpbmdQcm9maWNpZW5jaWVzXCJdLCBjb252OiB1bmlmaWVkVG9vbFByb2ZzIH0sXG4gIHtcbiAgICBjYWxsU2lnbjogXCJUT09MX0NIT0lDRV9MSVNUXCIsXG4gICAganNvbktleTogW1widG9vbFByb2ZpY2llbmNpZXNcIiwgXCJ0b29sUHJvZnNcIiwgXCJzdGFydGluZ1Byb2ZpY2llbmNpZXNcIl0sXG4gICAgY29udjogKHJhdzogYW55KSA9PiB7XG4gICAgICBjb25zdCBhcnIgPSBBcnJheS5pc0FycmF5KHJhdylcbiAgICAgICAgPyByYXdcbiAgICAgICAgOiBBcnJheS5pc0FycmF5KHJhdz8udG9vbFByb2ZpY2llbmNpZXMpXG4gICAgICAgID8gcmF3LnRvb2xQcm9maWNpZW5jaWVzXG4gICAgICAgIDogQXJyYXkuaXNBcnJheShyYXc/LnRvb2xzKVxuICAgICAgICA/IHJhdy50b29sc1xuICAgICAgICA6IFtdO1xuICAgICAgY29uc3QgY2hvaWNlID0gYXJyLmZpbmQoKGU6IGFueSkgPT4gZT8uY2hvb3NlKTtcbiAgICAgIHJldHVybiBjaG9pY2U/LmNob29zZT8uZnJvbT8ubWFwKChzOiBzdHJpbmcpID0+IGNhcChzKSkgPz8gW107XG4gICAgfVxuICB9LFxuICB7IGNhbGxTaWduOiBcIlNBVklOR19USFJPV1NcIiwgICAgICAgIGpzb25LZXk6IFtcInNhdmVcIiwgXCJwcm9maWNpZW5jeVwiLCBcInNhdmluZ1Rocm93XCJdLCBjb252OiB1bmlmaWVkU2F2ZXMgfSxcbiAge1xuICAgIGNhbGxTaWduOiBcIlNLSUxMU1wiLFxuICAgIGpzb25LZXk6IFtcInNraWxsXCIsIFwic2tpbGxQcm9mXCIsIFwic2tpbGxQcm9maWNpZW5jaWVzXCIsIFwic3RhcnRpbmdQcm9maWNpZW5jaWVzXCJdLFxuICAgIGNvbnY6IHVuaWZpZWRTa2lsbHNcbiAgfSxcblxuICB7XG4gICAgY2FsbFNpZ246IFwiU0tJTExfQ0hPSUNFX0xJU1RcIixcbiAgICBqc29uS2V5OiBbXCJza2lsbFwiLCBcInNraWxsUHJvZlwiLCBcInNraWxsUHJvZmljaWVuY2llc1wiLCBcInN0YXJ0aW5nUHJvZmljaWVuY2llc1wiXSxcbiAgICBjb252OiAocmF3OiBhbnkpID0+IHtcbiAgICAgIC8vIG5vcm1hbGl6ZSBpbnRvIGFuIGFycmF5IG9mIGVudHJpZXNcbiAgICAgIGNvbnN0IGFycjogYW55W10gPSBBcnJheS5pc0FycmF5KHJhdylcbiAgICAgICAgPyByYXdcbiAgICAgICAgOiBBcnJheS5pc0FycmF5KHJhdz8uc2tpbGxQcm9maWNpZW5jaWVzKVxuICAgICAgICA/IHJhdy5za2lsbFByb2ZpY2llbmNpZXNcbiAgICAgICAgOiBBcnJheS5pc0FycmF5KHJhdz8uc2tpbGxzKVxuICAgICAgICA/IHJhdy5za2lsbHNcbiAgICAgICAgOiBBcnJheS5pc0FycmF5KHJhdz8uc2tpbGxQcm9mKVxuICAgICAgICA/IHJhdy5za2lsbFByb2ZcbiAgICAgICAgOiBbXTtcblxuICAgICAgLy8gZmluZCB0aGUgb25lIGVudHJ5IHRoYXQgcmVwcmVzZW50cyB0aGUgXHUyMDFDY2hvb3NlXHUyMDFEIGJ1Y2tldFxuICAgICAgY29uc3QgY2hvaWNlT2JqID0gYXJyLmZpbmQoZSA9PiBlPy5jaG9vc2UgfHwgdHlwZW9mIGUuYW55ID09PSBcIm51bWJlclwiKTtcbiAgICAgIGlmICghY2hvaWNlT2JqKSByZXR1cm4gW107XG5cbiAgICAgIC8vIGV4cGxpY2l0IFx1MjAxQ2Nob29zZSBmcm9tIFsgLi4uIF1cdTIwMURcbiAgICAgIGlmIChjaG9pY2VPYmouY2hvb3NlICYmIEFycmF5LmlzQXJyYXkoY2hvaWNlT2JqLmNob29zZS5mcm9tKSkge1xuICAgICAgICByZXR1cm4gY2hvaWNlT2JqLmNob29zZS5mcm9tLm1hcChjYXApO1xuICAgICAgfVxuXG4gICAgICAvLyB0aGUgXHUyMDFDYW55OiAzXHUyMDFEIHNob3J0aGFuZCBcdTIxOTIgb2ZmZXIgZXZlcnkgc2tpbGxcbiAgICAgIGlmICh0eXBlb2YgY2hvaWNlT2JqLmFueSA9PT0gXCJudW1iZXJcIikge1xuICAgICAgICAvLyBTS0lMTF9PUFRJT05TIGlzIHlvdXIgY29uc3QgW1wiQWNyb2JhdGljc1wiLCBcIkFuaW1hbCBIYW5kbGluZ1wiLCBcdTIwMjZdXG4gICAgICAgIHJldHVybiBTS0lMTF9PUFRJT05TO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gW107XG4gICAgfVxuICB9LFxuICB7IGNhbGxTaWduOiBcIlNQRUxMX0NBU1RfTU9EXCIsanNvbktleTogXCJzcGVsbGNhc3RpbmdBYmlsaXR5XCIsICBcbiAgICBjb252OiAocmF3KSA9PiB7XG4gICAgLy8gcmF3IG1pZ2h0IGJlIFwiY2hhXCIgb3IgXCJDSEFcIlxuICAgIGNvbnN0IGtleSA9IFN0cmluZyhyYXcpLnRvTG93ZXJDYXNlKCk7XG4gICAgcmV0dXJuIEFCSUxJVFlfRlVMTFtrZXldIHx8IGtleS50b1VwcGVyQ2FzZSgpO1xuICB9fSxcblxuXG4gIC8vIFx1MjUwMFx1MjUwMFx1MjUwMCBTcGVsbHMgXHUyNTAwXHUyNTAwXHUyNTAwXG4gIHsgY2FsbFNpZ246IFwiTEVWRUxcIiwgICAgICAgICBqc29uS2V5OiBcImxldmVsXCIgfSxcbiAgeyBjYWxsU2lnbjogXCJTQ0hPT0xcIiwgICAgICAgIGpzb25LZXk6IFwic2Nob29sXCIsICAgY29udjogcyA9PiBTQ0hPT0xfTUFQW3NdID8/IHMgfSxcbiAgeyBjYWxsU2lnbjogXCJDQVNUSU5HX1RJTUVcIiwgIGpzb25LZXk6IFwidGltZVwiLCAgICAgY29udjogZm9ybWF0VGltZSB9LFxuICB7IGNhbGxTaWduOiBcIlNQRUxMX1JBTkdFXCIsICAganNvbktleTogXCJyYW5nZVwiLCAgICBjb252OiBmb3JtYXRSYW5nZSB9LFxuICB7IGNhbGxTaWduOiBcIkRVUkFUSU9OXCIsICAgICAganNvbktleTogXCJkdXJhdGlvblwiLCBjb252OiBmb3JtYXREdXJhdGlvbiB9LFxuICB7IGNhbGxTaWduOiBcIlZFUkJBTFwiLCAgICAgICAganNvbktleTogXCJjb21wb25lbnRzXCIsIGNvbnY6IChjOmFueSkgPT4gISFjLnYgfSxcbiAgeyBjYWxsU2lnbjogXCJTT01BVElDXCIsICAgICAgIGpzb25LZXk6IFwiY29tcG9uZW50c1wiLCBjb252OiAoYzphbnkpID0+ICEhYy5zIH0sXG4gIHsgY2FsbFNpZ246IFwiTUFURVJJQUxcIiwgICAgICBqc29uS2V5OiBcImNvbXBvbmVudHNcIiwgY29udjogKGM6YW55KSA9PiAhIWMubSB9LFxuICB7IGNhbGxTaWduOiBcIkNPTVBPTkVOVFNcIixcbiAgICBqc29uS2V5OiAgXCJjb21wb25lbnRzXCIsXG4gICAgY29udjogKGM6IGFueSk6IHN0cmluZ1tdID0+IHtcbiAgICAgIGlmICghYy5tKSByZXR1cm4gW107XG5cbiAgICAgIGNvbnN0IHJhdyA9IEFycmF5LmlzQXJyYXkoYy5tKSA/IGMubSA6IFtjLm1dO1xuXG4gICAgICByZXR1cm4gcmF3XG4gICAgICAgIC5tYXAoKGl0ZW06IGFueSk6IHN0cmluZyB8IG51bGwgPT4ge1xuICAgICAgICAgIGlmICh0eXBlb2YgaXRlbSA9PT0gXCJzdHJpbmdcIikgcmV0dXJuIGl0ZW07XG4gICAgICAgICAgaWYgKGl0ZW0gJiYgdHlwZW9mIGl0ZW0gPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIGl0ZW0udGV4dCA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgcmV0dXJuIGl0ZW0udGV4dDtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH0pXG4gICAgICAgIC5maWx0ZXIoKGNvbXA6IHN0cmluZyB8IG51bGwpOiBjb21wIGlzIHN0cmluZyA9PiBjb21wICE9PSBudWxsKTtcbiAgICB9XG4gIH0sIFxuICB7IGNhbGxTaWduOiBcIkFUVEFDS19UWVBFXCIsICAganNvbktleTogXCJhdHRhY2tUeXBlXCIgfSxcbiAgeyBjYWxsU2lnbjogXCJEQU1BR0VfVFlQRVwiLCAgIGpzb25LZXk6IFwiZGFtYWdlSW5mbGljdFwiLCBjb252OiBkID0+IEFycmF5LmlzQXJyYXkoZCkgPyBkWzBdIDogZCB9LFxuICB7IGNhbGxTaWduOiBcIlJJVFVBTFwiLCAgICAgICAganNvbktleTogXCJyaXR1YWxcIiB9LFxuICB7IGNhbGxTaWduOiBcIkNPTkNFTlRSQVRJT05cIiwganNvbktleTogXCJkdXJhdGlvblwiLCBjb252OiBkcyA9PiBBcnJheS5pc0FycmF5KGRzKSAmJiBkcy5zb21lKCh4OmFueSk9PiB4LmNvbmNlbnRyYXRpb24pIH0sXG4gIHsgY2FsbFNpZ246IFwiU0FWRVwiLCAgICAgICAgICBqc29uS2V5OiBcInNhdmVBdHRyXCIgfSxcblxuICAvLyBcdTI1MDBcdTI1MDBcdTI1MDAgU3BlY2llcyAvIENyZWF0dXJlcyBcdTI1MDBcdTI1MDBcdTI1MDBcbiAgeyBjYWxsU2lnbjogXCJTUEVDSUVTXCIsIGpzb25LZXk6IFwibmFtZVwiIH0sXG4gIHsgY2FsbFNpZ246IFwiU0laRVwiLCBqc29uS2V5OiBcInNpemVcIiwgY29udjogKHJhdzogYW55KSA9PiB7XG4gICAgICAvLyBoYW5kbGUgW1wiU1wiLFwiTVwiXSBvciBqdXN0IFwiTFwiXG4gICAgICBpZiAoQXJyYXkuaXNBcnJheShyYXcpKSB7XG4gICAgICAgIHJldHVybiByYXcubWFwKHIgPT4gU0laRV9NQVBbcl0gfHwgcik7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gU0laRV9NQVBbcmF3XSB8fCByYXc7XG4gICAgICB9XG4gICAgfVxuICB9LFxuICAgIHtcbiAgY2FsbFNpZ246IFwiU1BFRURcIixcbiAganNvbktleTogICBcInNwZWVkXCIsXG4gIGNvbnY6IChzcDogbnVtYmVyIHwgUmVjb3JkPHN0cmluZywgYW55PikgPT4ge1xuICAgIC8vIGhhbmRsZSBib3RoIG51bWVyaWMgc3BlZWRzIGFuZCBvYmplY3Qgc3BlZWRzXG4gICAgaWYgKHR5cGVvZiBzcCA9PT0gXCJudW1iZXJcIikge1xuICAgICAgcmV0dXJuIFtgV2FsayAke3NwfSBmdC5gXTtcbiAgICB9XG4gICAgaWYgKCFzcCB8fCB0eXBlb2Ygc3AgIT09IFwib2JqZWN0XCIpIHJldHVybiBbXTtcbiAgICByZXR1cm4gT2JqZWN0LmVudHJpZXMoc3ApXG4gICAgICAuZmlsdGVyKChbbW9kZV0pID0+IG1vZGUgIT09IFwiY2FuSG92ZXJcIilcbiAgICAgIC5tYXAoKFttb2RlLCB2XSkgPT4ge1xuICAgICAgICBjb25zdCBuID0gdHlwZW9mIHYgPT09IFwib2JqZWN0XCIgJiYgdiAhPT0gbnVsbCAmJiBcIm51bWJlclwiIGluIHYgPyAodiBhcyBhbnkpLm51bWJlciA6IHY7XG4gICAgICAgIGNvbnN0IGxhYmVsID0gbW9kZSA9PT0gXCJ3YWxrXCIgPyBcIldhbGtcIiA6IGNhcChtb2RlKTtcbiAgICAgICAgcmV0dXJuIGAke2xhYmVsfSAke259IGZ0LmA7XG4gICAgICB9KTtcbiAgfSxcbn0sXG57IGNhbGxTaWduOiBcIkxBTkdVQUdFU1wiLCBqc29uS2V5OiBbXCJsYW5ndWFnZXNcIiwgXCJsYW5ndWFnZVByb2ZpY2llbmNpZXNcIl0sIGNvbnY6IGFyciA9PiB7XG4gICAgICBpZiAoIUFycmF5LmlzQXJyYXkoYXJyKSkgcmV0dXJuIFtdO1xuICAgICAgY29uc3Qgb3V0OiBzdHJpbmdbXSA9IFtdO1xuICAgICAgZm9yIChjb25zdCBscCBvZiBhcnIpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBscCA9PT0gXCJzdHJpbmdcIikgb3V0LnB1c2goY2FwKGxwKSk7XG4gICAgICAgIGVsc2UgaWYgKHR5cGVvZiBscCA9PT0gXCJvYmplY3RcIikge1xuICAgICAgICAgIGZvciAoY29uc3QgW2xhbmcsIHZhbF0gb2YgT2JqZWN0LmVudHJpZXMobHApKSB7XG4gICAgICAgICAgICBpZiAodmFsKSBvdXQucHVzaChjYXAobGFuZykpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIFsuLi5uZXcgU2V0KG91dCldO1xuICB9fSxcbiAgeyBjYWxsU2lnbjogXCJTRU5TRVNcIiwganNvbktleTogXCJzZW5zZXNcIiwgY29udjogc2VuID0+IHtcbiAgICAgIGlmIChBcnJheS5pc0FycmF5KHNlbikpIHJldHVybiBzZW4ubWFwKChzOnN0cmluZyk9PnMucmVwbGFjZSgvXlxcZCtcXHMqLyxcIlwiKS5yZXBsYWNlKC9eLi8sYz0+Yy50b1VwcGVyQ2FzZSgpKSk7XG4gICAgICBpZiAoc2VuICYmIHR5cGVvZiBzZW49PT1cIm9iamVjdFwiKSByZXR1cm4gT2JqZWN0LmVudHJpZXMoc2VuKS5tYXAoKFtrLHZdKT0+YCR7ay5jaGFyQXQoMCkudG9VcHBlckNhc2UoKStrLnNsaWNlKDEpfSAke3Z9YCk7XG4gICAgICByZXR1cm4gW107XG4gIH19LCBcbntcbiAgY2FsbFNpZ246IFwiVFJBSVRTXCIsXG4gIGpzb25LZXk6IFtcImNsYXNzRmVhdHVyZXNcIiwgXCJlbnRyaWVzXCJdLFxuICBjb252OiAocmF3OiBhbnksIGFsbEpzb246IGFueSk6IHN0cmluZ1tdID0+IHtcbiAgICAvLyBEaXNwbGF5L2ZpbGUgbmFtZSB0byB0YXJnZXQgZm9yIHRoZSBmaWxlLWFuY2hvclxuICAgIGNvbnN0IHJlYyA9XG4gICAgICBBcnJheS5pc0FycmF5KGFsbEpzb24uY2xhc3MpID8gYWxsSnNvbi5jbGFzc1swXSA6XG4gICAgICBBcnJheS5pc0FycmF5KGFsbEpzb24ucmFjZSkgID8gYWxsSnNvbi5yYWNlWzBdICA6XG4gICAgICBhbGxKc29uO1xuICAgIGNvbnN0IGZpbGVOYW1lID0gdHlwZW9mIHJlYz8ubmFtZSA9PT0gXCJzdHJpbmdcIlxuICAgICAgPyByZWMubmFtZVxuICAgICAgOiAodHlwZW9mIGFsbEpzb24/Lm5hbWUgPT09IFwic3RyaW5nXCIgPyBhbGxKc29uLm5hbWUgOiBcIlwiKTtcblxuICAgIC8vIE5hbWVzIHRvIG9taXQgYWNyb3NzIHR5cGVzXG4gICAgY29uc3Qgb21pdCA9IG5ldyBTZXQoW1xuICAgICAgLy8gY2xhc3Mtc3BlY2lmaWNcbiAgICAgIFwiQWJpbGl0eSBTY29yZSBJbXByb3ZlbWVudFwiLFxuICAgICAgXCJBcmNoZXR5cGUgRmVhdHVyZVwiLFxuICAgICAgXCJTdWJjbGFzcyBGZWF0dXJlXCIsXG4gICAgICAvLyBzcGVjaWVzLXNwZWNpZmljIGNvbW1vbiBoZWFkaW5nc1xuICAgICAgXCJBZ2VcIixcbiAgICAgIFwiU2l6ZVwiLFxuICAgICAgXCJTcGVlZFwiLFxuICAgICAgXCJMYW5ndWFnZXNcIixcbiAgICAgIC8vIGJhY2tncm91bmRzIG9mdGVuIGhhdmUgZ2VuZXJpYyBzZWN0aW9ucyB0b287IGFkZCBtb3JlIGlmIG5lZWRlZFxuICAgIF0pO1xuXG4gICAgY29uc3Qgc2VlbiA9IG5ldyBTZXQ8c3RyaW5nPigpO1xuXG4gICAgLy8gXHUyNTAwXHUyNTAwIDEpIENsYXNzZXM6IHVzZSBjbGFzc0ZlYXR1cmVzIGlmIGF2YWlsYWJsZSAoZXhpc3RpbmcgYmVoYXZpb3IpXG4gICAgaWYgKEFycmF5LmlzQXJyYXkoYWxsSnNvbi5jbGFzc0ZlYXR1cmVzKSkge1xuICAgICAgY29uc3QgY2xhc3NSZWMgPSBBcnJheS5pc0FycmF5KGFsbEpzb24uY2xhc3MpID8gYWxsSnNvbi5jbGFzc1swXSA6IGFsbEpzb247XG4gICAgICBjb25zdCBjbGFzc05hbWUgPSB0eXBlb2YgY2xhc3NSZWM/Lm5hbWUgPT09IFwic3RyaW5nXCIgPyBjbGFzc1JlYy5uYW1lIDogZmlsZU5hbWU7XG5cbiAgICAgIHJldHVybiBhbGxKc29uLmNsYXNzRmVhdHVyZXMuZmxhdE1hcCgoZmVhdDogYW55KSA9PiB7XG4gICAgICAgIGlmIChmZWF0ICYmIHR5cGVvZiBmZWF0ID09PSBcIm9iamVjdFwiICYmIGZlYXQuZ2FpblN1YmNsYXNzRmVhdHVyZSkgcmV0dXJuIFtdO1xuXG4gICAgICAgIGNvbnN0IHJhd05hbWUgPVxuICAgICAgICAgIHR5cGVvZiBmZWF0ID09PSBcInN0cmluZ1wiICAgICAgICAgICAgICA/IGZlYXQgOlxuICAgICAgICAgIHR5cGVvZiBmZWF0LmNsYXNzRmVhdHVyZSA9PT0gXCJzdHJpbmdcIiA/IGZlYXQuY2xhc3NGZWF0dXJlIDpcbiAgICAgICAgICBcIlwiO1xuXG4gICAgICAgIGNvbnN0IG5hbWUgPSByYXdOYW1lLnNwbGl0KFwifFwiKVswXS50cmltKCk7XG4gICAgICAgIGlmICghbmFtZSB8fCBvbWl0LmhhcyhuYW1lKSB8fCBzZWVuLmhhcyhuYW1lKSkgcmV0dXJuIFtdO1xuICAgICAgICBzZWVuLmFkZChuYW1lKTtcblxuICAgICAgICBjb25zdCBhbmNob3IgPSBuYW1lXG4gICAgICAgICAgLnJlcGxhY2UoL1teXFx3XFxzXS9nLCBcIlwiKVxuICAgICAgICAgIC5yZXBsYWNlKC9cXHMrL2csIFwiIFwiKVxuICAgICAgICAgIC50cmltKClcbiAgICAgICAgICAucmVwbGFjZSgvXFxiXFx3L2csIChjOiBhbnkpID0+IGMudG9VcHBlckNhc2UoKSk7XG5cbiAgICAgICAgcmV0dXJuIGNsYXNzTmFtZSA/IFtgW1ske2NsYXNzTmFtZX0jJHthbmNob3J9fCR7bmFtZX1dXWBdIDogW25hbWVdO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gXHUyNTAwXHUyNTAwIDIpIEJhY2tncm91bmRzIC8gU3BlY2llcyAvIFN1Yi1zcGVjaWVzOiBtaW5lIG5hbWVzIGZyb20gZW50cmllc1tdXG4gICAgY29uc3QgZW50cyA9IEFycmF5LmlzQXJyYXkocmF3KSA/IHJhdyA6IFtdO1xuICAgIGNvbnN0IG5hbWVzOiBzdHJpbmdbXSA9IFtdO1xuXG4gICAgY29uc3QgcHVzaE5hbWUgPSAobjogc3RyaW5nIHwgdW5kZWZpbmVkKSA9PiB7XG4gICAgICBjb25zdCBuYW1lID0gKG4gPz8gXCJcIikucmVwbGFjZSgvXkZlYXR1cmU6XFxzKi8sIFwiXCIpLnRyaW0oKTtcbiAgICAgIGlmICghbmFtZSB8fCBvbWl0LmhhcyhuYW1lKSB8fCBzZWVuLmhhcyhuYW1lKSkgcmV0dXJuO1xuICAgICAgc2Vlbi5hZGQobmFtZSk7XG4gICAgICBuYW1lcy5wdXNoKG5hbWUpO1xuICAgIH07XG5cbiAgICBmb3IgKGNvbnN0IGUgb2YgZW50cykge1xuICAgICAgaWYgKCFlKSBjb250aW51ZTtcbiAgICAgIGlmICh0eXBlb2YgZSA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgZS5uYW1lID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgIHB1c2hOYW1lKGUubmFtZSk7XG4gICAgICB9XG4gICAgICAvLyBuZXN0ZWQgZW50cmllcyBibG9ja3MgY2FuIGFsc28gY2FycnkgbmFtZWQgc2VjdGlvbnNcbiAgICAgIGlmICh0eXBlb2YgZSA9PT0gXCJvYmplY3RcIiAmJiBBcnJheS5pc0FycmF5KGUuZW50cmllcykpIHtcbiAgICAgICAgZm9yIChjb25zdCBzdWIgb2YgZS5lbnRyaWVzKSB7XG4gICAgICAgICAgaWYgKHN1YiAmJiB0eXBlb2Ygc3ViID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiBzdWIubmFtZSA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgcHVzaE5hbWUoc3ViLm5hbWUpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIC8vIElmIHdlIGZvdW5kIG5hbWVzLCBsaW5rIHRoZW0gdG8gdGhlIGN1cnJlbnQgZmlsZVx1MjAxOXMgaGVhZGVyc1xuICAgIGlmIChuYW1lcy5sZW5ndGgpIHtcbiAgICAgIHJldHVybiBuYW1lcy5tYXAobmFtZSA9PiB7XG4gICAgICAgIGNvbnN0IGFuY2hvciA9IG5hbWVcbiAgICAgICAgICAucmVwbGFjZSgvW15cXHdcXHNdL2csIFwiXCIpXG4gICAgICAgICAgLnJlcGxhY2UoL1xccysvZywgXCIgXCIpXG4gICAgICAgICAgLnRyaW0oKVxuICAgICAgICAgIC5yZXBsYWNlKC9cXGJcXHcvZywgKGM6IGFueSkgPT4gYy50b1VwcGVyQ2FzZSgpKTtcbiAgICAgICAgcmV0dXJuIGZpbGVOYW1lID8gYFtbJHtmaWxlTmFtZX0jJHthbmNob3J9fCR7bmFtZX1dXWAgOiBuYW1lO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gXHUyNTAwXHUyNTAwIDMpIEZhbGxiYWNrOiBwcmVzZXJ2ZSBwcmV2aW91cyBub24tbGluayBiZWhhdmlvciB3aGVuIG5vdGhpbmcgbWF0Y2hlZFxuICAgIHJldHVybiBlbnRzXG4gICAgICAuZmlsdGVyKChlOiBhbnkpID0+IGUgJiYgdHlwZW9mIGUubmFtZSA9PT0gXCJzdHJpbmdcIilcbiAgICAgIC5tYXAoKGU6IGFueSkgPT4gZS5uYW1lLnJlcGxhY2UoL15GZWF0dXJlOlxccyovLCBcIlwiKS50cmltKCkpO1xuICB9LFxufSxcblxuXG4gIHsgY2FsbFNpZ246IFwiQUNcIiwganNvbktleTogXCJhY1wiLCBjb252OiBhID0+IEFycmF5LmlzQXJyYXkoYSk/YVswXS5hYzphIH0sXG4gIHsgY2FsbFNpZ246IFwiSFBcIiwganNvbktleTogXCJocFwiLCBjb252OiBocCA9PiBocD8uYXZlcmFnZSA/PyBocCB9LFxuICB7IGNhbGxTaWduOiBcIkNIQUxMRU5HRV9SQVRJTkdcIiwganNvbktleTogXCJjclwiIH0sXG4gIHsgY2FsbFNpZ246IFwiU1RSRU5HVEhcIiwgICAgIGpzb25LZXk6IFwiYWJpbGl0eVwiLCBjb252OiBhcnI9PkFycmF5LmlzQXJyYXkoYXJyKT9hcnJbMF06YXJyPy5zdHIgPz8gMCB9LFxuICB7IGNhbGxTaWduOiBcIkRFWFRFUklUWVwiLCAgICBqc29uS2V5OiBcImFiaWxpdHlcIiwgY29udjogYXJyPT5BcnJheS5pc0FycmF5KGFycik/YXJyWzFdOmFycj8uZGV4ID8/IDAgfSxcbiAgeyBjYWxsU2lnbjogXCJDT05TVElUVVRJT05cIiwganNvbktleTogXCJhYmlsaXR5XCIsIGNvbnY6IGFycj0+QXJyYXkuaXNBcnJheShhcnIpP2FyclsyXTphcnI/LmNvbiA/PyAwIH0sXG4gIHsgY2FsbFNpZ246IFwiSU5URUxMSUdFTkNFXCIsIGpzb25LZXk6IFwiYWJpbGl0eVwiLCBjb252OiBhcnI9PkFycmF5LmlzQXJyYXkoYXJyKT9hcnJbM106YXJyPy5pbnQgPz8gMCB9LFxuICB7IGNhbGxTaWduOiBcIldJU0RPTVwiLCAgICAgICBqc29uS2V5OiBcImFiaWxpdHlcIiwgY29udjogYXJyPT5BcnJheS5pc0FycmF5KGFycik/YXJyWzRdOmFycj8ud2lzID8/IDAgfSxcbiAgeyBjYWxsU2lnbjogXCJDSEFSSVNNQVwiLCAgICAganNvbktleTogXCJhYmlsaXR5XCIsIGNvbnY6IGFycj0+QXJyYXkuaXNBcnJheShhcnIpP2Fycls1XTphcnI/LmNoYSA/PyAwIH0sXG4gIHtcbiAgICBjYWxsU2lnbjogXCJBTElHTk1FTlRcIixcbiAgICBqc29uS2V5OiBcImFsaWdubWVudFwiLFxuICAgIGNvbnY6IChhOiBhbnkpID0+IHtcbiAgICAgIGNvbnN0IHJhdyA9IEFycmF5LmlzQXJyYXkoYSkgPyBhLmpvaW4oXCIgXCIpIDogdHlwZW9mIGEgPT09IFwic3RyaW5nXCIgPyBhIDogU3RyaW5nKGEpO1xuICAgICAgY29uc3QgY2xlYW5lZCA9IHJhd1xuICAgICAgICAucmVwbGFjZSgvXFxiQVxcYi9nLCBcIkFueVwiKVxuICAgICAgICAucmVwbGFjZSgvXFxiVVxcYi9nLCBcIlVuYWxpZ25lZFwiKVxuICAgICAgICAucmVwbGFjZSgvXFxiTlxcYi9nLCBcIk5ldXRyYWxcIilcbiAgICAgICAgLnJlcGxhY2UoL1xcYkxcXGIvZywgXCJMYXdmdWxcIilcbiAgICAgICAgLnJlcGxhY2UoL1xcYkNcXGIvZywgXCJDaGFvdGljXCIpXG4gICAgICAgIC5yZXBsYWNlKC9cXGJHXFxiL2csIFwiR29vZFwiKVxuICAgICAgICAucmVwbGFjZSgvXFxiRVxcYi9nLCBcIkV2aWxcIik7XG5cbiAgICAgIHJldHVybiBmb3JtYXRBbGlnbm1lbnRBYmJyZXYoY2xlYW5lZCk7IC8vIHJldXNlIHlvdXIgbm9ybWFsaXplciBpZiBpdCBleGlzdHNcbiAgICB9XG4gIH0sXG4gICAge1xuICAgICAgY2FsbFNpZ246IFwiVFlQRVwiLFxuICAgICAganNvbktleTogXCJ0eXBlXCIsXG4gICAgICBjb252OiAodDogYW55KTogc3RyaW5nIHwgdW5kZWZpbmVkID0+IHtcbiAgICAgICAgLy8gMSkgSWYgaXRcdTIwMTlzIGEgc2ltcGxlIHN0cmluZyBjb2RlLCBtYXAgaXRcbiAgICAgICAgaWYgKHR5cGVvZiB0ID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgLy8gZGlyZWN0IGxvb2t1cFx1MjAxNGlmIG5vIG1hcHBpbmcsIGp1c3QgdGl0bGVcdTIwMTBjYXNlIHRoZSBjb2RlXG4gICAgICAgICAgcmV0dXJuIElURU1fVFlQRV9NQVBbdF0gPz8gY2FwKHQpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gMikgSWYgaXRcdTIwMTlzIGFuIG9iamVjdCB3aXRoIGEgLnR5cGUgdGFnXG4gICAgICAgIGlmICh0ICYmIHR5cGVvZiB0ID09PSBcIm9iamVjdFwiKSB7XG4gICAgICAgICAgY29uc3QgY29kZSA9IFN0cmluZyh0LnR5cGUgfHwgXCJcIikudG9VcHBlckNhc2UoKTtcbiAgICAgICAgICAvLyB0cnkgdGhlIG1hcCBmaXJzdFxuICAgICAgICAgIGlmIChJVEVNX1RZUEVfTUFQW2NvZGVdKSB7XG4gICAgICAgICAgICByZXR1cm4gSVRFTV9UWVBFX01BUFtjb2RlXTtcbiAgICAgICAgICB9XG4gICAgICAgICAgLy8gb3RoZXJ3aXNlIGZhbGwgYmFjayB0byBcdTIwMUNCYXNlICh0YWdzXHUyMDI2KVx1MjAxRCBzdHlsZVxuICAgICAgICAgIGNvbnN0IGJhc2UgPSB0LnR5cGUgPyBjYXAodC50eXBlKSA6IFwiVW5rbm93blwiO1xuICAgICAgICAgIGNvbnN0IHRhZ3MgPSBBcnJheS5pc0FycmF5KHQudGFncykgPyB0LnRhZ3MubWFwKGNhcCkgOiBbXTtcbiAgICAgICAgICByZXR1cm4gdGFncy5sZW5ndGggPyBgJHtiYXNlfSAoJHt0YWdzLmpvaW4oXCIsIFwiKX0pYCA6IGJhc2U7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgfVxuICAgIH0sXG5cblxuICAvLyBcdTI1MDBcdTI1MDBcdTI1MDAgSXRlbXMgXHUyNTAwXHUyNTAwXHUyNTAwXG4gIHsgY2FsbFNpZ246IFwiVFlQRVwiLCAgIGpzb25LZXk6IFwiX3BhcnNlZFR5cGVcIiB9LFxuICB7IGNhbGxTaWduOiBcIlJBUklUWVwiLCBqc29uS2V5OiBcInJhcml0eVwiLCBjb252OiByID0+IHtcbiAgICAgIGNvbnN0IHMgPSBTdHJpbmcocnx8XCJcIikudG9Mb3dlckNhc2UoKTtcbiAgICAgIHJldHVybiBzICYmIHMhPT1cIm5vbmVcIiA/IHNbMF0udG9VcHBlckNhc2UoKStzLnNsaWNlKDEpIDogdW5kZWZpbmVkO1xuICB9fSxcbiAge1xuICAgIGNhbGxTaWduOiBcIkNPU1RcIixcbiAgICBqc29uS2V5OiBcInZhbHVlXCIsXG4gICAgY29udjogKHJhdzogYW55KSA9PiB7XG4gICAgICBjb25zdCBzID0gU3RyaW5nKHJhdykudHJpbSgpLnRvTG93ZXJDYXNlKCk7XG4gICAgICBsZXQgbnVtOiBudW1iZXI7XG5cbiAgICAgIC8vIGV4cGxpY2l0IGNvcHBlcj9cbiAgICAgIGlmIChzLmVuZHNXaXRoKFwiY3BcIikpIHtcbiAgICAgICAgbnVtID0gcGFyc2VGbG9hdChzKTtcbiAgICAgICAgLy8gY29udmVydCB0byBncCBvbmx5IGlmIDEwMCsgY3BcbiAgICAgICAgcmV0dXJuIG51bSA+PSAxMDBcbiAgICAgICAgICA/IGAke01hdGgucm91bmQoKG51bS8xMDApICogMTAwKS8xMDB9Z3BgXG4gICAgICAgICAgOiBgJHtudW19Y3BgO1xuICAgICAgfVxuXG4gICAgICAvLyBleHBsaWNpdCBzaWx2ZXI/XG4gICAgICBpZiAocy5lbmRzV2l0aChcInNwXCIpKSB7XG4gICAgICAgIG51bSA9IHBhcnNlRmxvYXQocyk7XG4gICAgICAgIC8vIGNvbnZlcnQgdG8gZ3Agb25seSBpZiAxMCsgc3BcbiAgICAgICAgcmV0dXJuIG51bSA+PSAxMFxuICAgICAgICAgID8gYCR7TWF0aC5yb3VuZCgobnVtLzEwKSAqIDEwMCkvMTAwfWdwYFxuICAgICAgICAgIDogYCR7bnVtfXNwYDtcbiAgICAgIH1cblxuICAgICAgLy8gZXhwbGljaXQgZ29sZD9cbiAgICAgIGlmIChzLmVuZHNXaXRoKFwiZ3BcIikpIHtcbiAgICAgICAgbnVtID0gcGFyc2VGbG9hdChzKTtcbiAgICAgICAgcmV0dXJuIGAke01hdGgucm91bmQobnVtICogMTAwKS8xMDB9Z3BgO1xuICAgICAgfVxuXG4gICAgICAvLyBiYXJlIG51bWJlciBcdTIxOTIgYXNzdW1lIGNvcHBlclxuICAgICAgbnVtID0gcGFyc2VGbG9hdChzKSB8fCAwO1xuICAgICAgcmV0dXJuIG51bSA+PSAxMDBcbiAgICAgICAgPyBgJHtNYXRoLnJvdW5kKChudW0vMTAwKSAqIDEwMCkvMTAwfWdwYFxuICAgICAgICA6IGAke251bX1jcGA7XG4gICAgfVxuICB9LFxuICB7IGNhbGxTaWduOiBcIldFSUdIVFwiLCBqc29uS2V5OiBcIndlaWdodFwiIH0sXG4gIHsgY2FsbFNpZ246IFwiTUFHSUNBTFwiLCBqc29uS2V5OiBcIndvbmRyb3VzXCIsIGNvbnY6IChfdyxhbGwpID0+ICEhYWxsLndvbmRyb3VzIHx8ICEhYWxsLnJlcUF0dHVuZSB9LFxuICB7IGNhbGxTaWduOiBcIlZBUklBTlRcIiwganNvbktleTogXCJib251c1dlYXBvblwiLCBjb252OiBiID0+IHR5cGVvZiBiPT09XCJzdHJpbmdcIiAmJiBiLnN0YXJ0c1dpdGgoXCIrXCIpIH0sXG4gIHsgY2FsbFNpZ246IFwiUFJPUEVSVElFU1wiLCBqc29uS2V5OiBcInByb3BlcnR5XCIsIGNvbnY6IGFyciA9PiBBcnJheS5pc0FycmF5KGFycikgPyBhcnIubWFwKHAgPT4gUFJPUEVSVFlfTUFQW3BdIHx8IHApIDogW10gfSxcbiAgeyBjYWxsU2lnbjogXCJEQU1BR0VcIiwganNvbktleTogXCJkbWcxXCIsIGNvbnY6IChkLGFsbCkgPT4gZCA/IGFsbC5kbWcyID8gYCR7ZH0gLyAke2FsbC5kbWcyfWAgOiBgJHtkfWAgOiB1bmRlZmluZWQgfSxcbiAgeyBjYWxsU2lnbjogXCJEQU1BR0VfVFlQRVNcIiwganNvbktleTogXCJkbWdUeXBlXCIsIGNvbnY6IGR0ID0+IGR0ID09IG51bGwgPyBbXSA6IEFycmF5LmlzQXJyYXkoZHQpID8gZHQgOiBbZHRdIH0sXG4gIHsgY2FsbFNpZ246IFwiUkFOR0VcIiwganNvbktleTogXCJyYW5nZVwiIH0sXG4gIHsgY2FsbFNpZ246IFwiUkVMT0FEXCIsIGpzb25LZXk6IFwicmVsb2FkXCIgfSxcbiAgeyBjYWxsU2lnbjogXCJBTU1PX1RZUEVcIiwganNvbktleTogXCJhbW1vVHlwZVwiLCBjb252OiAodjogYW55KSA9PiB0eXBlb2YgdiA9PT0gXCJzdHJpbmdcIiA/IHYuc3BsaXQoXCJ8XCIpWzBdLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgdi5zcGxpdChcInxcIilbMF0uc2xpY2UoMSkudG9Mb3dlckNhc2UoKSA6IFwiXCIgfSxcbiAgeyBjYWxsU2lnbjogXCJTVEVBTFRIX0RJU0FEVkFOVEFHRVwiLCBqc29uS2V5OiBcInN0ZWFsdGhcIiB9LFxuICB7XG4gICAgY2FsbFNpZ246IFwiQVRUVU5FTUVOVFwiLFxuICAgIGpzb25LZXk6IFtcIndvbmRyb3VzXCIsIFwicmVxQXR0dW5lXCIsIFwicmVxX2F0dHVuZVwiLCBcInJlcUF0dHVuZVRhZ3NcIl0sXG4gICAgY29udjogKF9yYXcsIGFsbEpzb24pID0+IHtcbiAgICAgIGNvbnN0IGogPSBhbGxKc29uIGFzIGFueTtcbiAgICAgIGNvbnN0IGhhc1RleHQgPSB0eXBlb2Ygai5yZXFBdHR1bmUgPT09IFwic3RyaW5nXCIgJiYgai5yZXFBdHR1bmUudHJpbSgpICE9PSBcIlwiO1xuICAgICAgY29uc3QgaGFzVGFncyA9IEFycmF5LmlzQXJyYXkoai5yZXFBdHR1bmVUYWdzKSAmJiBqLnJlcUF0dHVuZVRhZ3MubGVuZ3RoID4gMDtcbiAgICAgIHJldHVybiBoYXNUZXh0IHx8IGhhc1RhZ3M7XG4gICAgfVxuICB9LFxuICAgIHtcbiAgICBjYWxsU2lnbjogXCJBVFRVTkVfUkVRXCIsXG4gICAganNvbktleTogXCJyZXFBdHR1bmVUYWdzXCIsXG4gICAgY29udjogKHRhZ3M6IGFueVtdID0gW10sIF9hbGwpID0+IHtcbiAgICAgIGNvbnN0IG1hcExldHRlcjogUmVjb3JkPHN0cmluZyxzdHJpbmc+ID0ge1xuICAgICAgICBBOiBcIkFueVwiLCBVOiBcIlVuYWxpZ25lZFwiLCBOOiBcIk5ldXRyYWxcIixcbiAgICAgICAgTDogXCJMYXdmdWxcIiwgQzogXCJDaGFvdGljXCIsIEc6IFwiR29vZFwiLCBFOiBcIkV2aWxcIlxuICAgICAgfTtcbiAgICAgIGNvbnN0IHJlcXM6IHN0cmluZ1tdID0gW107XG5cbiAgICAgIGZvciAoY29uc3QgdGFnIG9mIHRhZ3MpIHtcbiAgICAgICAgaWYgKHRhZy5jbGFzcyAmJiBBcnJheS5pc0FycmF5KHRhZy5hbGlnbm1lbnQpKSB7XG4gICAgICAgICAgY29uc3QgY2xzID0gY2FwKHRhZy5jbGFzcyk7XG4gICAgICAgICAgZm9yIChjb25zdCBjb2RlIG9mIHRhZy5hbGlnbm1lbnQpIHtcbiAgICAgICAgICAgIHJlcXMucHVzaChgJHttYXBMZXR0ZXJbY29kZV0gfHwgY29kZX0gJHtjbHN9YCk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKHRhZy5jbGFzcykge1xuICAgICAgICAgIHJlcXMucHVzaChjYXAodGFnLmNsYXNzKSk7XG4gICAgICAgIH0gZWxzZSBpZiAoQXJyYXkuaXNBcnJheSh0YWcuYWxpZ25tZW50KSkge1xuICAgICAgICAgIGZvciAoY29uc3QgY29kZSBvZiB0YWcuYWxpZ25tZW50KSB7XG4gICAgICAgICAgICByZXFzLnB1c2gobWFwTGV0dGVyW2NvZGVdIHx8IGNvZGUpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmICh0YWcuYmFja2dyb3VuZCkge1xuICAgICAgICAgIGNvbnN0IFtiZ10gPSBTdHJpbmcodGFnLmJhY2tncm91bmQpLnNwbGl0KFwifFwiKTtcbiAgICAgICAgICByZXFzLnB1c2goYmcuc3BsaXQoXCIgXCIpLm1hcChjYXApLmpvaW4oXCIgXCIpKTtcbiAgICAgICAgfSBlbHNlIGlmICh0YWcuc3BlbGxjYXN0aW5nKSB7XG4gICAgICAgICAgcmVxcy5wdXNoKFwiU3BlbGxjYXN0ZXJcIik7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgcmV0dXJuIEFycmF5LmZyb20obmV3IFNldChyZXFzKSk7XG4gICAgfVxuICB9LFxuICAgIHtcbiAgICBjYWxsU2lnbjogXCJWRVJNVU5cIixcbiAgICBqc29uS2V5OiBcIndvbmRyb3VzXCIsICAgICAgICAgICAgLy8gb3Igd2hhdGV2ZXIgcHJvcGVydHkgeW91IHVzZSB0byBkZXRlY3QgXHUyMDFDbWFnaWNhbFx1MjAxRFxuICAgIGNvbnY6IChfcmF3LCBhbGwpID0+ICEhYWxsLndvbmRyb3VzIHx8ICEhYWxsLnJlcUF0dHVuZVxuICB9LFxuICAvLyBcdTI1MDBcdTI1MDBcdTI1MDAgT3RoZXIgXHUyNTAwXHUyNTAwXHUyNTAwXG4gIHsgY2FsbFNpZ246IFwiREFNQUdFX1JFU1wiLCBqc29uS2V5OiBcInJlc2lzdFwiLCBjb252OiB2ID0+IEFycmF5LmlzQXJyYXkodikgPyB2Lm1hcChjYXApIDogW10gfSxcbntcbiAgY2FsbFNpZ246IFwiUlVMRVNFVFwiLFxuICBqc29uS2V5OiBcIm5hbWVcIixcbiAgLy8gaWdub3JlIHRoZSByYXcgdmFsdWUsIGFsd2F5cyBwcmludCBIRUxMT1xuICBjb252OiAoX3JhdywgX2FsbCkgPT4gXCJEJkQgNWUgKDIwMjUpXCIsXG59LCBcbiAgICAvLyBcdTI1MDBcdTI1MDBcdTI1MDAgQWJpbGl0eVx1MjAxMHNjb3JlIG1vZGlmaWVycyAob25seSBlbWl0IHdoZW4gbm9uemVybykgXHUyNTAwXHUyNTAwXHUyNTAwXG4gIHtcbiAgICBjYWxsU2lnbjogXCJTVFJfTU9EXCIsXG4gICAganNvbktleTogIFwiYWJpbGl0eVwiLFxuICAgIGNvbnY6IChhcnI6IGFueSk6IG51bWJlciB8IHVuZGVmaW5lZCA9PiB7XG4gICAgICBjb25zdCB2ID0gQXJyYXkuaXNBcnJheShhcnIpID8gKGFyclswXS5zdHIgPz8gMCkgOiAoYXJyLnN0ciA/PyAwKTtcbiAgICAgIHJldHVybiB2ICE9PSAwID8gdiA6IHVuZGVmaW5lZDtcbiAgICB9LFxuICB9LFxuICB7XG4gICAgY2FsbFNpZ246IFwiREVYX01PRFwiLFxuICAgIGpzb25LZXk6ICBcImFiaWxpdHlcIixcbiAgICBjb252OiAoYXJyOiBhbnkpOiBudW1iZXIgfCB1bmRlZmluZWQgPT4ge1xuICAgICAgY29uc3QgdiA9IEFycmF5LmlzQXJyYXkoYXJyKSA/IChhcnJbMF0uZGV4ID8/IDApIDogKGFyci5kZXggPz8gMCk7XG4gICAgICByZXR1cm4gdiAhPT0gMCA/IHYgOiB1bmRlZmluZWQ7XG4gICAgfSxcbiAgfSxcbiAge1xuICAgIGNhbGxTaWduOiBcIkNPTl9NT0RcIixcbiAgICBqc29uS2V5OiAgXCJhYmlsaXR5XCIsXG4gICAgY29udjogKGFycjogYW55KTogbnVtYmVyIHwgdW5kZWZpbmVkID0+IHtcbiAgICAgIGNvbnN0IHYgPSBBcnJheS5pc0FycmF5KGFycikgPyAoYXJyWzBdLmNvbiA/PyAwKSA6IChhcnIuY29uID8/IDApO1xuICAgICAgcmV0dXJuIHYgIT09IDAgPyB2IDogdW5kZWZpbmVkO1xuICAgIH0sXG4gIH0sXG4gIHtcbiAgICBjYWxsU2lnbjogXCJJTlRfTU9EXCIsXG4gICAganNvbktleTogIFwiYWJpbGl0eVwiLFxuICAgIGNvbnY6IChhcnI6IGFueSk6IG51bWJlciB8IHVuZGVmaW5lZCA9PiB7XG4gICAgICBjb25zdCB2ID0gQXJyYXkuaXNBcnJheShhcnIpID8gKGFyclswXS5pbnQgPz8gMCkgOiAoYXJyLmludCA/PyAwKTtcbiAgICAgIHJldHVybiB2ICE9PSAwID8gdiA6IHVuZGVmaW5lZDtcbiAgICB9LFxuICB9LFxuICB7XG4gICAgY2FsbFNpZ246IFwiV0lTX01PRFwiLFxuICAgIGpzb25LZXk6ICBcImFiaWxpdHlcIixcbiAgICBjb252OiAoYXJyOiBhbnkpOiBudW1iZXIgfCB1bmRlZmluZWQgPT4ge1xuICAgICAgY29uc3QgdiA9IEFycmF5LmlzQXJyYXkoYXJyKSA/IChhcnJbMF0ud2lzID8/IDApIDogKGFyci53aXMgPz8gMCk7XG4gICAgICByZXR1cm4gdiAhPT0gMCA/IHYgOiB1bmRlZmluZWQ7XG4gICAgfSxcbiAgfSxcbiAge1xuICAgIGNhbGxTaWduOiBcIkNIQV9NT0RcIixcbiAgICBqc29uS2V5OiAgXCJhYmlsaXR5XCIsXG4gICAgY29udjogKGFycjogYW55KTogbnVtYmVyIHwgdW5kZWZpbmVkID0+IHtcbiAgICAgIGNvbnN0IHYgPSBBcnJheS5pc0FycmF5KGFycikgPyAoYXJyWzBdLmNoYSA/PyAwKSA6IChhcnIuY2hhID8/IDApO1xuICAgICAgcmV0dXJuIHYgIT09IDAgPyB2IDogdW5kZWZpbmVkO1xuICAgIH0sXG4gIH0sXG5cblxuXTtcblxuXG4vLyBcdTI1MDBcdTI1MDBcdTI1MDAgR2VuZXJpYyBidWlsZGVyIFx1MjUwMFx1MjUwMFx1MjUwMFxuZXhwb3J0IGZ1bmN0aW9uIGJ1aWxkRk0oanNvbjogYW55LCBkZWZzOiBGaWVsZERlZltdKTogRnJvbnRtYXR0ZXIge1xuICBjb25zdCBmbTogRnJvbnRtYXR0ZXIgPSB7fTtcbiAgZm9yIChjb25zdCB7IGNhbGxTaWduLCBqc29uS2V5LCBjb252IH0gb2YgZGVmcykge1xuICAgIGNvbnN0IGtleXMgPSBBcnJheS5pc0FycmF5KGpzb25LZXkpID8ganNvbktleSA6IFtqc29uS2V5XTtcbiAgICBsZXQgcmF3OiBhbnkgPSB1bmRlZmluZWQ7XG5cbiAgICBmb3IgKGNvbnN0IGtleSBvZiBrZXlzKSB7XG4gICAgICBpZiAoanNvbltrZXldICE9IG51bGwpIHtcbiAgICAgICAgcmF3ID0ganNvbltrZXldO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAocmF3ID09IG51bGwpIGNvbnRpbnVlO1xuICAgIGNvbnN0IHZhbCA9IGNvbnYgPyBjb252KHJhdywganNvbikgOiByYXc7XG4gICAgZm1bRk1fRklFTERTW2NhbGxTaWduXV0gPSB2YWw7XG4gIH1cbiAgcmV0dXJuIGZtO1xufVxuXG4vLyBmcm9udG1hdHRlci50c1xuXG5leHBvcnQgZnVuY3Rpb24gc2VyaWFsaXplRnJvbnRtYXR0ZXIoXG4gIGZtOiBGcm9udG1hdHRlcixcbiAgZGVmcz86IEZpZWxkRGVmW11cbik6IHN0cmluZyB7XG4gIGNvbnN0IGZpbHRlcmVkOiBSZWNvcmQ8c3RyaW5nLCBhbnk+ID0ge307XG5cbiAgLy8gZGV0ZWN0IGlmIHdlIGhhdmUgYW55IGFjdHVhbCBjaG9pY2UtbGlzdHNcbiAgY29uc3QgaGFzU2tpbGxDaG9pY2UgPSBBcnJheS5pc0FycmF5KGZtW0ZNX0ZJRUxEUy5TS0lMTF9DSE9JQ0VfTElTVF0pIFxuICAgICYmIChmbVtGTV9GSUVMRFMuU0tJTExfQ0hPSUNFX0xJU1RdIGFzIGFueVtdKS5sZW5ndGggPiAwO1xuICBjb25zdCBoYXNUb29sQ2hvaWNlID0gQXJyYXkuaXNBcnJheShmbVtGTV9GSUVMRFMuVE9PTF9DSE9JQ0VfTElTVF0pIFxuICAgICYmIChmbVtGTV9GSUVMRFMuVE9PTF9DSE9JQ0VfTElTVF0gYXMgYW55W10pLmxlbmd0aCA+IDA7XG5cblxuICBmb3IgKGNvbnN0IFtrLCB2XSBvZiBPYmplY3QuZW50cmllcyhmbSkpIHtcbiAgICAvLyAxKSBuZXZlciBlbWl0IHVuZGVmaW5lZFxuICAgIGlmICh2ID09PSB1bmRlZmluZWQpIGNvbnRpbnVlO1xuICAgIC8vIDIpIGRyb3AgZW1wdHkgQ09NUE9ORU5UUywgVE9PTF9DSE9JQ0VfTElTVCwgU0tJTExfQ0hPSUNFX0xJU1RcbiAgICBpZiAoayA9PT0gRk1fRklFTERTLkNPTVBPTkVOVFMgJiYgQXJyYXkuaXNBcnJheSh2KSAmJiB2Lmxlbmd0aCA9PT0gMCkgY29udGludWU7XG4gICAgaWYgKFxuICAgICAgKGsgPT09IEZNX0ZJRUxEUy5UT09MX0NIT0lDRV9MSVNUIHx8IGsgPT09IEZNX0ZJRUxEUy5TS0lMTF9DSE9JQ0VfTElTVCkgJiZcbiAgICAgIEFycmF5LmlzQXJyYXkodikgJiYgdi5sZW5ndGggPT09IDBcbiAgICApIGNvbnRpbnVlO1xuXG4gICAgZmlsdGVyZWRba10gPSB2O1xuICB9XG5cbiAgLy8gYnVpbGQgdGhlIGxpc3Qgb2Yga2V5cyBpbiB0aGUgZXhhY3Qgb3JkZXIgZnJvbSBkZWZzXG4gIGxldCBrZXlzVG9FbWl0OiBzdHJpbmdbXTtcbiAgaWYgKGRlZnMpIHtcbiAgICAvLyBtYXAgZWFjaCBGaWVsZERlZiB0byBpdHMgZnJvbnRtYXR0ZXIga2V5XG4gICAgY29uc3Qgd2FudGVkID0gZGVmcy5tYXAoZCA9PiBGTV9GSUVMRFNbZC5jYWxsU2lnbl0pO1xuICAgIC8vIG9ubHkga2VlcCB0aGUgb25lcyB3ZSBhY3R1YWxseSBoYXZlLCBpbiBvcmRlclxuICAgIGtleXNUb0VtaXQgPSB3YW50ZWQuZmlsdGVyKGsgPT4gayBpbiBmaWx0ZXJlZCk7XG4gICAgLy8gdGhlbiBhcHBlbmQgYW55IGV4dHJhIGtleXMgdGhhdCB3ZXJlbid0IGluIGRlZnNcbiAgICBrZXlzVG9FbWl0LnB1c2goXG4gICAgICAuLi5PYmplY3Qua2V5cyhmaWx0ZXJlZCkuZmlsdGVyKGsgPT4gIWtleXNUb0VtaXQuaW5jbHVkZXMoaykpXG4gICAgKTtcbiAgfSBlbHNlIHtcbiAgICBrZXlzVG9FbWl0ID0gT2JqZWN0LmtleXMoZmlsdGVyZWQpO1xuICB9XG5cbiAgLy8gbm93IGVtaXQgWUFNTCBpbiB0aGF0IG9yZGVyXG4gIHJldHVybiBrZXlzVG9FbWl0XG4gICAgLm1hcChrID0+IHtcbiAgICAgIGNvbnN0IHYgPSBmaWx0ZXJlZFtrXTtcbiAgICAgIGlmIChBcnJheS5pc0FycmF5KHYpKSB7XG4gICAgICAgIC8vIEpTT04uc3RyaW5naWZ5IHRvIGhhbmRsZSBzcGFjZXMsIGNvbW1hcywgZXRjLlxuICAgICAgICBjb25zdCBpbmxpbmUgPSB2Lm1hcChpdGVtID0+IEpTT04uc3RyaW5naWZ5KGl0ZW0pKS5qb2luKFwiLCBcIik7XG4gICAgICAgIHJldHVybiBgJHtrfTogWyR7aW5saW5lfV1gO1xuICAgICAgfVxuICAgICAgaWYgKHR5cGVvZiB2ID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgIHJldHVybiBgJHtrfTogXCIke3Z9XCJgO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGAke2t9OiAke3Z9YDtcbiAgICB9KVxuICAgIC5qb2luKFwiXFxuXCIpO1xufVxuXG5cbi8vIFx1MjUwMFx1MjUwMFx1MjUwMCBTa2lsbCBoZWxwZXJzIFx1MjUwMFx1MjUwMFx1MjUwMFxuZXhwb3J0IGNvbnN0IFNLSUxMX09QVElPTlMgPSBbXG4gIFwiQWNyb2JhdGljc1wiLFwiQW5pbWFsIEhhbmRsaW5nXCIsXCJBcmNhbmFcIixcIkF0aGxldGljc1wiLFwiRGVjZXB0aW9uXCIsXCJIaXN0b3J5XCIsXG4gIFwiSW5zaWdodFwiLFwiSW50aW1pZGF0aW9uXCIsXCJJbnZlc3RpZ2F0aW9uXCIsXCJNZWRpY2luZVwiLFwiTmF0dXJlXCIsXCJQZXJjZXB0aW9uXCIsXG4gIFwiUGVyZm9ybWFuY2VcIixcIlBlcnN1YXNpb25cIixcIlJlbGlnaW9uXCIsXCJTbGVpZ2h0IG9mIEhhbmRcIixcIlN0ZWFsdGhcIixcIlN1cnZpdmFsXCIsXG5dIGFzIGNvbnN0O1xuZXhwb3J0IHR5cGUgU2tpbGxPcHRpb24gPSB0eXBlb2YgU0tJTExfT1BUSU9OU1tudW1iZXJdO1xuZXhwb3J0IGZ1bmN0aW9uIG5vcm1hbGl6ZVNraWxsKHJhdzogc3RyaW5nKTogU2tpbGxPcHRpb24gfCBudWxsIHtcbiAgY29uc3QgbG93ZXIgPSByYXcudHJpbSgpLnRvTG93ZXJDYXNlKCk7XG4gIHJldHVybiBTS0lMTF9PUFRJT05TLmZpbmQoc2tpbGwgPT4gc2tpbGwudG9Mb3dlckNhc2UoKSA9PT0gbG93ZXIpID8/IG51bGw7XG59XG5leHBvcnQgZnVuY3Rpb24gZmlsdGVyVmFsaWRTa2lsbHMocmF3QXJyOiBhbnlbXSk6IFNraWxsT3B0aW9uW10ge1xuICBpZiAoIUFycmF5LmlzQXJyYXkocmF3QXJyKSkgcmV0dXJuIFtdO1xuICBjb25zdCBzZWVuID0gbmV3IFNldDxTa2lsbE9wdGlvbj4oKTtcbiAgZm9yIChjb25zdCBlbnQgb2YgcmF3QXJyKSB7XG4gICAgbGV0IGNhbmRpZGF0ZTogc3RyaW5nIHwgdW5kZWZpbmVkO1xuICAgIGlmICh0eXBlb2YgZW50ID09PSBcInN0cmluZ1wiKSBjYW5kaWRhdGUgPSBlbnQ7XG4gICAgZWxzZSBpZiAoZW50Lm5hbWUgJiYgdHlwZW9mIGVudC5uYW1lID09PSBcInN0cmluZ1wiKSBjYW5kaWRhdGUgPSBlbnQubmFtZTtcbiAgICBpZiAoY2FuZGlkYXRlKSB7XG4gICAgICBjb25zdCBub3JtID0gbm9ybWFsaXplU2tpbGwoY2FuZGlkYXRlKTtcbiAgICAgIGlmIChub3JtKSBzZWVuLmFkZChub3JtKTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIFsuLi5zZWVuXTtcbn1cblxuLy8gXHUyNTAwXHUyNTAwXHUyNTAwIFdoaWNoIEZNX0tFWVMgZWFjaCBwYXJzZXIgc2hvdWxkIGluY2x1ZGUgXHUyNTAwXHUyNTAwXHUyNTAwXG5leHBvcnQgY29uc3QgU1BFTExfS0VZUzogRk1LZXlbXSA9IFtcbiAgXCJOQU1FXCIsXG4gIFwiTEVWRUxcIixcbiAgXCJTQ0hPT0xcIixcbiAgXCJDQVNUSU5HX1RJTUVcIixcbiAgXCJTUEVMTF9SQU5HRVwiLFxuICBcIlNBVklOR19USFJPV1NcIixcbiAgXCJEVVJBVElPTlwiLFxuICBcIlZFUkJBTFwiLFxuICBcIlNPTUFUSUNcIixcbiAgXCJNQVRFUklBTFwiLFxuICBcIkNPTVBPTkVOVFNcIixcbiAgXCJDT05DRU5UUkFUSU9OXCIsXG4gIFwiU09VUkNFXCIsXG4gIFwiUlVMRVNFVFwiXG5dO1xuXG5leHBvcnQgY29uc3QgU1BFQ0lFU19LRVlTOiBGTUtleVtdID0gW1xuICBcIlNQRUNJRVNcIixcbiAgXCJTSVpFXCIsXG4gIFwiU1BFRURcIixcbiAgXCJMQU5HVUFHRVNcIixcbiAgXCJUUkFJVFNcIixcbiAgXCJTS0lMTFNcIixcbiAgXCJTVFJfTU9EXCIsXG4gIFwiREVYX01PRFwiLFxuICBcIkNPTl9NT0RcIixcbiAgXCJJTlRfTU9EXCIsXG4gIFwiV0lTX01PRFwiLFxuICBcIkNIQV9NT0RcIixcbiAgXCJTS0lMTF9DSE9JQ0VfTElTVFwiLFxuICBcIlRPT0xfUFJPRklDSUVOQ0lFU1wiLFxuICBcIlRPT0xfQ0hPSUNFX0xJU1RcIixcbiAgXCJXRUFQT05fUFJPRklDSUVOQ0lFU1wiLFxuICBcIlNFTlNFU1wiLFxuICBcIkRBTUFHRV9SRVNcIixcbiAgXCJTT1VSQ0VcIixcbiAgXCJSVUxFU0VUXCJcbl07XG5cbmV4cG9ydCBjb25zdCBJVEVNX0tFWVM6IEZNS2V5W10gPSBbXG4gIFwiTkFNRVwiLFxuICBcIlRZUEVcIixcbiAgXCJSQVJJVFlcIixcbiAgXCJDT1NUXCIsXG4gIFwiV0VJR0hUXCIsXG4gIFwiUFJPUEVSVElFU1wiLFxuICBcIkRBTUFHRVwiLFxuICBcIkRBTUFHRV9UWVBFU1wiLFxuICBcIlJBTkdFXCIsXG4gIFwiUkVMT0FEXCIsXG4gIFwiQU1NT19UWVBFXCIsXG4gIFwiQUNcIixcbiAgXCJTVEVBTFRIX0RJU0FEVkFOVEFHRVwiLFxuICBcIk1BR0lDQUxcIixcbiAgXCJBVFRVTkVNRU5UXCIsXG4gIFwiQVRUVU5FX1JFUVwiLFxuICBcIlZFUk1VTlwiLFxuICBcIlNPVVJDRVwiLFxuICBcIlJVTEVTRVRcIlxuXTtcblxuZXhwb3J0IGNvbnN0IEJFU1RJQVJZX0tFWVM6IEZNS2V5W10gPSBbXG4gIFwiTkFNRVwiLFxuICBcIlNJWkVcIixcbiAgXCJUWVBFXCIsXG4gIFwiQUxJR05NRU5UXCIsXG4gIFwiQUNcIixcbiAgXCJIUFwiLFxuICBcIlNQRUVEXCIsXG4gIFwiU1RSRU5HVEhcIixcbiAgXCJERVhURVJJVFlcIixcbiAgXCJDT05TVElUVVRJT05cIixcbiAgXCJJTlRFTExJR0VOQ0VcIixcbiAgXCJXSVNET01cIixcbiAgXCJDSEFSSVNNQVwiLFxuICBcIlNBVklOR19USFJPV1NcIixcbiAgXCJTS0lMTFNcIixcbiAgXCJTRU5TRVNcIixcbiAgXCJMQU5HVUFHRVNcIixcbiAgXCJDSEFMTEVOR0VfUkFUSU5HXCIsXG4gIFwiU09VUkNFXCIsXG4gIFwiUlVMRVNFVFwiXG5dO1xuXG5leHBvcnQgY29uc3QgQ0xBU1NfS0VZUzogRk1LZXlbXSA9IFtcbiAgXCJOQU1FXCIsXG4gIFwiU1BFTExfQ0FTVF9NT0RcIixcbiAgXCJBUk1PUl9QUk9GSUNJRU5DSUVTXCIsXG4gIFwiV0VBUE9OX1BST0ZJQ0lFTkNJRVNcIixcbiAgXCJUT09MX1BST0ZJQ0lFTkNJRVNcIixcbiAgXCJUT09MX0NIT0lDRV9MSVNUXCIsXG4gIFwiU0FWSU5HX1RIUk9XU1wiLFxuICBcIlNLSUxMU1wiLFxuICBcIlNLSUxMX0NIT0lDRV9MSVNUXCIsXG4gIFwiVFJBSVRTXCIsXG4gIFwiU09VUkNFXCIsXG4gIFwiUlVMRVNFVFwiXG5dO1xuXG5leHBvcnQgY29uc3QgQkFDS0dST1VORF9LRVlTOiBGTUtleVtdID0gW1xuICBcIk5BTUVcIixcbiAgXCJTS0lMTFNcIixcbiAgXCJTS0lMTF9DSE9JQ0VfTElTVFwiLCAgXG4gIFwiVE9PTF9QUk9GSUNJRU5DSUVTXCIsXG4gIFwiVE9PTF9DSE9JQ0VfTElTVFwiLFxuICBcIlRSQUlUU1wiLFxuICBcIlNPVVJDRVwiLFxuICBcIlJVTEVTRVRcIlxuXTtcblxuZXhwb3J0IGNvbnN0IEZFQVRTX0tFWVM6IEZNS2V5W10gPSBbXG4gIFwiU09VUkNFXCIsXG4gIFwiUlVMRVNFVFwiXG5dO1xuXG4vLyBcdTI1MDBcdTI1MDBcdTI1MDAgRmllbGQgc3Vic2V0cyBmb3IgZWFjaCBwYXJzZXIgXHUyNTAwXHUyNTAwXHUyNTAwXG5leHBvcnQgY29uc3QgU1BFTExfTUVUQV9ERUZTOiBGaWVsZERlZltdID0gU1BFTExfS0VZUy5tYXAoa2V5ID0+IHtcbiAgY29uc3QgZGVmID0gQUxMX0ZJRUxEX0RFRlMuZmluZChkID0+IGQuY2FsbFNpZ24gPT09IGtleSk7XG4gIGlmICghZGVmKSB0aHJvdyBuZXcgRXJyb3IoYE1pc3NpbmcgRmllbGREZWYgZm9yIFNQRUxMX0tFWSAke2tleX1gKTtcbiAgcmV0dXJuIGRlZjtcbn0pO1xuZXhwb3J0IGNvbnN0IFNQRUNJRVNfTUVUQV9ERUZTOiBGaWVsZERlZltdID0gU1BFQ0lFU19LRVlTLm1hcChrZXkgPT4ge1xuICBjb25zdCBkZWYgPSBBTExfRklFTERfREVGUy5maW5kKGQgPT4gZC5jYWxsU2lnbiA9PT0ga2V5KTtcbiAgaWYgKCFkZWYpIHRocm93IG5ldyBFcnJvcihgTWlzc2luZyBGaWVsZERlZiBmb3IgU1BFQ0lFU19LRVkgJHtrZXl9YCk7XG4gIHJldHVybiBkZWY7XG59KTtcbmV4cG9ydCBjb25zdCBJVEVNX01FVEFfREVGUzogRmllbGREZWZbXSA9IElURU1fS0VZUy5tYXAoa2V5ID0+IHtcbiAgY29uc3QgZGVmID0gQUxMX0ZJRUxEX0RFRlMuZmluZChkID0+IGQuY2FsbFNpZ24gPT09IGtleSk7XG4gIGlmICghZGVmKSB0aHJvdyBuZXcgRXJyb3IoYE1pc3NpbmcgRmllbGREZWYgZm9yIElURU1fS0VZICR7a2V5fWApO1xuICByZXR1cm4gZGVmO1xufSk7XG5leHBvcnQgY29uc3QgQkVTVElBUllfTUVUQV9ERUZTOiBGaWVsZERlZltdID0gQkVTVElBUllfS0VZUy5tYXAoa2V5ID0+IHtcbiAgY29uc3QgZGVmID0gQUxMX0ZJRUxEX0RFRlMuZmluZChkID0+IGQuY2FsbFNpZ24gPT09IGtleSk7XG4gIGlmICghZGVmKSB0aHJvdyBuZXcgRXJyb3IoYE1pc3NpbmcgRmllbGREZWYgZm9yIEJFU1RJQVJZX0tFWSAke2tleX1gKTtcbiAgcmV0dXJuIGRlZjtcbn0pO1xuZXhwb3J0IGNvbnN0IENMQVNTX01FVEFfREVGUzogRmllbGREZWZbXSA9IENMQVNTX0tFWVMubWFwKGtleSA9PiB7XG4gIGNvbnN0IGRlZiA9IEFMTF9GSUVMRF9ERUZTLmZpbmQoZCA9PiBkLmNhbGxTaWduID09PSBrZXkpO1xuICBpZiAoIWRlZikgdGhyb3cgbmV3IEVycm9yKGBNaXNzaW5nIEZpZWxkRGVmIGZvciBDTEFTU19LRVkgJHtrZXl9YCk7XG4gIHJldHVybiBkZWY7XG59KTtcbmV4cG9ydCBjb25zdCBCQUNLR1JPVU5EX01FVEFfREVGUzogRmllbGREZWZbXSA9IEJBQ0tHUk9VTkRfS0VZUy5tYXAoa2V5ID0+IHtcbiAgY29uc3QgZGVmID0gQUxMX0ZJRUxEX0RFRlMuZmluZChkID0+IGQuY2FsbFNpZ24gPT09IGtleSk7XG4gIGlmICghZGVmKSB0aHJvdyBuZXcgRXJyb3IoYE1pc3NpbmcgRmllbGREZWYgZm9yIEJBQ0tHUk9VTkRfS0VZICR7a2V5fWApO1xuICByZXR1cm4gZGVmO1xufSk7XG5leHBvcnQgY29uc3QgRkVBVFNfTUVUQV9ERUZTOiBGaWVsZERlZltdID0gRkVBVFNfS0VZUy5tYXAoa2V5ID0+IHtcbiAgY29uc3QgZGVmID0gQUxMX0ZJRUxEX0RFRlMuZmluZChkID0+IGQuY2FsbFNpZ24gPT09IGtleSk7XG4gIGlmICghZGVmKSB0aHJvdyBuZXcgRXJyb3IoYE1pc3NpbmcgRmllbGREZWYgZm9yIEJBQ0tHUk9VTkRfS0VZICR7a2V5fWApO1xuICByZXR1cm4gZGVmO1xufSk7IiwgIi8vIGRuZCA1ZSAyMDI0IGVkaXRpb24gc3BlbGxzXG5cbmltcG9ydCB0eXBlIHsgUGFyc2VkTWFya2Rvd25GaWxlIH0gZnJvbSBcInNyYy90eXBlc1wiO1xuaW1wb3J0IHsgcmVwbGFjZTVlVGFncyB9IGZyb20gXCIuL2hlbHBlcnMvdGFnUmVwbGFjZXJcIjtcbmltcG9ydCB7IGdldEZ1bGxTb3VyY2VOYW1lIH0gZnJvbSBcIi4vaGVscGVycy9zb3VyY2VNYXBcIjtcbmltcG9ydCB7IHJlbmRlck1hcmtkb3duVGFibGUgfSBmcm9tIFwiLi9oZWxwZXJzL21hcmtkb3duVGFibGVcIjtcbmltcG9ydCB7IGZvcm1hdEVudHJ5IH0gZnJvbSBcIi4vaGVscGVycy9mb3JtYXRFbnRyeVwiO1xuaW1wb3J0IHsgYnVpbGRGTSwgc2VyaWFsaXplRnJvbnRtYXR0ZXIsIFNQRUxMX01FVEFfREVGUywgRk1fRklFTERTIH0gZnJvbSBcIi4vaGVscGVycy9mcm9udG1hdHRlclwiO1xuXG5cbmV4cG9ydCBjb25zdCBTQ0hPT0xfTUFQOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+ID0ge1xuICBBOiBcIkFianVyYXRpb25cIixcbiAgQzogXCJDb25qdXJhdGlvblwiLFxuICBEOiBcIkRpdmluYXRpb25cIixcbiAgRTogXCJFbmNoYW50bWVudFwiLFxuICBWOiBcIkV2b2NhdGlvblwiLFxuICBJOiBcIklsbHVzaW9uXCIsXG4gIE46IFwiTmVjcm9tYW5jeVwiLFxuICBUOiBcIlRyYW5zbXV0YXRpb25cIixcbn07XG5cbmZ1bmN0aW9uIG9yZGluYWwobjogbnVtYmVyKTogc3RyaW5nIHtcbiAgY29uc3Qgc3VmZml4ID0gKG4gPT09IDEpID8gXCJzdFwiIDogKG4gPT09IDIpID8gXCJuZFwiIDogKG4gPT09IDMpID8gXCJyZFwiIDogXCJ0aFwiO1xuICByZXR1cm4gYCR7bn0ke3N1ZmZpeH1gO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZm9ybWF0UmFuZ2UocmFuZ2U6IGFueSk6IHN0cmluZyB7XG4gIGlmICghcmFuZ2UpIHJldHVybiBcIlwiO1xuXG4gIGlmICh0eXBlb2YgcmFuZ2UgPT09IFwic3RyaW5nXCIpIHJldHVybiByYW5nZTtcblxuICBpZiAocmFuZ2UudHlwZSA9PT0gXCJzcGVjaWFsXCIpIHJldHVybiBcIlNwZWNpYWxcIjtcbiAgaWYgKHJhbmdlLnR5cGUgPT09IFwicG9pbnRcIiAmJiByYW5nZS5kaXN0YW5jZSkge1xuICAgIGNvbnN0IGRpc3QgPSByYW5nZS5kaXN0YW5jZTtcbiAgICBpZiAoZGlzdC50eXBlID09PSBcInRvdWNoXCIpIHJldHVybiBcIlRvdWNoXCI7XG4gICAgaWYgKGRpc3QudHlwZSA9PT0gXCJzZWxmXCIpIHJldHVybiBcIlNlbGZcIjtcbiAgICBpZiAoZGlzdC50eXBlID09PSBcInNpZ2h0XCIpIHJldHVybiBcIlNpZ2h0XCI7XG4gICAgaWYgKGRpc3QuYW1vdW50KSByZXR1cm4gYCR7ZGlzdC5hbW91bnR9ICR7ZGlzdC50eXBlfWA7XG4gIH1cblxuICByZXR1cm4gXCJWYXJpZXNcIjtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGZvcm1hdFRpbWUodGltZTogYW55W10pOiBzdHJpbmcge1xuICBpZiAoIUFycmF5LmlzQXJyYXkodGltZSkpIHJldHVybiBcIlwiO1xuXG4gIHJldHVybiB0aW1lLm1hcCh0ID0+IGAke3QubnVtYmVyfSAke3QudW5pdH1gKS5qb2luKFwiLCBcIik7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBmb3JtYXREdXJhdGlvbihkdXJhdGlvbjogYW55W10pOiBzdHJpbmcge1xuICBpZiAoIUFycmF5LmlzQXJyYXkoZHVyYXRpb24pKSByZXR1cm4gXCJcIjtcblxuICByZXR1cm4gZHVyYXRpb24ubWFwKGQgPT4ge1xuICAgIGlmIChkLnR5cGUgPT09IFwiaW5zdGFudFwiKSByZXR1cm4gXCJJbnN0YW50YW5lb3VzXCI7XG4gICAgaWYgKGQudHlwZSA9PT0gXCJ0aW1lZFwiICYmIGQuZHVyYXRpb24pIHtcbiAgICAgIHJldHVybiBgJHtkLmR1cmF0aW9uLmFtb3VudH0gJHtkLmR1cmF0aW9uLnR5cGV9JHtkLmNvbmNlbnRyYXRpb24gPyBcIiAoY29uY2VudHJhdGlvbilcIiA6IFwiXCJ9YDtcbiAgICB9XG4gICAgaWYgKGQudHlwZSA9PT0gXCJwZXJtYW5lbnRcIikgcmV0dXJuIFwiUGVybWFuZW50XCI7XG4gICAgcmV0dXJuIFwiU3BlY2lhbFwiO1xuICB9KS5qb2luKFwiLCBcIik7XG59XG4vLyBpbiBwYXJzZXJzLzVlLWpzb24vcGFyc2VTcGVsbHNGaWxlLnRzIChvciB3aGVyZXZlciBmb3JtYXRDb21wb25lbnRzIGxpdmVzKVxuXG5mdW5jdGlvbiBmb3JtYXRDb21wb25lbnRzKGNvbXBvbmVudHM6IGFueSk6IHN0cmluZyB7XG4gIGlmICghY29tcG9uZW50cykgcmV0dXJuIFwiXCI7XG5cbiAgY29uc3QgcGFydHM6IHN0cmluZ1tdID0gW107XG5cbiAgaWYgKGNvbXBvbmVudHMudikgcGFydHMucHVzaChcIlZcIik7XG4gIGlmIChjb21wb25lbnRzLnMpIHBhcnRzLnB1c2goXCJTXCIpO1xuXG4gIGlmIChjb21wb25lbnRzLm0pIHtcbiAgICAvLyBwdWxsIG91dCB0aGUgYWN0dWFsIG1hdGVyaWFsIHRleHQocylcbiAgICBsZXQgbWF0RGV0YWlsczogc3RyaW5nW10gPSBbXTtcblxuICAgIGlmIChBcnJheS5pc0FycmF5KGNvbXBvbmVudHMubSkpIHtcbiAgICAgIG1hdERldGFpbHMgPSBjb21wb25lbnRzLm1cbiAgICAgICAgLm1hcCgoaXRlbTphbnkpID0+XG4gICAgICAgICAgdHlwZW9mIGl0ZW0gPT09IFwic3RyaW5nXCJcbiAgICAgICAgICAgID8gaXRlbVxuICAgICAgICAgICAgOiBpdGVtICYmIHR5cGVvZiBpdGVtLnRleHQgPT09IFwic3RyaW5nXCJcbiAgICAgICAgICAgID8gaXRlbS50ZXh0XG4gICAgICAgICAgICA6IG51bGxcbiAgICAgICAgKVxuICAgICAgICAuZmlsdGVyKCh0OmFueSk6IHQgaXMgc3RyaW5nID0+ICEhdCk7XG4gICAgfSBlbHNlIGlmICh0eXBlb2YgY29tcG9uZW50cy5tID09PSBcInN0cmluZ1wiKSB7XG4gICAgICBtYXREZXRhaWxzID0gW2NvbXBvbmVudHMubV07XG4gICAgfSBlbHNlIGlmIChjb21wb25lbnRzLm0udGV4dCkge1xuICAgICAgbWF0RGV0YWlscyA9IFtjb21wb25lbnRzLm0udGV4dF07XG4gICAgfVxuXG4gICAgLy8gYnVpbGQgdGhlIFx1MjAxQ01cdTIwMUQgZW50cnksIGFwcGVuZGluZyBkZXRhaWxzIGlmIGFueVxuICAgIGNvbnN0IG1hdFBhcnQgPVxuICAgICAgbWF0RGV0YWlscy5sZW5ndGggPiAwXG4gICAgICAgID8gYE0gKCR7bWF0RGV0YWlscy5qb2luKFwiLCBcIil9KWBcbiAgICAgICAgOiBcIk1cIjtcblxuICAgIHBhcnRzLnB1c2gobWF0UGFydCk7XG4gIH1cblxuICByZXR1cm4gcGFydHMuam9pbihcIiwgXCIpO1xufVxuXG5cbmV4cG9ydCBmdW5jdGlvbiBwYXJzZVNwZWxsc0ZpbGUoanNvbjogYW55LCBlZGl0aW9uSWQ6IHN0cmluZyk6IFBhcnNlZE1hcmtkb3duRmlsZVtdIHtcbiAgaWYgKCFqc29uLnNwZWxsKSByZXR1cm4gW107XG5cbiAgLy8gbWFrZSBlZGl0aW9uSWQgYXZhaWxhYmxlIGZvciBvdXIgU09VUkNFIGNvbnZlcnRlclxuICAoanNvbiBhcyBhbnkpLl9lZGl0aW9uSWQgPSBlZGl0aW9uSWQ7XG5cbiAgcmV0dXJuIGpzb24uc3BlbGwubWFwKChzcGVsbDogYW55KSA9PiB7XG4gICAgLy8gXHUyMDE0IGdhdGhlciBkYXRhIGZvciBoZWFkZXIvYm9keS9mb290ZXIgYXMgYmVmb3JlIFx1MjAxNFxuICAgIGNvbnN0IHNvdXJjZXMgPSBzcGVsbC5zb3VyY2VcbiAgICAgID8gQXJyYXkuaXNBcnJheShzcGVsbC5zb3VyY2UpID8gc3BlbGwuc291cmNlIDogW3NwZWxsLnNvdXJjZV1cbiAgICAgIDogW1widW5rbm93blwiXTtcbiAgICBjb25zdCBuYW1lID0gc3BlbGwubmFtZTtcbiAgICBjb25zdCBzY2hvb2wgPSBTQ0hPT0xfTUFQW3NwZWxsLnNjaG9vbF0gPz8gc3BlbGwuc2Nob29sO1xuICAgIGNvbnN0IGxldmVsID0gc3BlbGwubGV2ZWw7XG4gICAgY29uc3QgcmFuZ2UgPSBmb3JtYXRSYW5nZShzcGVsbC5yYW5nZSk7XG4gICAgY29uc3QgY2FzdGluZ1RpbWUgPSBmb3JtYXRUaW1lKHNwZWxsLnRpbWUpO1xuICAgIGNvbnN0IGR1cmF0aW9uID0gZm9ybWF0RHVyYXRpb24oc3BlbGwuZHVyYXRpb24pO1xuICAgIGNvbnN0IGZvcm1hdHRlZFNvdXJjZXMgPSBzb3VyY2VzLm1hcCgoczogc3RyaW5nKSA9PiBnZXRGdWxsU291cmNlTmFtZShzLCBlZGl0aW9uSWQpKTtcblxuICAgIGNvbnN0IGF0dGFja1R5cGUgPSBzcGVsbC5hdHRhY2tUeXBlIHx8IFwiXCI7XG4gICAgY29uc3QgZGFtYWdlVHlwZSA9IHNwZWxsLmRhbWFnZUluZmxpY3Q/LlswXSB8fCBcIlRlbGVwb3J0YXRpb25cIjtcbiAgICBjb25zdCByaXR1YWwgPSBzcGVsbC5yaXR1YWwgPT09IHRydWU7XG4gICAgY29uc3QgY29uY2VudHJhdGlvbiA9IHNwZWxsLmR1cmF0aW9uPy5zb21lKChkOiBhbnkpID0+IGQuY29uY2VudHJhdGlvbikgPz8gZmFsc2U7XG5cbiAgICBjb25zdCBGTSAgID0gYnVpbGRGTShzcGVsbCwgU1BFTExfTUVUQV9ERUZTKTtcbiAgICBjb25zdCB5YW1sID0gc2VyaWFsaXplRnJvbnRtYXR0ZXIoRk0sIFNQRUxMX01FVEFfREVGUyk7XG4gICAgY29uc3Qgc2F2aW5nVGhyb3dzID0gKEZNW0ZNX0ZJRUxEUy5TQVZJTkdfVEhST1dTXSBhcyBzdHJpbmdbXSkgfHwgW107XG4gICAgY29uc3Qgc2F2ZUF0dHIgPSBGTVtGTV9GSUVMRFMuU0FWRV0gYXMgc3RyaW5nIHwgdW5kZWZpbmVkO1xuXG4gICAgLy8gXHUyMDE0IHRpdGxlL3N1YnRpdGxlIGFuZCBib2R5IGxheW91dCBcdTIwMTRcbiAgICBjb25zdCBzYWZlTmFtZSA9IG5hbWUucmVwbGFjZSgvXFwvL2csIFwiLVwiKTtcbiAgICBjb25zdCB0aXRsZSA9IGAjICR7bmFtZX1gO1xuICAgIGNvbnN0IGxldmVsTGFiZWwgPVxuICAgICAgbGV2ZWwgPT09IDBcbiAgICAgICAgPyBgJHtzY2hvb2x9IENhbnRyaXBgXG4gICAgICAgIDogYCR7b3JkaW5hbChsZXZlbCl9LWxldmVsICR7c2Nob29sfSBTcGVsbGA7XG4gICAgY29uc3Qgc3VidGl0bGUgPSBgIyMjICoke2xldmVsTGFiZWx9KiR7Y29uY2VudHJhdGlvbiA/IFwiICooQ29uY2VudHJhdGlvbikqXCIgOiBcIlwifWA7XG5cbiAgICBjb25zdCBoZWFkZXJMaW5lcyA9IFtcbiAgICAgIHRpdGxlLFxuICAgICAgc3VidGl0bGUsXG4gICAgICBgKipDYXN0aW5nIFRpbWU6KiogJHtjYXN0aW5nVGltZX1gLFxuICAgICAgYCoqUmFuZ2U6KiogJHtyYW5nZX1gLFxuICAgICAgYCoqQ29tcG9uZW50czoqKiAke2Zvcm1hdENvbXBvbmVudHMoc3BlbGwuY29tcG9uZW50cyl9YCxcbiAgICAgIC4uLihzYXZpbmdUaHJvd3MubGVuZ3RoID8gW2AqKlNhdmluZyBUaHJvdzoqKiAke3NhdmluZ1Rocm93cy5qb2luKFwiLCBcIil9YF0gOiBbXSksXG4gICAgICBgKipEdXJhdGlvbjoqKiAke2R1cmF0aW9ufWAsXG4gICAgXTtcblxuICAgIGNvbnN0IGJvZHlMaW5lcyA9IFtcbiAgICAgIC4uLigoc3BlbGwuZW50cmllcyA/PyBbXSkubWFwKChlOiBhbnkpID0+IGZvcm1hdEVudHJ5KGUpKSksXG4gICAgICAuLi4oKHNwZWxsLmVudHJpZXNIaWdoZXJMZXZlbCA/PyBbXSkubWFwKChlOiBhbnkpID0+IGZvcm1hdEVudHJ5KGUpKSksXG4gICAgXTtcblxuICAgIGNvbnN0IGZvb3RlckxpbmVzID0gW1xuICAgICAgYC0tLWAsXG4gICAgICBgKipTb3VyY2U6KiogJHtmb3JtYXR0ZWRTb3VyY2VzLmpvaW4oXCIsIFwiKX1gLFxuICAgIF07XG5cbiAgICAvLyBcdTIwMTQgYXNzZW1ibGUgdGhlIG5vdGUgd2l0aCBZQU1MIGZyb250bWF0dGVyIFx1MjAxNFxuICAgIHJldHVybiB7XG4gICAgICBwYXRoOiBgJHtzYWZlTmFtZX0ubWRgLFxuICAgICAgY29udGVudDogW1xuICAgICAgICBgLS0tXFxuJHt5YW1sfVxcbi0tLWAsXG4gICAgICAgIGhlYWRlckxpbmVzLmpvaW4oXCJcXG5cIiksXG4gICAgICAgIGBgLFxuICAgICAgICBib2R5TGluZXMuam9pbihcIlxcblxcblwiKSxcbiAgICAgICAgYGAsXG4gICAgICAgIGZvb3RlckxpbmVzLmpvaW4oXCJcXG5cIiksXG4gICAgICBdLmpvaW4oXCJcXG5cIiksXG4gICAgfTtcbiAgfSk7XG59XG5cbiIsICIvLyBkbmQgNWUgMjAyNCBzcGVjaWVzXG5cbmltcG9ydCB0eXBlIHsgUGFyc2VkTWFya2Rvd25GaWxlIH0gZnJvbSBcIi4uLy4uL3R5cGVzXCI7XG5pbXBvcnQgeyByZXBsYWNlNWVUYWdzIH0gZnJvbSBcIi4vaGVscGVycy90YWdSZXBsYWNlclwiO1xuaW1wb3J0IHtcbiAgYnVpbGRGTSxcbiAgc2VyaWFsaXplRnJvbnRtYXR0ZXIsXG4gIEZNX0ZJRUxEUyxcbiAgU1BFQ0lFU19NRVRBX0RFRlMsXG4gIFNJWkVfTUFQLFxufSBmcm9tIFwiLi9oZWxwZXJzL2Zyb250bWF0dGVyXCI7XG5pbXBvcnQgeyByZW5kZXJNYXJrZG93blRhYmxlIH0gZnJvbSBcIi4vaGVscGVycy9tYXJrZG93blRhYmxlXCI7XG5pbXBvcnQgeyBmb3JtYXRFbnRyeSB9IGZyb20gXCIuL2hlbHBlcnMvZm9ybWF0RW50cnlcIjtcblxuZnVuY3Rpb24gc2x1ZyhuYW1lOiBzdHJpbmcpOiBzdHJpbmcge1xuICByZXR1cm4gbmFtZVxuICAgIC5yZXBsYWNlKC87L2csIFwiOlwiKSAgICAgICAvLyBzZW1pY29sb24gXHUyMTkyIGRhc2hcbiAgICAucmVwbGFjZSgvW1xcLzpcIl0vZywgXCI6XCIpICAvLyBzbGFzaCwgY29sb24sIHF1b3RlIFx1MjE5MiBkYXNoXG4gICAgLnRyaW0oKTtcbn1cblxuY29uc3QgQkxPQ0tFRF9UUkFJVFMgPSBbXCJBZ2VcIiwgXCJTaXplXCIsIFwiTGFuZ3VhZ2VzXCIsIFwiQ3JlYXR1cmUgVHlwZVwiLCBcIlNwZWVkXCJdO1xuXG5mdW5jdGlvbiBsaW5rRGlzcGxheShzdHI6IHN0cmluZyk6IHN0cmluZyB7XG4gIGlmICh0eXBlb2Ygc3RyICE9PSBcInN0cmluZ1wiKSByZXR1cm4gU3RyaW5nKHN0ciA/PyBcIlwiKTtcbiAgY29uc3QgbSA9IHN0ci5tYXRjaCgvXlxcW1xcWyguKz8pXFxdXFxdJC8pO1xuICBpZiAoIW0pIHJldHVybiBzdHI7XG4gIGNvbnN0IGlubmVyID0gbVsxXTtcbiAgY29uc3QgcGlwZSA9IGlubmVyLnNwbGl0KFwifFwiKTtcbiAgaWYgKHBpcGUubGVuZ3RoID4gMSkgcmV0dXJuIHBpcGVbMV0udHJpbSgpOyAgICAgICAgIC8vIC4uLnxEaXNwbGF5XG4gIGNvbnN0IGhhc2ggPSBpbm5lci5zcGxpdChcIiNcIik7XG4gIGlmIChoYXNoLmxlbmd0aCA+IDEpIHJldHVybiBoYXNoWzFdLnRyaW0oKTsgICAgICAgICAvLyBGaWxlI0hlYWRlclxuICByZXR1cm4gaW5uZXIudHJpbSgpO1xufVxuXG4vLyBOb3JtYWxpemUgaGVhZGluZyBuYW1lcyBmb3IgY29tcGFyaXNvbiBhbmQgbG9va3VwXG5mdW5jdGlvbiBub3JtTmFtZShuOiBzdHJpbmcpOiBzdHJpbmcge1xuICByZXR1cm4gU3RyaW5nKG4gPz8gXCJcIilcbiAgICAucmVwbGFjZSgvXkZlYXR1cmU6XFxzKi9pLCBcIlwiKVxuICAgIC5yZXBsYWNlKC9cXHMrL2csIFwiIFwiKVxuICAgIC50cmltKClcbiAgICAudG9Mb3dlckNhc2UoKTtcbn1cblxuLy8gRmluZCBhIG5hbWVkIGVudHJ5IGVpdGhlciBhdCB0b3AgbGV2ZWwgb3Igb25lIGxldmVsIG5lc3RlZCB1bmRlciBlbnRyaWVzW11cbmZ1bmN0aW9uIGZpbmRFbnRyeUJ5TmFtZShlbnRyaWVzOiBhbnlbXSB8IHVuZGVmaW5lZCwgZGlzcGxheTogc3RyaW5nKTogYW55IHwgbnVsbCB7XG4gIGlmICghQXJyYXkuaXNBcnJheShlbnRyaWVzKSkgcmV0dXJuIG51bGw7XG4gIGNvbnN0IHRhcmdldCA9IG5vcm1OYW1lKGRpc3BsYXkpO1xuXG4gIC8vIGRpcmVjdCBoaXRcbiAgY29uc3QgZGlyZWN0ID0gZW50cmllcy5maW5kKGUgPT4gdHlwZW9mIGU/Lm5hbWUgPT09IFwic3RyaW5nXCIgJiYgbm9ybU5hbWUoZS5uYW1lKSA9PT0gdGFyZ2V0KTtcbiAgaWYgKGRpcmVjdCkgcmV0dXJuIGRpcmVjdDtcblxuICAvLyBvbmUgbGV2ZWwgbmVzdGVkXG4gIGZvciAoY29uc3QgZSBvZiBlbnRyaWVzKSB7XG4gICAgaWYgKEFycmF5LmlzQXJyYXkoZT8uZW50cmllcykpIHtcbiAgICAgIGNvbnN0IHN1YiA9IGUuZW50cmllcy5maW5kKChzOiBhbnkpID0+IHR5cGVvZiBzPy5uYW1lID09PSBcInN0cmluZ1wiICYmIG5vcm1OYW1lKHMubmFtZSkgPT09IHRhcmdldCk7XG4gICAgICBpZiAoc3ViKSByZXR1cm4gc3ViO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBudWxsO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gcGFyc2VTcGVjaWVzRmlsZShcbiAganNvbjogeyByYWNlOiBhbnlbXTsgc3VicmFjZT86IGFueVtdOyBfZWRpdGlvbklkPzogc3RyaW5nIH0sXG4gIGVkaXRpb25JZDogc3RyaW5nXG4pOiBQYXJzZWRNYXJrZG93bkZpbGVbXSB7XG4gIGlmICghQXJyYXkuaXNBcnJheShqc29uLnJhY2UpKSByZXR1cm4gW107XG4gIGpzb24uX2VkaXRpb25JZCA9IGVkaXRpb25JZDtcblxuICAvLyAxKSBGaWx0ZXIgb3V0IHJlcHJpbnRzXG5jb25zdCByYXdWYXJpYW50cyA9IGpzb24ucmFjZS5maWx0ZXIoKHI6IGFueSkgPT5cbiAgIS9cXCgoPzpLYWxhZGVzaHxaZW5kaWthcnxBbW9ua2hldHxJbm5pc3RyYWR8SXhhbGFuKVxcKSQvLnRlc3Qoci5uYW1lKVxuKTtcblxuICAvLyAyKSBHcm91cCBieSByYWNlIG5hbWVcbiAgY29uc3QgYnlOYW1lID0gbmV3IE1hcDxzdHJpbmcsIGFueVtdPigpO1xuICBmb3IgKGNvbnN0IHIgb2YgcmF3VmFyaWFudHMpIHtcbiAgICBjb25zdCBsaXN0ID0gYnlOYW1lLmdldChyLm5hbWUpID8/IFtdO1xuICAgIGxpc3QucHVzaChyKTtcbiAgICBieU5hbWUuc2V0KHIubmFtZSwgbGlzdCk7XG4gIH1cblxuICAvLyAzKSBBbGwgc3VicmFjZXMgYXJyYXlcbiAgY29uc3Qgc3VicmFjZXNMaXN0ID0gQXJyYXkuaXNBcnJheShqc29uLnN1YnJhY2UpID8ganNvbi5zdWJyYWNlIDogW107XG5cbiAgY29uc3Qgb3V0OiBQYXJzZWRNYXJrZG93bkZpbGVbXSA9IFtdO1xuXG4gIC8vIDQpIE1haW4gbG9vcCBvdmVyIGVhY2ggc3BlY2llc1xuICBmb3IgKGNvbnN0IFtyYWNlTmFtZSwgcmFjZVZhcmlhbnRzXSBvZiBieU5hbWUuZW50cmllcygpKSB7XG4gICAgY29uc3Qgc2FmZU5hbWUgPSBzbHVnKHJhY2VOYW1lKTtcblxuICAgIC8vIHBpY2sgdGhlIFx1MjAxQ2Z1bGxlc3RcdTIwMUQgdmFyaWFudCBhcyBwcmltYXJ5XG4gICAgY29uc3QgcHJpbWFyeSA9IHJhY2VWYXJpYW50cy5yZWR1Y2UoXG4gICAgICAoYmVzdCwgY3VyKSA9PlxuICAgICAgICBPYmplY3Qua2V5cyhjdXIpLmxlbmd0aCA+IE9iamVjdC5rZXlzKGJlc3QpLmxlbmd0aCA/IGN1ciA6IGJlc3QsXG4gICAgICByYWNlVmFyaWFudHNbMF1cbiAgICApO1xuXG4gICAgLy8gb25lXHUyMDEwb2ZmOiBncmFmdCBIdW1hbiBhYmlsaXR5IGlmIG1pc3NpbmdcbiAgICBpZiAoIXByaW1hcnkuYWJpbGl0eSkge1xuICAgICAgY29uc3QgaHVtYW5FbnRyeSA9IHN1YnJhY2VzTGlzdC5maW5kKChzcjogYW55KSA9PlxuICAgICAgICBzci5yYWNlTmFtZSA9PT0gcmFjZU5hbWUgJiZcbiAgICAgICAgc3IucmFjZVNvdXJjZSA9PT0gcHJpbWFyeS5zb3VyY2UgJiZcbiAgICAgICAgIShcIm5hbWVcIiBpbiBzcikgJiZcbiAgICAgICAgQXJyYXkuaXNBcnJheShzci5hYmlsaXR5KVxuICAgICAgKTtcbiAgICAgIGlmIChodW1hbkVudHJ5KSBwcmltYXJ5LmFiaWxpdHkgPSBodW1hbkVudHJ5LmFiaWxpdHk7XG4gICAgfVxuXG4gICAgLy8gYnVpbGQgZnJvbnRtYXR0ZXJcbiAgICBjb25zdCBmbSA9IGJ1aWxkRk0ocHJpbWFyeSwgU1BFQ0lFU19NRVRBX0RFRlMpO1xuICAgIGNvbnN0IHNlbnNlczogc3RyaW5nW10gPSBbXTtcbiAgICBpZiAocHJpbWFyeS5kYXJrdmlzaW9uKSAgc2Vuc2VzLnB1c2goYERhcmt2aXNpb24gJHtwcmltYXJ5LmRhcmt2aXNpb259IGZ0LmApO1xuICAgIGlmIChwcmltYXJ5LmJsaW5kc2lnaHQpICBzZW5zZXMucHVzaChgQmxpbmRzaWdodCAke3ByaW1hcnkuYmxpbmRzaWdodH0gZnQuYCk7XG4gICAgaWYgKHByaW1hcnkudHJlbW9yc2Vuc2UpIHNlbnNlcy5wdXNoKGBUcmVtb3JzZW5zZSAke3ByaW1hcnkudHJlbW9yc2Vuc2V9IGZ0LmApO1xuICAgIGlmIChwcmltYXJ5LnRydWVzaWdodCkgICBzZW5zZXMucHVzaChgVHJ1ZXNpZ2h0ICR7cHJpbWFyeS50cnVlc2lnaHR9IGZ0LmApO1xuICAgIGlmIChzZW5zZXMubGVuZ3RoKSBmbS5zZW5zZXMgPSBzZW5zZXM7XG4gICAgaWYgKEFycmF5LmlzQXJyYXkoZm0udHJhaXRzKSkge1xuICAgICAgZm0udHJhaXRzID0gZm0udHJhaXRzLmZpbHRlcih0ID0+ICFCTE9DS0VEX1RSQUlUUy5pbmNsdWRlcyh0KSk7XG4gICAgfVxuICAgIGNvbnN0IHlhbWwgPSBzZXJpYWxpemVGcm9udG1hdHRlcihmbSwgU1BFQ0lFU19NRVRBX0RFRlMpO1xuXG4gICAgLy8gYnVpbGQgc3BlY2llcyBib2R5XG4gICAgY29uc3QgbGluZXM6IHN0cmluZ1tdID0gW107XG4gICAgbGluZXMucHVzaChgIyAke3JhY2VOYW1lfWAsIGAjIyBTdGF0c2ApO1xuXG4gICAgLy8gU2l6ZVxuICAgIGNvbnN0IHNpemUgPSBBcnJheS5pc0FycmF5KHByaW1hcnkuc2l6ZSlcbiAgICAgID8gcHJpbWFyeS5zaXplLm1hcCgoczogc3RyaW5nKSA9PiBTSVpFX01BUFtzXSB8fCBzKS5qb2luKFwiL1wiKVxuICAgICAgOiBTSVpFX01BUFtwcmltYXJ5LnNpemVdID8/IHByaW1hcnkuc2l6ZTtcbiAgICBsaW5lcy5wdXNoKGAqKlNpemU6KiogJHtzaXplfWApO1xuXG4gICAgLy8gU3BlZWRcbiAgICBjb25zdCBzcGVlZCA9IHR5cGVvZiBwcmltYXJ5LnNwZWVkID09PSBcIm51bWJlclwiXG4gICAgICA/IHByaW1hcnkuc3BlZWRcbiAgICAgIDogcHJpbWFyeS5zcGVlZD8ud2FsayA/PyBwcmltYXJ5LnNwZWVkPy5iYXNlID8/IDA7XG4gICAgbGluZXMucHVzaChgKipTcGVlZDoqKiAke3NwZWVkfSBmdC4gd2Fsa2luZ2ApO1xuXG4gICAgLy8gQWJpbGl0aWVzXG4gICAgY29uc3Qga2lkcyA9IHN1YnJhY2VzTGlzdC5maWx0ZXIoc3IgPT5cbiAgICAgIHNyLm5hbWUgJiYgc3IucmFjZU5hbWUgPT09IHJhY2VOYW1lICYmIHNyLnJhY2VTb3VyY2UgPT09IHByaW1hcnkuc291cmNlXG4gICAgKTtcbiAgICBjb25zdCByYXdBYmlsaXR5ID0gQXJyYXkuaXNBcnJheShwcmltYXJ5LmFiaWxpdHkpXG4gICAgICA/IHByaW1hcnkuYWJpbGl0eVxuICAgICAgOiBBcnJheS5pc0FycmF5KGtpZHNbMF0/LmFiaWxpdHkpID8ga2lkc1swXS5hYmlsaXR5IDogW107XG4gICAgaWYgKEFycmF5LmlzQXJyYXkocmF3QWJpbGl0eSkgJiYgcmF3QWJpbGl0eS5sZW5ndGgpIHtcbiAgICAgIGNvbnN0IGJvbnVzZXMgPSB7IHN0cjowLGRleDowLGNvbjowLGludDowLHdpczowLGNoYTowIH07XG4gICAgICBsZXQgY2hvb3NlT3B0OiBhbnkgPSBudWxsO1xuICAgICAgZm9yIChjb25zdCBvYmogb2YgcmF3QWJpbGl0eSkge1xuICAgICAgICBpZiAoXCJjaG9vc2VcIiBpbiBvYmopIGNob29zZU9wdCA9IG9iai5jaG9vc2U7XG4gICAgICAgIGVsc2UgZm9yIChjb25zdCBbayx2XSBvZiBPYmplY3QuZW50cmllcyhvYmopKSAoYm9udXNlcyBhcyBhbnkpW2tdICs9IHYgYXMgbnVtYmVyO1xuICAgICAgfVxuICAgICAgY29uc3QgcGFpcnMgPSBPYmplY3QuZW50cmllcyhib251c2VzKSBhcyBbc3RyaW5nLG51bWJlcl1bXTtcbiAgICAgIGNvbnN0IHBhcnRzID0gcGFpcnMuZmlsdGVyKChbLHZdKT0+diE9PTApLm1hcCgoW2ssdl0pPT5gJHtrLnRvVXBwZXJDYXNlKCl9ICR7dj49MD9cIitcIjpcIlwifSR7dn1gKTtcbiAgICAgIGlmIChjaG9vc2VPcHQ/LmNvdW50ICYmIEFycmF5LmlzQXJyYXkoY2hvb3NlT3B0LmZyb20pKSB7XG4gICAgICAgIHBhcnRzLnB1c2goYENIT09TRSAke2Nob29zZU9wdC5jb3VudH0gZnJvbSAke2Nob29zZU9wdC5mcm9tLm1hcCgoczpzdHJpbmcpPT5zLnRvVXBwZXJDYXNlKCkpLmpvaW4oXCIsIFwiKX1gKTtcbiAgICAgIH1cbiAgICAgIGlmIChwYXJ0cy5sZW5ndGgpIGxpbmVzLnB1c2goYCoqQWJpbGl0eSBTY29yZXM6KiogJHtwYXJ0cy5qb2luKFwiLCBcIil9YCk7XG4gICAgfVxuXG4gICAgLy8gTGFuZ3VhZ2VzXG4gICAgY29uc3QgbGFuZ3MgPSBmbS5sYW5ndWFnZXMgYXMgc3RyaW5nW118dW5kZWZpbmVkO1xuICAgIGlmIChsYW5ncz8ubGVuZ3RoKSBsaW5lcy5wdXNoKGAqKkxhbmd1YWdlczoqKiAke2xhbmdzLmpvaW4oXCIsIFwiKX1gKTtcblxuICAgIC8vIFNraWxsc1xuICAgIGlmIChBcnJheS5pc0FycmF5KHByaW1hcnkuc2tpbGxQcm9maWNpZW5jaWVzKSkge1xuICAgICAgY29uc3Qgc2tpbGxMYWJlbHM6IHN0cmluZ1tdID0gW107XG4gICAgICBmb3IgKGNvbnN0IGUgb2YgcHJpbWFyeS5za2lsbFByb2ZpY2llbmNpZXMgYXMgYW55W10pIHtcbiAgICAgICAgaWYgKGUuY2hvb3NlPy5mcm9tKSB7XG4gICAgICAgICAgc2tpbGxMYWJlbHMucHVzaChgQ2hvb3NlIGZyb206ICR7ZS5jaG9vc2UuZnJvbS5tYXAoKHM6c3RyaW5nKT0+cy5jaGFyQXQoMCkudG9VcHBlckNhc2UoKStzLnNsaWNlKDEpKS5qb2luKFwiLCBcIil9YCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY29uc3QgdmFsID0gZS5wcm9maWNpZW5jeSA/PyBlLm5hbWUgPz8gZTtcbiAgICAgICAgICBpZiAodHlwZW9mIHZhbCA9PT0gXCJzdHJpbmdcIikgc2tpbGxMYWJlbHMucHVzaCh2YWwuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkrdmFsLnNsaWNlKDEpKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKHNraWxsTGFiZWxzLmxlbmd0aCkgbGluZXMucHVzaChgKipTa2lsbCBQcm9maWNpZW5jaWVzOioqICR7c2tpbGxMYWJlbHMuam9pbihcIjsgXCIpfWApO1xuICAgIH1cblxuICAgIC8vIFRvb2wgLyBXZWFwb24gLyBBcm1vclxuICAgIGNvbnN0IHRwID0gZm1bRk1fRklFTERTLlRPT0xfUFJPRklDSUVOQ0lFU10gYXMgc3RyaW5nW118dW5kZWZpbmVkO1xuICAgIGNvbnN0IHdwID0gZm1bRk1fRklFTERTLldFQVBPTl9QUk9GSUNJRU5DSUVTXSBhcyBzdHJpbmdbXXx1bmRlZmluZWQ7XG4gICAgY29uc3QgYXAgPSBmbVtGTV9GSUVMRFMuQVJNT1JfUFJPRklDSUVOQ0lFU10gYXMgc3RyaW5nW118dW5kZWZpbmVkO1xuICAgIGlmICh0cD8ubGVuZ3RoKSBsaW5lcy5wdXNoKGAqKlRvb2wgUHJvZmljaWVuY2llczoqKiAke3RwLmpvaW4oXCIsIFwiKX1gKTtcbiAgICBpZiAod3A/Lmxlbmd0aCkgbGluZXMucHVzaChgKipXZWFwb24gUHJvZmljaWVuY2llczoqKiAke3dwLmpvaW4oXCIsIFwiKX1gKTtcbiAgICBpZiAoYXA/Lmxlbmd0aCkgbGluZXMucHVzaChgKipBcm1vciBQcm9maWNpZW5jaWVzOioqICR7YXAuam9pbihcIiwgXCIpfWApO1xuXG4gICAgLy8gVHJhaXRzXG4gICAgbGluZXMucHVzaChgIyMgVHJhaXRzYCk7XG4gICAgY29uc3Qgc2VlbiA9IG5ldyBTZXQ8c3RyaW5nPigpO1xuICAgIGZvciAoY29uc3QgdHJhaXQgb2YgKGZtLnRyYWl0cyBhcyBzdHJpbmdbXSB8fCBbXSkpIHtcbiAgICAgIGNvbnN0IHRpdGxlID0gbGlua0Rpc3BsYXkodHJhaXQpOyAgICAgICAgIC8vIHBsYWluIGhlYWRlciB0ZXh0LCBubyBsaW5rXG4gICAgICBsaW5lcy5wdXNoKGAjIyMjIyAke3RpdGxlfWApO1xuXG4gICAgICBjb25zdCBlbnQgPSBmaW5kRW50cnlCeU5hbWUocHJpbWFyeS5lbnRyaWVzLCB0aXRsZSk7XG4gICAgICBpZiAoZW50Py5lbnRyaWVzKSB7XG4gICAgICAgIGVudC5lbnRyaWVzLmZvckVhY2goKHN1YjogYW55LCBpZHg6IG51bWJlcikgPT4ge1xuICAgICAgICAgIGxldCBibGs6IHN0cmluZyB8IHVuZGVmaW5lZDtcbiAgICAgICAgICBpZiAoc3ViLnR5cGUgPT09IFwidGFibGVcIikge1xuICAgICAgICAgICAgYmxrID0gcmVuZGVyTWFya2Rvd25UYWJsZShzdWIpO1xuICAgICAgICAgIH0gZWxzZSBpZiAoc3ViLnR5cGUgPT09IFwibGlzdFwiKSB7XG4gICAgICAgICAgICBibGsgPSBzdWIuaXRlbXNcbiAgICAgICAgICAgICAgLm1hcCgoaXQ6IGFueSkgPT4gKHR5cGVvZiBpdCA9PT0gXCJzdHJpbmdcIiA/IGAtICR7cmVwbGFjZTVlVGFncyhpdCl9YCA6IGAtICR7aXQubmFtZX1gKSlcbiAgICAgICAgICAgICAgLmpvaW4oXCJcXG5cIik7XG4gICAgICAgICAgfSBlbHNlIGlmICh0eXBlb2Ygc3ViID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICBibGsgPSByZXBsYWNlNWVUYWdzKHN1Yik7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChibGsgJiYgIXNlZW4uaGFzKGJsaykpIHtcbiAgICAgICAgICAgIGxpbmVzLnB1c2goYmxrKTtcbiAgICAgICAgICAgIHNlZW4uYWRkKGJsayk7XG4gICAgICAgICAgICBpZiAoZW50LmVudHJpZXMubGVuZ3RoID4gMSAmJiBpZHggPCBlbnQuZW50cmllcy5sZW5ndGggLSAxKSBsaW5lcy5wdXNoKFwiXCIpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gXHUyNTAwXHUyNTAwXHUyNTAwIE5vdyBicmFuY2ggb24gc3VicmFjZXMgXHUyNTAwXHUyNTAwXHUyNTAwXG4gICAgY29uc3Qgc3VicyA9IGtpZHM7ICAvLyBhbHJlYWR5IGZpbHRlcmVkXG4gICAgaWYgKHN1YnMubGVuZ3RoKSB7XG4gICAgICAvLyAxKSBtYWluIGZpbGUgaW4gZm9sZGVyXG4gICAgICBvdXQucHVzaCh7XG4gICAgICAgIHBhdGg6IGBTcGVjaWVzLyR7c2FmZU5hbWV9LyR7c2FmZU5hbWV9Lm1kYCxcbiAgICAgICAgY29udGVudDogYC0tLVxcbiR7eWFtbH1cXG4tLS1cXG5cXG4ke2xpbmVzLmpvaW4oXCJcXG5cIil9YCxcbiAgICAgIH0pO1xuXG4gICAgICAvLyAyKSBlYWNoIHN1YnNwZWNpZXNcbiAgICAgIGNvbnN0IHN1YkZvbGRlciA9IGBTcGVjaWVzLyR7c2FmZU5hbWV9L1JhY2VzYDtcbiAgICAgIGZvciAoY29uc3Qgc3Igb2Ygc3Vicykge1xuICAgICAgICAvLyB0dXJuIHNlbWljb2xvbnMgXHUyMTkyIGNvbG9uc1xuICAgICAgICBjb25zdCBkaXNwbGF5ID0gc3IubmFtZS5yZXBsYWNlKC87L2csIFwiOlwiKTtcbiAgICAgICAgY29uc3Qgc3ViTGluZXM6IHN0cmluZ1tdID0gW2AjICR7ZGlzcGxheX1gXTtcblxuICAgICAgICAvLyBjb3B5IFN0YXRzIGJsb2NrIGlmIHlvdSBsaWtlOlxuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShzci5hYmlsaXR5KSkge1xuICAgICAgICAgIGNvbnN0IGJvbnVzZXMgPSB7IHN0cjowLGRleDowLGNvbjowLGludDowLHdpczowLGNoYTowIH07XG4gICAgICAgICAgbGV0IGNob29zZU9wdDphbnkgPSBudWxsO1xuICAgICAgICAgIGZvciAoY29uc3Qgb2JqIG9mIHNyLmFiaWxpdHkpIHtcbiAgICAgICAgICAgIGlmIChcImNob29zZVwiIGluIG9iaikgY2hvb3NlT3B0ID0gb2JqLmNob29zZTtcbiAgICAgICAgICAgIGVsc2UgZm9yIChjb25zdCBbayx2XSBvZiBPYmplY3QuZW50cmllcyhvYmopKSAoYm9udXNlcyBhcyBhbnkpW2tdKz12IGFzIG51bWJlcjtcbiAgICAgICAgICB9XG4gICAgICAgICAgY29uc3QgcGFpcnMgPSBPYmplY3QuZW50cmllcyhib251c2VzKSBhcyBbc3RyaW5nLG51bWJlcl1bXTtcbiAgICAgICAgICBjb25zdCBwYXJ0cyA9IHBhaXJzLmZpbHRlcigoWyx2XSk9PnYhPT0wKS5tYXAoKFtrLHZdKT0+YCR7ay50b1VwcGVyQ2FzZSgpfSAke3Y+PTA/XCIrXCI6XCJcIn0ke3Z9YCk7XG4gICAgICAgICAgaWYgKGNob29zZU9wdD8uY291bnQpIHBhcnRzLnB1c2goYENIT09TRSAke2Nob29zZU9wdC5jb3VudH0gZnJvbSAkeyhjaG9vc2VPcHQuZnJvbSBhcyBzdHJpbmdbXSkubWFwKHM9PnMudG9VcHBlckNhc2UoKSkuam9pbihcIiwgXCIpfWApO1xuICAgICAgICAgIGlmIChwYXJ0cy5sZW5ndGgpIHN1YkxpbmVzLnB1c2goYCoqQWJpbGl0eSBTY29yZXM6KiogJHtwYXJ0cy5qb2luKFwiLCBcIil9YCk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyB0aGVuIHRyYWl0cy9lbnRyaWVzXG4gICAgICAgIGZvciAoY29uc3QgZW50cnkgb2Ygc3IuZW50cmllcyB8fCBbXSkge1xuICAgICAgICAgIHN1YkxpbmVzLnB1c2goZm9ybWF0RW50cnkoZW50cnkpKTtcbiAgICAgICAgICBzdWJMaW5lcy5wdXNoKFwiXCIpOyAvLyBvcHRpb25hbCBibGFuayBsaW5lIGJldHdlZW4gZmVhdHVyZXNcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHN1YllhbWwgPSBzZXJpYWxpemVGcm9udG1hdHRlcihidWlsZEZNKHNyLCBTUEVDSUVTX01FVEFfREVGUyksIFNQRUNJRVNfTUVUQV9ERUZTKTtcbiAgICAgICAgb3V0LnB1c2goe1xuICAgICAgICAgIHBhdGg6IGAke3N1YkZvbGRlcn0vJHtzbHVnKHNyLm5hbWUpfS5tZGAsXG4gICAgICAgICAgY29udGVudDogYC0tLVxcbiR7c3ViWWFtbH1cXG4tLS1cXG5cXG4ke3N1YkxpbmVzLmpvaW4oXCJcXG5cIil9YCxcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIG5vIHN1YnJhY2VzIFx1MjFEMiBhIHNpbmdsZSBmbGF0IGZpbGVcbiAgICAgIG91dC5wdXNoKHtcbiAgICAgICAgcGF0aDogYFNwZWNpZXMvJHtzYWZlTmFtZX0ubWRgLFxuICAgICAgICBjb250ZW50OiBgLS0tXFxuJHt5YW1sfVxcbi0tLVxcblxcbiR7bGluZXMuam9pbihcIlxcblwiKX1gLFxuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgLy8gNSkgU29ydCAmIHJldHVyblxuICByZXR1cm4gb3V0LnNvcnQoKGEsIGIpID0+IGEucGF0aC5sb2NhbGVDb21wYXJlKGIucGF0aCkpO1xufVxuIiwgIi8vNWUgMjAyNSBjbGFzc2VzXG5cbmltcG9ydCB0eXBlIHsgUGFyc2VkTWFya2Rvd25GaWxlIH0gZnJvbSBcIi4uLy4uL3R5cGVzXCI7XG5pbXBvcnQgeyBcbiAgYnVpbGRGTSwgXG4gIHNlcmlhbGl6ZUZyb250bWF0dGVyLCBcbiAgQ0xBU1NfTUVUQV9ERUZTLCBcbiAgdW5pZmllZFRvb2xQcm9mcywgXG4gIHVuaWZpZWRXZWFwb25Qcm9mcywgXG4gIFNraWxsT3B0aW9uLFxuICB1bmlmaWVkU2tpbGxzLFxuICBTS0lMTF9PUFRJT05TLCBcbiAgRk1fRklFTERTXG59IGZyb20gXCIuL2hlbHBlcnMvZnJvbnRtYXR0ZXJcIjtcbmltcG9ydCB7IHJlbmRlck1hcmtkb3duVGFibGUgfSBmcm9tIFwiLi9oZWxwZXJzL21hcmtkb3duVGFibGVcIjtcbmltcG9ydCB7IHJlcGxhY2U1ZVRhZ3MgfSBmcm9tIFwiLi9oZWxwZXJzL3RhZ1JlcGxhY2VyXCI7XG5pbXBvcnQgeyBmb3JtYXRFbnRyeSB9IGZyb20gXCIuL2hlbHBlcnMvZm9ybWF0RW50cnlcIjtcblxuZnVuY3Rpb24gaXNUeXBlZEVudHJ5KHg6IGFueSk6IHggaXMgeyB0eXBlOiBzdHJpbmc7IFtrOiBzdHJpbmddOiBhbnkgfSB7XG4gIHJldHVybiAoXG4gICAgeCAhPSBudWxsICYmXG4gICAgdHlwZW9mIHggPT09IFwib2JqZWN0XCIgJiZcbiAgICAhQXJyYXkuaXNBcnJheSh4KSAmJlxuICAgIHR5cGVvZiAoeCBhcyBhbnkpLnR5cGUgPT09IFwic3RyaW5nXCJcbiAgKTtcbn1cblxuZnVuY3Rpb24gZm9ybWF0RmVhdHVyZUxpbmsobmFtZTogc3RyaW5nKTogc3RyaW5nIHtcbiAgICBjb25zdCBpZ25vcmUgPSBbXCJBYmlsaXR5IFNjb3JlIEltcHJvdmVtZW50XCIsIFwiQXJjaGV0eXBlIEZlYXR1cmVcIiwgXCJTdWJjbGFzcyBGZWF0dXJlXCJdO1xuICAgIGlmIChpZ25vcmUuc29tZShzdWIgPT4gbmFtZS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKHN1Yi50b0xvd2VyQ2FzZSgpKSkpIHtcbiAgICAgIHJldHVybiBuYW1lO1xuICAgIH1cbiAgXG4gICAgY29uc3QgYW5jaG9yID0gbmFtZVxuICAgICAgLnJlcGxhY2UoL1teXFx3XFxzXS9nLCBcIlwiKSAgICAgICAgICAgLy8gcmVtb3ZlIHB1bmN0dWF0aW9uIChrZWVwIHNwYWNlcylcbiAgICAgIC5yZXBsYWNlKC8tL2csIFwiIFwiKSAgICAgICAgICAgICAgICAvLyByZW1vdmUgZGFzaGVzXG4gICAgICAucmVwbGFjZSgvXFxzKy9nLCBcIiBcIikgICAgICAgICAgICAgIC8vIG5vcm1hbGl6ZSB3aGl0ZXNwYWNlXG4gICAgICAudHJpbSgpXG4gICAgICAucmVwbGFjZSgvXFxiXFx3L2csIGwgPT4gbC50b1VwcGVyQ2FzZSgpKTsgLy8gY2FwaXRhbGl6ZSB3b3Jkc1xuICBcbiAgICByZXR1cm4gYFtbIyR7YW5jaG9yfV1dYDtcbiAgfVxuXG5mdW5jdGlvbiB0b0hlYWRlckFuY2hvcihuYW1lOiBzdHJpbmcpOiBzdHJpbmcge1xuICByZXR1cm4gbmFtZVxuICAgIC5yZXBsYWNlKC9bXlxcd1xcc10vZywgXCJcIilcbiAgICAucmVwbGFjZSgvLS9nLCBcIiBcIilcbiAgICAucmVwbGFjZSgvXFxzKy9nLCBcIiBcIilcbiAgICAudHJpbSgpXG4gICAgLnJlcGxhY2UoL1xcYlxcdy9nLCBsID0+IGwudG9VcHBlckNhc2UoKSk7XG59XG4gIFxuZXhwb3J0IGNvbnN0IE9QVF9GRUFUVVJFX1RZUEVfVE9fRlVMTDogUmVjb3JkPHN0cmluZyxzdHJpbmc+ID0ge1xuICBBSTogICBcIkFydGlmaWNlciBJbmZ1c2lvblwiLFxuICBFRDogICBcIkVsZW1lbnRhbCBEaXNjaXBsaW5lXCIsXG4gIEVJOiAgIFwiRWxkcml0Y2ggSW52b2NhdGlvblwiLFxuICBNTTogICBcIk1ldGFtYWdpY1wiLFxuICBNVjogICBcIk1hbmV1dmVyXCIsXG4gIFwiTVY6QlwiOiAgICBcIk1hbmV1dmVyLCBCYXR0bGUgTWFzdGVyXCIsXG4gIFwiTVY6QzItVUFcIjpcIk1hbmV1dmVyLCBDYXZhbGllciBWMiAoVUEpXCIsXG4gIFwiQVM6VjEtVUFcIjpcIkFyY2FuZSBTaG90LCBWMSAoVUEpXCIsXG4gIFwiQVM6VjItVUFcIjpcIkFyY2FuZSBTaG90LCBWMiAoVUEpXCIsXG4gIEFTOiAgIFwiQXJjYW5lIFNob3RcIixcbiAgT1RIOiAgXCJPdGhlclwiLFxuICBcIkZTOkZcIjpcIkZpZ2h0aW5nIFN0eWxlOyBGaWdodGVyXCIsXG4gIFwiRlM6QlwiOlwiRmlnaHRpbmcgU3R5bGU7IEJhcmRcIixcbiAgXCJGUzpQXCI6XCJGaWdodGluZyBTdHlsZTsgUGFsYWRpblwiLFxuICBcIkZTOlJcIjpcIkZpZ2h0aW5nIFN0eWxlOyBSYW5nZXJcIixcbiAgUEI6ICAgXCJQYWN0IEJvb25cIixcbiAgT1I6ICAgXCJPbm9tYW5jeSBSZXNvbmFudFwiLFxuICBSTjogICBcIlJ1bmUgS25pZ2h0IFJ1bmVcIixcbiAgQUY6ICAgXCJBbGNoZW1pY2FsIEZvcm11bGFcIixcbiAgVFQ6ICAgXCJUcmF2ZWxlcidzIFRyaWNrXCIsXG59O1xuICBcbiAgZnVuY3Rpb24gcmVuZGVyRW50cmllcyhlbnRyaWVzOiBhbnlbXSk6IHN0cmluZyB7XG4gICAgcmV0dXJuIGVudHJpZXMubWFwKChlbnRyeSkgPT4ge1xuICAgICAgaWYgKHR5cGVvZiBlbnRyeSA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICByZXR1cm4gcmVwbGFjZTVlVGFncyhlbnRyeSk7XG4gICAgICB9XG4gIFxuICAgICAgaWYgKHR5cGVvZiBlbnRyeSA9PT0gXCJvYmplY3RcIikge1xuICAgICAgICBpZiAoaXNUeXBlZEVudHJ5KGVudHJ5KSAmJiBlbnRyeS50eXBlID09PSBcInJlZkNsYXNzRmVhdHVyZVwiKSB7XG4gICAgICAgICAgY29uc3QgW25hbWVdID0gZW50cnkuY2xhc3NGZWF0dXJlLnNwbGl0KFwifFwiKTtcbiAgICAgICAgICByZXR1cm4gYCpTZWUgZmVhdHVyZTogKioke25hbWV9KioqYDtcbiAgICAgICAgfVxuICBcbiAgICAgICAgaWYgKGlzVHlwZWRFbnRyeShlbnRyeSkgJiYgZW50cnkudHlwZSA9PT0gXCJlbnRyaWVzXCIpIHtcbiAgICAgICAgICBjb25zdCBpbm5lciA9IHJlbmRlckVudHJpZXMoZW50cnkuZW50cmllcyB8fCBbXSk7XG4gICAgICAgICAgcmV0dXJuIGAqKiR7ZW50cnkubmFtZX0qKlxcblxcbiR7aW5uZXJ9YDtcbiAgICAgICAgfVxuICBcbiAgICAgICAgaWYgKGlzVHlwZWRFbnRyeShlbnRyeSkgJiYgZW50cnkudHlwZSA9PT0gXCJlbnRyaWVzXCIpIHtcbiAgICAgICAgICBjb25zdCBpbm5lciA9IHJlbmRlckVudHJpZXMoZW50cnkuZW50cmllcyB8fCBbXSk7XG4gICAgICAgICAgcmV0dXJuIGA+ICoqJHtlbnRyeS5uYW1lfSoqXFxuPlxcbj4gJHtpbm5lci5zcGxpdChcIlxcblwiKS5qb2luKFwiXFxuPiBcIil9YDtcbiAgICAgICAgfVxuICBcbiAgICAgICAgLy8gZmFsbGJhY2tcbiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoZW50cnkuZW50cmllcykpIHtcbiAgICAgICAgICByZXR1cm4gcmVuZGVyRW50cmllcyhlbnRyeS5lbnRyaWVzKTtcbiAgICAgICAgfVxuICAgICAgfVxuICBcbiAgICAgIHJldHVybiBcIlwiO1xuICAgIH0pLmZpbHRlcihCb29sZWFuKS5qb2luKFwiXFxuXCIpO1xuICB9XG4gIFxuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlQ2xhc3NGaWxlKFxuICBqc29uOiBhbnksXG4gIGVkaXRpb25JZDogc3RyaW5nLFxuICBmaWxlTmFtZTogc3RyaW5nLFxuICBvcHRpb25hbEZlYXR1cmVzOiBhbnlbXVxuKTogUGFyc2VkTWFya2Rvd25GaWxlW10ge1xuICAvLyBtYWtlIGVkaXRpb25JZCBhdmFpbGFibGUgZm9yIGZyb250bWF0dGVyXG4gIChqc29uIGFzIGFueSkuX2VkaXRpb25JZCA9IGVkaXRpb25JZDtcblxuICAvLyB1bndyYXAgdGhlIHJlYWwgY2xhc3MgcmVjb3JkXG4gIGNvbnN0IGNscyA9IEFycmF5LmlzQXJyYXkoanNvbi5jbGFzcykgPyBqc29uLmNsYXNzWzBdIDoganNvbjtcbiAgLy8gZGVyaXZlIHRoZSBNYXJrZG93biBmaWxlbmFtZVxuICBjb25zdCBjbGFzc05hbWUgPVxuICAgIHR5cGVvZiBjbHMubmFtZSA9PT0gXCJzdHJpbmdcIlxuICAgICAgPyBjbHMubmFtZVxuICAgICAgOiBmaWxlTmFtZVxuICAgICAgPyBmaWxlTmFtZS5yZXBsYWNlKC9eY2xhc3MtLywgXCJcIikucmVwbGFjZSgvXFwuanNvbiQvLCBcIlwiKVxuICAgICAgOiBcIlVua25vd25cIjtcblxuICBjb25zdCBzdWJjbGFzc0ZpbGVzOiBQYXJzZWRNYXJrZG93bkZpbGVbXSA9IFtdO1xuXG4gIGNvbnN0IFBST0ZfQk9OVVNfQllfTEVWRUwgPSBbXG4gICAgXCIrMlwiLCBcIisyXCIsIFwiKzJcIiwgXCIrMlwiLFxuICAgIFwiKzNcIiwgXCIrM1wiLCBcIiszXCIsIFwiKzNcIixcbiAgICBcIis0XCIsIFwiKzRcIiwgXCIrNFwiLCBcIis0XCIsXG4gICAgXCIrNVwiLCBcIis1XCIsIFwiKzVcIiwgXCIrNVwiLFxuICAgIFwiKzZcIiwgXCIrNlwiLCBcIis2XCIsIFwiKzZcIlxuICBdO1xuICBcbiAgLy8gbm9ybWFsaXplIGhpdFx1MjAxMGRpY2VcbiAgY29uc3QgaGROdW0gICA9IGNscy5oZD8ubnVtYmVyID8/IDE7XG4gIGNvbnN0IGhkRmFjZXMgPSBjbHMuaGQ/LmZhY2VzICA/PyA2O1xuICBjb25zdCBoZFN0ciAgID0gYCR7aGROdW19ZCR7aGRGYWNlc31gO1xuICBjb25zdCBoZE1heCAgID0gaGROdW0gKiBoZEZhY2VzO1xuICBjb25zdCBoZEF2ZyAgID0gTWF0aC5jZWlsKChoZEZhY2VzICsgMSkgLyAyKTtcblxuY29uc3QgYmFzZUZNID0gYnVpbGRGTShjbHMsIENMQVNTX01FVEFfREVGUyk7XG5jb25zdCBmbSAgICAgPSB7IC4uLmJhc2VGTSwgaGQ6IGhkU3RyIH07XG5jb25zdCB5YW1sICAgPSBzZXJpYWxpemVGcm9udG1hdHRlcihmbSwgQ0xBU1NfTUVUQV9ERUZTKTtcblxuLy8gMSkgRGVjbGFyZSB5b3VyIGxpbmVzIGJ1ZmZlciBpbW1lZGlhdGVseVxuY29uc3QgbGluZXM6IHN0cmluZ1tdID0gW107XG5cbi8vIDQpIE5vdyBjYXJyeSBvbiB3aXRoIHRoZSByZXN0IG9mIHlvdXIgYm9keVxubGluZXMucHVzaChgIyAke2NsYXNzTmFtZX1gKTtcbmlmIChjbHMuc291cmNlKSBsaW5lcy5wdXNoKGAqKlNvdXJjZToqKiAke2Nscy5zb3VyY2V9YCk7XG5saW5lcy5wdXNoKGBgKTtcbmxpbmVzLnB1c2goYC0tLWApO1xuXG4gIC8vIFx1MjUwMFx1MjUwMFx1MjUwMCBIaXQgUG9pbnRzIFx1MjUwMFx1MjUwMFx1MjUwMFxuICBsaW5lcy5wdXNoKGAjIyBIaXQgUG9pbnRzYCk7XG4gIGxpbmVzLnB1c2goYCoqSGl0IERpY2U6KiogJHtoZFN0cn0gcGVyICR7Y2xhc3NOYW1lfSBsZXZlbGApO1xuICBsaW5lcy5wdXNoKGAqKkhpdCBQb2ludHMgYXQgMXN0IExldmVsOioqICR7aGRNYXh9ICsgeW91ciBDb25zdGl0dXRpb24gbW9kaWZpZXJgKTtcbiAgbGluZXMucHVzaChcbiAgICBgKipIaXQgUG9pbnRzIGF0IEhpZ2hlciBMZXZlbHM6KiogJHtoZFN0cn0gKG9yICR7aGRBdmd9KSArIHlvdXIgQ29uc3RpdHV0aW9uIG1vZGlmaWVyIHBlciBsZXZlbCBhZnRlciAxc3RgXG4gICk7XG5cbi8vIFx1MjUwMFx1MjUwMFx1MjUwMCBQcm9maWNpZW5jaWVzIFx1MjUwMFx1MjUwMFx1MjUwMFxubGluZXMucHVzaChgYCk7XG5saW5lcy5wdXNoKGAtLS1gKTtcbmxpbmVzLnB1c2goYCMjIFByb2ZpY2llbmNpZXNgKTtcblxuY29uc3Qgc3AgPSBjbHMuc3RhcnRpbmdQcm9maWNpZW5jaWVzID8/IHt9O1xuXG4vLyBBcm1vclxuaWYgKEFycmF5LmlzQXJyYXkoc3AuYXJtb3IpICYmIHNwLmFybW9yLmxlbmd0aCkge1xuICBsaW5lcy5wdXNoKGAtICoqQXJtb3I6KiogJHtzcC5hcm1vci5qb2luKFwiLCBcIil9YCk7XG59XG5cbi8vIFdlYXBvbnNcbmNvbnN0IHdlYXBvbkxpc3QgPSB1bmlmaWVkV2VhcG9uUHJvZnMoc3ApO1xuaWYgKHdlYXBvbkxpc3QubGVuZ3RoKSB7XG4gIGxpbmVzLnB1c2goYC0gKipXZWFwb25zOioqICR7d2VhcG9uTGlzdC5qb2luKFwiLCBcIil9YCk7XG59XG5cbi8vIFRvb2xzXG5jb25zdCB0b29sTGlzdCA9IHVuaWZpZWRUb29sUHJvZnMoc3ApO1xuaWYgKHRvb2xMaXN0Lmxlbmd0aCkge1xuICBsaW5lcy5wdXNoKGAtICoqVG9vbHM6KiogJHt0b29sTGlzdC5qb2luKFwiLCBcIil9YCk7XG59XG5cbi8vIFNhdmluZyBUaHJvd3NcbmNvbnN0IHNhdmVzID0gQXJyYXkuaXNBcnJheShjbHMucHJvZmljaWVuY3kpXG4gID8gY2xzLnByb2ZpY2llbmN5Lm1hcCgoazogc3RyaW5nKSA9PlxuICAgICAgKHsgc3RyOlwiU3RyZW5ndGhcIiwgZGV4OlwiRGV4dGVyaXR5XCIsIGNvbjpcIkNvbnN0aXR1dGlvblwiLFxuICAgICAgICAgaW50OlwiSW50ZWxsaWdlbmNlXCIsIHdpczpcIldpc2RvbVwiLCBjaGE6XCJDaGFyaXNtYVwiIH1ba10gfHwgay50b1VwcGVyQ2FzZSgpKVxuICAgIClcbiAgOiBbXTtcbmlmIChzYXZlcy5sZW5ndGgpIHtcbiAgbGluZXMucHVzaChgLSAqKlNhdmluZyBUaHJvd3M6KiogJHtzYXZlcy5qb2luKFwiLCBcIil9YCk7XG59XG5cblxuLy8gXHUyNTAwXHUyNTAwXHUyNTAwIFNraWxscyBcdTI1MDBcdTI1MDBcdTI1MDBcbntcbiAgLy8gMSkgZ3JhYiB3aGF0ZXZlciBhcnJheSBob2xkcyB0aGUgcmF3IG9iamVjdHMvc3RyaW5nc1xuICBjb25zdCByYXdTa2lsbHM6IGFueVtdID1cbiAgICBBcnJheS5pc0FycmF5KHNwLnNraWxsUHJvZmljaWVuY2llcykgPyBzcC5za2lsbFByb2ZpY2llbmNpZXNcbiAgICA6IEFycmF5LmlzQXJyYXkoc3Auc2tpbGxzKSAgICAgICAgICAgICA/IHNwLnNraWxsc1xuICAgIDogQXJyYXkuaXNBcnJheShzcC5za2lsbFByb2YpICAgICAgICAgID8gc3Auc2tpbGxQcm9mXG4gICAgOiBbXTtcblxuICAvLyAyKSBsb29rIGZvciB0aGUgXHUyMDFDY2hvb3NlIE4gZnJvbSBbXHUyMDI2XVx1MjAxRCBlbnRyeVxuICBjb25zdCBjaG9pY2VFbnRyeSA9IHJhd1NraWxscy5maW5kKFxuICAgIGUgPT4gZSAmJlxuICAgICAgICAgKHR5cGVvZiBlLmNob29zZSA9PT0gXCJvYmplY3RcIiB8fCB0eXBlb2YgZS5hbnkgPT09IFwibnVtYmVyXCIpXG4gICk7XG5cbiAgaWYgKGNob2ljZUVudHJ5KSB7XG4gICAgLy8gaG93IG1hbnkgdG8gY2hvb3NlXG4gICAgY29uc3QgY291bnQgPSBjaG9pY2VFbnRyeS5jaG9vc2U/LmNvdW50ID8/IGNob2ljZUVudHJ5LmFueSA/PyAxO1xuXG4gICAgLy8gcHVsbCB0aGUgYWN0dWFsIGxpc3Qgb2Ygb3B0aW9ucywgb3IgZmFsbCBiYWNrIHRvIHRoZSBnbG9iYWwgU0tJTExfT1BUSU9OU1xuICAgIGNvbnN0IG9wdGlvbnM6IHN0cmluZ1tdID0gQXJyYXkuaXNBcnJheShjaG9pY2VFbnRyeS5jaG9vc2U/LmZyb20pXG4gICAgICA/IGNob2ljZUVudHJ5LmNob29zZS5mcm9tLm1hcCgoczogc3RyaW5nKSA9PlxuICAgICAgICAgIC8vIHRpdGxlLWNhc2UgZWFjaCB3b3JkIChvciBqdXN0IHVzZSBzKVxuICAgICAgICAgIHMuc3BsaXQoXCIgXCIpLm1hcCh3ID0+IHdbMF0udG9VcHBlckNhc2UoKSArIHcuc2xpY2UoMSkpLmpvaW4oXCIgXCIpXG4gICAgICAgIClcbiAgICAgIDogU0tJTExfT1BUSU9OUztcblxuICAgIGxpbmVzLnB1c2goYC0gKipTa2lsbHMgKENob29zZSAke2NvdW50fSk6KiogJHtvcHRpb25zLmpvaW4oXCIsIFwiKX1gKTtcblxuICB9IGVsc2Uge1xuICAgIC8vIG5vIGNob29zZS1mcm9tIG9iamVjdCBcdTIxOTIgZmxhdCBsaXN0IGZyb20geW91ciB1bmlmaWVkIGhlbHBlclxuICAgIGNvbnN0IGZsYXQgPSB1bmlmaWVkU2tpbGxzKHNwKTtcbiAgICBpZiAoZmxhdC5sZW5ndGgpIHtcbiAgICAgIGxpbmVzLnB1c2goYC0gKipTa2lsbHM6KiogJHtmbGF0LmpvaW4oXCIsIFwiKX1gKTtcbiAgICB9XG4gIH1cbn1cblxuXG5cbiAgLy8gXHUyNTAwXHUyNTAwXHUyNTAwIEVxdWlwbWVudCBcdTI1MDBcdTI1MDBcdTI1MDBcbiAgaWYgKEFycmF5LmlzQXJyYXkoY2xzLnN0YXJ0aW5nRXF1aXBtZW50KSkge1xuICAgIGxpbmVzLnB1c2goYFxcbiMjIyBFcXVpcG1lbnRgKTtcbiAgICBjbHMuc3RhcnRpbmdFcXVpcG1lbnRcbiAgICAgIC5maWx0ZXIoKGU6IGFueSkgPT4gdHlwZW9mIGUgPT09IFwic3RyaW5nXCIpXG4gICAgICAuZm9yRWFjaCgoaXRlbTogc3RyaW5nKSA9PiBsaW5lcy5wdXNoKGAtICR7aXRlbX1gKSk7XG4gIH1cblxuLy8gXHUyNTAwXHUyNTAwXHUyNTAwIENsYXNzIFByb2dyZXNzaW9uIFx1MjUwMFx1MjUwMFx1MjUwMFxuY29uc3QgcHJvZ0dyb3VwcyA9IGNscy5jbGFzc1RhYmxlR3JvdXBzID8/IFtdO1xuY29uc3QgbWF4TGV2ZWwgPSAyMDtcblxuaWYgKCFwcm9nR3JvdXBzLmxlbmd0aCkge1xuICBsaW5lcy5wdXNoKGAqKE5vIGNsYXNzIHRhYmxlIHByb3ZpZGVkIGZvciB0aGlzIGNsYXNzLikqYCk7XG59IGVsc2Uge1xuICAvLyAxKSBCdWlsZCBsZXZlbCBcdTIxOTIgZmVhdHVyZSBtYXBcbiAgY29uc3QgZmVhdHVyZXNCeUxldmVsOiBSZWNvcmQ8bnVtYmVyLCBzdHJpbmdbXT4gPSB7fTtcbiAgZm9yIChjb25zdCBmZWF0IG9mIGNscy5jbGFzc0ZlYXR1cmVzID8/IFtdKSB7XG4gICAgY29uc3QgcmF3ID0gdHlwZW9mIGZlYXQgPT09IFwib2JqZWN0XCIgJiYgZmVhdC5jbGFzc0ZlYXR1cmUgPyBmZWF0LmNsYXNzRmVhdHVyZSA6IFN0cmluZyhmZWF0KTtcbiAgICBjb25zdCBbbmFtZSwsICxsdmxTdHJdID0gcmF3LnNwbGl0KFwifFwiKTtcbiAgICBjb25zdCBsdmwgPSBOdW1iZXIobHZsU3RyID8/IDApO1xuICAgIGlmICghZmVhdHVyZXNCeUxldmVsW2x2bF0pIGZlYXR1cmVzQnlMZXZlbFtsdmxdID0gW107XG4gICAgZmVhdHVyZXNCeUxldmVsW2x2bF0ucHVzaChuYW1lKTtcbiAgfVxuXG4gIC8vIDIpIEdhdGhlciBldmVyeSBjb2x1bW4gbGFiZWwgJiByb3cgdmFsdWVcbiAgY29uc3QgYWxsTGFiZWxzU2V0ID0gbmV3IFNldDxzdHJpbmc+KCk7XG4gIGNvbnN0IHJvd01hcHM6IFJlY29yZDxudW1iZXIsIFJlY29yZDxzdHJpbmcsIHN0cmluZz4+ID0ge307XG5cbiAgZm9yIChjb25zdCBncm91cCBvZiBwcm9nR3JvdXBzKSB7XG4gICAgY29uc3QgbGFiZWxzID0gQXJyYXkuaXNBcnJheShncm91cC5jb2xMYWJlbHMpXG4gICAgICA/IGdyb3VwLmNvbExhYmVscy5tYXAoKGw6IHN0cmluZykgPT4gcmVwbGFjZTVlVGFncyhsKSlcbiAgICAgIDogW107XG4gICAgY29uc3Qgcm93cyA9IEFycmF5LmlzQXJyYXkoZ3JvdXAucm93cylcbiAgICAgID8gZ3JvdXAucm93c1xuICAgICAgOiBBcnJheS5pc0FycmF5KGdyb3VwLnJvd3NTcGVsbFByb2dyZXNzaW9uKVxuICAgICAgICA/IGdyb3VwLnJvd3NTcGVsbFByb2dyZXNzaW9uXG4gICAgICAgIDogW107XG5cbiAgICBpZiAoIWxhYmVscy5sZW5ndGggfHwgIXJvd3MubGVuZ3RoKSBjb250aW51ZTtcblxuICAgIGZvciAobGV0IGx2bCA9IDA7IGx2bCA8IHJvd3MubGVuZ3RoOyBsdmwrKykge1xuICAgICAgY29uc3QgbGV2ZWxOdW0gPSBsdmwgKyAxO1xuICAgICAgaWYgKCFyb3dNYXBzW2xldmVsTnVtXSkgcm93TWFwc1tsZXZlbE51bV0gPSB7fTtcbiAgICAgIGNvbnN0IHJvd01hcCA9IHJvd01hcHNbbGV2ZWxOdW1dO1xuICAgICAgY29uc3QgY2VsbHMgPSByb3dzW2x2bF07XG5cbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGFiZWxzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGNvbnN0IGxhYmVsID0gbGFiZWxzW2ldO1xuICAgICAgICBsZXQgdmFsID0gXCJcIjtcbiAgICAgICAgY29uc3QgY2VsbCA9IGNlbGxzW2ldO1xuXG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KGNlbGwpKSB7XG4gICAgICAgICAgdmFsID0gY2VsbC5qb2luKFwiLCBcIik7XG4gICAgICAgIH0gZWxzZSBpZiAoY2VsbCAmJiB0eXBlb2YgY2VsbCA9PT0gXCJvYmplY3RcIiAmJiBcInZhbHVlXCIgaW4gY2VsbCkge1xuICAgICAgICAgIHZhbCA9IFN0cmluZyhjZWxsLnZhbHVlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB2YWwgPSBTdHJpbmcoY2VsbCA/PyBcIlwiKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGFsbExhYmVsc1NldC5hZGQobGFiZWwpO1xuICAgICAgICByb3dNYXBbbGFiZWxdID0gdmFsO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8vIDMpICoqRmlsdGVyIG91dCoqIGFueSBzcGVsbFx1MjAxMHRhYmxlIGNvbHVtbnNcbiAgY29uc3QgYWxsTGFiZWxzID0gQXJyYXkuZnJvbShhbGxMYWJlbHNTZXQpLmZpbHRlcihsYmwgPT5cbiAgICAhL0NhbnRyaXBzIEtub3dufFNwZWxscyBLbm93bnxcXGQrKHN0fG5kfHJkfHRoKS8udGVzdChsYmwpXG4gICk7XG5cbiAgLy8gNCkgQnVpbGQgZmluYWwgaGVhZGVyICYgcm93c1xuICBjb25zdCBtZXJnZWRMYWJlbHMgPSBbXCJMZXZlbFwiLCBcIlByb2ZpY2llbmN5IEJvbnVzXCIsIFwiQ2xhc3MgRmVhdHVyZXNcIiwgLi4uYWxsTGFiZWxzXTtcbiAgY29uc3QgbWVyZ2VkUm93czogc3RyaW5nW11bXSA9IFtdO1xuXG4gIGZvciAobGV0IGx2bCA9IDE7IGx2bCA8PSBtYXhMZXZlbDsgbHZsKyspIHtcbiAgICBjb25zdCBmZWF0dXJlTGlzdCA9IChmZWF0dXJlc0J5TGV2ZWxbbHZsXSA/PyBbXSkubWFwKGZvcm1hdEZlYXR1cmVMaW5rKTtcbiAgICBjb25zdCByb3dNYXAgPSByb3dNYXBzW2x2bF0gPz8ge307XG5cbiAgICBtZXJnZWRSb3dzLnB1c2goW1xuICAgICAgbHZsLnRvU3RyaW5nKCksXG4gICAgICBQUk9GX0JPTlVTX0JZX0xFVkVMW2x2bCAtIDFdIHx8IFwiXCIsXG4gICAgICBmZWF0dXJlTGlzdC5qb2luKFwiLCBcIikucmVwbGFjZSgvXFx8L2csIFwiJiMxMjQ7XCIpLFxuICAgICAgLi4uYWxsTGFiZWxzLm1hcChsYWJlbCA9PiByb3dNYXBbbGFiZWxdID8/IFwiXCIpXG4gICAgXSk7XG4gIH1cblxuICAvLyA1KSBSZW5kZXIgdGhlIGZlYXR1cmVzXHUyMDEwb25seSB0YWJsZVxubGluZXMucHVzaChgXFxuPiBbIWV4YW1wbGVdLSBDbGFzcyBQcm9ncmVzc2lvbiBUYWJsZWApO1xubGluZXMucHVzaChcbiAgcmVuZGVyTWFya2Rvd25UYWJsZSh7XG4gICAgdHlwZTogICAgICBcInRhYmxlXCIsXG4gICAgY2FwdGlvbjogICBcIlwiLFxuICAgIGNvbExhYmVsczogbWVyZ2VkTGFiZWxzLFxuICAgIHJvd3M6ICAgICAgbWVyZ2VkUm93cyxcbiAgfSkpO1xufVxuXG4vLyBcdTI1MDBcdTI1MDBcdTI1MDAgU3BlbGwgUHJvZ3Jlc3Npb24gXHUyNTAwXHUyNTAwXHUyNTAwXG4vLyAxKSBmaW5kIHRoZSB0d28gZ3JvdXBzXG5jb25zdCBjc0dyb3VwID0gcHJvZ0dyb3Vwcy5maW5kKChnOiBhbnkpID0+XG4gIEFycmF5LmlzQXJyYXkoZy5jb2xMYWJlbHMpICYmXG4gIGcuY29sTGFiZWxzLnNvbWUoKGxibDogYW55KSA9PiAvQ2FudHJpcHMgS25vd258U3BlbGxzIEtub3duLy50ZXN0KFN0cmluZyhsYmwpKSlcbik7XG5jb25zdCBzbG90R3JvdXAgPSBwcm9nR3JvdXBzLmZpbmQoKGc6IGFueSkgPT5cbiAgQXJyYXkuaXNBcnJheShnLmNvbExhYmVscykgJiZcbiAgZy50aXRsZSA9PT0gXCJTcGVsbCBTbG90cyBwZXIgU3BlbGwgTGV2ZWxcIlxuKTtcblxuaWYgKGNzR3JvdXAgJiYgc2xvdEdyb3VwKSB7XG4gIC8vIDIpIHJhdyBsYWJlbHNcbiAgY29uc3QgY3NMYWJlbHMgICA9IChjc0dyb3VwLmNvbExhYmVscyBhcyBzdHJpbmdbXSkubWFwKGwgPT4gcmVwbGFjZTVlVGFncyhsKSk7XG4gIGNvbnN0IHNsb3RMYWJlbHMgPSAoc2xvdEdyb3VwLmNvbExhYmVscyBhcyBzdHJpbmdbXSkubWFwKGwgPT4gcmVwbGFjZTVlVGFncyhsKSk7XG5cbiAgLy8gMykgcmF3IHJvd3NcbiAgY29uc3QgY3NSb3dzICAgPSAoY3NHcm91cC5yb3dzICAgICAgYXMgYW55W11bXSkgICAgICAgICAgICAgIHx8IFtdO1xuICBjb25zdCBzbG90Um93cyA9IChzbG90R3JvdXAucm93c1NwZWxsUHJvZ3Jlc3Npb24gYXMgYW55W11bXSkgfHwgW107XG5cbiAgLy8gNCkgYnVpbGQgaGVhZGVyOiBMZXZlbCArIGNhbnRyaXBzL3NwZWxscyArIGVhY2ggc2xvdCBsZXZlbFxuICBjb25zdCBjb2xMYWJlbHMgPSBbXCJMZXZlbFwiLCAuLi5jc0xhYmVscywgLi4uc2xvdExhYmVsc107XG5cbiAgLy8gNSkgYnVpbGQgZWFjaCByb3cgYnkgemlwcGluZyBjc1Jvd3NbaV0gKyBzbG90Um93c1tpXVxuICBjb25zdCBzcGVsbFJvd3M6IHN0cmluZ1tdW10gPSBbXTtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBNYXRoLm1heChjc1Jvd3MubGVuZ3RoLCBzbG90Um93cy5sZW5ndGgpOyBpKyspIHtcbiAgICBjb25zdCBsdmwgPSBTdHJpbmcoaSArIDEpO1xuICAgIGNvbnN0IGNzQ2VsbHMgICA9IGNzUm93c1tpXSAgID8gY3NSb3dzW2ldLm1hcChTdHJpbmcpICAgOiBjc0xhYmVscy5tYXAoXyA9PiBcIlwiKTtcbiAgICBjb25zdCBzbG90Q2VsbHMgPSBzbG90Um93c1tpXSA/IHNsb3RSb3dzW2ldLm1hcChTdHJpbmcpIDogc2xvdExhYmVscy5tYXAoXyA9PiBcIlwiKTtcbiAgICBzcGVsbFJvd3MucHVzaChbbHZsLCAuLi5jc0NlbGxzLCAuLi5zbG90Q2VsbHNdKTtcbiAgfVxuXG4gIC8vIDYpIHJlbmRlciFcbiAgbGluZXMucHVzaChgXFxuPiBbIXRpcF0tIFNwZWxsIFByb2dyZXNzaW9uIFRhYmxlYCk7XG4gIGxpbmVzLnB1c2goXG4gICAgcmVuZGVyTWFya2Rvd25UYWJsZSh7XG4gICAgICB0eXBlOiAgICAgIFwidGFibGVcIixcbiAgICAgIGNhcHRpb246ICAgXCJcIixcbiAgICAgIGNvbExhYmVsczogY29sTGFiZWxzLFxuICAgICAgcm93czogICAgICBzcGVsbFJvd3MsXG4gIH0pKTtcbn1cblxuXG4vLyBcdTI1MDBcdTI1MDBcdTI1MDAgU3ViY2xhc3NlcyBcdTI1MDBcdTI1MDBcdTI1MDBcbmNvbnN0IHN1YnMgPSBBcnJheS5pc0FycmF5KGpzb24uc3ViY2xhc3MpID8ganNvbi5zdWJjbGFzcyA6IFtdO1xuY29uc3Qgc3ViY2xhc3NGZWF0dXJlcyA9IEFycmF5LmlzQXJyYXkoanNvbi5zdWJjbGFzc0ZlYXR1cmUpXG4gID8ganNvbi5zdWJjbGFzc0ZlYXR1cmVcbiAgOiBqc29uLmxvb2t1cD8uc3ViY2xhc3NGZWF0dXJlID8/IFtdO1xuXG5mb3IgKGNvbnN0IHNjIG9mIHN1YnMpIHtcbiAgY29uc3Qgc3ViY2xhc3NOYW1lID0gc2MubmFtZTtcbiAgY29uc3Qgc3ViTGluZXM6IHN0cmluZ1tdID0gW107XG5cbiAgLy8gXHUyNTAwXHUyNTAwXHUyNTAwIEhlYWRlciBtZXRhZGF0YSBcdTI1MDBcdTI1MDBcdTI1MDBcbiAgc3ViTGluZXMucHVzaChgIyAke3N1YmNsYXNzTmFtZX1gKTtcbiAgc3ViTGluZXMucHVzaChgKipQYXJlbnQgQ2xhc3M6KiogW1ske2NsYXNzTmFtZX1dXWApO1xuICBpZiAoc2Muc291cmNlKSBzdWJMaW5lcy5wdXNoKGAqKlNvdXJjZToqKiAke3NjLnNvdXJjZX1gKTtcbiAgc3ViTGluZXMucHVzaChgYCk7IC8vIGJsYW5rIGxpbmVcblxuICAvLyBcdTI1MDBcdTI1MDBcdTI1MDAgSW50cm8gZW50cnkgKGxldmVsIDMgZmVhdHVyZSBkZXNjcmlwdGlvbikgXHUyNTAwXHUyNTAwXHUyNTAwXG4gIGNvbnN0IGludHJvID0gc3ViY2xhc3NGZWF0dXJlcy5maW5kKChmOiBhbnkpID0+XG4gICAgZi5uYW1lID09PSBzYy5uYW1lICYmXG4gICAgZi5sZXZlbCA9PT0gMyAmJlxuICAgIGYuc3ViY2xhc3NTaG9ydE5hbWUgPT09IHNjLnNob3J0TmFtZSAmJlxuICAgIGYuc3ViY2xhc3NTb3VyY2UgPT09IHNjLnNvdXJjZVxuICApO1xuICBpZiAoaW50cm8/LmVudHJpZXM/Lmxlbmd0aCkge1xuICAgIGNvbnN0IGludHJvVGV4dCA9IEFycmF5LmlzQXJyYXkoaW50cm8uZW50cmllcylcbiAgICAgID8gaW50cm8uZW50cmllcy5tYXAoKGU6IGFueSkgPT5cbiAgICAgICAgICB0eXBlb2YgZSA9PT0gXCJzdHJpbmdcIiA/IHJlcGxhY2U1ZVRhZ3MoZSkgOiBmb3JtYXRFbnRyeShlKVxuICAgICAgICApLmpvaW4oXCJcXG5cXG5cIilcbiAgICAgIDogZm9ybWF0RW50cnkoaW50cm8uZW50cmllcyk7XG4gICAgc3ViTGluZXMucHVzaChpbnRyb1RleHQsIGBgKTtcbiAgfVxuXG4gIC8vIFx1MjUwMFx1MjUwMFx1MjUwMCBPcHRpb25hbFx1MjAxMGZlYXR1cmUgYmxvY2sgXHUyNTAwXHUyNTAwXHUyNTAwXG4gIGNvbnN0IGNvZGUgPSAoT2JqZWN0LmVudHJpZXMoT1BUX0ZFQVRVUkVfVFlQRV9UT19GVUxMKSBhcyBbc3RyaW5nLHN0cmluZ11bXSlcbiAgICAuZmluZCgoWywgZnVsbF0pID0+XG4gICAgICBmdWxsLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoc3ViY2xhc3NOYW1lLnRvTG93ZXJDYXNlKCkpXG4gICAgKT8uWzBdO1xuICBpZiAoY29kZSkge1xuICAgIGNvbnN0IG1hdGNoZXMgPSBvcHRpb25hbEZlYXR1cmVzLmZpbHRlcihvZiA9PlxuICAgICAgQXJyYXkuaXNBcnJheShvZi5mZWF0dXJlVHlwZSkgJiYgb2YuZmVhdHVyZVR5cGUuaW5jbHVkZXMoY29kZSlcbiAgICApO1xuICAgIGlmIChtYXRjaGVzLmxlbmd0aCkge1xuICAgICAgc3ViTGluZXMucHVzaChgIyMgJHtzdWJjbGFzc05hbWV9IE9wdGlvbmFsIEZlYXR1cmVzYCk7XG4gICAgICBmb3IgKGNvbnN0IGZlYXQgb2YgbWF0Y2hlcykge1xuICAgICAgICBmb3IgKGNvbnN0IGVudHJ5IG9mIGZlYXQuZW50cmllcykge1xuICAgICAgICAgIGNvbnN0IHR4dCA9IHR5cGVvZiBlbnRyeSA9PT0gXCJzdHJpbmdcIlxuICAgICAgICAgICAgPyByZXBsYWNlNWVUYWdzKGVudHJ5KVxuICAgICAgICAgICAgOiBmb3JtYXRFbnRyeShlbnRyeSk7XG4gICAgICAgICAgc3ViTGluZXMucHVzaChgKioke2ZlYXQubmFtZX06KiogJHt0eHR9YCk7XG4gICAgICAgIH1cbiAgICAgICAgc3ViTGluZXMucHVzaChgYCk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLy8gXHUyNTAwXHUyNTAwXHUyNTAwIFN1YmNsYXNzIHByb2dyZXNzaW9uIHRhYmxlIFx1MjUwMFx1MjUwMFx1MjUwMFxuICBjb25zdCBwcm9nID0gc2Muc3ViY2xhc3NUYWJsZUdyb3VwcyA/PyBbXTtcbiAgaWYgKHByb2cubGVuZ3RoKSB7XG4gICAgY29uc3QgbGFiZWxzID0gbmV3IFNldDxzdHJpbmc+KCk7XG4gICAgY29uc3Qgcm93c01hcDogUmVjb3JkPG51bWJlciwgUmVjb3JkPHN0cmluZyxzdHJpbmc+PiA9IHt9O1xuICAgIGZvciAoY29uc3QgZyBvZiBwcm9nKSB7XG4gICAgICBjb25zdCBjb2xzID0gKGcuY29sTGFiZWxzID8/IFtdKS5tYXAocmVwbGFjZTVlVGFncyk7XG4gICAgICBjb25zdCByb3dzID0gQXJyYXkuaXNBcnJheShnLnJvd3MpXG4gICAgICAgID8gZy5yb3dzXG4gICAgICAgIDogQXJyYXkuaXNBcnJheShnLnJvd3NTcGVsbFByb2dyZXNzaW9uKVxuICAgICAgICAgID8gZy5yb3dzU3BlbGxQcm9ncmVzc2lvblxuICAgICAgICAgIDogW107XG4gICAgICByb3dzLmZvckVhY2goKHI6IGFueSwgaTogYW55KSA9PiB7XG4gICAgICAgIGNvbnN0IGx2bCA9IGkgKyAxO1xuICAgICAgICByb3dzTWFwW2x2bF0gPz89IHt9O1xuICAgICAgICByLmZvckVhY2goKGM6IGFueSwgajogbnVtYmVyKSA9PiB7XG4gICAgICAgICAgY29uc3QgbGFiID0gY29sc1tqXTtcbiAgICAgICAgICBpZiAoIWxhYikgcmV0dXJuO1xuICAgICAgICAgIGxhYmVscy5hZGQobGFiKTtcbiAgICAgICAgICByb3dzTWFwW2x2bF1bbGFiXSA9IHR5cGVvZiBjID09PSBcIm9iamVjdFwiICYmIGMgIT09IG51bGwgJiYgXCJ2YWx1ZVwiIGluIGNcbiAgICAgICAgICAgID8gU3RyaW5nKGMudmFsdWUpXG4gICAgICAgICAgICA6IFN0cmluZyhjID8/IFwiXCIpO1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH1cbiAgICBjb25zdCBoZHJzID0gQXJyYXkuZnJvbShsYWJlbHMpO1xuICAgIHN1YkxpbmVzLnB1c2goYCMjIFN1YmNsYXNzIFByb2dyZXNzaW9uYCk7XG4gICAgc3ViTGluZXMucHVzaChyZW5kZXJNYXJrZG93blRhYmxlKHtcbiAgICAgIHR5cGU6ICAgICAgXCJ0YWJsZVwiLFxuICAgICAgY2FwdGlvbjogICBcIlwiLFxuICAgICAgY29sTGFiZWxzOiBbXCJMZXZlbFwiLCAuLi5oZHJzXSxcbiAgICAgIHJvd3M6ICAgICAgQXJyYXkuZnJvbSh7IGxlbmd0aDogMjAgfSwgKF8sIGkpID0+IHtcbiAgICAgICAgY29uc3QgbHZsID0gaSArIDE7XG4gICAgICAgIHJldHVybiBbU3RyaW5nKGx2bCksIC4uLmhkcnMubWFwKGggPT4gcm93c01hcFtsdmxdPy5baF0gPz8gXCJcIildO1xuICAgICAgfSlcbiAgICB9KSk7XG4gIH1cblxuLy8gXHUyNTAwXHUyNTAwXHUyNTAwIERldGFpbGVkIGxldmVsXHUyMDEwYnlcdTIwMTBsZXZlbCBmZWF0dXJlcyBcdTI1MDBcdTI1MDBcdTI1MDBcbmNvbnN0IGZlYXRzQnlMdmw6IFJlY29yZDxudW1iZXIsIGFueVtdPiA9IHt9O1xuZm9yIChjb25zdCBmIG9mIHN1YmNsYXNzRmVhdHVyZXMpIHtcbiAgaWYgKFxuICAgIGYuc3ViY2xhc3NTaG9ydE5hbWUgPT09IHNjLnNob3J0TmFtZSAmJlxuICAgIGYuc3ViY2xhc3NTb3VyY2UgPT09IHNjLnNvdXJjZSAmJlxuICAgIGYuY2xhc3NOYW1lID09PSBjbGFzc05hbWVcbiAgKSB7XG4gICAgY29uc3QgbHZsID0gZi5sZXZlbCA/PyAwO1xuICAgIDsoZmVhdHNCeUx2bFtsdmxdID8/PSBbXSkucHVzaChmKTtcbiAgfVxufVxuXG5jb25zdCBJR05PUkVfVFJBSVRTID0gW1wiQWJpbGl0eSBTY29yZSBJbXByb3ZlbWVudFwiLCBcIkFyY2hldHlwZSBGZWF0dXJlXCIsIFwiU3ViY2xhc3MgRmVhdHVyZVwiXTtcbmNvbnN0IHRyYWl0TmFtZXMgPSBBcnJheS5mcm9tKFxuICBuZXcgU2V0KFxuICAgIE9iamVjdC52YWx1ZXMoZmVhdHNCeUx2bClcbiAgICAgIC5mbGF0KClcbiAgICAgIC5tYXAoKGY6IGFueSkgPT4gU3RyaW5nKGY/Lm5hbWUgfHwgXCJcIikudHJpbSgpKVxuICAgICAgLmZpbHRlcihuID0+IG4gJiYgIUlHTk9SRV9UUkFJVFMuc29tZShzID0+IG4udG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhzLnRvTG93ZXJDYXNlKCkpKSlcbiAgKVxuKTtcblxuY29uc3QgdHJhaXRMaW5rcyA9IHRyYWl0TmFtZXMubWFwKG4gPT4gYFtbJHtzdWJjbGFzc05hbWV9IyR7dG9IZWFkZXJBbmNob3Iobil9fCR7bn1dXWApO1xuXG4vLyBNaW5pbWFsIGZyb250bWF0dGVyIGZvciBzdWJjbGFzc2VzOyBGTV9GSUVMRFMga2VlcHMgb3JkZXJpbmcgY29uc2lzdGVudFxuY29uc3Qgc3ViWWFtbCA9IHNlcmlhbGl6ZUZyb250bWF0dGVyKHsgdHJhaXRzOiB0cmFpdExpbmtzIH0sIENMQVNTX01FVEFfREVGUyk7XG5cbmZvciAoY29uc3QgbHZsIG9mIE9iamVjdC5rZXlzKGZlYXRzQnlMdmwpLm1hcChOdW1iZXIpLnNvcnQoKGEsYik9PmEtYikpIHtcbiAgc3ViTGluZXMucHVzaChgLS0tYCwgYCMjIExldmVsICR7bHZsfWApO1xuXG4gIGZvciAoY29uc3QgZiBvZiBmZWF0c0J5THZsW2x2bF0pIHtcbiAgc3ViTGluZXMucHVzaChgIyMjICR7Zi5uYW1lfWApO1xuXG4gIC8vIFdhbGsgZWFjaCBlbnRyeSBmb3IgdGhpcyBmZWF0dXJlXG4gIGZvciAoY29uc3QgZW50IG9mIEFycmF5LmlzQXJyYXkoZi5lbnRyaWVzKSA/IGYuZW50cmllcyA6IFtmLmVudHJpZXNdKSB7XG4gICAgLy8gMSkgUGxhaW4gcGFyYWdyYXBoIGVudHJpZXNcbiAgICBpZiAodHlwZW9mIGVudCA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgc3ViTGluZXMucHVzaChyZXBsYWNlNWVUYWdzKGVudCkpO1xuICAgICAgY29udGludWU7XG4gICAgfVxuXG4gICAgLy8gMikgSWYgaXQncyB0aGUgXCJNYW5ldXZlcnNcIiBlbnRyaWVzXHUyMDEwYmxvY2ssIGluamVjdCB5b3VyIGxpc3QgaGVyZVxuICAgIGlmIChpc1R5cGVkRW50cnkoZW50KSAmJiBlbnQudHlwZSA9PT0gXCJlbnRyaWVzXCIgJiYgL15NYW5ldXZlcnMkL2kudGVzdChlbnQubmFtZSkpIHtcbiAgICAgIC8vIGZpcnN0IHByaW50IHRoZSBzdWJcdTIwMTBoZWFkaW5nIGFuZCBhbnkgdGV4dCBpdCBoYWRcbiAgICAgIHN1YkxpbmVzLnB1c2goYCMjIyMjICR7ZW50Lm5hbWV9YCk7XG4gICAgICBmb3IgKGNvbnN0IHR4dCBvZiBBcnJheS5pc0FycmF5KGVudC5lbnRyaWVzKSA/IGVudC5lbnRyaWVzIDogW2VudC5lbnRyaWVzXSkge1xuICAgICAgICBzdWJMaW5lcy5wdXNoKHR5cGVvZiB0eHQgPT09IFwic3RyaW5nXCJcbiAgICAgICAgICA/IHJlcGxhY2U1ZVRhZ3ModHh0KVxuICAgICAgICAgIDogZm9ybWF0RW50cnkodHh0KSk7XG4gICAgICB9XG5cbiAgICAgIC8vIG5vdyBpbmplY3QgdGhlIGZ1bGwgbWFuZXV2ZXIgZGVmaW5pdGlvbnMgZm9yIHRoaXMgc3ViY2xhc3NcbiAgICAgIGNvbnN0IGNvZGUgPSAoT2JqZWN0LmVudHJpZXMoT1BUX0ZFQVRVUkVfVFlQRV9UT19GVUxMKSBhcyBbc3RyaW5nLHN0cmluZ11bXSlcbiAgICAgICAgLmZpbmQoKFssIGZ1bGxdKSA9PlxuICAgICAgICAgIGZ1bGwudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhzdWJjbGFzc05hbWUudG9Mb3dlckNhc2UoKSlcbiAgICAgICAgKT8uWzBdO1xuICAgICAgaWYgKGNvZGUpIHtcbiAgICAgICAgY29uc3QgbWF0Y2hlcyA9IG9wdGlvbmFsRmVhdHVyZXMuZmlsdGVyKG9mID0+XG4gICAgICAgICAgQXJyYXkuaXNBcnJheShvZi5mZWF0dXJlVHlwZSkgJiYgb2YuZmVhdHVyZVR5cGUuaW5jbHVkZXMoY29kZSlcbiAgICAgICAgKTtcbiAgICAgICAgZm9yIChjb25zdCBmZWF0RGVmIG9mIG1hdGNoZXMpIHtcbiAgICAgICAgICBmb3IgKGNvbnN0IHN1YiBvZiBmZWF0RGVmLmVudHJpZXMpIHtcbiAgICAgICAgICAgIGNvbnN0IGxpbmUgPSB0eXBlb2Ygc3ViID09PSBcInN0cmluZ1wiXG4gICAgICAgICAgICAgID8gcmVwbGFjZTVlVGFncyhzdWIpXG4gICAgICAgICAgICAgIDogZm9ybWF0RW50cnkoc3ViKTtcbiAgICAgICAgICAgIHN1YkxpbmVzLnB1c2goYCoqJHtmZWF0RGVmLm5hbWV9OioqICR7bGluZX1gKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgc3ViTGluZXMucHVzaChcIlwiKTsgLy8gc3BhY2VyXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cblxuICAgIC8vIDMpIEFueSBvdGhlciBuZXN0ZWQgXCJlbnRyaWVzXCIgYmxvY2tzXG4gICAgaWYgKGlzVHlwZWRFbnRyeShlbnQpICYmIGVudC50eXBlID09PSBcImVudHJpZXNcIiAmJiBlbnQubmFtZSkge1xuICAgICAgc3ViTGluZXMucHVzaChgIyMjIyMgJHtlbnQubmFtZX1gKTtcbiAgICAgIGZvciAoY29uc3QgZTIgb2YgQXJyYXkuaXNBcnJheShlbnQuZW50cmllcykgPyBlbnQuZW50cmllcyA6IFtlbnQuZW50cmllc10pIHtcbiAgICAgICAgc3ViTGluZXMucHVzaChmb3JtYXRFbnRyeShlMikpO1xuICAgICAgfVxuICAgICAgY29udGludWU7XG4gICAgfVxuXG4gICAgLy8gNCkgSW5zZXRzXG4gICAgaWYgKGlzVHlwZWRFbnRyeShlbnQpICYmIGVudC50eXBlID09PSBcImluc2V0XCIgJiYgZW50Lm5hbWUpIHtcbiAgICAgIGNvbnN0IGlubmVyID0gQXJyYXkuaXNBcnJheShlbnQuZW50cmllcykgPyBlbnQuZW50cmllcyA6IFtlbnQuZW50cmllc107XG4gICAgICBzdWJMaW5lcy5wdXNoKGA+ICoqJHtlbnQubmFtZX0qKmApO1xuICAgICAgaW5uZXIuZm9yRWFjaCgoZTI6IGFueSkgPT4gc3ViTGluZXMucHVzaChgPiAke2Zvcm1hdEVudHJ5KGUyKX1gKSk7XG4gICAgICBjb250aW51ZTtcbiAgICB9XG5cbiAgICAvLyA1KSBGYWxsYmFja1xuICAgIGNvbnN0IGZiID0gZm9ybWF0RW50cnkoZW50KTtcbiAgICBpZiAoZmIpIHN1YkxpbmVzLnB1c2goZmIpO1xuICB9XG4gIH1cbn1cblxuXG4gIC8vIFx1MjUwMFx1MjUwMFx1MjUwMCBDbGVhbiB1cCAmIHB1c2ggXHUyNTAwXHUyNTAwXHUyNTAwXG4gIGNvbnN0IHN1YmNsYXNzQ29udGVudEJvZHkgPSBzdWJMaW5lc1xuICAgIC5qb2luKFwiXFxuXFxuXCIpXG4gICAgLnJlcGxhY2UoL1xcbnszLH0vZywgXCJcXG5cXG5cIik7XG5cbiAgY29uc3Qgc3ViY2xhc3NDb250ZW50ID0gYC0tLVxcbiR7c3ViWWFtbH1cXG4tLS1cXG5cXG4ke3N1YmNsYXNzQ29udGVudEJvZHl9YDtcblxuICBzdWJjbGFzc0ZpbGVzLnB1c2goe1xuICAgIHBhdGg6IGBDbGFzc2VzLyR7Y2xhc3NOYW1lfS9TdWJjbGFzc2VzLyR7c3ViY2xhc3NOYW1lfS5tZGAsXG4gICAgY29udGVudDogc3ViY2xhc3NDb250ZW50XG4gIH0pO1xufVxuXG5cblxuLy8gXHUyNTAwXHUyNTAwXHUyNTAwIFN1YmNsYXNzZXMgU3VtbWFyeSBcdTI1MDBcdTI1MDBcdTI1MDBcbmlmIChzdWJzLmxlbmd0aCkge1xuICBjb25zdCBsaW5rcyA9IHN1YnMubWFwKChzYzogYW55KSA9PlxuICAgIGBbW1N1YmNsYXNzZXMvJHtzYy5uYW1lLnJlcGxhY2UoL1tcXFxcL10vZywgXCItXCIpfXwke3NjLm5hbWV9XV1gXG4gICk7XG4gIGxpbmVzLnB1c2goYFxcbioqU3ViY2xhc3NlczoqKiAke2xpbmtzLmpvaW4oXCIsIFwiKX1gKTtcbn1cblxuXG4gIC8vIEdldCBmdWxsIGNsYXNzIGZlYXR1cmUgZGVmaW5pdGlvbnNcbmNvbnN0IGFsbEZlYXR1cmVzID0gQXJyYXkuaXNBcnJheShqc29uLmNsYXNzRmVhdHVyZSkgPyBqc29uLmNsYXNzRmVhdHVyZSA6IGpzb24ubG9va3VwPy5jbGFzc0ZlYXR1cmUgPz8gW107XG5jb25zdCBmZWF0dXJlc0J5TGV2ZWw6IFJlY29yZDxudW1iZXIsIGFueVtdPiA9IHt9O1xuXG5mb3IgKGNvbnN0IGVudHJ5IG9mIGFsbEZlYXR1cmVzKSB7XG4gIGlmIChlbnRyeS5jbGFzc05hbWUgIT09IGNsYXNzTmFtZSkgY29udGludWU7XG4gIGNvbnN0IGx2bCA9IGVudHJ5LmxldmVsID8/IDA7XG4gIGlmICghZmVhdHVyZXNCeUxldmVsW2x2bF0pIGZlYXR1cmVzQnlMZXZlbFtsdmxdID0gW107XG4gIGZlYXR1cmVzQnlMZXZlbFtsdmxdLnB1c2goZW50cnkpO1xufVxuXG5cbi8vIFx1MjUwMFx1MjUwMFx1MjUwMCBMZXZlbCBGZWF0dXJlcyBcdTI1MDBcdTI1MDBcdTI1MDBcbmxpbmVzLnB1c2goYGApO1xubGluZXMucHVzaChgLS0tYCk7XG5saW5lcy5wdXNoKGAjIyBMZXZlbCBGZWF0dXJlc2ApO1xuXG5jb25zdCBsZXZlbHMgPSBPYmplY3RcbiAgLmtleXMoZmVhdHVyZXNCeUxldmVsKVxuICAubWFwKG4gPT4gK24pXG4gIC5zb3J0KChhLCBiKSA9PiBhIC0gYik7XG5cbmZvciAoY29uc3QgbHZsIG9mIGxldmVscykge1xuICBsaW5lcy5wdXNoKGAjIyMgTGV2ZWwgJHtsdmx9YCk7XG5cbiAgZm9yIChjb25zdCBmZWF0IG9mIGZlYXR1cmVzQnlMZXZlbFtsdmxdKSB7XG4gICAgLy8gRmVhdHVyZSBoZWFkZXJcbiAgICBsaW5lcy5wdXNoKGAjIyMjICR7ZmVhdC5uYW1lfWApO1xuXG4gICAgLy8gRW5zdXJlIGVudHJpZXMgaXMgYWx3YXlzIGFuIGFycmF5XG4gICAgY29uc3QgZW50cmllcyA9IEFycmF5LmlzQXJyYXkoZmVhdC5lbnRyaWVzKVxuICAgICAgPyBmZWF0LmVudHJpZXNcbiAgICAgIDogW2ZlYXQuZW50cmllc107XG5cbiAgICBmb3IgKGNvbnN0IGVudCBvZiBlbnRyaWVzKSB7XG4gICAgICAvLyAxKSBQbGFpbi10ZXh0IHBhcmFncmFwaFxuICAgICAgICBpZiAodHlwZW9mIGVudCA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgIGNvbnN0IHR4dCA9IGZvcm1hdEVudHJ5KGVudCkudHJpbSgpO1xuICAgICAgICAgIC8vIHNraXAgYW55IHB1cmUtYnJhY2UgbGluZXNcbiAgICAgICAgICBpZiAodHh0ID09PSBcIntcIiB8fCB0eHQgPT09IFwifVwiKSBjb250aW51ZTtcbiAgICAgICAgICBsaW5lcy5wdXNoKHR4dCk7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoaXNUeXBlZEVudHJ5KGVudCkgJiYgZW50LnR5cGUgPT09IFwibGlzdFwiICYmIEFycmF5LmlzQXJyYXkoZW50Lml0ZW1zKSkge1xuICAgIGZvciAoY29uc3QgaXRlbSBvZiBlbnQuaXRlbXMpIHtcbiAgICAgIGxpbmVzLnB1c2goYC0gJHtyZXBsYWNlNWVUYWdzKGl0ZW0pfWApO1xuICAgIH1cbiAgICBjb250aW51ZTtcbiAgfVxuICAgICAgLy8gXHUyNTAwXHUyNTAwXHUyNTAwIGluc2lkZSB5b3VyIGZvciAoY29uc3QgZW50IG9mIGVudHJpZXMpIGxvb3AgXHUyNTAwXHUyNTAwXHUyNTAwXG4gICAgICBpZiAoaXNUeXBlZEVudHJ5KGVudCkgJiYgZW50LnR5cGUgPT09IFwib3B0aW9uc1wiKSB7XG4gIGlmIChlbnQuY291bnQpIHtcbiAgICBsaW5lcy5wdXNoKFwiXCIpO1xuICAgIGxpbmVzLnB1c2goYCoqQ2hvb3NlICR7ZW50LmNvdW50fSBvZiB0aGUgZm9sbG93aW5nIG9wdGlvbnM6KipgKTtcbiAgICBsaW5lcy5wdXNoKFwiXCIpO1xuICB9XG5cbiAgZm9yIChjb25zdCBvcHRSZWYgb2YgQXJyYXkuaXNBcnJheShlbnQuZW50cmllcykgPyBlbnQuZW50cmllcyA6IFtlbnQuZW50cmllc10pIHtcbiAgICBpZiAob3B0UmVmLnR5cGUgPT09IFwicmVmT3B0aW9uYWxmZWF0dXJlXCIpIHtcbiAgICAgIGNvbnN0IFtvcHROYW1lLCBvcHRTcmNdID0gb3B0UmVmLm9wdGlvbmFsZmVhdHVyZS5zcGxpdChcInxcIik7XG4gICAgICBjb25zdCBmZWF0RGVmID0gb3B0aW9uYWxGZWF0dXJlcy5maW5kKFxuICAgICAgICBmID0+IGYubmFtZSA9PT0gb3B0TmFtZSAmJiAoIW9wdFNyYyB8fCBmLnNvdXJjZSA9PT0gb3B0U3JjKVxuICAgICAgKTtcblxuICAgICAgaWYgKGZlYXREZWYpIHtcbiAgICAgICAgLy8gbG9vcCB0aHJvdWdoIGVhY2ggbGluZSBpbiB0aGUgZmVhdHVyZVx1MjAxOXMgZW50cmllc1tdXG4gICAgICAgIGZlYXREZWYuZW50cmllcy5mb3JFYWNoKChzdWJFbnRyeTogYW55LCBpZHg6IGFueSkgPT4ge1xuICAgICAgICAgIC8vIHJlbmRlciB0ZXh0XG4gICAgICAgICAgY29uc3QgdGV4dCA9IHR5cGVvZiBzdWJFbnRyeSA9PT0gXCJzdHJpbmdcIlxuICAgICAgICAgICAgPyByZXBsYWNlNWVUYWdzKHN1YkVudHJ5KVxuICAgICAgICAgICAgOiBmb3JtYXRFbnRyeShzdWJFbnRyeSk7XG5cbiAgICAgICAgICBpZiAoaWR4ID09PSAwKSB7XG4gICAgICAgICAgICAvLyBmaXJzdCBsaW5lOiBib2xkZWQgbmFtZSArIGRlc2NyaXB0aW9uXG4gICAgICAgICAgICBsaW5lcy5wdXNoKGAtICoqJHtmZWF0RGVmLm5hbWV9OioqICR7dGV4dH1gKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gc3Vic2VxdWVudCBsaW5lczogbmVzdGVkIGJ1bGxldFxuICAgICAgICAgICAgbGluZXMucHVzaChgICAtICR7dGV4dH1gKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICBsaW5lcy5wdXNoKFwiXCIpOyAvLyBibGFuayBsaW5lIGFmdGVyIGVhY2ggZmVhdHVyZSBibG9ja1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gZmFsbGJhY2sgaWYgbm90IGZvdW5kXG4gICAgICAgIGxpbmVzLnB1c2goYCoqJHtvcHROYW1lfToqKmApO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICAvLyBub25cdTIwMTByZWZPcHRpb25hbGZlYXR1cmUgZmFsbGJhY2tcbiAgICAgIGNvbnN0IHR4dCA9IGZvcm1hdEVudHJ5KG9wdFJlZik7XG4gICAgICBpZiAodHh0KSBsaW5lcy5wdXNoKGAtICR7dHh0fWApO1xuICAgIH1cbiAgfVxuXG4gIGNvbnRpbnVlO1xufVxuXG5cbiAgICAgIC8vIDMpIFN0YW5kYWxvbmUgcmVmT3B0aW9uYWxmZWF0dXJlXG4gICAgICBpZiAoaXNUeXBlZEVudHJ5KGVudCkgJiYgZW50LnR5cGUgPT09IFwicmVmT3B0aW9uYWxmZWF0dXJlXCIpIHtcbiAgICAgICAgY29uc3QgW25hbWVdID0gZW50Lm9wdGlvbmFsZmVhdHVyZS5zcGxpdChcInxcIik7XG4gICAgICAgIGxpbmVzLnB1c2goYC0gW1ske25hbWV9fCR7bmFtZX1dXWApO1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgLy8gNCkgTmVzdGVkIFx1MjAxQ2VudHJpZXNcdTIwMUQgYmxvY2sgd2l0aCBpdHMgb3duIGhlYWRpbmdcbiAgICAgIGlmIChpc1R5cGVkRW50cnkoZW50KSAmJiBlbnQudHlwZSA9PT0gXCJlbnRyaWVzXCIgJiYgZW50Lm5hbWUpIHtcbiAgICAgICAgbGluZXMucHVzaChgIyMjIyMgJHtlbnQubmFtZX1gKTtcbiAgICAgICAgY29uc3QgaW5uZXIgPSBBcnJheS5pc0FycmF5KGVudC5lbnRyaWVzKSA/IGVudC5lbnRyaWVzIDogW2VudC5lbnRyaWVzXTtcbiAgICAgICAgZm9yIChjb25zdCBlMiBvZiBpbm5lcikge1xuICAgICAgICAgIGxpbmVzLnB1c2goZm9ybWF0RW50cnkoZTIpKTtcbiAgICAgICAgfVxuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgLy8gNSkgRmFsbGJhY2sgZm9yIGFueSBvdGhlciBvYmplY3Qgc2hhcGVcbiAgICAgIGNvbnN0IGZhbGxiYWNrID0gZm9ybWF0RW50cnkoZW50KTtcbiAgICAgIGlmIChmYWxsYmFjaykgbGluZXMucHVzaChmYWxsYmFjayk7XG4gICAgfVxuXG4gICAgLy8gQmxhbmsgbGluZSBhZnRlciBlYWNoIGZlYXR1cmVcbiAgICBsaW5lcy5wdXNoKGBgKTtcbiAgfSBcblxuICAvLyBEaXZpZGVyIGJldHdlZW4gbGV2ZWxzXG4gIGxpbmVzLnB1c2goYC0tLWApO1xufVxuXG5cblxuICAvLyBzdGl0Y2gsIHJlcGxhY2UgdGFncywgcmV0dXJuXG4gIGxldCBjb250ZW50ID0gYC0tLVxcbiR7eWFtbH1cXG4tLS1cXG5cXG4ke2xpbmVzLmpvaW4oXCJcXG5cIil9YDtcbiAgLy8gY29tbWVudCB0aGlzIG91dCB3aGlsZSBkZWJ1Z2dpbmc6XG4gIGNvbnRlbnQgPSByZXBsYWNlNWVUYWdzKGNvbnRlbnQpO1xuXG4gIGNvbnRlbnQgPSBjb250ZW50XG4gIC5yZXBsYWNlKC9cXG57Myx9L2csICdcXG5cXG4nKSAgIC8vIG5vIG1vcmUgdGhhbiAyIG5ld2xpbmVzIGluIGEgcm93XG4gIC5yZXBsYWNlKC9cXG4gK1xcbi9nLCAnXFxuXFxuJyk7ICAvLyB0cmltIGJsYW5rIGxpbmVzIHdpdGggdHJhaWxpbmcgc3BhY2VzXG5cbiAgcmV0dXJuIFtcbiAgICB7XG4gICAgICBwYXRoOiBgQ2xhc3Nlcy8ke2NsYXNzTmFtZX0vJHtjbGFzc05hbWV9Lm1kYCxcbiAgICAgIGNvbnRlbnQsXG4gICAgfSxcbiAgICAuLi5zdWJjbGFzc0ZpbGVzLFxuICBdO1xuICBcbn1cbiIsICIvLzVlIDIwMjUgcnVsZXNcblxuaW1wb3J0IHR5cGUgeyBQYXJzZWRNYXJrZG93bkZpbGUgfSBmcm9tIFwiLi4vLi4vdHlwZXNcIjtcbmltcG9ydCB7IHJlcGxhY2U1ZVRhZ3MgfSBmcm9tIFwiLi9oZWxwZXJzL3RhZ1JlcGxhY2VyXCI7XG5cbi8qKlxuICogUGFyc2UgYWN0aW9ucy5qc29uIGludG8gYSBzaW5nbGUgTWFya2Rvd24gbm90ZSB3aXRoICMjIGhlYWRlcnMgZm9yIGVhY2ggYWN0aW9uLFxuICogaGFuZGxpbmcgbmVzdGVkIGVudHJpZXMsIGluc2V0cywgbGlzdHMsIHRhYmxlcywgYW5kIGFkZGluZyBzZXBhcmF0b3JzLlxuICovXG5leHBvcnQgZnVuY3Rpb24gcGFyc2VBY3Rpb25zRmlsZShqc29uOiBhbnksIGVkaXRpb25JZDogc3RyaW5nKTogUGFyc2VkTWFya2Rvd25GaWxlW10ge1xuICBpZiAoIUFycmF5LmlzQXJyYXkoanNvbi5hY3Rpb24pKSByZXR1cm4gW107XG5cbiAgY29uc3QgbGluZXM6IHN0cmluZ1tdID0gW107XG5cbiAgLyoqIFJlY3Vyc2l2ZWx5IGVtaXQgYW55IGJsb2NrOiB0ZXh0LCBsaXN0LCB0YWJsZSwgZW50cmllcy9pbnNldCwgb3IgZmFsbGJhY2sgKi9cbiAgZnVuY3Rpb24gZW1pdEJsb2NrKGJsb2NrOiBhbnkpIHtcbiAgICBpZiAoIWJsb2NrKSByZXR1cm47XG5cbiAgICAvLyAxKSBQbGFpbiB0ZXh0IHBhcmFncmFwaHNcbiAgICBpZiAodHlwZW9mIGJsb2NrID09PSBcInN0cmluZ1wiKSB7XG4gICAgICBmb3IgKGNvbnN0IHBhcmEgb2YgYmxvY2suc3BsaXQoL1xcbnsyLH0vKSkge1xuICAgICAgICBjb25zdCB0ID0gcGFyYS50cmltKCk7XG4gICAgICAgIGlmICh0KSB7XG4gICAgICAgICAgbGluZXMucHVzaChyZXBsYWNlNWVUYWdzKHQpKTtcbiAgICAgICAgICBsaW5lcy5wdXNoKFwiXCIpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gMikgQnVsbGV0IGxpc3RcbiAgICBpZiAoYmxvY2sudHlwZSA9PT0gXCJsaXN0XCIgJiYgQXJyYXkuaXNBcnJheShibG9jay5pdGVtcykpIHtcbiAgICAgIGZvciAoY29uc3QgaXRlbSBvZiBibG9jay5pdGVtcykge1xuICAgICAgICBsaW5lcy5wdXNoKGAtICR7cmVwbGFjZTVlVGFncyhpdGVtKX1gKTtcbiAgICAgIH1cbiAgICAgIGxpbmVzLnB1c2goXCJcIik7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gMykgVGFibGVcbiAgICBpZiAoYmxvY2sudHlwZSA9PT0gXCJ0YWJsZVwiICYmIEFycmF5LmlzQXJyYXkoYmxvY2sucm93cykpIHtcbiAgICAgIGNvbnN0IGhlYWRlcnMgPSBibG9jay5jb2xMYWJlbHMgfHwgW107XG4gICAgICBsaW5lcy5wdXNoKGB8ICR7aGVhZGVycy5qb2luKFwiIHwgXCIpfSB8YCk7XG4gICAgICBsaW5lcy5wdXNoKGB8ICR7aGVhZGVycy5tYXAoKCkgPT4gXCItLS1cIikuam9pbihcIiB8IFwiKX0gfGApO1xuICAgICAgZm9yIChjb25zdCByb3cgb2YgYmxvY2sucm93cykge1xuICAgICAgICBsaW5lcy5wdXNoKGB8ICR7cm93LmpvaW4oXCIgfCBcIil9IHxgKTtcbiAgICAgIH1cbiAgICAgIGxpbmVzLnB1c2goXCJcIik7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gNCkgTmVzdGVkIGVudHJpZXMvaW5zZXRcbiAgICBpZiAoKGJsb2NrLnR5cGUgPT09IFwiZW50cmllc1wiIHx8IGJsb2NrLnR5cGUgPT09IFwiaW5zZXRcIikgJiYgQXJyYXkuaXNBcnJheShibG9jay5lbnRyaWVzKSkge1xuICAgICAgaWYgKGJsb2NrLm5hbWUpIHtcbiAgICAgICAgaWYgKGxpbmVzW2xpbmVzLmxlbmd0aCAtIDFdID09PSBcIlwiKSBsaW5lcy5wb3AoKTtcbiAgICAgICAgbGluZXMucHVzaChgIyMjICR7YmxvY2submFtZX1gKTtcbiAgICAgIH1cbiAgICAgIGZvciAoY29uc3QgY2hpbGQgb2YgYmxvY2suZW50cmllcykge1xuICAgICAgICBlbWl0QmxvY2soY2hpbGQpO1xuICAgICAgfVxuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIDUpIEZhbGxiYWNrIGZvciBhbnkgb3RoZXIgb2JqZWN0IG9yIGFycmF5XG4gICAgY29uc3QgdHh0ID0gQXJyYXkuaXNBcnJheShibG9jaylcbiAgICAgID8gYmxvY2suam9pbihcIiBcIilcbiAgICAgIDogdHlwZW9mIGJsb2NrID09PSBcIm9iamVjdFwiXG4gICAgICA/IEpTT04uc3RyaW5naWZ5KGJsb2NrKVxuICAgICAgOiBTdHJpbmcoYmxvY2spO1xuICAgIGxpbmVzLnB1c2gocmVwbGFjZTVlVGFncyh0eHQpKTtcbiAgICBsaW5lcy5wdXNoKFwiXCIpO1xuICB9XG5cbiAgLy8gTG9vcCB0aHJvdWdoIGVhY2ggYWN0aW9uXG4gIGZvciAoY29uc3QgYWN0aW9uIG9mIGpzb24uYWN0aW9uKSB7XG4gICAgbGluZXMucHVzaChgIyMgJHthY3Rpb24ubmFtZX1gKTtcbiAgICBmb3IgKGNvbnN0IGVudHJ5IG9mIEFycmF5LmlzQXJyYXkoYWN0aW9uLmVudHJpZXMpID8gYWN0aW9uLmVudHJpZXMgOiBbYWN0aW9uLmVudHJpZXNdKSB7XG4gICAgICBlbWl0QmxvY2soZW50cnkpO1xuICAgIH1cblxuICAgIC8vIFx1MjAxQ1NlZSBBbHNvXHUyMDFEIHNlY3Rpb25cbiAgICBpZiAoQXJyYXkuaXNBcnJheShhY3Rpb24uc2VlQWxzb0FjdGlvbikpIHtcbiAgICAgIGxpbmVzLnB1c2goXCIqKlNlZSBBbHNvOioqXCIpO1xuICAgICAgbGluZXMucHVzaChcIlwiKTtcbiAgICAgIGZvciAoY29uc3QgcmVmIG9mIGFjdGlvbi5zZWVBbHNvQWN0aW9uKSB7XG4gICAgICAgIGNvbnN0IFtuYW1lXSA9IFN0cmluZyhyZWYpLnNwbGl0KFwifFwiKTtcbiAgICAgICAgbGluZXMucHVzaChgLSBbWyR7bmFtZX1dXWApO1xuICAgICAgfVxuICAgICAgbGluZXMucHVzaChcIlwiKTtcbiAgICB9XG5cbiAgICAvLyBTZXBhcmF0b3JcbiAgICBsaW5lcy5wdXNoKFwiLS0tXCIpO1xuICB9XG5cbiAgLy8gUmVtb3ZlIGFueSBkb3VibGUtYmxhbmsgbGluZXNcbiAgY29uc3QgY2xlYW5lZCA9IGxpbmVzLnJlZHVjZTxzdHJpbmdbXT4oKGFjYywgY3VycikgPT4ge1xuICAgIGlmIChjdXJyID09PSBcIlwiICYmIGFjYy5sZW5ndGggJiYgYWNjW2FjYy5sZW5ndGggLSAxXSA9PT0gXCJcIikgcmV0dXJuIGFjYztcbiAgICByZXR1cm4gYWNjLmNvbmNhdChjdXJyKTtcbiAgfSwgW10pO1xuXG4gIHJldHVybiBbXG4gICAge1xuICAgICAgcGF0aDogXCJSdWxlcyBhbmQgUmVmZXJlbmNlL0FjdGlvbnMubWRcIixcbiAgICAgIGNvbnRlbnQ6IGNsZWFuZWQuam9pbihcIlxcblwiKS50cmltKCkgKyBcIlxcblwiLFxuICAgIH0sXG4gIF07XG59XG5cbi8qKlxuICogUGFyc2UgY29tYmluZWQgY29uZGl0aW9uc2Rpc2Vhc2VzLmpzb24gaW50byB0d28gTWFya2Rvd24gbm90ZXM6IENvbmRpdGlvbnMubWQgYW5kIERpc2Vhc2VzLm1kXG4gKiBhZGRpbmcgc2VwYXJhdG9ycyBiZXR3ZWVuIGVudHJpZXMuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBwYXJzZUNvbmRpdGlvbnNEaXNlYXNlc0ZpbGUoanNvbjogYW55LCBlZGl0aW9uSWQ6IHN0cmluZyk6IFBhcnNlZE1hcmtkb3duRmlsZVtdIHtcbiAgY29uc3Qgb3V0cHV0czogUGFyc2VkTWFya2Rvd25GaWxlW10gPSBbXTtcblxuICBjb25zdCBwcm9jZXNzSXRlbXMgPSAoaXRlbXM6IGFueVtdLCBvdXRQYXRoOiBzdHJpbmcpID0+IHtcbiAgICBjb25zdCBsaW5lczogc3RyaW5nW10gPSBbXTtcblxuICAgIGZvciAoY29uc3QgaXRlbSBvZiBpdGVtcykge1xuICAgICAgLy8gVG9wXHUyMDEwbGV2ZWwgaGVhZGVyIGZvciBlYWNoIGNvbmRpdGlvbi9kaXNlYXNlXG4gICAgICBsaW5lcy5wdXNoKGAjIyAke2l0ZW0ubmFtZX1gKTtcblxuICAgICAgY29uc3QgZW50cmllcyA9IEFycmF5LmlzQXJyYXkoaXRlbS5lbnRyaWVzKSA/IGl0ZW0uZW50cmllcyA6IFtpdGVtLmVudHJpZXNdO1xuICAgICAgZm9yIChjb25zdCBlbnRyeSBvZiBlbnRyaWVzKSB7XG4gICAgICAgIGlmICghZW50cnkpIGNvbnRpbnVlO1xuXG4gICAgICAgIC8vIDEpIFBsYWluIHRleHQgcGFyYWdyYXBoc1xuICAgICAgICBpZiAodHlwZW9mIGVudHJ5ID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgZm9yIChjb25zdCBwYXJhIG9mIGVudHJ5LnNwbGl0KC9cXG57Mix9LykpIHtcbiAgICAgICAgICAgIGNvbnN0IHQgPSBwYXJhLnRyaW0oKTtcbiAgICAgICAgICAgIGlmICh0KSB7XG4gICAgICAgICAgICAgIGxpbmVzLnB1c2gocmVwbGFjZTVlVGFncyh0KSk7XG4gICAgICAgICAgICAgIGxpbmVzLnB1c2goXCJcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vIDIpIEJ1bGxldCBsaXN0c1xuICAgICAgICBlbHNlIGlmIChlbnRyeS50eXBlID09PSBcImxpc3RcIiAmJiBBcnJheS5pc0FycmF5KGVudHJ5Lml0ZW1zKSkge1xuICAgICAgICAgIGZvciAoY29uc3QgdHh0IG9mIGVudHJ5Lml0ZW1zKSB7XG4gICAgICAgICAgICBsaW5lcy5wdXNoKGAtICR7cmVwbGFjZTVlVGFncyh0eHQpfWApO1xuICAgICAgICAgIH1cbiAgICAgICAgICBsaW5lcy5wdXNoKFwiXCIpO1xuICAgICAgICB9XG4gICAgICAgIC8vIDMpIFRhYmxlc1xuICAgICAgICBlbHNlIGlmIChlbnRyeS50eXBlID09PSBcInRhYmxlXCIgJiYgQXJyYXkuaXNBcnJheShlbnRyeS5yb3dzKSkge1xuICAgICAgICAgIGNvbnN0IGhlYWRlcnMgPSBlbnRyeS5jb2xMYWJlbHMgfHwgW107XG4gICAgICAgICAgbGluZXMucHVzaChgfCAke2hlYWRlcnMuam9pbihcIiB8IFwiKX0gfGApO1xuICAgICAgICAgIGxpbmVzLnB1c2goYHwgJHtoZWFkZXJzLm1hcCgoKSA9PiBcIi0tLVwiKS5qb2luKFwiIHwgXCIpfSB8YCk7XG4gICAgICAgICAgZm9yIChjb25zdCByb3cgb2YgZW50cnkucm93cykge1xuICAgICAgICAgICAgbGluZXMucHVzaChgfCAke3Jvdy5qb2luKFwiIHwgXCIpfSB8YCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGxpbmVzLnB1c2goXCJcIik7XG4gICAgICAgIH1cbiAgICAgICAgLy8gNCkgTmVzdGVkIFwiZW50cmllc1wiIGJsb2Nrc1xuICAgICAgICBlbHNlIGlmIChlbnRyeS50eXBlID09PSBcImVudHJpZXNcIiAmJiBBcnJheS5pc0FycmF5KGVudHJ5LmVudHJpZXMpKSB7XG4gICAgICAgICAgLy8gSWYgdGhpcyBibG9jayBoYXMgaXRzIG93biBuYW1lLCBlbWl0IGl0XG4gICAgICAgICAgaWYgKGVudHJ5Lm5hbWUpIHtcbiAgICAgICAgICAgIGxpbmVzLnB1c2goYCMjIyAke2VudHJ5Lm5hbWV9YCk7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IHN1YiBvZiBlbnRyeS5lbnRyaWVzKSB7XG4gICAgICAgICAgICAgIC8vIE5hbWVkIHN1Ylx1MjAxMGJsb2NrIChlLmcuIFwiQ2FuJ3QgU2VlXCIpXG4gICAgICAgICAgICAgIGlmIChzdWIudHlwZSA9PT0gXCJlbnRyaWVzXCIgJiYgc3ViLm5hbWUgJiYgQXJyYXkuaXNBcnJheShzdWIuZW50cmllcykpIHtcbiAgICAgICAgICAgICAgICBpZiAobGluZXNbbGluZXMubGVuZ3RoIC0gMV0gPT09IFwiXCIpIGxpbmVzLnBvcCgpO1xuICAgICAgICAgICAgICAgIGxpbmVzLnB1c2goYCMjIyMgJHtzdWIubmFtZX1gKTtcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IHR4dEVudHJ5IG9mIHN1Yi5lbnRyaWVzKSB7XG4gICAgICAgICAgICAgICAgICBjb25zdCB0ZXh0ID0gdHlwZW9mIHR4dEVudHJ5ID09PSBcInN0cmluZ1wiXG4gICAgICAgICAgICAgICAgICAgID8gcmVwbGFjZTVlVGFncyh0eHRFbnRyeSlcbiAgICAgICAgICAgICAgICAgICAgOiByZXBsYWNlNWVUYWdzKFN0cmluZyh0eHRFbnRyeSkpO1xuICAgICAgICAgICAgICAgICAgbGluZXMucHVzaCh0ZXh0KTtcbiAgICAgICAgICAgICAgICAgIGxpbmVzLnB1c2goXCJcIik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIC8vIFBsYWluXHUyMDEwdGV4dCBzdWJcdTIwMTBlbnRyeVxuICAgICAgICAgICAgICBlbHNlIGlmICh0eXBlb2Ygc3ViID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICAgICAgbGluZXMucHVzaChyZXBsYWNlNWVUYWdzKHN1YikpO1xuICAgICAgICAgICAgICAgIGxpbmVzLnB1c2goXCJcIik7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gVW5uYW1lZCB3cmFwcGVyOiBqdXN0IGZsYXR0ZW4gaXRzIGNoaWxkcmVuXG4gICAgICAgICAgICBmb3IgKGNvbnN0IHN1YiBvZiBlbnRyeS5lbnRyaWVzKSB7XG4gICAgICAgICAgICAgIGlmIChzdWIudHlwZSA9PT0gXCJlbnRyaWVzXCIgJiYgc3ViLm5hbWUgJiYgQXJyYXkuaXNBcnJheShzdWIuZW50cmllcykpIHtcbiAgICAgICAgICAgICAgICBpZiAobGluZXNbbGluZXMubGVuZ3RoIC0gMV0gPT09IFwiXCIpIGxpbmVzLnBvcCgpO1xuICAgICAgICAgICAgICAgIGxpbmVzLnB1c2goYCMjIyAke3N1Yi5uYW1lfWApO1xuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgdHh0RW50cnkgb2Ygc3ViLmVudHJpZXMpIHtcbiAgICAgICAgICAgICAgICAgIGNvbnN0IHRleHQgPSB0eXBlb2YgdHh0RW50cnkgPT09IFwic3RyaW5nXCJcbiAgICAgICAgICAgICAgICAgICAgPyByZXBsYWNlNWVUYWdzKHR4dEVudHJ5KVxuICAgICAgICAgICAgICAgICAgICA6IHJlcGxhY2U1ZVRhZ3MoU3RyaW5nKHR4dEVudHJ5KSk7XG4gICAgICAgICAgICAgICAgICBsaW5lcy5wdXNoKHRleHQpO1xuICAgICAgICAgICAgICAgICAgbGluZXMucHVzaChcIlwiKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIHN1YiA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgICAgIGxpbmVzLnB1c2gocmVwbGFjZTVlVGFncyhzdWIpKTtcbiAgICAgICAgICAgICAgICBsaW5lcy5wdXNoKFwiXCIpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vIDUpIEFueXRoaW5nIGVsc2UgKGZhbGxiYWNrKVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICBjb25zdCB0eHQgPSBBcnJheS5pc0FycmF5KGVudHJ5KVxuICAgICAgICAgICAgPyBlbnRyeS5qb2luKFwiIFwiKVxuICAgICAgICAgICAgOiB0eXBlb2YgZW50cnkgPT09IFwib2JqZWN0XCJcbiAgICAgICAgICAgICAgPyBKU09OLnN0cmluZ2lmeShlbnRyeSlcbiAgICAgICAgICAgICAgOiBTdHJpbmcoZW50cnkpO1xuICAgICAgICAgIGxpbmVzLnB1c2gocmVwbGFjZTVlVGFncyh0eHQpKTtcbiAgICAgICAgICBsaW5lcy5wdXNoKFwiXCIpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIFNlcGFyYXRvciBiZXR3ZWVuIGVudHJpZXNcbiAgICAgIGxpbmVzLnB1c2goXCItLS1cIik7XG4gICAgfVxuXG4gICAgLy8gQ2xlYW4gdXAgYW55IGRvdWJsZVx1MjAxMGJsYW5rIGxpbmVzXG4gICAgY29uc3QgY2xlYW5lZCA9IGxpbmVzLnJlZHVjZTxzdHJpbmdbXT4oKGFjYywgY3VycikgPT4ge1xuICAgICAgaWYgKGN1cnIgPT09IFwiXCIgJiYgYWNjLmxlbmd0aCAmJiBhY2NbYWNjLmxlbmd0aCAtIDFdID09PSBcIlwiKSByZXR1cm4gYWNjO1xuICAgICAgcmV0dXJuIGFjYy5jb25jYXQoY3Vycik7XG4gICAgfSwgW10pO1xuXG4gICAgb3V0cHV0cy5wdXNoKHtcbiAgICAgIHBhdGg6IG91dFBhdGgsXG4gICAgICBjb250ZW50OiBjbGVhbmVkLmpvaW4oXCJcXG5cIikudHJpbSgpICsgXCJcXG5cIixcbiAgICB9KTtcbiAgfTtcblxuICBwcm9jZXNzSXRlbXMoanNvbi5jb25kaXRpb24gfHwgW10sICAgXCJSdWxlcyBhbmQgUmVmZXJlbmNlL0NvbmRpdGlvbnMubWRcIik7XG4gIHByb2Nlc3NJdGVtcyhqc29uLmRpc2Vhc2UgICB8fCBbXSwgICBcIlJ1bGVzIGFuZCBSZWZlcmVuY2UvRGlzZWFzZXMubWRcIik7XG4gIHJldHVybiBvdXRwdXRzO1xufVxuXG4vKipcbiAqIFBhcnNlIHNlbnNlcy5qc29uIGludG8gYSBzaW5nbGUgTWFya2Rvd24gbm90ZSB3aXRoICMjIGhlYWRlcnMgZm9yIGVhY2ggc2Vuc2UsXG4gKiBoYW5kbGluZyBsaXN0cywgdGFibGVzLCBuZXN0ZWQgZW50cmllcy9pbnNldHMsIGFuZCBzZXBhcmF0b3JzLlxuICovXG5leHBvcnQgZnVuY3Rpb24gcGFyc2VTZW5zZXNGaWxlKGpzb246IGFueSwgZWRpdGlvbklkOiBzdHJpbmcpOiBQYXJzZWRNYXJrZG93bkZpbGVbXSB7XG4gIGNvbnN0IGl0ZW1zID0gQXJyYXkuaXNBcnJheShqc29uLnNlbnNlKVxuICAgID8ganNvbi5zZW5zZVxuICAgIDogQXJyYXkuaXNBcnJheShqc29uLnNlbnNlcylcbiAgICA/IGpzb24uc2Vuc2VzXG4gICAgOiBbXTtcbiAgaWYgKCFpdGVtcy5sZW5ndGgpIHJldHVybiBbXTtcblxuICBjb25zdCBsaW5lczogc3RyaW5nW10gPSBbXTtcblxuICBmdW5jdGlvbiBlbWl0QmxvY2soYmxvY2s6IGFueSkge1xuICAgIGlmICghYmxvY2spIHJldHVybjtcblxuICAgIC8vIDEpIFBsYWluXHUyMDEwdGV4dCBwYXJhZ3JhcGgocylcbiAgICBpZiAodHlwZW9mIGJsb2NrID09PSBcInN0cmluZ1wiKSB7XG4gICAgICBmb3IgKGNvbnN0IHBhcmEgb2YgYmxvY2suc3BsaXQoL1xcbnsyLH0vKSkge1xuICAgICAgICBjb25zdCB0ID0gcGFyYS50cmltKCk7XG4gICAgICAgIGlmICh0KSB7XG4gICAgICAgICAgbGluZXMucHVzaChyZXBsYWNlNWVUYWdzKHQpKTtcbiAgICAgICAgICBsaW5lcy5wdXNoKFwiXCIpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gMikgQnVsbGV0IGxpc3QgKGhhbmRsZXMgYm90aCBzdHJpbmcgaXRlbXMgYW5kIG9iamVjdCBpdGVtcylcbiAgICBpZiAoYmxvY2sudHlwZSA9PT0gXCJsaXN0XCIgJiYgQXJyYXkuaXNBcnJheShibG9jay5pdGVtcykpIHtcbiAgICAgIGZvciAoY29uc3QgaXRlbSBvZiBibG9jay5pdGVtcykge1xuICAgICAgICBpZiAodHlwZW9mIGl0ZW0gPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICBsaW5lcy5wdXNoKGAtICR7cmVwbGFjZTVlVGFncyhpdGVtKX1gKTtcbiAgICAgICAgICBsaW5lcy5wdXNoKFwiXCIpO1xuICAgICAgICB9IGVsc2UgaWYgKGl0ZW0gJiYgdHlwZW9mIGl0ZW0gPT09IFwib2JqZWN0XCIpIHtcbiAgICAgICAgICAvLyBvYmplY3QgaXRlbXMgd2l0aCBuYW1lK2VudHJpZXNcbiAgICAgICAgICBpZiAoaXRlbS5uYW1lICYmIEFycmF5LmlzQXJyYXkoaXRlbS5lbnRyaWVzKSkge1xuICAgICAgICAgICAgbGluZXMucHVzaChgLSAqKiR7aXRlbS5uYW1lfSoqYCk7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGVudCBvZiBpdGVtLmVudHJpZXMpIHtcbiAgICAgICAgICAgICAgbGluZXMucHVzaChgICAtICR7cmVwbGFjZTVlVGFncyhlbnQpfWApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbGluZXMucHVzaChcIlwiKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gZmFsbGJhY2s6IHN0cmluZ2lmeVxuICAgICAgICAgICAgbGluZXMucHVzaChgLSAke3JlcGxhY2U1ZVRhZ3MoSlNPTi5zdHJpbmdpZnkoaXRlbSkpfWApO1xuICAgICAgICAgICAgbGluZXMucHVzaChcIlwiKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyAzKSBUYWJsZVxuICAgIGlmIChibG9jay50eXBlID09PSBcInRhYmxlXCIgJiYgQXJyYXkuaXNBcnJheShibG9jay5yb3dzKSkge1xuICAgICAgY29uc3QgaGVhZGVycyA9IGJsb2NrLmNvbExhYmVscyB8fCBbXTtcbiAgICAgIGxpbmVzLnB1c2goYHwgJHtoZWFkZXJzLmpvaW4oXCIgfCBcIil9IHxgKTtcbiAgICAgIGxpbmVzLnB1c2goYHwgJHtoZWFkZXJzLm1hcCgoKSA9PiBcIi0tLVwiKS5qb2luKFwiIHwgXCIpfSB8YCk7XG4gICAgICBmb3IgKGNvbnN0IHJvdyBvZiBibG9jay5yb3dzKSB7XG4gICAgICAgIGxpbmVzLnB1c2goYHwgJHtyb3cuam9pbihcIiB8IFwiKX0gfGApO1xuICAgICAgfVxuICAgICAgbGluZXMucHVzaChcIlwiKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyA0KSBOZXN0ZWQgZW50cmllcyAvIGluc2V0c1xuICAgIGlmICgoYmxvY2sudHlwZSA9PT0gXCJlbnRyaWVzXCIgfHwgYmxvY2sudHlwZSA9PT0gXCJpbnNldFwiKSAmJiBBcnJheS5pc0FycmF5KGJsb2NrLmVudHJpZXMpKSB7XG4gICAgICAvLyBuYW1lZCBibG9jayBcdTIxOTIgXCIjIyMgTmFtZVwiXG4gICAgICBpZiAoYmxvY2submFtZSkge1xuICAgICAgICBpZiAobGluZXNbbGluZXMubGVuZ3RoIC0gMV0gPT09IFwiXCIpIGxpbmVzLnBvcCgpO1xuICAgICAgICBsaW5lcy5wdXNoKGAjIyMgJHtibG9jay5uYW1lfWApO1xuICAgICAgfVxuICAgICAgLy8gcmVjdXJzZSBpbnRvIGNoaWxkcmVuXG4gICAgICBmb3IgKGNvbnN0IGNoaWxkIG9mIGJsb2NrLmVudHJpZXMpIHtcbiAgICAgICAgZW1pdEJsb2NrKGNoaWxkKTtcbiAgICAgIH1cbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyA1KSBGYWxsYmFjayBmb3IgYXJyYXlzIG9yIG90aGVyIG9iamVjdHNcbiAgICBjb25zdCB0eHQgPVxuICAgICAgQXJyYXkuaXNBcnJheShibG9jaylcbiAgICAgICAgPyBibG9jay5qb2luKFwiIFwiKVxuICAgICAgICA6IHR5cGVvZiBibG9jayA9PT0gXCJvYmplY3RcIlxuICAgICAgICA/IEpTT04uc3RyaW5naWZ5KGJsb2NrKVxuICAgICAgICA6IFN0cmluZyhibG9jayk7XG4gICAgbGluZXMucHVzaChyZXBsYWNlNWVUYWdzKHR4dCkpO1xuICAgIGxpbmVzLnB1c2goXCJcIik7XG4gIH1cblxuICAvLyBCdWlsZCBvdXQgZWFjaCBzZW5zZVxuICBmb3IgKGNvbnN0IHNlbnNlIG9mIGl0ZW1zKSB7XG4gICAgbGluZXMucHVzaChgIyMgJHtzZW5zZS5uYW1lfWApO1xuICAgIGZvciAoY29uc3QgZW50cnkgb2YgQXJyYXkuaXNBcnJheShzZW5zZS5lbnRyaWVzKSA/IHNlbnNlLmVudHJpZXMgOiBbc2Vuc2UuZW50cmllc10pIHtcbiAgICAgIGVtaXRCbG9jayhlbnRyeSk7XG4gICAgfVxuICAgIGxpbmVzLnB1c2goXCItLS1cIik7XG4gIH1cblxuICAvLyBSZW1vdmUgYW55IGRvdWJsZVx1MjAxMGJsYW5rIGxpbmVzXG4gIGNvbnN0IGNsZWFuZWQgPSBsaW5lcy5yZWR1Y2U8c3RyaW5nW10+KChhY2MsIGN1cnIpID0+IHtcbiAgICBpZiAoY3VyciA9PT0gXCJcIiAmJiBhY2MubGVuZ3RoICYmIGFjY1thY2MubGVuZ3RoIC0gMV0gPT09IFwiXCIpIHJldHVybiBhY2M7XG4gICAgcmV0dXJuIGFjYy5jb25jYXQoY3Vycik7XG4gIH0sIFtdKTtcblxuICByZXR1cm4gW1xuICAgIHtcbiAgICAgIHBhdGg6IFwiUnVsZXMgYW5kIFJlZmVyZW5jZS9TZW5zZXMubWRcIixcbiAgICAgIGNvbnRlbnQ6IGNsZWFuZWQuam9pbihcIlxcblwiKS50cmltKCkgKyBcIlxcblwiLFxuICAgIH0sXG4gIF07XG59XG5cbi8qKlxuICogUGFyc2Ugc2tpbGxzLmpzb24gaW50byBhIHNpbmdsZSBNYXJrZG93biBub3RlIHdpdGggIyMgaGVhZGVycyBmb3IgZWFjaCBza2lsbCxcbiAqIHByZXBlbmRpbmcgYW4gYWJpbGl0eSBsaW5lLCBoYW5kbGluZyBwYXJhZ3JhcGhzLCBhbmQgc2VwYXJhdG9ycy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlU2tpbGxzRmlsZShqc29uOiBhbnksIGVkaXRpb25JZDogc3RyaW5nKTogUGFyc2VkTWFya2Rvd25GaWxlW10ge1xuICBjb25zdCBpdGVtcyA9IEFycmF5LmlzQXJyYXkoanNvbi5za2lsbClcbiAgICA/IGpzb24uc2tpbGxcbiAgICA6IEFycmF5LmlzQXJyYXkoanNvbi5za2lsbHMpXG4gICAgPyBqc29uLnNraWxsc1xuICAgIDogW107XG4gIGlmICghaXRlbXMubGVuZ3RoKSByZXR1cm4gW107XG5cbiAgY29uc3QgbGluZXM6IHN0cmluZ1tdID0gW107XG4gIGZvciAoY29uc3Qgc2tpbGwgb2YgaXRlbXMpIHtcbiAgICBsaW5lcy5wdXNoKGAjIyAke3NraWxsLm5hbWV9YCk7XG4gICAgaWYgKHNraWxsLmFiaWxpdHkpIHtcbiAgICAgIGxpbmVzLnB1c2goYCpBYmlsaXR5OiAke3NraWxsLmFiaWxpdHl9KmApO1xuICAgICAgbGluZXMucHVzaChcIlwiKTtcbiAgICB9XG4gICAgY29uc3QgZW50cmllcyA9IEFycmF5LmlzQXJyYXkoc2tpbGwuZW50cmllcykgPyBza2lsbC5lbnRyaWVzIDogW3NraWxsLmVudHJpZXNdO1xuICAgIGZvciAoY29uc3QgZW50cnkgb2YgZW50cmllcykge1xuICAgICAgaWYgKCFlbnRyeSkgY29udGludWU7XG4gICAgICBpZiAodHlwZW9mIGVudHJ5ID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgIGNvbnN0IHBhcmFzID0gZW50cnkuc3BsaXQoL1xcbnsyLH0vKTtcbiAgICAgICAgZm9yIChjb25zdCBwYXJhIG9mIHBhcmFzKSB7XG4gICAgICAgICAgY29uc3QgdCA9IHBhcmEudHJpbSgpO1xuICAgICAgICAgIGlmICh0KSB7XG4gICAgICAgICAgICBsaW5lcy5wdXNoKHJlcGxhY2U1ZVRhZ3ModCkpO1xuICAgICAgICAgICAgbGluZXMucHVzaChcIlwiKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAoZW50cnkudHlwZSA9PT0gXCJsaXN0XCIgJiYgQXJyYXkuaXNBcnJheShlbnRyeS5pdGVtcykpIHtcbiAgICAgICAgZm9yIChjb25zdCBpdGVtIG9mIGVudHJ5Lml0ZW1zKSB7XG4gICAgICAgICAgbGluZXMucHVzaChgLSAke3JlcGxhY2U1ZVRhZ3MoaXRlbSl9YCk7XG4gICAgICAgIH1cbiAgICAgICAgbGluZXMucHVzaChcIlwiKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnN0IHR4dCA9IEFycmF5LmlzQXJyYXkoZW50cnkpID8gZW50cnkuam9pbihcIiBcIikgOiBTdHJpbmcoZW50cnkpO1xuICAgICAgICBsaW5lcy5wdXNoKHJlcGxhY2U1ZVRhZ3ModHh0KSk7XG4gICAgICAgIGxpbmVzLnB1c2goXCJcIik7XG4gICAgICB9XG4gICAgfVxuICAgIC8vIFNlcGFyYXRvciBiZXR3ZWVuIHNraWxsc1xuICAgIGxpbmVzLnB1c2goXCItLS1cIik7XG4gIH1cbiAgY29uc3QgY2xlYW5lZCA9IGxpbmVzLnJlZHVjZTxzdHJpbmdbXT4oKGFjYywgY3VycikgPT4ge1xuICAgIGlmIChjdXJyID09PSBcIlwiICYmIGFjYy5sZW5ndGggJiYgYWNjW2FjYy5sZW5ndGggLSAxXSA9PT0gXCJcIikgcmV0dXJuIGFjYztcbiAgICByZXR1cm4gYWNjLmNvbmNhdChjdXJyKTtcbiAgfSwgW10pO1xuXG4gIHJldHVybiBbXG4gICAge1xuICAgICAgcGF0aDogXCJSdWxlcyBhbmQgUmVmZXJlbmNlL1NraWxscy5tZFwiLFxuICAgICAgY29udGVudDogY2xlYW5lZC5qb2luKFwiXFxuXCIpLnRyaW0oKSArIFwiXFxuXCIsXG4gICAgfSxcbiAgXTtcbn1cbiIsICJpbXBvcnQgdHlwZSB7IFBhcnNlZE1hcmtkb3duRmlsZSB9IGZyb20gXCIuLi8uLi90eXBlc1wiO1xuaW1wb3J0IHsgcmVwbGFjZTVlVGFncyB9IGZyb20gXCIuL2hlbHBlcnMvdGFnUmVwbGFjZXJcIjtcbmltcG9ydCB7IGJ1aWxkRk0sIHNlcmlhbGl6ZUZyb250bWF0dGVyLCBGRUFUU19NRVRBX0RFRlMgfSBmcm9tIFwiLi9oZWxwZXJzL2Zyb250bWF0dGVyXCI7XG5cbi8qKlxuICogUGFyc2UgZmVhdHMuanNvbiBpbnRvIG9uZSBNYXJrZG93biBmaWxlIHBlciBmZWF0IHVuZGVyIFBsYXllciBCdWlsZC9GZWF0cyxcbiAqIGluY2x1ZGluZyBmcm9udG1hdHRlciwgY2xlYW5lZCBwcmVyZXF1aXNpdGVzLCBhbmQgZm9ybWF0dGVkIGVudHJpZXMuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBwYXJzZUZlYXRzRmlsZShqc29uOiBhbnksIGVkaXRpb25JZDogc3RyaW5nKTogUGFyc2VkTWFya2Rvd25GaWxlW10ge1xuICBjb25zdCBmZWF0czogYW55W10gPSBBcnJheS5pc0FycmF5KGpzb24uZmVhdClcbiAgICA/IGpzb24uZmVhdFxuICAgIDogQXJyYXkuaXNBcnJheShqc29uLmZlYXRzKVxuICAgID8ganNvbi5mZWF0c1xuICAgIDogW107XG5cbiAgcmV0dXJuIGZlYXRzLm1hcCgoZmVhdDogYW55KSA9PiB7XG4gICAgY29uc3QgbGluZXM6IHN0cmluZ1tdID0gW107XG5cbiAgICAvLyBcdTI1MDBcdTI1MDBcdTI1MDAgRnJvbnRtYXR0ZXIgXHUyNTAwXHUyNTAwXHUyNTAwXG4gICAgY29uc3QgZm0gPSBidWlsZEZNKHsgLi4uZmVhdCwgX2VkaXRpb25JZDogZWRpdGlvbklkIH0sIEZFQVRTX01FVEFfREVGUyk7XG4gICAgbGluZXMucHVzaChcIi0tLVwiKTtcbiAgICBsaW5lcy5wdXNoKHNlcmlhbGl6ZUZyb250bWF0dGVyKGZtLCBGRUFUU19NRVRBX0RFRlMpKTtcbiAgICBsaW5lcy5wdXNoKFwiLS0tXCIsIFwiXCIpO1xuXG4gICAgLy8gXHUyNTAwXHUyNTAwXHUyNTAwIFRpdGxlIFx1MjUwMFx1MjUwMFx1MjUwMFxuICAgIGxpbmVzLnB1c2goYCMgJHtmZWF0Lm5hbWV9YCwgXCJcIik7XG5cbiAgICAvLyBcdTI1MDBcdTI1MDBcdTI1MDAgUHJlcmVxdWlzaXRlcyBcdTI1MDBcdTI1MDBcdTI1MDBcbiAgICBjb25zdCBwcmVyZXFzOiBzdHJpbmdbXSA9IFtdO1xuICAgIGlmIChBcnJheS5pc0FycmF5KGZlYXQucHJlcmVxdWlzaXRlKSkge1xuICAgICAgZmVhdC5wcmVyZXF1aXNpdGUuZm9yRWFjaCgocHI6IGFueSkgPT4ge1xuICAgICAgICBpZiAocHIubGV2ZWwpIHByZXJlcXMucHVzaChgTGV2ZWwgJHtwci5sZXZlbH1gKTtcbiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkocHIuZmVhdCkpIHtcbiAgICAgICAgICBwci5mZWF0LmZvckVhY2goKGY6IHN0cmluZykgPT4ge1xuICAgICAgICAgICAgY29uc3QgbmFtZSA9IGYuc3BsaXQoXCJ8XCIpWzBdLnJlcGxhY2UoL1xcYlxcdy9nLCBjID0+IGMudG9VcHBlckNhc2UoKSk7XG4gICAgICAgICAgICBwcmVyZXFzLnB1c2goYFByZXJlcXVpc2l0ZTogW1ske25hbWV9XV1gKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICAgIGlmIChmZWF0LnNwZWxsY2FzdGluZ1ByZXBhcmVkKSBwcmVyZXFzLnB1c2goYFByZXJlcXVpc2l0ZTogU3BlbGxjYXN0ZXJgKTtcbiAgICBpZiAoQXJyYXkuaXNBcnJheShmZWF0LnRvb2xQcm9maWNpZW5jaWVzKSkge1xuICAgICAgZmVhdC50b29sUHJvZmljaWVuY2llcy5mb3JFYWNoKCh0cDogYW55KSA9PiB7XG4gICAgICAgIE9iamVjdC5lbnRyaWVzKHRwKS5mb3JFYWNoKChba2V5XSkgPT4ge1xuICAgICAgICAgIGlmIChrZXkgPT09ICdhbnlBcnRpc2Fuc1Rvb2wnKSB7XG4gICAgICAgICAgICBwcmVyZXFzLnB1c2goYFByZXJlcXVpc2l0ZTogUHJvZmljaWVudCB3aXRoIGFuIGFydGlzYW4ncyB0b29sYCk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHByZXJlcXMucHVzaChgUHJlcmVxdWlzaXRlOiBQcm9maWNpZW50IHdpdGggJHtrZXkucmVwbGFjZSgvKFtBLVpdKS9nLCcgJDEnKS50cmltKCl9YCk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH1cbiAgICBpZiAoQXJyYXkuaXNBcnJheShmZWF0LmFybW9yUHJvZmljaWVuY2llcykpIHtcbiAgICAgIGZlYXQuYXJtb3JQcm9maWNpZW5jaWVzLmZvckVhY2goKGFybTogYW55KSA9PiB7XG4gICAgICAgIGNvbnN0IGFybVN0ciA9IHR5cGVvZiBhcm0gPT09ICdzdHJpbmcnID8gYXJtIDogSlNPTi5zdHJpbmdpZnkoYXJtKTtcbiAgICAgICAgcHJlcmVxcy5wdXNoKGBQcmVyZXF1aXNpdGU6IFByb2ZpY2llbnQgd2l0aCAke2FybVN0ci5yZXBsYWNlKC8oW0EtWl0pL2csJyAkMScpLnRyaW0oKX1gKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgICBpZiAoZmVhdC5yYWNlKSBwcmVyZXFzLnB1c2goYFByZXJlcXVpc2l0ZTogJHtmZWF0LnJhY2V9YCk7XG5cbiAgICBpZiAocHJlcmVxcy5sZW5ndGgpIHtcbiAgICAgIGxpbmVzLnB1c2goXCIqKlByZXJlcXVpc2l0ZXMqKlwiKTtcbiAgICAgIHByZXJlcXMuZm9yRWFjaChwID0+IGxpbmVzLnB1c2goYC0gJHtwfWApKTtcbiAgICAgIGxpbmVzLnB1c2goXCJcIik7XG4gICAgfVxuXG4gICAgLy8gXHUyNTAwXHUyNTAwXHUyNTAwIEVudHJpZXMgcmVuZGVyaW5nIFx1MjUwMFx1MjUwMFx1MjUwMFxuICAgIGNvbnN0IGVudHJpZXMgPSBBcnJheS5pc0FycmF5KGZlYXQuZW50cmllcykgPyBmZWF0LmVudHJpZXMgOiBbZmVhdC5lbnRyaWVzXTtcbiAgICBlbnRyaWVzLmZvckVhY2goKGVudHJ5OiBhbnkpID0+IHtcbiAgICAgIGlmICghZW50cnkpIHJldHVybjtcblxuICAgICAgLy8gUGxhaW4gdGV4dFxuICAgICAgaWYgKHR5cGVvZiBlbnRyeSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgZW50cnkuc3BsaXQoL1xcbnsyLH0vKS5mb3JFYWNoKHAgPT4ge1xuICAgICAgICAgIGNvbnN0IHQgPSBwLnRyaW0oKTtcbiAgICAgICAgICBpZiAodCkge1xuICAgICAgICAgICAgbGluZXMucHVzaChyZXBsYWNlNWVUYWdzKHQpKTtcbiAgICAgICAgICAgIGxpbmVzLnB1c2goXCJcIik7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgLy8gTGlzdFxuICAgICAgfSBlbHNlIGlmIChlbnRyeS50eXBlID09PSAnbGlzdCcgJiYgQXJyYXkuaXNBcnJheShlbnRyeS5pdGVtcykpIHtcbiAgICAgICAgZW50cnkuaXRlbXMuZm9yRWFjaCgoaXQ6IGFueSkgPT4ge1xuICAgICAgICAgIGlmICh0eXBlb2YgaXQgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICBsaW5lcy5wdXNoKGAtICR7cmVwbGFjZTVlVGFncyhpdCl9YCk7XG4gICAgICAgICAgfSBlbHNlIGlmIChpdC50eXBlID09PSAnaXRlbScgJiYgaXQubmFtZSkge1xuICAgICAgICAgICAgbGluZXMucHVzaChgLSAqKiR7aXQubmFtZX0qKmApO1xuICAgICAgICAgICAgY29uc3Qgc3VicyA9IEFycmF5LmlzQXJyYXkoaXQuZW50cmllcykgPyBpdC5lbnRyaWVzIDogW2l0LmVudHJpZXNdO1xuICAgICAgICAgICAgc3Vicy5mb3JFYWNoKChzOiBhbnkpID0+XG4gICAgICAgICAgICAgIGxpbmVzLnB1c2goYCAgLSAke3JlcGxhY2U1ZVRhZ3ModHlwZW9mIHMgPT09ICdzdHJpbmcnID8gcyA6IEpTT04uc3RyaW5naWZ5KHMpKX1gKVxuICAgICAgICAgICAgKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICBsaW5lcy5wdXNoKFwiXCIpO1xuXG4gICAgICAvLyBJbnNldCBhcyBpbmRlbnRlZCBidWxsZXRcbiAgICAgIH0gZWxzZSBpZiAoZW50cnkudHlwZSA9PT0gJ2luc2V0Jykge1xuICAgICAgICBsaW5lcy5wdXNoKGAtICoke2VudHJ5Lm5hbWV9KmApO1xuICAgICAgICBjb25zdCBzdWJzID0gQXJyYXkuaXNBcnJheShlbnRyeS5lbnRyaWVzKSA/IGVudHJ5LmVudHJpZXMgOiBbZW50cnkuZW50cmllc107XG4gICAgICAgIHN1YnMuZm9yRWFjaCgoczogYW55KSA9PiBsaW5lcy5wdXNoKGAgIC0gJHtyZXBsYWNlNWVUYWdzKHMpfWApKTtcbiAgICAgICAgbGluZXMucHVzaChcIlwiKTtcblxuICAgICAgLy8gU2VjdGlvbiBvciBlbnRyaWVzXG4gICAgICB9IGVsc2UgaWYgKChlbnRyeS50eXBlID09PSAnc2VjdGlvbicgfHwgZW50cnkudHlwZSA9PT0gJ2VudHJpZXMnKSAmJiBBcnJheS5pc0FycmF5KGVudHJ5LmVudHJpZXMpKSB7XG4gICAgICAgIGlmIChlbnRyeS5uYW1lKSB7XG4gICAgICAgICAgbGluZXMucHVzaChgIyMgJHtlbnRyeS5uYW1lfWApO1xuICAgICAgICAgIGxpbmVzLnB1c2goXCJcIik7XG4gICAgICAgIH1cbiAgICAgICAgZW50cnkuZW50cmllcy5mb3JFYWNoKChzOiBhbnkpID0+IHtcbiAgICAgICAgICBsaW5lcy5wdXNoKHJlcGxhY2U1ZVRhZ3ModHlwZW9mIHMgPT09ICdzdHJpbmcnID8gcyA6IEpTT04uc3RyaW5naWZ5KHMpKSk7XG4gICAgICAgICAgbGluZXMucHVzaChcIlwiKTtcbiAgICAgICAgfSk7XG5cbiAgICAgIC8vIFRhYmxlXG4gICAgICB9IGVsc2UgaWYgKGVudHJ5LnR5cGUgPT09ICd0YWJsZScgJiYgQXJyYXkuaXNBcnJheShlbnRyeS5yb3dzKSkge1xuICAgICAgICBjb25zdCBoZHIgPSBlbnRyeS5jb2xMYWJlbHMgfHwgW107XG4gICAgICAgIGxpbmVzLnB1c2goYHwgJHtoZHIuam9pbignIHwgJyl9IHxgKTtcbiAgICAgICAgbGluZXMucHVzaChgfCAke2hkci5tYXAoKCkgPT4gJy0tLScpLmpvaW4oJyB8ICcpfSB8YCk7XG4gICAgICAgIGVudHJ5LnJvd3MuZm9yRWFjaCgocm93OiBhbnlbXSkgPT5cbiAgICAgICAgICBsaW5lcy5wdXNoKGB8ICR7cm93LmpvaW4oJyB8ICcpfSB8YClcbiAgICAgICAgKTtcbiAgICAgICAgbGluZXMucHVzaChcIlwiKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIHJldHVybiB7XG4gICAgICBwYXRoOiBgUGxheWVyIEJ1aWxkL0ZlYXRzLyR7ZmVhdC5uYW1lfS5tZGAsXG4gICAgICBjb250ZW50OiBsaW5lcy5qb2luKFwiXFxuXCIpLnRyaW0oKSArIFwiXFxuXCIsXG4gICAgfTtcbiAgfSk7XG59XG4iLCAiLy8gc3JjL3BhcnNlcnMvYmFja2dyb3VuZHMudHNcbmltcG9ydCB0eXBlIHsgUGFyc2VkTWFya2Rvd25GaWxlIH0gZnJvbSBcIi4uLy4uL3R5cGVzXCI7XG5pbXBvcnQgeyByZXBsYWNlNWVUYWdzIH0gZnJvbSBcIi4vaGVscGVycy90YWdSZXBsYWNlclwiO1xuaW1wb3J0IHsgcmVuZGVyTWFya2Rvd25UYWJsZSB9IGZyb20gXCIuL2hlbHBlcnMvbWFya2Rvd25UYWJsZVwiO1xuaW1wb3J0IHsgYnVpbGRGTSwgc2VyaWFsaXplRnJvbnRtYXR0ZXIsIEZNX0ZJRUxEUywgZmlsdGVyVmFsaWRTa2lsbHMsIEJBQ0tHUk9VTkRfTUVUQV9ERUZTIH0gZnJvbSBcIi4vaGVscGVycy9mcm9udG1hdHRlclwiO1xuXG4vKipcbiAqIFBhcnNlIGJhY2tncm91bmRzLmpzb24gaW50byBvbmUgTWFya2Rvd24gZmlsZSBwZXIgYmFja2dyb3VuZCB1bmRlciBQbGF5ZXIgQnVpbGQvQmFja2dyb3VuZHMsXG4gKiBleGNsdWRpbmcgYW55IFx1MjAxQ1ZhcmlhbnRcdTIwMjZcdTIwMUQgb3IgXHUyMDFDQmFsZHVyXHUyMDE5cyBHYXRlXHUyMDI2XHUyMDFEIGVudHJpZXMuXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlQmFja2dyb3VuZHNGaWxlKGpzb246IGFueSwgZWRpdGlvbklkOiBzdHJpbmcpOiBQYXJzZWRNYXJrZG93bkZpbGVbXSB7XG4gIC8vIHB1bGwgaW4gdGhlIGFycmF5XG4gIGNvbnN0IHJhdzogYW55W10gPSBBcnJheS5pc0FycmF5KGpzb24uYmFja2dyb3VuZClcbiAgICA/IGpzb24uYmFja2dyb3VuZFxuICAgIDogQXJyYXkuaXNBcnJheShqc29uLmJhY2tncm91bmRzKVxuICAgID8ganNvbi5iYWNrZ3JvdW5kc1xuICAgIDogW107XG5cbiAgLy8gZmlsdGVyIG91dCB1bndhbnRlZCBlbnRyaWVzXG4gIGNvbnN0IGJhY2tncm91bmRzID0gcmF3LmZpbHRlcihiZyA9PiB7XG4gICAgY29uc3Qgbm06IHN0cmluZyA9IGJnLm5hbWUgfHwgXCJcIjtcbiAgICByZXR1cm4gIW5tLnN0YXJ0c1dpdGgoXCJWYXJpYW50XCIpICYmICFubS5pbmNsdWRlcyhcIkJhbGR1cidzIEdhdGVcIik7XG4gIH0pO1xuXG4gIGNvbnN0IG91dHB1dHM6IFBhcnNlZE1hcmtkb3duRmlsZVtdID0gW107XG5cbiAgYmFja2dyb3VuZHMuZm9yRWFjaChiZyA9PiB7XG4gICAgY29uc3QgbGluZXM6IHN0cmluZ1tdID0gW107XG5cbi8vIFx1MjUwMFx1MjUwMFx1MjUwMCBidWlsZCBmcm9udG1hdHRlciBcdTI1MDBcdTI1MDBcdTI1MDBcbmNvbnN0IGZtID0gYnVpbGRGTShiZywgQkFDS0dST1VORF9NRVRBX0RFRlMpO1xuXG4vLyBcdTI1MDBcdTI1MDBcdTI1MDAgY29sbGVjdCBvbmx5IHRoZSBlbnRyaWVzIGZsYWdnZWQgaXNGZWF0dXJlIFx1MjUwMFx1MjUwMFx1MjUwMFxuY29uc3QgZXh0cmFUcmFpdHM6IHN0cmluZ1tdID0gQXJyYXkuaXNBcnJheShiZy5lbnRyaWVzKVxuICA/IChiZy5lbnRyaWVzIGFzIGFueVtdKVxuICAgICAgLmZpbHRlcigoZTogYW55KSA9PiBlLmRhdGE/LmlzRmVhdHVyZSAmJiB0eXBlb2YgZS5uYW1lID09PSBcInN0cmluZ1wiKVxuICAgICAgLm1hcCgoZTogYW55KSA9PiB7XG4gICAgICAgIGNvbnN0IG5hbWUgPSBlLm5hbWUucmVwbGFjZSgvXkZlYXR1cmU6XFxzKi8sIFwiXCIpO1xuICAgICAgICByZXR1cm4gYFtbJHtiZy5uYW1lfSMke25hbWV9XV1gO1xuICAgICAgfSlcbiAgOiBbXTtcblxuLy8gXHUyNTAwXHUyNTAwXHUyNTAwIHNlcmlhbGl6ZSBmcm9udG1hdHRlciBcdTI1MDBcdTI1MDBcdTI1MDBcbmNvbnN0IHlhbWwgPSBzZXJpYWxpemVGcm9udG1hdHRlcihmbSwgQkFDS0dST1VORF9NRVRBX0RFRlMpO1xubGluZXMucHVzaChcIi0tLVwiLCB5YW1sLCBcIi0tLVwiLCBcIlwiKTtcblxuIFxuICAgIC8vIHRpdGxlXG4gICAgbGluZXMucHVzaChgIyAke2JnLm5hbWV9YCwgXCJcIik7XG5cbiAgICAvLyBcdTI1MDBcdTI1MDBcdTI1MDAgc2tpbGwgcHJvZmljaWVuY2llcyBcdTI1MDBcdTI1MDBcdTI1MDBcbiAgICBpZiAoQXJyYXkuaXNBcnJheShiZy5za2lsbFByb2ZpY2llbmNpZXMpICYmIGJnLnNraWxsUHJvZmljaWVuY2llcy5sZW5ndGgpIHtcbiAgICAgIGNvbnN0IHNraWxsczogc3RyaW5nW10gPSBbXTtcbiAgICAgIGJnLnNraWxsUHJvZmljaWVuY2llcy5mb3JFYWNoKChlbnQ6IGFueSkgPT4ge1xuICAgICAgICBpZiAodHlwZW9mIGVudCA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgIHNraWxscy5wdXNoKGNhcChlbnQpKTtcbiAgICAgICAgfSBlbHNlIGlmIChlbnQuY2hvb3NlICYmIEFycmF5LmlzQXJyYXkoZW50LmNob29zZS5mcm9tKSkge1xuICAgICAgICAgIHNraWxscy5wdXNoKGBDaG9vc2UgJHtlbnQuY2hvb3NlLmFtb3VudH0gZnJvbSAke2VudC5jaG9vc2UuZnJvbS5qb2luKFwiLCBcIil9YCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgT2JqZWN0LmVudHJpZXMoZW50KVxuICAgICAgICAgICAgLmZpbHRlcigoWywgdl0pID0+IHYgPT09IHRydWUpXG4gICAgICAgICAgICAuZm9yRWFjaCgoW2tdKSA9PiBza2lsbHMucHVzaChjYXAoaykpKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICBsaW5lcy5wdXNoKGAqKlNraWxsIFByb2ZpY2llbmNpZXM6KiogJHtza2lsbHMuam9pbihcIiwgXCIpfWAsIFwiXCIpO1xuICAgIH1cblxuICAgIC8vIFx1MjUwMFx1MjUwMFx1MjUwMCBsYW5ndWFnZSBwcm9maWNpZW5jaWVzIFx1MjUwMFx1MjUwMFx1MjUwMFxuICAgIGlmIChBcnJheS5pc0FycmF5KGJnLmxhbmd1YWdlUHJvZmljaWVuY2llcykgJiYgYmcubGFuZ3VhZ2VQcm9maWNpZW5jaWVzLmxlbmd0aCkge1xuICAgICAgY29uc3QgbGFuZ3M6IHN0cmluZ1tdID0gW107XG4gICAgICBiZy5sYW5ndWFnZVByb2ZpY2llbmNpZXMuZm9yRWFjaCgoZW50OiBhbnkpID0+IHtcbiAgICAgICAgaWYgKGVudC5hbnlTdGFuZGFyZCkge1xuICAgICAgICAgIGxhbmdzLnB1c2goYCR7ZW50LmFueVN0YW5kYXJkfSBvZiB5b3VyIGNob2ljZWApO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIE9iamVjdC5lbnRyaWVzKGVudClcbiAgICAgICAgICAgIC5maWx0ZXIoKFssIHZdKSA9PiB2ID09PSB0cnVlKVxuICAgICAgICAgICAgLmZvckVhY2goKFtrXSkgPT4gbGFuZ3MucHVzaChjYXAoaykpKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICBsaW5lcy5wdXNoKGAqKkxhbmd1YWdlczoqKiAke2xhbmdzLmpvaW4oXCIsIFwiKX1gLCBcIlwiKTtcbiAgICB9XG5cbiAgICAvLyBcdTI1MDBcdTI1MDBcdTI1MDAgdG9vbCBwcm9maWNpZW5jaWVzIFx1MjUwMFx1MjUwMFx1MjUwMFxuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShiZy50b29sUHJvZmljaWVuY2llcykgJiYgYmcudG9vbFByb2ZpY2llbmNpZXMubGVuZ3RoKSB7XG4gICAgICAgIGNvbnN0IHRvb2xzOiBzdHJpbmdbXSA9IFtdO1xuXG4gICAgICAgIGJnLnRvb2xQcm9maWNpZW5jaWVzLmZvckVhY2goKGVudDogYW55KSA9PiB7XG4gICAgICAgICAgICAvLyBcdTIwMUNDaG9vc2UgWCBmcm9tIFx1MjAyNlx1MjAxRFxuICAgICAgICAgICAgaWYgKGVudC5jaG9vc2UgJiYgQXJyYXkuaXNBcnJheShlbnQuY2hvb3NlLmZyb20pKSB7XG4gICAgICAgICAgICBjb25zdCBsaXN0ID0gZW50LmNob29zZS5mcm9tLm1hcChodW1hbml6ZSkuam9pbihcIiwgXCIpO1xuICAgICAgICAgICAgdG9vbHMucHVzaChgQ2hvb3NlICR7ZW50LmNob29zZS5jb3VudH0gZnJvbSAke2xpc3R9YCk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIHBsYWluIHN0cmluZyAocmFyZSBoZXJlLCBidXQganVzdCBpbiBjYXNlKVxuICAgICAgICAgICAgaWYgKHR5cGVvZiBlbnQgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgIHRvb2xzLnB1c2goaHVtYW5pemUoZW50KSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIG9iamVjdCB3aXRoIGJvb2xlYW4gZmxhZ3M6IGdhdGhlciAqYWxsKiB0cnVlIGtleXNcbiAgICAgICAgICAgIE9iamVjdC5lbnRyaWVzKGVudClcbiAgICAgICAgICAgIC5maWx0ZXIoKFtfLCB2XSkgPT4gdiA9PT0gdHJ1ZSlcbiAgICAgICAgICAgIC5mb3JFYWNoKChba10pID0+IHRvb2xzLnB1c2goaHVtYW5pemUoaykpKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgbGluZXMucHVzaChgKipUb29sIFByb2ZpY2llbmNpZXM6KiogJHt0b29scy5qb2luKFwiLCBcIil9YCwgXCJcIik7XG4gICAgICAgIH1cblxuXG5cbiAgICAvLyBcdTI1MDBcdTI1MDBcdTI1MDAgc3RhcnRpbmcgZXF1aXBtZW50IFx1MjUwMFx1MjUwMFx1MjUwMFxuICAgIGlmIChBcnJheS5pc0FycmF5KGJnLnN0YXJ0aW5nRXF1aXBtZW50KSAmJiBiZy5zdGFydGluZ0VxdWlwbWVudC5sZW5ndGgpIHtcbiAgICAgIGxpbmVzLnB1c2goYCoqRXF1aXBtZW50OioqYCk7XG4gICAgICBiZy5zdGFydGluZ0VxdWlwbWVudC5mb3JFYWNoKChncnA6IGFueSkgPT4ge1xuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShncnAuXykpIHtcbiAgICAgICAgICBncnAuXy5mb3JFYWNoKChpdDogYW55KSA9PiBsaW5lcy5wdXNoKGAtICR7Zm10SXRlbShpdCl9YCkpO1xuICAgICAgICB9XG4gICAgICAgIFtcImFcIiwgXCJiXCJdLmZvckVhY2goa2V5ID0+IHtcbiAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShncnBba2V5XSkpIHtcbiAgICAgICAgICAgIGdycFtrZXldLmZvckVhY2goKGl0OiBhbnkpID0+IGxpbmVzLnB1c2goYC0gJHtmbXRJdGVtKGl0KX1gKSk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgICAgbGluZXMucHVzaChcIlwiKTtcbiAgICB9XG5cbiAgICAvLyBcdTI1MDBcdTI1MDBcdTI1MDAgYWxsIGZlYXR1cmUgJiBlbnRyaWVzIGJsb2NrcyBcdTI1MDBcdTI1MDBcdTI1MDBcbiAgICBpZiAoQXJyYXkuaXNBcnJheShiZy5lbnRyaWVzKSkge1xuICAgICAgYmcuZW50cmllcy5mb3JFYWNoKChlbnRyeTogYW55KSA9PiB7XG4gICAgICAgIC8vIHNraXAgdGhlIHN1bW1hcnkgbGlzdCBibG9ja1xuICAgICAgICBpZiAoZW50cnkudHlwZSA9PT0gXCJsaXN0XCIgJiYgZW50cnkuc3R5bGUgPT09IFwibGlzdC1oYW5nLW5vdGl0bGVcIikge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICAvLyBzZWN0aW9uIGhlYWRlclxuICAgICAgICBpZiAoZW50cnkubmFtZSkge1xuY29uc3QgaGVhZGVyID0gZW50cnkuZGF0YT8uaXNGZWF0dXJlXG4gID8gZW50cnkubmFtZS5yZXBsYWNlKC9eRmVhdHVyZTpcXHMqLywgXCJcIilcbiAgOiBlbnRyeS5uYW1lO1xubGluZXMucHVzaChgIyMgJHtoZWFkZXJ9YCwgXCJcIik7ICAgICAgICB9XG4gICAgICAgIC8vIGVudHJ5IGNvbnRlbnRcbiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoZW50cnkuZW50cmllcykpIHtcbiAgICAgICAgICBlbnRyeS5lbnRyaWVzLmZvckVhY2goKGU6IGFueSkgPT4ge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBlID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICAgIGxpbmVzLnB1c2gocmVwbGFjZTVlVGFncyhlKSwgXCJcIik7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGUudHlwZSA9PT0gXCJsaXN0XCIgJiYgQXJyYXkuaXNBcnJheShlLml0ZW1zKSkge1xuICAgICAgICAgICAgICBlLml0ZW1zLmZvckVhY2goKGl0OiBhbnkpID0+XG4gICAgICAgICAgICAgICAgbGluZXMucHVzaChgLSAke3JlcGxhY2U1ZVRhZ3MoaXQuZW50cnkgPz8gaXQpfWApXG4gICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgIGxpbmVzLnB1c2goXCJcIik7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGUudHlwZSA9PT0gXCJ0YWJsZVwiKSB7XG4gICAgICAgICAgICAgIGNvbnN0IHRibCA9IHJlbmRlck1hcmtkb3duVGFibGUoZSk7XG4gICAgICAgICAgICAgIGlmICh0YmwpIGxpbmVzLnB1c2godGJsLCBcIlwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIGlmIChlbnRyeS50eXBlID09PSBcImxpc3RcIiAmJiBBcnJheS5pc0FycmF5KGVudHJ5Lml0ZW1zKSkge1xuICAgICAgICAgIGVudHJ5Lml0ZW1zLmZvckVhY2goKGl0OiBhbnkpID0+XG4gICAgICAgICAgICBsaW5lcy5wdXNoKGAtICR7cmVwbGFjZTVlVGFncyhpdC5lbnRyeSA/PyBpdCl9YClcbiAgICAgICAgICApO1xuICAgICAgICAgIGxpbmVzLnB1c2goXCJcIik7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cblxuICAgIG91dHB1dHMucHVzaCh7XG4gICAgICBwYXRoOiBgUGxheWVyIEJ1aWxkL0JhY2tncm91bmRzLyR7YmcubmFtZX0ubWRgLFxuICAgICAgY29udGVudDogbGluZXMuam9pbihcIlxcblwiKS50cmltRW5kKCkgKyBcIlxcblwiLFxuICAgIH0pO1xuICB9KTtcblxuICByZXR1cm4gb3V0cHV0cztcbn1cblxuLy8gXHUyMDE0XHUyMDE0XHUyMDE0IGhlbHBlcnMgXHUyMDE0XHUyMDE0XHUyMDE0XG5mdW5jdGlvbiBjYXAoc3RyOiBzdHJpbmcpIHtcbiAgcmV0dXJuIHN0ci5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIHN0ci5zbGljZSgxKTtcbn1cblxuXG5mdW5jdGlvbiBmbXRJdGVtKGl0ZW06IGFueSk6IHN0cmluZyB7XG4gIC8vIDEpIHJhdyBzdHJpbmcgb3IgdGFnZ2VkIGl0ZW1cbiAgaWYgKHR5cGVvZiBpdGVtID09PSBcInN0cmluZ1wiKSB7XG4gICAgaWYgKGl0ZW0uaW5jbHVkZXMoXCJ8XCIpKSB7XG4gICAgICByZXR1cm4gcmVwbGFjZTVlVGFncyhge0BpdGVtICR7aXRlbX19YCk7XG4gICAgfVxuICAgIHJldHVybiByZXBsYWNlNWVUYWdzKGl0ZW0pO1xuICB9XG5cbiAgLy8gMikgcHVyZSBnb2xkLXBpZWNlIGVudHJ5OiB7IHZhbHVlOiAxMCB9IG9yIHsgY29udGFpbnNWYWx1ZTogMTUwMCB9XG4gIGNvbnN0IHByaWNlUmF3ID0gKGl0ZW0uY29udGFpbnNWYWx1ZSA/PyBpdGVtLnZhbHVlKSBhcyBudW1iZXIgfCB1bmRlZmluZWQ7XG4gIGlmIChcbiAgICB0eXBlb2YgcHJpY2VSYXcgPT09IFwibnVtYmVyXCIgJiZcbiAgICAvLyBtYWtlIHN1cmUgaXRcdTIwMTlzIG5vdCBhbHNvIGFuIFx1MjAxQ2l0ZW1cdTIwMUQgb3IgXHUyMDFDZXF1aXBtZW50VHlwZVx1MjAxRFxuICAgICFpdGVtLml0ZW0gJiZcbiAgICAhaXRlbS5lcXVpcG1lbnRUeXBlICYmXG4gICAgIWl0ZW0uc3BlY2lhbFxuICApIHtcbiAgICBjb25zdCBncCA9IHByaWNlUmF3ID49IDEwMCA/IHByaWNlUmF3IC8gMTAwIDogcHJpY2VSYXc7XG4gICAgcmV0dXJuIGAke2dwfSBncGA7XG4gIH1cblxuICAvLyAzKSBleHBsaWNpdCBpdGVtIG9iamVjdCB3aXRoIG9wdGlvbmFsIHByaWNlXG4gIGlmIChpdGVtLml0ZW0pIHtcbiAgICBjb25zdCBsaW5rID0gcmVwbGFjZTVlVGFncyhge0BpdGVtICR7aXRlbS5pdGVtfX1gKTtcbiAgICBpZiAodHlwZW9mIHByaWNlUmF3ID09PSBcIm51bWJlclwiKSB7XG4gICAgICBjb25zdCBncCA9IHByaWNlUmF3ID49IDEwMCA/IHByaWNlUmF3IC8gMTAwIDogcHJpY2VSYXc7XG4gICAgICByZXR1cm4gYCR7bGlua30gKCR7Z3B9IGdwKWA7XG4gICAgfVxuICAgIHJldHVybiBsaW5rO1xuICB9XG5cbiAgLy8gNCkgc3BlY2lhbC1jYXNlIHRleHRcbiAgaWYgKHR5cGVvZiBpdGVtLnNwZWNpYWwgPT09IFwic3RyaW5nXCIpIHtcbiAgICByZXR1cm4gaXRlbS5zcGVjaWFsO1xuICB9XG5cbiAgLy8gNSkga25vd24gZXF1aXBtZW50VHlwZSBrZXlzXG4gIGlmIChpdGVtLmVxdWlwbWVudFR5cGUpIHtcbiAgICBzd2l0Y2ggKGl0ZW0uZXF1aXBtZW50VHlwZSkge1xuICAgICAgY2FzZSBcInRvb2xBcnRpc2FuXCI6XG4gICAgICAgIHJldHVybiBcIk9uZSB0eXBlIG9mIGFydGlzYW5cdTIwMTlzIHRvb2xzIChvZiB5b3VyIGNob2ljZSlcIjtcbiAgICAgIGNhc2UgXCJpbnN0cnVtZW50TXVzaWNhbFwiOlxuICAgICAgICByZXR1cm4gXCJPbmUgdHlwZSBvZiBtdXNpY2FsIGluc3RydW1lbnQgKG9mIHlvdXIgY2hvaWNlKVwiO1xuICAgICAgY2FzZSBcInNldEdhbWluZ1wiOlxuICAgICAgICByZXR1cm4gXCJPbmUgc2V0IG9mIGdhbWluZyBkaWNlIChvZiB5b3VyIGNob2ljZSlcIjtcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiBodW1hbml6ZShpdGVtLmVxdWlwbWVudFR5cGUpO1xuICAgIH1cbiAgfVxuXG4gIC8vIDYpIGZhbGxiYWNrOiBkdW1wIGFueSBsZWZ0b3ZlciB0YWcgc3ludGF4XG4gIHJldHVybiByZXBsYWNlNWVUYWdzKEpTT04uc3RyaW5naWZ5KGl0ZW0pKTtcbn1cblxuXG5cbmZ1bmN0aW9uIGh1bWFuaXplKHN0cjogc3RyaW5nKTogc3RyaW5nIHtcbiAgY29uc3Qgc3BhY2VkID0gc3RyLnJlcGxhY2UoLyhbYS16XSkoW0EtWl0pL2csIFwiJDEgJDJcIik7XG4gIHJldHVybiBzcGFjZWQuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBzcGFjZWQuc2xpY2UoMSk7XG59XG4iLCAiLy8gc3JjL3J1bGVzZXRJbnN0YWxsZXIudHNcbmltcG9ydCB7IEFwcCB9IGZyb20gXCJvYnNpZGlhblwiO1xuaW1wb3J0IHsgQVZBSUxBQkxFX0VESVRJT05TIH0gZnJvbSBcIi4vZWRpdGlvbnNcIjtcblxuLy8gU1RBVElDIGltcG9ydCBvZiBldmVyeSBpbnN0YWxsZXIgeW91IHNoaXA6XG5pbXBvcnQgKiBhcyBmaXZlZTIwMTRJbnN0YWxsZXIgZnJvbSBcIi4vcGFyc2Vycy81ZS0yMDE0L2luc3RhbGxlclwiO1xuaW1wb3J0ICogYXMgZml2ZWUyMDI1SW5zdGFsbGVyIGZyb20gXCIuL3BhcnNlcnMvNWUtMjAyNS9pbnN0YWxsZXJcIjtcbi8vIGltcG9ydCAqIGFzIGFub3RoZXJJbnN0YWxsZXIgZnJvbSBcIi4vcGFyc2Vycy9vdGhlci9pbnN0YWxsZXJcIjtcblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGltcG9ydFJ1bGVzZXREYXRhKHBhcmFtczoge1xuICBhcHA6IEFwcDtcbiAgZWRpdGlvbktleTogc3RyaW5nO1xuICB0YXJnZXRQYXRoOiBzdHJpbmc7XG59KSB7XG4gIGNvbnN0IHsgYXBwLCBlZGl0aW9uS2V5LCB0YXJnZXRQYXRoIH0gPSBwYXJhbXM7XG4gIGNvbnN0IGVkaXRpb24gPSBBVkFJTEFCTEVfRURJVElPTlMuZmluZCgoZSkgPT4gZS5pZCA9PT0gZWRpdGlvbktleSk7XG4gIGlmICghZWRpdGlvbikge1xuICAgIGNvbnNvbGUud2FybihcIkVkaXRpb24gbm90IGZvdW5kIGZvcjpcIiwgZWRpdGlvbktleSk7XG4gICAgcmV0dXJuO1xuICB9XG4gIGlmICghZWRpdGlvbi5wYXJzZXIpIHtcbiAgICBjb25zb2xlLndhcm4oXCJObyBwYXJzZXIgZGVmaW5lZCBmb3I6XCIsIGVkaXRpb25LZXkpO1xuICAgIHJldHVybjtcbiAgfVxuXG4gIC8vIGFsbCBpbnN0YWxsZXJzIGV4cG9zZSBpbXBvcnRFZGl0aW9uRGF0YSgpXG4gIGxldCBpbnN0YWxsZXJNb2R1bGU6IHsgaW1wb3J0RWRpdGlvbkRhdGE6IChhcmdzOiB7IGFwcDogQXBwOyBlZGl0aW9uOiB0eXBlb2YgZWRpdGlvbjsgdGFyZ2V0UGF0aDogc3RyaW5nIH0pID0+IFByb21pc2U8dm9pZD4gfTtcblxuICBzd2l0Y2ggKGVkaXRpb24ucGFyc2VyKSB7XG4gICAgY2FzZSBcIjVlLTIwMTRcIjpcbiAgICAgIGluc3RhbGxlck1vZHVsZSA9IGZpdmVlMjAxNEluc3RhbGxlcjtcbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgXCI1ZS0yMDI1XCI6XG4gICAgICBpbnN0YWxsZXJNb2R1bGUgPSBmaXZlZTIwMjVJbnN0YWxsZXI7XG4gICAgICBicmVhaztcbiAgICAvLyBjYXNlIFwib3RoZXItcGFyc2VyXCI6XG4gICAgLy8gICBpbnN0YWxsZXJNb2R1bGUgPSBhbm90aGVySW5zdGFsbGVyO1xuICAgIC8vICAgYnJlYWs7XG4gICAgZGVmYXVsdDpcbiAgICAgIHRocm93IG5ldyBFcnJvcihgVW5rbm93biBwYXJzZXI6ICR7ZWRpdGlvbi5wYXJzZXJ9YCk7XG4gIH1cblxuICBhd2FpdCBpbnN0YWxsZXJNb2R1bGUuaW1wb3J0RWRpdGlvbkRhdGEoeyBhcHAsIGVkaXRpb24sIHRhcmdldFBhdGggfSk7XG59XG4iLCAiXG5leHBvcnQgY29uc3QgQURWRU5UVVJFX0NBVEVHT1JZX0RFRlM6IHsgaWQ6IHN0cmluZzsgbGFiZWw6IHN0cmluZzsgdGVzdD86IFJlZ0V4cCB9W10gPSBbXG4gIHsgaWQ6ICducGNzJywgICAgIGxhYmVsOiAnTlBDcycsICAgICAgICAgICAgICAgdGVzdDogL05vbi1QbGF5ZXIgQ2hhcmFjdGVyc1xcLy8gfSxcbiAgeyBpZDogJ3BjcycsICAgICAgbGFiZWw6ICdQbGF5ZXIgQ2hhcmFjdGVycycsICB0ZXN0OiAvUGxheWVyIENoYXJhY3RlcnNcXC8vIH0sXG4gIHsgaWQ6ICdmYWN0aW9ucycsIGxhYmVsOiAnRmFjdGlvbnMnLCAgICAgICAgICAgdGVzdDogL0ZhY3Rpb25zXFwvLyB9LFxuICB7IGlkOiAnbW9uc3RlcnMnLCBsYWJlbDogJ01vbnN0ZXJzJywgICAgICAgICAgIHRlc3Q6IC9Db21wZW5kaXVtXFwvQmVzdGlhcnlcXC8vIH0sXG4gIHsgaWQ6ICdpdGVtcycsICAgIGxhYmVsOiAnSXRlbXMnLCAgICAgICAgICAgICAgdGVzdDogL0NvbXBlbmRpdW1cXC9JdGVtc1xcLy8gfSxcbiAgeyBpZDogJ3NwZWxscycsICAgbGFiZWw6ICdTcGVsbHMnLCAgICAgICAgICAgICB0ZXN0OiAvQ29tcGVuZGl1bVxcL1NwZWxsc1xcLy8gfSxcbiAgeyBpZDogJ2hpc3RvcnknLCAgbGFiZWw6ICdIaXN0b3J5JywgICAgICAgICAgICB0ZXN0OiAvV29ybGRcXC9IaXN0b3J5XFwvLyB9LFxuICB7IGlkOiAnZXZlbnRzJywgICBsYWJlbDogJ0V2ZW50cycsICAgICAgICAgICAgIHRlc3Q6IC9Xb3JsZFxcL0V2ZW50c1xcLy8gfSxcbiAgeyBpZDogJ2RlaXRpZXMnLCAgbGFiZWw6ICdEZWl0aWVzJywgICAgICAgICAgICB0ZXN0OiAvRGVpdGllc1xcLy8gfSxcbiAgeyBpZDogJ3BsYWNlcycsICAgbGFiZWw6ICdQbGFjZXMnLCAgICAgICAgICAgICB0ZXN0OiAvV29ybGRcXC9QbGFjZXNcXC8vIH0sXG4gIHsgaWQ6ICdvdGhlcicsICAgIGxhYmVsOiAnT3RoZXInIH0sXG5dO1xuXG5leHBvcnQgY29uc3QgZ2V0QWR2ZW50dXJlQ2F0ZWdvcnlJZHMgPSAoKTogc3RyaW5nW10gPT5cbiAgQURWRU5UVVJFX0NBVEVHT1JZX0RFRlMubWFwKGQgPT4gZC5pZCk7XG4iLCAiaW1wb3J0IHsgVmF1bHQgfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgeyBjcmVhdGVIYXNoIH0gZnJvbSAnY3J5cHRvJztcblxuZXhwb3J0IGludGVyZmFjZSBUb29sa2l0RmlsZUNhY2hlRW50cnkge1xuXHRoYXNoOiBzdHJpbmc7XG5cdGdpdGh1YlBhdGg6IHN0cmluZztcbn1cblxuZXhwb3J0IHR5cGUgVG9vbGtpdEZpbGVDYWNoZSA9IFJlY29yZDxzdHJpbmcsIFRvb2xraXRGaWxlQ2FjaGVFbnRyeT47IC8vIHZhdWx0UGF0aCA9PiB7aGFzaCwgZ2l0aHViUGF0aH1cblxuZXhwb3J0IGNsYXNzIFRvb2xraXRGaWxlQ2FjaGVNYW5hZ2VyIHtcblx0cHJpdmF0ZSB2YXVsdDogVmF1bHQ7XG5cdHByaXZhdGUgY2FjaGU6IFRvb2xraXRGaWxlQ2FjaGU7XG5cdHByaXZhdGUgc2F2ZTogKCkgPT4gUHJvbWlzZTx2b2lkPjtcblxuXHRjb25zdHJ1Y3Rvcih2YXVsdDogVmF1bHQsIGluaXRpYWxDYWNoZTogVG9vbGtpdEZpbGVDYWNoZSB8IHVuZGVmaW5lZCwgc2F2ZUNhbGxiYWNrOiAoKSA9PiBQcm9taXNlPHZvaWQ+KSB7XG5cdFx0dGhpcy52YXVsdCA9IHZhdWx0O1xuXHRcdHRoaXMuY2FjaGUgPSBpbml0aWFsQ2FjaGUgfHwge307XG5cdFx0dGhpcy5zYXZlID0gc2F2ZUNhbGxiYWNrO1xuXHR9XG5cblx0cHJpdmF0ZSBoYXNoQ29udGVudChjb250ZW50OiBzdHJpbmcpOiBzdHJpbmcge1xuXHRcdHJldHVybiBjcmVhdGVIYXNoKCdzaGEyNTYnKS51cGRhdGUoY29udGVudCkuZGlnZXN0KCdoZXgnKTtcblx0fVxuXG5cdGFzeW5jIGlzVXBUb0RhdGUodmF1bHRQYXRoOiBzdHJpbmcpOiBQcm9taXNlPGJvb2xlYW4+IHtcblx0XHQvL2NvbnNvbGUubG9nKGBcdUQ4M0RcdUREMEQgQ2hlY2tpbmcgaWYgXCIke3ZhdWx0UGF0aH1cIiBpcyB1cCB0byBkYXRlLmApO1xuXHRcblx0XHRjb25zdCBlbnRyeSA9IHRoaXMuY2FjaGVbdmF1bHRQYXRoXTtcblx0XHRpZiAoIWVudHJ5KSB7XG5cdFx0XHQvL2NvbnNvbGUubG9nKGBcdTI3NEMgTm8gY2FjaGVkIGhhc2ggZm91bmQgZm9yOiAke3ZhdWx0UGF0aH1gKTtcblx0XHRcdHJldHVybiBmYWxzZTtcblx0XHR9XG5cdFxuXHRcdGNvbnN0IGV4aXN0cyA9IGF3YWl0IHRoaXMudmF1bHQuYWRhcHRlci5leGlzdHModmF1bHRQYXRoKTtcblx0XHRpZiAoIWV4aXN0cykge1xuXHRcdFx0Ly9jb25zb2xlLmxvZyhgXHUyNzRDIEZpbGUgZG9lcyBub3QgZXhpc3QgaW4gdmF1bHQ6ICR7dmF1bHRQYXRofWApO1xuXHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdH1cblx0XG5cdFx0Y29uc3QgY29udGVudCA9IGF3YWl0IHRoaXMudmF1bHQuYWRhcHRlci5yZWFkKHZhdWx0UGF0aCk7XG5cdFx0Y29uc3QgbG9jYWxIYXNoID0gdGhpcy5oYXNoQ29udGVudChjb250ZW50KTtcblx0XHRjb25zdCBpc1NhbWUgPSBsb2NhbEhhc2ggPT09IGVudHJ5Lmhhc2g7XG5cdFxuXHRcdC8vY29uc29sZS5sb2coYFx1RDgzRFx1REQyMiBMb2NhbCBoYXNoOiAgJHtsb2NhbEhhc2h9YCk7XG5cdFx0Ly9jb25zb2xlLmxvZyhgXHVEODNEXHVEQ0U2IENhY2hlZCBoYXNoOiAke2VudHJ5Lmhhc2h9YCk7XG5cdFx0Ly9jb25zb2xlLmxvZyhpc1NhbWUgPyBgXHUyNzA1IEZpbGUgaXMgdXAgdG8gZGF0ZS5gIDogYFx1RDgzRFx1REQwMSBGaWxlIG5lZWRzIHVwZGF0ZS5gKTtcblx0XG5cdFx0cmV0dXJuIGlzU2FtZTtcblx0fVxuXHRcblxuXHRhc3luYyB1cGRhdGVDYWNoZSh2YXVsdFBhdGg6IHN0cmluZywgY29udGVudDogc3RyaW5nLCBnaXRodWJQYXRoOiBzdHJpbmcsIHNhdmVOb3c6IGJvb2xlYW4gPSB0cnVlKSB7XG5cdFx0dGhpcy5jYWNoZVt2YXVsdFBhdGhdID0ge1xuXHRcdFx0aGFzaDogdGhpcy5oYXNoQ29udGVudChjb250ZW50KSxcblx0XHRcdGdpdGh1YlBhdGhcblx0XHR9O1xuXHRcdGlmIChzYXZlTm93KSBhd2FpdCB0aGlzLnNhdmUoKTtcblx0fVxuXG5cdGdldENhY2hlKCk6IFRvb2xraXRGaWxlQ2FjaGUge1xuXHRcdHJldHVybiB0aGlzLmNhY2hlO1xuXHR9XG5cblx0Z2V0VHJhY2tlZEZpbGVzKCk6IHN0cmluZ1tdIHtcblx0XHRyZXR1cm4gT2JqZWN0LmtleXModGhpcy5jYWNoZSk7XG5cdH1cblxuXHRnZXRHaXRIdWJQYXRoKHZhdWx0UGF0aDogc3RyaW5nKTogc3RyaW5nIHwgdW5kZWZpbmVkIHtcblx0XHRyZXR1cm4gdGhpcy5jYWNoZVt2YXVsdFBhdGhdPy5naXRodWJQYXRoO1xuXHR9XG5cblx0cmVzZXRDYWNoZSgpIHtcblx0XHR0aGlzLmNhY2hlID0ge307XG5cdH1cblxuXHRhc3luYyByZW1vdmVGcm9tQ2FjaGUodmF1bHRQYXRoOiBzdHJpbmcpIHtcblx0XHRkZWxldGUgdGhpcy5jYWNoZVt2YXVsdFBhdGhdO1xuXHRcdGF3YWl0IHRoaXMuc2F2ZSgpO1xuXHR9XG59XG4iLCAiaW1wb3J0IHsgbm9ybWFsaXplUGF0aCwgVmF1bHQsIEFwcCwgTm90aWNlIH0gZnJvbSAnb2JzaWRpYW4nO1xuaW1wb3J0IHsgZGlybmFtZSwgYmFzZW5hbWUsIGpvaW4gfSBmcm9tICdwYXRoJztcbmltcG9ydCB7IHByb21pc2VzIGFzIGZzIH0gZnJvbSAnZnMnO1xuXG5leHBvcnQgY2xhc3MgQmFja3VwTWFuYWdlciB7XG4gIGNvbnN0cnVjdG9yKHByaXZhdGUgYXBwOiBBcHApIHt9XG5cbiAgYXN5bmMgYmFja3VwVmF1bHRNaXJyb3IobGFiZWw/OiBzdHJpbmcsIG1heEZ1bGxCYWNrdXBzOiBudW1iZXIgPSA1KTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgICBjb25zdCB0cyA9IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKS5yZXBsYWNlKC9bOi5dL2csICctJyk7XG4gICAgY29uc3QgdGFnID0gbGFiZWwgPyBgLSR7bGFiZWx9YCA6ICcnO1xuICAgIGNvbnN0IGJhc2UgPSBub3JtYWxpemVQYXRoKGAudmF1bHQtYmFja3Vwcy9mdWxsLyR7dHN9JHt0YWd9YCk7XG5cbiAgICBhd2FpdCB0aGlzLmVuc3VyZUZvbGRlckV4aXN0cyhiYXNlKTtcblxuICAgIGZvciAoY29uc3QgZmlsZSBvZiB0aGlzLmFwcC52YXVsdC5nZXRGaWxlcygpKSB7XG4gICAgICBjb25zdCBwID0gZmlsZS5wYXRoO1xuICAgICAgaWYgKFxuICAgICAgICBwLnN0YXJ0c1dpdGgoJy52YXVsdC1iYWNrdXBzLycpIHx8XG4gICAgICAgIHAuc3RhcnRzV2l0aChgJHt0aGlzLmFwcC52YXVsdC5jb25maWdEaXJ9L2ApIHx8XG4gICAgICAgIHAuc3RhcnRzV2l0aCgnLnRyYXNoLycpIHx8XG4gICAgICAgIHAuc3RhcnRzV2l0aCgnLmdpdC8nKVxuICAgICAgKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICBjb25zdCB0YXJnZXQgPSBub3JtYWxpemVQYXRoKGAke2Jhc2V9LyR7cH1gKTtcbiAgICAgIGF3YWl0IHRoaXMuZW5zdXJlRm9sZGVyRXhpc3RzKGRpcm5hbWUodGFyZ2V0KSk7XG5cbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCB0aGlzLmFwcC52YXVsdC5hZGFwdGVyLnJlYWRCaW5hcnkocCk7XG4gICAgICAgIGF3YWl0IHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXIud3JpdGVCaW5hcnkodGFyZ2V0LCBkYXRhKTtcbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignW0JhY2t1cE1hbmFnZXJdIGNvcHkgZmFpbGVkOicsIHAsIGUpO1xuICAgICAgICAvLyBjb250aW51ZSB0byBuZXh0IGZpbGVcbiAgICAgIH1cbiAgICB9XG4gICAgYXdhaXQgdGhpcy5wcnVuZUZ1bGxCYWNrdXBzKGJhc2UsIG1heEZ1bGxCYWNrdXBzKTtcbiAgICBuZXcgTm90aWNlKFwiXHUyNzA1IEJhY2t1cCBjb21wbGV0ZSFcIik7XG4gICAgcmV0dXJuIGJhc2U7XG4gIH1cblxuICAvKipcbiAgICogTGVnYWN5IGFsaWFzIGZvciBtaXJyb3ItYmFzZWQgYmFja3Vwc1xuICAgKi9cbiAgYXN5bmMgYmFja3VwVmF1bHRUb1ppcChsYWJlbD86IHN0cmluZyk6IFByb21pc2U8c3RyaW5nPiB7XG4gICAgcmV0dXJuIHRoaXMuYmFja3VwVmF1bHRNaXJyb3IobGFiZWwpO1xuICB9XG5cbiAgLyoqXG4gICAqIERlbGV0ZXMgb2xkZXN0IGZ1bGwgYmFja3VwIGZvbGRlcnMsIGtlZXBpbmcgb25seSB0aGUgbW9zdCByZWNlbnQgYGtlZXBgIHNuYXBzaG90cy5cbiAgICovXG4gIHByaXZhdGUgYXN5bmMgcHJ1bmVGdWxsQmFja3VwcyhjdXJyZW50UGF0aDogc3RyaW5nLCBrZWVwOiBudW1iZXIpIHtcbiAgY29uc3Qgcm9vdCA9IG5vcm1hbGl6ZVBhdGgoJy52YXVsdC1iYWNrdXBzL2Z1bGwnKTtcbiAgYXdhaXQgdGhpcy5lbnN1cmVGb2xkZXJFeGlzdHMocm9vdCk7XG5cbiAgY29uc3QgbGlzdGluZyA9IGF3YWl0IHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXIubGlzdChyb290KTtcbiAgY29uc3QgZm9sZGVyUGF0aHM6IHN0cmluZ1tdID0gKGxpc3RpbmcgYXMgYW55KT8uZm9sZGVycyA/PyBbXTtcbiAgY29uc3QgbmFtZXMgPSBmb2xkZXJQYXRocy5tYXAoZiA9PiBiYXNlbmFtZShmKSk7XG5cbiAgLy8gc29ydCBuZXdlc3RcdTIxOTJvbGRlc3QgYnkgSVNPLWlzaCBmb2xkZXIgbmFtZVxuICBjb25zdCBzb3J0ZWQgPSBbLi4ubmFtZXNdLnNvcnQoKGEsIGIpID0+IGIubG9jYWxlQ29tcGFyZShhKSk7XG5cbiAgY29uc3QgdG9SZW1vdmUgPSBzb3J0ZWQuc2xpY2Uoa2VlcCk7XG4gIGZvciAoY29uc3QgbmFtZSBvZiB0b1JlbW92ZSkge1xuICAgIGNvbnN0IHZhdWx0UGF0aCA9IG5vcm1hbGl6ZVBhdGgoYCR7cm9vdH0vJHtuYW1lfWApO1xuICAgIHRyeSB7XG4gICAgICAvLyByZW1vdmUgc25hcHNob3QgZm9sZGVyIHJlY3Vyc2l2ZWx5IHZpYSBhZGFwdGVyXG4gICAgICBhd2FpdCB0aGlzLmFwcC52YXVsdC5hZGFwdGVyLnJtZGlyKHZhdWx0UGF0aCwgdHJ1ZSk7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgY29uc29sZS5lcnJvcignW0JhY2t1cE1hbmFnZXJdIHBydW5lIGZhaWxlZDonLCB2YXVsdFBhdGgsIGUpO1xuICAgIH1cbiAgfVxufVxuXG4gIC8qKlxuICAgKiBSZWN1cnNpdmVseSBlbnN1cmVzIHRoYXQgYSBkaXJlY3RvcnkgZXhpc3RzIGluIHRoZSB2YXVsdC5cbiAgICovXG4gIHByaXZhdGUgYXN5bmMgZW5zdXJlRm9sZGVyRXhpc3RzKGZvbGRlclBhdGg6IHN0cmluZykge1xuICAgIGlmICghZm9sZGVyUGF0aCB8fCAoYXdhaXQgdGhpcy5hcHAudmF1bHQuYWRhcHRlci5leGlzdHMoZm9sZGVyUGF0aCkpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IHBhcmVudCA9IGRpcm5hbWUoZm9sZGVyUGF0aCk7XG4gICAgYXdhaXQgdGhpcy5lbnN1cmVGb2xkZXJFeGlzdHMocGFyZW50KTtcbiAgICBhd2FpdCB0aGlzLmFwcC52YXVsdC5jcmVhdGVGb2xkZXIoZm9sZGVyUGF0aCk7XG4gIH1cbn1cbiIsICJpbXBvcnQge1xuICBJdGVtVmlldyxcbiAgV29ya3NwYWNlTGVhZixcbiAgVEZpbGUsXG4gIE5vdGljZSxcbiAgQnV0dG9uQ29tcG9uZW50LFxuICBNYXJrZG93blZpZXcsXG4gIFNldHRpbmcsXG4gIFRGb2xkZXIsXG4gIHNldEljb24sXG4gIEFwcCxcbn0gZnJvbSAnb2JzaWRpYW4nO1xuaW1wb3J0IHsgU1BFTExCT09LX1ZJRVdfVFlQRSB9IGZyb20gJy4vc2Itc3BlbGxib29rJztcbmltcG9ydCB7IEFEVkVOVFVSRV9DQVRFR09SWV9ERUZTLCBnZXRBZHZlbnR1cmVDYXRlZ29yeUlkcyB9IGZyb20gJ3NyYy9hZHYtY2F0ZWdvcmllcyc7XG5cblxuZnVuY3Rpb24gZ2V0VG9vbGtpdChhcHA6IEFwcCk6IGFueSB7XG4gIGNvbnN0IHBtOiBhbnkgPSAoYXBwIGFzIGFueSkucGx1Z2lucztcbiAgcmV0dXJuIChcbiAgICBwbS5nZXRQbHVnaW4/LigndnZ1bmRlcmxvcmUtdG9vbGtpdC1wbHVnaW4nKSB8fFxuICAgIHBtLmdldFBsdWdpbj8uKCd2dnVuZGVybG9yZS10b29sa2l0JykgfHxcbiAgICBPYmplY3QudmFsdWVzKHBtLnBsdWdpbnMgfHwge30pLmZpbmQoKHA6IGFueSkgPT5cbiAgICAgIHA/Lm1hbmlmZXN0Py5pZD8uc3RhcnRzV2l0aD8uKCd2dnVuZGVybG9yZS10b29sa2l0JylcbiAgICApXG4gICk7XG59XG5cblxuZXhwb3J0IGNvbnN0IFNJREVCQVJfVklFV19UWVBFID0gJ3Z2dW5kZXJsb3JlLXRlbXBsYXRlcy1zaWRlYmFyJztcblxuZnVuY3Rpb24gZ2V0RnVsbENvbW1hbmRJZChhcHA6IEFwcCwgc2hvcnRJZDogc3RyaW5nKTogc3RyaW5nIHtcbiAgaWYgKHNob3J0SWQuaW5jbHVkZXMoJzonKSkgcmV0dXJuIHNob3J0SWQ7XG4gIGNvbnN0IHJlZ2lzdHJ5OiBSZWNvcmQ8c3RyaW5nLCBhbnk+ID0gKGFwcCBhcyBhbnkpLmNvbW1hbmRzPy5jb21tYW5kcyB8fCB7fTtcbiAgY29uc3QgbWF0Y2ggPSBPYmplY3Qua2V5cyhyZWdpc3RyeSkuZmluZChrID0+IGsuZW5kc1dpdGgoYDoke3Nob3J0SWR9YCkpO1xuICBpZiAobWF0Y2gpIHJldHVybiBtYXRjaDtcbiAgY29uc3QgcGx1Z2luID0gZ2V0VG9vbGtpdChhcHApO1xuICByZXR1cm4gcGx1Z2luPy5tYW5pZmVzdD8uaWQgPyBgJHtwbHVnaW4ubWFuaWZlc3QuaWR9OiR7c2hvcnRJZH1gIDogc2hvcnRJZDtcbn1cblxuZnVuY3Rpb24gY2FwdHVyZVNlbGVjdGlvbk9yV29yZChhcHA6IEFwcCwgc2lkZWJhcjogU2lkZWJhclRlbXBsYXRlc1ZpZXcpIHtcbiAgcmV0dXJuIHNpZGViYXIubGFzdFNlbGVjdGlvbjtcbn1cblxudHlwZSBUZW1wbGF0ZUJ1dHRvbiA9IHsgbGFiZWw6IHN0cmluZzsgcGF0aDogc3RyaW5nIH0gfCB7IGxhYmVsOiBzdHJpbmc7IGNvbW1hbmRJZDogc3RyaW5nIH07XG5cbmNvbnN0IFRFTVBMQVRFX0JVVFRPTlM6IFRlbXBsYXRlQnV0dG9uW10gPSBbXG4gIHsgbGFiZWw6ICdOZXcgQWR2ZW50dXJlJywgcGF0aDogJ0V4dHJhcy9UZW1wbGF0ZXMvbmV3YWR2ZW50dXJlX3RlbXBsYXRlLm1kJyB9LFxuICB7IGxhYmVsOiAnTmV3IFBDJywgY29tbWFuZElkOiAndnYtbmV3LXBjJyB9LFxuICB7IGxhYmVsOiAnTmV3IE5QQycsIGNvbW1hbmRJZDogJ3Z2LW5ldy1ucGMnIH0sXG4gIHsgbGFiZWw6ICdOZXcgSXRlbScsIGNvbW1hbmRJZDogJ3Z2LW5ldy1pdGVtJyB9LFxuICB7IGxhYmVsOiAnTmV3IFBsYWNlJywgY29tbWFuZElkOiAndnYtbmV3LXBsYWNlJyB9LFxuICB7IGxhYmVsOiAnTmV3IENyZWF0dXJlJywgY29tbWFuZElkOiAndnYtbmV3LWNyZWF0dXJlJyB9LFxuXTtcblxuY29uc3QgU0NIT09MX0FCQlI6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4gPSB7XG4gIEFianVyYXRpb246IFwiQWJqLlwiLFxuICBDb25qdXJhdGlvbjogXCJDb25qLlwiLFxuICBEaXZpbmF0aW9uOiBcIkRpdi5cIixcbiAgRW5jaGFudG1lbnQ6IFwiRW5jaC5cIixcbiAgRXZvY2F0aW9uOiBcIkVudm8uXCIsXG4gIElsbHVzaW9uOiBcIklsbHUuXCIsXG4gIE5lY3JvbWFuY3k6IFwiTmVjLlwiLFxuICBUcmFuc211dGF0aW9uOiBcIlRyYW5zLlwiXG59O1xuXG5jb25zdCBEQU1BR0VfQUJCUjogUmVjb3JkPHN0cmluZywgc3RyaW5nPiA9IHtcbiAgYWNpZDogXCJBY2lkXCIsXG4gIGNvbGQ6IFwiQ29sZFwiLFxuICBmaXJlOiBcIkZpcmVcIixcbiAgZm9yY2U6IFwiRm9yY2VcIixcbiAgbGlnaHRuaW5nOiBcIkx0bmcuXCIsXG4gIG5lY3JvdGljOiBcIk5lY3JvXCIsXG4gIHBvaXNvbjogXCJQb2lzLlwiLFxuICBwc3ljaGljOiBcIlBzeWMuXCIsXG4gIHJhZGlhbnQ6IFwiUmFkaS5cIixcbiAgdGh1bmRlcjogXCJUaHVuLlwiLFxuICBibHVkZ2VvbmluZzogXCJCbHVkZy5cIixcbiAgcGllcmNpbmc6IFwiUGllcmNlXCIsXG4gIHNsYXNoaW5nOiBcIlNsYXNoXCJcbn07XG5cbmV4cG9ydCBjbGFzcyBTaWRlYmFyVGVtcGxhdGVzVmlldyBleHRlbmRzIEl0ZW1WaWV3IHtcbiAgY29uc3RydWN0b3IobGVhZjogV29ya3NwYWNlTGVhZikge1xuICAgIHN1cGVyKGxlYWYpO1xuICB9XG5cbiAgZ2V0Vmlld1R5cGUoKSB7IHJldHVybiBTSURFQkFSX1ZJRVdfVFlQRTsgfVxuICBnZXREaXNwbGF5VGV4dCgpIHsgcmV0dXJuICdWVm9ybGRidWlsaW5nJzsgfVxuICBnZXRJY29uKCkgeyByZXR1cm4gJ21hcG1ha2luZyc7IH1cblxuICBwdWJsaWMgbGFzdFNlbGVjdGlvbjoge1xuICAgIHRleHQ6IHN0cmluZztcbiAgICBmaWxlUGF0aDogc3RyaW5nO1xuICAgIGZyb206IENvZGVNaXJyb3IuUG9zaXRpb247XG4gICAgdG86IENvZGVNaXJyb3IuUG9zaXRpb247XG4gICAgcHJlVGV4dDogc3RyaW5nO1xuICB9IHwgbnVsbCA9IG51bGw7XG5cblxuICBwcml2YXRlIHNwZWxsU29ydEtleTogJ25hbWUnIHwgJ2xldmVsJyB8ICdzY2hvb2wnIHwgJ2RhbWFnZScgPSAnbmFtZSc7XG4gIHByaXZhdGUgc3BlbGxTb3J0RGlyOiAxIHwgLTEgPSAxO1xuXG4gIC8vIFx1MjUwMFx1MjUwMCBTZWxlY3RlZCBTcGVsbHMgKG1lbW9yeSBvbmx5OyBubyBwZXJzaXN0ZW5jZSkgXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXG4gIHByaXZhdGUgcGlja3M6IHN0cmluZ1tdID0gW107XG4gIHByaXZhdGUgYWRkQnRuQnlQYXRoID0gbmV3IE1hcDxzdHJpbmcsIEhUTUxCdXR0b25FbGVtZW50PigpOyAvLyB0YWJsZSBcdTIwMUNBZGRcdTIwMUQgYnV0dG9ucyBieSBmaWxlIHBhdGhcblxuICBwcml2YXRlIF9kZENsb3Nlcj86IChldjogUG9pbnRlckV2ZW50KSA9PiB2b2lkO1xuXG4gIHByaXZhdGUgYnVpbGREYXRhdmlld0ZvclBpY2tzKCk6IHN0cmluZyB7XG4gICAgY29uc3QgcGF0aHMgPSB0aGlzLnBpY2tzLm1hcChwID0+IGBcIiR7cC5yZXBsYWNlKC9cIi9nLCAnXFxcXFwiJyl9XCJgKS5qb2luKCcsICcpO1xuICAgIHJldHVybiBbXG4gICAgICAnYGBgZGF0YXZpZXcnLFxuICAgICAgJ1RBQkxFJyxcbiAgICAgICcgIGxldmVsIEFTIFwiTHZsXCIsJyxcbiAgICAgICcgIHNjaG9vbCBBUyBcIlNjaG9vbFwiLCcsXG4gICAgICAnICBkYW1hZ2VfdHlwZSBBUyBcIkRhbWFnZVwiLCcsXG4gICAgICAnICByYW5nZSBBUyBcIlJhbmdlXCIsJyxcbiAgICAgICcgIGNhc3RpbmdfdGltZSBBUyBcIkNhc3RpbmcgVGltZVwiJyxcbiAgICAgICdXSEVSRSBjb250YWlucyhbJyArIHBhdGhzICsgJ10sIGZpbGUucGF0aCknLFxuICAgICAgJ1NPUlQgbGV2ZWwgQVNDLCBuYW1lIEFTQycsXG4gICAgICAnYGBgJ1xuICAgIF0uam9pbignXFxuJyk7XG4gIH1cblxuICBwcml2YXRlIF9yZXdpcmVQcmV2aWV3cygpOiB2b2lkIHtcbiAgICBjb25zdCBlbmFibGVQcmV2aWV3ID0gISFnZXRUb29sa2l0KHRoaXMuYXBwKT8uc2V0dGluZ3M/LmVuYWJsZVNpZGViYXJQcmV2aWV3cztcbiAgICBjb25zdCB3cmFwID0gdGhpcy5jb250ZW50RWw7IC8vIHBhcmVudCBjb250YWluZXIgZm9yIHRoaXMgdmlld1xuICAgIGNvbnN0IHBhZ2VQcmV2aWV3ID0gKHRoaXMuYXBwIGFzIGFueSkuaW50ZXJuYWxQbHVnaW5zPy5nZXRQbHVnaW5CeUlkPy4oJ3BhZ2UtcHJldmlldycpPy5pbnN0YW5jZTtcblxuICAgIC8vIElmIHByZXZpb3VzbHkgd2lyZWQgYnV0IG5vdyBkaXNhYmxlZCwgcmVtb3ZlIHRoZSBoYW5kbGVyXG4gICAgaWYgKCh3cmFwIGFzIGFueSkuX3Z2SG92ZXJXaXJlZCAmJiAhZW5hYmxlUHJldmlldykge1xuICAgICAgY29uc3QgcHJldiA9ICh3cmFwIGFzIGFueSkuX3Z2SG92ZXJIYW5kbGVyIGFzICgoZXY6IE1vdXNlRXZlbnQpID0+IHZvaWQpIHwgdW5kZWZpbmVkO1xuICAgICAgaWYgKHByZXYpIHdyYXAucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgcHJldik7XG4gICAgICBkZWxldGUgKHdyYXAgYXMgYW55KS5fdnZIb3ZlcldpcmVkO1xuICAgICAgZGVsZXRlICh3cmFwIGFzIGFueSkuX3Z2SG92ZXJIYW5kbGVyO1xuICAgIH1cblxuICAgIC8vIElmIGVuYWJsZWQgYW5kIG5vdCB5ZXQgd2lyZWQsIGF0dGFjaCBoYW5kbGVyXG4gICAgaWYgKGVuYWJsZVByZXZpZXcgJiYgcGFnZVByZXZpZXc/Lm9uTGlua0hvdmVyICYmICEod3JhcCBhcyBhbnkpLl92dkhvdmVyV2lyZWQpIHtcbiAgICAgIGNvbnN0IGhhbmRsZXIgPSAoZXY6IE1vdXNlRXZlbnQpID0+IHtcbiAgICAgICAgY29uc3QgdCA9IGV2LnRhcmdldCBhcyBIVE1MRWxlbWVudCB8IG51bGw7XG4gICAgICAgIGNvbnN0IGEgPSB0Py5jbG9zZXN0KCdhLmludGVybmFsLWxpbmsnKSBhcyBIVE1MQW5jaG9yRWxlbWVudCB8IG51bGw7XG4gICAgICAgIGlmICghYSkgcmV0dXJuO1xuICAgICAgICBjb25zdCBsaW5rVGV4dCA9IGEuZ2V0QXR0cmlidXRlKCdkYXRhLWhyZWYnKSB8fCBhLmdldEF0dHJpYnV0ZSgnaHJlZicpO1xuICAgICAgICBpZiAoIWxpbmtUZXh0KSByZXR1cm47XG4gICAgICAgIC8vIHNvdXJjZSBwYXRoIG5vdCBjcml0aWNhbCBoZXJlOyBwYXNzIGVtcHR5IHNpbmNlIHRoZXNlIGxpbmtzIGNhbiBjb21lIGZyb20gbWl4ZWQgc291cmNlc1xuICAgICAgICBwYWdlUHJldmlldy5vbkxpbmtIb3ZlcihldiwgYSwgbGlua1RleHQsICcnKTtcbiAgICAgIH07XG4gICAgICB3cmFwLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIGhhbmRsZXIpO1xuICAgICAgKHdyYXAgYXMgYW55KS5fdnZIb3ZlcldpcmVkID0gdHJ1ZTtcbiAgICAgICh3cmFwIGFzIGFueSkuX3Z2SG92ZXJIYW5kbGVyID0gaGFuZGxlcjtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGJ1aWxkSW5jb21pbmdSZWZDb3VudHMoKTogTWFwPHN0cmluZywgbnVtYmVyPiB7XG4gICAgY29uc3QgaW5jb21pbmcgPSBuZXcgTWFwPHN0cmluZywgbnVtYmVyPigpO1xuICAgIGNvbnN0IHJlc29sdmVkID0gdGhpcy5hcHAubWV0YWRhdGFDYWNoZVxuICAgICAgLnJlc29sdmVkTGlua3MgYXMgUmVjb3JkPHN0cmluZywgUmVjb3JkPHN0cmluZywgbnVtYmVyPj47XG5cbiAgICBmb3IgKGNvbnN0IGZyb20gaW4gcmVzb2x2ZWQpIHtcbiAgICAgIGNvbnN0IHRvTWFwID0gcmVzb2x2ZWRbZnJvbV07XG4gICAgICBmb3IgKGNvbnN0IHRvIGluIHRvTWFwKSB7XG4gICAgICAgIGluY29taW5nLnNldCh0bywgKGluY29taW5nLmdldCh0bykgfHwgMCkgKyAodG9NYXBbdG9dIHx8IDEpKTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGluY29taW5nO1xuICB9XG5cbiAgcHJpdmF0ZSByZW5kZXJQaWNrcygpOiB2b2lkIHtcbiAgICBjb25zdCBwaWNrc0RpdiA9IHRoaXMuY29udGFpbmVyRWwuZmluZCgnI3NwZWxsYm9vay1waWNrcycpIGFzIEhUTUxEaXZFbGVtZW50O1xuICAgIGlmICghcGlja3NEaXYpIHJldHVybjtcbiAgICBwaWNrc0Rpdi5lbXB0eSgpO1xuXG4gICAgLy8gT3V0ZXIgd3JhcHBlciB3aXRoIGJsYWNrIGJvcmRlclxuICAgIGNvbnN0IHdyYXBwZXIgPSBwaWNrc0Rpdi5jcmVhdGVEaXYoKTtcbiAgICB3cmFwcGVyLnNldEF0dHIoJ3N0eWxlJywgW1xuICAgICAgJ2JvcmRlcjoxLjVweCBzb2xpZCBibGFjaycsXG4gICAgICAnYm9yZGVyLXJhZGl1czo2cHgnLFxuICAgICAgJ3BhZGRpbmc6OHB4JyxcbiAgICAgICdtYXJnaW4tdG9wOjhweCcsXG4gICAgICAnYmFja2dyb3VuZDp2YXIoLS1iYWNrZ3JvdW5kLXNlY29uZGFyeSknXG4gICAgXS5qb2luKCc7JykpO1xuXG4gICAgY29uc3QgZGV0YWlscyA9IHdyYXBwZXIuY3JlYXRlRWwoJ2RldGFpbHMnLCB7IGF0dHI6IHsgb3BlbjogJ3RydWUnIH0gfSk7XG5cbiAgICAvLyBIZWFkZXIgd2l0aG91dCBib3JkZXIgbm93XG4gICAgY29uc3Qgc3VtbWFyeSA9IGRldGFpbHMuY3JlYXRlRWwoJ3N1bW1hcnknLCB7IHRleHQ6ICdTZWxlY3RlZCBTcGVsbHMnIH0pO1xuICAgIHN1bW1hcnkuc2V0QXR0cignc3R5bGUnLCBbXG4gICAgICAnZm9udC1zaXplOjEuMWVtJyxcbiAgICAgICdmb250LXdlaWdodDo2MDAnLFxuICAgICAgJ21hcmdpbjowIDAgNHB4JyxcbiAgICAgICdjdXJzb3I6cG9pbnRlcicsXG4gICAgICAncGFkZGluZzo0cHggOHB4JyxcbiAgICAgICdiYWNrZ3JvdW5kOnZhcigtLWJhY2tncm91bmQtc2Vjb25kYXJ5KScsXG4gICAgICAnYm9yZGVyLXJhZGl1czo0cHgnXG4gICAgXS5qb2luKCc7JykpO1xuXG4gICAgY29uc3QgYm9keSA9IGRldGFpbHMuY3JlYXRlRGl2KCk7XG4gICAgY29uc3QgZ3JpZCA9IGJvZHkuY3JlYXRlRGl2KCk7XG4gICAgZ3JpZC5zZXRBdHRyKCdzdHlsZScsIFtcbiAgICAgICdkaXNwbGF5OmdyaWQnLFxuICAgICAgJ2dyaWQtdGVtcGxhdGUtY29sdW1uczoxZnInLFxuICAgICAgJ3Jvdy1nYXA6MnB4JyxcbiAgICAgICdtYXJnaW46OHB4IDAnLFxuICAgICAgJ3BhZGRpbmc6MCAxNnB4JyAvL3NpZGVwYWRkaW5nXG4gICAgXS5qb2luKCc7JykpO1xuXG4gICAgaWYgKCF0aGlzLnBpY2tzLmxlbmd0aCkge1xuICAgICAgY29uc3QgZW1wdHkgPSBncmlkLmNyZWF0ZUVsKCdkaXYnLCB7IHRleHQ6ICdObyBzcGVsbHMgc2VsZWN0ZWQgeWV0LicgfSk7XG4gICAgICBlbXB0eS5zZXRBdHRyKCdzdHlsZScsICdvcGFjaXR5OjAuNzsnKTtcbiAgICB9IGVsc2Uge1xuICAgICAgZm9yIChjb25zdCBwYXRoIG9mIHRoaXMucGlja3MpIHtcbiAgICAgICAgY29uc3QgZmlsZSA9IHRoaXMuYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChwYXRoKTtcbiAgICAgICAgY29uc3Qgcm93ID0gZ3JpZC5jcmVhdGVEaXYoKTtcbiAgICAgICAgcm93LnNldEF0dHIoJ3N0eWxlJywgW1xuICAgICAgICAgICdkaXNwbGF5OmZsZXgnLFxuICAgICAgICAgICdhbGlnbi1pdGVtczpjZW50ZXInLFxuICAgICAgICAgICdqdXN0aWZ5LWNvbnRlbnQ6c3BhY2UtYmV0d2VlbicsXG4gICAgICAgICAgJ2dhcDo4cHgnLFxuICAgICAgICAgICdwYWRkaW5nOjJweCAwJ1xuICAgICAgICBdLmpvaW4oJzsnKSk7XG5cbiAgICAgICAgY29uc3QgbmFtZUxpbmsgPSByb3cuY3JlYXRlRWwoJ2EnLCB7XG4gICAgICAgICAgdGV4dDogKCgpID0+IHtcbiAgICAgICAgICAgIGlmIChmaWxlIGluc3RhbmNlb2YgVEZpbGUpIHtcbiAgICAgICAgICAgICAgY29uc3QgZm0gPSB0aGlzLmFwcC5tZXRhZGF0YUNhY2hlLmdldEZpbGVDYWNoZShmaWxlKT8uZnJvbnRtYXR0ZXI7XG4gICAgICAgICAgICAgIHJldHVybiBmbT8ubmFtZSB8fCBmaWxlLmJhc2VuYW1lO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgYmFzZSA9IHBhdGguc3BsaXQoJy8nKS5wb3AoKSB8fCBwYXRoO1xuICAgICAgICAgICAgcmV0dXJuIGJhc2UucmVwbGFjZSgvXFwubWQkLywgJycpO1xuICAgICAgICAgIH0pKCksXG4gICAgICAgICAgaHJlZjogJyMnXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGNvbnN0IGVuYWJsZVByZXZpZXcgPSAhIWdldFRvb2xraXQodGhpcy5hcHApPy5zZXR0aW5ncz8uZW5hYmxlU2lkZWJhclByZXZpZXdzO1xuICAgICAgICBpZiAoZW5hYmxlUHJldmlldykge1xuICAgICAgICAgIGlmIChmaWxlIGluc3RhbmNlb2YgVEZpbGUpIHtcbiAgICAgICAgICAgIG5hbWVMaW5rLmNsYXNzTGlzdC5hZGQoJ2ludGVybmFsLWxpbmsnKTtcbiAgICAgICAgICAgIG5hbWVMaW5rLnNldEF0dHIoJ2RhdGEtaHJlZicsIGZpbGUucGF0aCk7XG4gICAgICAgICAgICBuYW1lTGluay5zZXRBdHRyKCdocmVmJywgZmlsZS5wYXRoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBuYW1lTGluay5zZXRBdHRyKCdzdHlsZScsICdmb250LXdlaWdodDo2MDA7IHRleHQtZGVjb3JhdGlvbjpub25lOyBjb2xvcjp2YXIoLS10ZXh0LWFjY2VudCk7Jyk7XG4gICAgICAgIG5hbWVMaW5rLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZSA9PiB7XG4gICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgIHRoaXMuYXBwLndvcmtzcGFjZS5vcGVuTGlua1RleHQocGF0aCwgJycsIGZhbHNlKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gU21hbGwgXCJcdTAwRDdcIiByZW1vdmUgaWNvblxuICAgICAgICBjb25zdCBybUJ0biA9IHJvdy5jcmVhdGVFbCgnc3BhbicsIHsgdGV4dDogJ1x1MDBENycgfSk7XG4gICAgICAgIHJtQnRuLnNldEF0dHIoJ3N0eWxlJywgJ2N1cnNvcjpwb2ludGVyOyBmb250LXNpemU6MS4yZW07IGxpbmUtaGVpZ2h0OjE7Jyk7XG4gICAgICAgIHJtQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgYXN5bmMgZSA9PiB7XG4gICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgIHRoaXMucGlja3MgPSB0aGlzLnBpY2tzLmZpbHRlcihwID0+IHAgIT09IHBhdGgpO1xuICAgICAgICAgIGNvbnN0IGJ0biA9IHRoaXMuYWRkQnRuQnlQYXRoLmdldChwYXRoKTtcbiAgICAgICAgICBpZiAoYnRuKSB7XG4gICAgICAgICAgICBidG4uZGlzYWJsZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIGJ0bi50ZXh0Q29udGVudCA9ICdcdUZGMEInO1xuICAgICAgICAgIH1cbiAgICAgICAgICB0aGlzLnJlbmRlclBpY2tzKCk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cblxuICAgIGNvbnN0IGFjdGlvbnMgPSBib2R5LmNyZWF0ZURpdigpO1xuICAgIGFjdGlvbnMuc2V0QXR0cihcbiAgICAgICdzdHlsZScsXG4gICAgICAnZGlzcGxheTpmbGV4O2dhcDo4cHg7anVzdGlmeS1jb250ZW50OmZsZXgtZW5kO21hcmdpbi10b3A6NHB4OydcbiAgICApO1xuXG4gICAgLy8gQ0xFQVIgKHNlY29uZGFyeSlcbiAgICBjb25zdCBjbGVhckJ0biA9IGFjdGlvbnMuY3JlYXRlRWwoJ2J1dHRvbicsIHsgdGV4dDogJ0NsZWFyJyB9KTtcbiAgICAvLyBrZWVwIGl0IHZpc3VhbGx5IFx1MjAxQ3NlY29uZGFyeVx1MjAxRFxuICAgIGNsZWFyQnRuLnNldEF0dHIoJ3N0eWxlJywgJ29wYWNpdHk6MC45OycpO1xuICAgIGNsZWFyQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZSA9PiB7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAvLyBlbXB0eSBwaWNrc1xuICAgICAgdGhpcy5waWNrcyA9IFtdO1xuICAgICAgLy8gcmVcdTIwMTFlbmFibGUgYWxsICsgYnV0dG9ucyB3ZSB0cmFja2VkXG4gICAgICB0aGlzLmFkZEJ0bkJ5UGF0aC5mb3JFYWNoKChidG4pID0+IHtcbiAgICAgICAgaWYgKCFidG4uaXNDb25uZWN0ZWQpIHJldHVybjsgICAgICAvLyBpbiBjYXNlIHRhYmxlIHJlLXJlbmRlcmVkXG4gICAgICAgIGJ0bi5kaXNhYmxlZCA9IGZhbHNlO1xuICAgICAgICBidG4udGV4dENvbnRlbnQgPSAnXHVGRjBCJztcbiAgICAgIH0pO1xuICAgICAgdGhpcy5yZW5kZXJQaWNrcygpO1xuICAgIH0pO1xuXG4gICAgLy8gQ09QWSAocHJpbWFyeSlcbiAgICBjb25zdCBjb3B5QnRuID0gYWN0aW9ucy5jcmVhdGVFbCgnYnV0dG9uJywgeyB0ZXh0OiAnQ29weSBHcmltb2lyZScgfSk7XG4gICAgY29weUJ0bi5jbGFzc0xpc3QuYWRkKCdtb2QtY3RhJyk7XG4gICAgLy8gZGlzYWJsZSB3aGVuIG5vdGhpbmcgc2VsZWN0ZWRcbiAgICBjb3B5QnRuLnRvZ2dsZUF0dHJpYnV0ZSgnZGlzYWJsZWQnLCB0aGlzLnBpY2tzLmxlbmd0aCA9PT0gMCk7XG5cbiAgICBjb3B5QnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgYXN5bmMgZSA9PiB7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICBpZiAoIXRoaXMucGlja3MubGVuZ3RoKSByZXR1cm47XG5cbiAgICAgIGNvbnN0IG1kID0gdGhpcy5idWlsZERhdGF2aWV3Rm9yUGlja3MoKTtcbiAgICAgIHRyeSB7XG4gICAgICAgIGF3YWl0IG5hdmlnYXRvci5jbGlwYm9hcmQud3JpdGVUZXh0KG1kKTtcbiAgICAgICAgbmV3IE5vdGljZSgnXHVEODNEXHVEQ0RDIEdyaW1vaXJlIHRhYmxlIGNvcGllZCB0byBjbGlwYm9hcmQuJyk7XG4gICAgICB9IGNhdGNoIHtcbiAgICAgICAgY29uc3QgdGEgPSBib2R5LmNyZWF0ZUVsKCd0ZXh0YXJlYScsIHsgdGV4dDogbWQgfSk7XG4gICAgICAgIHRhLnNldEF0dHIoJ3N0eWxlJywgJ3dpZHRoOjEwMCU7aGVpZ2h0OjIyMHB4O21hcmdpbi10b3A6OHB4OycpO1xuICAgICAgICB0YS5zZWxlY3QoKTtcbiAgICAgICAgbmV3IE5vdGljZSgnQ2xpcGJvYXJkIGJsb2NrZWQuIERhdGF2aWV3IHNob3duIGJlbG93XHUyMDE0Y29weSBtYW51YWxseS4nKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG5cbiAgYXN5bmMgb25PcGVuKCkge1xuICAgIHRoaXMuY29udGVudEVsLmVtcHR5KCk7XG5cbiAgICB0aGlzLnJlZ2lzdGVyRXZlbnQoXG4gICAgICAodGhpcy5hcHAud29ya3NwYWNlIGFzIGFueSkub24oJ2VkaXRvci1zZWxlY3Rpb24tY2hhbmdlJywgKGVkaXRvcjogYW55LCB2aWV3OiBhbnkpID0+IHtcbiAgICAgICAgY29uc3QgdGV4dCA9IGVkaXRvci5nZXRTZWxlY3Rpb24oKTtcbiAgICAgICAgdGhpcy5sYXN0U2VsZWN0aW9uID0ge1xuICAgICAgICAgIHRleHQsXG4gICAgICAgICAgZmlsZVBhdGg6IHZpZXcuZmlsZS5wYXRoLFxuICAgICAgICAgIGZyb206IGVkaXRvci5nZXRDdXJzb3IoJ2Zyb20nKSxcbiAgICAgICAgICB0bzogZWRpdG9yLmdldEN1cnNvcigndG8nKSxcbiAgICAgICAgICBwcmVUZXh0OiBlZGl0b3IuZ2V0VmFsdWUoKSxcbiAgICAgICAgfTtcbiAgICAgIH0pXG4gICAgKTtcblxuICAgIHRoaXMucGlja3MgPSBbXTtcbiAgICB0aGlzLmFkZEJ0bkJ5UGF0aC5jbGVhcigpO1xuXG4gICAgLy8gaGVhZGluZ1xuICAgIHRoaXMuY29udGVudEVsLmNyZWF0ZUVsKCdoNCcsIHsgdGV4dDogJ1RFTVBMQVRFUycgfSk7XG5cbiAgICAvLyB0ZW1wbGF0ZSBidXR0b25zXG4gICAgY29uc3QgYnRuQ29udGFpbmVyID0gdGhpcy5jb250ZW50RWwuY3JlYXRlRGl2KCk7XG4gICAgYnRuQ29udGFpbmVyLmFkZENsYXNzKFwic2ItYnRuXCIpO1xuXG4gICAgZm9yIChjb25zdCBkZWYgb2YgVEVNUExBVEVfQlVUVE9OUykge1xuICAgICAgY29uc3QgYnRuRWwgPSBidG5Db250YWluZXIuY3JlYXRlRWwoXCJidXR0b25cIiwgeyB0ZXh0OiBkZWYubGFiZWwgfSk7XG4gICAgICBidG5FbC5zdHlsZS5mbGV4ID0gXCIxXCI7XG4gICAgICBidG5FbC5zdHlsZS5taW5XaWR0aCA9IFwiMTIwcHhcIjtcblxuICAgICAgbGV0IG9yaWdpbkxlYWY6IFdvcmtzcGFjZUxlYWYgfCB1bmRlZmluZWQ7XG5cbiAgICAgIC8vIHBvaW50ZXJkb3duOiBjYXB0dXJlIHNlbGVjdGlvbiArIG9yaWdpbiBsZWFmIEJFRk9SRSBzaWRlYmFyIHN0ZWFscyBmb2N1c1xuICAgICAgYnRuRWwuYWRkRXZlbnRMaXN0ZW5lcihcInBvaW50ZXJkb3duXCIsICgpID0+IHtcbiAgICAgICAgY29uc3QgcGx1Z2luID0gZ2V0VG9vbGtpdCh0aGlzLmFwcCk7XG5cbiAgICAgICAgLy8gY2FwdHVyZSB0ZXh0IHNlbGVjdGlvbiAoeW91ciBleGlzdGluZyBsb2dpYylcbiAgICAgICAgY29uc3QgY3R4ID0gY2FwdHVyZVNlbGVjdGlvbk9yV29yZCh0aGlzLmFwcCwgdGhpcyk7XG4gICAgICAgIGlmIChjdHgpIHBsdWdpbj8uc2V0UGVuZGluZ1NlbGVjdGlvbkNvbnRleHQ/LihjdHgpO1xuXG4gICAgICAgIC8vIGNhcHR1cmUgb3JpZ2luIGxlYWZcbiAgICAgICAgb3JpZ2luTGVhZiA9IHRoaXMuYXBwLndvcmtzcGFjZS5hY3RpdmVMZWFmID8/IHVuZGVmaW5lZDtcbiAgICAgICAgY29uc29sZS5sb2coXCJcdUQ4M0RcdURGRTMgW3BvaW50ZXJkb3duXSBDYXB0dXJlZCBvcmlnaW5MZWFmOlwiLCBvcmlnaW5MZWFmPy52aWV3IGluc3RhbmNlb2YgTWFya2Rvd25WaWV3ID8gb3JpZ2luTGVhZi52aWV3LmZpbGU/LnBhdGggOiBcIihub25lKVwiKTtcbiAgICAgIH0pO1xuXG4gICAgICAvLyBjbGljazogcnVuIGVpdGhlciBhIGNvbW1hbmQgb3IgdGVtcGxhdGUgd2l0aCBjYXB0dXJlZCBvcmlnaW5MZWFmXG4gICAgICBidG5FbC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgICBpZiAoXCJjb21tYW5kSWRcIiBpbiBkZWYpIHtcbiAgICAgICAgICBjb25zdCBmdWxsSWQgPSBnZXRGdWxsQ29tbWFuZElkKHRoaXMuYXBwLCBkZWYuY29tbWFuZElkKTtcbiAgICAgICAgICBjb25zdCBjbWQgPSB0aGlzLmFwcC5jb21tYW5kcy5maW5kQ29tbWFuZChmdWxsSWQpO1xuICAgICAgICAgIGlmICghY21kKSB7XG4gICAgICAgICAgICBuZXcgTm90aWNlKGBDb21tYW5kIG5vdCBmb3VuZDogJHtmdWxsSWR9YCk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfVxuICAgICAgICAgIHRoaXMuYXBwLmNvbW1hbmRzLmV4ZWN1dGVDb21tYW5kQnlJZChmdWxsSWQpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNvbnNvbGUubG9nKFwiXHVEODNEXHVERkUzIFtjbGlja10gUnVubmluZyB0ZW1wbGF0ZSB3aXRoIG9yaWdpbkxlYWY6XCIsIG9yaWdpbkxlYWY/LnZpZXcgaW5zdGFuY2VvZiBNYXJrZG93blZpZXcgPyBvcmlnaW5MZWFmLnZpZXcuZmlsZT8ucGF0aCA6IFwiKG5vbmUpXCIpO1xuICAgICAgICAgIHRoaXMucnVuVGVtcGxhdGUoZGVmLnBhdGgsIG9yaWdpbkxlYWYpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG5cblxuICAgIHRoaXMuY29udGVudEVsLmNyZWF0ZUVsKCdocicsIHsgYXR0cjogeyBzdHlsZTogJ21hcmdpbjogMTJweCAwOycgfSB9KTtcblxuICAgIC8vICBBRFZFTlRVUkUgTElOS1MgXG4gICAgY29uc3QgYWR2RGV0YWlscyA9IHRoaXMuY29udGVudEVsLmNyZWF0ZUVsKCdkZXRhaWxzJywgeyBhdHRyOiB7IG9wZW46ICd0cnVlJyB9IH0pO1xuICAgIGNvbnN0IGFkdlN1bW1hcnkgPSBhZHZEZXRhaWxzLmNyZWF0ZUVsKCdzdW1tYXJ5JywgeyB0ZXh0OiAnQURWRU5UVVJFUycgfSk7XG4gICAgYWR2U3VtbWFyeS5zZXRBdHRyKCdzdHlsZScsICdmb250LXNpemU6IDEuM2VtOyBmb250LXdlaWdodDogNjAwOyBtYXJnaW46IDAuNWVtIDA7Jyk7XG4gICAgY29uc3QgYWR2Q29udGFpbmVyID0gYWR2RGV0YWlscy5jcmVhdGVEaXYoeyBhdHRyOiB7IHN0eWxlOiAnbWFyZ2luOjhweCAwOycgfSB9KTtcblxuICAgIG5ldyBTZXR0aW5nKGFkdkNvbnRhaW5lcilcbiAgICAgIC5zZXROYW1lKCdGaWx0ZXIgYnkgQWR2ZW50dXJlOicpXG4gICAgICAuYWRkRHJvcGRvd24oZHJvcCA9PiB7XG4gICAgICAgIGNvbnN0IG5hbWVzID0gQXJyYXkuZnJvbShuZXcgU2V0KFxuICAgICAgICAgIHRoaXMuYXBwLnZhdWx0LmdldEZpbGVzKClcbiAgICAgICAgICAgIC5maWx0ZXIoZiA9PiBmLnBhdGguc3RhcnRzV2l0aCgnQWR2ZW50dXJlcy8nKSlcbiAgICAgICAgICAgIC5tYXAoZiA9PiBmLnBhdGguc3BsaXQoJy8nKVsxXSlcbiAgICAgICAgKSk7XG4gICAgICAgIGRyb3AuYWRkT3B0aW9uKCcnLCAnXHUyMDE0IHBpY2sgb25lIFx1MjAxNCcpO1xuICAgICAgICBuYW1lcy5mb3JFYWNoKG4gPT4gZHJvcC5hZGRPcHRpb24obiwgbikpO1xuXG4gICAgICAgIGRyb3Aub25DaGFuZ2UoYXN5bmMgYWR2ID0+IHtcbiAgICAgICAgICAvLyBudWtlIGFueSBwcmV2aW91cyByZW5kZXJcbiAgICAgICAgICBhZHZDb250YWluZXIuZmluZEFsbCgnLnZ2dW5kZXJsb3JlLWFkdmVudHVyZS1hc3NldHMnKS5mb3JFYWNoKGVsID0+IGVsLnJlbW92ZSgpKTtcblxuICAgICAgICAgIGNvbnN0IHdyYXBwZXIgPSBhZHZDb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiAndnZ1bmRlcmxvcmUtYWR2ZW50dXJlLWFzc2V0cycgfSk7XG4gICAgICAgICAgaWYgKCFhZHYpIHJldHVybjtcblxuICAgICAgICAgIGNvbnN0IHF1aWNrID0gd3JhcHBlci5jcmVhdGVEaXYoKTtcbiAgICAgICAgICBxdWljay5zZXRBdHRyKCdzdHlsZScsICdkaXNwbGF5OmZsZXg7anVzdGlmeS1jb250ZW50OmNlbnRlcjtnYXA6MjBweDtmbGV4LXdyYXA6d3JhcDttYXJnaW46NnB4IDAgMTBweDsnKTtcblxuICAgICAgICAgIC8vIEFkdmVudHVyZSBIdWJcbiAgICAgICAgICBjb25zdCBodWJFeGFjdFBhdGggPSBgQWR2ZW50dXJlcy8ke2Fkdn0vJHthZHZ9IC0gQWR2ZW50dXJlIEh1Yi5tZGA7XG4gICAgICAgICAgbGV0IGh1YkZpbGU6IFRGaWxlIHwgbnVsbCA9IG51bGw7XG5cbiAgICAgICAgICBjb25zdCBleGFjdCA9IHRoaXMuYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChodWJFeGFjdFBhdGgpO1xuICAgICAgICAgIGlmIChleGFjdCBpbnN0YW5jZW9mIFRGaWxlKSB7XG4gICAgICAgICAgICBodWJGaWxlID0gZXhhY3Q7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGh1YkZpbGUgPSAodGhpcy5hcHAudmF1bHQuZ2V0RmlsZXMoKS5maW5kKGYgPT5cbiAgICAgICAgICAgICAgZi5wYXRoLnN0YXJ0c1dpdGgoYEFkdmVudHVyZXMvJHthZHZ9L2ApICYmXG4gICAgICAgICAgICAgIGYucGFyZW50Py5wYXRoID09PSBgQWR2ZW50dXJlcy8ke2Fkdn1gICYmXG4gICAgICAgICAgICAgIGYuYmFzZW5hbWUudG9Mb3dlckNhc2UoKS5pbmNsdWRlcygnYWR2ZW50dXJlIGh1YicpXG4gICAgICAgICAgICApID8/IG51bGwpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmIChodWJGaWxlKSB7XG4gICAgICAgICAgICBjb25zdCBodWJMaW5rID0gcXVpY2suY3JlYXRlRWwoJ2EnLCB7IHRleHQ6ICdBZHZlbnR1cmUgSHViJywgaHJlZjogJyMnIH0pO1xuICAgICAgICAgICAgaHViTGluay5hZGRDbGFzcygnc2ItYWR2LW5hdicpO1xuICAgICAgICAgICAgaHViTGluay5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGUgPT4ge1xuICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgIHRoaXMuYXBwLndvcmtzcGFjZS5vcGVuTGlua1RleHQoaHViRmlsZSEucGF0aCwgJycsIGZhbHNlKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgY29uc3QgZW5hYmxlUHJldmlldyA9ICEhZ2V0VG9vbGtpdCh0aGlzLmFwcCk/LnNldHRpbmdzPy5lbmFibGVTaWRlYmFyUHJldmlld3M7XG4gICAgICAgICAgICBpZiAoZW5hYmxlUHJldmlldykge1xuICAgICAgICAgICAgICBjb25zdCBwID0gaHViRmlsZSEucGF0aDtcbiAgICAgICAgICAgICAgaHViTGluay5jbGFzc0xpc3QuYWRkKCdpbnRlcm5hbC1saW5rJyk7XG4gICAgICAgICAgICAgIGh1Ykxpbmsuc2V0QXR0cignZGF0YS1ocmVmJywgcCk7XG4gICAgICAgICAgICAgIGh1Ykxpbmsuc2V0QXR0cignaHJlZicsIHApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIE1vc3QgcmVjZW50IHNlc3Npb24gbGlua1xuICAgICAgICAgIGNvbnN0IHNlc3Npb25EaXIgPSBgQWR2ZW50dXJlcy8ke2Fkdn0vU2Vzc2lvbiBOb3Rlcy9gO1xuICAgICAgICAgIGNvbnN0IHNlc3Npb25GaWxlcyA9IHRoaXMuYXBwLnZhdWx0LmdldEZpbGVzKCkuZmlsdGVyKGYgPT4gZi5wYXRoLnN0YXJ0c1dpdGgoc2Vzc2lvbkRpcikpO1xuICAgICAgICAgIGlmIChzZXNzaW9uRmlsZXMubGVuZ3RoKSB7XG4gICAgICAgICAgICBzZXNzaW9uRmlsZXMuc29ydCgoYSwgYikgPT4gYi5zdGF0Lm10aW1lIC0gYS5zdGF0Lm10aW1lKTtcbiAgICAgICAgICAgIGNvbnN0IGxhdGVzdCA9IHNlc3Npb25GaWxlc1swXTtcbiAgICAgICAgICAgIGNvbnN0IHNlc3Npb25MaW5rID0gcXVpY2suY3JlYXRlRWwoJ2EnLCB7IHRleHQ6ICdNb3N0IFJlY2VudCBTZXNzaW9uJywgaHJlZjogJyMnIH0pO1xuICAgICAgICAgICAgc2Vzc2lvbkxpbmsuYWRkQ2xhc3MoJ3NiLWFkdi1uYXYnKTtcbiAgICAgICAgICAgIHNlc3Npb25MaW5rLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZSA9PiB7XG4gICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgdGhpcy5hcHAud29ya3NwYWNlLm9wZW5MaW5rVGV4dChsYXRlc3QucGF0aCwgJycsIGZhbHNlKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgY29uc3QgZW5hYmxlUHJldmlldyA9ICEhZ2V0VG9vbGtpdCh0aGlzLmFwcCk/LnNldHRpbmdzPy5lbmFibGVTaWRlYmFyUHJldmlld3M7XG4gICAgICAgICAgICBpZiAoZW5hYmxlUHJldmlldykge1xuICAgICAgICAgICAgICBjb25zdCBwID0gbGF0ZXN0LnBhdGg7XG4gICAgICAgICAgICAgIHNlc3Npb25MaW5rLmNsYXNzTGlzdC5hZGQoJ2ludGVybmFsLWxpbmsnKTtcbiAgICAgICAgICAgICAgc2Vzc2lvbkxpbmsuc2V0QXR0cignZGF0YS1ocmVmJywgcCk7XG4gICAgICAgICAgICAgIHNlc3Npb25MaW5rLnNldEF0dHIoJ2hyZWYnLCBwKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG5cbiAgICAgICAgICAvLyBXaGVyZSB0aGUgZ3JvdXBlZCBsaW5rcyB3aWxsIHJlbmRlclxuICAgICAgICAgIGNvbnN0IGxpc3QgPSB3cmFwcGVyLmNyZWF0ZURpdigpO1xuICAgICAgICAgIGF3YWl0IHRoaXMuc2hvd0FkdmVudHVyZUFzc2V0cyhhZHYsIGxpc3QpO1xuICAgICAgICB9KTtcblxuICAgICAgfSk7XG5cbiAgICB0aGlzLmNvbnRlbnRFbC5jcmVhdGVFbCgnaHInKTtcblxuICAgIC8vIFx1MjUwMFx1MjUwMFx1MjUwMCBTUEVMTEJPT0sgXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXG4gICAgYXdhaXQgdGhpcy5zaG93U3BlbGxib29rU2VjdGlvbigpO1xuXG4gICAgdGhpcy5fcmV3aXJlUHJldmlld3MoKTsgLy8gaW5pdGlhbFxuICAgIHRoaXMucmVnaXN0ZXJFdmVudChcbiAgICAgICh0aGlzLmFwcC53b3Jrc3BhY2UgYXMgYW55KS5vbigndnY6c2lkZWJhci1wcmV2aWV3cy1jaGFuZ2VkJywgKF9kYXRhPzogeyBlbmFibGVkOiBib29sZWFuIH0pID0+IHtcbiAgICAgICAgdGhpcy5fcmV3aXJlUHJldmlld3MoKTtcbiAgICAgIH0pXG4gICAgKTtcbiAgfVxuXG4gIGFzeW5jIG9uQ2xvc2UoKSB7XG4gICAgdGhpcy5waWNrcyA9IFtdO1xuICAgIHRoaXMuYWRkQnRuQnlQYXRoLmNsZWFyKCk7XG4gICAgdGhpcy5jb250ZW50RWwuZW1wdHkoKTtcbiAgICBpZiAodGhpcy5fZGRDbG9zZXIpIHtcbiAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3BvaW50ZXJkb3duJywgdGhpcy5fZGRDbG9zZXIsIHRydWUpO1xuICAgICAgdGhpcy5fZGRDbG9zZXIgPSB1bmRlZmluZWQ7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBydW5UZW1wbGF0ZShwYXRoOiBzdHJpbmcsIG9yaWdpbkxlYWY/OiBXb3Jrc3BhY2VMZWFmKSB7XG4gICAgb3JpZ2luTGVhZj8udmlldyBpbnN0YW5jZW9mIE1hcmtkb3duVmlldyA/IG9yaWdpbkxlYWYudmlldy5maWxlPy5wYXRoIDogXCIobm9uZSlcIjtcbiAgICBjb25zdCBwbHVnaW4gPSBnZXRUb29sa2l0KHRoaXMuYXBwKTtcbiAgICBpZiAoIXBsdWdpbikgeyBuZXcgTm90aWNlKCdcdTI2QTBcdUZFMEYgVlZ1bmRlcmxvcmUgVG9vbGtpdCBwbHVnaW4gbm90IGZvdW5kLicpOyByZXR1cm47IH1cbiAgICBhd2FpdCBwbHVnaW4ucnVuU0JUZW1wbGF0ZShwYXRoLCBvcmlnaW5MZWFmKTtcbiAgfVxuXG5cbiAgLy8tLS0tLS0tKysrKysrKysrKysgQURWRU5UVVJFIEZJTFRFUlxuXG4gIHByaXZhdGUgYXN5bmMgc2hvd0FkdmVudHVyZUFzc2V0cyhhZHZlbnR1cmVOYW1lOiBzdHJpbmcsIHJlbmRlckludG86IEhUTUxFbGVtZW50KSB7XG4gICAgY29uc3QgcHJlZml4ID0gYEFkdmVudHVyZXMvJHthZHZlbnR1cmVOYW1lfS9gO1xuICAgIGNvbnN0IGZpbGVzID0gdGhpcy5hcHAudmF1bHRcbiAgICAgIC5nZXRGaWxlcygpXG4gICAgICAuZmlsdGVyKGYgPT4gZi5wYXRoLnN0YXJ0c1dpdGgocHJlZml4KSk7XG5cbiAgICAvLyBnYXRoZXIgYWxsIGludGVybmFsIGxpbmsgZGVzdGluYXRpb25zIGluc2lkZSB0aGUgYWR2ZW50dXJlXG4gICAgY29uc3QgbGlua2VkUGF0aHMgPSBuZXcgU2V0PHN0cmluZz4oKTtcbiAgICBmb3IgKGNvbnN0IGZpbGUgb2YgZmlsZXMpIHtcbiAgICAgIGNvbnN0IGNhY2hlID0gdGhpcy5hcHAubWV0YWRhdGFDYWNoZS5nZXRGaWxlQ2FjaGUoZmlsZSk7XG4gICAgICAoY2FjaGU/LmxpbmtzIHx8IFtdKS5mb3JFYWNoKGxpbmsgPT4ge1xuICAgICAgICBjb25zdCBkZXN0ID0gdGhpcy5hcHAubWV0YWRhdGFDYWNoZS5nZXRGaXJzdExpbmtwYXRoRGVzdChsaW5rLmxpbmssIGZpbGUucGF0aCk7XG4gICAgICAgIGlmIChkZXN0KSBsaW5rZWRQYXRocy5hZGQoZGVzdC5wYXRoKTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIHJlbmRlckludG8uZW1wdHkoKTtcbiAgICBpZiAobGlua2VkUGF0aHMuc2l6ZSA9PT0gMCkge1xuICAgICAgcmVuZGVySW50by5jcmVhdGVFbCgnZGl2JywgeyB0ZXh0OiAnTm8gbGlua2VkIHBhZ2VzIGZvdW5kLicgfSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgY2F0QnlJZCA9IG5ldyBNYXAoQURWRU5UVVJFX0NBVEVHT1JZX0RFRlMubWFwKGQgPT4gW2QuaWQsIGRdKSk7XG5cbiAgICBjb25zdCBncm91cHM6IFJlY29yZDxzdHJpbmcsIHN0cmluZ1tdPiA9IHt9O1xuICAgIGZvciAoY29uc3QgZnVsbFBhdGggb2YgbGlua2VkUGF0aHMpIHtcbiAgICAgIGxldCBpZCA9ICdvdGhlcic7XG4gICAgICBmb3IgKGNvbnN0IGRlZiBvZiBBRFZFTlRVUkVfQ0FURUdPUllfREVGUykge1xuICAgICAgICBpZiAoZGVmLnRlc3QgJiYgZGVmLnRlc3QudGVzdChmdWxsUGF0aCkpIHsgaWQgPSBkZWYuaWQ7IGJyZWFrOyB9XG4gICAgICB9XG4gICAgICAoZ3JvdXBzW2lkXSB8fD0gW10pLnB1c2goZnVsbFBhdGgpO1xuICAgIH1cblxuICAgIGNvbnN0IHBsdWdpbiA9IGdldFRvb2xraXQodGhpcy5hcHApO1xuY29uc3QgZW5hYmxlZElkcyA9IG5ldyBTZXQoXG4gIEFycmF5LmlzQXJyYXkocGx1Z2luPy5zZXR0aW5ncz8uZW5hYmxlZEFkdmVudHVyZUNhdGVnb3JpZXMpXG4gICAgPyBwbHVnaW4hLnNldHRpbmdzIS5lbmFibGVkQWR2ZW50dXJlQ2F0ZWdvcmllc1xuICAgIDogZ2V0QWR2ZW50dXJlQ2F0ZWdvcnlJZHMoKVxuKTtcblxuXG4gICAgLy8gc29ydCBtb2RlIGZyb20gcGx1Z2luIHNldHRpbmdzIChkZWZhdWx0ICduYW1lJylcbiAgICBjb25zdCBzb3J0TW9kZSA9IChnZXRUb29sa2l0KHRoaXMuYXBwKT8uc2V0dGluZ3M/LmFkdmVudHVyZVNvcnQgPz8gJ25hbWUnKSBhc1xuICAgICAgJ25hbWUnIHwgJ3JlY2VudCcgfCAncmVmcyc7XG5cbiAgICAvLyBiYWNrbGluayBjb3VudHMgb25jZVxuICAgIGNvbnN0IGluY29taW5nID0gdGhpcy5idWlsZEluY29taW5nUmVmQ291bnRzKCk7XG5cbiAgICAvLyByZW5kZXIgZWFjaCBzZWN0aW9uIG9uY2VcbiAgICBmb3IgKGNvbnN0IHNlY3Rpb25JZCBvZiBPYmplY3Qua2V5cyhncm91cHMpLnNvcnQoKGEsIGIpID0+IHtcbiAgICAgIGNvbnN0IGxhID0gY2F0QnlJZC5nZXQoYSk/LmxhYmVsID8/IGE7XG4gICAgICBjb25zdCBsYiA9IGNhdEJ5SWQuZ2V0KGIpPy5sYWJlbCA/PyBiO1xuICAgICAgcmV0dXJuIGxhLmxvY2FsZUNvbXBhcmUobGIsIHVuZGVmaW5lZCwgeyBzZW5zaXRpdml0eTogJ2Jhc2UnIH0pO1xuICAgIH0pKSB7XG4gICAgICBpZiAoIWVuYWJsZWRJZHMuaGFzKHNlY3Rpb25JZCkpIGNvbnRpbnVlO1xuXG4gICAgICBjb25zdCBsYWJlbCA9IGNhdEJ5SWQuZ2V0KHNlY3Rpb25JZCk/LmxhYmVsID8/IHNlY3Rpb25JZDtcblxuICAgICAgY29uc3QgZGV0YWlscyA9IHJlbmRlckludG8uY3JlYXRlRWwoJ2RldGFpbHMnLCB7IGF0dHI6IHsgb3BlbjogJ3RydWUnIH0gfSk7XG4gICAgICBjb25zdCBzdW1tYXJ5ID0gZGV0YWlscy5jcmVhdGVFbCgnc3VtbWFyeScsIHsgdGV4dDogbGFiZWwgfSk7XG4gICAgICBzdW1tYXJ5LmFkZENsYXNzKFwic2Itc3VtbWFyeVwiKTtcblxuICAgICAgY29uc3QgZ3JpZCA9IGRldGFpbHMuY3JlYXRlRGl2KCk7XG4gICAgICBncmlkLmFkZENsYXNzKFwic2ItYWR2LWdyaWRcIik7XG5cbiAgICAgIGNvbnN0IHBhdGhzID0gZ3JvdXBzW3NlY3Rpb25JZF0uc2xpY2UoKTtcblxuICAgICAgcGF0aHMuc29ydCgoYSwgYikgPT4ge1xuICAgICAgICBpZiAoc29ydE1vZGUgPT09ICdyZWNlbnQnKSB7XG4gICAgICAgICAgY29uc3QgYWYgPSB0aGlzLmFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoYSk7XG4gICAgICAgICAgY29uc3QgYmYgPSB0aGlzLmFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoYik7XG4gICAgICAgICAgY29uc3QgYW0gPSAoYWYgaW5zdGFuY2VvZiBURmlsZSA/IGFmLnN0YXQubXRpbWUgOiAwKSB8fCAwO1xuICAgICAgICAgIGNvbnN0IGJtID0gKGJmIGluc3RhbmNlb2YgVEZpbGUgPyBiZi5zdGF0Lm10aW1lIDogMCkgfHwgMDtcbiAgICAgICAgICBpZiAoYm0gIT09IGFtKSByZXR1cm4gYm0gLSBhbTsgLy8gbmV3ZXIgZmlyc3RcbiAgICAgICAgfSBlbHNlIGlmIChzb3J0TW9kZSA9PT0gJ3JlZnMnKSB7XG4gICAgICAgICAgY29uc3QgYXIgPSBpbmNvbWluZy5nZXQoYSkgfHwgMDtcbiAgICAgICAgICBjb25zdCBiciA9IGluY29taW5nLmdldChiKSB8fCAwO1xuICAgICAgICAgIGlmIChiciAhPT0gYXIpIHJldHVybiBiciAtIGFyOyAgIC8vIG1vcmUgYmFja2xpbmtzIGZpcnN0XG5cbiAgICAgICAgICAvLyB0aWUtYnJlYWsgYnkgcmVjZW5jeVxuICAgICAgICAgIGNvbnN0IGFmID0gdGhpcy5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKGEpO1xuICAgICAgICAgIGNvbnN0IGJmID0gdGhpcy5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKGIpO1xuICAgICAgICAgIGNvbnN0IGFtID0gKGFmIGluc3RhbmNlb2YgVEZpbGUgPyBhZi5zdGF0Lm10aW1lIDogMCkgfHwgMDtcbiAgICAgICAgICBjb25zdCBibSA9IChiZiBpbnN0YW5jZW9mIFRGaWxlID8gYmYuc3RhdC5tdGltZSA6IDApIHx8IDA7XG4gICAgICAgICAgaWYgKGJtICE9PSBhbSkgcmV0dXJuIGJtIC0gYW07XG4gICAgICAgIH1cblxuICAgICAgICAvLyBmaW5hbC9kZWZhdWx0OiBuYW1lIEFcdTIxOTJaXG4gICAgICAgIGNvbnN0IGFOYW1lID0gYS5zcGxpdCgnLycpLnBvcCgpIS5yZXBsYWNlKC9cXC5tZCQvLCAnJykudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgY29uc3QgYk5hbWUgPSBiLnNwbGl0KCcvJykucG9wKCkhLnJlcGxhY2UoL1xcLm1kJC8sICcnKS50b0xvd2VyQ2FzZSgpO1xuICAgICAgICByZXR1cm4gYU5hbWUubG9jYWxlQ29tcGFyZShiTmFtZSk7XG4gICAgICB9KTtcblxuICAgICAgcGF0aHMuZm9yRWFjaChwYXRoID0+IHtcbiAgICAgICAgY29uc3QgbmFtZSA9IHBhdGguc3BsaXQoJy8nKS5wb3AoKSEucmVwbGFjZSgvXFwubWQkLywgJycpO1xuICAgICAgICBjb25zdCBsaW5rRWwgPSBncmlkLmNyZWF0ZUVsKCdhJywgeyB0ZXh0OiBuYW1lLCBocmVmOiAnIycgfSk7XG4gICAgICAgIGxpbmtFbC5hZGRDbGFzcyhcInNiLWFkdi1saW5rc1wiKTtcbiAgICAgICAgbGlua0VsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICAgIHRoaXMuYXBwLndvcmtzcGFjZS5vcGVuTGlua1RleHQocGF0aCwgJycsIGZhbHNlKTtcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IGVuYWJsZVByZXZpZXcgPSAhIWdldFRvb2xraXQodGhpcy5hcHApPy5zZXR0aW5ncz8uZW5hYmxlU2lkZWJhclByZXZpZXdzO1xuICAgICAgICBpZiAoZW5hYmxlUHJldmlldykge1xuICAgICAgICAgIGxpbmtFbC5jbGFzc0xpc3QuYWRkKCdpbnRlcm5hbC1saW5rJyk7XG4gICAgICAgICAgbGlua0VsLnNldEF0dHIoJ2RhdGEtaHJlZicsIHBhdGgpO1xuICAgICAgICAgIGxpbmtFbC5zZXRBdHRyKCdocmVmJywgcGF0aCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG5cbiAgLy8tLS0tLS0tLS1fKysrKysrKysrKyBTUEVMTEJPT0tcbiAgcHJpdmF0ZSBhc3luYyBzaG93U3BlbGxib29rU2VjdGlvbigpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBjb25zdCBzYkRldGFpbHMgPSB0aGlzLmNvbnRlbnRFbC5jcmVhdGVFbCgnZGV0YWlscycpO1xuICAgIHNiRGV0YWlscy5jcmVhdGVFbCgnc3VtbWFyeScsIHsgdGV4dDogJ1NQRUxMQk9PSycgfSlcbiAgICAgIC5zZXRBdHRyKCdzdHlsZScsICdmb250LXNpemU6MS4zZW07Zm9udC13ZWlnaHQ6NjAwO21hcmdpbjowLjVlbSAwOycpO1xuICAgIGNvbnN0IGNvbnRhaW5lciA9IHNiRGV0YWlscy5jcmVhdGVEaXYoe1xuICAgICAgYXR0cjogeyBzdHlsZTogJ2Rpc3BsYXk6ZmxleDtmbGV4LWRpcmVjdGlvbjpjb2x1bW47Z2FwOjhweDttYXJnaW46OHB4IDA7JyB9XG4gICAgfSk7XG5cbiAgICAvLyAxKSBCdWlsZCBTZXRzXG4gICAgY29uc3Qgc3BlbGxGaWxlcyA9IHRoaXMuYXBwLnZhdWx0LmdldE1hcmtkb3duRmlsZXMoKVxuICAgICAgLmZpbHRlcihmID0+IGYucGF0aC5zdGFydHNXaXRoKCdDb21wZW5kaXVtL1NwZWxscycpKTtcbiAgICBjb25zdCBsZXZlbHMgPSBuZXcgU2V0PG51bWJlcj4oKTtcbiAgICBjb25zdCBzY2hvb2xzID0gbmV3IFNldDxzdHJpbmc+KCk7XG4gICAgY29uc3QgZGFtYWdlcyA9IG5ldyBTZXQ8c3RyaW5nPigpO1xuICAgIGZvciAoY29uc3QgZiBvZiBzcGVsbEZpbGVzKSB7XG4gICAgICBjb25zdCBmbSA9IHRoaXMuYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0RmlsZUNhY2hlKGYpPy5mcm9udG1hdHRlcjtcbiAgICAgIGlmICghZm0pIGNvbnRpbnVlO1xuICAgICAgaWYgKHR5cGVvZiBmbS5sZXZlbCA9PT0gJ251bWJlcicpIGxldmVscy5hZGQoZm0ubGV2ZWwpO1xuICAgICAgaWYgKHR5cGVvZiBmbS5zY2hvb2wgPT09ICdzdHJpbmcnKSBzY2hvb2xzLmFkZChmbS5zY2hvb2wpO1xuICAgICAgaWYgKHR5cGVvZiBmbS5kYW1hZ2VfdHlwZSA9PT0gJ3N0cmluZycpIGRhbWFnZXMuYWRkKGZtLmRhbWFnZV90eXBlKTtcbiAgICB9XG5cbiAgICAvLyAyKSBDaGVja2JveCBkcm9wZG93bnNcbiAgICBjb25zdCBmaWx0ZXJzID0gY29udGFpbmVyLmNyZWF0ZURpdih7XG4gICAgICBhdHRyOiB7IHN0eWxlOiAnZGlzcGxheTpmbGV4OyBnYXA6MTZweDsgbWFyZ2luLWJvdHRvbToxMnB4OycgfVxuICAgIH0pO1xuXG4gICAgdHlwZSBJdGVtID0geyB2YWx1ZTogc3RyaW5nOyBsYWJlbDogc3RyaW5nIH07XG5cbiAgICBjb25zdCBtYWtlQ2hlY2tib3hEcm9wZG93biA9IChcbiAgICAgIHRpdGxlOiBzdHJpbmcsXG4gICAgICBpdGVtczogSXRlbVtdXG4gICAgKTogeyB3cmFwcGVyOiBIVE1MRGV0YWlsc0VsZW1lbnQ7IGdldFNlbGVjdGVkOiAoKSA9PiBzdHJpbmdbXSB9ID0+IHtcbiAgICAgIGNvbnN0IHdyYXBwZXIgPSBmaWx0ZXJzLmNyZWF0ZUVsKCdkZXRhaWxzJykgYXMgSFRNTERldGFpbHNFbGVtZW50O1xuICAgICAgd3JhcHBlci5jbGFzc0xpc3QuYWRkKCdzYi1kZCcpO1xuXG4gICAgICBjb25zdCBzdW1tYXJ5ID0gd3JhcHBlci5jcmVhdGVFbCgnc3VtbWFyeScpIGFzIEhUTUxFbGVtZW50O1xuICAgICAgc3VtbWFyeS5jbGFzc0xpc3QuYWRkKCdzYi1kZF9fYnV0dG9uJyk7XG4gICAgICBzdW1tYXJ5LnNldFRleHQoYCR7dGl0bGV9ICgwKWApO1xuXG4gICAgICAvLyBtYWtlIHN1bW1hcnkgYmVoYXZlIGxpa2UgYSByZWFsIGJ1dHRvbiByZWdhcmRsZXNzIG9mIHRoZW1lIHF1aXJrc1xuICAgICAgc3VtbWFyeS5zZXRBdHRyKCd0YWJpbmRleCcsICcwJyk7XG4gICAgICBzdW1tYXJ5LnNldEF0dHIoJ3JvbGUnLCAnYnV0dG9uJyk7XG4gICAgICBzdW1tYXJ5LnNldEF0dHIoJ2FyaWEtZXhwYW5kZWQnLCAnZmFsc2UnKTtcblxuICAgICAgY29uc3QgdG9nZ2xlT3BlbiA9ICgpID0+IHtcbiAgICAgICAgd3JhcHBlci5vcGVuID0gIXdyYXBwZXIub3BlbjtcbiAgICAgICAgc3VtbWFyeS5zZXRBdHRyKCdhcmlhLWV4cGFuZGVkJywgU3RyaW5nKHdyYXBwZXIub3BlbikpO1xuICAgICAgfTtcblxuICAgICAgc3VtbWFyeS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgdG9nZ2xlT3BlbigpO1xuICAgICAgfSk7XG4gICAgICBzdW1tYXJ5LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCAoZTogS2V5Ym9hcmRFdmVudCkgPT4ge1xuICAgICAgICBpZiAoZS5rZXkgPT09ICdFbnRlcicgfHwgZS5rZXkgPT09ICcgJykge1xuICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICB0b2dnbGVPcGVuKCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCBwYW5lbCA9IHdyYXBwZXIuY3JlYXRlRWwoJ2RpdicpO1xuICAgICAgcGFuZWwuY2xhc3NMaXN0LmFkZCgnc2ItZGRfX3BhbmVsJyk7XG4gICAgICBwYW5lbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChldnQ6IE1vdXNlRXZlbnQpID0+IGV2dC5zdG9wUHJvcGFnYXRpb24oKSk7XG5cbiAgICAgIGNvbnN0IGlucHV0czogSFRNTElucHV0RWxlbWVudFtdID0gW107XG4gICAgICBmb3IgKGNvbnN0IHsgdmFsdWUsIGxhYmVsIH0gb2YgaXRlbXMpIHtcbiAgICAgICAgY29uc3Qgcm93ID0gcGFuZWwuY3JlYXRlRWwoJ2xhYmVsJyk7XG4gICAgICAgIHJvdy5jbGFzc0xpc3QuYWRkKCdzYi1kZF9faXRlbScpO1xuXG4gICAgICAgIGNvbnN0IGNiID0gcm93LmNyZWF0ZUVsKCdpbnB1dCcsIHsgYXR0cjogeyB0eXBlOiAnY2hlY2tib3gnLCB2YWx1ZSB9IH0pIGFzIEhUTUxJbnB1dEVsZW1lbnQ7XG4gICAgICAgIGlucHV0cy5wdXNoKGNiKTtcblxuICAgICAgICByb3cuY3JlYXRlRWwoJ3NwYW4nLCB7IHRleHQ6IGxhYmVsIH0pO1xuXG4gICAgICAgIGNiLmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsICgpID0+IHtcbiAgICAgICAgICBjb25zdCBjb3VudCA9IGlucHV0cy5maWx0ZXIoaSA9PiBpLmNoZWNrZWQpLmxlbmd0aDtcbiAgICAgICAgICBzdW1tYXJ5LnNldFRleHQoYCR7dGl0bGV9ICgke2NvdW50fSlgKTtcbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB7XG4gICAgICAgIHdyYXBwZXIsXG4gICAgICAgIGdldFNlbGVjdGVkOiAoKSA9PiBpbnB1dHMuZmlsdGVyKGkgPT4gaS5jaGVja2VkKS5tYXAoaSA9PiBpLnZhbHVlKSxcbiAgICAgIH07XG4gICAgfTtcblxuICAgIC8vIDIuNSkgSW5jbHVkZSBDb25jZW50cmF0aW9uIGNoZWNrYm94IChzaW1wbGUgdG9nZ2xlKVxuICAgIGNvbnN0IGNvbmNSb3cgPSBjb250YWluZXIuY3JlYXRlRGl2KHtcbiAgICAgIGF0dHI6IHtcbiAgICAgICAgc3R5bGU6ICdkaXNwbGF5OmZsZXg7IGp1c3RpZnktY29udGVudDpjZW50ZXI7IG1hcmdpbjotNnB4IDAgNnB4IDA7J1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgY29uc3QgY29uY0xhYmVsID0gY29uY1Jvdy5jcmVhdGVFbCgnbGFiZWwnLCB7XG4gICAgICBhdHRyOiB7IHN0eWxlOiAnZGlzcGxheTppbmxpbmUtZmxleDsgYWxpZ24taXRlbXM6Y2VudGVyOyBnYXA6OHB4OyBjdXJzb3I6cG9pbnRlcjsnIH1cbiAgICB9KTtcblxuICAgIGNvbmNMYWJlbC5jcmVhdGVTcGFuKHsgdGV4dDogJ0luY2x1ZGUgQ29uY2VudHJhdGlvbiBTcGVsbHM/JyB9KTtcbiAgICBjb25zdCBjb25jQ2hrID0gY29uY0xhYmVsLmNyZWF0ZUVsKCdpbnB1dCcsIHsgYXR0cjogeyB0eXBlOiAnY2hlY2tib3gnIH0gfSkgYXMgSFRNTElucHV0RWxlbWVudDtcbiAgICBjb25jQ2hrLmNoZWNrZWQgPSB0cnVlOyAvLyBkZWZhdWx0IE9OXG5cbiAgICBjb25zdCBsZXZlbEl0ZW1zID0gQXJyYXkuZnJvbShsZXZlbHMpLnNvcnQoKGEsIGIpID0+IGEgLSBiKS5tYXAobHZsID0+ICh7IHZhbHVlOiBgJHtsdmx9YCwgbGFiZWw6IGx2bCA9PT0gMCA/ICdDYW50cmlwJyA6IGBMZXZlbCAke2x2bH1gIH0pKTtcbiAgICBjb25zdCBzY2hvb2xJdGVtcyA9IEFycmF5LmZyb20oc2Nob29scykuc29ydCgpLm1hcChzY2ggPT4gKHsgdmFsdWU6IHNjaCwgbGFiZWw6IHNjaCB9KSk7XG4gICAgY29uc3QgZGFtYWdlSXRlbXMgPSBBcnJheS5mcm9tKGRhbWFnZXMpLnNvcnQoKS5tYXAoZG1nID0+ICh7IHZhbHVlOiBkbWcsIGxhYmVsOiBkbWcgfSkpO1xuXG4gICAgY29uc3QgeyB3cmFwcGVyOiBsdmxERCwgZ2V0U2VsZWN0ZWQ6IGdldExldmVscyB9ID0gbWFrZUNoZWNrYm94RHJvcGRvd24oJ0xldmVscycsIGxldmVsSXRlbXMpO1xuICAgIGNvbnN0IHsgd3JhcHBlcjogc2Nob29sREQsIGdldFNlbGVjdGVkOiBnZXRTY2hvb2xzIH0gPSBtYWtlQ2hlY2tib3hEcm9wZG93bignU2Nob29scycsIHNjaG9vbEl0ZW1zKTtcbiAgICBjb25zdCB7IHdyYXBwZXI6IGRtZ0RELCBnZXRTZWxlY3RlZDogZ2V0RGFtYWdlcyB9ID0gbWFrZUNoZWNrYm94RHJvcGRvd24oJ0RhbWFnZScsIGRhbWFnZUl0ZW1zKTtcblxuICAgIGlmICghdGhpcy5fZGRDbG9zZXIpIHtcbiAgICAgIHRoaXMuX2RkQ2xvc2VyID0gKGV2dDogUG9pbnRlckV2ZW50KSA9PiB7XG4gICAgICAgIGZvciAoY29uc3QgZGQgb2YgW2x2bERELCBzY2hvb2xERCwgZG1nRERdKSB7XG4gICAgICAgICAgaWYgKGRkLm9wZW4gJiYgIWRkLmNvbnRhaW5zKGV2dC50YXJnZXQgYXMgTm9kZSkpIHtcbiAgICAgICAgICAgIGRkLm9wZW4gPSBmYWxzZTtcbiAgICAgICAgICAgIGRkLnF1ZXJ5U2VsZWN0b3IoJ3N1bW1hcnknKT8uc2V0QXR0cignYXJpYS1leHBhbmRlZCcsICdmYWxzZScpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfTtcbiAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3BvaW50ZXJkb3duJywgdGhpcy5fZGRDbG9zZXIsIHRydWUpO1xuICAgIH1cblxuICAgIGNvbnN0IGJ0bldyYXAgPSBjb250YWluZXIuY3JlYXRlRGl2KHtcbiAgICAgIGF0dHI6IHsgc3R5bGU6ICdkaXNwbGF5OmZsZXg7IGp1c3RpZnktY29udGVudDpjZW50ZXI7IG1hcmdpbi1ib3R0b206OHB4OycgfVxuICAgIH0pO1xuXG4gICAgY29uc3QgZ29CdG4gPSBidG5XcmFwLmNyZWF0ZUVsKCdidXR0b24nLCB7IHRleHQ6ICdHbycsIGNsczogJ21vZC1jdGEnIH0pO1xuICAgIGdvQnRuLnNldEF0dHIoJ3N0eWxlJywgJ2ZsZXg6MTsnKTtcbiAgICBnb0J0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgIHRoaXMucmVuZGVyVGFibGUoZ2V0TGV2ZWxzKCksIGdldFNjaG9vbHMoKSwgZ2V0RGFtYWdlcygpLCBjb25jQ2hrLmNoZWNrZWQpOztcbiAgICB9KTtcblxuICAgIGNvbnN0IGNsZWFyQnRuID0gYnRuV3JhcC5jcmVhdGVFbCgnYnV0dG9uJywgeyB0ZXh0OiAnQ2xlYXIgRmlsdGVycyBhbmQgUmVzZXQnIH0pO1xuICAgIGNsZWFyQnRuLnNldEF0dHIoJ3N0eWxlJywgJ2ZsZXg6MTsgbWFyZ2luLWxlZnQ6OHB4OycpO1xuICAgIGNsZWFyQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgKFtcbiAgICAgICAgW2x2bERELCAnTGV2ZWxzJ10sXG4gICAgICAgIFtzY2hvb2xERCwgJ1NjaG9vbHMnXSxcbiAgICAgICAgW2RtZ0RELCAnRGFtYWdlJ10sXG4gICAgICBdIGFzIGNvbnN0KS5mb3JFYWNoKChbZGQsIHRpdGxlXSkgPT4ge1xuICAgICAgICBkZC5xdWVyeVNlbGVjdG9yQWxsKCdpbnB1dFt0eXBlPWNoZWNrYm94XScpLmZvckVhY2goY2IgPT4gKGNiIGFzIEhUTUxJbnB1dEVsZW1lbnQpLmNoZWNrZWQgPSBmYWxzZSk7XG4gICAgICAgIGRkLnF1ZXJ5U2VsZWN0b3IoJ3N1bW1hcnknKT8uc2V0VGV4dChgJHt0aXRsZX0gKDApYCk7XG4gICAgICAgIGRkLm9wZW4gPSBmYWxzZTtcbiAgICAgIH0pO1xuICAgICAgY29uY0Noay5jaGVja2VkID0gdHJ1ZTtcbiAgICAgIGNvbnN0IHRhYmxlRGl2ID0gY29udGFpbmVyLmZpbmQoJyNzcGVsbGJvb2stdGFibGUnKSBhcyBIVE1MRGl2RWxlbWVudDtcbiAgICAgIGlmICh0YWJsZURpdikgdGFibGVEaXYuZW1wdHkoKTtcbiAgICB9KTtcbiAgICBjb250YWluZXIuY3JlYXRlRWwoJ2RpdicsIHsgYXR0cjogeyBpZDogJ3NwZWxsYm9vay1waWNrcycgfSB9KTtcbiAgICBjb250YWluZXIuY3JlYXRlRWwoJ2RpdicsIHsgYXR0cjogeyBpZDogJ3NwZWxsYm9vay10YWJsZScgfSB9KTtcblxuICAgIHRoaXMucmVuZGVyUGlja3MoKTtcbiAgfVxuXG4gIHByaXZhdGUgcmVuZGVyVGFibGUoXG4gICAgc2VsZWN0ZWRMZXZlbHM6IHN0cmluZ1tdLFxuICAgIHNlbGVjdGVkU2Nob29sczogc3RyaW5nW10sXG4gICAgc2VsZWN0ZWREYW1hZ2VzOiBzdHJpbmdbXSxcbiAgICBpbmNsdWRlQ29uY2VudHJhdGlvbjogYm9vbGVhblxuICApOiB2b2lkIHtcbiAgICBjb25zdCB0YWJsZURpdiA9IHRoaXMuY29udGFpbmVyRWwuZmluZCgnI3NwZWxsYm9vay10YWJsZScpIGFzIEhUTUxEaXZFbGVtZW50O1xuICAgIGlmICghdGFibGVEaXYpIHJldHVybjtcbiAgICB0YWJsZURpdi5yZXBsYWNlQ2hpbGRyZW4oKTtcbiAgICB0aGlzLmFkZEJ0bkJ5UGF0aC5jbGVhcigpO1xuXG5cbiAgICBjb25zdCBhbGxTcGVsbHMgPSB0aGlzLmFwcC52YXVsdFxuICAgICAgLmdldE1hcmtkb3duRmlsZXMoKVxuICAgICAgLmZpbHRlcihmID0+IGYucGF0aC5zdGFydHNXaXRoKCdDb21wZW5kaXVtL1NwZWxscycpKTtcblxuICAgIGNvbnN0IGZpbHRlcmVkID0gYWxsU3BlbGxzLmZpbHRlcihmID0+IHtcbiAgICAgIGNvbnN0IGZtID0gdGhpcy5hcHAubWV0YWRhdGFDYWNoZS5nZXRGaWxlQ2FjaGUoZik/LmZyb250bWF0dGVyO1xuICAgICAgaWYgKCFmbSkgcmV0dXJuIGZhbHNlO1xuXG4gICAgICBjb25zdCBsdmwgPSBTdHJpbmcoZm0ubGV2ZWwpO1xuICAgICAgY29uc3Qgc2NoID0gU3RyaW5nKGZtLnNjaG9vbCk7XG4gICAgICBjb25zdCBkbWdSYXcgPSB0eXBlb2YgZm0uZGFtYWdlX3R5cGUgPT09ICdzdHJpbmcnID8gZm0uZGFtYWdlX3R5cGUgOiAnJztcblxuICAgICAgY29uc3QgaXNDb25jID0gZm0uY29uY2VudHJhdGlvbiA9PT0gdHJ1ZSB8fFxuICAgICAgICBTdHJpbmcoZm0uY29uY2VudHJhdGlvbiA/PyAnJykudG9Mb3dlckNhc2UoKSA9PT0gJ3RydWUnO1xuXG4gICAgICBpZiAoIWluY2x1ZGVDb25jZW50cmF0aW9uICYmIGlzQ29uYykgcmV0dXJuIGZhbHNlO1xuXG4gICAgICByZXR1cm4gKFxuICAgICAgICAoIXNlbGVjdGVkTGV2ZWxzLmxlbmd0aCB8fCBzZWxlY3RlZExldmVscy5pbmNsdWRlcyhsdmwpKSAmJlxuICAgICAgICAoIXNlbGVjdGVkU2Nob29scy5sZW5ndGggfHwgc2VsZWN0ZWRTY2hvb2xzLmluY2x1ZGVzKHNjaCkpICYmXG4gICAgICAgICghc2VsZWN0ZWREYW1hZ2VzLmxlbmd0aCB8fCBzZWxlY3RlZERhbWFnZXMuaW5jbHVkZXMoZG1nUmF3KSlcbiAgICAgICk7XG4gICAgfSk7XG5cbiAgICBmaWx0ZXJlZC5zb3J0KChhLCBiKSA9PiB7XG4gICAgICBjb25zdCBmYSA9IHRoaXMuYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0RmlsZUNhY2hlKGEpIS5mcm9udG1hdHRlciE7XG4gICAgICBjb25zdCBmYiA9IHRoaXMuYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0RmlsZUNhY2hlKGIpIS5mcm9udG1hdHRlciE7XG5cbiAgICAgIGxldCB2YTogYW55LCB2YjogYW55O1xuICAgICAgc3dpdGNoICh0aGlzLnNwZWxsU29ydEtleSkge1xuICAgICAgICBjYXNlICdsZXZlbCc6IHZhID0gZmEubGV2ZWwgPz8gMDsgYnJlYWs7XG4gICAgICAgIGNhc2UgJ3NjaG9vbCc6IHZhID0gU3RyaW5nKGZhLnNjaG9vbCA/PyAnJykudG9Mb3dlckNhc2UoKTsgYnJlYWs7XG4gICAgICAgIGNhc2UgJ2RhbWFnZSc6IHZhID0gU3RyaW5nKGZhLmRhbWFnZV90eXBlID8/ICcnKS50b0xvd2VyQ2FzZSgpOyBicmVhaztcbiAgICAgICAgZGVmYXVsdDogdmEgPSBTdHJpbmcoZmEubmFtZSA/PyBhLmJhc2VuYW1lKS50b0xvd2VyQ2FzZSgpO1xuICAgICAgfVxuICAgICAgc3dpdGNoICh0aGlzLnNwZWxsU29ydEtleSkge1xuICAgICAgICBjYXNlICdsZXZlbCc6IHZiID0gZmIubGV2ZWwgPz8gMDsgYnJlYWs7XG4gICAgICAgIGNhc2UgJ3NjaG9vbCc6IHZiID0gU3RyaW5nKGZiLnNjaG9vbCA/PyAnJykudG9Mb3dlckNhc2UoKTsgYnJlYWs7XG4gICAgICAgIGNhc2UgJ2RhbWFnZSc6IHZiID0gU3RyaW5nKGZiLmRhbWFnZV90eXBlID8/ICcnKS50b0xvd2VyQ2FzZSgpOyBicmVhaztcbiAgICAgICAgZGVmYXVsdDogdmIgPSBTdHJpbmcoZmIubmFtZSA/PyBiLmJhc2VuYW1lKS50b0xvd2VyQ2FzZSgpO1xuICAgICAgfVxuXG4gICAgICBpZiAodmEgPCB2YikgcmV0dXJuIC0xICogdGhpcy5zcGVsbFNvcnREaXI7XG4gICAgICBpZiAodmEgPiB2YikgcmV0dXJuIDEgKiB0aGlzLnNwZWxsU29ydERpcjtcbiAgICAgIHJldHVybiAwO1xuICAgIH0pO1xuXG4gICAgY29uc3QgdGFibGUgPSB0YWJsZURpdi5jcmVhdGVFbCgndGFibGUnKTtcbiAgICB0YWJsZS5zZXRBdHRyKCdzdHlsZScsICd3aWR0aDoxMDAlO2JvcmRlci1jb2xsYXBzZTpjb2xsYXBzZTsnKTtcblxuICAgIGNvbnN0IGhlYWRlclJvdyA9IHRhYmxlLmNyZWF0ZUVsKCd0cicpO1xuICAgIGhlYWRlclJvdy5zZXRBdHRyKCdzdHlsZScsICdkaXNwbGF5OmZsZXg7Jyk7XG5cbiAgICBjb25zdCBhY3RUaCA9IGhlYWRlclJvdy5jcmVhdGVFbCgndGgnKTtcbiAgICBhY3RUaC5zZXRBdHRyKCdzdHlsZScsIFtcbiAgICAgICdmbGV4OjAgMCAyOHB4JyxcbiAgICAgICdwYWRkaW5nOjRweCcsXG4gICAgICAndGV4dC1hbGlnbjpsZWZ0J1xuICAgIF0uam9pbignOycpKTtcblxuICAgIHR5cGUgU3BlbGxDb2xLZXkgPSAnbmFtZScgfCAnbGV2ZWwnIHwgJ3NjaG9vbCcgfCAnZGFtYWdlJztcblxuICAgIGNvbnN0IGNvbHVtbnM6IHsgbGFiZWw6IHN0cmluZzsga2V5PzogU3BlbGxDb2xLZXk7IGZsZXg6IG51bWJlciB9W10gPSBbXG4gICAgICB7IGxhYmVsOiAnTmFtZScsIGtleTogJ25hbWUnLCBmbGV4OiAyIH0sXG4gICAgICB7IGxhYmVsOiAnTHZsJywga2V5OiAnbGV2ZWwnLCBmbGV4OiAxIH0sXG4gICAgICB7IGxhYmVsOiAnU2Nob29sJywga2V5OiAnc2Nob29sJywgZmxleDogMSB9LFxuICAgICAgeyBsYWJlbDogJ0RtZyBUeXBlJywga2V5OiAnZGFtYWdlJywgZmxleDogMSB9LFxuICAgICAgeyBsYWJlbDogJ0NvbmMuJywgZmxleDogMSB9LFxuICAgIF07XG5cbiAgICBmb3IgKGNvbnN0IHsgbGFiZWwsIGtleSwgZmxleCB9IG9mIGNvbHVtbnMpIHtcbiAgICAgIGNvbnN0IHRoID0gaGVhZGVyUm93LmNyZWF0ZUVsKCd0aCcpO1xuICAgICAgdGguc2V0VGV4dChsYWJlbCk7XG4gICAgICB0aC5zZXRBdHRyKFxuICAgICAgICAnc3R5bGUnLFxuICAgICAgICBbXG4gICAgICAgICAgYGZsZXg6JHtmbGV4fWAsXG4gICAgICAgICAgJ3BhZGRpbmc6NHB4JyxcbiAgICAgICAgICBsYWJlbCA9PT0gJ05hbWUnID8gJ3RleHQtYWxpZ246bGVmdCcgOiAndGV4dC1hbGlnbjpjZW50ZXInLFxuICAgICAgICAgIGtleSA/ICdjdXJzb3I6cG9pbnRlcicgOiAnJyxcbiAgICAgICAgXS5qb2luKCc7JylcbiAgICAgICk7XG5cbiAgICAgIGlmIChrZXkpIHtcbiAgICAgICAgdGguYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgICAgaWYgKHRoaXMuc3BlbGxTb3J0S2V5ID09PSBrZXkpIHtcbiAgICAgICAgICAgIHRoaXMuc3BlbGxTb3J0RGlyID0gdGhpcy5zcGVsbFNvcnREaXIgPT09IDEgPyAtMSA6IDE7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuc3BlbGxTb3J0S2V5ID0ga2V5O1xuICAgICAgICAgICAgdGhpcy5zcGVsbFNvcnREaXIgPSAxO1xuICAgICAgICAgIH1cbiAgICAgICAgICB0aGlzLnJlbmRlclRhYmxlKHNlbGVjdGVkTGV2ZWxzLCBzZWxlY3RlZFNjaG9vbHMsIHNlbGVjdGVkRGFtYWdlcywgaW5jbHVkZUNvbmNlbnRyYXRpb24pO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBsZXQgZm91bmQgPSAwO1xuICAgIGZvciAoY29uc3QgZiBvZiBmaWx0ZXJlZCkge1xuICAgICAgY29uc3QgZm0gPSB0aGlzLmFwcC5tZXRhZGF0YUNhY2hlLmdldEZpbGVDYWNoZShmKSEuZnJvbnRtYXR0ZXIhO1xuICAgICAgY29uc3QgbHZsID0gU3RyaW5nKGZtLmxldmVsKTtcbiAgICAgIGNvbnN0IHNjaCA9IFN0cmluZyhmbS5zY2hvb2wpO1xuICAgICAgY29uc3QgZG1nUmF3ID0gdHlwZW9mIGZtLmRhbWFnZV90eXBlID09PSAnc3RyaW5nJyA/IGZtLmRhbWFnZV90eXBlIDogJyc7XG5cbiAgICAgIGNvbnN0IHJvdyA9IHRhYmxlLmNyZWF0ZUVsKCd0cicpO1xuICAgICAgcm93LnNldEF0dHIoJ3N0eWxlJywgJ2Rpc3BsYXk6ZmxleDsnKTtcblxuICAgICAgY29uc3QgYWN0VGQgPSByb3cuY3JlYXRlRWwoJ3RkJyk7XG4gICAgICBhY3RUZC5zZXRBdHRyKFxuICAgICAgICAnc3R5bGUnLFxuICAgICAgICAnZmxleDowIDAgMjhweDsgcGFkZGluZzowOyBkaXNwbGF5OmZsZXg7IGFsaWduLWl0ZW1zOmNlbnRlcjsganVzdGlmeS1jb250ZW50OmNlbnRlcjsnXG4gICAgICApO1xuXG4gICAgICAvLyBjcmVhdGUgKyBidXR0b25cbiAgICAgIGNvbnN0IGFkZEJ0biA9IGFjdFRkLmNyZWF0ZUVsKCdidXR0b24nLCB7IHRleHQ6ICdcdUZGMEInIH0pO1xuICAgICAgYWRkQnRuLmFkZENsYXNzKCdzYi1zcGVsbGFkZC1idG4nKTtcblxuICAgICAgLy8gXHUyNDYwIHJlbWVtYmVyIHRoaXMgYnV0dG9uIGZvciB0aGlzIHNwZWxsIHBhdGhcbiAgICAgIHRoaXMuYWRkQnRuQnlQYXRoLnNldChmLnBhdGgsIGFkZEJ0bik7XG5cbiAgICAgIC8vIFx1MjQ2MSBpZiBhbHJlYWR5IHNlbGVjdGVkLCBzaG93IFx1MjcxMyBhbmQgZGlzYWJsZVxuICAgICAgaWYgKHRoaXMucGlja3MuaW5jbHVkZXMoZi5wYXRoKSkge1xuICAgICAgICBhZGRCdG4udGV4dENvbnRlbnQgPSAnXHUyNzEzJztcbiAgICAgICAgYWRkQnRuLmRpc2FibGVkID0gdHJ1ZTtcbiAgICAgIH1cblxuICAgICAgLy8gXHUyNDYyIGNsaWNrIC0+IGFkZCB0byBwaWNrcywgZmxpcCB0byBcdTI3MTMsIGRpc2FibGUsIGFuZCByZS1yZW5kZXIgcGlja3NcbiAgICAgIGFkZEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGUgPT4ge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIGlmICh0aGlzLnBpY2tzLmluY2x1ZGVzKGYucGF0aCkpIHtcbiAgICAgICAgICBuZXcgTm90aWNlKCdBbHJlYWR5IGluIFNlbGVjdGVkIFNwZWxscy4nKTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5waWNrcy5wdXNoKGYucGF0aCk7XG4gICAgICAgIGFkZEJ0bi50ZXh0Q29udGVudCA9ICdcdTI3MTMnO1xuICAgICAgICBhZGRCdG4uZGlzYWJsZWQgPSB0cnVlO1xuICAgICAgICB0aGlzLnJlbmRlclBpY2tzKCk7ICAgLy8gdGhpcyB3aWxsIGFsc28gc2hvdyB0aGUgaXRlbSBpbiB0aGUgU2VsZWN0ZWQgU3BlbGxzIGJveFxuICAgICAgfSk7XG5cblxuICAgICAgY29uc3QgbmFtZVRkID0gcm93LmNyZWF0ZUVsKCd0ZCcpO1xuICAgICAgbmFtZVRkLnNldEF0dHIoJ3N0eWxlJywgJ2ZsZXg6MjtwYWRkaW5nOjRweDsnKTtcbiAgICAgIGNvbnN0IGxpbmsgPSBuYW1lVGQuY3JlYXRlRWwoJ2EnLCB7IGF0dHI6IHsgaHJlZjogJyMnIH0gfSk7XG4gICAgICBsaW5rLnNldFRleHQoZm0ubmFtZSB8fCBmLmJhc2VuYW1lKTtcbiAgICAgIGNvbnN0IGVuYWJsZVByZXZpZXcgPSAhIWdldFRvb2xraXQodGhpcy5hcHApPy5zZXR0aW5ncz8uZW5hYmxlU2lkZWJhclByZXZpZXdzO1xuICAgICAgaWYgKGVuYWJsZVByZXZpZXcpIHtcbiAgICAgICAgbGluay5jbGFzc0xpc3QuYWRkKCdpbnRlcm5hbC1saW5rJyk7XG4gICAgICAgIGxpbmsuc2V0QXR0cignZGF0YS1ocmVmJywgZi5wYXRoKTtcbiAgICAgICAgbGluay5zZXRBdHRyKCdocmVmJywgZi5wYXRoKTtcbiAgICAgIH1cbiAgICAgIGxpbmsuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBlID0+IHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICB0aGlzLmFwcC53b3Jrc3BhY2Uub3BlbkxpbmtUZXh0KGYucGF0aCwgJycsIGZhbHNlKTtcbiAgICAgIH0pO1xuXG4gICAgICAvLyBMZXZlbFxuICAgICAgY29uc3QgbHZsVGQgPSByb3cuY3JlYXRlRWwoJ3RkJyk7XG4gICAgICBsdmxUZC5zZXRBdHRyKCdzdHlsZScsICdmbGV4OjE7IGRpc3BsYXk6ZmxleDsgYWxpZ24taXRlbXM6Y2VudGVyOyBqdXN0aWZ5LWNvbnRlbnQ6Y2VudGVyOyBwYWRkaW5nOjRweDsnKTtcbiAgICAgIGx2bFRkLmNyZWF0ZVNwYW4oeyB0ZXh0OiBsdmwgPT09ICcwJyA/ICdDYW50cmlwJyA6IGx2bCB9KTtcblxuICAgICAgLy8gU2Nob29sXG4gICAgICBjb25zdCBzY2hUZCA9IHJvdy5jcmVhdGVFbCgndGQnKTtcbiAgICAgIHNjaFRkLnNldEF0dHIoJ3N0eWxlJywgJ2ZsZXg6MTsgZGlzcGxheTpmbGV4OyBhbGlnbi1pdGVtczpjZW50ZXI7IGp1c3RpZnktY29udGVudDpjZW50ZXI7IHBhZGRpbmc6NHB4OycpO1xuICAgICAgc2NoVGQuY3JlYXRlU3Bhbih7IHRleHQ6IFNDSE9PTF9BQkJSW3NjaF0gPz8gc2NoLnNsaWNlKDAsIDMpIH0pO1xuXG4gICAgICAvLyBEYW1hZ2VcbiAgICAgIGNvbnN0IGRtZ1RkID0gcm93LmNyZWF0ZUVsKCd0ZCcpO1xuICAgICAgZG1nVGQuc2V0QXR0cignc3R5bGUnLCAnZmxleDoxOyBkaXNwbGF5OmZsZXg7IGFsaWduLWl0ZW1zOmNlbnRlcjsganVzdGlmeS1jb250ZW50OmNlbnRlcjsgcGFkZGluZzo0cHg7Jyk7XG4gICAgICBkbWdUZC5jcmVhdGVTcGFuKHsgdGV4dDogZG1nUmF3ID8gKERBTUFHRV9BQkJSW2RtZ1Jhd10gPz8gZG1nUmF3LnNsaWNlKDAsIDMpKSA6ICdcdTIwMTQnIH0pO1xuXG4gICAgICBjb25zdCBjb25jVGQgPSByb3cuY3JlYXRlRWwoJ3RkJyk7XG4gICAgICBjb25jVGQuc2V0QXR0cihcbiAgICAgICAgJ3N0eWxlJyxcbiAgICAgICAgJ2ZsZXg6MTsgZGlzcGxheTpmbGV4OyBhbGlnbi1pdGVtczpjZW50ZXI7IGp1c3RpZnktY29udGVudDpjZW50ZXI7IHBhZGRpbmc6NHB4OydcbiAgICAgICk7XG5cbiAgICAgIGNvbnN0IGlzQ29uYyA9XG4gICAgICAgIGZtLmNvbmNlbnRyYXRpb24gPT09IHRydWUgfHxcbiAgICAgICAgU3RyaW5nKGZtLmNvbmNlbnRyYXRpb24gPz8gJycpLnRvTG93ZXJDYXNlKCkgPT09ICd0cnVlJztcblxuICAgICAgY29uY1RkLmNyZWF0ZVNwYW4oeyB0ZXh0OiBpc0NvbmMgPyAnXHUyNzEzJyA6ICdcdTIwMTQnIH0pO1xuXG4gICAgICBmb3VuZCsrO1xuICAgIH1cblxuICAgIGlmICghZm91bmQpIHtcbiAgICAgIHRhYmxlRGl2LmNyZWF0ZUVsKCdwJykuc2V0VGV4dCgnTm8gc3BlbGxzIG1hdGNoIHlvdXIgZmlsdGVyIGNyaXRlcmlhLicpO1xuICAgIH1cbiAgfVxufVxuIiwgIi8vIHNiLWdhbWVwbGF5LnRzXG5cbi8vIFx1MjUwMFx1MjUwMCBHYW1lcGxheSBTaWRlYmFyIFZpZXcgXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXG5pbXBvcnQge1xuICAgIEFwcCxcbiAgICBJdGVtVmlldyxcbiAgICBXb3Jrc3BhY2VMZWFmLFxuICAgIFRGaWxlLFxuICAgIE5vdGljZSxcbiAgICBNb2RhbFxufSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgeyBTaG9wa2VlcGVyUGFuZWwgfSBmcm9tICcuL3NiLXNob3BrZWVwZXInO1xuXG5leHBvcnQgY29uc3QgR0FNRVBMQVlfVklFV19UWVBFID0gXCJ2dnVuZGVybG9yZS1nYW1lcGxheVwiO1xuXG4vLyBwbHVnaW4gYWNjZXNzb3JcbmZ1bmN0aW9uIGdldFRvb2xraXQoYXBwOiBBcHApOiBhbnkge1xuICAgIHJldHVybiAoXG4gICAgICAgIChhcHAgYXMgYW55KS5wbHVnaW5zLmdldFBsdWdpbihcInZ2dW5kZXJsb3JlLXRvb2xraXRcIikgfHxcbiAgICAgICAgKGFwcCBhcyBhbnkpLnBsdWdpbnMucGx1Z2lucz8uW1widnZ1bmRlcmxvcmUtdG9vbGtpdFwiXVxuICAgICk7XG59XG5cbmNvbnN0IEFMSUdOX0FCQlI6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4gPSB7XG4gICAgXCJsYXdmdWwgZ29vZFwiOiBcIkxHXCIsXG4gICAgXCJuZXV0cmFsIGdvb2RcIjogXCJOR1wiLFxuICAgIFwiY2hhb3RpYyBnb29kXCI6IFwiQ0dcIixcbiAgICBcImxhd2Z1bCBuZXV0cmFsXCI6IFwiTE5cIixcbiAgICBcInRydWUgbmV1dHJhbFwiOiBcIk5cIixcbiAgICBcIm5ldXRyYWxcIjogXCJOXCIsXG4gICAgXCJjaGFvdGljIG5ldXRyYWxcIjogXCJDTlwiLFxuICAgIFwibGF3ZnVsIGV2aWxcIjogXCJMRVwiLFxuICAgIFwibmV1dHJhbCBldmlsXCI6IFwiTkVcIixcbiAgICBcImNoYW90aWMgZXZpbFwiOiBcIkNFXCIsXG59O1xuXG5jb25zdCBBQklMSVRZX0FCQlI6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4gPSB7XG4gICAgc3RyZW5ndGg6IFwiU1RSXCIsXG4gICAgZGV4dGVyaXR5OiBcIkRFWFwiLFxuICAgIGNvbnN0aXR1dGlvbjogXCJDT05cIixcbiAgICBpbnRlbGxpZ2VuY2U6IFwiSU5UXCIsXG4gICAgd2lzZG9tOiBcIldJU1wiLFxuICAgIGNoYXJpc21hOiBcIkNIQVwiLFxufTtcblxuLy8gY29uc3QgU0tJTExfQUJCUjogUmVjb3JkPHN0cmluZywgc3RyaW5nPiA9IHtcbi8vICAgICBhY3JvYmF0aWNzOiBcIkFjcm9cIixcbi8vICAgICBcImFuaW1hbCBoYW5kbGluZ1wiOiBcIkFuaW1cIixcbi8vICAgICBhcmNhbmE6IFwiQXJjLlwiLFxuLy8gICAgIGF0aGxldGljczogXCJBdGguXCIsXG4vLyAgICAgZGVjZXB0aW9uOiBcIkRlYy5cIixcbi8vICAgICBoaXN0b3J5OiBcIkhpcy5cIixcbi8vICAgICBpbnNpZ2h0OiBcIklucy5cIixcbi8vICAgICBpbnRpbWlkYXRpb246IFwiSW50LlwiLFxuLy8gICAgIGludmVzdGlnYXRpb246IFwiSW52LlwiLFxuLy8gICAgIG1lZGljaW5lOiBcIk1lZC5cIixcbi8vICAgICBuYXR1cmU6IFwiTmF0LlwiLFxuLy8gICAgIHBlcmNlcHRpb246IFwiUGVyYy5cIixcbi8vICAgICBwZXJmb3JtYW5jZTogXCJQZXJmLlwiLFxuLy8gICAgIHBlcnN1YXNpb246IFwiUGVycy5cIixcbi8vICAgICByZWxpZ2lvbjogXCJSZWwuXCIsXG4vLyAgICAgXCJzbGVpZ2h0IG9mIGhhbmRcIjogXCJTb0hcIixcbi8vICAgICBzdGVhbHRoOiBcIlN0bC5cIixcbi8vICAgICBzdXJ2aXZhbDogXCJTdXJ2LlwiLFxuLy8gfTtcblxuXG50eXBlIFBsYXllclJvdyA9IHtcbiAgICBmaWxlOiBURmlsZTtcbiAgICBuYW1lOiBzdHJpbmc7XG4gICAgYWM6IHN0cmluZztcbiAgICBocEN1cjogc3RyaW5nO1xuICAgIGhwTWF4OiBzdHJpbmc7XG4gICAgc3BlZWQ6IHN0cmluZztcbiAgICBhbGlnbjogc3RyaW5nO1xuICAgIHBwOiBudW1iZXI7XG59O1xuXG5jb25zdCBwb3NzZXNzaXZlID0gKG46IHN0cmluZykgPT4ge1xuICAgIGNvbnN0IHQgPSAobiA/PyBcIlwiKS50cmltKCk7XG4gICAgaWYgKCF0KSByZXR1cm4gXCJcIjtcbiAgICByZXR1cm4gL3MkL2kudGVzdCh0KSA/IGAke3R9J2AgOiBgJHt0fSdzYDtcbn07XG5cbmZ1bmN0aW9uIHNhbml0aXplU3BlZWQocmF3OiBzdHJpbmcpOiBzdHJpbmcge1xuICAgIGlmICghcmF3KSByZXR1cm4gXCJcdTIwMTRcIjtcbiAgICBjb25zdCBsb3dlciA9IHJhdy50b0xvd2VyQ2FzZSgpO1xuXG4gICAgLy8gZXh0cmFjdCB3YWxrXG4gICAgY29uc3Qgd2Fsa01hdGNoID0gbG93ZXIubWF0Y2goL3dhbGtcXHMrKFxcZCspLyk7XG4gICAgY29uc3Qgd2FsayA9IHdhbGtNYXRjaCA/IHdhbGtNYXRjaFsxXSA6IFwiXCI7XG5cbiAgICAvLyBleHRyYWN0IGZseVxuICAgIGNvbnN0IGZseU1hdGNoID0gbG93ZXIubWF0Y2goL2ZseVxccysoXFxkKykvKTtcbiAgICBjb25zdCBmbHkgPSBmbHlNYXRjaCA/IGZseU1hdGNoWzFdIDogXCJcIjtcblxuICAgIC8vIGJ1aWxkIGRpc3BsYXlcbiAgICBpZiAod2FsayAmJiBmbHkpIHJldHVybiBgJHt3YWxrfSAvICR7Zmx5fWA7XG4gICAgaWYgKHdhbGspIHJldHVybiB3YWxrO1xuICAgIGlmIChmbHkpIHJldHVybiBmbHk7XG5cbiAgICByZXR1cm4gXCJcdTIwMTRcIjtcbn1cblxuLy8gU1BFTEwgQU5EIElURU0gRURJVCBNT0RBTFxuXG50eXBlIEVkaXRMaXN0T3B0cyA9IHtcbiAgICB0aXRsZTogc3RyaW5nO1xuICAgIGluaXRpYWw6IHN0cmluZ1tdO1xuICAgIGNhbmRpZGF0ZXM6IHN0cmluZ1tdO1xuICAgIHBsYWNlaG9sZGVyPzogc3RyaW5nO1xuICAgIG9uU2F2ZTogKHZhbHVlczogc3RyaW5nW10pID0+IHZvaWQgfCBQcm9taXNlPHZvaWQ+O1xufTtcblxuZXhwb3J0IGNsYXNzIEVkaXRMaXN0TW9kYWwgZXh0ZW5kcyBNb2RhbCB7XG4gICAgcHJpdmF0ZSB2YWx1ZXM6IHN0cmluZ1tdO1xuICAgIHByaXZhdGUgb3B0czogRWRpdExpc3RPcHRzO1xuICAgIHByaXZhdGUgZW5zdXJlV2lraWxpbmsoczogc3RyaW5nKTogc3RyaW5nIHtcbiAgICAgICAgbGV0IHQgPSAocyA/PyBcIlwiKS50b1N0cmluZygpLnRyaW0oKTtcbiAgICAgICAgaWYgKCF0KSByZXR1cm4gXCJcIjtcbiAgICAgICAgLy8gaWYgc29tZW9uZSBwYXN0ZWQgYSBxdW90ZWQvSlNPTiBzdHJpbmcsIHVud3JhcCBpdFxuICAgICAgICB0cnkgeyBjb25zdCBqID0gSlNPTi5wYXJzZSh0KTsgaWYgKHR5cGVvZiBqID09PSBcInN0cmluZ1wiKSB0ID0gajsgfSBjYXRjaCB7IH1cbiAgICAgICAgLy8gc3RyaXAgc3Vycm91bmRpbmcgW10gdGhhdCBzb21ldGltZXMgc25lYWsgaW5cbiAgICAgICAgdCA9IHQucmVwbGFjZSgvXlxcWytcXHMqfFxccypcXF0rJC9nLCBcIlwiKTtcbiAgICAgICAgLy8gZHJvcCBhbGlhcy9hbmNob3IgZm9yIHN0b3JhZ2U7IHdlIG9ubHkgc3RvcmUgdGhlIHBhZ2VcbiAgICAgICAgdCA9IHQuc3BsaXQoXCJ8XCIpWzBdLnNwbGl0KFwiI1wiKVswXS50cmltKCk7XG4gICAgICAgIGlmICghdC5zdGFydHNXaXRoKFwiW1tcIikpIHQgPSBgW1ske3R9XV1gO1xuICAgICAgICByZXR1cm4gdDtcbiAgICB9XG4gICAgcHJpdmF0ZSBfY2FuZGlkYXRlczogc3RyaW5nW107XG4gICAgcHJpdmF0ZSBnZXQgY2FuZGlkYXRlcygpOiBzdHJpbmdbXSB7IHJldHVybiB0aGlzLl9jYW5kaWRhdGVzOyB9XG5cbiAgICBwcml2YXRlIGlucHV0V3JhcCE6IEhUTUxEaXZFbGVtZW50O1xuICAgIHByaXZhdGUgaW5wdXRFbCE6IEhUTUxJbnB1dEVsZW1lbnQ7XG4gICAgcHJpdmF0ZSBhZGRCdG4hOiBIVE1MQnV0dG9uRWxlbWVudDtcbiAgICBwcml2YXRlIHN1Z2dlc3RXcmFwITogSFRNTERpdkVsZW1lbnQ7XG4gICAgcHJpdmF0ZSBsaXN0V3JhcCE6IEhUTUxEaXZFbGVtZW50O1xuXG4gICAgcHJpdmF0ZSBob3ZlckluZGV4ID0gLTE7XG4gICAgcHJpdmF0ZSBmaWx0ZXJlZDogc3RyaW5nW10gPSBbXTtcblxuICAgIGNvbnN0cnVjdG9yKGFwcDogQXBwLCBvcHRzOiBFZGl0TGlzdE9wdHMpIHtcbiAgICAgICAgc3VwZXIoYXBwKTtcbiAgICAgICAgdGhpcy52YWx1ZXMgPSBbLi4uKG9wdHMuaW5pdGlhbCB8fCBbXSldO1xuICAgICAgICB0aGlzLl9jYW5kaWRhdGVzID0gQXJyYXkuZnJvbShcbiAgICAgICAgICAgIG5ldyBTZXQoKG9wdHMuY2FuZGlkYXRlcyB8fCBbXSkubWFwKHMgPT4gdGhpcy5lbnN1cmVXaWtpbGluayhzKSkpXG4gICAgICAgICkuc29ydCgpO1xuICAgICAgICB0aGlzLm9wdHMgPSBvcHRzO1xuICAgIH1cblxuXG4gICAgLy8gXHUyNTAwXHUyNTAwIGhlbHBlcnM6IGxpbmsgcGFyc2luZyAvIGxhYmVscyBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcbiAgICBwcml2YXRlIGxhYmVsRm9yKHM6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgICAgIGNvbnN0IG0gPSBTdHJpbmcocykubWF0Y2goL1xcW1xcWyhbXnxcXF1dKykoPzpcXHwoW15cXF1dKykpP1xcXVxcXS8pO1xuICAgICAgICBjb25zdCBsYWJlbCA9IChtID8gKG1bMl0gfHwgbVsxXSkgOiBzKS5zcGxpdChcIi9cIikucG9wKCkhLnJlcGxhY2UoL1xcLm1kJC8sIFwiXCIpO1xuICAgICAgICByZXR1cm4gbGFiZWwudHJpbSgpO1xuICAgIH1cbiAgICBwcml2YXRlIHBhcnNlTGlua2lzaChzOiBzdHJpbmcpOiB7IHBhdGg/OiBzdHJpbmc7IGxhYmVsOiBzdHJpbmcgfSB7XG4gICAgICAgIGNvbnN0IG0gPSBTdHJpbmcocykubWF0Y2goL1xcW1xcWyhbXnxcXF1dKykoPzpcXHwoW15cXF1dKykpP1xcXVxcXS8pO1xuICAgICAgICByZXR1cm4gbSA/IHsgcGF0aDogbVsxXSwgbGFiZWw6IHRoaXMubGFiZWxGb3IocykgfSA6IHsgbGFiZWw6IHRoaXMubGFiZWxGb3IocykgfTtcbiAgICB9XG4gICAgcHJpdmF0ZSBrZXlGb3Ioczogc3RyaW5nKTogc3RyaW5nIHsgcmV0dXJuIHRoaXMubGFiZWxGb3IocykudG9Mb3dlckNhc2UoKTsgfVxuICAgIHByaXZhdGUgbWF0Y2hDYW5kaWRhdGVCeUxhYmVsKGxhYmVsOiBzdHJpbmcpOiBzdHJpbmcgfCBudWxsIHtcbiAgICAgICAgY29uc3QgbG93ID0gbGFiZWwudHJpbSgpLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgIGNvbnN0IGhpdCA9IHRoaXMuY2FuZGlkYXRlcy5maW5kKChjKSA9PiB0aGlzLmxhYmVsRm9yKGMpLnRvTG93ZXJDYXNlKCkgPT09IGxvdyk7XG4gICAgICAgIHJldHVybiBoaXQgPz8gbnVsbDtcbiAgICB9XG5cbiAgICAvLyBcdTI1MDBcdTI1MDAgbW9kYWwgbGlmZWN5Y2xlIFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFxuICAgIG9uT3BlbigpIHtcbiAgICAgICAgY29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XG5cbiAgICAgICAgdGhpcy5tb2RhbEVsLmFkZENsYXNzKFwidnYtZml4ZWQtbW9kYWxcIik7XG4gICAgICAgIHRoaXMubW9kYWxFbC5zdHlsZS53aWR0aCA9IFwiNTIwcHhcIjsgIC8vIHRoaW5cbiAgICAgICAgdGhpcy5tb2RhbEVsLnN0eWxlLm1heFdpZHRoID0gXCI5NnZ3XCI7XG4gICAgICAgIHRoaXMubW9kYWxFbC5zdHlsZS5tYXhIZWlnaHQgPSBcIjkydmhcIjtcblxuICAgICAgICBjb250ZW50RWwuY3JlYXRlRWwoXCJoMlwiLCB7IHRleHQ6IHRoaXMub3B0cy50aXRsZSB9KTtcblxuICAgICAgICAvLyBzZWFyY2ggcm93XG4gICAgICAgIGNvbnN0IHJvdyA9IGNvbnRlbnRFbC5jcmVhdGVEaXYoeyBjbHM6IFwidnYtZmllbGQtcm93XCIgfSk7XG4gICAgICAgIHRoaXMuaW5wdXRXcmFwID0gcm93LmNyZWF0ZURpdih7IGNsczogXCJ2di1zZWFyY2h3cmFwXCIgfSk7XG4gICAgICAgIHRoaXMuaW5wdXRFbCA9IHRoaXMuaW5wdXRXcmFwLmNyZWF0ZUVsKFwiaW5wdXRcIiwge1xuICAgICAgICAgICAgdHlwZTogXCJ0ZXh0XCIsXG4gICAgICAgICAgICBwbGFjZWhvbGRlcjogdGhpcy5vcHRzLnBsYWNlaG9sZGVyIHx8IFwiU2VhcmNoXHUyMDI2XCIsXG4gICAgICAgICAgICBjbHM6IFwicHJvbXB0LWlucHV0XCIsXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmFkZEJ0biA9IHJvdy5jcmVhdGVFbChcImJ1dHRvblwiLCB7IHRleHQ6IFwiQWRkXCIsIGNsczogXCJtb2QtY3RhIHZ2LWFkZGJ0blwiIH0pO1xuICAgICAgICB0aGlzLnN1Z2dlc3RXcmFwID0gdGhpcy5pbnB1dFdyYXAuY3JlYXRlRGl2KHsgY2xzOiBcInZ2LXN1Z2dlc3RcIiwgYXR0cjogeyBcImFyaWEtaGlkZGVuXCI6IFwidHJ1ZVwiIH0gfSk7XG5cbiAgICAgICAgLy8gbGlzdFxuICAgICAgICB0aGlzLmxpc3RXcmFwID0gY29udGVudEVsLmNyZWF0ZURpdih7IGNsczogXCJ2di1saXN0LXdyYXBcIiB9KTtcbiAgICAgICAgdGhpcy5wYWludExpc3QoKTtcblxuICAgICAgICAvLyBmb290ZXJcbiAgICAgICAgY29uc3QgYWN0aW9ucyA9IGNvbnRlbnRFbC5jcmVhdGVEaXYoeyBjbHM6IFwidnYtYWN0aW9uc1wiIH0pO1xuICAgICAgICBjb25zdCBzYXZlID0gYWN0aW9ucy5jcmVhdGVFbChcImJ1dHRvblwiLCB7IHRleHQ6IFwiU2F2ZVwiLCBjbHM6IFwibW9kLWN0YVwiIH0pO1xuICAgICAgICBjb25zdCBjYW5jZWwgPSBhY3Rpb25zLmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHsgdGV4dDogXCJDYW5jZWxcIiwgY2xzOiBcInZ2LWNhbmNlbFwiIH0pO1xuXG4gICAgICAgIC8vIHdpcmluZ1xuICAgICAgICBjb25zdCBjb21taXRDdXJyZW50ID0gKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgcmF3ID0gdGhpcy5pbnB1dEVsLnZhbHVlLnRyaW0oKTtcbiAgICAgICAgICAgIGlmICghcmF3KSByZXR1cm47XG4gICAgICAgICAgICB0aGlzLmFkZFZhbHVlKHJhdyk7XG4gICAgICAgIH07XG5cbiAgICAgICAgdGhpcy5pbnB1dEVsLmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCAoKSA9PiB0aGlzLnNob3dTdWdnZXN0aW9ucyh0aGlzLmlucHV0RWwudmFsdWUpKTtcbiAgICAgICAgdGhpcy5pbnB1dEVsLmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIChlKSA9PiB7XG4gICAgICAgICAgICBpZiAoZS5rZXkgPT09IFwiRW50ZXJcIikge1xuICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5ob3ZlckluZGV4ID49IDAgJiYgdGhpcy5maWx0ZXJlZFt0aGlzLmhvdmVySW5kZXhdKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIGFkZCBieSBzdWdnZXN0aW9uIGxhYmVsXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYWRkVmFsdWUodGhpcy5sYWJlbEZvcih0aGlzLmZpbHRlcmVkW3RoaXMuaG92ZXJJbmRleF0pKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBjb21taXRDdXJyZW50KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGUua2V5ID09PSBcIkFycm93RG93blwiKSB7IGUucHJldmVudERlZmF1bHQoKTsgdGhpcy5tb3ZlSG92ZXIoMSk7IH1cbiAgICAgICAgICAgIGlmIChlLmtleSA9PT0gXCJBcnJvd1VwXCIpIHsgZS5wcmV2ZW50RGVmYXVsdCgpOyB0aGlzLm1vdmVIb3ZlcigtMSk7IH1cbiAgICAgICAgICAgIGlmIChlLmtleSA9PT0gXCJFc2NhcGVcIikgeyB0aGlzLmhpZGVTdWdnZXN0aW9ucygpOyB9XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmFkZEJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgY29tbWl0Q3VycmVudCk7XG4gICAgICAgIHNhdmUuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGFzeW5jICgpID0+IHsgYXdhaXQgdGhpcy5vcHRzLm9uU2F2ZT8uKFsuLi50aGlzLnZhbHVlc10pOyB0aGlzLmNsb3NlKCk7IH0pO1xuICAgICAgICBjYW5jZWwuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHRoaXMuY2xvc2UoKSk7XG5cbiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB0aGlzLmlucHV0RWwuZm9jdXMoKSwgMCk7XG4gICAgfVxuXG4gICAgb25DbG9zZSgpIHtcbiAgICAgICAgdGhpcy5tb2RhbEVsLmNsYXNzTGlzdC5yZW1vdmUoXCJ2di1maXhlZC1tb2RhbFwiKTtcbiAgICAgICAgdGhpcy5tb2RhbEVsLnN0eWxlLnJlbW92ZVByb3BlcnR5KFwid2lkdGhcIik7XG4gICAgICAgIHRoaXMubW9kYWxFbC5zdHlsZS5yZW1vdmVQcm9wZXJ0eShcIm1heC13aWR0aFwiKTtcbiAgICAgICAgdGhpcy5tb2RhbEVsLnN0eWxlLnJlbW92ZVByb3BlcnR5KFwibWF4LWhlaWdodFwiKTtcbiAgICAgICAgdGhpcy5jb250ZW50RWwuZW1wdHkoKTtcbiAgICB9XG5cbiAgICAvLyBcdTI1MDBcdTI1MDAgbGlzdCBvcHMgXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXG4gICAgcHJpdmF0ZSBhZGRWYWx1ZShyYXc6IHN0cmluZykge1xuICAgICAgICAvLyBJZiB0aGUgdHlwZWQgc3RyaW5nIG1hdGNoZXMgYSBrbm93biBjYW5kaWRhdGVcdTIwMTlzIGxhYmVsIFx1MjE5MiBzdG9yZSBpdHMgd2lraWxpbmsuXG4gICAgICAgIGNvbnN0IG1hdGNoID0gdGhpcy5tYXRjaENhbmRpZGF0ZUJ5TGFiZWwodGhpcy5sYWJlbEZvcihyYXcpKTtcbiAgICAgICAgY29uc3QgdiA9IG1hdGNoID8/IHJhdztcblxuICAgICAgICBpZiAodGhpcy52YWx1ZXMuc29tZSh4ID0+IHRoaXMua2V5Rm9yKHgpID09PSB0aGlzLmtleUZvcih2KSkpIHJldHVybjtcblxuICAgICAgICB0aGlzLnZhbHVlcy5wdXNoKHYpO1xuICAgICAgICB0aGlzLnZhbHVlcy5zb3J0KChhLCBiKSA9PiB0aGlzLmxhYmVsRm9yKGEpLmxvY2FsZUNvbXBhcmUodGhpcy5sYWJlbEZvcihiKSkpO1xuICAgICAgICB0aGlzLnBhaW50TGlzdCgpO1xuICAgICAgICB0aGlzLmlucHV0RWwudmFsdWUgPSBcIlwiO1xuICAgICAgICB0aGlzLmhpZGVTdWdnZXN0aW9ucygpO1xuICAgICAgICB0aGlzLmlucHV0RWwuZm9jdXMoKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHJlbW92ZVZhbHVlKHY6IHN0cmluZykge1xuICAgICAgICB0aGlzLnZhbHVlcyA9IHRoaXMudmFsdWVzLmZpbHRlcih4ID0+IHggIT09IHYpO1xuICAgICAgICB0aGlzLnBhaW50TGlzdCgpO1xuICAgIH1cblxuICAgIHByaXZhdGUgcGFpbnRMaXN0KCkge1xuICAgICAgICB0aGlzLmxpc3RXcmFwLmVtcHR5KCk7XG4gICAgICAgIGlmICghdGhpcy52YWx1ZXMubGVuZ3RoKSB7XG4gICAgICAgICAgICB0aGlzLmxpc3RXcmFwLmNyZWF0ZURpdih7IGNsczogXCJ2di1saXN0LWVtcHR5XCIsIHRleHQ6IFwiTm90aGluZyBhZGRlZCB5ZXQuXCIgfSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgdWwgPSB0aGlzLmxpc3RXcmFwLmNyZWF0ZUVsKFwidWxcIiwgeyBjbHM6IFwidnYtbGlzdFwiIH0pO1xuICAgICAgICBmb3IgKGNvbnN0IHYgb2YgdGhpcy52YWx1ZXMpIHtcbiAgICAgICAgICAgIGNvbnN0IGxpID0gdWwuY3JlYXRlRWwoXCJsaVwiLCB7IGNsczogXCJ2di1saVwiIH0pO1xuICAgICAgICAgICAgY29uc3Qgcm0gPSBsaS5jcmVhdGVFbChcImJ1dHRvblwiLCB7XG4gICAgICAgICAgICAgICAgY2xzOiBcInZ2LWxpLXhcIixcbiAgICAgICAgICAgICAgICB0ZXh0OiBcIlx1MDBEN1wiLFxuICAgICAgICAgICAgICAgIGF0dHI6IHsgXCJhcmlhLWxhYmVsXCI6IGBSZW1vdmUgJHt2fWAgfSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcm0uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHRoaXMucmVtb3ZlVmFsdWUodikpO1xuXG4gICAgICAgICAgICAvLyBTaG93IHBsYWluIHRleHQ7IGlmIGl0IGlzIGEgbGluaywgT2JzaWRpYW4gd2lsbCBzdGlsbCByZXNvbHZlIGl0XG4gICAgICAgICAgICBsaS5jcmVhdGVTcGFuKHsgY2xzOiBcInZ2LWxpLXRleHRcIiwgdGV4dDogU3RyaW5nKHYpLnJlcGxhY2UoL15cXFtcXFt8XFxdXFxdJC9nLCBcIlwiKSB9KTtcbiAgICAgICAgfVxuICAgIH1cblxuXG4gICAgLy8gXHUyNTAwXHUyNTAwIHN1Z2dlc3Rpb25zIFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFxuICAgIHByaXZhdGUgc2hvd1N1Z2dlc3Rpb25zKHE6IHN0cmluZykge1xuICAgICAgICBjb25zdCBuZWVkbGUgPSBxLnRyaW0oKS50b0xvd2VyQ2FzZSgpO1xuICAgICAgICBpZiAoIW5lZWRsZSkgcmV0dXJuIHRoaXMuaGlkZVN1Z2dlc3Rpb25zKCk7XG5cbiAgICAgICAgdGhpcy5maWx0ZXJlZCA9IHRoaXMuY2FuZGlkYXRlc1xuICAgICAgICAgICAgLmZpbHRlcihjID0+IGMudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhuZWVkbGUpICYmICF0aGlzLnZhbHVlcy5pbmNsdWRlcyhjKSlcbiAgICAgICAgICAgIC5zbGljZSgwLCA1MCk7XG5cbiAgICAgICAgdGhpcy5zdWdnZXN0V3JhcC5lbXB0eSgpO1xuICAgICAgICBpZiAoIXRoaXMuZmlsdGVyZWQubGVuZ3RoKSByZXR1cm4gdGhpcy5oaWRlU3VnZ2VzdGlvbnMoKTtcblxuICAgICAgICAvLyAtLS0gQ29tcHV0ZSBhdmFpbGFibGUgc3BhY2Ugd2l0aGluIHRoZSBtb2RhbCAtLS1cbiAgICAgICAgY29uc3QgbW9kYWxSZWN0ID0gdGhpcy5tb2RhbEVsLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgICBjb25zdCB3cmFwUmVjdCA9IHRoaXMuaW5wdXRXcmFwLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgICBjb25zdCBQQUQgPSAxMjsgLy8gbGl0dGxlIGJyZWF0aGluZyByb29tIGZyb20gZWRnZXNcblxuICAgICAgICBjb25zdCBzcGFjZUJlbG93ID0gTWF0aC5mbG9vcihtb2RhbFJlY3QuYm90dG9tIC0gd3JhcFJlY3QuYm90dG9tIC0gUEFEKTtcbiAgICAgICAgY29uc3Qgc3BhY2VBYm92ZSA9IE1hdGguZmxvb3Iod3JhcFJlY3QudG9wIC0gbW9kYWxSZWN0LnRvcCAtIFBBRCk7XG5cbiAgICAgICAgLy8gcHJlZmVyIGRvd24sIGJ1dCBmbGlwIGlmIGJlbG93IGlzIHRpZ2h0IGFuZCBhYm92ZSBpcyBiZXR0ZXJcbiAgICAgICAgY29uc3QgZHJvcFVwID0gc3BhY2VCZWxvdyA8IDIyMCAmJiBzcGFjZUFib3ZlID4gc3BhY2VCZWxvdztcblxuICAgICAgICAvLyBjYXAgdG8gd2hhdFx1MjAxOXMgYXZhaWxhYmxlIGluc2lkZSB0aGUgbW9kYWw7IGtlZXAgc2FuZSBtaW4vbWF4XG4gICAgICAgIGNvbnN0IGF2YWlsYWJsZSA9IGRyb3BVcCA/IHNwYWNlQWJvdmUgOiBzcGFjZUJlbG93O1xuICAgICAgICBjb25zdCBtYXhIID0gTWF0aC5tYXgoMTQwLCBNYXRoLm1pbigzNjAsIGF2YWlsYWJsZSkpO1xuXG4gICAgICAgIHRoaXMuc3VnZ2VzdFdyYXAuY2xhc3NMaXN0LnRvZ2dsZShcImRyb3AtdXBcIiwgZHJvcFVwKTtcbiAgICAgICAgdGhpcy5zdWdnZXN0V3JhcC5zdHlsZS5tYXhIZWlnaHQgPSBgJHttYXhIfXB4YDtcbiAgICAgICAgdGhpcy5zdWdnZXN0V3JhcC5zZXRBdHRyKFwiYXJpYS1oaWRkZW5cIiwgXCJmYWxzZVwiKTtcbiAgICAgICAgdGhpcy5zdWdnZXN0V3JhcC5hZGRDbGFzcyhcImlzLW9wZW5cIik7XG5cbiAgICAgICAgdGhpcy5maWx0ZXJlZC5mb3JFYWNoKChvcHQsIGkpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGxpID0gdGhpcy5zdWdnZXN0V3JhcC5jcmVhdGVEaXYoe1xuICAgICAgICAgICAgICAgIGNsczogXCJ2di1zdWdnZXN0LWl0ZW1cIixcbiAgICAgICAgICAgICAgICB0ZXh0OiBvcHQucmVwbGFjZSgvXlxcW1xcW3xcXF1cXF0kL2csIFwiXCIpXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGxpLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWVudGVyXCIsICgpID0+IHRoaXMuc2V0SG92ZXIoaSkpO1xuICAgICAgICAgICAgbGkuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlbGVhdmVcIiwgKCkgPT4gdGhpcy5zZXRIb3ZlcigtMSkpO1xuICAgICAgICAgICAgbGkuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCAoZSkgPT4geyBlLnByZXZlbnREZWZhdWx0KCk7IHRoaXMuYWRkVmFsdWUob3B0KTsgfSk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHByaXZhdGUgaGlkZVN1Z2dlc3Rpb25zKCkge1xuICAgICAgICB0aGlzLnN1Z2dlc3RXcmFwLmVtcHR5KCk7XG4gICAgICAgIHRoaXMuc3VnZ2VzdFdyYXAuc2V0QXR0cihcImFyaWEtaGlkZGVuXCIsIFwidHJ1ZVwiKTtcbiAgICAgICAgdGhpcy5zdWdnZXN0V3JhcC50b2dnbGVDbGFzcyhcImlzLW9wZW5cIiwgZmFsc2UpO1xuICAgICAgICB0aGlzLnN1Z2dlc3RXcmFwLmNsYXNzTGlzdC5yZW1vdmUoXCJkcm9wLXVwXCIpO1xuICAgICAgICB0aGlzLnN1Z2dlc3RXcmFwLnN0eWxlLm1heEhlaWdodCA9IFwiXCI7ICAgICAvLyBcdTIxOTAgcmVzZXRcbiAgICAgICAgdGhpcy5maWx0ZXJlZCA9IFtdO1xuICAgICAgICB0aGlzLmhvdmVySW5kZXggPSAtMTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHNldEhvdmVyKGk6IG51bWJlcikge1xuICAgICAgICB0aGlzLmhvdmVySW5kZXggPSBpO1xuICAgICAgICBjb25zdCBraWRzID0gQXJyYXkuZnJvbSh0aGlzLnN1Z2dlc3RXcmFwLmNoaWxkcmVuKSBhcyBIVE1MRWxlbWVudFtdO1xuICAgICAgICBraWRzLmZvckVhY2goKGVsLCBpZHgpID0+IGVsLnRvZ2dsZUNsYXNzKFwiaXMtaG92ZXJcIiwgaWR4ID09PSBpKSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBtb3ZlSG92ZXIoZGVsdGE6IG51bWJlcikge1xuICAgICAgICBpZiAoIXRoaXMuZmlsdGVyZWQubGVuZ3RoKSByZXR1cm47XG4gICAgICAgIHRoaXMuaG92ZXJJbmRleCA9ICh0aGlzLmhvdmVySW5kZXggKyBkZWx0YSArIHRoaXMuZmlsdGVyZWQubGVuZ3RoKSAlIHRoaXMuZmlsdGVyZWQubGVuZ3RoO1xuICAgICAgICB0aGlzLnNldEhvdmVyKHRoaXMuaG92ZXJJbmRleCk7XG4gICAgfVxufVxuXG5cbmV4cG9ydCBjbGFzcyBHYW1lcGxheVNpZGViYXJWaWV3IGV4dGVuZHMgSXRlbVZpZXcge1xuICAgIHByaXZhdGUgZm9sZGVyUm93ITogSFRNTERpdkVsZW1lbnQ7XG4gICAgcHJpdmF0ZSBhZGRSb3chOiBIVE1MRGl2RWxlbWVudDtcbiAgICBwcml2YXRlIHBhcnR5VGFibGVXcmFwOiBIVE1MRGl2RWxlbWVudCB8IG51bGwgPSBudWxsO1xuICAgIHByaXZhdGUgZGV0YWlsc1dyYXA6IEhUTUxEaXZFbGVtZW50IHwgbnVsbCA9IG51bGw7XG4gICAgcHJpdmF0ZSBkZXRhaWxzT3BlblBhdGg6IHN0cmluZyB8IG51bGwgPSBudWxsO1xuICAgIHByaXZhdGUgc2hvcGtlZXBlclBhbmVsPzogU2hvcGtlZXBlclBhbmVsO1xuXG4gICAgY29uc3RydWN0b3IobGVhZjogV29ya3NwYWNlTGVhZikgeyBzdXBlcihsZWFmKTsgfVxuICAgIGdldFZpZXdUeXBlKCkgeyByZXR1cm4gR0FNRVBMQVlfVklFV19UWVBFOyB9XG4gICAgZ2V0RGlzcGxheVRleHQoKSB7IHJldHVybiBcIkdhbWVwbGF5XCI7IH1cbiAgICBnZXRJY29uKCkgeyByZXR1cm4gXCJnYW1lcGxheVwiOyB9XG4gICAgcHJpdmF0ZSBhc3luYyBzYXZlRnJvbnRtYXR0ZXJOdW1iZXIoZmlsZTogVEZpbGUsIGtleTogc3RyaW5nLCB2YWx1ZTogbnVtYmVyKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGNvbnN0IHJhdyA9IGF3YWl0IHRoaXMuYXBwLnZhdWx0LnJlYWQoZmlsZSk7XG4gICAgICAgIC8vIGRldGVjdCBZQU1MIGZyb250bWF0dGVyXG4gICAgICAgIGNvbnN0IGZtTWF0Y2ggPSByYXcubWF0Y2goL14tLS1cXHI/XFxuKFtcXHNcXFNdKj8pXFxyP1xcbi0tLVxccj9cXG4/Lyk7XG4gICAgICAgIGlmICghZm1NYXRjaCkge1xuICAgICAgICAgICAgLy8gbm8gZnJvbnRtYXR0ZXIgXHUyMTkyIGNyZWF0ZSBvbmVcbiAgICAgICAgICAgIGNvbnN0IHlhbWwgPSBgLS0tXFxuJHtrZXl9OiAke3ZhbHVlfVxcbi0tLVxcbmA7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLmFwcC52YXVsdC5tb2RpZnkoZmlsZSwgeWFtbCArIHJhdyk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBmdWxsID0gZm1NYXRjaFswXTtcbiAgICAgICAgY29uc3QgYm9keSA9IGZtTWF0Y2hbMV07XG5cbiAgICAgICAgY29uc3QgaGFzS2V5ID0gbmV3IFJlZ0V4cChgXiR7a2V5fVxcXFxzKjpgLCBcIm1pXCIpLnRlc3QoYm9keSk7XG4gICAgICAgIGxldCBuZXdCb2R5OiBzdHJpbmc7XG5cbiAgICAgICAgaWYgKGhhc0tleSkge1xuICAgICAgICAgICAgLy8gcmVwbGFjZSBleGlzdGluZyBsaW5lXG4gICAgICAgICAgICBuZXdCb2R5ID0gYm9keS5yZXBsYWNlKG5ldyBSZWdFeHAoYF4ke2tleX1cXFxccyo6XFxcXHMqLiokYCwgXCJtaVwiKSwgYCR7a2V5fTogJHt2YWx1ZX1gKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIGluc2VydCBuZXcgbGluZSBhdCBlbmQgb2YgRk0gYm9keVxuICAgICAgICAgICAgbmV3Qm9keSA9IGJvZHkucmVwbGFjZSgvXFxzKiQvLCBgXFxuJHtrZXl9OiAke3ZhbHVlfVxcbmApO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgdXBkYXRlZCA9IHJhdy5yZXBsYWNlKGZ1bGwsIGAtLS1cXG4ke25ld0JvZHkucmVwbGFjZSgvXFxyP1xcbiQvLCBcIlwiKX1cXG4tLS1cXG5gKTtcbiAgICAgICAgYXdhaXQgdGhpcy5hcHAudmF1bHQubW9kaWZ5KGZpbGUsIHVwZGF0ZWQpO1xuICAgIH1cblxuXG4gICAgcHJpdmF0ZSBjb2xsZWN0Q2FuZGlkYXRlcyhmb2xkZXI6IHN0cmluZywgYXNXaWtpbGlua3MgPSB0cnVlKTogc3RyaW5nW10ge1xuICAgICAgICBjb25zdCByb290ID0gZm9sZGVyLnJlcGxhY2UoL1xcLyskLywgXCJcIikgKyBcIi9cIjtcbiAgICAgICAgcmV0dXJuIHRoaXMuYXBwLnZhdWx0XG4gICAgICAgICAgICAuZ2V0TWFya2Rvd25GaWxlcygpXG4gICAgICAgICAgICAuZmlsdGVyKGYgPT4gZi5wYXRoLnN0YXJ0c1dpdGgocm9vdCkpXG4gICAgICAgICAgICAubWFwKGYgPT4gKGFzV2lraWxpbmtzID8gYFtbJHtmLmJhc2VuYW1lfV1dYCA6IGYuYmFzZW5hbWUpKTtcbiAgICB9XG5cbiAgICAvLyBNZXJnZSBjYW5kaWRhdGVzIGZyb20gbXVsdGlwbGUgZm9sZGVycywgZGUtZHVwZSwgc29ydFxuICAgIHByaXZhdGUgY29sbGVjdEZyb21Gb2xkZXJzKGZvbGRlcnM6IHN0cmluZ1tdLCBhc1dpa2lsaW5rcyA9IHRydWUpOiBzdHJpbmdbXSB7XG4gICAgICAgIHJldHVybiBBcnJheS5mcm9tKFxuICAgICAgICAgICAgbmV3IFNldChmb2xkZXJzLmZsYXRNYXAoZiA9PiB0aGlzLmNvbGxlY3RDYW5kaWRhdGVzKGYsIGFzV2lraWxpbmtzKSkpXG4gICAgICAgICkuc29ydCgoYSwgYikgPT4gYS5sb2NhbGVDb21wYXJlKGIpKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHJlZnJlc2hEZXRhaWxQbGFjZWhvbGRlcigpIHtcbiAgICAgICAgY29uc3Qgd3JhcCA9IHRoaXMuZGV0YWlsc1dyYXAhO1xuICAgICAgICBjb25zdCBoYXNDYXJkID0gISF3cmFwLnF1ZXJ5U2VsZWN0b3IoXCIudnYtZ3AtY2FyZFwiKTtcbiAgICAgICAgY29uc3QgZW1wdHkgPSB3cmFwLnF1ZXJ5U2VsZWN0b3IoXCIudnYtZ3AtZGV0YWlsLWVtcHR5XCIpO1xuICAgICAgICBpZiAoaGFzQ2FyZCAmJiBlbXB0eSkgZW1wdHkucmVtb3ZlKCk7XG4gICAgICAgIGlmICghaGFzQ2FyZCAmJiAhZW1wdHkpIHtcbiAgICAgICAgICAgIHdyYXAuY3JlYXRlRGl2KHsgY2xzOiBcInZ2LWdwLWRldGFpbC1lbXB0eVwiLCB0ZXh0OiBcIkNsaWNrIGEgbmFtZSB0byBzZWUgZGV0YWlsc1x1MjAyNlwiIH0pO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBnZXRBY3RpdmVGb2xkZXJQcmVmaXgoKTogc3RyaW5nIHtcbiAgICAgICAgY29uc3QgcGx1Z2luID0gZ2V0VG9vbGtpdCh0aGlzLmFwcCk7XG4gICAgICAgIGNvbnN0IHMgPSBwbHVnaW4/LnNldHRpbmdzPy5nYW1lcGxheSB8fCB7fTtcbiAgICAgICAgcmV0dXJuICgocy5hY3RpdmVGb2xkZXIgfHwgXCJXb3JsZC9QZW9wbGUvUGxheWVyIENoYXJhY3RlcnMvQWN0aXZlXCIpLnJlcGxhY2UoL1xcLyskLywgXCJcIikpICsgXCIvXCI7XG4gICAgfVxuICAgIHByaXZhdGUgdGFibGVSZWZyZXNoVGltZXI6IG51bWJlciB8IG51bGwgPSBudWxsO1xuXG4gICAgcHJpdmF0ZSBxdWV1ZVRhYmxlID0gKCkgPT4ge1xuICAgICAgICBpZiAodGhpcy50YWJsZVJlZnJlc2hUaW1lcikgd2luZG93LmNsZWFyVGltZW91dCh0aGlzLnRhYmxlUmVmcmVzaFRpbWVyKTtcbiAgICAgICAgdGhpcy50YWJsZVJlZnJlc2hUaW1lciA9IHdpbmRvdy5zZXRUaW1lb3V0KGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMudGFibGVSZWZyZXNoVGltZXIgPSBudWxsO1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5yZW5kZXJUYWJsZSgpO1xuICAgICAgICB9LCAxMjApOyAvLyBzbWFsbCBkZWJvdW5jZVxuICAgIH07XG5cbiAgICBwcml2YXRlIGRldGFpbFJlZnJlc2hUaW1lcjogbnVtYmVyIHwgbnVsbCA9IG51bGw7XG4gICAgcHJpdmF0ZSBxdWV1ZURldGFpbCA9ICgpID0+IHtcbiAgICAgICAgaWYgKHRoaXMuZGV0YWlsUmVmcmVzaFRpbWVyKSB3aW5kb3cuY2xlYXJUaW1lb3V0KHRoaXMuZGV0YWlsUmVmcmVzaFRpbWVyKTtcbiAgICAgICAgdGhpcy5kZXRhaWxSZWZyZXNoVGltZXIgPSB3aW5kb3cuc2V0VGltZW91dChhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmRldGFpbFJlZnJlc2hUaW1lciA9IG51bGw7XG4gICAgICAgICAgICBjb25zdCBwID0gdGhpcy5kZXRhaWxzT3BlblBhdGg7XG4gICAgICAgICAgICBpZiAoIXApIHJldHVybjtcbiAgICAgICAgICAgIGNvbnN0IGYgPSB0aGlzLmFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgocCk7XG4gICAgICAgICAgICBpZiAoZiBpbnN0YW5jZW9mIFRGaWxlKSBhd2FpdCB0aGlzLnNob3dEZXRhaWxzKGYpO1xuICAgICAgICB9LCAxMjApO1xuICAgIH07XG5cbiAgICBwcml2YXRlIGlzU2VsZWN0ZWRQYXRoID0gKHBhdGg6IHN0cmluZyk6IGJvb2xlYW4gPT4ge1xuICAgICAgICBjb25zdCBwbHVnaW4gPSBnZXRUb29sa2l0KHRoaXMuYXBwKTtcbiAgICAgICAgY29uc3QgcyA9IHBsdWdpbj8uc2V0dGluZ3M/LmdhbWVwbGF5IHx8IHt9O1xuICAgICAgICBjb25zdCBsaXN0OiBzdHJpbmdbXSA9IHMuc2VsZWN0ZWRQbGF5ZXJzIHx8IFtdO1xuICAgICAgICByZXR1cm4gbGlzdC5pbmNsdWRlcyhwYXRoKTtcbiAgICB9O1xuXG4gICAgcHJpdmF0ZSBlbnN1cmVHYW1lcGxheSgpIHtcbiAgICAgICAgY29uc3QgcGx1Z2luID0gZ2V0VG9vbGtpdCh0aGlzLmFwcCk7XG4gICAgICAgIGlmICghcGx1Z2luLnNldHRpbmdzLmdhbWVwbGF5KSB7XG4gICAgICAgICAgICBwbHVnaW4uc2V0dGluZ3MuZ2FtZXBsYXkgPSB7IHNlbGVjdGVkUGxheWVyczogW10sIGFjdGl2ZUZvbGRlcjogXCJXb3JsZC9QZW9wbGUvUGxheWVyIENoYXJhY3RlcnMvQWN0aXZlXCIgfTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcGx1Z2luLnNldHRpbmdzLmdhbWVwbGF5IGFzIHsgc2VsZWN0ZWRQbGF5ZXJzOiBzdHJpbmdbXTsgYWN0aXZlRm9sZGVyOiBzdHJpbmcgfTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGFzeW5jIHNob3dEZXRhaWxzKGZpbGU6IFRGaWxlKSB7XG4gICAgICAgIHRoaXMuZGV0YWlsc09wZW5QYXRoID0gZmlsZS5wYXRoO1xuXG4gICAgICAgIGNvbnN0IHdyYXAgPSB0aGlzLmRldGFpbHNXcmFwITtcblxuICAgICAgICB7XG4gICAgICAgICAgICBjb25zdCBjYXJkcyA9IEFycmF5LmZyb20od3JhcC5xdWVyeVNlbGVjdG9yQWxsPEhUTUxFbGVtZW50PihcIi52di1ncC1jYXJkXCIpKTtcbiAgICAgICAgICAgIGNvbnN0IHBpbm5lZEZvclBhdGggPSBjYXJkcy5maW5kKGVsID0+IGVsLmRhdGFzZXQucGlubmVkID09PSBcInRydWVcIiAmJiBlbC5kYXRhc2V0LnBhdGggPT09IGZpbGUucGF0aCk7XG4gICAgICAgICAgICBpZiAocGlubmVkRm9yUGF0aCkge1xuICAgICAgICAgICAgICAgIHRoaXMucmVmcmVzaERldGFpbFBsYWNlaG9sZGVyKCk7XG4gICAgICAgICAgICAgICAgcGlubmVkRm9yUGF0aC5zY3JvbGxJbnRvVmlldyh7IGJsb2NrOiBcIm5lYXJlc3RcIiwgYmVoYXZpb3I6IFwic21vb3RoXCIgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHtcbiAgICAgICAgICAgIGNvbnN0IGV4aXN0aW5nVW5waW5uZWQgPSB3cmFwLnF1ZXJ5U2VsZWN0b3I8SFRNTEVsZW1lbnQ+KCcudnYtZ3AtY2FyZFtkYXRhLXBpbm5lZD1cImZhbHNlXCJdJyk7XG4gICAgICAgICAgICBpZiAoZXhpc3RpbmdVbnBpbm5lZCkgZXhpc3RpbmdVbnBpbm5lZC5yZW1vdmUoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGNhcmQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICBjYXJkLmFkZENsYXNzKFwidnYtZ3AtY2FyZFwiKTtcbiAgICAgICAgY2FyZC5kYXRhc2V0LnBpbm5lZCA9IFwiZmFsc2VcIjtcbiAgICAgICAgY2FyZC5kYXRhc2V0LnBhdGggPSBmaWxlLnBhdGg7XG5cbiAgICAgICAgY29uc3QgcGxhY2VDYXJkID0gKGM6IEhUTUxFbGVtZW50KSA9PiB7XG4gICAgICAgICAgICBjb25zdCBraWRzID0gQXJyYXkuZnJvbSh3cmFwLmNoaWxkcmVuKSBhcyBIVE1MRWxlbWVudFtdO1xuICAgICAgICAgICAgY29uc3QgY2FyZHMgPSBraWRzLmZpbHRlcihlbCA9PiBlbC5jbGFzc0xpc3QuY29udGFpbnMoXCJ2di1ncC1jYXJkXCIpKTtcbiAgICAgICAgICAgIGNvbnN0IHBpbm5lZCA9IGNhcmRzLmZpbHRlcihlbCA9PiBlbC5kYXRhc2V0LnBpbm5lZCA9PT0gXCJ0cnVlXCIpO1xuXG4gICAgICAgICAgICBpZiAocGlubmVkLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGFmdGVyID0gcGlubmVkW3Bpbm5lZC5sZW5ndGggLSAxXTtcbiAgICAgICAgICAgICAgICB3cmFwLmluc2VydEJlZm9yZShjLCBhZnRlci5uZXh0U2libGluZyk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHdyYXAuaW5zZXJ0QmVmb3JlKGMsIHdyYXAuZmlyc3RDaGlsZCk7IC8vIG5ld2VzdC1maXJzdCBhdCB0b3Agb2Ygc3RhY2tcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgY29uc3QgcmVwb3NpdGlvbiA9IChjOiBIVE1MRWxlbWVudCkgPT4ge1xuICAgICAgICAgICAgaWYgKGMucGFyZW50RWxlbWVudCA9PT0gd3JhcCkgd3JhcC5yZW1vdmVDaGlsZChjKTtcbiAgICAgICAgICAgIHBsYWNlQ2FyZChjKTtcbiAgICAgICAgfTtcblxuICAgICAgICBwbGFjZUNhcmQoY2FyZCk7XG4gICAgICAgIHRoaXMucmVmcmVzaERldGFpbFBsYWNlaG9sZGVyKCk7XG5cbiAgICAgICAgLy8gXHUyNTAwXHUyNTAwIGNvbnRyb2xzXG4gICAgICAgIGNvbnN0IGNvbnRyb2xzID0gY2FyZC5jcmVhdGVEaXYoeyBjbHM6IFwidnYtZ3AtZGV0YWlsLWNvbnRyb2xzXCIgfSk7XG5cbiAgICAgICAgY29uc3QgcGluQnRuID0gY29udHJvbHMuY3JlYXRlRWwoXCJidXR0b25cIiwgeyB0ZXh0OiBcInBpblwiLCBjbHM6IFwidnYtZ3AtYnRuXCIgfSk7XG4gICAgICAgIHBpbkJ0bi50aXRsZSA9IFwiUGluIGNhcmRcIjtcbiAgICAgICAgcGluQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBwaW5uZWQgPSBjYXJkLmRhdGFzZXQucGlubmVkID09PSBcInRydWVcIjtcbiAgICAgICAgICAgIGNhcmQuZGF0YXNldC5waW5uZWQgPSAoIXBpbm5lZCkudG9TdHJpbmcoKTtcbiAgICAgICAgICAgIHBpbkJ0bi50ZXh0Q29udGVudCA9ICFwaW5uZWQgPyBcInVucGluXCIgOiBcInBpblwiO1xuICAgICAgICAgICAgcGluQnRuLnRpdGxlID0gIXBpbm5lZCA/IFwiVW5waW4gY2FyZFwiIDogXCJQaW4gY2FyZFwiO1xuICAgICAgICAgICAgcmVwb3NpdGlvbihjYXJkKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgY29uc3QgY2xvc2VCdG4gPSBjb250cm9scy5jcmVhdGVFbChcImJ1dHRvblwiLCB7IHRleHQ6IFwiXHUyNzE1XCIsIGNsczogXCJ2di1ncC1idG5cIiB9KTtcbiAgICAgICAgY2xvc2VCdG4udGl0bGUgPSBcIkNsb3NlIGNhcmRcIjtcbiAgICAgICAgY2xvc2VCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgICAgICAgIGNhcmQucmVtb3ZlKCk7XG4gICAgICAgICAgICB0aGlzLnJlZnJlc2hEZXRhaWxQbGFjZWhvbGRlcigpO1xuICAgICAgICB9KTtcblxuICAgICAgICAvLyByZW5kZXIgSU5UTyB0aGUgY2FyZFxuICAgICAgICBjb25zdCBib3ggPSBjYXJkO1xuXG5cbiAgICAgICAgY29uc3QgZm0gPSB0aGlzLmFwcC5tZXRhZGF0YUNhY2hlLmdldEZpbGVDYWNoZShmaWxlKT8uZnJvbnRtYXR0ZXIgfHwge307XG4gICAgICAgIGNvbnN0IG5hbWUgPSAoZm1bXCJOYW1lXCJdID8/IGZpbGUuYmFzZW5hbWUpIGFzIHN0cmluZztcblxuICAgICAgICBjb25zdCBoZWFkZXIgPSBib3guY3JlYXRlRGl2KHsgY2xzOiBcInZ2LWdwLWRldGFpbC1oZWFkZXJcIiB9KTtcbiAgICAgICAgY29uc3QgdGl0bGVFbCA9IGhlYWRlci5jcmVhdGVFbChcImgyXCIsIHsgdGV4dDogbmFtZSB9KTtcbiAgICAgICAgdGl0bGVFbC5jbGFzc0xpc3QuYWRkKFwidnYtZ3AtZGV0YWlsLXRpdGxlXCIpO1xuXG4gICAgICAgIC8vIGhlbHBlcnNcbiAgICAgICAgY29uc3QgbGlua1RvID0gKHRhcmdldDogc3RyaW5nLCBsYWJlbD86IHN0cmluZykgPT4ge1xuICAgICAgICAgICAgY29uc3QgZGVzdCA9IHRoaXMuYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0Rmlyc3RMaW5rcGF0aERlc3QodGFyZ2V0LCBmaWxlLnBhdGgpO1xuICAgICAgICAgICAgY29uc3QgdGV4dCA9IChsYWJlbCA/PyB0YXJnZXQuc3BsaXQoXCIvXCIpLnBvcCgpIS5yZXBsYWNlKC9cXC5tZCQvLCBcIlwiKSkudHJpbSgpO1xuXG4gICAgICAgICAgICBjb25zdCBwbHVnaW4gPSBnZXRUb29sa2l0KHRoaXMuYXBwKTtcbiAgICAgICAgICAgIGNvbnN0IGVuYWJsZVByZXZpZXcgPSAhIXBsdWdpbj8uc2V0dGluZ3M/LmVuYWJsZVNpZGViYXJQcmV2aWV3cztcblxuICAgICAgICAgICAgcmV0dXJuIGRlc3RcbiAgICAgICAgICAgICAgICA/IGA8YSBjbGFzcz1cInZ2LWxpbmske2VuYWJsZVByZXZpZXcgPyBcIiBpbnRlcm5hbC1saW5rXCIgOiBcIlwifVwiIGhyZWY9XCIke2Rlc3QucGF0aH1cIiR7ZW5hYmxlUHJldmlldyA/IGAgZGF0YS1ocmVmPVwiJHtkZXN0LnBhdGh9XCJgIDogXCJcIn0+JHt0ZXh0fTwvYT5gXG4gICAgICAgICAgICAgICAgOiB0ZXh0O1xuICAgICAgICB9O1xuXG5cbiAgICAgICAgY29uc3QgcGFyc2VNYXliZUxpbmsgPSAodmFsOiB1bmtub3duKTogc3RyaW5nID0+IHtcbiAgICAgICAgICAgIC8vIHN1cHBvcnRzICdbW1BhdGh8TGFiZWxdXScsICdbW1BhdGhdXScsIHBsYWluIHN0cmluZywgb3IgZHYtbGlrZSB7cGF0aDogXCIuLi5cIn1cbiAgICAgICAgICAgIGlmICghdmFsKSByZXR1cm4gXCJOL0FcIjtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgdmFsID09PSBcIm9iamVjdFwiICYmICh2YWwgYXMgYW55KS5wYXRoKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcCA9IFN0cmluZygodmFsIGFzIGFueSkucGF0aCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGxpbmtUbyhwKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHMgPSBTdHJpbmcodmFsKTtcbiAgICAgICAgICAgIGNvbnN0IG0gPSBzLm1hdGNoKC9cXFtcXFsoW158XFxdXSspKD86XFx8KFteXFxdXSspKT9cXF1cXF0vKTtcbiAgICAgICAgICAgIGlmIChtKSByZXR1cm4gbGlua1RvKG1bMV0sIG1bMl0pO1xuICAgICAgICAgICAgcmV0dXJuIHM7XG4gICAgICAgIH07XG5cbiAgICAgICAgY29uc3QgYXJyVG9MaXN0ID0gKHY6IHVua25vd24pOiBzdHJpbmdbXSA9PiB7XG4gICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheSh2KSkgcmV0dXJuIHYubWFwKCh4KSA9PiBTdHJpbmcoeCkpO1xuICAgICAgICAgICAgaWYgKHR5cGVvZiB2ID09PSBcInN0cmluZ1wiKSByZXR1cm4gdi5zcGxpdChcIixcIikubWFwKCh4KSA9PiB4LnRyaW0oKSkuZmlsdGVyKEJvb2xlYW4pO1xuICAgICAgICAgICAgcmV0dXJuIFtdO1xuICAgICAgICB9O1xuXG4gICAgICAgIC8vIHNwZWNpZXMvY2xhc3Mvc3ViY2xhc3NcbiAgICAgICAgY29uc3Qgc3BlY2llcyA9IHBhcnNlTWF5YmVMaW5rKGZtW1wic3BlY2llc1wiXSk7XG4gICAgICAgIGNvbnN0IHJhY2UgPSBwYXJzZU1heWJlTGluayhmbVtcInJhY2VcIl0pO1xuICAgICAgICBjb25zdCBrbGFzcyA9IHBhcnNlTWF5YmVMaW5rKGZtW1wiY2xhc3NcIl0pO1xuICAgICAgICBjb25zdCBzdWJjbGFzcyA9IHBhcnNlTWF5YmVMaW5rKGZtW1wic3ViY2xhc3NcIl0pO1xuXG4gICAgICAgIC8vIHByb2ZpY2llbmNpZXMgKHZlcnRpY2FsIGxpc3QsIGNlbnRlcmVkLCBhYmJyZXZpYXRlZClcbiAgICAgICAgY29uc3Qgc2tpbGxQcm9mcyA9IGFyclRvTGlzdChmbVtcInNraWxsc1wiXSk7IC8vIGtlZXAgZnVsbCBuYW1lc1xuICAgICAgICBjb25zdCBzdFByb2ZzID0gYXJyVG9MaXN0KGZtW1wic2F2aW5nX3Rocm93c1wiXSlcbiAgICAgICAgICAgIC5tYXAocyA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3Qga2V5ID0gcy50b0xvd2VyQ2FzZSgpLnRyaW0oKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gQUJJTElUWV9BQkJSW2tleV0gPz8gczsgLy8gYWJicmV2aWF0ZSBpZiBpdCBtYXRjaGVzIGFiaWxpdHlcbiAgICAgICAgICAgIH0pO1xuXG5cbiAgICAgICAgY29uc3Qgam9pbkNvbW1hID0gKGl0ZW1zOiBzdHJpbmdbXSk6IHN0cmluZyA9PiB7XG4gICAgICAgICAgICBjb25zdCB4cyA9IGl0ZW1zLmZpbHRlcihCb29sZWFuKTtcbiAgICAgICAgICAgIHJldHVybiB4cy5sZW5ndGggPyB4cy5qb2luKFwiLCBcIikgOiBcIlx1MjAxNFwiO1xuICAgICAgICB9O1xuXG4gICAgICAgIGNvbnN0IHByb2ZzSHRtbCA9IGpvaW5Db21tYShza2lsbFByb2ZzKTtcbiAgICAgICAgY29uc3Qgc3RIdG1sID0gam9pbkNvbW1hKHN0UHJvZnMpO1xuXG4gICAgICAgIC8vIGhlYWRlciBpcyBhbHJlYWR5IGNyZWF0ZWQgYWJvdmVcdTIwMjZcblxuICAgICAgICAvLyBrZXlcdTIwMTN2YWx1ZSBzdGFjayBoZWFkZXJcbiAgICAgICAgY29uc3Qga3YgPSBib3guY3JlYXRlRGl2KHsgY2xzOiBcInZ2LWdwLWt2bGlzdFwiIH0pO1xuXG4gICAgICAgIGNvbnN0IG1ha2VLVlJvdyA9IChsYWJlbDogc3RyaW5nLCBodG1sOiBzdHJpbmcpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHJvdyA9IGt2LmNyZWF0ZURpdih7IGNsczogXCJ2di1ncC1rdnJvd1wiIH0pO1xuICAgICAgICAgICAgcm93LmNyZWF0ZUVsKFwiZGl2XCIsIHsgY2xzOiBcInZ2LWdwLWt2bGFiZWxcIiwgdGV4dDogbGFiZWwgfSk7XG4gICAgICAgICAgICBjb25zdCB2YWwgPSByb3cuY3JlYXRlRGl2KHsgY2xzOiBcInZ2LWdwLWt2dmFsdWVcIiB9KTtcbiAgICAgICAgICAgIHZhbC5pbm5lckhUTUwgPSBodG1sO1xuICAgICAgICB9O1xuXG4gICAgICAgIC8vIHJvd3NcbiAgICAgICAgbWFrZUtWUm93KFwiU3BlY2llc1wiLCBzcGVjaWVzKTtcbiAgICAgICAgbWFrZUtWUm93KFwiUmFjZVwiLCByYWNlKTtcbiAgICAgICAgbWFrZUtWUm93KFwiQ2xhc3NcIiwga2xhc3MpO1xuICAgICAgICBtYWtlS1ZSb3coXCJTdWJjbGFzc1wiLCBzdWJjbGFzcyk7XG4gICAgICAgIG1ha2VLVlJvdyhcIlByb2ZpY2llbmNpZXNcIiwgcHJvZnNIdG1sKTtcbiAgICAgICAgbWFrZUtWUm93KFwiU2F2aW5nIFRocm93c1wiLCBzdEh0bWwpO1xuXG4gICAgICAgIC8vIExhbmd1YWdlcyAoZnJvbSBmbVtcImxhbmd1YWdlc1wiXSlcbiAgICAgICAgY29uc3QgbGFuZ3VhZ2VzQXJyID0gYXJyVG9MaXN0KGZtW1wibGFuZ3VhZ2VzXCJdKTtcbiAgICAgICAgY29uc3QgbGFuZ3VhZ2VzSHRtbCA9IGxhbmd1YWdlc0Fyci5sZW5ndGggPyBqb2luQ29tbWEobGFuZ3VhZ2VzQXJyKSA6IFwiXHUyMDE0XCI7XG4gICAgICAgIG1ha2VLVlJvdyhcIkxhbmd1YWdlc1wiLCBsYW5ndWFnZXNIdG1sKTtcblxuXG4gICAgICAgIC8vIFx1MjAxNFx1MjAxNFx1MjAxNCBLRVkgSVRFTVMgKGVkaXRhYmxlKSBcdTIwMTRcdTIwMTRcdTIwMTRcdTIwMTRcdTIwMTRcdTIwMTRcdTIwMTRcdTIwMTRcdTIwMTRcdTIwMTRcdTIwMTRcdTIwMTRcdTIwMTRcdTIwMTRcdTIwMTRcdTIwMTRcdTIwMTRcdTIwMTRcdTIwMTRcdTIwMTRcdTIwMTRcdTIwMTRcdTIwMTRcdTIwMTRcdTIwMTRcdTIwMTRcdTIwMTRcdTIwMTRcdTIwMTRcdTIwMTRcdTIwMTRcdTIwMTRcbiAgICAgICAge1xuICAgICAgICAgICAgY29uc3Qgc2VjID0gYm94LmNyZWF0ZURpdih7IGNsczogXCJ2di1ncC1kZXRhaWwtc2VjdGlvblwiIH0pO1xuICAgICAgICAgICAgY29uc3QgaCA9IHNlYy5jcmVhdGVFbChcImg0XCIsIHsgdGV4dDogXCJLZXkgSXRlbXNcIiB9KTtcbiAgICAgICAgICAgIGNvbnN0IGVkaXQgPSBoLmNyZWF0ZVNwYW4oeyBjbHM6IFwidnYtZ3AtZWRpdC1saW5rXCIsIHRleHQ6IFwiZWRpdFwiIH0pO1xuICAgICAgICAgICAgY29uc3QgbGlzdCA9IHNlYy5jcmVhdGVFbChcImRpdlwiLCB7IGNsczogXCJ2di1ncC1kZXRhaWwtaW5saW5lXCIgfSk7XG5cbiAgICAgICAgICAgIGNvbnN0IHJlYWQgPSAoKSA9PiB0aGlzLnJlYWRGbVN0cmluZ0xpc3QoZm0sIFtcImtleV9pdGVtc1wiLCBcIktleSBJdGVtc1wiXSk7XG5cbiAgICAgICAgICAgIGNvbnN0IHBhaW50ID0gKGFycjogc3RyaW5nW10pID0+IHtcbiAgICAgICAgICAgICAgICBsaXN0LmVtcHR5KCk7XG4gICAgICAgICAgICAgICAgY29uc3QgaXRlbXMgPSAoYXJyLmxlbmd0aCA/IGFyciA6IFtcIlx1MjAxNFwiXSlcbiAgICAgICAgICAgICAgICAgICAgLm1hcChzID0+IFN0cmluZyhzKS50cmltKCkpXG4gICAgICAgICAgICAgICAgICAgIC5tYXAocyA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBtID0gcy5tYXRjaCgvXFxbXFxbKFtefFxcXV0rKSg/OlxcfChbXlxcXV0rKSk/XFxdXFxdLyk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbSA/IGxpbmtUbyhtWzFdLnRyaW0oKSwgbVsyXT8udHJpbSgpKSA6IHM7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGxpc3QuaW5uZXJIVE1MID0gaXRlbXMuam9pbihcIiwgXCIpO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgcGFpbnQocmVhZCgpKTtcblxuICAgICAgICAgICAgZWRpdC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGNhbmRpZGF0ZXMgPSB0aGlzLmNvbGxlY3RGcm9tRm9sZGVycyhcbiAgICAgICAgICAgICAgICAgICAgW1wiQ29tcGVuZGl1bS9JdGVtc1wiLCBcIkNvbXBlbmRpdW0vTWFnaWMgSXRlbXNcIl0sIHRydWVcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIG5ldyBFZGl0TGlzdE1vZGFsKHRoaXMuYXBwLCB7XG4gICAgICAgICAgICAgICAgICAgIHRpdGxlOiBgJHtwb3NzZXNzaXZlKG5hbWUpfSBLZXkgSXRlbXNgLFxuICAgICAgICAgICAgICAgICAgICBpbml0aWFsOiByZWFkKCksXG4gICAgICAgICAgICAgICAgICAgIGNhbmRpZGF0ZXMsXG4gICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyOiBcIlNlYXJjaCBpdGVtc1x1MjAyNlwiLFxuICAgICAgICAgICAgICAgICAgICBvblNhdmU6IGFzeW5jIChuZXdMaXN0KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLndyaXRlRm1TdHJpbmdMaXN0KGZpbGUsIFwia2V5X2l0ZW1zXCIsIG5ld0xpc3QpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbmV3Rm0gPSB0aGlzLmFwcC5tZXRhZGF0YUNhY2hlLmdldEZpbGVDYWNoZShmaWxlKT8uZnJvbnRtYXR0ZXIgfHwge307XG4gICAgICAgICAgICAgICAgICAgICAgICBwYWludCh0aGlzLnJlYWRGbVN0cmluZ0xpc3QobmV3Rm0sIFtcImtleV9pdGVtc1wiLCBcIktleSBJdGVtc1wiXSkpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSkub3BlbigpO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFx1MjAxNFx1MjAxNFx1MjAxNCBTUEVMTFMgKGVkaXRhYmxlKSBcdTIwMTRcdTIwMTRcdTIwMTRcdTIwMTRcdTIwMTRcdTIwMTRcdTIwMTRcdTIwMTRcdTIwMTRcdTIwMTRcdTIwMTRcdTIwMTRcdTIwMTRcdTIwMTRcdTIwMTRcdTIwMTRcdTIwMTRcdTIwMTRcdTIwMTRcdTIwMTRcdTIwMTRcdTIwMTRcdTIwMTRcdTIwMTRcdTIwMTRcdTIwMTRcdTIwMTRcdTIwMTRcdTIwMTRcdTIwMTRcdTIwMTRcdTIwMTRcbiAgICAgICAge1xuICAgICAgICAgICAgY29uc3Qgc2VjID0gYm94LmNyZWF0ZURpdih7IGNsczogXCJ2di1ncC1kZXRhaWwtc2VjdGlvblwiIH0pO1xuICAgICAgICAgICAgY29uc3QgaCA9IHNlYy5jcmVhdGVFbChcImg0XCIsIHsgdGV4dDogXCJTcGVsbHNcIiB9KTtcbiAgICAgICAgICAgIGNvbnN0IGVkaXQgPSBoLmNyZWF0ZVNwYW4oeyBjbHM6IFwidnYtZ3AtZWRpdC1saW5rXCIsIHRleHQ6IFwiZWRpdFwiIH0pO1xuXG4gICAgICAgICAgICBjb25zdCBnZXQgPSAoKSA9PiB0aGlzLnJlYWRGbVN0cmluZ0xpc3QoZm0sIFtcIlNwZWxsc1wiLCBcInNwZWxsc1wiXSk7XG5cbiAgICAgICAgICAgIGNvbnN0IHRhYmxlV3JhcCA9IHNlYy5jcmVhdGVEaXYoKTtcblxuICAgICAgICAgICAgY29uc3QgcGFpbnRUYWJsZSA9IChuYW1lczogc3RyaW5nW10pID0+IHtcbiAgICAgICAgICAgICAgICB0YWJsZVdyYXAuZW1wdHkoKTtcblxuICAgICAgICAgICAgICAgIGNvbnN0IHN0ID0gdGFibGVXcmFwLmNyZWF0ZUVsKFwidGFibGVcIiwgeyBjbHM6IFwidnYtZ3Atc3BlbGwtdGFibGVcIiB9KTtcbiAgICAgICAgICAgICAgICBjb25zdCB0aGVhZCA9IHN0LmNyZWF0ZUVsKFwidGhlYWRcIikuY3JlYXRlRWwoXCJ0clwiKTtcbiAgICAgICAgICAgICAgICBbXCJTcGVsbFwiLCBcIkx2bFwiLCBcIkNhc3RcIiwgXCJSYW5nZVwiLCBcIlNhdmVcIl0uZm9yRWFjaChoID0+IHRoZWFkLmNyZWF0ZUVsKFwidGhcIiwgeyB0ZXh0OiBoIH0pKTtcbiAgICAgICAgICAgICAgICBjb25zdCB0Ym9keSA9IHN0LmNyZWF0ZUVsKFwidGJvZHlcIik7XG5cbiAgICAgICAgICAgICAgICB0eXBlIFJvdyA9IHsgbmFtZUh0bWw6IHN0cmluZzsgbGV2ZWw6IG51bWJlciB8IHN0cmluZzsgY2FzdDogc3RyaW5nOyByYW5nZTogc3RyaW5nOyBzYXZlOiBzdHJpbmcgfTtcbiAgICAgICAgICAgICAgICBjb25zdCByb3dzOiBSb3dbXSA9IFtdO1xuXG4gICAgICAgICAgICAgICAgY29uc3Qgbm9ybWFsaXplID0gKHJhdzogc3RyaW5nKTogeyBsaW5rVGV4dDogc3RyaW5nOyBsYWJlbD86IHN0cmluZyB9ID0+IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbSA9IHJhdy5tYXRjaCgvXFxbXFxbKFtefFxcXV0rKSg/OlxcfChbXlxcXV0rKSk/XFxdXFxdLyk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChtKSByZXR1cm4geyBsaW5rVGV4dDogbVsxXSwgbGFiZWw6IG1bMl0gfTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsgbGlua1RleHQ6IHJhdyB9O1xuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IHMgb2YgbmFtZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbiA9IG5vcm1hbGl6ZShTdHJpbmcocykpO1xuICAgICAgICAgICAgICAgICAgICBsZXQgZGVzdCA9IHRoaXMuYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0Rmlyc3RMaW5rcGF0aERlc3Qobi5saW5rVGV4dCwgZmlsZS5wYXRoKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFkZXN0ICYmICFuLmxpbmtUZXh0LmluY2x1ZGVzKFwiL1wiKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZGVzdCA9IHRoaXMuYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0Rmlyc3RMaW5rcGF0aERlc3QoYENvbXBlbmRpdW0vU3BlbGxzLyR7bi5saW5rVGV4dH1gLCBmaWxlLnBhdGgpO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZGlzcGxheU5hbWUgPSAobi5sYWJlbCA/PyBuLmxpbmtUZXh0KS5zcGxpdChcIi9cIikucG9wKCkhLnJlcGxhY2UoL1xcLm1kJC8sIFwiXCIpLnRyaW0oKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcGx1Z2luID0gZ2V0VG9vbGtpdCh0aGlzLmFwcCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGVuYWJsZVByZXZpZXcgPSAhIXBsdWdpbj8uc2V0dGluZ3M/LmVuYWJsZVNpZGViYXJQcmV2aWV3cztcblxuICAgICAgICAgICAgICAgICAgICBjb25zdCBuYW1lSHRtbCA9IGRlc3RcbiAgICAgICAgICAgICAgICAgICAgICAgID8gYDxhIGNsYXNzPVwidnYtbGluayR7ZW5hYmxlUHJldmlldyA/IFwiIGludGVybmFsLWxpbmtcIiA6IFwiXCJ9XCIgaHJlZj1cIiR7ZGVzdC5wYXRofVwiJHtlbmFibGVQcmV2aWV3ID8gYCBkYXRhLWhyZWY9XCIke2Rlc3QucGF0aH1cImAgOiBcIlwifT4ke2Rpc3BsYXlOYW1lfTwvYT5gXG4gICAgICAgICAgICAgICAgICAgICAgICA6IGRpc3BsYXlOYW1lO1xuXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGZtU3BlbGwgPSBkZXN0ID8gKHRoaXMuYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0RmlsZUNhY2hlKGRlc3QpPy5mcm9udG1hdHRlciB8fCB7fSkgOiB7fTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbHZsUmF3ID0gZm1TcGVsbFtcImxldmVsXCJdO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBsdmxOdW0gPSBOdW1iZXIobHZsUmF3KTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbGV2ZWw6IG51bWJlciB8IHN0cmluZyA9IE51bWJlci5pc0Zpbml0ZShsdmxOdW0pID8gbHZsTnVtIDogKGx2bFJhdyA/PyBcIlx1MjAxNFwiKTtcblxuICAgICAgICAgICAgICAgICAgICByb3dzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICAgICAgbmFtZUh0bWwsXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXZlbCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc3Q6IFN0cmluZyhmbVNwZWxsW1wiY2FzdGluZ190aW1lXCJdID8/IFwiXHUyMDE0XCIpLFxuICAgICAgICAgICAgICAgICAgICAgICAgcmFuZ2U6IFN0cmluZyhmbVNwZWxsW1wiUmFuZ2VcIl0gPz8gXCJcdTIwMTRcIiksXG4gICAgICAgICAgICAgICAgICAgICAgICBzYXZlOiAoZm1TcGVsbFtcInNhdmluZ190aHJvd3NcIl0gPz8gXCJcIikudG9TdHJpbmcoKS50cmltKCkgfHwgXCJcdTIwMTRcIixcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgcm93cy5zb3J0KChhLCBiKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGFuID0gdHlwZW9mIGEubGV2ZWwgPT09IFwibnVtYmVyXCIgPyBhLmxldmVsIDogOTk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGJuID0gdHlwZW9mIGIubGV2ZWwgPT09IFwibnVtYmVyXCIgPyBiLmxldmVsIDogOTk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBhbiAtIGJuO1xuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCByIG9mIHJvd3MpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdHIgPSB0Ym9keS5jcmVhdGVFbChcInRyXCIpO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBuYW1lVGQgPSB0ci5jcmVhdGVFbChcInRkXCIpOyBuYW1lVGQuaW5uZXJIVE1MID0gci5uYW1lSHRtbDtcbiAgICAgICAgICAgICAgICAgICAgdHIuY3JlYXRlRWwoXCJ0ZFwiLCB7IHRleHQ6IFN0cmluZyhyLmxldmVsKSB9KTtcbiAgICAgICAgICAgICAgICAgICAgdHIuY3JlYXRlRWwoXCJ0ZFwiLCB7IHRleHQ6IHIuY2FzdCB9KTtcbiAgICAgICAgICAgICAgICAgICAgdHIuY3JlYXRlRWwoXCJ0ZFwiLCB7IHRleHQ6IHIucmFuZ2UgfSk7XG4gICAgICAgICAgICAgICAgICAgIHRyLmNyZWF0ZUVsKFwidGRcIiwgeyB0ZXh0OiByLnNhdmUgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgY29uc3Qgb3BlblNwZWxsRWRpdG9yID0gKGluaXRpYWw6IHN0cmluZ1tdKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgY2FuZGlkYXRlcyA9IHRoaXMuY29sbGVjdEZyb21Gb2xkZXJzKFtcIkNvbXBlbmRpdW0vU3BlbGxzXCIsIFwiU3BlbGxzXCJdLCB0cnVlKTtcbiAgICAgICAgICAgICAgICBuZXcgRWRpdExpc3RNb2RhbCh0aGlzLmFwcCwge1xuICAgICAgICAgICAgICAgICAgICB0aXRsZTogYCR7cG9zc2Vzc2l2ZShuYW1lKX0gU3BlbGxzYCxcbiAgICAgICAgICAgICAgICAgICAgaW5pdGlhbCxcbiAgICAgICAgICAgICAgICAgICAgY2FuZGlkYXRlcyxcbiAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI6IFwiU2VhcmNoIHNwZWxsc1x1MjAyNlwiLFxuICAgICAgICAgICAgICAgICAgICBvblNhdmU6IGFzeW5jIChuZXdMaXN0KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLndyaXRlRm1TdHJpbmdMaXN0KGZpbGUsIFwiU3BlbGxzXCIsIG5ld0xpc3QpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVmcmVzaGVkID0gdGhpcy5hcHAubWV0YWRhdGFDYWNoZS5nZXRGaWxlQ2FjaGUoZmlsZSk/LmZyb250bWF0dGVyIHx8IHt9O1xuICAgICAgICAgICAgICAgICAgICAgICAgcGFpbnRUYWJsZSh0aGlzLnJlYWRGbVN0cmluZ0xpc3QocmVmcmVzaGVkLCBbXCJTcGVsbHNcIiwgXCJzcGVsbHNcIl0pKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pLm9wZW4oKTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIHBhaW50VGFibGUoZ2V0KCkpO1xuICAgICAgICAgICAgZWRpdC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4gb3BlblNwZWxsRWRpdG9yKGdldCgpKSk7XG5cbiAgICAgICAgfVxuICAgICAgICBjYXJkLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZSkgPT4ge1xuICAgICAgICAgICAgY29uc3QgdCA9IGUudGFyZ2V0IGFzIEhUTUxFbGVtZW50IHwgbnVsbDtcbiAgICAgICAgICAgIGNvbnN0IGEgPSB0Py5jbG9zZXN0KFwiYS52di1saW5rXCIpIGFzIEhUTUxBbmNob3JFbGVtZW50IHwgbnVsbDtcbiAgICAgICAgICAgIGlmICghYSkgcmV0dXJuO1xuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgY29uc3QgdGFyZ2V0ID0gYS5nZXRBdHRyaWJ1dGUoXCJocmVmXCIpO1xuICAgICAgICAgICAgaWYgKCF0YXJnZXQpIHJldHVybjtcbiAgICAgICAgICAgIHRoaXMuYXBwLndvcmtzcGFjZS5vcGVuTGlua1RleHQodGFyZ2V0LCBmaWxlLnBhdGgsIHRydWUpOyAvLyBzZXQgdG8gZmFsc2UgdG8gcmV1c2UgY3VycmVudCB0YWJcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IHBsdWdpbiA9IGdldFRvb2xraXQodGhpcy5hcHApO1xuICAgICAgICBjb25zdCBwYWdlUHJldmlldyA9ICh0aGlzLmFwcCBhcyBhbnkpLmludGVybmFsUGx1Z2luc1xuICAgICAgICAgICAgPy5nZXRQbHVnaW5CeUlkPy4oXCJwYWdlLXByZXZpZXdcIilcbiAgICAgICAgICAgID8uaW5zdGFuY2U7XG5cbiAgICAgICAgaWYgKHBhZ2VQcmV2aWV3Py5vbkxpbmtIb3Zlcikge1xuICAgICAgICAgICAgY2FyZC5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vtb3ZlXCIsIChldikgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IHQgPSBldi50YXJnZXQgYXMgSFRNTEVsZW1lbnQgfCBudWxsO1xuICAgICAgICAgICAgICAgIGNvbnN0IGEgPSB0Py5jbG9zZXN0KFwiYS52di1saW5rXCIpIGFzIEhUTUxBbmNob3JFbGVtZW50IHwgbnVsbDtcbiAgICAgICAgICAgICAgICBpZiAoIWEpIHJldHVybjtcblxuICAgICAgICAgICAgICAgIGNvbnN0IGxpbmtUZXh0ID0gYS5nZXRBdHRyaWJ1dGUoXCJkYXRhLWhyZWZcIikgfHwgYS5nZXRBdHRyaWJ1dGUoXCJocmVmXCIpO1xuICAgICAgICAgICAgICAgIGlmICghbGlua1RleHQpIHJldHVybjtcbiAgICAgICAgICAgICAgICBpZiAocGx1Z2luLnNldHRpbmdzLmVuYWJsZVNpZGViYXJQcmV2aWV3cykge1xuICAgICAgICAgICAgICAgICAgICBwYWdlUHJldmlldy5vbkxpbmtIb3ZlcihldiwgYSwgbGlua1RleHQsIGZpbGUucGF0aCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgfVxuXG4gICAgfVxuXG4gICAgcHJpdmF0ZSBzdGFydExpdmVVcGRhdGVzKCkge1xuICAgICAgICAvLyBNZXRhZGF0YSBmcm9udG1hdHRlciBjaGFuZ2VkIChmaXJlcyBvbiBzYXZlKVxuICAgICAgICB0aGlzLnJlZ2lzdGVyRXZlbnQoXG4gICAgICAgICAgICB0aGlzLmFwcC5tZXRhZGF0YUNhY2hlLm9uKFwiY2hhbmdlZFwiLCAoZmlsZSkgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChmaWxlIGluc3RhbmNlb2YgVEZpbGUgJiYgdGhpcy5pc1NlbGVjdGVkUGF0aChmaWxlLnBhdGgpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucXVldWVUYWJsZSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAodGhpcy5kZXRhaWxzT3BlblBhdGgpIHRoaXMucXVldWVEZXRhaWwoKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICk7XG5cbiAgICAgICAgdGhpcy5yZWdpc3RlckV2ZW50KFxuICAgICAgICAgICAgdGhpcy5hcHAudmF1bHQub24oXCJtb2RpZnlcIiwgYXN5bmMgKGZpbGUpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoIShmaWxlIGluc3RhbmNlb2YgVEZpbGUpKSByZXR1cm47XG4gICAgICAgICAgICAgICAgaWYgKGZpbGUuZXh0ZW5zaW9uICE9PSBcIm1kXCIpIHJldHVybjtcbiAgICAgICAgICAgICAgICBpZiAoZmlsZS5wYXRoLnN0YXJ0c1dpdGgodGhpcy5nZXRBY3RpdmVGb2xkZXJQcmVmaXgoKSkpIHtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5yZW5kZXJBZGRSb3coKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KVxuICAgICAgICApO1xuXG4gICAgICAgIC8vIEZ1bGwgbWV0YWRhdGEgcmVzb2x2ZSAodXNlZnVsIG9uIGluaXRpYWwgaW5kZXggb3IgYmlnIGNoYW5nZXMpXG4gICAgICAgIHRoaXMucmVnaXN0ZXJFdmVudChcbiAgICAgICAgICAgIHRoaXMuYXBwLm1ldGFkYXRhQ2FjaGUub24oXCJyZXNvbHZlZFwiLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5xdWV1ZVRhYmxlKCk7XG4gICAgICAgICAgICB9KVxuICAgICAgICApO1xuXG4gICAgICAgIC8vIEZpbGUgY29udGVudCBjaGFuZ2VkIChleHRyYSBzYWZldHkpXG4gICAgICAgIHRoaXMucmVnaXN0ZXJFdmVudChcbiAgICAgICAgICAgIHRoaXMuYXBwLnZhdWx0Lm9uKFwibW9kaWZ5XCIsIChmaWxlKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKGZpbGUgaW5zdGFuY2VvZiBURmlsZSAmJiB0aGlzLmlzU2VsZWN0ZWRQYXRoKGZpbGUucGF0aCkpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5xdWV1ZVRhYmxlKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSlcbiAgICAgICAgKTtcblxuICAgICAgICAvLyBOZXcgY2hhcmFjdGVyIG5vdGUgY3JlYXRlZCBcdTIxOTIgcmVwb3B1bGF0ZSBkcm9wZG93biBpZiBpdFx1MjAxOXMgaW4gdGhlIGFjdGl2ZSBmb2xkZXJcbiAgICAgICAgdGhpcy5yZWdpc3RlckV2ZW50KFxuICAgICAgICAgICAgdGhpcy5hcHAudmF1bHQub24oXCJjcmVhdGVcIiwgYXN5bmMgKGZpbGUpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoIShmaWxlIGluc3RhbmNlb2YgVEZpbGUpKSByZXR1cm47XG4gICAgICAgICAgICAgICAgaWYgKGZpbGUuZXh0ZW5zaW9uICE9PSBcIm1kXCIpIHJldHVybjtcbiAgICAgICAgICAgICAgICBpZiAoZmlsZS5wYXRoLnN0YXJ0c1dpdGgodGhpcy5nZXRBY3RpdmVGb2xkZXJQcmVmaXgoKSkpIHtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5yZW5kZXJBZGRSb3coKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KVxuICAgICAgICApO1xuXG4gICAgICAgIC8vIFJlbmFtZS9tb3ZlIGNvdWxkIGFkZC9yZW1vdmUgZnJvbSB0aGUgYWN0aXZlIGZvbGRlciBcdTIxOTIgcmVmcmVzaCBkcm9wZG93blxuICAgICAgICB0aGlzLnJlZ2lzdGVyRXZlbnQoXG4gICAgICAgICAgICB0aGlzLmFwcC52YXVsdC5vbihcInJlbmFtZVwiLCBhc3luYyAoZmlsZSkgPT4ge1xuICAgICAgICAgICAgICAgIGlmICghKGZpbGUgaW5zdGFuY2VvZiBURmlsZSkpIHJldHVybjtcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnJlbmRlckFkZFJvdygpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgKTtcblxuICAgICAgICAvLyBEZWxldGlvbnMgYWZmZWN0IGF2YWlsYWJsZSBvcHRpb25zIHRvbyBcdTIxOTIgcmVmcmVzaCBkcm9wZG93blxuICAgICAgICB0aGlzLnJlZ2lzdGVyRXZlbnQoXG4gICAgICAgICAgICB0aGlzLmFwcC52YXVsdC5vbihcImRlbGV0ZVwiLCBhc3luYyAoZmlsZSkgPT4ge1xuICAgICAgICAgICAgICAgIGlmICghKGZpbGUgaW5zdGFuY2VvZiBURmlsZSkpIHJldHVybjtcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnJlbmRlckFkZFJvdygpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgKTtcblxuXG4gICAgICAgIC8vIEhhbmRsZSByZW5hbWVzOiBrZWVwIHJvc3RlciBwYXRocyBjdXJyZW50XG4gICAgICAgIHRoaXMucmVnaXN0ZXJFdmVudChcbiAgICAgICAgICAgIHRoaXMuYXBwLnZhdWx0Lm9uKFwicmVuYW1lXCIsIGFzeW5jIChmaWxlLCBvbGRQYXRoKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKCEoZmlsZSBpbnN0YW5jZW9mIFRGaWxlKSkgcmV0dXJuO1xuICAgICAgICAgICAgICAgIGNvbnN0IHBsdWdpbiA9IGdldFRvb2xraXQodGhpcy5hcHApO1xuICAgICAgICAgICAgICAgIGNvbnN0IHMgPSBwbHVnaW4/LnNldHRpbmdzPy5nYW1lcGxheSB8fCB7fTtcbiAgICAgICAgICAgICAgICBjb25zdCBsaXN0OiBzdHJpbmdbXSA9IHMuc2VsZWN0ZWRQbGF5ZXJzIHx8IFtdO1xuICAgICAgICAgICAgICAgIGNvbnN0IGlkeCA9IGxpc3QuaW5kZXhPZihvbGRQYXRoKTtcbiAgICAgICAgICAgICAgICBpZiAoaWR4ICE9PSAtMSkge1xuICAgICAgICAgICAgICAgICAgICBsaXN0W2lkeF0gPSBmaWxlLnBhdGg7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZW5zdXJlR2FtZXBsYXkoKS5zZWxlY3RlZFBsYXllcnMgPSBsaXN0O1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCBwbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucXVldWVUYWJsZSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pXG4gICAgICAgICk7XG5cbiAgICAgICAgLy8gSWYgYSBzZWxlY3RlZCBub3RlIGlzIGRlbGV0ZWQsIGRyb3AgaXQgZnJvbSB0aGUgcm9zdGVyXG4gICAgICAgIHRoaXMucmVnaXN0ZXJFdmVudChcbiAgICAgICAgICAgIHRoaXMuYXBwLnZhdWx0Lm9uKFwiZGVsZXRlXCIsIGFzeW5jIChmaWxlKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKCEoZmlsZSBpbnN0YW5jZW9mIFRGaWxlKSkgcmV0dXJuO1xuICAgICAgICAgICAgICAgIGNvbnN0IHBsdWdpbiA9IGdldFRvb2xraXQodGhpcy5hcHApO1xuICAgICAgICAgICAgICAgIGNvbnN0IHMgPSBwbHVnaW4/LnNldHRpbmdzPy5nYW1lcGxheSB8fCB7fTtcbiAgICAgICAgICAgICAgICBjb25zdCBsaXN0OiBzdHJpbmdbXSA9IHMuc2VsZWN0ZWRQbGF5ZXJzIHx8IFtdO1xuICAgICAgICAgICAgICAgIGlmIChsaXN0LmluY2x1ZGVzKGZpbGUucGF0aCkpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5lbnN1cmVHYW1lcGxheSgpLnNlbGVjdGVkUGxheWVycyA9IGxpc3QuZmlsdGVyKChwKSA9PiBwICE9PSBmaWxlLnBhdGgpO1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCBwbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucXVldWVUYWJsZSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLy8gUmVhZCBhIHN0cmluZy1hcnJheSBmcm9udG1hdHRlciBmaWVsZCByZWdhcmRsZXNzIG9mIGtleSBjYXNpbmcvc2hhcGVcbiAgICBwcml2YXRlIHJlYWRGbVN0cmluZ0xpc3QoZm06IGFueSwga2V5czogc3RyaW5nW10pOiBzdHJpbmdbXSB7XG4gICAgICAgIGZvciAoY29uc3QgayBvZiBrZXlzKSB7XG4gICAgICAgICAgICBjb25zdCB2ID0gZm0/LltrXTtcbiAgICAgICAgICAgIGlmICghdikgY29udGludWU7XG4gICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheSh2KSkgcmV0dXJuIHYubWFwKHggPT4gU3RyaW5nKHgpLnRyaW0oKSkuZmlsdGVyKEJvb2xlYW4pO1xuICAgICAgICAgICAgaWYgKHR5cGVvZiB2ID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICAgICAgLy8gdHJ5IEpTT04gb3IgY29tbWEgbGlzdFxuICAgICAgICAgICAgICAgIHRyeSB7IGNvbnN0IGogPSBKU09OLnBhcnNlKHYpOyBpZiAoQXJyYXkuaXNBcnJheShqKSkgcmV0dXJuIGoubWFwKFN0cmluZyk7IH0gY2F0Y2ggeyB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHYuc3BsaXQoXCIsXCIpLm1hcChzID0+IHMudHJpbSgpKS5maWx0ZXIoQm9vbGVhbik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFtdO1xuICAgIH1cblxuICAgIC8vIFdyaXRlIGFycmF5IGJhY2sgdG8gYSBTSU5HTEUgY2Fub25pY2FsIGtleSAoY3JlYXRlcyBpZiBtaXNzaW5nKVxuICAgIHByaXZhdGUgYXN5bmMgd3JpdGVGbVN0cmluZ0xpc3QoZmlsZTogVEZpbGUsIGtleTogc3RyaW5nLCBsaXN0OiBzdHJpbmdbXSkge1xuICAgICAgICBhd2FpdCB0aGlzLmFwcC5maWxlTWFuYWdlci5wcm9jZXNzRnJvbnRNYXR0ZXIoZmlsZSwgKGZtKSA9PiB7XG4gICAgICAgICAgICAoZm0gYXMgYW55KVtrZXldID0gbGlzdDtcbiAgICAgICAgfSk7XG4gICAgfVxuXG5cbiAgICBhc3luYyBvbk9wZW4oKSB7XG4gICAgICAgIGNvbnN0IGNvbnQgPSB0aGlzLmNvbnRhaW5lckVsLmNoaWxkcmVuWzFdIGFzIEhUTUxEaXZFbGVtZW50O1xuICAgICAgICBjb250LmVtcHR5KCk7XG5cbiAgICAgICAgLy8gT25lIGJpZyBjb2xsYXBzaWJsZSB3cmFwcGVyXG4gICAgICAgIGNvbnN0IHBhcnR5ID0gY29udC5jcmVhdGVFbChcImRldGFpbHNcIiwgeyBhdHRyOiB7IG9wZW46IFwidHJ1ZVwiIH0gfSk7XG4gICAgICAgIHBhcnR5LmFkZENsYXNzKFwidnYtZ3Atcm9vdFwiKTtcblxuICAgICAgICBjb25zdCBzdW1tYXJ5ID0gcGFydHkuY3JlYXRlRWwoXCJzdW1tYXJ5XCIsIHsgdGV4dDogXCJQYXJ0eSBPdmVydmlld1wiIH0pO1xuICAgICAgICBzdW1tYXJ5LmFkZENsYXNzKFwidnYtZ3Atc3VtbWFyeVwiKTtcblxuICAgICAgICBjb25zdCBkZXNjID0gcGFydHkuY3JlYXRlRGl2KHsgY2xzOiBcInZ2LWdwLWRlc2NcIiB9KTtcbiAgICAgICAgZGVzYy5zZXRUZXh0KFwiQWRkIHBsYXllcnMgdG8gdGhlIGxpc3QgYmVsb3cgdG8gc2VlIHRoZWlyIGdlbmVyYWwgc3RhdHMuIENsaWNrIGEgbmFtZSBmb3IgZXhwYW5kZWQgZGV0YWlscy5cIik7XG5cbiAgICAgICAgLy8gRXZlcnl0aGluZyBlbHNlIGxpdmVzIGluc2lkZSB0aGlzIGJvZHlcbiAgICAgICAgY29uc3QgYm9keSA9IHBhcnR5LmNyZWF0ZURpdih7IGNsczogXCJ2di1ncC1yb290LWJvZHlcIiB9KTtcblxuICAgICAgICAvLyBidWlsZCB0aGUgdXN1YWwgc2VjdGlvbnMsIGJ1dCBpbnNpZGUgYGJvZHlgXG4gICAgICAgIHRoaXMuZm9sZGVyUm93ID0gYm9keS5jcmVhdGVEaXYoeyBjbHM6IFwidnYtZ2FtZXBsYXktZm9sZGVycm93XCIgfSk7XG4gICAgICAgIHRoaXMuYWRkUm93ID0gYm9keS5jcmVhdGVEaXYoeyBjbHM6IFwidnYtZ2FtZXBsYXktYWRkcm93XCIgfSk7XG4gICAgICAgIHRoaXMucGFydHlUYWJsZVdyYXAgPSBib2R5LmNyZWF0ZURpdih7IGNsczogXCJ2di1nYW1lcGxheS10YWJsZXdyYXBcIiB9KTtcbiAgICAgICAgdGhpcy5kZXRhaWxzV3JhcCA9IGJvZHkuY3JlYXRlRGl2KHsgY2xzOiBcInZ2LWdwLWRldGFpbHdyYXBcIiB9KTtcbiAgICAgICAgdGhpcy5kZXRhaWxzV3JhcC5jcmVhdGVEaXYoeyBjbHM6IFwidnYtZ3AtZGV0YWlsLWVtcHR5XCIsIHRleHQ6IFwiQ2xpY2sgYSBuYW1lIHRvIHNlZSBkZXRhaWxzXHUyMDI2XCIgfSk7XG5cbiAgICAgICAgY29uc3QgcGx1Z2luID0gZ2V0VG9vbGtpdCh0aGlzLmFwcCk7XG4gICAgICAgIGlmICghcGx1Z2luLnNldHRpbmdzLmdhbWVwbGF5KSB7XG4gICAgICAgICAgICBwbHVnaW4uc2V0dGluZ3MuZ2FtZXBsYXkgPSB7XG4gICAgICAgICAgICAgICAgc2VsZWN0ZWRQbGF5ZXJzOiBbXSxcbiAgICAgICAgICAgICAgICBhY3RpdmVGb2xkZXI6IFwiV29ybGQvUGVvcGxlL1BsYXllciBDaGFyYWN0ZXJzL0FjdGl2ZVwiLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGF3YWl0IHBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIHJlbmRlciBldmVyeXRoaW5nXG4gICAgICAgIGF3YWl0IHRoaXMucmVuZGVyQWRkUm93KCk7XG4gICAgICAgIGF3YWl0IHRoaXMucmVuZGVyVGFibGUoKTtcbiAgICAgICAgdGhpcy5zdGFydExpdmVVcGRhdGVzKCk7XG4gICAgICAgIHRoaXMucmVnaXN0ZXJFdmVudChcbiAgICAgICAgICAgICh0aGlzLmFwcC53b3Jrc3BhY2UgYXMgYW55KS5vbigndnY6c2lkZWJhci1wcmV2aWV3cy1jaGFuZ2VkJywgYXN5bmMgKGRhdGE/OiB7IGVuYWJsZWQ6IGJvb2xlYW4gfSkgPT4ge1xuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucmVuZGVyVGFibGUoKTtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5kZXRhaWxzT3BlblBhdGgpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZiA9IHRoaXMuYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aCh0aGlzLmRldGFpbHNPcGVuUGF0aCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChmIGluc3RhbmNlb2YgVEZpbGUpIGF3YWl0IHRoaXMuc2hvd0RldGFpbHMoZik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSlcbiAgICAgICAgKTtcblxuICAgICAgICAvLyBcdTI1MDBcdTI1MDAgU0hPUEtFRVBFUiBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcbiAgICAgICAgLy8ge1xuICAgICAgICAvLyAgICAgLy8gQ3JlYXRlIGEgc2libGluZyBzZWN0aW9uIGJlbG93IFBhcnR5IE92ZXJ2aWV3XG4gICAgICAgIC8vICAgICBjb25zdCBzayA9ICh0aGlzLmNvbnRhaW5lckVsLmNoaWxkcmVuWzFdIGFzIEhUTUxEaXZFbGVtZW50KS5jcmVhdGVFbChcImRldGFpbHNcIik7XG4gICAgICAgIC8vICAgICBzay5hZGRDbGFzcyhcInZ2LWdwLXJvb3RcIik7XG5cbiAgICAgICAgLy8gICAgIGNvbnN0IHNrU3VtbWFyeSA9IHNrLmNyZWF0ZUVsKFwic3VtbWFyeVwiLCB7IHRleHQ6IFwiU2hvcGtlZXBlclwiIH0pO1xuICAgICAgICAvLyAgICAgc2tTdW1tYXJ5LmFkZENsYXNzKFwidnYtZ3Atc3VtbWFyeVwiKTtcblxuICAgICAgICAvLyAgICAgY29uc3Qgc2tCb2R5ID0gc2suY3JlYXRlRGl2KHsgY2xzOiBcInZ2LWdwLXJvb3QtYm9keVwiIH0pO1xuXG4gICAgICAgIC8vICAgICAvLyBJbnN0YW50aWF0ZSBhbmQgcmVuZGVyIHRoZSBwYW5lbCBpbnRvIHNrQm9keVxuICAgICAgICAvLyAgICAgdGhpcy5zaG9wa2VlcGVyUGFuZWwgPSBuZXcgU2hvcGtlZXBlclBhbmVsKHRoaXMuYXBwLCBnZXRUb29sa2l0KHRoaXMuYXBwKSwgc2tCb2R5KTtcbiAgICAgICAgLy8gICAgIGF3YWl0IHRoaXMuc2hvcGtlZXBlclBhbmVsLnJlbmRlcigpO1xuICAgICAgICAvLyB9XG4gICAgfVxuXG4gICAgYXN5bmMgb25DbG9zZSgpIHtcbiAgICAgICAgdGhpcy5zaG9wa2VlcGVyUGFuZWw/LmRpc3Bvc2UoKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGFzeW5jIHJlbmRlckFkZFJvdygpIHtcbiAgICAgICAgY29uc3QgcGx1Z2luID0gZ2V0VG9vbGtpdCh0aGlzLmFwcCk7XG4gICAgICAgIGNvbnN0IHMgPSBwbHVnaW4/LnNldHRpbmdzPy5nYW1lcGxheSB8fCB7fTtcbiAgICAgICAgdGhpcy5hZGRSb3cuZW1wdHkoKTtcblxuICAgICAgICBjb25zdCB3cmFwID0gdGhpcy5hZGRSb3cuY3JlYXRlRGl2KHsgY2xzOiBcInZ2LWdwLWFkZHdyYXBcIiB9KTtcblxuICAgICAgICBjb25zdCBjb3VudCA9IChzLnNlbGVjdGVkUGxheWVycyB8fCBbXSkubGVuZ3RoO1xuICAgICAgICBjb25zdCB0cmlnZ2VyID0gd3JhcC5jcmVhdGVFbChcImJ1dHRvblwiLCB7IGNsczogXCJ2di1ncC1jaGVja2RkLXRyaWdnZXJcIiwgdGV4dDogYEFkZCBQbGF5ZXJzYCB9KTtcblxuICAgICAgICBjb25zdCBjbGVhckJ0biA9IHdyYXAuY3JlYXRlRWwoXCJidXR0b25cIiwgeyBjbHM6IFwidnYtZ3AtY2xlYXJhbGxcIiwgdGV4dDogXCJDbGVhciBBbGxcIiB9KTtcbiAgICAgICAgY2xlYXJCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuZW5zdXJlR2FtZXBsYXkoKS5zZWxlY3RlZFBsYXllcnMgPSBbXTtcbiAgICAgICAgICAgIGF3YWl0IHBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMucmVuZGVyVGFibGUoKTtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMucmVuZGVyQWRkUm93KCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGNvbnN0IHBhbmVsID0gdGhpcy5hZGRSb3cuY3JlYXRlRGl2KHsgY2xzOiBcInZ2LWdwLWNoZWNrZGQtcGFuZWxcIiB9KTtcblxuICAgICAgICBjb25zdCBmb2xkZXIgPSB0aGlzLmdldEFjdGl2ZUZvbGRlclByZWZpeCgpO1xuICAgICAgICBjb25zdCBmaWxlcyA9IHRoaXMuYXBwLnZhdWx0XG4gICAgICAgICAgICAuZ2V0TWFya2Rvd25GaWxlcygpXG4gICAgICAgICAgICAuZmlsdGVyKGYgPT4gZi5wYXRoLnN0YXJ0c1dpdGgoZm9sZGVyKSlcbiAgICAgICAgICAgIC5zb3J0KChhLCBiKSA9PiBhLmJhc2VuYW1lLmxvY2FsZUNvbXBhcmUoYi5iYXNlbmFtZSkpO1xuXG4gICAgICAgIGNvbnN0IHNlbGVjdGVkID0gbmV3IFNldDxzdHJpbmc+KHMuc2VsZWN0ZWRQbGF5ZXJzIHx8IFtdKTtcblxuICAgICAgICBjb25zdCB1cGRhdGVDb3VudExhYmVsID0gKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgbiA9IHNlbGVjdGVkLnNpemU7XG4gICAgICAgICAgICB0cmlnZ2VyLnRleHRDb250ZW50ID0gYFBsYXllcnMgKCR7bn0pYDtcbiAgICAgICAgfTtcblxuICAgICAgICBmb3IgKGNvbnN0IGYgb2YgZmlsZXMpIHtcbiAgICAgICAgICAgIGNvbnN0IHJvdyA9IHBhbmVsLmNyZWF0ZURpdih7IGNsczogXCJ2di1ncC1jaGVja2RkLXJvd1wiIH0pO1xuICAgICAgICAgICAgY29uc3QgaWQgPSBgZ3AtJHtmLnBhdGgucmVwbGFjZSgvW15cXHctXSsvZywgXCJfXCIpfWA7XG4gICAgICAgICAgICBjb25zdCBjYiA9IHJvdy5jcmVhdGVFbChcImlucHV0XCIsIHsgdHlwZTogXCJjaGVja2JveFwiLCBhdHRyOiB7IGlkIH0gfSkgYXMgSFRNTElucHV0RWxlbWVudDtcbiAgICAgICAgICAgIGNiLmNoZWNrZWQgPSBzZWxlY3RlZC5oYXMoZi5wYXRoKTtcbiAgICAgICAgICAgIGNvbnN0IGxhYiA9IHJvdy5jcmVhdGVFbChcImxhYmVsXCIsIHsgYXR0cjogeyBmb3I6IGlkIH0gfSk7XG4gICAgICAgICAgICBsYWIudGV4dENvbnRlbnQgPSBmLmJhc2VuYW1lO1xuXG4gICAgICAgICAgICBjYi5hZGRFdmVudExpc3RlbmVyKFwiY2hhbmdlXCIsIGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoY2IuY2hlY2tlZCkgc2VsZWN0ZWQuYWRkKGYucGF0aCk7IGVsc2Ugc2VsZWN0ZWQuZGVsZXRlKGYucGF0aCk7XG4gICAgICAgICAgICAgICAgdGhpcy5lbnN1cmVHYW1lcGxheSgpLnNlbGVjdGVkUGxheWVycyA9IEFycmF5LmZyb20oc2VsZWN0ZWQpO1xuICAgICAgICAgICAgICAgIGF3YWl0IHBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICB1cGRhdGVDb3VudExhYmVsKCk7XG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5yZW5kZXJUYWJsZSgpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBvcGVuID0gKCkgPT4ge1xuICAgICAgICAgICAgaWYgKHBhbmVsLmNsYXNzTGlzdC5jb250YWlucyhcIm9wZW5cIikpIHJldHVybjtcbiAgICAgICAgICAgIHBhbmVsLmNsYXNzTGlzdC5hZGQoXCJvcGVuXCIpO1xuICAgICAgICAgICAgY29uc3QgcmVjdCA9IHRyaWdnZXIuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICAgICAgICBjb25zdCBjb250YWluZXJSZWN0ID0gdGhpcy5jb250YWluZXJFbC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgICAgICAgIHBhbmVsLnN0eWxlLmxlZnQgPSBgJHtyZWN0LmxlZnQgLSBjb250YWluZXJSZWN0LmxlZnR9cHhgO1xuICAgICAgICAgICAgcGFuZWwuc3R5bGUudG9wID0gYCR7cmVjdC5ib3R0b20gLSBjb250YWluZXJSZWN0LnRvcCArIDR9cHhgO1xuXG4gICAgICAgICAgICBjb25zdCBvbkRvY0NsaWNrID0gKGV2OiBNb3VzZUV2ZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKHBhbmVsLmNvbnRhaW5zKGV2LnRhcmdldCBhcyBOb2RlKSB8fCB0cmlnZ2VyLmNvbnRhaW5zKGV2LnRhcmdldCBhcyBOb2RlKSkgcmV0dXJuO1xuICAgICAgICAgICAgICAgIGNsb3NlKCk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgY29uc3Qgb25Fc2MgPSAoZXY6IEtleWJvYXJkRXZlbnQpID0+IHsgaWYgKGV2LmtleSA9PT0gXCJFc2NhcGVcIikgY2xvc2UoKTsgfTtcbiAgICAgICAgICAgIGNvbnN0IGNsb3NlID0gKCkgPT4ge1xuICAgICAgICAgICAgICAgIHBhbmVsLmNsYXNzTGlzdC5yZW1vdmUoXCJvcGVuXCIpO1xuICAgICAgICAgICAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIiwgb25Eb2NDbGljaywgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgb25Fc2MsIHRydWUpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIC8vIHN0YXNoIGNsb3NlIHNvIHdlIGNhbiByZXVzZVxuICAgICAgICAgICAgKHBhbmVsIGFzIGFueSkuX2Nsb3NlID0gY2xvc2U7XG5cbiAgICAgICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIiwgb25Eb2NDbGljaywgdHJ1ZSk7XG4gICAgICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCBvbkVzYywgdHJ1ZSk7XG4gICAgICAgIH07XG5cbiAgICAgICAgdHJpZ2dlci5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgICAgICAgaWYgKHBhbmVsLmNsYXNzTGlzdC5jb250YWlucyhcIm9wZW5cIikpIChwYW5lbCBhcyBhbnkpLl9jbG9zZT8uKCk7IGVsc2Ugb3BlbigpO1xuICAgICAgICB9KTtcbiAgICB9XG5cblxuICAgIC8vIFx1MjUwMFx1MjUwMCBQYXJ0eSB0YWJsZSBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcbiAgICBwcml2YXRlIGFzeW5jIHJlbmRlclRhYmxlKCkge1xuICAgICAgICBjb25zdCBwbHVnaW4gPSBnZXRUb29sa2l0KHRoaXMuYXBwKTtcbiAgICAgICAgY29uc3QgcyA9IHBsdWdpbj8uc2V0dGluZ3M/LmdhbWVwbGF5IHx8IHt9O1xuICAgICAgICB0aGlzLnBhcnR5VGFibGVXcmFwIS5lbXB0eSgpO1xuXG4gICAgICAgIGNvbnN0IHBhdGhzOiBzdHJpbmdbXSA9IHMuc2VsZWN0ZWRQbGF5ZXJzIHx8IFtdO1xuICAgICAgICBpZiAoIXBhdGhzLmxlbmd0aCkge1xuICAgICAgICAgICAgdGhpcy5wYXJ0eVRhYmxlV3JhcCEuY3JlYXRlRWwoXCJkaXZcIiwgeyB0ZXh0OiBcIk5vIHBsYXllcnMgc2VsZWN0ZWQuXCIsIGNsczogXCJ2di1ncC1lbXB0eVwiIH0pO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3Qgcm93czogUGxheWVyUm93W10gPSBbXTtcbiAgICAgICAgZm9yIChjb25zdCBwIG9mIHBhdGhzKSB7XG4gICAgICAgICAgICBjb25zdCBmaWxlID0gdGhpcy5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKHApO1xuICAgICAgICAgICAgaWYgKCEoZmlsZSBpbnN0YW5jZW9mIFRGaWxlKSkgY29udGludWU7XG4gICAgICAgICAgICBjb25zdCBmbSA9IHRoaXMuYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0RmlsZUNhY2hlKGZpbGUpPy5mcm9udG1hdHRlciB8fCB7fTtcbiAgICAgICAgICAgIGNvbnN0IG5hbWUgPSAoZm1bXCJOYW1lXCJdID8/IGZpbGUuYmFzZW5hbWUpIGFzIHN0cmluZztcblxuICAgICAgICAgICAgY29uc3Qgd2lzID0gTnVtYmVyKGZtW1wid2lzZG9tXCJdID8/IDEwKTtcbiAgICAgICAgICAgIGNvbnN0IHdpc01vZCA9IE1hdGguZmxvb3IoKHdpcyAtIDEwKSAvIDIpO1xuICAgICAgICAgICAgY29uc3QgcHJvZiA9IE51bWJlcihcbiAgICAgICAgICAgICAgICBmbVtcIlByb2ZpY2llbmN5IGJvbnVzXCJdID8/IGZtW1wiUHJvZmljaWVuY3kgQm9udXNcIl0gPz8gMFxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIGNvbnN0IHJhd1NraWxscyA9IGZtW1wic2tpbGxzXCJdID8/IGZtW1wiU2tpbGwgUHJvZmljaWVuY2llc1wiXTtcbiAgICAgICAgICAgIGNvbnN0IHNraWxsc0Fycjogc3RyaW5nW10gPVxuICAgICAgICAgICAgICAgIEFycmF5LmlzQXJyYXkocmF3U2tpbGxzKSA/IHJhd1NraWxscy5tYXAoU3RyaW5nKSA6XG4gICAgICAgICAgICAgICAgICAgIHR5cGVvZiByYXdTa2lsbHMgPT09IFwic3RyaW5nXCIgPyByYXdTa2lsbHMuc3BsaXQoXCIsXCIpLm1hcChzID0+IHMudHJpbSgpKSA6XG4gICAgICAgICAgICAgICAgICAgICAgICBbXTtcbiAgICAgICAgICAgIGNvbnN0IGhhc1BlcmNlcHRpb24gPSBza2lsbHNBcnIuc29tZShzID0+IHMudG9Mb3dlckNhc2UoKSA9PT0gXCJwZXJjZXB0aW9uXCIpO1xuICAgICAgICAgICAgY29uc3QgcHAgPSAxMCArIHdpc01vZCArIChoYXNQZXJjZXB0aW9uID8gcHJvZiA6IDApO1xuXG4gICAgICAgICAgICBjb25zdCBhYyA9IChmbVtcImFjXCJdID8/IFwiTi9BXCIpICsgXCJcIjtcbiAgICAgICAgICAgIGNvbnN0IGhwTSA9IChmbVtcImhwXCJdID8/IFwiTi9BXCIpICsgXCJcIjtcbiAgICAgICAgICAgIGNvbnN0IGhwQyA9IChmbVtcImN1cnJlbnRfaHBcIl0gPz8gZm1bXCJocFwiXSA/PyBcIk4vQVwiKSArIFwiXCI7XG4gICAgICAgICAgICBjb25zdCBzcGRSYXcgPSAoZm1bXCJTcGVlZFwiXSA/PyBmbVtcInNwZWVkXCJdID8/IFwiXCIpICsgXCJcIjtcbiAgICAgICAgICAgIGNvbnN0IHNwZCA9IHNhbml0aXplU3BlZWQoc3BkUmF3KTtcbiAgICAgICAgICAgIGxldCBhbG5SYXcgPSAoZm1bXCJBbGlnbm1lbnRcIl0gPz8gZm1bXCJBbGlnbm5tZW50XCJdID8/IFwiXCIpICsgXCJcIjtcbiAgICAgICAgICAgIGxldCBhbG4gPSBcIlx1MjAxNFwiO1xuICAgICAgICAgICAgaWYgKGFsblJhdykge1xuICAgICAgICAgICAgICAgIGNvbnN0IGtleSA9IGFsblJhdy50b0xvd2VyQ2FzZSgpLnRyaW0oKTtcbiAgICAgICAgICAgICAgICBhbG4gPSBBTElHTl9BQkJSW2tleV0gPz8gYWxuUmF3O1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByb3dzLnB1c2goe1xuICAgICAgICAgICAgICAgIGZpbGUsIG5hbWUsXG4gICAgICAgICAgICAgICAgYWM6IGFjIHx8IFwiTi9BXCIsXG4gICAgICAgICAgICAgICAgaHBDdXI6IGhwQyB8fCBcIk4vQVwiLFxuICAgICAgICAgICAgICAgIGhwTWF4OiBocE0gfHwgXCJOL0FcIixcbiAgICAgICAgICAgICAgICBzcGVlZDogc3BkIHx8IFwiTi9BXCIsXG4gICAgICAgICAgICAgICAgYWxpZ246IGFsbixcbiAgICAgICAgICAgICAgICBwcFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICByb3dzLnNvcnQoKGEsIGIpID0+IGEubmFtZS5sb2NhbGVDb21wYXJlKGIubmFtZSkpO1xuXG4gICAgICAgIGNvbnN0IHRhYmxlID0gdGhpcy5wYXJ0eVRhYmxlV3JhcCEuY3JlYXRlRWwoXCJ0YWJsZVwiLCB7IGNsczogXCJ2di1ncC10YWJsZVwiIH0pO1xuICAgICAgICBjb25zdCBjZyA9IHRhYmxlLmNyZWF0ZUVsKFwiY29sZ3JvdXBcIik7XG4gICAgICAgIFtcbiAgICAgICAgICAgIFtcIm5hbWVcIiwgXCJcIl0sICAgICAgICAvLyBhdXRvIFx1MjE5MiBhYnNvcmJzIGxlZnRvdmVyIHNwYWNlXG4gICAgICAgICAgICBbXCJwcFwiLCBcInBwXCJdLFxuICAgICAgICAgICAgW1wiYWNcIiwgXCJhY1wiXSxcbiAgICAgICAgICAgIFtcImhwXCIsIFwiaHBcIl0sXG4gICAgICAgICAgICBbXCJzcGRcIiwgXCJzcGRcIl0sXG4gICAgICAgICAgICBbXCJhbG5cIiwgXCJhbG5cIl0sXG4gICAgICAgICAgICBbXCJybVwiLCBcInJtXCJdLCAgICAgICAgLy8gdGhlIHRpbnkgXHUwMEQ3IGNvbHVtblxuICAgICAgICBdLmZvckVhY2goKFtjbHNdKSA9PiBjZy5jcmVhdGVFbChcImNvbFwiLCB7IGNsczogYHZ2LWNvbC0ke2Nsc31gIH0pKTtcbiAgICAgICAgY29uc3QgdGhlYWQgPSB0YWJsZS5jcmVhdGVFbChcInRoZWFkXCIpO1xuICAgICAgICBjb25zdCB0ckggPSB0aGVhZC5jcmVhdGVFbChcInRyXCIpO1xuICAgICAgICBbXCJOYW1lXCIsIFwiUFBcIiwgXCJBQ1wiLCBcIkhQXCIsIFwiU3BkXCIsIFwiQWxpZ25cIl0uZm9yRWFjaChoID0+IHtcbiAgICAgICAgICAgIHRySC5jcmVhdGVFbChcInRoXCIsIHsgdGV4dDogaCB9KTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgY29uc3QgdGJvZHkgPSB0YWJsZS5jcmVhdGVFbChcInRib2R5XCIpO1xuICAgICAgICBmb3IgKGNvbnN0IHIgb2Ygcm93cykge1xuICAgICAgICAgICAgY29uc3QgdHIgPSB0Ym9keS5jcmVhdGVFbChcInRyXCIpO1xuXG4gICAgICAgICAgICAvLyBuYW1lXG4gICAgICAgICAgICBjb25zdCBuYW1lVGQgPSB0ci5jcmVhdGVFbChcInRkXCIpO1xuICAgICAgICAgICAgY29uc3QgYSA9IG5hbWVUZC5jcmVhdGVFbChcImFcIiwgeyB0ZXh0OiByLm5hbWUsIGhyZWY6IHIuZmlsZS5wYXRoIH0pO1xuICAgICAgICAgICAgYS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgYXN5bmMgKGUpID0+IHtcbiAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgLy8gQ21kL0N0cmwtY2xpY2sgc3RpbGwgb3BlbnMgdGhlIG5vdGVcbiAgICAgICAgICAgICAgICBpZiAoZS5tZXRhS2V5IHx8IGUuY3RybEtleSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmFwcC53b3Jrc3BhY2Uub3BlbkxpbmtUZXh0KHIuZmlsZS5wYXRoLCBcIlwiLCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5zaG93RGV0YWlscyhyLmZpbGUpO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIC8vIHJpZ2h0LWNsaWNrOiBvcGVuIG5vdGUgaW4gbmV3IHRhYlxuICAgICAgICAgICAgYS5hZGRFdmVudExpc3RlbmVyKFwiY29udGV4dG1lbnVcIiwgKGUpID0+IHtcbiAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgdGhpcy5hcHAud29ya3NwYWNlLm9wZW5MaW5rVGV4dChyLmZpbGUucGF0aCwgXCJcIiwgdHJ1ZSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGNvbnN0IGVuYWJsZVByZXZpZXcgPSAhIWdldFRvb2xraXQodGhpcy5hcHApPy5zZXR0aW5ncz8uZW5hYmxlU2lkZWJhclByZXZpZXdzO1xuICAgICAgICAgICAgYS5jbGFzc0xpc3QuYWRkKFwidnYtbGlua1wiKTtcbiAgICAgICAgICAgIGlmIChlbmFibGVQcmV2aWV3KSB7XG4gICAgICAgICAgICAgICAgYS5jbGFzc0xpc3QuYWRkKFwiaW50ZXJuYWwtbGlua1wiKTtcbiAgICAgICAgICAgICAgICBhLnNldEF0dHIoXCJkYXRhLWhyZWZcIiwgci5maWxlLnBhdGgpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBwcFxuICAgICAgICAgICAgdHIuY3JlYXRlRWwoXCJ0ZFwiLCB7IHRleHQ6IFN0cmluZyhyLnBwKSwgYXR0cjogeyBzdHlsZTogXCJ0ZXh0LWFsaWduOmNlbnRlcjsgd2hpdGUtc3BhY2U6bm93cmFwO1wiIH0gfSk7XG5cbiAgICAgICAgICAgIC8vIGFjXG4gICAgICAgICAgICB0ci5jcmVhdGVFbChcInRkXCIsIHsgdGV4dDogci5hYywgYXR0cjogeyBzdHlsZTogXCJ0ZXh0LWFsaWduOmNlbnRlcjsgd2hpdGUtc3BhY2U6bm93cmFwO1wiIH0gfSk7XG5cbiAgICAgICAgICAgIC8vIEhQIGNlbGwgKGVkaXRhYmxlIENVUiAvIHN0YXRpYyBNQVgpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgY29uc3QgdGQgPSB0ci5jcmVhdGVFbChcInRkXCIpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHdyYXAgPSB0ZC5jcmVhdGVEaXYoeyBjbHM6IFwidnYtZ3AtaHB3cmFwXCIsIGF0dHI6IHsgdGl0bGU6IFwiQ2xpY2sgdG8gZWRpdCBjdXJyZW50IEhQXCIgfSB9KTtcblxuICAgICAgICAgICAgICAgIC8vIGN1cnJlbnQgSFAgaW5wdXRcbiAgICAgICAgICAgICAgICBjb25zdCBjdXIgPSB3cmFwLmNyZWF0ZUVsKFwiaW5wdXRcIiwgeyB0eXBlOiBcInRleHRcIiwgY2xzOiBcInZ2LWdwLWhwY3VyXCIgfSkgYXMgSFRNTElucHV0RWxlbWVudDtcbiAgICAgICAgICAgICAgICBjdXIudmFsdWUgPSBTdHJpbmcoci5ocEN1ciA/PyBcIlwiKTtcbiAgICAgICAgICAgICAgICBjdXIuaW5wdXRNb2RlID0gXCJudW1lcmljXCI7XG4gICAgICAgICAgICAgICAgY3VyLnBhdHRlcm4gPSBcIlxcXFxkKlwiO1xuXG4gICAgICAgICAgICAgICAgLy8gc2VwYXJhdG9yIGFuZCBtYXhcbiAgICAgICAgICAgICAgICB3cmFwLmNyZWF0ZVNwYW4oeyB0ZXh0OiBcIi9cIiwgY2xzOiBcInZ2LWdwLWhwc2VwXCIgfSk7XG4gICAgICAgICAgICAgICAgd3JhcC5jcmVhdGVTcGFuKHsgdGV4dDogU3RyaW5nKHIuaHBNYXggPz8gXCJOL0FcIiksIGNsczogXCJ2di1ncC1ocG1heFwiIH0pO1xuXG4gICAgICAgICAgICAgICAgY29uc3QgY29tbWl0ID0gYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBjbGVhbmVkID0gY3VyLnZhbHVlLnRyaW0oKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEvXlxcZCskLy50ZXN0KGNsZWFuZWQpKSB7IG5ldyBOb3RpY2UoXCJIUCBtdXN0IGJlIGEgbnVtYmVyXCIpOyBjdXIudmFsdWUgPSBTdHJpbmcoci5ocEN1ciA/PyBcIlwiKTsgcmV0dXJuOyB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChjbGVhbmVkID09PSBTdHJpbmcoci5ocEN1ciA/PyBcIlwiKSkgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5zYXZlRnJvbnRtYXR0ZXJOdW1iZXIoci5maWxlLCBcImN1cnJlbnRfaHBcIiwgTnVtYmVyKGNsZWFuZWQpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHIuaHBDdXIgPSBjbGVhbmVkO1xuICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgbmV3IE5vdGljZShcIkZhaWxlZCB0byB1cGRhdGUgSFBcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICBjdXIudmFsdWUgPSBTdHJpbmcoci5ocEN1ciA/PyBcIlwiKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICBjdXIuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgKGV2KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChldi5rZXkgPT09IFwiRW50ZXJcIikgeyBldi5wcmV2ZW50RGVmYXVsdCgpOyAoZXYudGFyZ2V0IGFzIEhUTUxJbnB1dEVsZW1lbnQpLmJsdXIoKTsgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoZXYua2V5ID09PSBcIkVzY2FwZVwiKSB7IGV2LnByZXZlbnREZWZhdWx0KCk7IGN1ci52YWx1ZSA9IFN0cmluZyhyLmhwQ3VyID8/IFwiXCIpOyBjdXIuYmx1cigpOyB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgY3VyLmFkZEV2ZW50TGlzdGVuZXIoXCJibHVyXCIsIGNvbW1pdCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIHNwZWVkIC8gYWxpZ24gLyBsYW5nXG4gICAgICAgICAgICB0ci5jcmVhdGVFbChcInRkXCIsIHsgdGV4dDogci5zcGVlZCwgYXR0cjogeyBzdHlsZTogXCJ0ZXh0LWFsaWduOmNlbnRlcjsgd2hpdGUtc3BhY2U6bm93cmFwO1wiIH0gfSk7XG4gICAgICAgICAgICB0ci5jcmVhdGVFbChcInRkXCIsIHsgdGV4dDogci5hbGlnbiwgYXR0cjogeyBzdHlsZTogXCJ0ZXh0LWFsaWduOmNlbnRlcjsgd2hpdGUtc3BhY2U6bm93cmFwO1wiIH0gfSk7XG5cbiAgICAgICAgICAgIGNvbnN0IHJtVGQgPSB0ci5jcmVhdGVFbChcInRkXCIsIHsgY2xzOiBcInZ2LWdwLXJtY2VsbFwiIH0pO1xuXG4gICAgICAgICAgICBjb25zdCBybUJ0biA9IHJtVGQuY3JlYXRlRWwoXCJidXR0b25cIiwgeyB0ZXh0OiBcInhcIiwgY2xzOiBcInZ2LWdwLXJtLWJ0blwiIH0pO1xuICAgICAgICAgICAgcm1CdG4uc2V0QXR0cihcInRpdGxlXCIsIFwiUmVtb3ZlIGZyb20gcm9zdGVyXCIpO1xuXG4gICAgICAgICAgICBybUJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgYXN5bmMgKGUpID0+IHtcbiAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICAgICAgICAgICAgICBjb25zdCBwbHVnaW4gPSBnZXRUb29sa2l0KHRoaXMuYXBwKTtcbiAgICAgICAgICAgICAgICBjb25zdCBzID0gcGx1Z2luPy5zZXR0aW5ncz8uZ2FtZXBsYXkgfHwge307XG4gICAgICAgICAgICAgICAgY29uc3QgbGlzdDogc3RyaW5nW10gPSBzLnNlbGVjdGVkUGxheWVycyB8fCBbXTtcbiAgICAgICAgICAgICAgICBjb25zdCBpZHggPSBsaXN0LmluZGV4T2Yoci5maWxlLnBhdGgpO1xuXG4gICAgICAgICAgICAgICAgaWYgKGlkeCAhPT0gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgbGlzdC5zcGxpY2UoaWR4LCAxKTtcbiAgICAgICAgICAgICAgICAgICAgcGx1Z2luLnNldHRpbmdzLmdhbWVwbGF5LnNlbGVjdGVkUGxheWVycyA9IGxpc3Q7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcblxuICAgICAgICAgICAgICAgICAgICAvLyBJZiB0aGUgZHJvcGRvd24gaXMgb3BlbiwgY2xvc2UgaXQgdG8gY2xlYXIgaXRzIGRvY3VtZW50IGxpc3RlbmVyc1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBvcGVuUGFuZWwgPSB0aGlzLmNvbnRhaW5lckVsLnF1ZXJ5U2VsZWN0b3IoJy52di1ncC1jaGVja2RkLXBhbmVsLm9wZW4nKSBhcyBhbnk7XG4gICAgICAgICAgICAgICAgICAgIG9wZW5QYW5lbD8uX2Nsb3NlPy4oKTtcblxuICAgICAgICAgICAgICAgICAgICAvLyBSZXBhaW50IGJvdGggdmlld3Mgc28gdGhlIGNoZWNrYm94IHN0YXRlICsgY291bnQgbGFiZWwgdXBkYXRlXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucmVuZGVyVGFibGUoKTtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5yZW5kZXJBZGRSb3coKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHBhZ2VQcmV2aWV3ID0gKHRoaXMuYXBwIGFzIGFueSkuaW50ZXJuYWxQbHVnaW5zXG4gICAgICAgICAgICA/LmdldFBsdWdpbkJ5SWQ/LihcInBhZ2UtcHJldmlld1wiKVxuICAgICAgICAgICAgPy5pbnN0YW5jZTtcblxuICAgICAgICBjb25zdCBlbmFibGVQcmV2aWV3ID0gISFnZXRUb29sa2l0KHRoaXMuYXBwKT8uc2V0dGluZ3M/LmVuYWJsZVNpZGViYXJQcmV2aWV3cztcblxuICAgICAgICBpZiAodGhpcy5wYXJ0eVRhYmxlV3JhcCAmJiAodGhpcy5wYXJ0eVRhYmxlV3JhcCBhcyBhbnkpLl92dkhvdmVyV2lyZWQgJiYgIWVuYWJsZVByZXZpZXcpIHtcbiAgICAgICAgICAgIGNvbnN0IHByZXYgPSAodGhpcy5wYXJ0eVRhYmxlV3JhcCBhcyBhbnkpLl92dkhvdmVySGFuZGxlciBhcyAoKGV2OiBNb3VzZUV2ZW50KSA9PiB2b2lkKSB8IHVuZGVmaW5lZDtcbiAgICAgICAgICAgIGlmIChwcmV2KSB0aGlzLnBhcnR5VGFibGVXcmFwLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIHByZXYpO1xuICAgICAgICAgICAgZGVsZXRlICh0aGlzLnBhcnR5VGFibGVXcmFwIGFzIGFueSkuX3Z2SG92ZXJXaXJlZDtcbiAgICAgICAgICAgIGRlbGV0ZSAodGhpcy5wYXJ0eVRhYmxlV3JhcCBhcyBhbnkpLl92dkhvdmVySGFuZGxlcjtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChwYWdlUHJldmlldz8ub25MaW5rSG92ZXIgJiYgZW5hYmxlUHJldmlldyAmJiB0aGlzLnBhcnR5VGFibGVXcmFwICYmICEodGhpcy5wYXJ0eVRhYmxlV3JhcCBhcyBhbnkpLl92dkhvdmVyV2lyZWQpIHtcbiAgICAgICAgICAgICh0aGlzLnBhcnR5VGFibGVXcmFwIGFzIGFueSkuX3Z2SG92ZXJXaXJlZCA9IHRydWU7XG4gICAgICAgICAgICBjb25zdCBoYW5kbGVyID0gKGV2OiBNb3VzZUV2ZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgdCA9IGV2LnRhcmdldCBhcyBIVE1MRWxlbWVudCB8IG51bGw7XG4gICAgICAgICAgICAgICAgY29uc3QgYSA9IHQ/LmNsb3Nlc3QoXCJhLmludGVybmFsLWxpbmtcIikgYXMgSFRNTEFuY2hvckVsZW1lbnQgfCBudWxsO1xuICAgICAgICAgICAgICAgIGlmICghYSkgcmV0dXJuO1xuICAgICAgICAgICAgICAgIGNvbnN0IGxpbmtUZXh0ID0gYS5nZXRBdHRyaWJ1dGUoXCJkYXRhLWhyZWZcIikgfHwgYS5nZXRBdHRyaWJ1dGUoXCJocmVmXCIpO1xuICAgICAgICAgICAgICAgIGlmICghbGlua1RleHQpIHJldHVybjtcbiAgICAgICAgICAgICAgICBwYWdlUHJldmlldy5vbkxpbmtIb3ZlcihldiwgYSwgbGlua1RleHQsIGEuZ2V0QXR0cmlidXRlKFwiaHJlZlwiKSB8fCBcIlwiKTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIHRoaXMucGFydHlUYWJsZVdyYXAuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlbW92ZVwiLCBoYW5kbGVyKTtcbiAgICAgICAgICAgICh0aGlzLnBhcnR5VGFibGVXcmFwIGFzIGFueSkuX3Z2SG92ZXJXaXJlZCA9IHRydWU7XG4gICAgICAgICAgICAodGhpcy5wYXJ0eVRhYmxlV3JhcCBhcyBhbnkpLl92dkhvdmVySGFuZGxlciA9IGhhbmRsZXI7XG5cbiAgICAgICAgfVxuICAgIH1cbn1cbiIsICIvLyBtb2RhbEZvcm1zVXBkYXRlci50c1xuaW1wb3J0IHsgQXBwLCBub3JtYWxpemVQYXRoLCBOb3RpY2UgfSBmcm9tIFwib2JzaWRpYW5cIjtcblxuLyoqIFNoYXBlcyB3ZSBjYXJlIGFib3V0IGZyb20gTW9kYWwgRm9ybXMnIGRhdGEuanNvbiAqL1xudHlwZSBNRklucHV0ID1cbiAgfCB7IHR5cGU6IFwidGV4dFwiIHwgXCJ0ZXh0YXJlYVwiIHwgXCJudW1iZXJcIiB8IFwiZGF0ZVwiIHwgXCJpbWFnZVwiIHwgXCJ0b2dnbGVcIiB8IFwic2xpZGVyXCI7IGhpZGRlbj86IGJvb2xlYW47IFtrOiBzdHJpbmddOiBhbnkgfVxuICB8IHsgdHlwZTogXCJzZWxlY3RcIjsgc291cmNlOiBcImZpeGVkXCIgfCBcIm5vdGVzXCIgfCBcImRhdGF2aWV3XCI7IG9wdGlvbnM/OiBBcnJheTx7IHZhbHVlOiBzdHJpbmc7IGxhYmVsOiBzdHJpbmcgfT47IFtrOiBzdHJpbmddOiBhbnkgfVxuICB8IHsgdHlwZTogXCJtdWx0aXNlbGVjdFwiOyBzb3VyY2U6IFwiZml4ZWRcIiB8IFwibm90ZXNcIiB8IFwiZGF0YXZpZXdcIjsgbXVsdGlfc2VsZWN0X29wdGlvbnM/OiBzdHJpbmdbXTsgYWxsb3dVbmtub3duVmFsdWVzPzogYm9vbGVhbjsgW2s6IHN0cmluZ106IGFueSB9XG4gIHwgeyB0eXBlOiBcImRhdGF2aWV3XCI7IHF1ZXJ5OiBzdHJpbmc7IFtrOiBzdHJpbmddOiBhbnkgfTtcblxuaW50ZXJmYWNlIE1GRmllbGQge1xuICBuYW1lOiBzdHJpbmc7XG4gIGxhYmVsPzogc3RyaW5nO1xuICBkZXNjcmlwdGlvbj86IHN0cmluZztcbiAgaXNSZXF1aXJlZD86IGJvb2xlYW47XG4gIGlucHV0OiBNRklucHV0O1xuICBjb25kaXRpb24/OiB7IGRlcGVuZGVuY3lOYW1lOiBzdHJpbmc7IHR5cGU6IHN0cmluZzsgdmFsdWU6IGFueSB9O1xufVxuXG5pbnRlcmZhY2UgTUZGb3JtRGVmIHtcbiAgdGl0bGU6IHN0cmluZztcbiAgbmFtZTogc3RyaW5nOyAgICAgICAgICAgICAgIC8vIGlkZW50aXR5IGtleSB3ZSBtYXRjaCBvblxuICBjdXN0b21DbGFzc25hbWU/OiBzdHJpbmc7XG4gIGZpZWxkczogTUZGaWVsZFtdO1xuICB2ZXJzaW9uPzogc3RyaW5nOyAgICAgICAgICAgLy8gcmVwbyBjYW4gYnVtcCB0aGlzIHdoZW4gaXQgY2hhbmdlc1xuICBbazogc3RyaW5nXTogYW55OyAgICAgICAgICAgLy8gZnV0dXJlLXByb29mXG59XG5cbmludGVyZmFjZSBNRkRhdGFGaWxlIHtcbiAgZWRpdG9yUG9zaXRpb24/OiBzdHJpbmc7XG4gIGF0dGFjaFNob3J0Y3V0VG9HbG9iYWxXaW5kb3c/OiBib29sZWFuO1xuICBnbG9iYWxOYW1lc3BhY2U/OiBzdHJpbmc7XG4gIGZvcm1EZWZpbml0aW9uczogTUZGb3JtRGVmW107XG4gIFtrOiBzdHJpbmddOiBhbnk7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgTUZVcGRhdGVyT3B0aW9ucyB7XG4gIC8qKiBSYXcgVVJMIHRvIHlvdXIgdXBzdHJlYW0gZGF0YS5qc29uIGluIHRoZSByZXBvICovXG4gIHVwc3RyZWFtVXJsPzogc3RyaW5nO1xuICAvKipcbiAgICogRm9ybXMgXCJvd25lZFwiIGJ5IFZWIChvbmx5IHRoZXNlIGdldCByZXBsYWNlZCBmcm9tIHVwc3RyZWFtKS5cbiAgICogTWF0Y2hpbmcgaXMgYnkgZXhhY3QgYG5hbWVgLlxuICAgKi9cbiAgb3duZWRGb3JtTmFtZXM/OiBzdHJpbmdbXTtcbiAgLyoqIE1ha2UgYSB0aW1lc3RhbXBlZCAuYmFrIGZpbGUgbmV4dCB0byBkYXRhLmpzb24gYmVmb3JlIHdyaXRpbmcgKGRlZmF1bHQ6IHRydWUpICovXG4gIG1ha2VCYWNrdXA/OiBib29sZWFuO1xuICAvKiogU2hvdyBOb3RpY2VzIGZvciBzdWNjZXNzL2ZhaWx1cmUgKGRlZmF1bHQ6IHRydWUpICovXG4gIG5vdGlmeT86IGJvb2xlYW47XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgTUZNZXJnZVJlcG9ydCB7XG4gIG1vZGFsRm9ybXNQYXRoOiBzdHJpbmc7XG4gIHJlcGxhY2VkRm9ybXM6IHN0cmluZ1tdO1xuICBhZGRlZEZvcm1zOiBzdHJpbmdbXTsgICAgIC8vIG93bmVkIGZvcm0gd2FzIG1pc3NpbmcgbG9jYWxseSwgc28gd2UgYWRkZWQgaXRcbiAga2VwdFVzZXJGb3JtczogbnVtYmVyO1xuICB0b3RhbEFmdGVyOiBudW1iZXI7XG59XG5cbi8qKiBTZW5zaWJsZSBkZWZhdWx0cyB5b3UgY2FuIHR3ZWFrICovXG5jb25zdCBERUZBVUxUUzogUmVxdWlyZWQ8TUZVcGRhdGVyT3B0aW9ucz4gPSB7XG4gIHVwc3RyZWFtVXJsOlxuICAgIFwiaHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tL3NsYW13aXNlMDAwMS9WVnVuZGVybG9yZS1Ub29sa2l0LUZ1bGwvbWFpbi8ub2JzaWRpYW4vcGx1Z2lucy9tb2RhbGZvcm1zL2RhdGEuanNvblwiLFxuICBvd25lZEZvcm1OYW1lczogW1xuICAgIFwibmV4dC1zZXNzaW9uLWRhdGVcIixcbiAgICBcIm5ldy1jcmVhdHVyZVwiLFxuICAgIFwibmV3LWl0ZW0tZm9ybVwiLFxuICAgIFwibmV3LW5wYy1mb3JtXCIsXG4gICAgXCJuZXctcGxhY2UtZm9ybVwiLFxuICAgIFwibmV3LXBsYXllci1jaGFyYWN0ZXJcIixcbiAgXSxcbiAgbWFrZUJhY2t1cDogdHJ1ZSxcbiAgbm90aWZ5OiB0cnVlLFxufTtcblxuLyoqXG4gKiBFbnRyeSBwb2ludCB5b3UgY2FsbCBmcm9tIG1haW4udHMgdXBkYXRlIGZsb3cuXG4gKiAtIEZpbmRzIE1vZGFsIEZvcm1zIHBsdWdpbiBkYXRhLmpzb25cbiAqIC0gRmV0Y2hlcyB1cHN0cmVhbSBkYXRhLmpzb25cbiAqIC0gUmVwbGFjZXMgT05MWSBWVi1vd25lZCBmb3JtcyBieSBgbmFtZWBcbiAqIC0gTGVhdmVzIHVzZXItY3JlYXRlZC9lZGl0ZWQgZm9ybXMgYWxvbmVcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHVwZGF0ZU1vZGFsRm9ybXNGcm9tUmVwbyhcbiAgYXBwOiBBcHAsXG4gIG9wdHM6IE1GVXBkYXRlck9wdGlvbnMgPSB7fVxuKTogUHJvbWlzZTxNRk1lcmdlUmVwb3J0IHwgbnVsbD4ge1xuICBjb25zdCBjZmcgPSB7IC4uLkRFRkFVTFRTLCAuLi5vcHRzIH07XG5cbiAgLy8gMSkgTG9jYXRlIE1vZGFsIEZvcm1zIHBsdWdpbiBkYXRhLmpzb24gb24gZGlza1xuICBjb25zdCBtZlBhdGggPSBhd2FpdCBmaW5kTW9kYWxGb3Jtc0RhdGFQYXRoKGFwcCk7XG4gIGlmICghbWZQYXRoKSB7XG4gICAgaWYgKGNmZy5ub3RpZnkpIG5ldyBOb3RpY2UoXCJcdTI2QTBcdUZFMEYgQ291bGQgbm90IGZpbmQgTW9kYWwgRm9ybXMgcGx1Z2luIGRhdGEuanNvbi5cIik7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICAvLyAyKSBSZWFkIGxvY2FsIE1GIGRhdGEgZmlsZVxuICBjb25zdCBsb2NhbFJhdyA9IGF3YWl0IHNhZmVSZWFkKGFwcCwgbWZQYXRoKTtcbiAgaWYgKCFsb2NhbFJhdykge1xuICAgIGlmIChjZmcubm90aWZ5KSBuZXcgTm90aWNlKGBcdTI2QTBcdUZFMEYgRmFpbGVkIHRvIHJlYWQ6ICR7bWZQYXRofWApO1xuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgbGV0IGxvY2FsRGF0YTogTUZEYXRhRmlsZTtcbiAgdHJ5IHtcbiAgICBsb2NhbERhdGEgPSBKU09OLnBhcnNlKGxvY2FsUmF3KTtcbiAgICBpZiAoIUFycmF5LmlzQXJyYXkobG9jYWxEYXRhLmZvcm1EZWZpbml0aW9ucykpIHRocm93IG5ldyBFcnJvcihcIkJhZCBzdHJ1Y3R1cmVcIik7XG4gIH0gY2F0Y2gge1xuICAgIGlmIChjZmcubm90aWZ5KSBuZXcgTm90aWNlKFwiXHUyNkEwXHVGRTBGIE1vZGFsIEZvcm1zIGRhdGEuanNvbiBpcyBub3QgdmFsaWQgSlNPTi5cIik7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICAvLyAzKSBGZXRjaCB1cHN0cmVhbVxuICBjb25zdCB1cHN0cmVhbURhdGEgPSBhd2FpdCBmZXRjaFVwc3RyZWFtTUYoY2ZnLnVwc3RyZWFtVXJsKTtcbiAgaWYgKCF1cHN0cmVhbURhdGEpIHtcbiAgICBpZiAoY2ZnLm5vdGlmeSkgbmV3IE5vdGljZShcIlx1MjZBMFx1RkUwRiBDb3VsZCBub3QgZmV0Y2ggdXBzdHJlYW0gTW9kYWwgRm9ybXMgZGF0YS5qc29uLlwiKTtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIC8vIDQpIE1lcmdlIChyZXBsYWNlIG93bmVkIGZvcm1zIG9ubHkpXG4gIGNvbnN0IG93bmVkU2V0ID0gbmV3IFNldCgoY2ZnLm93bmVkRm9ybU5hbWVzIHx8IFtdKS5tYXAoKG4pID0+IG4udHJpbSgpKS5maWx0ZXIoQm9vbGVhbikpO1xuICBjb25zdCByZXN1bHQgPSBtZXJnZUJ5T3duZWROYW1lcyhsb2NhbERhdGEsIHVwc3RyZWFtRGF0YSwgb3duZWRTZXQpO1xuXG4gIC8vIDUpIElmIG5vdGhpbmcgY2hhbmdlZCwgYmFpbFxuICBjb25zdCBjaGFuZ2VkID0gcmVzdWx0LnJlcGxhY2VkRm9ybXMubGVuZ3RoID4gMCB8fCByZXN1bHQuYWRkZWRGb3Jtcy5sZW5ndGggPiAwO1xuICBpZiAoIWNoYW5nZWQpIHtcbiAgICBpZiAoY2ZnLm5vdGlmeSkgbmV3IE5vdGljZShcIk1vZGFsIEZvcm1zOiBubyBjaGFuZ2VzIG5lZWRlZC5cIik7XG4gICAgcmV0dXJuIHtcbiAgICAgIG1vZGFsRm9ybXNQYXRoOiBtZlBhdGgsXG4gICAgICAuLi5yZXN1bHQsXG4gICAgICB0b3RhbEFmdGVyOiAobG9jYWxEYXRhLmZvcm1EZWZpbml0aW9ucyB8fCBbXSkubGVuZ3RoLFxuICAgIH07XG4gIH1cblxuICAvLyA2KSBCYWNrdXAsIHRoZW4gd3JpdGVcbiAgaWYgKGNmZy5tYWtlQmFja3VwKSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGJhY2t1cFBhdGggPSBtZlBhdGgucmVwbGFjZSgvXFwuanNvbiQvaSwgXCJcIikgKyBcIi5cIiArIHRpbWVTdGFtcCgpICsgXCIuYmFrLmpzb25cIjtcbiAgICAgIGF3YWl0IGFwcC52YXVsdC5hZGFwdGVyLndyaXRlKGJhY2t1cFBhdGgsIEpTT04uc3RyaW5naWZ5KGxvY2FsRGF0YSwgbnVsbCwgMikpO1xuICAgIH0gY2F0Y2gge1xuICAgICAgLy8gbm9uLWZhdGFsXG4gICAgfVxuICB9XG5cbiAgY29uc3QgbmV3RGF0YTogTUZEYXRhRmlsZSA9IHtcbiAgICAuLi5sb2NhbERhdGEsXG4gICAgZm9ybURlZmluaXRpb25zOiByZXN1bHQubWVyZ2VkLFxuICB9O1xuXG4gIGF3YWl0IGFwcC52YXVsdC5hZGFwdGVyLndyaXRlKG1mUGF0aCwgSlNPTi5zdHJpbmdpZnkobmV3RGF0YSwgbnVsbCwgMikpO1xuXG4gIGlmIChjZmcubm90aWZ5KSB7XG4gICAgY29uc3Qgbm90ZUJpdHMgPSBbXTtcbiAgICBpZiAocmVzdWx0LnJlcGxhY2VkRm9ybXMubGVuZ3RoKSBub3RlQml0cy5wdXNoKGByZXBsYWNlZDogJHtyZXN1bHQucmVwbGFjZWRGb3Jtcy5sZW5ndGh9YCk7XG4gICAgaWYgKHJlc3VsdC5hZGRlZEZvcm1zLmxlbmd0aCkgbm90ZUJpdHMucHVzaChgYWRkZWQ6ICR7cmVzdWx0LmFkZGVkRm9ybXMubGVuZ3RofWApO1xuICB9XG5cbiAgcmV0dXJuIHtcbiAgICBtb2RhbEZvcm1zUGF0aDogbWZQYXRoLFxuICAgIHJlcGxhY2VkRm9ybXM6IHJlc3VsdC5yZXBsYWNlZEZvcm1zLFxuICAgIGFkZGVkRm9ybXM6IHJlc3VsdC5hZGRlZEZvcm1zLFxuICAgIGtlcHRVc2VyRm9ybXM6IHJlc3VsdC5rZXB0VXNlckZvcm1zLFxuICAgIHRvdGFsQWZ0ZXI6IHJlc3VsdC5tZXJnZWQubGVuZ3RoLFxuICB9O1xufVxuXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gaW50ZXJuYWxzIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5cbmFzeW5jIGZ1bmN0aW9uIHNhZmVSZWFkKGFwcDogQXBwLCBwYXRoOiBzdHJpbmcpOiBQcm9taXNlPHN0cmluZyB8IG51bGw+IHtcbiAgdHJ5IHtcbiAgICByZXR1cm4gYXdhaXQgYXBwLnZhdWx0LmFkYXB0ZXIucmVhZChwYXRoKTtcbiAgfSBjYXRjaCB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbn1cblxuLyoqIFRyeSB0byBmaW5kIHRoZSBNb2RhbCBGb3JtcyBwbHVnaW4gZm9sZGVyIGJ5IGhldXJpc3RpY3MgKi9cbmFzeW5jIGZ1bmN0aW9uIGZpbmRNb2RhbEZvcm1zRGF0YVBhdGgoYXBwOiBBcHApOiBQcm9taXNlPHN0cmluZyB8IG51bGw+IHtcbiAgY29uc3QgcGx1Z3NEaXIgPSBub3JtYWxpemVQYXRoKGAke2FwcC52YXVsdC5jb25maWdEaXJ9L3BsdWdpbnNgKTtcbiAgdHJ5IHtcbiAgICBjb25zdCBsaXN0aW5nID0gYXdhaXQgKGFwcC52YXVsdC5hZGFwdGVyIGFzIGFueSkubGlzdChwbHVnc0Rpcik7XG4gICAgY29uc3QgZm9sZGVyQ2FuZGlkYXRlczogc3RyaW5nW10gPSBbXG4gICAgICAvLyBoZXVyaXN0aWMgaWRzIHBlb3BsZSB1c2VcbiAgICAgIFwib2JzaWRpYW4tbW9kYWwtZm9ybXNcIixcbiAgICAgIFwibW9kYWxmb3Jtc1wiLFxuICAgICAgXCJvYnNpZGlhbi1tb2RhbGZvcm1zXCIsXG4gICAgICBcIm1vZGFsLWZvcm1zXCIsXG4gICAgXTtcblxuICAgIC8vIDEpIElmIHdlIGNhbiBsaXN0IGZvbGRlcnMsIHRyeSB0byBtYXRjaCBieSBtYW5pZmVzdCBuYW1lL2lkXG4gICAgaWYgKGxpc3RpbmcgJiYgQXJyYXkuaXNBcnJheShsaXN0aW5nLmZvbGRlcnMpKSB7XG4gICAgICAvLyB0cnkgYSBcdTIwMUNzbWFydFx1MjAxRCBzY2FuOiByZWFkIG1hbmlmZXN0Lmpzb24gYW5kIG1hdGNoIHBsdWdpbiBuYW1lL2lkXG4gICAgICBmb3IgKGNvbnN0IGYgb2YgbGlzdGluZy5mb2xkZXJzIGFzIHN0cmluZ1tdKSB7XG4gICAgICAgIGNvbnN0IG1hbmlmZXN0UGF0aCA9IG5vcm1hbGl6ZVBhdGgoYCR7Zn0vbWFuaWZlc3QuanNvbmApO1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGNvbnN0IHJhdyA9IGF3YWl0IGFwcC52YXVsdC5hZGFwdGVyLnJlYWQobWFuaWZlc3RQYXRoKTtcbiAgICAgICAgICBjb25zdCBtYW4gPSBKU09OLnBhcnNlKHJhdyk7XG4gICAgICAgICAgY29uc3QgaWQ6IHN0cmluZyA9IFN0cmluZyhtYW4/LmlkID8/IFwiXCIpLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgICAgY29uc3QgbmFtZTogc3RyaW5nID0gU3RyaW5nKG1hbj8ubmFtZSA/PyBcIlwiKS50b0xvd2VyQ2FzZSgpO1xuICAgICAgICAgIGlmIChcbiAgICAgICAgICAgIGlkLmluY2x1ZGVzKFwibW9kYWxcIikgJiYgaWQuaW5jbHVkZXMoXCJmb3JtXCIpIHx8XG4gICAgICAgICAgICBuYW1lLmluY2x1ZGVzKFwibW9kYWxcIikgJiYgbmFtZS5pbmNsdWRlcyhcImZvcm1cIilcbiAgICAgICAgICApIHtcbiAgICAgICAgICAgIGNvbnN0IGRhdGFQYXRoID0gbm9ybWFsaXplUGF0aChgJHtmfS9kYXRhLmpzb25gKTtcbiAgICAgICAgICAgIGNvbnN0IGV4aXN0cyA9IGF3YWl0IGFwcC52YXVsdC5hZGFwdGVyLmV4aXN0cyhkYXRhUGF0aCk7XG4gICAgICAgICAgICBpZiAoZXhpc3RzKSByZXR1cm4gZGF0YVBhdGg7XG4gICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoIHtcbiAgICAgICAgICAvKiBpZ25vcmUgKi9cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyAyKSBGYWxsYmFjayB0byBjb21tb24gaWRzXG4gICAgICBmb3IgKGNvbnN0IGlkIG9mIGZvbGRlckNhbmRpZGF0ZXMpIHtcbiAgICAgICAgY29uc3QgZGF0YVBhdGggPSBub3JtYWxpemVQYXRoKGAke3BsdWdzRGlyfS8ke2lkfS9kYXRhLmpzb25gKTtcbiAgICAgICAgaWYgKGF3YWl0IGFwcC52YXVsdC5hZGFwdGVyLmV4aXN0cyhkYXRhUGF0aCkpIHJldHVybiBkYXRhUGF0aDtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgLy8gSWYgd2UgY2Fubm90IGxpc3QsIGp1c3QgdHJ5IGNvbW1vbiBpZHNcbiAgICAgIGZvciAoY29uc3QgaWQgb2YgZm9sZGVyQ2FuZGlkYXRlcykge1xuICAgICAgICBjb25zdCBkYXRhUGF0aCA9IG5vcm1hbGl6ZVBhdGgoYCR7cGx1Z3NEaXJ9LyR7aWR9L2RhdGEuanNvbmApO1xuICAgICAgICBpZiAoYXdhaXQgYXBwLnZhdWx0LmFkYXB0ZXIuZXhpc3RzKGRhdGFQYXRoKSkgcmV0dXJuIGRhdGFQYXRoO1xuICAgICAgfVxuICAgIH1cbiAgfSBjYXRjaCB7XG4gICAgLyogaWdub3JlICovXG4gIH1cbiAgcmV0dXJuIG51bGw7XG59XG5cbi8qKiBGZXRjaCB1cHN0cmVhbSBkYXRhLmpzb24gZnJvbSB5b3VyIHJlcG8gKi9cbmFzeW5jIGZ1bmN0aW9uIGZldGNoVXBzdHJlYW1NRih1cmw6IHN0cmluZyk6IFByb21pc2U8TUZEYXRhRmlsZSB8IG51bGw+IHtcbiAgdHJ5IHtcbiAgICBjb25zdCByZXMgPSBhd2FpdCBmZXRjaCh1cmwpO1xuICAgIGlmICghcmVzLm9rKSByZXR1cm4gbnVsbDtcbiAgICBjb25zdCB1cHN0cmVhbSA9IChhd2FpdCByZXMuanNvbigpKSBhcyBNRkRhdGFGaWxlO1xuICAgIGlmICghdXBzdHJlYW0gfHwgIUFycmF5LmlzQXJyYXkodXBzdHJlYW0uZm9ybURlZmluaXRpb25zKSkgcmV0dXJuIG51bGw7XG4gICAgcmV0dXJuIHVwc3RyZWFtO1xuICB9IGNhdGNoIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxufVxuXG4vKipcbiAqIE1lcmdlIGxvZ2ljOlxuICogLSBLZWVwIEFMTCBsb2NhbCBmb3JtcyB3aG9zZSBgbmFtZWAgaXMgTk9UIGluIG93bmVkU2V0ICh1c2VyIGZvcm1zKS5cbiAqIC0gUmVwbGFjZSBsb2NhbCBmb3JtcyB3aG9zZSBgbmFtZWAgSVMgaW4gb3duZWRTZXQgd2l0aCB1cHN0cmVhbSB2ZXJzaW9ucyAoaWYgcHJlc2VudCB1cHN0cmVhbSkuXG4gKiAtIElmIGFuIG93bmVkIGZvcm0gaXMgbWlzc2luZyBsb2NhbGx5IGJ1dCBwcmVzZW50IHVwc3RyZWFtLCBBREQgaXQuXG4gKiBSZXR1cm5zIG1lcmdlZCBsaXN0IGFuZCBhIHNtYWxsIHJlcG9ydC5cbiAqL1xuZnVuY3Rpb24gbWVyZ2VCeU93bmVkTmFtZXMoXG4gIGxvY2FsOiBNRkRhdGFGaWxlLFxuICB1cHN0cmVhbTogTUZEYXRhRmlsZSxcbiAgb3duZWRTZXQ6IFNldDxzdHJpbmc+XG4pOiB7IG1lcmdlZDogTUZGb3JtRGVmW107IHJlcGxhY2VkRm9ybXM6IHN0cmluZ1tdOyBhZGRlZEZvcm1zOiBzdHJpbmdbXTsga2VwdFVzZXJGb3JtczogbnVtYmVyIH0ge1xuICBjb25zdCBsb2NhbEZvcm1zID0gQXJyYXkuaXNBcnJheShsb2NhbC5mb3JtRGVmaW5pdGlvbnMpID8gbG9jYWwuZm9ybURlZmluaXRpb25zIDogW107XG4gIGNvbnN0IHVwc3RyZWFtRm9ybXMgPSBBcnJheS5pc0FycmF5KHVwc3RyZWFtLmZvcm1EZWZpbml0aW9ucykgPyB1cHN0cmVhbS5mb3JtRGVmaW5pdGlvbnMgOiBbXTtcblxuICBjb25zdCB1cHN0cmVhbUJ5TmFtZSA9IG5ldyBNYXA8c3RyaW5nLCBNRkZvcm1EZWY+KCk7XG4gIGZvciAoY29uc3QgZiBvZiB1cHN0cmVhbUZvcm1zKSB1cHN0cmVhbUJ5TmFtZS5zZXQoZi5uYW1lLCBmKTtcblxuICBjb25zdCBrZXB0OiBNRkZvcm1EZWZbXSA9IFtdO1xuICBjb25zdCByZXBsYWNlZDogc3RyaW5nW10gPSBbXTtcbiAgbGV0IGtlcHRVc2VycyA9IDA7XG5cbiAgLy8gS2VlcCBvbmx5IG5vbi1vd25lZCBsb2NhbCBmb3JtcyAodXNlciBzdHVmZilcbiAgZm9yIChjb25zdCBsZiBvZiBsb2NhbEZvcm1zKSB7XG4gICAgaWYgKCFvd25lZFNldC5oYXMobGYubmFtZSkpIHtcbiAgICAgIGtlcHQucHVzaChsZik7XG4gICAgICBrZXB0VXNlcnMrKztcbiAgICB9XG4gIH1cblxuICAvLyBOb3cgbGF5IGluIGFsbCBvd25lZCB1cHN0cmVhbSBmb3JtcyAocmVwbGFjZSAvIGFkZClcbiAgY29uc3QgYWRkZWQ6IHN0cmluZ1tdID0gW107XG4gIGZvciAoY29uc3QgbmFtZSBvZiBvd25lZFNldCkge1xuICAgIGNvbnN0IHVmID0gdXBzdHJlYW1CeU5hbWUuZ2V0KG5hbWUpO1xuICAgIGlmICghdWYpIGNvbnRpbnVlOyAvLyBpZiBub3QgaW4gdXBzdHJlYW0sIHNraXAgc2lsZW50bHlcbiAgICAvLyBJZiB3ZSBoYWQgYSBsb2NhbCBvd25lZCBmb3JtLCBpdCdzIHJlcGxhY2VkOyBvdGhlcndpc2UgaXQncyBhZGRlZFxuICAgIGNvbnN0IGhhZExvY2FsID0gbG9jYWxGb3Jtcy5zb21lKChsZikgPT4gbGYubmFtZSA9PT0gbmFtZSk7XG4gICAgaWYgKGhhZExvY2FsKSByZXBsYWNlZC5wdXNoKG5hbWUpO1xuICAgIGVsc2UgYWRkZWQucHVzaChuYW1lKTtcbiAgICBrZXB0LnB1c2godWYpO1xuICB9XG5cbiAgcmV0dXJuIHtcbiAgICBtZXJnZWQ6IGtlcHQsXG4gICAgcmVwbGFjZWRGb3JtczogcmVwbGFjZWQsXG4gICAgYWRkZWRGb3JtczogYWRkZWQsXG4gICAga2VwdFVzZXJGb3Jtczoga2VwdFVzZXJzLFxuICB9O1xufVxuXG4vKiogZS5nLiwgMjAyNS0wMS0zMV8xNC0wNy0wNSAqL1xuZnVuY3Rpb24gdGltZVN0YW1wKCk6IHN0cmluZyB7XG4gIGNvbnN0IGQgPSBuZXcgRGF0ZSgpO1xuICBjb25zdCBwYWQgPSAobjogbnVtYmVyKSA9PiBTdHJpbmcobikucGFkU3RhcnQoMiwgXCIwXCIpO1xuICByZXR1cm4gYCR7ZC5nZXRGdWxsWWVhcigpfS0ke3BhZChkLmdldE1vbnRoKCkgKyAxKX0tJHtwYWQoZC5nZXREYXRlKCkpfV8ke3BhZChcbiAgICBkLmdldEhvdXJzKClcbiAgKX0tJHtwYWQoZC5nZXRNaW51dGVzKCkpfS0ke3BhZChkLmdldFNlY29uZHMoKSl9YDtcbn1cbiJdLAogICJtYXBwaW5ncyI6ICI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxJQUFBQSxvQkFBNkg7OztBQ0E3SCxJQUFBQyxtQkFrQk87OztBQ2pCUCxJQUFBQyxtQkFBbUU7OztBQ3VCMUQsSUFBTSxxQkFBZ0M7QUFBQSxFQUMzQztBQUFBLElBQ0UsSUFBSTtBQUFBLElBQ0osT0FBTztBQUFBLElBQ1AsTUFBTTtBQUFBLElBQ04sUUFBUTtBQUFBLElBQ1IsV0FBVztBQUFBLEVBQ2I7QUFBQSxFQUNBO0FBQUEsSUFDRSxJQUFJO0FBQUEsSUFDSixPQUFPO0FBQUEsSUFDUCxNQUFNO0FBQUEsSUFDTixRQUFRO0FBQUEsSUFDUixXQUFXO0FBQUEsSUFDWCxZQUFZLENBQUMsRUFBRTtBQUFBLEVBQ2pCO0FBQUEsRUFDQTtBQUFBLElBQ0UsSUFBSTtBQUFBLElBQ0osT0FBTztBQUFBLElBQ1AsTUFBTTtBQUFBLElBQ04sUUFBUTtBQUFBLElBQ1IsV0FBVztBQUFBLEVBQ2I7QUFJRjs7O0FDbERGO0FBQUE7QUFBQTtBQUFBO0FBRUEsc0JBQW1DOzs7QUNDbkMsSUFBTSxrQkFBMEM7QUFBQTtBQUFBLEVBRTlDLEtBQUs7QUFBQSxFQUNMLElBQUs7QUFBQSxFQUNMLEtBQUs7QUFBQTtBQUFBLEVBR0wsS0FBTTtBQUFBLEVBQ04sTUFBTTtBQUFBLEVBQ04sTUFBTTtBQUFBLEVBQ04sT0FBTztBQUFBLEVBQ1AsS0FBTTtBQUFBLEVBQ04sS0FBTTtBQUFBLEVBQ04sT0FBTTtBQUFBLEVBQ04sS0FBTTtBQUFBO0FBQUEsRUFHTixLQUFLO0FBQUEsRUFDTCxLQUFLO0FBQUEsRUFDTCxLQUFLO0FBQUEsRUFDTCxLQUFLO0FBQUEsRUFDTCxNQUFLO0FBQUEsRUFDTCxLQUFLO0FBQUEsRUFDTCxNQUFLO0FBQUE7QUFBQSxFQUdMLEtBQVU7QUFBQSxFQUNWLElBQVU7QUFBQSxFQUNWLFdBQVU7QUFBQSxFQUNWLEtBQVU7QUFBQSxFQUNWLE1BQVU7QUFBQSxFQUNWLEtBQVU7QUFBQSxFQUNWLEtBQVU7QUFBQSxFQUNWLE9BQVU7QUFBQSxFQUNWLFFBQVU7QUFBQSxFQUNWLEtBQVU7QUFBQSxFQUNWLE1BQVU7QUFBQSxFQUNWLEtBQVU7QUFBQSxFQUNWLE9BQVU7QUFBQSxFQUNWLE9BQVU7QUFBQSxFQUNWLGFBQVk7QUFBQSxFQUNaLGFBQVk7QUFBQSxFQUNaLEtBQVU7QUFBQSxFQUNWLE1BQVU7QUFBQSxFQUNWLE1BQVU7QUFBQSxFQUNWLEtBQVU7QUFBQSxFQUNWLE1BQVU7QUFBQSxFQUNWLE9BQVU7QUFBQSxFQUNWLE1BQVU7QUFBQSxFQUNWLEtBQVU7QUFBQSxFQUNWLFFBQVU7QUFBQSxFQUNWLEtBQVU7QUFBQSxFQUNWLE1BQVU7QUFBQSxFQUNWLEtBQVU7QUFBQSxFQUNWLE9BQVU7QUFBQSxFQUNWLEtBQVU7QUFBQSxFQUNWLE1BQVU7QUFBQSxFQUNWLFFBQVU7QUFBQSxFQUNWLElBQVU7QUFBQSxFQUNWLEtBQVU7QUFBQSxFQUNWLFFBQVU7QUFBQSxFQUNWLE9BQVU7QUFBQSxFQUNWLEtBQVU7QUFBQSxFQUNWLE1BQVU7QUFBQSxFQUNWLE9BQVU7QUFBQSxFQUNWLEtBQVU7QUFBQSxFQUNWLEtBQVU7QUFBQSxFQUNWLEtBQVU7QUFBQSxFQUNWLE1BQVU7QUFBQSxFQUNWLEtBQVU7QUFBQSxFQUNWLE1BQVU7QUFBQSxFQUNWLEtBQVU7QUFBQSxFQUNWLElBQVU7QUFBQSxFQUNWLE1BQVU7QUFBQSxFQUNWLE9BQVU7QUFBQSxFQUNWLE1BQVU7QUFBQSxFQUNWLEtBQVU7QUFBQSxFQUNWLFFBQVU7QUFBQSxFQUNWLEtBQVU7QUFBQSxFQUNWLElBQVU7QUFBQSxFQUNWLEtBQVU7QUFBQSxFQUNWLEtBQVU7QUFBQSxFQUNWLElBQVU7QUFBQSxFQUNWLEtBQVU7QUFBQSxFQUNWLEtBQVU7QUFBQSxFQUNWLFdBQVk7QUFBQSxFQUNaLFVBQVk7QUFBQSxFQUNaLEtBQVU7QUFBQSxFQUNWLE9BQVU7QUFBQSxFQUNWLE1BQVU7QUFBQSxFQUNWLFdBQVk7QUFBQSxFQUNaLFNBQVU7QUFBQSxFQUNWLFlBQVk7QUFBQSxFQUNaLGFBQVk7QUFBQSxFQUNaLEtBQVU7QUFBQSxFQUNWLE9BQVU7QUFBQSxFQUNWLFFBQVU7QUFBQSxFQUNWLEtBQVU7QUFBQSxFQUNWLEtBQVU7QUFBQSxFQUNWLEtBQVU7QUFBQSxFQUNWLGtCQUFrQjtBQUFBLEVBQ2xCLGlCQUFpQjtBQUFBLEVBQ2pCLGlCQUFpQjtBQUFBLEVBQ2pCLGdCQUFpQjtBQUNuQjtBQU1PLFNBQVMs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LEVBQ0gsR0FBRztBQUFBLEVBQ0gsR0FBRztBQUFBLEVBQ0gsR0FBRztBQUFBLEVBQ0gsR0FBRztBQUFBLEVBQ0gsR0FBRztBQUFBLEVBQ0gsTUFBTTtBQUFBLEVBQ04sR0FBRztBQUFBLEVBQ0gsR0FBRztBQUNMO0FBRU8sSUFBTSxnQkFBdUM7QUFBQSxFQUNsRCxJQUFLO0FBQUEsRUFDTCxJQUFLO0FBQUEsRUFDTCxHQUFLO0FBQUEsRUFDTCxXQUFXO0FBQUEsRUFDWCxVQUFVO0FBQUEsRUFDVixJQUFLO0FBQUEsRUFDTCxLQUFLO0FBQUEsRUFDTCxJQUFLO0FBQUEsRUFDTCxHQUFLO0FBQUEsRUFDTCxJQUFLO0FBQUEsRUFDTCxJQUFLO0FBQUEsRUFDTCxhQUFhO0FBQUEsRUFDYixLQUFLO0FBQUEsRUFDTCxJQUFLO0FBQUEsRUFDTCxHQUFLO0FBQUEsRUFDTCxJQUFLO0FBQUEsRUFDTCxLQUFLO0FBQUEsRUFDTCxLQUFLO0FBQUEsRUFDTCxHQUFLO0FBQUEsRUFDTCxHQUFLO0FBQUEsRUFDTCxJQUFLO0FBQUEsRUFDTCxJQUFLO0FBQUEsRUFDTCxHQUFLO0FBQUEsRUFDTCxJQUFLO0FBQUEsRUFDTCxLQUFLO0FBQUEsRUFDTCxLQUFLO0FBQUEsRUFDTCxHQUFLO0FBQUEsRUFDTCxLQUFLO0FBQUEsRUFDTCxJQUFLO0FBQUEsRUFDTCxLQUFLO0FBQUEsRUFDTCxJQUFLO0FBQ1A7QUFHQSxJQUFNLGdCQUF1QztBQUFBO0FBQUEsRUFFM0MsS0FBTztBQUFBLEVBQ1AsS0FBTztBQUFBLEVBQ1AsS0FBTztBQUFBLEVBQ1AsS0FBTztBQUFBLEVBQ1AsTUFBTztBQUFBLEVBQ1AsTUFBTztBQUFBLEVBQ1AsTUFBTztBQUFBLEVBQ1AsT0FBTztBQUFBO0FBQUEsRUFFUCxNQUFPO0FBQUE7QUFBQSxFQUdQLE1BQU87QUFBQSxFQUNQLE1BQU87QUFBQSxFQUNQLE1BQU87QUFBQSxFQUNQLE9BQU87QUFBQSxFQUNQLE1BQU87QUFBQTtBQUFBLEVBR1AsTUFBTTtBQUFBO0FBQUEsRUFFTixLQUFNO0FBQUEsRUFDTixNQUFNO0FBQUE7QUFBQSxFQUdOLE1BQU87QUFBQSxFQUNQLEtBQU87QUFBQSxFQUNQLE9BQU87QUFBQSxFQUNQLE1BQU87QUFBQTtBQUFBLEVBR1AsS0FBTztBQUFBO0FBQUEsRUFFUCxPQUFPO0FBQUEsRUFDUCxPQUFPO0FBQUEsRUFDUCxPQUFPO0FBQUE7QUFBQSxFQUVQLE9BQU87QUFBQTtBQUFBLEVBR1AsS0FBTztBQUFBO0FBQUEsRUFFUCxNQUFPO0FBQUE7QUFBQSxFQUdQLE9BQU87QUFBQTtBQUFBLEVBR1AsT0FBTztBQUNUO0FBRU8sU0FBUyxlQUFlLE1BQVcsV0FBeUM7QUFDakYsUUFBTSxXQUFrQixDQUFDO0FBQ3pCLE1BQUksTUFBTSxRQUFRLEtBQUssUUFBUSxFQUFHLFVBQVMsS0FBSyxHQUFHLEtBQUssUUFBUTtBQUNoRSxNQUFJLE1BQU0sUUFBUSxLQUFLLElBQUksRUFBTyxVQUFTLEtBQUssR0FBRyxLQUFLLElBQUk7QUFDNUQsTUFBSSxNQUFNLFFBQVEsS0FBSyxNQUFNLEVBQUssVUFBUyxLQUFLLEdBQUcsS0FBSyxNQUFNO0FBQzlELE1BQUksTUFBTSxRQUFRLEtBQUssT0FBTyxFQUFJLFVBQVMsS0FBSyxHQUFHLEtBQUssT0FBTztBQUMvRCxNQUFJLENBQUMsU0FBUyxPQUFRLFFBQU8sQ0FBQztBQUU5QixRQUFNLFlBQVksSUFBSTtBQUFBLElBQ3BCLE1BQU0sUUFBUSxLQUFLLFFBQVEsSUFBSSxLQUFLLFNBQVMsSUFBSSxDQUFDLE1BQVcsRUFBRSxJQUFJLElBQUksQ0FBQztBQUFBLEVBQzFFO0FBQ0EsUUFBTSxNQUE0QixDQUFDO0FBRW5DLGFBQVcsTUFBTSxVQUFVO0FBQ3pCLFVBQU0sT0FBVyxHQUFHO0FBQ3BCLFVBQU0sV0FBVyxLQUFLLFFBQVEsWUFBWSxHQUFHO0FBRzdDLFVBQU0sV0FBVyxHQUFHLFFBQWtCLElBQUksTUFBTSxHQUFHLEVBQUUsQ0FBQyxFQUNqRCxNQUFNLEdBQUcsRUFBRSxDQUFDLEVBQ1osUUFBUSxPQUFPLEVBQUU7QUFDdEIsUUFBSSxTQUFZLGNBQWMsT0FBTyxLQUFLO0FBRzFDLFFBQUksR0FBRyxhQUFhO0FBQ2xCLGVBQVMsR0FBRyxNQUFNO0FBQUEsSUFDcEIsT0FFSztBQUNILFlBQU0sVUFBVSxDQUFDLENBQUMsR0FBRyxZQUFZLENBQUMsQ0FBQyxHQUFHLGFBQWEsQ0FBQyxDQUFDLEdBQUcsY0FDbkQsT0FBTyxHQUFHLE1BQU0sRUFBRSxZQUFZLEVBQUUsU0FBUyxPQUFPO0FBQ3JELFVBQUksU0FBUztBQUNYLGNBQU0sQ0FBRSxFQUFFLEdBQUcsSUFBSyxJQUFJLE9BQU8sTUFBTSxHQUFHO0FBQ3RDLGlCQUFTLENBQUMsaUJBQWlCLEdBQUcsSUFBSSxFQUFFLEtBQUssR0FBRztBQUFBLE1BQzlDO0FBQUEsSUFDRjtBQUdBLFNBQUssT0FBTyxXQUFXLDJCQUEyQixLQUM3QyxPQUFPLFdBQVcsa0NBQWtDLE1BQU0sR0FBRyxnQkFBZ0I7QUFDaEYsZUFBUyxHQUFHLE1BQU0sSUFBSUEsaUJBQWdCLEdBQUcsY0FBYyxDQUFDO0FBQUEsSUFDMUQ7QUFHSixJQUFDLEtBQWEsYUFBYTtBQUczQixVQUFNLEtBQU8sUUFBUSxJQUFJLGNBQWM7QUFHdkMsUUFBSSxHQUFHLFVBQVUsT0FBTyxHQUFHO0FBRXpCLFNBQUcsVUFBVSxNQUFNLElBQUk7QUFBQSxJQUN6QjtBQUVBLFFBQUksWUFBWSxPQUFPLEdBQUcsZ0JBQWdCO0FBRXhDLFNBQUcsT0FBTyxHQUFHQSxpQkFBZ0IsR0FBRyxjQUFjLENBQUM7QUFBQSxJQUNqRCxXQUFXLGNBQWMsT0FBTyxHQUFHO0FBRWpDLFNBQUcsT0FBTyxjQUFjLE9BQU87QUFBQSxJQUNqQztBQUNBLFFBQUksTUFBTSxRQUFRLEdBQUcsV0FBVyxHQUFHO0FBQ2pDLFNBQUcsY0FBYyxHQUFHLFlBQVk7QUFBQSxRQUFJLENBQUMsU0FDbkMsZ0JBQWdCLElBQUksS0FBSztBQUFBLE1BQzNCO0FBQUEsSUFDRjtBQUVBLFFBQUksT0FBTyxxQkFBcUIsSUFBSSxjQUFjO0FBR2xELFFBQUksTUFBTSxRQUFRLEdBQUcsWUFBWSxHQUFHO0FBQ2xDLGNBQVE7QUFDUixpQkFBVyxNQUFNLEdBQUcsY0FBYztBQUNoQyxnQkFBUTtBQUFBLGFBQWdCLEdBQUcsSUFBSTtBQUFBLGdCQUFvQixHQUFHLFFBQVE7QUFBQSxNQUNoRTtBQUFBLElBQ0Y7QUFHQSxVQUFNLGNBQWM7QUFBQSxFQUFRLElBQUk7QUFBQTtBQUk1QixVQUFNLFFBQWtCLENBQUM7QUFDekIsVUFBTSxLQUFLLEtBQUssSUFBSSxFQUFFO0FBQ3RCLFVBQU0sS0FBSyxFQUFFO0FBR2IsVUFBTSxXQUFXLEdBQUcsU0FDaEIsR0FBR0EsaUJBQWdCLEdBQUcsY0FBYyxDQUFDLFlBQ3JDLEdBQUcsUUFDRCxPQUFPLE1BQU0sR0FBRyxFQUFFLElBQUksS0FBSyxVQUMzQjtBQUNOLFFBQUksU0FBVSxPQUFNLEtBQUssUUFBUSxRQUFRLEdBQUc7QUFHNUMsUUFBSSxHQUFHLFFBQVE7QUFDYixZQUFNLEtBQUssaUJBQWlCQSxpQkFBZ0IsR0FBRyxjQUFjLENBQUMsRUFBRTtBQUNoRSxZQUFNLEtBQUssZUFBZSxHQUFHLFFBQVEsRUFBRSxHQUFHLEdBQUcsT0FBTyxNQUFNLEdBQUcsSUFBSSxLQUFLLEVBQUUsRUFBRTtBQUMxRSxZQUFNLGFBQWEsTUFBTSxRQUFRLEdBQUcsT0FBTyxJQUFJLEdBQUcsVUFBVSxDQUFDLEdBQUcsT0FBTyxHQUNwRSxPQUFPLENBQUMsTUFBVyxRQUFRLENBQUMsQ0FBQyxFQUM3QixJQUFJLENBQUMsTUFBYyxnQkFBZ0IsQ0FBQyxLQUFLLENBQUM7QUFDN0MsWUFBTSxLQUFLLG9CQUFvQixVQUFVLEtBQUssSUFBSSxDQUFDLEVBQUU7QUFDckQsWUFBTSxLQUFLLGNBQWMsR0FBRyxTQUFTLFFBQUcsRUFBRTtBQUMxQyxZQUFNLEtBQUssZUFBZSxHQUFHLFVBQVUsUUFBRyxFQUFFO0FBQzVDLFVBQUksR0FBRyxTQUFVLE9BQU0sS0FBSyxrQkFBa0IsR0FBRyxRQUFRLEVBQUU7QUFDM0QsVUFBSSxNQUFNLFFBQVEsR0FBRyxRQUFRLEtBQUssR0FBRyxTQUFTLFFBQVE7QUFDcEQsY0FBTSxZQUFZLEdBQUcsU0FBUyxJQUFJLENBQUMsTUFBYyxhQUFhLENBQUMsS0FBSyxDQUFDO0FBQ3JFLGNBQU0sS0FBSyxtQkFBbUIsVUFBVSxLQUFLLElBQUksQ0FBQyxFQUFFO0FBQUEsTUFDdEQ7QUFBQSxJQUNGO0FBQ0EsUUFBSSxHQUFHLE9BQU87QUFDWixZQUFNLEtBQUssb0JBQW9CLEdBQUcsRUFBRSxFQUFFO0FBQ3RDLFVBQUksR0FBRyxRQUFTLE9BQU0sS0FBSyxnQ0FBZ0M7QUFDM0QsWUFBTSxLQUFLLEVBQUU7QUFBQSxJQUNmO0FBSUosVUFBTSxPQUFPLEdBQUcsV0FBVyxHQUFHO0FBQzlCLFFBQUksTUFBTTtBQUNSLGlCQUFXLEtBQU0sTUFBTSxRQUFRLElBQUksSUFBSSxPQUFPLENBQUMsSUFBSSxHQUFJO0FBRXJELFlBQUksT0FBTyxNQUFNLFVBQVU7QUFDekIscUJBQVcsUUFBUSxjQUFjLENBQUMsRUFBRSxNQUFNLElBQUksRUFBRyxPQUFNLEtBQUssSUFBSTtBQUNoRSxnQkFBTSxLQUFLLEVBQUU7QUFDYjtBQUFBLFFBQ0Y7QUFHQSxZQUFJLEtBQUssT0FBTyxNQUFNLFlBQVksRUFBRSxTQUFTLFNBQVM7QUFDcEQsY0FBSSxNQUFNLE1BQU0sU0FBUyxDQUFDLE1BQU0sR0FBSSxPQUFNLEtBQUssRUFBRTtBQUNqRCxnQkFBTSxLQUFLLGNBQWMsQ0FBQyxDQUFDO0FBQzNCLGdCQUFNLEtBQUssRUFBRTtBQUNiO0FBQUEsUUFDRjtBQUdBLFlBQUksS0FBSyxPQUFPLE1BQU0sWUFBWSxFQUFFLFNBQVMsVUFBVSxNQUFNLFFBQVEsRUFBRSxLQUFLLEdBQUc7QUFDN0UsY0FBSSxNQUFNLE1BQU0sU0FBUyxDQUFDLE1BQU0sR0FBSSxPQUFNLEtBQUssRUFBRTtBQUNqRCxxQkFBVyxRQUFRLEVBQUUsT0FBTztBQUMxQixnQkFBSSxPQUFPLFNBQVMsVUFBVTtBQUM1QixvQkFBTSxLQUFLLEtBQUssY0FBYyxJQUFJLENBQUMsRUFBRTtBQUNyQztBQUFBLFlBQ0Y7QUFDQSxrQkFBTSxPQUFPLE1BQU0sT0FDZixLQUFLLGNBQWMsT0FBTyxLQUFLLElBQUksQ0FBQyxFQUMvQixRQUFRLFVBQVUsT0FBSyxDQUFDLEVBQ3hCLFFBQVEsYUFBYSxLQUFLLENBQUMsT0FDaEM7QUFDSixnQkFBSUMsUUFBTztBQUNYLGdCQUFJLE9BQU8sTUFBTSxVQUFVLFNBQVUsQ0FBQUEsUUFBTyxjQUFjLEtBQUssS0FBSztBQUFBLHFCQUMzRCxNQUFNLFFBQVEsTUFBTSxPQUFPLEdBQUc7QUFDckMsY0FBQUEsUUFBTyxLQUFLLFFBQ1QsSUFBSSxDQUFDLE1BQVksT0FBTyxNQUFNLFdBQVcsY0FBYyxDQUFDLElBQUksRUFBRyxFQUMvRCxLQUFLLEdBQUc7QUFBQSxZQUNiO0FBQ0Esa0JBQU0sT0FBTyxDQUFDLE1BQU1BLEtBQUksRUFBRSxPQUFPLE9BQU8sRUFBRSxLQUFLLEdBQUcsRUFBRSxLQUFLO0FBQ3pELGdCQUFJLEtBQU0sT0FBTSxLQUFLLEtBQUssSUFBSSxFQUFFO0FBQUEsVUFDbEM7QUFDQSxnQkFBTSxLQUFLLEVBQUU7QUFDYjtBQUFBLFFBQ0Y7QUFHQSxZQUFJLEtBQUssT0FBTyxNQUFNLFVBQVU7QUFDOUIsY0FBSSxNQUFNLE1BQU0sU0FBUyxDQUFDLE1BQU0sR0FBSSxPQUFNLElBQUk7QUFDOUMsY0FBSSxPQUFPLEVBQUUsU0FBUyxZQUFZLEVBQUUsS0FBSyxLQUFLLEdBQUc7QUFDL0Msa0JBQU0sS0FBSyxRQUFRLEVBQUUsSUFBSSxFQUFFO0FBQUEsVUFDN0I7QUFFQSxnQkFBTSxNQUFNLE1BQU0sUUFBUSxFQUFFLE9BQU8sSUFBSSxFQUFFLFVBQVUsQ0FBQztBQUNwRCxxQkFBVyxNQUFNLEtBQUs7QUFFcEIsZ0JBQUksTUFBTSxPQUFPLE9BQU8sWUFBWSxHQUFHLFNBQVMsU0FBUztBQUN2RCxrQkFBSSxNQUFNLE1BQU0sU0FBUyxDQUFDLE1BQU0sR0FBSSxPQUFNLEtBQUssRUFBRTtBQUNqRCxvQkFBTSxLQUFLLGNBQWMsRUFBRSxDQUFDO0FBQzVCLG9CQUFNLEtBQUssRUFBRTtBQUNiO0FBQUEsWUFDRjtBQUdBLGdCQUFJLE1BQU0sT0FBTyxPQUFPLFlBQVksR0FBRyxTQUFTLFVBQVUsTUFBTSxRQUFRLEdBQUcsS0FBSyxHQUFHO0FBQ2pGLGtCQUFJLE1BQU0sTUFBTSxTQUFTLENBQUMsTUFBTSxHQUFJLE9BQU0sS0FBSyxFQUFFO0FBQ2pELHlCQUFXLFFBQVEsR0FBRyxPQUFPO0FBQzNCLG9CQUFJLE9BQU8sU0FBUyxVQUFVO0FBQzVCLHdCQUFNLEtBQUssS0FBSyxjQUFjLElBQUksQ0FBQyxFQUFFO0FBQ3JDO0FBQUEsZ0JBQ0Y7QUFDQSxzQkFBTSxPQUFPLE1BQU0sT0FDZixLQUFLLGNBQWMsT0FBTyxLQUFLLElBQUksQ0FBQyxFQUMvQixRQUFRLFVBQVUsT0FBSyxDQUFDLEVBQ3hCLFFBQVEsYUFBYSxLQUFLLENBQUMsT0FDaEM7QUFDSixvQkFBSUEsUUFBTztBQUNYLG9CQUFJLE9BQU8sTUFBTSxVQUFVLFNBQVUsQ0FBQUEsUUFBTyxjQUFjLEtBQUssS0FBSztBQUFBLHlCQUMzRCxNQUFNLFFBQVEsTUFBTSxPQUFPLEdBQUc7QUFDckMsa0JBQUFBLFFBQU8sS0FBSyxRQUNULElBQUksQ0FBQyxNQUFZLE9BQU8sTUFBTSxXQUFXLGNBQWMsQ0FBQyxJQUFJLEVBQUcsRUFDL0QsS0FBSyxHQUFHO0FBQUEsZ0JBQ2I7QUFDQSxzQkFBTSxPQUFPLENBQUMsTUFBTUEsS0FBSSxFQUFFLE9BQU8sT0FBTyxFQUFFLEtBQUssR0FBRyxFQUFFLEtBQUs7QUFDekQsb0JBQUksS0FBTSxPQUFNLEtBQUssS0FBSyxJQUFJLEVBQUU7QUFBQSxjQUNsQztBQUNBLG9CQUFNLEtBQUssRUFBRTtBQUNiO0FBQUEsWUFDRjtBQUdBLGdCQUFJLE1BQU0sT0FBTyxPQUFPLFlBQVksR0FBRyxTQUFTLGFBQWEsR0FBRyxNQUFNO0FBQ3BFLG9CQUFNLE9BQU8sUUFBUSxjQUFjLEdBQUcsSUFBSSxDQUFDO0FBQzNDLG9CQUFNQSxTQUFRLE1BQU0sUUFBUSxHQUFHLE9BQU8sSUFBSSxHQUFHLFVBQVUsQ0FBQyxHQUNyRCxJQUFJLENBQUMsTUFBWSxPQUFPLE1BQU0sV0FBVyxjQUFjLENBQUMsSUFBSSxFQUFHLEVBQy9ELEtBQUssR0FBRztBQUNYLGtCQUFJQSxNQUFLLEtBQUssRUFBRyxPQUFNLEtBQUssR0FBRyxJQUFJLElBQUlBLEtBQUksR0FBRyxLQUFLLENBQUM7QUFBQSxrQkFDL0MsT0FBTSxLQUFLLElBQUk7QUFDcEI7QUFBQSxZQUNGO0FBR0EsZ0JBQUksT0FBTyxPQUFPLFVBQVU7QUFDMUIseUJBQVcsUUFBUSxjQUFjLEVBQUUsRUFBRSxNQUFNLElBQUksRUFBRyxPQUFNLEtBQUssSUFBSTtBQUNqRTtBQUFBLFlBQ0Y7QUFHQSxnQkFBSSxNQUFNLE9BQU8sT0FBTyxZQUFZLE1BQU0sUUFBUSxHQUFHLE9BQU8sR0FBRztBQUM3RCx5QkFBVyxTQUFTLEdBQUcsU0FBUztBQUM5QixvQkFBSSxPQUFPLFVBQVUsVUFBVTtBQUM3Qiw2QkFBVyxRQUFRLGNBQWMsS0FBSyxFQUFFLE1BQU0sSUFBSSxFQUFHLE9BQU0sS0FBSyxJQUFJO0FBQUEsZ0JBQ3RFO0FBQUEsY0FDRjtBQUFBLFlBQ0Y7QUFBQSxVQUNGO0FBRUEsZ0JBQU0sS0FBSyxFQUFFO0FBQUEsUUFDZjtBQUFBLE1BQ0Y7QUFBQSxJQUNGO0FBR0ksVUFBTSxPQUFPLE1BQU0sS0FBSyxJQUFJO0FBRTVCLFFBQUksS0FBSyxFQUFFLE1BQU0sU0FBUyxNQUFNLElBQUksUUFBUSxPQUFPLFNBQVMsR0FBRyxXQUFXO0FBQUE7QUFBQSxFQUFPLElBQUksR0FBRyxDQUFDO0FBQUEsRUFDM0Y7QUFFQSxTQUFPLElBQUksS0FBSyxDQUFDLEdBQUUsTUFBTSxFQUFFLEtBQUssY0FBYyxFQUFFLElBQUksQ0FBQztBQUN2RDs7O0FDL1hPLFNBQVMsSUFBSSxLQUFrQjtBQUNwQyxNQUFJLE9BQU8sUUFBUSxTQUFVLFFBQU87QUFDcEMsU0FBTyxJQUFJLE9BQU8sQ0FBQyxFQUFFLFlBQVksSUFBSSxJQUFJLE1BQU0sQ0FBQztBQUNsRDtBQUVPLElBQU0sZUFBc0M7QUFBQSxFQUNqRCxLQUFLO0FBQUEsRUFDTCxLQUFLO0FBQUEsRUFDTCxLQUFLO0FBQUEsRUFDTCxLQUFLO0FBQUEsRUFDTCxLQUFLO0FBQUEsRUFDTCxLQUFLO0FBQ1A7QUFFTyxJQUFNQyxZQUFtQztBQUFBLEVBQzlDLEdBQUc7QUFBQSxFQUNILEdBQUc7QUFBQSxFQUNILEdBQUc7QUFBQSxFQUNILEdBQUc7QUFBQSxFQUNILEdBQUc7QUFBQSxFQUNILEdBQUc7QUFDTDtBQUdPLElBQU0sWUFBWTtBQUFBLEVBQ3ZCLGlCQUFvQjtBQUFBLEVBQ3BCLElBQW9CO0FBQUEsRUFDcEIsV0FBb0I7QUFBQSxFQUNwQixXQUFvQjtBQUFBLEVBQ3BCLHFCQUFvQjtBQUFBLEVBQ3BCLGFBQW9CO0FBQUEsRUFDcEIsWUFBb0I7QUFBQSxFQUNwQixZQUFvQjtBQUFBLEVBQ3BCLGNBQW9CO0FBQUEsRUFDcEIsVUFBb0I7QUFBQSxFQUNwQixTQUFvQjtBQUFBLEVBQ3BCLGVBQW9CO0FBQUEsRUFDcEIsZUFBb0I7QUFBQSxFQUNwQixjQUFvQjtBQUFBLEVBQ3BCLFNBQW9CO0FBQUEsRUFDcEIsTUFBb0I7QUFBQSxFQUNwQixZQUFvQjtBQUFBLEVBQ3BCLGtCQUFvQjtBQUFBLEVBQ3BCLGFBQW9CO0FBQUEsRUFDcEIsY0FBb0I7QUFBQSxFQUNwQixRQUFvQjtBQUFBLEVBQ3BCLFlBQW9CO0FBQUEsRUFDcEIsWUFBb0I7QUFBQSxFQUNwQixXQUFvQjtBQUFBLEVBQ3BCLFNBQW9CO0FBQUEsRUFDcEIsVUFBb0I7QUFBQSxFQUNwQixTQUFvQjtBQUFBLEVBQ3BCLElBQW9CO0FBQUEsRUFDcEIsY0FBb0I7QUFBQSxFQUNwQixTQUFvQjtBQUFBLEVBQ3BCLFdBQW9CO0FBQUEsRUFDcEIsT0FBb0I7QUFBQSxFQUNwQixTQUFvQjtBQUFBLEVBQ3BCLFVBQW9CO0FBQUEsRUFDcEIsTUFBb0I7QUFBQSxFQUNwQixZQUFvQjtBQUFBLEVBQ3BCLE9BQW9CO0FBQUEsRUFDcEIsUUFBb0I7QUFBQSxFQUNwQixRQUFvQjtBQUFBLEVBQ3BCLFFBQW9CO0FBQUEsRUFDcEIsTUFBb0I7QUFBQSxFQUNwQixlQUFvQjtBQUFBLEVBQ3BCLFFBQW9CO0FBQUEsRUFDcEIsUUFBb0I7QUFBQSxFQUNwQixNQUFvQjtBQUFBLEVBQ3BCLFFBQW9CO0FBQUEsRUFDcEIsbUJBQW9CO0FBQUEsRUFDcEIsU0FBb0I7QUFBQSxFQUNwQixRQUFvQjtBQUFBLEVBQ3BCLFNBQW9CO0FBQUEsRUFDcEIsT0FBb0I7QUFBQSxFQUNwQixnQkFBb0I7QUFBQSxFQUNwQixhQUFvQjtBQUFBLEVBQ3BCLHNCQUFzQjtBQUFBLEVBQ3RCLFVBQW9CO0FBQUEsRUFDcEIsU0FBb0I7QUFBQSxFQUNwQixVQUFvQjtBQUFBLEVBQ3BCLG9CQUFvQjtBQUFBLEVBQ3BCLGtCQUFtQjtBQUFBLEVBQ25CLFFBQW9CO0FBQUEsRUFDcEIsTUFBb0I7QUFBQSxFQUNwQixTQUFvQjtBQUFBLEVBQ3BCLFFBQW9CO0FBQUEsRUFDcEIsUUFBb0I7QUFBQSxFQUNwQixzQkFBc0I7QUFBQSxFQUN0QixRQUFvQjtBQUFBLEVBQ3BCLFFBQW9CO0FBQUEsRUFDcEIsU0FBb0I7QUFDdEI7QUFlQSxJQUFNLG9CQUFvQixDQUFDLFFBQ3pCLE1BQU0sUUFBUSxLQUFLLEtBQUssSUFBSSxJQUFJLE1BQU0sSUFBSSxHQUFHLElBQzdDLE1BQU0sUUFBUSxHQUFHLElBQUksSUFBSSxJQUFJLEdBQUcsSUFBSSxDQUFDO0FBSWhDLFNBQVMsbUJBQW1CLEtBQW9CO0FBRXJELFFBQU0sU0FBZ0IsTUFBTSxRQUFRLEtBQUssT0FBTyxJQUM1QyxJQUFJLFVBQ0osTUFBTSxRQUFRLEdBQUcsSUFDakIsTUFDQSxDQUFDO0FBRUwsUUFBTSxNQUFNLG9CQUFJLElBQVk7QUFFNUIsV0FBUyxVQUFVLE9BQVk7QUFDN0IsUUFBSSxNQUFNLFFBQVEsS0FBSyxHQUFHO0FBRXhCLFlBQU0sUUFBUSxTQUFTO0FBQ3ZCO0FBQUEsSUFDRjtBQUVBLFFBQUksT0FBTyxVQUFVLFVBQVU7QUFDN0IsWUFBTSxNQUFNLE1BQU0sS0FBSyxFQUFFLFlBQVk7QUFDckMsVUFBSSxRQUFRLFVBQVU7QUFDcEIsWUFBSSxJQUFJLGdCQUFnQjtBQUFBLE1BQzFCLFdBQVcsUUFBUSxXQUFXO0FBQzVCLFlBQUksSUFBSSxpQkFBaUI7QUFBQSxNQUMzQixPQUFPO0FBRUwsY0FBTSxPQUFPLE1BQU0sV0FBVyxJQUFJLElBQzlCLGNBQWMsS0FBSyxJQUNuQixJQUFJLEtBQUs7QUFDYixZQUFJLElBQUksSUFBSTtBQUFBLE1BQ2Q7QUFDQTtBQUFBLElBQ0Y7QUFFQSxRQUFJLFNBQVMsT0FBTyxVQUFVLFlBQVksTUFBTSxhQUFhO0FBRTNELFlBQU0sT0FBTyxJQUFJLE1BQU0sV0FBVztBQUNsQyxVQUFJLElBQUksTUFBTSxXQUFXLEdBQUcsSUFBSSxnQkFBZ0IsSUFBSTtBQUFBLElBQ3REO0FBQUEsRUFDRjtBQUVBLFNBQU8sUUFBUSxTQUFTO0FBQ3hCLFNBQU8sQ0FBQyxHQUFHLEdBQUc7QUFDaEI7QUFHQSxJQUFNLGdCQUF3QztBQUFBLEVBQzVDLEtBQUs7QUFBQSxFQUNMLFVBQVU7QUFBQSxFQUNWLEtBQUs7QUFBQSxFQUNMLFdBQVc7QUFBQSxFQUNYLEtBQUs7QUFBQSxFQUNMLGNBQWM7QUFBQSxFQUNkLEtBQUs7QUFBQSxFQUNMLGNBQWM7QUFBQSxFQUNkLEtBQUs7QUFBQSxFQUNMLFFBQVE7QUFBQSxFQUNSLEtBQUs7QUFBQSxFQUNMLFVBQVU7QUFDWjtBQUVPLFNBQVMsYUFBYSxLQUFvQjtBQUMvQyxNQUFJLENBQUMsSUFBSyxRQUFPLENBQUM7QUFHbEIsTUFBSSxNQUFNLFFBQVEsR0FBRyxHQUFHO0FBQ3RCLFdBQU8sSUFBSSxJQUFJLENBQUMsTUFBTTtBQUNwQixZQUFNQyxPQUFNLE9BQU8sQ0FBQyxFQUFFLFlBQVk7QUFDbEMsYUFBTyxjQUFjQSxJQUFHLEtBQU1BLEtBQUksT0FBTyxDQUFDLEVBQUUsWUFBWSxJQUFJQSxLQUFJLE1BQU0sQ0FBQztBQUFBLElBQ3pFLENBQUM7QUFBQSxFQUNIO0FBR0EsTUFBSSxPQUFPLFFBQVEsVUFBVTtBQUMzQixXQUFPLE9BQU8sS0FBSyxHQUFHLEVBQUUsSUFBSSxDQUFDLE1BQU07QUFDakMsWUFBTUEsT0FBTSxFQUFFLFlBQVk7QUFDMUIsYUFBTyxjQUFjQSxJQUFHLEtBQU1BLEtBQUksT0FBTyxDQUFDLEVBQUUsWUFBWSxJQUFJQSxLQUFJLE1BQU0sQ0FBQztBQUFBLElBQ3pFLENBQUM7QUFBQSxFQUNIO0FBR0EsUUFBTSxNQUFNLE9BQU8sR0FBRyxFQUFFLFlBQVk7QUFDcEMsU0FBTyxDQUFDLGNBQWMsR0FBRyxLQUFNLElBQUksT0FBTyxDQUFDLEVBQUUsWUFBWSxJQUFJLElBQUksTUFBTSxDQUFDLENBQUU7QUFDNUU7QUFFTyxJQUFNQyxpQkFBZ0IsQ0FBQyxRQUF1QjtBQUVuRCxNQUNFLE9BQ0EsQ0FBQyxNQUFNLFFBQVEsR0FBRyxLQUNsQixPQUFPLFFBQVE7QUFBQSxFQUVmLE9BQU8sT0FBTyxHQUFHLEVBQUUsTUFBTSxPQUFLLE9BQU8sTUFBTSxZQUFZLE9BQU8sTUFBTSxRQUFRLEdBQzVFO0FBQ0EsV0FBTyxPQUFPLFFBQVEsR0FBRyxFQUFFO0FBQUEsTUFDekIsQ0FBQyxDQUFDLE9BQU8sR0FBRyxNQUFNLEdBQUcsSUFBSSxLQUFLLENBQUMsSUFBSSxHQUFHLEdBQUcsS0FBSztBQUFBLElBQ2hEO0FBQUEsRUFDRjtBQUdBLE1BQUksT0FBTyxDQUFDLE1BQU0sUUFBUSxHQUFHLEtBQUssT0FBTyxRQUFRLFVBQVU7QUFDekQsVUFBTSxTQUFVLElBQVksVUFDdEIsSUFBWSxhQUNaLElBQVk7QUFDbEIsV0FBT0EsZUFBYyxNQUFNO0FBQUEsRUFDN0I7QUFHQSxNQUFJLENBQUMsTUFBTSxRQUFRLEdBQUcsRUFBRyxRQUFPLENBQUM7QUFFakMsUUFBTSxNQUFNLG9CQUFJLElBQVk7QUFDNUIsYUFBVyxLQUFLLEtBQUs7QUFFbkIsUUFBSSxLQUFLLE9BQU8sTUFBTSxZQUFZLE9BQVEsRUFBVSxRQUFRLFVBQVU7QUFDcEUsVUFBSSxJQUFJLFVBQVcsRUFBVSxHQUFHLEVBQUU7QUFDbEM7QUFBQSxJQUNGO0FBRUEsUUFBSSxLQUFLLE9BQU8sTUFBTSxZQUFhLEVBQVUsUUFBUTtBQUNuRCxZQUFNLE1BQU8sRUFBVSxPQUFPLFNBQVM7QUFDdkMsVUFBSSxJQUFJLFVBQVUsR0FBRyxFQUFFO0FBQUEsSUFDekI7QUFFQSxRQUFJLEtBQUssT0FBTyxNQUFNLFVBQVU7QUFDOUIsaUJBQVcsQ0FBQyxHQUFHLENBQUMsS0FBSyxPQUFPLFFBQVEsQ0FBQyxHQUFHO0FBQ3RDLFlBQUksTUFBTSxLQUFNLEtBQUksSUFBSSxJQUFJLENBQUMsQ0FBQztBQUFBLE1BQ2hDO0FBQUEsSUFDRjtBQUVBLFFBQUksT0FBTyxNQUFNLFVBQVU7QUFDekIsVUFBSSxJQUFJLElBQUksQ0FBQyxDQUFDO0FBQUEsSUFDaEI7QUFBQSxFQUNGO0FBRUEsU0FBTyxDQUFDLEdBQUcsR0FBRztBQUNoQjtBQUlPLElBQU0sbUJBQW1CLENBQUMsUUFBdUI7QUFFdEQsTUFBSSxVQUFpQixNQUFNLFFBQVEsR0FBRyxJQUFJLE1BQ3RDLE1BQU0sUUFBUSxLQUFLLGlCQUFpQixJQUFJLElBQUksb0JBQzVDLE1BQU0sUUFBUSxLQUFLLEtBQUssSUFBZ0IsSUFBSSxRQUM1QyxDQUFDO0FBRUwsUUFBTSxNQUFNLG9CQUFJLElBQVk7QUFDNUIsTUFBSSxZQUFZO0FBRWhCLGFBQVcsS0FBSyxTQUFTO0FBQ3ZCLFFBQUksT0FBTyxNQUFNLFVBQVU7QUFDekIsVUFBSSxJQUFJLElBQUksQ0FBQyxDQUFDO0FBQ2Q7QUFBQSxJQUNGO0FBRUEsUUFBSSxHQUFHLFFBQVE7QUFDYixZQUFNLE1BQU0sRUFBRSxPQUFPLFNBQVM7QUFDOUIsa0JBQVk7QUFDWixVQUFJLElBQUksVUFBVSxHQUFHLEVBQUU7QUFBQSxJQUN6QjtBQUdBLGVBQVcsQ0FBQyxHQUFFLENBQUMsS0FBSyxPQUFPLFFBQVEsQ0FBQyxHQUFHO0FBQ3JDLFVBQUksTUFBTSxNQUFNO0FBQ2QsWUFBSSxJQUFJLElBQUksQ0FBQyxDQUFDO0FBQUEsTUFDaEIsV0FBVyxPQUFPLE1BQU0sWUFBWSxFQUFFLFdBQVcsS0FBSyxHQUFHO0FBRXZELGNBQU0sTUFBTSxFQUFFLFFBQVEsUUFBUSxFQUFFO0FBQ2hDLGNBQU0sU0FBUyxJQUNaLFFBQVEsbUJBQW1CLE9BQU8sRUFDbEMsTUFBTSxHQUFHLEVBQ1QsSUFBSSxHQUFHLEVBQ1AsS0FBSyxHQUFHO0FBQ1gsWUFBSSxJQUFJLFVBQVUsQ0FBQyxJQUFJLE1BQU0sRUFBRTtBQUFBLE1BQ2pDO0FBQUEsSUFDRjtBQUFBLEVBQ0Y7QUFFQSxTQUFPLENBQUMsR0FBRyxHQUFHO0FBQ2hCO0FBRU8sSUFBTSxpQkFBNkI7QUFBQTtBQUFBLEVBRXhDLEVBQUUsVUFBVSxRQUFTLFNBQVMsT0FBTztBQUFBLEVBQ3JDLEVBQUUsVUFBVSxVQUFVLFNBQVMsQ0FBQyxRQUFRLEdBQUcsTUFBTSxDQUFDLEtBQUssUUFBUTtBQUMzRCxVQUFNLE1BQU0sb0JBQUksSUFBWTtBQUM1QixVQUFNLE1BQU0sTUFBTSxRQUFRLEdBQUcsSUFBSSxNQUFNLENBQUMsR0FBRztBQUMzQyxRQUFJLFFBQVEsU0FBTyxJQUFJLElBQUksa0JBQWtCLEtBQU0sSUFBWSxVQUFVLENBQUMsQ0FBQztBQUMzRSxlQUFXLE1BQU0sSUFBSSxnQkFBZ0IsQ0FBQyxFQUFHLEtBQUksSUFBSSxrQkFBa0IsR0FBRyxRQUFTLElBQVksVUFBVSxDQUFDO0FBQ3RHLGVBQVcsT0FBTyxJQUFJLGVBQWUsQ0FBQyxHQUFHO0FBQ3ZDLFlBQU0sQ0FBQyxFQUFFLEdBQUcsSUFBSyxJQUFlLE1BQU0sR0FBRztBQUN6QyxVQUFJLElBQUksa0JBQWtCLEtBQU0sSUFBWSxVQUFVLENBQUM7QUFBQSxJQUN6RDtBQUNBLFdBQU8sQ0FBQyxHQUFHLEdBQUc7QUFBQSxFQUNsQixFQUFDO0FBQUE7QUFBQSxFQUdELEVBQUUsVUFBVSx1QkFBd0IsU0FBUyxDQUFDLHNCQUFzQixjQUFjLHVCQUF1QixHQUFHLE1BQU0sa0JBQWtCO0FBQUEsRUFDcEk7QUFBQSxJQUNFLFVBQVU7QUFBQSxJQUNWLFNBQVMsQ0FBQyx1QkFBc0IsZUFBYyx1QkFBdUI7QUFBQSxJQUNyRSxNQUFNO0FBQUEsRUFDUjtBQUFBLEVBQ0EsRUFBRSxVQUFVLHNCQUF3QixTQUFTLENBQUMscUJBQXFCLGFBQWEsdUJBQXVCLEdBQUcsTUFBTSxpQkFBaUI7QUFBQSxFQUNqSTtBQUFBLElBQ0UsVUFBVTtBQUFBLElBQ1YsU0FBUyxDQUFDLHFCQUFxQixhQUFhLHVCQUF1QjtBQUFBLElBQ25FLE1BQU0sQ0FBQyxRQUFhO0FBQ2xCLFlBQU0sTUFBTSxNQUFNLFFBQVEsR0FBRyxJQUN6QixNQUNBLE1BQU0sUUFBUSxLQUFLLGlCQUFpQixJQUNwQyxJQUFJLG9CQUNKLE1BQU0sUUFBUSxLQUFLLEtBQUssSUFDeEIsSUFBSSxRQUNKLENBQUM7QUFDTCxZQUFNLFNBQVMsSUFBSSxLQUFLLENBQUMsTUFBVyxHQUFHLE1BQU07QUFDN0MsYUFBTyxRQUFRLFFBQVEsTUFBTSxJQUFJLENBQUMsTUFBYyxJQUFJLENBQUMsQ0FBQyxLQUFLLENBQUM7QUFBQSxJQUM5RDtBQUFBLEVBQ0Y7QUFBQSxFQUNBLEVBQUUsVUFBVSxpQkFBd0IsU0FBUyxDQUFDLFFBQVEsZUFBZSxhQUFhLEdBQUcsTUFBTSxhQUFhO0FBQUEsRUFDeEc7QUFBQSxJQUNFLFVBQVU7QUFBQSxJQUNWLFNBQVMsQ0FBQyxTQUFTLGFBQWEsc0JBQXNCLHVCQUF1QjtBQUFBLElBQzdFLE1BQU1BO0FBQUEsRUFDUjtBQUFBLEVBRUE7QUFBQSxJQUNFLFVBQVU7QUFBQSxJQUNWLFNBQVMsQ0FBQyxTQUFTLGFBQWEsc0JBQXNCLHVCQUF1QjtBQUFBLElBQzdFLE1BQU0sQ0FBQyxRQUFhO0FBRWxCLFlBQU0sTUFBYSxNQUFNLFFBQVEsR0FBRyxJQUNoQyxNQUNBLE1BQU0sUUFBUSxLQUFLLGtCQUFrQixJQUNyQyxJQUFJLHFCQUNKLE1BQU0sUUFBUSxLQUFLLE1BQU0sSUFDekIsSUFBSSxTQUNKLE1BQU0sUUFBUSxLQUFLLFNBQVMsSUFDNUIsSUFBSSxZQUNKLENBQUM7QUFHTCxZQUFNLFlBQVksSUFBSSxLQUFLLE9BQUssR0FBRyxVQUFVLE9BQU8sRUFBRSxRQUFRLFFBQVE7QUFDdEUsVUFBSSxDQUFDLFVBQVcsUUFBTyxDQUFDO0FBR3hCLFVBQUksVUFBVSxVQUFVLE1BQU0sUUFBUSxVQUFVLE9BQU8sSUFBSSxHQUFHO0FBQzVELGVBQU8sVUFBVSxPQUFPLEtBQUssSUFBSSxHQUFHO0FBQUEsTUFDdEM7QUFHQSxVQUFJLE9BQU8sVUFBVSxRQUFRLFVBQVU7QUFFckMsZUFBTztBQUFBLE1BQ1Q7QUFFQSxhQUFPLENBQUM7QUFBQSxJQUNWO0FBQUEsRUFDRjtBQUFBLEVBQ0E7QUFBQSxJQUFFLFVBQVU7QUFBQSxJQUFpQixTQUFTO0FBQUEsSUFDcEMsTUFBTSxDQUFDLFFBQVE7QUFFZixZQUFNLE1BQU0sT0FBTyxHQUFHLEVBQUUsWUFBWTtBQUNwQyxhQUFPLGFBQWEsR0FBRyxLQUFLLElBQUksWUFBWTtBQUFBLElBQzlDO0FBQUEsRUFBQztBQUFBLEVBRUQ7QUFBQSxJQUNFLFVBQVU7QUFBQSxJQUNWLFNBQVM7QUFBQTtBQUFBLElBRVQsTUFBTSxDQUFDLE1BQU0sU0FBUztBQUFBLEVBQ3hCO0FBQUE7QUFBQSxFQUdBLEVBQUUsVUFBVSxTQUFpQixTQUFTLFFBQVE7QUFBQSxFQUM5QyxFQUFFLFVBQVUsVUFBaUIsU0FBUyxVQUFZLE1BQU0sT0FBSyxXQUFXLENBQUMsS0FBSyxFQUFFO0FBQUEsRUFDaEYsRUFBRSxVQUFVLGdCQUFpQixTQUFTLFFBQVksTUFBTSxXQUFXO0FBQUEsRUFDbkUsRUFBRSxVQUFVLGVBQWlCLFNBQVMsU0FBWSxNQUFNLFlBQVk7QUFBQSxFQUNwRSxFQUFFLFVBQVUsWUFBaUIsU0FBUyxZQUFZLE1BQU0sZUFBZTtBQUFBLEVBQ3ZFLEVBQUUsVUFBVSxVQUFpQixTQUFTLGNBQWMsTUFBTSxDQUFDLE1BQVUsQ0FBQyxDQUFDLEVBQUUsRUFBRTtBQUFBLEVBQzNFLEVBQUUsVUFBVSxXQUFpQixTQUFTLGNBQWMsTUFBTSxDQUFDLE1BQVUsQ0FBQyxDQUFDLEVBQUUsRUFBRTtBQUFBLEVBQzNFLEVBQUUsVUFBVSxZQUFpQixTQUFTLGNBQWMsTUFBTSxDQUFDLE1BQVUsQ0FBQyxDQUFDLEVBQUUsRUFBRTtBQUFBLEVBQzNFO0FBQUEsSUFBRSxVQUFVO0FBQUEsSUFDVixTQUFVO0FBQUEsSUFDVixNQUFNLENBQUMsTUFBcUI7QUFDMUIsVUFBSSxDQUFDLEVBQUUsRUFBRyxRQUFPLENBQUM7QUFFbEIsWUFBTSxNQUFNLE1BQU0sUUFBUSxFQUFFLENBQUMsSUFBSSxFQUFFLElBQUksQ0FBQyxFQUFFLENBQUM7QUFFM0MsYUFBTyxJQUNKLElBQUksQ0FBQyxTQUE2QjtBQUNqQyxZQUFJLE9BQU8sU0FBUyxTQUFVLFFBQU87QUFDckMsWUFBSSxRQUFRLE9BQU8sU0FBUyxZQUFZLE9BQU8sS0FBSyxTQUFTLFVBQVU7QUFDckUsaUJBQU8sS0FBSztBQUFBLFFBQ2Q7QUFDQSxlQUFPO0FBQUEsTUFDVCxDQUFDLEVBQ0EsT0FBTyxDQUFDLFNBQXdDLFNBQVMsSUFBSTtBQUFBLElBQ2xFO0FBQUEsRUFDRjtBQUFBLEVBQ0EsRUFBRSxVQUFVLGVBQWlCLFNBQVMsYUFBYTtBQUFBLEVBQ25ELEVBQUUsVUFBVSxlQUFpQixTQUFTLGlCQUFpQixNQUFNLE9BQUssTUFBTSxRQUFRLENBQUMsSUFBSSxFQUFFLENBQUMsSUFBSSxFQUFFO0FBQUEsRUFDOUYsRUFBRSxVQUFVLFVBQWlCLFNBQVMsU0FBUztBQUFBLEVBQy9DLEVBQUUsVUFBVSxpQkFBaUIsU0FBUyxZQUFZLE1BQU0sUUFBTSxNQUFNLFFBQVEsRUFBRSxLQUFLLEdBQUcsS0FBSyxDQUFDLE1BQVMsRUFBRSxhQUFhLEVBQUU7QUFBQSxFQUN0SCxFQUFFLFVBQVUsUUFBaUIsU0FBUyxXQUFXO0FBQUE7QUFBQSxFQUdqRCxFQUFFLFVBQVUsV0FBVyxTQUFTLE9BQU87QUFBQSxFQUN2QztBQUFBLElBQUUsVUFBVTtBQUFBLElBQVEsU0FBUztBQUFBLElBQVEsTUFBTSxDQUFDLFFBQWE7QUFFckQsVUFBSSxNQUFNLFFBQVEsR0FBRyxHQUFHO0FBQ3RCLGVBQU8sSUFBSSxJQUFJLE9BQUtGLFVBQVMsQ0FBQyxLQUFLLENBQUM7QUFBQSxNQUN0QyxPQUFPO0FBQ0wsZUFBT0EsVUFBUyxHQUFHLEtBQUs7QUFBQSxNQUMxQjtBQUFBLElBQ0Y7QUFBQSxFQUNGO0FBQUEsRUFDRTtBQUFBLElBQ0YsVUFBVTtBQUFBLElBQ1YsU0FBVztBQUFBLElBQ1gsTUFBTSxDQUFDLE9BQXFDO0FBRTFDLFVBQUksT0FBTyxPQUFPLFVBQVU7QUFDMUIsZUFBTyxDQUFDLFFBQVEsRUFBRSxNQUFNO0FBQUEsTUFDMUI7QUFDQSxVQUFJLENBQUMsTUFBTSxPQUFPLE9BQU8sU0FBVSxRQUFPLENBQUM7QUFDM0MsYUFBTyxPQUFPLFFBQVEsRUFBRSxFQUNyQixPQUFPLENBQUMsQ0FBQyxJQUFJLE1BQU0sU0FBUyxVQUFVLEVBQ3RDLElBQUksQ0FBQyxDQUFDLE1BQU0sQ0FBQyxNQUFNO0FBQ2xCLGNBQU0sSUFBSSxPQUFPLE1BQU0sWUFBWSxNQUFNLFFBQVEsWUFBWSxJQUFLLEVBQVUsU0FBUztBQUNyRixjQUFNLFFBQVEsU0FBUyxTQUFTLFNBQVMsSUFBSSxJQUFJO0FBQ2pELGVBQU8sR0FBRyxLQUFLLElBQUksQ0FBQztBQUFBLE1BQ3RCLENBQUM7QUFBQSxJQUNMO0FBQUEsRUFDRjtBQUFBLEVBQ0EsRUFBRSxVQUFVLGFBQWEsU0FBUyxDQUFDLGFBQWEsdUJBQXVCLEdBQUcsTUFBTSxTQUFPO0FBQ2pGLFFBQUksQ0FBQyxNQUFNLFFBQVEsR0FBRyxFQUFHLFFBQU8sQ0FBQztBQUNqQyxVQUFNLE1BQWdCLENBQUM7QUFDdkIsZUFBVyxNQUFNLEtBQUs7QUFDcEIsVUFBSSxPQUFPLE9BQU8sU0FBVSxLQUFJLEtBQUssSUFBSSxFQUFFLENBQUM7QUFBQSxlQUNuQyxPQUFPLE9BQU8sVUFBVTtBQUMvQixtQkFBVyxDQUFDLE1BQU0sR0FBRyxLQUFLLE9BQU8sUUFBUSxFQUFFLEdBQUc7QUFDNUMsY0FBSSxJQUFLLEtBQUksS0FBSyxJQUFJLElBQUksQ0FBQztBQUFBLFFBQzdCO0FBQUEsTUFDRjtBQUFBLElBQ0Y7QUFDQSxXQUFPLENBQUMsR0FBRyxJQUFJLElBQUksR0FBRyxDQUFDO0FBQUEsRUFDM0IsRUFBQztBQUFBLEVBQ0QsRUFBRSxVQUFVLFVBQVUsU0FBUyxVQUFVLE1BQU0sU0FBTztBQUNsRCxRQUFJLE1BQU0sUUFBUSxHQUFHLEVBQUcsUUFBTyxJQUFJLElBQUksQ0FBQyxNQUFXLEVBQUUsUUFBUSxXQUFVLEVBQUUsRUFBRSxRQUFRLE1BQUssT0FBRyxFQUFFLFlBQVksQ0FBQyxDQUFDO0FBQzNHLFFBQUksT0FBTyxPQUFPLFFBQU0sU0FBVSxRQUFPLE9BQU8sUUFBUSxHQUFHLEVBQUUsSUFBSSxDQUFDLENBQUMsR0FBRSxDQUFDLE1BQUksR0FBRyxFQUFFLE9BQU8sQ0FBQyxFQUFFLFlBQVksSUFBRSxFQUFFLE1BQU0sQ0FBQyxDQUFDLElBQUksQ0FBQyxFQUFFO0FBQ3hILFdBQU8sQ0FBQztBQUFBLEVBQ1osRUFBQztBQUFBLEVBQ0g7QUFBQSxJQUNFLFVBQVU7QUFBQSxJQUNWLFNBQVMsQ0FBQyxpQkFBaUIsU0FBUztBQUFBLElBQ3BDLE1BQU0sQ0FBQyxLQUFVLFlBQTJCO0FBRTFDLFlBQU0sTUFDSixNQUFNLFFBQVEsUUFBUSxLQUFLLElBQUksUUFBUSxNQUFNLENBQUMsSUFDOUMsTUFBTSxRQUFRLFFBQVEsSUFBSSxJQUFLLFFBQVEsS0FBSyxDQUFDLElBQzdDO0FBQ0YsWUFBTSxXQUFXLE9BQU8sS0FBSyxTQUFTLFdBQ2xDLElBQUksT0FDSCxPQUFPLFNBQVMsU0FBUyxXQUFXLFFBQVEsT0FBTztBQUd4RCxZQUFNLE9BQU8sb0JBQUksSUFBSTtBQUFBO0FBQUEsUUFFbkI7QUFBQSxRQUNBO0FBQUEsUUFDQTtBQUFBO0FBQUEsUUFFQTtBQUFBLFFBQ0E7QUFBQSxRQUNBO0FBQUEsUUFDQTtBQUFBO0FBQUEsTUFFRixDQUFDO0FBRUQsWUFBTSxPQUFPLG9CQUFJLElBQVk7QUFHN0IsVUFBSSxNQUFNLFFBQVEsUUFBUSxhQUFhLEdBQUc7QUFDeEMsY0FBTSxXQUFXLE1BQU0sUUFBUSxRQUFRLEtBQUssSUFBSSxRQUFRLE1BQU0sQ0FBQyxJQUFJO0FBQ25FLGNBQU0sWUFBWSxPQUFPLFVBQVUsU0FBUyxXQUFXLFNBQVMsT0FBTztBQUV2RSxlQUFPLFFBQVEsY0FBYyxRQUFRLENBQUMsU0FBYztBQUNsRCxjQUFJLFFBQVEsT0FBTyxTQUFTLFlBQVksS0FBSyxvQkFBcUIsUUFBTyxDQUFDO0FBRTFFLGdCQUFNLFVBQ0osT0FBTyxTQUFTLFdBQXdCLE9BQ3hDLE9BQU8sS0FBSyxpQkFBaUIsV0FBVyxLQUFLLGVBQzdDO0FBRUYsZ0JBQU0sT0FBTyxRQUFRLE1BQU0sR0FBRyxFQUFFLENBQUMsRUFBRSxLQUFLO0FBQ3hDLGNBQUksQ0FBQyxRQUFRLEtBQUssSUFBSSxJQUFJLEtBQUssS0FBSyxJQUFJLElBQUksRUFBRyxRQUFPLENBQUM7QUFDdkQsZUFBSyxJQUFJLElBQUk7QUFFYixnQkFBTSxTQUFTLEtBQ1osUUFBUSxZQUFZLEVBQUUsRUFDdEIsUUFBUSxRQUFRLEdBQUcsRUFDbkIsS0FBSyxFQUNMLFFBQVEsU0FBUyxDQUFDLE1BQVcsRUFBRSxZQUFZLENBQUM7QUFFL0MsaUJBQU8sWUFBWSxDQUFDLEtBQUssU0FBUyxJQUFJLE1BQU0sSUFBSSxJQUFJLElBQUksSUFBSSxDQUFDLElBQUk7QUFBQSxRQUNuRSxDQUFDO0FBQUEsTUFDSDtBQUdBLFlBQU0sT0FBTyxNQUFNLFFBQVEsR0FBRyxJQUFJLE1BQU0sQ0FBQztBQUN6QyxZQUFNLFFBQWtCLENBQUM7QUFFekIsWUFBTSxXQUFXLENBQUMsTUFBMEI7QUFDMUMsY0FBTSxRQUFRLEtBQUssSUFBSSxRQUFRLGdCQUFnQixFQUFFLEVBQUUsS0FBSztBQUN4RCxZQUFJLENBQUMsUUFBUSxLQUFLLElBQUksSUFBSSxLQUFLLEtBQUssSUFBSSxJQUFJLEVBQUc7QUFDL0MsYUFBSyxJQUFJLElBQUk7QUFDYixjQUFNLEtBQUssSUFBSTtBQUFBLE1BQ2pCO0FBRUEsaUJBQVcsS0FBSyxNQUFNO0FBQ3BCLFlBQUksQ0FBQyxFQUFHO0FBQ1IsWUFBSSxPQUFPLE1BQU0sWUFBWSxPQUFPLEVBQUUsU0FBUyxVQUFVO0FBQ3ZELG1CQUFTLEVBQUUsSUFBSTtBQUFBLFFBQ2pCO0FBRUEsWUFBSSxPQUFPLE1BQU0sWUFBWSxNQUFNLFFBQVEsRUFBRSxPQUFPLEdBQUc7QUFDckQscUJBQVcsT0FBTyxFQUFFLFNBQVM7QUFDM0IsZ0JBQUksT0FBTyxPQUFPLFFBQVEsWUFBWSxPQUFPLElBQUksU0FBUyxVQUFVO0FBQ2xFLHVCQUFTLElBQUksSUFBSTtBQUFBLFlBQ25CO0FBQUEsVUFDRjtBQUFBLFFBQ0Y7QUFBQSxNQUNGO0FBR0EsVUFBSSxNQUFNLFFBQVE7QUFDaEIsZUFBTyxNQUFNLElBQUksVUFBUTtBQUN2QixnQkFBTSxTQUFTLEtBQ1osUUFBUSxZQUFZLEVBQUUsRUFDdEIsUUFBUSxRQUFRLEdBQUcsRUFDbkIsS0FBSyxFQUNMLFFBQVEsU0FBUyxDQUFDLE1BQVcsRUFBRSxZQUFZLENBQUM7QUFDL0MsaUJBQU8sV0FBVyxLQUFLLFFBQVEsSUFBSSxNQUFNLElBQUksSUFBSSxPQUFPO0FBQUEsUUFDMUQsQ0FBQztBQUFBLE1BQ0g7QUFHQSxhQUFPLEtBQ0osT0FBTyxDQUFDLE1BQVcsS0FBSyxPQUFPLEVBQUUsU0FBUyxRQUFRLEVBQ2xELElBQUksQ0FBQyxNQUFXLEVBQUUsS0FBSyxRQUFRLGdCQUFnQixFQUFFLEVBQUUsS0FBSyxDQUFDO0FBQUEsSUFDOUQ7QUFBQSxFQUNGO0FBQUEsRUFHRSxFQUFFLFVBQVUsTUFBTSxTQUFTLE1BQU0sTUFBTSxPQUFLLE1BQU0sUUFBUSxDQUFDLElBQUUsRUFBRSxDQUFDLEVBQUUsS0FBRyxFQUFFO0FBQUEsRUFDdkUsRUFBRSxVQUFVLE1BQU0sU0FBUyxNQUFNLE1BQU0sUUFBTSxJQUFJLFdBQVcsR0FBRztBQUFBLEVBQy9ELEVBQUUsVUFBVSxvQkFBbUIsU0FBUyxNQUFNLE1BQU0sQ0FBQyxRQUFjLE9BQU8sUUFBUSxZQUFZLFFBQVEsUUFBUSxRQUFRLE1BQU0sSUFBSSxLQUFLLElBQUk7QUFBQSxFQUN6SSxFQUFFLFVBQVUsWUFBZ0IsU0FBUyxXQUFXLE1BQU0sU0FBSyxNQUFNLFFBQVEsR0FBRyxJQUFFLElBQUksQ0FBQyxJQUFFLEtBQUssT0FBTyxFQUFFO0FBQUEsRUFDbkcsRUFBRSxVQUFVLGFBQWdCLFNBQVMsV0FBVyxNQUFNLFNBQUssTUFBTSxRQUFRLEdBQUcsSUFBRSxJQUFJLENBQUMsSUFBRSxLQUFLLE9BQU8sRUFBRTtBQUFBLEVBQ25HLEVBQUUsVUFBVSxnQkFBZ0IsU0FBUyxXQUFXLE1BQU0sU0FBSyxNQUFNLFFBQVEsR0FBRyxJQUFFLElBQUksQ0FBQyxJQUFFLEtBQUssT0FBTyxFQUFFO0FBQUEsRUFDbkcsRUFBRSxVQUFVLGdCQUFnQixTQUFTLFdBQVcsTUFBTSxTQUFLLE1BQU0sUUFBUSxHQUFHLElBQUUsSUFBSSxDQUFDLElBQUUsS0FBSyxPQUFPLEVBQUU7QUFBQSxFQUNuRyxFQUFFLFVBQVUsVUFBZ0IsU0FBUyxXQUFXLE1BQU0sU0FBSyxNQUFNLFFBQVEsR0FBRyxJQUFFLElBQUksQ0FBQyxJQUFFLEtBQUssT0FBTyxFQUFFO0FBQUEsRUFDbkcsRUFBRSxVQUFVLFlBQWdCLFNBQVMsV0FBVyxNQUFNLFNBQUssTUFBTSxRQUFRLEdBQUcsSUFBRSxJQUFJLENBQUMsSUFBRSxLQUFLLE9BQU8sRUFBRTtBQUFBLEVBQ25HO0FBQUEsSUFDRSxVQUFVO0FBQUEsSUFDVixTQUFTO0FBQUEsSUFDVCxNQUFNLENBQUMsTUFBVztBQUNoQixZQUFNLE1BQU0sTUFBTSxRQUFRLENBQUMsSUFBSSxFQUFFLEtBQUssR0FBRyxJQUFJLE9BQU8sTUFBTSxXQUFXLElBQUksT0FBTyxDQUFDO0FBQ2pGLFlBQU0sVUFBVSxJQUNiLFFBQVEsVUFBVSxLQUFLLEVBQ3ZCLFFBQVEsVUFBVSxXQUFXLEVBQzdCLFFBQVEsVUFBVSxTQUFTLEVBQzNCLFFBQVEsVUFBVSxRQUFRLEVBQzFCLFFBQVEsVUFBVSxTQUFTLEVBQzNCLFFBQVEsVUFBVSxNQUFNLEVBQ3hCLFFBQVEsVUFBVSxNQUFNO0FBRTNCLGFBQU8sc0JBQXNCLE9BQU87QUFBQSxJQUN0QztBQUFBLEVBQ0Y7QUFBQSxFQUNFO0FBQUEsSUFDRSxVQUFVO0FBQUEsSUFDVixTQUFTO0FBQUEsSUFDVCxNQUFNLENBQUMsTUFBK0I7QUFFcEMsVUFBSSxPQUFPLE1BQU0sVUFBVTtBQUV6QixlQUFPLGNBQWMsQ0FBQyxLQUFLLElBQUksQ0FBQztBQUFBLE1BQ2xDO0FBR0EsVUFBSSxLQUFLLE9BQU8sTUFBTSxVQUFVO0FBQzlCLGNBQU0sT0FBTyxPQUFPLEVBQUUsUUFBUSxFQUFFLEVBQUUsWUFBWTtBQUU5QyxZQUFJLGNBQWMsSUFBSSxHQUFHO0FBQ3ZCLGlCQUFPLGNBQWMsSUFBSTtBQUFBLFFBQzNCO0FBRUEsY0FBTSxPQUFPLEVBQUUsT0FBTyxJQUFJLEVBQUUsSUFBSSxJQUFJO0FBQ3BDLGNBQU0sT0FBTyxNQUFNLFFBQVEsRUFBRSxJQUFJLElBQUksRUFBRSxLQUFLLElBQUksR0FBRyxJQUFJLENBQUM7QUFDeEQsZUFBTyxLQUFLLFNBQVMsR0FBRyxJQUFJLEtBQUssS0FBSyxLQUFLLElBQUksQ0FBQyxNQUFNO0FBQUEsTUFDeEQ7QUFFQSxhQUFPO0FBQUEsSUFDVDtBQUFBLEVBQ0Y7QUFBQTtBQUFBLEVBSUYsRUFBRSxVQUFVLFFBQVUsU0FBUyxjQUFjO0FBQUEsRUFDN0MsRUFBRSxVQUFVLFVBQVUsU0FBUyxVQUFVLE1BQU0sT0FBSztBQUNoRCxVQUFNLElBQUksT0FBTyxLQUFHLEVBQUUsRUFBRSxZQUFZO0FBQ3BDLFdBQU8sS0FBSyxNQUFJLFNBQVMsRUFBRSxDQUFDLEVBQUUsWUFBWSxJQUFFLEVBQUUsTUFBTSxDQUFDLElBQUk7QUFBQSxFQUM3RCxFQUFDO0FBQUEsRUFDRDtBQUFBLElBQ0UsVUFBVTtBQUFBLElBQ1YsU0FBUztBQUFBLElBQ1QsTUFBTSxDQUFDLFFBQWE7QUFDbEIsWUFBTSxJQUFJLE9BQU8sR0FBRyxFQUFFLEtBQUssRUFBRSxZQUFZO0FBQ3pDLFVBQUk7QUFHSixVQUFJLEVBQUUsU0FBUyxJQUFJLEdBQUc7QUFDcEIsY0FBTSxXQUFXLENBQUM7QUFFbEIsZUFBTyxPQUFPLE1BQ1YsR0FBRyxLQUFLLE1BQU8sTUFBSSxNQUFPLEdBQUcsSUFBRSxHQUFHLE9BQ2xDLEdBQUcsR0FBRztBQUFBLE1BQ1o7QUFHQSxVQUFJLEVBQUUsU0FBUyxJQUFJLEdBQUc7QUFDcEIsY0FBTSxXQUFXLENBQUM7QUFFbEIsZUFBTyxPQUFPLEtBQ1YsR0FBRyxLQUFLLE1BQU8sTUFBSSxLQUFNLEdBQUcsSUFBRSxHQUFHLE9BQ2pDLEdBQUcsR0FBRztBQUFBLE1BQ1o7QUFHQSxVQUFJLEVBQUUsU0FBUyxJQUFJLEdBQUc7QUFDcEIsY0FBTSxXQUFXLENBQUM7QUFDbEIsZUFBTyxHQUFHLEtBQUssTUFBTSxNQUFNLEdBQUcsSUFBRSxHQUFHO0FBQUEsTUFDckM7QUFHQSxZQUFNLFdBQVcsQ0FBQyxLQUFLO0FBQ3ZCLGFBQU8sT0FBTyxNQUNWLEdBQUcsS0FBSyxNQUFPLE1BQUksTUFBTyxHQUFHLElBQUUsR0FBRyxPQUNsQyxHQUFHLEdBQUc7QUFBQSxJQUNaO0FBQUEsRUFDRjtBQUFBLEVBQ0EsRUFBRSxVQUFVLFVBQVUsU0FBUyxTQUFTO0FBQUEsRUFDeEMsRUFBRSxVQUFVLFdBQVcsU0FBUyxZQUFZLE1BQU0sQ0FBQyxJQUFHLFFBQVEsQ0FBQyxDQUFDLElBQUksWUFBWSxDQUFDLENBQUMsSUFBSSxVQUFVO0FBQUEsRUFDaEcsRUFBRSxVQUFVLFdBQVcsU0FBUyxlQUFlLE1BQU0sT0FBSyxPQUFPLE1BQUksWUFBWSxFQUFFLFdBQVcsR0FBRyxFQUFFO0FBQUEsRUFDbkcsRUFBRSxVQUFVLGNBQWMsU0FBUyxZQUFZLE1BQU0sU0FBTyxNQUFNLFFBQVEsR0FBRyxJQUFJLElBQUksSUFBSSxPQUFLLGFBQWEsQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLEVBQUU7QUFBQSxFQUN6SCxFQUFFLFVBQVUsVUFBVSxTQUFTLFFBQVEsTUFBTSxDQUFDLEdBQUUsUUFBUSxJQUFJLElBQUksT0FBTyxHQUFHLENBQUMsTUFBTSxJQUFJLElBQUksS0FBSyxHQUFHLENBQUMsS0FBSyxPQUFVO0FBQUEsRUFDakgsRUFBRSxVQUFVLGdCQUFnQixTQUFTLFdBQVcsTUFBTSxRQUFNLE1BQU0sT0FBTyxDQUFDLElBQUksTUFBTSxRQUFRLEVBQUUsSUFBSSxLQUFLLENBQUMsRUFBRSxFQUFFO0FBQUEsRUFDNUcsRUFBRSxVQUFVLFNBQVMsU0FBUyxRQUFRO0FBQUEsRUFDdEMsRUFBRSxVQUFVLFVBQVUsU0FBUyxTQUFTO0FBQUEsRUFDeEMsRUFBRSxVQUFVLGFBQWEsU0FBUyxZQUFZLE1BQU0sQ0FBQyxNQUFXLE9BQU8sTUFBTSxXQUFXLEVBQUUsTUFBTSxHQUFHLEVBQUUsQ0FBQyxFQUFFLE9BQU8sQ0FBQyxFQUFFLFlBQVksSUFBSSxFQUFFLE1BQU0sR0FBRyxFQUFFLENBQUMsRUFBRSxNQUFNLENBQUMsRUFBRSxZQUFZLElBQUksR0FBRztBQUFBLEVBQzlLLEVBQUUsVUFBVSx3QkFBd0IsU0FBUyxVQUFVO0FBQUEsRUFDdkQ7QUFBQSxJQUNFLFVBQVU7QUFBQSxJQUNWLFNBQVMsQ0FBQyxZQUFZLGFBQWEsY0FBYyxlQUFlO0FBQUEsSUFDaEUsTUFBTSxDQUFDLE1BQU0sWUFBWTtBQUN2QixZQUFNLElBQUk7QUFDVixZQUFNLFVBQVUsT0FBTyxFQUFFLGNBQWMsWUFBWSxFQUFFLFVBQVUsS0FBSyxNQUFNO0FBQzFFLFlBQU0sVUFBVSxNQUFNLFFBQVEsRUFBRSxhQUFhLEtBQUssRUFBRSxjQUFjLFNBQVM7QUFDM0UsYUFBTyxXQUFXO0FBQUEsSUFDcEI7QUFBQSxFQUNGO0FBQUEsRUFDQTtBQUFBLElBQ0UsVUFBVTtBQUFBLElBQ1YsU0FBUztBQUFBLElBQ1QsTUFBTSxDQUFDLE9BQWMsQ0FBQyxHQUFHLFNBQVM7QUFDaEMsWUFBTSxZQUFtQztBQUFBLFFBQ3ZDLEdBQUc7QUFBQSxRQUFPLEdBQUc7QUFBQSxRQUFhLEdBQUc7QUFBQSxRQUM3QixHQUFHO0FBQUEsUUFBVSxHQUFHO0FBQUEsUUFBVyxHQUFHO0FBQUEsUUFBUSxHQUFHO0FBQUEsTUFDM0M7QUFDQSxZQUFNLE9BQWlCLENBQUM7QUFFeEIsaUJBQVcsT0FBTyxNQUFNO0FBQ3RCLFlBQUksSUFBSSxTQUFTLE1BQU0sUUFBUSxJQUFJLFNBQVMsR0FBRztBQUM3QyxnQkFBTSxNQUFNLElBQUksSUFBSSxLQUFLO0FBQ3pCLHFCQUFXLFFBQVEsSUFBSSxXQUFXO0FBQ2hDLGlCQUFLLEtBQUssR0FBRyxVQUFVLElBQUksS0FBSyxJQUFJLElBQUksR0FBRyxFQUFFO0FBQUEsVUFDL0M7QUFBQSxRQUNGLFdBQVcsSUFBSSxPQUFPO0FBQ3BCLGVBQUssS0FBSyxJQUFJLElBQUksS0FBSyxDQUFDO0FBQUEsUUFDMUIsV0FBVyxNQUFNLFFBQVEsSUFBSSxTQUFTLEdBQUc7QUFDdkMscUJBQVcsUUFBUSxJQUFJLFdBQVc7QUFDaEMsaUJBQUssS0FBSyxVQUFVLElBQUksS0FBSyxJQUFJO0FBQUEsVUFDbkM7QUFBQSxRQUNGLFdBQVcsSUFBSSxZQUFZO0FBQ3pCLGdCQUFNLENBQUMsRUFBRSxJQUFJLE9BQU8sSUFBSSxVQUFVLEVBQUUsTUFBTSxHQUFHO0FBQzdDLGVBQUssS0FBSyxHQUFHLE1BQU0sR0FBRyxFQUFFLElBQUksR0FBRyxFQUFFLEtBQUssR0FBRyxDQUFDO0FBQUEsUUFDNUMsV0FBVyxJQUFJLGNBQWM7QUFDM0IsZUFBSyxLQUFLLGFBQWE7QUFBQSxRQUN6QjtBQUFBLE1BQ0Y7QUFDQSxhQUFPLE1BQU0sS0FBSyxJQUFJLElBQUksSUFBSSxDQUFDO0FBQUEsSUFDakM7QUFBQSxFQUNGO0FBQUEsRUFDQTtBQUFBLElBQ0UsVUFBVTtBQUFBLElBQ1YsU0FBUztBQUFBO0FBQUEsSUFDVCxNQUFNLENBQUMsTUFBTSxRQUFRLENBQUMsQ0FBQyxJQUFJLFlBQVksQ0FBQyxDQUFDLElBQUk7QUFBQSxFQUMvQztBQUFBO0FBQUEsRUFFQSxFQUFFLFVBQVUsY0FBYyxTQUFTLFVBQVUsTUFBTSxPQUFLLE1BQU0sUUFBUSxDQUFDLElBQUksRUFBRSxJQUFJLEdBQUcsSUFBSSxDQUFDLEVBQUU7QUFBQSxFQUMzRixFQUFFLFVBQVUsV0FBVyxTQUFTLGFBQWE7QUFBQTtBQUFBLEVBRzdDO0FBQUEsSUFDRSxVQUFVO0FBQUEsSUFDVixTQUFVO0FBQUEsSUFDVixNQUFNLENBQUMsUUFBaUM7QUFDdEMsWUFBTSxJQUFJLE1BQU0sUUFBUSxHQUFHLElBQUssSUFBSSxDQUFDLEVBQUUsT0FBTyxJQUFNLElBQUksT0FBTztBQUMvRCxhQUFPLE1BQU0sSUFBSSxJQUFJO0FBQUEsSUFDdkI7QUFBQSxFQUNGO0FBQUEsRUFDQTtBQUFBLElBQ0UsVUFBVTtBQUFBLElBQ1YsU0FBVTtBQUFBLElBQ1YsTUFBTSxDQUFDLFFBQWlDO0FBQ3RDLFlBQU0sSUFBSSxNQUFNLFFBQVEsR0FBRyxJQUFLLElBQUksQ0FBQyxFQUFFLE9BQU8sSUFBTSxJQUFJLE9BQU87QUFDL0QsYUFBTyxNQUFNLElBQUksSUFBSTtBQUFBLElBQ3ZCO0FBQUEsRUFDRjtBQUFBLEVBQ0E7QUFBQSxJQUNFLFVBQVU7QUFBQSxJQUNWLFNBQVU7QUFBQSxJQUNWLE1BQU0sQ0FBQyxRQUFpQztBQUN0QyxZQUFNLElBQUksTUFBTSxRQUFRLEdBQUcsSUFBSyxJQUFJLENBQUMsRUFBRSxPQUFPLElBQU0sSUFBSSxPQUFPO0FBQy9ELGFBQU8sTUFBTSxJQUFJLElBQUk7QUFBQSxJQUN2QjtBQUFBLEVBQ0Y7QUFBQSxFQUNBO0FBQUEsSUFDRSxVQUFVO0FBQUEsSUFDVixTQUFVO0FBQUEsSUFDVixNQUFNLENBQUMsUUFBaUM7QUFDdEMsWUFBTSxJQUFJLE1BQU0sUUFBUSxHQUFHLElBQUssSUFBSSxDQUFDLEVBQUUsT0FBTyxJQUFNLElBQUksT0FBTztBQUMvRCxhQUFPLE1BQU0sSUFBSSxJQUFJO0FBQUEsSUFDdkI7QUFBQSxFQUNGO0FBQUEsRUFDQTtBQUFBLElBQ0UsVUFBVTtBQUFBLElBQ1YsU0FBVTtBQUFBLElBQ1YsTUFBTSxDQUFDLFFBQWlDO0FBQ3RDLFlBQU0sSUFBSSxNQUFNLFFBQVEsR0FBRyxJQUFLLElBQUksQ0FBQyxFQUFFLE9BQU8sSUFBTSxJQUFJLE9BQU87QUFDL0QsYUFBTyxNQUFNLElBQUksSUFBSTtBQUFBLElBQ3ZCO0FBQUEsRUFDRjtBQUFBLEVBQ0E7QUFBQSxJQUNFLFVBQVU7QUFBQSxJQUNWLFNBQVU7QUFBQSxJQUNWLE1BQU0sQ0FBQyxRQUFpQztBQUN0QyxZQUFNLElBQUksTUFBTSxRQUFRLEdBQUcsSUFBSyxJQUFJLENBQUMsRUFBRSxPQUFPLElBQU0sSUFBSSxPQUFPO0FBQy9ELGFBQU8sTUFBTSxJQUFJLElBQUk7QUFBQSxJQUN2QjtBQUFBLEVBQ0Y7QUFHRjtBQUlPLFNBQVMsUUFBUSxNQUFXLE1BQStCO0FBQ2hFLFFBQU0sS0FBa0IsQ0FBQztBQUN6QixhQUFXLEVBQUUsVUFBVSxTQUFTLEtBQUssS0FBSyxNQUFNO0FBQzlDLFVBQU0sT0FBTyxNQUFNLFFBQVEsT0FBTyxJQUFJLFVBQVUsQ0FBQyxPQUFPO0FBQ3hELFFBQUksTUFBVztBQUVmLGVBQVcsT0FBTyxNQUFNO0FBQ3RCLFVBQUksS0FBSyxHQUFHLEtBQUssTUFBTTtBQUNyQixjQUFNLEtBQUssR0FBRztBQUNkO0FBQUEsTUFDRjtBQUFBLElBQ0Y7QUFFQSxRQUFJLE9BQU8sS0FBTTtBQUNqQixVQUFNLE1BQU0sT0FBTyxLQUFLLEtBQUssSUFBSSxJQUFJO0FBQ3JDLE9BQUcsVUFBVSxRQUFRLENBQUMsSUFBSTtBQUFBLEVBQzVCO0FBQ0EsU0FBTztBQUNUO0FBTU8sU0FBUyxxQkFDZCxJQUNBLE1BQ1E7QUFDUixRQUFNLFdBQWdDLENBQUM7QUFHdkMsUUFBTSxpQkFBaUIsTUFBTSxRQUFRLEdBQUcsVUFBVSxpQkFBaUIsQ0FBQyxLQUM5RCxHQUFHLFVBQVUsaUJBQWlCLEVBQVksU0FBUztBQUN6RCxRQUFNLGdCQUFnQixNQUFNLFFBQVEsR0FBRyxVQUFVLGdCQUFnQixDQUFDLEtBQzVELEdBQUcsVUFBVSxnQkFBZ0IsRUFBWSxTQUFTO0FBR3hELGFBQVcsQ0FBQyxHQUFHLENBQUMsS0FBSyxPQUFPLFFBQVEsRUFBRSxHQUFHO0FBRXZDLFFBQUksTUFBTSxPQUFXO0FBRXJCLFFBQUksTUFBTSxVQUFVLGNBQWMsTUFBTSxRQUFRLENBQUMsS0FBSyxFQUFFLFdBQVcsRUFBRztBQUN0RSxTQUNHLE1BQU0sVUFBVSxvQkFBb0IsTUFBTSxVQUFVLHNCQUNyRCxNQUFNLFFBQVEsQ0FBQyxLQUFLLEVBQUUsV0FBVyxFQUNqQztBQUVGLGFBQVMsQ0FBQyxJQUFJO0FBQUEsRUFDaEI7QUFHQSxNQUFJO0FBQ0osTUFBSSxNQUFNO0FBRVIsVUFBTSxTQUFTLEtBQUssSUFBSSxPQUFLLFVBQVUsRUFBRSxRQUFRLENBQUM7QUFFbEQsaUJBQWEsT0FBTyxPQUFPLE9BQUssS0FBSyxRQUFRO0FBRTdDLGVBQVc7QUFBQSxNQUNULEdBQUcsT0FBTyxLQUFLLFFBQVEsRUFBRSxPQUFPLE9BQUssQ0FBQyxXQUFXLFNBQVMsQ0FBQyxDQUFDO0FBQUEsSUFDOUQ7QUFBQSxFQUNGLE9BQU87QUFDTCxpQkFBYSxPQUFPLEtBQUssUUFBUTtBQUFBLEVBQ25DO0FBR0EsU0FBTyxXQUNKLElBQUksT0FBSztBQUNSLFVBQU0sSUFBSSxTQUFTLENBQUM7QUFDcEIsUUFBSSxNQUFNLFFBQVEsQ0FBQyxHQUFHO0FBRXBCLFlBQU0sU0FBUyxFQUFFLElBQUksVUFBUSxLQUFLLFVBQVUsSUFBSSxDQUFDLEVBQUUsS0FBSyxJQUFJO0FBQzVELGFBQU8sR0FBRyxDQUFDLE1BQU0sTUFBTTtBQUFBLElBQ3pCO0FBQ0EsUUFBSSxPQUFPLE1BQU0sVUFBVTtBQUN6QixhQUFPLEdBQUcsQ0FBQyxNQUFNLENBQUM7QUFBQSxJQUNwQjtBQUNBLFdBQU8sR0FBRyxDQUFDLEtBQUssQ0FBQztBQUFBLEVBQ25CLENBQUMsRUFDQSxLQUFLLElBQUk7QUFDZDtBQUlPLElBQU0sZ0JBQWdCO0FBQUEsRUFDM0I7QUFBQSxFQUFhO0FBQUEsRUFBa0I7QUFBQSxFQUFTO0FBQUEsRUFBWTtBQUFBLEVBQVk7QUFBQSxFQUNoRTtBQUFBLEVBQVU7QUFBQSxFQUFlO0FBQUEsRUFBZ0I7QUFBQSxFQUFXO0FBQUEsRUFBUztBQUFBLEVBQzdEO0FBQUEsRUFBYztBQUFBLEVBQWE7QUFBQSxFQUFXO0FBQUEsRUFBa0I7QUFBQSxFQUFVO0FBQ3BFO0FBc0JPLElBQU0sYUFBc0I7QUFBQSxFQUNqQztBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQ0Y7QUFFTyxJQUFNLGVBQXdCO0FBQUEsRUFDbkM7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQ0Y7QUFFTyxJQUFNLFlBQXFCO0FBQUEsRUFDaEM7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFDRjtBQUVPLElBQU0sZ0JBQXlCO0FBQUEsRUFDcEM7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQ0Y7QUFFTyxJQUFNLGFBQXNCO0FBQUEsRUFDakM7QUFBQSxFQUNBO0FB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QU07QUFBQSxFQUNOLEdBQUc7QUFBQSxFQUNILEdBQUc7QUFDTDtBQUVPLElBQU1DLGlCQUF1QztBQUFBLEVBQ2xELElBQUs7QUFBQSxFQUNMLElBQUs7QUFBQSxFQUNMLEdBQUs7QUFBQSxFQUNMLFdBQVc7QUFBQSxFQUNYLFVBQVU7QUFBQSxFQUNWLElBQUs7QUFBQSxFQUNMLEtBQUs7QUFBQSxFQUNMLElBQUs7QUFBQSxFQUNMLEdBQUs7QUFBQSxFQUNMLElBQUs7QUFBQSxFQUNMLElBQUs7QUFBQSxFQUNMLGFBQWE7QUFBQSxFQUNiLEtBQUs7QUFBQSxFQUNMLElBQUs7QUFBQSxFQUNMLEdBQUs7QUFBQSxFQUNMLElBQUs7QUFBQSxFQUNMLEtBQUs7QUFBQSxFQUNMLEtBQUs7QUFBQSxFQUNMLEdBQUs7QUFBQSxFQUNMLEdBQUs7QUFBQSxFQUNMLElBQUs7QUFBQSxFQUNMLElBQUs7QUFBQSxFQUNMLEdBQUs7QUFBQSxFQUNMLElBQUs7QUFBQSxFQUNMLEtBQUs7QUFBQSxFQUNMLEtBQUs7QUFBQSxFQUNMLEdBQUs7QUFBQSxFQUNMLEtBQUs7QUFBQSxFQUNMLElBQUs7QUFBQSxFQUNMLEtBQUs7QUFBQSxFQUNMLElBQUs7QUFDUDtBQUdBLElBQU1DLGlCQUF1QztBQUFBO0FBQUEsRUFFM0MsS0FBTztBQUFBLEVBQ1AsS0FBTztBQUFBLEVBQ1AsS0FBTztBQUFBLEVBQ1AsS0FBTztBQUFBLEVBQ1AsTUFBTztBQUFBLEVBQ1AsTUFBTztBQUFBLEVBQ1AsTUFBTztBQUFBLEVBQ1AsT0FBTztBQUFBO0FBQUEsRUFFUCxNQUFPO0FBQUE7QUFBQSxFQUdQLE1BQU87QUFBQSxFQUNQLE1BQU87QUFBQSxFQUNQLE1BQU87QUFBQSxFQUNQLE9BQU87QUFBQSxFQUNQLE1BQU87QUFBQTtBQUFBLEVBR1AsTUFBTTtBQUFBO0FBQUEsRUFFTixLQUFNO0FBQUEsRUFDTixNQUFNO0FBQUE7QUFBQSxFQUdOLE1BQU87QUFBQSxFQUNQLEtBQU87QUFBQSxFQUNQLE9BQU87QUFBQSxFQUNQLE1BQU87QUFBQTtBQUFB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QUNBO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFDRjtBQUVPLElBQU1DLGFBQXFCO0FBQUEsRUFDaEM7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFDRjtBQUVPLElBQU1DLGlCQUF5QjtBQUFBLEVBQ3BDO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUNGO0FBRU8sSUFBTUMsY0FBc0I7QUFBQSxFQUNqQztBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQ0Y7QUFFTyxJQUFNQyxtQkFBMkI7QUFBQSxFQUN0QztBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFDRjtBQUVPLElBQU1DLGNBQXNCO0FBQUEsRUFDakM7QUFBQSxFQUNBO0FBQ0Y7QUFHTyxJQUFNQyxtQkFBOEJQLFlBQVcs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SjtBQUVBLFVBQU0sUUFBUSxJQUFJLElBQUk7QUFDdEIsUUFBSSx5QkFBTyxpQ0FBNEI7QUFBQSxFQUN6QztBQUlGOyIsCiAgIm5hbWVzIjogWyJpbXBvcnRfb2JzaWRpYW4iLCAiaW1wb3J0X29ic2lkaWFuIiwgImltcG9ydF9vYnNpZGlhbiIsICJlbnN1cmVQZXJpb2QiLCAibmFtZSIsICJjYXBpdGFsaXplRmlyc3QiLCAiYm9keSIsICJTSVpFX01BUCIsICJrZXkiLCAidW5pZmllZFNraWxscyIsICJTSVpFX01BUCIsICJ1bmlmaWVkU2tpbGxzIiwgImZlYXR1cmVzQnlMZXZlbCIsICJjb2RlIiwgImNhcCIsICJpbXBvcnRfb2JzaWRpYW4iLCAiaW5zdGFsbGVyX2V4cG9ydHMiLCAiaW1wb3J0RWRpdGlvbkRhdGEiLCAiaW1wb3J0X29ic2lkaWFuIiwgIlNPVVJDRV9OQU1FX01BUCIsICJnZXRGdWxsU291cmNlTmFtZSIsICJyZXBsYWNlNWVUYWdzIiwgImNhcGl0YWxpemVFYWNoIiwgImNhcGl0YWxpemUiLCAicmVuZGVyTWFya2Rvd25UYWJsZSIsICJyZXBsYWNlNWVUYWdzIiwgImZvcm1hdEVudHJ5IiwgInJlcGxhY2U1ZVRhZ3MiLCAicmVuZGVyTWFya2Rvd25UYWJsZSIsICJza2lwcGVkTW9uc3RlcnMiLCAiU0laRV9NQVAiLCAiQUxJR05NRU5UX01BUCIsICJjYXBpdGFsaXplRmlyc3QiLCAiZm9ybWF0U2l6ZUFiYnJldiIsICJmb3JtYXRBbGlnbm1lbnRBYmJyZXYiLCAiUkFXX05QQ1MiLCAiTk9STUFMSVpFRF9OUENfTkFNRVMiLCAibm9ybWFsaXplTmFtZSIsICJjYXRlZ29yaXplQ3JlYXR1cmUiLCAicmVuZGVyQWJpbGl0aWVzVGFibGUiLCAicmVuZGVyRW50cnkiLCAiZW5zdXJlUGVyaW9kIiwgInJlcGxhY2U1ZVRhZ3MiLCAicGFyc2VCZXN0aWFyeUZpbGUiLCAiY2FwaXRhbGl6ZUZpcnN0IiwgInNraXBwZWRNb25zdGVycyIsICJnZXRGdWxsU291cmNlTmFtZSIsICJjYXRlZ29yaXplQ3JlYXR1cmUiLCAiYnVpbGRGTSIsICJCRVNUSUFSWV9NRVRBX0RFRlMiLCAic2VyaWFsaXplRnJvbnRtYXR0ZXIiLCAiRk1fRklFTERTIiwgImZvcm1hdFNpemVBYmJyZXYiLCAiZm9ybWF0QWxpZ25tZW50QWJicmV2IiwgInJlbmRlckFiaWxpdGllc1RhYmxlIiwgIm5hbWUiLCAicmVwbGFjZTVlVGFncyIsICJyZW5kZXJFbnRyeSIsICJjYXBpdGFsaXplRmlyc3QiLCAiREFNQUdFX1RZUEVfTUFQIiwgIlBST1BFUlRZX01BUCIsICJJVEVNX1RZUEVfTUFQIiwgImNvZGVGb2xkZXJNYXAiLCAicGFyc2VJdGVtc0ZpbGUiLCAiYnVpbGRGTSIsICJJVEVNX01FVEFfREVGUyIsICJGTV9GSUVMRFMiLCAic2VyaWFsaXplRnJvbnRtYXR0ZXIiLCAicmVwbGFjZTVlVGFncyIsICJib2R5IiwgImNhcCIsICJBQklMSVRZX0ZVTEwiLCAiU0laRV9NQVAiLCAiRk1fRklFTERTIiwgInVuaWZpZWRBcm1vclByb2ZzIiwgInVuaWZpZWRXZWFwb25Qcm9mcyIsICJyZXBsYWNlNWVUYWdzIiwgIlNBVkVfTkFNRV9NQVAiLCAidW5pZmllZFNhdmVzIiwgImtleSIsICJ1bmlmaWVkU2tpbGxzIiwgInVuaWZpZWRUb29sUHJvZnMiLCAiQUxMX0ZJRUxEX0RFRlMiLCAiZ2V0RnVsbFNvdXJjZU5hbWUiLCAiU0tJTExfT1BUSU9OUyIsICJTQ0hPT0xfTUFQIiwgImZvcm1hdFRpbWUiLCAiZm9ybWF0UmFuZ2UiLCAiZm9ybWF0RHVyYXRpb24iLCAiZm9ybWF0QWxpZ25tZW50QWJicmV2IiwgIklURU1fVFlQRV9NQVAiLCAiUFJPUEVSVFlfTUFQIiwgImJ1aWxkRk0iLCAic2VyaWFsaXplRnJvbnRtYXR0ZXIiLCAiU1BFTExfS0VZUyIsICJTUEVDSUVTX0tFWVMiLCAiSVRFTV9LRVlTIiwgIkJFU1RJQVJZX0tFWVMiLCAiQ0xBU1NfS0VZUyIsICJCQUNLR1JPVU5EX0tFWVMiLCAiRkVBVFNfS0VZUyIsICJTUEVMTF9NRVRBX0RFRlMiLCAiQUxMX0ZJRUxEX0RFRlMiLCAiU1BFQ0lFU19NRVRBX0RFRlMiLCAiSVRFTV9NRVRBX0RFRlMiLCAiQkVTVElBUllfTUVUQV9ERUZTIiwgIkNMQVNTX01FVEFfREVGUyIsICJCQUNLR1JPVU5EX01FVEFfREVGUyIsICJGRUFUU19NRVRBX0RFRlMiLCAiU0NIT09MX01BUCIsICJvcmRpbmFsIiwgImZvcm1hdFJhbmdlIiwgImZvcm1hdFRpbWUiLCAiZm9ybWF0RHVyYXRpb24iLCAiZm9ybWF0Q29tcG9uZW50cyIsICJwYXJzZVNwZWxsc0ZpbGUiLCAiZ2V0RnVsbFNvdXJjZU5hbWUiLCAiYnVpbGRGTSIsICJTUEVMTF9NRVRBX0RFRlMiLCAic2VyaWFsaXplRnJvbnRtYXR0ZXIiLCAiRk1fRklFTERTIiwgImZvcm1hdEVudHJ5IiwgInNsdWciLCAiQkxPQ0tFRF9UUkFJVFMiLCAibGlua0Rpc3BsYXkiLCAibm9ybU5hbWUiLCAiZmluZEVudHJ5QnlOYW1lIiwgInBhcnNlU3BlY2llc0ZpbGUiLCAiYnVpbGRGTSIsICJTUEVDSUVTX01FVEFfREVGUyIsICJzZXJpYWxpemVGcm9udG1hdHRlciIsICJTSVpFX01BUCIsICJGTV9GSUVMRFMiLCAicmVuZGVyTWFya2Rvd25UYWJsZSIsICJyZXBsYWNlNWVUYWdzIiwgImZvcm1hdEVudHJ5IiwgImlzVHlwZWRFbnRyeSIsICJmb3JtYXRGZWF0dXJlTGluayIsICJ0b0hlYWRlckFuY2hvciIsICJPUFRfRkVBVFVSRV9UWVBFX1RPX0ZVTEwiLCAicGFyc2VDbGFzc0ZpbGUiLCAiYnVpbGRGTSIsICJDTEFTU19NRVRBX0RFRlMiLCAic2VyaWFsaXplRnJvbnRtYXR0ZXIiLCAidW5pZmllZFdlYXBvblByb2ZzIiwgInVuaWZpZWRUb29sUHJvZnMiLCAiU0tJTExfT1BUSU9OUyIsICJ1bmlmaWVkU2tpbGxzIiwgImZlYXR1cmVzQnlMZXZlbCIsICJyZXBsYWNlNWVUYWdzIiwgImZvcm1hdEZlYXR1cmVMaW5rIiwgInJlbmRlck1hcmtkb3duVGFibGUiLCAiZm9ybWF0RW50cnkiLCAiT1BUX0ZFQVRVUkVfVFlQRV9UT19GVUxMIiwgInRvSGVhZGVyQW5jaG9yIiwgImlzVHlwZWRFbnRyeSIsICJjb2RlIiwgInBhcnNlQWN0aW9uc0ZpbGUiLCAicmVwbGFjZTVlVGFncyIsICJwYXJzZUNvbmRpdGlvbnNEaXNlYXNlc0ZpbGUiLCAicGFyc2VTZW5zZXNGaWxlIiwgInBhcnNlU2tpbGxzRmlsZSIsICJwYXJzZUZlYXRzRmlsZSIsICJidWlsZEZNIiwgIkZFQVRTX01FVEFfREVGUyIsICJzZXJpYWxpemVGcm9udG1hdHRlciIsICJyZXBsYWNlNWVUYWdzIiwgInBhcnNlQmFja2dyb3VuZHNGaWxlIiwgImJ1aWxkRk0iLCAiQkFDS0dST1VORF9NRVRBX0RFRlMiLCAic2VyaWFsaXplRnJvbnRtYXR0ZXIiLCAiY2FwIiwgImh1bWFuaXplIiwgImZtdEl0ZW0iLCAicmVwbGFjZTVlVGFncyIsICJyZW5kZXJNYXJrZG93blRhYmxlIiwgImltcG9ydF9vYnNpZGlhbiIsICJsaXN0U3BlbGxGaWxlc0Zyb21HaXRIdWIiLCAibGlzdEJlc3RpYXJ5RmlsZXNGcm9tR2l0SHViIiwgIklURU1fSlNPTl9GSUxFUyIsICJsaXN0SXRlbUZpbGVzRnJvbUdpdEh1YiIsICJsaXN0Q2xhc3NGaWxlc0Zyb21HaXRIdWIiLCAiZW5zdXJlRm9sZGVyIiwgImltcG9ydEVkaXRpb25EYXRhIiwgInBhcnNlU3BlbGxzRmlsZSIsICJwYXJzZUJlc3RpYXJ5RmlsZSIsICJwYXJzZUl0ZW1zRmlsZSIsICJwYXJzZVNwZWNpZXNGaWxlIiwgInJlcyIsICJqc29uIiwgIm1kRmlsZXMiLCAicGFyc2VDbGFzc0ZpbGUiLCAicGFyc2VBY3Rpb25zRmlsZSIsICJwYXJzZUNvbmRpdGlvbnNEaXNlYXNlc0ZpbGUiLCAicGFyc2VTZW5zZXNGaWxlIiwgInBhcnNlU2tpbGxzRmlsZSIsICJwYXJzZUZlYXRzRmlsZSIsICJwYXJzZUJhY2tncm91bmRzRmlsZSIsICJpbnN0YWxsZXJfZXhwb3J0cyIsICJwYXRoIiwgImJvZHkiLCAic2VsIiwgImltcG9ydF9vYnNpZGlhbiIsICJpbXBvcnRfb2JzaWRpYW4iLCAicGF0aCIsICJpbXBvcnRfb2JzaWRpYW4iLCAiZ2V0VG9vbGtpdCIsICJwYXRoIiwgInBsdWdpbiIsICJoIiwgInMiLCAiZW5hYmxlUHJldmlldyIsICJpbXBvcnRfb2JzaWRpYW4iLCAicGF0aCIsICJwYXRoIiwgIndyYXBwZXJGaWxlIiwgImNvbnRlbnQiLCAiZGlmZkNvdW50Il0KfQo=
